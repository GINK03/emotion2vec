{"tags": ["dns", "bind9.10.1-P1", "Linux", "CentOS6.6"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nCentOS 6.6\u30b5\u30fc\u30d0\u306b\u30bd\u30fc\u30b9\u304b\u3089BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u5916\u90e8\u5411\u3051\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0(DNS\u30b3\u30f3\u30c6\u30f3\u30c4\u30b5\u30fc\u30d0)\u3092\u69cb\u7bc9\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n\u300c\u304a\u540d\u524d.com\u300d\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30de\u30b7\u30f3\u304b\u3089\u540d\u524d\u89e3\u6c7a\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u3001\u65b0\u3057\u304f\u69cb\u7bc9\u3057\u305fCentOS 6.6\u30b5\u30fc\u30d0(BIND\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u30b5\u30fc\u30d0)\u306b\u5bfe\u3057\u3066\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u304b\u3089BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u69cb\u7bc9\u3059\u308bDNS\u30b5\u30fc\u30d0\u306e\u7528\u9014\n\u4eca\u56de\u306e\u4f8b\u3067\u3001BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bCentOS 6.6\u30b5\u30fc\u30d0\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3059\u308b\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\u304a\u540d\u524d.com\u3067\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u3001BIND\u30b5\u30fc\u30d0\u4e0a\u306b\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u7528\u306e\u6b63\u5f15\u304d\u30be\u30fc\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0(NS\u30ec\u30b3\u30fc\u30c9)\u306b\u3064\u3044\u3066\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3078\u5207\u308a\u66ff\u308b\u4e8b\u3067\u3001\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306b\u30c9\u30e1\u30a4\u30f3\u306eDNS\u7ba1\u7406\u3092\u6a29\u9650\u59d4\u8b72\u3057\u307e\u3059\u3002\n\u203b\u6700\u8fd1\u306f\u4f1a\u793e\u3067\u3082\u3001\u500b\u4eba\u7684\u306b\u3082\u3001\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u300cAmazon Route53\u300d\u3092\u5229\u7528\u3059\u308b\u4e8b\u304c\u591a\u3044\u306e\u3067\u3059\u304c\u3001\u8af8\u4e8b\u60c5\u306b\u3088\u308a\u3001BIND\u3067\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u4e8b\u306b\u306a\u308a\u3001\u5099\u5fd8\u3092\u517c\u306d\u3066\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u4f8b\u793a\u7528\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3084\u30be\u30fc\u30f3\u540d\u306b\u3064\u3044\u3066\n\u672c\u30da\u30fc\u30b8\u306b\u304a\u3044\u3066\u3001\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u3064\u3044\u3066\u306f\u3001\u5b9f\u969b\u306b\u8a2d\u5b9a\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\u3067\u306f\u306a\u304f\u3001\u4f8b\u793a\u7528\u306e\u300cexample.net\u300d\u3068\u8a18\u8f09\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\nBIND\u30b5\u30fc\u30d0\u306b\u4f5c\u6210\u3059\u308bnamed.conf\u3084\u30be\u30fc\u30f3\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u4f8b\u3067\u3082\u300cexample.net\u300d\u3068\u8a18\u8f09\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n(\u5b9f\u969b\u306bBIND\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u969b\u306f\u3001named.conf\u3084\u30be\u30fc\u30f3\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u3001\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u8a18\u8ff0\u3057\u307e\u3059)\n\n\u4eca\u56de\u69cb\u7bc9\u3059\u308b\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u69cb\u6210\u4f8b\n\u5916\u90e8\u5411\u3051\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u307e\u3059\u306e\u3067\u3001\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u3001\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u304b\u3089\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3088\u308a\u30be\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u53cd\u6620\u3059\u308b\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306e\u8a082\u53f0\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306f\u30bb\u30ab\u30f3\u30c0\u30ea\u30b5\u30fc\u30d0\u3068\u547c\u3070\u308c\u308b\u4e8b\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u672c\u30da\u30fc\u30b8\u3067\u306f\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u3068\u8868\u8a18\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306b\u306f\u3001\u5b9f\u969b\u306b\u306f\u30b0\u30ed\u30fc\u30d0\u30ebIP\u30a2\u30c9\u30ec\u30b9\u3092\u4ed8\u4e0e\u3057\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u672c\u30da\u30fc\u30b8\u3067\u306f\u3001RFC 6890\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u4ee5\u4e0b\u306e\u4f8b\u793a\u7528IP\u30a2\u30c9\u30ec\u30b9\u3067\u8a18\u8f09\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n\n\n\n\u69cb\u7bc9\u3059\u308bDNS\u30b5\u30fc\u30d0\u306e\u7a2e\u985e\n\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306eNS\u30ec\u30b3\u30fc\u30c9\u540d\nBIND\u30b5\u30fc\u30d0\u306e\u30db\u30b9\u30c8\u540d\nBIND\u30b5\u30fc\u30d0\u306b\u5272\u308a\u5f53\u3066\u305f\u30b0\u30ed\u30fc\u30d0\u30ebIP\u30a2\u30c9\u30ec\u30b9\n\n\n\n\n\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\nns1.example.net.\nexternal-dns-bind-server-master-001\n203.0.113.10\n\n\n\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\nns2.example.net.\nexternal-dns-bind-server-slave-001\n203.0.113.20\n\n\n\n\u306a\u304a\u3001\u5927\u898f\u6a21\u306a\u30b5\u30a4\u30c8\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u3001\u30d7\u30ed\u30d0\u30a4\u30c0\u7b49\u304c\u63d0\u4f9b\u3059\u308b\u5916\u90e8\u306eDNS\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0(\u30bb\u30ab\u30f3\u30c0\u30ea\u30b5\u30fc\u30d0)\u3092\u5229\u7528\u3059\u308b\u3001\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306e\u53f0\u6570\u3092\u5897\u3084\u3059\u3001BIND\u30b5\u30fc\u30d0\u306e\u6027\u80fd\u6700\u9069\u5316\u306b\u5411\u3051\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u7b49\u304c\u5fc5\u8981\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nBIND 9.10.1-P1\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u3001ISC\u304b\u3089\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001BIND\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nftp://ftp.isc.org/isc/bind9/9.10.1-P1/bind-9.10.1-P1.tar.gz\n\nBIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u74b0\u5883\nBIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bOS\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\u3000\u30fbCentOS release 6.6 (2.6.32-504.3.3.el6.x86_64)\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\u30fb\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u306enamed.conf\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.oss-d.net/bind/9.7/ex_zone\nhttp://jprs.jp/tech/notice/2013-04-18-fixing-bind-openresolver.html\n\u30fb\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306eslave\u306enamed.conf\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://banikojp.blogspot.jp/2013/07/bind.html\nhttp://mountainbigroad.jp/fc5/bind_slave.html\n\u30fb\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u30b5\u30fc\u30d0\u3068slave\u30b5\u30fc\u30d0\u9593\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3064\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.atmarkit.co.jp/ait/articles/0305/10/news001_2.html\nhttp://www5.ocn.ne.jp/~m-shin/dns/bind9-notify.html\nhttp://snowland.net/nucleus/item/3616/category/7\n\u30fb\u30be\u30fc\u30f3\u8ee2\u9001\u304c\u3046\u307e\u304f\u884c\u308f\u308c\u306a\u3044\u5834\u5408\u306e\u5bfe\u5fdc\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.atmarkit.co.jp/ait/articles/0305/10/news001.html\n\u3000\u300cTCP\u306e53\u756a\u30dd\u30fc\u30c8\u304c\u7d4c\u8def\u306e\u9014\u4e2d\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u300d\n\u30fb\u69cb\u7bc9\u3057\u305f\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u306e\u30c6\u30b9\u30c8\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.openresolver.jp/\nhttps://www.jpcert.or.jp/pr/2013/pr130002.html#cli\n\nBIND 9.10.1-P1\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\u65b0\u3057\u304fOS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fCentOS 6.6\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u3001\u4ee5\u4e0b\u306b\u8a18\u8f09\u3057\u305f\u624b\u9806\u3067\u3001BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\nhttp://qiita.com/na0AaooQ/items/9ed548dd6db2a0c911c4\n\u5916\u90e8\u5411\u3051\u3068\u5185\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u5171\u901a\u306e\u90e8\u5206\u304c\u591a\u3044\u306e\u3067\u3001\u307e\u305a\u306f\u4e0a\u8a18\u624b\u9806\u3067BIND\u30b5\u30fc\u30d0\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u72ec\u81ea\u306e\u8a2d\u5b9a\u3084\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u3001\u5f8c\u8ff0\u81f4\u3057\u307e\u3059\u3002\n\nBIND 9.10.1-P1\u306b\u3088\u308b\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u69cb\u7bc9\u624b\u9806(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u5074)\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306bnamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306anamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# vi /var/named/chroot/etc/named.conf\n\n\n/var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns1.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u516c\u958b\u3059\u308b\u306e\u306753\u756a\u30dd\u30fc\u30c8\u306e\u53d7\u4ed8\u306f\u958b\u653e\u3059\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 master\u30b5\u30fc\u30d0\u5074\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type master;\n        file \"example.net.zone\";\n        notify yes;\n        allow-query { any; };\n        allow-update { none; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        also-notify {\n                203.0.113.20;\n                210.172.129.81;\n        };\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        allow-transfer {\n                203.0.113.20;\n                210.172.129.81;\n        };\n        /////\n\n};\n/////\n\n\n[root@external-dns-bind-server-master-001 ~]# cat /var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns1.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u516c\u958b\u3059\u308b\u306e\u306753\u756a\u30dd\u30fc\u30c8\u306e\u53d7\u4ed8\u306f\u958b\u653e\u3059\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 master\u30b5\u30fc\u30d0\u5074\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type master;\n        file \"example.net.zone\";\n        notify yes;\n        allow-query { any; };\n        allow-update { none; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        also-notify {\n                203.0.113.20;\n                210.172.129.81;\n        };\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        allow-transfer {\n                203.0.113.20;\n                210.172.129.81;\n        };\n        /////\n\n};\n/////\n[root@external-dns-bind-server-master-001 ~]#\n\n\u30fbnamed.conf\u306e\u69cb\u6587\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# /usr/local/sbin/named-checkconf /var/named/chroot/etc/named.conf\n[root@external-dns-bind-server-master-001 ~]#\n\n\u30fbzone\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306azone\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u7528\u306ezone\u30d5\u30a1\u30a4\u30eb\u3068\u306a\u308a\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# vi /var/named/chroot/var/named/example.net.zone\n\n\n/var/named/chroot/var/named/example.net.zone\n$ORIGIN example.net.\n$TTL 900       ; 15 min.\n@ IN SOA ns1.example.net. postmaster.example.net. (\n        2015020110  ; serial\n        3600        ; refresh (1 hour)\n        1200        ; retry (20 min.)\n        1209600     ; expire (2 weeks)\n        900         ; minimum (15 min.)\n        )\n;;\n@       IN  NS      ns1.example.net.\n@       IN  NS      ns2.example.net.\n@       IN  MX      10 mail.example.net.\n@       IN  TXT     \"v=spf1 mx ~all\"    ; TXT\n@       IN  SPF     \"v=spf1 mx ~all\"    ; SPF\n\n;; external-dns-bind-server-master-001\nns1     IN  A       203.0.113.10\n\n;; external-dns-bind-server-slave-001\nns2     IN  A       203.0.113.20\n\n;; mail-server-001\nmail    IN  A       203.0.113.30\n\n;; web-server-001\nweb-001 IN  A       203.0.113.40\nweb-002 IN  A       203.0.113.41\nweb-003 IN  A       203.0.113.42\nweb-004 IN  A       203.0.113.43\nwww     IN  CNAME   web-001\n\n\n[root@external-dns-bind-server-master-001 ~]# cat /var/named/chroot/var/named/example.net.zone\n$ORIGIN example.net.\n$TTL 900       ; 15 min.\n@ IN SOA ns1.example.net. postmaster.example.net. (\n        2015020110  ; serial\n        3600        ; refresh (1 hour)\n        1200        ; retry (20 min.)\n        1209600     ; expire (2 weeks)\n        900         ; minimum (15 min.)\n        )\n;;\n@       IN  NS      ns1.example.net.\n@       IN  NS      ns2.example.net.\n@       IN  MX      10 mail.example.net.\n@       IN  TXT     \"v=spf1 mx ~all\"    ; TXT\n@       IN  SPF     \"v=spf1 mx ~all\"    ; SPF\n\n;; external-dns-bind-server-master-001\nns1     IN  A       203.0.113.10\n\n;; external-dns-bind-server-slave-001\nns2     IN  A       203.0.113.20\n\n;; mail-server-001\nmail    IN  A       203.0.113.30\n\n;; web-server-001\nweb-001 IN  A       203.0.113.40\nweb-002 IN  A       203.0.113.41\nweb-003 IN  A       203.0.113.42\nweb-004 IN  A       203.0.113.43\nwww     IN  CNAME   web-001\n[root@external-dns-bind-server-master-001 ~]#\n\n\u30fbzone\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u6587\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# /usr/local/sbin/named-checkzone example.net /var/named/chroot/var/named/example.net.zone\nzone example.net/IN: loaded serial 2015020110\nOK\n[root@external-dns-bind-server-master-001 ~]#\n\n\u30fb\u4e0d\u8981\u306azone\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# ls -lrta /var/named/chroot/var/named/\ntotal 24\n-rw-r--r--. 1 bind bind 2196 Jan 29 01:47 named.root\ndrwxr-xr-x. 5 bind bind 4096 Jan 29 02:37 ..\ndrwxr-xr-x. 3 bind bind 4096 Jan 29 03:08 chroot\ndrwxr-xr-x. 2 bind bind 4096 Feb  2 01:07 BACKUP\n-rw-r--r--. 1 bind bind  897 Feb  2 03:04 example.net.zone\ndrwxr-xr-x. 4 bind bind 4096 Feb  2 03:05 .\n[root@external-dns-bind-server-master-001 ~]#\n\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306eiptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u3068\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u9593\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u306e\u70ba\u3001iptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# vi /etc/sysconfig/iptables\n# Firewall configuration written by system-config-firewall\n# Manual customization of this file is not recommended.\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n##### ICMP\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n##-A INPUT -p icmp -j ACCEPT\n#####\n##\n##### \u30ed\u30fc\u30ab\u30eb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u901a\u4fe1\u306f\u8a31\u53ef\u3059\u308b\n-A INPUT -i lo -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bssh\u63a5\u7d9a\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -p tcp -s 198.51.100.10/32 --dport 22 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bDNS\u901a\u4fe1(UDP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m udp -p udp -s 198.51.100.10/32 --dport 53 -j ACCEPT\n-A INPUT -m state --state NEW -m udp -p udp --dport 53 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0(master\u30b5\u30fc\u30d0\u3068slave\u30b5\u30fc\u30d0\u9593)\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u901a\u4fe1(TCP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3092\u6307\u5b9a\u3059\u308b\n## master(external-dns-bind-server-master-001 203.0.113.10)\n## slave(external-dns-bind-server-slave-001 203.0.113.20)\n-A INPUT -m state --state NEW -m tcp -p tcp -s 203.0.113.20/32 --dport 53 -j ACCEPT\n#####\n##\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n\n\u30fbiptables\u306b\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# /etc/init.d/iptables restart\niptables: Setting chains to policy ACCEPT: filter          [  OK  ]\niptables: Flushing firewall rules:                         [  OK  ]\niptables: Unloading modules:                               [  OK  ]\niptables: Applying firewall rules:                         [  OK  ]\n[root@external-dns-bind-server-master-001 ~]#\n\n\u30fbiptables\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# iptables -L\n\n\u30fbnamed\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# cat /etc/resolv.conf\nsearch example.net\nnameserver 127.0.0.1\nnameserver [\u30d7\u30ed\u30d0\u30a4\u30c0\u7b49\u304c\u63d0\u4f9b\u3059\u308b\u30d5\u30eb\u30b5\u30fc\u30d3\u30b9\u30ea\u30be\u30eb\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b]\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-master-001 ~]# /etc/init.d/named checkconfig\nnamed-checkconf -z -t /var/named/chroot /etc/named.conf\nzone example.net/IN: loaded serial 2015020110\n[root@external-dns-bind-server-master-001 ~]#\n[root@external-dns-bind-server-master-001 ~]# /etc/init.d/named restart\nStopping named:                                            [  OK  ]\nStarting named: named-checkconf -z -t /var/named/chroot /etc/named.conf\ndaemon /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n                                                           [  OK  ]\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-master-001 ~]# ps awux | grep -v grep | grep named\nbind      1351  0.0  1.9 139864 11864 ?        Ssl  04:05   0:00 /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n[root@external-dns-bind-server-master-001 ~]#\n[root@external-dns-bind-server-master-001 ~]#\n\n\u30fb\u540d\u524d\u89e3\u6c7a\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# dig www.example.net @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.example.net @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 10357\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.example.net.              IN      A\n\n;; ANSWER SECTION:\nwww.example.net.       900     IN      CNAME   web-001.example.net.\nweb-001.example.net.   900     IN      A       203.0.113.40\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns1.example.net.\nexample.net.           900     IN      NS      ns2.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:06:32 JST 2015\n;; MSG SIZE  rcvd: 151\n\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-master-001 ~]# dig example.net NS @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net NS @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 16778\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      NS\n\n;; ANSWER SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:06:46 JST 2015\n;; MSG SIZE  rcvd: 109\n\n[root@external-dns-bind-server-master-001 ~]# \n\n[root@external-dns-bind-server-master-001 ~]# dig example.net SOA @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net SOA @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 18963\n;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      SOA\n\n;; ANSWER SECTION:\nexample.net.           900     IN      SOA     ns1.example.net. postmaster.example.net. 2015020110 3600 1200 1209600 900\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns1.example.net.\nexample.net.           900     IN      NS      ns2.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:06:50 JST 2015\n;; MSG SIZE  rcvd: 156\n\n[root@external-dns-bind-server-master-001 ~]#\n\n\nBIND 9.10.1-P1\u306b\u3088\u308b\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u69cb\u7bc9\u624b\u9806(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u5074)\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306bnamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306anamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# vi /var/named/chroot/etc/named.conf\n\n\n/var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns2.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u3057\u306a\u3044\u3088\u3046\u5236\u9650\u3092\u304b\u3051\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 slave\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type slave;\n        file \"example.net-slave.zone\";\n        allow-query { any; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-master-001 203.0.113.10\n        masters {\n                203.0.113.10;\n        };\n        /////\n\n};\n/////\n\n\n[root@external-dns-bind-server-slave-001 ~]# cat /var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns2.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u3057\u306a\u3044\u3088\u3046\u5236\u9650\u3092\u304b\u3051\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 slave\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type slave;\n        file \"example.net-slave.zone\";\n        allow-query { any; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-master-001 203.0.113.10\n        masters {\n                203.0.113.10;\n        };\n        /////\n\n};\n/////\n[root@external-dns-bind-server-slave-001 ~]# \n\n\u30fbnamed.conf\u306e\u69cb\u6587\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# /usr/local/sbin/named-checkconf /var/named/chroot/etc/named.conf\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fbzone\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306b\u306f\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3088\u308a\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u306ezone\u30d5\u30a1\u30a4\u30eb\u304c\u30b3\u30d4\u30fc\u3055\u308c\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306ezone\u30d5\u30a1\u30a4\u30eb\u306f\u4e00\u5ea6\u524a\u9664\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# rm -f /var/named/chroot/var/named/example.net.zone\n\n\u30fb\u4e0d\u8981\u306azone\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# ls -lrta /var/named/chroot/var/named/\ntotal 24\n-rw-r--r--. 1 bind bind 2196 Jan 29 01:47 named.root\ndrwxr-xr-x. 5 bind bind 4096 Jan 29 02:37 ..\ndrwxr-xr-x. 3 bind bind 4096 Jan 29 03:08 chroot\ndrwxr-xr-x. 2 bind bind 4096 Feb  2 00:51 BACKUP\ndrwxr-xr-x. 4 bind bind 4096 Feb  2 03:05 .\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306eiptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u3068\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u9593\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u306e\u70ba\u3001iptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# vi /etc/sysconfig/iptables\n# Firewall configuration written by system-config-firewall\n# Manual customization of this file is not recommended.\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n##### ICMP\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n##-A INPUT -p icmp -j ACCEPT\n#####\n##\n##### \u30ed\u30fc\u30ab\u30eb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u901a\u4fe1\u306f\u8a31\u53ef\u3059\u308b\n-A INPUT -i lo -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bssh\u63a5\u7d9a\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -p tcp -s 198.51.100.10/32 --dport 22 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bDNS\u901a\u4fe1(UDP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m udp -p udp -s 198.51.100.10/32 --dport 53 -j ACCEPT\n-A INPUT -m state --state NEW -m udp -p udp --dport 53 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0(master\u30b5\u30fc\u30d0\u3068slave\u30b5\u30fc\u30d0\u9593)\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u901a\u4fe1(TCP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3092\u6307\u5b9a\u3059\u308b\n## master(external-dns-bind-server-master-001 203.0.113.10)\n## slave(external-dns-bind-server-slave-001 203.0.113.20)\n-A INPUT -m state --state NEW -m tcp -p tcp -s 203.0.113.10/32 --dport 53 -j ACCEPT\n#####\n##\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n\n\u30fbiptables\u306b\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# /etc/init.d/iptables restart\niptables: Setting chains to policy ACCEPT: filter          [  OK  ]\niptables: Flushing firewall rules:                         [  OK  ]\niptables: Unloading modules:                               [  OK  ]\niptables: Applying firewall rules:                         [  OK  ]\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fbiptables\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# iptables -L\n\n\u30fbnamed\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# cat /etc/resolv.conf\nsearch example.net\nnameserver 127.0.0.1\nnameserver [\u30d7\u30ed\u30d0\u30a4\u30c0\u7b49\u304c\u63d0\u4f9b\u3059\u308b\u30d5\u30eb\u30b5\u30fc\u30d3\u30b9\u30ea\u30be\u30eb\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b]\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# /etc/init.d/named checkconfig\nnamed-checkconf -z -t /var/named/chroot /etc/named.conf\n[root@external-dns-bind-server-slave-001 ~]#\n[root@external-dns-bind-server-slave-001 ~]# /etc/init.d/named restart\nStopping named:                                            [  OK  ]\nStarting named: named-checkconf -z -t /var/named/chroot /etc/named.conf\ndaemon /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n                                                           [  OK  ]\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# ps awux | grep -v grep | grep named\nbind      1286  0.1  1.9 139864 11872 ?        Ssl  04:15   0:00 /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fb\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3088\u3063\u3066\u3001\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u5074\u306ezone\u30d5\u30a1\u30a4\u30eb\u304c\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306b\u3082\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# ls -lrta /var/named/chroot/var/named/\ntotal 24\n-rw-r--r--. 1 bind bind 2196 Jan 29 01:47 named.root\ndrwxr-xr-x. 5 bind bind 4096 Jan 29 02:37 ..\ndrwxr-xr-x. 3 bind bind 4096 Jan 29 03:08 chroot\ndrwxr-xr-x. 2 bind bind 4096 Feb  2 00:51 BACKUP\n-rw-r--r--. 1 bind bind  743 Feb  2 03:55 example.net-slave.zone\ndrwxr-xr-x. 4 bind bind 4096 Feb  2 04:15 .\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fb\u540d\u524d\u89e3\u6c7a\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-slave-001 ~]# dig www.example.net @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.example.net @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 44353\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.example.net.              IN      A\n\n;; ANSWER SECTION:\nwww.example.net.       900     IN      CNAME   web-001.example.net.\nweb-001.example.net.   900     IN      A       203.0.113.40\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns1.example.net.\nexample.net.           900     IN      NS      ns2.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:18:48 JST 2015\n;; MSG SIZE  rcvd: 151\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig example.net NS @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net NS @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 29018\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      NS\n\n;; ANSWER SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:18:56 JST 2015\n;; MSG SIZE  rcvd: 109\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig example.net SOA @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net SOA @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 34380\n;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      SOA\n\n;; ANSWER SECTION:\nexample.net.           900     IN      SOA     ns1.example.net. postmaster.example.net. 2015020110 3600 1200 1209600 900\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:19:02 JST 2015\n;; MSG SIZE  rcvd: 156\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig web-002.example.net @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> web-002.example.net @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54281\n;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;web-002.example.net.          IN      A\n\n;; ANSWER SECTION:\nweb-002.example.net.   900     IN      A       203.0.113.41\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:19:23 JST 2015\n;; MSG SIZE  rcvd: 133\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n\nBIND\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u306e\u96a0\u853d\u78ba\u8a8d\n\u30fb\u8d77\u52d5\u3057\u305fBIND\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304cBIND 9.10.1-P1\u3067\u3042\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# hostname\nexternal-dns-bind-server-master-001\n[root@external-dns-bind-server-master-001 ~]# /var/named/chroot/sbin/named -v\nBIND 9.10.1-P1\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# hostname\nexternal-dns-bind-server-slave-001\n[root@external-dns-bind-server-slave-001 ~]# /var/named/chroot/sbin/named -v\nBIND 9.10.1-P1\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fbdig\u30b3\u30de\u30f3\u30c9\u3067\u306fBIND\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u304cunknown\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# dig +noall +ans @127.0.0.1 chaos txt version.bind\nversion.bind.           0       CH      TXT     \"unknown\"\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig +noall +ans @127.0.0.1 chaos txt version.bind\nversion.bind.           0       CH      TXT     \"unknown\"\n[root@external-dns-bind-server-slave-001 ~]#\n\n\n\u304a\u540d\u524d.com\u7ba1\u7406\u753b\u9762\u3067\u30c9\u30e1\u30a4\u30f3\u306eNS\u30ec\u30b3\u30fc\u30c9\u5207\u308a\u66ff\u3048(\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092BIND\u30b5\u30fc\u30d0\u3078\u5909\u66f4\u3059\u308b)\n\u30fb\u304a\u540d\u524d.com\u306e\u7ba1\u7406\u753b\u9762\u3067\u3001\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3(example.net)\u306eNS\u30ec\u30b3\u30fc\u30c9\u3068\u3057\u3066\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d02\u53f0(\u4eca\u56de\u306e\u4f8b\u3067\u306fns1.example.net\u3068ns2.example.net)\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\n\n\n\u30fb\u304a\u540d\u524d.com\u306e\u7ba1\u7406\u753b\u9762\u3067\u3001\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3(example.net)\u306eNS\u30ec\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u3001\u304a\u540d\u524d.com\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u304b\u3089\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3078\u5207\u308a\u66ff\u3048\u307e\u3059\u3002\n\u3000\u3000\u7b2c\u4e00DNS\u3000XXXXXX1.onamae.com\u3000\u2192\u3000ns1.example.net\n\u3000\u3000\u7b2c\u30cbDNS\u3000XXXXXX2.onamae.com\u3000\u2192\u3000ns2.example.net\n\n\n\n\n\n\n\nBIND\u52d5\u4f5c\u78ba\u8a8d\n\u30fb\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30de\u30b7\u30f3\u304b\u3089\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306ezone\u30d5\u30a1\u30a4\u30eb(example.net)\u306b\u767b\u9332\u3057\u305f\u540d\u524d\u3092\u89e3\u6c7a\u51fa\u6765\u308b\u304b\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n[user@example-CentOS ~]$ dig example.net NS\n\n; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.30.rc1.35.amzn1 <<>> example.net NS\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 29866\n;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;example.net.                  IN      NS\n\n;; ANSWER SECTION:\nexample.net.           867     IN      NS      ns1.example.net.\nexample.net.           867     IN      NS      ns2.example.net.\n\n;; Query time: 0 msec\n;; SERVER: XXX.XX.XX.XX#53(XXX.XX.XX.XX)\n;; WHEN: Mon Feb  2 05:47:08 2015\n;; MSG SIZE  rcvd: 66\n\n[user@example-CentOS ~]$\n\n[user@example-CentOS ~]$ dig web-002.example.net\n\n; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.30.rc1.35.amzn1 <<>> web-002.example.net\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 17245\n;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;web-002.example.net.          IN      A\n\n;; ANSWER SECTION:\nweb-002.example.net.   774     IN      A       203.0.113.41\n\n;; Query time: 0 msec\n;; SERVER: XXX.XX.XX.XX#53(XXX.XX.XX.XX)\n;; WHEN: Mon Feb  2 05:47:38 2015\n;; MSG SIZE  rcvd: 54\n\n[user@example-CentOS ~]$\n\nc:\\>ipconfig /flushdns\n\nWindows IP \u69cb\u6210\n\nDNS \u30ea\u30be\u30eb\u30d0\u30fc \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u6b63\u5e38\u306b\u30d5\u30e9\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3057\u305f\u3002\n\nc:\\>nslookup www.example.net\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  XXX.XXX.XXX.XXX\n\n\u6a29\u9650\u306e\u306a\u3044\u56de\u7b54:\n\u540d\u524d:    web-001.example.net\nAddress:  203.0.113.40\nAliases:  www.example.net\n\n\nc:\\>nslookup web-004.example.net\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  XXX.XXX.XXX.XXX\n\n\u6a29\u9650\u306e\u306a\u3044\u56de\u7b54:\n\u540d\u524d:    web-004.example.net\nAddress:  203.0.113.43\n\n\nc:\\>nslookup mail.example.net\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  XXX.XXX.XXX.XXX\n\n\u6a29\u9650\u306e\u306a\u3044\u56de\u7b54:\n\u540d\u524d:    mail.example.net\nAddress:  203.0.113.30\n\n\nc:\\>\n\n\u30fb\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30de\u30b7\u30f3\u304b\u3089\u3001BIND\u30b5\u30fc\u30d0\u306b\u767b\u9332\u3057\u3066\u3044\u308bA\u30ec\u30b3\u30fc\u30c9\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u304b\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\nhttp://www.example.net/\nFQDN\u3067\u30a2\u30af\u30bb\u30b9\u3057\u305f\u7d50\u679c\u3001\u540d\u524d\u89e3\u6c7a\u304c\u884c\u308f\u308c\u3066\u3001A\u30ec\u30b3\u30fc\u30c9\u3067\u6307\u5b9a\u3057\u3066\u3044\u308bWeb\u30b5\u30fc\u30d0\u4e0a\u306e\u30da\u30fc\u30b8\u306e\u5185\u5bb9\u8868\u793a\u3055\u308c\u308b\u4e8b\u3092\u78ba\u8a8d\u51fa\u6765\u307e\u3057\u305f\u3002\u540d\u524d\u89e3\u6c7a\u51fa\u6765\u308b\u4e8b\u3092\u78ba\u8a8d\u51fa\u6765\u307e\u3057\u305f\u3002\n\n\nBIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\n\u30fb\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u78ba\u8a8d\u30b5\u30a4\u30c8\u3084\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nhttp://www.openresolver.jp/\nhttps://www.jpcert.or.jp/pr/2013/pr130002.html#cli\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u300cNOT open\u300d\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306f\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n[root@external-dns-bind-server-master-001 ~]# curl --location-trusted http://www.openresolver.jp/cli/check.html\nConfigured DNS server: [NOT open] XXX.XXX.XXX.XXX(**********************)\nSource IP address: [NOT open] 203.0.113.10(**********************)\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# curl --location-trusted http://www.openresolver.jp/cli/check.html\nConfigured DNS server: [NOT open] XXX.XXX.XXX.XXX(**********************)\nSource IP address: [NOT open] 203.0.113.20(**********************)\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u3053\u3053\u307e\u3067\u306e\u8a2d\u5b9a\u3067\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u304c\u300c\u304a\u540d\u524d.com\u300d\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u3001\u540d\u524d\u89e3\u6c7a\u306e\u5fdc\u7b54\u3092\u8fd4\u3059\u3068\u3053\u308d\u307e\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nBIND\u30b5\u30fc\u30d0\u306b\u8ffd\u52a0\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\n\u4ee5\u4e0b\u306fBIND\u30b5\u30fc\u30d0\u3092\u7a3c\u52d5\u3055\u305b\u308b\u4e0a\u3067\u306f\u3001\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u8ca0\u8377\u78ba\u8a8d\u306b\u4fbf\u5229\u306asysstat(sar\u30b3\u30de\u30f3\u30c9)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# yum -y install sysstat\n\n[root@external-dns-bind-server-slave-001 ~]# yum -y install sysstat\n\n\nBIND\u30b5\u30fc\u30d0\u306e\u4e0d\u8981\u30b5\u30fc\u30d3\u30b9\u505c\u6b62\n\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u5834\u5408\u3001\u65e2\u306b\u4e0d\u8981\u30b5\u30fc\u30d3\u30b9\u306f\u505c\u6b62\u6e08\u307f\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u5916\u90e8\u306b\u516c\u958b\u3059\u308b\u30b5\u30fc\u30d0\u306e\u70ba\u3001\u518d\u5ea6\u4e0d\u8981\u30b5\u30fc\u30d3\u30b9\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nhttp://qiita.com/na0AaooQ/items/9ed548dd6db2a0c911c4\n[root@external-dns-bind-server-slave-001 ~]# chkconfig --list\nacpid           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nauditd          0:off   1:off   2:on    3:on    4:on    5:on    6:off\ncrond           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nip6tables       0:off   1:off   2:on    3:on    4:on    5:on    6:off\niptables        0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnamed           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetfs           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nntpdate         0:off   1:off   2:off   3:off   4:off   5:off   6:off\npostfix         0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrdisc           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrestorecond     0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrsyslog         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsaslauthd       0:off   1:off   2:off   3:off   4:off   5:off   6:off\nsshd            0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsysstat         0:off   1:on    2:on    3:on    4:on    5:on    6:off\nudev-post       0:off   1:on    2:off   3:off   4:off   5:off   6:off\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# chkconfig --list | awk '{printf \"%s\\t\\t%s\\n\", $1,$5}' | grep 3:on\nauditd          3:on\ncrond           3:on\nip6tables               3:on\niptables                3:on\nnamed           3:on\nnetwork         3:on\nrsyslog         3:on\nsshd            3:on\nsysstat         3:on\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-master-001 ~]# hostname\nexternal-dns-bind-server-master-001\n[root@external-dns-bind-server-master-001 ~]# chkconfig --list\nacpid           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nauditd          0:off   1:off   2:on    3:on    4:on    5:on    6:off\ncrond           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nip6tables       0:off   1:off   2:on    3:on    4:on    5:on    6:off\niptables        0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnamed           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetfs           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nntpdate         0:off   1:off   2:off   3:off   4:off   5:off   6:off\npostfix         0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrdisc           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrestorecond     0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrsyslog         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsaslauthd       0:off   1:off   2:off   3:off   4:off   5:off   6:off\nsshd            0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsysstat         0:off   1:on    2:on    3:on    4:on    5:on    6:off\nudev-post       0:off   1:on    2:off   3:off   4:off   5:off   6:off\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-master-001 ~]# chkconfig --list | awk '{printf \"%s\\t\\t%s\\n\", $1,$5}' | grep 3:on\nauditd          3:on\ncrond           3:on\nip6tables               3:on\niptables                3:on\nnamed           3:on\nnetwork         3:on\nrsyslog         3:on\nsshd            3:on\nsysstat         3:on\n[root@external-dns-bind-server-master-001 ~]#\n\n\nBIND\u30b5\u30fc\u30d0\u306b\u4e0d\u8981\u306a\u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u306a\u3044\u304b\u30c6\u30b9\u30c8\u3059\u308b\n\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u3001nmap\u30b3\u30de\u30f3\u30c9\u3067\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u3066\u3001ssh(TCP\u30dd\u30fc\u30c822)\u3084domain(UDP\u30dd\u30fc\u30c853\u756a)\u4ee5\u5916\u306e\u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u306a\u3044\u4e8b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\nBIND\u30b5\u30fc\u30d0\u5074\u306eiptables\u3067\u3001nmap\u3092\u5b9f\u884c\u3059\u308b\u30de\u30b7\u30f3\u304b\u3089\u306e\u5168\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u4e00\u6642\u7684\u306b\u8a31\u53ef\u3057\u307e\u3059\u3002\n\u30fbTCP\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u306e\u4f8b\n\u4ee5\u4e0b\u306fBIND\u30b5\u30fc\u30d0(\u4eca\u56de\u306e\u4f8b\u3067\u306f203.0.113.10)\u306b\u5bfe\u3057\u3066\u3001TCP1\uff5e65535\u756a\u307e\u3067\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u308b\u4f8b\u3067\u3059\u3002filtered\u3068\u8868\u793a\u3055\u308c\u305f\u30dd\u30fc\u30c8\u306f\u9589\u3058\u3066\u3044\u307e\u3059\u3002\n[root@portscan-client ~]# nmap -sT -P0 -p 1-65535 203.0.113.10\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:22 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\n\nHost is up (0.27s latency).\nPORT   STATE    SERVICE\n1/tcp  filtered tcpmux\n2/tcp  filtered compressnet\n3/tcp  filtered compressnet\n4/tcp  filtered unknown\n\u3000(\u7701\u7565)\n20/tcp filtered ftp-data\n21/tcp filtered ftp\n\u3000(\u7701\u7565)\n53/tcp filtered domain\n\u3000(\u7701\u7565)\n\n\u30fbUDP\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u306e\u4f8b\n\u4ee5\u4e0b\u306fBIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u3001UDP1\uff5e65535\u756a\u307e\u3067\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u308b\u4f8b\u3067\u3059\u3002opne\u3068\u8868\u793a\u3055\u308c\u305f\u30dd\u30fc\u30c8\u306f\u958b\u3044\u3066\u3044\u307e\u3059\u3002\n[root@portscan-client ~]# nmap -sU -P0 -p 1-65535 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:26 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0026s latency).\nPORT   STATE    SERVICE\n1/udp  filtered tcpmux\n2/udp  filtered compressnet\n3/udp  filtered compressnet\n\u3000(\u7701\u7565)\n20/udp filtered ftp-data\n21/udp filtered ftp\n\u3000(\u7701\u7565)\n53/udp open  domain\n\u3000(\u7701\u7565)\n\n\u30fb\u958b\u3044\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u4f8b\u3002\nBIND\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u306f\u96a0\u853d\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@portscan-client ~]# nmap -sV -P0 -p 22-53 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:33 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0053s latency).\nNot shown: 30 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 5.3 (protocol 2.0)\n53/tcp open  domain  ISC BIND unknown\n\nService detection performed. Please report any incorrect results at http://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 6.11 seconds\n[root@portscan-server ~]#\n\n\u30fb\u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u308b\u5834\u5408\u306e\u4f8b\u3002\n\u3061\u306a\u307f\u306b\u3001BIND\u30b5\u30fc\u30d0\u69cb\u7bc9\u4e2d\u306eiptables\u3092\u8a2d\u5b9a\u3059\u308b\u524d\u306e\u6bb5\u968e\u3067\u3001BIND\u30b5\u30fc\u30d0\u306b\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u958b\u3044\u3066\u3044\u308b\u30dd\u30fc\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n[root@portscan-client ~]# nmap -sT -P0 -p 1-65535 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:07 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0054s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\n53/tcp open  domain\n\nNmap done: 1 IP address (1 host up) scanned in 3.17 seconds\n[root@portscan-client ~]#\n\n[root@portscan-client ~]# nmap -sV -P0 -p 1-65535 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:09 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0060s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 5.3 (protocol 2.0)\n53/tcp open  domain  ISC BIND unknown\n\nService detection performed. Please report any incorrect results at http://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 11.97 seconds\n[root@portscan-client ~]#\n\n\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u306e\u78ba\u8a8d\u304c\u7d42\u308f\u3063\u305f\u3089\u3001BIND\u30b5\u30fc\u30d0\u5074\u306eiptables\u306e\u8a2d\u5b9a\u3092\u5143\u901a\u308a\u306b\u3057\u3066\u3001\u4e00\u6642\u7684\u306b\u8ffd\u52a0\u3057\u305fnmap\u5b9f\u884c\u30de\u30b7\u30f3\u304b\u3089\u306e\u901a\u4fe1\u8a31\u53ef\u3092\u7121\u52b9\u5316\u3057\u307e\u3059\u3002\n\n\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u518d\u5e30\u691c\u7d22\u306e\u7121\u52b9\u5316\u78ba\u8a8d\n\u30fb\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3092\u6307\u5b9a\u3057\u3066\u518d\u5e30\u691c\u7d22\u51fa\u6765\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3084\u30b3\u30f3\u30c6\u30f3\u30c4\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u304cDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0(\u30d5\u30eb\u30b5\u30fc\u30d3\u30b9\u30ea\u30be\u30eb\u30d0)\u3068\u3057\u3066\u52d5\u4f5c\u3057\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@external-dns-bind-server-master-001 ~]# dig www.yahoo.com @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.yahoo.com @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: REFUSED, id: 62977\n;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.yahoo.com.                 IN      A\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Thu Feb 05 00:20:56 JST 2015\n;; MSG SIZE  rcvd: 42\n\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig www.yahoo.com @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.yahoo.com @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: REFUSED, id: 37587\n;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.yahoo.com.                 IN      A\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Thu Feb 05 00:21:36 JST 2015\n;; MSG SIZE  rcvd: 42\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fb\u30ea\u30e2\u30fc\u30c8\u30de\u30b7\u30f3\u304b\u3089\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u6a29\u5a01\u3092\u6301\u305f\u306a\u3044\u30be\u30fc\u30f3\u306e\u540d\u524d\u89e3\u6c7a\u51fa\u6765\u306a\u3044\u4e8b\u3001\u518d\u5e30\u691c\u7d22\u51fa\u6765\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nC:\\>ipconfig /flushdns\n\nWindows IP \u69cb\u6210\n\nDNS \u30ea\u30be\u30eb\u30d0\u30fc \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u6b63\u5e38\u306b\u30d5\u30e9\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3057\u305f\u3002\n\nC:\\>nslookup web-002.example.net 203.0.113.10\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.10\n\n\u540d\u524d:    web-002.example.net\nAddress:  203.0.113.41\n\n\nC:\\>nslookup www.yahoo.com 203.0.113.10\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.10\n\n*** UnKnown \u304c www.yahoo.com \u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093: Query refused\n\nC:\\>\n\nC:\\>ipconfig /flushdns\n\nWindows IP \u69cb\u6210\n\nDNS \u30ea\u30be\u30eb\u30d0\u30fc \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u6b63\u5e38\u306b\u30d5\u30e9\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3057\u305f\u3002\n\nC:\\>nslookup web-002.example.net 203.0.113.20\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.20\n\n\u540d\u524d:    web-002.example.net\nAddress:  203.0.113.41\n\n\nC:\\>nslookup www.yahoo.com 203.0.113.20\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.20\n\n*** UnKnown \u304c www.yahoo.com \u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093: Query refused\n\nC:\\>\n\n\nDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u6709\u7121\u30c1\u30a7\u30c3\u30af\n\u4eca\u56de\u69cb\u7bc9\u3057\u305f\u306e\u306f\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u305f\u306e\u306b\u3001\u610f\u56f3\u305b\u305aDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u518d\u5e30\u691c\u7d22\u306b\u3088\u308b\u540d\u524d\u89e3\u6c7a\u304c\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3001\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u3068\u3057\u3066\u5fdc\u7b54\u3092\u8fd4\u3059\u72b6\u614b\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u69cb\u7bc9\u3057\u305f\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3067\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u7121\u52b9\u5316\u306b\u306a\u3063\u3066\u304a\u308a\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u304c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nBIND\u3067DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\nhttp://www.ipa.go.jp/security/vuln/documents/2008/200809_DNS.html\nhttp://blog.cles.jp/item/2733\nDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u4e8b\u3067\u3001\u4ee5\u4e0b\u306e\u8106\u5f31\u6027\u306e\u6709\u7121\u306b\u3064\u3044\u3066\u3001\u30c1\u30a7\u30c3\u30af\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u3000A. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u3000B. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308bID\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u3000C. \u5916\u90e8\u304b\u3089\u306e\u518d\u5e30\u7684\u306aDNS\u554f\u3044\u5408\u308f\u305b\u306b\u5bfe\u3057\u3066\u56de\u7b54\u3057\u3066\u3057\u307e\u3046\u3002\nDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fbA. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u8106\u5f31\u6027\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u4e0a\u3067\u3001\u4ee5\u4e0b\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u7528\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u5834\u5408\u3001\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3051\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n[root@external-dns-bind-server-master-001 ~]# dig -x dig +short porttest.dns-oarc.net TXT\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig -x dig +short porttest.dns-oarc.net TXT\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fbB. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308bID\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u8106\u5f31\u6027\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u4e0a\u3067\u3001\u4ee5\u4e0b\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u7528\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u5834\u5408\u3001\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3051\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n[root@external-dns-bind-server-master-001 ~]# dig +short txidtest.dns-oarc.net TXT\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig +short txidtest.dns-oarc.net TXT\n[root@external-dns-bind-server-slave-001 ~]#\n\n\u30fbC. \u5916\u90e8\u304b\u3089\u306e\u518d\u5e30\u7684\u306aDNS\u554f\u3044\u5408\u308f\u305b\u306b\u5bfe\u3057\u3066\u56de\u7b54\u3057\u3066\u3057\u307e\u3046\u8106\u5f31\u6027\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\u73fe\u72b6\u300cIANA \u2015 Cross-Pollination Scan\u300d\u306b\u3001\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3048\u308b\u753b\u9762\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nhttp://www.iana.org/\n\u4ee3\u308f\u308a\u306b\u3001\u524d\u8ff0\u306e\u300cBIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\u300d\u3067\u3001BIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\u554f\u984c\u306a\u3051\u308c\u3070\u3001BIND\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\u306f\u3072\u3068\u307e\u305a\u5b8c\u4e86\u3067\u3059\u3002\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\n\u306f\u3058\u3081\u306b\n===\n\nCentOS 6.6\u30b5\u30fc\u30d0\u306b\u30bd\u30fc\u30b9\u304b\u3089BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u5916\u90e8\u5411\u3051\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0(DNS\u30b3\u30f3\u30c6\u30f3\u30c4\u30b5\u30fc\u30d0)\u3092\u69cb\u7bc9\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n\n\u300c\u304a\u540d\u524d.com\u300d\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30de\u30b7\u30f3\u304b\u3089\u540d\u524d\u89e3\u6c7a\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u3001\u65b0\u3057\u304f\u69cb\u7bc9\u3057\u305fCentOS 6.6\u30b5\u30fc\u30d0(BIND\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u30b5\u30fc\u30d0)\u306b\u5bfe\u3057\u3066\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u304b\u3089BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u69cb\u7bc9\u3059\u308bDNS\u30b5\u30fc\u30d0\u306e\u7528\u9014\n===\n\n\u4eca\u56de\u306e\u4f8b\u3067\u3001BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bCentOS 6.6\u30b5\u30fc\u30d0\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3059\u308b\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\n\u304a\u540d\u524d.com\u3067\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u3001BIND\u30b5\u30fc\u30d0\u4e0a\u306b\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u7528\u306e\u6b63\u5f15\u304d\u30be\u30fc\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0(NS\u30ec\u30b3\u30fc\u30c9)\u306b\u3064\u3044\u3066\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3078\u5207\u308a\u66ff\u308b\u4e8b\u3067\u3001\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306b\u30c9\u30e1\u30a4\u30f3\u306eDNS\u7ba1\u7406\u3092\u6a29\u9650\u59d4\u8b72\u3057\u307e\u3059\u3002\n\n\u203b\u6700\u8fd1\u306f\u4f1a\u793e\u3067\u3082\u3001\u500b\u4eba\u7684\u306b\u3082\u3001\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u300cAmazon Route53\u300d\u3092\u5229\u7528\u3059\u308b\u4e8b\u304c\u591a\u3044\u306e\u3067\u3059\u304c\u3001\u8af8\u4e8b\u60c5\u306b\u3088\u308a\u3001BIND\u3067\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u4e8b\u306b\u306a\u308a\u3001\u5099\u5fd8\u3092\u517c\u306d\u3066\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u4f8b\u793a\u7528\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3084\u30be\u30fc\u30f3\u540d\u306b\u3064\u3044\u3066\n===\n\n\u672c\u30da\u30fc\u30b8\u306b\u304a\u3044\u3066\u3001\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u3064\u3044\u3066\u306f\u3001\u5b9f\u969b\u306b\u8a2d\u5b9a\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\u3067\u306f\u306a\u304f\u3001\u4f8b\u793a\u7528\u306e\u300cexample.net\u300d\u3068\u8a18\u8f09\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\nBIND\u30b5\u30fc\u30d0\u306b\u4f5c\u6210\u3059\u308bnamed.conf\u3084\u30be\u30fc\u30f3\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u4f8b\u3067\u3082\u300cexample.net\u300d\u3068\u8a18\u8f09\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n(\u5b9f\u969b\u306bBIND\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u969b\u306f\u3001named.conf\u3084\u30be\u30fc\u30f3\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u3001\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u8a18\u8ff0\u3057\u307e\u3059)\n\n\u4eca\u56de\u69cb\u7bc9\u3059\u308b\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u69cb\u6210\u4f8b\n===\n\n\u5916\u90e8\u5411\u3051\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u307e\u3059\u306e\u3067\u3001\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u3001\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u304b\u3089\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3088\u308a\u30be\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u53cd\u6620\u3059\u308b\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306e\u8a082\u53f0\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306f\u30bb\u30ab\u30f3\u30c0\u30ea\u30b5\u30fc\u30d0\u3068\u547c\u3070\u308c\u308b\u4e8b\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u672c\u30da\u30fc\u30b8\u3067\u306f\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u3068\u8868\u8a18\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306b\u306f\u3001\u5b9f\u969b\u306b\u306f\u30b0\u30ed\u30fc\u30d0\u30ebIP\u30a2\u30c9\u30ec\u30b9\u3092\u4ed8\u4e0e\u3057\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u672c\u30da\u30fc\u30b8\u3067\u306f\u3001RFC 6890\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u4ee5\u4e0b\u306e\u4f8b\u793a\u7528IP\u30a2\u30c9\u30ec\u30b9\u3067\u8a18\u8f09\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n\n|\u69cb\u7bc9\u3059\u308bDNS\u30b5\u30fc\u30d0\u306e\u7a2e\u985e       |\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306eNS\u30ec\u30b3\u30fc\u30c9\u540d | BIND\u30b5\u30fc\u30d0\u306e\u30db\u30b9\u30c8\u540d               |BIND\u30b5\u30fc\u30d0\u306b\u5272\u308a\u5f53\u3066\u305f\u30b0\u30ed\u30fc\u30d0\u30ebIP\u30a2\u30c9\u30ec\u30b9 |\n|:-----------------------------|:--------------------------------|:-----------------------------------|-------------------------------------------|\n|\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)   |ns1.example.net.                 |external-dns-bind-server-master-001 |203.0.113.10                               |\n|\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0) |ns2.example.net.                 |external-dns-bind-server-slave-001  |203.0.113.20                               |\n\n\u306a\u304a\u3001\u5927\u898f\u6a21\u306a\u30b5\u30a4\u30c8\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u3001\u30d7\u30ed\u30d0\u30a4\u30c0\u7b49\u304c\u63d0\u4f9b\u3059\u308b\u5916\u90e8\u306eDNS\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0(\u30bb\u30ab\u30f3\u30c0\u30ea\u30b5\u30fc\u30d0)\u3092\u5229\u7528\u3059\u308b\u3001\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306e\u53f0\u6570\u3092\u5897\u3084\u3059\u3001BIND\u30b5\u30fc\u30d0\u306e\u6027\u80fd\u6700\u9069\u5316\u306b\u5411\u3051\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u7b49\u304c\u5fc5\u8981\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nBIND 9.10.1-P1\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\n===\n\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u3001ISC\u304b\u3089\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001BIND\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nftp://ftp.isc.org/isc/bind9/9.10.1-P1/bind-9.10.1-P1.tar.gz\n\nBIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u74b0\u5883\n===\n\nBIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bOS\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3000\u30fbCentOS release 6.6 (2.6.32-504.3.3.el6.x86_64)\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n===\n\n\u30fb\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u306enamed.conf\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.oss-d.net/bind/9.7/ex_zone\nhttp://jprs.jp/tech/notice/2013-04-18-fixing-bind-openresolver.html\n\n\u30fb\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306eslave\u306enamed.conf\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://banikojp.blogspot.jp/2013/07/bind.html\nhttp://mountainbigroad.jp/fc5/bind_slave.html\n\n\u30fb\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u30b5\u30fc\u30d0\u3068slave\u30b5\u30fc\u30d0\u9593\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3064\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.atmarkit.co.jp/ait/articles/0305/10/news001_2.html\nhttp://www5.ocn.ne.jp/~m-shin/dns/bind9-notify.html\nhttp://snowland.net/nucleus/item/3616/category/7\n\n\u30fb\u30be\u30fc\u30f3\u8ee2\u9001\u304c\u3046\u307e\u304f\u884c\u308f\u308c\u306a\u3044\u5834\u5408\u306e\u5bfe\u5fdc\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.atmarkit.co.jp/ait/articles/0305/10/news001.html\n\u3000\u300cTCP\u306e53\u756a\u30dd\u30fc\u30c8\u304c\u7d4c\u8def\u306e\u9014\u4e2d\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u300d\n\n\u30fb\u69cb\u7bc9\u3057\u305f\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u306e\u30c6\u30b9\u30c8\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://www.openresolver.jp/\nhttps://www.jpcert.or.jp/pr/2013/pr130002.html#cli\n\nBIND 9.10.1-P1\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n===\n\n\u65b0\u3057\u304fOS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fCentOS 6.6\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u3001\u4ee5\u4e0b\u306b\u8a18\u8f09\u3057\u305f\u624b\u9806\u3067\u3001BIND 9.10.1-P1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\nhttp://qiita.com/na0AaooQ/items/9ed548dd6db2a0c911c4\n\n\u5916\u90e8\u5411\u3051\u3068\u5185\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u5171\u901a\u306e\u90e8\u5206\u304c\u591a\u3044\u306e\u3067\u3001\u307e\u305a\u306f\u4e0a\u8a18\u624b\u9806\u3067BIND\u30b5\u30fc\u30d0\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u72ec\u81ea\u306e\u8a2d\u5b9a\u3084\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u3001\u5f8c\u8ff0\u81f4\u3057\u307e\u3059\u3002\n\nBIND 9.10.1-P1\u306b\u3088\u308b\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u69cb\u7bc9\u624b\u9806(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u5074)\n===\n\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306bnamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306anamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# vi /var/named/chroot/etc/named.conf\n```\n\n```BIND:/var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns1.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u516c\u958b\u3059\u308b\u306e\u306753\u756a\u30dd\u30fc\u30c8\u306e\u53d7\u4ed8\u306f\u958b\u653e\u3059\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 master\u30b5\u30fc\u30d0\u5074\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type master;\n        file \"example.net.zone\";\n        notify yes;\n        allow-query { any; };\n        allow-update { none; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        also-notify {\n                203.0.113.20;\n                210.172.129.81;\n        };\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        allow-transfer {\n                203.0.113.20;\n                210.172.129.81;\n        };\n        /////\n\n};\n/////\n```\n\n```\n[root@external-dns-bind-server-master-001 ~]# cat /var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns1.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u516c\u958b\u3059\u308b\u306e\u306753\u756a\u30dd\u30fc\u30c8\u306e\u53d7\u4ed8\u306f\u958b\u653e\u3059\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 master\u30b5\u30fc\u30d0\u5074\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type master;\n        file \"example.net.zone\";\n        notify yes;\n        allow-query { any; };\n        allow-update { none; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        also-notify {\n                203.0.113.20;\n                210.172.129.81;\n        };\n\n        // external-dns-bind-server-slave-001 203.0.113.20\n        // onamae.com 2nd.dnsv.jp 210.172.129.81\n        allow-transfer {\n                203.0.113.20;\n                210.172.129.81;\n        };\n        /////\n\n};\n/////\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\u30fbnamed.conf\u306e\u69cb\u6587\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# /usr/local/sbin/named-checkconf /var/named/chroot/etc/named.conf\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\u30fbzone\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306azone\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u7528\u306ezone\u30d5\u30a1\u30a4\u30eb\u3068\u306a\u308a\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# vi /var/named/chroot/var/named/example.net.zone\n```\n\n```BIND:/var/named/chroot/var/named/example.net.zone\n$ORIGIN example.net.\n$TTL 900       ; 15 min.\n@ IN SOA ns1.example.net. postmaster.example.net. (\n        2015020110  ; serial\n        3600        ; refresh (1 hour)\n        1200        ; retry (20 min.)\n        1209600     ; expire (2 weeks)\n        900         ; minimum (15 min.)\n        )\n;;\n@       IN  NS      ns1.example.net.\n@       IN  NS      ns2.example.net.\n@       IN  MX      10 mail.example.net.\n@       IN  TXT     \"v=spf1 mx ~all\"    ; TXT\n@       IN  SPF     \"v=spf1 mx ~all\"    ; SPF\n\n;; external-dns-bind-server-master-001\nns1     IN  A       203.0.113.10\n\n;; external-dns-bind-server-slave-001\nns2     IN  A       203.0.113.20\n\n;; mail-server-001\nmail    IN  A       203.0.113.30\n\n;; web-server-001\nweb-001 IN  A       203.0.113.40\nweb-002 IN  A       203.0.113.41\nweb-003 IN  A       203.0.113.42\nweb-004 IN  A       203.0.113.43\nwww     IN  CNAME   web-001\n```\n\n```\n[root@external-dns-bind-server-master-001 ~]# cat /var/named/chroot/var/named/example.net.zone\n$ORIGIN example.net.\n$TTL 900       ; 15 min.\n@ IN SOA ns1.example.net. postmaster.example.net. (\n        2015020110  ; serial\n        3600        ; refresh (1 hour)\n        1200        ; retry (20 min.)\n        1209600     ; expire (2 weeks)\n        900         ; minimum (15 min.)\n        )\n;;\n@       IN  NS      ns1.example.net.\n@       IN  NS      ns2.example.net.\n@       IN  MX      10 mail.example.net.\n@       IN  TXT     \"v=spf1 mx ~all\"    ; TXT\n@       IN  SPF     \"v=spf1 mx ~all\"    ; SPF\n\n;; external-dns-bind-server-master-001\nns1     IN  A       203.0.113.10\n\n;; external-dns-bind-server-slave-001\nns2     IN  A       203.0.113.20\n\n;; mail-server-001\nmail    IN  A       203.0.113.30\n\n;; web-server-001\nweb-001 IN  A       203.0.113.40\nweb-002 IN  A       203.0.113.41\nweb-003 IN  A       203.0.113.42\nweb-004 IN  A       203.0.113.43\nwww     IN  CNAME   web-001\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\u30fbzone\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u6587\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# /usr/local/sbin/named-checkzone example.net /var/named/chroot/var/named/example.net.zone\nzone example.net/IN: loaded serial 2015020110\nOK\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\u30fb\u4e0d\u8981\u306azone\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# ls -lrta /var/named/chroot/var/named/\ntotal 24\n-rw-r--r--. 1 bind bind 2196 Jan 29 01:47 named.root\ndrwxr-xr-x. 5 bind bind 4096 Jan 29 02:37 ..\ndrwxr-xr-x. 3 bind bind 4096 Jan 29 03:08 chroot\ndrwxr-xr-x. 2 bind bind 4096 Feb  2 01:07 BACKUP\n-rw-r--r--. 1 bind bind  897 Feb  2 03:04 example.net.zone\ndrwxr-xr-x. 4 bind bind 4096 Feb  2 03:05 .\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u306eiptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30de\u30b9\u30bf\u30b5\u30fc\u30d0)\u3068\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u9593\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u306e\u70ba\u3001iptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# vi /etc/sysconfig/iptables\n# Firewall configuration written by system-config-firewall\n# Manual customization of this file is not recommended.\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n##### ICMP\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n##-A INPUT -p icmp -j ACCEPT\n#####\n##\n##### \u30ed\u30fc\u30ab\u30eb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u901a\u4fe1\u306f\u8a31\u53ef\u3059\u308b\n-A INPUT -i lo -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bssh\u63a5\u7d9a\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -p tcp -s 198.51.100.10/32 --dport 22 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bDNS\u901a\u4fe1(UDP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m udp -p udp -s 198.51.100.10/32 --dport 53 -j ACCEPT\n-A INPUT -m state --state NEW -m udp -p udp --dport 53 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0(master\u30b5\u30fc\u30d0\u3068slave\u30b5\u30fc\u30d0\u9593)\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u901a\u4fe1(TCP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3092\u6307\u5b9a\u3059\u308b\n## master(external-dns-bind-server-master-001 203.0.113.10)\n## slave(external-dns-bind-server-slave-001 203.0.113.20)\n-A INPUT -m state --state NEW -m tcp -p tcp -s 203.0.113.20/32 --dport 53 -j ACCEPT\n#####\n##\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n```\n\n\u30fbiptables\u306b\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# /etc/init.d/iptables restart\niptables: Setting chains to policy ACCEPT: filter          [  OK  ]\niptables: Flushing firewall rules:                         [  OK  ]\niptables: Unloading modules:                               [  OK  ]\niptables: Applying firewall rules:                         [  OK  ]\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\u30fbiptables\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# iptables -L\n```\n\n\u30fbnamed\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# cat /etc/resolv.conf\nsearch example.net\nnameserver 127.0.0.1\nnameserver [\u30d7\u30ed\u30d0\u30a4\u30c0\u7b49\u304c\u63d0\u4f9b\u3059\u308b\u30d5\u30eb\u30b5\u30fc\u30d3\u30b9\u30ea\u30be\u30eb\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b]\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-master-001 ~]# /etc/init.d/named checkconfig\nnamed-checkconf -z -t /var/named/chroot /etc/named.conf\nzone example.net/IN: loaded serial 2015020110\n[root@external-dns-bind-server-master-001 ~]#\n[root@external-dns-bind-server-master-001 ~]# /etc/init.d/named restart\nStopping named:                                            [  OK  ]\nStarting named: named-checkconf -z -t /var/named/chroot /etc/named.conf\ndaemon /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n                                                           [  OK  ]\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-master-001 ~]# ps awux | grep -v grep | grep named\nbind      1351  0.0  1.9 139864 11864 ?        Ssl  04:05   0:00 /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n[root@external-dns-bind-server-master-001 ~]#\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\u30fb\u540d\u524d\u89e3\u6c7a\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# dig www.example.net @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.example.net @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 10357\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.example.net.              IN      A\n\n;; ANSWER SECTION:\nwww.example.net.       900     IN      CNAME   web-001.example.net.\nweb-001.example.net.   900     IN      A       203.0.113.40\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns1.example.net.\nexample.net.           900     IN      NS      ns2.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:06:32 JST 2015\n;; MSG SIZE  rcvd: 151\n\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-master-001 ~]# dig example.net NS @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net NS @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 16778\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      NS\n\n;; ANSWER SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:06:46 JST 2015\n;; MSG SIZE  rcvd: 109\n\n[root@external-dns-bind-server-master-001 ~]# \n\n[root@external-dns-bind-server-master-001 ~]# dig example.net SOA @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net SOA @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 18963\n;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      SOA\n\n;; ANSWER SECTION:\nexample.net.           900     IN      SOA     ns1.example.net. postmaster.example.net. 2015020110 3600 1200 1209600 900\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns1.example.net.\nexample.net.           900     IN      NS      ns2.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:06:50 JST 2015\n;; MSG SIZE  rcvd: 156\n\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n\n\nBIND 9.10.1-P1\u306b\u3088\u308b\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u69cb\u7bc9\u624b\u9806(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u5074)\n===\n\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306bnamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306anamed.conf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# vi /var/named/chroot/etc/named.conf\n```\n\n```BIND:/var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns2.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u3057\u306a\u3044\u3088\u3046\u5236\u9650\u3092\u304b\u3051\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 slave\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type slave;\n        file \"example.net-slave.zone\";\n        allow-query { any; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-master-001 203.0.113.10\n        masters {\n                203.0.113.10;\n        };\n        /////\n\n};\n/////\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# cat /var/named/chroot/etc/named.conf\nControls {\n        inet 127.0.0.1 allow { localhost; } keys { rndc-key; };\n};\n\ninclude \"/etc/rndc.key\";\n\nacl \"internal-network\" {\n        localhost;\n        127.0.0.1/32;\n        198.51.100.10/32;\n        198.51.100.11/32;\n        198.51.100.100/32;\n        198.51.100.101/32;\n};\n\noptions {\n        version \"unknown\";\n        hostname \"ns2.example.net.\";\n\n        // /var/named/chroot\u3092\u57fa\u70b9\u3068\u3057\u3066\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n        // /var/named/chroot/var/named \u306e\u3088\u3046\u306a\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f/var/named\u3068\u6307\u5b9a\u3059\u308b\u3002\n        directory \"/var/named\";\n        dump-file \"/data/cache_dump.db\";\n        statistics-file \"/data/named_status.dat\";\n        pid-file \"/var/run/named/named.pid\";\n\n        // DNS\u540d\u524d\u89e3\u6c7a\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30de\u30b7\u30f3\u3092\u5236\u9650\u3059\u308b\u3002\n        // \u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u3057\u306a\u3044\u3088\u3046\u5236\u9650\u3092\u304b\u3051\u308b\u3002\n        listen-on port 53 {\n                any;\n        };\n\n        // \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u5236\u9650\u3059\u308b\n        recursion no;\n        allow-recursion { none; };\n        allow-query-cache { none; };\n\n        // DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u518d\u5e30\u691c\u7d22\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3059\u308b\n//      recursion yes;\n//      allow-recursion { 127.0.0.1; };\n        //\n\n        notify yes;\n        max-transfer-time-in 60;\n        transfer-format many-answers;\n        transfers-in 10;\n        transfers-per-ns 2;\n        allow-transfer { none; };\n\n        allow-update { none; };\n};\n\nlogging {\n        channel \"log_default\"{\n                file \"/var/log/named.log\" versions 5 size 5m;\n                print-time yes;\n                severity info;\n                print-category yes;\n        };\n        channel \"alert\" {\n                file \"/var/log/alert.log\" versions 8 size 4m;\n                severity  info;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n        channel \"query\" {\n                file \"/var/log/query.log\" versions 8 size 50m;\n                severity  debug;\n                print-time yes;\n                print-severity yes;\n                print-category yes;\n        };\n\n        category default {\"log_default\";};\n        category security {\"alert\";};\n        category queries {\"query\";};\n        category lame-servers { null; };\n};\n\nzone \".\" IN {\n        type hint;\n        file \"named.root\";\n};\n\n///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0 slave\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\n// onamae.com setting user domain\nzone \"example.net.\" IN {\n        type slave;\n        file \"example.net-slave.zone\";\n        allow-query { any; };\n\n        ///// \u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306emaster\u304b\u3089slave\u3078\u30be\u30fc\u30f3\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\n        // master(external-dns-bind-server-master-001 203.0.113.10)\n        // slave(external-dns-bind-server-slave-001 203.0.113.20)\n        //\n        // \u30be\u30fc\u30f3\u8ee2\u9001\u306fTCP53\u756a\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u70ba\u3001iptables\u3067master\u3068slave\u30b5\u30fc\u30d0\u9593\u306eTCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u4e8b\u3002\n\n        // external-dns-bind-server-master-001 203.0.113.10\n        masters {\n                203.0.113.10;\n        };\n        /////\n\n};\n/////\n[root@external-dns-bind-server-slave-001 ~]# \n```\n\n\u30fbnamed.conf\u306e\u69cb\u6587\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# /usr/local/sbin/named-checkconf /var/named/chroot/etc/named.conf\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fbzone\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306b\u306f\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3088\u308a\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u306ezone\u30d5\u30a1\u30a4\u30eb\u304c\u30b3\u30d4\u30fc\u3055\u308c\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306ezone\u30d5\u30a1\u30a4\u30eb\u306f\u4e00\u5ea6\u524a\u9664\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# rm -f /var/named/chroot/var/named/example.net.zone\n```\n\n\u30fb\u4e0d\u8981\u306azone\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# ls -lrta /var/named/chroot/var/named/\ntotal 24\n-rw-r--r--. 1 bind bind 2196 Jan 29 01:47 named.root\ndrwxr-xr-x. 5 bind bind 4096 Jan 29 02:37 ..\ndrwxr-xr-x. 3 bind bind 4096 Jan 29 03:08 chroot\ndrwxr-xr-x. 2 bind bind 4096 Feb  2 00:51 BACKUP\ndrwxr-xr-x. 4 bind bind 4096 Feb  2 03:05 .\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fb\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u306eiptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\n\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0(\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0)\u3068\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u9593\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u306e\u70ba\u3001iptables\u3067TCP53\u756a\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# vi /etc/sysconfig/iptables\n# Firewall configuration written by system-config-firewall\n# Manual customization of this file is not recommended.\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n##### ICMP\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n##-A INPUT -p icmp -j ACCEPT\n#####\n##\n##### \u30ed\u30fc\u30ab\u30eb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u901a\u4fe1\u306f\u8a31\u53ef\u3059\u308b\n-A INPUT -i lo -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bssh\u63a5\u7d9a\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -p tcp -s 198.51.100.10/32 --dport 22 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3059\u308bDNS\u901a\u4fe1(UDP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\n##-A INPUT -m state --state NEW -m udp -p udp -s 198.51.100.10/32 --dport 53 -j ACCEPT\n-A INPUT -m state --state NEW -m udp -p udp --dport 53 -j ACCEPT\n#####\n##\n##### BIND\u30b5\u30fc\u30d0(master\u30b5\u30fc\u30d0\u3068slave\u30b5\u30fc\u30d0\u9593)\u306e\u30be\u30fc\u30f3\u8ee2\u9001\u901a\u4fe1(TCP53\u756a\u30dd\u30fc\u30c8)\u3092\u8a31\u53ef\u3059\u308b\u30de\u30b7\u30f3\u3092\u6307\u5b9a\u3059\u308b\n## master(external-dns-bind-server-master-001 203.0.113.10)\n## slave(external-dns-bind-server-slave-001 203.0.113.20)\n-A INPUT -m state --state NEW -m tcp -p tcp -s 203.0.113.10/32 --dport 53 -j ACCEPT\n#####\n##\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n```\n\n\u30fbiptables\u306b\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# /etc/init.d/iptables restart\niptables: Setting chains to policy ACCEPT: filter          [  OK  ]\niptables: Flushing firewall rules:                         [  OK  ]\niptables: Unloading modules:                               [  OK  ]\niptables: Applying firewall rules:                         [  OK  ]\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fbiptables\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# iptables -L\n```\n\n\u30fbnamed\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# cat /etc/resolv.conf\nsearch example.net\nnameserver 127.0.0.1\nnameserver [\u30d7\u30ed\u30d0\u30a4\u30c0\u7b49\u304c\u63d0\u4f9b\u3059\u308b\u30d5\u30eb\u30b5\u30fc\u30d3\u30b9\u30ea\u30be\u30eb\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b]\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# /etc/init.d/named checkconfig\nnamed-checkconf -z -t /var/named/chroot /etc/named.conf\n[root@external-dns-bind-server-slave-001 ~]#\n[root@external-dns-bind-server-slave-001 ~]# /etc/init.d/named restart\nStopping named:                                            [  OK  ]\nStarting named: named-checkconf -z -t /var/named/chroot /etc/named.conf\ndaemon /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n                                                           [  OK  ]\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# ps awux | grep -v grep | grep named\nbind      1286  0.1  1.9 139864 11872 ?        Ssl  04:15   0:00 /var/named/chroot/sbin/named -u bind -4 -t /var/named/chroot -c /etc/named.conf\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fb\u30be\u30fc\u30f3\u8ee2\u9001\u306b\u3088\u3063\u3066\u3001\u30de\u30b9\u30bf\u30b5\u30fc\u30d0\u5074\u306ezone\u30d5\u30a1\u30a4\u30eb\u304c\u30b9\u30ec\u30fc\u30d6\u30b5\u30fc\u30d0\u306b\u3082\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# ls -lrta /var/named/chroot/var/named/\ntotal 24\n-rw-r--r--. 1 bind bind 2196 Jan 29 01:47 named.root\ndrwxr-xr-x. 5 bind bind 4096 Jan 29 02:37 ..\ndrwxr-xr-x. 3 bind bind 4096 Jan 29 03:08 chroot\ndrwxr-xr-x. 2 bind bind 4096 Feb  2 00:51 BACKUP\n-rw-r--r--. 1 bind bind  743 Feb  2 03:55 example.net-slave.zone\ndrwxr-xr-x. 4 bind bind 4096 Feb  2 04:15 .\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fb\u540d\u524d\u89e3\u6c7a\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-slave-001 ~]# dig www.example.net @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.example.net @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 44353\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.example.net.              IN      A\n\n;; ANSWER SECTION:\nwww.example.net.       900     IN      CNAME   web-001.example.net.\nweb-001.example.net.   900     IN      A       203.0.113.40\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns1.example.net.\nexample.net.           900     IN      NS      ns2.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:18:48 JST 2015\n;; MSG SIZE  rcvd: 151\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig example.net NS @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net NS @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 29018\n;; flags: qr aa rd; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      NS\n\n;; ANSWER SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:18:56 JST 2015\n;; MSG SIZE  rcvd: 109\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig example.net SOA @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> example.net SOA @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 34380\n;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;example.net.                  IN      SOA\n\n;; ANSWER SECTION:\nexample.net.           900     IN      SOA     ns1.example.net. postmaster.example.net. 2015020110 3600 1200 1209600 900\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:19:02 JST 2015\n;; MSG SIZE  rcvd: 156\n\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# dig web-002.example.net @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> web-002.example.net @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54281\n;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;web-002.example.net.          IN      A\n\n;; ANSWER SECTION:\nweb-002.example.net.   900     IN      A       203.0.113.41\n\n;; AUTHORITY SECTION:\nexample.net.           900     IN      NS      ns2.example.net.\nexample.net.           900     IN      NS      ns1.example.net.\n\n;; ADDITIONAL SECTION:\nns1.example.net.       900     IN      A       203.0.113.10\nns2.example.net.       900     IN      A       203.0.113.20\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Mon Feb 02 04:19:23 JST 2015\n;; MSG SIZE  rcvd: 133\n\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\nBIND\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u306e\u96a0\u853d\u78ba\u8a8d\n===\n\n\u30fb\u8d77\u52d5\u3057\u305fBIND\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304cBIND 9.10.1-P1\u3067\u3042\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# hostname\nexternal-dns-bind-server-master-001\n[root@external-dns-bind-server-master-001 ~]# /var/named/chroot/sbin/named -v\nBIND 9.10.1-P1\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# hostname\nexternal-dns-bind-server-slave-001\n[root@external-dns-bind-server-slave-001 ~]# /var/named/chroot/sbin/named -v\nBIND 9.10.1-P1\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fbdig\u30b3\u30de\u30f3\u30c9\u3067\u306fBIND\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u304cunknown\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# dig +noall +ans @127.0.0.1 chaos txt version.bind\nversion.bind.           0       CH      TXT     \"unknown\"\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# dig +noall +ans @127.0.0.1 chaos txt version.bind\nversion.bind.           0       CH      TXT     \"unknown\"\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u304a\u540d\u524d.com\u7ba1\u7406\u753b\u9762\u3067\u30c9\u30e1\u30a4\u30f3\u306eNS\u30ec\u30b3\u30fc\u30c9\u5207\u308a\u66ff\u3048(\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092BIND\u30b5\u30fc\u30d0\u3078\u5909\u66f4\u3059\u308b)\n===\n\n\u30fb\u304a\u540d\u524d.com\u306e\u7ba1\u7406\u753b\u9762\u3067\u3001\u304a\u540d\u524d.com\u3067\u53d6\u5f97\u3057\u305f\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3(example.net)\u306eNS\u30ec\u30b3\u30fc\u30c9\u3068\u3057\u3066\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d02\u53f0(\u4eca\u56de\u306e\u4f8b\u3067\u306fns1.example.net\u3068ns2.example.net)\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n![WS000009.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/9a814873-dd20-596f-3755-b4dd55463705.jpeg)\n\n![WS000010.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/b3d11bf5-15e2-540c-6379-4d919432417b.jpeg)\n\n![WS000011.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/790e7089-e680-9c0a-79b3-d6c77e1439f5.jpeg)\n\n![WS000012.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/c51f9fb3-febd-bea1-36f0-22223329d4bb.jpeg)\n\n\u30fb\u304a\u540d\u524d.com\u306e\u7ba1\u7406\u753b\u9762\u3067\u3001\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3(example.net)\u306eNS\u30ec\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u3001\u304a\u540d\u524d.com\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u304b\u3089\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3078\u5207\u308a\u66ff\u3048\u307e\u3059\u3002\n\n\u3000\u3000\u7b2c\u4e00DNS\u3000XXXXXX1.onamae.com\u3000\u2192\u3000ns1.example.net\n\u3000\u3000\u7b2c\u30cbDNS\u3000XXXXXX2.onamae.com\u3000\u2192\u3000ns2.example.net\n\n![WS000016.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/41978632-e3d2-1167-4146-6792fcad71af.jpeg)\n\n![WS000017.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/01e0134b-ac97-3c72-fb08-dae3c3536648.jpeg)\n\n![WS000018.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/8285a102-d542-01ee-4eeb-b65b62621415.jpeg)\n\n![WS000019.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/06b6691f-950a-83a8-a350-0d9c12b56b13.jpeg)\n\n![WS000020.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/87b6decb-d52a-271a-2263-d3896605bf9e.jpeg)\n\n![WS000021.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/31ff5c1d-9bfb-aaa7-b082-9baaed83f032.jpeg)\n\nBIND\u52d5\u4f5c\u78ba\u8a8d\n===\n\n\u30fb\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30de\u30b7\u30f3\u304b\u3089\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306ezone\u30d5\u30a1\u30a4\u30eb(example.net)\u306b\u767b\u9332\u3057\u305f\u540d\u524d\u3092\u89e3\u6c7a\u51fa\u6765\u308b\u304b\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n\n```\n[user@example-CentOS ~]$ dig example.net NS\n\n; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.30.rc1.35.amzn1 <<>> example.net NS\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 29866\n;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;example.net.                  IN      NS\n\n;; ANSWER SECTION:\nexample.net.           867     IN      NS      ns1.example.net.\nexample.net.           867     IN      NS      ns2.example.net.\n\n;; Query time: 0 msec\n;; SERVER: XXX.XX.XX.XX#53(XXX.XX.XX.XX)\n;; WHEN: Mon Feb  2 05:47:08 2015\n;; MSG SIZE  rcvd: 66\n\n[user@example-CentOS ~]$\n\n[user@example-CentOS ~]$ dig web-002.example.net\n\n; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.30.rc1.35.amzn1 <<>> web-002.example.net\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 17245\n;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;web-002.example.net.          IN      A\n\n;; ANSWER SECTION:\nweb-002.example.net.   774     IN      A       203.0.113.41\n\n;; Query time: 0 msec\n;; SERVER: XXX.XX.XX.XX#53(XXX.XX.XX.XX)\n;; WHEN: Mon Feb  2 05:47:38 2015\n;; MSG SIZE  rcvd: 54\n\n[user@example-CentOS ~]$\n```\n\n```\nc:\\>ipconfig /flushdns\n\nWindows IP \u69cb\u6210\n\nDNS \u30ea\u30be\u30eb\u30d0\u30fc \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u6b63\u5e38\u306b\u30d5\u30e9\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3057\u305f\u3002\n\nc:\\>nslookup www.example.net\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  XXX.XXX.XXX.XXX\n\n\u6a29\u9650\u306e\u306a\u3044\u56de\u7b54:\n\u540d\u524d:    web-001.example.net\nAddress:  203.0.113.40\nAliases:  www.example.net\n\n\nc:\\>nslookup web-004.example.net\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  XXX.XXX.XXX.XXX\n\n\u6a29\u9650\u306e\u306a\u3044\u56de\u7b54:\n\u540d\u524d:    web-004.example.net\nAddress:  203.0.113.43\n\n\nc:\\>nslookup mail.example.net\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  XXX.XXX.XXX.XXX\n\n\u6a29\u9650\u306e\u306a\u3044\u56de\u7b54:\n\u540d\u524d:    mail.example.net\nAddress:  203.0.113.30\n\n\nc:\\>\n```\n\n\u30fb\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30de\u30b7\u30f3\u304b\u3089\u3001BIND\u30b5\u30fc\u30d0\u306b\u767b\u9332\u3057\u3066\u3044\u308bA\u30ec\u30b3\u30fc\u30c9\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u304b\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n\nhttp://www.example.net/\n\nFQDN\u3067\u30a2\u30af\u30bb\u30b9\u3057\u305f\u7d50\u679c\u3001\u540d\u524d\u89e3\u6c7a\u304c\u884c\u308f\u308c\u3066\u3001A\u30ec\u30b3\u30fc\u30c9\u3067\u6307\u5b9a\u3057\u3066\u3044\u308bWeb\u30b5\u30fc\u30d0\u4e0a\u306e\u30da\u30fc\u30b8\u306e\u5185\u5bb9\u8868\u793a\u3055\u308c\u308b\u4e8b\u3092\u78ba\u8a8d\u51fa\u6765\u307e\u3057\u305f\u3002\u540d\u524d\u89e3\u6c7a\u51fa\u6765\u308b\u4e8b\u3092\u78ba\u8a8d\u51fa\u6765\u307e\u3057\u305f\u3002\n\n![WS000024.JPG](https://qiita-image-store.s3.amazonaws.com/0/63647/f343be0c-c890-07b7-b1a7-7c489f6a72b0.jpeg)\n\nBIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\n===\n\n\u30fb\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u78ba\u8a8d\u30b5\u30a4\u30c8\u3084\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nhttp://www.openresolver.jp/\nhttps://www.jpcert.or.jp/pr/2013/pr130002.html#cli\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u300cNOT open\u300d\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306f\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# curl --location-trusted http://www.openresolver.jp/cli/check.html\nConfigured DNS server: [NOT open] XXX.XXX.XXX.XXX(**********************)\nSource IP address: [NOT open] 203.0.113.10(**********************)\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# curl --location-trusted http://www.openresolver.jp/cli/check.html\nConfigured DNS server: [NOT open] XXX.XXX.XXX.XXX(**********************)\nSource IP address: [NOT open] 203.0.113.20(**********************)\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u3053\u3053\u307e\u3067\u306e\u8a2d\u5b9a\u3067\u3001\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u304c\u300c\u304a\u540d\u524d.com\u300d\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u3001\u540d\u524d\u89e3\u6c7a\u306e\u5fdc\u7b54\u3092\u8fd4\u3059\u3068\u3053\u308d\u307e\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nBIND\u30b5\u30fc\u30d0\u306b\u8ffd\u52a0\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\n===\n\n\u4ee5\u4e0b\u306fBIND\u30b5\u30fc\u30d0\u3092\u7a3c\u52d5\u3055\u305b\u308b\u4e0a\u3067\u306f\u3001\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u8ca0\u8377\u78ba\u8a8d\u306b\u4fbf\u5229\u306asysstat(sar\u30b3\u30de\u30f3\u30c9)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# yum -y install sysstat\n\n[root@external-dns-bind-server-slave-001 ~]# yum -y install sysstat\n```\n\nBIND\u30b5\u30fc\u30d0\u306e\u4e0d\u8981\u30b5\u30fc\u30d3\u30b9\u505c\u6b62\n===\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\u5916\u90e8\u5411\u3051\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u5834\u5408\u3001\u65e2\u306b\u4e0d\u8981\u30b5\u30fc\u30d3\u30b9\u306f\u505c\u6b62\u6e08\u307f\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u5916\u90e8\u306b\u516c\u958b\u3059\u308b\u30b5\u30fc\u30d0\u306e\u70ba\u3001\u518d\u5ea6\u4e0d\u8981\u30b5\u30fc\u30d3\u30b9\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nhttp://qiita.com/na0AaooQ/items/9ed548dd6db2a0c911c4\n\n```\n[root@external-dns-bind-server-slave-001 ~]# chkconfig --list\nacpid           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nauditd          0:off   1:off   2:on    3:on    4:on    5:on    6:off\ncrond           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nip6tables       0:off   1:off   2:on    3:on    4:on    5:on    6:off\niptables        0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnamed           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetfs           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nntpdate         0:off   1:off   2:off   3:off   4:off   5:off   6:off\npostfix         0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrdisc           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrestorecond     0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrsyslog         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsaslauthd       0:off   1:off   2:off   3:off   4:off   5:off   6:off\nsshd            0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsysstat         0:off   1:on    2:on    3:on    4:on    5:on    6:off\nudev-post       0:off   1:on    2:off   3:off   4:off   5:off   6:off\n[root@external-dns-bind-server-slave-001 ~]#\n\n[root@external-dns-bind-server-slave-001 ~]# chkconfig --list | awk '{printf \"%s\\t\\t%s\\n\", $1,$5}' | grep 3:on\nauditd          3:on\ncrond           3:on\nip6tables               3:on\niptables                3:on\nnamed           3:on\nnetwork         3:on\nrsyslog         3:on\nsshd            3:on\nsysstat         3:on\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-master-001 ~]# hostname\nexternal-dns-bind-server-master-001\n[root@external-dns-bind-server-master-001 ~]# chkconfig --list\nacpid           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nauditd          0:off   1:off   2:on    3:on    4:on    5:on    6:off\ncrond           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nip6tables       0:off   1:off   2:on    3:on    4:on    5:on    6:off\niptables        0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnamed           0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetfs           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nntpdate         0:off   1:off   2:off   3:off   4:off   5:off   6:off\npostfix         0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrdisc           0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrestorecond     0:off   1:off   2:off   3:off   4:off   5:off   6:off\nrsyslog         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsaslauthd       0:off   1:off   2:off   3:off   4:off   5:off   6:off\nsshd            0:off   1:off   2:on    3:on    4:on    5:on    6:off\nsysstat         0:off   1:on    2:on    3:on    4:on    5:on    6:off\nudev-post       0:off   1:on    2:off   3:off   4:off   5:off   6:off\n[root@external-dns-bind-server-master-001 ~]#\n\n[root@external-dns-bind-server-master-001 ~]# chkconfig --list | awk '{printf \"%s\\t\\t%s\\n\", $1,$5}' | grep 3:on\nauditd          3:on\ncrond           3:on\nip6tables               3:on\niptables                3:on\nnamed           3:on\nnetwork         3:on\nrsyslog         3:on\nsshd            3:on\nsysstat         3:on\n[root@external-dns-bind-server-master-001 ~]#\n```\n\nBIND\u30b5\u30fc\u30d0\u306b\u4e0d\u8981\u306a\u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u306a\u3044\u304b\u30c6\u30b9\u30c8\u3059\u308b\n===\n\n\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u3001nmap\u30b3\u30de\u30f3\u30c9\u3067\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u3066\u3001ssh(TCP\u30dd\u30fc\u30c822)\u3084domain(UDP\u30dd\u30fc\u30c853\u756a)\u4ee5\u5916\u306e\u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u306a\u3044\u4e8b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\nBIND\u30b5\u30fc\u30d0\u5074\u306eiptables\u3067\u3001nmap\u3092\u5b9f\u884c\u3059\u308b\u30de\u30b7\u30f3\u304b\u3089\u306e\u5168\u30dd\u30fc\u30c8\u306e\u901a\u4fe1\u3092\u4e00\u6642\u7684\u306b\u8a31\u53ef\u3057\u307e\u3059\u3002\n\n\u30fbTCP\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u306e\u4f8b\n\n\u4ee5\u4e0b\u306fBIND\u30b5\u30fc\u30d0(\u4eca\u56de\u306e\u4f8b\u3067\u306f203.0.113.10)\u306b\u5bfe\u3057\u3066\u3001TCP1\uff5e65535\u756a\u307e\u3067\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u308b\u4f8b\u3067\u3059\u3002filtered\u3068\u8868\u793a\u3055\u308c\u305f\u30dd\u30fc\u30c8\u306f\u9589\u3058\u3066\u3044\u307e\u3059\u3002\n\n```\n[root@portscan-client ~]# nmap -sT -P0 -p 1-65535 203.0.113.10\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:22 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\n\nHost is up (0.27s latency).\nPORT   STATE    SERVICE\n1/tcp  filtered tcpmux\n2/tcp  filtered compressnet\n3/tcp  filtered compressnet\n4/tcp  filtered unknown\n\u3000(\u7701\u7565)\n20/tcp filtered ftp-data\n21/tcp filtered ftp\n\u3000(\u7701\u7565)\n53/tcp filtered domain\n\u3000(\u7701\u7565)\n```\n\n\u30fbUDP\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u306e\u4f8b\n\n\u4ee5\u4e0b\u306fBIND\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u3001UDP1\uff5e65535\u756a\u307e\u3067\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u308b\u4f8b\u3067\u3059\u3002opne\u3068\u8868\u793a\u3055\u308c\u305f\u30dd\u30fc\u30c8\u306f\u958b\u3044\u3066\u3044\u307e\u3059\u3002\n\n```\n[root@portscan-client ~]# nmap -sU -P0 -p 1-65535 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:26 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0026s latency).\nPORT   STATE    SERVICE\n1/udp  filtered tcpmux\n2/udp  filtered compressnet\n3/udp  filtered compressnet\n\u3000(\u7701\u7565)\n20/udp filtered ftp-data\n21/udp filtered ftp\n\u3000(\u7701\u7565)\n53/udp open  domain\n\u3000(\u7701\u7565)\n```\n\n\u30fb\u958b\u3044\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u4f8b\u3002\n\nBIND\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u306f\u96a0\u853d\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@portscan-client ~]# nmap -sV -P0 -p 22-53 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:33 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0053s latency).\nNot shown: 30 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 5.3 (protocol 2.0)\n53/tcp open  domain  ISC BIND unknown\n\nService detection performed. Please report any incorrect results at http://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 6.11 seconds\n[root@portscan-server ~]#\n```\n\n\u30fb\u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u308b\u5834\u5408\u306e\u4f8b\u3002\n\n\u3061\u306a\u307f\u306b\u3001BIND\u30b5\u30fc\u30d0\u69cb\u7bc9\u4e2d\u306eiptables\u3092\u8a2d\u5b9a\u3059\u308b\u524d\u306e\u6bb5\u968e\u3067\u3001BIND\u30b5\u30fc\u30d0\u306b\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u958b\u3044\u3066\u3044\u308b\u30dd\u30fc\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```\n[root@portscan-client ~]# nmap -sT -P0 -p 1-65535 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:07 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0054s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\n53/tcp open  domain\n\nNmap done: 1 IP address (1 host up) scanned in 3.17 seconds\n[root@portscan-client ~]#\n```\n\n```\n[root@portscan-client ~]# nmap -sV -P0 -p 1-65535 203.0.113.10\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-02-02 20:09 JST\nNmap scan report for external-dns-bind-server-master-001 (203.0.113.10)\nHost is up (0.0060s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 5.3 (protocol 2.0)\n53/tcp open  domain  ISC BIND unknown\n\nService detection performed. Please report any incorrect results at http://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 11.97 seconds\n[root@portscan-client ~]#\n```\n\n\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u306e\u78ba\u8a8d\u304c\u7d42\u308f\u3063\u305f\u3089\u3001BIND\u30b5\u30fc\u30d0\u5074\u306eiptables\u306e\u8a2d\u5b9a\u3092\u5143\u901a\u308a\u306b\u3057\u3066\u3001\u4e00\u6642\u7684\u306b\u8ffd\u52a0\u3057\u305fnmap\u5b9f\u884c\u30de\u30b7\u30f3\u304b\u3089\u306e\u901a\u4fe1\u8a31\u53ef\u3092\u7121\u52b9\u5316\u3057\u307e\u3059\u3002\n\n\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u518d\u5e30\u691c\u7d22\u306e\u7121\u52b9\u5316\u78ba\u8a8d\n===\n\n\u30fb\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3092\u6307\u5b9a\u3057\u3066\u518d\u5e30\u691c\u7d22\u51fa\u6765\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3084\u30b3\u30f3\u30c6\u30f3\u30c4\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u304cDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0(\u30d5\u30eb\u30b5\u30fc\u30d3\u30b9\u30ea\u30be\u30eb\u30d0)\u3068\u3057\u3066\u52d5\u4f5c\u3057\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# dig www.yahoo.com @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.yahoo.com @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: REFUSED, id: 62977\n;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.yahoo.com.                 IN      A\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Thu Feb 05 00:20:56 JST 2015\n;; MSG SIZE  rcvd: 42\n\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# dig www.yahoo.com @127.0.0.1\n\n; <<>> DiG 9.10.1-P1 <<>> www.yahoo.com @127.0.0.1\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: REFUSED, id: 37587\n;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;www.yahoo.com.                 IN      A\n\n;; Query time: 0 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Thu Feb 05 00:21:36 JST 2015\n;; MSG SIZE  rcvd: 42\n\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fb\u30ea\u30e2\u30fc\u30c8\u30de\u30b7\u30f3\u304b\u3089\u4eca\u56de\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u6a29\u5a01\u3092\u6301\u305f\u306a\u3044\u30be\u30fc\u30f3\u306e\u540d\u524d\u89e3\u6c7a\u51fa\u6765\u306a\u3044\u4e8b\u3001\u518d\u5e30\u691c\u7d22\u51fa\u6765\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\nC:\\>ipconfig /flushdns\n\nWindows IP \u69cb\u6210\n\nDNS \u30ea\u30be\u30eb\u30d0\u30fc \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u6b63\u5e38\u306b\u30d5\u30e9\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3057\u305f\u3002\n\nC:\\>nslookup web-002.example.net 203.0.113.10\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.10\n\n\u540d\u524d:    web-002.example.net\nAddress:  203.0.113.41\n\n\nC:\\>nslookup www.yahoo.com 203.0.113.10\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.10\n\n*** UnKnown \u304c www.yahoo.com \u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093: Query refused\n\nC:\\>\n```\n\n```\nC:\\>ipconfig /flushdns\n\nWindows IP \u69cb\u6210\n\nDNS \u30ea\u30be\u30eb\u30d0\u30fc \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u6b63\u5e38\u306b\u30d5\u30e9\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3057\u305f\u3002\n\nC:\\>nslookup web-002.example.net 203.0.113.20\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.20\n\n\u540d\u524d:    web-002.example.net\nAddress:  203.0.113.41\n\n\nC:\\>nslookup www.yahoo.com 203.0.113.20\n\u30b5\u30fc\u30d0\u30fc:  UnKnown\nAddress:  203.0.113.20\n\n*** UnKnown \u304c www.yahoo.com \u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093: Query refused\n\nC:\\>\n```\n\nDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u6709\u7121\u30c1\u30a7\u30c3\u30af\n===\n\n\u4eca\u56de\u69cb\u7bc9\u3057\u305f\u306e\u306f\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3068\u3057\u3066\u69cb\u7bc9\u3057\u305f\u306e\u306b\u3001\u610f\u56f3\u305b\u305aDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u518d\u5e30\u691c\u7d22\u306b\u3088\u308b\u540d\u524d\u89e3\u6c7a\u304c\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3001\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u3068\u3057\u3066\u5fdc\u7b54\u3092\u8fd4\u3059\u72b6\u614b\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4eca\u56de\u69cb\u7bc9\u3057\u305f\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u3067\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u7121\u52b9\u5316\u306b\u306a\u3063\u3066\u304a\u308a\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u304c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nBIND\u3067DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u3001DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\nhttp://www.ipa.go.jp/security/vuln/documents/2008/200809_DNS.html\nhttp://blog.cles.jp/item/2733\n\nDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u4e8b\u3067\u3001\u4ee5\u4e0b\u306e\u8106\u5f31\u6027\u306e\u6709\u7121\u306b\u3064\u3044\u3066\u3001\u30c1\u30a7\u30c3\u30af\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u3000A. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u3000B. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308bID\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u3000C. \u5916\u90e8\u304b\u3089\u306e\u518d\u5e30\u7684\u306aDNS\u554f\u3044\u5408\u308f\u305b\u306b\u5bfe\u3057\u3066\u56de\u7b54\u3057\u3066\u3057\u307e\u3046\u3002\n\nDNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30dd\u30a4\u30ba\u30cb\u30f3\u30b0\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30fbA. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u8106\u5f31\u6027\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u4e0a\u3067\u3001\u4ee5\u4e0b\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u7528\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u5834\u5408\u3001\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3051\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# dig -x dig +short porttest.dns-oarc.net TXT\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# dig -x dig +short porttest.dns-oarc.net TXT\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fbB. DNS\u554f\u3044\u5408\u308f\u305b\u306b\u4f7f\u7528\u3059\u308bID\u304c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u8106\u5f31\u6027\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u69cb\u7bc9\u3057\u305fBIND\u30b5\u30fc\u30d0\u4e0a\u3067\u3001\u4ee5\u4e0b\u306e\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u7528\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002DNS\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u306e\u6a5f\u80fd\u304c\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\u6a29\u5a01DNS\u30b5\u30fc\u30d0\u306e\u5834\u5408\u3001\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3051\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n```\n[root@external-dns-bind-server-master-001 ~]# dig +short txidtest.dns-oarc.net TXT\n[root@external-dns-bind-server-master-001 ~]#\n```\n\n```\n[root@external-dns-bind-server-slave-001 ~]# dig +short txidtest.dns-oarc.net TXT\n[root@external-dns-bind-server-slave-001 ~]#\n```\n\n\u30fbC. \u5916\u90e8\u304b\u3089\u306e\u518d\u5e30\u7684\u306aDNS\u554f\u3044\u5408\u308f\u305b\u306b\u5bfe\u3057\u3066\u56de\u7b54\u3057\u3066\u3057\u307e\u3046\u8106\u5f31\u6027\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u73fe\u72b6\u300cIANA \u2015 Cross-Pollination Scan\u300d\u306b\u3001\u8106\u5f31\u6027\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3048\u308b\u753b\u9762\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nhttp://www.iana.org/\n\n\u4ee3\u308f\u308a\u306b\u3001\u524d\u8ff0\u306e\u300cBIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\u300d\u3067\u3001BIND\u30b5\u30fc\u30d0\u304c\u30aa\u30fc\u30d7\u30f3\u30ea\u30be\u30eb\u30d0\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n\u554f\u984c\u306a\u3051\u308c\u3070\u3001BIND\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\u306f\u3072\u3068\u307e\u305a\u5b8c\u4e86\u3067\u3059\u3002\n\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\n"}