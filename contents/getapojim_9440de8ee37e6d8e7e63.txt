{"tags": ["RaspberryPi", "Bluemix", "IoT", "node-red", "mqtt"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nBluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4\u306b\u767b\u5834\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001Bluemix\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306e\u53d7\u4fe1\u306b\u3088\u3063\u3066\u30b7\u30b9\u30c6\u30e0\u505c\u6b62(Linux\u306eshutdown\u30b3\u30de\u30f3\u30c9)\u306e\u307f\u884c\u3048\u308b\u4f5c\u308a\u306b\u306a\u3063\u3066\u3044\u308b\u3002\nRaspberry Pi 2\u306b\u30d1\u30fc\u30c4\u3092\u4ed8\u3051\u52a0\u3048\u3066Bluemix\u304b\u3089\u30d1\u30fc\u30c4\u3092\u5236\u5fa1\u3059\u308b\u306b\u306f\u3001sample\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308c\u3070\u826f\u3044\u3002\u305d\u306e\u65b9\u6cd5\u3092\u6574\u7406\u3059\u308b\u3002\n\u203b\u4ee5\u4e0b\u3067\u3084\u3063\u305f\u3053\u3068\u306e\u53cd\u5bfe\u65b9\u5411(Bluemix\u2192Raspberry Pi 2)\u3092\u3084\u3063\u3066\u307f\u308b\u3002\nBluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (1)\u4ed5\u7d44\u307f\u306e\u7406\u89e3\nBluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (2)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u30c7\u30b8\u30bf\u30eb\u7de8\nBluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (3)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u30a2\u30ca\u30ed\u30b0\u7de8\nBluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (4)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u30c7\u30b8\u30bf\u30eb\u7de8\uff08\u30ea\u30d9\u30f3\u30b8\uff09\nBluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (5)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30fb\u6e7f\u5ea6\u30fb\u6c17\u5727\u307e\u3068\u3081\u3066\u63a1\u53d6\u7de8\n\u756a\u5916\u7de8 \u300e\u30e0\u30c3\u30af\u300c\u65e5\u7d4cLinux \u30e9\u30ba\u30d1\u30a4\u30de\u30ac\u30b8\u30f3 2015\u5e74\u6625\u53f7 \u300d\u96fb\u5b50\u5de5\u4f5c\u5165\u9580\u30ad\u30c3\u30c8 \u30d1\u30fc\u30c4\u30bb\u30c3\u30c8\u300f\u306b\u5165\u3063\u3066\u3044\u305f\u3082\u306e\n\u3053\u308c\u304b\u3089\u6574\u7406\u3059\u308b\u306b\u3042\u305f\u308a\u304d\u3063\u3068\u307e\u305f\u9577\u3044\u9053\u306e\u308a\u306b\u306a\u308a\u305d\u3046\u306a\u306e\u3067\u3001(1)Sample\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4ed5\u7d44\u307f\u306e\u6574\u7406\u3068(2)\u3069\u3053\u3092\u3069\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308c\u3070\u3088\u3044\u306e\u304b\u3092\u5206\u3051\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n(1)\u3000\u4ed5\u7d44\u307f\u306e\u7406\u89e3\n(2)\u3000\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3000\u5149\u7de8\u3000RasPi2\u306e\u30aa\u30f3\u30dc\u30fc\u30c9LED\n(3)\u3000\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3000\u5149\u7de8\u3000\u5916\u4ed8\u3051\u306eLED\n(4)\u3000\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3000\u97f3\u7de8\u3000(\u3053\u308c)\n\n\u5916\u4ed8\u3051\u306e\u30d1\u30fc\u30c4\u3092\u52d5\u304b\u3059\u65b9\u6cd5\n\u5149\u306e\u6b21\u306f\u97f3\u3092\u51fa\u3057\u3066\u307f\u308b\u3002\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u4f7f\u3046\u3002\n\u30b1\u30fc\u30d6\u30eb\u304c\u8d64\u9ed2\u306e2\u672c\u306e\u307f\u306a\u306e\u3067LED\u3068\u540c\u3058\u3088\u3046\u306b\u3064\u306a\u3044\u3067/sys/class/gpio\u914d\u4e0b\u306b\u5024\u3092\u66f8\u304d\u8fbc\u3081\u3070\u3088\u3044\u306e\u304b\u306a\uff1f\u3068\u601d\u3063\u305f\u304c\u3001\n\u30001. \u30e0\u30c3\u30af\u306b\u300c\u4ed6\u52b1\u5f0f\u300d\u300c\u81ea\u52b1\u5f0f\u300d\u3068\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u51fa\u3066\u304d\u305f\u3002\n\u30002. \u30b7\u30f3\u30d7\u30eb\u306a\u306f\u305a\u306e\u30e0\u30c3\u30af\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u308f\u3056\u308f\u3056\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u66f8\u304b\u308c\u3066\u3044\u308b\u3002\n\u3053\u306e\uff12\u70b9\u304b\u3089\u6c17\u306b\u306a\u3063\u3066\u30b0\u30b0\u3063\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u3053\u3068\u304c\u5224\u660e\u3057\u305f\u3002\n\u3000\u30fb\u81ea\u52b1\u5f0f\u306f\u96fb\u6c60\u306b\u3064\u306a\u3050\u3068\u97f3\u304c\u51fa\u308b\u3002\n\u3000\u30fb\u4ed6\u52b1\u5f0f\u306f\u96fb\u6c60\u306b\u3064\u306a\u3050\u3060\u3051\u3067\u306f\u97f3\u306f\u51fa\u305a\u3001\u6587\u5b57\u901a\u308a\u8ab0\u304b\u304c\u52b1\u307e\u3057\u3066\u3042\u3052\u306a\u3044\u3068\u97f3\u304c\u51fa\u306a\u3044\uff08\u3089\u3057\u3044\uff09\u3002\n\u624b\u5143\u306e\u30d1\u30fc\u30c4\u30bb\u30c3\u30c8\u306b\u5165\u3063\u3066\u3044\u308b\u306e\u306f\u3069\u3046\u3084\u3089\u4ed6\u52b1\u5f0f\u3089\u3057\u3044\u306e\u3067\u3001\u7d20\u76f4\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u3053\u3068\u3068\u3059\u308b\u3002\n\n\u56de\u8def\uff08\u30cd\u30bf\uff09\n\u30e0\u30c3\u30af\u300c\u65e5\u7d4cLinux \u30e9\u30ba\u30d1\u30a4\u30de\u30ac\u30b8\u30f3 2015\u5e74\u6625\u53f7 \u300d\u7b2c3\u90e8 \u306f\u3058\u3081\u3066\u306e\u96fb\u5b50\u5de5\u4f5c\u30b9\u30c6\u30c3\u30d750\u306e\u5185\u3001\u300cNo.28 WiringPi\u306eSoftware Tone\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u6d3b\u7528\u3000\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc\u3067\u97f3\u3092\u9cf4\u3089\u305d\u3046\u300d\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u56de\u8def\u3067\u3084\u3063\u3066\u307f\u308b\u3002\n\u63b2\u8f09\u3055\u308c\u3066\u3044\u305f\u56f3\uff08Excel\u3067\u4f5c\u56f3\uff09\n\n\n\u56de\u8def\uff08\u8a2d\u8a08\uff09\n\u5143\u30cd\u30bf\u306e\u56f3\u306e\u901a\u308a\u306bFritzing\u3067\u4f5c\u3063\u3066\u307f\u305f\u3002\n\n\n\u56de\u8def\uff08\u5b9f\u88c5\uff09\nFritzing\u3067\u4f5c\u3063\u305f\u7d75\u306e\u901a\u308a\u306b\u3064\u306a\u3052\u3066\u307f\u305f\u3002\n\n\nWiringPi\u306e\u5c0e\u5165\n# cd /var/tmp\n# git clone git://git.drogon.net/wiringPi\n# cd wiringPi\n# ./build\n\u5c0e\u5165\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n# gpio -v\n\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3002\n\nRaspberry Pi 2\u4e0a\u3067\u97f3\u3092\u51fa\u3057\u3066\u307f\u308b\n\u30e0\u30c3\u30af\u8aad\u8005\u9650\u5b9a\u30b5\u30a4\u30c8\u306b\u7528\u610f\u3055\u308c\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u300csoftware_tone.c\u300d\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u30fb\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\u30921\u5ea6\u3060\u3051\u9cf4\u3089\u3059\u3002\nroot\u6a29\u9650\u304c\u5fc5\u8981\u3002\n$ cd ~/bin\n$ ll software_tone.c\n$ gcc -o software_tone software_tone.c -lwiringPi\n$ sudo ./adc_lm35dz\n\n\u51fa\u529b\u4f8b\uff09\n\u97f3\u3000\u3000\uff1a\u3000\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\n\u753b\u9762\u3000\uff1a\u3000\u6570\u5024\u306f\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\u306e\u5404\u97f3\u306e\u5468\u6ce2\u6570\u5024\u3092\u8868\u3059\u3002\n\u52d5\u753b\u3092\u64ae\u3063\u3066\u307f\u305f\u3002\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6539\u4fee\u5185\u5bb9\nBluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4\u306b\u767b\u5834\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6b21\u306e\u901a\u308a\u4fee\u6b63\u3059\u308b\u3002\n\u4fee\u6b63\u524d\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u3067\u53c2\u7167\u53ef\u80fd\n\n\n\n\u4fee\u6b63\u3059\u308b\u30d5\u30a1\u30a4\u30eb\n\u65b0\u898f\u3067\u8ffd\u52a0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\n\n\n\n\niotmain.cmqttPublisher.c\n\u306a\u3057\n\n\n\n\u8ffd\u52a0\u30fb\u4fee\u6b63\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\u4fee\u6b63\u5185\u5bb91\n\niotmain.c(\u4fee\u6b63\u524d\u300030\u884c\u76ee)\nchar subscribeTopic[MAXBUF] = \"iot-2/cmd/reboot/fmt/json\";\n\n\n\niotmain.c(\u4fee\u6b63\u5f8c)\nchar subscribeTopic[MAXBUF] = \"iot-2/cmd/buzzer/fmt/json\";\n\n\n\u4fee\u6b63\u5185\u5bb92\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u300cPublisher\u300d\u306b\u306a\u3063\u3066\u3044\u3066\u7d1b\u3089\u308f\u3057\u3044\u304c\u3001\u4e0b\u8a18\u306e\u629c\u7c8b\u306fSubscribe\u6642\u306e\u51e6\u7406\u3002\n\nmqttPublisher.c(\u4fee\u6b63\u524d\u3000126\uff5e130\u884c\u76ee)\n        sprintf(command,\"sudo /sbin/shutdown -r %d\", time_delay);\n        syslog(LOG_INFO, \"Received command to restart in %d minutes.\",time_delay);\n\n\n\nmqttPublisher.c(\u4fee\u6b63\u5f8c)\n        sprintf(command,\"sudo /home/pi/bin/software_tone\");\n        syslog(LOG_INFO, \"Received command to control buzzer\");\n\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6539\u4fee\u624b\u9806\n\u4f5c\u696d\u306fRaspberryPi2\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u884c\u3046\u3002\n\u5b9f\u884c\u6642\u30e6\u30fc\u30b6\u306f\u6b21\u306e\u901a\u308a\n$ : pi\n# : root\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u9000\u907f\n# cd /etc/iotsample-raspberrypi/\n# cp -p device.cfg device.cfg.`date +%Y%m%d`_1\n\u203b\u3053\u308c\u3067\u3001\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(dpkg -P)\u3057\u3066\u3082\u30d5\u30a9\u30eb\u30c0\u3068\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u308b\u306e\u3067\u5b89\u5fc3\u3002\n\u5fc5\u8981\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# apt-get install dpkg-dev build-essential devscripts\n# apt-get install libssl-dev\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e00\u5f0f\u3092\u5165\u624b\n$ cd ~\n$ git clone https://github.com/ibm-messaging/iot-raspberrypi.git\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4fee\u6b63\u30fb\u8ffd\u52a0\n$ cd ~/iot-raspberrypi/samples/c/\n$ vi iotmain.c\n$ vi mqttPublisher.c\n\u30d3\u30eb\u30c9\n$ debuild -b\n\u7f72\u540d\u306e\u30a8\u30e9\u30fc\u306f\u7121\u8996\u3059\u308b\u3002\n\n\niot\u30b5\u30fc\u30d3\u30b9\u306e\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u53e4\u3044\u306e\u3092\uff09\n# dpkg -P iot\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# cd /home/pi/iot-raspberrypi/samples/\n# dpkg -i ./iot_1.0-1_armhf.deb\n\u30b5\u30fc\u30d3\u30b9\u306e\u78ba\u8a8d\n# service iot status\n\u203b\u8d77\u52d5\u3057\u3066\u3044\u308b(ok\u304c\u8868\u793a\u3055\u308c\u308b)\u3053\u3068\u3002\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n# cd /etc/iotsample-raspberrypi/\n# cp -p device.cfg.`date +%Y%m%d`_1 device.cfg\n\u203b1.\u3067\u3044\u3063\u305f\u3093\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u30011.\u3067\u9000\u907f\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3067\u5fa9\u5143\n\u30b5\u30fc\u30d3\u30b9\u306e\u518d\u8d77\u52d5\n# service iot restart\n\u203b\u8d77\u52d5\u3057\u3066\u3044\u308b(ok\u304c\u8868\u793a\u3055\u308c\u308b)\u3053\u3068\u3002\n\u8d77\u52d5\u30e2\u30fc\u30c9\u306e\u78ba\u8a8d\n# service iot getdeviceid\n\u203bregisterd mode \u3067\u8d77\u52d5\u3057\u3066\u3044\u308b(registerd mode\u304c\u8868\u793a\u3055\u308c\u308b)\u3053\u3068\u3002\n\n\nBluemix\u304b\u3089MQTT\u30d7\u30ed\u30c8\u30b3\u30eb\u3067JSON\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n\nMQTT\u306e\u69cb\u6210\nBluemix\u306eNode-RED\u30a2\u30d7\u30ea\u304b\u3089MQTT\u30d7\u30ed\u30c8\u30b3\u30eb\u3067publish\u3057\u3001Raspberry Pi 2\u4e0a\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089subscribe\u3059\u308b\u3002\n\u3000MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u3000\u3000\u3000\u3000\uff1a\u3000Bluemix\u306eIoT Foundataion\u30b5\u30fc\u30d3\u30b9\n\u3000MQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(pub)\u3000\uff1a\u3000Bluemix\u306eNode-RED\u30a2\u30d7\u30ea\u3000\u203bNode-RED\u3067\u306a\u304f\u3066\u3082\u826f\u3044\u3002\n\u3000MQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(sub)\u3000\uff1a\u3000\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0\n\u3000MQTT\u306e\u30c8\u30d4\u30c3\u30af\u3000\u3000\u3000\u3000\u3000\uff1a\u3000iot-2/cmd/buzzer/fmt/json\n\u3000MQTT\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3000\u3000\u3000\u3000\uff1a\u3000{\"delay\":1}\n\nMQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(publish)\u306e\u69cb\u6210\n\u4eca\u56de\u306fNode-RED\u30a2\u30d7\u30ea\u3068\u3059\u308b\u3002\n\u300cinject\u300d\u30ce\u30fc\u30c9\u3068\u300cibmiot out\u300d\u30ce\u30fc\u30c9\u3092\u4f7f\u3046\u3002\n\ninject\u30ce\u30fc\u30c9\u306e\u4e2d\u8eab\n\u7740\u706b\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u7a7a\u3063\u307d\u3067\u3088\u3044\u3002\n\nibmiot out\u30ce\u30fc\u30c9\u306e\u4e2d\u8eab\n\n\n\n\n\u9805\u76ee\u540d\n\u8a2d\u5b9a\u5024\n\u5099\u8003\n\n\n\n\nOutput Type\nDevice Command\n\n\n\nDevice Type\niotsample-raspberrypi\nIoT Foundation\u3067\u767b\u9332\u3057\u305f\u901a\u308a\u306b\u3002IoTF\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u78ba\u8a8d\u53ef\u80fd\n\n\nDevice Id\nxxxxxxxxxxxx\nRasPi\u4e0a\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u3059\u308b\u5024# service iot getdeviceidIoTF\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u78ba\u8a8d\u53ef\u80fd\n\n\nCommand Type\nbuzzer\n\u30c8\u30d4\u30c3\u30af\u306e\u4e00\u90e8\u306b\u306a\u308b\u305f\u3081\u56fa\u5b9a\n\n\nFormat\njson\n\u30c8\u30d4\u30c3\u30af\u306e\u4e00\u90e8\u306b\u306a\u308b\u305f\u3081\u56fa\u5b9a\n\n\nData\n{\"delay\":1}\n\u6570\u5b57\u306f\u4f55\u3067\u3082\u3088\u3044\n\n\nName\nIoTF\nNode-RED\u4e0a\u306e\u8868\u793a\u540d\u306a\u3060\u3051\u306a\u306e\u3067\u4f55\u3067\u3082\u3088\u3044\n\n\n\n\u4e0a\u8a182\u3064\u306e\u30ce\u30fc\u30c9\u3092\u7dda\u3067\u3064\u306a\u3044\u3060\u3089\u3001\u53f3\u4e0a\u306e\u300cDeploy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002\n\ninject\u30ce\u30fc\u30c9\u3092\u30dd\u30c1\u30c3\u3068\u3059\u308b\u3068\u3001RasPi\u4e0a\u3067\u30d7\u30ed\u30b0\u30e9\u30e0(/home/pi/bin/software_tone)\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\u304c\u9cf4\u308b\u3002\uff08\u52d5\u753b\u3092\u518d\u63b2\uff09\n\n\n\u6240\u611f\n\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4e2d\u3067\u304d\u3063\u3068/sys/class/gpio\u3092\u4f7f\u3063\u3066\u308b\u3093\u3060\u3068\u4fe1\u3058\u305f\u3044\uff01\n\n\u74b0\u5883\nRaspberry Pi 2 Model B\nRaspbian\nBluemix IoT Foundation\nNode-RED\n\n\u53c2\u8003\nBluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4\nhttps://developer.ibm.com/recipes/tutorials/raspberry-pi-4/\nBluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4\u306b\u767b\u5834\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0\n(Linux\u7528\u306edaemon\u306b\u306a\u3063\u3066\u3044\u308b)\nhttps://github.com/ibm-messaging/iot-raspberrypi/blob/master/samples/c/\nhttps://github.com/ibm-messaging/iot-raspberrypi/tree/master/samples/c#command-support\n#<i class=\"fa fa-cubes\" style=\"font-size:1em;\"></i>\u6982\u8981\n[Bluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4](https://developer.ibm.com/recipes/tutorials/raspberry-pi-4/)\u306b\u767b\u5834\u3059\u308b[\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0](https://github.com/ibm-messaging/iot-raspberrypi/releases/tag/1.0.2)\u306f\u3001Bluemix\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306e\u53d7\u4fe1\u306b\u3088\u3063\u3066\u30b7\u30b9\u30c6\u30e0\u505c\u6b62(Linux\u306eshutdown\u30b3\u30de\u30f3\u30c9)\u306e\u307f\u884c\u3048\u308b\u4f5c\u308a\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nRaspberry Pi 2\u306b\u30d1\u30fc\u30c4\u3092\u4ed8\u3051\u52a0\u3048\u3066Bluemix\u304b\u3089\u30d1\u30fc\u30c4\u3092\u5236\u5fa1\u3059\u308b\u306b\u306f\u3001[sample\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9](https://github.com/ibm-messaging/iot-raspberrypi/blob/master/samples/c/)\u3092\u4fee\u6b63\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308c\u3070\u826f\u3044\u3002\u305d\u306e\u65b9\u6cd5\u3092\u6574\u7406\u3059\u308b\u3002\n\n\u203b\u4ee5\u4e0b\u3067\u3084\u3063\u305f\u3053\u3068\u306e\u53cd\u5bfe\u65b9\u5411(Bluemix\u2192Raspberry Pi 2)\u3092\u3084\u3063\u3066\u307f\u308b\u3002\n[Bluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (1)\u4ed5\u7d44\u307f\u306e\u7406\u89e3](http://qiita.com/getapojim/items/b76ea2cfadaff6dfd159)\n[Bluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (2)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u30c7\u30b8\u30bf\u30eb\u7de8](http://qiita.com/getapojim/items/0f2b5178bfaddafcde9f)\n[Bluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (3)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u30a2\u30ca\u30ed\u30b0\u7de8](http://qiita.com/getapojim/items/12e5cb64a8046ab033e9)\n[Bluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (4)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u30c7\u30b8\u30bf\u30eb\u7de8\uff08\u30ea\u30d9\u30f3\u30b8\uff09](http://qiita.com/getapojim/items/0ea4c7369d342d5b00d5)\n[Bluemix\u3067RaspberryPi2\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u62fe\u3046 (5)\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30fb\u6e7f\u5ea6\u30fb\u6c17\u5727\u307e\u3068\u3081\u3066\u63a1\u53d6\u7de8](http://qiita.com/getapojim/items/dfa526ece3af603b981e)\n\u756a\u5916\u7de8 [\u300e\u30e0\u30c3\u30af\u300c\u65e5\u7d4cLinux \u30e9\u30ba\u30d1\u30a4\u30de\u30ac\u30b8\u30f3 2015\u5e74\u6625\u53f7 \u300d\u96fb\u5b50\u5de5\u4f5c\u5165\u9580\u30ad\u30c3\u30c8 \u30d1\u30fc\u30c4\u30bb\u30c3\u30c8\u300f\u306b\u5165\u3063\u3066\u3044\u305f\u3082\u306e](http://qiita.com/getapojim/items/c90edd38c0ad9d5eb379)\n\n\n\u3053\u308c\u304b\u3089\u6574\u7406\u3059\u308b\u306b\u3042\u305f\u308a\u304d\u3063\u3068\u307e\u305f\u9577\u3044\u9053\u306e\u308a\u306b\u306a\u308a\u305d\u3046\u306a\u306e\u3067\u3001(1)Sample\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4ed5\u7d44\u307f\u306e\u6574\u7406\u3068(2)\u3069\u3053\u3092\u3069\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308c\u3070\u3088\u3044\u306e\u304b\u3092\u5206\u3051\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\n[(1)\u3000\u4ed5\u7d44\u307f\u306e\u7406\u89e3](http://qiita.com/getapojim/items/8fffa73100292665eebc)\n[(2)\u3000\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3000\u5149\u7de8\u3000RasPi2\u306e\u30aa\u30f3\u30dc\u30fc\u30c9LED](http://qiita.com/getapojim/items/b1f29ad5b9a8166ff887)\n[(3)\u3000\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3000\u5149\u7de8\u3000\u5916\u4ed8\u3051\u306eLED](http://qiita.com/getapojim/items/b8028d1aeb975432afda)\n(4)\u3000\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3000\u97f3\u7de8\u3000(\u3053\u308c)\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u5916\u4ed8\u3051\u306e\u30d1\u30fc\u30c4\u3092\u52d5\u304b\u3059\u65b9\u6cd5\n\u5149\u306e\u6b21\u306f\u97f3\u3092\u51fa\u3057\u3066\u307f\u308b\u3002[\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc](http://qiita.com/getapojim/items/c90edd38c0ad9d5eb379#14-\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc)\u3092\u4f7f\u3046\u3002\n\u30b1\u30fc\u30d6\u30eb\u304c\u8d64\u9ed2\u306e2\u672c\u306e\u307f\u306a\u306e\u3067LED\u3068\u540c\u3058\u3088\u3046\u306b\u3064\u306a\u3044\u3067`/sys/class/gpio`\u914d\u4e0b\u306b\u5024\u3092\u66f8\u304d\u8fbc\u3081\u3070\u3088\u3044\u306e\u304b\u306a\uff1f\u3068\u601d\u3063\u305f\u304c\u3001\n\n\u30001. [\u30e0\u30c3\u30af](https://www.google.co.jp/search?q=\u30e0\u30c3\u30af\u300c\u65e5\u7d4cLinux \u30e9\u30ba\u30d1\u30a4\u30de\u30ac\u30b8\u30f3 2015\u5e74\u6625\u53f7 \u300d)\u306b\u300c\u4ed6\u52b1\u5f0f\u300d\u300c\u81ea\u52b1\u5f0f\u300d\u3068\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u51fa\u3066\u304d\u305f\u3002\n\u30002. \u30b7\u30f3\u30d7\u30eb\u306a\u306f\u305a\u306e[\u30e0\u30c3\u30af](https://www.google.co.jp/search?q=\u30e0\u30c3\u30af\u300c\u65e5\u7d4cLinux \u30e9\u30ba\u30d1\u30a4\u30de\u30ac\u30b8\u30f3 2015\u5e74\u6625\u53f7 \u300d)\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u308f\u3056\u308f\u3056\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u66f8\u304b\u308c\u3066\u3044\u308b\u3002\n\n\u3053\u306e\uff12\u70b9\u304b\u3089\u6c17\u306b\u306a\u3063\u3066\u30b0\u30b0\u3063\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u3053\u3068\u304c\u5224\u660e\u3057\u305f\u3002\n\u3000\u30fb\u81ea\u52b1\u5f0f\u306f\u96fb\u6c60\u306b\u3064\u306a\u3050\u3068\u97f3\u304c\u51fa\u308b\u3002\n\u3000\u30fb\u4ed6\u52b1\u5f0f\u306f\u96fb\u6c60\u306b\u3064\u306a\u3050\u3060\u3051\u3067\u306f\u97f3\u306f\u51fa\u305a\u3001\u6587\u5b57\u901a\u308a\u8ab0\u304b\u304c\u52b1\u307e\u3057\u3066\u3042\u3052\u306a\u3044\u3068\u97f3\u304c\u51fa\u306a\u3044\uff08\u3089\u3057\u3044\uff09\u3002\n\n\u624b\u5143\u306e\u30d1\u30fc\u30c4\u30bb\u30c3\u30c8\u306b\u5165\u3063\u3066\u3044\u308b\u306e\u306f\u3069\u3046\u3084\u3089\u4ed6\u52b1\u5f0f\u3089\u3057\u3044\u306e\u3067\u3001\u7d20\u76f4\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u3053\u3068\u3068\u3059\u308b\u3002\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u56de\u8def\uff08\u30cd\u30bf\uff09\n\u30e0\u30c3\u30af\u300c\u65e5\u7d4cLinux \u30e9\u30ba\u30d1\u30a4\u30de\u30ac\u30b8\u30f3 2015\u5e74\u6625\u53f7 \u300d\u7b2c3\u90e8 \u306f\u3058\u3081\u3066\u306e\u96fb\u5b50\u5de5\u4f5c\u30b9\u30c6\u30c3\u30d750\u306e\u5185\u3001\u300cNo.28 WiringPi\u306eSoftware Tone\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u6d3b\u7528\u3000\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc\u3067\u97f3\u3092\u9cf4\u3089\u305d\u3046\u300d\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u56de\u8def\u3067\u3084\u3063\u3066\u307f\u308b\u3002\n\n\u63b2\u8f09\u3055\u308c\u3066\u3044\u305f\u56f3\uff08Excel\u3067\u4f5c\u56f3\uff09\n![No28_\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc.png](https://qiita-image-store.s3.amazonaws.com/0/85506/cf61ba3e-319b-cd91-fdf4-cde494314be8.png)\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u56de\u8def\uff08\u8a2d\u8a08\uff09\n\u5143\u30cd\u30bf\u306e\u56f3\u306e\u901a\u308a\u306bFritzing\u3067\u4f5c\u3063\u3066\u307f\u305f\u3002\n![No28_\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc_\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9.png](https://qiita-image-store.s3.amazonaws.com/0/85506/da240157-62f1-8acc-5c64-e72b9aab295d.png)\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u56de\u8def\uff08\u5b9f\u88c5\uff09\nFritzing\u3067\u4f5c\u3063\u305f\u7d75\u306e\u901a\u308a\u306b\u3064\u306a\u3052\u3066\u307f\u305f\u3002\n![No28_\u5727\u96fb\u30b9\u30d4\u30fc\u30ab\u30fc.jpg](https://qiita-image-store.s3.amazonaws.com/0/85506/4f33d0a8-5b21-1342-21af-c5481ea36f40.jpeg)\n\n##WiringPi\u306e\u5c0e\u5165\n`# cd /var/tmp`\n`# git clone git://git.drogon.net/wiringPi`\n`# cd wiringPi`\n`# ./build`\n\n\u5c0e\u5165\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n`# gpio -v`\n\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3002\n\n##<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>Raspberry Pi 2\u4e0a\u3067\u97f3\u3092\u51fa\u3057\u3066\u307f\u308b\n\u30e0\u30c3\u30af\u8aad\u8005\u9650\u5b9a\u30b5\u30a4\u30c8\u306b\u7528\u610f\u3055\u308c\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u300csoftware_tone.c\u300d\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u30fb\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\u30921\u5ea6\u3060\u3051\u9cf4\u3089\u3059\u3002\nroot\u6a29\u9650\u304c\u5fc5\u8981\u3002\n\n`$ cd ~/bin`\n`$ ll software_tone.c`\n`$ gcc -o software_tone software_tone.c -lwiringPi`\n`$ sudo ./adc_lm35dz`\n\n![\u97f3\u3092\u51fa\u3057\u3066\u307f\u308b.png](https://qiita-image-store.s3.amazonaws.com/0/85506/89646e79-a8f2-b37d-da58-eaad19d7e9f8.png)\n\n\n\u51fa\u529b\u4f8b\uff09\n\u97f3\u3000\u3000\uff1a\u3000\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\n\u753b\u9762\u3000\uff1a\u3000\u6570\u5024\u306f\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\u306e\u5404\u97f3\u306e\u5468\u6ce2\u6570\u5024\u3092\u8868\u3059\u3002\n\n<!--\n##shell\u30b9\u30af\u30ea\u30d7\u30c8\u6e96\u5099\n\u30e0\u30c3\u30af\u8aad\u8005\u9650\u5b9a\u30b5\u30a4\u30c8\u306b\u7528\u610f\u3055\u308c\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u300cled.sh\u300d\u3092\u6e96\u5099\u3059\u308b\u3002\n\u4ee5\u4e0b\u306f\u624b\u76f4\u3057\u3057\u305f\u3082\u306e\u3060\u304c\u3001\u5909\u66f4\u305b\u305a\u306b\u305d\u306e\u307e\u307e\u3067\u3082\u826f\u3044\u3002\n\n```bash:/home/pi/bin/led.sh\n#!/bin/bash\n# \u5916\u4ed8\u3051LED\u30925\u79d2\u9593\u70b9\u706f\u3059\u308b\n\ngpio_number=25                                                # GPIO25(22\u30d4\u30f3)\u3092\u4f7f\u3046\necho \"${gpio_number}\" > /sys/class/gpio/export                # GPIO25\u3092\u30aa\u30fc\u30d7\u30f3\necho \"out\" > /sys/class/gpio/gpio${gpio_number}/direction     # \u51fa\u529b\u30e2\u30fc\u30c9(out)\u306b\u8a2d\u5b9a\necho \"1\" > /sys/class/gpio/gpio${gpio_number}/value           # \u96fb\u5727\u3092High(1)\u306b\u3059\u308b\u3053\u3068\u3067\u70b9\u706f\nsleep 5\necho \"0\" > /sys/class/gpio/gpio${gpio_number}/value           # \u96fb\u5727\u3092Low(0)\u306b\u3059\u308b\u3053\u3068\u3067\u6d88\u706f\necho \"${gpio_number}\" > /sys/class/gpio/unexport              # GPIO25\u3092\u30af\u30ed\u30fc\u30ba\n```\n-->\n\n\u52d5\u753b\u3092\u64ae\u3063\u3066\u307f\u305f\u3002\n<blockquote class=\"twitter-video\" lang=\"ja\"><p lang=\"und\" dir=\"ltr\"><a href=\"https://twitter.com/hashtag/RaspberryPi?src=hash\">#RaspberryPi</a> <a href=\"https://twitter.com/hashtag/Bluemix?src=hash\">#Bluemix</a> <a href=\"https://twitter.com/hashtag/IoT?src=hash\">#IoT</a> <a href=\"https://twitter.com/hashtag/MQTT?src=hash\">#MQTT</a> <a href=\"https://t.co/l5ynRtj2oD\">pic.twitter.com/l5ynRtj2oD</a></p>&mdash; m (@getapojim) <a href=\"https://twitter.com/getapojim/status/659356311381934080\">2015, 10\u6708 28</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6539\u4fee\u5185\u5bb9\n\n[Bluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4\u306b\u767b\u5834\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0](https://github.com/ibm-messaging/iot-raspberrypi/releases/tag/1.0.2)\u3092\u6b21\u306e\u901a\u308a\u4fee\u6b63\u3059\u308b\u3002\n[\u4fee\u6b63\u524d\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u3067\u53c2\u7167\u53ef\u80fd](https://github.com/ibm-messaging/iot-raspberrypi/tree/master/samples/c)\n\n|\u4fee\u6b63\u3059\u308b\u30d5\u30a1\u30a4\u30eb|\u65b0\u898f\u3067\u8ffd\u52a0\u3059\u308b\u30d5\u30a1\u30a4\u30eb|\n|:--|:--|\n|iotmain.c<br>mqttPublisher.c|\u306a\u3057|\n\n\u8ffd\u52a0\u30fb\u4fee\u6b63\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\n\u4fee\u6b63\u5185\u5bb91\n\n```c:iotmain.c(\u4fee\u6b63\u524d\u300030\u884c\u76ee)\nchar subscribeTopic[MAXBUF] = \"iot-2/cmd/reboot/fmt/json\";\n```\n```c:iotmain.c(\u4fee\u6b63\u5f8c)\nchar subscribeTopic[MAXBUF] = \"iot-2/cmd/buzzer/fmt/json\";\n```\n\n\u4fee\u6b63\u5185\u5bb92\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u300cPublisher\u300d\u306b\u306a\u3063\u3066\u3044\u3066\u7d1b\u3089\u308f\u3057\u3044\u304c\u3001\u4e0b\u8a18\u306e\u629c\u7c8b\u306fSubscribe\u6642\u306e\u51e6\u7406\u3002\n\n```c:mqttPublisher.c(\u4fee\u6b63\u524d\u3000126\uff5e130\u884c\u76ee)\n\t\tsprintf(command,\"sudo /sbin/shutdown -r %d\", time_delay);\n\t\tsyslog(LOG_INFO, \"Received command to restart in %d minutes.\",time_delay);\n```\n\n```c:mqttPublisher.c(\u4fee\u6b63\u5f8c)\n\t\tsprintf(command,\"sudo /home/pi/bin/software_tone\");\n\t\tsyslog(LOG_INFO, \"Received command to control buzzer\");\n```\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6539\u4fee\u624b\u9806\n\u4f5c\u696d\u306fRaspberryPi2\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u884c\u3046\u3002\n\u5b9f\u884c\u6642\u30e6\u30fc\u30b6\u306f\u6b21\u306e\u901a\u308a\n$ : pi\n\\# : root\n\n1. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u9000\u907f\n`# cd /etc/iotsample-raspberrypi/`\n``# cp -p device.cfg device.cfg.`date +%Y%m%d`_1``\n\u203b\u3053\u308c\u3067\u3001\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(dpkg -P)\u3057\u3066\u3082\u30d5\u30a9\u30eb\u30c0\u3068\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u308b\u306e\u3067\u5b89\u5fc3\u3002\n\n2. \u5fc5\u8981\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`# apt-get install dpkg-dev build-essential devscripts`\n`# apt-get install libssl-dev`\n\n3. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e00\u5f0f\u3092\u5165\u624b\n`$ cd ~`\n`$ git clone https://github.com/ibm-messaging/iot-raspberrypi.git`\n\n4. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4fee\u6b63\u30fb\u8ffd\u52a0\n`$ cd ~/iot-raspberrypi/samples/c/`\n`$ vi iotmain.c`\n`$ vi mqttPublisher.c`\n\n5. \u30d3\u30eb\u30c9\n`$ debuild -b`\n\u7f72\u540d\u306e\u30a8\u30e9\u30fc\u306f\u7121\u8996\u3059\u308b\u3002\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>iot\u30b5\u30fc\u30d3\u30b9\u306e\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1. \u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u53e4\u3044\u306e\u3092\uff09\n`# dpkg -P iot`\n\n2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`# cd /home/pi/iot-raspberrypi/samples/`\n`# dpkg -i ./iot_1.0-1_armhf.deb`\n\n3. \u30b5\u30fc\u30d3\u30b9\u306e\u78ba\u8a8d\n`# service iot status`\n\u203b\u8d77\u52d5\u3057\u3066\u3044\u308b(ok\u304c\u8868\u793a\u3055\u308c\u308b)\u3053\u3068\u3002\n\n4. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n`# cd /etc/iotsample-raspberrypi/`\n``# cp -p device.cfg.`date +%Y%m%d`_1 device.cfg``\n\u203b1.\u3067\u3044\u3063\u305f\u3093\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u30011.\u3067\u9000\u907f\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3067\u5fa9\u5143\n\n5. \u30b5\u30fc\u30d3\u30b9\u306e\u518d\u8d77\u52d5\n`# service iot restart`\n\u203b\u8d77\u52d5\u3057\u3066\u3044\u308b(ok\u304c\u8868\u793a\u3055\u308c\u308b)\u3053\u3068\u3002\n\n6. \u8d77\u52d5\u30e2\u30fc\u30c9\u306e\u78ba\u8a8d\n`# service iot getdeviceid`\n\u203bregisterd mode \u3067\u8d77\u52d5\u3057\u3066\u3044\u308b(registerd mode\u304c\u8868\u793a\u3055\u308c\u308b)\u3053\u3068\u3002\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>Bluemix\u304b\u3089MQTT\u30d7\u30ed\u30c8\u30b3\u30eb\u3067JSON\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n##MQTT\u306e\u69cb\u6210\n\nBluemix\u306eNode-RED\u30a2\u30d7\u30ea\u304b\u3089MQTT\u30d7\u30ed\u30c8\u30b3\u30eb\u3067publish\u3057\u3001Raspberry Pi 2\u4e0a\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089subscribe\u3059\u308b\u3002\n\u3000MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u3000\u3000\u3000\u3000\uff1a\u3000Bluemix\u306e[IoT Foundataion\u30b5\u30fc\u30d3\u30b9](https://internetofthings.ibmcloud.com/)\n\u3000MQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(pub)\u3000\uff1a\u3000Bluemix\u306e[Node-RED](http://nodered.org/)\u30a2\u30d7\u30ea\u3000\u203bNode-RED\u3067\u306a\u304f\u3066\u3082\u826f\u3044\u3002\n\u3000MQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(sub)\u3000\uff1a\u3000[\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0](https://github.com/ibm-messaging/iot-raspberrypi/releases/tag/1.0.2)\n\u3000MQTT\u306e\u30c8\u30d4\u30c3\u30af\u3000\u3000\u3000\u3000\u3000\uff1a\u3000iot-2/cmd/buzzer/fmt/json\n\u3000MQTT\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3000\u3000\u3000\u3000\uff1a\u3000`{\"delay\":1}`\n\n##MQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(publish)\u306e\u69cb\u6210\n\u4eca\u56de\u306fNode-RED\u30a2\u30d7\u30ea\u3068\u3059\u308b\u3002\n\u300cinject\u300d\u30ce\u30fc\u30c9\u3068\u300cibmiot out\u300d\u30ce\u30fc\u30c9\u3092\u4f7f\u3046\u3002\n![Node-RED_MQTT_pub_001.png](https://qiita-image-store.s3.amazonaws.com/0/85506/5b6867a2-4b43-f221-4a27-bf9378d9d9b1.png)\n\ninject\u30ce\u30fc\u30c9\u306e\u4e2d\u8eab\n\u7740\u706b\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u7a7a\u3063\u307d\u3067\u3088\u3044\u3002\n![Node-RED_MQTT_pub_002.png](https://qiita-image-store.s3.amazonaws.com/0/85506/01955da7-8847-38ef-4eb1-a25c6b3ff7c2.png)\n\nibmiot out\u30ce\u30fc\u30c9\u306e\u4e2d\u8eab\n![Node-RED_MQTT_pub_buzzer_001.png](https://qiita-image-store.s3.amazonaws.com/0/85506/c86e0f9b-5a24-48ad-7c5f-373ef10384f4.png)\n\n|\u9805\u76ee\u540d|\u8a2d\u5b9a\u5024|\u5099\u8003|\n|:--|:--|:--|\n|Output Type|Device Command||\n|Device Type|iotsample-raspberrypi|IoT Foundation\u3067\u767b\u9332\u3057\u305f\u901a\u308a\u306b\u3002<br>IoTF\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u78ba\u8a8d\u53ef\u80fd|\n|Device Id|xxxxxxxxxxxx|RasPi\u4e0a\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u3059\u308b\u5024<br>`# service iot getdeviceid`<br>IoTF\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u78ba\u8a8d\u53ef\u80fd|\n|Command Type|buzzer|\u30c8\u30d4\u30c3\u30af\u306e\u4e00\u90e8\u306b\u306a\u308b\u305f\u3081\u56fa\u5b9a|\n|Format|json|\u30c8\u30d4\u30c3\u30af\u306e\u4e00\u90e8\u306b\u306a\u308b\u305f\u3081\u56fa\u5b9a|\n|Data|{\"delay\":1}|\u6570\u5b57\u306f\u4f55\u3067\u3082\u3088\u3044|\n|Name|IoTF|Node-RED\u4e0a\u306e\u8868\u793a\u540d\u306a\u3060\u3051\u306a\u306e\u3067\u4f55\u3067\u3082\u3088\u3044|\n\n\u4e0a\u8a182\u3064\u306e\u30ce\u30fc\u30c9\u3092\u7dda\u3067\u3064\u306a\u3044\u3060\u3089\u3001\u53f3\u4e0a\u306e\u300cDeploy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002\n![Node-RED_MQTT_pub_004.png](https://qiita-image-store.s3.amazonaws.com/0/85506/82b4339e-41fa-b597-914a-236d1d336a83.png)\n\ninject\u30ce\u30fc\u30c9\u3092\u30dd\u30c1\u30c3\u3068\u3059\u308b\u3068\u3001RasPi\u4e0a\u3067\u30d7\u30ed\u30b0\u30e9\u30e0(/home/pi/bin/software_tone)\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n![Node-RED_MQTT_pub_005.png](https://qiita-image-store.s3.amazonaws.com/0/85506/a8a9343a-861c-0a73-5cd1-8457215b3126.png)\n\n\u30c9\u30ec\u30df\u30d5\u30a1\u30bd\u30e9\u30b7\u30c9\u304c\u9cf4\u308b\u3002\uff08\u52d5\u753b\u3092\u518d\u63b2\uff09\n<blockquote class=\"twitter-video\" lang=\"ja\"><p lang=\"und\" dir=\"ltr\"><a href=\"https://twitter.com/hashtag/RaspberryPi?src=hash\">#RaspberryPi</a> <a href=\"https://twitter.com/hashtag/Bluemix?src=hash\">#Bluemix</a> <a href=\"https://twitter.com/hashtag/IoT?src=hash\">#IoT</a> <a href=\"https://twitter.com/hashtag/MQTT?src=hash\">#MQTT</a> <a href=\"https://t.co/l5ynRtj2oD\">pic.twitter.com/l5ynRtj2oD</a></p>&mdash; m (@getapojim) <a href=\"https://twitter.com/getapojim/status/659356311381934080\">2015, 10\u6708 28</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u6240\u611f\n\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4e2d\u3067\u304d\u3063\u3068`/sys/class/gpio`\u3092\u4f7f\u3063\u3066\u308b\u3093\u3060\u3068\u4fe1\u3058\u305f\u3044\uff01\n\n<!--\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u7d9a\u304d\n<font color=red>(2)\u3000\u30bb\u30f3\u30b5\u30fc\u3092\u4ed8\u3051\u3066\u30c7\u30fc\u30bf\u3092\u62fe\u3046\u3000\u6e29\u5ea6\u30bb\u30f3\u30b5\u30fc\u30c7\u30b8\u30bf\u30eb\u7de8\u3000\uff08\u3053\u308c\u304b\u3089\u66f8\u304f\uff09</font>\n-->\n\n#<i class=\"fa fa-cube\" style=\"font-size:1em;\"></i>\u74b0\u5883\n\n[Raspberry Pi 2 Model B](https://www.raspberrypi.org/products/raspberry-pi-2-model-b/)\n[Raspbian](https://www.raspberrypi.org/downloads/raspbian/)\n[Bluemix IoT Foundation](https://internetofthings.ibmcloud.com/)\n[Node-RED](http://nodered.org/)\n\n#<i class=\"fa fa-book\" style=\"font-size:1em;\"></i>\u53c2\u8003\nBluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4\nhttps://developer.ibm.com/recipes/tutorials/raspberry-pi-4/\n\nBluemix\u306eRaspberryPi\u767b\u9332\u30ec\u30b7\u30d4\u306b\u767b\u5834\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u7528\u306esample\u30d7\u30ed\u30b0\u30e9\u30e0\n(Linux\u7528\u306edaemon\u306b\u306a\u3063\u3066\u3044\u308b)\nhttps://github.com/ibm-messaging/iot-raspberrypi/blob/master/samples/c/\n\nhttps://github.com/ibm-messaging/iot-raspberrypi/tree/master/samples/c#command-support\n"}