{"context": " More than 1 year has passed since last update.\u3069\u3046\u3082\u89b3\u8449\u690d\u7269\u3092\u67af\u3089\u3057\u3066\u3057\u307e\u3046\u2026\u3068\u3044\u3046\u3042\u306a\u305f\u3078\u3002\n\u3046\u3061\u306b\u306f\u862d\u306e\u9262\u690d\u3048\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u6c34\u3084\u308a\u3092\u5fd8\u308c\u3066\u3075\u3068\u6c17\u3065\u304f\u3068\u3057\u306a\u3073\u3066\u305f\u2026\u306a\u3093\u3066\u3053\u3068\u304c\u826f\u304f\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u306a\u3093\u3068\u304b\u3057\u305f\u3044\u3068\u601d\u3044\u3001\u5bb6\u306b\u8ee2\u304c\u3063\u3066\u305fArduino\u3092\u306f\u3058\u3081\u3088\u3046\u30ad\u30c3\u30c8\u3068Grove\u306e\u6c34\u5206\u30bb\u30f3\u30b5\u3092\u4f7f\u3063\u3066\u3001\u6c34\u304c\u307b\u3057\u3044\u6642\u306b\u306f\u9262\u690d\u3048\u306b\u81ea\u5206\u3067\u558b\u3089\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002(\u81ea\u52d5\u6c34\u3084\u308a\u3092\u304a\u6c42\u3081\u306e\u5834\u5408\u306f\u3053\u3061\u3089\u3092\u898b\u308b\u3068\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059)\n\u4e7e\u3044\u3066\u308b\u3068\u300c\u306e\u3069\u4e7e\u3044\u305f\u3093\u3060\u3051\u3069\u301c\u300d\u3001\u6c34\u3092\u3042\u3052\u308b\u3068\u4e7e\u71e5\u5177\u5408\u3044\u306b\u3088\u3063\u3066\u300c\u3042\u308a\u304c\u3068\u3046\u301c\u300d\u3082\u3057\u304f\u306f\u300c\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u2026\u300d\u3068\u558b\u308a\u307e\u3059\u3002\n\n\u52d5\u753b: https://www.youtube.com/watch?v=EL0n1X9qQeo\n\u534a\u6708\u304f\u3089\u3044\u904b\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u5fd8\u308c\u305f\u9803\u306b\u545f\u3044\u3066\u304d\u3066\u3001\u6c34\u3092\u3042\u3052\u308b\u3068\u304a\u793c\u3092\u8a00\u308f\u308c\u308b\u306e\u3067\u3061\u3087\u3063\u3068\u548c\u3080\u3068\u592b\u306b\u597d\u8a55\u3067\u3059\u3002\u3068\u308a\u3042\u3048\u305a\u904b\u7528\u306f\u3058\u3081\u3066\u304b\u3089\u67af\u308c\u3066\u306a\u3044\uff01\n\u79c1\u304c Arduino \u521d\u5fc3\u8005\u306a\u306e\u3067\u8aac\u660e\u3082\u5272\u3068\u521d\u5fc3\u8005\u5411\u3051\u306e\u3064\u3082\u308a\u3067\u3059\u3002\n\n\u8981\u308b\u3082\u306e\n\nArduino Uno (Arduino\u3092\u306f\u3058\u3081\u3088\u3046\u30ad\u30c3\u30c8\u306e\u3082\u306e\u3092\u4f7f\u7528)\n\u30b8\u30e3\u30f3\u30d1\u30b1\u30fc\u30d6\u30eb (\u30aa\u30b9 - \u30aa\u30b9) 6\u672c (Arduino\u3092\u306f\u3058\u3081\u3088\u3046\u30ad\u30c3\u30c8\u306e\u3082\u306e\u3092\u4f7f\u7528)\nGrove \u6c34\u5206\u30bb\u30f3\u30b5\n\nGrove - 4\u30d4\u30f3\u5909\u63db\u30b1\u30fc\u30d6\u30eb\u3082\u3057\u304f\u306fGrove \u30d9\u30fc\u30b9\u30b7\u30fc\u30eb\u30c9\n\n100\u5747\u3067\u58f2\u3063\u3066\u308biPhone\u7528\u3068\u304b\u306e\u30df\u30cb\u30b9\u30d4\u30fc\u30ab\u30fc\n\u306f\u3055\u307f\u3001\u30bb\u30ed\u30c6\u30fc\u30d7\u3001\u30e9\u30a4\u30bf\u30fc\nPC (Mac)\n\n\u534a\u7530\u306f\u4f7f\u3063\u3066\u3082\u3044\u3044\u3051\u3069\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u3002PC \u5074\u306f Mac \u3058\u3083\u306a\u304f\u3066\u3082\u3044\u3044\u3067\u3059\u304c\u8aac\u660e\u306f Mac \u5411\u3051\u3067\u3059\u3002\n\nArduino\u306e\u6e96\u5099\n\u304a\u3082\u3080\u308d\u306b Getting Started w/ Arduino \u306e\u30da\u30fc\u30b8\u3092\u958b\u3044\u3066\u8a00\u3046\u3068\u304a\u308a\u306b\u3057\u307e\u3059\u3002\n\n\n\u3053\u3053\u304b\u3089 Mac OS X \u5411\u3051\u306e\u30bd\u30d5\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nArduino\u3068PC (Mac) \u3092USB\u3067\u63a5\u7d9a\u3059\u308b\n1.\u3067\u5165\u308c\u305fArduino\u30a2\u30d7\u30ea\u3092\u7acb\u3061\u4e0a\u3052\u308b\n\u30c4\u30fc\u30eb (Tools) -> \u30de\u30a4\u30b3\u30f3\u30dc\u30fc\u30c9 (Board) \u304b\u3089 Arduino Uno \u3092\u9078\u629e\n\u30c4\u30fc\u30eb (Tools) -> \u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8 (Serial Port) \u304b\u3089 /dev/tty.usbmodemXXX \u3092\u9078\u629e\n\n\u3053\u3053\u304b\u3089\u306f\u30b5\u30f3\u30d7\u30eb\u3068\u304bL\u30c1\u30ab\u3068\u304b\u3059\u3063\u98db\u3070\u3057\u3066\u3001\u3068\u306b\u304b\u304f\u97f3\u3092\u3060\u3059\u6e96\u5099\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u97f3\u3092\u51fa\u3059\u9069\u5f53\u306a\u30b5\u30f3\u30d7\u30eb\u3092\u30b9\u30b1\u30c3\u30c1\u306b\u8cbc\u308a\u3064\u3051\u308b (\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30da)\n\u4e0a\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u304b\u3089\u300c\u2192\u300d\u5370\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Arduino\u306b\u66f8\u304d\u8fbc\u3080\n\n\n\u3053\u308c\u3067\u30b9\u30b1\u30c3\u30c1\u3067\u6307\u5b9a\u3057\u305f\u30d4\u30f3 (\u4f8b\u3048\u3070 pinMode(8, OUTPUT) \u3068\u3057\u3066\u305f\u3089\u30d4\u30f38) \u304b\u3089\u97f3\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30b9\u30d4\u30fc\u30ab\u30fc\u306e\u6e96\u5099\nArduino\u306b\u63a5\u7d9a\u3059\u308b\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u4f5c\u308a\u307e\u3059\u3002\u5b89\u304f\u3066\u307e\u3042\u307e\u3042\u805e\u3053\u3048\u308b\u3082\u306e\u304c\u6b32\u3057\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3001100\u5747\u3067\u6253\u3063\u3066\u308biPhone\u7528\u306e\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\u3053\u3093\u306a\u306e\n\n\n100\u5747\u30b9\u30d4\u30fc\u30ab\u30fc\u306e\u30b1\u30fc\u30d6\u30eb\u306e\u9014\u4e2d\u3092\u306f\u3055\u307f\u3067\u3061\u3087\u3093\u5207\u308b\n\u5207\u3063\u305f\u3068\u3053\u308d\u304b\u3089\u30b1\u30fc\u30d6\u30eb\u306e\u5468\u308a\u306e\u76ae\u819c\u3092\u3042\u308b\u7a0b\u5ea6\u306f\u304c\u3059\n3\u672c\u306e\u30a8\u30ca\u30e1\u30eb\u3067\u30b3\u30fc\u30c6\u30a3\u30f3\u30b0\u3055\u308c\u3066\u308b\u7dda\u304c\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\u30e9\u30a4\u30bf\u30fc\u306a\u3069\u3067\u3042\u3076\u3063\u3066\u304b\u3089\u30a6\u30a7\u30c3\u30c8\u30c6\u30a3\u30b7\u30e5\u30fc\u3067\u62ed\u304f\u306a\u3069\u3057\u3066\u30a8\u30ca\u30e1\u30eb\u3092\u306f\u304c\u3059 (\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8)\n\u30b8\u30e3\u30f3\u30d1\u30b1\u30fc\u30d6\u30eb\u3068\u30a8\u30ca\u30e1\u30eb\u3092\u306f\u304c\u3057\u305f\u7dda\u3092\u3064\u306a\u3052\u308b\u3002\u534a\u7530\u3067\u3084\u308b\u3068\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3050\u308b\u3050\u308b\u5dfb\u304d\u3064\u3051\u3066\u30bb\u30ed\u30c6\u30fc\u30d7\u3068\u304b\u3067\u3082\u53ef\n\n\u3053\u3053\u3067\u51fa\u3066\u304d\u305f3\u672c\u306e\u7dda\u304c\u305d\u308c\u305e\u308c GND\u3001\u53f3\u3001\u5de6\u306e\u306f\u305a\u3002\u4ed6\u306e\u30b9\u30d4\u30fc\u30ab\u30fc\u3067\u3082\u305d\u3046\u306a\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u3046\u3061\u306e\u30b1\u30fc\u30d6\u30eb\u3067\u306f\u9ec4\u8272\u304c GND\u3001\u304c\u53f3\u3001\u7dd1\u304c\u5de6\u3063\u307d\u304b\u3063\u305f\u306e\u3067\u3001\u9ec4\u8272\u306e\u7dda\u3092 Arduino \u306e GND \u306b\u3001\u8d64\u304b\u7dd1\u3092\u97f3\u3092\u51fa\u529b\u3057\u3066\u3044\u308b\u30d4\u30f3 (\u4e0a\u306e\u4f8b\u3067\u306f\u30d4\u30f38) \u306b\u633f\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u3064\u306a\u3044\u3060\u3042\u3068\u3001\u30b9\u30d4\u30fc\u30ab\u30fc\u304b\u3089\u30d4\u30ed\u30d4\u30ed\u97f3\u304c\u9cf4\u3063\u3066\u308c\u3070\u6e96\u5099\u5b8c\u4e86\uff01 \uff08\u30b9\u30d4\u30fc\u30ab\u30fc\u306f\u5272\u3068\u9069\u5f53\u306b\u3064\u306a\u3044\u3067\u3082\u58ca\u308c\u306a\u3044\uff08\u306f\u305a\uff09\u306a\u306e\u3067\u3001\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3089\u9069\u5f53\u306b\u7dda\u3092\u5dee\u3057\u66ff\u3048\u3066\u307f\u307e\u3059\uff09\n\n\u97f3\u58f0\u30c7\u30fc\u30bf\u306e\u6e96\u5099\n\u8abf\u3079\u3066\u307f\u308b\u3068 Arduino Uno \u304c\u3042\u308c\u3070\u7279\u5225\u306a\u30b7\u30fc\u30eb\u30c9\u306a\u3069\u306f\u306a\u304f\u3066\u3082\u5358\u4f53\u3067 PCM\u3000\u97f3\u58f0\u30c7\u30fc\u30bf\u3092\u9cf4\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u305d\u3053\u3067\u3001Arduino \u3067\u4f7f\u3048\u308b 8bit PCM \u30c7\u30fc\u30bf\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f\u65e5\u672c\u8a9e\u3092\u558b\u3089\u305b\u305f\u3044\u306e\u3067\u3001Mac OS X\u3067\u52d5\u4f5c\u3059\u308b\u65e5\u672c\u8a9e\u97f3\u58f0\u5408\u6210\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2 SayKana \u3092\u4f7f\u3044\u3001\u305d\u308c\u304c\u51fa\u529b\u3059\u308bAIFF\u30d5\u30a1\u30a4\u30eb\u304b\u3089PCM\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u51fa\u3059\u9069\u5f53\u306aGo\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\nSayKana\u3092 http://www.a-quest.com/quickware/saykana/ \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n(go\u8a00\u8a9e\u74b0\u5883\u304c\u306a\u3051\u308c\u3070) go\u8a00\u8a9e\u306e Mac OS X \u7528\u306e pkg \u30d5\u30a1\u30a4\u30eb\u3092\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nhttps://github.com/kinu/AIFF2Arduino \u304b\u3089 aiff2arduino.go \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\nSayKana\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068 saykana \u30b3\u30de\u30f3\u30c9\u3067\u65e5\u672c\u8a9e\u3092\u3057\u3083\u3079\u3089\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff08\u3072\u3089\u304c\u306a\u306e\u307f\uff09\u3002\u307e\u305f\u3001\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u3067\u30a2\u30af\u30bb\u30f3\u30c8\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u4f8b\u3048\u3070\u3053\u3093\u306a\u611f\u3058\u3067\u3057\u3083\u3079\u308a\u307e\u3059\uff1a\n\nTerminal\n$ saykana \"\u3042\u308a'\u304c\u3068\u3046\"\n\n\n-o\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3068 AIFF \u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u97f3\u58f0\u3092\u51fa\u529b\u3067\u304d\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nTerminal\n$ saykana \"\u306e'\u3069/\u304b\u308f'\u3044\u305f\u3093\u3060\u3051\u3069\" -o thirsty.aiff\n$ saykana \"\u3042\u308a'\u304c\u3068\u3046\" -o thankyou.aiff\n$ saykana \"\u3057\u306c'\u304b\u3068\u304a\u3082\u3063\u305f\" -o wasdying.aiff\n\n\n\u3053\u308c\u30673\u7a2e\u985e\u306e\u97f3\u58f0\u30c7\u30fc\u30bf\u304c\u3067\u304d\u307e\u3057\u305f\u3002\u3053\u3053\u3067\u4f5c\u3089\u308c\u308bAIFF\u30d5\u30a1\u30a4\u30eb\u306f 16bit/8kHz \u306ePCM\u30c7\u30fc\u30bf\u3067\u3059\u3002\u3053\u308c\u3092aiff2arduino.go \u3067Arduino\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b 8bit/8kHz \u306e\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3057\u30018bit \u306e\u6570\u5024\u306e\u914d\u5217\u306b\u3057\u307e\u3059\u3002\n\nTerminal\n$ go run aiff2arduino.go --dither thirsty.aiff > thirsty.h\n$ go run aiff2arduino.go --dither thankyou.aiff > thankyou.h\n$ go run aiff2arduino.go --dither wasdying.aiff > wasdying.h\n\n\n\u305d\u308c\u305e\u308c\u4e2d\u8eab\u306f\u6b21\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u306b\u306a\u308a\u307e\u3059\uff1a\n\nthirsty.h\nprog_uchar thirsty[] PROGMEM = {\n  128, 128, 128, 127, ...\n};\n\n\nPROGMEM \u306f SRAM \u306e\u304b\u308f\u308a\u306b Flash \u30e1\u30e2\u30ea\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u9818\u57df\u3078\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u3059\u3002\u8a73\u3057\u304f\u306f Arduino\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nGrove\u6c34\u5206\u30bb\u30f3\u30b5\u306e\u6e96\u5099\nGrove \u306e\u30bb\u30f3\u30b5\u306f\u3059\u3079\u30664\u30d4\u30f3\u304c1\u3064\u306b\u306a\u3063\u305f\u30bd\u30b1\u30c3\u30c8\u306e\u3088\u3046\u306a\u30b3\u30cd\u30af\u30bf\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092 Arduino \u3084\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306b\u63a5\u7d9a\u3059\u308b\u306b\u306f\u3001Grove \u30d9\u30fc\u30b9\u30b7\u30fc\u30eb\u30c9\u3092\u4f7f\u3046\u306e\u304c\u666e\u901a\u306e\u3088\u3046\u3067\u3059\u3002\u305f\u3060\u3001\u4eca\u56de\u306f\u30bb\u30f3\u30b5\u30fc\u30921\u3064\u3064\u306a\u3050\u3060\u3051\u306a\u306e\u3067\u3001\u304a\u624b\u8efd\u306bGrove - 4\u30d4\u30f3\u5909\u63db\u30b1\u30fc\u30d6\u30eb\u3092\u4f7f\u3063\u3066\u666e\u901a\u306e\u30b8\u30e3\u30f3\u30d1\u30b1\u30fc\u30d6\u30eb\u3067 Arduino \u3068\u63a5\u7d9a\u3057\u307e\u3057\u305f\u3002\n\nGrove \u6c34\u5206\u30bb\u30f3\u30b5\u30fc\u306e\u56de\u8def\u56f3\u306f\u30b9\u30a4\u30c3\u30c1\u30b5\u30a4\u30a8\u30f3\u30b9\u306e\u8ca9\u58f2\u30da\u30fc\u30b8\u306b\u8f09\u3063\u3066\u3044\u307e\u3059\u3002\u30d4\u30f3\u306f\u7aef\u304b\u3089 GND, VCC, (No Connection), SIG \u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001GND \u3092 Arduino \u306e GND \u306b\u3001VCC \u3092 Arduino \u306e\u96fb\u6e90 (5V) \u306b\u3001SIG \u3092 A0 \u306b\u3064\u306a\u304e\u307e\u3059\u3002\n\u6c34\u5206\u30bb\u30f3\u30b5\u306e\u5024\u306f analogRead(A0) \u3068\u3059\u308b\u3068\u8aad\u307f\u51fa\u305b\u307e\u3059(A0\u306b\u3064\u306a\u3044\u3067\u308b\u5834\u5408)\u3002\u7c21\u5358\u3067\u3059\u306d\u301c\n\nmoisture_sample.ino\nvoid setup() {\n  Serial.begin(9600);\n}\n\nvoid loop() {\n  // 1\u79d2\u6bce\u306b\u5024\u3092\u8aad\u307f\u3060\u3057\u3066\u30b7\u30ea\u30a2\u30eb\u306b\u66f8\u304f\n  int sensorValue = analogRead(A0);\n  Serial.println(sensorValue);\n  ...\n  delay(1000);\n}\n\n\nSerial.println\u3067\u66f8\u304d\u3060\u3057\u305f\u5024\u306f\u3001Arduino\u30a2\u30d7\u30ea\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u306e\u866b\u773c\u93e1\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nArduino\u30b9\u30b1\u30c3\u30c1(\u30b3\u30fc\u30c9)\u306e\u6e96\u5099\n(\u7d30\u304b\u3044\u8aac\u660e\u306f\u3044\u3044\u304b\u3089\u3059\u3050\u558b\u3089\u305b\u305f\u3044\uff01\u3068\u3044\u3046\u65b9\u306f\u3053\u3053\u307e\u3067\u98db\u3070\u3057\u3066OK)\n\nFast PWM\u30e2\u30fc\u30c9\u306e\u8a2d\u5b9a\n\u57fa\u672c\u7684\u306b\u306f Arduino Uno \u306e\u30b7\u30b9\u30c6\u30e0\u30af\u30ed\u30c3\u30af\u306f 16 MHz \u306a\u306e\u3067\u3059\u304c\u3001\u901a\u5e38\u6642\u306f Pin 9, 10 (Timer/Counter1), 3, 11 (Timer/Counter2) \u306f 490Hz\u3001Pin 5, 6 (Timer/Counter0) \u306f 1kHz \u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3067\u306f\u3069\u3046\u3084\u3063\u3066\u3082\u51fa\u529b\u3057\u305f\u3044\u97f3\u58f0\u6ce2\u5f62\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001PWM (Pulse-with modulation) \u306e\u6ce2\u5f62\u751f\u6210\u5468\u671f\u3092\u3042\u3052\u308b\u8a2d\u5b9a\u3092\u3059\u308b == Fast PWM \u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u8a73\u7d30\u306f[1][2][3][4]\u3084ATmega328\u306e\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u3092\u8aad\u3081\u3070\u308f\u304b\u308a\u307e\u3059\u304c\u3001\u3056\u3063\u304f\u308a\u306f\u3057\u3087\u3063\u3066\u66f8\u304f\u3068 setup \u95a2\u6570\u5185\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3068 Pin 3 \u304c Fast PWM \u30e2\u30fc\u30c9\u306b\u306a\u308a\u3001\u6700\u5927\u5468\u671f\u306e 16 MHz\u3067 8-bit \u30bf\u30a4\u30de\u304c\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\nfastpwm_sample.ino\nvoid setup() {\n  // PIN#3/#11: Timer/Counter2\n  pinMode(3, OUTPUT);\n\n  // http://www.atmel.com/Images/doc8161.pdf\n  // Non-inverting fast PWM mode on Pin 3.\n  // COM2B1:0 ==  10: Non-inverting mode\n  // WGM22:0  == 011: Fast PWM mode, 256 cycle (16MHz / 256 == 62.5kHz)\n  // CS2:0    == 001: No prescaler (runs at maximum rate, 62.5kHz)\n  TCCR2A = _BV(COM2B1) | _BV(WGM21) | _BV(WGM20);\n  TCCR2B = _BV(CS20);\n}\n\n\n\u3053\u306e\u72b6\u614b\u3067 OCR2B \u306b 0 \u304b\u3089 255 \u306e\u5024\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3053\u3068\u3067 PWM \u306e duty (\u30bf\u30a4\u30de\u304c1\u5468\u3059\u308b\u9593\u306b\u3069\u308c\u304f\u3089\u3044\u51fa\u529b\u77e9\u5f62\u3092 High \u306b\u3059\u308b\u304b) \u3092\u5909\u66f4\u3057\u3066\u51fa\u529b\u6ce2\u5f62\u3092\u4f5c\u308a\u307e\u3059\u3002\nSayKana \u30b3\u30de\u30f3\u30c9\u3067\u306f 8kHz \u306e\u30ea\u30cb\u30a2 PCM \u304c\u4f5c\u3089\u308c\u308b\u306e\u3067\u3001OCR2B \u306e\u5024\u3092 8kHz \u3067\u66f4\u65b0\u3059\u308c\u3070\u97f3\u304c\u51fa\u307e\u3059\u30028kHz \u306f Arduino \u306e\u30bf\u30a4\u30de\u3092\u3082\u30461\u3064\u4f7f\u3063\u3066\u5272\u308a\u8fbc\u307f\u30cf\u30f3\u30c9\u30e9 (ISR) \u3068\u3057\u3066\u66f8\u3044\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c(\u30b5\u30f3\u30d7\u30eb)\u3001\u3053\u3061\u3089\u306e\u4f8b\u306e\u3088\u3046\u306b\u5358\u306b\u30eb\u30fc\u30d7\u3067 1 sec / 8000 = 125 msec (delayMicroseconds(125)) \u3092\u306f\u3055\u3093\u3067\u51fa\u529b\u3059\u308b\u3060\u3051\u3067\u3082\u52d5\u304d\u307e\u3059\u3002\n\nPCM\u97f3\u58f0\u30c7\u30fc\u30bf\u306e\u51fa\u529b\n\u4e0a\u3067\u6e96\u5099\u3057\u305f\u97f3\u58f0\u30c7\u30fc\u30bf\u3092 Arduino \u30b3\u30fc\u30c9\u304b\u3089\u8aad\u3080\u306b\u306f\u3001aiff2arduino.go \u3067\u4f5c\u6210\u3057\u305f\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3057\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u9818\u57df\u306b\u304a\u304b\u308c\u305f\u30e1\u30e2\u30ea\u3092\u8aad\u307f\u51fa\u3059\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570 pgm_read_byte_near() \u3092\u4f7f\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070 thirsty.h \u306e\u30c7\u30fc\u30bf\u3092\u30c7\u30a3\u30ec\u30a4\u3092\u5165\u308c\u306a\u304c\u3089 OCR2B \u306b\u30bb\u30c3\u30c8\u3059\u308b\u5834\u5408\u3001thirsty.h \u30d5\u30a1\u30a4\u30eb\u3092 Arduino \u306e\u30b3\u30fc\u30c9\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\uff1a\n\nthirsty.h\nprog_uchar thirsty[] PROGMEM = {\n  128, 128, 128, 127, ...\n};\n\n\n\npcm_sample.ino\n#include \"thirsty.h\"\n#define ARRAYSIZE(x)  (sizeof(x) / sizeof((x)[0]))\n\nvoid play() {\n  for (int i = 0; i < ARRAYSIZE(thirsty); i++) {\n    OCR2B = pgm_read_byte_near(&thirsty[i]);\n    delayMicroseconds(125);\n  }\n} \n\n\n\u3053\u308c\u3067 Arduino \u304c\u3057\u3083\u3079\u308a\u307e\u3057\u305f\uff01\n\n\u5168\u90e8\u3064\u306a\u3052\u3066\u307f\u308b\n\u3053\u308c\u3067\u307b\u307c\u6e96\u5099\u304c\u3059\u3093\u3060\u306e\u3067\u3001\u305c\u3093\u3076\u3092\u3064\u306a\u3052\u3066\u307f\u307e\u3059\u3002Grove \u6c34\u5206\u30bb\u30f3\u30b5\u3067\u306f\u6c34\u5206\u91cf\u306b\u5fdc\u3058\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5024\u304c\u5909\u308f\u308b\u306e\u3067\u3001200\u301c250 \u304f\u3089\u3044\u3092\u95be\u5024\u306b\u3057\u3066\u4e7e\u71e5\u3057\u3066\u308b\u304b\u3069\u3046\u304b\u3092\u5224\u65ad\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\n\n\u72b6\u614b\n\u5024\n\n\n\n\n\u4e7e\u3044\u305f\u571f\u306e\u4e2d\n0\u301c300\n\n\n\u6f64\u3063\u305f\u571f\u306e\u4e2d\n300\u301c700\n\n\n\u6c34\u4e2d\n700\u301c950\n\n\n\n\u4e7e\u71e5\u3057\u3066\u3044\u305f\u308910\u5206\u304a\u304d\u306b\u300c\u306e\u3069\u304b\u308f\u3044\u305f\u300d\u3001\u6025\u306b\u6c34\u5206\u91cf\u304c\u3042\u304c\u3063\u305f\u3089\u4e7e\u71e5\u5ea6\u306b\u5fdc\u3058\u3066\u300c\u3042\u308a\u304c\u3068\u3046\u300d\u3042\u308b\u3044\u306f\u300c\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u300d\u3068\u3057\u3083\u3079\u3089\u305b\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\uff08\u672c\u5f53\u306f\u4eba\u611f\u30bb\u30f3\u30b5\u3082\u3064\u3051\u3066\u3001\u4e7e\u71e5\u3057\u3066\u308b\u3068\u304d\u306f\u4eba\u304c\u524d\u306b\u6765\u305f\u3089\u3057\u3083\u3079\u308b\u65b9\u304c\u305d\u308c\u3063\u307d\u3044\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\u624b\u5143\u306b\u306a\u3044\u306e\u3067\u4eca\u56de\u306f\u30ca\u30b7\u3067\u2026\uff09\n\u3060\u3044\u305f\u3044\u4ee5\u4e0b\u306e\u69d8\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3057\u305f\uff1a\n\ntalkative_plant.ino\n#include <avr/interrupt.h>\n#include <avr/pgmspace.h>\n\n#include \"thirsty.h\"\n#include \"thankyou.h\"\n#include \"wasdying.h\"\n#define ARRAYSIZE(x)  (sizeof(x) / sizeof((x)[0]))\n\n// \u30bb\u30f3\u30b5\u306fA0\u306b\u3001\u30b9\u30d4\u30fc\u30ab\u30fc\u306f\u30d4\u30f33\u306b\u63a5\u7d9a\u3059\u308b\nconst int sensorPin = A0;\nconst int speakerPin = 3;\n\nvoid setup() {\n  Serial.begin(9600);\n\n  // PIN#3/#11: Timer/Counter2\n  pinMode(speakerPin, OUTPUT);\n\n  // http://www.atmel.com/Images/doc8161.pdf\n  // Non-inverting fast PWM mode, with no prescaling on pin 3.\n  // COM2B1:0 ==  10: Non-inverting mode\n  // WGM22:0  == 011: Fast PWM mode, 256 cycle (16MHz / 256 == 62.5kHz)\n  // CS2:0    == 001: No prescaler (runs at maximum rate, 62.5kHz)\n  TCCR2A = _BV(COM2B1) | _BV(WGM21) | _BV(WGM20);\n  TCCR2B = _BV(CS20);\n  OCR2B = 0;\n}\n\nvolatile unsigned long lastPlay = 0;\nvolatile int lastSensorValue = 0;\n\nvoid playSound(prog_uchar* audio, int audio_length, bool force) {\n  // Don't spam too much.\n  if (!force && millis() < lastPlay + 600000) {\n    return;\n  }\n  lastPlay = millis();\n  for (int i = 0; i < audio_length; i++) {\n    OCR2B = pgm_read_byte_near(&audio[i]);\n    delayMicroseconds(125);\n  }\n}\n\nvoid loop() {\n  int sensorValue = analogRead(sensorPin);\n  int diff = sensorValue - lastSensorValue;\n  delay(1000);\n  Serial.println(sensorValue);\n\n  // http://seeedstudio.com/wiki/Grove_-_Moisture_Sensor\n  // dry: 0-300\n  // humid: 300-700\n  if (sensorValue < 200) {\n    playSound(thirsty, ARRAYSIZE(thirsty), abs(diff) > 100);\n  } else if (lastSensorValue < 50) {\n    playSound(wasdying, ARRAYSIZE(wasdying), true);\n  } else if (diff > 100) {\n    playSound(thankyou, ARRAYSIZE(thankyou), true);\n  }\n\n  lastSensorValue = sensorValue;\n}\n\n\n\u3042\u3068\u306f\u3053\u306e\u30b9\u30b1\u30c3\u30c1\u3092\u30dc\u30fc\u30c9\u306b\u66f8\u304d\u8fbc\u3093\u3067\u3001\n\nGrove\u30bb\u30f3\u30b5\u3092 A0 (\u3068GND\u30685V) \u306b\n\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u30d4\u30f3 3 (\u3068GND) \u306b\n\u30bb\u30f3\u30b5\u3092\u690d\u6728\u9262\u306b\u523a\u3057\u3066\u8a2d\u7f6e\u3059\u308c\u3070\u5b8c\u6210\uff01\n\n\u51ac\u306e\u4e7e\u71e5\u3082\u304a\u3046\u3061\u30cf\u30c3\u30af\u3067\u4e57\u308a\u5207\u308d\u3046\uff01\n\u306a\u304a\u3001\u5168\u30b3\u30fc\u30c9\u306f https://github.com/kinu/ArduinoTalkativePlant/\n\u3053\u3061\u3089\u306b\u304a\u3044\u3066\u307e\u3059\u3002\n\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30da\u30fc\u30b8\n\nArduino\u516c\u5f0f: Getting Started\nQiita: [WIP] Arduino\u3067\u97f3\u3092\u51fa\u3057\u305f\u3044\uff08\u30e1\u30e2\uff09\n\u30a4\u30e4\u30db\u30f3\u7dda\u306e\u5207\u65ad\uff06\u63a5\u7d9a\u65b9\u6cd5 (Yahoo!\u77e5\u6075\u888b)\nAudio Interchange File Format: \"AIFF\" (PDF)\nATmega328 \u306e\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8 (PDF)\n\u3010\u51ac\u4f11\u307f\u306e\u5de5\u4f5c\u3011Arduino\u3092\u3057\u3083\u3079\u3089\u305b\u3066\u307f\u305f | \u3042\u308c\u305f\u3046\u307f\u3068 \u3072\u308b\u306e\u3059\u306a\u306f\u307e\nMakezine: Advanced Arduino Sound Synthesis\nArduino Playground - PCM Audio\nGrove - Moisture Sensor - Wiki\n\n\n\u3069\u3046\u3082\u89b3\u8449\u690d\u7269\u3092\u67af\u3089\u3057\u3066\u3057\u307e\u3046\u2026\u3068\u3044\u3046\u3042\u306a\u305f\u3078\u3002\n\n\u3046\u3061\u306b\u306f\u862d\u306e\u9262\u690d\u3048\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u6c34\u3084\u308a\u3092\u5fd8\u308c\u3066\u3075\u3068\u6c17\u3065\u304f\u3068\u3057\u306a\u3073\u3066\u305f\u2026\u306a\u3093\u3066\u3053\u3068\u304c\u826f\u304f\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u306a\u3093\u3068\u304b\u3057\u305f\u3044\u3068\u601d\u3044\u3001\u5bb6\u306b\u8ee2\u304c\u3063\u3066\u305f[Arduino\u3092\u306f\u3058\u3081\u3088\u3046\u30ad\u30c3\u30c8](http://www.amazon.co.jp/%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81%E3%82%B5%E3%82%A4%E3%82%A8%E3%83%B3%E3%82%B9-Arduino%E3%82%92%E3%81%AF%E3%81%98%E3%82%81%E3%82%88%E3%81%86%E3%82%AD%E3%83%83%E3%83%88/dp/B0025Y6C5G)\u3068[Grove\u306e\u6c34\u5206\u30bb\u30f3\u30b5](https://www.switch-science.com/catalog/814/)\u3092\u4f7f\u3063\u3066\u3001\u6c34\u304c\u307b\u3057\u3044\u6642\u306b\u306f\u9262\u690d\u3048\u306b\u81ea\u5206\u3067\u558b\u3089\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002(\u81ea\u52d5\u6c34\u3084\u308a\u3092\u304a\u6c42\u3081\u306e\u5834\u5408\u306f[\u3053\u3061\u3089](http://qiita.com/interestor/items/d59590b64820a8cf973e)\u3092\u898b\u308b\u3068\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059)\n\n\u4e7e\u3044\u3066\u308b\u3068\u300c\u306e\u3069\u4e7e\u3044\u305f\u3093\u3060\u3051\u3069\u301c\u300d\u3001\u6c34\u3092\u3042\u3052\u308b\u3068\u4e7e\u71e5\u5177\u5408\u3044\u306b\u3088\u3063\u3066\u300c\u3042\u308a\u304c\u3068\u3046\u301c\u300d\u3082\u3057\u304f\u306f\u300c\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u2026\u300d\u3068\u558b\u308a\u307e\u3059\u3002\n\n![talkative_plant.png](https://qiita-image-store.s3.amazonaws.com/0/2758/7e7c16e0-fb08-80b9-872e-343094c5edae.png \"talkative_plant.png\")\n\n\u52d5\u753b: https://www.youtube.com/watch?v=EL0n1X9qQeo\n\n\u534a\u6708\u304f\u3089\u3044\u904b\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u5fd8\u308c\u305f\u9803\u306b\u545f\u3044\u3066\u304d\u3066\u3001\u6c34\u3092\u3042\u3052\u308b\u3068\u304a\u793c\u3092\u8a00\u308f\u308c\u308b\u306e\u3067\u3061\u3087\u3063\u3068\u548c\u3080\u3068\u592b\u306b\u597d\u8a55\u3067\u3059\u3002\u3068\u308a\u3042\u3048\u305a\u904b\u7528\u306f\u3058\u3081\u3066\u304b\u3089\u67af\u308c\u3066\u306a\u3044\uff01\n\n\u79c1\u304c Arduino \u521d\u5fc3\u8005\u306a\u306e\u3067\u8aac\u660e\u3082\u5272\u3068\u521d\u5fc3\u8005\u5411\u3051\u306e\u3064\u3082\u308a\u3067\u3059\u3002\n\n# \u8981\u308b\u3082\u306e\n\n* Arduino Uno ([Arduino\u3092\u306f\u3058\u3081\u3088\u3046\u30ad\u30c3\u30c8](http://www.amazon.co.jp/%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81%E3%82%B5%E3%82%A4%E3%82%A8%E3%83%B3%E3%82%B9-Arduino%E3%82%92%E3%81%AF%E3%81%98%E3%82%81%E3%82%88%E3%81%86%E3%82%AD%E3%83%83%E3%83%88/dp/B0025Y6C5G)\u306e\u3082\u306e\u3092\u4f7f\u7528)\n* \u30b8\u30e3\u30f3\u30d1\u30b1\u30fc\u30d6\u30eb (\u30aa\u30b9 - \u30aa\u30b9) 6\u672c ([Arduino\u3092\u306f\u3058\u3081\u3088\u3046\u30ad\u30c3\u30c8](http://www.amazon.co.jp/%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81%E3%82%B5%E3%82%A4%E3%82%A8%E3%83%B3%E3%82%B9-Arduino%E3%82%92%E3%81%AF%E3%81%98%E3%82%81%E3%82%88%E3%81%86%E3%82%AD%E3%83%83%E3%83%88/dp/B0025Y6C5G)\u306e\u3082\u306e\u3092\u4f7f\u7528)\n* [Grove \u6c34\u5206\u30bb\u30f3\u30b5](https://www.switch-science.com/catalog/814/)\n* [Grove - 4\u30d4\u30f3\u5909\u63db\u30b1\u30fc\u30d6\u30eb](https://www.switch-science.com/catalog/1252/)\u3082\u3057\u304f\u306f[Grove \u30d9\u30fc\u30b9\u30b7\u30fc\u30eb\u30c9](https://www.switch-science.com/catalog/1293/)\n* 100\u5747\u3067\u58f2\u3063\u3066\u308biPhone\u7528\u3068\u304b\u306e\u30df\u30cb\u30b9\u30d4\u30fc\u30ab\u30fc\n* \u306f\u3055\u307f\u3001\u30bb\u30ed\u30c6\u30fc\u30d7\u3001\u30e9\u30a4\u30bf\u30fc\n* PC (Mac)\n\n\u534a\u7530\u306f\u4f7f\u3063\u3066\u3082\u3044\u3044\u3051\u3069\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u3002PC \u5074\u306f Mac \u3058\u3083\u306a\u304f\u3066\u3082\u3044\u3044\u3067\u3059\u304c\u8aac\u660e\u306f Mac \u5411\u3051\u3067\u3059\u3002\n\n# Arduino\u306e\u6e96\u5099\n\n\u304a\u3082\u3080\u308d\u306b [Getting Started w/ Arduino](http://arduino.cc/en/guide/macOSX) \u306e\u30da\u30fc\u30b8\u3092\u958b\u3044\u3066\u8a00\u3046\u3068\u304a\u308a\u306b\u3057\u307e\u3059\u3002\n\n1. [\u3053\u3053](http://arduino.cc/en/main/software)\u304b\u3089 Mac OS X \u5411\u3051\u306e\u30bd\u30d5\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1. Arduino\u3068PC (Mac) \u3092USB\u3067\u63a5\u7d9a\u3059\u308b\n1. 1.\u3067\u5165\u308c\u305fArduino\u30a2\u30d7\u30ea\u3092\u7acb\u3061\u4e0a\u3052\u308b\n1. \u30c4\u30fc\u30eb (Tools) -> \u30de\u30a4\u30b3\u30f3\u30dc\u30fc\u30c9 (Board) \u304b\u3089 Arduino Uno \u3092\u9078\u629e\n1. \u30c4\u30fc\u30eb (Tools) -> \u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8 (Serial Port) \u304b\u3089 /dev/tty.usbmodemXXX \u3092\u9078\u629e\n\n\u3053\u3053\u304b\u3089\u306f\u30b5\u30f3\u30d7\u30eb\u3068\u304bL\u30c1\u30ab\u3068\u304b\u3059\u3063\u98db\u3070\u3057\u3066\u3001\u3068\u306b\u304b\u304f\u97f3\u3092\u3060\u3059\u6e96\u5099\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n1. \u97f3\u3092\u51fa\u3059\u9069\u5f53\u306a\u30b5\u30f3\u30d7\u30eb\u3092\u30b9\u30b1\u30c3\u30c1\u306b\u8cbc\u308a\u3064\u3051\u308b ([\u3053\u3061\u3089](http://qiita.com/tadfmac/items/7fb26596fe6240959c48)\u3092\u53c2\u8003\u306b[\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9](https://gist.github.com/kinu/58163b63105cd54ea614)\u3092\u30b3\u30d4\u30da)\n1. \u4e0a\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u304b\u3089\u300c\u2192\u300d\u5370\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Arduino\u306b\u66f8\u304d\u8fbc\u3080\n\n\n![arduino_upload.png](https://qiita-image-store.s3.amazonaws.com/0/2758/4d4def89-de61-68df-0883-3eda60416ce6.png \"arduino_upload.png\")\n\n\u3053\u308c\u3067\u30b9\u30b1\u30c3\u30c1\u3067\u6307\u5b9a\u3057\u305f\u30d4\u30f3 (\u4f8b\u3048\u3070 `pinMode(8, OUTPUT)` \u3068\u3057\u3066\u305f\u3089\u30d4\u30f38) \u304b\u3089\u97f3\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u30b9\u30d4\u30fc\u30ab\u30fc\u306e\u6e96\u5099\n\nArduino\u306b\u63a5\u7d9a\u3059\u308b\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u4f5c\u308a\u307e\u3059\u3002\u5b89\u304f\u3066\u307e\u3042\u307e\u3042\u805e\u3053\u3048\u308b\u3082\u306e\u304c\u6b32\u3057\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3001100\u5747\u3067\u6253\u3063\u3066\u308biPhone\u7528\u306e\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\u3053\u3093\u306a\u306e\n\n![mini-speaker.png](https://qiita-image-store.s3.amazonaws.com/0/2758/e2c7c5e1-ddb9-0b09-b5e4-012300a087d8.png \"mini-speaker.png\")\n\n1. 100\u5747\u30b9\u30d4\u30fc\u30ab\u30fc\u306e\u30b1\u30fc\u30d6\u30eb\u306e\u9014\u4e2d\u3092\u306f\u3055\u307f\u3067\u3061\u3087\u3093\u5207\u308b\n1. \u5207\u3063\u305f\u3068\u3053\u308d\u304b\u3089\u30b1\u30fc\u30d6\u30eb\u306e\u5468\u308a\u306e\u76ae\u819c\u3092\u3042\u308b\u7a0b\u5ea6\u306f\u304c\u3059\n1. 3\u672c\u306e\u30a8\u30ca\u30e1\u30eb\u3067\u30b3\u30fc\u30c6\u30a3\u30f3\u30b0\u3055\u308c\u3066\u308b\u7dda\u304c\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\u30e9\u30a4\u30bf\u30fc\u306a\u3069\u3067\u3042\u3076\u3063\u3066\u304b\u3089\u30a6\u30a7\u30c3\u30c8\u30c6\u30a3\u30b7\u30e5\u30fc\u3067\u62ed\u304f\u306a\u3069\u3057\u3066\u30a8\u30ca\u30e1\u30eb\u3092\u306f\u304c\u3059 ([\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8](http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1326995948))\n1. \u30b8\u30e3\u30f3\u30d1\u30b1\u30fc\u30d6\u30eb\u3068\u30a8\u30ca\u30e1\u30eb\u3092\u306f\u304c\u3057\u305f\u7dda\u3092\u3064\u306a\u3052\u308b\u3002\u534a\u7530\u3067\u3084\u308b\u3068\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3050\u308b\u3050\u308b\u5dfb\u304d\u3064\u3051\u3066\u30bb\u30ed\u30c6\u30fc\u30d7\u3068\u304b\u3067\u3082\u53ef\n\n\u3053\u3053\u3067\u51fa\u3066\u304d\u305f3\u672c\u306e\u7dda\u304c\u305d\u308c\u305e\u308c GND\u3001\u53f3\u3001\u5de6\u306e\u306f\u305a\u3002\u4ed6\u306e\u30b9\u30d4\u30fc\u30ab\u30fc\u3067\u3082\u305d\u3046\u306a\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u3046\u3061\u306e\u30b1\u30fc\u30d6\u30eb\u3067\u306f\u9ec4\u8272\u304c GND\u3001\u304c\u53f3\u3001\u7dd1\u304c\u5de6\u3063\u307d\u304b\u3063\u305f\u306e\u3067\u3001\u9ec4\u8272\u306e\u7dda\u3092 Arduino \u306e GND \u306b\u3001\u8d64\u304b\u7dd1\u3092\u97f3\u3092\u51fa\u529b\u3057\u3066\u3044\u308b\u30d4\u30f3 (\u4e0a\u306e\u4f8b\u3067\u306f\u30d4\u30f38) \u306b\u633f\u3057\u307e\u3059\u3002\n\n![cable.png](https://qiita-image-store.s3.amazonaws.com/0/2758/37bbcad5-ba3d-e2b8-03a9-8485ad6ee995.png \"cable.png\")\n\n\u3053\u308c\u3067\u3064\u306a\u3044\u3060\u3042\u3068\u3001\u30b9\u30d4\u30fc\u30ab\u30fc\u304b\u3089\u30d4\u30ed\u30d4\u30ed\u97f3\u304c\u9cf4\u3063\u3066\u308c\u3070\u6e96\u5099\u5b8c\u4e86\uff01 \uff08\u30b9\u30d4\u30fc\u30ab\u30fc\u306f\u5272\u3068\u9069\u5f53\u306b\u3064\u306a\u3044\u3067\u3082\u58ca\u308c\u306a\u3044\uff08\u306f\u305a\uff09\u306a\u306e\u3067\u3001\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3089\u9069\u5f53\u306b\u7dda\u3092\u5dee\u3057\u66ff\u3048\u3066\u307f\u307e\u3059\uff09\n\n# \u97f3\u58f0\u30c7\u30fc\u30bf\u306e\u6e96\u5099\n\n\u8abf\u3079\u3066\u307f\u308b\u3068 Arduino Uno \u304c\u3042\u308c\u3070\u7279\u5225\u306a\u30b7\u30fc\u30eb\u30c9\u306a\u3069\u306f\u306a\u304f\u3066\u3082\u5358\u4f53\u3067 PCM\u3000\u97f3\u58f0\u30c7\u30fc\u30bf\u3092\u9cf4\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u305d\u3053\u3067\u3001Arduino \u3067\u4f7f\u3048\u308b 8bit PCM \u30c7\u30fc\u30bf\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u65e5\u672c\u8a9e\u3092\u558b\u3089\u305b\u305f\u3044\u306e\u3067\u3001Mac OS X\u3067\u52d5\u4f5c\u3059\u308b\u65e5\u672c\u8a9e\u97f3\u58f0\u5408\u6210\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2 [SayKana](http://www.a-quest.com/quickware/saykana/) \u3092\u4f7f\u3044\u3001\u305d\u308c\u304c\u51fa\u529b\u3059\u308bAIFF\u30d5\u30a1\u30a4\u30eb\u304b\u3089PCM\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u51fa\u3059[\u9069\u5f53\u306aGo\u30d7\u30ed\u30b0\u30e9\u30e0](https://github.com/kinu/AIFF2Arduino)\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\n1. SayKana\u3092 http://www.a-quest.com/quickware/saykana/ \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1. (go\u8a00\u8a9e\u74b0\u5883\u304c\u306a\u3051\u308c\u3070) go\u8a00\u8a9e\u306e Mac OS X \u7528\u306e pkg \u30d5\u30a1\u30a4\u30eb\u3092[\u516c\u5f0f\u30b5\u30a4\u30c8](https://golang.org/dl/)\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1. https://github.com/kinu/AIFF2Arduino \u304b\u3089 `aiff2arduino.go` \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\nSayKana\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068 `saykana` \u30b3\u30de\u30f3\u30c9\u3067\u65e5\u672c\u8a9e\u3092\u3057\u3083\u3079\u3089\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff08\u3072\u3089\u304c\u306a\u306e\u307f\uff09\u3002\u307e\u305f\u3001\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u3067\u30a2\u30af\u30bb\u30f3\u30c8\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u4f8b\u3048\u3070\u3053\u3093\u306a\u611f\u3058\u3067\u3057\u3083\u3079\u308a\u307e\u3059\uff1a\n\n```bash:Terminal\n$ saykana \"\u3042\u308a'\u304c\u3068\u3046\"\n```\n\n`-o`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3068 AIFF \u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u97f3\u58f0\u3092\u51fa\u529b\u3067\u304d\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```bash:Terminal\n$ saykana \"\u306e'\u3069/\u304b\u308f'\u3044\u305f\u3093\u3060\u3051\u3069\" -o thirsty.aiff\n$ saykana \"\u3042\u308a'\u304c\u3068\u3046\" -o thankyou.aiff\n$ saykana \"\u3057\u306c'\u304b\u3068\u304a\u3082\u3063\u305f\" -o wasdying.aiff\n```\n\n\u3053\u308c\u30673\u7a2e\u985e\u306e\u97f3\u58f0\u30c7\u30fc\u30bf\u304c\u3067\u304d\u307e\u3057\u305f\u3002\u3053\u3053\u3067\u4f5c\u3089\u308c\u308bAIFF\u30d5\u30a1\u30a4\u30eb\u306f 16bit/8kHz \u306ePCM\u30c7\u30fc\u30bf\u3067\u3059\u3002\u3053\u308c\u3092`aiff2arduino.go` \u3067Arduino\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b 8bit/8kHz \u306e\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3057\u30018bit \u306e\u6570\u5024\u306e\u914d\u5217\u306b\u3057\u307e\u3059\u3002\n\n```bash:Terminal\n$ go run aiff2arduino.go --dither thirsty.aiff > thirsty.h\n$ go run aiff2arduino.go --dither thankyou.aiff > thankyou.h\n$ go run aiff2arduino.go --dither wasdying.aiff > wasdying.h\n```\n\n\u305d\u308c\u305e\u308c\u4e2d\u8eab\u306f\u6b21\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u306b\u306a\u308a\u307e\u3059\uff1a\n\n```thirsty.h\nprog_uchar thirsty[] PROGMEM = {\n  128, 128, 128, 127, ...\n};\n```\n\nPROGMEM \u306f SRAM \u306e\u304b\u308f\u308a\u306b Flash \u30e1\u30e2\u30ea\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u9818\u57df\u3078\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u3059\u3002\u8a73\u3057\u304f\u306f [Arduino\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://www.musashinodenpa.com/arduino/ref/index.php?f=0&pos=1824)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# Grove\u6c34\u5206\u30bb\u30f3\u30b5\u306e\u6e96\u5099\n\nGrove \u306e\u30bb\u30f3\u30b5\u306f\u3059\u3079\u30664\u30d4\u30f3\u304c1\u3064\u306b\u306a\u3063\u305f\u30bd\u30b1\u30c3\u30c8\u306e\u3088\u3046\u306a\u30b3\u30cd\u30af\u30bf\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092 Arduino \u3084\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306b\u63a5\u7d9a\u3059\u308b\u306b\u306f\u3001[Grove \u30d9\u30fc\u30b9\u30b7\u30fc\u30eb\u30c9](https://www.switch-science.com/catalog/1293/)\u3092\u4f7f\u3046\u306e\u304c\u666e\u901a\u306e\u3088\u3046\u3067\u3059\u3002\u305f\u3060\u3001\u4eca\u56de\u306f\u30bb\u30f3\u30b5\u30fc\u30921\u3064\u3064\u306a\u3050\u3060\u3051\u306a\u306e\u3067\u3001\u304a\u624b\u8efd\u306b[Grove - 4\u30d4\u30f3\u5909\u63db\u30b1\u30fc\u30d6\u30eb](https://www.switch-science.com/catalog/1252/)\u3092\u4f7f\u3063\u3066\u666e\u901a\u306e\u30b8\u30e3\u30f3\u30d1\u30b1\u30fc\u30d6\u30eb\u3067 Arduino \u3068\u63a5\u7d9a\u3057\u307e\u3057\u305f\u3002\n\n![grove_arduino.png](https://qiita-image-store.s3.amazonaws.com/0/2758/ac5038ec-7f62-aba7-bbb4-428caa4c243b.png \"grove_arduino.png\")\n\n\nGrove \u6c34\u5206\u30bb\u30f3\u30b5\u30fc\u306e\u56de\u8def\u56f3\u306f[\u30b9\u30a4\u30c3\u30c1\u30b5\u30a4\u30a8\u30f3\u30b9\u306e\u8ca9\u58f2\u30da\u30fc\u30b8](https://www.switch-science.com/catalog/814/)\u306b\u8f09\u3063\u3066\u3044\u307e\u3059\u3002\u30d4\u30f3\u306f\u7aef\u304b\u3089 GND, VCC, (No Connection), SIG \u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001GND \u3092 Arduino \u306e GND \u306b\u3001VCC \u3092 Arduino \u306e\u96fb\u6e90 (5V) \u306b\u3001SIG \u3092 A0 \u306b\u3064\u306a\u304e\u307e\u3059\u3002\n\n\u6c34\u5206\u30bb\u30f3\u30b5\u306e\u5024\u306f `analogRead(A0)` \u3068\u3059\u308b\u3068\u8aad\u307f\u51fa\u305b\u307e\u3059(A0\u306b\u3064\u306a\u3044\u3067\u308b\u5834\u5408)\u3002\u7c21\u5358\u3067\u3059\u306d\u301c\n\n```cpp:moisture_sample.ino\nvoid setup() {\n  Serial.begin(9600);\n}\n\nvoid loop() {\n  // 1\u79d2\u6bce\u306b\u5024\u3092\u8aad\u307f\u3060\u3057\u3066\u30b7\u30ea\u30a2\u30eb\u306b\u66f8\u304f\n  int sensorValue = analogRead(A0);\n  Serial.println(sensorValue);\n  ...\n  delay(1000);\n}\n```\n\n`Serial.println`\u3067\u66f8\u304d\u3060\u3057\u305f\u5024\u306f\u3001Arduino\u30a2\u30d7\u30ea\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u306e\u866b\u773c\u93e1\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n![arduino_console.png](https://qiita-image-store.s3.amazonaws.com/0/2758/d87cda7b-c7f5-2d49-1a95-aafdb0949979.png \"arduino_console.png\")\n\n\n# Arduino\u30b9\u30b1\u30c3\u30c1(\u30b3\u30fc\u30c9)\u306e\u6e96\u5099\n\n(\u7d30\u304b\u3044\u8aac\u660e\u306f\u3044\u3044\u304b\u3089\u3059\u3050\u558b\u3089\u305b\u305f\u3044\uff01\u3068\u3044\u3046\u65b9\u306f[\u3053\u3053]\n(http://qiita.com/kinu/items/6cd5da0415e31834e7da#%E5%85%A8%E9%83%A8%E3%81%A4%E3%81%AA%E3%81%92%E3%81%A6%E3%81%BF%E3%82%8B)\u307e\u3067\u98db\u3070\u3057\u3066OK)\n\n## Fast PWM\u30e2\u30fc\u30c9\u306e\u8a2d\u5b9a\n\n\u57fa\u672c\u7684\u306b\u306f Arduino Uno \u306e\u30b7\u30b9\u30c6\u30e0\u30af\u30ed\u30c3\u30af\u306f 16 MHz \u306a\u306e\u3067\u3059\u304c\u3001\u901a\u5e38\u6642\u306f Pin 9, 10 (Timer/Counter1), 3, 11 (Timer/Counter2) \u306f 490Hz\u3001Pin 5, 6 (Timer/Counter0) \u306f 1kHz \u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3067\u306f\u3069\u3046\u3084\u3063\u3066\u3082\u51fa\u529b\u3057\u305f\u3044\u97f3\u58f0\u6ce2\u5f62\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001PWM (Pulse-with modulation) \u306e\u6ce2\u5f62\u751f\u6210\u5468\u671f\u3092\u3042\u3052\u308b\u8a2d\u5b9a\u3092\u3059\u308b == Fast PWM \u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\n\u8a73\u7d30\u306f[[1]](http://arduino.cc/en/Tutorial/SecretsOfArduinoPWM)[[2]](http://playground.arduino.cc/Code/PCMAudio)[[3]](http://makezine.com/projects/make-35/advanced-arduino-sound-synthesis/)[[4]](http://ameblo.jp/aretaumitohirunosunahama/entry-11442063598.html)\u3084[ATmega328\u306e\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8](http://www.atmel.com/Images/doc8161.pdf)\u3092\u8aad\u3081\u3070\u308f\u304b\u308a\u307e\u3059\u304c\u3001\u3056\u3063\u304f\u308a\u306f\u3057\u3087\u3063\u3066\u66f8\u304f\u3068 setup \u95a2\u6570\u5185\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3068 Pin 3 \u304c Fast PWM \u30e2\u30fc\u30c9\u306b\u306a\u308a\u3001\u6700\u5927\u5468\u671f\u306e 16 MHz\u3067 8-bit \u30bf\u30a4\u30de\u304c\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\n```cpp:fastpwm_sample.ino\nvoid setup() {\n  // PIN#3/#11: Timer/Counter2\n  pinMode(3, OUTPUT);\n\n  // http://www.atmel.com/Images/doc8161.pdf\n  // Non-inverting fast PWM mode on Pin 3.\n  // COM2B1:0 ==  10: Non-inverting mode\n  // WGM22:0  == 011: Fast PWM mode, 256 cycle (16MHz / 256 == 62.5kHz)\n  // CS2:0    == 001: No prescaler (runs at maximum rate, 62.5kHz)\n  TCCR2A = _BV(COM2B1) | _BV(WGM21) | _BV(WGM20);\n  TCCR2B = _BV(CS20);\n}\n```\n\n\u3053\u306e\u72b6\u614b\u3067 `OCR2B` \u306b 0 \u304b\u3089 255 \u306e\u5024\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3053\u3068\u3067 PWM \u306e duty (\u30bf\u30a4\u30de\u304c1\u5468\u3059\u308b\u9593\u306b\u3069\u308c\u304f\u3089\u3044\u51fa\u529b\u77e9\u5f62\u3092 High \u306b\u3059\u308b\u304b) \u3092\u5909\u66f4\u3057\u3066\u51fa\u529b\u6ce2\u5f62\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nSayKana \u30b3\u30de\u30f3\u30c9\u3067\u306f 8kHz \u306e\u30ea\u30cb\u30a2 PCM \u304c\u4f5c\u3089\u308c\u308b\u306e\u3067\u3001`OCR2B` \u306e\u5024\u3092 8kHz \u3067\u66f4\u65b0\u3059\u308c\u3070\u97f3\u304c\u51fa\u307e\u3059\u30028kHz \u306f Arduino \u306e\u30bf\u30a4\u30de\u3092\u3082\u30461\u3064\u4f7f\u3063\u3066\u5272\u308a\u8fbc\u307f\u30cf\u30f3\u30c9\u30e9 (ISR) \u3068\u3057\u3066\u66f8\u3044\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c([\u30b5\u30f3\u30d7\u30eb](http://playground.arduino.cc/Code/PCMAudio))\u3001[\u3053\u3061\u3089\u306e\u4f8b](http://ameblo.jp/aretaumitohirunosunahama/entry-11442063598.html)\u306e\u3088\u3046\u306b\u5358\u306b\u30eb\u30fc\u30d7\u3067 1 sec / 8000 = 125 msec (`delayMicroseconds(125)`) \u3092\u306f\u3055\u3093\u3067\u51fa\u529b\u3059\u308b\u3060\u3051\u3067\u3082\u52d5\u304d\u307e\u3059\u3002\n\n## PCM\u97f3\u58f0\u30c7\u30fc\u30bf\u306e\u51fa\u529b\n\n\u4e0a\u3067\u6e96\u5099\u3057\u305f\u97f3\u58f0\u30c7\u30fc\u30bf\u3092 Arduino \u30b3\u30fc\u30c9\u304b\u3089\u8aad\u3080\u306b\u306f\u3001`aiff2arduino.go` \u3067\u4f5c\u6210\u3057\u305f\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3057\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u9818\u57df\u306b\u304a\u304b\u308c\u305f\u30e1\u30e2\u30ea\u3092\u8aad\u307f\u51fa\u3059\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570 `pgm_read_byte_near()` \u3092\u4f7f\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070 `thirsty.h` \u306e\u30c7\u30fc\u30bf\u3092\u30c7\u30a3\u30ec\u30a4\u3092\u5165\u308c\u306a\u304c\u3089 `OCR2B` \u306b\u30bb\u30c3\u30c8\u3059\u308b\u5834\u5408\u3001`thirsty.h` \u30d5\u30a1\u30a4\u30eb\u3092 Arduino \u306e\u30b3\u30fc\u30c9\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\uff1a\n\n```thirsty.h\nprog_uchar thirsty[] PROGMEM = {\n  128, 128, 128, 127, ...\n};\n```\n\n```cpp:pcm_sample.ino\n#include \"thirsty.h\"\n#define ARRAYSIZE(x)  (sizeof(x) / sizeof((x)[0]))\n\nvoid play() {\n  for (int i = 0; i < ARRAYSIZE(thirsty); i++) {\n    OCR2B = pgm_read_byte_near(&thirsty[i]);\n    delayMicroseconds(125);\n  }\n} \n```\n\n\u3053\u308c\u3067 Arduino \u304c\u3057\u3083\u3079\u308a\u307e\u3057\u305f\uff01\n\n## \u5168\u90e8\u3064\u306a\u3052\u3066\u307f\u308b\n\n\u3053\u308c\u3067\u307b\u307c\u6e96\u5099\u304c\u3059\u3093\u3060\u306e\u3067\u3001\u305c\u3093\u3076\u3092\u3064\u306a\u3052\u3066\u307f\u307e\u3059\u3002Grove \u6c34\u5206\u30bb\u30f3\u30b5\u3067\u306f\u6c34\u5206\u91cf\u306b\u5fdc\u3058\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5024\u304c\u5909\u308f\u308b\u306e\u3067\u3001200\u301c250 \u304f\u3089\u3044\u3092\u95be\u5024\u306b\u3057\u3066\u4e7e\u71e5\u3057\u3066\u308b\u304b\u3069\u3046\u304b\u3092\u5224\u65ad\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n| \u72b6\u614b  | \u5024  |\n|:------|-----|\n| \u4e7e\u3044\u305f\u571f\u306e\u4e2d | 0\u301c300 |\n| \u6f64\u3063\u305f\u571f\u306e\u4e2d | 300\u301c700 |\n| \u6c34\u4e2d | 700\u301c950 |\n\n\u4e7e\u71e5\u3057\u3066\u3044\u305f\u308910\u5206\u304a\u304d\u306b\u300c\u306e\u3069\u304b\u308f\u3044\u305f\u300d\u3001\u6025\u306b\u6c34\u5206\u91cf\u304c\u3042\u304c\u3063\u305f\u3089\u4e7e\u71e5\u5ea6\u306b\u5fdc\u3058\u3066\u300c\u3042\u308a\u304c\u3068\u3046\u300d\u3042\u308b\u3044\u306f\u300c\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u300d\u3068\u3057\u3083\u3079\u3089\u305b\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\uff08\u672c\u5f53\u306f\u4eba\u611f\u30bb\u30f3\u30b5\u3082\u3064\u3051\u3066\u3001\u4e7e\u71e5\u3057\u3066\u308b\u3068\u304d\u306f\u4eba\u304c\u524d\u306b\u6765\u305f\u3089\u3057\u3083\u3079\u308b\u65b9\u304c\u305d\u308c\u3063\u307d\u3044\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\u624b\u5143\u306b\u306a\u3044\u306e\u3067\u4eca\u56de\u306f\u30ca\u30b7\u3067\u2026\uff09\n\n\u3060\u3044\u305f\u3044\u4ee5\u4e0b\u306e\u69d8\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3057\u305f\uff1a\n\n```cpp:talkative_plant.ino\n#include <avr/interrupt.h>\n#include <avr/pgmspace.h>\n\n#include \"thirsty.h\"\n#include \"thankyou.h\"\n#include \"wasdying.h\"\n#define ARRAYSIZE(x)  (sizeof(x) / sizeof((x)[0]))\n\n// \u30bb\u30f3\u30b5\u306fA0\u306b\u3001\u30b9\u30d4\u30fc\u30ab\u30fc\u306f\u30d4\u30f33\u306b\u63a5\u7d9a\u3059\u308b\nconst int sensorPin = A0;\nconst int speakerPin = 3;\n\nvoid setup() {\n  Serial.begin(9600);\n\n  // PIN#3/#11: Timer/Counter2\n  pinMode(speakerPin, OUTPUT);\n\n  // http://www.atmel.com/Images/doc8161.pdf\n  // Non-inverting fast PWM mode, with no prescaling on pin 3.\n  // COM2B1:0 ==  10: Non-inverting mode\n  // WGM22:0  == 011: Fast PWM mode, 256 cycle (16MHz / 256 == 62.5kHz)\n  // CS2:0    == 001: No prescaler (runs at maximum rate, 62.5kHz)\n  TCCR2A = _BV(COM2B1) | _BV(WGM21) | _BV(WGM20);\n  TCCR2B = _BV(CS20);\n  OCR2B = 0;\n}\n\nvolatile unsigned long lastPlay = 0;\nvolatile int lastSensorValue = 0;\n\nvoid playSound(prog_uchar* audio, int audio_length, bool force) {\n  // Don't spam too much.\n  if (!force && millis() < lastPlay + 600000) {\n    return;\n  }\n  lastPlay = millis();\n  for (int i = 0; i < audio_length; i++) {\n    OCR2B = pgm_read_byte_near(&audio[i]);\n    delayMicroseconds(125);\n  }\n}\n\nvoid loop() {\n  int sensorValue = analogRead(sensorPin);\n  int diff = sensorValue - lastSensorValue;\n  delay(1000);\n  Serial.println(sensorValue);\n\n  // http://seeedstudio.com/wiki/Grove_-_Moisture_Sensor\n  // dry: 0-300\n  // humid: 300-700\n  if (sensorValue < 200) {\n    playSound(thirsty, ARRAYSIZE(thirsty), abs(diff) > 100);\n  } else if (lastSensorValue < 50) {\n    playSound(wasdying, ARRAYSIZE(wasdying), true);\n  } else if (diff > 100) {\n    playSound(thankyou, ARRAYSIZE(thankyou), true);\n  }\n\n  lastSensorValue = sensorValue;\n}\n```\n\n\u3042\u3068\u306f\u3053\u306e\u30b9\u30b1\u30c3\u30c1\u3092\u30dc\u30fc\u30c9\u306b\u66f8\u304d\u8fbc\u3093\u3067\u3001\n\n1. Grove\u30bb\u30f3\u30b5\u3092 A0 (\u3068GND\u30685V) \u306b\n1. \u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u30d4\u30f3 3 (\u3068GND) \u306b\n1. \u30bb\u30f3\u30b5\u3092\u690d\u6728\u9262\u306b\u523a\u3057\u3066\u8a2d\u7f6e\u3059\u308c\u3070**\u5b8c\u6210**\uff01\n\n\u51ac\u306e\u4e7e\u71e5\u3082\u304a\u3046\u3061\u30cf\u30c3\u30af\u3067\u4e57\u308a\u5207\u308d\u3046\uff01\n\n\u306a\u304a\u3001\u5168\u30b3\u30fc\u30c9\u306f https://github.com/kinu/ArduinoTalkativePlant/\n\u3053\u3061\u3089\u306b\u304a\u3044\u3066\u307e\u3059\u3002\n\n# \u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30da\u30fc\u30b8\n\n* [Arduino\u516c\u5f0f: Getting Started](http://arduino.cc/en/Guide/MacOSX)\n* [Qiita: [WIP] Arduino\u3067\u97f3\u3092\u51fa\u3057\u305f\u3044\uff08\u30e1\u30e2\uff09](http://qiita.com/tadfmac/items/7fb26596fe6240959c48)\n* [\u30a4\u30e4\u30db\u30f3\u7dda\u306e\u5207\u65ad\uff06\u63a5\u7d9a\u65b9\u6cd5 (Yahoo!\u77e5\u6075\u888b)](http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1326995948)\n* [Audio Interchange File Format: \"AIFF\" (PDF)](http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/AIFF/Docs/AIFF-1.3.pdf)\n* [ATmega328 \u306e\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8 (PDF)](http://www.atmel.com/Images/doc8161.pdf)\n* [\u3010\u51ac\u4f11\u307f\u306e\u5de5\u4f5c\u3011Arduino\u3092\u3057\u3083\u3079\u3089\u305b\u3066\u307f\u305f | \u3042\u308c\u305f\u3046\u307f\u3068 \u3072\u308b\u306e\u3059\u306a\u306f\u307e](http://ameblo.jp/aretaumitohirunosunahama/entry-11442063598.html)\n* [Makezine: Advanced Arduino Sound Synthesis](http://makezine.com/projects/make-35/advanced-arduino-sound-synthesis/)\n* [Arduino Playground - PCM Audio](http://playground.arduino.cc/Code/PCMAudio)\n* [Grove - Moisture Sensor - Wiki](http://www.seeedstudio.com/wiki/Grove_-_Moisture_Sensor)\n", "tags": ["\u304a\u3046\u3061\u30cf\u30c3\u30af", "Arduino"]}