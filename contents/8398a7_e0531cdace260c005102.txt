{"context": " More than 1 year has passed since last update.\n\n1. \u306f\u3058\u3081\u306b\nRails\u3067\u30c7\u30d7\u30ed\u30a4\u3068\u3044\u3048\u3070capistrano\u3092\u4f7f\u3063\u3066\u3044\u308b\u4eba\u304c\u591a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u304c\uff0c\n\u60a9\u307e\u3055\u308c\u308b\u306e\u304c\u30c7\u30d7\u30ed\u30a4\u6642\u9593(\u4e3b\u306bassets:precompile)\uff0e\n\u81ea\u8eab\u306e\u3055\u304f\u3089VPS\u3067\u306f\u30c7\u30d7\u30ed\u30a4\u306b7\u5206\u307b\u3069\u304b\u304b\u308a\uff0c\u305d\u306e\u51856\u5206\u304cassets:precompile\u3067\u3057\u305f\uff0e\n\u73fe\u72b6\u306eRails4.2.3 && capistrano 3.4.0\u3067\uff0c\n\u3069\u3046\u3044\u3046\u8a2d\u5b9a\u3092\u3057\u305f\u3089\u7121\u99c4\u306aprecompile\u3068migration\u3092\u30b9\u30ad\u30c3\u30d7\u3067\u304d\u308b\u304b\u3092\u307e\u3068\u3081\u307e\u3059\uff0e\n\n2. DB\u306emigration skip\n\u307e\u305a\u306fdb\u306emigration skip\u3067\u3059\uff0e\n\u3053\u3061\u3089\u306f\u516c\u5f0f\u306b\u3082\u65b9\u6cd5\u304c\u8a18\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\nconfig/deploy.rb\n# Defaults to false. If true, it's skip migration if files in db/migrate not modified\nset :conditionally_migrate, true\n\n\n\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u8db3\u3059\u3068\uff0cdb/migrate\u306b\u5dee\u5206\u304c\u306a\u3051\u308c\u3070migration\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u307e\u3059\uff0e\n\n3. assets:precompile skip\n\u6b21\u306b\u672c\u984c\u306eassets:precompile\u306e\u30b9\u30ad\u30c3\u30d7\u3067\u3059\uff0e\ncapistrano-faster-assets\u3068\u3044\u3046gem\u3092\u5229\u7528\u3057\u307e\u3059\uff0e\n\u3053\u308c\u306f\uff0c\n\napp/assets\nlib/assets\nvendor/assets\nGemfile.lock\n\n\u306e4\u7a2e\u985e\u306b\u5bfe\u3057\u3066diff\u3092\u53d6\u308a\uff0c\u5909\u66f4\u304c\u306a\u3051\u308c\u3070assets:precompile\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u304f\u308c\u307e\u3059\uff0e\nGemfile\u306bgem 'capistrano-faster-assets'\u3092\u8ffd\u52a0\u3057\uff0c\nCapfile\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\nrequire 'capistrano/bundler'\nrequire 'capistrano/rails/assets'\nrequire 'capistrano/faster_assets' # \u5fc5\u305arails/assets\u306e\u4e0b\u306b\u8a18\u8ff0\nrequire 'capistrano/rails/migrations'\n\n1\u5ea6\u76ee\u306e\u30c7\u30d7\u30ed\u30a4\u3067\uff0c\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4f5c\u6210\u3057\uff0c\n2\u56de\u76ee\u4ee5\u964d\u306f\u5dee\u5206\u304c\u306a\u3051\u308c\u3070assets:precompile\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u304f\u308c\u307e\u3059\uff0e\n\u307e\u305f\uff0c\u8b66\u544a\u306b\u3082\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\uff0c\ntext = <%= helper.get_text %>\n\n\u3053\u306e\u3088\u3046\u306aerb\u5f62\u5f0f\u306e\u8a18\u8ff0\u3092\u3057\u3066\u3044\u305f\u5834\u5408\uff0chelper\u306e\u5185\u5bb9\u306b\u5909\u66f4\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3082\uff0c\nassets:precompile\u3092\u3055\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u305f\u3081\uff0c\u5fc3\u306b\u7559\u3081\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3055\u305d\u3046\u3067\u3059\uff0e\n\n4. \u305d\u306e\u4ed6\u304a\u52e7\u3081\u30aa\u30d7\u30b7\u30e7\u30f3\n\nremote_cache\nset :deploy_via, :remote_cache\n\n\u8a73\u7d30\u306f\u3053\u3061\u3089\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n# 1. \u306f\u3058\u3081\u306b\n\nRails\u3067\u30c7\u30d7\u30ed\u30a4\u3068\u3044\u3048\u3070capistrano\u3092\u4f7f\u3063\u3066\u3044\u308b\u4eba\u304c\u591a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u304c\uff0c\n\u60a9\u307e\u3055\u308c\u308b\u306e\u304c\u30c7\u30d7\u30ed\u30a4\u6642\u9593(\u4e3b\u306bassets:precompile)\uff0e\n\u81ea\u8eab\u306e\u3055\u304f\u3089VPS\u3067\u306f\u30c7\u30d7\u30ed\u30a4\u306b7\u5206\u307b\u3069\u304b\u304b\u308a\uff0c\u305d\u306e\u51856\u5206\u304cassets:precompile\u3067\u3057\u305f\uff0e\n\n\u73fe\u72b6\u306eRails4.2.3 && capistrano 3.4.0\u3067\uff0c\n\u3069\u3046\u3044\u3046\u8a2d\u5b9a\u3092\u3057\u305f\u3089\u7121\u99c4\u306aprecompile\u3068migration\u3092\u30b9\u30ad\u30c3\u30d7\u3067\u304d\u308b\u304b\u3092\u307e\u3068\u3081\u307e\u3059\uff0e\n\n# 2. DB\u306emigration skip\n\n\u307e\u305a\u306fdb\u306emigration skip\u3067\u3059\uff0e\n\u3053\u3061\u3089\u306f\u516c\u5f0f\u306b\u3082\u65b9\u6cd5\u304c\u8a18\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\n```config/deploy.rb\n# Defaults to false. If true, it's skip migration if files in db/migrate not modified\nset :conditionally_migrate, true\n```\n\n\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u8db3\u3059\u3068\uff0cdb/migrate\u306b\u5dee\u5206\u304c\u306a\u3051\u308c\u3070migration\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u307e\u3059\uff0e\n\n\n# 3. assets:precompile skip\n\n\u6b21\u306b\u672c\u984c\u306eassets:precompile\u306e\u30b9\u30ad\u30c3\u30d7\u3067\u3059\uff0e\n[capistrano-faster-assets](https://github.com/capistrano-plugins/capistrano-faster-assets)\u3068\u3044\u3046gem\u3092\u5229\u7528\u3057\u307e\u3059\uff0e\n\n\u3053\u308c\u306f\uff0c\n\n- app/assets\n- lib/assets\n- vendor/assets\n- Gemfile.lock\n\n\u306e4\u7a2e\u985e\u306b\u5bfe\u3057\u3066diff\u3092\u53d6\u308a\uff0c\u5909\u66f4\u304c\u306a\u3051\u308c\u3070assets:precompile\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u304f\u308c\u307e\u3059\uff0e\n\nGemfile\u306b```gem 'capistrano-faster-assets'```\u3092\u8ffd\u52a0\u3057\uff0c\nCapfile\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\n\n```rb\nrequire 'capistrano/bundler'\nrequire 'capistrano/rails/assets'\nrequire 'capistrano/faster_assets' # \u5fc5\u305arails/assets\u306e\u4e0b\u306b\u8a18\u8ff0\nrequire 'capistrano/rails/migrations'\n```\n\n1\u5ea6\u76ee\u306e\u30c7\u30d7\u30ed\u30a4\u3067\uff0c\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4f5c\u6210\u3057\uff0c\n2\u56de\u76ee\u4ee5\u964d\u306f\u5dee\u5206\u304c\u306a\u3051\u308c\u3070assets:precompile\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u304f\u308c\u307e\u3059\uff0e\n\n\u307e\u305f\uff0c\u8b66\u544a\u306b\u3082\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\uff0c\n\n```coffeescript\ntext = <%= helper.get_text %>\n```\n\n\u3053\u306e\u3088\u3046\u306aerb\u5f62\u5f0f\u306e\u8a18\u8ff0\u3092\u3057\u3066\u3044\u305f\u5834\u5408\uff0chelper\u306e\u5185\u5bb9\u306b\u5909\u66f4\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3082\uff0c\nassets:precompile\u3092\u3055\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u305f\u3081\uff0c\u5fc3\u306b\u7559\u3081\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3055\u305d\u3046\u3067\u3059\uff0e\n\n# 4. \u305d\u306e\u4ed6\u304a\u52e7\u3081\u30aa\u30d7\u30b7\u30e7\u30f3\n\n## remote_cache\n\n```rb\nset :deploy_via, :remote_cache\n```\n\n\u8a73\u7d30\u306f[\u3053\u3061\u3089](http://torokeru.tv/mameblog/?p=195)\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n", "tags": ["Rails", "capistrano", "capistrano3", "Rails4"]}