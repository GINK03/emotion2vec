{"context": "\n\u3050\u308b\u3050\u308b\u52d5\u304f\u3088\n\n\u6982\u8981\n\n\nMPU-9250\u3068\u3044\u3046\u30bb\u30f3\u30b5\u30fc\u3092 \u30e9\u30ba\u30d1\u30a4\u306bI2C\u3067\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3002\n\u53c2\u8003: How to Setup the MPU-9250 on a Raspberry Pi \n\n\nRTIMULib2\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u3001\u305d\u306e\u30c7\u30e2\u3092\u898b\u308b\u3002\u3061\u306a\u307f\u306b\u3001Please note that this project is no longer active.\u3060\u305d\u3046\u3067\u3001\u958b\u767a\u7d42\u4e86\u3001\u3067\u3057\u3087\u3046\u304b\u306d\u3002\nIMU = Inertial Measurement Unit (\u6163\u6027\u8a08\u6e2c\u88c5\u7f6e) ??\n \u30a4\u30ca\u30fc\u30b7\u30e3\u30eb\u30ad\u30e3\u30f3\u30bb\u30e9\u30fc\u3001\u5168\u958b\u3002??\n\n\n\n\u74b0\u5883\n\nRaspberry Pi 2 Model B\n2016-05-27-raspbian-jessie.img\nInvensense MPU-9250 (ebay.com\u3068\u304b\u3067\u30db\u30f3\u30b3\u30f3\u304b\u3089\u30015\uff5e6\u30c9\u30eb\u304f\u3089\u3044? \u5fd8\u308c\u305f\u3053\u308d\u306b\u5c4a\u3044\u305f)\n\n\n\u624b\u9806\n\nMPU-9250\u3092\u63a5\u7d9a\u3002I2C\u306f\u3001\u7dda4\u672c\nVCC(3.3V)\u3001GND\u3001SCL\u3001SDA\u3002(\u3082\u306e\u306b\u3088\u3063\u3066\u306f\u3001CS\u30923.3V\u3078\u3002)\n\n\u30c7\u30e2\u3067\u3001X\u3092\u4f7f\u3046\u3088\u3046\u306a\u306e\u3067\u3001\u901a\u5e38\u306eraspbian-jessie\u3092\u4f7f\u7528\u3002\n\n\u3044\u3064\u3082\u306e\nsudo apt-get update\nsudo apt-get upgrade\nsudo apt-get install -y byobu htop samba ## \u304a\u597d\u307f\u3067\n\n\n\n\n\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\n\n\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\nsudo apt-get install -y i2c-tools cmake git octave python-dev libqt4-dev\n\n\n\nsudo raspi-configI2C\u3092\u4f7f\u3046\u8a2d\u5b9a\u306b\u3002\n9 Advanced Options > A6  I2C > Yes\n\nsudo vi /boot/config.txt\n\n/boot/config.txt_\u8ffd\u52a0\u3059\u308b\n...\ndtparam=i2c1_baudrate=400000\n\n\n\n\nsudo vi /etc/udev/rules.d/90-i2c.rules\n\n/etc/udev/rules.d/90-i2c.rules\nKERNEL==\"i2c-[0-7]\",MODE=\"0666\"\n\n\n\nsudo reboot\u518d\u8d77\u52d5\n\ni2cdetect -y 1\u30c7\u30d0\u30a4\u30b9\u3092\u8a8d\u8b58\u3057\u3066\u3044\u308b\u304b\uff1f\n\n0x68\u304c\u51fa\u305f\uff1f\npi@raspberrypi:~ $ i2cdetect -y 1\n 0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f\n00:          -- -- -- -- -- -- -- -- -- -- -- -- -- \n10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n60: -- -- -- -- -- -- -- -- 68 -- -- -- -- -- -- -- \n70: -- -- -- -- -- -- -- --                         \npi@raspberrypi:~ $ \n\n\n\n\nRTIMULib2\u306e\u30d3\u30eb\u30c9\ncd\ngit clone https://github.com/richards-tech/RTIMULib2.git\nmkdir RTIMULib2/Linux/build\ncd RTIMULib2/Linux/build\ncmake ..\nmake -j4\n\n\n\nRTIMULibDemoGL \u30c7\u30e2\u306e\u5b9f\u884c\ncd ~/RTIMULib2/Linux/build/RTIMULibDemoGL\n./RTIMULibDemoGL\n\n\n\n\n\n\nPython \u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\n\n\n\u30d3\u30eb\u30c9\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncd \ncd ~/RTIMULib2/Linux/python\npython setup.py build\nsudo python setup.py install\n\n\n\n\u30b5\u30f3\u30d7\u30eb\n\nFusion.py\u3092\u5b9f\u884c\ncd\ncd ~/RTIMULib2/Linux/python/tests \npython Fusion.py\n\n\n\nFusion.py\u306e\u30e1\u30a4\u30f3\u30eb\u30fc\u30d7\u306e\u90e8\u5206\u3002\n...\nwhile True:\nif imu.IMURead():\n# x, y, z = imu.getFusionData()\n# print(\"%f %f %f\" % (x,y,z))\ndata = imu.getIMUData()\nfusionPose = data[\"fusionPose\"]\nprint(\"r: %f p: %f y: %f\" % (math.degrees(fusionPose[0]), \n    math.degrees(fusionPose[1]), math.degrees(fusionPose[2])))\ntime.sleep(poll_interval*1.0/1000.0)\n\n\n\n\n\u8868\u793a\u4f8b\npi@raspberrypi:~/RTIMULib2/Linux/python/tests $ python Fusion.py\nUsing settings file RTIMULib.ini\nSettings file does not exist, will be created\nIMU Name: MPU-9250\nIMU Init Succeeded\nRecommended Poll Interval: 4mS\n\u3000\u3000\u3000\u3000\nr: -13.623389 p: 18.087236 y: -157.539734\nr: -15.078542 p: 13.615657 y: -155.698479\nr: -17.162211 p: 9.444151 y: -154.067935\nr: -20.069331 p: 5.452485 y: -152.632844\nr: -24.085829 p: 1.261949 y: -151.502680\nr: -29.675574 p: -2.659780 y: -151.203285\nr: -36.056415 p: -6.144597 y: -150.940009\nr: -42.588142 p: -8.521807 y: -150.505049\nr: -47.347961 p: -11.855518 y: -143.940581\nr: -53.580303 p: -13.259552 y: -143.910050\nr: -59.725537 p: -14.393150 y: -143.855190\nr: -65.340165 p: -14.693897 y: -144.329574\nr: -70.261821 p: -14.738734 y: -145.301906\nr: -74.317014 p: -14.802757 y: -146.801051\nr: -77.447959 p: -14.661696 y: -148.575780\nr: -78.309102 p: -14.618659 y: -144.192779\nr: -79.242762 p: -13.868489 y: -139.769317\nr: -79.927195 p: -12.702007 y: -135.382600\nr: -80.395718 p: -11.533799 y: -131.017385\nr: -80.965821 p: -10.382536 y: -126.841995\nr: -83.190119 p: -9.506169 y: -121.918590\n^CTraceback (most recent call last):\nFile \"Fusion.py\", line 44, in <module>\ntime.sleep(poll_interval*1.0/1000.0)\nKeyboardInterrupt\npi@raspberrypi:~/RTIMULib2/Linux/python/tests $ \n\n\n\n\n\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\n\n\noctave\u306f\u3001\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u305f\u3081\u306b\u3001\u4f7f\u7528\u3055\u308c\u308b\u6a21\u69d8\u3002\n\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001RTIMULib.ini\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u3044\u3064\u3092\u3044\u3063\u305f\u3093\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u3001\u5143\u306e\u3068\u3053\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3001\u3001\u3093\u3060\u3068\u304a\u3082\u3046\u3002\n\ncd\ncd RTIMULib2/Linux/RTIMULibCal/ \nmake -j4\nsudo make install\n# sudo make uninstall \u3082\u3042\u308b\u30e8\u3002\n#\ncp -r /home/pi/RTIMULib2/RTEllipsoidFit/ /home/pi/\ncd /home/pi/RTEllipsoidFit/\n#\u8a2d\u5b9a\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304d\u3066\u3001\u3042\u3068\u3067\u3001\u3082\u3069\u3059\uff1f\n# cp ~/RTIMULib2/Linux/build/RTIMULibDemoGL/RTIMULib.ini .\n#\nRTIMULibCal\n\n\n\nm\u3092\u62bc\u3057\u3066\u3001\u306a\u306b\u304b\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u56de\u3057\u3066\u3001\u6570\u5b57\u304c\u5909\u308f\u3089\u306a\u304f\u306a\u3063\u305f\u3089\u3001s\u3067\u30bb\u30fc\u30d6\u3002(r\u3067\u30ea\u30bb\u30c3\u30c8\u3001x\u3067\u4e2d\u6b62\u3002)\n\ns\u3092\u62bc\u3057\u3066\u3001\u306a\u306b\u304b\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001\u81ea\u52d5\u3067\u3068\u307e\u308b\u307e\u3067 \u3001\u3050\u308b\u3050\u308b\u56de\u3059\u3002(x\u3067\u4e2d\u6b62\u3002)\n\na\u3092\u304a\u3057\u3066\u3001\n\n\nx\u8ef8\u3001e\u3092\u304a\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u3002''(\u30b9\u30da\u30fc\u30b9)\u3067\u6b21\u306e\u8ef8\ny\u8ef8\u3001e\u3092\u304a\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u3002''(\u30b9\u30da\u30fc\u30b9)\u3067\u6b21\u306e\u8ef8\nz\u8ef8\u3001e\u3092\u304a\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u3002''(\u30b9\u30da\u30fc\u30b9)\u3067\u6b21\u306e\u8ef8\n\u3046\u307e\u3044\u3068\u3053\u3067\u3001s\u3067\u30bb\u30fc\u30d6\u3002(r\u3067\u30ea\u30bb\u30c3\u30c8\u3001x\u3067\u4e2d\u6b62\u3002)\n\n\n\nx\u3092\u304a\u3057\u3066\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u7d42\u4e86=> RTIMULib.ini\u304c\u66f4\u65b0\u3055\u308c\u3066\u308b\u306f\u305a\u3002\n\n\n\u305d\u306e\u4ed6\n\n\n\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u307f\u308c\u3070\u4f7f\u3044\u65b9\u308f\u304b\u308b\u306d\u3002\npi@raspberrypi:~ $ ~/RTIMULib2/Linux/build/RTIMULibDrive/RTIMULibDrive \nSettings file not found. Using defaults and creating settings file\nDetected MPU9250 at standard address\nUsing fusion algorithm RTQF\nmin/max compass calibration not in use\nEllipsoid compass calibration not in use\nAccel calibration not in use\nMPU-9250 init complete\nSample rate 84: : roll:59.973343, pitch:83.228676, yaw:-122.156759\n\n\ncat ~/RTIMULib2/Linux/RTIMULibDrive/RTIMULibDrive.cpp\n\n\n\n\nRTIMULibDrive.cpp\n////////////////////////////////////////////////////////////////////////////\n//\n//  This file is part of RTIMULib\n//\n//  Copyright (c) 2014-2015, richards-tech, LLC\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of\n//  this software and associated documentation files (the \"Software\"), to deal in\n//  the Software without restriction, including without limitation the rights to use,\n//  copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n//  Software, and to permit persons to whom the Software is furnished to do so,\n//  subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all\n//  copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n//  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n//  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n//  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n//  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n//  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n#include \"RTIMULib.h\"\n\nint main()\n{\n    int sampleCount = 0;\n    int sampleRate = 0;\n    uint64_t rateTimer;\n    uint64_t displayTimer;\n    uint64_t now;\n\n    //  Using RTIMULib here allows it to use the .ini file generated by RTIMULibDemo.\n    //  Or, you can create the .ini in some other directory by using:\n    //      RTIMUSettings *settings = new RTIMUSettings(\"<directory path>\", \"RTIMULib\");\n    //  where <directory path> is the path to where the .ini file is to be loaded/saved\n\n    RTIMUSettings *settings = new RTIMUSettings(\"RTIMULib\");\n\n    RTIMU *imu = RTIMU::createIMU(settings);\n\n    if ((imu == NULL) || (imu->IMUType() == RTIMU_TYPE_NULL)) {\n        printf(\"No IMU found\\n\");\n        exit(1);\n    }\n\n    //  This is an opportunity to manually override any settings before the call IMUInit\n\n    //  set up IMU\n\n    imu->IMUInit();\n\n    //  this is a convenient place to change fusion parameters\n\n    imu->setSlerpPower(0.02);\n    imu->setGyroEnable(true);\n    imu->setAccelEnable(true);\n    imu->setCompassEnable(true);\n\n    //  set up for rate timer\n\n    rateTimer = displayTimer = RTMath::currentUSecsSinceEpoch();\n\n    //  now just process data\n\n    while (1) {\n        //  poll at the rate recommended by the IMU\n\n        usleep(imu->IMUGetPollInterval() * 1000);\n\n        while (imu->IMURead()) {\n            RTIMU_DATA imuData = imu->getIMUData();\n            sampleCount++;\n\n            now = RTMath::currentUSecsSinceEpoch();\n\n            //  display 10 times per second\n\n            if ((now - displayTimer) > 100000) {\n                printf(\"Sample rate %d: %s\\r\", sampleRate, RTMath::displayDegrees(\"\", imuData.fusionPose));\n                fflush(stdout);\n                displayTimer = now;\n            }\n\n            //  update rate every second\n\n            if ((now - rateTimer) > 1000000) {\n                sampleRate = sampleCount;\n                sampleCount = 0;\n                rateTimer = now;\n            }\n        }\n    }\n}\n\n\n\n\n![RTIMULib-01.png](https://qiita-image-store.s3.amazonaws.com/0/75594/a296863b-fc9e-88d3-c4b5-e1e8b1083c77.png)\n\u3050\u308b\u3050\u308b\u52d5\u304f\u3088\n\n## \u6982\u8981\n- `MPU-9250`\u3068\u3044\u3046\u30bb\u30f3\u30b5\u30fc\u3092 \u30e9\u30ba\u30d1\u30a4\u306bI2C\u3067\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3002\n- \u53c2\u8003: [How to Setup the MPU-9250 on a Raspberry Pi ](https://kingtidesailing.blogspot.com/2016/02/how-to-setup-mpu-9250-on-raspberry-pi_25.html)\n- [`RTIMULib2`](https://github.com/RTIMULib/RTIMULib2)\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u3001\u305d\u306e\u30c7\u30e2\u3092\u898b\u308b\u3002<br>\u3061\u306a\u307f\u306b\u3001`Please note that this project is no longer active.`\u3060\u305d\u3046\u3067\u3001\u958b\u767a\u7d42\u4e86\u3001\u3067\u3057\u3087\u3046\u304b\u306d\u3002\n- IMU = Inertial Measurement Unit [(\u6163\u6027\u8a08\u6e2c\u88c5\u7f6e)](https://ja.wikipedia.org/wiki/%E6%85%A3%E6%80%A7%E8%A8%88%E6%B8%AC%E8%A3%85%E7%BD%AE) ??\n <br> <font color=#FFFFFF>\u30a4\u30ca\u30fc\u30b7\u30e3\u30eb\u30ad\u30e3\u30f3\u30bb\u30e9\u30fc\u3001\u5168\u958b\u3002??</font>\n\n\n## \u74b0\u5883\n- Raspberry Pi 2 Model B\n- `2016-05-27-raspbian-jessie.img`\n- Invensense MPU-9250 (ebay.com\u3068\u304b\u3067\u30db\u30f3\u30b3\u30f3\u304b\u3089\u30015\uff5e6\u30c9\u30eb\u304f\u3089\u3044? \u5fd8\u308c\u305f\u3053\u308d\u306b\u5c4a\u3044\u305f)\n\n\n## \u624b\u9806\n1. MPU-9250\u3092\u63a5\u7d9a\u3002I2C\u306f\u3001\u7dda4\u672c\n `VCC(3.3V)`\u3001`GND`\u3001`SCL`\u3001`SDA`\u3002(\u3082\u306e\u306b\u3088\u3063\u3066\u306f\u3001CS\u30923.3V\u3078\u3002)\n\n2. \u30c7\u30e2\u3067\u3001X\u3092\u4f7f\u3046\u3088\u3046\u306a\u306e\u3067\u3001\u901a\u5e38\u306eraspbian-jessie\u3092\u4f7f\u7528\u3002\n\n    ```bash:\u3044\u3064\u3082\u306e\nsudo apt-get update\nsudo apt-get upgrade\nsudo apt-get install -y byobu htop samba ## \u304a\u597d\u307f\u3067\n```\n3. \u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\n\n    ```bash:\u8ffd\u52a0\u30d1\u30c3\u30b1\u30fc\u30b8\nsudo apt-get install -y i2c-tools cmake git octave python-dev libqt4-dev\n```\n4. `sudo raspi-config`<br>I2C\u3092\u4f7f\u3046\u8a2d\u5b9a\u306b\u3002\n`9 Advanced Options > A6  I2C > Yes`\n\n5. `sudo vi /boot/config.txt`\n\n    ```txt:/boot/config.txt_\u8ffd\u52a0\u3059\u308b\n...\ndtparam=i2c1_baudrate=400000\n```\n\n\n5. `sudo vi /etc/udev/rules.d/90-i2c.rules`\n\n    ```txt:/etc/udev/rules.d/90-i2c.rules\nKERNEL==\"i2c-[0-7]\",MODE=\"0666\"\n```\n\n5. `sudo reboot`<br>\u518d\u8d77\u52d5\n6. `i2cdetect -y 1`<br>\u30c7\u30d0\u30a4\u30b9\u3092\u8a8d\u8b58\u3057\u3066\u3044\u308b\u304b\uff1f\n\n    ```shell-session:0x68\u304c\u51fa\u305f\uff1f\npi@raspberrypi:~ $ i2cdetect -y 1\n     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f\n00:          -- -- -- -- -- -- -- -- -- -- -- -- -- \n10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n60: -- -- -- -- -- -- -- -- 68 -- -- -- -- -- -- -- \n70: -- -- -- -- -- -- -- --                         \npi@raspberrypi:~ $ \n```\n7. RTIMULib2\u306e\u30d3\u30eb\u30c9\n\n    ```\ncd\ngit clone https://github.com/richards-tech/RTIMULib2.git\nmkdir RTIMULib2/Linux/build\ncd RTIMULib2/Linux/build\ncmake ..\nmake -j4\n```\n\n8. RTIMULibDemoGL \u30c7\u30e2\u306e\u5b9f\u884c\n\n    ```bash\ncd ~/RTIMULib2/Linux/build/RTIMULibDemoGL\n./RTIMULibDemoGL\n```\n\n    ![RTIMULib-02.png](https://qiita-image-store.s3.amazonaws.com/0/75594/72415bcc-f929-1a91-5221-0a91d57d1744.png)<br>\n    ![RTIMULib-03.png](https://qiita-image-store.s3.amazonaws.com/0/75594/308ef105-a3d6-ecad-9c04-6c2562b3c4aa.png)\n\n\n### Python \u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\n1. \u30d3\u30eb\u30c9\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n    ```shell-session\ncd \ncd ~/RTIMULib2/Linux/python\npython setup.py build\nsudo python setup.py install\n```\n\n2. \u30b5\u30f3\u30d7\u30eb\n\n    ```bash:Fusion.py\u3092\u5b9f\u884c\ncd\ncd ~/RTIMULib2/Linux/python/tests \npython Fusion.py\n```\n\n    ```py:Fusion.py\u306e\u30e1\u30a4\u30f3\u30eb\u30fc\u30d7\u306e\u90e8\u5206\u3002\n...\nwhile True:\n  if imu.IMURead():\n    # x, y, z = imu.getFusionData()\n    # print(\"%f %f %f\" % (x,y,z))\n    data = imu.getIMUData()\n    fusionPose = data[\"fusionPose\"]\n    print(\"r: %f p: %f y: %f\" % (math.degrees(fusionPose[0]), \n        math.degrees(fusionPose[1]), math.degrees(fusionPose[2])))\n    time.sleep(poll_interval*1.0/1000.0)\n```\n\n3. \u8868\u793a\u4f8b\n\n    ```shell-session\npi@raspberrypi:~/RTIMULib2/Linux/python/tests $ python Fusion.py\nUsing settings file RTIMULib.ini\nSettings file does not exist, will be created\nIMU Name: MPU-9250\nIMU Init Succeeded\nRecommended Poll Interval: 4mS\n\u3000\u3000\u3000\u3000\nr: -13.623389 p: 18.087236 y: -157.539734\nr: -15.078542 p: 13.615657 y: -155.698479\nr: -17.162211 p: 9.444151 y: -154.067935\nr: -20.069331 p: 5.452485 y: -152.632844\nr: -24.085829 p: 1.261949 y: -151.502680\nr: -29.675574 p: -2.659780 y: -151.203285\nr: -36.056415 p: -6.144597 y: -150.940009\nr: -42.588142 p: -8.521807 y: -150.505049\nr: -47.347961 p: -11.855518 y: -143.940581\nr: -53.580303 p: -13.259552 y: -143.910050\nr: -59.725537 p: -14.393150 y: -143.855190\nr: -65.340165 p: -14.693897 y: -144.329574\nr: -70.261821 p: -14.738734 y: -145.301906\nr: -74.317014 p: -14.802757 y: -146.801051\nr: -77.447959 p: -14.661696 y: -148.575780\nr: -78.309102 p: -14.618659 y: -144.192779\nr: -79.242762 p: -13.868489 y: -139.769317\nr: -79.927195 p: -12.702007 y: -135.382600\nr: -80.395718 p: -11.533799 y: -131.017385\nr: -80.965821 p: -10.382536 y: -126.841995\nr: -83.190119 p: -9.506169 y: -121.918590\n^CTraceback (most recent call last):\n  File \"Fusion.py\", line 44, in <module>\n    time.sleep(poll_interval*1.0/1000.0)\nKeyboardInterrupt\npi@raspberrypi:~/RTIMULib2/Linux/python/tests $ \n```\n\n### \u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\n\n- `octave`\u306f\u3001\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u305f\u3081\u306b\u3001\u4f7f\u7528\u3055\u308c\u308b\u6a21\u69d8\u3002\n- \u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001`RTIMULib.ini`\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u3044\u3064\u3092\u3044\u3063\u305f\u3093\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u3001\u5143\u306e\u3068\u3053\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3001\u3001\u3093\u3060\u3068\u304a\u3082\u3046\u3002\n\n```bash\ncd\ncd RTIMULib2/Linux/RTIMULibCal/ \nmake -j4\nsudo make install\n# sudo make uninstall \u3082\u3042\u308b\u30e8\u3002\n#\ncp -r /home/pi/RTIMULib2/RTEllipsoidFit/ /home/pi/\ncd /home/pi/RTEllipsoidFit/\n#\u8a2d\u5b9a\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304d\u3066\u3001\u3042\u3068\u3067\u3001\u3082\u3069\u3059\uff1f\n# cp ~/RTIMULib2/Linux/build/RTIMULibDemoGL/RTIMULib.ini .\n#\nRTIMULibCal\n```\n\n1. `m`\u3092\u62bc\u3057\u3066\u3001\u306a\u306b\u304b\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u56de\u3057\u3066\u3001\u6570\u5b57\u304c\u5909\u308f\u3089\u306a\u304f\u306a\u3063\u305f\u3089\u3001`s`\u3067\u30bb\u30fc\u30d6\u3002(`r`\u3067\u30ea\u30bb\u30c3\u30c8\u3001`x`\u3067\u4e2d\u6b62\u3002)\n2. `s`\u3092\u62bc\u3057\u3066\u3001\u306a\u306b\u304b\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001\u81ea\u52d5\u3067\u3068\u307e\u308b\u307e\u3067 \u3001\u3050\u308b\u3050\u308b\u56de\u3059\u3002(`x`\u3067\u4e2d\u6b62\u3002)\n3. `a`\u3092\u304a\u3057\u3066\u3001\n   1. x\u8ef8\u3001`e`\u3092\u304a\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u3002'` `'(\u30b9\u30da\u30fc\u30b9)\u3067\u6b21\u306e\u8ef8\n   2. y\u8ef8\u3001`e`\u3092\u304a\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u3002'` `'(\u30b9\u30da\u30fc\u30b9)\u3067\u6b21\u306e\u8ef8\n   3. z\u8ef8\u3001`e`\u3092\u304a\u3057\u3066\u3001\u3050\u308b\u3050\u308b\u3002'` `'(\u30b9\u30da\u30fc\u30b9)\u3067\u6b21\u306e\u8ef8\n   4. \u3046\u307e\u3044\u3068\u3053\u3067\u3001`s`\u3067\u30bb\u30fc\u30d6\u3002(`r`\u3067\u30ea\u30bb\u30c3\u30c8\u3001`x`\u3067\u4e2d\u6b62\u3002)\n4. `x`\u3092\u304a\u3057\u3066\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u7d42\u4e86<br>=> `RTIMULib.ini`\u304c\u66f4\u65b0\u3055\u308c\u3066\u308b\u306f\u305a\u3002\n\n\n## \u305d\u306e\u4ed6\n\n- \u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u307f\u308c\u3070\u4f7f\u3044\u65b9\u308f\u304b\u308b\u306d\u3002\n\n    ```shell-session\npi@raspberrypi:~ $ ~/RTIMULib2/Linux/build/RTIMULibDrive/RTIMULibDrive \nSettings file not found. Using defaults and creating settings file\nDetected MPU9250 at standard address\nUsing fusion algorithm RTQF\nmin/max compass calibration not in use\nEllipsoid compass calibration not in use\nAccel calibration not in use\nMPU-9250 init complete\nSample rate 84: : roll:59.973343, pitch:83.228676, yaw:-122.156759\n```\n\n    - `cat ~/RTIMULib2/Linux/RTIMULibDrive/RTIMULibDrive.cpp`\n\n```cpp:RTIMULibDrive.cpp\n////////////////////////////////////////////////////////////////////////////\n//\n//  This file is part of RTIMULib\n//\n//  Copyright (c) 2014-2015, richards-tech, LLC\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of\n//  this software and associated documentation files (the \"Software\"), to deal in\n//  the Software without restriction, including without limitation the rights to use,\n//  copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n//  Software, and to permit persons to whom the Software is furnished to do so,\n//  subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all\n//  copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n//  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n//  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n//  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n//  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n//  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n#include \"RTIMULib.h\"\n\nint main()\n{\n    int sampleCount = 0;\n    int sampleRate = 0;\n    uint64_t rateTimer;\n    uint64_t displayTimer;\n    uint64_t now;\n\n    //  Using RTIMULib here allows it to use the .ini file generated by RTIMULibDemo.\n    //  Or, you can create the .ini in some other directory by using:\n    //      RTIMUSettings *settings = new RTIMUSettings(\"<directory path>\", \"RTIMULib\");\n    //  where <directory path> is the path to where the .ini file is to be loaded/saved\n\n    RTIMUSettings *settings = new RTIMUSettings(\"RTIMULib\");\n\n    RTIMU *imu = RTIMU::createIMU(settings);\n\n    if ((imu == NULL) || (imu->IMUType() == RTIMU_TYPE_NULL)) {\n        printf(\"No IMU found\\n\");\n        exit(1);\n    }\n\n    //  This is an opportunity to manually override any settings before the call IMUInit\n\n    //  set up IMU\n\n    imu->IMUInit();\n\n    //  this is a convenient place to change fusion parameters\n\n    imu->setSlerpPower(0.02);\n    imu->setGyroEnable(true);\n    imu->setAccelEnable(true);\n    imu->setCompassEnable(true);\n\n    //  set up for rate timer\n\n    rateTimer = displayTimer = RTMath::currentUSecsSinceEpoch();\n\n    //  now just process data\n\n    while (1) {\n        //  poll at the rate recommended by the IMU\n\n        usleep(imu->IMUGetPollInterval() * 1000);\n\n        while (imu->IMURead()) {\n            RTIMU_DATA imuData = imu->getIMUData();\n            sampleCount++;\n\n            now = RTMath::currentUSecsSinceEpoch();\n\n            //  display 10 times per second\n\n            if ((now - displayTimer) > 100000) {\n                printf(\"Sample rate %d: %s\\r\", sampleRate, RTMath::displayDegrees(\"\", imuData.fusionPose));\n                fflush(stdout);\n                displayTimer = now;\n            }\n\n            //  update rate every second\n\n            if ((now - rateTimer) > 1000000) {\n                sampleRate = sampleCount;\n                sampleCount = 0;\n                rateTimer = now;\n            }\n        }\n    }\n}\n```\n\n\n***\n\n<font - [InvenSense Developers Corner](https://www.invensense.com/developers/)(\u8981\u767b\u9332)\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3001`Embedded MotionDriver 6.12`\u306f\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u30d0\u30a4\u30ca\u30ea\u306e\u914d\u5e03\u306a\u306e\u3067\u3001\u3089\u305a\u3071\u3044\u3067\u3001\u4f7f\u3048\u306a\u3044\u3063\u307d\u3044\uff1f\uff1f></font>\n", "tags": ["RaspberryPi", "raspbian", "mpu9250"]}