{"context": "\n\n\u69cb\u7bc9\u8981\u4ef6\n\nSuperset\u306f\u3001VirtualEnv\u3092\u4f7f\u7528\u3057\u3066/var/superset\u914d\u4e0b\u306b\u69cb\u7bc9\u3059\u308b\u3002\n\nSuperset\u3067\u901a\u5e38\u4f7f\u7528\u3055\u308c\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fsqlite\u3060\u304c\u3001MySQL\u306b\u5909\u66f4\u3059\u308b\u3002\n\nMySQL5.7\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb&\u521d\u671f\u8a2d\u5b9a\u6e08\u307f\u3067\u3042\u308b\u3082\u306e\u3068\u3059\u308b\u3002\n\n\n\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u306e8088\u3002\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u7fa4\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nterminal\nyum -y install git gcc gcc-c++ libffi-devel sqlite-devel openssl-devel cyrus-sasl-devel openldap-devel readline-devel\n\n\n\n\n\nPyEnv & VirtualEnv\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\npython\u74b0\u5883\u306fpyenv/virtualenv\u3092\u901a\u3057\u3066\u69cb\u7bc9\u3059\u308b\u3002\n\nterminal\ngit clone https://github.com/yyuu/pyenv.git             /usr/local/src/pyenv\ngit clone https://github.com/yyuu/pyenv-virtualenv.git  /usr/local/src/pyenv/plugins/pyenv-virtualenv   \n\ncat << \\EOS > /etc/profile.d/pyenv.sh\nexport PYENV_ROOT=/usr/local/src/pyenv\nexport PATH=${PYENV_ROOT}/bin:${PATH}\neval \"$(pyenv init -)\"\neval \"$(pyenv virtualenv-init -)\"\nEOS\n\nsource /etc/profile.d/pyenv.sh\n\n\n\n\n\npython\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nPyEnv\u3092\u901a\u3057\u3066\u3001Version 2.x.x/3.x.x(\u6700\u65b0\u7248\u306fpyenv install --list\u3067\u78ba\u8a8d)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f3.x.x\u306b\u3059\u308b\u3002\n\nterminal\nsource /etc/psourofile.d/pyenv.sh\npyenv install --list\npyenv install 2.7.13\npyenv install 3.5.2\npyenv install 3.6.0\npyenv rehash\npyenv global 3.6.0\n\n\n\n\n\u78ba\u8a8d\n\nterminal\npython --version\n\nPython 3.6.0\n\n\n\n\n\nVirtualEnv\u74b0\u5883\u69cb\u7bc9\n\n\n/var/superset\u914d\u4e0b\u306bVirtualEnv\u74b0\u5883\u3092\u69cb\u7bc9\n\nterminal\nmkdir -p /var/superset\ncd /var/superset\npyenv virtualenv 3.5.2 superset\npyenv local superset\n\n\n\n\n\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb & \u66f4\u65b0\n\nterminal\ncd /var/superset\npip install --upgrade pip setuptools\n\n\n\n\n\nsuperset\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\npip\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nterminal\ncd /var/superset\npip install superset\n\n\n\n\n\n\u521d\u671f\u8a2d\u5b9a\n\n(\u30b9\u30ad\u30c3\u30d7\u53ef) \u4f7f\u7528\u3059\u308bDB\u3092MariaDB\u306b\u5207\u308a\u66ff\u3048\u308b\n\n\u4ee5\u964d\u306e[...]\u306f\u4efb\u610f\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n\n\nMySQL devel\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nterminal\nyum -y install mysql-community-devel --enablerepo=mysql57-community\n\n\n\n\n\u30c9\u30e9\u30a4\u30d0\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nterminal\ncd /var/superset\npip install mysqlclient\n\n\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n\nterminal\nmysql -u root -p -e \"DROP DATABASE IF EXISTS [database];CREATE DATABASE [database] DEFAULT CHARACTER SET utf8mb4;\"\n\n\n\n\n\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\nmysql -u root -p -e \"GRANT ALL PRIVILEGES ON [database].* TO '[username]'@'[hostname]' IDENTIFIED BY '[password]' WITH GRANT OPTION;\"\n\n\n\n\u78ba\u8a8d\n\nterminal\nmysql -u root -p -e \"SHOW DATABASES;USE mysql;SELECT User,Host,Password FROM user\";\n\n\n\n\nsuperset\u8a2d\u5b9a\u5909\u66f4\n\nterminal\ncat << \\EOS > /usr/local/src/pyenv/versions/3.5.2/envs/superset/bin/superset_config.py\nSQLALCHEMY_DATABASE_URI = 'mysql://[username]:[password]@[hostname]/[database]'\nEOS\n\n\n\n\n\nadmin\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n\n\n\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\n\nterminal\ncd /var/superset\nfabmanager create-admin --app superset --username admin --firstname admin --lastname user --email admin@fab.org --password admin\n\n\n\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u521d\u671f\u5316\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u521d\u671f\u5316\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n\nterminal\ncd /var/superset\nsuperset db upgrade\n\n\n\n\n\n(\u30b9\u30ad\u30c3\u30d7\u53ef) \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\n\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u53d6\u8fbc\n\nterminal\ncd /var/superset\nsuperset load_examples\n\n\n\n\n\n\u30ed\u30fc\u30eb/\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u4f5c\u6210\n\n\n\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n\nterminal\ncd /var/superset\nsuperset init\n\n\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\n\u8d77\u52d5\n\n\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\n\nterminal\ncd /var/superset\nsuperset runserver -p 8088\n\n\n\n\n\n\u78ba\u8a8d\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067 http://[hostname]:8088 \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u4e0b\u8a18\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002\n\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u5316\n\nsystemd\u3067\u5236\u5fa1\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3059\u308b\u3002\n\n\nsystemd\u8a2d\u5b9a\n\n\nUnit\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\ncat << \\EOS > /etc/systemd/system/superset.service\n[Unit]\nDescription=superset\nAfter=network.target\n\n[Service]\nType=simple\nEnvironmentFile=/etc/sysconfig/superset.conf\nWorkingDirectory=/var/superset\nExecStart=/usr/local/src/pyenv/shims/superset runserver -p $PORT -w $WORKERS\nExecReload=/bin/kill -HUP $MAINPID\nRestart=on-failure\n\nKillSignal=SIGINT\n\n[Install]\nWantedBy=multi-user.target\nEOS\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\nterminal\ncat << \\EOS > /etc/sysconfig/superset.conf\nPORT=8088\nWORKERS=2\nEOS\n\n\n\n\n\u78ba\u8a8d\n\nterminal\nsystemctl list-unit-files --type=service | grep superset\n\nsuperset.service                            disabled\n\n\n\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\nterminal\nsystemctl enable superset\n\nCreated symlink from /etc/systemd/system/multi-user.target.wants/superset.service to /etc/systemd/system/superset.service.\n\n\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\n\u8d77\u52d5\n\n\nsystemctl\u3067\u8d77\u52d5\u3059\u308b\n\nterminal\nsystemctl start superset\n\n\n\n\n\n\u78ba\u8a8d\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067 http://[hostname]:8088 \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u4e0b\u8a18\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002\n\n\n\n\n\n## \u69cb\u7bc9\u8981\u4ef6\n\n* Superset\u306f\u3001VirtualEnv\u3092\u4f7f\u7528\u3057\u3066/var/superset\u914d\u4e0b\u306b\u69cb\u7bc9\u3059\u308b\u3002\n* Superset\u3067\u901a\u5e38\u4f7f\u7528\u3055\u308c\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fsqlite\u3060\u304c\u3001MySQL\u306b\u5909\u66f4\u3059\u308b\u3002\n\t> [MySQL5.7](http://qiita.com/LowSE01/items/9ecad36ffef4a5a2029c)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb&\u521d\u671f\u8a2d\u5b9a\u6e08\u307f\u3067\u3042\u308b\u3082\u306e\u3068\u3059\u308b\u3002\n\t\n* \u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u306e8088\u3002\n\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### \u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\n\n* \u30e9\u30a4\u30d6\u30e9\u30ea\u7fa4\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\t```bash:terminal\n\tyum -y install git gcc gcc-c++ libffi-devel sqlite-devel openssl-devel cyrus-sasl-devel openldap-devel readline-devel\n\t```\n\n### PyEnv & VirtualEnv\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* python\u74b0\u5883\u306fpyenv/virtualenv\u3092\u901a\u3057\u3066\u69cb\u7bc9\u3059\u308b\u3002\n\n\t```bash:terminal\n\tgit clone https://github.com/yyuu/pyenv.git             /usr/local/src/pyenv\n\tgit clone https://github.com/yyuu/pyenv-virtualenv.git  /usr/local/src/pyenv/plugins/pyenv-virtualenv\t\n\t\n\tcat << \\EOS > /etc/profile.d/pyenv.sh\n\texport PYENV_ROOT=/usr/local/src/pyenv\n\texport PATH=${PYENV_ROOT}/bin:${PATH}\n\teval \"$(pyenv init -)\"\n\teval \"$(pyenv virtualenv-init -)\"\n\tEOS\n\t\t\n\tsource /etc/profile.d/pyenv.sh\n\t```\n\t\n### python\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* PyEnv\u3092\u901a\u3057\u3066\u3001Version 2.x.x/3.x.x(\u6700\u65b0\u7248\u306fpyenv install --list\u3067\u78ba\u8a8d)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f3.x.x\u306b\u3059\u308b\u3002\n\n\t```bash:terminal\n\tsource /etc/psourofile.d/pyenv.sh\n\tpyenv install --list\n\tpyenv install 2.7.13\n\tpyenv install 3.5.2\n\tpyenv install 3.6.0\n\tpyenv rehash\n\tpyenv global 3.6.0\n\t```\n\n* \u78ba\u8a8d\n\n\t```bash:terminal\n\tpython --version\n\t\n\tPython 3.6.0\n\t```\n\n### VirtualEnv\u74b0\u5883\u69cb\u7bc9\n* /var/superset\u914d\u4e0b\u306bVirtualEnv\u74b0\u5883\u3092\u69cb\u7bc9\n\n\t```bash:terminal\n\tmkdir -p /var/superset\n\tcd /var/superset\n\tpyenv virtualenv 3.5.2 superset\n\tpyenv local superset\n\t```\n\n### \u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb & \u66f4\u65b0\n\n\t```bash:terminal\n\tcd /var/superset\n\tpip install --upgrade pip setuptools\n\t```\n\n### superset\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* pip\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\t\n\t```bash:terminal\n\tcd /var/superset\n\tpip install superset\n\t```\n\t\n## \u521d\u671f\u8a2d\u5b9a\n\n### (\u30b9\u30ad\u30c3\u30d7\u53ef) \u4f7f\u7528\u3059\u308bDB\u3092MariaDB\u306b\u5207\u308a\u66ff\u3048\u308b\n\n> \u4ee5\u964d\u306e[...]\u306f\u4efb\u610f\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n* MySQL devel\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n \n\t```bash:terminal\n\tyum -y install mysql-community-devel --enablerepo=mysql57-community\n\t```\n\n* \u30c9\u30e9\u30a4\u30d0\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\t```bash:terminal\n\tcd /var/superset\n\tpip install mysqlclient\n\t```\n\n* \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n\n\t```bash:terminal\n\tmysql -u root -p -e \"DROP DATABASE IF EXISTS [database];CREATE DATABASE [database] DEFAULT CHARACTER SET utf8mb4;\"\n\t```\n\t\n* \u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n\t\n\t```\n\tmysql -u root -p -e \"GRANT ALL PRIVILEGES ON [database].* TO '[username]'@'[hostname]' IDENTIFIED BY '[password]' WITH GRANT OPTION;\"\n\t```\n\t\n* \u78ba\u8a8d\n\t\n\t```bash:terminal\n\tmysql -u root -p -e \"SHOW DATABASES;USE mysql;SELECT User,Host,Password FROM user\";\n\t```\n\n* superset\u8a2d\u5b9a\u5909\u66f4\n\n\t```bash:terminal\n\tcat << \\EOS > /usr/local/src/pyenv/versions/3.5.2/envs/superset/bin/superset_config.py\n\tSQLALCHEMY_DATABASE_URI = 'mysql://[username]:[password]@[hostname]/[database]'\n\tEOS\n\t```\n\t\t\n### admin\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n\n* \u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\n\n\t```bash:terminal\n\tcd /var/superset\n\tfabmanager create-admin --app superset --username admin --firstname admin --lastname user --email admin@fab.org --password admin\n\t```\n\t\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u521d\u671f\u5316\n\n* \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u521d\u671f\u5316\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n\n\t```bash:terminal\n\tcd /var/superset\n\tsuperset db upgrade\n\t```\n\n### (\u30b9\u30ad\u30c3\u30d7\u53ef) \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\n\n* \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u53d6\u8fbc\n\n\t``` bash:terminal\n\tcd /var/superset\n\tsuperset load_examples\n\t```\n\t\n### \u30ed\u30fc\u30eb/\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u4f5c\u6210\n\n* \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n\n\t```bash:terminal\n\tcd /var/superset\n\tsuperset init\n\t```\n\n\t\n## \u52d5\u4f5c\u78ba\u8a8d\n\n### \u8d77\u52d5\n\n* \u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\n\n\t```bash:terminal\n\tcd /var/superset\n\tsuperset runserver -p 8088\n\t```\n\t\n### \u78ba\u8a8d\n\n* \u30d6\u30e9\u30a6\u30b6\u3067 http://[hostname]:8088 \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u4e0b\u8a18\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002\n\n\t![Kobito.ZnXito.png](https://qiita-image-store.s3.amazonaws.com/0/102123/48579eff-5efc-f392-ecc8-d444511c540e.png \"Kobito.ZnXito.png\")\n\n\n## \u30b5\u30fc\u30d3\u30b9\u5316\n\n* systemd\u3067\u5236\u5fa1\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3059\u308b\u3002\n\n### systemd\u8a2d\u5b9a\n\n* Unit\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n\t```\n\tcat << \\EOS > /etc/systemd/system/superset.service\n\t[Unit]\n\tDescription=superset\n\tAfter=network.target\n\t\n\t[Service]\n\tType=simple\n\tEnvironmentFile=/etc/sysconfig/superset.conf\n\tWorkingDirectory=/var/superset\n\tExecStart=/usr/local/src/pyenv/shims/superset runserver -p $PORT -w $WORKERS\n\tExecReload=/bin/kill -HUP $MAINPID\n\tRestart=on-failure\n\t\n\tKillSignal=SIGINT\n\t\n\t[Install]\n\tWantedBy=multi-user.target\n\tEOS\n\t```\n\n\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\t\n\t```bash:terminal\n\tcat << \\EOS > /etc/sysconfig/superset.conf\n\tPORT=8088\n\tWORKERS=2\n\tEOS\n\t```\n\n* \u78ba\u8a8d\n\n\t```bash:terminal\n\tsystemctl list-unit-files --type=service | grep superset\n\t\n\tsuperset.service                            disabled\n\t```\n\n* \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\t\n\t```bash:terminal\n\tsystemctl enable superset\n\t\n\tCreated symlink from /etc/systemd/system/multi-user.target.wants/superset.service to /etc/systemd/system/superset.service.\n\t```\n\n## \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\n### \u8d77\u52d5\n\n* systemctl\u3067\u8d77\u52d5\u3059\u308b\n\n\t```bash:terminal\n\tsystemctl start superset\n\t```\n\n### \u78ba\u8a8d\n\n* \u30d6\u30e9\u30a6\u30b6\u3067 http://[hostname]:8088 \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u4e0b\u8a18\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002\n\n\t![Kobito.ZnXito.png](https://qiita-image-store.s3.amazonaws.com/0/102123/48579eff-5efc-f392-ecc8-d444511c540e.png \"Kobito.ZnXito.png\")\n", "tags": ["superset", "BI", "CentOS", "Visualization"]}