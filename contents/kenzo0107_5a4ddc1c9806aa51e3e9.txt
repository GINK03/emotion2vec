{"context": " More than 1 year has passed since last update.\n\n\u7d4c\u7def\nLAMP\u304c\u4e3b\u6226\u5834\u3068\u3044\u3046\u4f1a\u793e\u306f\u307e\u3060\u307e\u3060\u591a\u304f\u3042\u308a\nVagrant+Ansible\u3067LAMP\u69cb\u7bc9\u3059\u308b\u306e\u3082\u9700\u8981\u304c\u3042\u308b\u304b\u306a\u3001\n\u3068\u601d\u3044\u500b\u4eba\u7684\u306b\u5229\u7528\u3057\u3066\u3044\u305f\u3082\u306e\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n\u4f55\u6545\u30bd\u30fc\u30b9\u304b\u3089\uff1f\n\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u304c\u660e\u78ba\u306a\u70ba\u3067\u3059\u3002\nyum\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5de6\u53f3\u3055\u308c\n\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u304c\u3057\u306b\u304f\u3044\u3067\u3059\u3002\n\u306a\u306e\u3067\u6307\u5b9a\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30bd\u30fc\u30b9\u304b\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u958b\u767a\u74b0\u5883\n\nMacOSX Yosemite 10.10.3\nVirtualBox 4.3.26 r98988\nVagrant 1.7.2\nAnsible 1.9.1\n\n\n\u624b\u9806\n\n1. Vagrant Box\u8ffd\u52a0\n$ vagrant box add centos6.5 https://github.com/2creatives/vagrant-centos/releases/download/v6.5.1/centos65-x86_64-20131205.box\n\n\n2. git\u30ea\u30dd\u30b8\u30c8\u30ea\u3092clone\n$ git clone https://github.com/kenzo0107/Vagrant-Ansible\n\n\u3053\u3061\u3089\u306eGit\u3067\u306f\u4ee5\u4e0b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n- httpd : 2.4.12\n- mysqld : 5.5.39\n- PHP : 5.3.6\n\u203b\u30d0\u30fc\u30b8\u30e7\u30f3\u5909\u66f4\u3059\u308b\u969b\u3001URL\u304c\u6b63\u3057\u304f\u5b58\u5728\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u305f\u5f8c\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u203b\u5909\u6570\u4ee5\u5916\u306e\u7b87\u6240\u3082\u7570\u306a\u308b\u5834\u5408\u306f\u5909\u66f4\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n3. vagrant\u304b\u3089VM\u8d77\u52d5\n$ cd Vagrant-Ansible/centos6\n$ vagrant up\n\n\n4. ssh-config\u8a2d\u5b9a\u3092ssh.config\u3078\u8ee2\u8a18\nvagrant\u8d77\u52d5\u5f8c\u306b\u4ee5\u4e0b\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4e00\u5ea6vagrant halt\u306a\u3069\u3067\u505c\u6b62\u72b6\u614b\u306b\u3057\u305f\u5f8c\u518d\u5ea6vagrant up\u3057\u305f\u5834\u5408\u3067\u3082\u4ee5\u4e0b\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ vagrant ssh-config > ssh.config\n\n\u25bcssh.config\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nHost default\n  HostName 127.0.0.1\n  User vagrant\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile /Users/kenzo/Vagrant/Vagrant-Ansible/centos6/.vagrant/machines/default/virtualbox/private_key\n  IdentitiesOnly yes\n  LogLevel FATAL\n\n\u203bIdentityFile \u306e\u30d1\u30b9\u306fgit\u3092cloning\u3057\u3001vagrant up\u3057\u305f\u30d1\u30b9\u914d\u4e0b\u306eprivate_key\u304c\u6307\u5b9a\u3055\u308c\u307e\u3059\u3002\n\u25bcansible.cfg\nAnsible\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068\u30b3\u30de\u30f3\u30c9\u304c\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\u30a4\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb hostfile = hosts\nssh\u63a5\u7d9a\u6642\u306e\u8a2d\u5b9a ssh_args = -F ssh.config\n[defaults]\nhostfile = hosts\n\n[ssh_connection]\nssh_args = -F ssh.config\n\n\u25bchosts\nVagrant\u306enode\u540d\u306f\u5909\u66f4\u3057\u3066\u3044\u306a\u3044\u9650\u308a\u3001default\u306a\u306e\u3067\ndefault\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nAnsible\u306f\u3053\u306ehosts\u3067\u6307\u5b9a\u3057\u305fnode\u306b\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\ndefault\n\n\n5. VM\u758e\u901a\u30c6\u30b9\u30c8\n\u305d\u308c\u3067\u306f\u758e\u901a\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ ansible default -m ping\n\n\u203bdefault\u3068\u3044\u3046node\u306b\u5bfe\u3057\u3001-m \u3067\u30e2\u30b8\u30e5\u30fc\u30eb(\u30b3\u30de\u30f3\u30c9)\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\ndefault | success >> {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306bsuccess\u3068\u51fa\u529b\u3055\u308c\u308c\u3070\u6210\u529f\uff01\n\u758e\u901a\u78ba\u8a8d\u3067\u304d\u3001\u74b0\u5883\u69cb\u7bc9\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\n6. Ansible\u3067\u74b0\u5883\u69cb\u7bc9\u5b9f\u884c\n$ ansible-playbook lamp.yml\n\n\u203b\u6642\u6298\u3001Timeout\u304c\u78ba\u8a8d\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u518d\u5ea6\u5b9f\u884c\u3044\u305f\u3060\u304f\u3068\u554f\u984c\u306a\u304f\u69cb\u7bc9\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u307e\u3059\u3002\n\u7c21\u5358\u306blamp.yml\u306b\u3064\u3044\u3066\u6982\u8981\u8aac\u660e\u3067\u3059\u3002\n\nhttpd\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nA. httpd\u3092\u30d3\u30eb\u30c9\u3059\u308b\u70ba\u306b\u5fc5\u8981\u306a\u4ee5\u4e0b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u30d3\u30eb\u30c9\n- APR (Apache Portable Runtime)\n- APR-Util (Apache Portable Runtime Util)\nB. \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092 /var/www/html\u306b\u5909\u66f4\nC. apache\u30e6\u30fc\u30b6\u8ffd\u52a0\nD. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u767b\u9332/\u8d77\u52d5\n\n\nmysql\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nA. mysql\u3092\u30d3\u30eb\u30c9\u3059\u308b\u70ba\u306b\u5fc5\u8981\u306a\u4ee5\u4e0b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u30d3\u30eb\u30c9\n- CMAKE\nB. mysql\u30e6\u30fc\u30b6\u8ffd\u52a0\nC. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u767b\u9332/\u8d77\u52d5\n\n\nPHP\n\nA. PHP\u30bd\u30fc\u30b9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u30d3\u30eb\u30c9\n\n\n7. Apache\u8d77\u52d5\u78ba\u8a8d\nhttp://192.168.33.10\u306b\u30a2\u30af\u30bb\u30b9\u3057\nWorking!\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\n\n8. php\u304b\u3089MySQL\u3078\u306e\u63a5\u7d9a\u78ba\u8a8d\nhttp://192.168.33.10/dbtest.php\u306b\u30a2\u30af\u30bb\u30b9\u3057\nConnect Success: Localhost via UNIX socket\n\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n\u305d\u306e\u4ed6\u3001Vagrant+Ansible\u3067CentOS7\u306bSentry\u69cb\u7bc9\u3082\u500b\u4eba\u30d6\u30ed\u30b0\u3067\u3059\u304c\u307e\u3068\u3081\u307e\u3057\u305f\u3002\nhttp://kenzo0107.hatenablog.com/entry/2015/05/10/234645\n\u4eca\u5ea6\u306f Vagrant+Ansible\u3067 nginx + golang \u74b0\u5883\u69cb\u7bc9 \u8fba\u308a\u3092\u7740\u624b\u3057\u3066\u307f\u3088\u3046\u266a\n## \u7d4c\u7def\nLAMP\u304c\u4e3b\u6226\u5834\u3068\u3044\u3046\u4f1a\u793e\u306f\u307e\u3060\u307e\u3060\u591a\u304f\u3042\u308a\nVagrant+Ansible\u3067LAMP\u69cb\u7bc9\u3059\u308b\u306e\u3082\u9700\u8981\u304c\u3042\u308b\u304b\u306a\u3001\n\u3068\u601d\u3044\u500b\u4eba\u7684\u306b\u5229\u7528\u3057\u3066\u3044\u305f\u3082\u306e\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n## \u4f55\u6545\u30bd\u30fc\u30b9\u304b\u3089\uff1f\n\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u304c\u660e\u78ba\u306a\u70ba\u3067\u3059\u3002\n\nyum\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5de6\u53f3\u3055\u308c\n\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u304c\u3057\u306b\u304f\u3044\u3067\u3059\u3002\n\n\u306a\u306e\u3067\u6307\u5b9a\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30bd\u30fc\u30b9\u304b\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\n## \u958b\u767a\u74b0\u5883\n\n* MacOSX Yosemite 10.10.3\n* VirtualBox 4.3.26 r98988\n* Vagrant 1.7.2\n* Ansible 1.9.1\n\n## \u624b\u9806\n\n#### 1. Vagrant Box\u8ffd\u52a0\n\n```\n$ vagrant box add centos6.5 https://github.com/2creatives/vagrant-centos/releases/download/v6.5.1/centos65-x86_64-20131205.box\n```\n\n#### 2. git\u30ea\u30dd\u30b8\u30c8\u30ea\u3092clone\n\n```\n$ git clone https://github.com/kenzo0107/Vagrant-Ansible\n```\n\n\u3053\u3061\u3089\u306eGit\u3067\u306f\u4ee5\u4e0b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n- httpd : 2.4.12\n- mysqld : 5.5.39\n- PHP : 5.3.6\n\n\u203b\u30d0\u30fc\u30b8\u30e7\u30f3\u5909\u66f4\u3059\u308b\u969b\u3001URL\u304c\u6b63\u3057\u304f\u5b58\u5728\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u305f\u5f8c\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u203b\u5909\u6570\u4ee5\u5916\u306e\u7b87\u6240\u3082\u7570\u306a\u308b\u5834\u5408\u306f\u5909\u66f4\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n#### 3. vagrant\u304b\u3089VM\u8d77\u52d5\n\n```\n$ cd Vagrant-Ansible/centos6\n$ vagrant up\n```\n\n#### 4. ssh-config\u8a2d\u5b9a\u3092ssh.config\u3078\u8ee2\u8a18\n\nvagrant\u8d77\u52d5\u5f8c\u306b\u4ee5\u4e0b\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4e00\u5ea6`vagrant halt`\u306a\u3069\u3067\u505c\u6b62\u72b6\u614b\u306b\u3057\u305f\u5f8c\u518d\u5ea6`vagrant up`\u3057\u305f\u5834\u5408\u3067\u3082\u4ee5\u4e0b\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n$ vagrant ssh-config > ssh.config\n```\n\n\u25bcssh.config\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nHost default\n  HostName 127.0.0.1\n  User vagrant\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile /Users/kenzo/Vagrant/Vagrant-Ansible/centos6/.vagrant/machines/default/virtualbox/private_key\n  IdentitiesOnly yes\n  LogLevel FATAL\n```\n\n\u203bIdentityFile \u306e\u30d1\u30b9\u306fgit\u3092cloning\u3057\u3001vagrant up\u3057\u305f\u30d1\u30b9\u914d\u4e0b\u306eprivate_key\u304c\u6307\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n\u25bcansible.cfg\n\nAnsible\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068\u30b3\u30de\u30f3\u30c9\u304c\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\u30a4\u30d9\u30f3\u30c8\u30ea\u30d5\u30a1\u30a4\u30eb `hostfile = hosts`\nssh\u63a5\u7d9a\u6642\u306e\u8a2d\u5b9a `ssh_args = -F ssh.config`\n\n```\n[defaults]\nhostfile = hosts\n\n[ssh_connection]\nssh_args = -F ssh.config\n```\n\n\u25bchosts\n\nVagrant\u306enode\u540d\u306f\u5909\u66f4\u3057\u3066\u3044\u306a\u3044\u9650\u308a\u3001`default`\u306a\u306e\u3067\ndefault\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nAnsible\u306f\u3053\u306ehosts\u3067\u6307\u5b9a\u3057\u305fnode\u306b\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\n\n```\ndefault\n```\n\n#### 5. VM\u758e\u901a\u30c6\u30b9\u30c8\n\n\u305d\u308c\u3067\u306f\u758e\u901a\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\n$ ansible default -m ping\n```\n\n\u203bdefault\u3068\u3044\u3046node\u306b\u5bfe\u3057\u3001-m \u3067\u30e2\u30b8\u30e5\u30fc\u30eb(\u30b3\u30de\u30f3\u30c9)\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\ndefault | success >> {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n```\n\u4e0a\u8a18\u306e\u3088\u3046\u306bsuccess\u3068\u51fa\u529b\u3055\u308c\u308c\u3070\u6210\u529f\uff01\n\u758e\u901a\u78ba\u8a8d\u3067\u304d\u3001\u74b0\u5883\u69cb\u7bc9\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\n#### 6. Ansible\u3067\u74b0\u5883\u69cb\u7bc9\u5b9f\u884c\n\n```\n$ ansible-playbook lamp.yml\n```\n\n\u203b\u6642\u6298\u3001Timeout\u304c\u78ba\u8a8d\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u518d\u5ea6\u5b9f\u884c\u3044\u305f\u3060\u304f\u3068\u554f\u984c\u306a\u304f\u69cb\u7bc9\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u307e\u3059\u3002\n\n\u7c21\u5358\u306blamp.yml\u306b\u3064\u3044\u3066\u6982\u8981\u8aac\u660e\u3067\u3059\u3002\n\n* httpd\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nA. httpd\u3092\u30d3\u30eb\u30c9\u3059\u308b\u70ba\u306b\u5fc5\u8981\u306a\u4ee5\u4e0b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u30d3\u30eb\u30c9\n- APR (Apache Portable Runtime)\n- APR-Util (Apache Portable Runtime Util)\nB. \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092 /var/www/html\u306b\u5909\u66f4\nC. apache\u30e6\u30fc\u30b6\u8ffd\u52a0\nD. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u767b\u9332/\u8d77\u52d5\n```\n\n* mysql\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nA. mysql\u3092\u30d3\u30eb\u30c9\u3059\u308b\u70ba\u306b\u5fc5\u8981\u306a\u4ee5\u4e0b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u30d3\u30eb\u30c9\n- CMAKE\nB. mysql\u30e6\u30fc\u30b6\u8ffd\u52a0\nC. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u767b\u9332/\u8d77\u52d5\n```\n\n* PHP\n\n```\nA. PHP\u30bd\u30fc\u30b9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u30d3\u30eb\u30c9\n```\n\n\n#### 7. Apache\u8d77\u52d5\u78ba\u8a8d\n\n<http://192.168.33.10>\u306b\u30a2\u30af\u30bb\u30b9\u3057\n`Working!`\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\n\n#### 8. php\u304b\u3089MySQL\u3078\u306e\u63a5\u7d9a\u78ba\u8a8d\n\n<http://192.168.33.10/dbtest.php>\u306b\u30a2\u30af\u30bb\u30b9\u3057\n`Connect Success: Localhost via UNIX socket`\n\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n---\n\n\u305d\u306e\u4ed6\u3001Vagrant+Ansible\u3067CentOS7\u306bSentry\u69cb\u7bc9\u3082\u500b\u4eba\u30d6\u30ed\u30b0\u3067\u3059\u304c\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n<http://kenzo0107.hatenablog.com/entry/2015/05/10/234645>\n\n\u4eca\u5ea6\u306f Vagrant+Ansible\u3067 nginx + golang \u74b0\u5883\u69cb\u7bc9 \u8fba\u308a\u3092\u7740\u624b\u3057\u3066\u307f\u3088\u3046\u266a\n", "tags": ["Vagnrat", "Ansible", "lamp"]}