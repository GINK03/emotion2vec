{"tags": ["Ruby2.1.2", "Selenium", "Nokogiri", "Xvfb"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\njavascript\u4f7f\u3063\u3066\u7121\u3044\u30b5\u30a4\u30c8\u307b\u3068\u3093\u3069\u306a\u3044\u3068\u601d\u308f\u308c\u308b\u306e\u3067\u3001\nselenium\u3092\u3064\u304b\u3063\u3066\u89e3\u6790\u3059\u308b\u306e\u304c\u4e00\u756a\u3044\u3044\u3068\u601d\u3063\u305f\u3002\n\n\u691c\u8a3c\u74b0\u5883\nCentOS release 6.3\n\nruby\u30d0\u30fc\u30b8\u30e7\u30f3\n#  ruby --version\nruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]\n\n\n\nXvfb(\u4eee\u60f3\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1)\u306e\u6e96\u5099\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum -y install xorg-x11-server-Xvfb\n# yum -y install firefox\n\n\n\n~/.bash_profile\nexport DISPLAY=:1\n\n\n\n\u8d77\u52d5\nXvfb :1 -screen 0 1024x768x24\n\n\n\nFireFox\u306e\u6e96\u5099\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum -y install firefox\n\n\n\nselenium-webdriver\u306e\u6e96\u5099\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install selenium-webdriver\n\n\n\nnokogiri\u306e\u6e96\u5099\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install nokogiri\n\n\n\n\u4f7f\u3044\u65b9\u306e\u304a\u52c9\u5f37\n\u305f\u3081\u3057\u306b\u300c\u30ef\u30fc\u30eb\u30c9\u30ab\u30c3\u30d7\u300d\u3067\u691c\u7d22\u3057\u305f\u7d50\u679c\u306eURL\u3092\u4e00\u89a7\u3067\u3060\u3057\u3066\u307f\u308b\u3002\n\ntest.rb\n# coding: utf-8\nrequire 'rubygems'\nrequire 'open-uri'\nrequire 'selenium-webdriver'\nrequire 'nokogiri'\nrequire 'uri'\n\n# \u691c\u7d22\u6761\u4ef6\u8a2d\u5b9a\nsearch_word = \"\u30ef\u30fc\u30eb\u30c9\u30ab\u30c3\u30d7\"\n\n# selenium\u8a2d\u5b9a\ndriver = Selenium::WebDriver.for :firefox\ndriver.navigate.to \"http://google.com\"\n\n# \u691c\u7d22\u7d50\u679c\u53d6\u5f97\nbegin\n  element = driver.find_element(:name, 'q')\n  element.send_keys search_word\n  element.submit\n  #\u3053\u3053\u3067\u30b9\u30ea\u30fc\u30d7\u3057\u306a\u3044\u3068\u7d50\u679c\u304c\u3046\u307e\u304f\u3068\u308c\u306a\u304b\u3063\u305f\u3002\n  sleep 5\nrescue\n  #\u306a\u3093\u304b\u5931\u6557\u3057\u305f\u3089\u3068\u308a\u3042\u3048\u305afirefox\u4fee\u4e86\n  driver.quit\nend\n\n# \u89e3\u6790\nhtml = driver.page_source\nkaiseki_html = Nokogiri::HTML(html)\nranking_data =  kaiseki_html.css(\"div.rc\").css(\"h3\")\n\nranking_data.each do |site|\n  pp site.css(\"a\").attribute(\"href\").value\nend\n\n\ndriver.quit\n\n\n\n\u5b9f\u884c\n# ruby test.rb\n\"http://brazil2014.yahoo.co.jp/schedule/list\"\n\"http://www.asahi.com/worldcup/schedule/\"\n\"http://ja.wikipedia.org/wiki/FIFA%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89%E3%82%AB%E3%83%83%E3%83%97\"\n\"http://www.tsp21.com/sports/soccer/wc2014/\"\n\"http://members.jcom.home.ne.jp/wcup/\"\n\"http://blog.livedoor.jp/kaikaihanno/archives/35456376.html\"\n\"http://samuraiblue.jp/\"\n\"http://www.soccer-king.jp/news/wc\"\n\"http://matome.naver.jp/topic/1LvDt\"\n\"http://jp.uefa.com/news/newsid=2033214.html\"\n\n\n## \u6982\u8981\njavascript\u4f7f\u3063\u3066\u7121\u3044\u30b5\u30a4\u30c8\u307b\u3068\u3093\u3069\u306a\u3044\u3068\u601d\u308f\u308c\u308b\u306e\u3067\u3001\nselenium\u3092\u3064\u304b\u3063\u3066\u89e3\u6790\u3059\u308b\u306e\u304c\u4e00\u756a\u3044\u3044\u3068\u601d\u3063\u305f\u3002\n\n## \u691c\u8a3c\u74b0\u5883\nCentOS release 6.3\n\n```:ruby\u30d0\u30fc\u30b8\u30e7\u30f3\n#  ruby --version\nruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]\n```\n\n## Xvfb(\u4eee\u60f3\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1)\u306e\u6e96\u5099\n\n```:\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum -y install xorg-x11-server-Xvfb\n# yum -y install firefox\n```\n```:~/.bash_profile\nexport DISPLAY=:1\n```\n```:\u8d77\u52d5\nXvfb :1 -screen 0 1024x768x24\n```\n## FireFox\u306e\u6e96\u5099\n```:\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum -y install firefox\n```\n\n## selenium-webdriver\u306e\u6e96\u5099\n```:\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install selenium-webdriver\n```\n## nokogiri\u306e\u6e96\u5099\n```:\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install nokogiri\n```\n\n## \u4f7f\u3044\u65b9\u306e\u304a\u52c9\u5f37\n\u305f\u3081\u3057\u306b\u300c\u30ef\u30fc\u30eb\u30c9\u30ab\u30c3\u30d7\u300d\u3067\u691c\u7d22\u3057\u305f\u7d50\u679c\u306eURL\u3092\u4e00\u89a7\u3067\u3060\u3057\u3066\u307f\u308b\u3002\n\n```:test.rb\n# coding: utf-8\nrequire 'rubygems'\nrequire 'open-uri'\nrequire 'selenium-webdriver'\nrequire 'nokogiri'\nrequire 'uri'\n\n# \u691c\u7d22\u6761\u4ef6\u8a2d\u5b9a\nsearch_word = \"\u30ef\u30fc\u30eb\u30c9\u30ab\u30c3\u30d7\"\n\n# selenium\u8a2d\u5b9a\ndriver = Selenium::WebDriver.for :firefox\ndriver.navigate.to \"http://google.com\"\n\n# \u691c\u7d22\u7d50\u679c\u53d6\u5f97\nbegin\n  element = driver.find_element(:name, 'q')\n  element.send_keys search_word\n  element.submit\n  #\u3053\u3053\u3067\u30b9\u30ea\u30fc\u30d7\u3057\u306a\u3044\u3068\u7d50\u679c\u304c\u3046\u307e\u304f\u3068\u308c\u306a\u304b\u3063\u305f\u3002\n  sleep 5\nrescue\n  #\u306a\u3093\u304b\u5931\u6557\u3057\u305f\u3089\u3068\u308a\u3042\u3048\u305afirefox\u4fee\u4e86\n  driver.quit\nend\n\n# \u89e3\u6790\nhtml = driver.page_source\nkaiseki_html = Nokogiri::HTML(html)\nranking_data =  kaiseki_html.css(\"div.rc\").css(\"h3\")\n\nranking_data.each do |site|\n  pp site.css(\"a\").attribute(\"href\").value\nend\n\n\ndriver.quit\n```\n```:\u5b9f\u884c\n# ruby test.rb\n\"http://brazil2014.yahoo.co.jp/schedule/list\"\n\"http://www.asahi.com/worldcup/schedule/\"\n\"http://ja.wikipedia.org/wiki/FIFA%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89%E3%82%AB%E3%83%83%E3%83%97\"\n\"http://www.tsp21.com/sports/soccer/wc2014/\"\n\"http://members.jcom.home.ne.jp/wcup/\"\n\"http://blog.livedoor.jp/kaikaihanno/archives/35456376.html\"\n\"http://samuraiblue.jp/\"\n\"http://www.soccer-king.jp/news/wc\"\n\"http://matome.naver.jp/topic/1LvDt\"\n\"http://jp.uefa.com/news/newsid=2033214.html\"\n```\n"}