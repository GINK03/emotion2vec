{"context": " More than 1 year has passed since last update.\u5927\u96d1\u628a\u306a\u610f\u8a33\u3001\u3063\u3066\u304b\u3001\u307b\u3068\u3093\u3069\u7701\u7565\u3057\u3066\u308b\u3051\u3069\u30fb\u30fb\nhttp://docs.basho.com/riak/1.3.0/references/appendices/Cluster-Capacity-Planning/\n\nOverview\nRiak Cluster \u3092\u904b\u7528\u3059\u308b\u969b\u306b\u8003\u616e\u3055\u308c\u308b\u3079\u304d\u69d8\u3005\u306a\u9805\u76ee\u306e\u30a2\u30a6\u30c8\u30e9\u30a4\u30f3\u3067\u3059\u3002\nThis is a short document that outlines the various elements and variables that should be considered when planning your Riak cluster. Your use case and environment variables will obviously be specific to what you're building, but this document should set you on the right path to planning and launching the suitable Riak cluster.\n\nRAM\nRAM \u306f\u6700\u3082\u91cd\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066\u8003\u3048\u308b\u3079\u304d\u3067\u3059\u3002\u8907\u96d1\u306a MapReduce \u30af\u30a8\u30ea\u30fc\u3092\u5b9f\u884c\u3059\u308b\u306b\u306f\u30e1\u30e2\u30ea\u30fc\u304c\u5fc5\u8981\u3067\u3057\u3087\u3046\u3002\u307e\u305f\u3001\u30e1\u30e2\u30ea\u30fc\u306b\u3088\u308b\u30c7\u30fc\u30bf\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u3001\u4f4e\u3044\u30ec\u30a4\u30c6\u30f3\u30b7\u30fc\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\nRAM should be viewed as the most important resource when sizing your Riak cluster. Aside from helping you keep more data closer to your users, memory will also be required when running complex MapReduce queries, and caching data to provide low latency request times.\n\nBitcask and Memory Requirements\nBitcask \u306f\u4f7f\u308f\u306a\u3044\u4e88\u5b9a\u306a\u306e\u3067\u3001\u7701\u7565\u3057\u307e\u3059\u3002\n\nLevelDB\nBitsack \u306e\u305f\u3081\u306b RAM \u3092\u5fc5\u9808\u6761\u4ef6\u306b\u3057\u305f\u304f\u306a\u3051\u308c\u3070\u3001LevelDB \u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002LevelDB \u306f\u51e6\u7406\u306b\u5927\u91cf\u306e\u30e1\u30e2\u30ea\u30fc\u3092\u8981\u6c42\u3057\u307e\u305b\u3093\u304c\u3001\u5229\u7528\u53ef\u80fd\u306a\u30e1\u30e2\u30ea\u30fc\u3092\u591a\u304f\u4e0e\u3048\u308b\u3053\u3068\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u5897\u52a0\u3059\u308b\u3067\u3057\u3087\u3046\u3002\nIf RAM requirements for Bitcask are prohibitive, Basho recommends use of the LevelDB backend. While LevelDB doesn't require a large amount of RAM to operate, supplying it with the maximum amount of memory available will lead to higher performance. For more information see LevelDB. \n\nDisk\n\u305d\u3093\u306a\u306b\u91cd\u8981\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u7701\u7565\u3057\u307e\u3059\u3002\n\nRead/Write Profile\nRead/Write \u306e\u5272\u5408\u3084\u3001\u8aad\u307f\u8fbc\u307e\u308c\u308b Key \u306e\u5206\u6563\u306b\u3088\u3063\u3066\u3001Riak Cluster \u306e\u69cb\u6210\u304a\u3088\u3073\u8a2d\u5b9a\u306f\u7570\u306a\u308a\u307e\u3059\u3002Write \u304c\u975e\u5e38\u306b\u591a\u3044\u5834\u5408\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4f7f\u7528\u3059\u308b RAM \u306f\u5c11\u306a\u304f\u3066\u3088\u3044\u3067\u3059\u3002\u3055\u3089\u306b\u3001\u3082\u3057\u4e00\u90e8\u306e Key \u306e\u307f\u304c\u5b9a\u671f\u7684\u306b\u8aad\u307f\u8fbc\u307e\u308c\u308b\u5834\u5408\u306f\u3001\u305d\u308c\u3089\u306e Key \u306e\u5024\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u70ba\u306b\u591a\u304f\u306e RAM \u306f\u5fc5\u8981\u3068\u306a\u308a\u307e\u305b\u3093\u3002\nRead/write ratios, as well as the the distribution of key access, should influence the configuration and design of your cluster. If your use case is write heavy you will need less RAM for caching, in addition if only a certain portion of keys is accessed regularly, such as a pareto distribution, you won't need as much RAM available to cache those keys' values.\n\nNumber of Nodes\nRiak Cluster \u306e\u30ce\u30fc\u30c9\u53f0\u6570 (\u7269\u7406\u30b5\u30fc\u30d0\u6570) \u306f\u3001\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6570\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002Riak Cluster \u304c\u5e38\u306b read/write \u3067\u304d\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u70ba\u306b\u3001\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6570\u306f\u521d\u671f\u8a2d\u5b9a\u306e N=3 \u3092\u63a8\u5968\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u306f 3 \u53f0\u3042\u308b\u3044\u306f 4 \u53f0\u306e\u30ce\u30fc\u30c9\u3067 Riak \u3092\u69cb\u7bc9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u672c\u756a\u74b0\u5883\u306b\u304a\u3044\u3066\u306f fault tolerance \u3092\u6d3b\u304b\u3059\u70ba\u306b\u3001\u5c11\u306a\u304f\u3066\u3082 5 \u53f0\u306e\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u4e8b\u3092\u63a8\u5968\u3057\u307e\u3059\u30025 \u53f0\u3088\u308a\u5c11\u306a\u3044 Riak Cluster \u306f\u3001\u307b\u3068\u3093\u3069\u306e\u30ce\u30fc\u30c9 (75-100%) \u304c\u5404\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u4e00\u90e8\u306e\u30ce\u30fc\u30c9\u306e\u8ca0\u8377\u304c\u9ad8\u9a30\u3059\u308b\u3053\u3068\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3092\u5f15\u304d\u8d77\u3053\u3057\u307e\u3059\u3002\nThe number of nodes (i.e. physical servers) in your Riak Cluster depends on the number of times data is Replicated across the cluster.\nTo ensure that the cluster is always available to respond to read and write requests, Basho recommends a \u201csane default\u201d of N=3 replicas. This requirement can be met with a three or four node cluster (as implemented in The Riak Fast Track). However, for production deployments we recommend using no fewer than 5 nodes, as node failures in smaller clusters can compromise the fault-tolerance of the system. Additionally, in clusters smaller than 5 nodes, a high percentage of the nodes (75-100% of them) will need to respond to each request, putting undue load on the cluster that may degrade performance. For more details on this recommendation, see this blog post.\n\nRing Size/Number of Partitions\nRing \u30b5\u30a4\u30ba\u306f\u3001Riak Cluster \u3092\u69cb\u7bc9\u3059\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3067\u3059\u3002\u3053\u306e\u5024\u306f Riak Cluster \u3092\u8d77\u52d5\u3059\u308b\u524d\u306b app.config \u30d5\u30a1\u30a4\u30eb\u306e ring_creation_size \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nRing size is the number of partitions that make up your Riak Cluster. This is a number that is configured before you cluster is started, and is set in your app.config file under the ring_creation_size parameter.\nRiak Cluster \u3092\u69cb\u7bc9\u6570\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u306e\u521d\u671f\u5024\u306f 64 \u3067\u3059\u3002\u3053\u308c\u306f\u5c0f\u3055\u306a Riak Cluster \u5411\u3051\u306e\u70ba\u3001\u3082\u3057 5 \u30ce\u30fc\u30c9\u3088\u308a\u5897\u3084\u3059\u4e88\u5b9a\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3088\u308a\u5927\u304d\u306a Ring \u30b5\u30a4\u30ba\u3092\u8003\u616e\u3057\u3066\u304f\u3060\u3055\u3044\u3002Ring \u30b5\u30a4\u30ba\u306f 2 \u306e\u7d2f\u4e57\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u30011 \u30ce\u30fc\u30c9\u3042\u305f\u308a\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u6700\u5c0f\u6570\u306f 10 \u3092\u63a8\u5968\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u30ce\u30fc\u30c9\u6570\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3092\u5272\u308b\u3053\u3068\u3067\u30011 \u30ce\u30fc\u30c9\u3042\u305f\u308a\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3092\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002Ring \u30b5\u30a4\u30ba\u306b\u3088\u3063\u3066\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3067\u304d\u308b\u4e0a\u9650\u304c\u6c7a\u307e\u308b\u70ba\u3001\u6210\u9577\u3092\u8003\u616e\u306b\u5165\u308c\u308b\u3053\u3068\u306f\u975e\u5e38\u306b\u91cd\u8981\u3067\u3059\u3002\nThe default number of partitions in a Riak cluster is 64. This works for smaller clusters, but if you plan to grow your cluster past 5 nodes it is recommended you consider a larger ring size. Ring sizes must be a power of 2. The minimum number of partitions recommended per node is 10, and you can determine the number of partitions that will be allocated per node by dividing the number of partitions by the number of nodes. At the moment, the ring size you choose will be the same for the life of the cluster, so taking growth into consideration is extremely important.\nRiak Cluster  (8-16 \u30ce\u30fc\u30c9) \u306b\u304a\u3044\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3092 128, 256, 512 \u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306f\u3001Riak Cluster \u3092\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3067\u304d\u308b\u512a\u308c\u305f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\u3082\u3057\u9069\u5207\u306a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u304c\u5206\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001Riak \u306e ML \u306b\u6295\u7a3f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nFor most moderate-sized Riak clusters (8-16 nodes) 128, 256, and 512 partitions are excellent options that will allow you to incrementally grow (or shrink) your cluster. If you're unsure about the best number of partitions to use, consult the Riak Mailing List for some suggestions.\n\nOther Factors\n\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u304c\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u88dc\u6b63\u306b\u3088\u3063\u3066\u30b7\u30b9\u30c6\u30e0\u306e\u30ed\u30fc\u30c9\u304c\u5897\u52a0\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u4eee\u60f3\u74b0\u5883\u3067\u52d5\u4f5c\u3055\u305b\u308b\u3068\u3001I/O \u30ec\u30a4\u30c6\u30f3\u30b7\u306b\u3088\u308a\u6025\u6fc0\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u52a3\u5316\u3055\u305b\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u672c\u756a\u904b\u7528\u3092\u884c\u306a\u3046\u524d\u306b\u3001\u9577\u671f\u9593\u306e\u8ca0\u8377\u8a66\u9a13\u3092\u884c\u3044\u3001\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u3067\u306e\u632f\u308b\u821e\u3044\u3092\u5341\u5206\u306b\u7406\u89e3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Riak Cluster \u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3059\u308b Basho Bench \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002\nRiak is built to run in a clustered environment and while it will compensate for network partitions they cause increased load on the system. In addition, running in a virtualized environment that lacks low latency IO access can drastically decrease performance. Before putting your Riak cluster in production is recommended you gain a full understanding of your environment's behavior so you know how your cluster performs under load for an extended period of time. Doing so will help you size your cluster for future growth and lead to optimal performance. Basho recommends using Basho Bench for benchmarking the performance of your cluster.\n\nBandwidth\nRiak \u306f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306b\u69cb\u7bc9\u3055\u308c\u305f Erlang \u3092\u4f7f\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3078\u306e\u4fe1\u983c\u3067\u304d\u308b\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002Riak Cluster \u306f\u69d8\u3005\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30dd\u30ed\u30b8\u30fc\u3067\u69cb\u7bc9\u3067\u304d\u307e\u3059\u304c\u3001\u30ce\u30fc\u30c9\u9593\u306e\u9045\u5ef6\u3092\u307b\u3068\u3093\u3069\u7121\u3044\u74b0\u5883\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u9593\u3067 Riak Cluster \u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u306f\u63a8\u5968\u3057\u307e\u305b\u3093\u3002\u3082\u3057\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u9593\u3067 Riak Clutser \u3092\u69cb\u7bc9\u3057\u305f\u3044\u5834\u5408\u306f\u3001Riak Enterprise \u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nRiak uses Erlang's built in distribution capabilities to provide reliable access to data. A Riak cluster can be deployed in many different network topologies, but it is recommended to have as little latency between nodes as possible. High latency leads to sub-optimal performance. It is not recommended to deploy a single Riak cluster across two data centers. If you need this capability Basho offers an inter-datacenter replication option that is built to keep multiple Riak clusters in sync across several geographically diverse deployments.\n\nIO\n\u4e00\u822c\u7684\u306b Riak \u306e\u6700\u3082\u5927\u304d\u3044\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u308b\u7b87\u6240\u306f IO \u3067\u3059\u3002Riak \u306f\u8907\u6570\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306b\u5206\u6563\u3057\u3066\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u306e\u3067\u3001RAID \u306b\u3088\u308b\u5197\u9577\u69cb\u6210\u3092\u6368\u3066\u308b\u3053\u3068\u3092\u8003\u616e\u3067\u304d\u307e\u3059\u3002\u4f4e\u3044\u9045\u5ef6\u306e\u305f\u3081\u306b RAID0 \u3084 SSD \u306e\u4f7f\u7528\u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nIn general the biggest bottleneck for Riak will be the amount of IO available to it, especially in the case of write-heavy work loads. Riak functions much like any other database and the design of your disk access should take this into account. Because Riak is clustered and your data is stored on multiple physical nodes, you can consider forgoing a tradition RAID setup for redundancy and focus on providing the least latency possible using SATA Drives or SSDs, for example.\n\nEnd\n\u6700\u5f8c\u3066\u304d\u3068\u30fc\u306b\u306a\u3063\u3061\u3083\u3063\u305f\u3051\u3069\u3001\u304a\u3057\u307e\u3044\n\n\u5927\u96d1\u628a\u306a\u610f\u8a33\u3001\u3063\u3066\u304b\u3001\u307b\u3068\u3093\u3069\u7701\u7565\u3057\u3066\u308b\u3051\u3069\u30fb\u30fb\nhttp://docs.basho.com/riak/1.3.0/references/appendices/Cluster-Capacity-Planning/\n\n## Overview\n\nRiak Cluster \u3092\u904b\u7528\u3059\u308b\u969b\u306b\u8003\u616e\u3055\u308c\u308b\u3079\u304d\u69d8\u3005\u306a\u9805\u76ee\u306e\u30a2\u30a6\u30c8\u30e9\u30a4\u30f3\u3067\u3059\u3002\n\nThis is a short document that outlines the various elements and variables that should be considered when planning your Riak cluster. Your use case and environment variables will obviously be specific to what you're building, but this document should set you on the right path to planning and launching the suitable Riak cluster.\n\n## RAM\n\nRAM \u306f\u6700\u3082\u91cd\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066\u8003\u3048\u308b\u3079\u304d\u3067\u3059\u3002\u8907\u96d1\u306a MapReduce \u30af\u30a8\u30ea\u30fc\u3092\u5b9f\u884c\u3059\u308b\u306b\u306f\u30e1\u30e2\u30ea\u30fc\u304c\u5fc5\u8981\u3067\u3057\u3087\u3046\u3002\u307e\u305f\u3001\u30e1\u30e2\u30ea\u30fc\u306b\u3088\u308b\u30c7\u30fc\u30bf\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u3001\u4f4e\u3044\u30ec\u30a4\u30c6\u30f3\u30b7\u30fc\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\nRAM should be viewed as the most important resource when sizing your Riak cluster. Aside from helping you keep more data closer to your users, memory will also be required when running complex MapReduce queries, and caching data to provide low latency request times.\n\n### Bitcask and Memory Requirements\n\nBitcask \u306f\u4f7f\u308f\u306a\u3044\u4e88\u5b9a\u306a\u306e\u3067\u3001\u7701\u7565\u3057\u307e\u3059\u3002\n\n### LevelDB\n\nBitsack \u306e\u305f\u3081\u306b RAM \u3092\u5fc5\u9808\u6761\u4ef6\u306b\u3057\u305f\u304f\u306a\u3051\u308c\u3070\u3001LevelDB \u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002LevelDB \u306f\u51e6\u7406\u306b\u5927\u91cf\u306e\u30e1\u30e2\u30ea\u30fc\u3092\u8981\u6c42\u3057\u307e\u305b\u3093\u304c\u3001\u5229\u7528\u53ef\u80fd\u306a\u30e1\u30e2\u30ea\u30fc\u3092\u591a\u304f\u4e0e\u3048\u308b\u3053\u3068\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u5897\u52a0\u3059\u308b\u3067\u3057\u3087\u3046\u3002\n\nIf RAM requirements for Bitcask are prohibitive, Basho recommends use of the LevelDB backend. While LevelDB doesn't require a large amount of RAM to operate, supplying it with the maximum amount of memory available will lead to higher performance. For more information see [LevelDB](http://docs.basho.com/riak/1.3.0/tutorials/choosing-a-backend/LevelDB/). \n\n## Disk\n\n\u305d\u3093\u306a\u306b\u91cd\u8981\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u7701\u7565\u3057\u307e\u3059\u3002\n\n## Read/Write Profile\n\nRead/Write \u306e\u5272\u5408\u3084\u3001\u8aad\u307f\u8fbc\u307e\u308c\u308b Key \u306e\u5206\u6563\u306b\u3088\u3063\u3066\u3001Riak Cluster \u306e\u69cb\u6210\u304a\u3088\u3073\u8a2d\u5b9a\u306f\u7570\u306a\u308a\u307e\u3059\u3002Write \u304c\u975e\u5e38\u306b\u591a\u3044\u5834\u5408\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4f7f\u7528\u3059\u308b RAM \u306f\u5c11\u306a\u304f\u3066\u3088\u3044\u3067\u3059\u3002\u3055\u3089\u306b\u3001\u3082\u3057\u4e00\u90e8\u306e Key \u306e\u307f\u304c\u5b9a\u671f\u7684\u306b\u8aad\u307f\u8fbc\u307e\u308c\u308b\u5834\u5408\u306f\u3001\u305d\u308c\u3089\u306e Key \u306e\u5024\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u70ba\u306b\u591a\u304f\u306e RAM \u306f\u5fc5\u8981\u3068\u306a\u308a\u307e\u305b\u3093\u3002\n\nRead/write ratios, as well as the the distribution of key access, should influence the configuration and design of your cluster. If your use case is write heavy you will need less RAM for caching, in addition if only a certain portion of keys is accessed regularly, such as a pareto distribution, you won't need as much RAM available to cache those keys' values.\n\n## Number of Nodes\n\nRiak Cluster \u306e\u30ce\u30fc\u30c9\u53f0\u6570 (\u7269\u7406\u30b5\u30fc\u30d0\u6570) \u306f\u3001\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6570\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002Riak Cluster \u304c\u5e38\u306b read/write \u3067\u304d\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u70ba\u306b\u3001\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6570\u306f\u521d\u671f\u8a2d\u5b9a\u306e N=3 \u3092\u63a8\u5968\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u306f 3 \u53f0\u3042\u308b\u3044\u306f 4 \u53f0\u306e\u30ce\u30fc\u30c9\u3067 Riak \u3092\u69cb\u7bc9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u672c\u756a\u74b0\u5883\u306b\u304a\u3044\u3066\u306f fault tolerance \u3092\u6d3b\u304b\u3059\u70ba\u306b\u3001\u5c11\u306a\u304f\u3066\u3082 5 \u53f0\u306e\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u4e8b\u3092\u63a8\u5968\u3057\u307e\u3059\u30025 \u53f0\u3088\u308a\u5c11\u306a\u3044 Riak Cluster \u306f\u3001\u307b\u3068\u3093\u3069\u306e\u30ce\u30fc\u30c9 (75-100%) \u304c\u5404\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u4e00\u90e8\u306e\u30ce\u30fc\u30c9\u306e\u8ca0\u8377\u304c\u9ad8\u9a30\u3059\u308b\u3053\u3068\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3092\u5f15\u304d\u8d77\u3053\u3057\u307e\u3059\u3002\n\nThe number of nodes (i.e. physical servers) in your Riak Cluster depends on the number of times data is Replicated across the cluster.\nTo ensure that the cluster is always available to respond to read and write requests, Basho recommends a \u201csane default\u201d of N=3 replicas. This requirement can be met with a three or four node cluster (as implemented in The Riak Fast Track). However, for production deployments we recommend using no fewer than 5 nodes, as node failures in smaller clusters can compromise the fault-tolerance of the system. Additionally, in clusters smaller than 5 nodes, a high percentage of the nodes (75-100% of them) will need to respond to each request, putting undue load on the cluster that may degrade performance. For more details on this recommendation, see this [blog post](http://basho.com/blog/technical/2012/04/27/Why-Your-Riak-Cluster-Should-Have-At-Least-Five-Nodes/).\n\n## Ring Size/Number of Partitions\n\nRing \u30b5\u30a4\u30ba\u306f\u3001Riak Cluster \u3092\u69cb\u7bc9\u3059\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3067\u3059\u3002\u3053\u306e\u5024\u306f Riak Cluster \u3092\u8d77\u52d5\u3059\u308b\u524d\u306b app.config \u30d5\u30a1\u30a4\u30eb\u306e ring_creation_size \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nRing size is the number of partitions that make up your Riak Cluster. This is a number that is configured before you cluster is started, and is set in your app.config file under the ring_creation_size parameter.\n\nRiak Cluster \u3092\u69cb\u7bc9\u6570\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u306e\u521d\u671f\u5024\u306f 64 \u3067\u3059\u3002\u3053\u308c\u306f\u5c0f\u3055\u306a Riak Cluster \u5411\u3051\u306e\u70ba\u3001\u3082\u3057 5 \u30ce\u30fc\u30c9\u3088\u308a\u5897\u3084\u3059\u4e88\u5b9a\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3088\u308a\u5927\u304d\u306a Ring \u30b5\u30a4\u30ba\u3092\u8003\u616e\u3057\u3066\u304f\u3060\u3055\u3044\u3002Ring \u30b5\u30a4\u30ba\u306f 2 \u306e\u7d2f\u4e57\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u30011 \u30ce\u30fc\u30c9\u3042\u305f\u308a\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u6700\u5c0f\u6570\u306f 10 \u3092\u63a8\u5968\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u30ce\u30fc\u30c9\u6570\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3092\u5272\u308b\u3053\u3068\u3067\u30011 \u30ce\u30fc\u30c9\u3042\u305f\u308a\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3092\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002Ring \u30b5\u30a4\u30ba\u306b\u3088\u3063\u3066\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3067\u304d\u308b\u4e0a\u9650\u304c\u6c7a\u307e\u308b\u70ba\u3001\u6210\u9577\u3092\u8003\u616e\u306b\u5165\u308c\u308b\u3053\u3068\u306f\u975e\u5e38\u306b\u91cd\u8981\u3067\u3059\u3002\n\nThe default number of partitions in a Riak cluster is 64. This works for smaller clusters, but if you plan to grow your cluster past 5 nodes it is recommended you consider a larger ring size. Ring sizes must be a power of 2. The minimum number of partitions recommended per node is 10, and you can determine the number of partitions that will be allocated per node by dividing the number of partitions by the number of nodes. At the moment, the ring size you choose will be the same for the life of the cluster, so taking growth into consideration is extremely important.\n\nRiak Cluster  (8-16 \u30ce\u30fc\u30c9) \u306b\u304a\u3044\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u3092 128, 256, 512 \u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306f\u3001Riak Cluster \u3092\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3067\u304d\u308b\u512a\u308c\u305f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\u3082\u3057\u9069\u5207\u306a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u304c\u5206\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001Riak \u306e ML \u306b\u6295\u7a3f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nFor most moderate-sized Riak clusters (8-16 nodes) 128, 256, and 512 partitions are excellent options that will allow you to incrementally grow (or shrink) your cluster. If you're unsure about the best number of partitions to use, consult the Riak Mailing List for some suggestions.\n\n## Other Factors\n\n\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u304c\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u88dc\u6b63\u306b\u3088\u3063\u3066\u30b7\u30b9\u30c6\u30e0\u306e\u30ed\u30fc\u30c9\u304c\u5897\u52a0\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u4eee\u60f3\u74b0\u5883\u3067\u52d5\u4f5c\u3055\u305b\u308b\u3068\u3001I/O \u30ec\u30a4\u30c6\u30f3\u30b7\u306b\u3088\u308a\u6025\u6fc0\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u52a3\u5316\u3055\u305b\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u672c\u756a\u904b\u7528\u3092\u884c\u306a\u3046\u524d\u306b\u3001\u9577\u671f\u9593\u306e\u8ca0\u8377\u8a66\u9a13\u3092\u884c\u3044\u3001\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u3067\u306e\u632f\u308b\u821e\u3044\u3092\u5341\u5206\u306b\u7406\u89e3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Riak Cluster \u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3059\u308b Basho Bench \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002\n\nRiak is built to run in a clustered environment and while it will compensate for network partitions they cause increased load on the system. In addition, running in a virtualized environment that lacks low latency IO access can drastically decrease performance. Before putting your Riak cluster in production is recommended you gain a full understanding of your environment's behavior so you know how your cluster performs under load for an extended period of time. Doing so will help you size your cluster for future growth and lead to optimal performance. Basho recommends using Basho Bench for benchmarking the performance of your cluster.\n\n### Bandwidth\n\nRiak \u306f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306b\u69cb\u7bc9\u3055\u308c\u305f Erlang \u3092\u4f7f\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3078\u306e\u4fe1\u983c\u3067\u304d\u308b\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002Riak Cluster \u306f\u69d8\u3005\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30dd\u30ed\u30b8\u30fc\u3067\u69cb\u7bc9\u3067\u304d\u307e\u3059\u304c\u3001\u30ce\u30fc\u30c9\u9593\u306e\u9045\u5ef6\u3092\u307b\u3068\u3093\u3069\u7121\u3044\u74b0\u5883\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u9593\u3067 Riak Cluster \u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u306f\u63a8\u5968\u3057\u307e\u305b\u3093\u3002\u3082\u3057\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u9593\u3067 Riak Clutser \u3092\u69cb\u7bc9\u3057\u305f\u3044\u5834\u5408\u306f\u3001Riak Enterprise \u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nRiak uses Erlang's built in distribution capabilities to provide reliable access to data. A Riak cluster can be deployed in many different network topologies, but it is recommended to have as little latency between nodes as possible. High latency leads to sub-optimal performance. It is not recommended to deploy a single Riak cluster across two data centers. If you need this capability Basho offers an inter-datacenter replication option that is built to keep multiple Riak clusters in sync across several geographically diverse deployments.\n\n### IO\n\n\u4e00\u822c\u7684\u306b Riak \u306e\u6700\u3082\u5927\u304d\u3044\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u308b\u7b87\u6240\u306f IO \u3067\u3059\u3002Riak \u306f\u8907\u6570\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306b\u5206\u6563\u3057\u3066\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u306e\u3067\u3001RAID \u306b\u3088\u308b\u5197\u9577\u69cb\u6210\u3092\u6368\u3066\u308b\u3053\u3068\u3092\u8003\u616e\u3067\u304d\u307e\u3059\u3002\u4f4e\u3044\u9045\u5ef6\u306e\u305f\u3081\u306b RAID0 \u3084 SSD \u306e\u4f7f\u7528\u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nIn general the biggest bottleneck for Riak will be the amount of IO available to it, especially in the case of write-heavy work loads. Riak functions much like any other database and the design of your disk access should take this into account. Because Riak is clustered and your data is stored on multiple physical nodes, you can consider forgoing a tradition RAID setup for redundancy and focus on providing the least latency possible using SATA Drives or SSDs, for example.\n\n## End\n\n\u6700\u5f8c\u3066\u304d\u3068\u30fc\u306b\u306a\u3063\u3061\u3083\u3063\u305f\u3051\u3069\u3001\u304a\u3057\u307e\u3044\n\n\n\n\n\n\n\n", "tags": ["riak"]}