{"context": " More than 1 year has passed since last update.\n\nGroonga\u3067\u306e\u5168\u6587\u691c\u7d22\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9(groonga\u30b3\u30de\u30f3\u30c9\u7de8)\n\u524d\u56de\u306e\u8a18\u4e8b\u3067\u69cb\u7bc9\u3057\u305fGroonga\u3067\u5168\u6587\u691c\u7d22\u3092\u884c\u3046\u30b3\u30de\u30f3\u30c9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3001\u516c\u5f0f\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001HTTP\u30b5\u30fc\u30d0\u30fc\u7d4c\u7531\u3067\u306e\u5168\u6587\u691c\u7d22\u306f\u5225\u8a18\u4e8b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u6e96\u5099\n\u5168\u6587\u691c\u7d22\u306b\u5fc5\u8981\u306a\u30c6\u30fc\u30d6\u30eb\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n# test.grn\u306b\u30ed\u30b0\u30a4\u30f3\n$ groonga /tmp/test.grn\n\n# MySQL\u4e92\u63db\u306e\u30ce\u30fc\u30de\u30e9\u30a4\u30b6\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n> register normalizers/mysql\n\n# \u3068\u308a\u3042\u3048\u305atrack_id(UInt32)\u3092Key\u3068\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u308b\n> table_create SearchTrack TABLE_PAT_KEY UInt32 --default_tokenizer TokenBigram --normalizer NormalizerMySQLGeneralCI\n\n# \u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u3089\u308c\u305f\u4e8b\u3092\u78ba\u8a8d\n> table_list\n[\n  [0,1410341854.51164,9.44137573242188e-05],\n  [\n    #\u4e2d\u7565\n    [257,\"SearchTrack\",\"/tmp/test.grn.0000101\",\"TABLE_PAT_KEY|PERSISTENT\",\"UInt32\",null,\"TokenBigram\",\"NormalizerMySQLGeneralCI\"]\n  ]\n]\n\n# \u30ab\u30e9\u30e0\u540d\u3092\u8ffd\u52a0\u3059\u308b\n> column_create SearchTrack name --type ShortText\n> column_create SearchTrack name_kana --type ShortText\n> column_create SearchTrack name_en --type ShortText\n> column_create SearchTrack artist_name --type ShortText\n> column_create SearchTrack artist_name_kana --type ShortText\n> column_create SearchTrack artist_name_en --type ShortText\n> column_create SearchTrack album_name --type ShortText\n> column_create SearchTrack album_name_kana --type ShortText\n> column_create SearchTrack album_name_en --type ShortText\n\n# \u4f5c\u3063\u305f\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\n> column_list SearchTrack\n[\n  [0,1410342025.90874,0.000189781188964844],\n  [\n    #\u4e2d\u7565\n    [257,\"_key\",\"\",\"\",\"COLUMN_SCALAR\",\"SearchTrack\",\"UInt32\",[]],\n    [266,\"album_name\",\"/tmp/test.grn.000010A\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [268,\"album_name_en\",\"/tmp/test.grn.000010C\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [267,\"album_name_kana\",\"/tmp/test.grn.000010B\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [263,\"artist_name\",\"/tmp/test.grn.0000107\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [265,\"artist_name_en\",\"/tmp/test.grn.0000109\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [264,\"artist_name_kana\",\"/tmp/test.grn.0000108\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [261,\"name\",\"/tmp/test.grn.0000105\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [262,\"name_en\",\"/tmp/test.grn.0000106\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [256,\"name_kana\",\"/tmp/test.grn.0000100\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]]\n  ]\n]\n\n\n\u7d9a\u3044\u3066\u3001\u5168\u6587\u691c\u7d22\u306b\u7528\u3044\u308b\u8a9e\u5f59\u8868\u3068\u8ee2\u7f6e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u8a9e\u5f59\u8868\u3068\u8ee2\u7f6e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5168\u6587\u691c\u7d22\u306e\u6e96\u5099\n# \u5168\u6587\u691c\u7d22\u7528\u306e\u8a9e\u5f59\u8868\u306e\u4f5c\u6210\n> table_create SearchTrackTerms TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerMySQLGeneralCI\n\n# \u5168\u6587\u691c\u7d22\u7528\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u5404\u30ab\u30e9\u30e0\u306e\u6570\u3060\u3051\u4f5c\u6210\u3059\u308b\n> column_create SearchTrackTerms name --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source name\n> column_create SearchTrackTerms name_kana --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source name_kana\n> column_create SearchTrackTerms name_en --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source name_en\n> column_create SearchTrackTerms artist_name --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source artist_name\n> column_create SearchTrackTerms artist_name_kana --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source artist_name_kana\n> column_create SearchTrackTerms artist_name_en --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source artist_name_en\n> column_create SearchTrackTerms album_name --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source album_name\n> column_create SearchTrackTerms album_name_kana --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source album_name_kana\n> column_create SearchTrackTerms album_name_en --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source album_name_en\n\n# \u4f5c\u3063\u305f\u8a9e\u5f59\u8868\u3092\u78ba\u8a8d\n> column_list SearchTrackTerms\n[\n  [0,1410343882.38171,0.000171184539794922],\n  [\n    [\n      # \u4e2d\u7565\n    ],\n    [271,\"_key\",\"\",\"\",\"COLUMN_SCALAR\",\"SearchTrackTerms\",\"ShortText\",[]],\n    [278,\"album_name\",\"/tmp/test.grn.0000116\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.album_name\"]],\n    [280,\"album_name_en\",\"/tmp/test.grn.0000118\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.album_name_en\"]],\n    [279,\"album_name_kana\",\"/tmp/test.grn.0000117\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.album_name_kana\"]],\n    [275,\"artist_name\",\"/tmp/test.grn.0000113\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.artist_name\"]],\n    [277,\"artist_name_en\",\"/tmp/test.grn.0000115\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.artist_name_en\"]],\n    [276,\"artist_name_kana\",\"/tmp/test.grn.0000114\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.artist_name_kana\"]],\n    [272,\"name\",\"/tmp/test.grn.0000110\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.name\"]],\n    [274,\"name_en\",\"/tmp/test.grn.0000112\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.name_en\"]],\n    [273,\"name_kana\",\"/tmp/test.grn.0000111\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.name_kana\"]]\n  ]\n]\n\n\n\u4f59\u8ac7\u3067\u3059\u304c\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001table_create\u306e\u969b\u306bKEY_NORMALIZE\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306b\u3088\u308b\u3068\u975e\u63a8\u5968\u3068\u306e\u4e8b\u306a\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b--nomalizer\u3067\u6307\u5b9a\u3057\u305f\u65b9\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u306e\u6295\u5165\n> load  --table SearchTrack\n[\n  {\n    \"_key\": 1, \n    \"name\": \"\u66f2\u540d\uff11\",\n    \"name_kana\": \"\u304d\u3087\u304f\u3081\u3044\u3044\u3061\",\n    \"name_en\": \"kyokumei ichi\",\n    \"artist_name\": \"\u97f3\u697d\u5bb6\uff11\",\n    \"artist_name_kana\": \"\u304a\u3093\u304c\u304f\u304b\u3044\u3061\",\n    \"artist_name_en\": \"ongakuka ichi\",\n    \"album_name\": \"\u539f\u76e4\uff11\",\n    \"album_name_kana\": \"\u3052\u3093\u3070\u3093\u3044\u3061\",\n    \"album_name_en\": \"genban ichi\"\n  },\n  {\n    \"_key\": 2, \n    \"name\": \"\u66f2\u540d\uff12\",\n    \"name_kana\": \"\u304d\u3087\u304f\u3081\u3044\u306b\",\n    \"name_en\": \"kyokumei ni\",\n    \"artist_name\": \"\u97f3\u697d\u5bb6\uff11\",\n    \"artist_name_kana\": \"\u304a\u3093\u304c\u304f\u304b\u3044\u3061\",\n    \"artist_name_en\": \"ongakuka ichi\",\n    \"album_name\": \"\u539f\u76e4\uff11\",\n    \"album_name_kana\": \"\u3052\u3093\u3070\u3093\u3044\u3061\",\n    \"album_name_en\": \"genban ichi\"\n  },\n  {\n    \"_key\": 3, \n    \"name\": \"\u66f2\u540d\uff13\",\n    \"name_kana\": \"\u304d\u3087\u304f\u3081\u3044\u3055\u3093\",\n    \"name_en\": \"kyokumei san\",\n    \"artist_name\": \"\u97f3\u697d\u5bb6\uff12\",\n    \"artist_name_kana\": \"\u304a\u3093\u304c\u304f\u304b\u306b\",\n    \"artist_name_en\": \"ongakuka ni\",\n    \"album_name\": \"\u539f\u76e4\uff12\",\n    \"album_name_kana\": \"\u3052\u3093\u3070\u3093\u306b\",\n    \"album_name_en\": \"genban ni\"\n  }\n]\n\n\n\u3061\u306a\u307f\u306b\u3001\u540c\u3058_key\u3092\u6301\u3064\u30c7\u30fc\u30bf\u3092\u5165\u308c\u3088\u3046\u3068\u3059\u308b\u3068UPDATE\u6271\u3044\u306b\u306a\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306e\u3088\u3046\u306b1\u4ef6\u305a\u3064\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u3044\u304f\u306e\u306f\u5927\u5909\u306a\u306e\u3067\u3001\u4e00\u6c17\u306b\u6295\u5165\u3067\u304d\u308b\u65b9\u6cd5\u3092\u5225\u9014\u691c\u8a0e\u4e2d\u3067\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\nHTTP\u30b5\u30fc\u30d0\u3092\u4ecb\u3055\u305a\u306b\u3001groonga\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u65bd\u3059\u308b\u3084\u308a\u65b9\u3002\n\ngroonga\u30b3\u30de\u30f3\u30c9\u3067\u306e\u5b9f\u884c\n# \u901a\u5e38\u306e\u691c\u7d22(artist_name\u304c\u300c\u97f3\u697d\u5bb6\uff11\u300d\u3068\u4e00\u81f4\u3059\u308b\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --query 'artist_name:\"\u97f3\u697d\u5bb6\uff11\"' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410360576.77508,0.00126838684082031],\n  [\n    [\n      [2],   # \u7d50\u679c\u4ef6\u6570\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [1,\"\u66f2\u540d\uff11\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"],\n      [2,\"\u66f2\u540d\uff12\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"]\n    ]\n  ]\n]\n\n# \u5168\u6587\u691c\u7d22(artist_name\u304c\u300c\u5bb6\uff11\u300d\u3092\u542b\u3080\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --match_columns artist_name --query '\u5bb6\uff11' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410361014.40699,0.000328302383422852],\n  [\n    [\n      [2],\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [1,\"\u66f2\u540d\uff11\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"],\n      [2,\"\u66f2\u540d\uff12\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"]\n    ]\n  ]\n]\n\n# \u5168\u6587\u691c\u7d22(album_name\u304c\u300c\u539f\u300d\u3068\u300c\uff12\u300d\u3092\u542b\u3080\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --match_columns album_name --query '\u539f\u76e4 \uff12' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410361336.0281,0.000438690185546875],\n  [\n    [\n      [1],\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [3,\"\u66f2\u540d\uff13\",\"\u539f\u76e4\uff12\",\"\u97f3\u697d\u5bb6\uff12\"]\n    ]\n  ]\n]\n\n# \u5168\u6587\u691c\u7d22(artist_name\u304bartist_name_kana\u304bartist_name_en\u306e\u3044\u305a\u308c\u304b\u306b\u300c\u3061\u300d\u3092\u542b\u3080\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --match_columns artist_name||artist_name_kana||artist_name_en --query '\u3061' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410362018.65404,0.00106215476989746],\n  [\n    [\n      [2],\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [1,\"\u66f2\u540d\uff11\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"],\n      [2,\"\u66f2\u540d\uff12\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"]\n    ]\n  ]\n]\n\n\n\n\u306a\u304a\u3001\u691c\u7d22\u306b\u306f--query\u3088\u308a\u8907\u96d1\u306a\u6761\u4ef6\u3092\u6307\u5b9a\u3067\u304d\u308b--filter\u3068\u3044\u3046\u5f15\u6570\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u4f7f\u3044\u3084\u3059\u3055\u3092\u91cd\u8996\u3057\u3066--query\u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u4e0a\u306e\u4f8b\u3067\u306f\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001--sortby\u3084--offset\u3001--limit\u3082\u3042\u308a\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f\u3053\u3061\u3089\u3002\n# Groonga\u3067\u306e\u5168\u6587\u691c\u7d22\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9(groonga\u30b3\u30de\u30f3\u30c9\u7de8)\n\n[\u524d\u56de\u306e\u8a18\u4e8b](http://qiita.com/tamano/items/a02423587fc83df7f05a)\u3067\u69cb\u7bc9\u3057\u305fGroonga\u3067\u5168\u6587\u691c\u7d22\u3092\u884c\u3046\u30b3\u30de\u30f3\u30c9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3001\u516c\u5f0f\u306e[\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](http://groonga.org/ja/docs/tutorial/introduction.html)\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001HTTP\u30b5\u30fc\u30d0\u30fc\u7d4c\u7531\u3067\u306e\u5168\u6587\u691c\u7d22\u306f[\u5225\u8a18\u4e8b](http://qiita.com/tamano/items/093c642368026974e531)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u6e96\u5099\n\n\u5168\u6587\u691c\u7d22\u306b\u5fc5\u8981\u306a\u30c6\u30fc\u30d6\u30eb\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```ruby:\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n# test.grn\u306b\u30ed\u30b0\u30a4\u30f3\n$ groonga /tmp/test.grn\n\n# MySQL\u4e92\u63db\u306e\u30ce\u30fc\u30de\u30e9\u30a4\u30b6\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n> register normalizers/mysql\n\n# \u3068\u308a\u3042\u3048\u305atrack_id(UInt32)\u3092Key\u3068\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u308b\n> table_create SearchTrack TABLE_PAT_KEY UInt32 --default_tokenizer TokenBigram --normalizer NormalizerMySQLGeneralCI\n\n# \u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u3089\u308c\u305f\u4e8b\u3092\u78ba\u8a8d\n> table_list\n[\n  [0,1410341854.51164,9.44137573242188e-05],\n  [\n    #\u4e2d\u7565\n    [257,\"SearchTrack\",\"/tmp/test.grn.0000101\",\"TABLE_PAT_KEY|PERSISTENT\",\"UInt32\",null,\"TokenBigram\",\"NormalizerMySQLGeneralCI\"]\n  ]\n]\n\n# \u30ab\u30e9\u30e0\u540d\u3092\u8ffd\u52a0\u3059\u308b\n> column_create SearchTrack name --type ShortText\n> column_create SearchTrack name_kana --type ShortText\n> column_create SearchTrack name_en --type ShortText\n> column_create SearchTrack artist_name --type ShortText\n> column_create SearchTrack artist_name_kana --type ShortText\n> column_create SearchTrack artist_name_en --type ShortText\n> column_create SearchTrack album_name --type ShortText\n> column_create SearchTrack album_name_kana --type ShortText\n> column_create SearchTrack album_name_en --type ShortText\n\n# \u4f5c\u3063\u305f\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\n> column_list SearchTrack\n[\n  [0,1410342025.90874,0.000189781188964844],\n  [\n    #\u4e2d\u7565\n    [257,\"_key\",\"\",\"\",\"COLUMN_SCALAR\",\"SearchTrack\",\"UInt32\",[]],\n    [266,\"album_name\",\"/tmp/test.grn.000010A\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [268,\"album_name_en\",\"/tmp/test.grn.000010C\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [267,\"album_name_kana\",\"/tmp/test.grn.000010B\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [263,\"artist_name\",\"/tmp/test.grn.0000107\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [265,\"artist_name_en\",\"/tmp/test.grn.0000109\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [264,\"artist_name_kana\",\"/tmp/test.grn.0000108\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [261,\"name\",\"/tmp/test.grn.0000105\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [262,\"name_en\",\"/tmp/test.grn.0000106\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]],\n    [256,\"name_kana\",\"/tmp/test.grn.0000100\",\"var\",\"COLUMN_SCALAR|PERSISTENT\",\"SearchTrack\",\"ShortText\",[]]\n  ]\n]\n```\n\n\u7d9a\u3044\u3066\u3001\u5168\u6587\u691c\u7d22\u306b\u7528\u3044\u308b\u8a9e\u5f59\u8868\u3068\u8ee2\u7f6e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u8a9e\u5f59\u8868\u3068\u8ee2\u7f6e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u3064\u3044\u3066\u306f\u3001[\u3053\u3061\u3089](http://groonga.org/ja/docs/tutorial/introduction.html#create-a-lexicon-table-for-full-text-search)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```ruby:\u5168\u6587\u691c\u7d22\u306e\u6e96\u5099\n# \u5168\u6587\u691c\u7d22\u7528\u306e\u8a9e\u5f59\u8868\u306e\u4f5c\u6210\n> table_create SearchTrackTerms TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerMySQLGeneralCI\n\n# \u5168\u6587\u691c\u7d22\u7528\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u5404\u30ab\u30e9\u30e0\u306e\u6570\u3060\u3051\u4f5c\u6210\u3059\u308b\n> column_create SearchTrackTerms name --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source name\n> column_create SearchTrackTerms name_kana --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source name_kana\n> column_create SearchTrackTerms name_en --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source name_en\n> column_create SearchTrackTerms artist_name --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source artist_name\n> column_create SearchTrackTerms artist_name_kana --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source artist_name_kana\n> column_create SearchTrackTerms artist_name_en --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source artist_name_en\n> column_create SearchTrackTerms album_name --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source album_name\n> column_create SearchTrackTerms album_name_kana --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source album_name_kana\n> column_create SearchTrackTerms album_name_en --flags COLUMN_INDEX|WITH_POSITION --type SearchTrack --source album_name_en\n\n# \u4f5c\u3063\u305f\u8a9e\u5f59\u8868\u3092\u78ba\u8a8d\n> column_list SearchTrackTerms\n[\n  [0,1410343882.38171,0.000171184539794922],\n  [\n    [\n      # \u4e2d\u7565\n    ],\n    [271,\"_key\",\"\",\"\",\"COLUMN_SCALAR\",\"SearchTrackTerms\",\"ShortText\",[]],\n    [278,\"album_name\",\"/tmp/test.grn.0000116\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.album_name\"]],\n    [280,\"album_name_en\",\"/tmp/test.grn.0000118\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.album_name_en\"]],\n    [279,\"album_name_kana\",\"/tmp/test.grn.0000117\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.album_name_kana\"]],\n    [275,\"artist_name\",\"/tmp/test.grn.0000113\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.artist_name\"]],\n    [277,\"artist_name_en\",\"/tmp/test.grn.0000115\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.artist_name_en\"]],\n    [276,\"artist_name_kana\",\"/tmp/test.grn.0000114\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.artist_name_kana\"]],\n    [272,\"name\",\"/tmp/test.grn.0000110\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.name\"]],\n    [274,\"name_en\",\"/tmp/test.grn.0000112\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.name_en\"]],\n    [273,\"name_kana\",\"/tmp/test.grn.0000111\",\"index\",\"COLUMN_INDEX|WITH_POSITION|PERSISTENT\",\"SearchTrackTerms\",\"SearchTrack\",[\"SearchTrack.name_kana\"]]\n  ]\n]\n```\n\n\u4f59\u8ac7\u3067\u3059\u304c\u3001[\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](http://groonga.org/ja/docs/tutorial/introduction.html#create-a-lexicon-table-for-full-text-search)\u3067\u306f\u3001`table_create`\u306e\u969b\u306b`KEY_NORMALIZE`\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u304c\u3001[\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://groonga.org/ja/docs/reference/commands/table_create.html#flags)\u306b\u3088\u308b\u3068\u975e\u63a8\u5968\u3068\u306e\u4e8b\u306a\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b`--nomalizer`\u3067\u6307\u5b9a\u3057\u305f\u65b9\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u307e\u3059\u3002\n\n```ruby:\u30c7\u30fc\u30bf\u306e\u6295\u5165\n> load  --table SearchTrack\n[\n  {\n    \"_key\": 1, \n    \"name\": \"\u66f2\u540d\uff11\",\n    \"name_kana\": \"\u304d\u3087\u304f\u3081\u3044\u3044\u3061\",\n    \"name_en\": \"kyokumei ichi\",\n    \"artist_name\": \"\u97f3\u697d\u5bb6\uff11\",\n    \"artist_name_kana\": \"\u304a\u3093\u304c\u304f\u304b\u3044\u3061\",\n    \"artist_name_en\": \"ongakuka ichi\",\n    \"album_name\": \"\u539f\u76e4\uff11\",\n    \"album_name_kana\": \"\u3052\u3093\u3070\u3093\u3044\u3061\",\n    \"album_name_en\": \"genban ichi\"\n  },\n  {\n    \"_key\": 2, \n    \"name\": \"\u66f2\u540d\uff12\",\n    \"name_kana\": \"\u304d\u3087\u304f\u3081\u3044\u306b\",\n    \"name_en\": \"kyokumei ni\",\n    \"artist_name\": \"\u97f3\u697d\u5bb6\uff11\",\n    \"artist_name_kana\": \"\u304a\u3093\u304c\u304f\u304b\u3044\u3061\",\n    \"artist_name_en\": \"ongakuka ichi\",\n    \"album_name\": \"\u539f\u76e4\uff11\",\n    \"album_name_kana\": \"\u3052\u3093\u3070\u3093\u3044\u3061\",\n    \"album_name_en\": \"genban ichi\"\n  },\n  {\n    \"_key\": 3, \n    \"name\": \"\u66f2\u540d\uff13\",\n    \"name_kana\": \"\u304d\u3087\u304f\u3081\u3044\u3055\u3093\",\n    \"name_en\": \"kyokumei san\",\n    \"artist_name\": \"\u97f3\u697d\u5bb6\uff12\",\n    \"artist_name_kana\": \"\u304a\u3093\u304c\u304f\u304b\u306b\",\n    \"artist_name_en\": \"ongakuka ni\",\n    \"album_name\": \"\u539f\u76e4\uff12\",\n    \"album_name_kana\": \"\u3052\u3093\u3070\u3093\u306b\",\n    \"album_name_en\": \"genban ni\"\n  }\n]\n```\n\n\u3061\u306a\u307f\u306b\u3001\u540c\u3058`_key`\u3092\u6301\u3064\u30c7\u30fc\u30bf\u3092\u5165\u308c\u3088\u3046\u3068\u3059\u308b\u3068UPDATE\u6271\u3044\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306e\u3088\u3046\u306b1\u4ef6\u305a\u3064\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u3044\u304f\u306e\u306f\u5927\u5909\u306a\u306e\u3067\u3001\u4e00\u6c17\u306b\u6295\u5165\u3067\u304d\u308b\u65b9\u6cd5\u3092\u5225\u9014\u691c\u8a0e\u4e2d\u3067\u3059\u3002\n\n\n## \u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\n\nHTTP\u30b5\u30fc\u30d0\u3092\u4ecb\u3055\u305a\u306b\u3001groonga\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u65bd\u3059\u308b\u3084\u308a\u65b9\u3002\n\n```ruby:groonga\u30b3\u30de\u30f3\u30c9\u3067\u306e\u5b9f\u884c\n# \u901a\u5e38\u306e\u691c\u7d22(artist_name\u304c\u300c\u97f3\u697d\u5bb6\uff11\u300d\u3068\u4e00\u81f4\u3059\u308b\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --query 'artist_name:\"\u97f3\u697d\u5bb6\uff11\"' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410360576.77508,0.00126838684082031],\n  [\n    [\n      [2],   # \u7d50\u679c\u4ef6\u6570\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [1,\"\u66f2\u540d\uff11\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"],\n      [2,\"\u66f2\u540d\uff12\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"]\n    ]\n  ]\n]\n\n# \u5168\u6587\u691c\u7d22(artist_name\u304c\u300c\u5bb6\uff11\u300d\u3092\u542b\u3080\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --match_columns artist_name --query '\u5bb6\uff11' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410361014.40699,0.000328302383422852],\n  [\n    [\n      [2],\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [1,\"\u66f2\u540d\uff11\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"],\n      [2,\"\u66f2\u540d\uff12\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"]\n    ]\n  ]\n]\n\n# \u5168\u6587\u691c\u7d22(album_name\u304c\u300c\u539f\u300d\u3068\u300c\uff12\u300d\u3092\u542b\u3080\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --match_columns album_name --query '\u539f\u76e4 \uff12' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410361336.0281,0.000438690185546875],\n  [\n    [\n      [1],\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [3,\"\u66f2\u540d\uff13\",\"\u539f\u76e4\uff12\",\"\u97f3\u697d\u5bb6\uff12\"]\n    ]\n  ]\n]\n\n# \u5168\u6587\u691c\u7d22(artist_name\u304bartist_name_kana\u304bartist_name_en\u306e\u3044\u305a\u308c\u304b\u306b\u300c\u3061\u300d\u3092\u542b\u3080\u30ec\u30b3\u30fc\u30c9\u306e\u3001_key, name, album_name, artist_name\u3092\u51fa\u529b\n> select SearchTrack --match_columns artist_name||artist_name_kana||artist_name_en --query '\u3061' --output_columns '_key, name, album_name, artist_name'\n[\n  [0,1410362018.65404,0.00106215476989746],\n  [\n    [\n      [2],\n      [\n        [\"_key\",\"UInt32\"],\n        [\"name\",\"ShortText\"],\n        [\"album_name\",\"ShortText\"],\n        [\"artist_name\",\"ShortText\"]\n      ],\n      [1,\"\u66f2\u540d\uff11\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"],\n      [2,\"\u66f2\u540d\uff12\",\"\u539f\u76e4\uff11\",\"\u97f3\u697d\u5bb6\uff11\"]\n    ]\n  ]\n]\n\n```\n\n\u306a\u304a\u3001\u691c\u7d22\u306b\u306f`--query`\u3088\u308a\u8907\u96d1\u306a\u6761\u4ef6\u3092\u6307\u5b9a\u3067\u304d\u308b`--filter`\u3068\u3044\u3046\u5f15\u6570\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u4f7f\u3044\u3084\u3059\u3055\u3092\u91cd\u8996\u3057\u3066`--query`\u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u4e0a\u306e\u4f8b\u3067\u306f\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001`--sortby`\u3084`--offset`\u3001`--limit`\u3082\u3042\u308a\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f[\u3053\u3061\u3089](http://groonga.org/ja/docs/tutorial/introduction.html)\u3002\n", "tags": ["groonga4.0.5"]}