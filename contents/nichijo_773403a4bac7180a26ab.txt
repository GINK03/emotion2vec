{"context": " More than 1 year has passed since last update.\n\n\u74b0\u5883\nbamboo\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3068\u3059\u308b\n\u3055\u304f\u3089VPS\u3000ubuntu 14.04\nAndroidStduio\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3001\u9069\u5f53\u306a\u30ec\u30dd\u30b8\u30c8\u30ea\u306b\u7a81\u3063\u8fbc\u3093\u3067\u3044\u308b\u3002\n\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\u306fgradle\n\u30c6\u30b9\u30c8\u306b\u306frobolectric\u3092\u4f7f\u7528\nAndroid\u95a2\u4fc2\u3042\u3093\u307e\u8a73\u3057\u304f\u306a\u3044\u304b\u3089\u3001\u8907\u96d1\u306a\u74b0\u5883\u3060\u3068\u3069\u3046\u3060\u308d\u3002\n\n\u524d\u6e96\u5099\n\u3072\u3068\u307e\u305a\u30d3\u30eb\u30c9\u3067\u304d\u308b\u74b0\u5883\u3092\u6574\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\n#add-apt-repository\u306b\u5fc5\u8981\nsudo apt-get install software-properties-common python-software-properties\n\n#oracle\u306ejava\u3092\u843d\u3068\u3059\nsudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get -y install oracle-java8-installer\nsudo apt-get -y install oracle-java8-set-default \n\n#64bit\u7248\u306e\u5834\u5408\u306f\u3053\u308c\u304c\u306a\u3044\u3068\u30d3\u30eb\u30c9\u3057\u304f\u3058\u308b\nsudo apt-get install lib32stdc++6\nsudo apt-get install lib32z1\n\nAndroidSDK\u3092\u843d\u3068\u3057\u3066unzip\n\u79c1\u306f\u4ee5\u4e0b\u306b\u89e3\u51cd\u3057\u305f\n/home/bamboo/android-tool\ncd /home/bamboo/android-tool/sdk/tools\n\n#\u5fc5\u8981\u306a\u3082\u306e\u3092\u8abf\u3079\u3066\u2026\n./android list adk -a -e \n#update\u30b3\u30de\u30f3\u30c9\u3067\u5165\u308c\u308b\n./android update sdk -u -a -t 10\n\n\u3067\u3001\u30ec\u30dd\u30b8\u30c8\u30ea\u4e0a\u306e\u30bd\u30fc\u30b9\u3068\u304b\u3092\u3001\u3068\u308a\u3042\u3048\u305a\u30d3\u30eb\u30c9\u3057\u3066\u307f\u3066\u3001\u30d3\u30eb\u30c9\u304c\u901a\u308b\u304b\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001AndroidStudio\u5074\u3067\u5165\u308c\u3066\u3044\u308b\u30c4\u30fc\u30eb\u90e1\u3092\u5165\u308c\u3066\u304a\u3051\u3070\u9593\u9055\u3044\u306f\u306a\u3044\u3002\n\u3082\u3057\u304b\u3057\u305f\u3089gradle\u3068\u304b\u3082\u5165\u308c\u306a\u3044\u3068\u30c0\u30e1\u304b\u3082\u3002\n#\u9069\u5f53\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092clone\u306a\u308a\u3057\u3066VPS\u4e0a\u306b\u6301\u3063\u3066\u304f\u308b\n#Bamboo\u3092\u4ecb\u3055\u305a\u30d3\u30eb\u30c9\u3057\u3066\u307f\u3066\u3001\u6b63\u3057\u304f\u30d3\u30eb\u30c9\u3067\u304d\u308b\u304b\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304f\n\ncd .../android-project/hoge\n./gradlew clean test\n\n\u5fc5\u8981\u305d\u3046\u306a\u3082\u306e\u3092\u90fd\u5ea6\u843d\u3068\u3057\u3066\u3001\u74b0\u5883\u3092\u6574\u3048\u308b\u2026\n\u30d3\u30eb\u30c9\u304c\u6210\u529f\u3059\u308c\u3070\u3001\u3042\u3068\u306fBamboo\u306e\u8a2d\u5b9a\u3068\u306a\u308b\n\nBamboo\u306e\u8a2d\u5b9a\n\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u3066\u3001\u6b63\u3057\u304f\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3067\u304d\u308b\u304b\u78ba\u8a8d\u306e\u5f8c\u3001\nScript\u3068JunitTest\u3092\u30bf\u30b9\u30af\u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3068\u3057\u305f\n#!/bin/sh\n\n#\u307e\u305a\u30d1\u30b9\u95a2\u4fc2\u3092\u8a2d\u5b9a\u3059\u308b\nexport JAVA_HOME=/usr/lib/jvm/java-8-oracle\nexport PATH=/usr/lib/jvm/java-8-oracle/bin:$PATH\nexport CLASSPATH=.:/usr/lib/jvm/java-8-oracle/lib\nexport ANDROID_HOME=/home/bamboo/android-tool/sdk\n\n#ignoring option MaxPermSize=256m; support was removed in 8.0\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306bJAVA_OPTS\u3092\u8a2d\u5b9a\uff08\u3053\u3053\u3067\u7d50\u69cb\u30b3\u30b1\u307e\u3057\u305f\u2026\uff09\nexport JAVA_OPTS=\"-Xms64m -Xmx128m -XX:MaxMetaspaceSize=128m\"\n\n./gradlew clean test\n\n\n\n\u3067\u3001JUnit\u5074\u306b\u306f\ntest-results/*.xml\n\u3092\u6307\u5b9a\u3057\u3066\u3084\u3063\u3066\u2026\u3042\u3068\u306f\u30d3\u30eb\u30c9\u304c\u901a\u308b\u304b\u78ba\u8a8d\u3002\n\u304a\u308f\u308a\uff01\n#\u74b0\u5883\n\nbamboo\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3068\u3059\u308b\n\u3055\u304f\u3089VPS\u3000ubuntu 14.04\n\nAndroidStduio\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3001\u9069\u5f53\u306a\u30ec\u30dd\u30b8\u30c8\u30ea\u306b\u7a81\u3063\u8fbc\u3093\u3067\u3044\u308b\u3002\n\n\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\u306fgradle\n\u30c6\u30b9\u30c8\u306b\u306frobolectric\u3092\u4f7f\u7528\n\nAndroid\u95a2\u4fc2\u3042\u3093\u307e\u8a73\u3057\u304f\u306a\u3044\u304b\u3089\u3001\u8907\u96d1\u306a\u74b0\u5883\u3060\u3068\u3069\u3046\u3060\u308d\u3002\n\n#\u524d\u6e96\u5099\n\n\u3072\u3068\u307e\u305a\u30d3\u30eb\u30c9\u3067\u304d\u308b\u74b0\u5883\u3092\u6574\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n```bash\n#add-apt-repository\u306b\u5fc5\u8981\nsudo apt-get install software-properties-common python-software-properties\n\n#oracle\u306ejava\u3092\u843d\u3068\u3059\nsudo add-apt-repository ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get -y install oracle-java8-installer\nsudo apt-get -y install oracle-java8-set-default \n\n#64bit\u7248\u306e\u5834\u5408\u306f\u3053\u308c\u304c\u306a\u3044\u3068\u30d3\u30eb\u30c9\u3057\u304f\u3058\u308b\nsudo apt-get install lib32stdc++6\nsudo apt-get install lib32z1\n```\n\nAndroidSDK\u3092\u843d\u3068\u3057\u3066unzip\n\u79c1\u306f\u4ee5\u4e0b\u306b\u89e3\u51cd\u3057\u305f\n\n/home/bamboo/android-tool\n\n```bash\ncd /home/bamboo/android-tool/sdk/tools\n\n#\u5fc5\u8981\u306a\u3082\u306e\u3092\u8abf\u3079\u3066\u2026\n./android list adk -a -e \n#update\u30b3\u30de\u30f3\u30c9\u3067\u5165\u308c\u308b\n./android update sdk -u -a -t 10\n```\n\n\u3067\u3001\u30ec\u30dd\u30b8\u30c8\u30ea\u4e0a\u306e\u30bd\u30fc\u30b9\u3068\u304b\u3092\u3001\u3068\u308a\u3042\u3048\u305a\u30d3\u30eb\u30c9\u3057\u3066\u307f\u3066\u3001\u30d3\u30eb\u30c9\u304c\u901a\u308b\u304b\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001AndroidStudio\u5074\u3067\u5165\u308c\u3066\u3044\u308b\u30c4\u30fc\u30eb\u90e1\u3092\u5165\u308c\u3066\u304a\u3051\u3070\u9593\u9055\u3044\u306f\u306a\u3044\u3002\n\n\u3082\u3057\u304b\u3057\u305f\u3089gradle\u3068\u304b\u3082\u5165\u308c\u306a\u3044\u3068\u30c0\u30e1\u304b\u3082\u3002\n\n```bash\n#\u9069\u5f53\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092clone\u306a\u308a\u3057\u3066VPS\u4e0a\u306b\u6301\u3063\u3066\u304f\u308b\n#Bamboo\u3092\u4ecb\u3055\u305a\u30d3\u30eb\u30c9\u3057\u3066\u307f\u3066\u3001\u6b63\u3057\u304f\u30d3\u30eb\u30c9\u3067\u304d\u308b\u304b\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304f\n\ncd .../android-project/hoge\n./gradlew clean test\n```\n\n\u5fc5\u8981\u305d\u3046\u306a\u3082\u306e\u3092\u90fd\u5ea6\u843d\u3068\u3057\u3066\u3001\u74b0\u5883\u3092\u6574\u3048\u308b\u2026\n\u30d3\u30eb\u30c9\u304c\u6210\u529f\u3059\u308c\u3070\u3001\u3042\u3068\u306fBamboo\u306e\u8a2d\u5b9a\u3068\u306a\u308b\n\n#Bamboo\u306e\u8a2d\u5b9a\n\n\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u3066\u3001\u6b63\u3057\u304f\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3067\u304d\u308b\u304b\u78ba\u8a8d\u306e\u5f8c\u3001\nScript\u3068JunitTest\u3092\u30bf\u30b9\u30af\u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b\n\n![PigmyRabbit   worker   Default Job  Edit job configuration   Rabbit Bamboo.png](https://qiita-image-store.s3.amazonaws.com/0/23335/9a8ccc79-d3fd-aa51-a0ca-75e08d1016b9.png)\n\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3068\u3057\u305f\n\n```bash\n#!/bin/sh\n\n#\u307e\u305a\u30d1\u30b9\u95a2\u4fc2\u3092\u8a2d\u5b9a\u3059\u308b\nexport JAVA_HOME=/usr/lib/jvm/java-8-oracle\nexport PATH=/usr/lib/jvm/java-8-oracle/bin:$PATH\nexport CLASSPATH=.:/usr/lib/jvm/java-8-oracle/lib\nexport ANDROID_HOME=/home/bamboo/android-tool/sdk\n\n#ignoring option MaxPermSize=256m; support was removed in 8.0\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306bJAVA_OPTS\u3092\u8a2d\u5b9a\uff08\u3053\u3053\u3067\u7d50\u69cb\u30b3\u30b1\u307e\u3057\u305f\u2026\uff09\nexport JAVA_OPTS=\"-Xms64m -Xmx128m -XX:MaxMetaspaceSize=128m\"\n\n./gradlew clean test\n\n```\n\n![PigmyRabbit   worker   Default Job  Edit job configuration   Rabbit Bamboo2.png](https://qiita-image-store.s3.amazonaws.com/0/23335/42710667-927b-b675-7ee5-7ce071f6a2f4.png)\n\n\u3067\u3001JUnit\u5074\u306b\u306f\n`test-results/*.xml`\n\u3092\u6307\u5b9a\u3057\u3066\u3084\u3063\u3066\u2026\u3042\u3068\u306f\u30d3\u30eb\u30c9\u304c\u901a\u308b\u304b\u78ba\u8a8d\u3002\n\n\u304a\u308f\u308a\uff01\n", "tags": ["bamboo", "Android", "gradle"]}