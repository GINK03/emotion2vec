{"context": " More than 1 year has passed since last update.\n\nTips\n\u30c7\u30d0\u30c3\u30b0\u4e2d\u306b ActiveRecord \u306e\u30c7\u30fc\u30bf\u5185\u5bb9\u3092\u5358\u306b puts \u3084 pp \u3067\u8868\u793a\u3059\u308b\u306e\u3082\u3044\u3044\u304c\u3001\n\u8868\u5f62\u5f0f\u3001csv\u8868\u793a\u3082\u3061\u3087\u3063\u3068\u3057\u305f\u5de5\u592b\u3067\u53ef\u80fd\u306b\u306a\u308b\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\nsamole.rb\n# coding: utf-8\n\nrequire 'sqlite3'\nrequire 'active_record'\nrequire 'faker'\nrequire 'hirb'\nrequire 'hirb-unicode'\nrequire 'awesome_print'\nrequire 'csv'\n\nActiveRecord::Base.establish_connection(\n    :adapter => 'sqlite3',\n    :database => 'db.sqlite3'\n)\n\nActiveRecord::Migration.create_table :users do |t|\n  t.column :name, :string\n  t.column :birth, :datetime\n  t.column :email, :string\n  # t.timestamps\nend\n\nclass User < ActiveRecord::Base\nend\n\n# \u30c0\u30df\u30fc\u306e\u8a95\u751f\u65e5\u306e\u4f5c\u6210\ndef rand_date(from_day = '1910-01-01', to_day ='2014-01-01')\n  from, to = [Date.parse(from_day), Date.parse(to_day)]\n  return from + rand(to - from + 1)\nend\n\n# \u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\ndef insert_fake_data(num = 1)\n  num.times do |i|\n    u = User.new(name: Faker::Name.name, birth: rand_date, email: Faker::Internet.safe_email)\n    u.save!\n  end\nend\n\n# csv \u5f62\u5f0f\u306b\u3059\u308b\ndef generate_csv(data, column_names = data.column_name, options = {})\n  CSV.generate(options) do |csv|\n    data.each do |item|\n      csv << item.attributes.values_at(*column_names)\n    end\n  end\nend\n\ninsert_fake_data(10) if User.count == 0\n\n# \u65e5\u6642\u306e\u66f8\u5f0f\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n# Time::DATE_FORMATS[:default] = '%Y-%m-%d %H:%M:%S'\nTime::DATE_FORMATS[:default] = '%Y-%m-%d'\n\n# \u8868\u5f62\u5f0f\u3067\u8868\u793a\nputs '--------------------------'\nputs Hirb::Helpers::AutoTable.render User.all\n\n# csv \u5f62\u5f0f\u3067\u8868\u793a\nputs '--------------------------'\ncols = User.column_names\n# cols.delete 'id'   # id \u5217\u3092\u6d88\u3059\noptions = {force_quotes: true, headers: cols, write_headers: true }\n# options = {}\nputs generate_csv(User.all, cols, options)\n\n# \u30c7\u30d0\u30c3\u30b0\u8868\u793a\nputs '--------------------------'\nap User.all.to_a[0..1]\n\n\n\n\n\u5b9f\u884c\u4f8b\n$ ruby sample.rb\n-- create_table(:users)\n--------------------------\n+----+----------------------+------------+-----------------------------+\n| id | name                 | birth      | email                       |\n+----+----------------------+------------+-----------------------------+\n| 1  | Lucas Olson          | 1983-05-12 | colten.schumm@example.net   |\n| 2  | Celia Simonis        | 1957-10-05 | leda@example.org            |\n| 3  | Betsy Bayer          | 1937-09-01 | oceane_reinger@example.org  |\n| 4  | Julien Kreiger       | 2012-02-25 | karianne@example.net        |\n| 5  | Lura Gleason         | 1918-10-24 | jensen_haley@example.net    |\n| 6  | Erling Daugherty     | 2006-05-28 | demario_sanford@example.net |\n| 7  | Aubrey Hartmann Jr.  | 1918-03-08 | makayla_reichel@example.com |\n| 8  | Rocky Stamm          | 1912-04-13 | zachary.harber@example.org  |\n| 9  | Melyssa Price V      | 1961-09-15 | clifton@example.net         |\n| 10 | Mrs. Patsy Bahringer | 1979-06-24 | rhett.ferry@example.com     |\n+----+----------------------+------------+-----------------------------+\n10 rows in set\n--------------------------\n\"id\",\"name\",\"birth\",\"email\"\n\"1\",\"Lucas Olson\",\"1983-05-12\",\"colten.schumm@example.net\"\n\"2\",\"Celia Simonis\",\"1957-10-05\",\"leda@example.org\"\n\"3\",\"Betsy Bayer\",\"1937-09-01\",\"oceane_reinger@example.org\"\n\"4\",\"Julien Kreiger\",\"2012-02-25\",\"karianne@example.net\"\n\"5\",\"Lura Gleason\",\"1918-10-24\",\"jensen_haley@example.net\"\n\"6\",\"Erling Daugherty\",\"2006-05-28\",\"demario_sanford@example.net\"\n\"7\",\"Aubrey Hartmann Jr.\",\"1918-03-08\",\"makayla_reichel@example.com\"\n\"8\",\"Rocky Stamm\",\"1912-04-13\",\"zachary.harber@example.org\"\n\"9\",\"Melyssa Price V\",\"1961-09-15\",\"clifton@example.net\"\n\"10\",\"Mrs. Patsy Bahringer\",\"1979-06-24\",\"rhett.ferry@example.com\"\n--------------------------\n[\n    [0] #<User:0x007f85b2952470> {\n           :id => 1,\n         :name => \"Lucas Olson\",\n        :birth => 1983-05-12 00:00:00 UTC,\n        :email => \"colten.schumm@example.net\"\n    },\n    [1] #<User:0x007f85b2951e80> {\n           :id => 2,\n         :name => \"Celia Simonis\",\n        :birth => 1957-10-05 00:00:00 UTC,\n        :email => \"leda@example.org\"\n    }\n]\n\n\n\u3053\u3053\u3067\u4f7f\u3063\u305f \u4f7f\u3063\u305f\u3082\u306e\n\nhirb  https://github.com/cldwalker/hirb\nawesome-print  https://github.com/michaeldv/awesome_print\ncsv  http://docs.ruby-lang.org/ja/2.1.0/class/CSV.html\n\n## Tips\n\u30c7\u30d0\u30c3\u30b0\u4e2d\u306b ActiveRecord \u306e\u30c7\u30fc\u30bf\u5185\u5bb9\u3092\u5358\u306b puts \u3084 pp \u3067\u8868\u793a\u3059\u308b\u306e\u3082\u3044\u3044\u304c\u3001\n\u8868\u5f62\u5f0f\u3001csv\u8868\u793a\u3082\u3061\u3087\u3063\u3068\u3057\u305f\u5de5\u592b\u3067\u53ef\u80fd\u306b\u306a\u308b\u3002\n\n## \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n````samole.rb\n# coding: utf-8\n\nrequire 'sqlite3'\nrequire 'active_record'\nrequire 'faker'\nrequire 'hirb'\nrequire 'hirb-unicode'\nrequire 'awesome_print'\nrequire 'csv'\n\nActiveRecord::Base.establish_connection(\n    :adapter => 'sqlite3',\n    :database => 'db.sqlite3'\n)\n\nActiveRecord::Migration.create_table :users do |t|\n  t.column :name, :string\n  t.column :birth, :datetime\n  t.column :email, :string\n  # t.timestamps\nend\n\nclass User < ActiveRecord::Base\nend\n\n# \u30c0\u30df\u30fc\u306e\u8a95\u751f\u65e5\u306e\u4f5c\u6210\ndef rand_date(from_day = '1910-01-01', to_day ='2014-01-01')\n  from, to = [Date.parse(from_day), Date.parse(to_day)]\n  return from + rand(to - from + 1)\nend\n\n# \u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\ndef insert_fake_data(num = 1)\n  num.times do |i|\n    u = User.new(name: Faker::Name.name, birth: rand_date, email: Faker::Internet.safe_email)\n    u.save!\n  end\nend\n\n# csv \u5f62\u5f0f\u306b\u3059\u308b\ndef generate_csv(data, column_names = data.column_name, options = {})\n  CSV.generate(options) do |csv|\n    data.each do |item|\n      csv << item.attributes.values_at(*column_names)\n    end\n  end\nend\n\ninsert_fake_data(10) if User.count == 0\n\n# \u65e5\u6642\u306e\u66f8\u5f0f\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n# Time::DATE_FORMATS[:default] = '%Y-%m-%d %H:%M:%S'\nTime::DATE_FORMATS[:default] = '%Y-%m-%d'\n\n# \u8868\u5f62\u5f0f\u3067\u8868\u793a\nputs '--------------------------'\nputs Hirb::Helpers::AutoTable.render User.all\n\n# csv \u5f62\u5f0f\u3067\u8868\u793a\nputs '--------------------------'\ncols = User.column_names\n# cols.delete 'id'   # id \u5217\u3092\u6d88\u3059\noptions = {force_quotes: true, headers: cols, write_headers: true }\n# options = {}\nputs generate_csv(User.all, cols, options)\n\n# \u30c7\u30d0\u30c3\u30b0\u8868\u793a\nputs '--------------------------'\nap User.all.to_a[0..1]\n\n````\n\n# \u5b9f\u884c\u4f8b\n\n````\n$ ruby sample.rb\n-- create_table(:users)\n--------------------------\n+----+----------------------+------------+-----------------------------+\n| id | name                 | birth      | email                       |\n+----+----------------------+------------+-----------------------------+\n| 1  | Lucas Olson          | 1983-05-12 | colten.schumm@example.net   |\n| 2  | Celia Simonis        | 1957-10-05 | leda@example.org            |\n| 3  | Betsy Bayer          | 1937-09-01 | oceane_reinger@example.org  |\n| 4  | Julien Kreiger       | 2012-02-25 | karianne@example.net        |\n| 5  | Lura Gleason         | 1918-10-24 | jensen_haley@example.net    |\n| 6  | Erling Daugherty     | 2006-05-28 | demario_sanford@example.net |\n| 7  | Aubrey Hartmann Jr.  | 1918-03-08 | makayla_reichel@example.com |\n| 8  | Rocky Stamm          | 1912-04-13 | zachary.harber@example.org  |\n| 9  | Melyssa Price V      | 1961-09-15 | clifton@example.net         |\n| 10 | Mrs. Patsy Bahringer | 1979-06-24 | rhett.ferry@example.com     |\n+----+----------------------+------------+-----------------------------+\n10 rows in set\n--------------------------\n\"id\",\"name\",\"birth\",\"email\"\n\"1\",\"Lucas Olson\",\"1983-05-12\",\"colten.schumm@example.net\"\n\"2\",\"Celia Simonis\",\"1957-10-05\",\"leda@example.org\"\n\"3\",\"Betsy Bayer\",\"1937-09-01\",\"oceane_reinger@example.org\"\n\"4\",\"Julien Kreiger\",\"2012-02-25\",\"karianne@example.net\"\n\"5\",\"Lura Gleason\",\"1918-10-24\",\"jensen_haley@example.net\"\n\"6\",\"Erling Daugherty\",\"2006-05-28\",\"demario_sanford@example.net\"\n\"7\",\"Aubrey Hartmann Jr.\",\"1918-03-08\",\"makayla_reichel@example.com\"\n\"8\",\"Rocky Stamm\",\"1912-04-13\",\"zachary.harber@example.org\"\n\"9\",\"Melyssa Price V\",\"1961-09-15\",\"clifton@example.net\"\n\"10\",\"Mrs. Patsy Bahringer\",\"1979-06-24\",\"rhett.ferry@example.com\"\n--------------------------\n[\n    [0] #<User:0x007f85b2952470> {\n           :id => 1,\n         :name => \"Lucas Olson\",\n        :birth => 1983-05-12 00:00:00 UTC,\n        :email => \"colten.schumm@example.net\"\n    },\n    [1] #<User:0x007f85b2951e80> {\n           :id => 2,\n         :name => \"Celia Simonis\",\n        :birth => 1957-10-05 00:00:00 UTC,\n        :email => \"leda@example.org\"\n    }\n]\n````\n\n## \u3053\u3053\u3067\u4f7f\u3063\u305f \u4f7f\u3063\u305f\u3082\u306e\n\n- hirb  https://github.com/cldwalker/hirb\n\n- awesome-print  https://github.com/michaeldv/awesome_print\n\n- csv  http://docs.ruby-lang.org/ja/2.1.0/class/CSV.html\n", "tags": ["Ruby", "ActiveRecord"]}