{"context": "\n\n\u306f\u3058\u3081\u306b\n\n\nGoogle Calender\u306e\u5185\u5bb9\u3092Slack\u306b\u901a\u77e5\u3057\u305f\u3044\u3002\n\u3051\u3069Slack\u306b\u305d\u306e\u9023\u643a\u3092\u8ffd\u52a0\u3059\u308b\u4f59\u88d5\u304c\u306a\u3044\u30fb\u30fb\u30fb\u3002\n\n\n(Slack\u306f\u7121\u6599\u7248\u3060\u3068Apps\u3084Integration\u306f10\u7a2e\u985e\u307e\u3067\u306a\u306e\u3067\u30fb\u30fb\u30fb\u3002)\n\n\n\n\n\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u6700\u521d\u306f\u76f4\u63a5Google Calender API\u3092\u53e9\u304f\u3053\u3068\u3082\u8003\u3048\u307e\u3057\u305f\u304c\u300110\u5206\u524d\u306b\u901a\u77e5\u306a\u3093\u3066\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u8ae6\u3081\u3088\u3046\u304b\u3068\u601d\u3063\u3066\u3044\u305f\u3068\u3053\u308d\u3001\u30c1\u30fc\u30e0\u3092\u3082\u3046\u4e00\u3064\u4f5c\u3063\u3066Outgoing WebHooks\u3092\u7528\u3044\u3066\u666e\u6bb5\u4f7f\u3063\u3066\u3044\u308bSlack\u306b\u901a\u77e5\u3067\u304d\u306a\u3044\u304b\uff1f\u3068\u8003\u3048\u307e\u3057\u305f\u3002\n\u305d\u3093\u306a\u3053\u3068\u3057\u305f\u3044\u4eba\u304c\u4ed6\u306b\u3044\u308b\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u5b9f\u73fe\u3055\u305b\u308b\u307e\u3067\u3092\u79c1\u304c\u3064\u307e\u3065\u3044\u305f\u70b9\u3092\u4e2d\u5fc3\u306b\u8a18\u4e8b\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u3053\u3046\u3044\u3046\u4eba\u306b\u5f79\u7acb\u3064\u304b\u3082\uff1f\n\n\u5225\u30c1\u30fc\u30e0\u3067\u9023\u643a\u3057\u305fGoogle Calender\u306e\u5185\u5bb9\u3092Slack\u306b\u901a\u77e5\u3057\u305f\u3044\n\u3068\u3042\u308b\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9010\u6b21\u51e6\u7406\u3057\u305f\u3044\n\u9023\u643a\u3057\u305fGoogle Calender\u304c\u6295\u7a3f\u3059\u308b\u5185\u5bb9\u3092\u77e5\u308a\u305f\u3044\n\n\n\n\u30dd\u30a4\u30f3\u30c81 Slack\u306eOutgoing WebHooks\u53d7\u4fe1\u30e1\u30bd\u30c3\u30c9\u306fdoPost\u304c\u6b63\u89e3\nSlack Bot\u3092GAS\u3067\u3044\u3044\u611f\u3058\u3067\u66f8\u304f\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u305f - Qiita\n\u306bdoGet\u3068\u3042\u3063\u305f\u306e\u3067\u305d\u308c\u3067\u4f5c\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u5168\u304f\u53cd\u5fdc\u3092\u898b\u305b\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u7d4c\u9a13\u8005\u304c\u3044\u305f\u306e\u3067\u805e\u3044\u305f\u3089doPost\u3067\u3084\u3063\u3066\u307e\u3057\u305f\u3002\n\u8a18\u4e8b\u304c\u66f8\u304b\u308c\u305f\u5f53\u6642\u3068\u306e\u4ed5\u69d8\u5909\u66f4\u306e\u7dda\u3082\u5426\u5b9a\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u79c1\u306f\u305d\u306e\u4eba\u306b\u805e\u304f\u307e\u3067\u6570\u6642\u9593\u306e\u9593\u60a9\u3093\u3067\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n\u30dd\u30a4\u30f3\u30c82 \u9023\u643a\u3059\u308b\u3068\u304d\u30ab\u30ec\u30f3\u30c0\u30fc\u3054\u3068\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u4f5c\u3063\u305f\u65b9\u304c\u826f\u3044\u30dd\u30a4\u30f3\u30c83 Attachments\u306fOutgoing\u3055\u308c\u306a\u3044\nSlack\u306b\u6295\u7a3f\u3055\u308c\u305f\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u30a4\u30d9\u30f3\u30c8(\u4f5c\u6210\u30fb\u5909\u66f4\u306a\u3069\u8a2d\u5b9a\u3057\u305f\u3082\u306e)\u304cOutgoing\u3055\u308c\u308b\u3068\u6b21\u306e\u3088\u3046\u306a\u5185\u5bb9\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\n\uff0a\u3053\u3061\u3089\u306f\u30c6\u30b9\u30c8\u6642\u306e\u78ba\u8a8d\u7528\u306bJSON.stringify()\u3057\u305f\u3082\u3092\u52a0\u5de5\u3057\u3066\u3044\u307e\u3059\u3001\u5b9f\u969b\u306fJS\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3059\n{\n  \"parameter\":{\n    \"channel_name\":\"\u30c1\u30e3\u30f3\u30cd\u30eb\u540d\",\n    \"bot_name\":\"\",\n    \"user_id\":\"USLACKBOT\",\n    \"user_name\":\"slackbot\",\n    \"service_id\":\"\u30b5\u30fc\u30d3\u30b9ID\",\n    \"team_domain\":\"\u30c1\u30fc\u30e0\u540d\",\n    \"team_id\":\"\u30c1\u30fc\u30e0ID\",\n    \"text\":\"\",\n    \"channel_id\":\"C1RKZDVGB\",\n    \"bot_id\":\"B1RMK8B6Z\",\n    \"token\":\"DvFLGzgSn6pVz7NF4L9pYgro\",\n    \"timestamp\":\"1468578010.000070\"\n  },\n  \"contextPath\":\"\",\n  \"contentLength\":231,\n  \"queryString\":null,\n  \"parameters\":{\n    \"channel_name\":[\"\u30c1\u30e3\u30f3\u30cd\u30eb\u540d\"],\n    \"bot_name\":[\"\"],\n    \"user_id\":[\"USLACKBOT\"],\n    \"user_name\":[\"slackbot\"],\n    \"service_id\":[\"\u30b5\u30fc\u30d3\u30b9ID\"],\n    \"team_domain\":[\"\u30c1\u30fc\u30e0\u540d\"],\n    \"team_id\":[\"\u30c1\u30fc\u30e0ID\"],\n    \"text\":[\"\"],\n    \"channel_id\":[\"\u30c1\u30e3\u30f3\u30cd\u30ebID\"],\n    \"bot_id\":[\"BotID\"],\n    \"token\":[\"Outgoing WebHooks\u306e\u30c8\u30fc\u30af\u30f3\"],\n    \"timestamp\":[\"1468578010.000070\"]\n  },\n  \"postData\":{\n    \"type\":\"application/x-www-form-urlencoded\",\n    \"length\":231,\n    \"contents\":\"token=Outgoing WebHooks\u306e\u30c8\u30fc\u30af\u30f3&team_id=\u30c1\u30fc\u30e0ID&team_domain=\u30c1\u30fc\u30e0\u540d&service_id=\u30b5\u30fc\u30d3\u30b9ID&channel_id=\u30c1\u30e3\u30f3\u30cd\u30ebID&channel_name=\u30c1\u30e3\u30f3\u30cd\u30eb\u540d&timestamp=1468578010.000070&user_id=USLACKBOT&user_name=slackbot&text=&bot_id=BotID&bot_name=\",\n    \"name\":\"postData\"\n  }\n}\n\n\u898b\u3066\u5206\u304b\u308a\u307e\u3059\u3067\u3057\u3087\u3046\u304b\uff1f\n\u30ab\u30ec\u30f3\u30c0\u30fc\u9023\u643a\u3059\u308b\u3068\u6295\u7a3f\u306e\u540d\u524d\uff1d\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u540d\u524d\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3092Outgoing\u3059\u308b\u3068SlackBot\u6271\u3044\u306b\u306a\u308a\u307e\u3059\u3002\n\u3068\u308a\u3042\u3048\u305a3\u3064\u306e\u30ab\u30ec\u30f3\u30c0\u30fc\u30921\u3064\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u9023\u643a\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u3044\u3056Outgoing\u3055\u308c\u308b\u3068\u305d\u308c\u304c\u3069\u306e\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u3082\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u306a\u306e\u3067\u3001\u30ab\u30ec\u30f3\u30c0\u30fc\u3054\u3068\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u5206\u3051\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\u3002\n\u307e\u305f\u3001\u30ab\u30ec\u30f3\u30c0\u30fc\u306b\u95a2\u3059\u308b\u30a4\u30d9\u30f3\u30c8(\u4f5c\u6210\u3084\u66f4\u65b0\u306a\u3069\u8a2d\u5b9a\u3057\u305f\u3082\u306e)\u306e\u60c5\u5831\u304c\u4e00\u5207\u3042\u308a\u307e\u305b\u3093\u3002\n\u306a\u305c\u306a\u3089\u3042\u306e\u60c5\u5831\u306fAttachment\u3067\u3042\u308a\u3001Outgoing WebHooks\u3067\u306fAttachments\u306f\u542b\u307e\u308c\u306a\u3044\u4ed5\u69d8\u3067\u3059\u3002\n\nPlease note that the content of message attachments will not be included in the outgoing POST data.\n\n(\u9069\u5f53\u8a33\uff1a\u30e1\u30c3\u30bb\u30fc\u30b8\u306eattachments\u306fOutgoing WebHooks\u3067\u9001\u4fe1\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306b\u306f\u542b\u307e\u308c\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002)\n\u53c2\u8003\uff1aOutgoing Webhooks | Slack\n\u306a\u306e\u3067\u3001channel.history\u3092\u7528\u3044\u3066\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30dd\u30a4\u30f3\u30c84 channel.history\u306foldest\u3084latest\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\n\u30d4\u30f3\u30dd\u30a4\u30f3\u30c8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6b32\u3057\u304b\u3063\u305f\u306e\u3067\u6700\u521d\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u306e\u6307\u5b9a\u306foldest\u3082latest\u3082\u540c\u3058\u304fOutgoing WebHooks\u3067\u5f97\u3089\u308c\u305f\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3067\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nchannels.history\u306e\u30c6\u30b9\u30c8\u30da\u30fc\u30b8\u3067\u30c6\u30b9\u30c8\u3057\u305f\u3068\u3053\u308d\u3001channel.history\u306foldest\u3084latest\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u3064\u307e\u308a\u3001\u30d4\u30f3\u30dd\u30a4\u30f3\u30c8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u306b\u305d\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u524d\u5f8c\u306b\u305a\u3089\u3057\u305f\u3082\u306e\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\noldest\u3084latest\u306e\u8a08\u7b97\u30b3\u30fc\u30c9\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\nvar timestamp = Number(e.parameter.timestamp)*1000000;\nvar oldest = String((timestamp - 1)/1000000);\nif(oldest.length < 17){\n  oldest += \"0\";\n}\nvar latest = String((timestamp + 1)/1000000);\nif(latest.length < 17){\n  latest += \"0\";\n}\n\n\u8db3\u3057\u7b97\u306e\u524d\u5f8c\u3067\u540c\u3058\u6570\u304b\u3051\u3066\u5272\u308b\u306e\u306f\u8a08\u7b97\u8aa4\u5dee\u3092\u9632\u3050\u305f\u3081\u3067\u3059\u3002\n\u6841\u6570\u304c\u91cd\u8981\u3089\u3057\u304f\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u30660\u30d1\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u306a\u3044\u3068\u30d4\u30f3\u30dd\u30a4\u30f3\u30c8\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u308a\u4f55\u3082\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\u3082\u3057\u304b\u3057\u305f\u3089\u5185\u90e8\u3067\u3082\u7d50\u5c40\u639b\u3051\u7b97\u3057\u3066\u5c0f\u6570\u3092\u6574\u6570\u306b\u3057\u3066\u3044\u305f\u308a\u3059\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n(\u3067\u306a\u3044\u3068\u5c0f\u6570\u306e\u6700\u5f8c\u306b0\u3064\u3051\u308b\u610f\u5473\u304c\u30fb\u30fb\u30fb\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u6570\u5024\u3067\u306f\u306a\u304f\u3066\u6587\u5b57\u5217\u6271\u3044\u3068\u304b\uff1f)\n\n\u30dd\u30a4\u30f3\u30c85 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u307e\u3068\u3081\u306f\u901a\u5e38\u306e\u3082\u306e\u3068\u5f62\u5f0f\u304c\u7570\u306a\u308b\n\u901a\u5e38\u306f\u5148\u307b\u3069\u66f8\u3044\u305f\u3088\u3046\u306b\u30ab\u30ec\u30f3\u30c0\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u5185\u5bb9\u306fAttachment\u306b\u3042\u3063\u3066\u30c6\u30ad\u30b9\u30c8\u306b\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u3067\u3059\u304c\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u307e\u3068\u3081\u3067\u306f(\u300cThere are \u200b4\u200b events today:\u300d\u306a\u3069)\u304c\u30c6\u30ad\u30b9\u30c8\u3067\u6295\u7a3f\u3055\u308c\u307e\u3059\u3002\n\u307e\u305f\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306e\u6570\u3060\u3051Attachment\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30dd\u30a4\u30f3\u30c86 \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u30b3\u30fc\u30c9\u3092\u8a66\u3059\u3068\u826f\u3044\nGoogle Calender\u30fbOutgoing WebHooks\u30fbGAS\u306e3\u7a2e\u985e\u304c\u7d61\u3080\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u306a\u308b\u305f\u3081\u3001\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092GAS\u3067\u64cd\u4f5c\u3059\u308b\u4ee5\u4e0a\u306b\u30c7\u30d0\u30c3\u30b0\u304c\u9762\u5012\u306a\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u3002\n\u307e\u305a\u66f4\u65b0\u3092\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u53cd\u6620\u3055\u305b\u308b\u306b\u306f\u3044\u3061\u3044\u3061\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u79c1\u306f\u30ab\u30ec\u30f3\u30c0\u30fc\u30a4\u30d9\u30f3\u30c8\u304c\u7121\u4e8bOutgoing\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u3082\u5e7e\u3064\u3082\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u91cd\u306d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3057\u3001\u3055\u3089\u306b\u30e1\u30a4\u30f3\u30c1\u30fc\u30e0\u306b\u6d41\u3059\u524d\u306b\u82f1\u8a9e\u306e\u5909\u63db\u3082\u3057\u3066\u3044\u305f\u5206\u3067\u3082\u5e7e\u3064\u3082\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u91cd\u306d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u6700\u7d42\u7684\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u306f53\u3067\u3059w\n\u305d\u308c\u3067\u3082\u9014\u4e2d\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u95a2\u6570\u306e\u30c6\u30b9\u30c8\u3092\u3057\u305f\u5206\u304c\u3042\u308b\u306e\u3067\u5c11\u3005\u30d0\u30fc\u30b8\u30e7\u30f3\u66f4\u65b0\u3092\u6291\u3048\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3060\u3044\u305f\u3044\u672c\u756a\u691c\u8a3c\u3057\u3066\u3044\u305f\u308a\u3057\u3087\u3046\u3082\u306a\u3044\u30df\u30b9\u3057\u3066\u3044\u305f\u308a\u3067\u305d\u3093\u306a\u6570\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u307e\u3068\u3081\n\nSlack\u306eOutgoing WebHooks\u53d7\u4fe1\u30e1\u30bd\u30c3\u30c9\u306fdoPost\u304c\u6b63\u89e3 \n\u9023\u643a\u3059\u308b\u3068\u304d\u30ab\u30ec\u30f3\u30c0\u30fc\u3054\u3068\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u4f5c\u3063\u305f\u65b9\u304c\u826f\u3044\nAttachments\u306fOutgoing\u3055\u308c\u306a\u3044\nchannel.history\u306foldest\u3084latest\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\n\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u307e\u3068\u3081\u306f\u901a\u5e38\u306e\u3082\u306e\u3068\u5f62\u5f0f\u304c\u7570\u306a\u308b\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u30b3\u30fc\u30c9\u3092\u8a66\u3059\u3068\u826f\u3044\n\n\n\u6700\u5f8c\u306e\u304a\u307e\u3051\n\u82f1\u8a9e\u5909\u63db\u306e\u30b3\u30fc\u30c9\u3092\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\nfunction getMessage(message) {\n  var text = message.text;\n  if(text == null){\n    return null;\n  }\n  text = text.replace(/There are \\*(\\d+)\\* events today:/,\"\u4eca\u65e5\u306f\u4e88\u5b9a\u304c *$1* \u3064\u3042\u308a\u307e\u3059\u3002\");\n  text = text.replace(/There are no events today./, \"\u4eca\u65e5\u4e88\u5b9a\u3055\u308c\u3066\u3044\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u3042\u308a\u307e\u305b\u3093\u3002\");\n  return text;\n}\n\nfunction createAttachments(message) {\n  var attachments = message.attachments;\n  if(attachments == void 0){\n    return null;\n  }\n  for (var n = 0; n < attachments.length; n++) {\n    attachments[n].pretext = getPretext(attachments[n]);\n    attachments[n].fallback = getFallback(attachments[n]);\n  }\n  return JSON.stringify(attachments);\n}\n\nfunction getPretext(attachment) {\n  var pretext = attachment.pretext;\n  switch(pretext){\n    case \"New calendar event created\":\n      return \"\u4e88\u5b9a\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\\n\";\n    case \"Calendar event updated\":\n      return \"\u4e88\u5b9a\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\u3002\\n\";\n    case \"Calendar event was cancelled\":\n      return \"\u4e88\u5b9a\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\\n\";\n    case \"Event starting in 10 minutes:\":\n      return \"\u4e88\u5b9a\u306e10\u5206\u524d\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\";\n    default:\n      return pretext;\n  }\n}\n\nfunction getFallback(attachment) {\n  var fallback = attachment.fallback;\n  fallback = fallback.replace(/Event created: /,\"\u4e88\u5b9a\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\uff1a\");\n  fallback = fallback.replace(/Event updated: /,\"\u4e88\u5b9a\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\uff1a\");\n  fallback = fallback.replace(/Event cancelled: /,\"\u4e88\u5b9a\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\uff1a\");\n  return fallback;\n}\n\n\u8868\u793a\u3055\u308c\u308b\u65e5\u4ed8\u3082\u65e5\u672c\u8a9e\u8868\u8a18\u306b\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u65e5\u4ed8\u304c\u6628\u65e5\u306b\u306a\u3063\u305f\u3089Yesterday\u3068\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u4ed5\u69d8\u3092\u6d3b\u7528\u3057\u3066\u3068\u3044\u3046\u306e\u306f\u7121\u7406\u305d\u3046\u306a\u306e\u3067\u8ae6\u3081\u307e\u3057\u305f\u3002\n\n\np.s.\n\u3053\u306eBOT\u306f\u3068\u3042\u308b\u4eba\u306e\u8a71\u304c\u304d\u3063\u304b\u3051\u3067\u4f5c\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u4eba\u304c\u53cd\u5fdc\u3092\u793a\u3057\u3066\u304f\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u5c11\u3005\u6b8b\u5ff5\u3067\u3059\u30fb\u30fb\u30fb\u3002\n\u73fe\u5728\u304a\u8a66\u3057\u3067\u4e00\u90e8\u306e\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u5185\u5bb9\u3092\u3068\u3042\u308b\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u6d41\u3057\u3066\u3044\u3066\u3001\u305d\u306e\u3053\u3068\u3092#general\u306b\u66f8\u3044\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u79c1\u4ee5\u5916\u8ab0\u3082join\u3057\u3066\u306a\u3044\u3067\u3059w\n\u79c1\u81ea\u8eab\u305d\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u307b\u3068\u3093\u3069\u4e0d\u8981\u306a\u306e\u3067\u3059\u304c\u3001\u79c1\u304cjoin\u3057\u306a\u304f\u306a\u3063\u305f\u3089\u5fd8\u308c\u53bb\u3089\u308c\u308b\u3060\u3051\u306b\u306a\u308a\u305d\u3046\u306a\u306e\u3067\u3057\u3070\u3089\u304f\u53d7\u4fe1\u3057\u7d9a\u3051\u307e\u3059\u3002\n\u904a\u3073\u7cfbBOT\u304c\u6d41\u884c\u3089\u306a\u304b\u3063\u305f\u308a\u5468\u308a\u306b\u3042\u307e\u308aBOT\u4f5c\u3063\u3066\u3044\u308b\u4eba\u304c\u3044\u306a\u304b\u3063\u305f\u308a\u3067\u3001\u30c1\u30fc\u30e0\u5185\u3067\u306f\u3044\u307e\u3044\u3061BOT\u306b\u8208\u5473\u3092\u6301\u305f\u308c\u3066\u3044\u306a\u3044\u6c17\u3082\u3057\u307e\u3059\u30fb\u30fb\u30fb\u3002\n# \u306f\u3058\u3081\u306b\n>- Google Calender\u306e\u5185\u5bb9\u3092Slack\u306b\u901a\u77e5\u3057\u305f\u3044\u3002\n- \u3051\u3069Slack\u306b\u305d\u306e\u9023\u643a\u3092\u8ffd\u52a0\u3059\u308b\u4f59\u88d5\u304c\u306a\u3044\u30fb\u30fb\u30fb\u3002\n    - (Slack\u306f\u7121\u6599\u7248\u3060\u3068Apps\u3084Integration\u306f10\u7a2e\u985e\u307e\u3067\u306a\u306e\u3067\u30fb\u30fb\u30fb\u3002)\n\n\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u6700\u521d\u306f\u76f4\u63a5Google Calender API\u3092\u53e9\u304f\u3053\u3068\u3082\u8003\u3048\u307e\u3057\u305f\u304c\u300110\u5206\u524d\u306b\u901a\u77e5\u306a\u3093\u3066\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u8ae6\u3081\u3088\u3046\u304b\u3068\u601d\u3063\u3066\u3044\u305f\u3068\u3053\u308d\u3001\u30c1\u30fc\u30e0\u3092\u3082\u3046\u4e00\u3064\u4f5c\u3063\u3066Outgoing WebHooks\u3092\u7528\u3044\u3066\u666e\u6bb5\u4f7f\u3063\u3066\u3044\u308bSlack\u306b\u901a\u77e5\u3067\u304d\u306a\u3044\u304b\uff1f\u3068\u8003\u3048\u307e\u3057\u305f\u3002\n\u305d\u3093\u306a\u3053\u3068\u3057\u305f\u3044\u4eba\u304c\u4ed6\u306b\u3044\u308b\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u5b9f\u73fe\u3055\u305b\u308b\u307e\u3067\u3092\u79c1\u304c\u3064\u307e\u3065\u3044\u305f\u70b9\u3092\u4e2d\u5fc3\u306b\u8a18\u4e8b\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u3053\u3046\u3044\u3046\u4eba\u306b\u5f79\u7acb\u3064\u304b\u3082\uff1f\n1. \u5225\u30c1\u30fc\u30e0\u3067\u9023\u643a\u3057\u305fGoogle Calender\u306e\u5185\u5bb9\u3092Slack\u306b\u901a\u77e5\u3057\u305f\u3044\n2. \u3068\u3042\u308b\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9010\u6b21\u51e6\u7406\u3057\u305f\u3044\n3. \u9023\u643a\u3057\u305fGoogle Calender\u304c\u6295\u7a3f\u3059\u308b\u5185\u5bb9\u3092\u77e5\u308a\u305f\u3044\n\n<hr>\n\n# \u30dd\u30a4\u30f3\u30c81 Slack\u306eOutgoing WebHooks\u53d7\u4fe1\u30e1\u30bd\u30c3\u30c9\u306fdoPost\u304c\u6b63\u89e3\n[Slack Bot\u3092GAS\u3067\u3044\u3044\u611f\u3058\u3067\u66f8\u304f\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u305f - Qiita](http://qiita.com/soundTricker/items/43267609a870fc9c7453)\n\u306b`doGet`\u3068\u3042\u3063\u305f\u306e\u3067\u305d\u308c\u3067\u4f5c\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u5168\u304f\u53cd\u5fdc\u3092\u898b\u305b\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u7d4c\u9a13\u8005\u304c\u3044\u305f\u306e\u3067\u805e\u3044\u305f\u3089**`doPost`\u3067\u3084\u3063\u3066\u307e\u3057\u305f\u3002**\n\u8a18\u4e8b\u304c\u66f8\u304b\u308c\u305f\u5f53\u6642\u3068\u306e\u4ed5\u69d8\u5909\u66f4\u306e\u7dda\u3082\u5426\u5b9a\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u79c1\u306f\u305d\u306e\u4eba\u306b\u805e\u304f\u307e\u3067\u6570\u6642\u9593\u306e\u9593\u60a9\u3093\u3067\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n# \u30dd\u30a4\u30f3\u30c82 \u9023\u643a\u3059\u308b\u3068\u304d\u30ab\u30ec\u30f3\u30c0\u30fc\u3054\u3068\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u4f5c\u3063\u305f\u65b9\u304c\u826f\u3044<br>\u30dd\u30a4\u30f3\u30c83 Attachments\u306fOutgoing\u3055\u308c\u306a\u3044\nSlack\u306b\u6295\u7a3f\u3055\u308c\u305f\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u30a4\u30d9\u30f3\u30c8(\u4f5c\u6210\u30fb\u5909\u66f4\u306a\u3069\u8a2d\u5b9a\u3057\u305f\u3082\u306e)\u304cOutgoing\u3055\u308c\u308b\u3068\u6b21\u306e\u3088\u3046\u306a\u5185\u5bb9\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\n\n\uff0a\u3053\u3061\u3089\u306f\u30c6\u30b9\u30c8\u6642\u306e\u78ba\u8a8d\u7528\u306bJSON.stringify()\u3057\u305f\u3082\u3092\u52a0\u5de5\u3057\u3066\u3044\u307e\u3059\u3001\u5b9f\u969b\u306fJS\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3059\n\n```json\n{\n  \"parameter\":{\n    \"channel_name\":\"\u30c1\u30e3\u30f3\u30cd\u30eb\u540d\",\n    \"bot_name\":\"\",\n    \"user_id\":\"USLACKBOT\",\n    \"user_name\":\"slackbot\",\n    \"service_id\":\"\u30b5\u30fc\u30d3\u30b9ID\",\n    \"team_domain\":\"\u30c1\u30fc\u30e0\u540d\",\n    \"team_id\":\"\u30c1\u30fc\u30e0ID\",\n    \"text\":\"\",\n    \"channel_id\":\"C1RKZDVGB\",\n    \"bot_id\":\"B1RMK8B6Z\",\n    \"token\":\"DvFLGzgSn6pVz7NF4L9pYgro\",\n    \"timestamp\":\"1468578010.000070\"\n  },\n  \"contextPath\":\"\",\n  \"contentLength\":231,\n  \"queryString\":null,\n  \"parameters\":{\n    \"channel_name\":[\"\u30c1\u30e3\u30f3\u30cd\u30eb\u540d\"],\n    \"bot_name\":[\"\"],\n    \"user_id\":[\"USLACKBOT\"],\n    \"user_name\":[\"slackbot\"],\n    \"service_id\":[\"\u30b5\u30fc\u30d3\u30b9ID\"],\n    \"team_domain\":[\"\u30c1\u30fc\u30e0\u540d\"],\n    \"team_id\":[\"\u30c1\u30fc\u30e0ID\"],\n    \"text\":[\"\"],\n    \"channel_id\":[\"\u30c1\u30e3\u30f3\u30cd\u30ebID\"],\n    \"bot_id\":[\"BotID\"],\n    \"token\":[\"Outgoing WebHooks\u306e\u30c8\u30fc\u30af\u30f3\"],\n    \"timestamp\":[\"1468578010.000070\"]\n  },\n  \"postData\":{\n    \"type\":\"application/x-www-form-urlencoded\",\n    \"length\":231,\n    \"contents\":\"token=Outgoing WebHooks\u306e\u30c8\u30fc\u30af\u30f3&team_id=\u30c1\u30fc\u30e0ID&team_domain=\u30c1\u30fc\u30e0\u540d&service_id=\u30b5\u30fc\u30d3\u30b9ID&channel_id=\u30c1\u30e3\u30f3\u30cd\u30ebID&channel_name=\u30c1\u30e3\u30f3\u30cd\u30eb\u540d&timestamp=1468578010.000070&user_id=USLACKBOT&user_name=slackbot&text=&bot_id=BotID&bot_name=\",\n    \"name\":\"postData\"\n  }\n}\n```\n\n\u898b\u3066\u5206\u304b\u308a\u307e\u3059\u3067\u3057\u3087\u3046\u304b\uff1f\n\u30ab\u30ec\u30f3\u30c0\u30fc\u9023\u643a\u3059\u308b\u3068`\u6295\u7a3f\u306e\u540d\u524d\uff1d\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u540d\u524d`\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3092Outgoing\u3059\u308b\u3068`SlackBot`\u6271\u3044\u306b\u306a\u308a\u307e\u3059\u3002\n\u3068\u308a\u3042\u3048\u305a3\u3064\u306e\u30ab\u30ec\u30f3\u30c0\u30fc\u30921\u3064\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u9023\u643a\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u3044\u3056Outgoing\u3055\u308c\u308b\u3068\u305d\u308c\u304c\u3069\u306e\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u3082\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u306a\u306e\u3067\u3001**\u30ab\u30ec\u30f3\u30c0\u30fc\u3054\u3068\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u5206\u3051\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\u3002**\n\n\u307e\u305f\u3001\u30ab\u30ec\u30f3\u30c0\u30fc\u306b\u95a2\u3059\u308b\u30a4\u30d9\u30f3\u30c8(\u4f5c\u6210\u3084\u66f4\u65b0\u306a\u3069\u8a2d\u5b9a\u3057\u305f\u3082\u306e)\u306e\u60c5\u5831\u304c\u4e00\u5207\u3042\u308a\u307e\u305b\u3093\u3002\n\u306a\u305c\u306a\u3089\u3042\u306e\u60c5\u5831\u306fAttachment\u3067\u3042\u308a\u3001**Outgoing WebHooks\u3067\u306fAttachments\u306f\u542b\u307e\u308c\u306a\u3044\u4ed5\u69d8\u3067\u3059\u3002**\n>Please note that the content of message attachments will not be included in the outgoing POST data.\n\n(\u9069\u5f53\u8a33\uff1a\u30e1\u30c3\u30bb\u30fc\u30b8\u306eattachments\u306fOutgoing WebHooks\u3067\u9001\u4fe1\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306b\u306f\u542b\u307e\u308c\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002)\n\u53c2\u8003\uff1a[Outgoing Webhooks | Slack](https://api.slack.com/outgoing-webhooks)\n\n\u306a\u306e\u3067\u3001channel.history\u3092\u7528\u3044\u3066\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n# \u30dd\u30a4\u30f3\u30c84 channel.history\u306foldest\u3084latest\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\n\u30d4\u30f3\u30dd\u30a4\u30f3\u30c8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6b32\u3057\u304b\u3063\u305f\u306e\u3067\u6700\u521d\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u306e\u6307\u5b9a\u306foldest\u3082latest\u3082\u540c\u3058\u304fOutgoing WebHooks\u3067\u5f97\u3089\u308c\u305f\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3067\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n[channels.history\u306e\u30c6\u30b9\u30c8\u30da\u30fc\u30b8](https://api.slack.com/methods/channels.history/test)\u3067\u30c6\u30b9\u30c8\u3057\u305f\u3068\u3053\u308d\u3001channel.history\u306foldest\u3084latest\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u3064\u307e\u308a\u3001**\u30d4\u30f3\u30dd\u30a4\u30f3\u30c8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u306b\u305d\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u524d\u5f8c\u306b\u305a\u3089\u3057\u305f\u3082\u306e\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002**\n\noldest\u3084latest\u306e\u8a08\u7b97\u30b3\u30fc\u30c9\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n```js\nvar timestamp = Number(e.parameter.timestamp)*1000000;\nvar oldest = String((timestamp - 1)/1000000);\nif(oldest.length < 17){\n  oldest += \"0\";\n}\nvar latest = String((timestamp + 1)/1000000);\nif(latest.length < 17){\n  latest += \"0\";\n}\n```\n\n\u8db3\u3057\u7b97\u306e\u524d\u5f8c\u3067\u540c\u3058\u6570\u304b\u3051\u3066\u5272\u308b\u306e\u306f\u8a08\u7b97\u8aa4\u5dee\u3092\u9632\u3050\u305f\u3081\u3067\u3059\u3002\n**\u6841\u6570\u304c\u91cd\u8981**\u3089\u3057\u304f\u3001**\u5fc5\u8981\u306b\u5fdc\u3058\u30660\u30d1\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u306a\u3044\u3068\u30d4\u30f3\u30dd\u30a4\u30f3\u30c8\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u308a\u4f55\u3082\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002**\n\u3082\u3057\u304b\u3057\u305f\u3089\u5185\u90e8\u3067\u3082\u7d50\u5c40\u639b\u3051\u7b97\u3057\u3066\u5c0f\u6570\u3092\u6574\u6570\u306b\u3057\u3066\u3044\u305f\u308a\u3059\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n(\u3067\u306a\u3044\u3068\u5c0f\u6570\u306e\u6700\u5f8c\u306b0\u3064\u3051\u308b\u610f\u5473\u304c\u30fb\u30fb\u30fb\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u6570\u5024\u3067\u306f\u306a\u304f\u3066\u6587\u5b57\u5217\u6271\u3044\u3068\u304b\uff1f)\n\n# \u30dd\u30a4\u30f3\u30c85 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u307e\u3068\u3081\u306f\u901a\u5e38\u306e\u3082\u306e\u3068\u5f62\u5f0f\u304c\u7570\u306a\u308b\n\u901a\u5e38\u306f\u5148\u307b\u3069\u66f8\u3044\u305f\u3088\u3046\u306b\u30ab\u30ec\u30f3\u30c0\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u5185\u5bb9\u306fAttachment\u306b\u3042\u3063\u3066\u30c6\u30ad\u30b9\u30c8\u306b\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u3067\u3059\u304c\u3001**\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u307e\u3068\u3081\u3067\u306f(\u300cThere are \u200b*4*\u200b events today:\u300d\u306a\u3069)\u304c\u30c6\u30ad\u30b9\u30c8\u3067\u6295\u7a3f\u3055\u308c\u307e\u3059\u3002**\n\u307e\u305f\u3001**\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306e\u6570\u3060\u3051Attachment\u304c\u3042\u308a\u307e\u3059\u3002**\n\n# \u30dd\u30a4\u30f3\u30c86 \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u30b3\u30fc\u30c9\u3092\u8a66\u3059\u3068\u826f\u3044\n\nGoogle Calender\u30fbOutgoing WebHooks\u30fbGAS\u306e3\u7a2e\u985e\u304c\u7d61\u3080\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u306a\u308b\u305f\u3081\u3001\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092GAS\u3067\u64cd\u4f5c\u3059\u308b\u4ee5\u4e0a\u306b\u30c7\u30d0\u30c3\u30b0\u304c\u9762\u5012\u306a\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u3002\n\u307e\u305a\u66f4\u65b0\u3092\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u53cd\u6620\u3055\u305b\u308b\u306b\u306f\u3044\u3061\u3044\u3061\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u79c1\u306f\u30ab\u30ec\u30f3\u30c0\u30fc\u30a4\u30d9\u30f3\u30c8\u304c\u7121\u4e8bOutgoing\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u3082\u5e7e\u3064\u3082\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u91cd\u306d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3057\u3001\u3055\u3089\u306b\u30e1\u30a4\u30f3\u30c1\u30fc\u30e0\u306b\u6d41\u3059\u524d\u306b\u82f1\u8a9e\u306e\u5909\u63db\u3082\u3057\u3066\u3044\u305f\u5206\u3067\u3082\u5e7e\u3064\u3082\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u91cd\u306d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u6700\u7d42\u7684\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u306f53\u3067\u3059w\n\u305d\u308c\u3067\u3082\u9014\u4e2d\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u95a2\u6570\u306e\u30c6\u30b9\u30c8\u3092\u3057\u305f\u5206\u304c\u3042\u308b\u306e\u3067\u5c11\u3005\u30d0\u30fc\u30b8\u30e7\u30f3\u66f4\u65b0\u3092\u6291\u3048\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3060\u3044\u305f\u3044\u672c\u756a\u691c\u8a3c\u3057\u3066\u3044\u305f\u308a\u3057\u3087\u3046\u3082\u306a\u3044\u30df\u30b9\u3057\u3066\u3044\u305f\u308a\u3067\u305d\u3093\u306a\u6570\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n# \u307e\u3068\u3081\n1. Slack\u306eOutgoing WebHooks\u53d7\u4fe1\u30e1\u30bd\u30c3\u30c9\u306fdoPost\u304c\u6b63\u89e3 \n2. \u9023\u643a\u3059\u308b\u3068\u304d\u30ab\u30ec\u30f3\u30c0\u30fc\u3054\u3068\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u4f5c\u3063\u305f\u65b9\u304c\u826f\u3044\n3. Attachments\u306fOutgoing\u3055\u308c\u306a\u3044\n4. channel.history\u306foldest\u3084latest\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\n5. \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u307e\u3068\u3081\u306f\u901a\u5e38\u306e\u3082\u306e\u3068\u5f62\u5f0f\u304c\u7570\u306a\u308b\n6. \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3067\u30b3\u30fc\u30c9\u3092\u8a66\u3059\u3068\u826f\u3044\n\n# \u6700\u5f8c\u306e\u304a\u307e\u3051\n\u82f1\u8a9e\u5909\u63db\u306e\u30b3\u30fc\u30c9\u3092\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n```js\nfunction getMessage(message) {\n  var text = message.text;\n  if(text == null){\n    return null;\n  }\n  text = text.replace(/There are \\*(\\d+)\\* events today:/,\"\u4eca\u65e5\u306f\u4e88\u5b9a\u304c *$1* \u3064\u3042\u308a\u307e\u3059\u3002\");\n  text = text.replace(/There are no events today./, \"\u4eca\u65e5\u4e88\u5b9a\u3055\u308c\u3066\u3044\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u3042\u308a\u307e\u305b\u3093\u3002\");\n  return text;\n}\n\nfunction createAttachments(message) {\n  var attachments = message.attachments;\n  if(attachments == void 0){\n    return null;\n  }\n  for (var n = 0; n < attachments.length; n++) {\n    attachments[n].pretext = getPretext(attachments[n]);\n    attachments[n].fallback = getFallback(attachments[n]);\n  }\n  return JSON.stringify(attachments);\n}\n\nfunction getPretext(attachment) {\n  var pretext = attachment.pretext;\n  switch(pretext){\n    case \"New calendar event created\":\n      return \"\u4e88\u5b9a\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\\n\";\n    case \"Calendar event updated\":\n      return \"\u4e88\u5b9a\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\u3002\\n\";\n    case \"Calendar event was cancelled\":\n      return \"\u4e88\u5b9a\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\\n\";\n    case \"Event starting in 10 minutes:\":\n      return \"\u4e88\u5b9a\u306e10\u5206\u524d\u306b\u306a\u308a\u307e\u3057\u305f\u3002\\n\";\n    default:\n      return pretext;\n  }\n}\n\nfunction getFallback(attachment) {\n  var fallback = attachment.fallback;\n  fallback = fallback.replace(/Event created: /,\"\u4e88\u5b9a\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\uff1a\");\n  fallback = fallback.replace(/Event updated: /,\"\u4e88\u5b9a\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\uff1a\");\n  fallback = fallback.replace(/Event cancelled: /,\"\u4e88\u5b9a\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\uff1a\");\n  return fallback;\n}\n```\n\n\u8868\u793a\u3055\u308c\u308b\u65e5\u4ed8\u3082\u65e5\u672c\u8a9e\u8868\u8a18\u306b\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u65e5\u4ed8\u304c\u6628\u65e5\u306b\u306a\u3063\u305f\u3089Yesterday\u3068\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u4ed5\u69d8\u3092\u6d3b\u7528\u3057\u3066\u3068\u3044\u3046\u306e\u306f\u7121\u7406\u305d\u3046\u306a\u306e\u3067\u8ae6\u3081\u307e\u3057\u305f\u3002\n<hr>\n# p.s.\n\u3053\u306eBOT\u306f\u3068\u3042\u308b\u4eba\u306e\u8a71\u304c\u304d\u3063\u304b\u3051\u3067\u4f5c\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u4eba\u304c\u53cd\u5fdc\u3092\u793a\u3057\u3066\u304f\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u5c11\u3005\u6b8b\u5ff5\u3067\u3059\u30fb\u30fb\u30fb\u3002\n\u73fe\u5728\u304a\u8a66\u3057\u3067\u4e00\u90e8\u306e\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u5185\u5bb9\u3092\u3068\u3042\u308b\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u6d41\u3057\u3066\u3044\u3066\u3001\u305d\u306e\u3053\u3068\u3092#general\u306b\u66f8\u3044\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u79c1\u4ee5\u5916\u8ab0\u3082join\u3057\u3066\u306a\u3044\u3067\u3059w\n\u79c1\u81ea\u8eab\u305d\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u307b\u3068\u3093\u3069\u4e0d\u8981\u306a\u306e\u3067\u3059\u304c\u3001\u79c1\u304cjoin\u3057\u306a\u304f\u306a\u3063\u305f\u3089\u5fd8\u308c\u53bb\u3089\u308c\u308b\u3060\u3051\u306b\u306a\u308a\u305d\u3046\u306a\u306e\u3067\u3057\u3070\u3089\u304f\u53d7\u4fe1\u3057\u7d9a\u3051\u307e\u3059\u3002\n\n\u904a\u3073\u7cfbBOT\u304c\u6d41\u884c\u3089\u306a\u304b\u3063\u305f\u308a\u5468\u308a\u306b\u3042\u307e\u308aBOT\u4f5c\u3063\u3066\u3044\u308b\u4eba\u304c\u3044\u306a\u304b\u3063\u305f\u308a\u3067\u3001\u30c1\u30fc\u30e0\u5185\u3067\u306f\u3044\u307e\u3044\u3061BOT\u306b\u8208\u5473\u3092\u6301\u305f\u308c\u3066\u3044\u306a\u3044\u6c17\u3082\u3057\u307e\u3059\u30fb\u30fb\u30fb\u3002\n", "tags": ["Slack", "slackbot", "GoogleAppsScript", "GoogleCalendar"]}