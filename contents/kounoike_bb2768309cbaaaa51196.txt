{"context": " More than 1 year has passed since last update.\n\n\u524d\u63d0\n\nHubot \u306e\u8a2d\u5b9a\u304c\u3067\u304d\u3066\u3044\u308b\u3053\u3068\nJenkins \u306e\u8a2d\u5b9a\u304c\u3067\u304d\u3066\u3044\u308b\u3053\u3068\nJenkins \u3068 Hubot \u306f\u540c\u4e00\u30db\u30b9\u30c8\u3067\u52d5\u3044\u3066\u308b\u3082\u306e\u3068\u3059\u308b\uff08\u5225\u30db\u30b9\u30c8\u306b\u3059\u308b\u306e\u3082\u5927\u3057\u3066\u624b\u9806\u306f\u5909\u308f\u3089\u306a\u3044\u306f\u305a\uff09\n\n\n\u6e96\u5099\n\nJenkins \u30d7\u30e9\u30b0\u30a4\u30f3\nWeb \u7ba1\u7406\u753b\u9762\u304b\u3089 Jenkins \u306e Notification Plugin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3002\n\nHubot \u306e hubot-jenkins-notifier\nnpm install --save hubot-jenkins-notifier \u3067 https://www.npmjs.com/package/hubot-jenkins-notifier \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\nexternal-scripts.json\n[\n  \"hubot-jenkins-notifier\"\n]\n\n\n\n\u8a2d\u5b9a\n\nHubot \u306e\u8a2d\u5b9a\nPORT \u74b0\u5883\u5909\u6570\u3067 5080 \u30dd\u30fc\u30c8\u3067 HTTP \u306e\u5f85\u3061\u53d7\u3051\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\uff08Jenkins \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u7af6\u5408\u3059\u308b\u305f\u3081\uff09\n\nJob \u306e\u8a2d\u5b9a\nNotification Plugin \u3092\u5165\u308c\u308b\u3068\u3001\u30b8\u30e7\u30d6\u8a2d\u5b9a\u306e\u6700\u521d\u306e\u65b9\u306b Notification \u306e\u8a2d\u5b9a\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\uff08\u6700\u521d\u306f\u30d3\u30eb\u30c9\u5f8c\u306e\u51e6\u7406\u304b\u3068\u601d\u3063\u3066\u898b\u3064\u304b\u3089\u305a\u306b\u30d1\u30cb\u30af\u3063\u3066\u307e\u3057\u305f\uff09\nAdd Endpoint \u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\n\nFormat: JSON\nProtocol: HTTP\nEvent: Job Finalized\nURL: http://localhost:5080/hubot/jenkins-notify?room=&notstrat=FS\nTimeout: 30000 \u306f\u9577\u3044\u306e\u3067 10000 \u306b\u3057\u3066\u304a\u3044\u3066\u307f\u308b\nLog: 0 1\n\n\n\u306a\u3093\u304b\u3001Log\u306b0\u3092\u5165\u308c\u3066\u3044\u308b\u3068\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3067\u3059\u3002\nroom_id \u306f\u4f8b\u306b\u3088\u3063\u3066\u30a2\u30c0\u30d7\u30bf\u4f9d\u5b58\u306a\u306e\u3067\u9069\u5f53\u306b\u3002notstrat \u306f@IT\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3002\nLog \u30d1\u30e9\u30e1\u30fc\u30bf\u3067 Webhook \u306b\u5bfe\u3057\u3066\u30d3\u30eb\u30c9\u30ed\u30b0\u3092\u9001\u4fe1\u3067\u304d\u308b\u3063\u307d\u3044\u306e\u3060\u304c\u3001Hubot \u306e hubot-jenkins-notifier \u304c\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u69d8\u5b50\u3002\nhubot-jenkins\u3092\u5165\u308c\u308b\u3068 Hubot \u306b\u547d\u4ee4\u3057\u3066 Jenkins \u306e\u30b8\u30e7\u30d6\u5b9f\u884c\u3068\u304b\u3082\u3067\u304d\u308b\u307f\u305f\u3044\u3060\u3051\u3069\u3001\u305d\u308c\u306f\u4eca\u56de\u306f\u898b\u9001\u308a\u3068\u3057\u3088\u3046\u304b\u306a\u30fb\u30fb\u30fb\n\n\u8ffd\u8a18\uff1aLet's Chat \u306e\u7d75\u6587\u5b57\u3092\u4f7f\u3063\u3066\u898b\u3084\u3059\u304f\u3059\u308b\n\u305d\u306e\u307e\u307e\u3060\u3068\u300cbuild #1 succeeded:\u300d\u3068\u304b\u300c#2 started failing:\u300d\u3068\u304b\u3057\u304b\u8a00\u3063\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3071\u3063\u3068\u898b\u306b\u5206\u304b\u308a\u306b\u304f\u3044\u3002\u305d\u3053\u3067\u3001\u7d75\u6587\u5b57\u4e00\u89a7\u306e\u4e2d\u304b\u3089\u9752\u4e38\u3068\u8d64\u4e38\u3092\u4f7f\u3063\u3066\u4e00\u76ee\u77ad\u7136\u3068\u306a\u308b\u3088\u3046\u306b\u6539\u9020\u3057\u3066\u307f\u3088\u3046\u3002\n\nnode_modules/hubot-jenkins-notifier/src/scripts/hubot-jenkins-notifier.coffee\n    if data.build.phase in ['FINISHED', 'FINALIZED']\n      if data.build.status == 'FAILURE'\n        if data.name in @failing\n          build = \"is still\"\n        else\n          build = \"started\"\n        @robot.send envelope, \":red_circle: #{data.name} build ##{data.build.number} #{build} failing: #{fullurl}\" if @shouldNotify(envelope.notstrat, data)\n        @failing.push data.name unless data.name in @failing\n      if data.build.status == 'SUCCESS'\n        if data.name in @failing\n          build = \"was restored\"\n        else\n          build = \"succeeded\"\n        @robot.send envelope, \":large_blue_circle: #{data.name} build ##{data.build.number} #{build}: #{fullurl}\"  if @shouldNotify(envelope.notstrat, data)\n        index = @failing.indexOf data.name\n        @failing.splice index, 1 if index isnt -1\n\n\n\u5fc5\u8981\u306a\u3068\u3053\u308d\u306b:red_circle:\u3068:large_blue_circle:\u3092\u8db3\u3057\u305f\u3060\u3051\u3002\u3053\u308c\u3060\u3051\u3067\u305a\u3044\u3076\u3093\u898b\u3084\u3059\u304f\u306a\u308b\u3002\n# \u524d\u63d0\n\n* Hubot \u306e\u8a2d\u5b9a\u304c\u3067\u304d\u3066\u3044\u308b\u3053\u3068\n* Jenkins \u306e\u8a2d\u5b9a\u304c\u3067\u304d\u3066\u3044\u308b\u3053\u3068\n* Jenkins \u3068 Hubot \u306f\u540c\u4e00\u30db\u30b9\u30c8\u3067\u52d5\u3044\u3066\u308b\u3082\u306e\u3068\u3059\u308b\uff08\u5225\u30db\u30b9\u30c8\u306b\u3059\u308b\u306e\u3082\u5927\u3057\u3066\u624b\u9806\u306f\u5909\u308f\u3089\u306a\u3044\u306f\u305a\uff09\n\n# \u6e96\u5099\n\n## Jenkins \u30d7\u30e9\u30b0\u30a4\u30f3\n\nWeb \u7ba1\u7406\u753b\u9762\u304b\u3089 Jenkins \u306e Notification Plugin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3002\n\n## Hubot \u306e hubot-jenkins-notifier\n\n`npm install --save hubot-jenkins-notifier` \u3067 https://www.npmjs.com/package/hubot-jenkins-notifier \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```json:external-scripts.json\n[\n  \"hubot-jenkins-notifier\"\n]\n```\n\n# \u8a2d\u5b9a\n\n## Hubot \u306e\u8a2d\u5b9a\n\nPORT \u74b0\u5883\u5909\u6570\u3067 5080 \u30dd\u30fc\u30c8\u3067 HTTP \u306e\u5f85\u3061\u53d7\u3051\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\uff08Jenkins \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u7af6\u5408\u3059\u308b\u305f\u3081\uff09\n\n## Job \u306e\u8a2d\u5b9a\n\nNotification Plugin \u3092\u5165\u308c\u308b\u3068\u3001\u30b8\u30e7\u30d6\u8a2d\u5b9a\u306e\u6700\u521d\u306e\u65b9\u306b Notification \u306e\u8a2d\u5b9a\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\uff08\u6700\u521d\u306f\u30d3\u30eb\u30c9\u5f8c\u306e\u51e6\u7406\u304b\u3068\u601d\u3063\u3066\u898b\u3064\u304b\u3089\u305a\u306b\u30d1\u30cb\u30af\u3063\u3066\u307e\u3057\u305f\uff09\n\nAdd Endpoint \u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\n\n* Format: JSON\n* Protocol: HTTP\n* Event: Job Finalized\n* URL: http://localhost:5080/hubot/jenkins-notify?room=<room_id>&notstrat=FS\n* Timeout: 30000 \u306f\u9577\u3044\u306e\u3067 10000 \u306b\u3057\u3066\u304a\u3044\u3066\u307f\u308b\n* Log: ~~0~~ **1**\n\n**\u306a\u3093\u304b\u3001Log\u306b0\u3092\u5165\u308c\u3066\u3044\u308b\u3068\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3067\u3059\u3002**\n\nroom_id \u306f\u4f8b\u306b\u3088\u3063\u3066\u30a2\u30c0\u30d7\u30bf\u4f9d\u5b58\u306a\u306e\u3067\u9069\u5f53\u306b\u3002notstrat \u306f[@IT\u306e\u8a18\u4e8b](http://www.atmarkit.co.jp/ait/articles/1412/12/news030_3.html)\u3092\u53c2\u8003\u306b\u3002\n\nLog \u30d1\u30e9\u30e1\u30fc\u30bf\u3067 Webhook \u306b\u5bfe\u3057\u3066\u30d3\u30eb\u30c9\u30ed\u30b0\u3092\u9001\u4fe1\u3067\u304d\u308b\u3063\u307d\u3044\u306e\u3060\u304c\u3001Hubot \u306e hubot-jenkins-notifier \u304c\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u69d8\u5b50\u3002\n\nhubot-jenkins\u3092\u5165\u308c\u308b\u3068 Hubot \u306b\u547d\u4ee4\u3057\u3066 Jenkins \u306e\u30b8\u30e7\u30d6\u5b9f\u884c\u3068\u304b\u3082\u3067\u304d\u308b\u307f\u305f\u3044\u3060\u3051\u3069\u3001\u305d\u308c\u306f\u4eca\u56de\u306f\u898b\u9001\u308a\u3068\u3057\u3088\u3046\u304b\u306a\u30fb\u30fb\u30fb\n\n\n# \u8ffd\u8a18\uff1aLet's Chat \u306e\u7d75\u6587\u5b57\u3092\u4f7f\u3063\u3066\u898b\u3084\u3059\u304f\u3059\u308b\n\n\u305d\u306e\u307e\u307e\u3060\u3068\u300cbuild #1 succeeded:\u300d\u3068\u304b\u300c#2 started failing:\u300d\u3068\u304b\u3057\u304b\u8a00\u3063\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3071\u3063\u3068\u898b\u306b\u5206\u304b\u308a\u306b\u304f\u3044\u3002\u305d\u3053\u3067\u3001[\u7d75\u6587\u5b57\u4e00\u89a7](http://www.emoji-cheat-sheet.com/)\u306e\u4e2d\u304b\u3089\u9752\u4e38\u3068\u8d64\u4e38\u3092\u4f7f\u3063\u3066\u4e00\u76ee\u77ad\u7136\u3068\u306a\u308b\u3088\u3046\u306b\u6539\u9020\u3057\u3066\u307f\u3088\u3046\u3002\n\n```coffeescript:node_modules/hubot-jenkins-notifier/src/scripts/hubot-jenkins-notifier.coffee\n    if data.build.phase in ['FINISHED', 'FINALIZED']\n      if data.build.status == 'FAILURE'\n        if data.name in @failing\n          build = \"is still\"\n        else\n          build = \"started\"\n        @robot.send envelope, \":red_circle: #{data.name} build ##{data.build.number} #{build} failing: #{fullurl}\" if @shouldNotify(envelope.notstrat, data)\n        @failing.push data.name unless data.name in @failing\n      if data.build.status == 'SUCCESS'\n        if data.name in @failing\n          build = \"was restored\"\n        else\n          build = \"succeeded\"\n        @robot.send envelope, \":large_blue_circle: #{data.name} build ##{data.build.number} #{build}: #{fullurl}\"  if @shouldNotify(envelope.notstrat, data)\n        index = @failing.indexOf data.name\n        @failing.splice index, 1 if index isnt -1\n```\n\n\u5fc5\u8981\u306a\u3068\u3053\u308d\u306b`:red_circle:`\u3068`:large_blue_circle:`\u3092\u8db3\u3057\u305f\u3060\u3051\u3002\u3053\u308c\u3060\u3051\u3067\u305a\u3044\u3076\u3093\u898b\u3084\u3059\u304f\u306a\u308b\u3002\n\n\n", "tags": ["Hubot", "Jenkins"]}