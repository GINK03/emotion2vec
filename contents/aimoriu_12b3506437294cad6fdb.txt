{"context": " More than 1 year has passed since last update.\ndb2_import.sh\n# db2_import.sh\n#================================================\n# IFX\u5f62\u5f0f\u3067Export\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092DB2\u3078\u30a4\u30f3\u30dd\u30fc\u30c8\n#================================================\n\n#------------------------------------------------\n# \u74b0\u5883\u8a2d\u5b9a\n#------------------------------------------------\nAIX_USER=\"userid\"\nAIX_PASS=\"password\"\nDB_ID=\"DB_ID\"\nDB_SCHEMA=\"DB_SCHEMA\"\nLOG_FILE=\"/home/username/work/db_import/IMPORT.log\"\nIMPORT_PATH=\"/home/username/work/db_import/data\"\n\n#------------------------------------------------\n# \u958b\u59cb\u30ed\u30b0\u51fa\u529b\n#------------------------------------------------\necho \u51e6\u7406\u958b\u59cb\u6642\u9593\uff1a `date +%Y%m%d%H%M%S`> $LOGFILE\n\n#------------------------------------------------\n# DB2\u3078\u63a5\u7d9a\u3001\u30b9\u30ad\u30fc\u30de\u8a2d\u5b9a\n#------------------------------------------------\ndb2 -vz $LOG_FILE \"CONNECT TO \" $DB_ID \" USER \" $AIX_USER \" USING \" $AIX_PASS\ndb2 -vz $LOG_FILE \"SET CURRENT SCHEMA = \" $DB_SCHEMA\n\n#------------------------------------------------\n# DB2\u3078IFX\u5f62\u5f0f\u30c7\u30fc\u30bfIMPORT\n#------------------------------------------------\ndb2  -vz $LOG_FILE LOAD CLIENT FROM $IMPORT_PATH/TableName.ixf OF IXF REPLACE INTO TableName NONRECOVERABLE INDEXING MODE REBUILD\n\n#------------------------------------------------\n# DB2\u3078\u306e\u63a5\u7d9a\u3092\u5207\u65ad\n#------------------------------------------------\ndb2 -vz $LOG_FILE \"CONNECT RESET\"\n\n#------------------------------------------------\n# \u7d42\u4e86\u30ed\u30b0\u51fa\u529b\n#------------------------------------------------\necho \u51e6\u7406\u7d42\u4e86\u6642\u9593\uff1a `date +%Y%m%d%H%M%S`> $LOGFILE\n\n\n#TRUNCATE \u3068\u540c\u3058\u52b9\u679c\u3067\u3001\u30ed\u30b0\u3092\u8a18\u9332\u305b\u305a\u306b\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3059\u308b\nALTER TABLE \u30c6\u30fc\u30d6\u30eb\u540d ACTIVATE NOT LOGGED INITIALLY WITH EMPTY TABLE;\n\n```sh:db2_import.sh\n# db2_import.sh\n#================================================\n# IFX\u5f62\u5f0f\u3067Export\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092DB2\u3078\u30a4\u30f3\u30dd\u30fc\u30c8\n#================================================\n\n#------------------------------------------------\n# \u74b0\u5883\u8a2d\u5b9a\n#------------------------------------------------\nAIX_USER=\"userid\"\nAIX_PASS=\"password\"\nDB_ID=\"DB_ID\"\nDB_SCHEMA=\"DB_SCHEMA\"\nLOG_FILE=\"/home/username/work/db_import/IMPORT.log\"\nIMPORT_PATH=\"/home/username/work/db_import/data\"\n\n#------------------------------------------------\n# \u958b\u59cb\u30ed\u30b0\u51fa\u529b\n#------------------------------------------------\necho \u51e6\u7406\u958b\u59cb\u6642\u9593\uff1a `date +%Y%m%d%H%M%S`> $LOGFILE\n\n#------------------------------------------------\n# DB2\u3078\u63a5\u7d9a\u3001\u30b9\u30ad\u30fc\u30de\u8a2d\u5b9a\n#------------------------------------------------\ndb2 -vz $LOG_FILE \"CONNECT TO \" $DB_ID \" USER \" $AIX_USER \" USING \" $AIX_PASS\ndb2 -vz $LOG_FILE \"SET CURRENT SCHEMA = \" $DB_SCHEMA\n\n#------------------------------------------------\n# DB2\u3078IFX\u5f62\u5f0f\u30c7\u30fc\u30bfIMPORT\n#------------------------------------------------\ndb2  -vz $LOG_FILE LOAD CLIENT FROM $IMPORT_PATH/TableName.ixf OF IXF REPLACE INTO TableName NONRECOVERABLE INDEXING MODE REBUILD\n\n#------------------------------------------------\n# DB2\u3078\u306e\u63a5\u7d9a\u3092\u5207\u65ad\n#------------------------------------------------\ndb2 -vz $LOG_FILE \"CONNECT RESET\"\n\n#------------------------------------------------\n# \u7d42\u4e86\u30ed\u30b0\u51fa\u529b\n#------------------------------------------------\necho \u51e6\u7406\u7d42\u4e86\u6642\u9593\uff1a `date +%Y%m%d%H%M%S`> $LOGFILE\n```\n\n```sh:\n#TRUNCATE \u3068\u540c\u3058\u52b9\u679c\u3067\u3001\u30ed\u30b0\u3092\u8a18\u9332\u305b\u305a\u306b\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3059\u308b\nALTER TABLE \u30c6\u30fc\u30d6\u30eb\u540d ACTIVATE NOT LOGGED INITIALLY WITH EMPTY TABLE;\n```", "tags": ["db2"]}