{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nBluemix\u306b\u306f\u3001\u30aa\u30f3\u30d7\u30ec\u3084\u4ed6\u30af\u30e9\u30a6\u30c9\u306e\u74b0\u5883\u3068\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e4\u3064\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nCloud Integration\nConnect & Compose\nSecure Gateway\nRocket Mainframe Data\n\n\u4eca\u56de\u306f\u3001Bluemix\u3068\u4ed6\u74b0\u5883\u3068\u306e\u9593\u3067\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30ea\u30f3\u30b0\u3092\u78ba\u7acb\u3057\u3001\u69d8\u3005\u306a\u7a2e\u985e\u306e\u901a\u4fe1\u3092\u6d41\u305b\u308bSecure Gateway\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u56f3\u306e\u3088\u3046\u306b\u3001Liberty for Java\u306e\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3068\u3057\u3066\u3001Secure Gateway\u7d4c\u7531\u3067Bluemix\u5916\u306eLDAP\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n\u691c\u8a3c\u74b0\u5883\nLDAP\u3092\u7a3c\u50cd\u3055\u305b\u308b\u74b0\u5883\u3068\u3057\u3066\u3001Parallels\u4e0a\u306b\u4ee5\u4e0b\u306e2\u3064\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\nSecure Gateway Client\u3092\u7a3c\u50cd\u3055\u305b\u308b\u305f\u3081\u306eCentOS 7\u30b5\u30fc\u30d0\u30fc\n\n\nCentOS 7.1\nDocker 1.8.2\n\n\nLDAP\u3092\u7a3c\u50cd\u3055\u305b\u308b\u305f\u3081\u306eCentOS 6\u30b5\u30fc\u30d0\u30fc\n\n\nCentOS 6.7\nIBM Security Directory Server 6.4\n\n\n\nLDAP\u306b\u306f\u3001\u4ee5\u4e0b\u306e3\u3064\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\nLiberty for Java\u304b\u3089LDAP\u306b\u5bfe\u3057\u3066\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u5834Bind\u30e6\u30fc\u30b6\u30fc\n\n\nuid=binduser,ou=management,o=example.dc=com\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30e6\u30fc\u30b6\u30fc\n\n\nuid=test01,ou=user,o=example,dc=com\nuid=test02,ou=user,o=example,dc=com\n\n\n\n\nSecure Gateway\n\n\u6982\u8981\nSecure Gateway\u306f\u3001Bluemix\u3068\u4ed6\u74b0\u5883\u3068\u306e\u9593\u3092\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30ea\u30f3\u30b0\u306b\u3088\u308a\u63a5\u7d9a\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\nSecure Gateway\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3066\u3001Bluemix\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u4ed6\u74b0\u5883\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\nSecure Gateway\u3067\u4f7f\u7528\u3055\u308c\u308b\u7528\u8a9e\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\nSecure Gateway\u30b5\u30fc\u30d3\u30b9\n\n\nBluemix\u3068\u4ed6\u74b0\u5883\u3068\u306e\u63a5\u7d9a\u3092\u69cb\u6210\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u3053\u3068\u3067\u3059\u3002\n\n\nSecure Gateway Client\n\n\n\u4ed6\u74b0\u5883\u306b\u5c0e\u5165\u3055\u308c\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u306e\u9593\u3067\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30eb\u3092\u78ba\u7acb\u3057\u307e\u3059\u3002\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u304b\u3089\u306e\u901a\u4fe1\u3092\u5b9b\u5148\u306b\u5272\u308a\u632f\u308a\u307e\u3059\u3002\nDocker\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3001Linux/Mac\u7528\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3001DataPower\u306e3\u7a2e\u985e\u304b\u3089\u74b0\u5883\u306b\u5fdc\u3058\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\n\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8/\u30dd\u30fc\u30c8\n\n\nBluemix\u5074\u306b\u3042\u308bSecure Gateway\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002Secure Gateway Client\u3068\u306e\u9593\u3067\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30eb\u3092\u78ba\u7acb\u3057\u307e\u3059\u3002\n\u5b9b\u5148\u3054\u3068\u306b\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\n\n\n\u5b9b\u5148\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3084LDAP\u3001MQ\u306a\u3069\u3001\u63a5\u7d9a\u5148\u74b0\u5883\u306b\u3042\u308b\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u306a\u308a\u307e\u3059\u3002Bluemix\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u63a5\u7d9a\u3057\u305f\u3044\u76f8\u624b\u306e\u3053\u3068\u3067\u3059\u3002\n\n\n\n\n\n\u8a2d\u5b9a\u624b\u9806\n\u30ab\u30bf\u30ed\u30b0\u304b\u3089\u3001\u300c\u7d71\u5408\uff08Integration\uff09\u300d\u30ab\u30c6\u30b4\u30ea\u30fc\u306b\u3042\u308b\u300cSecure Gateway\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001Secure Gateway\u306f\u30011\u3064\u306e\u30b9\u30da\u30fc\u30b9\u306b\u3064\u304d1\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u3057\u304b\u4f5c\u6210\u3067\u304d\u307e\u305b\u3093\u3002\u3059\u3067\u306b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4f5c\u6210\u3055\u308c\u305fSecure Gateway\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u8a2d\u5b9a\u7528\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u521d\u3081\u3066\u306e\u8a2d\u5b9a\u306e\u305f\u3081\u3001\u300c\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u540d\u524d\u306f\u4efb\u610f\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u300cSample\u300d\u3068\u5165\u529b\u3057\u3001\u300c\u63a5\u7d9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u7d9a\u3044\u3066\u3001Secure Gateway Client\u306e\u5c0e\u5165\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u4eca\u56de\u306fDocker\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001\u8868\u793a\u3055\u308c\u3066\u3044\u308bDocker\u30b3\u30de\u30f3\u30c9\u3092\u30b3\u30d4\u30fc\u3057\u3001Docker\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3001\u300cThe Secure Gateway tunnel is connected\u300d\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u6b63\u5e38\u306b\u8d77\u52d5\u3067\u304d\u3066\u3044\u307e\u3059\u3002\nIBM Bluemix Secure Gateway Client Version 1.3.0\n************************************************************************************************\nYou  are running the  IBM Secure  Gateway Client for Bluemix. When you enter the provided docker\ncommand the IBM Secure Gateway Client  for Bluemix automatically downloads as a Docker image and\nis executed on your system/device. This is released under an IBM license. The  license agreement\nfor IBM  Secure Gateway Client for Bluemix is available at the following location:\n\nhttp://www.ibm.com/software/sla/sladb.nsf/lilookup/986C7686F22D4D3585257E13004EA6CB?OpenDocument\n\nYour use of the components of the package and  dependencies constitutes your acceptance  of this\nlicense agreement. If you do  not want to accept the license, immediately quit  the container by\nclosing the  terminal  window or by  entering 'quit' followed by the ENTER key. Then, delete any\npulled Docker image from your device.  \n************************************************************************************************\n\n\n<press enter for the command line>\n[2015-12-06 10:35:54.515] [INFO] Setting log level to INFO\n[2015-12-06 10:36:06.281] [INFO] The Secure Gateway tunnel is connected\n\nDocker\u306e\u8d77\u52d5\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u300c\u5b9b\u5148\u306e\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u63a5\u7d9a\u5148\u3068\u306a\u308bLDAP\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u4efb\u610f\u306e\u540d\u524d\uff08\u3053\u3053\u3067\u306fLDAP\uff09\u3068IP\u30a2\u30c9\u30ec\u30b9\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u3001\u30d7\u30e9\u30b9\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u306f\u3001Secure Gateway Client\u304b\u3089LDAP\u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u5b9b\u5148\u304c\u767b\u9332\u3055\u308c\u307e\u3057\u305f\u3002\u30a4\u30f3\u30d5\u30a9\u30e1\u30fc\u30b7\u30e7\u30f3\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30af\u30e9\u30a6\u30c9\u30fb\u30dd\u30fc\u30c8\u306e\u60c5\u5831\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\n\nSecure Gateway Client\u306eACL\nSecure Gateway Client\u306b\u306fACL\u3092\u8a2d\u5b9a\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308a\u3001Secure Gateway Client\u304b\u3089\u901a\u4fe1\u53ef\u80fd\u306a\u5b9b\u5148\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u5236\u9650\u3067\u304d\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Deny ALL\u3068\u306a\u3063\u3066\u304a\u308a\u3001\u3059\u3079\u3066\u306e\u63a5\u7d9a\u304c\u62d2\u5426\u3055\u308c\u308b\u8a2d\u5b9a\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u307e\u307e\u3067\u306fLDAP\u30b5\u30fc\u30d0\u30fc\u3068\u901a\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\nSecure Gateway Client\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u306eDocker\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u306b\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u3068\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u300cshow acl\u300d\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u300cACL Deny All flag is set to true\u300d\u3068\u8868\u793a\u3055\u308c\u3001Deny All\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\ncli> show acl\n[2015-12-06 10:59:35.914] [INFO] There are no Access Control List entries, the ACL Deny All flag is set to: true\n\nLDAP\u30b5\u30fc\u30d0\u30fc\u3068\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\ncli> acl allow 10.37.129.130:389\ncli> show acl\n--------------------------------------------------------------------------------\n                 -- Secure Gateway Client Access Control List --                \n\n hostname                                       port                      value \n 10.37.129.130                                   389                      Allow \n--------------------------------------------------------------------------------\n\n\n\u30b5\u30f3\u30d7\u30eb\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30a2\u30af\u30bb\u30b9\u6642\u306b\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u3092\u8981\u6c42\u3057\u3001\u305d\u306e\u8a8d\u8a3c\u3067\u4f7f\u7528\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u5358\u7d14\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nSampleService.java\npackage com.example;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.core.Context;\n\n@Path(\"/user\")\npublic class SampeService {\n    @Context\n     public HttpServletRequest request;\n\n    @GET\n    public String getUserName() {\n        return request.getRemoteUser();\n    }\n}\n\n\n\nweb.xml\n\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3092\u8981\u6c42\u3059\u308b\u3088\u3046\u306bweb.xml\u3092\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\nweb.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app id=\"BasicAuthSample\" version=\"3.1\"\n   xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\">\n\n   <display-name>BasicAuthSample</display-name>\n   <servlet>\n      <servlet-name>javax.ws.rs.core.Application</servlet-name>\n   </servlet>\n   <servlet-mapping>\n      <servlet-name>javax.ws.rs.core.Application</servlet-name>\n      <url-pattern>/*</url-pattern>\n   </servlet-mapping>\n\n   <security-constraint>\n      <web-resource-collection>\n         <web-resource-name>index</web-resource-name>\n         <url-pattern>/*</url-pattern>\n      </web-resource-collection>\n      <auth-constraint>\n         <role-name>all</role-name>\n      </auth-constraint>\n      <user-data-constraint>\n         <transport-guarantee>CONFIDENTIAL</transport-guarantee>\n      </user-data-constraint>\n   </security-constraint>\n   <security-role>\n      <role-name>all</role-name>\n   </security-role>\n</web-app>\n\n\n\nBluemix\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u65b9\u6cd5\nLiberty for Java\u304cLDAP\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001Liberty\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308b\u300cserver.xml\u300d\u3092\u7de8\u96c6\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u901a\u5e38\u3001Liberty\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001war\u30d5\u30a1\u30a4\u30eb\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3001Bluemix\u304c\u81ea\u52d5\u3067\u69cb\u6210\u3059\u308bserver.xml\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u3001server.xml\u3092\u72ec\u81ea\u306b\u7de8\u96c6\u3059\u308b\u305f\u3081\u3001war\u30d5\u30a1\u30a4\u30eb\u306b\u52a0\u3048\u3001server.xml\u3082Bluemix\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Bluemix\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u300c\u30b5\u30fc\u30d0\u30fc\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u300d\u3068\u8a18\u8f09\u3055\u308c\u305f\u65b9\u6cd5\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\u3068\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\n\u30b5\u30fc\u30d0\u30fc\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u65b9\u6cd5\u3067\u306f\u3001\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u306b\u3001\u4ee5\u4e0b\u306e\u968e\u5c64\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\u6e96\u5099\u3059\u308b\u3082\u306e\u306fserver.xml\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306ewar\u30d5\u30a1\u30a4\u30eb\u306e2\u7a2e\u985e\u306e\u307f\u3067\u3059\u3002\ndefaultServer/\n  \u2502\n  \u251c\u2500 server.xml\n  \u2502\n  \u2514\u2500 apps/\n       \u2502\n       \u2514\u2500 BasicAuthSample.war\n\n\nserver.xml\u306e\u5185\u5bb9\n\u4f7f\u7528\u3057\u305fserver.xml\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\nLDAP\u8a8d\u8a3c\u306f\u3001\u300cldapRegistry-3.0\u300d\u3068\u547c\u3070\u308c\u308b\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u3092\u6709\u52b9\u306b\u3057\u3001\u300cldapRegistry\u300d\u30bf\u30b0\u306b\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fIBM Security Directory Server\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001ldapType\u3068\u3057\u3066\u300cIBM Tivoli Directory Server\u300d\u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u304c\u3001Microsoft Active Directory\u306a\u3069\u306e\u4ed6\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fb\u30b5\u30fc\u30d0\u30fc\u3082ldapType\u3068\u3057\u3066\u6307\u5b9a\u53ef\u80fd\u3067\u3059\u3002\nSecure Gateway\u306e\u8a2d\u5b9a\u3067\u78ba\u8a8d\u3057\u305f\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u306e\u60c5\u5831\u3092\u300chost\u300d\u306b\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30dd\u30fc\u30c8\u306e\u60c5\u5831\u3092\u300cport\u300d\u306b\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nserver.xml\n<server description=\"new server\">\n  <featureManager>\n    <feature>webProfile-7.0</feature>\n    <feature>ldapRegistry-3.0</feature>\n  </featureManager>\n\n  <ldapRegistry baseDN=\"ou=user,o=example,dc=com\"\n                bindDN=\"uid=binduser,ou=management,o=example,dc=com\" bindPassword=\"{xor}JT4ubm0oLCc=\"\n                host=\"xxxx\" port=\"xxxx\" ldapType=\"IBM Tivoli Directory Server\">\n    <idsFilters userFilter=\"(&amp;(uid=%v)(objectclass=eAccount))\"/>\n  </ldapRegistry>\n\n  <httpEndpoint host=\"*\" httpPort=\"9080\" httpsPort=\"9443\" id=\"defaultHttpEndpoint\"/>\n\n  <webApplication id=\"BasicAuthSample\" location=\"BasicAuthSample.war\" name=\"BasicAuthSample\" contextRoot=\"/\">\n    <application-bnd>\n      <security-role name=\"all\">\n        <special-subject type=\"ALL_AUTHENTICATED_USERS\"></special-subject>\n      </security-role>\n    </application-bnd>\n  </webApplication>\n</server>\n\n\n\nBluemix\u3078\u306e\u30d7\u30c3\u30b7\u30e5\ndefaultServer\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08/work/Bluemix/defaultServer\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u3042\u308c\u3070\u3001/work/Bluemix\uff09\u306b\u79fb\u52d5\u3057\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\uff08<Your_Application_Name>\u3068<Your_Application_Host_Name>\u306e\u5024\u306f\u3001\u307f\u306a\u3055\u3093\u306e\u74b0\u5883\u3067\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3068\u30db\u30b9\u30c8\u540d\u306b\u5408\u308f\u305b\u3066\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff09\ncf push <Your_Application_Name> -n <Your_Application_Host_Name> -m 512m -p defaultServer\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nhttps://<Your_Application_Host_Name>.mybluemix.net/user \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001LDAP\u306b\u767b\u9332\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u8a8d\u8a3c\u306b\u6210\u529f\u3057\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n\n\u6700\u5f8c\u306b\nSecure Gateway\u3092\u5229\u7528\u3057\u3001LDAP\u8a8d\u8a3c\u304c\u3042\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\nWebSphere Liberty\u306e\u8a2d\u5b9a\u306b\u95a2\u3059\u308b\u77e5\u8b58\u304c\u5c11\u3057\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u304c\u3001Secure Gateway\u3092\u69cb\u6210\u3057\u3001web.xml\u3068server.xml\u306e\u8a2d\u5b9a\u3060\u3051\u3067\u8a8d\u8a3c\u3092\u6709\u52b9\u306b\u3059\u308b\u3067\u304d\u307e\u3059\u3002\n\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u69cb\u6210\u3059\u308b\u5834\u5408\u306f\u3001Single Sign On\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u3060\u3051\u3067\u306a\u304f\u3001Secure Gateway\u3092\u5229\u7528\u3057\u305fLDAP\u8a8d\u8a3c\u3082\u9078\u629e\u80a2\u306e1\u3064\u3068\u306a\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u4eca\u56de\u306f\u3001LDAP\u30b5\u30fc\u30d0\u30fc\u3092Parallels\u4e0a\u306b\u69cb\u7bc9\u3057\u3066\u3044\u307e\u3059\u304c\u3001Bluemix\u306eOpenStack VM\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u74b0\u5883\u304c\u5b8c\u7d50\u3057\u307e\u3059\u3002\nSecure Gateway\u306b\u306f\u3001\u901a\u4fe1\u3092\u3088\u308a\u30bb\u30ad\u30e5\u30a2\u306b\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306e\u69cb\u6210\u3067\u306f\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30af\u30e9\u30a6\u30c9\u30fb\u30dd\u30fc\u30c8\u3092\u77e5\u3063\u3066\u3057\u307e\u3048\u3070\u3001Bluemix\u5916\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u3082\u63a5\u7d9a\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u8aad\u3080\u3068\u3001\u30a2\u30af\u30bb\u30b9\u5143\u3082\u5236\u9650\u3067\u304d\u308b\u3088\u3046\u306b\u307f\u3048\u307e\u3059\u306e\u3067\u3001\u6b21\u56de\u306f\u3053\u306e\u6a5f\u80fd\u3092\u8a66\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u306f\u3058\u3081\u306b\nBluemix\u306b\u306f\u3001\u30aa\u30f3\u30d7\u30ec\u3084\u4ed6\u30af\u30e9\u30a6\u30c9\u306e\u74b0\u5883\u3068\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e4\u3064\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n  * Cloud Integration\n  * Connect & Compose\n  * Secure Gateway\n  * Rocket Mainframe Data\n\n\u4eca\u56de\u306f\u3001Bluemix\u3068\u4ed6\u74b0\u5883\u3068\u306e\u9593\u3067\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30ea\u30f3\u30b0\u3092\u78ba\u7acb\u3057\u3001\u69d8\u3005\u306a\u7a2e\u985e\u306e\u901a\u4fe1\u3092\u6d41\u305b\u308bSecure Gateway\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u56f3\u306e\u3088\u3046\u306b\u3001Liberty for Java\u306e\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3068\u3057\u3066\u3001Secure Gateway\u7d4c\u7531\u3067Bluemix\u5916\u306eLDAP\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n![SecureGateway-01.png](https://qiita-image-store.s3.amazonaws.com/0/73397/c3f451cf-5cb6-4fe8-63e5-a407ad4efc02.png \"SecureGateway-01.png\")\n\n\n## \u691c\u8a3c\u74b0\u5883\n\nLDAP\u3092\u7a3c\u50cd\u3055\u305b\u308b\u74b0\u5883\u3068\u3057\u3066\u3001Parallels\u4e0a\u306b\u4ee5\u4e0b\u306e2\u3064\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n * Secure Gateway Client\u3092\u7a3c\u50cd\u3055\u305b\u308b\u305f\u3081\u306eCentOS 7\u30b5\u30fc\u30d0\u30fc\n  * CentOS 7.1\n  * Docker 1.8.2\n * LDAP\u3092\u7a3c\u50cd\u3055\u305b\u308b\u305f\u3081\u306eCentOS 6\u30b5\u30fc\u30d0\u30fc\n  * CentOS 6.7\n  * IBM Security Directory Server 6.4\n\nLDAP\u306b\u306f\u3001\u4ee5\u4e0b\u306e3\u3064\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n * Liberty for Java\u304b\u3089LDAP\u306b\u5bfe\u3057\u3066\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u5834Bind\u30e6\u30fc\u30b6\u30fc\n  * uid=binduser,ou=management,o=example.dc=com\n * \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30e6\u30fc\u30b6\u30fc\n  * uid=test01,ou=user,o=example,dc=com\n  * uid=test02,ou=user,o=example,dc=com\n\n\n# Secure Gateway\n## \u6982\u8981\nSecure Gateway\u306f\u3001Bluemix\u3068\u4ed6\u74b0\u5883\u3068\u306e\u9593\u3092\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30ea\u30f3\u30b0\u306b\u3088\u308a\u63a5\u7d9a\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\nSecure Gateway\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3066\u3001Bluemix\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u4ed6\u74b0\u5883\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\nSecure Gateway\u3067\u4f7f\u7528\u3055\u308c\u308b\u7528\u8a9e\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n * Secure Gateway\u30b5\u30fc\u30d3\u30b9\n  * Bluemix\u3068\u4ed6\u74b0\u5883\u3068\u306e\u63a5\u7d9a\u3092\u69cb\u6210\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u3053\u3068\u3067\u3059\u3002\n * Secure Gateway Client\n  * \u4ed6\u74b0\u5883\u306b\u5c0e\u5165\u3055\u308c\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u306e\u9593\u3067\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30eb\u3092\u78ba\u7acb\u3057\u307e\u3059\u3002\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u304b\u3089\u306e\u901a\u4fe1\u3092\u5b9b\u5148\u306b\u5272\u308a\u632f\u308a\u307e\u3059\u3002\n  * Docker\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3001Linux/Mac\b\u7528\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3001DataPower\u306e3\u7a2e\u985e\u304b\u3089\u74b0\u5883\u306b\u5fdc\u3058\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n * \u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8/\u30dd\u30fc\u30c8\n  * Bluemix\u5074\u306b\u3042\u308bSecure Gateway\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002Secure Gateway Client\u3068\u306e\u9593\u3067\u30bb\u30ad\u30e5\u30a2\u306a\u30c8\u30f3\u30cd\u30eb\u3092\u78ba\u7acb\u3057\u307e\u3059\u3002\n  * \u5b9b\u5148\u3054\u3068\u306b\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\n * \u5b9b\u5148\n  * \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3084LDAP\u3001MQ\u306a\u3069\u3001\u63a5\u7d9a\u5148\u74b0\u5883\u306b\u3042\u308b\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u306a\u308a\u307e\u3059\u3002Bluemix\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u63a5\u7d9a\u3057\u305f\u3044\u76f8\u624b\u306e\u3053\u3068\u3067\u3059\u3002\n\n![SecureGateway-02.png](https://qiita-image-store.s3.amazonaws.com/0/73397/1e620266-f29e-67f7-8f95-327544234f23.png \"SecureGateway-02.png\")\n\n## \u8a2d\u5b9a\u624b\u9806\n\u30ab\u30bf\u30ed\u30b0\u304b\u3089\u3001\u300c\u7d71\u5408\uff08Integration\uff09\u300d\u30ab\u30c6\u30b4\u30ea\u30fc\u306b\u3042\u308b\u300cSecure Gateway\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001Secure Gateway\u306f\u30011\u3064\u306e\u30b9\u30da\u30fc\u30b9\u306b\u3064\u304d1\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u3057\u304b\u4f5c\u6210\u3067\u304d\u307e\u305b\u3093\u3002\u3059\u3067\u306b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4f5c\u6210\u3055\u308c\u305fSecure Gateway\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u8a2d\u5b9a\u7528\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u521d\u3081\u3066\u306e\u8a2d\u5b9a\u306e\u305f\u3081\u3001\u300c\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n![SecureGateway-03.png](https://qiita-image-store.s3.amazonaws.com/0/73397/0f69f5ce-70d0-3fbd-5b6d-d2a9ad21da77.png \"SecureGateway-03.png\")\n\n\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u540d\u524d\u306f\u4efb\u610f\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u300cSample\u300d\u3068\u5165\u529b\u3057\u3001\u300c\u63a5\u7d9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![SecureGateway-04.png](https://qiita-image-store.s3.amazonaws.com/0/73397/1da04f53-4e33-db6e-2952-04167d53de77.png \"SecureGateway-04.png\")\n\n\u7d9a\u3044\u3066\u3001Secure Gateway Client\u306e\u5c0e\u5165\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u4eca\u56de\u306fDocker\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001\u8868\u793a\u3055\u308c\u3066\u3044\u308bDocker\u30b3\u30de\u30f3\u30c9\u3092\u30b3\u30d4\u30fc\u3057\u3001Docker\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n![SecureGateway-05.png](https://qiita-image-store.s3.amazonaws.com/0/73397/1e24cb35-8dd3-6075-0ac2-73037fa3cb6f.png \"SecureGateway-05.png\")\n\n\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3001\u300cThe Secure Gateway tunnel is connected\u300d\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u6b63\u5e38\u306b\u8d77\u52d5\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n```\nIBM Bluemix Secure Gateway Client Version 1.3.0\n************************************************************************************************\nYou  are running the  IBM Secure  Gateway Client for Bluemix. When you enter the provided docker\ncommand the IBM Secure Gateway Client  for Bluemix automatically downloads as a Docker image and\nis executed on your system/device. This is released under an IBM license. The  license agreement\nfor IBM  Secure Gateway Client for Bluemix is available at the following location:\n\nhttp://www.ibm.com/software/sla/sladb.nsf/lilookup/986C7686F22D4D3585257E13004EA6CB?OpenDocument\n\nYour use of the components of the package and  dependencies constitutes your acceptance  of this\nlicense agreement. If you do  not want to accept the license, immediately quit  the container by\nclosing the  terminal  window or by  entering 'quit' followed by the ENTER key. Then, delete any\npulled Docker image from your device.  \n************************************************************************************************\n\n\n<press enter for the command line>\n[2015-12-06 10:35:54.515] [INFO] Setting log level to INFO\n[2015-12-06 10:36:06.281] [INFO] The Secure Gateway tunnel is connected\n```\n\nDocker\u306e\u8d77\u52d5\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u300c\u5b9b\u5148\u306e\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u63a5\u7d9a\u5148\u3068\u306a\u308bLDAP\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u4efb\u610f\u306e\u540d\u524d\uff08\u3053\u3053\u3067\u306fLDAP\uff09\u3068IP\u30a2\u30c9\u30ec\u30b9\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u3001\u30d7\u30e9\u30b9\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u306f\u3001Secure Gateway Client\u304b\u3089LDAP\u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n![SecureGateway-06.png](https://qiita-image-store.s3.amazonaws.com/0/73397/e68625f2-55c6-3f8b-b99f-024795278a9f.png \"SecureGateway-06.png\")\n\n\u5b9b\u5148\u304c\u767b\u9332\u3055\u308c\u307e\u3057\u305f\u3002\u30a4\u30f3\u30d5\u30a9\u30e1\u30fc\u30b7\u30e7\u30f3\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30af\u30e9\u30a6\u30c9\u30fb\u30dd\u30fc\u30c8\u306e\u60c5\u5831\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n![SecureGateway-07.png](https://qiita-image-store.s3.amazonaws.com/0/73397/3fdf83e0-0797-8f79-8b24-3799a6697f68.png \"SecureGateway-07.png\")\n\n![SecureGateway-08.png](https://qiita-image-store.s3.amazonaws.com/0/73397/9d641c7d-f316-2ae8-b047-32430e23d3d2.png \"SecureGateway-08.png\")\n\n### Secure Gateway Client\u306eACL\nSecure Gateway Client\u306b\u306fACL\u3092\u8a2d\u5b9a\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308a\u3001Secure Gateway Client\u304b\u3089\u901a\u4fe1\u53ef\u80fd\u306a\u5b9b\u5148\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u5236\u9650\u3067\u304d\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Deny ALL\u3068\u306a\u3063\u3066\u304a\u308a\u3001\u3059\u3079\u3066\u306e\u63a5\u7d9a\u304c\u62d2\u5426\u3055\u308c\u308b\u8a2d\u5b9a\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u307e\u307e\u3067\u306fLDAP\u30b5\u30fc\u30d0\u30fc\u3068\u901a\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\nSecure Gateway Client\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u306eDocker\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u306b\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u3068\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u300cshow acl\u300d\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u300cACL Deny All flag is set to true\u300d\u3068\u8868\u793a\u3055\u308c\u3001Deny All\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```\ncli> show acl\n[2015-12-06 10:59:35.914] [INFO] There are no Access Control List entries, the ACL Deny All flag is set to: true\n```\n\nLDAP\u30b5\u30fc\u30d0\u30fc\u3068\u306e\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```\ncli> acl allow 10.37.129.130:389\ncli> show acl\n--------------------------------------------------------------------------------\n                 -- Secure Gateway Client Access Control List --                \n                                                                                \n hostname                                       port                      value \n 10.37.129.130                                   389                      Allow \n--------------------------------------------------------------------------------\n```\n\n# \u30b5\u30f3\u30d7\u30eb\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30a2\u30af\u30bb\u30b9\u6642\u306b\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u3092\u8981\u6c42\u3057\u3001\u305d\u306e\u8a8d\u8a3c\u3067\u4f7f\u7528\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u5358\u7d14\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n``` SampleService.java\npackage com.example;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.core.Context;\n\n@Path(\"/user\")\npublic class SampeService {\n\t@Context\n\t public HttpServletRequest request;\n\t\n\t@GET\n\tpublic String getUserName() {\n\t\treturn request.getRemoteUser();\n\t}\n}\n```\n\n## web.xml\n\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3092\u8981\u6c42\u3059\u308b\u3088\u3046\u306bweb.xml\u3092\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n``` web.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app id=\"BasicAuthSample\" version=\"3.1\"\n   xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\">\n   \n   <display-name>BasicAuthSample</display-name>\n   <servlet>\n      <servlet-name>javax.ws.rs.core.Application</servlet-name>\n   </servlet>\n   <servlet-mapping>\n      <servlet-name>javax.ws.rs.core.Application</servlet-name>\n      <url-pattern>/*</url-pattern>\n   </servlet-mapping>\n   \n   <security-constraint>\n      <web-resource-collection>\n         <web-resource-name>index</web-resource-name>\n         <url-pattern>/*</url-pattern>\n      </web-resource-collection>\n      <auth-constraint>\n         <role-name>all</role-name>\n      </auth-constraint>\n      <user-data-constraint>\n         <transport-guarantee>CONFIDENTIAL</transport-guarantee>\n      </user-data-constraint>\n   </security-constraint>\n   <security-role>\n      <role-name>all</role-name>\n   </security-role>\n</web-app>\n```\n\n## Bluemix\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u65b9\u6cd5\nLiberty for Java\u304cLDAP\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001Liberty\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308b\u300cserver.xml\u300d\u3092\u7de8\u96c6\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u901a\u5e38\u3001Liberty\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001war\u30d5\u30a1\u30a4\u30eb\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3001Bluemix\u304c\u81ea\u52d5\u3067\u69cb\u6210\u3059\u308bserver.xml\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u3001server.xml\u3092\u72ec\u81ea\u306b\u7de8\u96c6\u3059\u308b\u305f\u3081\u3001war\u30d5\u30a1\u30a4\u30eb\u306b\u52a0\u3048\u3001server.xml\u3082Bluemix\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Bluemix\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067[\u300c\u30b5\u30fc\u30d0\u30fc\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u300d](https://www.ng.bluemix.net/docs/starters/liberty/index.html#optionsforpushinglibertyapplications)\u3068\u8a18\u8f09\u3055\u308c\u305f\u65b9\u6cd5\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n### \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\u3068\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\n\u30b5\u30fc\u30d0\u30fc\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u65b9\u6cd5\u3067\u306f\u3001\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u306b\u3001\u4ee5\u4e0b\u306e\u968e\u5c64\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\u6e96\u5099\u3059\u308b\u3082\u306e\u306fserver.xml\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306ewar\u30d5\u30a1\u30a4\u30eb\u306e2\u7a2e\u985e\u306e\u307f\u3067\u3059\u3002\n\n```\ndefaultServer/\n  \u2502\n  \u251c\u2500 server.xml\n  \u2502\n  \u2514\u2500 apps/\n       \u2502\n       \u2514\u2500 BasicAuthSample.war\n```\n\n### server.xml\u306e\u5185\u5bb9\n\n\u4f7f\u7528\u3057\u305fserver.xml\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\nLDAP\u8a8d\u8a3c\u306f\u3001\u300cldapRegistry-3.0\u300d\u3068\u547c\u3070\u308c\u308b\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u3092\u6709\u52b9\u306b\u3057\u3001\u300cldapRegistry\u300d\u30bf\u30b0\u306b\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fIBM Security Directory Server\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001ldapType\u3068\u3057\u3066\u300cIBM Tivoli Directory Server\u300d\u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u304c\u3001Microsoft Active Directory\u306a\u3069\u306e\u4ed6\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fb\u30b5\u30fc\u30d0\u30fc\u3082ldapType\u3068\u3057\u3066\u6307\u5b9a\u53ef\u80fd\u3067\u3059\u3002\n**Secure Gateway\u306e\u8a2d\u5b9a\u3067\u78ba\u8a8d\u3057\u305f\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u306e\u60c5\u5831\u3092\u300chost\u300d\u306b\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30dd\u30fc\u30c8\u306e\u60c5\u5831\u3092\u300cport\u300d\u306b\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\u3002**\n\n\n``` server.xml\n<server description=\"new server\">\n  <featureManager>\n    <feature>webProfile-7.0</feature>\n    <feature>ldapRegistry-3.0</feature>\n  </featureManager>\n  \n  <ldapRegistry baseDN=\"ou=user,o=example,dc=com\"\n                bindDN=\"uid=binduser,ou=management,o=example,dc=com\" bindPassword=\"{xor}JT4ubm0oLCc=\"\n                host=\"xxxx\" port=\"xxxx\" ldapType=\"IBM Tivoli Directory Server\">\n    <idsFilters userFilter=\"(&amp;(uid=%v)(objectclass=eAccount))\"/>\n  </ldapRegistry>\n  \n  <httpEndpoint host=\"*\" httpPort=\"9080\" httpsPort=\"9443\" id=\"defaultHttpEndpoint\"/>\n  \n  <webApplication id=\"BasicAuthSample\" location=\"BasicAuthSample.war\" name=\"BasicAuthSample\" contextRoot=\"/\">\n    <application-bnd>\n      <security-role name=\"all\">\n        <special-subject type=\"ALL_AUTHENTICATED_USERS\"></special-subject>\n      </security-role>\n    </application-bnd>\n  </webApplication>\n</server>\n```\n\n### Bluemix\u3078\u306e\u30d7\u30c3\u30b7\u30e5\n\ndefaultServer\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08/work/Bluemix/defaultServer\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u3042\u308c\u3070\u3001/work/Bluemix\uff09\u306b\u79fb\u52d5\u3057\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\uff08\\<Your_Application_Name>\u3068\\<Your_Application_Host_Name>\u306e\u5024\u306f\u3001\u307f\u306a\u3055\u3093\u306e\u74b0\u5883\u3067\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3068\u30db\u30b9\u30c8\u540d\u306b\u5408\u308f\u305b\u3066\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff09\n\n```\ncf push <Your_Application_Name> -n <Your_Application_Host_Name> -m 512m -p defaultServer\n```\n\n# \u52d5\u4f5c\u78ba\u8a8d\nhttps://\\<Your_Application_Host_Name>.mybluemix.net/user \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001LDAP\u306b\u767b\u9332\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n![SecureGateway-10.png](https://qiita-image-store.s3.amazonaws.com/0/73397/cbee3b9f-99c9-5c71-b322-4a8c96426182.png \"SecureGateway-10.png\")\n\n\u8a8d\u8a3c\u306b\u6210\u529f\u3057\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n![SecureGateway-09.png](https://qiita-image-store.s3.amazonaws.com/0/73397/dc35ce70-5d37-1a4b-7b42-432987e25e1f.png \"SecureGateway-09.png\")\n\n# \u6700\u5f8c\u306b\nSecure Gateway\u3092\u5229\u7528\u3057\u3001LDAP\u8a8d\u8a3c\u304c\u3042\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\nWebSphere Liberty\u306e\u8a2d\u5b9a\u306b\u95a2\u3059\u308b\u77e5\u8b58\u304c\u5c11\u3057\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u304c\u3001Secure Gateway\u3092\u69cb\u6210\u3057\u3001web.xml\u3068server.xml\u306e\u8a2d\u5b9a\u3060\u3051\u3067\u8a8d\u8a3c\u3092\u6709\u52b9\u306b\u3059\u308b\u3067\u304d\u307e\u3059\u3002\n\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u69cb\u6210\u3059\u308b\u5834\u5408\u306f\u3001Single Sign On\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u3060\u3051\u3067\u306a\u304f\u3001Secure Gateway\u3092\u5229\u7528\u3057\u305fLDAP\u8a8d\u8a3c\u3082\u9078\u629e\u80a2\u306e1\u3064\u3068\u306a\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u4eca\u56de\u306f\u3001LDAP\u30b5\u30fc\u30d0\u30fc\u3092Parallels\u4e0a\u306b\u69cb\u7bc9\u3057\u3066\u3044\u307e\u3059\u304c\u3001Bluemix\u306eOpenStack VM\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u74b0\u5883\u304c\u5b8c\u7d50\u3057\u307e\u3059\u3002\n\nSecure Gateway\u306b\u306f\u3001\u901a\u4fe1\u3092\u3088\u308a\u30bb\u30ad\u30e5\u30a2\u306b\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306e\u69cb\u6210\u3067\u306f\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c8\u3068\u30af\u30e9\u30a6\u30c9\u30fb\u30dd\u30fc\u30c8\u3092\u77e5\u3063\u3066\u3057\u307e\u3048\u3070\u3001Bluemix\u5916\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u3082\u63a5\u7d9a\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n[\u30de\u30cb\u30e5\u30a2\u30eb](https://www.ng.bluemix.net/docs/services/SecureGateway/sg_023.html#sg_033)\u3092\u8aad\u3080\u3068\u3001\u30a2\u30af\u30bb\u30b9\u5143\u3082\u5236\u9650\u3067\u304d\u308b\u3088\u3046\u306b\u307f\u3048\u307e\u3059\u306e\u3067\u3001\u6b21\u56de\u306f\u3053\u306e\u6a5f\u80fd\u3092\u8a66\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["WebSphere", "Bluemix"]}