{"tags": ["Java", "java8", "JavaFX", "WebEngine", "webView"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u4e8b\u524d\u306b\u6e96\u5099\u3059\u308b\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u7b49\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u5b9f\u88c5\u4f8b\n\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306bmain\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\nWebViewTest.java\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.beans.value.ChangeListener;\nimport javafx.beans.value.ObservableValue;\nimport javafx.concurrent.Worker;\nimport javafx.concurrent.Worker.State;\nimport javafx.embed.swing.SwingFXUtils;\nimport javafx.scene.Scene;\nimport javafx.scene.image.WritableImage;\nimport javafx.scene.web.WebEngine;\nimport javafx.scene.web.WebView;\nimport javafx.stage.Stage;\nimport javax.imageio.ImageIO;\n\n/**\n *\n * @author tool-taro.com\n */\npublic class WebViewTest extends Application {\n\n    public static void main(String[] args) {\n        WebViewTest.launch(args);\n    }\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        //\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u308b\u30b5\u30a4\u30c8\n        String url = \"http://tool-taro.com/\";\n        //\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u5148\n        String filePath = \"webview.png\";\n\n        WebView webView = new WebView();\n        webView.setPrefSize(1440, 900);\n\n        WebEngine webEngine = webView.getEngine();\n        webEngine.getLoadWorker().stateProperty().addListener(new ChangeListener<State>() {\n            @Override\n            public void changed(ObservableValue ov, State oldState, State newState) {\n                //change\u30a4\u30d9\u30f3\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u6642\u70b9\u3067\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u308b\n                if (newState == Worker.State.SUCCEEDED) {\n                    stage.setTitle(webEngine.getLocation());\n\n                    WritableImage image = webView.snapshot(null, null);\n                    BufferedImage bufferedImage = SwingFXUtils.fromFXImage(image, null);\n                    try {\n                        ImageIO.write(bufferedImage, \"png\", new File(filePath));\n                    }\n                    catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                    finally {\n                        //\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\u3059\u308b\n                        Platform.exit();\n                    }\n                }\n            }\n        });\n\n        //\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30ed\u30fc\u30c9\u3059\u308b\n        webEngine.load(url);\n        //WebView\u3092Scene\u306b\u5165\u308c\u3066Stage\u306b\u306e\u305b\u3066\u8868\u793a\u3059\u308b(\u305d\u3046\u3057\u306a\u3044\u3068WebEngine\u306echange\u30a4\u30d9\u30f3\u30c8\u306f\u6210\u529f\u3057\u306a\u3044)\n        stage.setScene(new Scene(webView));\n        stage.show();\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ javac WebViewTest.java\n$ java WebViewTest\n\n\u64ae\u5f71\u3055\u308c\u305f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n\n\n\u74b0\u5883\n\n\n\u958b\u767a\n\nWindows 10 Pro\nJDK 1.8.0_112\nNetBeans IDE 8.2\n\n\n\n\u52d5\u4f5c\u691c\u8a3c\n\nWindows 10 Pro\nJDK 1.8.0_112\n\n\n\nWeb\u30c4\u30fc\u30eb\u3082\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\nWeb\u4fbf\u5229\u30c4\u30fc\u30eb@\u30c4\u30fc\u30eb\u30bf\u30ed\u30a6\n## \u306f\u3058\u3081\u306b\n\u4e8b\u524d\u306b\u6e96\u5099\u3059\u308b\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u7b49\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n## \u5b9f\u88c5\u4f8b\n\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306bmain\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n```java:WebViewTest.java\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.beans.value.ChangeListener;\nimport javafx.beans.value.ObservableValue;\nimport javafx.concurrent.Worker;\nimport javafx.concurrent.Worker.State;\nimport javafx.embed.swing.SwingFXUtils;\nimport javafx.scene.Scene;\nimport javafx.scene.image.WritableImage;\nimport javafx.scene.web.WebEngine;\nimport javafx.scene.web.WebView;\nimport javafx.stage.Stage;\nimport javax.imageio.ImageIO;\n\n/**\n *\n * @author tool-taro.com\n */\npublic class WebViewTest extends Application {\n\n\tpublic static void main(String[] args) {\n\t\tWebViewTest.launch(args);\n\t}\n\n\t@Override\n\tpublic void start(Stage stage) throws IOException {\n\t\t//\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u308b\u30b5\u30a4\u30c8\n\t\tString url = \"http://tool-taro.com/\";\n\t\t//\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u5148\n\t\tString filePath = \"webview.png\";\n\n\t\tWebView webView = new WebView();\n\t\twebView.setPrefSize(1440, 900);\n\n\t\tWebEngine webEngine = webView.getEngine();\n\t\twebEngine.getLoadWorker().stateProperty().addListener(new ChangeListener<State>() {\n\t\t\t@Override\n\t\t\tpublic void changed(ObservableValue ov, State oldState, State newState) {\n\t\t\t\t//change\u30a4\u30d9\u30f3\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u6642\u70b9\u3067\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u308b\n\t\t\t\tif (newState == Worker.State.SUCCEEDED) {\n\t\t\t\t\tstage.setTitle(webEngine.getLocation());\n\n\t\t\t\t\tWritableImage image = webView.snapshot(null, null);\n\t\t\t\t\tBufferedImage bufferedImage = SwingFXUtils.fromFXImage(image, null);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tImageIO.write(bufferedImage, \"png\", new File(filePath));\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t\tfinally {\n\t\t\t\t\t\t//\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\u3059\u308b\n\t\t\t\t\t\tPlatform.exit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30ed\u30fc\u30c9\u3059\u308b\n\t\twebEngine.load(url);\n\t\t//WebView\u3092Scene\u306b\u5165\u308c\u3066Stage\u306b\u306e\u305b\u3066\u8868\u793a\u3059\u308b(\u305d\u3046\u3057\u306a\u3044\u3068WebEngine\u306echange\u30a4\u30d9\u30f3\u30c8\u306f\u6210\u529f\u3057\u306a\u3044)\n\t\tstage.setScene(new Scene(webView));\n\t\tstage.show();\n\t}\n}\n```\n## \u52d5\u4f5c\u78ba\u8a8d\n\n```\n$ javac WebViewTest.java\n$ java WebViewTest\n```\n\u64ae\u5f71\u3055\u308c\u305f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n![webview.png](https://qiita-image-store.s3.amazonaws.com/0/111947/e326010f-7b10-cd0f-dfb3-5d43f2c4526b.png)\n## \u74b0\u5883\n- \u958b\u767a\n\t- Windows 10 Pro\n\t- JDK 1.8.0_112\n\t- NetBeans IDE 8.2\n\n- \u52d5\u4f5c\u691c\u8a3c\n\t- Windows 10 Pro\n\t- JDK 1.8.0_112\n\n\nWeb\u30c4\u30fc\u30eb\u3082\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\n[Web\u4fbf\u5229\u30c4\u30fc\u30eb@\u30c4\u30fc\u30eb\u30bf\u30ed\u30a6](http://tool-taro.com/)\n"}