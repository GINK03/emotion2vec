{"context": " More than 1 year has passed since last update.\n\n\u72b6\u6cc1\n\npublic \u4ee5\u4e0b\u3059\u3079\u3066\u304c 404 \u72b6\u614b\u3067\u3001css\u3082javascript\u3082favicon\u3082\u7121\u52b9\u306e\u5834\u5408\u3002\npublic \u4ee5\u4e0b\u306b\u76f4\u63a5\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u3044\u3066\u3082\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u5834\u5408\u3002\n\n\n\u8a2d\u5b9a\u5909\u66f4\nRails\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308b\u3002(Rails 4.2.3)\n\nconfig/environments/production.rb\n- config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\n+ config.serve_static_files = true\n\n\n(\u3082\u3068\u3082\u3068\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u74b0\u5883\u5909\u6570\u306b\u3088\u3063\u3066\u52d5\u4f5c\u304c\u5909\u308f\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b)\n\u305d\u306e\u5f8c\u3001unicorn \u3092\u518d\u8d77\u52d5\u3057\u3088\u3046\u3002\n\nRails4.1 \u4ee5\u524d\u3067\u306f\u8a2d\u5b9a\u5024\u304c\u9055\u3046\u3088\u3046\u3060\u3002(Rails 4.1.0)\n\nconfig/environments/production.rb\n- config.serve_static_assets = false\n+ config.serve_static_assets = true\n\n\n\n\u6b21\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u305f\u3002 \nRails(Apache+Unicorn)\u3067\u3001public\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u304c404\u306b\u306a\u308b\u5834\u5408\u306e\u89e3\u6c7a\u7b56\n\nunicorn \u306e\u8a2d\u5b9a\u3092\u5909\u3048\u305a\u306b\u3001\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u30fc\u306b\u4efb\u305b\u308b\u3053\u3068\u3082\u51fa\u6765\u308b\u3002\nnginx \u306e\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u3067 location ~ ^/assets/ \u3092\u66f8\u304f\u3002\n\n/etc/nginx/conf.d/example.conf\nserver {\n  listen          80;\n  server_name     xxx.xxx.xxx.xxx;\n  server_name     example.com;\n  root /path/to/public;\n\n  location ~ ^/assets/ {\n    root   /path/to/public;\n  }\n}\n\n\n## \u72b6\u6cc1\n\n- public \u4ee5\u4e0b\u3059\u3079\u3066\u304c 404 \u72b6\u614b\u3067\u3001css\u3082javascript\u3082favicon\u3082\u7121\u52b9\u306e\u5834\u5408\u3002\n- public \u4ee5\u4e0b\u306b\u76f4\u63a5\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u3044\u3066\u3082\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u5834\u5408\u3002\n\n## \u8a2d\u5b9a\u5909\u66f4\n\nRails\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308b\u3002(Rails 4.2.3)\n\n```rb:config/environments/production.rb\n- config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\n+ config.serve_static_files = true\n```\n\n(\u3082\u3068\u3082\u3068\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u74b0\u5883\u5909\u6570\u306b\u3088\u3063\u3066\u52d5\u4f5c\u304c\u5909\u308f\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b)\n\n\u305d\u306e\u5f8c\u3001unicorn \u3092\u518d\u8d77\u52d5\u3057\u3088\u3046\u3002\n\n---\n\n[Rails4.1 \u4ee5\u524d\u3067\u306f\u8a2d\u5b9a\u5024\u304c\u9055\u3046](http://qiita.com/ShotaKameyama/items/85d71cb1429d119c6f0b)\u3088\u3046\u3060\u3002(Rails 4.1.0)\n\n```rb:config/environments/production.rb\n- config.serve_static_assets = false\n+ config.serve_static_assets = true\n```\n\n---\n\n\u6b21\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u305f\u3002 \n[Rails(Apache+Unicorn)\u3067\u3001public\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u304c404\u306b\u306a\u308b\u5834\u5408\u306e\u89e3\u6c7a\u7b56](http://qiita.com/y_minowa/items/5954907bb30c2ecb43f5)\n\n---\n\nunicorn \u306e\u8a2d\u5b9a\u3092\u5909\u3048\u305a\u306b\u3001\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u30fc\u306b\u4efb\u305b\u308b\u3053\u3068\u3082\u51fa\u6765\u308b\u3002\nnginx \u306e\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u3067 `location ~ ^/assets/` \u3092\u66f8\u304f\u3002\n\n```:/etc/nginx/conf.d/example.conf\nserver {\n  listen          80;\n  server_name     xxx.xxx.xxx.xxx;\n  server_name     example.com;\n  root /path/to/public;\n\n  location ~ ^/assets/ {\n    root   /path/to/public;\n  }\n}\n```\n", "tags": ["Rails", "unicorn"]}