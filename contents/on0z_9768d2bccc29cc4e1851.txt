{"context": "\n\n\u57fa\u672c\n\n\u751f\u6210\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\nimport WebKit\n\n\n\u7d99\u627f\nclass ViewController: UIViewController, WKNavigationDelegate{\n//\u7701\u7565\n}\n\n\u53c2\u8003:WKWebView\u306b\u95a2\u3059\u308b\u8abf\u67fb\u30e1\u30e2\n\n\u914d\u7f6e\nSwift2.2\nlet webview = WKWebView(frame: CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height))\n\nSwift3\nlet webview = WKWebView(frame: CGRect(x: 0, y: 0, width: self.view.frame.size.width, height: self.view.frame.size.height))\n\n\n\u30b5\u30a4\u30c8\u3092\u8868\u793a\u3059\u308b\nSwift2.2\nlet url = NSURL(string: \"https://www.google.com\")\nurlRequest = NSURLRequest(URL: url)\nself.webview.loadRequest(urlRequest)\n\nSwift3\nlet url = URL(string: \"https://www.google.com\")\nurlRequest = URLRequest(url: url)\nself.webview.load(urlRequest)\n\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\n\n\u30bf\u30a4\u30c8\u30eb\u53d6\u5f97\nvar title = self.webview.title\n\n\nURL\u53d6\u5f97\nvar currenturl = self.webview.url\n\n\n\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3001\u30a4\u30f3\u30b8\u30b2\u30fc\u30bf\u30fc\u3092\u8868\u793a\n\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc\u3092\u751f\u6210\u3059\u308b\u306e\u306f\u7701\u7565\u3067\u3059\u3002\nSwift2.2\nvar progressView = UIProgressView()\n//\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u3092\u4f7f\u3063\u3066\u53d6\u5f97\noverride func viewDidLoad(){\n    //\u8aad\u307f\u8fbc\u307f\u72b6\u614b\u304c\u5909\u66f4\u3055\u308c\u305f\u3053\u3068\u3092\u53d6\u5f97\n    self.webview.addObserver(self, forKeyPath: \"loading\", options: .New, context: nil)\n    //\u30d7\u30ed\u30b0\u30ec\u30b9\u304c\u5909\u66f4\u3055\u308c\u305f\u3053\u3068\u3092\u53d6\u5f97\n    self.webview.addObserver(self, forKeyPath: \"estimatedProgress\", options: .New, context: nil)\n\n    //\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3092\u751f\u6210(NavigationBar\u4e0b)\n    progressView = UIProgressView(frame: CGRectMake(0, self.navigationController!.navigationBar.frame.size.height - 2, self.view.frame.size.width, 10))\n    progressView.progressViewStyle = .Bar\n    self.navigationController?.navigationBar.addSubview(progressView)\n}\ndeinit{\n    //\u6d88\u3055\u306a\u3044\u3068\u3001\u30a2\u30d7\u30ea\u304c\u843d\u3061\u308b\n    self.webview.removeObserver(self, forKeyPath: \"estimatedProgress\")\n    self.webview.removeObserver(self, forKeyPath: \"loading\")\n}\n\noverride func observeValueForKeyPath(keyPath: String?, ofObject object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer<Void>) {\n    if keyPath == \"estimatedProgress\"{\n        //estimatedProgress\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d\u306b\u3001setProgress\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u306e\u5024\u3092\u5909\u66f4\u3059\u308b\u3002\n        self.progressView.setProgress(Float(self.webview.estimatedProgress), animated: true)\n    }else if kyPath == \"loading\"{\n        //\u30a4\u30f3\u30b8\u30b2\u30fc\u30bf\u30fc\u306e\u8868\u793a\u3001\u975e\u8868\u793a\u3092\u304d\u308a\u304b\u3048\u308b\u3002\n        UIApplication.sharedApplication().networkActivityIndicatorVisible = self.webview.loading\n        if self.webview.loading{\n            self.progressView.setProgress(0.1, animated: true)\n        }else{\n            //\u8aad\u307f\u8fbc\u307f\u304c\u7d42\u308f\u3063\u305f\u30890\u306b\n            self.progressView.setProgress(0.0, animated: false)\n        }\n    }\n}\n\nSwift3\nvar progressView = UIProgressView()\n\noverride func viewDidLoad(){\n    self.tabBarController?.tabBar.isHidden = true\n    self.webview.addObserver(self, forKeyPath: \"loading\", options: .new, context: nil)\n    self.webview.addObserver(self, forKeyPath: \"estimatedProgress\", options: .new, context: nil)\n\n    //\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3092\u751f\u6210(NavigationBar\u4e0b)\n    progressView = UIProgressView(frame: CGRect(x: 0, y: self.navigationController!.navigationBar.frame.size.height - 2, width: self.view.frame.size.width, height: 10))\n    progressView.progressViewStyle = .bar\n    self.navigationController?.navigationBar.addSubview(progressView)\n}\n\ndeinit{\n    //\u6d88\u3055\u306a\u3044\u3068\u3001\u30a2\u30d7\u30ea\u304c\u843d\u3061\u308b\n    self.webview.removeObserver(self, forKeyPath: \"estimatedProgress\")\n    self.webview.removeObserver(self, forKeyPath: \"loading\")\n}\n\noverride func observeValue(forKeyPath keyPath: String?, of object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer<Void>?) {\n    if keyPath == \"estimatedProgress\"{\n        //estimatedProgress\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d\u306b\u3001setProgress\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u306e\u5024\u3092\u5909\u66f4\u3059\u308b\u3002\n        self.progressView.setProgress(Float(self.webview.estimatedProgress), animated: true)\n    }else if keyPath == \"loading\"{\n        UIApplication.shared().isNetworkActivityIndicatorVisible = self.webview.isLoading\n        if self.webview.isLoading {\n            self.progressView.setProgress(0.1, animated: true)\n        }else{\n            //\u8aad\u307f\u8fbc\u307f\u304c\u7d42\u308f\u3063\u305f\u30890\u306b\n            self.progressView.setProgress(0.0, animated: false)\n        }\n    }\n}\n\n\n\n\n\u53d6\u5f97\u3059\u308b\u3082\u306e\nWKWebView\u306e\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306ekeyPath\n\n\n\n\n\u30b5\u30a4\u30c8\u306eURL\nurl\n\n\n\u30b5\u30a4\u30c8\u306e\u30bf\u30a4\u30c8\u30eb\ntitle\n\n\n\u8aad\u307f\u8fbc\u307f\nloading\n\n\n\u9032\u6357\nestimatedProgress\n\n\n\u623b\u308b\ncanGoBack\n\n\n\u9032\u3080\ncanGoForward\n\n\n\n\n\u30b9\u30ef\u30a4\u30d7\u3067\u623b\u308b\u3001\u9032\u3080\nself.webview.allowsBackForwardNavigationGestures = true\n\n\nUserScript\nSwift2.2\n//source\u306b\u3001\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4ee3\u5165\nlet source = \"console.log('Hello, UserScript!');\"\nlet userScript = WKUserScript(source: source, injectionTime: .AtDocumentEnd, forMainFrameOnly: true)\nlet userController = WKUserContentController()\nuserController.addUserScript(userScript)\nlet configuration = WKWebViewConfiguration()\nconfiguration.userContentController = userController\nwebview = WKWebView(frame: CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height), configuration: configuration)\n\nSwift3\n//source\u306b\u3001\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4ee3\u5165\nlet source = \"console.log('Hello, UserScript!');\"\nlet userScript = WKUserScript(source: source, injectionTime: .atDocumentEnd, forMainFrameOnly: true)\nlet userController = WKUserContentController()\nuserController.addUserScript(userScript)\nlet configuration = WKWebViewConfiguration()\nconfiguration.userContentController = userController\nself.webview = WKWebView(frame: CGRect(x: 0, y: 0, width: self.view.frame.size.width, height: self.view.frame.size.height), configuration: configuration)\n\n\n\u30ea\u30f3\u30af\nWKWebView Class Reference - Apple Developer\n\n\u30b3\u30e1\u30f3\u30c8\n\u52c9\u5f37\u3057\u305f\u3066\u306e\u9803\u306b\u66f8\u3044\u305f\u306e\u3067\u3001\u9593\u9055\u3044\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nwebView\u306eframe\u6307\u5b9a\u306f\u3042\u3048\u3066CGRectMake()\u3092\u4f7f\u3063\u3066\u66f8\u304d\u307e\u3057\u305f\u3002Swift3\u306b\u306a\u3063\u3066CGRectMake()\u304c\u306a\u3044\u307f\u305f\u3044\u306a\u3093\u3067\u3059\u304c\u3001CGRect()\u3067\u3044\u3044\u3093\u3067\u3059\u304b\u306d\uff1f\n(9/30\u8ffd\u8a18)\nremoveObserver\u306fdeinit\u306b\u66f8\u304f\u306e\u304c\u4e00\u822c\u7684\u3060\u305d\u3046\u306a\u306e\u3067\u66f8\u304d\u63db\u3048\u307e\u3057\u305f\u3002\n#\u57fa\u672c\n##\u751f\u6210\n###\u30a4\u30f3\u30dd\u30fc\u30c8\n```swift\nimport WebKit\n```\n###\u7d99\u627f\n```swift\nclass ViewController: UIViewController, WKNavigationDelegate{\n//\u7701\u7565\n}\n```\n\u53c2\u8003:[WKWebView\u306b\u95a2\u3059\u308b\u8abf\u67fb\u30e1\u30e2](http://qiita.com/1234224576/items/0ecee5ce877e99ac3647#wknavigationdelegate)\n###\u914d\u7f6e\nSwift2.2\n\n```swift\nlet webview = WKWebView(frame: CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height))\n``` \nSwift3\n\n```swift\nlet webview = WKWebView(frame: CGRect(x: 0, y: 0, width: self.view.frame.size.width, height: self.view.frame.size.height))\n```\n###\u30b5\u30a4\u30c8\u3092\u8868\u793a\u3059\u308b\nSwift2.2\n\n```swift\nlet url = NSURL(string: \"https://www.google.com\")\nurlRequest = NSURLRequest(URL: url)\nself.webview.loadRequest(urlRequest)\n``` \nSwift3\n\n```swift\nlet url = URL(string: \"https://www.google.com\")\nurlRequest = URLRequest(url: url)\nself.webview.load(urlRequest)\n```\n\n#\u30aa\u30d7\u30b7\u30e7\u30f3\n###\u30bf\u30a4\u30c8\u30eb\u53d6\u5f97\n```swift\nvar title = self.webview.title\n```\n###URL\u53d6\u5f97\n```swift\nvar currenturl = self.webview.url\n```\n###\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3001\u30a4\u30f3\u30b8\u30b2\u30fc\u30bf\u30fc\u3092\u8868\u793a\n\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc\u3092\u751f\u6210\u3059\u308b\u306e\u306f\u7701\u7565\u3067\u3059\u3002\nSwift2.2\n\n```swift\nvar progressView = UIProgressView()\n//\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u3092\u4f7f\u3063\u3066\u53d6\u5f97\noverride func viewDidLoad(){\n    //\u8aad\u307f\u8fbc\u307f\u72b6\u614b\u304c\u5909\u66f4\u3055\u308c\u305f\u3053\u3068\u3092\u53d6\u5f97\n    self.webview.addObserver(self, forKeyPath: \"loading\", options: .New, context: nil)\n    //\u30d7\u30ed\u30b0\u30ec\u30b9\u304c\u5909\u66f4\u3055\u308c\u305f\u3053\u3068\u3092\u53d6\u5f97\n    self.webview.addObserver(self, forKeyPath: \"estimatedProgress\", options: .New, context: nil)\n\n    //\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3092\u751f\u6210(NavigationBar\u4e0b)\n    progressView = UIProgressView(frame: CGRectMake(0, self.navigationController!.navigationBar.frame.size.height - 2, self.view.frame.size.width, 10))\n    progressView.progressViewStyle = .Bar\n    self.navigationController?.navigationBar.addSubview(progressView)\n}\ndeinit{\n    //\u6d88\u3055\u306a\u3044\u3068\u3001\u30a2\u30d7\u30ea\u304c\u843d\u3061\u308b\n    self.webview.removeObserver(self, forKeyPath: \"estimatedProgress\")\n    self.webview.removeObserver(self, forKeyPath: \"loading\")\n}\n\noverride func observeValueForKeyPath(keyPath: String?, ofObject object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer<Void>) {\n    if keyPath == \"estimatedProgress\"{\n        //estimatedProgress\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d\u306b\u3001setProgress\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u306e\u5024\u3092\u5909\u66f4\u3059\u308b\u3002\n        self.progressView.setProgress(Float(self.webview.estimatedProgress), animated: true)\n    }else if kyPath == \"loading\"{\n        //\u30a4\u30f3\u30b8\u30b2\u30fc\u30bf\u30fc\u306e\u8868\u793a\u3001\u975e\u8868\u793a\u3092\u304d\u308a\u304b\u3048\u308b\u3002\n        UIApplication.sharedApplication().networkActivityIndicatorVisible = self.webview.loading\n        if self.webview.loading{\n            self.progressView.setProgress(0.1, animated: true)\n        }else{\n            //\u8aad\u307f\u8fbc\u307f\u304c\u7d42\u308f\u3063\u305f\u30890\u306b\n            self.progressView.setProgress(0.0, animated: false)\n        }\n    }\n}\n```\n\nSwift3\n\n```swift\nvar progressView = UIProgressView()\n\noverride func viewDidLoad(){\n    self.tabBarController?.tabBar.isHidden = true\n    self.webview.addObserver(self, forKeyPath: \"loading\", options: .new, context: nil)\n    self.webview.addObserver(self, forKeyPath: \"estimatedProgress\", options: .new, context: nil)\n\n    //\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3092\u751f\u6210(NavigationBar\u4e0b)\n    progressView = UIProgressView(frame: CGRect(x: 0, y: self.navigationController!.navigationBar.frame.size.height - 2, width: self.view.frame.size.width, height: 10))\n    progressView.progressViewStyle = .bar\n    self.navigationController?.navigationBar.addSubview(progressView)\n}\n    \ndeinit{\n    //\u6d88\u3055\u306a\u3044\u3068\u3001\u30a2\u30d7\u30ea\u304c\u843d\u3061\u308b\n    self.webview.removeObserver(self, forKeyPath: \"estimatedProgress\")\n    self.webview.removeObserver(self, forKeyPath: \"loading\")\n}\n\noverride func observeValue(forKeyPath keyPath: String?, of object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer<Void>?) {\n    if keyPath == \"estimatedProgress\"{\n        //estimatedProgress\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d\u306b\u3001setProgress\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u306e\u5024\u3092\u5909\u66f4\u3059\u308b\u3002\n        self.progressView.setProgress(Float(self.webview.estimatedProgress), animated: true)\n    }else if keyPath == \"loading\"{\n        UIApplication.shared().isNetworkActivityIndicatorVisible = self.webview.isLoading\n        if self.webview.isLoading {\n            self.progressView.setProgress(0.1, animated: true)\n        }else{\n            //\u8aad\u307f\u8fbc\u307f\u304c\u7d42\u308f\u3063\u305f\u30890\u306b\n            self.progressView.setProgress(0.0, animated: false)\n        }\n    }\n}\n```\n\n\n| \u53d6\u5f97\u3059\u308b\u3082\u306e | WKWebView\u306e\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306ekeyPath |\n|:------------:|:-----------:|\n| \u30b5\u30a4\u30c8\u306eURL | url |\n| \u30b5\u30a4\u30c8\u306e\u30bf\u30a4\u30c8\u30eb | title |\n| \u8aad\u307f\u8fbc\u307f | loading |\n| \u9032\u6357 | estimatedProgress |\n| \u623b\u308b | canGoBack |\n| \u9032\u3080 | canGoForward |\n\n###\u30b9\u30ef\u30a4\u30d7\u3067\u623b\u308b\u3001\u9032\u3080\n```swift\nself.webview.allowsBackForwardNavigationGestures = true\n```\n\n###UserScript\nSwift2.2\n\n```swift\n//source\u306b\u3001\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4ee3\u5165\nlet source = \"console.log('Hello, UserScript!');\"\nlet userScript = WKUserScript(source: source, injectionTime: .AtDocumentEnd, forMainFrameOnly: true)\nlet userController = WKUserContentController()\nuserController.addUserScript(userScript)\nlet configuration = WKWebViewConfiguration()\nconfiguration.userContentController = userController\nwebview = WKWebView(frame: CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height), configuration: configuration)\n``` \nSwift3\n\n```swift\n//source\u306b\u3001\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4ee3\u5165\nlet source = \"console.log('Hello, UserScript!');\"\nlet userScript = WKUserScript(source: source, injectionTime: .atDocumentEnd, forMainFrameOnly: true)\nlet userController = WKUserContentController()\nuserController.addUserScript(userScript)\nlet configuration = WKWebViewConfiguration()\nconfiguration.userContentController = userController\nself.webview = WKWebView(frame: CGRect(x: 0, y: 0, width: self.view.frame.size.width, height: self.view.frame.size.height), configuration: configuration)\n```\n\n#\u30ea\u30f3\u30af\n[WKWebView Class Reference - Apple Developer](https://developer.apple.com/library/ios/documentation/WebKit/Reference/WKWebView_Ref/)\n\n#\u30b3\u30e1\u30f3\u30c8\n\u52c9\u5f37\u3057\u305f\u3066\u306e\u9803\u306b\u66f8\u3044\u305f\u306e\u3067\u3001\u9593\u9055\u3044\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nwebView\u306eframe\u6307\u5b9a\u306f\u3042\u3048\u3066CGRectMake()\u3092\u4f7f\u3063\u3066\u66f8\u304d\u307e\u3057\u305f\u3002Swift3\u306b\u306a\u3063\u3066CGRectMake()\u304c\u306a\u3044\u307f\u305f\u3044\u306a\u3093\u3067\u3059\u304c\u3001CGRect()\u3067\u3044\u3044\u3093\u3067\u3059\u304b\u306d\uff1f\n\n(9/30\u8ffd\u8a18)\nremoveObserver\u306fdeinit\u306b\u66f8\u304f\u306e\u304c\u4e00\u822c\u7684\u3060\u305d\u3046\u306a\u306e\u3067\u66f8\u304d\u63db\u3048\u307e\u3057\u305f\u3002\n", "tags": ["Swift2.2, 3.0", "WKWebView"]}