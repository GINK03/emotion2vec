{"context": "Cloudera Manager\u3092\u4f7f\u3063\u3066\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305fData Collector\u306eGUI\u304b\u3089\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nStreamSets\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u4eca\u56de\u306fBasic Tutorial\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nhttps://streamsets.com/documentation/datacollector/latest/help/#Tutorial/Tutorial-title.html\n\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n[cloudera@quickstart ~]$ sudo mkdir /streamsets\n[cloudera@quickstart ~]$ mkdir -p /streamsets/tutorial/origin\n[cloudera@quickstart ~]$ mkdir -p /streamsets/tutorial/destination\n[cloudera@quickstart ~]$ mkdir -p /streamsets/tutorial/error\n[cloudera@quickstart ~]$ sudo chmod -R 777 /streamsets\n[cloudera@quickstart ~]$ cd /streamsets/tutorial/origin/\n[cloudera@quickstart origin]$ wget https://www.streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv\n--2016-07-20 01:56:40--  https://www.streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv\nResolving www.streamsets.com... 162.242.235.205\nConnecting to www.streamsets.com|162.242.235.205|:443... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: https://streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv [following]\n--2016-07-20 01:56:41--  https://streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv\nResolving streamsets.com... 162.242.235.205\nConnecting to streamsets.com|162.242.235.205|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 1054132 (1.0M) [text/csv]\nSaving to: \u201cnyc_taxi_data.csv\u201d\n\n100%[======================================>] 1,054,132    828K/s   in 1.2s    \n\n2016-07-20 01:56:43 (828 KB/s) - \u201cnyc_taxi_data.csv\u201d saved [1054132/1054132]\n\n[cloudera@quickstart origin]$ \n\n\n\u57fa\u672c\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u4f5c\u6210\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u5b9a\u7fa9\n\u307e\u305a\u306fGUI\u304b\u3089\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002Data Collector \u306e Web UI\u304b\u3089\u300cCreate New Pipeline\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u540d\u524d\u306f Tutorial1 \u3068\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u300cSave\u300d\u3092\u62bc\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3068\u3001\u7a7a\u306e\u30ad\u30e3\u30f3\u30d0\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u8aac\u660e\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://streamsets.com/documentation/datacollector/latest/help/#Pipeline_Configuration/DataCollectorWindow-Config.html\n\nDirectory Origin \u3092\u8a2d\u5b9a\u3059\u308b\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u300c\u5165\u308a\u53e3\u300d\u306b\u76f8\u5f53\u3059\u308b\u306e\u304cOrigin\u3067\u3059\u3002\u4eca\u56de\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306eCSV\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092Origin\u306b\u3057\u307e\u3059\u3002\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u30e1\u30cb\u30e5\u30fc\u306e\u300cSelect Origin\u300d -> \u300cDirectory\u300d\u3092\u9078\u629e\u3059\u308b\u304b\u3001\u53f3\u5074\u306eStage Library\u304b\u3089Directory Origin\u3092\u9078\u3073\u307e\u3059\u3002\n\n\n\u30ad\u30e3\u30f3\u30d0\u30b9\u306b Directory Origin\u304c\u914d\u7f6e\u3055\u308c\u307e\u3057\u305f\u3002\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u4e0b\u306e\u753b\u9762\u304b\u3089Files\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u6b21\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nData Format: Delimited\nFiles Directory: /streamsets/tutorial/origin\nRead Order: Last Modified Timestamp\nFile Name Pattern: taxi.csv\nFirst File to Process: \u7a7a\u306e\u307e\u307e\n\nData Format\u306bDelimited\u3092\u6307\u5b9a\u3059\u308b\u3068Delimited\u30bf\u30d6\u3067\u8a73\u7d30\u8a2d\u5b9a\u304c\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nFile Type: Default CSV\nHeader Line: With Header Line (CSV\u306e\u5148\u982d\u884c\u306b\u30d8\u30c3\u30c0\u884c\u304c\u3042\u308b\u306e\u3067\uff09\nRoot Field Type: List-Map\n\n\n\u30c7\u30fc\u30bf\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\nOrigin\u3067\u767b\u9332\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30d7\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30c7\u30fc\u30bf\u304c\u6b63\u3057\u3044\u304b\u3069\u3046\u304b\u3092GUI\u304b\u3089\u300c\u898b\u308b\u300d\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u306f\u4fbf\u5229\u3067\u3059\u306d\u3002\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u3088\u308c\u3070\u3001\u3053\u306e\u72b6\u614b\u3067Preview\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u624b\u5143\u306e\u74b0\u5883\u3067\u306f\u3046\u307e\u304f\u3044\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5de6\u5074\u306e\u2757\ufe0f\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30a8\u30e9\u30fc\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002\u4eca\u56de\u306fCREATION_009\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u30a8\u30e9\u30fc\u30c7\u30fc\u30bf\u306e\u6271\u3044\u3092\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u307e\u305a\u306f\u7121\u8996\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\nError Record: Discard (Libary Basic) \n\n\u4eca\u5ea6\u306fPreview\u30a2\u30a4\u30b3\u30f3\u304c\u30af\u30ea\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d7\u30ec\u30d3\u30e5\u30fc\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n\u51fa\u529b\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002CSV\u30d5\u30a1\u30a4\u30eb\u306e\u5404\u5217\u3092\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u5f62\u5f0f\u3067\u3082\u8868\u793a\u3067\u304d\u307e\u3059\uff01\u3053\u308c\u3001CSV\u30d5\u30a1\u30a4\u30eb\u3092\u30a8\u30c7\u30a3\u30bf\u306a\u3069\u3067\u898b\u308b\u5fc5\u8981\u306a\u3044\u3067\u3059\u3057\u3001\u30d8\u30c3\u30c0\u884c\u3082\u8868\u793a\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3057\u3001\u4fbf\u5229\u3067\u3059\u306d\u3047....\n\n\u4eca\u56de\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001\u652f\u6255\u3044\u30bf\u30a4\u30d7(/payment_type)\u3068\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831(/credit_card)\u5217\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u3067\u3059\u3002\u7d42\u308f\u3063\u305f\u3089 Close Preview \u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\nStream Selector \u3067\u30c7\u30fc\u30bf\u306e\u7d4c\u8def\u3092\u4f5c\u308b\n\u300cSelect Processor to Connect\u300d->\u300cStream Selector\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nStream Selector \u306e General \u30bf\u30d6\u3067\u3001Required Fields \u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u652f\u6255\u3044\u306e\u7a2e\u985e\u304c\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u3092discard\u3057\u305f\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\nRequired Fields: /payment_type\n\nCondition\u30bf\u30d6\u3067\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u6761\u4ef6\u306b\u3088\u308a\u7d4c\u8def\u304c\u5909\u308f\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u30c7\u30fc\u30bf(\u652f\u6255\u3044\u306e\u7a2e\u985e\u304c\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\uff09\u304c\u51fa\u529b\u30b9\u30c8\u30ea\u30fc\u30e0\uff08\uff11\uff09\u306b\u6d41\u308c\u3066\u3044\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u6e80\u305f\u3055\u306a\u304b\u3063\u305f\u30c7\u30fc\u30bf\u306f(2)\u306b\u6d41\u308c\u307e\u3059\u3002\u6761\u4ef6\u306e\u6307\u5b9a\u306e\u69cb\u6587\u3092\u899a\u3048\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u81ea\u52d5\u88dc\u5b8c\u304c\u826f\u304f\u3067\u304d\u3066\u3044\u308b\u306e\u3067\u3001\u5272\u3068\u30b5\u30af\u30b5\u30af\u5165\u529b\u3067\u304d\u308b\u5370\u8c61\u3067\u3059\u3002\n\n${record:value('/payment_type')=='CRD'}\n\n\n\uff12\u7cfb\u7d71\u306e\u51fa\u529b\u304c\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u306d\u3002\n\nJython\u3092\u4f7f\u7528\u3057\u3066\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u3092\u53d6\u5f97\u3059\u308b\n\u30b9\u30c8\u30ea\u30fc\u30e0\u4e2d\u306e\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u305f\u3081\u3001Jython\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u300cSelect processor to connect\u300d\u304b\u3089Jython Evaluator processor\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u7d9a\u3044\u3067Jython\u30bf\u30d6\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306b\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306eJython\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002\n\n\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u30de\u30b9\u30af\u3059\u308b\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u3001\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3059\u308b\u306e\u306f\u907f\u3051\u305f\u3044\u3082\u306e\u3067\u3059\u3002Data Collector\u306b\u306f\u30de\u30b9\u30af\u306e\u6a5f\u80fd\u3082\u3042\u308b\u306e\u3067\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3067\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u30de\u30b9\u30af\u3057\u307e\u3059\u3002\u5148\u307b\u3069\u3068\u540c\u69d8\u306e\u624b\u9806\u3067\u3001\u30ad\u30e3\u30f3\u30d0\u30b9\u306bField Masker\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3057\u3001\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u3063\u3066\u30de\u30b9\u30af\u3057\u307e\u3059\u3002\n\nMask Type: Regular Expression\nRegular Expression: (.*)([0-9]{4})\nGroups to Show: 2\n\n\n\nDestination \u306b\u66f8\u304d\u8fbc\u3080\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u7d50\u679c\u306e\u51fa\u529b\u5148\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306eCloudera Manager\u7ba1\u7406\u3057\u3066\u3044\u308bHDFS\u304c\u3042\u308b\u308f\u3051\u3067\u3059\u304b\u3089\u4eca\u56de\u306fHDFS\u3092\u6307\u5b9a\u3057\u3088\u3046\u304b\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001Kerberos\u5316\u3057\u3066\u3044\u305f\u306e\u5f8c\u65e5\u8a66\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u300cSelect Destination to Connect\u300d\u304b\u3089\u300cHadoop FS - CDH5.7.1\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nHadoop FS Property\u306f\u3001\u66ab\u5b9a\u7684\u306b\u66f8\u304d\u8fbc\u307f\u5148\u3092 file:///\u306b\u3057\u307e\u3059\u3002\n\nHadoop FS URI: file:///\nHDFS user: cloudera\n\n\nOutput Files\u30bf\u30d6\u3067\u4ee5\u4e0b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nData Format: Delimited\nFile Prefix: _out\nDirectory Template: /streamsets/tutorial/destination\nData Timezone: JST\n\nDelimited\u30bf\u30d6\u3067\u4ee5\u4e0b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nHeader Line: With Header Line\n\n\nExpression Evaluator\u3067\u5bfe\u5fdc\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3059\u308b\n\u5148\u307b\u3069\u306eJython Evaluator\u3067\u306f\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u306e\u30c7\u30fc\u30bf\u3092\u51e6\u7406\u3057\u3001\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u30c7\u30fc\u30bf\u3092\u30d7\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u300cPreview\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Jython Evaluator\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u5165\u529b\u30c7\u30fc\u30bf\u3068\u51fa\u529b\u30c7\u30fc\u30bf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u671f\u5f85\u901a\u308a\uff08\uff1f\uff09\u3001\u51fa\u529b\u306b\u306fcredit_card_type\u306e\u30c7\u30fc\u30bf\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u306d\uff01\n\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u652f\u6255\u3044\u3067\u306a\u304b\u3063\u305f\u5834\u5408\u3082\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001Stream Selector\u306edefault\u306e\u51fa\u529b\u306b\u300cExpression Evaluator\u300d\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nExpression\u30bf\u30d6\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nOutput Field: n/a\nHeader attribute\u306f\u524a\u9664\n\n\u7d42\u308f\u3063\u305f\u3089\u3001Expression Evaluator\u3068Hadoop FS\u3092\u3064\u306a\u304e\u307e\u3059\u3002\n\n\n\u30c7\u30fc\u30bf\u30eb\u30fc\u30eb\u3068\u30a2\u30e9\u30fc\u30c8\u306e\u4f5c\u6210\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u6700\u5f8c\u3067\u3059\u3002Stream Selector\u304b\u3089Jython Evaluator\u306e\u9593\u306e\u7dda\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u30c7\u30fc\u30bf\u304c\u306a\u3044\uff08\u30a8\u30e9\u30fc\uff09\u306e\u5834\u5408\u306e\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3092\u3057\u3066\u3044\u307e\u3059\u3002\nData Rule\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\n- Label: Missing Card Numbers\n- Condition: ${recod:value(\"/credit_card\")==\"\"}\n- Sampling Percentage: 35\n- Alert text: At least 10 missing credit card numbers!\n- Threshold Value: 10\n\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u5b9f\u884c\u3059\u308b\n\u3044\u3088\u3044\u3088\u5b9f\u884c\u3067\u3059\u3002\u25b6\ufe0e\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u306e\u30a8\u30e9\u30fc\u306f40\u4ef6\u306e\u3088\u3046\u3067\u3059\u3002\n\n\u51fa\u529b\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3082\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u306f\u30de\u30b9\u30af\u3055\u308c\u3001\u6700\u5f8c\u306e\u5217\u306b\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n[cloudera@quickstart origin]$ head /streamsets/tutorial/destination/_tmp__out\nF6F7D02179BE915B23EF2DB57836442D,088879B44B80CC9ED43724776C539370,VTS,CRD,12,0.5,0.5,1.75,0,14.75,1,2013-01-13 04:36asdf,2013-01-13 04:46asdf,5,600,3.12,-73.996933,40.720055,-73.993546,40.693043,xxxxxxxxxxxx2922,Visa\nBE386D8524FCD16B3727DCF0A32D9B25,4EB96EC9F3A42794DEE233EC8A2616CE,VTS,CRD,12,0.5,0.5,3.12,0,16.12,1,2013-01-13 04:37:00,2013-01-13 04:48:00,2,660,3.39,-74.000313,40.730068,-73.987373,40.768406,xxxxxxxxxxxx0902,MasterCard\nE9FF471F36A91031FE5B6D6228674089,72E0B04464AD6513F6A613AABB04E701,VTS,CRD,5.5,0.5,0.5,1.2,0,7.7,1,2013-01-13 04:41:00,2013-01-13 04:45:00,1,240,1.16,-73.997292,40.720982,-74.000443,40.732376,xxxxxxxxxxxx9608,Visa\nA5D125F5550BE7822FC6EE156E37733A,08DB3F9FCF01530D6F7E70EB88C3AE5B,VTS,CRD,11,0.5,0.5,2,0,14,1,2013-01-13 04:37:00,2013-01-13 04:47:00,5,600,2.91,-73.966843,40.756741,-73.987885,40.722713,xxxxxxxxxxxx7252,Visa\nEE1513D432B07F7E0B5E2ED1EF629086,F31D261881520931062C011366E56A04,VTS,CRD,18,0.5,0.5,3.7,0,22.7,1,2013-01-13 04:30:00,2013-01-13 04:44:00,6,840,5.21,-74.005455,40.740772,-73.967354,40.798096,xxxxxxxxxxx7913,AMEX\n\n\n\u307e\u3068\u3081\n\u6b63\u76f4\u306b\u8a00\u3063\u3066\u304b\u306a\u308a\u4f7f\u3044\u6613\u3044\u3068\u601d\u3044\u307e\u3059\u3002HDFS\u3001HBase\u3001Kafka\u7b49\u3001\u69d8\u3005\u306a\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u306e\u3067\u3001\u4e00\u5ea6\u8a66\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u304a\u307e\u3051\nCloudera Manager\u3067Data Collector\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\n\nCloudera Manager\u3092\u4f7f\u3063\u3066\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305fData Collector\u306eGUI\u304b\u3089\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n<img width=\"1386\" alt=\"t26.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/335d0e70-889b-42b9-8ed2-1a9b3c902612.png\">\n\n\nStreamSets\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u4eca\u56de\u306fBasic Tutorial\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nhttps://streamsets.com/documentation/datacollector/latest/help/#Tutorial/Tutorial-title.html\n\n# \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```\n[cloudera@quickstart ~]$ sudo mkdir /streamsets\n[cloudera@quickstart ~]$ mkdir -p /streamsets/tutorial/origin\n[cloudera@quickstart ~]$ mkdir -p /streamsets/tutorial/destination\n[cloudera@quickstart ~]$ mkdir -p /streamsets/tutorial/error\n[cloudera@quickstart ~]$ sudo chmod -R 777 /streamsets\n[cloudera@quickstart ~]$ cd /streamsets/tutorial/origin/\n[cloudera@quickstart origin]$ wget https://www.streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv\n--2016-07-20 01:56:40--  https://www.streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv\nResolving www.streamsets.com... 162.242.235.205\nConnecting to www.streamsets.com|162.242.235.205|:443... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: https://streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv [following]\n--2016-07-20 01:56:41--  https://streamsets.com/documentation/datacollector/sample_data/tutorial/nyc_taxi_data.csv\nResolving streamsets.com... 162.242.235.205\nConnecting to streamsets.com|162.242.235.205|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 1054132 (1.0M) [text/csv]\nSaving to: \u201cnyc_taxi_data.csv\u201d\n\n100%[======================================>] 1,054,132    828K/s   in 1.2s    \n\n2016-07-20 01:56:43 (828 KB/s) - \u201cnyc_taxi_data.csv\u201d saved [1054132/1054132]\n\n[cloudera@quickstart origin]$ \n```\n\n# \u57fa\u672c\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\n\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u4f5c\u6210\u3068\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u5b9a\u7fa9\n\n\u307e\u305a\u306fGUI\u304b\u3089\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002Data Collector \u306e Web UI\u304b\u3089\u300cCreate New Pipeline\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n<img width=\"1386\" alt=\"ss_top2.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/957f19fd-1c2b-dbfc-e28e-281ec7478c08.png\">\n\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u540d\u524d\u306f Tutorial1 \u3068\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n<img width=\"536\" alt=\"t1.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/f7c06700-48cf-b4d4-8814-d02b5cc1562c.png\">\n\n\u300cSave\u300d\u3092\u62bc\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3068\u3001\u7a7a\u306e\u30ad\u30e3\u30f3\u30d0\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n<img width=\"1384\" alt=\"t2.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/c3c11b44-bda5-0f26-a36e-89cdc8b103d6.png\">\n\n\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u8aac\u660e\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://streamsets.com/documentation/datacollector/latest/help/#Pipeline_Configuration/DataCollectorWindow-Config.html\n\n## Directory Origin \u3092\u8a2d\u5b9a\u3059\u308b\n\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u300c\u5165\u308a\u53e3\u300d\u306b\u76f8\u5f53\u3059\u308b\u306e\u304cOrigin\u3067\u3059\u3002\u4eca\u56de\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306eCSV\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092Origin\u306b\u3057\u307e\u3059\u3002\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u30e1\u30cb\u30e5\u30fc\u306e\u300cSelect Origin\u300d -> \u300cDirectory\u300d\u3092\u9078\u629e\u3059\u308b\u304b\u3001\u53f3\u5074\u306eStage Library\u304b\u3089Directory Origin\u3092\u9078\u3073\u307e\u3059\u3002\n\n<img width=\"477\" alt=\"t3.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/7939d4d5-73a1-2421-d41d-905b0d450436.png\">\n\n<img width=\"169\" alt=\"t4.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/58cd19c0-27a3-18c2-0c36-2aa81cde6de3.png\">\n\n\u30ad\u30e3\u30f3\u30d0\u30b9\u306b Directory Origin\u304c\u914d\u7f6e\u3055\u308c\u307e\u3057\u305f\u3002\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u4e0b\u306e\u753b\u9762\u304b\u3089Files\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u6b21\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n- Data Format: Delimited\n- Files Directory: /streamsets/tutorial/origin\n- Read Order: Last Modified Timestamp\n- File Name Pattern: *taxi*.csv\n- First File to Process: \u7a7a\u306e\u307e\u307e\n\nData Format\u306bDelimited\u3092\u6307\u5b9a\u3059\u308b\u3068Delimited\u30bf\u30d6\u3067\u8a73\u7d30\u8a2d\u5b9a\u304c\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n- File Type: Default CSV\n- Header Line: With Header Line (CSV\u306e\u5148\u982d\u884c\u306b\u30d8\u30c3\u30c0\u884c\u304c\u3042\u308b\u306e\u3067\uff09\n- Root Field Type: List-Map\n\n## \u30c7\u30fc\u30bf\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\n\nOrigin\u3067\u767b\u9332\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30d7\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30c7\u30fc\u30bf\u304c\u6b63\u3057\u3044\u304b\u3069\u3046\u304b\u3092GUI\u304b\u3089\u300c\u898b\u308b\u300d\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u306f\u4fbf\u5229\u3067\u3059\u306d\u3002\n\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u3088\u308c\u3070\u3001\u3053\u306e\u72b6\u614b\u3067Preview\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u624b\u5143\u306e\u74b0\u5883\u3067\u306f\u3046\u307e\u304f\u3044\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5de6\u5074\u306e\u2757\ufe0f\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30a8\u30e9\u30fc\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002\u4eca\u56de\u306fCREATION_009\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n<img width=\"1233\" alt=\"t7.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/20dc9a22-2afe-4c9d-d753-2445161b64ae.png\">\n\n\u30a8\u30e9\u30fc\u30c7\u30fc\u30bf\u306e\u6271\u3044\u3092\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u307e\u305a\u306f\u7121\u8996\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n- Error Record: Discard (Libary Basic) \n\n\u4eca\u5ea6\u306fPreview\u30a2\u30a4\u30b3\u30f3\u304c\u30af\u30ea\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d7\u30ec\u30d3\u30e5\u30fc\u3057\u307e\u3057\u3087\u3046\u3002\n\n<img width=\"520\" alt=\"t9.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/0f0257c5-e838-a6a4-3ee1-3b289727ddd1.png\">\n\n<img width=\"1223\" alt=\"t10.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/8db1994e-d337-84b5-671d-4e4cf20aa12c.png\">\n\n\u51fa\u529b\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002CSV\u30d5\u30a1\u30a4\u30eb\u306e\u5404\u5217\u3092\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n<img width=\"666\" alt=\"t11.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/e51114ac-64b8-6f9f-7e3c-62401d9791a2.png\">\n\n\u30c6\u30fc\u30d6\u30eb\u5f62\u5f0f\u3067\u3082\u8868\u793a\u3067\u304d\u307e\u3059\uff01\u3053\u308c\u3001CSV\u30d5\u30a1\u30a4\u30eb\u3092\u30a8\u30c7\u30a3\u30bf\u306a\u3069\u3067\u898b\u308b\u5fc5\u8981\u306a\u3044\u3067\u3059\u3057\u3001\u30d8\u30c3\u30c0\u884c\u3082\u8868\u793a\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3057\u3001\u4fbf\u5229\u3067\u3059\u306d\u3047....\n\n<img width=\"1385\" alt=\"t12.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/ff81369d-1077-493f-7fe2-d1e927c07f67.png\">\n\n\u4eca\u56de\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001\u652f\u6255\u3044\u30bf\u30a4\u30d7(/payment_type)\u3068\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831(/credit_card)\u5217\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u3067\u3059\u3002\u7d42\u308f\u3063\u305f\u3089 Close Preview \u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n<img width=\"69\" alt=\"t13.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/40c7a251-7422-1a2f-826c-44eeaf8cf041.png\">\n\n## Stream Selector \u3067\u30c7\u30fc\u30bf\u306e\u7d4c\u8def\u3092\u4f5c\u308b\n\n\u300cSelect Processor to Connect\u300d->\u300cStream Selector\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n<img width=\"506\" alt=\"t14.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/1e853e46-7af6-69b9-8786-98b8bf54f161.png\">\n\nStream Selector \u306e General \u30bf\u30d6\u3067\u3001Required Fields \u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n<img width=\"1218\" alt=\"t15.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/2f5cfc1d-9a30-1f19-50b9-abd5339aac96.png\">\n\n\u4eca\u56de\u306f\u652f\u6255\u3044\u306e\u7a2e\u985e\u304c\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u3092discard\u3057\u305f\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n- Required Fields: /payment_type\n\nCondition\u30bf\u30d6\u3067\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u6761\u4ef6\u306b\u3088\u308a\u7d4c\u8def\u304c\u5909\u308f\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u30c7\u30fc\u30bf(\u652f\u6255\u3044\u306e\u7a2e\u985e\u304c\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\uff09\u304c\u51fa\u529b\u30b9\u30c8\u30ea\u30fc\u30e0\uff08\uff11\uff09\u306b\u6d41\u308c\u3066\u3044\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u6e80\u305f\u3055\u306a\u304b\u3063\u305f\u30c7\u30fc\u30bf\u306f(2)\u306b\u6d41\u308c\u307e\u3059\u3002\u6761\u4ef6\u306e\u6307\u5b9a\u306e\u69cb\u6587\u3092\u899a\u3048\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u81ea\u52d5\u88dc\u5b8c\u304c\u826f\u304f\u3067\u304d\u3066\u3044\u308b\u306e\u3067\u3001\u5272\u3068\u30b5\u30af\u30b5\u30af\u5165\u529b\u3067\u304d\u308b\u5370\u8c61\u3067\u3059\u3002\n\n- ${record:value('/payment_type')=='CRD'}\n\n<img width=\"1224\" alt=\"t16.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/02df90ce-e1e0-8f5a-6907-7762f748cbcc.png\">\n\n\uff12\u7cfb\u7d71\u306e\u51fa\u529b\u304c\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u306d\u3002\n\n## Jython\u3092\u4f7f\u7528\u3057\u3066\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u3092\u53d6\u5f97\u3059\u308b\n\n\u30b9\u30c8\u30ea\u30fc\u30e0\u4e2d\u306e\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u305f\u3081\u3001Jython\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u300cSelect processor to connect\u300d\u304b\u3089Jython Evaluator processor\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n<img width=\"685\" alt=\"t17.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/2ff11de6-f8d3-8640-dd36-5b49808e3d2d.png\">\n\n\u7d9a\u3044\u3067Jython\u30bf\u30d6\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306b\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306eJython\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002\n\n<img width=\"1203\" alt=\"t18.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/b371a848-fb10-3f1e-7462-fc11106a168b.png\">\n\n## \u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u30de\u30b9\u30af\u3059\u308b\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u3001\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3059\u308b\u306e\u306f\u907f\u3051\u305f\u3044\u3082\u306e\u3067\u3059\u3002Data Collector\u306b\u306f\u30de\u30b9\u30af\u306e\u6a5f\u80fd\u3082\u3042\u308b\u306e\u3067\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3067\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u30de\u30b9\u30af\u3057\u307e\u3059\u3002\u5148\u307b\u3069\u3068\u540c\u69d8\u306e\u624b\u9806\u3067\u3001\u30ad\u30e3\u30f3\u30d0\u30b9\u306bField Masker\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3057\u3001\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u3063\u3066\u30de\u30b9\u30af\u3057\u307e\u3059\u3002\n\n- Mask Type: Regular Expression\n- Regular Expression: (.*)([0-9]{4})\n- Groups to Show: 2\n\n<img width=\"1226\" alt=\"t19.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/5be5db68-ed9c-d324-a5e0-cafcd2a15d5e.png\">\n\n\n## Destination \u306b\u66f8\u304d\u8fbc\u3080\n\n\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u7d50\u679c\u306e\u51fa\u529b\u5148\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306eCloudera Manager\u7ba1\u7406\u3057\u3066\u3044\u308bHDFS\u304c\u3042\u308b\u308f\u3051\u3067\u3059\u304b\u3089\u4eca\u56de\u306fHDFS\u3092\u6307\u5b9a\u3057\u3088\u3046\u304b\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001Kerberos\u5316\u3057\u3066\u3044\u305f\u306e\u5f8c\u65e5\u8a66\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u300cSelect Destination to Connect\u300d\u304b\u3089\u300cHadoop FS - CDH5.7.1\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n<img width=\"780\" alt=\"t20.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/fce91f25-10bf-e997-3814-261011f196e9.png\">\n\nHadoop FS Property\u306f\u3001\u66ab\u5b9a\u7684\u306b\u66f8\u304d\u8fbc\u307f\u5148\u3092 file:///\u306b\u3057\u307e\u3059\u3002\n\n- Hadoop FS URI: file:///\n- HDFS user: cloudera\n\n<img width=\"1220\" alt=\"t21.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/5a92a635-5b6e-b245-512a-63818362adca.png\">\n\nOutput Files\u30bf\u30d6\u3067\u4ee5\u4e0b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n- Data Format: Delimited\n- File Prefix: _out\n- Directory Template: /streamsets/tutorial/destination\n- Data Timezone: JST\n\nDelimited\u30bf\u30d6\u3067\u4ee5\u4e0b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n- Header Line: With Header Line\n\n## Expression Evaluator\u3067\u5bfe\u5fdc\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3059\u308b\n\n\u5148\u307b\u3069\u306eJython Evaluator\u3067\u306f\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u306e\u30c7\u30fc\u30bf\u3092\u51e6\u7406\u3057\u3001\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u30c7\u30fc\u30bf\u3092\u30d7\u30ec\u30d3\u30e5\u30fc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u300cPreview\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Jython Evaluator\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u5165\u529b\u30c7\u30fc\u30bf\u3068\u51fa\u529b\u30c7\u30fc\u30bf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u671f\u5f85\u901a\u308a\uff08\uff1f\uff09\u3001\u51fa\u529b\u306b\u306fcredit_card_type\u306e\u30c7\u30fc\u30bf\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u306d\uff01\n\n<img width=\"1382\" alt=\"t22.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/50199e2e-dd7d-82ad-d618-05e68ce524e2.png\">\n\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u652f\u6255\u3044\u3067\u306a\u304b\u3063\u305f\u5834\u5408\u3082\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001Stream Selector\u306edefault\u306e\u51fa\u529b\u306b\u300cExpression Evaluator\u300d\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n<img width=\"1222\" alt=\"t23.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/97bbdd2e-0a93-d728-8612-66c24fc5c0fe.png\">\n\nExpression\u30bf\u30d6\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n- Output Field: n/a\n- Header attribute\u306f\u524a\u9664\n\n\u7d42\u308f\u3063\u305f\u3089\u3001Expression Evaluator\u3068Hadoop FS\u3092\u3064\u306a\u304e\u307e\u3059\u3002\n\n<img width=\"1221\" alt=\"t24.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/aa3ed875-76b3-4525-15ca-52774e910936.png\">\n\n## \u30c7\u30fc\u30bf\u30eb\u30fc\u30eb\u3068\u30a2\u30e9\u30fc\u30c8\u306e\u4f5c\u6210\n\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u6700\u5f8c\u3067\u3059\u3002Stream Selector\u304b\u3089Jython Evaluator\u306e\u9593\u306e\u7dda\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u30c7\u30fc\u30bf\u304c\u306a\u3044\uff08\u30a8\u30e9\u30fc\uff09\u306e\u5834\u5408\u306e\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\nData Rule\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\n- Label: Missing Card Numbers\n- Condition: ${recod:value(\"/credit_card\")==\"\"}\n- Sampling Percentage: 35\n- Alert text: At least 10 missing credit card numbers!\n- Threshold Value: 10\n\n\n#\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u5b9f\u884c\u3059\u308b\n\n\u3044\u3088\u3044\u3088\u5b9f\u884c\u3067\u3059\u3002\u25b6\ufe0e\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n<img width=\"1386\" alt=\"t26.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/a490eeca-dedd-9cb8-6cbd-dafc78573408.png\">\n\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u306e\u30a8\u30e9\u30fc\u306f40\u4ef6\u306e\u3088\u3046\u3067\u3059\u3002\n\n<img width=\"1367\" alt=\"t27.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/11571611-23b7-6749-1e73-af7cb9cba732.png\">\n\n\u51fa\u529b\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3082\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\u306f\u30de\u30b9\u30af\u3055\u308c\u3001\u6700\u5f8c\u306e\u5217\u306b\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n[cloudera@quickstart origin]$ head /streamsets/tutorial/destination/_tmp__out\nF6F7D02179BE915B23EF2DB57836442D,088879B44B80CC9ED43724776C539370,VTS,CRD,12,0.5,0.5,1.75,0,14.75,1,2013-01-13 04:36asdf,2013-01-13 04:46asdf,5,600,3.12,-73.996933,40.720055,-73.993546,40.693043,xxxxxxxxxxxx2922,Visa\nBE386D8524FCD16B3727DCF0A32D9B25,4EB96EC9F3A42794DEE233EC8A2616CE,VTS,CRD,12,0.5,0.5,3.12,0,16.12,1,2013-01-13 04:37:00,2013-01-13 04:48:00,2,660,3.39,-74.000313,40.730068,-73.987373,40.768406,xxxxxxxxxxxx0902,MasterCard\nE9FF471F36A91031FE5B6D6228674089,72E0B04464AD6513F6A613AABB04E701,VTS,CRD,5.5,0.5,0.5,1.2,0,7.7,1,2013-01-13 04:41:00,2013-01-13 04:45:00,1,240,1.16,-73.997292,40.720982,-74.000443,40.732376,xxxxxxxxxxxx9608,Visa\nA5D125F5550BE7822FC6EE156E37733A,08DB3F9FCF01530D6F7E70EB88C3AE5B,VTS,CRD,11,0.5,0.5,2,0,14,1,2013-01-13 04:37:00,2013-01-13 04:47:00,5,600,2.91,-73.966843,40.756741,-73.987885,40.722713,xxxxxxxxxxxx7252,Visa\nEE1513D432B07F7E0B5E2ED1EF629086,F31D261881520931062C011366E56A04,VTS,CRD,18,0.5,0.5,3.7,0,22.7,1,2013-01-13 04:30:00,2013-01-13 04:44:00,6,840,5.21,-74.005455,40.740772,-73.967354,40.798096,xxxxxxxxxxx7913,AMEX\n```\n\n\n# \u307e\u3068\u3081\n\n\u6b63\u76f4\u306b\u8a00\u3063\u3066\u304b\u306a\u308a\u4f7f\u3044\u6613\u3044\u3068\u601d\u3044\u307e\u3059\u3002HDFS\u3001HBase\u3001Kafka\u7b49\u3001\u69d8\u3005\u306a\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u306e\u3067\u3001\u4e00\u5ea6\u8a66\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\n## \u304a\u307e\u3051\nCloudera Manager\u3067Data Collector\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\n<img width=\"1379\" alt=\"t28.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13776/9f741d72-c221-2c7b-2a4d-26761d267215.png\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "tags": ["streamsets", "DataPipeline", "Hdfs", "hadoop"]}