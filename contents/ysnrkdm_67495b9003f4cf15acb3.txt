{"tags": ["Haskell", "Swift", "ghc-ios", "ghc"], "context": "\n\n\u3053\u306e\u8a18\u4e8b\u306f\nhttp://blog.euphonictech.com/entry/2015/03/30/235956\u304b\u3089\u306e\u8ee2\u8f09\u3067\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306e\u76ee\u6a19\u306f\n\u3082\u306e\u3059\u3054\u304f\u7c21\u5358\u306a\u95a2\u6570\u3092Haskell\u3067\u66f8\u3044\u3066\u3001\u305d\u308c\u3092Swift\u304b\u3089\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\u4eca\u56de\u547c\u3073\u51fa\u3059\u95a2\u6570\u306f\nplus10 :: Int -> IO Int\nplus10 i = do\n    putStrLn \"Called!\"\n    return $ i + 10\n\n\u3067\u3059\u3002\u306a\u3093\u3082\u3057\u306a\u3044\u95a2\u6570\u3067\u3059\u306d\u3002\u6210\u529f\u3059\u308c\u3070stdout\u306b\"Called!\"\u304c\u51fa\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u307e\u305a\u306f\u304a\u6c7a\u307e\u308a\u306eghc-ios\u7528xcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\nHaskelliOS.xcconfig\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nhttps://github.com/ghc-ios/ghc-ios-scripts\u306b\u8aac\u660e\u3068\u3068\u3082\u306b\u3042\u308a\u307e\u3059\u3002\n\nInfo -> Configurations \u3092\u4e21\u65b9HaskelliOS\u306b\u5909\u66f4\n\n\nPROJECT -> Build Settings -> Architectures -> Build Active Architecture Only\u3092\u3059\u3079\u3066NO\u306b\n\n\n\u305d\u3057\u3066\u8ffd\u52a0\u3067 libconv*.dylib\u3092\u8ffd\u52a0\nlibconv\u304c\u306a\u3044\u3068\u30ea\u30f3\u30ab\u304c\u901a\u3089\u306a\u3044\u306e\u3067\u9069\u5f53\u306blibconv*.dylib\u3092\u3059\u3079\u3066\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n\n\u307e\u305a\u306fghc-ios\u3067\u30d0\u30a4\u30ca\u30ea\u3068\u30b9\u30bf\u30d6\u30d8\u30c3\u30c0\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fFFI\u3092\u4f7f\u3063\u3066\u3053\u3093\u306a\u611f\u3058\u306b:\n{-# LANGUAGE ForeignFunctionInterface #-}\nmodule Counter where\nimport Control.Monad\n\nforeign export ccall plus10 :: Int -> IO Int\n\nplus10 :: Int -> IO Int\nplus10 i = do\n    putStrLn \"Called!\"\n    return $ i + 10\n\n\u3068\u3044\u3046\u611f\u3058\u3067plus10\u3092foreign export ccall\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u305d\u3046\u3059\u308b\u3068\u3053\u306e\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u304c\u30b9\u30bf\u30d6\u30d8\u30c3\u30c0\u306b\u51fa\u3066\u304d\u307e\u3059\u3002\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u306f\u9069\u5f53\u3067\u3059\u3002ghc-ios\u306e\u4f8b\u3092\u305d\u306e\u307e\u307e\u6539\u5909\u3057\u305f\u306e\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u304c\u6b8b\u3063\u3066\u3044\u307e\u3059\u3002\nHaskell\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306fXcode\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u76f4\u4e0b\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6398\u3063\u3066\u305d\u306e\u4e2d\u306bIntelliJ\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u307e\u308b\u3054\u3068\u5165\u308c\u3066\u304a\u304f\u3068\u5168\u90e8\u7c21\u5358\u306bGithub\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u3066\u304a\u3059\u3059\u3081\u3067\u3059\u3002\n\u3053\u308c\u3092\u30d3\u30eb\u30c9\u3057\u3066hoge.a\u30d5\u30a1\u30a4\u30eb\u3068hoge_stub.h\u3092\u4f5c\u308a\u307e\u3059\u3002\n$ ghc-ios src/*.hs\n[1 of 1] Compiling Counter          ( src/Main.hs, build/arm/Counter.o )\nLinking build/arm/Main.a ...\n[1 of 1] Compiling Counter          ( src/Main.hs, build/i386/Counter.o )\nLinking build/i386/Main.a ...\n\n\u3053\u308c\u3067\u51fa\u6765\u4e0a\u304c\u308a\u3067\u3059\u3002\n\n\u30d3\u30eb\u30c9\u3057\u305f\u3082\u306e\u3092Xcode\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n\n\u4f7f\u3048\u308b\u3088\u3046\u306binclude\u3057\u307e\u3059\u3002\n\u666e\u901a\u306bSwift\u304b\u3089\u306fimport\u3067\u304d\u306a\u3044\u306e\u3067\u30d6\u30ea\u30c3\u30b8\u30d8\u30c3\u30c0\u306bimport\u3092\u3057\u307e\u3059\u3002\n\u30d6\u30ea\u30c3\u30b8\u30d8\u30c3\u30c0\u306e\u540d\u524d\u306f<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d>-Bridging-Header.h\u3068\u3057\u307e\u3059\u3002\n\n#ifndef FlatReversi_FlatReversi_Bridging_Header_h\n#define FlatReversi_FlatReversi_Bridging_Header_h\n\n#import \"intrinsics.h\"\n#import \"HsFFI.h\"\n#import \"Counter_stub.h\"\n\n#endif\n\n\u3053\u3093\u306a\u611f\u3058\u3067HsFFI.h\u3068Counter_stub.h(\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044)\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\nHsFFI.h\u306fHaskell\u30b7\u30b9\u30c6\u30e0\u3092\u521d\u671f\u5316\u3059\u308b\u30b3\u30fc\u30c9\u306e\u547c\u3073\u51fa\u3057\u306b\u5fc5\u8981\u3067\u3059\u3002\n\nhs_init\u3092\u547c\u3073\u51fa\u3057\u3066Haskell\u30b7\u30b9\u30c6\u30e0\u3092\u521d\u671f\u5316\u3059\u308b\u3002\nhs_init\u3092\u547c\u3073\u51fa\u3059\u307e\u3067\u306fHaskell\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u4e07\u304c\u4e00\u547c\u3073\u51fa\u3059\u3068\u305d\u306e\u307e\u307e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u3068\u3082\u306b\u505c\u6b62\u3057\u307e\u3059\u3002\n\u547c\u3073\u51fa\u3059\u5834\u6240\u306f\u306a\u308b\u3079\u304f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u521d\u671f\u5316\u5834\u6240\u306b\u8fd1\u3044\u3068\u3053\u308d\u304c\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u307b\u3069\u521d\u671f\u5316\u5730\u70b9\u306b\u62d8\u308b\u5fc5\u8981\u306f\u4eca\u306e\u3068\u3053\u308d\u3042\u308a\u307e\u305b\u3093\u3002\u6700\u521d\u306eHaskell\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u524d\u3067\u3042\u308c\u3070\u3069\u3053\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\u306a\u306e\u3067AppDelegate\u306e\u4e2d\u3067\u547c\u3073\u51fa\u3059\u306e\u304c\u3088\u3044\u3067\u3057\u3087\u3046\u3002\nimport UIKit\n\n@asmname(\"hs_init\")\n    func hs_init(UnsafePointer<String>, UnsafePointer<Int>)\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    var window: UIWindow?\n\n\n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        // Override point for customization after application launch.\n        hs_init(nil, nil);\n        NSLog(\"hs_init initialized!\");\n        return true\n    }\n...\n\n\u3068\u3044\u3046\u611f\u3058\u3067 (1) hs_init\u3092Swift\u5185\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u5ba3\u8a00\u3057\u3001(2) \u5b9f\u969b\u306b\u547c\u3073\u51fa\u3057\u3092\u3057\u307e\u3059\u3002\n\nhs_init\u306fHsFFI.h\u3067\u307f\u3066\u307f\u308b\u3068\n\n```c\nextern void hs_init     (int *argc, char **argv[]);\n\n\u306a\u306e\u3067\u3001\u7b2c\u4e00\u5f15\u6570\u306fUnsafeMutablePointer<int>\u3068\u3057\u307e\u3059\u3002\u7b2c\u4e8c\u5f15\u6570\u306fUnsafeMutablePointer<String>\u3068\u3057\u307e\u3059\u3002const\u3064\u3044\u3066\u3044\u306a\u3044\u306e\u3067Mutable\u306b\u3057\u307e\u3059\u3002\nhs_init(nil, nil)\u3067\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\u306a\u306e\u3067Mutable\u306f\uff08\u7d50\u5c40\uff09\u3069\u3063\u3061\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\u306a\u3093\u3084\u306d\u3093\u3002\n\n\u4f5c\u3063\u305f\u95a2\u6570plus10\u3092\u547c\u3073\u51fa\u3059\u3002\n\u540c\u3058\u8981\u9818\u3067\u4e0a\u3067\u66f8\u3044\u305f\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\u518d\u63b2\u3059\u308b\u3068\nplus10 :: Int -> IO Int\nplus10 i = do\n    putStrLn \"Called!\"\n    return $ i + 10\n\n\u3067\u3059\u3002Swift\u98a8\u306b\u8a00\u3046\u3068\u578b\u306fInt -> Int\u3067\u3059\u3002\u306a\u306e\u3067\n\nimport Foundation\n\n@asmname(\"plus10\")\n    func plus10(Int) -> Int\n\nclass SearchEvalPlayer: ComputerPlayer {\n\n\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u3067\u95a2\u6570\u3092\u5ba3\u8a00\u3057\u307e\u3059\u3002\n\u4f7f\u3046\u5834\u6240\u3067\u306f\u666e\u901a\u306e\u95a2\u6570\u3068\u304b\u308f\u308a\u306a\u304f\u4f7f\u3048\u307e\u3059(\u3053\u306e\u4f8b\u3067\u306f\u8fd4\u308a\u5024\u4f7f\u3063\u3066\u306a\u3044\u3067\u3059\u306d)\u3002\n\n    override func think() {\n        NSLog(\"Start thinking\")\n\n        plus10(20)\n\n        var retx = 0\n        var rety = 0\n...\n\n\u3068\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n\u3067\u304d\u305f\uff01\n# \u3053\u306e\u8a18\u4e8b\u306f\nhttp://blog.euphonictech.com/entry/2015/03/30/235956\u304b\u3089\u306e\u8ee2\u8f09\u3067\u3059\u3002\n\n# \u3053\u306e\u8a18\u4e8b\u306e\u76ee\u6a19\u306f\n\n\u3082\u306e\u3059\u3054\u304f\u7c21\u5358\u306a\u95a2\u6570\u3092Haskell\u3067\u66f8\u3044\u3066\u3001\u305d\u308c\u3092Swift\u304b\u3089\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u4eca\u56de\u547c\u3073\u51fa\u3059\u95a2\u6570\u306f\n\n```haskell\nplus10 :: Int -> IO Int\nplus10 i = do\n    putStrLn \"Called!\"\n    return $ i + 10\n```\n\n\u3067\u3059\u3002\u306a\u3093\u3082\u3057\u306a\u3044\u95a2\u6570\u3067\u3059\u306d\u3002\u6210\u529f\u3059\u308c\u3070stdout\u306b\"Called!\"\u304c\u51fa\u308b\u306f\u305a\u3067\u3059\u3002\n\n# \u307e\u305a\u306f\u304a\u6c7a\u307e\u308a\u306eghc-ios\u7528xcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\n### HaskelliOS.xcconfig\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\nhttps://github.com/ghc-ios/ghc-ios-scripts\u306b\u8aac\u660e\u3068\u3068\u3082\u306b\u3042\u308a\u307e\u3059\u3002\n\n### Info -> Configurations \u3092\u4e21\u65b9HaskelliOS\u306b\u5909\u66f4\n\n![20150126205627.png](https://qiita-image-store.s3.amazonaws.com/0/52015/1721e3ac-b56d-3649-2ea7-c57129855cd3.png)\n\n### PROJECT -> Build Settings -> Architectures -> Build Active Architecture Only\u3092\u3059\u3079\u3066```NO```\u306b\n\n![20150126205617.png](https://qiita-image-store.s3.amazonaws.com/0/52015/7bb3211f-2cfa-bccf-26ce-c3b12a2a84ca.png)\n\n## \u305d\u3057\u3066\u8ffd\u52a0\u3067 libconv*.dylib\u3092\u8ffd\u52a0\n\nlibconv\u304c\u306a\u3044\u3068\u30ea\u30f3\u30ab\u304c\u901a\u3089\u306a\u3044\u306e\u3067\u9069\u5f53\u306blibconv*.dylib\u3092\u3059\u3079\u3066\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n![20150330232339.png](https://qiita-image-store.s3.amazonaws.com/0/52015/5b159b5c-c7ec-2521-4233-8b98baa6a00d.png)\n\n![20150330232406.png](https://qiita-image-store.s3.amazonaws.com/0/52015/4b94be2a-a7ba-78f7-ad76-d687b45782d3.png)\n\n## \u307e\u305a\u306fghc-ios\u3067\u30d0\u30a4\u30ca\u30ea\u3068\u30b9\u30bf\u30d6\u30d8\u30c3\u30c0\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fFFI\u3092\u4f7f\u3063\u3066\u3053\u3093\u306a\u611f\u3058\u306b:\n\n```haskell\n{-# LANGUAGE ForeignFunctionInterface #-}\nmodule Counter where\nimport Control.Monad\n\nforeign export ccall plus10 :: Int -> IO Int\n\nplus10 :: Int -> IO Int\nplus10 i = do\n    putStrLn \"Called!\"\n    return $ i + 10\n```\n\n\u3068\u3044\u3046\u611f\u3058\u3067```plus10```\u3092```foreign export ccall```\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u305d\u3046\u3059\u308b\u3068\u3053\u306e\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u304c\u30b9\u30bf\u30d6\u30d8\u30c3\u30c0\u306b\u51fa\u3066\u304d\u307e\u3059\u3002\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u306f\u9069\u5f53\u3067\u3059\u3002ghc-ios\u306e\u4f8b\u3092\u305d\u306e\u307e\u307e\u6539\u5909\u3057\u305f\u306e\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u304c\u6b8b\u3063\u3066\u3044\u307e\u3059\u3002\n\nHaskell\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306fXcode\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u76f4\u4e0b\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6398\u3063\u3066\u305d\u306e\u4e2d\u306bIntelliJ\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u307e\u308b\u3054\u3068\u5165\u308c\u3066\u304a\u304f\u3068\u5168\u90e8\u7c21\u5358\u306bGithub\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u3066\u304a\u3059\u3059\u3081\u3067\u3059\u3002\n\n\u3053\u308c\u3092\u30d3\u30eb\u30c9\u3057\u3066```hoge.a```\u30d5\u30a1\u30a4\u30eb\u3068```hoge_stub.h```\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```\n$ ghc-ios src/*.hs\n[1 of 1] Compiling Counter          ( src/Main.hs, build/arm/Counter.o )\nLinking build/arm/Main.a ...\n[1 of 1] Compiling Counter          ( src/Main.hs, build/i386/Counter.o )\nLinking build/i386/Main.a ...\n```\n\n\u3053\u308c\u3067\u51fa\u6765\u4e0a\u304c\u308a\u3067\u3059\u3002\n\n## \u30d3\u30eb\u30c9\u3057\u305f\u3082\u306e\u3092Xcode\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n![20150330233151.png](https://qiita-image-store.s3.amazonaws.com/0/52015/2207d14c-ab2b-8d36-1cfa-4ee3460acac5.png)\n\n## \u4f7f\u3048\u308b\u3088\u3046\u306b```include```\u3057\u307e\u3059\u3002\n\n\u666e\u901a\u306bSwift\u304b\u3089\u306f```import```\u3067\u304d\u306a\u3044\u306e\u3067\u30d6\u30ea\u30c3\u30b8\u30d8\u30c3\u30c0\u306b```import```\u3092\u3057\u307e\u3059\u3002\n\n\u30d6\u30ea\u30c3\u30b8\u30d8\u30c3\u30c0\u306e\u540d\u524d\u306f```<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d>-Bridging-Header.h```\u3068\u3057\u307e\u3059\u3002\n\n![20150330233250.png](https://qiita-image-store.s3.amazonaws.com/0/52015/3fa955f7-70f4-c33d-3a07-9e5dbf77c8e1.png)\n\n```swing\n#ifndef FlatReversi_FlatReversi_Bridging_Header_h\n#define FlatReversi_FlatReversi_Bridging_Header_h\n\n#import \"intrinsics.h\"\n#import \"HsFFI.h\"\n#import \"Counter_stub.h\"\n\n#endif\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067```HsFFI.h```\u3068```Counter_stub.h```(\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044)\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\nHsFFI.h\u306fHaskell\u30b7\u30b9\u30c6\u30e0\u3092\u521d\u671f\u5316\u3059\u308b\u30b3\u30fc\u30c9\u306e\u547c\u3073\u51fa\u3057\u306b\u5fc5\u8981\u3067\u3059\u3002\n\n# hs_init\u3092\u547c\u3073\u51fa\u3057\u3066Haskell\u30b7\u30b9\u30c6\u30e0\u3092\u521d\u671f\u5316\u3059\u308b\u3002\n\nhs_init\u3092\u547c\u3073\u51fa\u3059\u307e\u3067\u306fHaskell\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u4e07\u304c\u4e00\u547c\u3073\u51fa\u3059\u3068\u305d\u306e\u307e\u307e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u3068\u3082\u306b\u505c\u6b62\u3057\u307e\u3059\u3002\n\n\u547c\u3073\u51fa\u3059\u5834\u6240\u306f\u306a\u308b\u3079\u304f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u521d\u671f\u5316\u5834\u6240\u306b\u8fd1\u3044\u3068\u3053\u308d\u304c\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u307b\u3069\u521d\u671f\u5316\u5730\u70b9\u306b\u62d8\u308b\u5fc5\u8981\u306f\u4eca\u306e\u3068\u3053\u308d\u3042\u308a\u307e\u305b\u3093\u3002\u6700\u521d\u306eHaskell\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u524d\u3067\u3042\u308c\u3070\u3069\u3053\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\u306a\u306e\u3067AppDelegate\u306e\u4e2d\u3067\u547c\u3073\u51fa\u3059\u306e\u304c\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n```swift\nimport UIKit\n\n@asmname(\"hs_init\")\n    func hs_init(UnsafePointer<String>, UnsafePointer<Int>)\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    var window: UIWindow?\n\n\n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        // Override point for customization after application launch.\n        hs_init(nil, nil);\n        NSLog(\"hs_init initialized!\");\n        return true\n    }\n...\n```\n\n\u3068\u3044\u3046\u611f\u3058\u3067 (1) hs_init\u3092Swift\u5185\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u5ba3\u8a00\u3057\u3001(2) \u5b9f\u969b\u306b\u547c\u3073\u51fa\u3057\u3092\u3057\u307e\u3059\u3002\n\n```@asmname```\u3067C\u95a2\u6570\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002asmname()\u306e\u30ab\u30c3\u30b3\u306e\u4e2d\u306b\u306fC\u30d8\u30c3\u30c0\u5185\u306e\u95a2\u6570\u306e\u540d\u524d\u3092\u3001\u305d\u306e\u6b21\u306e\u884c\u306b\u306f\u305d\u306e\u95a2\u6570\u3092\u3069\u306e\u3088\u3046\u306bSwift\u5185\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u304b\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nhs_init\u306fHsFFI.h\u3067\u307f\u3066\u307f\u308b\u3068\n\n```c\nextern void hs_init     (int *argc, char **argv[]);\n```\n\n\u306a\u306e\u3067\u3001\u7b2c\u4e00\u5f15\u6570\u306f```UnsafeMutablePointer<int>```\u3068\u3057\u307e\u3059\u3002\u7b2c\u4e8c\u5f15\u6570\u306f```UnsafeMutablePointer<String>```\u3068\u3057\u307e\u3059\u3002const\u3064\u3044\u3066\u3044\u306a\u3044\u306e\u3067Mutable\u306b\u3057\u307e\u3059\u3002\n\nhs_init(nil, nil)\u3067\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\u306a\u306e\u3067Mutable\u306f\uff08\u7d50\u5c40\uff09\u3069\u3063\u3061\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\u306a\u3093\u3084\u306d\u3093\u3002\n\n# \u4f5c\u3063\u305f\u95a2\u6570```plus10```\u3092\u547c\u3073\u51fa\u3059\u3002\n\n\u540c\u3058\u8981\u9818\u3067\u4e0a\u3067\u66f8\u3044\u305f\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\u518d\u63b2\u3059\u308b\u3068\n\n```haskell\nplus10 :: Int -> IO Int\nplus10 i = do\n    putStrLn \"Called!\"\n    return $ i + 10\n```\n\n\u3067\u3059\u3002Swift\u98a8\u306b\u8a00\u3046\u3068\u578b\u306f```Int -> Int```\u3067\u3059\u3002\u306a\u306e\u3067\n\n![20150330235051.png](https://qiita-image-store.s3.amazonaws.com/0/52015/461374b7-5177-479d-a4df-e76ea0c28065.png)\n\n```swift\nimport Foundation\n\n@asmname(\"plus10\")\n    func plus10(Int) -> Int\n\nclass SearchEvalPlayer: ComputerPlayer {\n```\n\n\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u3067\u95a2\u6570\u3092\u5ba3\u8a00\u3057\u307e\u3059\u3002\n\n\u4f7f\u3046\u5834\u6240\u3067\u306f\u666e\u901a\u306e\u95a2\u6570\u3068\u304b\u308f\u308a\u306a\u304f\u4f7f\u3048\u307e\u3059(\u3053\u306e\u4f8b\u3067\u306f\u8fd4\u308a\u5024\u4f7f\u3063\u3066\u306a\u3044\u3067\u3059\u306d)\u3002\n\n![20150330235149.png](https://qiita-image-store.s3.amazonaws.com/0/52015/8a323d03-e0b4-9a0f-a285-994dad398af9.png)\n\n```swift\n    override func think() {\n        NSLog(\"Start thinking\")\n\n        plus10(20)\n\n        var retx = 0\n        var rety = 0\n...\n```\n\n\u3068\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n![20150330235255.png](https://qiita-image-store.s3.amazonaws.com/0/52015/8fccfdcc-4450-de57-a7ca-5a1b70faf94e.png)\n\n\u3067\u304d\u305f\uff01\n"}