{"context": " More than 1 year has passed since last update.\u3044\u308d\u3044\u308d\u5b9a\u7fa9:\n\nbootstrap.php\ndefine('AWS_ACCESS_KEY', 'YOUR AWS ACCESS KEY');\ndefine('AWS_ACCESS_SECRET', 'YOUR AWS ACCESS SECRET');\ndefine('BUCKET_NAME', 'YOUR BUCKET NAME');\n\n\nS3 \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u30af\u30e9\u30b9:\n\nUpload.php\nprivate static function uploadToS3($filePath, $mimeType)\n{\n    $s3 = Services_Amazon_S3::getAccount(AWS_ACCESS_KEY, AWS_ACCESS_SECRET);\n    $bucket = $s3->getBucket(BUCKET_NAME);\n\n    $s3FilePath = date('Y/md/His') . basename($filePath);\n    $object = $bucket->getObject($s3FilePath);\n    $object->contentType = $mimeType;\n    $object->acl = Services_Amazon_S3_AccessControlList::ACL_PUBLIC_READ;\n    $object->data = file_get_contents($filePath);\n    $object->save();\n\n    $url = $object->getUrl();\n    //$url = str_replace('%2F', '/', $url);\n    return $url;\n}\n\n\n\u4e0a\u306e\u30af\u30e9\u30b9\u3092\u4f7f\u3046\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30af\u30e9\u30b9:\n\nExampleController.php\n    Upload::uploadToS3('example.jpg', 'image/jpeg');\n\n\n\u3044\u308d\u3044\u308d\u5b9a\u7fa9:\n\n```PHP:bootstrap.php\ndefine('AWS_ACCESS_KEY', 'YOUR AWS ACCESS KEY');\ndefine('AWS_ACCESS_SECRET', 'YOUR AWS ACCESS SECRET');\ndefine('BUCKET_NAME', 'YOUR BUCKET NAME');\n```\n\nS3 \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u30af\u30e9\u30b9:\n\n```PHP:Upload.php\nprivate static function uploadToS3($filePath, $mimeType)\n{\n\t$s3 = Services_Amazon_S3::getAccount(AWS_ACCESS_KEY, AWS_ACCESS_SECRET);\n\t$bucket = $s3->getBucket(BUCKET_NAME);\n\t\n\t$s3FilePath = date('Y/md/His') . basename($filePath);\n\t$object = $bucket->getObject($s3FilePath);\n\t$object->contentType = $mimeType;\n\t$object->acl = Services_Amazon_S3_AccessControlList::ACL_PUBLIC_READ;\n\t$object->data = file_get_contents($filePath);\n\t$object->save();\n\t\n\t$url = $object->getUrl();\n\t//$url = str_replace('%2F', '/', $url);\n\treturn $url;\n}\n```\n\n\u4e0a\u306e\u30af\u30e9\u30b9\u3092\u4f7f\u3046\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30af\u30e9\u30b9:\n\n```PHP:ExampleController.php\n\tUpload::uploadToS3('example.jpg', 'image/jpeg');\n```", "tags": ["PHP", "AWS", "S3"]}