{"context": " More than 1 year has passed since last update.\n\u8ffd\u8a18\uff1aHeroku\u306b\u7c21\u5358\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002(2015/9/28)\nhttps://github.com/mmizutani/play-gulp-standalone\nhttps://play-gulp-standalone.herokuapp.com\n\nsbt-web\u304b\u3089Gulp\u3078\nPlay Framework\u3067\u306f\u3001\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306fapp/assets\u30d5\u30a9\u30eb\u30c0\u304b\u3089sbt-web\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u3082\u306e\u3068public/\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u304cjar\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u308b\u304b\u305f\u3061\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002Play Framework\u3092\u4f7f\u3044\u59cb\u3081\u3066\u3057\u3070\u3089\u304f\u306e\u9593\u306fsbt-web\u306e\u30a2\u30bb\u30c3\u30c8\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u5145\u5206\u3067\u3001bower/npm\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u53d6\u308a\u3053\u3081\u308b\u3088\u3046\u306b\u306a\u3063\u305fWebJar\u306e\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306b\u3082\u6e80\u8db3\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u3084\u308cTypeScript\u3060\u3084\u308cReact\u3060\u306a\u3069\u3068\u3044\u3063\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304c\u3069\u3093\u3069\u3093\u8907\u96d1\u5316\u3057\u3066\u304f\u308b\u3068\u3001sbt-web\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u7fa4(sbt-rjs, autoprefixer\u306a\u3069)\u306e\u4e2d\u306b\u306f\u9577\u671f\u9593\u66f4\u65b0\u306e\u306a\u3044\u3082\u306e\u3082\u6563\u898b\u3055\u308c\u308b\u73fe\u72b6\u3067\u306f\u5fc3\u8a31\u306a\u304f\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u4eca\u56de\u3001Play\u30a2\u30d7\u30ea\u306e\u30a2\u30bb\u30c3\u30c8\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u4eba\u6c17\u306eJavaScript\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fcGulp\u306b\u307e\u308b\u3054\u3068\u4e57\u308a\u63db\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u57fa\u672c\u7684\u306b\u306f\u3001sbt\u304b\u3089Grunt\u3092\u547c\u3073\u51fa\u3057\u3064\u3064\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092yeoman\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3067\u4f5c\u6210\u3057\u305fhtml\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u65b9\u6cd5\u3092\u3068\u3063\u3066\u3044\u308bPlay\u30d7\u30e9\u30b0\u30a4\u30f3play-yeoman\u306e\u3084\u308a\u65b9\u306b\u5023\u3044\u3064\u3064\u3001Grunt\u3092Gulp\u306b\u7f6e\u304d\u63db\u3048\u3001\u304b\u3064\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082\u4e0d\u8981\u306a\u5f62\u306b\u7c21\u7d20\u5316\u3057\u307e\u3057\u305f\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7d30\u304b\u3044\u5fae\u8abf\u6574\u306f\u5fc5\u8981\u3067\u3059\u304c\u3001\u65b0\u898f\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308bScala\u30d5\u30a1\u30a4\u30eb\u306f\uff12\u3064\u306e\u307f\u3067\u3059\u3002\n\u3055\u3055\u3063\u3068\u4f7f\u3063\u3066\u307f\u305f\u3044\u65b9\u306f[\u3053\u3061\u3089\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 https://github.com/mmizutani/play-gulp-standalone \u3092clone\u3057\u3066\u3001\u666e\u901a\u306ePlay\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540c\u69d8\u306bsbt run, sbt ~run, sbt test, sbt testProd, sbt \";stage;dist\"(Typesafe Activator\u306a\u3089activator run, activator ~run, activator test, activator testProd, activator \";stage;dist\") \u306a\u3069\u3092\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u8a2d\u5b9a\n\n0. \u524d\u63d0\nScala, sbt\uff08\u307e\u305f\u306fTypesafe Activator\uff09, Node.js (node & npm)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u3002\n\n1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\u307e\u305agenerator-gulp-angular\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\n$ npm install -g yo gulp bower\n$ npm install -g generator-gulp-angular\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30d7\u30ec\u30fc\u30f3\u306aPlay\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u79f0\u306f\u3053\u3053\u3067\u306f\u3068\u308a\u3042\u3048\u305aplay-scala\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ activator new play-gulp\nChoose from these featured templates or enter a template name:\n  1) minimal-akka-java-seed\n  2) minimal-akka-scala-seed\n  3) minimal-java\n  4) minimal-scala\n  5) play-java\n  6) play-scala\n(hit tab to see a list of all templates)\n> 6\nOK, application \"play-gulp\" is being created using the \"play-scala\" template.\n\n\u305d\u3057\u3066\u3001rm -rf public\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306epublic\u30d5\u30a9\u30eb\u30c0\u3068\u306f\u304a\u3055\u3089\u3070\u3057\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306bui\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u3066\u3001\u3053\u306e\u4e2d\u306b\u3055\u304d\u307b\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fyeoman\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e1\u3064\u3001gulp-angular\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u96db\u5f62\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08gulp\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u96db\u5f62\u3067\u3042\u308c\u3070\u4ed6\u306eyeoman\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3067\u3082\u4ee5\u964d\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306f\u307b\u307c\u540c\u3058\u306a\u306f\u305a\u3067\u3059\u3002\uff09\n$ cd play-gulp\n$ rm -rf public\n$ mkdir ui && cd $_\n$ yo gulp-angular\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\n2. project/PlayGulp.scala\u306e\u4f5c\u6210\nproject\u30d5\u30a9\u30eb\u30c0\u5185\u306bPlayGulp.scala\u30d5\u30a1\u30a4\u30eb\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3001Gulp\u306e\u30bf\u30b9\u30af\u3092sbt\u306e\u30bf\u30b9\u30af\u306b\u7d10\u4ed8\u3051\u3066sbt\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\nproject/PlayGulp.scala\nimport com.typesafe.sbt.packager.universal.UniversalPlugin.autoImport._\nimport com.typesafe.sbt.web.Import._\nimport play.sbt.PlayImport.PlayKeys._\nimport play.sbt.PlayRunHook\nimport play.twirl.sbt.Import.TwirlKeys\nimport sbt.Keys._\nimport sbt._\n\nobject PlayGulp {\n\n  lazy val gulpDirectory = SettingKey[File](\"gulp-directory\", \"gulp directory\")\n  lazy val gulpFile = SettingKey[String](\"gulp-file\", \"gulpfile\")\n  lazy val gulpExcludes = SettingKey[Seq[String]](\"gulp-excludes\")\n  lazy val gulp = InputKey[Unit](\"gulp\", \"Task to run gulp\")\n  lazy val gulpBuild = TaskKey[Int](\"gulp-dist\", \"Task to run dist gulp\")\n  lazy val gulpClean = TaskKey[Unit](\"gulp-clean\", \"Task to run gulp clean\")\n  lazy val gulpTest = TaskKey[Unit](\"gulp-test\", \"Task to run gulp test\")\n\n  val playGulpSettings: Seq[Setting[_]] = Seq(\n\n    // Specifies the location of the root directory of the Gulp project relative to the Play app root\n    gulpDirectory <<= (baseDirectory in Compile) { _ / \"ui\" },\n\n    gulpFile := \"gulpfile.js\",\n\n    gulp := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      runGulp(base, gulpfileName, Def.spaceDelimited(\"<arg>\").parsed.toList).exitValue()\n    },\n\n    gulpBuild := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      val result = runGulp(base, gulpfileName, List(\"build\")).exitValue()\n      if (result == 0) {\n        result\n      } else throw new Exception(\"gulp failed\")\n    },\n\n    gulpClean := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      val result = runGulp(base, gulpfileName, List(\"clean\")).exitValue()\n      if (result != 0) throw new Exception(\"gulp failed\")\n    },\n\n    gulpTest := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      val result = runGulp(base, gulpfileName, List(\"test\")).exitValue()\n      if (result != 0) throw new Exception(\"gulp failed\")\n    },\n\n    // Executes `gulp build` before `sbt dist`\n    dist <<= dist dependsOn gulpBuild,\n\n    // Executes `gulp build` before `sbt stage`\n    stage <<= stage dependsOn gulpBuild,\n\n    // Executes `gulp clean` before `sbt clean`\n    clean <<= clean dependsOn gulpClean,\n\n    // Executes `gulp test` before `sbt test` (optional)\n    //(test in Test) <<= (test in Test) dependsOn gulpTest,\n\n    // Ensures that static assets in the ui/dist directory are packaged into\n    // target/scala-2.11/play-gulp_2.11-1.0.0-web-asset.jar/public when the play app is compiled\n    unmanagedResourceDirectories in Assets <+= (gulpDirectory in Compile)(_ / \"dist\"),\n\n    // Starts the gulp watch task before sbt run\n    playRunHooks <+= (gulpDirectory, gulpFile).map {\n      (base, fileName) => GulpWatch(base, fileName)\n    },\n\n    // Allows all the specified commands below to be run within sbt in addition to gulp\n    commands <++= gulpDirectory {\n      base =>\n        Seq(\n          \"npm\",\n          \"bower\",\n          \"yo\"\n        ).map(cmd(_, base))\n    }\n  )\n\n  val withTemplates: Seq[Setting[_]] = Seq(\n    // Added ui/src/views/*.scala.html to the target of Scala view template compilation\n    sourceDirectories in TwirlKeys.compileTemplates in Compile <+= (gulpDirectory in Compile)(_ / \"src\"),\n    includeFilter in sources in TwirlKeys.compileTemplates := \"*.scala.html\",\n    gulpExcludes <<= gulpDirectory(gd => Seq(\n      gd + \"/src/app/\",\n      gd + \"/src/assets/\",\n      gd + \"/src/bower_components/\"\n    )),\n    excludeFilter in unmanagedSources <<=\n      (excludeFilter in unmanagedSources, gulpExcludes) {\n        (currentFilter: FileFilter, ge) =>\n          currentFilter || new FileFilter {\n            def accept(pathname: File): Boolean = {\n              (true /: ge.map(s => pathname.getAbsolutePath.startsWith(s)))(_ && _)\n            }\n          }\n      },\n    // Makes play autoreloader to compile Scala view templates and reload the browser\n    // upon changes in the view files ui/src/views/*.scala.html\n    // Adds ui/src/views directory's scala view template files to continuous hot reloading\n    watchSources <++= gulpDirectory map { path => ((path / \"src/views\") ** \"*.scala.html\").get}\n  )\n\n  private def runGulp(base: sbt.File, fileName: String, args: List[String] = List.empty): Process = {\n    if (System.getProperty(\"os.name\").startsWith(\"Windows\")) {\n      val process: ProcessBuilder = Process(\"cmd\" :: \"/c\" :: \"gulp\" :: \"--gulpfile=\" + fileName :: args, base)\n      println(s\"Will run: ${process.toString} in ${base.getPath}\")\n      process.run()\n    } else {\n      val process: ProcessBuilder = Process(\"gulp\" :: \"--gulpfile=\" + fileName :: args, base)\n      println(s\"Will run: ${process.toString} in ${base.getPath}\")\n      process.run()\n    }\n  }\n\n  import scala.language.postfixOps\n\n  private def cmd(name: String, base: File): Command = {\n    if (!base.exists()) {\n      base.mkdirs()\n    }\n    Command.args(name, \"<\" + name + \"-command>\") {\n      (state, args) =>\n        if (System.getProperty(\"os.name\").startsWith(\"Windows\")) {\n          Process(\"cmd\" :: \"/c\" :: name :: args.toList, base) !<\n        } else {\n          Process(name :: args.toList, base) !<\n        }\n        state\n    }\n  }\n\n  object GulpWatch {\n\n    def apply(base: File, fileName: String): PlayRunHook = {\n\n      object GulpSubProcessHook extends PlayRunHook {\n\n        var process: Option[Process] = None\n\n        override def beforeStarted(): Unit = {\n          process = Some(runGulp(base, fileName, \"watch\" :: Nil))\n        }\n\n        override def afterStopped(): Unit = {\n          process.foreach(_.destroy())\n          process = None\n        }\n      }\n\n      GulpSubProcessHook\n    }\n\n  }\n\n}\n\n\nbuild.sbt\u3067\u3053\u306e\u8a2d\u5b9a\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\nbuild.sbt\nimport PlayGulp._\n\n...\n\nlazy val root = (project in file(\".\"))\n  .enablePlugins(PlayScala)\n  .settings(playGulpSettings ++ withTemplates) //\u3053\u306e\u884c\u3092\u8ffd\u8a18\n\n\n\n3. app/controllers/GulpAssets.scala\u306e\u4f5c\u6210\n\u7d9a\u3044\u3066\u3001\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092ui\u30d5\u30a9\u30eb\u30c0\u306egulp-angular\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u305f\u3081\u306eGulpAssets\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\napp/controllers/GulpAssets.scala\npackage controllers\n\nimport java.io.File\nimport javax.inject.Singleton\n\nimport play.api.Play.current\nimport play.api.{Logger, _}\nimport play.api.http.DefaultHttpErrorHandler\nimport play.api.libs.concurrent.Execution.Implicits.defaultContext\nimport play.api.mvc.{Action, AnyContent}\n\nimport scala.concurrent.Future\n\nobject GulpAssets extends controllers.Assets(DefaultHttpErrorHandler) {\n\n  private lazy val logger = Logger(getClass)\n\n  def index = Action.async { request =>\n    if (request.path.endsWith(\"/\")) {\n      at(\"index.html\").apply(request)\n    } else {\n      Future(Redirect(request.path + \"/\"))\n    }\n  }\n\n  // List of UI directories from which static assets are served in development mode\n  // (A directory in higher priority comes first.)\n  val devBasePaths: List[java.io.File] = List(\n    Play.application.getFile(\"ui/.tmp/serve\"),\n    Play.application.getFile(\"ui/src\"),\n    Play.application.getFile(\"ui\")\n  )\n\n  def devAssetHandler(file: String): Action[AnyContent] = Action { request =>\n    // Generates a non-strict list of the full paths\n    val targetPaths = devBasePaths.view map {\n      new File(_, file)\n    }\n\n    // Generates responses returning the file in the dev and test modes only (not in the production mode)\n    val responses = targetPaths filter { file =>\n      file.exists()\n    } map { file =>\n      if (file.isFile) {\n        logger.info(s\"Serving $file\")\n        Ok.sendFile(file, inline = true).withHeaders(CACHE_CONTROL -> \"no-store\")\n      } else {\n        Forbidden(views.html.defaultpages.unauthorized())\n      }\n    }\n\n    // Returns the first valid path if valid or NotFound otherwise\n    responses.headOption getOrElse NotFound(\"404 - Page not found error\\n\" + request.path)\n  }\n\n  def prodAssetHandler(file: String): Action[AnyContent] = Assets.at(\"/public\", file)\n\n  lazy val atHandler: String => Action[AnyContent] = if (Play.isProd) prodAssetHandler(_: String) else devAssetHandler(_: String)\n\n  def at(file: String): Action[AnyContent] = atHandler(file)\n\n}\n\n@Singleton\nclass GulpAssets extends controllers.Assets(DefaultHttpErrorHandler) {\n  def at(file: String) = GulpAssets.at(file: String)\n}\n\n\n\n4. conf/routes\u306e\u5909\u66f4\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u7528\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0(Assets.versioned)\u306f\u524a\u9664\u3057\u3001\u304b\u308f\u308a\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fGulp\u7528\u306e\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a(GulpAssets.at)\u3092\u4e00\u756a\u4e0b\u306b\u52a0\u3048\u307e\u3059\u3002\n\nroutes\nGET        /                           controllers.Application.index\nGET        /oldhome                    controllers.Application.oldhome\nGET        /*file                      controllers.GulpAssets.at(file)\n\n#GET     /assets/*file               controllers.Assets.versioned(path=\"/public\", file: Asset)\n\n\nroute\u3092\u4fee\u6b63\u3057\u305f\u306e\u3067\u3001views\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3082\u5408\u308f\u305b\u3066\u4fee\u6b63\u3057\u307e\u3059\u3002\nBefore\n\napp/views/main.scala.html\n@(title: String)(content: Html)\n\n<!DOCTYPE html>\n\n<html lang=\"en\">\n  <head>\n    <title>@title</title>\n    <link rel=\"stylesheet\" media=\"screen\" href=\"@routes.Assets.versioned(\"stylesheets/main.css\")\">\n    <link rel=\"shortcut icon\" type=\"image/png\" href=\"@routes.Assets.versioned(\"images/favicon.png\")\">\n    <script src=\"@routes.Assets.versioned(\"javascripts/hello.js\")\" type=\"text/javascript\"></script>\n  </head>\n  <body>\n    @content\n  </body>\n</html>\n\n\nAfter\n\napp/views/main.scala.html\n@(title: String)(content: Html)\n\n<!DOCTYPE html>\n\n<html lang=\"en\">\n  <head>\n    <title>@title</title>\n    <link rel=\"stylesheet\" media=\"screen\" href=\"@routes.GulpAssets.at(\"assets/styles/oldhome-style.css\")\">\n    <link rel=\"shortcut icon\" type=\"image/png\" href=\"@routes.GulpAssets.at(\"assets/favicon.png\")\">\n    <script type=\"text/javascript\" src=\"@routes.GulpAssets.at(\"assets/scripts/oldhome-script.js\")\"></script>\n  </head>\n  <body>\n    @content\n  </body>\n</html>\n\n\n\u4e0a\u8a18\u306eroutes.GulpAssets.at(\"assets/~/~.xxx\")\u306e\u5b9f\u30d1\u30b9\u306fui/src/assets/~/~.xxx\u306b\u76f8\u5f53\u3059\u308b\u306e\u3067\u3001\u3053\u306e\u5834\u6240\u306b\u9069\u5f53\u306boldhome-style.css\u3084oldhome-script.js\u3092\u3064\u304f\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n$ touch ui/src/assets/styles/oldhome-style.css\n$ touch ui/src/assets/scripts/oldhome-script.js\n\n\u305d\u3057\u3066Application.index\u306fGulpAssets.index\u306b\u8a2d\u5b9a\u3057\u3066\u3001URL\u306e\u30eb\u30fc\u30c8/\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306f\u3001\u958b\u767a\u6642\u306fui/.tmp/serve/index.html\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u5f93\u6765\u306eindex\u30da\u30fc\u30b8\u306f\u9069\u5f53\u306b/oldhome\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\napp/controllers/Application.scala\nclass Application extends Controller {\n\n  def index = GulpAssets.index\n\n  def oldhome = Action {\n    Ok(views.html.index(\"Play Framework\"))\n  }\n\n}\n\n\n\n5. gulp-angular\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5fae\u4fee\u6b63\n\u3055\u3059\u304c\u306bgulp-angular\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u305d\u306e\u307e\u307e\u3067\u306fPlay\u30a2\u30d7\u30ea\u3068\u7d71\u5408\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nui/.bowerrc\n\nBefore\n\nui/.bowerrc\n{\n  \"directory\": \"bower_components\"\n}\n\n\nAfter\n\nui/.bowerrc\n{\n  \"directory\": \"src/bower_components\"\n}\n\n\n\nbower_components\u306fsrc\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u3078\u79fb\u52d5\n\nmv ui/bower_components ui/src/bower_components\n\n\nui/gulp/conf.js\n\nBefore\n\nui/gulp/conf.js\nexports.wiredep = {\n  exclude: [/bootstrap.js$/, /bootstrap-sass-official\\/.*\\.js/, /bootstrap\\.css/],\n  directory: 'bower_components'\n};\n\n\nAfter\n\nui/gulp/conf.js\nexports.wiredep = {\n  exclude: [/bootstrap.js$/, /bootstrap-sass-official\\/.*\\.js/, /bootstrap\\.css/],\n  directory: 'src/bower_components'\n};\n\n\n\nui/gulp/build.js\n\nBefore\n\nui/gulp/build.js\ngulp.task('fonts', function () {\n  return gulp.src($.mainBowerFiles())\n    .pipe($.filter('**/*.{eot,svg,ttf,woff,woff2}'))\n    .pipe($.flatten())\n    .pipe(gulp.dest(path.join(conf.paths.dist, '/fonts/')));\n});\n\n...\n\ngulp.task('build', ['html', 'fonts', 'other']);\n\n\nAfter\n\nui/gulp/build.js\ngulp.task('fonts', function () {\n  return gulp.src(path.join(conf.paths.src, '/bower_components/**/*'))\n    .pipe($.filter('**/*.{eot,svg,ttf,woff,woff2}'))\n    .pipe($.flatten())\n    .pipe(gulp.dest(path.join(conf.paths.dist, '/fonts/')));\n});\n\ngulp.task('otherassets', function () {\n  return gulp.src(path.join(conf.paths.src, '/assets/**/*'))\n    .pipe(gulp.dest(path.join(conf.paths.dist, '/assets/'), {overwrite: false}));\n});\n\n...\n\ngulp.task('build', ['html', 'fonts', 'other', 'otherassets']);\n\n\n\u5fc5\u9808\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u5404\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u3069\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\u3055\u305b\u3066\u3044\u308b\u306e\u304b\u304c\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u8868\u793a\u3055\u308c\u305f\u307b\u3046\u304c\u6163\u308c\u308b\u307e\u3067\u306f\u3044\u3044\u3068\u601d\u3046\u306e\u3067\u3001log\u306e\u51fa\u529b\u30ec\u30d9\u30eb\u3092ERROR\u304b\u3089INFO\u306b\u7de9\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\nconf/logback.xml\n...\n<root level=\"INFO\">\n  <appender-ref ref=\"STDOUT\" />\n</root>\n...\n\n\n\u3053\u308c\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u4f7f\u3044\u65b9\nsbt/activator\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u5165\u308b\u3068\u3001\n$ sbt/activator\n\nbuild, clean, serve, test\u306a\u3069\u306egulp\u306e\u30bf\u30b9\u30af\u3092ui\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30eb\u30fc\u30c8\u3068\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002gulp\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30bf\u30b9\u30af(\u3053\u3053\u3067\u306fgulp build)\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001ui/build\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bng-annotate, uglify\u7b49\u304c\u3055\u308c\u305f\u305d\u306e\u4ed6\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3068\u3001JavaScript/CSS\u3092inject\u3055\u308c\u305findex.html\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u307e\u3059\u3002\n[play-gulp] > gulp\nWill run: [gulp, --gulpfile=gulpfile.js, build] in /home/user/dev//play-gulp/ui\n[23:41:29] Using gulpfile ~/dev/play-gulp/ui/gulpfile.js\n[23:41:29] Starting 'clean'...\n[23:41:29] Finished 'clean' after 53 ms\n[23:41:29] Starting 'default'...\n[23:41:29] Starting 'scripts'...\n[23:41:29] Starting 'styles'...\n[23:41:29] Starting 'partials'...\n[23:41:29] Starting 'fonts'...\n[23:41:29] Starting 'other'...\n[23:41:29] Starting 'otherassets'...\n[23:41:29] Finished 'default' after 480 ms\n[23:41:29] gulp-inject 2 files into index.scss.\n[23:41:31] Finished 'styles' after 1.87 s\n[23:41:31] all files 7.88 kB\n[23:41:31] Finished 'scripts' after 2.04 s\n[23:41:31] Starting 'inject'...\n[23:41:31] Finished 'partials' after 1.73 s\n[23:41:31] gulp-inject 1 files into index.html.\n[23:41:31] Finished 'otherassets' after 1.64 s\n[23:41:31] gulp-inject 10 files into index.html.\n[23:41:31] Finished 'inject' after 121 ms\n[23:41:31] Starting 'html'...\n[23:41:31] gulp-inject 1 files into index.html.\n[23:41:40] 'dist/' styles/app-c90c023e53.css 120.34 kB\n[23:41:40] 'dist/' styles/vendor-1dddaadd0b.css 58.62 kB\n[23:41:40] 'dist/' scripts/app-10800ada38.js 6.26 kB\n[23:41:40] 'dist/' scripts/vendor-48a98d1612.js 438.69 kB\n[23:41:40] 'dist/' index.html 636 B\n[23:41:40] 'dist/' all files 624.56 kB\n[23:41:40] Finished 'html' after 8.83 s\n[23:41:40] Finished 'other' after 11 s\n[23:41:40] Finished 'fonts' after 11 s\n[23:41:40] Starting 'build'...\n[23:41:40] Finished 'build' after 7.29 \u03bcs\n\nrun\u306b\u3088\u308a\u958b\u767a\u30e2\u30fc\u30c9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001PlayGulp.scala\u306e\u8a2d\u5b9a\n\nproject/PlayGulp.scala\n...\nplayRunHooks <+= (gulpDirectory, gulpFile).map {\n      (base, fileName) => GulpWatch(base, fileName)\n    }\n...\n\n\n\u306b\u3088\u308agulp watch\u30bf\u30b9\u30af\u304c\u547c\u3070\u308c\u3001http://localhost:9000 \u3092\u958b\u304f\u3068\u3001\n[play-gulp] > run\n\nWill run: [gulp, --gulpfile=gulpfile.js, watch] in /home/user/dev/play-gulp/ui\n--- (Running the application, auto-reloading is enabled) ---\n\n[info] p.a.l.c.ActorSystemProvider - Starting application default Akka system: application\n[info] p.c.s.NettyServer - Listening for HTTP on /localhost:9000\n\n(Server started, use Ctrl+D to stop and go back to the console...)\n\nYeoman\u306e\u30b7\u30f3\u30dc\u30eb\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u3072\u3052\u304a\u3058\u3055\u3093\u3068\u6614\u306e\u4eba\u6c17British sitcom\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u98fe\u308b(\u306a\u305c\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u3053\u3053\u3067\u51fa\u3066\u304f\u308b\u306e\u304b\u7406\u7531\u306f\u77e5\u308a\u307e\u305b\u3093...)\u30c8\u30c3\u30d7\u753b\u9762\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u3001GulpAssets\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u7d4c\u7531\u3067\u3069\u3053\u306e\u30d1\u30b9\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u304cserve\u3055\u308c\u3066\u3044\u308b\u304b\u308f\u304b\u308a\u307e\u3059\u3002\n[23:52:50] Using gulpfile ~/dev/play-gulp/ui/gulpfile.js\n[23:52:50] Starting 'scripts'...\n[23:52:50] Starting 'styles'...\n[23:52:50] gulp-inject 2 files into index.scss.\n[23:52:51] all files 7.88 kB\n[23:52:51] Finished 'scripts' after 530 ms\n[23:52:52] Finished 'styles' after 1.43 s\n[23:52:52] Starting 'inject'...\n[23:52:52] gulp-inject 1 files into index.html.\n[23:52:52] gulp-inject 10 files into index.html.\n[23:52:52] Finished 'inject' after 61 ms\n[23:52:52] Starting 'watch'...\n[23:52:52] Finished 'watch' after 15 ms\n...\n[info] - play.api.Play - Application started (Dev)\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/.tmp/serve/index.html\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/toastr/toastr.css\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/angular-animate/angular-animate.js\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/.tmp/serve/app/index.css\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/animate.css/animate.css\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/angular/angular.js\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/jquery/dist/jquery.js\n...\n\n\u898b\u3048\u3066\u3044\u308b\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u306e\u5b9f\u4f53\u306f\u3001\u30c7\u30d0\u30c3\u30b0\u6642\u306bGulp\u304c\u4e00\u6642\u7684\u306b\u751f\u6210\u3059\u308bui/.tmp/serve/index.html\u3067\u3059\u3002\n\u30c7\u30d0\u30c3\u30b0\u3092\u3084\u3081\u3066\u3001sbt(\u307e\u305f\u306factivator)\u306estage\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\n[play-gulp] > stage\n\ntarget/scala-2.11/play-gulp_2.11-1.0-web-assets.jar\u304c\u307b\u304b\u306ejar\u30d5\u30a1\u30a4\u30eb\u3068\u3068\u3082\u306b\u751f\u6210\u3055\u308c\u307e\u3059\u3002play-gulp_2.11-1.0-web-assets.jar\u3092zip\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u89e3\u51cd\u3059\u308b\u3068\u3001Gulp\u306b\u3088\u308a\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u5165\u3063\u3066\u3044\u308bui/dist\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u8eab\u304c\u305d\u306e\u307e\u307e\u305d\u3063\u304f\u308ajar\u5185\u306epublic\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u3053\u306ejar/public\u306b\u306f\u672c\u6765\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306epublic\u30d5\u30a9\u30eb\u30c0\u5185\u306e\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u30b3\u30d4\u30fc\u3055\u308c\u307e\u3059\u304c\u3001\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8/public\u30d5\u30a9\u30eb\u30c0\u3092\u524a\u9664\u3057\u3066\u3001\u4ee3\u308f\u308a\u306b\u4e0b\u8a18\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\n\nproject/PlayGulp.scala\nunmanagedResourceDirectories in Assets <+= (gulpDirectory in Compile)(_ / \"dist\")\n\n\n\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nGulp\u3067\u30d3\u30eb\u30c9\u3057\u305f\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306f\u3001\u6700\u7d42\u7684\u306b\u306fdist\u30bf\u30b9\u30af\u306b\u3088\u308a\u3001\u30c7\u30d7\u30ed\u30a4\u7528\u30d5\u30a1\u30a4\u30eb\u4e00\u5f0ftarget/universal/play-gulp-1.0.zip\u306e\u4e2d\u306elib\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u30ea\u30ea\u30fc\u30b9\u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u3067\u30c7\u30a3\u30d9\u30ed\u30c3\u30d1\u30fc\u30c4\u30fc\u30eb\u3092\u958b\u304f\u3068\u3001JavaScript/CSS\u304c\u304d\u3061\u3093\u3068minify, concatenate, obfuscate\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n[play-gulp] > testProd\n\n\napp/views/~.scala.html\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u6642\u306f\u3001JavaScript, CSS, PDF, \u753b\u50cf\u3001\u97f3\u697d\u30d5\u30a1\u30a4\u30eb\u306a\u3069(\u305f\u3068\u3048\u3070photo.png)\u3092ui/src/assets\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u3044\u3066\u304a\u3051\u3070\u3001GulpAssets\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u7d4c\u7531\u3067\u958b\u767a\u6642\u3082\u30ea\u30ea\u30fc\u30b9\u6642\u3082\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002(routes\u3067/\u3092gulp-angular\u306e\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u306e\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u3042\u308c\u3070GulpAssets\u3092\u4f7f\u308f\u305a\"/assets/images/photo.png\"\u3067\u3082\u53ef\u3002)\n\napp/views/~.scala.html\n<img src=\"@routes.GulpAssets.at(\"assets/images/photo.png\")\">\n<img src=\"/assets/images/photo.png\">\n\n\n\napp/views/~.scala.html\n<img src=\"@routes.Assets.at(\"assets/images/photo.png\")\">\n<img src=\"/assets/images/photo.png\">\n\n\n\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3068\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u5206\u96e2\u958b\u767a\n\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u306e\u3044\u3044\u3068\u3053\u308d\u3068\u3057\u3066\u3001Gulp\u3092\u30d5\u30eb\u306b\u4f7f\u3048\u308b\u70b9\u306b\u52a0\u3048\u3066\u3001\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3068\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u5206\u96e2\u958b\u767a\u304c\u3057\u3084\u3059\u3044\u3068\u3044\u3046\u70b9\u3082\u6319\u3052\u3089\u308c\u307e\u3059\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306eui\u30d5\u30a9\u30eb\u30c0\u5185\u306f\u4e00\u822c\u7684\u306aGulp\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306a\u306e\u3067\u3001Play Framework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u306f\u89e6\u3089\u305a\u3001ui\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306egulp-angular\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3060\u3051\u3092gulp\u30b3\u30de\u30f3\u30c9\u3067\u958b\u767a\u3057\u3066\u3044\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ cd ui\n$ gulp clean\n$ gulp serve\n$ gulp test\n$ gulp build\n\nui\u4ee5\u4e0b\u3092git submodule\u3068\u3057\u3066\u7ba1\u7406\u3057\u3066\u304a\u304f\u3068\u3001\u30c7\u30b6\u30a4\u30ca\u30fc\u3055\u3093\u3068\u306e\u5206\u696d\u304c\u306f\u304b\u3069\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u305d\u306e\u4ed6\nGitHub\u306b\u3042\u3052\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u304a\u307e\u3051\u3068\u3057\u3066\u3001AngularJS\u306ehtml5mode\u3092\u6709\u52b9\u306b\u3057\u305f\u308a\u3001twirl\u306eScala html\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092ui/src/views/~~/~.scala.html \u306b\u7f6e\u3044\u3066\u307f\u305f\u308a\u3001Application\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306bREST API\u3063\u307d\u3044\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u307f\u305f\u308a\u3057\u3066\u3044\u307e\u3059\u3002\u958b\u767a\u30e2\u30fc\u30c9\u3067 http://localhost:9000/routes \u304b\u3089\u3044\u308d\u3093\u306a\u30d1\u30b9\u3092\u53e9\u3044\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u5927\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u305b\u3093\u3057\u3001Gulp\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u306f\u4eba\u305d\u308c\u305e\u308c\u3060\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u6539\u5909\u3057\u3084\u3059\u3044\u3088\u3046\u3042\u3048\u3066\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u306f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u3054\u81ea\u7531\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3044\u305f\u3060\u3044\u3066\u7d50\u69cb\u3067\u3059\u3002\n![play-gulp.png](https://qiita-image-store.s3.amazonaws.com/0/38958/1fbff73c-f169-d73a-4b7d-3f0cd39d72e3.png)\n\n**\u8ffd\u8a18\uff1aHeroku\u306b\u7c21\u5358\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002**(2015/9/28)\nhttps://github.com/mmizutani/play-gulp-standalone\nhttps://play-gulp-standalone.herokuapp.com\n\n# sbt-web\u304b\u3089Gulp\u3078\n\nPlay Framework\u3067\u306f\u3001\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306fapp/assets\u30d5\u30a9\u30eb\u30c0\u304b\u3089[sbt-web](https://github.com/sbt/sbt-web)\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u3082\u306e\u3068public/\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u304cjar\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u308b\u304b\u305f\u3061\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002Play Framework\u3092\u4f7f\u3044\u59cb\u3081\u3066\u3057\u3070\u3089\u304f\u306e\u9593\u306fsbt-web\u306e\u30a2\u30bb\u30c3\u30c8\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u5145\u5206\u3067\u3001bower/npm\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u53d6\u308a\u3053\u3081\u308b\u3088\u3046\u306b\u306a\u3063\u305fWebJar\u306e\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306b\u3082\u6e80\u8db3\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u3084\u308cTypeScript\u3060\u3084\u308cReact\u3060\u306a\u3069\u3068\u3044\u3063\u3066\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304c\u3069\u3093\u3069\u3093\u8907\u96d1\u5316\u3057\u3066\u304f\u308b\u3068\u3001sbt-web\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u7fa4(sbt-rjs, autoprefixer\u306a\u3069)\u306e\u4e2d\u306b\u306f\u9577\u671f\u9593\u66f4\u65b0\u306e\u306a\u3044\u3082\u306e\u3082\u6563\u898b\u3055\u308c\u308b\u73fe\u72b6\u3067\u306f\u5fc3\u8a31\u306a\u304f\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u4eca\u56de\u3001Play\u30a2\u30d7\u30ea\u306e\u30a2\u30bb\u30c3\u30c8\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u4eba\u6c17\u306eJavaScript\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fcGulp\u306b\u307e\u308b\u3054\u3068\u4e57\u308a\u63db\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u57fa\u672c\u7684\u306b\u306f\u3001sbt\u304b\u3089Grunt\u3092\u547c\u3073\u51fa\u3057\u3064\u3064\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092yeoman\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3067\u4f5c\u6210\u3057\u305fhtml\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u65b9\u6cd5\u3092\u3068\u3063\u3066\u3044\u308bPlay\u30d7\u30e9\u30b0\u30a4\u30f3[play-yeoman](https://github.com/tuplejump/play-yeoman)\u306e\u3084\u308a\u65b9\u306b\u5023\u3044\u3064\u3064\u3001Grunt\u3092Gulp\u306b\u7f6e\u304d\u63db\u3048\u3001\u304b\u3064\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082\u4e0d\u8981\u306a\u5f62\u306b\u7c21\u7d20\u5316\u3057\u307e\u3057\u305f\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7d30\u304b\u3044\u5fae\u8abf\u6574\u306f\u5fc5\u8981\u3067\u3059\u304c\u3001\u65b0\u898f\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308bScala\u30d5\u30a1\u30a4\u30eb\u306f\uff12\u3064\u306e\u307f\u3067\u3059\u3002\n\n\u3055\u3055\u3063\u3068\u4f7f\u3063\u3066\u307f\u305f\u3044\u65b9\u306f[\u3053\u3061\u3089\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 https://github.com/mmizutani/play-gulp-standalone \u3092clone\u3057\u3066\u3001\u666e\u901a\u306ePlay\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540c\u69d8\u306b`sbt run`, `sbt ~run`, `sbt test`, `sbt testProd`, `sbt \";stage;dist\"`(Typesafe Activator\u306a\u3089`activator run`, `activator ~run`, `activator test`, `activator testProd`, `activator \";stage;dist\"`) \u306a\u3069\u3092\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u8a2d\u5b9a\n## 0. \u524d\u63d0\nScala, sbt\uff08\u307e\u305f\u306fTypesafe Activator\uff09, Node.js (node & npm)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u3002\n\n## 1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n\u307e\u305a[generator-gulp-angular](https://github.com/Swiip/generator-gulp-angular)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\n\n```bash\n$ npm install -g yo gulp bower\n$ npm install -g generator-gulp-angular\n```\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30d7\u30ec\u30fc\u30f3\u306aPlay\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u79f0\u306f\u3053\u3053\u3067\u306f\u3068\u308a\u3042\u3048\u305aplay-scala\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\n$ activator new play-gulp\nChoose from these featured templates or enter a template name:\n  1) minimal-akka-java-seed\n  2) minimal-akka-scala-seed\n  3) minimal-java\n  4) minimal-scala\n  5) play-java\n  6) play-scala\n(hit tab to see a list of all templates)\n> 6\nOK, application \"play-gulp\" is being created using the \"play-scala\" template.\n```\n\n\u305d\u3057\u3066\u3001`rm -rf public`\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306epublic\u30d5\u30a9\u30eb\u30c0\u3068\u306f\u304a\u3055\u3089\u3070\u3057\u307e\u3059\u3002\u4ee3\u308f\u308a\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306bui\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u3066\u3001\u3053\u306e\u4e2d\u306b\u3055\u304d\u307b\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fyeoman\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e1\u3064\u3001gulp-angular\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u96db\u5f62\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08gulp\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u96db\u5f62\u3067\u3042\u308c\u3070\u4ed6\u306eyeoman\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3067\u3082\u4ee5\u964d\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306f\u307b\u307c\u540c\u3058\u306a\u306f\u305a\u3067\u3059\u3002\uff09\n\n```bash\n$ cd play-gulp\n$ rm -rf public\n$ mkdir ui && cd $_\n$ yo gulp-angular\n```\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n![Selection_012.png](https://qiita-image-store.s3.amazonaws.com/0/38958/418c8418-be9f-d05d-3ece-d846b1147075.png)\n\n## 2. project/PlayGulp.scala\u306e\u4f5c\u6210\n\nproject\u30d5\u30a9\u30eb\u30c0\u5185\u306bPlayGulp.scala\u30d5\u30a1\u30a4\u30eb\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3001Gulp\u306e\u30bf\u30b9\u30af\u3092sbt\u306e\u30bf\u30b9\u30af\u306b\u7d10\u4ed8\u3051\u3066sbt\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n```scala:project/PlayGulp.scala\nimport com.typesafe.sbt.packager.universal.UniversalPlugin.autoImport._\nimport com.typesafe.sbt.web.Import._\nimport play.sbt.PlayImport.PlayKeys._\nimport play.sbt.PlayRunHook\nimport play.twirl.sbt.Import.TwirlKeys\nimport sbt.Keys._\nimport sbt._\n\nobject PlayGulp {\n\n  lazy val gulpDirectory = SettingKey[File](\"gulp-directory\", \"gulp directory\")\n  lazy val gulpFile = SettingKey[String](\"gulp-file\", \"gulpfile\")\n  lazy val gulpExcludes = SettingKey[Seq[String]](\"gulp-excludes\")\n  lazy val gulp = InputKey[Unit](\"gulp\", \"Task to run gulp\")\n  lazy val gulpBuild = TaskKey[Int](\"gulp-dist\", \"Task to run dist gulp\")\n  lazy val gulpClean = TaskKey[Unit](\"gulp-clean\", \"Task to run gulp clean\")\n  lazy val gulpTest = TaskKey[Unit](\"gulp-test\", \"Task to run gulp test\")\n\n  val playGulpSettings: Seq[Setting[_]] = Seq(\n\n    // Specifies the location of the root directory of the Gulp project relative to the Play app root\n    gulpDirectory <<= (baseDirectory in Compile) { _ / \"ui\" },\n\n    gulpFile := \"gulpfile.js\",\n\n    gulp := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      runGulp(base, gulpfileName, Def.spaceDelimited(\"<arg>\").parsed.toList).exitValue()\n    },\n\n    gulpBuild := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      val result = runGulp(base, gulpfileName, List(\"build\")).exitValue()\n      if (result == 0) {\n        result\n      } else throw new Exception(\"gulp failed\")\n    },\n\n    gulpClean := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      val result = runGulp(base, gulpfileName, List(\"clean\")).exitValue()\n      if (result != 0) throw new Exception(\"gulp failed\")\n    },\n\n    gulpTest := {\n      val base = (gulpDirectory in Compile).value\n      val gulpfileName = (gulpFile in Compile).value\n      val result = runGulp(base, gulpfileName, List(\"test\")).exitValue()\n      if (result != 0) throw new Exception(\"gulp failed\")\n    },\n\n    // Executes `gulp build` before `sbt dist`\n    dist <<= dist dependsOn gulpBuild,\n\n    // Executes `gulp build` before `sbt stage`\n    stage <<= stage dependsOn gulpBuild,\n\n    // Executes `gulp clean` before `sbt clean`\n    clean <<= clean dependsOn gulpClean,\n\n    // Executes `gulp test` before `sbt test` (optional)\n    //(test in Test) <<= (test in Test) dependsOn gulpTest,\n\n    // Ensures that static assets in the ui/dist directory are packaged into\n    // target/scala-2.11/play-gulp_2.11-1.0.0-web-asset.jar/public when the play app is compiled\n    unmanagedResourceDirectories in Assets <+= (gulpDirectory in Compile)(_ / \"dist\"),\n  \n    // Starts the gulp watch task before sbt run\n    playRunHooks <+= (gulpDirectory, gulpFile).map {\n      (base, fileName) => GulpWatch(base, fileName)\n    },\n\n    // Allows all the specified commands below to be run within sbt in addition to gulp\n    commands <++= gulpDirectory {\n      base =>\n        Seq(\n          \"npm\",\n          \"bower\",\n          \"yo\"\n        ).map(cmd(_, base))\n    }\n  )\n\n  val withTemplates: Seq[Setting[_]] = Seq(\n    // Added ui/src/views/*.scala.html to the target of Scala view template compilation\n    sourceDirectories in TwirlKeys.compileTemplates in Compile <+= (gulpDirectory in Compile)(_ / \"src\"),\n    includeFilter in sources in TwirlKeys.compileTemplates := \"*.scala.html\",\n    gulpExcludes <<= gulpDirectory(gd => Seq(\n      gd + \"/src/app/\",\n      gd + \"/src/assets/\",\n      gd + \"/src/bower_components/\"\n    )),\n    excludeFilter in unmanagedSources <<=\n      (excludeFilter in unmanagedSources, gulpExcludes) {\n        (currentFilter: FileFilter, ge) =>\n          currentFilter || new FileFilter {\n            def accept(pathname: File): Boolean = {\n              (true /: ge.map(s => pathname.getAbsolutePath.startsWith(s)))(_ && _)\n            }\n          }\n      },\n    // Makes play autoreloader to compile Scala view templates and reload the browser\n    // upon changes in the view files ui/src/views/*.scala.html\n    // Adds ui/src/views directory's scala view template files to continuous hot reloading\n    watchSources <++= gulpDirectory map { path => ((path / \"src/views\") ** \"*.scala.html\").get}\n  )\n\n  private def runGulp(base: sbt.File, fileName: String, args: List[String] = List.empty): Process = {\n    if (System.getProperty(\"os.name\").startsWith(\"Windows\")) {\n      val process: ProcessBuilder = Process(\"cmd\" :: \"/c\" :: \"gulp\" :: \"--gulpfile=\" + fileName :: args, base)\n      println(s\"Will run: ${process.toString} in ${base.getPath}\")\n      process.run()\n    } else {\n      val process: ProcessBuilder = Process(\"gulp\" :: \"--gulpfile=\" + fileName :: args, base)\n      println(s\"Will run: ${process.toString} in ${base.getPath}\")\n      process.run()\n    }\n  }\n\n  import scala.language.postfixOps\n\n  private def cmd(name: String, base: File): Command = {\n    if (!base.exists()) {\n      base.mkdirs()\n    }\n    Command.args(name, \"<\" + name + \"-command>\") {\n      (state, args) =>\n        if (System.getProperty(\"os.name\").startsWith(\"Windows\")) {\n          Process(\"cmd\" :: \"/c\" :: name :: args.toList, base) !<\n        } else {\n          Process(name :: args.toList, base) !<\n        }\n        state\n    }\n  }\n\n  object GulpWatch {\n\n    def apply(base: File, fileName: String): PlayRunHook = {\n\n      object GulpSubProcessHook extends PlayRunHook {\n\n        var process: Option[Process] = None\n\n        override def beforeStarted(): Unit = {\n          process = Some(runGulp(base, fileName, \"watch\" :: Nil))\n        }\n\n        override def afterStopped(): Unit = {\n          process.foreach(_.destroy())\n          process = None\n        }\n      }\n\n      GulpSubProcessHook\n    }\n\n  }\n\n}\n```\n\nbuild.sbt\u3067\u3053\u306e\u8a2d\u5b9a\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n```scala:build.sbt\nimport PlayGulp._\n\n...\n\nlazy val root = (project in file(\".\"))\n  .enablePlugins(PlayScala)\n  .settings(playGulpSettings ++ withTemplates) //\u3053\u306e\u884c\u3092\u8ffd\u8a18\n```\n\n## 3. app/controllers/GulpAssets.scala\u306e\u4f5c\u6210\n\n\u7d9a\u3044\u3066\u3001\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092ui\u30d5\u30a9\u30eb\u30c0\u306egulp-angular\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u305f\u3081\u306eGulpAssets\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```scala:app/controllers/GulpAssets.scala\npackage controllers\n\nimport java.io.File\nimport javax.inject.Singleton\n\nimport play.api.Play.current\nimport play.api.{Logger, _}\nimport play.api.http.DefaultHttpErrorHandler\nimport play.api.libs.concurrent.Execution.Implicits.defaultContext\nimport play.api.mvc.{Action, AnyContent}\n\nimport scala.concurrent.Future\n\nobject GulpAssets extends controllers.Assets(DefaultHttpErrorHandler) {\n\n  private lazy val logger = Logger(getClass)\n\n  def index = Action.async { request =>\n    if (request.path.endsWith(\"/\")) {\n      at(\"index.html\").apply(request)\n    } else {\n      Future(Redirect(request.path + \"/\"))\n    }\n  }\n\n  // List of UI directories from which static assets are served in development mode\n  // (A directory in higher priority comes first.)\n  val devBasePaths: List[java.io.File] = List(\n    Play.application.getFile(\"ui/.tmp/serve\"),\n    Play.application.getFile(\"ui/src\"),\n    Play.application.getFile(\"ui\")\n  )\n\n  def devAssetHandler(file: String): Action[AnyContent] = Action { request =>\n    // Generates a non-strict list of the full paths\n    val targetPaths = devBasePaths.view map {\n      new File(_, file)\n    }\n\n    // Generates responses returning the file in the dev and test modes only (not in the production mode)\n    val responses = targetPaths filter { file =>\n      file.exists()\n    } map { file =>\n      if (file.isFile) {\n        logger.info(s\"Serving $file\")\n        Ok.sendFile(file, inline = true).withHeaders(CACHE_CONTROL -> \"no-store\")\n      } else {\n        Forbidden(views.html.defaultpages.unauthorized())\n      }\n    }\n\n    // Returns the first valid path if valid or NotFound otherwise\n    responses.headOption getOrElse NotFound(\"404 - Page not found error\\n\" + request.path)\n  }\n\n  def prodAssetHandler(file: String): Action[AnyContent] = Assets.at(\"/public\", file)\n\n  lazy val atHandler: String => Action[AnyContent] = if (Play.isProd) prodAssetHandler(_: String) else devAssetHandler(_: String)\n\n  def at(file: String): Action[AnyContent] = atHandler(file)\n\n}\n\n@Singleton\nclass GulpAssets extends controllers.Assets(DefaultHttpErrorHandler) {\n  def at(file: String) = GulpAssets.at(file: String)\n}\n```\n\n## 4. conf/routes\u306e\u5909\u66f4\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u7528\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0(Assets.versioned)\u306f\u524a\u9664\u3057\u3001\u304b\u308f\u308a\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fGulp\u7528\u306e\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a(GulpAssets.at)\u3092\u4e00\u756a\u4e0b\u306b\u52a0\u3048\u307e\u3059\u3002\n\n```scala:routes\nGET        /                           controllers.Application.index\nGET        /oldhome                    controllers.Application.oldhome\nGET        /*file                      controllers.GulpAssets.at(file)\n\n#GET     /assets/*file               controllers.Assets.versioned(path=\"/public\", file: Asset)\n```\n\nroute\u3092\u4fee\u6b63\u3057\u305f\u306e\u3067\u3001views\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3082\u5408\u308f\u305b\u3066\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nBefore\n\n```html:app/views/main.scala.html\n@(title: String)(content: Html)\n\n<!DOCTYPE html>\n\n<html lang=\"en\">\n  <head>\n    <title>@title</title>\n    <link rel=\"stylesheet\" media=\"screen\" href=\"@routes.Assets.versioned(\"stylesheets/main.css\")\">\n    <link rel=\"shortcut icon\" type=\"image/png\" href=\"@routes.Assets.versioned(\"images/favicon.png\")\">\n    <script src=\"@routes.Assets.versioned(\"javascripts/hello.js\")\" type=\"text/javascript\"></script>\n  </head>\n  <body>\n    @content\n  </body>\n</html>\n```\n\nAfter\n\n```html:app/views/main.scala.html\n@(title: String)(content: Html)\n\n<!DOCTYPE html>\n\n<html lang=\"en\">\n  <head>\n    <title>@title</title>\n    <link rel=\"stylesheet\" media=\"screen\" href=\"@routes.GulpAssets.at(\"assets/styles/oldhome-style.css\")\">\n    <link rel=\"shortcut icon\" type=\"image/png\" href=\"@routes.GulpAssets.at(\"assets/favicon.png\")\">\n    <script type=\"text/javascript\" src=\"@routes.GulpAssets.at(\"assets/scripts/oldhome-script.js\")\"></script>\n  </head>\n  <body>\n    @content\n  </body>\n</html>\n```\n\n\u4e0a\u8a18\u306eroutes.GulpAssets.at(\"assets/~/~.xxx\")\u306e\u5b9f\u30d1\u30b9\u306fui/src/assets/~/~.xxx\u306b\u76f8\u5f53\u3059\u308b\u306e\u3067\u3001\u3053\u306e\u5834\u6240\u306b\u9069\u5f53\u306boldhome-style.css\u3084oldhome-script.js\u3092\u3064\u304f\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\n$ touch ui/src/assets/styles/oldhome-style.css\n$ touch ui/src/assets/scripts/oldhome-script.js\n```\n\n\u305d\u3057\u3066Application.index\u306fGulpAssets.index\u306b\u8a2d\u5b9a\u3057\u3066\u3001URL\u306e\u30eb\u30fc\u30c8/\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306f\u3001\u958b\u767a\u6642\u306fui/.tmp/serve/index.html\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u5f93\u6765\u306eindex\u30da\u30fc\u30b8\u306f\u9069\u5f53\u306b/oldhome\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```scala:app/controllers/Application.scala\nclass Application extends Controller {\n\n  def index = GulpAssets.index\n\n  def oldhome = Action {\n    Ok(views.html.index(\"Play Framework\"))\n  }\n\n}\n```\n\n## 5. gulp-angular\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5fae\u4fee\u6b63\n\u3055\u3059\u304c\u306bgulp-angular\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u305d\u306e\u307e\u307e\u3067\u306fPlay\u30a2\u30d7\u30ea\u3068\u7d71\u5408\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n* ui/.bowerrc\n\n  Before\n\n  ```json:ui/.bowerrc\n{\n  \"directory\": \"bower_components\"\n}\n  ```\n\n  After\n\n  ```json:ui/.bowerrc\n{\n  \"directory\": \"src/bower_components\"\n}\n  ```\n\n* bower_components\u306fsrc\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u3078\u79fb\u52d5\n  \n  ```bash\nmv ui/bower_components ui/src/bower_components\n  ```\n\n* ui/gulp/conf.js\n  \n  Before\n\n  ```js:ui/gulp/conf.js\nexports.wiredep = {\n  exclude: [/bootstrap.js$/, /bootstrap-sass-official\\/.*\\.js/, /bootstrap\\.css/],\n  directory: 'bower_components'\n};\n  ```\n\n  After\n\n  ```js:ui/gulp/conf.js\nexports.wiredep = {\n  exclude: [/bootstrap.js$/, /bootstrap-sass-official\\/.*\\.js/, /bootstrap\\.css/],\n  directory: 'src/bower_components'\n};\n  ```\n  \n* ui/gulp/build.js\n  \n  Before\n\n  ```js:ui/gulp/build.js\ngulp.task('fonts', function () {\n  return gulp.src($.mainBowerFiles())\n    .pipe($.filter('**/*.{eot,svg,ttf,woff,woff2}'))\n    .pipe($.flatten())\n    .pipe(gulp.dest(path.join(conf.paths.dist, '/fonts/')));\n});\n\n...\n\ngulp.task('build', ['html', 'fonts', 'other']);\n  ```\n\n  After\n\n  ```js:ui/gulp/build.js\ngulp.task('fonts', function () {\n  return gulp.src(path.join(conf.paths.src, '/bower_components/**/*'))\n    .pipe($.filter('**/*.{eot,svg,ttf,woff,woff2}'))\n    .pipe($.flatten())\n    .pipe(gulp.dest(path.join(conf.paths.dist, '/fonts/')));\n});\n\ngulp.task('otherassets', function () {\n  return gulp.src(path.join(conf.paths.src, '/assets/**/*'))\n    .pipe(gulp.dest(path.join(conf.paths.dist, '/assets/'), {overwrite: false}));\n});\n\n...\n\ngulp.task('build', ['html', 'fonts', 'other', 'otherassets']);\n  ```\n\n\u5fc5\u9808\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u5404\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u3069\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\u3055\u305b\u3066\u3044\u308b\u306e\u304b\u304c\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u8868\u793a\u3055\u308c\u305f\u307b\u3046\u304c\u6163\u308c\u308b\u307e\u3067\u306f\u3044\u3044\u3068\u601d\u3046\u306e\u3067\u3001log\u306e\u51fa\u529b\u30ec\u30d9\u30eb\u3092ERROR\u304b\u3089INFO\u306b\u7de9\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n```xml:conf/logback.xml\n...\n<root level=\"INFO\">\n  <appender-ref ref=\"STDOUT\" />\n</root>\n...\n```\n\n\u3053\u308c\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n# \u4f7f\u3044\u65b9\n\nsbt/activator\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u5165\u308b\u3068\u3001\n\n```bash\n$ sbt/activator\n```\n\nbuild, clean, serve, test\u306a\u3069\u306egulp\u306e\u30bf\u30b9\u30af\u3092ui\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30eb\u30fc\u30c8\u3068\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002gulp\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30bf\u30b9\u30af(\u3053\u3053\u3067\u306fgulp build)\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001ui/build\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bng-annotate, uglify\u7b49\u304c\u3055\u308c\u305f\u305d\u306e\u4ed6\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3068\u3001JavaScript/CSS\u3092inject\u3055\u308c\u305findex.html\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash\n[play-gulp] > gulp\nWill run: [gulp, --gulpfile=gulpfile.js, build] in /home/user/dev//play-gulp/ui\n[23:41:29] Using gulpfile ~/dev/play-gulp/ui/gulpfile.js\n[23:41:29] Starting 'clean'...\n[23:41:29] Finished 'clean' after 53 ms\n[23:41:29] Starting 'default'...\n[23:41:29] Starting 'scripts'...\n[23:41:29] Starting 'styles'...\n[23:41:29] Starting 'partials'...\n[23:41:29] Starting 'fonts'...\n[23:41:29] Starting 'other'...\n[23:41:29] Starting 'otherassets'...\n[23:41:29] Finished 'default' after 480 ms\n[23:41:29] gulp-inject 2 files into index.scss.\n[23:41:31] Finished 'styles' after 1.87 s\n[23:41:31] all files 7.88 kB\n[23:41:31] Finished 'scripts' after 2.04 s\n[23:41:31] Starting 'inject'...\n[23:41:31] Finished 'partials' after 1.73 s\n[23:41:31] gulp-inject 1 files into index.html.\n[23:41:31] Finished 'otherassets' after 1.64 s\n[23:41:31] gulp-inject 10 files into index.html.\n[23:41:31] Finished 'inject' after 121 ms\n[23:41:31] Starting 'html'...\n[23:41:31] gulp-inject 1 files into index.html.\n[23:41:40] 'dist/' styles/app-c90c023e53.css 120.34 kB\n[23:41:40] 'dist/' styles/vendor-1dddaadd0b.css 58.62 kB\n[23:41:40] 'dist/' scripts/app-10800ada38.js 6.26 kB\n[23:41:40] 'dist/' scripts/vendor-48a98d1612.js 438.69 kB\n[23:41:40] 'dist/' index.html 636 B\n[23:41:40] 'dist/' all files 624.56 kB\n[23:41:40] Finished 'html' after 8.83 s\n[23:41:40] Finished 'other' after 11 s\n[23:41:40] Finished 'fonts' after 11 s\n[23:41:40] Starting 'build'...\n[23:41:40] Finished 'build' after 7.29 \u03bcs\n```\n\nrun\u306b\u3088\u308a\u958b\u767a\u30e2\u30fc\u30c9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001`PlayGulp.scala`\u306e\u8a2d\u5b9a\n\n```scala:project/PlayGulp.scala\n...\nplayRunHooks <+= (gulpDirectory, gulpFile).map {\n      (base, fileName) => GulpWatch(base, fileName)\n    }\n...\n```\n\n\u306b\u3088\u308agulp watch\u30bf\u30b9\u30af\u304c\u547c\u3070\u308c\u3001http://localhost:9000 \u3092\u958b\u304f\u3068\u3001\n\n\n```bash\n[play-gulp] > run\n\nWill run: [gulp, --gulpfile=gulpfile.js, watch] in /home/user/dev/play-gulp/ui\n--- (Running the application, auto-reloading is enabled) ---\n\n[info] p.a.l.c.ActorSystemProvider - Starting application default Akka system: application\n[info] p.c.s.NettyServer - Listening for HTTP on /localhost:9000\n\n(Server started, use Ctrl+D to stop and go back to the console...)\n```\n\nYeoman\u306e\u30b7\u30f3\u30dc\u30eb\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u3072\u3052\u304a\u3058\u3055\u3093\u3068\u6614\u306e\u4eba\u6c17British sitcom\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u98fe\u308b(\u306a\u305c\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u3053\u3053\u3067\u51fa\u3066\u304f\u308b\u306e\u304b\u7406\u7531\u306f\u77e5\u308a\u307e\u305b\u3093...)\u30c8\u30c3\u30d7\u753b\u9762\u306b\u306a\u308a\u307e\u3059\u3002\n\n![Selection_014.png](https://qiita-image-store.s3.amazonaws.com/0/38958/c98e6a03-a677-2832-9f5f-faebdac04d39.png)\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u3001GulpAssets\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u7d4c\u7531\u3067\u3069\u3053\u306e\u30d1\u30b9\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u304cserve\u3055\u308c\u3066\u3044\u308b\u304b\u308f\u304b\u308a\u307e\u3059\u3002\n\n```bash\n[23:52:50] Using gulpfile ~/dev/play-gulp/ui/gulpfile.js\n[23:52:50] Starting 'scripts'...\n[23:52:50] Starting 'styles'...\n[23:52:50] gulp-inject 2 files into index.scss.\n[23:52:51] all files 7.88 kB\n[23:52:51] Finished 'scripts' after 530 ms\n[23:52:52] Finished 'styles' after 1.43 s\n[23:52:52] Starting 'inject'...\n[23:52:52] gulp-inject 1 files into index.html.\n[23:52:52] gulp-inject 10 files into index.html.\n[23:52:52] Finished 'inject' after 61 ms\n[23:52:52] Starting 'watch'...\n[23:52:52] Finished 'watch' after 15 ms\n...\n[info] - play.api.Play - Application started (Dev)\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/.tmp/serve/index.html\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/toastr/toastr.css\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/angular-animate/angular-animate.js\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/.tmp/serve/app/index.css\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/animate.css/animate.css\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/angular/angular.js\n[info] - controllers.GulpAssets - Serving /home/user/dev/play-gulp/ui/src/bower_components/jquery/dist/jquery.js\n...\n```\n\n\u898b\u3048\u3066\u3044\u308b\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u306e\u5b9f\u4f53\u306f\u3001\u30c7\u30d0\u30c3\u30b0\u6642\u306bGulp\u304c\u4e00\u6642\u7684\u306b\u751f\u6210\u3059\u308b`ui/.tmp/serve/index.html`\u3067\u3059\u3002\n\n\u30c7\u30d0\u30c3\u30b0\u3092\u3084\u3081\u3066\u3001sbt(\u307e\u305f\u306factivator)\u306e`stage`\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\n\n```bash\n[play-gulp] > stage\n```\n\n`target/scala-2.11/play-gulp_2.11-1.0-web-assets.jar`\u304c\u307b\u304b\u306ejar\u30d5\u30a1\u30a4\u30eb\u3068\u3068\u3082\u306b\u751f\u6210\u3055\u308c\u307e\u3059\u3002`play-gulp_2.11-1.0-web-assets.jar`\u3092zip\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u89e3\u51cd\u3059\u308b\u3068\u3001Gulp\u306b\u3088\u308a\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u5165\u3063\u3066\u3044\u308b`ui/dist`\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u8eab\u304c\u305d\u306e\u307e\u307e\u305d\u3063\u304f\u308ajar\u5185\u306epublic\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n![Selection_015.png](https://qiita-image-store.s3.amazonaws.com/0/38958/33e374fe-f7ae-d35b-eb40-0dd0fae4b980.png)\n\n\u3053\u306ejar/public\u306b\u306f\u672c\u6765\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306epublic\u30d5\u30a9\u30eb\u30c0\u5185\u306e\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u30b3\u30d4\u30fc\u3055\u308c\u307e\u3059\u304c\u3001\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8/public\u30d5\u30a9\u30eb\u30c0\u3092\u524a\u9664\u3057\u3066\u3001\u4ee3\u308f\u308a\u306b\u4e0b\u8a18\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\n\n```scala:project/PlayGulp.scala\nunmanagedResourceDirectories in Assets <+= (gulpDirectory in Compile)(_ / \"dist\")\n```\n\n\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nGulp\u3067\u30d3\u30eb\u30c9\u3057\u305f\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306f\u3001\u6700\u7d42\u7684\u306b\u306f`dist`\u30bf\u30b9\u30af\u306b\u3088\u308a\u3001\u30c7\u30d7\u30ed\u30a4\u7528\u30d5\u30a1\u30a4\u30eb\u4e00\u5f0f`target/universal/play-gulp-1.0.zip`\u306e\u4e2d\u306elib\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\n\u30ea\u30ea\u30fc\u30b9\u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u3067\u30c7\u30a3\u30d9\u30ed\u30c3\u30d1\u30fc\u30c4\u30fc\u30eb\u3092\u958b\u304f\u3068\u3001JavaScript/CSS\u304c\u304d\u3061\u3093\u3068minify, concatenate, obfuscate\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```bash\n[play-gulp] > testProd\n```\n![Selection_016.png](https://qiita-image-store.s3.amazonaws.com/0/38958/a536258a-6788-1647-b3f2-cab5d515fdd1.png)\n\napp/views/~.scala.html\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30a2\u30bb\u30c3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u6642\u306f\u3001JavaScript, CSS, PDF, \u753b\u50cf\u3001\u97f3\u697d\u30d5\u30a1\u30a4\u30eb\u306a\u3069(\u305f\u3068\u3048\u3070photo.png)\u3092ui/src/assets\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u3044\u3066\u304a\u3051\u3070\u3001GulpAssets\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u7d4c\u7531\u3067\u958b\u767a\u6642\u3082\u30ea\u30ea\u30fc\u30b9\u6642\u3082\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002(routes\u3067/\u3092gulp-angular\u306e\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u306e\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u3042\u308c\u3070GulpAssets\u3092\u4f7f\u308f\u305a\"/assets/images/photo.png\"\u3067\u3082\u53ef\u3002)\n\n```scala:app/views/~.scala.html\n<img src=\"@routes.GulpAssets.at(\"assets/images/photo.png\")\">\n<img src=\"/assets/images/photo.png\">\n```\n\n```scala:app/views/~.scala.html\n<img src=\"@routes.Assets.at(\"assets/images/photo.png\")\">\n<img src=\"/assets/images/photo.png\">\n```\n\n# \u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3068\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u5206\u96e2\u958b\u767a\n\n\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u306e\u3044\u3044\u3068\u3053\u308d\u3068\u3057\u3066\u3001Gulp\u3092\u30d5\u30eb\u306b\u4f7f\u3048\u308b\u70b9\u306b\u52a0\u3048\u3066\u3001\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3068\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u5206\u96e2\u958b\u767a\u304c\u3057\u3084\u3059\u3044\u3068\u3044\u3046\u70b9\u3082\u6319\u3052\u3089\u308c\u307e\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306eui\u30d5\u30a9\u30eb\u30c0\u5185\u306f\u4e00\u822c\u7684\u306aGulp\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306a\u306e\u3067\u3001Play Framework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u306f\u89e6\u3089\u305a\u3001ui\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306egulp-angular\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3060\u3051\u3092gulp\u30b3\u30de\u30f3\u30c9\u3067\u958b\u767a\u3057\u3066\u3044\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ cd ui\n$ gulp clean\n$ gulp serve\n$ gulp test\n$ gulp build\n```\n\nui\u4ee5\u4e0b\u3092git submodule\u3068\u3057\u3066\u7ba1\u7406\u3057\u3066\u304a\u304f\u3068\u3001\u30c7\u30b6\u30a4\u30ca\u30fc\u3055\u3093\u3068\u306e\u5206\u696d\u304c\u306f\u304b\u3069\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u305d\u306e\u4ed6\n\nGitHub\u306b\u3042\u3052\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u304a\u307e\u3051\u3068\u3057\u3066\u3001AngularJS\u306ehtml5mode\u3092\u6709\u52b9\u306b\u3057\u305f\u308a\u3001twirl\u306eScala html\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092ui/src/views/~~/~.scala.html \u306b\u7f6e\u3044\u3066\u307f\u305f\u308a\u3001Application\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306bREST API\u3063\u307d\u3044\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u307f\u305f\u308a\u3057\u3066\u3044\u307e\u3059\u3002\u958b\u767a\u30e2\u30fc\u30c9\u3067 http://localhost:9000/routes \u304b\u3089\u3044\u308d\u3093\u306a\u30d1\u30b9\u3092\u53e9\u3044\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5927\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u305b\u3093\u3057\u3001Gulp\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u306f\u4eba\u305d\u308c\u305e\u308c\u3060\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u6539\u5909\u3057\u3084\u3059\u3044\u3088\u3046\u3042\u3048\u3066\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u306f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u3054\u81ea\u7531\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3044\u305f\u3060\u3044\u3066\u7d50\u69cb\u3067\u3059\u3002\n", "tags": ["PlayFramework", "gulp", "yeoman", "sbt", "Scala"]}