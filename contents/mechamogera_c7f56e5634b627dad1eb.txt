{"context": " More than 1 year has passed since last update.EC2\u4f5c\u6210\u5f8c\u30b7\u30b9\u30c6\u30e0\u30c1\u30a7\u30c3\u30af\u3068\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u304c\u884c\u308f\u308c\u308b\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3059\u308b - Amazon Elastic Compute Cloud\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u304c\u7d42\u308f\u308b\u307e\u3067\u5f85\u3066\u3070\u8d77\u52d5\u5b8c\u4e86\u3068\u306a\u308b\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u306e\u7d50\u679c\u306fDescribeInstanceStatus API\u3067\u53d6\u5f97\u3067\u304d\u308b\n\n\u4f7f\u7528API\uff1aDescribeInstanceStatus - Amazon Elastic Compute Cloud\n\nAWS SDK\u306e\u4f7f\u7528\u30af\u30e9\u30b9Class: AWS::EC2::Client \u2014 AWS SDK for Ruby\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u306e\u7d50\u679c\u3092\u53d6\u5f97\u3057\u3066\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3066\u3070\u826f\u3044\nrequire 'aws-sdk'\n\nec2 = AWS::EC2.new(:proxy_uri => ENV['HTTP_PROXY'] || ENV['HTTP_PROXY'], :region => \"ap-northeast-1\")\n\n# \u7565\n\ncreated_instance = ec2.instances.create(ec2hash)\n\nec2info = ec2.client.describe_instance_status({\"instance_ids\" => [created_instance.instance_id]})\nstatus = ec2info.instance_status_set[0].instance_status.details[0].status rescue nil\n\nst_retry = 0\nwhile status != \"passed\" do\n  sleep 15\n  ec2info = ec2.client.describe_instance_status({\"instance_ids\" => [created_instance.instance_id]})\n  status = ec2info.instance_status_set[0].instance_status.details[0].status rescue nil\n  st_retry += 1\n  raise \"instance status is still bad\" if st_retry >= 20\nend\n\n\nEC2\u4f5c\u6210\u5f8c\u30b7\u30b9\u30c6\u30e0\u30c1\u30a7\u30c3\u30af\u3068\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u304c\u884c\u308f\u308c\u308b\n\n* [\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3059\u308b - Amazon Elastic Compute Cloud](http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/monitoring-system-instance-status-check.html)\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u304c\u7d42\u308f\u308b\u307e\u3067\u5f85\u3066\u3070\u8d77\u52d5\u5b8c\u4e86\u3068\u306a\u308b\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u306e\u7d50\u679c\u306fDescribeInstanceStatus API\u3067\u53d6\u5f97\u3067\u304d\u308b\n\n* \u4f7f\u7528API\uff1a[DescribeInstanceStatus - Amazon Elastic Compute Cloud](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeInstanceStatus.html)\n* AWS SDK\u306e\u4f7f\u7528\u30af\u30e9\u30b9[Class: AWS::EC2::Client \u2014 AWS SDK for Ruby](http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/EC2/Client.html#describe_instance_status-instance_method)\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u30c1\u30a7\u30c3\u30af\u306e\u7d50\u679c\u3092\u53d6\u5f97\u3057\u3066\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3066\u3070\u826f\u3044\n\n```rb\nrequire 'aws-sdk'\n\nec2 = AWS::EC2.new(:proxy_uri => ENV['HTTP_PROXY'] || ENV['HTTP_PROXY'], :region => \"ap-northeast-1\")\n\n# \u7565\n\ncreated_instance = ec2.instances.create(ec2hash)\n\nec2info = ec2.client.describe_instance_status({\"instance_ids\" => [created_instance.instance_id]})\nstatus = ec2info.instance_status_set[0].instance_status.details[0].status rescue nil\n\nst_retry = 0\nwhile status != \"passed\" do\n  sleep 15\n  ec2info = ec2.client.describe_instance_status({\"instance_ids\" => [created_instance.instance_id]})\n  status = ec2info.instance_status_set[0].instance_status.details[0].status rescue nil\n  st_retry += 1\n  raise \"instance status is still bad\" if st_retry >= 20\nend\n\n```", "tags": ["Ruby", "AWS", "AWS_SDK"]}