{"tags": ["mecab", "PHP"], "context": " More than 1 year has passed since last update.\n\n\u30a8\u30e9\u30fc\u3067\u305f\nPHP\u306efile_put_contents()\u3067\u3001\u751f\u6210\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30ebhoge.txt\u3092exec()\u3067mecab\u5b9f\u884c\u3057\u3066\u307f\u305f\u3089\u3001\u7d50\u679c\u304c\u4e8c\u91cd\u306b\u51fa\u3066\u3057\u307e\u3046\u3002\narray(14) {\n  [0]=>\n  string(61) \"\u6211\u8f29    \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u6211\u8f29,\u30ef\u30ac\u30cf\u30a4,\u30ef\u30ac\u30cf\u30a4\"\n  [1]=>\n  string(40) \"\u306f   \u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\"\n  [2]=>\n  string(43) \"\u732b   \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u732b,\u30cd\u30b3,\u30cd\u30b3\"\n  [3]=>\n  string(54) \"\u3067   \u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30c0,\u9023\u7528\u5f62,\u3060,\u30c7,\u30c7\"\n  [4]=>\n  string(75) \"\u3042\u308b    \u52a9\u52d5\u8a5e,*,*,*,\u4e94\u6bb5\u30fb\u30e9\u884c\u30a2\u30eb,\u57fa\u672c\u5f62,\u3042\u308b,\u30a2\u30eb,\u30a2\u30eb\"\n  [5]=>\n  string(37) \"\u3002   \u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\"\n  [6]=>\n  string(3) \"EOS\"\n  [7]=>\n  string(61) \"\u6211\u8f29    \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u6211\u8f29,\u30ef\u30ac\u30cf\u30a4,\u30ef\u30ac\u30cf\u30a4\"\n  [8]=>\n  string(40) \"\u306f   \u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\"\n  [9]=>\n  string(43) \"\u732b   \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u732b,\u30cd\u30b3,\u30cd\u30b3\"\n  [10]=>\n  string(54) \"\u3067   \u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30c0,\u9023\u7528\u5f62,\u3060,\u30c7,\u30c7\"\n  [11]=>\n  string(75) \"\u3042\u308b    \u52a9\u52d5\u8a5e,*,*,*,\u4e94\u6bb5\u30fb\u30e9\u884c\u30a2\u30eb,\u57fa\u672c\u5f62,\u3042\u308b,\u30a2\u30eb,\u30a2\u30eb\"\n  [12]=>\n  string(37) \"\u3002   \u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\"\n  [13]=>\n  string(3) \"EOS\"\n}\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u76f4\u63a5mecab hoge.txt\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002\ninput-buffer overflow. The line is split. use -b #SIZE option.\n\u3093\u3058\u3083\u3042\u3001mecab -b 81920 hoge.txt\u3067\u2026\u3063\u3066\u307e\u305f\u540c\u3058\u30a8\u30e9\u30fc\u3067\u308b\u3058\u3083\u3093\u3002\n\n\u6539\u884c\u30b3\u30fc\u30c9\u304c\u539f\u56e0??\nfile hoge.txt\u3057\u3066\u307f\u305f\u3089\u3001\nhoge.txt: UTF-8 Unicode text, with no line terminators\u3068\u51fa\u308b\u3002\n\u8a66\u3057\u306b\u3001PHP_EOL\u3092\u8ffd\u52a0\u3057\u305f\u3089\u3001\u30a8\u30e9\u30fc\u304c\u89e3\u6d88\u3055\u308c\u307e\u3057\u305f\u3002\n\nmecab.php\n$source = './tmp/hoge.txt';\n$text = '\u6211\u8f29\u306f\u732b\u3067\u3042\u308b\u3002';\n$text .= PHP_EOL;\nfile_put_contents($source, $text);\n\n\n\u3088\u304f\u308f\u304b\u3089\u3093\u2026\n## \u30a8\u30e9\u30fc\u3067\u305f\n\nPHP\u306e`file_put_contents()`\u3067\u3001\u751f\u6210\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb`hoge.txt`\u3092`exec()`\u3067mecab\u5b9f\u884c\u3057\u3066\u307f\u305f\u3089\u3001\u7d50\u679c\u304c\u4e8c\u91cd\u306b\u51fa\u3066\u3057\u307e\u3046\u3002\n\n```\narray(14) {\n  [0]=>\n  string(61) \"\u6211\u8f29\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u6211\u8f29,\u30ef\u30ac\u30cf\u30a4,\u30ef\u30ac\u30cf\u30a4\"\n  [1]=>\n  string(40) \"\u306f\t\u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\"\n  [2]=>\n  string(43) \"\u732b\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u732b,\u30cd\u30b3,\u30cd\u30b3\"\n  [3]=>\n  string(54) \"\u3067\t\u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30c0,\u9023\u7528\u5f62,\u3060,\u30c7,\u30c7\"\n  [4]=>\n  string(75) \"\u3042\u308b\t\u52a9\u52d5\u8a5e,*,*,*,\u4e94\u6bb5\u30fb\u30e9\u884c\u30a2\u30eb,\u57fa\u672c\u5f62,\u3042\u308b,\u30a2\u30eb,\u30a2\u30eb\"\n  [5]=>\n  string(37) \"\u3002\t\u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\"\n  [6]=>\n  string(3) \"EOS\"\n  [7]=>\n  string(61) \"\u6211\u8f29\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u6211\u8f29,\u30ef\u30ac\u30cf\u30a4,\u30ef\u30ac\u30cf\u30a4\"\n  [8]=>\n  string(40) \"\u306f\t\u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\"\n  [9]=>\n  string(43) \"\u732b\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u732b,\u30cd\u30b3,\u30cd\u30b3\"\n  [10]=>\n  string(54) \"\u3067\t\u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30c0,\u9023\u7528\u5f62,\u3060,\u30c7,\u30c7\"\n  [11]=>\n  string(75) \"\u3042\u308b\t\u52a9\u52d5\u8a5e,*,*,*,\u4e94\u6bb5\u30fb\u30e9\u884c\u30a2\u30eb,\u57fa\u672c\u5f62,\u3042\u308b,\u30a2\u30eb,\u30a2\u30eb\"\n  [12]=>\n  string(37) \"\u3002\t\u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\"\n  [13]=>\n  string(3) \"EOS\"\n}\n```\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u76f4\u63a5`mecab hoge.txt`\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002  \n**input-buffer overflow. The line is split. use -b #SIZE option.**\n\n\u3093\u3058\u3083\u3042\u3001`mecab -b 81920 hoge.txt`\u3067\u2026\u3063\u3066\u307e\u305f\u540c\u3058\u30a8\u30e9\u30fc\u3067\u308b\u3058\u3083\u3093\u3002\n\n## \u6539\u884c\u30b3\u30fc\u30c9\u304c\u539f\u56e0??\n\n`file hoge.txt`\u3057\u3066\u307f\u305f\u3089\u3001\n`hoge.txt: UTF-8 Unicode text, with no line terminators`\u3068\u51fa\u308b\u3002  \n\u8a66\u3057\u306b\u3001PHP_EOL\u3092\u8ffd\u52a0\u3057\u305f\u3089\u3001\u30a8\u30e9\u30fc\u304c\u89e3\u6d88\u3055\u308c\u307e\u3057\u305f\u3002\n\n```php:mecab.php\n$source = './tmp/hoge.txt';\n$text = '\u6211\u8f29\u306f\u732b\u3067\u3042\u308b\u3002';\n$text .= PHP_EOL;\nfile_put_contents($source, $text);\n```\n\n\u3088\u304f\u308f\u304b\u3089\u3093\u2026\n"}