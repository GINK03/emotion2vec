{"tags": ["amazons3", "aws-sdk", "boto3", "Python"], "context": "generate_presigned_url\u3067\u671f\u9650\u4ed8\u304dURL\u3092\u767a\u884c\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b58\u5728\u3057\u306a\u3044\u30ad\u30fc\u306b\u5bfe\u3057\u3066\u3082\u4f5c\u308c\u3061\u3083\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\n\u306a\u306e\u3067get_object\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b9f\u5728\u3059\u308b\u304b\u5426\u304b\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u3001\u671f\u9650\u4ed8\u304dURL\u3092\u767a\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nimport boto3\nimport botocore\nimport logging\nlogger = logging.getLogger()\n\ndef create_presigned_url( bucket_name, key ):\n    s3 = boto3.client('s3')\n    try:\n        s3.get_object(\n            Bucket = bucket_name,\n            Key = key\n        )\n        url = s3.generate_presigned_url(\n            ClientMethod = 'get_object',\n            Params = {\n                Bucket = bucket_name,\n                Key = key\n            },\n            ExpiresIn = 3600,\n            HttpMethod = 'GET'\n        )\n        return url\n    except botocore.exceptions.ClientError as e:\n        logger.warning(e)\n        return 'File ' + bucket_name + '/' + key + 'not found'\n\n\nbucket_name = 'BUCKET_NAME'\nkey = 'S3_OBJECT_KEY'\ncreate_presigned_url( bucket_name, key )\n\n\n\u5b58\u5728\u3057\u306a\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066get_object\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001ClientError\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u306a\u306e\u3067\u305d\u308c\u3092\u5229\u7528\u3057\u3066try ~ except\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u3001generate_presigned_url\u3092\u5b9f\u884c\u305b\u305a\u306b\u51e6\u7406\u3092\u7d42\u4e86\u3055\u305b\u307e\u3059\u3002\n\n`generate_presigned_url`\u3067\u671f\u9650\u4ed8\u304dURL\u3092\u767a\u884c\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b58\u5728\u3057\u306a\u3044\u30ad\u30fc\u306b\u5bfe\u3057\u3066\u3082\u4f5c\u308c\u3061\u3083\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\n\u306a\u306e\u3067get_object\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b9f\u5728\u3059\u308b\u304b\u5426\u304b\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u3001\u671f\u9650\u4ed8\u304dURL\u3092\u767a\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```\nimport boto3\nimport botocore\nimport logging\nlogger = logging.getLogger()\n\ndef create_presigned_url( bucket_name, key ):\n\ts3 = boto3.client('s3')\n\ttry:\n\t\ts3.get_object(\n\t\t\tBucket = bucket_name,\n\t\t\tKey = key\n\t\t)\n\t\turl = s3.generate_presigned_url(\n\t\t\tClientMethod = 'get_object',\n\t\t\tParams = {\n\t\t\t\tBucket = bucket_name,\n\t\t\t\tKey = key\n\t\t\t},\n\t\t\tExpiresIn = 3600,\n\t\t\tHttpMethod = 'GET'\n\t\t)\n\t\treturn url\n\texcept botocore.exceptions.ClientError as e:\n\t\tlogger.warning(e)\n\t\treturn 'File ' + bucket_name + '/' + key + 'not found'\n\t\t\n\nbucket_name = 'BUCKET_NAME'\nkey = 'S3_OBJECT_KEY'\ncreate_presigned_url( bucket_name, key )\n\t\n```\n\n\u5b58\u5728\u3057\u306a\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066get_object\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001`ClientError`\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u306a\u306e\u3067\u305d\u308c\u3092\u5229\u7528\u3057\u3066`try ~ except`\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u3001generate_presigned_url\u3092\u5b9f\u884c\u305b\u305a\u306b\u51e6\u7406\u3092\u7d42\u4e86\u3055\u305b\u307e\u3059\u3002\n"}