{"tags": ["thor", "Ruby"], "context": " More than 1 year has passed since last update.\n\nthor gem \u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b #thor #ruby\n\n\u6982\u8981\nthor gem \u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u307e\u3059\u3002\nThor \u306e Thor::Actions \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u5185\u90e8\u7684\u306b ERB \u3092\u5229\u7528\u3057\u305f\n\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u5f8c\u8ff0\u306e\u4f8b\u306f Thor::Group \u3067\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u3001\nThor \u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306b register \u3067\u767b\u9332\u3057\u3066\u3044\u307e\u3059\u3002\n\n\nargument \u30e1\u30bd\u30c3\u30c9\u306b\u5f15\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u305f\u5f15\u6570\u306f\u30af\u30e9\u30b9\u5185\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u5229\u7528\u53ef\u80fd\u3067\u3059\n\nsource_root \u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u306b\u51e6\u7406\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5b9a\u7fa9\u3057\u307e\u3059\n\ntemplate \u30e1\u30bd\u30c3\u30c9\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u51fa\u529b\u3092\u884c\u3044\u307e\u3059\u3002\u5f15\u6570\u306e\u6700\u5f8c\u306b\u30cf\u30c3\u30b7\u30e5\u3092\u6e21\u3059\u3068\u3001\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5185\u3067 config \u3068\u3044\u3046\u540d\u524d\u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001 thor \u306e\u5185\u90e8\u5b9f\u88c5\u3092\u77e5\u3063\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u3063\u3066\u7d50\u69cb\u5fae\u5999\u306a\u4ed5\u69d8\u3060\u306a\u3001\u3068\u601d\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\u672c\u5f53\u306f template \u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u6642\u306b\u6307\u5b9a\u3059\u308b Hash \u306e\u5909\u6570\u540d\u306f\u81ea\u7531\u306a\u306e\u3067\u3059\u304c\u3001\nconfig \u3068\u3044\u3046\u540d\u524d\u306b\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u7406\u89e3\u3057\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u4ee5\u4e0bURL\u306b\u3066\u5185\u90e8\u5b9f\u88c5\u3092\u78ba\u8a8d\u53ef\u80fd\u3002 create_file \u6642\u306b config \u3068\u8a00\u3046\u540d\u524d\u3067 Hash \u3092\u6e21\u3057\u3066\u3044\u308b\nthor file_manipulation.rb L108-120\n\n\n\n\u4ed5\u69d8\n\u4e0b\u8a18\u306e3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\n<name>/lib/<name>.rb\n<name>/lib/version.rb\n<name>/README\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\ntemplate/ruby_src.tt\nmodule_name , class_name \u306f argument \u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u3002\nconfig \u306f template \u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u6e21\u3057\u305f opt \u306e\u5185\u5bb9\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u3002\nmodule <%=module_name%>\n  class <%=class_name%>\n    def hoge\n      <%=config[:logic]%>\n    end\n  end\nend\n\n\ntemplate/version.tt\nmodule <%=module_name%>\n  VERSION = '0.0.1'\nend\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\nthor_generate_file_from_template.rb\nrequire 'thor'\n\nclass Generator < Thor::Group\n  include Thor::Actions\n\n  argument :module_name\n  argument :class_name\n  argument :file_name\n  argument :logic\n\n  def self.source_root\n    File.dirname(__FILE__)\n  end\n\n  def create_lib_file\n    # \u308f\u3056\u3068 config \u4ee5\u5916\u306e\u547d\u540d\u306b\u3057\u3066\u3044\u308b\u304c\u3001 config \u306b\u3057\u305f\u305f\u307b\u3046\u304c\u3088\u3055\u305d\u3046\n    opt = {\n      logic: \"puts 'hoge'\"\n    }\n    template('templates/ruby_src.tt', \"#{file_name}/lib/#{file_name}.rb\", opt)\n  end\n\n  def create_version\n    template('templates/version.tt', \"#{file_name}/lib/version.rb\")\n  end\n\n  def create_readme\n    create_file \"#{file_name}/README.md\"\n  end\nend\n\nmodule Hoge\n  class CLI < Thor\n    register(Generator, \"gen\", \"generate sample\", \"generate sample\")\n  end\nend\n\nHoge::CLI.start(ARGV)\n\n\n\u5b9f\u884c\n$ ruby thor_generate_file_from_template.rb gen HogeModule HogeClass hoge \"puts 'hoge'\"\n      create  hoge/lib/hoge.rb\n      create  hoge/lib/version.rb\n      create  hoge/README.md\n$ tree\n.\n\u2523 hoge\n\u2503 \u2523 lib\n\u2503 \u2503 \u2523 hoge.rb\n\u2503 \u2503 \u2517 version.rb\n\u2503 \u2517 README.md\n\u2523 templates\n\u2503 \u2523 ruby_src.tt\n\u2503 \u2517 version.tt\n\u2517 thor_generate_file_from_template.rb\n\n$ cat hoge/lib/hoge.rb\nmodule HogeModule\n  class HogeClass\n    def hoge\n      puts 'hoge'\n    end\n  end\nend\n$ cat hoge/lib/version.rb\nmodule HogeModule\n  VERSION = '0.0.1'\nend\n$ cat hoge/README.md\n\n\nThor \u95a2\u9023\u8cc7\u6599\n\nthor GitHub\nthor RubyGems\nthor wiki - Generators\n\n# thor gem \u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b #thor #ruby\n## \u6982\u8981\nthor gem \u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\nThor \u306e Thor::Actions \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u5185\u90e8\u7684\u306b ERB \u3092\u5229\u7528\u3057\u305f\n\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u5f8c\u8ff0\u306e\u4f8b\u306f Thor::Group \u3067\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u3001\nThor \u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306b `register` \u3067\u767b\u9332\u3057\u3066\u3044\u307e\u3059\u3002\n\n* `argument` \u30e1\u30bd\u30c3\u30c9\u306b\u5f15\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u305f\u5f15\u6570\u306f\u30af\u30e9\u30b9\u5185\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u5229\u7528\u53ef\u80fd\u3067\u3059\n* `source_root` \u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u306b\u51e6\u7406\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5b9a\u7fa9\u3057\u307e\u3059\n* `template` \u30e1\u30bd\u30c3\u30c9\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u51fa\u529b\u3092\u884c\u3044\u307e\u3059\u3002\u5f15\u6570\u306e\u6700\u5f8c\u306b\u30cf\u30c3\u30b7\u30e5\u3092\u6e21\u3059\u3068\u3001  \n  \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5185\u3067 `config` \u3068\u3044\u3046\u540d\u524d\u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u307e\u3059\u3002  \n  \u3053\u308c\u306f\u3001 thor \u306e\u5185\u90e8\u5b9f\u88c5\u3092\u77e5\u3063\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u3063\u3066\u7d50\u69cb\u5fae\u5999\u306a\u4ed5\u69d8\u3060\u306a\u3001\u3068\u601d\u3063\u305f\u308a\u3057\u307e\u3059\u3002  \n  \u672c\u5f53\u306f `template` \u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u6642\u306b\u6307\u5b9a\u3059\u308b Hash \u306e\u5909\u6570\u540d\u306f\u81ea\u7531\u306a\u306e\u3067\u3059\u304c\u3001  \n  `config` \u3068\u3044\u3046\u540d\u524d\u306b\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u7406\u89e3\u3057\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002    \n  \u4ee5\u4e0bURL\u306b\u3066\u5185\u90e8\u5b9f\u88c5\u3092\u78ba\u8a8d\u53ef\u80fd\u3002 create_file \u6642\u306b config \u3068\u8a00\u3046\u540d\u524d\u3067 Hash \u3092\u6e21\u3057\u3066\u3044\u308b  \n  [thor file_manipulation.rb L108-120](https://github.com/erikhuda/thor/blob/067f6638f95bd000b0a92cfb45b668bca5b0efe3/lib/thor/actions/file_manipulation.rb#L108-L120)\n\n## \u4ed5\u69d8\n\u4e0b\u8a18\u306e3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\n\n~~~\n<name>/lib/<name>.rb\n<name>/lib/version.rb\n<name>/README\n~~~\n\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n### template/ruby_src.tt\n`module_name` , `class_name` \u306f argument \u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u3002\n`config` \u306f template \u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u6e21\u3057\u305f `opt` \u306e\u5185\u5bb9\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u3002\n\n~~~\nmodule <%=module_name%>\n  class <%=class_name%>\n    def hoge\n      <%=config[:logic]%>\n    end\n  end\nend\n~~~\n\n### template/version.tt\n\n~~~\nmodule <%=module_name%>\n  VERSION = '0.0.1'\nend\n~~~\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n### thor_generate_file_from_template.rb\n\n~~~ruby\nrequire 'thor'\n\nclass Generator < Thor::Group\n  include Thor::Actions\n\n  argument :module_name\n  argument :class_name\n  argument :file_name\n  argument :logic\n\n  def self.source_root\n    File.dirname(__FILE__)\n  end\n\n  def create_lib_file\n    # \u308f\u3056\u3068 config \u4ee5\u5916\u306e\u547d\u540d\u306b\u3057\u3066\u3044\u308b\u304c\u3001 config \u306b\u3057\u305f\u305f\u307b\u3046\u304c\u3088\u3055\u305d\u3046\n    opt = {\n      logic: \"puts 'hoge'\"\n    }\n    template('templates/ruby_src.tt', \"#{file_name}/lib/#{file_name}.rb\", opt)\n  end\n\n  def create_version\n    template('templates/version.tt', \"#{file_name}/lib/version.rb\")\n  end\n\n  def create_readme\n    create_file \"#{file_name}/README.md\"\n  end\nend\n\nmodule Hoge\n  class CLI < Thor\n    register(Generator, \"gen\", \"generate sample\", \"generate sample\")\n  end\nend\n\nHoge::CLI.start(ARGV)\n~~~\n\n## \u5b9f\u884c\n\n~~~bash\n$ ruby thor_generate_file_from_template.rb gen HogeModule HogeClass hoge \"puts 'hoge'\"\n      create  hoge/lib/hoge.rb\n      create  hoge/lib/version.rb\n      create  hoge/README.md\n$ tree\n.\n\u2523 hoge\n\u2503 \u2523 lib\n\u2503 \u2503 \u2523 hoge.rb\n\u2503 \u2503 \u2517 version.rb\n\u2503 \u2517 README.md\n\u2523 templates\n\u2503 \u2523 ruby_src.tt\n\u2503 \u2517 version.tt\n\u2517 thor_generate_file_from_template.rb\n\n$ cat hoge/lib/hoge.rb\nmodule HogeModule\n  class HogeClass\n    def hoge\n      puts 'hoge'\n    end\n  end\nend\n$ cat hoge/lib/version.rb\nmodule HogeModule\n  VERSION = '0.0.1'\nend\n$ cat hoge/README.md\n~~~\n\n## Thor \u95a2\u9023\u8cc7\u6599\n* [thor GitHub](https://github.com/erikhuda/thor)\n* [thor RubyGems](https://github.com/erikhuda/thor)\n* [thor wiki - Generators](https://github.com/erikhuda/thor/wiki/Generators)\n"}