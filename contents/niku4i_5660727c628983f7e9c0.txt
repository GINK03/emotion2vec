{"context": " More than 1 year has passed since last update.\u793e\u5185\u306b\u30db\u30b9\u30c8\u540d\u4e00\u89a7\u3092json\u3067\u8fd4\u3059API\u304c\u3042\u3063\u305f\u306e\u3067\u3001jq\u3068peco\u3067\u5bfe\u8a71\u7684\u306b\u30db\u30b9\u30c8\u540d\u3092\u9078\u629e\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n.bashrc\n\n.bashrc\nfunction list_intra_hosts() {\n  # \u793e\u5185API\u304c\u8fd4\u3059json\u306e\"name\" \u30ad\u30fc\u304c\u30db\u30b9\u30c8\u540d\n  # jq\u3067\u30db\u30b9\u30c8\u540d\u306e\u307f\u3092\u30ea\u30b9\u30c8\u5316\n  curl -sS http://apihost/hosts | jq -r '.[] | .name'\n}\n\nfunction ssh_intra_host() {\n  ssh $(list_hosts | peco)\n}\n\nalias pssh=ssh_intra_host\n\n\n\n\u4f7f\u3044\u65b9\n$ pssh\n\n\n\u307e\u3068\u3081\n\u793e\u5185API\u3068\u9023\u643a\u3057\u3066\u5bfe\u8a71\u7684\u306b\u30db\u30b9\u30c8\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n\u500b\u4eba\u7684\u306bpeco\u306a\u3069\u3092\u793e\u5185\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u4ed5\u7d44\u307f\u306b\u53d6\u308a\u5165\u308c\u308b\u767a\u60f3\u304c\u3042\u307e\u308a\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u30e9\u30a4\u30d5\u30b8\u30a7\u30a4\u30f3\u30b8\u30f3\u30b0\u306a\u30cf\u30c3\u30af\u3060\u3063\u305f\u3002\n\u793e\u5185\u306b\u30db\u30b9\u30c8\u540d\u4e00\u89a7\u3092json\u3067\u8fd4\u3059API\u304c\u3042\u3063\u305f\u306e\u3067\u3001jq\u3068peco\u3067\u5bfe\u8a71\u7684\u306b\u30db\u30b9\u30c8\u540d\u3092\u9078\u629e\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n## .bashrc\n\n```bash:.bashrc\nfunction list_intra_hosts() {\n  # \u793e\u5185API\u304c\u8fd4\u3059json\u306e\"name\" \u30ad\u30fc\u304c\u30db\u30b9\u30c8\u540d\n  # jq\u3067\u30db\u30b9\u30c8\u540d\u306e\u307f\u3092\u30ea\u30b9\u30c8\u5316\n  curl -sS http://apihost/hosts | jq -r '.[] | .name'\n}\n\nfunction ssh_intra_host() {\n  ssh $(list_hosts | peco)\n}\n\nalias pssh=ssh_intra_host\n```\n\n\n## \u4f7f\u3044\u65b9\n\n```shell-session\n$ pssh\n```\n\n## \u307e\u3068\u3081\n\n\u793e\u5185API\u3068\u9023\u643a\u3057\u3066\u5bfe\u8a71\u7684\u306b\u30db\u30b9\u30c8\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n\n\u500b\u4eba\u7684\u306bpeco\u306a\u3069\u3092\u793e\u5185\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u4ed5\u7d44\u307f\u306b\u53d6\u308a\u5165\u308c\u308b\u767a\u60f3\u304c\u3042\u307e\u308a\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u30e9\u30a4\u30d5\u30b8\u30a7\u30a4\u30f3\u30b8\u30f3\u30b0\u306a\u30cf\u30c3\u30af\u3060\u3063\u305f\u3002\n", "tags": ["Peco", "jq"]}