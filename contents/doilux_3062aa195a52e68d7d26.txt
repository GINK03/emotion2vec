{"tags": ["spring-boot"], "context": " More than 1 year has passed since last update.\n\nLiquibase\u3063\u3066\uff1f\nDB\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3002\u4f3c\u305f\u3088\u3046\u306a\u3084\u3064\u3067Flyway\u3068\u304b\u3002Flyway\u3068\u9055\u3063\u3066\u3001DSL\uff08xml\u3001yaml\u3068\u304b\uff09\u3067DB\u30b9\u30ad\u30fc\u30de\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u306e\u3067\u3001\u4f8b\u3048\u3070\u30c6\u30b9\u30c8\u306fH2\u3067\u3001\u672c\u756a\u74b0\u5883\u306fOracle\u3067\u3063\u3066\u3068\u304d\u3082\u5c11\u306a\u3044\u5909\u66f4\u30b3\u30b9\u30c8\u3067\u5bfe\u5fdc\u3067\u304d\u308b\u3002\n\n\u4f7f\u3044\u65b9\nbuild.gradle\u306b\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3059\u308b\n\nbuild.gradle\n// \u7701\u7565...\n\ndependencies {\n    // \u7701\u7565...\n\n    // spring-jdbc\n    compile 'org.springframework.boot:spring-boot-starter-jdbc'\n\n    // \u4f7f\u3046DBMS\u306eJDBC\u30e9\u30a4\u30d6\u30e9\u30ea\n    compile 'mysql:mysql-connector-java:5.1.36'\n\n    // Liquibase\n    compile 'org.liquibase:liquibase-core'\n\n}\n\n\nresources\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306bapplication.properties\u3092\u7f6e\u3044\u3066\u3001DB\u306e\u63a5\u7d9a\u60c5\u5831\u306a\u3069\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\napplication.properties\nspring.datasource.url=jdbc:mysql://localhost:3306/test\nspring.datasource.driverClassName=com.mysql.jdbc.Driver\nspring.datasource.username=testuser\nspring.datasource.password=testuser\n\n\nresources/db/changelog\u306e\u4e0b\u306b\u3001changelog\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3002\n\ndb.changelog-master.yaml\ndatabaseChangeLog:\n  - changeSet:\n      id: 1\n      author: doilux\n      changes:\n        - createTable:\n            tableName: testtab\n            columns:\n              - column:\n                  name: id\n                  type: int\n                  autoIncrement: true\n                  constraints:\n                    primaryKey: true\n                    nullable: false\n              - column:\n                  name: first_name\n                  type: varchar(255)\n                  constraints:\n                    nullable: false\n              - column:\n                  name: last_name\n                  type: varchar(255)\n                  constraints:\n                    nullable: false\n\n\n\u3053\u308c\u3060\u3051\u3002\nSpring\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\u3002\n$ ./gradlew bootRun                                                                                   \n:compileJava UP-TO-DATE\n:processResources\n:classes\n:findMainClass\n:bootRun\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.2.3.RELEASE)\n\n\nDB\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u8997\u3044\u3066\u307f\u308b\u3002\n mysql> show tables;\n+-----------------------+\n| Tables_in_test        |\n+-----------------------+\n| DATABASECHANGELOG     |\n| DATABASECHANGELOGLOCK |\n| testtab               |\n+-----------------------+\n3 rows in set (0.00 sec)\n\nmysql> select * from DATABASECHANGELOG;\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| ID | AUTHOR | FILENAME                                         | DATEEXECUTED        | ORDEREXECUTED | EXECTYPE | MD5SUM                             | DESCRIPTION | COMMENTS | TAG  | LIQUIBASE |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| 1  | doilux | classpath:/db/changelog/db.changelog-master.yaml | 2015-10-11 23:42:17 |             1 | EXECUTED | 7:1084730437fb75c32a0e6cf535cd8937 | createTable |          | NULL | 3.3.2     |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n1 row in set (0.00 sec)\n\n\n\u3061\u3083\u3093\u3068\u30c6\u30fc\u30d6\u30eb\u304c\u3067\u304d\u3066\u3044\u308b\u3002\n\u6b21\u306bdb.changelog-master.yaml\u306b\u8ffd\u8a18\u3057\u3066\u307f\u308b\u3002\n\ndb.changelog-master.yaml\n  - changeSet:\n      id: 2\n      author: doilux\n      changes:\n        - insert:\n            tableName: testtab\n            columns:\n              - column:\n                  name: first_name\n                  value: Masahiro\n              - column:\n                  name: last_name\n                  value: Doi\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b\u3068\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u305f\u3002\nmysql> select * from DATABASECHANGELOG;\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| ID | AUTHOR | FILENAME                                         | DATEEXECUTED        | ORDEREXECUTED | EXECTYPE | MD5SUM                             | DESCRIPTION | COMMENTS | TAG  | LIQUIBASE |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| 1  | doilux | classpath:/db/changelog/db.changelog-master.yaml | 2015-10-11 23:42:17 |             1 | EXECUTED | 7:1084730437fb75c32a0e6cf535cd8937 | createTable |          | NULL | 3.3.2     |\n| 2  | doilux | classpath:/db/changelog/db.changelog-master.yaml | 2015-10-11 23:47:57 |             2 | EXECUTED | 7:87a1ef2228e5fff0a42e7f85d4bd988d | insert      |          | NULL | 3.3.2     |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n2 rows in set (0.00 sec)\n\nmysql> select * from testtab;\n+----+------------+-----------+\n| id | first_name | last_name |\n+----+------------+-----------+\n|  1 | Masahiro   | Doi       |\n+----+------------+-----------+\n1 row in set (0.00 sec)\n\n\n\u30c6\u30b9\u30c8\u306e\u3068\u304d\u3060\u3051\u4f7f\u3044\u305f\u3044\n\u672c\u756a\u30ea\u30ea\u30fc\u30b9\u6642\u306f\u30ec\u30d3\u30e5\u30fc\u3092\u631f\u307f\u305f\u3044\u306a\u3069\u306e\u7406\u7531\u3067\u3001\u81ea\u52d5\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u306e\u306f\u81ea\u52d5\u30c6\u30b9\u30c8\u306e\u3068\u304d\u3060\u3051\u306b\u3057\u305f\u3044\u3053\u3068\u306f\u3042\u308b\u3002db.changelog-master.yaml\u3092test/resource\u306e\u4e0b\u306b\u79fb\u52d5\u3055\u305b\u308b\u3068\u3001\u30c6\u30b9\u30c8\u306e\u3068\u304d\u3060\u3051\u81ea\u52d5\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3055\u308c\u308b\u3002\n\ntodo\n\n\n\u30c6\u30b9\u30c8\u304c\u7d42\u308f\u3063\u305f\u3089\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u305b\u308b\u4ed5\u7d44\u307f\u3092\u8abf\u67fb\n\n\u672c\u756a\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u30ec\u30d3\u30e5\u30fc\u3092\u631f\u3080\u305f\u3081\u306b\u4e00\u5ea6SQL\u3092\u5410\u304d\u51fa\u3059\u65b9\u6cd5\u3092\u8abf\u67fb\n\n# Liquibase\u3063\u3066\uff1f\nDB\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3002\u4f3c\u305f\u3088\u3046\u306a\u3084\u3064\u3067Flyway\u3068\u304b\u3002Flyway\u3068\u9055\u3063\u3066\u3001DSL\uff08xml\u3001yaml\u3068\u304b\uff09\u3067DB\u30b9\u30ad\u30fc\u30de\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u306e\u3067\u3001\u4f8b\u3048\u3070\u30c6\u30b9\u30c8\u306fH2\u3067\u3001\u672c\u756a\u74b0\u5883\u306fOracle\u3067\u3063\u3066\u3068\u304d\u3082\u5c11\u306a\u3044\u5909\u66f4\u30b3\u30b9\u30c8\u3067\u5bfe\u5fdc\u3067\u304d\u308b\u3002\n# \u4f7f\u3044\u65b9\nbuild.gradle\u306b\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3059\u308b\n\n```build.gradle\n// \u7701\u7565...\n\ndependencies {\n\t// \u7701\u7565...\n\n    // spring-jdbc\n    compile 'org.springframework.boot:spring-boot-starter-jdbc'\n    \n    // \u4f7f\u3046DBMS\u306eJDBC\u30e9\u30a4\u30d6\u30e9\u30ea\n    compile 'mysql:mysql-connector-java:5.1.36'\n    \n    // Liquibase\n    compile 'org.liquibase:liquibase-core'\n\n}\n```\n\nresources\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306bapplication.properties\u3092\u7f6e\u3044\u3066\u3001DB\u306e\u63a5\u7d9a\u60c5\u5831\u306a\u3069\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n```application.properties\nspring.datasource.url=jdbc:mysql://localhost:3306/test\nspring.datasource.driverClassName=com.mysql.jdbc.Driver\nspring.datasource.username=testuser\nspring.datasource.password=testuser\n```\nresources/db/changelog\u306e\u4e0b\u306b\u3001changelog\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3002\n\n```db.changelog-master.yaml\ndatabaseChangeLog:\n  - changeSet:\n      id: 1\n      author: doilux\n      changes:\n        - createTable:\n            tableName: testtab\n            columns:\n              - column:\n                  name: id\n                  type: int\n                  autoIncrement: true\n                  constraints:\n                    primaryKey: true\n                    nullable: false\n              - column:\n                  name: first_name\n                  type: varchar(255)\n                  constraints:\n                    nullable: false\n              - column:\n                  name: last_name\n                  type: varchar(255)\n                  constraints:\n                    nullable: false\n```\n\u3053\u308c\u3060\u3051\u3002\nSpring\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\u3002\n\n```bash\n$ ./gradlew bootRun                                                                                   \n:compileJava UP-TO-DATE\n:processResources\n:classes\n:findMainClass\n:bootRun\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.2.3.RELEASE)\n \n```\n DB\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u8997\u3044\u3066\u307f\u308b\u3002\n \n```sql\n mysql> show tables;\n+-----------------------+\n| Tables_in_test        |\n+-----------------------+\n| DATABASECHANGELOG     |\n| DATABASECHANGELOGLOCK |\n| testtab               |\n+-----------------------+\n3 rows in set (0.00 sec)\n\nmysql> select * from DATABASECHANGELOG;\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| ID | AUTHOR | FILENAME                                         | DATEEXECUTED        | ORDEREXECUTED | EXECTYPE | MD5SUM                             | DESCRIPTION | COMMENTS | TAG  | LIQUIBASE |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| 1  | doilux | classpath:/db/changelog/db.changelog-master.yaml | 2015-10-11 23:42:17 |             1 | EXECUTED | 7:1084730437fb75c32a0e6cf535cd8937 | createTable |          | NULL | 3.3.2     |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n1 row in set (0.00 sec)\n\n```\n\n\u3061\u3083\u3093\u3068\u30c6\u30fc\u30d6\u30eb\u304c\u3067\u304d\u3066\u3044\u308b\u3002\n\u6b21\u306bdb.changelog-master.yaml\u306b\u8ffd\u8a18\u3057\u3066\u307f\u308b\u3002\n\n```db.changelog-master.yaml\n  - changeSet:\n      id: 2\n      author: doilux\n      changes:\n        - insert:\n            tableName: testtab\n            columns:\n              - column:\n                  name: first_name\n                  value: Masahiro\n              - column:\n                  name: last_name\n                  value: Doi\n```\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b\u3068\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u305f\u3002\n\n```\nmysql> select * from DATABASECHANGELOG;\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| ID | AUTHOR | FILENAME                                         | DATEEXECUTED        | ORDEREXECUTED | EXECTYPE | MD5SUM                             | DESCRIPTION | COMMENTS | TAG  | LIQUIBASE |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n| 1  | doilux | classpath:/db/changelog/db.changelog-master.yaml | 2015-10-11 23:42:17 |             1 | EXECUTED | 7:1084730437fb75c32a0e6cf535cd8937 | createTable |          | NULL | 3.3.2     |\n| 2  | doilux | classpath:/db/changelog/db.changelog-master.yaml | 2015-10-11 23:47:57 |             2 | EXECUTED | 7:87a1ef2228e5fff0a42e7f85d4bd988d | insert      |          | NULL | 3.3.2     |\n+----+--------+--------------------------------------------------+---------------------+---------------+----------+------------------------------------+-------------+----------+------+-----------+\n2 rows in set (0.00 sec)\n\nmysql> select * from testtab;\n+----+------------+-----------+\n| id | first_name | last_name |\n+----+------------+-----------+\n|  1 | Masahiro   | Doi       |\n+----+------------+-----------+\n1 row in set (0.00 sec)\n```\n\n# \u30c6\u30b9\u30c8\u306e\u3068\u304d\u3060\u3051\u4f7f\u3044\u305f\u3044\n\u672c\u756a\u30ea\u30ea\u30fc\u30b9\u6642\u306f\u30ec\u30d3\u30e5\u30fc\u3092\u631f\u307f\u305f\u3044\u306a\u3069\u306e\u7406\u7531\u3067\u3001\u81ea\u52d5\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u306e\u306f\u81ea\u52d5\u30c6\u30b9\u30c8\u306e\u3068\u304d\u3060\u3051\u306b\u3057\u305f\u3044\u3053\u3068\u306f\u3042\u308b\u3002db.changelog-master.yaml\u3092test/resource\u306e\u4e0b\u306b\u79fb\u52d5\u3055\u305b\u308b\u3068\u3001\u30c6\u30b9\u30c8\u306e\u3068\u304d\u3060\u3051\u81ea\u52d5\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3055\u308c\u308b\u3002\n\n\n## todo\n- [ ] \u30c6\u30b9\u30c8\u304c\u7d42\u308f\u3063\u305f\u3089\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u305b\u308b\u4ed5\u7d44\u307f\u3092\u8abf\u67fb\n- [ ] \u672c\u756a\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u30ec\u30d3\u30e5\u30fc\u3092\u631f\u3080\u305f\u3081\u306b\u4e00\u5ea6SQL\u3092\u5410\u304d\u51fa\u3059\u65b9\u6cd5\u3092\u8abf\u67fb\n\n\n \n \n \n"}