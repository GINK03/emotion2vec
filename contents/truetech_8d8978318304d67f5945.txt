{"context": "\u5225\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u65b0\u3057\u304f\u958b\u304d\u3001\u305d\u306e\u30da\u30fc\u30b8\u306eJavaScript\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u547c\u3073\u51fa\u305d\u3046\u3068\u3057\u305f\u304c\u3001\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u305f\u6642\u70b9\u3067\u30da\u30fc\u30b8\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u306b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u547c\u3073\u51fa\u3057\u304c\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u3002\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u547c\u3073\u51fa\u3057\u3092\u3059\u308b\u524d\u306b\u547c\u3073\u51fa\u3057\u53ef\u80fd(\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u304cundefined\u3067\u306f\u306a\u3044)\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u3001\u547c\u3073\u51fa\u3057\u53ef\u80fd\u3067\u306a\u3051\u308c\u3070\u5f85\u3064\u3088\u3046\u306b\u3057\u305f\u3002\n\ndelay.jsp\n<%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n    pageEncoding=\"ISO-8859-1\"%>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">\n<title>delay.jsp</title>\n</head>\n\n<body>\n  <form>\n    <input type=\"button\" value=\"start\" onclick=\"openAndCall();\">\n  </form>\n\n<script>\n  function callProcIfConditionChangedGood(proc, interval, limit, condition) {\n    var count = 0;\n    var callback = function() {\n      if (condition()) {\n        proc();\n        return;\n      }\n      count++;\n      if (count >= limit) {\n        alert('timeout');\n        return;\n      }\n      window.setTimeout(callback, interval * 1000);\n    };\n    callback();\n  }\n\n  function openAndCall() {\n    var win = window.open('delay.jsp?delay=10', '_blank', 'width=160,height=90');\n    callProcIfConditionChangedGood(\n      function() {\n        win.ready();\n      },  // proc\n      1,  // interval\n      30, // limit\n      function() {\n        return win.ready != undefined;\n      }   // condition\n    );\n  }\n\n  function ready() {\n    alert(\"Yes READY\");\n  }\n</script>\n</body>\n</html>\n<%\n  try {\n    long delay = Long.parseLong(request.getParameter(\"delay\"));\n    Thread.sleep(delay * 1000);\n  }\n  catch (Exception ignore) {}\n%>\n\n\n\u5225\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u65b0\u3057\u304f\u958b\u304d\u3001\u305d\u306e\u30da\u30fc\u30b8\u306eJavaScript\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u547c\u3073\u51fa\u305d\u3046\u3068\u3057\u305f\u304c\u3001\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u305f\u6642\u70b9\u3067\u30da\u30fc\u30b8\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u306b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u547c\u3073\u51fa\u3057\u304c\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u3002\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u547c\u3073\u51fa\u3057\u3092\u3059\u308b\u524d\u306b\u547c\u3073\u51fa\u3057\u53ef\u80fd(\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u304c`undefined`\u3067\u306f\u306a\u3044)\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u3001\u547c\u3073\u51fa\u3057\u53ef\u80fd\u3067\u306a\u3051\u308c\u3070\u5f85\u3064\u3088\u3046\u306b\u3057\u305f\u3002\n\n```jsp:delay.jsp\n<%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n    pageEncoding=\"ISO-8859-1\"%>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">\n<title>delay.jsp</title>\n</head>\n\n<body>\n  <form>\n    <input type=\"button\" value=\"start\" onclick=\"openAndCall();\">\n  </form>\n\n<script>\n  function callProcIfConditionChangedGood(proc, interval, limit, condition) {\n    var count = 0;\n    var callback = function() {\n      if (condition()) {\n        proc();\n        return;\n      }\n      count++;\n      if (count >= limit) {\n        alert('timeout');\n        return;\n      }\n      window.setTimeout(callback, interval * 1000);\n    };\n    callback();\n  }\n  \n  function openAndCall() {\n    var win = window.open('delay.jsp?delay=10', '_blank', 'width=160,height=90');\n    callProcIfConditionChangedGood(\n      function() {\n        win.ready();\n      },  // proc\n      1,  // interval\n      30, // limit\n      function() {\n        return win.ready != undefined;\n      }   // condition\n    );\n  }\n  \n  function ready() {\n    alert(\"Yes READY\");\n  }\n</script>\n</body>\n</html>\n<%\n  try {\n    long delay = Long.parseLong(request.getParameter(\"delay\"));\n    Thread.sleep(delay * 1000);\n  }\n  catch (Exception ignore) {}\n%>\n```\n", "tags": ["JavaScript", "JSP"]}