{"context": " More than 1 year has passed since last update.\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install openldap-servers\n\n\nDependencies Resolved\n\n================================================================================\n Package               Arch        Version                   Repository    Size\n================================================================================\nInstalling:\n openldap-servers      x86_64      2.4.23-32.el6_4.1         updates      2.0 M\nInstalling for dependencies:\n libtool-ltdl          x86_64      2.2.6-15.5.el6            base          44 k\n make                  x86_64      1:3.81-20.el6             base         389 k\n portreserve           x86_64      0.0.4-9.el6               base          23 k\nUpdating for dependencies:\n openldap              x86_64      2.4.23-32.el6_4.1         updates      265 k\n\nTransaction Summary\n================================================================================\nInstall       4 Package(s)\nUpgrade       1 Package(s)\n\n\n\n/etc/openldap/slapd.d \u306e\u521d\u671f\u5316\u3068\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u306e\u4f5c\u6210\nRHEL6 \u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u624b\u6bb5\u306e\u306a\u3044\u8a2d\u5b9a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u306e\u3067\u524a\u9664\nrm -rf /etc/openldap/slapd.d/*\nrm -rf /var/lib/ldap/*\nmkdir -p /etc/openldap/tmp\nchmod 600 /etc/openldap/tmp\n\n\nBerkeley DB\u306e\u30d0\u30c3\u30d5\u30a1\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u8a2d\u5b9a\nBerkeley DB\u306e\u30d0\u30c3\u30d5\u30a1\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\ncp -av /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nchown ldap:ldap /var/lib/ldap/DB_CONFIG\n\n\n/etc/openldap/slapd.conf \u306e\u4f5c\u6210\nslapd\u306e\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\ncp -av /usr/share/openldap-servers/slapd.conf.obsolete /etc/openldap/slapd.conf\n\n\nLDAP \u7ba1\u7406\u8005\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u4f5c\u6210\nslappasswd \u30b3\u30de\u30f3\u30c9\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\u3057slapd.conf\u306erootpw\u884c\u306b\u8cbc\u308a\u4ed8\u3051\u308b\nslappasswd -s \u4efb\u610f\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\n{SSHA}QYZEVs/nSk0mesckgE8R7kyQcliSm9AI\n\n\n\n/etc/openldap/slapd.conf \u306e\u4fee\u6b63\nvi /etc/openldap/slapd.conf\n\n\n\nslapd.conf\n#\n# See slapd.conf(5) for details on configuration options.\n# This file should NOT be world readable.\n#\n#----------------------------------------------------------\n# \u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\n#----------------------------------------------------------\ninclude         /etc/openldap/schema/corba.schema\ninclude         /etc/openldap/schema/core.schema\ninclude         /etc/openldap/schema/cosine.schema\ninclude         /etc/openldap/schema/duaconf.schema\ninclude         /etc/openldap/schema/dyngroup.schema\ninclude         /etc/openldap/schema/inetorgperson.schema\ninclude         /etc/openldap/schema/java.schema\ninclude         /etc/openldap/schema/misc.schema\ninclude         /etc/openldap/schema/nis.schema\ninclude         /etc/openldap/schema/openldap.schema\ninclude         /etc/openldap/schema/ppolicy.schema\ninclude         /etc/openldap/schema/collective.schema\n#----------------------------------------------------------\n# \u63a5\u7d9a\u30d7\u30ed\u30c8\u30b3\u30eb\n#----------------------------------------------------------\nallow bind_v2\n#----------------------------------------------------------\n# \u7ba1\u7406\u30d5\u30a1\u30a4\u30eb\n#----------------------------------------------------------\npidfile                 /var/run/openldap/slapd.pid\nargsfile                /var/run/openldap/slapd.args\n#----------------------------------------------------------\n# TLS \u306e\u8a2d\u5b9a\n#----------------------------------------------------------\n#TLSCACertificatePath   /etc/openldap/cacerts/cacert.pem\nTLSCertificateFile     /etc/openldap/certs/server.csr\nTLSCertificateKeyFile  /etc/openldap/certs/server.key\n#----------------------------------------------------------\n# \u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u8a2d\u5b9a\n#----------------------------------------------------------\n#--- userPassword \u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u9650\n#       \u81ea\u5206\u81ea\u8eab\u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       Manager \u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       \u533f\u540d\u63a5\u7d9a\u306a\u3089\u3070\u3001\u8a8d\u8a3c\u3057\u305f\u3068\u304d\u306b\u3053\u306e\u5c5e\u6027\u304c\u4f7f\u3048\u308b\n#       \u305d\u306e\u4ed6\u306e\u30a2\u30af\u30bb\u30b9\u306e\u969b\u306f\u4f55\u3082\u3067\u304d\u306a\u3044\naccess to attrs=userPassword\n         by self write\n         by dn=\"cn=Manager,dc=example,dc=com\" write\n         by anonymous auth\n         by * none\n#--- \u305d\u306e\u4ed6\u306e\u5c5e\u6027\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u9650\n#       \u81ea\u5206\u81ea\u8eab\u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       Manager \u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       \u305d\u306e\u4ed6\u306e\u30a2\u30af\u30bb\u30b9\u306e\u969b\u306fread \u306e\u307f\u53ef\u80fd\naccess to *\n         by self write\n         by dn=\"cn=Manager,dc=example,dc=com\" write\n         by * read\n#--- monitor \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u9650\n#       Manager \u306f read \u306e\u307f\u53ef\u80fd\n#       \u305d\u306e\u4ed6\u306e\u30a2\u30af\u30bb\u30b9\u306e\u969b\u306f\u4f55\u3082\u3067\u304d\u306a\u3044\n#       \u78ba\u8a8d\u30b3\u30de\u30f3\u30c9 ldapsearch -x -D \"cn=Manager,dc=example,dc=com\" -W  +\ndatabase monitor\naccess to *\n        by dn.exact=\"cn=Manager,dc=example,dc=com\" read\n        by * none\n#----------------------------------------------------------\n# \u30c7\u30fc\u30bf\u30fc\u30d9\u30fc\u30b9\u306e\u8a2d\u5b9a\n#----------------------------------------------------------\n# database      \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5f62\u5f0f\n# suffix        \u30d9\u30fc\u30b9DN\n# checkpoint    \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30ed\u30b0\u306e\u30c1\u30a7\u30c3\u30af\u30dd\u30a4\u30f3\u30c8\u8a2d\u5b9a <kbyte> <min>\n# rootdn        \u7ba1\u7406\u8005\n# rootpw        \u7ba1\u7406\u8005\u306e\u30d1\u30b9\u30ef\u30fc\u30c9(slappasswd\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210)\n# directory     Database directory, Mode 700 recommended.\ndatabase        bdb\nsuffix          \"dc=example,dc=com\"\ncheckpoint      1024 15\nrootdn          \"cn=Manager,dc=example,dc=com\"\nrootpw          {SSHA}QYZEVs/nSk0mesckgE8R7kyQcliSm9AI\ndirectory       /var/lib/ldap\n#----------------------------------------------------------\n# index\u306e\u8a2d\u5b9a\n#   eq:\u7b49\u4fa1\u6027 pres:\u5b58\u5728 sub:\u90e8\u5206\u6587\u5b57\u5217\n#   index\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u305f\u3089\u3001index\u306e\u518d\u69cb\u7bc9\u304c\u5fc5\u8981\n#   slapindex -v -b \"dc=example,dc=com\" -f slapd.conf\n#----------------------------------------------------------\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n\n\n\n\n/etc/openldap/slapd.conf \u306e\u30c1\u30a7\u30c3\u30af\nsudo -u ldap slaptest -u -v -f /etc/openldap/slapd.conf\n\n\nconfig file testing succeeded\n\n\n\n/etc/openldap/slapd.d \u306e\u66f4\u65b0\nsudo -u ldap slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d\n\n\n\u30a8\u30e9\u30fc\u304c\u3067\u308b\u304c\u7121\u8996\u3057\u3066\u3088\u3044\nbdb_db_open: database \"dc=example,dc=com\": db_open(/var/lib/ldap/id2entry.bdb) failed: No such file or directory (2).\nbackend_startup_one (type=bdb, suffix=\"dc=example,dc=com\"): bi_db_open failed! (2)\nslap_startup failed (test would succeed using the -u switch)\n\n\n\nLDAP \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\nchkconfig slapd on\n/etc/init.d/slapd start\n\n##### \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:\nyum install openldap-servers\n```\n>\n```\nDependencies Resolved\n>\n================================================================================\n Package               Arch        Version                   Repository    Size\n================================================================================\nInstalling:\n openldap-servers      x86_64      2.4.23-32.el6_4.1         updates      2.0 M\nInstalling for dependencies:\n libtool-ltdl          x86_64      2.2.6-15.5.el6            base          44 k\n make                  x86_64      1:3.81-20.el6             base         389 k\n portreserve           x86_64      0.0.4-9.el6               base          23 k\nUpdating for dependencies:\n openldap              x86_64      2.4.23-32.el6_4.1         updates      265 k\n>\nTransaction Summary\n================================================================================\nInstall       4 Package(s)\nUpgrade       1 Package(s)\n```\n\n##### /etc/openldap/slapd.d \u306e\u521d\u671f\u5316\u3068\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u306e\u4f5c\u6210\nRHEL6 \u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u624b\u6bb5\u306e\u306a\u3044\u8a2d\u5b9a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u306e\u3067\u524a\u9664\n\n```shell-session:\nrm -rf /etc/openldap/slapd.d/*\nrm -rf /var/lib/ldap/*\nmkdir -p /etc/openldap/tmp\nchmod 600 /etc/openldap/tmp\n```\n\n##### Berkeley DB\u306e\u30d0\u30c3\u30d5\u30a1\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u8a2d\u5b9a\nBerkeley DB\u306e\u30d0\u30c3\u30d5\u30a1\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\n\n```shell-session:\ncp -av /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nchown ldap:ldap /var/lib/ldap/DB_CONFIG\n```\n\n##### /etc/openldap/slapd.conf \u306e\u4f5c\u6210\nslapd\u306e\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\n\n```shell-session:\ncp -av /usr/share/openldap-servers/slapd.conf.obsolete /etc/openldap/slapd.conf\n```\n\n##### LDAP \u7ba1\u7406\u8005\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u4f5c\u6210\nslappasswd \u30b3\u30de\u30f3\u30c9\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\u3057slapd.conf\u306erootpw\u884c\u306b\u8cbc\u308a\u4ed8\u3051\u308b\n\n```shell-session:\nslappasswd -s \u4efb\u610f\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\n```\n>\n```\n{SSHA}QYZEVs/nSk0mesckgE8R7kyQcliSm9AI\n```\n\n##### /etc/openldap/slapd.conf \u306e\u4fee\u6b63\n\n```shell-session:\nvi /etc/openldap/slapd.conf\n```\n>\n```text:slapd.conf\n#\n# See slapd.conf(5) for details on configuration options.\n# This file should NOT be world readable.\n#\n#----------------------------------------------------------\n# \u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\n#----------------------------------------------------------\ninclude         /etc/openldap/schema/corba.schema\ninclude         /etc/openldap/schema/core.schema\ninclude         /etc/openldap/schema/cosine.schema\ninclude         /etc/openldap/schema/duaconf.schema\ninclude         /etc/openldap/schema/dyngroup.schema\ninclude         /etc/openldap/schema/inetorgperson.schema\ninclude         /etc/openldap/schema/java.schema\ninclude         /etc/openldap/schema/misc.schema\ninclude         /etc/openldap/schema/nis.schema\ninclude         /etc/openldap/schema/openldap.schema\ninclude         /etc/openldap/schema/ppolicy.schema\ninclude         /etc/openldap/schema/collective.schema\n#----------------------------------------------------------\n# \u63a5\u7d9a\u30d7\u30ed\u30c8\u30b3\u30eb\n#----------------------------------------------------------\nallow bind_v2\n#----------------------------------------------------------\n# \u7ba1\u7406\u30d5\u30a1\u30a4\u30eb\n#----------------------------------------------------------\npidfile                 /var/run/openldap/slapd.pid\nargsfile                /var/run/openldap/slapd.args\n#----------------------------------------------------------\n# TLS \u306e\u8a2d\u5b9a\n#----------------------------------------------------------\n#TLSCACertificatePath   /etc/openldap/cacerts/cacert.pem\nTLSCertificateFile     /etc/openldap/certs/server.csr\nTLSCertificateKeyFile  /etc/openldap/certs/server.key\n#----------------------------------------------------------\n# \u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u8a2d\u5b9a\n#----------------------------------------------------------\n#--- userPassword \u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u9650\n#       \u81ea\u5206\u81ea\u8eab\u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       Manager \u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       \u533f\u540d\u63a5\u7d9a\u306a\u3089\u3070\u3001\u8a8d\u8a3c\u3057\u305f\u3068\u304d\u306b\u3053\u306e\u5c5e\u6027\u304c\u4f7f\u3048\u308b\n#       \u305d\u306e\u4ed6\u306e\u30a2\u30af\u30bb\u30b9\u306e\u969b\u306f\u4f55\u3082\u3067\u304d\u306a\u3044\naccess to attrs=userPassword\n         by self write\n         by dn=\"cn=Manager,dc=example,dc=com\" write\n         by anonymous auth\n         by * none\n#--- \u305d\u306e\u4ed6\u306e\u5c5e\u6027\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u9650\n#       \u81ea\u5206\u81ea\u8eab\u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       Manager \u306f\u66f8\u304d\u63db\u3048\u53ef\u80fd\n#       \u305d\u306e\u4ed6\u306e\u30a2\u30af\u30bb\u30b9\u306e\u969b\u306fread \u306e\u307f\u53ef\u80fd\naccess to *\n         by self write\n         by dn=\"cn=Manager,dc=example,dc=com\" write\n         by * read\n#--- monitor \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u9650\n#       Manager \u306f read \u306e\u307f\u53ef\u80fd\n#       \u305d\u306e\u4ed6\u306e\u30a2\u30af\u30bb\u30b9\u306e\u969b\u306f\u4f55\u3082\u3067\u304d\u306a\u3044\n#       \u78ba\u8a8d\u30b3\u30de\u30f3\u30c9 ldapsearch -x -D \"cn=Manager,dc=example,dc=com\" -W  +\ndatabase monitor\naccess to *\n        by dn.exact=\"cn=Manager,dc=example,dc=com\" read\n        by * none\n#----------------------------------------------------------\n# \u30c7\u30fc\u30bf\u30fc\u30d9\u30fc\u30b9\u306e\u8a2d\u5b9a\n#----------------------------------------------------------\n# database      \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5f62\u5f0f\n# suffix        \u30d9\u30fc\u30b9DN\n# checkpoint    \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30ed\u30b0\u306e\u30c1\u30a7\u30c3\u30af\u30dd\u30a4\u30f3\u30c8\u8a2d\u5b9a <kbyte> <min>\n# rootdn        \u7ba1\u7406\u8005\n# rootpw        \u7ba1\u7406\u8005\u306e\u30d1\u30b9\u30ef\u30fc\u30c9(slappasswd\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210)\n# directory     Database directory, Mode 700 recommended.\ndatabase        bdb\nsuffix          \"dc=example,dc=com\"\ncheckpoint      1024 15\nrootdn          \"cn=Manager,dc=example,dc=com\"\nrootpw          {SSHA}QYZEVs/nSk0mesckgE8R7kyQcliSm9AI\ndirectory       /var/lib/ldap\n#----------------------------------------------------------\n# index\u306e\u8a2d\u5b9a\n#   eq:\u7b49\u4fa1\u6027 pres:\u5b58\u5728 sub:\u90e8\u5206\u6587\u5b57\u5217\n#   index\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u305f\u3089\u3001index\u306e\u518d\u69cb\u7bc9\u304c\u5fc5\u8981\n#   slapindex -v -b \"dc=example,dc=com\" -f slapd.conf\n#----------------------------------------------------------\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n```\n\n##### /etc/openldap/slapd.conf \u306e\u30c1\u30a7\u30c3\u30af\n\n```shell-session:\nsudo -u ldap slaptest -u -v -f /etc/openldap/slapd.conf\n```\n>\n```\nconfig file testing succeeded\n```\n\n##### /etc/openldap/slapd.d \u306e\u66f4\u65b0\n\n```shell-session:\nsudo -u ldap slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d\n```\n>\u30a8\u30e9\u30fc\u304c\u3067\u308b\u304c\u7121\u8996\u3057\u3066\u3088\u3044\n>\n```shell\nbdb_db_open: database \"dc=example,dc=com\": db_open(/var/lib/ldap/id2entry.bdb) failed: No such file or directory (2).\nbackend_startup_one (type=bdb, suffix=\"dc=example,dc=com\"): bi_db_open failed! (2)\nslap_startup failed (test would succeed using the -u switch)\n```\n\n##### LDAP \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\n\n```shell-session:\nchkconfig slapd on\n/etc/init.d/slapd start\n```", "tags": ["CentOS6.4", "openldap2.4.23"]}