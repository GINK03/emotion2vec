{"context": "\u307f\u3093\u306a\u306b\u5acc\u308f\u308c\u8005\u306e\"\u5186\u30b0\u30e9\u30d5\"\u3092Python\u3067\u66f8\u3044\u3066\u307f\u308b\u3002\n\u3057\u304b\u3082\u3001\u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\u306bgender\u3001\u5916\u5074\u306e\u5186\u30b0\u30e9\u30d5\u306bgeneration\u304c\u4e26\u3076\"\u4e8c\u91cd\u306e\u5186\u30b0\u30e9\u30d5\"\uff08\u4e8c\u91cd\u306epie_chart\uff09\u3092\u66f8\u304f\u3002\n\u3053\u3093\u306a\u611f\u3058\u2193\n\u4f8b\u306b\u3088\u3063\u3066\u3001matplotlib\u306e\u5f15\u6570\u304c\u3084\u3084\u3053\u3057\u3044\u306e\u3067\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u307e\u3059\u3002\n\n\n\u5186\u30b0\u30e9\u30d5\u5316\u3059\u308b\u30c7\u30fc\u30bf\n\u4f8b\u3048\u3070\u3053\u3093\u306aJSON\u30c7\u30fc\u30bf\u304c\u3042\u3063\u305f\u3068\u3057\u307e\u3059\n\n\u30a4\u30f3\u30d7\u30c3\u30c8\u30c7\u30fc\u30bf\ndata={\n      \"cluster\": 1, \n      \"member_cnt\": 21343, \n      \"generation\": {\"11-15\": 284, \"81-85\": 216, \"0-5\": 10, \n                     \"76-80\": 486, \"16-20\": 840, \"56-60\": 1938, \n                     \"unknown\": 558, \"61-65\": 1561, \"86-90\": 51, \n                     \"51-55\": 2504, \"46-50\": 2639, \"6-10\": 18, \n                     \"31-35\": 1501, \"41-45\": 2410, \"36-40\": 1954, \n                     \"66-70\": 1486, \"91 over\": 23, \"26-30\": 989, \n                     \"21-25\": 976, \"71-75\": 899},\n      \"gender\": {\"M\": 11652, \"F\": 9691}\n     }\n\n\n\ncluster: \u30af\u30e9\u30b9\u30bf\u30fc\u756a\u53f7\uff08\u3053\u3053\u3067\u306f1\u756a\uff09\nmember_cnt: \u5f53\u8a72\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u5168\u4f53\u306e\u4eba\u6570\ngeneration: \u5e74\u9f62\u5c64\u3068\u305d\u3053\u306b\u6240\u5c5e\u3059\u308b\u4eba\u6570\u306fdictionary\u578b\u3067\u683c\u7d0d\uff08\u8db3\u3057\u4e0a\u3052\u308b\u3068member\u306e\u6570\u306b\u306a\u308b\uff09\ngender: \u6027\u5225\u3068\u305d\u308c\u305e\u308c\u306e\u4eba\u6570\u3092dictionary\u578b\u3067\u683c\u7d0d\uff08\u8db3\u3057\u4e0a\u3052\u308b\u3068member\u306e\u6570\u306b\u306a\u308b\uff09\n\n\n\u30d7\u30ed\u30c3\u30c8\u3059\u308b\n\u4f5c\u56f3\u306e\u6d41\u308c\u3068\u3057\u3066\u306f\n1. \u5916\u5074\u306e\u5186\u30b0\u30e9\u30d5\uff08generation\uff09\u3092\u4f5c\u6210\n2. \u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\uff08generation\uff09\u3092\u4f5c\u6210\n3. \u6700\u3082\u5185\u5074\u306b\u771f\u3063\u767d\u306a\u5186\u3092\u4f5c\u6210\n\u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u3068\u521d\u671f\u8a2d\u5b9a\u7684\u306a\u3082\u306e\n# -*- coding: utf-8 -*-\n#jupyter notebook\u7528\nfrom IPython.display import display, HTML\n%matplotlib inline \n\n# pie_chart\u7528\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n#\u5f8c\u3067\u4f7f\u3046\u30ab\u30e9\u30fc\u3092\u307e\u3068\u3081\u3066\u5148\u306b\u6307\u5b9a\u3057\u3066\u304a\u304f\uff08\u81ea\u5206\u304c\u597d\u304d\u306a\u8272\u3092\u6307\u5b9a\uff09\nc_cycle=(\"#3498db\",\"#51a62d\",\"#1abc9c\",\"#9b59b6\",\"#f1c40f\",\n         \"#7f8c8d\",\"#34495e\",\"#446cb3\",\"#d24d57\",\"#27ae60\",\n         \"#663399\",\"#f7ca18\",\"#bdc3c7\",\"#2c3e50\",\"#d35400\",\n         \"#9b59b6\",\"#ecf0f1\",\"#ecef57\",\"#9a9a00\",\"#8a6b0e\")\n\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u672c\u4f53\ncluster_num = data['cluster']\nmember_cnt = data['member_cnt']\n\n'''''''''''''''''''''''''''''''''\ngeneration\u306b\u3064\u3044\u3066\u306e\u5916\u5074\u306e\u5186\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3059\u308b\n'''''''''''''''''''''''''''''''''\n\ngeneration_labels = list()\ngeneration_values = list()\n\nfor gen_cat,cnt in sorted(data['generation'].items(),reverse=True,key=lambda x:x[1]): #\u6240\u5c5e\u4eba\u6570(cnt)\u304c\u591a\u3044\u9806\u306bkey(gen_cat)\u3092\u30bd\u30fc\u30c8\u3059\u308b\n    generation_labels.append(gen_cat)\n    generation_values.append(cnt)\n\nplt.figure(figsize=(10,8)) #\u9069\u5f53\u306a\u5927\u304d\u3055\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7528\u610f\nx = np.array(generation_values) #\u5186\u30b0\u30e9\u30d5\u63cf\u5199\u306e\u305f\u3081\u306b\u5024\u3092np.array\u578b\u306b\u4ee3\u5165\n\nplt.pie(x,\n       labels=generation_labels, #\u5186\u30b0\u30e9\u30d5\u306e\u30e9\u30d9\u30eb\u3092\u6307\u5b9a\n       colors=c_cycle, #\u5186\u30b0\u30e9\u30d5\u306e\u8272\u3092\u6307\u5b9a\uff08\u4e0a\u8a18\u3067\u5148\u306b\u8a2d\u5b9a\u3057\u305f\u3082\u306e\uff09\n       wedgeprops={'linewidth': 2,'edgecolor':\"white\"}, # \u592a\u30552\u3067\u5186\u30b0\u30e9\u30d5\u306b\u767d\u30d5\u30c1\u3092\u4ed8\u3051\u308b\n       textprops={'color': \"white\", 'weight': \"bold\"}, # \u6587\u5b57\u306e\u8272\u3068\u592a\u3055\n       pctdistance=0.85, # \u69cb\u6210\u5272\u5408\u306e\u6570\u5024\u3092\u4e2d\u5fc3\u304b\u3089\u5186\u5468\u306e\u9593\u306e 85% \u306e\u4f4d\u7f6e\u306b\u51fa\u529b\uff08\u30c6\u30ad\u30b9\u30c8\u8868\u793a\u4f4d\u7f6e\u306e\u5fae\u8abf\u6574\uff09\n       startangle=90, #\u5186\u306e\u5411\u304d\u309290\u5ea6\u56de\u8ee2\n       counterclock=False, #false\u3067\u53cd\u6642\u8a08\u56de\u308a\u306b\u51fa\u529b\n       autopct=lambda p: '{:.1f}%'.format(p) if p >= 2.5 else '' #2.5%\u4ee5\u4e0b\u306e\u69cb\u6210\u8981\u7d20\u306f\u6570\u5024\u3092\u975e\u8868\u793a\uff08\u5f8c\u8ff0\uff09\n      )\n\nplt.axis('equal') #\u6b6a\u307f\u7121\u304f\u5186\u30b0\u30e9\u30d5\u3092\u51fa\u529b\u3059\u308b\u306e\u306b\u5fc5\u8981\u3002\u3053\u308c\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u6955\u5186\u5f62\u306b\u306a\u308b\n\n\n'''''''''''''''''''''''''''''\ngender\u306b\u3064\u3044\u3066\u306e\u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\n'''''''''''''''''''''''''''''\n\ngender_labels = list()\ngender_values = list()\n\nfor gender,cnt in data['gender'].items():\n    gender_labels.append(gender)\n    gender_values.append(cnt)\ny = np.array(gender_values)\n\nplt.pie(y,\n        labels=gender_labels,\n        colors=(\"#00a2ad\",\"#ffcccc\"), # Male,Female\u7528\u306e\u8272\u306e\u5272\u5f53\n        wedgeprops={'linewidth': 2,'edgecolor':\"white\"}, # \u592a\u30552\u3067\u767d\u30d5\u30c1\u3092\u4ed8\u3051\u308b\n        textprops={'color': \"#2c3e50\", 'weight': \"bold\"}, # \u6587\u5b57\u306e\u8272\u3068\u592a\u3055\n        radius=0.7, #70%\u306e\u5927\u304d\u3055\u306e\u5186\u3092\u66f8\u304f\u3002gender\u306f\u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\u306b\u306a\u308b\u305f\u3081\u5c11\u3057\u5c0f\u3055\u3081\u306b\u51fa\u529b\u3059\u308b\u3002\n        labeldistance=0.8, #\u30e9\u30d9\u30eb\u306e\u8868\u793a\u4f4d\u7f6e\u3092\u5186\u5468\u304b\u308980%\u306e\u4f4d\u7f6e\u306b\u8868\u793a\n        autopct=\"%1.1f%%\", # \u69cb\u6210\u5272\u5408\u3092\u5c0f\u6570\u70b9\u4ee5\u4e0b1\u6841\u3067\u51fa\u529b\n        pctdistance=0.6, # \u69cb\u6210\u5272\u5408\u3092\u4e2d\u5fc3\u304b\u3089\u5186\u5468\u306e\u9593\u306e 60% \u306e\u4f4d\u7f6e\u306b\u51fa\u529b\n        startangle=90, #\u5186\u306e\u5411\u304d\u309290\u5ea6\u56de\u8ee2\n        counterclock=False #false\u3067\u53cd\u6642\u8a08\u56de\u308a\u306b\u51fa\u529b\n       )\nplt.axis('equal') #\u30a2\u30b9\u30da\u30af\u30c8\u6bd4\u3092\u88dc\u6b63\u3002\u6b6a\u307f\u7121\u304f\u5186\u30b0\u30e9\u30d5\u3092\u51fa\u529b\u3059\u308b\u306e\u306b\u5fc5\u8981\n\n\n'''''''''''''''''''''''''''''\n\u6700\u3082\u5185\u5074\u306b\u767d\u306e\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u304f\uff08\u30c9\u30fc\u30ca\u30c4\u5186\u30b0\u30e9\u30d5\u3063\u307d\u304f\u898b\u305b\u308b\uff09\n'''''''''''''''''''''''''''''\n\ncenter_circle = plt.Circle((0,0),0.4,color='white', fc='white',linewidth=1.25) #\u4e2d\u5fc3(0,0)\u306b40%\u306e\u5927\u304d\u3055\u3067\u5186\u3092\u63cf\u753b\nfig = plt.gcf()\nfig.gca().add_artist(center_circle)\n\n# generation+gender\u306e\u51e1\u4f8b\u306e\u8868\u793a\nlgnd=plt.legend(bbox_to_anchor=(1.0, 0.25, 1.55, 0.5), loc=\"center left\", borderaxespad=0.)\n\n# \u56f3\u306e\u30bf\u30a4\u30c8\u30eb\u306e\u8868\u793a\nplt.suptitle('cluster#%s (UU=%s)' % (cluster_num,member_cnt),fontsize=25)\n\n\n#\u5186\u30b0\u30e9\u30d5\u306e\u4fdd\u5b58\n# bbox~~\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u7121\u3044\u3068save\u3057\u305f\u753b\u50cf\u304b\u3089legend\u304c\u306f\u307f\u51fa\u308b\n#plt.savefig('./hoge/pie_chart_#{}.png'.format(cluster_num),bbox_exstra_artists=(lgnd),bbox_inches='tight') \nplt.show()\n\n\n\n\u8aac\u660e\n\u8272\u3092\u304a\u3057\u3083\u308c\u98a8\u306b\u3059\u308b\n\n\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\n\n\n\nplt.pie\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8272\u3067\u306f\u30c9\u30ae\u30c4\u30a4\u611f\u3058\u304c\u3059\u308b\u306e\u3067\u3053\u3053\u3084\u3053\u3053\u3084\u3053\u3053\u3092\u53c2\u8003\u306b\u7d20\u6575\u306a\u8272\u3092\u898b\u3064\u3051\u3066\u304d\u3066c_cycle\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n\n\n\n\u8981\u306f\u3001\u5186\u30b0\u30e9\u30d5\u5316\u3057\u305f\u3044\u5024\u3092np.array\u306b\u3001\u30e9\u30d9\u30eb\u3092list\u578b\u306b\u3044\u308c\u308b\n\n\u4f8b\u3048\u3070\"generation\"\u306e\u5186\u30b0\u30e9\u30d5\u306e\u5834\u5408\u3001\n\n\n\u30e9\u30d9\u30eb\u3067\u306fgeneration_labels.append(gen_cat)\u3067\u30ea\u30b9\u30c8\u578b\u306b\u683c\u7d0d\n\u5024\u3067\u306f\u4e00\u65e6generation_values.append(cnt)\u3067\u30ea\u30b9\u30c8\u578b\u306b\u683c\u7d0d\u3057\u305f\u5f8c\u3001x = np.array(generation_values)\u3067array\u578b\u306b\u5909\u63db\u3057\u3066\u3044\u308b\u7b87\u6240\u306b\u8a72\u5f53\n\u305d\u308c\u3089\u306e\u30c7\u30fc\u30bf\u3092plt.pie\u306b\u653e\u308a\u8fbc\u3081\u3070\u304a\uff4b\n\n\n\nmatplotlib.pyplot\u306epie\u95a2\u6570\u306f\u30c7\u30fc\u30bf\u3092\u81ea\u52d5\u3067\u5272\u5408\u5024\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3089\u3057\u3044\n\n\u30b3\u30fc\u30c9\u3092\u8ffd\u3063\u3066\u3082\u3089\u3046\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001data\u3068\u3057\u3066\u8aad\u307f\u8fbc\u3093\u3060\u5b9f\u6570\u5024\u3092\uff08\u5272\u5408\u306b\u7b97\u51fa\u3059\u308b\u51e6\u7406\u3092\u884c\u308f\u306a\u3044\u307e\u307e\uff09array\u578b\u3067\u683c\u7d0d\u3057\u3001plt.pie\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u3068\u5272\u5408\u5024\u3068\u3057\u3066\u63cf\u5199\u3055\u308c\u308b\u3088\u3046\u3067\u3059\n\n\n\u3058\u3083\u3042\u3001\u5272\u5408\u306b\u3057\u306a\u3044\u3067\u5165\u529b\u5024\u305d\u306e\u307e\u307e\u3067\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u304d\u305f\u3044\u5834\u5408\u306f\uff1f \u2192 \u3059\u307f\u307e\u305b\u3093\u3001\u3057\u3089\u3079\u3066\u307e\u305b\u3093\u3002\u3002\u3002\n\n\n\n\u5272\u5408\u304c\u5c0f\u3055\u3044\u8981\u7d20\u3092\u975e\u8868\u793a\u306b\u3057\u3066\u3001\u898b\u6804\u3048\u3092\u6574\u3048\u308b\n\n\n\\#2.5%\u4ee5\u4e0b\u306e\u69cb\u6210\u8981\u7d20\u306f\u6570\u5024\u3092\u975e\u8868\u793a\u3068\u3044\u3046\u7b87\u6240\u306e\u51e6\u7406\u306b\u8a72\u5f53\n\n\n\u5272\u5408\u304c\u5c0f\u3055\u306a\u8981\u7d20\u5468\u8fba\u306f\u5024\u306e\u30c6\u30ad\u30b9\u30c8\u304c\u91cd\u306a\u3063\u3066\u3057\u307e\u3044\u898b\u6804\u3048\u304c\u60aa\u3044\n\u306a\u3093\u3068\u304b\u30c6\u30ad\u30b9\u30c8\u304c\u91cd\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u8868\u793a\u3057\u3088\u3046\u3068\u3057\u305f\u304c\u3046\u307e\u3044\u65b9\u6cd5\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u3044\u3063\u305d\u5272\u5408\u304c\u5c0f\u3055\u3044\u8981\u7d20\uff08\u3053\u3053\u3067\u306f\u9069\u5f53\u306b2.5%\u4ee5\u4e0b\u3068\u3057\u305f\uff09\u3092\u975e\u8868\u793a\u306b\u3057\u3066\u3044\u307e\u3059\n\n\n\n\u4ed6\u306eplt.pie\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u95a2\u3057\u3066\u306f\u3001\u30b3\u30fc\u30c9\u4e2d\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u8aad\u3093\u3067\u3082\u3089\u3063\u305f\u308a\u3001\u5b9f\u969b\u306b\u8a72\u5f53\u7b87\u6240\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3067\u63cf\u5199\u304c\u3069\u3046\u5909\u308f\u308b\u304b\u3092\u78ba\u8a8d\u3057\u3066\u3082\u3089\u3046\u3068\u7406\u89e3\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\n\n\u3061\u3087\u3063\u3068\u305a\u308b\u3057\u3066\u3044\u308b\u3068\u3053\u308d\n\"generation\"\u306e\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u3053\u308d\u3067\u3001textprops={'color': \"white\", 'weight': \"bold\"}\u306e\"white\"\u3092\"black\"\u306b\u3059\u308b\u3068\u3001\u5b9f\u306f\u3053\u3093\u306a\u56f3\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u2193\n\n\u3053\u306e\u91cd\u306a\u3063\u305f\u30e9\u30d9\u30eb\u3082\u306a\u3093\u3068\u304b\u3046\u307e\u304f\u8868\u793a\u3059\u308bor\u524a\u9664\u3057\u305f\u3044\u306e\u3067\u3059\u304c\u3001\u305f\u3060\u306e\u6587\u5b57\u5217\u30c7\u30fc\u30bf\u306a\u306e\u3067\u4e0a\u8a18\u306e\u300c2.5%\u4ee5\u4e0b\u306f\u975e\u8868\u793a\u300d\u306e\u3088\u3046\u306b\u6761\u4ef6\u3092\u3064\u3051\u3066\u975e\u8868\u793a\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\u72b6\u614b\u3067\u3059\uff08\u81ea\u5206\u306f\u3046\u307e\u3044\u65b9\u6cd5\u3092\u898b\u3064\u3051\u3089\u308c\u306a\u304b\u3063\u305f\uff09\u3002\u3053\u306e\u3042\u305f\u308a\u3001\u826f\u3044\u65b9\u6cd5\u3092\u3054\u5b58\u77e5\u306e\u65b9\u304c\u3044\u308c\u3070\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u305f\u3044...\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u3053\u306e\u90e8\u5206\u306f\u3068\u308a\u3042\u3048\u305a\u767d\u6587\u5b57\u306b\u3057\u3066\u80cc\u666f\u306b\u6eb6\u304b\u3057\u3066\u3054\u307e\u304b\u3057\u3066\u308b\u611f\u3058\u3067\u3059\u3002\n\n\u53c2\u8003\n\nmatplotlib (Python) \u3067\u5186\u30b0\u30e9\u30d5\nmatplotlib \u3067\u5186\u30b0\u30e9\u30d5 (pie chart) \u3092\u63cf\u304f\nmatplotlib\u3067\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u304f\nPython\u3067\u5186\u30b0\u30e9\u30d5\nPython Matplotlib figure title overlaps axes label when using twiny\nmatplotlib savefig() size control\n\n\u307f\u3093\u306a\u306b\u5acc\u308f\u308c\u8005\u306e\"\u5186\u30b0\u30e9\u30d5\"\u3092Python\u3067\u66f8\u3044\u3066\u307f\u308b\u3002\n\u3057\u304b\u3082\u3001\u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\u306bgender\u3001\u5916\u5074\u306e\u5186\u30b0\u30e9\u30d5\u306bgeneration\u304c\u4e26\u3076\"\u4e8c\u91cd\u306e\u5186\u30b0\u30e9\u30d5\"\uff08\u4e8c\u91cd\u306epie_chart\uff09\u3092\u66f8\u304f\u3002\n\u3053\u3093\u306a\u611f\u3058\u2193\n\u4f8b\u306b\u3088\u3063\u3066\u3001matplotlib\u306e\u5f15\u6570\u304c\u3084\u3084\u3053\u3057\u3044\u306e\u3067\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u307e\u3059\u3002\n\n![pie_chart_#1.png](https://qiita-image-store.s3.amazonaws.com/0/100780/7970bde1-3a1c-4405-8ae8-d48b19ca8cfa.png)\n\n\n# \u5186\u30b0\u30e9\u30d5\u5316\u3059\u308b\u30c7\u30fc\u30bf\n\n\u4f8b\u3048\u3070\u3053\u3093\u306aJSON\u30c7\u30fc\u30bf\u304c\u3042\u3063\u305f\u3068\u3057\u307e\u3059\n\n```json:\u30a4\u30f3\u30d7\u30c3\u30c8\u30c7\u30fc\u30bf\ndata={\n      \"cluster\": 1, \n      \"member_cnt\": 21343, \n      \"generation\": {\"11-15\": 284, \"81-85\": 216, \"0-5\": 10, \n                     \"76-80\": 486, \"16-20\": 840, \"56-60\": 1938, \n                     \"unknown\": 558, \"61-65\": 1561, \"86-90\": 51, \n                     \"51-55\": 2504, \"46-50\": 2639, \"6-10\": 18, \n                     \"31-35\": 1501, \"41-45\": 2410, \"36-40\": 1954, \n                     \"66-70\": 1486, \"91 over\": 23, \"26-30\": 989, \n                     \"21-25\": 976, \"71-75\": 899},\n      \"gender\": {\"M\": 11652, \"F\": 9691}\n     }\n```\n\n- cluster: \u30af\u30e9\u30b9\u30bf\u30fc\u756a\u53f7\uff08\u3053\u3053\u3067\u306f1\u756a\uff09\n- member_cnt: \u5f53\u8a72\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u5168\u4f53\u306e\u4eba\u6570\n- generation: \u5e74\u9f62\u5c64\u3068\u305d\u3053\u306b\u6240\u5c5e\u3059\u308b\u4eba\u6570\u306fdictionary\u578b\u3067\u683c\u7d0d\uff08\u8db3\u3057\u4e0a\u3052\u308b\u3068member\u306e\u6570\u306b\u306a\u308b\uff09\n- gender: \u6027\u5225\u3068\u305d\u308c\u305e\u308c\u306e\u4eba\u6570\u3092dictionary\u578b\u3067\u683c\u7d0d\uff08\u8db3\u3057\u4e0a\u3052\u308b\u3068member\u306e\u6570\u306b\u306a\u308b\uff09\n\n\n\n# \u30d7\u30ed\u30c3\u30c8\u3059\u308b\n\n\u4f5c\u56f3\u306e\u6d41\u308c\u3068\u3057\u3066\u306f\n1. \u5916\u5074\u306e\u5186\u30b0\u30e9\u30d5\uff08generation\uff09\u3092\u4f5c\u6210\n2. \u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\uff08generation\uff09\u3092\u4f5c\u6210\n3. \u6700\u3082\u5185\u5074\u306b\u771f\u3063\u767d\u306a\u5186\u3092\u4f5c\u6210\n\u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002\n\n```Python:\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u3068\u521d\u671f\u8a2d\u5b9a\u7684\u306a\u3082\u306e\n# -*- coding: utf-8 -*-\n#jupyter notebook\u7528\nfrom IPython.display import display, HTML\n%matplotlib inline \n\n# pie_chart\u7528\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n#\u5f8c\u3067\u4f7f\u3046\u30ab\u30e9\u30fc\u3092\u307e\u3068\u3081\u3066\u5148\u306b\u6307\u5b9a\u3057\u3066\u304a\u304f\uff08\u81ea\u5206\u304c\u597d\u304d\u306a\u8272\u3092\u6307\u5b9a\uff09\nc_cycle=(\"#3498db\",\"#51a62d\",\"#1abc9c\",\"#9b59b6\",\"#f1c40f\",\n         \"#7f8c8d\",\"#34495e\",\"#446cb3\",\"#d24d57\",\"#27ae60\",\n         \"#663399\",\"#f7ca18\",\"#bdc3c7\",\"#2c3e50\",\"#d35400\",\n         \"#9b59b6\",\"#ecf0f1\",\"#ecef57\",\"#9a9a00\",\"#8a6b0e\")\n```\n\n\n\n```Python:\u30b9\u30af\u30ea\u30d7\u30c8\u672c\u4f53\ncluster_num = data['cluster']\nmember_cnt = data['member_cnt']\n\n'''''''''''''''''''''''''''''''''\ngeneration\u306b\u3064\u3044\u3066\u306e\u5916\u5074\u306e\u5186\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3059\u308b\n'''''''''''''''''''''''''''''''''\n\ngeneration_labels = list()\ngeneration_values = list()\n\nfor gen_cat,cnt in sorted(data['generation'].items(),reverse=True,key=lambda x:x[1]): #\u6240\u5c5e\u4eba\u6570(cnt)\u304c\u591a\u3044\u9806\u306bkey(gen_cat)\u3092\u30bd\u30fc\u30c8\u3059\u308b\n    generation_labels.append(gen_cat)\n    generation_values.append(cnt)\n\nplt.figure(figsize=(10,8)) #\u9069\u5f53\u306a\u5927\u304d\u3055\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7528\u610f\nx = np.array(generation_values) #\u5186\u30b0\u30e9\u30d5\u63cf\u5199\u306e\u305f\u3081\u306b\u5024\u3092np.array\u578b\u306b\u4ee3\u5165\n\nplt.pie(x,\n       labels=generation_labels, #\u5186\u30b0\u30e9\u30d5\u306e\u30e9\u30d9\u30eb\u3092\u6307\u5b9a\n       colors=c_cycle, #\u5186\u30b0\u30e9\u30d5\u306e\u8272\u3092\u6307\u5b9a\uff08\u4e0a\u8a18\u3067\u5148\u306b\u8a2d\u5b9a\u3057\u305f\u3082\u306e\uff09\n       wedgeprops={'linewidth': 2,'edgecolor':\"white\"}, # \u592a\u30552\u3067\u5186\u30b0\u30e9\u30d5\u306b\u767d\u30d5\u30c1\u3092\u4ed8\u3051\u308b\n       textprops={'color': \"white\", 'weight': \"bold\"}, # \u6587\u5b57\u306e\u8272\u3068\u592a\u3055\n       pctdistance=0.85, # \u69cb\u6210\u5272\u5408\u306e\u6570\u5024\u3092\u4e2d\u5fc3\u304b\u3089\u5186\u5468\u306e\u9593\u306e 85% \u306e\u4f4d\u7f6e\u306b\u51fa\u529b\uff08\u30c6\u30ad\u30b9\u30c8\u8868\u793a\u4f4d\u7f6e\u306e\u5fae\u8abf\u6574\uff09\n       startangle=90, #\u5186\u306e\u5411\u304d\u309290\u5ea6\u56de\u8ee2\n       counterclock=False, #false\u3067\u53cd\u6642\u8a08\u56de\u308a\u306b\u51fa\u529b\n       autopct=lambda p: '{:.1f}%'.format(p) if p >= 2.5 else '' #2.5%\u4ee5\u4e0b\u306e\u69cb\u6210\u8981\u7d20\u306f\u6570\u5024\u3092\u975e\u8868\u793a\uff08\u5f8c\u8ff0\uff09\n      )\n\nplt.axis('equal') #\u6b6a\u307f\u7121\u304f\u5186\u30b0\u30e9\u30d5\u3092\u51fa\u529b\u3059\u308b\u306e\u306b\u5fc5\u8981\u3002\u3053\u308c\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u6955\u5186\u5f62\u306b\u306a\u308b\n\n\n'''''''''''''''''''''''''''''\ngender\u306b\u3064\u3044\u3066\u306e\u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\n'''''''''''''''''''''''''''''\n\ngender_labels = list()\ngender_values = list()\n\nfor gender,cnt in data['gender'].items():\n    gender_labels.append(gender)\n    gender_values.append(cnt)\ny = np.array(gender_values)\n\nplt.pie(y,\n        labels=gender_labels,\n        colors=(\"#00a2ad\",\"#ffcccc\"), # Male,Female\u7528\u306e\u8272\u306e\u5272\u5f53\n        wedgeprops={'linewidth': 2,'edgecolor':\"white\"}, # \u592a\u30552\u3067\u767d\u30d5\u30c1\u3092\u4ed8\u3051\u308b\n        textprops={'color': \"#2c3e50\", 'weight': \"bold\"}, # \u6587\u5b57\u306e\u8272\u3068\u592a\u3055\n        radius=0.7, #70%\u306e\u5927\u304d\u3055\u306e\u5186\u3092\u66f8\u304f\u3002gender\u306f\u5185\u5074\u306e\u5186\u30b0\u30e9\u30d5\u306b\u306a\u308b\u305f\u3081\u5c11\u3057\u5c0f\u3055\u3081\u306b\u51fa\u529b\u3059\u308b\u3002\n        labeldistance=0.8, #\u30e9\u30d9\u30eb\u306e\u8868\u793a\u4f4d\u7f6e\u3092\u5186\u5468\u304b\u308980%\u306e\u4f4d\u7f6e\u306b\u8868\u793a\n        autopct=\"%1.1f%%\", # \u69cb\u6210\u5272\u5408\u3092\u5c0f\u6570\u70b9\u4ee5\u4e0b1\u6841\u3067\u51fa\u529b\n        pctdistance=0.6, # \u69cb\u6210\u5272\u5408\u3092\u4e2d\u5fc3\u304b\u3089\u5186\u5468\u306e\u9593\u306e 60% \u306e\u4f4d\u7f6e\u306b\u51fa\u529b\n        startangle=90, #\u5186\u306e\u5411\u304d\u309290\u5ea6\u56de\u8ee2\n        counterclock=False #false\u3067\u53cd\u6642\u8a08\u56de\u308a\u306b\u51fa\u529b\n       )\nplt.axis('equal') #\u30a2\u30b9\u30da\u30af\u30c8\u6bd4\u3092\u88dc\u6b63\u3002\u6b6a\u307f\u7121\u304f\u5186\u30b0\u30e9\u30d5\u3092\u51fa\u529b\u3059\u308b\u306e\u306b\u5fc5\u8981\n\n\n'''''''''''''''''''''''''''''\n\u6700\u3082\u5185\u5074\u306b\u767d\u306e\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u304f\uff08\u30c9\u30fc\u30ca\u30c4\u5186\u30b0\u30e9\u30d5\u3063\u307d\u304f\u898b\u305b\u308b\uff09\n'''''''''''''''''''''''''''''\n\ncenter_circle = plt.Circle((0,0),0.4,color='white', fc='white',linewidth=1.25) #\u4e2d\u5fc3(0,0)\u306b40%\u306e\u5927\u304d\u3055\u3067\u5186\u3092\u63cf\u753b\nfig = plt.gcf()\nfig.gca().add_artist(center_circle)\n\n# generation+gender\u306e\u51e1\u4f8b\u306e\u8868\u793a\nlgnd=plt.legend(bbox_to_anchor=(1.0, 0.25, 1.55, 0.5), loc=\"center left\", borderaxespad=0.)\n\n# \u56f3\u306e\u30bf\u30a4\u30c8\u30eb\u306e\u8868\u793a\nplt.suptitle('cluster#%s (UU=%s)' % (cluster_num,member_cnt),fontsize=25)\n\n\n#\u5186\u30b0\u30e9\u30d5\u306e\u4fdd\u5b58\n# bbox~~\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u7121\u3044\u3068save\u3057\u305f\u753b\u50cf\u304b\u3089legend\u304c\u306f\u307f\u51fa\u308b\n#plt.savefig('./hoge/pie_chart_#{}.png'.format(cluster_num),bbox_exstra_artists=(lgnd),bbox_inches='tight') \nplt.show()\n```\n\n# \u8aac\u660e\n\n**\u8272\u3092\u304a\u3057\u3083\u308c\u98a8\u306b\u3059\u308b**\n\n- [\u3053\u3061\u3089](http://qiita.com/Hyperion13fleet/items/dee6cfb61959a7767d2b)\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\n\t- `plt.pie`\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8272\u3067\u306f\u30c9\u30ae\u30c4\u30a4\u611f\u3058\u304c\u3059\u308b\u306e\u3067[\u3053\u3053](https://flatuicolors.com/)\u3084[\u3053\u3053](http://www.flatuicolorpicker.com/)\u3084[\u3053\u3053](http://colorpalettes.net/)\u3092\u53c2\u8003\u306b\u7d20\u6575\u306a\u8272\u3092\u898b\u3064\u3051\u3066\u304d\u3066`c_cycle`\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n\n**\u8981\u306f\u3001\u5186\u30b0\u30e9\u30d5\u5316\u3057\u305f\u3044\u5024\u3092np.array\u306b\u3001\u30e9\u30d9\u30eb\u3092list\u578b\u306b\u3044\u308c\u308b**\n\n- \u4f8b\u3048\u3070\"generation\"\u306e\u5186\u30b0\u30e9\u30d5\u306e\u5834\u5408\u3001\n\t- \u30e9\u30d9\u30eb\u3067\u306f`generation_labels.append(gen_cat)`\u3067\u30ea\u30b9\u30c8\u578b\u306b\u683c\u7d0d\n\t- \u5024\u3067\u306f\u4e00\u65e6`generation_values.append(cnt)`\u3067\u30ea\u30b9\u30c8\u578b\u306b\u683c\u7d0d\u3057\u305f\u5f8c\u3001`x = np.array(generation_values) `\u3067array\u578b\u306b\u5909\u63db\u3057\u3066\u3044\u308b\u7b87\u6240\u306b\u8a72\u5f53\n\t- \u305d\u308c\u3089\u306e\u30c7\u30fc\u30bf\u3092plt.pie\u306b\u653e\u308a\u8fbc\u3081\u3070\u304a\uff4b\n\n**matplotlib.pyplot\u306epie\u95a2\u6570\u306f\u30c7\u30fc\u30bf\u3092\u81ea\u52d5\u3067\u5272\u5408\u5024\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3089\u3057\u3044**\n\n- \u30b3\u30fc\u30c9\u3092\u8ffd\u3063\u3066\u3082\u3089\u3046\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001`data`\u3068\u3057\u3066\u8aad\u307f\u8fbc\u3093\u3060\u5b9f\u6570\u5024\u3092\uff08\u5272\u5408\u306b\u7b97\u51fa\u3059\u308b\u51e6\u7406\u3092\u884c\u308f\u306a\u3044\u307e\u307e\uff09array\u578b\u3067\u683c\u7d0d\u3057\u3001plt.pie\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u3068\u5272\u5408\u5024\u3068\u3057\u3066\u63cf\u5199\u3055\u308c\u308b\u3088\u3046\u3067\u3059\n\t- \u3058\u3083\u3042\u3001\u5272\u5408\u306b\u3057\u306a\u3044\u3067\u5165\u529b\u5024\u305d\u306e\u307e\u307e\u3067\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u304d\u305f\u3044\u5834\u5408\u306f\uff1f \u2192 \u3059\u307f\u307e\u305b\u3093\u3001\u3057\u3089\u3079\u3066\u307e\u305b\u3093\u3002\u3002\u3002\n\n**\u5272\u5408\u304c\u5c0f\u3055\u3044\u8981\u7d20\u3092\u975e\u8868\u793a\u306b\u3057\u3066\u3001\u898b\u6804\u3048\u3092\u6574\u3048\u308b**\n\n- `\\#2.5%\u4ee5\u4e0b\u306e\u69cb\u6210\u8981\u7d20\u306f\u6570\u5024\u3092\u975e\u8868\u793a`\u3068\u3044\u3046\u7b87\u6240\u306e\u51e6\u7406\u306b\u8a72\u5f53\n\t- \u5272\u5408\u304c\u5c0f\u3055\u306a\u8981\u7d20\u5468\u8fba\u306f\u5024\u306e\u30c6\u30ad\u30b9\u30c8\u304c\u91cd\u306a\u3063\u3066\u3057\u307e\u3044\u898b\u6804\u3048\u304c\u60aa\u3044\n\t- \u306a\u3093\u3068\u304b\u30c6\u30ad\u30b9\u30c8\u304c\u91cd\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u8868\u793a\u3057\u3088\u3046\u3068\u3057\u305f\u304c\u3046\u307e\u3044\u65b9\u6cd5\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u3044\u3063\u305d\u5272\u5408\u304c\u5c0f\u3055\u3044\u8981\u7d20\uff08\u3053\u3053\u3067\u306f\u9069\u5f53\u306b2.5%\u4ee5\u4e0b\u3068\u3057\u305f\uff09\u3092\u975e\u8868\u793a\u306b\u3057\u3066\u3044\u307e\u3059\n\n\n\u4ed6\u306eplt.pie\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u95a2\u3057\u3066\u306f\u3001\u30b3\u30fc\u30c9\u4e2d\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u8aad\u3093\u3067\u3082\u3089\u3063\u305f\u308a\u3001\u5b9f\u969b\u306b\u8a72\u5f53\u7b87\u6240\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3067\u63cf\u5199\u304c\u3069\u3046\u5909\u308f\u308b\u304b\u3092\u78ba\u8a8d\u3057\u3066\u3082\u3089\u3046\u3068\u7406\u89e3\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\n\n\n# \u3061\u3087\u3063\u3068\u305a\u308b\u3057\u3066\u3044\u308b\u3068\u3053\u308d\n\n\"generation\"\u306e\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u3053\u308d\u3067\u3001`textprops={'color': \"white\", 'weight': \"bold\"}`\u306e\"white\"\u3092\"black\"\u306b\u3059\u308b\u3068\u3001\u5b9f\u306f\u3053\u3093\u306a\u56f3\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u2193\n\n![pie_chart2_#1.png](https://qiita-image-store.s3.amazonaws.com/0/100780/0757071b-88d0-c2fa-b437-d0c417c03fa5.png)\n\n\n\u3053\u306e\u91cd\u306a\u3063\u305f\u30e9\u30d9\u30eb\u3082\u306a\u3093\u3068\u304b\u3046\u307e\u304f\u8868\u793a\u3059\u308bor\u524a\u9664\u3057\u305f\u3044\u306e\u3067\u3059\u304c\u3001\u305f\u3060\u306e\u6587\u5b57\u5217\u30c7\u30fc\u30bf\u306a\u306e\u3067\u4e0a\u8a18\u306e\u300c2.5%\u4ee5\u4e0b\u306f\u975e\u8868\u793a\u300d\u306e\u3088\u3046\u306b\u6761\u4ef6\u3092\u3064\u3051\u3066\u975e\u8868\u793a\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\u72b6\u614b\u3067\u3059\uff08\u81ea\u5206\u306f\u3046\u307e\u3044\u65b9\u6cd5\u3092\u898b\u3064\u3051\u3089\u308c\u306a\u304b\u3063\u305f\uff09\u3002\u3053\u306e\u3042\u305f\u308a\u3001\u826f\u3044\u65b9\u6cd5\u3092\u3054\u5b58\u77e5\u306e\u65b9\u304c\u3044\u308c\u3070\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u305f\u3044...\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u3053\u306e\u90e8\u5206\u306f\u3068\u308a\u3042\u3048\u305a\u767d\u6587\u5b57\u306b\u3057\u3066\u80cc\u666f\u306b\u6eb6\u304b\u3057\u3066\u3054\u307e\u304b\u3057\u3066\u308b\u611f\u3058\u3067\u3059\u3002\n\n\n# \u53c2\u8003\n\n- [matplotlib (Python) \u3067\u5186\u30b0\u30e9\u30d5](https://mkacky.wordpress.com/2014/09/28/matplotlib-python-%E3%81%A7%E5%86%86%E3%82%B0%E3%83%A9%E3%83%95/)\n- [matplotlib \u3067\u5186\u30b0\u30e9\u30d5 (pie chart) \u3092\u63cf\u304f](http://pythondatascience.plavox.info/matplotlib/%E5%86%86%E3%82%B0%E3%83%A9%E3%83%95/)\n- [matplotlib\u3067\u5186\u30b0\u30e9\u30d5\u3092\u66f8\u304f](http://d.hatena.ne.jp/a-hisame/20150424/1429875458)\n- [Python\u3067\u5186\u30b0\u30e9\u30d5](http://akiyoko.hatenablog.jp/entry/2013/06/22/001523)\n- [Python Matplotlib figure title overlaps axes label when using twiny](http://stackoverflow.com/questions/12750355/python-matplotlib-figure-title-overlaps-axes-label-when-using-twiny)\n- [matplotlib savefig() size control](http://stackoverflow.com/questions/13073045/matplotlib-savefig-size-control)\n", "tags": ["Python", "matplotlib", "\u5186\u30b0\u30e9\u30d5"]}