{"context": " More than 1 year has passed since last update.\n\nUnity Android ClipBoard Plugin\n\u5148\u65e5Unity\u304b\u3089Android\u306e\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3092\u64cd\u4f5c\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u300cCan't create handler inside thread that has not called Looper.prepare()\u300d\u3068\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3002\n\u305f\u3076\u3093UI\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3046\u306a\u308a\u3057\u3066Looper\u3092\u521d\u671f\u5316\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u3060\u308d\u3046\u3002\nUnity\u3068Android\u306eUI\u30b9\u30ec\u30c3\u30c9\u306f\u5225\u3005\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u52d5\u3044\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u3057\u3002\n\u305d\u3093\u306a\u308f\u3051\u3067runOnUiThread\u3092\u4f7f\u3063\u3066UI\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u305f\u3089\u3046\u307e\u304f\u3044\u3063\u305f\u3002\n\u3042\u3068\u3001iOS\u306f\u6570\u884c\u3067\u66f8\u3051\u3066\u51c4\u3044\u7c21\u5358\u3067\u3057\u305f\u3002\n\nClipBoard.cs\nusing UnityEngine;\nusing System.Collections;\n\npublic class ClipBoard {\n\n  public static void ExportString(string exportData){\n    AndroidJavaClass jc = new AndroidJavaClass(\"com.unity3d.player.UnityPlayer\");\n    AndroidJavaObject activity = jc.GetStatic<AndroidJavaObject>(\"currentActivity\");\n\n    activity.Call(\"runOnUiThread\", new AndroidJavaRunnable(() =>\n    {\n      AndroidJavaObject clipboardManager = activity.Call<AndroidJavaObject>(\"getSystemService\",\"clipboard\");\n      //clipboardManager.Call(\"setText\", exportData);\n      AndroidJavaClass clipDataClass = new AndroidJavaClass(\"android.content.ClipData\");\n      AndroidJavaObject clipData = clipDataClass.CallStatic<AndroidJavaObject>(\"newPlainText\",\"simple text\", exportData);\n      clipboardManager.Call(\"setPrimaryClip\",clipData);\n    }));\n  }\n}\n\n\n\n# Unity Android ClipBoard Plugin\n\u5148\u65e5Unity\u304b\u3089Android\u306e\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3092\u64cd\u4f5c\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u300cCan't create handler inside thread that has not called Looper.prepare()\u300d\u3068\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3002\n\n\u305f\u3076\u3093UI\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3046\u306a\u308a\u3057\u3066Looper\u3092\u521d\u671f\u5316\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u3060\u308d\u3046\u3002\nUnity\u3068Android\u306eUI\u30b9\u30ec\u30c3\u30c9\u306f\u5225\u3005\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u52d5\u3044\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u3057\u3002\n\n\u305d\u3093\u306a\u308f\u3051\u3067runOnUiThread\u3092\u4f7f\u3063\u3066UI\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u305f\u3089\u3046\u307e\u304f\u3044\u3063\u305f\u3002\n\u3042\u3068\u3001iOS\u306f\u6570\u884c\u3067\u66f8\u3051\u3066\u51c4\u3044\u7c21\u5358\u3067\u3057\u305f\u3002\n\n```csharp:ClipBoard.cs\nusing UnityEngine;\nusing System.Collections;\n\npublic class ClipBoard {\n\n  public static void ExportString(string exportData){\n    AndroidJavaClass jc = new AndroidJavaClass(\"com.unity3d.player.UnityPlayer\");\n    AndroidJavaObject activity = jc.GetStatic<AndroidJavaObject>(\"currentActivity\");\n\n    activity.Call(\"runOnUiThread\", new AndroidJavaRunnable(() =>\n    {\n      AndroidJavaObject clipboardManager = activity.Call<AndroidJavaObject>(\"getSystemService\",\"clipboard\");\n      //clipboardManager.Call(\"setText\", exportData);\n      AndroidJavaClass clipDataClass = new AndroidJavaClass(\"android.content.ClipData\");\n      AndroidJavaObject clipData = clipDataClass.CallStatic<AndroidJavaObject>(\"newPlainText\",\"simple text\", exportData);\n      clipboardManager.Call(\"setPrimaryClip\",clipData);\n    }));\n  }\n}\n\n```\n", "tags": ["Unity3D"]}