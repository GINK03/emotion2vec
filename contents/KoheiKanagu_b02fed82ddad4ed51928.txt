{"tags": ["nodemon", "Bash", "Parse", "forever"], "context": "\n\n\u76ee\u7684\n\u81ea\u524d\u3067Parse Server\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u304c\u3001\u5909\u306a\u30af\u30a8\u30ea\u3067API\u53e9\u304f\u3068\u3059\u3050\u843d\u3061\u308b\u306e\u3067\u6c38\u7d9a\u5316\u3057\u305f\u3044\u3002\nParse Server\u306econfig\u3092\u5909\u66f4\u3059\u308b\u3068Parse Server\u304c\u518d\u8d77\u52d5\u3057\u3066\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\n\u624b\u65e9\u304fParse Server\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u3002\n\n\u73fe\u72b6\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306b\u3057\u3066parse-server\u3068parse-server-dashboard\u304cnpm install -g\u6e08\u307f\nhttps://www.npmjs.com/package/parse-server\nhttps://www.npmjs.com/package/parse-dashboard\nnpm install -g nodemon\u6e08\u307f\n\nparse-servers-starter.sh\n\u7d30\u304b\u304f\u8aac\u660e\u3059\u308b\u3088\u308a\u898b\u305f\u65b9\u304c\u65e9\u3044\u3002\n\u6d41\u308c\u3068\u3057\u3066\u306f\u4ee5\u4e0b\n1. parse-server.js\u306e\u5834\u6240\u3092\u7279\u5b9a\u3059\u308b\uff08which\u3057\u3066\u308b\u306e\u3067\u74b0\u5883\u304c\u9055\u3063\u3066\u3082\u3044\u3044\u611f\u3058\u306b\u3057\u3066\u304f\u308c\u308b\u306f\u305a...\uff09\n2. parse-configs/*.json \u306econfig\u3067parse-server\u304c\u8d77\u52d5\u6e08\u307f\u304b\u3069\u3046\u304b\u78ba\u8a8d\n3. \u8d77\u52d5\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u3001parse-server\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\nparse-dashboard\u306b\u95a2\u3057\u3066\u3082\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3002\n\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\u3001nodemon\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e-w\u3067config\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\u3001config\u3092\u5909\u66f4\u3059\u308b\u3068\u81ea\u52d5\u3067parse-server\u304c\u518d\u8d77\u52d5\u3057\u3066\u9069\u7528\u3055\u308c\u308b\u3002\n\uff08\u305d\u3093\u306a\u3057\u3087\u3063\u3061\u3085\u3046config\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u304b\u3068\u8a00\u308f\u308c\u305f\u3089\u7121\u3044\u6c17\u304c\u3059\u308b\uff09\n\uff08\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001forever\u306f\u4f7f\u308f\u306a\u304b\u3063\u305f\u3002forever\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3057\u304b\u76e3\u8996\u3067\u304d\u306a\u3044\u305d\u3046\uff09\n\uff08\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u969b\u306fforever\u3067\u6c38\u7d9a\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u518d\u8d77\u52d5\u3059\u308b\uff09\n\u3082\u3046\u4e00\u3064\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\u3001\u540c\u3058.json\u3067\u65e2\u306b\u8d77\u52d5\u3057\u3066\u3044\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\u306e\u3067\u591a\u91cd\u8d77\u52d5\u3057\u306a\u3044\u3002\n\u306a\u306e\u3067\u3001\u3055\u3063\u3068parse-configs\u306b.json\u8ffd\u52a0\u3057\u3066starter\u5b9f\u884c\u3059\u308b\u3068\u305d\u308c\u3060\u3051\u8d77\u52d5\u3059\u308b\u3002\n\u591a\u91cd\u8d77\u52d5\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u305d\u306e\u30dd\u30fc\u30c8\u4f7f\u308f\u308c\u308b\u3093\u3067\u3059\u3051\u3069\u3063\u3066parse-server\u304c\u6012\u3063\u3066\u6b7b\u3093\u3067\u3001nodemon\u304c\u8607\u3089\u305b\u3066\u3001\u307e\u305f\u6012\u3063\u3066\u6b7b\u306c\u3068\u3044\u3046\u6d41\u308c\u3092\u7e70\u308a\u8fd4\u3057\u3066\u3057\u307e\u3046\u3002\n#!/bin/sh\necho \"*****\"\nparsePath=`which parse-server`\njs=\"${parsePath%/*/*}/lib/node_modules/parse-server/lib/cli/parse-server.js\" #which parse-server\u3092\u57fa\u6e96\u306b\u3057\u3066.js\u3092\u7279\u5b9a\necho \"Start this parse-server : \"$js #e.g. /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-server/lib/cli/parse-server.js\necho \"*****\"\n\nfor configPath in parse-configs/*.json; do \n    configFile=\"${configPath##*/}\" #e.g. parse-configs/ritsubi.json -> ritsubi.json\n    echo \"parse-server config : \"$configFile\n\n    log=\"/var/parse/logs/${configFile%.*}.log\" #e.g. /var/parse/logs/ritsubi.log\n    echo \"log is at : \"$log\n\n    isRunning=`ps aux | grep \"$js /var/parse/$configPath\" | grep -v grep | wc -l` ##\u52d5\u3044\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u6570\u3092\u6570\u3048\u308b\n    ##e.g. /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-server/lib/cli/parse-server.js /var/parse/parse-configs/ritsubi.json \u3067\u65e2\u306b\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u8abf\u67fb\n\n    if [ $isRunning = 0 ] ; then\n        echo \"start parse-server with : \"\n        echo \"forever start --killSignal=SIGTERM -al $log -c \\\"nodemon -V -L --exitcrash -w /var/parse/$configPath\\\" $js /var/parse/$configPath\"\n        ##e.g. forever start --killSignal=SIGTERM -al /var/parse/logs/ritsubi.log -c \"nodemon -V -L --exitcrash -w /var/parse/parse-configs/ritsubi.json\" /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-server/lib/cli/parse-server.js /var/parse/parse-configs/ritsubi.json\n        forever start --killSignal=SIGTERM -al $log -c \"nodemon -V -L --exitcrash -w /var/parse/$configPath\" $js /var/parse/$configPath\n    else\n        echo \"this parse-server is running.\"\n    fi\n    echo ---\ndone\n\necho\nparsePath=`which parse-dashboard`\njs=\"${parsePath%/*/*}/lib/node_modules/parse-dashboard/Parse-Dashboard/index.js\" #which parse-dashboard\u3092\u57fa\u6e96\u306b\u3057\u3066.js\u3092\u7279\u5b9a\nconfigPath=\"/var/parse/parse-dashboard-configs/parse-dashboard-config.json\"\nlog=\"/var/parse/logs/parse-dashboard.log\"\nmountPath=\"/apps\"\n\necho \"*****\"\necho \"Start this parse-dashboard : \"$js\necho \"*****\"\n\nisRunning=`ps aux | grep $js | grep  $configPath | grep -v grep | wc -l` ##\u52d5\u3044\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u6570\u3092\u6570\u3048\u308b\n##e.g. ps aux | grep /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-dashboard/Parse-Dashboard/index.js | grep  /var/parse/parse-dashboard-configs/parse-dashboard-config.json | grep -v grep | wc -l\n\nif [ $isRunning = 0 ] ; then\n    echo \"start parse-dashboard with : \"\n    echo \"forever start --killSignal=SIGTERM -al $log -c \\\"nodemon -V -L -w $configPath\\\" $js -- --config $configPath --mountPath $mountPath\"\n    ##e.g. forever start --killSignal=SIGTERM -al /var/parse/logs/parse-dashboard.log -c \"nodemon -V -L --exitcrash -w /var/parse/parse-dashboard-configs/parse-dashboard-config.json\" /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-dashboard/Parse-Dashboard/index.js -- --config /var/parse/parse-dashboard-configs/parse-dashboard-config.json --mountPath /apps\n\n    forever start --killSignal=SIGTERM -al $log -c \"nodemon -V -L -w $configPath\" $js -- --config $configPath --mountPath $mountPath\nelse\n    echo \"parse-dashboard is running.\"\nfi\n\n\n\u307e\u3068\u3081\n\u3072\u3068\u307e\u305a\u76ee\u7684\u306f\u9054\u6210\u3067\u304d\u305f\u3002\n\n#\u76ee\u7684\n\u81ea\u524d\u3067Parse Server\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u304c\u3001\u5909\u306a\u30af\u30a8\u30ea\u3067API\u53e9\u304f\u3068\u3059\u3050\u843d\u3061\u308b\u306e\u3067\u6c38\u7d9a\u5316\u3057\u305f\u3044\u3002\nParse Server\u306econfig\u3092\u5909\u66f4\u3059\u308b\u3068Parse Server\u304c\u518d\u8d77\u52d5\u3057\u3066\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\n\u624b\u65e9\u304fParse Server\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u3002\n\n#\u73fe\u72b6\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306b\u3057\u3066parse-server\u3068parse-server-dashboard\u304c`\u001cnpm install -g`\u6e08\u307f\nhttps://www.npmjs.com/package/parse-server\nhttps://www.npmjs.com/package/parse-dashboard\n\n`\u001cnpm install -g nodemon`\u6e08\u307f\n\n#parse-servers-starter.sh\n\u7d30\u304b\u304f\u8aac\u660e\u3059\u308b\u3088\u308a\u898b\u305f\u65b9\u304c\u65e9\u3044\u3002\n\n\u6d41\u308c\u3068\u3057\u3066\u306f\u4ee5\u4e0b\n1. parse-server.js\u306e\u5834\u6240\u3092\u7279\u5b9a\u3059\u308b\uff08which\u3057\u3066\u308b\u306e\u3067\u74b0\u5883\u304c\u9055\u3063\u3066\u3082\u3044\u3044\u611f\u3058\u306b\u3057\u3066\u304f\u308c\u308b\u306f\u305a...\uff09\n2. parse-configs/*.json \u306econfig\u3067parse-server\u304c\u8d77\u52d5\u6e08\u307f\u304b\u3069\u3046\u304b\u78ba\u8a8d\n3. \u8d77\u52d5\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u3001parse-server\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\n\nparse-dashboard\u306b\u95a2\u3057\u3066\u3082\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3002\n\n\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\u3001nodemon\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e-w\u3067config\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\u3001config\u3092\u5909\u66f4\u3059\u308b\u3068\u81ea\u52d5\u3067parse-server\u304c\u518d\u8d77\u52d5\u3057\u3066\u9069\u7528\u3055\u308c\u308b\u3002\n\uff08\u305d\u3093\u306a\u3057\u3087\u3063\u3061\u3085\u3046config\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u304b\u3068\u8a00\u308f\u308c\u305f\u3089\u7121\u3044\u6c17\u304c\u3059\u308b\uff09\n\uff08\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001forever\u306f\u4f7f\u308f\u306a\u304b\u3063\u305f\u3002forever\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3057\u304b\u76e3\u8996\u3067\u304d\u306a\u3044\u305d\u3046\uff09\n\uff08\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u969b\u306fforever\u3067\u6c38\u7d9a\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u518d\u8d77\u52d5\u3059\u308b\uff09\n\n\u3082\u3046\u4e00\u3064\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\u3001\u540c\u3058.json\u3067\u65e2\u306b\u8d77\u52d5\u3057\u3066\u3044\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\u306e\u3067\u591a\u91cd\u8d77\u52d5\u3057\u306a\u3044\u3002\n\u306a\u306e\u3067\u3001\u3055\u3063\u3068parse-configs\u306b.json\u8ffd\u52a0\u3057\u3066starter\u5b9f\u884c\u3059\u308b\u3068\u305d\u308c\u3060\u3051\u8d77\u52d5\u3059\u308b\u3002\n\u591a\u91cd\u8d77\u52d5\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u305d\u306e\u30dd\u30fc\u30c8\u4f7f\u308f\u308c\u308b\u3093\u3067\u3059\u3051\u3069\u3063\u3066parse-server\u304c\u6012\u3063\u3066\u6b7b\u3093\u3067\u3001nodemon\u304c\u8607\u3089\u305b\u3066\u3001\u307e\u305f\u6012\u3063\u3066\u6b7b\u306c\u3068\u3044\u3046\u6d41\u308c\u3092\u7e70\u308a\u8fd4\u3057\u3066\u3057\u307e\u3046\u3002\n\n\t#!/bin/sh\n\techo \"*****\"\n\tparsePath=`which parse-server`\u001c\n\tjs=\"${parsePath%/*/*}/lib/node_modules/parse-server/lib/cli/parse-server.js\" #which parse-server\u3092\u57fa\u6e96\u306b\u3057\u3066.js\u3092\u7279\u5b9a\n\techo \"Start this parse-server : \"$js #e.g. /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-server/lib/cli/parse-server.js\n\techo \"*****\"\n\t\n\tfor configPath in parse-configs/*.json; do \n\t\tconfigFile=\"${configPath##*/}\" #e.g. parse-configs/ritsubi.json -> ritsubi.json\n\t\techo \"parse-server config : \"$configFile\n\t\t\n\t\tlog=\"/var/parse/logs/${configFile%.*}.log\" #e.g. /var/parse/logs/ritsubi.log\n\t\techo \"log is at : \"$log\n\t\t\n\t\tisRunning=`ps aux | grep \"$js /var/parse/$configPath\" | grep -v grep | wc -l` ##\u52d5\u3044\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u6570\u3092\u6570\u3048\u308b\n\t\t##e.g. /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-server/lib/cli/parse-server.js /var/parse/parse-configs/ritsubi.json \u3067\u65e2\u306b\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u8abf\u67fb\n\t\n\t\tif [ $isRunning = 0 ] ; then\n\t\t\techo \"start parse-server with : \"\n\t\t\techo \"forever start --killSignal=SIGTERM -al $log -c \\\"nodemon -V -L --exitcrash -w /var/parse/$configPath\\\" $js /var/parse/$configPath\"\n\t\t\t##e.g. forever start --killSignal=SIGTERM -al /var/parse/logs/ritsubi.log -c \"nodemon -V -L --exitcrash -w /var/parse/parse-configs/ritsubi.json\" /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-server/lib/cli/parse-server.js /var/parse/parse-configs/ritsubi.json\n\t\t\tforever start --killSignal=SIGTERM -al $log -c \"nodemon -V -L --exitcrash -w /var/parse/$configPath\" $js /var/parse/$configPath\n\t\telse\n\t\t\techo \"this parse-server is running.\"\n\t\tfi\n\t \techo ---\n\tdone\n\t\n\techo\n\tparsePath=`which parse-dashboard`\u001c\n\tjs=\"${parsePath%/*/*}/lib/node_modules/parse-dashboard/Parse-Dashboard/index.js\" #which parse-dashboard\u3092\u57fa\u6e96\u306b\u3057\u3066.js\u3092\u7279\u5b9a\n\tconfigPath=\"/var/parse/parse-dashboard-configs/parse-dashboard-config.json\"\n\tlog=\"/var/parse/logs/parse-dashboard.log\"\n\tmountPath=\"/apps\"\n\t\n\techo \"*****\"\n\techo \"Start this parse-dashboard : \"$js\n\techo \"*****\"\n\t\n\tisRunning=`ps aux | grep $js | grep  $configPath | grep -v grep | wc -l` ##\u52d5\u3044\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u6570\u3092\u6570\u3048\u308b\n\t##e.g. ps aux | grep /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-dashboard/Parse-Dashboard/index.js | grep  /var/parse/parse-dashboard-configs/parse-dashboard-config.json | grep -v grep | wc -l\n\t\n\tif [ $isRunning = 0 ] ; then\n\t\techo \"start parse-dashboard with : \"\n\t\techo \"forever start --killSignal=SIGTERM -al $log -c \\\"nodemon -V -L -w $configPath\\\" $js -- --config $configPath --mountPath $mountPath\"\n\t\t##e.g. forever start --killSignal=SIGTERM -al /var/parse/logs/parse-dashboard.log -c \"nodemon -V -L --exitcrash -w /var/parse/parse-dashboard-configs/parse-dashboard-config.json\" /home/kingu/.nvm/versions/node/v6.3.1/lib/node_modules/parse-dashboard/Parse-Dashboard/index.js -- --config /var/parse/parse-dashboard-configs/parse-dashboard-config.json --mountPath /apps\n\t\t\n\t\tforever start --killSignal=SIGTERM -al $log -c \"nodemon -V -L -w $configPath\" $js -- --config $configPath --mountPath $mountPath\n\telse\n\t\techo \"parse-dashboard is running.\"\n\tfi\n\t\n#\u307e\u3068\u3081\n\u3072\u3068\u307e\u305a\u76ee\u7684\u306f\u9054\u6210\u3067\u304d\u305f\u3002\n"}