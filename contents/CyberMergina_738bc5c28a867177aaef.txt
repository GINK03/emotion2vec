{"context": "\n\n\u8af8\u6ce8\u610f\n\n\u899a\u66f8\u306a\u306e\u3067\u3001\u53c2\u8003\u7a0b\u5ea6\u306b\u304a\u9858\u3044\u3057\u307e\u3059\n\u30b4\u30fc\u30eb\u306fPHP\u30d5\u30a1\u30a4\u30eb\u304c\u6271\u3048\u308b\u74b0\u5883\u3092nginx\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u3067\u3059\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30b3\n2016\u5e7401\u670818\u65e5\u73fe\u5728\u3001\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7fa4\u306e\u74b0\u5883\u304c\u3067\u304d\u307e\u3059\u3002\n- Node.js v0.10.36\n- npm v1.3.6\n- nginx v1.8.0\n- php v5.6.14\uff085.4, 5.5, 5.6\u304c\u9078\u629e\u53ef\u80fd\uff09\n- mysql v5.6.27\n\nNode.js\u306e\u30a4\u30f3\u30b9\u30b3\nyum install -y nodejs npm --enablerepo=epel\n\nnginx\u306e\u30a4\u30f3\u30b9\u30b3\nyum install -y nginx\n\nPHP\u306e\u30a4\u30f3\u30b9\u30b3\nyum install -y php56-opcache php56-devel php56-mbstring php56-mcrypt php56-mysqlnd php56-fpm php56-gd\n\nMySQL\u306e\u30a4\u30f3\u30b9\u30b3\nyum install -y mysql56 mysql56-server\n\n\u30c7\u30d7\u30ed\u30a4\u74b0\u5883\u306e\u6e96\u5099\n\n\u30c7\u30d7\u30ed\u30a4\u5148\u3092\u4f5c\u6210\n\n1. /var/www/html \u3092\u4f5c\u6210\u3059\u308b\u3002\n\nshell\n\n$ cd /var\n$ mkdir www\n$ cd www\n$ mkdir html\n\n\n\n\n2. \u5148\u307b\u3069\u4f5c\u3063\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b index.php \u3092\u4f5c\u6210\u3059\u308b\u3002\n\nshell\n$ cd /var/www/html\n$ vim index.php\n\n\n\n/var/www/html/index.php\n<?php phpinfo();\n\n\n\n\n3. \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b\n\nshell\n\n$ chown -R nginx:adm /var/www/html\n\n\n\n\nnginx\u3068php-fpm\u3068mysql\u306e\u8a2d\u5b9a\n\nhttpd\u3092\u81ea\u52d5\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u3001nginx\u3068php-fpm\u3092\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\uff08\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u6642\uff09\nnginx\u3068php-fpm\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3059\u308b\n\n\nshell\n\n$ chkconfig --level 2345 httpd off\n$ chkconfig --level 2345 nginx on\n$ chkconfig --level 2345 php-fpm on\n$ chkconfig --level 2345 mysqld on\n$ service nginx start\n$ service php-fpm start\n$ service mysqld start\n\n\n\n\nnginx\u306e\u72ec\u81ea\u8a2d\u5b9a\n\n0. \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\n\uff1e 2015-01-19\u8ffd\u8a18\n/etc/nginx/nginx.conf \u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nserver {} \u306e\u90e8\u5206\u3067\u3059\u3002\n\u4e0b\u8a18\u5de5\u7a0b 1 \u306e sample.conf \u3067\u8a18\u8f09\u3057\u3066\u3044\u304f\u5185\u5bb9\u306b\u66f8\u304d\u63db\u3048\u308b\u306e\u3082\u30a2\u30ea\u3067\u3059\u3002\n\u3000\n\n1. nginx\u306e\u72ec\u81ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(Ex:sample.conf)\u3092\u4f5c\u6210\u3059\u308b\n\nshell\n\n$ cd /etc/nginx/conf.d\n$ vim sample.conf\n\n\n\n\n/etc/nginx/conf.d/sample.conf\n\nserver {\n  listen 80;\n  server_name localhost;\n  root        /var/www/html;\n  index       index.php;\n\n  location / {\n    if (!-e $request_filename) {\n      rewrite ^(.+)$  /index.php?url=$1 last;\n      break;\n    }\n  }\n\n  location  ~ \\.php$ {\n    fastcgi_pass   127.0.0.1:9000;\n    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n    include        fastcgi_params;\n  }\n}\n\n\n\n\n2. \u72ec\u81ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(Ex:sample.conf)\u306e\u8a18\u8f09\u306b\u30df\u30b9\u304c\u306a\u3044\u304b\u3092\u78ba\u8a8d\u3059\u308b\n\nshell\n\n$ nginx -t\n\n\n\n\n3. 2\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3051\u308c\u3070\u8a2d\u5b9a\u3092\u518d\u8aad\u307f\u8fbc\u307f\n\nshell\n\n$ nginx -s reload\n\n\n\n\n\u78ba\u8a8d\nhttp://[\u30b0\u30ed\u30fc\u30d0\u30eb\uff29\uff30\u3082\u3057\u304f\u306f\u30db\u30b9\u30c8\u540d]/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066PHP\u306e\u8a2d\u5b9a\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\u203b\u4e8b\u524d\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u306b\u3066HTTP(80\u30dd\u30fc\u30c8)\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\uff08\u7533\u3057\u8a33\u7a0b\u5ea6\u306e\u4e0d\u5b89\u5b9a\u306aAWS\u8981\u7d20\uff09\n# \u8af8\u6ce8\u610f\n\n- \u899a\u66f8\u306a\u306e\u3067\u3001\u53c2\u8003\u7a0b\u5ea6\u306b\u304a\u9858\u3044\u3057\u307e\u3059\n- \u30b4\u30fc\u30eb\u306f**PHP\u30d5\u30a1\u30a4\u30eb\u304c\u6271\u3048\u308b\u74b0\u5883\u3092nginx\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3059\u308b**\u3068\u3053\u308d\u307e\u3067\u3067\u3059\n\n# \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30b3\n\n**2016\u5e7401\u670818\u65e5\u73fe\u5728\u3001\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7fa4\u306e\u74b0\u5883\u304c\u3067\u304d\u307e\u3059\u3002**\n- Node.js v0.10.36\n- npm v1.3.6\n- nginx v1.8.0\n- php v5.6.14\uff085.4, 5.5, 5.6\u304c\u9078\u629e\u53ef\u80fd\uff09\n- mysql v5.6.27\n\n## Node.js\u306e\u30a4\u30f3\u30b9\u30b3\n\n`yum install -y nodejs npm --enablerepo=epel`\n\n## nginx\u306e\u30a4\u30f3\u30b9\u30b3\n\n`yum install -y nginx`\n\n## PHP\u306e\u30a4\u30f3\u30b9\u30b3\n\n`yum install -y php56-opcache php56-devel php56-mbstring php56-mcrypt php56-mysqlnd php56-fpm php56-gd`\n\n## MySQL\u306e\u30a4\u30f3\u30b9\u30b3\n\n`yum install -y mysql56 mysql56-server`\n\n# \u30c7\u30d7\u30ed\u30a4\u74b0\u5883\u306e\u6e96\u5099\n\n## \u30c7\u30d7\u30ed\u30a4\u5148\u3092\u4f5c\u6210\n\n### 1. **/var/www/html** \u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```shell-script:shell\n\n$ cd /var\n$ mkdir www\n$ cd www\n$ mkdir html\n\n```\n\n### 2. \u5148\u307b\u3069\u4f5c\u3063\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b **index.php** \u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```shell-script:shell\n$ cd /var/www/html\n$ vim index.php\n```\n\n```php:/var/www/html/index.php\n<?php phpinfo();\n\n```\n\n### 3. \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b\n\n```shell-script:shell\n\n$ chown -R nginx:adm /var/www/html\n\n```\n\n# nginx\u3068php-fpm\u3068mysql\u306e\u8a2d\u5b9a\n\n- httpd\u3092\u81ea\u52d5\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u3001nginx\u3068php-fpm\u3092\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\uff08\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u6642\uff09\n- nginx\u3068php-fpm\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3059\u308b\n\n```shell-script:shell\n\n$ chkconfig --level 2345 httpd off\n$ chkconfig --level 2345 nginx on\n$ chkconfig --level 2345 php-fpm on\n$ chkconfig --level 2345 mysqld on\n$ service nginx start\n$ service php-fpm start\n$ service mysqld start\n\n```\n\n# nginx\u306e\u72ec\u81ea\u8a2d\u5b9a\n\n### 0. \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\n\n\uff1e 2015-01-19\u8ffd\u8a18\n\n*/etc/nginx/nginx.conf* \u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n`server {}` \u306e\u90e8\u5206\u3067\u3059\u3002\n\u4e0b\u8a18\u5de5\u7a0b 1 \u306e sample.conf \u3067\u8a18\u8f09\u3057\u3066\u3044\u304f\u5185\u5bb9\u306b\u66f8\u304d\u63db\u3048\u308b\u306e\u3082\u30a2\u30ea\u3067\u3059\u3002\n\u3000\n### 1. nginx\u306e\u72ec\u81ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(Ex:sample.conf)\u3092\u4f5c\u6210\u3059\u308b\n\n```shell-script:shell\n\n$ cd /etc/nginx/conf.d\n$ vim sample.conf\n\n```\n\n```conf:/etc/nginx/conf.d/sample.conf\n\nserver {\n  listen 80;\n  server_name localhost;\n  root        /var/www/html;\n  index       index.php;\n\n  location / {\n    if (!-e $request_filename) {\n      rewrite ^(.+)$  /index.php?url=$1 last;\n      break;\n    }\n  }\n\n  location  ~ \\.php$ {\n    fastcgi_pass   127.0.0.1:9000;\n    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n    include        fastcgi_params;\n  }\n}\n\n```\n\n### 2. \u72ec\u81ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(Ex:sample.conf)\u306e\u8a18\u8f09\u306b\u30df\u30b9\u304c\u306a\u3044\u304b\u3092\u78ba\u8a8d\u3059\u308b\n\n```shell-script:shell\n\n$ nginx -t\n\n```\n\n### 3. 2\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3051\u308c\u3070\u8a2d\u5b9a\u3092\u518d\u8aad\u307f\u8fbc\u307f\n\n```shell-script:shell\n\n$ nginx -s reload\n\n```\n\n# \u78ba\u8a8d\n\n`http://[\u30b0\u30ed\u30fc\u30d0\u30eb\uff29\uff30\u3082\u3057\u304f\u306f\u30db\u30b9\u30c8\u540d]/` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066PHP\u306e\u8a2d\u5b9a\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\u203b\u4e8b\u524d\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u306b\u3066HTTP(80\u30dd\u30fc\u30c8)\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\uff08\u7533\u3057\u8a33\u7a0b\u5ea6\u306e\u4e0d\u5b89\u5b9a\u306aAWS\u8981\u7d20\uff09\n", "tags": ["EC2", "nginx", "PHP", "Node.js", "\u74b0\u5883\u69cb\u7bc9"]}