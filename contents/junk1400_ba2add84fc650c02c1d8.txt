{"context": "\n\nsolr\u3092docker\u3067\u5c0e\u5165\n\n\u25a0\u524d\u63d0\ndocker\u3068java8\u306f\u5c0e\u5165\u6e08\u307f\u306eubuntu16.04\u3067\u3002\nubuntu\u3067docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\n$ sudo apt-get install docker.io\n\nsolr\u306fofficial\u306e\u3082\u306e\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u8272\u3005\u6016\u3044\u306e\u3067\u3002\u3002\u3002\nhttps://hub.docker.com/_/solr/\n$ sudo docker pull solr\n\ncore\u7528\u306e\u30ed\u30fc\u30ab\u30eb\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\n$ sudo mkdir -p /var/solr/cores\n$ sudo chown 8983:8983 /var/solr/cores/\n\n\u203bsolr\u30b3\u30f3\u30c6\u30ca\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u3068core\u306e\u4f4d\u7f6e\u304c/opt/solr/server/solr\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3002\n\u305d\u306e\u5834\u5408\u3001\u4e0b\u8a18\u8a2d\u5b9a\u3067\u306f\u4e0a\u624b\u304f\u3044\u304d\u307e\u305b\u3093\u3002\u6700\u65b0\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u53d6\u5f97\u3057\u76f4\u3057\u307e\u3057\u3087\u3046\uff08\u6d99\n$ sudo docker run --name solr -d -p 8983:8983 -v /var/solr/cores:/opt/solr/server/solr/mycores -t solr\n\n\n\u25a0web\u306e\u8d77\u52d5\u3092\u78ba\u8a8d\u3059\u308b\nhttp://127.0.0.1:8983/solr/#/\n\n\n\n\u25a0sample core\u3092\u4f5c\u3063\u3066\u307f\u308b\nhost\u5074\u306eshell\u3067\u3002\n$ sudo docker exec -it solr /bin/bash\n\n\u30b3\u30f3\u30c6\u30ca\u306eshell\u3067\u3002\n\u30c6\u30b9\u30c8\u7528\u306ecore\u306etest\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ solr create -c test\n\n\n\u5b9f\u884c\u7d50\u679c\n\nsolr@2ce0037aae58:/opt/solr/server/solr/mycores$ solr create -c test\n\nCopying configuration to new core instance directory:\n/opt/solr/server/solr/test\n\nCreating new core 'test' using command:\nhttp://localhost:8983/solr/admin/cores?action=CREATE&name=test&instanceDir=test\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":1286},\n  \"core\":\"test\"}\n\ncore\u3092\u79fb\u52d5\u3059\u308b\n$ cd /opt/solr/server/solr\n$ mv test mycores\n\nCtrl+P,Ctrl+Q\u3067\u4e00\u65e6\u30b3\u30f3\u30c6\u30ca\u3092\u629c\u3051\u3066\u3001solr\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u8d77\u52d5\n$ sudo docker restart solr\n\nweb\u306e\u65b9\u3067\u3082core\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u30db\u30b9\u30c8\u5074\u306b\u3082core\u304c\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n$ ll\n\ndrwxr-xr-x 3 8983 8983 4096  8\u6708 16 23:52 ./\ndrwxr-xr-x 3 root root 4096  8\u6708 16 23:30 ../\ndrwxr-xr-x 4 8983 8983 4096  8\u6708 16 23:51 test/\n\n\n\u30ed\u30b0\u30d5\u30a9\u30eb\u30c0\u3082core\u3068\u540c\u3058\u3088\u3046\u306b\u30db\u30b9\u30c8\u5074\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3042\u3052\u308b\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u30b9\u30c8\u30c3\u30d7\u3057\u3066\u524a\u9664\n$ sudo docker stop solr\n$ sudo docker rm solr\n\n\u30ed\u30b0\u7528\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\n$ sudo mkdir -p /opt/solr/log\n$ sudo chown 8983:8983 /opt/solr/log\n$ sudo docker run --name solr -d -p 8983:8983 -v /var/solr/cores:/opt/solr/server/solr/mycores -v /opt/solr/log:/opt/solr/server/logs -t solr\n\ndocker\u30b3\u30f3\u30c6\u30ca\u3067\u7c21\u5358\u306bsolr\u3092\u5c0e\u5165\u3067\u304d\u3066\u4fbf\u5229\u3067\u3059\u3002\n\u307e\u305f\u3001core\u3092\u30db\u30b9\u30c8\u5074\u306b\u6301\u3066\u308b\u306e\u3067\u6c17\u8efd\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u5909\u3048\u3066solr\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u3048\u3089\u308c\u307e\u3059\u3002\n\uff03\u4e92\u63db\u6027\u306e\u30c6\u30b9\u30c8\u3068\u304b\u7c21\u5358\u306b\u3067\u304d\u308b\u306d\u266a\ncore\u306b\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u3063\u3066restart\u3092\u3057\u3066\u3092\u7e70\u308a\u8fd4\u3059\u3068\u74b0\u5883\u306e\u69cb\u7bc9\u304c\u65e9\u3044\u3067\u3059\u306d\u3002\nchown 8983\u3092\u3057\u5fd8\u308c\u308b\u3068\u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u3081\u306a\u304f\u3066\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u30a8\u30e9\u30fc\u304c\u3067\u305f\u3089\u307e\u305a\u30aa\u30fc\u30ca\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3044\u3044\u304b\u3082\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u306esolr\u306b\u5909\u66f4\u3092\u3057\u305f\u3044\u5834\u5408\n\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u5909\u66f4\u3084\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba\u306e\u5909\u66f4\u7b49\u3067\u30b3\u30f3\u30c6\u30ca\u5185\u90e8\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u3001solr\u30e6\u30fc\u30b6\u3067\u306f\u5236\u9650\u304c\u3042\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067root\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u307e\u3059\u3002\nsudo docker exec -u root -it solr /bin/bash\n\ncommit\u306f\u304a\u5fd8\u308c\u306a\u304f\u3002\n# solr\u3092docker\u3067\u5c0e\u5165\n### \u25a0\u524d\u63d0\ndocker\u3068java8\u306f\u5c0e\u5165\u6e08\u307f\u306eubuntu16.04\u3067\u3002\nubuntu\u3067docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\n\n```shell-session\n$ sudo apt-get install docker.io\n```\n\nsolr\u306fofficial\u306e\u3082\u306e\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u8272\u3005\u6016\u3044\u306e\u3067\u3002\u3002\u3002\nhttps://hub.docker.com/_/solr/\n\n```shell-session\n$ sudo docker pull solr\n```\n\ncore\u7528\u306e\u30ed\u30fc\u30ab\u30eb\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\n\n```shell-session\n$ sudo mkdir -p /var/solr/cores\n$ sudo chown 8983:8983 /var/solr/cores/\n```\n\n\u203bsolr\u30b3\u30f3\u30c6\u30ca\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u3068core\u306e\u4f4d\u7f6e\u304c/opt/solr/server/solr\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3002\n\u305d\u306e\u5834\u5408\u3001\u4e0b\u8a18\u8a2d\u5b9a\u3067\u306f\u4e0a\u624b\u304f\u3044\u304d\u307e\u305b\u3093\u3002\u6700\u65b0\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u53d6\u5f97\u3057\u76f4\u3057\u307e\u3057\u3087\u3046\uff08\u6d99\n\n```shell-session\n$ sudo docker run --name solr -d -p 8983:8983 -v /var/solr/cores:/opt/solr/server/solr/mycores -t solr\n```\n\n### \u25a0web\u306e\u8d77\u52d5\u3092\u78ba\u8a8d\u3059\u308b\n\n```\u30d6\u30e9\u30a6\u30b6\nhttp://127.0.0.1:8983/solr/#/\n```\n![Screenshot from 2016-08-16 23-24-53.png](https://qiita-image-store.s3.amazonaws.com/0/84915/a5225ae5-3b70-714a-cb55-4c9034b47cbe.png)\n\n\n### \u25a0sample core\u3092\u4f5c\u3063\u3066\u307f\u308b\n\nhost\u5074\u306eshell\u3067\u3002\n\n```shell-session\n$ sudo docker exec -it solr /bin/bash\n```\n\n\u30b3\u30f3\u30c6\u30ca\u306eshell\u3067\u3002\n\u30c6\u30b9\u30c8\u7528\u306ecore\u306etest\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```shell-session\n$ solr create -c test\n```\n* \u5b9f\u884c\u7d50\u679c\n\n```shell-session\nsolr@2ce0037aae58:/opt/solr/server/solr/mycores$ solr create -c test\n\nCopying configuration to new core instance directory:\n/opt/solr/server/solr/test\n\nCreating new core 'test' using command:\nhttp://localhost:8983/solr/admin/cores?action=CREATE&name=test&instanceDir=test\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":1286},\n  \"core\":\"test\"}\n```\n core\u3092\u79fb\u52d5\u3059\u308b\n\n```shell-session\n$ cd /opt/solr/server/solr\n$ mv test mycores\n```\n Ctrl+P,Ctrl+Q\u3067\u4e00\u65e6\u30b3\u30f3\u30c6\u30ca\u3092\u629c\u3051\u3066\u3001solr\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u8d77\u52d5\n\n```shell-session\n$ sudo docker restart solr\n```\n\n\n web\u306e\u65b9\u3067\u3082core\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n![Screenshot from 2016-08-16 23-57-12.png](https://qiita-image-store.s3.amazonaws.com/0/84915/050f518b-02bd-d0ee-a0e4-a95fa102d46c.png)\n\n \u30db\u30b9\u30c8\u5074\u306b\u3082core\u304c\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n```shell-session\n$ ll\n\ndrwxr-xr-x 3 8983 8983 4096  8\u6708 16 23:52 ./\ndrwxr-xr-x 3 root root 4096  8\u6708 16 23:30 ../\ndrwxr-xr-x 4 8983 8983 4096  8\u6708 16 23:51 test/\n```\n# \u30ed\u30b0\u30d5\u30a9\u30eb\u30c0\u3082core\u3068\u540c\u3058\u3088\u3046\u306b\u30db\u30b9\u30c8\u5074\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3042\u3052\u308b\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n \u4eca\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u30b9\u30c8\u30c3\u30d7\u3057\u3066\u524a\u9664\n\n```shell-session\n$ sudo docker stop solr\n$ sudo docker rm solr\n```\n\n \u30ed\u30b0\u7528\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\n\n```shell-session\n$ sudo mkdir -p /opt/solr/log\n$ sudo chown 8983:8983 /opt/solr/log\n$ sudo docker run --name solr -d -p 8983:8983 -v /var/solr/cores:/opt/solr/server/solr/mycores -v /opt/solr/log:/opt/solr/server/logs -t solr\n```\ndocker\u30b3\u30f3\u30c6\u30ca\u3067\u7c21\u5358\u306bsolr\u3092\u5c0e\u5165\u3067\u304d\u3066\u4fbf\u5229\u3067\u3059\u3002\n\u307e\u305f\u3001core\u3092\u30db\u30b9\u30c8\u5074\u306b\u6301\u3066\u308b\u306e\u3067\u6c17\u8efd\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u5909\u3048\u3066solr\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u3048\u3089\u308c\u307e\u3059\u3002\n\uff03\u4e92\u63db\u6027\u306e\u30c6\u30b9\u30c8\u3068\u304b\u7c21\u5358\u306b\u3067\u304d\u308b\u306d\u266a\n\ncore\u306b\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u3063\u3066restart\u3092\u3057\u3066\u3092\u7e70\u308a\u8fd4\u3059\u3068\u74b0\u5883\u306e\u69cb\u7bc9\u304c\u65e9\u3044\u3067\u3059\u306d\u3002\nchown 8983\u3092\u3057\u5fd8\u308c\u308b\u3068\u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u3081\u306a\u304f\u3066\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u30a8\u30e9\u30fc\u304c\u3067\u305f\u3089\u307e\u305a\u30aa\u30fc\u30ca\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3044\u3044\u304b\u3082\u3002\n\n### \u30b3\u30f3\u30c6\u30ca\u306esolr\u306b\u5909\u66f4\u3092\u3057\u305f\u3044\u5834\u5408\n\u30ed\u30b0\u30ec\u30d9\u30eb\u306e\u5909\u66f4\u3084\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba\u306e\u5909\u66f4\u7b49\u3067\u30b3\u30f3\u30c6\u30ca\u5185\u90e8\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u3001solr\u30e6\u30fc\u30b6\u3067\u306f\u5236\u9650\u304c\u3042\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067root\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u307e\u3059\u3002\n\n```shell-session\nsudo docker exec -u root -it solr /bin/bash\n```\ncommit\u306f\u304a\u5fd8\u308c\u306a\u304f\u3002\n", "tags": ["solr-6.0.0", "solr", "docker", "Ubuntu"]}