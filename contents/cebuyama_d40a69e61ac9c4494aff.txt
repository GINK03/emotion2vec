{"context": "KingSSL\u516c\u5f0f\u306e\u624b\u9806\u66f8\u3092\u53c2\u8003\u306b\u3057\u305f\u3093\u3067\u3059\u304c\u9014\u4e2d\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u89e3\u6c7a\u3057\u305f\u624b\u9806\u3092\u66f8\u304d\u307e\u3059\u3002\n\u203b\u4eca\u56de\u306f\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9SSL\u3092\u5951\u7d04\u3057\u3066\u3044\u307e\u3059\u3002\n\u203b\u3053\u3061\u3089\u304c\u304b\u306a\u308a\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n1.CSR\u751f\u6210\u3068SSL\u7533\u8acb\n\nCSR\u751f\u6210\n\n\u30b3\u30c1\u30e9\u3092\u53c2\u8003\u306b\u3057\u3066CSR\u3092\u751f\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u306e\u5834\u5408\u3001Common Name\u306b\u30a2\u30b9\u30bf\u30ea\u30b9\u30af[*]\u3092\u542b\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\u4f8b\uff1a *.kingssl.com\n\nSSL\u7533\u8acb\nKingSSL\u306e\u4ee5\u4e0b\u7533\u8acb\u753b\u9762\u306b\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305fCSR\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u7533\u8acb\u3092\u884c\u3063\u3066\u4e0b\u3055\u3044\u3002\n\n\n\n\n2.\u8a3c\u660e\u66f8\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u4fdd\u5b58\n\u7533\u8fbc\u8005\u306e\u5143\u3078\u300c[KingSSL]\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u767a\u884c\u306e\u304a\u77e5\u3089\u305b\u300d\u3068\u3044\u3046\u30e1\u30fc\u30eb\u304c\u5c4a\u304d\u307e\u3059\u306e\u3067\u305d\u3061\u3089\u3092\u30b5\u30fc\u30d0\u30fc(VPS)\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\nApache\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u300cssl.crt\u300d\u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nsudo mkdir /etc/httpd/conf/ssl.crt\nKingSSL\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u305f\u300c\u8a3c\u660e\u66f8\u300d\u3068\u300c\u4e2d\u9593\u8a3c\u660e\u66f8\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u203b\u300cxxxx\u300d\u306f\u306a\u3093\u3067\u3082OK\u3067\u3059\u3002\u7d71\u4e00\u540d\u3067\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3068\u7ba1\u7406\u3057\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n1.\u300c\u8a3c\u660e\u66f8\u300d\nsudo vi /etc/httpd/conf/ssl.crt/xxxx.crt\n\u203b\u3053\u3053\u306b\u8a3c\u660e\u66f8\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n2.\u300c\u4e2d\u9593\u8a3c\u660e\u66f8\u300d\nsudo vi /etc/httpd/conf/ssl.crt/xxxx.cer\n\u203b\u3053\u3053\u306b\u4e2d\u9593\u8a3c\u660e\u66f8\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n3.ssl.conf\u3092\u7de8\u96c6\u3059\u308b\n\u203b\u5ff5\u306e\u305f\u3081\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u5f97\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nsudo cp /etc/httpd/conf.d/ssl.conf /etc/httpd/conf.d/ssl.conf_back\n\n \u4ee5\u964d\u3092\u30b6\u30c3\u30af\u30ea\u5168\u90e8\u524a\u9664\u3057\u307e\u3059\u3002\n\uff08\u5f8c\u3067\u5225\u30d5\u30a1\u30a4\u30eb\u3067VirtualHost\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\uff09\nSNI\u306b\u672a\u5bfe\u5fdc\u306e\u30d6\u30e9\u30a6\u30b6\u5bfe\u7b56\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u4e00\u884c\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002SSLStrictSNIVHostCheck off\n\u540d\u524d\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u5ba3\u8a00\u3057\u307e\u3059\u3002NameVirtualHost *:443\n\n\u203b\u6050\u308c\u305a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30ac\u30c3\u30c4\u30ea\u3068\u4ee5\u4e0b\u3092\u6d88\u3057\u3061\u3083\u3063\u3066\u4e0b\u3055\u3044\u3002\n\u203b\u4fee\u6b63\u5f8c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\n\nqiita.conf\n# This is the Apache server configuration file providing SSL support.\n# It contains the configuration directives to instruct the server how to\n# serve pages over an https connection. For detailing information about these \n# directives see <URL:http://httpd.apache.org/docs/2.2/mod/mod_ssl.html>\n# \n# Do NOT simply read the instructions in here without understanding\n# what they do.  They're here only as hints or reminders.  If you are unsure\n# consult the online docs. You have been warned.  \n#\n\nLoadModule ssl_module modules/mod_ssl.so\n\n#\n# When we also provide SSL we have to listen to the \n# the HTTPS port in addition.\n#\nListen 443\n\n##\n##  SSL Global Context\n##\n##  All SSL configuration in this context applies both to\n##  the main server and all SSL-enabled virtual hosts.\n##\n\n#   Pass Phrase Dialog:\n#   Configure the pass phrase gathering process.\n#   The filtering dialog program (`builtin' is a internal\n#   terminal dialog) has to provide the pass phrase on stdout.\n#SSLPassPhraseDialog  builtin\nSSLPassPhraseDialog exec:/etc/httpd/conf.d/pass-phrase.sh\n\n#   Inter-Process Session Cache:\n#   Configure the SSL Session Cache: First the mechanism \n#   to use and second the expiring timeout (in seconds).\nSSLSessionCache         shmcb:/var/cache/mod_ssl/scache(512000)\nSSLSessionCacheTimeout  300\n\n#   Semaphore:\n#   Configure the path to the mutual exclusion semaphore the\n#   SSL engine uses internally for inter-process synchronization. \nSSLMutex default\n\n#   Pseudo Random Number Generator (PRNG):\n#   Configure one or more sources to seed the PRNG of the \n#   SSL library. The seed data should be of good random quality.\n#   WARNING! On some platforms /dev/random blocks if not enough entropy\n#   is available. This means you then cannot use the /dev/random device\n#   because it would lead to very long connection times (as long as\n#   it requires to make more entropy available). But usually those\n#   platforms additionally provide a /dev/urandom device which doesn't\n#   block. So, if available, use this one instead. Read the mod_ssl User\n#   Manual for more details.\nSSLRandomSeed startup file:/dev/urandom  256\nSSLRandomSeed connect builtin\n#SSLRandomSeed startup file:/dev/random  512\n#SSLRandomSeed connect file:/dev/random  512\n#SSLRandomSeed connect file:/dev/urandom 512\n\n#\n# Use \"SSLCryptoDevice\" to enable any supported hardware\n# accelerators. Use \"openssl engine -v\" to list supported\n# engine names.  NOTE: If you enable an accelerator and the\n# server does not start, consult the error logs and ensure\n# your accelerator is functioning properly. \n#\nSSLCryptoDevice builtin\n#SSLCryptoDevice ubsec\n\n\n# off\u306b\u8a2d\u5b9a\uff08SNI\u306b\u672a\u5bfe\u5fdc\u306e\u30d6\u30e9\u30a6\u30b6\u7528\uff09\nSSLStrictSNIVHostCheck off\n\nNameVirtualHost *:443\n\n\n\n4.\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\n/etc/httpd/conf.d/vhost.conf(\u540d\u524d\u306f\u3054\u81ea\u7531\u306b)\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u5185\u5bb9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\nqiita.conf\nNameVirtualHost IP\u30a2\u30c9\u30ec\u30b9:443\n<VirtualHost IP\u30a2\u30c9\u30ec\u30b9:443>\n    ServerName \u30c9\u30e1\u30a4\u30f3\u540d(test.com)\n    ServerAlias www.test.com\n\n    DocumentRoot /var/www/html(\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5909\u66f4)\n\n    RewriteEngine on\n    RewriteCond %{HTTP_HOST} ^(www\\.test\\.com) [NC]\n    RewriteRule ^/(.*) https://test.com/$1 [R=301,L]\n\n    ErrorLog logs/error_log\n    CustomLog logs/access_log combined\n\n    SSLEngine on\n\n    SSLCertificateChainFile /etc/httpd/conf/ssl.crt/xxxx.cer(2\u3067\u4f5c\u6210\u3057\u305f\u4e2d\u9593\u8a3c\u660e\u66f8)\n    SSLCertificateFile      /etc/httpd/conf/ssl.crt/xxxx.crt(2\u3067\u4f5c\u6210\u3057\u305f\u8a3c\u660e\u66f8)\n    SSLCertificateKeyFile   /etc/httpd/conf/ssl.csr/xxxx.key(1\u3067\u4f5c\u6210\u3057\u3066\u3044\u308b\u79d8\u5bc6\u9375\n\n    SSLProtocol             all -SSLv2 -SSLv3\n    SSLCipherSuite          ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW\n    SSLHonorCipherOrder     on\n\n    <Directory \"/var/www/html\">\n        DirectoryIndex index.html index.htm index.php index.cgi index.html.var\n        Options -Indexes ExecCGI FollowSymLinks\n        AllowOverride All\n      #mod_deflate\u8a2d\u5b9a\n      <IfModule mod_deflate.c>\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/plain text/xhogehogeml application/x-javascript text/css\n      </IfModule>\n        Order deny,allow\n        Allow from all\n    </Directory>\n    SetEnvIf User-Agent \".*MSIE.*\" \\\n         nokeepalive ssl-unclean-shutdown \\\n         downgrade-1.0 force-response-1.0\n</VirtualHost>\n<VirtualHost>\n\u3000\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001\u4e0a\u8a18\u5185\u5bb9\u3092\u30b3\u30d4\u30da\u3057\u3001servername\u306b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u4ed8\u3051\u308b\n</VirtualHost>\n\n\n\u203bApach\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3084\u3001openssl\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u4e0a\u8a18\u8a2d\u5b9a\u304c\u5909\u308f\u3063\u3066\u304f\u308b\u306e\u3067\u3001\u3053\u3061\u3089\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3092\u4f7f\u3046\u3068\u4fbf\u5229\u3067\u3059\u3002\n\n5.Apache\u3092\u518d\u8d77\u52d5\napachectl stop\napachectl start\n\u203bSSL\u8a3c\u660e\u66f8\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306e\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u306e\u3067\u3001\u79d8\u5bc6\u9375\u3092\u4f5c\u3063\u305f\u6642\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\nKingSSL\u516c\u5f0f\u306e[\u624b\u9806\u66f8](https://www.kingssl.com/ssl_support/technical/inst_support/inst_6.html)\u3092\u53c2\u8003\u306b\u3057\u305f\u3093\u3067\u3059\u304c\u9014\u4e2d\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u89e3\u6c7a\u3057\u305f\u624b\u9806\u3092\u66f8\u304d\u307e\u3059\u3002\n\u203b\u4eca\u56de\u306f\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9SSL\u3092\u5951\u7d04\u3057\u3066\u3044\u307e\u3059\u3002\n\u203b[\u3053\u3061\u3089](http://blog.bagooon.com/?p=339)\u304c\u304b\u306a\u308a\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n#1.CSR\u751f\u6210\u3068SSL\u7533\u8acb\n\n- CSR\u751f\u6210\n\n [\u30b3\u30c1\u30e9](https://www.kingssl.com/ssl_support/technical/csr_support/csr_8.html)\u3092\u53c2\u8003\u306b\u3057\u3066CSR\u3092\u751f\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u306e\u5834\u5408\u3001Common Name\u306b\u30a2\u30b9\u30bf\u30ea\u30b9\u30af[*]\u3092\u542b\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\u4f8b\uff1a *.kingssl.com\n\n- SSL\u7533\u8acb\nKingSSL\u306e\u4ee5\u4e0b\u7533\u8acb\u753b\u9762\u306b\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305fCSR\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u7533\u8acb\u3092\u884c\u3063\u3066\u4e0b\u3055\u3044\u3002\n![csr.png](https://qiita-image-store.s3.amazonaws.com/0/168190/9f85d47f-cde4-6ac2-9352-29e9eac6ae60.png)\n\n#2.\u8a3c\u660e\u66f8\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u4fdd\u5b58\n\u7533\u8fbc\u8005\u306e\u5143\u3078\u300c[KingSSL]\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u767a\u884c\u306e\u304a\u77e5\u3089\u305b\u300d\u3068\u3044\u3046\u30e1\u30fc\u30eb\u304c\u5c4a\u304d\u307e\u3059\u306e\u3067\u305d\u3061\u3089\u3092\u30b5\u30fc\u30d0\u30fc(VPS)\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\nApache\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u300cssl.crt\u300d\u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n`sudo mkdir /etc/httpd/conf/ssl.crt`\n\nKingSSL\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u305f\u300c\u8a3c\u660e\u66f8\u300d\u3068\u300c\u4e2d\u9593\u8a3c\u660e\u66f8\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u203b\u300cxxxx\u300d\u306f\u306a\u3093\u3067\u3082OK\u3067\u3059\u3002\u7d71\u4e00\u540d\u3067\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3068\u7ba1\u7406\u3057\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n1.\u300c\u8a3c\u660e\u66f8\u300d\n`sudo vi /etc/httpd/conf/ssl.crt/xxxx.crt`\n\u203b\u3053\u3053\u306b\u8a3c\u660e\u66f8\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n2.\u300c\u4e2d\u9593\u8a3c\u660e\u66f8\u300d\n`sudo vi /etc/httpd/conf/ssl.crt/xxxx.cer`\n\u203b\u3053\u3053\u306b\u4e2d\u9593\u8a3c\u660e\u66f8\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n#3.ssl.conf\u3092\u7de8\u96c6\u3059\u308b\n\u203b\u5ff5\u306e\u305f\u3081\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u5f97\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n`sudo cp /etc/httpd/conf.d/ssl.conf /etc/httpd/conf.d/ssl.conf_back`\n\n- <VirtualHost _default_:443> \u4ee5\u964d\u3092\u30b6\u30c3\u30af\u30ea\u5168\u90e8\u524a\u9664\u3057\u307e\u3059\u3002\n <br>\uff08\u5f8c\u3067\u5225\u30d5\u30a1\u30a4\u30eb\u3067VirtualHost\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\uff09\n- SNI\u306b\u672a\u5bfe\u5fdc\u306e\u30d6\u30e9\u30a6\u30b6\u5bfe\u7b56\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u4e00\u884c\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002<br>SSLStrictSNIVHostCheck off\n- \u540d\u524d\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u5ba3\u8a00\u3057\u307e\u3059\u3002<br>NameVirtualHost *:443\n\n\u203b\u6050\u308c\u305a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30ac\u30c3\u30c4\u30ea\u3068<VirtualHost _default_:443>\u4ee5\u4e0b\u3092\u6d88\u3057\u3061\u3083\u3063\u3066\u4e0b\u3055\u3044\u3002\n\u203b\u4fee\u6b63\u5f8c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\n\n```ruby:qiita.conf\n# This is the Apache server configuration file providing SSL support.\n# It contains the configuration directives to instruct the server how to\n# serve pages over an https connection. For detailing information about these \n# directives see <URL:http://httpd.apache.org/docs/2.2/mod/mod_ssl.html>\n# \n# Do NOT simply read the instructions in here without understanding\n# what they do.  They're here only as hints or reminders.  If you are unsure\n# consult the online docs. You have been warned.  \n#\n \nLoadModule ssl_module modules/mod_ssl.so\n \n#\n# When we also provide SSL we have to listen to the \n# the HTTPS port in addition.\n#\nListen 443\n \n##\n##  SSL Global Context\n##\n##  All SSL configuration in this context applies both to\n##  the main server and all SSL-enabled virtual hosts.\n##\n \n#   Pass Phrase Dialog:\n#   Configure the pass phrase gathering process.\n#   The filtering dialog program (`builtin' is a internal\n#   terminal dialog) has to provide the pass phrase on stdout.\n#SSLPassPhraseDialog  builtin\nSSLPassPhraseDialog exec:/etc/httpd/conf.d/pass-phrase.sh\n \n#   Inter-Process Session Cache:\n#   Configure the SSL Session Cache: First the mechanism \n#   to use and second the expiring timeout (in seconds).\nSSLSessionCache         shmcb:/var/cache/mod_ssl/scache(512000)\nSSLSessionCacheTimeout  300\n \n#   Semaphore:\n#   Configure the path to the mutual exclusion semaphore the\n#   SSL engine uses internally for inter-process synchronization. \nSSLMutex default\n \n#   Pseudo Random Number Generator (PRNG):\n#   Configure one or more sources to seed the PRNG of the \n#   SSL library. The seed data should be of good random quality.\n#   WARNING! On some platforms /dev/random blocks if not enough entropy\n#   is available. This means you then cannot use the /dev/random device\n#   because it would lead to very long connection times (as long as\n#   it requires to make more entropy available). But usually those\n#   platforms additionally provide a /dev/urandom device which doesn't\n#   block. So, if available, use this one instead. Read the mod_ssl User\n#   Manual for more details.\nSSLRandomSeed startup file:/dev/urandom  256\nSSLRandomSeed connect builtin\n#SSLRandomSeed startup file:/dev/random  512\n#SSLRandomSeed connect file:/dev/random  512\n#SSLRandomSeed connect file:/dev/urandom 512\n \n#\n# Use \"SSLCryptoDevice\" to enable any supported hardware\n# accelerators. Use \"openssl engine -v\" to list supported\n# engine names.  NOTE: If you enable an accelerator and the\n# server does not start, consult the error logs and ensure\n# your accelerator is functioning properly. \n#\nSSLCryptoDevice builtin\n#SSLCryptoDevice ubsec\n \n \n# off\u306b\u8a2d\u5b9a\uff08SNI\u306b\u672a\u5bfe\u5fdc\u306e\u30d6\u30e9\u30a6\u30b6\u7528\uff09\nSSLStrictSNIVHostCheck off\n \nNameVirtualHost *:443\n```\n\n#4.\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\n/etc/httpd/conf.d/vhost.conf(\u540d\u524d\u306f\u3054\u81ea\u7531\u306b)\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u5185\u5bb9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```ruby:qiita.conf\nNameVirtualHost IP\u30a2\u30c9\u30ec\u30b9:443\n<VirtualHost IP\u30a2\u30c9\u30ec\u30b9:443>\n    ServerName \u30c9\u30e1\u30a4\u30f3\u540d(test.com)\n    ServerAlias www.test.com\n\n    DocumentRoot /var/www/html(\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5909\u66f4)\n\n    RewriteEngine on\n    RewriteCond %{HTTP_HOST} ^(www\\.test\\.com) [NC]\n    RewriteRule ^/(.*) https://test.com/$1 [R=301,L]\n\n    ErrorLog logs/error_log\n    CustomLog logs/access_log combined\n\n    SSLEngine on\n\n    SSLCertificateChainFile /etc/httpd/conf/ssl.crt/xxxx.cer(2\u3067\u4f5c\u6210\u3057\u305f\u4e2d\u9593\u8a3c\u660e\u66f8)\n    SSLCertificateFile      /etc/httpd/conf/ssl.crt/xxxx.crt(2\u3067\u4f5c\u6210\u3057\u305f\u8a3c\u660e\u66f8)\n    SSLCertificateKeyFile   /etc/httpd/conf/ssl.csr/xxxx.key(1\u3067\u4f5c\u6210\u3057\u3066\u3044\u308b\u79d8\u5bc6\u9375\n\n    SSLProtocol             all -SSLv2 -SSLv3\n    SSLCipherSuite          ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW\n    SSLHonorCipherOrder     on\n\n    <Directory \"/var/www/html\">\n        DirectoryIndex index.html index.htm index.php index.cgi index.html.var\n        Options -Indexes ExecCGI FollowSymLinks\n        AllowOverride All\n      #mod_deflate\u8a2d\u5b9a\n      <IfModule mod_deflate.c>\n        SetOutputFilter DEFLATE\n        AddOutputFilterByType DEFLATE text/html text/plain text/xhogehogeml application/x-javascript text/css\n      </IfModule>\n        Order deny,allow\n        Allow from all\n    </Directory>\n    SetEnvIf User-Agent \".*MSIE.*\" \\\n         nokeepalive ssl-unclean-shutdown \\\n         downgrade-1.0 force-response-1.0\n</VirtualHost>\n<VirtualHost>\n\u3000\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001\u4e0a\u8a18\u5185\u5bb9\u3092\u30b3\u30d4\u30da\u3057\u3001servername\u306b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u4ed8\u3051\u308b\n</VirtualHost>\n```\n\n\u203bApach\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3084\u3001openssl\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u4e0a\u8a18\u8a2d\u5b9a\u304c\u5909\u308f\u3063\u3066\u304f\u308b\u306e\u3067\u3001[\u3053\u3061\u3089](Mozilla SSL Configuration Generator)\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3092\u4f7f\u3046\u3068\u4fbf\u5229\u3067\u3059\u3002\n\n#5.Apache\u3092\u518d\u8d77\u52d5\n`apachectl stop`\n`apachectl start`\n\u203bSSL\u8a3c\u660e\u66f8\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306e\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u306e\u3067\u3001\u79d8\u5bc6\u9375\u3092\u4f5c\u3063\u305f\u6642\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\n\n", "tags": ["CnetOS6", "Apache", "Kingssl", "\u3055\u304f\u3089VPS"]}