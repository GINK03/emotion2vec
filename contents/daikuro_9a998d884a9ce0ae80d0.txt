{"tags": ["apache-camel", "spring-boot", "spring", "Java"], "context": "camel\u3068\u9023\u643a\u3059\u308b\u3053\u3068\u3067\u5927\u91cf\u306ecamel\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u4f7f\u3044\u305f\u3044\u653e\u984c\u306b\u306a\u308b\u3002\ncamel\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4e00\u89a7\nhttp://camel.apache.org/components.html\n\nspring boot\u30a2\u30d7\u30ea\u3067camel\u3092\u52d5\u304b\u3059\nspring boot\u30a2\u30d7\u30ea\u3067camel\u3092\u7c21\u5358\u306b\u52d5\u304b\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u3002\nspring boot\u30a2\u30d7\u30ea\u306epom\u306bcamel\u3092\u8ffd\u8a18\u3059\u308b\u3060\u3051\n\npom.xml\n        <dependency>\n            <groupId>org.apache.camel</groupId>\n            <artifactId>camel-spring-boot-starter</artifactId>\n            <version>2.17.3</version>\n        </dependency>\n\n\n\u4ed6\u306f\u89e6\u3089\u306a\u304f\u3066\u826f\u3044\u3002\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f\u4e00\u756a\u4e0b\u306b\u8a18\u8f09\u3002\n\u8d77\u52d5\u90e8\u5206\u3082\u5909\u308f\u3089\u306a\u3044\u3002camel\u306e\u8a18\u8ff0\u306f\u5fc5\u8981\u7121\u3057\u3002\n\nAppMain.java\npackage helloboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class AppMain {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AppMain.class, args);\n    }\n\n}\n\n\n\n\u30eb\u30fc\u30c8\u3092\u8ffd\u52a0\n@Component\u3092\u66f8\u3044\u3066RouteBuilder\u3092extends\u3059\u308b\u3060\u3051\u3002\n\u3053\u308c\u3060\u3051\u3067camel\u306eroute\u304c\u8d77\u52d5\u3059\u308b\u3002\n\nHelloRoute.java\npackage helloboot.route;\n\nimport org.apache.camel.builder.RouteBuilder;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class HelloRoute extends RouteBuilder {\n    @Override\n    public void configure() throws Exception {\n        from(\"direct://hello\")\n                .setBody(constant(\"hello\"));\n    }\n}\n\n\n\u30eb\u30fc\u30c8\u304b\u3089\u8272\u3005\u306acamel\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u547c\u3079\u308b\u306e\u3067\u3001\u4f7f\u3044\u305f\u3044\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u3053\u3053\u306b\u8a18\u8f09\u3057\u3066\u3044\u304f\u3002\n\ncamel\u306e\u30eb\u30fc\u30c8\u3092\u547c\u3076\n\u8d77\u52d5\u3057\u305f\u30eb\u30fc\u30c8\u306brest\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304b\u3089\u547c\u3073\u51fa\u3057\u3066\u307f\u308b\npackage helloboot.controller;\n\nimport org.apache.camel.CamelContext;\nimport org.apache.camel.Exchange;\nimport org.apache.camel.ProducerTemplate;\nimport org.apache.camel.impl.DefaultExchange;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloRestController {\n\n    @Autowired\n    private CamelContext camelContext;\n\n    @RequestMapping(\"/\")\n    public String hello() {\n\n        // camel\u3067\u6d41\u901a\u3059\u308b\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\n        Exchange exchange = new DefaultExchange(camelContext);\n\n        // route\u306b\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n        ProducerTemplate producerTemplate = camelContext.createProducerTemplate();\n        producerTemplate.send(\"direct://hello\", exchange);\n\n        // camel\u306eroute\u304c\u4f8b\u5916\u3067\u7d42\u4e86\u3057\u305f\u304b\u3069\u3046\u304b\u306e\u78ba\u8a8d\n        if (exchange.getException() != null) {\n            return \"NG\";\n        }\n\n        return exchange.getIn().getBody(String.class);\n    }\n}\n\n\n\u8d77\u52d5\nmvn spring-boot:run\n\n\n\npom.xml\n\npom.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>suburi</groupId>\n    <artifactId>HelloSpringBoot</artifactId>\n    <version>1</version>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <java.version>1.8</java.version>\n    </properties>\n\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>1.4.0.RELEASE</version>\n        <relativePath/> <!-- lookup parent from repository -->\n    </parent>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.apache.camel</groupId>\n            <artifactId>camel-spring-boot-starter</artifactId>\n            <version>2.17.3</version>\n        </dependency>\n\n    </dependencies>\n\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n\n\ncamel\u3068\u9023\u643a\u3059\u308b\u3053\u3068\u3067\u5927\u91cf\u306ecamel\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u4f7f\u3044\u305f\u3044\u653e\u984c\u306b\u306a\u308b\u3002\n\ncamel\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4e00\u89a7\nhttp://camel.apache.org/components.html\n\n# spring boot\u30a2\u30d7\u30ea\u3067camel\u3092\u52d5\u304b\u3059\n\nspring boot\u30a2\u30d7\u30ea\u3067camel\u3092\u7c21\u5358\u306b\u52d5\u304b\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u3002\nspring boot\u30a2\u30d7\u30ea\u306epom\u306bcamel\u3092\u8ffd\u8a18\u3059\u308b\u3060\u3051\n\n```pom.xml\n        <dependency>\n            <groupId>org.apache.camel</groupId>\n            <artifactId>camel-spring-boot-starter</artifactId>\n            <version>2.17.3</version>\n        </dependency>\n```\n\n\u4ed6\u306f\u89e6\u3089\u306a\u304f\u3066\u826f\u3044\u3002\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f\u4e00\u756a\u4e0b\u306b\u8a18\u8f09\u3002\n\u8d77\u52d5\u90e8\u5206\u3082\u5909\u308f\u3089\u306a\u3044\u3002camel\u306e\u8a18\u8ff0\u306f\u5fc5\u8981\u7121\u3057\u3002\n\n```java:AppMain.java\npackage helloboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class AppMain {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AppMain.class, args);\n    }\n\n}\n```\n\n\n# \u30eb\u30fc\u30c8\u3092\u8ffd\u52a0\n\n@Component\u3092\u66f8\u3044\u3066RouteBuilder\u3092extends\u3059\u308b\u3060\u3051\u3002\n\u3053\u308c\u3060\u3051\u3067camel\u306eroute\u304c\u8d77\u52d5\u3059\u308b\u3002\n\n```java:HelloRoute.java\npackage helloboot.route;\n\nimport org.apache.camel.builder.RouteBuilder;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class HelloRoute extends RouteBuilder {\n    @Override\n    public void configure() throws Exception {\n        from(\"direct://hello\")\n                .setBody(constant(\"hello\"));\n    }\n}\n```\n\n\u30eb\u30fc\u30c8\u304b\u3089\u8272\u3005\u306acamel\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u547c\u3079\u308b\u306e\u3067\u3001\u4f7f\u3044\u305f\u3044\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u3053\u3053\u306b\u8a18\u8f09\u3057\u3066\u3044\u304f\u3002\n\n# camel\u306e\u30eb\u30fc\u30c8\u3092\u547c\u3076\n\n\u8d77\u52d5\u3057\u305f\u30eb\u30fc\u30c8\u306brest\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304b\u3089\u547c\u3073\u51fa\u3057\u3066\u307f\u308b\n\n```java:\npackage helloboot.controller;\n\nimport org.apache.camel.CamelContext;\nimport org.apache.camel.Exchange;\nimport org.apache.camel.ProducerTemplate;\nimport org.apache.camel.impl.DefaultExchange;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloRestController {\n\n    @Autowired\n    private CamelContext camelContext;\n\n    @RequestMapping(\"/\")\n    public String hello() {\n\n        // camel\u3067\u6d41\u901a\u3059\u308b\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\n        Exchange exchange = new DefaultExchange(camelContext);\n\n        // route\u306b\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n        ProducerTemplate producerTemplate = camelContext.createProducerTemplate();\n        producerTemplate.send(\"direct://hello\", exchange);\n\n        // camel\u306eroute\u304c\u4f8b\u5916\u3067\u7d42\u4e86\u3057\u305f\u304b\u3069\u3046\u304b\u306e\u78ba\u8a8d\n        if (exchange.getException() != null) {\n            return \"NG\";\n        }\n        \n        return exchange.getIn().getBody(String.class);\n    }\n}\n```\n\n# \u8d77\u52d5\n\n```\nmvn spring-boot:run\n```\n\n<img width=\"315\" alt=\"hello.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/37624/80204fa8-86e9-f2cd-fe56-8eae353788ee.png\">\n\n\n# pom.xml\n\n```pom.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>suburi</groupId>\n    <artifactId>HelloSpringBoot</artifactId>\n    <version>1</version>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <java.version>1.8</java.version>\n    </properties>\n\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>1.4.0.RELEASE</version>\n        <relativePath/> <!-- lookup parent from repository -->\n    </parent>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.apache.camel</groupId>\n            <artifactId>camel-spring-boot-starter</artifactId>\n            <version>2.17.3</version>\n        </dependency>\n\n    </dependencies>\n\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n```\n"}