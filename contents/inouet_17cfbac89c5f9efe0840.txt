{"context": " More than 1 year has passed since last update.Class: Aws::DynamoDB::Client \u2014 AWS SDK for Ruby V2\n\nGemfile\nsource 'https://rubygems.org'\n\ngem 'aws-sdk-core'\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u751f\u6210\nv1 \u306f AWS\u3060\u3063\u305f\u306e\u304c\u3001v2 \u3067\u306fAws \u3068\u5c0f\u6587\u5b57\u306b\u306a\u3063\u305f\u6a21\u69d8\u3002\u3084\u3084\u3053\u3057\uff01\n#!/usr/bin/ruby\n\nrequire 'aws-sdk-core'\n\nddb = Aws::DynamoDB::Client.new(\n    endpoint: 'http://localhost:8000', \n    region: 'ap-northeast-1'\n)\n\n\n\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\npp ddb.operation_names\n\n[:batch_get_item, :batch_write_item, :create_table, :delete_item, :delete_table, :describe_table, :get_item, :list_tables, :put_item, :query, :scan, :update_item, :update_table]\n\n\n\n\u30c6\u30fc\u30d6\u30eb\u751f\u6210\n\u3053\u306e\u3081\u3093\u3069\u304f\u3055\u3044\u30aa\u30d7\u30b7\u30e7\u30f3\u6307\u5b9a\u306a\u3093\u3068\u304b\u306a\u3089\u3093\u306e\u304b\u3002\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#create_table-instance_method\n\noptions = {\n    table_name: \"table_name\",\n    key_schema: [\n        {\n            attribute_name: \"user_id\",\n            key_type: \"HASH\"\n        },\n        {\n            attribute_name: \"timestamp\",\n            key_type: \"RANGE\"\n        }\n    ],\n    attribute_definitions: [\n        {\n            attribute_name: \"user_id\",\n            attribute_type: \"S\"\n        },\n        {\n            attribute_name: \"timestamp\",\n            attribute_type: \"N\"\n        }\n    ],\n    provisioned_throughput: {\n        read_capacity_units:  1,\n        write_capacity_units:  1\n    },\n    global_secondary_indexes: [\n        {\n            index_name: \"sex-idx\",\n            key_schema: [\n                {\n                    :attribute_name => \"sex\",\n                    :key_type => \"HASH\"\n                },\n            ],\n            projection: {\n                projection_type: \"ALL\",\n            },\n            provisioned_throughput: {\n                read_capacity_units: 1,\n                write_capacity_units: 1\n            }\n        }\n    ]\n}\n\nddb.create_table(options)\n\n\n\n\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\nresult = ddb.list_tables\nresult.table_names.each do |table|\n  puts table\nend\n\n\nPUT ITEM\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#put_item-instance_method\nddb.put_item(\n    table_name: 'table_name',\n    item:  {\n        user_id:  \"1001\",\n        name:     \"John\",\n        age:      14,\n        birthday: \"2000-01-01\"\n    }\n)\n\n\nGET ITEM\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#get_item-instance_method\nresult = ddb.get_item(\n    table_name: 'table_name',\n    key: {\n        user_id: \"1001\"\n    }\n)\n\nresult.item.each do |key, value|\n  puts \"#{key}: #{value}\"\nend\n\n\nSCAN\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#scan-instance_method\nresult = ddb.scan(\n    table_name: 'table_name'\n)\n\nresult.items.each do |item|\n  puts \"-------------\"\n  item.each do |key, value|\n    puts \"#{key}: #{value}\"\n  end\nend\n\n\nUPDATE ITEM\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#update_item-instance_method\nddb.update_item(\n    table_name: 'table_name',\n    key: {\"user_id\" => \"1001\"},\n    attribute_updates: {\n        \"name\" => {\n            value: \"Alice\",\n            action: \"PUT\",\n        },\n        \"age\" => {\n            value:  20,\n            action: \"PUT\"\n        }\n    }\n)\n\n\n\nDELETE ITEM\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#delete_item-instance_method\nddb.delete_item(\n    table_name: 'table_name',\n    key: {\"user_id\" => \"1001\"}\n)\n\n\n\n\u3064\u3089\u3044\n\u6700\u521d\u3001http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/DynamoDB/Client.html \u306e\u30da\u30fc\u30b8\u898b\u3066\u3001\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3082\u306a\u3044\u3057\u3001\u3081\u3061\u3083\u3064\u3089\u3044\u3068\u601d\u3063\u3066\u3061\u307e\u3061\u307e\u8a66\u3057\u306a\u304c\u3089\u3053\u306e\u30da\u30fc\u30b8\u66f8\u304d\u3060\u3057\u305f\u3093\u3060\u3051\u3069\u3001\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html \u306e\u65b9\u306b\u306f\u898b\u3084\u3059\u304f\u30b5\u30f3\u30d7\u30eb\u3082\u8f09\u3063\u3066\u3066\u3001\u3082\u306e\u3059\u3054\u3044\u5f92\u52b4\u611f\u3002\n\n\u53c2\u8003\n\nAWS SDK for Ruby V2 - Qiita\nClass: Aws::DynamoDB::Client \u2014 AWS SDK for Ruby V2\n\u3010Ruby\u3011DynamoDB\u306eJSON\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8a66\u3057\u3066\u307f\u305f\uff08aws-sdk v2.0.0 stable\uff09\n\n\n\n[Class: Aws::DynamoDB::Client \u2014 AWS SDK for Ruby V2](http://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html)\n\n\n### Gemfile\n\n```\nsource 'https://rubygems.org'\n\ngem 'aws-sdk-core'\n```\n\n### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u751f\u6210\n\nv1 \u306f AWS\u3060\u3063\u305f\u306e\u304c\u3001v2 \u3067\u306fAws \u3068\u5c0f\u6587\u5b57\u306b\u306a\u3063\u305f\u6a21\u69d8\u3002\u3084\u3084\u3053\u3057\uff01\n\n```ruby\n#!/usr/bin/ruby\n\nrequire 'aws-sdk-core'\n\nddb = Aws::DynamoDB::Client.new(\n\tendpoint: 'http://localhost:8000', \n\tregion: 'ap-northeast-1'\n)\n```\n\n### \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\n\n```ruby\npp ddb.operation_names\n\n[:batch_get_item, :batch_write_item, :create_table, :delete_item, :delete_table, :describe_table, :get_item, :list_tables, :put_item, :query, :scan, :update_item, :update_table]\n\n```\n\n### \u30c6\u30fc\u30d6\u30eb\u751f\u6210\n\n\u3053\u306e\u3081\u3093\u3069\u304f\u3055\u3044\u30aa\u30d7\u30b7\u30e7\u30f3\u6307\u5b9a\u306a\u3093\u3068\u304b\u306a\u3089\u3093\u306e\u304b\u3002\n\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#create_table-instance_method\n\n\n```ruby\n\noptions = {\n    table_name: \"table_name\",\n    key_schema: [\n        {\n            attribute_name: \"user_id\",\n            key_type: \"HASH\"\n        },\n        {\n            attribute_name: \"timestamp\",\n            key_type: \"RANGE\"\n        }\n    ],\n    attribute_definitions: [\n        {\n            attribute_name: \"user_id\",\n            attribute_type: \"S\"\n        },\n        {\n            attribute_name: \"timestamp\",\n            attribute_type: \"N\"\n        }\n    ],\n    provisioned_throughput: {\n        read_capacity_units:  1,\n        write_capacity_units:  1\n    },\n    global_secondary_indexes: [\n        {\n            index_name: \"sex-idx\",\n            key_schema: [\n                {\n                    :attribute_name => \"sex\",\n                    :key_type => \"HASH\"\n                },\n            ],\n            projection: {\n                projection_type: \"ALL\",\n            },\n            provisioned_throughput: {\n                read_capacity_units: 1,\n                write_capacity_units: 1\n            }\n        }\n    ]\n}\n\nddb.create_table(options)\n\n```\n\n### \u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\n\n```ruby\nresult = ddb.list_tables\nresult.table_names.each do |table|\n  puts table\nend\n```\n\n### PUT ITEM\n\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#put_item-instance_method\n\n\n```ruby\nddb.put_item(\n    table_name: 'table_name',\n    item:  {\n        user_id:  \"1001\",\n        name:     \"John\",\n        age:      14,\n        birthday: \"2000-01-01\"\n    }\n)\n```\n\n### GET ITEM\n\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#get_item-instance_method\n\n```ruby\nresult = ddb.get_item(\n    table_name: 'table_name',\n    key: {\n        user_id: \"1001\"\n    }\n)\n\nresult.item.each do |key, value|\n  puts \"#{key}: #{value}\"\nend\n```\n\n### SCAN\n\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#scan-instance_method\n\n```ruby\nresult = ddb.scan(\n    table_name: 'table_name'\n)\n\nresult.items.each do |item|\n  puts \"-------------\"\n  item.each do |key, value|\n    puts \"#{key}: #{value}\"\n  end\nend\n```\n\n### UPDATE ITEM\n\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#update_item-instance_method\n\n```ruby\nddb.update_item(\n    table_name: 'table_name',\n    key: {\"user_id\" => \"1001\"},\n    attribute_updates: {\n        \"name\" => {\n            value: \"Alice\",\n            action: \"PUT\",\n        },\n        \"age\" => {\n            value:  20,\n            action: \"PUT\"\n        }\n    }\n)\n\n```\n\n### DELETE ITEM\n\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#delete_item-instance_method\n\n\n```ruby\nddb.delete_item(\n    table_name: 'table_name',\n    key: {\"user_id\" => \"1001\"}\n)\n\n```\n\n### \u3064\u3089\u3044\n\n\u6700\u521d\u3001http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/DynamoDB/Client.html \u306e\u30da\u30fc\u30b8\u898b\u3066\u3001\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3082\u306a\u3044\u3057\u3001\u3081\u3061\u3083\u3064\u3089\u3044\u3068\u601d\u3063\u3066\u3061\u307e\u3061\u307e\u8a66\u3057\u306a\u304c\u3089\u3053\u306e\u30da\u30fc\u30b8\u66f8\u304d\u3060\u3057\u305f\u3093\u3060\u3051\u3069\u3001\nhttp://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html \u306e\u65b9\u306b\u306f\u898b\u3084\u3059\u304f\u30b5\u30f3\u30d7\u30eb\u3082\u8f09\u3063\u3066\u3066\u3001\u3082\u306e\u3059\u3054\u3044\u5f92\u52b4\u611f\u3002\n\n\n## \u53c2\u8003\n\n- [AWS SDK for Ruby V2 - Qiita](http://qiita.com/ryo0301/items/08a2a0451ab8d568b8b0)\n- [Class: Aws::DynamoDB::Client \u2014 AWS SDK for Ruby V2](http://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html)\n- [\u3010Ruby\u3011DynamoDB\u306eJSON\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8a66\u3057\u3066\u307f\u305f\uff08aws-sdk v2.0.0 stable\uff09](http://blog.doizaki.com/entry/2014/10/11/061209)\n", "tags": ["AWS", "DynamoDB"]}