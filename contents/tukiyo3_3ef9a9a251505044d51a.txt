{"tags": ["postfix"], "context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\n\nPostfix\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u3068Spam\u5bfe\u7b56 | UNIXLife\npostfix\u30a2\u30af\u30bb\u30b9\u5236\u5fa1: ITNote\n\n\n\u8a2d\u5b9a\n\n/etc/postfix/main.cf\n smtpd_client_restrictions =\n    permit_mynetworks,\n+   reject_unknown_client,\n    permit\n\n\n\n\u30ed\u30b0\u78ba\u8a8d\n$ tail -f /var/log/mail.* | grep rejected\n\n\nMar  7 09:54:12 mx.srv1 postfix/smtpd[29547]: NOQUEUE: reject: RCPT from unknown[123.50.215.159]: 450 4.7.1 Client host rejected: cannot find your hostname, [123.50.215.159]; from= to=user1@myserver.hoge.jp proto=SMTP helo=<[123.50.215.159]>\n\n\n\u53d7\u4fe1\u3092\u4f8b\u5916\u7684\u306b\u8a31\u53ef\u3057\u305f\u3044\u5834\u5408\n\n/etc/postfix/main.cf\n smtpd_client_restrictions =\n    permit_mynetworks,\n+   check_client_access hash:/etc/postfix/access,\n+   reject_unknown_client,\n    permit\n\n\n\n/etc/postfix/access \n\n\n/etc/postfix/access\n## IP Address Rule\n22.22.22        OK # 22.22.22.0/24\n\n#200.189.73.2            REJECT\n\n# Domain Rule\nmyserver.com            OK\nmydomain.jp             OK\n\n# Address Rule\n#testaa@examples.com     OK\n#spam@spam.com           REJECT\n\n\n\n\u8a2d\u5b9a\u53cd\u6620\npostmap /etc/postfix/access\nservice postfix restart\n\n\n## \u53c2\u8003\n\n* [Postfix\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u3068Spam\u5bfe\u7b56 | UNIXLife](http://unixlife.jp/linux/centos-6/postfix-secure-spam.html)\n* [postfix\u30a2\u30af\u30bb\u30b9\u5236\u5fa1: ITNote](http://kisekiit.seesaa.net/article/226142927.html)\n\n## \u8a2d\u5b9a\n\n```diff:/etc/postfix/main.cf\n smtpd_client_restrictions =\n    permit_mynetworks,\n+   reject_unknown_client,\n    permit\n```\n\n## \u30ed\u30b0\u78ba\u8a8d\n\n```bash:\n$ tail -f /var/log/mail.* | grep rejected\n```\n\n> Mar  7 09:54:12 mx.srv1 postfix/smtpd[29547]: NOQUEUE: reject: RCPT from unknown[123.50.215.159]: 450 4.7.1 Client host rejected: cannot find your hostname, [123.50.215.159]; from=<error_mail@vixii.co> to=<user1@myserver.hoge.jp> proto=SMTP helo=<[123.50.215.159]>\n\n## \u53d7\u4fe1\u3092\u4f8b\u5916\u7684\u306b\u8a31\u53ef\u3057\u305f\u3044\u5834\u5408\n\n```diff:/etc/postfix/main.cf\n smtpd_client_restrictions =\n    permit_mynetworks,\n+   check_client_access hash:/etc/postfix/access,\n+   reject_unknown_client,\n    permit\n```\n\n* /etc/postfix/access \n\n```bash:/etc/postfix/access\n## IP Address Rule\n22.22.22        OK # 22.22.22.0/24\n\n#200.189.73.2            REJECT\n\n# Domain Rule\nmyserver.com            OK\nmydomain.jp             OK\n\n# Address Rule\n#testaa@examples.com     OK\n#spam@spam.com           REJECT\n```\n\n```bash:\u8a2d\u5b9a\u53cd\u6620\npostmap /etc/postfix/access\nservice postfix restart\n```\n"}