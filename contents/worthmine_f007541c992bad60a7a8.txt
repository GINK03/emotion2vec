{"context": "\n\n\u672c\u65e5\u306e\u304a\u984c Text::Xslate\u3067View\u3092\u5206\u96e2\n\n\u304a\u3055\u3089\u3044\n\nPSGI\u5165\u9580\u7b2c\u4e00\u7ae0 \u74b0\u5883\u5909\u6570\u306e\u4e00\u89a7\u3092\u51fa\u3059\nPSGI\u5165\u9580\u7b2c\u4e8c\u7ae0 CGI::Session\u3092PSGI\u3067\u7121\u7406\u3084\u308a\u4f7f\u3046\nPSGI\u5165\u9580\u7b2c\u4e09\u7ae0 \u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5b9f\u88c5\u3059\u308b\n\n\n\u524d\u63d0\n\n\u672c\u8a18\u4e8b\u3067\u306fHTML5\u306e\u751f\u6210\u306b\u9650\u3063\u3066\u8a18\u8ff01\u3057\u307e\u3059\u3002(Text::Xslate\u81ea\u4f53\u306f\u6c4e\u7528\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u306e\u3067\u3001HTML5\u306e\u751f\u6210\u306b\u9650\u3089\u305a\u69d8\u3005\u306a\u7bc4\u56f2\u3067\u5229\u7528\u3067\u304d\u307e\u3059)\n\nCGI.pm\u306e\u4e2d\u306bText::Xslate\u3092\u7406\u8ad6\u4e0a\u76db\u308a\u8fbc\u3081\u307e\u30592\u306e\u3067\u3001HTML5\u3067\u52d5\u304fCGI\u3092\u4f5c\u308b\u3053\u3068\u3092\u5426\u5b9a\u3057\u307e\u305b\u3093\u3002\n\nPlack\u3068Text::Xslate\u306f\u76f8\u4e92\u306b\u72ec\u7acb\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3059\u306e\u3067\u3001\u5225\u306bPSGI\u3092\u66f8\u304f\u306b\u3042\u305f\u3063\u3066Text::Xslate\u3092\u5229\u7528\u3053\u3068\u306f\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u3042\u308bKolon\u3067\u8a18\u8ff03\u3057\u307e\u3059\u3002\nHTML5\u81ea\u4f53\u306e\u89e3\u8aac\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n\u79c1\u3082\u5165\u9580\u3057\u305f\u3066\u3067\u3059\u3002\u30c4\u30c3\u30b3\u30df\u5927\u6b53\u8fce\n\n\nXslate\u3092\u5229\u7528\u3059\u308b\u30e1\u30ea\u30c3\u30c8\n\nModel\u53ca\u3073Controller\u304b\u3089\u307b\u307c\u5b8c\u5168\u306bView\u3092\u5206\u96e2\u3067\u304d\u308b\u3002\u30d7\u30ed\u30b0\u30e9\u30de\u3068\u30c7\u30b6\u30a4\u30ca\u30fc\u304c\u540c\u4e00\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u4f5c\u696d\u3059\u308b\u3068\u304d\u306a\u3069\u306e\u5206\u696d\u306b\u6700\u9069\nXS\u88fd\u306a\u306e\u3067\u3001\u4e0b\u624b\u306a\u81ea\u4f5c\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3088\u308a\u65e9\u3044\n\nTT\u306a\u3069\u306e\u5f93\u6765\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u306e\u79fb\u884c\u3082\u5bb9\u6613\u30444\n\n\nMarkdown\u306a\u3069\u306e\u30e2\u30c0\u30f3\u306a\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308a\u8fbc\u3080\u3053\u3068\u304c\u5bb9\u6613\nHello, Perl6! \u6587\u6cd5\u304cPerl6\u30e9\u30a4\u30af\u306a\u306e\u3067\u3086\u304f\u3086\u304fPerl6\u306b\u79fb\u884c\u3059\u308b\u3068\u304d\u306e\u30b3\u30b9\u30c8\u304c\u4e0b\u304c\u308b\n\n\u3044\u304f\u3064\u304b\u306e\u30e1\u30ea\u30c3\u30c8\u306f\u3001\u305d\u306e\u307e\u307e\u30c7\u30e1\u30ea\u30c3\u30c8\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nXslate\u3092\u5229\u7528\u3059\u308b\u30c7\u30e1\u30ea\u30c3\u30c8\n\nXS\u88fd\u306a\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u74b0\u5883\uff08\u30ec\u30f3\u30bf\u30eb\u30b5\u30fc\u30d0\u30fc\u306a\u3069\uff09\u304c\u3042\u308b\n\u6587\u6cd5\u304cPerl6\u30e9\u30a4\u30af\u306a\u306e\u3067\u3001\u5c0e\u5165\u6642\u306b\u6238\u60d1\u3046\u3053\u3068\u304c\u3042\u308b\u3002\nHTML5\u306b\u95a2\u3057\u3066\u4f55\u304b\u7279\u5225\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u6709\u3057\u3066\u3044\u308b\u8a33\u3067\u306f\u306a\u30445\u306e\u3067\u3001HTML5\u306b\u95a2\u3059\u308b\u77e5\u8b58\u306f\u5fc5\u8981\n\n\n\u307e\u3001\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nMyapp.pl\nuse strict;\nuse warnings;\nuse Carp;\n\nuse Plack::App::Path::Router::PSGI;\nuse Path::Router;\nuse Plack::Request;\n\nuse Encode;                 # Text::Xslate\u306f\u30c7\u30b3\u30fc\u30c9\u6e08\u307fUTF-8\u304c\u524d\u63d0\u306a\u306e\u3067Encode\u306e\u51fa\u756a\u3067\u3059\u3002\n\nuse Text::Xslate;\nuse Text::Xslate::Bridge::MultiMarkdown;\n# \u2191\u5ba3\u8a00\u3057\u306a\u304f\u3066\u3082\u4e0b\u8a18\u306e\u8a18\u8ff0\u3067\u8aad\u307f\u8fbc\u3093\u3067\u304f\u308c\u308b\u304c\u3001plackup\u306e\u6642\u70b9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u691c\u77e5\u3057\u305f\u3044\u306e\u3067\u660e\u793a\u3059\u308b\nmy $tx = Text::Xslate->new(\n    module => ['Text::Xslate::Bridge::MultiMarkdown'],\n    syntax => 'Kolon',\n    cache => 0,\n    verbose => 1,\n);\n\nuse CGI::Session;\nmy $session = CGI::Session->new( undef, undef, { Directory => './sessions' } ); # \u30c0\u30df\u30fc\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\nmy $sid = $session->param('CGISESSID') || undef;\n$session->delete(); # \u30c0\u30df\u30fc\u306f\u3059\u3050\u6d88\u3059\n$session = CGI::Session->new( undef, $sid, { Directory => './sessions' } ); # \u672c\u30bb\u30c3\u30b7\u30e7\u30f3\nif ( $session->is_expired() ) { # \u671f\u9650\u5207\u308c\u3092\u6d88\u3057\u3066\u518d\u767a\u884c\n    $session->delete();\n    $session = CGI::Session->new( undef, $sid, { Directory => './sessions' } );\n}else{\n    $session->expire('+1d');\n}\n\nmy $router = Path::Router->new;\n$router->add_route( '/'         => target => \\&root );\n$router->add_route( '/env'      => target => \\&env );\n$router->add_route( '/session'  => target => \\&session );\n$router->add_route( '/:action/:id' =>\n    validations => {\n        action  => qr/^\\w[\\w\\-]{0,9}$/,\n        id      => qr/^\\d{1,10}$/,\n    },\n    target => \\&action\n);\n\n# now create the Plack app\nmy $app = Plack::App::Path::Router::PSGI->new( router => $router );\n$app->to_app();\n\n# \u4ee5\u4e0brouter\u3067\u547c\u3070\u308c\u308b\u8981\u7d20\nsub root {\n    my $env = shift;\n    my $title = 'Welcome to ' . $env->{'HTTP_HOST'};\n    my $render = $tx->render( 'Templates/root.tx', {\n        title => $title,\n        description => decode_utf8('\u3053\u3053\u306f\u30eb\u30fc\u30c8\u3067\u3059\u3002'),\n    } );\n    return response( $env, $render );\n}\n\nsub action {\n    my $env = shift;\n    my ( $action, $id ) = @{ $env->{'plack.router.match.args'} };\n    my $req = Plack::Request->new($env);\n    my $method = $req->method;\n    if( $method =~ /^(:?GET|HEAD)$/s ) {\n        my $render = $tx->render( 'Templates/action.tx', {\n            title   => decode_utf8('\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u307f\u308b'),\n            action  => $action,\n            id      => $id,\n            method  => $method,\n        } );\n        return response( $env, $render );\n    }elsif( $method eq 'POST' ){\n        $action = $req->body_parameters->{'action'};\n        $id = $req->body_parameters->{'id'};\n        my $render = $tx->render( 'Templates/action.tx', {\n            title   => decode_utf8('\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u307f\u308b'),\n            action  => $action,\n            id      => $id,\n            method  => $method,\n        } );\n        return response( $env, $render );\n    }\n    my $render = $tx->render( 'Templates/405.tx', {\n        title   => decode_utf8('HTTP\u30e1\u30bd\u30c3\u30c9\u30a8\u30e9\u30fc'),\n        action  => $action,\n        id      => $id,\n        method  => $method,\n    } );\n    return response( $env, $render, -status => 405 );\n}\n\nsub session {\n    my $env = shift;\n    my $req = Plack::Request->new($env);\n    my %param = %{ $req->body_parameters };\n    if( exists $param{'action'} and $param{'action'} eq 'forget' ) {\n        $session->param( 'str', '' );\n    }elsif( exists $param{'str'} ){\n        $session->param( 'str', $param{'str'} );\n    }\n\n    my $render = $tx->render( 'Templates/session.tx', {\n        title   => decode_utf8('\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3057\u3066\u307f\u308b'),\n        str     => $session->param('str') || '',\n    } );\n    return response( $env, $render );\n}\n\nsub env {\n    my $env = shift;\n    my @str;\n    while ( my ( $key, $value ) = each %$env ) {\n        push @str, \"$key = $value\" unless ref $value;\n    }\n    my $render = $tx->render( 'Templates/env.tx', {\n        title   => decode_utf8('\u74b0\u5883\u5909\u6570\u4e00\u89a7'),\n        list    => [sort @str],\n    } );\n    return response( $env, $render );\n}\n\n# \u30b5\u30d6\u30eb\u30fc\u30c1\u30f3\nsub response {\n    my $env = shift;\n    my $body = encode_utf8(shift) || croak 'empty body!';\n    my %ARG = @_ if @_;\n    my $status = $ARG{'-status'} || 200;\n    croak \"unvalid status: $status\" if $status !~ /^\\d{3}$/s;\n    my $mime = $ARG{'-MIME'} || 'text/html; charset=utf-8';\n    my $headers = $ARG{'-headers'} || {};\n    my $req = Plack::Request->new($env);\n    my $res = $req->new_response($status);\n    $res->content_length( length $body );\n    $res->content_type($mime);\n    $res->header(\n        'Set-Cookie'    => $session->cookie,\n        %$headers\n    );\n    $res->body($body) unless $req->method eq 'HEAD';\n    $res->finalize;\n}\n\n\n\u30b9\u30c3\u30ad\u30ea\u3057\u307e\u3057\u305f\u306d\uff01\u4ee5\u4e0b\u304c\u5fc5\u8981\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002Templates/\u306b\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nTemplates/base.tx\n<!DOCTYPE html>\n<html lang=\"ja-jp\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n: if $description {\n    <meta name=\"description\" content=\"<: $description :>\">\n: }\n: if $noindex {\n    <meta name=\"robots\" content=\"noindex,nofollow,noarchive,noodp,noydir\">\n: }\n    <title><:$title:></title>\n</head>\n\n<body>\n\n<div class=\"container\">\n<h1><: $title :></h1>\n\n<hr>\n\n: block main -> {}\n\n<hr>\n\n<footer class=\"col-sm-12\">\n<ul class=\"list-inline\">\n    <li><a href=\"/\">\u30c8\u30c3\u30d7\u3078\u623b\u308b</a></li>\n    <li><a href=\"/env\">\u74b0\u5883\u5909\u6570\u4e00\u89a7\u3078</a></li>\n    <li><a href=\"/session\">\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u3078</a></li>\n    <li><a href=\"/action/1234567890\">\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30c6\u30b9\u30c8\u3078</a></li>\n</ul>\n</footer>\n</div>\n\n</body></html>\n\n\n\u672c\u8a18\u4e8b\u306e\u7bc4\u7587\u3092\u8d85\u3048\u308b\u306e\u3067\u89e3\u8aac\u3057\u307e\u305b\u3093\u304c\u3001css\u3084js\u306e\u8ffd\u52a0\u3001\u53ca\u3073OGP\u306a\u3069\u306e\u8a18\u8f09\u3092\u3057\u305f\u3044\u3068\u304d\u306fbase\u3092\u3044\u3058\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u57fa\u672c\u7684\u306bbase\u306f\u4e0d\u5909\u3067\u3059\u3002footer\u3092\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u3057\u3066\u30b3\u30f3\u30c6\u30f3\u30c4\u306b\u8ffd\u52a0\u304c\u3042\u3063\u305f\u5834\u5408\u3082\u3044\u3058\u3089\u306a\u304f\u3066\u3044\u3044\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u3002\n\nTemplates/405.tx\n: cascade Templates::base\n: around main -> {\n<p>\u6307\u5b9a\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u304c\u4e0d\u6b63\u3067\u3059\u3002method:<: $method :></p>\n: }\n\n\n\u57fa\u672c\u7684\u306a\u7d99\u627f\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306b\u884c\u3044\u307e\u3059\u3002\n\nTemplates/root.tx\n: cascade Templates::base\n: around main -> {\n<: markdown('\n- [\u74b0\u5883\u5909\u6570\u4e00\u89a7\u3078](/env)\n- [\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u3078](/session)\n- [\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30c6\u30b9\u30c8\u3078](/action/1234567890)\n') | mark_raw :>\n: }\n\n\n\u666e\u901a\u3053\u3046\u3044\u3046\u66f8\u304d\u65b9\u306f\u3057\u307e\u305b\u30936\u304c\u3001\u4ed6\u306b\u5165\u308c\u308b\u3068\u3053\u308d\u304c\u601d\u3044\u5f53\u305f\u3089\u306a\u304b\u3063\u305f\u306e\u3067markdown\u3092\u3053\u3053\u306b\u5165\u308c\u307e\u3057\u305f\u3002\n\u5358\u306bmarkdown\u3092\u633f\u5165\u3059\u308b\u3068Xslate\u306fhtml\u30a8\u30b9\u30b1\u30fc\u30d7\u3092\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30d1\u30a4\u30d7\u6f14\u7b97\u5b50\u3067markdown('*some text*')\u3000| mark_raw\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u3053\u308d\u3060\u3051\u304c\u5473\u564c\u3002\n\nTemplates/env.tx\n: cascade Templates::base\n: around main -> {\n<p>\n: for $list -> $item {\n    <: $item :><br>\n:}\n</p>\n: }\n\n\n\u914d\u5217\u306b\u57fa\u3065\u304f\u7e70\u308a\u8fd4\u3057\u69cb\u6587\u306a\u3069\u306f\u4e0a\u8a18\u3067\u3059\u3002\n\nTemplates/action.tx\n: cascade Templates::base\n: around main -> {\n: if ( $method == 'POST' ) {\n<p><a href=\"/<: $action~'/'~$id :>\">\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b</a></p>\n: }\n<form method=\"POST\" action=\"/<: $action~'/'~$id :>\" enctype=\"multipart/form-data\"><p>\n    \u6307\u5b9a\u3055\u308c\u305fmethod:<: $method :><br>\n    \u6307\u5b9a\u3055\u308c\u305faction:<input type=\"text\" name=\"action\" value=\"<: $action :>\">\u4efb\u610f\u306e\u82f1\u6570\u5b57<br>\n    \u6307\u5b9a\u3055\u308c\u305fID:<input type=\"text\" name=\"id\" value=\"<: $id :>\">10\u6841\u307e\u3067\u306e\u6574\u6570<br>\n    <button type=\"submit\">\u5909\u66f4\u3059\u308b</button>\n</p></form>\n: }\n\n\nPerl6\u3067\u306e\u6587\u5b57\u5217\u306e\u9023\u7d50\u306f.\u3067\u306f\u306a\u304f~\u3067\u884c\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u3001\u7279\u306b\u88dc\u8db3\u3059\u3079\u304d\u6ce8\u610f\u4e8b\u9805\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u30c7\u30e2\u3092\u8d70\u3089\u305b\u308b\u305f\u3081\u306b\u5fc5\u8981\u3067\u3059\u3002\n\nTemplates/session.tx\n: cascade Templates::base\n: around main -> {\n<form method=\"POST\" action=\"/session\" enctype=\"multipart/form-data\"><p>\n    <input type=\"text\" name=\"str\" value=\"<: $str :>\">\n    <button type=\"submit\" name=\"action\" value=\"remember\">\u8a18\u61b6</button>\n    <button type=\"submit\" name=\"action\" value=\"forget\">\u6d88\u53bb</button>\n</p></form>\n: }\n\n\n\n\u3000Kolon\u306e\u6587\u6cd5\n\n\u95a2\u6570\u3067\u59cb\u307e\u308b\u884c\u306f:\u3067\u59cb\u3081\u307e\u3059\u3002\nHTML\u4e2d\u306b\u95a2\u6570\u306a\u3069\u3092\u57cb\u3081\u8fbc\u307f\u305f\u3044\u5834\u5408\u306f<: function(some) :>\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u30b3\u30e1\u30f3\u30c8\u306f\u884c\u982d\u3092:#\u3068\u3057\u307e\u3059\u3002\n\n\n\u3000\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3078\u306e\u5024\u306e\u6e21\u3057\u65b9\nmy $render = $tx->render( 'Templates/*.tx', {\n    title   => decode_utf8('UTF-8\u306a\u6587\u5b57\u5217\u306f\u30c7\u30b3\u30fc\u30c9\u5fc5\u9808'),\n    list    => $arrayref || \\@array,\n    hash    => $hashref || \\%hash,\n    str     => $str,\n} );\n\n\n\u3053\u3053\u306b\u304d\u3066decode_utf8()\u304c\u5fc5\u98087\u306b\u306a\u308a\u307e\u3059\u3002\n\u8fd4\u308a\u5024\u306f\u30c7\u30b3\u30fc\u30c9\u6e08\u307fUTF-8\u3067\u3059\u306e\u3067encode_utf8()\u51e6\u7406\u304c\u8868\u793a\u307e\u3067\u306b\u5fc5\u8981\u3067\u3059\u3002\n\u914d\u5217\u3084\u30cf\u30c3\u30b7\u30e5\u306a\u3069\u306f\u53c2\u7167\u6e21\u3057\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u306d\u3001\u7c21\u5358\u3067\u3057\u3087\u3046\uff1f\u3042\u306a\u305f\u3082\u59cb\u3081\u3088\u3046\uff01PSGI\uff01\n\n\u6b21\u7ae0\nPSGI\u5165\u9580\u7b2c\u4e94\u7ae0 Log::Dispatch::Config\u3067\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u3092\u53d6\u308b\n\n\u5ba3\u4f1d\n\u672c\u8a18\u4e8b\u306f\u81ea\u524d\u3067\u6709\u6599Web\u30b5\u30fc\u30d3\u30b9\u3092Perl\u3067\u66f8\u3044\u3066\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u306b\u8fba\u308a\u3001\u3064\u307e\u3065\u3044\u305f\u70b9\u3084\u6c17\u3065\u3044\u305f\u3053\u3068\u3092\u5171\u6709\u3059\u308b\u76ee\u7684\u3067\u66f8\u304d\u59cb\u3081\u307e\u3057\u305f\u3002\n\u3053\u3061\u3089\u306eQR\u30b3\u30fc\u30c9\u3092\u30b9\u30de\u30db\u3067\u8aad\u307f\u53d6\u308a\u3001\n\u8208\u5473\u3092\u6301\u3063\u305f\u65b9\u306fhttps://qrown.me\u307e\u3067\u305c\u3072\u304a\u7acb\u3061\u5bc4\u308a\u304f\u3060\u3055\u3044\uff01\n\n\n\n\nHTML4\u3067\u66f8\u304d\u305f\u3044\u3068\u3044\u3046\u30cb\u30fc\u30ba\u304c\u898b\u5f53\u305f\u3089\u306a\u3044\u3057\u3001\u305d\u308c\u306a\u3089CGI.pm\u3067\u751f\u6210\u3057\u305fHTML\u3092PSGI\u3067\u8868\u793a\u3057\u305f\u3063\u3066\u69cb\u308f\u306a\u3044\u3002\u00a0\u21a9\n\n\n\u79c1\u304c\u305f\u3069\u308a\u7740\u3044\u305f\u9806\u756a\u304cPlack->Xslate\u3060\u3063\u305f\u306e\u3067\u3001\u3053\u306e\u53ef\u80fd\u6027\u306f\u672a\u30c6\u30b9\u30c8\u3067\u3059\u00a0\u21a9\n\n\n\u304a\u305d\u3089\u304f\u305d\u308c\u304c\u4e00\u756a\u6587\u732e\u304c\u591a\u3044\u306e\u3067\u00a0\u21a9\n\n\nTT\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u00a0\u21a9\n\n\nbuilder\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u63a2\u305b\u3070\u826f\u3044\u6c17\u306f\u3059\u308b\u00a0\u21a9\n\n\n\u6700\u3082\u30a2\u30af\u30bb\u30b9\u304c\u591a\u3044\u3067\u3042\u308d\u3046\u30eb\u30fc\u30c8\u306f\u8efd\u3044\u65b9\u304c\u3044\u3044\u306e\u3067\u3001\u52d5\u7684\u8a18\u8ff0\u306f\u5c11\u306a\u3044\u65b9\u304c\u826f\u3044\u3002\u00a0\u21a9\n\n\nuse utf8\u3057\u3066\u3044\u308b\u5834\u5408\u3092\u9664\u304f\u3002\u3053\u306e\u5834\u5408\u306e\u691c\u8a3c\u306f\u3057\u3066\u307e\u305b\u3093\u3002\u00a0\u21a9\n\n\n\n# \u672c\u65e5\u306e\u304a\u984c [Text::Xslate](http://search.cpan.org/~syohex/Text-Xslate-3.4.0/lib/Text/Xslate.pm)\u3067View\u3092\u5206\u96e2\n\n## \u304a\u3055\u3089\u3044\n\n1. [PSGI\u5165\u9580\u7b2c\u4e00\u7ae0 \u74b0\u5883\u5909\u6570\u306e\u4e00\u89a7\u3092\u51fa\u3059](http://qiita.com/worthmine/items/96f36332e620aef34001)\n2. [PSGI\u5165\u9580\u7b2c\u4e8c\u7ae0 CGI::Session\u3092PSGI\u3067\u7121\u7406\u3084\u308a\u4f7f\u3046](http://qiita.com/worthmine/items/987ac1e422348b9f0ea5)\n3. [PSGI\u5165\u9580\u7b2c\u4e09\u7ae0 \u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5b9f\u88c5\u3059\u308b](http://qiita.com/worthmine/items/9662ac8f30a30b167123)\n\n## \u524d\u63d0\n- \u672c\u8a18\u4e8b\u3067\u306f[HTML5](https://www.w3.org/TR/html5/)\u306e\u751f\u6210\u306b\u9650\u3063\u3066\u8a18\u8ff0[^1]\u3057\u307e\u3059\u3002(Text::Xslate\u81ea\u4f53\u306f\u6c4e\u7528\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u306e\u3067\u3001HTML5\u306e\u751f\u6210\u306b\u9650\u3089\u305a\u69d8\u3005\u306a\u7bc4\u56f2\u3067\u5229\u7528\u3067\u304d\u307e\u3059)\n- [CGI.pm](http://search.cpan.org/~leejo/CGI-4.35/lib/CGI.pod)\u306e\u4e2d\u306bText::Xslate\u3092\u7406\u8ad6\u4e0a\u76db\u308a\u8fbc\u3081\u307e\u3059[^2]\u306e\u3067\u3001HTML5\u3067\u52d5\u304fCGI\u3092\u4f5c\u308b\u3053\u3068\u3092\u5426\u5b9a\u3057\u307e\u305b\u3093\u3002\n- [Plack](http://search.cpan.org/~miyagawa/Plack-1.0042/lib/Plack.pm)\u3068Text::Xslate\u306f\u76f8\u4e92\u306b\u72ec\u7acb\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3059\u306e\u3067\u3001\u5225\u306bPSGI\u3092\u66f8\u304f\u306b\u3042\u305f\u3063\u3066Text::Xslate\u3092\u5229\u7528\u3053\u3068\u306f\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u3042\u308b`Kolon`\u3067\u8a18\u8ff0[^3]\u3057\u307e\u3059\u3002\n- HTML5\u81ea\u4f53\u306e\u89e3\u8aac\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n- \u79c1\u3082\u5165\u9580\u3057\u305f\u3066\u3067\u3059\u3002\u30c4\u30c3\u30b3\u30df\u5927\u6b53\u8fce\n\n[^1]: HTML4\u3067\u66f8\u304d\u305f\u3044\u3068\u3044\u3046\u30cb\u30fc\u30ba\u304c\u898b\u5f53\u305f\u3089\u306a\u3044\u3057\u3001\u305d\u308c\u306a\u3089CGI.pm\u3067\u751f\u6210\u3057\u305fHTML\u3092PSGI\u3067\u8868\u793a\u3057\u305f\u3063\u3066\u69cb\u308f\u306a\u3044\u3002\n[^2]: \u79c1\u304c\u305f\u3069\u308a\u7740\u3044\u305f\u9806\u756a\u304cPlack->Xslate\u3060\u3063\u305f\u306e\u3067\u3001\u3053\u306e\u53ef\u80fd\u6027\u306f\u672a\u30c6\u30b9\u30c8\u3067\u3059\n[^3]: \u304a\u305d\u3089\u304f\u305d\u308c\u304c\u4e00\u756a\u6587\u732e\u304c\u591a\u3044\u306e\u3067\n\n## Xslate\u3092\u5229\u7528\u3059\u308b\u30e1\u30ea\u30c3\u30c8\n- Model\u53ca\u3073Controller\u304b\u3089\u307b\u307c\u5b8c\u5168\u306bView\u3092\u5206\u96e2\u3067\u304d\u308b\u3002\u30d7\u30ed\u30b0\u30e9\u30de\u3068\u30c7\u30b6\u30a4\u30ca\u30fc\u304c\u540c\u4e00\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u4f5c\u696d\u3059\u308b\u3068\u304d\u306a\u3069\u306e\u5206\u696d\u306b\u6700\u9069\n- XS\u88fd\u306a\u306e\u3067\u3001\u4e0b\u624b\u306a\u81ea\u4f5c\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3088\u308a\u65e9\u3044\n- [TT](http://www.template-toolkit.org/)\u306a\u3069\u306e\u5f93\u6765\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u306e\u79fb\u884c\u3082\u5bb9\u6613\u3044[^4]\n- [Markdown](http://www.markdown.jp/what-is-markdown/)\u306a\u3069\u306e\u30e2\u30c0\u30f3\u306a\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308a\u8fbc\u3080\u3053\u3068\u304c\u5bb9\u6613\n- Hello, [Perl6](https://perl6.org/)! \u6587\u6cd5\u304cPerl6\u30e9\u30a4\u30af\u306a\u306e\u3067\u3086\u304f\u3086\u304fPerl6\u306b\u79fb\u884c\u3059\u308b\u3068\u304d\u306e\u30b3\u30b9\u30c8\u304c\u4e0b\u304c\u308b\n\n[^4]: [TT\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u3053\u3061\u3089](http://search.cpan.org/~syohex/Text-Xslate-3.4.0/lib/Text/Xslate/Syntax/TTerse.pm)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\n\n\u3044\u304f\u3064\u304b\u306e\u30e1\u30ea\u30c3\u30c8\u306f\u3001\u305d\u306e\u307e\u307e\u30c7\u30e1\u30ea\u30c3\u30c8\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n## Xslate\u3092\u5229\u7528\u3059\u308b\u30c7\u30e1\u30ea\u30c3\u30c8\n- XS\u88fd\u306a\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u74b0\u5883\uff08\u30ec\u30f3\u30bf\u30eb\u30b5\u30fc\u30d0\u30fc\u306a\u3069\uff09\u304c\u3042\u308b\n- \u6587\u6cd5\u304cPerl6\u30e9\u30a4\u30af\u306a\u306e\u3067\u3001\u5c0e\u5165\u6642\u306b\u6238\u60d1\u3046\u3053\u3068\u304c\u3042\u308b\u3002\n- HTML5\u306b\u95a2\u3057\u3066\u4f55\u304b\u7279\u5225\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u6709\u3057\u3066\u3044\u308b\u8a33\u3067\u306f\u306a\u3044[^5]\u306e\u3067\u3001HTML5\u306b\u95a2\u3059\u308b\u77e5\u8b58\u306f\u5fc5\u8981\n\n[^5]: builder\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u63a2\u305b\u3070\u826f\u3044\u6c17\u306f\u3059\u308b\n\n## \u307e\u3001\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n```perl:Myapp.pl\nuse strict;\nuse warnings;\nuse Carp;\n\nuse Plack::App::Path::Router::PSGI;\nuse Path::Router;\nuse Plack::Request;\n\nuse Encode;                 # Text::Xslate\u306f\u30c7\u30b3\u30fc\u30c9\u6e08\u307fUTF-8\u304c\u524d\u63d0\u306a\u306e\u3067Encode\u306e\u51fa\u756a\u3067\u3059\u3002\n\nuse Text::Xslate;\nuse Text::Xslate::Bridge::MultiMarkdown;\n# \u2191\u5ba3\u8a00\u3057\u306a\u304f\u3066\u3082\u4e0b\u8a18\u306e\u8a18\u8ff0\u3067\u8aad\u307f\u8fbc\u3093\u3067\u304f\u308c\u308b\u304c\u3001plackup\u306e\u6642\u70b9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u691c\u77e5\u3057\u305f\u3044\u306e\u3067\u660e\u793a\u3059\u308b\nmy $tx = Text::Xslate->new(\n    module => ['Text::Xslate::Bridge::MultiMarkdown'],\n    syntax => 'Kolon',\n    cache => 0,\n    verbose => 1,\n);\n\nuse CGI::Session;\nmy $session = CGI::Session->new( undef, undef, { Directory => './sessions' } ); # \u30c0\u30df\u30fc\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\nmy $sid = $session->param('CGISESSID') || undef;\n$session->delete(); # \u30c0\u30df\u30fc\u306f\u3059\u3050\u6d88\u3059\n$session = CGI::Session->new( undef, $sid, { Directory => './sessions' } ); # \u672c\u30bb\u30c3\u30b7\u30e7\u30f3\nif ( $session->is_expired() ) { # \u671f\u9650\u5207\u308c\u3092\u6d88\u3057\u3066\u518d\u767a\u884c\n    $session->delete();\n    $session = CGI::Session->new( undef, $sid, { Directory => './sessions' } );\n}else{\n    $session->expire('+1d');\n}\n\nmy $router = Path::Router->new;\n$router->add_route( '/'         => target => \\&root );\n$router->add_route( '/env'      => target => \\&env );\n$router->add_route( '/session'  => target => \\&session );\n$router->add_route( '/:action/:id' =>\n    validations => {\n        action  => qr/^\\w[\\w\\-]{0,9}$/,\n        id      => qr/^\\d{1,10}$/,\n    },\n    target => \\&action\n);\n\n# now create the Plack app\nmy $app = Plack::App::Path::Router::PSGI->new( router => $router );\n$app->to_app();\n\n# \u4ee5\u4e0brouter\u3067\u547c\u3070\u308c\u308b\u8981\u7d20\nsub root {\n    my $env = shift;\n    my $title = 'Welcome to ' . $env->{'HTTP_HOST'};\n    my $render = $tx->render( 'Templates/root.tx', {\n        title => $title,\n        description => decode_utf8('\u3053\u3053\u306f\u30eb\u30fc\u30c8\u3067\u3059\u3002'),\n    } );\n    return response( $env, $render );\n}\n\nsub action {\n    my $env = shift;\n    my ( $action, $id ) = @{ $env->{'plack.router.match.args'} };\n    my $req = Plack::Request->new($env);\n    my $method = $req->method;\n    if( $method =~ /^(:?GET|HEAD)$/s ) {\n        my $render = $tx->render( 'Templates/action.tx', {\n            title   => decode_utf8('\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u307f\u308b'),\n            action  => $action,\n            id      => $id,\n            method  => $method,\n        } );\n        return response( $env, $render );\n    }elsif( $method eq 'POST' ){\n        $action = $req->body_parameters->{'action'};\n        $id = $req->body_parameters->{'id'};\n        my $render = $tx->render( 'Templates/action.tx', {\n            title   => decode_utf8('\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u307f\u308b'),\n            action  => $action,\n            id      => $id,\n            method  => $method,\n        } );\n        return response( $env, $render );\n    }\n    my $render = $tx->render( 'Templates/405.tx', {\n        title   => decode_utf8('HTTP\u30e1\u30bd\u30c3\u30c9\u30a8\u30e9\u30fc'),\n        action  => $action,\n        id      => $id,\n        method  => $method,\n    } );\n    return response( $env, $render, -status => 405 );\n}\n\nsub session {\n    my $env = shift;\n    my $req = Plack::Request->new($env);\n    my %param = %{ $req->body_parameters };\n    if( exists $param{'action'} and $param{'action'} eq 'forget' ) {\n        $session->param( 'str', '' );\n    }elsif( exists $param{'str'} ){\n        $session->param( 'str', $param{'str'} );\n    }\n\n    my $render = $tx->render( 'Templates/session.tx', {\n        title   => decode_utf8('\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3057\u3066\u307f\u308b'),\n        str     => $session->param('str') || '',\n    } );\n    return response( $env, $render );\n}\n\nsub env {\n    my $env = shift;\n    my @str;\n    while ( my ( $key, $value ) = each %$env ) {\n        push @str, \"$key = $value\" unless ref $value;\n    }\n    my $render = $tx->render( 'Templates/env.tx', {\n        title   => decode_utf8('\u74b0\u5883\u5909\u6570\u4e00\u89a7'),\n        list    => [sort @str],\n    } );\n    return response( $env, $render );\n}\n\n# \u30b5\u30d6\u30eb\u30fc\u30c1\u30f3\nsub response {\n    my $env = shift;\n    my $body = encode_utf8(shift) || croak 'empty body!';\n    my %ARG = @_ if @_;\n    my $status = $ARG{'-status'} || 200;\n    croak \"unvalid status: $status\" if $status !~ /^\\d{3}$/s;\n    my $mime = $ARG{'-MIME'} || 'text/html; charset=utf-8';\n    my $headers = $ARG{'-headers'} || {};\n    my $req = Plack::Request->new($env);\n    my $res = $req->new_response($status);\n    $res->content_length( length $body );\n    $res->content_type($mime);\n    $res->header(\n        'Set-Cookie'    => $session->cookie,\n        %$headers\n    );\n    $res->body($body) unless $req->method eq 'HEAD';\n    $res->finalize;\n}\n```\n\u30b9\u30c3\u30ad\u30ea\u3057\u307e\u3057\u305f\u306d\uff01\u4ee5\u4e0b\u304c\u5fc5\u8981\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002`Templates/`\u306b\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```html:Templates/base.tx\n<!DOCTYPE html>\n<html lang=\"ja-jp\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n: if $description {\n    <meta name=\"description\" content=\"<: $description :>\">\n: }\n: if $noindex {\n    <meta name=\"robots\" content=\"noindex,nofollow,noarchive,noodp,noydir\">\n: }\n    <title><:$title:></title>\n</head>\n\n<body>\n\n<div class=\"container\">\n<h1><: $title :></h1>\n\n<hr>\n\n: block main -> {}\n\n<hr>\n\n<footer class=\"col-sm-12\">\n<ul class=\"list-inline\">\n    <li><a href=\"/\">\u30c8\u30c3\u30d7\u3078\u623b\u308b</a></li>\n    <li><a href=\"/env\">\u74b0\u5883\u5909\u6570\u4e00\u89a7\u3078</a></li>\n    <li><a href=\"/session\">\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u3078</a></li>\n    <li><a href=\"/action/1234567890\">\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30c6\u30b9\u30c8\u3078</a></li>\n</ul>\n</footer>\n</div>\n\n</body></html>\n```\n\u672c\u8a18\u4e8b\u306e\u7bc4\u7587\u3092\u8d85\u3048\u308b\u306e\u3067\u89e3\u8aac\u3057\u307e\u305b\u3093\u304c\u3001css\u3084js\u306e\u8ffd\u52a0\u3001\u53ca\u3073[OGP](https://en.wikipedia.org/wiki/Facebook_Platform#Open_Graph_protocol)\u306a\u3069\u306e\u8a18\u8f09\u3092\u3057\u305f\u3044\u3068\u304d\u306fbase\u3092\u3044\u3058\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u57fa\u672c\u7684\u306bbase\u306f\u4e0d\u5909\u3067\u3059\u3002footer\u3092\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u3057\u3066\u30b3\u30f3\u30c6\u30f3\u30c4\u306b\u8ffd\u52a0\u304c\u3042\u3063\u305f\u5834\u5408\u3082\u3044\u3058\u3089\u306a\u304f\u3066\u3044\u3044\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u3002\n\n```html:Templates/405.tx\n: cascade Templates::base\n: around main -> {\n<p>\u6307\u5b9a\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u304c\u4e0d\u6b63\u3067\u3059\u3002method:<: $method :></p>\n: }\n```\n\u57fa\u672c\u7684\u306a\u7d99\u627f\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306b\u884c\u3044\u307e\u3059\u3002\n\n```html:Templates/root.tx\n: cascade Templates::base\n: around main -> {\n<: markdown('\n- [\u74b0\u5883\u5909\u6570\u4e00\u89a7\u3078](/env)\n- [\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u3078](/session)\n- [\u52d5\u7684\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u30c6\u30b9\u30c8\u3078](/action/1234567890)\n') | mark_raw :>\n: }\n```\n\u666e\u901a\u3053\u3046\u3044\u3046\u66f8\u304d\u65b9\u306f\u3057\u307e\u305b\u3093[^6]\u304c\u3001\u4ed6\u306b\u5165\u308c\u308b\u3068\u3053\u308d\u304c\u601d\u3044\u5f53\u305f\u3089\u306a\u304b\u3063\u305f\u306e\u3067markdown\u3092\u3053\u3053\u306b\u5165\u308c\u307e\u3057\u305f\u3002\n\u5358\u306bmarkdown\u3092\u633f\u5165\u3059\u308b\u3068Xslate\u306fhtml\u30a8\u30b9\u30b1\u30fc\u30d7\u3092\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30d1\u30a4\u30d7\u6f14\u7b97\u5b50\u3067`markdown('*some text*')\u3000| mark_raw`\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u3053\u308d\u3060\u3051\u304c\u5473\u564c\u3002\n\n[^6]: \u6700\u3082\u30a2\u30af\u30bb\u30b9\u304c\u591a\u3044\u3067\u3042\u308d\u3046\u30eb\u30fc\u30c8\u306f\u8efd\u3044\u65b9\u304c\u3044\u3044\u306e\u3067\u3001\u52d5\u7684\u8a18\u8ff0\u306f\u5c11\u306a\u3044\u65b9\u304c\u826f\u3044\u3002\n\n```html:Templates/env.tx\n: cascade Templates::base\n: around main -> {\n<p>\n: for $list -> $item {\n    <: $item :><br>\n:}\n</p>\n: }\n```\n\u914d\u5217\u306b\u57fa\u3065\u304f\u7e70\u308a\u8fd4\u3057\u69cb\u6587\u306a\u3069\u306f\u4e0a\u8a18\u3067\u3059\u3002\n\n```html:Templates/action.tx\n: cascade Templates::base\n: around main -> {\n: if ( $method == 'POST' ) {\n<p><a href=\"/<: $action~'/'~$id :>\">\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b</a></p>\n: }\n<form method=\"POST\" action=\"/<: $action~'/'~$id :>\" enctype=\"multipart/form-data\"><p>\n    \u6307\u5b9a\u3055\u308c\u305fmethod:<: $method :><br>\n    \u6307\u5b9a\u3055\u308c\u305faction:<input type=\"text\" name=\"action\" value=\"<: $action :>\">\u4efb\u610f\u306e\u82f1\u6570\u5b57<br>\n    \u6307\u5b9a\u3055\u308c\u305fID:<input type=\"text\" name=\"id\" value=\"<: $id :>\">10\u6841\u307e\u3067\u306e\u6574\u6570<br>\n    <button type=\"submit\">\u5909\u66f4\u3059\u308b</button>\n</p></form>\n: }\n```\nPerl6\u3067\u306e\u6587\u5b57\u5217\u306e\u9023\u7d50\u306f`.`\u3067\u306f\u306a\u304f`~`\u3067\u884c\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3001\u7279\u306b\u88dc\u8db3\u3059\u3079\u304d\u6ce8\u610f\u4e8b\u9805\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u30c7\u30e2\u3092\u8d70\u3089\u305b\u308b\u305f\u3081\u306b\u5fc5\u8981\u3067\u3059\u3002\n\n```html:Templates/session.tx\n: cascade Templates::base\n: around main -> {\n<form method=\"POST\" action=\"/session\" enctype=\"multipart/form-data\"><p>\n    <input type=\"text\" name=\"str\" value=\"<: $str :>\">\n    <button type=\"submit\" name=\"action\" value=\"remember\">\u8a18\u61b6</button>\n    <button type=\"submit\" name=\"action\" value=\"forget\">\u6d88\u53bb</button>\n</p></form>\n: }\n```\n\n##\u3000Kolon\u306e\u6587\u6cd5\n- \u95a2\u6570\u3067\u59cb\u307e\u308b\u884c\u306f`:`\u3067\u59cb\u3081\u307e\u3059\u3002\n- HTML\u4e2d\u306b\u95a2\u6570\u306a\u3069\u3092\u57cb\u3081\u8fbc\u307f\u305f\u3044\u5834\u5408\u306f`<: function(some) :>`\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n- \u30b3\u30e1\u30f3\u30c8\u306f\u884c\u982d\u3092`:#`\u3068\u3057\u307e\u3059\u3002\n\n##\u3000\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3078\u306e\u5024\u306e\u6e21\u3057\u65b9\n```\nmy $render = $tx->render( 'Templates/*.tx', {\n    title   => decode_utf8('UTF-8\u306a\u6587\u5b57\u5217\u306f\u30c7\u30b3\u30fc\u30c9\u5fc5\u9808'),\n    list    => $arrayref || \\@array,\n    hash    => $hashref || \\%hash,\n    str     => $str,\n} );\n```\n- \u3053\u3053\u306b\u304d\u3066`decode_utf8()`\u304c\u5fc5\u9808[^7]\u306b\u306a\u308a\u307e\u3059\u3002\n- \u8fd4\u308a\u5024\u306f\u30c7\u30b3\u30fc\u30c9\u6e08\u307fUTF-8\u3067\u3059\u306e\u3067`encode_utf8()`\u51e6\u7406\u304c\u8868\u793a\u307e\u3067\u306b\u5fc5\u8981\u3067\u3059\u3002\n- \u914d\u5217\u3084\u30cf\u30c3\u30b7\u30e5\u306a\u3069\u306f\u53c2\u7167\u6e21\u3057\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n[^7]: `use utf8`\u3057\u3066\u3044\u308b\u5834\u5408\u3092\u9664\u304f\u3002\u3053\u306e\u5834\u5408\u306e\u691c\u8a3c\u306f\u3057\u3066\u307e\u305b\u3093\u3002\n\n**\u306d\u3001\u7c21\u5358\u3067\u3057\u3087\u3046\uff1f**\u3042\u306a\u305f\u3082\u59cb\u3081\u3088\u3046\uff01PSGI\uff01\n\n## \u6b21\u7ae0\n[PSGI\u5165\u9580\u7b2c\u4e94\u7ae0 Log::Dispatch::Config\u3067\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u3092\u53d6\u308b](http://qiita.com/worthmine/items/c1434a7b8b63d53b7caf)\n\n# \u5ba3\u4f1d\n\u672c\u8a18\u4e8b\u306f\u81ea\u524d\u3067\u6709\u6599Web\u30b5\u30fc\u30d3\u30b9\u3092Perl\u3067\u66f8\u3044\u3066\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u306b\u8fba\u308a\u3001\u3064\u307e\u3065\u3044\u305f\u70b9\u3084\u6c17\u3065\u3044\u305f\u3053\u3068\u3092\u5171\u6709\u3059\u308b\u76ee\u7684\u3067\u66f8\u304d\u59cb\u3081\u307e\u3057\u305f\u3002\n\n![worthmine-qiita.png](https://qiita-image-store.s3.amazonaws.com/0/10766/370df067-1108-c7b8-2ea3-59ab11155660.png)\u3053\u3061\u3089\u306eQR\u30b3\u30fc\u30c9\u3092\u30b9\u30de\u30db\u3067\u8aad\u307f\u53d6\u308a\u3001\n\u8208\u5473\u3092\u6301\u3063\u305f\u65b9\u306f<https://qrown.me>\u307e\u3067\u305c\u3072\u304a\u7acb\u3061\u5bc4\u308a\u304f\u3060\u3055\u3044\uff01\n", "tags": ["Perl", "PSGI", "Cgi", "plack", "xslate"]}