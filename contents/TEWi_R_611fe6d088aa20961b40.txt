{"context": "\n\n\u6982\u8981\n\u5b9f\u884c\u74b0\u5883\u306fLinux\u3067\u3001\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306f\u4f7f\u3044\u6163\u308c\u305fMac\u4e0a\u306e\u30a8\u30c7\u30a3\u30bf\u3067\u884c\u3044\u305f\u3044\u3002\n\u305d\u3053\u3067\u3001VMware Fusion\u4e0a\u306eCentOS\u306bSamba\u3067\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u308a\nMac\u4e0a\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\u3067\u304d\u308b\u3088\u3046\u3059\u308b\u3002\n\n\u74b0\u5883\nMac OS X 10.11.6\nCentOS 7.2.1511 \n\nsamba\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum install samba\n\n# \u81ea\u52d5\u8d77\u52d5\nsystemctl enable smb\n# sudo chkconfig smb on # CentOS6\u4ee5\u524d\n\n\n\u5171\u6709\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\nmkdir /home/samba\nsudo chmod -R 0777 /home/samba/\nsudo shown -R nobody:nobody /home/samba\n\nSELinux\u306e\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u4e0a\u8a18\u3067\u6a29\u9650\u3092\u5909\u66f4\u3057\u3066\u3082\u3001\u8aad\u307f\u66f8\u304d\u304c\u3067\u304d\u306a\u3044\n# SELinux\u306e\u8a2d\u5b9a\nsudo chcon -t samba_share_t /home/samba/ # \u7279\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\n# \u3042\u308b\u3044\u306f\n# setsebool -P samba_enable_home_dirs on # home\u4ee5\u4e0b\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\n\n\nsamba\u306e\u521d\u671f\u8a2d\u5b9a\n# smb.conf\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\nsudo cp -ap /etc/samba/smb.conf /etc/samba/smb.conf.bk\n\n# smb.conf\u3092\u7de8\u96c6\nsudo vi /etc/samba/smb.conf\n\n\nsmb.conf\n; ===== \u4ee5\u4e0b\u3092\u8ffd\u8a18 =====\n[samba]\n        comment = samba directory\n        path = /home/samba\n        public = yes\n        browseable = yes\n        writable = yes\n        hosts allow = 127. 192.168. # \u5185\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306e\u307f\u8a31\u53ef\n\n\n# smb.conf\u306e\u8a18\u8ff0\u30df\u30b9\u3092\u30c1\u30a7\u30c3\u30af\ntestparm\n\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0\n# \u65e2\u5b58\u30e6\u30fc\u30b6\u300cuser-name\u300d\u3092\u8ffd\u52a0\nsudo pdbedit -a user-name\n\n# samba\u3092\u518d\u8d77\u52d5\nsystemctl restart smb\n# /etc/init.d/smb restart # CentOS6\u4ee5\u524d\n\n\n\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u306e\u8a2d\u5b9a\nCentOS7\u304b\u3089\u306fiptables\u304b\u3089firewalld\u3078\u3068\u79fb\u884c\u3057\u305f\u3089\u3057\u3044\u3002\n\u3069\u3061\u3089\u304b\u3092\u4f7f\u3046\u3002\n\n1. firewalld\u306e\u5834\u5408\uff08CentOS7\uff09\nfirewall-cmd --permanent --zone=public --add-service=samba\nfirewall-cmd --reload\n\n\n2. iptables\u306e\u5834\u5408\n# firewalld\u3092\u7121\u52b9\u306b\nsystemctl stop firewalld # CentOS7\nsystemctl disable firewalld # CentOS7\n\n# iptables\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum install iptables-services\n\n# iptable\u3092\u7de8\u96c6\u3001\u3042\u308b\u3044\u306f\u4f5c\u6210\nsudo vi /etc/sysconfig/iptables\n\niptables\u306e\u5185\u5bb9\u306f\u3053\u3053\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3082\u306e\u3092\u305d\u306e\u307e\u307e\u4f7f\u3044\u307e\u3057\u305f\u3002\n# \u81ea\u52d5\u8d77\u52d5\nsystemctl enable iptables\nsystemctl start iptables\n# sudo /etc/init.d/iptables restart # CentOS6\u4ee5\u524d\n\n\nMac\u5074\u304b\u3089\u63a5\u7d9a\nFinder\u2192\u300c\u30b5\u30fc\u30d0\u3078\u63a5\u7d9a\u300d\u304b\u3089\u30de\u30a6\u30f3\u30c8\u3067\u304d\u308c\u3070\u6210\u529f\n\n\u53c2\u8003\n\nMac(OS X)\u3068VMWare Fusion7(CentOS5.3)\u3067\u958b\u767a\u74b0\u5883\u3092\u4f5c\u308b-Samba\u8a2d\u5b9a\u3001iptables\u7de8\u96c6\u3001\u304b\u3089\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\nsamba\u30b5\u30fc\u30d0\u306b\u3088\u308b\u30d5\u30a1\u30a4\u30eb\u5171\u6709\u74b0\u5883\u306e\u69cb\u7bc9\u624b\u9806\u30e1\u30e2\nCentOS\u4e0a\u3067SAMBA\u30b5\u30fc\u30d0\u3092\u7acb\u3061\u3042\u3052\u3066Windows\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30e1\u30e2\nCentOS7, iptables\u8a2d\u5b9a\u3067\u30cf\u30de\u3063\u305f\n\n\n## \u6982\u8981\n\n\u5b9f\u884c\u74b0\u5883\u306fLinux\u3067\u3001\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306f\u4f7f\u3044\u6163\u308c\u305fMac\u4e0a\u306e\u30a8\u30c7\u30a3\u30bf\u3067\u884c\u3044\u305f\u3044\u3002\n\n\u305d\u3053\u3067\u3001VMware Fusion\u4e0a\u306eCentOS\u306bSamba\u3067\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u308a\nMac\u4e0a\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\u3067\u304d\u308b\u3088\u3046\u3059\u308b\u3002\n\n## \u74b0\u5883\n\nMac OS X 10.11.6\nCentOS 7.2.1511 \n\n## samba\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nsudo yum install samba\n```\n\n```\n# \u81ea\u52d5\u8d77\u52d5\nsystemctl enable smb\n# sudo chkconfig smb on # CentOS6\u4ee5\u524d\n```\n\n\n## \u5171\u6709\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n```\nmkdir /home/samba\nsudo chmod -R 0777 /home/samba/\nsudo shown -R nobody:nobody /home/samba\n```\n\nSELinux\u306e\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u4e0a\u8a18\u3067\u6a29\u9650\u3092\u5909\u66f4\u3057\u3066\u3082\u3001\u8aad\u307f\u66f8\u304d\u304c\u3067\u304d\u306a\u3044\n\n```\n# SELinux\u306e\u8a2d\u5b9a\nsudo chcon -t samba_share_t /home/samba/ # \u7279\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\n# \u3042\u308b\u3044\u306f\n# setsebool -P samba_enable_home_dirs on # home\u4ee5\u4e0b\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\n```\n\n\n## samba\u306e\u521d\u671f\u8a2d\u5b9a\n```\n# smb.conf\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\nsudo cp -ap /etc/samba/smb.conf /etc/samba/smb.conf.bk\n```\n\n```\n# smb.conf\u3092\u7de8\u96c6\nsudo vi /etc/samba/smb.conf\n```\n\n```smb.conf\n; ===== \u4ee5\u4e0b\u3092\u8ffd\u8a18 =====\n[samba]\n        comment = samba directory\n        path = /home/samba\n        public = yes\n        browseable = yes\n        writable = yes\n        hosts allow = 127. 192.168. # \u5185\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306e\u307f\u8a31\u53ef\n```\n\n```\n# smb.conf\u306e\u8a18\u8ff0\u30df\u30b9\u3092\u30c1\u30a7\u30c3\u30af\ntestparm\n```\n\n## \u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0\n\n```\n# \u65e2\u5b58\u30e6\u30fc\u30b6\u300cuser-name\u300d\u3092\u8ffd\u52a0\nsudo pdbedit -a user-name\n```\n\n```\n# samba\u3092\u518d\u8d77\u52d5\nsystemctl restart smb\n# /etc/init.d/smb restart # CentOS6\u4ee5\u524d\n```\n\n## \u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u306e\u8a2d\u5b9a\n\nCentOS7\u304b\u3089\u306fiptables\u304b\u3089firewalld\u3078\u3068\u79fb\u884c\u3057\u305f\u3089\u3057\u3044\u3002\n\u3069\u3061\u3089\u304b\u3092\u4f7f\u3046\u3002\n\n### 1. firewalld\u306e\u5834\u5408\uff08CentOS7\uff09\n```\nfirewall-cmd --permanent --zone=public --add-service=samba\nfirewall-cmd --reload\n```\n\n### 2. iptables\u306e\u5834\u5408\n```\n# firewalld\u3092\u7121\u52b9\u306b\nsystemctl stop firewalld # CentOS7\nsystemctl disable firewalld # CentOS7\n```\n\n```\n# iptables\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum install iptables-services\n```\n\n```\n# iptable\u3092\u7de8\u96c6\u3001\u3042\u308b\u3044\u306f\u4f5c\u6210\nsudo vi /etc/sysconfig/iptables\n```\n\n\n\niptables\u306e\u5185\u5bb9\u306f[\u3053\u3053](http://tweeeety.hateblo.jp/entry/2014/09/22/173823)\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3082\u306e\u3092\u305d\u306e\u307e\u307e\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n```\n# \u81ea\u52d5\u8d77\u52d5\nsystemctl enable iptables\nsystemctl start iptables\n# sudo /etc/init.d/iptables restart # CentOS6\u4ee5\u524d\n```\n\n## Mac\u5074\u304b\u3089\u63a5\u7d9a\nFinder\u2192\u300c\u30b5\u30fc\u30d0\u3078\u63a5\u7d9a\u300d\u304b\u3089\u30de\u30a6\u30f3\u30c8\u3067\u304d\u308c\u3070\u6210\u529f\n\n## \u53c2\u8003\n\n- [Mac(OS X)\u3068VMWare Fusion7(CentOS5.3)\u3067\u958b\u767a\u74b0\u5883\u3092\u4f5c\u308b-Samba\u8a2d\u5b9a\u3001iptables\u7de8\u96c6\u3001\u304b\u3089\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b]\n(http://tweeeety.hateblo.jp/entry/2014/09/22/173823)\n- [samba\u30b5\u30fc\u30d0\u306b\u3088\u308b\u30d5\u30a1\u30a4\u30eb\u5171\u6709\u74b0\u5883\u306e\u69cb\u7bc9\u624b\u9806\u30e1\u30e2]\n(http://www.virment.com/config-sambaserver/)\n- [CentOS\u4e0a\u3067SAMBA\u30b5\u30fc\u30d0\u3092\u7acb\u3061\u3042\u3052\u3066Windows\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30e1\u30e2]\n(http://futurismo.biz/archives/1390)\n- [CentOS7, iptables\u8a2d\u5b9a\u3067\u30cf\u30de\u3063\u305f]\n(http://mosuke5.hateblo.jp/entry/2014/09/20/180326)\n", "tags": ["Mac", "samba", "OSX", "CentOS"]}