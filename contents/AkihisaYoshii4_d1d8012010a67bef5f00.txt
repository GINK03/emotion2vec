{"context": "\n\n\u306a\u306b\u3053\u308c\n\n\u9577\u3044\u52d5\u753b\u3092\u6307\u5b9a\u6642\u9593\u3054\u3068\u306b\u5206\u5272\u3067\u304d\u308b\u3002\n\n-c copy\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u5272\u308a\u3068\u306f\u3084\u3044\u3002\n\u306a\u3093\u304b\u3042\u3063\u305f\u3089\u6016\u3044\u304b\u3089\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u7a7a\u767d\u3092\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306b\u7f6e\u63db\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u540c\u68b1\u3002\n\u3076\u3063\u3061\u3083\u3051\u3001\u7a7a\u767d\u6f70\u3057\u3060\u3051\u3067\u3082\u4fbf\u5229\u3002\n\u4f55\u304b\u3042\u308c\u3070\u3001\u307c\u304f\u306eGithub\u30a2\u30ab\u30a6\u30f3\u30c8\u3002\n\u3053\u3063\u3061\u306e\u307b\u3046\u304c\u9023\u7d61\u3064\u304f\u3001\u307c\u304f\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u3002\n\n\n\u52d5\u4f5c\u74b0\u5883\n\nLinux localhost 2.6.32-642.11.1.el6.i686 #1 SMP Fri Nov 18 18:48:28 UTC 2016 i686 i686 i386 GNU/Linux\nffmpeg-3.1.2 (\u81ea\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u62fe\u3063\u305f)\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n\u7a7a\u767d\u6f70\u3057\n\nrename.pl\n#!/usr/bin/env perl\n\n#Current Directory\u306b\u3042\u308b\u6307\u5b9a\u3057\u305f\u62e1\u5f35\u5b50\u306e\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u7a7a\u767d\u3092\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306b\u5168\u7f6e\u63db\n\n#\u62e1\u5f35\u5b50\u6307\u5b9a\n$stat='mp4';\n$fl='*'.'.'.$stat.'*';\n\n@file=glob $fl;\n\nforeach(@file){\n    $new=$_;\n    $new=~s!\\s!_!g;\n    print $_.\"-\".$new.\"\\n\";\n    system(\"mv \\\"$_\\\" $new\");\n}\n\n\n\n\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u5206\u5272\n\nsplit.pl\n#!/usr/bin/env perl\n\n#\n# \u52d5\u753b\u3092\u5206\u5272\u3059\u308b Perl Script\n# \u5143\u30d5\u30a1\u30a4\u30eb\u304c\"sample_data.mp4\"\u306e\u3068\u304d\u3001\n# \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306f\"sample_data_0.mp4\",\"sample_data_1.mp4\",...\n# \u3067\u3042\u308b\u3002\n#\n\n# $of \u30d5\u30a1\u30a4\u30eb\u540d\n# $of_ka \u62e1\u5f35\u5b50\nmy $of=\"sample_data\";\nmy $of_ka=\".mp4\";\nmy $rf=$of.$of_ka;\n\n# \u4f55\u79d2\u3054\u3068\u306b\u5206\u5272\u3059\u308b\u304b\nmy $split_sec=20*60;\n\n# ffmpeg \u30b3\u30de\u30f3\u30c9 \n# -i:\u5165\u529b\u30d5\u30a1\u30a4\u30eb\nmy $ffmpeg=\"/opt/ffmpeg_build/bin/ffmpeg -i $rf\";\n\n# \u5143\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u9577\u3055\nmy $max_sec=&count_time;\n\nfor(my $i=0,$j=0;;$i+=$split_sec,$j++){\n    #\u5143\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u3088\u308a\u3082\u5f8c\u308d\u306e\u90e8\u5206\u3092\u5207\u308a\u53d6\u308d\u3046\u3068\u3057\u305f\u3089\u3001\u7d42\u4e86\n    if($i>$max_sec+1){\n        last;\n    }\n\n    #\u30aa\u30d7\u30b7\u30e7\u30f3\n    #\u914d\u5217\u306b\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u597d\u307f\u3067\u5909\u66f4\u3067\u304d\u308b\n    #-c :codec\u306e\u30b3\u30d4\u30fc\n    #-ss:\u6307\u5b9a\u3057\u305f\u6642\u9593\u304b\u3089\u5909\u63db\u3092\u59cb\u3081\u308b\n    #-t :\u6307\u5b9a\u79d2\u5909\u63db\u3059\u308b\n    my @option1=(\"-c copy\",\"-ss $i\",\"-t $split_sec\");\n\n    my $option=&mkop(\\@option1);\n\n    #\u30b3\u30de\u30f3\u30c9\u4f5c\u6210\n    $exe=$ffmpeg.$option;\n    #\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\n    $exe.=\" $of\".\"_\".$j.$of_ka;\n\n    #\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n    print $exe.\"\\n\";\n    print \"system=\".system($exe).\"\\n\";\n}\n\n#\u30aa\u30d7\u30b7\u30e7\u30f3\u4f5c\u6210\nsub mkop{\n    my ($op)=@_;\n    my $cmd=\"\";\n\n    foreach(@$op){\n        $cmd.=\" \".$_;\n    }\n\n    return $cmd;\n}\n\n#\u52d5\u753b\u306e\u9577\u3055\u3092\u53d6\u5f97(\u5358\u4f4d:\u79d2)\nsub count_time{\n    my $from_time=`$ffmpeg 2>&1 | grep Duration |cut -c 13-20`;\n    my @time=split(/:/,$from_time);\n    my $max_sec=0;\n    foreach(@time){\n        $max_sec*=60;\n        $max_sec+=$_;\n    }\n\n    return $max_sec;\n}\n\n\n\n\n\u306a\u305cCPAN\u3068\u304b\u306emodule\u3092\u4f7f\u308f\u306a\u3044\uff1f\n\n\u3081\u3093\u3069\u304f\u3055\u3044\n\u4ed6\u74b0\u5883\u3078\u306e\u79fb\u884c\u306b\u624b\u9593\u304c\u304b\u304b\u308b\n\n\n\u6ce8\u610f\u70b9\n\nffmpeg\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u3068\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u308a\u3001\u52d5\u753b\u306e\u9577\u3055\u304c\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3002\nCentOS6.8\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308bRepository\u3060\u3068\u53e4\u3044\u306e\u3067\u3001\u81ea\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u9811\u5f35\u3063\u3066\u63a2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6d3e\u624b\u306b\u6a19\u6e96\u51fa\u529b\u3059\u308b\u306e\u3067\u3001nohup\u30b3\u30de\u30f3\u30c9\u3092\u3046\u307e\u3044\u3053\u3068\u5229\u7528\u3059\u308b\u3068\u4fbf\u5229\uff01\n\u4f55\u304b\u554f\u984c\u304c\u3042\u308c\u3070\u6d88\u3057\u307e\u3059\u3002\n\n\n\u611f\u60f3\n\nPerl\u306f\u3044\u3044\u305e\n\n#\u306a\u306b\u3053\u308c\n\n* \u9577\u3044\u52d5\u753b\u3092\u6307\u5b9a\u6642\u9593\u3054\u3068\u306b\u5206\u5272\u3067\u304d\u308b\u3002\n* `-c copy`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u5272\u308a\u3068\u306f\u3084\u3044\u3002\n* \u306a\u3093\u304b\u3042\u3063\u305f\u3089\u6016\u3044\u304b\u3089\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u7a7a\u767d\u3092\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306b\u7f6e\u63db\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u540c\u68b1\u3002\n* \u3076\u3063\u3061\u3083\u3051\u3001\u7a7a\u767d\u6f70\u3057\u3060\u3051\u3067\u3082\u4fbf\u5229\u3002\n* \u4f55\u304b\u3042\u308c\u3070\u3001[\u307c\u304f\u306eGithub\u30a2\u30ab\u30a6\u30f3\u30c8](https://github.com/Hukanzen)\u3002\n* \u3053\u3063\u3061\u306e\u307b\u3046\u304c\u9023\u7d61\u3064\u304f\u3001[\u307c\u304f\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8](https://twitter.com/AkihisaYoshii4)\u3002\n\n#\u52d5\u4f5c\u74b0\u5883\n\n* Linux localhost 2.6.32-642.11.1.el6.i686 #1 SMP Fri Nov 18 18:48:28 UTC 2016 i686 i686 i386 GNU/Linux\n* ffmpeg-3.1.2 (\u81ea\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u62fe\u3063\u305f)\n\n#\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n#####\u7a7a\u767d\u6f70\u3057\n```perl:rename.pl\n#!/usr/bin/env perl\n\n#Current Directory\u306b\u3042\u308b\u6307\u5b9a\u3057\u305f\u62e1\u5f35\u5b50\u306e\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u7a7a\u767d\u3092\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306b\u5168\u7f6e\u63db\n\n#\u62e1\u5f35\u5b50\u6307\u5b9a\n$stat='mp4';\n$fl='*'.'.'.$stat.'*';\n\n@file=glob $fl;\n\nforeach(@file){\n\t$new=$_;\n\t$new=~s!\\s!_!g;\n\tprint $_.\"-\".$new.\"\\n\";\n\tsystem(\"mv \\\"$_\\\" $new\");\n}\n```\n\n#####\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u5206\u5272\n```perl:split.pl\n#!/usr/bin/env perl\n\n#\n# \u52d5\u753b\u3092\u5206\u5272\u3059\u308b Perl Script\n# \u5143\u30d5\u30a1\u30a4\u30eb\u304c\"sample_data.mp4\"\u306e\u3068\u304d\u3001\n# \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306f\"sample_data_0.mp4\",\"sample_data_1.mp4\",...\n# \u3067\u3042\u308b\u3002\n#\n\n# $of \u30d5\u30a1\u30a4\u30eb\u540d\n# $of_ka \u62e1\u5f35\u5b50\nmy $of=\"sample_data\";\nmy $of_ka=\".mp4\";\nmy $rf=$of.$of_ka;\n \n# \u4f55\u79d2\u3054\u3068\u306b\u5206\u5272\u3059\u308b\u304b\nmy $split_sec=20*60;\n\n# ffmpeg \u30b3\u30de\u30f3\u30c9 \n# -i:\u5165\u529b\u30d5\u30a1\u30a4\u30eb\nmy $ffmpeg=\"/opt/ffmpeg_build/bin/ffmpeg -i $rf\";\n\n# \u5143\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u9577\u3055\nmy $max_sec=&count_time;\n\nfor(my $i=0,$j=0;;$i+=$split_sec,$j++){\n\t#\u5143\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u3088\u308a\u3082\u5f8c\u308d\u306e\u90e8\u5206\u3092\u5207\u308a\u53d6\u308d\u3046\u3068\u3057\u305f\u3089\u3001\u7d42\u4e86\n\tif($i>$max_sec+1){\n\t\tlast;\n\t}\n\n\t#\u30aa\u30d7\u30b7\u30e7\u30f3\n\t#\u914d\u5217\u306b\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u597d\u307f\u3067\u5909\u66f4\u3067\u304d\u308b\n\t#-c :codec\u306e\u30b3\u30d4\u30fc\n\t#-ss:\u6307\u5b9a\u3057\u305f\u6642\u9593\u304b\u3089\u5909\u63db\u3092\u59cb\u3081\u308b\n\t#-t :\u6307\u5b9a\u79d2\u5909\u63db\u3059\u308b\n\tmy @option1=(\"-c copy\",\"-ss $i\",\"-t $split_sec\");\n\n\tmy $option=&mkop(\\@option1);\n\n\t#\u30b3\u30de\u30f3\u30c9\u4f5c\u6210\n\t$exe=$ffmpeg.$option;\n\t#\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\n\t$exe.=\" $of\".\"_\".$j.$of_ka;\n\n\t#\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n\tprint $exe.\"\\n\";\n\tprint \"system=\".system($exe).\"\\n\";\n}\n\n#\u30aa\u30d7\u30b7\u30e7\u30f3\u4f5c\u6210\nsub mkop{\n\tmy ($op)=@_;\n\tmy $cmd=\"\";\n\n\tforeach(@$op){\n\t\t$cmd.=\" \".$_;\n\t}\n\n\treturn $cmd;\n}\n\n#\u52d5\u753b\u306e\u9577\u3055\u3092\u53d6\u5f97(\u5358\u4f4d:\u79d2)\nsub count_time{\n\tmy $from_time=`$ffmpeg 2>&1 | grep Duration |cut -c 13-20`;\n\tmy @time=split(/:/,$from_time);\n\tmy $max_sec=0;\n\tforeach(@time){\n\t\t$max_sec*=60;\n\t\t$max_sec+=$_;\n\t}\n\n\treturn $max_sec;\n}\n\n```\n\n#\u306a\u305cCPAN\u3068\u304b\u306emodule\u3092\u4f7f\u308f\u306a\u3044\uff1f\n\n* \u3081\u3093\u3069\u304f\u3055\u3044\n* \u4ed6\u74b0\u5883\u3078\u306e\u79fb\u884c\u306b\u624b\u9593\u304c\u304b\u304b\u308b\n\n#\u6ce8\u610f\u70b9\n\n* ffmpeg\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u3068\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u308a\u3001\u52d5\u753b\u306e\u9577\u3055\u304c\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3002\n* CentOS6.8\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308bRepository\u3060\u3068\u53e4\u3044\u306e\u3067\u3001\u81ea\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u9811\u5f35\u3063\u3066\u63a2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n* \u6d3e\u624b\u306b\u6a19\u6e96\u51fa\u529b\u3059\u308b\u306e\u3067\u3001`nohup`\u30b3\u30de\u30f3\u30c9\u3092\u3046\u307e\u3044\u3053\u3068\u5229\u7528\u3059\u308b\u3068\u4fbf\u5229\uff01\n* \u4f55\u304b\u554f\u984c\u304c\u3042\u308c\u3070\u6d88\u3057\u307e\u3059\u3002\n\n#\u611f\u60f3\n* Perl\u306f\u3044\u3044\u305e\n", "tags": ["ffmpeg", "Perl", "CentOS", "Linux"]}