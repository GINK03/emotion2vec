{"context": "\n\n\u3000\u6ce8\u610f\n\u5185\u5bb9\u304c\u30b0\u30c0\u30b0\u30c0\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306b\u66f8\u304d\u76f4\u3057\u307e\u3057\u305f\u3002\nRuby\u6587\u5b57\u30a8\u30f3\u30b3\u30fc\u30c9\u306b\u60a9\u307e\u3055\u308c\u3001\u76f4\u63a5\u6307\u5b9a\u3084nkf\u306b\u3088\u308b\u63a8\u6e2c\u306a\u3069\u3092\u8a66\u3057\u305f\nhttp://qiita.com/rojiuratech/items/9d40cb294eb08f2204ac\n\n\u6982\u8981\nRuby\u3067UTF-8\u3067\u306f\u306a\u3044CSV\u3092\u8aad\u307f\u8fbc\u307f\u3001\u53d6\u308a\u6271\u3046\u8a71\u3002\n\u76f4\u63a5\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u305f\u3089\u30c0\u30e1\u3060\u3063\u305f\u304c\u3002\u4e00\u65e6\u5909\u63db\u639b\u3051\u3066\u3066\u304b\u3089\u6271\u3048\u3070\n\u3059\u3093\u306a\u308a\u3068\u901a\u3063\u305f\u3002\n\n\u74b0\u5883\n\nruby 2.2.3\n\n\nCSV\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3001UTF-8\u3067\u306a\u3044CSV\u304c\u8aad\u307f\u8fbc\u3081\u306a\u3044\u3002\n\u4ed6\u90e8\u9580\u306fWindowsPC\u3092\u4f7f\u3063\u3066\u304a\u308a\u3001MS-Excel\u3067CSV\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001Shift_JIS\u3067\u4fdd\u5b58\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3068\u3053\u308d\u304c\u3001Ruby\u306b\u6700\u521d\u304b\u3089\u3042\u308bCSV\u30af\u30e9\u30b9\u3067\u3001UTF-8\u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3053\u3046\u3068\u3059\u308b\u3068\u30fb\u30fb\u30fb\u3002\n\n\u30a8\u30e9\u30fc\u629c\u7c8b\n/ruby/2.2.0/csv.rb:2007:in `=~': invalid byte sequence in UTF-8 (ArgumentError)\nrom read_csv.rb:3:in `<main>'\n\n\n\u306a\u3069\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3002\n\n\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\nrequire \"csv\"\n\ndata = CSV.read(ARGV[0])\n\ndata.each do |str|\n  p str.toutf8\nend\n\n\nUTF-8\u7684\u306b\u6b63\u3057\u304f\u306a\u3044\u30d0\u30a4\u30c8\u30b7\u30fc\u30b1\u30f3\u30b9\u304c\u6df7\u3058\u3063\u3066\u3044\u3066\u3001\u305d\u3053\u3067\u30b3\u30b1\u305f\u3088\u3046\u3067\u3059\u3002\n\u3053\u306e\u8fba\u308a\u306f\u4e0b\u8a18\u30ea\u30f3\u30af\u3067\u3082\u8ff0\u3079\u3089\u308c\u3066\u3044\u307e\u3059\u3002\nsonnets:blog\nRuby \u306e invalid byte sequence in UTF-8 \u4f8b\u5916\u3092 encode(\"UTF-8\", \"UTF-8\") \u3067\u56de\u907f\u3059\u308b\u306e\u306f\u304a\u304b\u3057\u3044\u3088\u3001\u3068\u3044\u3046\u8a71\nhttp://blog.livedoor.jp/sonots/archives/23652294.html\n\u3002\n\n\u904e\u53bb\u3084\u3063\u3066\u3044\u305f\u3001\u3072\u3069\u3044\u5bfe\u5fdc\nCSV\u30d5\u30a1\u30a4\u30eb\u3092\u30a8\u30af\u30bb\u30eb\u3067\u8aad\u307f\u8fbc\u3093\u3067\u3001\u305d\u308c\u3092xlsx\u5f62\u5f0f\u3067\u4fdd\u5b58\u3057\u3001\nroo\uff08ruby\u4e0a\u3067\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092\u6271\u3046Gem\uff09\u3092\u4f7f\u3063\u3066\u8aad\u307f\u8fbc\u307f\u30a4\u30f3\u30dd\u30fc\u30c8\u30fb\u30fb\u30fb\u3002\u306a\u3069\u306e\u3001\u3084\u3080\u3092\u3048\u306a\u3044\u3051\u3069\u610f\u8b58\u4f4e\u3044\u3053\u3068\u3092\u3084\u3063\u3066\u305f\u3002\n\n\u5148\u65e5\u306ekawasaki.rb\u3067\u3001\u6587\u5b57\u30b3\u30fc\u30c9\u306e\u5909\u63db\u8a71\u304c\u51fa\u305f\n\u30d1\u30fc\u30d5\u30a7\u30af\u30c8Ruby\u3067\u3001\u6587\u5b57\u5217\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3057\u3066\u3001\u540c\u3058\u5024\u304b\u6bd4\u8f03\u3059\u308b\u30fb\u30fb\u30fb\u3002\u307f\u305f\u3044\u306a\u8a71\u304c\u51fa\u3066\u304d\u305f\u3002\n\u306a\u3089\u3001\u6587\u5b57\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3057\u3066\u4e0e\u3048\u308c\u3070\u826f\u3044\u306e\u3067\u306f\uff1f\uff01\n\n\u65b9\u91dd\n\u8aad\u307f\u8fbc\u3080CSV\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u305f\u3060\u306e\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u8aad\u307f\u8fbc\u3080\u3002\n\u3053\u306e\u6642\u3001\u6587\u5b57\u30b3\u30fc\u30c9\u3092UTF-8\u306b\u3057\u3066\u8aad\u3080\u3002\nUTF-8\u306b\u5909\u63db\u5f8c\u306e\u30c7\u30fc\u30bf\u3092\u3001CSV\u30af\u30e9\u30b9\u3067\u6271\u3046\u3002\n\u8ffd\u8a18\uff01\u3000\u6b63\u3057\u304f\u306f File.read \u3067\u3059\u3002\n\nCSV\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u3001\u5909\u63db\u30b9\u30af\u30ea\u30d7\u30c8\n# \u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\nrequire 'kconv'\nrequire 'csv'\n\n#\u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u53d7\u3051\u53d6\u308b\nread_file = ARGV[0]\n\n# \u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\nraw_str = \"\"\n\n#\u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u4e00\u5ea6\u306b\u8aad\u307f\u8fbc\u3080\nraw_str = File.read(read_file)\n\n\n# raw_str = File.open(read_file)\n#\u3000\u8aad\u307f\u8fbc\u3093\u3060\u3082\u306e\u3092\u914d\u5217\u5316\nmod_str = CSV.parse(raw_str)\n\n#1\u884c\u305a\u3064\u8868\u793a\u3059\u308b\ni = 0\nmod_str.each do |str|\n  p i\n  p str\n  i = i + 1\nend\n\n\n\u305f\u3081\u3057\u306b\u3088\u307f\u3053\u3080\u30d5\u30a1\u30a4\u30eb\n\n\u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\n\u54c1\u540d,\u7a2e\u985e,\u5024\u6bb5\n\u68cd\u68d2,\u6b66\u5668,60\n\u85ac\u8349,drug,10\n\u6bd2\u8349,drug,1\n,(\u7a7a\u6b04\uff09,2000\n\u3044\u3064\u3082\u306e,\u4f55\u304b,45\u304f\u3089\u3044\n,,\n\n\n\n\u5b9f\u884c\u7d50\u679c\n$ ruby read_sjis.rb fake_euc.csv\n0\n[\"\u54c1\u540d\", \"\u7a2e\u985e\", \"\u5024\u6bb5\"]\n1\n[\"\u68cd\u68d2\", \"\u6b66\u5668\", \"60\"]\n2\n[\"\u85ac\u8349\", \"drug\", \"10\"]\n3\n[\"\u6bd2\u8349\", \"drug\", \"1\"]\n4\n[nil, \"(\u7a7a\u6b04\uff09\", \"2000\"]\n5\n[\"\u3044\u3064\u3082\u306e\", \"\u4f55\u304b\", \"45\u304f\u3089\u3044\"]\n6\n[nil, nil, nil]\n\n\n\n\u3053\u306e\u3084\u308a\u65b9\u304c\u771f\u4fa1\u3092\u767a\u63ee\u3059\u308b\u306e\u306f\u30fb\u30fb\u30fb\n\u30bb\u30eb\u5185\u6539\u884c\u3092\u542b\u3080\u30b1\u30fc\u30b9\u3002\u3060\u3068\u601d\u3046\u3002\n\n#\u3000\u6ce8\u610f\n\n\u5185\u5bb9\u304c\u30b0\u30c0\u30b0\u30c0\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306b\u66f8\u304d\u76f4\u3057\u307e\u3057\u305f\u3002\n\nRuby\u6587\u5b57\u30a8\u30f3\u30b3\u30fc\u30c9\u306b\u60a9\u307e\u3055\u308c\u3001\u76f4\u63a5\u6307\u5b9a\u3084nkf\u306b\u3088\u308b\u63a8\u6e2c\u306a\u3069\u3092\u8a66\u3057\u305f\nhttp://qiita.com/rojiuratech/items/9d40cb294eb08f2204ac\n\n# \u6982\u8981\n\nRuby\u3067UTF-8\u3067\u306f\u306a\u3044CSV\u3092\u8aad\u307f\u8fbc\u307f\u3001\u53d6\u308a\u6271\u3046\u8a71\u3002\n\u76f4\u63a5\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u305f\u3089\u30c0\u30e1\u3060\u3063\u305f\u304c\u3002\u4e00\u65e6\u5909\u63db\u639b\u3051\u3066\u3066\u304b\u3089\u6271\u3048\u3070\n\u3059\u3093\u306a\u308a\u3068\u901a\u3063\u305f\u3002\n\n\n\n# \u74b0\u5883\n\n- ruby 2.2.3\n\n# CSV\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3001UTF-8\u3067\u306a\u3044CSV\u304c\u8aad\u307f\u8fbc\u3081\u306a\u3044\u3002\n\n\u4ed6\u90e8\u9580\u306fWindowsPC\u3092\u4f7f\u3063\u3066\u304a\u308a\u3001MS-Excel\u3067CSV\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001Shift_JIS\u3067\u4fdd\u5b58\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u3068\u3053\u308d\u304c\u3001Ruby\u306b\u6700\u521d\u304b\u3089\u3042\u308bCSV\u30af\u30e9\u30b9\u3067\u3001UTF-8\u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3053\u3046\u3068\u3059\u308b\u3068\u30fb\u30fb\u30fb\u3002\n\n```bash:\u30a8\u30e9\u30fc\u629c\u7c8b\n/ruby/2.2.0/csv.rb:2007:in `=~': invalid byte sequence in UTF-8 (ArgumentError)\nrom read_csv.rb:3:in `<main>'\n```\n\n\u306a\u3069\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3002\n\n```bash:\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\nrequire \"csv\"\n\ndata = CSV.read(ARGV[0])\n\ndata.each do |str|\n  p str.toutf8\nend\n```\n\nUTF-8\u7684\u306b\u6b63\u3057\u304f\u306a\u3044\u30d0\u30a4\u30c8\u30b7\u30fc\u30b1\u30f3\u30b9\u304c\u6df7\u3058\u3063\u3066\u3044\u3066\u3001\u305d\u3053\u3067\u30b3\u30b1\u305f\u3088\u3046\u3067\u3059\u3002\n\n\u3053\u306e\u8fba\u308a\u306f\u4e0b\u8a18\u30ea\u30f3\u30af\u3067\u3082\u8ff0\u3079\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\nsonnets:blog\nRuby \u306e invalid byte sequence in UTF-8 \u4f8b\u5916\u3092 encode(\"UTF-8\", \"UTF-8\") \u3067\u56de\u907f\u3059\u308b\u306e\u306f\u304a\u304b\u3057\u3044\u3088\u3001\u3068\u3044\u3046\u8a71\n\nhttp://blog.livedoor.jp/sonots/archives/23652294.html\n\n\u3002\n\n# \u904e\u53bb\u3084\u3063\u3066\u3044\u305f\u3001\u3072\u3069\u3044\u5bfe\u5fdc\n\nCSV\u30d5\u30a1\u30a4\u30eb\u3092\u30a8\u30af\u30bb\u30eb\u3067\u8aad\u307f\u8fbc\u3093\u3067\u3001\u305d\u308c\u3092xlsx\u5f62\u5f0f\u3067\u4fdd\u5b58\u3057\u3001\nroo\uff08ruby\u4e0a\u3067\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092\u6271\u3046Gem\uff09\u3092\u4f7f\u3063\u3066\u8aad\u307f\u8fbc\u307f\u30a4\u30f3\u30dd\u30fc\u30c8\u30fb\u30fb\u30fb\u3002\u306a\u3069\u306e\u3001\u3084\u3080\u3092\u3048\u306a\u3044\u3051\u3069\u610f\u8b58\u4f4e\u3044\u3053\u3068\u3092\u3084\u3063\u3066\u305f\u3002\n\n# \u5148\u65e5\u306ekawasaki.rb\u3067\u3001\u6587\u5b57\u30b3\u30fc\u30c9\u306e\u5909\u63db\u8a71\u304c\u51fa\u305f\n\n\u30d1\u30fc\u30d5\u30a7\u30af\u30c8Ruby\u3067\u3001\u6587\u5b57\u5217\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3057\u3066\u3001\u540c\u3058\u5024\u304b\u6bd4\u8f03\u3059\u308b\u30fb\u30fb\u30fb\u3002\u307f\u305f\u3044\u306a\u8a71\u304c\u51fa\u3066\u304d\u305f\u3002\n\n\u306a\u3089\u3001\u6587\u5b57\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3057\u3066\u4e0e\u3048\u308c\u3070\u826f\u3044\u306e\u3067\u306f\uff1f\uff01\n\n# \u65b9\u91dd\n\n\u8aad\u307f\u8fbc\u3080CSV\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u305f\u3060\u306e\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u8aad\u307f\u8fbc\u3080\u3002\n\u3053\u306e\u6642\u3001\u6587\u5b57\u30b3\u30fc\u30c9\u3092UTF-8\u306b\u3057\u3066\u8aad\u3080\u3002\nUTF-8\u306b\u5909\u63db\u5f8c\u306e\u30c7\u30fc\u30bf\u3092\u3001CSV\u30af\u30e9\u30b9\u3067\u6271\u3046\u3002\n\n\u8ffd\u8a18\uff01\u3000\u6b63\u3057\u304f\u306f `File.read` \u3067\u3059\u3002\n\n```ruby:CSV\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u3001\u5909\u63db\u30b9\u30af\u30ea\u30d7\u30c8\n# \u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\nrequire 'kconv'\nrequire 'csv'\n\n#\u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u53d7\u3051\u53d6\u308b\nread_file = ARGV[0]\n\n# \u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\nraw_str = \"\"\n\n#\u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u4e00\u5ea6\u306b\u8aad\u307f\u8fbc\u3080\nraw_str = File.read(read_file)\n\n\n# raw_str = File.open(read_file)\n#\u3000\u8aad\u307f\u8fbc\u3093\u3060\u3082\u306e\u3092\u914d\u5217\u5316\nmod_str = CSV.parse(raw_str)\n\n#1\u884c\u305a\u3064\u8868\u793a\u3059\u308b\ni = 0\nmod_str.each do |str|\n  p i\n  p str\n  i = i + 1\nend\n```\n\n\u305f\u3081\u3057\u306b\u3088\u307f\u3053\u3080\u30d5\u30a1\u30a4\u30eb\n\n```csv:\u8aad\u307f\u8fbc\u307f\u5bfe\u8c61\n\u54c1\u540d,\u7a2e\u985e,\u5024\u6bb5\n\u68cd\u68d2,\u6b66\u5668,60\n\u85ac\u8349,drug,10\n\u6bd2\u8349,drug,1\n,(\u7a7a\u6b04\uff09,2000\n\u3044\u3064\u3082\u306e,\u4f55\u304b,45\u304f\u3089\u3044\n,,\n```\n\n```bash:\u5b9f\u884c\u7d50\u679c\n$ ruby read_sjis.rb fake_euc.csv\n0\n[\"\u54c1\u540d\", \"\u7a2e\u985e\", \"\u5024\u6bb5\"]\n1\n[\"\u68cd\u68d2\", \"\u6b66\u5668\", \"60\"]\n2\n[\"\u85ac\u8349\", \"drug\", \"10\"]\n3\n[\"\u6bd2\u8349\", \"drug\", \"1\"]\n4\n[nil, \"(\u7a7a\u6b04\uff09\", \"2000\"]\n5\n[\"\u3044\u3064\u3082\u306e\", \"\u4f55\u304b\", \"45\u304f\u3089\u3044\"]\n6\n[nil, nil, nil]\n```\n\n\n# \u3053\u306e\u3084\u308a\u65b9\u304c\u771f\u4fa1\u3092\u767a\u63ee\u3059\u308b\u306e\u306f\u30fb\u30fb\u30fb\n\n\u30bb\u30eb\u5185\u6539\u884c\u3092\u542b\u3080\u30b1\u30fc\u30b9\u3002\u3060\u3068\u601d\u3046\u3002\n", "tags": ["Ruby", "CSV"]}