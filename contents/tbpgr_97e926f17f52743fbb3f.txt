{"context": " More than 1 year has passed since last update.Packer\u3067Docker Image\u3092\u4f5c\u6210\u3057\u3066cowsay\u3057\u307e\u3059\n\n \u524d\u63d0\ndocker\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\n\n \u30b5\u30f3\u30d7\u30eb\n\n \u4ed5\u69d8\n\n\n\n\u9805\u76ee\n\u5185\u5bb9\n\n\n\n\n\u30db\u30b9\u30c8OS\nUbuntu 14.04 LTS\n\n\n\u30d7\u30ed\u30d3\u30b8\u30e7\u30f3\u30cb\u30f3\u30b0\nshell\n\n\n\n\u30b3\u30f3\u30c6\u30ca\u306b\u306fcowsay\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\n json\n\ndemo.json\n{\n    \"builders\":[{\n        \"type\": \"docker\",\n        \"image\": \"ubuntu:trusty\",\n        \"export_path\": \"image.tar\"\n    }],\n\n    \"provisioners\":[\n    {\n        \"type\": \"shell\",\n        \"inline\": [\n            \"apt-get -y update\",\n            \"apt-get install -y cowsay\"\n        ]\n    }\n    ],\n\n    \"post-processors\": [{\n        \"type\": \"docker-import\",\n        \"repository\": \"tbpgr/demo\",\n        \"tag\": \"0.1\"\n    }]\n}\n\n\n\n Packer build\n$ packer build demo.json\n\n\n image\u306e\u78ba\u8a8d\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ntbpgr/demo          0.1                 ec18fd15e1f0        52 seconds ago      186.7 MB\nubuntu              trusty              91e54dfb1179        12 days ago         188.4 MB\n\n\n \u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\n$ docker run tbpgr/demo:0.1 /usr/games/cowsay \"Packer\"\ndocker run tbpgr/demo:0.1 /usr/games/cowsay \"Packer\"\n _________________________\n< Packer >\n -------------------------\n        \\   ^__^\n         \\  (oo)\\_______\n            (__)\\       )\\/\\\n                ||----w |\n                ||     ||\n\n\n \u5916\u90e8\u8cc7\u6599\n\n\n Docker - Builder - Packer\n\n\n Packer\u3092\u4f7f\u3063\u3066Chef/Puppet/Ansible\u3067Docker\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u3064\u304f\u308b - SOTA\n\n\n Vagrant\u3067Packer\u306e\u4f5c\u696d\u74b0\u5883\u3092\u6574\u3048\u308b\n\n\n docker-pull failing after docker-import - Packer Issues\n\n\nPacker\u3067Docker Image\u3092\u4f5c\u6210\u3057\u3066cowsay\u3057\u307e\u3059\n\n## <i class=\"fa fa-check-circle\" style=\"font-size:1em;\"></i> \u524d\u63d0\ndocker\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\n\n## <i class=\"fa fa-flask\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\n### <i class=\"fa fa-files-o\" style=\"font-size:1em;\"></i> \u4ed5\u69d8\n|\u9805\u76ee|\u5185\u5bb9|\n|:--|:--|\n|\u30db\u30b9\u30c8OS|Ubuntu 14.04 LTS|\n|\u30d7\u30ed\u30d3\u30b8\u30e7\u30f3\u30cb\u30f3\u30b0|shell|\n\n\u30b3\u30f3\u30c6\u30ca\u306b\u306fcowsay\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\n### <i class=\"fa fa-file-text\" style=\"font-size:1em;\"></i> json\n```json:demo.json\n{\n    \"builders\":[{\n        \"type\": \"docker\",\n        \"image\": \"ubuntu:trusty\",\n        \"export_path\": \"image.tar\"\n    }],\n    \n    \"provisioners\":[\n    {\n        \"type\": \"shell\",\n        \"inline\": [\n            \"apt-get -y update\",\n            \"apt-get install -y cowsay\"\n        ]\n    }\n    ],\n    \n    \"post-processors\": [{\n        \"type\": \"docker-import\",\n        \"repository\": \"tbpgr/demo\",\n        \"tag\": \"0.1\"\n    }]\n}\n```\n\n### <i class=\"fa fa-cubes\" style=\"font-size:1em;\"></i> Packer build\n```bash\n$ packer build demo.json\n```\n\n### <i class=\"fa fa-image\" style=\"font-size:1em;\"></i> image\u306e\u78ba\u8a8d\n```bash\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ntbpgr/demo          0.1                 ec18fd15e1f0        52 seconds ago      186.7 MB\nubuntu              trusty              91e54dfb1179        12 days ago         188.4 MB\n```\n\n### <i class=\"fa fa-child\" style=\"font-size:1em;\"></i> \u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\n```bash\n$ docker run tbpgr/demo:0.1 /usr/games/cowsay \"Packer\"\ndocker run tbpgr/demo:0.1 /usr/games/cowsay \"Packer\"\n _________________________\n< Packer >\n -------------------------\n        \\   ^__^\n         \\  (oo)\\_______\n            (__)\\       )\\/\\\n                ||----w |\n                ||     ||\n```\n\n## <i class=\"fa fa-book\" style=\"font-size:1em;\"></i> \u5916\u90e8\u8cc7\u6599\n* <i class=\"fa fa-external-link\" style=\"font-size:1em;\"></i> [Docker - Builder - Packer](https://www.packer.io/docs/builders/docker.html)\n* <i class=\"fa fa-external-link\" style=\"font-size:1em;\"></i> [Packer\u3092\u4f7f\u3063\u3066Chef/Puppet/Ansible\u3067Docker\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u3064\u304f\u308b - SOTA](http://deeeet.com/writing/2014/03/02/build-docker-image-by-packer/)\n* <i class=\"fa fa-external-link\" style=\"font-size:1em;\"></i> [Vagrant\u3067Packer\u306e\u4f5c\u696d\u74b0\u5883\u3092\u6574\u3048\u308b](http://qiita.com/shiwork/items/d95210cb1dd26b167610)\n* <i class=\"fa fa-external-link\" style=\"font-size:1em;\"></i> [docker-pull failing after docker-import - Packer Issues](https://github.com/mitchellh/packer/issues/1269)\n", "tags": ["packer", "docker"]}