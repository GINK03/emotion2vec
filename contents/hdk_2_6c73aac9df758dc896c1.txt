{"tags": ["BitVisor"], "context": " More than 1 year has passed since last update.BitVisor 1.4\u304b\u3089UEFI\u306b\u5bfe\u5fdc\u3057\u3001\u5236\u7d04\u304c\u3042\u308b\u3082\u306e\u306eMac\u306eEFI\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002Mac\u3067BitVisor\u3092\u4f7f\u3046\u65b9\u6cd5\u306e\u4f8b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30d3\u30eb\u30c9\nBitVisor\u306e\u30d3\u30eb\u30c9\u306fGNU/Linux\u74b0\u5883\u3067\u884c\u3046\u306e\u304c\u7c21\u5358\u3067\u3059\u3002\u8a00\u3046\u307e\u3067\u3082\u306a\u304f\u3001\u7686\u3055\u3093\u306eMac\u306b\u3082\u3059\u3067\u306bEFI/UEFI\u30d6\u30fc\u30c8\u306eGNU/Linux\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306fUbuntu\u3092\u4f8b\u306b\u3057\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u306e\u30d3\u30eb\u30c9\u624b\u9806\u3092\u793a\u3057\u307e\u3059\u3002\n\n\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb: Ubuntu\u3067\u306f build-essentials, mercurial, mingw-w64 \u306a\u3069\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97: \u6700\u65b0\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092Bitbucket\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002hg clone https://bitbucket.org/bitvisor/bitvisor\n\nVMM\u672c\u4f53\u306e\u30d3\u30eb\u30c9: make -C bitvisor\n\nVMM\u30ed\u30fc\u30c0\u30fc\u306e\u30d3\u30eb\u30c9: make -C bitvisor/boot/uefi-loader\n\n\n\u3067\u304d\u3042\u304c\u3063\u305f\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nbitvisor/bitvisor.elf\nbitvisor/boot/uefi-loader/loadvmm.efi\n\n\n\u8d77\u52d5\n\u8d77\u52d5\u306e\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\n\u5185\u8535\u30c9\u30e9\u30a4\u30d6 (EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3)\nEFI Shell\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n\n\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u304b\u3089\u8d77\u52d5\u3059\u308b\u306e\u306f\u6700\u3082\u624b\u8efd\u306a\u65b9\u6cd5\u306e\u3072\u3068\u3064\u3067\u3059\u3002FAT32\u3067\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3055\u308c\u3066\u3044\u308bUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3001EFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092 (\u306a\u3051\u308c\u3070) \u4f5c\u6210\u3057\u307e\u3059\u3002mkdir -p /mnt/EFI/BOOT\n\nbitvisor.elf\u3092EFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002cp bitvisor/bitvisor.elf /mnt/EFI/BOOT\n\nloadvmm.efi\u3092bootx64.efi\u3068\u3044\u3046\u540d\u524d\u3067EFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002cp bitvisor/boot/uefi-loader/loadvmm.efi /mnt/EFI/BOOT/bootx64.efi\n\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002reboot\n\nMac\u306e\u8d77\u52d5\u97f3\u304c\u306a\u308b\u9803\u306b\u3001option (Alt) \u30ad\u30fc\u3092\u62bc\u3057\u3063\u3071\u306a\u3057\u306b\u3057\u3066Startup Manager\u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u9078\u629e\u3057\u3066\u8d77\u52d5\u3059\u308b\u3068\u3001BitVisor\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u306f\u7d9a\u3051\u3066\u81ea\u52d5\u7684\u306b\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\n\u3053\u306e\u65b9\u6cd5\u3067\u306f\u8d77\u52d5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u62dd\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u975e\u5e38\u306b\u624b\u8efd\u306a\u65b9\u6cd5\u3067\u3059\u3002\u306a\u304a\u3001\u8d77\u52d5\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u306f\u30b7\u30b9\u30c6\u30e0\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u9806\u756a\u901a\u308a\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u4e8b\u524d\u306befibootmgr\u30b3\u30de\u30f3\u30c9\u7b49\u3092\u7528\u3044\u3066\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u5185\u8535\u30c9\u30e9\u30a4\u30d6 (EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3)\nEFI/UEFI\u30d6\u30fc\u30c8\u306eGNU/Linux\u74b0\u5883\u3067\u3042\u308c\u3070\u3001\u5185\u8535\u30c9\u30e9\u30a4\u30d6\u306eEFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u8d77\u52d5\u3059\u308b\u306e\u3082\u975e\u5e38\u306b\u7c21\u5358\u3067\u3059\u3002EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u901a\u5e38/boot/efi\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nEFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u9069\u5f53\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u308a\u307e\u3059\u3002mkdir -p /boot/efi/EFI/BitVisor\n\n\u4f5c\u3063\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002cp bitvisor/bitvisor.elf bitvisor/boot/uefi-loader/loadvmm.efi /boot/efi/EFI/BitVisor\n\nefibootmgr\u30b3\u30de\u30f3\u30c9\u3092\u7528\u3044\u3066\u8d77\u52d5\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u540d (/dev/sda) \u304a\u3088\u3073\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1) \u306f\u9069\u5207\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002efibootmgr -c -l \\\\EFI\\\\BitVisor\\\\loadvmm.efi -L BitVisor -d /dev/sda -p 1\n\n\u518d\u8d77\u52d5\u3059\u308c\u3070BitVisor\u304c\u8d77\u52d5\u3057\u3001\u7d9a\u3051\u3066\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u65b9\u6cd5\u3067\u306fefibootmgr\u30b3\u30de\u30f3\u30c9\u304c\u4e01\u5be7\u306b\u8d77\u52d5\u9806\u5e8f\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u307e\u3059\u306e\u3067\u3001\u4f55\u3082\u64cd\u4f5c\u3057\u306a\u304f\u3066\u3082\u81ea\u52d5\u7684\u306bBitVisor\u304c\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u81ea\u52d5\u7684\u306b\u8d77\u52d5\u3057\u3066\u307b\u3057\u304f\u306a\u3044\u5834\u5408\u306f\u3001efibootmgr\u30b3\u30de\u30f3\u30c9\u306e-o (--bootorder) \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3001\u8d77\u52d5\u9806\u5e8f\u306b\u542b\u307e\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\nefibootmgr\u30b3\u30de\u30f3\u30c9\u306e-n (--bootnext) \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070\u3001\u6b21\u56de\u8d77\u52d5\u6642\u3060\u3051BitVisor\u3092\u8d77\u52d5\u3055\u305b\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u8a73\u3057\u304f\u306fefibootmgr\u30b3\u30de\u30f3\u30c9\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nEFI Shell\nEFI Shell\u304b\u3089\u8d77\u52d5\u3059\u308b\u65b9\u6cd5\u3067\u306f\u3001EFI Shell\u306b\u3088\u3063\u3066\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u306b\u753b\u9762\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u305f\u3081\u3001\u8d77\u52d5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u62dd\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002EFI Shell\u3092\u8d77\u52d5\u3059\u308b\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\nrEFIt\u3092\u4f7f\u7528\u3059\u308b: rEFIt\u306b\u306fEFI Shell\u304c\u4ed8\u5c5e\u3057\u3066\u304a\u308a\u3001\u9078\u629e\u3059\u308b\u3060\u3051\u3067\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u4f7f\u7528\u3059\u308b: rEFIt\u4ed8\u5c5e\u306eshell.efi\u30d5\u30a1\u30a4\u30eb\u3092\u3001FAT32\u3067\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3055\u308c\u305fUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u306eEFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306bbootx64.efi\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u7f6e\u3044\u3066\u3001Startup Manager\u304b\u3089USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3067EFI Shell\u3092\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002\n\u5185\u8535\u30c9\u30e9\u30a4\u30d6 (EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3) \u3092\u4f7f\u7528\u3059\u308b: EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306brEFIt\u4ed8\u5c5e\u306eshell.efi\u3092\u7f6e\u304d\u3001efibootmgr\u30b3\u30de\u30f3\u30c9\u3067\u8d77\u52d5\u9806\u5e8f\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001EFI Shell\u3092\u8d77\u52d5\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002EFI Shell\u304b\u3089\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u306a\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306bbitvisor.elf\u304a\u3088\u3073loadvmm.efi\u3092\u7f6e\u3044\u3066\u304a\u3051\u3070\u3001loadvmm.efi\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nEFI Shell\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fDOS\u306e\u30b3\u30de\u30f3\u30c9\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u30fc\u98a8\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30c9\u30e9\u30a4\u30d6\u6587\u5b57\u306e\u4ee3\u308f\u308a\u306bfs0:, fs1:\u3068\u3044\u3063\u305f\u30c9\u30e9\u30a4\u30d6\u540d\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306e\u533a\u5207\u308a\u6587\u5b57\u306f\\\u3067\u3059\u3002US\u30ad\u30fc\u30dc\u30fc\u30c9\u914d\u5217\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070fs0:\u306bEFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u898b\u3048\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066BitVisor\u3092\u8d77\u52d5\u3057\u3001\u3055\u3089\u306b\u3001Ubuntu\u306eGNU GRUB\u3092\u8d77\u52d5\u3059\u308b\u3001\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nfs0:\\EFI\\BitVisor\\loadvmm.efi\nfs0:\\EFI\\ubuntu\\shimx64.efi\n\n\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\nMac\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d6\u30fc\u30c8\u306fBoot Service Discovery Protocol\u3068\u547c\u3070\u308c\u308b\u4ed5\u7d44\u307f\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u305fDHCP\u30b5\u30fc\u30d0\u30fc\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308c\u3070\u3001N\u30ad\u30fc\u3092\u62bc\u3057\u306a\u304c\u3089Mac\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u3067\u3001EFI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u76f4\u63a5TFTP\u3067\u8ee2\u9001\u3055\u305b\u3066\u3001\u5b9f\u884c\u3055\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u305d\u3053\u3067\u3001loadvmm.efi\u3092\u30ed\u30fc\u30c9\u3055\u305b\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001loadvmm.efi\u306f\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306ebitvisor.elf\u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3059\u308b\u306e\u3067\u3001TFTP\u30d6\u30fc\u30c8\u306e\u5834\u5408\u305d\u3053\u3067\u5931\u6557\u3059\u308b\u306f\u305a\u3067\u3059\u3002\u3088\u3063\u3066\u3001\u30ed\u30fc\u30c0\u30fc\u306e\u66f8\u304d\u63db\u3048\u304c\u5fc5\u8981\u3067\u3059\u3002\u9811\u5f35\u3063\u3066\u304f\u3060\u3055\u3044!\n\n\u30ed\u30b0\u78ba\u8a8d\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u30c7\u30d0\u30c3\u30b0\u7528\u6a5f\u80fddbgsh\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001BitVisor\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u305f\u308a\u3001\u30e1\u30e2\u30ea\u30fc\u30c0\u30f3\u30d7\u3092\u884c\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002dbgsh\u30b3\u30de\u30f3\u30c9\u306f\u3001\u30b2\u30b9\u30c8OS\u4e0a\u3067BitVisor\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306etools/dbgsh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067make\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u30d3\u30eb\u30c9\u3067\u304d\u307e\u3059\u3002GNU/Linux\u306e\u5834\u5408\u306f\u3060\u3044\u305f\u3044\u3053\u308c\u3067\u3044\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u304c (Windows\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u30fc\u3082\u540c\u6642\u306b\u30d3\u30eb\u30c9\u3055\u308c\u307e\u3059)\u3001\u30b2\u30b9\u30c8OS\u306e\u90fd\u5408\u306b\u3088\u308aclang\u3092\u3054\u5229\u7528\u306e\u5834\u5408\u306f\u3001\u3072\u3068\u5de5\u592b\u5fc5\u8981\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\n\nlog\u30b3\u30de\u30f3\u30c9\u3067\u30ed\u30b0\u306e\u53c2\u7167\u3001debug\u30b3\u30de\u30f3\u30c9\u3067\u30e1\u30e2\u30ea\u30fc\u30c0\u30f3\u30d7\u304c\u884c\u3048\u308b\u30c7\u30d0\u30c3\u30ac\u30fc\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u5909\u66f4\n\u4f55\u304bBitVisor\u3089\u3057\u3044\u3053\u3068\u3092\u3057\u3066\u307f\u306a\u3044\u3068\u697d\u3057\u304f\u306a\u3044\u3067\u3059\u3088\u306d\u3002\u3067\u3082\u30b9\u30c8\u30ec\u30fc\u30b8\u6697\u53f7\u5316\u306f\u3061\u3087\u3063\u3068\u9762\u5012\u306a\u306e\u3067 (\u6e96\u5099\u304c\u5927\u5909\u3001xHCI/NVMe\u672a\u5bfe\u5fdc\u3001\u306a\u3069)\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002Mac\u306b\u6709\u7ddaLAN\u30dd\u30fc\u30c8\u304c\u5185\u8535\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001BitVisor\u306b\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308bbnx\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001BitVisor\u5185\u306eTCP/IP\u30b9\u30bf\u30c3\u30af\u3092\u6709\u52b9\u306b\u3057\u305f\u308a\u3001\u30b2\u30b9\u30c8OS\u306bvirtio-net\u30c7\u30d0\u30a4\u30b9\u3092\u898b\u305b\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3076\u3093\u3002\n\u8a2d\u5b9a\u306fBitVisor\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306edefconfig\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066\u518d\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u307e\u305a\u3001TCP/IP\u30b9\u30bf\u30c3\u30af\u306e\u8a2d\u5b9a\u3092\u5165\u308c\u307e\u3059\u3002IP\u30a2\u30c9\u30ec\u30b9\u306fDHCP\u3067\u53d6\u5f97\u3059\u308b\u8a2d\u5b9a\u306b\u3082\u3067\u304d\u307e\u3059\u304c\u3001\u540c\u6642\u306bvirtio-net\u3067\u30b2\u30b9\u30c8OS\u304b\u3089\u3082DHCP\u3092\u4f7f\u3046\u3068\u6df7\u4e71\u306e\u3082\u3068\u3067\u3059\u306e\u3067 (\u540c\u3058MAC\u30a2\u30c9\u30ec\u30b9\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081)\u3001\u9759\u7684\u306b\u5272\u308a\u632f\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n  .ip = {\n     .use_dhcp = 0,\n     .ipaddr = { 192, 168, 0, 100 },\n     .netmask = { 255, 255, 255, 0 },\n     .gateway = { 192, 168, 0, 1 },\n  },\n\n\u6b21\u306b\u3001bnx\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002.driver\u306e\u4e2d\u306b.pci = \"\",\u3068\u3044\u3046\u306e\u304c\u3042\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n  .pci = \"device=bnx, number=0, driver=bnx, net=ippass, virtio=1\",\n\n\u3053\u308c\u306f\u3001\u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305fBroadcom\u6709\u7ddaLAN\u306b\u5bfe\u3057\u3066bnx\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u5272\u308a\u5f53\u3066\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066virtio-net\u3092\u6709\u52b9\u306b\u3057\u3001\u30b2\u30b9\u30c8OS\u3068TCP/IP\u30b9\u30bf\u30c3\u30af\u306e\u9001\u4fe1\u30c7\u30fc\u30bf\u3092\u305d\u306e\u307e\u307eNIC\u304b\u3089\u9001\u4fe1\u3057\u3001NIC\u304b\u3089\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30b2\u30b9\u30c8OS\u3068TCP/IP\u30b9\u30bf\u30c3\u30af\u306e\u4e21\u65b9\u306b\u6e21\u3059\u3088\u3046\u306b\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002\n\u3082\u3057\u304b\u3057\u305f\u3089\u3001deep_tkkn\u69d8\u306e\u8a18\u4e8b http://qiita.com/deep_tkkn/items/ee6563aafb0d33de8450 \u3084\u3001\u3044\u304a\u308a\u3093\u69d8\u306e\u8a18\u4e8b http://iorin.hatenablog.jp/entry/2015/12/03/204653 \u306b\u3042\u308b\u3088\u3046\u306b\u3001\u30c9\u30e9\u30a4\u30d0\u30fc\u5185\u306e\u30c7\u30d0\u30a4\u30b9ID\u304c\u8db3\u308a\u3066\u306a\u3044\u5834\u5408\u3082\u3042\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\u3053\u306e\u3088\u3046\u306a\u6642\u306b\u306f\u3001\u5b9f\u306f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u3044\u3058\u3089\u306a\u304f\u3066\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3057\u3066\u5f37\u5f15\u306b\u30ed\u30fc\u30c9\u3055\u305b\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n  .pci = \"class_code=020000, id=14e4:165f, number=0, driver=bnx, net=ippass, virtio=1\",\n\n\u8a2d\u5b9a\u306f\u4ee5\u4e0a\u3067\u3059\u3002\u518d\u5ea6\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001bitvisor.elf\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3055\u3066\u3001\u8d77\u52d5\u306e\u969b\u306b\u30b3\u30c4\u304c\u3044\u308a\u307e\u3059\u3002BitVisor\u3092\u8d77\u52d5\u3059\u308b\u524d\u306b\u3001Mac\u306eEFI\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u304c\u30ed\u30fc\u30c9\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u30a2\u30f3\u30ed\u30fc\u30c9\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u306b\u306fEFI Shell\u3092\u4f7f\u3046\u306e\u304c\u7c21\u5358\u3067\u3059\u3002EFI Shell\u304b\u3089drivers\u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001Broadcom Gigabit Ethernet Driver\u306e\u756a\u53f7\u3092\u898b\u3064\u3051\u3066\u3001unload\u30b3\u30de\u30f3\u30c9\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30a2\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n\u305d\u3046\u3060\u3001rEFIt\u304b\u3089\u7acb\u3061\u4e0a\u3052\u305fEFI Shell\u3067\u306f\u3001\u30c9\u30e9\u30a4\u30d0\u30fc\u304c\u51fa\u3066\u3053\u306a\u3044\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002Mac\u7279\u6709\u306eblessed HFS+ partition\u304b\u3089\u306e\u8d77\u52d5\u3067\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\u6a5f\u80fd\u304c\u521d\u671f\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306a\u3089\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u4eca\u306e\u5b9f\u88c5\u3067\u306f\u305f\u3076\u3093\u305d\u308c\u3067\u306f\u3061\u3083\u3093\u3068\u52d5\u304d\u307e\u305b\u3093\u3002\u3061\u3083\u3093\u3068\u52d5\u304b\u3059\u306b\u306f\u3001EFI\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c9\u30e9\u30a4\u30d0\u30fc\u306b\u521d\u671f\u5316\u3092\u3057\u3066\u3082\u3089\u3063\u3066\u3001\u305d\u308c\u304b\u3089\u30a2\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u305d\u308c\u304b\u3089BitVisor\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\u3002rEFIt\u3092\u3054\u4f7f\u7528\u306e\u5834\u5408\u3067\u3082\u3001Startup Manager\u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308c\u3070\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\u6a5f\u80fd\u304c\u521d\u671f\u5316\u3055\u308c\u307e\u3059\u3002\n\u5f8c\u306f\u901a\u5e38\u901a\u308aBitVisor\u3092\u8d77\u52d5\u3057\u3066\u3001\u6b21\u306b\u30b2\u30b9\u30c8OS\u3092\u8d77\u52d5\u3059\u308c\u3070OK\u3067\u3059\u3002\u30a2\u30f3\u30ed\u30fc\u30c9\u3092\u5fd8\u308c\u308b\u3068\u3001BitVisor\u8d77\u52d5\u4e2d\u306b\u30d5\u30ea\u30fc\u30ba\u3057\u305f\u308a\u3001OS\u8d77\u52d5\u5f8c\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u901a\u4fe1\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b2\u30b9\u30c8OS\u306bvirtio-net\u30c7\u30d0\u30a4\u30b9\u306e\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30fc\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001virtio-net\u30c7\u30d0\u30a4\u30b9\u304c\u691c\u51fa\u3055\u308c\u3066\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u4f7f\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002ip a\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u306bstate UNKNOWN\u306a\u3069\u3068\u51fa\u3066\u3044\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u30ea\u30f3\u30af\u30a2\u30c3\u30d7\u30fb\u30ea\u30f3\u30af\u30c0\u30a6\u30f3\u306e\u60c5\u5831\u3092\u30b2\u30b9\u30c8OS\u306b\u898b\u305b\u308b\u90e8\u5206 (VIRTIO_NET_F_STATUS) \u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u306b\u3088\u308b\u3082\u306e\u3067\u3059\u3002\nBitVisor\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001BitVisor\u304c\u4f7f\u7528\u3057\u3066\u3044\u308bIP\u30a2\u30c9\u30ec\u30b9\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u9759\u7684\u306b\u5272\u308a\u632f\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u78ba\u8a8d\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3002\n\nTCP/IP\u30b9\u30bf\u30c3\u30af\u306fICMP echo\u306b\u5fdc\u7b54\u3057\u307e\u3059\u3002\u307e\u305f\u3001BitVisor\u306b\u306f\u30c6\u30b9\u30c8\u7528\u306eecho\u30b5\u30fc\u30d0\u30fc\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u7c21\u5358\u306a\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\u304c\u3067\u304d\u307e\u3059\u3002\u30c6\u30b9\u30c8\u7528\u306eecho\u30b5\u30fc\u30d0\u30fc\u3092\u958b\u59cb\u3059\u308b\u306b\u306f\u3001dbgsh\u304b\u3089echoctl\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001server start\u30b3\u30de\u30f3\u30c9\u306b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u3046\u307e\u304f\u3044\u3063\u305f\u3089\u4ed6\u306e\u30db\u30b9\u30c8\u304b\u3089\u8a66\u3057\u306b\u63a5\u7d9a\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nBitVisor 1.4\u304b\u3089UEFI\u306b\u5bfe\u5fdc\u3057\u3001\u5236\u7d04\u304c\u3042\u308b\u3082\u306e\u306eMac\u306eEFI\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002Mac\u3067BitVisor\u3092\u4f7f\u3046\u65b9\u6cd5\u306e\u4f8b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n## \u30d3\u30eb\u30c9\n\nBitVisor\u306e\u30d3\u30eb\u30c9\u306fGNU/Linux\u74b0\u5883\u3067\u884c\u3046\u306e\u304c\u7c21\u5358\u3067\u3059\u3002\u8a00\u3046\u307e\u3067\u3082\u306a\u304f\u3001\u7686\u3055\u3093\u306eMac\u306b\u3082\u3059\u3067\u306bEFI/UEFI\u30d6\u30fc\u30c8\u306eGNU/Linux\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306fUbuntu\u3092\u4f8b\u306b\u3057\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u306e\u30d3\u30eb\u30c9\u624b\u9806\u3092\u793a\u3057\u307e\u3059\u3002\n\n1. \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb: Ubuntu\u3067\u306f build-essentials, mercurial, mingw-w64 \u306a\u3069\u304c\u5fc5\u8981\u3067\u3059\u3002\n2. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97: \u6700\u65b0\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092Bitbucket\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002<br>`hg clone https://bitbucket.org/bitvisor/bitvisor`\n3. VMM\u672c\u4f53\u306e\u30d3\u30eb\u30c9: `make -C bitvisor`\n4. VMM\u30ed\u30fc\u30c0\u30fc\u306e\u30d3\u30eb\u30c9: `make -C bitvisor/boot/uefi-loader`\n\n\u3067\u304d\u3042\u304c\u3063\u305f\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n- bitvisor/bitvisor.elf\n- bitvisor/boot/uefi-loader/loadvmm.efi\n\n## \u8d77\u52d5\n\n\u8d77\u52d5\u306e\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\n- USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\n- \u5185\u8535\u30c9\u30e9\u30a4\u30d6 (EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3)\n- EFI Shell\n- \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n\n### USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\n\nUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u304b\u3089\u8d77\u52d5\u3059\u308b\u306e\u306f\u6700\u3082\u624b\u8efd\u306a\u65b9\u6cd5\u306e\u3072\u3068\u3064\u3067\u3059\u3002FAT32\u3067\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3055\u308c\u3066\u3044\u308bUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\n1. USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3001EFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092 (\u306a\u3051\u308c\u3070) \u4f5c\u6210\u3057\u307e\u3059\u3002<br>`mkdir -p /mnt/EFI/BOOT`\n2. bitvisor.elf\u3092EFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002<br>`cp bitvisor/bitvisor.elf /mnt/EFI/BOOT`\n3. loadvmm.efi\u3092bootx64.efi\u3068\u3044\u3046\u540d\u524d\u3067EFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002<br>`cp bitvisor/boot/uefi-loader/loadvmm.efi /mnt/EFI/BOOT/bootx64.efi`\n4. USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002<br>`reboot`\n5. Mac\u306e\u8d77\u52d5\u97f3\u304c\u306a\u308b\u9803\u306b\u3001option (Alt) \u30ad\u30fc\u3092\u62bc\u3057\u3063\u3071\u306a\u3057\u306b\u3057\u3066Startup Manager\u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002\n6. USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u9078\u629e\u3057\u3066\u8d77\u52d5\u3059\u308b\u3068\u3001BitVisor\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u306f\u7d9a\u3051\u3066\u81ea\u52d5\u7684\u306b\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n![Startup Manager\u306e\u753b\u9762](http://www.e-hdk.com/tmp/20151204-1.jpeg)\n\n\u3053\u306e\u65b9\u6cd5\u3067\u306f\u8d77\u52d5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u62dd\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u975e\u5e38\u306b\u624b\u8efd\u306a\u65b9\u6cd5\u3067\u3059\u3002\u306a\u304a\u3001\u8d77\u52d5\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u306f\u30b7\u30b9\u30c6\u30e0\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u9806\u756a\u901a\u308a\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u4e8b\u524d\u306befibootmgr\u30b3\u30de\u30f3\u30c9\u7b49\u3092\u7528\u3044\u3066\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n### \u5185\u8535\u30c9\u30e9\u30a4\u30d6 (EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3)\n\nEFI/UEFI\u30d6\u30fc\u30c8\u306eGNU/Linux\u74b0\u5883\u3067\u3042\u308c\u3070\u3001\u5185\u8535\u30c9\u30e9\u30a4\u30d6\u306eEFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u8d77\u52d5\u3059\u308b\u306e\u3082\u975e\u5e38\u306b\u7c21\u5358\u3067\u3059\u3002EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u901a\u5e38/boot/efi\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n1. EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u9069\u5f53\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u308a\u307e\u3059\u3002<br>`mkdir -p /boot/efi/EFI/BitVisor`\n2. \u4f5c\u3063\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002<br>`cp bitvisor/bitvisor.elf bitvisor/boot/uefi-loader/loadvmm.efi /boot/efi/EFI/BitVisor`\n3. efibootmgr\u30b3\u30de\u30f3\u30c9\u3092\u7528\u3044\u3066\u8d77\u52d5\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u540d (/dev/sda) \u304a\u3088\u3073\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1) \u306f\u9069\u5207\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002<br>`efibootmgr -c -l \\\\EFI\\\\BitVisor\\\\loadvmm.efi -L BitVisor -d /dev/sda -p 1`\n4. \u518d\u8d77\u52d5\u3059\u308c\u3070BitVisor\u304c\u8d77\u52d5\u3057\u3001\u7d9a\u3051\u3066\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u65b9\u6cd5\u3067\u306fefibootmgr\u30b3\u30de\u30f3\u30c9\u304c\u4e01\u5be7\u306b\u8d77\u52d5\u9806\u5e8f\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u307e\u3059\u306e\u3067\u3001\u4f55\u3082\u64cd\u4f5c\u3057\u306a\u304f\u3066\u3082\u81ea\u52d5\u7684\u306bBitVisor\u304c\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u81ea\u52d5\u7684\u306b\u8d77\u52d5\u3057\u3066\u307b\u3057\u304f\u306a\u3044\u5834\u5408\u306f\u3001efibootmgr\u30b3\u30de\u30f3\u30c9\u306e-o (--bootorder) \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3001\u8d77\u52d5\u9806\u5e8f\u306b\u542b\u307e\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\nefibootmgr\u30b3\u30de\u30f3\u30c9\u306e-n (--bootnext) \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070\u3001\u6b21\u56de\u8d77\u52d5\u6642\u3060\u3051BitVisor\u3092\u8d77\u52d5\u3055\u305b\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u8a73\u3057\u304f\u306fefibootmgr\u30b3\u30de\u30f3\u30c9\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n### EFI Shell\n\nEFI Shell\u304b\u3089\u8d77\u52d5\u3059\u308b\u65b9\u6cd5\u3067\u306f\u3001EFI Shell\u306b\u3088\u3063\u3066\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u306b\u753b\u9762\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u305f\u3081\u3001\u8d77\u52d5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u62dd\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002EFI Shell\u3092\u8d77\u52d5\u3059\u308b\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\n1. rEFIt\u3092\u4f7f\u7528\u3059\u308b: rEFIt\u306b\u306fEFI Shell\u304c\u4ed8\u5c5e\u3057\u3066\u304a\u308a\u3001\u9078\u629e\u3059\u308b\u3060\u3051\u3067\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002\n2. USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u4f7f\u7528\u3059\u308b: rEFIt\u4ed8\u5c5e\u306eshell.efi\u30d5\u30a1\u30a4\u30eb\u3092\u3001FAT32\u3067\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3055\u308c\u305fUSB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u306eEFI/BOOT\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306bbootx64.efi\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u7f6e\u3044\u3066\u3001Startup Manager\u304b\u3089USB\u30d5\u30e9\u30c3\u30b7\u30e5\u30c9\u30e9\u30a4\u30d6\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3067EFI Shell\u3092\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002\n3. \u5185\u8535\u30c9\u30e9\u30a4\u30d6 (EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3) \u3092\u4f7f\u7528\u3059\u308b: EFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306brEFIt\u4ed8\u5c5e\u306eshell.efi\u3092\u7f6e\u304d\u3001efibootmgr\u30b3\u30de\u30f3\u30c9\u3067\u8d77\u52d5\u9806\u5e8f\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001EFI Shell\u3092\u8d77\u52d5\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002EFI Shell\u304b\u3089\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u306a\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306bbitvisor.elf\u304a\u3088\u3073loadvmm.efi\u3092\u7f6e\u3044\u3066\u304a\u3051\u3070\u3001loadvmm.efi\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nEFI Shell\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fDOS\u306e\u30b3\u30de\u30f3\u30c9\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u30fc\u98a8\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30c9\u30e9\u30a4\u30d6\u6587\u5b57\u306e\u4ee3\u308f\u308a\u306bfs0:, fs1:\u3068\u3044\u3063\u305f\u30c9\u30e9\u30a4\u30d6\u540d\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306e\u533a\u5207\u308a\u6587\u5b57\u306f\\\u3067\u3059\u3002US\u30ad\u30fc\u30dc\u30fc\u30c9\u914d\u5217\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070fs0:\u306bEFI\u30b7\u30b9\u30c6\u30e0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u898b\u3048\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066BitVisor\u3092\u8d77\u52d5\u3057\u3001\u3055\u3089\u306b\u3001Ubuntu\u306eGNU GRUB\u3092\u8d77\u52d5\u3059\u308b\u3001\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n`fs0:\\EFI\\BitVisor\\loadvmm.efi`\n`fs0:\\EFI\\ubuntu\\shimx64.efi`\n\n![EFI Shell\u306e\u753b\u9762](http://www.e-hdk.com/tmp/20151204-3.jpeg)\n![EFI Shell\u304b\u3089BitVisor\u3092\u8d77\u52d5\u3057\u305f\u3042\u3068\u306e\u753b\u9762](http://www.e-hdk.com/tmp/20151204-4.jpeg)\n\n### \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n\nMac\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d6\u30fc\u30c8\u306fBoot Service Discovery Protocol\u3068\u547c\u3070\u308c\u308b\u4ed5\u7d44\u307f\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u305fDHCP\u30b5\u30fc\u30d0\u30fc\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308c\u3070\u3001N\u30ad\u30fc\u3092\u62bc\u3057\u306a\u304c\u3089Mac\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u3067\u3001EFI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u76f4\u63a5TFTP\u3067\u8ee2\u9001\u3055\u305b\u3066\u3001\u5b9f\u884c\u3055\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u305d\u3053\u3067\u3001loadvmm.efi\u3092\u30ed\u30fc\u30c9\u3055\u305b\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001loadvmm.efi\u306f\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306ebitvisor.elf\u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3059\u308b\u306e\u3067\u3001TFTP\u30d6\u30fc\u30c8\u306e\u5834\u5408\u305d\u3053\u3067\u5931\u6557\u3059\u308b\u306f\u305a\u3067\u3059\u3002\u3088\u3063\u3066\u3001\u30ed\u30fc\u30c0\u30fc\u306e\u66f8\u304d\u63db\u3048\u304c\u5fc5\u8981\u3067\u3059\u3002\u9811\u5f35\u3063\u3066\u304f\u3060\u3055\u3044!\n\n## \u30ed\u30b0\u78ba\u8a8d\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u30c7\u30d0\u30c3\u30b0\u7528\u6a5f\u80fddbgsh\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001BitVisor\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u305f\u308a\u3001\u30e1\u30e2\u30ea\u30fc\u30c0\u30f3\u30d7\u3092\u884c\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002dbgsh\u30b3\u30de\u30f3\u30c9\u306f\u3001\u30b2\u30b9\u30c8OS\u4e0a\u3067BitVisor\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306etools/dbgsh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067make\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u30d3\u30eb\u30c9\u3067\u304d\u307e\u3059\u3002GNU/Linux\u306e\u5834\u5408\u306f\u3060\u3044\u305f\u3044\u3053\u308c\u3067\u3044\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u304c (Windows\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u30fc\u3082\u540c\u6642\u306b\u30d3\u30eb\u30c9\u3055\u308c\u307e\u3059)\u3001\u30b2\u30b9\u30c8OS\u306e\u90fd\u5408\u306b\u3088\u308aclang\u3092\u3054\u5229\u7528\u306e\u5834\u5408\u306f\u3001\u3072\u3068\u5de5\u592b\u5fc5\u8981\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\n\n![dbgsh\u306e\u753b\u9762](http://www.e-hdk.com/tmp/20151204-2.jpeg)\n\nlog\u30b3\u30de\u30f3\u30c9\u3067\u30ed\u30b0\u306e\u53c2\u7167\u3001debug\u30b3\u30de\u30f3\u30c9\u3067\u30e1\u30e2\u30ea\u30fc\u30c0\u30f3\u30d7\u304c\u884c\u3048\u308b\u30c7\u30d0\u30c3\u30ac\u30fc\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n## \u8a2d\u5b9a\u5909\u66f4\n\n\u4f55\u304bBitVisor\u3089\u3057\u3044\u3053\u3068\u3092\u3057\u3066\u307f\u306a\u3044\u3068\u697d\u3057\u304f\u306a\u3044\u3067\u3059\u3088\u306d\u3002\u3067\u3082\u30b9\u30c8\u30ec\u30fc\u30b8\u6697\u53f7\u5316\u306f\u3061\u3087\u3063\u3068\u9762\u5012\u306a\u306e\u3067 (\u6e96\u5099\u304c\u5927\u5909\u3001xHCI/NVMe\u672a\u5bfe\u5fdc\u3001\u306a\u3069)\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002Mac\u306b\u6709\u7ddaLAN\u30dd\u30fc\u30c8\u304c\u5185\u8535\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001BitVisor\u306b\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308bbnx\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001BitVisor\u5185\u306eTCP/IP\u30b9\u30bf\u30c3\u30af\u3092\u6709\u52b9\u306b\u3057\u305f\u308a\u3001\u30b2\u30b9\u30c8OS\u306bvirtio-net\u30c7\u30d0\u30a4\u30b9\u3092\u898b\u305b\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3076\u3093\u3002\n\n\u8a2d\u5b9a\u306fBitVisor\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306edefconfig\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066\u518d\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u307e\u305a\u3001TCP/IP\u30b9\u30bf\u30c3\u30af\u306e\u8a2d\u5b9a\u3092\u5165\u308c\u307e\u3059\u3002IP\u30a2\u30c9\u30ec\u30b9\u306fDHCP\u3067\u53d6\u5f97\u3059\u308b\u8a2d\u5b9a\u306b\u3082\u3067\u304d\u307e\u3059\u304c\u3001\u540c\u6642\u306bvirtio-net\u3067\u30b2\u30b9\u30c8OS\u304b\u3089\u3082DHCP\u3092\u4f7f\u3046\u3068\u6df7\u4e71\u306e\u3082\u3068\u3067\u3059\u306e\u3067 (\u540c\u3058MAC\u30a2\u30c9\u30ec\u30b9\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081)\u3001\u9759\u7684\u306b\u5272\u308a\u632f\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n\n```\n  .ip = {\n     .use_dhcp = 0,\n     .ipaddr = { 192, 168, 0, 100 },\n     .netmask = { 255, 255, 255, 0 },\n     .gateway = { 192, 168, 0, 1 },\n  },\n```\n\n\u6b21\u306b\u3001bnx\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002.driver\u306e\u4e2d\u306b`.pci = \"\",`\u3068\u3044\u3046\u306e\u304c\u3042\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```\n  .pci = \"device=bnx, number=0, driver=bnx, net=ippass, virtio=1\",\n```\n\n\u3053\u308c\u306f\u3001\u6700\u521d\u306b\u898b\u3064\u304b\u3063\u305fBroadcom\u6709\u7ddaLAN\u306b\u5bfe\u3057\u3066bnx\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u5272\u308a\u5f53\u3066\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066virtio-net\u3092\u6709\u52b9\u306b\u3057\u3001\u30b2\u30b9\u30c8OS\u3068TCP/IP\u30b9\u30bf\u30c3\u30af\u306e\u9001\u4fe1\u30c7\u30fc\u30bf\u3092\u305d\u306e\u307e\u307eNIC\u304b\u3089\u9001\u4fe1\u3057\u3001NIC\u304b\u3089\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30b2\u30b9\u30c8OS\u3068TCP/IP\u30b9\u30bf\u30c3\u30af\u306e\u4e21\u65b9\u306b\u6e21\u3059\u3088\u3046\u306b\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002\n\n\u3082\u3057\u304b\u3057\u305f\u3089\u3001deep_tkkn\u69d8\u306e\u8a18\u4e8b http://qiita.com/deep_tkkn/items/ee6563aafb0d33de8450 \u3084\u3001\u3044\u304a\u308a\u3093\u69d8\u306e\u8a18\u4e8b http://iorin.hatenablog.jp/entry/2015/12/03/204653 \u306b\u3042\u308b\u3088\u3046\u306b\u3001\u30c9\u30e9\u30a4\u30d0\u30fc\u5185\u306e\u30c7\u30d0\u30a4\u30b9ID\u304c\u8db3\u308a\u3066\u306a\u3044\u5834\u5408\u3082\u3042\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\u3053\u306e\u3088\u3046\u306a\u6642\u306b\u306f\u3001\u5b9f\u306f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u3044\u3058\u3089\u306a\u304f\u3066\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3057\u3066\u5f37\u5f15\u306b\u30ed\u30fc\u30c9\u3055\u305b\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n```\n  .pci = \"class_code=020000, id=14e4:165f, number=0, driver=bnx, net=ippass, virtio=1\",\n```\n\n\u8a2d\u5b9a\u306f\u4ee5\u4e0a\u3067\u3059\u3002\u518d\u5ea6\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001bitvisor.elf\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3055\u3066\u3001\u8d77\u52d5\u306e\u969b\u306b\u30b3\u30c4\u304c\u3044\u308a\u307e\u3059\u3002BitVisor\u3092\u8d77\u52d5\u3059\u308b\u524d\u306b\u3001Mac\u306eEFI\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u304c\u30ed\u30fc\u30c9\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u30a2\u30f3\u30ed\u30fc\u30c9\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u306b\u306fEFI Shell\u3092\u4f7f\u3046\u306e\u304c\u7c21\u5358\u3067\u3059\u3002EFI Shell\u304b\u3089drivers\u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001Broadcom Gigabit Ethernet Driver\u306e\u756a\u53f7\u3092\u898b\u3064\u3051\u3066\u3001unload\u30b3\u30de\u30f3\u30c9\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30a2\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n![EFI Shell\u306e\u30c9\u30e9\u30a4\u30d0\u30fc\u30a2\u30f3\u30ed\u30fc\u30c9\u753b\u9762](http://www.e-hdk.com/tmp/20151204-5.jpeg)\n\n\u305d\u3046\u3060\u3001rEFIt\u304b\u3089\u7acb\u3061\u4e0a\u3052\u305fEFI Shell\u3067\u306f\u3001\u30c9\u30e9\u30a4\u30d0\u30fc\u304c\u51fa\u3066\u3053\u306a\u3044\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002Mac\u7279\u6709\u306eblessed HFS+ partition\u304b\u3089\u306e\u8d77\u52d5\u3067\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\u6a5f\u80fd\u304c\u521d\u671f\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306a\u3089\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u4eca\u306e\u5b9f\u88c5\u3067\u306f\u305f\u3076\u3093\u305d\u308c\u3067\u306f\u3061\u3083\u3093\u3068\u52d5\u304d\u307e\u305b\u3093\u3002\u3061\u3083\u3093\u3068\u52d5\u304b\u3059\u306b\u306f\u3001EFI\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c9\u30e9\u30a4\u30d0\u30fc\u306b\u521d\u671f\u5316\u3092\u3057\u3066\u3082\u3089\u3063\u3066\u3001\u305d\u308c\u304b\u3089\u30a2\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u305d\u308c\u304b\u3089BitVisor\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\u3002rEFIt\u3092\u3054\u4f7f\u7528\u306e\u5834\u5408\u3067\u3082\u3001Startup Manager\u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308c\u3070\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\u6a5f\u80fd\u304c\u521d\u671f\u5316\u3055\u308c\u307e\u3059\u3002\n\n\u5f8c\u306f\u901a\u5e38\u901a\u308aBitVisor\u3092\u8d77\u52d5\u3057\u3066\u3001\u6b21\u306b\u30b2\u30b9\u30c8OS\u3092\u8d77\u52d5\u3059\u308c\u3070OK\u3067\u3059\u3002\u30a2\u30f3\u30ed\u30fc\u30c9\u3092\u5fd8\u308c\u308b\u3068\u3001BitVisor\u8d77\u52d5\u4e2d\u306b\u30d5\u30ea\u30fc\u30ba\u3057\u305f\u308a\u3001OS\u8d77\u52d5\u5f8c\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u901a\u4fe1\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30b2\u30b9\u30c8OS\u306bvirtio-net\u30c7\u30d0\u30a4\u30b9\u306e\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30fc\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001virtio-net\u30c7\u30d0\u30a4\u30b9\u304c\u691c\u51fa\u3055\u308c\u3066\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u4f7f\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002ip a\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u306bstate UNKNOWN\u306a\u3069\u3068\u51fa\u3066\u3044\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u30ea\u30f3\u30af\u30a2\u30c3\u30d7\u30fb\u30ea\u30f3\u30af\u30c0\u30a6\u30f3\u306e\u60c5\u5831\u3092\u30b2\u30b9\u30c8OS\u306b\u898b\u305b\u308b\u90e8\u5206 (VIRTIO_NET_F_STATUS) \u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u306b\u3088\u308b\u3082\u306e\u3067\u3059\u3002\n\nBitVisor\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001BitVisor\u304c\u4f7f\u7528\u3057\u3066\u3044\u308bIP\u30a2\u30c9\u30ec\u30b9\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u9759\u7684\u306b\u5272\u308a\u632f\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u78ba\u8a8d\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3002\n\n![\u30ed\u30b0\u306e\u4e2d\u306eIP\u30a2\u30c9\u30ec\u30b9](http://www.e-hdk.com/tmp/20151204-8.jpeg)\n\nTCP/IP\u30b9\u30bf\u30c3\u30af\u306fICMP echo\u306b\u5fdc\u7b54\u3057\u307e\u3059\u3002\u307e\u305f\u3001BitVisor\u306b\u306f\u30c6\u30b9\u30c8\u7528\u306eecho\u30b5\u30fc\u30d0\u30fc\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u7c21\u5358\u306a\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\u304c\u3067\u304d\u307e\u3059\u3002\u30c6\u30b9\u30c8\u7528\u306eecho\u30b5\u30fc\u30d0\u30fc\u3092\u958b\u59cb\u3059\u308b\u306b\u306f\u3001dbgsh\u304b\u3089echoctl\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001server start\u30b3\u30de\u30f3\u30c9\u306b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n![\u30c6\u30b9\u30c8\u7528\u306eecho\u30b5\u30fc\u30d0\u30fc\u958b\u59cb](http://www.e-hdk.com/tmp/20151204-7.jpeg)\n\n\u3046\u307e\u304f\u3044\u3063\u305f\u3089\u4ed6\u306e\u30db\u30b9\u30c8\u304b\u3089\u8a66\u3057\u306b\u63a5\u7d9a\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n![\u30c6\u30b9\u30c8\u7528\u306eecho\u30b5\u30fc\u30d0\u30fc\u52d5\u4f5c\u78ba\u8a8d](http://www.e-hdk.com/tmp/20151204-6.jpeg)\n"}