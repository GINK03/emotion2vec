{"context": "\n\nKitura\u3067WebSocket\u3092\u52d5\u304b\u3059\n\n\u306f\u3058\u3081\u306b\nTwitter\u3092\u773a\u3081\u3066\u3044\u305f\u3089\u3001\n\nKitura\u3067WebSocker\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u30c4\u30a4\u30fc\u30c8\u3092\u898b\u304b\u3051\u305f\u306e\u3067\u3001\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u74b0\u5883\nMac OS X El Capitan 10.11.6\nSwift 3.0.2\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n$ mkdir SocketServer\n$ cd SocketServer\n$ swift package init --type executable\n\nSocketServer\n\u251c\u2500\u2500 Package.swift\n\u251c\u2500\u2500 Sources\n\u2502   \u2514\u2500\u2500 main.swift\n\u2514\u2500\u2500 Tests\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8ffd\u52a0\n\nPackage.swift\nimport PackageDescription\n\nlet package = Package(\n    name: \"SocketServer\",\n    dependencies: [\n        .Package(url: \"https://github.com/IBM-Swift/Kitura.git\", majorVersion: 1, minor: 5),\n        .Package(url: \"https://github.com/IBM-Swift/Kitura-WebSocket\", majorVersion: 0, minor: 5),\n        .Package(url: \"https://github.com/IBM-Swift/HeliumLogger.git\", majorVersion: 1, minor: 5)\n    ]\n)\n\n\n\u4ee5\u4e0b\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\u3002\n\nKitura\nHTTP Server\u7528\u306eWeb\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\nKitura-WebSocket\nKitura\u7528\u306eWebSocket\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\nHeliumLogger\nSwift\u7528\u306e\u30ed\u30ae\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n\u3053\u3053\u3067\u3044\u3061\u3069$ swift build\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u306e\u30af\u30ed\u30fc\u30f3\u3068\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n$ swift build\n\u30fb\u30fb\u30fb\nCompile Swift Module 'Socket' (3 sources)\nCompile Swift Module 'LoggerAPI' (1 sources)\nCompile Swift Module 'Cryptor' (10 sources)\nCompile Swift Module 'KituraTemplateEngine' (1 sources)\nCompile Swift Module 'SwiftyJSON' (2 sources)\nCompile Swift Module 'HeliumLogger' (2 sources)\nCompile Swift Module 'SSLService' (1 sources)\nCompile CHTTPParser utils.c\nCompile CHTTPParser http_parser.c\nLinking CHTTPParser\nCompile Swift Module 'KituraNet' (35 sources)\nCompile Swift Module 'KituraWebSocket' (9 sources)\nCompile Swift Module 'Kitura' (42 sources)\nCompile Swift Module 'SocketServer' (1 sources)\nLinking ./.build/debug/SocketServer\n\n\nWebSocket\u30b5\u30fc\u30d0\u306e\u5b9f\u88c5\n\nSources/main.swift\nimport Foundation\n\nimport Kitura\nimport KituraWebSocket\n\nimport HeliumLogger\n\nHeliumLogger.use()\n\nlet router = Router()\n\nWebSocket.register(service: MyService(), onPath: \"websocket\")\n\nKitura.addHTTPServer(onPort: 8090, with: router)\n\nKitura.run()\n\n\n\nSources/MyService.swift\nimport Foundation\n\nimport KituraWebSocket\nimport LoggerAPI\n\nclass MyService: WebSocketService {\n    public func connected(connection: WebSocketConnection) {}\n\n    public func disconnected(connection: WebSocketConnection, reason: WebSocketCloseReasonCode) {}\n\n    public func received(message: Data, from: WebSocketConnection) {\n        from.send(message: message)\n    }\n    public func received(message: String, from: WebSocketConnection) {\n        Log.info(\"Got message \\(message)... sending it back\")\n        from.send(message: message)\n    }\n}\n\n\n\u4eca\u56de\u306f\u30018090\u756a\u30dd\u30fc\u30c8\u306b\u5bfe\u3057\u3066websocket\u3068\u3044\u3046\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\nWebSocket\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3057\u3066\u30c6\u30ad\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3068\u3001\u9001\u4fe1\u3057\u305f\u5185\u5bb9\u3092\u305d\u306e\u307e\u307e\u8fd4\u4fe1\u3059\u308b\u3088\u3046\u306a\u30aa\u30a6\u30e0\u8fd4\u3057\u30b5\u30fc\u30d3\u30b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n$ swift build\nCompile Swift Module 'SocketServer' (2 sources)\nLinking ./.build/debug/SocketServer\n\n\n\u5b9f\u884c\n$ .build/debug/SocketServer\n\u30fb\u30fb\u30fb\n[2017-01-20T14:32:12.158+09:00] [VERBOSE] [Router.swift:67 init(mergeParameters:)] Router initialized\n[2017-01-20T14:32:12.170+09:00] [VERBOSE] [Kitura.swift:70 run()] Starting Kitura framework...\n\n[2017-01-20T14:32:12.170+09:00] [VERBOSE] [Kitura.swift:80 start()] Starting an HTTP Server on port 8090...\n[2017-01-20T14:32:12.171+09:00] [INFO] [HTTPServer.swift:85 listen(on:)] Listening on port 8090\n\nHeliumLogger\u3092\u4f7f\u7528\u3057\u305f\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306eURI\u3067WebSocket\u30b5\u30fc\u30d0\u304c\u7acb\u3063\u3066\u3044\u308b\u306e\u3067\u3001\nws://localhost:8090/websocket\n\u4e0b\u8a18\u306e\u3088\u3046\u306aWebSocket\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u63a5\u7d9a\u78ba\u8a8d\u304c\u3067\u304d\u307e\u3059\u3002\nhttp://www.websocket.org/echo.html\n\n\u53c2\u8003\nhttps://developer.ibm.com/swift/2017/01/17/working-websockets-kitura-based-server/\n\n\u3042\u3068\u304c\u304d\n\u521d\u3081\u3066Qiita\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\nKitura\u81ea\u4f53\u3001IBM\u304c\u516c\u958b\u3057\u305f\u53bb\u5e74\u306e2\u6708\u306b\u5c11\u3057\u89e6\u3063\u3066\u3084\u3081\u3066\u3057\u307e\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u4e45\u3057\u3076\u308a\u306b\u89e6\u3063\u3066\u307f\u308b\u3068\u3001\u3044\u308d\u3044\u308d\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u3066\u305f\u308a\u3001\u3060\u3044\u3076\u4f7f\u3044\u3084\u3059\u304f\u306a\u3063\u3066\u3044\u3066\u9a5a\u3044\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u304b\u3089\u3057\u3070\u3089\u304f\u3001Kitura\u3092\u89e6\u308a\u306a\u304c\u3089\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n# Kitura\u3067WebSocket\u3092\u52d5\u304b\u3059\n## \u306f\u3058\u3081\u306b\nTwitter\u3092\u773a\u3081\u3066\u3044\u305f\u3089\u3001\n\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"en\" dir=\"ltr\">Working with <a href=\"https://twitter.com/hashtag/WebSockets?src=hash\">#WebSockets</a> in a <a href=\"https://twitter.com/hashtag/Kitura?src=hash\">#Kitura</a> based server <a href=\"https://t.co/csdKHVT6uG\">https://t.co/csdKHVT6uG</a> <a href=\"https://twitter.com/hashtag/swiftlang?src=hash\">#swiftlang</a> <a href=\"https://twitter.com/hashtag/serversideswift?src=hash\">#serversideswift</a></p>&mdash; Kitura Swift (@KituraSwift) <a href=\"https://twitter.com/KituraSwift/status/821691635708915712\">2017\u5e741\u670818\u65e5</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\nKitura\u3067WebSocker\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u30c4\u30a4\u30fc\u30c8\u3092\u898b\u304b\u3051\u305f\u306e\u3067\u3001\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n## \u74b0\u5883\nMac OS X El Capitan 10.11.6\nSwift 3.0.2\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n```bash\n$ mkdir SocketServer\n$ cd SocketServer\n$ swift package init --type executable\n```\n\n```\nSocketServer\n\u251c\u2500\u2500 Package.swift\n\u251c\u2500\u2500 Sources\n\u2502   \u2514\u2500\u2500 main.swift\n\u2514\u2500\u2500 Tests\n```\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8ffd\u52a0\n\n```swift:Package.swift\nimport PackageDescription\n\nlet package = Package(\n    name: \"SocketServer\",\n    dependencies: [\n        .Package(url: \"https://github.com/IBM-Swift/Kitura.git\", majorVersion: 1, minor: 5),\n        .Package(url: \"https://github.com/IBM-Swift/Kitura-WebSocket\", majorVersion: 0, minor: 5),\n        .Package(url: \"https://github.com/IBM-Swift/HeliumLogger.git\", majorVersion: 1, minor: 5)\n    ]\n)\n```\n\n\u4ee5\u4e0b\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\u3002\n\n- **Kitura**\nHTTP Server\u7528\u306eWeb\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n- **Kitura-WebSocket**\nKitura\u7528\u306eWebSocket\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n- **HeliumLogger**\nSwift\u7528\u306e\u30ed\u30ae\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n\u3053\u3053\u3067\u3044\u3061\u3069`$ swift build`\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u306e\u30af\u30ed\u30fc\u30f3\u3068\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\n```bash\n$ swift build\n\u30fb\u30fb\u30fb\nCompile Swift Module 'Socket' (3 sources)\nCompile Swift Module 'LoggerAPI' (1 sources)\nCompile Swift Module 'Cryptor' (10 sources)\nCompile Swift Module 'KituraTemplateEngine' (1 sources)\nCompile Swift Module 'SwiftyJSON' (2 sources)\nCompile Swift Module 'HeliumLogger' (2 sources)\nCompile Swift Module 'SSLService' (1 sources)\nCompile CHTTPParser utils.c\nCompile CHTTPParser http_parser.c\nLinking CHTTPParser\nCompile Swift Module 'KituraNet' (35 sources)\nCompile Swift Module 'KituraWebSocket' (9 sources)\nCompile Swift Module 'Kitura' (42 sources)\nCompile Swift Module 'SocketServer' (1 sources)\nLinking ./.build/debug/SocketServer\n```\n\n## WebSocket\u30b5\u30fc\u30d0\u306e\u5b9f\u88c5\n\n```swift:Sources/main.swift\nimport Foundation\n\nimport Kitura\nimport KituraWebSocket\n\nimport HeliumLogger\n\nHeliumLogger.use()\n\nlet router = Router()\n\nWebSocket.register(service: MyService(), onPath: \"websocket\")\n\nKitura.addHTTPServer(onPort: 8090, with: router)\n\nKitura.run()\n```\n\n```swift:Sources/MyService.swift\nimport Foundation\n\nimport KituraWebSocket\nimport LoggerAPI\n\nclass MyService: WebSocketService {\n    public func connected(connection: WebSocketConnection) {}\n\n    public func disconnected(connection: WebSocketConnection, reason: WebSocketCloseReasonCode) {}\n\n    public func received(message: Data, from: WebSocketConnection) {\n        from.send(message: message)\n    }\n    public func received(message: String, from: WebSocketConnection) {\n        Log.info(\"Got message \\(message)... sending it back\")\n        from.send(message: message)\n    }\n}\n```\n\n\u4eca\u56de\u306f\u30018090\u756a\u30dd\u30fc\u30c8\u306b\u5bfe\u3057\u3066websocket\u3068\u3044\u3046\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\nWebSocket\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3057\u3066\u30c6\u30ad\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3068\u3001\u9001\u4fe1\u3057\u305f\u5185\u5bb9\u3092\u305d\u306e\u307e\u307e\u8fd4\u4fe1\u3059\u308b\u3088\u3046\u306a\u30aa\u30a6\u30e0\u8fd4\u3057\u30b5\u30fc\u30d3\u30b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n## \u30bd\u30fc\u30b9\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n\n```bash\n$ swift build\nCompile Swift Module 'SocketServer' (2 sources)\nLinking ./.build/debug/SocketServer\n```\n\n## \u5b9f\u884c\n```bash\n$ .build/debug/SocketServer\n\u30fb\u30fb\u30fb\n[2017-01-20T14:32:12.158+09:00] [VERBOSE] [Router.swift:67 init(mergeParameters:)] Router initialized\n[2017-01-20T14:32:12.170+09:00] [VERBOSE] [Kitura.swift:70 run()] Starting Kitura framework...\n\n[2017-01-20T14:32:12.170+09:00] [VERBOSE] [Kitura.swift:80 start()] Starting an HTTP Server on port 8090...\n[2017-01-20T14:32:12.171+09:00] [INFO] [HTTPServer.swift:85 listen(on:)] Listening on port 8090\n```\n\nHeliumLogger\u3092\u4f7f\u7528\u3057\u305f\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306eURI\u3067WebSocket\u30b5\u30fc\u30d0\u304c\u7acb\u3063\u3066\u3044\u308b\u306e\u3067\u3001\n`ws://localhost:8090/websocket`\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306aWebSocket\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u63a5\u7d9a\u78ba\u8a8d\u304c\u3067\u304d\u307e\u3059\u3002\nhttp://www.websocket.org/echo.html\n\n\n## \u53c2\u8003\nhttps://developer.ibm.com/swift/2017/01/17/working-websockets-kitura-based-server/\n\n## \u3042\u3068\u304c\u304d\n\u521d\u3081\u3066Qiita\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\nKitura\u81ea\u4f53\u3001IBM\u304c\u516c\u958b\u3057\u305f\u53bb\u5e74\u306e2\u6708\u306b\u5c11\u3057\u89e6\u3063\u3066\u3084\u3081\u3066\u3057\u307e\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u4e45\u3057\u3076\u308a\u306b\u89e6\u3063\u3066\u307f\u308b\u3068\u3001\u3044\u308d\u3044\u308d\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u3066\u305f\u308a\u3001\u3060\u3044\u3076\u4f7f\u3044\u3084\u3059\u304f\u306a\u3063\u3066\u3044\u3066\u9a5a\u3044\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u304b\u3089\u3057\u3070\u3089\u304f\u3001Kitura\u3092\u89e6\u308a\u306a\u304c\u3089\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Kitura", "websocket", "Swift", "Swift3.0"]}