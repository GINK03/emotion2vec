{"tags": ["yhpg", "\u3069\u3046\u66f8\u304f", "Erlang"], "context": " More than 1 year has passed since last update.\u300c\u5186\u5468\u4e0a\u306eCrossing\u300d\u3092Erlang\u3067\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u4ed6\u306e\u5b9f\u88c5\u306f \u7b2c14\u56de\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u306e\u53c2\u8003\u554f\u984c \u304b\u3089\u8fbf\u308c\u307e\u3059\u3002\n\u4e0e\u3048\u3089\u308c\u305f\u6587\u5b57\u3092\u968e\u6bb5\u72b6\u306b\u914d\u7f6e\u3057\u3001\u6c34\u5e73\u30fb\u5782\u76f4\u7dda\u3067\u4e0b\u306b\u3042\u308b\u540c\u3058\u6587\u5b57\u307e\u3067\u8fbf\u308a\u307e\u3059\u3002\u6c34\u5e73\u7dda\u304c\u5782\u76f4\u7dda\u3092\u6a2a\u5207\u3063\u305f\u6570\u3092\u6570\u3048\u308c\u3070\u305d\u308c\u304c\u7b54\u3048\u306b\u306a\u308a\u307e\u3059\u3002\n\n\ncrosscircle.erl\n-module(crosscircle).\n-compile(export_all).\n\n%% \u89e3\u304f\nsolve(Data) ->\n  integer_to_list(solve([{X, 0} || X <- Data], 0)).\n\nsolve([], Total) ->\n  Total;\nsolve([{FirstChar, _} | Rest], Total) ->\n  WithDistance = line_to_distance(Rest),            % \u7dda\u306e\u672c\u6570\u2192\u8ddd\u96e2\n  Distance = sum_distance(FirstChar, WithDistance), % \u8ddd\u96e2\u3092\u5408\u8a08\n  LineAdded = add_line(FirstChar, Rest),            % \u65b0\u305f\u306b\u7dda\u3092\u5f15\u304f\n  solve(LineAdded, Total + Distance).               % \u6b21\u306e\u6587\u5b57\u3078\n\n%% \u5148\u982d\u304b\u3089\u5404\u6587\u5b57\u307e\u3067\u306e\u8ddd\u96e2(\u4ea4\u5dee\u3059\u308b\u7dda\u306e\u6570)\u3092\u8a08\u7b97\u3059\u308b\n%% {\u6587\u5b57, \u7dda\u306e\u6570}\u306e\u30ea\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308a{\u6587\u5b57, \u8ddd\u96e2}\u306e\u30ea\u30b9\u30c8\u3092\u8fd4\u3059\nline_to_distance(L) ->\n  F = fun({Char, Line}, {Distance, Ret}) ->\n    {Distance + Line, [{Char, Distance} | Ret]} end,\n  lists:reverse(element(2, lists:foldl(F, {0, []}, L))).\n\n%% \u30ea\u30b9\u30c8\u306e\u5148\u982d\u306e\u6587\u5b57\u304b\u3089\u5f8c\u7d9a\u306e\u540c\u3058\u6587\u5b57\u307e\u3067\u306e\u9593\u306b\u4ea4\u5dee\u3059\u308b\u7dda\u306e\u6570\u3092\u8fd4\u3059\nsum_distance(FirstChar, Rest) ->\n  lists:sum([Distance || {Char, Distance} <- Rest, Char =:= FirstChar]).\n\n%% \u30ea\u30b9\u30c8\u306e\u5148\u982d\u306e\u6587\u5b57\u304b\u3089\u5f8c\u7d9a\u306e\u540c\u3058\u6587\u5b57\u3078\u7dda\u3092\u5f15\u304f\nadd_line(FirstChar, Rest) ->\n  Same = fun(Char) -> % \u540c\u3058\u6587\u5b57\u306a\u30891\u3001\u9055\u3046\u6587\u5b57\u306a\u30890\u3092\u8fd4\u3059\u95a2\u6570\n    case Char of FirstChar -> 1; _ -> 0 end end,\n  [{Char, Line + Same(Char)} || {Char, Line} <- Rest].\n\ntest(Data, Expected) ->\n  Result = solve(Data),\n  OkNg = case Result =:= Expected of true -> ok; false -> ng end,\n  io:fwrite(\"~s: ~s -> ~s~n\", [OkNg, Data, Result]).\n\ntests() ->\n  test(\"aabbca1bcb\", \"14\"), %0\n  test(\"111ZZZ\", \"0\"), %1\n  test(\"v\", \"0\"), %2\n  test(\"ww\", \"0\"), %3\n  test(\"xxx\", \"0\"), %4\n  test(\"yyyy\", \"1\"), %5\n  test(\"zzzzz\", \"5\"), %6\n  test(\"abcdef\", \"0\"), %7\n  test(\"abcaef\", \"0\"), %8\n  test(\"abbaee\", \"0\"), %9\n  test(\"abcacb\", \"2\"), %10\n  test(\"abcabc\", \"3\"), %11\n  test(\"abcdabcd\", \"6\"), %12\n  test(\"abcadeabcade\", \"23\"), %13\n  test(\"abcdeedcba\", \"0\"), %14\n  test(\"abcdeaedcba\", \"8\"), %15\n  test(\"abcdeaedcbad\", \"16\"), %16\n  test(\"QQQQXXXX\", \"2\"), %17\n  test(\"QwQQmQXmXXwX\", \"14\"), %18\n  test(\"111222333\", \"0\"), %19\n  test(\"aaAAaA\", \"4\"), %20\n  test(\"121232313\", \"12\"), %21\n  test(\"1ab1b\", \"1\"), %22\n  test(\"abcdefbadcfe\", \"12\"), %23\n  test(\"abxcdefbadcfex\", \"14\"), %24\n  test(\"dtnwtkt\", \"0\"), %25\n  test(\"mvubvpp\", \"0\"), %26\n  test(\"moggscd\", \"0\"), %27\n  test(\"kzkjzpkw\", \"2\"), %28\n  test(\"fbifybre\", \"1\"), %29\n  test(\"rrrfjryki\", \"1\"), %30\n  test(\"wrbbdwsdwtx\", \"2\"), %31\n  test(\"vvucugvxbvgx\", \"9\"), %32\n  test(\"ojkjzyasjwbfjj\", \"5\"), %33\n  test(\"ggffyuxnkyypifff\", \"5\"), %34\n  test(\"vcgtcqlwrepwvkkogl\", \"4\"), %35\n  test(\"xeqtmmgppwcjpcisogxbs\", \"4\"), %36\n  test(\"lukltpeucrqfvcupnpxwmoj\", \"6\"), %37\n  test(\"zpzswlkkoqwwndwpfdpkhtzgtn\", \"31\"), %38\n  test(\"bkfeflagfvluelududqjcvfyvytfw\", \"45\"), %39\n  test(\"rvqbhfmcjjqlpqzulzerxgyowiwrfkmhw\", \"26\"), %40\n  test(\"qyxvpdtoeexbqsethwjwmqszcxxjnsdoeaet\", \"144\"), %41\n  test(\"rjmsgmswhcolmpbhmpncziymydyalrcnevsrespj\", \"133\"), %42\n  test(\"oxetnyjzjbysnwktfwzndlejfndsqeetsnjvsicyjehd\", \"395\"), %43\n  test(\"wzvddnddzogywcqxbyvagbzmsmtcmrrlbnebmvhaemjouaqim\", \"219\"), %44\n  test(\"karhphxcxqgsyorhusbumbqzocuzvnwzwcpxgsksrviihxrgsrhji\", \"461\"), %45\n  test(\"oxgbononhqdxzmkysgijwvxljpaazmgkurkpffeuwywwuyxhyfkicgyzyc\", \"441\"), %46\n  test(\"sdgsrddwsrwqthhdvhrjhgtxwgurgyiygtktgtughtogzaqmcafkljgpniddsvb\", \"1077\"), %47\n  test(\"qemhecchkgzhxmdcsltwhpoyhkapckkkzosmklcvzkiiucrvzzznmhjfcdumuflavxik\", \"1711\"), %48\n  test(\"ffqmsirwpxrzfkbvmmfeptkbhnrvfcywthkwkbycmayhhkgvuyecbwwofwthlmzruphrcujwhr\", \"2440\"). %49\n\n\n\u7d50\u679c\u306e\u4e00\u90e8:\nok: aabbca1bcb -> 14\nok: 111ZZZ -> 0\nok: v -> 0\n...\n\n\u300c[\u5186\u5468\u4e0a\u306eCrossing](http://nabetani.sakura.ne.jp/hena/ord14crosscircle/)\u300d\u3092Erlang\u3067\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u4ed6\u306e\u5b9f\u88c5\u306f [\u7b2c14\u56de\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u306e\u53c2\u8003\u554f\u984c](http://qiita.com/Nabetani/items/66806c9dc14a96f2fd42) \u304b\u3089\u8fbf\u308c\u307e\u3059\u3002\n\n\u4e0e\u3048\u3089\u308c\u305f\u6587\u5b57\u3092\u968e\u6bb5\u72b6\u306b\u914d\u7f6e\u3057\u3001\u6c34\u5e73\u30fb\u5782\u76f4\u7dda\u3067\u4e0b\u306b\u3042\u308b\u540c\u3058\u6587\u5b57\u307e\u3067\u8fbf\u308a\u307e\u3059\u3002\u6c34\u5e73\u7dda\u304c\u5782\u76f4\u7dda\u3092\u6a2a\u5207\u3063\u305f\u6570\u3092\u6570\u3048\u308c\u3070\u305d\u308c\u304c\u7b54\u3048\u306b\u306a\u308a\u307e\u3059\u3002\n\n![\u56f3: \u6c34\u5e73\u7dda\u304c\u5782\u76f4\u7dda\u3092\u6a2a\u5207\u3063\u305f\u6570\u3092\u6570\u3048\u308b](http://cdn-ak.f.st-hatena.com/images/fotolife/p/paz3/20131004/20131004124642.png)\n\n```erlang:crosscircle.erl\n-module(crosscircle).\n-compile(export_all).\n\n%% \u89e3\u304f\nsolve(Data) ->\n  integer_to_list(solve([{X, 0} || X <- Data], 0)).\n\nsolve([], Total) ->\n  Total;\nsolve([{FirstChar, _} | Rest], Total) ->\n  WithDistance = line_to_distance(Rest),            % \u7dda\u306e\u672c\u6570\u2192\u8ddd\u96e2\n  Distance = sum_distance(FirstChar, WithDistance), % \u8ddd\u96e2\u3092\u5408\u8a08\n  LineAdded = add_line(FirstChar, Rest),            % \u65b0\u305f\u306b\u7dda\u3092\u5f15\u304f\n  solve(LineAdded, Total + Distance).               % \u6b21\u306e\u6587\u5b57\u3078\n\n%% \u5148\u982d\u304b\u3089\u5404\u6587\u5b57\u307e\u3067\u306e\u8ddd\u96e2(\u4ea4\u5dee\u3059\u308b\u7dda\u306e\u6570)\u3092\u8a08\u7b97\u3059\u308b\n%% {\u6587\u5b57, \u7dda\u306e\u6570}\u306e\u30ea\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308a{\u6587\u5b57, \u8ddd\u96e2}\u306e\u30ea\u30b9\u30c8\u3092\u8fd4\u3059\nline_to_distance(L) ->\n  F = fun({Char, Line}, {Distance, Ret}) ->\n    {Distance + Line, [{Char, Distance} | Ret]} end,\n  lists:reverse(element(2, lists:foldl(F, {0, []}, L))).\n\n%% \u30ea\u30b9\u30c8\u306e\u5148\u982d\u306e\u6587\u5b57\u304b\u3089\u5f8c\u7d9a\u306e\u540c\u3058\u6587\u5b57\u307e\u3067\u306e\u9593\u306b\u4ea4\u5dee\u3059\u308b\u7dda\u306e\u6570\u3092\u8fd4\u3059\nsum_distance(FirstChar, Rest) ->\n  lists:sum([Distance || {Char, Distance} <- Rest, Char =:= FirstChar]).\n\n%% \u30ea\u30b9\u30c8\u306e\u5148\u982d\u306e\u6587\u5b57\u304b\u3089\u5f8c\u7d9a\u306e\u540c\u3058\u6587\u5b57\u3078\u7dda\u3092\u5f15\u304f\nadd_line(FirstChar, Rest) ->\n  Same = fun(Char) -> % \u540c\u3058\u6587\u5b57\u306a\u30891\u3001\u9055\u3046\u6587\u5b57\u306a\u30890\u3092\u8fd4\u3059\u95a2\u6570\n    case Char of FirstChar -> 1; _ -> 0 end end,\n  [{Char, Line + Same(Char)} || {Char, Line} <- Rest].\n\ntest(Data, Expected) ->\n  Result = solve(Data),\n  OkNg = case Result =:= Expected of true -> ok; false -> ng end,\n  io:fwrite(\"~s: ~s -> ~s~n\", [OkNg, Data, Result]).\n\ntests() ->\n  test(\"aabbca1bcb\", \"14\"), %0\n  test(\"111ZZZ\", \"0\"), %1\n  test(\"v\", \"0\"), %2\n  test(\"ww\", \"0\"), %3\n  test(\"xxx\", \"0\"), %4\n  test(\"yyyy\", \"1\"), %5\n  test(\"zzzzz\", \"5\"), %6\n  test(\"abcdef\", \"0\"), %7\n  test(\"abcaef\", \"0\"), %8\n  test(\"abbaee\", \"0\"), %9\n  test(\"abcacb\", \"2\"), %10\n  test(\"abcabc\", \"3\"), %11\n  test(\"abcdabcd\", \"6\"), %12\n  test(\"abcadeabcade\", \"23\"), %13\n  test(\"abcdeedcba\", \"0\"), %14\n  test(\"abcdeaedcba\", \"8\"), %15\n  test(\"abcdeaedcbad\", \"16\"), %16\n  test(\"QQQQXXXX\", \"2\"), %17\n  test(\"QwQQmQXmXXwX\", \"14\"), %18\n  test(\"111222333\", \"0\"), %19\n  test(\"aaAAaA\", \"4\"), %20\n  test(\"121232313\", \"12\"), %21\n  test(\"1ab1b\", \"1\"), %22\n  test(\"abcdefbadcfe\", \"12\"), %23\n  test(\"abxcdefbadcfex\", \"14\"), %24\n  test(\"dtnwtkt\", \"0\"), %25\n  test(\"mvubvpp\", \"0\"), %26\n  test(\"moggscd\", \"0\"), %27\n  test(\"kzkjzpkw\", \"2\"), %28\n  test(\"fbifybre\", \"1\"), %29\n  test(\"rrrfjryki\", \"1\"), %30\n  test(\"wrbbdwsdwtx\", \"2\"), %31\n  test(\"vvucugvxbvgx\", \"9\"), %32\n  test(\"ojkjzyasjwbfjj\", \"5\"), %33\n  test(\"ggffyuxnkyypifff\", \"5\"), %34\n  test(\"vcgtcqlwrepwvkkogl\", \"4\"), %35\n  test(\"xeqtmmgppwcjpcisogxbs\", \"4\"), %36\n  test(\"lukltpeucrqfvcupnpxwmoj\", \"6\"), %37\n  test(\"zpzswlkkoqwwndwpfdpkhtzgtn\", \"31\"), %38\n  test(\"bkfeflagfvluelududqjcvfyvytfw\", \"45\"), %39\n  test(\"rvqbhfmcjjqlpqzulzerxgyowiwrfkmhw\", \"26\"), %40\n  test(\"qyxvpdtoeexbqsethwjwmqszcxxjnsdoeaet\", \"144\"), %41\n  test(\"rjmsgmswhcolmpbhmpncziymydyalrcnevsrespj\", \"133\"), %42\n  test(\"oxetnyjzjbysnwktfwzndlejfndsqeetsnjvsicyjehd\", \"395\"), %43\n  test(\"wzvddnddzogywcqxbyvagbzmsmtcmrrlbnebmvhaemjouaqim\", \"219\"), %44\n  test(\"karhphxcxqgsyorhusbumbqzocuzvnwzwcpxgsksrviihxrgsrhji\", \"461\"), %45\n  test(\"oxgbononhqdxzmkysgijwvxljpaazmgkurkpffeuwywwuyxhyfkicgyzyc\", \"441\"), %46\n  test(\"sdgsrddwsrwqthhdvhrjhgtxwgurgyiygtktgtughtogzaqmcafkljgpniddsvb\", \"1077\"), %47\n  test(\"qemhecchkgzhxmdcsltwhpoyhkapckkkzosmklcvzkiiucrvzzznmhjfcdumuflavxik\", \"1711\"), %48\n  test(\"ffqmsirwpxrzfkbvmmfeptkbhnrvfcywthkwkbycmayhhkgvuyecbwwofwthlmzruphrcujwhr\", \"2440\"). %49\n```\n\n\u7d50\u679c\u306e\u4e00\u90e8:\n\n<pre>\nok: aabbca1bcb -> 14\nok: 111ZZZ -> 0\nok: v -> 0\n...\n</pre>\n"}