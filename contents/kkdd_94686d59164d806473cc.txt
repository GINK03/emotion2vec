{"context": " More than 1 year has passed since last update.\u3053\u3093\u306b\u3061\u306f\u3002\nGoogle Maps \u3067 kml \u30c7\u30fc\u30bf\u8868\u793a\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u666e\u901a\u306f google.maps.KmlLayer \u5229\u7528\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001geoxml3 \u3092\u5229\u7528\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u307f\u307e\u3057\u305f\u3002\n\u4e0b\u8a18\u8868\u793a\u4f8b\u306f \"KML Layers\" (Google Maps JavaScript API) \u306e\u30c7\u30fc\u30bf\u3092\u5229\u7528\u3002\n\n<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n<meta charset=\"utf-8\">\n<title>Reading KML Files with Google Maps</title>\n<style type=\"text/css\">\nhtml, body { height: 100%; margin: 0; padding: 0;}\n#map_canvas { height: 100%;}\n.geoxml3_infowindow * {font-size: 90%; margin: 0}\n</style>\n\n<script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=false\"></script>\n<script type=\"text/javascript\" src=\"http://geoxml3.googlecode.com/svn/branches/kmz/geoxml3.js\"></script>\n\n<script type=\"text/javascript\">\nvar map = null;\nvar geoXml = null;\nvar par = {lon: 140.000, lat: 35.500, zoom: 10};\n\nfunction gpos(obj) {\n    return new google.maps.LatLng(obj['lat'], obj['lon']);\n}\n\nfunction initialize() {\n    var maptype = google.maps.MapTypeId.ROADMAP;\n    var mapOptions = {\n        center: gpos(par),\n        zoom: par['zoom'],\n        mapTypeId: maptype,\n        scaleControl: true,\n    };\n    var mapDiv = document.getElementById('map_canvas');\n    map = new google.maps.Map(mapDiv, mapOptions);\n\n    var infowindow = new google.maps.InfoWindow({});\n    geoXml = new geoXML3.parser({\n                    map: map,\n                    infoWindow: infowindow,\n                    singleInfoWindow: true,\n                    zoom: true,\n                });\n};\n\nfunction readFiles(files) {\n    for (var i = 0, file; file = files[i]; i++) {\n        readKML(file);\n    }\n}\n\nfunction readKML(inFile) {\n    var reader = new FileReader();\n    reader.onload=function(e){\n        geoXml.parseKmlString(reader.result);\n    };\n    reader.readAsText(inFile, 'utf-8');\n}\n\nfunction handleFileSelect(evt) {\n    readFiles(evt.target.files);\n    document.getElementById('form').style.display = \"none\";\n}\n\n</script>\n</head>\n<body onload=\"initialize()\">\n  <form id=\"form\" style=\"height:32px;background-color:#f0f0f0;\"> &nbsp;\n  <input type=\"file\" id=\"file\" name=\"file\" title=\"Load local kml file\" accept='.kml' />\n  </form>\n  <script>document.getElementById('file').addEventListener('change', handleFileSelect, false);</script>\n  <div id=\"map_canvas\"></div>\n</body>\n</html>\n\n\n\u3053\u3093\u306b\u3061\u306f\u3002\nGoogle Maps \u3067 kml \u30c7\u30fc\u30bf\u8868\u793a\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u666e\u901a\u306f google.maps.KmlLayer \u5229\u7528\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001geoxml3 \u3092\u5229\u7528\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u307f\u307e\u3057\u305f\u3002\n\n\u4e0b\u8a18\u8868\u793a\u4f8b\u306f \"[KML Layers](https://developers.google.com/maps/documentation/javascript/examples/layer-kml)\" (Google Maps JavaScript API) \u306e\u30c7\u30fc\u30bf\u3092\u5229\u7528\u3002\n![kml.jpg](https://qiita-image-store.s3.amazonaws.com/0/54617/d7145327-8d80-a32c-6657-81c48ddec52f.jpeg)\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n<meta charset=\"utf-8\">\n<title>Reading KML Files with Google Maps</title>\n<style type=\"text/css\">\nhtml, body { height: 100%; margin: 0; padding: 0;}\n#map_canvas { height: 100%;}\n.geoxml3_infowindow * {font-size: 90%; margin: 0}\n</style>\n\n<script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=false\"></script>\n<script type=\"text/javascript\" src=\"http://geoxml3.googlecode.com/svn/branches/kmz/geoxml3.js\"></script>\n\n<script type=\"text/javascript\">\nvar map = null;\nvar geoXml = null;\nvar par = {lon: 140.000, lat: 35.500, zoom: 10};\n\nfunction gpos(obj) {\n    return new google.maps.LatLng(obj['lat'], obj['lon']);\n}\n\nfunction initialize() {\n\tvar maptype = google.maps.MapTypeId.ROADMAP;\n\tvar mapOptions = {\n\t\tcenter: gpos(par),\n\t\tzoom: par['zoom'],\n\t\tmapTypeId: maptype,\n\t\tscaleControl: true,\n\t};\n    var mapDiv = document.getElementById('map_canvas');\n\tmap = new google.maps.Map(mapDiv, mapOptions);\n \n\tvar infowindow = new google.maps.InfoWindow({});\n\tgeoXml = new geoXML3.parser({\n\t                map: map,\n\t                infoWindow: infowindow,\n\t                singleInfoWindow: true,\n\t                zoom: true,\n\t            });\n};\n\nfunction readFiles(files) {\n    for (var i = 0, file; file = files[i]; i++) {\n        readKML(file);\n    }\n}\n\nfunction readKML(inFile) {\n    var reader = new FileReader();\n    reader.onload=function(e){\n        geoXml.parseKmlString(reader.result);\n    };\n    reader.readAsText(inFile, 'utf-8');\n}\n\nfunction handleFileSelect(evt) {\n    readFiles(evt.target.files);\n    document.getElementById('form').style.display = \"none\";\n}\n\n</script>\n</head>\n<body onload=\"initialize()\">\n  <form id=\"form\" style=\"height:32px;background-color:#f0f0f0;\"> &nbsp;\n  <input type=\"file\" id=\"file\" name=\"file\" title=\"Load local kml file\" accept='.kml' />\n  </form>\n  <script>document.getElementById('file').addEventListener('change', handleFileSelect, false);</script>\n  <div id=\"map_canvas\"></div>\n</body>\n</html>\n```\n", "tags": ["JavaScript", "GoogleMapsAPI", "KML", "GIS", "\u5730\u56f3"]}