{"tags": ["Redmine", "redmine_plugin"], "context": "\n\nRedmine2\u304b\u3089Redmine3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\nRedmine3\u3067\u306fIssueExtensions\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u52d5\u4f5c\u3057\u306a\u3044\u305f\u3081\u8a66\u884c\u932f\u8aa4\u3057\u3066\u306a\u3093\u3068\u304b\u52d5\u304f\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\u306a\u304a\u3001Ruby\u3082Rais\u3082\u5168\u304f\u3057\u3089\u306a\u3044\u306e\u3067\u5168\u3066\u4fe1\u7528\u3057\u306a\u3044\u3067\u9802\u304d\u305f\u3044\u3002\nEnvironment:\n  Redmine version                3.3.0.stable.15663\n  Ruby version                   2.2.5-p319 (2016-04-26) [x86_64-linux]\n  Rails version                  4.2.6\n  Environment                    production\n  Database adapter               Mysql2\n\n\n\u30d9\u30fc\u30b9\u3068\u3059\u308bIssueExtensions\nhttp://www.r-labs.org/projects/issueext \u3092\u4f7f\u3063\u3066\u3044\u305f\u304c\nhttps://github.com/planio-gmbh/edmine_issue_extensions \u306b\u3057\u3066\u307f\u308b\u3002\n\n\u521d\u671f\u8a2d\u5b9a\n\nRedmine2\u304b\u3089Redmine3\u3078\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u30a8\u30e9\u30fc\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6b8b\u3057\u5fd8\u308c\u3066\u3044\u305f\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3060\u3063\u305f\u304b\u3068\u2026\nAn error occurred while loading the routes definition of redmine_issue_extensions plugin (/var/lib/redmine-3.3/plugins/redmine_issue_extensions/config/routes.rb): You should not use the `match` method in your router without specifying an HTTP method.\nIf you want to expose your action to both GET and POST, add `via: [:get, :post]` option.\nIf you want to expose your action to GET, use `get` in the router:\n  Instead of: match \"controller#action\"\n  Do: get \"controller#action\".\n\n\nredmine_issue_extensions/config/routes.rb\n*** 17,22 ****\n\n  RedmineApp::Application.routes.draw do\n    match 'issue_extensions/:action', :controller => 'issue_extensions', :via => [:get, :post]\n!   match 'issue_extensions_settings/:action', :controller => 'issue_extensions_settings'\n    match 'issue_relations/:action', :controller => 'issue_relations', :via => [:get, :post]\n  end\n--- 17,22 ----\n\n  RedmineApp::Application.routes.draw do\n    match 'issue_extensions/:action', :controller => 'issue_extensions', :via => [:get, :post]\n!   match 'issue_extensions_settings/:action', :controller => 'issue_extensions_settings', :via => [:get, :post, :put, :patch]\n    match 'issue_relations/:action', :controller => 'issue_relations', :via => [:get, :post]\n  end\n\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u753b\u9762\u304c\u958b\u304b\u306a\u3044\nActiveRecord::RecordNotFound (Couldn't find all IssueExtensionsStatusFlows with 'id': (first, {:conditions=>[\"project_id = ?\", 2]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/app/models/issue_extensions_status_flow.rb:21:in `find_or_create'\n  plugins/redmine_issue_extensions/app/views/issue_extensions_settings/_show.html.erb:21:in `_plugins_redmine_issue_extensions_app_views_issue_extensions_settings__show_html_erb__2241146892683185007_70191963673200'\n\n\nredmine_issue_extensions/app/models/issue_extensions_status_flow.rb\n*** 18,24 ****\n    belongs_to :project\n\n    def self.find_or_create project_id, user_id\n!     status_flow = IssueExtensionsStatusFlow.find :first, :conditions => ['project_id = ?', project_id]\n      unless status_flow\n        status_flow = IssueExtensionsStatusFlow.new\n        status_flow.project_id = project_id\n--- 18,24 ----\n    belongs_to :project\n\n    def self.find_or_create project_id, user_id\n!     status_flow = IssueExtensionsStatusFlow.find_by :project_id => project_id\n      unless status_flow\n        status_flow = IssueExtensionsStatusFlow.new\n        status_flow.project_id = project_id\n\n\nActiveRecord::RecordNotFound (Couldn't find all IssueStatuses with 'id': (all, {:order=>\"position\"}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/app/views/issue_extensions_settings/_show.html.erb:22:in `_plugins_redmine_issue_extensions_app_views_issue_extensions_settings__show_html_erb___3067774532135620242_70290714364540'\n\n\nredmine_issue_extensions/app/views/issue_extensions_settings/_show.html.erb\n*** 19,25 ****\n  <div id=\"issue_extension_settings\">\n  <%\n  @issue_extension_status_flow = IssueExtensionsStatusFlow.find_or_create(@project.id, User.current.id)\n! @statuses = IssueStatus.find(:all, :order => 'position') %>\n  <%= labelled_form_for :setting, @issue_extension_status_flow,\n                               :url => {:controller => 'issue_extensions_settings',\n                                 :action => 'update', :id => @project, :tab => 'issue_extensions',\n--- 19,25 ----\n  <div id=\"issue_extension_settings\">\n  <%\n  @issue_extension_status_flow = IssueExtensionsStatusFlow.find_or_create(@project.id, User.current.id)\n! @statuses = IssueStatus.order(:position) %>\n  <%= labelled_form_for :setting, @issue_extension_status_flow,\n                               :url => {:controller => 'issue_extensions_settings',\n                                 :action => 'update', :id => @project, :tab => 'issue_extensions',\n\n\n\nIssueExtensions\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u306e\u66f4\u65b0\u3067\u30a8\u30e9\u30fc\nActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):\n  plugins/redmine_issue_extensions/app/controllers/issue_extensions_settings_controller.rb:25:in `update'\n\n\nredmine_issue_extensions/app/controllers/issue_extensions_settings_controller.rb\n*** 21,26 ****\n--- 21,27 ----\n    before_filter :find_project, :find_user, :authorize\n\n    def update\n+     params.permit!\n      @issue_extension_status_flow = IssueExtensionsStatusFlow.find_or_create(@project.id, @user.id)\n      @issue_extension_status_flow.attributes = params[:setting]\n      @issue_extension_status_flow.updated_by = @user.id\n\n\n\n\u30c1\u30b1\u30c3\u30c8\u306e\u7de8\u96c6(\u4fdd\u5b58)\u3067\u306e\u30a8\u30e9\u30fc\nActiveRecord::RecordNotFound (Couldn't find all IssueExtensionsStatusFlows with 'id': (first, {:conditions=>[\"project_id = ?\", 5]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:61:in `issue_status_assigned'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:31:in `controller_issues_edit_before_save'\n\n\nredmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 58,64 ****\n    # \u30c1\u30b1\u30c3\u30c8\u306b\u62c5\u5f53\u8005\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b && \u72b6\u614b\u304c\u65b0\u898f\u306e\u5834\u5408\u3001\u62c5\u5f53\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_assigned context\n      issue = context[:issue]\n!     issue_status = IssueExtensionsStatusFlow.find :first, :conditions => ['project_id = ?', issue[:project_id].to_i]\n\n      if issue_status.old_status_id == issue[:status_id]\n          issue[:status_id] = issue_status.new_status_id\n--- 58,64 ----\n    # \u30c1\u30b1\u30c3\u30c8\u306b\u62c5\u5f53\u8005\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b && \u72b6\u614b\u304c\u65b0\u898f\u306e\u5834\u5408\u3001\u62c5\u5f53\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_assigned context\n      issue = context[:issue]\n!     issue_status = IssueExtensionsStatusFlow.find_by :project_id => issue[:project_id].to_i\n\n      if issue_status.old_status_id == issue[:status_id]\n          issue[:status_id] = issue_status.new_status_id\n\n\nActiveRecord::RecordNotFound (Couldn't find all IssueStatuses with 'id': (all, {:conditions=>[\"is_closed = (?)\", true]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:72:in `issue_status_closed'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:32:in `controller_issues_edit_before_save'\n\n\nredmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 69,75 ****\n    # \u30c1\u30b1\u30c3\u30c8\u304c\u30af\u30ed\u30fc\u30ba\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u9032\u6357\u3092100%\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_closed context\n      issue = context[:issue]\n!     issue_status_closed = IssueStatus.find :all, :conditions => [\"is_closed = (?)\", true]\n\n      issue_status_closed.each {|closed|\n        if closed.id == issue[:status_id].to_i && issue[:done_ratio] != 100\n--- 69,75 ----\n    # \u30c1\u30b1\u30c3\u30c8\u304c\u30af\u30ed\u30fc\u30ba\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u9032\u6357\u3092100%\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_closed context\n      issue = context[:issue]\n!     issue_status_closed = IssueStatus.where(\"is_closed = true\")\n\n      issue_status_closed.each {|closed|\n        if closed.id == issue[:status_id].to_i && issue[:done_ratio] != 100\n\n\nActiveRecord::RecordNotFound (Couldn't find all Watchers with 'id': (first, {:conditions=>false}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:87:in `issue_added_watcher'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:33:in `controller_issues_edit_before_save'\n\n\nredmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 84,90 ****\n      issue = context[:issue]\n      journal = context[:journal]\n\n!     if Watcher.find :first, :conditions =>[\"watchable_type = (?) and watchable_id = (?) and user_id = (?)\", journal[:journalized_type], issue[:id].to_i, journal[:user_id].to_i] == nil\n          hash_watcher = HashWithIndifferentAccess.new\n          hash_watcher[:user_id]  = journal[:user_id].to_s\n          watcher = Watcher.new(hash_watcher)\n--- 84,90 ----\n      issue = context[:issue]\n      journal = context[:journal]\n\n!     if Watcher.where(\"watchable_type = (?) and watchable_id = (?) and user_id = (?)\", journal[:journalized_type], issue[:id].to_i, journal[:user_id].to_i).first == nil\n          hash_watcher = HashWithIndifferentAccess.new\n          hash_watcher[:user_id]  = journal[:user_id].to_s\n          watcher = Watcher.new(hash_watcher)\n\n\n\n\u5404\u6a5f\u80fd\u306e\u52d5\u4f5c\n\n\u81ea\u52d5\u30a2\u30b5\u30a4\u30f3\u6a5f\u80fd\n\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u672a\u78ba\u8a8d\u3002\n\n\u81ea\u52d5\u30af\u30ed\u30fc\u30ba\u6a5f\u80fd\n\u3053\u3053\u307e\u3067\u306e\u5909\u66f4\u3067\u554f\u984c\u306a\u3057\u3002\n\n\u81ea\u52d5\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc\u6a5f\u80fd\n\u3053\u3053\u307e\u3067\u306e\u5909\u66f4\u3067\u554f\u984c\u306a\u3057\u3002\n\n\u95a2\u9023\u3059\u308b\u30c1\u30b1\u30c3\u30c8\u4f5c\u6210\u6a5f\u80fd\n\u30a8\u30e9\u30fc\u3068\u306a\u3063\u305f\u305f\u3081\u5bfe\u5fdc\u3002\nActiveRecord::RecordNotFound (Couldn't find all Issues with 'id': (first, {:conditions=>[\"id = (?)\", 1034]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:101:in `issue_added_relation'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:53:in `controller_issues_new_after_save'\n\n\nredmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 98,104 ****\n    def issue_added_relation context\n      issue = context[:issue]\n      params = context[:params]\n!     from_issue = Issue.find :first, :conditions =>[\"id = (?)\", params[:relation_issue_id].to_i]\n      unless from_issue == nil\n        relation = IssueRelation.new\n        relation.relation_type = IssueRelation::TYPE_RELATES\n--- 98,104 ----\n    def issue_added_relation context\n      issue = context[:issue]\n      params = context[:params]\n!     from_issue = Issue.find_by :id => params[:relation_issue_id].to_i\n      unless from_issue == nil\n        relation = IssueRelation.new\n        relation.relation_type = IssueRelation::TYPE_RELATES\n\n\n\n\u30c1\u30b1\u30c3\u30c8\u691c\u7d22\u6a5f\u80fd\n\u3053\u306e\u6a5f\u80fd\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u3002\u6709\u52b9\u306a\u306e\u304b\uff1f\n\n\n\u30c1\u30b1\u30c3\u30c8\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u300c\u984c\u540d\u300d\u306e\u96a3\u306e\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306b\u691c\u7d22\u3057\u305f\u3044\u30c1\u30b1\u30c3\u30c8\u306e\u984c\u540d\u3092\u8a18\u5165\u3057\u3001\u300c\u9069\u7528\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u691c\u7d22\u7d50\u679c\u304c\u3001\u300c\u30d2\u30c3\u30c8\u3057\u305f\u30c1\u30b1\u30c3\u30c8\u300d\u4e2d\u306b\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u95a2\u9023\u4ed8\u3051\u3057\u305f\u3044\u30c1\u30b1\u30c3\u30c8\u306e\u95a2\u9023\u4ed8\u3051\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u95a2\u9023\u4ed8\u3051\u3055\u308c\u307e\u3059\u3002 \n\n\n\u95a2\u9023\u4ed8\u3051\u4ee5\u5916(\u91cd\u8907\u3084\u30d6\u30ed\u30c3\u30af\u3001\u5148\u884c\u30fb\u5f8c\u7d9a)\u306f\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30c1\u30b1\u30c3\u30c8\u756a\u53f7\u3092\u53c2\u8003\u306b\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n\n\n\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u6a5f\u80fd\n\u3053\u3053\u307e\u3067\u306e\u5909\u66f4\u3067\u554f\u984c\u306a\u3057\u3002\n\n\u65b0\u898f\u8907\u88fd\u6a5f\u80fd\nProcessing by IssuesController#new as HTML\n  Parameters: {\"duplicate_issue\"=>\"t\", \"project_id\"=>\"5\", \"copy_from\"=>\"1034\"}\n  Current user: foo (id=3)\n  Rendered common/error.html.erb within layouts/base (0.1ms)\n  Rendered plugins/redmine_code_review/app/views/code_review/_html_header.html.erb (0.1ms)\n  Rendered plugins/redmine_wiki_extensions/app/views/wiki_extensions/_html_header.html.erb (0.0ms)\n  Rendered plugins/sidebar_hide/app/views/sidebar/_hideButton_partial.html.erb (0.3ms)\n  Rendered plugins/redmine_code_review/app/views/code_review/_body_bottom.html.erb (0.0ms)\n  Rendered plugins/redmine_wiki_extensions/app/views/wiki_extensions/_body_bottom.html.erb (0.0ms)\nCompleted 403 Forbidden in 136ms (Views: 13.1ms | ActiveRecord: 62.6ms)\n\n\u30ed\u30fc\u30eb\u3068\u6a29\u9650\u306e\u8a2d\u5b9a\u3067\u300c\u30c1\u30b1\u30c3\u30c8\u306e\u30b3\u30d4\u30fc\u300d\u3092\u884c\u3046\u6a29\u9650\u304c\u306a\u304b\u3063\u305f\u305f\u3081\u3002\n\u6a29\u9650\u3092\u8ffd\u52a0\u3057\u305f\u3053\u3068\u308d\u554f\u984c\u306a\u3057\u3002\n# Redmine2\u304b\u3089Redmine3\u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\nRedmine3\u3067\u306fIssueExtensions\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u52d5\u4f5c\u3057\u306a\u3044\u305f\u3081\u8a66\u884c\u932f\u8aa4\u3057\u3066\u306a\u3093\u3068\u304b\u52d5\u304f\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\u306a\u304a\u3001Ruby\u3082Rais\u3082\u5168\u304f\u3057\u3089\u306a\u3044\u306e\u3067\u5168\u3066\u4fe1\u7528\u3057\u306a\u3044\u3067\u9802\u304d\u305f\u3044\u3002\n\n```\nEnvironment:\n  Redmine version                3.3.0.stable.15663\n  Ruby version                   2.2.5-p319 (2016-04-26) [x86_64-linux]\n  Rails version                  4.2.6\n  Environment                    production\n  Database adapter               Mysql2\n```\n\n# \u30d9\u30fc\u30b9\u3068\u3059\u308bIssueExtensions\nhttp://www.r-labs.org/projects/issueext \u3092\u4f7f\u3063\u3066\u3044\u305f\u304c\nhttps://github.com/planio-gmbh/edmine_issue_extensions \u306b\u3057\u3066\u307f\u308b\u3002\n\n# \u521d\u671f\u8a2d\u5b9a\n\n## Redmine2\u304b\u3089Redmine3\u3078\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u30a8\u30e9\u30fc\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6b8b\u3057\u5fd8\u308c\u3066\u3044\u305f\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3060\u3063\u305f\u304b\u3068\u2026\n\n```text\nAn error occurred while loading the routes definition of redmine_issue_extensions plugin (/var/lib/redmine-3.3/plugins/redmine_issue_extensions/config/routes.rb): You should not use the `match` method in your router without specifying an HTTP method.\nIf you want to expose your action to both GET and POST, add `via: [:get, :post]` option.\nIf you want to expose your action to GET, use `get` in the router:\n  Instead of: match \"controller#action\"\n  Do: get \"controller#action\".\n```\n```diff:redmine_issue_extensions/config/routes.rb\n*** 17,22 ****\n  \n  RedmineApp::Application.routes.draw do\n    match 'issue_extensions/:action', :controller => 'issue_extensions', :via => [:get, :post]\n!   match 'issue_extensions_settings/:action', :controller => 'issue_extensions_settings'\n    match 'issue_relations/:action', :controller => 'issue_relations', :via => [:get, :post]\n  end\n--- 17,22 ----\n  \n  RedmineApp::Application.routes.draw do\n    match 'issue_extensions/:action', :controller => 'issue_extensions', :via => [:get, :post]\n!   match 'issue_extensions_settings/:action', :controller => 'issue_extensions_settings', :via => [:get, :post, :put, :patch]\n    match 'issue_relations/:action', :controller => 'issue_relations', :via => [:get, :post]\n  end\n```\n\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u753b\u9762\u304c\u958b\u304b\u306a\u3044\n\n```text\nActiveRecord::RecordNotFound (Couldn't find all IssueExtensionsStatusFlows with 'id': (first, {:conditions=>[\"project_id = ?\", 2]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/app/models/issue_extensions_status_flow.rb:21:in `find_or_create'\n  plugins/redmine_issue_extensions/app/views/issue_extensions_settings/_show.html.erb:21:in `_plugins_redmine_issue_extensions_app_views_issue_extensions_settings__show_html_erb__2241146892683185007_70191963673200'\n```\n```diff:redmine_issue_extensions/app/models/issue_extensions_status_flow.rb\n*** 18,24 ****\n    belongs_to :project\n  \n    def self.find_or_create project_id, user_id\n!     status_flow = IssueExtensionsStatusFlow.find :first, :conditions => ['project_id = ?', project_id]\n      unless status_flow\n        status_flow = IssueExtensionsStatusFlow.new\n        status_flow.project_id = project_id\n--- 18,24 ----\n    belongs_to :project\n  \n    def self.find_or_create project_id, user_id\n!     status_flow = IssueExtensionsStatusFlow.find_by :project_id => project_id\n      unless status_flow\n        status_flow = IssueExtensionsStatusFlow.new\n        status_flow.project_id = project_id\n```\n\n```text\nActiveRecord::RecordNotFound (Couldn't find all IssueStatuses with 'id': (all, {:order=>\"position\"}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/app/views/issue_extensions_settings/_show.html.erb:22:in `_plugins_redmine_issue_extensions_app_views_issue_extensions_settings__show_html_erb___3067774532135620242_70290714364540'\n```\n\n```diff:redmine_issue_extensions/app/views/issue_extensions_settings/_show.html.erb  \n*** 19,25 ****\n  <div id=\"issue_extension_settings\">\n  <%\n  @issue_extension_status_flow = IssueExtensionsStatusFlow.find_or_create(@project.id, User.current.id)\n! @statuses = IssueStatus.find(:all, :order => 'position') %>\n  <%= labelled_form_for :setting, @issue_extension_status_flow,\n                               :url => {:controller => 'issue_extensions_settings',\n                                 :action => 'update', :id => @project, :tab => 'issue_extensions',\n--- 19,25 ----\n  <div id=\"issue_extension_settings\">\n  <%\n  @issue_extension_status_flow = IssueExtensionsStatusFlow.find_or_create(@project.id, User.current.id)\n! @statuses = IssueStatus.order(:position) %>\n  <%= labelled_form_for :setting, @issue_extension_status_flow,\n                               :url => {:controller => 'issue_extensions_settings',\n                                 :action => 'update', :id => @project, :tab => 'issue_extensions',\n```\n\n# IssueExtensions\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u306e\u66f4\u65b0\u3067\u30a8\u30e9\u30fc\n\n```text\nActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):\n  plugins/redmine_issue_extensions/app/controllers/issue_extensions_settings_controller.rb:25:in `update'\n```\n\n```diff:redmine_issue_extensions/app/controllers/issue_extensions_settings_controller.rb\n*** 21,26 ****\n--- 21,27 ----\n    before_filter :find_project, :find_user, :authorize\n  \n    def update\n+     params.permit!\n      @issue_extension_status_flow = IssueExtensionsStatusFlow.find_or_create(@project.id, @user.id)\n      @issue_extension_status_flow.attributes = params[:setting]\n      @issue_extension_status_flow.updated_by = @user.id\n```\n\n# \u30c1\u30b1\u30c3\u30c8\u306e\u7de8\u96c6(\u4fdd\u5b58)\u3067\u306e\u30a8\u30e9\u30fc\n\n```text\nActiveRecord::RecordNotFound (Couldn't find all IssueExtensionsStatusFlows with 'id': (first, {:conditions=>[\"project_id = ?\", 5]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:61:in `issue_status_assigned'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:31:in `controller_issues_edit_before_save'\n```\n\n```diff:redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 58,64 ****\n    # \u30c1\u30b1\u30c3\u30c8\u306b\u62c5\u5f53\u8005\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b && \u72b6\u614b\u304c\u65b0\u898f\u306e\u5834\u5408\u3001\u62c5\u5f53\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_assigned context\n      issue = context[:issue]\n!     issue_status = IssueExtensionsStatusFlow.find :first, :conditions => ['project_id = ?', issue[:project_id].to_i]\n  \n      if issue_status.old_status_id == issue[:status_id]\n          issue[:status_id] = issue_status.new_status_id\n--- 58,64 ----\n    # \u30c1\u30b1\u30c3\u30c8\u306b\u62c5\u5f53\u8005\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b && \u72b6\u614b\u304c\u65b0\u898f\u306e\u5834\u5408\u3001\u62c5\u5f53\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_assigned context\n      issue = context[:issue]\n!     issue_status = IssueExtensionsStatusFlow.find_by :project_id => issue[:project_id].to_i\n  \n      if issue_status.old_status_id == issue[:status_id]\n          issue[:status_id] = issue_status.new_status_id\n```\n\n```text\nActiveRecord::RecordNotFound (Couldn't find all IssueStatuses with 'id': (all, {:conditions=>[\"is_closed = (?)\", true]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:72:in `issue_status_closed'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:32:in `controller_issues_edit_before_save'\n```\n\n```diff:redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 69,75 ****\n    # \u30c1\u30b1\u30c3\u30c8\u304c\u30af\u30ed\u30fc\u30ba\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u9032\u6357\u3092100%\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_closed context\n      issue = context[:issue]\n!     issue_status_closed = IssueStatus.find :all, :conditions => [\"is_closed = (?)\", true]\n  \n      issue_status_closed.each {|closed|\n        if closed.id == issue[:status_id].to_i && issue[:done_ratio] != 100\n--- 69,75 ----\n    # \u30c1\u30b1\u30c3\u30c8\u304c\u30af\u30ed\u30fc\u30ba\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u9032\u6357\u3092100%\u306b\u5909\u66f4\u3059\u308b\n    def issue_status_closed context\n      issue = context[:issue]\n!     issue_status_closed = IssueStatus.where(\"is_closed = true\")\n  \n      issue_status_closed.each {|closed|\n        if closed.id == issue[:status_id].to_i && issue[:done_ratio] != 100\n```\n\n```text\nActiveRecord::RecordNotFound (Couldn't find all Watchers with 'id': (first, {:conditions=>false}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:87:in `issue_added_watcher'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:33:in `controller_issues_edit_before_save'\n```\n\n```diff:redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 84,90 ****\n      issue = context[:issue]\n      journal = context[:journal]\n  \n!     if Watcher.find :first, :conditions =>[\"watchable_type = (?) and watchable_id = (?) and user_id = (?)\", journal[:journalized_type], issue[:id].to_i, journal[:user_id].to_i] == nil\n          hash_watcher = HashWithIndifferentAccess.new\n          hash_watcher[:user_id]  = journal[:user_id].to_s\n          watcher = Watcher.new(hash_watcher)\n--- 84,90 ----\n      issue = context[:issue]\n      journal = context[:journal]\n  \n!     if Watcher.where(\"watchable_type = (?) and watchable_id = (?) and user_id = (?)\", journal[:journalized_type], issue[:id].to_i, journal[:user_id].to_i).first == nil\n          hash_watcher = HashWithIndifferentAccess.new\n          hash_watcher[:user_id]  = journal[:user_id].to_s\n          watcher = Watcher.new(hash_watcher)\n```\n\n# \u5404\u6a5f\u80fd\u306e\u52d5\u4f5c\n\n## \u81ea\u52d5\u30a2\u30b5\u30a4\u30f3\u6a5f\u80fd\n\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u672a\u78ba\u8a8d\u3002\n\n## \u81ea\u52d5\u30af\u30ed\u30fc\u30ba\u6a5f\u80fd\n\u3053\u3053\u307e\u3067\u306e\u5909\u66f4\u3067\u554f\u984c\u306a\u3057\u3002\n\n## \u81ea\u52d5\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc\u6a5f\u80fd\n\u3053\u3053\u307e\u3067\u306e\u5909\u66f4\u3067\u554f\u984c\u306a\u3057\u3002\n\n## \u95a2\u9023\u3059\u308b\u30c1\u30b1\u30c3\u30c8\u4f5c\u6210\u6a5f\u80fd\n\u30a8\u30e9\u30fc\u3068\u306a\u3063\u305f\u305f\u3081\u5bfe\u5fdc\u3002\n\n```text\nActiveRecord::RecordNotFound (Couldn't find all Issues with 'id': (first, {:conditions=>[\"id = (?)\", 1034]}) (found 0 results, but was looking for 2)):\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:101:in `issue_added_relation'\n  plugins/redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb:53:in `controller_issues_new_after_save'\n```\n\n```diff:redmine_issue_extensions/lib/issue_extensions_issue_hooks.rb\n*** 98,104 ****\n    def issue_added_relation context\n      issue = context[:issue]\n      params = context[:params]\n!     from_issue = Issue.find :first, :conditions =>[\"id = (?)\", params[:relation_issue_id].to_i]\n      unless from_issue == nil\n        relation = IssueRelation.new\n        relation.relation_type = IssueRelation::TYPE_RELATES\n--- 98,104 ----\n    def issue_added_relation context\n      issue = context[:issue]\n      params = context[:params]\n!     from_issue = Issue.find_by :id => params[:relation_issue_id].to_i\n      unless from_issue == nil\n        relation = IssueRelation.new\n        relation.relation_type = IssueRelation::TYPE_RELATES\n```\n\n## \u30c1\u30b1\u30c3\u30c8\u691c\u7d22\u6a5f\u80fd\n\u3053\u306e\u6a5f\u80fd\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u3002\u6709\u52b9\u306a\u306e\u304b\uff1f\n> - \u30c1\u30b1\u30c3\u30c8\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u300c\u984c\u540d\u300d\u306e\u96a3\u306e\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306b\u691c\u7d22\u3057\u305f\u3044\u30c1\u30b1\u30c3\u30c8\u306e\u984c\u540d\u3092\u8a18\u5165\u3057\u3001\u300c\u9069\u7528\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n> - \u691c\u7d22\u7d50\u679c\u304c\u3001\u300c\u30d2\u30c3\u30c8\u3057\u305f\u30c1\u30b1\u30c3\u30c8\u300d\u4e2d\u306b\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u95a2\u9023\u4ed8\u3051\u3057\u305f\u3044\u30c1\u30b1\u30c3\u30c8\u306e\u95a2\u9023\u4ed8\u3051\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u95a2\u9023\u4ed8\u3051\u3055\u308c\u307e\u3059\u3002 \n>  - \u95a2\u9023\u4ed8\u3051\u4ee5\u5916(\u91cd\u8907\u3084\u30d6\u30ed\u30c3\u30af\u3001\u5148\u884c\u30fb\u5f8c\u7d9a)\u306f\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30c1\u30b1\u30c3\u30c8\u756a\u53f7\u3092\u53c2\u8003\u306b\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u6a5f\u80fd\n\u3053\u3053\u307e\u3067\u306e\u5909\u66f4\u3067\u554f\u984c\u306a\u3057\u3002\n\n## \u65b0\u898f\u8907\u88fd\u6a5f\u80fd\n```text\nProcessing by IssuesController#new as HTML\n  Parameters: {\"duplicate_issue\"=>\"t\", \"project_id\"=>\"5\", \"copy_from\"=>\"1034\"}\n  Current user: foo (id=3)\n  Rendered common/error.html.erb within layouts/base (0.1ms)\n  Rendered plugins/redmine_code_review/app/views/code_review/_html_header.html.erb (0.1ms)\n  Rendered plugins/redmine_wiki_extensions/app/views/wiki_extensions/_html_header.html.erb (0.0ms)\n  Rendered plugins/sidebar_hide/app/views/sidebar/_hideButton_partial.html.erb (0.3ms)\n  Rendered plugins/redmine_code_review/app/views/code_review/_body_bottom.html.erb (0.0ms)\n  Rendered plugins/redmine_wiki_extensions/app/views/wiki_extensions/_body_bottom.html.erb (0.0ms)\nCompleted 403 Forbidden in 136ms (Views: 13.1ms | ActiveRecord: 62.6ms)\n```\n\n\u30ed\u30fc\u30eb\u3068\u6a29\u9650\u306e\u8a2d\u5b9a\u3067\u300c\u30c1\u30b1\u30c3\u30c8\u306e\u30b3\u30d4\u30fc\u300d\u3092\u884c\u3046\u6a29\u9650\u304c\u306a\u304b\u3063\u305f\u305f\u3081\u3002\n\u6a29\u9650\u3092\u8ffd\u52a0\u3057\u305f\u3053\u3068\u308d\u554f\u984c\u306a\u3057\u3002\n"}