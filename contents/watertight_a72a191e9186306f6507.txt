{"context": " More than 1 year has passed since last update.\u30c6\u30b9\u30c8\u3057\u305fsbt\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f0.13.9\n\n\u80cc\u666f\nsbt\u3067\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u3092\u69cb\u7bc9\u3059\u308b\u30b3\u30fc\u30c9\u3092:=\u306e\u53f3\u8fba\u306b\u76f4\u63a5\u66f8\u304f\u306e\u306f\u907f\u3051\u3066\u3001\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306eval\u3068\u3057\u3066\u8a18\u8ff0\u3057\u305f\u3044\u3068\u3044\u3046\u5834\u5408\u304c\u3042\u308b\u3002\u4f8b\u3048\u3070sbt-assembly\u3092\u4f7f\u3063\u305f\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u8003\u3048\u308b\u3002\nlazy val root = (project in file(\".\")).\n  settings(\n    assemblyMergeStrategy in assembly := {\n      case PathList(\"test\", _ @ _*) => MergeStrategy.discard\n      case \".classpath\" | \".project\"  => MergeStrategy.discard\n      case x =>\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n        oldStrategy(x)\n    }\n  )\n\n\u3053\u3053\u3067\u6b21\u306e\u3088\u3046\u306b:=\u306e\u53f3\u8fba\u3092\u5358\u7d14\u306bval\u306b\u3059\u308b\u3068\u3001value\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u3044\u308b\u305f\u3081\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\nlazy val mergeStrat: String => sbtassembly.MergeStrategy = {\n      case PathList(\"test\", _ @ _*) => MergeStrategy.discard\n      case \".classpath\" | \".project\"  => MergeStrategy.discard\n      case x =>\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n        oldStrategy(x)\n    }\n\nlazy val root = (project in file(\".\")).\n  settings(\n    assemblyMergeStrategy in assembly := mergeStrat\n  )\n\n***/build.sbt:5: error: `value` can only be used within a task or setting macro, such as :=, +=, ++=, Def.task, or Def.setting.\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n\n\n\u89e3\u6c7a\u6cd5\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3082\u3042\u308b\u304c\u3001Def.setting\u304c\u3053\u306e\u76ee\u7684\u306e\u305f\u3081\u306b\u4f7f\u3048\u308b\u3002\nlazy val mergeStrat = Def.setting {\n  (x: String) => (x) match {\n      case PathList(\"test\", _ @ _*) => MergeStrategy.discard\n      case \".classpath\" | \".project\"  => MergeStrategy.discard\n      case x =>\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n        oldStrategy(x)\n  }\n}\n\nlazy val root = (project in file(\".\")).\n  settings(\n    assemblyMergeStrategy in assembly := mergeStrat.value\n  )\n\n\u30bf\u30b9\u30af\u3067\u3042\u308c\u3070Def.task\u3092\u4f7f\u3048\u3070\u3044\u3044\u3002\n\n\u53c2\u8003\u6587\u732e\nsbt Reference Manual \u2014 sbt 0.13.0 - 0.13.2\n\u30c6\u30b9\u30c8\u3057\u305fsbt\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f0.13.9\n# \u80cc\u666f\nsbt\u3067\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u3092\u69cb\u7bc9\u3059\u308b\u30b3\u30fc\u30c9\u3092`:=`\u306e\u53f3\u8fba\u306b\u76f4\u63a5\u66f8\u304f\u306e\u306f\u907f\u3051\u3066\u3001\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306e`val`\u3068\u3057\u3066\u8a18\u8ff0\u3057\u305f\u3044\u3068\u3044\u3046\u5834\u5408\u304c\u3042\u308b\u3002\u4f8b\u3048\u3070sbt-assembly\u3092\u4f7f\u3063\u305f\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u8003\u3048\u308b\u3002\n\n```scala:\nlazy val root = (project in file(\".\")).\n  settings(\n    assemblyMergeStrategy in assembly := {\n      case PathList(\"test\", _ @ _*) => MergeStrategy.discard\n      case \".classpath\" | \".project\"  => MergeStrategy.discard\n      case x =>\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n        oldStrategy(x)\n    }\n  )\n```\n\n\u3053\u3053\u3067\u6b21\u306e\u3088\u3046\u306b`:=`\u306e\u53f3\u8fba\u3092\u5358\u7d14\u306b`val`\u306b\u3059\u308b\u3068\u3001`value`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u3044\u308b\u305f\u3081\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\n```scala:\nlazy val mergeStrat: String => sbtassembly.MergeStrategy = {\n      case PathList(\"test\", _ @ _*) => MergeStrategy.discard\n      case \".classpath\" | \".project\"  => MergeStrategy.discard\n      case x =>\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n        oldStrategy(x)\n    }\n\nlazy val root = (project in file(\".\")).\n  settings(\n    assemblyMergeStrategy in assembly := mergeStrat\n  )\n```\n\n```shell-session\n***/build.sbt:5: error: `value` can only be used within a task or setting macro, such as :=, +=, ++=, Def.task, or Def.setting.\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n```\n\n# \u89e3\u6c7a\u6cd5\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3082\u3042\u308b\u304c\u3001`Def.setting`\u304c\u3053\u306e\u76ee\u7684\u306e\u305f\u3081\u306b\u4f7f\u3048\u308b\u3002\n\n```scala:\nlazy val mergeStrat = Def.setting {\n  (x: String) => (x) match {\n      case PathList(\"test\", _ @ _*) => MergeStrategy.discard\n      case \".classpath\" | \".project\"  => MergeStrategy.discard\n      case x =>\n        val oldStrategy = (assemblyMergeStrategy in assembly).value\n        oldStrategy(x)\n  }\n}\n\nlazy val root = (project in file(\".\")).\n  settings(\n    assemblyMergeStrategy in assembly := mergeStrat.value\n  )\n```\n\n\u30bf\u30b9\u30af\u3067\u3042\u308c\u3070`Def.task`\u3092\u4f7f\u3048\u3070\u3044\u3044\u3002\n\n# \u53c2\u8003\u6587\u732e\n[sbt Reference Manual \u2014 sbt 0.13.0 - 0.13.2](http://www.scala-sbt.org/0.13/docs/ChangeSummary_0.13.0.html#New+task%2Fsetting+syntax)\n\n", "tags": ["Scala", "sbt"]}