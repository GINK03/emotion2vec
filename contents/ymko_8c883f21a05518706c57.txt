{"context": " More than 1 year has passed since last update.BLOB\u578b\u306b\u4fdd\u5b58\u3059\u308c\u3070\u826f\u3044\u3002\n\u3084\u308a\u65b9\u306fDBD::SQLite - search.cpan.org #Blobs \u307b\u307c\u305d\u306e\u307e\u307e\u3002\n\n\u6e96\u5099\n$ sqlite a.db\nsqlite> create table image (id integer primary key, data blob);\n\n\n\u5165\u529b\u3001\u51fa\u529b\n\na.pl\nuse strict;\nuse warnings;\nuse DBI;\n\n# \u5165\u529b\u753b\u50cf\u30c7\u30fc\u30bf\nmy $i_img = `cat meshi.jpg`;\n\n# a.db\u3092\u958b\u304f\nmy $dbh = DBI->connect(\"dbi:SQLite:dbname=a.db\") or die $DBI::errstr;\n\n# \u753b\u50cf\u30c7\u30fc\u30bf\u3092\u5165\u529b\nmy $i_sth = $dbh->prepare(\"INSERT INTO image (data) values (?)\");\n$i_sth->bind_param(1, $i_img, DBI::SQL_BLOB);\n$i_sth->execute();\n$i_sth->finish();\n\n# \u753b\u50cf\u30c7\u30fc\u30bf\u3092DB\u304b\u3089\u53d6\u5f97\nmy $o_sth = $dbh->prepare(\"SELECT data FROM image WHERE id=1\");\n$o_sth->execute();\nmy $row = $o_sth->fetch();\nmy $o_img = $row->[0];\n$o_sth->finish();\n\n# \u753b\u50cf\u30c7\u30fc\u30bf\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\nopen my $fh, \">:raw\", \"image.dat\";\nprint $fh $o_img;\nclose $fh;\n\n\n\n$ perl a.pl\n$ ll\n-rw-r--r-- 1 ymko users 591872  8\u6708 24 00:48 a.db\n-rw-r--r-- 1 ymko users    529  8\u6708 24 00:48 a.pl\n-rw-r--r-- 1 ymko users  73429  8\u6708 24 00:48 image.dat\n-rw-r--r-- 1 ymko users  73429  8\u6708 23 06:34 meshi.jpg\n\n\u306a\u304a\u3001db\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u6d88\u3057\u3066\u3082db\u306e\u30d5\u30a1\u30a4\u30eb\u5bb9\u91cf\u306f\u6e1b\u3089\u306a\u3044\u3002\nvacuum\u30b3\u30de\u30f3\u30c9\u3067\u6e1b\u308b\u3002\n\n\u53c2\u8003\nHow can I load an image file into a blob in SQLite using Perl? - Stack Overflow\nhttp://stackoverflow.com/questions/997599/how-can-i-load-an-image-file-into-a-blob-in-sqlite-using-perl\n\u610f\u8a33\uff1a\u79c1\u306fDB\u4e0a\u306b\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u306e\u306f\u5982\u4f55\u306a\u3082\u306e\u304b\u3068\u601d\u3046\u3051\u3069\u3001DBI::SQLite\u306e\u30b5\u30f3\u30d7\u30eb\u306b\u3042\u308b\u304b\u3089\u3053\u308c\u3067\u3067\u304d\u308b\u3088\u3002\nDBD::SQLite - search.cpan.org\nhttp://search.cpan.org/~ishigaki/DBD-SQLite-1.48/lib/DBD/SQLite.pm#Blobs\nWorking with images in SQLite with Perl\nhttp://zetcode.com/db/sqliteperltutorial/images/\n\u7a7a\u304d\u9818\u57df\u306e\u958b\u653e(VACUUM\u6587) - SQLite\u5165\u9580\nhttp://www.dbonline.jp/sqlite/manage/index1.html\nBLOB\u578b\u306b\u4fdd\u5b58\u3059\u308c\u3070\u826f\u3044\u3002\n\u3084\u308a\u65b9\u306f[DBD::SQLite - search.cpan.org #Blobs](http://search.cpan.org/~ishigaki/DBD-SQLite-1.48/lib/DBD/SQLite.pm#Blobs) \u307b\u307c\u305d\u306e\u307e\u307e\u3002\n\n# \u6e96\u5099\n\n```bash\n$ sqlite a.db\nsqlite> create table image (id integer primary key, data blob);\n```\n\n# \u5165\u529b\u3001\u51fa\u529b\n\n```pl:a.pl\nuse strict;\nuse warnings;\nuse DBI;\n\n# \u5165\u529b\u753b\u50cf\u30c7\u30fc\u30bf\nmy $i_img = `cat meshi.jpg`;\n\n# a.db\u3092\u958b\u304f\nmy $dbh = DBI->connect(\"dbi:SQLite:dbname=a.db\") or die $DBI::errstr;\n\n# \u753b\u50cf\u30c7\u30fc\u30bf\u3092\u5165\u529b\nmy $i_sth = $dbh->prepare(\"INSERT INTO image (data) values (?)\");\n$i_sth->bind_param(1, $i_img, DBI::SQL_BLOB);\n$i_sth->execute();\n$i_sth->finish();\n\n# \u753b\u50cf\u30c7\u30fc\u30bf\u3092DB\u304b\u3089\u53d6\u5f97\nmy $o_sth = $dbh->prepare(\"SELECT data FROM image WHERE id=1\");\n$o_sth->execute();\nmy $row = $o_sth->fetch();\nmy $o_img = $row->[0];\n$o_sth->finish();\n\n# \u753b\u50cf\u30c7\u30fc\u30bf\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\nopen my $fh, \">:raw\", \"image.dat\";\nprint $fh $o_img;\nclose $fh;\n\n```\n\n```bash\n$ perl a.pl\n$ ll\n-rw-r--r-- 1 ymko users 591872  8\u6708 24 00:48 a.db\n-rw-r--r-- 1 ymko users    529  8\u6708 24 00:48 a.pl\n-rw-r--r-- 1 ymko users  73429  8\u6708 24 00:48 image.dat\n-rw-r--r-- 1 ymko users  73429  8\u6708 23 06:34 meshi.jpg\n```\n\n\u306a\u304a\u3001db\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u6d88\u3057\u3066\u3082db\u306e\u30d5\u30a1\u30a4\u30eb\u5bb9\u91cf\u306f\u6e1b\u3089\u306a\u3044\u3002\nvacuum\u30b3\u30de\u30f3\u30c9\u3067\u6e1b\u308b\u3002\n\n# \u53c2\u8003\n\nHow can I load an image file into a blob in SQLite using Perl? - Stack Overflow\nhttp://stackoverflow.com/questions/997599/how-can-i-load-an-image-file-into-a-blob-in-sqlite-using-perl\n\u610f\u8a33\uff1a\u79c1\u306fDB\u4e0a\u306b\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u306e\u306f\u5982\u4f55\u306a\u3082\u306e\u304b\u3068\u601d\u3046\u3051\u3069\u3001DBI::SQLite\u306e\u30b5\u30f3\u30d7\u30eb\u306b\u3042\u308b\u304b\u3089\u3053\u308c\u3067\u3067\u304d\u308b\u3088\u3002\n\nDBD::SQLite - search.cpan.org\nhttp://search.cpan.org/~ishigaki/DBD-SQLite-1.48/lib/DBD/SQLite.pm#Blobs\n\nWorking with images in SQLite with Perl\nhttp://zetcode.com/db/sqliteperltutorial/images/\n\n\n\u7a7a\u304d\u9818\u57df\u306e\u958b\u653e(VACUUM\u6587) - SQLite\u5165\u9580\nhttp://www.dbonline.jp/sqlite/manage/index1.html\n", "tags": ["sqlite", "Perl"]}