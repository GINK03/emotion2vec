{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u4ee5\u524d\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u7d9a\u304d\u307f\u305f\u3044\u306a\u3064\u3082\u308a\u3067\u3001RAID\u306e\u76e3\u8996\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u3001Adaptec\u306eRAID\u30ab\u30fc\u30c9\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\nhttp://qiita.com/testnin2/items/e30e75e3399b6ac79101\n\nCustomer Portal\u3067\u306e\u8a2d\u5b9a\nAccount -> Manage -> Subscriptions \u304b\u3089Raid Alert Monitoring\u3092\u9078\u629e\u3057\u3001Alert\u3092\u901a\u77e5\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3057\u3066Subscribed\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u73fe\u5728\u3001RAID Alert\u306e\u901a\u77e5\u5148\u306f\u4e00\u4eba\u3057\u304b\u9078\u629e\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u8907\u6570\u4eba\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8b66\u544a\u304c\u51fa\u307e\u3059\u3002\n\n\u8b66\u544a\u6587\nRaid alert notifications only allow one active subscriber at a time. The current subscribed user could be other than the users listed here.\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u74b0\u5883\u306e\u78ba\u8a8d\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001/usr/Adaptec_Event_Monitor\u914d\u4e0b\u306barcconf\u4ee5\u5916\u306b\u76e3\u8996\u30c4\u30fc\u30eb\u306a\u3069\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n# ls -l /usr/Adaptec_Event_Monitor\ntotal 6076\n-rwxr--r-- 1 root root 2557915 Jun 27  2014 arcconf\n-rwxr--r-- 1 root root     207 Jun 27  2014 cfg.env\n-rwxr--r-- 1 root root   16927 Jun 27  2014 configureEmailSettings.sh\n-rw-r--r-- 1 root root       2 Apr  9 01:00 Email_Notification_Status.cfg\n-rwxr--r-- 1 root root   11334 Jun 27  2014 encrypt\n-rwxr--r-- 1 root root   61307 Jun 27  2014 EventMonitor\nlrwxrwxrwx 1 root root      31 Apr  9 01:00 EventMonitorService -> /etc/init.d/EventMonitorService\n-rwxr--r-- 1 root root  805004 Jun 27  2014 libNRMFSA.so\n-rwxr--r-- 1 root root 2573435 Jun 27  2014 libSTORARC.so\n-rw-r--r-- 1 root root      23 Apr  9 01:00 Mail_Recipients.cfg\n-rwxr--r-- 1 root root     700 Jun 27  2014 NRMConfig.conf\n-rw-rw-rw- 1 root root   10694 Apr  9 16:49 NRMFSAConfig.xml\n-rwxr--r-- 1 root root   68678 Jun 27  2014 RaidNLS.properties\n-rwxr--r-- 1 root root   80213 Jun 27  2014 sendEmail\n-rw-r--r-- 1 root root     131 Apr  9 01:00 SMTP_Server_Details.cfg\n\n\u30b5\u30fc\u30d3\u30b9\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3063\u307d\u3044\u306e\u3067\u3001\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n# chkconfig --list | grep -i event\nEventMonitorService     0:off   1:off   2:on    3:on    4:off   5:on    6:off\n\n# service EventMonitorService status\nAdaptec Event Monitor (pid 26447) is running...\n\n# ps -ef | grep -e PID -e 26447 | grep -v grep\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot     26447     1  0 Apr09 ?        00:15:27 EventMonitor\n\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002User_Details.cfg\u306f\u8a72\u5f53\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u914d\u4e0b\u306b\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u4ee5\u4e0b\u3001\u9806\u306b\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n/usr/Adaptec_Event_Monitor/cfg.env\nexport CONFIG_FILE_SMTP=SMTP_Server_Details.cfg\nexport CONFIG_FILE_USER=User_Details.cfg\nexport CONFIG_FILE_RECIPIENTS=Mail_Recipients.cfg\nexport EMAIL_NOTIFICATION_STATUS_FILE=Email_Notification_Status.cfg\n\n\n\nSMTP_Server_Details.cfg\nSMTP\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u6210\u60c5\u5831\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u6c17\u3092\u3064\u3051\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u306e\u306f\u3001\u521d\u671f\u8a2d\u5b9a\u306eSMTP\u30b5\u30fc\u30d0\u30fc\uff08raidalerts-smtp.networklayer.com\uff09\u306f\u3001public NW\u4e0a\u306b\u5b58\u5728\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\uff08\u306a\u305c\u305d\u3046\u306a\u3063\u3066\u3044\u308b\u306e\uff1f\u3068\u8a00\u308f\u308c\u3066\u3082\u3001\u3053\u306e\u3042\u305f\u308a\u306eSoftLayer\u306e\u30bb\u30f3\u30b9\u306f\u79c1\u306b\u3082\u3088\u304f\u5206\u304b\u308a\u307e\u305b\u3093\u3002private\u7d4c\u7531\u306e\u65b9\u304c\u3042\u308a\u304c\u305f\u3044\u306e\u3067\u3059\u304c\u3001\u591a\u5206Ticket\u3067\u805e\u3044\u3066\u3082\u6e80\u8db3\u306a\u56de\u7b54\u306f\u3082\u3089\u3048\u306a\u3044\u3067\u3057\u3087\u3046\u3002\u3002\u3002\uff09\u3002\u3064\u307e\u308a\n\npublic NIC\u304cdown\u3057\u3066\u3044\u305f\u3089\u901a\u77e5\u306f\u3055\u308c\u306a\u3044\u3002\nprivate only\u306e\u30b5\u30fc\u30d0\u30fc\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u901a\u77e5\u306f\u3055\u308c\u306a\u3044\u3002 \n\n\u3068\u3044\u3046\u306e\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u69cb\u6210\u306e\u3088\u3046\u3067\u3059\u3002\n\n/usr/Adaptec_Event_Monitor/SMTP_Server_Details.cfg\nSMTP_SERVER=raidalerts-smtp.networklayer.com\nSMTP_PORT=25\nFROM_MAIL_ID=<AccountID>_<MACADDRESS>@softlayer.com\nUSE_SECURE_MAIL_SERVER=no\n\n\n# ping -c 3 raidalerts-smtp.networklayer.com\nPING raidalerts-smtp.networklayer.com (66.228.118.25) 56(84) bytes of data.\n64 bytes from mx.softlayer.com (66.228.118.25): icmp_seq=1 ttl=56 time=214 ms\n64 bytes from mx.softlayer.com (66.228.118.25): icmp_seq=2 ttl=56 time=214 ms\n64 bytes from mx.softlayer.com (66.228.118.25): icmp_seq=3 ttl=56 time=213 ms\n\n--- raidalerts-smtp.networklayer.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2216ms\nrtt min/avg/max/mdev = 213.694/214.030/214.299/0.251 ms\n\n# nmap -sT -PN raidalerts-smtp.networklayer.com -p25\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-04-09 16:55 CDT\nNmap scan report for raidalerts-smtp.networklayer.com (66.228.118.25)\nHost is up (0.19s latency).\nrDNS record for 66.228.118.25: mx.softlayer.com\nPORT   STATE SERVICE\n25/tcp open  smtp\n\nNmap done: 1 IP address (1 host up) scanned in 0.51 seconds\n\n\n\u591a\u304f\u306e\u4eba\u304c\u3053\u306e\u69cb\u6210\u306b\u306f\u4e0d\u6e80\u3067\u3042\u308a\u3001Private NW\u7d4c\u7531\u3067\u306e\u901a\u77e5\u3092\u3057\u305f\u3044\u3068\u3044\u3046\u5e0c\u671b\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002Private\u7d4c\u7531\u3067\u901a\u77e5\u3059\u308b\u305f\u3081\u306b\u306f\u3001\n\n\nraidalerts-smtp.networklayer.com\u306e\u4ee3\u308f\u308a\u306bsmtp102.service.softlayer.com\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002\nFROM_MAIL_ID\u306eMAC\u30a2\u30c9\u30ec\u30b9\u304cPublic\u5074\u306b\u306a\u3063\u3066\u3044\u308b\u30cf\u30ba\u306a\u306e\u3067\u3001\u3053\u308c\u3092Private\u5074NIC\u306eMAC\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002\u4f8b\u3048\u3070\u3001Private\u5074\u306ebond0\u306eMAC\u30a2\u30c9\u30ec\u30b9\u304c00:25:90:1E:EA:71\u3067\u3042\u308c\u3070\u3001xxxxx_0025901eea71@softlayer.com\u3068\u8a2d\u5b9a\u3059\u308b\u3002\n\u76e3\u8996\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002(# service EventMonitorService restart)\n\n\u6ce8\uff09\u3053\u3093\u306a\u3053\u3068\u306a\u3089\u3001\u3044\u3063\u305d\u306e\u3053\u3068SendGrid\u3084\u81ea\u5206\u3067\u69cb\u7bc9\u3057\u305fSMTP\u30b5\u30fc\u30d0\u30fc\u3092\u5229\u7528\u3059\u308b\u3088\uff01\u3063\u3066\u3044\u3046\u4eba\u3082\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u78ba\u304b\u306b\u3001SoftLayer\u63d0\u4f9b\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3057\u306a\u3044\u3068\u3001SoftLayer\u306e\u5185\u90e8\u306e\u4eba\u304c\u30a2\u30e9\u30fc\u30c8\u3092\u691c\u77e5\u3067\u304d\u307e\u305b\u3093\u3002\u3068\u306f\u3044\u3063\u3066\u3082\u3001\u7d50\u5c40\u30e6\u30fc\u30b6\u30fc\u5074\u3067\u3082\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u305f\u308a\u3057\u305f\u3044\u30b1\u30fc\u30b9\u3082\u591a\u3044\u306e\u3067\u3001\u81ea\u524d\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3057\u3066\u78ba\u5b9f\u306b\u901a\u77e5\u3092\u53d7\u3051\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u5143\u306bSoftLayer\u5074\u306b\u554f\u3044\u5408\u308f\u305b\u308b\u904b\u7528\u30b9\u30bf\u30a4\u30eb\u3067\u3082\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n# ping -c 3 smtp102.service.softlayer.com\nPING smtp102.service.softlayer.com (10.0.80.82) 56(84) bytes of data.\n64 bytes from 10.0.80.82: icmp_seq=1 ttl=56 time=201 ms\n64 bytes from 10.0.80.82: icmp_seq=2 ttl=56 time=201 ms\n64 bytes from 10.0.80.82: icmp_seq=3 ttl=56 time=201 ms\n\n--- smtp102.service.softlayer.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2203ms\nrtt min/avg/max/mdev = 201.107/201.125/201.153/0.366 ms\n\n# nmap -sT -PN smtp102.service.softlayer.com -p25\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-04-28 02:30 CDT\nNmap scan report for smtp102.service.softlayer.com (10.0.80.82)\nHost is up (0.19s latency).\nPORT   STATE SERVICE\n25/tcp open  smtp\n\nNmap done: 1 IP address (1 host up) scanned in 0.23 seconds\n\n\n\nMail_Recipients.cfg\n\u5b9b\u5148\u30e1\u30fc\u30eb\u306e\u60c5\u5831\u304c\u542b\u307e\u308c\u308b\u3088\u3046\u3067\u3059\u3002hwraid@softlayer.com\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n\n/usr/Adaptec_Event_Monitor/Mail_Recipients.cfg\nhwraid@softlayer.com,W\n\n\n\u672c\u6765\u306f\u3001\u3053\u3053\u306b\u306f\u8907\u6570\u8a2d\u5b9a\u53ef\u80fd\u306e\u3088\u3046\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001\nhwraid@softlayer.com,W\nxxxx@xxx.xxx.com,I\nyyyy@yyy.yyy.com,E\n\n\u306a\u3069\u3002I/W/E\u306e\u610f\u5473\u306f\u3001\nI: Error, Warning & Informational\nW: Error & Warning\nE: Error\n\n\u306e\u3088\u3046\u3067\u3059\u3002\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001SoftLayer\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u306fhwraid@softlayer.com\u3057\u304b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u4ee5\u5916\u306e\u30e1\u30fc\u30eb\u306f550 relay not permitted\u304c\u51fa\u3066\u5c4a\u304b\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u306a\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306ehwraid@softlayer.com\u4ee5\u5916\u3092\u767b\u9332\u3057\u3066\u3082\u3001SoftLayer\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306f\u53d7\u4fe1\u3057\u307e\u305b\u3093\u3002\u3082\u3057\u3001\u81ea\u524d\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u3053\u306b\u8907\u6570\u8a18\u8ff0\u53ef\u80fd\u3067\u3059\u3002\n\nEmail_Notification_Status.cfg\n\n/usr/Adaptec_Event_Monitor/Email_Notification_Status.cfg\n1\n\n\n\u3053\u306e\u610f\u5473\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u3067\u3059\u3002\u5f53\u7136\u30c7\u30d5\u30a9\u30eb\u30c8\u306e1\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n1: \u901a\u77e5\u3059\u308b\u3002\n0: \u901a\u77e5\u3057\u306a\u3044\u3002\n\n\n\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u9001\u4ed8\u3059\u308b\n/usr/Adaptec_Event_Monitor/configureEmailSettings.sh\u3092\u5b9f\u884c\u3059\u308c\u3070\u3001\u3053\u3053\u3067\u7d39\u4ecb\u3057\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u9001\u4ed8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\uff08\u8a2d\u5b9a\u5909\u66f4\u306f\u76f4\u63a5\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u305f\u65b9\u304c\u697d\u3060\u3068\u601d\u3044\u307e\u3059\u304c\uff09\u3002\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u5b9f\u969b\u306b\u9001\u4ed8\u3057\u305f\u3089SoftLayer\u5185\u90e8\u306e\u4eba\u9054\u3082\u4f55\u4e8b\u304b\u3068\u9a12\u304e\u51fa\u3057\u3066\u3001Ticket\u304c\u98db\u3093\u3067\u304f\u308b\u306e\u3067\u3001\u300c\u30c6\u30b9\u30c8\u3057\u3066\u305f\u3060\u3051\u3060\u3088\u300d\u3068\u56de\u7b54\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\n\u307e\u305f\u3001\u3061\u3083\u3093\u3068\u30e1\u30fc\u30eb\u304c\u98db\u3093\u3067\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af\u304c\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4e0b\u8a18\u624b\u9806\u4e2d\u3067./configureEmailSettings.sh\u3067\u306f\u306a\u304f\u3001bash -x ./configureEmailSettings.sh\u306b\u3057\u3066\u3001\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u305f\u65b9\u304c\u3088\u308a\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3057\u3087\u3046\u3002\n\uff08\u6ce8\uff09\u901a\u77e5\u9023\u7d61\u304c\u4e00\u6669\u5f85\u305f\u3055\u308c\u305f\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u6c17\u9577\u306b\u5f85\u3061\u307e\u3059\u3002\u3002\u3002\n# cd /usr/Adaptec_Event_Monitor/\n# ./configureEmailSettings.sh\n\n\nSMTP Server Configuration Utility\n---------------------------------\n\nChoose any of the following options:\n-----------------------------------------------------------------------------\n1) Enable Email Notification                  2) Disable Email Notification\n3) Get SMTP Server Details                    4) Set SMTP Server Details\n5) Get Recipient Information                  6) Set Recipient Information\n7) Update Recipient Information               8) Delete Recipient Information\n9) Send Test Email                           10) Exit\n-----------------------------------------------------------------------------\n\n\nEnter your choice: 9\n\nSend Test Email:\n----------------\nEnter recipient e-mail address: hwraid@softlayer.com\n\n\n\n\u304a\u307e\u3051\n/var/log/messages\u306bRAID Controller\u306e\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3053\u3092\u76e3\u8996\u3059\u308b\u3053\u3068\u3067\u3082\u30a8\u30e9\u30fc\u691c\u77e5\u306f\u53ef\u80fd\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n#\u306f\u3058\u3081\u306b\n\u4ee5\u524d\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u7d9a\u304d\u307f\u305f\u3044\u306a\u3064\u3082\u308a\u3067\u3001RAID\u306e\u76e3\u8996\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u3001Adaptec\u306eRAID\u30ab\u30fc\u30c9\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\nhttp://qiita.com/testnin2/items/e30e75e3399b6ac79101\n\n#Customer Portal\u3067\u306e\u8a2d\u5b9a\nAccount -> Manage -> Subscriptions \u304b\u3089Raid Alert Monitoring\u3092\u9078\u629e\u3057\u3001Alert\u3092\u901a\u77e5\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3057\u3066**Subscribed**\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![RAID_ALERT.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/5d103ee6-aeec-a1da-a989-cb0a62281867.jpeg)\n\n\n\u73fe\u5728\u3001**RAID Alert\u306e\u901a\u77e5\u5148\u306f\u4e00\u4eba\u3057\u304b\u9078\u629e\u3067\u304d\u306a\u3044**\u3088\u3046\u3067\u3059\u3002\u8907\u6570\u4eba\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8b66\u544a\u304c\u51fa\u307e\u3059\u3002\n\n```text:\u8b66\u544a\u6587\nRaid alert notifications only allow one active subscriber at a time. The current subscribed user could be other than the users listed here.\n```\n\n\n\n\n#\u30b5\u30fc\u30d0\u30fc\u74b0\u5883\u306e\u78ba\u8a8d\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001/usr/Adaptec_Event_Monitor\u914d\u4e0b\u306barcconf\u4ee5\u5916\u306b\u76e3\u8996\u30c4\u30fc\u30eb\u306a\u3069\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n```\n# ls -l /usr/Adaptec_Event_Monitor\ntotal 6076\n-rwxr--r-- 1 root root 2557915 Jun 27  2014 arcconf\n-rwxr--r-- 1 root root     207 Jun 27  2014 cfg.env\n-rwxr--r-- 1 root root   16927 Jun 27  2014 configureEmailSettings.sh\n-rw-r--r-- 1 root root       2 Apr  9 01:00 Email_Notification_Status.cfg\n-rwxr--r-- 1 root root   11334 Jun 27  2014 encrypt\n-rwxr--r-- 1 root root   61307 Jun 27  2014 EventMonitor\nlrwxrwxrwx 1 root root      31 Apr  9 01:00 EventMonitorService -> /etc/init.d/EventMonitorService\n-rwxr--r-- 1 root root  805004 Jun 27  2014 libNRMFSA.so\n-rwxr--r-- 1 root root 2573435 Jun 27  2014 libSTORARC.so\n-rw-r--r-- 1 root root      23 Apr  9 01:00 Mail_Recipients.cfg\n-rwxr--r-- 1 root root     700 Jun 27  2014 NRMConfig.conf\n-rw-rw-rw- 1 root root   10694 Apr  9 16:49 NRMFSAConfig.xml\n-rwxr--r-- 1 root root   68678 Jun 27  2014 RaidNLS.properties\n-rwxr--r-- 1 root root   80213 Jun 27  2014 sendEmail\n-rw-r--r-- 1 root root     131 Apr  9 01:00 SMTP_Server_Details.cfg\n```\n\n\u30b5\u30fc\u30d3\u30b9\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3063\u307d\u3044\u306e\u3067\u3001\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n# chkconfig --list | grep -i event\nEventMonitorService     0:off   1:off   2:on    3:on    4:off   5:on    6:off\n\n# service EventMonitorService status\nAdaptec Event Monitor (pid 26447) is running...\n\n# ps -ef | grep -e PID -e 26447 | grep -v grep\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot     26447     1  0 Apr09 ?        00:15:27 EventMonitor\n\n\n```\n\n#\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002User_Details.cfg\u306f\u8a72\u5f53\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u914d\u4e0b\u306b\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u4ee5\u4e0b\u3001\u9806\u306b\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n```text:/usr/Adaptec_Event_Monitor/cfg.env\nexport CONFIG_FILE_SMTP=SMTP_Server_Details.cfg\nexport CONFIG_FILE_USER=User_Details.cfg\nexport CONFIG_FILE_RECIPIENTS=Mail_Recipients.cfg\nexport EMAIL_NOTIFICATION_STATUS_FILE=Email_Notification_Status.cfg\n```\n\n##SMTP_Server_Details.cfg\nSMTP\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u6210\u60c5\u5831\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u6c17\u3092\u3064\u3051\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u306e\u306f\u3001**\u521d\u671f\u8a2d\u5b9a\u306eSMTP\u30b5\u30fc\u30d0\u30fc\uff08raidalerts-smtp.networklayer.com\uff09\u306f\u3001public NW\u4e0a\u306b\u5b58\u5728\u3059\u308b**\u3068\u3044\u3046\u3053\u3068\u3067\u3059\uff08\u306a\u305c\u305d\u3046\u306a\u3063\u3066\u3044\u308b\u306e\uff1f\u3068\u8a00\u308f\u308c\u3066\u3082\u3001\u3053\u306e\u3042\u305f\u308a\u306eSoftLayer\u306e\u30bb\u30f3\u30b9\u306f\u79c1\u306b\u3082\u3088\u304f\u5206\u304b\u308a\u307e\u305b\u3093\u3002private\u7d4c\u7531\u306e\u65b9\u304c\u3042\u308a\u304c\u305f\u3044\u306e\u3067\u3059\u304c\u3001\u591a\u5206Ticket\u3067\u805e\u3044\u3066\u3082\u6e80\u8db3\u306a\u56de\u7b54\u306f\u3082\u3089\u3048\u306a\u3044\u3067\u3057\u3087\u3046\u3002\u3002\u3002\uff09\u3002\u3064\u307e\u308a\n\n* public NIC\u304cdown\u3057\u3066\u3044\u305f\u3089\u901a\u77e5\u306f\u3055\u308c\u306a\u3044\u3002\n* private only\u306e\u30b5\u30fc\u30d0\u30fc\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u901a\u77e5\u306f\u3055\u308c\u306a\u3044\u3002 \n\n\u3068\u3044\u3046\u306e\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u69cb\u6210\u306e\u3088\u3046\u3067\u3059\u3002\n\n```text:/usr/Adaptec_Event_Monitor/SMTP_Server_Details.cfg\nSMTP_SERVER=raidalerts-smtp.networklayer.com\nSMTP_PORT=25\nFROM_MAIL_ID=<AccountID>_<MACADDRESS>@softlayer.com\nUSE_SECURE_MAIL_SERVER=no\n```\n```\n# ping -c 3 raidalerts-smtp.networklayer.com\nPING raidalerts-smtp.networklayer.com (66.228.118.25) 56(84) bytes of data.\n64 bytes from mx.softlayer.com (66.228.118.25): icmp_seq=1 ttl=56 time=214 ms\n64 bytes from mx.softlayer.com (66.228.118.25): icmp_seq=2 ttl=56 time=214 ms\n64 bytes from mx.softlayer.com (66.228.118.25): icmp_seq=3 ttl=56 time=213 ms\n\n--- raidalerts-smtp.networklayer.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2216ms\nrtt min/avg/max/mdev = 213.694/214.030/214.299/0.251 ms\n\n# nmap -sT -PN raidalerts-smtp.networklayer.com -p25\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-04-09 16:55 CDT\nNmap scan report for raidalerts-smtp.networklayer.com (66.228.118.25)\nHost is up (0.19s latency).\nrDNS record for 66.228.118.25: mx.softlayer.com\nPORT   STATE SERVICE\n25/tcp open  smtp\n\nNmap done: 1 IP address (1 host up) scanned in 0.51 seconds\n\n```\n\n\u591a\u304f\u306e\u4eba\u304c\u3053\u306e\u69cb\u6210\u306b\u306f\u4e0d\u6e80\u3067\u3042\u308a\u3001Private NW\u7d4c\u7531\u3067\u306e\u901a\u77e5\u3092\u3057\u305f\u3044\u3068\u3044\u3046\u5e0c\u671b\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002Private\u7d4c\u7531\u3067\u901a\u77e5\u3059\u308b\u305f\u3081\u306b\u306f\u3001\n\n1. `raidalerts-smtp.networklayer.com`\u306e\u4ee3\u308f\u308a\u306b`smtp102.service.softlayer.com`\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002\n2. FROM_MAIL_ID\u306eMAC\u30a2\u30c9\u30ec\u30b9\u304cPublic\u5074\u306b\u306a\u3063\u3066\u3044\u308b\u30cf\u30ba\u306a\u306e\u3067\u3001\u3053\u308c\u3092Private\u5074NIC\u306eMAC\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002\u4f8b\u3048\u3070\u3001Private\u5074\u306ebond0\u306eMAC\u30a2\u30c9\u30ec\u30b9\u304c`00:25:90:1E:EA:71`\u3067\u3042\u308c\u3070\u3001`xxxxx_0025901eea71@softlayer.com`\u3068\u8a2d\u5b9a\u3059\u308b\u3002\n3. \u76e3\u8996\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002(`# service EventMonitorService restart`)\n\n\u6ce8\uff09\u3053\u3093\u306a\u3053\u3068\u306a\u3089\u3001\u3044\u3063\u305d\u306e\u3053\u3068SendGrid\u3084\u81ea\u5206\u3067\u69cb\u7bc9\u3057\u305fSMTP\u30b5\u30fc\u30d0\u30fc\u3092\u5229\u7528\u3059\u308b\u3088\uff01\u3063\u3066\u3044\u3046\u4eba\u3082\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u78ba\u304b\u306b\u3001SoftLayer\u63d0\u4f9b\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3057\u306a\u3044\u3068\u3001SoftLayer\u306e\u5185\u90e8\u306e\u4eba\u304c\u30a2\u30e9\u30fc\u30c8\u3092\u691c\u77e5\u3067\u304d\u307e\u305b\u3093\u3002\u3068\u306f\u3044\u3063\u3066\u3082\u3001\u7d50\u5c40\u30e6\u30fc\u30b6\u30fc\u5074\u3067\u3082\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u305f\u308a\u3057\u305f\u3044\u30b1\u30fc\u30b9\u3082\u591a\u3044\u306e\u3067\u3001\u81ea\u524d\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3057\u3066\u78ba\u5b9f\u306b\u901a\u77e5\u3092\u53d7\u3051\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u5143\u306bSoftLayer\u5074\u306b\u554f\u3044\u5408\u308f\u305b\u308b\u904b\u7528\u30b9\u30bf\u30a4\u30eb\u3067\u3082\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\n# ping -c 3 smtp102.service.softlayer.com\nPING smtp102.service.softlayer.com (10.0.80.82) 56(84) bytes of data.\n64 bytes from 10.0.80.82: icmp_seq=1 ttl=56 time=201 ms\n64 bytes from 10.0.80.82: icmp_seq=2 ttl=56 time=201 ms\n64 bytes from 10.0.80.82: icmp_seq=3 ttl=56 time=201 ms\n\n--- smtp102.service.softlayer.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2203ms\nrtt min/avg/max/mdev = 201.107/201.125/201.153/0.366 ms\n\n# nmap -sT -PN smtp102.service.softlayer.com -p25\n\nStarting Nmap 5.51 ( http://nmap.org ) at 2015-04-28 02:30 CDT\nNmap scan report for smtp102.service.softlayer.com (10.0.80.82)\nHost is up (0.19s latency).\nPORT   STATE SERVICE\n25/tcp open  smtp\n\nNmap done: 1 IP address (1 host up) scanned in 0.23 seconds\n\n```\n\n\n##Mail_Recipients.cfg\n\n\u5b9b\u5148\u30e1\u30fc\u30eb\u306e\u60c5\u5831\u304c\u542b\u307e\u308c\u308b\u3088\u3046\u3067\u3059\u3002`hwraid@softlayer.com`\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n\n```text:/usr/Adaptec_Event_Monitor/Mail_Recipients.cfg\nhwraid@softlayer.com,W\n```\n\n\u672c\u6765\u306f\u3001\u3053\u3053\u306b\u306f\u8907\u6570\u8a2d\u5b9a\u53ef\u80fd\u306e\u3088\u3046\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001\n\n```\nhwraid@softlayer.com,W\nxxxx@xxx.xxx.com,I\nyyyy@yyy.yyy.com,E\n```\n\n\u306a\u3069\u3002I/W/E\u306e\u610f\u5473\u306f\u3001\n\n```\nI: Error, Warning & Informational\nW: Error & Warning\nE: Error\n```\n\n\u306e\u3088\u3046\u3067\u3059\u3002\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001SoftLayer\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u306fhwraid@softlayer.com\u3057\u304b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u4ee5\u5916\u306e\u30e1\u30fc\u30eb\u306f`550 relay not permitted`\u304c\u51fa\u3066\u5c4a\u304b\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u306a\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e`hwraid@softlayer.com`\u4ee5\u5916\u3092\u767b\u9332\u3057\u3066\u3082\u3001SoftLayer\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306f\u53d7\u4fe1\u3057\u307e\u305b\u3093\u3002\u3082\u3057\u3001\u81ea\u524d\u306eSMTP\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u3053\u306b\u8907\u6570\u8a18\u8ff0\u53ef\u80fd\u3067\u3059\u3002\n\n##Email_Notification_Status.cfg\n\n```text:/usr/Adaptec_Event_Monitor/Email_Notification_Status.cfg\n1\n```\n\n\u3053\u306e\u610f\u5473\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u3067\u3059\u3002\u5f53\u7136\u30c7\u30d5\u30a9\u30eb\u30c8\u306e1\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n1: \u901a\u77e5\u3059\u308b\u3002\n0: \u901a\u77e5\u3057\u306a\u3044\u3002\n```\n\n#\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u9001\u4ed8\u3059\u308b\n/usr/Adaptec_Event_Monitor/configureEmailSettings.sh\u3092\u5b9f\u884c\u3059\u308c\u3070\u3001\u3053\u3053\u3067\u7d39\u4ecb\u3057\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u9001\u4ed8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\uff08\u8a2d\u5b9a\u5909\u66f4\u306f\u76f4\u63a5\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u305f\u65b9\u304c\u697d\u3060\u3068\u601d\u3044\u307e\u3059\u304c\uff09\u3002\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u5b9f\u969b\u306b\u9001\u4ed8\u3057\u305f\u3089SoftLayer\u5185\u90e8\u306e\u4eba\u9054\u3082\u4f55\u4e8b\u304b\u3068\u9a12\u304e\u51fa\u3057\u3066\u3001Ticket\u304c\u98db\u3093\u3067\u304f\u308b\u306e\u3067\u3001\u300c\u30c6\u30b9\u30c8\u3057\u3066\u305f\u3060\u3051\u3060\u3088\u300d\u3068\u56de\u7b54\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\n\u307e\u305f\u3001\u3061\u3083\u3093\u3068\u30e1\u30fc\u30eb\u304c\u98db\u3093\u3067\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af\u304c\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4e0b\u8a18\u624b\u9806\u4e2d\u3067`./configureEmailSettings.sh`\u3067\u306f\u306a\u304f\u3001`bash -x ./configureEmailSettings.sh`\u306b\u3057\u3066\u3001\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u305f\u65b9\u304c\u3088\u308a\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3057\u3087\u3046\u3002\n\uff08\u6ce8\uff09\u901a\u77e5\u9023\u7d61\u304c\u4e00\u6669\u5f85\u305f\u3055\u308c\u305f\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u6c17\u9577\u306b\u5f85\u3061\u307e\u3059\u3002\u3002\u3002\n\n```\n# cd /usr/Adaptec_Event_Monitor/\n# ./configureEmailSettings.sh\n\n\nSMTP Server Configuration Utility\n---------------------------------\n\nChoose any of the following options:\n-----------------------------------------------------------------------------\n1) Enable Email Notification                  2) Disable Email Notification\n3) Get SMTP Server Details                    4) Set SMTP Server Details\n5) Get Recipient Information                  6) Set Recipient Information\n7) Update Recipient Information               8) Delete Recipient Information\n9) Send Test Email                           10) Exit\n-----------------------------------------------------------------------------\n\n\nEnter your choice: 9\n\nSend Test Email:\n----------------\nEnter recipient e-mail address: hwraid@softlayer.com\n\n```\n\n#\u304a\u307e\u3051\n/var/log/messages\u306bRAID Controller\u306e\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3053\u3092\u76e3\u8996\u3059\u308b\u3053\u3068\u3067\u3082\u30a8\u30e9\u30fc\u691c\u77e5\u306f\u53ef\u80fd\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\n\n\n\n\n", "tags": ["SoftLayer", "ShinobiLayer"]}