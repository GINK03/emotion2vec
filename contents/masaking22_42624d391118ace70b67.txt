{"context": "\u521d\u3081\u3066mac\u3067rails\u306e\u74b0\u5883\u69cb\u7bc9\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u305f\u969b\u306b\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u306a\u3069\u3092\u5168\u30661\u3064\u306b\u5099\u5fd8\u9332\u3068\u3057\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\u306a\u308b\u3079\u304f\u4e01\u5be7\u306b\u66f8\u3044\u305f\u3064\u3082\u308a\u3067\u3059\u3002\n\u9593\u9055\u3044\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\u6982\u8981\n\nMac\u3067Vagrant\u3092\u5229\u7528\u3057\u3066\u3001VirtualBox+CentOS7\u306e\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\ngit, ruby, rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nMySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nDB\u3092MySQL\u306b\u5909\u66f4\u3057\u3064\u3064\u3001Rails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\nApache\u3068Passenger\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n\u74b0\u5883\n\nMacOSX 10.12.3\nVirtualBox 5.1.14\nVagrant 1.9.1\nCentOS 7.3\nGit 1.8.3.1\nRuby 2.4.0\nRails 5.0.1\nMySQL 5.7.17\nApache 2.4.6\nPassenger 5.1.2\n\nHomebrew\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\u3044\u308c\u3066\u3044\u306a\u3044\u4eba\u306f\u3053\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n1.Vagrant\u3067VirtualBox+CentOS7\u306e\u958b\u767a\u74b0\u5883\u69cb\u7bc9\n\u307b\u307c\u3053\u306e\u30b5\u30a4\u30c8\u3092\u5f15\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u304a\u4e16\u8a71\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n1.1 Virtual Box\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttps://www.virtualbox.org\nvirtualbox -v\u3068\u304b\u3067version\u78ba\u8a8d\u51fa\u6765\u308b\u304b\u3068\u601d\u3063\u305f\u3089\u51fa\u6765\u306a\u3055\u305d\u3046\u3002update\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u306f\u3053\u3061\u3089\u3002\n\n1.2 Vagrant\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttps://www.vagrantup.com\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u78ba\u8a8d\n$ vagrant -v\nVagrant 1.9.1\n\n\n\n\u5099\u8003\n\u4fbf\u5229\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u308b\u305d\u3046\u3067\u3059\u3002\u307e\u3060\u79c1\u306b\u306f\u4f55\u304c\u3069\u3046\u4fbf\u5229\u306a\u306e\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3054\u53c2\u8003\u307e\u3067\u306b\u3002\n\n\n1.3 CentOS\u3092\u3044\u308c\u308b\n\u3053\u3053\u304b\u3089CentOS\u306ebox\u3092\u63a2\u3059\u3002\u4eca\u306e\u6700\u65b0\u7248\u306fbento/centos-7.3\u306a\u306e\u3067\u3053\u308c\u3092\u3044\u308c\u3066\u307f\u307e\u3059\u3002bento\u3068\u306f chef\u793e\u304c\u516c\u958b\u3057\u3066\u3044\u308bvagrant\u7528\u306eOS\u30a4\u30e1\u30fc\u30b8\uff08box) \u3060\u305d\u3046\u3067\u3059(by this)\nVagrant\u306bbox\u3092\u3044\u308c\u307e\u3059\u3002virtualbox\u3092\u4f7f\u3046\u306e\u30672\u3068\u6253\u3063\u3066\u4e0b\u3055\u3044\u3002\n$  vagrant box add bento/centos-7.3\n==> box: Loading metadata for box 'bento/centos-7.3'\n    box: URL: https://atlas.hashicorp.com/bento/centos-7.3\nThis box can work with multiple providers! The providers that it\ncan work with are listed below. Please review the list and choose\nthe provider you will be working with.\n\n1) parallels\n2) virtualbox\n3) vmware_desktop\n\nEnter your choice: 2\n==> box: Adding box 'bento/centos-7.3' (v2.3.2) for provider: virtualbox\n    box: Downloading: https://atlas.hashicorp.com/bento/boxes/centos-7.3/versions/2.3.2/providers/virtualbox.box\n==> box: Successfully added box 'bento/centos-7.3' (v2.3.2) for 'virtualbox'!\n\nbox\u3092\u8ffd\u52a0\u3067\u304d\u305f\u304b\u3069\u3046\u304b\u78ba\u8a8d\n$ vagrant box list\nbento/centos-7.3 (virtualbox, 2.3.2)\n\n\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4efb\u610f\u306e\u5834\u6240\u306b\u4f5c\u6210\u3057\u3001\u79fb\u52d5\u3059\u308b\u3002\n$ mkdir -p ~/vagrant/centos7.3\n$ cd vagrant/centos7.3\n\n\u521d\u671f\u5316\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n$ vagrant init bento/centos-7.3\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n\nVagrantfile\u3068\u3044\u3046\u306e\u304c\u51fa\u6765\u305f\u307f\u305f\u3044\u3067\u3059\u3002\nVM(Virtual Machine)\u3092\u8d77\u52d5\u3059\u308b\u3002$ vagrant up (\u3053\u308c\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u9577\u3044\u306e\u3067\u8cbc\u308a\u307e\u305b\u3093\u3002)\nVM\u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002(running\u3057\u3066\u308c\u3070ok)$ vagrant status\n$ vagrant status\nCurrent machine states:\n\ndefault                   running (virtualbox)\n\nThe VM is running. To stop this VM, you can run `vagrant halt` to\nshut it down forcefully, or you can run `vagrant suspend` to simply\nsuspend the virtual machine. In either case, to restart it again,\nsimply run `vagrant up`.\n\nssh\u3067\u63a5\u7d9a\u3059\u308b\u3002$ vagrant ssh\n$ vagrant ssh\nLast login: Mon Jan 30 22:26:54 2017 from 10.0.2.2\n[vagrant@localhost ~]$\n\nVM\u304b\u3089\u629c\u3051\u308b\u3002 $ exit\n[vagrant@localhost ~]$ exit\nlogout\nConnection to 127.0.0.1 closed.\n\nVM\u3092\u7d42\u4e86\u3059\u308b\u3002 $ vagrant halt\n$ vagrant halt\n==> default: Attempting graceful shutdown of VM...\n\n\n\n\u5099\u8003\nvagrant\u306e\u30b3\u30de\u30f3\u30c9\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002$vagrant reload\u306f\u5f8c\u3005\u4f7f\u3044\u307e\u3059\u3002$vagrant -h\u3053\u308c\u3067\u3082\u898b\u308c\u307e\u3059\u3002\nvagrant\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306e\u8a2d\u5b9a\u306f 4.2 MySQL\u3067\u4f5c\u7528\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210 \u306e\u5f8c\u306b\u3084\u308a\u307e\u3059\u3002\n\n\n1.4 \u30b7\u30b9\u30c6\u30e0\u3092\u6700\u65b0\u306e\u72b6\u614b\u306b!\n\u3053\u308c\u591a\u5206\u30de\u30b9\u30c8\u3067\u306f\u306a\u3044\u3067\u3059\u3002\u5206\u304b\u3089\u306a\u3044\u3067\u3059\u3002\u77e5\u3089\u306a\u3044\u3067\u3059\u3002\u3054\u3081\u3093\u306a\u3055\u3044\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001$su -\u3067root\u30e6\u30fc\u30b6\u30fc\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306fvagrant\u3067\u3059\u3002\n\u305d\u3053\u3067yum -y update\u3092\u5b9f\u884c\u3059\u308b\u3002\u6642\u9593\u304b\u304b\u308b\u306e\u3067\u3001\u3053\u306e\u9593\u306b\u30c8\u30a4\u30ec\u884c\u3063\u305f\u308a\u3057\u3066\u6765\u3066\u304f\u3060\u3055\u3044\u3002\u7d42\u308f\u3063\u3066\u304b\u3089\u518d\u5ea6yum -y update\u3059\u308b\u3068\u3001\nroot@localhost ~]# yum -y update\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: ftp.freepark.org\n * extras: ftp.freepark.org\n * updates: ftp.freepark.org\nNo packages marked for update\n\n\u3063\u3066\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n2. ['git', 'ruby', 'rails'].each{|var| var.install}\n\u30bf\u30a4\u30c8\u30eb\u3075\u3056\u3051\u3066\u307f\u307e\u3057\u305f\u3002\u8981\u306f\u3001git,ruby,rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3053\u306e\u30b5\u30a4\u30c8\u3068\u3053\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\n2.1 git\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1.4\u306e\u7d9a\u304d\u3067\u3001root\u30e6\u30fc\u30b6\u30fc\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u304b\u3081\u3066\u4e0b\u3055\u3044\u3002($whoami\u3067\u78ba\u304b\u3081\u3089\u308c\u307e\u3059)\n[root@localhost ~]# yum install git\n\n\u4f55\u304b\u805e\u304b\u308c\u308b(\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u78ba\u8a8d)\u306e\u3067y\u3092\u6253\u3064\u3002\u4eca\u5f8c\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u78ba\u8a8d\u3055\u308c\u305f\u969b\u306b\u306fy\u3092\u30bf\u30a4\u30d7\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u4e0b\u8a18\u3067\u78ba\u8a8d\u3002\n[root@localhost ~]# git --version\ngit version 1.8.3.1\n\n\n2.2 \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u8a00\u308f\u308c\u305f\u901a\u308a\u306b\u3084\u308a\u307e\u3059\u3002\u79c1\u3082\u4f55\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u3002\n[root@localhost ~]# yum install zlib zlib-devel openssl-devel sqlite-devel gcc-c++ glibc-headers libyaml-devel readline readline-devel zlib-devel libffi-devel\n\n\n2.3 ruby\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n2.3.1 rbenv\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[root@localhost ~]# git clone https://github.com/sstephenson/rbenv.git /usr/local/rbenv\n[root@localhost ~]# echo 'export RBENV_ROOT=\"/usr/local/rbenv\"' >> /etc/profile \n[root@localhost ~]# echo 'export PATH=\"${RBENV_ROOT}/bin:${PATH}\"' >> /etc/profile\n[root@localhost ~]# echo 'eval \"$(rbenv init -)\"' >> /etc/profile\n\n\u3044\u3063\u305f\u3093\u30bf\u30fc\u30df\u30ca\u30eb\u9589\u3058\u305f\u3042\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n[root@localhost ~]# rbenv --version\nrbenv 1.1.0-2-g4f8925a\n\n\n2.3.2 ruby-build\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[root@localhost ~]# git clone https://github.com/sstephenson/ruby-build.git /usr/local/rbenv/plugins/ruby-build\n\n\n2.3.3 ruby\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5bfe\u8c61\u3092\u78ba\u8a8d\n[root@localhost ~]# rbenv install --list # => \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ef\u80fd\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7\u306e\u8868\u793a\n[root@localhost ~]# rbenv install -v 2.4.0\n[root@localhost ~]# rbenv rehash\n[root@localhost ~]# rbenv global 2.4.0\n\n\u4eca\u56de\u306f2.4.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb!\u5c11\u3057\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\n\u7d42\u308f\u3063\u305f\u3089\u3001\u4e0b\u8a18\u3067\u78ba\u8a8d!\n[root@localhost ~]# ruby -v\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]\n\n\n2.4 rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[root@localhost ~]# gem update --system\n[root@localhost ~]# gem install --no-ri --no-rdoc rails\n[root@localhost ~]# gem install bundler\n[root@localhost ~]# rbenv rehash\n\n\u7d50\u69cb\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\u6700\u5f8c\u306b\u78ba\u8a8d!\n[root@localhost ~]#  rails -v\nRails 5.0.1\n\n\n3. MySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3053\u3053\u3067\u306f\u3053\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\n3.1 \u306f\u3058\u3081\u306b\nCentOS 7 \u3088\u308a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d0\u306e MySQL \u304c MariaDB \u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u305f\u305d\u3046\u3067\u3059\u3002MariaDB\u3092\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u5f15\u304d\u7d9a\u304droot\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\u306f\u884c\u3044\u307e\u3059\u3002\n[root@localhost ~]# yum remove mariadb-libs\n[root@localhost ~]# rm -rf /var/lib/mysql\n\n\u3053\u3053\u3067\u3082\u3084\u306f\u308ay\u3092\u62bc\u3057\u7d9a\u3051\u307e\u3057\u3087\u3046\u3002\n\n3.2 yum\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\nCentOS7\u306bMySQL\u516c\u5f0f\u306eyum\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n[root@localhost ~]# rpm -ivh http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm\n\n\n3.3 MySQL\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046!\n[root@localhost ~]# yum install mysql-community-server\n[root@localhost ~]# mysqld --version\nmysqld  Ver 5.7.17 for Linux on x86_64 (MySQL Community Server (GPL))\n\n\u307e\u305f\u3001Rails\u3067MySQL\u3092\u4f7f\u3046\u305f\u3081\u306b\u5fc5\u8981\u306agem\u3092\u4f7f\u3046\u305f\u3081\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3082\u5165\u308c\u3066\u304a\u304d\u307e\u3059\u3002\n[root@localhost ~]#  yum install mysql-devel\n\n\n3.4 MySQL\u306e\u8d77\u52d5\nMySQL\u3092\u8d77\u52d5\u3055\u305b\u3001\u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u3082\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n[root@localhost ~]# systemctl start mysqld.service\n[root@localhost ~]# systemctl enable mysqld.service\n\n\n3.5 MySQL\u306e\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d\nMySQL5.7\u3067\u306f\u3001\u521d\u56de\u8d77\u52d5\u6642\u306b\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305d\u3046\u3067\u3059\u3002\n[root@localhost ~]# cat /var/log/mysqld.log | grep password\n2017-01-31T00:38:52.110013Z 1 [Note] A temporary password is generated for root@localhost: />rkpwb4X*oe\n\n\u4eca\u56de\u306e\u5834\u5408\u3001/>rkpwb4X*oe\u304c\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u3059\u3002\n\n3.6 MySQL\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\nmysql_secure_installation \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001MySQL \u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n[root@localhost ~]# mysql_secure_installation\n\nSecuring the MySQL server deployment.\n\nEnter password for user root: #\u5148\u7a0b\u898b\u305f\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9(/>rkpwb4X*oe)\n\nThe existing password for the user account root has expired. Please set a new password.\n\nNew password: #\u65b0\u898f\u30d1\u30b9\u30ef\u30fc\u30c9\n\nRe-enter new password:  #\u78ba\u8a8d\u306e\u305f\u3081\u518d\u5ea6\u65b0\u898f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\nThe 'validate_password' plugin is installed on the server.\nThe subsequent steps will run with the existing configuration\nof the plugin.\nUsing existing password for root.\n\nEstimated strength of the password: 100\nChange the password for root ? ((Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\n\nNew password: #\u4f55\u6545\u304b\u77e5\u3089\u3093\u304c\u518d\u5ea6\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529bpart1\n\nRe-enter new password: #\u4f55\u6545\u304b\u77e5\u3089\u3093\u304c\u518d\u5ea6\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529bpart2\n\nEstimated strength of the password: 100\nDo you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nBy default, a MySQL installation has an anonymous user,\nallowing anyone to log into MySQL without having to have\na user account created for them. This is intended only for\ntesting, and to make the installation go a bit smoother.\nYou should remove them before moving into a production\nenvironment.\n\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nSuccess.\n\n\nNormally, root should only be allowed to connect from\n'localhost'. This ensures that someone cannot guess at\nthe root password from the network.\n\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nSuccess.\n\nBy default, MySQL comes with a database named 'test' that\nanyone can access. This is also intended only for testing,\nand should be removed before moving into a production\nenvironment.\n\n\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\n - Dropping test database...\nSuccess.\n\n - Removing privileges on test database...\nSuccess.\n\nReloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\n\nReload privilege tables now? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nSuccess.\n\nAll done!\n\n\n3.7 MySQL\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u78ba\u8a8d\nmysql -u root -p\u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u307e\u3059\u3002\n[root@localhost ~]# mysql -u root -p\nEnter password: #\u5148\u7a0b\u8a2d\u5b9a\u3057\u305f\u65b0\u898f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 6\nServer version: 5.7.17 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql>\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u306a\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u6210\u529f\u3067\u3059!\nmysql> quit\u3068\u6253\u3066\u3070mysql\u304b\u3089bye\u3068\u8a00\u308f\u308c\u3066\u3001MySQL\u304b\u3089\u629c\u3051\u3089\u308c\u307e\u3059\u3002exit\u3067\u3082\\q\u3067\u3082\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3002\n\n3.8 \u8a2d\u5b9a\u5909\u66f4\n\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u306b\u306f\n\nMySQL 5.7 \u304b\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u6709\u52b9\u671f\u9650\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067360\u65e5\u306b\u306a\u308a\u3001360\u65e5\u3092\u7d4c\u904e\u3059\u308b\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\u3092\u4fc3\u3055\u308c\u3066 MySQL \u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002\ndefault_password_lifetime \u306e\u5024\u3092 0 \u306b\u5909\u66f4\u3057\u3066\u3001\u3053\u306e\u6709\u52b9\u671f\u9650\u306e\u8a2d\u5b9a\u3092\u7121\u52b9\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3068\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3061\u3089\u306b\u3088\u308b\u3068MySQL 5.7.11\u3088\u308a\u3001default\u3067default_password_lifetime = 0\u3068\u306a\u3063\u3066\u3044\u308b\u307f\u305f\u3044\u3067\u3059\u3002\n\u6587\u5b57\u30b3\u30fc\u30c9\u306f\u53c2\u8003\u30b5\u30a4\u30c8\u306b\u306a\u3089\u3063\u3066UTF-8\u306b\u5909\u66f4\u3057\u307e\u3057\u3087\u3046\u3002\n[root@localhost /]# vi /etc/my.cnf\u3067/etc/my.cnf\u306bcharacter-set-server = utf8\u3092\u8ffd\u8a18! vi\u30a8\u30c7\u30a3\u30bf\u30fc\u306e\u4f7f\u3044\u65b9\u306f\u3053\u3061\u3089\u3002\nMySQL \u3092\u518d\u8d77\u52d5\u3055\u305b\u3001\u8a2d\u5b9a\u5185\u5bb9\u3092\u53cd\u6620\u3055\u305b\u307e\u3059\u3002\n[root@localhost /]# systemctl restart mysqld.service\n\n\u8a2d\u5b9a\u7d42\u4e86!!!!!!!\n\n\n\u5c0f\u4f11\u6b62\nversion\u3063\u3066\u3088\u304fvertion\u3063\u3066\u66f8\u3044\u3061\u3083\u3044\u307e\u3059\u3002\u306a\u3093\u3067\u3067\u3057\u3087\u3046\u306d\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n\n4. DB\u3092MySQL\u306b\u5909\u66f4\u3057\u3064\u3064\u3001Rails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\nRails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\u3067\u306f\u518d\u3073\u3053\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002Rails\u306eDB\u3092MySQL\u306b\u3059\u308b\u306e\u306f\u3053\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n4.1 rails\u4f5c\u696d\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\n\u540c\u69d8\u306broot\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u4f5c\u696d\u3057\u307e\u3059\u3002\n[root@localhost /]# useradd -m rails\u3067rails\u7528\u306e\u30e6\u30fc\u30b6\u30fc(rails\u3068\u547d\u540d)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[root@localhost /]# cat /etc/shadow\u3067\u6700\u7d42\u884c\u306b\u4eca\u4f5c\u3063\u305frails\u304f\u3093\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n[root@localhost /]# passwd rails\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\u3067\u306f\u3001\u4eca\u4f5c\u3063\u305frails\u30e6\u30fc\u30b6\u30fc\u306b\u79fb\u52d5\u3057\u307e\u3057\u3087\u3046!su rails\n[root@localhost /]# \u304b\u3089 [rails@localhost /]$\u3078\u5909\u308f\u308a\u307e\u3057\u305f!\n\n4.2 MySQL\u3067\u4f5c\u7528\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\n\n\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306fdevelopment\u3001test\u3001production\u306e\uff13\u3064\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3068\u306e\u3053\u3068\u3067\u3059\u3002\u52c9\u5f37\u4e0d\u8db3\u3067\u3059\u3002\n\nmysql -u root -p\u3067MySQL\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\u30e6\u30fc\u30b6\u30fc\u540d\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3001\u300c'\u30e6\u30fc\u30b6\u30fc\u540d'@'localhost'\u300d\u3068\u3044\u3046\u5f62\u306b\u306a\u308a\u307e\u3059\u3002\u79c1\u3053\u30531\u5ea6\u30df\u30b9\u308a\u307e\u3057\u305f\u3002password\u3082''\u5fc5\u8981\u306a\u306e\u306b\u3082\u3054\u6ce8\u610f\u3092!\nmysql> create user 'sampleDev'@'localhost' identified by '\u5185\u7dd2', 'samplePro'@'localhost' identified by '\u5185\u7dd2\u3060\u3063\u3066\u3070', 'sampleTest'@'localhost' identified by '\u3044\u3084\u30fc\u3093';\n\n\n\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u78ba\u8a8d\u306f\u4ee5\u4e0b\u3067\u51fa\u6765\u307e\u3059\u3002\nmysql> select User,Host from mysql.user;\n+------------+-----------+\n| User       | Host      |\n+------------+-----------+\n| mysql.sys  | localhost |\n| root       | localhost |\n| sampleDev  | localhost |\n| samplePro  | localhost |\n| sampleTest | localhost |\n+------------+-----------+\n5 rows in set (0.00 sec)\n\n\u6700\u5f8c\u306b\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002MySQL\u306f\u6700\u5f8c\u306b;\u3064\u3051\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3053\u3068\u6bce\u56de\u5fd8\u308c\u307e\u3059\u3002\nmysql> grant all on *.* to 'sampleDev'@'localhost', 'samplePro'@'localhost', 'sampleTest'@'localhost';\nQuery OK, 0 rows affected (0.00 sec)\n\n\n\u756a\u5916\u7de8: Vagrant\u3067\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306e\u8a2d\u5b9a\n\u3053\u308c\u306f\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3084\u308b\u306e\u304c\u30d9\u30b9\u30c8\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\u59cb\u3081\u306b\u3084\u3063\u3061\u3083\u3046\u3079\u304d\u306a\u306e\u304b\u306a\u3002\u3053\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n1.3 CentOS\u3092\u3044\u308c\u308b \u3067\u4f5c\u6210\u3057\u305fcentos7.3\u30d5\u30a9\u30eb\u30c0\u4e0b\u306bVagrantfile\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002vi\u30a8\u30c7\u30a3\u30bf\u30fc\u3067\u958b\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u884c\u6570\u304c\u51fa\u306a\u3044\u5834\u5408\u306f:set number\u3067\u8868\u793a\u51fa\u6765\u307e\u3059\u3002\u3069\u3053\u306b\u66f8\u304d\u8fbc\u3093\u3067\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u79c1\u306f41\u884c\u76ee\u306b\nconfig.vm.synced_folder \"./shared\", \"/home/rails\", owner: \"rails\", group: \"rails\"\u3068\u5165\u308c\u307e\u3057\u305f\u3002\n\"./shared\"\u306f\u30db\u30b9\u30c8\u30de\u30b7\u30f3(mac)\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u3078\u306e\u30d1\u30b9\u3067\u3059\u3002Vagrantfile\u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\u3067\u3059\u3002\"/home/rails/shared\"\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002owner\u3068group\u306frails\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u306erails\u3068\u3057\u307e\u3059\u3002\ncentos7.3 $ ls\nVagrantfile\ncentos7.3 $ vi Vagrantfile\n\n 36   # Share an additional folder to the guest VM. The first argument is\n 37   # the path on the host to the actual folder. The second argument is\n 38   # the path on the guest to mount the folder. And the optional third\n 39   # argument is a set of non-required options.\n 40   # config.vm.synced_folder \"../data\", \"/vagrant_data\"\n 41   config.vm.synced_folder \"./shared\", \"/home/rails\", owner: \"rails\", group: \"rails\" # <- add!\n 42   # Provider-specific configuration so you can fine-tune various\n\n\u305d\u3057\u3066'vagrant reload'\u3092\u884c\u3048\u3070\u5b8c\u4e86!\u306e\u306f\u305a\u306a\u306e\u3067\u3059\u304c\u3001\ncentos7.3 $ vagrant reload\nThere are errors in the configuration of this machine. Please fix\nthe following errors and try again:\n\nvm:\n* The host path of the shared folder is missing: ./shared\n\n\u3068shared\u30d5\u30a9\u30eb\u30c0\u304c\u306a\u3044\u3088\u3068\u6012\u3089\u308c\u305f\u306e\u3067\u3001\ncentos7.3 $ mkdir shared\ncentos7.3 $ vagrant reload\n\n\u3067\u4eca\u5ea6\u3053\u305d\u5b8c\u4e86\u3067\u3059\u3002reload\u306f\u5c11\u3057\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\n4.3 Rails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\n\n4.3.1 Vagrantfile\u306e\u7de8\u96c6\n\u7d0429\u884c\u76ee\u306econfig.vm.network \"private_network\", ip: \"192.168.33.10\"\u3092\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u307e\u305f\u3001config.vm.network \"forwarded_port\", guest: 3000, host:3000\u3092\u8ffd\u8a18\u3057\u3066\u4e0b\u3055\u3044\u3002\n 25   # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n 26\n 27   config.vm.network \"forwarded_port\", guest: 3000, host:3000\n 28\n 29   # Create a private network, which allows host-only access to the machine\n 30   # using a specific IP.\n 31   config.vm.network \"private_network\", ip: \"192.168.33.10\" \n\n\u7d42\u308f\u3063\u305f\u3089vagrant reload\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u3053\u308c\u3067rails s\u3092\u3057\u305f\u969b\u306b\u3001mac\u306e\u30d6\u30e9\u30a6\u30b6(localhost:3000)\u304b\u3089\u898b\u308c\u307e\u3059!\n\n4.3.2 rails new\n\u307e\u305a\u3001vagrant ssh\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001su rails\u3067\u30e6\u30fc\u30b6\u30fc\u3092rails\u306b\u3057\u3066\u4e0b\u3055\u3044\u3002 4.1\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u306f\u305a\u3067\u3059\u3002\ndirectory\u3092/home/rails(\u5148\u7a0b\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u8a2d\u5b9a\u3057\u305f\u5834\u6240)\u306b\u79fb\u52d5\u3057\u3066\u304b\u3089rails new\u3092\u884c\u3044\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u969b\u306b\u3001'--database=mysql'\u3068\u3059\u308b\u3053\u3068\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306eDB\u304cMySQL\u3078\u3068\u5909\u3048\u3089\u308c\u307e\u3059\u3002\u7d42\u4e86\u5f8c\u3001\u4f5c\u6210\u3057\u305fsample\u3078\u79fb\u52d5\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n[rails@localhost ~]$ cd /home/rails/\n[rails@localhost ~]$ pwd\n/home/rails\n[rails@localhost /]$ rails new sample -d mysql --skip-bundle\n[rails@localhost /]$ cd sample\n\n\u3061\u306a\u307f\u306b\u3001mac\u5074\u304b\u3089\u3082\u5148\u7a0b\u6307\u5b9a\u3057\u305fshared\u30d5\u30a9\u30eb\u30c0\u5185\u306bsample\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\ncentos7.3 $ tree -L 2\n.\n|-- Vagrantfile\n`-- shared\n    `-- sample\n\n\n4.3.3 Gemfile\u306e\u7de8\u96c6\n\u7d0422\u884c\u76ee\u306b\u3042\u308bgem 'therubyracer', platforms: :ruby\u3092\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3059\u308b\u3002\n     21 # See https://github.com/rails/execjs#readme for more supported runtimes\n     22 gem 'therubyracer', platforms: :ruby\n\n\n4.3.4 /config/database.yml\u306e\u7de8\u96c6\nsample\u4e0b\u306b\u3042\u308b/config/database.yml\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\ndevelopment\u3001test\u3001production\u306e\u9805\u76ee\u3092\u305d\u308c\u305e\u308c\u3001\u4e0a\u3067\u4f5c\u6210\u3057\u305f\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u300cusername\u300d\u3068\u300cpassword\u300d\u306e\u6240\u306b\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002host: localhost\u3082\u52a0\u3048\u3066\u4e0b\u3055\u3044\u3002\n# MySQL. Versions 5.0 and up are supported.\n#\n# Install the MySQL driver\n#   gem install mysql2\n#\n# Ensure the MySQL gem is defined in your Gemfile\n#   gem 'mysql2'\n#\n# And be sure to use new-style password hashing:\n#   http://dev.mysql.com/doc/refman/5.7/en/old-client.html\n#\ndefault: &default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  reconnect: false\n\n\ndevelopment:\n  <<: *default\n  database: sample_development\n  username: sampleDev\n  password:\u5185\u7dd2\n  host: localhost\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  <<: *default\n  database: sample_test\n  username: sampleTest\n  password:\u3044\u3084\u30fc\u3093\n  host: localhost\n\n# As with config/secrets.yml, you never want to store sensitive information,\n# like your database password, in your source code. If your source code is\n# ever seen by anyone, they now have access to your database.\n#\n# Instead, provide the password as a unix environment variable when you boot\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\n# for a full rundown on how to provide these environment variables in a\n# production deployment.\n#\n# On Heroku and other platform providers, you may have a full connection URL\n# available as an environment variable. For example:\n#\n#   DATABASE_URL=\"mysql2://myuser:mypass@localhost/somedatabase\"\n#\n# You can use this database configuration with:\n#\n#   production:\n#     url: <%= ENV['DATABASE_URL'] %>\n#\nproduction:\n  <<: *default\n  database: sample_production\n  username: samplePro\n  password:\u5185\u7dd2\u3060\u3063\u3066\u3070\n  host: localhost\n\n\n4.3.5 \u4ed5\u4e0a\u3052\n\n\nbundle install \u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\n\nrails s (rails s -b 0.0.0.0 \u306e\u65b9\u304cbetter\u304b\u3082)\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\n NoDatabaseError\u304c\u8d77\u304d\u305f\u969b\u306b\u306frake db:create\u3092\u3059\u308b\n mac\u4e0a\u306e\u30d6\u30e9\u30a6\u30b6\u3067localhost:3000\u306b\u63a5\u7d9a!\n Yay! You\u2019re on Rails!\n\n\n\n4.4 git\u30af\u30ed\u30fc\u30f3\u3057\u305frails\u30a2\u30d7\u30ea\u306e\u5834\u5408\nclone_sample\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092clone\u3057\u305f\u3068\u3057\u307e\u3059\u3002\u307e\u305acd clone_sample\u3067\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n4.4.1 gem install json -v '1.8.3'\u30a8\u30e9\u30fc\n\u3053\u306e\u307e\u307ebundle install\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u307e\u3059\u3002\nAn error occurred while installing json (1.8.3), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.3'` succeeds before bundling.\n\n\n\n4.4.2 \u89e3\u6c7a\u7b56: Gemfile\u306e\u7de8\u96c6\n\n\u5909\u66f4\u3059\u308b\u3082\u306e gem 'rails', '4.2.7.1'\u3092gem 'rails', '~> 5.0.1'\u3078\n\u52a0\u3048\u308b\u3082\u306e  gem 'json', '~> 1.8.3'\n\n\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3 gem 'therubyracer', platforms: :ruby(4.3.1\u3068\u540c\u69d8)\n\nInstalling builder 3.2.2\nInstalling erubis 2.7.0\nInstalling mini_portile2 2.1.0\n      1 source 'https://rubygems.org'\n      2\n      3 #I added this one\n      4 gem 'json', '~> 1.8.3' \n      5 # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n      6 gem 'rails', '~> 5.0.1'\n      7 # Use sqlite3 as the database for Active Record\n      8 gem 'sqlite3'\n      9 # Use SCSS for stylesheets\n     10 gem 'sass-rails', '~> 5.0'\n     11 # Use Uglifier as compressor for JavaScript assets\n     12 gem 'uglifier', '>= 1.3.0'\n     13 # Use CoffeeScript for .coffee assets and views\n     14 gem 'coffee-rails', '~> 4.1.0'\n     15 # See https://github.com/rails/execjs#readme for more supported runtimes\n     16 gem 'therubyracer', platforms: :ruby\n     17\n\n\n\u4fdd\u5b58\u5f8c\u306b\n$ bundle update\n$ rake db:migrate\n$ rails s -b 0.0.0.0\n\n\u3053\u308c\u3067localhost:3000\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070OK!\u3053\u3061\u3089\u306f(-b 0.0.0.0\u3068\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u306a\u3051\u308c\u3070\u30c0\u30e1\u3060\u3063\u305f)\n\n\u5099\u8003\n\u65e2\u5b58\u306erails\u306eDB\u3092MySQL\u306b\u5909\u3048\u305f\u3044\u969b\u306b\u306f\u3001\u3053\u306e\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044!\n\n5 Apache\u3068Passenger\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nroot\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n5.1 Apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u53c2\u8003\u30b5\u30a4\u30c8\nyum\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u5b8c\u4e86\u5f8c\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n[root@localhost ~]# yum -y install httpd\n[root@localhost ~]# httpd -v\nServer version: Apache/2.4.6 (CentOS)\nServer built:   Nov 14 2016 18:04:44\n\n\u8d77\u52d5\u3055\u305b\u308b\u306e\u306fservice httpd start, \u505c\u6b62\u306fstop\u3001\u518d\u8d77\u52d5\u306frestart\u3001\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306fstatus\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n5.2 Passenger\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u53c2\u8003\u30b5\u30a4\u30c8\n\n5.2.1 EPEL\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPassenger\u3092\u5165\u308c\u308b\u305f\u3081\u306b\u306fEPEL\u3068\u3044\u3046\u3082\u306e\u304c\u5fc5\u8981\u3089\u3057\u3044\u306e\u3067\u306f\u3058\u3081\u306b\u3044\u308c\u307e\u3059\u3002\n[root@localhost ~]#  yum install -y epel-release yum-utils\n[root@localhost ~]#  yum-config-manager --enable epel\n[root@localhost ~]#  yum clean all && sudo yum update -y\n\n\n\n5.2.2 Passenger\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nThese commands will install Passenger + Apache module through Phusion's YUM repository.\n\n\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3057\u305f\u3002\u3064\u307e\u308a\u3001Passenger\u304f\u3093\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n# Install various prerequisites\n[root@localhost ~]#  yum install -y pygpgme curl\n\ndate\n# if the output of date is wrong, please follow these instructions to install ntp\n[root@localhost ~]#  yum install -y ntp\n[root@localhost ~]#  chkconfig ntpd on\n[root@localhost ~]#  ntpdate pool.ntp.org\n[root@localhost ~]#  service ntpd start\n\n# Add our el7 YUM repository\n[root@localhost ~]#  curl --fail -sSLo /etc/yum.repos.d/passenger.repo https://oss-binaries.phusionpassenger.com/yum/definitions/el-passenger.repo\n\n# Install Passenger + Apache module\n[root@localhost ~]#  yum install -y mod_passenger || sudo yum-config-manager --enable cr && sudo yum install -y mod_passenger\n\n\n5.2.3 Apache\u3092\u30ea\u30b9\u30bf\u30fc\u30c8\nPassenger Apache \u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u306e\u3067\u3001Apache\u3092\u518d\u8d77\u52d5\u3055\u305b\u3066Passenger\u3092\u4f5c\u52d5\u3055\u305b\u307e\u3057\u3087\u3046\u3002\n[root@localhost ~]# systemctl restart httpd\n\n\n5.2.4 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u78ba\u8a8d\n\n1\u3064\u76ee\u306f/usr/bin/passenger-config validate-install\u3067\u3059\u3002Passenger itself\u3068Apache\u53cc\u65b9\u306b\u30c1\u30a7\u30c3\u30af\u3092\u3044\u308c\u3066(space\u3092\u62bc\u3059)\u3001enter!\n\n[root@localhost ~]# /usr/bin/passenger-config validate-install\nWhat would you like to validate?\nUse <space> to select.\nIf the menu doesn't display correctly, press '!'\n\n   \u2b22  Passenger itself\n \u2023 \u2b22  Apache\n\n-------------------------------------------------------------------------\n\nChecking whether there are multiple Apache installations...\nOnly a single installation detected. This is good.\n\n-------------------------------------------------------------------------\n\n * Checking whether this Passenger install is in PATH... \u2713\n * Checking whether there are no other Passenger installations... \u2713\n * Checking whether Apache is installed... \u2713\n * Checking whether the Passenger module is correctly configured in Apache... \u2713\n\nEverything looks good. :-)\n\n\u4e0a\u8a18\u306f\u6210\u529f\u4f8b\u3067\u3059\u304c\u3001\n\n * Checking whether Apache is installed... \u2717\n\n   Unable to validate your Apache installation: more software required\n\n   This program requires the apxs2 tool in order to be able to validate your\n   Apache installation. This tool is currently not installed. You can solve this\n   as follows:\n\n   Please install it with yum install httpd-devel\n\n   When done, please re-run this program.\n\n\nDetected 1 error(s), 0 warning(s).\n\n\u3068\u6012\u3089\u308c\u305f\u308a\u3082\u3057\u307e\u3059\u3002\u305d\u306e\u6642\u306f\u7d20\u76f4\u306b\u8a00\u308f\u308c\u305f\u3068\u304a\u308a(yum install httpd-devel)\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n2\u3064\u76ee\u306f/usr/sbin/passenger-memory-stats\u3067\u3059\u3002\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3001Apache\u3068Passenger\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\u51fa\u306a\u3044\u5834\u5408\u306fTroubleshooting Guide\u3078!\n\n[root@localhost ~]# /usr/sbin/passenger-memory-stats\nVersion: 5.1.2\nDate   : 2017-01-31 10:55:11 +0000\n\n--------- Apache processes ---------\nPID   PPID  VMSize    Private  Name\n------------------------------------\n8344  1     222.7 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8392  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8393  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8394  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8395  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8396  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n### Processes: 6\n### Total private dirty RSS: 1.15 MB\n\n\n-------- Nginx processes --------\n\n### Processes: 0\n### Total private dirty RSS: 0.00 MB\n\n\n---- Passenger processes -----\nPID   VMSize    Private  Name\n------------------------------\n8370  417.0 MB  0.9 MB   Passenger watchdog\n8373  649.9 MB  3.2 MB   Passenger core\n8381  425.2 MB  2.9 MB   Passenger ust-router\n### Processes: 3\n### Total private dirty RSS: 7.06 MB\n\n\n\n\u5099\u8003\nPassenger\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u65b9\u6cd5\u306f \n[root@localhost ~]# passenger-config --version\nPhusion Passenger 5.1.2\n\n\n\n\u6700\u5f8c\u306b\n\u6ca2\u5c71\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\u8a02\u6b63\u3084\u8ffd\u8a18\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3001\u3069\u3093\u3069\u3093\u5b9c\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059!\n\u521d\u3081\u3066mac\u3067rails\u306e\u74b0\u5883\u69cb\u7bc9\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u305f\u969b\u306b\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u306a\u3069\u3092\u5168\u30661\u3064\u306b\u5099\u5fd8\u9332\u3068\u3057\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\u306a\u308b\u3079\u304f\u4e01\u5be7\u306b\u66f8\u3044\u305f\u3064\u3082\u308a\u3067\u3059\u3002\n\u9593\u9055\u3044\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n## \u6982\u8981\n1. Mac\u3067Vagrant\u3092\u5229\u7528\u3057\u3066\u3001VirtualBox+CentOS7\u306e\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\n2. git, ruby, rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n3. MySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n4. DB\u3092MySQL\u306b\u5909\u66f4\u3057\u3064\u3064\u3001Rails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\n5. Apache\u3068Passenger\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n## \u74b0\u5883\n- MacOSX 10.12.3\n- VirtualBox 5.1.14\n- Vagrant 1.9.1\n- CentOS 7.3\n- Git 1.8.3.1\n- Ruby 2.4.0\n- Rails 5.0.1\n- MySQL 5.7.17\n- Apache 2.4.6\n- Passenger 5.1.2\n\nHomebrew\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\u3044\u308c\u3066\u3044\u306a\u3044\u4eba\u306f[\u3053\u306e\u30b5\u30a4\u30c8](http://vdeep.net/intr-homebrew)\u3092\u53c2\u8003\u306b\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\n##1.Vagrant\u3067VirtualBox+CentOS7\u306e\u958b\u767a\u74b0\u5883\u69cb\u7bc9\n\u307b\u307c[\u3053\u306e\u30b5\u30a4\u30c8](http://qiita.com/okmn/items/461e5cd3ff234d4b73ff)\u3092\u5f15\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u304a\u4e16\u8a71\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n###1.1 Virtual Box\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttps://www.virtualbox.org\n\n`virtualbox -v`\u3068\u304b\u3067version\u78ba\u8a8d\u51fa\u6765\u308b\u304b\u3068\u601d\u3063\u305f\u3089\u51fa\u6765\u306a\u3055\u305d\u3046\u3002update\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u306f[\u3053\u3061\u3089](http://pc-karuma.net/mac-virtualbox-update/)\u3002\n\n###1.2 Vagrant\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttps://www.vagrantup.com\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u78ba\u8a8d\n\n```\n$ vagrant -v\nVagrant 1.9.1\n```\n\n---\n\n####\u5099\u8003\n\u4fbf\u5229\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u308b\u305d\u3046\u3067\u3059\u3002\u307e\u3060\u79c1\u306b\u306f\u4f55\u304c\u3069\u3046\u4fbf\u5229\u306a\u306e\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u304c[\u3054\u53c2\u8003](http://www.task-notes.com/entry/20150714/1436842800)\u307e\u3067\u306b\u3002\n\n---\n\n###1.3 CentOS\u3092\u3044\u308c\u308b\n[\u3053\u3053](https://atlas.hashicorp.com/boxes/search)\u304b\u3089CentOS\u306ebox\u3092\u63a2\u3059\u3002\u4eca\u306e\u6700\u65b0\u7248\u306f`bento/centos-7.3`\u306a\u306e\u3067\u3053\u308c\u3092\u3044\u308c\u3066\u307f\u307e\u3059\u3002bento\u3068\u306f *chef\u793e\u304c\u516c\u958b\u3057\u3066\u3044\u308bvagrant\u7528\u306eOS\u30a4\u30e1\u30fc\u30b8\uff08box)* \u3060\u305d\u3046\u3067\u3059(by [this](http://qiita.com/park-jh/items/bb89dd659ce9cab2ce0a))\n\nVagrant\u306bbox\u3092\u3044\u308c\u307e\u3059\u3002virtualbox\u3092\u4f7f\u3046\u306e\u30672\u3068\u6253\u3063\u3066\u4e0b\u3055\u3044\u3002\n\n```\n$  vagrant box add bento/centos-7.3\n==> box: Loading metadata for box 'bento/centos-7.3'\n    box: URL: https://atlas.hashicorp.com/bento/centos-7.3\nThis box can work with multiple providers! The providers that it\ncan work with are listed below. Please review the list and choose\nthe provider you will be working with.\n\n1) parallels\n2) virtualbox\n3) vmware_desktop\n\nEnter your choice: 2\n==> box: Adding box 'bento/centos-7.3' (v2.3.2) for provider: virtualbox\n    box: Downloading: https://atlas.hashicorp.com/bento/boxes/centos-7.3/versions/2.3.2/providers/virtualbox.box\n==> box: Successfully added box 'bento/centos-7.3' (v2.3.2) for 'virtualbox'!\n```\nbox\u3092\u8ffd\u52a0\u3067\u304d\u305f\u304b\u3069\u3046\u304b\u78ba\u8a8d\n\n```\n$ vagrant box list\nbento/centos-7.3 (virtualbox, 2.3.2)\n```\n\n\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4efb\u610f\u306e\u5834\u6240\u306b\u4f5c\u6210\u3057\u3001\u79fb\u52d5\u3059\u308b\u3002\n\n```\n$ mkdir -p ~/vagrant/centos7.3\n$ cd vagrant/centos7.3\n```\n\n\u521d\u671f\u5316\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```\n$ vagrant init bento/centos-7.3\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n```\nVagrantfile\u3068\u3044\u3046\u306e\u304c\u51fa\u6765\u305f\u307f\u305f\u3044\u3067\u3059\u3002\n\nVM(Virtual Machine)\u3092\u8d77\u52d5\u3059\u308b\u3002`$ vagrant up` (\u3053\u308c\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u9577\u3044\u306e\u3067\u8cbc\u308a\u307e\u305b\u3093\u3002)\n\nVM\u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002(running\u3057\u3066\u308c\u3070ok)`$ vagrant status`\n\n```\n$ vagrant status\nCurrent machine states:\n\ndefault                   running (virtualbox)\n\nThe VM is running. To stop this VM, you can run `vagrant halt` to\nshut it down forcefully, or you can run `vagrant suspend` to simply\nsuspend the virtual machine. In either case, to restart it again,\nsimply run `vagrant up`.\n```\nssh\u3067\u63a5\u7d9a\u3059\u308b\u3002`$ vagrant ssh`\n\n```\n$ vagrant ssh\nLast login: Mon Jan 30 22:26:54 2017 from 10.0.2.2\n[vagrant@localhost ~]$\n```\nVM\u304b\u3089\u629c\u3051\u308b\u3002 `$ exit`\n\n```\n[vagrant@localhost ~]$ exit\nlogout\nConnection to 127.0.0.1 closed.\n```\nVM\u3092\u7d42\u4e86\u3059\u308b\u3002 `$ vagrant halt`\n\n```\n$ vagrant halt\n==> default: Attempting graceful shutdown of VM...\n```\n---\n####\u5099\u8003\nvagrant\u306e\u30b3\u30de\u30f3\u30c9\u306f[\u3053\u3061\u3089](http://qiita.com/htano/items/0c2ebde44e3fc92b223a)\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002`$vagrant reload`\u306f\u5f8c\u3005\u4f7f\u3044\u307e\u3059\u3002`$vagrant -h`\u3053\u308c\u3067\u3082\u898b\u308c\u307e\u3059\u3002\nvagrant\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306e\u8a2d\u5b9a\u306f _4.2 MySQL\u3067\u4f5c\u7528\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210_ \u306e\u5f8c\u306b\u3084\u308a\u307e\u3059\u3002\n\n---\n###1.4 \u30b7\u30b9\u30c6\u30e0\u3092\u6700\u65b0\u306e\u72b6\u614b\u306b!\n\u3053\u308c\u591a\u5206\u30de\u30b9\u30c8\u3067\u306f\u306a\u3044\u3067\u3059\u3002\u5206\u304b\u3089\u306a\u3044\u3067\u3059\u3002\u77e5\u3089\u306a\u3044\u3067\u3059\u3002\u3054\u3081\u3093\u306a\u3055\u3044\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001`$su -`\u3067root\u30e6\u30fc\u30b6\u30fc\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306f`vagrant`\u3067\u3059\u3002\n\u305d\u3053\u3067`yum -y update`\u3092\u5b9f\u884c\u3059\u308b\u3002\u6642\u9593\u304b\u304b\u308b\u306e\u3067\u3001\u3053\u306e\u9593\u306b\u30c8\u30a4\u30ec\u884c\u3063\u305f\u308a\u3057\u3066\u6765\u3066\u304f\u3060\u3055\u3044\u3002\u7d42\u308f\u3063\u3066\u304b\u3089\u518d\u5ea6`yum -y update`\u3059\u308b\u3068\u3001\n\n```\nroot@localhost ~]# yum -y update\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: ftp.freepark.org\n * extras: ftp.freepark.org\n * updates: ftp.freepark.org\nNo packages marked for update\n```\n\n\u3063\u3066\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n##2. ['git', 'ruby', 'rails'].each{|var| var.install}\n\n\u30bf\u30a4\u30c8\u30eb\u3075\u3056\u3051\u3066\u307f\u307e\u3057\u305f\u3002\u8981\u306f\u3001git,ruby,rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u3053\u3067\u306f[\u3053\u306e\u30b5\u30a4\u30c8](http://qiita.com/shinyashikis@github/items/3501c5f7f71a8e345c3d)\u3068[\u3053\u306e\u30b5\u30a4\u30c8](http://qiita.com/MinaHosoi/items/bf0c79f3972092c3362d)\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\n###2.1 git\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1.4\u306e\u7d9a\u304d\u3067\u3001root\u30e6\u30fc\u30b6\u30fc\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u304b\u3081\u3066\u4e0b\u3055\u3044\u3002(`$whoami`\u3067\u78ba\u304b\u3081\u3089\u308c\u307e\u3059)\n\n```\n[root@localhost ~]# yum install git\n```\n\n\u4f55\u304b\u805e\u304b\u308c\u308b(\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u78ba\u8a8d)\u306e\u3067y\u3092\u6253\u3064\u3002\u4eca\u5f8c\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u78ba\u8a8d\u3055\u308c\u305f\u969b\u306b\u306fy\u3092\u30bf\u30a4\u30d7\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u4e0b\u8a18\u3067\u78ba\u8a8d\u3002\n\n```\n[root@localhost ~]# git --version\ngit version 1.8.3.1\n```\n\n###2.2 \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u8a00\u308f\u308c\u305f\u901a\u308a\u306b\u3084\u308a\u307e\u3059\u3002\u79c1\u3082\u4f55\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u3002\n\n```\n[root@localhost ~]# yum install zlib zlib-devel openssl-devel sqlite-devel gcc-c++ glibc-headers libyaml-devel readline readline-devel zlib-devel libffi-devel\n```\n\n###2.3 ruby\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n####2.3.1 rbenv\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n[root@localhost ~]# git clone https://github.com/sstephenson/rbenv.git /usr/local/rbenv\n[root@localhost ~]# echo 'export RBENV_ROOT=\"/usr/local/rbenv\"' >> /etc/profile \n[root@localhost ~]# echo 'export PATH=\"${RBENV_ROOT}/bin:${PATH}\"' >> /etc/profile\n[root@localhost ~]# echo 'eval \"$(rbenv init -)\"' >> /etc/profile\n```\n\u3044\u3063\u305f\u3093\u30bf\u30fc\u30df\u30ca\u30eb\u9589\u3058\u305f\u3042\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n\n```\n[root@localhost ~]# rbenv --version\nrbenv 1.1.0-2-g4f8925a\n```\n\n####2.3.2 ruby-build\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n[root@localhost ~]# git clone https://github.com/sstephenson/ruby-build.git /usr/local/rbenv/plugins/ruby-build\n```\n\n####2.3.3 ruby\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5bfe\u8c61\u3092\u78ba\u8a8d\n\n```\n[root@localhost ~]# rbenv install --list # => \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ef\u80fd\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7\u306e\u8868\u793a\n[root@localhost ~]# rbenv install -v 2.4.0\n[root@localhost ~]# rbenv rehash\n[root@localhost ~]# rbenv global 2.4.0\n```\n\u4eca\u56de\u306f2.4.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb!\u5c11\u3057\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\n\u7d42\u308f\u3063\u305f\u3089\u3001\u4e0b\u8a18\u3067\u78ba\u8a8d!\n\n```\n[root@localhost ~]# ruby -v\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]\n```\n\n###2.4 rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n[root@localhost ~]# gem update --system\n[root@localhost ~]# gem install --no-ri --no-rdoc rails\n[root@localhost ~]# gem install bundler\n[root@localhost ~]# rbenv rehash\n```\n\u7d50\u69cb\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\u6700\u5f8c\u306b\u78ba\u8a8d!\n\n```\n[root@localhost ~]#  rails -v\nRails 5.0.1\n```\n\n##3. MySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3053\u3053\u3067\u306f[\u3053\u306e\u30b5\u30a4\u30c8](http://enomotodev.github.io/post/centos7_mysql57/)\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n###3.1 \u306f\u3058\u3081\u306b\n_CentOS 7 \u3088\u308a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d0\u306e MySQL \u304c MariaDB \u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u305f_\u305d\u3046\u3067\u3059\u3002MariaDB\u3092\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u5f15\u304d\u7d9a\u304droot\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\u306f\u884c\u3044\u307e\u3059\u3002\n\n```\n[root@localhost ~]# yum remove mariadb-libs\n[root@localhost ~]# rm -rf /var/lib/mysql\n```\n\u3053\u3053\u3067\u3082\u3084\u306f\u308ay\u3092\u62bc\u3057\u7d9a\u3051\u307e\u3057\u3087\u3046\u3002\n\n\n###3.2 yum\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\nCentOS7\u306b[MySQL\u516c\u5f0f\u306eyum\u30ea\u30dd\u30b8\u30c8\u30ea](https://dev.mysql.com/downloads/repo/yum/)\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n[root@localhost ~]# rpm -ivh http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm\n```\n\n###3.3 MySQL\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`yum install`\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046!\n\n```\n[root@localhost ~]# yum install mysql-community-server\n[root@localhost ~]# mysqld --version\nmysqld  Ver 5.7.17 for Linux on x86_64 (MySQL Community Server (GPL))\n```\n\u307e\u305f\u3001Rails\u3067MySQL\u3092\u4f7f\u3046\u305f\u3081\u306b\u5fc5\u8981\u306agem\u3092\u4f7f\u3046\u305f\u3081\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3082\u5165\u308c\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n[root@localhost ~]#  yum install mysql-devel\n```\n###3.4 MySQL\u306e\u8d77\u52d5\nMySQL\u3092\u8d77\u52d5\u3055\u305b\u3001\u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u3082\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n[root@localhost ~]# systemctl start mysqld.service\n[root@localhost ~]# systemctl enable mysqld.service\n```\n\n###3.5 MySQL\u306e\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d\n _MySQL5.7\u3067\u306f\u3001\u521d\u56de\u8d77\u52d5\u6642\u306b\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b_\u305d\u3046\u3067\u3059\u3002\n\n```\n[root@localhost ~]# cat /var/log/mysqld.log | grep password\n2017-01-31T00:38:52.110013Z 1 [Note] A temporary password is generated for root@localhost: />rkpwb4X*oe\n```\n\u4eca\u56de\u306e\u5834\u5408\u3001`/>rkpwb4X*oe`\u304c\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u3059\u3002\n\n###3.6 MySQL\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\nmysql_secure_installation \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001MySQL \u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n[root@localhost ~]# mysql_secure_installation\n\nSecuring the MySQL server deployment.\n\nEnter password for user root: #\u5148\u7a0b\u898b\u305f\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9(/>rkpwb4X*oe)\n\nThe existing password for the user account root has expired. Please set a new password.\n\nNew password: #\u65b0\u898f\u30d1\u30b9\u30ef\u30fc\u30c9\n\nRe-enter new password:  #\u78ba\u8a8d\u306e\u305f\u3081\u518d\u5ea6\u65b0\u898f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\nThe 'validate_password' plugin is installed on the server.\nThe subsequent steps will run with the existing configuration\nof the plugin.\nUsing existing password for root.\n\nEstimated strength of the password: 100\nChange the password for root ? ((Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\n\nNew password: #\u4f55\u6545\u304b\u77e5\u3089\u3093\u304c\u518d\u5ea6\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529bpart1\n\nRe-enter new password: #\u4f55\u6545\u304b\u77e5\u3089\u3093\u304c\u518d\u5ea6\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529bpart2\n\nEstimated strength of the password: 100\nDo you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nBy default, a MySQL installation has an anonymous user,\nallowing anyone to log into MySQL without having to have\na user account created for them. This is intended only for\ntesting, and to make the installation go a bit smoother.\nYou should remove them before moving into a production\nenvironment.\n\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nSuccess.\n\n\nNormally, root should only be allowed to connect from\n'localhost'. This ensures that someone cannot guess at\nthe root password from the network.\n\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nSuccess.\n\nBy default, MySQL comes with a database named 'test' that\nanyone can access. This is also intended only for testing,\nand should be removed before moving into a production\nenvironment.\n\n\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\n - Dropping test database...\nSuccess.\n\n - Removing privileges on test database...\nSuccess.\n\nReloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\n\nReload privilege tables now? (Press y|Y for Yes, any other key for No) : y #yesman\u306b\u306a\u308d\u3046\nSuccess.\n\nAll done!\n```\n\n###3.7 MySQL\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u78ba\u8a8d\n`mysql -u root -p`\u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u307e\u3059\u3002\n\n```\n[root@localhost ~]# mysql -u root -p\nEnter password: #\u5148\u7a0b\u8a2d\u5b9a\u3057\u305f\u65b0\u898f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 6\nServer version: 5.7.17 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql>\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u306a\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u6210\u529f\u3067\u3059!\n`mysql> quit`\u3068\u6253\u3066\u3070mysql\u304b\u3089bye\u3068\u8a00\u308f\u308c\u3066\u3001MySQL\u304b\u3089\u629c\u3051\u3089\u308c\u307e\u3059\u3002`exit`\u3067\u3082`\\q`\u3067\u3082\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3002\n\n###3.8 \u8a2d\u5b9a\u5909\u66f4\n\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u306b\u306f\n> MySQL 5.7 \u304b\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u6709\u52b9\u671f\u9650\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067360\u65e5\u306b\u306a\u308a\u3001360\u65e5\u3092\u7d4c\u904e\u3059\u308b\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\u3092\u4fc3\u3055\u308c\u3066 MySQL \u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002\ndefault_password_lifetime \u306e\u5024\u3092 0 \u306b\u5909\u66f4\u3057\u3066\u3001\u3053\u306e\u6709\u52b9\u671f\u9650\u306e\u8a2d\u5b9a\u3092\u7121\u52b9\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\u3068\u3042\u308a\u307e\u3059\u304c\u3001[\u3053\u3061\u3089](https://yoku0825.blogspot.hu/2016/01/mysql-5711defaultpasswordlifetime0.html)\u306b\u3088\u308b\u3068MySQL 5.7.11\u3088\u308a\u3001default\u3067default_password_lifetime = 0\u3068\u306a\u3063\u3066\u3044\u308b\u307f\u305f\u3044\u3067\u3059\u3002\n\u6587\u5b57\u30b3\u30fc\u30c9\u306f\u53c2\u8003\u30b5\u30a4\u30c8\u306b\u306a\u3089\u3063\u3066UTF-8\u306b\u5909\u66f4\u3057\u307e\u3057\u3087\u3046\u3002\n`[root@localhost /]# vi /etc/my.cnf`\u3067/etc/my.cnf\u306b`character-set-server = utf8`\u3092\u8ffd\u8a18! vi\u30a8\u30c7\u30a3\u30bf\u30fc\u306e\u4f7f\u3044\u65b9\u306f[\u3053\u3061\u3089](http://net-newbie.com/linux/commands/vi.html)\u3002\n\nMySQL \u3092\u518d\u8d77\u52d5\u3055\u305b\u3001\u8a2d\u5b9a\u5185\u5bb9\u3092\u53cd\u6620\u3055\u305b\u307e\u3059\u3002\n\n```\n[root@localhost /]# systemctl restart mysqld.service\n```\n\u8a2d\u5b9a\u7d42\u4e86!!!!!!!\n\n----\n\n####\u5c0f\u4f11\u6b62\nversion\u3063\u3066\u3088\u304fvertion\u3063\u3066\u66f8\u3044\u3061\u3083\u3044\u307e\u3059\u3002\u306a\u3093\u3067\u3067\u3057\u3087\u3046\u306d\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n---\n\n##4. DB\u3092MySQL\u306b\u5909\u66f4\u3057\u3064\u3064\u3001Rails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\nRails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\u3067\u306f\u518d\u3073[\u3053\u306e\u30b5\u30a4\u30c8](http://qiita.com/shinyashikis@github/items/3501c5f7f71a8e345c3d#1-%E5%90%84%E3%83%A6%E3%83%BC%E3%82%B6%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF-rbenv-%E9%85%8D%E4%B8%8B)\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002Rails\u306eDB\u3092MySQL\u306b\u3059\u308b\u306e\u306f[\u3053\u306e\u30b5\u30a4\u30c8](http://qiita.com/itkrt2y/items/4ea5bfe90ca65e4a9ebd)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n###4.1 rails\u4f5c\u696d\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\n\u540c\u69d8\u306broot\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u4f5c\u696d\u3057\u307e\u3059\u3002\n`[root@localhost /]# useradd -m rails`\u3067rails\u7528\u306e\u30e6\u30fc\u30b6\u30fc(rails\u3068\u547d\u540d)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n`[root@localhost /]# cat /etc/shadow`\u3067\u6700\u7d42\u884c\u306b\u4eca\u4f5c\u3063\u305frails\u304f\u3093\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n`[root@localhost /]# passwd rails`\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\u3067\u306f\u3001\u4eca\u4f5c\u3063\u305frails\u30e6\u30fc\u30b6\u30fc\u306b\u79fb\u52d5\u3057\u307e\u3057\u3087\u3046!`su rails`\n`[root@localhost /]# ` \u304b\u3089 `[rails@localhost /]$ `\u3078\u5909\u308f\u308a\u307e\u3057\u305f!\n###4.2 MySQL\u3067\u4f5c\u7528\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\n> \u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306fdevelopment\u3001test\u3001production\u306e\uff13\u3064\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3068\u306e\u3053\u3068\u3067\u3059\u3002\u52c9\u5f37\u4e0d\u8db3\u3067\u3059\u3002\n\n`mysql -u root -p`\u3067MySQL\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\u30e6\u30fc\u30b6\u30fc\u540d\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3001\u300c'\u30e6\u30fc\u30b6\u30fc\u540d'@'localhost'\u300d\u3068\u3044\u3046\u5f62\u306b\u306a\u308a\u307e\u3059\u3002\u79c1\u3053\u30531\u5ea6\u30df\u30b9\u308a\u307e\u3057\u305f\u3002password\u3082''\u5fc5\u8981\u306a\u306e\u306b\u3082\u3054\u6ce8\u610f\u3092!\n\n```\nmysql> create user 'sampleDev'@'localhost' identified by '\u5185\u7dd2', 'samplePro'@'localhost' identified by '\u5185\u7dd2\u3060\u3063\u3066\u3070', 'sampleTest'@'localhost' identified by '\u3044\u3084\u30fc\u3093';\n\n```\n\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u78ba\u8a8d\u306f\u4ee5\u4e0b\u3067\u51fa\u6765\u307e\u3059\u3002\n\n```\nmysql> select User,Host from mysql.user;\n+------------+-----------+\n| User       | Host      |\n+------------+-----------+\n| mysql.sys  | localhost |\n| root       | localhost |\n| sampleDev  | localhost |\n| samplePro  | localhost |\n| sampleTest | localhost |\n+------------+-----------+\n5 rows in set (0.00 sec)\n```\n\n\u6700\u5f8c\u306b\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002MySQL\u306f\u6700\u5f8c\u306b;\u3064\u3051\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3053\u3068\u6bce\u56de\u5fd8\u308c\u307e\u3059\u3002\n\n```\nmysql> grant all on *.* to 'sampleDev'@'localhost', 'samplePro'@'localhost', 'sampleTest'@'localhost';\nQuery OK, 0 rows affected (0.00 sec)\n```\n###\u756a\u5916\u7de8: Vagrant\u3067\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306e\u8a2d\u5b9a\n\u3053\u308c\u306f\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3084\u308b\u306e\u304c\u30d9\u30b9\u30c8\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\u59cb\u3081\u306b\u3084\u3063\u3061\u3083\u3046\u3079\u304d\u306a\u306e\u304b\u306a\u3002[\u3053\u306e\u30b5\u30a4\u30c8](http://qiita.com/okoi/items/8fbf87772217c1b1ffb7)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n_1.3 CentOS\u3092\u3044\u308c\u308b_ \u3067\u4f5c\u6210\u3057\u305fcentos7.3\u30d5\u30a9\u30eb\u30c0\u4e0b\u306bVagrantfile\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002vi\u30a8\u30c7\u30a3\u30bf\u30fc\u3067\u958b\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u884c\u6570\u304c\u51fa\u306a\u3044\u5834\u5408\u306f`:set number`\u3067\u8868\u793a\u51fa\u6765\u307e\u3059\u3002\u3069\u3053\u306b\u66f8\u304d\u8fbc\u3093\u3067\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u79c1\u306f41\u884c\u76ee\u306b\n`config.vm.synced_folder \"./shared\", \"/home/rails\", owner: \"rails\", group: \"rails\"`\u3068\u5165\u308c\u307e\u3057\u305f\u3002\n\"./shared\"\u306f\u30db\u30b9\u30c8\u30de\u30b7\u30f3(mac)\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u3078\u306e\u30d1\u30b9\u3067\u3059\u3002Vagrantfile\u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\u3067\u3059\u3002\"/home/rails/shared\"\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002owner\u3068group\u306frails\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u306erails\u3068\u3057\u307e\u3059\u3002\n\n\n```\ncentos7.3 $ ls\nVagrantfile\ncentos7.3 $ vi Vagrantfile\n```\n\n```\n 36   # Share an additional folder to the guest VM. The first argument is\n 37   # the path on the host to the actual folder. The second argument is\n 38   # the path on the guest to mount the folder. And the optional third\n 39   # argument is a set of non-required options.\n 40   # config.vm.synced_folder \"../data\", \"/vagrant_data\"\n 41   config.vm.synced_folder \"./shared\", \"/home/rails\", owner: \"rails\", group: \"rails\" # <- add!\n 42   # Provider-specific configuration so you can fine-tune various\n```\n\u305d\u3057\u3066'vagrant reload'\u3092\u884c\u3048\u3070\u5b8c\u4e86!\u306e\u306f\u305a\u306a\u306e\u3067\u3059\u304c\u3001\n\n```\ncentos7.3 $ vagrant reload\nThere are errors in the configuration of this machine. Please fix\nthe following errors and try again:\n\nvm:\n* The host path of the shared folder is missing: ./shared\n```\n\u3068shared\u30d5\u30a9\u30eb\u30c0\u304c\u306a\u3044\u3088\u3068\u6012\u3089\u308c\u305f\u306e\u3067\u3001\n\n```\ncentos7.3 $ mkdir shared\ncentos7.3 $ vagrant reload\n```\n\u3067\u4eca\u5ea6\u3053\u305d\u5b8c\u4e86\u3067\u3059\u3002reload\u306f\u5c11\u3057\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\n###4.3 Rails\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u4f5c\u6210\n\n####4.3.1 Vagrantfile\u306e\u7de8\u96c6\n\u7d0429\u884c\u76ee\u306e`config.vm.network \"private_network\", ip: \"192.168.33.10\"`\u3092\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u307e\u305f\u3001`config.vm.network \"forwarded_port\", guest: 3000, host:3000`\u3092\u8ffd\u8a18\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n```Vagrantfile\n 25   # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n 26\n 27   config.vm.network \"forwarded_port\", guest: 3000, host:3000\n 28\n 29   # Create a private network, which allows host-only access to the machine\n 30   # using a specific IP.\n 31   config.vm.network \"private_network\", ip: \"192.168.33.10\" \n```\n\u7d42\u308f\u3063\u305f\u3089`vagrant reload`\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u3053\u308c\u3067rails s\u3092\u3057\u305f\u969b\u306b\u3001mac\u306e\u30d6\u30e9\u30a6\u30b6(localhost:3000)\u304b\u3089\u898b\u308c\u307e\u3059!\n\n####4.3.2 rails new\n\u307e\u305a\u3001`vagrant ssh`\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001`su rails`\u3067\u30e6\u30fc\u30b6\u30fc\u3092rails\u306b\u3057\u3066\u4e0b\u3055\u3044\u3002 _4.1_\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u306f\u305a\u3067\u3059\u3002\ndirectory\u3092/home/rails(\u5148\u7a0b\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u8a2d\u5b9a\u3057\u305f\u5834\u6240)\u306b\u79fb\u52d5\u3057\u3066\u304b\u3089rails new\u3092\u884c\u3044\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u969b\u306b\u3001'--database=mysql'\u3068\u3059\u308b\u3053\u3068\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306eDB\u304cMySQL\u3078\u3068\u5909\u3048\u3089\u308c\u307e\u3059\u3002\u7d42\u4e86\u5f8c\u3001\u4f5c\u6210\u3057\u305fsample\u3078\u79fb\u52d5\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n```\n[rails@localhost ~]$ cd /home/rails/\n[rails@localhost ~]$ pwd\n/home/rails\n[rails@localhost /]$ rails new sample -d mysql --skip-bundle\n[rails@localhost /]$ cd sample\n```\n\u3061\u306a\u307f\u306b\u3001mac\u5074\u304b\u3089\u3082\u5148\u7a0b\u6307\u5b9a\u3057\u305fshared\u30d5\u30a9\u30eb\u30c0\u5185\u306bsample\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n```\ncentos7.3 $ tree -L 2\n.\n|-- Vagrantfile\n`-- shared\n    `-- sample\n```\n\n####4.3.3 Gemfile\u306e\u7de8\u96c6\n\u7d0422\u884c\u76ee\u306b\u3042\u308b`gem 'therubyracer', platforms: :ruby`\u3092\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3059\u308b\u3002\n\n```Gemfile\n     21 # See https://github.com/rails/execjs#readme for more supported runtimes\n     22 gem 'therubyracer', platforms: :ruby\n```\n\n\n####4.3.4 /config/database.yml\u306e\u7de8\u96c6\nsample\u4e0b\u306b\u3042\u308b`/config/database.yml`\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\ndevelopment\u3001test\u3001production\u306e\u9805\u76ee\u3092\u305d\u308c\u305e\u308c\u3001\u4e0a\u3067\u4f5c\u6210\u3057\u305f\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u300cusername\u300d\u3068\u300cpassword\u300d\u306e\u6240\u306b\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002`host: localhost`\u3082\u52a0\u3048\u3066\u4e0b\u3055\u3044\u3002\n\n```\n# MySQL. Versions 5.0 and up are supported.\n#\n# Install the MySQL driver\n#   gem install mysql2\n#\n# Ensure the MySQL gem is defined in your Gemfile\n#   gem 'mysql2'\n#\n# And be sure to use new-style password hashing:\n#   http://dev.mysql.com/doc/refman/5.7/en/old-client.html\n#\ndefault: &default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  reconnect: false\n\n\ndevelopment:\n  <<: *default\n  database: sample_development\n  username: sampleDev\n  password:\u5185\u7dd2\n  host: localhost\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  <<: *default\n  database: sample_test\n  username: sampleTest\n  password:\u3044\u3084\u30fc\u3093\n  host: localhost\n\n# As with config/secrets.yml, you never want to store sensitive information,\n# like your database password, in your source code. If your source code is\n# ever seen by anyone, they now have access to your database.\n#\n# Instead, provide the password as a unix environment variable when you boot\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\n# for a full rundown on how to provide these environment variables in a\n# production deployment.\n#\n# On Heroku and other platform providers, you may have a full connection URL\n# available as an environment variable. For example:\n#\n#   DATABASE_URL=\"mysql2://myuser:mypass@localhost/somedatabase\"\n#\n# You can use this database configuration with:\n#\n#   production:\n#     url: <%= ENV['DATABASE_URL'] %>\n#\nproduction:\n  <<: *default\n  database: sample_production\n  username: samplePro\n  password:\u5185\u7dd2\u3060\u3063\u3066\u3070\n  host: localhost\n```\n####4.3.5 \u4ed5\u4e0a\u3052\n- `bundle install` \u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002\n- `rails s` (`rails s -b 0.0.0.0` \u306e\u65b9\u304cbetter\u304b\u3082)\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\n-  NoDatabaseError\u304c\u8d77\u304d\u305f\u969b\u306b\u306f`rake db:create`\u3092\u3059\u308b\n-  mac\u4e0a\u306e\u30d6\u30e9\u30a6\u30b6\u3067`localhost:3000`\u306b\u63a5\u7d9a!\n-  **Yay! You\u2019re on Rails!**\n\n\n###4.4 git\u30af\u30ed\u30fc\u30f3\u3057\u305frails\u30a2\u30d7\u30ea\u306e\u5834\u5408\nclone_sample\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092clone\u3057\u305f\u3068\u3057\u307e\u3059\u3002\u307e\u305a`cd clone_sample`\u3067\u79fb\u52d5\u3057\u307e\u3059\u3002\n####4.4.1 gem install json -v '1.8.3'\u30a8\u30e9\u30fc\n\u3053\u306e\u307e\u307e`bundle install`\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u307e\u3059\u3002\n\n```\nAn error occurred while installing json (1.8.3), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.3'` succeeds before bundling.\n\n```\n####4.4.2 \u89e3\u6c7a\u7b56: Gemfile\u306e\u7de8\u96c6\n - \u5909\u66f4\u3059\u308b\u3082\u306e `gem 'rails', '4.2.7.1'`\u3092`gem 'rails', '~> 5.0.1'`\u3078\n - \u52a0\u3048\u308b\u3082\u306e  `gem 'json', '~> 1.8.3'`\n - \u30b3\u30e1\u30f3\u30c8\u30a4\u30f3 `gem 'therubyracer', platforms: :ruby`(_4.3.1_\u3068\u540c\u69d8)\n\n```Gemfile\nInstalling builder 3.2.2\nInstalling erubis 2.7.0\nInstalling mini_portile2 2.1.0\n      1 source 'https://rubygems.org'\n      2\n      3 #I added this one\n      4 gem 'json', '~> 1.8.3' \n      5 # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n      6 gem 'rails', '~> 5.0.1'\n      7 # Use sqlite3 as the database for Active Record\n      8 gem 'sqlite3'\n      9 # Use SCSS for stylesheets\n     10 gem 'sass-rails', '~> 5.0'\n     11 # Use Uglifier as compressor for JavaScript assets\n     12 gem 'uglifier', '>= 1.3.0'\n     13 # Use CoffeeScript for .coffee assets and views\n     14 gem 'coffee-rails', '~> 4.1.0'\n     15 # See https://github.com/rails/execjs#readme for more supported runtimes\n     16 gem 'therubyracer', platforms: :ruby\n     17\n       \n```\n\n\u4fdd\u5b58\u5f8c\u306b\n\n```\n$ bundle update\n$ rake db:migrate\n$ rails s -b 0.0.0.0\n```\n\u3053\u308c\u3067`localhost:3000`\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070OK!\u3053\u3061\u3089\u306f(`-b 0.0.0.0`\u3068\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u306a\u3051\u308c\u3070\u30c0\u30e1\u3060\u3063\u305f)\n\n\n#####\u5099\u8003\n__\u65e2\u5b58__\u306erails\u306eDB\u3092MySQL\u306b\u5909\u3048\u305f\u3044\u969b\u306b\u306f\u3001[\u3053\u306e\u30da\u30fc\u30b8](http://qiita.com/pchatsu/items/a7f53da2e57ae4aca065)\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044!\n\n##5 Apache\u3068Passenger\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nroot\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\u3057\u3066\u4e0b\u3055\u3044\u3002\n###5.1 Apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[\u53c2\u8003\u30b5\u30a4\u30c8](http://www.task-notes.com/entry/20150629/1435546800)\nyum\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u5b8c\u4e86\u5f8c\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n\n```\n[root@localhost ~]# yum -y install httpd\n[root@localhost ~]# httpd -v\nServer version: Apache/2.4.6 (CentOS)\nServer built:   Nov 14 2016 18:04:44\n```\n\n\u8d77\u52d5\u3055\u305b\u308b\u306e\u306f`service httpd start`, \u505c\u6b62\u306f`stop`\u3001\u518d\u8d77\u52d5\u306f`restart`\u3001\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f`status`\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n###5.2 Passenger\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[\u53c2\u8003\u30b5\u30a4\u30c8](https://www.phusionpassenger.com/library/install/apache/install/oss/el7/)\n\n####5.2.1 EPEL\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPassenger\u3092\u5165\u308c\u308b\u305f\u3081\u306b\u306fEPEL\u3068\u3044\u3046\u3082\u306e\u304c\u5fc5\u8981\u3089\u3057\u3044\u306e\u3067\u306f\u3058\u3081\u306b\u3044\u308c\u307e\u3059\u3002\n\n```\n[root@localhost ~]#  yum install -y epel-release yum-utils\n[root@localhost ~]#  yum-config-manager --enable epel\n[root@localhost ~]#  yum clean all && sudo yum update -y\n\n```\n\n####5.2.2 Passenger\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n> These commands will install Passenger + Apache module through Phusion's YUM repository.\n\n\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3057\u305f\u3002\u3064\u307e\u308a\u3001Passenger\u304f\u3093\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n```\n# Install various prerequisites\n[root@localhost ~]#  yum install -y pygpgme curl\n\ndate\n# if the output of date is wrong, please follow these instructions to install ntp\n[root@localhost ~]#  yum install -y ntp\n[root@localhost ~]#  chkconfig ntpd on\n[root@localhost ~]#  ntpdate pool.ntp.org\n[root@localhost ~]#  service ntpd start\n\n# Add our el7 YUM repository\n[root@localhost ~]#  curl --fail -sSLo /etc/yum.repos.d/passenger.repo https://oss-binaries.phusionpassenger.com/yum/definitions/el-passenger.repo\n\n# Install Passenger + Apache module\n[root@localhost ~]#  yum install -y mod_passenger || sudo yum-config-manager --enable cr && sudo yum install -y mod_passenger\n```\n\n\n####5.2.3 Apache\u3092\u30ea\u30b9\u30bf\u30fc\u30c8 \nPassenger Apache \u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u306e\u3067\u3001Apache\u3092\u518d\u8d77\u52d5\u3055\u305b\u3066Passenger\u3092\u4f5c\u52d5\u3055\u305b\u307e\u3057\u3087\u3046\u3002\n\n```\n[root@localhost ~]# systemctl restart httpd\n```\n####5.2.4 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u78ba\u8a8d\n- 1\u3064\u76ee\u306f`/usr/bin/passenger-config validate-install`\u3067\u3059\u3002Passenger itself\u3068Apache\u53cc\u65b9\u306b\u30c1\u30a7\u30c3\u30af\u3092\u3044\u308c\u3066(space\u3092\u62bc\u3059)\u3001enter!\n\n```\n[root@localhost ~]# /usr/bin/passenger-config validate-install\nWhat would you like to validate?\nUse <space> to select.\nIf the menu doesn't display correctly, press '!'\n\n   \u2b22  Passenger itself\n \u2023 \u2b22  Apache\n\n-------------------------------------------------------------------------\n\nChecking whether there are multiple Apache installations...\nOnly a single installation detected. This is good.\n\n-------------------------------------------------------------------------\n\n * Checking whether this Passenger install is in PATH... \u2713\n * Checking whether there are no other Passenger installations... \u2713\n * Checking whether Apache is installed... \u2713\n * Checking whether the Passenger module is correctly configured in Apache... \u2713\n\nEverything looks good. :-)\n```\n\u4e0a\u8a18\u306f\u6210\u529f\u4f8b\u3067\u3059\u304c\u3001\n\n```\n\n * Checking whether Apache is installed... \u2717\n\n   Unable to validate your Apache installation: more software required\n\n   This program requires the apxs2 tool in order to be able to validate your\n   Apache installation. This tool is currently not installed. You can solve this\n   as follows:\n\n   Please install it with yum install httpd-devel\n\n   When done, please re-run this program.\n\n\nDetected 1 error(s), 0 warning(s).\n```\n\u3068\u6012\u3089\u308c\u305f\u308a\u3082\u3057\u307e\u3059\u3002\u305d\u306e\u6642\u306f\u7d20\u76f4\u306b\u8a00\u308f\u308c\u305f\u3068\u304a\u308a(`yum install httpd-devel`)\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n- 2\u3064\u76ee\u306f`/usr/sbin/passenger-memory-stats`\u3067\u3059\u3002\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3001Apache\u3068Passenger\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\u51fa\u306a\u3044\u5834\u5408\u306f[Troubleshooting Guide](https://www.phusionpassenger.com/library/admin/apache/troubleshooting/ruby/)\u3078!\n\n```\n[root@localhost ~]# /usr/sbin/passenger-memory-stats\nVersion: 5.1.2\nDate   : 2017-01-31 10:55:11 +0000\n\n--------- Apache processes ---------\nPID   PPID  VMSize    Private  Name\n------------------------------------\n8344  1     222.7 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8392  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8393  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8394  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8395  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n8396  8344  222.8 MB  0.2 MB   /usr/sbin/httpd -DFOREGROUND\n### Processes: 6\n### Total private dirty RSS: 1.15 MB\n\n\n-------- Nginx processes --------\n\n### Processes: 0\n### Total private dirty RSS: 0.00 MB\n\n\n---- Passenger processes -----\nPID   VMSize    Private  Name\n------------------------------\n8370  417.0 MB  0.9 MB   Passenger watchdog\n8373  649.9 MB  3.2 MB   Passenger core\n8381  425.2 MB  2.9 MB   Passenger ust-router\n### Processes: 3\n### Total private dirty RSS: 7.06 MB\n```\n-----\n####\u5099\u8003\nPassenger\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u65b9\u6cd5\u306f \n\n```\n[root@localhost ~]# passenger-config --version\nPhusion Passenger 5.1.2\n```\n----\n\n##\u6700\u5f8c\u306b\n\u6ca2\u5c71\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\u8a02\u6b63\u3084\u8ffd\u8a18\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3001\u3069\u3093\u3069\u3093\u5b9c\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059!\n\n\n", "tags": ["Apache", "MySQL", "passenger", "CentOS", "Rails"]}