{"context": " More than 1 year has passed since last update.\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install -y pdns-recursor\n\n\n\nmac\u306e\u5834\u5408\n$ brew install pdnsrec\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f /usr/local/etc/powerdns/recursor.conf\n\n\n\n2. \u8a2d\u5b9a\nPowerDNS Authoritative Server\u3067\u518d\u5e30\u554f\u3044\u5408\u308f\u305b\u3092\u6709\u52b9\u306b\u3059\u308b\u3002 \u2014 \u30da\u30f3\u30ae\u30f3\u3068\u6109\u5feb\u306a\u6a5f\u68b0\u306e\u65e5\u3005\u304c\u8a73\u3057\u3044\u3002\n\n/etc/powerdns/recursor.conf\n+export-etc-hosts=on # /etc/hosts \u3092DNS\u767b\u9332\u3059\u308b\u3002\n-local-address=127.0.0.1\n+local-address=0.0.0.0 # \u4ed6\u306e\u30b5\u30fc\u30d0\u304b\u3089\u3082\u554f\u3044\u5408\u308f\u305b\u3089\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n+recursor=8.8.8.8 # DNS\u518d\u5e30\u554f\u3044\u5408\u308f\u305b\u5148\n\n\n\nIP\u30a2\u30c9\u30ec\u30b9\u5e2f\u306b\u5fdc\u3058\u3066\u4ee5\u4e0b\u3082\u4fee\u6b63\u3059\u308b\u3002\nallow-from=127.0.0.0/8, 10.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, ::1/128, fe80::/10\n\n\n\n3. restart\n$ sudo /etc/init.d/pdns-recursor restart\n\n\n\u554f\u3044\u5408\u308f\u305b\n\n192.168.0.52\u304cpdns-recursor\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u3068\u3059\u308b\u3002\n\n\n/etc/resolv.conf\u3092\u4fee\u6b63\n\npdns-recursor\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u306e\u5834\u5408\nsearch local\nnameserver 127.0.0.1\n\n\n\n\u305d\u306e\u4ed6\u306e\u30b5\u30fc\u30d0\u306e\u5834\u5408\nsearch local\nnameserver 192.168.0.52\n\n\n\n\u4ed6\u306e\u30b5\u30fc\u30d0\u304b\u3089\u52d5\u4f5c\u78ba\u8a8d\n\n192.168.0.52\u306e/etc/hosts\u306e\u5185\u5bb9\u304c\u554f\u3044\u5408\u308f\u305b\u3089\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n$ nslookup\n> dnssv\nServer:     192.168.0.52\nAddress:    192.168.0.52#53\n\nNon-authoritative answer:\nName:   dnssv.local\nAddress: 192.168.0.52\n> 192.168.0.52\nServer:     192.168.0.52\nAddress:    192.168.0.52#53\n\nNon-authoritative answer:\n52.0.168.192.in-addr.arpa   name = dnssv.\n52.0.168.192.in-addr.arpa   name = dnssv.local.\n\nAuthoritative answers can be found from:\n\n\n\n/etc/hosts\u4ee5\u5916\u306e\u3082\u554f\u3044\u5408\u308f\u305b\u3089\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n$ nslookup\n> google.co.jp\nServer:     192.168.0.52\nAddress:    192.168.0.52#53\n\nNon-authoritative answer:\nName:   google.co.jp\nAddress: 173.194.126.239\nName:   google.co.jp\nAddress: 173.194.126.247\nName:   google.co.jp\nAddress: 173.194.126.248\n\n\n\n/etc/hosts\u4fee\u6b63\u306e\u53cd\u6620\n\n\u30ea\u30b9\u30bf\u30fc\u30c8\u3059\u308c\u3070\u3088\u3044\n$ sudo /etc/init.d/pdns-recursor restart\n\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n## 1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install -y pdns-recursor\n```\n\n```bash:mac\u306e\u5834\u5408\n$ brew install pdnsrec\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f /usr/local/etc/powerdns/recursor.conf\n```\n\n## 2. \u8a2d\u5b9a\n\n[PowerDNS Authoritative Server\u3067\u518d\u5e30\u554f\u3044\u5408\u308f\u305b\u3092\u6709\u52b9\u306b\u3059\u308b\u3002 \u2014 \u30da\u30f3\u30ae\u30f3\u3068\u6109\u5feb\u306a\u6a5f\u68b0\u306e\u65e5\u3005](http://d.palmtb.net/2012/06/19/enable_recoursion_pdns-server.html)\u304c\u8a73\u3057\u3044\u3002\n\n```diff:/etc/powerdns/recursor.conf\n+export-etc-hosts=on # /etc/hosts \u3092DNS\u767b\u9332\u3059\u308b\u3002\n-local-address=127.0.0.1\n+local-address=0.0.0.0 # \u4ed6\u306e\u30b5\u30fc\u30d0\u304b\u3089\u3082\u554f\u3044\u5408\u308f\u305b\u3089\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n+recursor=8.8.8.8 # DNS\u518d\u5e30\u554f\u3044\u5408\u308f\u305b\u5148\n```\n\n```bash:IP\u30a2\u30c9\u30ec\u30b9\u5e2f\u306b\u5fdc\u3058\u3066\u4ee5\u4e0b\u3082\u4fee\u6b63\u3059\u308b\u3002\nallow-from=127.0.0.0/8, 10.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, ::1/128, fe80::/10\n```\n\n## 3. restart\n\n```bash:\n$ sudo /etc/init.d/pdns-recursor restart\n```\n\n# \u554f\u3044\u5408\u308f\u305b\n\n* 192.168.0.52\u304cpdns-recursor\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u3068\u3059\u308b\u3002\n\n## /etc/resolv.conf\u3092\u4fee\u6b63\n\n```bash:pdns-recursor\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u306e\u5834\u5408\nsearch local\nnameserver 127.0.0.1\n```\n\n```bash:\u305d\u306e\u4ed6\u306e\u30b5\u30fc\u30d0\u306e\u5834\u5408\nsearch local\nnameserver 192.168.0.52\n```\n\n## \u4ed6\u306e\u30b5\u30fc\u30d0\u304b\u3089\u52d5\u4f5c\u78ba\u8a8d\n\n```bash:192.168.0.52\u306e/etc/hosts\u306e\u5185\u5bb9\u304c\u554f\u3044\u5408\u308f\u305b\u3089\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n$ nslookup\n> dnssv\nServer:\t\t192.168.0.52\nAddress:\t192.168.0.52#53\n\nNon-authoritative answer:\nName:\tdnssv.local\nAddress: 192.168.0.52\n> 192.168.0.52\nServer:\t\t192.168.0.52\nAddress:\t192.168.0.52#53\n\nNon-authoritative answer:\n52.0.168.192.in-addr.arpa\tname = dnssv.\n52.0.168.192.in-addr.arpa\tname = dnssv.local.\n\nAuthoritative answers can be found from:\n```\n\n```bash:/etc/hosts\u4ee5\u5916\u306e\u3082\u554f\u3044\u5408\u308f\u305b\u3089\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n$ nslookup\n> google.co.jp\nServer:\t\t192.168.0.52\nAddress:\t192.168.0.52#53\n\nNon-authoritative answer:\nName:\tgoogle.co.jp\nAddress: 173.194.126.239\nName:\tgoogle.co.jp\nAddress: 173.194.126.247\nName:\tgoogle.co.jp\nAddress: 173.194.126.248\n```\n\n# /etc/hosts\u4fee\u6b63\u306e\u53cd\u6620\n\n```bash:\u30ea\u30b9\u30bf\u30fc\u30c8\u3059\u308c\u3070\u3088\u3044\n$ sudo /etc/init.d/pdns-recursor restart\n```\n", "tags": ["dns", "PowerDNS"]}