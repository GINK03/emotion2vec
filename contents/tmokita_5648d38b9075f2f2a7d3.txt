{"context": " More than 1 year has passed since last update.\uff08\u524d\u56de\u307e\u3067\u306e\u3042\u3089\u3059\u3058\nRedmine\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001github_hook\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3082\u306e\u306e\u3001Github\u3068\u306e\u9023\u643a\u624b\u9806\u306b\u6ce3\u304d\u305d\u3046\u306b\u306a\u3063\u305f\u4ffa\u6c0f\u306f\u30aa\u30ec\u30aa\u30ec\u30d8\u30eb\u30d1\u30fc\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u958b\u767a\u306b\u7740\u624b\u3057\u305f\u306e\u3060\u3063\u305f\u30fb\u30fb\u30fb\n\u203b\u524d\u56de\u3068\u304b\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u304c\u521d\u56de\u3067\u3059\u3002\n\n\u74b0\u5883\nCentOS release 6.7 (Final)\n\nEnvironment:\n  Redmine version                3.1.0.stable.14520\n  Ruby version                   2.2.3-p173 (2015-08-18) [x86_64-linux]\n  Rails version                  4.2.3\n  Environment                    production\n  Database adapter               Mysql2\nSCM:\n  Subversion                     1.6.11\n  Git                            1.7.1\n  Filesystem                     \nRedmine plugins:\n  redmine_github_hook            2.2.0\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4f7f\u3046\u5834\u5408\u306f\u30d1\u30b9\u306a\u3069\u9069\u5b9c\u5909\u66f4\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n.ssh/config \u3092\u3044\u3058\u308a\u307e\u3059\uff01\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\uff01\n\u8907\u6570\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6271\u3046\u5834\u5408\u306f\u3001\u9055\u3046\u9375\u304c\u5fc5\u8981\u306b\u306a\u308b\u3089\u3057\u3044\u306e\u3067\u3001\u305d\u3053\u3089\u3078\u3093\u307e\u3067\u542b\u3081\u3066\u6bce\u56de\u624b\u4f5c\u696d\u306f\u3057\u3093\u3069\u304b\u3063\u305f\u306e\u304c\u4f5c\u3063\u305f\u304d\u3063\u304b\u3051\u3002\n\u6b63\u76f4\u3061\u3087\u3063\u3068\u307e\u3060\u3088\u304f\u308f\u304b\u3089\u306a\u304f\u3066\u3001Root\u3067\u5b9f\u884c\u3059\u308b\u524d\u63d0\u3067\u3059\u3002\nsudo\u3060\u3068\u306a\u3093\u3067\u304b\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u7b87\u6240\u304c\u3042\u3063\u305f\u306e\u3067Root\u30e6\u30fc\u30b6\u30fc\u9650\u5b9a\u3067\u3059\u304c\u3001\u305d\u306e\u3046\u3061\u3061\u3083\u3093\u3068\u8abf\u3079\u3066\u305d\u3053\u3089\u8fba\u4fee\u6b63\u3057\u305f\u3044\u3002\n\u3082\u3057\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30b3\u30d4\u30da\u3063\u3066\u4f7f\u3046\u5834\u5408\u306f\u3001\u5148\u306bsu -\u3068\u304b\u3067Root\u306b\u306a\u3063\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n# \n# \u5f15\u6570\u78ba\u8a8d\n# \nif [ $# -ne 2 ]; then\n  echo \"myGithubHelper.sh <repos_owner> <repos_name>\" 1>&2\n  exit 1\nfi\n\n# \n# \u9375\u3092\u4f5c\u6210\n# \nssh-keygen -t rsa -f /var/www/.ssh/${1}-${2}\n\necho ----\ncat /var/www/.ssh/${1}-${2}.pub\necho ----\n\n# \n# \u9375\u3092\u4f7f\u3046\u30db\u30b9\u30c8\u8a2d\u5b9a\n# \ntouch /var/www/.ssh/config\n\necho \"\nHost github-${1}-${2}\n  User git\n  Port 22\n  HostName github.com\n  IdentityFile /var/www/.ssh/${1}-${2}\n  TCPKeepAlive yes\n  IdentitiesOnly yes\n\" >> /var/www/.ssh/config\n\nchown -R apache:apache /var/www/.ssh/config\nchown -R apache:apache /var/www/.ssh/${1}-${2}\nchown -R apache:apache /var/www/.ssh/${1}-${2}.pub\n\n\n# \n# Clone\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u751f\u6210\n# \necho \"\ncd /opt/repos\n\nsudo -u apache git clone --bare git@github-${1}-${2}:${1}/${2}.git\nchown -R apache:apache /opt/repos/${2}.git\n\ncd -\ncd /opt/repos/${2}.git\n\nsudo -u apache git remote add origin git@github-${1}-${2}:${1}/${2}.git\n\ncd -\n\necho ----\necho /opt/repos/${2}.git\necho ----\n\" > ./clone-${1}-${2}.sh\n\nchmod 755 ./clone-${1}-${2}.sh\n\n\n\u3053\u308c\u3092Root\u306b\u306a\u3063\u3066\u304b\u3089\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002\nmyGithubHelper.sh github_user github_repo\n\n\u3059\u308b\u3068\u3001\u516c\u958b\u9375\u304c\u8868\u793a\u3055\u308c\u307e\u3059\n----\nssh-rsa qwertyuiklxrctvybuhnjimk..........\n----\n\n\u3053\u308c\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001Github\u306eDeploy Keys\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u5b9f\u884c\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\nclone-github_user-github_repo.sh\n\n\u3082\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5b9f\u884c\u3057\u3066Github\u304b\u3089Clone\u3057\u307e\u3059\u3002\n----\n/opt/repos/github_repo.git\n----\n\n\u3068\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001Redmine\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u3001Github\u306eWeb hook\u3092\u8a2d\u5b9a\u3057\u3066\u5b8c\u4e86\u3067\u3059\u3002\n\uff08\u524d\u56de\u307e\u3067\u306e\u3042\u3089\u3059\u3058\nRedmine\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001github_hook\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3082\u306e\u306e\u3001Github\u3068\u306e\u9023\u643a\u624b\u9806\u306b\u6ce3\u304d\u305d\u3046\u306b\u306a\u3063\u305f\u4ffa\u6c0f\u306f\u30aa\u30ec\u30aa\u30ec\u30d8\u30eb\u30d1\u30fc\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u958b\u767a\u306b\u7740\u624b\u3057\u305f\u306e\u3060\u3063\u305f\u30fb\u30fb\u30fb\n\n\u203b\u524d\u56de\u3068\u304b\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u304c\u521d\u56de\u3067\u3059\u3002\n\n## \u74b0\u5883\n\n```\nCentOS release 6.7 (Final)\n\nEnvironment:\n  Redmine version                3.1.0.stable.14520\n  Ruby version                   2.2.3-p173 (2015-08-18) [x86_64-linux]\n  Rails version                  4.2.3\n  Environment                    production\n  Database adapter               Mysql2\nSCM:\n  Subversion                     1.6.11\n  Git                            1.7.1\n  Filesystem                     \nRedmine plugins:\n  redmine_github_hook            2.2.0\n```\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4f7f\u3046\u5834\u5408\u306f\u30d1\u30b9\u306a\u3069\u9069\u5b9c\u5909\u66f4\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n**.ssh/config \u3092\u3044\u3058\u308a\u307e\u3059\uff01\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\uff01**\n\n\u8907\u6570\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6271\u3046\u5834\u5408\u306f\u3001\u9055\u3046\u9375\u304c\u5fc5\u8981\u306b\u306a\u308b\u3089\u3057\u3044\u306e\u3067\u3001\u305d\u3053\u3089\u3078\u3093\u307e\u3067\u542b\u3081\u3066\u6bce\u56de\u624b\u4f5c\u696d\u306f\u3057\u3093\u3069\u304b\u3063\u305f\u306e\u304c\u4f5c\u3063\u305f\u304d\u3063\u304b\u3051\u3002\n\n\u6b63\u76f4\u3061\u3087\u3063\u3068\u307e\u3060\u3088\u304f\u308f\u304b\u3089\u306a\u304f\u3066\u3001Root\u3067\u5b9f\u884c\u3059\u308b\u524d\u63d0\u3067\u3059\u3002\nsudo\u3060\u3068\u306a\u3093\u3067\u304b\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u7b87\u6240\u304c\u3042\u3063\u305f\u306e\u3067Root\u30e6\u30fc\u30b6\u30fc\u9650\u5b9a\u3067\u3059\u304c\u3001\u305d\u306e\u3046\u3061\u3061\u3083\u3093\u3068\u8abf\u3079\u3066\u305d\u3053\u3089\u8fba\u4fee\u6b63\u3057\u305f\u3044\u3002\n\n\u3082\u3057\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30b3\u30d4\u30da\u3063\u3066\u4f7f\u3046\u5834\u5408\u306f\u3001\u5148\u306b```su -```\u3068\u304b\u3067Root\u306b\u306a\u3063\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n```shell-session\n# \n# \u5f15\u6570\u78ba\u8a8d\n# \nif [ $# -ne 2 ]; then\n  echo \"myGithubHelper.sh <repos_owner> <repos_name>\" 1>&2\n  exit 1\nfi\n\n# \n# \u9375\u3092\u4f5c\u6210\n# \nssh-keygen -t rsa -f /var/www/.ssh/${1}-${2}\n\necho ----\ncat /var/www/.ssh/${1}-${2}.pub\necho ----\n\n# \n# \u9375\u3092\u4f7f\u3046\u30db\u30b9\u30c8\u8a2d\u5b9a\n# \ntouch /var/www/.ssh/config\n\necho \"\nHost github-${1}-${2}\n  User git\n  Port 22\n  HostName github.com\n  IdentityFile /var/www/.ssh/${1}-${2}\n  TCPKeepAlive yes\n  IdentitiesOnly yes\n\" >> /var/www/.ssh/config\n\nchown -R apache:apache /var/www/.ssh/config\nchown -R apache:apache /var/www/.ssh/${1}-${2}\nchown -R apache:apache /var/www/.ssh/${1}-${2}.pub\n\n\n# \n# Clone\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u751f\u6210\n# \necho \"\ncd /opt/repos\n\nsudo -u apache git clone --bare git@github-${1}-${2}:${1}/${2}.git\nchown -R apache:apache /opt/repos/${2}.git\n\ncd -\ncd /opt/repos/${2}.git\n\nsudo -u apache git remote add origin git@github-${1}-${2}:${1}/${2}.git\n\ncd -\n\necho ----\necho /opt/repos/${2}.git\necho ----\n\" > ./clone-${1}-${2}.sh\n\nchmod 755 ./clone-${1}-${2}.sh\n\n```\n\n\u3053\u308c\u3092Root\u306b\u306a\u3063\u3066\u304b\u3089\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\nmyGithubHelper.sh github_user github_repo\n```\n\n\u3059\u308b\u3068\u3001\u516c\u958b\u9375\u304c\u8868\u793a\u3055\u308c\u307e\u3059\n\n```\n----\nssh-rsa qwertyuiklxrctvybuhnjimk..........\n----\n```\n\n\u3053\u308c\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001Github\u306eDeploy Keys\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u5b9f\u884c\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\n\n```\nclone-github_user-github_repo.sh\n```\n\n\u3082\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5b9f\u884c\u3057\u3066Github\u304b\u3089Clone\u3057\u307e\u3059\u3002\n\n```\n----\n/opt/repos/github_repo.git\n----\n```\n\n\u3068\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001Redmine\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\u3001Github\u306eWeb hook\u3092\u8a2d\u5b9a\u3057\u3066\u5b8c\u4e86\u3067\u3059\u3002\n", "tags": ["Redmine", "GitHub"]}