{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u4ee5\u524d\u3001JavaScript\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u74b0\u5883\u3092\u3001Testem\uff08\u30c6\u30b9\u30c8\u30e9\u30f3\u30ca\u30fc\uff09\uff0bmocha\uff08\u30c6\u30b9\u30c6\u30a3\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff09\uff0bchai\uff08\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\uff09\u3068\u3044\u3046\u69cb\u6210\u306b\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\u3053\u306e\u69cb\u6210\u3067\u3082\u7279\u306b\u554f\u984c\u306f\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001Karma for JavaScript test runner - blog.koba04.com\u3092\u62dd\u898b\u3057\u3066\u300cKarma\u826f\u3055\u305d\u3046\u2026\uff01\u300d\u3068\u601d\u3044\u3001\u4eca\u306fKarma\uff0bmocha\uff0bpower-assert\uff08\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u306fGrunt\uff09\u3068\u3044\u3046\u69cb\u6210\u3067\u843d\u3061\u7740\u3044\u3066\u3044\u307e\u3059\u3002\n\uff08\u3061\u306a\u307f\u306b\u3001power-assert\u306f\u30b7\u30f3\u30d7\u30eb\u306a\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u3068\u3001\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306e\u8a73\u7d30\u304b\u3064\u76f4\u611f\u7684\u306a\u30ed\u30b0\u51fa\u529b\u304c\u3068\u3066\u3082\u7d20\u6575\u3067\u3059\uff1e\uff1c\uff09\n\u3053\u306e\u8a18\u4e8b\u306f\u3001Karma\uff0bmocha\uff0bpower-assert\u306e\u69cb\u6210\u3092\u3069\u306e\u3088\u3046\u306b\u69cb\u7bc9\u3057\u305f\u304b\u306e\u5099\u5fd8\u9332\u3067\u3059\u3002Node.js\u3084Grunt\u3001Karma\u306a\u3069\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u7701\u7565\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n\u76ee\u7684\n\u3053\u306e\u69cb\u6210\u3067\u5b9f\u73fe\u3057\u305f\u3044\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u30c6\u30b9\u30c8\u5bfe\u8c61\u306ejs\u30d5\u30a1\u30a4\u30eb\u3001\u3082\u3057\u304f\u306f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u305fjs\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u305f\u969b\u306b\u3001Chrome\u4e0a\u3067\u81ea\u52d5\u7684\u306b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3044\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\n\u306a\u304a\u3001\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\u306bpower-assert\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001power-assert\u7528\u306b\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3057\u3001\u305d\u306e\u5909\u63db\u5f8c\u306e\u30b3\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\uff08\u3053\u306e\u3042\u305f\u308a\u306e\u4ed5\u69d8\u306fpower-assert\u306eGithub\u3092\u53c2\u7167\u306e\u3053\u3068\uff09\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\u4eca\u56de\u306e\u8a18\u4e8b\u304c\u5bfe\u8c61\u3068\u3057\u3066\u3044\u308b\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\nRoot\n\u2502  Gruntfile.js\n\u2502  karma.conf.js\n\u2502  package.json\n\u2502  index.html\n\u2502\n\u251c\u2500css\n\u2502    index.css\n\u2502\n\u251c\u2500js\n\u2502  \u2502  index.js\n\u2502  \u2502\n\u2502  \u2514\u2500vendor\n\u2502          jquery-2.1.0.js\n\u2502\n\u2502\n\u2514\u2500test\n   \u2502  index_test.js\n   \u2502\n   \u2514\u2500vendor\n           power-assert.js\n\n\n\n\u5fc5\u8981\u306aGrunt\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ngrunt-este-watch\n\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u691c\u77e5\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\nnpm install grunt-este-watch --save-dev\n\n\ngrunt-karma\nKarma\u3092Grunt\u304b\u3089\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\nnpm install grunt-karma --save-dev\n\n\ngrunt-espower\nespower\uff08power-assert\u7528\u306b\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\uff09\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\nnpm install grunt-espower --save-dev\n\n\nGruntfile.js\nGruntfile.js\u306e\u8a2d\u5b9a\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u51e6\u7406\u306e\u6d41\u308c\u306f\n\njs/index.js\u3082\u3057\u304f\u306ftest/index_test.js\u304c\u5909\u66f4\u30fb\u4fdd\u5b58\u3055\u308c\u305f\u306e\u3092\u691c\u77e5\u3059\u308b\nindex_test.js\u3092power-assert\u7528\u306b\u5909\u63db\u3059\u308b\n2. \u306e\u5909\u63db\u5f8c\u306e\u30bd\u30fc\u30b9\uff08test/espowered/*.js\uff09\u3092\u5bfe\u8c61\u306b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\n\n\u3067\u3059\u3002\n\nGruntfile.js\nmodule.exports = function (grunt) {\n    'use strict';\n\n    var pkg = grunt.file.readJSON('package.json');\n\n    grunt.initConfig({\n        pkg: pkg,\n        // power-assert\u7528\u306b\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3059\u308b\u30bf\u30b9\u30af\n        espower: {\n            test: {\n                files: [\n                    {\n                        expand: true, \n                        cwd: 'test/',             // \u5909\u63db\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n                        src: ['*.js'],            // \u5909\u63db\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u540d\n                        dest: 'test/espowered/',  // \u5909\u63db\u5f8c\u306e\u30b3\u30fc\u30c9\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n                        ext: '.js'                // \u5909\u63db\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u62e1\u5f35\u5b50\n                    }\n                ]\n            }\n        },\n        // \u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u691c\u77e5\u7528\u30bf\u30b9\u30af\n        esteWatch: {\n            options: {\n                dirs: ['js', 'test'],\n                livereload: false\n            },\n            js: function (filepath) {\n                return ['test'];\n            }\n        },\n        // Karma\u5b9f\u884c\u7528\u30bf\u30b9\u30af\n        karma: {\n            unit: {\n                options: {\n                    configFile: 'karma.conf.js',\n                    autoWatch: true,\n                    browsers: [\"Chrome\"],\n                    reporters: [\"progress\"],\n                    singleRun: true,\n                    keepalive: true\n                }\n            }\n        }\n    });\n\n    // package.json\u5185\u306edevDependencies\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u4e2d\u300egrunt-\u300f\u3067\u59cb\u307e\u308b\u3082\u306e\u3092\u30ed\u30fc\u30c9\u3059\u308b\n    for (var taskName in pkg.devDependencies) {\n        if (taskName.substr(0, 6) == 'grunt-') {\n            console.log('load npm task -> ' + taskName);\n            grunt.loadNpmTasks(taskName);\n        }\n    }\n\n    grunt.registerTask(\"default\", \"esteWatch\");\n    grunt.registerTask('test', ['espower', 'karma']);\n};\n\n\n\nkarma.conf.js\nkarma.conf.js\u306e\u8a2d\u5b9a\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\nkarma.conf.js\nmodule.exports = function (config) {\n    config.set({\n\n        // base path that will be used to resolve all patterns (eg. files, exclude)\n        basePath: '',\n\n\n        // frameworks to use\n        // available frameworks: https://npmjs.org/browse/keyword/karma-adapter\n        frameworks: ['mocha', 'mocha-debug'],\n\n\n        // list of files / patterns to load in the browser\n        files: [\n            'js/vendor/jquery-2.1.0.js',\n            'js/*.js',\n            'test/vendor/power-assert.js',\n            'test/espowered/*.js'\n        ],\n\n\n        // list of files to exclude\n        exclude: [\n\n        ],\n\n\n        // preprocess matching files before serving them to the browser\n        // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor\n        preprocessors: {\n\n        },\n\n\n        // test results reporter to use\n        // possible values: 'dots', 'progress'\n        // available reporters: https://npmjs.org/browse/keyword/karma-reporter\n        reporters: ['progress'],\n\n\n        // web server port\n        port: 9876,\n\n\n        // enable / disable colors in the output (reporters and logs)\n        colors: true,\n\n\n        // level of logging\n        // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG\n        logLevel: config.LOG_INFO,\n\n\n        // enable / disable watching file and executing tests whenever any file changes\n        autoWatch: false,\n\n\n        // start these browsers\n        // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher\n        browsers: ['Chrome'],\n\n\n        // Continuous Integration mode\n        // if true, Karma captures browsers, runs the tests and exits\n        singleRun: true\n    });\n};\n\n\n\n\u5b9f\u884c\u65b9\u6cd5\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ grunt\n\ngrunt\u30b3\u30de\u30f3\u30c9\u3092\u5f15\u6570\u306a\u3057\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u305f\u3081\u3001Gruntfile.js\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bf\u30b9\u30af\uff08\u300egrunt.registerTask(\"default\", \"esteWatch\");\u300f\uff09\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\nesteWatch\u306f\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b3\u30fc\u30c9\uff08js/index.js\uff09\u304a\u3088\u3073\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\uff08test/index_test.js\uff09\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u3042\u308c\u3070\u3001\u524d\u8ff0\u306e\u51e6\u7406\u306e\u6d41\u308c\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u5b9f\u884c\u7d50\u679c\n\n\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u30fb\u4fdd\u5b58\u6642\u2192\u30c6\u30b9\u30c8\u5931\u6557\n\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306e\u4f8b\u3068\u3057\u3066\u3001\u3053\u3046\u3044\u3063\u305f\u30b5\u30f3\u30d7\u30eb\u306b\u3042\u308a\u304c\u3061\u306a\u3001Greeting\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306egreet\u95a2\u6570\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b3\u30fc\u30c9\uff08js/index.js\uff09\n\njs/index.js\nwindow.ns = {};\n\n(function (ns) {\n    'use strict';\n\n    var Greeting = ns.Greeting = function (name) {\n        this.name = name;\n    };\n\n    Greeting.prototype.greet = function () {\n        return 'Hello, ' + this.name + '!!';\n    };\n}(ns));\n\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\uff08test/index_test.js\uff09\n\ntest/index_test.js\ndescribe('Greeting', function () {\n    describe('#greet()', function () {\n        it('Greeting\u3092new\u3059\u308b\u6642\u306bname\u3092\u6e21\u3055\u306a\u304b\u3063\u305f\u5834\u5408', function () {\n            var greeting = new ns.Greeting();\n            assert(greeting.greet() === 'Hello, unknown!!');\n        });\n    });\n});\n\n\ntest/index_test.js\u304b\u3001js/index.js\u3092\u5909\u66f4\u30fb\u4fdd\u5b58\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u901a\u308a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\nRunning \"esteWatch\" task\n>> Waiting...\n>> User action.\n>> File changed: test/index_test.js\n\nRunning \"espower:test\" (espower) task\n\nRunning \"karma:unit\" (karma) task\nINFO [karma]: Karma v0.12.19 server started at http://localhost:9876/\nINFO [launcher]: Starting browser Chrome\nINFO [Chrome 36.0.1985 (Mac OS X 10.9.2)]: Connected on socket hklYkb1RNy6QzmNzoXL1 with id 78195425\nChrome 36.0.1985 (Mac OS X 10.9.2) Greeting #greet() Greeting\u3092new\u3059\u308b\u6642\u306bname\u3092\u6e21\u3055\u306a\u304b\u3063\u305f\u5834\u5408 FAILED\n        # test/index_test.js:5\n\n        assert(greeting.greet() === 'Hello, unknown!!')\n               |        |       |                      \n               |        |       false                  \n               |        \"Hello, undefined!!\"           \n               Object{name:undefined}                  \n\n        --- [string] 'Hello, unknown!!'\n        +++ [string] greeting.greet()\n        @@ -6,11 +6,13 @@\n         , un\n        -known\n        +defined\n         !!\n\n\n\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u30fb\u4fdd\u5b58\u6642\u2192\u30c6\u30b9\u30c8\u6210\u529f\n\u30c6\u30b9\u30c8\u304c\u901a\u308b\u3088\u3046\u306b\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b3\u30fc\u30c9\uff08js/index.js\uff09\u3092\u5909\u66f4\u30fb\u4fdd\u5b58\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u901a\u308a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\nRunning \"esteWatch\" task\n>> Waiting...\n>> User action.\n>> File changed: test/index_test.js\n\nRunning \"espower:test\" (espower) task\n\nRunning \"karma:unit\" (karma) task\nINFO [karma]: Karma v0.12.19 server started at http://localhost:9876/\nINFO [launcher]: Starting browser Chrome\nINFO [Chrome 36.0.1985 (Mac OS X 10.9.2)]: Connected on socket b1JTt49h-waXPjMA6Jb2 with id 87727203\nChrome 36.0.1985 (Mac OS X 10.9.2): Executed 3 of 3 SUCCESS (0.129 secs / 0.003 secs)\n\nRunning \"esteWatch\" task\n>> Waiting...\n\n\n\u3053\u308c\u3067\u30c6\u30b9\u30c8\u304c\u3055\u304f\u3055\u304f\u66f8\u3051\u307e\u3059\u306d\uff01\n\n# \u306f\u3058\u3081\u306b\n\n\u4ee5\u524d\u3001JavaScript\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u74b0\u5883\u3092\u3001Testem\uff08\u30c6\u30b9\u30c8\u30e9\u30f3\u30ca\u30fc\uff09\uff0bmocha\uff08\u30c6\u30b9\u30c6\u30a3\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff09\uff0bchai\uff08\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\uff09\u3068\u3044\u3046\u69cb\u6210\u306b\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u69cb\u6210\u3067\u3082\u7279\u306b\u554f\u984c\u306f\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001[Karma for JavaScript test runner - blog.koba04.com](http://blog.koba04.com/post/2014/06/23/karma-for-javascript-test-runner/)\u3092\u62dd\u898b\u3057\u3066\u300cKarma\u826f\u3055\u305d\u3046\u2026\uff01\u300d\u3068\u601d\u3044\u3001\u4eca\u306fKarma\uff0bmocha\uff0bpower-assert\uff08\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u306fGrunt\uff09\u3068\u3044\u3046\u69cb\u6210\u3067\u843d\u3061\u7740\u3044\u3066\u3044\u307e\u3059\u3002\n\uff08\u3061\u306a\u307f\u306b\u3001power-assert\u306f\u30b7\u30f3\u30d7\u30eb\u306a\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u3068\u3001\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306e\u8a73\u7d30\u304b\u3064\u76f4\u611f\u7684\u306a\u30ed\u30b0\u51fa\u529b\u304c\u3068\u3066\u3082\u7d20\u6575\u3067\u3059\uff1e\uff1c\uff09\n\n\u3053\u306e\u8a18\u4e8b\u306f\u3001Karma\uff0bmocha\uff0bpower-assert\u306e\u69cb\u6210\u3092\u3069\u306e\u3088\u3046\u306b\u69cb\u7bc9\u3057\u305f\u304b\u306e\u5099\u5fd8\u9332\u3067\u3059\u3002Node.js\u3084Grunt\u3001Karma\u306a\u3069\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u7701\u7565\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n# \u76ee\u7684\n\n\u3053\u306e\u69cb\u6210\u3067\u5b9f\u73fe\u3057\u305f\u3044\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u30c6\u30b9\u30c8\u5bfe\u8c61\u306ejs\u30d5\u30a1\u30a4\u30eb\u3001\u3082\u3057\u304f\u306f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u305fjs\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u305f\u969b\u306b\u3001Chrome\u4e0a\u3067\u81ea\u52d5\u7684\u306b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3044\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\n\n\u306a\u304a\u3001\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\u306bpower-assert\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001power-assert\u7528\u306b\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3057\u3001\u305d\u306e\u5909\u63db\u5f8c\u306e\u30b3\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\uff08\u3053\u306e\u3042\u305f\u308a\u306e\u4ed5\u69d8\u306f[power-assert\u306eGithub](https://github.com/twada/power-assert)\u3092\u53c2\u7167\u306e\u3053\u3068\uff09\n\n# \u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\n\u4eca\u56de\u306e\u8a18\u4e8b\u304c\u5bfe\u8c61\u3068\u3057\u3066\u3044\u308b\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n```\nRoot\n\u2502  Gruntfile.js\n\u2502  karma.conf.js\n\u2502  package.json\n\u2502  index.html\n\u2502\n\u251c\u2500css\n\u2502    index.css\n\u2502\n\u251c\u2500js\n\u2502  \u2502  index.js\n\u2502  \u2502\n\u2502  \u2514\u2500vendor\n\u2502          jquery-2.1.0.js\n\u2502\n\u2502\n\u2514\u2500test\n   \u2502  index_test.js\n   \u2502\n   \u2514\u2500vendor\n           power-assert.js\n\n```\n\n# \u5fc5\u8981\u306aGrunt\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n## grunt-este-watch\n\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u691c\u77e5\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\n```\nnpm install grunt-este-watch --save-dev\n```\n\n## grunt-karma\nKarma\u3092Grunt\u304b\u3089\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\n\n```\nnpm install grunt-karma --save-dev\n```\n## grunt-espower\nespower\uff08power-assert\u7528\u306b\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\uff09\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\n\n```\nnpm install grunt-espower --save-dev\n```\n\n\n# Gruntfile.js\n\nGruntfile.js\u306e\u8a2d\u5b9a\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u51e6\u7406\u306e\u6d41\u308c\u306f\n\n1. js/index.js\u3082\u3057\u304f\u306ftest/index_test.js\u304c\u5909\u66f4\u30fb\u4fdd\u5b58\u3055\u308c\u305f\u306e\u3092\u691c\u77e5\u3059\u308b\n2. index_test.js\u3092power-assert\u7528\u306b\u5909\u63db\u3059\u308b\n3. 2. \u306e\u5909\u63db\u5f8c\u306e\u30bd\u30fc\u30b9\uff08test/espowered/*.js\uff09\u3092\u5bfe\u8c61\u306b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\n\n\u3067\u3059\u3002\n\n```javascript:Gruntfile.js\nmodule.exports = function (grunt) {\n    'use strict';\n\n    var pkg = grunt.file.readJSON('package.json');\n\n    grunt.initConfig({\n        pkg: pkg,\n        // power-assert\u7528\u306b\u30b3\u30fc\u30c9\u3092\u5909\u63db\u3059\u308b\u30bf\u30b9\u30af\n        espower: {\n            test: {\n                files: [\n                    {\n                        expand: true, \n                        cwd: 'test/',             // \u5909\u63db\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n                        src: ['*.js'],            // \u5909\u63db\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u540d\n                        dest: 'test/espowered/',  // \u5909\u63db\u5f8c\u306e\u30b3\u30fc\u30c9\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n                        ext: '.js'                // \u5909\u63db\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u62e1\u5f35\u5b50\n                    }\n                ]\n            }\n        },\n        // \u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u691c\u77e5\u7528\u30bf\u30b9\u30af\n        esteWatch: {\n            options: {\n                dirs: ['js', 'test'],\n                livereload: false\n            },\n            js: function (filepath) {\n                return ['test'];\n            }\n        },\n        // Karma\u5b9f\u884c\u7528\u30bf\u30b9\u30af\n        karma: {\n            unit: {\n                options: {\n                    configFile: 'karma.conf.js',\n                    autoWatch: true,\n                    browsers: [\"Chrome\"],\n                    reporters: [\"progress\"],\n                    singleRun: true,\n                    keepalive: true\n                }\n            }\n        }\n    });\n\n    // package.json\u5185\u306edevDependencies\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u4e2d\u300egrunt-\u300f\u3067\u59cb\u307e\u308b\u3082\u306e\u3092\u30ed\u30fc\u30c9\u3059\u308b\n    for (var taskName in pkg.devDependencies) {\n        if (taskName.substr(0, 6) == 'grunt-') {\n            console.log('load npm task -> ' + taskName);\n            grunt.loadNpmTasks(taskName);\n        }\n    }\n\n    grunt.registerTask(\"default\", \"esteWatch\");\n    grunt.registerTask('test', ['espower', 'karma']);\n};\n```\n\n# karma.conf.js\n\nkarma.conf.js\u306e\u8a2d\u5b9a\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n```javascript:karma.conf.js\nmodule.exports = function (config) {\n    config.set({\n\n        // base path that will be used to resolve all patterns (eg. files, exclude)\n        basePath: '',\n\n\n        // frameworks to use\n        // available frameworks: https://npmjs.org/browse/keyword/karma-adapter\n        frameworks: ['mocha', 'mocha-debug'],\n\n\n        // list of files / patterns to load in the browser\n        files: [\n            'js/vendor/jquery-2.1.0.js',\n            'js/*.js',\n            'test/vendor/power-assert.js',\n            'test/espowered/*.js'\n        ],\n\n\n        // list of files to exclude\n        exclude: [\n\n        ],\n\n\n        // preprocess matching files before serving them to the browser\n        // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor\n        preprocessors: {\n\n        },\n\n\n        // test results reporter to use\n        // possible values: 'dots', 'progress'\n        // available reporters: https://npmjs.org/browse/keyword/karma-reporter\n        reporters: ['progress'],\n\n\n        // web server port\n        port: 9876,\n\n\n        // enable / disable colors in the output (reporters and logs)\n        colors: true,\n\n\n        // level of logging\n        // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG\n        logLevel: config.LOG_INFO,\n\n\n        // enable / disable watching file and executing tests whenever any file changes\n        autoWatch: false,\n\n\n        // start these browsers\n        // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher\n        browsers: ['Chrome'],\n\n\n        // Continuous Integration mode\n        // if true, Karma captures browsers, runs the tests and exits\n        singleRun: true\n    });\n};\n```\n# \u5b9f\u884c\u65b9\u6cd5\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n$ grunt\n```\n\ngrunt\u30b3\u30de\u30f3\u30c9\u3092\u5f15\u6570\u306a\u3057\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u305f\u3081\u3001Gruntfile.js\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bf\u30b9\u30af\uff08\u300egrunt.registerTask(\"default\", \"esteWatch\");\u300f\uff09\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\nesteWatch\u306f\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b3\u30fc\u30c9\uff08js/index.js\uff09\u304a\u3088\u3073\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\uff08test/index_test.js\uff09\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u3042\u308c\u3070\u3001\u524d\u8ff0\u306e\u51e6\u7406\u306e\u6d41\u308c\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n# \u5b9f\u884c\u7d50\u679c\n\n### \u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u30fb\u4fdd\u5b58\u6642\u2192\u30c6\u30b9\u30c8\u5931\u6557\n\n\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306e\u4f8b\u3068\u3057\u3066\u3001\u3053\u3046\u3044\u3063\u305f\u30b5\u30f3\u30d7\u30eb\u306b\u3042\u308a\u304c\u3061\u306a\u3001Greeting\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306egreet\u95a2\u6570\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#### \u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b3\u30fc\u30c9\uff08js/index.js\uff09\n\n```javascript:js/index.js\nwindow.ns = {};\n\n(function (ns) {\n    'use strict';\n\n    var Greeting = ns.Greeting = function (name) {\n        this.name = name;\n    };\n\n    Greeting.prototype.greet = function () {\n        return 'Hello, ' + this.name + '!!';\n    };\n}(ns));\n```\n\n#### \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\uff08test/index_test.js\uff09\n\n```javascript:test/index_test.js\ndescribe('Greeting', function () {\n    describe('#greet()', function () {\n        it('Greeting\u3092new\u3059\u308b\u6642\u306bname\u3092\u6e21\u3055\u306a\u304b\u3063\u305f\u5834\u5408', function () {\n            var greeting = new ns.Greeting();\n            assert(greeting.greet() === 'Hello, unknown!!');\n        });\n    });\n});\n```\n\ntest/index_test.js\u304b\u3001js/index.js\u3092\u5909\u66f4\u30fb\u4fdd\u5b58\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u901a\u308a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n```shell-session\nRunning \"esteWatch\" task\n>> Waiting...\n>> User action.\n>> File changed: test/index_test.js\n\nRunning \"espower:test\" (espower) task\n\nRunning \"karma:unit\" (karma) task\nINFO [karma]: Karma v0.12.19 server started at http://localhost:9876/\nINFO [launcher]: Starting browser Chrome\nINFO [Chrome 36.0.1985 (Mac OS X 10.9.2)]: Connected on socket hklYkb1RNy6QzmNzoXL1 with id 78195425\nChrome 36.0.1985 (Mac OS X 10.9.2) Greeting #greet() Greeting\u3092new\u3059\u308b\u6642\u306bname\u3092\u6e21\u3055\u306a\u304b\u3063\u305f\u5834\u5408 FAILED\n        # test/index_test.js:5\n\n        assert(greeting.greet() === 'Hello, unknown!!')\n               |        |       |                      \n               |        |       false                  \n               |        \"Hello, undefined!!\"           \n               Object{name:undefined}                  \n\n        --- [string] 'Hello, unknown!!'\n        +++ [string] greeting.greet()\n        @@ -6,11 +6,13 @@\n         , un\n        -known\n        +defined\n         !!\n```\n\n### \u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u30fb\u4fdd\u5b58\u6642\u2192\u30c6\u30b9\u30c8\u6210\u529f\n\n\u30c6\u30b9\u30c8\u304c\u901a\u308b\u3088\u3046\u306b\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b3\u30fc\u30c9\uff08js/index.js\uff09\u3092\u5909\u66f4\u30fb\u4fdd\u5b58\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u901a\u308a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n```shell-session\nRunning \"esteWatch\" task\n>> Waiting...\n>> User action.\n>> File changed: test/index_test.js\n\nRunning \"espower:test\" (espower) task\n\nRunning \"karma:unit\" (karma) task\nINFO [karma]: Karma v0.12.19 server started at http://localhost:9876/\nINFO [launcher]: Starting browser Chrome\nINFO [Chrome 36.0.1985 (Mac OS X 10.9.2)]: Connected on socket b1JTt49h-waXPjMA6Jb2 with id 87727203\nChrome 36.0.1985 (Mac OS X 10.9.2): Executed 3 of 3 SUCCESS (0.129 secs / 0.003 secs)\n\nRunning \"esteWatch\" task\n>> Waiting...\n\n```\n\n\u3053\u308c\u3067\u30c6\u30b9\u30c8\u304c\u3055\u304f\u3055\u304f\u66f8\u3051\u307e\u3059\u306d\uff01\n", "tags": ["grunt", "karma", "JavaScript", "power-assert"]}