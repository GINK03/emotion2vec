{"context": "\u8a00\u8a9e\u5b9f\u88c5 Advent Calendar 2015\u306e22\u65e5\u76ee\u3068\u3057\u3066\u66f8\u304b\u308c\u307e\u3057\u305f\u3002\nErlang\u3067BEAM\u3067\u52d5\u304f\u30b3\u30f3\u30d1\u30a4\u30e9\u3059\u308b\u4f5c\u6210\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\nulang\u3068\u3044\u3046\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u3063\u305f\u306e\u3067\u3053\u308c\u3092\u5143\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nhttps://github.com/oskimura/ulang.git\n\u4e3b\u306a\u6d41\u308c\u3068\u3057\u3066\u306f\u5b57\u53e5\u89e3\u6790\u5668\u3001\u69cb\u6587\u89e3\u6790\u5668\u3092\u884c\u3063\u3066\u4e2d\u9593\u8868\u73fe\u306b\u5909\u63db\u3057compile\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066BEAM\u3067\u5b9f\u884c\u53ef\u80fd\u306a\u30d0\u30a4\u30ca\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n\u4eca\u56de\u306fulang.xrl\u3067\u5b57\u53e5\u89e3\u6790\u3092\u884c\u3044\u3001ulang_yecc.yrl\u3067\u69cb\u6587\u89e3\u6790\u53ca\u3073\u4e2d\u9593\u8868\u73fe\u306e\u51fa\u529b\u3001compiler.erl\u3067\u30d0\u30a4\u30ca\u30ea\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\n\u5b57\u53e5\u89e3\u6790\u5668\n\nErlang\u306b\u306fleex\u3068\u3044\u3046\u5b57\u53e5\u89e3\u6790\u5668\u304c\u3042\u308a\u307e\u3059\u3002\nhttp://erlang.org/doc/man/leex.html\n\u985e\u4f3c\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u4eba\u306a\u3089\u5206\u304b\u308b\u3067\u3057\u3087\u3046\u3051\u3069\u3001Definitions\u3001Rules\u3001Erlang code\u306b\u5206\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nDefinitions\u306frule\u3067\u4ed5\u69d8\u3055\u308c\u308b\u6b63\u898f\u8868\u73fe\u306e\u5b9a\u7fa9\u3092\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3053\u306e\u7b87\u6240\u306b\u8a72\u5f53\u3057\u307e\u3059\u3002\nINT        = [0-9]+\nATOM       = :[a-z_]+\nVAR        = [a-z0-9_]+\nCHAR       = [a-z0-9_]\nWHITESPACE = [\\s\\t\\n\\r]\n\nRules\u306f\u751f\u6210\u3059\u308b\u30c8\u30fc\u30af\u30f3\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\nErlang code\u306fRules\u3067\u4ed5\u69d8\u3055\u308c\u308bErlang\u306e\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3053\u306e\u90e8\u5206\u306b\u8a72\u5f53\u3057\u307e\u3059\u3002\nmodule  : {token,{module,TokenLine}}.\n\n\u306e\u3088\u3046\u306b\n\u30de\u30c3\u30c1\u3059\u308b\u5b57\u53e5 : {\u751f\u6210\u3059\u308b\u30c8\u30fc\u30af\u30f3}\n\n\u3068\u3044\u3046\u98a8\u306b\u66f8\u304d\u307e\u3059\u3002\n{token,{\u3044\u308d\u3044\u308d,\u884c\u6570}}.\n\n\u3068\u3044\u3046\u98a8\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\nDefinitions\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u5b9a\u7fa9\u3092\u4ed5\u69d8\u3059\u308b\u306b\u306f\n\u3068\u3044\u3046\u98a8\u306bINT\u306a\u3089{INT}\u3068{}\u3067\u56f2\u3080\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u4eca\u56de\u306e\u5834\u5408\u306f\u3053\u3053\u306e\nto_atom\u95a2\u6570\u306b\u8a72\u5f53\u3057\u307e\u3059\u3002\n\u3053\u306e\u69d8\u306bRules\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3053\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang.xrl\n\n\u69cb\u6587\u89e3\u6790\u5668\n\n\u540c\u3058\u3088\u3046\u306bErlang\u306b\u306fyecc\u3068\u3044\u3046\u69cb\u6587\u89e3\u6790\u5668\u304c\u3042\u308a\u307e\u3059\u3002\nhttp://erlang.org/doc/man/yecc.html\nyecc\u306fErlang\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30b3\u30f3\u30d1\u30a4\u30e9\u3067BNF\u3067\u6587\u6cd5\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n\u3061\u306a\u307f\u306bErlang\u306e\u30d1\u30fc\u30b5\u3082yecc\u306b\u3088\u3063\u3066\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nyecc\u306fNonterminals\u3001Terminals\u3001\u898f\u5247\u90e8\u3001Erlang code\u306b\u5225\u308c\u3066\u3044\u307e\u3059\u3002\nNonterminals\u306f\u975e\u7d42\u7aef\u8a18\u53f7\u306e\u96c6\u5408\u306e\u5ba3\u8a00\u3092\u884c\u3044\u307e\u3059\u3002\nTerminals\u306f\u7d42\u7aef\u8a18\u53f7\u306e\u5ba3\u8a00\u3092\u884c\u3044\u307e\u3059\u3002\n\u898f\u5247\u90e8\u306fRootSymbol\u3092\u958b\u59cb\u8a18\u53f7\u3068\u3059\u308b\u7c21\u7d04\u898f\u5247\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002RootSymbol\u304c\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L6\n\u898f\u5247\u90e8\u306f\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L9-L13\nprogram ->\n    module_exp: [ '$1' ].\n\nprogram ->\n    module_exp exps: [ '$1' | '$2' ].\n\n\u306e\u3088\u3046\u306b \n\u975e\u7d42\u7aef\u8a18\u53f7 -> \u3000\u30eb\u30fc\u30eb : \u30a2\u30af\u30b7\u30e7\u30f3\n\u3068\u3044\u3046\u98a8\u306b\u304b\u304d\u307e\u3059\u3002'$1'\u306f\u5f15\u6570\u3067\u3059\u3002\u57fa\u672c\u7684\u306b\u306flex/flex\u3068\u4e00\u7dd2\u3067\u3059\u3002\u975e\u7d42\u7aef\u8a18\u53f7\u306b\u8907\u6570\u306e\u30eb\u30fc\u30eb\u304c\u3042\u308b\u5834\u5408\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306b\u8907\u6570\u66f8\u304d\u307e\u3059\u3002\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u898f\u5247\u90e8\n\u4eca\u56de\u4f5c\u6210\u3059\u308byecc\u306f\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u4f5c\u6210\u3059\u308b\u4e2d\u9593\u8868\u73fe\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u4e2d\u9593\u8868\u73fe\u306e\u8a73\u7d30\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002\nErlang code\u306f\n\u898f\u5247\u90e8\u3067\u4f7f\u7528\u3059\u308bErlang\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002leex\u3068\u540c\u3058\u3067\u3059\u3002\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L163-L174\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u305fyecc\u306e\u5168\u4f53\u306f\u3053\u3061\u3089\u3067\u3059\u3002\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl\n\n\u4e2d\u9593\u8868\u73fe\nerl_syntax\u3068\u3044\u3046\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u4e2d\u9593\u8868\u73fe\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30c4\u30ea\u30fc\u3092\u7d44\u307f\u7acb\u3066\u308b\u305f\u3081\u306eAPI\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001\nhttp://erlang.org/doc/man/erl_syntax.html\n\u4eca\u56de\u30b3\u30ec\u306f\u4f7f\u7528\u305b\u305a\u306b\u81ea\u5206\u3067\u7d44\u307f\u7acb\u3066\u308b\u4e8b\u306b\u3057\u307e\u3059\u3002\n\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067Erlang\u30d7\u30ed\u30b0\u30e9\u30e0\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u9593\u8868\u73fe\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306f\u30b3\u30ec\u3092\u4f7f\u3063\u3066\u4e2d\u9593\u8868\u73fe\u3092\u89e3\u6790\u3057\u3066\u4e2d\u9593\u8868\u73fe\u3092\u7d44\u307f\u7acb\u3066\u307e\u3059\u3002\n\ncompile\u30e2\u30b8\u30e5\u30fc\u30eb\n\u751f\u6210\u3055\u308c\u305f\u4e2d\u9593\u8868\u73fe\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30d0\u30a4\u30ca\u30ea\u3092\u51fa\u529b\u3059\u308b\u306e\u306fcompile\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u304a\u3053\u306a\u3044\u307e\u3059\u3002\u3000\nhttp://www.erlang.org/doc/man/compile.html\n\u4eca\u56de\u306fnoenv_forms\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3057\u305f\u3002\ncompile:noenv_forms(Spec,[return]) of\n {ok,Module,Binary,Wornings} ->\nend\n\ncompile:noenv_forms\u306e\u7b2c\u4e00\u5f15\u6570\u306f\u30d0\u30a4\u30ca\u30ea\u5909\u63db\u3057\u305f\u3044\u4e2d\u9593\u8868\u73fe\u3001\u7b2c\u4e8c\u5f15\u6570\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u6210\u529f\u3057\u305f\u5834\u5408\u306f{ok,Module,Binary,Wornings}\u3068\u3044\u3046\u30bf\u30d7\u30eb\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\nModule\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u3001Binary\u306f\u5909\u63db\u30d0\u30a4\u30ca\u30ea\u3001Worning\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306e\u8b66\u544a\u3067\u3059\u3002\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/compiler.erl\n\n\u4e2d\u9593\u8868\u73fe\u306b\u3064\u3044\u3066\n\n\u4e2d\u9593\u8868\u73fe\u306f\u57fa\u672c\u7684\u306b\u30bf\u30d7\u30eb\u3067\u8868\u73fe\u3055\u308c\u3001{\u30bf\u30b0\u540d,\u30bd\u30fc\u30b9\u884c\u6570,\u5f15\u65701,\u5f15\u65702,...}\u3068\u3044\u3063\u305f\u5f62\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u30bf\u30b0\u306e\u30ea\u30b9\u30c8\u304c\u4e2d\u9593\u8868\u73fe\u3067\u3059\u3002compile\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u95a2\u6570\u306b\u6e21\u3059\u3053\u3068\u3067\u30d0\u30a4\u30ca\u30ea\u3078\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f8b\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nEralang\u306e\u6587\u6cd5\u306b\u304b\u3093\u3057\u3066\u306f\u30b3\u30b3\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3067\u306f\u4e2d\u9593\u8868\u73fe\u306e\u8aac\u660e\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nmodule\u5ba3\u8a00\n-module(sample).\n\n\u3068\u3044\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u5ba3\u8a00\u306f\n{attribute,1,module,sample},\n\n\u3068\u306a\u308a\u307e\u3059\nmodule := {attribute,Line,module,ModuleName},\n\nLine\u306f\u884c\u6570\u3001ModuleName\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u3068\u306a\u308a\u307e\u3059\u3002\nattribute\u3068\u3044\u3046\u30bf\u30b0\u306f\u5f8c\u8ff0\u3059\u308bexport\u306a\u3069module\u306e\u7b87\u6240\u3092\u5909\u3048\u3066\u4f7f\u308f\u308c\u307e\u3059\u3002\nModuleName\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u540d\u524d\u3067\u3059\u4eca\u56de\u306fsample\u3067\u3059\u3002\n\nexport\u5ba3\u8a00\n-export([func1/0]).\n\n\u3068\u3044\u3046export\u5ba3\u8a00\u306f\n{attribute,2,export,[{func1,0}]},\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\nexport := {attribute,Line,export,[{f1,Arg},...]},\n\nexport\u306e\u5f8c\u306b\u95a2\u6570\u306e\u30ea\u30b9\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002{\u5909\u6570\u540d,\u95a2\u6570\u306e\u6570}\u306e\u30ea\u30b9\u30c8\u3068\u3044\u3046\u5f62\u3067\u8868\u73fe\u3055\u308c\u307e\u3059\u3002\n\n\u95a2\u6570\u5ba3\u8a00\nfunc1 () ->\n    ok.\n\n\u3068\u3044\u3046\u95a2\u6570\u5ba3\u8a00\u306f\n{function,3,func1,0,[{clause,3,[],[],[{atom,4,ok}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\nfunction := {function, Line, FunctionName, ArgNumber [Clause1,...]}\n\nLine\u306f\u884c\u6570\u3001FunctionName\u306f\u95a2\u6570\u540d\u3001ArgNumber\u306f\u5f15\u6570\u306e\u6570\u3001Clause\u306e\u30ea\u30b9\u30c8\u306f\u95a2\u6570\u306e\u672c\u4f53\u3067\u3059\u3002\n\u306a\u305c\u30ea\u30b9\u30c8\u306a\u306e\u304b\u3068\u3044\u3046\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u5834\u5408\nfunc2([]) ->\n    ok;\nfunc2(X) ->\n    ok.\n\n\u5f15\u6570\u306e\u30de\u30c3\u30c1\u30f3\u30b0\u306b\u3088\u3063\u3066\u8907\u6570\u306e\u672c\u4f53\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u3053\u306eClause\u306fcase hoge of\uff5e\u5f62\u5f0f\u306e\u30d1\u30bf\u30f3\u30de\u30c3\u30c1\u306e\u4e2d\u9593\u8868\u73fe\u3068\u5171\u901a\u306e\u5f62\u5f0f\u3067\u3059\u3002\nclause := {clause,Line,[Args],[TestFuncs],[Bodys]}\n\nLine\u306f\u884c\u6570\u3001Args\u306e\u30ea\u30b9\u30c8\u306f\u4eee\u5f15\u6570\u3001TestFunc\u306e\u30ea\u30b9\u30c8\u306f\u30ac\u30fc\u30c9\u7bc0\u3001Bodys\u306e\u30ea\u30b9\u30c8\u306f\u95a2\u6570\u672c\u4f53\u3067\u3059\u3002\n\u30ac\u30fc\u30c9\u7bc0\u306f\nfunc3(X)  when is_atom(X)  ->\n    X.\n\n\u306ewhen\u4ee5\u964d\u3067\u5f15\u6570\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\u7b87\u6240\u3067\u3059\u3002\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u95a2\u6570\u306e\u5834\u5408\n{function,10,func3,1,[{clause,10,[{var,10,'X'}],[[{call,10,{atom,10,is_atom},[{var,10,'X'}]}]],[{var,11,'X'}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n\u6587\u5b57\u5217\nstring_fun() ->\n    \"abc\".\n\n\u306f\n{function,15,string_fun,0,[{clause,15,[],[],[{string,16,\"abc\"}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n{string,Line,Str}\n\nStr\u306f\u6587\u5b57\u5217\u3067\u3059\n\n\u6587\u5b57\nchar_fun() ->\n    $a.\n\n\u306f\n{function,18,char_fun,0,[{clause,18,[],[],[{char,19,97}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n{char,Line,Char}\n\nChar\u306f\u6587\u5b57\u306eASCII\u30b3\u30fc\u30c9\u3067\u3059\n\n\u6574\u6570\ninteger_fun() ->\n    1.\n\n\u306f\n{function,21,integer_fun,0,[{clause,21,[],[],[{integer,22,1}]}]\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n{integer,Line,Num}\n\nNum\u306f\u6570\u5b57\u3067\u3059\n\n\u6f14\u7b97\u5b50\nop_fun() ->\n    1+1.\n\n\u306f\n{function,24,op_fun,0,[{clause,24,[],[],[{op,25,'+',{integer,25,1},{integer,25,1}}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n{op,Line, Op,LVal,RVal}\n\nOp\u306f\u6f14\u7b97\u5b50\u3067\u3059\u3002LVal\u3068RVal\u306f\u305d\u308c\u305e\u308c\u6f14\u7b97\u5b50\u306e\u5de6\u8fba\u3068\u53f3\u8fba\u3067\u3059\u3002\n\n\u95a2\u6570\u547c\u3073\u51fa\u3057\ncall\u3067\u547c\u3076\u3053\u3068\u304c\u3067\u304d\u308b\u95a2\u6570\u306f\u540c\u3058\u30e2\u30b8\u30e5\u30fc\u30eb\u5185\u306e\u95a2\u6570\u306b\u9650\u3089\u308c\u308b\u3002\u4ed6\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5ba3\u8a00\u3057\u3066\u3042\u308b\u95a2\u6570\u306f \u5f8c\u8ff0\u3059\u308bremote call\u3067\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\ncall_fun() ->\n    func1().\n\n\u3068\u3044\u3046\u95a2\u6570\u306f\n{function,13,call_fun,0,[{clause,13,[],[],[{call,14,{atom,14,func1},[]}]}]},\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\ncall := {call,Line,{atom,Line,FunctionName},Args},\nvar := {var,Line,VarNme}\n\nLine\u306f\u884c\u6570\u3001FunctionName\u306f\u95a2\u6570\u540d\u3001Args\u306f\u5f15\u6570\u306e\u30ea\u30b9\u30c8\u3067\u3059\u3002\n\n\u95a2\u6570\u547c\u3073\u51fa\u3057\n\u4ed6\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5ba3\u8a00\u3055\u308c\u305f\u95a2\u6570\u306fremote call\u3067\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nremote_call_fun() ->\n    io:format(\"test\").\n\n\u3068\u3044\u3046\u95a2\u6570\u306f\n{function,16,remote_call_fun,0,[{clause,16,[],[],[{call,17,{remote,17,{atom,17,io},{atom,17,format}},[{string,17,\"test\"}]}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\nremotecall :={call,Line,{remote,Line,{atom,Line,ModuleName},{atom,Line,FunctionName}},Args}\nArgs := {var,Line,VarNme}\n\nremote\u304c\u5165\u308b\u4ee5\u5916\u306fcall\u3068\u540c\u3058\u3067\u3059\u3002\n\n\u30d1\u30bf\u30f3\u30de\u30c3\u30c1\n\u30d1\u30bf\u30f3\u30de\u30c3\u30c1\u3067\u3059\nmatch_fun(X) ->\n    case X of\n        a ->\n            a;\n        b ->\n            b\n\n\u3068\u3044\u3046\u95a2\u6570\u304c\n{function,19,match_fun,1,[{clause,19,[{var,19,'X'}],[],[{case,20,{var,20,'X'},[{clause,21,[{atom,21,a}],[],[{atom,22,a}]},{clause,23,[{atom,23,b}],[],[{atom,24,b}]}]}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\ncase := {'case', Line, MatchExp, [Clause1,...]}\nmatchexp := {clause, Line, Match, Test, Bodys}\n\nMatchExp\u306f\u4e0a\u306e\u30bd\u30fc\u30b9\u3067\u3044\u3046case\u3068of\u306e\u9593\u306e\u5f0f\u306b\u3042\u305f\u308a\u307e\u3059Clause\u306e\n\n\u4ee3\u5165\n\u5358\u4e00\u4ee3\u5165\u3067\u3059\u3002\nbind_fun() ->\n    X = 1.\n\n\u306f    \n{function,29,bind_fun,0,[{clause,29,[],[],[{match,30,{var,30,'X'},{integer,30,1}}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n{match,Line,Var,Val}\n\nVar\u306bVal\u3092\u4ee3\u5165\u3057\u307e\u3059\u3002\n{var,Line,Var}\n\n\u306f\u5909\u6570\u3067\u3059\u3002Var\u306f\u5909\u6570\u540d\u3067\u3059\u3002\n{integer,Line,Val}\n\n\u306f\u6574\u6570\u3067\u3059\u3002Val\u306f\u8a2d\u5b9a\u3059\u308b\u6574\u6570\u3067\u3059\u3002\n\n\u30ea\u30b9\u30c8\nlist_fun() ->\n    [1,2,3,4].\n\n\u3068\u3044\u3046\u95a2\u6570\u306f\n{function,27,list_fun,0,[{clause,27,[],[],[{cons,28,{integer,28,1},{cons,28,{integer,28,2},{cons,28,{integer,28,3},{cons,28,{integer,28,4},{nil,28}}}}}]}]}\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002 \n{cons, Line, {Elent1,{Element2, Line,... {nil,Line}}\n\nElement1,Element2\u306f\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u3067\u3059\u3002cons\u306f\u5165\u308c\u5b50\u69cb\u9020\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\n\u4e0a\u8a18\u306e\u60c5\u5831\u304c\u3042\u308c\u3070BEAM\u3067\u52d5\u304f\u51e6\u7406\u7cfb\u304c\u4f5c\u308c\u308b\u3068\u304a\u3082\u3044\u307e\u3059\u3002\u4e2d\u9593\u8868\u73fe\u306e\u4ed6\u306e\u6587\u6cd5\u7b49\u306b\u3064\u3044\u3066\u306f\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u3088\u3046\n\u8a00\u8a9e\u5b9f\u88c5 Advent Calendar 2015\u306e22\u65e5\u76ee\u3068\u3057\u3066\u66f8\u304b\u308c\u307e\u3057\u305f\u3002\nErlang\u3067BEAM\u3067\u52d5\u304f\u30b3\u30f3\u30d1\u30a4\u30e9\u3059\u308b\u4f5c\u6210\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\nulang\u3068\u3044\u3046\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u3063\u305f\u306e\u3067\u3053\u308c\u3092\u5143\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nhttps://github.com/oskimura/ulang.git\n\n\u4e3b\u306a\u6d41\u308c\u3068\u3057\u3066\u306f\u5b57\u53e5\u89e3\u6790\u5668\u3001\u69cb\u6587\u89e3\u6790\u5668\u3092\u884c\u3063\u3066\u4e2d\u9593\u8868\u73fe\u306b\u5909\u63db\u3057compile\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066BEAM\u3067\u5b9f\u884c\u53ef\u80fd\u306a\u30d0\u30a4\u30ca\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n\u4eca\u56de\u306fulang.xrl\u3067\u5b57\u53e5\u89e3\u6790\u3092\u884c\u3044\u3001ulang_yecc.yrl\u3067\u69cb\u6587\u89e3\u6790\u53ca\u3073\u4e2d\u9593\u8868\u73fe\u306e\u51fa\u529b\u3001compiler.erl\u3067\u30d0\u30a4\u30ca\u30ea\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\n###\u5b57\u53e5\u89e3\u6790\u5668\n-------------------\nErlang\u306b\u306fleex\u3068\u3044\u3046\u5b57\u53e5\u89e3\u6790\u5668\u304c\u3042\u308a\u307e\u3059\u3002\nhttp://erlang.org/doc/man/leex.html\n\u985e\u4f3c\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u4eba\u306a\u3089\u5206\u304b\u308b\u3067\u3057\u3087\u3046\u3051\u3069\u3001Definitions\u3001Rules\u3001Erlang code\u306b\u5206\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nDefinitions\u306frule\u3067\u4ed5\u69d8\u3055\u308c\u308b\u6b63\u898f\u8868\u73fe\u306e\u5b9a\u7fa9\u3092\u884c\u3044\u307e\u3059\u3002\n[\u4eca\u56de\u306f\u3053\u306e\u7b87\u6240](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang.xrl#L1-L7)\u306b\u8a72\u5f53\u3057\u307e\u3059\u3002\n\n````\nINT        = [0-9]+\nATOM       = :[a-z_]+\nVAR        = [a-z0-9_]+\nCHAR       = [a-z0-9_]\nWHITESPACE = [\\s\\t\\n\\r]\n````\n\nRules\u306f\u751f\u6210\u3059\u308b\u30c8\u30fc\u30af\u30f3\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\nErlang code\u306fRules\u3067\u4ed5\u69d8\u3055\u308c\u308bErlang\u306e\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n[\u4eca\u56de\u306f\u3053\u306e\u90e8\u5206](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang.xrl#L9-L62)\u306b\u8a72\u5f53\u3057\u307e\u3059\u3002\n\n````\nmodule  : {token,{module,TokenLine}}.\n````\n\n\u306e\u3088\u3046\u306b\n\n```\n\u30de\u30c3\u30c1\u3059\u308b\u5b57\u53e5 : {\u751f\u6210\u3059\u308b\u30c8\u30fc\u30af\u30f3}\n````\n\n\u3068\u3044\u3046\u98a8\u306b\u66f8\u304d\u307e\u3059\u3002\n\n````\n{token,{\u3044\u308d\u3044\u308d,\u884c\u6570}}.\n````\n\n\u3068\u3044\u3046\u98a8\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\nDefinitions\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u5b9a\u7fa9\u3092\u4ed5\u69d8\u3059\u308b\u306b\u306f\n[\u3068\u3044\u3046\u98a8\u306bINT\u306a\u3089{INT}\u3068{}\u3067\u56f2\u3080\u5fc5\u8981](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang.xrl#L45\n)\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n\u4eca\u56de\u306e\u5834\u5408\u306f\u3053\u3053\u306e\n[to_atom\u95a2\u6570](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang.xrl#L69)\u306b\u8a72\u5f53\u3057\u307e\u3059\u3002\n[\u3053\u306e\u69d8\u306b](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang.xrl#L14)Rules\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u3053\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang.xrl\n\n###\u69cb\u6587\u89e3\u6790\u5668\n-------------\n\u540c\u3058\u3088\u3046\u306bErlang\u306b\u306fyecc\u3068\u3044\u3046\u69cb\u6587\u89e3\u6790\u5668\u304c\u3042\u308a\u307e\u3059\u3002\nhttp://erlang.org/doc/man/yecc.html\nyecc\u306fErlang\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30b3\u30f3\u30d1\u30a4\u30e9\u3067BNF\u3067\u6587\u6cd5\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n[\u3061\u306a\u307f\u306bErlang\u306e\u30d1\u30fc\u30b5\u3082yecc\u306b\u3088\u3063\u3066\u66f8\u304b\u308c\u3066\u3044\u307e\u3059](https://github.com/blackberry/Erlang-OTP/blob/master/lib/stdlib/src/erl_parse.yrl)\u3002\n\n\nyecc\u306fNonterminals\u3001Terminals\u3001\u898f\u5247\u90e8\u3001Erlang code\u306b\u5225\u308c\u3066\u3044\u307e\u3059\u3002\n[Nonterminals\u306f\u975e\u7d42\u7aef\u8a18\u53f7\u306e\u96c6\u5408\u306e\u5ba3\u8a00\u3092\u884c\u3044\u307e\u3059](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L1)\u3002\n\n[Terminals\u306f\u7d42\u7aef\u8a18\u53f7\u306e\u5ba3\u8a00\u3092\u884c\u3044\u307e\u3059](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L3)\u3002\n\n\n\u898f\u5247\u90e8\u306fRootSymbol\u3092\u958b\u59cb\u8a18\u53f7\u3068\u3059\u308b\u7c21\u7d04\u898f\u5247\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002RootSymbol\u304c\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L6\n\n\u898f\u5247\u90e8\u306f\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L9-L13\n\n````\nprogram ->\n    module_exp: [ '$1' ].\n\nprogram ->\n    module_exp exps: [ '$1' | '$2' ].\n````\n\n\u306e\u3088\u3046\u306b \n\u975e\u7d42\u7aef\u8a18\u53f7 -> \u3000\u30eb\u30fc\u30eb : \u30a2\u30af\u30b7\u30e7\u30f3\n\u3068\u3044\u3046\u98a8\u306b\u304b\u304d\u307e\u3059\u3002'$1'\u306f\u5f15\u6570\u3067\u3059\u3002\u57fa\u672c\u7684\u306b\u306flex/flex\u3068\u4e00\u7dd2\u3067\u3059\u3002\u975e\u7d42\u7aef\u8a18\u53f7\u306b\u8907\u6570\u306e\u30eb\u30fc\u30eb\u304c\u3042\u308b\u5834\u5408\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306b\u8907\u6570\u66f8\u304d\u307e\u3059\u3002\n\n[\u4eca\u56de\u4f5c\u6210\u3057\u305f\u898f\u5247\u90e8](https://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L9-L160)\n\u4eca\u56de\u4f5c\u6210\u3059\u308byecc\u306f\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u4f5c\u6210\u3059\u308b\u4e2d\u9593\u8868\u73fe\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u4e2d\u9593\u8868\u73fe\u306e\u8a73\u7d30\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002\n\nErlang code\u306f\n\u898f\u5247\u90e8\u3067\u4f7f\u7528\u3059\u308bErlang\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002leex\u3068\u540c\u3058\u3067\u3059\u3002\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl#L163-L174\n\n\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u305fyecc\u306e\u5168\u4f53\u306f\u3053\u3061\u3089\u3067\u3059\u3002\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/ulang_yecc.yrl\n\n\n\n###\u4e2d\u9593\u8868\u73fe\nerl_syntax\u3068\u3044\u3046\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u4e2d\u9593\u8868\u73fe\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30c4\u30ea\u30fc\u3092\u7d44\u307f\u7acb\u3066\u308b\u305f\u3081\u306eAPI\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001\nhttp://erlang.org/doc/man/erl_syntax.html\n\u4eca\u56de\u30b3\u30ec\u306f\u4f7f\u7528\u305b\u305a\u306b\u81ea\u5206\u3067\u7d44\u307f\u7acb\u3066\u308b\u4e8b\u306b\u3057\u307e\u3059\u3002\n[\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb](https://gist.github.com/oskimura/7386c37260528bf208b1)\u3067Erlang\u30d7\u30ed\u30b0\u30e9\u30e0\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u9593\u8868\u73fe\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306f\u30b3\u30ec\u3092\u4f7f\u3063\u3066\u4e2d\u9593\u8868\u73fe\u3092\u89e3\u6790\u3057\u3066\u4e2d\u9593\u8868\u73fe\u3092\u7d44\u307f\u7acb\u3066\u307e\u3059\u3002\n\n\n\n\n###compile\u30e2\u30b8\u30e5\u30fc\u30eb\n\u751f\u6210\u3055\u308c\u305f\u4e2d\u9593\u8868\u73fe\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30d0\u30a4\u30ca\u30ea\u3092\u51fa\u529b\u3059\u308b\u306e\u306fcompile\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u304a\u3053\u306a\u3044\u307e\u3059\u3002\u3000\nhttp://www.erlang.org/doc/man/compile.html\n\n\u4eca\u56de\u306fnoenv_forms\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3066[\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3057\u305f](https://github.com/oskimura/ulang/blob/master/ulang/src/compiler.erl#L13-L14)\u3002\n\n````\ncompile:noenv_forms(Spec,[return]) of\n {ok,Module,Binary,Wornings} ->\nend\n````\n\ncompile:noenv_forms\u306e\u7b2c\u4e00\u5f15\u6570\u306f\u30d0\u30a4\u30ca\u30ea\u5909\u63db\u3057\u305f\u3044\u4e2d\u9593\u8868\u73fe\u3001\u7b2c\u4e8c\u5f15\u6570\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u6210\u529f\u3057\u305f\u5834\u5408\u306f{ok,Module,Binary,Wornings}\u3068\u3044\u3046\u30bf\u30d7\u30eb\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\nModule\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u3001Binary\u306f\u5909\u63db\u30d0\u30a4\u30ca\u30ea\u3001Worning\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306e\u8b66\u544a\u3067\u3059\u3002\n\nhttps://github.com/oskimura/ulang/blob/master/ulang/src/compiler.erl\n\n\n###\u4e2d\u9593\u8868\u73fe\u306b\u3064\u3044\u3066\n---------------------\n\u4e2d\u9593\u8868\u73fe\u306f\u57fa\u672c\u7684\u306b\u30bf\u30d7\u30eb\u3067\u8868\u73fe\u3055\u308c\u3001{\u30bf\u30b0\u540d,\u30bd\u30fc\u30b9\u884c\u6570,\u5f15\u65701,\u5f15\u65702,...}\u3068\u3044\u3063\u305f\u5f62\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u30bf\u30b0\u306e\u30ea\u30b9\u30c8\u304c\u4e2d\u9593\u8868\u73fe\u3067\u3059\u3002compile\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u95a2\u6570\u306b\u6e21\u3059\u3053\u3068\u3067\u30d0\u30a4\u30ca\u30ea\u3078\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u307e\u3059\u3002\n[\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0](https://gist.github.com/oskimura/e5b58a789e74be75c60c)\u3092\u4f8b\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nEralang\u306e\u6587\u6cd5\u306b\u304b\u3093\u3057\u3066\u306f[\u30b3\u30b3](http://erlang.org/doc/reference_manual/expressions.html)\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3067\u306f\u4e2d\u9593\u8868\u73fe\u306e\u8aac\u660e\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n####module\u5ba3\u8a00\n\n````\n-module(sample).\n````\n\n\u3068\u3044\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u5ba3\u8a00\u306f\n\n````\n{attribute,1,module,sample},\n````\n\n\u3068\u306a\u308a\u307e\u3059\n\n````\nmodule := {attribute,Line,module,ModuleName},\n````\n\nLine\u306f\u884c\u6570\u3001ModuleName\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u3068\u306a\u308a\u307e\u3059\u3002\nattribute\u3068\u3044\u3046\u30bf\u30b0\u306f\u5f8c\u8ff0\u3059\u308bexport\u306a\u3069module\u306e\u7b87\u6240\u3092\u5909\u3048\u3066\u4f7f\u308f\u308c\u307e\u3059\u3002\nModuleName\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u540d\u524d\u3067\u3059\u4eca\u56de\u306fsample\u3067\u3059\u3002\n\n####export\u5ba3\u8a00\n\n````\n-export([func1/0]).\n````\n\n\u3068\u3044\u3046export\u5ba3\u8a00\u306f\n\n````\n{attribute,2,export,[{func1,0}]},\n````\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\nexport := {attribute,Line,export,[{f1,Arg},...]},\n````\n\nexport\u306e\u5f8c\u306b\u95a2\u6570\u306e\u30ea\u30b9\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002{\u5909\u6570\u540d,\u95a2\u6570\u306e\u6570}\u306e\u30ea\u30b9\u30c8\u3068\u3044\u3046\u5f62\u3067\u8868\u73fe\u3055\u308c\u307e\u3059\u3002\n\n\n####\u95a2\u6570\u5ba3\u8a00\n\n````\nfunc1 () ->\n    ok.\n````    \n\n\u3068\u3044\u3046\u95a2\u6570\u5ba3\u8a00\u306f\n\n````\n{function,3,func1,0,[{clause,3,[],[],[{atom,4,ok}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\nfunction := {function, Line, FunctionName, ArgNumber [Clause1,...]}\n````\n\nLine\u306f\u884c\u6570\u3001FunctionName\u306f\u95a2\u6570\u540d\u3001ArgNumber\u306f\u5f15\u6570\u306e\u6570\u3001Clause\u306e\u30ea\u30b9\u30c8\u306f\u95a2\u6570\u306e\u672c\u4f53\u3067\u3059\u3002\n\u306a\u305c\u30ea\u30b9\u30c8\u306a\u306e\u304b\u3068\u3044\u3046\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u5834\u5408\n\n````\nfunc2([]) ->\n    ok;\nfunc2(X) ->\n    ok.\n````\n\n\u5f15\u6570\u306e\u30de\u30c3\u30c1\u30f3\u30b0\u306b\u3088\u3063\u3066\u8907\u6570\u306e\u672c\u4f53\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u3053\u306eClause\u306fcase hoge of\uff5e\u5f62\u5f0f\u306e\u30d1\u30bf\u30f3\u30de\u30c3\u30c1\u306e\u4e2d\u9593\u8868\u73fe\u3068\u5171\u901a\u306e\u5f62\u5f0f\u3067\u3059\u3002\n\n````\nclause := {clause,Line,[Args],[TestFuncs],[Bodys]}\n````\n\nLine\u306f\u884c\u6570\u3001Args\u306e\u30ea\u30b9\u30c8\u306f\u4eee\u5f15\u6570\u3001TestFunc\u306e\u30ea\u30b9\u30c8\u306f\u30ac\u30fc\u30c9\u7bc0\u3001Bodys\u306e\u30ea\u30b9\u30c8\u306f\u95a2\u6570\u672c\u4f53\u3067\u3059\u3002\n\u30ac\u30fc\u30c9\u7bc0\u306f\n\n````\nfunc3(X)  when is_atom(X)  ->\n    X.\n````\n\n\u306ewhen\u4ee5\u964d\u3067\u5f15\u6570\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\u7b87\u6240\u3067\u3059\u3002\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u95a2\u6570\u306e\u5834\u5408\n\n````\n{function,10,func3,1,[{clause,10,[{var,10,'X'}],[[{call,10,{atom,10,is_atom},[{var,10,'X'}]}]],[{var,11,'X'}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n\n####\u6587\u5b57\u5217\n````\nstring_fun() ->\n    \"abc\".\n````\n\n\u306f\n\n````\n{function,15,string_fun,0,[{clause,15,[],[],[{string,16,\"abc\"}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\n{string,Line,Str}\n````\n\nStr\u306f\u6587\u5b57\u5217\u3067\u3059\n\n####\u6587\u5b57\n\n````\nchar_fun() ->\n    $a.\n````\n\n\u306f\n\n````\n{function,18,char_fun,0,[{clause,18,[],[],[{char,19,97}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\n{char,Line,Char}\n````\n\nChar\u306f\u6587\u5b57\u306eASCII\u30b3\u30fc\u30c9\u3067\u3059\n####\u6574\u6570\n\n````\ninteger_fun() ->\n    1.\n````\n\n\u306f\n\n````\n{function,21,integer_fun,0,[{clause,21,[],[],[{integer,22,1}]}]\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\n{integer,Line,Num}\n````\n\nNum\u306f\u6570\u5b57\u3067\u3059\n####\u6f14\u7b97\u5b50\n````\nop_fun() ->\n    1+1.\n````\n\n\u306f\n\n````\n{function,24,op_fun,0,[{clause,24,[],[],[{op,25,'+',{integer,25,1},{integer,25,1}}]}]}\n````\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\n{op,Line, Op,LVal,RVal}\n````\n\nOp\u306f\u6f14\u7b97\u5b50\u3067\u3059\u3002LVal\u3068RVal\u306f\u305d\u308c\u305e\u308c\u6f14\u7b97\u5b50\u306e\u5de6\u8fba\u3068\u53f3\u8fba\u3067\u3059\u3002\n         \n####\u95a2\u6570\u547c\u3073\u51fa\u3057\ncall\u3067\u547c\u3076\u3053\u3068\u304c\u3067\u304d\u308b\u95a2\u6570\u306f\u540c\u3058\u30e2\u30b8\u30e5\u30fc\u30eb\u5185\u306e\u95a2\u6570\u306b\u9650\u3089\u308c\u308b\u3002\u4ed6\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5ba3\u8a00\u3057\u3066\u3042\u308b\u95a2\u6570\u306f \u5f8c\u8ff0\u3059\u308bremote call\u3067\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n````\ncall_fun() ->\n    func1().\n````\n\n\u3068\u3044\u3046\u95a2\u6570\u306f\n\n````\n{function,13,call_fun,0,[{clause,13,[],[],[{call,14,{atom,14,func1},[]}]}]},\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\ncall := {call,Line,{atom,Line,FunctionName},Args},\nvar := {var,Line,VarNme}\n````\n\nLine\u306f\u884c\u6570\u3001FunctionName\u306f\u95a2\u6570\u540d\u3001Args\u306f\u5f15\u6570\u306e\u30ea\u30b9\u30c8\u3067\u3059\u3002\n\n####\u95a2\u6570\u547c\u3073\u51fa\u3057\n\u4ed6\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5ba3\u8a00\u3055\u308c\u305f\u95a2\u6570\u306fremote call\u3067\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n````\nremote_call_fun() ->\n    io:format(\"test\").\n````\n\n\u3068\u3044\u3046\u95a2\u6570\u306f\n\n````\n{function,16,remote_call_fun,0,[{clause,16,[],[],[{call,17,{remote,17,{atom,17,io},{atom,17,format}},[{string,17,\"test\"}]}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n\n````\nremotecall :={call,Line,{remote,Line,{atom,Line,ModuleName},{atom,Line,FunctionName}},Args}\nArgs := {var,Line,VarNme}\n````\n\nremote\u304c\u5165\u308b\u4ee5\u5916\u306fcall\u3068\u540c\u3058\u3067\u3059\u3002\n\n\n####\u30d1\u30bf\u30f3\u30de\u30c3\u30c1\n\u30d1\u30bf\u30f3\u30de\u30c3\u30c1\u3067\u3059\n\n````\nmatch_fun(X) ->\n    case X of\n        a ->\n            a;\n        b ->\n            b\n````\n\n\u3068\u3044\u3046\u95a2\u6570\u304c\n\n````\n{function,19,match_fun,1,[{clause,19,[{var,19,'X'}],[],[{case,20,{var,20,'X'},[{clause,21,[{atom,21,a}],[],[{atom,22,a}]},{clause,23,[{atom,23,b}],[],[{atom,24,b}]}]}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\ncase := {'case', Line, MatchExp, [Clause1,...]}\nmatchexp := {clause, Line, Match, Test, Bodys}\n````\n\nMatchExp\u306f\u4e0a\u306e\u30bd\u30fc\u30b9\u3067\u3044\u3046case\u3068of\u306e\u9593\u306e\u5f0f\u306b\u3042\u305f\u308a\u307e\u3059Clause\u306e\n\n####\u4ee3\u5165\n\u5358\u4e00\u4ee3\u5165\u3067\u3059\u3002\n\n````\nbind_fun() ->\n    X = 1.\n````\n\n\u306f    \n\n````\n{function,29,bind_fun,0,[{clause,29,[],[],[{match,30,{var,30,'X'},{integer,30,1}}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n````\n{match,Line,Var,Val}\n````\n\nVar\u306bVal\u3092\u4ee3\u5165\u3057\u307e\u3059\u3002\n\n````\n{var,Line,Var}\n````\n\n\u306f\u5909\u6570\u3067\u3059\u3002Var\u306f\u5909\u6570\u540d\u3067\u3059\u3002\n\n````\n{integer,Line,Val}\n````\n\n\u306f\u6574\u6570\u3067\u3059\u3002Val\u306f\u8a2d\u5b9a\u3059\u308b\u6574\u6570\u3067\u3059\u3002\n\n####\u30ea\u30b9\u30c8\n\n````\nlist_fun() ->\n    [1,2,3,4].\n```\n\n\u3068\u3044\u3046\u95a2\u6570\u306f\n\n````\n{function,27,list_fun,0,[{clause,27,[],[],[{cons,28,{integer,28,1},{cons,28,{integer,28,2},{cons,28,{integer,28,3},{cons,28,{integer,28,4},{nil,28}}}}}]}]}\n````\n\n\u3068\u5909\u63db\u3055\u308c\u307e\u3059\u3002 \n\n````\n{cons, Line, {Elent1,{Element2, Line,... {nil,Line}}\n````\n\nElement1,Element2\u306f\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u3067\u3059\u3002cons\u306f\u5165\u308c\u5b50\u69cb\u9020\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\n---------------------------\n\u4e0a\u8a18\u306e\u60c5\u5831\u304c\u3042\u308c\u3070BEAM\u3067\u52d5\u304f\u51e6\u7406\u7cfb\u304c\u4f5c\u308c\u308b\u3068\u304a\u3082\u3044\u307e\u3059\u3002\u4e2d\u9593\u8868\u73fe\u306e\u4ed6\u306e\u6587\u6cd5\u7b49\u306b\u3064\u3044\u3066\u306f\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u3088\u3046\n", "tags": ["Erlang"]}