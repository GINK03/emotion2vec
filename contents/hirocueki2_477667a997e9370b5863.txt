{"context": "\u30c6\u30fc\u30d6\u30eb\u6570\u304c\u5897\u3048\u3066\u304f\u308b\u3068\u3001\u30c7\u30fc\u30bf\u3092\u4e00\u6c17\u306b\u6d88\u3057\u305f\u3044\u3068\u304d\u304c\u7d50\u69cb\u624b\u9593\u3067\u3059\u3002\n\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u3064\u304b\u3046\u3068\u3001\u30d0\u30c3\u30c1\u51e6\u7406\u306aSQL\u304c\u767a\u884c\u3067\u304d\u3066\u6357\u308a\u307e\u3059\u3002\nO/R\u30de\u30c3\u30d1\u30fc\u3067\u306f\u306a\u304f\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3067\uff01 - Qiita\n\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\u8ffd\u8a18\uff1a\u30b3\u30e1\u30f3\u30c8\u306b\u3066\u524a\u9664\u6642\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304cTRUNCATE TABLE\uff08\u30c6\u30fc\u30d6\u30eb\u306e\u524a\u9664\u3001\u518d\u69cb\u7bc9\uff09\u306e\u307b\u3046\u304c\u826f\u3044\u3068\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u306e\u3067\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u3092\u5168\u524a\u9664\uff08TRUNCATE TABLE\u7248\uff09\n\nDROP PROCEDURE IF EXISTS TABLES_RESET;\n\nDELIMITER $$\n/* TABLES_RESET\n * \u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092\u3059\u3079\u3066\u524a\u9664\u3059\u308b\n */\nCREATE PROCEDURE TABLES_RESET\n    ()\nBEGIN\n    SET FOREIGN_KEY_CHECKS = 0;\n    TRUNCATE TABLE Address;\n    TRUNCATE TABLE Phone;\n    TRUNCATE TABLE Email;\n    TRUNCATE TABLE Note;\n    TRUNCATE TABLE Contact;\n    TRUNCATE TABLE User;\n    SET FOREIGN_KEY_CHECKS = 1;\n    SELECT 0 AS errid, 1 AS row_count, '\u6b63\u5e38\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002' AS msg;\nEnd\n$$\nDELIMITER ;\n\nUser(code),Contact(id)\u7b49\u306e\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u304c\u3042\u308b\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3057\u3066TRUNCATE TABLE\u306f\u5931\u6557\u3092\u8fd4\u3059\u305f\u3081\u3001SET FOREIGN_KEY_CHECKS\u306b\u3088\u3063\u3066\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u30c1\u30a7\u30c3\u30af\u3092\u7121\u52b9\u5316\u3057\u305f\u3046\u3048\u3067\u524a\u9664\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\uff08\u7121\u52b9\u5316\u3059\u308b\u306e\u306f\u771f\u3063\u5f53\u306a\u65b9\u6cd5\u306a\u306e\u3060\u308d\u3046\u304b\uff1f\uff09\nMySQL :: MySQL 5.6 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30de\u30cb\u30e5\u30a2\u30eb :: 13.1.33 TRUNCATE TABLE \u69cb\u6587\n\n\u30c7\u30fc\u30bf\u3092\u5168\u524a\u9664\uff08DELETE FROM\u7248\uff09\n\nDROP PROCEDURE IF EXISTS TABLES_RESET;\n\nDELIMITER $$\n\nCREATE PROCEDURE TABLES_RESET()\nBEGIN\n    DELETE FROM Address;\n    DELETE FROM Phone;\n    DELETE FROM Email;\n    DELETE FROM Note;\n    DELETE FROM Contact;\n    DELETE FROM User;\n    SELECT 0 AS errid, 1 AS row_count, '\u6b63\u5e38\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002' AS msg;\nEnd\n$$\nDELIMITER ;\n\n\n\u524a\u9664\u306e\u5b9f\u884c\n\n\u78ba\u8a8d\u306a\u3057\u3067\u5168\u524a\u9664\u3055\u308c\u308b\u306e\u3067\u6c17\u3092\u3064\u3051\u3066\uff01\nCALL TABLES_RESET();\n\n\n\n\u30c6\u30fc\u30d6\u30eb\u30c7\u30fc\u30bf\u306e\u524a\u9664\u9806\u306b\u3064\u3044\u3066\n\u4eca\u56de\u306e\u4f8b\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u30b7\u30c3\u30d7\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\uff08DB\u521d\u7d1a\u8005\u306e\u305f\u3081\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8cbc\u308a\u65b9\u3068\u304b\u3001\u540d\u524d\u3068\u304b\u9593\u9055\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u30b3\u30e1\u30f3\u30c8\u3001\u3054\u6307\u6458\u7b49\u3001\u6b53\u8fce\u3067\u3059\uff01\uff09\n\nContact\u306f\u3001User(code)\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u8cbc\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3044\u304d\u306a\u308aUser\u30c6\u30fc\u30d6\u30eb\u306f\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u308c\u3068\u540c\u69d8\u306b\u3001Address\u3082\u3001Contact(id)\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u8cbc\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3067\u306e\u30c7\u30fc\u30bf\u306e\u524a\u9664\u9806\u3082\u5b50\u2192\u89aa\u3068\u306a\u308b\u3088\u3046\u306b\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\nER\u56f3\u4f5c\u6210\u30c4\u30fc\u30eb\nER\u56f3\u306e\u4f5c\u6210\u306fA5:SQL Mk-2 - \u30d5\u30ea\u30fc\u306e\u6c4e\u7528SQL\u958b\u767a\u30c4\u30fc\u30eb/ER\u56f3\u30c4\u30fc\u30eb\u3067\u304a\u3053\u306a\u3044\u307e\u3057\u305f\u3002\u3059\u3070\u3089\u3057\u3044\u3067\u3059\u3002\n\u30c6\u30fc\u30d6\u30eb\u6570\u304c\u5897\u3048\u3066\u304f\u308b\u3068\u3001\u30c7\u30fc\u30bf\u3092\u4e00\u6c17\u306b\u6d88\u3057\u305f\u3044\u3068\u304d\u304c\u7d50\u69cb\u624b\u9593\u3067\u3059\u3002\n\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u3064\u304b\u3046\u3068\u3001\u30d0\u30c3\u30c1\u51e6\u7406\u306aSQL\u304c\u767a\u884c\u3067\u304d\u3066\u6357\u308a\u307e\u3059\u3002\n\n<a href=\"http://qiita.com/kantomi/items/5c432ce13fd1aff263eb\" target=\"_blank\">O/R\u30de\u30c3\u30d1\u30fc\u3067\u306f\u306a\u304f\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3067\uff01 - Qiita</a>\n\n\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n\u8ffd\u8a18\uff1a\u30b3\u30e1\u30f3\u30c8\u306b\u3066\u524a\u9664\u6642\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c`TRUNCATE TABLE`\uff08\u30c6\u30fc\u30d6\u30eb\u306e\u524a\u9664\u3001\u518d\u69cb\u7bc9\uff09\u306e\u307b\u3046\u304c\u826f\u3044\u3068\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u306e\u3067\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n## \u30c7\u30fc\u30bf\u3092\u5168\u524a\u9664\uff08TRUNCATE TABLE\u7248\uff09\n\n\n```sql\n\nDROP PROCEDURE IF EXISTS TABLES_RESET;\n\nDELIMITER $$\n/* TABLES_RESET\n * \u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092\u3059\u3079\u3066\u524a\u9664\u3059\u308b\n */\nCREATE PROCEDURE TABLES_RESET\n    ()\nBEGIN\n    SET FOREIGN_KEY_CHECKS = 0;\n    TRUNCATE TABLE Address;\n    TRUNCATE TABLE Phone;\n    TRUNCATE TABLE Email;\n    TRUNCATE TABLE Note;\n    TRUNCATE TABLE Contact;\n    TRUNCATE TABLE User;\n    SET FOREIGN_KEY_CHECKS = 1;\n    SELECT 0 AS errid, 1 AS row_count, '\u6b63\u5e38\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002' AS msg;\nEnd\n$$\nDELIMITER ;\n```\n\n\n`User(code)`,`Contact(id)`\u7b49\u306e\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u304c\u3042\u308b\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3057\u3066`TRUNCATE TABLE`\u306f\u5931\u6557\u3092\u8fd4\u3059\u305f\u3081\u3001`SET FOREIGN_KEY_CHECKS`\u306b\u3088\u3063\u3066\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u30c1\u30a7\u30c3\u30af\u3092\u7121\u52b9\u5316\u3057\u305f\u3046\u3048\u3067\u524a\u9664\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\uff08\u7121\u52b9\u5316\u3059\u308b\u306e\u306f\u771f\u3063\u5f53\u306a\u65b9\u6cd5\u306a\u306e\u3060\u308d\u3046\u304b\uff1f\uff09\n\n<a href=\"https://dev.mysql.com/doc/refman/5.6/ja/truncate-table.html\" target=\"_blank\">MySQL :: MySQL 5.6 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30de\u30cb\u30e5\u30a2\u30eb :: 13.1.33 TRUNCATE TABLE \u69cb\u6587</a>\n\n## \u30c7\u30fc\u30bf\u3092\u5168\u524a\u9664\uff08DELETE FROM\u7248\uff09\n\n```sql\n\nDROP PROCEDURE IF EXISTS TABLES_RESET;\n\nDELIMITER $$\n\nCREATE PROCEDURE TABLES_RESET()\nBEGIN\n    DELETE FROM Address;\n    DELETE FROM Phone;\n    DELETE FROM Email;\n    DELETE FROM Note;\n    DELETE FROM Contact;\n    DELETE FROM User;\n    SELECT 0 AS errid, 1 AS row_count, '\u6b63\u5e38\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002' AS msg;\nEnd\n$$\nDELIMITER ;\n```\n\n## \u524a\u9664\u306e\u5b9f\u884c\n\n```sql:\u78ba\u8a8d\u306a\u3057\u3067\u5168\u524a\u9664\u3055\u308c\u308b\u306e\u3067\u6c17\u3092\u3064\u3051\u3066\uff01\nCALL TABLES_RESET();\n```\n\n## \u30c6\u30fc\u30d6\u30eb\u30c7\u30fc\u30bf\u306e\u524a\u9664\u9806\u306b\u3064\u3044\u3066\n\n\u4eca\u56de\u306e\u4f8b\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u30b7\u30c3\u30d7\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\uff08DB\u521d\u7d1a\u8005\u306e\u305f\u3081\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8cbc\u308a\u65b9\u3068\u304b\u3001\u540d\u524d\u3068\u304b\u9593\u9055\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u30b3\u30e1\u30f3\u30c8\u3001\u3054\u6307\u6458\u7b49\u3001\u6b53\u8fce\u3067\u3059\uff01\uff09\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/2883/908bbd5c-04b7-7946-b93f-7ce7c176ac55.png)\n\n`Contact`\u306f\u3001`User(code)`\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u8cbc\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3044\u304d\u306a\u308a`User`\u30c6\u30fc\u30d6\u30eb\u306f\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u308c\u3068\u540c\u69d8\u306b\u3001`Address`\u3082\u3001`Contact(id)`\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u8cbc\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3067\u306e\u30c7\u30fc\u30bf\u306e\u524a\u9664\u9806\u3082\u5b50\u2192\u89aa\u3068\u306a\u308b\u3088\u3046\u306b\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\n## ER\u56f3\u4f5c\u6210\u30c4\u30fc\u30eb\n\nER\u56f3\u306e\u4f5c\u6210\u306f<a href=\"http://a5m2.mmatsubara.com/\" target=\"_blank\">A5:SQL Mk-2 - \u30d5\u30ea\u30fc\u306e\u6c4e\u7528SQL\u958b\u767a\u30c4\u30fc\u30eb/ER\u56f3\u30c4\u30fc\u30eb</a>\u3067\u304a\u3053\u306a\u3044\u307e\u3057\u305f\u3002\u3059\u3070\u3089\u3057\u3044\u3067\u3059\u3002\n\n", "tags": ["SQL", "MySQL", "DB"]}