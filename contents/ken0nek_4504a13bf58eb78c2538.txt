{"tags": ["Swift", "iPhone", "Xcode6.1", "iOS8.1", "\u9854\u8a8d\u8b58"], "context": "\n\nSwift\u3067\u7b11\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\niOS7\u304b\u3089Apple\u516c\u5f0fAPI\u3067\u9854\u8a8d\u8b58\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001Swift\u3067\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u8ffd\u8a18\nSwift2\u306bupdate\u3057\u307e\u3057\u305f\u3002\nSwift3\u306bupdate\u3057\u307e\u3057\u305f\u3002\uff082016/09/28\uff09\n\n\u30b3\u30fc\u30c9\n\nguard let image = self.sampleImageView.image, let cgImage = image.cgImage else {\n    return\n}\n\n// storyboard\u306b\u7f6e\u3044\u305fimageView\u304b\u3089CIImage\u3092\u751f\u6210\u3059\u308b\nlet ciImage = CIImage(cgImage: cgImage)\n\n// \u9854\u8a8d\u8b58\u306a\u306e\u3067Type\u3092CIDetectorTypeFace\u306b\u6307\u5b9a\u3059\u308b\nlet detector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: [CIDetectorAccuracy: CIDetectorAccuracyHigh])\n\n// \u53d6\u5f97\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u6307\u5b9a\u3059\u308b\nlet options = [CIDetectorSmile : true, CIDetectorEyeBlink : true]\n\n// \u753b\u50cf\u304b\u3089\u7279\u5fb4\u3092\u62bd\u51fa\u3059\u308b\nlet features = detector.featuresInImage(ciImage, options: options)\n\nvar resultString = \"DETECTED FACES:\\n\\n\"\n\nfor feature in features as! [CIFaceFeature] {\n    resultString.append(\"bounds: \\(NSStringFromCGRect(feature.bounds))\\n\")\n    resultString.append(\"hasSmile: \\(feature.hasSmile ? \"YES\" : \"NO\")\\n\")\n\n    resultString.append(\"\\n\")\n}\n\n\n\n\u5b9f\u884c\u753b\u9762\n\n\nCIFaceFeature\u306b\u3064\u3044\u3066\nCIFaceFeature\u3067\u53d6\u5f97\u3067\u304d\u308b\u3082\u306e\n\u4e3b\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u3060\u3068\u3001\u4ee5\u4e0b\u306e\u3082\u306e\u306a\u3069\u304c\u3042\u308a\u307e\u3059\n\n\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\n\u578b\n\u8aac\u660e\n\n\n\n\nbounds\nCGRect\n\u753b\u50cf\u5185\u3067\u306e\u9854\u306e\u5ea7\u6a19\u3068\u5927\u304d\u3055\n\n\nhasSmile\nBool\n\u7b11\u9854\u304b\u3069\u3046\u304b\n\n\nfaceAngle\nFloat\n\u9854\u306e\u50be\u304d\n\n\nleftEyePosition\nCGPoint\n\u5de6\u76ee\u306e\u4f4d\u7f6e\n\n\nrightEyePosition\nCGPoint\n\u53f3\u76ee\u306e\u4f4d\u7f6e\n\n\nmouthPosition\nCGPoint\n\u53e3\u306e\u4f4d\u7f6e\n\n\n\n\u4ed6\u306b\u3082\u3001leftEyeClosed\u3084rightEyeClosed\u306a\u3069\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u3042\u308b\u306e\u3067\u3001\u30a6\u30a3\u30f3\u30af\u3067\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\u3053\u3068\u3082\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001CIFaceFeature\u3067\u306eright, left\u306f\u753b\u50cf\u5185\u3067\u306e\u5de6\u53f3\u3067\u3042\u3063\u3066\u3001\n\u93e1\u6620\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u4eba\u7269\u306e\u5de6\u76ee\u30fb\u53f3\u76ee\u3068\u306f\u4e00\u81f4\u3057\u306a\u3044\u306e\u3067\u3001\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u201cRight\u201d/\"Left\" is relative to the original (non-mirrored) image orientation, not to the owner of the eye.\n\n\nCIDetector\u306b\u3064\u3044\u3066\n\u4eca\u56de\u306f\u3001CIDetector\u3092\u9854\u8a8d\u8b58\u306b\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001\u4ed6\u306e\u5bfe\u8c61\u7269\u306e\u8a8d\u8b58\u306b\u3082\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n\ndetectorOfType\n\u8aac\u660e\n\n\n\n\nCIDetectorTypeFace\n\u9854\u8a8d\u8b58 ( face recognition )\n\n\nCIDetectorTypeRectangle\n\u77e9\u5f62\u8a8d\u8b58 ( rectangle detection )\n\n\nCIDetectorTypeQRCode\nQR\u30b3\u30fc\u30c9\u8a8d\u8b58 ( barcode detection )\n\n\nCIDetectorTypeText\n\u6587\u5b57\u8a8d\u8b58 ( text detection )\n\n\n\n\n\u53c2\u8003\n@shu223\u3055\u3093\nhttps://github.com/shu223/iOS7-Sampler/blob/master/iOS7Sampler/SampleViewControllers/SmileDetectionViewController.m\nObjective-C\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\u3001Apple\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\nhttps://developer.apple.com/library/IOs/samplecode/SquareCam/Introduction/Intro.html\n\u5199\u771f\u306f\u3053\u3061\u3089\u304b\u3089\nhttp://www.ashinari.com/2012/02/06-357198.php?category=265\n\n# Swift\u3067\u7b11\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30b3\u30fc\u30c9\u306f[\u3053\u3061\u3089](https://github.com/ken0nek/SmileSwift)\niOS7\u304b\u3089Apple\u516c\u5f0fAPI\u3067\u9854\u8a8d\u8b58\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001Swift\u3067\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u8ffd\u8a18\n~~Swift2\u306bupdate\u3057\u307e\u3057\u305f\u3002~~\nSwift3\u306bupdate\u3057\u307e\u3057\u305f\u3002\uff082016/09/28\uff09\n\n# \u30b3\u30fc\u30c9\n\n```swift\n\nguard let image = self.sampleImageView.image, let cgImage = image.cgImage else {\n    return\n}\n\n// storyboard\u306b\u7f6e\u3044\u305fimageView\u304b\u3089CIImage\u3092\u751f\u6210\u3059\u308b\nlet ciImage = CIImage(cgImage: cgImage)\n\n// \u9854\u8a8d\u8b58\u306a\u306e\u3067Type\u3092CIDetectorTypeFace\u306b\u6307\u5b9a\u3059\u308b\nlet detector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: [CIDetectorAccuracy: CIDetectorAccuracyHigh])\n\n// \u53d6\u5f97\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u6307\u5b9a\u3059\u308b\nlet options = [CIDetectorSmile : true, CIDetectorEyeBlink : true]\n\n// \u753b\u50cf\u304b\u3089\u7279\u5fb4\u3092\u62bd\u51fa\u3059\u308b\nlet features = detector.featuresInImage(ciImage, options: options)\n\nvar resultString = \"DETECTED FACES:\\n\\n\"\n\nfor feature in features as! [CIFaceFeature] {\n    resultString.append(\"bounds: \\(NSStringFromCGRect(feature.bounds))\\n\")\n    resultString.append(\"hasSmile: \\(feature.hasSmile ? \"YES\" : \"NO\")\\n\")\n    \n    resultString.append(\"\\n\")\n}\n\n```\n\n#\u5b9f\u884c\u753b\u9762\n\n![Screen Shot 2014-11-07 at 17.29.00.png](https://qiita-image-store.s3.amazonaws.com/0/58141/7d41f4e5-e7b5-6e1c-00f3-ff565d16c293.png)\n\n##CIFaceFeature\u306b\u3064\u3044\u3066\n[CIFaceFeature]( https://developer.apple.com/Library/ios/documentation/CoreImage/Reference/CIFaceFeature/\n)\u3067\u53d6\u5f97\u3067\u304d\u308b\u3082\u306e\n\n\n\u4e3b\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u3060\u3068\u3001\u4ee5\u4e0b\u306e\u3082\u306e\u306a\u3069\u304c\u3042\u308a\u307e\u3059\n\n| \u30d7\u30ed\u30d1\u30c6\u30a3 | \u578b | \u8aac\u660e |\n|:----------:|:------------:|:------------:|\n| bounds     | CGRect | \u753b\u50cf\u5185\u3067\u306e\u9854\u306e\u5ea7\u6a19\u3068\u5927\u304d\u3055 |\n| hasSmile | Bool | \u7b11\u9854\u304b\u3069\u3046\u304b |\n| faceAngle | Float | \u9854\u306e\u50be\u304d |\n| leftEyePosition | CGPoint | \u5de6\u76ee\u306e\u4f4d\u7f6e |\n| rightEyePosition | CGPoint | \u53f3\u76ee\u306e\u4f4d\u7f6e |\n| mouthPosition | CGPoint | \u53e3\u306e\u4f4d\u7f6e |\n\n\u4ed6\u306b\u3082\u3001leftEyeClosed\u3084rightEyeClosed\u306a\u3069\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u3042\u308b\u306e\u3067\u3001\u30a6\u30a3\u30f3\u30af\u3067\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\u3053\u3068\u3082\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3057\u304b\u3057\u3001CIFaceFeature\u3067\u306eright, left\u306f\u753b\u50cf\u5185\u3067\u306e\u5de6\u53f3\u3067\u3042\u3063\u3066\u3001\n\u93e1\u6620\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u4eba\u7269\u306e\u5de6\u76ee\u30fb\u53f3\u76ee\u3068\u306f\u4e00\u81f4\u3057\u306a\u3044\u306e\u3067\u3001\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n```\n\u201cRight\u201d/\"Left\" is relative to the original (non-mirrored) image orientation, not to the owner of the eye.\n```\n\n#CIDetector\u306b\u3064\u3044\u3066\n\n\u4eca\u56de\u306f\u3001[CIDetector](https://developer.apple.com/library/ios/Documentation/CoreImage/Reference/CIDetector_Ref/)\u3092\u9854\u8a8d\u8b58\u306b\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001\u4ed6\u306e\u5bfe\u8c61\u7269\u306e\u8a8d\u8b58\u306b\u3082\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n| detectorOfType | \u8aac\u660e |\n|:----------:|:------------:|\n| CIDetectorTypeFace | \u9854\u8a8d\u8b58 ( face recognition ) |\n| CIDetectorTypeRectangle | \u77e9\u5f62\u8a8d\u8b58 ( rectangle detection ) |\n| CIDetectorTypeQRCode | QR\u30b3\u30fc\u30c9\u8a8d\u8b58 ( barcode detection ) |\n| CIDetectorTypeText | \u6587\u5b57\u8a8d\u8b58 ( text detection ) |\n\n#\u53c2\u8003\n\n@shu223\u3055\u3093\nhttps://github.com/shu223/iOS7-Sampler/blob/master/iOS7Sampler/SampleViewControllers/SmileDetectionViewController.m\n\nObjective-C\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\u3001Apple\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\nhttps://developer.apple.com/library/IOs/samplecode/SquareCam/Introduction/Intro.html\n\n\u5199\u771f\u306f\u3053\u3061\u3089\u304b\u3089\nhttp://www.ashinari.com/2012/02/06-357198.php?category=265\n"}