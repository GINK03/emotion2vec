{"tags": ["OpenCV", "Ubuntu"], "context": "GW\u3067\u5c11\u3057\u6642\u9593\u304c\u3068\u308c\u305f\u3057\uff0cUbuntu16.04LTS\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u306e\u3067\u624b\u5143\u306e\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u305f\uff0e\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u66f4\u65b0\nsudo apt-get update\nsudo apt-get upgrade\n\n\n\u30bd\u30fc\u30b9\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nsudo apt-get install git\ncd ; mkdir tmp ; cd tmp\ngit clone https://github.com/Itseez/opencv\ngit clone https://github.com/Itseez/opencv_contrib.git\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u30b3\u30fc\u30d2\u30fc\u3067\u3082\u98f2\u307f\u306a\u304c\u3089\u5f85\u3064\uff0e\n\nCUDA\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nNVIDIA\u306e\u30b0\u30e9\u30dc\u3092\u8a70\u3093\u3067\u308b\u30de\u30b7\u30f3\u306a\u306e\u3067\uff0cCUDA\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n\nOpenCV\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get build-dep opencv\n\n\u3067\u3044\u3051\u307e\u3059\u304c\uff0c\u307e\u3063\u3055\u3089\u306aUbuntu\u3060\u3068\u30bd\u30fc\u30b9\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305e\u3068\u6012\u3089\u308c\u308b\u306e\u3067\uff0c/etc/apt/sources.list\u306e\u4ee5\u4e0b\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\ndeb-src http://jp.archive.ubuntu.com/ubuntu/ xenial universe\n\u3064\u3044\u3067\u306b\nsudo apt-get update\n\u3057\u3066\u304b\u3089\uff0c\u6539\u3081\u3066\nsudo apt-get build-dep opencv\n\u3057\u307e\u3059\uff0e\n\u3053\u3053\u3067nvidia-opencl-dev\u304c\u5165\u3063\u3066\u3044\u308b\u3068\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u524a\u9664\u3055\u308c\u3066ocl-icd-opencl-dev\u304c\u4ee3\u308f\u308a\u306b\u5165\u308b\u306e\u3067\uff0cnvidia-opencl-dev\u3092\u518d\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\uff08\u3053\u308c\u3067\u3044\u3044\u306e\u304b\u306f\u81ea\u4fe1\u306a\u3057\uff09\uff0e\nsudo apt-get install nvidia-opencl-dev\n\u4e0d\u8981\u304b\u3082\u3057\u308c\u306a\u3044\u3051\u3069VTK\u3068Glog\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff0e\nsudo apt-get install libvtk6-qt-dev libgoogle-glog-dev\n\nCMakeLists.txt\u306e\u4fee\u6b63\n\u3053\u306e\u307e\u307emake\u3059\u308b\u3068memcpy\u95a2\u4fc2\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\uff0c~/tmp/opencv/CMakeLists.txt\u3092\u7de8\u96c6\u3057\u3066\uff0c\u5148\u982d\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\nset(CMAKE_CXX_FLAGS \"-D_FORCE_INLINES ${CMAKE_CXX_FLAGS}\")\n\nmake\ncd ~/tmp/opencv\nmkdir build ; cd build\ncmake -D WITH_TBB=ON -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules/ ..\n\uff03CUDA\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u305f\u306e\u3067\u5b9f\u969b\u306f\uff0c\ncmake -D WITH_CUBLAS=ON -D WITH_TBB=ON -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules/ ..\nmake -j\n\nmake\u306b\u306f\u6642\u9593\u304b\u304b\u308b\u306e\u3067\u304a\u3084\u3064\u3067\u3082\u98df\u3079\u306b\u884c\u304d\u307e\u3057\u3087\u3046\uff0e\n\u304a\u3084\u3064\u304b\u3089\u5e30\u3063\u3066\u304f\u308b\u3068\uff0c\nopencv_contrib/modules/tracking/include/opencv2/tracking/onlineMIL.hpp\u306e57\u884c\u76ee\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u6b7b\u3093\u3067\u307e\u3059\uff0e\n\u3069\u3046\u3084\u3089sign\u30de\u30af\u30ed\u304c\u60aa\u3055\u3092\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\uff0conlineMIL.hpp\u306e57\u884c\u76ee\u306e\n#define  sign(s)  ((s > 0 ) ? 1 : ((s<0) ? -1 : 0))\n\u3092\n#define  sign2(s)  ((s > 0 ) ? 1 : ((s<0) ? -1 : 0))\n\u3068\u3067\u3082\u3057\u3066\u304a\u3044\u3066\uff0c\nopencv_contrib/modules/tracking/src/onlineMIL.cpp 310\u884c\u76ee\u3068339\u884c\u76ee\u3067\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308bsign\u95a2\u6570\u3092\u5148\u307b\u3069\u5909\u66f4\u3057\u305f\u95a2\u6570\u540d(sign2)\u306b\u3059\u308b\uff0e\n\u6539\u3081\u3066make\nmake -j\nsudo make install\n\n\u4f7f\u7528\u4f8b\u306f\u307e\u305f\u305d\u306e\u3046\u3061\u306b\uff0e\nGW\u3067\u5c11\u3057\u6642\u9593\u304c\u3068\u308c\u305f\u3057\uff0cUbuntu16.04LTS\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u306e\u3067\u624b\u5143\u306e\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u305f\uff0e\n\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u66f4\u65b0\n```\nsudo apt-get update\nsudo apt-get upgrade\n```\n\n## \u30bd\u30fc\u30b9\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n```\nsudo apt-get install git\ncd ; mkdir tmp ; cd tmp\ngit clone https://github.com/Itseez/opencv\ngit clone https://github.com/Itseez/opencv_contrib.git\n```\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u30b3\u30fc\u30d2\u30fc\u3067\u3082\u98f2\u307f\u306a\u304c\u3089\u5f85\u3064\uff0e\n\n## CUDA\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nNVIDIA\u306e\u30b0\u30e9\u30dc\u3092\u8a70\u3093\u3067\u308b\u30de\u30b7\u30f3\u306a\u306e\u3067\uff0cCUDA\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n\n## OpenCV\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\nsudo apt-get build-dep opencv\n```\n\u3067\u3044\u3051\u307e\u3059\u304c\uff0c\u307e\u3063\u3055\u3089\u306aUbuntu\u3060\u3068\u30bd\u30fc\u30b9\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305e\u3068\u6012\u3089\u308c\u308b\u306e\u3067\uff0c/etc/apt/sources.list\u306e\u4ee5\u4e0b\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n```deb-src http://jp.archive.ubuntu.com/ubuntu/ xenial universe```\n\u3064\u3044\u3067\u306b\n```sudo apt-get update```\n\u3057\u3066\u304b\u3089\uff0c\u6539\u3081\u3066\n```sudo apt-get build-dep opencv```\n\u3057\u307e\u3059\uff0e\n\u3053\u3053\u3067nvidia-opencl-dev\u304c\u5165\u3063\u3066\u3044\u308b\u3068\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u524a\u9664\u3055\u308c\u3066ocl-icd-opencl-dev\u304c\u4ee3\u308f\u308a\u306b\u5165\u308b\u306e\u3067\uff0cnvidia-opencl-dev\u3092\u518d\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\uff08\u3053\u308c\u3067\u3044\u3044\u306e\u304b\u306f\u81ea\u4fe1\u306a\u3057\uff09\uff0e\n```sudo apt-get install nvidia-opencl-dev```\n\n\u4e0d\u8981\u304b\u3082\u3057\u308c\u306a\u3044\u3051\u3069VTK\u3068Glog\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff0e\n```sudo apt-get install libvtk6-qt-dev libgoogle-glog-dev```\n\n## CMakeLists.txt\u306e\u4fee\u6b63\n\u3053\u306e\u307e\u307emake\u3059\u308b\u3068memcpy\u95a2\u4fc2\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\uff0c~/tmp/opencv/CMakeLists.txt\u3092\u7de8\u96c6\u3057\u3066\uff0c\u5148\u982d\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\n```set(CMAKE_CXX_FLAGS \"-D_FORCE_INLINES ${CMAKE_CXX_FLAGS}\")```\n\n## make\n```\ncd ~/tmp/opencv\nmkdir build ; cd build\ncmake -D WITH_TBB=ON -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules/ ..\n\uff03CUDA\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u305f\u306e\u3067\u5b9f\u969b\u306f\uff0c\ncmake -D WITH_CUBLAS=ON -D WITH_TBB=ON -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules/ ..\nmake -j\n```\nmake\u306b\u306f\u6642\u9593\u304b\u304b\u308b\u306e\u3067\u304a\u3084\u3064\u3067\u3082\u98df\u3079\u306b\u884c\u304d\u307e\u3057\u3087\u3046\uff0e\n\n\u304a\u3084\u3064\u304b\u3089\u5e30\u3063\u3066\u304f\u308b\u3068\uff0c\nopencv_contrib/modules/tracking/include/opencv2/tracking/onlineMIL.hpp\u306e57\u884c\u76ee\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u6b7b\u3093\u3067\u307e\u3059\uff0e\n\u3069\u3046\u3084\u3089sign\u30de\u30af\u30ed\u304c\u60aa\u3055\u3092\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\uff0conlineMIL.hpp\u306e57\u884c\u76ee\u306e\n``` #define  sign(s)  ((s > 0 ) ? 1 : ((s<0) ? -1 : 0))```\n\u3092\n``` #define  sign2(s)  ((s > 0 ) ? 1 : ((s<0) ? -1 : 0))```\n\u3068\u3067\u3082\u3057\u3066\u304a\u3044\u3066\uff0c\nopencv_contrib/modules/tracking/src/onlineMIL.cpp 310\u884c\u76ee\u3068339\u884c\u76ee\u3067\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308bsign\u95a2\u6570\u3092\u5148\u307b\u3069\u5909\u66f4\u3057\u305f\u95a2\u6570\u540d(sign2)\u306b\u3059\u308b\uff0e\n\n\u6539\u3081\u3066make\n\n```\nmake -j\nsudo make install\n```\n\n\u4f7f\u7528\u4f8b\u306f\u307e\u305f\u305d\u306e\u3046\u3061\u306b\uff0e\n"}