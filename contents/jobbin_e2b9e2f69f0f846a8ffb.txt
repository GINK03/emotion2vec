{"context": "\n\n\u524d\u7f6e\u304d\n\u3000\u79c1\u304c\u52e4\u3081\u3066\u3044\u308b\u4f1a\u793e\u3067\u306f\u3001\u7d043\u5e74\u524d\u304b\u3089AWS\u306e\u5229\u7528\u3092\u7a4d\u6975\u7684\u306b\u691c\u8a0e\u3057\u3066\u304b\u3089\u3001\u6bce\u6708\u306eAWS\u5229\u7528\u8cbb\u306f\u3082\u3061\u308d\u3093\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6570\u3082\u6025\u306b\u5897\u3048\u3066\u304d\u307e\u3057\u305f\u3002\u81ea\u5206\u304c\u6240\u5c5e\u3057\u3066\u3044\u308b\u90e8\u7f72\u3082AWS\u306e\u5229\u7528\u3092\u63a8\u9032\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001AWS\u306e\u793e\u5185\u5229\u7528\u306b\u304a\u3044\u3066\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a4\u7ba1\u7406\u7d71\u5236\u3082\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u4eca\u306f(\u8272\u3005\u4e8b\u60c5\u304c\u3042\u3063\u3066\u306e)\u91ce\u826f\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9664\u304d\u3001\u6570\u5341\u500b\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7ba1\u7406\u30fb\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7d71\u5236\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u3000AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u305f\u6642\u306b\u3001\u7ba1\u7406\u7d71\u5236\u7528\u306e\u8a2d\u5b9a\u3092\u5165\u308c\u3066\u304b\u3089\u3001AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6e21\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u7ba1\u7406\u3059\u308bAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5897\u3048\u308b\u307b\u3069\u3001\u7ba1\u7406\u7d71\u5236\u304c\u96e3\u3057\u304f\u306a\u308a\u307e\u3059\u3002\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u306e\u4eba\u6570\u3082\u591a\u304f\u306a\u3044\u306e\u3067\u3001\uff08\u5404\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u5206\u6563\u3055\u308c\u3066\u3044\u308b\u8a2d\u5b9a\u3084\u30b3\u30fc\u30c9\u306e\u904b\u7528\u7ba1\u7406\u306a\u3069\uff09\u793e\u5185AWS\u5229\u7528\u306e\u7ba1\u7406\u7d71\u5236\u3092\u884c\u3046\u306b\u306f\u5927\u5909\u306a\u4e00\u9762\u3082\u3042\u308a\u307e\u3059\u3002\n\n\u6982\u8981\n\u3000\u4e8c\u4e09\u65e5\u524d\u306b\u3001\u3010How to Centrally Manage AWS Config Rules across Multiple AWS Accounts\u3011\u3068\u3044\u3046AWS\u306e\u65b9\u306e\u8a18\u4e8b\u3092\u898b\u307e\u3057\u305f\u3001\u30bf\u30a4\u30c8\u30eb\u3092\u898b\u305f\u3060\u3051\u3067\u3001\u304d\u3063\u3068\u9762\u767d\u3044\u5185\u5bb9\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\u305d\u306e\u8a18\u4e8b\u3092\u4e00\u901a\u308a\u8aad\u307f\u307e\u3057\u3066\u3001\u3053\u3093\u306a\u3084\u308a\u65b9\u3082\u3042\u308b\u3093\u3060\u306a\u3068\u611f\u5fc3\u3057\u307e\u3057\u305f\u3002(\u500b\u4eba\u7684)\u3059\u3054\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001DeepDive\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3000\u305d\u306e\u8a18\u4e8b\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u5185\u5bb9\u3092\u7c21\u5358\u306b\u307e\u3068\u3081\u3066\u307f\u307e\u3059\u3068\u3001\n\u3000\u7ba1\u7406\u3055\u308c\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u3042\u308bConfig Rules\u304c\n\u3000\u3000\u7ba1\u7406\u3092\u884c\u3046\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u3042\u308bLambda\u3092\u547c\u3073\u51fa\u3057\u3001\n\u3000\u3000\u3000\u7ba1\u7406\u3055\u308c\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\n\u3000\u3000\u3000\u3000\u305d\u306e\u7d50\u679c\u3092Config Rules\u306b\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3000\u81ea\u5206\u306e\u982d\u306b\u6d6e\u304b\u3093\u3067\u304d\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u4ee5\u4e0b\u306e\u56f3\u306b\u793a\u3059\u901a\u308a\u3067\u3059\u3002\n\n\u3000\u3053\u308c\u3063\u3066\u3001\u51c4\u304f\u306a\u3044\u3067\u3059\u304b\uff1f\uff01\u3000\u7d71\u5236\u7528\u306e\u30b3\u30fc\u30c9\uff08Lambda\uff09\u306f admin-account(\u7ba1\u7406\u3092\u884c\u3046\u30a2\u30ab\u30a6\u30f3\u30c8)\u306b\u3057\u304b\u7f6e\u304b\u305a\u3001managed-accout(\u7ba1\u7406\u3055\u308c\u308b\u30a2\u30ab\u30a6\u30f3\u30c8)\u304c\u305f\u3060\u305d\u308c\u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u3067\u3059\u3002\u30b3\u30fc\u30c9\u304c\uff11\u3064\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u96c6\u7d04\u3055\u308c\u3001\u904b\u7528\u7ba1\u7406\u3082\u697d\u3067\u3059\u306d\u3002\n\u3000\u307e\u305f\u3001\u81ea\u5206\u306a\u308a\u306b\u6a5f\u80fd\u5897\u5f37\u3092\u62e1\u5f35\u3057\u3066\u307f\u3066\u3001SNS\u3092\u4f7f\u3063\u3066\u3001Config Rules\u306e\u8a55\u4fa1\u30ec\u30dd\u30fc\u30c8\u3092\u7ba1\u7406\u8005\u306b\u901a\u77e5\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u5168\u4f53\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n\u3000\u4eca\u56de\u306f\u3001\u3010How to Centrally Manage AWS Config Rules across Multiple AWS Accounts\u3011\u306b\u7d39\u4ecb\u3057\u305f\u4f8b (CloudTrail\u306elog file\u306evalidation\u304c\u53ef\u80fd\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af) \u3092\u6cbf\u3063\u3066\u3001\u4e00\u901a\u308a\u691c\u8a3c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u691c\u8a3c\u306e\u6d41\u308c\n\u3000\u8a2d\u5b9a\u306e\u624b\u9806\u306f\u5f8c\u307b\u3069\u7d39\u4ecb\u3057\u307e\u3059\u304c\u3001\u307e\u305a\u3001\u4e0a\u8a18\u306e\u56f3\u3092\u4f7f\u3063\u3066\u3001\u5168\u4f53\u306e\u6d41\u308c\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\n\u2460 : ( managed-account ) Config Rules\u304c ( admin-account ) Lambda\u3092invoke\u3057\u307e\u3059\u3002\n\nConfig Rules\u304cAssumeRole\u306eARN\u3068event\u60c5\u5831\u3092Lambda\u306b\u6e21\u3057\u3066\u3044\u307e\u3059\n\n\n\u2461 : ( admin-account ) Lambda\u304cConfig Rules\u304b\u3089\u6e21\u3055\u308c\u305f\u60c5\u5831\u3092\u8a55\u4fa1\u3057\u307e\u3059\u3001\u305d\u3057\u3066\u3001managed-account\u306b\u5bfe\u3057\u3066AssumeRole\u3057\u307e\u3059\u3002\n\u2462 : ( admin-account ) Lambda\u304cAssumeRole\u3067\u5f97\u3089\u308c\u305f\u30a2\u30af\u30bb\u30b9\u6a29\u9650(putEvaluations)\u3092\u4f7f\u3063\u3066\u3001\u8a55\u4fa1\u7d50\u679c\u3092( managed-account ) Config Rules\u306b\u9001\u308a\u307e\u3059\u3002\n\u2463 : ( managed-account ) Config Rules\u304c\u8a55\u4fa1\u7d50\u679c\u3092\u53d7\u3051\u53d6\u308a\u3001SNS\u306b\u901a\u77e5\u3057\u307e\u3059\u3002\n\u2464 : ( managed-account ) SNS\u304cConfig Rules\u304b\u3089\u306e\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308a\u3001\u4e88\u3081\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u901a\u77e5\u5148(\u4eca\u56de\u306f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9)\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\n\n\u8a2d\u5b9a\u624b\u9806\n\n( admin-account ) Lambda\u306e\u8a2d\u5b9a\n\nServices\u30bf\u30d6 \u2192 Lambda \u2192 Lambda\u3092\u65b0\u3057\u304f\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306fblueprint\u306econfig-rule-change-triggered\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u307e\u307e\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\nName\u306f\u9069\u5b9c\u3067\u826f\u3044\u3067\u3059(\u4f8b\u3067\u306f\u3001Check-LogValidation-Enabled\u306b\u3057\u307e\u3059)\u3001Runtime\u3092\u300cNode.js 4.3\u300d\u306b\u3057\u307e\u3059\u3002\n\nblueprint\u306e\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\n\n\n\n\nLambda\u7528\u306e\u30ed\u30fc\u30eb\u3092\u65b0\u305f\u306b\u4f5c\u6210\u3057\u307e\u3059\u306e\u3067\u3001Role\u6b04\u306b\u300cCreate a custom role\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u65e2\u5b58\u306e\u30ed\u30fc\u30eb\u3092\u5229\u7528\u3057\u3066\u826f\u3044\u3067\u3059\u3002\n\n\n\n\nLambda\u7528\u306e\u30ed\u30fc\u30eb\u540d\u306f\u9069\u5b9c\u3067\u826f\u3044\u3067\u3059\u3001(\u4f8b\u3067\u306f\u3001lambda_basic_execution\u306b\u3057\u307e\u3059)\n\n\n\u30ed\u30fc\u30eblambda_basic_execution\u3092\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30ed\u30fc\u30eblambda_basic_execution\u306f\u3042\u3068\u3067\u3001managed-account\u306b\u5bfe\u3057\u3066AssumeRole\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\n \u4eca\u56de\u6a29\u9650\u307e\u308f\u308a\u3092\u307e\u3060\u78ba\u8a8d\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30ed\u30fc\u30eblambda_basic_execution\u306b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u6a29\u9650\u4ee5\u5916\u306b\u3001\u691c\u8a3c\u7528\u306bPowerUserAccess\u3092\u4ed8\u3051\u307e\u3057\u305f\u3002\n\n\n\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001Memory\u306a\u3069\u306econfigurations\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n\nLambda\u306e\u60c5\u5831\u3092\u4e00\u5ea6\u78ba\u8a8d\u3057\u3001\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nLambda(Check-LogValidation-Enabled)\u3092\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\nmanaged-account\u306eConfig Rules\u304cCheck-LogValidation-Enabled\u3092Invoke\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u4f8b\u3067\u306f\u3001managed-account(AccountId:2847\u203b\u203b\u203b\u203b1948)\u304cCheck-LogValidation-Enabled\u3092Invoke\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002( AWS\u30de\u30cd\u30b3\u30f3\u304b\u3089\u306f\u8a2d\u5b9a\u3067\u304d\u307e\u305b\u3093 )\n\n\n\n\nLambda\u306e\u6e96\u5099\u304c\u7d42\u4e86\n\n\n( managed-account ) AssumeRole\u7528\u306erole\u306e\u8a2d\u5b9a\n\n\nServices\u30bf\u30d6 \u2192 IAM \u2192 \u30ed\u30fc\u30eb \u2192 \u300c\u65b0\u3057\u3044\u30ed\u30fc\u30eb\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30ed\u30fc\u30eb\u540d\u306f\u9069\u5b9c\u66ff\u3048\u3066\u304f\u3060\u3055\u3044 \n\n\n\n\n\u30af\u30ed\u30fc\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30a2\u30af\u30bb\u30b9\u306e\u30ed\u30fc\u30eb \u2192 \u300c\u6240\u6709\u3057\u3066\u3044\u308bAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u9593\u306e\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u307e\u3059\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\n\u30a2\u30ab\u30a6\u30f3\u30c8ID\u6b04\u306b\u4fe1\u983c\u3059\u308b\u5225\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5165\u529b\u3057\u307e\u3059\u3002(\u81ea\u5206\u306e\u5834\u5408\u306f8918****5875)\n\n\u300cMFA\u304c\u5fc5\u8981\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3044\u306a\u3044\u3067\u304f\u3060\u3055\u3044(\u5165\u308c\u3066\u3057\u307e\u3046\u3068\u3001\u30af\u30ed\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b\u3001MFA\u3067\uff12\u6bb5\u968e\u8a8d\u8a3c\u3092\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u304f\u306a\u308a\u307e\u3059)\n\n\n\n\n\u30dd\u30ea\u30b7\u30fc\u306b\u3064\u3044\u3066\u306f\u3001\u5f8c\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u306e\u3067\u3001\u4eca\u306f\u3053\u306e\u307e\u307e\u300c\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u300d\u3078\u9032\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u4e00\u5ea6\u78ba\u8a8d\u3057\u307e\u3059\u3001\u554f\u984c\u304c\u306a\u3051\u308c\u3070\u3001\u300c\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nAssumeRole\u7528\u306e\u30ed\u30fc\u30eb(config-rules-admin)\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u306d\u3002\n\nconfig-rules-admin\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u300d\u306e\u300c\u30a4\u30f3\u30e9\u30a4\u30f3\u30dd\u30ea\u30b7\u30fc\u300d\u3067( admin-account ) Lambda\u7528\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30ab\u30b9\u30bf\u30e0\u30dd\u30ea\u30b7\u30fc\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u4f5c\u6210\u3057\u305f\u3044\u30dd\u30ea\u30b7\u30fc\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30ed\u30fc\u30eb\u30dd\u30ea\u30b7\u30fcPutEvaluations\u304c\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u5316\u3059\u308b\u305f\u3081\u306b\u3001\u4fe1\u983c\u95a2\u4fc2\u3092\u4fee\u6b63\u3057\u307e\u3059\u306e\u3067\u3001\u300c\u4fe1\u983c\u95a2\u4fc2\u306e\u7de8\u96c6\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u4fe1\u983c\u3059\u308b\u306e\u3092( admin-account ) Lambda\u7528\u306e\u30ed\u30fc\u30eb(\u4f8b\u3067\u306f\u3001lambda_basic_execution)\u306b\u9650\u5b9a\u3057\u307e\u3059\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n\u4fe1\u983c\u95a2\u4fc2\u3092\u4fee\u6b63\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nAssumeRole\u7528\u306e\u30ed\u30fc\u30eb\u306e\u6e96\u5099\u304c\u7d42\u4e86\n\n\n( managed-account ) SNS\u306e\u8a2d\u5b9a\n\n\nAWS Config\u306eSettings \u2192 Amazon SNS topic\u306e\u90e8\u5206\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nTopic name\u306f\u4efb\u610f\u306e\u540d\u524d\u3067\u826f\u3044\u3067\u3059\u3002(\u4eca\u56de\u306fEvaluations-report\u3068\u3057\u307e\u3059)\n\n\n\n\n\nServices\u306eSNS \u2192 Topic \u3001Evaluations-report\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u65b0\u3057\u3044Topic(Evaluations-report)\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u306d\n\n\n\n\nCreate subscription\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3068\u3001\u65b0\u3057\u3044\u6b04\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\nProtocol\u3092Email\u306b\u9078\u629e\u3057\u3001Endpoint\u306b\u901a\u77e5\u5148\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u3001Create subscription\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nCreate subscription\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u78ba\u8a8d\u7528\u306eMessage\u304cAWS\u304b\u3089\u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u4ed8\u3055\u308c\u307e\u3059\u3002\u78ba\u8a8d\u3092\u53d6\u308c\u308b\u307e\u3067\u3001Subscription ID\u306e\u3068\u3053\u308d\u306b\u306fPendingConfirmation\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u9001\u4fe1\u3055\u308c\u305f\u30e1\u30fc\u30eb\u3092\u78ba\u8a8d\u3057\u3001Confirm subscription\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\n\nAWS\u304c\u78ba\u8a8d\u3092\u53d6\u308c\u308c\u308b\u3068\u3001Subscription ID\u306e\u3068\u3053\u308d\u306b\u306fSubscription ID\u306e\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nSNS\u306e\u8a2d\u5b9a\u304c\u5b8c\u4e86\n\n\n( managed-account ) Config Rules\u306e\u8a2d\u5b9a\n\nServices\u30bf\u30d6 \u2192 Config \u2192 Rules \u2192 Add rule\u306b\u3066\u3001custom rule\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\ncustom rule\u306econfig\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nName\u306f\u9069\u5b9c\u3067\u826f\u3044\u3067\u3059\u3002(\u4f8b\u3067\u306f\u3001CloudTrail-LogValidation-Enabled)\nAWS Lambda function ARN\u6b04\u306b\u3001( admin-account ) Lambda Check-LogValidation-Enabled\u306eARN\u3092\u8a18\u5165\u3057\u307e\u3059\u3002\nTrigger\u306b\u3064\u3044\u3066\u306f\u3001\u56f3\u306b\u793a\u3059\u901a\u308a\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nRule parameters\u306fKey\u3092executionRole\u306b\u3001Value\u3092AssumeRole\u7528\u306e\u30ed\u30fc\u30ebconfig-rules-admin\u306eARN\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\n\n\n\n\nconfig rule\u3092\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3089\u3001 \u6e96\u5099\u304c\u7d42\u4e86\n\n\n\n\u691c\u8a3c\u306e\u524d\u63d0\u6761\u4ef6\n\u3000managed-account\u306b\u65e2\u306bCloudTrail\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\u3002\u5f53\u7136\u306e\u3053\u3068\u306a\u3093\u3067\u3059\u304c\u3001CloudTrail\u3092\u8a2d\u5b9a\u3055\u308c\u306a\u3044\u3068\u3001\uff08\u8a55\u4fa1\u5bfe\u8c61\u304c\u306a\u3044\u304b\u3089\uff09Config Rules\u304c\u8a55\u4fa1\u3067\u304d\u307e\u305b\u3093\u3002\n\u3000\u3061\u306a\u307f\u306b\u3001\u3053\u3093\u306a\u691c\u8a3c\u7528\u306eCloudTrail\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\u300cEnable log file validation\u300d\u306f\u300cNo\u300d\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n\u691c\u8a3c\u7d50\u679c\n\nEnable log file validation\u304cNo\u306e\u5834\u5408\n\nConfig Rules\n\u3000\u30ea\u30bd\u30fc\u30b9Cloud-Trail\u306b\u5bfe\u3059\u308b\u8a55\u4fa1\u306fNoncompliant\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\n\n\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\n\n\nE-mail\u901a\u77e5\n\u3000\u7ba1\u7406\u8005\u306eE-mail\u306bConfig\u306e\u8a55\u4fa1\u30ec\u30dd\u30fc\u30c8\u304c\u9001\u4fe1\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3067\u3001\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u304cNoncompliant\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u5206\u304b\u308a\u307e\u3059\u306d\uff01\n\n\nEnable log file validation\u304cYes\u306b\u8a2d\u5b9a\u3057\u305f\u5834\u5408\n\nConfig Rules\n\u3000\u30ea\u30bd\u30fc\u30b9Cloud-Trail\u306b\u5bfe\u3059\u308b\u8a55\u4fa1\u306f\u3061\u3083\u3093\u3068Compliant\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\n\n\nE-mail\u901a\u77e5\n\u3000\u7ba1\u7406\u8005\u306eE-mail\u306bConfig\u306e\u8a55\u4fa1\u30ec\u30dd\u30fc\u30c8\u304c\u9001\u4fe1\u3055\u308c\u307e\u3059\u3002\u3061\u3083\u3093\u3068logfile\u306evalidation\u3092enable\u306b\u3057\u307e\u3057\u305f\u306e\u3067\u3001Compliant\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u7ba1\u7406\u8005\u306b\u901a\u77e5\u3057\u307e\u3059\u3002\n\n\n\u307e\u3068\u3081\n\u3000\u4eca\u56de\u306f\u3001Lambda\u3068Config Rules\u3092\u4f7f\u3063\u3066\u3001CloudTrail\u306elogfile\u306evalidation\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\u8a55\u4fa1\u7d50\u679c\u3092\u7ba1\u7406\u8005\u306b\u901a\u77e5\u3059\u308b\u3053\u3068\u3092\u691c\u8a3c\u3057\u307e\u3057\u305f\u3002\u610f\u5916\u3068\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002\n\u3000Config Rules\u306fAWS\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u3061\u3083\u3093\u3068\u30eb\u30fc\u30eb\u306b\u6cbf\u3063\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\u3067\u304d\u307e\u3059\u306e\u3067\u3001AWS\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u62c5\u5f53\u8005\u3082\u3057\u304f\u306f\u5185\u90e8\u7d71\u5236\u8005\u306b\u3068\u3063\u3066\u3001\u975e\u5e38\u306b\u5f37\u529b\u306a\"\u6b66\u5668\"\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u9055\u53cd\u306b\u306a\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u5373\u5ea7\u306b\u691c\u77e5\u30fb\u901a\u77e5\u304c\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u500b\u4eba\u7684\u306b\u3082\u3055\u3089\u306bConfig Rules\u3092DeepDive\u3057\u3066\u3001\u696d\u52d9\u306b\u3082\u6d3b\u7528\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3000\u73fe\u5728Config Rule\u306b\u4f7f\u3048\u308b\u30de\u30cd\u30fc\u30b8\u30c9\u30eb\u30fc\u30eb\u304c\uff19\u3064\u3042\u3063\u3066\u3001GitHub\u306b\u3082\u4fbf\u5229\u305d\u3046\u306a\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30eb(awslabs/aws-config-rules)\u304c\u3042\u308a\u307e\u3059\u3002\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u4e00\u5ea6\u3084\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01\n\n\u6700\u5f8c\n\u3000\u4f59\u8ac7\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u5c11\u3057\u524d\u306b\u3001IAM\u30e6\u30fc\u30b6\u30fbAccessKeys\u306e\u904b\u7528\u7ba1\u7406\u306b\u4f7f\u3046\u3082\u306e\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3001\uff08\u30c8\u30e9\u30a4\u30a2\u30eb\u904b\u7528\u4e2d\u3067\u3059\u304c\uff09\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u4e0b\u8a18\uff12\u3064\u306e\u6295\u7a3f\u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\nLambda & CloudWatchEvents & Slack\u3067 \u9577\u671f\u7684\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044IAM\u30e6\u30fc\u30b6\u3092\u691c\u77e5\u30fb\u901a\u77e5\u3059\u308b\nLambda & CloudWatchEvents & Slack\u3067 \u9577\u671f\u7684\u306b\u5229\u7528\u3055\u308c\u3066\u3044\u306a\u3044AccessKey\u3092\u691c\u77e5\u30fb\u901a\u77e5\u3059\u308b\n\n#\u524d\u7f6e\u304d\n\u3000\u79c1\u304c\u52e4\u3081\u3066\u3044\u308b\u4f1a\u793e\u3067\u306f\u3001\u7d043\u5e74\u524d\u304b\u3089AWS\u306e\u5229\u7528\u3092\u7a4d\u6975\u7684\u306b\u691c\u8a0e\u3057\u3066\u304b\u3089\u3001\u6bce\u6708\u306eAWS\u5229\u7528\u8cbb\u306f\u3082\u3061\u308d\u3093\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6570\u3082\u6025\u306b\u5897\u3048\u3066\u304d\u307e\u3057\u305f\u3002\u81ea\u5206\u304c\u6240\u5c5e\u3057\u3066\u3044\u308b\u90e8\u7f72\u3082AWS\u306e\u5229\u7528\u3092\u63a8\u9032\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001AWS\u306e\u793e\u5185\u5229\u7528\u306b\u304a\u3044\u3066\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a4\u7ba1\u7406\u7d71\u5236\u3082\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u4eca\u306f(\u8272\u3005\u4e8b\u60c5\u304c\u3042\u3063\u3066\u306e)\u91ce\u826f\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9664\u304d\u3001\u6570\u5341\u500b\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7ba1\u7406\u30fb\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7d71\u5236\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u3000AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u305f\u6642\u306b\u3001\u7ba1\u7406\u7d71\u5236\u7528\u306e\u8a2d\u5b9a\u3092\u5165\u308c\u3066\u304b\u3089\u3001AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6e21\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u7ba1\u7406\u3059\u308bAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5897\u3048\u308b\u307b\u3069\u3001\u7ba1\u7406\u7d71\u5236\u304c\u96e3\u3057\u304f\u306a\u308a\u307e\u3059\u3002\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u306e\u4eba\u6570\u3082\u591a\u304f\u306a\u3044\u306e\u3067\u3001\uff08\u5404\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u5206\u6563\u3055\u308c\u3066\u3044\u308b\u8a2d\u5b9a\u3084\u30b3\u30fc\u30c9\u306e\u904b\u7528\u7ba1\u7406\u306a\u3069\uff09\u793e\u5185AWS\u5229\u7528\u306e\u7ba1\u7406\u7d71\u5236\u3092\u884c\u3046\u306b\u306f\u5927\u5909\u306a\u4e00\u9762\u3082\u3042\u308a\u307e\u3059\u3002\n\n#\u6982\u8981\n\u3000\u4e8c\u4e09\u65e5\u524d\u306b\u3001[\u3010How to Centrally Manage AWS Config Rules across Multiple AWS Accounts\u3011](http://blogs.aws.amazon.com/application-management/post/Tx23LIUFRTWOHNB/How-to-Centrally-Manage-AWS-Config-Rules-across-Multiple-AWS-Accounts)\u3068\u3044\u3046AWS\u306e\u65b9\u306e\u8a18\u4e8b\u3092\u898b\u307e\u3057\u305f\u3001\u30bf\u30a4\u30c8\u30eb\u3092\u898b\u305f\u3060\u3051\u3067\u3001\u304d\u3063\u3068\u9762\u767d\u3044\u5185\u5bb9\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\u305d\u306e\u8a18\u4e8b\u3092\u4e00\u901a\u308a\u8aad\u307f\u307e\u3057\u3066\u3001\u3053\u3093\u306a\u3084\u308a\u65b9\u3082\u3042\u308b\u3093\u3060\u306a\u3068\u611f\u5fc3\u3057\u307e\u3057\u305f\u3002(\u500b\u4eba\u7684)\u3059\u3054\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001DeepDive\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3000\u305d\u306e\u8a18\u4e8b\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u5185\u5bb9\u3092\u7c21\u5358\u306b\u307e\u3068\u3081\u3066\u307f\u307e\u3059\u3068\u3001\n\u3000\u7ba1\u7406\u3055\u308c\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u3042\u308bConfig Rules\u304c\n\u3000\u3000\u7ba1\u7406\u3092\u884c\u3046\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u3042\u308bLambda\u3092\u547c\u3073\u51fa\u3057\u3001\n\u3000\u3000\u3000\u7ba1\u7406\u3055\u308c\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\n\u3000\u3000\u3000\u3000\u305d\u306e\u7d50\u679c\u3092Config Rules\u306b\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3000\u81ea\u5206\u306e\u982d\u306b\u6d6e\u304b\u3093\u3067\u304d\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u4ee5\u4e0b\u306e\u56f3\u306b\u793a\u3059\u901a\u308a\u3067\u3059\u3002\n<img width=\"771\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0028-07-09 22.30.17.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/114e3144-8905-10d8-9614-5520d2aa2b89.png\">\n\u3000\u3053\u308c\u3063\u3066\u3001\u51c4\u304f\u306a\u3044\u3067\u3059\u304b\uff1f\uff01\u3000\u7d71\u5236\u7528\u306e\u30b3\u30fc\u30c9\uff08Lambda\uff09\u306f admin-account(\u7ba1\u7406\u3092\u884c\u3046\u30a2\u30ab\u30a6\u30f3\u30c8)\u306b\u3057\u304b\u7f6e\u304b\u305a\u3001managed-accout(\u7ba1\u7406\u3055\u308c\u308b\u30a2\u30ab\u30a6\u30f3\u30c8)\u304c\u305f\u3060\u305d\u308c\u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u3067\u3059\u3002\u30b3\u30fc\u30c9\u304c\uff11\u3064\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u96c6\u7d04\u3055\u308c\u3001\u904b\u7528\u7ba1\u7406\u3082\u697d\u3067\u3059\u306d\u3002\n\u3000\u307e\u305f\u3001\u81ea\u5206\u306a\u308a\u306b\u6a5f\u80fd\u5897\u5f37\u3092\u62e1\u5f35\u3057\u3066\u307f\u3066\u3001SNS\u3092\u4f7f\u3063\u3066\u3001Config Rules\u306e\u8a55\u4fa1\u30ec\u30dd\u30fc\u30c8\u3092\u7ba1\u7406\u8005\u306b\u901a\u77e5\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u5168\u4f53\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n<img width=\"565\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0028-07-09 23.27.14.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/3b010ca3-606c-eee2-215d-320ec4ed16fe.png\">\n\n\u3000\u4eca\u56de\u306f\u3001\u3010How to Centrally Manage AWS Config Rules across Multiple AWS Accounts\u3011\u306b\u7d39\u4ecb\u3057\u305f\u4f8b (**CloudTrail\u306elog file\u306evalidation\u304c\u53ef\u80fd\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af**) \u3092\u6cbf\u3063\u3066\u3001\u4e00\u901a\u308a\u691c\u8a3c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n#\u691c\u8a3c\u306e\u6d41\u308c\n\u3000\u8a2d\u5b9a\u306e\u624b\u9806\u306f\u5f8c\u307b\u3069\u7d39\u4ecb\u3057\u307e\u3059\u304c\u3001\u307e\u305a\u3001\u4e0a\u8a18\u306e\u56f3\u3092\u4f7f\u3063\u3066\u3001\u5168\u4f53\u306e\u6d41\u308c\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n- \u2460 : ( managed-account ) Config Rules\u304c ( admin-account ) Lambda\u3092invoke\u3057\u307e\u3059\u3002\n  - Config Rules\u304cAssumeRole\u306eARN\u3068event\u60c5\u5831\u3092Lambda\u306b\u6e21\u3057\u3066\u3044\u307e\u3059\n\n- \u2461 : ( admin-account ) Lambda\u304cConfig Rules\u304b\u3089\u6e21\u3055\u308c\u305f\u60c5\u5831\u3092\u8a55\u4fa1\u3057\u307e\u3059\u3001\u305d\u3057\u3066\u3001managed-account\u306b\u5bfe\u3057\u3066AssumeRole\u3057\u307e\u3059\u3002\n\n- \u2462 : ( admin-account ) Lambda\u304cAssumeRole\u3067\u5f97\u3089\u308c\u305f\u30a2\u30af\u30bb\u30b9\u6a29\u9650(putEvaluations)\u3092\u4f7f\u3063\u3066\u3001\u8a55\u4fa1\u7d50\u679c\u3092( managed-account ) Config Rules\u306b\u9001\u308a\u307e\u3059\u3002\n\n- \u2463 : ( managed-account ) Config Rules\u304c\u8a55\u4fa1\u7d50\u679c\u3092\u53d7\u3051\u53d6\u308a\u3001SNS\u306b\u901a\u77e5\u3057\u307e\u3059\u3002\n\n- \u2464 : ( managed-account ) SNS\u304cConfig Rules\u304b\u3089\u306e\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308a\u3001\u4e88\u3081\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u901a\u77e5\u5148(\u4eca\u56de\u306f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9)\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\n#\u8a2d\u5b9a\u624b\u9806\n##( admin-account ) Lambda\u306e\u8a2d\u5b9a\n\n1. Services\u30bf\u30d6 \u2192 Lambda \u2192 Lambda\u3092\u65b0\u3057\u304f\u4f5c\u6210\u3057\u307e\u3059\u3002\n<img width=\"998\" alt=\"4.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/42bc2f17-3c44-200e-599f-debf100b5f03.jpeg\">\n\n1. \u4eca\u56de\u306fblueprint\u306econfig-rule-change-triggered\u3092\u4f7f\u3044\u307e\u3059\u3002\n<img width=\"1386\" alt=\"5.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/01176efc-0ba5-eeb3-b86d-ef4dceaafbe6.jpeg\">\n\n1. \u3053\u306e\u307e\u307e\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n<img width=\"1820\" alt=\"7.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/c304b74d-2801-0e30-2185-ea6f61e267a2.jpeg\">\n\n1. Name\u306f\u9069\u5b9c\u3067\u826f\u3044\u3067\u3059(\u4f8b\u3067\u306f\u3001Check-LogValidation-Enabled\u306b\u3057\u307e\u3059)\u3001Runtime\u3092\u300cNode.js 4.3\u300d\u306b\u3057\u307e\u3059\u3002\n - blueprint\u306e\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n<img width=\"1820\" alt=\"8.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/694f1302-243e-f7eb-7aea-7622c71818fb.jpeg\">\n\n1. Lambda\u7528\u306e\u30ed\u30fc\u30eb\u3092\u65b0\u305f\u306b\u4f5c\u6210\u3057\u307e\u3059\u306e\u3067\u3001Role\u6b04\u306b\u300cCreate a custom role\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n - \u65e2\u5b58\u306e\u30ed\u30fc\u30eb\u3092\u5229\u7528\u3057\u3066\u826f\u3044\u3067\u3059\u3002\n<img width=\"1414\" alt=\"9.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/57911c2c-9773-2e46-2746-de70728b66c0.jpeg\">\n\n1. Lambda\u7528\u306e\u30ed\u30fc\u30eb\u540d\u306f\u9069\u5b9c\u3067\u826f\u3044\u3067\u3059\u3001(\u4f8b\u3067\u306f\u3001lambda_basic_execution\u306b\u3057\u307e\u3059)\n<img width=\"1092\" alt=\"10.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/7fcc8af9-6bbc-f330-1894-a7971b149f36.jpeg\">\n\n1. \u30ed\u30fc\u30eblambda_basic_execution\u3092\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n - \u30ed\u30fc\u30eblambda_basic_execution\u306f\u3042\u3068\u3067\u3001managed-account\u306b\u5bfe\u3057\u3066AssumeRole\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n     -  \u4eca\u56de\u6a29\u9650\u307e\u308f\u308a\u3092\u307e\u3060\u78ba\u8a8d\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u3001**\u30ed\u30fc\u30eblambda_basic_execution\u306b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u6a29\u9650\u4ee5\u5916\u306b\u3001\u691c\u8a3c\u7528\u306b<Font color=\"red\">PowerUserAccess</font>\u3092\u4ed8\u3051\u307e\u3057\u305f**\u3002\n     <img width=\"1560\" alt=\"28.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/962ea462-dc7e-4816-efea-80150af0caba.jpeg\">\n - \u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001Memory\u306a\u3069\u306econfigurations\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n<img width=\"1392\" alt=\"11.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/f9c47168-0d8f-4c4c-4f33-5639fb48b379.jpeg\">\n\n1. Lambda\u306e\u60c5\u5831\u3092\u4e00\u5ea6\u78ba\u8a8d\u3057\u3001\u4f5c\u6210\u3057\u307e\u3059\u3002\n<img width=\"1840\" alt=\"12.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/617b2ba4-820b-5ec5-da82-86b16cacc42c.jpeg\">\n\n1. Lambda(Check-LogValidation-Enabled)\u3092\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n<img width=\"1852\" alt=\"13.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/3e14d6e8-84ad-0eb0-381b-68cedd27c34c.jpeg\">\n\n1. managed-account\u306eConfig Rules\u304cCheck-LogValidation-Enabled\u3092Invoke\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n - \u4f8b\u3067\u306f\u3001managed-account(AccountId:2847\u203b\u203b\u203b\u203b1948)\u304cCheck-LogValidation-Enabled\u3092Invoke\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002( **AWS\u30de\u30cd\u30b3\u30f3\u304b\u3089\u306f\u8a2d\u5b9a\u3067\u304d\u307e\u305b\u3093** )\n<img width=\"1306\" alt=\"14.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/68a8d1b3-45ff-2e38-9418-42d0ec5e3962.jpeg\">\n\n1. Lambda\u306e\u6e96\u5099\u304c\u7d42\u4e86\n\n##( managed-account ) AssumeRole\u7528\u306erole\u306e\u8a2d\u5b9a\n\n1. Services\u30bf\u30d6 \u2192 IAM \u2192 \u30ed\u30fc\u30eb \u2192 \u300c\u65b0\u3057\u3044\u30ed\u30fc\u30eb\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n - \u30ed\u30fc\u30eb\u540d\u306f\u9069\u5b9c\u66ff\u3048\u3066\u304f\u3060\u3055\u3044 \n<img width=\"666\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0028-07-10 9.02.35.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/2d160054-34d3-5613-e09d-adb51dfd0ec1.png\">\n\n1. \u30af\u30ed\u30fc\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30a2\u30af\u30bb\u30b9\u306e\u30ed\u30fc\u30eb \u2192 \u300c\u6240\u6709\u3057\u3066\u3044\u308bAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u9593\u306e\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u307e\u3059\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![IMG_0427.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/fc58b495-f30d-1044-bbf7-181c815ce1ee.jpeg)\n\n1. \u30a2\u30ab\u30a6\u30f3\u30c8ID\u6b04\u306b\u4fe1\u983c\u3059\u308b\u5225\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5165\u529b\u3057\u307e\u3059\u3002(\u81ea\u5206\u306e\u5834\u5408\u306f8918****5875)\n - \u300cMFA\u304c\u5fc5\u8981\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3044\u306a\u3044\u3067\u304f\u3060\u3055\u3044(\u5165\u308c\u3066\u3057\u307e\u3046\u3068\u3001\u30af\u30ed\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b\u3001MFA\u3067\uff12\u6bb5\u968e\u8a8d\u8a3c\u3092\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u304f\u306a\u308a\u307e\u3059)\n![IMG_0428.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/6dc2f796-6df0-f92d-f167-cfba89646e68.jpeg)\n\n1. \u30dd\u30ea\u30b7\u30fc\u306b\u3064\u3044\u3066\u306f\u3001\u5f8c\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u306e\u3067\u3001\u4eca\u306f\u3053\u306e\u307e\u307e\u300c\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u300d\u3078\u9032\u307f\u307e\u3057\u3087\u3046\u3002\n![IMG_0429.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/1800dc93-3369-19c4-c2e0-b6856fb064b1.jpeg)\n\n1. \u4e00\u5ea6\u78ba\u8a8d\u3057\u307e\u3059\u3001\u554f\u984c\u304c\u306a\u3051\u308c\u3070\u3001\u300c\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![IMG_0430.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/ce0071ee-e7ad-bf46-9072-aadedbe6901b.jpeg)\n\n1. AssumeRole\u7528\u306e\u30ed\u30fc\u30eb(config-rules-admin)\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u306d\u3002\n![IMG_0431.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/4722e08b-7e17-87c8-f05c-592428d4040f.jpeg)\n\n1. config-rules-admin\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u300d\u306e\u300c\u30a4\u30f3\u30e9\u30a4\u30f3\u30dd\u30ea\u30b7\u30fc\u300d\u3067( admin-account ) Lambda\u7528\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n![IMG_0432.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/124e117f-9441-5c4b-44cf-54e126a302e4.jpeg)\n\n1. \u30ab\u30b9\u30bf\u30e0\u30dd\u30ea\u30b7\u30fc\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![IMG_0433.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/77d73543-bf8f-3c90-dc3c-d85542e5b150.jpeg)\n\n1. \u4f5c\u6210\u3057\u305f\u3044\u30dd\u30ea\u30b7\u30fc\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n![IMG_0434.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/678cd0c8-9bf0-5161-9d21-42bfb7c88cb9.jpeg)\n\n1. \u30ed\u30fc\u30eb\u30dd\u30ea\u30b7\u30fcPutEvaluations\u304c\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n![IMG_0435.JPG](https://qiita-image-store.s3.amazonaws.com/0/117156/9c750a90-c67b-a150-04cc-2e04b6c70ce4.jpeg)\n\n1. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u5316\u3059\u308b\u305f\u3081\u306b\u3001\u4fe1\u983c\u95a2\u4fc2\u3092\u4fee\u6b63\u3057\u307e\u3059\u306e\u3067\u3001\u300c\u4fe1\u983c\u95a2\u4fc2\u306e\u7de8\u96c6\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n<img width=\"1516\" alt=\"1.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/d307eccd-b08c-00a5-faf9-a825b49c33f2.jpeg\">\n\n1. \u4fe1\u983c\u3059\u308b\u306e\u3092( admin-account ) Lambda\u7528\u306e\u30ed\u30fc\u30eb(\u4f8b\u3067\u306f\u3001lambda_basic_execution)\u306b\u9650\u5b9a\u3057\u307e\u3059\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n<img width=\"1252\" alt=\"2.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/6b69f1cf-3b4b-455b-4b2b-7736c4c3e79f.jpeg\">\n\n1. \u4fe1\u983c\u95a2\u4fc2\u3092\u4fee\u6b63\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n<img width=\"1400\" alt=\"3.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/27ce47d8-4151-dc5f-19ee-adafb2701ef5.jpeg\">\n\n1. AssumeRole\u7528\u306e\u30ed\u30fc\u30eb\u306e\u6e96\u5099\u304c\u7d42\u4e86\n\n##( managed-account ) SNS\u306e\u8a2d\u5b9a\n1. AWS Config\u306eSettings \u2192 Amazon SNS topic\u306e\u90e8\u5206\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n - Topic name\u306f\u4efb\u610f\u306e\u540d\u524d\u3067\u826f\u3044\u3067\u3059\u3002(\u4eca\u56de\u306fEvaluations-report\u3068\u3057\u307e\u3059)\n<img width=\"465\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0028-07-10 0.04.35.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/86aaa52a-76aa-b890-0eee-6d6fac8da55c.png\">\n\n1. Services\u306eSNS \u2192 Topic \u3001Evaluations-report\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n - \u65b0\u3057\u3044Topic(Evaluations-report)\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u306d\n<img width=\"1470\" alt=\"1.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/0aa31cb6-dde8-4d9c-0841-db211860aa26.jpeg\">\n\n1. Create subscription\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3068\u3001\u65b0\u3057\u3044\u6b04\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n<img width=\"1354\" alt=\"3.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/dd8438c4-f55b-51e0-3de1-840ea9c7d2d3.jpeg\">\n\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\nProtocol\u3092**Email**\u306b\u9078\u629e\u3057\u3001Endpoint\u306b\u901a\u77e5\u5148\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u3001Create subscription\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n<img width=\"1330\" alt=\"4.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/1c7aa586-16e0-7d38-de65-7d1c9a8c111b.jpeg\">\n\n1. Create subscription\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u78ba\u8a8d\u7528\u306eMessage\u304cAWS\u304b\u3089\u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u4ed8\u3055\u308c\u307e\u3059\u3002\u78ba\u8a8d\u3092\u53d6\u308c\u308b\u307e\u3067\u3001Subscription ID\u306e\u3068\u3053\u308d\u306b\u306f**PendingConfirmation**\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n<img width=\"1502\" alt=\"5.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/cbf8008e-49dc-536d-6d37-1757ab245349.jpeg\">\n\n1. \u9001\u4fe1\u3055\u308c\u305f\u30e1\u30fc\u30eb\u3092\u78ba\u8a8d\u3057\u3001Confirm subscription\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\n<img width=\"1296\" alt=\"6.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/27c6b510-92d6-324e-6d98-1535f7c9a4d1.jpeg\">\n\n\n1. AWS\u304c\u78ba\u8a8d\u3092\u53d6\u308c\u308c\u308b\u3068\u3001Subscription ID\u306e\u3068\u3053\u308d\u306b\u306fSubscription ID\u306e\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n<img width=\"1846\" alt=\"7.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/97e53f13-8c94-a61a-fdad-b1f78626fcea.jpeg\">\n\n1. SNS\u306e\u8a2d\u5b9a\u304c\u5b8c\u4e86\n\n\n\n\n\n##( managed-account ) Config Rules\u306e\u8a2d\u5b9a\n\n1. Services\u30bf\u30d6 \u2192 Config \u2192 Rules \u2192 Add rule\u306b\u3066\u3001custom rule\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n<img width=\"1770\" alt=\"16.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/0a2666fc-61aa-b78e-b3a1-34876966c2e2.jpeg\">\n\n1. custom rule\u306econfig\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n - Name\u306f\u9069\u5b9c\u3067\u826f\u3044\u3067\u3059\u3002(\u4f8b\u3067\u306f\u3001CloudTrail-LogValidation-Enabled)\n - AWS Lambda function ARN\u6b04\u306b\u3001( admin-account ) Lambda **Check-LogValidation-Enabled**\u306eARN\u3092\u8a18\u5165\u3057\u307e\u3059\u3002\n - Trigger\u306b\u3064\u3044\u3066\u306f\u3001\u56f3\u306b\u793a\u3059\u901a\u308a\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n - Rule parameters\u306fKey\u3092**executionRole**\u306b\u3001Value\u3092AssumeRole\u7528\u306e\u30ed\u30fc\u30eb**config-rules-admin\u306eARN**\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n<img width=\"1442\" alt=\"17.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/fa253b1a-45bd-7281-93bb-edf15d21dd17.jpeg\">\n<img width=\"1122\" alt=\"18.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/14b77eba-11bf-d778-6adb-88ca1892bbd4.jpeg\">\n<img width=\"1420\" alt=\"19.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/0c6e3bb2-2f7c-8e07-880d-4b714b722f27.jpeg\">\n\n1. config rule\u3092\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3089\u3001 \u6e96\u5099\u304c\u7d42\u4e86\n<img width=\"1812\" alt=\"20.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/0f30c57f-f93d-7e1e-ab87-bdeae10d4292.jpeg\">\n\n#\u691c\u8a3c\u306e\u524d\u63d0\u6761\u4ef6\n\u3000managed-account\u306b\u65e2\u306bCloudTrail\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\u3002\u5f53\u7136\u306e\u3053\u3068\u306a\u3093\u3067\u3059\u304c\u3001CloudTrail\u3092\u8a2d\u5b9a\u3055\u308c\u306a\u3044\u3068\u3001\uff08\u8a55\u4fa1\u5bfe\u8c61\u304c\u306a\u3044\u304b\u3089\uff09Config Rules\u304c\u8a55\u4fa1\u3067\u304d\u307e\u305b\u3093\u3002\n\u3000\u3061\u306a\u307f\u306b\u3001\u3053\u3093\u306a\u691c\u8a3c\u7528\u306eCloudTrail\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\u300cEnable log file validation\u300d\u306f\u300c**No**\u300d\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n<img width=\"1218\" alt=\"24.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/43a8f64e-1388-2fa7-88b2-7fbe318d78ab.jpeg\">\n\n#\u691c\u8a3c\u7d50\u679c\n##Enable log file validation\u304cNo\u306e\u5834\u5408\n###Config Rules\n\u3000\u30ea\u30bd\u30fc\u30b9Cloud-Trail\u306b\u5bfe\u3059\u308b\u8a55\u4fa1\u306fNoncompliant\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\n<img width=\"1526\" alt=\"21.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/efa44217-e66d-01ef-9cb8-de1f6f7877ed.jpeg\">\n\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\n<img width=\"1496\" alt=\"22.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/dcf938f4-3604-0c75-4580-c192e9c93c78.jpeg\">\n\n###E-mail\u901a\u77e5\n\u3000\u7ba1\u7406\u8005\u306eE-mail\u306bConfig\u306e\u8a55\u4fa1\u30ec\u30dd\u30fc\u30c8\u304c\u9001\u4fe1\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3067\u3001\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u304cNoncompliant\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u5206\u304b\u308a\u307e\u3059\u306d\uff01\n\n<img width=\"1442\" alt=\"23.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/f589b0e9-c8c7-a8d9-0b74-11a92bddfbe2.jpeg\">\n\n\n\n##Enable log file validation\u304cYes\u306b\u8a2d\u5b9a\u3057\u305f\u5834\u5408\n###Config Rules\n\u3000\u30ea\u30bd\u30fc\u30b9Cloud-Trail\u306b\u5bfe\u3059\u308b\u8a55\u4fa1\u306f\u3061\u3083\u3093\u3068Compliant\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n<img width=\"1514\" alt=\"25.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/46c8e033-37af-6b81-198f-3ca9a35fd5cb.jpeg\">\n\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\u2193\u3000\n<img width=\"1516\" alt=\"26.pic.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/a61786d4-0165-46da-9f55-e20397b3bb8d.jpeg\">\n\n###E-mail\u901a\u77e5\n\u3000\u7ba1\u7406\u8005\u306eE-mail\u306bConfig\u306e\u8a55\u4fa1\u30ec\u30dd\u30fc\u30c8\u304c\u9001\u4fe1\u3055\u308c\u307e\u3059\u3002\u3061\u3083\u3093\u3068logfile\u306evalidation\u3092enable\u306b\u3057\u307e\u3057\u305f\u306e\u3067\u3001Compliant\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u7ba1\u7406\u8005\u306b\u901a\u77e5\u3057\u307e\u3059\u3002\n<img width=\"1260\" alt=\"27.pic_hd.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/117156/b6a55a2d-1748-f4ae-fe84-4eaacdd5e027.jpeg\">\n\n#\u307e\u3068\u3081\n\u3000\u4eca\u56de\u306f\u3001Lambda\u3068Config Rules\u3092\u4f7f\u3063\u3066\u3001CloudTrail\u306elogfile\u306evalidation\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\u8a55\u4fa1\u7d50\u679c\u3092\u7ba1\u7406\u8005\u306b\u901a\u77e5\u3059\u308b\u3053\u3068\u3092\u691c\u8a3c\u3057\u307e\u3057\u305f\u3002\u610f\u5916\u3068\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002\n\u3000Config Rules\u306fAWS\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u3061\u3083\u3093\u3068\u30eb\u30fc\u30eb\u306b\u6cbf\u3063\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\u3067\u304d\u307e\u3059\u306e\u3067\u3001AWS\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u62c5\u5f53\u8005\u3082\u3057\u304f\u306f\u5185\u90e8\u7d71\u5236\u8005\u306b\u3068\u3063\u3066\u3001\u975e\u5e38\u306b\u5f37\u529b\u306a\"\u6b66\u5668\"\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u9055\u53cd\u306b\u306a\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u5373\u5ea7\u306b\u691c\u77e5\u30fb\u901a\u77e5\u304c\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u500b\u4eba\u7684\u306b\u3082\u3055\u3089\u306bConfig Rules\u3092DeepDive\u3057\u3066\u3001\u696d\u52d9\u306b\u3082\u6d3b\u7528\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3000\u73fe\u5728Config Rule\u306b\u4f7f\u3048\u308b\u30de\u30cd\u30fc\u30b8\u30c9\u30eb\u30fc\u30eb\u304c\uff19\u3064\u3042\u3063\u3066\u3001GitHub\u306b\u3082\u4fbf\u5229\u305d\u3046\u306a\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30eb([awslabs/aws-config-rules](https://github.com/awslabs/aws-config-rules))\u304c\u3042\u308a\u307e\u3059\u3002\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u4e00\u5ea6\u3084\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01\n\n#\u6700\u5f8c\n\u3000\u4f59\u8ac7\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u5c11\u3057\u524d\u306b\u3001IAM\u30e6\u30fc\u30b6\u30fbAccessKeys\u306e\u904b\u7528\u7ba1\u7406\u306b\u4f7f\u3046\u3082\u306e\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3001\uff08\u30c8\u30e9\u30a4\u30a2\u30eb\u904b\u7528\u4e2d\u3067\u3059\u304c\uff09\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u4e0b\u8a18\uff12\u3064\u306e\u6295\u7a3f\u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\n- [Lambda & CloudWatchEvents & Slack\u3067 \u9577\u671f\u7684\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044IAM\u30e6\u30fc\u30b6\u3092\u691c\u77e5\u30fb\u901a\u77e5\u3059\u308b](http://qiita.com/jobbin/items/21737cc258cf4268b176)\n- [Lambda & CloudWatchEvents & Slack\u3067 \u9577\u671f\u7684\u306b\u5229\u7528\u3055\u308c\u3066\u3044\u306a\u3044AccessKey\u3092\u691c\u77e5\u30fb\u901a\u77e5\u3059\u308b](http://qiita.com/jobbin/items/986225f0536697685e13)\n", "tags": ["AWS", "Config", "lambda", "SNS", "AWS\u7ba1\u7406\u7d71\u5236"]}