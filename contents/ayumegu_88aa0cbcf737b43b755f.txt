{"context": " More than 1 year has passed since last update.\u5225\u306buGUI\u3058\u3083\u306a\u304f\u3066\u3082\u3067\u304d\u308b\u3051\u3069\u3001\u3061\u3087\u3063\u3068\u3060\u3051\u8868\u793a\u306b\u3053\u3060\u308f\u3063\u305fHP\u30b2\u30fc\u30b8\n\n\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u5206\u3001\u56de\u5fa9\u3057\u305f\u5206\u3092\u8868\u793a\u3057\u3001\u5f90\u3005\u306b\u52d5\u304f\u3084\u3064\u3002\n\u305f\u3044\u3057\u305f\u51e6\u7406\u306f\u3057\u3066\u3044\u306a\u3044\u3067\u3059\u304c\n\u4f5c\u308a\u65b9\u3068\u3057\u3066\u306f\u901a\u5e38\u306eHP\u30b2\u30fc\u30b8\u306e\u5f8c\u308d\u306b\u3082\u3046\u4e00\u679a\u753b\u50cf\u3092\u914d\u7f6e\u3002\n\u30c0\u30e1\u30fc\u30b8\u304b\u56de\u5fa9\u304b\u3067\u8272\u3092\u4fee\u6b63\u3057\u3066\u52d5\u304b\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\u30c0\u30e1\u30fc\u30b8\u306e\u5834\u5408\u306fHP\u306e\u753b\u50cf\u3092\u5148\u306b\u6e1b\u3089\u3057\u305f\u5024\u306b\u3057\u3001\u5f8c\u308d\u306e\u753b\u50cf\u306e\u5024\u306b\u5f90\u3005\u306b\u5024\u306b\u8fd1\u3065\u3051\u3066\u3044\u307e\u3059\u3002\n\u56de\u5fa9\u306e\u5834\u5408\u306f\u5f8c\u308d\u306e\u753b\u50cf\u306e\u5024\u3092\u5148\u306b\u5897\u3084\u3057\u3001HP\u306e\u753b\u50cf\u306e\u5024\u3092\u5f8c\u308d\u306e\u4f4d\u7f6e\u306b\u3080\u304b\u3063\u3066\u8fd1\u3065\u3051\u3066\u3044\u307e\u3059\u3002\n\nusing UnityEngine;\nusing UnityEngine.UI;\nusing System.Collections;\n\npublic class GaugeManager : MonoBehaviour {\n\n    public Text hpLabel;\n    public Image hpSprite;\n    public Image moveSprite;\n    public GameObject actionLabel;\n\n    private int maxHp;\n    private int nowHp;\n    private int moveHp;\n    private Vector4 damageColor;\n    private Vector4 healColor;\n\n    void Awake()\n    {\n        damageColor = new Vector4(0.5f, 0, 0, 1);\n        healColor = new Vector4(0.3f, 1, 0.5f, 1);\n        maxHp = 1000;\n        moveHp = 1000;\n        nowHp = maxHp;\n        hpSprite.fillAmount = (float)nowHp / (float)maxHp;\n        moveSprite.fillAmount = (float)moveHp / (float)maxHp;\n        hpLabel.text = nowHp + \"/\" + maxHp;\n    }\n\n    public void OnDamageClick()\n    {\n        int damage = Random.Range(20,600);\n        moveHp -= damage;\n        if(moveHp < 0) moveHp = 0;\n        actionLabel.GetComponent<Text>().color = damageColor;\n        actionLabel.GetComponent<Text>().text = damage + \"\u30c0\u30e1\u30fc\u30b8\";\n    }\n\n    public void OnHealClick()\n    {\n        int heal = Random.Range(20,600);\n        moveHp += heal;\n        if(moveHp > maxHp) moveHp = maxHp;\n\n        actionLabel.GetComponent<Text>().color = healColor;\n        actionLabel.GetComponent<Text>().text = heal + \"\u56de\u5fa9\";\n\n    }\n\n    void Start () {\n    }\n\n    void Update () {\n        if(nowHp != moveHp)\n        {\n            if(nowHp > moveHp)\n            {\n                // damage\n                nowHp -= Mathf.FloorToInt(maxHp * Time.deltaTime * 0.3f);\n                if(nowHp < moveHp) nowHp = moveHp;\n                moveSprite.color = damageColor;\n                hpSprite.fillAmount = (float)moveHp / (float)maxHp;\n                moveSprite.fillAmount = (float)nowHp / (float)maxHp;\n            }\n            else\n            {\n                // heal\n                nowHp += Mathf.FloorToInt(maxHp * Time.deltaTime * 0.3f);\n                if(nowHp > moveHp) nowHp = moveHp;\n\n                moveSprite.color = healColor;\n                hpSprite.fillAmount = (float)nowHp / (float)maxHp;\n                moveSprite.fillAmount = (float)moveHp / (float)maxHp;\n\n            }\n            hpLabel.text = nowHp + \"/\" + maxHp;\n        }\n    }\n}\n\n\n\u5225\u306buGUI\u3058\u3083\u306a\u304f\u3066\u3082\u3067\u304d\u308b\u3051\u3069\u3001\u3061\u3087\u3063\u3068\u3060\u3051\u8868\u793a\u306b\u3053\u3060\u308f\u3063\u305fHP\u30b2\u30fc\u30b8\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/46444/8b83aed8-f865-428e-c313-1e6b7ffff120.gif\">\n\n\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u5206\u3001\u56de\u5fa9\u3057\u305f\u5206\u3092\u8868\u793a\u3057\u3001\u5f90\u3005\u306b\u52d5\u304f\u3084\u3064\u3002\n\u305f\u3044\u3057\u305f\u51e6\u7406\u306f\u3057\u3066\u3044\u306a\u3044\u3067\u3059\u304c\n\n\u4f5c\u308a\u65b9\u3068\u3057\u3066\u306f\u901a\u5e38\u306eHP\u30b2\u30fc\u30b8\u306e\u5f8c\u308d\u306b\u3082\u3046\u4e00\u679a\u753b\u50cf\u3092\u914d\u7f6e\u3002\n\u30c0\u30e1\u30fc\u30b8\u304b\u56de\u5fa9\u304b\u3067\u8272\u3092\u4fee\u6b63\u3057\u3066\u52d5\u304b\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\u30c0\u30e1\u30fc\u30b8\u306e\u5834\u5408\u306fHP\u306e\u753b\u50cf\u3092\u5148\u306b\u6e1b\u3089\u3057\u305f\u5024\u306b\u3057\u3001\u5f8c\u308d\u306e\u753b\u50cf\u306e\u5024\u306b\u5f90\u3005\u306b\u5024\u306b\u8fd1\u3065\u3051\u3066\u3044\u307e\u3059\u3002\n\u56de\u5fa9\u306e\u5834\u5408\u306f\u5f8c\u308d\u306e\u753b\u50cf\u306e\u5024\u3092\u5148\u306b\u5897\u3084\u3057\u3001HP\u306e\u753b\u50cf\u306e\u5024\u3092\u5f8c\u308d\u306e\u4f4d\u7f6e\u306b\u3080\u304b\u3063\u3066\u8fd1\u3065\u3051\u3066\u3044\u307e\u3059\u3002\n\n```csharp\n\nusing UnityEngine;\nusing UnityEngine.UI;\nusing System.Collections;\n\npublic class GaugeManager : MonoBehaviour {\n\n\tpublic Text hpLabel;\n\tpublic Image hpSprite;\n\tpublic Image moveSprite;\n\tpublic GameObject actionLabel;\n\n\tprivate int maxHp;\n\tprivate int nowHp;\n\tprivate int moveHp;\n\tprivate Vector4 damageColor;\n\tprivate Vector4 healColor;\n\n\tvoid Awake()\n\t{\n\t\tdamageColor = new Vector4(0.5f, 0, 0, 1);\n\t\thealColor = new Vector4(0.3f, 1, 0.5f, 1);\n\t\tmaxHp = 1000;\n\t\tmoveHp = 1000;\n\t\tnowHp = maxHp;\n\t\thpSprite.fillAmount = (float)nowHp / (float)maxHp;\n\t\tmoveSprite.fillAmount = (float)moveHp / (float)maxHp;\n\t\thpLabel.text = nowHp + \"/\" + maxHp;\n\t}\n\n\tpublic void OnDamageClick()\n\t{\n\t\tint damage = Random.Range(20,600);\n\t\tmoveHp -= damage;\n\t\tif(moveHp < 0) moveHp = 0;\n\t\tactionLabel.GetComponent<Text>().color = damageColor;\n\t\tactionLabel.GetComponent<Text>().text = damage + \"\u30c0\u30e1\u30fc\u30b8\";\n\t}\n\n\tpublic void OnHealClick()\n\t{\n\t\tint heal = Random.Range(20,600);\n\t\tmoveHp += heal;\n\t\tif(moveHp > maxHp) moveHp = maxHp;\n\n\t\tactionLabel.GetComponent<Text>().color = healColor;\n\t\tactionLabel.GetComponent<Text>().text = heal + \"\u56de\u5fa9\";\n\n\t}\n\t\n\tvoid Start () {\n\t}\n\n\tvoid Update () {\n\t\tif(nowHp != moveHp)\n\t\t{\n\t\t\tif(nowHp > moveHp)\n\t\t\t{\n\t\t\t\t// damage\n\t\t\t\tnowHp -= Mathf.FloorToInt(maxHp * Time.deltaTime * 0.3f);\n\t\t\t\tif(nowHp < moveHp) nowHp = moveHp;\n\t\t\t\tmoveSprite.color = damageColor;\n\t\t\t\thpSprite.fillAmount = (float)moveHp / (float)maxHp;\n\t\t\t\tmoveSprite.fillAmount = (float)nowHp / (float)maxHp;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// heal\n\t\t\t\tnowHp += Mathf.FloorToInt(maxHp * Time.deltaTime * 0.3f);\n\t\t\t\tif(nowHp > moveHp) nowHp = moveHp;\n\n\t\t\t\tmoveSprite.color = healColor;\n\t\t\t\thpSprite.fillAmount = (float)nowHp / (float)maxHp;\n\t\t\t\tmoveSprite.fillAmount = (float)moveHp / (float)maxHp;\n\n\t\t\t}\n\t\t\thpLabel.text = nowHp + \"/\" + maxHp;\n\t\t}\n\t}\n}\n\n```\n", "tags": ["Unity", "uGUI"]}