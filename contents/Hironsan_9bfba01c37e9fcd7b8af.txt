{"context": "\n\n\u306f\u3058\u3081\u306b\n\u4eca\u307e\u3067\u3084\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u7d44\u307f\u5408\u308f\u305b\u3066Slack\u306b\u30b3\u30e1\u30f3\u30c8\u4ed8\u304d\u3067\u540d\u523a\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u3001\u540d\u523a\u60c5\u5831\u3092kintone\u306b\u767b\u9332\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002API\u3092\u4f7f\u3046\u305f\u3081\u306bPython\u3092\u7528\u3044\u3066\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u524d\u56de\u8a18\u4e8b\u306f\u3053\u3061\u3089:\n\nVision API\u3068Natural Language API\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u540d\u523a\u304b\u3089\u60c5\u5831\u62bd\u51fa\u3059\u308b\n\n\n\u3053\u308c\u304b\u3089\u4f5c\u308b\u30a2\u30d7\u30ea\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u540d\u523a\u753b\u50cf\u3092Slack\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068Bot\u304c\u60c5\u5831\u3092\u62bd\u51fa\u3057\u3066kintone\u306b\u767b\u9332\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\nSlack\u3068\u306f\uff1f\n\n\u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u6d41\u308c\nStep 0\uff1a\u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u6e96\u5099\u3092\u3059\u308b\n\u2193\nStep 1\uff1apykintone\u3092\u4f7f\u3063\u3066kintone\u306b\u30c7\u30fc\u30bf\u767b\u9332\u3092\u3059\u308b\n\u2193\nStep 2\uff1aSlackBot\u3092\u4f5c\u308b\n\u2193\nStep 3\uff1aSlack\u304b\u3089kintone\u3078\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\n\nStep0(10min) \u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u6e96\u5099\u3092\u3059\u308b\n\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u305f\u3081\u306b\u3001\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001SlackBot\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u3001API\u30ad\u30fc\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ pip install pykintone\n$ pip install slackbot\n\n\nSlackBot\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\u307e\u305a\u306fSlack Bot\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\nhttps://my.slack.com/services/new/bot\n\u65e2\u306b\u30c1\u30fc\u30e0\u306eSlack\u306f\u958b\u8a2d\u6e08\u3067\u3001\u6a29\u9650\u306e\u3042\u308b\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\u305d\u306e\u72b6\u614b\u3067\u3001\u4e0a\u8a18\u30ea\u30f3\u30af\u3092\u958b\u304f\u3068\u3001Bot\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u753b\u9762\u304c\u958b\u304d\u307e\u3059\u3002\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30d5\u30a9\u30fc\u30e0\u4e2d\u306bBot\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e6\u30fc\u30b6\u540d\u3092\u5165\u529b\u3057\u3066\u3001\u300cAdd bot integration\u300d\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u300cAdd bot integration\u300d\u3092\u62bc\u3059\u3068\u3001\u65b0\u305f\u306b\u30d5\u30a9\u30fc\u30e0\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u4e2d\u306e\u300cAPI Token\u300d\u306f\u5f8c\u3067\u4f5c\u6210\u3059\u308bBot\u3067\u7528\u3044\u308b\u306e\u3067\u30e1\u30e2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u300cCustomize Icon\u300d\u3084\u300cCustomize Name\u300d\u3067\u4f5c\u6210\u3057\u305fBot\u306e\u540d\u524d\u3084\u30a2\u30a4\u30b3\u30f3\u753b\u50cf\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u5909\u66f4\u5185\u5bb9\u3092\u300cSave Integration\u300d\u3067\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u5f8c\u306e\u30c6\u30b9\u30c8\u7528\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u4f5c\u6210\u3057\u3066\u4f5c\u6210\u3057\u305fBot\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u305f\u3089\u3001\u300cCreate Channel\u300d\u3067\u5185\u5bb9\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u3067SlackBot\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nAPI\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\n\nSlack\u306eAPI\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\nSlack\u3067\u53d6\u5f97\u3057\u305fAPI\u30ad\u30fc\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(plugins/config/slack.yaml)\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067slack.yaml\u3092\u958b\u3044\u3066\u3001token\u306e\u5024\u3092\u3042\u306a\u305f\u306eSlack\u306eAPI\u30ad\u30fc\u306e\u5024\u3067\u4e0a\u66f8\u304d\u3057\u307e\u3057\u3087\u3046\u3002xxx\u306e\u90e8\u5206\u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nslack.yaml\ntoken: xxx\n\n\n\nkintone\u306eAPI\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\nkintone\u3067\u53d6\u5f97\u3057\u305fAPI\u30ad\u30fc\u3001\u30c9\u30e1\u30a4\u30f3\u540d\u3001\u30a2\u30d7\u30eaID\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(plugins/config/kintone.yaml)\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067kintone.yaml\u3092\u958b\u3044\u3066\u3001domain\u3001id\u3001token\u306e\u5024\u3092\u3042\u306a\u305f\u306ekintone\u30a2\u30d7\u30ea\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3001\u30a2\u30d7\u30eaID\u3001API\u30ad\u30fc\u306e\u5024\u3067\u4e0a\u66f8\u304d\u3057\u307e\u3057\u3087\u3046\u3002xxx\u306e\u90e8\u5206\u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nkintone.yaml\ndomain: xxx\napps:\n    test:\n        id: xxx\n        token: xxx\n\n\n\nStep1(10min) pykintone\u3092\u4f7f\u3063\u3066kintone\u306b\u30c7\u30fc\u30bf\u767b\u9332\u3092\u3059\u308b\n\u3053\u3053\u3067\u306fpykintone\u3092\u4f7f\u3063\u3066kintone\u306b\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u3092\u884c\u3044\u307e\u3059\u3002\u8a18\u8ff0\u3092\u884c\u3063\u305f\u3089\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3067\u306f\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u304b\u3089\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\nkintone\u306b\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306b\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u6240\u306f\u3001plugins/apis/kintone.py\u3067\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067kintone.py\u3092\u958b\u3044\u3066\u3001\u5185\u5bb9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3057\u3087\u3046\u3002\u66f8\u304d\u63db\u3048\u7d42\u308f\u3063\u305f\u3089\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u969b\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306fUTF8\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n# -*- coding: utf-8 -*-\nimport pykintone\nfrom pykintone import model\nimport pykintone.structure_field as sf\n\n\nclass BusinessCard(model.kintoneModel):\n\n    def __init__(self, app, name, company, location, impression, submitter, image_path):\n        super(BusinessCard, self).__init__()\n        self.name = name\n        self.company = company\n        self.location = location\n        self.impression = impression\n        self.submitter = submitter\n        self.image = [sf.File.upload(image_path, app)]\n\n\ndef create_card(comment, entities, file_path, submitter, conf_path):\n    app = pykintone.load(conf_path).app()\n\n    name, company, location = entities['PERSON'], entities['ORGANIZATION'], entities['LOCATION']\n    card = BusinessCard(app, name, company, location, comment, submitter, file_path)\n    result = app.create(card)\n\n    if result.ok:\n        return result\n    else:\n        print(result.error)\n\ncreate_card\u306b\u540d\u523a\u60c5\u5831\u3068API\u30ad\u30fc\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u3001\u540d\u523a\u60c5\u5831\u3092kintone\u306b\u767b\u9332\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u3067\u306f\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\u5148\u307b\u3069\u66f8\u3044\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u307e\u305aplugins/tests\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u4e2d\u306btest_kintone.py\u304c\u3042\u308b\u306e\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u304b\u3002test_kintone.py\u3067\u306f\u5148\u307b\u3069\u66f8\u3044\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u306ecreate_card\u3092\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u6b63\u3057\u304f\u52d5\u4f5c\u3059\u308c\u3070\u540d\u523a\u60c5\u5831\u3092\u4e0e\u3048\u305f\u6642\u306b\u305d\u306e\u60c5\u5831\u304ckintone\u306b\u767b\u9332\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n$ python test_kintone.py data/example.png\n\n\u5b9f\u884c\u7d50\u679c\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306bkintone\u306b\u540d\u523a\u60c5\u5831\u304c\u767b\u9332\u3055\u308c\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\nStep2(10min) SlackBot\u3092\u4f5c\u308b\n\u3053\u3053\u3067\u306f\u3054\u304f\u3054\u304f\u57fa\u790e\u7684\u306aSlackBot\u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u3092\u884c\u3044\u307e\u3059\u3002\u8a18\u8ff0\u3092\u884c\u3063\u305f\u3089\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3067\u306f\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u304b\u3089\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\nSlackBot\u3092\u4f5c\u308b\u305f\u3081\u306b\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u6240\u306f\u3001plugins/slack.py\u3067\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067slack.py\u3092\u958b\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u8ffd\u8a18\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u8ffd\u8a18\u3057\u7d42\u308f\u3063\u305f\u3089\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u969b\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306fUTF8\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\nfrom slackbot.bot import respond_to\n\n@respond_to('\u3053\u3093\u306b\u3061\u306f')\n@respond_to('\u4eca\u65e5\u306f')\ndef hello(message):\n    message.reply('\u3053\u3093\u306b\u3061\u306f!')\n\n\u201crespond_to\u201d\u306b\u30de\u30c3\u30c1\u3059\u308b\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001Bot\u306b\u5bfe\u3059\u308b\u30e1\u30f3\u30b7\u30e7\u30f3\u306b\u53cd\u5fdc\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3068\u306b\u304b\u304f\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\u3067\u306fSlackBot\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306b\u3042\u308bbot.py\u3092\u8d77\u52d5\u3057\u3066@\u3092\u3064\u3051\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ python bot.py\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u53cd\u5fdc\u3057\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\nStep3(10min) Slack\u304b\u3089kintone\u3078\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u4eca\u307e\u3067\u306e\u96c6\u5927\u6210\u3067\u3059\u3002Slack\u306b\u540d\u523a\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u3001SlackBot\u7d4c\u7531\u3067kintone\u306b\u60c5\u5831\u3092\u767b\u9332\u3057\u307e\u3059\u3002\u307e\u305a\u306fVision API\u3001Natural Language API\u3001kintone API\u3092\u7d71\u5408\u3057\u305fSlackBot\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u3092\u884c\u3044\u307e\u3059\u3002\u8a18\u8ff0\u3092\u884c\u3063\u305f\u3089\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3067\u306f\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u304b\u3089\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\nSlackBot\u304b\u3089kintone\u306b\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u6240\u306f\u3001plugins/slack.py\u3067\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067slack.py\u3092\u958b\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u8ffd\u8a18\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u8ffd\u8a18\u3057\u7d42\u308f\u3063\u305f\u3089\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u969b\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306fUTF8\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n@listen_to('(.*)')\ndef anymessage(message, something):\n    if 'file' in message.body:\n        slack_token = loader(os.path.join(BASE_DIR, 'config/slack.yaml'))\n        google_token = loader(os.path.join(BASE_DIR, 'config/google.yaml'))\n        kintone_conf = os.path.join(BASE_DIR, 'config/kintone.yaml')\n\n        url = message.body['file']['url_private_download']\n        submitter = get_user_name(message.body['user'], slack_token['token'])\n        img_path = download_image(url, slack_token['token'])\n\n        entities = extract_entities_from_img(img_path, google_token['token'])\n\n        comment = message.body['file']['initial_comment']['comment']\n        create_card(comment, entities, img_path, submitter, kintone_conf)\n        message.reply('\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3057\u307e\u3057\u305f\u3002')\n    else:\n        message.reply('\u540d\u523a\u60c5\u5831\u306e\u767b\u9332\u3092\u3067\u304d\u307e\u3059\u3088\u3002')\n\n\u540d\u523a\u753b\u50cf\u304c\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u5834\u5408\u306f\u3001\u540d\u523a\u753b\u50cf\u304b\u3089\u60c5\u5831\u3092\u62bd\u51fa\u3057\u3066kintone\u3078\u767b\u9332\u3059\u308b\u3088\u3046\u306a\u51e6\u7406\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\u3067\u306f\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\u3067\u306fSlackBot\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306b\u3042\u308bbot.py\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ python bot.py\n\n\u540d\u523a\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u5b9f\u884c\u7d50\u679c\u3068\u3057\u3066kintone\u306b\u60c5\u5831\u304c\u767b\u9332\u3055\u308c\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\n\u304a\u308f\u308a\u306b\n\u3044\u304b\u304c\u3060\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\nVision API\u3001Natural Language API\u3001kintone\u3001Slack\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u540d\u523a\u7ba1\u7406\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u3063\u3066\u898b\u307e\u3057\u305f\u3002\u53ef\u80fd\u6027\u3092\u611f\u3058\u3066\u3044\u305f\u3060\u3051\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n\u4eca\u56de\u306f\u767b\u9332\u3057\u304b\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001Bot\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3089\u306eweb API\u3084\u4ed6\u306eweb API\u3001\u3082\u3057\u304f\u306f\u3001\u81ea\u4f5c\u306eweb API\u3092\u7528\u610f\u3057\u3066\u3001\u8ce2\u3044\u51e6\u7406\u3092\u3059\u308b\u4ed5\u7d44\u307f\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\u304a\u3064\u304b\u308c\u3055\u307e\u3067\u3057\u305f\u3002\n\n\u8a18\u4e8b\u307e\u3068\u3081\n\u4eca\u56de\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u5185\u5bb9\u306f\uff13\u3064\u306e\u8a18\u4e8b\u306b\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002\n\nkintone\u3067\u540d\u523a\u7ba1\u7406\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046\nVision API\u3068Natural Language API\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u540d\u523a\u304b\u3089\u60c5\u5831\u62bd\u51fa\u3059\u308b\n\u540d\u523a\u304b\u3089\u60c5\u5831\u3092\u62bd\u51fa\u3059\u308bSlackBot\u3092\u4f5c\u308b\n\n\u4e8b\u524d\u6e96\u5099\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u304b\u3089\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\nkintone x \u6a5f\u68b0\u5b66\u7fd2\u3067\u5b9f\u73fe\u3059\u308b\u7c21\u5358\u540d\u523a\u7ba1\u7406@kintone Caf\u00e9\n\n# \u306f\u3058\u3081\u306b\n\u4eca\u307e\u3067\u3084\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u7d44\u307f\u5408\u308f\u305b\u3066Slack\u306b\u30b3\u30e1\u30f3\u30c8\u4ed8\u304d\u3067\u540d\u523a\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u3001\u540d\u523a\u60c5\u5831\u3092kintone\u306b\u767b\u9332\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002API\u3092\u4f7f\u3046\u305f\u3081\u306bPython\u3092\u7528\u3044\u3066\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u524d\u56de\u8a18\u4e8b\u306f\u3053\u3061\u3089:\n\n* [Vision API\u3068Natural Language API\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u540d\u523a\u304b\u3089\u60c5\u5831\u62bd\u51fa\u3059\u308b](http://qiita.com/Hironsan/items/166515acec35658986b2)\n\n# \u3053\u308c\u304b\u3089\u4f5c\u308b\u30a2\u30d7\u30ea\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u540d\u523a\u753b\u50cf\u3092Slack\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068Bot\u304c\u60c5\u5831\u3092\u62bd\u51fa\u3057\u3066kintone\u306b\u767b\u9332\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n<img width=\"450\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-08 15.59.53.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/4d561447-022d-f7a3-9fa9-123c957cbd8b.png\">\n\n[Slack\u3068\u306f\uff1f](https://www.youtube.com/watch?v=9RJZMSsH7-g)\n\n# \u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u6d41\u308c\nStep 0\uff1a\u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u6e96\u5099\u3092\u3059\u308b\n\u2193\nStep 1\uff1apykintone\u3092\u4f7f\u3063\u3066kintone\u306b\u30c7\u30fc\u30bf\u767b\u9332\u3092\u3059\u308b\n\u2193\nStep 2\uff1aSlackBot\u3092\u4f5c\u308b\n\u2193\nStep 3\uff1aSlack\u304b\u3089kintone\u3078\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\n\n\n# Step0(10min) \u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u6e96\u5099\u3092\u3059\u308b\n\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u305f\u3081\u306b\u3001\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001SlackBot\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u3001API\u30ad\u30fc\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n## \u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```shell-session\n$ pip install pykintone\n$ pip install slackbot\n```\n\n## SlackBot\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\u307e\u305a\u306fSlack Bot\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\n<!--\n[https://api.slack.com/bot-users](https://api.slack.com/bot-users)\n-->\n[https://my.slack.com/services/new/bot](https://my.slack.com/services/new/bot)\n\n\u65e2\u306b\u30c1\u30fc\u30e0\u306eSlack\u306f\u958b\u8a2d\u6e08\u3067\u3001\u6a29\u9650\u306e\u3042\u308b\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\u305d\u306e\u72b6\u614b\u3067\u3001\u4e0a\u8a18\u30ea\u30f3\u30af\u3092\u958b\u304f\u3068\u3001Bot\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u753b\u9762\u304c\u958b\u304d\u307e\u3059\u3002\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30d5\u30a9\u30fc\u30e0\u4e2d\u306bBot\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e6\u30fc\u30b6\u540d\u3092\u5165\u529b\u3057\u3066\u3001\u300cAdd bot integration\u300d\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n<img width=\"450\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-21 22.10.05.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/3273c39b-618d-b712-2928-7905516fd9a0.png\">\n\n\n\u300cAdd bot integration\u300d\u3092\u62bc\u3059\u3068\u3001\u65b0\u305f\u306b\u30d5\u30a9\u30fc\u30e0\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u4e2d\u306e\u300cAPI Token\u300d\u306f\u5f8c\u3067\u4f5c\u6210\u3059\u308bBot\u3067\u7528\u3044\u308b\u306e\u3067\u30e1\u30e2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n<img width=\"450\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-21 22.25.23.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/42c5aba5-0ced-6ee6-4b77-00bd3ecac688.png\">\n\n\n\u300cCustomize Icon\u300d\u3084\u300cCustomize Name\u300d\u3067\u4f5c\u6210\u3057\u305fBot\u306e\u540d\u524d\u3084\u30a2\u30a4\u30b3\u30f3\u753b\u50cf\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u5909\u66f4\u5185\u5bb9\u3092\u300cSave Integration\u300d\u3067\u4fdd\u5b58\u3057\u307e\u3059\u3002\n<img width=\"450\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-21 22.26.46.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/455e3859-7487-b7f3-a3bb-4257e099d203.png\">\n\n\n\u3053\u306e\u5f8c\u306e\u30c6\u30b9\u30c8\u7528\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u4f5c\u6210\u3057\u3066\u4f5c\u6210\u3057\u305fBot\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u305f\u3089\u3001\u300cCreate Channel\u300d\u3067\u5185\u5bb9\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002\n<img width=\"450\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-21 22.30.18.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/a28c5a27-cb19-cc78-cc39-8e452e9ac920.png\">\n\n\u4ee5\u4e0a\u3067SlackBot\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\n## API\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\n### Slack\u306eAPI\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\nSlack\u3067\u53d6\u5f97\u3057\u305fAPI\u30ad\u30fc\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(plugins/config/slack.yaml)\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067slack.yaml\u3092\u958b\u3044\u3066\u3001token\u306e\u5024\u3092\u3042\u306a\u305f\u306eSlack\u306eAPI\u30ad\u30fc\u306e\u5024\u3067\u4e0a\u66f8\u304d\u3057\u307e\u3057\u3087\u3046\u3002xxx\u306e\u90e8\u5206\u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```yaml:slack.yaml\ntoken: xxx\n```\n\n### kintone\u306eAPI\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\nkintone\u3067\u53d6\u5f97\u3057\u305fAPI\u30ad\u30fc\u3001\u30c9\u30e1\u30a4\u30f3\u540d\u3001\u30a2\u30d7\u30eaID\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(plugins/config/kintone.yaml)\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067kintone.yaml\u3092\u958b\u3044\u3066\u3001domain\u3001id\u3001token\u306e\u5024\u3092\u3042\u306a\u305f\u306ekintone\u30a2\u30d7\u30ea\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3001\u30a2\u30d7\u30eaID\u3001API\u30ad\u30fc\u306e\u5024\u3067\u4e0a\u66f8\u304d\u3057\u307e\u3057\u3087\u3046\u3002xxx\u306e\u90e8\u5206\u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```yaml:kintone.yaml\ndomain: xxx\napps:\n    test:\n        id: xxx\n        token: xxx\n```\n\n# Step1(10min) pykintone\u3092\u4f7f\u3063\u3066kintone\u306b\u30c7\u30fc\u30bf\u767b\u9332\u3092\u3059\u308b\n\u3053\u3053\u3067\u306fpykintone\u3092\u4f7f\u3063\u3066kintone\u306b\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u3092\u884c\u3044\u307e\u3059\u3002\u8a18\u8ff0\u3092\u884c\u3063\u305f\u3089\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3067\u306f\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u304b\u3089\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\nkintone\u306b\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306b\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u6240\u306f\u3001plugins/apis/kintone.py\u3067\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067kintone.py\u3092\u958b\u3044\u3066\u3001\u5185\u5bb9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3057\u3087\u3046\u3002\u66f8\u304d\u63db\u3048\u7d42\u308f\u3063\u305f\u3089\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u969b\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306fUTF8\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n```py3\n# -*- coding: utf-8 -*-\nimport pykintone\nfrom pykintone import model\nimport pykintone.structure_field as sf\n\n\nclass BusinessCard(model.kintoneModel):\n\n    def __init__(self, app, name, company, location, impression, submitter, image_path):\n        super(BusinessCard, self).__init__()\n        self.name = name\n        self.company = company\n        self.location = location\n        self.impression = impression\n        self.submitter = submitter\n        self.image = [sf.File.upload(image_path, app)]\n\n\ndef create_card(comment, entities, file_path, submitter, conf_path):\n    app = pykintone.load(conf_path).app()\n\n    name, company, location = entities['PERSON'], entities['ORGANIZATION'], entities['LOCATION']\n    card = BusinessCard(app, name, company, location, comment, submitter, file_path)\n    result = app.create(card)\n\n    if result.ok:\n        return result\n    else:\n        print(result.error)\n```\n\ncreate_card\u306b\u540d\u523a\u60c5\u5831\u3068API\u30ad\u30fc\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u3001\u540d\u523a\u60c5\u5831\u3092kintone\u306b\u767b\u9332\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u3067\u306f\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\u5148\u307b\u3069\u66f8\u3044\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u307e\u305aplugins/tests\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u4e2d\u306btest_kintone.py\u304c\u3042\u308b\u306e\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u304b\u3002test_kintone.py\u3067\u306f\u5148\u307b\u3069\u66f8\u3044\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u306ecreate_card\u3092\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u6b63\u3057\u304f\u52d5\u4f5c\u3059\u308c\u3070\u540d\u523a\u60c5\u5831\u3092\u4e0e\u3048\u305f\u6642\u306b\u305d\u306e\u60c5\u5831\u304ckintone\u306b\u767b\u9332\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n```shell-session\n$ python test_kintone.py data/example.png\n```\n\n\u5b9f\u884c\u7d50\u679c\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306bkintone\u306b\u540d\u523a\u60c5\u5831\u304c\u767b\u9332\u3055\u308c\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n<img width=\"1044\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-08 15.19.12.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/eb5705d8-143e-9ca1-6677-a33a595888c9.png\">\n\n\n\n# Step2(10min) SlackBot\u3092\u4f5c\u308b\n\u3053\u3053\u3067\u306f\u3054\u304f\u3054\u304f\u57fa\u790e\u7684\u306aSlackBot\u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u3092\u884c\u3044\u307e\u3059\u3002\u8a18\u8ff0\u3092\u884c\u3063\u305f\u3089\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3067\u306f\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u304b\u3089\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\nSlackBot\u3092\u4f5c\u308b\u305f\u3081\u306b\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u6240\u306f\u3001plugins/slack.py\u3067\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067slack.py\u3092\u958b\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092**<font color=\"red\">\u8ffd\u8a18</font>**\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u8ffd\u8a18\u3057\u7d42\u308f\u3063\u305f\u3089\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u969b\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306fUTF8\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n```py3\nfrom slackbot.bot import respond_to\n\n@respond_to('\u3053\u3093\u306b\u3061\u306f')\n@respond_to('\u4eca\u65e5\u306f')\ndef hello(message):\n    message.reply('\u3053\u3093\u306b\u3061\u306f!')\n```\n\n\u201crespond_to\u201d\u306b\u30de\u30c3\u30c1\u3059\u308b\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001Bot\u306b\u5bfe\u3059\u308b\u30e1\u30f3\u30b7\u30e7\u30f3\u306b\u53cd\u5fdc\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3068\u306b\u304b\u304f\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\u3067\u306fSlackBot\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306b\u3042\u308bbot.py\u3092\u8d77\u52d5\u3057\u3066**<font color=\"red\">@\u3092\u3064\u3051\u3066</font>**\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```shell-session\n$ python bot.py\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u53cd\u5fdc\u3057\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n<img width=\"379\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-08 15.19.12.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/050c33a3-f351-5a31-2042-9c2cd01442d3.png\">\n\n\n\n# Step3(10min) Slack\u304b\u3089kintone\u3078\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u4eca\u307e\u3067\u306e\u96c6\u5927\u6210\u3067\u3059\u3002Slack\u306b\u540d\u523a\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u3001SlackBot\u7d4c\u7531\u3067kintone\u306b\u60c5\u5831\u3092\u767b\u9332\u3057\u307e\u3059\u3002\u307e\u305a\u306fVision API\u3001Natural Language API\u3001kintone API\u3092\u7d71\u5408\u3057\u305fSlackBot\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u3092\u884c\u3044\u307e\u3059\u3002\u8a18\u8ff0\u3092\u884c\u3063\u305f\u3089\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3067\u306f\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\u304b\u3089\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a18\u8ff0\nSlackBot\u304b\u3089kintone\u306b\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u6240\u306f\u3001plugins/slack.py\u3067\u3059\u3002\u30a8\u30c7\u30a3\u30bf\u3067slack.py\u3092\u958b\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092**<font color=\"red\">\u8ffd\u8a18</font>**\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u8ffd\u8a18\u3057\u7d42\u308f\u3063\u305f\u3089\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u969b\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306fUTF8\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n```py3\n@listen_to('(.*)')\ndef anymessage(message, something):\n    if 'file' in message.body:\n        slack_token = loader(os.path.join(BASE_DIR, 'config/slack.yaml'))\n        google_token = loader(os.path.join(BASE_DIR, 'config/google.yaml'))\n        kintone_conf = os.path.join(BASE_DIR, 'config/kintone.yaml')\n\n        url = message.body['file']['url_private_download']\n        submitter = get_user_name(message.body['user'], slack_token['token'])\n        img_path = download_image(url, slack_token['token'])\n\n        entities = extract_entities_from_img(img_path, google_token['token'])\n\n        comment = message.body['file']['initial_comment']['comment']\n        create_card(comment, entities, img_path, submitter, kintone_conf)\n        message.reply('\u540d\u523a\u60c5\u5831\u3092\u767b\u9332\u3057\u307e\u3057\u305f\u3002')\n    else:\n        message.reply('\u540d\u523a\u60c5\u5831\u306e\u767b\u9332\u3092\u3067\u304d\u307e\u3059\u3088\u3002')\n```\n\n\u540d\u523a\u753b\u50cf\u304c\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u5834\u5408\u306f\u3001\u540d\u523a\u753b\u50cf\u304b\u3089\u60c5\u5831\u3092\u62bd\u51fa\u3057\u3066kintone\u3078\u767b\u9332\u3059\u308b\u3088\u3046\u306a\u51e6\u7406\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\u3067\u306f\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\u3067\u306fSlackBot\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306b\u3042\u308bbot.py\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```shell-session\n$ python bot.py\n```\n\n\u540d\u523a\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n<img width=\"400\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-08 15.59.53.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/4d561447-022d-f7a3-9fa9-123c957cbd8b.png\">\n\n\n\n\u5b9f\u884c\u7d50\u679c\u3068\u3057\u3066kintone\u306b\u60c5\u5831\u304c\u767b\u9332\u3055\u308c\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n<img width=\"400\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-08 16.01.46.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77079/f98b2741-6db0-ca9f-d303-2b343daac10f.png\">\n\n\n\n# \u304a\u308f\u308a\u306b\n\u3044\u304b\u304c\u3060\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\nVision API\u3001Natural Language API\u3001kintone\u3001Slack\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u540d\u523a\u7ba1\u7406\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u3063\u3066\u898b\u307e\u3057\u305f\u3002\u53ef\u80fd\u6027\u3092\u611f\u3058\u3066\u3044\u305f\u3060\u3051\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u4eca\u56de\u306f\u767b\u9332\u3057\u304b\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001Bot\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3089\u306eweb API\u3084\u4ed6\u306eweb API\u3001\u3082\u3057\u304f\u306f\u3001\u81ea\u4f5c\u306eweb API\u3092\u7528\u610f\u3057\u3066\u3001\u8ce2\u3044\u51e6\u7406\u3092\u3059\u308b\u4ed5\u7d44\u307f\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n\u304a\u3064\u304b\u308c\u3055\u307e\u3067\u3057\u305f\u3002\n\n# \u8a18\u4e8b\u307e\u3068\u3081\n\u4eca\u56de\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u5185\u5bb9\u306f\uff13\u3064\u306e\u8a18\u4e8b\u306b\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002\n\n* [kintone\u3067\u540d\u523a\u7ba1\u7406\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046](http://qiita.com/Hironsan/items/be3497972fb3517cb2b2)\n* [Vision API\u3068Natural Language API\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u540d\u523a\u304b\u3089\u60c5\u5831\u62bd\u51fa\u3059\u308b](http://qiita.com/Hironsan/items/166515acec35658986b2)\n* [\u540d\u523a\u304b\u3089\u60c5\u5831\u3092\u62bd\u51fa\u3059\u308bSlackBot\u3092\u4f5c\u308b](http://qiita.com/Hironsan/items/9bfba01c37e9fcd7b8af)\n\n\n\u4e8b\u524d\u6e96\u5099\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u304b\u3089\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n* [kintone x \u6a5f\u68b0\u5b66\u7fd2\u3067\u5b9f\u73fe\u3059\u308b\u7c21\u5358\u540d\u523a\u7ba1\u7406@kintone Caf\u00e9](http://qiita.com/Hironsan/items/a81eef912881b1051de5)\n", "tags": ["\u6a5f\u68b0\u5b66\u7fd2", "kintone", "bot"]}