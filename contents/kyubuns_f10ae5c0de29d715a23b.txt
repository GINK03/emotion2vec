{"context": " More than 1 year has passed since last update.Green\u3068\u3044\u3046\u534a\u900f\u660e\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6700\u3082\u624b\u524d\u306b\u3042\u308a\u3001White\u3068Red\u306b\u91cd\u306a\u3063\u3066\u3044\u308b\u72b6\u614b\u3002\nSceneView\u3067Red\u3092\u9078\u629e\u3057\u3088\u3046\u3068\u3057\u3066\u3082\u3001\u6700\u3082\u624b\u524d\u306b\u3042\u308bGreen\u304c\u9078\u3070\u308c\u3066\u3057\u307e\u3046\u3002\n\n\u305d\u3053\u3067\u3001\u3053\u306e\u62e1\u5f35\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u8868\u793a\u3057\u3066\u304a\u304f\u3068\u3001\nSceneView\u4e0a\u3067\u30bf\u30c3\u30d7\u3057\u305f\u4f4d\u7f6e\u306b\u3042\u308b\u30b2\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u62e1\u5f35\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u5168\u3066\u8868\u793a\u3002\n\n\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u5bfe\u5fdc\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u9078\u629e\u72b6\u614b\u306b\u306a\u308b\u3002\n\n\u305d\u308c\u3060\u3051\u3002\n\nUguiSelector.cs\nusing UnityEditor;\nusing UnityEngine;\nusing UnityEngine.UI;\nusing UnityEngine.EventSystems;\nusing System;\nusing System.Linq;\nusing System.Collections;\nusing System.Collections.Generic;\n\npublic class UGUISelector : EditorWindow\n{\n    static bool initialized = false;\n    static List<RaycastResult> raycastResults;\n    public static bool RayCasting { get; private set; }\n\n    [MenuItem(\"Window/uGUI Selector\")]\n    static void Open()\n    {\n        GetWindow<UGUISelector>();\n    }\n\n    void OnInspectorUpdate()\n    {\n        if(!initialized && EditorApplication.isPlaying)\n        {\n            if(SceneView.onSceneGUIDelegate != OnSceneGUI)\n            {\n                SceneView.onSceneGUIDelegate += OnSceneGUI;\n                EditorApplication.playmodeStateChanged += OnPlayModeChanged;\n            }\n            initialized = true;\n        }\n    }\n\n    void OnGUI()\n    {\n        if(!EditorApplication.isPlaying)\n        {\n            GUILayout.Label(\"Play mode only\");\n            return;\n        }\n        if(raycastResults == null) return;\n\n        foreach(var obj in raycastResults)\n        {\n            if(obj.gameObject == null) return;\n\n            var path = string.Join(\".\", obj.gameObject.GetParentNames().Reverse().Take(3).Reverse().ToArray());\n            if(GUILayout.Button(path)){\n                if(obj.gameObject == null) return;\n                Selection.activeGameObject = obj.gameObject;\n            }\n        }\n    }\n\n    void OnSceneGUI(SceneView sceneView)\n    {\n        if(!EditorApplication.isPlaying) return;\n        if (Event.current.type == EventType.MouseDown)\n        {\n            Vector2 mousePos = Event.current.mousePosition;\n            mousePos.y = sceneView.camera.pixelHeight - mousePos.y;\n            Vector3 position = sceneView.camera.ScreenPointToRay(mousePos).origin;\n\n            var pointer = new PointerEventData(EventSystem.current);\n            pointer.position = position;\n\n            raycastResults = new List<RaycastResult>();\n            EventSystem.current.RaycastAll(pointer, raycastResults);\n\n            Repaint();\n        }\n    }\n\n    void OnPlayModeChanged()\n    {\n        raycastResults = new List<RaycastResult>();\n        Repaint();\n    }\n\n    void OnDestroy()\n    {\n        SceneView.onSceneGUIDelegate -= OnSceneGUI;\n        EditorApplication.playmodeStateChanged -= OnPlayModeChanged;\n        initialized = false;\n    }\n}\n\n\nGreen\u3068\u3044\u3046\u534a\u900f\u660e\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6700\u3082\u624b\u524d\u306b\u3042\u308a\u3001White\u3068Red\u306b\u91cd\u306a\u3063\u3066\u3044\u308b\u72b6\u614b\u3002\nSceneView\u3067Red\u3092\u9078\u629e\u3057\u3088\u3046\u3068\u3057\u3066\u3082\u3001\u6700\u3082\u624b\u524d\u306b\u3042\u308bGreen\u304c\u9078\u3070\u308c\u3066\u3057\u307e\u3046\u3002\n![4.png](https://qiita-image-store.s3.amazonaws.com/0/6459/43da0aed-34fa-f9e4-2042-5ec5ed509c48.png)\n\n\u305d\u3053\u3067\u3001\u3053\u306e\u62e1\u5f35\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u8868\u793a\u3057\u3066\u304a\u304f\u3068\u3001\nSceneView\u4e0a\u3067\u30bf\u30c3\u30d7\u3057\u305f\u4f4d\u7f6e\u306b\u3042\u308b\u30b2\u30fc\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u62e1\u5f35\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u5168\u3066\u8868\u793a\u3002\n![2.png](https://qiita-image-store.s3.amazonaws.com/0/6459/cf194543-441b-0ddd-16e1-e009b7d0b272.png)\n\n\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u5bfe\u5fdc\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u9078\u629e\u72b6\u614b\u306b\u306a\u308b\u3002\n![3.png](https://qiita-image-store.s3.amazonaws.com/0/6459/48492576-d9ae-2cb2-af1b-af9ada1b8101.png)\n\n\u305d\u308c\u3060\u3051\u3002\n\n```csharp:UguiSelector.cs\nusing UnityEditor;\nusing UnityEngine;\nusing UnityEngine.UI;\nusing UnityEngine.EventSystems;\nusing System;\nusing System.Linq;\nusing System.Collections;\nusing System.Collections.Generic;\n\npublic class UGUISelector : EditorWindow\n{\n\tstatic bool initialized = false;\n\tstatic List<RaycastResult> raycastResults;\n\tpublic static bool RayCasting { get; private set; }\n\t\n\t[MenuItem(\"Window/uGUI Selector\")]\n\tstatic void Open()\n\t{\n\t\tGetWindow<UGUISelector>();\n\t}\n\t\n\tvoid OnInspectorUpdate()\n\t{\n\t\tif(!initialized && EditorApplication.isPlaying)\n\t\t{\n\t\t\tif(SceneView.onSceneGUIDelegate != OnSceneGUI)\n\t\t\t{\n\t\t\t\tSceneView.onSceneGUIDelegate += OnSceneGUI;\n\t\t\t\tEditorApplication.playmodeStateChanged += OnPlayModeChanged;\n\t\t\t}\n\t\t\tinitialized = true;\n\t\t}\n\t}\n\t\n\tvoid OnGUI()\n\t{\n\t\tif(!EditorApplication.isPlaying)\n\t\t{\n\t\t\tGUILayout.Label(\"Play mode only\");\n\t\t\treturn;\n\t\t}\n\t\tif(raycastResults == null) return;\n\t\t\n\t\tforeach(var obj in raycastResults)\n\t\t{\n\t\t\tif(obj.gameObject == null) return;\n\t\t\t\n\t\t\tvar path = string.Join(\".\", obj.gameObject.GetParentNames().Reverse().Take(3).Reverse().ToArray());\n\t\t\tif(GUILayout.Button(path)){\n\t\t\t\tif(obj.gameObject == null) return;\n\t\t\t\tSelection.activeGameObject = obj.gameObject;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tvoid OnSceneGUI(SceneView sceneView)\n\t{\n\t\tif(!EditorApplication.isPlaying) return;\n\t\tif (Event.current.type == EventType.MouseDown)\n\t\t{\n\t\t\tVector2 mousePos = Event.current.mousePosition;\n\t\t\tmousePos.y = sceneView.camera.pixelHeight - mousePos.y;\n\t\t\tVector3 position = sceneView.camera.ScreenPointToRay(mousePos).origin;\n\t\t\t\n\t\t\tvar pointer = new PointerEventData(EventSystem.current);\n \t\t\tpointer.position = position;\n\t\t\t\n\t\t\traycastResults = new List<RaycastResult>();\n \t\t\tEventSystem.current.RaycastAll(pointer, raycastResults);\n\t\t\t\n\t\t\tRepaint();\n\t\t}\n\t}\n \n \tvoid OnPlayModeChanged()\n \t{\n\t\traycastResults = new List<RaycastResult>();\n\t\tRepaint();\n\t}\n\t\n\tvoid OnDestroy()\n\t{\n\t\tSceneView.onSceneGUIDelegate -= OnSceneGUI;\n\t\tEditorApplication.playmodeStateChanged -= OnPlayModeChanged;\n\t\tinitialized = false;\n\t}\n}\n```\n", "tags": ["Unity", "uGUI"]}