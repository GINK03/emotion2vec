{"context": " More than 1 year has passed since last update.\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u300c\u3069\u3046\u66f8\u304f\u300d\u3092\u3084\u308b\u30a4\u30d9\u30f3\u30c8\u3002\nhttp://atnd.org/events/31590\n\u306e\u53c2\u8003\u554f\u984c\nhttp://qiita.com/items/ebd8a56b41711ba459f9\n\u3092\u3001\u81ea\u5206\u3067\u3082\u89e3\u3044\u3066\u307f\u305f\u3002\u3068\u3044\u3046\u304b\u3001\u51fa\u984c\u524d\u306b\u89e3\u3044\u3066\u307e\u3059\u3002\n#!ruby\n\ndef baba( q )\n  q.chars.inject([[0,0,0]]){|s,b|\n    nx={\n      's'=> ->x{[x[0],x[1]+1,x[2]]},\n      'f'=> ->x{[x[0],[2,x[1]+1].min,x[2]]},\n      'b'=> ->x{[x[0],x[1],x[2]+1]},\n      'p'=> ->x{[x[0]+1,0,0]},\n      'h'=> ->x{[x[0],0,0]}\n    }[b].call(s.last.dup)\n    nx=[nx[0]+1,0,0] if 2<nx[1] # 3 strikes\n    nx=[nx[0],0,0] if 3<nx[2] # 4 balls\n    nx=[0,0,0] if 2<nx[0] # 3 outs\n    s<<nx\n  }.drop(1).map{|i| i.join }.join(',')\nend\n\nDATA.each{ |line|\n  q,expected=line.split(/\\-\\>/).map( &:strip )\n  actual=baba q\n  raise \"#{q}->#{actual} ( expected : #{expected} )\" if expected!=actual\n  puts \"%s -> %s\"%[q,actual]\n}\n\n__END__\nsssbbbbsbhsbppp -> 010,020,100,101,102,103,100,110,111,100,110,111,200,000,100\n\n\u672c\u5f53\u306f\u30c6\u30b9\u30c8\u3082\u3063\u3068\u3042\u308b\u3051\u3069\u3053\u3053\u3067\u306f\u7701\u7565\u3002\n\u30b9\u30c8\u30e9\u30a4\u30af3\u3064\u3068\u304b\u30a2\u30a6\u30c83\u3064\u3068\u304b\u3001\u305d\u3046\u3044\u3046\u51e6\u7406\u3092\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u3068\u3053\u308d\u3067\u3084\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u304c\u3057\u3087\u307c\u3044\u611f\u3058\u3002\ncase..when \u3092\u3064\u304b\u308f\u305a\u306b map+lambda \u306b\u3057\u305f\u306e\u306f\u305f\u3060\u306a\u3093\u3068\u306a\u304f\u3002\n\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u300c\u3069\u3046\u66f8\u304f\u300d\u3092\u3084\u308b\u30a4\u30d9\u30f3\u30c8\u3002\nhttp://atnd.org/events/31590\n\u306e\u53c2\u8003\u554f\u984c\nhttp://qiita.com/items/ebd8a56b41711ba459f9\n\u3092\u3001\u81ea\u5206\u3067\u3082\u89e3\u3044\u3066\u307f\u305f\u3002\u3068\u3044\u3046\u304b\u3001\u51fa\u984c\u524d\u306b\u89e3\u3044\u3066\u307e\u3059\u3002\n\n```ruby\n#!ruby\n\ndef baba( q )\n  q.chars.inject([[0,0,0]]){|s,b|\n    nx={\n      's'=> ->x{[x[0],x[1]+1,x[2]]},\n      'f'=> ->x{[x[0],[2,x[1]+1].min,x[2]]},\n      'b'=> ->x{[x[0],x[1],x[2]+1]},\n      'p'=> ->x{[x[0]+1,0,0]},\n      'h'=> ->x{[x[0],0,0]}\n    }[b].call(s.last.dup)\n    nx=[nx[0]+1,0,0] if 2<nx[1] # 3 strikes\n    nx=[nx[0],0,0] if 3<nx[2] # 4 balls\n    nx=[0,0,0] if 2<nx[0] # 3 outs\n    s<<nx\n  }.drop(1).map{|i| i.join }.join(',')\nend\n\nDATA.each{ |line|\n  q,expected=line.split(/\\-\\>/).map( &:strip )\n  actual=baba q\n  raise \"#{q}->#{actual} ( expected : #{expected} )\" if expected!=actual\n  puts \"%s -> %s\"%[q,actual]\n}\n\n__END__\nsssbbbbsbhsbppp -> 010,020,100,101,102,103,100,110,111,100,110,111,200,000,100\n```\n\n\u672c\u5f53\u306f\u30c6\u30b9\u30c8\u3082\u3063\u3068\u3042\u308b\u3051\u3069\u3053\u3053\u3067\u306f\u7701\u7565\u3002\n\u30b9\u30c8\u30e9\u30a4\u30af3\u3064\u3068\u304b\u30a2\u30a6\u30c83\u3064\u3068\u304b\u3001\u305d\u3046\u3044\u3046\u51e6\u7406\u3092\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u3068\u3053\u308d\u3067\u3084\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u304c\u3057\u3087\u307c\u3044\u611f\u3058\u3002\ncase..when \u3092\u3064\u304b\u308f\u305a\u306b map+lambda \u306b\u3057\u305f\u306e\u306f\u305f\u3060\u306a\u3093\u3068\u306a\u304f\u3002\n", "tags": ["\u3069\u3046\u66f8\u304f", "\u52c9\u5f37\u4f1a", "Ruby", "yhpg"]}