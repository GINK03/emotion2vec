{"context": "goofys \u4f7f\u3046\u3068\u3001S3\u30d0\u30b1\u30c3\u30c8\u3092\u76f4\u63a5\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u3088\u3046\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u304c\u3001Homebrew \u4f7f\u3048\u3070\u308f\u308a\u304b\u3057\u7c21\u5358\u306b OS X \u3067\u3082\u4f7f\u7528\u3067\u304d\u305f\u306e\u3067\u3001\u3084\u308a\u65b9\u3092\u3055\u3089\u3063\u3068\n\n\u74b0\u5883\u6574\u5099\n\nHomebrew \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u306f\u3001Homebrew \u304c\u5165\u3063\u3066\u306a\u3044\u3068\u8a71\u306b\u306a\u308a\u307e\u305b\u3093\u3002\n\u5165\u3063\u3066\u306a\u3044\u5834\u5408\u306f\u3044\u308c\u307e\u3057\u3087\u3046\u3002\n$ /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n\n\u53c2\u8003: Homebrew\n\ngolang \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nHomebrew \u5165\u308c\u305f\u3089\u3001\u6b21\u306f golang \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew install golang\n$ [ ! -e ~/go/ ] && mkdir ~/go\n$ export GOROOT=/usr/local/opt/go/libexec\n$ export GOPATH=$HOME/go\n$ export PATH=$PATH:$GOROOT/bin:$GOPATH/bin\n\nexport \u3067\u59cb\u307e\u308b3\u884c\u306f ~/.bash_profile \u306b\u3082\u66f8\u3044\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n\nFUSE for OS X \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u6b21\u306b FUSE for OS X \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nHomebrew Cask \u304c\u5165\u3063\u3066\u306a\u3044\u5834\u5408\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew install caskroom/cask/brew-cask\n\nFUSE for OS X\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew cask install osxfuse\n\n\u53c2\u8003: OS X Yosemite\u3067NTFS\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u3081\u308b\u3088\u3046\u306b\u3059\u308b\n\nawscli \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nawscli \u5165\u308c\u3066 configure\n$ brew install awscli\n$ aws configure\n\n\ngoofys \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngoofys \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ go get github.com/kahing/goofys\n$ go install github.com/kahing/goofys\n$ goofys -h\nError: goofys takes exactly two arguments.\n\nNAME:\n   goofys - Mount an S3 bucket locally\n\nUSAGE:\n   goofys [global options] bucket[:prefix] mountpoint\n\nVERSION:\n   0.0.6\n\nGLOBAL OPTIONS:\n   --help, -h           Print this help text and exit successfuly.\n   -o value         Additional system-specific mount options. Be careful!\n   --dir-mode value     Permissions bits for directories. (default: 0755) (default: 493)\n   --file-mode value        Permission bits for files (default: 0644) (default: 420)\n   --uid value          UID owner of all inodes. (default: 500)\n   --gid value          GID owner of all inodes. (default: 500)\n   --endpoint value     The non-AWS endpoint to connect to. Possible values: http://127.0.0.1:8081/\n   --region value       The non-AWS endpoint to connect to. Possible values: us-east-1, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, sa-east-1, cn-north-1 (default: \"us-west-2\")\n   --storage-class value    The type of storage to use when writing objects. Possible values: REDUCED_REDUNDANCY, STANDARD, STANDARD_IA. (default: \"STANDARD\")\n   --use-path-request       Use a path-style request instead of virtual host-style. (deprecated, always on)\n   --profile value      Use a named profile from $HOME/.aws/credentials instead of \"default\"\n   --use-content-type       Set Content-Type according to file extension and /etc/mime.types (default: off)\n   --stat-cache-ttl value   How long to cache StatObject results and inode attributes. (default: 1m0s)\n   --type-cache-ttl value   How long to cache name -> file/dir mappings in directory inodes. (default: 1m0s)\n   --debug_fuse         Enable fuse-related debugging output.\n   --debug_s3           Enable S3-related debugging output.\n   -f               Run goofys in foreground.\n   --version, -v        print the version\n\n\ngoofys \u306e\u4f7f\u7528\u65b9\u6cd5\n\n\u30de\u30a6\u30f3\u30c8\ngoofys \u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u611f\u3058\u3067\u3084\u308a\u307e\u3059\n$ goofys -o allow_other --uid {uid} --gid {gid} --region {\u30ea\u30fc\u30b8\u30e7\u30f3} {s3\u30d0\u30b1\u30c3\u30c8\u540d} {\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8}\n\nuid \u3068 gid \u306f id \u30b3\u30de\u30f3\u30c9\u3067\u8abf\u3079\u307e\u3057\u3087\u3046\u3002\n$ id\nuid=501(wokamoto) gid=20(staff) groups=20(staff),...\n\nwokamoto \u30e6\u30fc\u30b6\u306e uid \u306f 501 \u3067\u3001gid 20 \u306e staff \u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u308b\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n\u4f8b\u3048\u3070 ap-northeast-1 \u306b\u3042\u308b s3-example \u3063\u3066 S3 \u30d0\u30b1\u30c3\u30c8\u3092 ~/s3 \u306b\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n$ goofys -o allow_other --uid 501 --gid 20 --region ap-northeast-1 s3-example ~/s3\n\n\u3084\u3063\u305f\u30fc 1PB \u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u305f\u3088\n$ df -h\nFilesystem                                  Size   Used  Avail Capacity  iused      ifree %iused  Mounted on\n/dev/disk1                                 233Gi  205Gi   27Gi    89% 53803254    7182088   88%   /\ndevfs                                      199Ki  199Ki    0Bi   100%      688          0  100%   /dev\nmap -hosts                                   0Bi    0Bi    0Bi   100%        0          0  100%   /net\nmap auto_home                                0Bi    0Bi    0Bi   100%        0          0  100%   /home\ns3-example                                 1.0Pi    0Bi  1.0Pi     0%        0 1000000000    0%   /Users/wokamoto/s3\n\n\n\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u6642\u306f...\ngoofys \u30b3\u30de\u30f3\u30c9\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306f -f \u3068\u304b --debug_s3 \u3068\u304b --debug_fuse \u30d1\u30e9\u30e1\u30fc\u30bf\u3064\u3051\u3066\u8d77\u52d5\u3059\u308c\u3070\u306a\u3093\u304b\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u307e\u3059\u3002\n$ goofys -o allow_other --uid 501 --gid 20 --region ap-northeast-1 --debug_s3 --debug_fuse -f s3-example ~/s3\n2016/06/17 16:42:31.029518 s3.DEBUG DEBUG: Request s3/HeadBucket Details:\n---[ REQUEST POST-SIGN ]-----------------------------\nHEAD http://s3-ap-northeast-1.amazonaws.com/s3-example HTTP/1.1\nHost: s3-ap-northeast-1.amazonaws.com\nUser-Agent: aws-sdk-go/1.0.0 (go1.6; darwin; amd64)\nAuthorization: AWS4-HMAC-SHA256 ...\n\n\n\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\n\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3044\u6642\u306f sudo umount {\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8} \u3067\n\u4f8b\u3048\u3070 ~/s3 \u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u305f\u306e\u3067\u3042\u308c\u3070...\n$ sudo umount ~/s3\n\n\u826f\u3044 S3 \u30e9\u30a4\u30d5\u3092\uff01\n[goofys](https://github.com/kahing/goofys) \u4f7f\u3046\u3068\u3001S3\u30d0\u30b1\u30c3\u30c8\u3092\u76f4\u63a5\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u3088\u3046\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u304c\u3001[Homebrew](http://brew.sh/index_ja.html) \u4f7f\u3048\u3070\u308f\u308a\u304b\u3057\u7c21\u5358\u306b OS X \u3067\u3082\u4f7f\u7528\u3067\u304d\u305f\u306e\u3067\u3001\u3084\u308a\u65b9\u3092\u3055\u3089\u3063\u3068\n\n## \u74b0\u5883\u6574\u5099\n\n### Homebrew \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u306f\u3001Homebrew \u304c\u5165\u3063\u3066\u306a\u3044\u3068\u8a71\u306b\u306a\u308a\u307e\u305b\u3093\u3002\n\u5165\u3063\u3066\u306a\u3044\u5834\u5408\u306f\u3044\u308c\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\n\u53c2\u8003: [Homebrew](http://brew.sh/index_ja.html)\n\n### golang \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nHomebrew \u5165\u308c\u305f\u3089\u3001\u6b21\u306f golang \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ brew install golang\n$ [ ! -e ~/go/ ] && mkdir ~/go\n$ export GOROOT=/usr/local/opt/go/libexec\n$ export GOPATH=$HOME/go\n$ export PATH=$PATH:$GOROOT/bin:$GOPATH/bin\n```\n\nexport \u3067\u59cb\u307e\u308b3\u884c\u306f ~/.bash_profile \u306b\u3082\u66f8\u3044\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n\n### FUSE for OS X \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u6b21\u306b FUSE for OS X \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nHomebrew Cask \u304c\u5165\u3063\u3066\u306a\u3044\u5834\u5408\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ brew install caskroom/cask/brew-cask\n```\n\nFUSE for OS X\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ brew cask install osxfuse\n```\n\n\u53c2\u8003: [OS X Yosemite\u3067NTFS\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u3081\u308b\u3088\u3046\u306b\u3059\u308b](http://qiita.com/ganta/items/f9cc7189e3efe417262f)\n\n### awscli \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nawscli \u5165\u308c\u3066 configure\n\n```bash\n$ brew install awscli\n$ aws configure\n```\n\n### goofys \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngoofys \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ go get github.com/kahing/goofys\n$ go install github.com/kahing/goofys\n$ goofys -h\nError: goofys takes exactly two arguments.\n\nNAME:\n   goofys - Mount an S3 bucket locally\n\nUSAGE:\n   goofys [global options] bucket[:prefix] mountpoint\n   \nVERSION:\n   0.0.6\n   \nGLOBAL OPTIONS:\n   --help, -h\t\t\tPrint this help text and exit successfuly.\n   -o value\t\t\tAdditional system-specific mount options. Be careful!\n   --dir-mode value\t\tPermissions bits for directories. (default: 0755) (default: 493)\n   --file-mode value\t\tPermission bits for files (default: 0644) (default: 420)\n   --uid value\t\t\tUID owner of all inodes. (default: 500)\n   --gid value\t\t\tGID owner of all inodes. (default: 500)\n   --endpoint value\t\tThe non-AWS endpoint to connect to. Possible values: http://127.0.0.1:8081/\n   --region value\t\tThe non-AWS endpoint to connect to. Possible values: us-east-1, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, sa-east-1, cn-north-1 (default: \"us-west-2\")\n   --storage-class value\tThe type of storage to use when writing objects. Possible values: REDUCED_REDUNDANCY, STANDARD, STANDARD_IA. (default: \"STANDARD\")\n   --use-path-request\t\tUse a path-style request instead of virtual host-style. (deprecated, always on)\n   --profile value\t\tUse a named profile from $HOME/.aws/credentials instead of \"default\"\n   --use-content-type\t\tSet Content-Type according to file extension and /etc/mime.types (default: off)\n   --stat-cache-ttl value\tHow long to cache StatObject results and inode attributes. (default: 1m0s)\n   --type-cache-ttl value\tHow long to cache name -> file/dir mappings in directory inodes. (default: 1m0s)\n   --debug_fuse\t\t\tEnable fuse-related debugging output.\n   --debug_s3\t\t\tEnable S3-related debugging output.\n   -f\t\t\t\tRun goofys in foreground.\n   --version, -v\t\tprint the version\n```\n\n## goofys \u306e\u4f7f\u7528\u65b9\u6cd5\n\n### \u30de\u30a6\u30f3\u30c8\ngoofys \u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u611f\u3058\u3067\u3084\u308a\u307e\u3059\n\n```bash\n$ goofys -o allow_other --uid {uid} --gid {gid} --region {\u30ea\u30fc\u30b8\u30e7\u30f3} {s3\u30d0\u30b1\u30c3\u30c8\u540d} {\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8}\n```\n\nuid \u3068 gid \u306f id \u30b3\u30de\u30f3\u30c9\u3067\u8abf\u3079\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ id\nuid=501(wokamoto) gid=20(staff) groups=20(staff),...\n```\n\nwokamoto \u30e6\u30fc\u30b6\u306e uid \u306f 501 \u3067\u3001gid 20 \u306e staff \u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u308b\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n\n\u4f8b\u3048\u3070 ap-northeast-1 \u306b\u3042\u308b s3-example \u3063\u3066 S3 \u30d0\u30b1\u30c3\u30c8\u3092 ~/s3 \u306b\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n\n```bash\n$ goofys -o allow_other --uid 501 --gid 20 --region ap-northeast-1 s3-example ~/s3\n```\n\n\u3084\u3063\u305f\u30fc 1PB \u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u305f\u3088\n\n```bash\n$ df -h\nFilesystem                                  Size   Used  Avail Capacity  iused      ifree %iused  Mounted on\n/dev/disk1                                 233Gi  205Gi   27Gi    89% 53803254    7182088   88%   /\ndevfs                                      199Ki  199Ki    0Bi   100%      688          0  100%   /dev\nmap -hosts                                   0Bi    0Bi    0Bi   100%        0          0  100%   /net\nmap auto_home                                0Bi    0Bi    0Bi   100%        0          0  100%   /home\ns3-example                                 1.0Pi    0Bi  1.0Pi     0%        0 1000000000    0%   /Users/wokamoto/s3\n```\n\n### \u3046\u307e\u304f\u3044\u304b\u306a\u3044\u6642\u306f...\ngoofys \u30b3\u30de\u30f3\u30c9\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306f -f \u3068\u304b --debug_s3 \u3068\u304b --debug_fuse \u30d1\u30e9\u30e1\u30fc\u30bf\u3064\u3051\u3066\u8d77\u52d5\u3059\u308c\u3070\u306a\u3093\u304b\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u307e\u3059\u3002\n\n```bash\n$ goofys -o allow_other --uid 501 --gid 20 --region ap-northeast-1 --debug_s3 --debug_fuse -f s3-example ~/s3\n2016/06/17 16:42:31.029518 s3.DEBUG DEBUG: Request s3/HeadBucket Details:\n---[ REQUEST POST-SIGN ]-----------------------------\nHEAD http://s3-ap-northeast-1.amazonaws.com/s3-example HTTP/1.1\nHost: s3-ap-northeast-1.amazonaws.com\nUser-Agent: aws-sdk-go/1.0.0 (go1.6; darwin; amd64)\nAuthorization: AWS4-HMAC-SHA256 ...\n```\n\n### \u30a2\u30f3\u30de\u30a6\u30f3\u30c8\n\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3044\u6642\u306f ```sudo umount {\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8}``` \u3067\n\u4f8b\u3048\u3070 ~/s3 \u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u305f\u306e\u3067\u3042\u308c\u3070...\n\n```bash\n$ sudo umount ~/s3\n```\n\n\u826f\u3044 S3 \u30e9\u30a4\u30d5\u3092\uff01\n", "tags": ["OSX", "goofys", "S3", "AWS"]}