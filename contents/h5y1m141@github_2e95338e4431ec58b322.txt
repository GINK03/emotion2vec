{"context": " More than 1 year has passed since last update.\n\n\u521d\u3081\u306b\nRequireJS\u4f7f\u3063\u305fJavaScript\u3092\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u304f\u4ed5\u4e8b\u3092\u6700\u8fd1\u3084\u3063\u3066\u3044\u3066\u81ea\u5206\u81ea\u8eab\u3067RequireJS\u4f7f\u3063\u305f\u3053\u3068\u304c\u7121\u304b\u3063\u305f\u306e\u3067\u3001\u5c0f\u3055\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u4f5c\u3063\u3066\u3001\u305d\u308c\u3092\u30d9\u30fc\u30b9\u306b\u3061\u3087\u3063\u3068\u3065\u3064\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u3063\u305f\u3089\u3001\u5272\u308a\u3068\u826f\u3044\u611f\u3058\u306e\u30b3\u30fc\u30c9\u306b\u306a\u3063\u305f\u306e\u3067\u6d41\u308c\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\u307e\u3067\u306b\u4f5c\u3063\u305f\u30a2\u30d7\u30ea\u306e\u4ed5\u69d8\n\nXHR\u3067\u5916\u90e8\u304b\u3089JSON\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\n\u8aad\u307f\u8fbc\u3093\u3060JSON\u3092\u52a0\u5de5\u3057\u3066\u4efb\u610f\u306eHTML\u8981\u7d20\u306b\u8ffd\u52a0\n\n\n\u30a2\u30d7\u30ea\u306e\u69cb\u9020\n\u251c\u2500\u2500 gulpfile.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 karma.conf.js\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 require.js\n\u251c\u2500\u2500 node_modules\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 \uff08\u305f\u304f\u3055\u3093\u3042\u308b\u306e\u3067\u7701\u7565\uff09\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 spec\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 \uff08\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bJasmine\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3092\u914d\u7f6e\uff09\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 app.js\n    \u251c\u2500\u2500 load_books.js\n    \u251c\u2500\u2500 main.js\n    \u251c\u2500\u2500 model\n    \u2514\u2500\u2500 view\n\n\n\u958b\u767a\u74b0\u5883\n\nMac OS X 10.8.5\nNode.js\n\n\nv4.2.4\nnodebrew\u3092\u5229\u7528\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fnpm\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u4ee5\u4e0b\u306epackage.json\u3092\u53c2\u7167\n\n\n\u30c6\u30b9\u30c8\u306f\u9014\u4e2d\u3067\u66f8\u3044\u305f\u306e\u3067Jasmine\uff0bKarma\u306e\u74b0\u5883\u3067\u5b9f\u884c\u3057\u3066\u307e\u3059\u3002\n\n\npackage.json\n{\n  \"name\": \"sample\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"gulp\": \"^3.9.0\",\n    \"gulp-webserver\": \"*\",\n    \"jasmine-core\": \"^2.3.4\",\n    \"jquery\": \"^2.1.3\",\n    \"karma\": \"^0.13.15\",\n    \"karma-chrome-launcher\": \"^0.2.1\",\n    \"karma-jasmine\": \"^0.3.6\",\n    \"karma-jasmine-html-reporter\": \"^0.1.8\",\n    \"karma-jasmine-jquery\": \"^0.1.1\",\n    \"karma-requirejs\": \"^0.2.2\",\n    \"karma-spec-reporter\": \"0.0.22\",\n    \"requirejs\": \"^2.1.22\",\n    \"underscore\": \"^1.8.3\"\n  }\n}\n\n\ngulpfile.js\nvar gulp = require('gulp');\nvar webserver = require('gulp-webserver');\n\ngulp.task('webserver', function() {\n  gulp.src('./')\n    .pipe(webserver({\n      livereload: true,\n      port: 9000,\n      fallback: 'index.html',\n      open: true\n    }));\n});\n\ngulp.task('default', ['webserver']);\n\n\n\u6700\u521d\u306e\u51c4\u304f\u30a4\u30b1\u3066\u306a\u3044\u30b3\u30fc\u30c9\nRequireJS\u304c\u3061\u3087\u3063\u3068\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u72b6\u614b\u3060\u3063\u305f\u3053\u3068\u3082\u3042\u308a\u3001\u30d9\u30bf\u306b\n1. XHR\u7d4c\u7531\u3067JSON\u3092\u8aad\u307f\u8fbc\u307f\n2. \u7d50\u679c\u3092\u753b\u9762\u306b\u53cd\u6620\u3055\u305b\u308b\n\u3068\u3044\u3046\u306e\u3092\u3053\u3093\u306a\u611f\u3058\u2193\u3067\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\n\nsrc/load_json.js\nrequirejs(['loadJSON'], function(loadJSON) {\n  $('#loadJSON').on('click', function(){\n    var url = 'https://gist.githubusercontent.com/h5y1m141/da8e8b4a1c3e697eda4c/raw/9a0ee74da46378d6cd7402e5f921d0cc4a1c041a/qiita.json';\n    $.ajax({\n      url: url\n    }).done(function(data) {\n      var items = JSON.parse(data),\n          result = [];\n      _.each(items, function(item){\n        var element;\n        element = '<li>\u540d\u524d\uff1a' + item.author + '</li>' +\n          '<li>\u30bf\u30a4\u30c8\u30eb\uff1a' + item.text + '</li>';\n        result.push(element);\n      });\n      $('.dataArea').append('<ul>' + result + '</ul>');\n    });\n  });\n});\n\n\nsrc/app.js\nrequirejs.config({\n  paths: {\n    'jquery': '../node_modules/jquery/dist/jquery',\n    'underscore': '../node_modules/underscore/underscore-min',\n    'loadJSON': 'load_json'\n  },\n  shim: {\n    'loadJSON': {\n      deps: ['underscore', 'jquery'],\n      exports: 'loadJSON'\n    }\n  }\n});\nrequirejs(['load_json']);\n\n\nindex.html\n<html>\n  <head>\n    <script data-main='src/app' src='lib/require.js'></script>\n    <script src='src/no_require.js'></script>\n  </head>\n  <body>\n    <h3>JSON\u8aad\u307f\u8fbc\u307f\u30b5\u30f3\u30d7\u30eb</h3>\n    <button id='loadJSON'>\u8aad\u307f\u8fbc\u307f\u958b\u59cb</button>\n    <div class='dataArea'></div>\n  </body>\n</html>\n\n\n\u3053\u308c\u306e\u3069\u3053\u304c\u554f\u984c\u304b\uff1f\n\u52d5\u4f5c\u306f\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u306fOK\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u5916\u90e8\u304b\u3089\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\u2192 \uff08\u8aad\u307f\u8fbc\u307f\u304c\u6210\u529f\u3057\uff09\u2192\u3000\u305d\u306e\u30c7\u30fc\u30bf\u30fc\u3092View\u306b\u53cd\u6620\u3059\u308b\u51e6\u7406\u304c\u4e00\u7dd2\u306b\u306a\u3063\u3066\u308b\u305f\u3081\u3001\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5f79\u5272\uff08\u8cac\u4efb\u7bc4\u56f2\uff09\u304c\u30a4\u30de\u30a4\u30c1\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5916\u90e8\u304b\u3089\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\u51e6\u7406\u3092\u62c5\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\n-\uff08\u8aad\u307f\u8fbc\u307f\u304c\u6210\u529f\u3057\uff09\u305f\u3089\u305d\u306e\u30c7\u30fc\u30bf\u30fc\u3092View\u306b\u53cd\u6620\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\n\n\u3068\u3044\u3046\u5f62\u3067\u5206\u5272\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u308c\u305e\u308c\u306e\u5f79\u5272\u3082\u660e\u78ba\u306b\u306a\u308a\u81ea\u7136\u3068\u305d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u5bfe\u3057\u3066\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u3082\u66f8\u304d\u3084\u3059\u304f\u306a\u308a\u305d\u3046\u3067\u3088\u304f\u8a00\u308f\u308c\u308b\u30c6\u30b9\u30c8\u304c\u66f8\u304d\u3084\u3059\u3044\u30b3\u30fc\u30c9\u306f\u826f\u3044\u30b3\u30fc\u30c9\u306b\u3064\u306a\u304c\u308b\u6c17\u304c\u3057\u307e\u3057\u305f\u3002\n\u6700\u521d\u306b\u30d9\u30bf\u306b\u66f8\u3044\u3066\u3001\u6b63\u76f4\u3042\u307e\u308a\u30a4\u30b1\u3066\u306a\u304b\u3063\u305f\u30b3\u30fc\u30c9\u3092\u3069\u306e\u3088\u3046\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u305f\u304b\u9806\u756a\u306b\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u5916\u90e8\u304b\u3089\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\u51e6\u7406\u3092\u5206\u3051\u308b\nWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u3044\u3046\u6240\u306eModel\u3068\u3044\u3046\u4f4d\u7f6e\u3065\u3051\u3068\u6349\u3048\u3066\u3001src/model/books.js\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nsrc/model/books.js\nload_json.js\u3067\u51e6\u7406\u3055\u308c\u3066\u3044\u305f$ajax\u306e\u51e6\u7406\u3092books.js\u306b\u307e\u305a\u306f\u79fb\u52d5\u3055\u305b\u3064\u3064\u3001jQuery.Deferred\u3092\u5229\u7528\u3059\u308b\u66f8\u304d\u65b9\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\ndefine(['jquery'],function($) {\n  return {\n    fetch: function() {\n      var deferred,\n          url = 'https://gist.githubusercontent.com/h5y1m141/da8e8b4a1c3e697eda4c/raw/9a0ee74da46378d6cd7402e5f921d0cc4a1c041a/qiita.json';\n      // \u4ee5\u4e0b\u306e\u90e8\u5206\u304c\u6700\u521d\u306e\u30b3\u30fc\u30c9\u3068\u3061\u3087\u3063\u3068\u7570\u306a\u308b\u70b9\n      deferred = $.ajax({\n        url: url\n      });\n      return deferred.promise();\n    }\n  };\n});\n\n\n\u306a\u305c\u3001jQuery.Deferred\u3092\u4f7f\u3046\u306e\u304b\uff1f\n\njQuery.Deferred\u3092\u4f7f\u3046\u3068\u5b09\u3057\u3044\u306e\u306f\u3001jQuery.Deferred\u306e\u4ed5\u69d8\u3092\u6e80\u305f\u3059\u90e8\u54c1\u540c\u58eb\u3092\u7c21\u5358\u306b\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u304b\u3089\u3067\u3059\u3002\u4e2d\u306b\u306f\u51e6\u7406\u3092\u66f8\u304d\u4e0b\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3068\u304b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u30cd\u30b9\u30c8\u3092\u9632\u3052\u308b\u306e\u304c\u3044\u3044\u3068\u304b\u8a00\u3046\u4eba\u3082\u3044\u307e\u3059\u304c\u3001\u500b\u4eba\u7684\u306b\u3053\u3063\u3061\u306e\u307b\u3046\u304c\u3088\u3063\u307d\u3069\u91cd\u8981\u3060\u3068\u611f\u3058\u307e\u3059\u3002\n\u7d50\u5c40jQuery.Deferred\u306e\u4f55\u304c\u5b09\u3057\u3044\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u3001\u3068\u3044\u3046\u4eba\u5411\u3051\u306e\u5c0f\u8a71\n\n\u3068\u3044\u3046\u4e00\u6587\u304c\u3042\u308a\u307e\u3059\u3002\njQuery.Deferred\u306e\u4ed5\u69d8\u3092\u6e80\u305f\u3059\u90e8\u54c1\u540c\u58eb\u3092\u7c21\u5358\u306b\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u540c\u58eb\u306e\u9023\u643a\u304c\u3084\u308a\u3084\u3059\u304f\u306a\u308b\u5229\u70b9\u304c\u3042\u308b\u306e\u3067\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\nsrc/load_books.js\nModel\u3067jQuery.Deferred\u3092\u4f7f\u3063\u305f\u51e6\u7406\u306b\u3057\u305f\u306e\u3067\u3001\u3053\u3061\u3089\u3082\u4e00\u90e8\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\nrequirejs(['books'], function(books) {\n  $('#loadJSON').on('click', function(){\n    var promise,result = [];\n    // \u3053\u308c\u4ee5\u964d\u304c\u7570\u306a\u308b\n    promise = books.fetch();\n    promise.done(function(data){\n      var items;\n      items = JSON.parse(data);\n      _.each(items, function(item){\n        var element;\n        element = '<li>\u540d\u524d\uff1a' + item.author + '</li>' +\n          '<li>\u30bf\u30a4\u30c8\u30eb\uff1a' + item.text + '</li>';\n        result.push(element);\n      });\n      $('.dataArea').append('<ul>' + result + '</ul>');\n    });\n  });\n});\n\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u3092\u898b\u3066\u3082\u3089\u3046\u3068\u308f\u304b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001jQuery.Deferred\u3092\u5229\u7528\u3057\u305f\u3053\u3068\u3067\u5f93\u6765\u306f$.ajax()\u3092\u5b9f\u884c\u2192\u5b9f\u884c\u5f8c\u3001done(function() {})\u3067View\u306e\u63cf\u753b\u3068\u3044\u3046\u30cd\u30b9\u30c8\u3057\u305f\u30b3\u30fc\u30c9\u306b\u306a\u308a\u304c\u3061\u3060\u3063\u305f\u3082\u306e\u304c\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30cd\u30b9\u30c8\u304c\u6df1\u304f\u306a\u3089\u306a\u3044\u72b6\u614b\u306b\u306a\u308a\u3053\u306e\u72b6\u614b\u3067\u500b\u4eba\u7684\u306b\u306f\u826f\u3055\u305d\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u304d\u305f\u6c17\u304c\u3057\u307e\u3057\u305f\u3002\n\n\u4e0a\u8a18\u306e2\u3064\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u547c\u3073\u51fa\u3059\u5074\u306e\u4fee\u6b63\nsrc/app.js\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\nrequirejs.config({\n  paths: {\n    'jquery': '../node_modules/jquery/dist/jquery',\n    'underscore': '../node_modules/underscore/underscore-min',\n    'books': 'model/books'\n  },\n  shim: {\n    'books': {\n      deps: ['underscore', 'jquery'],\n      exports: 'books'\n    }\n  }\n});\nrequirejs(['load_books']);\n\n\u3053\u306e\u72b6\u614b\u3067\u3082\u60aa\u304f\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001load_books.js\u306e\u4f4d\u7f6e\u3065\u3051\u3068\u3057\u3066\u306f\u3001MVC\u7684\u306b\u3044\u3046\u3068Controller\u306e\u3088\u3046\u306a\u4f4d\u7f6e\u3065\u3051\u306a\u6c17\u304c\u3057\u307e\u3057\u305f\u3002\nView\u306b\u95a2\u3059\u308b\u63cf\u753b\u51e6\u7406\u3092\u5225\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u305f\u307b\u3046\u304c\u305d\u308c\u305e\u308c\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066\u72ec\u7acb\u3057\u305f\u72b6\u614b\u306b\u306a\u308a\u3001\u30c6\u30b9\u30c8\u304c\u66f8\u304d\u3084\u3059\u304f\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u66f4\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nView\u306e\u51e6\u7406\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\nsrc/load_json.js\u3067\npromise.done(function(data){\n  _.each(items, function(item){\n    // \u3053\u3053\u304b\u3089View\u306e\u63cf\u753b\u51e6\u7406\u3092\u5b9f\u65bd\u3057\u3066\u308b\u7b87\u6240\u3002\u30b3\u30fc\u30c9\u306f\u7701\u7565\n  });\n});\n\n\u3068\u3044\u3046\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001promise.done\u3067\u30c7\u30fc\u30bf\u30fc\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u305d\u306e\u30c7\u30fc\u30bf\u30fc\u3092\u5f15\u6570\u306b\u3057\u3066View\u306e\u63cf\u753b\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\nView\u306e\u63cf\u753b\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f5c\u6210\nsrc/view/books.js\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3057\u305f\u3002\ndefine(['underscore', 'jquery'], function(_, $) {\n  return {\n    render: function(items) {\n      var result = [],\n          $dataArea;\n      $dataArea = $('.dataArea');\n      _.each(items, function(item){\n        var element;\n        element = '<li>\u540d\u524d\uff1a' + item.author + '</li>' +\n          '<li>\u30bf\u30a4\u30c8\u30eb\uff1a' + item.text + '</li>';\n        result.push(element);\n      });\n      return $dataArea.append('<ul>' + result + '</ul>');\n    }\n  };\n});\n\n\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067render()\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u3001\u5f15\u6570\u306b\u63cf\u753b\u3092\u3059\u308b\u6642\u306b\u5fc5\u8981\u3068\u306a\u308b\u30c7\u30fc\u30bf\u30fc\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\n\u63cf\u753b\u306e\u30ed\u30b8\u30c3\u30af\u306f\u3001Underscore\u306etemplate\u306e\u6a5f\u80fd\u306a\u3069\u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u3088\u308a\u4fdd\u5b88\u6027\u304c\u3042\u304c\u308a\u307e\u3059\u304c\u3001\u3044\u304d\u306a\u308a\u8272\u3005\u5909\u66f4\u3059\u308b\u3068\u3001\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u6642\u306b\u3001\u4f55\u304c\u554f\u984c\u306a\u306e\u304b\u628a\u63e1\u3057\u3065\u3089\u304f\u306a\u308b\u306e\u3067\u3072\u3068\u307e\u305a\u3053\u306e\u6bb5\u968e\u3067\u306f\u305d\u306e\u307e\u307e\u30b3\u30d4\u30da\u3057\u307e\u3057\u305f\u3002\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u547c\u3073\u51fa\u3059\u5074\u306e\u4fee\u6b63\nView\u306e\u63cf\u753b\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f5c\u6210\u3092\u3057\u305f\u306e\u3067src/app.js\u3067\u305d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8aad\u307f\u3053\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\nrequirejs.config({\n  paths: {\n    'jquery': '../node_modules/jquery/dist/jquery',\n    'underscore': '../node_modules/underscore/underscore-min',\n    'books': 'model/books',\n    'viewBooks': 'view/books' // \u2190\u3053\u308c\u3092\u8ffd\u52a0\n  },\n  shim: {\n    'books': {\n      deps: ['jquery'],\n      exports: 'books'\n    },\n    // \u4ee5\u4e0b\u3092\u8ffd\u52a0\n    'viewBooks': {\n      deps: ['underscore', 'jquery'],\n      exports: 'viewBooks'\n    }\n  }\n});\n\nrequirejs(['main', 'use_non_amd','load_books']);\n\n\n\u6700\u5f8c\u306b\u7d30\u304b\u3044\u4fee\u6b63\n\u4e0a\u8a18\u306e\u6700\u7d42\u7684\u306a\u4ed5\u4e0a\u3052\u3068\u3057\u3066\u4ee5\u4e0b\u3092\u884c\u3044\u307e\u3057\u305f\n\nModel\n\n\n\u4e0a\u8a18\u306e\u66f8\u304d\u65b9\u3060\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u5897\u3084\u3057\u305f\u6642\u306b\u53ef\u8aad\u6027\u60aa\u3044\u306e\u3067\u3001\u305d\u3053\u3092\u8003\u616e\u3057\u305f\u66f8\u304d\u65b9\u306b\u3059\u308b\nJasmine\u3067\u30c6\u30b9\u30c8\u66f8\u304d\u3084\u3059\u304f\u306a\u3063\u305f\u306e\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u304f \n\n\nView\n\n\n\u4e0a\u8a18\u306e\u66f8\u304d\u65b9\u3060\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u5897\u3084\u3057\u305f\u6642\u306b\u53ef\u8aad\u6027\u60aa\u3044\u306e\u3067\u3001\u305d\u3053\u3092\u8003\u616e\u3057\u305f\u66f8\u304d\u65b9\u306b\u3059\u308b\nView\u306e\u63cf\u753b\u3092\u30d9\u30bf\u306b\u6587\u5b57\u5217\u3067HTML\u3067\u66f8\u3044\u3066\u308b\n\n\n\n\nsrc/model/books.js\n'use strict';\n\nvar loadJSON = function($){\n  // private method\n  function _fetch(){\n    var deferred,\n        url = 'https://gist.githubusercontent.com/h5y1m141/da8e8b4a1c3e697eda4c/raw/9a0ee74da46378d6cd7402e5f921d0cc4a1c041a/qiita.json';\n    deferred = $.ajax({\n      url: url\n    });\n    return deferred.promise();\n  }\n\n  // public method\n  var publics = {\n    fetch: _fetch\n  };\n\n  return publics;\n};\n\ndefine(['jquery'], loadJSON);\n\n\n\u30c6\u30b9\u30c8\u306b\u3064\u3044\u3066\nKarma\uff0bJasmine\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u305f\u306e\u3067\u3059\u304c\u3001\n\nKarma\u304b\u3089RequireJS\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u3042\u3052\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n\u305d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306ebase\u306e\u30d1\u30b9\u306e\u4f4d\u7f6e\u3065\u3051\u304c\u3088\u304f\u308f\u3089\u306a\u3044\n\n\u307f\u305f\u3044\u306a\u6240\u3067\u3001\u3060\u3044\u3076\u30cf\u30de\u308a\u307e\u3057\u305f\u30fb\u30fb\n\nkarma.conf.js\nmodule.exports = function(config) {\n  config.set({\n    basePath: '',\n    frameworks: ['jasmine', 'requirejs'],\n    files: [\n      {\n        pattern: 'lib/**/*.js',\n        included: false\n      },\n      {\n        pattern: 'src/**/*.js',\n        included: false\n      },\n      {\n        pattern: 'spec/**/*_spec.js',\n        included: false\n      },\n      {\n        pattern: 'node_modules/jquery/dist/jquery.js',\n        included: false\n      },\n      {\n        pattern: 'node_modules/underscore/underscore.js',\n        included: false\n      },\n      'spec/require.config.js'\n    ],\n    // \u30d7\u30ed\u30c0\u30af\u30c8\u30b3\u30fc\u30c9\u7528\u306erequire.config.js\u3092\u6307\u5b9a\u3057\u3066\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306b\u306f\u8aad\u307f\u8fbc\u307e\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n    exclude: [\n      'src/app.js'\n    ],\n    preprocessors: {\n    },\n    reporters: ['spec', 'html'],\n    port: 9876,\n    colors: true,\n    logLevel: config.LOG_INFO,\n    autoWatch: true,\n    browsers: ['Chrome'],\n    singleRun: false,\n    concurrency: Infinity\n  });\n};\n\n\nspec/require.config.js\nvar tests = [];\nfor (var file in window.__karma__.files) {\n  if (window.__karma__.files.hasOwnProperty(file)) {\n    if (/spec\\.js$/.test(file)) {\n      tests.push(file);\n    }\n  }\n}\n\nrequirejs.config({\n  baseUrl: \"/base\",\n  paths: {    \n    'jquery': 'node_modules/jquery/dist/jquery',\n    'underscore': 'node_modules/underscore/underscore',\n    'books': 'src/model/books'\n  },\n  shim: {\n    'books': {\n      deps: ['jquery'],\n      exports: 'books'\n    }\n  },\n  deps: tests,\n  callback: window.__karma__.start\n});\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3057\u305f\u4e0a\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\n./node_modules/karma/bin/karma start ./karma.conf.js\n\n\u3068\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001spec/\u914d\u4e0b\u306b\u3042\u308b\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\n\nspec/model/books_spec.js\ndefine(['books'], function(books) {\n  describe('model/books', function() {\n    describe('fetch\u30e1\u30bd\u30c3\u30c9\u306b\u3064\u3044\u3066', function() {\n      beforeEach(function () {\n        // \u5b9f\u969b\u306bWeb\u306b\u306f\u30a2\u30af\u30bb\u30b9\u305b\u305a\u306b\u3001\u671f\u5f85\u3055\u308c\u308bJSON\u3092Mock\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n        // \u3068\u3057\u3066\u5b9a\u7fa9\n        spyOn(books, \"fetch\").and.callFake(function(){\n          var deferred = $j.Deferred();\n          var dummy = [\n            {\n              'author': 'h5y1m141',\n              'text': '\u306f\u3058\u3081\u3066\u306eQiita'\n            },\n            {\n              'author': 'h5y1m141',\n              'text': 'First Step Qiita'\n            }\n          ];\n          deferred.resolve(JSON.stringify(dummy));\n          return deferred.promise();\n        });\n      });\n      it('\u5024\u304c\u5f97\u3089\u308c\u308b', function() {\n        var items,\n            promise;\n        promise = books.fetch();\n        promise.done(function(data){\n          items = JSON.parse(data);\n        });\n        expect(items[0].author).toEqual('h5y1m141');\n      });\n    });\n  });\n});\n\n\nsrc/view/books.js\n\u30b0\u30b0\u30c3\u305f\u6642\u306b\u3061\u3087\u3063\u3068\u53e4\u3044\u60c5\u5831\uff08_.template(template, items)\u307f\u305f\u3044\u306a\u66f8\u304d\u65b9\u3092\u7d39\u4ecb\u3057\u3066\u308b\u3084\u3064\uff09\u3092\u53c2\u8003\u306b\u66f8\u3044\u3066\u3046\u307e\u304f\u52d5\u4f5c\u305b\u305a\u306b\u5f53\u521d\u30cf\u30de\u3063\u305f\u306e\u3067\u3059\u304c\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u898b\u3066\u66f8\u304d\u65b9\u3092\u898b\u3064\u3064\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u3089\u52d5\u4f5c\u3057\u307e\u3057\u305f\n'use strict';\n\nvar viewBooks = function(_, $) {\n  // private method\n  function _render(items){\n    var result = [],\n        $dataArea,\n        template,\n        compiled;\n    $dataArea = $('.dataArea');\n    template = $('#myBooks').html();\n    compiled = _.template(template);\n    return $dataArea.append(compiled({ items: items }));\n  }\n  // public method\n  var publics = {\n    render: _render\n  };\n\n  return publics;\n};\ndefine(['underscore', 'jquery'], viewBooks);\n\n\nindex.html\n\u63cf\u753b\u51e6\u7406\u3092\u884c\u3046\u6642\u306bUnderscore\u306etemplate&compile\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nJavaScript\u5185\u3067HTML\u306e\u8a18\u8ff0\u3092\u884c\u308f\u306a\u304f\u3066\u6e08\u3080\u3088\u3046\u306b\u306a\u308a\u3001\u305d\u306e\u5909\u308f\u308a\u306bHTML\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n<html>\n  <head>\n    <script data-main='src/app' src='lib/require.js'></script>\n    <script src='src/no_require.js'></script>\n  </head>\n  <body>\n    <h3>JSON\u8aad\u307f\u8fbc\u307f\u30b5\u30f3\u30d7\u30eb</h3>\n    <button id='loadJSON'>\u8aad\u307f\u8fbc\u307f\u958b\u59cb</button>\n    <div class='dataArea'></div>\n    <ul>\n      <script type=\"text/template\" id=\"myBooks\">\n       <% _.each(items, function(item){ %>\n         <li>\u540d\u524d\uff1a<%= item.author %></li>\n         <li>\u30bf\u30a4\u30c8\u30eb\uff1a<%= item.text %></li>\n       <% }); %>\n      </script>\n    </ul>\n  </body>\n</html>\n\n\n\u6700\u5f8c\u306b\nView\u5074\u306e\u30c6\u30b9\u30c8\u3082\u66f8\u3044\u305f\u306e\u3067\u3059\u304c\u3001Jasmine\uff0bKarma\u306e\u74b0\u5883\u3067RequireJS\u4f7f\u3063\u305f\u30b5\u30f3\u30d7\u30eb\u304c\u3042\u307e\u308a\u898b\u3064\u304b\u3089\u305a\u3001\u3053\u3063\u3061\u306f\u8272\u3005\u30cf\u30de\u3063\u3066\u305d\u308c\u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3066\u3057\u307e\u3046\u3068\u3001\u3055\u3089\u306b\u9577\u6587\u306b\u306a\u308b\u306e\u3067\u3001\u5225\u306e\u6a5f\u4f1a\u306b\u307e\u3068\u3081\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u521d\u3081\u306b\n\nRequireJS\u4f7f\u3063\u305fJavaScript\u3092\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u304f\u4ed5\u4e8b\u3092\u6700\u8fd1\u3084\u3063\u3066\u3044\u3066\u81ea\u5206\u81ea\u8eab\u3067RequireJS\u4f7f\u3063\u305f\u3053\u3068\u304c\u7121\u304b\u3063\u305f\u306e\u3067\u3001\u5c0f\u3055\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u4f5c\u3063\u3066\u3001\u305d\u308c\u3092\u30d9\u30fc\u30b9\u306b\u3061\u3087\u3063\u3068\u3065\u3064\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u3063\u305f\u3089\u3001\u5272\u308a\u3068\u826f\u3044\u611f\u3058\u306e\u30b3\u30fc\u30c9\u306b\u306a\u3063\u305f\u306e\u3067\u6d41\u308c\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n### \u53c2\u8003\u307e\u3067\u306b\u4f5c\u3063\u305f\u30a2\u30d7\u30ea\u306e\u4ed5\u69d8\n\n- XHR\u3067\u5916\u90e8\u304b\u3089JSON\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\n- \u8aad\u307f\u8fbc\u3093\u3060JSON\u3092\u52a0\u5de5\u3057\u3066\u4efb\u610f\u306eHTML\u8981\u7d20\u306b\u8ffd\u52a0\n\n### \u30a2\u30d7\u30ea\u306e\u69cb\u9020\n\n```sh\n\u251c\u2500\u2500 gulpfile.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 karma.conf.js\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 require.js\n\u251c\u2500\u2500 node_modules\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 \uff08\u305f\u304f\u3055\u3093\u3042\u308b\u306e\u3067\u7701\u7565\uff09\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 spec\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 \uff08\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bJasmine\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3092\u914d\u7f6e\uff09\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 app.js\n    \u251c\u2500\u2500 load_books.js\n    \u251c\u2500\u2500 main.js\n    \u251c\u2500\u2500 model\n    \u2514\u2500\u2500 view\n```\n\n### \u958b\u767a\u74b0\u5883\n\n- Mac OS X 10.8.5\n- Node.js\n  - v4.2.4\n  - nodebrew\u3092\u5229\u7528\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  - \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fnpm\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u4ee5\u4e0b\u306epackage.json\u3092\u53c2\u7167\n- \u30c6\u30b9\u30c8\u306f\u9014\u4e2d\u3067\u66f8\u3044\u305f\u306e\u3067Jasmine\uff0bKarma\u306e\u74b0\u5883\u3067\u5b9f\u884c\u3057\u3066\u307e\u3059\u3002\n\n#### package.json\n\n```json\n{\n  \"name\": \"sample\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"gulp\": \"^3.9.0\",\n    \"gulp-webserver\": \"*\",\n    \"jasmine-core\": \"^2.3.4\",\n    \"jquery\": \"^2.1.3\",\n    \"karma\": \"^0.13.15\",\n    \"karma-chrome-launcher\": \"^0.2.1\",\n    \"karma-jasmine\": \"^0.3.6\",\n    \"karma-jasmine-html-reporter\": \"^0.1.8\",\n    \"karma-jasmine-jquery\": \"^0.1.1\",\n    \"karma-requirejs\": \"^0.2.2\",\n    \"karma-spec-reporter\": \"0.0.22\",\n    \"requirejs\": \"^2.1.22\",\n    \"underscore\": \"^1.8.3\"\n  }\n}\n```\n\n#### gulpfile.js\n\n```js\nvar gulp = require('gulp');\nvar webserver = require('gulp-webserver');\n\ngulp.task('webserver', function() {\n  gulp.src('./')\n    .pipe(webserver({\n      livereload: true,\n      port: 9000,\n      fallback: 'index.html',\n      open: true\n    }));\n});\n\ngulp.task('default', ['webserver']);\n```\n\n## \u6700\u521d\u306e\u51c4\u304f\u30a4\u30b1\u3066\u306a\u3044\u30b3\u30fc\u30c9\n\nRequireJS\u304c\u3061\u3087\u3063\u3068\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u72b6\u614b\u3060\u3063\u305f\u3053\u3068\u3082\u3042\u308a\u3001\u30d9\u30bf\u306b\n1. XHR\u7d4c\u7531\u3067JSON\u3092\u8aad\u307f\u8fbc\u307f\n2. \u7d50\u679c\u3092\u753b\u9762\u306b\u53cd\u6620\u3055\u305b\u308b\n\n\u3068\u3044\u3046\u306e\u3092\u3053\u3093\u306a\u611f\u3058\u2193\u3067\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\n\n### src/load_json.js\n\n```javascript\nrequirejs(['loadJSON'], function(loadJSON) {\n  $('#loadJSON').on('click', function(){\n    var url = 'https://gist.githubusercontent.com/h5y1m141/da8e8b4a1c3e697eda4c/raw/9a0ee74da46378d6cd7402e5f921d0cc4a1c041a/qiita.json';\n    $.ajax({\n      url: url\n    }).done(function(data) {\n      var items = JSON.parse(data),\n          result = [];\n      _.each(items, function(item){\n        var element;\n        element = '<li>\u540d\u524d\uff1a' + item.author + '</li>' +\n          '<li>\u30bf\u30a4\u30c8\u30eb\uff1a' + item.text + '</li>';\n        result.push(element);\n      });\n      $('.dataArea').append('<ul>' + result + '</ul>');\n    });\n  });\n});\n```\n\n### src/app.js\n\n```javascript\nrequirejs.config({\n  paths: {\n    'jquery': '../node_modules/jquery/dist/jquery',\n    'underscore': '../node_modules/underscore/underscore-min',\n    'loadJSON': 'load_json'\n  },\n  shim: {\n    'loadJSON': {\n      deps: ['underscore', 'jquery'],\n      exports: 'loadJSON'\n    }\n  }\n});\nrequirejs(['load_json']);\n```\n\n### index.html\n\n```html\n<html>\n  <head>\n    <script data-main='src/app' src='lib/require.js'></script>\n    <script src='src/no_require.js'></script>\n  </head>\n  <body>\n    <h3>JSON\u8aad\u307f\u8fbc\u307f\u30b5\u30f3\u30d7\u30eb</h3>\n    <button id='loadJSON'>\u8aad\u307f\u8fbc\u307f\u958b\u59cb</button>\n    <div class='dataArea'></div>\n  </body>\n</html>\n```\n\n## \u3053\u308c\u306e\u3069\u3053\u304c\u554f\u984c\u304b\uff1f\n\n\u52d5\u4f5c\u306f\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u306fOK\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001**\u5916\u90e8\u304b\u3089\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\u2192 \uff08\u8aad\u307f\u8fbc\u307f\u304c\u6210\u529f\u3057\uff09\u2192\u3000\u305d\u306e\u30c7\u30fc\u30bf\u30fc\u3092View\u306b\u53cd\u6620\u3059\u308b**\u51e6\u7406\u304c\u4e00\u7dd2\u306b\u306a\u3063\u3066\u308b\u305f\u3081\u3001\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5f79\u5272\uff08\u8cac\u4efb\u7bc4\u56f2\uff09\u304c\u30a4\u30de\u30a4\u30c1\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n- \u5916\u90e8\u304b\u3089\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\u51e6\u7406\u3092\u62c5\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\n-\uff08\u8aad\u307f\u8fbc\u307f\u304c\u6210\u529f\u3057\uff09\u305f\u3089\u305d\u306e\u30c7\u30fc\u30bf\u30fc\u3092View\u306b\u53cd\u6620\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\n\n\u3068\u3044\u3046\u5f62\u3067\u5206\u5272\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u308c\u305e\u308c\u306e\u5f79\u5272\u3082\u660e\u78ba\u306b\u306a\u308a\u81ea\u7136\u3068\u305d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u5bfe\u3057\u3066\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u3082\u66f8\u304d\u3084\u3059\u304f\u306a\u308a\u305d\u3046\u3067\u3088\u304f\u8a00\u308f\u308c\u308b**\u30c6\u30b9\u30c8\u304c\u66f8\u304d\u3084\u3059\u3044\u30b3\u30fc\u30c9\u306f\u826f\u3044\u30b3\u30fc\u30c9**\u306b\u3064\u306a\u304c\u308b\u6c17\u304c\u3057\u307e\u3057\u305f\u3002\n\n\u6700\u521d\u306b\u30d9\u30bf\u306b\u66f8\u3044\u3066\u3001\u6b63\u76f4\u3042\u307e\u308a\u30a4\u30b1\u3066\u306a\u304b\u3063\u305f\u30b3\u30fc\u30c9\u3092\u3069\u306e\u3088\u3046\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u305f\u304b\u9806\u756a\u306b\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u5916\u90e8\u304b\u3089\u30c7\u30fc\u30bf\u30fc\u3092\u8aad\u307f\u8fbc\u3080\u51e6\u7406\u3092\u5206\u3051\u308b\n\nWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u3044\u3046\u6240\u306eModel\u3068\u3044\u3046\u4f4d\u7f6e\u3065\u3051\u3068\u6349\u3048\u3066\u3001src/model/books.js\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n### src/model/books.js\n\nload_json.js\u3067\u51e6\u7406\u3055\u308c\u3066\u3044\u305f$ajax\u306e\u51e6\u7406\u3092books.js\u306b\u307e\u305a\u306f\u79fb\u52d5\u3055\u305b\u3064\u3064\u3001jQuery.Deferred\u3092\u5229\u7528\u3059\u308b\u66f8\u304d\u65b9\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n```javascript\ndefine(['jquery'],function($) {\n  return {\n    fetch: function() {\n      var deferred,\n          url = 'https://gist.githubusercontent.com/h5y1m141/da8e8b4a1c3e697eda4c/raw/9a0ee74da46378d6cd7402e5f921d0cc4a1c041a/qiita.json';\n      // \u4ee5\u4e0b\u306e\u90e8\u5206\u304c\u6700\u521d\u306e\u30b3\u30fc\u30c9\u3068\u3061\u3087\u3063\u3068\u7570\u306a\u308b\u70b9\n      deferred = $.ajax({\n        url: url\n      });\n      return deferred.promise();\n    }\n  };\n});\n```\n\n#### \u306a\u305c\u3001jQuery.Deferred\u3092\u4f7f\u3046\u306e\u304b\uff1f\n\n> jQuery.Deferred\u3092\u4f7f\u3046\u3068\u5b09\u3057\u3044\u306e\u306f\u3001jQuery.Deferred\u306e\u4ed5\u69d8\u3092\u6e80\u305f\u3059\u90e8\u54c1\u540c\u58eb\u3092\u7c21\u5358\u306b\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u304b\u3089\u3067\u3059\u3002\u4e2d\u306b\u306f\u51e6\u7406\u3092\u66f8\u304d\u4e0b\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3068\u304b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u30cd\u30b9\u30c8\u3092\u9632\u3052\u308b\u306e\u304c\u3044\u3044\u3068\u304b\u8a00\u3046\u4eba\u3082\u3044\u307e\u3059\u304c\u3001\u500b\u4eba\u7684\u306b\u3053\u3063\u3061\u306e\u307b\u3046\u304c\u3088\u3063\u307d\u3069\u91cd\u8981\u3060\u3068\u611f\u3058\u307e\u3059\u3002\n> \n> [\u7d50\u5c40jQuery.Deferred\u306e\u4f55\u304c\u5b09\u3057\u3044\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u3001\u3068\u3044\u3046\u4eba\u5411\u3051\u306e\u5c0f\u8a71](http://qiita.com/yuku_t/items/1b8ce6bba133a7eaeb23)\n\n\u3068\u3044\u3046\u4e00\u6587\u304c\u3042\u308a\u307e\u3059\u3002\n\njQuery.Deferred\u306e\u4ed5\u69d8\u3092\u6e80\u305f\u3059\u90e8\u54c1\u540c\u58eb\u3092\u7c21\u5358\u306b\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u540c\u58eb\u306e\u9023\u643a\u304c\u3084\u308a\u3084\u3059\u304f\u306a\u308b\u5229\u70b9\u304c\u3042\u308b\u306e\u3067\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\n### src/load_books.js\n\nModel\u3067jQuery.Deferred\u3092\u4f7f\u3063\u305f\u51e6\u7406\u306b\u3057\u305f\u306e\u3067\u3001\u3053\u3061\u3089\u3082\u4e00\u90e8\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```javascript\nrequirejs(['books'], function(books) {\n  $('#loadJSON').on('click', function(){\n    var promise,result = [];\n    // \u3053\u308c\u4ee5\u964d\u304c\u7570\u306a\u308b\n    promise = books.fetch();\n    promise.done(function(data){\n      var items;\n      items = JSON.parse(data);\n      _.each(items, function(item){\n        var element;\n        element = '<li>\u540d\u524d\uff1a' + item.author + '</li>' +\n          '<li>\u30bf\u30a4\u30c8\u30eb\uff1a' + item.text + '</li>';\n        result.push(element);\n      });\n      $('.dataArea').append('<ul>' + result + '</ul>');\n    });\n  });\n});\n```\n\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u3092\u898b\u3066\u3082\u3089\u3046\u3068\u308f\u304b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001jQuery.Deferred\u3092\u5229\u7528\u3057\u305f\u3053\u3068\u3067\u5f93\u6765\u306f$.ajax()\u3092\u5b9f\u884c\u2192\u5b9f\u884c\u5f8c\u3001done(function() {})\u3067View\u306e\u63cf\u753b\u3068\u3044\u3046\u30cd\u30b9\u30c8\u3057\u305f\u30b3\u30fc\u30c9\u306b\u306a\u308a\u304c\u3061\u3060\u3063\u305f\u3082\u306e\u304c\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30cd\u30b9\u30c8\u304c\u6df1\u304f\u306a\u3089\u306a\u3044\u72b6\u614b\u306b\u306a\u308a\u3053\u306e\u72b6\u614b\u3067\u500b\u4eba\u7684\u306b\u306f\u826f\u3055\u305d\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u304d\u305f\u6c17\u304c\u3057\u307e\u3057\u305f\u3002\n\n### \u4e0a\u8a18\u306e2\u3064\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u547c\u3073\u51fa\u3059\u5074\u306e\u4fee\u6b63\n\nsrc/app.js\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```javascript\nrequirejs.config({\n  paths: {\n    'jquery': '../node_modules/jquery/dist/jquery',\n    'underscore': '../node_modules/underscore/underscore-min',\n    'books': 'model/books'\n  },\n  shim: {\n    'books': {\n      deps: ['underscore', 'jquery'],\n      exports: 'books'\n    }\n  }\n});\nrequirejs(['load_books']);\n```\n\n\u3053\u306e\u72b6\u614b\u3067\u3082\u60aa\u304f\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001load_books.js\u306e\u4f4d\u7f6e\u3065\u3051\u3068\u3057\u3066\u306f\u3001MVC\u7684\u306b\u3044\u3046\u3068Controller\u306e\u3088\u3046\u306a\u4f4d\u7f6e\u3065\u3051\u306a\u6c17\u304c\u3057\u307e\u3057\u305f\u3002\n\nView\u306b\u95a2\u3059\u308b\u63cf\u753b\u51e6\u7406\u3092\u5225\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u305f\u307b\u3046\u304c\u305d\u308c\u305e\u308c\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066\u72ec\u7acb\u3057\u305f\u72b6\u614b\u306b\u306a\u308a\u3001\u30c6\u30b9\u30c8\u304c\u66f8\u304d\u3084\u3059\u304f\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u66f4\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n## View\u306e\u51e6\u7406\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\n\nsrc/load_json.js\u3067\n\n```javascript\npromise.done(function(data){\n  _.each(items, function(item){\n    // \u3053\u3053\u304b\u3089View\u306e\u63cf\u753b\u51e6\u7406\u3092\u5b9f\u65bd\u3057\u3066\u308b\u7b87\u6240\u3002\u30b3\u30fc\u30c9\u306f\u7701\u7565\n  });\n});\n```\n\n\u3068\u3044\u3046\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001promise.done\u3067\u30c7\u30fc\u30bf\u30fc\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u305d\u306e\u30c7\u30fc\u30bf\u30fc\u3092\u5f15\u6570\u306b\u3057\u3066View\u306e\u63cf\u753b\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n### View\u306e\u63cf\u753b\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f5c\u6210\n\nsrc/view/books.js\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3057\u305f\u3002\n\n```javascript\ndefine(['underscore', 'jquery'], function(_, $) {\n  return {\n    render: function(items) {\n      var result = [],\n          $dataArea;\n      $dataArea = $('.dataArea');\n      _.each(items, function(item){\n        var element;\n        element = '<li>\u540d\u524d\uff1a' + item.author + '</li>' +\n          '<li>\u30bf\u30a4\u30c8\u30eb\uff1a' + item.text + '</li>';\n        result.push(element);\n      });\n      return $dataArea.append('<ul>' + result + '</ul>');\n    }\n  };\n});\n```\n\n\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067render()\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u3001\u5f15\u6570\u306b\u63cf\u753b\u3092\u3059\u308b\u6642\u306b\u5fc5\u8981\u3068\u306a\u308b\u30c7\u30fc\u30bf\u30fc\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\n\n\u63cf\u753b\u306e\u30ed\u30b8\u30c3\u30af\u306f\u3001Underscore\u306etemplate\u306e\u6a5f\u80fd\u306a\u3069\u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u3088\u308a\u4fdd\u5b88\u6027\u304c\u3042\u304c\u308a\u307e\u3059\u304c\u3001\u3044\u304d\u306a\u308a\u8272\u3005\u5909\u66f4\u3059\u308b\u3068\u3001\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u6642\u306b\u3001\u4f55\u304c\u554f\u984c\u306a\u306e\u304b\u628a\u63e1\u3057\u3065\u3089\u304f\u306a\u308b\u306e\u3067\u3072\u3068\u307e\u305a\u3053\u306e\u6bb5\u968e\u3067\u306f\u305d\u306e\u307e\u307e\u30b3\u30d4\u30da\u3057\u307e\u3057\u305f\u3002\n\n### \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u547c\u3073\u51fa\u3059\u5074\u306e\u4fee\u6b63\n\nView\u306e\u63cf\u753b\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f5c\u6210\u3092\u3057\u305f\u306e\u3067src/app.js\u3067\u305d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8aad\u307f\u3053\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```js\nrequirejs.config({\n  paths: {\n    'jquery': '../node_modules/jquery/dist/jquery',\n    'underscore': '../node_modules/underscore/underscore-min',\n    'books': 'model/books',\n    'viewBooks': 'view/books' // \u2190\u3053\u308c\u3092\u8ffd\u52a0\n  },\n  shim: {\n    'books': {\n      deps: ['jquery'],\n      exports: 'books'\n    },\n    // \u4ee5\u4e0b\u3092\u8ffd\u52a0\n    'viewBooks': {\n      deps: ['underscore', 'jquery'],\n      exports: 'viewBooks'\n    }\n  }\n});\n\nrequirejs(['main', 'use_non_amd','load_books']);\n```\n\n## \u6700\u5f8c\u306b\u7d30\u304b\u3044\u4fee\u6b63\n\n\u4e0a\u8a18\u306e\u6700\u7d42\u7684\u306a\u4ed5\u4e0a\u3052\u3068\u3057\u3066\u4ee5\u4e0b\u3092\u884c\u3044\u307e\u3057\u305f\n\n- Model\n  - \u4e0a\u8a18\u306e\u66f8\u304d\u65b9\u3060\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u5897\u3084\u3057\u305f\u6642\u306b\u53ef\u8aad\u6027\u60aa\u3044\u306e\u3067\u3001\u305d\u3053\u3092\u8003\u616e\u3057\u305f\u66f8\u304d\u65b9\u306b\u3059\u308b\n  - Jasmine\u3067\u30c6\u30b9\u30c8\u66f8\u304d\u3084\u3059\u304f\u306a\u3063\u305f\u306e\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u304f \n- View\n  - \u4e0a\u8a18\u306e\u66f8\u304d\u65b9\u3060\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u5897\u3084\u3057\u305f\u6642\u306b\u53ef\u8aad\u6027\u60aa\u3044\u306e\u3067\u3001\u305d\u3053\u3092\u8003\u616e\u3057\u305f\u66f8\u304d\u65b9\u306b\u3059\u308b\n  - View\u306e\u63cf\u753b\u3092\u30d9\u30bf\u306b\u6587\u5b57\u5217\u3067HTML\u3067\u66f8\u3044\u3066\u308b\n\n### src/model/books.js\n\n```js\n'use strict';\n\nvar loadJSON = function($){\n  // private method\n  function _fetch(){\n    var deferred,\n        url = 'https://gist.githubusercontent.com/h5y1m141/da8e8b4a1c3e697eda4c/raw/9a0ee74da46378d6cd7402e5f921d0cc4a1c041a/qiita.json';\n    deferred = $.ajax({\n      url: url\n    });\n    return deferred.promise();\n  }\n  \n  // public method\n  var publics = {\n    fetch: _fetch\n  };\n\n  return publics;\n};\n\ndefine(['jquery'], loadJSON);\n```\n\n### \u30c6\u30b9\u30c8\u306b\u3064\u3044\u3066\n\nKarma\uff0bJasmine\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u305f\u306e\u3067\u3059\u304c\u3001\n\n- Karma\u304b\u3089RequireJS\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u3042\u3052\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n- \u305d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306ebase\u306e\u30d1\u30b9\u306e\u4f4d\u7f6e\u3065\u3051\u304c\u3088\u304f\u308f\u3089\u306a\u3044\n\n\u307f\u305f\u3044\u306a\u6240\u3067\u3001\u3060\u3044\u3076\u30cf\u30de\u308a\u307e\u3057\u305f\u30fb\u30fb\n\n\n#### karma.conf.js\n\n```js\nmodule.exports = function(config) {\n  config.set({\n    basePath: '',\n    frameworks: ['jasmine', 'requirejs'],\n    files: [\n      {\n        pattern: 'lib/**/*.js',\n        included: false\n      },\n      {\n        pattern: 'src/**/*.js',\n        included: false\n      },\n      {\n        pattern: 'spec/**/*_spec.js',\n        included: false\n      },\n      {\n        pattern: 'node_modules/jquery/dist/jquery.js',\n        included: false\n      },\n      {\n        pattern: 'node_modules/underscore/underscore.js',\n        included: false\n      },\n      'spec/require.config.js'\n    ],\n    // \u30d7\u30ed\u30c0\u30af\u30c8\u30b3\u30fc\u30c9\u7528\u306erequire.config.js\u3092\u6307\u5b9a\u3057\u3066\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306b\u306f\u8aad\u307f\u8fbc\u307e\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n    exclude: [\n      'src/app.js'\n    ],\n    preprocessors: {\n    },\n    reporters: ['spec', 'html'],\n    port: 9876,\n    colors: true,\n    logLevel: config.LOG_INFO,\n    autoWatch: true,\n    browsers: ['Chrome'],\n    singleRun: false,\n    concurrency: Infinity\n  });\n};\n```\n\n#### spec/require.config.js\n\n```js\nvar tests = [];\nfor (var file in window.__karma__.files) {\n  if (window.__karma__.files.hasOwnProperty(file)) {\n    if (/spec\\.js$/.test(file)) {\n      tests.push(file);\n    }\n  }\n}\n\nrequirejs.config({\n  baseUrl: \"/base\",\n  paths: {    \n    'jquery': 'node_modules/jquery/dist/jquery',\n    'underscore': 'node_modules/underscore/underscore',\n    'books': 'src/model/books'\n  },\n  shim: {\n    'books': {\n      deps: ['jquery'],\n      exports: 'books'\n    }\n  },\n  deps: tests,\n  callback: window.__karma__.start\n});\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3057\u305f\u4e0a\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\n\n```shell-session\n./node_modules/karma/bin/karma start ./karma.conf.js\n```\n\n\u3068\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001spec/\u914d\u4e0b\u306b\u3042\u308b\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\n\n#### spec/model/books_spec.js\n\n```js\ndefine(['books'], function(books) {\n  describe('model/books', function() {\n    describe('fetch\u30e1\u30bd\u30c3\u30c9\u306b\u3064\u3044\u3066', function() {\n      beforeEach(function () {\n        // \u5b9f\u969b\u306bWeb\u306b\u306f\u30a2\u30af\u30bb\u30b9\u305b\u305a\u306b\u3001\u671f\u5f85\u3055\u308c\u308bJSON\u3092Mock\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n        // \u3068\u3057\u3066\u5b9a\u7fa9\n        spyOn(books, \"fetch\").and.callFake(function(){\n          var deferred = $j.Deferred();\n          var dummy = [\n            {\n              'author': 'h5y1m141',\n              'text': '\u306f\u3058\u3081\u3066\u306eQiita'\n            },\n            {\n              'author': 'h5y1m141',\n              'text': 'First Step Qiita'\n            }\n          ];\n          deferred.resolve(JSON.stringify(dummy));\n          return deferred.promise();\n        });\n      });\n      it('\u5024\u304c\u5f97\u3089\u308c\u308b', function() {\n        var items,\n            promise;\n        promise = books.fetch();\n        promise.done(function(data){\n          items = JSON.parse(data);\n        });\n        expect(items[0].author).toEqual('h5y1m141');\n      });\n    });\n  });\n});\n```\n\n### src/view/books.js\n\n\u30b0\u30b0\u30c3\u305f\u6642\u306b\u3061\u3087\u3063\u3068\u53e4\u3044\u60c5\u5831\uff08_.template(template, items)\u307f\u305f\u3044\u306a\u66f8\u304d\u65b9\u3092\u7d39\u4ecb\u3057\u3066\u308b\u3084\u3064\uff09\u3092\u53c2\u8003\u306b\u66f8\u3044\u3066\u3046\u307e\u304f\u52d5\u4f5c\u305b\u305a\u306b\u5f53\u521d\u30cf\u30de\u3063\u305f\u306e\u3067\u3059\u304c\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u898b\u3066\u66f8\u304d\u65b9\u3092\u898b\u3064\u3064\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u3089\u52d5\u4f5c\u3057\u307e\u3057\u305f\n\n```js\n'use strict';\n\nvar viewBooks = function(_, $) {\n  // private method\n  function _render(items){\n    var result = [],\n        $dataArea,\n        template,\n        compiled;\n    $dataArea = $('.dataArea');\n    template = $('#myBooks').html();\n    compiled = _.template(template);\n    return $dataArea.append(compiled({ items: items }));\n  }\n  // public method\n  var publics = {\n    render: _render\n  };\n\n  return publics;\n};\ndefine(['underscore', 'jquery'], viewBooks);\n```\n\n### index.html\n\n\u63cf\u753b\u51e6\u7406\u3092\u884c\u3046\u6642\u306bUnderscore\u306etemplate&compile\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nJavaScript\u5185\u3067HTML\u306e\u8a18\u8ff0\u3092\u884c\u308f\u306a\u304f\u3066\u6e08\u3080\u3088\u3046\u306b\u306a\u308a\u3001\u305d\u306e\u5909\u308f\u308a\u306bHTML\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```html\n<html>\n  <head>\n    <script data-main='src/app' src='lib/require.js'></script>\n    <script src='src/no_require.js'></script>\n  </head>\n  <body>\n    <h3>JSON\u8aad\u307f\u8fbc\u307f\u30b5\u30f3\u30d7\u30eb</h3>\n    <button id='loadJSON'>\u8aad\u307f\u8fbc\u307f\u958b\u59cb</button>\n    <div class='dataArea'></div>\n    <ul>\n      <script type=\"text/template\" id=\"myBooks\">\n       <% _.each(items, function(item){ %>\n         <li>\u540d\u524d\uff1a<%= item.author %></li>\n         <li>\u30bf\u30a4\u30c8\u30eb\uff1a<%= item.text %></li>\n       <% }); %>\n      </script>\n    </ul>\n  </body>\n</html>\n```\n\n## \u6700\u5f8c\u306b\n\nView\u5074\u306e\u30c6\u30b9\u30c8\u3082\u66f8\u3044\u305f\u306e\u3067\u3059\u304c\u3001Jasmine\uff0bKarma\u306e\u74b0\u5883\u3067RequireJS\u4f7f\u3063\u305f\u30b5\u30f3\u30d7\u30eb\u304c\u3042\u307e\u308a\u898b\u3064\u304b\u3089\u305a\u3001\u3053\u3063\u3061\u306f\u8272\u3005\u30cf\u30de\u3063\u3066\u305d\u308c\u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3066\u3057\u307e\u3046\u3068\u3001\u3055\u3089\u306b\u9577\u6587\u306b\u306a\u308b\u306e\u3067\u3001\u5225\u306e\u6a5f\u4f1a\u306b\u307e\u3068\u3081\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["JavaScript", "RequireJS"]}