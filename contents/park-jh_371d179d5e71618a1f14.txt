{"context": "\n\n\u95a2\u9023\u8a18\u4e8b\n\nChef\u3092\u4f7f\u3063\u3066\u3088\u308a\u52b9\u7387\u7684\u306b\u30b5\u30fc\u30d0\u3092\u7ba1\u7406\u3057\u3088\u3046\u3002\u307e\u305a\u306f\u7528\u8a9e\u304b\u3089\nBerkshelf\u3092\u4f7f\u3063\u3066\u5916\u90e8\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u30ce\u30fc\u30c9\u306b\u9069\u7528\u3059\u308b\u3002\n\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u4f5c\u6210\u3057\u3066\u30ce\u30fc\u30c9\u306b\u9069\u7528\u3059\u308b\u3002- \u305d\u306e\uff11\n\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u4f5c\u6210\u3057\u3066\u30ce\u30fc\u30c9\u306b\u9069\u7528\u3059\u308b\u3002- \u305d\u306e\uff12\nChef\u3067CentOS 6.7 + rbenv + ruby 2.3.0\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3002\nChef\u3067CentOS 6.7 + Vim 7.4 + lua\u3092\u8a2d\u7f6e\u3059\u308b\u3002\nChef\u3067Vim\u30d7\u30e9\u30b0\u30a4\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u30fcNeoBundle\u3092\u8a2d\u7f6e\u3059\u308b\u3002\nChef\u306e\u30ec\u30b7\u30d4\u3092\u30c7\u30d0\u30c3\u30b0\u3057\u3066\u307f\u3088\u3046\u3002\nChef\u3067CentOS 6.7 + nginx\u3092\u8a2d\u7f6e\u3059\u308b\u3002- \u5916\u90e8\u30af\u30c3\u30af\u30d6\u30c3\u30af\nChef\u3067CentOS 6.7 + nginx\u3092\u8a2d\u7f6e\u3059\u308b\u3002- \u30ab\u30b9\u30bf\u30e0\u30af\u30c3\u30af\u30d6\u30c3\u30af\nChef\u3067CentOS 6.7 + nodejs + npm\u3092\u8a2d\u7f6e\u3059\u308b\u3002\nChef\u3067Vim\u30d7\u30e9\u30b0\u30a4\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u30fcvim-plug\u3092\u8a2d\u7f6e\u3059\u308b\u3002\nohai\u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046\u3002\nChef Solo\u304b\u3089Chef Zero\u3078\nChef\u3067nginx + php(php-fpm) + mariadb + wordpress\u3092\u8a2d\u7f6e\u3059\u308b\u3002\n\n\nlua\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nlua\u3092\u6709\u52b9\u306b\u3057\u305fVim\u3092\u8a2d\u7f6e\u3059\u308b\u305f\u3081lua\u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nlua-devel\u306fyum\u3067\u8a2d\u7f6e\u3059\u308b\u3002\nluajit\u3092\u8a2d\u7f6e\u3059\u308b\u3068lua\u3092\u3088\u308a\u9ad8\u901f\u3067\u4f7f\u3048\u308b\u3002git\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u53d6\u5f97\u3057\u3066tarball\u3067\u8a2d\u7f6e\u3059\u308b\u3002\n\n\n\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u751f\u6210\n  % bin/knife cookbook create lua -o site-cookbooks\n\n\n\u30ec\u30b7\u30d4\u3092\u4f5c\u6210\n\nsite-cookbooks/lua/recipes/default.rb\n\n  package 'lua-devel' do\n    action :install\n  end\n\n  src_filepath = \"#{Chef::Config['file_cache_path']}/luajit\"\n\n  git \"#{src_filepath}\" do\n    repository node['lua']['luajit_url']\n    user 'root'\n    group 'root'\n  end\n\n  bash 'install_luajit' do\n    cwd ::File.dirname(src_filepath)\n    code <<-EOH\n      cd #{src_filepath}\n      make && make install\n    EOH\n  end\n\n\n\u5b9f\u884c\u4e00\u89a7\u306b\u8ffd\u52a0\n  % bin/knife node run_list add dev 'recipe[lua]' -z\n\n\nVim 7.4\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30af\u30c3\u30af\u30d6\u30c3\u30af\u306e\u751f\u6210\n\nBerkshelf\u30d5\u30a1\u30a4\u30eb\u306b\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n  % vi Berkshelf\n\n  ... snip ...\n  cookbook 'vim'\n\n\ncookbooks\u306e\u914d\u4e0b\u306b\u4fdd\u6301\u3059\u308b\u3002\n\n  bin/berks vendor cookbooks\n\n\nAttributes\n\ncookbooks/vim/attributes/default.rb\n\n\ninstall_method\u304cpackage\u306e\u5834\u5408\u3001yum\u3067\u8a2d\u7f6e\u3055\u308c\u308b\u3002\ninstall_method\u304csource\u306e\u5834\u5408\u3001\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u8a2d\u7f6e\u3055\u308c\u308b\u3002\n\n\n\n  ... snip ...\n  default['vim']['install_method'] = 'package'\n\n\ncookbooks/vim/attributes/source.rb\n\n\nCentOS 6\u4ee5\u4e0a\u3067\u306flua-devel\u306b\u4f9d\u5b58\u3055\u308c\u308b\u3002\n\n\n\n  ... snip ...\n\n  default['vim']['source']['configuration'] = \"--without-x --enable-pythoninterp --enable-rubyinterp --enable-tclinterp --enable-luainterp --enable-perlinterp --enable-cscope  --with-features=huge --prefix=#{default['vim']['source']['prefix']}\"\n\n  if platform_family? 'rhel', 'fedora'\n    if node['platform_version'].to_i >= 6\n      default['vim']['source']['dependencies'] = %w( ctags\n                                                     gcc\n                                                     lua-devel\n                                                     make\n                                                     ncurses-devel\n                                                     perl-devel\n                                                     perl-ExtUtils-CBuilder\n                                                     perl-ExtUtils-Embed\n                                                     perl-ExtUtils-ParseXS\n                                                     python-devel\n                                                     ruby-devel\n                                                     tcl-devel\n                                                 )\n\n  ... snip ...\n\n\nlua-devel\u3001luajit\u306e\u8a2d\u7f6e\u3057\u305f\u5f8c\u3001Vim\u3092\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u8a2d\u7f6e\u3059\u308b\u3068lua\u3092\u6709\u52b9\u306b\u3057\u305fVim\u304c\u8a2d\u7f6e\u3055\u308c\u308b\u308f\u3051\u3060\u3002\n\n\n\u5b9f\u884c\u4e00\u89a7\u306b\u8ffd\u52a0\n  % bin/knife node run_list add dev 'recipe[vim]' -z\n\n\nEnvironments\u306b\u3064\u3044\u3066\n\n\u958b\u767a\u3001\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3001\u672c\u756a\u74b0\u5883\u306b\u95a2\u3059\u308bAttribute\u306f\u3053\u3053\u306b\u66f8\u3044\u3066\u304a\u304f\u3002\n\n\nEnvironments\u306e\u30b3\u30de\u30f3\u30c9\n\n\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\n\n  % bin/knife environment\n\n  FATAL: Cannot find subcommand for: 'environment'\n  Available environment subcommands: (for details, knife SUB-COMMAND --help)\n\n  ** ENVIRONMENT COMMANDS **\n  knife environment compare [ENVIRONMENT..] (options)\n  knife environment create ENVIRONMENT (options)\n  knife environment delete ENVIRONMENT (options)\n  knife environment edit ENVIRONMENT (options)\n  knife environment from file FILE [FILE..] (options)\n  knife environment list (options)\n  knife environment show ENVIRONMENT (options)\n\n\n\u958b\u767a\u74b0\u5883\u306e\u751f\u6210\n\n  % bin/knife environment create development -d \"The development environment.\" -z\n\n\n\u958b\u767a\u74b0\u5883\u306e\u7de8\u96c6\n\n\nnode['lua']['luajit_url']\u3092\u5b9a\u7fa9\nVim\u306e\u30af\u30c3\u30af\u30d6\u30c3\u30af\u306e\u4e2d\u306b\u5b9a\u7fa9\u3055\u308c\u305fnode['vim']['install_method']\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\n\n\n\n  % bin/knife environment edit development -z\n\n  {\n    \"name\": \"development\",\n    \"default_attributes\": {\n      \"user\": \"vagrant\",\n      \"group\": \"vagrant\",\n      \"lua\": {\n        \"luajit_url\": \"http://luajit.org/git/luajit-2.0.git\"\n      }\n    },\n    \"override_attributes\": {\n      \"vim\": {\n        \"install_method\": \"source\"\n      }\n    }\n  }\n\n\n\u958b\u767a\u74b0\u5883\u306e\u8a73\u7d30\n\n  % bin/knife environment show development -z\n\n  chef_type:           environment\n  cookbook_versions:\n  default_attributes:\n    group: vagrant\n    lua:\n      luajit_url: http://luajit.org/git/luajit-2.0.git\n    user:  vagrant\n  description:\n  json_class:          Chef::Environment\n  name:                dev\n  override_attributes:\n    vim:\n      install_method: source\n\n\nAttributes\u306e\u512a\u5148\u9806\u4f4d\n\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a73\u7d30\u306b\u66f8\u304b\u308c\u3066\u3044\u305f\u3002\nhttps://docs.chef.io/environments.html\n\n\n\u30ce\u30fc\u30c9\u306e\u74b0\u5883\u3092\u8a2d\u5b9a\n\nchef_environment\u3092_default\u304b\u3089development\u3078\u5909\u66f4\u3059\u308b\u3002\n\n  % bin/knife node edit dev -z\n\n\n\u30ce\u30fc\u30c9\u306e\u74b0\u5883\u3092\u78ba\u8a8d\n\n  % bin/knife node show dev -z\n\n  Node Name:   dev\n  Environment: development\n  FQDN:\n  IP:          dev\n  Run List:    recipe[yum-epel], recipe[yum-update], recipe[mariadb], recipe[ruby-env], recipe[lua], recipe[vim]\n  Roles:\n  Recipes:\n  Platform:\n  Tags:\n\n\n\u5b9f\u884c\u7d50\u679c\n\n\u30ce\u30fc\u30c9\u306b\u9069\u7528\n\n  % bin/knife solo cook dev\n\n  Running Chef on dev...\n  Checking Chef version...\n  Installing Berkshelf cookbooks to 'cookbooks'...\n  Resolving cookbook dependencies...\n  Using yum-epel (0.6.5)\n  Using vim (2.0.1)\n  Using yum (3.10.0)\n  Vendoring vim (2.0.1) to cookbooks/vim\n  Vendoring yum (3.10.0) to cookbooks/yum\n  Vendoring yum-epel (0.6.5) to cookbooks/yum-epel\n  Uploading the kitchen...\n  Generating solo config...\n  Running Chef: sudo chef-solo -c ~/chef-solo/solo.rb -j ~/chef-solo/dna.json\n  Starting Chef Client, version 12.7.2\n  Compiling Cookbooks...\n  Converging 22 resources\n  Recipe: yum-epel::default\n    * yum_repository[epel] action create\n      * template[/etc/yum.repos.d/epel.repo] action create (up to date)\n      * execute[yum clean metadata epel] action nothing (skipped due to action :nothing)\n      * execute[yum-makecache-epel] action nothing (skipped due to action :nothing)\n      * ruby_block[yum-cache-reload-epel] action nothing (skipped due to action :nothing)\n       (up to date)\n  Recipe: yum-update::default\n    * execute[yum-update] action run\n      - execute yum -y update\n  Recipe: mariadb::default\n    * cookbook_file[/etc/yum.repos.d/MariaDB.repo] action create (up to date)\n    * yum_package[MariaDB-server] action install (up to date)\n    * yum_package[MariaDB-client] action install (up to date)\n    * yum_package[MariaDB-devel] action install (up to date)\n  Recipe: ruby-env::default\n    * yum_package[gcc] action install (up to date)\n    * yum_package[git] action install (up to date)\n    * yum_package[openssl-devel] action install (up to date)\n    * yum_package[readline-devel] action install (up to date)\n    * git[/home/vagrant/.rbenv] action sync (up to date)\n    * template[.bash_profile] action create (skipped due to not_if)\n    * directory[/home/vagrant/.rbenv/plugins] action create (up to date)\n    * git[/home/vagrant/.rbenv/plugins/ruby-build] action sync (up to date)\n    * execute[rbenv install 2.3.0] action run (skipped due to not_if)\n  Recipe: lua::default\n    * yum_package[lua-devel] action install (up to date)\n    * git[/var/chef/cache/luajit] action sync (up to date)\n    * bash[install_luajit] action run\n      - execute \"bash\"  \"/tmp/chef-script20160223-16690-9llm95\"\n  Recipe: vim::source\n    * yum_package[bzip2] action install (up to date)\n    * yum_package[ctags, gcc, lua-devel, make, ncurses-devel, perl-devel, perl-ExtUtils-CBuilder, perl-ExtUtils-Embed, perl-ExtUtils-ParseXS, python-devel, ruby-devel, tcl-devel] action install\n      - install version 5.8-2.el6 of package ctags\n      - install version 5.10.1-141.el6_7.1 of package perl-devel\n      - install version 0.27-141.el6_7.1 of package perl-ExtUtils-CBuilder\n      - install version 1.28-141.el6_7.1 of package perl-ExtUtils-Embed\n      - install version 2.2003.0-141.el6_7.1 of package perl-ExtUtils-ParseXS\n      - install version 2.6.6-64.el6 of package python-devel\n      - install version 1.8.7.374-4.el6_6 of package ruby-devel\n      - install version 8.5.7-6.el6 of package tcl-devel\n    * remote_file[/var/chef/cache/vim-7.4.tar.bz2] action create\n      - create new file /var/chef/cache/vim-7.4.tar.bz2\n      - update content in file /var/chef/cache/vim-7.4.tar.bz2 from none to d0f5a6\n      (new content is binary, diff output suppressed)\n      - restore selinux security context\n    * bash[install_vim] action run\n      - execute \"bash\"  \"/tmp/chef-script20160223-16690-1hrglcr\"\n\n  Running handlers:\n  Running handlers complete\n  Chef Client finished, 5/26 resources updated in 01 minutes 33 seconds\n\n\n\u30ce\u30fc\u30c9\u306eVim\u3092\u78ba\u8a8d\n\n\nssh dev\u3067\u63a5\u7d9a\u3057\u3066\u3001vim --version\u3067\u78ba\u8a8d\u3059\u308b\u3002\nlua\u306b\u6709\u52b9\u306e\u5834\u5408 +lua\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\n\n\n  % ssh dev\n  $ vim --version\n\n  ... snip ...\n\n  +dialog_con      +lua             +rightleft       +windows\n\n  ... snip ...\n\n\n\u53c2\u8003\n\nhttps://docs.chef.io/\nChef\u5b9f\u8df5\u5165\u9580\n\n\n## \u95a2\u9023\u8a18\u4e8b\n\n* [Chef\u3092\u4f7f\u3063\u3066\u3088\u308a\u52b9\u7387\u7684\u306b\u30b5\u30fc\u30d0\u3092\u7ba1\u7406\u3057\u3088\u3046\u3002\u307e\u305a\u306f\u7528\u8a9e\u304b\u3089](http://qiita.com/park-jh/items/9e2e358d2e82a7736cf7)\n* [Berkshelf\u3092\u4f7f\u3063\u3066\u5916\u90e8\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u30ce\u30fc\u30c9\u306b\u9069\u7528\u3059\u308b\u3002](http://qiita.com/park-jh/items/751464a4cc6d8abcd6fd)\n* [\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u4f5c\u6210\u3057\u3066\u30ce\u30fc\u30c9\u306b\u9069\u7528\u3059\u308b\u3002- \u305d\u306e\uff11](http://qiita.com/park-jh/items/8d641809850b5930d39c)\n* [\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u4f5c\u6210\u3057\u3066\u30ce\u30fc\u30c9\u306b\u9069\u7528\u3059\u308b\u3002- \u305d\u306e\uff12](http://qiita.com/park-jh/items/88237342cfd202e6893f)\n* [Chef\u3067CentOS 6.7 + rbenv + ruby 2.3.0\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3002](http://qiita.com/park-jh/items/f249a18793899f2eb4bf)\n* Chef\u3067CentOS 6.7 + Vim 7.4 + lua\u3092\u8a2d\u7f6e\u3059\u308b\u3002\n* [Chef\u3067Vim\u30d7\u30e9\u30b0\u30a4\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u30fcNeoBundle\u3092\u8a2d\u7f6e\u3059\u308b\u3002](http://qiita.com/park-jh/items/ec09e40f9b4aaf9fedfd)\n* [Chef\u306e\u30ec\u30b7\u30d4\u3092\u30c7\u30d0\u30c3\u30b0\u3057\u3066\u307f\u3088\u3046\u3002](http://qiita.com/park-jh/items/96a076e167327a6a5a39)\n* [Chef\u3067CentOS 6.7 + nginx\u3092\u8a2d\u7f6e\u3059\u308b\u3002- \u5916\u90e8\u30af\u30c3\u30af\u30d6\u30c3\u30af](http://qiita.com/park-jh/items/3013c49494e524fced31)\n* [Chef\u3067CentOS 6.7 + nginx\u3092\u8a2d\u7f6e\u3059\u308b\u3002- \u30ab\u30b9\u30bf\u30e0\u30af\u30c3\u30af\u30d6\u30c3\u30af](http://qiita.com/park-jh/items/43451cea21ee1724c24b)\n* [Chef\u3067CentOS 6.7 + nodejs + npm\u3092\u8a2d\u7f6e\u3059\u308b\u3002](http://qiita.com/park-jh/items/96089e7e1c97b0fe3a6c)\n* [Chef\u3067Vim\u30d7\u30e9\u30b0\u30a4\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u30fcvim-plug\u3092\u8a2d\u7f6e\u3059\u308b\u3002](http://qiita.com/park-jh/items/ba27ad412ce9926fd94d)\n* [ohai\u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046\u3002](http://qiita.com/park-jh/items/34be55abb7c63b36cddb)\n* [Chef Solo\u304b\u3089Chef Zero\u3078](http://qiita.com/park-jh/items/44c249c9de768c53b423)\n* [Chef\u3067nginx + php(php-fpm) + mariadb + wordpress\u3092\u8a2d\u7f6e\u3059\u308b\u3002](http://qiita.com/park-jh/items/7515e47dddc38257a454)\n\n## lua\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* lua\u3092\u6709\u52b9\u306b\u3057\u305fVim\u3092\u8a2d\u7f6e\u3059\u308b\u305f\u3081lua\u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n* lua-devel\u306fyum\u3067\u8a2d\u7f6e\u3059\u308b\u3002\n* luajit\u3092\u8a2d\u7f6e\u3059\u308b\u3068lua\u3092\u3088\u308a\u9ad8\u901f\u3067\u4f7f\u3048\u308b\u3002git\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u53d6\u5f97\u3057\u3066tarball\u3067\u8a2d\u7f6e\u3059\u308b\u3002\n\n### \u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u751f\u6210\n\n```sh\n  % bin/knife cookbook create lua -o site-cookbooks\n```\n\n### \u30ec\u30b7\u30d4\u3092\u4f5c\u6210\n\n* site-cookbooks/lua/recipes/default.rb\n\n```ruby\n  package 'lua-devel' do\n    action :install\n  end\n\n  src_filepath = \"#{Chef::Config['file_cache_path']}/luajit\"\n\n  git \"#{src_filepath}\" do\n    repository node['lua']['luajit_url']\n    user 'root'\n    group 'root'\n  end\n\n  bash 'install_luajit' do\n    cwd ::File.dirname(src_filepath)\n    code <<-EOH\n      cd #{src_filepath}\n      make && make install\n    EOH\n  end\n```\n\n### \u5b9f\u884c\u4e00\u89a7\u306b\u8ffd\u52a0\n\n```sh\n  % bin/knife node run_list add dev 'recipe[lua]' -z\n```\n\n## Vim 7.4\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### \u30af\u30c3\u30af\u30d6\u30c3\u30af\u306e\u751f\u6210 \n\n* Berkshelf\u30d5\u30a1\u30a4\u30eb\u306b\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n```sh\n  % vi Berkshelf\n\n  ... snip ...\n  cookbook 'vim'\n```\n\n* cookbooks\u306e\u914d\u4e0b\u306b\u4fdd\u6301\u3059\u308b\u3002\n\n```sh\n  bin/berks vendor cookbooks\n```\n\n### Attributes\n\n* cookbooks/vim/attributes/default.rb\n  - install_method\u304cpackage\u306e\u5834\u5408\u3001yum\u3067\u8a2d\u7f6e\u3055\u308c\u308b\u3002\n  - install_method\u304csource\u306e\u5834\u5408\u3001\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u8a2d\u7f6e\u3055\u308c\u308b\u3002\n\n```ruby\n  ... snip ...\n  default['vim']['install_method'] = 'package'\n```\n\n* cookbooks/vim/attributes/source.rb\n  - CentOS 6\u4ee5\u4e0a\u3067\u306flua-devel\u306b\u4f9d\u5b58\u3055\u308c\u308b\u3002\n\n```ruby\n  ... snip ...\n\n  default['vim']['source']['configuration'] = \"--without-x --enable-pythoninterp --enable-rubyinterp --enable-tclinterp --enable-luainterp --enable-perlinterp --enable-cscope  --with-features=huge --prefix=#{default['vim']['source']['prefix']}\"\n\n  if platform_family? 'rhel', 'fedora'\n    if node['platform_version'].to_i >= 6\n      default['vim']['source']['dependencies'] = %w( ctags\n                                                     gcc\n                                                     lua-devel\n                                                     make\n                                                     ncurses-devel\n                                                     perl-devel\n                                                     perl-ExtUtils-CBuilder\n                                                     perl-ExtUtils-Embed\n                                                     perl-ExtUtils-ParseXS\n                                                     python-devel\n                                                     ruby-devel\n                                                     tcl-devel\n                                                 )\n\n  ... snip ...\n```\n\n* lua-devel\u3001luajit\u306e\u8a2d\u7f6e\u3057\u305f\u5f8c\u3001Vim\u3092\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u8a2d\u7f6e\u3059\u308b\u3068lua\u3092\u6709\u52b9\u306b\u3057\u305fVim\u304c\u8a2d\u7f6e\u3055\u308c\u308b\u308f\u3051\u3060\u3002\n\n### \u5b9f\u884c\u4e00\u89a7\u306b\u8ffd\u52a0\n\n```sh\n  % bin/knife node run_list add dev 'recipe[vim]' -z\n```\n\n## Environments\u306b\u3064\u3044\u3066\n\n* \u958b\u767a\u3001\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3001\u672c\u756a\u74b0\u5883\u306b\u95a2\u3059\u308bAttribute\u306f\u3053\u3053\u306b\u66f8\u3044\u3066\u304a\u304f\u3002\n\n### Environments\u306e\u30b3\u30de\u30f3\u30c9\n\n* \u30b3\u30de\u30f3\u30c9\u4e00\u89a7\n\n```sh\n  % bin/knife environment\n\n  FATAL: Cannot find subcommand for: 'environment'\n  Available environment subcommands: (for details, knife SUB-COMMAND --help)\n\n  ** ENVIRONMENT COMMANDS **\n  knife environment compare [ENVIRONMENT..] (options)\n  knife environment create ENVIRONMENT (options)\n  knife environment delete ENVIRONMENT (options)\n  knife environment edit ENVIRONMENT (options)\n  knife environment from file FILE [FILE..] (options)\n  knife environment list (options)\n  knife environment show ENVIRONMENT (options)\n```\n\n* \u958b\u767a\u74b0\u5883\u306e\u751f\u6210\n\n```sh\n  % bin/knife environment create development -d \"The development environment.\" -z\n```\n\n* \u958b\u767a\u74b0\u5883\u306e\u7de8\u96c6\n  - node\\['lua'\\]\\['luajit_url'\\]\u3092\u5b9a\u7fa9\n  - Vim\u306e\u30af\u30c3\u30af\u30d6\u30c3\u30af\u306e\u4e2d\u306b\u5b9a\u7fa9\u3055\u308c\u305fnode\\['vim'\\]\\['install_method'\\]\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\n\n```sh\n  % bin/knife environment edit development -z\n\n  {\n    \"name\": \"development\",\n    \"default_attributes\": {\n      \"user\": \"vagrant\",\n      \"group\": \"vagrant\",\n      \"lua\": {\n        \"luajit_url\": \"http://luajit.org/git/luajit-2.0.git\"\n      }\n    },\n    \"override_attributes\": {\n      \"vim\": {\n        \"install_method\": \"source\"\n      }\n    }\n  }\n```\n\n* \u958b\u767a\u74b0\u5883\u306e\u8a73\u7d30\n\n```sh\n  % bin/knife environment show development -z\n\n  chef_type:           environment\n  cookbook_versions:\n  default_attributes:\n    group: vagrant\n    lua:\n      luajit_url: http://luajit.org/git/luajit-2.0.git\n    user:  vagrant\n  description:\n  json_class:          Chef::Environment\n  name:                dev\n  override_attributes:\n    vim:\n      install_method: source\n```\n\n### Attributes\u306e\u512a\u5148\u9806\u4f4d\n\n* \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a73\u7d30\u306b\u66f8\u304b\u308c\u3066\u3044\u305f\u3002\n* https://docs.chef.io/environments.html\n\n### \u30ce\u30fc\u30c9\u306e\u74b0\u5883\u3092\u8a2d\u5b9a\n\n* chef_environment\u3092_default\u304b\u3089development\u3078\u5909\u66f4\u3059\u308b\u3002\n\n```sh\n  % bin/knife node edit dev -z\n```\n\n* \u30ce\u30fc\u30c9\u306e\u74b0\u5883\u3092\u78ba\u8a8d\n\n```sh\n  % bin/knife node show dev -z\n\n  Node Name:   dev\n  Environment: development\n  FQDN:\n  IP:          dev\n  Run List:    recipe[yum-epel], recipe[yum-update], recipe[mariadb], recipe[ruby-env], recipe[lua], recipe[vim]\n  Roles:\n  Recipes:\n  Platform:\n  Tags:\n```\n\n## \u5b9f\u884c\u7d50\u679c\n\n* \u30ce\u30fc\u30c9\u306b\u9069\u7528\n\n```sh\n  % bin/knife solo cook dev\n\n  Running Chef on dev...\n  Checking Chef version...\n  Installing Berkshelf cookbooks to 'cookbooks'...\n  Resolving cookbook dependencies...\n  Using yum-epel (0.6.5)\n  Using vim (2.0.1)\n  Using yum (3.10.0)\n  Vendoring vim (2.0.1) to cookbooks/vim\n  Vendoring yum (3.10.0) to cookbooks/yum\n  Vendoring yum-epel (0.6.5) to cookbooks/yum-epel\n  Uploading the kitchen...\n  Generating solo config...\n  Running Chef: sudo chef-solo -c ~/chef-solo/solo.rb -j ~/chef-solo/dna.json\n  Starting Chef Client, version 12.7.2\n  Compiling Cookbooks...\n  Converging 22 resources\n  Recipe: yum-epel::default\n    * yum_repository[epel] action create\n      * template[/etc/yum.repos.d/epel.repo] action create (up to date)\n      * execute[yum clean metadata epel] action nothing (skipped due to action :nothing)\n      * execute[yum-makecache-epel] action nothing (skipped due to action :nothing)\n      * ruby_block[yum-cache-reload-epel] action nothing (skipped due to action :nothing)\n       (up to date)\n  Recipe: yum-update::default\n    * execute[yum-update] action run\n      - execute yum -y update\n  Recipe: mariadb::default\n    * cookbook_file[/etc/yum.repos.d/MariaDB.repo] action create (up to date)\n    * yum_package[MariaDB-server] action install (up to date)\n    * yum_package[MariaDB-client] action install (up to date)\n    * yum_package[MariaDB-devel] action install (up to date)\n  Recipe: ruby-env::default\n    * yum_package[gcc] action install (up to date)\n    * yum_package[git] action install (up to date)\n    * yum_package[openssl-devel] action install (up to date)\n    * yum_package[readline-devel] action install (up to date)\n    * git[/home/vagrant/.rbenv] action sync (up to date)\n    * template[.bash_profile] action create (skipped due to not_if)\n    * directory[/home/vagrant/.rbenv/plugins] action create (up to date)\n    * git[/home/vagrant/.rbenv/plugins/ruby-build] action sync (up to date)\n    * execute[rbenv install 2.3.0] action run (skipped due to not_if)\n  Recipe: lua::default\n    * yum_package[lua-devel] action install (up to date)\n    * git[/var/chef/cache/luajit] action sync (up to date)\n    * bash[install_luajit] action run\n      - execute \"bash\"  \"/tmp/chef-script20160223-16690-9llm95\"\n  Recipe: vim::source\n    * yum_package[bzip2] action install (up to date)\n    * yum_package[ctags, gcc, lua-devel, make, ncurses-devel, perl-devel, perl-ExtUtils-CBuilder, perl-ExtUtils-Embed, perl-ExtUtils-ParseXS, python-devel, ruby-devel, tcl-devel] action install\n      - install version 5.8-2.el6 of package ctags\n      - install version 5.10.1-141.el6_7.1 of package perl-devel\n      - install version 0.27-141.el6_7.1 of package perl-ExtUtils-CBuilder\n      - install version 1.28-141.el6_7.1 of package perl-ExtUtils-Embed\n      - install version 2.2003.0-141.el6_7.1 of package perl-ExtUtils-ParseXS\n      - install version 2.6.6-64.el6 of package python-devel\n      - install version 1.8.7.374-4.el6_6 of package ruby-devel\n      - install version 8.5.7-6.el6 of package tcl-devel\n    * remote_file[/var/chef/cache/vim-7.4.tar.bz2] action create\n      - create new file /var/chef/cache/vim-7.4.tar.bz2\n      - update content in file /var/chef/cache/vim-7.4.tar.bz2 from none to d0f5a6\n      (new content is binary, diff output suppressed)\n      - restore selinux security context\n    * bash[install_vim] action run\n      - execute \"bash\"  \"/tmp/chef-script20160223-16690-1hrglcr\"\n\n  Running handlers:\n  Running handlers complete\n  Chef Client finished, 5/26 resources updated in 01 minutes 33 seconds\n```\n\n* \u30ce\u30fc\u30c9\u306eVim\u3092\u78ba\u8a8d\n  - ssh dev\u3067\u63a5\u7d9a\u3057\u3066\u3001vim --version\u3067\u78ba\u8a8d\u3059\u308b\u3002\n  - lua\u306b\u6709\u52b9\u306e\u5834\u5408 +lua\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\n```sh\n  % ssh dev\n  $ vim --version\n\n  ... snip ...\n\n  +dialog_con      +lua             +rightleft       +windows\n\n  ... snip ...\n```\n\n## \u53c2\u8003\n\n* https://docs.chef.io/\n* Chef\u5b9f\u8df5\u5165\u9580\n", "tags": ["chef", "Lua", "Vim", "LuaJIT", "CentOS"]}