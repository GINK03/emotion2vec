{"context": " More than 1 year has passed since last update.\n\n\u5f3e\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n\u524d\u56de\u307e\u3067\u3067\u3001bulletml.js\u3092\u4f7f\u3063\u305f\u5f3e\u5e55\u30d1\u30bf\u30fc\u30f3\u306e\u8a18\u8ff0\u306b\u3064\u3044\u3066\u306f\u304a\u5206\u304b\u308a\u9802\u3051\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u5b9f\u969b\u306b\u30b2\u30fc\u30e0\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u5fc5\u8981\u3068\u306a\u308b\u51e6\u7406\u306e\u66f8\u304d\u65b9\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u4eca\u56de\u4f5c\u6210\u3059\u308b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\n\n\u5f53\u305f\u308a\u5224\u5b9a\n\uff33\uff34\uff27\u3092\u4f5c\u308b\u4e0a\u3067\u7d76\u5bfe\u306b\u5fc5\u8981\u306a\u306e\u304c\u5f53\u305f\u308a\u5224\u5b9a\u3067\u3059\u3002\ntmlib.js\u3067\u306f\u30a8\u30ec\u30e1\u30f3\u30c8\u540c\u58eb\u306e\u885d\u7a81\u5224\u5b9a\u3092\u3059\u308b\u305f\u3081\u306b\u4fbf\u5229\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u307e\u305a\u306f\u81ea\u6a5f\u306e\u5f53\u305f\u308a\u5224\u5b9a\u306b\u3064\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u81ea\u6a5f\u30af\u30e9\u30b9\ntm.define(\"Player\", {\n...\n    init: function() {\n...\n        this.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n        this.radius = 2; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n...\n\n\n\u81ea\u6a5f\u306f\u534a\u5f84\uff12\u306e\u5186\u5f62\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u6b21\u306b\u6575\u5f3e\u306e\u5f53\u305f\u308a\u5224\u5b9a\u306b\u3064\u3044\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\ncreateNewBullet\u95a2\u6570\u306e\u4e2d\u3067\u3001\u751f\u6210\u3057\u305f\u5f3e\u306b\u5bfe\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u5f3e\u306e\u5f53\u305f\u308a\u5224\u5b9a\nvar params = {\n...\ncreateNewBullet: function(runner) {\n    var bullet = tm.bulletml.Bullet(runner).addChildTo(this);\n    bullet.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n    bullet.radius = 2; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n    bullet.onenterframe = function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n        if (this.isHitElement(Player.SINGLETON)) { // \u81ea\u6a5f\u3068\u885d\u7a81\u3057\u3066\u3044\u308c\u3070\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n        }\n    });\n...\n};\n\n\n\u5f3e\u3082\u534a\u5f84\uff12\u306e\u5186\u5f62\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001onenterframe\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u3001\u81ea\u6a5f\u3068\u306e\u885d\u7a81\u3092isHitElement\u30e1\u30bd\u30c3\u30c9\u3067\u5224\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u81ea\u6a5f\u306b\u5f53\u305f\u3063\u305f\u5f3e\u306f\u5358\u306b\u30b7\u30fc\u30f3\u304b\u3089\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\n\n\u753b\u9762\u5916\u306b\u51fa\u305f\u5f3e\u3092\u6d88\u3059\n\u5f3e\u3092\u6b21\u3005\u306b\u767a\u5c04\u3057\u3066\u3044\u308b\u3068\u3001\u30b2\u30fc\u30e0\u306f\u6b21\u7b2c\u306b\u9045\u304f\u306a\u3063\u3066\u3044\u304d\u3001\u6700\u5f8c\u306b\u306f\u30d5\u30ea\u30fc\u30ba\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u5f3e\u3092\u6bce\u56de\u751f\u6210\u3057\u3066\u306f\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\u3057\u3001\u305d\u306e\u307e\u307e\u524a\u9664\u305b\u305a\u306b\u653e\u7f6e\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\n\u753b\u9762\u5916\u306b\u51fa\u305f\u5f3e\u306f\u5fd8\u308c\u305a\u306b\u6d88\u3059\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\u3053\u306e\u51e6\u7406\u3082\u3001\u4e0a\u8a18\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3068\u540c\u69d8\u3001\u5f3e\u306eenterframe\u30a4\u30d9\u30f3\u30c8\u5185\u3067\u884c\u3044\u307e\u3059\u3002\n\n\u753b\u9762\u5916\u306b\u51fa\u305f\u5f3e\u3092\u6d88\u3059\nbullet.onenterframe = function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n...\n    if (this.x < 0 || 320 < this.x || this.y < 0 || 320 < this.y) { // \u753b\u9762\u5916\u306b\u51fa\u305f\n        this.remove(); // \u5f3e\u3092\u524a\u9664\n        return;\n    }\n};\n\n\n\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\n\n\u5f3e\u306e\u898b\u305f\u76ee\u3092\u5909\u3048\u308b\nbulletml.js\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u8d64\u3044\u5186\u5f62\u5f3e\u304c\u767a\u5c04\u3055\u308c\u307e\u3059\u304c\u3001\u8272\u3084\u5f62\u3092\u5909\u3048\u3066\u753b\u9762\u3092\u6d3e\u624b\u306b\u3057\u305f\u3044\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u3046\u3044\u3046\u5834\u5408\u306f\u3001BulletML\u5185\u306b\u5f3e\u306e\u5c5e\u6027\u5024\u3092\u8a18\u8ff0\u3057\u3001JavaScript\u5074\u3067\u5c5e\u6027\u306b\u5fdc\u3058\u305f\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u3067\u5bfe\u5fdc\u3057\u307e\u3059\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\u307e\u305a\u306f\u3001createNewBullet\u95a2\u6570\u306e\u4e2d\u3067\u751f\u6210\u3057\u3066\u3044\u308btm.bulletml.Bullet\u3092\u72ec\u7acb\u3057\u305f\u30af\u30e9\u30b9\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u4f5c\u308b\ncreateNewBullet: function(runner) {\n    MyBullet(runner).addChildTo(this);\n}.bind(this)\n\n...\n\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner) {\n        this.superInit(runner);\n\n        this.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n        this.radius = 2; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n    },\n\n    onenterframe: function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n        if (this.isHitElement(Player.SINGLETON)) { // \u81ea\u6a5f\u3068\u885d\u7a81\u3057\u3066\u3044\u308c\u3070\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n            return;\n        }\n\n        if (this.x < 0 || 320 < this.x || this.y < 0 || 320 < this.y) { // \u753b\u9762\u5916\u306b\u51fa\u305f\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n            return;\n        }\n    }\n});\n\n\ntm.bulletml.Bullet\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u3001\u65b0\u3057\u304fMyBullet\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u5f53\u305f\u308a\u5224\u5b9a\u51e6\u7406\u3084\u753b\u9762\u5916\u5224\u5b9a\u51e6\u7406\u3082\u65b0\u3057\u3044\u30af\u30e9\u30b9\u3078\u79fb\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5f3e\u306e\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u8aad\u307f\u8fbc\u3080\n\u6b21\u306b\u5f3e\u306e\u898b\u305f\u76ee\u3092\u30ea\u30c3\u30c1\u306b\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u753b\u50cf\u3092\u7528\u610f\u3057\u3001\u3053\u308c\u3092tm.ui.LoadingScene\u3092\u4f7f\u3063\u3066\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n\ntm.ui.LoadingScene\u3067\u753b\u50cf\u3092\u30ed\u30fc\u30c9\napp.replaceScene(tm.ui.LoadingScene({\n    width: 320,\n    height: 320,\n    assets: {\n        \"bullet\": \"tex0.png\",\n    },\n    nextScene: MainScene\n}));\n\n\n\n\u5f3e\u306b\u5c5e\u6027\u5024\u3092\u8a18\u8ff0\u3059\u308b\n\u3055\u3066\u3001\u4eca\u56de\u306f\u653b\u6483\u30d1\u30bf\u30fc\u30f3\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u653b\u6483\u30d1\u30bf\u30fc\u30f3\nvar DANMAKU0 = new bulletml.Root({\n    top: action([\n        repeat(999, [\n            fire(speed(2.1), bullet({ color: \"red\" })),\n            wait(\"$rand * 20\"),\n            fire(direction(180, \"absolute\"), speed(2.1), bullet({ color: \"blue\" })),\n            wait(\"$rand * 20\"),\n        ]),\n    ]),\n});\n\n\n\u81ea\u6a5f\u72d9\u3044\u5f3e\u3068\u56fa\u5b9a\u5f3e\u3092\u4ea4\u4e92\u306b\u6483\u3064\u3001\u5358\u7d14\u306a\u653b\u6483\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u306d\u3002\n\u3057\u304b\u3057\u3001\u4eca\u307e\u3067\u3068\u9055\u3046\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\nbullet\u95a2\u6570\u306e\u5f15\u6570\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nbullet({ color: \"red\" })\nbullet({ color: \"blue\" })\n\nbulletml.js DSL\u3067\u306f\u3001\u5f3e\u306b\u5bfe\u3057\u3066\u5c5e\u6027\u5024\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001color\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u3001\u81ea\u6a5f\u72d9\u3044\u5f3e\u306b\u306f\"red\"\u3001\u56fa\u5b9a\u5f3e\u306b\u306f\"blue\"\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u307e\u3067createNewBullet\u95a2\u6570\u3067\u306f\u7b2c\uff11\u5f15\u6570runner\u306e\u307f\u3092\u53d7\u3051\u53d6\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001BulletML\u3067\u8a18\u8ff0\u3057\u305f\u5c5e\u6027\u5024\u306f\u7b2c\uff12\u5f15\u6570\u3067\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u5c5e\u6027\u5024\u3092\u53d7\u3051\u53d6\u308b\ncreateNewBullet: function(runner, attr) { // <-- \u7b2c\uff12\u5f15\u6570attr\u3092\u8ffd\u52a0\n    MyBullet(runner, attr).addChildTo(this); // <-- attr\u3092MyBullet\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3059\n}.bind(this)\n\n...\n\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner, attr) { // <-- attr\u3092\u53d7\u3051\u53d6\u308b\n...\n\n\n\n\u5c5e\u6027\u5024\u306b\u5fdc\u3058\u3066\u5f3e\u306e\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\n\u53d7\u3051\u53d6\u3063\u305fattr\u306b\u306fbullet\u95a2\u6570\u306e\u4e2d\u3067\u5b9a\u7fa9\u3057\u305f\u5c5e\u6027\u5024\u304c\u305d\u306e\u307e\u307e\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3092\u53c2\u7167\u3057\u3001\u5f3e\u306e\u632f\u308b\u821e\u3044\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\u5c5e\u6027\u5024\u306b\u5fdc\u3058\u3066\u5f3e\u306e\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner, attr) {\n        this.superInit(runner);\n\n        this.color = attr.color;\n\n        this.removeChildren(); // \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d64\u5f3e\u3092\u524a\u9664(1)\n\n        // color\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5fdc\u3058\u3066\u521d\u671f\u5316\u51e6\u7406(2)\n        switch (attr.color) {\n        case \"blue\":\n            tm.display.Sprite(\"bullet\", 20, 20)\n                .setFrameIndex(0)\n                .addChildTo(this);\n            break;\n        case \"red\":\n            tm.display.Sprite(\"bullet\", 20, 20)\n                .setFrameIndex(1)\n                .setScale(1.5, 0.5)\n                .addChildTo(this);\n            break;\n        }\n\n        this.beforeX = this.x;\n        this.beforeY = this.y;\n...\n    },\n\n    onenterframe: function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406 (3)\n...\n        if (this.color === \"blue\") {\n            this.rotation += 10;\n        } else if (this.color === \"red\") {\n            this.rotation = Math.atan2(this.y - this.beforeY, this.x - this.beforeX) * Math.RAD_TO_DEG;\n        }\n\n        this.beforeX = this.x;\n        this.beforeY = this.y;\n    },\n...\n\n\n\u307e\u305a\u3001tm.bulletml.Bullet\u306b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d64\u3044\u5186\u5f62\u5f3e\u306e\u30b9\u30d7\u30e9\u30a4\u30c8\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001removeChildren\u30e1\u30bd\u30c3\u30c9\u3067\u5b50\u8981\u7d20\u3092\u524a\u9664\u3057\u307e\u3059\u3002(1)\n\u6b21\u306b\u3001attr.color\u306e\u5185\u5bb9\u306b\u5fdc\u3058\u3066\u30b9\u30d7\u30e9\u30a4\u30c8\u3092\u751f\u6210\u3057\u3001\u5b50\u8981\u7d20\u3068\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002(2)\nonenterframe\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u3001\u9752\u5f3e\u306e\u5834\u5408\u306f\u6bce\u30d5\u30ec\u30fc\u30e010\u5ea6\u305a\u3064\u56de\u8ee2\u3059\u308b\u3088\u3046\u306b\u3001\u8d64\u5f3e\u306e\u5834\u5408\u306f\u76f4\u524d\u306e\u30d5\u30ec\u30fc\u30e0\u304b\u3089\u306e\u79fb\u52d5\u65b9\u5411\u306b\u3088\u308a\u5f3e\u306e\u59ff\u52e2\u304c\u5909\u308f\u308b\u3088\u3046\u306b\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002(3)\n\u3053\u306e\u3088\u3046\u306b\u3001BulletML\u5185\u3067\u5b9a\u7fa9\u3057\u305f\u5c5e\u6027\u5024\u306b\u3088\u3063\u3066\u5f3e\u306e\u898b\u305f\u76ee\u3084\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\u3053\u3068\u3067\u3001\u30ab\u30e9\u30d5\u30eb\u3067\u500b\u6027\u8c4a\u304b\u306a\u5f3e\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\n\n\u5fdc\u7528\u4f8b\uff1a\u5927\u578b\u6226\u95d8\u6a5f\u300c\u885b\u6383\u300d\u3063\u307d\u3044\u5f3e\u5e55\n\u300c\u6012\u9996\u9818\u8702\u6700\u5927\u5f80\u751f\u300d\uff15\u9762\u306b\u767b\u5834\u3059\u308b\u5927\u578b\u6a5f\u300c\u885b\u6383\u300d\u306e\u5f3e\u5e55\u3092BulletML\u3067\u518d\u73fe\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nhttp://youtu.be/cujHIkGRT7U?t=19m40s\n\n\u885b\u6383\u306e\u5f3e\u5e55\u306f\u5358\u306a\u308b\u5168\u65b9\u4f4d\u5f3e\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u3088\u304f\u767a\u5c04\u4f4d\u7f6e\u3092\u898b\u308b\u3068\u3001\u306a\u3093\u3060\u304b\u56de\u8ee2\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u932f\u899a\u3092\u53d7\u3051\u307e\u3059\u3002\n\u56f3\u89e3\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u3053\u308c\u3092BulletML\u3067\u518d\u73fe\u3059\u308b\u306b\u306f\u3059\u3053\u3057\u5de5\u592b\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u7832\u53e3\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u5186\u5468\u4e0a\u306b\u767a\u5c04\u70b9\u304c\u4e26\u3093\u3067\u3044\u308b\n\u305d\u308c\u305e\u308c\u306e\u767a\u5c04\u70b9\u304b\u3089\u306f\u3001\u7832\u53e3\u304b\u3089\u306e\u76f4\u7dda\u3068\u5782\u76f4\u306a\u65b9\u5411\u3078\u5f3e\u3092\u767a\u5c04\u3059\u308b\n\n\nDSL\u306f\u3053\u306e\u3088\u3046\u306a\u4ed5\u69d8\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u7832\u53e3\u304b\u3089\u5168\u65b9\u4f4d\u5f3e\u3092\u767a\u5c04\u3002\u305f\u3060\u3057\u3001\u6483\u3064\u5f3e\u306f\u900f\u660e\u3067\u5f53\u305f\u308a\u5224\u5b9a\u3082\u5b58\u5728\u3057\u306a\u3044\n\n\u767a\u5c04\u3055\u308c\u305f\u900f\u660e\u5f3e\u306f\u4e00\u5b9a\u6642\u9593\u5f8c\u3001\u9032\u884c\u65b9\u5411\u306b\u5bfe\u3057\u306690\u5ea6\u306e\u65b9\u5411\u306b\u5f3e\u3092\u767a\u5c04\u3057\u3066\u6d88\u3048\u308b\n\n\u5b9f\u969b\u306b\u66f8\u304f\u3068\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\u653b\u6483\u30d1\u30bf\u30fc\u30f3\nvar DANMAKU0 = new bulletml.Root({\n    top: action([\n        repeat(999, [\n            fire(direction(\"$loop.index * 5\", \"absolute\"), speed(10), bullet(actionRef(\"inv\"), { color: \"invisible\" })),\n            repeat(16, [\n                fire(direction(360 / 16, \"sequence\"), speed(0, \"sequence\"), bullet(actionRef(\"inv\"), { color: \"invisible\" })),\n            ]),\n            wait(25),\n        ]),\n    ]),\n\n    inv: action([\n        wait(1),\n        fire(direction(90, \"relative\"), speed(1.2), bullet({ color: \"red\" })),\n        vanish(),\n    ]),\n});\n\n\n\n\u5f3e\u30af\u30e9\u30b9\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner, attr) {\n        this.superInit(runner);\n\n        this.color = attr.color;\n\n        this.removeChildren(); // \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d64\u5f3e\u3092\u524a\u9664\n\n        // color\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5fdc\u3058\u3066\u521d\u671f\u5316\u51e6\u7406\n        switch (attr.color) {\n        case \"invisible\":\n            // \u306a\u306b\u3082\u3057\u306a\u3044\n            break;\n        case \"red\":\n            tm.display.Sprite(\"bullet\", 20, 20)\n                .setFrameIndex(1)\n                .addChildTo(this);\n            break;\n        }\n\n        this.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n        this.radius = 7; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n    },\n\n    onenterframe: function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n\n        if (this.color !== \"invisible\") { // \u898b\u3048\u306a\u3044\u5f3e\u306f\u81ea\u6a5f\u3068\u885d\u7a81\u3057\u306a\u3044\n\n            if (this.isHitElement(Player.SINGLETON)) { // \u81ea\u6a5f\u3068\u885d\u7a81\u3057\u3066\u3044\u308c\u3070\n                this.remove(); // \u5f3e\u3092\u524a\u9664\n                return;\n            }\n\n        }\n\n        if (this.x < 0 || 320 < this.x || this.y < 0 || 320 < this.y) { // \u753b\u9762\u5916\u306b\u51fa\u305f\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n            return;\n        }\n\n        this.rotation += 10;\n    }\n});\n\n\n\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\n\n\u307e\u3068\u3081\n\u4eca\u56de\u306f\u6700\u4f4e\u9650\uff33\uff34\uff27\u3092\u4f5c\u308b\u4e0a\u3067\u5fc5\u8981\u306b\u306a\u308b\u51e6\u7406\u306e\u66f8\u304d\u65b9\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\n\u6b21\u56de\u306f\u3082\u3046\u4e00\u6b69\u8e0f\u307f\u8fbc\u3093\u3060\u5185\u5bb9\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\n\nJSSTG \u590f\u306eJavaScript\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u796d\u308a \u958b\u50ac\u4e2d\uff01\n\u7a81\u7136\u3067\u3059\u304c\u3001\u5ba3\u4f1d\u3067\u3059\u3002\nJSSTG \u590f\u306eJavaScript\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u796d\u308a \u958b\u50ac\u4e2d\u3067\u3059\uff01\n\u5fdc\u52df\u8981\u9805\u306f\u81f3\u3063\u3066\u5358\u7d14\u3002\u300cJavaScript\u88fd\u306e\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u3067\u3042\u308c\u3070\u306a\u3093\u3067\u3082OK\uff01\u300d\u3067\u3059\u3002\n\u7de0\u3081\u5207\u308a\u306f2014\u5e748\u670831\u65e5\u3092\u4e88\u5b9a\u3002\n\u5fdc\u52df\u65b9\u6cd5\u306a\u3069\u306f\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u3054\u89a7\u306b\u306a\u308b\u304b\u3001Twitter\u306b\u3066\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u300c#jsstg\u300d\u3092\u3064\u3051\u3066\u8cea\u554f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u672c\u30b7\u30ea\u30fc\u30ba\u3092\u8aad\u3093\u3067tmlib.js\uff06bulletml.js\u88fd\u306e\u5f3e\u5e55\uff33\uff34\uff27\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u65b9\u3001\u305c\u3072\u3054\u5fdc\u52df\u3092\uff01\n\u71b1\u3044\uff33\uff34\uff27 \u5f85\u3063\u3066\u307e\u3059\uff01\uff01\uff01\n# \u5f3e\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n\n\u524d\u56de\u307e\u3067\u3067\u3001bulletml.js\u3092\u4f7f\u3063\u305f\u5f3e\u5e55\u30d1\u30bf\u30fc\u30f3\u306e\u8a18\u8ff0\u306b\u3064\u3044\u3066\u306f\u304a\u5206\u304b\u308a\u9802\u3051\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u5b9f\u969b\u306b\u30b2\u30fc\u30e0\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u5fc5\u8981\u3068\u306a\u308b\u51e6\u7406\u306e\u66f8\u304d\u65b9\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n[\u4eca\u56de\u4f5c\u6210\u3059\u308b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089](https://github.com/daishihmr/bulletml.js-tutorial/archive/part4.zip)\n\n# \u5f53\u305f\u308a\u5224\u5b9a\n\n\uff33\uff34\uff27\u3092\u4f5c\u308b\u4e0a\u3067\u7d76\u5bfe\u306b\u5fc5\u8981\u306a\u306e\u304c\u5f53\u305f\u308a\u5224\u5b9a\u3067\u3059\u3002\ntmlib.js\u3067\u306f\u30a8\u30ec\u30e1\u30f3\u30c8\u540c\u58eb\u306e\u885d\u7a81\u5224\u5b9a\u3092\u3059\u308b\u305f\u3081\u306b\u4fbf\u5229\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u81ea\u6a5f\u306e\u5f53\u305f\u308a\u5224\u5b9a\u306b\u3064\u3044\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n~~~js:\u81ea\u6a5f\u30af\u30e9\u30b9\ntm.define(\"Player\", {\n...\n    init: function() {\n...\n        this.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n        this.radius = 2; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n...\n~~~\n\n\u81ea\u6a5f\u306f\u534a\u5f84\uff12\u306e\u5186\u5f62\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u6b21\u306b\u6575\u5f3e\u306e\u5f53\u305f\u308a\u5224\u5b9a\u306b\u3064\u3044\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\ncreateNewBullet\u95a2\u6570\u306e\u4e2d\u3067\u3001\u751f\u6210\u3057\u305f\u5f3e\u306b\u5bfe\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n~~~js:\u5f3e\u306e\u5f53\u305f\u308a\u5224\u5b9a\nvar params = {\n...\ncreateNewBullet: function(runner) {\n    var bullet = tm.bulletml.Bullet(runner).addChildTo(this);\n    bullet.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n    bullet.radius = 2; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n    bullet.onenterframe = function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n        if (this.isHitElement(Player.SINGLETON)) { // \u81ea\u6a5f\u3068\u885d\u7a81\u3057\u3066\u3044\u308c\u3070\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n        }\n    });\n...\n};\n~~~\n\n\u5f3e\u3082\u534a\u5f84\uff12\u306e\u5186\u5f62\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001onenterframe\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u3001\u81ea\u6a5f\u3068\u306e\u885d\u7a81\u3092**isHitElement**\u30e1\u30bd\u30c3\u30c9\u3067\u5224\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u81ea\u6a5f\u306b\u5f53\u305f\u3063\u305f\u5f3e\u306f\u5358\u306b\u30b7\u30fc\u30f3\u304b\u3089\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\n[\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c](http://daishihmr.github.io/bulletml.js-tutorial/part4-collision.html)\n\n# \u753b\u9762\u5916\u306b\u51fa\u305f\u5f3e\u3092\u6d88\u3059\n\n\u5f3e\u3092\u6b21\u3005\u306b\u767a\u5c04\u3057\u3066\u3044\u308b\u3068\u3001\u30b2\u30fc\u30e0\u306f\u6b21\u7b2c\u306b\u9045\u304f\u306a\u3063\u3066\u3044\u304d\u3001\u6700\u5f8c\u306b\u306f\u30d5\u30ea\u30fc\u30ba\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u5f3e\u3092\u6bce\u56de\u751f\u6210\u3057\u3066\u306f\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\u3057\u3001\u305d\u306e\u307e\u307e\u524a\u9664\u305b\u305a\u306b\u653e\u7f6e\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\n\n\u753b\u9762\u5916\u306b\u51fa\u305f\u5f3e\u306f\u5fd8\u308c\u305a\u306b\u6d88\u3059\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u3053\u306e\u51e6\u7406\u3082\u3001\u4e0a\u8a18\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3068\u540c\u69d8\u3001\u5f3e\u306eenterframe\u30a4\u30d9\u30f3\u30c8\u5185\u3067\u884c\u3044\u307e\u3059\u3002\n\n~~~js:\u753b\u9762\u5916\u306b\u51fa\u305f\u5f3e\u3092\u6d88\u3059\nbullet.onenterframe = function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n...\n    if (this.x < 0 || 320 < this.x || this.y < 0 || 320 < this.y) { // \u753b\u9762\u5916\u306b\u51fa\u305f\n        this.remove(); // \u5f3e\u3092\u524a\u9664\n        return;\n    }\n};\n~~~\n\n[\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c](http://daishihmr.github.io/bulletml.js-tutorial/part4-out-of-screen.html)\n\n# \u5f3e\u306e\u898b\u305f\u76ee\u3092\u5909\u3048\u308b\n\nbulletml.js\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u8d64\u3044\u5186\u5f62\u5f3e\u304c\u767a\u5c04\u3055\u308c\u307e\u3059\u304c\u3001\u8272\u3084\u5f62\u3092\u5909\u3048\u3066\u753b\u9762\u3092\u6d3e\u624b\u306b\u3057\u305f\u3044\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u3046\u3044\u3046\u5834\u5408\u306f\u3001BulletML\u5185\u306b\u5f3e\u306e\u5c5e\u6027\u5024\u3092\u8a18\u8ff0\u3057\u3001JavaScript\u5074\u3067\u5c5e\u6027\u306b\u5fdc\u3058\u305f\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u3067\u5bfe\u5fdc\u3057\u307e\u3059\u3002\n\n## \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\n\u307e\u305a\u306f\u3001createNewBullet\u95a2\u6570\u306e\u4e2d\u3067\u751f\u6210\u3057\u3066\u3044\u308b**tm.bulletml.Bullet**\u3092\u72ec\u7acb\u3057\u305f\u30af\u30e9\u30b9\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n~~~js:\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u5f3e\u30af\u30e9\u30b9\u3092\u4f5c\u308b\ncreateNewBullet: function(runner) {\n    MyBullet(runner).addChildTo(this);\n}.bind(this)\n\n...\n\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner) {\n        this.superInit(runner);\n\n        this.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n        this.radius = 2; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n    },\n\n    onenterframe: function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n        if (this.isHitElement(Player.SINGLETON)) { // \u81ea\u6a5f\u3068\u885d\u7a81\u3057\u3066\u3044\u308c\u3070\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n            return;\n        }\n\n        if (this.x < 0 || 320 < this.x || this.y < 0 || 320 < this.y) { // \u753b\u9762\u5916\u306b\u51fa\u305f\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n            return;\n        }\n    }\n});\n~~~\n\n**tm.bulletml.Bullet**\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u3001\u65b0\u3057\u304f**MyBullet**\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u5f53\u305f\u308a\u5224\u5b9a\u51e6\u7406\u3084\u753b\u9762\u5916\u5224\u5b9a\u51e6\u7406\u3082\u65b0\u3057\u3044\u30af\u30e9\u30b9\u3078\u79fb\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u5f3e\u306e\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u8aad\u307f\u8fbc\u3080\n\n\u6b21\u306b\u5f3e\u306e\u898b\u305f\u76ee\u3092\u30ea\u30c3\u30c1\u306b\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u753b\u50cf\u3092\u7528\u610f\u3057\u3001\u3053\u308c\u3092**tm.ui.LoadingScene**\u3092\u4f7f\u3063\u3066\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n![tex0.png](https://qiita-image-store.s3.amazonaws.com/0/30568/f393c1c6-9053-cba2-ecec-e0ffb986206f.png)\n\n~~~js:tm.ui.LoadingScene\u3067\u753b\u50cf\u3092\u30ed\u30fc\u30c9\napp.replaceScene(tm.ui.LoadingScene({\n    width: 320,\n    height: 320,\n    assets: {\n        \"bullet\": \"tex0.png\",\n    },\n    nextScene: MainScene\n}));\n~~~\n\n## \u5f3e\u306b\u5c5e\u6027\u5024\u3092\u8a18\u8ff0\u3059\u308b\n\n\u3055\u3066\u3001\u4eca\u56de\u306f\u653b\u6483\u30d1\u30bf\u30fc\u30f3\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n~~~js:\u653b\u6483\u30d1\u30bf\u30fc\u30f3\nvar DANMAKU0 = new bulletml.Root({\n    top: action([\n        repeat(999, [\n            fire(speed(2.1), bullet({ color: \"red\" })),\n            wait(\"$rand * 20\"),\n            fire(direction(180, \"absolute\"), speed(2.1), bullet({ color: \"blue\" })),\n            wait(\"$rand * 20\"),\n        ]),\n    ]),\n});\n~~~\n\n\u81ea\u6a5f\u72d9\u3044\u5f3e\u3068\u56fa\u5b9a\u5f3e\u3092\u4ea4\u4e92\u306b\u6483\u3064\u3001\u5358\u7d14\u306a\u653b\u6483\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u306d\u3002\n\u3057\u304b\u3057\u3001\u4eca\u307e\u3067\u3068\u9055\u3046\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\n**bullet**\u95a2\u6570\u306e\u5f15\u6570\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n~~~js\nbullet({ color: \"red\" })\nbullet({ color: \"blue\" })\n~~~\n\nbulletml.js DSL\u3067\u306f\u3001\u5f3e\u306b\u5bfe\u3057\u3066\u5c5e\u6027\u5024\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001color\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u3001\u81ea\u6a5f\u72d9\u3044\u5f3e\u306b\u306f\"red\"\u3001\u56fa\u5b9a\u5f3e\u306b\u306f\"blue\"\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u307e\u3067**createNewBullet**\u95a2\u6570\u3067\u306f\u7b2c\uff11\u5f15\u6570**runner**\u306e\u307f\u3092\u53d7\u3051\u53d6\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001BulletML\u3067\u8a18\u8ff0\u3057\u305f\u5c5e\u6027\u5024\u306f\u7b2c\uff12\u5f15\u6570\u3067\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n~~~js:\u5c5e\u6027\u5024\u3092\u53d7\u3051\u53d6\u308b\ncreateNewBullet: function(runner, attr) { // <-- \u7b2c\uff12\u5f15\u6570attr\u3092\u8ffd\u52a0\n    MyBullet(runner, attr).addChildTo(this); // <-- attr\u3092MyBullet\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3059\n}.bind(this)\n\n...\n\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner, attr) { // <-- attr\u3092\u53d7\u3051\u53d6\u308b\n...\n~~~\n\n## \u5c5e\u6027\u5024\u306b\u5fdc\u3058\u3066\u5f3e\u306e\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\n\n\u53d7\u3051\u53d6\u3063\u305fattr\u306b\u306f**bullet**\u95a2\u6570\u306e\u4e2d\u3067\u5b9a\u7fa9\u3057\u305f\u5c5e\u6027\u5024\u304c\u305d\u306e\u307e\u307e\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3092\u53c2\u7167\u3057\u3001\u5f3e\u306e\u632f\u308b\u821e\u3044\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n~~~js:\u5c5e\u6027\u5024\u306b\u5fdc\u3058\u3066\u5f3e\u306e\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner, attr) {\n        this.superInit(runner);\n\n        this.color = attr.color;\n\n        this.removeChildren(); // \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d64\u5f3e\u3092\u524a\u9664(1)\n\n        // color\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5fdc\u3058\u3066\u521d\u671f\u5316\u51e6\u7406(2)\n        switch (attr.color) {\n        case \"blue\":\n            tm.display.Sprite(\"bullet\", 20, 20)\n                .setFrameIndex(0)\n                .addChildTo(this);\n            break;\n        case \"red\":\n            tm.display.Sprite(\"bullet\", 20, 20)\n                .setFrameIndex(1)\n                .setScale(1.5, 0.5)\n                .addChildTo(this);\n            break;\n        }\n\n        this.beforeX = this.x;\n        this.beforeY = this.y;\n...\n    },\n\n    onenterframe: function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406 (3)\n...\n        if (this.color === \"blue\") {\n            this.rotation += 10;\n        } else if (this.color === \"red\") {\n            this.rotation = Math.atan2(this.y - this.beforeY, this.x - this.beforeX) * Math.RAD_TO_DEG;\n        }\n\n        this.beforeX = this.x;\n        this.beforeY = this.y;\n    },\n...\n~~~\n\n\u307e\u305a\u3001**tm.bulletml.Bullet**\u306b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d64\u3044\u5186\u5f62\u5f3e\u306e\u30b9\u30d7\u30e9\u30a4\u30c8\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001removeChildren\u30e1\u30bd\u30c3\u30c9\u3067\u5b50\u8981\u7d20\u3092\u524a\u9664\u3057\u307e\u3059\u3002(1)\n\u6b21\u306b\u3001attr.color\u306e\u5185\u5bb9\u306b\u5fdc\u3058\u3066\u30b9\u30d7\u30e9\u30a4\u30c8\u3092\u751f\u6210\u3057\u3001\u5b50\u8981\u7d20\u3068\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002(2)\nonenterframe\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u3001\u9752\u5f3e\u306e\u5834\u5408\u306f\u6bce\u30d5\u30ec\u30fc\u30e010\u5ea6\u305a\u3064\u56de\u8ee2\u3059\u308b\u3088\u3046\u306b\u3001\u8d64\u5f3e\u306e\u5834\u5408\u306f\u76f4\u524d\u306e\u30d5\u30ec\u30fc\u30e0\u304b\u3089\u306e\u79fb\u52d5\u65b9\u5411\u306b\u3088\u308a\u5f3e\u306e\u59ff\u52e2\u304c\u5909\u308f\u308b\u3088\u3046\u306b\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002(3)\n\n\u3053\u306e\u3088\u3046\u306b\u3001BulletML\u5185\u3067\u5b9a\u7fa9\u3057\u305f\u5c5e\u6027\u5024\u306b\u3088\u3063\u3066\u5f3e\u306e\u898b\u305f\u76ee\u3084\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\u3053\u3068\u3067\u3001\u30ab\u30e9\u30d5\u30eb\u3067\u500b\u6027\u8c4a\u304b\u306a\u5f3e\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n[\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c](http://daishihmr.github.io/bulletml.js-tutorial/part4-bullet-view.html)\n\n# \u5fdc\u7528\u4f8b\uff1a\u5927\u578b\u6226\u95d8\u6a5f\u300c\u885b\u6383\u300d\u3063\u307d\u3044\u5f3e\u5e55\n\n\u300c\u6012\u9996\u9818\u8702\u6700\u5927\u5f80\u751f\u300d\uff15\u9762\u306b\u767b\u5834\u3059\u308b\u5927\u578b\u6a5f\u300c\u885b\u6383\u300d\u306e\u5f3e\u5e55\u3092BulletML\u3067\u518d\u73fe\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nhttp://youtu.be/cujHIkGRT7U?t=19m40s\n![eiso.png](https://qiita-image-store.s3.amazonaws.com/0/30568/cdf9d944-6cbb-97ae-1cd1-123db6cedd00.png)\n\n\u885b\u6383\u306e\u5f3e\u5e55\u306f\u5358\u306a\u308b\u5168\u65b9\u4f4d\u5f3e\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u3088\u304f\u767a\u5c04\u4f4d\u7f6e\u3092\u898b\u308b\u3068\u3001\u306a\u3093\u3060\u304b\u56de\u8ee2\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u932f\u899a\u3092\u53d7\u3051\u307e\u3059\u3002\n\u56f3\u89e3\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u3053\u308c\u3092BulletML\u3067\u518d\u73fe\u3059\u308b\u306b\u306f\u3059\u3053\u3057\u5de5\u592b\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n * **\u7832\u53e3\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u5186\u5468\u4e0a\u306b\u767a\u5c04\u70b9\u304c\u4e26\u3093\u3067\u3044\u308b**\n * **\u305d\u308c\u305e\u308c\u306e\u767a\u5c04\u70b9\u304b\u3089\u306f\u3001\u7832\u53e3\u304b\u3089\u306e\u76f4\u7dda\u3068\u5782\u76f4\u306a\u65b9\u5411\u3078\u5f3e\u3092\u767a\u5c04\u3059\u308b**\n\n![eiso2.png](https://qiita-image-store.s3.amazonaws.com/0/30568/700c7921-f7eb-9d69-b851-304eda95e6bd.png)\n\nDSL\u306f\u3053\u306e\u3088\u3046\u306a\u4ed5\u69d8\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n 1. \u7832\u53e3\u304b\u3089\u5168\u65b9\u4f4d\u5f3e\u3092\u767a\u5c04\u3002\u305f\u3060\u3057\u3001**\u6483\u3064\u5f3e\u306f\u900f\u660e\u3067\u5f53\u305f\u308a\u5224\u5b9a\u3082\u5b58\u5728\u3057\u306a\u3044**\n 1. \u767a\u5c04\u3055\u308c\u305f\u900f\u660e\u5f3e\u306f\u4e00\u5b9a\u6642\u9593\u5f8c\u3001\u9032\u884c\u65b9\u5411\u306b\u5bfe\u3057\u306690\u5ea6\u306e\u65b9\u5411\u306b\u5f3e\u3092\u767a\u5c04\u3057\u3066\u6d88\u3048\u308b\n\n\u5b9f\u969b\u306b\u66f8\u304f\u3068\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n~~~js:\u653b\u6483\u30d1\u30bf\u30fc\u30f3\nvar DANMAKU0 = new bulletml.Root({\n    top: action([\n        repeat(999, [\n            fire(direction(\"$loop.index * 5\", \"absolute\"), speed(10), bullet(actionRef(\"inv\"), { color: \"invisible\" })),\n            repeat(16, [\n                fire(direction(360 / 16, \"sequence\"), speed(0, \"sequence\"), bullet(actionRef(\"inv\"), { color: \"invisible\" })),\n            ]),\n            wait(25),\n        ]),\n    ]),\n\n    inv: action([\n        wait(1),\n        fire(direction(90, \"relative\"), speed(1.2), bullet({ color: \"red\" })),\n        vanish(),\n    ]),\n});\n~~~\n\n~~~js:\u5f3e\u30af\u30e9\u30b9\ntm.define(\"MyBullet\", {\n    superClass: \"tm.bulletml.Bullet\",\n\n    init: function(runner, attr) {\n        this.superInit(runner);\n\n        this.color = attr.color;\n\n        this.removeChildren(); // \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d64\u5f3e\u3092\u524a\u9664\n\n        // color\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5fdc\u3058\u3066\u521d\u671f\u5316\u51e6\u7406\n        switch (attr.color) {\n        case \"invisible\":\n            // \u306a\u306b\u3082\u3057\u306a\u3044\n            break;\n        case \"red\":\n            tm.display.Sprite(\"bullet\", 20, 20)\n                .setFrameIndex(1)\n                .addChildTo(this);\n            break;\n        }\n\n        this.boundingType = \"circle\"; // <-- \u5186\u5f62\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u6301\u3064\n        this.radius = 7; // <-- \u305d\u3057\u3066\u305d\u306e\u534a\u5f84\u306f2\n    },\n\n    onenterframe: function() { // \u6bce\u30d5\u30ec\u30fc\u30e0\u306e\u51e6\u7406\n\n        if (this.color !== \"invisible\") { // \u898b\u3048\u306a\u3044\u5f3e\u306f\u81ea\u6a5f\u3068\u885d\u7a81\u3057\u306a\u3044\n\n            if (this.isHitElement(Player.SINGLETON)) { // \u81ea\u6a5f\u3068\u885d\u7a81\u3057\u3066\u3044\u308c\u3070\n                this.remove(); // \u5f3e\u3092\u524a\u9664\n                return;\n            }\n\n        }\n\n        if (this.x < 0 || 320 < this.x || this.y < 0 || 320 < this.y) { // \u753b\u9762\u5916\u306b\u51fa\u305f\n            this.remove(); // \u5f3e\u3092\u524a\u9664\n            return;\n        }\n\n        this.rotation += 10;\n    }\n});\n~~~\n\n[\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c](http://daishihmr.github.io/bulletml.js-tutorial/part4-eisou.html)\n\n# \u307e\u3068\u3081\n\n\u4eca\u56de\u306f\u6700\u4f4e\u9650\uff33\uff34\uff27\u3092\u4f5c\u308b\u4e0a\u3067\u5fc5\u8981\u306b\u306a\u308b\u51e6\u7406\u306e\u66f8\u304d\u65b9\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\n\n\u6b21\u56de\u306f\u3082\u3046\u4e00\u6b69\u8e0f\u307f\u8fbc\u3093\u3060\u5185\u5bb9\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n[\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089](https://github.com/daishihmr/bulletml.js-tutorial/archive/part4.zip)\n\n# JSSTG \u590f\u306eJavaScript\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u796d\u308a \u958b\u50ac\u4e2d\uff01\n\n\u7a81\u7136\u3067\u3059\u304c\u3001\u5ba3\u4f1d\u3067\u3059\u3002\n\n**[JSSTG \u590f\u306eJavaScript\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u796d\u308a](http://wgld.org/o/jsstg/)** \u958b\u50ac\u4e2d\u3067\u3059\uff01\n\n\u5fdc\u52df\u8981\u9805\u306f\u81f3\u3063\u3066\u5358\u7d14\u3002\u300cJavaScript\u88fd\u306e\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u3067\u3042\u308c\u3070\u306a\u3093\u3067\u3082OK\uff01\u300d\u3067\u3059\u3002\n\u7de0\u3081\u5207\u308a\u306f2014\u5e748\u670831\u65e5\u3092\u4e88\u5b9a\u3002\n\u5fdc\u52df\u65b9\u6cd5\u306a\u3069\u306f[\u516c\u5f0f\u30b5\u30a4\u30c8](http://wgld.org/o/jsstg/)\u3092\u3054\u89a7\u306b\u306a\u308b\u304b\u3001Twitter\u306b\u3066\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u300c[#jsstg](https://twitter.com/search?f=realtime&q=%23jsstg&src=typd)\u300d\u3092\u3064\u3051\u3066\u8cea\u554f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u672c\u30b7\u30ea\u30fc\u30ba\u3092\u8aad\u3093\u3067tmlib.js\uff06bulletml.js\u88fd\u306e\u5f3e\u5e55\uff33\uff34\uff27\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u65b9\u3001\u305c\u3072\u3054\u5fdc\u52df\u3092\uff01\n**\u71b1\u3044\uff33\uff34\uff27 \u5f85\u3063\u3066\u307e\u3059\uff01\uff01\uff01**\n", "tags": ["tmlib.js", "bulletml.js", "bulletml.js-tutorial"]}