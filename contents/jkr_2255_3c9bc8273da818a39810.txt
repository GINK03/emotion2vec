{"context": "\u300c\u25cb\u500b\u306e\u3082\u306e\u304b\u3089\u25a1\u500b\u3060\u3051\u53d6\u308a\u51fa\u3059\u300d\u3068\u3044\u3046\u51e6\u7406\u306f\u3068\u304d\u3069\u304d\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u305d\u308c\u3092\u884c\u3063\u305f\u5834\u5408\u306e\u300c\u6570\u300d\u3060\u3051\u8003\u3048\u308b\u5834\u5408\u3082\u3001\u5730\u5473\u306b\u9762\u5012\u3060\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\n\u5b9a\u7fa9\u3068\u305d\u306e\u6027\u8cea\n\u3053\u306e\u3088\u3046\u306a\u3001\u300cnnn \u500b\u306e\u3082\u306e\u304b\u3089 kkk \u500b\u3060\u3051\u53d6\u308a\u51fa\u3059\u5834\u5408\u306e\u6570\u300d\u306f\u3001\u4e8c\u9805\u5b9a\u7406\u306e\u4fc2\u6570\u3068\u3057\u3066\u3082\u73fe\u308c\u308b\u3053\u3068\u304b\u3089\u3001\u4e8c\u9805\u4fc2\u6570\u3068\u3044\u3046\u547c\u3073\u540d\u304c\u3042\u308a\u307e\u3059\u3002\u3044\u308d\u3044\u308d\u306a\u8868\u8a18\u6cd5\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f nCknCk_n\\mathrm{C}_k \u3068\u66f8\u3044\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u639b\u3051\u7b97\u3068\u3057\u3066\u66f8\u304f\u3068\u3001\n_n\\mathrm{C}_k=\\frac{n!}{k!(n-k)!} = \\frac{n\\times(n-1)\\times\\dots\\times(n-k+1)}{k!}\\tag{1}\nnCk=n!k!(n\u2212k)!=n\u00d7(n\u22121)\u00d7\u22ef\u00d7(n\u2212k+1)k!nCk=n!k!(n\u2212k)!=n\u00d7(n\u22121)\u00d7\u22ef\u00d7(n\u2212k+1)k!(1){_n\\mathrm{C}_k=\\frac{n!}{k!(n-k)!} = \\frac{n\\times(n-1)\\times\\dots\\times(n-k+1)}{k!}\\tag{1}\n}\n\u306e\u3088\u3046\u306b\u66f8\u3051\u307e\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u4e8c\u9805\u4fc2\u6570\u306f\u3044\u304f\u3064\u304b\u6e80\u305f\u3059\u6027\u8cea\u304c\u3042\u308a\u307e\u3059\u3002\n\\begin{align}\n_n\\mathrm{C}_k&={}_n\\mathrm{C}_{n-k}\\tag{2}\\\\\n  &= {}_{n-1}\\mathrm{C}_k + {}_{n-1}\\mathrm{C}_{k-1}\\qquad(k \\gt 0)\\tag{3}\\\\\n_n\\mathrm{C}_0&=1\\tag{4}\\\\\n_n\\mathrm{C}_1&=n\\tag{5}\\\\\n\\end{align}\nnCk=nCn\u2212k=n\u22121Ck+n\u22121Ck\u22121(k>0)nC0=1nC1=nnCknC0nC1=nCn\u2212k=n\u22121Ck+n\u22121Ck\u22121(k>0)=1=n(2)(3)(4)(5){\\begin{align}\n_n\\mathrm{C}_k&={}_n\\mathrm{C}_{n-k}\\tag{2}\\\\\n  &= {}_{n-1}\\mathrm{C}_k + {}_{n-1}\\mathrm{C}_{k-1}\\qquad(k \\gt 0)\\tag{3}\\\\\n_n\\mathrm{C}_0&=1\\tag{4}\\\\\n_n\\mathrm{C}_1&=n\\tag{5}\\\\\n\\end{align}\n}\n\u3068\u308a\u308f\u3051(3)\u306f\u3001\u30d1\u30b9\u30ab\u30eb\u306e\u4e09\u89d2\u5f62\u3068\u3057\u3066\u77e5\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\nRuby\u306e\u5834\u5408\u2026\u4f55\u3082\u8003\u3048\u306a\u304f\u3066\u3082\u3058\u3085\u3046\u3076\u3093\u901f\u3044\nRuby\u306e\u5834\u5408\u3001\u3053\u3093\u306a\u5834\u5408\u306b\u4fbf\u5229\u306a\u8a00\u8a9e\u4ed5\u69d8\u304c1\u3064\u3042\u3063\u3066\u3001\u305d\u308c\u306f\u300c\u6574\u6570\u6f14\u7b97\u3067\u5024\u304c\u5927\u304d\u304f\u306a\u3063\u3066\u3082\u6841\u3042\u3075\u308c\u305b\u305a\u3001\u52dd\u624b\u306b\u591a\u500d\u9577\u6574\u6570\uff08Bignum\uff09\u306b\u306a\u3063\u3066\u304f\u308c\u308b\u300d\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u6841\u3042\u3075\u308c\u3092\u6c17\u306b\u305b\u305a\u3001\u3044\u304d\u306a\u308a(1)\u306e\u5f0f\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff08\u305f\u3060\u3001\u9805\u6570\u304c\u5897\u3048\u3066\u3082\u7121\u99c4\u306a\u306e\u3067\u3001n/2<kn/2<kn/2<k \u306e\u5834\u5408\u306b\u306f (2)\u3092\u9069\u7528\u3057\u3066\u3001\u639b\u3051\u308b\u9805\u6570\u3092\u6e1b\u3089\u3059\u3053\u3068\u3060\u3051\u306f\u3057\u3066\u3044\u307e\u3059\uff09\u3002\n\ncombi.rb\ndef combi(n,k)\n  k=n-k if 2*k > n\n  return 1 if k == 0\n  ((n-k+1)..n).reduce(&:*)/((1..k).reduce(&:*))\nend\n\n\n\u306a\u304a\u3001Ruby\u3067\u306fRange\u3082Enumerable\u306a\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u7bc4\u56f2\u5185\u306e\u5024\u306b\u3064\u3044\u3066reduce\u3067\u304d\u307e\u3059\uff08\u95a2\u9023\uff09\u3002\n\u305d\u3057\u3066\u3001\u901f\u5ea6\u306b\u3064\u3044\u3066\u3082\u7533\u3057\u5206\u306a\u304f\u30011000C5001000C500_{1000}\\mathrm{C}_{500} \u306e\u8a08\u7b97\u304c1\u30df\u30ea\u79d2\u3067\u5b8c\u4e86\u3059\u308b\u7a0b\u5ea6\u306b\u9ad8\u901f\u3067\u3057\u305f\u3002\n\nJavaScript\u306e\u5834\u5408\u2026\nJavaScript\u306e\u5834\u5408\u3001\u6a19\u6e96\u3067\u591a\u500d\u9577\u6574\u6570\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u3089\u305a\u3001(1)\u3092\u305d\u306e\u307e\u307e\u66f8\u3051\u3070\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u3067\u306e\u6f14\u7b97\u3068\u306a\u3063\u3066\u30012\u9032\u6cd5\u306753\u30d3\u30c3\u30c8\u306e\u7cbe\u5ea6\u3092\u8d8a\u3048\u3066\u3057\u307e\u3048\u3070\u6b63\u78ba\u306a\u5024\u304c\u51fa\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u6b63\u78ba\u306a\u5024\u3092\u51fa\u3059\u305f\u3081\u306e\u6226\u7565\u306f2\u3064\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n\u3088\u308a\u5c0f\u3055\u3044\u3082\u306e\u306e\u8db3\u3057\u7b97\u304b\u3089\u7b97\u51fa\u3059\u308b\n\u9014\u4e2d\u3067\u9069\u5b9c\u7d04\u5206\u3057\u306a\u304c\u3089\u639b\u3051\u7b97\u3092\u9032\u3081\u308b\n\n\n\u8db3\u3057\u7b97\u3067\u8a08\u7b97\n(3)\u3092\u4f7f\u3048\u3070\u3001\u3088\u308a\u5c0f\u3055\u306a\u5024\u306e\u8a08\u7b97\u3078\u3068\u5909\u63db\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u307e\u305a\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\nfunction combi_simple(n, k){\n  if(k*2 > n) k=n-k;\n  if(k===0) return 1;\n  if(k===1) return n;\n  return combi_simple(n-1, k) + combi_simple(n-1, k-1);\n}\n\n\n\u3053\u308c\u3067\u3001\u89e3\u304c2532532^{53} \u4ee5\u4e0b\u306b\u306a\u308b\u306e\u3067JavaScript\u3067\u3082\u6b63\u78ba\u306b\u8868\u305b\u308b 100C13100C13_{100} \\mathrm{C}_{13} \u3092\u8a08\u7b97\u3055\u305b\u3088\u3046\u3068\u3057\u307e\u3057\u305f\u304c\u202610\u79d2\u3057\u3066\u3082\u5fdc\u7b54\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u305f\u3060\u306e\u3057\u304b\u3070\u306d\u306e\u3088\u3046\u3060\u3002\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u305b\u3066\u307f\u308b\n\u5b9f\u306f\u3001\u3053\u306e\u8a08\u7b97\u306b\u306f\u304b\u306a\u308a\u306e\u7121\u99c4\u304c\u3042\u308a\u307e\u3059\u3002\n\\begin{align}\n_{100} \\mathrm{C}_{13}&={}_{99}\\mathrm{C}_{13}+{}_{99}\\mathrm{C}_{12}\\\\\n&={}_{98}\\mathrm{C}_{13}+{}_{98}\\mathrm{C}_{12}+{}_{98}\\mathrm{C}_{12}+{}_{98}\\mathrm{C}_{11}\n\\end{align}\n100C13=99C13+99C12=98C13+98C12+98C12+98C11100C13=99C13+99C12=98C13+98C12+98C12+98C11{\\begin{align}\n_{100} \\mathrm{C}_{13}&={}_{99}\\mathrm{C}_{13}+{}_{99}\\mathrm{C}_{12}\\\\\n&={}_{98}\\mathrm{C}_{13}+{}_{98}\\mathrm{C}_{12}+{}_{98}\\mathrm{C}_{12}+{}_{98}\\mathrm{C}_{11}\n\\end{align}\n}\n\u3068\u3044\u3046\u3088\u3046\u306b\u3001\u5c55\u958b\u3057\u3066\u3044\u304f\u4e2d\u3067\u540c\u3058\u9805\u304c\u4f55\u5ea6\u3082\u767b\u5834\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u305f\u3073\u3054\u3068\u306b\u8a08\u7b97\u3057\u3066\u3082\u3042\u307e\u308a\u610f\u5473\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u3053\u3067\u3001\u30e1\u30e2\u5316\u3055\u305b\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u30e1\u30e2\u5316\nvar memo={};\nfunction combi_memorized(n, k){\n  //\u30e1\u30e2\u308b\u307e\u3067\u3082\u306a\u304f\u51fa\u308b\u5024\u306f\u305d\u306e\u307e\u307e\u8fd4\u3059\n  if(k*2 > n) k=n-k;\n  if(k===0) return 1;\n  if(k===1) return n;\n  //\u30e1\u30e2\u3092\u78ba\u8a8d\n  var memo_key = n + ',' + k;\n  if(!memo[memo_key]){\n    memo[memo_key] = combi_memorized(n-1, k) + combi_memorized(n-1, k-1);\n  }\n  return memo[memo_key];\n}\n\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u4e00\u77ac\u3067\u5024\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u7d04\u5206\u3057\u3066\u639b\u3051\u7b97\n\u3082\u30461\u3064\u306e\u6226\u7565\u306e\u300c\u7d04\u5206\u3057\u3066\u639b\u3051\u7b97\u300d\u306b\u3064\u3044\u3066\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3067\u304d\u308b\u3060\u3051\u7d04\u5206\u306e\u56de\u6570\u3092\u6e1b\u3089\u3059\u305f\u3081\u306b\u3001\u300c2532532^{53} \u3092\u8d85\u3048\u306a\u3044\u7bc4\u56f2\u3067\u639b\u3051\u7b97\u3092\u3057\u3066\u304b\u3089\u3001\u6700\u5927\u516c\u7d04\u6570\u3067\u5272\u308b\u300d\u3053\u3068\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u7d04\u5206\n// 2^53\u3088\u308a\u5c11\u3057\u5c0f\u3055\u306a\u5024\nvar MAX=9e15;\n\nfunction combi_reduction(n, k){\n  //\u3059\u3050\u306b\u51fa\u308b\u5024\u306f\u305d\u306e\u307e\u307e\u8fd4\u3059\n  if(k*2 > n) k=n-k;\n  if(k===0) return 1;\n  if(k===1) return n;\n  function gcd(x, y){\n    var t;\n    while(y){\n      t = x % y;\n      x = y;\n      y = t; \n    }\n    return x;\n  }\n  var num=1, denom=1, tmp, i;\n  var nums=[], denoms=[];\n  for(i=0; i<k; ++i){\n    nums.push(n-i);\n    denoms.push(k-i);\n  }\n  while(denoms.length){\n    while(denoms.length){\n      tmp = denom * denoms[denoms.length-1];\n      if(tmp > MAX) break;\n      denom = tmp;\n      denoms.pop();\n    }\n    while(nums.length){\n      tmp = num * nums[nums.length-1];\n      if(tmp > MAX) break;\n      num = tmp;\n      nums.pop();\n    }\n    tmp = gcd(num, denom);\n    num /= tmp;\n    denom /= tmp;\n  }\n  for(i=0;i<nums.length;++i){\n    num *= nums[i];\n  }\n  return num / denom;\n}\n\n\n\n\u3053\u306e2\u3064\u306e\u901f\u5ea6\u6bd4\u8f03\u3092jsPerf\u306b\u6295\u7a3f\u3057\u307e\u3057\u305f\u306e\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u304c\u3001\u30e1\u30e2\u5316\u306e\u307b\u3046\u304c\u901f\u305d\u3046\u3067\u3059\u3002\n\u300c\u25cb\u500b\u306e\u3082\u306e\u304b\u3089\u25a1\u500b\u3060\u3051\u53d6\u308a\u51fa\u3059\u300d\u3068\u3044\u3046\u51e6\u7406\u306f\u3068\u304d\u3069\u304d\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u305d\u308c\u3092\u884c\u3063\u305f\u5834\u5408\u306e\u300c\u6570\u300d\u3060\u3051\u8003\u3048\u308b\u5834\u5408\u3082\u3001\u5730\u5473\u306b\u9762\u5012\u3060\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\n# \u5b9a\u7fa9\u3068\u305d\u306e\u6027\u8cea\n\u3053\u306e\u3088\u3046\u306a\u3001\u300c$n$ \u500b\u306e\u3082\u306e\u304b\u3089 $k$ \u500b\u3060\u3051\u53d6\u308a\u51fa\u3059\u5834\u5408\u306e\u6570\u300d\u306f\u3001\u4e8c\u9805\u5b9a\u7406\u306e\u4fc2\u6570\u3068\u3057\u3066\u3082\u73fe\u308c\u308b\u3053\u3068\u304b\u3089\u3001[\u4e8c\u9805\u4fc2\u6570](https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E4%BF%82%E6%95%B0)\u3068\u3044\u3046\u547c\u3073\u540d\u304c\u3042\u308a\u307e\u3059\u3002\u3044\u308d\u3044\u308d\u306a\u8868\u8a18\u6cd5\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f $_n\\mathrm{C}_k$ \u3068\u66f8\u3044\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u639b\u3051\u7b97\u3068\u3057\u3066\u66f8\u304f\u3068\u3001\n\n```math\n_n\\mathrm{C}_k=\\frac{n!}{k!(n-k)!} = \\frac{n\\times(n-1)\\times\\dots\\times(n-k+1)}{k!}\\tag{1}\n```\n\n\u306e\u3088\u3046\u306b\u66f8\u3051\u307e\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u4e8c\u9805\u4fc2\u6570\u306f\u3044\u304f\u3064\u304b\u6e80\u305f\u3059\u6027\u8cea\u304c\u3042\u308a\u307e\u3059\u3002\n\n```math\n\\begin{align}\n_n\\mathrm{C}_k&={}_n\\mathrm{C}_{n-k}\\tag{2}\\\\\n  &= {}_{n-1}\\mathrm{C}_k + {}_{n-1}\\mathrm{C}_{k-1}\\qquad(k \\gt 0)\\tag{3}\\\\\n_n\\mathrm{C}_0&=1\\tag{4}\\\\\n_n\\mathrm{C}_1&=n\\tag{5}\\\\\n\\end{align}\n```\n\n\u3068\u308a\u308f\u3051(3)\u306f\u3001[\u30d1\u30b9\u30ab\u30eb\u306e\u4e09\u89d2\u5f62](https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%B9%E3%82%AB%E3%83%AB%E3%81%AE%E4%B8%89%E8%A7%92%E5%BD%A2)\u3068\u3057\u3066\u77e5\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n# Ruby\u306e\u5834\u5408\u2026\u4f55\u3082\u8003\u3048\u306a\u304f\u3066\u3082\u3058\u3085\u3046\u3076\u3093\u901f\u3044\nRuby\u306e\u5834\u5408\u3001\u3053\u3093\u306a\u5834\u5408\u306b\u4fbf\u5229\u306a\u8a00\u8a9e\u4ed5\u69d8\u304c1\u3064\u3042\u3063\u3066\u3001\u305d\u308c\u306f\u300c\u6574\u6570\u6f14\u7b97\u3067\u5024\u304c\u5927\u304d\u304f\u306a\u3063\u3066\u3082\u6841\u3042\u3075\u308c\u305b\u305a\u3001\u52dd\u624b\u306b\u591a\u500d\u9577\u6574\u6570\uff08`Bignum`\uff09\u306b\u306a\u3063\u3066\u304f\u308c\u308b\u300d\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u6841\u3042\u3075\u308c\u3092\u6c17\u306b\u305b\u305a\u3001\u3044\u304d\u306a\u308a(1)\u306e\u5f0f\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff08\u305f\u3060\u3001\u9805\u6570\u304c\u5897\u3048\u3066\u3082\u7121\u99c4\u306a\u306e\u3067\u3001$n/2<k$ \u306e\u5834\u5408\u306b\u306f (2)\u3092\u9069\u7528\u3057\u3066\u3001\u639b\u3051\u308b\u9805\u6570\u3092\u6e1b\u3089\u3059\u3053\u3068\u3060\u3051\u306f\u3057\u3066\u3044\u307e\u3059\uff09\u3002\n\n```rb:combi.rb\ndef combi(n,k)\n  k=n-k if 2*k > n\n  return 1 if k == 0\n  ((n-k+1)..n).reduce(&:*)/((1..k).reduce(&:*))\nend\n```\n\u306a\u304a\u3001Ruby\u3067\u306f`Range`\u3082`Enumerable`\u306a\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u7bc4\u56f2\u5185\u306e\u5024\u306b\u3064\u3044\u3066`reduce`\u3067\u304d\u307e\u3059\uff08[\u95a2\u9023](http://qiita.com/tadsan/items/6f0585d5cc3da9a5b700)\uff09\u3002\n\n\u305d\u3057\u3066\u3001\u901f\u5ea6\u306b\u3064\u3044\u3066\u3082\u7533\u3057\u5206\u306a\u304f\u3001$\\_{1000}\\mathrm{C}_{500}$ \u306e\u8a08\u7b97\u304c1\u30df\u30ea\u79d2\u3067\u5b8c\u4e86\u3059\u308b\u7a0b\u5ea6\u306b\u9ad8\u901f\u3067\u3057\u305f\u3002\n\n# JavaScript\u306e\u5834\u5408\u2026\nJavaScript\u306e\u5834\u5408\u3001\u6a19\u6e96\u3067\u591a\u500d\u9577\u6574\u6570\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u3089\u305a\u3001(1)\u3092\u305d\u306e\u307e\u307e\u66f8\u3051\u3070\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u3067\u306e\u6f14\u7b97\u3068\u306a\u3063\u3066\u30012\u9032\u6cd5\u306753\u30d3\u30c3\u30c8\u306e\u7cbe\u5ea6\u3092\u8d8a\u3048\u3066\u3057\u307e\u3048\u3070\u6b63\u78ba\u306a\u5024\u304c\u51fa\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u6b63\u78ba\u306a\u5024\u3092\u51fa\u3059\u305f\u3081\u306e\u6226\u7565\u306f2\u3064\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n1. \u3088\u308a\u5c0f\u3055\u3044\u3082\u306e\u306e\u8db3\u3057\u7b97\u304b\u3089\u7b97\u51fa\u3059\u308b\n2. \u9014\u4e2d\u3067\u9069\u5b9c\u7d04\u5206\u3057\u306a\u304c\u3089\u639b\u3051\u7b97\u3092\u9032\u3081\u308b\n\n## \u8db3\u3057\u7b97\u3067\u8a08\u7b97\n(3)\u3092\u4f7f\u3048\u3070\u3001\u3088\u308a\u5c0f\u3055\u306a\u5024\u306e\u8a08\u7b97\u3078\u3068\u5909\u63db\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u307e\u305a\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```js:\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\nfunction combi_simple(n, k){\n  if(k*2 > n) k=n-k;\n  if(k===0) return 1;\n  if(k===1) return n;\n  return combi_simple(n-1, k) + combi_simple(n-1, k-1);\n}\n```\n\n\u3053\u308c\u3067\u3001\u89e3\u304c$2^{53}$ \u4ee5\u4e0b\u306b\u306a\u308b\u306e\u3067JavaScript\u3067\u3082\u6b63\u78ba\u306b\u8868\u305b\u308b $\\_{100} \\mathrm{C}_{13}$ \u3092\u8a08\u7b97\u3055\u305b\u3088\u3046\u3068\u3057\u307e\u3057\u305f\u304c\u202610\u79d2\u3057\u3066\u3082\u5fdc\u7b54\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002<del>\u305f\u3060\u306e\u3057\u304b\u3070\u306d\u306e\u3088\u3046\u3060\u3002</del>\n\n## \u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u305b\u3066\u307f\u308b\n\u5b9f\u306f\u3001\u3053\u306e\u8a08\u7b97\u306b\u306f\u304b\u306a\u308a\u306e\u7121\u99c4\u304c\u3042\u308a\u307e\u3059\u3002\n\n```math\n\\begin{align}\n_{100} \\mathrm{C}_{13}&={}_{99}\\mathrm{C}_{13}+{}_{99}\\mathrm{C}_{12}\\\\\n&={}_{98}\\mathrm{C}_{13}+{}_{98}\\mathrm{C}_{12}+{}_{98}\\mathrm{C}_{12}+{}_{98}\\mathrm{C}_{11}\n\\end{align}\n```\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u3001\u5c55\u958b\u3057\u3066\u3044\u304f\u4e2d\u3067\u540c\u3058\u9805\u304c\u4f55\u5ea6\u3082\u767b\u5834\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u305f\u3073\u3054\u3068\u306b\u8a08\u7b97\u3057\u3066\u3082\u3042\u307e\u308a\u610f\u5473\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u3053\u3067\u3001\u30e1\u30e2\u5316\u3055\u305b\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n```js:\u30e1\u30e2\u5316\nvar memo={};\nfunction combi_memorized(n, k){\n  //\u30e1\u30e2\u308b\u307e\u3067\u3082\u306a\u304f\u51fa\u308b\u5024\u306f\u305d\u306e\u307e\u307e\u8fd4\u3059\n  if(k*2 > n) k=n-k;\n  if(k===0) return 1;\n  if(k===1) return n;\n  //\u30e1\u30e2\u3092\u78ba\u8a8d\n  var memo_key = n + ',' + k;\n  if(!memo[memo_key]){\n    memo[memo_key] = combi_memorized(n-1, k) + combi_memorized(n-1, k-1);\n  }\n  return memo[memo_key];\n}\n```\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u4e00\u77ac\u3067\u5024\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n## \u7d04\u5206\u3057\u3066\u639b\u3051\u7b97\n\u3082\u30461\u3064\u306e\u6226\u7565\u306e\u300c\u7d04\u5206\u3057\u3066\u639b\u3051\u7b97\u300d\u306b\u3064\u3044\u3066\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3067\u304d\u308b\u3060\u3051\u7d04\u5206\u306e\u56de\u6570\u3092\u6e1b\u3089\u3059\u305f\u3081\u306b\u3001\u300c$2^{53}$ \u3092\u8d85\u3048\u306a\u3044\u7bc4\u56f2\u3067\u639b\u3051\u7b97\u3092\u3057\u3066\u304b\u3089\u3001\u6700\u5927\u516c\u7d04\u6570\u3067\u5272\u308b\u300d\u3053\u3068\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n```js:\u7d04\u5206\n// 2^53\u3088\u308a\u5c11\u3057\u5c0f\u3055\u306a\u5024\nvar MAX=9e15;\n\nfunction combi_reduction(n, k){\n  //\u3059\u3050\u306b\u51fa\u308b\u5024\u306f\u305d\u306e\u307e\u307e\u8fd4\u3059\n  if(k*2 > n) k=n-k;\n  if(k===0) return 1;\n  if(k===1) return n;\n  function gcd(x, y){\n    var t;\n    while(y){\n      t = x % y;\n      x = y;\n      y = t; \n    }\n    return x;\n  }\n  var num=1, denom=1, tmp, i;\n  var nums=[], denoms=[];\n  for(i=0; i<k; ++i){\n    nums.push(n-i);\n    denoms.push(k-i);\n  }\n  while(denoms.length){\n    while(denoms.length){\n      tmp = denom * denoms[denoms.length-1];\n      if(tmp > MAX) break;\n      denom = tmp;\n      denoms.pop();\n    }\n    while(nums.length){\n      tmp = num * nums[nums.length-1];\n      if(tmp > MAX) break;\n      num = tmp;\n      nums.pop();\n    }\n    tmp = gcd(num, denom);\n    num /= tmp;\n    denom /= tmp;\n  }\n  for(i=0;i<nums.length;++i){\n    num *= nums[i];\n  }\n  return num / denom;\n}\n\n```\n\n\u3053\u306e2\u3064\u306e\u901f\u5ea6\u6bd4\u8f03\u3092[jsPerf\u306b\u6295\u7a3f\u3057\u307e\u3057\u305f](http://jsperf.com/combination-count)\u306e\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u304c\u3001\u30e1\u30e2\u5316\u306e\u307b\u3046\u304c\u901f\u305d\u3046\u3067\u3059\u3002\n\n", "tags": ["\u7d44\u307f\u5408\u308f\u305b", "Ruby", "JavaScript", "\u6570\u5b66"]}