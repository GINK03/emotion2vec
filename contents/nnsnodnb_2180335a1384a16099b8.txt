{"context": "\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nfrom flask import Flask\nfrom flask import request\n\nimport requests\nimport json\nimport re\n\nimport settings\n\nLINEBOT_API_EVENT ='https://trialbot-api.line.me/v1/events'\nLINE_HEADERS = {\n    'Content-type': 'application/json; charset=UTF-8',\n    'X-Line-ChannelID':settings.CHANNEL_ID,\n    'X-Line-ChannelSecret':settings.CHANNEL_SECRET,\n    'X-Line-Trusted-User-With-ACL':settings.MID\n}\n\ndef post_event(to, content):\n    msg = {\n        'to': [to],\n        'toChannel': 1383378250,\n        'eventType': \"138311608800106203\",\n        'content': content\n    }\n    r = requests.post(LINEBOT_API_EVENT, headers = LINE_HEADERS, data = json.dumps(msg))\n\ndef post_text(to, text):\n    content = {\n        'contentType': 1,\n        'toType': 1,\n        'text': text,\n    }\n    post_event(to, content)\n\napp = Flask(__name__)\n\n@app.route(\"/callback\", methods=['POST'])\ndef callback():\n    messages = request.json['result']\n\n    # \u3068\u308a\u3042\u3048\u305a\u30aa\u30a6\u30e0\u8fd4\u3057\n    post_text(message['content']['from'], message['content']['text'])\n    return ''\n\nif __name__ == \"__main__\":\n    app.run(host = '0.0.0.0', port = 8080, threaded = True, debug = True)\n\n\u3053\u3093\u306a\u611f\u3058\uff0e\nLINE\u30dc\u30c3\u30c8\u306e\u767b\u9332\u306f\u4ee5\u4e0b\nBOT API Trial Account\ncallback URL\u306f\u300c https(SSL\u5bfe\u5fdc) \u300d\u3067\u306a\u3044\u3068\u30c0\u30e1\u306a\u306e\u3067Heroku\u7b49\u3067\u904b\u7528\u3059\u308b\u3068\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n\u79c1\u306f\uff0c\u81ea\u5b85\u30b5\u30fc\u30d0\u3092https\u306b\u3057\u3066\u3044\u308b\u306e\u8a3c\u660e\u66f8\u3092\u518d\u767a\u884c\u3057\u3066\u306a\u3093\u3068\u304b\u30b5\u30fc\u30d0\u8a2d\u5b9a\u3092\u7d42\u3048\u958b\u767a\u3057\u307e\u3057\u305f\uff0e\n\n\u6700\u5f8c\u306b\n\u79c1\u306e\u958b\u767a\u3057\u305f\u5f62\u614b\u7d20\u89e3\u6790\u3092\u3057\u3066\u304f\u308c\u308b\u30dc\u30c3\u30c8\u306f\u4ee5\u4e0b\u52d5\u753b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\u6700\u8fd1\u306f\u78ba\u304b\u7a3c\u50cd\u3059\u3089\u3055\u305b\u3066\u3044\u306a\u3044\u3067\u3059\uff57\n\u5f62\u614b\u7d20\u89e3\u6790\u5668\u30dc\u30c3\u30c8\u30c7\u30e2\n\n### \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n\n```python\nfrom flask import Flask\nfrom flask import request\n\nimport requests\nimport json\nimport re\n\nimport settings\n\nLINEBOT_API_EVENT ='https://trialbot-api.line.me/v1/events'\nLINE_HEADERS = {\n    'Content-type': 'application/json; charset=UTF-8',\n    'X-Line-ChannelID':settings.CHANNEL_ID,\n    'X-Line-ChannelSecret':settings.CHANNEL_SECRET,\n    'X-Line-Trusted-User-With-ACL':settings.MID\n}\n\ndef post_event(to, content):\n    msg = {\n        'to': [to],\n        'toChannel': 1383378250,\n        'eventType': \"138311608800106203\",\n        'content': content\n    }\n    r = requests.post(LINEBOT_API_EVENT, headers = LINE_HEADERS, data = json.dumps(msg))\n\ndef post_text(to, text):\n    content = {\n        'contentType': 1,\n        'toType': 1,\n        'text': text,\n    }\n    post_event(to, content)\n\napp = Flask(__name__)\n\n@app.route(\"/callback\", methods=['POST'])\ndef callback():\n    messages = request.json['result']\n\n    # \u3068\u308a\u3042\u3048\u305a\u30aa\u30a6\u30e0\u8fd4\u3057\n    post_text(message['content']['from'], message['content']['text'])\n    return ''\n\nif __name__ == \"__main__\":\n    app.run(host = '0.0.0.0', port = 8080, threaded = True, debug = True)\n```\n\n\u3053\u3093\u306a\u611f\u3058\uff0e\n\nLINE\u30dc\u30c3\u30c8\u306e\u767b\u9332\u306f\u4ee5\u4e0b\n\n[BOT API Trial Account](https://business.line.me/ja/products/4/introduction)\n\ncallback URL\u306f\u300c __https(SSL\u5bfe\u5fdc)__ \u300d\u3067\u306a\u3044\u3068\u30c0\u30e1\u306a\u306e\u3067Heroku\u7b49\u3067\u904b\u7528\u3059\u308b\u3068\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093  \n\u79c1\u306f\uff0c\u81ea\u5b85\u30b5\u30fc\u30d0\u3092https\u306b\u3057\u3066\u3044\u308b\u306e\u8a3c\u660e\u66f8\u3092\u518d\u767a\u884c\u3057\u3066\u306a\u3093\u3068\u304b\u30b5\u30fc\u30d0\u8a2d\u5b9a\u3092\u7d42\u3048\u958b\u767a\u3057\u307e\u3057\u305f\uff0e\n\n\n## \u6700\u5f8c\u306b\n\n\u79c1\u306e\u958b\u767a\u3057\u305f\u5f62\u614b\u7d20\u89e3\u6790\u3092\u3057\u3066\u304f\u308c\u308b\u30dc\u30c3\u30c8\u306f\u4ee5\u4e0b\u52d5\u753b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\u6700\u8fd1\u306f\u78ba\u304b\u7a3c\u50cd\u3059\u3089\u3055\u305b\u3066\u3044\u306a\u3044\u3067\u3059\uff57\n\n[\u5f62\u614b\u7d20\u89e3\u6790\u5668\u30dc\u30c3\u30c8\u30c7\u30e2](https://www.youtube.com/embed/h4BD22TiItM)\n", "tags": ["Flask", "Python", "python3", "linebot"]}