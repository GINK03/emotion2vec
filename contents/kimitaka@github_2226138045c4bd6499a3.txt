{"context": " More than 1 year has passed since last update.\n\n\u554f\u984c\u306e\u6982\u8981\nMechanize\u3067TLSv1\u3092\u4f7f\u7528\u3057\u3066\u6697\u53f7\u5316\u901a\u4fe1\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u4e0a\u306e\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\u63a5\u7d9a\u304c\u5207\u65ad\u3055\u308c\u307e\u3059\u3002\n\n\u518d\u73fe\u30b3\u30fc\u30c9\n\nng.rb\nrequire 'rubygems'\nrequire 'mechanize'\n\nagent = Mechanize.new\nagent.verify_mode = OpenSSL::SSL::VERIFY_NONE # \u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u3092\u3057\u306a\u3044\uff08\u901a\u5e38\u306f\u3053\u306e\u884c\u306f\u4e0d\u8981\uff09\nagent.get('https://www.hikari.ntt-east.net/AGT_Main.htm') # => Connection reset by peer\n\n\n\n\u51fa\u529b\n$ ruby1.9.3 ng.rb\n/var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:70:in `connect': Connection reset by peer - SSL_connect (Errno::ECONNRESET)\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:70:in `block in connect'\n        from /usr/lib/ruby/1.9.1/timeout.rb:54:in `timeout'\n        from /usr/lib/ruby/1.9.1/timeout.rb:99:in `timeout'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:70:in `connect'\n        from /usr/lib/ruby/1.9.1/net/http.rb:755:in `do_start'\n        from /usr/lib/ruby/1.9.1/net/http.rb:750:in `start'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:628:in `start'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:570:in `connection_for'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:926:in `request'\n        from /var/lib/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize/http/agent.rb:258:in `fetch'\n        from /var/lib/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize.rb:407:in `get'\n        from ng.rb:6:in `<main>'\n\n\n\u89e3\u6c7a\u65b9\u6cd5\nMechanize#ssl_version= \u3067 'TLSv1' \u3092\u6307\u5b9a\u3059\u308b\n\n\u89e3\u6c7a\u30b3\u30fc\u30c9\n\nok.rb\nrequire 'rubygems'\nrequire 'mechanize'\n\nagent = Mechanize.new\nagent.verify_mode = OpenSSL::SSL::VERIFY_NONE # \u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u3092\u3057\u306a\u3044\uff08\u901a\u5e38\u306f\u3053\u306e\u884c\u306f\u4e0d\u8981\uff09\nagent.ssl_version = 'TLSv1'\nagent.get('https://www.hikari.ntt-east.net/AGT_Main.htm') # => Success\n\n\n# \u554f\u984c\u306e\u6982\u8981\nMechanize\u3067TLSv1\u3092\u4f7f\u7528\u3057\u3066\u6697\u53f7\u5316\u901a\u4fe1\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u4e0a\u306e\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\u63a5\u7d9a\u304c\u5207\u65ad\u3055\u308c\u307e\u3059\u3002\n\n## \u518d\u73fe\u30b3\u30fc\u30c9\n```ruby:ng.rb\nrequire 'rubygems'\nrequire 'mechanize'\n\nagent = Mechanize.new\nagent.verify_mode = OpenSSL::SSL::VERIFY_NONE # \u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u3092\u3057\u306a\u3044\uff08\u901a\u5e38\u306f\u3053\u306e\u884c\u306f\u4e0d\u8981\uff09\nagent.get('https://www.hikari.ntt-east.net/AGT_Main.htm') # => Connection reset by peer\n```\n\n## \u51fa\u529b\n```\n$ ruby1.9.3 ng.rb\n/var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:70:in `connect': Connection reset by peer - SSL_connect (Errno::ECONNRESET)\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:70:in `block in connect'\n        from /usr/lib/ruby/1.9.1/timeout.rb:54:in `timeout'\n        from /usr/lib/ruby/1.9.1/timeout.rb:99:in `timeout'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:70:in `connect'\n        from /usr/lib/ruby/1.9.1/net/http.rb:755:in `do_start'\n        from /usr/lib/ruby/1.9.1/net/http.rb:750:in `start'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:628:in `start'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:570:in `connection_for'\n        from /var/lib/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:926:in `request'\n        from /var/lib/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize/http/agent.rb:258:in `fetch'\n        from /var/lib/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize.rb:407:in `get'\n        from ng.rb:6:in `<main>'\n```\n\n# \u89e3\u6c7a\u65b9\u6cd5\nMechanize#ssl_version= \u3067 'TLSv1' \u3092\u6307\u5b9a\u3059\u308b\n\n## \u89e3\u6c7a\u30b3\u30fc\u30c9\n```ruby:ok.rb\nrequire 'rubygems'\nrequire 'mechanize'\n\nagent = Mechanize.new\nagent.verify_mode = OpenSSL::SSL::VERIFY_NONE # \u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u3092\u3057\u306a\u3044\uff08\u901a\u5e38\u306f\u3053\u306e\u884c\u306f\u4e0d\u8981\uff09\nagent.ssl_version = 'TLSv1'\nagent.get('https://www.hikari.ntt-east.net/AGT_Main.htm') # => Success\n```\n", "tags": ["Ruby1.9.3", "Mechanize2.5.1"]}