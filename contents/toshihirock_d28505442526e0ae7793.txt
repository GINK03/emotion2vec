{"context": " More than 1 year has passed since last update.AWS Lambda\u306b\u306f\u6628\u5e74\u3001\u30b3\u30fc\u30c9\u3092cron\u306e\u3088\u3046\u306b\u5b9a\u671f\u5b9f\u884c\u3067\u304d\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u6a5f\u80fd\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u3063\u3066\u3053\u3068\u306f\u7c21\u5358\u306bTwitter\u306eBot\u304c\u3067\u304d\u308b!\n\u3068\u3044\u3046\u3053\u3068\u3067\u8a66\u3057\u306bYoutbe\u306b\u3042\u308bPefume\u306eMV\u3092\u5b9a\u671f\u30dd\u30b9\u30c8\u3059\u308bTwitter bot\u3092\u4f5c\u6210\u3057\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u4f5c\u6210\u3057\u305f\u3082\u306e\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306b\u304a\u304d\u307e\u3057\u305f\u3002\ntoshihirock/lambda-tweet-perfume\n\u5225\u9014\u3001Twitter\u53ca\u3073Google\u306eAPI Key\u306f\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f5c\u6210\u3057\u305fbot\u306f\u3053\u3061\u3089\u3067\u3059\u3002\u73fe\u5728\u30011\u65e5\u306b1\u56de\u30e9\u30f3\u30c0\u30e0\u3067\u516c\u5f0f\u306eMV\u3092\u4e00\u3064\u30dd\u30b9\u30c8\u3057\u307e\u3059\u3002\u3042\u3093\u307e\u308a\u9762\u767d\u304f\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u9069\u5f53\u306b\u6d88\u3057\u307e\u3059\u3002\u3002\u3002\nTwitter perfume_random_mv\n\n\u30c4\u30a4\u30fc\u30c8\u306e\u65b9\u6cd5\u3092\u78ba\u8a8d\u3059\u308b\nTwitter\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u3066\u307f\u307e\u3059\u3002\nDevelopers/Documentation/Overview\n\u8272\u3005\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u3071\u3063\u3068\u898b\u3067\u5206\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3059\u304c\u3001\u30c4\u30a4\u30fc\u30c8\u3092\u3059\u308b\u306b\u306fREST API\u3092\u4f7f\u3063\u3066\u5b9f\u65bd\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\u307e\u305f\u3001\u8a8d\u8a3c\u306b\u306fOAuth2\u304bAPI Key\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u30c4\u30a4\u30fc\u30c8\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306eAPI\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\nPOST statuses/update\n\nTwitter App\u767b\u9332\u3092\u884c\u3046\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001REST API\u3092\u4f7f\u3046\u306b\u306f\u8a8d\u8a3c\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u3001\u307e\u305a\u306fTwitter\u306bapp\u306e\u767b\u9332\u304c\u5fc5\u8981\u306a\u306e\u3088\u3046\u306a\u306e\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\u4ee5\u4e0b\u30ea\u30f3\u30af\u304b\u3089\u9077\u79fb\u3057\u307e\u3059\u3002\nTwitter Apps\n\n\u4e0a\u8a18\u753b\u9762\u306e Create New App \u3092\u9078\u629e\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3059\u3002\n\n\nName,Description,Website\u3092\u9069\u5f53\u306b\u5165\u308c\u307e\u3059\u3002\n\u81ea\u5206\u306e\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002\n\nName->tweet-aws-lambda\nDescription->tweet on AWS Lambda\nWebsite->https://github.com/toshihirock\uff08\u4f55\u3067\u3082\u826f\u3044)\n\n\u5165\u529b\u5f8c\u3001\u753b\u9762\u4e0b\u90e8\u306b\u3042\u308b Yes,I agree \u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u898f\u7d04\u306b\u540c\u610f\u3057\u3001 Create your Twitter \u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u4f5c\u6210\u5f8c\u3001\u8868\u793a\u3055\u308c\u308b\u753b\u9762\u3067 Key and Access Tokens \u30bf\u30d6\u3092\u8a2d\u5b9a\u3057\u3001\u753b\u9762\u4e0b\u90e8\u3092\u78ba\u8a8d\u3059\u308b\u3068REST API\u5229\u7528\u6642\u306b\u5fc5\u8981\u306aAccess Token\u304c\u306a\u3044\u306e\u3067\u3001 Create my access token \u3092\u9078\u629e\u3057\u3001\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u4f5c\u6210\u5f8c\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\ncURL\u3067\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u307f\u308b\n\u4e00\u5fdc\u3001\u4f5c\u6210\u3057\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u5229\u7528\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001curl\u3067\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nGET users/show\n\u4e0a\u8a18\u30da\u30fc\u30b8\u306e\u771f\u3093\u4e2d\u3050\u3089\u3044\u306bOAuth Signature Generator\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u90e8\u5206\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4e0a\u8a18\u30bb\u30ec\u30af\u30c8\u30dc\u30c3\u30af\u30b9\u3067\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u540d\u3092\u9078\u629e\u3059\u308b\u3068\u30da\u30fc\u30b8\u304c\u9077\u79fb\u3057\u307e\u3059\u3002\u9078\u629e\u3057\u3066\u3044\u308bAPI\u3092\u53e9\u304f\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3092\u751f\u6210\u3057\u3066\u304f\u308c\u307e\u3059(\u4eca\u56de\u306f\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u53d6\u5f97\u7528API)\nRequest query:\u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092 status=hello from cURL \u3068\u3044\u3046\u611f\u3058\u3067\u30c4\u30a4\u30fc\u30c8\u3057\u305f\u3044\u5185\u5bb9\u306b\u5909\u66f4\u3057\u3001 Get OAuth Signature \u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u3059\u308b\u3068\u4e0b\u90e8\u306b cURL command \u3068\u3044\u3046\u90e8\u5206\u3067\u8a2d\u5b9a\u3057\u305f\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30b3\u30d4\u30da\u3057\u3066terminal\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n$curl --request 'POST' 'https://api.twitter.com/1.1/statuses/update.json' --data 'status=hello+from+cURL' --header 'Authorization: OAuth oauth_consumer_key=\"xxxx\", oauth_nonce=\"xxxxxx\", oauth_signature=\"xxxxxx\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"1452474781\", oauth_token=\"xxxx\", oauth_version=\"1.0\"' --verbose\n\n\u6210\u529f\u3059\u308c\u3070\u30c4\u30a4\u30fc\u30c8\u304c\u51fa\u6765\u3066\u3044\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nNode.js\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u307f\u308b\n\u6b21\u306bNode.js\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\u306a\u304a\u3001\u4e8b\u524d\u306b\u5148\u307b\u3069\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b\u5229\u7528\u3057\u305f\u3001\u4ee5\u4e0b\u306e\u5024\u306b\u3064\u3044\u3066\u30e1\u30e2\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002(Twitter Apps\u30da\u30fc\u30b8\u3067\u78ba\u8a8d\u53ef\u80fd)\n\nConsumer Key (API Key)\nConsumer Secret (API Secret)\nAccess Token\nAccess Token Secret\n\nAPI\u3092\u4f7f\u3063\u3066\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u65e2\u306b\u30e9\u30c3\u30d1\u30fc\u306e\u826f\u3055\u305d\u3046\u306anpm\u304c\u3042\u3063\u305f\u306e\u3067\u4eca\u56de\u306f\u3053\u3061\u3089\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\nnpm twitter\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$mkdir node-tweet\n$cd node-tweet\n$npm install twitter\n\n\u8a66\u3057\u306b\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\ntoshihiock \u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u306f\u9069\u5b9c\u81ea\u5206\u306etwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e @hoge \u306e\u90e8\u5206\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u307e\u305f\u3001\u5404\u30ad\u30fc\u3082\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nindex.js\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: 'xxx',\n  consumer_secret: 'xxxx',\n  access_token_key: 'xxxx',\n  access_token_secret: 'xxxx\n});\n\nvar params = {screen_name: 'toshihirock'};\nclient.get('users/show', params, function(error, result, response){\n  if (!error) {\n    console.log(result);\n    console.log(response);\n  } else {\n    console.log(error);\n  }\n});\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n$node index.js\n\n\u53d6\u5f97\u304c\u6210\u529f\u3059\u308c\u3070console.log\u3067\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30a8\u30e9\u30fc\u306e\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306e\u5185\u5bb9\u3082\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\u6b21\u306b\u30c4\u30a4\u30fc\u30c8\u3092\u540c\u3058\u8981\u9818\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\u306a\u304a\u3001\u30c4\u30a4\u30fc\u30c8\u306fGET\u3067\u306f\u306a\u304f\u3001POST\u306a\u306e\u3067 client.post \u3068\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u70b9\u306f\u6ce8\u610f\u3067\u3059\u3002\n\nindex.js\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: 'xxx',\n  consumer_secret: 'xxxx',\n  access_token_key: 'xxxx',\n  access_token_secret: 'xxxx\n});\n\nvar params = {status: 'hello from Node!'};\nclient.post('statuses/update', params, function(error, result, response){\n  if (!error) {\n    console.log(result);\n  } else {\n    console.log(error);\n  }\n});\n\n\n\n\u540c\u3058\u3088\u3046\u306b\u5b9f\u884c\u3057\u3001 hello from Node! \u3068\u30c4\u30a4\u30fc\u30c8\u51fa\u6765\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059!\n\n\u30ad\u30fc\u60c5\u5831\u3092\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u3059\u308b\nTwitter\u306e\u30ad\u30fc\u60c5\u5831\u304c\u30b3\u30fc\u30c9\u306b\u76f4\u66f8\u304d\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u307e\u307eGitHub\u306a\u3069\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30ad\u30fc\u60c5\u5831\u3092\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3057\u3001\u30b3\u30fc\u30c9\u3067\u306f\u305d\u306e\u5185\u5bb9\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u30ad\u30fc\u60c5\u5831\u306e\u30d5\u30a1\u30a4\u30eb\u306fGitHub\u3078\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u4e0a\u8a18\u3092\u7c21\u7565\u5316\u3059\u308b\u305f\u3081\u306bdotenv\u3068\u3044\u3046npm\u3092\u4f7f\u3044\u3057\u307e\u3059\u3002\nmotdotla/dotenv\n$npm install dotenv\n\n\u6700\u521d\u306b.env\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u3053\u3061\u3089\u306b\u30ad\u30fc\u60c5\u5831\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n.env\nCONSUMER_KEY=xxx\nCONSUMER_SECRET=xxxx\nACCESS_TOKEN_KEY=xxxx\nACCESS_TOKEN_SECRET=xxxx\n\n\n\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u78ba\u8a8d\u306e\u30b3\u30fc\u30c9\u3092.env\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u3093\u3067\u4f7f\u3046\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\nrequire('dotenv').load();\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: process.env.CONSUMER_KEY,\n  consumer_secret: process.env.CONSUMER_SECRET,\n  access_token_key: process.env.ACCESS_TOKEN_KEY,\n  access_token_secret: process.env.ACCESS_TOKEN_SECRET,\n});\n\nvar params = {screen_name: 'toshihirock'};\nclient.get('users/show', params, function(error, result, response){\n  if (!error) {\n    console.log(result);\n    console.log(response);\n  } else {\n    console.log(error);\n  }\n});\n\n\u3053\u308c\u3067\u3046\u307e\u304f\u5b9f\u884c\u3067\u304d\u308c\u3070.env\u30d5\u30a1\u30a4\u30eb\u3068\u306e\u9023\u643a\u306f\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\u307e\u305f\u3001.gitignore\u3092\u4f5c\u6210\u3057\u3001\u30c9\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u53ca\u3073node_modules\u3092git\u7ba1\u7406\u304b\u3089\u7121\u8996\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n.gitignore\n/.*\nnode_modules/\n\n\n\u78ba\u8a8d\u3057\u307e\u3059\u3002index.js\u306e\u307f\u304cgit\u306e\u7ba1\u7406\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n$git status\nOn branch master\n\nInitial commit\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\n    index.js\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n\n\nAWS Lambda\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3059\u308b\n\u6b21\u306bAWS\u306eLambda\u3092\u4f7f\u3063\u3066\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\u3068\u8a00\u3063\u3066\u3082\u5c11\u3057\u30b3\u30fc\u30c9\u3060\u3051\u3092\u5909\u3048\u308b\u3060\u3051\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3002\n\nindex.js\nrequire('dotenv').load();\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: process.env.CONSUMER_KEY,\n  consumer_secret: process.env.CONSUMER_SECRET,\n  access_token_key: process.env.ACCESS_TOKEN_KEY,\n  access_token_secret: process.env.ACCESS_TOKEN_SECRET,\n});\n\nexports.handler = function(event, context) {\n  var params = {status: 'hello from Lambda!'};\n  client.post('statuses/update', params, function(error, result, response){\n    if (!error) {\n      context.succeed(result);\n    } else {\n      context.fail(error);\n    }\n  });\n}\n\n\n\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001\u5ff5\u306e\u305f\u3081\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u304b\u3089\u3082\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u306a\u3055\u305b\u9802\u304d\u307e\u3057\u305f\u3002\nAWS Lambda\u306e\u305f\u3081\u306e\u95a2\u6570\u306e\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u3068\u30c6\u30b9\u30c8\n\nlocalExec.js\n// dirver\nvar event = {};\nvar context = {\n  invokeid: 'invokeid',\n  succeed: function(result) {\n    console.log('success');\n    console.log(result);\n    return;\n  },\n\n  fail: function(err) {\n    console.log('fail');\n    console.log(err);\n    return;\n  }\n}\n\n// exec\nvar lambda = require('./index');\nlambda.handler(event, context);\n\n\n\u4ee5\u4e0b\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n$node localExec.js\n\n\u52d5\u4f5c\u306e\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u3001lambda\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u4e8b\u524d\u306b tweet-lambda \u3068\u3044\u3046function\u3092\u4f5c\u6210\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n# \u30d5\u30a1\u30a4\u30eb\u7fa4\u3092zip\u306b\u307e\u3068\u3081\u308b\n$zip -r tweet-lambda index.js node_modules .env\n\n# zip\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n$aws lambda update-function-code --function-name tweet-lambda --zip-file fileb://./tweet-lambda.zip\n\n\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306a\u3069\u304b\u3089\u30c6\u30b9\u30c8\u5b9f\u884c\u3057\u3001\u30c4\u30a4\u30fc\u30c8\u3067\u304d\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059!\n\nYoutubeAPI\u3068\u9023\u643a\u3057\u3066Twitter bot\u3092\u4f5c\u3063\u3066\u307f\u308b\n\u666e\u901a\u306b\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u3082\u9762\u767d\u304f\u306a\u3044\u306e\u3067bot\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001Perfume\u306e\u516c\u5f0fMV\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u30c4\u30a4\u30fc\u30c8\u3059\u308b\u3082\u306e\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nYoutbeAPI\u3092\u4f7f\u3063\u3066\u30e9\u30f3\u30c0\u30e0\u306bPlaylist\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001Youtbe\u7528\u306e\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3059\u308b\u3082\u306e\u3092\u30c6\u30b9\u30c8\u3067\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\u4ee5\u4e0b\u30e1\u30e2\u3067\u3059\u3002\n\nYoutubeAPI\u3092\u4f7f\u3046\u305f\u3081\u306b\u306fAPIKEY\u304c\u5fc5\u8981\u306a\u306e\u3067\u53d6\u5f97\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u3061\u3089\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f Node\u3067YouTube Search API\u4f7f\u3063\u3066\u307f\u305f\n\nYoutubeAPI\u306fnode-youtubeAPI-simplifier\u3068\u3044\u3046\u30b7\u30f3\u30d7\u30eb\u306anpm\u3092\u5229\u7528 Haidy777/node-youtubeAPI-simplifier\n\n\n\u6e96\u5099\u304c\u3067\u304d\u305f\u3089\u4f5c\u6210\u3057\u307e\u3059\u3002\u307e\u305a\u306fYoutube\u3068\u306e\u9023\u643a\u306e\u307f\u884c\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002Pefume\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u306e\u30d7\u30ec\u30a4\u30ea\u30b9\u30c8\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3001\u305d\u306e\u4e2d\u306eMV\u306e\u307f\u306e\u30ea\u30b9\u30c8\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u3067\u4e00\u3064\u306e\u60c5\u5831\u3092pick up\u3059\u308b\u5f62\u3067\u3059\u3002\n\n.env\nGOOGLE_API_KEY=xxxx\n\n\n\nyoutube.js\nrequire('dotenv').load();\nvar ytapi = require('node-youtubeapi-simplifier');\nytapi.setup(process.env.GOOGLE_API_KEY);\n\nfunction getRandomInt(min, max) {\n  return Math.floor( Math.random() * (max - min + 1) ) + min;\n}\n\n// get PerfumeMV randomly\nfunction getRandomPerfumeMV(cb) {\n  ytapi.playlistFunctions.getPlaylistsForUser('Perfume').then(function (data) {\n    data.forEach(function(playlist) {\n      //console.log(playlist.title)\n      if(playlist.title === '\uff3bPerfume\uff3d MUSIC VIDEOS') {\n        //console.log(playlist.playlistId)\n        //console.log(playlist.videoCount)\n        var num = getRandomInt(0, playlist.videoCount);\n        ytapi.playlistFunctions.getVideosForPlaylist(playlist.playlistId).then(function (videos) {\n          var str = videos[num].title + '  https://www.youtube.com/watch?v=' + videos[num].videoId;\n          console.log(str);\n          cb(null, str);\n        });\n      }\n    });\n  });\n}\n\n// main\ngetRandomPerfumeMV(function(err, data) {\n  console.log(data);\n});\n\n\n\u4e0a\u8a18\u3067\u52d5\u4f5c\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u30c4\u30a4\u30fc\u30c8\u3059\u308b\u7528\u306b\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u3068\u30de\u30fc\u30b8\u3057\u307e\u3059\u3002\uff08\u672c\u5f53\u306f\u7dba\u9e97\u306b\u30d5\u30a1\u30a4\u30eb\u5206\u5272\u3057\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u904a\u3073\u306a\u306e\u3067\u306a\u306e\u3067\u3002\u3002\uff09\n\nindex.js\n// util\nrequire('dotenv').load();\n\nfunction getRandomInt(min, max) {\n  return Math.floor( Math.random() * (max - min + 1) ) + min;\n}\n\n// Youtube\nvar ytapi = require('node-youtubeapi-simplifier');\nytapi.setup(process.env.GOOGLE_API_KEY);\n\nfunction getRandomPerfumeMV(cb) {\n  ytapi.playlistFunctions.getPlaylistsForUser('Perfume').then(function (data) {\n    data.forEach(function(playlist) {\n      //console.log(playlist.title)\n      if(playlist.title === '\uff3bPerfume\uff3d MUSIC VIDEOS') {\n        //console.log(playlist.playlistId)\n        //console.log(playlist.videoCount)\n        var num = getRandomInt(0, playlist.videoCount);\n        ytapi.playlistFunctions.getVideosForPlaylist(playlist.playlistId).then(function (videos) {\n          var str = videos[num].title + '  https://www.youtube.com/watch?v=' + videos[num].videoId;\n          console.log(str);\n          cb(null, str);\n        });\n      }\n    });\n  });\n}\n\n// Twitter\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: process.env.CONSUMER_KEY,\n  consumer_secret: process.env.CONSUMER_SECRET,\n  access_token_key: process.env.ACCESS_TOKEN_KEY,\n  access_token_secret: process.env.ACCESS_TOKEN_SECRET,\n});\n\n// main\nexports.handler = function(event, context) {\n  getRandomPerfumeMV(function(err, data) {\n    if (err) context.fail(err);\n    else {\n      var params = {status: data};\n      client.post('statuses/update', params, function(error, result, response){\n        if (err) context.fail(err);\n        else context.succeed(result);\n      });\n    }\n  });\n}\n\n\n\u307e\u305f\u3001.env.js\u306b\u306fGOOGLE_API_KEY\u306b\u3064\u3044\u3066\u3082\u8ffd\u8a18\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u306e\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3067\u304d\u308c\u3070\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u5ff5\u306e\u305f\u3081\u3001\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u3082\u30c6\u30b9\u30c8\u5b9f\u884c\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\u554f\u984c\u306a\u3051\u308c\u3070\u3001\u3053\u308c\u3092\u5b9a\u671f\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306elambda\u306e\u30da\u30fc\u30b8\u3067Event Sources\u306e\u30bf\u30d6\u3092\u8868\u793a\u3057\u3001add event source\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u6b21\u306e\u753b\u9762\u3067\u306fScheduled Event\u3067\uff11\u6642\u9593\u304a\u304d\u306b\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u3044\u3044\u611f\u3058\u306b\u3067\u304d\u3066\u307e\u3059\uff01\n\n1\u6642\u9593\u304a\u304d\u3060\u3068\u3046\u3056\u304b\u3063\u305f\u306e\u3067\u30011\u65e5\u304a\u304d\u3067\u5c11\u3057\u7f6e\u3044\u3066\u304a\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3002\nAWS Lambda\u306b\u306f\u6628\u5e74\u3001\u30b3\u30fc\u30c9\u3092cron\u306e\u3088\u3046\u306b\u5b9a\u671f\u5b9f\u884c\u3067\u304d\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u6a5f\u80fd\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u3063\u3066\u3053\u3068\u306f\u7c21\u5358\u306bTwitter\u306eBot\u304c\u3067\u304d\u308b!\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u8a66\u3057\u306bYoutbe\u306b\u3042\u308bPefume\u306eMV\u3092\u5b9a\u671f\u30dd\u30b9\u30c8\u3059\u308bTwitter bot\u3092\u4f5c\u6210\u3057\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n# \u4f5c\u6210\u3057\u305f\u3082\u306e\n\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306b\u304a\u304d\u307e\u3057\u305f\u3002\n\n[toshihirock/lambda-tweet-perfume](https://github.com/toshihirock/lambda-tweet-perfume)\n\n\u5225\u9014\u3001Twitter\u53ca\u3073Google\u306eAPI Key\u306f\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4f5c\u6210\u3057\u305fbot\u306f\u3053\u3061\u3089\u3067\u3059\u3002\u73fe\u5728\u30011\u65e5\u306b1\u56de\u30e9\u30f3\u30c0\u30e0\u3067\u516c\u5f0f\u306eMV\u3092\u4e00\u3064\u30dd\u30b9\u30c8\u3057\u307e\u3059\u3002\u3042\u3093\u307e\u308a\u9762\u767d\u304f\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u9069\u5f53\u306b\u6d88\u3057\u307e\u3059\u3002\u3002\u3002\n\n[Twitter perfume_random_mv](https://twitter.com/random_pefume)\n\n\n# \u30c4\u30a4\u30fc\u30c8\u306e\u65b9\u6cd5\u3092\u78ba\u8a8d\u3059\u308b\n\nTwitter\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\n[Developers/Documentation/Overview](https://dev.twitter.com/overview/documentation)\n\n\u8272\u3005\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u3071\u3063\u3068\u898b\u3067\u5206\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3059\u304c\u3001\u30c4\u30a4\u30fc\u30c8\u3092\u3059\u308b\u306b\u306fREST API\u3092\u4f7f\u3063\u3066\u5b9f\u65bd\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\u307e\u305f\u3001\u8a8d\u8a3c\u306b\u306fOAuth2\u304bAPI Key\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u30c4\u30a4\u30fc\u30c8\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306eAPI\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\n[POST statuses/update](https://dev.twitter.com/rest/reference/post/statuses/update)\n\n# Twitter App\u767b\u9332\u3092\u884c\u3046\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001REST API\u3092\u4f7f\u3046\u306b\u306f\u8a8d\u8a3c\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u3001\u307e\u305a\u306fTwitter\u306bapp\u306e\u767b\u9332\u304c\u5fc5\u8981\u306a\u306e\u3088\u3046\u306a\u306e\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u30ea\u30f3\u30af\u304b\u3089\u9077\u79fb\u3057\u307e\u3059\u3002\n\n[Twitter Apps](https://apps.twitter.com/)\n\n\n![Screen Shot 2016-01-11 at 8.50.15 AM.png](https://qiita-image-store.s3.amazonaws.com/0/20193/28a8a2c0-f015-f12d-5ca6-dc7df855db0e.png \"Screen Shot 2016-01-11 at 8.50.15 AM.png\")\n\n\u4e0a\u8a18\u753b\u9762\u306e **Create New App** \u3092\u9078\u629e\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3059\u3002\n\n\n\n![Screen Shot 2016-01-11 at 8.51.48 AM.png](https://qiita-image-store.s3.amazonaws.com/0/20193/2e792282-8170-e959-5492-c1fe991e371f.png \"Screen Shot 2016-01-11 at 8.51.48 AM.png\")\n\n\n![Screen Shot 2016-01-11 at 8.57.08 AM.png](https://qiita-image-store.s3.amazonaws.com/0/20193/a2272153-c9e2-8221-2b49-6d68634ae90e.png \"Screen Shot 2016-01-11 at 8.57.08 AM.png\")\n\nName,Description,Website\u3092\u9069\u5f53\u306b\u5165\u308c\u307e\u3059\u3002\n\u81ea\u5206\u306e\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002\n\n+ Name->tweet-aws-lambda\n+ Description->tweet on AWS Lambda\n+ Website->https://github.com/toshihirock\uff08\u4f55\u3067\u3082\u826f\u3044)\n\n\u5165\u529b\u5f8c\u3001\u753b\u9762\u4e0b\u90e8\u306b\u3042\u308b **Yes,I agree** \u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u898f\u7d04\u306b\u540c\u610f\u3057\u3001 **Create your Twitter** \u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u4f5c\u6210\u5f8c\u3001\u8868\u793a\u3055\u308c\u308b\u753b\u9762\u3067 **Key and Access Tokens** \u30bf\u30d6\u3092\u8a2d\u5b9a\u3057\u3001\u753b\u9762\u4e0b\u90e8\u3092\u78ba\u8a8d\u3059\u308b\u3068REST API\u5229\u7528\u6642\u306b\u5fc5\u8981\u306aAccess Token\u304c\u306a\u3044\u306e\u3067\u3001 **Create my access token** \u3092\u9078\u629e\u3057\u3001\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n![Screen Shot 2016-01-11 at 9.09.24 AM.png](https://qiita-image-store.s3.amazonaws.com/0/20193/9fbad7f1-59ec-7329-1bff-9bc40edc6ca6.png \"Screen Shot 2016-01-11 at 9.09.24 AM.png\")\n\n\n\u4f5c\u6210\u5f8c\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\n# cURL\u3067\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u307f\u308b\n\n\u4e00\u5fdc\u3001\u4f5c\u6210\u3057\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u5229\u7528\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001curl\u3067\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n[GET users/show](https://dev.twitter.com/rest/reference/get/users/show)\n\n\u4e0a\u8a18\u30da\u30fc\u30b8\u306e\u771f\u3093\u4e2d\u3050\u3089\u3044\u306bOAuth Signature Generator\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u90e8\u5206\u304c\u3042\u308a\u307e\u3059\u3002\n\n![Screen Shot 2016-01-11 at 9.44.45 AM.png](https://qiita-image-store.s3.amazonaws.com/0/20193/1e75a160-3cff-620c-b7c9-6cd74711a21c.png \"Screen Shot 2016-01-11 at 9.44.45 AM.png\")\n\n\u4e0a\u8a18\u30bb\u30ec\u30af\u30c8\u30dc\u30c3\u30af\u30b9\u3067\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u540d\u3092\u9078\u629e\u3059\u308b\u3068\u30da\u30fc\u30b8\u304c\u9077\u79fb\u3057\u307e\u3059\u3002\u9078\u629e\u3057\u3066\u3044\u308bAPI\u3092\u53e9\u304f\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3092\u751f\u6210\u3057\u3066\u304f\u308c\u307e\u3059(\u4eca\u56de\u306f\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u53d6\u5f97\u7528API)\n\nRequest query:\u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092 **status=hello from cURL** \u3068\u3044\u3046\u611f\u3058\u3067\u30c4\u30a4\u30fc\u30c8\u3057\u305f\u3044\u5185\u5bb9\u306b\u5909\u66f4\u3057\u3001 **Get OAuth Signature** \u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u3059\u308b\u3068\u4e0b\u90e8\u306b **cURL command** \u3068\u3044\u3046\u90e8\u5206\u3067\u8a2d\u5b9a\u3057\u305f\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30b3\u30d4\u30da\u3057\u3066terminal\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$curl --request 'POST' 'https://api.twitter.com/1.1/statuses/update.json' --data 'status=hello+from+cURL' --header 'Authorization: OAuth oauth_consumer_key=\"xxxx\", oauth_nonce=\"xxxxxx\", oauth_signature=\"xxxxxx\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"1452474781\", oauth_token=\"xxxx\", oauth_version=\"1.0\"' --verbose\n```\n\n\u6210\u529f\u3059\u308c\u3070\u30c4\u30a4\u30fc\u30c8\u304c\u51fa\u6765\u3066\u3044\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# Node.js\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u307f\u308b\n\n\u6b21\u306bNode.js\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u4e8b\u524d\u306b\u5148\u307b\u3069\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b\u5229\u7528\u3057\u305f\u3001\u4ee5\u4e0b\u306e\u5024\u306b\u3064\u3044\u3066\u30e1\u30e2\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002(Twitter Apps\u30da\u30fc\u30b8\u3067\u78ba\u8a8d\u53ef\u80fd)\n\n+ Consumer Key (API Key)\n+ Consumer Secret (API Secret)\n+ Access Token\n+ Access Token Secret\n\n\nAPI\u3092\u4f7f\u3063\u3066\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u65e2\u306b\u30e9\u30c3\u30d1\u30fc\u306e\u826f\u3055\u305d\u3046\u306anpm\u304c\u3042\u3063\u305f\u306e\u3067\u4eca\u56de\u306f\u3053\u3061\u3089\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n[npm twitter](https://www.npmjs.com/package/twitter)\n\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$mkdir node-tweet\n$cd node-tweet\n$npm install twitter\n```\n\n\u8a66\u3057\u306b\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n**toshihiock** \u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u306f\u9069\u5b9c\u81ea\u5206\u306etwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e @hoge \u306e\u90e8\u5206\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u307e\u305f\u3001\u5404\u30ad\u30fc\u3082\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```lang:index.js\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: 'xxx',\n  consumer_secret: 'xxxx',\n  access_token_key: 'xxxx',\n  access_token_secret: 'xxxx\n});\n\nvar params = {screen_name: 'toshihirock'};\nclient.get('users/show', params, function(error, result, response){\n  if (!error) {\n    console.log(result);\n    console.log(response);\n  } else {\n    console.log(error);\n  }\n});\n```\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$node index.js\n```\n\n\u53d6\u5f97\u304c\u6210\u529f\u3059\u308c\u3070console.log\u3067\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30a8\u30e9\u30fc\u306e\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306e\u5185\u5bb9\u3082\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u6b21\u306b\u30c4\u30a4\u30fc\u30c8\u3092\u540c\u3058\u8981\u9818\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\u306a\u304a\u3001\u30c4\u30a4\u30fc\u30c8\u306fGET\u3067\u306f\u306a\u304f\u3001POST\u306a\u306e\u3067 **client.post** \u3068\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u70b9\u306f\u6ce8\u610f\u3067\u3059\u3002\n\n```lang:index.js\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: 'xxx',\n  consumer_secret: 'xxxx',\n  access_token_key: 'xxxx',\n  access_token_secret: 'xxxx\n});\n\nvar params = {status: 'hello from Node!'};\nclient.post('statuses/update', params, function(error, result, response){\n  if (!error) {\n    console.log(result);\n  } else {\n    console.log(error);\n  }\n});\n\n```\n\n\u540c\u3058\u3088\u3046\u306b\u5b9f\u884c\u3057\u3001 **hello from Node!** \u3068\u30c4\u30a4\u30fc\u30c8\u51fa\u6765\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059!\n\n# \u30ad\u30fc\u60c5\u5831\u3092\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u3059\u308b\n\nTwitter\u306e\u30ad\u30fc\u60c5\u5831\u304c\u30b3\u30fc\u30c9\u306b\u76f4\u66f8\u304d\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u307e\u307eGitHub\u306a\u3069\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30ad\u30fc\u60c5\u5831\u3092\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3057\u3001\u30b3\u30fc\u30c9\u3067\u306f\u305d\u306e\u5185\u5bb9\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u30ad\u30fc\u60c5\u5831\u306e\u30d5\u30a1\u30a4\u30eb\u306fGitHub\u3078\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u4e0a\u8a18\u3092\u7c21\u7565\u5316\u3059\u308b\u305f\u3081\u306bdotenv\u3068\u3044\u3046npm\u3092\u4f7f\u3044\u3057\u307e\u3059\u3002\n\n[motdotla/dotenv](https://github.com/motdotla/dotenv)\n\n```\n$npm install dotenv\n```\n\n\u6700\u521d\u306b`.env`\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u3053\u3061\u3089\u306b\u30ad\u30fc\u60c5\u5831\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n```lang:.env\nCONSUMER_KEY=xxx\nCONSUMER_SECRET=xxxx\nACCESS_TOKEN_KEY=xxxx\nACCESS_TOKEN_SECRET=xxxx\n```\n\n\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u78ba\u8a8d\u306e\u30b3\u30fc\u30c9\u3092.env\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u3093\u3067\u4f7f\u3046\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```\nrequire('dotenv').load();\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: process.env.CONSUMER_KEY,\n  consumer_secret: process.env.CONSUMER_SECRET,\n  access_token_key: process.env.ACCESS_TOKEN_KEY,\n  access_token_secret: process.env.ACCESS_TOKEN_SECRET,\n});\n\nvar params = {screen_name: 'toshihirock'};\nclient.get('users/show', params, function(error, result, response){\n  if (!error) {\n    console.log(result);\n    console.log(response);\n  } else {\n    console.log(error);\n  }\n});\n```\n\n\u3053\u308c\u3067\u3046\u307e\u304f\u5b9f\u884c\u3067\u304d\u308c\u3070.env\u30d5\u30a1\u30a4\u30eb\u3068\u306e\u9023\u643a\u306f\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u307e\u305f\u3001`.gitignore`\u3092\u4f5c\u6210\u3057\u3001\u30c9\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u53ca\u3073node_modules\u3092git\u7ba1\u7406\u304b\u3089\u7121\u8996\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```lang:.gitignore\n/.*\nnode_modules/\n```\n\n\u78ba\u8a8d\u3057\u307e\u3059\u3002index.js\u306e\u307f\u304cgit\u306e\u7ba1\u7406\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\n\n```bash\n$git status\nOn branch master\n\nInitial commit\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\n\tindex.js\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n```\n\n# AWS Lambda\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3059\u308b\n\n\u6b21\u306bAWS\u306eLambda\u3092\u4f7f\u3063\u3066\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u3068\u8a00\u3063\u3066\u3082\u5c11\u3057\u30b3\u30fc\u30c9\u3060\u3051\u3092\u5909\u3048\u308b\u3060\u3051\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3002\n\n```lang:index.js\nrequire('dotenv').load();\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: process.env.CONSUMER_KEY,\n  consumer_secret: process.env.CONSUMER_SECRET,\n  access_token_key: process.env.ACCESS_TOKEN_KEY,\n  access_token_secret: process.env.ACCESS_TOKEN_SECRET,\n});\n\nexports.handler = function(event, context) {\n  var params = {status: 'hello from Lambda!'};\n  client.post('statuses/update', params, function(error, result, response){\n    if (!error) {\n      context.succeed(result);\n    } else {\n      context.fail(error);\n    }\n  });\n}\n```\n\n\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001\u5ff5\u306e\u305f\u3081\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u304b\u3089\u3082\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u306a\u3055\u305b\u9802\u304d\u307e\u3057\u305f\u3002\n\n[AWS Lambda\u306e\u305f\u3081\u306e\u95a2\u6570\u306e\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u3068\u30c6\u30b9\u30c8](http://qiita.com/imaifactory/items/092e32b4fc0f69a94061)\n\n\n\n```localExec.js\n// dirver\nvar event = {};\nvar context = {\n  invokeid: 'invokeid',\n  succeed: function(result) {\n    console.log('success');\n    console.log(result);\n    return;\n  },\n\n  fail: function(err) {\n    console.log('fail');\n    console.log(err);\n    return;\n  }\n}\n\n// exec\nvar lambda = require('./index');\nlambda.handler(event, context);\n```\n\n\u4ee5\u4e0b\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$node localExec.js\n```\n\n\u52d5\u4f5c\u306e\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u3001lambda\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u4e8b\u524d\u306b **tweet-lambda** \u3068\u3044\u3046function\u3092\u4f5c\u6210\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n# \u30d5\u30a1\u30a4\u30eb\u7fa4\u3092zip\u306b\u307e\u3068\u3081\u308b\n$zip -r tweet-lambda index.js node_modules .env\n\n# zip\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n$aws lambda update-function-code --function-name tweet-lambda --zip-file fileb://./tweet-lambda.zip\n```\n\n\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306a\u3069\u304b\u3089\u30c6\u30b9\u30c8\u5b9f\u884c\u3057\u3001\u30c4\u30a4\u30fc\u30c8\u3067\u304d\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059!\n\n\n# YoutubeAPI\u3068\u9023\u643a\u3057\u3066Twitter bot\u3092\u4f5c\u3063\u3066\u307f\u308b\n\n\u666e\u901a\u306b\u30c4\u30a4\u30fc\u30c8\u3057\u3066\u3082\u9762\u767d\u304f\u306a\u3044\u306e\u3067bot\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001Perfume\u306e\u516c\u5f0fMV\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u30c4\u30a4\u30fc\u30c8\u3059\u308b\u3082\u306e\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nYoutbeAPI\u3092\u4f7f\u3063\u3066\u30e9\u30f3\u30c0\u30e0\u306bPlaylist\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001Youtbe\u7528\u306e\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3059\u308b\u3082\u306e\u3092\u30c6\u30b9\u30c8\u3067\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u30e1\u30e2\u3067\u3059\u3002\n\n+ YoutubeAPI\u3092\u4f7f\u3046\u305f\u3081\u306b\u306fAPIKEY\u304c\u5fc5\u8981\u306a\u306e\u3067\u53d6\u5f97\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u3061\u3089\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f [Node\u3067YouTube Search API\u4f7f\u3063\u3066\u307f\u305f](http://www.tejitak.com/blog/?p=1314)\n+ YoutubeAPI\u306fnode-youtubeAPI-simplifier\u3068\u3044\u3046\u30b7\u30f3\u30d7\u30eb\u306anpm\u3092\u5229\u7528 [Haidy777/node-youtubeAPI-simplifier](https://github.com/Haidy777/node-youtubeAPI-simplifier)\n\n\n\u6e96\u5099\u304c\u3067\u304d\u305f\u3089\u4f5c\u6210\u3057\u307e\u3059\u3002\u307e\u305a\u306fYoutube\u3068\u306e\u9023\u643a\u306e\u307f\u884c\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002Pefume\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u306e\u30d7\u30ec\u30a4\u30ea\u30b9\u30c8\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3001\u305d\u306e\u4e2d\u306eMV\u306e\u307f\u306e\u30ea\u30b9\u30c8\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u3067\u4e00\u3064\u306e\u60c5\u5831\u3092pick up\u3059\u308b\u5f62\u3067\u3059\u3002\n\n```lang:.env\nGOOGLE_API_KEY=xxxx\n```\n\n```lang:youtube.js\nrequire('dotenv').load();\nvar ytapi = require('node-youtubeapi-simplifier');\nytapi.setup(process.env.GOOGLE_API_KEY);\n\nfunction getRandomInt(min, max) {\n  return Math.floor( Math.random() * (max - min + 1) ) + min;\n}\n\n// get PerfumeMV randomly\nfunction getRandomPerfumeMV(cb) {\n  ytapi.playlistFunctions.getPlaylistsForUser('Perfume').then(function (data) {\n    data.forEach(function(playlist) {\n      //console.log(playlist.title)\n      if(playlist.title === '\uff3bPerfume\uff3d MUSIC VIDEOS') {\n        //console.log(playlist.playlistId)\n        //console.log(playlist.videoCount)\n        var num = getRandomInt(0, playlist.videoCount);\n        ytapi.playlistFunctions.getVideosForPlaylist(playlist.playlistId).then(function (videos) {\n          var str = videos[num].title + '  https://www.youtube.com/watch?v=' + videos[num].videoId;\n          console.log(str);\n          cb(null, str);\n        });\n      }\n    });\n  });\n}\n\n// main\ngetRandomPerfumeMV(function(err, data) {\n  console.log(data);\n});\n```\n\n\n\u4e0a\u8a18\u3067\u52d5\u4f5c\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u30c4\u30a4\u30fc\u30c8\u3059\u308b\u7528\u306b\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u3068\u30de\u30fc\u30b8\u3057\u307e\u3059\u3002\uff08\u672c\u5f53\u306f\u7dba\u9e97\u306b\u30d5\u30a1\u30a4\u30eb\u5206\u5272\u3057\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u904a\u3073\u306a\u306e\u3067\u306a\u306e\u3067\u3002\u3002\uff09\n\n```lang:index.js\n// util\nrequire('dotenv').load();\n\nfunction getRandomInt(min, max) {\n  return Math.floor( Math.random() * (max - min + 1) ) + min;\n}\n\n// Youtube\nvar ytapi = require('node-youtubeapi-simplifier');\nytapi.setup(process.env.GOOGLE_API_KEY);\n\nfunction getRandomPerfumeMV(cb) {\n  ytapi.playlistFunctions.getPlaylistsForUser('Perfume').then(function (data) {\n    data.forEach(function(playlist) {\n      //console.log(playlist.title)\n      if(playlist.title === '\uff3bPerfume\uff3d MUSIC VIDEOS') {\n        //console.log(playlist.playlistId)\n        //console.log(playlist.videoCount)\n        var num = getRandomInt(0, playlist.videoCount);\n        ytapi.playlistFunctions.getVideosForPlaylist(playlist.playlistId).then(function (videos) {\n          var str = videos[num].title + '  https://www.youtube.com/watch?v=' + videos[num].videoId;\n          console.log(str);\n          cb(null, str);\n        });\n      }\n    });\n  });\n}\n\n// Twitter\nvar Twitter = require('twitter');\n\nvar client = new Twitter({\n  consumer_key: process.env.CONSUMER_KEY,\n  consumer_secret: process.env.CONSUMER_SECRET,\n  access_token_key: process.env.ACCESS_TOKEN_KEY,\n  access_token_secret: process.env.ACCESS_TOKEN_SECRET,\n});\n\n// main\nexports.handler = function(event, context) {\n  getRandomPerfumeMV(function(err, data) {\n    if (err) context.fail(err);\n    else {\n      var params = {status: data};\n      client.post('statuses/update', params, function(error, result, response){\n        if (err) context.fail(err);\n        else context.succeed(result);\n      });\n    }\n  });\n}\n```\n\n\u307e\u305f\u3001`.env.js`\u306b\u306fGOOGLE_API_KEY\u306b\u3064\u3044\u3066\u3082\u8ffd\u8a18\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u306e\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3067\u304d\u308c\u3070\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n\u5ff5\u306e\u305f\u3081\u3001\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u3082\u30c6\u30b9\u30c8\u5b9f\u884c\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u554f\u984c\u306a\u3051\u308c\u3070\u3001\u3053\u308c\u3092\u5b9a\u671f\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306elambda\u306e\u30da\u30fc\u30b8\u3067Event Sources\u306e\u30bf\u30d6\u3092\u8868\u793a\u3057\u3001add event source\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u6b21\u306e\u753b\u9762\u3067\u306fScheduled Event\u3067\uff11\u6642\u9593\u304a\u304d\u306b\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3059\u3002\n\n![Screen Shot 2016-01-11 at 7.14.11 PM.png](https://qiita-image-store.s3.amazonaws.com/0/20193/a93949a1-ec49-9ed8-2bf1-a8f92be6565b.png \"Screen Shot 2016-01-11 at 7.14.11 PM.png\")\n\n\n\u3044\u3044\u611f\u3058\u306b\u3067\u304d\u3066\u307e\u3059\uff01\n\n![Screen Shot 2016-01-12 at 6.50.03 AM.png](https://qiita-image-store.s3.amazonaws.com/0/20193/1b7af0b4-f9f4-23bc-718f-29ed63dbfce7.png \"Screen Shot 2016-01-12 at 6.50.03 AM.png\")\n\n1\u6642\u9593\u304a\u304d\u3060\u3068\u3046\u3056\u304b\u3063\u305f\u306e\u3067\u30011\u65e5\u304a\u304d\u3067\u5c11\u3057\u7f6e\u3044\u3066\u304a\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3002\n\n", "tags": ["AWS", "lambda", "Node.js", "Twitter", "YouTube"]}