{"context": "package hello.javax.mail;\n\nimport java.io.File;\nimport java.util.Date;\nimport java.util.Properties;\n\nimport javax.activation.DataHandler;\nimport javax.activation.FileDataSource;\nimport javax.mail.Message;\nimport javax.mail.Multipart;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeBodyPart;\nimport javax.mail.internet.MimeMessage;\nimport javax.mail.internet.MimeMultipart;\nimport javax.mail.internet.MimeUtility;\n\npublic class HelloSendFile {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        try {\n            Properties props = System.getProperties();\n            props.put(\"mail.smtp.host\", \"localhost\");\n            props.put(\"mail.smtp.auth\",\"true\");\n            Session session = Session.getDefaultInstance(props, null);\n            MimeMessage mimeMessage = new MimeMessage(session);\n            mimeMessage.setFrom(new InternetAddress(\"aaa@bbb.com\", \"Taro Yamada\", \"iso-2022-jp\"));\n            mimeMessage.setRecipients(Message.RecipientType.TO, \"xxx@yyy.com\");\n            mimeMessage.setSubject(\"File Attachment\", \"iso-2022-jp\");\n\n            MimeBodyPart mbp1 = new MimeBodyPart();\n            mbp1.setText(\"MimeBodyPart 1\", \"iso-2022-jp\");\n\n            MimeBodyPart mbp2 = new MimeBodyPart();\n            File attachmentFile = new File(\"report.csv\");\n            FileDataSource fds = new FileDataSource(attachmentFile);\n            mbp2.setDataHandler(new DataHandler(fds));\n            mbp2.setFileName(MimeUtility.encodeWord(fds.getName()));\n\n            Multipart mp = new MimeMultipart();\n            mp.addBodyPart(mbp1);\n            mp.addBodyPart(mbp2);\n\n            mimeMessage.setContent(mp);\n\n            mimeMessage.setSentDate(new Date());\n\n            Transport tp = session.getTransport(\"smtp\");\n            tp.connect(null, \"user\", \"user\");\n\n            tp.sendMessage(mimeMessage, mimeMessage.getFrom());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n\n\n\n```java\npackage hello.javax.mail;\n\nimport java.io.File;\nimport java.util.Date;\nimport java.util.Properties;\n\nimport javax.activation.DataHandler;\nimport javax.activation.FileDataSource;\nimport javax.mail.Message;\nimport javax.mail.Multipart;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeBodyPart;\nimport javax.mail.internet.MimeMessage;\nimport javax.mail.internet.MimeMultipart;\nimport javax.mail.internet.MimeUtility;\n\npublic class HelloSendFile {\n\n\t/**\n\t * @param args\n\t */\n\tpublic static void main(String[] args) {\n\t\ttry {\n\t\t\tProperties props = System.getProperties();\n\t\t\tprops.put(\"mail.smtp.host\", \"localhost\");\n\t\t\tprops.put(\"mail.smtp.auth\",\"true\");\n\t\t\tSession session = Session.getDefaultInstance(props, null);\n\t\t\tMimeMessage mimeMessage = new MimeMessage(session);\n\t\t\tmimeMessage.setFrom(new InternetAddress(\"aaa@bbb.com\", \"Taro Yamada\", \"iso-2022-jp\"));\n\t\t\tmimeMessage.setRecipients(Message.RecipientType.TO, \"xxx@yyy.com\");\n\t\t\tmimeMessage.setSubject(\"File Attachment\", \"iso-2022-jp\");\n\t\t\t\n\t\t\tMimeBodyPart mbp1 = new MimeBodyPart();\n\t\t\tmbp1.setText(\"MimeBodyPart 1\", \"iso-2022-jp\");\n\t\t\t\n\t\t\tMimeBodyPart mbp2 = new MimeBodyPart();\n\t\t\tFile attachmentFile = new File(\"report.csv\");\n\t\t\tFileDataSource fds = new FileDataSource(attachmentFile);\n\t\t\tmbp2.setDataHandler(new DataHandler(fds));\n\t\t\tmbp2.setFileName(MimeUtility.encodeWord(fds.getName()));\n\n\t\t\tMultipart mp = new MimeMultipart();\n\t\t\tmp.addBodyPart(mbp1);\n\t\t\tmp.addBodyPart(mbp2);\n\n\t\t\tmimeMessage.setContent(mp);\n\n\t\t\tmimeMessage.setSentDate(new Date());\n\n\t\t\tTransport tp = session.getTransport(\"smtp\");\n\t\t\ttp.connect(null, \"user\", \"user\");\n\n\t\t\ttp.sendMessage(mimeMessage, mimeMessage.getFrom());\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\n\t}\n\n}\n\n```\n", "tags": ["mail", "Java", "javamail"]}