{"tags": ["struts22.3.20", "spring-security4.0.0.RC1"], "context": " More than 1 year has passed since last update.\n\n\u8a8d\u8a3c\u6a5f\u80fd\u3092SpringSecurity\u306b\u4efb\u305b\u308b\nStruts2\u306f\u7279\u306b\u8a8d\u8a3c\u7528\u306e\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u6a19\u6e96\u306e\u8a8d\u8a3c(JAAS)\u3092\u4f7f\u3044\u30ed\u30b0\u30a4\u30f3/\u30ed\u30b0\u30a2\u30a6\u30c8\u3092\u69cb\u7bc9\u3067\u304d\u307e\u3059\u304c\u3001\u305d\u308c\u3088\u308a\u3082\u9ad8\u5ea6\u306a\u6a5f\u69cb\u3092\u5099\u3048\u308bSpringSecurity\u3092\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3001\u8a8d\u8a3c\u306a\u3089\u3073\u306b\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092SpringSecurity\u306b\u4efb\u305b\u3001\u30ed\u30b0\u30a4\u30f3\u5f8c\u3084\u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306e\u8ffd\u52a0\u51e6\u7406\u3092Struts2\u3067\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u5fc5\u8981\u306ajar\u30d5\u30a1\u30a4\u30eb\u305f\u3061(maven\u3067\u8a2d\u5b9a)\n\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u306fSpringSecurity-4.0.0.CI\u7248\u306e\u3082\u306e\u3067\u3059\u304c\u3001\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u5f8c\u306fCI\u3092RELEASE\u306b\u7f6e\u304d\u63db\u3048\u308b\u3060\u3051\u3067\u3059\u3002\n\npom.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>archetype.group.id</groupId>\n    <artifactId>artifactId</artifactId>\n    <packaging>war</packaging>\n    <version>0.0.1-SNAPSHOT</version>\n    <properties>\n        <java.version>1.7</java.version>\n        <spring-security.version>4.0.0.CI-SNAPSHOT</spring-security.version>\n        <struts2.version>2.3.20</struts2.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.apache.struts</groupId>\n            <artifactId>struts2-core</artifactId>\n            <version>${struts2.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.struts</groupId>\n            <artifactId>struts2-convention-plugin</artifactId>\n            <version>${struts2.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.security</groupId>\n            <artifactId>spring-security-web</artifactId>\n            <version>${spring-security.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.security</groupId>\n            <artifactId>spring-security-config</artifactId>\n            <version>${spring-security.version}</version>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <configuration>\n                    <encoding>UTF-8</encoding>\n                    <source>${java.version}</source>\n                    <target>${java.version}</target>\n                </configuration>\n            </plugin>\n            <plugin>\n                <artifactId>maven-war-plugin</artifactId>\n                <configuration>\n                    <failOnMissingWebXml>false</failOnMissingWebXml>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n    <name>appname</name>\n    <url>http://your.domain/appname</url>\n    <description>descriptions....</description>\n</project>\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\u30fb\u8ffd\u52a0\nSpringSecurity\u306e\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306exml\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\nweb.xml\napplicationContext-security.xml(\u30d5\u30a1\u30a4\u30eb\u540d\u306fweb.xml\u306b\u8a18\u8f09\u3057\u305f\u3082\u306e)\n\n\nweb.xml\n\nweb.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app id=\"app_id\" version=\"3.0\"\n    xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\">\n    <display-name>appname</display-name>\n\n    <context-param>\n        <param-name>contextConfigLocation</param-name>\n        <param-value>classpath:spring/applicationContext.xml,classpath:spring/applicationContext-*.xml</param-value>\n    </context-param>\n\n    <filter>\n        <filter-name>struts2</filter-name>\n        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>\n    </filter>\n    <filter>\n        <filter-name>springSecurityFilterChain</filter-name>\n        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>\n    </filter>\n\n    <filter-mapping>\n        <filter-name>springSecurityFilterChain</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    <filter-mapping>\n        <filter-name>struts2</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n\n    <listener>\n        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n    </listener>\n    <listener>\n        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>\n    </listener>\n</web-app>\n\n\n\napplicationContext-security.xml\n\u3053\u306e\u4f8b\u3067\u306f\u5225\u9014 Spring\u306e\u5b9a\u7fa9\u3067\u3001JDBC\u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092 dataSource\u306e\u540d\u524d\u3067\u5b9a\u7fa9\u304c\u5fc5\u8981\u3067\u3059\u3002web.xml\u306b\u3066\u3001\u914d\u7f6e\u540d\u3092classpath:spring/applicationContext.xml,classpath:spring/applicationContext-*.xml \u3068\u5ba3\u8a00\u3057\u3066\u3044\u307e\u3059\u3002\u914d\u7f6e\u5834\u6240\u306f\u304a\u597d\u307f\u3067\u3069\u3046\u305e\u3002\n\u79c1\u306e\u5834\u5408\u306fspring\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306b applicationContext-security.xml \u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\napplicationContext-security.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans:beans\n  xmlns:sec=\"http://www.springframework.org/schema/security\"\n  xmlns:beans=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n  http://www.springframework.org/schema/security\n  http://www.springframework.org/schema/security/spring-security.xsd\">\n\n  <sec:http auto-config='true'>\n    <!-- CSRF\u56de\u907f\u30c1\u30a7\u30c3\u30af\u3092\u6709\u52b9 -->\n    <sec:csrf/>\n\n    <!-- \u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u3057\u306a\u3044URL\u3092\u5b9a\u7fa9 -->\n    <sec:intercept-url pattern=\"/login*\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/css/**\" access=\"permitAll\" />\n    <sec:intercept-url pattern=\"/fonts/**\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/images/**\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/js/**\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/templates/**\" access=\"permitAll\"/>\n\n    <!-- \u30ed\u30fc\u30eb\u306b ROLE_ADMIN \u3092\u6301\u3064\u30e6\u30fc\u30b6ID(USERNAME)\u306e\u307f\u30a2\u30af\u30bb\u30b9\u8a31\u53ef -->\n    <sec:intercept-url pattern=\"/*\" access=\"hasRole('ROLE_ADMIN')\" />\n\n    <!-- FORM\u8a8d\u8a3c\u306e\u632f\u308b\u821e\u3044 -->\n    <sec:form-login\n        login-page=\"/login.action\"\n        login-processing-url=\"/j_spring_security_check\"\n        username-parameter=\"j_username\"\n        password-parameter=\"j_password\"\n        authentication-failure-url=\"/loginFailure.action\" />\n\n    <!-- \u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u306e\u632f\u308b\u821e\u3044 -->\n    <sec:logout \n        logout-url=\"/logout\"\n        logout-success-url=\"/logout.action\"\n        invalidate-session=\"true\" />\n  </sec:http>\n\n  <!-- \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u7ba1\u7406 -->\n  <sec:authentication-manager alias=\"authManager\">\n    <sec:authentication-provider>\n      <sec:jdbc-user-service data-source-ref=\"dataSource\"\n        users-by-username-query=\"\n          SELECT\n            USERNAME\n          , PASSWORD\n          , ENABLED\n          FROM\n            USERTABLE\n          WHERE\n            USERNAME = ?\"\n        authorities-by-username-query=\"\n          SELECT\n            USERNAME \n          , AUTHORITY \n          FROM \n            ROLETABLE \n          WHERE \n            USERNAME = ?\"\n      />\n    </sec:authentication-provider>\n  </sec:authentication-manager>\n  <beans:bean \n    id=\"sessionRegistry\" \n    class=\"org.springframework.security.core.session.SessionRegistryImpl\" />\n</beans:beans>\n\n\n\u8a8d\u8a3c\u3059\u308b\u305f\u3081\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u5148\u306f\u3001<sec:authentication-manager alias=\"authManager\">\\\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306fSQL\u3092\u767a\u884c\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u554f\u3044\u5408\u308f\u305b\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306fSpring\u7ba1\u7406\u4e0b\u306b\u3042\u308b dataSource \u306e\u540d\u524d\u3067\u7ba1\u7406\u3055\u308c\u305fSpring-bean\u3067\u3059\u3002\ndataSource\u306e\u8a2d\u5b9a\u4f8b\u3092\u304a\u307e\u3051\u3067\u6b21\u306b\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\napplicationContext-dataSource.xml\nSpring\u7ba1\u7406\u4e0b\u3067dataSource\u3092\u4f5c\u308a\u307e\u3059\u3002\n\napplicationContext-dataSource.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:jee=\"http://www.springframework.org/schema/jee\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"\nhttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\nhttp://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\nhttp://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"\ndefault-autowire=\"byName\"\n>\n    <!-- Spring\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406\u30af\u30e9\u30b9 -->\n    <bean id=\"transactionManager\" \n          class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n        <property name=\"dataSource\"><ref bean=\"dataSource\"/></property>\n    </bean>\n\n    <!-- \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5b9a\u7fa9\u3067Spring\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5229\u7528\u3092\u5ba3\u8a00\u3059\u308b\u3002 -->\n    <tx:annotation-driven transaction-manager=\"transactionManager\"\n      proxy-target-class=\"true\" />\n\n    <!-- JNDI\u30eb\u30c3\u30af\u30a2\u30c3\u30d7 -->\n    <jee:jndi-lookup id=\"dataSource\" jndi-name=\"java:comp/env/jdbc/dbcon\"></jee:jndi-lookup>\n</beans>\n\n\n\u3053\u306e\u4f8b\u3067\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306e\u30bd\u30fc\u30b9\u3092Tomcat\u306a\u3069\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u62dd\u501f\u3057\u307e\u3059\u3002\u305d\u306e\u969b\u3001JNDI\u3067\u5b9a\u7fa9\u3057\u305f\u547d\u540d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u4f7f\u3046\u5834\u5408\u306b\u306f\u3001pom.xml\u306b\u3066\u5fc5\u8981\u306aSpring framework\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306f\u8ffd\u52a0\u4f8b\u3067\u3059\u3002\n\npom.xml(\u65ad\u7247)\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <artifactId>artifactId</artifactId>\n    <name>appname</name>\n    <properties>\n        <!-- \u3053\u3053\u304b\u3089\u8ffd\u52a0 -->\n        <spring.version>4.1.3.RELEASE</spring.version>\n        <!-- \u3053\u3053\u307e\u3067 -->\n    </properties>\n    <dependencies>\n        <!-- \u3053\u3053\u304b\u3089\u8ffd\u52a0 -->\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-core</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-web</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-beans</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-context</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-context-support</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-tx</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <!-- \u3053\u3053\u307e\u3067 -->\n    </dependencies>\n</project>\n\n\n# \u8a8d\u8a3c\u6a5f\u80fd\u3092SpringSecurity\u306b\u4efb\u305b\u308b\n\nStruts2\u306f\u7279\u306b\u8a8d\u8a3c\u7528\u306e\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u6a19\u6e96\u306e\u8a8d\u8a3c(JAAS)\u3092\u4f7f\u3044\u30ed\u30b0\u30a4\u30f3/\u30ed\u30b0\u30a2\u30a6\u30c8\u3092\u69cb\u7bc9\u3067\u304d\u307e\u3059\u304c\u3001\u305d\u308c\u3088\u308a\u3082\u9ad8\u5ea6\u306a\u6a5f\u69cb\u3092\u5099\u3048\u308bSpringSecurity\u3092\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3001\u8a8d\u8a3c\u306a\u3089\u3073\u306b\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092SpringSecurity\u306b\u4efb\u305b\u3001\u30ed\u30b0\u30a4\u30f3\u5f8c\u3084\u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306e\u8ffd\u52a0\u51e6\u7406\u3092Struts2\u3067\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n## \u5fc5\u8981\u306ajar\u30d5\u30a1\u30a4\u30eb\u305f\u3061(maven\u3067\u8a2d\u5b9a)\n\n\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u306fSpringSecurity-4.0.0.CI\u7248\u306e\u3082\u306e\u3067\u3059\u304c\u3001\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u5f8c\u306fCI\u3092RELEASE\u306b\u7f6e\u304d\u63db\u3048\u308b\u3060\u3051\u3067\u3059\u3002\n\n```xml:pom.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\t<modelVersion>4.0.0</modelVersion>\n\t<groupId>archetype.group.id</groupId>\n\t<artifactId>artifactId</artifactId>\n\t<packaging>war</packaging>\n\t<version>0.0.1-SNAPSHOT</version>\n\t<properties>\n\t\t<java.version>1.7</java.version>\n\t\t<spring-security.version>4.0.0.CI-SNAPSHOT</spring-security.version>\n\t\t<struts2.version>2.3.20</struts2.version>\n\t</properties>\n\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.apache.struts</groupId>\n\t\t\t<artifactId>struts2-core</artifactId>\n\t\t\t<version>${struts2.version}</version>\n\t\t</dependency>\n\t\t<dependency>\n \t\t\t<groupId>org.apache.struts</groupId>\n\t\t\t<artifactId>struts2-convention-plugin</artifactId>\n\t\t\t<version>${struts2.version}</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.security</groupId>\n\t\t\t<artifactId>spring-security-web</artifactId>\n\t\t\t<version>${spring-security.version}</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.security</groupId>\n\t\t\t<artifactId>spring-security-config</artifactId>\n\t\t\t<version>${spring-security.version}</version>\n\t\t</dependency>\n\t</dependencies>\n\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<artifactId>maven-compiler-plugin</artifactId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<encoding>UTF-8</encoding>\n\t\t\t\t\t<source>${java.version}</source>\n\t\t\t\t\t<target>${java.version}</target>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t\t<plugin>\n\t\t\t\t<artifactId>maven-war-plugin</artifactId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<failOnMissingWebXml>false</failOnMissingWebXml>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n\t<name>appname</name>\n\t<url>http://your.domain/appname</url>\n\t<description>descriptions....</description>\n</project>\n```\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\u30fb\u8ffd\u52a0\n\nSpringSecurity\u306e\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306exml\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n* web.xml\n* applicationContext-security.xml(\u30d5\u30a1\u30a4\u30eb\u540d\u306fweb.xml\u306b\u8a18\u8f09\u3057\u305f\u3082\u306e)\n\n## web.xml\n\n```xml:web.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app id=\"app_id\" version=\"3.0\"\n\txmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\">\n\t<display-name>appname</display-name>\n\n\t<context-param>\n\t\t<param-name>contextConfigLocation</param-name>\n\t\t<param-value>classpath:spring/applicationContext.xml,classpath:spring/applicationContext-*.xml</param-value>\n\t</context-param>\n\n\t<filter>\n\t\t<filter-name>struts2</filter-name>\n\t\t<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>\n\t</filter>\n\t<filter>\n\t\t<filter-name>springSecurityFilterChain</filter-name>\n\t\t<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>\n\t</filter>\n\n\t<filter-mapping>\n\t\t<filter-name>springSecurityFilterChain</filter-name>\n\t\t<url-pattern>/*</url-pattern>\n\t</filter-mapping>\n\t<filter-mapping>\n\t\t<filter-name>struts2</filter-name>\n\t\t<url-pattern>/*</url-pattern>\n\t</filter-mapping>\n\n\t<listener>\n\t\t<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n\t</listener>\n\t<listener>\n\t\t<listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>\n\t</listener>\n</web-app>\n```\n## applicationContext-security.xml\n\n\u3053\u306e\u4f8b\u3067\u306f\u5225\u9014 Spring\u306e\u5b9a\u7fa9\u3067\u3001JDBC\u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092 dataSource\u306e\u540d\u524d\u3067\u5b9a\u7fa9\u304c\u5fc5\u8981\u3067\u3059\u3002web.xml\u306b\u3066\u3001\u914d\u7f6e\u540d\u3092classpath:spring/applicationContext.xml,classpath:spring/applicationContext-*.xml \u3068\u5ba3\u8a00\u3057\u3066\u3044\u307e\u3059\u3002\u914d\u7f6e\u5834\u6240\u306f\u304a\u597d\u307f\u3067\u3069\u3046\u305e\u3002\n\n\u79c1\u306e\u5834\u5408\u306fspring\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306b applicationContext-security.xml \u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n```xml:applicationContext-security.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans:beans\n  xmlns:sec=\"http://www.springframework.org/schema/security\"\n  xmlns:beans=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n  http://www.springframework.org/schema/security\n  http://www.springframework.org/schema/security/spring-security.xsd\">\n\n  <sec:http auto-config='true'>\n    <!-- CSRF\u56de\u907f\u30c1\u30a7\u30c3\u30af\u3092\u6709\u52b9 -->\n    <sec:csrf/>\n\n    <!-- \u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u3057\u306a\u3044URL\u3092\u5b9a\u7fa9 -->\n    <sec:intercept-url pattern=\"/login*\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/css/**\" access=\"permitAll\" />\n    <sec:intercept-url pattern=\"/fonts/**\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/images/**\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/js/**\" access=\"permitAll\"/>\n    <sec:intercept-url pattern=\"/templates/**\" access=\"permitAll\"/>\n\n    <!-- \u30ed\u30fc\u30eb\u306b ROLE_ADMIN \u3092\u6301\u3064\u30e6\u30fc\u30b6ID(USERNAME)\u306e\u307f\u30a2\u30af\u30bb\u30b9\u8a31\u53ef -->\n    <sec:intercept-url pattern=\"/*\" access=\"hasRole('ROLE_ADMIN')\" />\n\n    <!-- FORM\u8a8d\u8a3c\u306e\u632f\u308b\u821e\u3044 -->\n    <sec:form-login\n        login-page=\"/login.action\"\n        login-processing-url=\"/j_spring_security_check\"\n        username-parameter=\"j_username\"\n        password-parameter=\"j_password\"\n        authentication-failure-url=\"/loginFailure.action\" />\n\n    <!-- \u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u306e\u632f\u308b\u821e\u3044 -->\n    <sec:logout \n        logout-url=\"/logout\"\n        logout-success-url=\"/logout.action\"\n        invalidate-session=\"true\" />\n  </sec:http>\n\n  <!-- \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u7ba1\u7406 -->\n  <sec:authentication-manager alias=\"authManager\">\n    <sec:authentication-provider>\n      <sec:jdbc-user-service data-source-ref=\"dataSource\"\n        users-by-username-query=\"\n          SELECT\n            USERNAME\n          , PASSWORD\n          , ENABLED\n          FROM\n            USERTABLE\n          WHERE\n            USERNAME = ?\"\n        authorities-by-username-query=\"\n          SELECT\n            USERNAME \n          , AUTHORITY \n          FROM \n            ROLETABLE \n          WHERE \n            USERNAME = ?\"\n      />\n    </sec:authentication-provider>\n  </sec:authentication-manager>\n  <beans:bean \n    id=\"sessionRegistry\" \n    class=\"org.springframework.security.core.session.SessionRegistryImpl\" />\n</beans:beans>\n```\n\n\u8a8d\u8a3c\u3059\u308b\u305f\u3081\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u5148\u306f\u3001\\<sec:authentication-manager alias=\"authManager\">\\\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306fSQL\u3092\u767a\u884c\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u554f\u3044\u5408\u308f\u305b\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306fSpring\u7ba1\u7406\u4e0b\u306b\u3042\u308b dataSource \u306e\u540d\u524d\u3067\u7ba1\u7406\u3055\u308c\u305fSpring-bean\u3067\u3059\u3002\ndataSource\u306e\u8a2d\u5b9a\u4f8b\u3092\u304a\u307e\u3051\u3067\u6b21\u306b\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n## applicationContext-dataSource.xml\n\nSpring\u7ba1\u7406\u4e0b\u3067dataSource\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```xml:applicationContext-dataSource.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:jee=\"http://www.springframework.org/schema/jee\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"\nhttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\nhttp://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd\nhttp://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"\ndefault-autowire=\"byName\"\n>\n    <!-- Spring\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406\u30af\u30e9\u30b9 -->\n    <bean id=\"transactionManager\" \n          class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n        <property name=\"dataSource\"><ref bean=\"dataSource\"/></property>\n    </bean>\n\n    <!-- \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5b9a\u7fa9\u3067Spring\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5229\u7528\u3092\u5ba3\u8a00\u3059\u308b\u3002 -->\n\t<tx:annotation-driven transaction-manager=\"transactionManager\"\n      proxy-target-class=\"true\" />\n\n    <!-- JNDI\u30eb\u30c3\u30af\u30a2\u30c3\u30d7 -->\n\t<jee:jndi-lookup id=\"dataSource\" jndi-name=\"java:comp/env/jdbc/dbcon\"></jee:jndi-lookup>\n</beans>\n```\n\n\u3053\u306e\u4f8b\u3067\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306e\u30bd\u30fc\u30b9\u3092Tomcat\u306a\u3069\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u62dd\u501f\u3057\u307e\u3059\u3002\u305d\u306e\u969b\u3001JNDI\u3067\u5b9a\u7fa9\u3057\u305f\u547d\u540d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u4f7f\u3046\u5834\u5408\u306b\u306f\u3001pom.xml\u306b\u3066\u5fc5\u8981\u306aSpring framework\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306f\u8ffd\u52a0\u4f8b\u3067\u3059\u3002\n\n```xml:pom.xml(\u65ad\u7247)\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\t<modelVersion>4.0.0</modelVersion>\n    <artifactId>artifactId</artifactId>\n    <name>appname</name>\n    <properties>\n        <!-- \u3053\u3053\u304b\u3089\u8ffd\u52a0 -->\n        <spring.version>4.1.3.RELEASE</spring.version>\n        <!-- \u3053\u3053\u307e\u3067 -->\n    </properties>\n    <dependencies>\n        <!-- \u3053\u3053\u304b\u3089\u8ffd\u52a0 -->\n        <dependency>\n        \t<groupId>org.springframework</groupId>\n        \t<artifactId>spring-core</artifactId>\n        \t<version>${spring.version}</version>\n        </dependency>\n        <dependency>\n        \t<groupId>org.springframework</groupId>\n        \t<artifactId>spring-web</artifactId>\n        \t<version>${spring.version}</version>\n        </dependency>\n        <dependency>\n        \t<groupId>org.springframework</groupId>\n        \t<artifactId>spring-beans</artifactId>\n        \t<version>${spring.version}</version>\n        </dependency>\n        <dependency>\n        \t<groupId>org.springframework</groupId>\n        \t<artifactId>spring-context</artifactId>\n        \t<version>${spring.version}</version>\n        </dependency>\n        <dependency>\n        \t<groupId>org.springframework</groupId>\n        \t<artifactId>spring-context-support</artifactId>\n        \t<version>${spring.version}</version>\n        </dependency>\n        <dependency>\n        \t<groupId>org.springframework</groupId>\n        \t<artifactId>spring-tx</artifactId>\n        \t<version>${spring.version}</version>\n        </dependency>\n        <!-- \u3053\u3053\u307e\u3067 -->\n    </dependencies>\n</project>\n```\n"}