{"context": " More than 1 year has passed since last update.\n\nSkype\u306b\u30dc\u30c3\u30c8\u3092\u98fc\u304a\u3046\n\u3082\u306e\u3059\u3054\u304f\u4eca\u66f4\u3067\u3059\u304c\u3001Skype\u306b\u30dc\u30c3\u30c8\u3092\u62db\u5f85\u3059\u308b\u4e8b\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u305d\u306e\u969b\u306e\u4f5c\u696d\u30e1\u30e2\u3067\u3059\u3002\n\n\u203b\u305f\u3060\u3057\u3001\u30dc\u30c3\u30c8\u306e\u53cd\u5fdc\u304c\u306b\u3076\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\n\nEC2\u306e\u69cb\u6210\n\u30dc\u30c3\u30c8\u5c0f\u5c4b\u306f\u3001EC2(CentOS6)\u3067\u3059\u3002\n\n\n\n\nitem\nvalue\n\n\n\n\nregion\nap-northeast-1\n\n\nAMI\nCentOS 6 (ami-25436924)\n\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u4ee5\u4e0b\u3059\u3079\u3066\u3001root\u6a29\u9650\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u524d\u63d0\u3067\u306e\u3001\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u3067\u3059\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\u4e8b\u524d\u306b\u3001\u5fc5\u8981\u306a\u3082\u306e\u3092 yum install \u3057\u3066\u304a\u304d\u307e\u3059\u3002\nec2# yum install -y http://dl.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\nec2# yum install -y qtwebkit.i686 webkitgtk.i686 alsa-lib.i686 libXv.i686 libXScrnSaver.i686 gtk2-engines.i686 PackageKit-gtk-module.i686 libcanberra.i686 libcanberra-gtk2.i686 pulseaudio-libs.i686 alsa-plugins-pulseaudio.i686\nec2# yum install -y x11vnc ipa-gothic-fonts xauth Xvfb dbus-x11 wget\n\n\nSkype\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nec2# cd /usr/src\nec2# wget http://www.skype.com/go/getskype-linux-beta-dynamic -O skype-4.3.0.37.tar.bz2\nec2# tar xjvf /usr/src/skype-4.3.0.37.tar.bz2 -C /usr/local\nec2# dbus-uuidgen > /var/lib/dbus/machine-id\nec2# ln -s /usr/local/skype-4.3.0.37 /usr/local/skype\nec2# ln -s /usr/local/skype /usr/share/skype\nec2# ln -s /usr/local/skype/skype /usr/local/bin/skype\nec2# useradd skype\nec2# mkdir /var/db/skype /var/run/skype/ /var/log/skype/\nec2# chown skype:skype /var/db/skype /var/run/skype/ /var/log/skype/\n\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nUSERNAME/PASSWORD \u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\n\u30e6\u30fc\u30b6\u30fc\u306f https://login.skype.com/intl/ja/account/signup-form \u304b\u3089\u4f5c\u6210\u3067\u304d\u307e\u3059\n\n\n/etc/init.d/skype\n#!/bin/bash\n#\n# Init file for daemonized Skype service\n#\n### BEGIN INIT INFO\n# Provides:          skype\n# Required-Start:    $local_fs $remote_fs $network\n# Required-Stop:     $local_fs $remote_fs $network\n# Default-Start:     3 4 5\n# Default-Stop:      0 1 2 6\n# X-Interactive:     false\n# Short-Description: Start/stop daemonized Skype service\n### END INIT INFO\n#\n# chkconfig: 345 80 10\n#\n# processname: skype\n#\n# pidfile: /var/run/skype.pid\n#\n\nif [ -r /etc/rc.d/init.d/functions ]; then\n    . /etc/rc.d/init.d/functions\n    log_daemon_msg() {\n        msg=$1\n        prog=$2\n        echo -n $\"$msg $prog: \"\n    }\n    log_end_msg() {\n        if [ \"$1\" = \"0\" ]; then\n            success\n        elif [ \"$1\" = \"1\" ]; then\n            failure\n        fi\n        echo\n    }\nelif [ -r /lib/lsb/init-functions ]; then\n    . /lib/lsb/init-functions\nelse\n    echo \"Could not find a helper script needed to run this script.\"\n    exit 1\nfi\n\nDAEMON_USER=skype\nPROGNAME=`basename $0`\nPIDFILE=/var/run/skype.pid\nXSERVERNUM=20\nXAUTHFILE=/home/skype/.Xauthority\nLOGFILE=/var/log/skype/error.log\nDBPATH=/var/log/skype/\nXAUTHPROTO=.\nSKYPE=/usr/local/skype-4.3.0.37/skype\nUSERNAME= # \u30dc\u30c3\u30c8\u7528\u306eskype\u30ab\u30a6\u30f3\u30c8\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\nPASSWORD= # \u30dc\u30c3\u30c8\u7528\u306eskype\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\n\n[ -f /etc/sysconfig/skype ] && . /etc/sysconfig/skype\n\nprog=\"skype\"\nRETVAL=0\n\ndircheck() {\n    if [ ! -d `dirname \"$1\"` ]; then\n        echo \"`dirname \\\"$1\\\"` does not exist\"\n        return 1\n    else\n        return 0\n    fi\n}\n\nstart() {\n    log_daemon_msg \"Starting\" \"skype\"\n    if ! dircheck \"$LOGFILE\" || ! dircheck \"$XAUTHFILE\"; then\n        log_end_msg 1\n        echo\n        RETVAL=1\n        return \n    fi \n    MCOOKIE=`mcookie` && \\\n    sudo -u \"$DAEMON_USER\" env XAUTHORITY=$XAUTHFILE sh -c \"xauth add \\\":$XSERVERNUM\\\" \\\"$XAUTHPROTO\\\" \\\"$MCOOKIE\\\" >> \\\"$LOGFILE\\\" 2>&1\" && \\\n    sudo -u \"$DAEMON_USER\" env XAUTHORITY=$XAUTHFILE sh -c \"Xvfb :$XSERVERNUM -screen 0 800x600x8 -nolisten tcp >> \\\"$LOGFILE\\\" 2>&1 & echo \\$!\" >\"$PIDFILE\" &&\n    sleep 3 && \\\n    ( sudo -u \"$DAEMON_USER\" env LD_LIBRARY_PATH=/usr/local/skype-4.3.0.37/:$LD_LIBRARY_PATH DISPLAY=:$XSERVERNUM XAUTHORITY=$XAUTHFILE SKYPE=\"$SKYPE\" sh -c \"echo \\\"$USERNAME $PASSWORD\\\" | nohup \\\"$SKYPE\\\" --dbpath=\\\"$DBPATH\\\" --pipelogin &\") >> \"$LOGFILE\" 2>&1 && \\\n    (log_end_msg 0 && [ -d /var/lock/subsys ] && touch /var/lock/subsys/skype || true) \\\n        || (RETVAL=$?; kill -TERM `cat $PIDFILE`; log_end_msg 1)\n}\n\nstop() {\n    log_daemon_msg \"Stopping\" \"skype\"\n    if [ -e \"$PIDFILE\" ]; then\n        kill -TERM `cat $PIDFILE` && \\\n        rm -f $PIDFILE && \\\n        if [ -d /var/lock/subsys ]; then rm -f /var/lock/subsys/skype; fi && \\\n        log_end_msg 0 || log_end_msg 1\n    else\n        log_end_msg 1\n        RETVAL=1\n    fi\n}\n\nusage() {\n    echo \"Usage: $PROGNAME {start|stop|restart}\"\n}\n\ncase $1 in\n    start)\n        start\n        ;;\n    stop)\n        stop\n        ;;\n    restart)\n        stop\n        start\n        ;;\n    *)\n        usage\n        RETVAL=255\n        ;;\nesac\n\nexit $RETVAL\n\n\n\u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nec2# chmod +x /etc/init.d/skype\n\n\nSkype\u306e\u8d77\u52d5\nec2# /etc/init.d/skype start\n\n\nVNC\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\n\niptables \u306e\u8a2d\u5b9a\nVNC\u3067\u5229\u7528\u3059\u308b 5900\u756a\u30dd\u30fc\u30c8 \u3092\u89e3\u653e\u3057\u307e\u3057\u3087\u3046\u3002\n\u203b\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u300122\u756a\u30dd\u30fc\u30c8\u306e\u884c\u3092\u30b3\u30d4\u30da\u3057\u3066\u30015900\u756a\u30dd\u30fc\u30c8\u306e\u884c\u3092\u8ffd\u52a0\nec2# vi /etc/sysconfig/iptables\nec2# service iptables restart\n\n\nVNC\u3092\u8d77\u52d5\nec2# x11vnc -display :20\n\n\n\u8d77\u52d5\u3057\u305fVNC\u306b\u3001VNC Viewer\u3067\u30a2\u30af\u30bb\u30b9\nTigerVNC \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u65e5\u672c\u8a9e\u30c8\u30c3\u30d7\u30da\u30fc\u30b8 - SourceForge.JP \u304b\u3089\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bd\u30d5\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b0\u30ed\u30fc\u30d0\u30ebIP\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nec2# curl http://169.254.169.254/latest/meta-data/public-ipv4;echo\n\nTigerVNC Viewer \u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001(EC2\u306eIP\u30a2\u30c9\u30ec\u30b9):5900 \u306b\u63a5\u7d9a\n\n\u63a5\u7d9a\u51fa\u6765\u305f\u3089\u3001\u8a00\u8a9e\u3092\u9078\u3093\u3067\u300c\u540c\u610f\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\n\n\u30b5\u30a4\u30f3\u30a4\u30f3\u753b\u9762\u304c\u51fa\u307e\u3059\u304c\u3001\u305d\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u304f\u3068\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u8a18\u8f09\u3057\u305fUSERNAME/PASSWORD\u3067\u3001\n\u52dd\u624b\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u306e\u753b\u9762\u304c\u51fa\u305f\u3089\u3001VNC Viewer\u306f\u3057\u3070\u3089\u304f\u305d\u306e\u307e\u307e\u3067\n\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u4f5c\u696d\u306b\u623b\u308a\u307e\u3059\u3002\n\n\u30dc\u30c3\u30c8\u3068\u306e\u4f1a\u8a71\n\nSkype4Py\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nec2# wget https://pypi.python.org/packages/source/d/distribute/distribute-0.6.49.tar.gz\nec2# tar xpvf distribute-0.6.49.tar.gz\nec2# python distribute-0.6.49/setup.py install\nec2# easy_install Skype4Py\n\n\n\u30dc\u30c3\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u3001\n\u300c\u30dc\u30c3\u30c8\u300d\u3068\u547c\u3073\u304b\u3051\u308b\u3068\n\u300c|\u03a6\u03c9\u03a6) ...\u300d\u3068\u8fd4\u3059\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3059\u3002\n\nbot.py\n# encoding: utf-8\n\nimport Skype4Py\nimport time\n\ndef handler(msg, event):\n    if event == u\"RECEIVED\":\n        if msg.Body == u\"\u30dc\u30c3\u30c8\":\n            msg.Chat.SendMessage(u\"|\u03a6\u03c9\u03a6) ...\")\n\ndef main():\n    skype = Skype4Py.Skype(Transport='x11')\n    skype.OnMessageStatus = handler\n    skype.Attach()\n    while True:\n        time.sleep(1) \n\nif __name__ == \"__main__\":\n    main()\n\n\n\n\u30dc\u30c3\u30c8\u3092\u8d77\u52d5\u3059\u308b\nec2# export DISPLAY=:20;\nec2# python bot.py\n\n\u305d\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u3044\u305f VNC Viewer \u5074\u306b\u3001\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\n\u201c\u3053\u306e\u9078\u629e\u3092\u8a18\u61b6\u3059\u308b\u201d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\u300c\u306f\u3044\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\u4ed6\u306e\u30b9\u30ab\u30a4\u30d7\u304b\u3089\u3001\u30dc\u30c3\u30c8\u306b\u8a71\u3057\u304b\u3051\u3066\u307f\u308b\n\n\u3088\u304f\u3067\u304d\u307e\u3057\u305f\u2606\n\n\u5f8c\u7247\u3065\u3051\nVNC\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u7d42\u4e86\u3055\u305b\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n(Skype\u306f\u8d77\u52d5\u3057\u305f\u307e\u307e\u306a\u306e\u3067\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093)\n\n\u30dc\u30c3\u30c8\u3092\u80b2\u6210\u3059\u308b\n\u30dc\u30c3\u30c8\u306b\u8272\u3005\u306a\u53cd\u5fdc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n# encoding: utf-8\n\nimport Skype4Py\nimport time\nimport re # \u2190\u8ffd\u52a0\n\ndef handler(msg, event):\n\n    if event == u\"RECEIVED\":\n\n        #---- \u5b8c\u5168\u4e00\u81f4\n        if msg.Body == u\"\u304a\u308c\u304c\":\n            msg.Chat.SendMessage(u\"\u304a\u524d\u3067\")\n            return\n\n        #---- \u691c\u7d22\n        if re.search(u\"\u304a\u524d\u304c\", msg.Body, re.S):\n            msg.Chat.SendMessage(u\"\u304a\u308c\u3067\")\n\n        #---- \u8907\u6570\u884c\n        if re.search(u\"\u8d77\u304d\u308d\", msg.Body, re.S):\n            gataMsg = u\"\"\"\u3000\u3000\u3000\u3000\u3000\uff75\uff8a\uff96\uff70!!\n\u3000\u3000\u3000\u3000\u2227\u2227 \u2229\n\u3000\u3000\u3000 (`\uff65\u03c9\uff65)/\n\u3000\u3000\u3000\u2282\u3000\u3000\u30ce\n\u3000\u3000\u3000\u3000(\u3064\u30ce\n\u3000\u3000\u3000\u3000 (\uff89\n\u3000\uff3f\uff3f_\uff0f(\uff3f\uff3f_\n\uff0f\u3000\u3000(\uff3f\uff3f\uff3f\uff0f\n\uffe3\uffe3\uffe3\uffe3\uffe3\uffe3\n\"\"\"\n            msg.Chat.SendMessage(gataMsg)\n\n        #---- \u4e00\u89a7\u62bd\u51fa\n        if re.search(u'\u304a\u308c', msg.Body, re.S):\n            list = re.findall(u'\u304a\u308c', msg.Body, re.S)\n            cnt = len(list)\n            msg.Chat.SendMessage(u\"\u3010\u81ea\u610f\u8b58\u904e\u5270\u8b66\u5831\u3011 \u304a\u308c: \"+str(cnt))\n\n        #---- \u6587\u5b57\u5217\u7f6e\u63db\n        # note: python 2.6\u7cfb\u3060\u3068 re.sub \u3067 flags \u304c\u4f7f\u3048\u306a\u3044...\n        #       http://docs.python.jp/2/library/re.html#re.sub\n        if re.search(u'\u304a\u308c', msg.Body):\n            lines = msg.Body.splitlines()\n            msg.Chat.SendMessage(u'\u7406\u89e3\u3057\u305f\u3002')\n            for line in lines :\n                you = re.sub(u'\u304a\u524d', u'-\u304a\u524d-', line)\n                you = re.sub(u'\u304a\u308c', u'\u304a\u524d', you)\n                you = re.sub(u'-\u304a\u524d-', u'\u304a\u308c', you)\n                msg.Chat.SendMessage(you)\n            msg.Chat.SendMessage(u'\u3060\u306a\u3002')\n\ndef main():\n    skype = Skype4Py.Skype(Transport='x11')\n    skype.OnMessageStatus = handler\n    skype.Attach()\n    while True:\n        time.sleep(1) \n\nif __name__ == \"__main__\":\n    main()\n\n\n\n\u30dc\u30c3\u30c8\u3092\u30b0\u30eb\u30fc\u30d7\u306b\u62db\u5f85\u3059\u308b\nSkype\u30c1\u30e3\u30c3\u30c8\u306b\u306f\u3001\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u3068\u300cP2P\u30d9\u30fc\u30b9\u300d\u306e\u30e2\u30ce\u304c\u3042\u308a\n\u6700\u8fd1\u4f5c\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306f\u3001\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u306e\u30c1\u30e3\u30c3\u30c8\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\u300e\u30c1\u30e3\u30c3\u30c8\u306e\u30b3\u30de\u30f3\u30c9\u3068\u5f79\u5272\u3092\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002- Skype Support FAQ\u300f\nhttps://support.skype.com/ja/faq/FA10042/\n\u30fb\u30fb\u30fb\u3067\u3001\nSkypeApi\u306e\u4ed5\u69d8\u306a\u306e\u304b\u3001Skype4Py\u306e\u4ed5\u69d8\u306a\u306e\u304b\u3001\u306f\u305f\u307e\u305f\u81ea\u5206\u306e\u66f8\u304d\u65b9\u306e\u554f\u984c\u304b\n\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u3060\u3068\u3001\u30dc\u30c3\u30c8\u304c\u30b0\u30eb\u30fc\u30d7\u3092\u4e0a\u624b\u304f\u8a8d\u8b58\u3057\u3066\u304f\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001\n\u201c\u30b0\u30eb\u30fc\u30d7\u306b\u30dc\u30c3\u30c8\u3092\u62db\u5f85\u201d\u3057\u305f\u308a\n\u201c\u30dc\u30c3\u30c8\u304c\u30b0\u30eb\u30fc\u30d7\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u901a\u77e5\u201d\u3057\u305f\u308a\u3057\u305f\u3044\u5834\u5408\u306f\n\u300cP2P\u30d9\u30fc\u30b9\u300d\u3092\u5229\u7528\u3059\u308b\u4e8b\u306b\u3057\u307e\u3059\u3002\n\u73fe\u5728\u958b\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7\u304c\n\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u306a\u306e\u304b\u300cP2P\u30d9\u30fc\u30b9\u300d\u306a\u306e\u304b\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\n\u30e1\u30c3\u30bb\u30fc\u30b8\u5165\u529b\u6b04\u304b\u3089\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u307e\u3059\u3002\n/get name\n\n\u4e0a\u8a18Skype-FAQ\u30da\u30fc\u30b8\u306e\u8aac\u660e\u304b\u3089\u3001\u4e0b\u8a18\u306e\u901a\u308a\u5224\u5225\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u30b0\u30eb\u30fc\u30d7\u540d\u306e\u5fdc\u7b54\u306e\u5148\u982d\u304c\u300c19:...\u300d\u3067\u3042\u308b\u5834\u5408\u306f\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u306e\u30c1\u30e3\u30c3\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u30b0\u30eb\u30fc\u30d7\u540d\u306e\u5fdc\u7b54\u306e\u5148\u982d\u304c\u300c#skypename...\u300d\u3067\u3042\u308b\u5834\u5408\u306fP2P\u30d9\u30fc\u30b9\u306e\u30c1\u30e3\u30c3\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u300cP2P\u30d9\u30fc\u30b9\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u306f\u3001\n\u30e1\u30c3\u30bb\u30fc\u30b8\u5165\u529b\u6b04(\u3069\u3053\u306e\u30c1\u30e3\u30c3\u30c8\u3067\u3082\uff2f\uff2b)\u304b\u3089\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u307e\u3059\u3002\n/createmoderatedchat\n\n\u53ef\u80fd\u3067\u3042\u308c\u3070\u3001\u30dc\u30c3\u30c8\u81ea\u8eab\u304c\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u308b\u306e\u304c\u671b\u307e\u3057\u3044\u3067\u3059\u3002\n(\u5e38\u99d0\u3057\u3066\u3044\u308b\u30dc\u30c3\u30c8\u304c\u3001\u7ba1\u7406\u8005\u306b\u306a\u308c\u308b\u70ba)\nVNC Viewer \u304b\u3089\u3084\u308b\u306e\u3082\u9762\u5012\u3067\u3059\u306e\u3067\u3001\u304a\u4f7f\u3044\u306ePC\u3067\u30dc\u30c3\u30c8\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\n\u305d\u3053\u3067\u4f5c\u696d\u3059\u308b\u306e\u304c\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\u65b0\u3057\u304f\u4f5c\u6210\u3055\u308c\u305f\u300cP2P\u30d9\u30fc\u30b9\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u3001\u30e1\u30f3\u30d0\u30fc\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u901a\u77e5\u3059\u308b\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u53d7\u52d5\u7684\u306b\u53cd\u5fdc\u3055\u305b\u308b\u3060\u3051\u3058\u3083\u306a\u304f\u3001\n\u80fd\u52d5\u7684\u306b\u30dc\u30c3\u30c8\u306e\u65b9\u304b\u3089\u3001\u901a\u77e5\u306a\u3093\u3066\u306e\u3082\u3055\u305b\u3066\u307f\u305f\u3044\u3067\u3059\u3088\u306d\u3002\n\n\u30e6\u30fc\u30b6\u30fc\u3078\n\u901a\u77e5\u5148\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u306e\u3068\u3053\u308d\u306f\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u7b49\u306b\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u767b\u9332\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\n\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0(\u5b9a\u523b\u3001\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u7b49)\u306b\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u901a\u77e5\u3055\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3001\n\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3084\u30a2\u30e9\u30fc\u30c8\u901a\u77e5\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u203b\u4e8b\u524d\u306b\u3001\u30dc\u30c3\u30c8\u3068\u30e6\u30fc\u30b6\u30fc\u3067\u9023\u7d61\u5148\u30ea\u30b9\u30c8\u306e\u767b\u9332\u3092\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082(\u672a\u78ba\u8a8d)\n\n\u901a\u77e5\u30b9\u30af\u30ea\u30d7\u30c8\n\nsend_message_for_user.py\n# -*- coding: utf-8 -*-\nimport Skype4Py\nimport sys\n\nuser = 'username' # \u8981\u66f8\u304d\u63db\u3048\n\nargvs = sys.argv\nacnt = len(argvs)\n\nskype = Skype4Py.Skype(Transport='x11')\nskype.Attach()\n\nmsg = argvs[1] if acnt > 1 and argvs[1] else '\u5143\u6c17\uff1f'\n\nchat = skype.CreateChatWith(user)\nchat.SendMessage(msg)\n\n\n\n\u901a\u77e5\u30b3\u30de\u30f3\u30c9\nec2# export DISPLAY=:20;\nec2# python send_message_for_group.py '\u3042\u306830\u5206\u3067\u30a2\u30cb\u30e1\u304c\u59cb\u307e\u308a\u307e\u3059'\n\n\n\u30b0\u30eb\u30fc\u30d7\u3078\n\u30b0\u30eb\u30fc\u30d7\u3078\u306e\u901a\u77e5\u306f\u3001\u3084\u3084\u7279\u6b8a\u3067\n\u6240\u5c5e\u3057\u3066\u3044\u308b\u30c1\u30e3\u30c3\u30c8\u306e\u4e00\u89a7\u304b\u3089\u5bfe\u8c61\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u63a2\u3057\u51fa\u3057\n\u8a72\u5f53\u306e\u30b0\u30eb\u30fc\u30d7\u3067\u3042\u308b\u5834\u5408\u306b\u306e\u307f\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u901a\u77e5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u901a\u77e5\u30b9\u30af\u30ea\u30d7\u30c8\n\nsend_message_for_group.py\n# -*- coding: utf-8 -*-\nimport Skype4Py\nimport sys\n\nargvs = sys.argv\nacnt = len(argvs)\n\nskype = Skype4Py.Skype(Transport='x11')\nskype.Attach()\n\nmsg = argvs[1] if acnt > 1 and argvs[1] else '\u5143\u6c17\uff1f'\n\nfor chat in skype.Chats :\n    if chat.Name == '#skype_group_name/$1234567890abcdef': # \u8981\u66f8\u304d\u63db\u3048\n        chat.SendMessage(msg)\n\n\n\n\u901a\u77e5\u30b3\u30de\u30f3\u30c9\nec2# export DISPLAY=:20;\nec2# python send_message_for_group.py '\u307f\u306a\u3055\u3093\u3001\u304a\u663c\u306e\u6642\u9593\u3067\u3059\u3002'\n\n\n\u6700\u5f8c\u306b\n\u696d\u52d9\u306b\u4f7f\u7528\u3059\u308b\u5834\u5408\u306a\u3069\u306f\u3001\u304f\u308c\u3050\u308c\u3082\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u9762\u306b\u6c17\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\n\u25a0 aws marketplace : CentOS 6 (x86_64) - with Updates\nhttps://aws.amazon.com/marketplace/ordering?productId=adc4348e-1dc3-41df-b833-e86ba57a33d6\n\u203bCentOS6\u306eAMI\u306f\u3001\u30b3\u30c1\u30e9\u304b\u3089\n\u25a0 CentOS6.3\u306bSkypeBot(Skype4Py)\u3092\u69cb\u7bc9 [2013/03/09]\nhttps://mistymagich.wordpress.com/2013/03/09/centos6-3%E3%81%ABskypebot%E3%82%92%E6%A7%8B%E7%AF%89/\n\u203bSkype\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30b3\u30c1\u30e9\u3092\u6d41\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\n\u25a0 Linux\u4e0a\u3067\u52d5\u304fSkype\u7528\u306ebot\u3092\u4f5c\u308b\u65b9\u6cd5 [2010/09/26]\nhttp://d.hatena.ne.jp/moriyoshi/20100926/1285517353\n\u203bSkype4Py\u3092\u4f7f\u3063\u305f\u30b5\u30f3\u30d7\u30ebBot\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30b3\u30c1\u30e9\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6d41\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\n# Skype\u306b\u30dc\u30c3\u30c8\u3092\u98fc\u304a\u3046\n\n\u3082\u306e\u3059\u3054\u304f\u4eca\u66f4\u3067\u3059\u304c\u3001Skype\u306b\u30dc\u30c3\u30c8\u3092\u62db\u5f85\u3059\u308b\u4e8b\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u305d\u306e\u969b\u306e\u4f5c\u696d\u30e1\u30e2\u3067\u3059\u3002\n\n![chatbot.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/329f19c1-7fed-e57e-6315-12ec04d230a3.gif)\n\u203b\u305f\u3060\u3057\u3001\u30dc\u30c3\u30c8\u306e\u53cd\u5fdc\u304c\u306b\u3076\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\n\n## EC2\u306e\u69cb\u6210\n\n\u30dc\u30c3\u30c8\u5c0f\u5c4b\u306f\u3001EC2(CentOS6)\u3067\u3059\u3002\n\n![skype4py-bot-house.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/0a3450de-6a79-b1e6-2ed0-01f4d7b25e64.gif)\n\n|item|value|\n|:--|:--|\n| region | ap-northeast-1 |\n| AMI | CentOS 6 (ami-25436924) |\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n![skype4py-install.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/08a3d3f7-2cd5-fa14-afb2-4a1ede6a36cd.gif)\n\n\u4ee5\u4e0b\u3059\u3079\u3066\u3001root\u6a29\u9650\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u524d\u63d0\u3067\u306e\u3001\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u3067\u3059\u3002\n\n### \u4e8b\u524d\u6e96\u5099\n\n\u4e8b\u524d\u306b\u3001\u5fc5\u8981\u306a\u3082\u306e\u3092 yum install \u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\nec2# yum install -y http://dl.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\nec2# yum install -y qtwebkit.i686 webkitgtk.i686 alsa-lib.i686 libXv.i686 libXScrnSaver.i686 gtk2-engines.i686 PackageKit-gtk-module.i686 libcanberra.i686 libcanberra-gtk2.i686 pulseaudio-libs.i686 alsa-plugins-pulseaudio.i686\nec2# yum install -y x11vnc ipa-gothic-fonts xauth Xvfb dbus-x11 wget\n```\n\n### Skype\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n#### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nec2# cd /usr/src\nec2# wget http://www.skype.com/go/getskype-linux-beta-dynamic -O skype-4.3.0.37.tar.bz2\nec2# tar xjvf /usr/src/skype-4.3.0.37.tar.bz2 -C /usr/local\nec2# dbus-uuidgen > /var/lib/dbus/machine-id\nec2# ln -s /usr/local/skype-4.3.0.37 /usr/local/skype\nec2# ln -s /usr/local/skype /usr/share/skype\nec2# ln -s /usr/local/skype/skype /usr/local/bin/skype\nec2# useradd skype\nec2# mkdir /var/db/skype /var/run/skype/ /var/log/skype/\nec2# chown skype:skype /var/db/skype /var/run/skype/ /var/log/skype/\n```\n\n#### \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n* USERNAME/PASSWORD \u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\n* \u30e6\u30fc\u30b6\u30fc\u306f https://login.skype.com/intl/ja/account/signup-form \u304b\u3089\u4f5c\u6210\u3067\u304d\u307e\u3059\n\n```bash:/etc/init.d/skype\n#!/bin/bash\n#\n# Init file for daemonized Skype service\n#\n### BEGIN INIT INFO\n# Provides:          skype\n# Required-Start:    $local_fs $remote_fs $network\n# Required-Stop:     $local_fs $remote_fs $network\n# Default-Start:     3 4 5\n# Default-Stop:      0 1 2 6\n# X-Interactive:     false\n# Short-Description: Start/stop daemonized Skype service\n### END INIT INFO\n#\n# chkconfig: 345 80 10\n#\n# processname: skype\n#\n# pidfile: /var/run/skype.pid\n#\n\nif [ -r /etc/rc.d/init.d/functions ]; then\n    . /etc/rc.d/init.d/functions\n    log_daemon_msg() {\n        msg=$1\n        prog=$2\n        echo -n $\"$msg $prog: \"\n    }\n    log_end_msg() {\n        if [ \"$1\" = \"0\" ]; then\n            success\n        elif [ \"$1\" = \"1\" ]; then\n            failure\n        fi\n        echo\n    }\nelif [ -r /lib/lsb/init-functions ]; then\n    . /lib/lsb/init-functions\nelse\n    echo \"Could not find a helper script needed to run this script.\"\n    exit 1\nfi\n\nDAEMON_USER=skype\nPROGNAME=`basename $0`\nPIDFILE=/var/run/skype.pid\nXSERVERNUM=20\nXAUTHFILE=/home/skype/.Xauthority\nLOGFILE=/var/log/skype/error.log\nDBPATH=/var/log/skype/\nXAUTHPROTO=.\nSKYPE=/usr/local/skype-4.3.0.37/skype\nUSERNAME= # \u30dc\u30c3\u30c8\u7528\u306eskype\u30ab\u30a6\u30f3\u30c8\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\nPASSWORD= # \u30dc\u30c3\u30c8\u7528\u306eskype\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044\n\n[ -f /etc/sysconfig/skype ] && . /etc/sysconfig/skype\n\nprog=\"skype\"\nRETVAL=0\n\ndircheck() {\n    if [ ! -d `dirname \"$1\"` ]; then\n        echo \"`dirname \\\"$1\\\"` does not exist\"\n        return 1\n    else\n        return 0\n    fi\n}\n\nstart() {\n    log_daemon_msg \"Starting\" \"skype\"\n    if ! dircheck \"$LOGFILE\" || ! dircheck \"$XAUTHFILE\"; then\n        log_end_msg 1\n        echo\n        RETVAL=1\n        return \n    fi \n    MCOOKIE=`mcookie` && \\\n    sudo -u \"$DAEMON_USER\" env XAUTHORITY=$XAUTHFILE sh -c \"xauth add \\\":$XSERVERNUM\\\" \\\"$XAUTHPROTO\\\" \\\"$MCOOKIE\\\" >> \\\"$LOGFILE\\\" 2>&1\" && \\\n    sudo -u \"$DAEMON_USER\" env XAUTHORITY=$XAUTHFILE sh -c \"Xvfb :$XSERVERNUM -screen 0 800x600x8 -nolisten tcp >> \\\"$LOGFILE\\\" 2>&1 & echo \\$!\" >\"$PIDFILE\" &&\n    sleep 3 && \\\n    ( sudo -u \"$DAEMON_USER\" env LD_LIBRARY_PATH=/usr/local/skype-4.3.0.37/:$LD_LIBRARY_PATH DISPLAY=:$XSERVERNUM XAUTHORITY=$XAUTHFILE SKYPE=\"$SKYPE\" sh -c \"echo \\\"$USERNAME $PASSWORD\\\" | nohup \\\"$SKYPE\\\" --dbpath=\\\"$DBPATH\\\" --pipelogin &\") >> \"$LOGFILE\" 2>&1 && \\\n    (log_end_msg 0 && [ -d /var/lock/subsys ] && touch /var/lock/subsys/skype || true) \\\n        || (RETVAL=$?; kill -TERM `cat $PIDFILE`; log_end_msg 1)\n}\n\nstop() {\n    log_daemon_msg \"Stopping\" \"skype\"\n    if [ -e \"$PIDFILE\" ]; then\n        kill -TERM `cat $PIDFILE` && \\\n        rm -f $PIDFILE && \\\n        if [ -d /var/lock/subsys ]; then rm -f /var/lock/subsys/skype; fi && \\\n        log_end_msg 0 || log_end_msg 1\n    else\n        log_end_msg 1\n        RETVAL=1\n    fi\n}\n\nusage() {\n    echo \"Usage: $PROGNAME {start|stop|restart}\"\n}\n\ncase $1 in\n    start)\n        start\n        ;;\n    stop)\n        stop\n        ;;\n    restart)\n        stop\n        start\n        ;;\n    *)\n        usage\n        RETVAL=255\n        ;;\nesac\n\nexit $RETVAL\n```\n\n\u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\nec2# chmod +x /etc/init.d/skype\n```\n\n#### Skype\u306e\u8d77\u52d5\n\n```bash\nec2# /etc/init.d/skype start\n```\n\n### VNC\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\n\n#### iptables \u306e\u8a2d\u5b9a\n\nVNC\u3067\u5229\u7528\u3059\u308b 5900\u756a\u30dd\u30fc\u30c8 \u3092\u89e3\u653e\u3057\u307e\u3057\u3087\u3046\u3002\n\u203b\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u300122\u756a\u30dd\u30fc\u30c8\u306e\u884c\u3092\u30b3\u30d4\u30da\u3057\u3066\u30015900\u756a\u30dd\u30fc\u30c8\u306e\u884c\u3092\u8ffd\u52a0\n\n```bash\nec2# vi /etc/sysconfig/iptables\nec2# service iptables restart\n```\n\n#### VNC\u3092\u8d77\u52d5\n\n```bash\nec2# x11vnc -display :20\n```\n\n#### \u8d77\u52d5\u3057\u305fVNC\u306b\u3001VNC Viewer\u3067\u30a2\u30af\u30bb\u30b9\n\n[TigerVNC \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u65e5\u672c\u8a9e\u30c8\u30c3\u30d7\u30da\u30fc\u30b8 - SourceForge.JP](http://sourceforge.jp/projects/sfnet_tigervnc/) \u304b\u3089\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bd\u30d5\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b0\u30ed\u30fc\u30d0\u30ebIP\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```bash\nec2# curl http://169.254.169.254/latest/meta-data/public-ipv4;echo\n```\n\nTigerVNC Viewer \u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001(EC2\u306eIP\u30a2\u30c9\u30ec\u30b9):5900 \u306b\u63a5\u7d9a\n![VNC-Viewer-Access.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/43b3d72a-63bd-68aa-7d0a-483fbd5cee95.gif)\n\n\u63a5\u7d9a\u51fa\u6765\u305f\u3089\u3001\u8a00\u8a9e\u3092\u9078\u3093\u3067\u300c\u540c\u610f\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\n![VNC-Skype-01.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/6511a396-ee8b-40b4-b129-85a66c3a348f.gif)\n\n\u30b5\u30a4\u30f3\u30a4\u30f3\u753b\u9762\u304c\u51fa\u307e\u3059\u304c\u3001\u305d\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u304f\u3068\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u8a18\u8f09\u3057\u305fUSERNAME/PASSWORD\u3067\u3001\n\u52dd\u624b\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n![VNC-Skype-02.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/8964eb2b-736c-cc3d-401a-a0f8a22e7f3a.gif)\n\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u306e\u753b\u9762\u304c\u51fa\u305f\u3089\u3001VNC Viewer\u306f\u3057\u3070\u3089\u304f\u305d\u306e\u307e\u307e\u3067\n\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u4f5c\u696d\u306b\u623b\u308a\u307e\u3059\u3002\n\n\n## \u30dc\u30c3\u30c8\u3068\u306e\u4f1a\u8a71\n\n### Skype4Py\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nec2# wget https://pypi.python.org/packages/source/d/distribute/distribute-0.6.49.tar.gz\nec2# tar xpvf distribute-0.6.49.tar.gz\nec2# python distribute-0.6.49/setup.py install\nec2# easy_install Skype4Py\n```\n\n### \u30dc\u30c3\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\n\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u3001\n\u300c\u30dc\u30c3\u30c8\u300d\u3068\u547c\u3073\u304b\u3051\u308b\u3068\n\u300c|\u03a6\u03c9\u03a6) ...\u300d\u3068\u8fd4\u3059\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3059\u3002\n\n```bash:bot.py \n# encoding: utf-8\n\nimport Skype4Py\nimport time\n\ndef handler(msg, event):\n    if event == u\"RECEIVED\":\n        if msg.Body == u\"\u30dc\u30c3\u30c8\":\n            msg.Chat.SendMessage(u\"|\u03a6\u03c9\u03a6) ...\")\n\ndef main():\n    skype = Skype4Py.Skype(Transport='x11')\n    skype.OnMessageStatus = handler\n    skype.Attach()\n    while True:\n        time.sleep(1) \n\nif __name__ == \"__main__\":\n    main()\n```\n\n### \u30dc\u30c3\u30c8\u3092\u8d77\u52d5\u3059\u308b\n\n```bash\nec2# export DISPLAY=:20;\nec2# python bot.py\n```\n\n\u305d\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u3044\u305f VNC Viewer \u5074\u306b\u3001\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\n\u201c\u3053\u306e\u9078\u629e\u3092\u8a18\u61b6\u3059\u308b\u201d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\u300c\u306f\u3044\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n![VNC-Skype-03.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/4427593e-8678-b026-1db2-081703114585.gif)\n\n\n#### \u4ed6\u306e\u30b9\u30ab\u30a4\u30d7\u304b\u3089\u3001\u30dc\u30c3\u30c8\u306b\u8a71\u3057\u304b\u3051\u3066\u307f\u308b\n\n![unnamed.png](https://qiita-image-store.s3.amazonaws.com/0/30975/e4c4c186-32d8-72a9-af88-9633924a171f.png)\n\n\u3088\u304f\u3067\u304d\u307e\u3057\u305f\u2606\n\n\n### \u5f8c\u7247\u3065\u3051\n\nVNC\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u7d42\u4e86\u3055\u305b\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n(Skype\u306f\u8d77\u52d5\u3057\u305f\u307e\u307e\u306a\u306e\u3067\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093)\n\n\n## \u30dc\u30c3\u30c8\u3092\u80b2\u6210\u3059\u308b\n\n\u30dc\u30c3\u30c8\u306b\u8272\u3005\u306a\u53cd\u5fdc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```python\n# encoding: utf-8\n\nimport Skype4Py\nimport time\nimport re # \u2190\u8ffd\u52a0\n\ndef handler(msg, event):\n\n    if event == u\"RECEIVED\":\n\n        #---- \u5b8c\u5168\u4e00\u81f4\n        if msg.Body == u\"\u304a\u308c\u304c\":\n            msg.Chat.SendMessage(u\"\u304a\u524d\u3067\")\n            return\n\n        #---- \u691c\u7d22\n        if re.search(u\"\u304a\u524d\u304c\", msg.Body, re.S):\n            msg.Chat.SendMessage(u\"\u304a\u308c\u3067\")\n\n        #---- \u8907\u6570\u884c\n        if re.search(u\"\u8d77\u304d\u308d\", msg.Body, re.S):\n            gataMsg = u\"\"\"\u3000\u3000\u3000\u3000\u3000\uff75\uff8a\uff96\uff70!!\n\u3000\u3000\u3000\u3000\u2227\u2227 \u2229\n\u3000\u3000\u3000 (`\uff65\u03c9\uff65)/\n\u3000\u3000\u3000\u2282\u3000\u3000\u30ce\n\u3000\u3000\u3000\u3000(\u3064\u30ce\n\u3000\u3000\u3000\u3000 (\uff89\n\u3000\uff3f\uff3f_\uff0f(\uff3f\uff3f_\n\uff0f\u3000\u3000(\uff3f\uff3f\uff3f\uff0f\n\uffe3\uffe3\uffe3\uffe3\uffe3\uffe3\n\"\"\"\n            msg.Chat.SendMessage(gataMsg)\n\n        #---- \u4e00\u89a7\u62bd\u51fa\n        if re.search(u'\u304a\u308c', msg.Body, re.S):\n            list = re.findall(u'\u304a\u308c', msg.Body, re.S)\n            cnt = len(list)\n            msg.Chat.SendMessage(u\"\u3010\u81ea\u610f\u8b58\u904e\u5270\u8b66\u5831\u3011 \u304a\u308c: \"+str(cnt))\n\n        #---- \u6587\u5b57\u5217\u7f6e\u63db\n        # note: python 2.6\u7cfb\u3060\u3068 re.sub \u3067 flags \u304c\u4f7f\u3048\u306a\u3044...\n        #       http://docs.python.jp/2/library/re.html#re.sub\n        if re.search(u'\u304a\u308c', msg.Body):\n            lines = msg.Body.splitlines()\n            msg.Chat.SendMessage(u'\u7406\u89e3\u3057\u305f\u3002')\n            for line in lines :\n                you = re.sub(u'\u304a\u524d', u'-\u304a\u524d-', line)\n                you = re.sub(u'\u304a\u308c', u'\u304a\u524d', you)\n                you = re.sub(u'-\u304a\u524d-', u'\u304a\u308c', you)\n                msg.Chat.SendMessage(you)\n            msg.Chat.SendMessage(u'\u3060\u306a\u3002')\n\ndef main():\n    skype = Skype4Py.Skype(Transport='x11')\n    skype.OnMessageStatus = handler\n    skype.Attach()\n    while True:\n        time.sleep(1) \n\nif __name__ == \"__main__\":\n    main()\n```\n\n![skype-bot-chat-05.gif](https://qiita-image-store.s3.amazonaws.com/0/30975/cab3309b-a6cc-c03a-f4a6-0a174e1d0d6b.gif)\n\n## \u30dc\u30c3\u30c8\u3092\u30b0\u30eb\u30fc\u30d7\u306b\u62db\u5f85\u3059\u308b\n\nSkype\u30c1\u30e3\u30c3\u30c8\u306b\u306f\u3001\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u3068\u300cP2P\u30d9\u30fc\u30b9\u300d\u306e\u30e2\u30ce\u304c\u3042\u308a\n\u6700\u8fd1\u4f5c\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306f\u3001\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u306e\u30c1\u30e3\u30c3\u30c8\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u300e\u30c1\u30e3\u30c3\u30c8\u306e\u30b3\u30de\u30f3\u30c9\u3068\u5f79\u5272\u3092\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002- Skype Support FAQ\u300f\nhttps://support.skype.com/ja/faq/FA10042/\n\n\u30fb\u30fb\u30fb\u3067\u3001\nSkypeApi\u306e\u4ed5\u69d8\u306a\u306e\u304b\u3001Skype4Py\u306e\u4ed5\u69d8\u306a\u306e\u304b\u3001\u306f\u305f\u307e\u305f\u81ea\u5206\u306e\u66f8\u304d\u65b9\u306e\u554f\u984c\u304b\n\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u3060\u3068\u3001\u30dc\u30c3\u30c8\u304c\u30b0\u30eb\u30fc\u30d7\u3092\u4e0a\u624b\u304f\u8a8d\u8b58\u3057\u3066\u304f\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u305d\u3053\u3067\u3001\n\u201c\u30b0\u30eb\u30fc\u30d7\u306b\u30dc\u30c3\u30c8\u3092\u62db\u5f85\u201d\u3057\u305f\u308a\n\u201c\u30dc\u30c3\u30c8\u304c\u30b0\u30eb\u30fc\u30d7\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u901a\u77e5\u201d\u3057\u305f\u308a\u3057\u305f\u3044\u5834\u5408\u306f\n\u300cP2P\u30d9\u30fc\u30b9\u300d\u3092\u5229\u7528\u3059\u308b\u4e8b\u306b\u3057\u307e\u3059\u3002\n\n\u73fe\u5728\u958b\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7\u304c\n\u300c\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u300d\u306a\u306e\u304b\u300cP2P\u30d9\u30fc\u30b9\u300d\u306a\u306e\u304b\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\n\u30e1\u30c3\u30bb\u30fc\u30b8\u5165\u529b\u6b04\u304b\u3089\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u307e\u3059\u3002\n\n```\n/get name\n```\n\n\u4e0a\u8a18Skype-FAQ\u30da\u30fc\u30b8\u306e\u8aac\u660e\u304b\u3089\u3001\u4e0b\u8a18\u306e\u901a\u308a\u5224\u5225\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n> \u30b0\u30eb\u30fc\u30d7\u540d\u306e\u5fdc\u7b54\u306e\u5148\u982d\u304c\u300c19:...\u300d\u3067\u3042\u308b\u5834\u5408\u306f\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u306e\u30c1\u30e3\u30c3\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u30b0\u30eb\u30fc\u30d7\u540d\u306e\u5fdc\u7b54\u306e\u5148\u982d\u304c\u300c#skypename...\u300d\u3067\u3042\u308b\u5834\u5408\u306fP2P\u30d9\u30fc\u30b9\u306e\u30c1\u30e3\u30c3\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u300cP2P\u30d9\u30fc\u30b9\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u306f\u3001\n\u30e1\u30c3\u30bb\u30fc\u30b8\u5165\u529b\u6b04(\u3069\u3053\u306e\u30c1\u30e3\u30c3\u30c8\u3067\u3082\uff2f\uff2b)\u304b\u3089\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u307e\u3059\u3002\n\n```\n/createmoderatedchat\n```\n\n\u53ef\u80fd\u3067\u3042\u308c\u3070\u3001\u30dc\u30c3\u30c8\u81ea\u8eab\u304c\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u308b\u306e\u304c\u671b\u307e\u3057\u3044\u3067\u3059\u3002\n(\u5e38\u99d0\u3057\u3066\u3044\u308b\u30dc\u30c3\u30c8\u304c\u3001\u7ba1\u7406\u8005\u306b\u306a\u308c\u308b\u70ba)\n\nVNC Viewer \u304b\u3089\u3084\u308b\u306e\u3082\u9762\u5012\u3067\u3059\u306e\u3067\u3001\u304a\u4f7f\u3044\u306ePC\u3067\u30dc\u30c3\u30c8\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\n\u305d\u3053\u3067\u4f5c\u696d\u3059\u308b\u306e\u304c\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u65b0\u3057\u304f\u4f5c\u6210\u3055\u308c\u305f\u300cP2P\u30d9\u30fc\u30b9\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u3001\u30e1\u30f3\u30d0\u30fc\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n## \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u901a\u77e5\u3059\u308b\n\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u53d7\u52d5\u7684\u306b\u53cd\u5fdc\u3055\u305b\u308b\u3060\u3051\u3058\u3083\u306a\u304f\u3001\n\u80fd\u52d5\u7684\u306b\u30dc\u30c3\u30c8\u306e\u65b9\u304b\u3089\u3001\u901a\u77e5\u306a\u3093\u3066\u306e\u3082\u3055\u305b\u3066\u307f\u305f\u3044\u3067\u3059\u3088\u306d\u3002\n\n### \u30e6\u30fc\u30b6\u30fc\u3078\n\n\u901a\u77e5\u5148\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u306e\u3068\u3053\u308d\u306f\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u7b49\u306b\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u767b\u9332\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\n\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0(\u5b9a\u523b\u3001\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u7b49)\u306b\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u901a\u77e5\u3055\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3001\n\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3084\u30a2\u30e9\u30fc\u30c8\u901a\u77e5\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u203b\u4e8b\u524d\u306b\u3001\u30dc\u30c3\u30c8\u3068\u30e6\u30fc\u30b6\u30fc\u3067\u9023\u7d61\u5148\u30ea\u30b9\u30c8\u306e\u767b\u9332\u3092\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082(\u672a\u78ba\u8a8d)\n\n#### \u901a\u77e5\u30b9\u30af\u30ea\u30d7\u30c8\n\n```python:send_message_for_user.py\n# -*- coding: utf-8 -*-\nimport Skype4Py\nimport sys\n\nuser = 'username' # \u8981\u66f8\u304d\u63db\u3048\n\nargvs = sys.argv\nacnt = len(argvs)\n\nskype = Skype4Py.Skype(Transport='x11')\nskype.Attach()\n\nmsg = argvs[1] if acnt > 1 and argvs[1] else '\u5143\u6c17\uff1f'\n\nchat = skype.CreateChatWith(user)\nchat.SendMessage(msg)\n```\n\n#### \u901a\u77e5\u30b3\u30de\u30f3\u30c9\n\n```bash\nec2# export DISPLAY=:20;\nec2# python send_message_for_group.py '\u3042\u306830\u5206\u3067\u30a2\u30cb\u30e1\u304c\u59cb\u307e\u308a\u307e\u3059'\n```\n\n\n### \u30b0\u30eb\u30fc\u30d7\u3078\n\n\u30b0\u30eb\u30fc\u30d7\u3078\u306e\u901a\u77e5\u306f\u3001\u3084\u3084\u7279\u6b8a\u3067\n\u6240\u5c5e\u3057\u3066\u3044\u308b\u30c1\u30e3\u30c3\u30c8\u306e\u4e00\u89a7\u304b\u3089\u5bfe\u8c61\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u63a2\u3057\u51fa\u3057\n\u8a72\u5f53\u306e\u30b0\u30eb\u30fc\u30d7\u3067\u3042\u308b\u5834\u5408\u306b\u306e\u307f\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u901a\u77e5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n#### \u901a\u77e5\u30b9\u30af\u30ea\u30d7\u30c8\n\n```python:send_message_for_group.py\n# -*- coding: utf-8 -*-\nimport Skype4Py\nimport sys\n\nargvs = sys.argv\nacnt = len(argvs)\n\nskype = Skype4Py.Skype(Transport='x11')\nskype.Attach()\n\nmsg = argvs[1] if acnt > 1 and argvs[1] else '\u5143\u6c17\uff1f'\n\nfor chat in skype.Chats :\n    if chat.Name == '#skype_group_name/$1234567890abcdef': # \u8981\u66f8\u304d\u63db\u3048\n        chat.SendMessage(msg)\n```\n\n#### \u901a\u77e5\u30b3\u30de\u30f3\u30c9\n\n```bash\nec2# export DISPLAY=:20;\nec2# python send_message_for_group.py '\u307f\u306a\u3055\u3093\u3001\u304a\u663c\u306e\u6642\u9593\u3067\u3059\u3002'\n```\n\n## \u6700\u5f8c\u306b\n\n\u696d\u52d9\u306b\u4f7f\u7528\u3059\u308b\u5834\u5408\u306a\u3069\u306f\u3001\u304f\u308c\u3050\u308c\u3082\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u9762\u306b\u6c17\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n## \u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\n\n\u25a0 aws marketplace : CentOS 6 (x86_64) - with Updates\nhttps://aws.amazon.com/marketplace/ordering?productId=adc4348e-1dc3-41df-b833-e86ba57a33d6\n\u203bCentOS6\u306eAMI\u306f\u3001\u30b3\u30c1\u30e9\u304b\u3089\n\n\u25a0 CentOS6.3\u306bSkypeBot(Skype4Py)\u3092\u69cb\u7bc9 [2013/03/09]\nhttps://mistymagich.wordpress.com/2013/03/09/centos6-3%E3%81%ABskypebot%E3%82%92%E6%A7%8B%E7%AF%89/\n\u203bSkype\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30b3\u30c1\u30e9\u3092\u6d41\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\n\n\u25a0 Linux\u4e0a\u3067\u52d5\u304fSkype\u7528\u306ebot\u3092\u4f5c\u308b\u65b9\u6cd5 [2010/09/26]\nhttp://d.hatena.ne.jp/moriyoshi/20100926/1285517353\n\u203bSkype4Py\u3092\u4f7f\u3063\u305f\u30b5\u30f3\u30d7\u30ebBot\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30b3\u30c1\u30e9\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6d41\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\n", "tags": ["EC2", "CentOS", "skype", "Skype4Py", "Python"]}