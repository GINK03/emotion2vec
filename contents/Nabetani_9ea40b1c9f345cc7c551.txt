{"context": " More than 1 year has passed since last update.\u554f\u984c http://nabetani.sakura.ne.jp/hena/ord30taxi/\n\u5b9f\u88c5\u30ea\u30f3\u30af\u96c6 http://qiita.com/Nabetani/items/c70417d384720a3339d6\n\u30a4\u30d9\u30f3\u30c8 https://yhpg.doorkeeper.jp/events/22168\n\u3067\u3002\n\u5f53\u65e5\u304a\u898b\u305b\u3057\u305f\u5b9f\u88c5\nDISTS=->(){\n  raw=\"AB1090e  AC180e  AD540r  BC960e  BG1270e  CD400r  CF200e  DE720r  DF510r  EG1050r  FG230r\"\n  raw.scan( /([A-Z]{2})(\\d+)([er])/ ).each.with_object({}){ |(path, dist, city),o|\n    o[path]=[dist.to_i, city.to_sym].freeze\n  }\n}.().freeze\n\ndef solve_impl( paths, dist, cost )\n  return cost if paths.empty?\n  curpos=paths[0]\n  if curpos[0]<dist\n    solve_impl( paths.drop(1), dist-curpos[0], cost )\n  else\n    solve_impl( paths, 200+dist, cost+{e:60, r:50}[curpos[1]] )\n  end\nend\n\ndef solve( src )\n  paths=src.chars.each_cons(2).map{ |a,b|\n    DISTS[a+b] || DISTS[b+a]\n  }\n  start =  \"ABC\".include?(src[0]) ? [995,400] : [845,350]\n  solve_impl( paths, *start ).to_s\nend\n\nDATA.each.map do |line|\n  ix, src, expected = line.split(/\\s+/)\n  next unless src\n  actual = solve( src )\n  ok = actual==expected\n  puts [ ok ? nil : \"**NG**\", ix, src, actual, ok ? nil : expected ].compact.join(\"  \")\n  ok\nend.all?.tap{ |all_ok|\n  puts \"Everything is Okay!\" if all_ok\n}\n__END__\n0 ADFC  510\n1 CFDA  500\n\n\u3044\u3064\u3082\u901a\u308a\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u5927\u534a\u3092\u7701\u7565\u3002\n\u30b9\u30bf\u30c3\u30af\u306e\u6d88\u8cbb\u304c\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u3060\u3051\u3069\u3001\u518d\u5e30\u547c\u3073\u51fa\u3057\u3067\u5b9f\u88c5\u3002\n\u8a08\u7b97\u306e\u30ed\u30b8\u30c3\u30af\u306f\u898b\u3066\u306e\u901a\u308a\u7c21\u5358\u3002solve_impl \u304c\u4e3b\u8981\u90e8\u3002paths \u306e\u7d4c\u8def\u3092\u9032\u3080\u3093\u3060\u3051\u3069\u3001\u8ddd\u96e2 dist \u307e\u3067\u306f\u6599\u91d1\u8a08\u7b97\u6e08\u307f\u3002\u8a08\u7b97\u6e08\u307f\u306e\u6599\u91d1\u306f cost\u3002\u3068\u3044\u3046\u72b6\u6cc1\u3092\u9032\u3081\u3066\u3044\u308b\u3002\n\u521d\u4e57\u308a\u306e\u90e8\u5206\u306f\u518d\u5e30\u547c\u3073\u51fa\u3057\u306b\u306f\u3044\u3089\u306a\u3044\u306e\u3067\u5916\u306b\u51fa\u3057\u3066\u3001 solve \u304c\u62c5\u5f53\u3002\n\u914d\u5217\u306b\u5bfe\u3057\u3066 drop(1) \u3092\u7e70\u308a\u8fd4\u3057\u3066\u3044\u308b\u306e\u304c\u3061\u3087\u3063\u3068\u6b8b\u5ff5\u3067\u3001\u8a08\u7b97\u91cf\u3092\u8003\u3048\u305f\u3089 C++ \u306e std::deque \u306e\u3088\u3046\u306a\u3082\u306e\u306b\u8f09\u305b\u305f\u3044\u3068\u3053\u308d\u3060\u3051\u3069\u3001\u305d\u3046\u3044\u3046\u3082\u306e\u306f\u624b\u8efd\u306b\u306f ruby \u306b\u306f\u306a\u3044\u306e\u3067\u4ed5\u65b9\u306a\u3044\u3057\u3001\u305d\u3093\u306a\u3053\u3068\u3092\u6c17\u306b\u3059\u308b\u524d\u306b\u5272\u308a\u7b97\u3092\u3057\u3066\u8a08\u7b97\u91cf\u3092\u6e1b\u3089\u3059\u3079\u304d\u3002\n\u96e3\u6613\u5ea6\u3068\u3057\u3066\u306f\u666e\u901a\u3050\u3089\u3044\u306b\u306a\u3063\u305f\u307f\u305f\u3044\u3002\n\u51fa\u984c\u8005\u306e\u6c17\u5206\u3068\u3057\u3066\u306f\u3001\u524d\u56de\u306e\u554f\u984c\uff08 http://nabetani.sakura.ne.jp/hena/ord29devdice/ \uff09\u3088\u308a\u3082\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u66f8\u304d\u306b\u304f\u3044\u611f\u3058\u3082\u3059\u308b\u3093\u3060\u3051\u3069\u3002\nciel \u3055\u3093\u304c http://qiita.com/cielavenir/items/14b9f8b38af1c61aca12 \u306b\u66f8\u3044\u3066\u3044\u308b\u901a\u308a\u3001\u521d\u4e57\u308a\u306e\u8ddd\u96e2\u306e1\u306e\u4f4d\u304c 5 \u3067\u3001\u753a\u3068\u753a\u306e\u9593\u306e\u8ddd\u96e2\u306e1\u306e\u4f4d\u304c\u30bc\u30ed\u306a\u306e\u306f\u3001\u5883\u754c\u6761\u4ef6\u3067\u697d\u3092\u3059\u308b\u305f\u3081\u3002\n\u51fa\u984c\u5074\u3082\u53b3\u5bc6\u306b\u5b9a\u7fa9\u3057\u306a\u304f\u3066\u6e08\u3080\u306e\u3067\u697d\u3060\u3057\u3001\u5b9f\u88c5\u5074\u3082\u9069\u5f53\u306b\u66f8\u3044\u3066\u3082\u5408\u3046\u306e\u3067\u697d\u3002\n\u3061\u306a\u307f\u306b\u3002\n\u753a\u306e\u540d\u524d\u300c\u5186\u6765\u300d\u300c\u70ad\u5dde\u300d\u306f\u3001\u30a8\u30f3\u30e9\u30a4\u30c6\u30f3\u30c9 \u3068 \u30ec\u30b8\u30b9\u30bf\u30f3\u30b9 \u306b\u7531\u6765\u3057\u3066\u3044\u308b\u306e\u3067\u300c\u3048\u3093\u3089\u3044\u300d\u300c\u305f\u3093\u3059\u300d\u3068\u8aad\u3080\u3093\u3060\u3051\u3069\u3001\u79c1\u81ea\u8eab\u306f\u304b\u306e\u30b2\u30fc\u30e0\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u306f\u306a\u3044\u3002\n\u554f\u984c http://nabetani.sakura.ne.jp/hena/ord30taxi/\n\u5b9f\u88c5\u30ea\u30f3\u30af\u96c6 http://qiita.com/Nabetani/items/c70417d384720a3339d6\n\u30a4\u30d9\u30f3\u30c8 https://yhpg.doorkeeper.jp/events/22168\n\n\u3067\u3002\n\u5f53\u65e5\u304a\u898b\u305b\u3057\u305f\u5b9f\u88c5\n\n```ruby\nDISTS=->(){\n  raw=\"AB1090e  AC180e  AD540r  BC960e  BG1270e  CD400r  CF200e  DE720r  DF510r  EG1050r  FG230r\"\n  raw.scan( /([A-Z]{2})(\\d+)([er])/ ).each.with_object({}){ |(path, dist, city),o|\n    o[path]=[dist.to_i, city.to_sym].freeze\n  }\n}.().freeze\n\ndef solve_impl( paths, dist, cost )\n  return cost if paths.empty?\n  curpos=paths[0]\n  if curpos[0]<dist\n    solve_impl( paths.drop(1), dist-curpos[0], cost )\n  else\n    solve_impl( paths, 200+dist, cost+{e:60, r:50}[curpos[1]] )\n  end\nend\n\ndef solve( src )\n  paths=src.chars.each_cons(2).map{ |a,b|\n    DISTS[a+b] || DISTS[b+a]\n  }\n  start =  \"ABC\".include?(src[0]) ? [995,400] : [845,350]\n  solve_impl( paths, *start ).to_s\nend\n\nDATA.each.map do |line|\n  ix, src, expected = line.split(/\\s+/)\n  next unless src\n  actual = solve( src )\n  ok = actual==expected\n  puts [ ok ? nil : \"**NG**\", ix, src, actual, ok ? nil : expected ].compact.join(\"  \")\n  ok\nend.all?.tap{ |all_ok|\n  puts \"Everything is Okay!\" if all_ok\n}\n__END__\n0 ADFC  510\n1 CFDA  500\n```\n\n\u3044\u3064\u3082\u901a\u308a\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u5927\u534a\u3092\u7701\u7565\u3002\n\n\u30b9\u30bf\u30c3\u30af\u306e\u6d88\u8cbb\u304c\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u3060\u3051\u3069\u3001\u518d\u5e30\u547c\u3073\u51fa\u3057\u3067\u5b9f\u88c5\u3002\n\n\u8a08\u7b97\u306e\u30ed\u30b8\u30c3\u30af\u306f\u898b\u3066\u306e\u901a\u308a\u7c21\u5358\u3002`solve_impl` \u304c\u4e3b\u8981\u90e8\u3002`paths` \u306e\u7d4c\u8def\u3092\u9032\u3080\u3093\u3060\u3051\u3069\u3001\u8ddd\u96e2 `dist` \u307e\u3067\u306f\u6599\u91d1\u8a08\u7b97\u6e08\u307f\u3002\u8a08\u7b97\u6e08\u307f\u306e\u6599\u91d1\u306f `cost`\u3002\u3068\u3044\u3046\u72b6\u6cc1\u3092\u9032\u3081\u3066\u3044\u308b\u3002\n\u521d\u4e57\u308a\u306e\u90e8\u5206\u306f\u518d\u5e30\u547c\u3073\u51fa\u3057\u306b\u306f\u3044\u3089\u306a\u3044\u306e\u3067\u5916\u306b\u51fa\u3057\u3066\u3001 `solve` \u304c\u62c5\u5f53\u3002\n\n\u914d\u5217\u306b\u5bfe\u3057\u3066 `drop(1)` \u3092\u7e70\u308a\u8fd4\u3057\u3066\u3044\u308b\u306e\u304c\u3061\u3087\u3063\u3068\u6b8b\u5ff5\u3067\u3001\u8a08\u7b97\u91cf\u3092\u8003\u3048\u305f\u3089 C++ \u306e `std::deque` \u306e\u3088\u3046\u306a\u3082\u306e\u306b\u8f09\u305b\u305f\u3044\u3068\u3053\u308d\u3060\u3051\u3069\u3001\u305d\u3046\u3044\u3046\u3082\u306e\u306f\u624b\u8efd\u306b\u306f ruby \u306b\u306f\u306a\u3044\u306e\u3067\u4ed5\u65b9\u306a\u3044\u3057\u3001\u305d\u3093\u306a\u3053\u3068\u3092\u6c17\u306b\u3059\u308b\u524d\u306b\u5272\u308a\u7b97\u3092\u3057\u3066\u8a08\u7b97\u91cf\u3092\u6e1b\u3089\u3059\u3079\u304d\u3002\n\n\u96e3\u6613\u5ea6\u3068\u3057\u3066\u306f\u666e\u901a\u3050\u3089\u3044\u306b\u306a\u3063\u305f\u307f\u305f\u3044\u3002\n\u51fa\u984c\u8005\u306e\u6c17\u5206\u3068\u3057\u3066\u306f\u3001\u524d\u56de\u306e\u554f\u984c\uff08 http://nabetani.sakura.ne.jp/hena/ord29devdice/ \uff09\u3088\u308a\u3082\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u66f8\u304d\u306b\u304f\u3044\u611f\u3058\u3082\u3059\u308b\u3093\u3060\u3051\u3069\u3002\n\nciel \u3055\u3093\u304c http://qiita.com/cielavenir/items/14b9f8b38af1c61aca12 \u306b\u66f8\u3044\u3066\u3044\u308b\u901a\u308a\u3001\u521d\u4e57\u308a\u306e\u8ddd\u96e2\u306e1\u306e\u4f4d\u304c 5 \u3067\u3001\u753a\u3068\u753a\u306e\u9593\u306e\u8ddd\u96e2\u306e1\u306e\u4f4d\u304c\u30bc\u30ed\u306a\u306e\u306f\u3001\u5883\u754c\u6761\u4ef6\u3067\u697d\u3092\u3059\u308b\u305f\u3081\u3002\n\u51fa\u984c\u5074\u3082\u53b3\u5bc6\u306b\u5b9a\u7fa9\u3057\u306a\u304f\u3066\u6e08\u3080\u306e\u3067\u697d\u3060\u3057\u3001\u5b9f\u88c5\u5074\u3082\u9069\u5f53\u306b\u66f8\u3044\u3066\u3082\u5408\u3046\u306e\u3067\u697d\u3002\n\n\u3061\u306a\u307f\u306b\u3002\n\u753a\u306e\u540d\u524d\u300c\u5186\u6765\u300d\u300c\u70ad\u5dde\u300d\u306f\u3001\u30a8\u30f3\u30e9\u30a4\u30c6\u30f3\u30c9 \u3068 \u30ec\u30b8\u30b9\u30bf\u30f3\u30b9 \u306b\u7531\u6765\u3057\u3066\u3044\u308b\u306e\u3067\u300c\u3048\u3093\u3089\u3044\u300d\u300c\u305f\u3093\u3059\u300d\u3068\u8aad\u3080\u3093\u3060\u3051\u3069\u3001\u79c1\u81ea\u8eab\u306f\u304b\u306e\u30b2\u30fc\u30e0\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u306f\u306a\u3044\u3002\n\n\n", "tags": ["yhpg", "\u3069\u3046\u66f8\u304f", "Ruby"]}