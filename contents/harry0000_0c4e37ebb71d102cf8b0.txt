{"context": "\n\n\u3053\u308c\u306a\u306b\uff1f\n2016/11/16(\u6c34)\u958b\u50ac\u306eScala\u52c9\u5f37\u4f1a\u7b2c185\u56de in \u672c\u90f7\u306e\u767a\u8868\u8cc7\u6599\u3067\u3059\u3002\n\nScala\u52c9\u5f37\u4f1a in \u672c\u90f7 \u3068\u306f\n\n\u9694\u9031\u6c34\u66dc\u65e5\u306b\u82b8\u8005\u6771\u4eac\u30a8\u30f3\u30bf\u30fc\u30c6\u30a4\u30f3\u30e1\u30f3\u30c8\u682a\u5f0f\u4f1a\u793e\u69d8(\u672c\u90f7)\u3067\u958b\u50ac\u3055\u308c\u3066\u3044\u308bScala\u52c9\u5f37\u4f1a\n\u5c71\u5f62\u770c\u9152\u7530\u5e02\u3067\u30b5\u30c6\u30e9\u30a4\u30c8\u4f1a\u5834\u304c\u958b\u304b\u308c\u3066\u3044\u307e\u3059\nScala\u52c9\u5f37\u4f1a\u7b2c185\u56de in \u9152\u7530\u30b5\u30c6\u30e9\u30a4\u30c8\n\n\n\n\u81ea\u5df1\u7d39\u4ecb\nharry0000\nhttp://qiita.com/harry0000\nhttps://github.com/harry0000\n\n\u8266\u3053\u308c \u75327\u63d0\u7763\n\u8266\u3053\u308c\u30a2\u30fc\u30b1\u30fc\u30c9 \u4e59\u63d0\u7763\n\u6575\u6cca\u5730\u306b\u7a81\u5165\u305b\u3088!! \u4e59\u4f5c\u6226 4\u5468\nScala\u6b74\u306f10\u30f5\u6708\u7a0b\u5ea6\n@cakesolutions\u306b\u30d6\u30ed\u30c3\u30af\u3055\u308c\u308b\u7a0b\u5ea6\u306eScala\u80fd\u529b1\n\n\u203b \u8266\u3053\u308c = \u300c\u8266\u968a\u3053\u308c\u304f\u3057\u3087\u3093-\u8266\u3053\u308c-\u300d\u3002\u8ecd\u8266\u3092\u64ec\u4eba\u5316\u3057\u305f\u30ab\u30fc\u30c9\u30b2\u30fc\u30e0\u3002\n\n\n\u305d\u3046\u3060\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3088\u3046 (\u52d5\u6a5f)\n\n\n\u8266\u3053\u308c\u30a2\u30fc\u30b1\u30fc\u30c9\u653b\u7565Wiki\u306e2\u3064\u306e\u8868\u306b\u5dee\u5206\u304c\u3042\u3063\u3066\u56f0\u308b\n\n\u6d77\u57df\u5225\u30c9\u30ed\u30c3\u30d7\u8868\n\u9006\u5f15\u304d\u30c9\u30ed\u30c3\u30d7\u8868\n\n\n\n\u898b\u305b\u65b9\u304c\u9055\u3046\u3060\u3051\u3067\u3001\u672c\u6765\u306f\u540c\u3058\u30c7\u30fc\u30bf\n\n\u7247\u65b9\u306b\u7de8\u96c6\u6f0f\u308c\u304c\u751f\u3058\u308b\u3068\u5dee\u5206\u304c\u3067\u304d\u3066\u3057\u307e\u3046\n\u7de8\u96c6\u8005\u306f2\u3064\u306e\u8868\u3092\u4e00\u7dd2\u306b\u7de8\u96c6\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\uff08\u3064\u3089\u3044\uff09\n\n\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u9006\u5f15\u304d\u306e\u8868\u304b\u3089\u6d77\u57df\u5225\u306e\u8868\u3092\u751f\u6210\u3057\u3001\u5dee\u5206\u3092\u89e3\u6d88\u3059\u308b\u3053\u3068\u306b\n\nWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\uff01\n\n\n\n\u203b \u6d77\u57df = \u30b2\u30fc\u30e0\u306e\u30b9\u30c6\u30fc\u30b8\u3002\n\u203b \u8266\u5a18 = \u304b\u3093\u3080\u3059\u3002\u30b2\u30fc\u30e0\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3002\n\n\nscala-scraper \u3068\u306f\nhttps://github.com/ruippeixotog/scala-scraper\n\n\"scala scraper\"\u3067\u30b0\u30b0\u308b\u3068\u6700\u521d\u306b\u51fa\u3066\u304f\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\uff08\u5f37\u3044\uff09\n\u4f5c\u8005\u306fScala contributor\u306eruippeixotog\u6c0f\n2.12.0\u3067ListSet\u3068ListMap\u306e\u633f\u5165\u9806\u306e\u8d70\u67fb\u4fdd\u8a3c\u3068\u6027\u80fd\u6539\u5584\u3092\u3055\u308c\u305f\u65b9\nscalaz\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\nScala 2.12 Support\u306fhttp4s\u306e\u5bfe\u5fdc\u5f85\u3061\uff1f\n2.11.8\u3067\u306e\u4f7f\u7528\u524d\u63d0\u3067\u8a71\u3092\u9032\u3081\u307e\u3059\n\n\u6700\u521d\u3001\u4f7f\u7528\u7d4c\u9a13\u306e\u3042\u3063\u305fSelenium\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\n\u9045\u3044 & \u9759\u7684\u306a\u30da\u30fc\u30b8\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u306b\u5207\u308a\u66ff\u3048\u307e\u3057\u305f\u3002\n\n\nWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u6d41\u308c\n\n\u30da\u30fc\u30b8(HTML)\u306e\u53d6\u5f97\n\u8981\u7d20\u306e\u30d1\u30fc\u30b9\n\n\n\u30c7\u30fc\u30bf\u53d6\u5f97\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n\n\n\u597d\u304d\u306a\u3088\u3046\u306b\u30c7\u30fc\u30bf\u3092\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u3059\u308b\n\n\n\n\u30da\u30fc\u30b8(HTML)\u306e\u53d6\u5f97 (1 / 2)\nscala-scraper\u3067\u306fBrowser\u3067\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001Document\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\nval doc: Document = JsoupBrowser().get(\"https://www.google.co.jp/\")\n\nBrowser\u306f\u4ee5\u4e0b\u306e2\u3064\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://github.com/ruippeixotog/scala-scraper#browsers\n\n\nJsoupBrowser\n\n\njsoup\u3092\u4f7f\u7528\u3057\u305fBrowser\n\n\u9759\u7684\u306a\u30da\u30fc\u30b8\u7528\nJavaScript\u3092\u5b9f\u884c\u3057\u306a\u3044\n\u901f\u3044\n\n\n\nHtmlUnitBrowser\n\n\nHtmlUnit\u3092\u4f7f\u7528\u3057\u305fGUI-less Browser\n\n\u52d5\u7684\u306a\u30da\u30fc\u30b8\u7528\nJavaScript\u3092\u5b9f\u884c\u3059\u308b (\u5b9f\u884c\u3059\u308b\u3068\u306f\u8a00\u3063\u3066\u3044\u306a\u3044)\n\n\n\n\n\n\u30da\u30fc\u30b8(HTML)\u306e\u53d6\u5f97 (2 / 2)\nBrowser\u304b\u3089Document\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u306f3\u7a2e\u985e\u3042\u308a\u307e\u3059\u3002\n// 1. Web\u4e0a\u306e\u30da\u30fc\u30b8\u304b\u3089\nbrowser.get(url)\nbrowser.post(url, form)\n\n// 2. HTML\u30d5\u30a1\u30a4\u30eb\u304b\u3089\nbrowser.parseFile(file)\nbrowser.parseInputStream(stream, charset)\nbrowser.parseResource(name, charset)\n\n// 3. \u6587\u5b57\u5217\u304b\u3089\nbrowser.parseString(html)\n\n\n\nparseResource()\u306f\u3001Resource\u3092InputStream\u3067\u958b\u3044\u3066parseInputStream()\u3092\u547c\u3076\n\u8a73\u7d30\u306fBrowser.scala\u3067\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\n\n\n\nDocument\n\n\u30d6\u30e9\u30a6\u30b6(JavaScript)\u3067\u306edocument\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u76f8\u5f53\u3059\u308btrait\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\nlocation: String\n\nroot: Element\n\ntitle: String = root.select(\"title\").headOption.fold(\"\")(_.text.trim)\n\nhead: Element = root.select(\"head\").head\n\nbody: Element = root.select(\"body\").head\n\ntoHtml: String\n\n\n\nElement\n\n\u30d6\u30e9\u30a6\u30b6(JavaScript)\u3067\u306eElement\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u76f8\u5f53\u3059\u308btrait\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\ntagName: String\n\nparent: Option[Element]\n\nchildren: Iterable[Element]\n\nsiblings: Iterable[Element]\n\nattrs: Map[String, String]\n\nhasAttr(name: String): Boolean\n\nattr(name: String): String\n\ntext: String\n\ninnerHtml: String\n\nouterHtml: String\n\nselect(query: String): ElementQuery\n\nElementQuery\u306fIterable[Element]\u3092\u7d99\u627f\u3057\u3066\u3044\u308btrait\u3067\u3059\u3002\ntrait ElementQuery extends Iterable[Element]\n\n\n\n\u8981\u7d20\u306e\u53d6\u5f97\n\u3068\u308a\u3042\u3048\u305a\u9ed9\u3063\u3066\u4ee5\u4e0b\u3092import\nimport net.ruippeixotog.scalascraper.dsl.DSL._\nimport net.ruippeixotog.scalascraper.dsl.DSL.Extract._\nimport net.ruippeixotog.scalascraper.dsl.DSL.Parse._\n\n\u57fa\u672c\u5f62(\u30a4\u30e1\u30fc\u30b8)\nElement >> Extractor\n\nElement >?> Extractor\n\nElement ::= (Document | Element | Functor[Element])\nFunctor ::= (Option | List | Either | ...other functor)\n\n\n\u6697\u9ed9\u306e\u578b\u5909\u63db\u3084\u3089\u306a\u3093\u3084\u3089\u304c\u8272\u3005\u7d61\u3080\u305f\u3081\u3001\u6b63\u78ba\u306a\u8868\u73fe\u3067\u306f\u306a\u304f\u3001\u3042\u304f\u307e\u3067\u30a4\u30e1\u30fc\u30b8\n\u5f15\u6570\u306eExtractor\u306f1\uff5e3\u500b\u6e21\u3059\u3053\u3068\u304c\u53ef\u80fd\u30672\u30012\u500b\u4ee5\u4e0a\u6e21\u3057\u305f\u5834\u5408\u306f\u7d50\u679c\u304c\u30bf\u30d7\u30eb\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\n\n\u4f8b\nval main: Element = doc >> element(\"#main\")\n\n\n\nContentExtractors\n\n\u3053\u308c\u3060\u3051\u899a\u3048\u3066\u304a\u3051\u3070\u5927\u4e08\u592b\u306a\u611f\u3058\u306eExtractor\n\n\u8981\u7d20\u53d6\u5f97\n\nelement(query): Element\nelements(query): ElementQuery\nelementList(query): List[Element]\n\n\n\u30c6\u30ad\u30b9\u30c8\u53d6\u5f97\n\ntext(query): String\ntexts(query): Iterable[String]\nallText(query): String\n\n\n\u5c5e\u6027\u53d6\u5f97\n\nattr(name)(query): String\nattrs(name)(query): Iterable[String]\n\n\n\u30d5\u30a9\u30fc\u30e0(input)\u30c7\u30fc\u30bf\u53d6\u5f97\n\nformData(query): Map[String, String]\nformDataAndAction(query): (Map[String, String], String)\n\n\n\n>>\n\n\u5358\u7d14\u306b\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308b\u3002\n\n\u8981\u7d20\u304c\u5b58\u5728\u3057\u306a\u304b\u3063\u305f\u5834\u5408\n\n\n\u5358\u4e00\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308bExtractor\u306f\u3001NoSuchElementException\u304c\u767a\u751f\n\u8907\u6570\u8981\u7d20\u3092\u53d6\u5f97\u6642\u306f\u3001\u9ed9\u3063\u3066Nil\u3092\u8fd4\u3057\u3066\u304f\u308b\u3002\u3002\u3002\n\n\n\n\u203b\n\u5358\u4e00\u8981\u7d20\u53d6\u5f97: element()\u3001text()\u3001attr()\n\u8907\u6570\u8981\u7d20\u53d6\u5f97: elements()\u3001texts()\u3001attrs()\u306a\u3069\n\n\n>> \u306e\u4f7f\u7528\u4f8b\nval doc = JsoupBrowser().get(\"http://weather.yahoo.co.jp/weather/\")\n\nfor {\n  area <- doc >> elements(\"#map > ul > li > a > dl\")\n  (name, weather) = area >> (text(\"dt\"), texts(\"dd\"))\n} println(s\"$name - ${weather.mkString(\" \")}\")\n\nYahoo!\u5929\u6c17\u30fb\u707d\u5bb3 - \u5929\u6c17\u4e88\u5831 / \u9632\u707d\u60c5\u5831\u304b\u3089\u5730\u57df\u3054\u3068\u306e\u5929\u6c17\u3092\u53d6\u5f97\u3002\n\n\n>?>\n\nOption\u306b\u5305\u3093\u3067\u5024\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u8981\u7d20\u304c\u5b58\u5728\u3057\u306a\u304b\u3063\u305f\u5834\u5408\n\n\n\u5358\u4e00\u306e\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308bExtractor: None\u3092\u8fd4\u3059\u3002\n\u8907\u6570\u306e\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308bExtractor: Some(Nil)\u3092\u8fd4\u3059\u3002\u3002\u3002\n\n\n\n\n\n>?> \u306e\u4f7f\u7528\u4f8b\nval doc = JsoupBrowser().get(\"http://b.hatena.ne.jp/ctop/it\")\n\nfor {\n  main     <- doc >?> element(\"#main div\")\n  topEntry <- main >?> element(\"div[data-track-section=hotentry] > ul > li.entry-unit\")\n  entries  <- main >?> elementList(\"div > ul[data-track-section=hotentry] > li.entry-unit\")\n  entry    <- topEntry +: entries\n  users    <- entry >?> text(\"ul.users\")\n  contents <- entry >?> element(\"div.entry-contents h3\")\n  url      <- contents >?> attr(\"href\")(\"a\")\n  title = contents.text\n} {\n  println(s\"$users,$title,$url\")\n}\n\n\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ab\u30c6\u30b4\u30ea\u306e\u8a18\u4e8b\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u53d6\u5f97\u3002\nOption\u306a\u306e\u3067for\u5f0f\u304c\u4f7f\u3048\u307e\u3059\u3002\n\n\n\u8981\u7d20\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\nContent Validation\nhttps://github.com/ruippeixotog/scala-scraper#content-validation\nElement ~/~ validator(<extractor>)(<matcher>)\n\n<extractor>\u3067\u62bd\u51fa\u3057\u305f\u8981\u7d20\u304c<matcher>\u3092\u6e80\u305f\u3059\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n~/~\u306fscala.util.Either\u3092\u8fd4\u3059\u306e\u3067\u3001for\u5f0f\u3067\u4f7f\u3048\u306a\u3044\u3053\u3068\u3082\u306a\u3044\u3067\u3059\u3002\nmatch\u5f0f\u306e\u305f\u3081\u306b\u3001VSuccess\u3068VFailure\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n~/~ \u306e\u4f7f\u7528\u4f8b\nval doc = JsoupBrowser().get(\"https://www.google.co.jp/\")\n\ndoc ~/~ validator(text(\"#hplogo\"))(_.nonEmpty) match {\n  case VSuccess(d) => println(\"\u3044\u3064\u3082\u306eGoogle\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff1f\")\n  case VFailure(_) => println(s\"\u4eca\u65e5\u306f\u4f55\u306e\u65e5\uff1f : ${(doc >> attrs(\"alt\")(\"img\")).mkString}\")\n}\n\ngoogle.co.jp\u306elogo\u306e\u30c6\u30ad\u30b9\u30c8\u304c\u7a7a\u3067\u306a\u3044\u3053\u3068\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u307e\u3059\u3002\n\u666e\u6bb5logo\u306b\u306f\u300c\u65e5\u672c\u300d\u3068\u30c6\u30ad\u30b9\u30c8\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u304c\u3001\n\u4f55\u304b\u7279\u5225\u306a\u65e5\u3060\u3063\u305f\u5834\u5408\u3001\u753b\u50cf\u306a\u3069\u306b\u5dee\u3057\u5909\u308f\u3063\u3066\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n2016/11/13\n\u3044\u3064\u3082\u306eGoogle\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff1f\n2016/11/14\n\u4eca\u65e5\u306f\u4f55\u306e\u65e5\uff1f : \u30d5\u30ec\u30c7\u30ea\u30c3\u30af \u30d0\u30f3\u30c6\u30a3\u30f3\u30b0 \u751f\u8a95125\u5468\u5e74\n\n\nTips: >>\u3001>?>\u3001~/~\u306f\u7d9a\u3051\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\nElement\u3084Functor[Element]\u3067\u3042\u308c\u3070\u3053\u308c\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u4f7f\u3048\u308b\u305f\u3081\u3001\u7d9a\u3051\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8a66\u3057\u306b\u3044\u3063\u3071\u3044\u7e4b\u3052\u3066\u307f\u308b\u3068\u2026\nval rowTexts = doc ~/~ validator(text(\"#account\"))(_ == \"Logged in\") >?> element(\"#main\") >?> elementList(\"table tbody tr\") >> texts(\"td\")\n\n\u3053\u306e\u3068\u304drowTexts\u306e\u578b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\nval rowTexts: Either[Unit, Option[Option[List[Iterable[String]]]]]\n\nmatch\u5f0f\u3067\u306f\u2026\nrowTexts match {\n  case VSuccess(Some(Some(rows))) if rows.nonEmpty => rows.map(texts => texts.mkString(\",\")).foreach(println)\n  case VSuccess(_) => println(\"Logged in. But ...\")\n  case VFailure(_) => println(\"Not logged in.\")\n}\n\n\n\nTips: \u8907\u6570\u306e\u8981\u7d20\u3092\u53d6\u5f97\u3057\u3066Nil\u304c\u8fd4\u3063\u3066\u304d\u305f\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306b\u3057\u305f\u3044\n>?>\u3067Option\u304c\u8fd4\u308b\u306e\u3067\u3001Option.filter(_.nonEmpty)\u3067None\u306b\u5909\u63db\u3057\u307e\u3059\u3002\nOption.toRight()\u3067Either\u306b\u3082\u3067\u304d\u307e\u3059\u3002\nfor {\n  rows <- (doc >?> elementList(\"#body table tbody tr\")).filter(_.nonEmpty).toRight(\"Could not find table rows.\").right\n} yield {\n  // do something.\n}\n\n\n\nTips: query\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u3080\nquery\u3092\u30b3\u30fc\u30c9\u306b\u30d9\u30bf\u66f8\u304d\u3059\u308b\u3068\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u30da\u30fc\u30b8\u306e\u30c7\u30b6\u30a4\u30f3\u5909\u66f4\u306a\u3069\u3067\n\u30b3\u30fc\u30c9\u4fee\u6b63\u3068\u518d\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nscala-scraper\u306b\u306fquery\u3092conf\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://github.com/ruippeixotog/scala-scraper#integration-with-typesafe-config\n\u305f\u3060\u3057\u30d9\u30fc\u30bf\u7248\u306e\u6a5f\u80fd\u3067\u3001\u4ed5\u69d8\u304c\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\nNOTE: this feature is in a beta stage. Please expect API changes in future releases.\n\n\u203b \u30e1\u30bd\u30c3\u30c9\u306e\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\n\nConfigLoadingHelpers.scala\nHtmlExtractor.scala\nHtmlValidator.scala\n\n\n\n\u52d5\u7684\u306a\u30da\u30fc\u30b8\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306f\u2026\uff1f\n\u8a66\u3057\u306bHtmlUnitBrowser\u3067AngularJS(v1.4.0)\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u30da\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3068...\nhttps://kancolle-arcade.net/ac/#/place\n11 12, 2016 6:27:02 \u5348\u5f8c com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter runtimeError\n\u91cd\u5927: runtimeError: message=[An invalid or illegal selector was specified (selector: '*,:x' error: Invalid selector: :x).] sourceName=[https://kancolle-arcade.net/ac/scripts/vendor.59dd5e26.js] line=[24] lineSource=[null] lineOffset=[0]\n11 12, 2016 6:27:03 \u5348\u5f8c com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify\n\u8b66\u544a: Obsolete content type encountered: 'text/javascript'.\n\n\u30c0\u30e1\u307f\u305f\u3044\u3067\u3059\u306d\uff08\u8ae6\u89b3\uff09\n\n\nHtmlUnit\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308bJS\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\nhttp://htmlunit.sourceforge.net/#JavaScript_Support\n\njQuery 1.8.2: Full support\nMochiKit 1.4.1: Full support\nGWT 2.5.0: Full support\nSarissa 0.9.9.3: Full support\nMooTools 1.2.1: Full support\nPrototype 1.7.1 (1.6.0, 1.6.1): Very good support\nExt JS 2.2: Very good support\nDojo 1.0.2: Good support\nYUI 2.3.0: Good support\n\n\u53e4\u3044\u2026\n\u305d\u3053\u3067Selenium\u3067\u3059\u3088\uff01\uff08\u672c\u672b\u8ee2\u5012\uff09\n\n\nWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u3059\u3059\u3081\n\nWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u8eab\u8fd1\u306a\u554f\u984c\u3092\u89e3\u6c7a\u3067\u304d\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\n\u7c21\u5358\u306a\u30a2\u30d7\u30ea\u306a\u3089Scala\u306e\u5165\u9580\u3084\u52c9\u5f37\u306b\u6700\u9069\n\nScala\u3067\u4f5c\u308a\u305f\u3044\u30a2\u30d7\u30ea\u304c\u306a\u304f\u3066\u56f0\u3063\u3066\u308b\u4eba\u306f\u3001\u3068\u308a\u3042\u3048\u305aWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u307f\u3066\u306f\uff1f\n\n\u307e\u305a\u306f\u666e\u6bb5\u898b\u3066\u308b\u30da\u30fc\u30b8\u304b\u3089\u53ce\u96c6\u3059\u308b\u3068\u3088\u3055\u3052\u306a\u60c5\u5831\u3092\u63a2\u3059\u3068\u3053\u308d\u304b\u3089\n\u753b\u50cfURL\u3092\u53ce\u96c6\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u304f\u3063\u305f\u308a etc.\n\n\n\n\n\n\u53c2\u8003\u8cc7\u6599\n\n\u578b\u30af\u30e9\u30b9\u306e\u7d39\u4ecb \u00b7 Scala\u7814\u4fee\u30c6\u30ad\u30b9\u30c8\nhttps://dwango.github.io/scala_text/typeclass.html#functor\nFunctor\u306b\u3064\u3044\u3066\n\u5b9f\u8df5Excel\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\nhttp://www.slideshare.net/hilotech/excel-40727515\n\u30c6\u30fc\u30d6\u30eb\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306a\u3089Excel\u3067\u3082\u3067\u304d\u308b\u3088\u3001\u3068\u3044\u3046\u304a\u8a71\n\n\n\n\n\n\u30d5\u30a9\u30ed\u30fc\u3057\u305f\u3089\u30d6\u30ed\u30c3\u30af\u3055\u308c\u307e\u3057\u305f\u3002Twitter\u4e0a\u3067\u306e\u304b\u3089\u307f\u306f\u4e00\u5207\u306a\u304b\u3063\u305f\u306e\u3067\u7406\u7531\u306f\u4e0d\u660e\u3002\u00a0\u21a9\n\n\n3\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u305e\u308cExtractor\u30921\uff5e3\u500b\u53d7\u3051\u53d6\u308b\u305f\u3081\u30024\u500b\u4ee5\u4e0a\u6e21\u3057\u305f\u3044\u5834\u5408\u306f\u30d7\u30eb\u30ea\u30af\u3092\u51fa\u3057\u307e\u3057\u3087\u3046\uff01\u00a0\u21a9\n\n\n\n## \u3053\u308c\u306a\u306b\uff1f\n\n2016/11/16(\u6c34)\u958b\u50ac\u306e[Scala\u52c9\u5f37\u4f1a\u7b2c185\u56de in \u672c\u90f7](http://rpscala.connpass.com/event/45007/)\u306e\u767a\u8868\u8cc7\u6599\u3067\u3059\u3002\n\n### Scala\u52c9\u5f37\u4f1a in \u672c\u90f7 \u3068\u306f\n\n* \u9694\u9031\u6c34\u66dc\u65e5\u306b\u82b8\u8005\u6771\u4eac\u30a8\u30f3\u30bf\u30fc\u30c6\u30a4\u30f3\u30e1\u30f3\u30c8\u682a\u5f0f\u4f1a\u793e\u69d8(\u672c\u90f7)\u3067\u958b\u50ac\u3055\u308c\u3066\u3044\u308bScala\u52c9\u5f37\u4f1a\n\n* \u5c71\u5f62\u770c\u9152\u7530\u5e02\u3067\u30b5\u30c6\u30e9\u30a4\u30c8\u4f1a\u5834\u304c\u958b\u304b\u308c\u3066\u3044\u307e\u3059\n[Scala\u52c9\u5f37\u4f1a\u7b2c185\u56de in \u9152\u7530\u30b5\u30c6\u30e9\u30a4\u30c8](http://rpscala.connpass.com/event/45013/)\n\n---\n\n## \u81ea\u5df1\u7d39\u4ecb\n\nharry0000\n\nhttp://qiita.com/harry0000\nhttps://github.com/harry0000\n\n* \u8266\u3053\u308c \u75327\u63d0\u7763\n\n* \u8266\u3053\u308c\u30a2\u30fc\u30b1\u30fc\u30c9 \u4e59\u63d0\u7763\n\u6575\u6cca\u5730\u306b\u7a81\u5165\u305b\u3088!! \u4e59\u4f5c\u6226 4\u5468\n\n* Scala\u6b74\u306f10\u30f5\u6708\u7a0b\u5ea6\n\n* [@cakesolutions](https://twitter.com/cakesolutions)\u306b\u30d6\u30ed\u30c3\u30af\u3055\u308c\u308b\u7a0b\u5ea6\u306eScala\u80fd\u529b[^1]\n\n\u203b \u8266\u3053\u308c = \u300c\u8266\u968a\u3053\u308c\u304f\u3057\u3087\u3093-\u8266\u3053\u308c-\u300d\u3002\u8ecd\u8266\u3092\u64ec\u4eba\u5316\u3057\u305f\u30ab\u30fc\u30c9\u30b2\u30fc\u30e0\u3002\n\n[^1]: \u30d5\u30a9\u30ed\u30fc\u3057\u305f\u3089\u30d6\u30ed\u30c3\u30af\u3055\u308c\u307e\u3057\u305f\u3002Twitter\u4e0a\u3067\u306e\u304b\u3089\u307f\u306f\u4e00\u5207\u306a\u304b\u3063\u305f\u306e\u3067\u7406\u7531\u306f\u4e0d\u660e\u3002\n\n---\n\n## \u305d\u3046\u3060\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3088\u3046 (\u52d5\u6a5f)\n\n* [\u8266\u3053\u308c\u30a2\u30fc\u30b1\u30fc\u30c9\u653b\u7565Wiki](http://wikiwiki.jp/kancolle-a/)\u306e2\u3064\u306e\u8868\u306b\u5dee\u5206\u304c\u3042\u3063\u3066\u56f0\u308b\n  * [\u6d77\u57df\u5225\u30c9\u30ed\u30c3\u30d7\u8868](http://wikiwiki.jp/kancolle-a/?%BD%D0%B7%E2%A5%C9%A5%ED%A5%C3%A5%D7%2F%A5%C9%A5%ED%A5%C3%A5%D7%C9%BD1)\n  * [\u9006\u5f15\u304d\u30c9\u30ed\u30c3\u30d7\u8868](http://wikiwiki.jp/kancolle-a/?%B4%CF%CC%BC%A5%C9%A5%ED%A5%C3%A5%D7%B5%D5%B0%FA%A4%AD%2F%A5%C6%A1%BC%A5%D6%A5%EB)\n\n* \u898b\u305b\u65b9\u304c\u9055\u3046\u3060\u3051\u3067\u3001\u672c\u6765\u306f\u540c\u3058\u30c7\u30fc\u30bf\n  * \u7247\u65b9\u306b\u7de8\u96c6\u6f0f\u308c\u304c\u751f\u3058\u308b\u3068\u5dee\u5206\u304c\u3067\u304d\u3066\u3057\u307e\u3046\n  * \u7de8\u96c6\u8005\u306f2\u3064\u306e\u8868\u3092\u4e00\u7dd2\u306b\u7de8\u96c6\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\uff08\u3064\u3089\u3044\uff09\n\n* \u3068\u308a\u3042\u3048\u305a\u3001\u9006\u5f15\u304d\u306e\u8868\u304b\u3089\u6d77\u57df\u5225\u306e\u8868\u3092\u751f\u6210\u3057\u3001\u5dee\u5206\u3092\u89e3\u6d88\u3059\u308b\u3053\u3068\u306b\n  * Web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\uff01\n\n\u203b \u6d77\u57df = \u30b2\u30fc\u30e0\u306e\u30b9\u30c6\u30fc\u30b8\u3002\n\u203b \u8266\u5a18 = \u304b\u3093\u3080\u3059\u3002\u30b2\u30fc\u30e0\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3002\n\n---\n\n## scala-scraper \u3068\u306f\n\nhttps://github.com/ruippeixotog/scala-scraper\n\n* \"scala scraper\"\u3067\u30b0\u30b0\u308b\u3068\u6700\u521d\u306b\u51fa\u3066\u304f\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\uff08\u5f37\u3044\uff09\n\n* \u4f5c\u8005\u306fScala contributor\u306e[ruippeixotog](https://github.com/ruippeixotog)\u6c0f\n[2.12.0\u3067`ListSet`\u3068`ListMap`\u306e\u633f\u5165\u9806\u306e\u8d70\u67fb\u4fdd\u8a3c\u3068\u6027\u80fd\u6539\u5584\u3092\u3055\u308c\u305f\u65b9](https://github.com/scala/scala/pull/5103)\n\n\n* [scalaz](https://github.com/scalaz/scalaz)\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\n\n* Scala 2.12 Support\u306f[http4s\u306e\u5bfe\u5fdc\u5f85\u3061](https://github.com/http4s/http4s/pull/742)\uff1f\n2.11.8\u3067\u306e\u4f7f\u7528\u524d\u63d0\u3067\u8a71\u3092\u9032\u3081\u307e\u3059\n\n\u6700\u521d\u3001\u4f7f\u7528\u7d4c\u9a13\u306e\u3042\u3063\u305f[Selenium](http://docs.seleniumhq.org/)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\n\u9045\u3044 & \u9759\u7684\u306a\u30da\u30fc\u30b8\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u306b\u5207\u308a\u66ff\u3048\u307e\u3057\u305f\u3002\n\n---\n\n## Web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u6d41\u308c\n\n1. \u30da\u30fc\u30b8(HTML)\u306e\u53d6\u5f97\n2. \u8981\u7d20\u306e\u30d1\u30fc\u30b9\n  * \u30c7\u30fc\u30bf\u53d6\u5f97\n  * \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n3. \u597d\u304d\u306a\u3088\u3046\u306b\u30c7\u30fc\u30bf\u3092\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u3059\u308b\n\n---\n\n## \u30da\u30fc\u30b8(HTML)\u306e\u53d6\u5f97 (1 / 2)\n\nscala-scraper\u3067\u306f`Browser`\u3067\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001`Document`\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```scala\nval doc: Document = JsoupBrowser().get(\"https://www.google.co.jp/\")\n```\n\n`Browser`\u306f\u4ee5\u4e0b\u306e2\u3064\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nhttps://github.com/ruippeixotog/scala-scraper#browsers\n\n* JsoupBrowser\n  * [jsoup](https://jsoup.org/)\u3092\u4f7f\u7528\u3057\u305f`Browser`\n  * \u9759\u7684\u306a\u30da\u30fc\u30b8\u7528  \nJavaScript\u3092\u5b9f\u884c\u3057\u306a\u3044\n  * \u901f\u3044\n\n* HtmlUnitBrowser\n  * [HtmlUnit](http://htmlunit.sourceforge.net/)\u3092\u4f7f\u7528\u3057\u305fGUI-less `Browser`\n  * \u52d5\u7684\u306a\u30da\u30fc\u30b8\u7528  \nJavaScript\u3092\u5b9f\u884c\u3059\u308b (\u5b9f\u884c\u3059\u308b\u3068\u306f\u8a00\u3063\u3066\u3044\u306a\u3044)\n\n---\n\n## \u30da\u30fc\u30b8(HTML)\u306e\u53d6\u5f97 (2 / 2)\n\n`Browser`\u304b\u3089`Document`\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u306f3\u7a2e\u985e\u3042\u308a\u307e\u3059\u3002\n\n```scala\n// 1. Web\u4e0a\u306e\u30da\u30fc\u30b8\u304b\u3089\nbrowser.get(url)\nbrowser.post(url, form)\n\n// 2. HTML\u30d5\u30a1\u30a4\u30eb\u304b\u3089\nbrowser.parseFile(file)\nbrowser.parseInputStream(stream, charset)\nbrowser.parseResource(name, charset)\n\n// 3. \u6587\u5b57\u5217\u304b\u3089\nbrowser.parseString(html)\n```\n\n* `parseResource()`\u306f\u3001Resource\u3092InputStream\u3067\u958b\u3044\u3066`parseInputStream()`\u3092\u547c\u3076\n* \u8a73\u7d30\u306f[Browser.scala](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/browser/Browser.scala)\u3067\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\n\n---\n\n## [Document](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/model/Document.scala)\n\n\u30d6\u30e9\u30a6\u30b6(JavaScript)\u3067\u306edocument\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u76f8\u5f53\u3059\u308btrait\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\n```scala\nlocation: String\n\nroot: Element\n\ntitle: String = root.select(\"title\").headOption.fold(\"\")(_.text.trim)\n\nhead: Element = root.select(\"head\").head\n\nbody: Element = root.select(\"body\").head\n\ntoHtml: String\n```\n\n---\n\n## [Element](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/model/Element.scala)\n\n\u30d6\u30e9\u30a6\u30b6(JavaScript)\u3067\u306eElement\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u76f8\u5f53\u3059\u308btrait\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\n```scala\ntagName: String\n\nparent: Option[Element]\n\nchildren: Iterable[Element]\n\nsiblings: Iterable[Element]\n\nattrs: Map[String, String]\n\nhasAttr(name: String): Boolean\n\nattr(name: String): String\n\ntext: String\n\ninnerHtml: String\n\nouterHtml: String\n\nselect(query: String): ElementQuery\n```\n\n[`ElementQuery`](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/model/ElementQuery.scala)\u306f`Iterable[Element]`\u3092\u7d99\u627f\u3057\u3066\u3044\u308btrait\u3067\u3059\u3002\n\n```scala\ntrait ElementQuery extends Iterable[Element]\n```\n\n---\n\n## \u8981\u7d20\u306e\u53d6\u5f97\n\n\u3068\u308a\u3042\u3048\u305a\u9ed9\u3063\u3066\u4ee5\u4e0b\u3092import\n\n```scala\nimport net.ruippeixotog.scalascraper.dsl.DSL._\nimport net.ruippeixotog.scalascraper.dsl.DSL.Extract._\nimport net.ruippeixotog.scalascraper.dsl.DSL.Parse._\n```\n\n\u57fa\u672c\u5f62(\u30a4\u30e1\u30fc\u30b8)\n\n```\nElement >> Extractor\n\nElement >?> Extractor\n```\n\n```\nElement ::= (Document | Element | Functor[Element])\nFunctor ::= (Option | List | Either | ...other functor)\n```\n\n* \u6697\u9ed9\u306e\u578b\u5909\u63db\u3084\u3089\u306a\u3093\u3084\u3089\u304c\u8272\u3005\u7d61\u3080\u305f\u3081\u3001\u6b63\u78ba\u306a\u8868\u73fe\u3067\u306f\u306a\u304f\u3001\u3042\u304f\u307e\u3067\u30a4\u30e1\u30fc\u30b8\n* \u5f15\u6570\u306eExtractor\u306f1\uff5e3\u500b\u6e21\u3059\u3053\u3068\u304c\u53ef\u80fd\u3067[^2]\u30012\u500b\u4ee5\u4e0a\u6e21\u3057\u305f\u5834\u5408\u306f\u7d50\u679c\u304c\u30bf\u30d7\u30eb\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\n\n\u4f8b\n\n```scala\nval main: Element = doc >> element(\"#main\")\n```\n\n[^2]: 3\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u305e\u308cExtractor\u30921\uff5e3\u500b\u53d7\u3051\u53d6\u308b\u305f\u3081\u30024\u500b\u4ee5\u4e0a\u6e21\u3057\u305f\u3044\u5834\u5408\u306f\u30d7\u30eb\u30ea\u30af\u3092\u51fa\u3057\u307e\u3057\u3087\u3046\uff01\n\n---\n\n## [ContentExtractors](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/scraper/HtmlExtractor.scala#L83-L107)\n\n\u3053\u308c\u3060\u3051\u899a\u3048\u3066\u304a\u3051\u3070\u5927\u4e08\u592b\u306a\u611f\u3058\u306eExtractor\n\n* \u8981\u7d20\u53d6\u5f97\n\n```scala\nelement(query): Element\nelements(query): ElementQuery\nelementList(query): List[Element]\n```\n\n* \u30c6\u30ad\u30b9\u30c8\u53d6\u5f97\n\n```scala\ntext(query): String\ntexts(query): Iterable[String]\nallText(query): String\n```\n\n* \u5c5e\u6027\u53d6\u5f97\n\n```scala\nattr(name)(query): String\nattrs(name)(query): Iterable[String]\n```\n\n* \u30d5\u30a9\u30fc\u30e0(`input`)\u30c7\u30fc\u30bf\u53d6\u5f97\n\n```scala\nformData(query): Map[String, String]\nformDataAndAction(query): (Map[String, String], String)\n```\n\n---\n\n## `>>`\n\n\u5358\u7d14\u306b\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308b\u3002\n\n* \u8981\u7d20\u304c\u5b58\u5728\u3057\u306a\u304b\u3063\u305f\u5834\u5408\n  * \u5358\u4e00\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308bExtractor\u306f\u3001`NoSuchElementException`\u304c\u767a\u751f\n  * \u8907\u6570\u8981\u7d20\u3092\u53d6\u5f97\u6642\u306f\u3001\u9ed9\u3063\u3066`Nil`\u3092\u8fd4\u3057\u3066\u304f\u308b\u3002\u3002\u3002\n\n\u203b\n\u5358\u4e00\u8981\u7d20\u53d6\u5f97: `element()`\u3001`text()`\u3001`attr()`\n\u8907\u6570\u8981\u7d20\u53d6\u5f97: `elements()`\u3001`texts()`\u3001`attrs()`\u306a\u3069\n\n---\n\n## `>>` \u306e\u4f7f\u7528\u4f8b\n\n```scala\nval doc = JsoupBrowser().get(\"http://weather.yahoo.co.jp/weather/\")\n\nfor {\n  area <- doc >> elements(\"#map > ul > li > a > dl\")\n  (name, weather) = area >> (text(\"dt\"), texts(\"dd\"))\n} println(s\"$name - ${weather.mkString(\" \")}\")\n```\n\n[Yahoo!\u5929\u6c17\u30fb\u707d\u5bb3 - \u5929\u6c17\u4e88\u5831 / \u9632\u707d\u60c5\u5831](\"http://weather.yahoo.co.jp/weather/\")\u304b\u3089\u5730\u57df\u3054\u3068\u306e\u5929\u6c17\u3092\u53d6\u5f97\u3002\n\n---\n\n## `>?>`\n\nOption\u306b\u5305\u3093\u3067\u5024\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\u3002\n\n* \u8981\u7d20\u304c\u5b58\u5728\u3057\u306a\u304b\u3063\u305f\u5834\u5408\n  * \u5358\u4e00\u306e\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308bExtractor: `None`\u3092\u8fd4\u3059\u3002\n  * \u8907\u6570\u306e\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308bExtractor: `Some(Nil)`\u3092\u8fd4\u3059\u3002\u3002\u3002\n\n---\n\n## `>?>` \u306e\u4f7f\u7528\u4f8b\n\n```scala\nval doc = JsoupBrowser().get(\"http://b.hatena.ne.jp/ctop/it\")\n\nfor {\n  main     <- doc >?> element(\"#main div\")\n  topEntry <- main >?> element(\"div[data-track-section=hotentry] > ul > li.entry-unit\")\n  entries  <- main >?> elementList(\"div > ul[data-track-section=hotentry] > li.entry-unit\")\n  entry    <- topEntry +: entries\n  users    <- entry >?> text(\"ul.users\")\n  contents <- entry >?> element(\"div.entry-contents h3\")\n  url      <- contents >?> attr(\"href\")(\"a\")\n  title = contents.text\n} {\n  println(s\"$users,$title,$url\")\n}\n```\n\n[\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ab\u30c6\u30b4\u30ea\u306e\u8a18\u4e8b](http://b.hatena.ne.jp/ctop/it)\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u53d6\u5f97\u3002\n\n[Option\u306a\u306e\u3067for\u5f0f\u304c\u4f7f\u3048\u307e\u3059\u3002](http://qiita.com/harry0000/items/e37ca3bfb68df839bf55)\n\n---\n\n## \u8981\u7d20\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n\nContent Validation\nhttps://github.com/ruippeixotog/scala-scraper#content-validation\n\n```scala\nElement ~/~ validator(<extractor>)(<matcher>)\n```\n\n`<extractor>`\u3067\u62bd\u51fa\u3057\u305f\u8981\u7d20\u304c`<matcher>`\u3092\u6e80\u305f\u3059\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n\n`~/~`\u306f`scala.util.Either`\u3092\u8fd4\u3059\u306e\u3067\u3001for\u5f0f\u3067\u4f7f\u3048\u306a\u3044\u3053\u3068\u3082\u306a\u3044\u3067\u3059\u3002\n\nmatch\u5f0f\u306e\u305f\u3081\u306b\u3001[`VSuccess`\u3068`VFailure`](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/util/Validated.scala#L7-L15)\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n---\n\n## `~/~` \u306e\u4f7f\u7528\u4f8b\n\n```scala\nval doc = JsoupBrowser().get(\"https://www.google.co.jp/\")\n\ndoc ~/~ validator(text(\"#hplogo\"))(_.nonEmpty) match {\n  case VSuccess(d) => println(\"\u3044\u3064\u3082\u306eGoogle\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff1f\")\n  case VFailure(_) => println(s\"\u4eca\u65e5\u306f\u4f55\u306e\u65e5\uff1f : ${(doc >> attrs(\"alt\")(\"img\")).mkString}\")\n}\n```\n\n[google.co.jp](https://www.google.co.jp/)\u306elogo\u306e\u30c6\u30ad\u30b9\u30c8\u304c\u7a7a\u3067\u306a\u3044\u3053\u3068\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u307e\u3059\u3002\n\u666e\u6bb5logo\u306b\u306f\u300c\u65e5\u672c\u300d\u3068\u30c6\u30ad\u30b9\u30c8\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u304c\u3001\n\u4f55\u304b\u7279\u5225\u306a\u65e5\u3060\u3063\u305f\u5834\u5408\u3001\u753b\u50cf\u306a\u3069\u306b\u5dee\u3057\u5909\u308f\u3063\u3066\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\n2016/11/13\n`\u3044\u3064\u3082\u306eGoogle\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff1f`\n\n2016/11/14\n`\u4eca\u65e5\u306f\u4f55\u306e\u65e5\uff1f : \u30d5\u30ec\u30c7\u30ea\u30c3\u30af \u30d0\u30f3\u30c6\u30a3\u30f3\u30b0 \u751f\u8a95125\u5468\u5e74`\n\n---\n\n## Tips: `>>`\u3001`>?>`\u3001`~/~`\u306f\u7d9a\u3051\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\n\n`Element`\u3084`Functor[Element]`\u3067\u3042\u308c\u3070\u3053\u308c\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u4f7f\u3048\u308b\u305f\u3081\u3001\u7d9a\u3051\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u8a66\u3057\u306b\u3044\u3063\u3071\u3044\u7e4b\u3052\u3066\u307f\u308b\u3068\u2026\n\n```scala\nval rowTexts = doc ~/~ validator(text(\"#account\"))(_ == \"Logged in\") >?> element(\"#main\") >?> elementList(\"table tbody tr\") >> texts(\"td\")\n```\n\n\u3053\u306e\u3068\u304d`rowTexts`\u306e\u578b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n```scala\nval rowTexts: Either[Unit, Option[Option[List[Iterable[String]]]]]\n```\n\nmatch\u5f0f\u3067\u306f\u2026\n\n```scala\nrowTexts match {\n  case VSuccess(Some(Some(rows))) if rows.nonEmpty => rows.map(texts => texts.mkString(\",\")).foreach(println)\n  case VSuccess(_) => println(\"Logged in. But ...\")\n  case VFailure(_) => println(\"Not logged in.\")\n}\n```\n\n---\n\n## Tips: \u8907\u6570\u306e\u8981\u7d20\u3092\u53d6\u5f97\u3057\u3066`Nil`\u304c\u8fd4\u3063\u3066\u304d\u305f\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306b\u3057\u305f\u3044\n\n`>?>`\u3067Option\u304c\u8fd4\u308b\u306e\u3067\u3001`Option.filter(_.nonEmpty)`\u3067`None`\u306b\u5909\u63db\u3057\u307e\u3059\u3002\n`Option.toRight()`\u3067`Either`\u306b\u3082\u3067\u304d\u307e\u3059\u3002\n\n```scala\nfor {\n  rows <- (doc >?> elementList(\"#body table tbody tr\")).filter(_.nonEmpty).toRight(\"Could not find table rows.\").right\n} yield {\n  // do something.\n}\n```\n\n---\n\n## Tips: query\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u3080\n\nquery\u3092\u30b3\u30fc\u30c9\u306b\u30d9\u30bf\u66f8\u304d\u3059\u308b\u3068\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u30da\u30fc\u30b8\u306e\u30c7\u30b6\u30a4\u30f3\u5909\u66f4\u306a\u3069\u3067\n\u30b3\u30fc\u30c9\u4fee\u6b63\u3068\u518d\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\nscala-scraper\u306b\u306fquery\u3092conf\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nhttps://github.com/ruippeixotog/scala-scraper#integration-with-typesafe-config\n\n\u305f\u3060\u3057\u30d9\u30fc\u30bf\u7248\u306e\u6a5f\u80fd\u3067\u3001\u4ed5\u69d8\u304c\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n> NOTE: this feature is in a beta stage. Please expect API changes in future releases.\n\n\u203b \u30e1\u30bd\u30c3\u30c9\u306e\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\n\n* [ConfigLoadingHelpers.scala](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/dsl/ConfigLoadingHelpers.scala)\n* [HtmlExtractor.scala](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/scraper/HtmlExtractor.scala#L37-L54)\n* [HtmlValidator.scala](https://github.com/ruippeixotog/scala-scraper/blob/v1.1.0/src/main/scala/net/ruippeixotog/scalascraper/scraper/HtmlValidator.scala#L16-L33)\n\n---\n\n## \u52d5\u7684\u306a\u30da\u30fc\u30b8\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306f\u2026\uff1f\n\n\u8a66\u3057\u306b`HtmlUnitBrowser`\u3067AngularJS(v1.4.0)\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u30da\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3068...\n\nhttps://kancolle-arcade.net/ac/#/place\n\n```\n11 12, 2016 6:27:02 \u5348\u5f8c com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter runtimeError\n\u91cd\u5927: runtimeError: message=[An invalid or illegal selector was specified (selector: '*,:x' error: Invalid selector: :x).] sourceName=[https://kancolle-arcade.net/ac/scripts/vendor.59dd5e26.js] line=[24] lineSource=[null] lineOffset=[0]\n11 12, 2016 6:27:03 \u5348\u5f8c com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify\n\u8b66\u544a: Obsolete content type encountered: 'text/javascript'.\n```\n\n\u30c0\u30e1\u307f\u305f\u3044\u3067\u3059\u306d\uff08\u8ae6\u89b3\uff09\n\n---\n\n## HtmlUnit\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308bJS\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\nhttp://htmlunit.sourceforge.net/#JavaScript_Support\n\n* jQuery 1.8.2: Full support\n* MochiKit 1.4.1: Full support\n* GWT 2.5.0: Full support\n* Sarissa 0.9.9.3: Full support\n* MooTools 1.2.1: Full support\n* Prototype 1.7.1 (1.6.0, 1.6.1): Very good support\n* Ext JS 2.2: Very good support\n* Dojo 1.0.2: Good support\n* YUI 2.3.0: Good support\n\n\u53e4\u3044\u2026\n\u305d\u3053\u3067Selenium\u3067\u3059\u3088\uff01\uff08\u672c\u672b\u8ee2\u5012\uff09\n\n---\n\n## Web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u3059\u3059\u3081\n\n* Web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u8eab\u8fd1\u306a\u554f\u984c\u3092\u89e3\u6c7a\u3067\u304d\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\n\n* \u7c21\u5358\u306a\u30a2\u30d7\u30ea\u306a\u3089Scala\u306e\u5165\u9580\u3084\u52c9\u5f37\u306b\u6700\u9069\n\n* Scala\u3067\u4f5c\u308a\u305f\u3044\u30a2\u30d7\u30ea\u304c\u306a\u304f\u3066\u56f0\u3063\u3066\u308b\u4eba\u306f\u3001\u3068\u308a\u3042\u3048\u305aWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u307f\u3066\u306f\uff1f\n  * \u307e\u305a\u306f\u666e\u6bb5\u898b\u3066\u308b\u30da\u30fc\u30b8\u304b\u3089\u53ce\u96c6\u3059\u308b\u3068\u3088\u3055\u3052\u306a\u60c5\u5831\u3092\u63a2\u3059\u3068\u3053\u308d\u304b\u3089\n  * \u753b\u50cfURL\u3092\u53ce\u96c6\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u304f\u3063\u305f\u308a etc.\n\n---\n\n## \u53c2\u8003\u8cc7\u6599\n\n* \u578b\u30af\u30e9\u30b9\u306e\u7d39\u4ecb \u00b7 Scala\u7814\u4fee\u30c6\u30ad\u30b9\u30c8\nhttps://dwango.github.io/scala_text/typeclass.html#functor\nFunctor\u306b\u3064\u3044\u3066\n\n* \u5b9f\u8df5Excel\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\nhttp://www.slideshare.net/hilotech/excel-40727515\n\u30c6\u30fc\u30d6\u30eb\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306a\u3089Excel\u3067\u3082\u3067\u304d\u308b\u3088\u3001\u3068\u3044\u3046\u304a\u8a71\n", "tags": ["Scala2.11.8", "scraping", "\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0"]}