{"context": "gitolite3\u3068GitWeb\u3092\u4f7f\u7528\u3057\u3066\uff0c\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\uff0egitolite3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\uff0cgit-daemon\u3092\u4f7f\u7528\u3059\u308b\u3088\u308a\u3082\u306f\u308b\u304b\u306b\u7c21\u5358\u306b\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u5b9f\u65bd\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\uff0e\n\u7279\u5fb4\u306f\u4e0b\u8a18\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\u306a\u304a\uff0c\u60f3\u5b9a\u74b0\u5883\u306fUbuntu 16.04 LTS Xenial Xerus\u3067\u3059\uff0e\n\n\ngit clone git@github.com:kyokuheki/***.git\u307f\u305f\u3044\u306a\u5f62\u3067clone\u3067\u304d\u307e\u3059\uff0egithub\u3068\u540c\u3058\u5f62\u5f0f\u3067\u3059\uff0e\n\n22/tcp\u3068http/80\u3092\u4f7f\u7528\u3057\uff0cgit-daemon\u3067\u4f7f\u7528\u3055\u308c\u308b9418/tcp\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\uff0e\n\u30a2\u30af\u30bb\u30b9\u5236\u9650\u306f\uff0c\u30c6\u30ad\u30b9\u30c8\u30d9\u30fc\u30b9\u3067\u8a18\u8ff0\u3067\u304d\u307e\u3059\uff0e\n\u30a2\u30af\u30bb\u30b9\u5236\u9650\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306fgit\u3067\u7ba1\u7406\u3055\u308c\u307e\u3059\uff0e\n\u30e6\u30fc\u30b6\u306f\u516c\u958b\u9375\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u307e\u3059\uff0e\n\ngitolite3\u3060\u3051\u306e\u5c0e\u5165\u3067\u3042\u308c\u3070\uff0cApache\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\uff0e\n\n\ngitolite3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u7ba1\u7406\u8005\u7528\u306e\u9375\u306e\u4f5c\u6210\ngitolite3\u306e\u7ba1\u7406\u8005\u3068\u306a\u308b\u30e6\u30fc\u30b6\u304cgitolite\u7528\u306e\u9375\u3092\u4f5c\u6210\u3057\uff0c\u4f5c\u6210\u3057\u305f\u9375\u306e\u516c\u958b\u9375\u3092\u30b5\u30fc\u30d0\u306e\u4f5c\u696d\u30e6\u30fc\u30b6\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\uff0e\n\u4e0b\u8a18\u306f\u7ba1\u7406\u8005\u7aef\u672b\u304b\u3089\u5b9f\u65bd\u3059\u308b\uff0e\n\ngitolite3\n$ ssh-keygen\n$ ssh-copy-id ubuntu@<git\u30b5\u30fc\u30d0> \n$ ssh ubuntu@<git\u30b5\u30fc\u30d0>\n$ ssh ubuntu@<git\u30b5\u30fc\u30d0> \"ls .ssh\"\nauthorized_keys\n$ ssh ubuntu@<git\u30b5\u30fc\u30d0> \"cat .ssh/authorized_keys\"\necdsa-sha2-nistp521 *****************************== <####>@<####>\n\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u6b21\u306b\uff0cgit\u30b5\u30fc\u30d0\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\uff0e\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306bgitolite3\u306e\u7ba1\u7406\u8005\u306e\u516c\u958b\u9375\u3092\u805e\u304b\u308c\u308b\u306e\u3067\uff0c/home/<user>/.ssh/authorized_keys\u3068\u5165\u529b\u3059\u308b\uff0egitolite3\u30e6\u30fc\u30b6\u304c\u4f5c\u6210\u3055\u308c\u308b\uff0e\n$ sudo apt install git gitolite3\n$ sudo grep gitolite3 /etc/passwd\ngitolite3:x:104:112:git repository hosting,,,:/var/lib/gitolite3:/bin/bash\n$ sudo ls -a /var/lib/gitolite3\n.   .bash_history  .gitolite     .ssh  projects.list\n..  .cache         .gitolite.rc  logs  repositories\n\n\n.gitolite.rc\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\u4e0b\u8a18\u306e\u64cd\u4f5c\u3067gitolite\u304b\u3089gitweb\u306edescription\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\uff0e\nsudo vim /var/lib/gitolite3/.gitolite.rc\n\n\n/var/lib/gitolite3/.gitolite.rc\n    GIT_CONFIG_KEYS                 =>  'gitweb\\.(owner|description|category)',\n\n\n\n\u30a2\u30af\u30bb\u30b9\u6a29\u30fb\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\u30fb\u8ffd\u52a0\n\u7ba1\u7406\u8005\u7aef\u672b\u304b\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\uff0c\u7ba1\u7406\u8005\u7aef\u672b\u306bgitolite\u7ba1\u7406\u7528\u306e\u30c7\u30fc\u30bf\u3092\u30af\u30ed\u30fc\u30f3\u3059\u308b\uff0e\ngit clone gitolite3@<git\u30b5\u30fc\u30d0>:gitolite-admin.git\n\n\n\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\n\u516c\u958b\u9375\u3092\u8ffd\u52a0\u3059\u308c\u3070\uff0c\u30e6\u30fc\u30b6\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\u30e6\u30fc\u30b6\u540d\u306f\u516c\u958b\u9375\u306e\u30d5\u30a1\u30a4\u30eb\u540d\uff0e\ncp ~/.ssh/id_rsa.pub ./gitolite-admin/keydir/<username>.pub\n\n\n\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u306e\u8a2d\u5b9a\nconf/gitolite.conf\u306brepo\u3092\u8ffd\u52a0\u3057\u3066push\u3059\u308b\u3068\uff0c\u30ec\u30dd\u30b8\u30c8\u30ea\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\nvim ./gitolite-admin/conf/gitolite.conf\ngit commit -m \"edit config\"\ngit push\n\n\n/gitolite-admin/conf/gitolite.conf\n@developers = admin user1 user2 user3\n@admin      = admin user1\n\nrepo gitolite-admin\n    RW+     =   admin @admin\n    R       =   @developers\n\nrepo testing\n    RW+     =   @developers\n    R       =   gitweb @all\n\nrepo sandbox\n    desc    =   \"git sandbox\"\n    RW+     =   @developers\n    R       =   gitweb @all\n\nrepo soft-patch-panel\n    R       =   gitweb @all\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ ssh gitolite3@<git\u30b5\u30fc\u30d0> info\nhello admin, this is gitolite3@gitserver running gitolite3 3.6.4-1 (Debian) on git 2.7.4\n\n R W    gitolite-admin\n R W    sandbox\n R W    testing\n$ ssh gitolite3@<git\u30b5\u30fc\u30d0> help\nhello okuda, this is gitolite3@gitserver running gitolite3 3.6.4-1 (Debian) on git 2.7.4\n\nlist of remote commands available:\n\n        desc\n        help\n        info\n        perms\n        writable\n\n\n\u53c2\u8003\n\nhttp://d.hatena.ne.jp/Dltn/20121114/1352905191\nhttp://qiita.com/mountcedar/items/9d87d793a493295e08f0\nhttps://git-scm.com/book/ja/v1/Git-%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-Gitolite\nhttp://gitolite.com/gitolite/http.html\n\n\ngitweb\ngit\u30b5\u30fc\u30d0\u4e0a\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\uff0e\nsudo apt install gitweb libcgi-pm-perl\nsudo a2enconf gitweb\nsudo a2enmod cgid\nsudo service apache2 restart\n\n\u4ee5\u4e0a\u3067\u5b8c\u4e86\uff0e\n\nUbuntu 14.04\u306e\u5834\u5408\n\u3061\u306a\u307f\u306bUbuntu 14.04\u306e\u5834\u5408\u306f\u3082\u3046\u5c11\u3057\u4f5c\u696d\u304c\u5fc5\u8981\uff0egitweb\u306b\u3088\u3063\u3066\u8ffd\u52a0\u3055\u308c\u308bApache2\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u30d1\u30b9\u3084\u5185\u5bb9\u304c\u9593\u9055\u3063\u3066\u3044\u308b\u306e\u3067\u4fee\u6b63\u3059\u308b\uff0e\nsudo apt install gitweb\nsudo mv /etc/apache2/conf.d/gitweb /etc/apache2/sites-available/gitweb.conf\nsudo vim /etc/apache2/sites-available/gitweb.conf\n\n\n/etc/apache2/sites-available/gitweb.conf\nAlias /gitweb /usr/share/gitweb\n\n<Directory /usr/share/gitweb>\n  Options +FollowSymLinks +ExecCGI\n  AddHandler cgi-script .cgi\n</Directory>\n\n\ngitweb\u3092\u6709\u52b9\u5316\u3057\u3066\uff0capache2\u3092\u518d\u8d77\u52d5\u3059\u308b\uff0e\nsudo a2enmod cgid\nsudo a2ensite gitweb.conf\nsudo service apache2 restart\n\n\ngitolite3\u3068gitweb\u306e\u9023\u643a\n\u6b21\u306bgitolite3\u306bgitweb\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\uff0egitweb\u306fapache2\u306e\u30d7\u30ed\u30bb\u30b9\u914d\u4e0b\u3067\u52d5\u4f5c\u3059\u308b\u306e\u3067\uff0c\u30e6\u30fc\u30b6id\u306fwww-data\u3068\u306a\u308b\uff0ewww-data\u304c\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3059\u308b\uff0e\n\nUMASK\u306e\u8a2d\u5b9a\ngitolite3\u306b\u3088\u308b\u30d5\u30a1\u30a4\u30eb\u64cd\u4f5c\u6642\u306eUMASK\u3092\u8a2d\u5b9a\u3057\uff0c\u30b0\u30eb\u30fc\u30d7\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\nsudo vim /var/lib/gitolite3/.gitolite.rc\n\n\n/var/lib/gitolite3/.gitolite.rc\n    UMASK                           =>  0027,\n\n\n\n\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u4fee\u6b63\nsudo gpasswd -a www-data gitolite3\nsudo chmod g+rx /var/lib/gitolite3\nsudo chmod g+r /var/lib/gitolite3/projects.list\nsudo chmod -R g+r /var/lib/gitolite3/repositories\nsudo find /var/lib/gitolite3/repositories -type d -exec chmod g+x {} +\n\n\ngitweb.conf\u306e\u4fee\u6b63\ngitweb\u306e\u8a2d\u5b9a\u3092\u4fee\u6b63\u3057\uff0cgitolite3\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\uff0e\nvim /etc/gitweb.conf\n\n\n/etc/gitweb.conf\n# cat /etc/gitweb.conf\n# path to git projects (<project>.git)\n$projectroot = \"/var/lib/gitolite3/repositories\";\n\n# directory to use for temp files\n$git_temp = \"/tmp\";\n\n# target of the home link on top of all pages\n#$home_link = $my_uri || \"/\";\n\n# html text to include at home page\n#$home_text = \"indextext.html\";\n\n# file with project list; by default, simply scan the projectroot dir.\n$projects_list = \"/var/lib/gitolite3/projects.list\";\n$strict_export = \"true\";\n\n# stylesheet to use\n@stylesheets = (\"static/gitweb.css\");\n\n# javascript code for gitweb\n$javascript = \"static/gitweb.js\";\n\n# logo to use\n$logo = \"static/git-logo.png\";\n\n# the 'favicon'\n$favicon = \"static/git-favicon.png\";\n\n# git-diff-tree(1) options to use for generated patches\n#@diff_opts = (\"-M\");\n@diff_opts = ();\n\n\n\n\u53c2\u8003\n\nhttp://troglobit.github.io/blog/2015/06/30/howto-apache-with-gitweb-on-debian-8-dot-1/\nhttp://gitolite.com/gitolite/gitweb-daemon.html\nhttps://www.hellion.org.uk/blog/posts/gitolite-and-gitweb-vhost-setup/\n\n\n\u30ea\u30e2\u30fc\u30c8\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30df\u30e9\u30fc\ngithub\u306b\u3042\u308b\u516c\u958b\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30ea\u30e2\u30fc\u30c8\u30ec\u30dd\u30b8\u30c8\u30ea\u306b\u30df\u30e9\u30fc\u3057\u3066\u3044\u3064\u3067\u3082\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\nsudo su gitolite3\ncd ~/repositories\ngit clone --mirror https://github.com/garogers01/soft-patch-panel.git\ncd soft-patch-panel.git\ngit fetch --all\nexit\nsudo service apache2 restart\n\n\nSmart HTTP\u3067HTTP\u3067Clone\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\napache2\u304c\u65e2\u306b\u5165\u3063\u3066\u3044\u308b\u74b0\u5883\u3067\u3042\u308c\u3070\uff0c\u3061\u3087\u3063\u3068\u306e\u8a2d\u5b9a\u8ffd\u8a18\u3067Smart HTTP\u3092\u6709\u52b9\u5316\u3067\u304d\u307e\u3059\uff0e\nvim /etc/apache2/sites-available/git.conf\na2ensite git.conf\napache2ctl configtest\nservice apache2 restart\n\n\n/etc/apache2/sites-available/git.conf\nSetEnv GIT_PROJECT_ROOT /var/lib/gitolite3/repositories\nSetEnv GIT_HTTP_EXPORT_ALL\nScriptAlias /git /usr/lib/git-core/git-http-backend\n\n<Location /git>\n        Options +ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch\n        AuthType Basic\n        AuthName \"Smart HTTP Git Access\"\n        AuthUserFile \"/var/www/trac/.htpasswd\"\n        Require valid-user\n        Order allow,deny\n        Allow from all\n</Location>\n\nErrorLog ${APACHE_LOG_DIR}/error_git.log\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\n#LogLevel debug\n\nCustomLog ${APACHE_LOG_DIR}/access_git.log combined\n\n\n\n\u53c2\u8003\n\nhttp://gitolite.com/gitolite/install.html\nhttp://sharadchhetri.com/2013/05/31/how-to-create-own-git-server-with-gitolite-and-gitweb-in-ubuntu/\nhttp://absolutearea.blogspot.jp/2014_08_01_archive.html\nhttps://www.atlassian.com/ja/git/tutorial/git-basics#!init\nhttp://shim0mura.hatenadiary.jp/entry/20120914/1347591103\n\n[`gitolite3`](http://gitolite.com/gitolite/index.html)\u3068[`GitWeb`](https://git-scm.com/book/ja/v1/Git-%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-GitWeb)\u3092\u4f7f\u7528\u3057\u3066\uff0c\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\uff0e`gitolite3`\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\uff0c`git-daemon`\u3092\u4f7f\u7528\u3059\u308b\u3088\u308a\u3082\u306f\u308b\u304b\u306b\u7c21\u5358\u306b\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u5b9f\u65bd\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\uff0e\n\u7279\u5fb4\u306f\u4e0b\u8a18\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\u306a\u304a\uff0c\u60f3\u5b9a\u74b0\u5883\u306fUbuntu 16.04 LTS Xenial Xerus\u3067\u3059\uff0e\n\n* `git clone git@github.com:kyokuheki/***.git`\u307f\u305f\u3044\u306a\u5f62\u3067`clone`\u3067\u304d\u307e\u3059\uff0egithub\u3068\u540c\u3058\u5f62\u5f0f\u3067\u3059\uff0e\n* `22/tcp`\u3068`http/80`\u3092\u4f7f\u7528\u3057\uff0c`git-daemon`\u3067\u4f7f\u7528\u3055\u308c\u308b`9418/tcp`\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\uff0e\n* \u30a2\u30af\u30bb\u30b9\u5236\u9650\u306f\uff0c\u30c6\u30ad\u30b9\u30c8\u30d9\u30fc\u30b9\u3067\u8a18\u8ff0\u3067\u304d\u307e\u3059\uff0e\n* \u30a2\u30af\u30bb\u30b9\u5236\u9650\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306f`git`\u3067\u7ba1\u7406\u3055\u308c\u307e\u3059\uff0e\n* \u30e6\u30fc\u30b6\u306f\u516c\u958b\u9375\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u307e\u3059\uff0e\n* `gitolite3`\u3060\u3051\u306e\u5c0e\u5165\u3067\u3042\u308c\u3070\uff0c`Apache`\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\uff0e\n\n# gitolite3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n## \u7ba1\u7406\u8005\u7528\u306e\u9375\u306e\u4f5c\u6210\ngitolite3\u306e\u7ba1\u7406\u8005\u3068\u306a\u308b\u30e6\u30fc\u30b6\u304cgitolite\u7528\u306e\u9375\u3092\u4f5c\u6210\u3057\uff0c\u4f5c\u6210\u3057\u305f\u9375\u306e\u516c\u958b\u9375\u3092\u30b5\u30fc\u30d0\u306e\u4f5c\u696d\u30e6\u30fc\u30b6\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\uff0e\n\u4e0b\u8a18\u306f\u7ba1\u7406\u8005\u7aef\u672b\u304b\u3089\u5b9f\u65bd\u3059\u308b\uff0e\n\n```console:gitolite3\n$ ssh-keygen\n$ ssh-copy-id ubuntu@<git\u30b5\u30fc\u30d0> \n$ ssh ubuntu@<git\u30b5\u30fc\u30d0>\n$ ssh ubuntu@<git\u30b5\u30fc\u30d0> \"ls .ssh\"\nauthorized_keys\n$ ssh ubuntu@<git\u30b5\u30fc\u30d0> \"cat .ssh/authorized_keys\"\necdsa-sha2-nistp521 *****************************== <####>@<####>\n```\n\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u6b21\u306b\uff0cgit\u30b5\u30fc\u30d0\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\uff0e\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306bgitolite3\u306e\u7ba1\u7406\u8005\u306e\u516c\u958b\u9375\u3092\u805e\u304b\u308c\u308b\u306e\u3067\uff0c`/home/<user>/.ssh/authorized_keys`\u3068\u5165\u529b\u3059\u308b\uff0egitolite3\u30e6\u30fc\u30b6\u304c\u4f5c\u6210\u3055\u308c\u308b\uff0e\n\n```console\n$ sudo apt install git gitolite3\n$ sudo grep gitolite3 /etc/passwd\ngitolite3:x:104:112:git repository hosting,,,:/var/lib/gitolite3:/bin/bash\n$ sudo ls -a /var/lib/gitolite3\n.   .bash_history  .gitolite     .ssh  projects.list\n..  .cache         .gitolite.rc  logs  repositories\n```\n\n##`.gitolite.rc`\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\u4e0b\u8a18\u306e\u64cd\u4f5c\u3067gitolite\u304b\u3089gitweb\u306edescription\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\uff0e\n\n```sh\nsudo vim /var/lib/gitolite3/.gitolite.rc\n```\n\n```/var/lib/gitolite3/.gitolite.rc\n    GIT_CONFIG_KEYS                 =>  'gitweb\\.(owner|description|category)',\n```\n\n\n## \u30a2\u30af\u30bb\u30b9\u6a29\u30fb\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\u30fb\u8ffd\u52a0\n\u7ba1\u7406\u8005\u7aef\u672b\u304b\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\uff0c\u7ba1\u7406\u8005\u7aef\u672b\u306bgitolite\u7ba1\u7406\u7528\u306e\u30c7\u30fc\u30bf\u3092\u30af\u30ed\u30fc\u30f3\u3059\u308b\uff0e\n\n```sh\ngit clone gitolite3@<git\u30b5\u30fc\u30d0>:gitolite-admin.git\n```\n\n###\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\n\u516c\u958b\u9375\u3092\u8ffd\u52a0\u3059\u308c\u3070\uff0c\u30e6\u30fc\u30b6\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\u30e6\u30fc\u30b6\u540d\u306f\u516c\u958b\u9375\u306e\u30d5\u30a1\u30a4\u30eb\u540d\uff0e\n\n```sh\ncp ~/.ssh/id_rsa.pub ./gitolite-admin/keydir/<username>.pub\n```\n\n###\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u306e\u8a2d\u5b9a\n`conf/gitolite.conf`\u306b`repo`\u3092\u8ffd\u52a0\u3057\u3066`push`\u3059\u308b\u3068\uff0c\u30ec\u30dd\u30b8\u30c8\u30ea\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\n\n```sh\nvim ./gitolite-admin/conf/gitolite.conf\ngit commit -m \"edit config\"\ngit push\n```\n\n```./gitolite-admin/conf/gitolite.conf\n@developers = admin user1 user2 user3\n@admin      = admin user1\n\nrepo gitolite-admin\n    RW+     =   admin @admin\n    R       =   @developers\n\nrepo testing\n    RW+     =   @developers\n    R       =   gitweb @all\n\nrepo sandbox\n    desc    =   \"git sandbox\"\n    RW+     =   @developers\n    R       =   gitweb @all\n\nrepo soft-patch-panel\n    R       =   gitweb @all\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n```console\n$ ssh gitolite3@<git\u30b5\u30fc\u30d0> info\nhello admin, this is gitolite3@gitserver running gitolite3 3.6.4-1 (Debian) on git 2.7.4\n\n R W    gitolite-admin\n R W    sandbox\n R W    testing\n$ ssh gitolite3@<git\u30b5\u30fc\u30d0> help\nhello okuda, this is gitolite3@gitserver running gitolite3 3.6.4-1 (Debian) on git 2.7.4\n\nlist of remote commands available:\n\n        desc\n        help\n        info\n        perms\n        writable\n```\n\n## \u53c2\u8003\n* http://d.hatena.ne.jp/Dltn/20121114/1352905191\n* http://qiita.com/mountcedar/items/9d87d793a493295e08f0\n* https://git-scm.com/book/ja/v1/Git-%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-Gitolite\n* http://gitolite.com/gitolite/http.html\n\n# gitweb\ngit\u30b5\u30fc\u30d0\u4e0a\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\uff0e\n\n```\nsudo apt install gitweb libcgi-pm-perl\nsudo a2enconf gitweb\nsudo a2enmod cgid\nsudo service apache2 restart\n```\n\n\u4ee5\u4e0a\u3067\u5b8c\u4e86\uff0e\n\n## Ubuntu 14.04\u306e\u5834\u5408\n\u3061\u306a\u307f\u306bUbuntu 14.04\u306e\u5834\u5408\u306f\u3082\u3046\u5c11\u3057\u4f5c\u696d\u304c\u5fc5\u8981\uff0egitweb\u306b\u3088\u3063\u3066\u8ffd\u52a0\u3055\u308c\u308bApache2\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u30d1\u30b9\u3084\u5185\u5bb9\u304c\u9593\u9055\u3063\u3066\u3044\u308b\u306e\u3067\u4fee\u6b63\u3059\u308b\uff0e\n\n```\nsudo apt install gitweb\nsudo mv /etc/apache2/conf.d/gitweb /etc/apache2/sites-available/gitweb.conf\nsudo vim /etc/apache2/sites-available/gitweb.conf\n```\n\n```apache:/etc/apache2/sites-available/gitweb.conf\nAlias /gitweb /usr/share/gitweb\n\n<Directory /usr/share/gitweb>\n  Options +FollowSymLinks +ExecCGI\n  AddHandler cgi-script .cgi\n</Directory>\n```\n\ngitweb\u3092\u6709\u52b9\u5316\u3057\u3066\uff0capache2\u3092\u518d\u8d77\u52d5\u3059\u308b\uff0e\n\n```\nsudo a2enmod cgid\nsudo a2ensite gitweb.conf\nsudo service apache2 restart\n```\n\n# gitolite3\u3068gitweb\u306e\u9023\u643a\n\u6b21\u306bgitolite3\u306bgitweb\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\uff0egitweb\u306fapache2\u306e\u30d7\u30ed\u30bb\u30b9\u914d\u4e0b\u3067\u52d5\u4f5c\u3059\u308b\u306e\u3067\uff0c\u30e6\u30fc\u30b6id\u306f`www-data`\u3068\u306a\u308b\uff0e`www-data`\u304c\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3059\u308b\uff0e\n\n## UMASK\u306e\u8a2d\u5b9a\ngitolite3\u306b\u3088\u308b\u30d5\u30a1\u30a4\u30eb\u64cd\u4f5c\u6642\u306eUMASK\u3092\u8a2d\u5b9a\u3057\uff0c\u30b0\u30eb\u30fc\u30d7\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\n\n```sh\nsudo vim /var/lib/gitolite3/.gitolite.rc\n```\n\n```/var/lib/gitolite3/.gitolite.rc\n    UMASK                           =>  0027,\n```\n\n## \u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u4fee\u6b63\n\n```\nsudo gpasswd -a www-data gitolite3\nsudo chmod g+rx /var/lib/gitolite3\nsudo chmod g+r /var/lib/gitolite3/projects.list\nsudo chmod -R g+r /var/lib/gitolite3/repositories\nsudo find /var/lib/gitolite3/repositories -type d -exec chmod g+x {} +\n```\n\n## gitweb.conf\u306e\u4fee\u6b63\ngitweb\u306e\u8a2d\u5b9a\u3092\u4fee\u6b63\u3057\uff0cgitolite3\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\uff0e\n\n```\nvim /etc/gitweb.conf\n```\n\n```pl:/etc/gitweb.conf\n# cat /etc/gitweb.conf\n# path to git projects (<project>.git)\n$projectroot = \"/var/lib/gitolite3/repositories\";\n\n# directory to use for temp files\n$git_temp = \"/tmp\";\n\n# target of the home link on top of all pages\n#$home_link = $my_uri || \"/\";\n\n# html text to include at home page\n#$home_text = \"indextext.html\";\n\n# file with project list; by default, simply scan the projectroot dir.\n$projects_list = \"/var/lib/gitolite3/projects.list\";\n$strict_export = \"true\";\n\n# stylesheet to use\n@stylesheets = (\"static/gitweb.css\");\n\n# javascript code for gitweb\n$javascript = \"static/gitweb.js\";\n\n# logo to use\n$logo = \"static/git-logo.png\";\n\n# the 'favicon'\n$favicon = \"static/git-favicon.png\";\n\n# git-diff-tree(1) options to use for generated patches\n#@diff_opts = (\"-M\");\n@diff_opts = ();\n```\n\n## \u53c2\u8003\n* http://troglobit.github.io/blog/2015/06/30/howto-apache-with-gitweb-on-debian-8-dot-1/\n* http://gitolite.com/gitolite/gitweb-daemon.html\n* https://www.hellion.org.uk/blog/posts/gitolite-and-gitweb-vhost-setup/\n\n# \u30ea\u30e2\u30fc\u30c8\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30df\u30e9\u30fc\ngithub\u306b\u3042\u308b\u516c\u958b\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30ea\u30e2\u30fc\u30c8\u30ec\u30dd\u30b8\u30c8\u30ea\u306b\u30df\u30e9\u30fc\u3057\u3066\u3044\u3064\u3067\u3082\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\n\n```sh\nsudo su gitolite3\ncd ~/repositories\ngit clone --mirror https://github.com/garogers01/soft-patch-panel.git\ncd soft-patch-panel.git\ngit fetch --all\nexit\nsudo service apache2 restart\n```\n\n# Smart HTTP\u3067HTTP\u3067Clone\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\napache2\u304c\u65e2\u306b\u5165\u3063\u3066\u3044\u308b\u74b0\u5883\u3067\u3042\u308c\u3070\uff0c\u3061\u3087\u3063\u3068\u306e\u8a2d\u5b9a\u8ffd\u8a18\u3067Smart HTTP\u3092\u6709\u52b9\u5316\u3067\u304d\u307e\u3059\uff0e\n\n```sh\nvim /etc/apache2/sites-available/git.conf\na2ensite git.conf\napache2ctl configtest\nservice apache2 restart\n```\n\n```aconf:/etc/apache2/sites-available/git.conf\nSetEnv GIT_PROJECT_ROOT /var/lib/gitolite3/repositories\nSetEnv GIT_HTTP_EXPORT_ALL\nScriptAlias /git /usr/lib/git-core/git-http-backend\n        \n<Location /git>\n        Options +ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch\n        AuthType Basic\n        AuthName \"Smart HTTP Git Access\"\n        AuthUserFile \"/var/www/trac/.htpasswd\"\n        Require valid-user\n        Order allow,deny\n        Allow from all\n</Location>\n\nErrorLog ${APACHE_LOG_DIR}/error_git.log\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\n#LogLevel debug\n        \nCustomLog ${APACHE_LOG_DIR}/access_git.log combined\n```\n\n# \u53c2\u8003\n* http://gitolite.com/gitolite/install.html\n* http://sharadchhetri.com/2013/05/31/how-to-create-own-git-server-with-gitolite-and-gitweb-in-ubuntu/\n* http://absolutearea.blogspot.jp/2014_08_01_archive.html\n* https://www.atlassian.com/ja/git/tutorial/git-basics#!init\n* http://shim0mura.hatenadiary.jp/entry/20120914/1347591103\n", "tags": ["Ubuntu", "ubuntu16.04", "Git", "gitolite", "gitweb"]}