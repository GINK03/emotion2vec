{"context": "\n\n\u6982\u8981\nCentOS7\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fJenkins\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089jenkins2\u3078\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u624b\u9806\n\n\u52d5\u4f5c\u74b0\u5883\nCentOS 7.1\nJenkins 1.xxx\u3000\u3042\u3052\u308b\u524d\u306b\u78ba\u8a8d\u3059\u308b\u306e\u5fd8\u308c\u307e\u3057\u305f\n\n\u624b\u9806\n\u57fa\u672c\u3001/usr/lib/jenkins/jenkins.war\u306b\u6700\u65b0\u7248\u306ewar\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066\u518d\u8d77\u52d5\u3059\u308b\u3060\n# cd /usr/lib/jenkins/\n# systemctl stop jenkins\n# mv jenkins.war jenkins.war.20160611\n# wget http://mirrors.jenkins-ci.org/war/latest/jenkins.war\n# systemctl start jenkins\n\n\n/var/log/jenkins/jenkins.log\u3000\u306b\u30a8\u30e9\u30fc\u3067\u305f\n\u30b5\u30fc\u30d3\u30b9\u81ea\u4f53\u306f\u8d77\u52d5\u3059\u308b\u3082\u306e\u306e\u3001\u30d6\u30e9\u30a6\u30b6\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef\n\u91cd\u5927: Container startup failed\njava.io.IOException: Failed to start a listener: winstone.Ajp13ConnectorFactory\n        at winstone.Launcher.spawnListener(Launcher.java:207)\n        at winstone.Launcher.<init>(Launcher.java:148)\n        at winstone.Launcher.main(Launcher.java:352)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at Main._main(Main.java:246)\n        at Main.main(Main.java:91)\nCaused by: java.lang.UnsupportedOperationException: AJP support is removed in Winstone 3.0 due to Jetty 9 not supporting AJP. For reverse proxying, please use HTTP instead of AJP.\n        at winstone.Ajp13ConnectorFactory.start(Ajp13ConnectorFactory.java:31)\n        at winstone.Launcher.spawnListener(Launcher.java:205)\n        ... 8 more\n\n\n\u5fa9\u65e7\u624b\u9806\n/etc/sysconfig/jenkins\u306b\u3001JENKINS_AJP_PORT=\"-1\" \u3092\u8ffd\u8a18\n# cd /etc/sysconfig/\n# cp jenkins jenkins.20160611\n\n# vi jenkins\n\n# diff -c jenkins jenkins.20160611\n*** jenkins 2016-06-11 21:39:47.321932449 +0900\n--- jenkins.20160611    2016-06-11 21:13:03.909234217 +0900\n***************\n*** 164,168 ****\n  # Full option list: java -jar jenkins.war --help\n  #\n  JENKINS_ARGS=\"\"\n-\n- JENKINS_AJP_PORT=\"-1\"\n--- 164,166 ----\n\n\u305d\u3057\u3066jenkins\u518d\u8d77\u52d5\n# systemctl restart jenkins\n\n\u7121\u4e8b\u306b\u30d6\u30e9\u30a6\u30b6\u3067\u8868\u793a\u3067\u304d\u307e\u3057\u305f\n\n\u53c2\u8003\u8a18\u4e8b\nhttps://issues.jenkins-ci.org/browse/JENKINS-33776\n# \u6982\u8981\nCentOS7\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fJenkins\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089jenkins2\u3078\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u624b\u9806\n\n# \u52d5\u4f5c\u74b0\u5883\nCentOS 7.1\nJenkins 1.xxx\u3000\u3042\u3052\u308b\u524d\u306b\u78ba\u8a8d\u3059\u308b\u306e\u5fd8\u308c\u307e\u3057\u305f\n\n# \u624b\u9806\n\u57fa\u672c\u3001/usr/lib/jenkins/jenkins.war\u306b\u6700\u65b0\u7248\u306ewar\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066\u518d\u8d77\u52d5\u3059\u308b\u3060\n\n```\n# cd /usr/lib/jenkins/\n# systemctl stop jenkins\n# mv jenkins.war jenkins.war.20160611\n# wget http://mirrors.jenkins-ci.org/war/latest/jenkins.war\n# systemctl start jenkins\n```\n\n# /var/log/jenkins/jenkins.log\u3000\u306b\u30a8\u30e9\u30fc\u3067\u305f\n\n\u30b5\u30fc\u30d3\u30b9\u81ea\u4f53\u306f\u8d77\u52d5\u3059\u308b\u3082\u306e\u306e\u3001\u30d6\u30e9\u30a6\u30b6\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef\n\n```\n\u91cd\u5927: Container startup failed\njava.io.IOException: Failed to start a listener: winstone.Ajp13ConnectorFactory\n        at winstone.Launcher.spawnListener(Launcher.java:207)\n        at winstone.Launcher.<init>(Launcher.java:148)\n        at winstone.Launcher.main(Launcher.java:352)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at Main._main(Main.java:246)\n        at Main.main(Main.java:91)\nCaused by: java.lang.UnsupportedOperationException: AJP support is removed in Winstone 3.0 due to Jetty 9 not supporting AJP. For reverse proxying, please use HTTP instead of AJP.\n        at winstone.Ajp13ConnectorFactory.start(Ajp13ConnectorFactory.java:31)\n        at winstone.Launcher.spawnListener(Launcher.java:205)\n        ... 8 more\n```\n\n# \u5fa9\u65e7\u624b\u9806\n\n/etc/sysconfig/jenkins\u306b\u3001JENKINS_AJP_PORT=\"-1\" \u3092\u8ffd\u8a18\n\n```\n# cd /etc/sysconfig/\n# cp jenkins jenkins.20160611\n\n# vi jenkins\n\n# diff -c jenkins jenkins.20160611\n*** jenkins\t2016-06-11 21:39:47.321932449 +0900\n--- jenkins.20160611\t2016-06-11 21:13:03.909234217 +0900\n***************\n*** 164,168 ****\n  # Full option list: java -jar jenkins.war --help\n  #\n  JENKINS_ARGS=\"\"\n-\n- JENKINS_AJP_PORT=\"-1\"\n--- 164,166 ----\n```\n\n\u305d\u3057\u3066jenkins\u518d\u8d77\u52d5\n\n```\n# systemctl restart jenkins\n```\n\n\u7121\u4e8b\u306b\u30d6\u30e9\u30a6\u30b6\u3067\u8868\u793a\u3067\u304d\u307e\u3057\u305f\n\n# \u53c2\u8003\u8a18\u4e8b\nhttps://issues.jenkins-ci.org/browse/JENKINS-33776\n", "tags": ["Jenkins", "centos7", "IDCF\u30af\u30e9\u30a6\u30c9"]}