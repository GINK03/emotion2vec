{"tags": ["docker", "vagrant", "boot2docker"], "context": " More than 1 year has passed since last update.\ndocker_registry\u69cb\u7bc9@boot2docker - Qiita\nDocker\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u3061\u3087\u3063\u3068\u3060\u3051\u4f7f\u3044\u3084\u3059\u304f\u3057\u3066\u307f\u308b - Qiita\n\n\u3092\u8aad\u307e\u305b\u3066\u9802\u3044\u305f\u5f8c\u3001docker-registry-frontend \u3063\u3066\u3044\u3046\u306e\u3092 Docker \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 Docker Registry API Client Libraries \u306e\u4e2d\u3067\u767a\u898b\u3057\u307e\u3057\u305f\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u306a\u304b\u306a\u304b\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\nVagrantfile\nVAGRANTFILE_API_VERSION = \"2\"\n\nDOCKER_REGISTRY_HOST = \"docker-registry\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.define \"docker-registry\"\n\n  config.vm.box = \"yungsang/boot2docker\"\n\n  config.vm.network :forwarded_port, guest: 8080, host: 8080\n\n  config.vm.provision :shell do |sh|\n    sh.inline = <<-EOT\n      sudo echo 'EXTRA_ARGS=\"--insecure-registry localhost:5000\"' > /var/lib/boot2docker/profile\n      sudo /etc/init.d/docker restart\n    EOT\n  end\n\n  config.vm.provision :docker do |d|\n    d.run \"#{DOCKER_REGISTRY_HOST}\",\n      image: \"registry\",\n      args: \"--restart=always -p 5000:5000\"\n    d.run \"docker-registry-frontend\",\n      image: \"konradkleine/docker-registry-frontend\",\n      args: \"--restart=always -p 8080:80 --link #{DOCKER_REGISTRY_HOST}:#{DOCKER_REGISTRY_HOST} -e ENV_DOCKER_REGISTRY_HOST=#{DOCKER_REGISTRY_HOST} -e ENV_DOCKER_REGISTRY_PORT=5000\"\n  end\nend\n\n\n$ vagrant up\n$ docker ps\nCONTAINER ID        IMAGE                                          COMMAND                CREATED             STATUS              PORTS                           NAMES\n8d4d03f327d6        konradkleine/docker-registry-frontend:latest   \"/bin/sh -c $START_S   11 minutes ago      Up 11 minutes       443/tcp, 0.0.0.0:8080->80/tcp   docker-registry-frontend\nb952b4364782        registry:latest                                \"docker-registry\"      15 minutes ago      Up 15 minutes       0.0.0.0:5000->5000/tcp          docker-registry\n$ docker pull yungsang/busybox\n$ docker tag yungsang/busybox localhost:5000/busybox\n$ docker push localhost:5000/busybox\n$ open http://localhost:8080/#/repository/library/busybox/\n\n\u4e0b\u8a18\u306e\u753b\u9762\u304c\u51fa\u3066\u304d\u305f\u3089\u5927\u6210\u529f\u3067\u3059\uff01\n\n- [docker_registry\u69cb\u7bc9@boot2docker - Qiita](http://qiita.com/esmjp/items/3e6a59ab5e5dfaa91494)\n\n- [Docker\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u3061\u3087\u3063\u3068\u3060\u3051\u4f7f\u3044\u3084\u3059\u304f\u3057\u3066\u307f\u308b - Qiita](http://qiita.com/to_obara/items/f24bb34ddcbab039fef1)\n\n\u3092\u8aad\u307e\u305b\u3066\u9802\u3044\u305f\u5f8c\u3001[docker-registry-frontend](https://github.com/kwk/docker-registry-frontend) \u3063\u3066\u3044\u3046\u306e\u3092 Docker \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 [Docker Registry API Client Libraries](https://github.com/docker/docker/blob/master/docs/sources/reference/api/registry_api_client_libraries.md) \u306e\u4e2d\u3067\u767a\u898b\u3057\u307e\u3057\u305f\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u306a\u304b\u306a\u304b\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\n```rb:Vagrantfile\nVAGRANTFILE_API_VERSION = \"2\"\n\nDOCKER_REGISTRY_HOST = \"docker-registry\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.define \"docker-registry\"\n\n  config.vm.box = \"yungsang/boot2docker\"\n\n  config.vm.network :forwarded_port, guest: 8080, host: 8080\n\n  config.vm.provision :shell do |sh|\n    sh.inline = <<-EOT\n      sudo echo 'EXTRA_ARGS=\"--insecure-registry localhost:5000\"' > /var/lib/boot2docker/profile\n      sudo /etc/init.d/docker restart\n    EOT\n  end\n\n  config.vm.provision :docker do |d|\n    d.run \"#{DOCKER_REGISTRY_HOST}\",\n      image: \"registry\",\n      args: \"--restart=always -p 5000:5000\"\n    d.run \"docker-registry-frontend\",\n      image: \"konradkleine/docker-registry-frontend\",\n      args: \"--restart=always -p 8080:80 --link #{DOCKER_REGISTRY_HOST}:#{DOCKER_REGISTRY_HOST} -e ENV_DOCKER_REGISTRY_HOST=#{DOCKER_REGISTRY_HOST} -e ENV_DOCKER_REGISTRY_PORT=5000\"\n  end\nend\n```\n\n```\n$ vagrant up\n$ docker ps\nCONTAINER ID        IMAGE                                          COMMAND                CREATED             STATUS              PORTS                           NAMES\n8d4d03f327d6        konradkleine/docker-registry-frontend:latest   \"/bin/sh -c $START_S   11 minutes ago      Up 11 minutes       443/tcp, 0.0.0.0:8080->80/tcp   docker-registry-frontend\nb952b4364782        registry:latest                                \"docker-registry\"      15 minutes ago      Up 15 minutes       0.0.0.0:5000->5000/tcp          docker-registry\n$ docker pull yungsang/busybox\n$ docker tag yungsang/busybox localhost:5000/busybox\n$ docker push localhost:5000/busybox\n$ open http://localhost:8080/#/repository/library/busybox/\n```\n\n\u4e0b\u8a18\u306e\u753b\u9762\u304c\u51fa\u3066\u304d\u305f\u3089\u5927\u6210\u529f\u3067\u3059\uff01\n\n![frontend.png](https://qiita-image-store.s3.amazonaws.com/0/1932/7781eaf3-e653-164e-fd1e-878b52c2e368.png)\n\n\n"}