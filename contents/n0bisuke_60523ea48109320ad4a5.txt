{"context": "\u6628\u65e5\u306e #iotlt\u3067\u3082\u8a71\u304c\u3042\u3063\u305f\u901a\u308a\u3001 RaspberryPi\u306a\u3069\u3092LINE Beacon\u5316\u3067\u304d\u308b\u300cLINE Simple Beacon\u300d\u3092\u3055\u3063\u305d\u304f\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u8a66\u3057\u3066\u307f\u305f\u7a0b\u5ea6\u3067\u30b5\u30af\u30c3\u3068\u66f8\u304f\u306e\u3067\u5f8c\u3067\u3057\u3063\u304b\u308a\u307e\u3068\u3081\u305f\u3044\n\nLINE Simple Beacon\u3068\u306f\nLINE Beacon\u306f\u4eca\u307e\u3067LINE\u304c\u8ca9\u58f2\u3057\u3066\u3044\u305f\u30c7\u30d0\u30a4\u30b9\u306e\u307f\u3067\u5229\u7528\u3067\u304d\u307e\u3057\u305f\u304c\u3001\u300cLINE Simple Beacon\u300d\u3092\u4f7f\u3046\u3053\u3068\u3067\u81ea\u5206\u3067LINE Beacon\u5bfe\u5fdc\u30c7\u30d0\u30a4\u30b9\u3092\u88fd\u4f5c\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067LINE Simple Beacon\u306f\u30c7\u30d0\u30a4\u30b9\u540d\u3067\u306f\u306a\u304f\u30aa\u30fc\u30d7\u30f3\u306a\u30d3\u30fc\u30b3\u30f3\u4ed5\u69d8\u306e\u540d\u79f0\u3067\u3059\u3002\n\u3053\u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3048\u3070\u3001Raspberry Pi\u3092\u306f\u3058\u3081\u3001Mac\u306a\u3069\u3082LINE Beacon\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u3053\u308c\u307e\u3067\u3088\u304f\u8a00\u308f\u308c\u3066\u3044\u305f \u300c\u624b\u5143\u306bLINE Beacon\u304c\u7121\u3044\u304b\u3089\u8a66\u305b\u306a\u3044\u300d\u3068\u3044\u3046\u554f\u984c\u304c\u306a\u304f\u306a\u308a\u305d\u3046\u3067\u3059\u3002 Intel Edison\u306a\u3069\u3067\u3082\u51fa\u6765\u305d\u3046\u3067\u3059\u306d\u3002\n\n\u53c2\u8003: \u30e9\u30ba\u30d9\u30ea\u30fc\u30d1\u30a4\u3067LINE Beacon\u304c\u4f5c\u6210\u53ef\u80fd\u306b\uff01\u300cLINE Simple Beacon\u300d\u4ed5\u69d8\u3092\u516c\u958b\u3057\u307e\u3057\u305f\n\n\n\u5b9f\u969b\u306b\u30e9\u30ba\u30d1\u30a43\u3092LINE Beacon\u5316\u3057\u3066Bot\u9023\u643a\u3057\u3066\u307f\u308b\n\u3053\u3053\u3067\u306f\u3059\u3067\u306bLINE Bot\u3092\u4f5c\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u60f3\u5b9a\u3067\u8a71\u3092\u3057\u307e\u3059\u3002\n\nLINE Simple Beacon\u7528\u306eHWID\u3092\u767a\u884c\n\u3053\u3061\u3089\u304b\u3089HWID\u3092\u767a\u884c\u3057\u307e\u3059\u3002HWID\u306f\u901a\u5e38LINE Beacon\u3092\u8cb7\u3046\u3068\u7aef\u672b\u6bce\u306b\u4ed8\u4e0e\u3055\u308c\u308b\u7aef\u672b\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306eID\u3067\u3059\u3002\nLINE Simple Beacon\u306eHWID\u6255\u3044\u51fa\u3057\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nLINE Beacon\u3068\u9023\u643a\u3059\u308bBot\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046\u3002\n\nHWID\u306e\u767a\u884c\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n010058c019\u3068\u3044\u3046HWID\u304c\u767a\u884c\u3055\u308c\u307e\u3057\u305f\u3002\n\n\nRaspberry Pi\u5074\u306e\u8a2d\u5b9a\n\u30e9\u30ba\u30d1\u30a4\u306f2\u4ee5\u524d\u3060\u3068Bluetooth\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u30c9\u30f3\u30b0\u30eb\u306a\u3069\u3092\u7528\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3067\u3059\u304c3\u3060\u3068\u6700\u521d\u304b\u3089\u642d\u8f09\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u697d\u3067\u3059\u306d\u3002\n\u4ee5\u4e0b\u3001\u30e9\u30ba\u30d1\u30a4\u4e0a\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nsudo apt-get install bluetooth bluez libbluetooth-dev libudev-dev\n\n\nRaspberry Pi \u306b\u3001Linux\u5411\u3051\u306eBluetooth\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u30b9\u30bf\u30c3\u30af\u3067\u3042\u308bbluez\u304a\u3088\u3073\u95a2\u9023\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\u5909\u6570\u306b\u5148\u307b\u3069\u306eHWID\u3092\u4e8c\u6841\u3054\u3068\u306b\u30b9\u30da\u30fc\u30b9\u3067\u533a\u5207\u3063\u3066\u5165\u308c\u8fbc\u307f\u307e\u3059\u3002010058c019\u3060\u3063\u305f\u306e\u3067\u4ee5\u4e0b\u306e\u5f62\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\nHWID='01 00 58 c0 19'\n\nADVERTISE_DATA=\"13 02 01 06 03 03 6F FE 0B 16 6F FE 02 ${HWID} 7F 00\"\n\nsudo hciconfig hci0 up\n\n\nBluetooth HCI\u3092\u6709\u52b9\u306b\u3057\u3001\u521d\u671f\u5316\u3057\u307e\u3059\n\nsudo hcitool -i hci0 cmd 0x08 0x0008 ${ADVERTISE_DATA}\n\n\nLE Controller Commands(OGF: 0x08), HCI_LE_Set_Advertising_Data(OCF: 0x0008) \u3092\u5b9f\u884c\u3057\u3001\n\u51fa\u529b\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\n\nsudo hciconfig hci0 leadv 3\n\n\nNon connectable undirected advertising(3)\u3067\u3001Bluetooth LE\u306e\u30a2\u30c9\u30d0\u30bf\u30a4\u30ba\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\n\n\u3053\u308c\u3067\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3067\u3059\u3002 \u30e9\u30ba\u30d1\u30a43\u304cLINE Beacon\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\n\u3053\u3093\u306a\u96f0\u56f2\u6c17\u3067\u5b9f\u884c\u3057\u3066\u3044\u304f\u3060\u3051\u306a\u306e\u3067\u7c21\u5358\u3067\u3057\u305f\u3002\n\nBot\u3068\u9023\u643a\u3057\u3066\u307f\u308b\u3002\n\u4eca\u56de\u306f\u3053\u306eSwift\u611b\u597d\u4f1a\u4f1a\u9577\u306e@jollyjoester\u3055\u3093Bot\u3068\u9023\u643a\u3057\u3066\u307f\u307e\u3059\u3002\n\u300cLINE Beacon\u5316\u3057\u3066\u3044\u308bRaspberry Pi\u306b\u8fd1\u3065\u3044\u305f\u3089\u201d\u3059\u3079\u3066\u719f\u77e5\u201d\u3068Bot\u304c\u8a71\u3057\u304b\u3051\u3066\u304f\u308b\u300d\u4ed5\u7d44\u307f\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u307b\u307cNode.js\u3067\u30aa\u30a6\u30e0\u8fd4\u3057LINE BOT \uff08axios\u5229\u7528) \u306e\u5185\u5bb9\u3067\u3059\u3002\n\u3053\u3061\u3089\u306eBot\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\n\nmacOS Sierra v10.12\nNode.js v7.5.0\nngrok\n\n\u3067\u52d5\u304b\u3057\u3066\u307e\u3059\u3002\n$ mkdir nanashima \n$ cd nanashima\n$ npm init --yes\n$ npm i --save axios\n\nBot\u30d7\u30ed\u30b0\u30e9\u30e0\u306eapp.js\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 userid\u306f\u304a\u3046\u3080\u8fd4\u3057BOT\u306a\u3069\u3067\u53d6\u5f97\u3057\u3066\u8a66\u3057\u307e\u3057\u3087\u3046\u3002\n\napp.js\n'use strict';\n\nconst http = require('http');\nconst crypto = require('crypto');\nconst axios = require('axios');\n\nconst BASE_URL = 'https://api.line.me';\nconst PUSH_PATH = '/v2/bot/message/push';//\u30d7\u30c3\u30b7\u30e5\u7528\nconst CH_SECRET = process.env.SECRET || ''; //Channel Secret\u3092\u6307\u5b9a\nconst CH_ACCESS_TOKEN = process.env.TOKEN || ''; //Channel Access Token\u3092\u6307\u5b9a\nconst USERID = process.env.USERID || ''; //userid\u3092\u6307\u5b9a\nconst SIGNATURE = crypto.createHmac('sha256', CH_SECRET);\nconst PORT = process.env.PORT || 3000;\n\nhttp.createServer((req, res) => {    \n    if(req.url !== '/' || req.method !== 'POST'){\n        res.writeHead(200, {'Content-Type': 'text/plain'});\n        res.end('hello');\n    }\n\n    let body = '';\n    req.on('data', (chunk) => {\n        body += chunk;\n    });        \n    req.on('end', () => {\n        if(body === ''){\n          console.log('body\u304c\u7a7a\u3067\u3059\u3002');\n          return;\n        }\n\n        let WebhookEventObject = JSON.parse(body).events[0];\n        console.log(WebhookEventObject);\n        //\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u3089\u308c\u3066\u6765\u305f\u5834\u5408\n        if(WebhookEventObject.type === 'beacon'){\n            let SendMessageObject = {\n                type: 'text',\n                text: '\u3059\u3079\u3066\u719f\u77e5'\n            };\n\n            axios.request({\n                method: 'post',\n                baseURL: BASE_URL,\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8',\n                    'Authorization': `Bearer ${CH_ACCESS_TOKEN}`\n                },\n                url: PUSH_PATH,\n                data: {to: USERID, messages: [SendMessageObject,SendMessageObject,SendMessageObject,SendMessageObject,SendMessageObject]},\n            }).then((res) => {\n                console.log(res.status);\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n        }\n\n        res.writeHead(200, {'Content-Type': 'text/plain'});\n        res.end('success');\n    });\n}).listen(PORT);\n\nconsole.log(`Server running at ${PORT}`);\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n$ SECRET=xxxx TOKEN=xxxxxxxx USERID=xxxxxxx node app.js\n\nBot\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3001LINE\u30a2\u30d7\u30ea(Beacon\u8a2d\u5b9a\u304c\u6709\u52b9)\u304c\u5165\u3063\u3066\u3044\u308b\u30b9\u30de\u30db\u3092\u30e9\u30ba\u30d1\u30a4\u306b\u8fd1\u3065\u3051\u307e\u3057\u3087\u3046\u3002\n\u30fb\n\u30fb\n\u30fb\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3079\u3066\u719f\u77e5\u3068Bot\u304c\u53cd\u5fdc\u3057\u3066\u304f\u308c\u307e\u3057\u305f\u3002\n\n\u304a\u308f\u308a\u306b\n#iotlt \u306b\u6765\u3066\u3044\u308b\u4eba\u3068\u304b\u306f\u7279\u306b\u305d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001 Rasbperry Pi\u306a\u3069\u306f\u3051\u3063\u3053\u3046\u7a4d\u307f\u30dc\u30fc\u30c9\u5316\u3057\u3066\u3044\u308b\u3082\u306e\u3082\u591a\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b?\n\n\u904e\u53bb\u306e\u8cc7\u7523\u3092\u6709\u52b9\u6d3b\u7528\u3057\u3064\u3064LINE Beacon\u3092\u4f7f\u3048\u308b\u306e\u306f\u304b\u306a\u308a\u30a8\u30b3\u3067\u3059\u306d\u3002\n\u307e\u305f\u3001LINE Beacon\u306b\u53cd\u5fdc\u3057\u305f\u3068\u304d\u306bRaspberry Pi\u5074\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3082\u4f55\u304b\u30d5\u30c3\u30af\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u3055\u3089\u306b\u30a2\u30a4\u30c7\u30a3\u30a2\u304c\u5e83\u304c\u308a\u305d\u3046\u3067\u3059\u3002\n\u3059\u3054\u30fc\u3044\uff01\u305f\u306e\u3057\u30fc\uff01 \n\u3068\u3044\u3046\u3053\u3068\u3067LINE BOT AWARDS\u306b\u3082\u5fdc\u52df\u3057\u30661000\u4e07\u3092...! \n\n[\u6628\u65e5\u306e #iotlt](https://www.facebook.com/groups/IoTLT/permalink/709283712576079/)\u3067\u3082\u8a71\u304c\u3042\u3063\u305f\u901a\u308a\u3001 RaspberryPi\u306a\u3069\u3092LINE Beacon\u5316\u3067\u304d\u308b\u300cLINE Simple Beacon\u300d\u3092\u3055\u3063\u305d\u304f\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n![](https://i.gyazo.com/6dbe36141aa87090af63c41f4823f9a4.png)\n\n\u8a66\u3057\u3066\u307f\u305f\u7a0b\u5ea6\u3067\u30b5\u30af\u30c3\u3068\u66f8\u304f\u306e\u3067\u5f8c\u3067\u3057\u3063\u304b\u308a\u307e\u3068\u3081\u305f\u3044\n\n## LINE Simple Beacon\u3068\u306f\n\nLINE Beacon\u306f\u4eca\u307e\u3067LINE\u304c\u8ca9\u58f2\u3057\u3066\u3044\u305f\u30c7\u30d0\u30a4\u30b9\u306e\u307f\u3067\u5229\u7528\u3067\u304d\u307e\u3057\u305f\u304c\u3001\u300cLINE Simple Beacon\u300d\u3092\u4f7f\u3046\u3053\u3068\u3067\u81ea\u5206\u3067LINE Beacon\u5bfe\u5fdc\u30c7\u30d0\u30a4\u30b9\u3092\u88fd\u4f5c\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067LINE Simple Beacon\u306f\u30c7\u30d0\u30a4\u30b9\u540d\u3067\u306f\u306a\u304f\u30aa\u30fc\u30d7\u30f3\u306a\u30d3\u30fc\u30b3\u30f3\u4ed5\u69d8\u306e\u540d\u79f0\u3067\u3059\u3002\n\n\u3053\u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3048\u3070\u3001Raspberry Pi\u3092\u306f\u3058\u3081\u3001Mac\u306a\u3069\u3082LINE Beacon\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u3053\u308c\u307e\u3067\u3088\u304f\u8a00\u308f\u308c\u3066\u3044\u305f **\u300c\u624b\u5143\u306bLINE Beacon\u304c\u7121\u3044\u304b\u3089\u8a66\u305b\u306a\u3044\u300d\u3068\u3044\u3046\u554f\u984c\u304c\u306a\u304f\u306a\u308a\u305d\u3046**\u3067\u3059\u3002 Intel Edison\u306a\u3069\u3067\u3082\u51fa\u6765\u305d\u3046\u3067\u3059\u306d\u3002\n\n> \u53c2\u8003: [\u30e9\u30ba\u30d9\u30ea\u30fc\u30d1\u30a4\u3067LINE Beacon\u304c\u4f5c\u6210\u53ef\u80fd\u306b\uff01\u300cLINE Simple Beacon\u300d\u4ed5\u69d8\u3092\u516c\u958b\u3057\u307e\u3057\u305f](https://engineering.linecorp.com/ja/blog/detail/117)\n\n## \u5b9f\u969b\u306b\u30e9\u30ba\u30d1\u30a43\u3092LINE Beacon\u5316\u3057\u3066Bot\u9023\u643a\u3057\u3066\u307f\u308b\n\n\u3053\u3053\u3067\u306f\u3059\u3067\u306bLINE Bot\u3092\u4f5c\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u60f3\u5b9a\u3067\u8a71\u3092\u3057\u307e\u3059\u3002\n\n### LINE Simple Beacon\u7528\u306eHWID\u3092\u767a\u884c\n\n[\u3053\u3061\u3089](https://admin-official.line.me/beacon/register)\u304b\u3089HWID\u3092\u767a\u884c\u3057\u307e\u3059\u3002HWID\u306f\u901a\u5e38LINE Beacon\u3092\u8cb7\u3046\u3068\u7aef\u672b\u6bce\u306b\u4ed8\u4e0e\u3055\u308c\u308b\u7aef\u672b\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306eID\u3067\u3059\u3002\n\n`LINE Simple Beacon\u306eHWID\u6255\u3044\u51fa\u3057`\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![](https://i.gyazo.com/c32d4bd4037140ed14f563a3420b510f.png)\n\nLINE Beacon\u3068\u9023\u643a\u3059\u308bBot\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046\u3002\n![](https://i.gyazo.com/9c4bd253f5188a1a36e6d40059f9574c.png)\n\n`HWID\u306e\u767a\u884c`\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![](https://i.gyazo.com/c0e8a9ed724aa2bf91dc5aacb2d9727d.png)\n\n010058c019\u3068\u3044\u3046HWID\u304c\u767a\u884c\u3055\u308c\u307e\u3057\u305f\u3002\n![](https://i.gyazo.com/a6aa95447cee1e0d410b59652cc7dbb7.png)\n\n### Raspberry Pi\u5074\u306e\u8a2d\u5b9a\n\n\u30e9\u30ba\u30d1\u30a4\u306f2\u4ee5\u524d\u3060\u3068Bluetooth\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u30c9\u30f3\u30b0\u30eb\u306a\u3069\u3092\u7528\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3067\u3059\u304c3\u3060\u3068\u6700\u521d\u304b\u3089\u642d\u8f09\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u697d\u3067\u3059\u306d\u3002\n\n\u4ee5\u4e0b\u3001\u30e9\u30ba\u30d1\u30a4\u4e0a\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n```bash\nsudo apt-get install bluetooth bluez libbluetooth-dev libudev-dev\n```\n>Raspberry Pi \u306b\u3001Linux\u5411\u3051\u306eBluetooth\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u30b9\u30bf\u30c3\u30af\u3067\u3042\u308bbluez\u304a\u3088\u3073\u95a2\u9023\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\u5909\u6570\u306b\u5148\u307b\u3069\u306eHWID\u3092\u4e8c\u6841\u3054\u3068\u306b\u30b9\u30da\u30fc\u30b9\u3067\u533a\u5207\u3063\u3066\u5165\u308c\u8fbc\u307f\u307e\u3059\u3002`010058c019`\u3060\u3063\u305f\u306e\u3067\u4ee5\u4e0b\u306e\u5f62\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```bash\nHWID='01 00 58 c0 19'\n```\n\n```bash\nADVERTISE_DATA=\"13 02 01 06 03 03 6F FE 0B 16 6F FE 02 ${HWID} 7F 00\"\n```\n\n```bash\nsudo hciconfig hci0 up\n```\n>Bluetooth HCI\u3092\u6709\u52b9\u306b\u3057\u3001\u521d\u671f\u5316\u3057\u307e\u3059\n\n```bash\nsudo hcitool -i hci0 cmd 0x08 0x0008 ${ADVERTISE_DATA}\n```\n\n>LE Controller Commands(OGF: 0x08), HCI_LE_Set_Advertising_Data(OCF: 0x0008) \u3092\u5b9f\u884c\u3057\u3001\n>\u51fa\u529b\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\n\n```bash\nsudo hciconfig hci0 leadv 3\n```\n>Non connectable undirected advertising(3)\u3067\u3001Bluetooth LE\u306e\u30a2\u30c9\u30d0\u30bf\u30a4\u30ba\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\n\n\u3053\u308c\u3067\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3067\u3059\u3002 **\u30e9\u30ba\u30d1\u30a43\u304cLINE Beacon\u306b\u306a\u308a\u307e\u3057\u305f\uff01**\n\n![](https://i.gyazo.com/6e2cf0609b3bf45c0ea7ceb292d41fa0.png)\n\u3053\u3093\u306a\u96f0\u56f2\u6c17\u3067\u5b9f\u884c\u3057\u3066\u3044\u304f\u3060\u3051\u306a\u306e\u3067\u7c21\u5358\u3067\u3057\u305f\u3002\n\n### Bot\u3068\u9023\u643a\u3057\u3066\u307f\u308b\u3002\n\n\u4eca\u56de\u306f\u3053\u306eSwift\u611b\u597d\u4f1a\u4f1a\u9577\u306e@jollyjoester\u3055\u3093Bot\u3068\u9023\u643a\u3057\u3066\u307f\u307e\u3059\u3002\n\n**\u300cLINE Beacon\u5316\u3057\u3066\u3044\u308bRaspberry Pi\u306b\u8fd1\u3065\u3044\u305f\u3089\u201d\u3059\u3079\u3066\u719f\u77e5\u201d\u3068Bot\u304c\u8a71\u3057\u304b\u3051\u3066\u304f\u308b\u300d**\u4ed5\u7d44\u307f\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n![336862.LINE.jpg](https://qiita-image-store.s3.amazonaws.com/0/35387/ccb25e87-0e62-7697-9a07-d7a9901ca839.jpeg \"336862.LINE.jpg\")\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u307b\u307c[Node.js\u3067\u30aa\u30a6\u30e0\u8fd4\u3057LINE BOT \uff08axios\u5229\u7528) ](http://qiita.com/n0bisuke/items/83c4de0510d318c0ae67)\u306e\u5185\u5bb9\u3067\u3059\u3002\n\n\u3053\u3061\u3089\u306eBot\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\n\n* macOS Sierra v10.12\n* Node.js v7.5.0\n* ngrok\n\n\u3067\u52d5\u304b\u3057\u3066\u307e\u3059\u3002\n\n```bash\n$ mkdir nanashima \n$ cd nanashima\n$ npm init --yes\n$ npm i --save axios\n```\n\nBot\u30d7\u30ed\u30b0\u30e9\u30e0\u306eapp.js\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 userid\u306f\u304a\u3046\u3080\u8fd4\u3057BOT\u306a\u3069\u3067\u53d6\u5f97\u3057\u3066\u8a66\u3057\u307e\u3057\u3087\u3046\u3002\n\n```app.js\n'use strict';\n\nconst http = require('http');\nconst crypto = require('crypto');\nconst axios = require('axios');\n\nconst BASE_URL = 'https://api.line.me';\nconst PUSH_PATH = '/v2/bot/message/push';//\u30d7\u30c3\u30b7\u30e5\u7528\nconst CH_SECRET = process.env.SECRET || ''; //Channel Secret\u3092\u6307\u5b9a\nconst CH_ACCESS_TOKEN = process.env.TOKEN || ''; //Channel Access Token\u3092\u6307\u5b9a\nconst USERID = process.env.USERID || ''; //userid\u3092\u6307\u5b9a\nconst SIGNATURE = crypto.createHmac('sha256', CH_SECRET);\nconst PORT = process.env.PORT || 3000;\n\nhttp.createServer((req, res) => {    \n    if(req.url !== '/' || req.method !== 'POST'){\n        res.writeHead(200, {'Content-Type': 'text/plain'});\n        res.end('hello');\n    }\n\n    let body = '';\n    req.on('data', (chunk) => {\n        body += chunk;\n    });        \n    req.on('end', () => {\n        if(body === ''){\n          console.log('body\u304c\u7a7a\u3067\u3059\u3002');\n          return;\n        }\n\n        let WebhookEventObject = JSON.parse(body).events[0];\n        console.log(WebhookEventObject);\n        //\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u3089\u308c\u3066\u6765\u305f\u5834\u5408\n        if(WebhookEventObject.type === 'beacon'){\n            let SendMessageObject = {\n                type: 'text',\n                text: '\u3059\u3079\u3066\u719f\u77e5'\n            };\n\n            axios.request({\n                method: 'post',\n                baseURL: BASE_URL,\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8',\n                    'Authorization': `Bearer ${CH_ACCESS_TOKEN}`\n                },\n                url: PUSH_PATH,\n                data: {to: USERID, messages: [SendMessageObject,SendMessageObject,SendMessageObject,SendMessageObject,SendMessageObject]},\n            }).then((res) => {\n                console.log(res.status);\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n        }\n\n        res.writeHead(200, {'Content-Type': 'text/plain'});\n        res.end('success');\n    });\n}).listen(PORT);\n\nconsole.log(`Server running at ${PORT}`);\n```\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\n```bash\n$ SECRET=xxxx TOKEN=xxxxxxxx USERID=xxxxxxx node app.js\n```\n\nBot\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3001LINE\u30a2\u30d7\u30ea(Beacon\u8a2d\u5b9a\u304c\u6709\u52b9)\u304c\u5165\u3063\u3066\u3044\u308b\u30b9\u30de\u30db\u3092\u30e9\u30ba\u30d1\u30a4\u306b\u8fd1\u3065\u3051\u307e\u3057\u3087\u3046\u3002\n\n\u30fb\n\u30fb\n\u30fb\n\n![5667154601065.LINE.jpg](https://qiita-image-store.s3.amazonaws.com/0/35387/d3a0e33b-7021-f35f-2a09-fc7bb178352b.jpeg \"5667154601065.LINE.jpg\")\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3079\u3066\u719f\u77e5\u3068Bot\u304c\u53cd\u5fdc\u3057\u3066\u304f\u308c\u307e\u3057\u305f\u3002\n\n## \u304a\u308f\u308a\u306b\n\n[#iotlt](https://iotlt.connpass.com/) \u306b\u6765\u3066\u3044\u308b\u4eba\u3068\u304b\u306f\u7279\u306b\u305d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001 Rasbperry Pi\u306a\u3069\u306f\u3051\u3063\u3053\u3046\u7a4d\u307f\u30dc\u30fc\u30c9\u5316\u3057\u3066\u3044\u308b\u3082\u306e\u3082\u591a\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b?\n\n![5666900038334.LINE.jpg](https://qiita-image-store.s3.amazonaws.com/0/35387/93f7901a-132b-e417-3fc3-e61313c9ede2.jpeg \"5666900038334.LINE.jpg\")\n\n\u904e\u53bb\u306e\u8cc7\u7523\u3092\u6709\u52b9\u6d3b\u7528\u3057\u3064\u3064LINE Beacon\u3092\u4f7f\u3048\u308b\u306e\u306f\u304b\u306a\u308a\u30a8\u30b3\u3067\u3059\u306d\u3002\n\u307e\u305f\u3001LINE Beacon\u306b\u53cd\u5fdc\u3057\u305f\u3068\u304d\u306bRaspberry Pi\u5074\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3082\u4f55\u304b\u30d5\u30c3\u30af\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u3055\u3089\u306b\u30a2\u30a4\u30c7\u30a3\u30a2\u304c\u5e83\u304c\u308a\u305d\u3046\u3067\u3059\u3002\n\n\u3059\u3054\u30fc\u3044\uff01\u305f\u306e\u3057\u30fc\uff01 \n\n\u3068\u3044\u3046\u3053\u3068\u3067[LINE BOT AWARDS](https://botawards.line.me/ja/)\u306b\u3082\u5fdc\u52df\u3057\u30661000\u4e07\u3092...! \n", "tags": ["RaspberryPi", "linebot", "Node.js", "Line", "BLE"]}