{"tags": ["PHP5.3", "\u6570\u5b66", "\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0"], "context": " More than 1 year has passed since last update.\u3042\u308b\u5024\u3092n\u500b\u306b\u5206\u5272\u3059\u308b\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u3044\u3002\n\u591a\u5206\u3001\u6570\u5b66\u3092\u5b66\u3093\u3067\u3044\u308b\u3068\u4e00\u767a\u3067\u308f\u304b\u308b\u3093\u3060\u308d\u3046\u306a\u3041\u3002\n\u66f8\u3044\u3066\u307f\u305f\u3051\u3069\u679c\u3066\u3057\u306a\u304f\u4e0d\u5b89\u3002\n\n \u30b3\u30fc\u30c9\n\ndistribute.php\n\n$target = array(\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n);\n\n$target_cnt = count($target);\n$total = 123456789;\necho $total . \"\\n\";\n$result = array_fill(0, $target_cnt, 0);\n$i = 0;\n\nwhile ($total) {\n    if (!($i %= $target_cnt)) {\n        shuffle($result);\n    }\n    $rand = mt_rand(0, $total);\n    $result[$i] += $rand;\n    $total -= $rand;\n    $i++;\n}\n\nvar_dump(array_combine($target, $result));\necho $total . \"\\n\";\necho array_sum($result) . \"\\n\";\n\n\n\n\u5024\u304c\u52a0\u7b97\u3055\u308c\u308b\u9806\u756a\u306f\u30e9\u30f3\u30c0\u30e0\u3060\u3051\u3069\u3001\u56de\u6570\u306f(\u9014\u4e2d\u3067\u7d42\u308f\u3089\u306a\u3044\u9650\u308a)\u7b49\u3057\u3044\u3001\u3068\u3057\u3066\u307f\u305f\u3051\u3069\u610f\u5473\u306f\u3042\u308b\u306e\u304b\u3057\u3089\u3093\u3002\n\u9806\u756a\u56fa\u5b9a\u3060\u3068\u5f8c\u534a\u304c\u5c11\u306a\u304f\u306a\u308a\u305d\u3046\u3060\u3057\u3001\u6bce\u56de\u30e9\u30f3\u30c0\u30e0\u3067\u4e00\u3064\u306b\u52a0\u7b97\u3060\u3068\u504f\u308a\u304c\u51fa\u305d\u3046\u3002\n\u5e73\u5747\u7684\u306b\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u6642\u70b9\u3067\u30e9\u30f3\u30c0\u30e0\u3067\u306a\u3044\uff1f\n\n \u51fa\u529b\n\noutput\n123456789\narray(8) {\n  [\"A\"]=>\n  int(95557576)\n  [\"B\"]=>\n  int(313427)\n  [\"C\"]=>\n  int(2720550)\n  [\"D\"]=>\n  int(448420)\n  [\"E\"]=>\n  int(3296615)\n  [\"F\"]=>\n  int(73736)\n  [\"G\"]=>\n  int(172534)\n  [\"H\"]=>\n  int(20873931)\n}\n0\n123456789\n\n\n\n\u30b2\u30fc\u30e0\u306a\u3069\u3067\u4f59\u5270\u5206\u3092\u30aa\u30fc\u30c8\u3067\u632f\u308a\u5206\u3051\u308b\u6a5f\u80fd\u3084\u3001\u6575CPU\u306e\u30e9\u30f3\u30c0\u30e0\u306a\u884c\u52d5\u529b\u5272\u308a\u5f53\u3066\u3001\u90e8\u968a\u5206\u5272\u3068\u304b\u3092\u307c\u3084\uff5e\u3068\u8003\u3048\u3066\u3044\u305f\u3002\n\u3053\u308c\u81ea\u4f53\u306e\u4f7f\u3044\u9053\u306f\u3042\u308b\u3093\u3067\u3059\u304b\u306d\uff1f\n\u5b9f\u969b\u306e\u30b2\u30fc\u30e0\u306f\u3082\u3063\u3068\u6700\u9069\u306a\u884c\u52d5\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u884c\u3046\u3093\u3067\u3059\u3088\u306d\u3002\n\u3059\u3054\u3044\u306a\u3041\u3002\n\n \u8ffd\u8a181\n\u3084\u3063\u3071\u308a\u5f8c\u534a\u307b\u3069\u30e9\u30f3\u30c0\u30e0\u5024\u304c\u3068\u308b\u5024\u306e\u7bc4\u56f2\u304c\u72ed\u307e\u308b\u306e\u306f\u304a\u304b\u3057\u3044\u6c17\u304c\u3057\u3066\u304d\u305f\u3002\n\u3060\u304b\u3089\u3001\uff11\u30eb\u30fc\u30d7\u3067\u52a0\u7b97\u3055\u308c\u308b\u6700\u5927\u5024\u3092\u5747\u7b49\u306b\u3057\u3066\u307f\u305f\u3002\n\ndistribute2.php\n\n$target = array(\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n);\n\n$target_cnt = count($target);\n$total = 123456789;\necho $total . \"\\n\";\n$result = array_fill(0, $target_cnt, 0);\n$remainder = 0; // IDE\u8b66\u544a\u6d88\u3057\nwhile ($total) {\n\n    $remainder = $total % $target_cnt;\n    $quotient = (int)($total / $target_cnt);\n    if ($quotient == 0) {\n        break;\n    }\n\n    for ($i = 0; $i < $target_cnt; $i++) {\n        $rand = mt_rand(0, $quotient);\n        $result[$i] += $rand;\n        $total -= $rand;\n    }\n}\n\n// \u4f59\u308a\u306e\u5206\u914d\n$total -= $remainder;\n$i = 0;\nwhile ($remainder--) {\n    $i %= $target_cnt;\n    $result[$i++]++;\n}\n\nvar_dump(array_combine($target, $result));\necho $total . \"\\n\";\necho array_sum($result) . \"\\n\";\n\n\n\n\noutput2\n\n123456789\narray(8) {\n  [\"A\"]=>\n  int(11087871)\n  [\"B\"]=>\n  int(13496825)\n  [\"C\"]=>\n  int(15902076)\n  [\"D\"]=>\n  int(17920329)\n  [\"E\"]=>\n  int(17281928)\n  [\"F\"]=>\n  int(21869953)\n  [\"G\"]=>\n  int(13350973)\n  [\"H\"]=>\n  int(12546834)\n}\n0\n123456789\n\n\n\n\u6700\u521d\u3088\u308a\u5024\u304c\u5747\u7b49\u304e\u307f\u306b\u306a\u3063\u305f\u6c17\u304c\u3059\u308b\u3002\n\u3067\u3082\u5747\u7b49\u306b\u3059\u308b\u3053\u3068\u304c\u4e3b\u76ee\u7684\u3067\u306f\u306a\u3044\u3057\u2026\n\u9006\u306b\u6975\u7aef\u306a\u5024\u304c\u51fa\u306a\u3044\u3063\u3066\u6b20\u70b9\u3067\u3082\u3042\u308b\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u30e9\u30f3\u30c0\u30e0\u3063\u3066\u306a\u3093\u3060(\u7121\u77e5)\n\u3042\u308b\u5024\u3092n\u500b\u306b\u5206\u5272\u3059\u308b\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u3044\u3002\n\u591a\u5206\u3001\u6570\u5b66\u3092\u5b66\u3093\u3067\u3044\u308b\u3068\u4e00\u767a\u3067\u308f\u304b\u308b\u3093\u3060\u308d\u3046\u306a\u3041\u3002\n\u66f8\u3044\u3066\u307f\u305f\u3051\u3069\u679c\u3066\u3057\u306a\u304f\u4e0d\u5b89\u3002\n\n\n# <i class=\"fa fa-code\"></i> \u30b3\u30fc\u30c9\n\n```php:distribute.php\n\n$target = array(\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n);\n\n$target_cnt = count($target);\n$total = 123456789;\necho $total . \"\\n\";\n$result = array_fill(0, $target_cnt, 0);\n$i = 0;\n\nwhile ($total) {\n    if (!($i %= $target_cnt)) {\n        shuffle($result);\n    }\n    $rand = mt_rand(0, $total);\n    $result[$i] += $rand;\n    $total -= $rand;\n    $i++;\n}\n\nvar_dump(array_combine($target, $result));\necho $total . \"\\n\";\necho array_sum($result) . \"\\n\";\n\n```\n\n\u5024\u304c\u52a0\u7b97\u3055\u308c\u308b\u9806\u756a\u306f\u30e9\u30f3\u30c0\u30e0\u3060\u3051\u3069\u3001\u56de\u6570\u306f(\u9014\u4e2d\u3067\u7d42\u308f\u3089\u306a\u3044\u9650\u308a)\u7b49\u3057\u3044\u3001\u3068\u3057\u3066\u307f\u305f\u3051\u3069\u610f\u5473\u306f\u3042\u308b\u306e\u304b\u3057\u3089\u3093\u3002\n\u9806\u756a\u56fa\u5b9a\u3060\u3068\u5f8c\u534a\u304c\u5c11\u306a\u304f\u306a\u308a\u305d\u3046\u3060\u3057\u3001\u6bce\u56de\u30e9\u30f3\u30c0\u30e0\u3067\u4e00\u3064\u306b\u52a0\u7b97\u3060\u3068\u504f\u308a\u304c\u51fa\u305d\u3046\u3002\n\u5e73\u5747\u7684\u306b\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u6642\u70b9\u3067\u30e9\u30f3\u30c0\u30e0\u3067\u306a\u3044\uff1f\n\n# <i class=\"fa fa-pencil\"></i> \u51fa\u529b\n\n```php:output\n123456789\narray(8) {\n  [\"A\"]=>\n  int(95557576)\n  [\"B\"]=>\n  int(313427)\n  [\"C\"]=>\n  int(2720550)\n  [\"D\"]=>\n  int(448420)\n  [\"E\"]=>\n  int(3296615)\n  [\"F\"]=>\n  int(73736)\n  [\"G\"]=>\n  int(172534)\n  [\"H\"]=>\n  int(20873931)\n}\n0\n123456789\n```\n\n***\n\n\n\u30b2\u30fc\u30e0\u306a\u3069\u3067\u4f59\u5270\u5206\u3092\u30aa\u30fc\u30c8\u3067\u632f\u308a\u5206\u3051\u308b\u6a5f\u80fd\u3084\u3001\u6575CPU\u306e\u30e9\u30f3\u30c0\u30e0\u306a\u884c\u52d5\u529b\u5272\u308a\u5f53\u3066\u3001\u90e8\u968a\u5206\u5272\u3068\u304b\u3092\u307c\u3084\uff5e\u3068\u8003\u3048\u3066\u3044\u305f\u3002\n\u3053\u308c\u81ea\u4f53\u306e\u4f7f\u3044\u9053\u306f\u3042\u308b\u3093\u3067\u3059\u304b\u306d\uff1f\n\u5b9f\u969b\u306e\u30b2\u30fc\u30e0\u306f\u3082\u3063\u3068\u6700\u9069\u306a\u884c\u52d5\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u884c\u3046\u3093\u3067\u3059\u3088\u306d\u3002\n\u3059\u3054\u3044\u306a\u3041\u3002\n\n# :one: \u8ffd\u8a181\n\n\u3084\u3063\u3071\u308a\u5f8c\u534a\u307b\u3069\u30e9\u30f3\u30c0\u30e0\u5024\u304c\u3068\u308b\u5024\u306e\u7bc4\u56f2\u304c\u72ed\u307e\u308b\u306e\u306f\u304a\u304b\u3057\u3044\u6c17\u304c\u3057\u3066\u304d\u305f\u3002\n\u3060\u304b\u3089\u3001\uff11\u30eb\u30fc\u30d7\u3067\u52a0\u7b97\u3055\u308c\u308b\u6700\u5927\u5024\u3092\u5747\u7b49\u306b\u3057\u3066\u307f\u305f\u3002\n\n```php:distribute2.php\n\n$target = array(\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n);\n\n$target_cnt = count($target);\n$total = 123456789;\necho $total . \"\\n\";\n$result = array_fill(0, $target_cnt, 0);\n$remainder = 0; // IDE\u8b66\u544a\u6d88\u3057\nwhile ($total) {\n\n    $remainder = $total % $target_cnt;\n    $quotient = (int)($total / $target_cnt);\n    if ($quotient == 0) {\n        break;\n    }\n\n    for ($i = 0; $i < $target_cnt; $i++) {\n        $rand = mt_rand(0, $quotient);\n        $result[$i] += $rand;\n        $total -= $rand;\n    }\n}\n\n// \u4f59\u308a\u306e\u5206\u914d\n$total -= $remainder;\n$i = 0;\nwhile ($remainder--) {\n    $i %= $target_cnt;\n    $result[$i++]++;\n}\n\nvar_dump(array_combine($target, $result));\necho $total . \"\\n\";\necho array_sum($result) . \"\\n\";\n\n```\n\n```php:output2\n\n123456789\narray(8) {\n  [\"A\"]=>\n  int(11087871)\n  [\"B\"]=>\n  int(13496825)\n  [\"C\"]=>\n  int(15902076)\n  [\"D\"]=>\n  int(17920329)\n  [\"E\"]=>\n  int(17281928)\n  [\"F\"]=>\n  int(21869953)\n  [\"G\"]=>\n  int(13350973)\n  [\"H\"]=>\n  int(12546834)\n}\n0\n123456789\n\n```\n\n\u6700\u521d\u3088\u308a\u5024\u304c\u5747\u7b49\u304e\u307f\u306b\u306a\u3063\u305f\u6c17\u304c\u3059\u308b\u3002\n\u3067\u3082\u5747\u7b49\u306b\u3059\u308b\u3053\u3068\u304c\u4e3b\u76ee\u7684\u3067\u306f\u306a\u3044\u3057\u2026\n\u9006\u306b\u6975\u7aef\u306a\u5024\u304c\u51fa\u306a\u3044\u3063\u3066\u6b20\u70b9\u3067\u3082\u3042\u308b\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u30e9\u30f3\u30c0\u30e0\u3063\u3066\u306a\u3093\u3060(\u7121\u77e5)\n"}