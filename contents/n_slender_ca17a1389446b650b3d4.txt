{"context": " More than 1 year has passed since last update./etc/init.d/functions \u306e\u95a2\u6570\u3092\u4f7f\u3063\u305f\u5f62\u3067\u3001play\u30a2\u30d7\u30ea\u306erc\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3072\u306a\u304c\u305f\u3092\u4f5c\u6210\u3002\nstart,stop,status\u304c\u3042\u308c\u3070\u5341\u5206\u3068\u3044\u3046\u65b9\u91dd\u3002\n\u691c\u8a3c\u3057\u3066\u3001\u3082\u3046\u5c11\u3057\u6574\u7406\u3057\u3066\u3044\u304f\u3002\n\nplay-app\n#!/bin/sh\n# chkconfig:345 99 1\n# description: play-app \n# processname: $APP\n\nIP_ADDRESS=`ip -f inet -o addr show eth0|cut -d\\  -f 7 | cut -d/ -f 1`\n\nAPP=app\nAPP_USER=appuser\nAPP_HOME=/home/${APP_USER}/${APP}\n\nCONF=\"-Dconfig.file=conf/application.conf -Dlogger.file=conf/logger.xml\"\n\nMEM=\"-J-Xms1024M -J-Xmx1024M -XX:MaxPermSize=256m -XX:PermSize=256m\"\n\nGC=\"-J-Xloggc:/var/log/${APP}/gc_%p_%t.log \n-J-XX:+UseGCLogFileRotation -J-XX:NumberOfGCLogFiles=10 -J-XX:GCLogFileSize=100k \n-J-XX:+PrintGCDetails \n-J-XX:+PrintGCTimeStamps\"\n\nHEAPDUMP=\"-J-XX:+HeapDumpOnOutOfMemoryError\"\n\nJMX=\"-Dcom.sun.management.jmxremote.authenticate=false \n-Dcom.sun.management.jmxremote.ssl=false \n-Dcom.sun.management.jmxremote.port=1111\n-Djava.rmi.server.hostname=${IP_ADDRESS}\"\n\nHEAPSTATS=\"-J-agentlib:heapstats\"\n\n\nJAVA_OPTIONS=\"$CONF $MEM $GC $HEAPDUMP $JMX $HEAPSTATS\"\n\n# Source function library.\n. /etc/rc.d/init.d/functions\n\nprog=$(basename $APP)\nlockfile=${LOCKFILE-/var/lock/subsys/${APP_NAME}}\npidfile=${APP_HOME}/RUNNING_PID\nRETVAL=0\n\nstart(){\n    echo  \"starting ${prog}:\"\n    su - $APP_USER -c \"cd $Dir; ./bin/${APP} $JAVA_OPTIONS &\"\n    RETVAL=$?\n    echo\n    [ $RETVAL = 0 ] && touch ${lockfile}\n    return $RETVAL\n}\n\nstop(){\n    killproc -p ${pidfile} ${prog} -QUIT\n    RETVAL=$?\n    echo\n    [ $RETVAL = 0 ] && rm -f ${lockfile} ${pidfile}\n}\n\nstatus(){\n    status -p ${pidfile} ${prog}\n    RETVAL=$?\n}\n\ncase \"$1\" in\n  start)\n    start\n      ;;\n  stop)\n    stop\n     ;;\n  status)\n     status\n     ;;\n  restart)\n    stop\n    start\n     ;;\n     *)\n      echo $\"Usage: $0 {start|stop|status|restart}\"\n      exit 2\nesac\n\n\n\u53c2\u8003\u30b5\u30a4\u30c8\nhttps://gist.github.com/shrkw/4491097\nhttps://gist.github.com/kozy4324/5795993\nhttp://darutk-oboegaki.blogspot.jp/2012/10/etcinitdfunctions.html\nhttp://d.hatena.ne.jp/tashen/20081124/1227548098\nhttp://hogespace.hatenablog.jp/entry/2013/06/13/222637\nhttps://moomindani.wordpress.com/2014/09/17/linux-command-ip-address/\nhttp://qiita.com/sharow/items/66d89136180884a2f7b7\nhttp://qiita.com/YN0314/items/5e5c57d52ac1379daf6d\nhttp://d.hatena.ne.jp/miyakawa_taku/20150131/1422696243\nhttp://www.oracle.co.jp/jdt2015/pdf/7-3.pdf\n/etc/init.d/functions \u306e\u95a2\u6570\u3092\u4f7f\u3063\u305f\u5f62\u3067\u3001play\u30a2\u30d7\u30ea\u306erc\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3072\u306a\u304c\u305f\u3092\u4f5c\u6210\u3002\n\nstart,stop,status\u304c\u3042\u308c\u3070\u5341\u5206\u3068\u3044\u3046\u65b9\u91dd\u3002\n\n\u691c\u8a3c\u3057\u3066\u3001\u3082\u3046\u5c11\u3057\u6574\u7406\u3057\u3066\u3044\u304f\u3002\n\n```lang:play-app\n#!/bin/sh\n# chkconfig:345 99 1\n# description: play-app \n# processname: $APP\n\nIP_ADDRESS=`ip -f inet -o addr show eth0|cut -d\\  -f 7 | cut -d/ -f 1`\n\nAPP=app\nAPP_USER=appuser\nAPP_HOME=/home/${APP_USER}/${APP}\n\nCONF=\"-Dconfig.file=conf/application.conf -Dlogger.file=conf/logger.xml\"\n\nMEM=\"-J-Xms1024M -J-Xmx1024M -XX:MaxPermSize=256m -XX:PermSize=256m\"\n\nGC=\"-J-Xloggc:/var/log/${APP}/gc_%p_%t.log \n-J-XX:+UseGCLogFileRotation -J-XX:NumberOfGCLogFiles=10 -J-XX:GCLogFileSize=100k \n-J-XX:+PrintGCDetails \n-J-XX:+PrintGCTimeStamps\"\n\nHEAPDUMP=\"-J-XX:+HeapDumpOnOutOfMemoryError\"\n\nJMX=\"-Dcom.sun.management.jmxremote.authenticate=false \n-Dcom.sun.management.jmxremote.ssl=false \n-Dcom.sun.management.jmxremote.port=1111\n-Djava.rmi.server.hostname=${IP_ADDRESS}\"\n\nHEAPSTATS=\"-J-agentlib:heapstats\"\n\n\nJAVA_OPTIONS=\"$CONF $MEM $GC $HEAPDUMP $JMX $HEAPSTATS\"\n\n# Source function library.\n. /etc/rc.d/init.d/functions\n\nprog=$(basename $APP)\nlockfile=${LOCKFILE-/var/lock/subsys/${APP_NAME}}\npidfile=${APP_HOME}/RUNNING_PID\nRETVAL=0\n\nstart(){\n    echo  \"starting ${prog}:\"\n    su - $APP_USER -c \"cd $Dir; ./bin/${APP} $JAVA_OPTIONS &\"\n    RETVAL=$?\n    echo\n    [ $RETVAL = 0 ] && touch ${lockfile}\n    return $RETVAL\n}\n\nstop(){\n    killproc -p ${pidfile} ${prog} -QUIT\n    RETVAL=$?\n    echo\n    [ $RETVAL = 0 ] && rm -f ${lockfile} ${pidfile}\n}\n\nstatus(){\n    status -p ${pidfile} ${prog}\n    RETVAL=$?\n}\n\ncase \"$1\" in\n  start)\n    start\n      ;;\n  stop)\n    stop\n     ;;\n  status)\n     status\n     ;;\n  restart)\n    stop\n    start\n     ;;\n     *)\n      echo $\"Usage: $0 {start|stop|status|restart}\"\n      exit 2\nesac\n```\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\nhttps://gist.github.com/shrkw/4491097\n\nhttps://gist.github.com/kozy4324/5795993\n\nhttp://darutk-oboegaki.blogspot.jp/2012/10/etcinitdfunctions.html\n\nhttp://d.hatena.ne.jp/tashen/20081124/1227548098\n\nhttp://hogespace.hatenablog.jp/entry/2013/06/13/222637\n\nhttps://moomindani.wordpress.com/2014/09/17/linux-command-ip-address/\n\nhttp://qiita.com/sharow/items/66d89136180884a2f7b7\n\nhttp://qiita.com/YN0314/items/5e5c57d52ac1379daf6d\n\nhttp://d.hatena.ne.jp/miyakawa_taku/20150131/1422696243\n\nhttp://www.oracle.co.jp/jdt2015/pdf/7-3.pdf\n", "tags": ["shell", "PlayFramework", "init.d", "CentOS"]}