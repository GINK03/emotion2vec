{"context": " More than 1 year has passed since last update.\n\nscala \u306e play \u3067 routes \u306bcase object \u4f7f\u3046\nenum\u3088\u308acase class\u306e\u65b9\u304c\u826f\u3055\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u304b\n\nscalaVersion := \"2.11.2\"\naddSbtPlugin(\"com.typesafe.play\" % \"sbt-plugin\" % \"2.3.7\")\n\n\n\u30b3\u30fc\u30c9\n\nconf/routes\n\nGET  /foo        controllers.Hoge.foo(device: controllers.Device)\n\n\ncontrollers/Hoge.scala\n\n\nimplicit\u5b9a\u7fa9\nsealed abstract class Device {\n  val name = this.toString.toLowerCase\n}\nobject Device {\n  case object Android extends Device\n  case object iOS extends Device\n\n  implicit def queryStringBinder = new QueryStringBindable[Device] {\n    override def bind(key: String, params: Map[String, Seq[String]]): Option[Either[String, Device]] = {\n      params(key).headOption map { deviceString =>\n        deviceString.toLowerCase match {\n          case Android.name => Right(Android)\n          case iOS.name => Right(iOS)\n          case _ => Left(\"Unable to bind a Device\")\n        }\n      }\n    }\n    override def unbind(key: String, device: Device): String = {\n      device.name\n    }\n  }\n}\n\n\n\naction\u306e\u3068\u3053\nobject Hoge extends Controller {\n  def foo(device: Device) = Action { request =>\n    println(device, device.getClass)\n    device match {\n      case Device.Android => println(\"\u3050\u30fc\u3050\u308b\")\n      case Device.iOS => println(\"\u6797\u6a8e\")\n    }\n    Ok(\"OK\")\n  }\n}\n\n\n\n\u6319\u52d5\n\n200 \u304a\uff4b\n\n\ncurl -s -v \"localhost:4080/foo?device=android\"\ncurl -s -v \"localhost:4080/foo?device=ios\"\n\n\n400 Bad Request\n\n\ncurl -s -v \"localhost:4080/foo?device=andrd\"\ncurl -s -v \"localhost:4080/foo?device=firefox\"\n\n\n500 Internal Server Error\n\n\ncurl -s -v \"localhost:4080/foo?devie=ios\"\n\n\n\n\n\u53c2\u8003\u306b\u3057\u305f\u3068\u3053\n\u4e3b\u306b\u3053\u306e\u3078\u3093\u3002\n\nhttp://danieldietrich.net/play-with-scala-url-path-binding/\nhttp://tototoshi.hatenablog.com/entry/20130216/1360985707\nhttp://xerial.org/scala-cookbook/recipes/2012/06/29/enumeration/\n\n# scala \u306e play \u3067 routes \u306bcase object \u4f7f\u3046\n\nenum\u3088\u308a`case class`\u306e\u65b9\u304c\u826f\u3055\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u3002\n\n## \u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u304b\n\n* scalaVersion := \"2.11.2\"\n* addSbtPlugin(\"com.typesafe.play\" % \"sbt-plugin\" % \"2.3.7\")\n\n## \u30b3\u30fc\u30c9\n\n* conf/routes\n\n```\nGET  /foo        controllers.Hoge.foo(device: controllers.Device)\n```\n\n* controllers/Hoge.scala\n\n```scala:implicit\u5b9a\u7fa9\nsealed abstract class Device {\n  val name = this.toString.toLowerCase\n}\nobject Device {\n  case object Android extends Device\n  case object iOS extends Device\n\n  implicit def queryStringBinder = new QueryStringBindable[Device] {\n    override def bind(key: String, params: Map[String, Seq[String]]): Option[Either[String, Device]] = {\n      params(key).headOption map { deviceString =>\n        deviceString.toLowerCase match {\n          case Android.name => Right(Android)\n          case iOS.name => Right(iOS)\n          case _ => Left(\"Unable to bind a Device\")\n        }\n      }\n    }\n    override def unbind(key: String, device: Device): String = {\n      device.name\n    }\n  }\n}\n```\n\n```scala:action\u306e\u3068\u3053\nobject Hoge extends Controller {\n  def foo(device: Device) = Action { request =>\n    println(device, device.getClass)\n    device match {\n      case Device.Android => println(\"\u3050\u30fc\u3050\u308b\")\n      case Device.iOS => println(\"\u6797\u6a8e\")\n    }\n    Ok(\"OK\")\n  }\n}\n```\n\n## \u6319\u52d5\n\n* 200 \u304a\uff4b\n    * curl -s -v \"localhost:4080/foo?device=android\"\n    * curl -s -v \"localhost:4080/foo?device=ios\"\n* 400 Bad Request\n    * curl -s -v \"localhost:4080/foo?device=andrd\"\n    * curl -s -v \"localhost:4080/foo?device=firefox\"\n* 500 Internal Server Error\n    * curl -s -v \"localhost:4080/foo?devie=ios\"\n\n## \u53c2\u8003\u306b\u3057\u305f\u3068\u3053\n\n\u4e3b\u306b\u3053\u306e\u3078\u3093\u3002\n\n* http://danieldietrich.net/play-with-scala-url-path-binding/\n* http://tototoshi.hatenablog.com/entry/20130216/1360985707\n* http://xerial.org/scala-cookbook/recipes/2012/06/29/enumeration/\n", "tags": ["Scala", "PlayFramework"]}