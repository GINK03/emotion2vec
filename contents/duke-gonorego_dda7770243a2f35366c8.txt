{"context": " More than 1 year has passed since last update.DynamoDBLocal\u3068AWS SDK for PHP2\u3067\u3054\u306b\u3087\u3054\u306b\u3087\u3059\u308b2 - create table\u3067\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u5165\u308c\u3066\u3001\u691c\u7d22\u3092\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u74b0\u5883\n\n\nVirtualBox 4.3\nubuntu 14.04\nPHP 5.5.9-1ubuntu4.5 (cli)\n\n\n\u30c7\u30fc\u30bf\u6295\u5165\n\n\nPutItem.class.php\n<?php\nrequire_once 'DynamoDB.class.php';\nclass PutItem {\n    private $dynamo;\n    public function __construct() {\n        $this->dynamo = DynamoDB::conn();\n    }\n\n    public function execute() {\n        for ($i = 1; $i <= 10; $i++) {\n            for ($j = 1; $j <= 10; $j++) {\n                $item = array(\n                    'user_id' => array('N' => $i),\n                    'customer_id' => array('N' => $j)\n                );\n\n                $map = array(\n                    'TableName' => 'user',\n                    'Item' => $item\n                );\n                $this->dynamo->putItem($map);\n            }\n        }\n    }\n}\n$putItem = new PutItem;\n$putItem->execute();\n\n\nphp PutItem.class.php \n\n\u6295\u5165\u3055\u308c\u305f\u3088\u3046\u3067\u3059\u3002\u3067\u306f\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\n\n\u30c7\u30fc\u30bf\u53d6\u5f97\n\n\nGetItem.class.php\n<?php\nrequire_once 'DynamoDB.class.php';\nclass GetItem {\n    private $dynamo;\n    public function __construct() {\n        $this->dynamo = DynamoDB::conn();\n    }\n\n    public function execute() {\n        $param = array(\n                'TableName' => 'user',\n                'KeyConditions' => array(\n                'user_id' => array(\n                    'AttributeValueList' => array(\n                        array('N' => 1)\n                    ),\n                    'ComparisonOperator' => 'EQ'\n                )\n            )\n        );\n\n        $iterator = $this->dynamo->getIterator('Query', $param);\n\n        $data = array();\n        $i = 0;\n        foreach ($iterator as $item) {\n            $data[$i]['user_id'] = $item['user_id']['N'];\n            $data[$i]['customer_id'] = $item['customer_id']['N'];\n            $i++;\n        }\n        var_dump($data);\n    }\n}\n$getItem = new GetItem;\n$getItem->execute(); \n\n\n$ php GetItem.class.php \narray(10) {\n  [0]=>\n  array(2) {\n    [\"user_id\"]=>\n    string(1) \"1\"\n    [\"customer_id\"]=>\n    string(1) \"1\"\n  }\n  [1]=>\n  array(2) {\n    [\"user_id\"]=>\n    string(1) \"1\"\n    [\"customer_id\"]=>\n    string(1) \"2\"\n  }\n  [2]=>\n  array(2) {\n    [\"user_id\"]=>\n    string(1) \"1\"\n    [\"customer_id\"]=>\n    string(1) \"3\"\n  }\n\u2026\n\n\u30c7\u30fc\u30bf\u306eput\u3068get\u304c\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\u203b\u5404\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f\nAWS SDK for PHP\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\n[DynamoDBLocal\u3068AWS SDK for PHP2\u3067\u3054\u306b\u3087\u3054\u306b\u3087\u3059\u308b2 - create table](http://qiita.com/duke-gonorego/items/a1c2eba2a3ce8192bde4)\u3067\u4f5c\u6210\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u5165\u308c\u3066\u3001\u691c\u7d22\u3092\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n#### \u74b0\u5883\n---\n * VirtualBox 4.3\n * ubuntu 14.04\n * PHP 5.5.9-1ubuntu4.5 (cli)\n\n#### \u30c7\u30fc\u30bf\u6295\u5165\n---\n\n```php:PutItem.class.php\n<?php\nrequire_once 'DynamoDB.class.php';\nclass PutItem {\n    private $dynamo;\n    public function __construct() {\n        $this->dynamo = DynamoDB::conn();\n    }\n\n    public function execute() {\n        for ($i = 1; $i <= 10; $i++) {\n            for ($j = 1; $j <= 10; $j++) {\n                $item = array(\n                    'user_id' => array('N' => $i),\n                    'customer_id' => array('N' => $j)\n                );\n\n                $map = array(\n                    'TableName' => 'user',\n                    'Item' => $item\n                );\n                $this->dynamo->putItem($map);\n            }\n        }\n    }\n}\n$putItem = new PutItem;\n$putItem->execute();\n```\n\n```\nphp PutItem.class.php \n```\n\n\u6295\u5165\u3055\u308c\u305f\u3088\u3046\u3067\u3059\u3002\u3067\u306f\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\n\n#### \u30c7\u30fc\u30bf\u53d6\u5f97\n---\n\n```php:GetItem.class.php\n<?php\nrequire_once 'DynamoDB.class.php';\nclass GetItem {\n    private $dynamo;\n    public function __construct() {\n        $this->dynamo = DynamoDB::conn();\n    }\n\n    public function execute() {\n        $param = array(\n                'TableName' => 'user',\n                'KeyConditions' => array(\n                'user_id' => array(\n                    'AttributeValueList' => array(\n                        array('N' => 1)\n                    ),\n                    'ComparisonOperator' => 'EQ'\n                )\n            )\n        );\n\n        $iterator = $this->dynamo->getIterator('Query', $param);\n\n        $data = array();\n        $i = 0;\n        foreach ($iterator as $item) {\n            $data[$i]['user_id'] = $item['user_id']['N'];\n            $data[$i]['customer_id'] = $item['customer_id']['N'];\n            $i++;\n        }\n        var_dump($data);\n    }\n}\n$getItem = new GetItem;\n$getItem->execute(); \n```\n\n```\n$ php GetItem.class.php \narray(10) {\n  [0]=>\n  array(2) {\n    [\"user_id\"]=>\n    string(1) \"1\"\n    [\"customer_id\"]=>\n    string(1) \"1\"\n  }\n  [1]=>\n  array(2) {\n    [\"user_id\"]=>\n    string(1) \"1\"\n    [\"customer_id\"]=>\n    string(1) \"2\"\n  }\n  [2]=>\n  array(2) {\n    [\"user_id\"]=>\n    string(1) \"1\"\n    [\"customer_id\"]=>\n    string(1) \"3\"\n  }\n\u2026\n```\n\n\u30c7\u30fc\u30bf\u306eput\u3068get\u304c\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n\u203b\u5404\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f\n[AWS SDK for PHP](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.DynamoDb.DynamoDbClient.html#_query)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\n", "tags": ["DynamoDB", "PHP"]}