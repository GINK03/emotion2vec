{"tags": ["vagrant", "CentOS", "Windows10"], "context": "\n\n\u306f\u3058\u3081\u306b\nVagrant \u3067 CentOS7 \u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3088\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u3001vagrant up\u306e\u3068\u304d\u306b\u3001\ndefault: Warning: Authentication failure. Retrying...\n\u304c\u8868\u793a\u3055\u308c\u305f\u3002\n\u307e\u305f\u3001\u56fa\u5b9aIP\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a\u304c\u6709\u52b9\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u3002\n\u3053\u306e\u5bfe\u51e6\u65b9\u6cd5\u3092\u542b\u3081\u3001\u74b0\u5883\u69cb\u7bc9\u65b9\u6cd5\u3092\u307e\u3068\u3081\u308b\u3002\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nvagrant up\u3067\u5931\u6557\u3059\u308b\u539f\u56e0\u304c\u9375\u4e0d\u4e00\u81f4\u306e\u5834\u5408\u306e\u5bfe\u51e6\u6cd5 - Qiita\nCentOS7.2 64bit \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a | kakiro-web \u30ab\u30ad\u30ed\u30fc\u30a6\u30a7\u30d6\n\u8ffd\u8a18\nVagrant \u3092\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3067\u3001\ndefault: Warning: Remote connection disconnect. Retrying...\n\u304c\u7d9a\u304f\u3053\u3068\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\nVagrant \u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3053\u3068\u3067\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u521d\u56de\u8d77\u52d5\u6642\u306b\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u3054\u3068\u306b\u79d8\u5bc6\u9375\u3068\u516c\u958b\u9375\u3092\u751f\u6210\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305f\u3081\u3067\u3059\u3002\n\u8a73\u3057\u304f\u306f\u30b3\u30e1\u30f3\u30c8\u6b04\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\u5b9f\u884c\u74b0\u5883\n\nWindows 10 Home\nCygwin 2.5.0\nVirtualBox 5.1.10\nVagrant 1.9.1\n\n\nVagrantfile \u306e\u8a2d\u5b9a\nMyCentOS \u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u3001Vagrantfile \u3092\u4f5c\u6210\u3059\u308b\u3002\n$ mkdir MyCentOS\n$ cd MyCentOS\n$ vagrant init bento/centos-7.3\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n\n$\n\nVagrant box bento/centos-7.3 | Atlas by HashiCorp\n\nVagrantfile \u306e\u7de8\u96c6\n\u56fa\u5b9a IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u3001Vagrantfile \u306e\n\nVagrantfile\n# config.vm.network \"private_network\", ip: \"192.168.33.10\"\n\n\n\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\nVagrantfile\n config.vm.network \"private_network\", ip: \"192.168.33.10\"\n\n\nVagrantfile \u5168\u4f53\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nVagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# All Vagrant configuration is done below. The \"2\" in Vagrant.configure\n# configures the configuration version (we support older styles for\n# backwards compatibility). Please don't change it unless you know what\n# you're doing.\nVagrant.configure(\"2\") do |config|\n  # The most common configuration options are documented and commented below.\n  # For a complete reference, please see the online documentation at\n  # https://docs.vagrantup.com.\n\n  # Every Vagrant development environment requires a box. You can search for\n  # boxes at https://atlas.hashicorp.com/search.\n  config.vm.box = \"bento/centos-7.3\"\n\n  # Disable automatic box update checking. If you disable this, then\n  # boxes will only be checked for updates when the user runs\n  # `vagrant box outdated`. This is not recommended.\n  # config.vm.box_check_update = false\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine. In the example below,\n  # accessing \"localhost:8080\" will access port 80 on the guest machine.\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n\n  # Create a public network, which generally matched to bridged network.\n  # Bridged networks make the machine appear as another physical device on\n  # your network.\n  # config.vm.network \"public_network\"\n\n  # Share an additional folder to the guest VM. The first argument is\n  # the path on the host to the actual folder. The second argument is\n  # the path on the guest to mount the folder. And the optional third\n  # argument is a set of non-required options.\n  # config.vm.synced_folder \"../data\", \"/vagrant_data\"\n\n  # Provider-specific configuration so you can fine-tune various\n  # backing providers for Vagrant. These expose provider-specific options.\n  # Example for VirtualBox:\n  #\n  # config.vm.provider \"virtualbox\" do |vb|\n  #   # Display the VirtualBox GUI when booting the machine\n  #   vb.gui = true\n  #\n  #   # Customize the amount of memory on the VM:\n  #   vb.memory = \"1024\"\n  # end\n  #\n  # View the documentation for the provider you are using for more\n  # information on available options.\n\n  # Define a Vagrant Push strategy for pushing to Atlas. Other push strategies\n  # such as FTP and Heroku are also available. See the documentation at\n  # https://docs.vagrantup.com/v2/push/atlas.html for more information.\n  # config.push.define \"atlas\" do |push|\n  #   push.app = \"YOUR_ATLAS_USERNAME/YOUR_APPLICATION_NAME\"\n  # end\n\n  # Enable provisioning with a shell script. Additional provisioners such as\n  # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the\n  # documentation for more information about their specific syntax and use.\n  # config.vm.provision \"shell\", inline: <<-SHELL\n  #   apt-get update\n  #   apt-get install -y apache2\n  # SHELL\nend\n\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u8d77\u52d5\n\n\u521d\u56de\n$ vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n==> default: Box 'bento/centos-7.3' could not be found. Attempting to find and install...\n    default: Box Provider: virtualbox\n    default: Box Version: >= 0\n==> default: Loading metadata for box 'bento/centos-7.3'\n    default: URL: https://atlas.hashicorp.com/bento/centos-7.3\n==> default: Adding box 'bento/centos-7.3' (v2.3.2) for provider: virtualbox\n    default: Downloading: https://atlas.hashicorp.com/bento/boxes/centos-7.3/versions/2.3.2/providers/virtualbox.box\n    default:\n==> default: Successfully added box 'bento/centos-7.3' (v2.3.2) for 'virtualbox'!\n==> default: Importing base box 'bento/centos-7.3'...\n==> default: Matching MAC address for NAT networking...\n==> default: Checking if box 'bento/centos-7.3' is up to date...\n==> default: Setting the name of the VM: MyCentOS_default_1482296484528_8004\n==> default: Clearing any previously set network interfaces...\n==> default: Preparing network interfaces based on configuration...\n    default: Adapter 1: nat\n    default: Adapter 2: hostonly\n==> default: Forwarding ports...\n    default: 22 (guest) => 2222 (host) (adapter 1)\n==> default: Booting VM...\n==> default: Waiting for machine to boot. This may take a few minutes...\n    default: SSH address: 127.0.0.1:2222\n    default: SSH username: vagrant\n    default: SSH auth method: private key\n    default: Warning: Remote connection disconnect. Retrying...\n    default: Warning: Remote connection disconnect. Retrying...\n    default: Warning: Remote connection disconnect. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\nTimed out while waiting for the machine to boot. This means that\nVagrant was unable to communicate with the guest machine within\nthe configured (\"config.vm.boot_timeout\" value) time period.\n\nIf you look above, you should be able to see the error(s) that\nVagrant had when attempting to connect to the machine. These errors\nare usually good hints as to what may be wrong.\n\nIf you're using a custom box, make sure that networking is properly\nworking and you're able to connect to the machine. It is a common\nproblem that networking isn't setup properly in these boxes.\nVerify that authentication configurations are also setup properly,\nas well.\n\nIf the box appears to be booting properly, you may want to increase\nthe timeout (\"config.vm.boot_timeout\") value.\n\n$\n\n\u3053\u306e\u72b6\u614b\u3067\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u8d77\u52d5\u3057\u3066\u3044\u308b\u3002\n$ vagrant status\nCurrent machine states:\n\ndefault                   running (virtualbox)\n\nThe VM is running. To stop this VM, you can run `vagrant halt` to\nshut it down forcefully, or you can run `vagrant suspend` to simply\nsuspend the virtual machine. In either case, to restart it again,\nsimply run `vagrant up`.\n\n\u8ffd\u8a18\n\u521d\u56de\u8d77\u52d5\u6642\u306bdefault: Warning: Authentication failure. Retrying...\u304c\u7d9a\u3044\u3066\u3044\u306a\u3051\u308c\u3070\u3001\u300cAuthentication failure. \u306e\u5bfe\u51e6\u300d\u306e\u9805\u306f\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nAuthentication failure. \u306e\u5bfe\u51e6\n\n\u79d8\u5bc6\u9375\u306e\u5834\u6240\u306e\u78ba\u8a8d\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u79d8\u5bc6\u9375\u306e\u5834\u6240\u3092\u78ba\u8a8d\u3059\u308b\u3002\n$ vagrant ssh-config\nHost default\n  HostName 127.0.0.1\n  User vagrant\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile C:/Users/XXXXX/.vagrant.d/insecure_private_key\n  IdentitiesOnly yes\n  LogLevel FATAL\n\n\u4e0a\u8a18\u306e  IdentityFile \u304c\u79d8\u5bc6\u9375\u3067\u3042\u308b\u3002\n\n\u9375\u306e\u751f\u6210\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u79d8\u5bc6\u9375\u306b\u5bfe\u5fdc\u3059\u308b\u516c\u958b\u9375\u3092\u751f\u6210\u3059\u308b\u3002\n$ ssh-keygen -yf C:/Users/XXXXX/.vagrant.d/insecure_private_key > public_key\n\n\n\u3053\u308c\u3067\u3001public_key \u3068\u3044\u3046\u516c\u958b\u9375\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u516c\u958b\u9375\u306e\u66f8\u304d\u63db\u3048\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u63a5\u7d9a\u3059\u308b\u3002\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001\"vagrant\"\n$ vagrant ssh\nvagrant@127.0.0.1's password:\n[vagrant@localhost ~]$\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u516c\u958b\u9375\u306f\u3001~/.ssh/authorized_keys\u306a\u306e\u3067\u3001\u5148\u307b\u3069\u306epublic_key\u306e\u5185\u5bb9\u3092\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u4e0a\u66f8\u304d\u3059\u308b\u3002\n[vagrant@localhost ~]$ vi ~/.ssh/authorized_keys\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u3002\n[vagrant@localhost ~]$ exit\nlogout\nConnection to 127.0.0.1 closed.\n\n$\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u518d\u8d77\u52d5\n$ vagrant reload\n==> default: Attempting graceful shutdown of VM...\n==> default: Checking if box 'bento/centos-7.3' is up to date...\n==> default: Clearing any previously set forwarded ports...\n==> default: Clearing any previously set network interfaces...\n==> default: Preparing network interfaces based on configuration...\n    default: Adapter 1: nat\n    default: Adapter 2: hostonly\n==> default: Forwarding ports...\n    default: 22 (guest) => 2222 (host) (adapter 1)\n==> default: Booting VM...\n==> default: Waiting for machine to boot. This may take a few minutes...\n    default: SSH address: 127.0.0.1:2222\n    default: SSH username: vagrant\n    default: SSH auth method: private key\n    default: Warning: Remote connection disconnect. Retrying...\n==> default: Machine booted and ready!\n[default] GuestAdditions 5.1.10 running --- OK.\n==> default: Checking for guest additions in VM...\n==> default: Configuring and enabling network interfaces...\n==> default: Mounting shared folders...\n    default: /vagrant => D:/vagrant/MyCentOS\n\n$\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u63a5\u7d9a\n$ vagrant ssh\nLast login: Wed Dec 21 05:14:42 2016 from 10.0.2.2\n[vagrant@localhost ~]$\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u306a\u304f\u3066\u3082\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u56fa\u5b9a IP \u30a2\u30c9\u30ec\u30b9\u306e\u6709\u52b9\u5316\n\u3053\u306e\u6642\u70b9\u3067\u306f\u3001Vagrantfile \u3067\u8a2d\u5b9a\u3057\u305f192.168.33.10\u306f\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3002\n\uff08\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067ip addr\u3084ifconfig\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3067\u304d\u308b\uff09\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u505c\u6b62\n$ vagrant halt\n==> default: Attempting graceful shutdown of VM...\n\n$\n\n\nVagrantfile \u306e\u7de8\u96c6\nVagrantfile \u3067\u3001\n\nVagrantfile\n  # config.vm.provision \"shell\", inline: <<-SHELL\n  #   apt-get update\n  #   apt-get install -y apache2\n  # SHELL\n\n\n\u3092\n\nVagrantfile\n  config.vm.provision \"shell\", inline: <<-SHELL\n    sudo systemctl restart network.service \n  SHELL\n\n\n\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\nVagrantfile \u5168\u4f53\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nVagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# All Vagrant configuration is done below. The \"2\" in Vagrant.configure\n# configures the configuration version (we support older styles for\n# backwards compatibility). Please don't change it unless you know what\n# you're doing.\nVagrant.configure(\"2\") do |config|\n  # The most common configuration options are documented and commented below.\n  # For a complete reference, please see the online documentation at\n  # https://docs.vagrantup.com.\n\n  # Every Vagrant development environment requires a box. You can search for\n  # boxes at https://atlas.hashicorp.com/search.\n  config.vm.box = \"bento/centos-7.3\"\n\n  # Disable automatic box update checking. If you disable this, then\n  # boxes will only be checked for updates when the user runs\n  # `vagrant box outdated`. This is not recommended.\n  # config.vm.box_check_update = false\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine. In the example below,\n  # accessing \"localhost:8080\" will access port 80 on the guest machine.\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n\n  # Create a public network, which generally matched to bridged network.\n  # Bridged networks make the machine appear as another physical device on\n  # your network.\n  # config.vm.network \"public_network\"\n\n  # Share an additional folder to the guest VM. The first argument is\n  # the path on the host to the actual folder. The second argument is\n  # the path on the guest to mount the folder. And the optional third\n  # argument is a set of non-required options.\n  # config.vm.synced_folder \"../data\", \"/vagrant_data\"\n\n  # Provider-specific configuration so you can fine-tune various\n  # backing providers for Vagrant. These expose provider-specific options.\n  # Example for VirtualBox:\n  #\n  # config.vm.provider \"virtualbox\" do |vb|\n  #   # Display the VirtualBox GUI when booting the machine\n  #   vb.gui = true\n  #\n  #   # Customize the amount of memory on the VM:\n  #   vb.memory = \"1024\"\n  # end\n  #\n  # View the documentation for the provider you are using for more\n  # information on available options.\n\n  # Define a Vagrant Push strategy for pushing to Atlas. Other push strategies\n  # such as FTP and Heroku are also available. See the documentation at\n  # https://docs.vagrantup.com/v2/push/atlas.html for more information.\n  # config.push.define \"atlas\" do |push|\n  #   push.app = \"YOUR_ATLAS_USERNAME/YOUR_APPLICATION_NAME\"\n  # end\n\n  # Enable provisioning with a shell script. Additional provisioners such as\n  # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the\n  # documentation for more information about their specific syntax and use.\n  config.vm.provision \"shell\", inline: <<-SHELL\n    sudo systemctl restart network.service\n  SHELL\nend\n\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u8d77\u52d5\n\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u3059\u308b\u3002\n\u3053\u306e\u3068\u304d\u3001--provision\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3002\n$ vagrant up --provision\nBringing machine 'default' up with 'virtualbox' provider...\n==> default: Checking if box 'bento/centos-7.3' is up to date...\n==> default: Clearing any previously set forwarded ports...\n==> default: Clearing any previously set network interfaces...\n==> default: Preparing network interfaces based on configuration...\n    default: Adapter 1: nat\n    default: Adapter 2: hostonly\n==> default: Forwarding ports...\n    default: 22 (guest) => 2222 (host) (adapter 1)\n==> default: Booting VM...\n==> default: Waiting for machine to boot. This may take a few minutes...\n    default: SSH address: 127.0.0.1:2222\n    default: SSH username: vagrant\n    default: SSH auth method: private key\n    default: Warning: Remote connection disconnect. Retrying...\n==> default: Machine booted and ready!\n[default] GuestAdditions 5.1.10 running --- OK.\n==> default: Checking for guest additions in VM...\n==> default: Configuring and enabling network interfaces...\n==> default: Mounting shared folders...\n    default: /vagrant => D:/vagrant/MyCentOS\n==> default: Running provisioner: shell...\n    default: Running: inline script\n\n$\n\n\u3053\u308c\u3067\u3001\u56fa\u5b9a IP \u30a2\u30c9\u30ec\u30b9\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u4eca\u5f8c\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u306f\u3001--provision\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3002\n# \u306f\u3058\u3081\u306b\n\nVagrant \u3067 CentOS7 \u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3088\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u3001`vagrant up`\u306e\u3068\u304d\u306b\u3001\n`default: Warning: Authentication failure. Retrying...`\n\u304c\u8868\u793a\u3055\u308c\u305f\u3002\n\u307e\u305f\u3001\u56fa\u5b9aIP\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a\u304c\u6709\u52b9\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u3002\n\u3053\u306e\u5bfe\u51e6\u65b9\u6cd5\u3092\u542b\u3081\u3001\u74b0\u5883\u69cb\u7bc9\u65b9\u6cd5\u3092\u307e\u3068\u3081\u308b\u3002\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n[vagrant up\u3067\u5931\u6557\u3059\u308b\u539f\u56e0\u304c\u9375\u4e0d\u4e00\u81f4\u306e\u5834\u5408\u306e\u5bfe\u51e6\u6cd5 - Qiita](http://qiita.com/d2cdot-mmori/items/1c340f175ae510e4456a)\n[CentOS7.2 64bit \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a | kakiro-web \u30ab\u30ad\u30ed\u30fc\u30a6\u30a7\u30d6](http://www.kakiro-web.com/memo/centos-network-setting.html)\n\n\u8ffd\u8a18\nVagrant \u3092\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3067\u3001\n`default: Warning: Remote connection disconnect. Retrying...`\n\u304c\u7d9a\u304f\u3053\u3068\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\nVagrant \u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3053\u3068\u3067\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u521d\u56de\u8d77\u52d5\u6642\u306b\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u3054\u3068\u306b\u79d8\u5bc6\u9375\u3068\u516c\u958b\u9375\u3092\u751f\u6210\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305f\u3081\u3067\u3059\u3002\n\u8a73\u3057\u304f\u306f\u30b3\u30e1\u30f3\u30c8\u6b04\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\n\n# \u5b9f\u884c\u74b0\u5883\n\n* Windows 10 Home\n* Cygwin 2.5.0\n* VirtualBox 5.1.10\n* Vagrant 1.9.1\n\n# Vagrantfile \u306e\u8a2d\u5b9a\n\nMyCentOS \u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u3001Vagrantfile \u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```shell-session\n$ mkdir MyCentOS\n$ cd MyCentOS\n$ vagrant init bento/centos-7.3\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n\n$\n```\n\n[Vagrant box bento/centos-7.3 | Atlas by HashiCorp](https://atlas.hashicorp.com/bento/boxes/centos-7.3)\n\n# Vagrantfile \u306e\u7de8\u96c6\n\n\u56fa\u5b9a IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u3001Vagrantfile \u306e\n\n```text:Vagrantfile\n# config.vm.network \"private_network\", ip: \"192.168.33.10\"\n```\n\n\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\n```text:Vagrantfile\n config.vm.network \"private_network\", ip: \"192.168.33.10\"\n```\n\nVagrantfile \u5168\u4f53\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n```ruby:Vagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# All Vagrant configuration is done below. The \"2\" in Vagrant.configure\n# configures the configuration version (we support older styles for\n# backwards compatibility). Please don't change it unless you know what\n# you're doing.\nVagrant.configure(\"2\") do |config|\n  # The most common configuration options are documented and commented below.\n  # For a complete reference, please see the online documentation at\n  # https://docs.vagrantup.com.\n\n  # Every Vagrant development environment requires a box. You can search for\n  # boxes at https://atlas.hashicorp.com/search.\n  config.vm.box = \"bento/centos-7.3\"\n\n  # Disable automatic box update checking. If you disable this, then\n  # boxes will only be checked for updates when the user runs\n  # `vagrant box outdated`. This is not recommended.\n  # config.vm.box_check_update = false\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine. In the example below,\n  # accessing \"localhost:8080\" will access port 80 on the guest machine.\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n\n  # Create a public network, which generally matched to bridged network.\n  # Bridged networks make the machine appear as another physical device on\n  # your network.\n  # config.vm.network \"public_network\"\n\n  # Share an additional folder to the guest VM. The first argument is\n  # the path on the host to the actual folder. The second argument is\n  # the path on the guest to mount the folder. And the optional third\n  # argument is a set of non-required options.\n  # config.vm.synced_folder \"../data\", \"/vagrant_data\"\n\n  # Provider-specific configuration so you can fine-tune various\n  # backing providers for Vagrant. These expose provider-specific options.\n  # Example for VirtualBox:\n  #\n  # config.vm.provider \"virtualbox\" do |vb|\n  #   # Display the VirtualBox GUI when booting the machine\n  #   vb.gui = true\n  #\n  #   # Customize the amount of memory on the VM:\n  #   vb.memory = \"1024\"\n  # end\n  #\n  # View the documentation for the provider you are using for more\n  # information on available options.\n\n  # Define a Vagrant Push strategy for pushing to Atlas. Other push strategies\n  # such as FTP and Heroku are also available. See the documentation at\n  # https://docs.vagrantup.com/v2/push/atlas.html for more information.\n  # config.push.define \"atlas\" do |push|\n  #   push.app = \"YOUR_ATLAS_USERNAME/YOUR_APPLICATION_NAME\"\n  # end\n\n  # Enable provisioning with a shell script. Additional provisioners such as\n  # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the\n  # documentation for more information about their specific syntax and use.\n  # config.vm.provision \"shell\", inline: <<-SHELL\n  #   apt-get update\n  #   apt-get install -y apache2\n  # SHELL\nend\n```\n\n# \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u8d77\u52d5\n\n## \u521d\u56de\n\n```shell-session\n$ vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n==> default: Box 'bento/centos-7.3' could not be found. Attempting to find and install...\n    default: Box Provider: virtualbox\n    default: Box Version: >= 0\n==> default: Loading metadata for box 'bento/centos-7.3'\n    default: URL: https://atlas.hashicorp.com/bento/centos-7.3\n==> default: Adding box 'bento/centos-7.3' (v2.3.2) for provider: virtualbox\n    default: Downloading: https://atlas.hashicorp.com/bento/boxes/centos-7.3/versions/2.3.2/providers/virtualbox.box\n    default:\n==> default: Successfully added box 'bento/centos-7.3' (v2.3.2) for 'virtualbox'!\n==> default: Importing base box 'bento/centos-7.3'...\n==> default: Matching MAC address for NAT networking...\n==> default: Checking if box 'bento/centos-7.3' is up to date...\n==> default: Setting the name of the VM: MyCentOS_default_1482296484528_8004\n==> default: Clearing any previously set network interfaces...\n==> default: Preparing network interfaces based on configuration...\n    default: Adapter 1: nat\n    default: Adapter 2: hostonly\n==> default: Forwarding ports...\n    default: 22 (guest) => 2222 (host) (adapter 1)\n==> default: Booting VM...\n==> default: Waiting for machine to boot. This may take a few minutes...\n    default: SSH address: 127.0.0.1:2222\n    default: SSH username: vagrant\n    default: SSH auth method: private key\n    default: Warning: Remote connection disconnect. Retrying...\n    default: Warning: Remote connection disconnect. Retrying...\n    default: Warning: Remote connection disconnect. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\n    default: Warning: Authentication failure. Retrying...\nTimed out while waiting for the machine to boot. This means that\nVagrant was unable to communicate with the guest machine within\nthe configured (\"config.vm.boot_timeout\" value) time period.\n\nIf you look above, you should be able to see the error(s) that\nVagrant had when attempting to connect to the machine. These errors\nare usually good hints as to what may be wrong.\n\nIf you're using a custom box, make sure that networking is properly\nworking and you're able to connect to the machine. It is a common\nproblem that networking isn't setup properly in these boxes.\nVerify that authentication configurations are also setup properly,\nas well.\n\nIf the box appears to be booting properly, you may want to increase\nthe timeout (\"config.vm.boot_timeout\") value.\n\n$\n```\n\n\u3053\u306e\u72b6\u614b\u3067\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u8d77\u52d5\u3057\u3066\u3044\u308b\u3002\n\n```shell-session\n$ vagrant status\nCurrent machine states:\n\ndefault                   running (virtualbox)\n\nThe VM is running. To stop this VM, you can run `vagrant halt` to\nshut it down forcefully, or you can run `vagrant suspend` to simply\nsuspend the virtual machine. In either case, to restart it again,\nsimply run `vagrant up`.\n```\n\n\u8ffd\u8a18\n\u521d\u56de\u8d77\u52d5\u6642\u306b`default: Warning: Authentication failure. Retrying...`\u304c\u7d9a\u3044\u3066\u3044\u306a\u3051\u308c\u3070\u3001\u300cAuthentication failure. \u306e\u5bfe\u51e6\u300d\u306e\u9805\u306f\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# Authentication failure. \u306e\u5bfe\u51e6\n\n## \u79d8\u5bc6\u9375\u306e\u5834\u6240\u306e\u78ba\u8a8d\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u79d8\u5bc6\u9375\u306e\u5834\u6240\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```shell-session\n$ vagrant ssh-config\nHost default\n  HostName 127.0.0.1\n  User vagrant\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile C:/Users/XXXXX/.vagrant.d/insecure_private_key\n  IdentitiesOnly yes\n  LogLevel FATAL\n```\n\n\u4e0a\u8a18\u306e  IdentityFile \u304c\u79d8\u5bc6\u9375\u3067\u3042\u308b\u3002\n\n## \u9375\u306e\u751f\u6210\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u79d8\u5bc6\u9375\u306b\u5bfe\u5fdc\u3059\u308b\u516c\u958b\u9375\u3092\u751f\u6210\u3059\u308b\u3002\n\n```shell-session\n$ ssh-keygen -yf C:/Users/XXXXX/.vagrant.d/insecure_private_key > public_key\n\n```\n\n\u3053\u308c\u3067\u3001public_key \u3068\u3044\u3046\u516c\u958b\u9375\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n## \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u516c\u958b\u9375\u306e\u66f8\u304d\u63db\u3048\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u63a5\u7d9a\u3059\u308b\u3002\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001\"vagrant\"\n\n```shell-session\n$ vagrant ssh\nvagrant@127.0.0.1's password:\n[vagrant@localhost ~]$\n```\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u516c\u958b\u9375\u306f\u3001`~/.ssh/authorized_keys`\u306a\u306e\u3067\u3001\u5148\u307b\u3069\u306e`public_key`\u306e\u5185\u5bb9\u3092\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u4e0a\u66f8\u304d\u3059\u308b\u3002\n\n```shell-session\n[vagrant@localhost ~]$ vi ~/.ssh/authorized_keys\n```\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u3002\n\n```shell-session\n[vagrant@localhost ~]$ exit\nlogout\nConnection to 127.0.0.1 closed.\n\n$\n```\n\n# \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u518d\u8d77\u52d5\n\n```shell-session\n$ vagrant reload\n==> default: Attempting graceful shutdown of VM...\n==> default: Checking if box 'bento/centos-7.3' is up to date...\n==> default: Clearing any previously set forwarded ports...\n==> default: Clearing any previously set network interfaces...\n==> default: Preparing network interfaces based on configuration...\n    default: Adapter 1: nat\n    default: Adapter 2: hostonly\n==> default: Forwarding ports...\n    default: 22 (guest) => 2222 (host) (adapter 1)\n==> default: Booting VM...\n==> default: Waiting for machine to boot. This may take a few minutes...\n    default: SSH address: 127.0.0.1:2222\n    default: SSH username: vagrant\n    default: SSH auth method: private key\n    default: Warning: Remote connection disconnect. Retrying...\n==> default: Machine booted and ready!\n[default] GuestAdditions 5.1.10 running --- OK.\n==> default: Checking for guest additions in VM...\n==> default: Configuring and enabling network interfaces...\n==> default: Mounting shared folders...\n    default: /vagrant => D:/vagrant/MyCentOS\n\n$\n```\n\n## \u4eee\u60f3\u30de\u30b7\u30f3\u306b\u63a5\u7d9a\n\n```shell-session\n$ vagrant ssh\nLast login: Wed Dec 21 05:14:42 2016 from 10.0.2.2\n[vagrant@localhost ~]$\n\n```\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u306a\u304f\u3066\u3082\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n# \u56fa\u5b9a IP \u30a2\u30c9\u30ec\u30b9\u306e\u6709\u52b9\u5316\n\n\u3053\u306e\u6642\u70b9\u3067\u306f\u3001Vagrantfile \u3067\u8a2d\u5b9a\u3057\u305f`192.168.33.10`\u306f\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3002\n\uff08\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067`ip addr`\u3084`ifconfig`\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3067\u304d\u308b\uff09\n\n## \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u505c\u6b62\n\n```shell-session\n$ vagrant halt\n==> default: Attempting graceful shutdown of VM...\n\n$\n```\n\n## Vagrantfile \u306e\u7de8\u96c6\n\nVagrantfile \u3067\u3001\n\n```text:Vagrantfile\n  # config.vm.provision \"shell\", inline: <<-SHELL\n  #   apt-get update\n  #   apt-get install -y apache2\n  # SHELL\n```\n\n\u3092\n\n```text:Vagrantfile\n  config.vm.provision \"shell\", inline: <<-SHELL\n    sudo systemctl restart network.service \n  SHELL\n```\n\n\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\nVagrantfile \u5168\u4f53\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n```ruby:Vagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# All Vagrant configuration is done below. The \"2\" in Vagrant.configure\n# configures the configuration version (we support older styles for\n# backwards compatibility). Please don't change it unless you know what\n# you're doing.\nVagrant.configure(\"2\") do |config|\n  # The most common configuration options are documented and commented below.\n  # For a complete reference, please see the online documentation at\n  # https://docs.vagrantup.com.\n\n  # Every Vagrant development environment requires a box. You can search for\n  # boxes at https://atlas.hashicorp.com/search.\n  config.vm.box = \"bento/centos-7.3\"\n\n  # Disable automatic box update checking. If you disable this, then\n  # boxes will only be checked for updates when the user runs\n  # `vagrant box outdated`. This is not recommended.\n  # config.vm.box_check_update = false\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine. In the example below,\n  # accessing \"localhost:8080\" will access port 80 on the guest machine.\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n\n  # Create a public network, which generally matched to bridged network.\n  # Bridged networks make the machine appear as another physical device on\n  # your network.\n  # config.vm.network \"public_network\"\n\n  # Share an additional folder to the guest VM. The first argument is\n  # the path on the host to the actual folder. The second argument is\n  # the path on the guest to mount the folder. And the optional third\n  # argument is a set of non-required options.\n  # config.vm.synced_folder \"../data\", \"/vagrant_data\"\n\n  # Provider-specific configuration so you can fine-tune various\n  # backing providers for Vagrant. These expose provider-specific options.\n  # Example for VirtualBox:\n  #\n  # config.vm.provider \"virtualbox\" do |vb|\n  #   # Display the VirtualBox GUI when booting the machine\n  #   vb.gui = true\n  #\n  #   # Customize the amount of memory on the VM:\n  #   vb.memory = \"1024\"\n  # end\n  #\n  # View the documentation for the provider you are using for more\n  # information on available options.\n\n  # Define a Vagrant Push strategy for pushing to Atlas. Other push strategies\n  # such as FTP and Heroku are also available. See the documentation at\n  # https://docs.vagrantup.com/v2/push/atlas.html for more information.\n  # config.push.define \"atlas\" do |push|\n  #   push.app = \"YOUR_ATLAS_USERNAME/YOUR_APPLICATION_NAME\"\n  # end\n\n  # Enable provisioning with a shell script. Additional provisioners such as\n  # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the\n  # documentation for more information about their specific syntax and use.\n  config.vm.provision \"shell\", inline: <<-SHELL\n    sudo systemctl restart network.service\n  SHELL\nend\n```\n\n# \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u8d77\u52d5\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u3059\u308b\u3002\n\u3053\u306e\u3068\u304d\u3001`--provision`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3002\n\n```shell-session\n$ vagrant up --provision\nBringing machine 'default' up with 'virtualbox' provider...\n==> default: Checking if box 'bento/centos-7.3' is up to date...\n==> default: Clearing any previously set forwarded ports...\n==> default: Clearing any previously set network interfaces...\n==> default: Preparing network interfaces based on configuration...\n    default: Adapter 1: nat\n    default: Adapter 2: hostonly\n==> default: Forwarding ports...\n    default: 22 (guest) => 2222 (host) (adapter 1)\n==> default: Booting VM...\n==> default: Waiting for machine to boot. This may take a few minutes...\n    default: SSH address: 127.0.0.1:2222\n    default: SSH username: vagrant\n    default: SSH auth method: private key\n    default: Warning: Remote connection disconnect. Retrying...\n==> default: Machine booted and ready!\n[default] GuestAdditions 5.1.10 running --- OK.\n==> default: Checking for guest additions in VM...\n==> default: Configuring and enabling network interfaces...\n==> default: Mounting shared folders...\n    default: /vagrant => D:/vagrant/MyCentOS\n==> default: Running provisioner: shell...\n    default: Running: inline script\n\n$\n```\n\n\u3053\u308c\u3067\u3001\u56fa\u5b9a IP \u30a2\u30c9\u30ec\u30b9\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u4eca\u5f8c\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u306f\u3001`--provision`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3002\n"}