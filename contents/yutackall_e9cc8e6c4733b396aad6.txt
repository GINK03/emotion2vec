{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nchef \u3067 rbenv \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u304c\u3001\u65b0\u305f\u306b\u6700\u65b0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e 2.2.2 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3068\u3053\u308d\u3001\n\u305d\u3093\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u306a\u3044\u3088\u3068\u6012\u3089\u308c\u305f\u3068\u304d\u306e\u30e1\u30e2\u3002\n\n\u4f7f\u7528\u3057\u3066\u3044\u308b cookbook\n\nrbenv\nchef-ruby_build\n\n\n\u30a8\u30e9\u30fc\u30ed\u30b0\nMixlib::ShellOut::ShellCommandFailed\n------------------------------------\nExpected process to exit with [0], but received '2'\n---- Begin output of \"bash\"  \"/tmp/chef-script20150812-3205-zoqi5y\" ----\nSTDOUT:\nSTDERR: ruby-build: definition not found: 2.2.2\n\n\n\u539f\u56e0\nrbenv \u306f\u7d50\u69cb\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u3067\u3001ruby-build \u3067\u5bfe\u5fdc\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\n2.2.2 \u304c\u8868\u793a\u3055\u308c\u306a\u304b\u3063\u305f\u306e\u3067\u3001ruby-build \u304c\u53e4\u304b\u3063\u305f\u305f\u3081\u3068\u5224\u660e\u3002\n$ ruby-build --definitions\n1.8.6-p383\n1.8.6-p420\n1.8.7-p249\n1.8.7-p302\n1.8.7-p334\n1.8.7-p352\n1.8.7-p357\n1.8.7-p358\n1.8.7-p370\n1.8.7-p371\n1.8.7-p374\n1.8.7-p375\n1.9.1-p378\n1.9.1-p430\n1.9.2-p0\n1.9.2-p180\n1.9.2-p290\n1.9.2-p318\n1.9.2-p320\n1.9.2-p326\n1.9.3-dev\n1.9.3-p0\n1.9.3-p125\n1.9.3-p194\n1.9.3-p286\n1.9.3-p327\n1.9.3-p362\n1.9.3-p374\n1.9.3-p385\n1.9.3-p392\n1.9.3-p429\n1.9.3-p448\n1.9.3-p484\n1.9.3-p545\n1.9.3-p547\n1.9.3-preview1\n1.9.3-rc1\n2.0.0-dev\n2.0.0-p0\n2.0.0-p195\n2.0.0-p247\n2.0.0-p353\n2.0.0-p451\n2.0.0-p481\n2.0.0-preview1\n2.0.0-preview2\n2.0.0-rc1\n2.0.0-rc2\n2.1.0\n2.1.0-dev\n2.1.0-preview1\n2.1.0-preview2\n2.1.0-rc1\n2.1.1\n2.1.2\n2.2.0-dev         <----2.2.2 \u304c\u306a\u3044\njruby-1.5.6\njruby-1.6.3\njruby-1.6.4\njruby-1.6.5\njruby-1.6.5.1\njruby-1.6.6\njruby-1.6.7\njruby-1.6.7.2\njruby-1.6.8\njruby-1.7.0\njruby-1.7.0-preview1\njruby-1.7.0-preview2\njruby-1.7.0-rc1\njruby-1.7.0-rc2\njruby-1.7.1\njruby-1.7.10\njruby-1.7.11\njruby-1.7.12\njruby-1.7.13\njruby-1.7.2\njruby-1.7.3\njruby-1.7.4\njruby-1.7.5\njruby-1.7.6\njruby-1.7.7\njruby-1.7.8\njruby-1.7.9\njruby-9000+graal-dev\njruby-9000-dev\nmaglev-1.0.0\nmaglev-1.1.0-dev\nmaglev-2.0.0-dev\nmruby-1.0.0\nmruby-dev\nrbx-1.2.4\nrbx-2.0.0\nrbx-2.0.0-dev\nrbx-2.0.0-rc1\nrbx-2.1.0\nrbx-2.1.1\nrbx-2.2.0\nrbx-2.2.1\nrbx-2.2.10\nrbx-2.2.2\nrbx-2.2.3\nrbx-2.2.4\nrbx-2.2.5\nrbx-2.2.6\nrbx-2.2.7\nrbx-2.2.9\nree-1.8.6-2009.06\nree-1.8.7-2009.09\nree-1.8.7-2009.10\nree-1.8.7-2010.01\nree-1.8.7-2010.02\nree-1.8.7-2011.03\nree-1.8.7-2011.12\nree-1.8.7-2012.01\nree-1.8.7-2012.02\ntopaz-dev\n\n\n\u5bfe\u51e6\u65b9\u6cd5\nchef \u3067 ruby-build \u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3002\n\u518d\u5ea6\u3001\u6d41\u3057\u3066\u3082\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u306a\u304b\u3063\u305f\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u3001\u6700\u521d\u306b\u5165\u308c\u305f\u72b6\u614b\u3092\u4fdd\u6301\u3059\u308b\u307f\u305f\u3044\u3002\nhttps://github.com/fnichol/chef-ruby_build#-upgrade\nnode \u30d5\u30a1\u30a4\u30eb\u3067 upgrade\u3092 sync or true \u306b\u3059\u308b\u3068\u5b9f\u884c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u308c\u308b\u307f\u305f\u3044\u3002\n\nnodes/host.json\n{\n  \"ruby_build\": {\n    \"upgrade\": \"sync\"\n  },\n  \"rbenv\": {\n    \"user_installs\": [\n      {\n        \"user\": \"hogehoge\",\n        \"rubies\": [\"2.2.2\"],\n        \"global\": \"2.2.2\",\n        \"gems\": {\n          \"2.2.2\": [\n            { \"name\": \"bundler\" }\n          ]\n        }\n      }\n    ]\n  },\n  \"run_list\": [\n    \"ruby_build\",\n    \"rbenv::user\"\n  ]\n}\n\n\n# \u306f\u3058\u3081\u306b\nchef \u3067 rbenv \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u304c\u3001\u65b0\u305f\u306b\u6700\u65b0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e 2.2.2 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3068\u3053\u308d\u3001\n\u305d\u3093\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u306a\u3044\u3088\u3068\u6012\u3089\u308c\u305f\u3068\u304d\u306e\u30e1\u30e2\u3002\n## \u4f7f\u7528\u3057\u3066\u3044\u308b cookbook\n- [rbenv](https://github.com/fnichol/chef-rbenv)\n- [chef-ruby_build](https://github.com/fnichol/chef-ruby_build)\n\n## \u30a8\u30e9\u30fc\u30ed\u30b0\n```\nMixlib::ShellOut::ShellCommandFailed\n------------------------------------\nExpected process to exit with [0], but received '2'\n---- Begin output of \"bash\"  \"/tmp/chef-script20150812-3205-zoqi5y\" ----\nSTDOUT:\nSTDERR: ruby-build: definition not found: 2.2.2\n```\n\n# \u539f\u56e0\n\nrbenv \u306f\u7d50\u69cb\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u3067\u3001ruby-build \u3067\u5bfe\u5fdc\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\n2.2.2 \u304c\u8868\u793a\u3055\u308c\u306a\u304b\u3063\u305f\u306e\u3067\u3001ruby-build \u304c\u53e4\u304b\u3063\u305f\u305f\u3081\u3068\u5224\u660e\u3002\n\n```bash:\n$ ruby-build --definitions\n1.8.6-p383\n1.8.6-p420\n1.8.7-p249\n1.8.7-p302\n1.8.7-p334\n1.8.7-p352\n1.8.7-p357\n1.8.7-p358\n1.8.7-p370\n1.8.7-p371\n1.8.7-p374\n1.8.7-p375\n1.9.1-p378\n1.9.1-p430\n1.9.2-p0\n1.9.2-p180\n1.9.2-p290\n1.9.2-p318\n1.9.2-p320\n1.9.2-p326\n1.9.3-dev\n1.9.3-p0\n1.9.3-p125\n1.9.3-p194\n1.9.3-p286\n1.9.3-p327\n1.9.3-p362\n1.9.3-p374\n1.9.3-p385\n1.9.3-p392\n1.9.3-p429\n1.9.3-p448\n1.9.3-p484\n1.9.3-p545\n1.9.3-p547\n1.9.3-preview1\n1.9.3-rc1\n2.0.0-dev\n2.0.0-p0\n2.0.0-p195\n2.0.0-p247\n2.0.0-p353\n2.0.0-p451\n2.0.0-p481\n2.0.0-preview1\n2.0.0-preview2\n2.0.0-rc1\n2.0.0-rc2\n2.1.0\n2.1.0-dev\n2.1.0-preview1\n2.1.0-preview2\n2.1.0-rc1\n2.1.1\n2.1.2\n2.2.0-dev         <----2.2.2 \u304c\u306a\u3044\njruby-1.5.6\njruby-1.6.3\njruby-1.6.4\njruby-1.6.5\njruby-1.6.5.1\njruby-1.6.6\njruby-1.6.7\njruby-1.6.7.2\njruby-1.6.8\njruby-1.7.0\njruby-1.7.0-preview1\njruby-1.7.0-preview2\njruby-1.7.0-rc1\njruby-1.7.0-rc2\njruby-1.7.1\njruby-1.7.10\njruby-1.7.11\njruby-1.7.12\njruby-1.7.13\njruby-1.7.2\njruby-1.7.3\njruby-1.7.4\njruby-1.7.5\njruby-1.7.6\njruby-1.7.7\njruby-1.7.8\njruby-1.7.9\njruby-9000+graal-dev\njruby-9000-dev\nmaglev-1.0.0\nmaglev-1.1.0-dev\nmaglev-2.0.0-dev\nmruby-1.0.0\nmruby-dev\nrbx-1.2.4\nrbx-2.0.0\nrbx-2.0.0-dev\nrbx-2.0.0-rc1\nrbx-2.1.0\nrbx-2.1.1\nrbx-2.2.0\nrbx-2.2.1\nrbx-2.2.10\nrbx-2.2.2\nrbx-2.2.3\nrbx-2.2.4\nrbx-2.2.5\nrbx-2.2.6\nrbx-2.2.7\nrbx-2.2.9\nree-1.8.6-2009.06\nree-1.8.7-2009.09\nree-1.8.7-2009.10\nree-1.8.7-2010.01\nree-1.8.7-2010.02\nree-1.8.7-2011.03\nree-1.8.7-2011.12\nree-1.8.7-2012.01\nree-1.8.7-2012.02\ntopaz-dev\n```\n\n# \u5bfe\u51e6\u65b9\u6cd5\nchef \u3067 ruby-build \u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3002\n\u518d\u5ea6\u3001\u6d41\u3057\u3066\u3082\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u306a\u304b\u3063\u305f\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u3001\u6700\u521d\u306b\u5165\u308c\u305f\u72b6\u614b\u3092\u4fdd\u6301\u3059\u308b\u307f\u305f\u3044\u3002\n\nhttps://github.com/fnichol/chef-ruby_build#-upgrade\n\nnode \u30d5\u30a1\u30a4\u30eb\u3067 `upgrade`\u3092 `sync` or `true` \u306b\u3059\u308b\u3068\u5b9f\u884c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u308c\u308b\u307f\u305f\u3044\u3002\n\n```json:nodes/host.json\n{\n  \"ruby_build\": {\n    \"upgrade\": \"sync\"\n  },\n  \"rbenv\": {\n    \"user_installs\": [\n      {\n        \"user\": \"hogehoge\",\n        \"rubies\": [\"2.2.2\"],\n        \"global\": \"2.2.2\",\n        \"gems\": {\n          \"2.2.2\": [\n            { \"name\": \"bundler\" }\n          ]\n        }\n      }\n    ]\n  },\n  \"run_list\": [\n    \"ruby_build\",\n    \"rbenv::user\"\n  ]\n}\n```\n", "tags": ["Ruby", "rbenv", "chef"]}