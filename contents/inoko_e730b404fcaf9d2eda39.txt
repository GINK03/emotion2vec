{"context": "\n\nVLAN \u9069\u7528\n\nE1/10 \u306b VLAN100 \u3092\u9069\u7528\u3059\u308b\u30ec\u30b7\u30d4\u3092\u4f5c\u6210\u3002\n\n\n\u30ec\u30b7\u30d4\u3092\u5909\u66f4/\u4f5c\u6210\u3057\u305f\u3089\u90fd\u5ea6 Upload \u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\n\n# \u30ec\u30b7\u30d4\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ vi cisco_interface\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ cat cisco_interface.rb\n\ncisco_interface 'Ethernet1/20' do\n  action :create\n  access_vlan 200\n  shutdown false\n  switchport_mode 'access'\n  switchport_vtp true\nend\n\n# Cookbook \u3092 Upload\n\ninohana@ino-ubuntu:~/chef-repo$ knife cookbook upload cisco-cookbook                           Uploading cisco-cookbook [1.1.2]\nUploaded 1 cookbook.\n\n# \u30ec\u30b7\u30d4\u3092\u5b9f\u884c\n\ninohana@ino-ubuntu:~/chef-repo$ knife ssh name:chefn9k \"sudo chef-client -o 'recipe[cisco-cookbook::cisco_interface]'\" -x chefuser01 -p 2222\n\nchefn9k [2017-03-14T07:21:44+00:00] WARN: Please install an English UTF-8 locale for Chef to use, falling back to C locale and disabling UTF-8 support.\nchefn9k [2017-03-14T07:21:44+00:00] INFO: Forking chef instance to converge...\nchefn9k Starting Chef Client, version 12.19.33\nchefn9k [2017-03-14T07:21:44+00:00] INFO: *** Chef 12.19.33 ***\nchefn9k [2017-03-14T07:21:44+00:00] INFO: Platform: x86_64-linux\nchefn9k [2017-03-14T07:21:44+00:00] INFO: Chef-client pid: 8181\nchefn9k [2017-03-14T07:21:46+00:00] WARN: Run List override has been provided.\nchefn9k [2017-03-14T07:21:46+00:00] WARN: Original Run List: []\nchefn9k [2017-03-14T07:21:46+00:00] WARN: Overridden Run List: [recipe[cisco-cookbook::cisco_interface]]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Run List is [recipe[cisco-cookbook::cisco_interface]]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Run List expands to [cisco-cookbook::cisco_interface]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Starting Chef Run for chefn9k\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Running start handlers\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Start handlers complete.\nchefn9k [2017-03-14T07:21:46+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:21:46+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Error while reporting run start to Data Collector. URL: https://ino-ubuntu.iselab.local/organizations/ise/data-collector Exception: 404 -- 404 \"Not Found\"  (This is normal if you do not have Chef Automate)\nchefn9k resolving cookbooks for run list: [\"cisco-cookbook::cisco_interface\"]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Loading cookbooks [cisco-cookbook@1.1.2]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache\nchefn9k Synchronizing Cookbooks:\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface.rb in the cache.\nchefn9k   - cisco-cookbook (1.1.2)\nchefn9k Installing Cookbook Gems:\nchefn9k Compiling Cookbooks...\nchefn9k Converging 1 resources\nchefn9k Recipe: cisco-cookbook::cisco_interface\nchefn9k   * cisco_interface[ethernet1/20] action create[2017-03-14T07:21:46+00:00] INFO: Processing cisco_interface[ethernet1/20] action create (cisco-cookbook::cisco_interface line 1)\nchefn9k [2017-03-14T07:21:46+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k     - update access_vlan '1' => '200'[2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:48+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k     ================================================================================\nchefn9k     Error executing action `create` on resource 'cisco_interface[ethernet1/20]'\nchefn9k     ================================================================================\nchefn9k\nchefn9k     RuntimeError\nchefn9k     ------------\nchefn9k     [ethernet1/20] ' vtp' : Service not enabled\nchefn9k\nchefn9k     Cookbook Trace:\nchefn9k     ---------------\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/interface.rb:794:in `rescue in switchport_vtp='\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/interface.rb:790:in `switchport_vtp='\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:87:in `block (3 levels) in generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:85:in `block (2 levels) in generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:65:in `instance_eval'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:65:in `block in generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:64:in `each'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:64:in `generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:56:in `prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:135:in `set_layer2_properties'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:81:in `action_create'\nchefn9k\nchefn9k     Resource Declaration:\nchefn9k     ---------------------\nchefn9k     # In /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface.rb\nchefn9k\nchefn9k       1: cisco_interface 'Ethernet1/20' do\nchefn9k       2:   action :create\nchefn9k       3:   access_vlan 200\nchefn9k       4:   shutdown false\nchefn9k       5:   switchport_mode 'access'\nchefn9k       6:   switchport_vtp true\nchefn9k       7: end\nchefn9k\nchefn9k     Compiled Resource:\nchefn9k     ------------------\nchefn9k     # Declared in /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface.rb:1:in `from_file'\nchefn9k\nchefn9k     cisco_interface(\"ethernet1/20\") do\nchefn9k       action [:create]\nchefn9k       retries 0\nchefn9k       retry_delay 2\nchefn9k       default_guard_interpreter :default\nchefn9k       declared_type :cisco_interface\nchefn9k       cookbook_name \"cisco-cookbook\"\nchefn9k       recipe_name \"cisco_interface\"\nchefn9k       access_vlan 200\nchefn9k       switchport_mode \"access\"\nchefn9k       switchport_vtp true\nchefn9k       switchport_trunk_allowed_vlan \"1-4094\"\nchefn9k       switchport_trunk_native_vlan 1\nchefn9k     end\nchefn9k\nchefn9k     Platform:\nchefn9k     ---------\nchefn9k     x86_64-linux\nchefn9k\nchefn9k [2017-03-14T07:21:48+00:00] INFO: Running queued delayed notifications before re-raising exception\nchefn9k\nchefn9k Running handlers:\nchefn9k [2017-03-14T07:21:48+00:00] ERROR: Running exception handlers\nchefn9k Running handlers complete\nchefn9k [2017-03-14T07:21:48+00:00] ERROR: Exception handlers complete\nchefn9k Chef Client failed. 0 resources updated in 03 seconds\nchefn9k [2017-03-14T07:21:48+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\nchefn9k [2017-03-14T07:21:48+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\nchefn9k [2017-03-14T07:21:48+00:00] ERROR: cisco_interface[ethernet1/20] (cisco-cookbook::cisco_interface line 1) had an error: RuntimeError: [ethernet1/20] ' vtp' : Service not enabled\nchefn9k [2017-03-14T07:21:48+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\ninohana@ino-ubuntu:~/chef-repo$\n\n\nInterface E1/20 \u306b Vlan200 \u304c\u30a2\u30b5\u30a4\u30f3\u3055\u308c\u307e\u3057\u305f\u3002\n\n\nVLAN \u524a\u9664\n\nInterface E1/20 \u306e\u8a2d\u5b9a\u3092\u30af\u30ea\u30a2\u3057\u307e\u3059\u3002\n\n\n# Destroy\u30ec\u30b7\u30d4\u3092\u4f5c\u3063\u3066\u307f\u308b\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ cat cisco_interface_del.rb\ncisco_interface 'Ethernet1/20' do\n  action :destroy\nend\n\n# \u5b9f\u884c\u7d50\u679c\n\nswitch(config-if)# sh int status\n\n# \u6d88\u3048\u3066\u306d\u3048\uff01\n--------------------------------------------------------------------------------\nPort          Name               Status    Vlan      Duplex  Speed   Type\n--------------------------------------------------------------------------------\nmgmt0         --                 connected routed    full    100     --\nEth1/1        --                 connected 1         full    10G     SFP-H10GB-CU1M\nEth1/2        --                 connected 1         full    1000    1000base-T\nEth1/3        --                 xcvrAbsen trunk     auto    auto    --\nEth1/4        --                 xcvrAbsen 1         auto    auto    --\nEth1/5        --                 xcvrAbsen 1         auto    auto    --\nEth1/6        --                 xcvrAbsen 1         auto    auto    --\n\u7565\nEth1/20       --                 xcvrAbsen 200       auto    auto    --\n\n\nInterface \u304b\u3089 Vlan \u306e\u5b9a\u7fa9\u3092\u524a\u9664\u3059\u308b\u969b\u300cdestroy\u300d\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\n\u5185\u90e8\u7684\u306b no interface \u3092\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001Default Vlan \u3067\u3042\u308b Vlan1 \u306b\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u3067 Interface \u306e Vlan \u3092\u524a\u9664\u3059\u308b\u3068\u307f\u306a\u3057\u307e\u3059\u3002\n\ninohana@ino-ubuntu:~/chef-repo$ knife ssh name:chefn9k \"sudo chef-client -o 'recipe[cisco-cookbook::cisco_interface_del]'\" -x chefuser01 -p 2222\nchefn9k [2017-03-14T07:42:31+00:00] WARN: Please install an English UTF-8 locale for Chef to use, falling back to C locale and disabling UTF-8 support.\nchefn9k [2017-03-14T07:42:32+00:00] INFO: Forking chef instance to converge...\nchefn9k Starting Chef Client, version 12.19.33\nchefn9k [2017-03-14T07:42:32+00:00] INFO: *** Chef 12.19.33 ***\nchefn9k [2017-03-14T07:42:32+00:00] INFO: Platform: x86_64-linux\nchefn9k [2017-03-14T07:42:32+00:00] INFO: Chef-client pid: 9168\nchefn9k [2017-03-14T07:42:33+00:00] WARN: Run List override has been provided.\nchefn9k [2017-03-14T07:42:33+00:00] WARN: Original Run List: []\nchefn9k [2017-03-14T07:42:33+00:00] WARN: Overridden Run List: [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Run List is [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Run List expands to [cisco-cookbook::cisco_interface_del]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Starting Chef Run for chefn9k\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Running start handlers\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Start handlers complete.\nchefn9k [2017-03-14T07:42:33+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:42:33+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Error while reporting run start to Data Collector. URL: https://ino-ubuntu.iselab.local/organizations/ise/data-collector Exception: 404 -- 404 \"Not Found\"  (This is normal if you do not have Chef Automate)\nchefn9k resolving cookbooks for run list: [\"cisco-cookbook::cisco_interface_del\"]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Loading cookbooks [cisco-cookbook@1.1.2]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache\nchefn9k Synchronizing Cookbooks:\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb in the cache.\nchefn9k   - cisco-cookbook (1.1.2)\nchefn9k Installing Cookbook Gems:\nchefn9k Compiling Cookbooks...\nchefn9k Converging 1 resources\nchefn9k Recipe: cisco-cookbook::cisco_interface_del\nchefn9k   * cisco_interface[ethernet1/20] action destroy[2017-03-14T07:42:34+00:00] INFO: Processing cisco_interface[ethernet1/20] action destroy (cisco-cookbook::cisco_interface_del line 1)\nchefn9k [2017-03-14T07:42:34+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:42:34+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:42:34+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k\nchefn9k     ================================================================================\nchefn9k     Error executing action `destroy` on resource 'cisco_interface[ethernet1/20]'\nchefn9k     ================================================================================\nchefn9k\nchefn9k     Cisco::CliError\nchefn9k     ---------------\nchefn9k     CliError: 'no interface ethernet1/20' rejected with message:\nchefn9k     'Invalid range'\nchefn9k\nchefn9k     Cookbook Trace:\nchefn9k     ---------------\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node.rb:266:in `rescue in config'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node.rb:263:in `config'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node.rb:161:in `config_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node_util.rb:58:in `config_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/interface.rb:65:in `destroy'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:144:in `block in action_destroy'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:143:in `action_destroy'\nchefn9k\nchefn9k     Resource Declaration:\nchefn9k     ---------------------\nchefn9k     # In /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb\nchefn9k\nchefn9k       1: cisco_interface 'Ethernet1/20' do\nchefn9k       2:   action :destroy\nchefn9k       3: end\nchefn9k\nchefn9k     Compiled Resource:\nchefn9k     ------------------\nchefn9k     # Declared in /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb:1:in `from_file'\nchefn9k\nchefn9k     cisco_interface(\"ethernet1/20\") do\nchefn9k       action [:destroy]\nchefn9k       retries 0\nchefn9k       retry_delay 2\nchefn9k       default_guard_interpreter :default\nchefn9k       declared_type :cisco_interface\nchefn9k       cookbook_name \"cisco-cookbook\"\nchefn9k       recipe_name \"cisco_interface_del\"\nchefn9k     end\nchefn9k\nchefn9k     Platform:\nchefn9k     ---------\nchefn9k     x86_64-linux\nchefn9k\nchefn9k [2017-03-14T07:42:34+00:00] INFO: Running queued delayed notifications before re-raising exception\nchefn9k\nchefn9k Running handlers:\nchefn9k [2017-03-14T07:42:34+00:00] ERROR: Running exception handlers\nchefn9k Running handlers complete\nchefn9k [2017-03-14T07:42:34+00:00] ERROR: Exception handlers complete\nchefn9k Chef Client failed. 0 resources updated in 02 seconds\nchefn9k [2017-03-14T07:42:34+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\nchefn9k [2017-03-14T07:42:34+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\nchefn9k [2017-03-14T07:42:34+00:00] ERROR: CliError: 'no interface ethernet1/20' rejected with message:\nchefn9k 'Invalid range'\nchefn9k [2017-03-14T07:42:34+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\ninohana@ino-ubuntu:~/chef-repo$\n\n\n\u518d\u5ea6Interface Vlan \u9069\u7528\u89e3\u9664\n\n# Vlan1 \u3067\u4e0a\u66f8\u304d\u3059\u308b\u30ec\u30b7\u30d4\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ cat cisco_interface_del.rb\ncisco_interface 'Ethernet1/20' do\n  action :create\n  access_vlan 1\n  shutdown false\n  switchport_mode 'access'\nend\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$\n\n# Upload\n\ninohana@ino-ubuntu:~/chef-repo$ knife cookbook upload cisco-cookbook                           Uploading cisco-cookbook [1.1.2]\nUploaded 1 cookbook.\n\n# \u30ec\u30b7\u30d4\u5b9f\u884c\n\ninohana@ino-ubuntu:~/chef-repo$ knife ssh name:chefn9k \"sudo chef-client -o 'recipe[cisco-cookbook::cisco_interface_del]'\" -x chefuser01 -p 2222\nchefn9k [2017-03-14T07:49:00+00:00] WARN: Please install an English UTF-8 locale for Chef to use, falling back to C locale and disabling UTF-8 support.\nchefn9k [2017-03-14T07:49:01+00:00] INFO: Forking chef instance to converge...\nchefn9k Starting Chef Client, version 12.19.33\nchefn9k [2017-03-14T07:49:01+00:00] INFO: *** Chef 12.19.33 ***\nchefn9k [2017-03-14T07:49:01+00:00] INFO: Platform: x86_64-linux\nchefn9k [2017-03-14T07:49:01+00:00] INFO: Chef-client pid: 9415\nchefn9k [2017-03-14T07:49:02+00:00] WARN: Run List override has been provided.\nchefn9k [2017-03-14T07:49:02+00:00] WARN: Original Run List: []\nchefn9k [2017-03-14T07:49:02+00:00] WARN: Overridden Run List: [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Run List is [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Run List expands to [cisco-cookbook::cisco_interface_del]\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Starting Chef Run for chefn9k\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Running start handlers\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Start handlers complete.\nchefn9k [2017-03-14T07:49:02+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:49:02+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Error while reporting run start to Data Collector. URL: https://ino-ubuntu.iselab.local/organizations/ise/data-collector Exception: 404 -- 404 \"Not Found\"  (This is normal if you do not have Chef Automate)\nchefn9k resolving cookbooks for run list: [\"cisco-cookbook::cisco_interface_del\"]\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Loading cookbooks [cisco-cookbook@1.1.2]\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache\nchefn9k Synchronizing Cookbooks:\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface.rb in the cache.\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb in the cache.\nchefn9k   - cisco-cookbook (1.1.2)\nchefn9k Installing Cookbook Gems:\nchefn9k Compiling Cookbooks...\nchefn9k Converging 1 resources\nchefn9k Recipe: cisco-cookbook::cisco_interface_del\nchefn9k   * cisco_interface[ethernet1/20] action create[2017-03-14T07:49:03+00:00] INFO: Processing cisco_interface[ethernet1/20] action create (cisco-cookbook::cisco_interface_del line 1)\nchefn9k [2017-03-14T07:49:03+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:49:03+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:49:04+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:49:04+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k     - update access_vlan '200' => '1'[2017-03-14T07:49:04+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k [2017-03-14T07:49:04+00:00] WARN: Skipping final node save because override_runlist was given\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Chef Run complete in 1.809047027 seconds\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Skipping removal of unused files from the cache\nchefn9k\nchefn9k Running handlers:\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Running report handlers\nchefn9k Running handlers complete\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Report handlers complete\nchefn9k Chef Client finished, 1/1 resources updated in 03 seconds\ninohana@ino-ubuntu:~/chef-repo$\n\n# Eth1/20 \u306e VLAN \u304c Vlan 200 \u304b\u3089 Vlan1 \u306b\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\n\nEth1/20       --                 xcvrAbsen 1         auto    auto    --\n\n## VLAN \u9069\u7528\n\n- E1/10 \u306b VLAN100 \u3092\u9069\u7528\u3059\u308b\u30ec\u30b7\u30d4\u3092\u4f5c\u6210\u3002\n    - \u30ec\u30b7\u30d4\u3092\u5909\u66f4/\u4f5c\u6210\u3057\u305f\u3089\u90fd\u5ea6 Upload \u304c\u5fc5\u8981\u3067\u3059\u3002\n\n```\n# \u30ec\u30b7\u30d4\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ vi cisco_interface\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ cat cisco_interface.rb\n\ncisco_interface 'Ethernet1/20' do\n  action :create\n  access_vlan 200\n  shutdown false\n  switchport_mode 'access'\n  switchport_vtp true\nend\n\n# Cookbook \u3092 Upload\n\ninohana@ino-ubuntu:~/chef-repo$ knife cookbook upload cisco-cookbook                           Uploading cisco-cookbook [1.1.2]\nUploaded 1 cookbook.\n\n# \u30ec\u30b7\u30d4\u3092\u5b9f\u884c\n\ninohana@ino-ubuntu:~/chef-repo$ knife ssh name:chefn9k \"sudo chef-client -o 'recipe[cisco-cookbook::cisco_interface]'\" -x chefuser01 -p 2222\n\nchefn9k [2017-03-14T07:21:44+00:00] WARN: Please install an English UTF-8 locale for Chef to use, falling back to C locale and disabling UTF-8 support.\nchefn9k [2017-03-14T07:21:44+00:00] INFO: Forking chef instance to converge...\nchefn9k Starting Chef Client, version 12.19.33\nchefn9k [2017-03-14T07:21:44+00:00] INFO: *** Chef 12.19.33 ***\nchefn9k [2017-03-14T07:21:44+00:00] INFO: Platform: x86_64-linux\nchefn9k [2017-03-14T07:21:44+00:00] INFO: Chef-client pid: 8181\nchefn9k [2017-03-14T07:21:46+00:00] WARN: Run List override has been provided.\nchefn9k [2017-03-14T07:21:46+00:00] WARN: Original Run List: []\nchefn9k [2017-03-14T07:21:46+00:00] WARN: Overridden Run List: [recipe[cisco-cookbook::cisco_interface]]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Run List is [recipe[cisco-cookbook::cisco_interface]]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Run List expands to [cisco-cookbook::cisco_interface]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Starting Chef Run for chefn9k\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Running start handlers\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Start handlers complete.\nchefn9k [2017-03-14T07:21:46+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:21:46+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Error while reporting run start to Data Collector. URL: https://ino-ubuntu.iselab.local/organizations/ise/data-collector Exception: 404 -- 404 \"Not Found\"  (This is normal if you do not have Chef Automate)\nchefn9k resolving cookbooks for run list: [\"cisco-cookbook::cisco_interface\"]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Loading cookbooks [cisco-cookbook@1.1.2]\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache\nchefn9k Synchronizing Cookbooks:\nchefn9k [2017-03-14T07:21:46+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface.rb in the cache.\nchefn9k   - cisco-cookbook (1.1.2)\nchefn9k Installing Cookbook Gems:\nchefn9k Compiling Cookbooks...\nchefn9k Converging 1 resources\nchefn9k Recipe: cisco-cookbook::cisco_interface\nchefn9k   * cisco_interface[ethernet1/20] action create[2017-03-14T07:21:46+00:00] INFO: Processing cisco_interface[ethernet1/20] action create (cisco-cookbook::cisco_interface line 1)\nchefn9k [2017-03-14T07:21:46+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k     - update access_vlan '1' => '200'[2017-03-14T07:21:47+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:21:48+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k     ================================================================================\nchefn9k     Error executing action `create` on resource 'cisco_interface[ethernet1/20]'\nchefn9k     ================================================================================\nchefn9k\nchefn9k     RuntimeError\nchefn9k     ------------\nchefn9k     [ethernet1/20] ' vtp' : Service not enabled\nchefn9k\nchefn9k     Cookbook Trace:\nchefn9k     ---------------\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/interface.rb:794:in `rescue in switchport_vtp='\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/interface.rb:790:in `switchport_vtp='\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:87:in `block (3 levels) in generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:85:in `block (2 levels) in generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:65:in `instance_eval'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:65:in `block in generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:64:in `each'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/cisco_cmn_utils.rb:64:in `generic_prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:56:in `prop_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:135:in `set_layer2_properties'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:81:in `action_create'\nchefn9k\nchefn9k     Resource Declaration:\nchefn9k     ---------------------\nchefn9k     # In /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface.rb\nchefn9k\nchefn9k       1: cisco_interface 'Ethernet1/20' do\nchefn9k       2:   action :create\nchefn9k       3:   access_vlan 200\nchefn9k       4:   shutdown false\nchefn9k       5:   switchport_mode 'access'\nchefn9k       6:   switchport_vtp true\nchefn9k       7: end\nchefn9k\nchefn9k     Compiled Resource:\nchefn9k     ------------------\nchefn9k     # Declared in /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface.rb:1:in `from_file'\nchefn9k\nchefn9k     cisco_interface(\"ethernet1/20\") do\nchefn9k       action [:create]\nchefn9k       retries 0\nchefn9k       retry_delay 2\nchefn9k       default_guard_interpreter :default\nchefn9k       declared_type :cisco_interface\nchefn9k       cookbook_name \"cisco-cookbook\"\nchefn9k       recipe_name \"cisco_interface\"\nchefn9k       access_vlan 200\nchefn9k       switchport_mode \"access\"\nchefn9k       switchport_vtp true\nchefn9k       switchport_trunk_allowed_vlan \"1-4094\"\nchefn9k       switchport_trunk_native_vlan 1\nchefn9k     end\nchefn9k\nchefn9k     Platform:\nchefn9k     ---------\nchefn9k     x86_64-linux\nchefn9k\nchefn9k [2017-03-14T07:21:48+00:00] INFO: Running queued delayed notifications before re-raising exception\nchefn9k\nchefn9k Running handlers:\nchefn9k [2017-03-14T07:21:48+00:00] ERROR: Running exception handlers\nchefn9k Running handlers complete\nchefn9k [2017-03-14T07:21:48+00:00] ERROR: Exception handlers complete\nchefn9k Chef Client failed. 0 resources updated in 03 seconds\nchefn9k [2017-03-14T07:21:48+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\nchefn9k [2017-03-14T07:21:48+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\nchefn9k [2017-03-14T07:21:48+00:00] ERROR: cisco_interface[ethernet1/20] (cisco-cookbook::cisco_interface line 1) had an error: RuntimeError: [ethernet1/20] ' vtp' : Service not enabled\nchefn9k [2017-03-14T07:21:48+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\ninohana@ino-ubuntu:~/chef-repo$\n```\n\n- Interface E1/20 \u306b Vlan200 \u304c\u30a2\u30b5\u30a4\u30f3\u3055\u308c\u307e\u3057\u305f\u3002\n\n## VLAN \u524a\u9664\n\n- Interface E1/20 \u306e\u8a2d\u5b9a\u3092\u30af\u30ea\u30a2\u3057\u307e\u3059\u3002\n\n```\n\n# Destroy\u30ec\u30b7\u30d4\u3092\u4f5c\u3063\u3066\u307f\u308b\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ cat cisco_interface_del.rb\ncisco_interface 'Ethernet1/20' do\n  action :destroy\nend\n\n# \u5b9f\u884c\u7d50\u679c\n\nswitch(config-if)# sh int status\n\n# \u6d88\u3048\u3066\u306d\u3048\uff01\n--------------------------------------------------------------------------------\nPort          Name               Status    Vlan      Duplex  Speed   Type\n--------------------------------------------------------------------------------\nmgmt0         --                 connected routed    full    100     --\nEth1/1        --                 connected 1         full    10G     SFP-H10GB-CU1M\nEth1/2        --                 connected 1         full    1000    1000base-T\nEth1/3        --                 xcvrAbsen trunk     auto    auto    --\nEth1/4        --                 xcvrAbsen 1         auto    auto    --\nEth1/5        --                 xcvrAbsen 1         auto    auto    --\nEth1/6        --                 xcvrAbsen 1         auto    auto    --\n\u7565\nEth1/20       --                 xcvrAbsen 200       auto    auto    --\n```\n- Interface \u304b\u3089 Vlan \u306e\u5b9a\u7fa9\u3092\u524a\u9664\u3059\u308b\u969b\u300cdestroy\u300d\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\n- \u5185\u90e8\u7684\u306b no interface \u3092\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n- \u305d\u306e\u305f\u3081\u3001Default Vlan \u3067\u3042\u308b Vlan1 \u306b\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u3067 Interface \u306e Vlan \u3092\u524a\u9664\u3059\u308b\u3068\u307f\u306a\u3057\u307e\u3059\u3002\n\n```\ninohana@ino-ubuntu:~/chef-repo$ knife ssh name:chefn9k \"sudo chef-client -o 'recipe[cisco-cookbook::cisco_interface_del]'\" -x chefuser01 -p 2222\nchefn9k [2017-03-14T07:42:31+00:00] WARN: Please install an English UTF-8 locale for Chef to use, falling back to C locale and disabling UTF-8 support.\nchefn9k [2017-03-14T07:42:32+00:00] INFO: Forking chef instance to converge...\nchefn9k Starting Chef Client, version 12.19.33\nchefn9k [2017-03-14T07:42:32+00:00] INFO: *** Chef 12.19.33 ***\nchefn9k [2017-03-14T07:42:32+00:00] INFO: Platform: x86_64-linux\nchefn9k [2017-03-14T07:42:32+00:00] INFO: Chef-client pid: 9168\nchefn9k [2017-03-14T07:42:33+00:00] WARN: Run List override has been provided.\nchefn9k [2017-03-14T07:42:33+00:00] WARN: Original Run List: []\nchefn9k [2017-03-14T07:42:33+00:00] WARN: Overridden Run List: [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Run List is [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Run List expands to [cisco-cookbook::cisco_interface_del]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Starting Chef Run for chefn9k\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Running start handlers\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Start handlers complete.\nchefn9k [2017-03-14T07:42:33+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:42:33+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Error while reporting run start to Data Collector. URL: https://ino-ubuntu.iselab.local/organizations/ise/data-collector Exception: 404 -- 404 \"Not Found\"  (This is normal if you do not have Chef Automate)\nchefn9k resolving cookbooks for run list: [\"cisco-cookbook::cisco_interface_del\"]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Loading cookbooks [cisco-cookbook@1.1.2]\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache\nchefn9k Synchronizing Cookbooks:\nchefn9k [2017-03-14T07:42:33+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb in the cache.\nchefn9k   - cisco-cookbook (1.1.2)\nchefn9k Installing Cookbook Gems:\nchefn9k Compiling Cookbooks...\nchefn9k Converging 1 resources\nchefn9k Recipe: cisco-cookbook::cisco_interface_del\nchefn9k   * cisco_interface[ethernet1/20] action destroy[2017-03-14T07:42:34+00:00] INFO: Processing cisco_interface[ethernet1/20] action destroy (cisco-cookbook::cisco_interface_del line 1)\nchefn9k [2017-03-14T07:42:34+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:42:34+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:42:34+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k\nchefn9k     ================================================================================\nchefn9k     Error executing action `destroy` on resource 'cisco_interface[ethernet1/20]'\nchefn9k     ================================================================================\nchefn9k\nchefn9k     Cisco::CliError\nchefn9k     ---------------\nchefn9k     CliError: 'no interface ethernet1/20' rejected with message:\nchefn9k     'Invalid range'\nchefn9k\nchefn9k     Cookbook Trace:\nchefn9k     ---------------\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node.rb:266:in `rescue in config'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node.rb:263:in `config'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node.rb:161:in `config_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/node_util.rb:58:in `config_set'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/cisco_node_utils-1.2.0/lib/cisco_node_utils/interface.rb:65:in `destroy'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:144:in `block in action_destroy'\nchefn9k     /var/chef/cache/cookbooks/cisco-cookbook/libraries/provider_cisco_interface.rb:143:in `action_destroy'\nchefn9k\nchefn9k     Resource Declaration:\nchefn9k     ---------------------\nchefn9k     # In /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb\nchefn9k\nchefn9k       1: cisco_interface 'Ethernet1/20' do\nchefn9k       2:   action :destroy\nchefn9k       3: end\nchefn9k\nchefn9k     Compiled Resource:\nchefn9k     ------------------\nchefn9k     # Declared in /var/chef/cache/cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb:1:in `from_file'\nchefn9k\nchefn9k     cisco_interface(\"ethernet1/20\") do\nchefn9k       action [:destroy]\nchefn9k       retries 0\nchefn9k       retry_delay 2\nchefn9k       default_guard_interpreter :default\nchefn9k       declared_type :cisco_interface\nchefn9k       cookbook_name \"cisco-cookbook\"\nchefn9k       recipe_name \"cisco_interface_del\"\nchefn9k     end\nchefn9k\nchefn9k     Platform:\nchefn9k     ---------\nchefn9k     x86_64-linux\nchefn9k\nchefn9k [2017-03-14T07:42:34+00:00] INFO: Running queued delayed notifications before re-raising exception\nchefn9k\nchefn9k Running handlers:\nchefn9k [2017-03-14T07:42:34+00:00] ERROR: Running exception handlers\nchefn9k Running handlers complete\nchefn9k [2017-03-14T07:42:34+00:00] ERROR: Exception handlers complete\nchefn9k Chef Client failed. 0 resources updated in 02 seconds\nchefn9k [2017-03-14T07:42:34+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\nchefn9k [2017-03-14T07:42:34+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\nchefn9k [2017-03-14T07:42:34+00:00] ERROR: CliError: 'no interface ethernet1/20' rejected with message:\nchefn9k 'Invalid range'\nchefn9k [2017-03-14T07:42:34+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\ninohana@ino-ubuntu:~/chef-repo$\n```\n\n- \u518d\u5ea6Interface Vlan \u9069\u7528\u89e3\u9664\n\n```\n# Vlan1 \u3067\u4e0a\u66f8\u304d\u3059\u308b\u30ec\u30b7\u30d4\n\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$ cat cisco_interface_del.rb\ncisco_interface 'Ethernet1/20' do\n  action :create\n  access_vlan 1\n  shutdown false\n  switchport_mode 'access'\nend\ninohana@ino-ubuntu:~/chef-repo/cookbooks/cisco-cookbook/recipes$\n\n# Upload\n\ninohana@ino-ubuntu:~/chef-repo$ knife cookbook upload cisco-cookbook                           Uploading cisco-cookbook [1.1.2]\nUploaded 1 cookbook.\n\n# \u30ec\u30b7\u30d4\u5b9f\u884c\n\ninohana@ino-ubuntu:~/chef-repo$ knife ssh name:chefn9k \"sudo chef-client -o 'recipe[cisco-cookbook::cisco_interface_del]'\" -x chefuser01 -p 2222\nchefn9k [2017-03-14T07:49:00+00:00] WARN: Please install an English UTF-8 locale for Chef to use, falling back to C locale and disabling UTF-8 support.\nchefn9k [2017-03-14T07:49:01+00:00] INFO: Forking chef instance to converge...\nchefn9k Starting Chef Client, version 12.19.33\nchefn9k [2017-03-14T07:49:01+00:00] INFO: *** Chef 12.19.33 ***\nchefn9k [2017-03-14T07:49:01+00:00] INFO: Platform: x86_64-linux\nchefn9k [2017-03-14T07:49:01+00:00] INFO: Chef-client pid: 9415\nchefn9k [2017-03-14T07:49:02+00:00] WARN: Run List override has been provided.\nchefn9k [2017-03-14T07:49:02+00:00] WARN: Original Run List: []\nchefn9k [2017-03-14T07:49:02+00:00] WARN: Overridden Run List: [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Run List is [recipe[cisco-cookbook::cisco_interface_del]]\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Run List expands to [cisco-cookbook::cisco_interface_del]\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Starting Chef Run for chefn9k\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Running start handlers\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Start handlers complete.\nchefn9k [2017-03-14T07:49:02+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:49:02+00:00] INFO: HTTP Request Returned 404 Not Found:\nchefn9k [2017-03-14T07:49:02+00:00] INFO: Error while reporting run start to Data Collector. URL: https://ino-ubuntu.iselab.local/organizations/ise/data-collector Exception: 404 -- 404 \"Not Found\"  (This is normal if you do not have Chef Automate)\nchefn9k resolving cookbooks for run list: [\"cisco-cookbook::cisco_interface_del\"]\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Loading cookbooks [cisco-cookbook@1.1.2]\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Skipping removal of obsoleted cookbooks from the cache\nchefn9k Synchronizing Cookbooks:\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface.rb in the cache.\nchefn9k [2017-03-14T07:49:03+00:00] INFO: Storing updated cookbooks/cisco-cookbook/recipes/cisco_interface_del.rb in the cache.\nchefn9k   - cisco-cookbook (1.1.2)\nchefn9k Installing Cookbook Gems:\nchefn9k Compiling Cookbooks...\nchefn9k Converging 1 resources\nchefn9k Recipe: cisco-cookbook::cisco_interface_del\nchefn9k   * cisco_interface[ethernet1/20] action create[2017-03-14T07:49:03+00:00] INFO: Processing cisco_interface[ethernet1/20] action create (cisco-cookbook::cisco_interface_del line 1)\nchefn9k [2017-03-14T07:49:03+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:49:03+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:49:04+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k [2017-03-14T07:49:04+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k     - update access_vlan '200' => '1'[2017-03-14T07:49:04+00:00] WARN: /var/chef/cache/cookbooks/cisco-cookbook/files/default/vendor/gems/net_http_unix-0.2.1/lib/net_x/http_unix.rb:35:in `connect_unix': Object#timeout is deprecated, use Timeout.timeout instead.\nchefn9k\nchefn9k [2017-03-14T07:49:04+00:00] WARN: Skipping final node save because override_runlist was given\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Chef Run complete in 1.809047027 seconds\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Skipping removal of unused files from the cache\nchefn9k\nchefn9k Running handlers:\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Running report handlers\nchefn9k Running handlers complete\nchefn9k [2017-03-14T07:49:04+00:00] INFO: Report handlers complete\nchefn9k Chef Client finished, 1/1 resources updated in 03 seconds\ninohana@ino-ubuntu:~/chef-repo$\n\n# Eth1/20 \u306e VLAN \u304c Vlan 200 \u304b\u3089 Vlan1 \u306b\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\n\nEth1/20       --                 xcvrAbsen 1         auto    auto    --\n```\n\n", "tags": ["chef", "Cisco", "Nexus"]}