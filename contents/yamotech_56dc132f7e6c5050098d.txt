{"tags": ["\u30af\u30ed\u30fc\u30e9\u30fc", "\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0", "Nokogiri", "Ruby"], "context": "Nokogiri \u3092\u4f7f\u3063\u305f Ruby\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0 [\u521d\u5fc3\u8005\u5411\u3051\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb]\u3092\u5148\u306b\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u5b9f\u884c\u74b0\u5883\n\nOS X El Capitan \u30d0\u30fc\u30b8\u30e7\u30f3 10.11.4\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]\nNokogiri (1.6.7.2)\n\n\n\u4eca\u56de\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3059\u308b\u30da\u30fc\u30b8\n\u5ca9\u624b\u770c\u306e\u5929\u6c17 - \u65e5\u672c\u6c17\u8c61\u5354\u4f1a tenki.jp\n\n\u5ca9\u624b\u770c\u306e\u5404\u5730\u57df\u306e\u5929\u6c17\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u5b9f\u88c5\n\nweather.rb\n\n# URL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'open-uri'\n# Nokogiri\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'nokogiri'\n\n# \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5148\u306eURL\nurl ='http://www.tenki.jp/forecast/2/6/'\n\ncharset = nil\nhtml = open(url) do |f|\n  charset = f.charset # \u6587\u5b57\u7a2e\u5225\u3092\u53d6\u5f97\n  f.read # html\u3092\u8aad\u307f\u8fbc\u3093\u3067\u5909\u6570html\u306b\u6e21\u3059\nend\n\n# html\u3092\u30d1\u30fc\u30b9\uff08\u89e3\u6790\uff09\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\ndoc = Nokogiri::HTML.parse(html, nil, charset)\n\n# \u65e5\u4ed8\nputs doc.xpath('//p[@id=\"forecast_public_date\"]').inner_text\n\ndoc.xpath('//a[@class=\"forecast_map_entry\"]', '//ul[@id=\"forecast_list_entries\"]/li[position()<8]/a').each do |node|\n  # \u5834\u6240\n  place = node.child.inner_text\n\n  # \u5929\u6c17\n  weather = node.css('img').attribute('title').value\n\n  # \u964d\u6c34\u78ba\u7387\n  probability = node.css('span.probPrecip').inner_text\n\n  puts \"#{place}\u306e\u5929\u6c17\u306f#{weather}\u3067\u964d\u6c34\u78ba\u7387\u306f#{probability}\u3067\u3059\u3002\" \nend\n\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\n05\u670808\u65e5(\u65e5)\n\u76db\u5ca1\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5bae\u53e4\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5927\u8239\u6e21\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u82b1\u5dfb\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u4e45\u6148\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u4e00\u95a2\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5317\u4e0a\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u91dc\u77f3\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u4e8c\u6238\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u516b\u5e61\u5e73\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5965\u5dde\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u96eb\u77f3\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u9060\u91ce\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u6edd\u6ca2\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u7d2b\u6ce2\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5e73\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u624b\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u8efd\u7c73\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\n\n\u7121\u4e8b\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u304d\u307e\u3057\u305f\uff01\n\nXPath\u306b\u983c\u3089\u306a\u3044\u65b9\u6cd5\n\u3053\u3053\u3067\u306f\u3001\u9060\u91ce\u5e02\u304b\u3089\u8efd\u7c73\u753a\u307e\u3067\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u5b9f\u88c5\n\nweather2.rb\n\n# URL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'open-uri'\n# Nokogiri\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'nokogiri'\n\n# \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5148\u306eURL\nurl ='http://www.tenki.jp/forecast/2/6/'\n\ncharset = nil\nhtml = open(url) do |f|\n  charset = f.charset # \u6587\u5b57\u7a2e\u5225\u3092\u53d6\u5f97\n  f.read # html\u3092\u8aad\u307f\u8fbc\u3093\u3067\u5909\u6570html\u306b\u6e21\u3059\nend\n\n# html\u3092\u30d1\u30fc\u30b9\uff08\u89e3\u6790\uff09\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\ndoc = Nokogiri::HTML.parse(html, nil, charset)\n\n# \u65e5\u4ed8\nputs doc.xpath('//p[@id=\"forecast_public_date\"]').inner_text\n\ndoc.xpath('//ul[@id=\"forecast_list_entries\"]/li/a')[0, 7].each do |node|\n  # \u5834\u6240\n  place = node.child.inner_text\n\n  # \u5929\u6c17\n  weather = node.css('img').attribute('title').value\n\n  # \u964d\u6c34\u78ba\u7387\n  probability = node.css('span.probPrecip').inner_text\n\n  puts \"#{place}\u306e\u5929\u6c17\u306f#{weather}\u3067\u964d\u6c34\u78ba\u7387\u306f#{probability}\u3067\u3059\u3002\" \nend\n\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\n05\u670808\u65e5(\u65e5)\n\u9060\u91ce\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u6edd\u6ca2\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u7d2b\u6ce2\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5e73\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u624b\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u8efd\u7c73\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\n\n\n\u53c2\u8003\nNokogiri \u3092\u4f7f\u3063\u305f Ruby\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0 [\u521d\u5fc3\u8005\u5411\u3051\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb]\n[Ruby]\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u305f\u3081\u306eNokogiri\u5229\u7528\u30e1\u30e2\nposition - XPath | MDN\n\n[Nokogiri \u3092\u4f7f\u3063\u305f Ruby\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0 [\u521d\u5fc3\u8005\u5411\u3051\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb]](http://morizyun.github.io/blog/ruby-nokogiri-scraping-tutorial/)\u3092\u5148\u306b\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\n\n### \u5b9f\u884c\u74b0\u5883\n- OS X El Capitan \u30d0\u30fc\u30b8\u30e7\u30f3 10.11.4\n- ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]\n- Nokogiri (1.6.7.2)\n\n\n\n## \u4eca\u56de\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3059\u308b\u30da\u30fc\u30b8\n[\u5ca9\u624b\u770c\u306e\u5929\u6c17 - \u65e5\u672c\u6c17\u8c61\u5354\u4f1a tenki.jp](http://www.tenki.jp/forecast/2/6/)\n\n[![https://gyazo.com/e403ed6a66a8a7b0677139df84c91869](https://i.gyazo.com/e403ed6a66a8a7b0677139df84c91869.png)](https://gyazo.com/e403ed6a66a8a7b0677139df84c91869)\n\n\n\u5ca9\u624b\u770c\u306e\u5404\u5730\u57df\u306e\u5929\u6c17\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u307f\u307e\u3059\u3002\n\n###\u5b9f\u88c5\n\n```weather.rb\n\n# URL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'open-uri'\n# Nokogiri\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'nokogiri'\n\n# \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5148\u306eURL\nurl ='http://www.tenki.jp/forecast/2/6/'\n\ncharset = nil\nhtml = open(url) do |f|\n  charset = f.charset # \u6587\u5b57\u7a2e\u5225\u3092\u53d6\u5f97\n  f.read # html\u3092\u8aad\u307f\u8fbc\u3093\u3067\u5909\u6570html\u306b\u6e21\u3059\nend\n\n# html\u3092\u30d1\u30fc\u30b9\uff08\u89e3\u6790\uff09\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\ndoc = Nokogiri::HTML.parse(html, nil, charset)\n\n# \u65e5\u4ed8\nputs doc.xpath('//p[@id=\"forecast_public_date\"]').inner_text\n\ndoc.xpath('//a[@class=\"forecast_map_entry\"]', '//ul[@id=\"forecast_list_entries\"]/li[position()<8]/a').each do |node|\n  # \u5834\u6240\n  place = node.child.inner_text\n\n  # \u5929\u6c17\n  weather = node.css('img').attribute('title').value\n\n  # \u964d\u6c34\u78ba\u7387\n  probability = node.css('span.probPrecip').inner_text\n\n  puts \"#{place}\u306e\u5929\u6c17\u306f#{weather}\u3067\u964d\u6c34\u78ba\u7387\u306f#{probability}\u3067\u3059\u3002\" \nend\n\n```\n\n###\u5b9f\u884c\u7d50\u679c\n\n```\n\n05\u670808\u65e5(\u65e5)\n\u76db\u5ca1\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5bae\u53e4\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5927\u8239\u6e21\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u82b1\u5dfb\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u4e45\u6148\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u4e00\u95a2\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5317\u4e0a\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u91dc\u77f3\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u4e8c\u6238\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u516b\u5e61\u5e73\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5965\u5dde\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u96eb\u77f3\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u9060\u91ce\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u6edd\u6ca2\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u7d2b\u6ce2\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5e73\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u624b\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u8efd\u7c73\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\n```\n\n\u7121\u4e8b\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u304d\u307e\u3057\u305f\uff01\n\n##XPath\u306b\u983c\u3089\u306a\u3044\u65b9\u6cd5\n\n\u3053\u3053\u3067\u306f\u3001\u9060\u91ce\u5e02\u304b\u3089\u8efd\u7c73\u753a\u307e\u3067\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u307f\u307e\u3059\u3002\n\n###\u5b9f\u88c5\n\n```weather2.rb\n\n# URL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'open-uri'\n# Nokogiri\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'nokogiri'\n\n# \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5148\u306eURL\nurl ='http://www.tenki.jp/forecast/2/6/'\n\ncharset = nil\nhtml = open(url) do |f|\n  charset = f.charset # \u6587\u5b57\u7a2e\u5225\u3092\u53d6\u5f97\n  f.read # html\u3092\u8aad\u307f\u8fbc\u3093\u3067\u5909\u6570html\u306b\u6e21\u3059\nend\n\n# html\u3092\u30d1\u30fc\u30b9\uff08\u89e3\u6790\uff09\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\ndoc = Nokogiri::HTML.parse(html, nil, charset)\n\n# \u65e5\u4ed8\nputs doc.xpath('//p[@id=\"forecast_public_date\"]').inner_text\n\ndoc.xpath('//ul[@id=\"forecast_list_entries\"]/li/a')[0, 7].each do |node|\n  # \u5834\u6240\n  place = node.child.inner_text\n\n  # \u5929\u6c17\n  weather = node.css('img').attribute('title').value\n\n  # \u964d\u6c34\u78ba\u7387\n  probability = node.css('span.probPrecip').inner_text\n\n  puts \"#{place}\u306e\u5929\u6c17\u306f#{weather}\u3067\u964d\u6c34\u78ba\u7387\u306f#{probability}\u3067\u3059\u3002\" \nend\n\n```\n\n\n###\u5b9f\u884c\u7d50\u679c\n\n```\n\n05\u670808\u65e5(\u65e5)\n\u9060\u91ce\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u6edd\u6ca2\u5e02\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u7d2b\u6ce2\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5e73\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u624b\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u5ca9\u6cc9\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\u8efd\u7c73\u753a\u306e\u5929\u6c17\u306f\u6674\u3067\u964d\u6c34\u78ba\u7387\u306f0%\u3067\u3059\u3002\n\n```\n\n## \u53c2\u8003\n[Nokogiri \u3092\u4f7f\u3063\u305f Ruby\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0 [\u521d\u5fc3\u8005\u5411\u3051\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb]](http://morizyun.github.io/blog/ruby-nokogiri-scraping-tutorial/)\n\n[[Ruby]\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u305f\u3081\u306eNokogiri\u5229\u7528\u30e1\u30e2](http://d.hatena.ne.jp/otn/20090509/p1)\n\n[position - XPath | MDN](https://developer.mozilla.org/ja/docs/XPath/Functions/position)\n"}