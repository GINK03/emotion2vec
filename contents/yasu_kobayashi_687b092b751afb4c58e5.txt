{"context": " More than 1 year has passed since last update.\n\n\u3084\u3063\u3066\u307f\u305f\u3053\u3068\nPHP\u3092\u4f7f\u3063\u3066Wikipedia\u306eAPI\u3092\u53e9\u3044\u3066\u3001\n\u300c\u89aa\u306e\u6587\u5b57\u4f53\u7cfb\u300d\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u542b\u3080Wikipedia\u65e5\u672c\u8a9e\u7248\u306e\u8a18\u4e8b\u306e\u30bf\u30a4\u30c8\u30eb\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u305f\u3002\n\n\u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\nMediaWiki API\u3092\u4f7f\u3063\u3066Wikipedia\u306e\u60c5\u5831\u3092\u53d6\u5f97\n\n\u30b3\u30fc\u30c9\n\nwtest1.php\n<html>\n<head><title>\u300c\u89aa\u306e\u6587\u5b57\u4f53\u7cfb\u300d\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u542b\u3080Wikipedia\u65e5\u672c\u8a9e\u7248\u306e\u8a18\u4e8b\u4e00\u89a7</title></head>\n<body>\n<?php\n$url='http://ja.wikipedia.org/w/api.php?format=xml&action=query&list=search&srlimit=50&srsearch=';\n$url.=urlencode('\u89aa\u306e\u6587\u5b57\u4f53\u7cfb');\n\n$array_title = array();\n$i=0;\nwhile(true){\n    //\u7d50\u679c\u304c0\u306b\u306a\u308b\u307e\u306750\u4ef6\u305a\u3064title\u3092\u53d6\u5f97\u3057\u3066\u914d\u5217\u306b\u5165\u308c\u308b\n    $xml_string=file_get_contents($url.'&sroffset='.strval($i*50));\n    $xml_obj=simplexml_load_string($xml_string);\n    if(count($xml_obj->query->search->p)==0){\n        $totalhits=$xml_obj->query->searchinfo['totalhits'];\n        break;\n    }else{\n        foreach($xml_obj->query->search->p as $p){\n            array_push($array_title,$p['title']);\n        }\n    }\n    $i+=1;\n}\n\n//\u7d50\u679c\u51fa\u529b\nprint('<p>totalhits\u306f'.$totalhits.'\u4ef6</p>');\n$num=1;\nprint('<table border=1>');\nforeach($array_title as $title){\n    print('<tr>');\n    print('<td>');\n    print($num);\n    print('</td>');\n    print('<td>');\n    print($title);\n    print('</td>');\n    print('</tr>');\n    $num+=1;\n}\nprint('</table>');\n?>\n</body>\n</html>\n\n\n# \u3084\u3063\u3066\u307f\u305f\u3053\u3068\nPHP\u3092\u4f7f\u3063\u3066Wikipedia\u306eAPI\u3092\u53e9\u3044\u3066\u3001\n\u300c\u89aa\u306e\u6587\u5b57\u4f53\u7cfb\u300d\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u542b\u3080Wikipedia\u65e5\u672c\u8a9e\u7248\u306e\u8a18\u4e8b\u306e\u30bf\u30a4\u30c8\u30eb\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u305f\u3002\n\n# \u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\n[MediaWiki API\u3092\u4f7f\u3063\u3066Wikipedia\u306e\u60c5\u5831\u3092\u53d6\u5f97](http://qiita.com/yubessy/items/16d2a074be84ee67c01f)\n\n# \u30b3\u30fc\u30c9\n\n```php:wtest1.php\n<html>\n<head><title>\u300c\u89aa\u306e\u6587\u5b57\u4f53\u7cfb\u300d\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u542b\u3080Wikipedia\u65e5\u672c\u8a9e\u7248\u306e\u8a18\u4e8b\u4e00\u89a7</title></head>\n<body>\n<?php\n$url='http://ja.wikipedia.org/w/api.php?format=xml&action=query&list=search&srlimit=50&srsearch=';\n$url.=urlencode('\u89aa\u306e\u6587\u5b57\u4f53\u7cfb');\n\n$array_title = array();\n$i=0;\nwhile(true){\n\t//\u7d50\u679c\u304c0\u306b\u306a\u308b\u307e\u306750\u4ef6\u305a\u3064title\u3092\u53d6\u5f97\u3057\u3066\u914d\u5217\u306b\u5165\u308c\u308b\n\t$xml_string=file_get_contents($url.'&sroffset='.strval($i*50));\n\t$xml_obj=simplexml_load_string($xml_string);\n\tif(count($xml_obj->query->search->p)==0){\n\t\t$totalhits=$xml_obj->query->searchinfo['totalhits'];\n\t\tbreak;\n\t}else{\n\t\tforeach($xml_obj->query->search->p as $p){\n\t\t\tarray_push($array_title,$p['title']);\n\t\t}\n\t}\n\t$i+=1;\n}\n\n//\u7d50\u679c\u51fa\u529b\nprint('<p>totalhits\u306f'.$totalhits.'\u4ef6</p>');\n$num=1;\nprint('<table border=1>');\nforeach($array_title as $title){\n\tprint('<tr>');\n\tprint('<td>');\n\tprint($num);\n\tprint('</td>');\n\tprint('<td>');\n\tprint($title);\n\tprint('</td>');\n\tprint('</tr>');\n\t$num+=1;\n}\nprint('</table>');\n?>\n</body>\n</html>\n```\n", "tags": ["mediawiki", "Wikipedia", "PHP"]}