{"context": " More than 1 year has passed since last update.\n\n\u7d4c\u7def\nipvsadm + iptables \u3067SNAT\u3067\u304d\u308bLB\u3092\u69cb\u7bc9\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30ab\u30fc\u30cd\u30eb\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u5fc5\u8981\u307d\u304b\u3063\u305f\u306e\u3067\u3001\u3084\u3063\u305f\u3053\u3068\u306a\u3044\u3057\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u74b0\u5883\n\nCentOS6.7 64bit\nVMware ESXi 5.5\n\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\u30ab\u30fc\u30cd\u30eb\u30922.6.36\u4ee5\u4e0a\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u3057\u305f\u3044\n\u203byum \u3067\u306f2.6.32-573.3.1.el6 \u307e\u3067\u3057\u304b\u4e0a\u304c\u3089\u305a\n\n\n\n\u5909\u66f4\u524d\n\u5909\u66f4\u5f8c\n\n\n\n\n2.6.32-504.el6.x86_64\n2.6.36.4\u3000\u3000\u3000\u3000\u3000\u3000\u3000\n\n\n\n\n\u624b\u9806\n\n1. \u4e8b\u524d\u6e96\u5099\n\n1.1. \u73fe\u5728\u306e\u30ab\u30fc\u30cd\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n# uname -r\n2.6.32-504.el6.x86_64\n\n\n1.2. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n# cd /usr/local/src/\n# wget ftp://ftp.kernel.org/pub/linux/kernel/v2.6/linux-2.6.36.4.tar.bz2\n# ll\n\u5408\u8a08 68616\n-rw-r--r--. 1 root root 70262144  8\u6708 19 13:55 2015 linux-2.6.36.4.tar.bz2\n\n\n1.3. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u89e3\u51cd\n# tar xvfj linux-2.6.36.4.tar.bz2\n# ll\n\u5408\u8a08 68620\ndrwxrwxr-x. 23 root root     4096  2\u6708 18 08:14 2011 linux-2.6.36.4\n-rw-r--r--.  1 root root 70262144  8\u6708 19 13:55 2015 linux-2.6.36.4.tar.bz2\n\n\n2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n2.1. \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\n# cd linux-2.6.36.4\n\n\n2.2. \u73fe\u5728\u306e\u30ab\u30fc\u30cd\u30eb\u30d3\u30eb\u30c9\u8a2d\u5b9a\u5f15\u304d\u7d99\u304e\n# cp -p /boot/config-2.6.32-504.el6.x86_64 ./.config\n\n\n2.3. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n2.2. \u3067\u30b3\u30d4\u30fc\u3057\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u3044\u3066\u65b0\u3057\u3044\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n# make oldconfig\n  HOSTCC  scripts/basic/fixdep\n/bin/sh: gcc: \u30b3\u30de\u30f3\u30c9\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\nmake[1]: *** [scripts/basic/fixdep] \u30a8\u30e9\u30fc 127\nmake: *** [scripts_basic] \u30a8\u30e9\u30fc 2\n\n\n2.3.1. gcc \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngcc\u304c\u306a\u3044\u3068\u6012\u3089\u308c\u305f\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum -y install gcc\n\n\n2.4. \u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066\u518d\u5ea6\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n# make oldconfig\n  HOSTCC  scripts/basic/fixdep\n  HOSTCC  scripts/basic/docproc\n  HOSTCC  scripts/basic/hash\n  HOSTCC  scripts/kconfig/conf.o\n  HOSTCC  scripts/kconfig/kxgettext.o\n  SHIPPED scripts/kconfig/zconf.tab.c\n  SHIPPED scripts/kconfig/lex.zconf.c\n  SHIPPED scripts/kconfig/zconf.hash.c\n  HOSTCC  scripts/kconfig/zconf.tab.o\n  HOSTLD  scripts/kconfig/conf\n...\u7701\u7565\n\n\n2.5. \u30b3\u30f3\u30d1\u30a4\u30eb\n\u203b\u3053\u3053\u304c\u3081\u3063\u3061\u3083\u6642\u9593\u304b\u304b\u308a\u307e\u3057\u305f\n# make\nscripts/kconfig/conf --silentoldconfig arch/x86/Kconfig\n  CHK     include/linux/version.h\n  UPD     include/linux/version.h\n  CHK     include/generated/utsrelease.h\n  UPD     include/generated/utsrelease.h\n  CC      kernel/bounds.s\n  GEN     include/generated/bounds.h\n  CC      arch/x86/kernel/asm-offsets.s\n  GEN     include/generated/asm-offsets.h\n  CALL    scripts/checksyscalls.sh\n...\u7701\u7565\n\n\n2.6. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# make modules_install\n\n\n2.7. \u30ab\u30fc\u30cd\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u203b\u306a\u3093\u304b\u8272\u3005ERROR\u3063\u3066\u306a\u3063\u3066\u308b\u3051\u3069\u5927\u4e08\u592b\u306a\u306e\u3060\u308d\u3046\u304b\uff1f\uff57\n# make install\nsh /usr/local/src/linux-2.6.36.4/arch/x86/boot/install.sh 2.6.36.4 arch/x86/boot/bzImage \\\n        System.map \"/boot\"\nERROR: modinfo: could not find module nf_defrag_ipv6\nERROR: modinfo: could not find module vsock\nERROR: modinfo: could not find module vmware_balloon\nERROR: modinfo: could not find module vmci\n\n\n3. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u78ba\u8a8d\n\n3.1. /boot \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u78ba\u8a8d\n# ll /boot/\n\u5408\u8a08 109652\nlrwxrwxrwx. 1 root root       25  8\u6708 19 15:15 2015 System.map -> /boot/System.map-2.6.36.4\n-rw-r--r--. 1 root root  2544748 10\u6708 15 13:54 2014 System.map-2.6.32-504.el6.x86_64\n-rw-r--r--. 1 root root  2585052  7\u6708 26 02:34 2015 System.map-2.6.32-573.1.1.el6.x86_64\n-rw-r--r--. 1 root root  2585088  8\u6708 14 08:25 2015 System.map-2.6.32-573.3.1.el6.x86_64\n-rw-r--r--. 1 root root  2140702  8\u6708 19 15:15 2015 System.map-2.6.36.4\n-rw-r--r--. 1 root root   106308 10\u6708 15 13:54 2014 config-2.6.32-504.el6.x86_64\n-rw-r--r--. 1 root root   107138  7\u6708 26 02:34 2015 config-2.6.32-573.1.1.el6.x86_64\n-rw-r--r--. 1 root root   107138  8\u6708 14 08:25 2015 config-2.6.32-573.3.1.el6.x86_64\ndrwxr-xr-x. 3 root root     1024  8\u6708 11 14:51 2015 efi\ndrwxr-xr-x. 2 root root     1024  8\u6708 19 15:15 2015 grub\n-rw-------. 1 root root 19194026  8\u6708 11 15:11 2015 initramfs-2.6.32-504.el6.x86_64.img\n-rw-------. 1 root root 24877833  8\u6708 11 17:38 2015 initramfs-2.6.32-573.1.1.el6.x86_64.img\n-rw-------. 1 root root 24896551  8\u6708 19 13:44 2015 initramfs-2.6.32-573.3.1.el6.x86_64.img\n-rw-------. 1 root root 10641846  8\u6708 19 15:15 2015 initramfs-2.6.36.4.img\n-rw-------. 1 root root  5481545  8\u6708 11 17:35 2015 initrd-2.6.32-504.el6.x86_64kdump.img\ndrwx------. 2 root root    12288  8\u6708 11 14:33 2015 lost+found\n-rw-r--r--. 1 root root   200191 10\u6708 15 13:55 2014 symvers-2.6.32-504.el6.x86_64.gz\n-rw-r--r--. 1 root root   205998  7\u6708 26 02:35 2015 symvers-2.6.32-573.1.1.el6.x86_64.gz\n-rw-r--r--. 1 root root   205998  8\u6708 14 08:25 2015 symvers-2.6.32-573.3.1.el6.x86_64.gz\nlrwxrwxrwx. 1 root root       22  8\u6708 19 15:15 2015 vmlinuz -> /boot/vmlinuz-2.6.36.4\n-rwxr-xr-x. 1 root root  4152336 10\u6708 15 13:54 2014 vmlinuz-2.6.32-504.el6.x86_64\n-rwxr-xr-x. 1 root root  4220816  7\u6708 26 02:34 2015 vmlinuz-2.6.32-573.1.1.el6.x86_64\n-rwxr-xr-x. 1 root root  4221776  8\u6708 14 08:25 2015 vmlinuz-2.6.32-573.3.1.el6.x86_64\n-rw-r--r--. 1 root root  3758512  8\u6708 19 15:15 2015 vmlinuz-2.6.36.4\n\n\n3.2. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u78ba\u8a8d\n# ll /lib/modules/\n\u5408\u8a08 16\ndrwxr-xr-x. 8 root root 4096  8\u6708 11 15:10 2015 2.6.32-504.el6.x86_64\ndrwxr-xr-x. 7 root root 4096  8\u6708 11 17:37 2015 2.6.32-573.1.1.el6.x86_64\ndrwxr-xr-x. 7 root root 4096  8\u6708 19 13:43 2015 2.6.32-573.3.1.el6.x86_64\ndrwxr-xr-x. 3 root root 4096  8\u6708 19 15:15 2015 2.6.36.4\n\n\n3.3. grub.conf \u306e\u78ba\u8a8d\n\ngrub.conf\n# cat /etc/grub.conf\n# grub.conf generated by anaconda\n#\n# Note that you do not have to rerun grub after making changes to this file\n# NOTICE:  You have a /boot partition.  This means that\n#          all kernel and initrd paths are relative to /boot/, eg.\n#          root (hd0,0)\n#          kernel /vmlinuz-version ro root=/dev/mapper/vg_lb01-lv_root\n#          initrd /initrd-[generic-]version.img\n#boot=/dev/sda\ndefault=1\ntimeout=5\nsplashimage=(hd0,0)/grub/splash.xpm.gz\nhiddenmenu\ntitle CentOS (2.6.36.4)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.36.4 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.36.4.img\ntitle CentOS (2.6.32-573.3.1.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-573.3.1.el6.x86_64 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-573.3.1.el6.x86_64.img\ntitle CentOS (2.6.32-573.1.1.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-573.1.1.el6.x86_64 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-573.1.1.el6.x86_64.img\ntitle CentOS 6 (2.6.32-504.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-504.el6.x86_64 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-504.el6.x86_64.img\n\n\n\n4. \u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ab\u30fc\u30cd\u30eb\u3067\u8d77\u52d5\n\n4.1. \u518d\u8d77\u52d5\n# reboot\n\n\n4.2. \u65b0\u3057\u3044\u30ab\u30fc\u30cd\u30eb\u306e\u9078\u629e\nCentOS (2.6.36.4) \u3092\u9078\u629e\u3059\u308b\n\n\n4.3. \u30ab\u30fc\u30cd\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u78ba\u8a8d\n# uname -r\n2.6.36.4\n\n\n4.4. \u30c7\u30d5\u30a9\u30eb\u30c8\u8d77\u52d5\u30ab\u30fc\u30cd\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a2d\u5b9a\n\u4eca\u5f8c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8d77\u52d5\u3092\u30ab\u30fc\u30cd\u30eb2.6.36.4\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\n\n\n\n\u5909\u66f4\u524d\n\u5909\u66f4\u5f8c\n\n\n\n\ndefault=1\ndefault=0\n\n\n\n\ngrub.conf\n# vim /etc/grub.conf\ndefault=0\n...\u7701\u7565\n\n\n\n\u5f8c\u8a18\n\u308f\u308a\u3068\u3059\u3093\u306a\u308a\u3067\u304d\u3066\u3088\u304b\u3063\u305f\uff01\n\u5f8c\u306fSNAT\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u304b\u3069\u3046\u304b\u304c\u554f\u984c\u3002\u3002\u3002\nmake module_install\u306e\u30b3\u30de\u30f3\u30c9\u304c\u629c\u3051\u3066\u3044\u305f\u306e\u3067\u8ffd\u8a18\u3057\u307e\u3057\u305forz\n#\u7d4c\u7def\n`ipvsadm` + `iptables` \u3067SNAT\u3067\u304d\u308bLB\u3092\u69cb\u7bc9\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30ab\u30fc\u30cd\u30eb\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u5fc5\u8981\u307d\u304b\u3063\u305f\u306e\u3067\u3001\u3084\u3063\u305f\u3053\u3068\u306a\u3044\u3057\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n#\u74b0\u5883\n* CentOS6.7 64bit\n* VMware ESXi 5.5\n\n#\u3084\u308a\u305f\u3044\u3053\u3068\n\u30ab\u30fc\u30cd\u30eb\u30922.6.36\u4ee5\u4e0a\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u3057\u305f\u3044\n\u203byum \u3067\u306f2.6.32-573.3.1.el6 \u307e\u3067\u3057\u304b\u4e0a\u304c\u3089\u305a\n\n|\u5909\u66f4\u524d|\u5909\u66f4\u5f8c|\n|:--:|:--:|\n|2.6.32-504.el6.x86_64|2.6.36.4\u3000\u3000\u3000\u3000\u3000\u3000\u3000|\n\n#\u624b\u9806\n##1. \u4e8b\u524d\u6e96\u5099\n###1.1. \u73fe\u5728\u306e\u30ab\u30fc\u30cd\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n\n```shell-session\n# uname -r\n2.6.32-504.el6.x86_64\n```\n\n###1.2. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```shell-session\n# cd /usr/local/src/\n# wget ftp://ftp.kernel.org/pub/linux/kernel/v2.6/linux-2.6.36.4.tar.bz2\n# ll\n\u5408\u8a08 68616\n-rw-r--r--. 1 root root 70262144  8\u6708 19 13:55 2015 linux-2.6.36.4.tar.bz2\n```\n\n###1.3. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u89e3\u51cd\n\n```shell-session\n# tar xvfj linux-2.6.36.4.tar.bz2\n# ll\n\u5408\u8a08 68620\ndrwxrwxr-x. 23 root root     4096  2\u6708 18 08:14 2011 linux-2.6.36.4\n-rw-r--r--.  1 root root 70262144  8\u6708 19 13:55 2015 linux-2.6.36.4.tar.bz2\n```\n\n##2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n###2.1. \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\n\n```shell-session\n# cd linux-2.6.36.4\n```\n\n###2.2. \u73fe\u5728\u306e\u30ab\u30fc\u30cd\u30eb\u30d3\u30eb\u30c9\u8a2d\u5b9a\u5f15\u304d\u7d99\u304e\n\n```shell-session\n# cp -p /boot/config-2.6.32-504.el6.x86_64 ./.config\n```\n\n###2.3. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n2.2. \u3067\u30b3\u30d4\u30fc\u3057\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u3044\u3066\u65b0\u3057\u3044\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n```shell-session\n# make oldconfig\n  HOSTCC  scripts/basic/fixdep\n/bin/sh: gcc: \u30b3\u30de\u30f3\u30c9\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\nmake[1]: *** [scripts/basic/fixdep] \u30a8\u30e9\u30fc 127\nmake: *** [scripts_basic] \u30a8\u30e9\u30fc 2\n```\n\n####2.3.1. gcc \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngcc\u304c\u306a\u3044\u3068\u6012\u3089\u308c\u305f\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session\n# yum -y install gcc\n```\n\n###2.4. \u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066\u518d\u5ea6\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\n```shell-session\n# make oldconfig\n  HOSTCC  scripts/basic/fixdep\n  HOSTCC  scripts/basic/docproc\n  HOSTCC  scripts/basic/hash\n  HOSTCC  scripts/kconfig/conf.o\n  HOSTCC  scripts/kconfig/kxgettext.o\n  SHIPPED scripts/kconfig/zconf.tab.c\n  SHIPPED scripts/kconfig/lex.zconf.c\n  SHIPPED scripts/kconfig/zconf.hash.c\n  HOSTCC  scripts/kconfig/zconf.tab.o\n  HOSTLD  scripts/kconfig/conf\n...\u7701\u7565\n```\n\n###2.5. \u30b3\u30f3\u30d1\u30a4\u30eb\n\u203b\u3053\u3053\u304c\u3081\u3063\u3061\u3083\u6642\u9593\u304b\u304b\u308a\u307e\u3057\u305f\n\n```shell-session\n# make\nscripts/kconfig/conf --silentoldconfig arch/x86/Kconfig\n  CHK     include/linux/version.h\n  UPD     include/linux/version.h\n  CHK     include/generated/utsrelease.h\n  UPD     include/generated/utsrelease.h\n  CC      kernel/bounds.s\n  GEN     include/generated/bounds.h\n  CC      arch/x86/kernel/asm-offsets.s\n  GEN     include/generated/asm-offsets.h\n  CALL    scripts/checksyscalls.sh\n...\u7701\u7565\n```\n\n###2.6. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session\n# make modules_install\n```\n\n###2.7. \u30ab\u30fc\u30cd\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u203b\u306a\u3093\u304b\u8272\u3005ERROR\u3063\u3066\u306a\u3063\u3066\u308b\u3051\u3069\u5927\u4e08\u592b\u306a\u306e\u3060\u308d\u3046\u304b\uff1f\uff57\n\n```shell-session\n# make install\nsh /usr/local/src/linux-2.6.36.4/arch/x86/boot/install.sh 2.6.36.4 arch/x86/boot/bzImage \\\n\t\tSystem.map \"/boot\"\nERROR: modinfo: could not find module nf_defrag_ipv6\nERROR: modinfo: could not find module vsock\nERROR: modinfo: could not find module vmware_balloon\nERROR: modinfo: could not find module vmci\n```\n\n##3. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u78ba\u8a8d\n###3.1. /boot \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u78ba\u8a8d\n\n```shell-session\n# ll /boot/\n\u5408\u8a08 109652\nlrwxrwxrwx. 1 root root       25  8\u6708 19 15:15 2015 System.map -> /boot/System.map-2.6.36.4\n-rw-r--r--. 1 root root  2544748 10\u6708 15 13:54 2014 System.map-2.6.32-504.el6.x86_64\n-rw-r--r--. 1 root root  2585052  7\u6708 26 02:34 2015 System.map-2.6.32-573.1.1.el6.x86_64\n-rw-r--r--. 1 root root  2585088  8\u6708 14 08:25 2015 System.map-2.6.32-573.3.1.el6.x86_64\n-rw-r--r--. 1 root root  2140702  8\u6708 19 15:15 2015 System.map-2.6.36.4\n-rw-r--r--. 1 root root   106308 10\u6708 15 13:54 2014 config-2.6.32-504.el6.x86_64\n-rw-r--r--. 1 root root   107138  7\u6708 26 02:34 2015 config-2.6.32-573.1.1.el6.x86_64\n-rw-r--r--. 1 root root   107138  8\u6708 14 08:25 2015 config-2.6.32-573.3.1.el6.x86_64\ndrwxr-xr-x. 3 root root     1024  8\u6708 11 14:51 2015 efi\ndrwxr-xr-x. 2 root root     1024  8\u6708 19 15:15 2015 grub\n-rw-------. 1 root root 19194026  8\u6708 11 15:11 2015 initramfs-2.6.32-504.el6.x86_64.img\n-rw-------. 1 root root 24877833  8\u6708 11 17:38 2015 initramfs-2.6.32-573.1.1.el6.x86_64.img\n-rw-------. 1 root root 24896551  8\u6708 19 13:44 2015 initramfs-2.6.32-573.3.1.el6.x86_64.img\n-rw-------. 1 root root 10641846  8\u6708 19 15:15 2015 initramfs-2.6.36.4.img\n-rw-------. 1 root root  5481545  8\u6708 11 17:35 2015 initrd-2.6.32-504.el6.x86_64kdump.img\ndrwx------. 2 root root    12288  8\u6708 11 14:33 2015 lost+found\n-rw-r--r--. 1 root root   200191 10\u6708 15 13:55 2014 symvers-2.6.32-504.el6.x86_64.gz\n-rw-r--r--. 1 root root   205998  7\u6708 26 02:35 2015 symvers-2.6.32-573.1.1.el6.x86_64.gz\n-rw-r--r--. 1 root root   205998  8\u6708 14 08:25 2015 symvers-2.6.32-573.3.1.el6.x86_64.gz\nlrwxrwxrwx. 1 root root       22  8\u6708 19 15:15 2015 vmlinuz -> /boot/vmlinuz-2.6.36.4\n-rwxr-xr-x. 1 root root  4152336 10\u6708 15 13:54 2014 vmlinuz-2.6.32-504.el6.x86_64\n-rwxr-xr-x. 1 root root  4220816  7\u6708 26 02:34 2015 vmlinuz-2.6.32-573.1.1.el6.x86_64\n-rwxr-xr-x. 1 root root  4221776  8\u6708 14 08:25 2015 vmlinuz-2.6.32-573.3.1.el6.x86_64\n-rw-r--r--. 1 root root  3758512  8\u6708 19 15:15 2015 vmlinuz-2.6.36.4\n```\n\n###3.2. \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u78ba\u8a8d\n\n```shell-session\n# ll /lib/modules/\n\u5408\u8a08 16\ndrwxr-xr-x. 8 root root 4096  8\u6708 11 15:10 2015 2.6.32-504.el6.x86_64\ndrwxr-xr-x. 7 root root 4096  8\u6708 11 17:37 2015 2.6.32-573.1.1.el6.x86_64\ndrwxr-xr-x. 7 root root 4096  8\u6708 19 13:43 2015 2.6.32-573.3.1.el6.x86_64\ndrwxr-xr-x. 3 root root 4096  8\u6708 19 15:15 2015 2.6.36.4\n```\n\n###3.3. grub.conf \u306e\u78ba\u8a8d\n\n```shell-session:grub.conf\n# cat /etc/grub.conf\n# grub.conf generated by anaconda\n#\n# Note that you do not have to rerun grub after making changes to this file\n# NOTICE:  You have a /boot partition.  This means that\n#          all kernel and initrd paths are relative to /boot/, eg.\n#          root (hd0,0)\n#          kernel /vmlinuz-version ro root=/dev/mapper/vg_lb01-lv_root\n#          initrd /initrd-[generic-]version.img\n#boot=/dev/sda\ndefault=1\ntimeout=5\nsplashimage=(hd0,0)/grub/splash.xpm.gz\nhiddenmenu\ntitle CentOS (2.6.36.4)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.36.4 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.36.4.img\ntitle CentOS (2.6.32-573.3.1.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-573.3.1.el6.x86_64 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-573.3.1.el6.x86_64.img\ntitle CentOS (2.6.32-573.1.1.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-573.1.1.el6.x86_64 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-573.1.1.el6.x86_64.img\ntitle CentOS 6 (2.6.32-504.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-504.el6.x86_64 ro root=/dev/mapper/vg_lb01-lv_root rd_NO_LUKS rd_NO_MD rd_LVM_LV=vg_lb01/lv_swap crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=jp106 rd_LVM_LV=vg_lb01/lv_root LANG=ja_JP.UTF-8 rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-504.el6.x86_64.img\n```\n\n##4. \u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ab\u30fc\u30cd\u30eb\u3067\u8d77\u52d5\n###4.1. \u518d\u8d77\u52d5\n\n```shell-session\n# reboot\n```\n\n###4.2. \u65b0\u3057\u3044\u30ab\u30fc\u30cd\u30eb\u306e\u9078\u629e\nCentOS (2.6.36.4) \u3092\u9078\u629e\u3059\u308b\n\n![WS000409.png](https://qiita-image-store.s3.amazonaws.com/0/79134/866a86f1-6830-3bcc-ceac-d400f7da198e.png)\n\n###4.3. \u30ab\u30fc\u30cd\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u78ba\u8a8d\n\n```shell-session\n# uname -r\n2.6.36.4\n```\n\n###4.4. \u30c7\u30d5\u30a9\u30eb\u30c8\u8d77\u52d5\u30ab\u30fc\u30cd\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a2d\u5b9a\n\u4eca\u5f8c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8d77\u52d5\u3092\u30ab\u30fc\u30cd\u30eb2.6.36.4\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\n\n|\u5909\u66f4\u524d|\u5909\u66f4\u5f8c|\n|:--:|:--:|\n|default=1|default=0|\n\n```shell-session:grub.conf\n# vim /etc/grub.conf\ndefault=0\n...\u7701\u7565\n```\n\n#\u5f8c\u8a18\n\u308f\u308a\u3068\u3059\u3093\u306a\u308a\u3067\u304d\u3066\u3088\u304b\u3063\u305f\uff01\n\u5f8c\u306fSNAT\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u304b\u3069\u3046\u304b\u304c\u554f\u984c\u3002\u3002\u3002\n`make module_install`\u306e\u30b3\u30de\u30f3\u30c9\u304c\u629c\u3051\u3066\u3044\u305f\u306e\u3067\u8ffd\u8a18\u3057\u307e\u3057\u305forz\n", "tags": ["CentOS", "Linux", "kernel", "\u30ab\u30fc\u30cd\u30eb"]}