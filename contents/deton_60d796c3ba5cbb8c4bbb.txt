{"context": " More than 1 year has passed since last update.Emacs\u7b49\u3067\u3001\u6298\u308a\u8fd4\u3057\u3066\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u9577\u3044URL\u3092\u30b3\u30d4\u30fc\u3057\u305f\u3044\u5834\u5408\u3001\n\u6298\u308a\u8fd4\u3057\u3092\u793a\u3059\\\u3092\u624b\u3067\u6d88\u3059\u5fc5\u8981\u304c\u3042\u3063\u3066\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u3001\nscreen\u3067\u30b3\u30d4\u30fc\u3057\u305f\u6587\u5b57\u5217\u306b\u5bfe\u3057\u3066\u3001\\\u3092\u6d88\u3057\u3066\u884c\u3092\u9023\u7d50\u3059\u308b\u30d5\u30a3\u30eb\u30bf\u3092\u304b\u3051\u3066\u3001\n\u30da\u30fc\u30b9\u30c8\u3057\u3066\u305d\u306e\u307e\u307e\u4f7f\u3048\u308b\u5f62\u306b\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n(\u30da\u30fc\u30b9\u30c8\u5f8c\u306e\u7de8\u96c6\u304c\u5bb9\u6613\u306a\u30a8\u30c7\u30a3\u30bf\u4ee5\u5916\u306e\u3001)\n\u30b7\u30a7\u30eb\u30d7\u30ed\u30f3\u30d7\u30c8\u3084lynx/w3m\u306b\u30da\u30fc\u30b9\u30c8\u3057\u3066\u3001\n\u7de8\u96c6\u7121\u3057\u306b\u305d\u306e\u307e\u307e\u4f7f\u3046\u7528\u9014\u3092\u4e3b\u306b\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u7d99\u7d9a\u884c\u4ee5\u5916\u306b\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d5\u30a3\u30eb\u30bf\u3082\u4fbf\u5229\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30a8\u30c7\u30a3\u30bf\u8d77\u52d5\n\u6539\u884c\u3092\u524a\u9664\n\u6539\u884c\u3092\u30b9\u30da\u30fc\u30b9\u306b\u7f6e\u63db\n\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u524a\u9664\ngrep\u51fa\u529b\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3060\u3051\u62bd\u51fa\nURL\u62bd\u51fa\nHTML\u30bf\u30b0\u9664\u53bb\n\u5f15\u7528\u8a18\u53f7>\u3092\u8ffd\u52a0\n\n\n.screenrc\nscreen\u304b\u3089\u306f\u3001C-a g e\u3084C-a g +\u7b49\u3067\u5404\u30d5\u30a3\u30eb\u30bf\u3092\u9078\u3093\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n.screenrc\nbind g command -c buffilt\nbind -c buffilt \\\\ eval writebuf screen 'stuff \"scrbuf.sh rmwrap-emacs&&exit^M\"'\nbind -c buffilt > eval writebuf screen 'stuff \"scrbuf.sh rmwrap-vim&&exit^M\"'\nbind -c buffilt + eval writebuf screen 'stuff \"scrbuf.sh rmwrap-mutt&&exit^M\"'\nbind -c buffilt ^E eval writebuf screen 'stuff \"scrbuf.sh rmwrap-width&&exit^M\"'\nbind -c buffilt $ eval writebuf screen 'stuff \"scrbuf.sh picklastarg&&exit^M\"'\nbind -c buffilt ' ' eval writebuf screen 'stuff \"scrbuf.sh join-with-blank&&exit^M\"'\nbind -c buffilt e eval writebuf screen 'stuff \"scrbuf.sh edit&&exit^M\"'\nbind -c buffilt g eval writebuf screen 'stuff \"scrbuf.sh grep2l&&exit^M\"'\nbind -c buffilt h eval writebuf screen 'stuff \"scrbuf.sh rmhtmltag&&exit^M\"'\nbind -c buffilt i eval writebuf screen 'stuff \"scrbuf.sh rmindent&&exit^M\"'\nbind -c buffilt j eval writebuf screen 'stuff \"scrbuf.sh join&&exit^M\"'\nbind -c buffilt q eval writebuf screen 'stuff \"scrbuf.sh quote&&exit^M\"'\nbind -c buffilt u eval writebuf screen 'stuff \"scrbuf.sh pickurl&&exit^M\"'\n\n\n\nscrbuf.sh: \u30da\u30fc\u30b9\u30c8\u30d0\u30c3\u30d5\u30a1\u306e\u5185\u5bb9\u3092\u7f6e\u63db\nscreen\u3067\u30b3\u30d4\u30fc\u3057\u305f\u30da\u30fc\u30b9\u30c8\u30d0\u30c3\u30d5\u30a1\u5185\u5bb9\u3092\u3001\u5404\u30d5\u30a3\u30eb\u30bf\u306b\u304b\u3051\u3066\u3001\u30d5\u30a3\u30eb\u30bf\u51fa\u529b\u5185\u5bb9\u3092\u30da\u30fc\u30b9\u30c8\u30d0\u30c3\u30d5\u30a1\u306b\u30bb\u30c3\u30c8\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u3002\nhttps://gist.github.com/deton/5027300222758d2ed12b\n\nscrbuf.sh\n#!/bin/sh\n# apply filter and overwrite screen-xchg file\nSRC=~/tmp/screen-xchg\nDEST=~/tmp/screen-xchg2\ncase \"$1\" in\n    rmwrap-emacs)\n        rmwrap-emacs.awk $SRC >$DEST\n        ;;\n    rmwrap-vim)\n        rmwrap-vim.awk $SRC >$DEST\n        ;;\n    rmwrap-mutt)\n        rmwrap-mutt.awk $SRC >$DEST\n        ;;\n    rmwrap-width)\n        vim -X --noplugin -e -s <~/lib/scrbuf/rmwrap-width.vim $SRC >$DEST\n        ;;\n    edit)\n        cp $SRC $DEST && $EDITOR $DEST\n        ;;\n    join)\n        tr -d '\\n' <$SRC >$DEST\n        ;;\n    join-with-blank)\n        tr '\\n' ' ' <$SRC >$DEST\n        ;;\n    rmindent)\n        # \u30e1\u30fc\u30eb\u5185\u3067URL\u3092\u30a4\u30f3\u30c7\u30f3\u30c8\u3059\u308b\u969b\u306b\u4f7f\u308f\u308c\u308b\u5168\u89d2\u7a7a\u767d\u3092\u9664\u53bb\n        sed -e 's/^[\u3000 ]*//' $SRC >$DEST\n        ;;\n    grep2l)\n        awk '/[[:graph:]]:/{print substr($0,1,index($0,\":\")-1)}' $SRC >$DEST\n        ;;\n    pickurl)\n        sed -e 's/.*\\(https\\?:\\/\\/[-a-zA-Z0-9_\\.@:\\/~#!?\\&=+%]\\+\\).*$/\\1/' $SRC >$DEST\n        ;;\n        picklastarg)\n                awk '{print $NF}' $SRC >$DEST\n                ;;\n    rmhtmltag)\n        sed -e 's/<[^>]*>//g' -e 's/\\&nbsp;/ /g' -e 's/\\&quot;/\"/g' -e 's/^ *//' $SRC >$DEST\n        ;;\n    quote)\n        # copy from lynx to memo with quote(> )\n        # (remove numbered label from link like \"[32]link\")\n        sed -e 's/\\[[0-9][0-9]*\\]//g' $SRC | nkf -f74 -w -m0 | sed -e 's/^/> /' >$DEST\n        ;;\n    *)\n        echo \"$0: unknown filter: $1\"\n        exit 2\n        ;;\n\nesac\nEXITCODE=$?\nif [ $EXITCODE -ne 0 ]; then\n    echo \"$0: filter($1) exit code is not zero: $EXITCODE\"\n    exit 1\nfi\n# \u30b7\u30a7\u30eb\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u969b\u306b\u4fbf\u5229\u306a\u3088\u3046\u306b\u3001\u6700\u5f8c\u306e\u6539\u884c\u3092\u524a\u9664\u3002\nprintf %s \"$(cat $DEST)\" > $SRC\nscreen -X eval readbuf 'echo \"\"'\n\n# \u8cbc\u308a\u4ed8\u3051\u308b\u5185\u5bb9\u304c\u9577\u3044\u3068\u8cbc\u308a\u4ed8\u3051\u3067\u304d\u306a\u3044\n#mv $DEST $SRC\n#screen -X register . \"$(cat $SRC|sed -e 's/\\$/\\\\$/g')\"\n\n\n\n\u5404\u30d5\u30a3\u30eb\u30bf\u30b9\u30af\u30ea\u30d7\u30c8\n(\u306a\u304a\u3001screen\u4ee5\u5916\u3067\u3082\u3001\u7aef\u672b\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u7b49\u3067\u8868\u793a\u6587\u5b57\u5217\u3092\u30b3\u30d4\u30fc\u3059\u308b\u969b\u306b\u3082\u3001\u540c\u3058\u30d5\u30a3\u30eb\u30bf\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u53ef\u80fd\u3002)\n\n\u30a8\u30c7\u30a3\u30bf\u8d77\u52d5\n\n\\\u3067\u8868\u793a\u3055\u308c\u305f\u7d99\u7d9a\u884c\u3092\u9023\u7d50\n\nrmwrap-emacs.awk\n#!/usr/bin/awk -f\n# remove emacs wrap markers of long line.\n/\\\\$/ {\n    sub(/\\\\$/, \"\");\n    line = rm2ndmark($0, line);\n    line = line $0;\n    next;\n}\nline != \"\" {\n    line = rm2ndmark($0, line);\n    printf(\"%s%s\\n\", line, $0);\n    line = \"\";\n    next;\n}\n{\n    print;\n}\nEND {\n    if (line != \"\") {\n        print line;\n    }\n}\n\n# remove second '\\' for multi-byte\nfunction rm2ndmark(curline, prevline) {\n    if (curline ~ /^[^ -~[:cntrl:]]/ && prevline ~ /\\\\$/) {\n        sub(/\\\\$/, \"\", prevline);\n    }\n    return prevline;\n}\n\n\n\n>\u3067\u8868\u793a\u3055\u308c\u305f\u7d99\u7d9a\u884c\u3092\u9023\u7d50\n\nrmwrap-vim.awk\n#!/usr/bin/awk -f\n# remove vim wrap markers of long line.\n/>$/ {\n    line = rmmark($0, line);\n    line = line $0;\n    next;\n}\nline != \"\" {\n    line = rmmark($0, line);\n    printf(\"%s%s\\n\", line, $0);\n    line = \"\";\n    next;\n}\n{\n    print;\n}\nEND {\n    if (line != \"\") {\n        print line;\n    }\n}\n\n# remove wrap marker '>' for multi-byte\nfunction rmmark(curline, prevline) {\n    if (curline ~ /^[^ -~[:cntrl:]]/ && prevline ~ />$/) {\n        sub(/>$/, \"\", prevline);\n    }\n    return prevline;\n}\n\n\n\n+\u3067\u8868\u793a\u3055\u308c\u305f\u7d99\u7d9a\u884c\u3092\u9023\u7d50\n\nrmwrap-mutt.awk\n#!/usr/bin/awk -f\n# remove mutt wrap markers of long line.\n/^+/ {\n    sub(/^+/, \"\");\n    line = line $0;\n    next;\n}\nline != \"\" {\n    print line;\n    # FALLTHRU\n}\n{\n    line = $0;\n}\nEND {\n    if (line != \"\") {\n        print line;\n    }\n}\n\n\n\n\u30a6\u30a3\u30f3\u30c9\u30a6\u5e45\u3044\u3063\u3071\u3044\u306e\u884c\u306e\u6b21\u884c\u304c\u6700\u521d\u306e\u30ab\u30e9\u30e0\u304b\u3089\u59cb\u307e\u3063\u3066\u3044\u305f\u3089\u7d99\u7d9a\u884c\u3068\u307f\u306a\u3057\u3066\u9023\u7d50\n\u30a6\u30a3\u30f3\u30c9\u30a6\u5e45\u3044\u3063\u3071\u3044\u304b\u3069\u3046\u304b\u306e\u5224\u5b9a\u3092\u884c\u3046\u305f\u3081\u3001vim\u306estrdisplaywidth()\u3092\u4f7f\u7528\u3002\n\nrmwrap-width.vim\nfunction! JoinByWidth(start, end, width)\n  execute a:end\n  let lnum = line('.')\n  let curline = getline(lnum)\n  while lnum > a:start\n    -\n    let lnum -= 1\n    let prevline = getline('.')\n    let prevwidth = strdisplaywidth(prevline, 1)\n    if curline =~ '^\\S' && prevwidth == a:width\n      j!\n    elseif strwidth(matchstr(curline, '.')) > 1 && prevwidth == a:width - 1\n      \" wide char\n      j!\n    \"elseif curline =~ '^ \\S' && prevwidth == a:width\n    \"  j!\n    \"elseif curline =~ '^\\S' && prevwidth == a:width - 1\n    \"  j!\n    endif\n    let curline = prevline\n  endwhile\nendfunction\ncall JoinByWidth(1, '$', winwidth(0))\n1,$p\n\n\n\n\u6539\u884c\u3092\u524a\u9664\n\u30b3\u30d4\u30fc\u3059\u308b\u969b\u306b\u3001\u884c\u3092\u9023\u7d50\u3059\u308b\u30e2\u30fc\u30c9\u306b\u3057\u305d\u3053\u306d\u3066\u30b3\u30d4\u30fc\u3057\u3066\u3057\u307e\u3063\u305f\u304c\u3001\u884c\u3092\u9023\u7d50\u3057\u3066\u4f7f\u3044\u305f\u3044\u5834\u5408\u7528\u3002\n\n\u6539\u884c\u3092\u30b9\u30da\u30fc\u30b9\u306b\u7f6e\u63db\nls -lrt\u3057\u3066\u6700\u5f8c\u306e\u6570\u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3068\u3057\u3066\u4f7f\u3044\u305f\u3044\u5834\u5408\u7528\n(ls -rt|tail -4\u7b49\u3092\u5b9f\u884c\u3057\u76f4\u3059\u304b\u308f\u308a\u306b)\n\n\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u524a\u9664\n\u30e1\u30fc\u30eb\u4e2d\u3067URL\u3092\u30a4\u30f3\u30c7\u30f3\u30c8\u3059\u308b\u306e\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u5168\u89d2\u7a7a\u767d\u3092\u524a\u9664\u3059\u308b\u7528\u9014\u3002\nscreen\u306e\u30b3\u30d4\u30fc\u3067URL\u5148\u982d\u307e\u3067\u79fb\u52d5\u3057\u3066\u30b3\u30d4\u30fc$\u3059\u308b\u3088\u308a\u3001\nY\u3084y\u3067\u884c\u5358\u4f4d\u3067\u30b3\u30d4\u30fc\u3059\u308b\u65b9\u304c\u697d\u306a\u6c17\u304c\u3059\u308b\u306e\u3067\u3002\n\u3042\u308b\u3044\u306f\u3001lynx\u3067\u3001\u6574\u5f62\u3057\u3066\u30a4\u30f3\u30c7\u30f3\u30c8\u4ed8\u304d\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5185\u5bb9\u3092\u3001\n\u77e9\u5f62\u9078\u629e\u3057\u306a\u3044\u3067\u30b3\u30d4\u30fc\u3057\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u306b\u3001\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u524a\u9664\u3059\u308b\u7528\u9014\u3002\n\ngrep\u51fa\u529b\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3060\u3051\u62bd\u51fa\n\u666e\u901a\u306bgrep\u3057\u305f\u7d50\u679c\u304b\u3089\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u3060\u3051\u30b3\u30d4\u30fc\u3059\u308b\u304b\u308f\u308a\u306b\u3001\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001:\u3088\u308a\u524d\u3092\u30d5\u30a3\u30eb\u30bf\u3067\u62bd\u51fa\u3002\ngrep\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u3001grep -l\u3057\u76f4\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3002\n\u4f8b\u3048\u3070grep\u3057\u305f\u7d50\u679c\u306e\u30d5\u30a1\u30a4\u30eb\u3092less\u3067\u898b\u308b\u5834\u5408\u5411\u3051\u3002\n\u5358\u306bgrep -l\u3057\u76f4\u3059\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u3051\u3070OK\u3002\n\n.bashrc\nfunction lg() {\n        less $($(history -p '!-1:0') -l $(history -p '!*'))\n}\n\n\n\nURL\u62bd\u51fa\n\u30e1\u30fc\u30eb\u3084HTML\u30bd\u30fc\u30b9\u8868\u793a\u3084Markdown\u8868\u793a\u304b\u3089\u3001URL\u306e\u5148\u982d\u3068\u672b\u5c3e\u307e\u3067\u30ab\u30fc\u30bd\u30eb\u79fb\u52d5\u3057\u3066\u30b3\u30d4\u30fc\u3059\u308b\u304b\u308f\u308a\u306b\u3001\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001URL\u3092\u62bd\u51fa\u3002\n\n\u6700\u5f8c\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u62bd\u51fa\n\u30b7\u30a7\u30eb\u3067!$\u306f\u3088\u304f\u4f7f\u3046\u306e\u3067\u540c\u69d8\u306b\u3002\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001\u6700\u5f8c\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u62bd\u51fa\u3002\n\nHTML\u30bf\u30b0\u9664\u53bb\nHTML\u30bd\u30fc\u30b9\u304b\u3089\u306e\u30b3\u30d4\u30fc\u6642\u306b\u3001\u5bfe\u8c61\u6587\u5b57\u5217\u306e\u5148\u982d\u3068\u672b\u5c3e\u305d\u308c\u305e\u308c\u306b\u30ab\u30fc\u30bd\u30eb\u3092\u79fb\u52d5\u3057\u3066\u30de\u30fc\u30af\u3092\u4ed8\u3051\u308b\u306e\u306f\u9762\u5012\u306a\u306e\u3067\u3001\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001HTML\u30bf\u30b0\u3092\u9664\u53bb\u3002\n\n\u5f15\u7528\u8a18\u53f7>\u3092\u8ffd\u52a0\nlynx\u3067\u8868\u793a\u4e2d\u306e\u8a18\u4e8b\u306e\u4e00\u90e8\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\n\u30e1\u30e2\u306b\u5f15\u7528\u8a18\u53f7\u3092\u4ed8\u3051\u3066\u30da\u30fc\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u5411\u3051\u3002\n\n\u53c2\u8003: \u5404\u30a2\u30d7\u30ea\u3067\u306e\u7d99\u7d9a\u884c\u306e\u8868\u793a\n\nEmacs\n\\\u3082\u3057\u304f\u306f\u6b21\u306e\u6587\u5b57\u304c\u65e5\u672c\u8a9e\u7b49\u306e\u5834\u5408\\\\\u3002\nhttp://www.emacswiki.org/emacs/LineWrap\n\nVim\n\u6b21\u306e\u6587\u5b57\u304c\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u306e\u5834\u5408>\u3002\n\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u7d99\u7d9a\u884c\u304b\u3069\u3046\u304b\u4e0d\u660e\u3002\n\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3068\u7d99\u7d9a\u884c\u304b\u3069\u3046\u304b\u306f\u8868\u793a\u3092\u898b\u3066\u308f\u304b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u666e\u6bb5\u306f\u3057\u3066\u306a\u3044\u306e\u3067\u3002\n\n.vimrc\nse nu\n\n\n\nmutt\u3084lynx\u306eHTML\u30bd\u30fc\u30b9\u8868\u793a\n\u7d99\u7d9a\u884c\u306e\u884c\u982d\u306b+\u3002\nmutt\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3053\u3068\u3067+\u8ffd\u52a0\u3092\u30aa\u30d5\u306b\u3067\u304d\u307e\u3059\u3002\n\n.muttrc\nset markers=no\n\n\nEmacs\u7b49\u3067\u3001\u6298\u308a\u8fd4\u3057\u3066\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u9577\u3044URL\u3092\u30b3\u30d4\u30fc\u3057\u305f\u3044\u5834\u5408\u3001\n\u6298\u308a\u8fd4\u3057\u3092\u793a\u3059`\\`\u3092\u624b\u3067\u6d88\u3059\u5fc5\u8981\u304c\u3042\u3063\u3066\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u3001\nscreen\u3067\u30b3\u30d4\u30fc\u3057\u305f\u6587\u5b57\u5217\u306b\u5bfe\u3057\u3066\u3001`\\`\u3092\u6d88\u3057\u3066\u884c\u3092\u9023\u7d50\u3059\u308b\u30d5\u30a3\u30eb\u30bf\u3092\u304b\u3051\u3066\u3001\n\u30da\u30fc\u30b9\u30c8\u3057\u3066\u305d\u306e\u307e\u307e\u4f7f\u3048\u308b\u5f62\u306b\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\n(\u30da\u30fc\u30b9\u30c8\u5f8c\u306e\u7de8\u96c6\u304c\u5bb9\u6613\u306a\u30a8\u30c7\u30a3\u30bf\u4ee5\u5916\u306e\u3001)\n\u30b7\u30a7\u30eb\u30d7\u30ed\u30f3\u30d7\u30c8\u3084lynx/w3m\u306b\u30da\u30fc\u30b9\u30c8\u3057\u3066\u3001\n\u7de8\u96c6\u7121\u3057\u306b\u305d\u306e\u307e\u307e\u4f7f\u3046\u7528\u9014\u3092\u4e3b\u306b\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u7d99\u7d9a\u884c\u4ee5\u5916\u306b\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d5\u30a3\u30eb\u30bf\u3082\u4fbf\u5229\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n* \u30a8\u30c7\u30a3\u30bf\u8d77\u52d5\n* \u6539\u884c\u3092\u524a\u9664\n* \u6539\u884c\u3092\u30b9\u30da\u30fc\u30b9\u306b\u7f6e\u63db\n* \u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u524a\u9664\n* grep\u51fa\u529b\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3060\u3051\u62bd\u51fa\n* URL\u62bd\u51fa\n* HTML\u30bf\u30b0\u9664\u53bb\n* \u5f15\u7528\u8a18\u53f7`> `\u3092\u8ffd\u52a0\n\n### .screenrc\nscreen\u304b\u3089\u306f\u3001`C-a g e`\u3084`C-a g +`\u7b49\u3067\u5404\u30d5\u30a3\u30eb\u30bf\u3092\u9078\u3093\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```:.screenrc\nbind g command -c buffilt\nbind -c buffilt \\\\ eval writebuf screen 'stuff \"scrbuf.sh rmwrap-emacs&&exit^M\"'\nbind -c buffilt > eval writebuf screen 'stuff \"scrbuf.sh rmwrap-vim&&exit^M\"'\nbind -c buffilt + eval writebuf screen 'stuff \"scrbuf.sh rmwrap-mutt&&exit^M\"'\nbind -c buffilt ^E eval writebuf screen 'stuff \"scrbuf.sh rmwrap-width&&exit^M\"'\nbind -c buffilt $ eval writebuf screen 'stuff \"scrbuf.sh picklastarg&&exit^M\"'\nbind -c buffilt ' ' eval writebuf screen 'stuff \"scrbuf.sh join-with-blank&&exit^M\"'\nbind -c buffilt e eval writebuf screen 'stuff \"scrbuf.sh edit&&exit^M\"'\nbind -c buffilt g eval writebuf screen 'stuff \"scrbuf.sh grep2l&&exit^M\"'\nbind -c buffilt h eval writebuf screen 'stuff \"scrbuf.sh rmhtmltag&&exit^M\"'\nbind -c buffilt i eval writebuf screen 'stuff \"scrbuf.sh rmindent&&exit^M\"'\nbind -c buffilt j eval writebuf screen 'stuff \"scrbuf.sh join&&exit^M\"'\nbind -c buffilt q eval writebuf screen 'stuff \"scrbuf.sh quote&&exit^M\"'\nbind -c buffilt u eval writebuf screen 'stuff \"scrbuf.sh pickurl&&exit^M\"'\n```\n\n### scrbuf.sh: \u30da\u30fc\u30b9\u30c8\u30d0\u30c3\u30d5\u30a1\u306e\u5185\u5bb9\u3092\u7f6e\u63db\nscreen\u3067\u30b3\u30d4\u30fc\u3057\u305f\u30da\u30fc\u30b9\u30c8\u30d0\u30c3\u30d5\u30a1\u5185\u5bb9\u3092\u3001\u5404\u30d5\u30a3\u30eb\u30bf\u306b\u304b\u3051\u3066\u3001\u30d5\u30a3\u30eb\u30bf\u51fa\u529b\u5185\u5bb9\u3092\u30da\u30fc\u30b9\u30c8\u30d0\u30c3\u30d5\u30a1\u306b\u30bb\u30c3\u30c8\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u3002\n\nhttps://gist.github.com/deton/5027300222758d2ed12b\n\n```sh:scrbuf.sh\n#!/bin/sh\n# apply filter and overwrite screen-xchg file\nSRC=~/tmp/screen-xchg\nDEST=~/tmp/screen-xchg2\ncase \"$1\" in\n\trmwrap-emacs)\n\t\trmwrap-emacs.awk $SRC >$DEST\n\t\t;;\n\trmwrap-vim)\n\t\trmwrap-vim.awk $SRC >$DEST\n\t\t;;\n\trmwrap-mutt)\n\t\trmwrap-mutt.awk $SRC >$DEST\n\t\t;;\n\trmwrap-width)\n\t\tvim -X --noplugin -e -s <~/lib/scrbuf/rmwrap-width.vim $SRC >$DEST\n\t\t;;\n\tedit)\n\t\tcp $SRC $DEST && $EDITOR $DEST\n\t\t;;\n\tjoin)\n\t\ttr -d '\\n' <$SRC >$DEST\n\t\t;;\n\tjoin-with-blank)\n\t\ttr '\\n' ' ' <$SRC >$DEST\n\t\t;;\n\trmindent)\n\t\t# \u30e1\u30fc\u30eb\u5185\u3067URL\u3092\u30a4\u30f3\u30c7\u30f3\u30c8\u3059\u308b\u969b\u306b\u4f7f\u308f\u308c\u308b\u5168\u89d2\u7a7a\u767d\u3092\u9664\u53bb\n\t\tsed -e 's/^[\u3000 ]*//' $SRC >$DEST\n\t\t;;\n\tgrep2l)\n\t\tawk '/[[:graph:]]:/{print substr($0,1,index($0,\":\")-1)}' $SRC >$DEST\n\t\t;;\n\tpickurl)\n\t\tsed -e 's/.*\\(https\\?:\\/\\/[-a-zA-Z0-9_\\.@:\\/~#!?\\&=+%]\\+\\).*$/\\1/' $SRC >$DEST\n\t\t;;\n        picklastarg)\n                awk '{print $NF}' $SRC >$DEST\n                ;;\n\trmhtmltag)\n\t\tsed -e 's/<[^>]*>//g' -e 's/\\&nbsp;/ /g' -e 's/\\&quot;/\"/g' -e 's/^ *//' $SRC >$DEST\n\t\t;;\n\tquote)\n\t\t# copy from lynx to memo with quote(> )\n\t\t# (remove numbered label from link like \"[32]link\")\n\t\tsed -e 's/\\[[0-9][0-9]*\\]//g' $SRC | nkf -f74 -w -m0 | sed -e 's/^/> /' >$DEST\n\t\t;;\n\t*)\n\t\techo \"$0: unknown filter: $1\"\n\t\texit 2\n\t\t;;\n\nesac\nEXITCODE=$?\nif [ $EXITCODE -ne 0 ]; then\n\techo \"$0: filter($1) exit code is not zero: $EXITCODE\"\n\texit 1\nfi\n# \u30b7\u30a7\u30eb\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u969b\u306b\u4fbf\u5229\u306a\u3088\u3046\u306b\u3001\u6700\u5f8c\u306e\u6539\u884c\u3092\u524a\u9664\u3002\nprintf %s \"$(cat $DEST)\" > $SRC\nscreen -X eval readbuf 'echo \"\"'\n\n# \u8cbc\u308a\u4ed8\u3051\u308b\u5185\u5bb9\u304c\u9577\u3044\u3068\u8cbc\u308a\u4ed8\u3051\u3067\u304d\u306a\u3044\n#mv $DEST $SRC\n#screen -X register . \"$(cat $SRC|sed -e 's/\\$/\\\\$/g')\"\n```\n\n### \u5404\u30d5\u30a3\u30eb\u30bf\u30b9\u30af\u30ea\u30d7\u30c8\n\n(\u306a\u304a\u3001screen\u4ee5\u5916\u3067\u3082\u3001\u7aef\u672b\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u7b49\u3067\u8868\u793a\u6587\u5b57\u5217\u3092\u30b3\u30d4\u30fc\u3059\u308b\u969b\u306b\u3082\u3001\u540c\u3058\u30d5\u30a3\u30eb\u30bf\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u53ef\u80fd\u3002)\n\n#### \u30a8\u30c7\u30a3\u30bf\u8d77\u52d5\n#### `\\`\u3067\u8868\u793a\u3055\u308c\u305f\u7d99\u7d9a\u884c\u3092\u9023\u7d50\n\n```awk:rmwrap-emacs.awk\n#!/usr/bin/awk -f\n# remove emacs wrap markers of long line.\n/\\\\$/ {\n\tsub(/\\\\$/, \"\");\n\tline = rm2ndmark($0, line);\n\tline = line $0;\n\tnext;\n}\nline != \"\" {\n\tline = rm2ndmark($0, line);\n\tprintf(\"%s%s\\n\", line, $0);\n\tline = \"\";\n\tnext;\n}\n{\n\tprint;\n}\nEND {\n\tif (line != \"\") {\n\t\tprint line;\n\t}\n}\n\n# remove second '\\' for multi-byte\nfunction rm2ndmark(curline, prevline) {\n\tif (curline ~ /^[^ -~[:cntrl:]]/ && prevline ~ /\\\\$/) {\n\t\tsub(/\\\\$/, \"\", prevline);\n\t}\n\treturn prevline;\n}\n```\n\n#### `>`\u3067\u8868\u793a\u3055\u308c\u305f\u7d99\u7d9a\u884c\u3092\u9023\u7d50\n\n```awk:rmwrap-vim.awk\n#!/usr/bin/awk -f\n# remove vim wrap markers of long line.\n/>$/ {\n\tline = rmmark($0, line);\n\tline = line $0;\n\tnext;\n}\nline != \"\" {\n\tline = rmmark($0, line);\n\tprintf(\"%s%s\\n\", line, $0);\n\tline = \"\";\n\tnext;\n}\n{\n\tprint;\n}\nEND {\n\tif (line != \"\") {\n\t\tprint line;\n\t}\n}\n\n# remove wrap marker '>' for multi-byte\nfunction rmmark(curline, prevline) {\n\tif (curline ~ /^[^ -~[:cntrl:]]/ && prevline ~ />$/) {\n\t\tsub(/>$/, \"\", prevline);\n\t}\n\treturn prevline;\n}\n```\n\n#### `+`\u3067\u8868\u793a\u3055\u308c\u305f\u7d99\u7d9a\u884c\u3092\u9023\u7d50\n\n```awk:rmwrap-mutt.awk\n#!/usr/bin/awk -f\n# remove mutt wrap markers of long line.\n/^+/ {\n\tsub(/^+/, \"\");\n\tline = line $0;\n\tnext;\n}\nline != \"\" {\n\tprint line;\n\t# FALLTHRU\n}\n{\n\tline = $0;\n}\nEND {\n\tif (line != \"\") {\n\t\tprint line;\n\t}\n}\n```\n\n#### \u30a6\u30a3\u30f3\u30c9\u30a6\u5e45\u3044\u3063\u3071\u3044\u306e\u884c\u306e\u6b21\u884c\u304c\u6700\u521d\u306e\u30ab\u30e9\u30e0\u304b\u3089\u59cb\u307e\u3063\u3066\u3044\u305f\u3089\u7d99\u7d9a\u884c\u3068\u307f\u306a\u3057\u3066\u9023\u7d50\n\u30a6\u30a3\u30f3\u30c9\u30a6\u5e45\u3044\u3063\u3071\u3044\u304b\u3069\u3046\u304b\u306e\u5224\u5b9a\u3092\u884c\u3046\u305f\u3081\u3001vim\u306estrdisplaywidth()\u3092\u4f7f\u7528\u3002\n\n```vim:rmwrap-width.vim\nfunction! JoinByWidth(start, end, width)\n  execute a:end\n  let lnum = line('.')\n  let curline = getline(lnum)\n  while lnum > a:start\n    -\n    let lnum -= 1\n    let prevline = getline('.')\n    let prevwidth = strdisplaywidth(prevline, 1)\n    if curline =~ '^\\S' && prevwidth == a:width\n      j!\n    elseif strwidth(matchstr(curline, '.')) > 1 && prevwidth == a:width - 1\n      \" wide char\n      j!\n    \"elseif curline =~ '^ \\S' && prevwidth == a:width\n    \"  j!\n    \"elseif curline =~ '^\\S' && prevwidth == a:width - 1\n    \"  j!\n    endif\n    let curline = prevline\n  endwhile\nendfunction\ncall JoinByWidth(1, '$', winwidth(0))\n1,$p\n```\n\n#### \u6539\u884c\u3092\u524a\u9664\n\u30b3\u30d4\u30fc\u3059\u308b\u969b\u306b\u3001\u884c\u3092\u9023\u7d50\u3059\u308b\u30e2\u30fc\u30c9\u306b\u3057\u305d\u3053\u306d\u3066\u30b3\u30d4\u30fc\u3057\u3066\u3057\u307e\u3063\u305f\u304c\u3001\u884c\u3092\u9023\u7d50\u3057\u3066\u4f7f\u3044\u305f\u3044\u5834\u5408\u7528\u3002\n\n#### \u6539\u884c\u3092\u30b9\u30da\u30fc\u30b9\u306b\u7f6e\u63db\n`ls -lrt`\u3057\u3066\u6700\u5f8c\u306e\u6570\u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3068\u3057\u3066\u4f7f\u3044\u305f\u3044\u5834\u5408\u7528\n(`ls -rt|tail -4`\u7b49\u3092\u5b9f\u884c\u3057\u76f4\u3059\u304b\u308f\u308a\u306b)\n\n#### \u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u524a\u9664\n\u30e1\u30fc\u30eb\u4e2d\u3067URL\u3092\u30a4\u30f3\u30c7\u30f3\u30c8\u3059\u308b\u306e\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u5168\u89d2\u7a7a\u767d\u3092\u524a\u9664\u3059\u308b\u7528\u9014\u3002\nscreen\u306e\u30b3\u30d4\u30fc\u3067URL\u5148\u982d\u307e\u3067\u79fb\u52d5\u3057\u3066\u30b3\u30d4\u30fc` $ `\u3059\u308b\u3088\u308a\u3001\n`Y`\u3084`y `\u3067\u884c\u5358\u4f4d\u3067\u30b3\u30d4\u30fc\u3059\u308b\u65b9\u304c\u697d\u306a\u6c17\u304c\u3059\u308b\u306e\u3067\u3002\n\n\u3042\u308b\u3044\u306f\u3001lynx\u3067\u3001\u6574\u5f62\u3057\u3066\u30a4\u30f3\u30c7\u30f3\u30c8\u4ed8\u304d\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5185\u5bb9\u3092\u3001\n\u77e9\u5f62\u9078\u629e\u3057\u306a\u3044\u3067\u30b3\u30d4\u30fc\u3057\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u306b\u3001\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u524a\u9664\u3059\u308b\u7528\u9014\u3002\n\n#### grep\u51fa\u529b\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3060\u3051\u62bd\u51fa\n\u666e\u901a\u306b`grep`\u3057\u305f\u7d50\u679c\u304b\u3089\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u3060\u3051\u30b3\u30d4\u30fc\u3059\u308b\u304b\u308f\u308a\u306b\u3001\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001`:`\u3088\u308a\u524d\u3092\u30d5\u30a3\u30eb\u30bf\u3067\u62bd\u51fa\u3002\ngrep\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u3001`grep -l`\u3057\u76f4\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3002\n\u4f8b\u3048\u3070grep\u3057\u305f\u7d50\u679c\u306e\u30d5\u30a1\u30a4\u30eb\u3092less\u3067\u898b\u308b\u5834\u5408\u5411\u3051\u3002\n\u5358\u306b`grep -l`\u3057\u76f4\u3059\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u3051\u3070OK\u3002\n\n```bash:.bashrc\nfunction lg() {\n        less $($(history -p '!-1:0') -l $(history -p '!*'))\n}\n```\n\n#### URL\u62bd\u51fa\n\u30e1\u30fc\u30eb\u3084HTML\u30bd\u30fc\u30b9\u8868\u793a\u3084Markdown\u8868\u793a\u304b\u3089\u3001URL\u306e\u5148\u982d\u3068\u672b\u5c3e\u307e\u3067\u30ab\u30fc\u30bd\u30eb\u79fb\u52d5\u3057\u3066\u30b3\u30d4\u30fc\u3059\u308b\u304b\u308f\u308a\u306b\u3001\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001URL\u3092\u62bd\u51fa\u3002\n\n#### \u6700\u5f8c\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u62bd\u51fa\n\u30b7\u30a7\u30eb\u3067`!$`\u306f\u3088\u304f\u4f7f\u3046\u306e\u3067\u540c\u69d8\u306b\u3002\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001\u6700\u5f8c\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u62bd\u51fa\u3002\n\n#### HTML\u30bf\u30b0\u9664\u53bb\nHTML\u30bd\u30fc\u30b9\u304b\u3089\u306e\u30b3\u30d4\u30fc\u6642\u306b\u3001\u5bfe\u8c61\u6587\u5b57\u5217\u306e\u5148\u982d\u3068\u672b\u5c3e\u305d\u308c\u305e\u308c\u306b\u30ab\u30fc\u30bd\u30eb\u3092\u79fb\u52d5\u3057\u3066\u30de\u30fc\u30af\u3092\u4ed8\u3051\u308b\u306e\u306f\u9762\u5012\u306a\u306e\u3067\u3001\n1\u884c\u307e\u308b\u3054\u3068\u30b3\u30d4\u30fc\u3057\u3066\u3001HTML\u30bf\u30b0\u3092\u9664\u53bb\u3002\n\n#### \u5f15\u7528\u8a18\u53f7`> `\u3092\u8ffd\u52a0\nlynx\u3067\u8868\u793a\u4e2d\u306e\u8a18\u4e8b\u306e\u4e00\u90e8\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\n\u30e1\u30e2\u306b\u5f15\u7528\u8a18\u53f7\u3092\u4ed8\u3051\u3066\u30da\u30fc\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u5411\u3051\u3002\n\n## \u53c2\u8003: \u5404\u30a2\u30d7\u30ea\u3067\u306e\u7d99\u7d9a\u884c\u306e\u8868\u793a\n### Emacs\n`\\`\u3082\u3057\u304f\u306f\u6b21\u306e\u6587\u5b57\u304c\u65e5\u672c\u8a9e\u7b49\u306e\u5834\u5408`\\\\`\u3002\n\nhttp://www.emacswiki.org/emacs/LineWrap\n\n### Vim\n\u6b21\u306e\u6587\u5b57\u304c\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u306e\u5834\u5408`>`\u3002\n\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u7d99\u7d9a\u884c\u304b\u3069\u3046\u304b\u4e0d\u660e\u3002\n\n\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3068\u7d99\u7d9a\u884c\u304b\u3069\u3046\u304b\u306f\u8868\u793a\u3092\u898b\u3066\u308f\u304b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u666e\u6bb5\u306f\u3057\u3066\u306a\u3044\u306e\u3067\u3002\n\n```vim:.vimrc\nse nu\n```\n\n### mutt\u3084lynx\u306eHTML\u30bd\u30fc\u30b9\u8868\u793a\n\u7d99\u7d9a\u884c\u306e\u884c\u982d\u306b`+`\u3002\n\nmutt\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3053\u3068\u3067`+`\u8ffd\u52a0\u3092\u30aa\u30d5\u306b\u3067\u304d\u307e\u3059\u3002\n\n```:.muttrc\nset markers=no\n```\n", "tags": ["screen"]}