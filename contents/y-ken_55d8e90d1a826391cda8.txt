{"tags": ["MySQL", "geo"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u6570\u5024\u3092\u4e38\u3081\u3089\u308c\u308b\u3053\u3068\u7121\u304f\u3001\u8a18\u9332\u3057\u305f\u3068\u304a\u308a\u306b\u7def\u5ea6\u7d4c\u5ea6\u60c5\u5831\u3092\u4fdd\u5b58\u3057\u305f\u3044\u3002\n\u3082\u3061\u308d\u3093\u6587\u5b57\u5217\u578b\u3067\u306f\u306a\u304f\u6d6e\u52d5\u5c0f\u6570\u70b9\u578b\u3092\u4f7f\u3046\u65b9\u304c\u51e6\u7406\u52b9\u7387\u304c\u826f\u3044\u3067\u3059\u3088\u306d\u3002\n\u3069\u306e\u3088\u3046\u306a\u30ab\u30e9\u30e0\u3092\u4f7f\u3048\u3070\u610f\u56f3\u901a\u308a\u306b\u4fdd\u5b58\u51fa\u6765\u308b\u306e\u304b\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u7d50\u8ad6\nVARCHAR\u578b\u3084DECIMAL\u578b\u3092\u5229\u7528\u3059\u308b\u624b\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u3069\u3061\u3089\u3082\u8a08\u7b97\u30b3\u30b9\u30c8\u304c\u9ad8\u3044\u305f\u3081\u3001\n\u57fa\u672c\u7684\u306bdouble(9,6)\u3092\u5229\u7528\u3059\u308c\u3070\u554f\u984c\u306a\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u6700\u5927\u5024\u3068\u6700\u5c0f\u5024\n\u305d\u308c\u305e\u308c\u306e\u6700\u5c0f\u5024\u3068\u6700\u5927\u5024\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n\u7def\u5ea6 (latitude) : -90 \u301c 90\n\u7d4c\u5ea6 (longitude) : -180 \u301c 180\n\n\n\u5c0f\u6570\u70b9\u6841\u6570\u3068\u7cbe\u5ea6\u306e\u95a2\u4fc2\n\u3069\u306e\u7a0b\u5ea6\u306e\u7cbe\u5ea6\u3092\u6c42\u3081\u308b\u306b\u306f\u3001\u3069\u306e\u7a0b\u5ea6\u306e\u6841\u6570\u304c\u5fc5\u8981\u3068\u306a\u308b\u304b\u3001\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u3056\u3063\u304f\u308a\u3068\u8a08\u7b97\u3057\u307e\u3059\u3068\u5730\u7403\u306e\u5186\u5468\u306f\u7d0440,000,000m\u3067\n\u7def\u5ea6\u306f\u3050\u308b\u3063\u3068360\u5ea6\u3067\u3059\u304b\u3089\u7def\u5ea61\u5ea6\u306f\n40000000/360\u2252111111.1111...\n\u3067\u7d04111,111m\u306b\u306a\u308a\u307e\u3059\u3002\n\u7d4c\u5ea6\u7def\u5ea6\u306eDB\u30ab\u30e9\u30e0\u306e\u6841\u6570 \u3010OKWave\u3011\nhttp://okwave.jp/qa/q4506558.html\n\n\u3053\u3061\u3089\u3092\u8868\u306b\u3059\u308b\u3068\u3001\u6b21\u306e\u901a\u308a\u3067\u3059\u30025\u301c6\u6841\u3082\u3042\u308c\u3070\u65e5\u5e38\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u5bfe\u5fdc\u51fa\u6765\u305d\u3046\u3067\u3059\u306d\u3002\n\n\n\n\u5c0f\u6570\u70b9\u4ee5\u4e0b\u6841\u6570\n\u7def\u5ea6\n\u6982\u7b97\u8ddd\u96e2\nMySQL\u306e\u30ab\u30e9\u30e0\u578b (\u7def\u5ea6/lat)\nMySQL\u306e\u30ab\u30e9\u30e0\u578b (\u7d4c\u5ea6/lng)\n\n\n\n\n0\n1\u5ea6\n111km\ndouble(2,0)\ndouble(3,0)\n\n\n1\n0.1\u5ea6\n11km\ndouble(3,1)\ndouble(4,1)\n\n\n2\n0.01\u5ea6\n1111m\ndouble(4,2)\ndouble(5,2)\n\n\n3\n0.001\u5ea6\n111m\ndouble(5,3)\ndouble(6,3)\n\n\n4\n0.0001\u5ea6\n11m\ndouble(6,4)\ndouble(7,4)\n\n\n5\n0.00001\u5ea6\n1m\ndouble(7,5)\ndouble(8,5)\n\n\n6\n0.000001\u5ea6\n11cm\ndouble(8,6)\ndouble(9,6)\n\n\n7\n0.0000001\u5ea6\n1cm\ndouble(9,7)\ndouble(10,7)\n\n\n\n\u30ab\u30e9\u30e0\u306e\u5f15\u6570\u306f double(\u6841\u6570, \u5c0f\u6570\u70b9\u4ee5\u4e0b\u306e\u6841\u6570) \u3068\u3044\u3046\u6307\u5b9a\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30b9\u30ad\u30fc\u30de\u4f8b\n\u7def\u5ea6\u7d4c\u5ea6\u3092\u683c\u7d0d\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u30b9\u30ad\u30fc\u30de\u4f8b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\u305f\u3060\u3001\u7def\u5ea6\u7d4c\u5ea6\u305d\u308c\u305e\u308c\u306e\u578b\u3092\u5171\u901a\u5316\u3057\u3066\u304a\u304d\u305f\u3044\u5834\u5408\u306b\u306f\u3001\u5927\u304d\u3044\u65b9\u306edouble(9,6)\u306b\u5408\u308f\u305b\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\nCREATE TABLE `geo_locations` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `address` varchar(255) DEFAULT NULL,\n  `lat` double(8,6) DEFAULT NULL,\n  `lng` double(9,6) DEFAULT NULL\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u3055\u3089\u306b\u7a7a\u9593\u60c5\u5831\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(geometory index)\u3092\u4ed8\u4e0e\u3057\u3066\u691c\u7d22\u3059\u308b\u969b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u30b9\u30ad\u30fc\u30de\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\nMySQL 5.7\u304b\u3089\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306fInnoDB\u306fSPATIAL\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u975e\u5bfe\u5fdc\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001MySQL 5.0/5.1/5.5/5.6\u74b0\u5883\u3067\u9ad8\u901f\u306b\u691c\u7d22\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u5834\u5408\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u30b9\u30ad\u30fc\u30de\u3092\u30bb\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nCREATE TABLE `geo_locations` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `address` varchar(255) DEFAULT NULL,\n  `location` geometry NOT NULL, -- NOT NULL\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\n  PRIMARY KEY (`id`),\n  SPATIAL KEY `geo_location` (`location`)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8;\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u554f\u308f\u305aInnoDB\u3067\u7def\u5ea6\u7d4c\u5ea6\u691c\u7d22\u3092\u9ad8\u901f\u306b\u884c\u3046\u5834\u5408\u306f\u3001B-Tree\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f7f\u3048\u308bGeoHash\u5f62\u5f0f\u3092\u4f7f\u3046\u3068\u826f\u3044\u3067\u3059\u3002\nhttp://d.hatena.ne.jp/hiratara/20100824/1282635611\n\n\u3042\u308f\u305b\u3066\u8aad\u307f\u305f\u3044\n\n\u7def\u5ea6\u7d4c\u5ea61\u5ea6\u306e\u8ddd\u96e2 - \u30e2\u30ce\u30ce\u30d5\u65e5\u8a18\nhttp://mononofu.hatenablog.com/entry/20090324/1237894846\nMySQL TIPS 3 \u7a7a\u9593\u60c5\u5831(geometry)\u3092\u4f7f\u3063\u3066\u7d4c\u5ea6\u30fb\u7def\u5ea6\u306e\u691c\u7d22\u3092\u9ad8\u901f\u5316\u3059\u308b\nhttp://d.hatena.ne.jp/IT7C/20100723/1279835242\n\n## \u306f\u3058\u3081\u306b\n\n\u6570\u5024\u3092\u4e38\u3081\u3089\u308c\u308b\u3053\u3068\u7121\u304f\u3001\u8a18\u9332\u3057\u305f\u3068\u304a\u308a\u306b\u7def\u5ea6\u7d4c\u5ea6\u60c5\u5831\u3092\u4fdd\u5b58\u3057\u305f\u3044\u3002\n\u3082\u3061\u308d\u3093\u6587\u5b57\u5217\u578b\u3067\u306f\u306a\u304f\u6d6e\u52d5\u5c0f\u6570\u70b9\u578b\u3092\u4f7f\u3046\u65b9\u304c\u51e6\u7406\u52b9\u7387\u304c\u826f\u3044\u3067\u3059\u3088\u306d\u3002\n\u3069\u306e\u3088\u3046\u306a\u30ab\u30e9\u30e0\u3092\u4f7f\u3048\u3070\u610f\u56f3\u901a\u308a\u306b\u4fdd\u5b58\u51fa\u6765\u308b\u306e\u304b\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u7d50\u8ad6\n\nVARCHAR\u578b\u3084DECIMAL\u578b\u3092\u5229\u7528\u3059\u308b\u624b\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u3069\u3061\u3089\u3082\u8a08\u7b97\u30b3\u30b9\u30c8\u304c\u9ad8\u3044\u305f\u3081\u3001\n\u57fa\u672c\u7684\u306b`double(9,6)`\u3092\u5229\u7528\u3059\u308c\u3070\u554f\u984c\u306a\u3044\u3067\u3057\u3087\u3046\u3002\n\n## \u6700\u5927\u5024\u3068\u6700\u5c0f\u5024\n\n\u305d\u308c\u305e\u308c\u306e\u6700\u5c0f\u5024\u3068\u6700\u5927\u5024\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n* \u7def\u5ea6 (latitude) : -90 \u301c 90\n* \u7d4c\u5ea6 (longitude) : -180 \u301c 180\n\n## \u5c0f\u6570\u70b9\u6841\u6570\u3068\u7cbe\u5ea6\u306e\u95a2\u4fc2\n\n\u3069\u306e\u7a0b\u5ea6\u306e\u7cbe\u5ea6\u3092\u6c42\u3081\u308b\u306b\u306f\u3001\u3069\u306e\u7a0b\u5ea6\u306e\u6841\u6570\u304c\u5fc5\u8981\u3068\u306a\u308b\u304b\u3001\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n> \u3056\u3063\u304f\u308a\u3068\u8a08\u7b97\u3057\u307e\u3059\u3068\u5730\u7403\u306e\u5186\u5468\u306f\u7d0440,000,000m\u3067\n> \u7def\u5ea6\u306f\u3050\u308b\u3063\u3068360\u5ea6\u3067\u3059\u304b\u3089\u7def\u5ea61\u5ea6\u306f\n> \n> 40000000/360\u2252111111.1111...\n> \n> \u3067\u7d04111,111m\u306b\u306a\u308a\u307e\u3059\u3002\n> \n> \u7d4c\u5ea6\u7def\u5ea6\u306eDB\u30ab\u30e9\u30e0\u306e\u6841\u6570 \u3010OKWave\u3011\n> http://okwave.jp/qa/q4506558.html\n\n\u3053\u3061\u3089\u3092\u8868\u306b\u3059\u308b\u3068\u3001\u6b21\u306e\u901a\u308a\u3067\u3059\u30025\u301c6\u6841\u3082\u3042\u308c\u3070\u65e5\u5e38\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u5bfe\u5fdc\u51fa\u6765\u305d\u3046\u3067\u3059\u306d\u3002\n\n| \u5c0f\u6570\u70b9\u4ee5\u4e0b\u6841\u6570 | \u7def\u5ea6        | \u6982\u7b97\u8ddd\u96e2 | MySQL\u306e\u30ab\u30e9\u30e0\u578b (\u7def\u5ea6/lat) | MySQL\u306e\u30ab\u30e9\u30e0\u578b (\u7d4c\u5ea6/lng) |\n|----------------|-------------|----------|----------------------------|----------------------------|\n| 0              | 1\u5ea6         | 111km    | double(2,0)                | double(3,0)                |\n| 1              | 0.1\u5ea6       | 11km     | double(3,1)                | double(4,1)                |\n| 2              | 0.01\u5ea6      | 1111m    | double(4,2)                | double(5,2)                |\n| 3              | 0.001\u5ea6     | 111m     | double(5,3)                | double(6,3)                |\n| 4              | 0.0001\u5ea6    | 11m      | double(6,4)                | double(7,4)                |\n| 5              | 0.00001\u5ea6   | 1m       | double(7,5)                | double(8,5)                |\n| 6              | 0.000001\u5ea6  | 11cm     | double(8,6)                | double(9,6)                |\n| 7              | 0.0000001\u5ea6 | 1cm      | double(9,7)                | double(10,7)               |\n\n\u30ab\u30e9\u30e0\u306e\u5f15\u6570\u306f `double(\u6841\u6570, \u5c0f\u6570\u70b9\u4ee5\u4e0b\u306e\u6841\u6570)` \u3068\u3044\u3046\u6307\u5b9a\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n## \u30b9\u30ad\u30fc\u30de\u4f8b\n\n\u7def\u5ea6\u7d4c\u5ea6\u3092\u683c\u7d0d\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u30b9\u30ad\u30fc\u30de\u4f8b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\u305f\u3060\u3001\u7def\u5ea6\u7d4c\u5ea6\u305d\u308c\u305e\u308c\u306e\u578b\u3092\u5171\u901a\u5316\u3057\u3066\u304a\u304d\u305f\u3044\u5834\u5408\u306b\u306f\u3001\u5927\u304d\u3044\u65b9\u306e`double(9,6)`\u306b\u5408\u308f\u305b\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n```sql\nCREATE TABLE `geo_locations` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `address` varchar(255) DEFAULT NULL,\n  `lat` double(8,6) DEFAULT NULL,\n  `lng` double(9,6) DEFAULT NULL\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n\u3055\u3089\u306b\u7a7a\u9593\u60c5\u5831\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(geometory index)\u3092\u4ed8\u4e0e\u3057\u3066\u691c\u7d22\u3059\u308b\u969b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u30b9\u30ad\u30fc\u30de\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\nMySQL 5.7\u304b\u3089\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306fInnoDB\u306fSPATIAL\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u975e\u5bfe\u5fdc\u3067\u3059\u3002<br />\n\u305d\u306e\u305f\u3081\u3001MySQL 5.0/5.1/5.5/5.6\u74b0\u5883\u3067\u9ad8\u901f\u306b\u691c\u7d22\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u5834\u5408\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u30b9\u30ad\u30fc\u30de\u3092\u30bb\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```sql\nCREATE TABLE `geo_locations` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `address` varchar(255) DEFAULT NULL,\n  `location` geometry NOT NULL, -- NOT NULL\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\n  PRIMARY KEY (`id`),\n  SPATIAL KEY `geo_location` (`location`)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8;\n```\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u554f\u308f\u305aInnoDB\u3067\u7def\u5ea6\u7d4c\u5ea6\u691c\u7d22\u3092\u9ad8\u901f\u306b\u884c\u3046\u5834\u5408\u306f\u3001B-Tree\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f7f\u3048\u308bGeoHash\u5f62\u5f0f\u3092\u4f7f\u3046\u3068\u826f\u3044\u3067\u3059\u3002\nhttp://d.hatena.ne.jp/hiratara/20100824/1282635611\n\n## \u3042\u308f\u305b\u3066\u8aad\u307f\u305f\u3044\n\n* \u7def\u5ea6\u7d4c\u5ea61\u5ea6\u306e\u8ddd\u96e2 - \u30e2\u30ce\u30ce\u30d5\u65e5\u8a18<br />\nhttp://mononofu.hatenablog.com/entry/20090324/1237894846\n\n* MySQL TIPS 3 \u7a7a\u9593\u60c5\u5831(geometry)\u3092\u4f7f\u3063\u3066\u7d4c\u5ea6\u30fb\u7def\u5ea6\u306e\u691c\u7d22\u3092\u9ad8\u901f\u5316\u3059\u308b<br />\nhttp://d.hatena.ne.jp/IT7C/20100723/1279835242\n"}