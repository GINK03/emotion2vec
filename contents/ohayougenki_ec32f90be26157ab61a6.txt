{"context": " More than 1 year has passed since last update.\n\n\u3057\u305f\u3044\u3053\u3068\nRoute53\uff08PrivateDNS\uff09\u306e\u8a2d\u5b9a\u3092\u3057\u305f\u5f8c\u306b\u3001\n\u30aa\u30f3\u30d7\u30ec\u306e\u74b0\u5883\u304b\u3089VPC\u5185\u306eProvidedDNS\u306b\u5bfe\u3057\u3066\u540d\u524d\u89e3\u6c7a\u3092\u884c\u3044\u56de\u7b54\u3092\u3082\u3089\u3046\u3002\n\n\u76f4\u63a5\u306f\u3067\u304d\u306a\u3044\u3093\u3067\u3059\n\u30aa\u30f3\u30d7\u30ec\u306e\u74b0\u5883\u304b\u3089VPC\u5185\u306eProvidedDNS\u306b\u5bfe\u3057\u3066\u540d\u524d\u89e3\u6c7a\u3092\u884c\u3044\u305f\u3044\uff01\u3068AWS\u306b\u805e\u3044\u3066\u307f\u305f\u3002\nAWS\u30b5\u30dd\u30fc\u30c8\u304b\u3089\u306e\u56de\u7b54\n\u30fb\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u74b0\u5883\u304b\u3089VPC\u5185\u306e\u30c7\u30d5\u30a9\u30eb\u30c8DNS\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u540d\u524d\u89e3\u6c7a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\n\u30fb\u5fc5\u8981\u306a\u5834\u5408\u306b\u306f\u3001VPC\u5185\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bDNS\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u7bc9\u3057\u3001forwarder\u5148\u3068\u3057\u3066VPC\u5185\u306e\u30c7\u30d5\u30a9\u30eb\u30c8DNS\u30b5\u30fc\u30d0\u3068\u3059\u308c\u3070\u5b9f\u73fe\u53ef\u80fd\n\nDNS\u3092\u69cb\u7bc9\u3057\u3088\u3046@BIND\n\n\n\u524d\u63d0\n\u5bfe\u8c61\u306eVPC\u306b\u5bfe\u3057\u3066Route53(PrivateDNS)\u3067\u6b63\u5f15\u304d/\u9006\u5f15\u304d\u306eZone\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u308b\u3053\u3068\n\u203bPrivateDNS\u306b\u3064\u3044\u3066\u306f\u6642\u9593\u304c\u6709\u308c\u3070\u66f8\u304d\u307e\u3059\u3002\n\n\u74b0\u5883\nVPC\uff1a192.168.0.0/16\n\u2192ProvidedDNS\u306fVPC+2\u306e\u300c192.168.0.2\u300d\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\nAmazonLinux\uff1aamzn-ami-hvm-2015.09.1.x86_64-gp2 (ami-383c1956)\nSecurityGroup\u306f\u9069\u5b9c\u8a2d\u5b9a\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306a\u3069\nsudo yum update -y\nsudo yum install bind -y\nsudo cp /etc/named.conf /etc/named.conf.org\nchkconfig named on\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n/etc/named.conf\n//\n// named.conf\n//\n// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS\n// server as a caching only nameserver (as a localhost DNS resolver only).\n//\n// See /usr/share/doc/bind*/sample/ for example named configuration files.\n//\n\noptions {\n        listen-on port 53 { 127.0.0.1; XXX.XXX.XXX.XXX; };\u3000//privateIP\u3092\u8ffd\u52a0\n        listen-on-v6 port 53 { ::1; };\n        directory       \"/var/named\";\n        dump-file       \"/var/named/data/cache_dump.db\";\n        statistics-file \"/var/named/data/named_stats.txt\";\n        memstatistics-file \"/var/named/data/named_mem_stats.txt\";\n        //allow-query     { localhost; };\u3000\u3000\u3000\u3000\u3000\u3000\u3000 //\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n        allow-query     { any; };\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//localhost\u2192any\u306b\u5909\u66f4\n        recursion yes;\n\n        dnssec-enable no;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//yes\u2192no\n        dnssec-validation no;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//yes\u2192no\n        //dnssec-lookaside auto;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 //\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n\n        /* Path to ISC DLV key */\n        bindkeys-file \"/etc/named.iscdlv.key\";\n\n        managed-keys-directory \"/var/named/dynamic\";\n};\n\nlogging {\n        channel default_debug {\n                file \"data/named.run\";\n                severity dynamic;\n        };\n};\n\n//zone \".\" IN {\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 \u3000//\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n//      type hint;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n//      file \"named.ca\";\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 //\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n//};\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n\nzone \".\" {\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u4ee5\u4e0b4\u884c\u8ffd\u52a0\n        type forward;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\n        forwarders { 192.168.0.2; };\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//ProvidedDNS\u306eIP\u3092\u8a18\u8f09\n};\n\ninclude \"/etc/named.rfc1912.zones\";\ninclude \"/etc/named.root.key\";\n\n\n\n\n/etc/reslve.conf\n\u4ee5\u4e0b\u306b\u5909\u66f4\nnameserver 127.0.0.1\n\n\n\n/etc/sysconfig/network-scripts/ifcfg-eth0\n\u4ee5\u4e0b\u306b\u5909\u66f4\nPEERDNS=no\n\n\n\n\u8d77\u52d5\nservice named start\n\n\n\u30c6\u30b9\u30c8\nnslookup \u300cRoute53\u306e\u30ec\u30b3\u30fc\u30c9\u306b\u767b\u9332\u3057\u3066\u3042\u308b\u30db\u30b9\u30c8\u540d\u300d\n\u3092\u5b9f\u884c\u3057\u56de\u7b54\u304c\u5e30\u3063\u3066\u304f\u308b\u304b\u78ba\u8a8d\n##\u3057\u305f\u3044\u3053\u3068\nRoute53\uff08PrivateDNS\uff09\u306e\u8a2d\u5b9a\u3092\u3057\u305f\u5f8c\u306b\u3001\n\u30aa\u30f3\u30d7\u30ec\u306e\u74b0\u5883\u304b\u3089VPC\u5185\u306eProvidedDNS\u306b\u5bfe\u3057\u3066\u540d\u524d\u89e3\u6c7a\u3092\u884c\u3044\u56de\u7b54\u3092\u3082\u3089\u3046\u3002\n\n##\u76f4\u63a5\u306f\u3067\u304d\u306a\u3044\u3093\u3067\u3059\n\u30aa\u30f3\u30d7\u30ec\u306e\u74b0\u5883\u304b\u3089VPC\u5185\u306eProvidedDNS\u306b\u5bfe\u3057\u3066\u540d\u524d\u89e3\u6c7a\u3092\u884c\u3044\u305f\u3044\uff01\u3068AWS\u306b\u805e\u3044\u3066\u307f\u305f\u3002\nAWS\u30b5\u30dd\u30fc\u30c8\u304b\u3089\u306e\u56de\u7b54\n\u30fb\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u74b0\u5883\u304b\u3089VPC\u5185\u306e\u30c7\u30d5\u30a9\u30eb\u30c8DNS\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u540d\u524d\u89e3\u6c7a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\n\u30fb\u5fc5\u8981\u306a\u5834\u5408\u306b\u306f\u3001VPC\u5185\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bDNS\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u7bc9\u3057\u3001forwarder\u5148\u3068\u3057\u3066VPC\u5185\u306e\u30c7\u30d5\u30a9\u30eb\u30c8DNS\u30b5\u30fc\u30d0\u3068\u3059\u308c\u3070\u5b9f\u73fe\u53ef\u80fd\n\n\n#DNS\u3092\u69cb\u7bc9\u3057\u3088\u3046@BIND\n\n##\u524d\u63d0\n\u5bfe\u8c61\u306eVPC\u306b\u5bfe\u3057\u3066Route53(PrivateDNS)\u3067\u6b63\u5f15\u304d/\u9006\u5f15\u304d\u306eZone\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u308b\u3053\u3068\n\u203bPrivateDNS\u306b\u3064\u3044\u3066\u306f\u6642\u9593\u304c\u6709\u308c\u3070\u66f8\u304d\u307e\u3059\u3002\n\n##\u74b0\u5883\nVPC\uff1a192.168.0.0/16\n\u2192ProvidedDNS\u306fVPC+2\u306e\u300c192.168.0.2\u300d\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\nAmazonLinux\uff1aamzn-ami-hvm-2015.09.1.x86_64-gp2 (ami-383c1956)\n\nSecurityGroup\u306f\u9069\u5b9c\u8a2d\u5b9a\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n##\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306a\u3069\n```bash\nsudo yum update -y\nsudo yum install bind -y\nsudo cp /etc/named.conf /etc/named.conf.org\nchkconfig named on\n```\n\n##\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n```bash:/etc/named.conf\n//\n// named.conf\n//\n// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS\n// server as a caching only nameserver (as a localhost DNS resolver only).\n//\n// See /usr/share/doc/bind*/sample/ for example named configuration files.\n//\n\noptions {\n        listen-on port 53 { 127.0.0.1; XXX.XXX.XXX.XXX; };\u3000//privateIP\u3092\u8ffd\u52a0\n        listen-on-v6 port 53 { ::1; };\n        directory       \"/var/named\";\n        dump-file       \"/var/named/data/cache_dump.db\";\n        statistics-file \"/var/named/data/named_stats.txt\";\n        memstatistics-file \"/var/named/data/named_mem_stats.txt\";\n        //allow-query     { localhost; };\u3000\u3000\u3000\u3000\u3000\u3000\u3000 //\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n        allow-query     { any; };\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//localhost\u2192any\u306b\u5909\u66f4\n        recursion yes;\n\n        dnssec-enable no;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//yes\u2192no\n        dnssec-validation no;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//yes\u2192no\n        //dnssec-lookaside auto;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 //\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n\n        /* Path to ISC DLV key */\n        bindkeys-file \"/etc/named.iscdlv.key\";\n\n        managed-keys-directory \"/var/named/dynamic\";\n};\n\nlogging {\n        channel default_debug {\n                file \"data/named.run\";\n                severity dynamic;\n        };\n};\n\n//zone \".\" IN {\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 \u3000//\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n//      type hint;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n//      file \"named.ca\";\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 //\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n//};\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n\nzone \".\" {\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u4ee5\u4e0b4\u884c\u8ffd\u52a0\n        type forward;\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\n        forwarders { 192.168.0.2; };\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//ProvidedDNS\u306eIP\u3092\u8a18\u8f09\n};\n\ninclude \"/etc/named.rfc1912.zones\";\ninclude \"/etc/named.root.key\";\n\n```\n\n\n```bash:/etc/reslve.conf\n\u4ee5\u4e0b\u306b\u5909\u66f4\nnameserver 127.0.0.1\n```\n\n```bash:/etc/sysconfig/network-scripts/ifcfg-eth0\n\u4ee5\u4e0b\u306b\u5909\u66f4\nPEERDNS=no\n```\n\n##\u8d77\u52d5\n\n```bash\nservice named start\n```\n\n\n##\u30c6\u30b9\u30c8\nnslookup \u300cRoute53\u306e\u30ec\u30b3\u30fc\u30c9\u306b\u767b\u9332\u3057\u3066\u3042\u308b\u30db\u30b9\u30c8\u540d\u300d\n\u3092\u5b9f\u884c\u3057\u56de\u7b54\u304c\u5e30\u3063\u3066\u304f\u308b\u304b\u78ba\u8a8d\n", "tags": ["AWS", "bind", "route53", "providedDNS"]}