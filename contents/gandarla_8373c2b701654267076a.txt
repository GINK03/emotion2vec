{"context": "\n\n\u74b0\u5883\n\nDebian 8 \nCassandra 2.2x\n\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n\n/etc/cassandra/cassandra.yaml\n# The name of the cluster. This is mainly used to prevent machines in\n# one logical cluster from joining another.\n#cluster_name: 'Test Cluster'\ncluster_name: 'Gandarla Cluster'\n\n\n\u3068\u3057\u305f\u304b\u3063\u305f\u3060\u3051\u3002\n\u4e00\u5ea6\u3001Test Cluster\u3067\u8d77\u52d5\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u5358\u7d14\u306b\u540d\u524d\u3092\u5909\u3048\u305f\u3060\u3051\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3002\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\u3002\n\n/var/log/cassandra/debug.log\nERROR [main] 2016-08-02 08:57:09,272 CassandraDaemon.java:698 - Fatal exception during initialization\norg.apache.cassandra.exceptions.ConfigurationException: Saved cluster name Test Cluster != configured name Gandarla Cluster\n    at org.apache.cassandra.db.SystemKeyspace.checkHealth(SystemKeyspace.java:913) ~[apache-cassandra-3.0.8.jar:3.0.8]\n    at org.apache.cassandra.service.StartupChecks$8.execute(StartupChecks.java:304) ~[apache-cassandra-3.0.8.jar:3.0.8]\n    at org.apache.cassandra.service.StartupChecks.verify(StartupChecks.java:107) ~[apache-cassandra-3.0.8.jar:3.0.8]\n    at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:171) [apache-cassandra-3.0.8.jar:3.0.8]\n    at org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:557) [apache-cassandra-3.0.8.jar:3.0.8]\n    at org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:685) [apache-cassandra-3.0.8.jar:3.0.8]\n\n\n\n\u3084\u3063\u305f\u3053\u3068\n\ncommand\n# cqlsh\n\n\n\ncqlsh\u5185\nConnected to Test Cluster at 127.0.0.1:9042.\n[cqlsh 5.0.1 | Cassandra 3.0.8 | CQL spec 3.4.0 | Native protocol v4]\nUse HELP for help.\ncqlsh> UPDATE system.local SET cluster_name = 'Gandarla Cluster' where key = 'local';\ncqlsh> exit\n\n\n\ncommand\n# nodetool flush\n# service cassandra stop\n# rm -rf /var/lib/cassandra/data/system/*\n# vi /etc/cassandra/cassandra.yaml\n\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\u306e\u5185\u5bb9\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\ncommand\n# service cassandra start\n\n\n\u3057\u3070\u3089\u304f\u3057\u3066\u3001\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u3001\n\ncommand\n# cqlsh\n\n\n\ncqlsh\u5185\nConnected to Gandarla Cluster at 127.0.0.1:9042.\n[cqlsh 5.0.1 | Cassandra 3.0.8 | CQL spec 3.4.0 | Native protocol v4]\nUse HELP for help.\ncqlsh>\n\n\n\u3068\u306a\u3063\u3066\u3044\u308c\u3070\u7d42\u308f\u308a\u3002\n\n\u5099\u5fd8\u9332\n\n\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u306e\u5834\u6240\n\n\n/var/log/cassandra/debug.log\n\n\n\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\n\n\ndatastax\nstackoverflow\n\n\n\n# \u74b0\u5883\n - Debian 8 \n - Cassandra 2.2x\n\n# \u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n\n```yams:/etc/cassandra/cassandra.yaml\n# The name of the cluster. This is mainly used to prevent machines in\n# one logical cluster from joining another.\n#cluster_name: 'Test Cluster'\ncluster_name: 'Gandarla Cluster'\n```\n\n\u3068\u3057\u305f\u304b\u3063\u305f\u3060\u3051\u3002\n\n\u4e00\u5ea6\u3001Test Cluster\u3067\u8d77\u52d5\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u5358\u7d14\u306b\u540d\u524d\u3092\u5909\u3048\u305f\u3060\u3051\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3002\n\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\u3002\n\n```java:/var/log/cassandra/debug.log\nERROR [main] 2016-08-02 08:57:09,272 CassandraDaemon.java:698 - Fatal exception during initialization\norg.apache.cassandra.exceptions.ConfigurationException: Saved cluster name Test Cluster != configured name Gandarla Cluster\n\tat org.apache.cassandra.db.SystemKeyspace.checkHealth(SystemKeyspace.java:913) ~[apache-cassandra-3.0.8.jar:3.0.8]\n\tat org.apache.cassandra.service.StartupChecks$8.execute(StartupChecks.java:304) ~[apache-cassandra-3.0.8.jar:3.0.8]\n\tat org.apache.cassandra.service.StartupChecks.verify(StartupChecks.java:107) ~[apache-cassandra-3.0.8.jar:3.0.8]\n\tat org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:171) [apache-cassandra-3.0.8.jar:3.0.8]\n\tat org.apache.cassandra.service.CassandraDaemon.activate(CassandraDaemon.java:557) [apache-cassandra-3.0.8.jar:3.0.8]\n\tat org.apache.cassandra.service.CassandraDaemon.main(CassandraDaemon.java:685) [apache-cassandra-3.0.8.jar:3.0.8]\n```\n\n# \u3084\u3063\u305f\u3053\u3068\n\n```bash:command\n# cqlsh\n```\n\n```sql:cqlsh\u5185\nConnected to Test Cluster at 127.0.0.1:9042.\n[cqlsh 5.0.1 | Cassandra 3.0.8 | CQL spec 3.4.0 | Native protocol v4]\nUse HELP for help.\ncqlsh> UPDATE system.local SET cluster_name = 'Gandarla Cluster' where key = 'local';\ncqlsh> exit\n```\n\n```bash:command\n# nodetool flush\n# service cassandra stop\n# rm -rf /var/lib/cassandra/data/system/*\n# vi /etc/cassandra/cassandra.yaml\n```\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\u306e\u5185\u5bb9\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```bash:command\n# service cassandra start\n```\n\n\u3057\u3070\u3089\u304f\u3057\u3066\u3001\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u3001\n\n```bash:command\n# cqlsh\n```\n\n```sql:cqlsh\u5185\nConnected to Gandarla Cluster at 127.0.0.1:9042.\n[cqlsh 5.0.1 | Cassandra 3.0.8 | CQL spec 3.4.0 | Native protocol v4]\nUse HELP for help.\ncqlsh>\n```\n\n\u3068\u306a\u3063\u3066\u3044\u308c\u3070\u7d42\u308f\u308a\u3002\n\n\n## \u5099\u5fd8\u9332\n - \u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u306e\u5834\u6240\n  - /var/log/cassandra/debug.log\n - \u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\n    - [datastax](https://support.datastax.com/hc/en-us/articles/205289825-Change-Cluster-Name-)\n    - [stackoverflow](http://stackoverflow.com/questions/34740013/cassandra-2-node-cluster-configuration-issue)\n\n\n", "tags": ["Cassandra", "Cassandra22x", "Debian", "cluster_name"]}