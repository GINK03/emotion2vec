{"context": "\n\n\u4e8b\u524d\u6e96\u5099\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u7167\uff0e\u4e88\u3081\uff0c\u95a2\u9023\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\uff0e(\u7279\u306bcuDNN\u7b49)\nhttp://caffe.berkeleyvision.org/installation.html\n\nCaffe\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nGPU\u3092\u4f7f\u3046\u306e\u3067\uff0cNVIDIA\u306eGithub\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\uff0e\ngit clone https://github.com/NVIDIA/caffe.git nvidia_caffe\n\n\nMake.config\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\n$ cd caffe\n$ cp Makefile.config.example Makefile.config\n\n\nCUDNN\u306e\u8a2d\u5b9a\nGPU\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\u306f,\u3000Makefile.config\u306e\u4e2d\u3067\uff0c\nUSE_CUDNN := 1\n\n\u3068\u3059\u308b\uff0e\u3000\u3044\u307e\uff0cCUDNN\u306e\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3068\u4eee\u5b9a\u3059\u308b\uff0e\n\nCUDNN_INCLUDE := /usr/local/cudnn/include\nCUDNN_LIB := /usr/local/cudnn/lib\n\n\u307e\u305f\uff0c\u4eca\u56de\u4f7f\u7528\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u304cTesla M40\u3067\u3042\u308b\u305f\u3081\uff0c\u30c7\u30d0\u30a4\u30b9\u306b\u5fdc\u3058\u305fCompute Capability\u306e\u8a2d\u5b9a\u3092\u884c\u3046\uff0e\u304c5.2\u7528\u306e\u8a2d\u5b9a\u3092\u3059\u308b\uff0e(\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u52d5\u304f)\uff0e\n\u5404GPU\u306eCompute Capability\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\uff0e\nhttps://developer.nvidia.com/cuda-gpus\n\u5177\u4f53\u7684\u306b\u306f\uff0c Makefile.config\u4e2d\u306eCUDA_ARCH\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\uff0e\u3000\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n             -gencode arch=compute_20,code=sm_21 \\\n             -gencode arch=compute_30,code=sm_30 \\\n             -gencode arch=compute_35,code=sm_35 \\\n             -gencode arch=compute_50,code=sm_50 \\\n             -gencode arch=compute_52,code=sm_52 \\\n             -gencode arch=compute_52,code=compute_52\n\n\nBlas\u306e\u8a2d\u5b9a\nBlas\u306e\u8a2d\u5b9a\u3092\u884c\u3046\uff0e\u3000Atlas\u304bMKL\u304bOpenBlas\u304c\u5229\u7528\u53ef\u80fd\uff0e\n\nOpenBlas\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nMakefile.config\u306eBLAS\u306e\u9805\u76ee\u3092\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b.\nBLAS := open\n\n\nAtlas\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nCaffe\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306eBLAS\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a2d\u5b9a\u306fAtlas\u3067\u3042\u308b\uff0e\nCentOS7\u3067\u3082\uff0c\nyum install atlas-devel\n\n\u3068\u3059\u308b\u3068\uff0cAtlas\u306e\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb(BLAS_INCLUDE)\u3068\u30e9\u30a4\u30d6\u30e9\u30ea(BLAS_LIB)\u304c\u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\uff0e\nBLAS_INCLUDE := /usr/include/atlas\nBLAS_LIB := /usr/include/lib64/atlas\n\n\u305f\u3060\u3057\uff0c\u30d3\u30eb\u30c9\u306e\u969b\uff0cCaffe\u3067\u306f\uff0ccblas\u3068atlas\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63a2\u3059\u304c\uff0cCentOS7\u304b\u3089\u540d\u79f0\u304csatlas\u3068tatlas\u306b\u5909\u66f4\u3055\u308c\u305f\u3088\u3046\u306a\u306e\u3067\uff0cMakefile\u4e2d\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n78c378\n<           LIBRARIES += cblas atlas\n---\n>           LIBRARIES += satlas tatlas\n\n\nMake\u306e\u5b9f\u884c\n\u305d\u306e\u5f8c\uff0c\u4ee5\u4e0b\u3092\u884c\u3046\uff0e\u8a08\u7b97\u6a5f\u4e0a\u306e\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u7dcf\u30b3\u30a2\u6570\u304cn\u3068\u3059\u308b\uff0e\n$ make -j n all\n$ make -j n test\n$ make runtest\n\n\u305f\u3060\u3057\uff0c1\u53f0\u306e\u8a08\u7b97\u6a5f\u306b\u8907\u6570\u306eGPU\u30c7\u30d0\u30a4\u30b9\u304c\u88c5\u7740\u3055\u308c\u3066\u3044\u308b\u5834\u5408\uff0cruntest\u304cfail\u3059\u308b\u306e\u3067\u4ee5\u4e0b\u306e\u69d8\u306b\u3059\u308b\uff0e\n$ export CUDA_VISIBLE_DEVICES=0\n\n# \u4e8b\u524d\u6e96\u5099\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u7167\uff0e\u4e88\u3081\uff0c\u95a2\u9023\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\uff0e(\u7279\u306bcuDNN\u7b49)\nhttp://caffe.berkeleyvision.org/installation.html\n\n# Caffe\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\nGPU\u3092\u4f7f\u3046\u306e\u3067\uff0cNVIDIA\u306eGithub\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\uff0e\n\n```\ngit clone https://github.com/NVIDIA/caffe.git nvidia_caffe\n```\n\n# Make.config\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\n\n```\n$ cd caffe\n$ cp Makefile.config.example Makefile.config\n```\n\n## CUDNN\u306e\u8a2d\u5b9a\nGPU\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\u306f,\u3000Makefile.config\u306e\u4e2d\u3067\uff0c\n\n```\nUSE_CUDNN := 1\n```\n\n\u3068\u3059\u308b\uff0e\u3000\u3044\u307e\uff0cCUDNN\u306e\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3068\u4eee\u5b9a\u3059\u308b\uff0e\n```\nCUDNN_INCLUDE := /usr/local/cudnn/include\nCUDNN_LIB := /usr/local/cudnn/lib\n```\n\n\u307e\u305f\uff0c\u4eca\u56de\u4f7f\u7528\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u304cTesla M40\u3067\u3042\u308b\u305f\u3081\uff0c\u30c7\u30d0\u30a4\u30b9\u306b\u5fdc\u3058\u305fCompute Capability\u306e\u8a2d\u5b9a\u3092\u884c\u3046\uff0e\u304c5.2\u7528\u306e\u8a2d\u5b9a\u3092\u3059\u308b\uff0e(\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u52d5\u304f)\uff0e\n\u5404GPU\u306eCompute Capability\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\uff0e\nhttps://developer.nvidia.com/cuda-gpus\n\n\u5177\u4f53\u7684\u306b\u306f\uff0c Makefile.config\u4e2d\u306eCUDA_ARCH\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\uff0e\u3000\n\n```\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n             -gencode arch=compute_20,code=sm_21 \\\n             -gencode arch=compute_30,code=sm_30 \\\n             -gencode arch=compute_35,code=sm_35 \\\n             -gencode arch=compute_50,code=sm_50 \\\n             -gencode arch=compute_52,code=sm_52 \\\n             -gencode arch=compute_52,code=compute_52\n```\n\n## Blas\u306e\u8a2d\u5b9a\nBlas\u306e\u8a2d\u5b9a\u3092\u884c\u3046\uff0e\u3000Atlas\u304bMKL\u304bOpenBlas\u304c\u5229\u7528\u53ef\u80fd\uff0e\n\n### OpenBlas\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nMakefile.config\u306eBLAS\u306e\u9805\u76ee\u3092\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b.\n\n```\nBLAS := open\n```\n\n### Atlas\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\nCaffe\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306eBLAS\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a2d\u5b9a\u306fAtlas\u3067\u3042\u308b\uff0e\nCentOS7\u3067\u3082\uff0c\n\n```\nyum install atlas-devel\n```\n\n\u3068\u3059\u308b\u3068\uff0cAtlas\u306e\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb(BLAS_INCLUDE)\u3068\u30e9\u30a4\u30d6\u30e9\u30ea(BLAS_LIB)\u304c\u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\uff0e\n\n```\nBLAS_INCLUDE := /usr/include/atlas\nBLAS_LIB := /usr/include/lib64/atlas\n```\n\n\u305f\u3060\u3057\uff0c\u30d3\u30eb\u30c9\u306e\u969b\uff0cCaffe\u3067\u306f\uff0ccblas\u3068atlas\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63a2\u3059\u304c\uff0cCentOS7\u304b\u3089\u540d\u79f0\u304csatlas\u3068tatlas\u306b\u5909\u66f4\u3055\u308c\u305f\u3088\u3046\u306a\u306e\u3067\uff0cMakefile\u4e2d\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n\n```\n78c378\n< \t\t\tLIBRARIES += cblas atlas\n---\n> \t\t\tLIBRARIES += satlas tatlas\n```\n\n# Make\u306e\u5b9f\u884c\n\u305d\u306e\u5f8c\uff0c\u4ee5\u4e0b\u3092\u884c\u3046\uff0e\u8a08\u7b97\u6a5f\u4e0a\u306e\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u7dcf\u30b3\u30a2\u6570\u304cn\u3068\u3059\u308b\uff0e\n\n```\n$ make -j n all\n$ make -j n test\n$ make runtest\n```\n\n\u305f\u3060\u3057\uff0c1\u53f0\u306e\u8a08\u7b97\u6a5f\u306b\u8907\u6570\u306eGPU\u30c7\u30d0\u30a4\u30b9\u304c\u88c5\u7740\u3055\u308c\u3066\u3044\u308b\u5834\u5408\uff0cruntest\u304cfail\u3059\u308b\u306e\u3067\u4ee5\u4e0b\u306e\u69d8\u306b\u3059\u308b\uff0e\n\n```\n$ export CUDA_VISIBLE_DEVICES=0\n```\n", "tags": ["Caffe", "CentOS7.2"]}