{"tags": ["CoreOS444.5.0", "\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9", "\u3084\u3063\u3066\u307f\u305f"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n11\u670814\u65e5\u306e\u7b2c5\u56de \u30b3\u30f3\u30c6\u30ca\u578b\u4eee\u60f3\u5316\u306e\u60c5\u5831\u4ea4\u63db\u4f1a\uff20\u5927\u962a - connpass\u3067\u3001\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u306e2\u4e07\u5186\u5206\u30af\u30fc\u30dd\u30f3\u5238\u3092\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\u4f55\u306b\u4f7f\u304a\u3046\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001packer - VirtualBox\u7528\u306eCentOS base box\u3092\u4f5c\u3063\u3066GitHub Releases\u3067\u5171\u6709\u3059\u308b - Qiita\u306e\u30b3\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u305f\u3088\u3046\u306bGitHub release\u306bVagrant box\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u306e\u304c\u4ee5\u524d\u306f\u51fa\u6765\u3066\u3044\u305f\u306e\u304c\u51fa\u6765\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u3065\u304d\u307e\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001Google Drive\u3084OneDrive\u3067box\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\u306e\u3082\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001Vagrant Cloud\u306b\u516c\u958b\u7528\u306eURL\u3092\u767b\u9332\u3057\u3066\u3082\u3001 vagrant up \u304c\u3046\u307e\u304f\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nQuotas - Google App Engine \u2014 Google Cloud Platform\u306b\u3088\u308b\u3068Google App Engine\u306eBlobstore\u306a\u3089\u7121\u6599\u67a0\u30675GB\u307e\u3067\u4f7f\u3048\u308b\u306e\u3067\u3001Blobstore Go API Overview - Go \u2014 Google Cloud Platform\u3092\u5c11\u3057\u767a\u5c55\u3055\u305b\u305f\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306e\u8ee2\u9001\u91cf\u304c\u7121\u6599\u67a0\u3060\u30681\u65e51GB\u306a\u306e\u3067box\u30922\u56de\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3089\u8d85\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3073\u306b\u304a\u91d1\u304c\u304b\u304b\u308b\u306e\u306f\u5acc\u306a\u306e\u3067\u30dc\u30c4\u3068\u3057\u307e\u3057\u305f\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u3067box\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5e03\u3059\u308b\u3088\u3046\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066Vagrant Cloud\u306b\u767b\u9332\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u3067CoreOS\u3092\u8a66\u3057\u3066\u307f\u305f\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u52c9\u5f37\u306e\u305f\u3081CoreOS\u3092\u8a66\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u30b5\u30fc\u30d0\u306e\u4f5c\u6210\u30fb\u524a\u9664\uff5c\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\uff5c\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u30b5\u30a4\u30c8\u306e\u300c2.\u30c7\u30a3\u30b9\u30af\u300d\u306e\u300c\u30a2\u30fc\u30ab\u30a4\u30d6\u9078\u629e\u300d\u3067\u300cCoreOS 367.1.0 (stable)\u300d\u3068\u3044\u3046\u306e\u304c\u4e88\u3081\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u308c\u3092\u9078\u3073\u307e\u3057\u305f\u3002\n\u300c4.\u30c7\u30a3\u30b9\u30af\u306e\u4fee\u6b63\u300d\u3067\u306f\n* \u300c\u7ba1\u7406\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u300d\u3092\u8a2d\u5b9a\n* \u300c\u30db\u30b9\u30c8\u540d\u300d\u3092\u8a2d\u5b9a\n* \u300c\u516c\u958b\u9375\u300d\u306e\u4e0b\u306e\u30e9\u30b8\u30aa\u30dc\u30bf\u30f3\u3067\u300c\u5165\u529b\u300d\u3092\u9078\u3073\u3001\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u81ea\u5206\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u516c\u958b\u9375\u306e\u5185\u5bb9\u3092\u30b3\u30d4\u30da\n\u3057\u307e\u3057\u305f\u3002\n\u79c1\u306fUS\u30ad\u30fc\u30dc\u30fc\u30c9\u306eMacBook\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u300c6. \u305d\u306e\u4ed6\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u300d\u306e\u300c\u4eee\u60f3\u30b5\u30fc\u30d0\u4e0a\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u3092US\u914d\u5217\u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u300d\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306b\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u307e\u3057\u305f\u3002\n\u30b5\u30fc\u30d0\u3092\u4f5c\u6210\u3057\u3066\u8d77\u52d5\u3057\u305f\u3089\u3001\u767b\u9332\u3057\u305f\u516c\u958b\u9375\u306b\u5bfe\u5fdc\u3059\u308b\u79d8\u5bc6\u9375\u3092\u4f7f\u3063\u3066 core \u30e6\u30fc\u30b6\u3067ssh\u51fa\u6765\u308b\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u697d\u3061\u3093\u3067\u3059\u3002\n\u4e00\u5ea6 shutdown -r now \u3067\u8d77\u52d5\u3057\u305f\u5f8c\u306b\u78ba\u8a8d\u3057\u305f\u3089\u3001CoreOS Stable\u306e\u73fe\u6642\u70b9\u3067\u306e\u6700\u65b0\u7248444.5.0\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\ncore@naruh ~/docker $ ls -l /etc/*release\nlrwxrwxrwx 1 root root 31 Jul 13 08:18 /etc/lsb-release -> ../usr/share/coreos/lsb-release\nlrwxrwxrwx 1 root root 30 Jul 13 08:18 /etc/os-release -> ../usr/share/coreos/os-release\n\n\ncore@naruh ~/docker $ cat /etc/os-release\nNAME=CoreOS\nID=coreos\nVERSION=444.5.0\nVERSION_ID=444.5.0\nBUILD_ID=\nPRETTY_NAME=\"CoreOS 444.5.0\"\nANSI_COLOR=\"1;32\"\nHOME_URL=\"https://coreos.com/\"\nBUG_REPORT_URL=\"https://github.com/coreos/bugs/issues\"\ncore@naruh ~/docker $ cat /etc/lsb-release\nDISTRIB_ID=CoreOS\nDISTRIB_RELEASE=444.5.0\nDISTRIB_CODENAME=\"Red Dog\"\nDISTRIB_DESCRIPTION=\"CoreOS 444.5.0\"\n\n\nDNS\u306e\u6b63\u5f15\u304d\u3001\u9006\u5f15\u304d\u8a2d\u5b9a\u3082\u3057\u3066\u307f\u305f\n\u79c1\u304cvalue-domain\u3067\u4fdd\u6709\u3057\u3066\u3044\u308b naruh.net \u3068\u3044\u3046\u30c9\u30e1\u30a4\u30f3\u3092value-domain\u306e\u7ba1\u7406\u753b\u9762\u3067 naruh.net \u306e\u6b63\u5f15\u304d\u3092\u3053\u306e\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u5bfe\u5fdc\u3055\u305b\u307e\u3057\u305f\u3002\n\u305d\u306e\u5f8c\u3001DNS\u9006\u5f15\u304d\u30ec\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\uff5c\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\uff5c\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u30b5\u30a4\u30c8\u306e\u624b\u9806\u306b\u5f93\u3063\u3066\u9006\u5f15\u304d\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\n\u751f\u6210\u3055\u308c\u305fcloud-config\u3092\u898b\u3066\u307f\u305f\n\n/usr/share/oem/cloud-config.yml\n#cloud-config\n\ncoreos:\n  units:\n    -\n      command: restart\n      name: coreos-setup-environment.service\n    -\n      command: restart\n      name: systemd-networkd.service\n    -\n      command: start\n      content: \"[Unit]\\nDescription=timezone\\n[Service]\\nType=oneshot\\nRemainAfterExit=yes\\nExecStart=/usr/bin/ln -sf ../usr/share/zoneinfo/Japan /etc/localtime\\n\"\n      name: timezone.service\n\nssh_authorized_keys:\n  - ssh-rsa \u2026(\u7565)\u2026\n\nhostname: \u2026(\u7565)\u2026\n\nusers:\n  -\n    name: core\n    passwd: \u2026(\u7565)\u2026\n\nwrite_files:\n  -\n    content: \"[Match]\\nName=e*\\n\\n[Network]\\nAddress=XXX.YYY.236.91/24\\nGateway=XXX.YYY.236.1\\nDNS=XXX.YYY.0.3\\nDNS=XXX.YYY.0.4\\n\"\n    path: /etc/systemd/network/10-static.network\n\n\ndate \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u3089JST\u306b\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306f timezone.service \u306e ExecStart \u3067\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3093\u3067\u3059\u306d\u3002\n\u307e\u305f\u3001\u516c\u958b\u9375\u3001\u30db\u30b9\u30c8\u540d\u3001\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u306a\u3093\u3089\u304b\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u3082\u306e\u3082\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n(\u3061\u3087\u3063\u3068\u81ea\u52d5\u3067)\u3055\u304f\u3089\u306eVPS\u306bCoreOS\u3092\u5165\u308c\u308b\u30e1\u30e2 - Qiita\u306e\u8a18\u4e8b\u306bcloud-config\u3067\u56fa\u5b9aIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u304c\u66f8\u304b\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3053\u3061\u3089\u3067\u306f\u5c11\u3057\u9055\u3063\u305f\u65b9\u6cd5\u3067\u5b9f\u73fe\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\ndocker-enter\u306e\u4f5c\u6210\u3068~/.bashrc\u306e\u4fee\u6b63\nCoreOS Stable 444.5.0\u306b\u542b\u307e\u308c\u308bdocker\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.2.0\u306a\u306e\u3067\u3001 docker exec \u304c\u4f7f\u3048\u307e\u305b\u3093\u3002 nsenter \u306f\u3042\u308b\u306e\u3067docker - nsinit \u304c\u4e0a\u624b\u304f\u884c\u304b\u306a\u304f\u3066\u56f0\u3063\u3066\u3044\u305f\u3089 nsenter \u304c\u3042\u307e\u308a\u306b\u3082\u3042\u3063\u3055\u308a\u3060\u3063\u305f\u4ef6 - Qiita\u3068CoreOS \u3067\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u4e2d\u306b\u5165\u308b - Qiita\u3092\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306bdocker-enter\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n~/bin/docker-enter\n#!/bin/sh\nsudo nsenter --target $(docker inspect --format '{{.State.Pid}}' $1) --mount --uts --ipc --net --pid\n\n\nPATH\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081~/.bashrc\u3092\u5909\u66f4\u3057\u305f\u3044\u306e\u3067\u3059\u304c\u3001\u521d\u671f\u72b6\u614b\u3067\u306f /usr/share/skel/.bashrc \u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\ncore@naruh ~/docker/nginx $ ls -l ~/.bashrc\nlrwxrwxrwx 1 core core 28 Jul 13 08:18 /home/core/.bashrc -> ../../usr/share/skel/.bashrc\n\n\u305d\u3053\u3067\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u6d88\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304b\u3089\u7de8\u96c6\u3057\u307e\u3057\u305f\u3002\ncore@naruh ~/docker/nginx $ rm ~/.bashrc\ncore@naruh ~/docker/nginx $ cp /usr/share/skel/.bashrc ~/.bashrc\n\n\n~/.bashrc\n# /etc/skel/.bashrc\n#\n# This file is sourced by all *interactive* bash shells on startup,\n# including some apparently interactive shells such as scp and rcp\n# that can't tolerate any output.  So make sure this doesn't display\n# anything or bad things will happen !\n\n\n# Test for an interactive shell.  There is no need to set anything\n# past this point for scp and rcp, and it's important to refrain from\n# outputting anything in those cases.\nif [[ $- != *i* ]] ; then\n    # Shell is non-interactive.  Be done now!\n    return\nfi\n\n\n# Put your fun stuff here.\nexport PATH=$HOME/bin:$PATH\n\n\n\u6700\u5f8c\u306e1\u884c\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\nDocker Hub\u306b\u3042\u308bnginx\u306e\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u8a66\u3057\u3066\u307f\u305f\nDocker Hub Registry - Repositories of Docker Images\u306eOfficial Repositories\u304b\u3089nginx Repository | Docker Hub Registry - Repositories of Docker Images\u306b\u9032\u3093\u3067\u8aac\u660e\u3092\u8aad\u307f\u307e\u3059\u3002\nmanifest file\u306b\u3088\u308b\u3068\u3001Dockerfile\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306fnginxinc/docker-nginx\u306b\u3042\u308a\u307e\u3059\u3002\ndocker-nginx/Dockerfile at master \u00b7 nginxinc/docker-nginx\u3067\u5185\u5bb9\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nFROM debian:wheezy\n\nMAINTAINER NGINX Docker Maintainers \"docker-maint@nginx.com\"\n\nRUN apt-key adv --keyserver pgp.mit.edu --recv-keys 573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62\nRUN echo \"deb http://nginx.org/packages/mainline/debian/ wheezy nginx\" >> /etc/apt/sources.list\n\nENV NGINX_VERSION 1.7.7-1~wheezy\n\nRUN apt-get update && apt-get install -y nginx=${NGINX_VERSION} && apt-get clean && rm -rf /var/lib/apt/lists/*\n\n# forward request and error logs to docker log collector\nRUN ln -sf /dev/stdout /var/log/nginx/access.log\nRUN ln -sf /dev/stderr /var/log/nginx/error.log\n\nVOLUME [\"/var/cache/nginx\"]\n\nEXPOSE 80 443\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n\ndebian:wheezy\u306e\u30a4\u30e1\u30fc\u30b8\u306bnginx\u306emainline\u306e\u516c\u5f0f\u30ec\u30dd\u30b8\u30c8\u30ea\u304b\u3089apt-get\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001 /var/log/nginx/access.log \u3068 /var/log/nginx/error.log \u3092\u305d\u308c\u305e\u308c /dev/stdout \u3068 /dev/stderr \u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3059\u308b\u3053\u3068\u3067 docker logs\u30b3\u30de\u30f3\u30c9\u3067\u30ed\u30b0\u3092\u898b\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3046\u3044\u3046\u65b9\u6cd5\u304c\u3042\u308b\u3093\u3067\u3059\u306d\u30fc\u3001\u52c9\u5f37\u306b\u306a\u308a\u307e\u3059\u3002\n\nnginx.conf\u3092\u5909\u66f4\u3057\u305f\u3044\u306e\u3067\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\nnginx.conf\u306b server_tokens off; \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u305f\u3081\u3001\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\u307e\u305a\u4f5c\u696d\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\nmkdir -p ~/docker/nginx\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\nbuild.sh\n#!/bin/sh\ndocker build -t naruh/nginx `dirname $0`\n\n\n\nDockerfile\nFROM nginx\nMAINTAINER Hiroaki Nakamura <hnakamur@gmail.com>\n\nADD nginx.conf /etc/nginx/nginx.conf\n\n\n\nnginx.conf\n\nuser  nginx;\nworker_processes  1;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    server_tokens off;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n\n\nnginx.conf\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u3042\u3063\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5185\u5bb9\u306b server_tokens off; \u306e1\u884c\u3092\u8ffd\u52a0\u3057\u305f\u3060\u3051\u3067\u3059\u3002\n\nrun.sh\n#!/bin/sh\nsudo docker run --name nginx -d -p 80:80 -v /data:/usr/share/nginx/html:ro naruh/nginx\n\n\n/data \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u6240\u6709\u8005\u3092 core \u30e6\u30fc\u30b6\u306b\u5909\u3048\u3066\u305d\u3053\u306bnginx\u3067\u516c\u958b\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d1\u30fc\u30df\u30b7\u30e7\u30f3644\u3067\u7f6e\u304d\u307e\u3059 (640\u3060\u3068403 Forbidden\u306b\u306a\u308a\u307e\u3057\u305f)\u3002\n\u3042\u3068\u306fdocker\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n./build.sh\n./run.sh\n\n\n\u307e\u3068\u3081\n\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u3067\u4e88\u3081\u7528\u610f\u3055\u308c\u3066\u3044\u308bCoreOS\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3046\u3053\u3068\u3067\u7c21\u5358\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\nVagrant Cloud\u306b\u306f\u4ee5\u4e0b\u306e\u540d\u524d\u3067CentOS 7.0\u30686.6\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\u305f\u3060\u3057\u90fd\u5408\u306b\u3088\u308a\u5c06\u6765\u6d88\u3059\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306e\u3067\u305d\u306e\u70b9\u306f\u3054\u4e86\u627f\u9858\u3044\u307e\u3059\u3002\n\nhnakamur/centos7.0-x64\nhnakamur/centos6.6-x64\n\n# \u306f\u3058\u3081\u306b\n\n11\u670814\u65e5\u306e[\u7b2c5\u56de \u30b3\u30f3\u30c6\u30ca\u578b\u4eee\u60f3\u5316\u306e\u60c5\u5831\u4ea4\u63db\u4f1a\uff20\u5927\u962a - connpass](http://ct-study.connpass.com/event/9068/)\u3067\u3001\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u306e2\u4e07\u5186\u5206\u30af\u30fc\u30dd\u30f3\u5238\u3092\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\n\u4f55\u306b\u4f7f\u304a\u3046\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001[packer - VirtualBox\u7528\u306eCentOS base box\u3092\u4f5c\u3063\u3066GitHub Releases\u3067\u5171\u6709\u3059\u308b - Qiita](http://qiita.com/hnakamur/items/66a1a1cc0f9b1eeb91f6#comment-a17dbfb97d03374a1508)\u306e[\u30b3\u30e1\u30f3\u30c8](http://qiita.com/hnakamur/items/66a1a1cc0f9b1eeb91f6#comment-a17dbfb97d03374a1508)\u306b\u66f8\u3044\u305f\u3088\u3046\u306bGitHub release\u306bVagrant box\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u306e\u304c\u4ee5\u524d\u306f\u51fa\u6765\u3066\u3044\u305f\u306e\u304c\u51fa\u6765\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u3065\u304d\u307e\u3057\u305f\u3002\n\n\u305d\u3053\u3067\u3001Google Drive\u3084OneDrive\u3067box\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\u306e\u3082\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001Vagrant Cloud\u306b\u516c\u958b\u7528\u306eURL\u3092\u767b\u9332\u3057\u3066\u3082\u3001 `vagrant up` \u304c\u3046\u307e\u304f\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n[Quotas - Google App Engine \u2014 Google Cloud Platform](https://cloud.google.com/appengine/docs/quotas)\u306b\u3088\u308b\u3068Google App Engine\u306eBlobstore\u306a\u3089\u7121\u6599\u67a0\u30675GB\u307e\u3067\u4f7f\u3048\u308b\u306e\u3067\u3001[Blobstore Go API Overview - Go \u2014 Google Cloud Platform](https://cloud.google.com/appengine/docs/go/blobstore/)\u3092\u5c11\u3057\u767a\u5c55\u3055\u305b\u305f\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306e\u8ee2\u9001\u91cf\u304c\u7121\u6599\u67a0\u3060\u30681\u65e51GB\u306a\u306e\u3067box\u30922\u56de\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3089\u8d85\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3073\u306b\u304a\u91d1\u304c\u304b\u304b\u308b\u306e\u306f\u5acc\u306a\u306e\u3067\u30dc\u30c4\u3068\u3057\u307e\u3057\u305f\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u3067box\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5e03\u3059\u308b\u3088\u3046\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066Vagrant Cloud\u306b\u767b\u9332\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n# \u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u3067CoreOS\u3092\u8a66\u3057\u3066\u307f\u305f\n\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u52c9\u5f37\u306e\u305f\u3081CoreOS\u3092\u8a66\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n[\u30b5\u30fc\u30d0\u306e\u4f5c\u6210\u30fb\u524a\u9664\uff5c\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\uff5c\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u30b5\u30a4\u30c8](http://support.sakura.ad.jp/manual/cloud/basic/server.html)\u306e\u300c2.\u30c7\u30a3\u30b9\u30af\u300d\u306e\u300c\u30a2\u30fc\u30ab\u30a4\u30d6\u9078\u629e\u300d\u3067\u300cCoreOS 367.1.0 (stable)\u300d\u3068\u3044\u3046\u306e\u304c\u4e88\u3081\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u308c\u3092\u9078\u3073\u307e\u3057\u305f\u3002\n\n\u300c4.\u30c7\u30a3\u30b9\u30af\u306e\u4fee\u6b63\u300d\u3067\u306f\n* \u300c\u7ba1\u7406\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u300d\u3092\u8a2d\u5b9a\n* \u300c\u30db\u30b9\u30c8\u540d\u300d\u3092\u8a2d\u5b9a\n* \u300c\u516c\u958b\u9375\u300d\u306e\u4e0b\u306e\u30e9\u30b8\u30aa\u30dc\u30bf\u30f3\u3067\u300c\u5165\u529b\u300d\u3092\u9078\u3073\u3001\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u81ea\u5206\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u516c\u958b\u9375\u306e\u5185\u5bb9\u3092\u30b3\u30d4\u30da\n\u3057\u307e\u3057\u305f\u3002\n\n\u79c1\u306fUS\u30ad\u30fc\u30dc\u30fc\u30c9\u306eMacBook\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u300c6. \u305d\u306e\u4ed6\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u300d\u306e\u300c\u4eee\u60f3\u30b5\u30fc\u30d0\u4e0a\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u3092US\u914d\u5217\u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u300d\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306b\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u307e\u3057\u305f\u3002\n\n\u30b5\u30fc\u30d0\u3092\u4f5c\u6210\u3057\u3066\u8d77\u52d5\u3057\u305f\u3089\u3001\u767b\u9332\u3057\u305f\u516c\u958b\u9375\u306b\u5bfe\u5fdc\u3059\u308b\u79d8\u5bc6\u9375\u3092\u4f7f\u3063\u3066 `core` \u30e6\u30fc\u30b6\u3067ssh\u51fa\u6765\u308b\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u697d\u3061\u3093\u3067\u3059\u3002\n\n\u4e00\u5ea6 `shutdown -r now` \u3067\u8d77\u52d5\u3057\u305f\u5f8c\u306b\u78ba\u8a8d\u3057\u305f\u3089\u3001CoreOS Stable\u306e\u73fe\u6642\u70b9\u3067\u306e\u6700\u65b0\u7248444.5.0\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\n```shell-session\ncore@naruh ~/docker $ ls -l /etc/*release\nlrwxrwxrwx 1 root root 31 Jul 13 08:18 /etc/lsb-release -> ../usr/share/coreos/lsb-release\nlrwxrwxrwx 1 root root 30 Jul 13 08:18 /etc/os-release -> ../usr/share/coreos/os-release\n\n\ncore@naruh ~/docker $ cat /etc/os-release\nNAME=CoreOS\nID=coreos\nVERSION=444.5.0\nVERSION_ID=444.5.0\nBUILD_ID=\nPRETTY_NAME=\"CoreOS 444.5.0\"\nANSI_COLOR=\"1;32\"\nHOME_URL=\"https://coreos.com/\"\nBUG_REPORT_URL=\"https://github.com/coreos/bugs/issues\"\ncore@naruh ~/docker $ cat /etc/lsb-release\nDISTRIB_ID=CoreOS\nDISTRIB_RELEASE=444.5.0\nDISTRIB_CODENAME=\"Red Dog\"\nDISTRIB_DESCRIPTION=\"CoreOS 444.5.0\"\n```\n\n## DNS\u306e\u6b63\u5f15\u304d\u3001\u9006\u5f15\u304d\u8a2d\u5b9a\u3082\u3057\u3066\u307f\u305f\n\n\u79c1\u304cvalue-domain\u3067\u4fdd\u6709\u3057\u3066\u3044\u308b naruh.net \u3068\u3044\u3046\u30c9\u30e1\u30a4\u30f3\u3092value-domain\u306e\u7ba1\u7406\u753b\u9762\u3067 naruh.net \u306e\u6b63\u5f15\u304d\u3092\u3053\u306e\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u5bfe\u5fdc\u3055\u305b\u307e\u3057\u305f\u3002\n\u305d\u306e\u5f8c\u3001[DNS\u9006\u5f15\u304d\u30ec\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\uff5c\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\uff5c\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u30b5\u30a4\u30c8](http://support.sakura.ad.jp/manual/cloud/domain/rdns_record.html)\u306e\u624b\u9806\u306b\u5f93\u3063\u3066\u9006\u5f15\u304d\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\n## \u751f\u6210\u3055\u308c\u305fcloud-config\u3092\u898b\u3066\u307f\u305f\n\n\n```yml:/usr/share/oem/cloud-config.yml\n#cloud-config\n\ncoreos:\n  units:\n    -\n      command: restart\n      name: coreos-setup-environment.service\n    -\n      command: restart\n      name: systemd-networkd.service\n    -\n      command: start\n      content: \"[Unit]\\nDescription=timezone\\n[Service]\\nType=oneshot\\nRemainAfterExit=yes\\nExecStart=/usr/bin/ln -sf ../usr/share/zoneinfo/Japan /etc/localtime\\n\"\n      name: timezone.service\n\nssh_authorized_keys:\n  - ssh-rsa \u2026(\u7565)\u2026\n\nhostname: \u2026(\u7565)\u2026\n\nusers:\n  -\n    name: core\n    passwd: \u2026(\u7565)\u2026\n\nwrite_files:\n  -\n    content: \"[Match]\\nName=e*\\n\\n[Network]\\nAddress=XXX.YYY.236.91/24\\nGateway=XXX.YYY.236.1\\nDNS=XXX.YYY.0.3\\nDNS=XXX.YYY.0.4\\n\"\n    path: /etc/systemd/network/10-static.network\n```\n\n`date` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u3089JST\u306b\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306f `timezone.service` \u306e `ExecStart` \u3067\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3093\u3067\u3059\u306d\u3002\n\u307e\u305f\u3001\u516c\u958b\u9375\u3001\u30db\u30b9\u30c8\u540d\u3001\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u306a\u3093\u3089\u304b\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u3082\u306e\u3082\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n[(\u3061\u3087\u3063\u3068\u81ea\u52d5\u3067)\u3055\u304f\u3089\u306eVPS\u306bCoreOS\u3092\u5165\u308c\u308b\u30e1\u30e2 - Qiita](http://qiita.com/koki_cheese/items/6f773a830a4d726a1fac)\u306e\u8a18\u4e8b\u306bcloud-config\u3067\u56fa\u5b9aIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u304c\u66f8\u304b\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3053\u3061\u3089\u3067\u306f\u5c11\u3057\u9055\u3063\u305f\u65b9\u6cd5\u3067\u5b9f\u73fe\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n## docker-enter\u306e\u4f5c\u6210\u3068~/.bashrc\u306e\u4fee\u6b63\n\n[CoreOS Stable 444.5.0](https://coreos.com/releases/#444.5.0)\u306b\u542b\u307e\u308c\u308bdocker\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.2.0\u306a\u306e\u3067\u3001 `docker exec` \u304c\u4f7f\u3048\u307e\u305b\u3093\u3002 `nsenter` \u306f\u3042\u308b\u306e\u3067[docker - nsinit \u304c\u4e0a\u624b\u304f\u884c\u304b\u306a\u304f\u3066\u56f0\u3063\u3066\u3044\u305f\u3089 nsenter \u304c\u3042\u307e\u308a\u306b\u3082\u3042\u3063\u3055\u308a\u3060\u3063\u305f\u4ef6 - Qiita](http://qiita.com/yungsang/items/915f7c2ae6ccb239d5ee)\u3068[CoreOS \u3067\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u4e2d\u306b\u5165\u308b - Qiita](http://qiita.com/spesnova/items/8121615d4634500a331c#coreos-%E3%81%A7-docker-enter-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AE%E4%B8%AD%E3%81%AB%E5%85%A5%E3%82%8B)\u3092\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306bdocker-enter\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n```sh:~/bin/docker-enter\n#!/bin/sh\nsudo nsenter --target $(docker inspect --format '{{.State.Pid}}' $1) --mount --uts --ipc --net --pid\n```\n\nPATH\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081~/.bashrc\u3092\u5909\u66f4\u3057\u305f\u3044\u306e\u3067\u3059\u304c\u3001\u521d\u671f\u72b6\u614b\u3067\u306f /usr/share/skel/.bashrc \u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\n```shell-session\ncore@naruh ~/docker/nginx $ ls -l ~/.bashrc\nlrwxrwxrwx 1 core core 28 Jul 13 08:18 /home/core/.bashrc -> ../../usr/share/skel/.bashrc\n```\n\n\u305d\u3053\u3067\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u6d88\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304b\u3089\u7de8\u96c6\u3057\u307e\u3057\u305f\u3002\n\n```shell-session\ncore@naruh ~/docker/nginx $ rm ~/.bashrc\ncore@naruh ~/docker/nginx $ cp /usr/share/skel/.bashrc ~/.bashrc\n```\n\n```sh:~/.bashrc\n# /etc/skel/.bashrc\n#\n# This file is sourced by all *interactive* bash shells on startup,\n# including some apparently interactive shells such as scp and rcp\n# that can't tolerate any output.  So make sure this doesn't display\n# anything or bad things will happen !\n\n\n# Test for an interactive shell.  There is no need to set anything\n# past this point for scp and rcp, and it's important to refrain from\n# outputting anything in those cases.\nif [[ $- != *i* ]] ; then\n\t# Shell is non-interactive.  Be done now!\n\treturn\nfi\n\n\n# Put your fun stuff here.\nexport PATH=$HOME/bin:$PATH\n```\n\n\u6700\u5f8c\u306e1\u884c\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\n# Docker Hub\u306b\u3042\u308bnginx\u306e\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u8a66\u3057\u3066\u307f\u305f\n\n[Docker Hub Registry - Repositories of Docker Images](https://registry.hub.docker.com/)\u306eOfficial Repositories\u304b\u3089[nginx Repository | Docker Hub Registry - Repositories of Docker Images](https://registry.hub.docker.com/_/nginx/)\u306b\u9032\u3093\u3067\u8aac\u660e\u3092\u8aad\u307f\u307e\u3059\u3002\n\n[manifest file](https://github.com/docker-library/official-images/blob/master/library/nginx)\u306b\u3088\u308b\u3068\u3001Dockerfile\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306f[nginxinc/docker-nginx](https://github.com/nginxinc/docker-nginx)\u306b\u3042\u308a\u307e\u3059\u3002\n[docker-nginx/Dockerfile at master \u00b7 nginxinc/docker-nginx](https://github.com/nginxinc/docker-nginx/blob/master/Dockerfile)\u3067\u5185\u5bb9\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```\nFROM debian:wheezy\n\nMAINTAINER NGINX Docker Maintainers \"docker-maint@nginx.com\"\n\nRUN apt-key adv --keyserver pgp.mit.edu --recv-keys 573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62\nRUN echo \"deb http://nginx.org/packages/mainline/debian/ wheezy nginx\" >> /etc/apt/sources.list\n\nENV NGINX_VERSION 1.7.7-1~wheezy\n\nRUN apt-get update && apt-get install -y nginx=${NGINX_VERSION} && apt-get clean && rm -rf /var/lib/apt/lists/*\n\n# forward request and error logs to docker log collector\nRUN ln -sf /dev/stdout /var/log/nginx/access.log\nRUN ln -sf /dev/stderr /var/log/nginx/error.log\n\nVOLUME [\"/var/cache/nginx\"]\n\nEXPOSE 80 443\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n```\n\ndebian:wheezy\u306e\u30a4\u30e1\u30fc\u30b8\u306bnginx\u306emainline\u306e\u516c\u5f0f\u30ec\u30dd\u30b8\u30c8\u30ea\u304b\u3089apt-get\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001 `/var/log/nginx/access.log` \u3068 `/var/log/nginx/error.log` \u3092\u305d\u308c\u305e\u308c `/dev/stdout` \u3068 `/dev/stderr` \u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3059\u308b\u3053\u3068\u3067 [docker logs](https://docs.docker.com/reference/commandline/cli/#logs)\u30b3\u30de\u30f3\u30c9\u3067\u30ed\u30b0\u3092\u898b\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3046\u3044\u3046\u65b9\u6cd5\u304c\u3042\u308b\u3093\u3067\u3059\u306d\u30fc\u3001\u52c9\u5f37\u306b\u306a\u308a\u307e\u3059\u3002\n\n## nginx.conf\u3092\u5909\u66f4\u3057\u305f\u3044\u306e\u3067\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\n\nnginx.conf\u306b `server_tokens off;` \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u305f\u3081\u3001\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\u307e\u305a\u4f5c\u696d\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```shell-session\nmkdir -p ~/docker/nginx\n```\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n```sh:build.sh\n#!/bin/sh\ndocker build -t naruh/nginx `dirname $0`\n```\n\n```:Dockerfile\nFROM nginx\nMAINTAINER Hiroaki Nakamura <hnakamur@gmail.com>\n\nADD nginx.conf /etc/nginx/nginx.conf\n```\n\n```:nginx.conf\n\nuser  nginx;\nworker_processes  1;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    server_tokens off;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n```\n\nnginx.conf\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u3042\u3063\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5185\u5bb9\u306b `server_tokens off;` \u306e1\u884c\u3092\u8ffd\u52a0\u3057\u305f\u3060\u3051\u3067\u3059\u3002\n\n```sh:run.sh\n#!/bin/sh\nsudo docker run --name nginx -d -p 80:80 -v /data:/usr/share/nginx/html:ro naruh/nginx\n```\n\n`/data` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u6240\u6709\u8005\u3092 `core` \u30e6\u30fc\u30b6\u306b\u5909\u3048\u3066\u305d\u3053\u306bnginx\u3067\u516c\u958b\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d1\u30fc\u30df\u30b7\u30e7\u30f3644\u3067\u7f6e\u304d\u307e\u3059 (640\u3060\u3068403 Forbidden\u306b\u306a\u308a\u307e\u3057\u305f)\u3002\n\n\u3042\u3068\u306fdocker\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n```shell-session\n./build.sh\n./run.sh\n```\n\n# \u307e\u3068\u3081\n\n\u3055\u304f\u3089\u306e\u30af\u30e9\u30a6\u30c9\u3067\u4e88\u3081\u7528\u610f\u3055\u308c\u3066\u3044\u308bCoreOS\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3046\u3053\u3068\u3067\u7c21\u5358\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\nVagrant Cloud\u306b\u306f\u4ee5\u4e0b\u306e\u540d\u524d\u3067CentOS 7.0\u30686.6\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\u305f\u3060\u3057\u90fd\u5408\u306b\u3088\u308a\u5c06\u6765\u6d88\u3059\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306e\u3067\u305d\u306e\u70b9\u306f\u3054\u4e86\u627f\u9858\u3044\u307e\u3059\u3002\n\n* [hnakamur/centos7.0-x64](https://vagrantcloud.com/hnakamur/boxes/centos7.0-x64)\n* [hnakamur/centos6.6-x64](https://vagrantcloud.com/hnakamur/boxes/centos6.6-x64)\n"}