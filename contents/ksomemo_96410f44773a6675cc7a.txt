{"tags": ["pandas", "Python3.5.1"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u672c\u984c\nDataFrame\u3092zip\u306b\u5727\u7e2e\u3057\u305f\u304b\u3063\u305f\n\n0.17.1\u3067gz\u5316\u306f\u3067\u304d\u308b\u3051\u3069\u3001zip\u306f\u3067\u304d\u306a\u3044\n\u4e00\u65e6\u30d5\u30a1\u30a4\u30eb\u306b\u3057\u3066\u304b\u3089zip\u306b\u3059\u308b\u306e\u3081\u3093\u3069\u3044\nZipFile.writestr \u3068\u3044\u3046\u6587\u5b57\u5217\u3092archive\u306b\u542b\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3053\u3068\u3092\u77e5\u308b\nDataFrame\u306bto_string \u3068\u3044\u3046\u6587\u5b57\u5217\u5316\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u3053\u3068\u3092\u77e5\u308b\n\n\u7d50\u679c\u3068\u3057\u3066\u306f\u3001to_string\u3068open(to_csv).read()\u306f\u4e00\u81f4\u3057\u306a\u3044\u306e\u3067\u3001\u8ae6\u3081\u3066\u5225\u306e\u65b9\u6cd5\u3067\u89e3\u6c7a\u3057\u305f\n\n\u904e\u7a0b\u3067\u95a2\u4fc2\u306a\u3044\u3051\u3069\u8abf\u3079\u305f\u3053\u3068\n\nrandint\u3068rand_integers\u306e\u9055\u3044\u3092\u77e5\u3063\u305f(\u9589\u533a\u9593\u3068\u958b\u533a\u9593)\nmemory\u4e0a\u3067\u306ezip\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\npansas.to_datetime \u306f\u305d\u308c\u3063\u307d\u3044\u6587\u5b57\u5217\u3092parse\u3057\u3066\u304f\u308c\u308b\nseaborn\u4fbf\u5229\n\n\ndf_to_str_and_zip_write_str.py\nimport numpy as np\nimport pandas as pd\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nnp.random.seed(0)\n\n_1_to_3less = np.random.randint(1, 3, size=(7, 5))\n_1_to_3less\n\n    array([[1, 2, 2, 1, 2],\n           [2, 2, 2, 2, 2],\n           [2, 1, 1, 2, 1],\n           [1, 1, 1, 1, 2],\n           [1, 2, 2, 1, 1],\n           [2, 2, 2, 2, 1],\n           [2, 1, 2, 1, 2]])\n\n\n_1_to_3 = np.random.random_integers(1, 3, size=(7, 5))\n_1_to_3\n\n    array([[2, 3, 1, 3, 1],\n           [2, 2, 3, 1, 2],\n           [2, 2, 1, 3, 1],\n           [3, 3, 1, 3, 1],\n           [1, 1, 2, 2, 3],\n           [1, 1, 2, 1, 2],\n           [3, 3, 1, 2, 2]])\n\ndf = pd.DataFrame(_1_to_3, columns=list(\"abcde\"))\nprint(df.to_string(index=False, header=False), end=\"\")\n\n     2  3  1  3  1\n     2  2  3  1  2\n     2  2  1  3  1\n     3  3  1  3  1\n     1  1  2  2  3\n     1  1  2  1  2\n     3  3  1  2  2\n\nimport io\nstrio = io.StringIO()\n_str = df.to_string(buf=strio)\nprint(_str)\nprint(strio.getvalue())\n#for l in strio:\n#    print(l)\n# \u306a\u305c\u304bread\u7cfb\u306fFalse\u306b\u306a\u308b\u5024\u304c\u8fd4\u3063\u3066\u304f\u308b, to_string()\u3092StrinIO()\u306b\u6e21\u305b\u3070\u554f\u984c\u306a\u3044\u2026\n\n    None\n       a  b  c  d  e\n    0  2  3  1  3  1\n    1  2  2  3  1  2\n    2  2  2  1  3  1\n    3  3  3  1  3  1\n    4  1  1  2  2  3\n    5  1  1  2  1  2\n    6  3  3  1  2  2\n\nimport os\ncsv_file = \"______.csv\"\ndf.to_csv(csv_file, index=False, header=False)\nwith open(csv_file) as f:\n    print(f.read())\n\n    2,3,1,3,1\n    2,2,3,1,2\n    2,2,1,3,1\n    3,3,1,3,1\n    1,1,2,2,3\n    1,1,2,1,2\n    3,3,1,2,2\n\n# \u6587\u5b57\u5217\u3068\u3057\u3066\u306e\u5024\u304cfile\u8aad\u307f\u8fbc\u307f\u3068\u540c\u3058\u3067\u3042\u3063\u305f\u5834\u5408\nimport zipfile\nwith zipfile.ZipFile(\"file.zip\", \"w\", zipfile.ZIP_DEFLATED) as z:\n    z.writestr(\"file.txt\", df.to_string())\n    z.writestr(\"depth1/2.txt\", \"test\")\n\n# \u304a\u307e\u30511\nfrom contextlib import ExitStack\nwith ExitStack() as s:\n    _bio = s.enter_context(io.BytesIO())\n    z = s.enter_context(zipfile.ZipFile(_bio, \"w\", compression=zipfile.ZIP_DEFLATED))\n    z.writestr(\"a.txt\", \"aaaa\")\n    z.writestr(\"c/d.txt\", \"ccdd\")\n    print(_bio.getvalue()[:4])\n\n    b'PK\\x03\\x04'\n\n# \u304a\u307e\u30512\npd.to_datetime(\"now\").date().isoformat()\npd.to_datetime(\"+1days\") # 0.17.1\u3067\u306f\u30a8\u30e9\u30fc\u4ee5\u524d\u306f\u6587\u5b57\u5217\u306e\u307e\u307e\u8fd4\u3063\u3066\u304f\u308b\n\n# \u304a\u307e\u30513\nsns.pairplot(data=df, hue=\"d\")\n\n    <seaborn.axisgrid.PairGrid at 0x12094fc88>\n![image](https://qiita-image-store.s3.amazonaws.com/0/6982/dcdb26ff-5393-c07d-c28c-56ccb4296856.png)\n\n\n\n## \u672c\u984c\nDataFrame\u3092zip\u306b\u5727\u7e2e\u3057\u305f\u304b\u3063\u305f\n\n- 0.17.1\u3067gz\u5316\u306f\u3067\u304d\u308b\u3051\u3069\u3001zip\u306f\u3067\u304d\u306a\u3044\n- \u4e00\u65e6\u30d5\u30a1\u30a4\u30eb\u306b\u3057\u3066\u304b\u3089zip\u306b\u3059\u308b\u306e\u3081\u3093\u3069\u3044\n- ZipFile.writestr \u3068\u3044\u3046\u6587\u5b57\u5217\u3092archive\u306b\u542b\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3053\u3068\u3092\u77e5\u308b\n- DataFrame\u306bto_string \u3068\u3044\u3046\u6587\u5b57\u5217\u5316\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u3053\u3068\u3092\u77e5\u308b\n\n\u7d50\u679c\u3068\u3057\u3066\u306f\u3001to_string\u3068open(to_csv).read()\u306f\u4e00\u81f4\u3057\u306a\u3044\u306e\u3067\u3001\u8ae6\u3081\u3066\u5225\u306e\u65b9\u6cd5\u3067\u89e3\u6c7a\u3057\u305f\n\n## \u904e\u7a0b\u3067\u95a2\u4fc2\u306a\u3044\u3051\u3069\u8abf\u3079\u305f\u3053\u3068\n- randint\u3068rand_integers\u306e\u9055\u3044\u3092\u77e5\u3063\u305f(\u9589\u533a\u9593\u3068\u958b\u533a\u9593)\n- memory\u4e0a\u3067\u306ezip\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n- pansas.to_datetime \u306f\u305d\u308c\u3063\u307d\u3044\u6587\u5b57\u5217\u3092parse\u3057\u3066\u304f\u308c\u308b\n- seaborn\u4fbf\u5229\n\n```py3:df_to_str_and_zip_write_str.py\nimport numpy as np\nimport pandas as pd\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\nnp.random.seed(0)\n\n_1_to_3less = np.random.randint(1, 3, size=(7, 5))\n_1_to_3less\n\n    array([[1, 2, 2, 1, 2],\n           [2, 2, 2, 2, 2],\n           [2, 1, 1, 2, 1],\n           [1, 1, 1, 1, 2],\n           [1, 2, 2, 1, 1],\n           [2, 2, 2, 2, 1],\n           [2, 1, 2, 1, 2]])\n\n\n_1_to_3 = np.random.random_integers(1, 3, size=(7, 5))\n_1_to_3\n\n    array([[2, 3, 1, 3, 1],\n           [2, 2, 3, 1, 2],\n           [2, 2, 1, 3, 1],\n           [3, 3, 1, 3, 1],\n           [1, 1, 2, 2, 3],\n           [1, 1, 2, 1, 2],\n           [3, 3, 1, 2, 2]])\n\ndf = pd.DataFrame(_1_to_3, columns=list(\"abcde\"))\nprint(df.to_string(index=False, header=False), end=\"\")\n\n     2  3  1  3  1\n     2  2  3  1  2\n     2  2  1  3  1\n     3  3  1  3  1\n     1  1  2  2  3\n     1  1  2  1  2\n     3  3  1  2  2\n\nimport io\nstrio = io.StringIO()\n_str = df.to_string(buf=strio)\nprint(_str)\nprint(strio.getvalue())\n#for l in strio:\n#    print(l)\n# \u306a\u305c\u304bread\u7cfb\u306fFalse\u306b\u306a\u308b\u5024\u304c\u8fd4\u3063\u3066\u304f\u308b, to_string()\u3092StrinIO()\u306b\u6e21\u305b\u3070\u554f\u984c\u306a\u3044\u2026\n\n    None\n       a  b  c  d  e\n    0  2  3  1  3  1\n    1  2  2  3  1  2\n    2  2  2  1  3  1\n    3  3  3  1  3  1\n    4  1  1  2  2  3\n    5  1  1  2  1  2\n    6  3  3  1  2  2\n\nimport os\ncsv_file = \"______.csv\"\ndf.to_csv(csv_file, index=False, header=False)\nwith open(csv_file) as f:\n    print(f.read())\n\n    2,3,1,3,1\n    2,2,3,1,2\n    2,2,1,3,1\n    3,3,1,3,1\n    1,1,2,2,3\n    1,1,2,1,2\n    3,3,1,2,2\n\n# \u6587\u5b57\u5217\u3068\u3057\u3066\u306e\u5024\u304cfile\u8aad\u307f\u8fbc\u307f\u3068\u540c\u3058\u3067\u3042\u3063\u305f\u5834\u5408\nimport zipfile\nwith zipfile.ZipFile(\"file.zip\", \"w\", zipfile.ZIP_DEFLATED) as z:\n    z.writestr(\"file.txt\", df.to_string())\n    z.writestr(\"depth1/2.txt\", \"test\")\n\n# \u304a\u307e\u30511\nfrom contextlib import ExitStack\nwith ExitStack() as s:\n    _bio = s.enter_context(io.BytesIO())\n    z = s.enter_context(zipfile.ZipFile(_bio, \"w\", compression=zipfile.ZIP_DEFLATED))\n    z.writestr(\"a.txt\", \"aaaa\")\n    z.writestr(\"c/d.txt\", \"ccdd\")\n    print(_bio.getvalue()[:4])\n\n    b'PK\\x03\\x04'\n\n# \u304a\u307e\u30512\npd.to_datetime(\"now\").date().isoformat()\npd.to_datetime(\"+1days\") # 0.17.1\u3067\u306f\u30a8\u30e9\u30fc\u4ee5\u524d\u306f\u6587\u5b57\u5217\u306e\u307e\u307e\u8fd4\u3063\u3066\u304f\u308b\n\n# \u304a\u307e\u30513\nsns.pairplot(data=df, hue=\"d\")\n\n    <seaborn.axisgrid.PairGrid at 0x12094fc88>\n![image](https://qiita-image-store.s3.amazonaws.com/0/6982/dcdb26ff-5393-c07d-c28c-56ccb4296856.png)\n```\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/6982/dcdb26ff-5393-c07d-c28c-56ccb4296856.png)\n"}