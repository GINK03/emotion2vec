{"context": " More than 1 year has passed since last update.\u8272\u3005\u8abf\u3079\u3066\u307f\u308b\u3068\u4e0b\u8a18\u306e\u65b9\u6cd5\u3067\u826f\u3044\u307f\u305f\u3044\u3067\u3059\u3002\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30b5\u30a4\u30c8\u69d8\n\njoker1007\u306e\u65e5\u8a18\n\nvar map = function() {\n    if (!this.tags || this.contributor != '__USERID__') { return; }\n    for (index in this.tags) {\n        emit(this.tags[index], 1);\n    }\n};\nvar reduce = function(previous, current) {\n    var count = 0;\n    for (index in current) {\n        count += current[index];\n    }\n    return count;\n};\n\nmap = map.toString().replace('__USERID__', userId); // map\u306b\u5909\u6570\u3092\u6e21\u3059\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u6587\u5b57\u5217\u306b\u5f37\u5f15\u306b\u57cb\u3081\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\u30a4\u30b1\u30c6\u30ca\u30a4\u3002\nreduce = reduce.toString();\n\ndb.model('Item').collection.mapReduce(map, reduce, {out: {inline: 1}}, function(err, val) {\n    console.log(err);\n    console.log(val);\n});\n\n\u8272\u3005\u8abf\u3079\u3066\u307f\u308b\u3068\u4e0b\u8a18\u306e\u65b9\u6cd5\u3067\u826f\u3044\u307f\u305f\u3044\u3067\u3059\u3002\n\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30b5\u30a4\u30c8\u69d8\n\n- [joker1007\u306e\u65e5\u8a18](http://d.hatena.ne.jp/joker1007/20110824/1314197437)\n\n```javascript\nvar map = function() {\n    if (!this.tags || this.contributor != '__USERID__') { return; }\n    for (index in this.tags) {\n        emit(this.tags[index], 1);\n    }\n};\nvar reduce = function(previous, current) {\n    var count = 0;\n    for (index in current) {\n        count += current[index];\n    }\n    return count;\n};\n\nmap = map.toString().replace('__USERID__', userId); // map\u306b\u5909\u6570\u3092\u6e21\u3059\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u6587\u5b57\u5217\u306b\u5f37\u5f15\u306b\u57cb\u3081\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\u30a4\u30b1\u30c6\u30ca\u30a4\u3002\nreduce = reduce.toString();\n\ndb.model('Item').collection.mapReduce(map, reduce, {out: {inline: 1}}, function(err, val) {\n    console.log(err);\n    console.log(val);\n});\n```\n", "tags": ["Node.js", "JavaScript", "MongoDB", "mongoose"]}