{"tags": ["Hue", "IoT", "JavaScript"], "context": " More than 1 year has passed since last update.\nSuperAgent\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\nindex.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <title></title>\n  </head>\n  <body>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/superagent/1.2.0/superagent.min.js\"></script>\n    <script src=\"app.js\"></script>\n  </body>\n</html>\n\n\n\n\napp.js\nvar request = window.superagent;\nvar IPURL = 'https://www.meethue.com/api/nupnp';\nvar hueapi = ''; //\nvar USERNAME = 'lig-n0bisuke';\nvar flag = true;\n\n//Hue\u64cd\u4f5c\u3088\u3046\u306eAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4f5c\u6210\nfunction createEndpoint(ip){\n  return 'http://'+ip+'/api/'+USERNAME+'/lights/';\n}\n\nrequest\n  .get(IPURL)\n  .set('Accept', 'application/json')\n  .end(function(err, res){\n    var ipadress = res.body[0].internalipaddress; //Hue\u306eIP\u30a2\u30c9\u30ec\u30b9\n    hueapi = createEndpoint(ipadress);\n  });\n\nfunction ctrlHue(id, flag){\n  if(hueapi === '')return;\n\n  request\n    .put(hueapi+id+'/state')\n    .send({on: flag})\n    .set('Accept', 'application/json')\n    .end(function(err, res){\n      console.log(res.body[0]);\n    });\n}\n\nsetInterval(function(){\n  flag = !flag;\n  ctrlHue(1, flag);\n},2000);\n\n\n\u3053\u308c\u30672\u79d2\u3054\u3068\u306b\u70b9\u6ec5\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n![](https://i.gyazo.com/8e37aa1885bbf0e19926054c32e39b59.gif)\n\nSuperAgent\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n```index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <title></title>\n  </head>\n  <body>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/superagent/1.2.0/superagent.min.js\"></script>\n    <script src=\"app.js\"></script>\n  </body>\n</html>\n\n```\n\n```app.js\nvar request = window.superagent;\nvar IPURL = 'https://www.meethue.com/api/nupnp';\nvar hueapi = ''; //\nvar USERNAME = 'lig-n0bisuke';\nvar flag = true;\n\n//Hue\u64cd\u4f5c\u3088\u3046\u306eAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4f5c\u6210\nfunction createEndpoint(ip){\n  return 'http://'+ip+'/api/'+USERNAME+'/lights/';\n}\n\nrequest\n  .get(IPURL)\n  .set('Accept', 'application/json')\n  .end(function(err, res){\n    var ipadress = res.body[0].internalipaddress; //Hue\u306eIP\u30a2\u30c9\u30ec\u30b9\n    hueapi = createEndpoint(ipadress);\n  });\n\nfunction ctrlHue(id, flag){\n  if(hueapi === '')return;\n\n  request\n    .put(hueapi+id+'/state')\n    .send({on: flag})\n    .set('Accept', 'application/json')\n    .end(function(err, res){\n      console.log(res.body[0]);\n    });\n}\n\nsetInterval(function(){\n  flag = !flag;\n  ctrlHue(1, flag);\n},2000);\n```\n\n\u3053\u308c\u30672\u79d2\u3054\u3068\u306b\u70b9\u6ec5\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n"}