{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nStreamAPI\u3092\u4f7f\u3063\u3066\u3001csv\u51fa\u529b\u3092\u3057\u305f\u6642\u306e\u30e1\u30e2\n\u30fb\u30d8\u30c3\u30c0\u30fc\u9805\u76ee\u304b\u3089Map\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u51fa\u529b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u3001\u5fc5\u305a\u5024\u304c\u5b58\u5728\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u3044\n\u30fb\u30d8\u30c3\u30c0\u30fc\u9805\u76ee\u3092\u5b9a\u6570\u5b9a\u7fa9\u306b\u3088\u308a\u53ef\u5909\u306b\u3057\u3066\u3044\u308b\n\n\u5b9f\u88c5\n\u5909\u6570\u5b9a\u7fa9\u3068\u304b\n\njava\nList<Map<String, String>> items = new ArrayList<>();\nString[] header = {\"\u798f\u5ca1\", \"\u4f50\u8cc0\", \"\u9577\u5d0e\", \"\u718a\u672c\", \"\u5927\u5206\", \"\u5bae\u5d0e\", \"\u9e7f\u5150\u5cf6\"};\n\n\n\u30c7\u30fc\u30bf\nMap<String, String> item1 = new HashMap<>();\nitem1.put(\"\u798f\u5ca1\", \"100\");\nitem1.put(\"\u4f50\u8cc0\", \"200\");\nitem1.put(\"\u9577\u5d0e\", \"300\");\nitem1.put(\"\u5927\u5206\", \"10\");\nitem1.put(\"\u5bae\u5d0e\", \"20\");\nitem1.put(\"\u9e7f\u5150\u5cf6\", \"30\");\nitem1.put(\"\u718a\u672c\", \"40\");\nitem1.put(\"\u6c96\u7e04\", \"70\");\nitems.add(item1);\n\nMap<String, String> item2 = new HashMap<>();\nitem2.put(\"\u4f50\u8cc0\", \"800000\");\nitem2.put(\"\u5927\u5206\", \"1200000\");\nitem2.put(\"\u5bae\u5d0e\", \"1100000\");\nitem2.put(\"\u718a\u672c\", \"1800000\");\nitem2.put(\"\u798f\u5ca1\", \"5000000\");\nitem2.put(\"\u9577\u5d0e\", \"1400000\");\nitem2.put(\"\u9e7f\u5150\u5cf6\", \"1700000\");\nitem2.put(\"\u6c96\u7e04\", \"1400000\");\nitems.add(item2);\n\n\nMap<String, String> item3 = new HashMap<>();\nitem3.put(\"\u9e7f\u5150\u5cf6\", \"\u304b\u3054\u3057\u307e\");\nitem3.put(\"\u9577\u5d0e\", \"\u306a\u304c\u3055\u304d\");\nitem3.put(\"\u798f\u5ca1\", \"\u3075\u304f\u304a\u304b\");\nitem3.put(\"\u5bae\u5d0e\", \"\u307f\u3084\u3056\u304d\");\nitem3.put(\"\u4f50\u8cc0\", \"\u3055\u304c\");\nitem3.put(\"\u6c96\u7e04\", \"\u304a\u304d\u306a\u308f\");\nitems.add(item3);\n\n\u51fa\u529b\u6642\n\njava\n    File file = new File(\"d:/test.csv\");\n    try (PrintWriter writer = new PrintWriter(file)) {\n        // \u30d8\u30c3\u30c0\u51fa\u529b\n        writer.println(Arrays.stream(header).collect(Collectors.joining(\",\")));\n        // \u30c7\u30fc\u30bf\u51fa\u529b\n        for (Map<String, String> item : items) {\n            writer.println(Arrays.stream(header)\n                            .map(m -> Optional.ofNullable(item.get(m)).orElse(\"\"))\n                            .collect(Collectors.joining(\",\")));\n        }\n        writer.flush();\n    }\n\n\n\u51fa\u529b\u7d50\u679c\n\ntest.csv\n\u798f\u5ca1,\u4f50\u8cc0,\u9577\u5d0e,\u718a\u672c,\u5927\u5206,\u5bae\u5d0e,\u9e7f\u5150\u5cf6\n100,200,300,40,10,20,30\n5000000,800000,1400000,1800000,1200000,1100000,1700000\n\u3075\u304f\u304a\u304b,\u3055\u304c,\u306a\u304c\u3055\u304d,,,\u307f\u3084\u3056\u304d,\u304b\u3054\u3057\u307e\n\n\n\n\u30dd\u30a4\u30f3\u30c8\n.map\u3067Optional\u3092\u4f7f\u3044\u3001\u5024\u304c\u5b58\u5728\u3057\u306a\u3044\u6642\u306b\u7a7a\u6587\u5b57\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u3000\u3000Optional.ofNullable(item.get(m)) \u2192 null\u3092\u8a31\u5bb9\u3059\u308bOptional\u3092\u751f\u6210\u3059\u308b\u3002\n\u3000\u3000.orElse(\"\") \u2192 null\u306e\u5834\u5408\u306b\u7a7a\u6587\u5b57\u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308b\u3002\n\u3042\u3068\u306f\u901a\u5e38\u901a\u308a\u3001.collect(Collectors.joining(\",\"))\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u9023\u7d50\u3059\u308b\u3002\n#\u6982\u8981\nStreamAPI\u3092\u4f7f\u3063\u3066\u3001csv\u51fa\u529b\u3092\u3057\u305f\u6642\u306e\u30e1\u30e2\n\u30fb\u30d8\u30c3\u30c0\u30fc\u9805\u76ee\u304b\u3089Map\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u51fa\u529b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u3001\u5fc5\u305a\u5024\u304c\u5b58\u5728\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u3044\n\u30fb\u30d8\u30c3\u30c0\u30fc\u9805\u76ee\u3092\u5b9a\u6570\u5b9a\u7fa9\u306b\u3088\u308a\u53ef\u5909\u306b\u3057\u3066\u3044\u308b\n\n#\u5b9f\u88c5\n\n\u5909\u6570\u5b9a\u7fa9\u3068\u304b\n\n```lang:java\nList<Map<String, String>> items = new ArrayList<>();\nString[] header = {\"\u798f\u5ca1\", \"\u4f50\u8cc0\", \"\u9577\u5d0e\", \"\u718a\u672c\", \"\u5927\u5206\", \"\u5bae\u5d0e\", \"\u9e7f\u5150\u5cf6\"};\n```\n\n\u30c7\u30fc\u30bf\n\n```\nMap<String, String> item1 = new HashMap<>();\nitem1.put(\"\u798f\u5ca1\", \"100\");\nitem1.put(\"\u4f50\u8cc0\", \"200\");\nitem1.put(\"\u9577\u5d0e\", \"300\");\nitem1.put(\"\u5927\u5206\", \"10\");\nitem1.put(\"\u5bae\u5d0e\", \"20\");\nitem1.put(\"\u9e7f\u5150\u5cf6\", \"30\");\nitem1.put(\"\u718a\u672c\", \"40\");\nitem1.put(\"\u6c96\u7e04\", \"70\");\nitems.add(item1);\n\nMap<String, String> item2 = new HashMap<>();\nitem2.put(\"\u4f50\u8cc0\", \"800000\");\nitem2.put(\"\u5927\u5206\", \"1200000\");\nitem2.put(\"\u5bae\u5d0e\", \"1100000\");\nitem2.put(\"\u718a\u672c\", \"1800000\");\nitem2.put(\"\u798f\u5ca1\", \"5000000\");\nitem2.put(\"\u9577\u5d0e\", \"1400000\");\nitem2.put(\"\u9e7f\u5150\u5cf6\", \"1700000\");\nitem2.put(\"\u6c96\u7e04\", \"1400000\");\nitems.add(item2);\n\n\nMap<String, String> item3 = new HashMap<>();\nitem3.put(\"\u9e7f\u5150\u5cf6\", \"\u304b\u3054\u3057\u307e\");\nitem3.put(\"\u9577\u5d0e\", \"\u306a\u304c\u3055\u304d\");\nitem3.put(\"\u798f\u5ca1\", \"\u3075\u304f\u304a\u304b\");\nitem3.put(\"\u5bae\u5d0e\", \"\u307f\u3084\u3056\u304d\");\nitem3.put(\"\u4f50\u8cc0\", \"\u3055\u304c\");\nitem3.put(\"\u6c96\u7e04\", \"\u304a\u304d\u306a\u308f\");\nitems.add(item3);\n```\n\n\u51fa\u529b\u6642\n\n```lnag:java\n\tFile file = new File(\"d:/test.csv\");\n\ttry (PrintWriter writer = new PrintWriter(file)) {\n\t\t// \u30d8\u30c3\u30c0\u51fa\u529b\n\t\twriter.println(Arrays.stream(header).collect(Collectors.joining(\",\")));\n\t\t// \u30c7\u30fc\u30bf\u51fa\u529b\n\t\tfor (Map<String, String> item : items) {\n\t\t\twriter.println(Arrays.stream(header)\n\t\t\t\t\t\t\t.map(m -> Optional.ofNullable(item.get(m)).orElse(\"\"))\n\t\t\t\t\t\t\t.collect(Collectors.joining(\",\")));\n\t\t}\n\t\twriter.flush();\n\t}\n```\n\n\u51fa\u529b\u7d50\u679c\n\n```lang:test.csv\n\u798f\u5ca1,\u4f50\u8cc0,\u9577\u5d0e,\u718a\u672c,\u5927\u5206,\u5bae\u5d0e,\u9e7f\u5150\u5cf6\n100,200,300,40,10,20,30\n5000000,800000,1400000,1800000,1200000,1100000,1700000\n\u3075\u304f\u304a\u304b,\u3055\u304c,\u306a\u304c\u3055\u304d,,,\u307f\u3084\u3056\u304d,\u304b\u3054\u3057\u307e\n```\n\n#\u30dd\u30a4\u30f3\u30c8\n.map\u3067Optional\u3092\u4f7f\u3044\u3001\u5024\u304c\u5b58\u5728\u3057\u306a\u3044\u6642\u306b\u7a7a\u6587\u5b57\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u3000\u3000Optional.ofNullable(item.get(m)) **\u2192 null\u3092\u8a31\u5bb9\u3059\u308bOptional\u3092\u751f\u6210\u3059\u308b\u3002**\n\u3000\u3000.orElse(\"\") **\u2192 null\u306e\u5834\u5408\u306b\u7a7a\u6587\u5b57\u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308b\u3002**\n\u3042\u3068\u306f\u901a\u5e38\u901a\u308a\u3001.collect(Collectors.joining(\",\"))\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u9023\u7d50\u3059\u308b\u3002\n", "tags": ["java8"]}