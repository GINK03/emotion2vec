{"context": " More than 1 year has passed since last update.\u3053\u3093\u306a\u611f\u3058\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u3092Promise\u3067\u3084\u308a\u305f\u3044\u3002\nfor (var i = 0; i < 10; i++) {\n  console.log(i);\n}\nconsole.log('END!!!');\n\n\u95a2\u6570\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\nfunction loop(init, condition, callback, increment) {\n  return new Promise(function(resolve, reject) {\n    init().then(function _loop() {\n      condition().then(function(result) {\n        if (result)\n          callback().then(increment).then(_loop, reject);\n        else\n          resolve();\n      }, reject);\n    }, reject);\n  });\n}\n\ninit, condition, callback, increment\u306f\u305d\u308c\u305e\u308c\u5168\u3066Promise\u3092\u8fd4\u3059\u95a2\u6570\u3068\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u540c\u671f\u51e6\u7406\u7684\u306b\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\u3002\nfor (init(); condition(); increment()) {\n  callback();\n}\n\n\u4f7f\u3044\u65b9\nvar i;\nloop(function() {\n  return new Promise(function(resolve, reject) {\n    i = 0;\n    resolve();\n  });\n}, function() {\n  return new Promise(function(resolve, reject) {\n    resolve(i < 10);\n  });\n}, function() {\n  return new Promise(function(resolve, reject) {\n    console.log(i);\n    resolve();\n  });\n}, function() {\n  return new Promise(function(resolve, reject) {\n    i++;\n    resolve();\n  });\n}).then(function() {\n  console.log('END!!!');\n});\n\n\u4e0a\u8a18\u306e\u4f8b\u3067\u306fresolve\u3057\u304b\u547c\u3093\u3067\u307e\u305b\u3093\u304c\u3001\u30eb\u30fc\u30d7\u9014\u4e2d\u3067\u4f8b\u5916\u3092\u6295\u3052\u305f\u308areject\u3092\u547c\u3076\u3068\u51e6\u7406\u3092\u4e2d\u65ad\u3057\u3066\u30eb\u30fc\u30d7\u3092\u629c\u3051\u3001loop\u95a2\u6570\u304c\u8fd4\u3057\u305fPromise\u304crejected\u306b\u306a\u308a\u307e\u3059\u3002\n\u3046\u30fc\u3093\u3082\u3063\u3068\u7c21\u5358\u306b\u66f8\u3051\u306a\u3044\u304b\u306a\u3041\u2026\nreturn new Promise\u306f\u56fa\u5b9a\u306a\u306e\u3067loop\u306e\u4e2d\u306b\u5165\u308c\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308b\u3002\u305f\u3060Promise\u3092\u3069\u3046\u3084\u3063\u3066\u751f\u6210\u3059\u308b\u304b\u306f\u30d7\u30ed\u30b0\u30e9\u30de\u5074\u306b\u4efb\u305b\u305f\u307b\u3046\u304c\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002Promise\u5bfe\u5fdc\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u547c\u3073\u51fa\u3057\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u3046\u308b\u3057\u3002\n\u3053\u3093\u306a\u611f\u3058\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u3092Promise\u3067\u3084\u308a\u305f\u3044\u3002\n\n```js\nfor (var i = 0; i < 10; i++) {\n  console.log(i);\n}\nconsole.log('END!!!');\n```\n\n\u95a2\u6570\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\n```js\nfunction loop(init, condition, callback, increment) {\n  return new Promise(function(resolve, reject) {\n    init().then(function _loop() {\n      condition().then(function(result) {\n        if (result)\n          callback().then(increment).then(_loop, reject);\n        else\n          resolve();\n      }, reject);\n    }, reject);\n  });\n}\n```\n\n`init`, `condition`, `callback`, `increment`\u306f\u305d\u308c\u305e\u308c\u5168\u3066`Promise`\u3092\u8fd4\u3059\u95a2\u6570\u3068\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u540c\u671f\u51e6\u7406\u7684\u306b\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\u3002\n\n```js\nfor (init(); condition(); increment()) {\n  callback();\n}\n```\n\n\u4f7f\u3044\u65b9\n\n```js\nvar i;\nloop(function() {\n  return new Promise(function(resolve, reject) {\n    i = 0;\n    resolve();\n  });\n}, function() {\n  return new Promise(function(resolve, reject) {\n    resolve(i < 10);\n  });\n}, function() {\n  return new Promise(function(resolve, reject) {\n    console.log(i);\n    resolve();\n  });\n}, function() {\n  return new Promise(function(resolve, reject) {\n    i++;\n    resolve();\n  });\n}).then(function() {\n  console.log('END!!!');\n});\n```\n\n\u4e0a\u8a18\u306e\u4f8b\u3067\u306f`resolve`\u3057\u304b\u547c\u3093\u3067\u307e\u305b\u3093\u304c\u3001\u30eb\u30fc\u30d7\u9014\u4e2d\u3067\u4f8b\u5916\u3092\u6295\u3052\u305f\u308a`reject`\u3092\u547c\u3076\u3068\u51e6\u7406\u3092\u4e2d\u65ad\u3057\u3066\u30eb\u30fc\u30d7\u3092\u629c\u3051\u3001loop\u95a2\u6570\u304c\u8fd4\u3057\u305f`Promise`\u304c`rejected`\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3046\u30fc\u3093\u3082\u3063\u3068\u7c21\u5358\u306b\u66f8\u3051\u306a\u3044\u304b\u306a\u3041\u2026\n\n`return new Promise`\u306f\u56fa\u5b9a\u306a\u306e\u3067`loop`\u306e\u4e2d\u306b\u5165\u308c\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308b\u3002\u305f\u3060Promise\u3092\u3069\u3046\u3084\u3063\u3066\u751f\u6210\u3059\u308b\u304b\u306f\u30d7\u30ed\u30b0\u30e9\u30de\u5074\u306b\u4efb\u305b\u305f\u307b\u3046\u304c\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002Promise\u5bfe\u5fdc\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u547c\u3073\u51fa\u3057\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u3046\u308b\u3057\u3002\n", "tags": ["JavaScript", "promise"]}