{"tags": ["fabric", "Python"], "context": " More than 1 year has passed since last update.\n\nfabric.api.path: $PATH\u3092\u64cd\u4f5c\u3067\u304d\u308b\nfabric.api.path \u3092\u4f7f\u3046\u3068PATH\u3092\u3044\u3058\u308c\u308b\u3002\n\u4f8b\u3068\u3057\u3066\u3001Python\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u3001/usr/local/bin \u914d\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u3053\u3053\u306epython\u3092\u5b9f\u884c\u3059\u308b\u3002\n\nfabpath.py\nimport fabric.api as api\n\nwith api.path(\"/usr/local/bin\", behavior=\"prepend\"):\n    api.run(\"python -V\")\n\n\nbehavior=\"prepend\" \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\n\nPATH=/usr/local/bin:$PATH\n\n\u3053\u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u308b\u3002\n\nfabric.api.prefix: \u4e8b\u524d\u51e6\u7406\u3092\u5b9f\u884c\u3055\u305b\u308b\nfabric.api.prefix \u3092\u4f7f\u3046\u3068with\u30d6\u30ed\u30c3\u30af\u306e\u4e2d\u306e\u3059\u3079\u3066\u306erun, sudo\u306e\u547d\u4ee4\u306e\u524d\u306b\u6307\u5b9a\u3057\u305f\u51e6\u7406\u3092\u633f\u5165\u3067\u304d\u308b\u3002\n\u4f8b\u3048\u3070virtualenv\u3092\u6709\u52b9\u306b\u3059\u308b\u5834\u5408\u306b\u4f7f\u3046\u3002\n\nenablevenv.py\nimport fabric.api as api\n\nwith api.prefix(\". /home/www/bin/activate\"):\n    fabric.api.run(\"./manage.py syncdb\")\n\n\n\nfabric.api.shell_env: \u30b7\u30a7\u30eb\u306e\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\n\u4f8b\u3068\u3057\u3066\u3001python\u30b3\u30de\u30f3\u30c9\u3067Django\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3002\n\ndjscript.py\nimport fabric.api as api\n\nwith api.env_shell(\"PYTHONPATH=. DJANGO_SETTINGS_MODULE=settings.imagawa\"):\n    api.run(\"python dosomething.py\")\n\n\n\n# fabric.api.path: $PATH\u3092\u64cd\u4f5c\u3067\u304d\u308b\n\nfabric.api.path \u3092\u4f7f\u3046\u3068PATH\u3092\u3044\u3058\u308c\u308b\u3002\n\n\n\u4f8b\u3068\u3057\u3066\u3001Python\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u3001/usr/local/bin \u914d\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u3053\u3053\u306epython\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n\n```python:fabpath.py\nimport fabric.api as api\n\nwith api.path(\"/usr/local/bin\", behavior=\"prepend\"):\n    api.run(\"python -V\")\n```\n\nbehavior=\"prepend\" \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\n\n> **PATH=/usr/local/bin:$PATH**\n\n\u3053\u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u308b\u3002\n\n\n# fabric.api.prefix: \u4e8b\u524d\u51e6\u7406\u3092\u5b9f\u884c\u3055\u305b\u308b\n\nfabric.api.prefix \u3092\u4f7f\u3046\u3068with\u30d6\u30ed\u30c3\u30af\u306e\u4e2d\u306e\u3059\u3079\u3066\u306erun, sudo\u306e\u547d\u4ee4\u306e\u524d\u306b\u6307\u5b9a\u3057\u305f\u51e6\u7406\u3092\u633f\u5165\u3067\u304d\u308b\u3002\n\n\n\u4f8b\u3048\u3070virtualenv\u3092\u6709\u52b9\u306b\u3059\u308b\u5834\u5408\u306b\u4f7f\u3046\u3002\n\n```python:enablevenv.py\nimport fabric.api as api\n\nwith api.prefix(\". /home/www/bin/activate\"):\n    fabric.api.run(\"./manage.py syncdb\")\n```\n\n\n# fabric.api.shell_env: \u30b7\u30a7\u30eb\u306e\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\n\n\u4f8b\u3068\u3057\u3066\u3001python\u30b3\u30de\u30f3\u30c9\u3067Django\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```python:djscript.py\nimport fabric.api as api\n\nwith api.env_shell(\"PYTHONPATH=. DJANGO_SETTINGS_MODULE=settings.imagawa\"):\n    api.run(\"python dosomething.py\")\n```"}