{"context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\n\n\nJuniper SSG - ScreenOS \u8a2d\u5b9a\u30b3\u30de\u30f3\u30c9\u3068\u3066\u3082\u60c5\u5831\u91cf\u304c\u591a\u3044\u65e5\u672c\u8a9e\u30da\u30fc\u30b8\nAddress Translation - 630_ce_AddressTranslation.pdf\u516c\u5f0f\u30de\u30cb\u30e5\u30a2\u30eb\nJuniper SSG - \u30d0\u30fc\u30c1\u30e3\u30eb\u30eb\u30fc\u30bf\u3001\u30be\u30fc\u30f3\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u8a2d\u5b9a\nNetScreen\u3067\u8a2d\u5b9a\u3092TFTP\u30b5\u30fc\u30d0\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\nJuniper SSG - \u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u65b9\u6cd5\u3001\u521d\u671f\u5316\u65b9\u6cd5\n\n\n\u306f\u3058\u3081\u306b\n\nNetScreen\u3084SSG\u88fd\u54c1\u3002\n\n\nNS-5GT,NS-25 : \u7269\u7406\u30e1\u30e2\u30ea 128MB\nSSG-140 : \u7269\u7406\u30e1\u30e2\u30ea 512MB\n\n\n\u5197\u9577\u5316\u306fNSRP\n\n\n\u30b3\u30de\u30f3\u30c9\nget system\nget config      \uff08\u8a2d\u5b9a\u4e00\u89a7\uff09\n\nget tech-support\uff08\u5168\u30b3\u30de\u30f3\u30c9\u7d50\u679c\uff09\nget event       \uff08show log\uff09\nget arp          (\u63a5\u7d9aPC\u30ea\u30b9\u30c8)\nget console \uff08login\u72b6\u614b\u3001\u672a\u4fdd\u5b58\u60c5\u5831\uff09\nget route\nget licence-key \uff08\u5236\u9650\uff09\nget ntp\nget performance cpu\uff08w\uff09\nget session     \uff08\u63a5\u7d9a\u60c5\u5831\u4e00\u89a7\uff09\nget socket      \uff08\u63a5\u7d9a\u60c5\u5831\u4e00\u89a7\uff09\nget service user\uff08FW\u8a2d\u5b9a\uff09\nget policy  \u3000\u3000\uff08FW\u8a2d\u5b9a\uff09\n\n\n\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5468\u308a\nget vip\nget mip\nget interface\n\n\n\u521d\u671f\u5316\nSSG140-> unset all\nErase all system config, are you sure y/[n] ? y\nSSG140-> reset\nConfiguration modified, save? [y]/n n\nSystem reset, are you sure? y/[n] y\nIn reset ...\n\n\n\nhttp://192.168.1.1 (trust/e1)\n\n\nuser: netscreen\npass: netscreen\n\n\n\n\n\u8a2d\u5b9a\n\n\u30db\u30b9\u30c8\u540d\nset hostname SSG140_M.mydomain\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u540d\u524d\u3092SSG140_M.mydomain\u306b\u8a2d\u5b9a\nget hostname\n\nzone\u540d\nset interface ethernet0/0 zone Untrust\nset interface ethernet0/1 zone Trust\nset interface ethernet0/2 zone DMZ\n\n\nethernet0/0 \u3092 zone Untrust\nethernet0/1 \u3092 zone Trust\nethernet0/2 \u3092 zone DMZ \u306b\u8a2d\u5b9a\n\nget zone\n\nIP\u8a2d\u5b9a\nset interface ethernet0/0 manage-ip 5.6.7.8\nset interface ethernet0/1 manage-ip 192.168.10.254\nset interface ethernet0/2 manage-ip 192.168.20.254\nset interface ethernet0/0 manage ping\nset interface ethernet0/1 manage ping\nset interface ethernet0/2 manage ping\n\n\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306bIP\u306e\u5272\u5f53\u3066\u3068ping\u306e\u5fdc\u7b54\u3092\u8fd4\u3059\u3002\nget interface\n\nDNS\nset dns host dns1 8.8.8.8\nset dns host dns2 8.8.4.4\n\nScreenOS\u306eDNS\u8a2d\u5b9a\n\n\u5197\u9577\u5316(nsrp)\u7528IP\u8a2d\u5b9a\n\nmaster\u5074\nset interface ethernet0/8 zone HA\nset interface ethernet0/9 zone HA\nset interface ethernet0/0 ip 5.6.7.8/28\nset interface ethernet0/0 route\nset interface ethernet0/1 ip 192.168.10.1/24\nset interface ethernet0/1 nat\nset interface ethernet0/2 ip 192.168.20.1/24\nset interface ethernet0/2 nat\nset nsrp cluster id 1\nset nsrp rto-mirror sync\nset nsrp vsd-group id 0 priority 50\nset nsrp vsd-group id 0 preempt\nset nsrp monitor interface ethernet0/0\nset nsrp monitor interface ethernet0/1\nset nsrp monitor interface ethernet0/2\nset nsrp monitor track-ip ip 5.6.7.9 interface ethernet0/0\nset nsrp monitor track-ip ip 5.6.7.9 weight 255\n\n\nbackup\u5074\n\nmaster\u5074\u306e\u8a2d\u5b9a\u306b\u4ee5\u4e0b\u8ffd\u52a0\n- set nsrp vsd-group id 0 priority 50\n- set nsrp vsd-group id 0 preempt\n+ set nsrp vsd-group id 0 priority 100\n\n\n\npriority\u304c\u4f4e\u3044\u307b\u3046\u304cmaster\u306b\u306a\u308b\u3002\n\n\nhostname(I)-> \u306e\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\n\nset nsrp monitor interface ethernet0/0\nset nsrp monitor interface ethernet0/1\nset nsrp monitor interface ethernet0/2\n\nethernet0/0,0/1,0/2\u306eLAN\u304c\u629c\u3051\u3066\u3044\u308b\u5834\u5408(I)\u306b\u306a\u308b\u3002\u523a\u3059\u3053\u3068\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u8a2d\u5b9a\nset route 0.0.0.0/0 interface ethernet0/0 gateway 5.6.7.6\n\n\nntp\nset clock timezone 9\nset clock dst-off\nset clock ntp\nset ntp server \"ntp.ubuntu.com\"\nset ntp interval 300\n\n\n\u624b\u52d5\u3067ntp\u554f\u3044\u5408\u308f\u305b\u3059\u308b\u5834\u5408\u3001exec ntp update\n\n\n\nnat\nset policy id 100 from DMZ to Untrust Any Any Any nat src permit\n\n\n\nnat src permit\u304c\u30df\u30bd\u3002\n\n\n\npermit\u3060\u3051\u3060\u3068DMZ\u304b\u3089Untrust\u3078\u901a\u4fe1\u3059\u308b\u5834\u5408\u3001DMZ\u5074\u306b5.6.7.0/28 \u306e\u30a2\u30c9\u30ec\u30b9\u304c\u632f\u3089\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u3064\u307e\u308aDMZ\u304b\u3089Untrust\u3078\u901a\u4fe1\u304c\u3067\u304d\u306a\u3044\u3002\n\n\n\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\nset interface ethernet0/0 vip 5.6.7.10 22 SSH 192.168.20.10\nset policy id 22 name VIP(SSH) from Untrust to DMZ Any VIP(5.6.7.10) SSH permit\n\n\n5.6.7.10:22 -> 192.168.20.10:22 \u306b\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\n\nset service ssh_server01 protocol tcp dst-port 10022-10022\nset interface ethernet0/0 vip 5.6.7.10 10022 SSH 192.168.20.80\nset policy id 80 name server01 from Untrust to DMZ Any VIP(5.6.7.10) ssh_server01 permit\n\n5.6.7.10:10022 -> 192.168.20.80:22 \u306b\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3002\n\n\u63a5\u7d9a\u5143IP\u3092\u5236\u9650\nset address Untrust office 2.2.2.2 255.255.255.255\nset policy id 22 name VIP(SSH) from Untrust to DMZ office VIP(5.6.7.10) SSH permit\n\n2.2.2.2\u304b\u3089\u306e\u307f5.6.7.10:22 \u3078\u306e\u63a5\u7d9a\u3092\u8a31\u53ef\n\ntelnet\u306e\u8a31\u53ef\n\nset interface ethernet0/2 manage-ip 192.168.20.254\n\n\u3092\u3057\u305f\u72b6\u614b\u3067\u3001\nset admin manager-ip 192.168.20.0 255.255.255.0\nset interface ethernet0/2 manage telnet\n\n\nScreenOS\nHow to upgrade ScreenOS either via the WebUI or CLI\nKB7860\u3000Download ScreenOS Updates From the Web\nKB4317\u3000[ScreenOS] Accessing your Juniper firewall device using the WebUI\nSSG140 - Download Software\n\nDL\u6642\u306b\u306fid/pass\u304c\u5fc5\u8981\n\n\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\nsave software from flash to tftp 192.168.1.50 ssg140.6.3.0r17.0\n\n\ntftp\u30b5\u30fc\u30d0(192.168.1.50)\u306e /var/lib/tftproot/ssg140.6.3.0r17.0 \u306b\u4fdd\u5b58\u3055\u308c\u308b\u300212MB\n\n\u66f4\u65b0\n\n\u66f4\u65b0\nsave software from tftp 192.168.1.50 ssg140.6.3.0r17.0 to flash\n\n\n## \u53c2\u8003\n\n* [Juniper SSG - ScreenOS \u8a2d\u5b9a\u30b3\u30de\u30f3\u30c9](http://www.infraeye.com/study/studyz1.html)\u3068\u3066\u3082\u60c5\u5831\u91cf\u304c\u591a\u3044\u65e5\u672c\u8a9e\u30da\u30fc\u30b8\n* [Address Translation - 630_ce_AddressTranslation.pdf](http://www.juniper.net/techpubs/software/screenos/screenos6.3.0/630_ce_AddressTranslation.pdf)\u516c\u5f0f\u30de\u30cb\u30e5\u30a2\u30eb\n\n* [Juniper SSG - \u30d0\u30fc\u30c1\u30e3\u30eb\u30eb\u30fc\u30bf\u3001\u30be\u30fc\u30f3\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u8a2d\u5b9a](http://www.infraeye.com/study/juniperssg7.html)\n* [NetScreen\u3067\u8a2d\u5b9a\u3092TFTP\u30b5\u30fc\u30d0\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b](http://www.infraeye.com/study/juniperssg5.html)\n* [Juniper SSG - \u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u65b9\u6cd5\u3001\u521d\u671f\u5316\u65b9\u6cd5](http://www.infraeye.com/study/juniperssg5.html)\n\n## \u306f\u3058\u3081\u306b\n\n* NetScreen\u3084SSG\u88fd\u54c1\u3002\n  * NS-5GT,NS-25 : \u7269\u7406\u30e1\u30e2\u30ea 128MB\n  * SSG-140 : \u7269\u7406\u30e1\u30e2\u30ea 512MB\n* \u5197\u9577\u5316\u306fNSRP\n\n## \u30b3\u30de\u30f3\u30c9\n\n```bash:\nget system\nget config      \uff08\u8a2d\u5b9a\u4e00\u89a7\uff09\n\nget tech-support\uff08\u5168\u30b3\u30de\u30f3\u30c9\u7d50\u679c\uff09\nget event       \uff08show log\uff09\nget arp          (\u63a5\u7d9aPC\u30ea\u30b9\u30c8)\nget console \uff08login\u72b6\u614b\u3001\u672a\u4fdd\u5b58\u60c5\u5831\uff09\nget route\nget licence-key \uff08\u5236\u9650\uff09\nget ntp\nget performance cpu\uff08w\uff09\nget session     \uff08\u63a5\u7d9a\u60c5\u5831\u4e00\u89a7\uff09\nget socket      \uff08\u63a5\u7d9a\u60c5\u5831\u4e00\u89a7\uff09\nget service user\uff08FW\u8a2d\u5b9a\uff09\nget policy  \u3000\u3000\uff08FW\u8a2d\u5b9a\uff09\n```\n\n## \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5468\u308a\n\n```bash:\nget vip\nget mip\nget interface\n```\n\n## \u521d\u671f\u5316\n\n```bash:\nSSG140-> unset all\nErase all system config, are you sure y/[n] ? y\nSSG140-> reset\nConfiguration modified, save? [y]/n n\nSystem reset, are you sure? y/[n] y\nIn reset ...\n```\n\n* http://192.168.1.1 (trust/e1)\n  * user: netscreen\n  * pass: netscreen\n\n# \u8a2d\u5b9a\n\n## \u30db\u30b9\u30c8\u540d\n\n```bash:\nset hostname SSG140_M.mydomain\n```\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u540d\u524d\u3092SSG140_M.mydomain\u306b\u8a2d\u5b9a\n\n`get hostname`\n\n## zone\u540d\n\n```bash:\nset interface ethernet0/0 zone Untrust\nset interface ethernet0/1 zone Trust\nset interface ethernet0/2 zone DMZ\n```\n\n* ethernet0/0 \u3092 zone Untrust\n* ethernet0/1 \u3092 zone Trust\n* ethernet0/2 \u3092 zone DMZ \u306b\u8a2d\u5b9a\n\n`get zone`\n\n## IP\u8a2d\u5b9a\n\n```bash:\nset interface ethernet0/0 manage-ip 5.6.7.8\nset interface ethernet0/1 manage-ip 192.168.10.254\nset interface ethernet0/2 manage-ip 192.168.20.254\nset interface ethernet0/0 manage ping\nset interface ethernet0/1 manage ping\nset interface ethernet0/2 manage ping\n```\n\n\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306bIP\u306e\u5272\u5f53\u3066\u3068ping\u306e\u5fdc\u7b54\u3092\u8fd4\u3059\u3002\n\n`get interface`\n\n## DNS\n\n```bash:\nset dns host dns1 8.8.8.8\nset dns host dns2 8.8.4.4\n```\n\nScreenOS\u306eDNS\u8a2d\u5b9a\n\n## \u5197\u9577\u5316(nsrp)\u7528IP\u8a2d\u5b9a\n\n### master\u5074\n\n```bash:\nset interface ethernet0/8 zone HA\nset interface ethernet0/9 zone HA\nset interface ethernet0/0 ip 5.6.7.8/28\nset interface ethernet0/0 route\nset interface ethernet0/1 ip 192.168.10.1/24\nset interface ethernet0/1 nat\nset interface ethernet0/2 ip 192.168.20.1/24\nset interface ethernet0/2 nat\nset nsrp cluster id 1\nset nsrp rto-mirror sync\nset nsrp vsd-group id 0 priority 50\nset nsrp vsd-group id 0 preempt\nset nsrp monitor interface ethernet0/0\nset nsrp monitor interface ethernet0/1\nset nsrp monitor interface ethernet0/2\nset nsrp monitor track-ip ip 5.6.7.9 interface ethernet0/0\nset nsrp monitor track-ip ip 5.6.7.9 weight 255\n```\n\n### backup\u5074\n\n```diff:master\u5074\u306e\u8a2d\u5b9a\u306b\u4ee5\u4e0b\u8ffd\u52a0\n- set nsrp vsd-group id 0 priority 50\n- set nsrp vsd-group id 0 preempt\n+ set nsrp vsd-group id 0 priority 100\n```\n\n* priority\u304c\u4f4e\u3044\u307b\u3046\u304cmaster\u306b\u306a\u308b\u3002\n\n## hostname(I)-> \u306e\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\n\n> set nsrp monitor interface ethernet0/0\n> set nsrp monitor interface ethernet0/1\n> set nsrp monitor interface ethernet0/2\n\nethernet0/0,0/1,0/2\u306eLAN\u304c\u629c\u3051\u3066\u3044\u308b\u5834\u5408(I)\u306b\u306a\u308b\u3002\u523a\u3059\u3053\u3068\n\n## \u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u8a2d\u5b9a\n\n```bash:\nset route 0.0.0.0/0 interface ethernet0/0 gateway 5.6.7.6\n```\n\n\n## ntp\n\n```bash:\nset clock timezone 9\nset clock dst-off\nset clock ntp\nset ntp server \"ntp.ubuntu.com\"\nset ntp interval 300\n```\n\n* \u624b\u52d5\u3067ntp\u554f\u3044\u5408\u308f\u305b\u3059\u308b\u5834\u5408\u3001`exec ntp update`\n\n## nat\n\n```bash:\nset policy id 100 from DMZ to Untrust Any Any Any nat src permit\n```\n\n* `nat src permit`\u304c\u30df\u30bd\u3002\n  * `permit`\u3060\u3051\u3060\u3068DMZ\u304b\u3089Untrust\u3078\u901a\u4fe1\u3059\u308b\u5834\u5408\u3001DMZ\u5074\u306b5.6.7.0/28 \u306e\u30a2\u30c9\u30ec\u30b9\u304c\u632f\u3089\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n  * \u3064\u307e\u308aDMZ\u304b\u3089Untrust\u3078\u901a\u4fe1\u304c\u3067\u304d\u306a\u3044\u3002\n\n## \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\n\n```bash:\nset interface ethernet0/0 vip 5.6.7.10 22 SSH 192.168.20.10\nset policy id 22 name VIP(SSH) from Untrust to DMZ Any VIP(5.6.7.10) SSH permit\n```\n\n* 5.6.7.10:22 -> 192.168.20.10:22 \u306b\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\n\n```bash:\nset service ssh_server01 protocol tcp dst-port 10022-10022\nset interface ethernet0/0 vip 5.6.7.10 10022 SSH 192.168.20.80\nset policy id 80 name server01 from Untrust to DMZ Any VIP(5.6.7.10) ssh_server01 permit\n```\n\n5.6.7.10:10022 -> 192.168.20.80:22 \u306b\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3002\n\n\n### \u63a5\u7d9a\u5143IP\u3092\u5236\u9650\n\n```bash:\nset address Untrust office 2.2.2.2 255.255.255.255\nset policy id 22 name VIP(SSH) from Untrust to DMZ office VIP(5.6.7.10) SSH permit\n```\n\n2.2.2.2\u304b\u3089\u306e\u307f5.6.7.10:22 \u3078\u306e\u63a5\u7d9a\u3092\u8a31\u53ef\n\n\n# telnet\u306e\u8a31\u53ef\n\n> set interface ethernet0/2 manage-ip 192.168.20.254\n\n\u3092\u3057\u305f\u72b6\u614b\u3067\u3001\n\n```bash:\nset admin manager-ip 192.168.20.0 255.255.255.0\nset interface ethernet0/2 manage telnet\n```\n\n# ScreenOS\n\n[How to upgrade ScreenOS either via the WebUI or CLI](http://kb.juniper.net/InfoCenter/index?page=content&id=KB13672&pmv=print)\n[KB7860\u3000Download ScreenOS Updates From the Web](http://kb.juniper.net/InfoCenter/index?page=content&id=KB7860)\n[KB4317\u3000[ScreenOS] Accessing your Juniper firewall device using the WebUI](http://kb.juniper.net/InfoCenter/index?page=content&id=KB4317)\n[SSG140 - Download Software](http://www.juniper.net/support/downloads/?p=ssg140#sw)\n\n* DL\u6642\u306b\u306fid/pass\u304c\u5fc5\u8981\n\n\n## \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\n```bash:\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\nsave software from flash to tftp 192.168.1.50 ssg140.6.3.0r17.0\n```\n\ntftp\u30b5\u30fc\u30d0(192.168.1.50)\u306e `/var/lib/tftproot/ssg140.6.3.0r17.0` \u306b\u4fdd\u5b58\u3055\u308c\u308b\u300212MB\n\n\n## \u66f4\u65b0\n\n```bash:\u66f4\u65b0\nsave software from tftp 192.168.1.50 ssg140.6.3.0r17.0 to flash\n```\n", "tags": ["ScreenOS", "infrastructure"]}