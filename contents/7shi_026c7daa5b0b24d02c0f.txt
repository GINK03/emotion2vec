{"tags": ["F#", "Haskell"], "context": "\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u306e\u7df4\u7fd2\u3068\u3057\u3066\u3001\u3044\u304f\u3064\u304b\u30e2\u30ca\u30c9\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002Bind\u3068Return\u3060\u3051\u3067\u4f55\u304c\u3067\u304d\u308b\u306e\u304b\u3092\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u306e\u304c\u76ee\u7684\u3067\u3059\u3002\n\u30e2\u30ca\u30c9\u3084Haskell\u306f\u524d\u63d0\u77e5\u8b58\u3068\u306f\u3057\u307e\u305b\u3093\u3002\u30e2\u30ca\u30c9\u3092\u7406\u89e3\u3057\u3066\u3044\u306a\u304f\u3066\u3082\u52d5\u304d\u3092\u8ffd\u3046\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u3002\u6700\u521d\u306bHaskell\u3067\u4f8b\u3092\u793a\u3057\u307e\u3059\u304c\u3001\u3059\u3050\u5bfe\u5fdc\u3059\u308bF#\u3092\u793a\u3059\u306e\u3067\u63a8\u6e2c\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u306f\u6b21\u306e\u7d9a\u7de8\u3067\u3059\u3002\n\n\ndo\u30d6\u30ed\u30c3\u30af\u3068\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f 2016.07.01\n\n\u4eca\u56de\u6271\u3046\u30e2\u30ca\u30c9\u306e\u8a73\u7d30\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\u30e2\u30ca\u30c9\u5247\u304c\u3061\u3087\u3063\u3068\u5206\u304b\u3063\u305f\uff1f 2014.12.01\n\nHaskell \u72b6\u614b\u7cfb\u30e2\u30ca\u30c9 \u8d85\u5165\u9580 2014.12.27\n\nHaskell Maybe\u30e2\u30ca\u30c9 \u8d85\u5165\u9580 2015.01.22\n\nHaskell \u30ea\u30b9\u30c8\u30e2\u30ca\u30c9 \u8d85\u5165\u9580 2014.12.19\n\n\n\u30e2\u30ca\u30c9\n\u203b \u3053\u306e\u7bc0\u306e\u8aac\u660e\u306f\u524d\u63d0\u77e5\u8b58\u304c\u306a\u3044\u3068\u610f\u5473\u4e0d\u660e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u5148\u306b\u5b9f\u4f8b\u306b\u89e6\u308c\u3066\u632f\u308a\u8fd4\u308b\u3068\u304d\u306e\u6307\u91dd\u3068\u3057\u3066\u8a00\u53ca\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u9069\u5f53\u306b\u53d7\u3051\u6d41\u3057\u3066\u5148\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002\nreturn\u3068>>=(bind)\u3067\u64cd\u4f5c\u3067\u304d\u3066\u30e2\u30ca\u30c9\u5247\u3092\u6e80\u305f\u3059\u3082\u306e\u3092\u30e2\u30ca\u30c9\u3068\u547c\u3073\u307e\u3059\u3002\n\n\u30e2\u30ca\u30c9\u5247\n\u30e2\u30ca\u30c9\u5247\u306freturn\u3068>>=\u306e\u52d5\u304d\u306b\u95a2\u3059\u308b\u30eb\u30fc\u30eb\u3067\u3059\u3002\n\n\nreturn x >>= f == f x\n\n\nm >>= return == m\n\n\n(m >>= f) >>= g == m >>= (\\x -> f x >>= g)\n\n\n\u3044\u304d\u306a\u308a\u898b\u3066\u3082\u7406\u89e3\u3067\u304d\u308b\u4ee3\u7269\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u3042\u307e\u308a\u6c17\u306b\u3057\u306a\u304f\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\u4e00\u5fdc\u3001\u8aad\u307f\u65b9\u3092\u8aac\u660e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u5404\u30e2\u30ca\u30c9\u5247\u306f\u5f0f\u3092 == \u3067\u533a\u5207\u308a\u3001\u5de6\u8fba\u3068\u53f3\u8fba\u304c\u7b49\u3057\u3044\u304b\u3092\u898b\u307e\u3059\u3002\n\u7b49\u3057\u304f\u306a\u308b\u3082\u306e\u304c\u30e2\u30ca\u30c9\u3060\u3001\u3068\u3044\u3046\u30eb\u30fc\u30eb\u3067\u3059\u3002\n\u7b49\u3057\u304f\u306a\u3089\u306a\u3044\u3082\u306e\u306f\u4f5c\u308c\u307e\u3059\u304c\u3001\u305d\u308c\u306f\u30e2\u30ca\u30c9\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u3053\u308c\u3067\u4f55\u304c\u3067\u304d\u308b\u304b\u306f\u4e00\u610f\u306b\u6c7a\u307e\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u8272\u3005\u3067\u304d\u308b\u3068\u3057\u304b\u8a00\u3044\u3088\u3046\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u7d19\u3068\u925b\u7b46\u3067\u4f55\u304c\u3067\u304d\u308b\u304b\u3068\u8a00\u308f\u308c\u3066\u300c\u6587\u7ae0\u304c\u66f8\u3051\u308b\u3001\u8a08\u7b97\u304c\u3067\u304d\u308b\u3001\u7d75\u304c\u63cf\u3051\u308b\u300d\u3068\u7b54\u3048\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\u305d\u308c\u306b\u76f8\u5f53\u3059\u308b\u5177\u4f53\u4f8b\u3068\u3057\u3066\u4f55\u7a2e\u985e\u304b\u306e\u30e2\u30ca\u30c9\u3092\u793a\u3057\u307e\u3059\u3002\n\n\u95a2\u6570\u30e2\u30ca\u30c9\nState\u30e2\u30ca\u30c9\n\u30ea\u30b9\u30c8\u30e2\u30ca\u30c9\nMaybe\u30e2\u30ca\u30c9\n\n\u203b \u500b\u3005\u306e\u30e2\u30ca\u30c9\u304c\u4f55\u3089\u304b\u306e\u62bd\u8c61\u7684\u306a\u539f\u7406\uff08\u30e2\u30ca\u30c9\u306e\u672c\u8cea\uff1f\u570f\u8ad6\uff1f\uff09\u304b\u3089\u5c0e\u51fa\u3055\u308c\u305f\u3068\u6349\u3048\u306a\u3044\u65b9\u304c\u826f\u3044\u3067\u3059\u3002\u308f\u3051\u304c\u308f\u304b\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002return\u3068>>=\u306f\u7d19\u3068\u925b\u7b46\u307f\u305f\u3044\u306a\u3082\u306e\u3067\u3001\u305d\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u3046\u307e\u304f\u3044\u304f\u3082\u306e\u304c\u3044\u304f\u3064\u304b\u767a\u898b\u3055\u308c\u3066\u3044\u308b\u3001\u304f\u3089\u3044\u306b\u8003\u3048\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u30aa\u30da\u30e9\u30f3\u30c9\n>>=\u306e\u30aa\u30da\u30e9\u30f3\u30c9\u306f\u30e2\u30ca\u30c9\u52473\u306b\u3082\u8868\u308c\u3066\u3044\u308b\u3088\u3046\u306bm >>= f\u3068\u66f8\u304f\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002m\u306f\u30e2\u30ca\u30c9\u3001f\u306f\u95a2\u6570\u3092\u8868\u3057\u307e\u3059\u3002\n\u5a92\u4ecb\u5909\u6570x\u3067\u8868\u3057\u305f\u3082\u306e\u3068\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3059\u3002\n\nHaskell\ntest1 = m >>= f\ntest2 = do\n    x <- m\n    f x\ntest3 = m >>= \\x -> f x\n\n\nm\u304b\u3089\u5024\u3092\u53d6\u308a\u51fa\u3057\u3066x\u306b\u675f\u7e1b\u3057\u3066\u3001\u305d\u308c\u3092f\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u306f\u30e2\u30ca\u30c9\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u8003\u616e\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u30e2\u30ca\u30c9\u5c02\u7528\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u610f\u56f3\u7684\u306b\u30e2\u30ca\u30c9\u5247\u3092\u6e80\u305f\u3055\u306a\u3044\u300c\u30e2\u30ca\u30c9\u3082\u3069\u304d\u300d\u3092\u4f5c\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3001\u4eca\u56de\u306f\u6271\u3044\u307e\u305b\u3093\u304c\u305d\u308c\u3082\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u6709\u7528\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3010\u8ffd\u8a18 2016.07.04\u3011\u30e2\u30ca\u30c9\u3082\u3069\u304d\u3092\u4f5c\u3063\u3066\u307f\u305f\u4f8b\u3067\u3059\u3002\n\n\n\u8a66\u4f5c\u3057\u305f\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3068\u95a2\u6570\u30e2\u30ca\u30c9 2016.07.04\n\n\n\u4f5c\u696d\u624b\u9806\n\u4f5c\u696d\u624b\u9806\u3092\u30d1\u30bf\u30fc\u30f3\u5316\u3057\u307e\u3059\u3002\n\nHaskell\u306e\u4f8b\n\ndo\u3092\u5265\u304c\u3059\n\nreturn\u3092\u5b9f\u88c5\n1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\u591a\u6bb5\u5bfe\u5fdc\n\u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\n\n\u95a2\u6570\u30e2\u30ca\u30c9\n\u6e21\u3057\u305f\u5f15\u6570\u3092\u88dc\u3063\u3066\u8a08\u7b97\u3059\u308b\u30e2\u30ca\u30c9\u3067\u3059\u3002\nm >>= f\u306em\u306e\u90e8\u5206\u306b\u95a2\u6570\u304c\u6765\u307e\u3059\u3002\u3053\u308c\u306f\u95a2\u6570\u3092\u30e2\u30ca\u30c9\u3068\u3057\u3066\u6271\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u610f\u5473\u5408\u3044\u3067\u300c\u95a2\u6570\u30e2\u30ca\u30c9\u300d\u3067\u3059\u3002\n\n1. Haskell\u306e\u4f8b\n\u307e\u305a\u304a\u624b\u672c\u3068\u3057\u3066Haskell\u3092\u898b\u307e\u3059\u3002\n\nHaskell\ntest = do\n    a <- (+ 1)\n    b <- (* 2)\n    return (a, b)\n\nmain = do\n    print (test 3)\n    print (test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(4,6)\n(6,10)\n\n\n\n2. do\u3092\u5265\u304c\u3059\ntest\u304b\u3089do\u3092\u5265\u304c\u3057\u307e\u3059\u3002\n\nHaskell\ntest =\n    (+ 1) >>= \\a ->\n    (* 2) >>= \\b ->\n    return (a, b)\n\n\n\u30e9\u30e0\u30c0\u5f0f\u306e\u30cd\u30b9\u30c8\u304c\u5206\u304b\u308a\u306b\u304f\u3044\u305f\u3081\u3001\u62ec\u5f27\u3068\u30cd\u30b9\u30c8\u3092\u4ed8\u3051\u305f\u3082\u306e\u3092\u793a\u3057\u307e\u3059\u3002\n\nHaskell\ntest =\n    (+ 1) >>= (\\a ->\n        (* 2) >>= (\\b ->\n            return (a, b)))\n\n\n\u5f8c\u308d\u304c\u3069\u3093\u3069\u3093\u6df1\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3001\u5b9f\u969b\u306b\u8003\u3048\u308b\u3068\u304d\u306f\u6700\u521d\u306b\u793a\u3057\u305f\u3088\u3046\u306a\u30d5\u30e9\u30c3\u30c8\u306b\u30a4\u30e1\u30fc\u30b8\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u6df7\u4e71\u304c\u5c11\u306a\u3044\u3067\u3059\u3002\u30e9\u30e0\u30c0\u5f0f\u306e\u7bc4\u56f2\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308c\u3070\u5909\u5f62\u3057\u3066\u78ba\u8a8d\u3059\u308c\u3070\u826f\u3044\u3067\u3059\u3002\n\n3. return\u3092\u5b9f\u88c5\n\u6e21\u3055\u308c\u305f\u5f15\u6570\u3092\u7121\u8996\u3057\u3066\u6307\u5b9a\u3057\u305f\u5024\u3092\u8fd4\u3059\u95a2\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u3053\u308c\u3092F#\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\u4e88\u7d04\u8a9e\u3068\u306e\u885d\u7a81\u3092\u907f\u3051\u308b\u305f\u3081ret\u3068\u3057\u307e\u3059\u3002\n\nF#\nlet ret x = fun _ -> x\n\nlet test = ret 8\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n8\n8\n\n\ntest\u306b\u6e21\u3055\u308c\u305f\u5f15\u6570\u3092\u7121\u8996\u3057\u3066\u3044\u307e\u3059\u3002\nlet ret x _ = x \u3068\u66f8\u3044\u3066\u3082\u52d5\u4f5c\u306f\u540c\u3058\u3067\u3059\u304c\u3001ret\u306e\u5f15\u6570\u306f1\u3064\u3067\u95a2\u6570\u3092\u8fd4\u3059\u3068\u3044\u3046\u610f\u56f3\u3092\u8868\u3059\u305f\u3081\u3001\u305d\u306e\u3088\u3046\u306b\u306f\u66f8\u304d\u307e\u305b\u3093\u3002\n\n4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\u3044\u304d\u306a\u308a\u591a\u6bb5\u3092\u8003\u3048\u308b\u3068\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u307e\u305a\u306f1\u6bb5\u3067\u8003\u3048\u307e\u3059\u3002\n\nHaskell\ntest = (+ 1) >>= return\n\nmain = do\n    print (test 3)\n    print (test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n4\n6\n\n\nm >>= f\u5168\u4f53\u30671\u5f15\u6570\u306e\u95a2\u6570\u304c\u69cb\u6210\u3055\u308c\u307e\u3059\u3002test\u306b\u5f15\u6570\u3092\u6e21\u3057\u3066\u8a55\u4fa1\u3067\u304d\u308b\u306e\u306f\u305d\u306e\u305f\u3081\u3067\u3059\u3002\n\u3053\u308c\u3092F#\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nF#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) ()\n\nlet test = (fun x -> x + 1) >>= ret\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n4\n6\n\n\nf (m x)\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u305d\u306e\u5f8c\u3067\u66f4\u306b()\u3092\u6e21\u3057\u3066\u3044\u308b\u306e\u304c\u3057\u3063\u304f\u308a\u6765\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u5f8c\u308d\u306b\u6765\u3066\u3044\u308bret\u306f\u5024\u304b\u3089\u95a2\u6570\u3092\u8fd4\u3059\u306e\u3067\u3001(m x)\u3092\u6e21\u3059\u3060\u3051\u3067\u306f\u95a2\u6570\u304c\u8fd4\u3063\u3066\u6765\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u66f4\u306b\u5f15\u6570\u3092\u6e21\u3057\u3066\u95a2\u6570\u3092\u8a55\u4fa1\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002ret\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\u306f\u7121\u8996\u3055\u308c\u308b\u306e\u3067\u9069\u5f53\u306b()\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\n\u203b ()\u3092\u6e21\u3059\u3053\u3068\u306b\u306f\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u306e\u6bb5\u968e\u3067\u306f\u5206\u304b\u3089\u306a\u3044\u3053\u3068\u306a\u306e\u3067\u3001\u5f8c\u3067\u691c\u8a3c\u3057\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u306etest\u306f\u30e2\u30ca\u30c9\u52472\u306b\u3088\u308atest = (+ 1)\u3068\u5358\u7d14\u5316\u3055\u308c\u307e\u3059\u3002(+ 1) >>= return\u3092\u305d\u308c\u3068\u540c\u3058\u52d5\u4f5c\u306b\u3059\u308b\u305f\u3081\u306b\u306f\u3001ret\u304b\u3089\u8fd4\u3055\u308c\u305f\u95a2\u6570\u3092\u8a55\u4fa1\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n5. \u591a\u6bb5\u5bfe\u5fdc\n\u5143\u306e\u4f8b\u306b\u9069\u7528\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n\nF#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) ()\n\nlet test =\n    (fun x -> x + 1) >>= fun a ->\n    (fun x -> x * 2) >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n\n\n\n\u30a8\u30e9\u30fc\u5185\u5bb9\nTest.fsx(6,19): error FS0001: The type 'int' does not match the type 'unit'\nTest.fsx(6,17): error FS0043: The type 'int' does not match the type 'unit'\nTest.fsx(10,19): error FS0039: The value or constructor 'test' is not defined\nTest.fsx(11,19): error FS0039: The value or constructor 'test' is not defined\n\n\n\u6700\u521d\u306e\u30a8\u30e9\u30fc\u306b\u6ce8\u76ee\u3057\u307e\u3059\u3002(fun x -> x * 2)\u306ex\u306b()\u304c\u6e21\u3055\u308c\u308b\u305f\u3081\u3001x * 2\u306e\u8a08\u7b97\u304c\u3067\u304d\u305a\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u69cb\u9020\u3092\u5358\u7d14\u5316\u3057\u3066\u8003\u3048\u308b\n\u5177\u4f53\u7684\u306a\u30b3\u30fc\u30c9\u3060\u3068\u5206\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u69cb\u9020\u3092\u5358\u7d14\u5316\u3057\u30661\u6bb5\u30682\u6bb5\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002\n\nm >>= ret\nm1 >>= (fun x -> (m2 >>= ret))\n\n1\u306ereturn\u306b\u76f8\u5f53\u3059\u308b\u90e8\u5206\u304c\u30012\u3067\u306f(fun x -> (m2 >>= ret))\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002(f (m x)) () \u3067\u6e21\u3055\u308c\u308b()\u304c1\u30682\u3067\u3069\u306e\u3088\u3046\u306b\u6271\u308f\u308c\u3066\u3044\u308b\u304b\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002\n1\u3067\u306fm\u3092\u8a55\u4fa1\u3057\u305f\u5024\u304creturn\u306b\u6e21\u3055\u308c\u3066\u3001return\u5185\u90e8\u3067\u4f5c\u3089\u308c\u305f\u95a2\u6570 fun _ -> x \u304c\u8fd4\u3063\u3066\u6765\u307e\u3059\u3002\u305d\u308c\u306b\u5bfe\u3057\u3066()\u3092\u6e21\u3057\u3066\u3082\u6368\u3066\u3089\u308c\u308b\u305f\u3081\u554f\u984c\u5316\u3057\u307e\u305b\u3093\u3002\n2\u3067\u306fm1\u3092\u8a55\u4fa1\u3057\u305f\u5024\u304c(fun x -> (m2 >>= ret))\u306b\u6e21\u3055\u308c\u3066\u3001->\u306e\u53f3\u306b\u8a18\u8ff0\u3055\u308c\u305f\u5f0f m2 >>= ret \u304c\u8fd4\u3063\u3066\u6765\u307e\u3059\u3002m2 >>= ret \u306f\u4f55\u304b\u5024\u3092\u4e0e\u3048\u308b\u3068\u8a08\u7b97\u3059\u308b\u95a2\u6570\u306b\u306a\u308b\u305f\u3081\u3001\u8a08\u7b97\u3067\u304d\u306a\u3044\u5024 () \u3092\u6e21\u3059\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002m2 >>= ret \u306b\u3082\u5916\u90e8\u304b\u3089\u6e21\u3055\u308c\u305f\u5f15\u6570\u3092\u305d\u306e\u307e\u307e\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4ee5\u4e0a\u3088\u308a>>=\u3092\u6b21\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308c\u3070\u826f\u3044\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\nF#\uff08\u4fee\u6b63\u7b87\u6240\uff09\nlet (>>=) m f = fun x -> (f (m x)) x\n\n\n\n\u4f8b\u306b\u623b\u308b\n\u4fee\u6b63\u3092\u5143\u306e\u4f8b\u306b\u9069\u7528\u3057\u3066\u307f\u307e\u3059\u3002\n\nF#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) x\n\nlet test =\n    (fun x -> x + 1) >>= fun a ->\n    (fun x -> x * 2) >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(4, 6)\n(6, 10)\n\n\n\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n(f (m x)) x \u306e\u6700\u5f8c\u306ex\u306f\u3001>>=\u3067\u9023\u7d50\u3055\u308c\u305f\u6b21\u306e\u5f0f\u306b\u56de\u3055\u308c\u308b\u306e\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002\u968e\u5c64\u69cb\u9020\u3067\u306f\u306a\u304f\u30d5\u30e9\u30c3\u30c8\u306b\u6349\u3048\u3066\u3001\u6700\u521d\u306e>>=\u304b\u3089\u6b21\u306e>>=\u3078\u306e\u30d0\u30c8\u30f3\u3060\u3068\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\u3059\u308c\u3070\u3001\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nF#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) x\n\ntype FuncBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet func = FuncBuilder()\n\nlet test = func {\n    let! a = fun x -> x + 1\n    let! b = fun x -> x * 2\n    return (a, b) }\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(4, 6)\n(6, 10)\n\n\n\u4eca\u307e\u3067\u4f5c\u3063\u3066\u6765\u305f>>=\u3068ret\u3068\u306e\u95a2\u4fc2\u3092\u793a\u3059\u305f\u3081\u30d3\u30eb\u30c0\u30fc\u304b\u3089\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u3044\u304d\u306a\u308a\u30d3\u30eb\u30c0\u30fc\u3067\u5b9f\u88c5\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\n\nF#\ntype FuncBuilder() =\n    member __.Return(x)  = fun _ -> x\n    member __.Bind(m, f) = fun x -> (f (m x)) x\nlet func = FuncBuilder()\n\n\n\nState\u30e2\u30ca\u30c9\n\u95a2\u6570\u30e2\u30ca\u30c9\u3067\u306f\u5916\u90e8\u304b\u3089\u6e21\u3055\u308c\u305f\u5024\u306f\u5909\u5316\u305b\u305a\u306b\u30d0\u30c8\u30f3\u3068\u3057\u3066\u6e21\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u305d\u308c\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002\u4ee5\u5f8c\u3001\u901a\u4f8b\u306b\u5f93\u3063\u3066\u300c\u30d0\u30c8\u30f3\u300d\u3067\u306f\u306a\u304f\u300c\u72b6\u614b\u300d\u3068\u547c\u3073\u307e\u3059\u3002\n\n1. Haskell\u306e\u4f8b\n\nHaskell\nimport Control.Monad.State\n\ntest = do\n    a <- get\n    put (a * 2)\n    b <- get\n    return (a, b)\n\nmain = do\n    print (evalState test 3)\n    print (evalState test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(3,6)\n(5,10)\n\n\n\u95a2\u6570\u30e2\u30ca\u30c9\u306ftest\u306b\u76f4\u63a5\u5024\u3092\u6e21\u305b\u3070\u8a55\u4fa1\u3067\u304d\u307e\u3057\u305f\u304c\u3001State\u30e2\u30ca\u30c9\u3067\u306fevalState\u306e\u529b\u3092\u501f\u308a\u3066\u3044\u307e\u3059\u3002\nget\u306f\u72b6\u614b\u3092\u53d6\u5f97\u3059\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3059\u3002\u72b6\u614b\u306fput\u306b\u3088\u3063\u3066\u66f8\u304d\u66ff\u3048\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n2. do\u3092\u5265\u304c\u3059\n\nHaskell\ntest =\n    get         >>= \\a ->\n    put (a * 2) >>= \\_ ->\n    get         >>= \\b ->\n    return (a, b)\n\n\n<-\u3092\u66f8\u304b\u306a\u3044\u884c\u306f\u5f62\u5f0f\u7684\u306b_\u306b\u6e21\u3057\u3066\u6368\u3066\u307e\u3059\u3002\u305d\u308c\u5c02\u7528\u306e>>\u3068\u3044\u3046\u6f14\u7b97\u5b50\u3082\u3042\u308a\u307e\u3059\u304c\u3001>>=\u3067\u7d71\u4e00\u7684\u306b\u8a18\u8ff0\u3059\u308b\u305f\u3081\u4eca\u56de\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\n\u203b \u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3067\u306fdo!\u3068\u66f8\u304d\u307e\u3059\u3002\u5f8c\u3067\u4f7f\u3044\u307e\u3059\u3002\n\n3. return\u3092\u5b9f\u88c5\n\u5f62\u5f0f\u4e0aevalState\u3092\u7d4c\u7531\u3057\u3066\u306f\u3044\u307e\u3059\u304c\u3001\u307e\u3060\u95a2\u6570\u30e2\u30ca\u30c9\u3068\u540c\u3058\u3067\u3059\u3002\n\nF#\nlet evalState m = m\n\nlet ret x = fun _ -> x\n\nlet test = ret 8\n\ndo\n    printfn \"%A\" (evalState test 3)\n    printfn \"%A\" (evalState test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n8\n8\n\n\n\n4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\u307e\u305aget\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u307e\u3060\u95a2\u6570\u30e2\u30ca\u30c9\u3068\u540c\u3058\u3067\u3059\u3002\n\nF#\nlet evalState m = m\nlet get = id\n\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> f (m x) x\n\nlet test = get >>= ret\n\ndo\n    printfn \"%A\" (evalState test 3)\n    printfn \"%A\" (evalState test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n3\n5\n\n\n\n5. \u591a\u6bb5\u5bfe\u5fdc\nput\u3092\u6df7\u305c\u3066\u307f\u307e\u3059\u3002\n\nF#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> f (m x) x\n\nlet evalState m = m\nlet get = id\nlet put = ret\n\nlet test =\n    get         >>= fun a ->\n    put (a * 2) >>= fun _ ->\n    get         >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (evalState test 3)\n    printfn \"%A\" (evalState test 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(3, 3)\n(5, 5)\n\n\nput\u304c\u3046\u307e\u304f\u6a5f\u80fd\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u4fee\u6b63\n\u6b21\u306e>>=\u306b\u6e21\u3055\u308c\u308b\u72b6\u614b\u304c\u5143\u306e\u307e\u307e\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001(m x)\u306e\u623b\u308a\u5024\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nF#\uff08\u4fee\u6b63\u7b87\u6240\uff09\nlet (>>=) m f = fun x ->\n    let y = m x\n    f y y\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(3, 6)\n(5, 10)\n\n\n\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n\n\u5024\u3068\u72b6\u614b\u306e\u5206\u96e2\n\u5b9f\u306f\u307e\u3060State\u30e2\u30ca\u30c9\u3068\u3057\u3066\u306f\u4e0d\u5b8c\u5168\u3067\u3059\u3002\nHaskell\u3067\u306f\u6b21\u306e\u3088\u3046\u306a\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\nHaskell\nimport Control.Monad.State\n\npostInc = do\n    x <- get\n    put (x + 1)\n    return x\n\ntest2 = do\n    a <- postInc\n    b <- postInc\n    return (a, b)\n\nmain = do\n    print (evalState test2 3)\n    print (evalState test2 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(3,4)\n(5,6)\n\n\npostInc\u3067\u72b6\u614b\u3092\u66f4\u65b0\u3057\u307e\u3059\u304c\u3001return\u3055\u308c\u308b\u306e\u306f\u66f4\u65b0\u524d\u306e\u5024\u3067\u3059\u3002\n\u203b C\u8a00\u8a9e\u306a\u3069\u306e i++ \u3092\u30a4\u30e1\u30fc\u30b8\u3057\u3066\u3044\u307e\u3059\u3002\n\ndo\u3092\u5265\u304c\u3059\n\nHaskell\npostInc =\n    get         >>= \\x ->\n    put (x + 1) >>= \\_ ->\n    return x\n\ntest2 =\n    postInc >>= \\a ->\n    postInc >>= \\b ->\n    return (a, b)\n\n\n\n\u30a8\u30e9\u30fc\n\u3053\u308c\u3092F#\u3067\u8a66\u3059\u3068\u3046\u307e\u304f\u52d5\u304d\u307e\u305b\u3093\u3002\n\nF#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x ->\n    let y = m x\n    f y y\n\nlet evalState m = m\nlet get = id\nlet put = ret\n\nlet postInc =\n    get         >>= fun x ->\n    put (x + 1) >>= fun _ ->\n    ret x\n\nlet test2 =\n    postInc >>= fun a ->\n    postInc >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (evalState test2 3)\n    printfn \"%A\" (evalState test2 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(3, 3)\n(5, 5)\n\n\n\u5024\u3068\u72b6\u614b\u3092\u5206\u96e2\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001put\u3067\u66f4\u65b0\u3055\u308c\u305f\u5024\u304cret\u3067\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u4fee\u6b63\n\u5024\u3068\u72b6\u614b\u3092\u5206\u96e2\u3057\u3066\u3001\u30bf\u30d7\u30eb\u3067\u53d7\u3051\u6e21\u3059\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u5909\u66f4\u306f ret \u304b\u3089 put \u307e\u3067\u306b\u62bc\u3057\u8fbc\u307e\u3070\u3001\u4ed6\u306e\u30b3\u30fc\u30c9\u306f\u4fee\u6b63\u4e0d\u8981\u3067\u3059\u3002\n\nF#\uff08\u4fee\u6b63\u7b87\u6240\uff09\nlet ret   x   = fun s -> (x, s)\nlet (>>=) m f = fun s ->\n    let (x, s') = m s\n    f x s'\n\nlet evalState m s = fst (m s)\nlet get   = fun s -> (s , s)\nlet put s = fun _ -> ((), s)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(3, 4)\n(5, 6)\n\n\nHaskell\u3068\u540c\u3058\u52d5\u304d\u3092\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nevalState\u4ee5\u5916\u306e\u4fee\u6b63\u7b87\u6240\u3067\u306f\u72b6\u614b\u3092\u53d7\u3051\u53d6\u3063\u3066\u5024\u3068\u72b6\u614b\u306e\u30bf\u30d7\u30eb\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u72b6\u614b -> (\u5024, \u72b6\u614b)\n\nevalState\u3067\u306f\u30bf\u30d7\u30eb\u304b\u3089\u5024\u3060\u3051\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u3002\n\u95a2\u6570\u30e2\u30ca\u30c9\u3067\u306fs\u306b\u76f8\u5f53\u3059\u308b\u90e8\u5206\u304c\u4e0d\u5909\u3060\u3063\u305f\u305f\u3081\u3001\u3053\u306e\u3088\u3046\u306b\u5206\u96e2\u3057\u3066\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\nput\u3067\u306f\u8fd4\u3055\u308c\u308b\u5024()\u3092\u6368\u3066\u3066\u3044\u307e\u3059\u3002Haskell\u3067\u306f\u4f55\u3082\u66f8\u304b\u306a\u3044\u3068\u81ea\u52d5\u7684\u306b\u5024\u304c\u6368\u3066\u3089\u308c\u307e\u3059\u304c\u3001F#\u3067\u306fdo!\u3067\u660e\u793a\u3057\u307e\u3059\u3002\n\nF#\nlet ret   x   = fun s -> (x, s)\nlet (>>=) m f = fun s ->\n    let (x, s') = m s\n    f x s'\n\ntype StateBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet state = StateBuilder()\n\nlet evalState m s = fst (m s)\nlet get   = fun s -> (s , s)\nlet put s = fun _ -> ((), s)\n\nlet test = state {\n    let! a = get\n    do! put (a * 2)\n    let! b = get\n    return (a, b) }\n\nlet postInc = state {\n    let! x = get\n    do! put (x + 1)\n    return x }\n\nlet test2 = state {\n    let! a = postInc\n    let! b = postInc\n    return (a, b) }\n\ndo\n    printfn \"%A\" (evalState test  3)\n    printfn \"%A\" (evalState test  5)\n    printfn \"%A\" (evalState test2 3)\n    printfn \"%A\" (evalState test2 5)\n\n\n\n\u5b9f\u884c\u7d50\u679c\n(3, 6)\n(5, 10)\n(3, 4)\n(5, 6)\n\n\n\u95a2\u6570\u30e2\u30ca\u30c9\u3084State\u30e2\u30ca\u30c9\u306e\u3088\u3046\u306b\u88cf\u3067\u72b6\u614b\u304c\u53d6\u308a\u56de\u3059\u30bf\u30a4\u30d7\u306f\u3001\u72b6\u614b\u7cfb\u30e2\u30ca\u30c9\u3068\u547c\u3070\u308c\u307e\u3059\u3002\u72b6\u614b\u3092\u6271\u3046\u3053\u3068\u306f\u30e2\u30ca\u30c9\u5171\u901a\u306e\u7279\u5fb4\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u30ea\u30b9\u30c8\u30e2\u30ca\u30c9\n\u95a2\u6570\u306f\u30e2\u30ca\u30c9\u3068\u3057\u3066\u6271\u3048\u307e\u3057\u305f\u304c\u3001\u30ea\u30b9\u30c8\u3082\u30e2\u30ca\u30c9\u3068\u3057\u3066\u6271\u3048\u307e\u3059\u3002\n\u4eca\u307e\u3067\u898b\u3066\u6765\u305f\u72b6\u614b\u7cfb\u30e2\u30ca\u30c9\u3068\u306f\u7570\u306a\u308b\u30bf\u30a4\u30d7\u3067\u3059\u3002\u72b6\u614b\u3092\u5f15\u304d\u56de\u3059\u3053\u3068\u306f\u3057\u307e\u305b\u3093\u3002\n\u30ea\u30b9\u30c8\u30e2\u30ca\u30c9\u306f\u30eb\u30fc\u30d7\u3092\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n1. Haskell\u306e\u4f8b\n\nHaskell\ntest = do\n    a <- [1, 2, 3]\n    b <- [4, 5, 6]\n    return (a * b)\n\nmain = do\n    print test\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[4,5,6,8,10,12,12,15,18]\n\n\n\u30ea\u30b9\u30c8\u304b\u3089\u306e\u5024\u306e\u53d6\u308a\u51fa\u3057\u304c\u5024\u30921\u3064\u305a\u3064\u53d6\u308a\u51fa\u3059\u30eb\u30fc\u30d7\u306b\u5909\u63db\u3055\u308c\u307e\u3059\u3002\u30d5\u30e9\u30c3\u30c8\u306b\u66f8\u3044\u3066\u3044\u307e\u3059\u304c\u4e8c\u91cd\u30eb\u30fc\u30d7\u3067\u3059\u3002F#\u3067\u52d5\u4f5c\u3092\u771f\u4f3c\u305f\u3082\u306e\u3068\u898b\u6bd4\u3079\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nF#\nlet test =\n    let list = new System.Collections.Generic.List<int>()\n    for a in [1; 2; 3] do\n        for b in [4; 5; 6] do\n            list.Add(a * b)\n    Seq.toList list\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[4; 5; 6; 8; 10; 12; 12; 15; 18]\n\n\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3067Haskell\u306e\u6319\u52d5\u3092\u518d\u73fe\u3059\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\u203b Haskell\u304b\u3089F#\u306b\u5909\u63db\u3059\u308b\u3068\u304d\u3001\u30ea\u30b9\u30c8\u306e\u533a\u5207\u308a\u3092,\u304b\u3089;\u306b\u66f8\u304d\u66ff\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002,\u306e\u307e\u307e\u3060\u3068\u30bf\u30d7\u30eb\u304c\u5165\u3063\u305f1\u8981\u7d20\u306e\u30ea\u30b9\u30c8\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n2. do\u3092\u5265\u304c\u3059\n\nHaskell\ntest =\n    [1, 2, 3] >>= \\a ->\n    [4, 5, 6] >>= \\b ->\n    return (a * b)\n\n\n\n3. return\u3092\u5b9f\u88c5\n\u8981\u7d20\u304c1\u3064\u306e\u30ea\u30b9\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002\n\nF#\nlet ret x = [x]\n\nlet test = ret 1\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[1]\n\n\n\n4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\u30eb\u30fc\u30d7\u3092\u610f\u8b58\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nF#\nlet ret x = [x]\nlet (>>=) (m:'a list) f =\n    let list = new System.Collections.Generic.List<'a>()\n    for x in m do\n        list.AddRange(f x)\n    Seq.toList list\n\nlet test = [1; 2; 3] >>= ret\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[1; 2; 3]\n\n\n\n5. \u591a\u6bb5\u5bfe\u5fdc\n\u305d\u306e\u307e\u307e\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\nF#\nlet ret x = [x]\nlet (>>=) (m:'a list) f =\n    let list = new System.Collections.Generic.List<'a>()\n    for x in m do\n        list.AddRange(f x)\n    Seq.toList list\n\nlet test =\n    [1; 2; 3] >>= fun a ->\n    [4; 5; 6] >>= fun b ->\n    ret (a * b)\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[4; 5; 6; 8; 10; 12; 12; 15; 18]\n\n\n\u3059\u3093\u306a\u308a\u52d5\u304d\u307e\u3057\u305f\u3002\n\n6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\nF#\nlet ret x = [x]\nlet (>>=) (m:'a list) f =\n    let list = new System.Collections.Generic.List<'a>()\n    for x in m do\n        list.AddRange(f x)\n    Seq.toList list\n\ntype ListMonadBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet listMonad = ListMonadBuilder()\n\nlet test = listMonad {\n    let! a = [1; 2; 3]\n    let! b = [4; 5; 6]\n    return a * b }\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[4; 5; 6; 8; 10; 12; 12; 15; 18]\n\n\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3060\u3051\u3092\u898b\u308c\u3070\u3001for\u306a\u3057\u3067\u30eb\u30fc\u30d7\u304c\u5b9f\u73fe\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\n\n\u7a7a\u306e\u30ea\u30b9\u30c8\n\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4e0e\u3048\u308b\u3068\u3001\u5f8c\u7d9a\u306e\u51e6\u7406\u304c\u884c\u308f\u308c\u307e\u305b\u3093\u3002\n\nF#\uff08\u5909\u66f4\u7b87\u6240\uff09\nlet test = listMonad {\n    let! a = [1; 2; 3]\n    let! b = []\n    return a * b }\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[]\n\n\n\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4e0e\u3048\u3066\u3082\u30eb\u30fc\u30d7\u306e\u4e2d\u306b\u5165\u3089\u306a\u3044\u3068\u89e3\u91c8\u3067\u304d\u307e\u3059\u3002\n\nF#\nlet test =\n    let list = new System.Collections.Generic.List<int>()\n    for a in [1; 2; 3] do\n        for b in [] do       // \u7a7a\u306e\u30ea\u30b9\u30c8\n            list.Add(a * b)  // \u4e2d\u306b\u5165\u3089\u306a\u3044\n    Seq.toList list\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[]\n\n\n\u3053\u306e\u6027\u8cea\u306e\u5fdc\u7528\u3068\u3057\u3066\u3001\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u306e\u9014\u4e2d\u3067\u308f\u3056\u3068\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4e0e\u3048\u3066\u9014\u4e2d\u8131\u51fa\u306b\u4f7f\u3048\u307e\u3059\u3002\n\nMaybe\u30e2\u30ca\u30c9\n\u300c1\u500b\u307e\u3067\u3057\u304b\u8981\u7d20\u304c\u6301\u3066\u306a\u3044\u30ea\u30b9\u30c8\u300d\u306b\u76f8\u5f53\u3059\u308b\u30e2\u30ca\u30c9\u3067\u3059\u3002\u500b\u6570\u304c\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u4ee5\u5916\u306e\u6319\u52d5\u306f\u57fa\u672c\u7684\u306b\u540c\u3058\u3067\u3059\u3002\nHaskell\u3068F#\u3067\u306f\u8868\u8a18\u304c\u82e5\u5e72\u7570\u306a\u308b\u306e\u3067\u6bd4\u8f03\u3057\u307e\u3059\u3002F#\u3067\u306foption\u578b\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\n\nHaskell\n0\u500b\n1\u500b\n2\u500b\n3\u500b\n4\u500b\u4ee5\u4e0a\n\n\n\n\n\u30ea\u30b9\u30c8\n[]\n[x]\n[x, y]\n[x, y, z]\n\uff08\u7565\uff09\n\n\nMaybe\nNothing\nJust x\n\u306a\u3057\n\u306a\u3057\n\u306a\u3057\n\n\n\n\n\n\nF#\n0\u500b\n1\u500b\n2\u500b\n3\u500b\n4\u500b\u4ee5\u4e0a\n\n\n\n\n\u30ea\u30b9\u30c8\n[]\n[x]\n[x; y]\n[x; y; z]\n\uff08\u7565\uff09\n\n\nMaybe\nNone\nSome x\n\u306a\u3057\n\u306a\u3057\n\u306a\u3057\n\n\n\n0\u500b\u306f\u5024\u304c\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u306b\u3088\u308a\u95a2\u6570\u304c\u8a55\u4fa1\u306b\u5931\u6557\u3057\u3066\u5024\u3092\u8fd4\u305b\u306a\u3044\u3053\u3068\u304c\u8868\u73fe\u3067\u304d\u307e\u3059\u3002\n\n1. Haskell\u306e\u4f8b\nNothing\u304b\u3089\u5024\u3092\u53d6\u308a\u51fa\u305d\u3046\u3068\u3057\u3066\u3082\u5931\u6557\u3057\u3066\u3001\u51e6\u7406\u304c\u9014\u4e2d\u3067\u6253\u3061\u5207\u3089\u308c\u307e\u3059\u3002\u7a7a\u306e\u30ea\u30b9\u30c8\u3067\u9014\u4e2d\u8131\u51fa\u306b\u306a\u308b\u306e\u3068\u540c\u3058\u3060\u3068\u8003\u3048\u308c\u3070\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\nHaskell\nfact 0 = Just 1\nfact n | n > 0 = do n' <- fact (n - 1); return (n * n')\n       | otherwise = Nothing\n\nfacts n = do\n    a <- fact  n\n    b <- fact (n - 1)\n    c <- fact (n - 2)\n    return (a, b, c)\n\nmain = do\n    print (facts 3)\n    print (facts 2)\n    print (facts 1)  -- c\u3067\u5931\u6557\n    print (facts 0)  -- b\u3067\u5931\u6557\n\n\n\n\u5b9f\u884c\u7d50\u679c\nJust (6,2,1)\nJust (2,1,1)\nNothing\nNothing\n\n\n\n2. do\u3092\u5265\u304c\u3059\n\nHaskell\nfact 0 = Just 1\nfact n | n > 0 = fact (n - 1) >>= \\n' -> return (n * n')\n       | otherwise = Nothing\n\nfacts n =\n    fact  n      >>= \\a ->\n    fact (n - 1) >>= \\b ->\n    fact (n - 2) >>= \\c ->\n    return (a, b, c)\n\n\n\n3. return\u3092\u5b9f\u88c5\nSome\u306b\u5165\u308c\u308b\u3060\u3051\u3067\u3059\u3002\n\nF#\nlet ret x = Some x\n\nlet test = ret 1\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\nSome 1\n\n\n\n4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\u8981\u7d20\u6570\u306f0\u304b1\u306a\u306e\u3067\u3001\u30eb\u30fc\u30d7\u3068\u3057\u3066\u51e6\u7406\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\nF#\nlet ret x = Some x\nlet (>>=) (m:'a option) f =\n    match m with\n    | Some x -> f x\n    | None   -> None\n\nlet test = Some 1 >>= ret\n\ndo\n    printfn \"%A\" test\n\n\n\n\u5b9f\u884c\u7d50\u679c\nSome 1\n\n\nf\u3092\u8a55\u4fa1\u3057\u306a\u3044\u3053\u3068\u3067\u3001\u51e6\u7406\u3092\u9014\u4e2d\u3067\u6253\u3061\u5207\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n5. \u591a\u6bb5\u5bfe\u5fdc\n\u305d\u306e\u307e\u307e\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\nF#\nlet ret x = Some x\nlet (>>=) (m:'a option) f =\n    match m with\n    | Some x -> f x\n    | None   -> None\n\nlet rec fact = function\n| 0            -> Some 1\n| n when n > 0 -> fact (n - 1) >>= fun n' -> ret (n * n')\n| _            -> None\n\nlet facts n =\n    fact  n      >>= fun a ->\n    fact (n - 1) >>= fun b ->\n    fact (n - 2) >>= fun c ->\n    ret (a, b, c)\n\ndo\n    printfn \"%A\" (facts 3)\n    printfn \"%A\" (facts 2)\n    printfn \"%A\" (facts 1)  // c\u3067\u5931\u6557\n    printfn \"%A\" (facts 0)  // b\u3067\u5931\u6557\n\n\n\n\u5b9f\u884c\u7d50\u679c\nSome (6, 2, 1)\nSome (2, 1, 1)\n<null>\n<null>\n\n\nNone\u306f<null>\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3059\u3093\u306a\u308a\u52d5\u304d\u307e\u3057\u305f\u3002\n\n6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\nF#\nlet ret x = Some x\nlet (>>=) (m:'a option) f =\n    match m with\n    | Some x -> f x\n    | None   -> None\n\ntype MaybeBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet maybe = MaybeBuilder()\n\nlet rec fact = function\n| 0            -> Some 1\n| n when n > 0 -> maybe { let! n' = fact (n - 1) in return (n * n') }\n| _            -> None\n\nlet facts n = maybe {\n    let! a = fact  n\n    let! b = fact (n - 1)\n    let! c = fact (n - 2)\n    return (a, b, c) }\n\ndo\n    printfn \"%A\" (facts 3)\n    printfn \"%A\" (facts 2)\n    printfn \"%A\" (facts 1)  // c\u3067\u5931\u6557\n    printfn \"%A\" (facts 0)  // b\u3067\u5931\u6557\n\n\n\n\u5b9f\u884c\u7d50\u679c\nSome (6, 2, 1)\nSome (2, 1, 1)\n<null>\n<null>\n\n\nlet!\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5931\u6557\u304c\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3001\u5931\u6557\u3057\u3066\u3044\u305f\u3089\u9014\u4e2d\u3067\u6253\u3061\u5207\u3089\u308c\u307e\u3059\u3002\n\n\u304a\u308f\u308a\u306b\n\u3044\u304f\u3064\u304b\u30e2\u30ca\u30c9\u3092\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3067\u5b9f\u88c5\u3057\u3066\u6765\u307e\u3057\u305f\u3002\u8907\u96d1\u306a\u30b3\u30fc\u30c9\u306f\u4e00\u6c17\u306b\u66f8\u3051\u306a\u3044\u306e\u3067\u3001\u306a\u308b\u3079\u304f\u76f4\u611f\u7684\u306b\u5c11\u3057\u305a\u3064\u66f8\u304f\u904e\u7a0b\u3092\u793a\u305d\u3046\u3068\u8a66\u307f\u307e\u3057\u305f\u3002Return\u3068Bind\u3060\u3051\u3067\u8272\u3005\u306a\u51e6\u7406\u304c\u8868\u73fe\u3067\u304d\u308b\u3053\u3068\u304c\u5206\u304b\u308c\u3070\u3001\u307e\u305a\u306f\u5341\u5206\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u3053\u3053\u306b\u793a\u3057\u305f\u3082\u306e\u306f\u3069\u308c\u3082\u57fa\u672c\u7684\u306a\u30e2\u30ca\u30c9\u3070\u304b\u308a\u3067\u3059\u3002\u3042\u308b\u7a0b\u5ea6\u306f\u6163\u308c\u3066\u304a\u3051\u3070\u3001\u65b0\u3057\u3044\u767a\u60f3\u306e\u30bf\u30cd\u3068\u3082\u306a\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u306e\u7df4\u7fd2\u3068\u3057\u3066\u3001\u3044\u304f\u3064\u304b\u30e2\u30ca\u30c9\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002`Bind`\u3068`Return`\u3060\u3051\u3067\u4f55\u304c\u3067\u304d\u308b\u306e\u304b\u3092\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u306e\u304c\u76ee\u7684\u3067\u3059\u3002\n\n\u30e2\u30ca\u30c9\u3084Haskell\u306f\u524d\u63d0\u77e5\u8b58\u3068\u306f\u3057\u307e\u305b\u3093\u3002\u30e2\u30ca\u30c9\u3092\u7406\u89e3\u3057\u3066\u3044\u306a\u304f\u3066\u3082\u52d5\u304d\u3092\u8ffd\u3046\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u3002\u6700\u521d\u306bHaskell\u3067\u4f8b\u3092\u793a\u3057\u307e\u3059\u304c\u3001\u3059\u3050\u5bfe\u5fdc\u3059\u308bF#\u3092\u793a\u3059\u306e\u3067\u63a8\u6e2c\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306f\u6b21\u306e\u7d9a\u7de8\u3067\u3059\u3002\n\n* [do\u30d6\u30ed\u30c3\u30af\u3068\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f](http://qiita.com/7shi/items/92139286a4e9b5620d69) 2016.07.01\n\n\u4eca\u56de\u6271\u3046\u30e2\u30ca\u30c9\u306e\u8a73\u7d30\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n* [\u30e2\u30ca\u30c9\u5247\u304c\u3061\u3087\u3063\u3068\u5206\u304b\u3063\u305f\uff1f](http://qiita.com/7shi/items/547b6137d7a3c482fe68) 2014.12.01\n* [Haskell \u72b6\u614b\u7cfb\u30e2\u30ca\u30c9 \u8d85\u5165\u9580](http://qiita.com/7shi/items/2e9bff5d88302de1a9e9) 2014.12.27\n* [Haskell Maybe\u30e2\u30ca\u30c9 \u8d85\u5165\u9580](http://qiita.com/7shi/items/c7d7eec066af0fe0688d) 2015.01.22\n* [Haskell \u30ea\u30b9\u30c8\u30e2\u30ca\u30c9 \u8d85\u5165\u9580](http://qiita.com/7shi/items/deb19c4cba933590ffbf) 2014.12.19\n\n# \u30e2\u30ca\u30c9\n\n\u203b \u3053\u306e\u7bc0\u306e\u8aac\u660e\u306f\u524d\u63d0\u77e5\u8b58\u304c\u306a\u3044\u3068\u610f\u5473\u4e0d\u660e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u5148\u306b\u5b9f\u4f8b\u306b\u89e6\u308c\u3066\u632f\u308a\u8fd4\u308b\u3068\u304d\u306e\u6307\u91dd\u3068\u3057\u3066\u8a00\u53ca\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u9069\u5f53\u306b\u53d7\u3051\u6d41\u3057\u3066\u5148\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\n`return`\u3068`>>=`(bind)\u3067\u64cd\u4f5c\u3067\u304d\u3066\u30e2\u30ca\u30c9\u5247\u3092\u6e80\u305f\u3059\u3082\u306e\u3092\u30e2\u30ca\u30c9\u3068\u547c\u3073\u307e\u3059\u3002\n\n## \u30e2\u30ca\u30c9\u5247\n\n\u30e2\u30ca\u30c9\u5247\u306f`return`\u3068`>>=`\u306e\u52d5\u304d\u306b\u95a2\u3059\u308b\u30eb\u30fc\u30eb\u3067\u3059\u3002\n\n1. `return x >>= f` == `f x`\n2. `m >>= return` == `m`\n3. `(m >>= f) >>= g` == `m >>= (\\x -> f x >>= g)`\n\n\u3044\u304d\u306a\u308a\u898b\u3066\u3082\u7406\u89e3\u3067\u304d\u308b\u4ee3\u7269\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u3042\u307e\u308a\u6c17\u306b\u3057\u306a\u304f\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\u4e00\u5fdc\u3001\u8aad\u307f\u65b9\u3092\u8aac\u660e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n* \u5404\u30e2\u30ca\u30c9\u5247\u306f\u5f0f\u3092 == \u3067\u533a\u5207\u308a\u3001\u5de6\u8fba\u3068\u53f3\u8fba\u304c\u7b49\u3057\u3044\u304b\u3092\u898b\u307e\u3059\u3002\n* \u7b49\u3057\u304f\u306a\u308b\u3082\u306e\u304c\u30e2\u30ca\u30c9\u3060\u3001\u3068\u3044\u3046\u30eb\u30fc\u30eb\u3067\u3059\u3002\n* \u7b49\u3057\u304f\u306a\u3089\u306a\u3044\u3082\u306e\u306f\u4f5c\u308c\u307e\u3059\u304c\u3001\u305d\u308c\u306f\u30e2\u30ca\u30c9\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u3053\u308c\u3067\u4f55\u304c\u3067\u304d\u308b\u304b\u306f\u4e00\u610f\u306b\u6c7a\u307e\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u8272\u3005\u3067\u304d\u308b\u3068\u3057\u304b\u8a00\u3044\u3088\u3046\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u7d19\u3068\u925b\u7b46\u3067\u4f55\u304c\u3067\u304d\u308b\u304b\u3068\u8a00\u308f\u308c\u3066\u300c\u6587\u7ae0\u304c\u66f8\u3051\u308b\u3001\u8a08\u7b97\u304c\u3067\u304d\u308b\u3001\u7d75\u304c\u63cf\u3051\u308b\u300d\u3068\u7b54\u3048\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\u305d\u308c\u306b\u76f8\u5f53\u3059\u308b\u5177\u4f53\u4f8b\u3068\u3057\u3066\u4f55\u7a2e\u985e\u304b\u306e\u30e2\u30ca\u30c9\u3092\u793a\u3057\u307e\u3059\u3002\n\n1. \u95a2\u6570\u30e2\u30ca\u30c9\n2. State\u30e2\u30ca\u30c9\n3. \u30ea\u30b9\u30c8\u30e2\u30ca\u30c9\n4. Maybe\u30e2\u30ca\u30c9\n\n\u203b \u500b\u3005\u306e\u30e2\u30ca\u30c9\u304c\u4f55\u3089\u304b\u306e\u62bd\u8c61\u7684\u306a\u539f\u7406\uff08\u30e2\u30ca\u30c9\u306e\u672c\u8cea\uff1f\u570f\u8ad6\uff1f\uff09\u304b\u3089\u5c0e\u51fa\u3055\u308c\u305f\u3068\u6349\u3048\u306a\u3044\u65b9\u304c\u826f\u3044\u3067\u3059\u3002\u308f\u3051\u304c\u308f\u304b\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002`return`\u3068`>>=`\u306f\u7d19\u3068\u925b\u7b46\u307f\u305f\u3044\u306a\u3082\u306e\u3067\u3001\u305d\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u3046\u307e\u304f\u3044\u304f\u3082\u306e\u304c\u3044\u304f\u3064\u304b\u767a\u898b\u3055\u308c\u3066\u3044\u308b\u3001\u304f\u3089\u3044\u306b\u8003\u3048\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n## \u30aa\u30da\u30e9\u30f3\u30c9\n\n`>>=`\u306e\u30aa\u30da\u30e9\u30f3\u30c9\u306f\u30e2\u30ca\u30c9\u52473\u306b\u3082\u8868\u308c\u3066\u3044\u308b\u3088\u3046\u306b`m >>= f`\u3068\u66f8\u304f\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002`m`\u306f\u30e2\u30ca\u30c9\u3001`f`\u306f\u95a2\u6570\u3092\u8868\u3057\u307e\u3059\u3002\n\n\u5a92\u4ecb\u5909\u6570`x`\u3067\u8868\u3057\u305f\u3082\u306e\u3068\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3059\u3002\n\n```hs:Haskell\ntest1 = m >>= f\ntest2 = do\n    x <- m\n    f x\ntest3 = m >>= \\x -> f x\n```\n\n`m`\u304b\u3089\u5024\u3092\u53d6\u308a\u51fa\u3057\u3066`x`\u306b\u675f\u7e1b\u3057\u3066\u3001\u305d\u308c\u3092`f`\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\n\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u306f\u30e2\u30ca\u30c9\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u8003\u616e\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u30e2\u30ca\u30c9\u5c02\u7528\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u610f\u56f3\u7684\u306b\u30e2\u30ca\u30c9\u5247\u3092\u6e80\u305f\u3055\u306a\u3044\u300c\u30e2\u30ca\u30c9\u3082\u3069\u304d\u300d\u3092\u4f5c\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3001\u4eca\u56de\u306f\u6271\u3044\u307e\u305b\u3093\u304c\u305d\u308c\u3082\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u6709\u7528\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u3010\u8ffd\u8a18 2016.07.04\u3011\u30e2\u30ca\u30c9\u3082\u3069\u304d\u3092\u4f5c\u3063\u3066\u307f\u305f\u4f8b\u3067\u3059\u3002\n\n* [\u8a66\u4f5c\u3057\u305f\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3068\u95a2\u6570\u30e2\u30ca\u30c9](http://qiita.com/7shi/items/6635d6bea5c455cbb4da) 2016.07.04\n\n# \u4f5c\u696d\u624b\u9806\n\n\u4f5c\u696d\u624b\u9806\u3092\u30d1\u30bf\u30fc\u30f3\u5316\u3057\u307e\u3059\u3002\n\n1. Haskell\u306e\u4f8b\n2. `do`\u3092\u5265\u304c\u3059\n3. `return`\u3092\u5b9f\u88c5\n4. 1\u6bb5\u3067`>>=`\u3092\u5b9f\u88c5\n5. \u591a\u6bb5\u5bfe\u5fdc\n6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\n# \u95a2\u6570\u30e2\u30ca\u30c9\n\n\u6e21\u3057\u305f\u5f15\u6570\u3092\u88dc\u3063\u3066\u8a08\u7b97\u3059\u308b\u30e2\u30ca\u30c9\u3067\u3059\u3002\n\n`m >>= f`\u306e`m`\u306e\u90e8\u5206\u306b\u95a2\u6570\u304c\u6765\u307e\u3059\u3002\u3053\u308c\u306f\u95a2\u6570\u3092\u30e2\u30ca\u30c9\u3068\u3057\u3066\u6271\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u610f\u5473\u5408\u3044\u3067\u300c\u95a2\u6570\u30e2\u30ca\u30c9\u300d\u3067\u3059\u3002\n\n## 1. Haskell\u306e\u4f8b\n\n\u307e\u305a\u304a\u624b\u672c\u3068\u3057\u3066Haskell\u3092\u898b\u307e\u3059\u3002\n\n```hs:Haskell\ntest = do\n    a <- (+ 1)\n    b <- (* 2)\n    return (a, b)\n\nmain = do\n    print (test 3)\n    print (test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(4,6)\n(6,10)\n```\n\n## 2. do\u3092\u5265\u304c\u3059\n\n`test`\u304b\u3089`do`\u3092\u5265\u304c\u3057\u307e\u3059\u3002\n\n```hs:Haskell\ntest =\n    (+ 1) >>= \\a ->\n    (* 2) >>= \\b ->\n    return (a, b)\n```\n\n\u30e9\u30e0\u30c0\u5f0f\u306e\u30cd\u30b9\u30c8\u304c\u5206\u304b\u308a\u306b\u304f\u3044\u305f\u3081\u3001\u62ec\u5f27\u3068\u30cd\u30b9\u30c8\u3092\u4ed8\u3051\u305f\u3082\u306e\u3092\u793a\u3057\u307e\u3059\u3002\n\n```hs:Haskell\ntest =\n    (+ 1) >>= (\\a ->\n        (* 2) >>= (\\b ->\n            return (a, b)))\n```\n\n\u5f8c\u308d\u304c\u3069\u3093\u3069\u3093\u6df1\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3001\u5b9f\u969b\u306b\u8003\u3048\u308b\u3068\u304d\u306f\u6700\u521d\u306b\u793a\u3057\u305f\u3088\u3046\u306a\u30d5\u30e9\u30c3\u30c8\u306b\u30a4\u30e1\u30fc\u30b8\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u6df7\u4e71\u304c\u5c11\u306a\u3044\u3067\u3059\u3002\u30e9\u30e0\u30c0\u5f0f\u306e\u7bc4\u56f2\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308c\u3070\u5909\u5f62\u3057\u3066\u78ba\u8a8d\u3059\u308c\u3070\u826f\u3044\u3067\u3059\u3002\n\n## 3. return\u3092\u5b9f\u88c5\n\n\u6e21\u3055\u308c\u305f\u5f15\u6570\u3092\u7121\u8996\u3057\u3066\u6307\u5b9a\u3057\u305f\u5024\u3092\u8fd4\u3059\u95a2\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3092F#\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\u4e88\u7d04\u8a9e\u3068\u306e\u885d\u7a81\u3092\u907f\u3051\u308b\u305f\u3081`ret`\u3068\u3057\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret x = fun _ -> x\n\nlet test = ret 8\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n8\n8\n```\n\n`test`\u306b\u6e21\u3055\u308c\u305f\u5f15\u6570\u3092\u7121\u8996\u3057\u3066\u3044\u307e\u3059\u3002\n\n`let ret x _ = x` \u3068\u66f8\u3044\u3066\u3082\u52d5\u4f5c\u306f\u540c\u3058\u3067\u3059\u304c\u3001`ret`\u306e\u5f15\u6570\u306f1\u3064\u3067\u95a2\u6570\u3092\u8fd4\u3059\u3068\u3044\u3046\u610f\u56f3\u3092\u8868\u3059\u305f\u3081\u3001\u305d\u306e\u3088\u3046\u306b\u306f\u66f8\u304d\u307e\u305b\u3093\u3002\n\n## 4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\n\u3044\u304d\u306a\u308a\u591a\u6bb5\u3092\u8003\u3048\u308b\u3068\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u307e\u305a\u306f1\u6bb5\u3067\u8003\u3048\u307e\u3059\u3002\n\n```hs:Haskell\ntest = (+ 1) >>= return\n\nmain = do\n    print (test 3)\n    print (test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n4\n6\n```\n\n`m >>= f`\u5168\u4f53\u30671\u5f15\u6570\u306e\u95a2\u6570\u304c\u69cb\u6210\u3055\u308c\u307e\u3059\u3002`test`\u306b\u5f15\u6570\u3092\u6e21\u3057\u3066\u8a55\u4fa1\u3067\u304d\u308b\u306e\u306f\u305d\u306e\u305f\u3081\u3067\u3059\u3002\n\n\u3053\u308c\u3092F#\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) ()\n\nlet test = (fun x -> x + 1) >>= ret\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n4\n6\n```\n\n`f (m x)`\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u305d\u306e\u5f8c\u3067\u66f4\u306b`()`\u3092\u6e21\u3057\u3066\u3044\u308b\u306e\u304c\u3057\u3063\u304f\u308a\u6765\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u5f8c\u308d\u306b\u6765\u3066\u3044\u308b`ret`\u306f\u5024\u304b\u3089\u95a2\u6570\u3092\u8fd4\u3059\u306e\u3067\u3001`(m x)`\u3092\u6e21\u3059\u3060\u3051\u3067\u306f\u95a2\u6570\u304c\u8fd4\u3063\u3066\u6765\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u66f4\u306b\u5f15\u6570\u3092\u6e21\u3057\u3066\u95a2\u6570\u3092\u8a55\u4fa1\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002`ret`\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\u306f\u7121\u8996\u3055\u308c\u308b\u306e\u3067\u9069\u5f53\u306b`()`\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u203b `()`\u3092\u6e21\u3059\u3053\u3068\u306b\u306f\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u306e\u6bb5\u968e\u3067\u306f\u5206\u304b\u3089\u306a\u3044\u3053\u3068\u306a\u306e\u3067\u3001\u5f8c\u3067\u691c\u8a3c\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u4f8b\u306e`test`\u306f\u30e2\u30ca\u30c9\u52472\u306b\u3088\u308a`test = (+ 1)`\u3068\u5358\u7d14\u5316\u3055\u308c\u307e\u3059\u3002`(+ 1) >>= return`\u3092\u305d\u308c\u3068\u540c\u3058\u52d5\u4f5c\u306b\u3059\u308b\u305f\u3081\u306b\u306f\u3001`ret`\u304b\u3089\u8fd4\u3055\u308c\u305f\u95a2\u6570\u3092\u8a55\u4fa1\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n## 5. \u591a\u6bb5\u5bfe\u5fdc\n\n\u5143\u306e\u4f8b\u306b\u9069\u7528\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) ()\n\nlet test =\n    (fun x -> x + 1) >>= fun a ->\n    (fun x -> x * 2) >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n```\n```text:\u30a8\u30e9\u30fc\u5185\u5bb9\nTest.fsx(6,19): error FS0001: The type 'int' does not match the type 'unit'\nTest.fsx(6,17): error FS0043: The type 'int' does not match the type 'unit'\nTest.fsx(10,19): error FS0039: The value or constructor 'test' is not defined\nTest.fsx(11,19): error FS0039: The value or constructor 'test' is not defined\n```\n\n\u6700\u521d\u306e\u30a8\u30e9\u30fc\u306b\u6ce8\u76ee\u3057\u307e\u3059\u3002`(fun x -> x * 2)`\u306e`x`\u306b`()`\u304c\u6e21\u3055\u308c\u308b\u305f\u3081\u3001`x * 2`\u306e\u8a08\u7b97\u304c\u3067\u304d\u305a\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n### \u69cb\u9020\u3092\u5358\u7d14\u5316\u3057\u3066\u8003\u3048\u308b\n\n\u5177\u4f53\u7684\u306a\u30b3\u30fc\u30c9\u3060\u3068\u5206\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u69cb\u9020\u3092\u5358\u7d14\u5316\u3057\u30661\u6bb5\u30682\u6bb5\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002\n\n1. `m >>= ret`\n2. `m1 >>= (fun x -> (m2 >>= ret))`\n\n1\u306e`return`\u306b\u76f8\u5f53\u3059\u308b\u90e8\u5206\u304c\u30012\u3067\u306f`(fun x -> (m2 >>= ret))`\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002`(f (m x)) ()` \u3067\u6e21\u3055\u308c\u308b`()`\u304c1\u30682\u3067\u3069\u306e\u3088\u3046\u306b\u6271\u308f\u308c\u3066\u3044\u308b\u304b\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002\n\n1\u3067\u306f`m`\u3092\u8a55\u4fa1\u3057\u305f\u5024\u304c`return`\u306b\u6e21\u3055\u308c\u3066\u3001`return`\u5185\u90e8\u3067\u4f5c\u3089\u308c\u305f\u95a2\u6570 `fun _ -> x` \u304c\u8fd4\u3063\u3066\u6765\u307e\u3059\u3002\u305d\u308c\u306b\u5bfe\u3057\u3066`()`\u3092\u6e21\u3057\u3066\u3082\u6368\u3066\u3089\u308c\u308b\u305f\u3081\u554f\u984c\u5316\u3057\u307e\u305b\u3093\u3002\n\n2\u3067\u306f`m1`\u3092\u8a55\u4fa1\u3057\u305f\u5024\u304c`(fun x -> (m2 >>= ret))`\u306b\u6e21\u3055\u308c\u3066\u3001`->`\u306e\u53f3\u306b\u8a18\u8ff0\u3055\u308c\u305f\u5f0f `m2 >>= ret` \u304c\u8fd4\u3063\u3066\u6765\u307e\u3059\u3002`m2 >>= ret` \u306f\u4f55\u304b\u5024\u3092\u4e0e\u3048\u308b\u3068\u8a08\u7b97\u3059\u308b\u95a2\u6570\u306b\u306a\u308b\u305f\u3081\u3001\u8a08\u7b97\u3067\u304d\u306a\u3044\u5024 `()` \u3092\u6e21\u3059\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002`m2 >>= ret` \u306b\u3082\u5916\u90e8\u304b\u3089\u6e21\u3055\u308c\u305f\u5f15\u6570\u3092\u305d\u306e\u307e\u307e\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u3088\u308a`>>=`\u3092\u6b21\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308c\u3070\u826f\u3044\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n```fsharp:F#\uff08\u4fee\u6b63\u7b87\u6240\uff09\nlet (>>=) m f = fun x -> (f (m x)) x\n```\n\n### \u4f8b\u306b\u623b\u308b\n\n\u4fee\u6b63\u3092\u5143\u306e\u4f8b\u306b\u9069\u7528\u3057\u3066\u307f\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) x\n\nlet test =\n    (fun x -> x + 1) >>= fun a ->\n    (fun x -> x * 2) >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(4, 6)\n(6, 10)\n```\n\n\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n\n`(f (m x)) x` \u306e\u6700\u5f8c\u306e`x`\u306f\u3001`>>=`\u3067\u9023\u7d50\u3055\u308c\u305f\u6b21\u306e\u5f0f\u306b\u56de\u3055\u308c\u308b\u306e\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002\u968e\u5c64\u69cb\u9020\u3067\u306f\u306a\u304f\u30d5\u30e9\u30c3\u30c8\u306b\u6349\u3048\u3066\u3001\u6700\u521d\u306e`>>=`\u304b\u3089\u6b21\u306e`>>=`\u3078\u306e\u30d0\u30c8\u30f3\u3060\u3068\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n## 6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\n\u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\u3059\u308c\u3070\u3001\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> (f (m x)) x\n\ntype FuncBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet func = FuncBuilder()\n\nlet test = func {\n    let! a = fun x -> x + 1\n    let! b = fun x -> x * 2\n    return (a, b) }\n\ndo\n    printfn \"%A\" (test 3)\n    printfn \"%A\" (test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(4, 6)\n(6, 10)\n```\n\n\u4eca\u307e\u3067\u4f5c\u3063\u3066\u6765\u305f`>>=`\u3068`ret`\u3068\u306e\u95a2\u4fc2\u3092\u793a\u3059\u305f\u3081\u30d3\u30eb\u30c0\u30fc\u304b\u3089\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u3044\u304d\u306a\u308a\u30d3\u30eb\u30c0\u30fc\u3067\u5b9f\u88c5\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\n\n```fsharp:F#\ntype FuncBuilder() =\n    member __.Return(x)  = fun _ -> x\n    member __.Bind(m, f) = fun x -> (f (m x)) x\nlet func = FuncBuilder()\n```\n\n# State\u30e2\u30ca\u30c9\n\n\u95a2\u6570\u30e2\u30ca\u30c9\u3067\u306f\u5916\u90e8\u304b\u3089\u6e21\u3055\u308c\u305f\u5024\u306f\u5909\u5316\u305b\u305a\u306b\u30d0\u30c8\u30f3\u3068\u3057\u3066\u6e21\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u305d\u308c\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002\u4ee5\u5f8c\u3001\u901a\u4f8b\u306b\u5f93\u3063\u3066\u300c\u30d0\u30c8\u30f3\u300d\u3067\u306f\u306a\u304f\u300c\u72b6\u614b\u300d\u3068\u547c\u3073\u307e\u3059\u3002\n\n## 1. Haskell\u306e\u4f8b\n\n```hs:Haskell\nimport Control.Monad.State\n\ntest = do\n    a <- get\n    put (a * 2)\n    b <- get\n    return (a, b)\n\nmain = do\n    print (evalState test 3)\n    print (evalState test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(3,6)\n(5,10)\n```\n\n\u95a2\u6570\u30e2\u30ca\u30c9\u306f`test`\u306b\u76f4\u63a5\u5024\u3092\u6e21\u305b\u3070\u8a55\u4fa1\u3067\u304d\u307e\u3057\u305f\u304c\u3001State\u30e2\u30ca\u30c9\u3067\u306f`evalState`\u306e\u529b\u3092\u501f\u308a\u3066\u3044\u307e\u3059\u3002\n\n`get`\u306f\u72b6\u614b\u3092\u53d6\u5f97\u3059\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3059\u3002\u72b6\u614b\u306f`put`\u306b\u3088\u3063\u3066\u66f8\u304d\u66ff\u3048\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n## 2. do\u3092\u5265\u304c\u3059\n\n```hs:Haskell\ntest =\n    get         >>= \\a ->\n    put (a * 2) >>= \\_ ->\n    get         >>= \\b ->\n    return (a, b)\n```\n\n`<-`\u3092\u66f8\u304b\u306a\u3044\u884c\u306f\u5f62\u5f0f\u7684\u306b`_`\u306b\u6e21\u3057\u3066\u6368\u3066\u307e\u3059\u3002\u305d\u308c\u5c02\u7528\u306e`>>`\u3068\u3044\u3046\u6f14\u7b97\u5b50\u3082\u3042\u308a\u307e\u3059\u304c\u3001`>>=`\u3067\u7d71\u4e00\u7684\u306b\u8a18\u8ff0\u3059\u308b\u305f\u3081\u4eca\u56de\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\n\n\u203b \u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3067\u306f`do!`\u3068\u66f8\u304d\u307e\u3059\u3002\u5f8c\u3067\u4f7f\u3044\u307e\u3059\u3002\n\n## 3. return\u3092\u5b9f\u88c5\n\n\u5f62\u5f0f\u4e0a`evalState`\u3092\u7d4c\u7531\u3057\u3066\u306f\u3044\u307e\u3059\u304c\u3001\u307e\u3060\u95a2\u6570\u30e2\u30ca\u30c9\u3068\u540c\u3058\u3067\u3059\u3002\n\n```fsharp:F#\nlet evalState m = m\n\nlet ret x = fun _ -> x\n\nlet test = ret 8\n\ndo\n    printfn \"%A\" (evalState test 3)\n    printfn \"%A\" (evalState test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n8\n8\n```\n\n## 4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\n\u307e\u305a`get`\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u307e\u3060\u95a2\u6570\u30e2\u30ca\u30c9\u3068\u540c\u3058\u3067\u3059\u3002\n\n```fsharp:F#\nlet evalState m = m\nlet get = id\n\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> f (m x) x\n\nlet test = get >>= ret\n\ndo\n    printfn \"%A\" (evalState test 3)\n    printfn \"%A\" (evalState test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n3\n5\n```\n\n## 5. \u591a\u6bb5\u5bfe\u5fdc\n\n`put`\u3092\u6df7\u305c\u3066\u307f\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x -> f (m x) x\n\nlet evalState m = m\nlet get = id\nlet put = ret\n\nlet test =\n    get         >>= fun a ->\n    put (a * 2) >>= fun _ ->\n    get         >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (evalState test 3)\n    printfn \"%A\" (evalState test 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(3, 3)\n(5, 5)\n```\n\n`put`\u304c\u3046\u307e\u304f\u6a5f\u80fd\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n### \u4fee\u6b63\n\n\u6b21\u306e`>>=`\u306b\u6e21\u3055\u308c\u308b\u72b6\u614b\u304c\u5143\u306e\u307e\u307e\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001`(m x)`\u306e\u623b\u308a\u5024\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```fsharp:F#\uff08\u4fee\u6b63\u7b87\u6240\uff09\nlet (>>=) m f = fun x ->\n    let y = m x\n    f y y\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(3, 6)\n(5, 10)\n```\n\n\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n\n## \u5024\u3068\u72b6\u614b\u306e\u5206\u96e2\n\n\u5b9f\u306f\u307e\u3060State\u30e2\u30ca\u30c9\u3068\u3057\u3066\u306f\u4e0d\u5b8c\u5168\u3067\u3059\u3002\n\nHaskell\u3067\u306f\u6b21\u306e\u3088\u3046\u306a\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n```hs:Haskell\nimport Control.Monad.State\n\npostInc = do\n    x <- get\n    put (x + 1)\n    return x\n\ntest2 = do\n    a <- postInc\n    b <- postInc\n    return (a, b)\n\nmain = do\n    print (evalState test2 3)\n    print (evalState test2 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(3,4)\n(5,6)\n```\n\n`postInc`\u3067\u72b6\u614b\u3092\u66f4\u65b0\u3057\u307e\u3059\u304c\u3001`return`\u3055\u308c\u308b\u306e\u306f\u66f4\u65b0\u524d\u306e\u5024\u3067\u3059\u3002\n\n\u203b C\u8a00\u8a9e\u306a\u3069\u306e `i++` \u3092\u30a4\u30e1\u30fc\u30b8\u3057\u3066\u3044\u307e\u3059\u3002\n\n### `do`\u3092\u5265\u304c\u3059\n\n```hs:Haskell\npostInc =\n    get         >>= \\x ->\n    put (x + 1) >>= \\_ ->\n    return x\n\ntest2 =\n    postInc >>= \\a ->\n    postInc >>= \\b ->\n    return (a, b)\n```\n\n### \u30a8\u30e9\u30fc\n\n\u3053\u308c\u3092F#\u3067\u8a66\u3059\u3068\u3046\u307e\u304f\u52d5\u304d\u307e\u305b\u3093\u3002\n\n```fsharp:F#\nlet ret   x   = fun _ -> x\nlet (>>=) m f = fun x ->\n    let y = m x\n    f y y\n\nlet evalState m = m\nlet get = id\nlet put = ret\n\nlet postInc =\n    get         >>= fun x ->\n    put (x + 1) >>= fun _ ->\n    ret x\n\nlet test2 =\n    postInc >>= fun a ->\n    postInc >>= fun b ->\n    ret (a, b)\n\ndo\n    printfn \"%A\" (evalState test2 3)\n    printfn \"%A\" (evalState test2 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(3, 3)\n(5, 5)\n```\n\n\u5024\u3068\u72b6\u614b\u3092\u5206\u96e2\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001`put`\u3067\u66f4\u65b0\u3055\u308c\u305f\u5024\u304c`ret`\u3067\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\n### \u4fee\u6b63\n\n\u5024\u3068\u72b6\u614b\u3092\u5206\u96e2\u3057\u3066\u3001\u30bf\u30d7\u30eb\u3067\u53d7\u3051\u6e21\u3059\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u5909\u66f4\u306f `ret` \u304b\u3089 `put` \u307e\u3067\u306b\u62bc\u3057\u8fbc\u307e\u3070\u3001\u4ed6\u306e\u30b3\u30fc\u30c9\u306f\u4fee\u6b63\u4e0d\u8981\u3067\u3059\u3002\n\n```fsharp:F#\uff08\u4fee\u6b63\u7b87\u6240\uff09\nlet ret   x   = fun s -> (x, s)\nlet (>>=) m f = fun s ->\n    let (x, s') = m s\n    f x s'\n\nlet evalState m s = fst (m s)\nlet get   = fun s -> (s , s)\nlet put s = fun _ -> ((), s)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(3, 4)\n(5, 6)\n```\n\nHaskell\u3068\u540c\u3058\u52d5\u304d\u3092\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n`evalState`\u4ee5\u5916\u306e\u4fee\u6b63\u7b87\u6240\u3067\u306f\u72b6\u614b\u3092\u53d7\u3051\u53d6\u3063\u3066\u5024\u3068\u72b6\u614b\u306e\u30bf\u30d7\u30eb\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u3002\n\n* `\u72b6\u614b -> (\u5024, \u72b6\u614b)`\n\n`evalState`\u3067\u306f\u30bf\u30d7\u30eb\u304b\u3089\u5024\u3060\u3051\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u95a2\u6570\u30e2\u30ca\u30c9\u3067\u306f`s`\u306b\u76f8\u5f53\u3059\u308b\u90e8\u5206\u304c\u4e0d\u5909\u3060\u3063\u305f\u305f\u3081\u3001\u3053\u306e\u3088\u3046\u306b\u5206\u96e2\u3057\u3066\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n## 6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\n`put`\u3067\u306f\u8fd4\u3055\u308c\u308b\u5024`()`\u3092\u6368\u3066\u3066\u3044\u307e\u3059\u3002Haskell\u3067\u306f\u4f55\u3082\u66f8\u304b\u306a\u3044\u3068\u81ea\u52d5\u7684\u306b\u5024\u304c\u6368\u3066\u3089\u308c\u307e\u3059\u304c\u3001F#\u3067\u306f`do!`\u3067\u660e\u793a\u3057\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret   x   = fun s -> (x, s)\nlet (>>=) m f = fun s ->\n    let (x, s') = m s\n    f x s'\n\ntype StateBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet state = StateBuilder()\n\nlet evalState m s = fst (m s)\nlet get   = fun s -> (s , s)\nlet put s = fun _ -> ((), s)\n\nlet test = state {\n    let! a = get\n    do! put (a * 2)\n    let! b = get\n    return (a, b) }\n\nlet postInc = state {\n    let! x = get\n    do! put (x + 1)\n    return x }\n\nlet test2 = state {\n    let! a = postInc\n    let! b = postInc\n    return (a, b) }\n\ndo\n    printfn \"%A\" (evalState test  3)\n    printfn \"%A\" (evalState test  5)\n    printfn \"%A\" (evalState test2 3)\n    printfn \"%A\" (evalState test2 5)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(3, 6)\n(5, 10)\n(3, 4)\n(5, 6)\n```\n\n\u95a2\u6570\u30e2\u30ca\u30c9\u3084State\u30e2\u30ca\u30c9\u306e\u3088\u3046\u306b\u88cf\u3067\u72b6\u614b\u304c\u53d6\u308a\u56de\u3059\u30bf\u30a4\u30d7\u306f\u3001\u72b6\u614b\u7cfb\u30e2\u30ca\u30c9\u3068\u547c\u3070\u308c\u307e\u3059\u3002\u72b6\u614b\u3092\u6271\u3046\u3053\u3068\u306f\u30e2\u30ca\u30c9\u5171\u901a\u306e\u7279\u5fb4\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n# \u30ea\u30b9\u30c8\u30e2\u30ca\u30c9\n\n\u95a2\u6570\u306f\u30e2\u30ca\u30c9\u3068\u3057\u3066\u6271\u3048\u307e\u3057\u305f\u304c\u3001\u30ea\u30b9\u30c8\u3082\u30e2\u30ca\u30c9\u3068\u3057\u3066\u6271\u3048\u307e\u3059\u3002\n\n\u4eca\u307e\u3067\u898b\u3066\u6765\u305f\u72b6\u614b\u7cfb\u30e2\u30ca\u30c9\u3068\u306f\u7570\u306a\u308b\u30bf\u30a4\u30d7\u3067\u3059\u3002\u72b6\u614b\u3092\u5f15\u304d\u56de\u3059\u3053\u3068\u306f\u3057\u307e\u305b\u3093\u3002\n\n\u30ea\u30b9\u30c8\u30e2\u30ca\u30c9\u306f\u30eb\u30fc\u30d7\u3092\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n## 1. Haskell\u306e\u4f8b\n\n```hs:Haskell\ntest = do\n    a <- [1, 2, 3]\n    b <- [4, 5, 6]\n    return (a * b)\n\nmain = do\n    print test\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[4,5,6,8,10,12,12,15,18]\n```\n\n\u30ea\u30b9\u30c8\u304b\u3089\u306e\u5024\u306e\u53d6\u308a\u51fa\u3057\u304c\u5024\u30921\u3064\u305a\u3064\u53d6\u308a\u51fa\u3059\u30eb\u30fc\u30d7\u306b\u5909\u63db\u3055\u308c\u307e\u3059\u3002\u30d5\u30e9\u30c3\u30c8\u306b\u66f8\u3044\u3066\u3044\u307e\u3059\u304c\u4e8c\u91cd\u30eb\u30fc\u30d7\u3067\u3059\u3002F#\u3067\u52d5\u4f5c\u3092\u771f\u4f3c\u305f\u3082\u306e\u3068\u898b\u6bd4\u3079\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```fsharp:F#\nlet test =\n    let list = new System.Collections.Generic.List<int>()\n    for a in [1; 2; 3] do\n        for b in [4; 5; 6] do\n            list.Add(a * b)\n    Seq.toList list\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[4; 5; 6; 8; 10; 12; 12; 15; 18]\n```\n\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3067Haskell\u306e\u6319\u52d5\u3092\u518d\u73fe\u3059\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\n\u203b Haskell\u304b\u3089F#\u306b\u5909\u63db\u3059\u308b\u3068\u304d\u3001\u30ea\u30b9\u30c8\u306e\u533a\u5207\u308a\u3092`,`\u304b\u3089`;`\u306b\u66f8\u304d\u66ff\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002`,`\u306e\u307e\u307e\u3060\u3068\u30bf\u30d7\u30eb\u304c\u5165\u3063\u305f1\u8981\u7d20\u306e\u30ea\u30b9\u30c8\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n## 2. do\u3092\u5265\u304c\u3059\n\n```hs:Haskell\ntest =\n    [1, 2, 3] >>= \\a ->\n    [4, 5, 6] >>= \\b ->\n    return (a * b)\n```\n\n## 3. return\u3092\u5b9f\u88c5\n\n\u8981\u7d20\u304c1\u3064\u306e\u30ea\u30b9\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret x = [x]\n\nlet test = ret 1\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[1]\n```\n\n## 4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\n\u30eb\u30fc\u30d7\u3092\u610f\u8b58\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret x = [x]\nlet (>>=) (m:'a list) f =\n    let list = new System.Collections.Generic.List<'a>()\n    for x in m do\n        list.AddRange(f x)\n    Seq.toList list\n\nlet test = [1; 2; 3] >>= ret\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[1; 2; 3]\n```\n\n## 5. \u591a\u6bb5\u5bfe\u5fdc\n\n\u305d\u306e\u307e\u307e\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret x = [x]\nlet (>>=) (m:'a list) f =\n    let list = new System.Collections.Generic.List<'a>()\n    for x in m do\n        list.AddRange(f x)\n    Seq.toList list\n\nlet test =\n    [1; 2; 3] >>= fun a ->\n    [4; 5; 6] >>= fun b ->\n    ret (a * b)\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[4; 5; 6; 8; 10; 12; 12; 15; 18]\n```\n\n\u3059\u3093\u306a\u308a\u52d5\u304d\u307e\u3057\u305f\u3002\n\n## 6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\n```fsharp:F#\nlet ret x = [x]\nlet (>>=) (m:'a list) f =\n    let list = new System.Collections.Generic.List<'a>()\n    for x in m do\n        list.AddRange(f x)\n    Seq.toList list\n\ntype ListMonadBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet listMonad = ListMonadBuilder()\n\nlet test = listMonad {\n    let! a = [1; 2; 3]\n    let! b = [4; 5; 6]\n    return a * b }\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[4; 5; 6; 8; 10; 12; 12; 15; 18]\n```\n\n\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3060\u3051\u3092\u898b\u308c\u3070\u3001`for`\u306a\u3057\u3067\u30eb\u30fc\u30d7\u304c\u5b9f\u73fe\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\n\n## \u7a7a\u306e\u30ea\u30b9\u30c8\n\n\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4e0e\u3048\u308b\u3068\u3001\u5f8c\u7d9a\u306e\u51e6\u7406\u304c\u884c\u308f\u308c\u307e\u305b\u3093\u3002\n\n```fsharp:F#\uff08\u5909\u66f4\u7b87\u6240\uff09\nlet test = listMonad {\n    let! a = [1; 2; 3]\n    let! b = []\n    return a * b }\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[]\n```\n\n\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4e0e\u3048\u3066\u3082\u30eb\u30fc\u30d7\u306e\u4e2d\u306b\u5165\u3089\u306a\u3044\u3068\u89e3\u91c8\u3067\u304d\u307e\u3059\u3002\n\n```fsharp:F#\nlet test =\n    let list = new System.Collections.Generic.List<int>()\n    for a in [1; 2; 3] do\n        for b in [] do       // \u7a7a\u306e\u30ea\u30b9\u30c8\n            list.Add(a * b)  // \u4e2d\u306b\u5165\u3089\u306a\u3044\n    Seq.toList list\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\n[]\n```\n\n\u3053\u306e\u6027\u8cea\u306e\u5fdc\u7528\u3068\u3057\u3066\u3001\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u306e\u9014\u4e2d\u3067\u308f\u3056\u3068\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4e0e\u3048\u3066\u9014\u4e2d\u8131\u51fa\u306b\u4f7f\u3048\u307e\u3059\u3002\n\n# Maybe\u30e2\u30ca\u30c9\n\n\u300c1\u500b\u307e\u3067\u3057\u304b\u8981\u7d20\u304c\u6301\u3066\u306a\u3044\u30ea\u30b9\u30c8\u300d\u306b\u76f8\u5f53\u3059\u308b\u30e2\u30ca\u30c9\u3067\u3059\u3002\u500b\u6570\u304c\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u4ee5\u5916\u306e\u6319\u52d5\u306f\u57fa\u672c\u7684\u306b\u540c\u3058\u3067\u3059\u3002\n\nHaskell\u3068F#\u3067\u306f\u8868\u8a18\u304c\u82e5\u5e72\u7570\u306a\u308b\u306e\u3067\u6bd4\u8f03\u3057\u307e\u3059\u3002F#\u3067\u306f`option`\u578b\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nHaskell|0\u500b |1\u500b |2\u500b |3\u500b |4\u500b\u4ee5\u4e0a\n-------|----|----|----|----|-------\n\u30ea\u30b9\u30c8 |`[]` |`[x]` |`[x, y]`|`[x, y, z]`|\uff08\u7565\uff09\nMaybe  |`Nothing`|`Just x`|\u306a\u3057 |\u306a\u3057 |\u306a\u3057\n\nF#  |0\u500b |1\u500b |2\u500b |3\u500b |4\u500b\u4ee5\u4e0a\n----|----|----|----|----|-------\n\u30ea\u30b9\u30c8|`[]` |`[x]` |`[x; y]`|`[x; y; z]`|\uff08\u7565\uff09\nMaybe |`None`|`Some x`|\u306a\u3057 |\u306a\u3057 |\u306a\u3057\n\n0\u500b\u306f\u5024\u304c\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u306b\u3088\u308a\u95a2\u6570\u304c\u8a55\u4fa1\u306b\u5931\u6557\u3057\u3066\u5024\u3092\u8fd4\u305b\u306a\u3044\u3053\u3068\u304c\u8868\u73fe\u3067\u304d\u307e\u3059\u3002\n\n## 1. Haskell\u306e\u4f8b\n\n`Nothing`\u304b\u3089\u5024\u3092\u53d6\u308a\u51fa\u305d\u3046\u3068\u3057\u3066\u3082\u5931\u6557\u3057\u3066\u3001\u51e6\u7406\u304c\u9014\u4e2d\u3067\u6253\u3061\u5207\u3089\u308c\u307e\u3059\u3002\u7a7a\u306e\u30ea\u30b9\u30c8\u3067\u9014\u4e2d\u8131\u51fa\u306b\u306a\u308b\u306e\u3068\u540c\u3058\u3060\u3068\u8003\u3048\u308c\u3070\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n```hs:Haskell\nfact 0 = Just 1\nfact n | n > 0 = do n' <- fact (n - 1); return (n * n')\n       | otherwise = Nothing\n\nfacts n = do\n    a <- fact  n\n    b <- fact (n - 1)\n    c <- fact (n - 2)\n    return (a, b, c)\n\nmain = do\n    print (facts 3)\n    print (facts 2)\n    print (facts 1)  -- c\u3067\u5931\u6557\n    print (facts 0)  -- b\u3067\u5931\u6557\n```\n```text:\u5b9f\u884c\u7d50\u679c\nJust (6,2,1)\nJust (2,1,1)\nNothing\nNothing\n```\n\n## 2. do\u3092\u5265\u304c\u3059\n\n```hs:Haskell\nfact 0 = Just 1\nfact n | n > 0 = fact (n - 1) >>= \\n' -> return (n * n')\n       | otherwise = Nothing\n\nfacts n =\n    fact  n      >>= \\a ->\n    fact (n - 1) >>= \\b ->\n    fact (n - 2) >>= \\c ->\n    return (a, b, c)\n```\n\n## 3. return\u3092\u5b9f\u88c5\n\n`Some`\u306b\u5165\u308c\u308b\u3060\u3051\u3067\u3059\u3002\n\n```fsharp:F#\nlet ret x = Some x\n\nlet test = ret 1\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\nSome 1\n```\n\n## 4. 1\u6bb5\u3067>>=\u3092\u5b9f\u88c5\n\n\u8981\u7d20\u6570\u306f0\u304b1\u306a\u306e\u3067\u3001\u30eb\u30fc\u30d7\u3068\u3057\u3066\u51e6\u7406\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n```fsharp:F#\nlet ret x = Some x\nlet (>>=) (m:'a option) f =\n    match m with\n    | Some x -> f x\n    | None   -> None\n\nlet test = Some 1 >>= ret\n\ndo\n    printfn \"%A\" test\n```\n```text:\u5b9f\u884c\u7d50\u679c\nSome 1\n```\n\n`f`\u3092\u8a55\u4fa1\u3057\u306a\u3044\u3053\u3068\u3067\u3001\u51e6\u7406\u3092\u9014\u4e2d\u3067\u6253\u3061\u5207\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n## 5. \u591a\u6bb5\u5bfe\u5fdc\n\n\u305d\u306e\u307e\u307e\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n```fsharp:F#\nlet ret x = Some x\nlet (>>=) (m:'a option) f =\n    match m with\n    | Some x -> f x\n    | None   -> None\n\nlet rec fact = function\n| 0            -> Some 1\n| n when n > 0 -> fact (n - 1) >>= fun n' -> ret (n * n')\n| _            -> None\n\nlet facts n =\n    fact  n      >>= fun a ->\n    fact (n - 1) >>= fun b ->\n    fact (n - 2) >>= fun c ->\n    ret (a, b, c)\n\ndo\n    printfn \"%A\" (facts 3)\n    printfn \"%A\" (facts 2)\n    printfn \"%A\" (facts 1)  // c\u3067\u5931\u6557\n    printfn \"%A\" (facts 0)  // b\u3067\u5931\u6557\n```\n```text:\u5b9f\u884c\u7d50\u679c\nSome (6, 2, 1)\nSome (2, 1, 1)\n<null>\n<null>\n```\n\n`None`\u306f`<null>`\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3059\u3093\u306a\u308a\u52d5\u304d\u307e\u3057\u305f\u3002\n\n## 6. \u30d3\u30eb\u30c0\u30fc\u3092\u5b9f\u88c5\n\n```fsharp:F#\nlet ret x = Some x\nlet (>>=) (m:'a option) f =\n    match m with\n    | Some x -> f x\n    | None   -> None\n\ntype MaybeBuilder() =\n    member __.Return(x)  = ret x\n    member __.Bind(m, f) = m >>= f\nlet maybe = MaybeBuilder()\n\nlet rec fact = function\n| 0            -> Some 1\n| n when n > 0 -> maybe { let! n' = fact (n - 1) in return (n * n') }\n| _            -> None\n\nlet facts n = maybe {\n    let! a = fact  n\n    let! b = fact (n - 1)\n    let! c = fact (n - 2)\n    return (a, b, c) }\n\ndo\n    printfn \"%A\" (facts 3)\n    printfn \"%A\" (facts 2)\n    printfn \"%A\" (facts 1)  // c\u3067\u5931\u6557\n    printfn \"%A\" (facts 0)  // b\u3067\u5931\u6557\n```\n```text:\u5b9f\u884c\u7d50\u679c\nSome (6, 2, 1)\nSome (2, 1, 1)\n<null>\n<null>\n```\n\n`let!`\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5931\u6557\u304c\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3001\u5931\u6557\u3057\u3066\u3044\u305f\u3089\u9014\u4e2d\u3067\u6253\u3061\u5207\u3089\u308c\u307e\u3059\u3002\n\n# \u304a\u308f\u308a\u306b\n\n\u3044\u304f\u3064\u304b\u30e2\u30ca\u30c9\u3092\u30b3\u30f3\u30d4\u30e5\u30c6\u30fc\u30b7\u30e7\u30f3\u5f0f\u3067\u5b9f\u88c5\u3057\u3066\u6765\u307e\u3057\u305f\u3002\u8907\u96d1\u306a\u30b3\u30fc\u30c9\u306f\u4e00\u6c17\u306b\u66f8\u3051\u306a\u3044\u306e\u3067\u3001\u306a\u308b\u3079\u304f\u76f4\u611f\u7684\u306b\u5c11\u3057\u305a\u3064\u66f8\u304f\u904e\u7a0b\u3092\u793a\u305d\u3046\u3068\u8a66\u307f\u307e\u3057\u305f\u3002`Return`\u3068`Bind`\u3060\u3051\u3067\u8272\u3005\u306a\u51e6\u7406\u304c\u8868\u73fe\u3067\u304d\u308b\u3053\u3068\u304c\u5206\u304b\u308c\u3070\u3001\u307e\u305a\u306f\u5341\u5206\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u3053\u3053\u306b\u793a\u3057\u305f\u3082\u306e\u306f\u3069\u308c\u3082\u57fa\u672c\u7684\u306a\u30e2\u30ca\u30c9\u3070\u304b\u308a\u3067\u3059\u3002\u3042\u308b\u7a0b\u5ea6\u306f\u6163\u308c\u3066\u304a\u3051\u3070\u3001\u65b0\u3057\u3044\u767a\u60f3\u306e\u30bf\u30cd\u3068\u3082\u306a\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n"}