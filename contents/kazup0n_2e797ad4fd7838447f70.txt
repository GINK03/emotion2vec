{"context": "\n\n\u3056\u3063\u304f\u308a\nElasticBeanstalk\u74b0\u5883\u306eapache access log\u306ftd-agent\u306e\u30d7\u30ea\u30bb\u30c3\u30c8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8(apache2)\u3067\u306f\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\n\u4e0b\u8a18\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u30d1\u30fc\u30b9\u3067\u304d\u308b\nformat /^[^ ]* \\((?<host>[^ ]*)\\) [^ ]* (?<user>[^ ]*) \\[(?<time>[^\\]]*)\\] \"(?<method>\\S+)(?: +(?<path>[^\\\"]*?)(?: +\\S*)?)?\" (?<code>[^ ]*) (?<size>[^ ]*)(?: \"(?<referer>[^\\\"]*)\" \"(?<agent>[^\\\"]*)\")?$/\ntime_format %d/%b/%Y:%H:%M:%S %z\n\n\nTL;DR\n/etc/httpd/conf/httpd.conf \u306e\u6700\u5f8c\u306e\u65b9\u306b\u8ffd\u52a0\u306e\u8a2d\u5b9a\u304c\u3042\u308a\u3001(%{X-Forwarded-For}i) \u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\n#/etc/httpd/conf/httpd.conf\n\n#### AWS Settings ####\n\n(\u7565)\n\n# Add remote IP to log\nLogFormat \"%h (%{X-Forwarded-For}i) %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n\n#### End of AWS Settings ####\n\n## \u3056\u3063\u304f\u308a\n\nElasticBeanstalk\u74b0\u5883\u306eapache access log\u306ftd-agent\u306e\u30d7\u30ea\u30bb\u30c3\u30c8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8(`apache2`)\u3067\u306f\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\n\u4e0b\u8a18\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u30d1\u30fc\u30b9\u3067\u304d\u308b\n\n```\nformat /^[^ ]* \\((?<host>[^ ]*)\\) [^ ]* (?<user>[^ ]*) \\[(?<time>[^\\]]*)\\] \"(?<method>\\S+)(?: +(?<path>[^\\\"]*?)(?: +\\S*)?)?\" (?<code>[^ ]*) (?<size>[^ ]*)(?: \"(?<referer>[^\\\"]*)\" \"(?<agent>[^\\\"]*)\")?$/\ntime_format %d/%b/%Y:%H:%M:%S %z\n```\n\n## TL;DR\n\n`/etc/httpd/conf/httpd.conf` \u306e\u6700\u5f8c\u306e\u65b9\u306b\u8ffd\u52a0\u306e\u8a2d\u5b9a\u304c\u3042\u308a\u3001`(%{X-Forwarded-For}i)` \u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\n\n```\n#/etc/httpd/conf/httpd.conf\n\n#### AWS Settings ####\n\n(\u7565)\n\n# Add remote IP to log\nLogFormat \"%h (%{X-Forwarded-For}i) %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n\n#### End of AWS Settings ####\n```\n\n", "tags": ["ElasticBeanstalk", "fluentd", "Apache"]}