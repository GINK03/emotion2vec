{"context": " More than 1 year has passed since last update.google/nodejs-runtime\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u3066\u4f5c\u6210\u3057\u305fNode-RED\u306eDocker\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u30ed\u30b0\u3092\u898b\u308b\u3068build\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3057\u305f\u3002node-icu-charset-detector\u30e2\u30b8\u30e5\u30fc\u30eb\u306enode-gyp rebuild\u306b\u5931\u6557\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u307e\u307e\u3067\u3082\u52d5\u4f5c\u306f\u3057\u3066\u3044\u307e\u3059\u304c\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u3088\u3046\u306bDocker\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u308a\u76f4\u3057\u307e\u3059\u3002\n\ndocker build\u306e\u30a8\u30e9\u30fc\nnode-gyp\u3092\u4f7f\u3063\u305f\u30cd\u30a4\u30c6\u30a3\u30d6\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d3\u30eb\u30c9\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3044\u307e\u3057\u305f\u3002\n$ docker build -t node-red .\n...\n> node-icu-charset-detector@0.0.7 install /app/node_modules/irc/node_modules/node-icu-charset-detector\n> node-gyp rebuild\n\nmake: Entering directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\n  CXX(target) Release/obj.target/node-icu-charset-detector/node-icu-charset-detector.o\n../node-icu-charset-detector.cpp:5:28: fatal error: unicode/ucsdet.h: No such file or directory\ncompilation terminated.\nmake: *** [Release/obj.target/node-icu-charset-detector/node-icu-charset-detector.o] Error 1\nmake: Leaving directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\ngyp ERR! build error\ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/nodejs/lib/node_modules/npm/node_modules/node-gyp/lib/bu\nild.js:267:23)\ngyp ERR! stack     at ChildProcess.emit (events.js:98:17)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:810:12)\ngyp ERR! System Linux 3.13.0-39-generic\ngyp ERR! command \"node\" \"/nodejs/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\ngyp ERR! cwd /app/node_modules/irc/node_modules/node-icu-charset-detector\ngyp ERR! node -v v0.10.33\ngyp ERR! node-gyp -v v1.0.1\ngyp ERR! not ok\nnpm WARN optional dep failed, continuing node-icu-charset-detector@0.0.7\n\nnode-icu-charset-detector\u306e\u30d3\u30eb\u30c9\u3067unicode/ucsdet.h\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n../node-icu-charset-detector.cpp:5:28: fatal error: unicode/ucsdet.h: No such file or directory\n\n\napt-file\u3092\u4f7f\u3063\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u691c\u7d22\napt-file\u30b3\u30de\u30f3\u30c9\u3067unicode/ucsdet.h\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\u5fc5\u8981\u306a\u30d8\u30c3\u30c0\u306flibicu-dev\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u826f\u3044\u307f\u305f\u3044\u3067\u3059\u3002\n$ sudo apt-get update\n$ sudo apt-get install apt-file\n$ sudo apt-file update\n$ apt-file search unicode/ucsdet.h\nlibicu-dev: /usr/include/x86_64-linux-gnu/unicode/ucsdet.h\n\n\ngoogle/nodejs-runtime\n\u73fe\u5728\u306eDockerfile\u306fgoogle/nodejs-runtime\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u6307\u5b9a\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n$ echo FROM google/nodejs-runtime > Dockerfile\n\nlibicu-dev\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3044\u306e\u3067\u3059\u304cONBUILD\u3067npm install\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u6d3e\u751f\u3055\u305b\u305fDockerfile\u3067\u306fnpm install\u306e\u5b9f\u884c\u5f8c\u306b\u306a\u3063\u3066\u3057\u307e\u3044node-gyp rebuild\u306b\u9593\u306b\u5408\u3044\u307e\u305b\u3093\u3002\n\nDockerfile\nFROM google/nodejs\n\nWORKDIR /app\nONBUILD ADD package.json /app/\nONBUILD RUN npm install\nONBUILD ADD . /app\n\nEXPOSE 8080\nCMD []\nENTRYPOINT [\"/nodejs/bin/npm\", \"start\"]\n\n\ngoogle/nodejs\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u3066Dockerfile\u3092\u4f5c\u308a\u76f4\u3059\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\ndocker build\u306e\u3084\u308a\u76f4\u3057\nNode-RED\u3092git clone\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n$ cd ~/docker_apps/nod-red\n\nsettings.js\u3092\u7de8\u96c6\u3057\u3066\u3001\u8ffd\u52a0\u306enode\u7528\u306bjs\u3068html\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\njs ~/docker_apps/nod-red/settings.js\n...\nnodesDir: '/data/nodes',\n...\n\nnodesDir\u306b\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u6642\u306bDocker\u30db\u30b9\u30c8\u306e/opt/nodes\u306b\u30de\u30c3\u30d7\u3057\u307e\u3059\u3002\n$ mkdir -p /opt/nodes\n\n\u30d3\u30eb\u30c9\u306e\u30c6\u30b9\u30c8\u7528\u306bres.js\u306b-v\u30d5\u30e9\u30b0\u3092\u8ffd\u52a0\u3057\u3066\u30c7\u30d0\u30c3\u30b0\u3057\u307e\u3059\u3002\n\n~/docker_apps/nod-red/package.js\n...\n    \"scripts\"      : {\n        \"start\": \"node red.js -v\",\n        \"test\": \"./node_modules/.bin/grunt\"\n    },\n...\n\n\n\ngoogle/nodejs\ngoogle/nodejs\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u305fDockerfile\u3067\u3059\u3002\n\n~/docker_apps/nod-red/Dockerfile\nFROM google/nodejs\n\nRUN apt-get update && \\\n  apt-get install -y libicu-dev\n\nWORKDIR /app\nADD package.json /app/\nRUN npm install\nADD . /app\n\nEXPOSE 1880\nCMD []\nENTRYPOINT [\"/nodejs/bin/npm\", \"start\"]\n\nRUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n\nDocker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\u4eca\u5ea6\u306fnode-icu-charset-detector\u306enode-gyp rebuild\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n$ cd docker_apps/nod-red\n$ docker build -t node-red .\n...\n> node-icu-charset-detector@0.0.7 install /app/node_modules/irc/node_modules/node-icu-charset-detect\nor\n> node-gyp rebuild\n\nmake: Entering directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\n  CXX(target) Release/obj.target/node-icu-charset-detector/node-icu-charset-detector.o\n  SOLINK_MODULE(target) Release/obj.target/node-icu-charset-detector.node\n  SOLINK_MODULE(target) Release/obj.target/node-icu-charset-detector.node: Finished\n  COPY Release/node-icu-charset-detector.node\nmake: Leaving directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\n...\nirc@0.3.9 node_modules/irc\n\u251c\u2500\u2500 ansi-color@0.2.1\n\u251c\u2500\u2500 irc-colors@1.1.0 (hashish@0.0.4)\n\u251c\u2500\u2500 node-icu-charset-detector@0.0.7\n\u2514\u2500\u2500 iconv@2.1.5 (nan@1.4.3)\n...\n\n\u30c6\u30b9\u30c8\u7528\u306b\u4f7f\u3044\u6368\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u30c7\u30d0\u30c3\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ docker run --rm \\\n  --name node-red \\\n  -p 1880:1880 \\\n  -v /opt/nodes:/data/nodes \\\n  node-red \n> node-red@0.9.1 start /app\n> node red.js -v\n\n\nWelcome to Node-RED\n===================\n\n13 Feb 09:04:53 - [info] Version: 0.9.1.git\n13 Feb 09:04:53 - [info] Loading palette nodes\n13 Feb 09:04:54 - [warn] ------------------------------------------\n13 Feb 09:04:54 - [warn] [arduino] Error: Cannot find module 'arduino-firmata'\n13 Feb 09:04:54 - [warn] [rpi-gpio] Info : Ignoring Raspberry Pi specific node.\n13 Feb 09:04:54 - [warn] [redisout] Error: Cannot find module 'redis'\n13 Feb 09:04:54 - [warn] [mongodb] Error: Cannot find module 'mongodb'\n13 Feb 09:04:54 - [warn] ------------------------------------------\n13 Feb 09:04:54 - [info] Server now running at http://127.0.0.1:1880/\n13 Feb 09:04:54 - [info] Flows file not found : flows_e816455bc0d9.json\n13 Feb 09:04:54 - [info] Starting flows\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\nhttp://10.1.3.67:1880\n[google/nodejs-runtime](https://registry.hub.docker.com/u/google/nodejs-runtime/)\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u3066\u4f5c\u6210\u3057\u305fNode-RED\u306eDocker\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u30ed\u30b0\u3092\u898b\u308b\u3068build\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3057\u305f\u3002node-icu-charset-detector\u30e2\u30b8\u30e5\u30fc\u30eb\u306e`node-gyp rebuild`\u306b\u5931\u6557\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u307e\u307e\u3067\u3082\u52d5\u4f5c\u306f\u3057\u3066\u3044\u307e\u3059\u304c\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u3088\u3046\u306bDocker\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u308a\u76f4\u3057\u307e\u3059\u3002\n\n## docker build\u306e\u30a8\u30e9\u30fc\n\nnode-gyp\u3092\u4f7f\u3063\u305f\u30cd\u30a4\u30c6\u30a3\u30d6\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d3\u30eb\u30c9\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3044\u307e\u3057\u305f\u3002\n\n``` bash\n$ docker build -t node-red .\n...\n> node-icu-charset-detector@0.0.7 install /app/node_modules/irc/node_modules/node-icu-charset-detector\n> node-gyp rebuild\n\nmake: Entering directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\n  CXX(target) Release/obj.target/node-icu-charset-detector/node-icu-charset-detector.o\n../node-icu-charset-detector.cpp:5:28: fatal error: unicode/ucsdet.h: No such file or directory\ncompilation terminated.\nmake: *** [Release/obj.target/node-icu-charset-detector/node-icu-charset-detector.o] Error 1\nmake: Leaving directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\ngyp ERR! build error\ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/nodejs/lib/node_modules/npm/node_modules/node-gyp/lib/bu\nild.js:267:23)\ngyp ERR! stack     at ChildProcess.emit (events.js:98:17)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:810:12)\ngyp ERR! System Linux 3.13.0-39-generic\ngyp ERR! command \"node\" \"/nodejs/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\ngyp ERR! cwd /app/node_modules/irc/node_modules/node-icu-charset-detector\ngyp ERR! node -v v0.10.33\ngyp ERR! node-gyp -v v1.0.1\ngyp ERR! not ok\nnpm WARN optional dep failed, continuing node-icu-charset-detector@0.0.7\n```\n\nnode-icu-charset-detector\u306e\u30d3\u30eb\u30c9\u3067`unicode/ucsdet.h`\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n``` bash\n../node-icu-charset-detector.cpp:5:28: fatal error: unicode/ucsdet.h: No such file or directory\n```\n\n### apt-file\u3092\u4f7f\u3063\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u691c\u7d22\n\napt-file\u30b3\u30de\u30f3\u30c9\u3067unicode/ucsdet.h\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\u5fc5\u8981\u306a\u30d8\u30c3\u30c0\u306f`libicu-dev`\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u826f\u3044\u307f\u305f\u3044\u3067\u3059\u3002\n \n``` bash\n$ sudo apt-get update\n$ sudo apt-get install apt-file\n$ sudo apt-file update\n$ apt-file search unicode/ucsdet.h\nlibicu-dev: /usr/include/x86_64-linux-gnu/unicode/ucsdet.h\n```\n\n### google/nodejs-runtime\n\n\u73fe\u5728\u306eDockerfile\u306f[google/nodejs-runtime](https://registry.hub.docker.com/u/google/nodejs-runtime/)\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u6307\u5b9a\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\n``` bash\n$ echo FROM google/nodejs-runtime > Dockerfile\n```\n\n`libicu-dev`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3044\u306e\u3067\u3059\u304cONBUILD\u3067`npm install`\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u6d3e\u751f\u3055\u305b\u305fDockerfile\u3067\u306f`npm install`\u306e\u5b9f\u884c\u5f8c\u306b\u306a\u3063\u3066\u3057\u307e\u3044`node-gyp rebuild`\u306b\u9593\u306b\u5408\u3044\u307e\u305b\u3093\u3002\n\n``` bash:Dockerfile\nFROM google/nodejs\n\nWORKDIR /app\nONBUILD ADD package.json /app/\nONBUILD RUN npm install\nONBUILD ADD . /app\n\nEXPOSE 8080\nCMD []\nENTRYPOINT [\"/nodejs/bin/npm\", \"start\"]\n```\n\n[google/nodejs](https://registry.hub.docker.com/u/google/nodejs/)\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u3066Dockerfile\u3092\u4f5c\u308a\u76f4\u3059\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n## docker build\u306e\u3084\u308a\u76f4\u3057\n\nNode-RED\u3092git clone\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n``` bash\n$ cd ~/docker_apps/nod-red\n```\n\nsettings.js\u3092\u7de8\u96c6\u3057\u3066\u3001\u8ffd\u52a0\u306enode\u7528\u306bjs\u3068html\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n``` js ~/docker_apps/nod-red/settings.js\n...\nnodesDir: '/data/nodes',\n...\n```\n\nnodesDir\u306b\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u6642\u306bDocker\u30db\u30b9\u30c8\u306e`/opt/nodes`\u306b\u30de\u30c3\u30d7\u3057\u307e\u3059\u3002\n\n``` bash\n$ mkdir -p /opt/nodes\n```\n\n\u30d3\u30eb\u30c9\u306e\u30c6\u30b9\u30c8\u7528\u306bres.js\u306b-v\u30d5\u30e9\u30b0\u3092\u8ffd\u52a0\u3057\u3066\u30c7\u30d0\u30c3\u30b0\u3057\u307e\u3059\u3002\n\n``` js:~/docker_apps/nod-red/package.js\n...\n    \"scripts\"      : {\n        \"start\": \"node red.js -v\",\n        \"test\": \"./node_modules/.bin/grunt\"\n    },\n...\n```\n\n### google/nodejs\n\n[google/nodejs](https://registry.hub.docker.com/u/google/nodejs/)\u3092base\u30a4\u30e1\u30fc\u30b8\u306b\u3057\u305fDockerfile\u3067\u3059\u3002\n\n``` bash:~/docker_apps/nod-red/Dockerfile\nFROM google/nodejs\n\nRUN apt-get update && \\\n  apt-get install -y libicu-dev\n\nWORKDIR /app\nADD package.json /app/\nRUN npm install\nADD . /app\n\nEXPOSE 1880\nCMD []\nENTRYPOINT [\"/nodejs/bin/npm\", \"start\"]\n\nRUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n```\n\nDocker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\u4eca\u5ea6\u306fnode-icu-charset-detector\u306e`node-gyp rebuild`\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n``` bash\n$ cd docker_apps/nod-red\n$ docker build -t node-red .\n...\n> node-icu-charset-detector@0.0.7 install /app/node_modules/irc/node_modules/node-icu-charset-detect\nor\n> node-gyp rebuild\n\nmake: Entering directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\n  CXX(target) Release/obj.target/node-icu-charset-detector/node-icu-charset-detector.o\n  SOLINK_MODULE(target) Release/obj.target/node-icu-charset-detector.node\n  SOLINK_MODULE(target) Release/obj.target/node-icu-charset-detector.node: Finished\n  COPY Release/node-icu-charset-detector.node\nmake: Leaving directory `/app/node_modules/irc/node_modules/node-icu-charset-detector/build'\n...\nirc@0.3.9 node_modules/irc\n\u251c\u2500\u2500 ansi-color@0.2.1\n\u251c\u2500\u2500 irc-colors@1.1.0 (hashish@0.0.4)\n\u251c\u2500\u2500 node-icu-charset-detector@0.0.7\n\u2514\u2500\u2500 iconv@2.1.5 (nan@1.4.3)\n...\n```\n\n\u30c6\u30b9\u30c8\u7528\u306b\u4f7f\u3044\u6368\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u30c7\u30d0\u30c3\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n``` bash\n$ docker run --rm \\\n  --name node-red \\\n  -p 1880:1880 \\\n  -v /opt/nodes:/data/nodes \\\n  node-red \n> node-red@0.9.1 start /app\n> node red.js -v\n\n\nWelcome to Node-RED\n===================\n\n13 Feb 09:04:53 - [info] Version: 0.9.1.git\n13 Feb 09:04:53 - [info] Loading palette nodes\n13 Feb 09:04:54 - [warn] ------------------------------------------\n13 Feb 09:04:54 - [warn] [arduino] Error: Cannot find module 'arduino-firmata'\n13 Feb 09:04:54 - [warn] [rpi-gpio] Info : Ignoring Raspberry Pi specific node.\n13 Feb 09:04:54 - [warn] [redisout] Error: Cannot find module 'redis'\n13 Feb 09:04:54 - [warn] [mongodb] Error: Cannot find module 'mongodb'\n13 Feb 09:04:54 - [warn] ------------------------------------------\n13 Feb 09:04:54 - [info] Server now running at http://127.0.0.1:1880/\n13 Feb 09:04:54 - [info] Flows file not found : flows_e816455bc0d9.json\n13 Feb 09:04:54 - [info] Starting flows\n```\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n\nhttp://10.1.3.67:1880\n", "tags": ["node-red0.9.1", "docker1.4.1", "Node.js0.10.33", "IoT"]}