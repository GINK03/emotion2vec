{"tags": ["vSphere", "CentOS", "\u4eee\u60f3\u5316", "iperf", "Linux"], "context": " More than 1 year has passed since last update.\n\nVMXNET3 & E1000\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\nVMware Tools\u306eyum install\u3092\u8a66\u3059\u95a2\u9023\u3067\u3082\u3046\u3061\u3087\u3063\u3068\u7a81\u3063\u8fbc\u3093\u3067\u8003\u3048\u3066\u307f\u305f\u3002\nvmxnet3\u3068e1000\u3067\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u53d6\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3002\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u6e96\u5099\nCentOS6.6 \u3067vmxnet3\u3068e1000\u306e\u30de\u30b7\u30f3\u3092\u305d\u308c\u305e\u308c\u6e96\u5099\u3002\n\u5c1a\u3001Linux\uff08CentOS6.6\u73fe\u5728\uff09\u306b\u95a2\u3057\u3066\u306f\u3001kernel\u306bvmxnet3\u306e\u30c9\u30e9\u30a4\u30d0\u304c\u3059\u3067\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u72b6\u614b\u3002\n\u305d\u306e\u305f\u3081\u3001\u3068\u308a\u3042\u3048\u305avmxnet3\u3092\u5229\u7528\u3057\u305f\u3044\u3068\u3044\u3046\u3060\u3051\u3067\u3042\u308c\u3070\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u4f5c\u6210\u6642\u306bNIC\u3067vmxnet3\u3092\u9078\u629e\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30ed\u30fc\u30c9\u3055\u308c\u308b\u3002\n$ modinfo vmxnet3\nfilename:       /lib/modules/2.6.32-504.16.2.el6.x86_64/kernel/drivers/net/vmxnet3/vmxnet3.ko\nversion:        1.1.30.0-k\nlicense:        GPL v2\ndescription:    VMware vmxnet3 virtual NIC driver\nauthor:         VMware, Inc.\nsrcversion:     502C6D11BE2EF75FC4A1B5F\nalias:          pci:v000015ADd000007B0sv*sd*bc*sc*i*\ndepends:\nvermagic:       2.6.32-504.16.2.el6.x86_64 SMP mod_unload modversions\n\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u53d6\u5f97\n\u4eca\u56de\u306fiperf3\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u9762\u5012\u306a\u306e\u3067\u3001EPEL\u304b\u3089\u914d\u5e03\u3055\u308c\u3066\u3044\u308bRPM\u3092\u5229\u7528\u3059\u308b\u3002\nhttp://dl.fedoraproject.org/pub/epel/6/x86_64/repoview/iperf3.html\n\nEPEL\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u5c0e\u5165\n\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b\u3002\nCentOS\u306e\u5834\u5408\u3001Extras\u30d1\u30c3\u30b1\u30fc\u30b8\u304b\u3089\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n$ yum list | grep epel-release.noarch\nepel-release.noarch                         6-8                         extras\n\n$ sudo yum install -y epel-release.noarch\n\n\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\u307e\u305f\u3001\u4eca\u56de\u306f\u3042\u304f\u307e\u3067iperf3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u3060\u3051\u306b\u5c0e\u5165\u3059\u308b\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 \"enabled = 0\uff08\u7121\u52b9\uff09\" \u306b\u3057\u3066\u304a\u304f\u3002 \n[epel]\nname=Extra Packages for Enterprise Linux 6 - $basearch\n#baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\n\n[epel-debuginfo]\nname=Extra Packages for Enterprise Linux 6 - $basearch - Debug\n#baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch/debug\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-6&arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\ngpgcheck=1\n\n[epel-source]\nname=Extra Packages for Enterprise Linux 6 - $basearch - Source\n#baseurl=http://download.fedoraproject.org/pub/epel/6/SRPMS\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-6&arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\ngpgcheck=1\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u691c\u7d22\n\"enabled = 0\" \u306b\u3057\u3066\u3044\u308b\u30ec\u30dd\u30b8\u30c8\u30ea\u306f '--enablerepo' \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3068\u4e00\u6642\u7684\u306b\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n$ yum list --enablerepo=epel | grep -i iperf3\niperf3.i686                                3.0.10-1.el6                 epel\niperf3.x86_64                              3.0.10-1.el6                 epel\niperf3-devel.i686                          3.0.10-1.el6                 epel\niperf3-devel.x86_64                        3.0.10-1.el6                 epel\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install --enablerepo=epel iperf3\n\n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u69cb\u6210\nvmxnet3\u3068e1000\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u53ca\u3073\u7570\u306a\u308b\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3042\u308b\u30b5\u30fc\u30d0\u30fc\u306b\u305d\u308c\u305e\u308ciperf3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7570\u306a\u308b\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3055\u305b\u308b\u3002\n\u203b\u56f3\u4e2d\u306eIP\u30a2\u30c9\u30ec\u30b9\u306f\u30c0\u30df\u30fc\u30a2\u30c9\u30ec\u30b9\u3002\n\nVM\uff08vmxnet3/CentOS6.6\uff09\u3000iperf Client\u30e2\u30fc\u30c9\n\nVM\uff08e1000/CentOS6.6\uff09\u3000\u3000iperf Client\u30e2\u30fc\u30c9\n\n\u30b5\u30fc\u30d0\u30fc\uff08\u4eca\u56de\u306fAmazon EC2\u3092\u4f7f\u7528\uff09\u3000iperf Server\u30e2\u30fc\u30c9\n\n\n\n\niperf3\u306e\u4f7f\u3044\u65b9\niperf2\u306e\u5f8c\u65b9\u4e92\u63db\u6027\u306f\u306a\u3044\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3002\n\u3064\u307e\u308aiperf2\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30de\u30b7\u30f3\u3068iperf3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30de\u30b7\u30f3\u9593\u306e\u76f8\u4e92\u901a\u4fe1\u306e\u30c6\u30b9\u30c8\u304c\u51fa\u6765\u306a\u3044\u3002iperf\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u7d71\u4e00\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u306fiperf2\u30823\u3082\u540c\u3058\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u5dee\u7570\u6709\u308a\uff09\nhttp://www.unix-power.net/linux/iperf.html\nhttp://nextdeveloper.hatenablog.com/entry/2014/02/07/120719\n\n\u5b9f\u884c\u7d50\u679c\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306710\u79d2\u9593\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u30c6\u30b9\u30c8\u3002\n\uff08\u203biperf Server\u5074\u306b\u51fa\u529b\u3055\u308c\u305f\u30ec\u30dd\u30fc\u30c8\uff09 \n\nvm(E1000)\n$ iperf3 -s\n-----------------------------------------------------------\nServer listening on 5201\n-----------------------------------------------------------\nAccepted connection from vm_IPADDR(E1000), port 41993\n[  5] local 172.31.6.XX port 5201 connected to vm_IPADDR(E1000) port 41994\n[ ID] Interval           Transfer     Bandwidth\n[  5]   0.00-1.00   sec  20.9 MBytes   175 Mbits/sec\n[  5]   1.00-2.00   sec  14.9 MBytes   125 Mbits/sec\n[  5]   2.00-3.00   sec  12.4 MBytes   104 Mbits/sec\n[  5]   3.00-4.00   sec  13.6 MBytes   114 Mbits/sec\n[  5]   4.00-5.00   sec  14.3 MBytes   120 Mbits/sec\n[  5]   5.00-6.00   sec  12.6 MBytes   106 Mbits/sec\n[  5]   6.00-7.00   sec  14.5 MBytes   122 Mbits/sec\n[  5]   7.00-8.00   sec  12.0 MBytes   101 Mbits/sec\n[  5]   8.00-9.00   sec  9.32 MBytes  78.2 Mbits/sec\n[  5]   9.00-10.00  sec  10.7 MBytes  89.6 Mbits/sec\n[  5]  10.00-10.03  sec   239 KBytes  72.8 Mbits/sec\n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  5]   0.00-10.03  sec   138 MBytes   116 Mbits/sec   64             sender\n[  5]   0.00-10.03  sec   136 MBytes   113 Mbits/sec                  receiver\n\n\n\nvm(VMXNET3)\n$ iperf3 -s\n-----------------------------------------------------------\nServer listening on 5201\n-----------------------------------------------------------\nAccepted connection from vm_IPADDR(VMXNET3), port 52894\n[  5] local 172.31.6.XX port 5201 connected to vm_IPADDR(VMXNET3) port 52895\n[ ID] Interval           Transfer     Bandwidth\n[  5]   0.00-1.00   sec  27.6 MBytes   232 Mbits/sec\n[  5]   1.00-2.00   sec  15.3 MBytes   128 Mbits/sec\n[  5]   2.00-3.00   sec  16.4 MBytes   137 Mbits/sec\n[  5]   3.00-4.00   sec  14.8 MBytes   124 Mbits/sec\n[  5]   4.00-5.00   sec  15.4 MBytes   129 Mbits/sec\n[  5]   5.00-6.00   sec  15.3 MBytes   128 Mbits/sec\n[  5]   6.00-7.00   sec  13.6 MBytes   114 Mbits/sec\n[  5]   7.00-8.00   sec  15.1 MBytes   127 Mbits/sec\n[  5]   8.00-9.00   sec  16.6 MBytes   140 Mbits/sec\n[  5]   9.00-10.00  sec  10.7 MBytes  89.6 Mbits/sec\n[  5]  10.00-10.04  sec   426 KBytes  92.3 Mbits/sec\n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  5]   0.00-10.04  sec   165 MBytes   138 Mbits/sec   82             sender\n[  5]   0.00-10.04  sec   161 MBytes   135 Mbits/sec                  receiver\n\n\n\u3053\u306eAverage\u3060\u3068\u82e5\u5e72VMXNET3\u306e\u307b\u3046\u304c\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u51fa\u3066\u3044\u308b\u3088\u3046\u306b\u3082\u30fb\u30fb\u30fb\n1\u5206\u9593\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u305f\u7d50\u679c\u306f\u4e0b\u8a18\u3002\n\uff08\u203biperf Client\u5074\u306b\u51fa\u529b\u3055\u308c\u305f\u30ec\u30dd\u30fc\u30c8\uff09\n\nvm(E1000)\n$ iperf3 -c remoteServer_IPADDR -V -t 60 -i 10\niperf 3.0.10\nLinux vm-test3 2.6.32-504.16.2.el6.x86_64 #1 SMP Wed Apr 22 06:48:29 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\nTime: Fri, 01 May 2015 02:18:00 GMT\nConnecting to host remoteServer_IPADDR, port 5201\n      Cookie: vm-test3.1430446680.734558.68d0d84b1\n      TCP MSS: 1448 (default)\n[  4] local vm_IPADDR(E1000) port 42001 connected to remoteServer_IPADDR port 5201\nStarting Test: protocol: TCP, 1 streams, 131072 byte blocks, omitting 0 seconds, 60 second test\n[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd\n[  4]   0.00-10.00  sec   217 MBytes   182 Mbits/sec   54    170 KBytes\n[  4]  10.00-20.00  sec   181 MBytes   152 Mbits/sec   29    115 KBytes\n[  4]  20.00-30.00  sec   168 MBytes   141 Mbits/sec   30    122 KBytes\n[  4]  30.00-40.00  sec   181 MBytes   152 Mbits/sec   15    165 KBytes\n[  4]  40.00-50.00  sec   192 MBytes   161 Mbits/sec   31    134 KBytes\n[  4]  50.00-60.00  sec   132 MBytes   111 Mbits/sec   53    129 KBytes\n- - - - - - - - - - - - - - - - - - - - - - - - -\nTest Complete. Summary Results:\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  4]   0.00-60.00  sec  1.05 GBytes   150 Mbits/sec  212             sender\n[  4]   0.00-60.00  sec  1.04 GBytes   149 Mbits/sec                  receiver\nCPU Utilization: local/sender 1.0% (0.0%u/1.0%s), remote/receiver 3.5% (0.0%u/3.5%s)\n\niperf Done.\n\n\n\nvm(VMXNET3)\n$ iperf3 -c remoteServer_IPADDR-V -t 60 -i 10\niperf 3.0.10\nLinux vm-test4 2.6.32-504.16.2.el6.x86_64 #1 SMP Wed Apr 22 06:48:29 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\nTime: Fri, 01 May 2015 02:19:18 GMT\nConnecting to host remoteServer_IPADDR, port 5201\n      Cookie: vm-test4.1430446758.532814.39107b692\n      TCP MSS: 1448 (default)\n[  4] local vm_IPADDR(VMXNET3) port 52901 connected to remoteServer_IPADDR port 5201\nStarting Test: protocol: TCP, 1 streams, 131072 byte blocks, omitting 0 seconds, 60 second test\n[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd\n[  4]   0.00-10.00  sec   158 MBytes   132 Mbits/sec   46    189 KBytes\n[  4]  10.00-20.00  sec   158 MBytes   132 Mbits/sec   23    209 KBytes\n[  4]  20.00-30.00  sec   202 MBytes   170 Mbits/sec   22    238 KBytes\n[  4]  30.00-40.00  sec   204 MBytes   171 Mbits/sec   33    219 KBytes\n[  4]  40.00-50.00  sec   179 MBytes   150 Mbits/sec   10    197 KBytes\n[  4]  50.00-60.00  sec   196 MBytes   165 Mbits/sec   15    130 KBytes\n- - - - - - - - - - - - - - - - - - - - - - - - -\nTest Complete. Summary Results:\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  4]   0.00-60.00  sec  1.07 GBytes   153 Mbits/sec  149             sender\n[  4]   0.00-60.00  sec  1.07 GBytes   153 Mbits/sec                  receiver\nCPU Utilization: local/sender 0.5% (0.0%u/0.5%s), remote/receiver 3.1% (0.9%u/2.2%s)\n\niperf Done.\n\n\n1\u5206\u9593\u3067Average\u53d6\u308b\u3068\u305d\u3093\u306a\u306b\u5927\u5dee\u306a\u3044\u3002\n\u540c\u4e00\u30af\u30e9\u30b9\u30bf\u914d\u4e0b\u306eVM\u540c\u58eb\u3060\u3068\u554f\u984c\u306a\u3044\u3051\u3069\u3001External\u306e\u901a\u4fe1\u3060\u3068\u5b89\u5b9a\u3057\u306a\u3044\u306e\u304c\u6c17\u306b\u306a\u308b(*\u00b4\u2229\u03c9\uff65`)\uff9f+.\uff9f\n\n\u7d50\u679c\u3092\u3075\u307e\u3048\u3066\n\u901a\u4fe1\u7d4c\u8def\u4e0a\u3067\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u3063\u3066\u308b\u3068\u3053\u308d\u3042\u308b\u3060\u308d\u3046\u3057\u53b3\u5bc6\u306a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u6e2c\u5b9a\u306b\u306f\u306a\u3089\u306a\u3044\u304c\u3001\u6975\u7aef\u306a\u5dee\u306f\u306a\u3044\u306e\u3067\u597d\u307f\u306a\u3093\u3060\u308d\u3046\u306a\u3002\n\u3067\u3082kernel\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070vmxnet3\u3067\u826f\u3044\u6c17\u304c\u3059\u308b\u3002\n\u4eca\u56de\u306fCentOS6.X\u3067\u3057\u304b\u6bd4\u8f03\u3057\u3066\u306a\u3044\u306e\u3067\u3001Windows\u7cfb\u3060\u3068\u307e\u305f\u9055\u3046\u304b\u3082\u3002\n## VMXNET3 & E1000\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\n\n[VMware Tools\u306eyum install\u3092\u8a66\u3059](http://qiita.com/rocca0504/items/5398034845c91a01dc7c)\u95a2\u9023\u3067\u3082\u3046\u3061\u3087\u3063\u3068\u7a81\u3063\u8fbc\u3093\u3067\u8003\u3048\u3066\u307f\u305f\u3002\n\nvmxnet3\u3068e1000\u3067\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u53d6\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3002\n\n### \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u6e96\u5099\nCentOS6.6 \u3067vmxnet3\u3068e1000\u306e\u30de\u30b7\u30f3\u3092\u305d\u308c\u305e\u308c\u6e96\u5099\u3002\n\n\n\u5c1a\u3001Linux\uff08CentOS6.6\u73fe\u5728\uff09\u306b\u95a2\u3057\u3066\u306f\u3001kernel\u306bvmxnet3\u306e\u30c9\u30e9\u30a4\u30d0\u304c\u3059\u3067\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u72b6\u614b\u3002\n\u305d\u306e\u305f\u3081\u3001\u3068\u308a\u3042\u3048\u305avmxnet3\u3092\u5229\u7528\u3057\u305f\u3044\u3068\u3044\u3046\u3060\u3051\u3067\u3042\u308c\u3070\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u4f5c\u6210\u6642\u306bNIC\u3067vmxnet3\u3092\u9078\u629e\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30ed\u30fc\u30c9\u3055\u308c\u308b\u3002\n\n```sh\n$ modinfo vmxnet3\nfilename:       /lib/modules/2.6.32-504.16.2.el6.x86_64/kernel/drivers/net/vmxnet3/vmxnet3.ko\nversion:        1.1.30.0-k\nlicense:        GPL v2\ndescription:    VMware vmxnet3 virtual NIC driver\nauthor:         VMware, Inc.\nsrcversion:     502C6D11BE2EF75FC4A1B5F\nalias:          pci:v000015ADd000007B0sv*sd*bc*sc*i*\ndepends:\nvermagic:       2.6.32-504.16.2.el6.x86_64 SMP mod_unload modversions\n```\n\n### \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u53d6\u5f97\n\u4eca\u56de\u306fiperf3\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u9762\u5012\u306a\u306e\u3067\u3001EPEL\u304b\u3089\u914d\u5e03\u3055\u308c\u3066\u3044\u308bRPM\u3092\u5229\u7528\u3059\u308b\u3002\nhttp://dl.fedoraproject.org/pub/epel/6/x86_64/repoview/iperf3.html\n\n#### EPEL\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u5c0e\u5165\n\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b\u3002\nCentOS\u306e\u5834\u5408\u3001Extras\u30d1\u30c3\u30b1\u30fc\u30b8\u304b\u3089\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n\n```sh:\n$ yum list | grep epel-release.noarch\nepel-release.noarch                         6-8                         extras\n```\n```sh:\n$ sudo yum install -y epel-release.noarch\n```\n\n\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\u307e\u305f\u3001\u4eca\u56de\u306f\u3042\u304f\u307e\u3067iperf3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u3060\u3051\u306b\u5c0e\u5165\u3059\u308b\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 <b>\"enabled = 0\uff08\u7121\u52b9\uff09\"</b> \u306b\u3057\u3066\u304a\u304f\u3002 \n\n```sh:\n[epel]\nname=Extra Packages for Enterprise Linux 6 - $basearch\n#baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\n\n[epel-debuginfo]\nname=Extra Packages for Enterprise Linux 6 - $basearch - Debug\n#baseurl=http://download.fedoraproject.org/pub/epel/6/$basearch/debug\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-6&arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\ngpgcheck=1\n\n[epel-source]\nname=Extra Packages for Enterprise Linux 6 - $basearch - Source\n#baseurl=http://download.fedoraproject.org/pub/epel/6/SRPMS\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-6&arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\ngpgcheck=1\n```\n\n#### \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u691c\u7d22\n\"enabled = 0\" \u306b\u3057\u3066\u3044\u308b\u30ec\u30dd\u30b8\u30c8\u30ea\u306f '--enablerepo' \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3068\u4e00\u6642\u7684\u306b\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n\n```sh:\n$ yum list --enablerepo=epel | grep -i iperf3\niperf3.i686                                3.0.10-1.el6                 epel\niperf3.x86_64                              3.0.10-1.el6                 epel\niperf3-devel.i686                          3.0.10-1.el6                 epel\niperf3-devel.x86_64                        3.0.10-1.el6                 epel\n```\n\n#### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```sh:\n$ sudo yum install --enablerepo=epel iperf3\n```\n\n#### \u30d9\u30f3\u30c1\u30de\u30fc\u30af\u69cb\u6210\nvmxnet3\u3068e1000\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u53ca\u3073\u7570\u306a\u308b\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3042\u308b\u30b5\u30fc\u30d0\u30fc\u306b\u305d\u308c\u305e\u308ciperf3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7570\u306a\u308b\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3055\u305b\u308b\u3002\n\u203b\u56f3\u4e2d\u306eIP\u30a2\u30c9\u30ec\u30b9\u306f\u30c0\u30df\u30fc\u30a2\u30c9\u30ec\u30b9\u3002\n\n  * VM\uff08vmxnet3/CentOS6.6\uff09\u3000iperf <b><font color=\"red\">Client\u30e2\u30fc\u30c9</font></b>\n  * VM\uff08e1000/CentOS6.6\uff09\u3000\u3000iperf <b><font color=\"red\">Client\u30e2\u30fc\u30c9</font></b>\n  * \u30b5\u30fc\u30d0\u30fc\uff08\u4eca\u56de\u306fAmazon EC2\u3092\u4f7f\u7528\uff09\u3000iperf <b><font color=\"red\">Server\u30e2\u30fc\u30c9</font></b>\n \n![VM_iperf-NetworkDiagram20150501.png](https://qiita-image-store.s3.amazonaws.com/0/73604/b9bff575-be62-ecaf-a33d-004f34c1d7e2.png)\n\n\n#### iperf3\u306e\u4f7f\u3044\u65b9\niperf2\u306e\u5f8c\u65b9\u4e92\u63db\u6027\u306f\u306a\u3044\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3002\n\u3064\u307e\u308aiperf2\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30de\u30b7\u30f3\u3068iperf3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30de\u30b7\u30f3\u9593\u306e\u76f8\u4e92\u901a\u4fe1\u306e\u30c6\u30b9\u30c8\u304c\u51fa\u6765\u306a\u3044\u3002iperf\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u7d71\u4e00\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u306fiperf2\u30823\u3082\u540c\u3058\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u5dee\u7570\u6709\u308a\uff09\nhttp://www.unix-power.net/linux/iperf.html\nhttp://nextdeveloper.hatenablog.com/entry/2014/02/07/120719\n\n\n#### \u5b9f\u884c\u7d50\u679c\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306710\u79d2\u9593\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u30c6\u30b9\u30c8\u3002\n\n**\uff08\u203biperf Server\u5074\u306b\u51fa\u529b\u3055\u308c\u305f\u30ec\u30dd\u30fc\u30c8\uff09** \n\n```sh:vm(E1000)\n$ iperf3 -s\n-----------------------------------------------------------\nServer listening on 5201\n-----------------------------------------------------------\nAccepted connection from vm_IPADDR(E1000), port 41993\n[  5] local 172.31.6.XX port 5201 connected to vm_IPADDR(E1000) port 41994\n[ ID] Interval           Transfer     Bandwidth\n[  5]   0.00-1.00   sec  20.9 MBytes   175 Mbits/sec\n[  5]   1.00-2.00   sec  14.9 MBytes   125 Mbits/sec\n[  5]   2.00-3.00   sec  12.4 MBytes   104 Mbits/sec\n[  5]   3.00-4.00   sec  13.6 MBytes   114 Mbits/sec\n[  5]   4.00-5.00   sec  14.3 MBytes   120 Mbits/sec\n[  5]   5.00-6.00   sec  12.6 MBytes   106 Mbits/sec\n[  5]   6.00-7.00   sec  14.5 MBytes   122 Mbits/sec\n[  5]   7.00-8.00   sec  12.0 MBytes   101 Mbits/sec\n[  5]   8.00-9.00   sec  9.32 MBytes  78.2 Mbits/sec\n[  5]   9.00-10.00  sec  10.7 MBytes  89.6 Mbits/sec\n[  5]  10.00-10.03  sec   239 KBytes  72.8 Mbits/sec\n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  5]   0.00-10.03  sec   138 MBytes   116 Mbits/sec   64             sender\n[  5]   0.00-10.03  sec   136 MBytes   113 Mbits/sec                  receiver\n```\n\n```sh:vm(VMXNET3)\n$ iperf3 -s\n-----------------------------------------------------------\nServer listening on 5201\n-----------------------------------------------------------\nAccepted connection from vm_IPADDR(VMXNET3), port 52894\n[  5] local 172.31.6.XX port 5201 connected to vm_IPADDR(VMXNET3) port 52895\n[ ID] Interval           Transfer     Bandwidth\n[  5]   0.00-1.00   sec  27.6 MBytes   232 Mbits/sec\n[  5]   1.00-2.00   sec  15.3 MBytes   128 Mbits/sec\n[  5]   2.00-3.00   sec  16.4 MBytes   137 Mbits/sec\n[  5]   3.00-4.00   sec  14.8 MBytes   124 Mbits/sec\n[  5]   4.00-5.00   sec  15.4 MBytes   129 Mbits/sec\n[  5]   5.00-6.00   sec  15.3 MBytes   128 Mbits/sec\n[  5]   6.00-7.00   sec  13.6 MBytes   114 Mbits/sec\n[  5]   7.00-8.00   sec  15.1 MBytes   127 Mbits/sec\n[  5]   8.00-9.00   sec  16.6 MBytes   140 Mbits/sec\n[  5]   9.00-10.00  sec  10.7 MBytes  89.6 Mbits/sec\n[  5]  10.00-10.04  sec   426 KBytes  92.3 Mbits/sec\n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  5]   0.00-10.04  sec   165 MBytes   138 Mbits/sec   82             sender\n[  5]   0.00-10.04  sec   161 MBytes   135 Mbits/sec                  receiver\n```\n\u3053\u306eAverage\u3060\u3068\u82e5\u5e72VMXNET3\u306e\u307b\u3046\u304c\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u51fa\u3066\u3044\u308b\u3088\u3046\u306b\u3082\u30fb\u30fb\u30fb\n1\u5206\u9593\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u305f\u7d50\u679c\u306f\u4e0b\u8a18\u3002\n\n**\uff08\u203biperf Client\u5074\u306b\u51fa\u529b\u3055\u308c\u305f\u30ec\u30dd\u30fc\u30c8\uff09**\n\n```sh:vm(E1000)\n$ iperf3 -c remoteServer_IPADDR -V -t 60 -i 10\niperf 3.0.10\nLinux vm-test3 2.6.32-504.16.2.el6.x86_64 #1 SMP Wed Apr 22 06:48:29 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\nTime: Fri, 01 May 2015 02:18:00 GMT\nConnecting to host remoteServer_IPADDR, port 5201\n      Cookie: vm-test3.1430446680.734558.68d0d84b1\n      TCP MSS: 1448 (default)\n[  4] local vm_IPADDR(E1000) port 42001 connected to remoteServer_IPADDR port 5201\nStarting Test: protocol: TCP, 1 streams, 131072 byte blocks, omitting 0 seconds, 60 second test\n[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd\n[  4]   0.00-10.00  sec   217 MBytes   182 Mbits/sec   54    170 KBytes\n[  4]  10.00-20.00  sec   181 MBytes   152 Mbits/sec   29    115 KBytes\n[  4]  20.00-30.00  sec   168 MBytes   141 Mbits/sec   30    122 KBytes\n[  4]  30.00-40.00  sec   181 MBytes   152 Mbits/sec   15    165 KBytes\n[  4]  40.00-50.00  sec   192 MBytes   161 Mbits/sec   31    134 KBytes\n[  4]  50.00-60.00  sec   132 MBytes   111 Mbits/sec   53    129 KBytes\n- - - - - - - - - - - - - - - - - - - - - - - - -\nTest Complete. Summary Results:\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  4]   0.00-60.00  sec  1.05 GBytes   150 Mbits/sec  212             sender\n[  4]   0.00-60.00  sec  1.04 GBytes   149 Mbits/sec                  receiver\nCPU Utilization: local/sender 1.0% (0.0%u/1.0%s), remote/receiver 3.5% (0.0%u/3.5%s)\n\niperf Done.\n```\n\n```sh:vm(VMXNET3)\n$ iperf3 -c remoteServer_IPADDR-V -t 60 -i 10\niperf 3.0.10\nLinux vm-test4 2.6.32-504.16.2.el6.x86_64 #1 SMP Wed Apr 22 06:48:29 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\nTime: Fri, 01 May 2015 02:19:18 GMT\nConnecting to host remoteServer_IPADDR, port 5201\n      Cookie: vm-test4.1430446758.532814.39107b692\n      TCP MSS: 1448 (default)\n[  4] local vm_IPADDR(VMXNET3) port 52901 connected to remoteServer_IPADDR port 5201\nStarting Test: protocol: TCP, 1 streams, 131072 byte blocks, omitting 0 seconds, 60 second test\n[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd\n[  4]   0.00-10.00  sec   158 MBytes   132 Mbits/sec   46    189 KBytes\n[  4]  10.00-20.00  sec   158 MBytes   132 Mbits/sec   23    209 KBytes\n[  4]  20.00-30.00  sec   202 MBytes   170 Mbits/sec   22    238 KBytes\n[  4]  30.00-40.00  sec   204 MBytes   171 Mbits/sec   33    219 KBytes\n[  4]  40.00-50.00  sec   179 MBytes   150 Mbits/sec   10    197 KBytes\n[  4]  50.00-60.00  sec   196 MBytes   165 Mbits/sec   15    130 KBytes\n- - - - - - - - - - - - - - - - - - - - - - - - -\nTest Complete. Summary Results:\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  4]   0.00-60.00  sec  1.07 GBytes   153 Mbits/sec  149             sender\n[  4]   0.00-60.00  sec  1.07 GBytes   153 Mbits/sec                  receiver\nCPU Utilization: local/sender 0.5% (0.0%u/0.5%s), remote/receiver 3.1% (0.9%u/2.2%s)\n\niperf Done.\n```\n1\u5206\u9593\u3067Average\u53d6\u308b\u3068\u305d\u3093\u306a\u306b\u5927\u5dee\u306a\u3044\u3002\n\u540c\u4e00\u30af\u30e9\u30b9\u30bf\u914d\u4e0b\u306eVM\u540c\u58eb\u3060\u3068\u554f\u984c\u306a\u3044\u3051\u3069\u3001External\u306e\u901a\u4fe1\u3060\u3068\u5b89\u5b9a\u3057\u306a\u3044\u306e\u304c\u6c17\u306b\u306a\u308b(*\u00b4\u2229\u03c9\uff65`)\uff9f+.\uff9f\n\n\n### \u7d50\u679c\u3092\u3075\u307e\u3048\u3066\n\u901a\u4fe1\u7d4c\u8def\u4e0a\u3067\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u3063\u3066\u308b\u3068\u3053\u308d\u3042\u308b\u3060\u308d\u3046\u3057\u53b3\u5bc6\u306a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u6e2c\u5b9a\u306b\u306f\u306a\u3089\u306a\u3044\u304c\u3001\u6975\u7aef\u306a\u5dee\u306f\u306a\u3044\u306e\u3067\u597d\u307f\u306a\u3093\u3060\u308d\u3046\u306a\u3002\n\u3067\u3082kernel\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070vmxnet3\u3067\u826f\u3044\u6c17\u304c\u3059\u308b\u3002\n\u4eca\u56de\u306fCentOS6.X\u3067\u3057\u304b\u6bd4\u8f03\u3057\u3066\u306a\u3044\u306e\u3067\u3001Windows\u7cfb\u3060\u3068\u307e\u305f\u9055\u3046\u304b\u3082\u3002\n\n\n\n\n\n"}