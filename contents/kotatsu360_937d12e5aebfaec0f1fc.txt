{"context": " More than 1 year has passed since last update.fluentd\u3067\u3064\u304f\u308b\u76e3\u8996\u7cfb - Qiita\u306e\u7d9a\u304d\n\u3044\u3064\u3082\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u958b\u767a\u3070\u304b\u308a\u3067\u3001\u307e\u3058\u3081\u306b\u76e3\u8996\u7cfb\u3092\u8003\u3048\u305f\u3053\u3068\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\nfluentd\u3092\u4e2d\u5fc3\u306b\u3057\u305f\u76e3\u8996\u7cfb\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\n\u524d\u63d0\uff08\u5909\u66f4\u306a\u3057\uff09\n\n\u8907\u6570\u53f0\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\n\u4e00\u53f0\u306e\u30ed\u30b0\u53ce\u96c6\u30b5\u30fc\u30d0\n\u30ed\u30b0\u306b\u306f\u30a8\u30e9\u30fc\u30ed\u30b0\u3068\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u306e\u5927\u304d\u304f2\u7a2e\u985e\u3092\u7528\u610f\u3059\u308b\n\u30a8\u30e9\u30fc\u30ed\u30b0\u306f\u66f4\u306b\u8907\u6570\u306e\u30ec\u30d9\u30eb\u3067\u30d5\u30a1\u30a4\u30eb\u5358\u4f4d\u306b\u308f\u304b\u308c\u3066\u3044\u308b\n\n\nfatal\nerror\nwarn\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u3068\u30ed\u30b0\u53ce\u96c6\u30b5\u30fc\u30d0\u306f\u540c\u4e00\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306b\u3042\u308b\n\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\u30e1\u30fc\u30eb\u3067\u6765\u3066\u3082\u7d76\u5bfe\u306b\u6c17\u304c\u3064\u304b\u306a\u3044\u81ea\u4fe1\u304c\u3042\u308b\u3002\n\u7570\u5e38\u306e\u5074\u304b\u3089\u6559\u3048\u3066\u304f\u308c\u308b\u4ed5\u7d44\u307f\u3092\u76ee\u6307\u3059\u3002\n\nfatal\u30ed\u30b0\u304c\u51fa\u305f\u5834\u5408\u306f\u3001\u96fb\u8a71\u306b\u3088\u308b\u901a\u77e5\u3092\u884c\u3046\n\u5168\u3066\u306e\u30a8\u30e9\u30fc\u30ed\u30b0\u306fchat\u30c4\u30fc\u30eb\u306b\u51fa\u529b\u3059\u308b\n\u30ed\u30b0\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\u30ed\u30b0\u306e\u5206\u6790\u30fb\u53ef\u8996\u5316\n\n1,2,3\u306b\u3064\u3044\u3066\u306ffluentd\u3067\u3064\u304f\u308b\u76e3\u8996\u7cfb - Qiita\u306b\u307e\u3068\u3081\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u524d\u56de\u7a4d\u307f\u6b8b\u3057\u3066\u3044\u305f\u8ab2\u984c\u3092\u89e3\u6c7a\u3059\u308b\n\n\u4eca\u56de\u89e3\u6c7a\u3059\u308b\u3082\u306e\n\n\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3084Twilio\u3078\u4efb\u610f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6e21\u3059\n\u8a2d\u5b9a\u3092DRY\u306b\u3059\u308b\n\n\n\u8a18\u8ff0\u5909\u66f4\n\n\u30ed\u30b0\u306e\u9001\u4fe1\u5074\n\u7279\u306b\u4f55\u3082\u3057\u306a\u3044\n\n\u30ed\u30b0\u306e\u53d7\u4fe1\u5074\n$ /opt/td-agent/embedded/bin/fluentd --version\nfluentd 0.12.8\n# filter\u3092\u4f7f\u3046\u306e\u30670.12\u4ee5\u4e0a\u3067\u3042\u308b\u4e8b\u3092\u78ba\u8a8d\n\n/etc/td-agent/td-agent.conf\n<source>\n  type forward\n  port 24224\n</source>\n\n<filter app.{warn,error}>\n  type record_transformer\n  enable_ruby\n  <record>\n     hipchat_message \"${tag} status:${res[\\\"statusCode\\\"]}\\n${error}\"\n  </record>\n</filter>\n<filter app.fatal>\n  type record_transformer\n  enable_ruby\n  <record>\n    message \"fatal\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\" #twilio\u7528\n    hipchat_message \"@all ${tag} status:${res[\\\"statusCode\\\"]}\\n${error}\"\n  </record>\n</filter>\n\n<match app.*>\n  type forest\n  subtype copy\n  <template>\n    <store>\n      type s3\n      aws_key_id \"#{ENV['AWS_ACCESS_KEY_ID']}\"\n      aws_sec_key \"#{ENV['AWS_SECRET_KEY']}\"\n      s3_bucket <AWS S3 BUCKET NAME>\n      s3_region ap-northeast-1\n      path ${tag_parts[0]}/${tag_parts[1]}/ # app/access/, app/fatal/, app/error/, ...\n      buffer_path /var/log/td-agent/buffer/s3_${tag_parts[0]}_${tag_parts[1]}\n      time_slice_format %Y-%m-%d/%H\n      time_slice_wait 10m\n    </store>\n  </template>\n  <case app.{warn,error}>\n    <store>\n      type hipchat\n      api_token \"#{ENV['HIPCHAT_API_TOKEN']}\"\n      default_room <YOUR CHAT ROOM>\n      default_from fluentd\n      default_color yellow\n      default_notify 1\n      default_format text  # \u30e1\u30f3\u30b7\u30e7\u30f3\u3092\u542b\u3081\u305f\u3044\u5834\u5408\u306ftext\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002HipChat\u306eAPI\u4ed5\u69d8\n      default_timeout 3\n      key_name hipchat_message  # error\u304b\u3089\u5909\u66f4\n    </store>\n  </case>\n  <case app.fatal>\n    <store>\n      type hipchat\n      api_token \"#{ENV['HIPCHAT_API_TOKEN']}\"\n      default_room <YOUR CHAT ROOM>\n      default_from fluentd\n      default_color red         # \u30e1\u30c3\u30bb\u30fc\u30b8\u30ab\u30e9\u30fc\u3092\u5371\u967a\u305d\u3046\u306a\u8d64\u306b\u5909\u66f4\n      default_notify 1\n      default_format text\n      default_timeout 3\n      key_name hipchat_message\n    </store>\n    <store>\n     type twilio\n     account_sid    \"#{ENV['TWILIO_ACCOUNT_SID']}\"\n     auth_token     \"#{ENV['TWILIO_AUTH_TOKEN']}\"\n     from_number    +810000000000                # twilio\u3067\u53d6\u5f97\u3057\u305f\u756a\u53f7\n     default_number +811111111111, +812222222222 # \u96fb\u8a71\u3092\u53d7\u3051\u53d6\u308a\u305f\u3044\u756a\u53f7\n    </store>\n  </case>\n</match>\n\n<match fluent.**>\n  type stdout # fluentd\u81ea\u4f53\u306e\u30ed\u30b0\u306f/var/log/td-agent/td-agent.log\u3078\n</match>\n\n\nfilter, type record_transformer\n0.12\u4ee5\u964d\u3067\u8ffd\u52a0\u3055\u308c\u305ffilter\u3092\u4f7f\u3063\u3066hipchat\u7528\u30e1\u30c3\u30bb\u30fc\u30b8\u3068twilio\u7528\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8ffd\u52a0\u3057\u305f\u3002\n0.12\u3088\u308a\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5834\u5408\u306f\u3001fluent-plugin-record-reformer\u306a\u3069\u306eoutput_plugin\u3067\u64cd\u4f5c\u3059\u308b\u306e\u304c\u30bb\u30aa\u30ea\u30fc\u306a\u3088\u3046\u3002\napp.fatal\u304c\u3053\u3046\u3044\u3046\u30ed\u30b0\u306a\u3089\n{\"req\":{\"method\":\"GET\",\"url\":\"/\"},\"res\":{\"statusCode\":500}, \"error\":\"hogehoge\"}\n\n\u3053\u3046\u306a\u308b\u3002\n{\"req\":{\"method\":\"GET\",\"url\":\"/\"},\"res\":{\"statusCode\":500},\"error\":\"hogehoge\",\"message\":\"fatal\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\",\"hipchat_message\":\"@all app.fatal status:500\\nhogehoge\"}\n\n\u3061\u306a\u307f\u306b\u3001filter\u306f\u4e0a\u304b\u3089\u4f55\u56de\u3067\u3082\u30de\u30c3\u30c1\u3059\u308b\u3088\u3046\uff08match\u3084case\u306f\u5148\u52dd\u3061\uff09\u3002\n<filter app.fatal>\n</filter>\n<filter app.{warn,error,fatal}>\n</filter>\n\n# fatal\u306f\u4e21\u65b9\u306efilter\u3092\u901a\u308b\n\n\nenable_ruby\n${}\u306e\u4e2d\u3067ruby\u8a18\u6cd5\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u5165\u308c\u5b50\u306b\u306a\u3063\u3066\u3044\u308bJSON\u306e\u4e2d\u3092\u8aad\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u8a2d\u5b9a\u3002\n   \"${res[\\\"statusCode\\\"]}\" # => 500\n\n\n\u8a2d\u5b9a\u3092DRY\u306b\n\u57fa\u672c\u7684\u306b\u306f<match app.access>\u3092<match app.*>\u306b\u6df7\u305c\u305f\u3060\u3051\u3002\u5168\u30ed\u30b0\u304cS3\u306b\u5165\u308b\u3088\u3046\u306b\u3057\u3001\nwarn, error\u306e\u30ed\u30b0\u306fhipchat\u3078\u3001fatal\u306fhipchat+twilio\u3078\u6295\u3052\u308b\u3002\nfatal\u306e\u3068\u304d\u3060\u3051hipchat\u3078\u30dd\u30b9\u30c8\u3055\u308c\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u8272\u3092\u5909\u3048\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u307b\u3068\u3093\u3069\u540c\u3058\u5185\u5bb9\u3060\u3051\u30692\u56de\u66f8\u3044\u3066\u308b\u3002\u5168\u304f\u540c\u3058\u5185\u5bb9\u3067\u826f\u3044\u6642\u306f\u3001@include\u304c\u4fbf\u5229\u305d\u3046\u3002\n/etc/td-agent/hipchat.conf\n      type hipchat\n      api_token \"#{ENV['HIPCHAT_API_TOKEN']}\"\n      default_room \"#{ENV['HIPCHAT_ROOM']}\"\n      default_from fluentd\n      default_color yellow\n      default_notify 1\n      default_format text\n      default_timeout 3\n      key_name hipchat_message\n\n  <case app.{warn,error}>\n    <store>\n      @include ./hipchat.conf\n    </store>\n  </case>\n\n\u77ed\u3044\u3002\n\n\u305d\u306e\u4ed6\n\nfluentd\u81ea\u4f53\u306e\u30ed\u30b0\u3082\u3068\u308a\u3042\u3048\u305atd-agent.log\u306b\u653e\u308a\u8fbc\u3093\u3067\u304a\u304f\u3002\uff08<match fluent.**>\uff09\n\n\n\u307e\u3068\u3081\n\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3084twilio\u306b\u4efb\u610f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30dd\u30b9\u30c8\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n\u91cd\u8907\u3059\u308b\u8a18\u8ff0\u3092\u53ef\u80fd\u306a\u9650\u308a\u6392\u9664\u3057\u305f\u3002\n\n\u53c2\u8003\nFilter Plugin Overview | Fluentd\nFluentd v0.12\u306e\u76ee\u7389\u6a5f\u80fd\u3089\u3057\u3044Filter\u3092\u8a66\u3057\u3066\u307f\u305f - Qiita\nConfiguration File | Fluentd\n[fluentd\u3067\u3064\u304f\u308b\u76e3\u8996\u7cfb - Qiita](http://qiita.com/kotatsu360/items/2985056d5af72c6eb5c2)\u306e\u7d9a\u304d\n\n\u3044\u3064\u3082\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u958b\u767a\u3070\u304b\u308a\u3067\u3001\u307e\u3058\u3081\u306b\u76e3\u8996\u7cfb\u3092\u8003\u3048\u305f\u3053\u3068\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\nfluentd\u3092\u4e2d\u5fc3\u306b\u3057\u305f\u76e3\u8996\u7cfb\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\n# \u524d\u63d0\uff08\u5909\u66f4\u306a\u3057\uff09\n\n1. \u8907\u6570\u53f0\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\n1. \u4e00\u53f0\u306e\u30ed\u30b0\u53ce\u96c6\u30b5\u30fc\u30d0\n1. \u30ed\u30b0\u306b\u306f\u30a8\u30e9\u30fc\u30ed\u30b0\u3068\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u306e\u5927\u304d\u304f2\u7a2e\u985e\u3092\u7528\u610f\u3059\u308b\n1. \u30a8\u30e9\u30fc\u30ed\u30b0\u306f\u66f4\u306b\u8907\u6570\u306e\u30ec\u30d9\u30eb\u3067\u30d5\u30a1\u30a4\u30eb\u5358\u4f4d\u306b\u308f\u304b\u308c\u3066\u3044\u308b\n   1. fatal\n   1. error\n   1. warn\n1. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u3068\u30ed\u30b0\u53ce\u96c6\u30b5\u30fc\u30d0\u306f\u540c\u4e00\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306b\u3042\u308b\n\n# \u3084\u308a\u305f\u3044\u3053\u3068\n\n\u30e1\u30fc\u30eb\u3067\u6765\u3066\u3082\u7d76\u5bfe\u306b\u6c17\u304c\u3064\u304b\u306a\u3044\u81ea\u4fe1\u304c\u3042\u308b\u3002\n\u7570\u5e38\u306e\u5074\u304b\u3089\u6559\u3048\u3066\u304f\u308c\u308b\u4ed5\u7d44\u307f\u3092\u76ee\u6307\u3059\u3002\n\n1. fatal\u30ed\u30b0\u304c\u51fa\u305f\u5834\u5408\u306f\u3001\u96fb\u8a71\u306b\u3088\u308b\u901a\u77e5\u3092\u884c\u3046\n1. \u5168\u3066\u306e\u30a8\u30e9\u30fc\u30ed\u30b0\u306fchat\u30c4\u30fc\u30eb\u306b\u51fa\u529b\u3059\u308b\n1. \u30ed\u30b0\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n1. \u30ed\u30b0\u306e\u5206\u6790\u30fb\u53ef\u8996\u5316\n\n1,2,3\u306b\u3064\u3044\u3066\u306f[fluentd\u3067\u3064\u304f\u308b\u76e3\u8996\u7cfb - Qiita](http://qiita.com/kotatsu360/items/2985056d5af72c6eb5c2)\u306b\u307e\u3068\u3081\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u524d\u56de\u7a4d\u307f\u6b8b\u3057\u3066\u3044\u305f\u8ab2\u984c\u3092\u89e3\u6c7a\u3059\u308b\n\n# \u4eca\u56de\u89e3\u6c7a\u3059\u308b\u3082\u306e\n\n1. \u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3084Twilio\u3078\u4efb\u610f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6e21\u3059\n1. \u8a2d\u5b9a\u3092DRY\u306b\u3059\u308b\n\n# \u8a18\u8ff0\u5909\u66f4\n\n## \u30ed\u30b0\u306e\u9001\u4fe1\u5074\n\u7279\u306b\u4f55\u3082\u3057\u306a\u3044\n\n## \u30ed\u30b0\u306e\u53d7\u4fe1\u5074\n\n```bash\n$ /opt/td-agent/embedded/bin/fluentd --version\nfluentd 0.12.8\n# filter\u3092\u4f7f\u3046\u306e\u30670.12\u4ee5\u4e0a\u3067\u3042\u308b\u4e8b\u3092\u78ba\u8a8d\n```\n\n/etc/td-agent/td-agent.conf\n\n```apache\n<source>\n  type forward\n  port 24224\n</source>\n\n<filter app.{warn,error}>\n  type record_transformer\n  enable_ruby\n  <record>\n     hipchat_message \"${tag} status:${res[\\\"statusCode\\\"]}\\n${error}\"\n  </record>\n</filter>\n<filter app.fatal>\n  type record_transformer\n  enable_ruby\n  <record>\n    message \"fatal\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\" #twilio\u7528\n    hipchat_message \"@all ${tag} status:${res[\\\"statusCode\\\"]}\\n${error}\"\n  </record>\n</filter>\n\n<match app.*>\n  type forest\n  subtype copy\n  <template>\n    <store>\n      type s3\n      aws_key_id \"#{ENV['AWS_ACCESS_KEY_ID']}\"\n      aws_sec_key \"#{ENV['AWS_SECRET_KEY']}\"\n      s3_bucket <AWS S3 BUCKET NAME>\n      s3_region ap-northeast-1\n      path ${tag_parts[0]}/${tag_parts[1]}/ # app/access/, app/fatal/, app/error/, ...\n      buffer_path /var/log/td-agent/buffer/s3_${tag_parts[0]}_${tag_parts[1]}\n      time_slice_format %Y-%m-%d/%H\n      time_slice_wait 10m\n    </store>\n  </template>\n  <case app.{warn,error}>\n    <store>\n      type hipchat\n      api_token \"#{ENV['HIPCHAT_API_TOKEN']}\"\n      default_room <YOUR CHAT ROOM>\n      default_from fluentd\n      default_color yellow\n      default_notify 1\n      default_format text  # \u30e1\u30f3\u30b7\u30e7\u30f3\u3092\u542b\u3081\u305f\u3044\u5834\u5408\u306ftext\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002HipChat\u306eAPI\u4ed5\u69d8\n      default_timeout 3\n      key_name hipchat_message  # error\u304b\u3089\u5909\u66f4\n    </store>\n  </case>\n  <case app.fatal>\n    <store>\n      type hipchat\n      api_token \"#{ENV['HIPCHAT_API_TOKEN']}\"\n      default_room <YOUR CHAT ROOM>\n      default_from fluentd\n      default_color red         # \u30e1\u30c3\u30bb\u30fc\u30b8\u30ab\u30e9\u30fc\u3092\u5371\u967a\u305d\u3046\u306a\u8d64\u306b\u5909\u66f4\n      default_notify 1\n      default_format text\n      default_timeout 3\n      key_name hipchat_message\n    </store>\n    <store>\n     type twilio\n     account_sid    \"#{ENV['TWILIO_ACCOUNT_SID']}\"\n     auth_token     \"#{ENV['TWILIO_AUTH_TOKEN']}\"\n     from_number    +810000000000                # twilio\u3067\u53d6\u5f97\u3057\u305f\u756a\u53f7\n     default_number +811111111111, +812222222222 # \u96fb\u8a71\u3092\u53d7\u3051\u53d6\u308a\u305f\u3044\u756a\u53f7\n    </store>\n  </case>\n</match>\n\n<match fluent.**>\n  type stdout # fluentd\u81ea\u4f53\u306e\u30ed\u30b0\u306f/var/log/td-agent/td-agent.log\u3078\n</match>\n```\n\n### filter, type record_transformer\n0.12\u4ee5\u964d\u3067\u8ffd\u52a0\u3055\u308c\u305ffilter\u3092\u4f7f\u3063\u3066hipchat\u7528\u30e1\u30c3\u30bb\u30fc\u30b8\u3068twilio\u7528\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8ffd\u52a0\u3057\u305f\u3002\n0.12\u3088\u308a\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5834\u5408\u306f\u3001[fluent-plugin-record-reformer](https://github.com/sonots/fluent-plugin-record-reformer)\u306a\u3069\u306eoutput_plugin\u3067\u64cd\u4f5c\u3059\u308b\u306e\u304c\u30bb\u30aa\u30ea\u30fc\u306a\u3088\u3046\u3002\n\napp.fatal\u304c\u3053\u3046\u3044\u3046\u30ed\u30b0\u306a\u3089\n\n```json\n{\"req\":{\"method\":\"GET\",\"url\":\"/\"},\"res\":{\"statusCode\":500}, \"error\":\"hogehoge\"}\n```\n\n\u3053\u3046\u306a\u308b\u3002\n\n```json\n{\"req\":{\"method\":\"GET\",\"url\":\"/\"},\"res\":{\"statusCode\":500},\"error\":\"hogehoge\",\"message\":\"fatal\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\",\"hipchat_message\":\"@all app.fatal status:500\\nhogehoge\"}\n```\n\n\u3061\u306a\u307f\u306b\u3001filter\u306f\u4e0a\u304b\u3089\u4f55\u56de\u3067\u3082\u30de\u30c3\u30c1\u3059\u308b\u3088\u3046\uff08match\u3084case\u306f\u5148\u52dd\u3061\uff09\u3002\n\n```apache\n<filter app.fatal>\n</filter>\n<filter app.{warn,error,fatal}>\n</filter>\n\n# fatal\u306f\u4e21\u65b9\u306efilter\u3092\u901a\u308b\n```\n\n### enable_ruby\n\n${}\u306e\u4e2d\u3067ruby\u8a18\u6cd5\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u5165\u308c\u5b50\u306b\u306a\u3063\u3066\u3044\u308bJSON\u306e\u4e2d\u3092\u8aad\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u8a2d\u5b9a\u3002\n\n```apache\n   \"${res[\\\"statusCode\\\"]}\" # => 500\n```\n\n\n### \u8a2d\u5b9a\u3092DRY\u306b\n\u57fa\u672c\u7684\u306b\u306f`<match app.access>`\u3092`<match app.*>`\u306b\u6df7\u305c\u305f\u3060\u3051\u3002\u5168\u30ed\u30b0\u304cS3\u306b\u5165\u308b\u3088\u3046\u306b\u3057\u3001\nwarn, error\u306e\u30ed\u30b0\u306fhipchat\u3078\u3001fatal\u306fhipchat+twilio\u3078\u6295\u3052\u308b\u3002\n\nfatal\u306e\u3068\u304d\u3060\u3051hipchat\u3078\u30dd\u30b9\u30c8\u3055\u308c\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u8272\u3092\u5909\u3048\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u307b\u3068\u3093\u3069\u540c\u3058\u5185\u5bb9\u3060\u3051\u30692\u56de\u66f8\u3044\u3066\u308b\u3002\u5168\u304f\u540c\u3058\u5185\u5bb9\u3067\u826f\u3044\u6642\u306f\u3001`@include`\u304c\u4fbf\u5229\u305d\u3046\u3002\n\n/etc/td-agent/hipchat.conf\n\n```apache\n      type hipchat\n      api_token \"#{ENV['HIPCHAT_API_TOKEN']}\"\n      default_room \"#{ENV['HIPCHAT_ROOM']}\"\n      default_from fluentd\n      default_color yellow\n      default_notify 1\n      default_format text\n      default_timeout 3\n      key_name hipchat_message\n```\n\n```apache\n  <case app.{warn,error}>\n    <store>\n      @include ./hipchat.conf\n    </store>\n  </case>\n```\n\n\u77ed\u3044\u3002\n\n# \u305d\u306e\u4ed6\n* fluentd\u81ea\u4f53\u306e\u30ed\u30b0\u3082\u3068\u308a\u3042\u3048\u305atd-agent.log\u306b\u653e\u308a\u8fbc\u3093\u3067\u304a\u304f\u3002\uff08`<match fluent.**>`\uff09\n\n# \u307e\u3068\u3081\n\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3084twilio\u306b\u4efb\u610f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30dd\u30b9\u30c8\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n\u91cd\u8907\u3059\u308b\u8a18\u8ff0\u3092\u53ef\u80fd\u306a\u9650\u308a\u6392\u9664\u3057\u305f\u3002\n\n# \u53c2\u8003\n[Filter Plugin Overview | Fluentd](http://docs.fluentd.org/articles/filter-plugin-overview)\n[Fluentd v0.12\u306e\u76ee\u7389\u6a5f\u80fd\u3089\u3057\u3044Filter\u3092\u8a66\u3057\u3066\u307f\u305f - Qiita](http://qiita.com/muran001/items/f73d19398b750abb9c2d)\n[Configuration File | Fluentd](http://docs.fluentd.org/articles/config-file#5-re-use-your-config-the-ldquoincluderdquo-directive)\n", "tags": ["fluentd0.12.8", "S3", "twilio", "hipchat"]}