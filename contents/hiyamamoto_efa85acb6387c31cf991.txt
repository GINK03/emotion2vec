{"context": "\n\n\u74b0\u5883\nmacOS Sierra 10.12.2\n\n$ ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]\n\n\n\u30a8\u30e9\u30fc\u5185\u5bb9\nnokogiri v1.6 \u4ee5\u4e0a\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e libxml2 \u306e\u30d3\u30eb\u30c9\u3067\u30b3\u30b1\u3066\u3044\u308b\uff08\u4eca\u56de\u306e\u5834\u5408\u306f v1.7.0)\n$ sudo gem install rails\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.\n\n    current directory: /Users/hiroki/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-1.7.0.1/ext/nokogiri\n/Users/hiroki/.rbenv/versions/2.3.1/bin/ruby -r ./siteconf20170109-63610-qxseku.rb extconf.rb\nchecking if the C compiler accepts ... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\nUsing mini_portile version 2.1.0\nchecking for iconv.h... yes\nchecking for gzdopen() in -lz... yes\nchecking for iconv... yes\n************************************************************************\nIMPORTANT NOTICE:\n\nBuilding Nokogiri with a packaged version of libxml2-2.9.4.\n\nTeam Nokogiri will keep on doing their best to provide security\nupdates in a timely manner, but if this is a concern for you and want\nto use the system library instead; abort this installation process and\nreinstall nokogiri as follows:\n\n    gem install nokogiri -- --use-system-libraries\n        [--with-xml2-config=/path/to/xml2-config]\n        [--with-xslt-config=/path/to/xslt-config]\n\nIf you are using Bundler, tell it to use the option:\n\n    bundle config build.nokogiri --use-system-libraries\n    bundle install\n\nNote, however, that nokogiri is not fully compatible with arbitrary\nversions of libxml2 provided by OS/package vendors.\n************************************************************************\nExtracting libxml2-2.9.4.tar.gz into tmp/x86_64-apple-darwin16.3.0/ports/libxml2/2.9.4... OK\nRunning 'configure' for libxml2 2.9.4... OK\nRunning 'compile' for libxml2 2.9.4... ERROR, review '/Users/hiroki/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-1.7.0.1/ext/nokogiri/tmp/x86_64-apple-darwin16.3.0/ports/libxml2/2.9.4/compile.log' to see what happened. Last lines are:\n========================================================================\n    unsigned short* in = (unsigned short*) inb;\n                         ^~~~~~~~~~~~~~~~~~~~~\nencoding.c:815:27: warning: cast from 'unsigned char *' to 'unsigned short *' increases required alignment from 1 to 2 [-Wcast-align]\n    unsigned short* out = (unsigned short*) outb;\n                          ^~~~~~~~~~~~~~~~~~~~~~\n4 warnings generated.\n  CC       error.lo\n  CC       parserInternals.lo\n  CC       parser.lo\n  CC       tree.lo\n  CC       hash.lo\n  CC       list.lo\n  CC       xmlIO.lo\nxmlIO.c:1450:52: error: use of undeclared identifier 'LZMA_OK'\n    ret =  (__libxml2_xzclose((xzFile) context) == LZMA_OK ) ? 0 : -1;\n                                                   ^\n1 error generated.\nmake[2]: *** [xmlIO.lo] Error 1\nmake[1]: *** [all-recursive] Error 1\nmake: *** [all] Error 2\n\n\n\u5bfe\u51e6\u6cd5\n$ gem update --system\n$ xcode-select --install\n\n\n\u53c2\u8003\nhttps://github.com/sparklemotion/nokogiri/issues/1445#issuecomment-219398565\n# \u74b0\u5883\n```\nmacOS Sierra 10.12.2\n```\n\n```zsh\n$ ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]\n```\n\n# \u30a8\u30e9\u30fc\u5185\u5bb9\n`nokogiri v1.6` \u4ee5\u4e0a\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e `libxml2` \u306e\u30d3\u30eb\u30c9\u3067\u30b3\u30b1\u3066\u3044\u308b\uff08\u4eca\u56de\u306e\u5834\u5408\u306f `v1.7.0`)\n\n```zsh\n$ sudo gem install rails\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.\n\n    current directory: /Users/hiroki/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-1.7.0.1/ext/nokogiri\n/Users/hiroki/.rbenv/versions/2.3.1/bin/ruby -r ./siteconf20170109-63610-qxseku.rb extconf.rb\nchecking if the C compiler accepts ... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\nUsing mini_portile version 2.1.0\nchecking for iconv.h... yes\nchecking for gzdopen() in -lz... yes\nchecking for iconv... yes\n************************************************************************\nIMPORTANT NOTICE:\n\nBuilding Nokogiri with a packaged version of libxml2-2.9.4.\n\nTeam Nokogiri will keep on doing their best to provide security\nupdates in a timely manner, but if this is a concern for you and want\nto use the system library instead; abort this installation process and\nreinstall nokogiri as follows:\n\n    gem install nokogiri -- --use-system-libraries\n        [--with-xml2-config=/path/to/xml2-config]\n        [--with-xslt-config=/path/to/xslt-config]\n\nIf you are using Bundler, tell it to use the option:\n\n    bundle config build.nokogiri --use-system-libraries\n    bundle install\n\nNote, however, that nokogiri is not fully compatible with arbitrary\nversions of libxml2 provided by OS/package vendors.\n************************************************************************\nExtracting libxml2-2.9.4.tar.gz into tmp/x86_64-apple-darwin16.3.0/ports/libxml2/2.9.4... OK\nRunning 'configure' for libxml2 2.9.4... OK\nRunning 'compile' for libxml2 2.9.4... ERROR, review '/Users/hiroki/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-1.7.0.1/ext/nokogiri/tmp/x86_64-apple-darwin16.3.0/ports/libxml2/2.9.4/compile.log' to see what happened. Last lines are:\n========================================================================\n    unsigned short* in = (unsigned short*) inb;\n                         ^~~~~~~~~~~~~~~~~~~~~\nencoding.c:815:27: warning: cast from 'unsigned char *' to 'unsigned short *' increases required alignment from 1 to 2 [-Wcast-align]\n    unsigned short* out = (unsigned short*) outb;\n                          ^~~~~~~~~~~~~~~~~~~~~~\n4 warnings generated.\n  CC       error.lo\n  CC       parserInternals.lo\n  CC       parser.lo\n  CC       tree.lo\n  CC       hash.lo\n  CC       list.lo\n  CC       xmlIO.lo\nxmlIO.c:1450:52: error: use of undeclared identifier 'LZMA_OK'\n    ret =  (__libxml2_xzclose((xzFile) context) == LZMA_OK ) ? 0 : -1;\n                                                   ^\n1 error generated.\nmake[2]: *** [xmlIO.lo] Error 1\nmake[1]: *** [all-recursive] Error 1\nmake: *** [all] Error 2\n```\n\n# \u5bfe\u51e6\u6cd5\n```zsh\n$ gem update --system\n$ xcode-select --install\n```\n\n### \u53c2\u8003\nhttps://github.com/sparklemotion/nokogiri/issues/1445#issuecomment-219398565\n", "tags": ["Ruby", "Rails", "\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb", "Nokogiri", "libxml2"]}