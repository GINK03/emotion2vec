{"context": "\n\n\u554f\u984c\n\n\u672c\u5bb6\uff1aProblem 2 - Project Euler\n\n\u7ffb\u8a33\uff1aProblem 2 - PukiWiki\n\n\n\n\u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u5217\u306e\u9805\u306f\u524d\u306e2\u3064\u306e\u9805\u306e\u548c\u3067\u3042\u308b. \u6700\u521d\u306e2\u9805\u3092 1, 2 \u3068\u3059\u308c\u3070, \u6700\u521d\u306e10\u9805\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3042\u308b.\n1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...\n\u6570\u5217\u306e\u9805\u306e\u5024\u304c400\u4e07\u4ee5\u4e0b\u306e, \u5076\u6570\u5024\u306e\u9805\u306e\u7dcf\u548c\u3092\u6c42\u3081\u3088.\n\n\n\u7d20\u76f4\u306b\n4000000 |\n    %{for ($1, $2 = 1, 2; $1 -le $_; $1, $2 = $2, ($1 + $2)) {$1}} |\n    ?{$_ % 2 -eq 0} |\n    %{$s = 0} {$s += $_} {$s}\n\n\n\u8907\u96d1\u306b\n4000000 |\n    % {$sqrt5 = [Math]::Sqrt(5); $phi = (1 + $sqrt5) / 2} `\n      {$n = [Math]::Floor([Math]::Log($sqrt5 * $_, $phi) + ($phi - 1) / $_)} `\n      {([Math]::Round([Math]::Pow($phi, ($n - $n % 3 + 2)) / $sqrt5) - 1) / 2}\n\n\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5c0e\u51fa\u3059\u308b\u306b\u3042\u305f\u308a\u5fc5\u8981\u305d\u3046\u306a\u77e5\u8b58\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3002\u305f\u3060\u3057\u3001\u554f\u984c\u6587\u3068\u9055\u3063\u3066\uff08F1=F2=1F1=F2=1F_1 = F_2 = 1\u3068\u3057\u3066\u3044\u308b\u70b9\u306b\u6ce8\u610f\uff09\n\n\nFn=\u230a\u03d5n\u221a5+12\u230bFn=\u230a\u03d5n5\u221a+12\u230bF_n = \\left \\lfloor \\frac{\\phi^n}{\\sqrt{5}} + \\frac{1}{2} \\right \\rfloor\n\n\u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u5217\u306e\u4e00\u822c\u9805\u3067\u30b0\u30b0\u308c\u3070 \u03d5\u03d5\\phi \u306b\u3064\u3044\u3066\u3068\u3001\u8a3c\u660e\u304c\u51fa\u3066\u304f\u308b\u3002\n\n\n\nn\u2248log\u03d5(\u221a5Fn)n\u2248log\u03d5(5\u221aFn)n \\approx \\log_{\\phi} (\\sqrt{5} F_n)\n\n\u4e00\u822c\u9805\u3092\u4f7f\u3063\u305f\u8fd1\u4f3c\u3092 nnn \u306b\u3064\u3044\u3066\u89e3\u3051\u3070\u51fa\u3066\u304f\u308b\u3002\n\u3042\u304f\u307e\u3067\u8fd1\u4f3c\u306a\u306e\u3067\u554f\u984c\u306b\u5408\u308f\u305b\u3066\u5fae\u5999\u306b\u88dc\u6b63\u3057\u3066\u4f7f\u3046\u3002\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u306f \u03d5\u22121Fn\u03d5\u22121Fn\\frac{\\phi - 1}{F_n} \u3092\u8db3\u3057\u3066\u88dc\u6b63\u3057\u3066\u3044\u308b\u3002\n\u306a\u304a\u3001\u88dc\u6b63\u3057\u306a\u3044\u3068 F6nF6nF_{6 n} \u304c\u5165\u529b\u306e\u3068\u304d\u306b\u8aa4\u7b54\u3059\u308b\u3002\n\n\n\n\n\n\u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u5217 FnFnF_n \u304c\u5076\u6570\u306b\u306a\u308b\u306e\u306f nnn \u304c 3 \u306e\u500d\u6570\u3067\u3042\u308b\u3068\u304d\u306e\u307f\n\n\u6570\u5b66\u7684\u5e30\u7d0d\u6cd5\u3092\u4f7f\u3048\u3070\u3059\u3079\u3066\u306e\u81ea\u7136\u6570 nnn \u306b\u3064\u3044\u3066 F3n\u22122,F3n\u22121F3n\u22122,F3n\u22121F_{3n-2}, F_{3n-1} \u304c\u5947\u6570\u3001 F3nF3nF_{3n}\u304c\u5076\u6570\u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n\n\n\u2211nk=1Fk=Fn+2\u22121\u2211nk=1Fk=Fn+2\u22121\\sum_{k = 1}^{n} F_k = F_{n + 2} - 1\n\nFn+2\u2212\u2211nk=1Fk=Fn+2+Fn+1\u2212(\u2211nk=1Fk+Fn+1)=F(n+2)+1\u2212\u2211n+1k=1FkFn+2\u2212\u2211nk=1Fk=Fn+2+Fn+1\u2212(\u2211nk=1Fk+Fn+1)=F(n+2)+1\u2212\u2211n+1k=1FkF_{n + 2} - \\sum_{k = 1}^{n} F_k = F_{n + 2} + F_{n + 1} - (\\sum_{k = 1}^{n} F_k + F_{n+1}) = F_{(n + 2) + 1} - \\sum_{k = 1}^{n + 1} F_k \u3088\u308a\u3001 Fn+2\u2212\u2211n1Fk=F1+2\u2212\u22111k=1Fk=2\u22121=1Fn+2\u2212\u2211n1Fk=F1+2\u2212\u22111k=1Fk=2\u22121=1F_{n + 2} - \\sum_{1}^n F_k = F_{1 + 2} - \\sum_{k = 1}^1 F_k = 2 - 1 = 1 \n\n\n\n\u2211nk=1F3k=12(F3n+2\u22121)\u2211nk=1F3k=12(F3n+2\u22121)\\sum_{k = 1}^{n} F_{3 k} = \\frac{1}{2} (F_{3n + 2} - 1)\n\n\u2211nk=1F3k\u2211nk=1F3k\\sum_{k = 1}^{n} F_{3 k} \n=\u2211nk=1(F3k+F3k\u22121+F3k\u22122)\u2212\u2211nk=1(F3k\u22121+F3k\u22122)=\u2211nk=1(F3k+F3k\u22121+F3k\u22122)\u2212\u2211nk=1(F3k\u22121+F3k\u22122)= \\sum_{k = 1}^{n} (F_{3 k} + F_{3 k - 1} + F_{3 k - 2}) - \\sum_{k = 1}^{n} (F_{3 k - 1} + F_{3 k - 2})\n=\u22113nk=1Fk\u2212\u2211nk=1F3k=\u22113nk=1Fk\u2212\u2211nk=1F3k= \\sum_{k = 1}^{3 n} F_k - \\sum_{k = 1}^{n} F_{3 k} \u3088\u308a\u3001\n2\u2211nk=1F3k=\u22113nk=1Fk=F3n+2\u221212\u2211nk=1F3k=\u22113nk=1Fk=F3n+2\u221212 \\sum_{k = 1}^{n} F_{3 k} = \\sum_{k = 1}^{3 n} F_k = F_{3n + 2} - 1\n\n\n\n\n\u4ee5\u4e0a\n\u8907\u96d1\u306a\u89e3\u7b54\u306f\u8fd1\u4f3c\u5024\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3059\u3079\u3066\u306e\u5165\u529b\u306b\u6b63\u3057\u3044\u89e3\u3092\u8fd4\u3059\u304b\u4e0d\u5b89\u304c\u3042\u308b\u3002\n# \u554f\u984c\n\n* \u672c\u5bb6\uff1a[Problem 2 - Project Euler](https://projecteuler.net/problem=2)\n* \u7ffb\u8a33\uff1a[Problem 2 - PukiWiki](http://odz.sakura.ne.jp/projecteuler/index.php?cmd=read&page=Problem%202)\n\n> \u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u5217\u306e\u9805\u306f\u524d\u306e2\u3064\u306e\u9805\u306e\u548c\u3067\u3042\u308b. \u6700\u521d\u306e2\u9805\u3092 1, 2 \u3068\u3059\u308c\u3070, \u6700\u521d\u306e10\u9805\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3042\u308b.\n> 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...\n> \u6570\u5217\u306e\u9805\u306e\u5024\u304c400\u4e07\u4ee5\u4e0b\u306e, \u5076\u6570\u5024\u306e\u9805\u306e\u7dcf\u548c\u3092\u6c42\u3081\u3088.\n\n\n# \u7d20\u76f4\u306b\n\n```.ps1\n4000000 |\n    %{for ($1, $2 = 1, 2; $1 -le $_; $1, $2 = $2, ($1 + $2)) {$1}} |\n    ?{$_ % 2 -eq 0} |\n    %{$s = 0} {$s += $_} {$s}\n```\n\n# \u8907\u96d1\u306b\n\n```.ps1\n4000000 |\n    % {$sqrt5 = [Math]::Sqrt(5); $phi = (1 + $sqrt5) / 2} `\n      {$n = [Math]::Floor([Math]::Log($sqrt5 * $_, $phi) + ($phi - 1) / $_)} `\n      {([Math]::Round([Math]::Pow($phi, ($n - $n % 3 + 2)) / $sqrt5) - 1) / 2}\n```\n\n\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5c0e\u51fa\u3059\u308b\u306b\u3042\u305f\u308a\u5fc5\u8981\u305d\u3046\u306a\u77e5\u8b58\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3002\u305f\u3060\u3057\u3001\u554f\u984c\u6587\u3068\u9055\u3063\u3066\uff08$F_1 = F_2 = 1$\u3068\u3057\u3066\u3044\u308b\u70b9\u306b\u6ce8\u610f\uff09\n\n\n* $F_n = \\left \\lfloor \\frac{\\phi^n}{\\sqrt{5}} + \\frac{1}{2} \\right \\rfloor$\n    * \u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u5217\u306e\u4e00\u822c\u9805\u3067\u30b0\u30b0\u308c\u3070 $\\phi$ \u306b\u3064\u3044\u3066\u3068\u3001\u8a3c\u660e\u304c\u51fa\u3066\u304f\u308b\u3002\n\n* $n \\approx \\log_{\\phi} (\\sqrt{5} F_n)$\n    * \u4e00\u822c\u9805\u3092\u4f7f\u3063\u305f\u8fd1\u4f3c\u3092 $n$ \u306b\u3064\u3044\u3066\u89e3\u3051\u3070\u51fa\u3066\u304f\u308b\u3002\n    * \u3042\u304f\u307e\u3067\u8fd1\u4f3c\u306a\u306e\u3067\u554f\u984c\u306b\u5408\u308f\u305b\u3066\u5fae\u5999\u306b\u88dc\u6b63\u3057\u3066\u4f7f\u3046\u3002\n        * \u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u306f $\\frac{\\phi - 1}{F_n}$ \u3092\u8db3\u3057\u3066\u88dc\u6b63\u3057\u3066\u3044\u308b\u3002\n        * \u306a\u304a\u3001\u88dc\u6b63\u3057\u306a\u3044\u3068 $F_{6 n}$ \u304c\u5165\u529b\u306e\u3068\u304d\u306b\u8aa4\u7b54\u3059\u308b\u3002\n\n* \u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u5217 $F_n$ \u304c\u5076\u6570\u306b\u306a\u308b\u306e\u306f $n$ \u304c 3 \u306e\u500d\u6570\u3067\u3042\u308b\u3068\u304d\u306e\u307f\n    * \u6570\u5b66\u7684\u5e30\u7d0d\u6cd5\u3092\u4f7f\u3048\u3070\u3059\u3079\u3066\u306e\u81ea\u7136\u6570 $n$ \u306b\u3064\u3044\u3066 $F_{3n-2}, F_{3n-1}$ \u304c\u5947\u6570\u3001 $F_{3n}$\u304c\u5076\u6570\u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n* $\\sum_{k = 1}^{n} F_k = F_{n + 2} - 1$\n    * $F_{n + 2} - \\sum_{k = 1}^{n} F_k = F_{n + 2} + F_{n + 1} - (\\sum_{k = 1}^{n} F_k + F_{n+1}) = F_{(n + 2) + 1} - \\sum_{k = 1}^{n + 1} F_k$ \u3088\u308a\u3001 $F_{n + 2} - \\sum_{1}^n F_k = F_{1 + 2} - \\sum_{k = 1}^1 F_k = 2 - 1 = 1$ \n\n* $\\sum_{k = 1}^{n} F_{3 k} = \\frac{1}{2} (F_{3n + 2} - 1)$\n    * $\\sum_{k = 1}^{n} F_{3 k} $\n     $= \\sum_{k = 1}^{n} (F_{3 k} + F_{3 k - 1} + F_{3 k - 2}) - \\sum_{k = 1}^{n} (F_{3 k - 1} + F_{3 k - 2})$\n     $= \\sum_{k = 1}^{3 n} F_k - \\sum_{k = 1}^{n} F_{3 k}$ \u3088\u308a\u3001\n     $2 \\sum_{k = 1}^{n} F_{3 k} = \\sum_{k = 1}^{3 n} F_k = F_{3n + 2} - 1$\n\n# \u4ee5\u4e0a\n\n\u8907\u96d1\u306a\u89e3\u7b54\u306f\u8fd1\u4f3c\u5024\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3059\u3079\u3066\u306e\u5165\u529b\u306b\u6b63\u3057\u3044\u89e3\u3092\u8fd4\u3059\u304b\u4e0d\u5b89\u304c\u3042\u308b\u3002\n", "tags": ["PowerShell", "ProjectEuler"]}