{"context": " More than 1 year has passed since last update.\nRuby on Rails\u88fd\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30fb\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\uff08GNU Affero General Public License\uff09\nHipChat\u306e\u30af\u30ed\u30fc\u30f3\u3002\n\u30c1\u30fc\u30e0\u3067\u6d3b\u52d5\u3092\u3059\u308b\u969b\u306b\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u6587\u5b57\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u3068\u308a\u305f\u3044\u3051\u3069\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u56f0\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u5834\u5408\u306b\u4f7f\u3048\u305d\u3046\u3002\n\n\u30e1\u30fc\u30eb\u3060\u3068\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u304c\u306a\u3044\u306e\u3067\u30b9\u30d4\u30fc\u30c9\u611f\u304c\u51fa\u306a\u3044\nSkype\u306a\u3069\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u51fa\u308b\u3082\u306e\u306f\u7981\u6b62\u3055\u308c\u3066\u3044\u308b\nIPMessenger\u3060\u30681\u5bfe1\u304c\u57fa\u672c\u306a\u306e\u3067\u60c5\u5831\u5171\u6709\u304c\u96e3\u3057\u3044\n\nRails\u306e\u305f\u3081\u3001Redmine\u306a\u3069\u3068\u4e00\u7dd2\u306b\u5165\u308c\u3084\u3059\u304f\u3001\u30c1\u30fc\u30e0\u6d3b\u52d5\u306b\u5f79\u7acb\u3066\u3084\u3059\u3044\u3002\u307e\u305f\u5fc5\u8981\u306a\u3089\u81ea\u5206\u3067\u3082\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u3068\u3044\u3046\u5229\u70b9\u304c\u3042\u308b\u3002\nhttp://kandanapp.com/\nhttps://github.com/kandanapp/kandan\n\n\u66f4\u65b0\u60c5\u5831\n\n2015/10/11 \u3044\u308d\u3044\u308d\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u305f\u306e\u3067\u5bfe\u5fdc\n2014/08/31 ruby2.0\u7cfb\u306b\u3082\u5bfe\u5fdc\u3057\u305f\u3088\u3046\u3067\u3059\u3002\n\n\n\n\u74b0\u5883\n\n\n\n\u9805\u76ee\n\u5185\u5bb9\uff08\u30d0\u30fc\u30b8\u30e7\u30f3/\u30d1\u30b9\u7b49\uff09\n\n\n\n\nCent OS\n6.5\n\n\nKandan\n1.2\n\n\nruby\n2.0.0p481 (2014-05-08 revision 45883)\n\n\ngem\n2.4.8\n\n\nrails\n3.2.21\n\n\nenvironment\nproduction\n\n\ndatabase adapter\nmysql2\n\n\n\u30a2\u30d7\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n/usr/local/apl/kandan\n\n\nURL\nhttp://[hostname]:3000\n\n\nweb\u30b5\u30fc\u30d0\nthin\n\n\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\n0. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\niptables\u3001ip6tables\u3001selinux\u306a\u3069\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8a2d\u5b9a\u3002\n\n1. yum\u30d1\u30c3\u30b1\u30fc\u30b8\n\n1.1. \u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum install gcc gcc-c++\n# yum install git\n# yum install libxslt-devel libxml2-devel postgresql-devel\n# yum install mysql-server mysql-devel\n\n\n1.2. epel\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nepel\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n# yum install epel-release\n\n# yum install libyaml libyaml-devel --enablerepo=epel\n# yum install nodejs npm --enablerepo=epel\n\n\n3. ruby\n\n3.1. ruby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5b9f\u969b\u306frbenv\u3084ruby-build\u4f7f\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u5272\u611b\u3002\n\u4ee5\u4e0b\u304b\u3089ruby\u30bd\u30fc\u30b9\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttps://www.ruby-lang.org/ja/downloads/\n\n\u30d3\u30eb\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# tar zxvf ruby-2.0.0-p481.tar.gz \n# cd ruby-2.0.0-p481\n# ./configure --disable-install-doc\n# make\n# make install\n\n\u78ba\u8a8d\n# ruby -v\nruby 2.0.0p481 (2014-05-08 revision 45883) [x86_64-linux]\n\n\n3.2. gem\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngem\u3092\u6700\u65b0\u7248\u306b\u66f4\u65b0\n# gem update --system --no-rdoc --no-ri\n# gem -v\n2.4.8\n\nbundler\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install bundler --no-rdoc --no-ri\n\n\u78ba\u8a8d\n# gem list\nbigdecimal (1.2.5)\nbundler (1.7.6)\nio-console (0.4.2)\njson (1.8.1)\nminitest (5.4.3)\nrake (10.3.2)\nrdoc (4.1.2)\nrubygems-update (2.4.8)\n\n\n4. mysql\n\n4.1. my.cnf\u306butf8\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n/etc/my.cnf\n[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\ncharacter-set-server=utf8\n\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n[mysql]\ndefault-character-set=utf8\n\n\n\n4.2. mysql\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n\u8d77\u52d5\n# service mysqld start\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# chkconfig mysqld on\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\uff08root\u30d1\u30b9\u30ef\u30fc\u30c9\u4ed6\uff09\n# mysql_secure_installation\n\nDB\u3001\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n# mysql -u root -p\nmysql> create database db_kandan default character set utf8;\nmysql> grant all on db_kandan.* to user_kandan@localhost identified by '********';\nmysql> flush privileges;\nmysql> exit\n\n\n5. Kandan\n\n5.1. Kandan\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# cd /usr/local/apl\n# git clone https://github.com/kandanapp/kandan.git \n# cd /usr/local/apl/kandan\n\n\n5.2. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u8a2d\u5b9a\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fmysql\u3092\u4f7f\u7528\u3059\u308b\u3002\uff08\u305f\u307e\u305f\u307eRedmine\u3067\u4f7f\u3063\u3066\u3044\u305f\u305f\u3081\u3002PosgreSQL\u304c\u63a8\u5968\uff1f\uff09\n\n\nconfig/database.yml\n  production:\n    adapter: mysql2\n    host: localhost\n    database: db_kandan\n    pool: 5\n    timeout: 5000\n    username: user_kandan\n    password: \"********\"\n    encoding: utf8\n\n\n\nGemfile\u3067DB\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u306f\u305a\u3059\u3002\u3053\u306e\u3042\u3068rake\u306edb:create\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u3082\u3059\u308b\u3002\n\n\nGemfile\n  gem \"mysql2\", '~> 0.3.10'\n\n\n\n5.3. \u30d7\u30ea\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u8a2d\u5b9a\n\u52d5\u4f5c\u304c\u91cd\u304f\u306a\u308b\u305f\u3081\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306b\u3059\u308b\n\nconfig/environments/production.rb\nconfig.serve_static_assets = true  # \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\nconfig.assets.compile = false  # \u30e9\u30a4\u30d6\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u7121\u52b9\u306b\u3059\u308b\n\n\n\n5.4. \u30d3\u30eb\u30c9\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4e00\u822c\u30e6\u30fc\u30b6\uff08\u4f8b\uff1ahoge\uff09\u3067\u64cd\u4f5c\u3002\n\u203broot\u3067\u3082\u3067\u304d\u306a\u304f\u306f\u306a\u3044\u3002\n\n\u6a29\u9650\u8a2d\u5b9a\u3068hoge\u3078\u306e\u5909\u66f4\n\n  # chown -R hoge:hoge /usr/local/apl/kandan\n  # su - hoge\n  $\n\n\n\u30d3\u30eb\u30c9\n\n  bundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  $ cd /usr/local/apl/kandan/\n  $ bundle install --without development test --path vendor/bundle\n\n  DB\u4f5c\u6210\n  $ RAILS_ENV=production bundle exec rake db:create db:migrate kandan:bootstrap\n\n  \u30d7\u30ea\u30b3\u30f3\u30d1\u30a4\u30eb\n  $ RAILS_ENV=production bundle exec rake assets:precompile\n\n\n5.5. kandan\u306e\u8d77\u52d5\n# cd /usr/local/apl/kandan\n\n\u8d77\u52d5    \n# bundle exec thin start -e production\n\n\u30dd\u30fc\u30c8\u6307\u5b9a\u8d77\u52d5\uff08\u4f8b\uff1a80\uff09\n# bundle exec thin start -p 80 -e production\n\n\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\n# bundle exec thin start -e production -d\n\n\n6. \u8d77\u52d5\u8a2d\u5b9a\n\n6.1. Kandan\u306e\u8d77\u52d5\u3001\u505c\u6b62\u3001\u518d\u8d77\u52d5\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\n\u3053\u3053\u3067\u3001\u30dd\u30fc\u30c8\u6307\u5b9a\u3084\u30b5\u30fc\u30d3\u30b9\u767b\u9332\uff08etc/services\uff09\u3059\u308b\u5834\u5408\u306f\u8003\u616e\u3002\n\u305d\u306e\u4ed6\u3001\u9069\u5f53\u30fb\u30fb\u30fb\n\n/etc/rc.d/init.d/kandan\n#!/bin/bash\n#\n# chkconfig: - 99 01\n#\n# description: Kandan@thin server daemon\n#\n\nprog=kandan\n\nPATH=$PATH:/usr/local/bin\ncase \"$1\" in\n  start)\n    echo -n $\"Starting $prog ...\"\n    cd /usr/local/apl/kandan && bundle exec thin start -e production -d\n    echo \"Done.\"\n    ;;\n  stop)\n    echo -n $\"Stopping $prog ...\"\n    cd /usr/local/apl/kandan && bundle exec thin stop -e production\n    echo \"Done.\"\n    ;;\n  restart)\n    echo -n $\"Restarting $prog ...\"\n    cd /usr/local/apl/kandan && bundle exec thin restart -e production -d\n    echo \"Done.\"\n    ;;\nesac\nexit 0      \n\n\n\n6.2. \u8d77\u52d5\u30d5\u30a1\u30a4\u30eb\u8a2d\u7f6e\u3068\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n\u30d5\u30a1\u30a4\u30eb\u306b\u5b9f\u884c\u6a29\u9650\u3092\u3064\u3051\u308b\n\n  # chmod 755 /etc/rc.d/init.d/kandan\n\n\nchkconfig\u306b\u8ffd\u52a0\u3057\u3001\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n  # chkconfig --add kandan\n  # chkconfig kandan on\n\n\n6.3. \u8d77\u52d5\u64cd\u4f5c\n\n\u8d77\u52d5\u3059\u308b\u3002\n\n  # /etc/init.d/kandan start\n\n\n\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n  # /etc/init.d/kandan restart\n\n\n\u505c\u6b62\u3059\u308b\u3002\n\n  # /etc/init.d/kandan stop\n\n\n7. \u30a2\u30af\u30bb\u30b9\n\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u7ba1\u7406\u8005\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\nURL\n\n\nhttp://{\u30db\u30b9\u30c8\u540d}:3000/\n\n\n\u7ba1\u7406\u8005\u306e\u521d\u671fID\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\nID: Admin\nPass: kandanappadmin\n\n\n\n\n8. \u30ab\u30b9\u30bf\u30de\u30a4\u30ba\uff08\u975e\u63a8\u5968\uff09\n\u5168\u4f53\u306e\u601d\u60f3\u3092\u7406\u89e3\u3057\u3066\u5bfe\u5fdc\u3057\u305f\u308f\u3051\u3067\u306a\u304f\u3001\u5834\u5f53\u305f\u308a\u7684\u306a\u5bfe\u51e6\u306e\u305f\u3081\u63a8\u5968\u3057\u306a\u3044\u3002\n\n8.1 \u6295\u7a3f\u3057\u305f\u30c6\u30ad\u30b9\u30c8\uff08activity\uff09\u3092\u3001\u6295\u7a3f\u5185\u5bb9\u3069\u304a\u308a\u306b\u6539\u884c\u3059\u308b\u3002\n\n\u6a19\u6e96\u306e\u4ed5\u69d8\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\n\n\n1\u56de\u306e\u6539\u884c\uff082\u884c\uff09\u3067\u306f\u6539\u884c\u305b\u305a1\u884c\u3067\u8868\u793a\u3059\u308b\u3002\u307e\u305f\u3053\u306e\u5834\u5408\u306fURL\u30ea\u30f3\u30af\u306f\u52b9\u304b\u306a\u3044\u3002\n2\u56de\u4ee5\u4e0a\u306e\u6539\u884c\uff083\u884c\uff09\u306e\u5834\u5408\u306f\u3001\"read more\"\u3068\u3044\u3046\u5168\u5185\u5bb9\u306e\u30ea\u30f3\u30af\u3092\u542b\u3081\u305f4\u884c\u3092\u8868\u793a\u3059\u308b\u3002\n\u8a2d\u5b9a\u306f\u3001{\u30a2\u30d7\u30ea\u914d\u7f6e\u5148}/app/assets/javascripts/backbone/plugins/pastie.js.coffee\n\n\n\n\npastie.js.coffee\n@options:\n    maxPreviewLength: 300\n    maxPreviewLines:  4\n    regex: /\\n.*\\n/i\n\n    template: _.template '''\n      <pre class=\"pastie\"><%= preview %><a target=\"_blank\" class=\"pastie-link\" href=\"<%= messageLink %>\">read more</a>\n      </pre>\n    '''\n\n\n\n\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u306b\u5909\u66f4\u3059\u308b\u3002\n\n\n\"maxPreviewLines\"\uff08\u6700\u5927\u8868\u793a\u884c\uff09\u30921000\u306b\u5909\u66f4\u3059\u308b\u3002\n\u4ed5\u69d81\u30012\u3092\u5b9f\u73fe\u3059\u308b\u6761\u4ef6\u3067\u3042\u308bregex\u30921\u56de\u4ee5\u4e0a\u306e\u6539\u884c\u306b\u5909\u66f4\u3059\u308b\u3002\n\"read more\"\u306e\u30ea\u30f3\u30af\u3092\u524a\u9664\u3059\u308b\u3002\n\n\n\u306a\u304a\u3001\u3053\u306e\u5909\u66f4\u306b\u3088\u308aURL\u30ea\u30f3\u30af\u306e\u6295\u7a3f\u3082\u6709\u52b9\u306b\u306a\u308b\u3002\n\n\npastie.js.coffee\n@options:\n    maxPreviewLength: 300\n    maxPreviewLines:  1000\n    regex: /.*\\n/i\n\n    template: _.template '''\n      <pre class=\"pastie\"><%= preview %>\n      </pre>\n    '''\n\n\n---\nRuby on Rails\u88fd\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30fb\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\uff08GNU Affero General Public License\uff09\nHipChat\u306e\u30af\u30ed\u30fc\u30f3\u3002\n\n\u30c1\u30fc\u30e0\u3067\u6d3b\u52d5\u3092\u3059\u308b\u969b\u306b\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u6587\u5b57\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u3068\u308a\u305f\u3044\u3051\u3069\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u56f0\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u5834\u5408\u306b\u4f7f\u3048\u305d\u3046\u3002\n\n* \u30e1\u30fc\u30eb\u3060\u3068\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u304c\u306a\u3044\u306e\u3067\u30b9\u30d4\u30fc\u30c9\u611f\u304c\u51fa\u306a\u3044\n* Skype\u306a\u3069\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u51fa\u308b\u3082\u306e\u306f\u7981\u6b62\u3055\u308c\u3066\u3044\u308b\n* IPMessenger\u3060\u30681\u5bfe1\u304c\u57fa\u672c\u306a\u306e\u3067\u60c5\u5831\u5171\u6709\u304c\u96e3\u3057\u3044\n\nRails\u306e\u305f\u3081\u3001Redmine\u306a\u3069\u3068\u4e00\u7dd2\u306b\u5165\u308c\u3084\u3059\u304f\u3001\u30c1\u30fc\u30e0\u6d3b\u52d5\u306b\u5f79\u7acb\u3066\u3084\u3059\u3044\u3002\u307e\u305f\u5fc5\u8981\u306a\u3089\u81ea\u5206\u3067\u3082\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u3068\u3044\u3046\u5229\u70b9\u304c\u3042\u308b\u3002\n\nhttp://kandanapp.com/\nhttps://github.com/kandanapp/kandan\n\n\n## \u66f4\u65b0\u60c5\u5831\n* 2015/10/11 \u3044\u308d\u3044\u308d\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u305f\u306e\u3067\u5bfe\u5fdc\n* 2014/08/31 ruby2.0\u7cfb\u306b\u3082\u5bfe\u5fdc\u3057\u305f\u3088\u3046\u3067\u3059\u3002\n\n---\n\n# \u74b0\u5883\n\n| \u9805\u76ee | \u5185\u5bb9\uff08\u30d0\u30fc\u30b8\u30e7\u30f3/\u30d1\u30b9\u7b49\uff09 |\n|:--|:---|\n| Cent OS | 6.5 |\n| Kandan | 1.2 |\n| ruby | 2.0.0p481 (2014-05-08 revision 45883)|\n| gem | 2.4.8 |\n| rails | 3.2.21 |\n| environment | production |\n| database adapter | mysql2 |\n| \u30a2\u30d7\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea | /usr/local/apl/kandan |\n| URL | http://[hostname]:3000 |\n| web\u30b5\u30fc\u30d0 | thin |\n\n---\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\n## 0. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\niptables\u3001ip6tables\u3001selinux\u306a\u3069\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8a2d\u5b9a\u3002\n\n## 1. yum\u30d1\u30c3\u30b1\u30fc\u30b8\n\n### 1.1. \u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum install gcc gcc-c++\n# yum install git\n# yum install libxslt-devel libxml2-devel postgresql-devel\n# yum install mysql-server mysql-devel\n```\n\n### 1.2. epel\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nepel\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n# yum install epel-release\n```\n\n```\n# yum install libyaml libyaml-devel --enablerepo=epel\n# yum install nodejs npm --enablerepo=epel\n```\n\n\n## 3. ruby\n\n### 3.1. ruby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5b9f\u969b\u306frbenv\u3084ruby-build\u4f7f\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u5272\u611b\u3002\n\n```\n\u4ee5\u4e0b\u304b\u3089ruby\u30bd\u30fc\u30b9\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttps://www.ruby-lang.org/ja/downloads/\n\n\u30d3\u30eb\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# tar zxvf ruby-2.0.0-p481.tar.gz \n# cd ruby-2.0.0-p481\n# ./configure --disable-install-doc\n# make\n# make install\n\n\u78ba\u8a8d\n# ruby -v\nruby 2.0.0p481 (2014-05-08 revision 45883) [x86_64-linux]\n```\n\n### 3.2. gem\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\ngem\u3092\u6700\u65b0\u7248\u306b\u66f4\u65b0\n# gem update --system --no-rdoc --no-ri\n# gem -v\n2.4.8\n\nbundler\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install bundler --no-rdoc --no-ri\n\n\u78ba\u8a8d\n# gem list\nbigdecimal (1.2.5)\nbundler (1.7.6)\nio-console (0.4.2)\njson (1.8.1)\nminitest (5.4.3)\nrake (10.3.2)\nrdoc (4.1.2)\nrubygems-update (2.4.8)\n```\n\n\n## 4. mysql\n\n### 4.1. my.cnf\u306butf8\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n```/etc/my.cnf \n[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\ncharacter-set-server=utf8\n\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n[mysql]\ndefault-character-set=utf8\n```\n\n### 4.2. mysql\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n```\n\u8d77\u52d5\n# service mysqld start\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# chkconfig mysqld on\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\uff08root\u30d1\u30b9\u30ef\u30fc\u30c9\u4ed6\uff09\n# mysql_secure_installation\n\nDB\u3001\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n# mysql -u root -p\nmysql> create database db_kandan default character set utf8;\nmysql> grant all on db_kandan.* to user_kandan@localhost identified by '********';\nmysql> flush privileges;\nmysql> exit\n```\n\n## 5. Kandan\n\n### 5.1. Kandan\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# cd /usr/local/apl\n# git clone https://github.com/kandanapp/kandan.git \n# cd /usr/local/apl/kandan\n```\n\n### 5.2. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u8a2d\u5b9a\n\n1. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fmysql\u3092\u4f7f\u7528\u3059\u308b\u3002\uff08\u305f\u307e\u305f\u307eRedmine\u3067\u4f7f\u3063\u3066\u3044\u305f\u305f\u3081\u3002PosgreSQL\u304c\u63a8\u5968\uff1f\uff09\n\n  ```yaml:config/database.yml\n  production:\n    adapter: mysql2\n    host: localhost\n    database: db_kandan\n    pool: 5\n    timeout: 5000\n    username: user_kandan\n    password: \"********\"\n    encoding: utf8\n  ```\n\n2. Gemfile\u3067DB\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u306f\u305a\u3059\u3002\u3053\u306e\u3042\u3068rake\u306edb:create\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u3082\u3059\u308b\u3002\n\n  ```:Gemfile\n  gem \"mysql2\", '~> 0.3.10'\n  ```\n\n### 5.3. \u30d7\u30ea\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u8a2d\u5b9a\n\n\u52d5\u4f5c\u304c\u91cd\u304f\u306a\u308b\u305f\u3081\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306b\u3059\u308b\n\n```config/environments/production.rb\nconfig.serve_static_assets = true  # \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\nconfig.assets.compile = false  # \u30e9\u30a4\u30d6\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u7121\u52b9\u306b\u3059\u308b\n```\n\n### 5.4. \u30d3\u30eb\u30c9\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4e00\u822c\u30e6\u30fc\u30b6\uff08\u4f8b\uff1ahoge\uff09\u3067\u64cd\u4f5c\u3002\n\u203broot\u3067\u3082\u3067\u304d\u306a\u304f\u306f\u306a\u3044\u3002\n\n1. \u6a29\u9650\u8a2d\u5b9a\u3068hoge\u3078\u306e\u5909\u66f4\n\n  ```\n  # chown -R hoge:hoge /usr/local/apl/kandan\n  # su - hoge\n  $\n  ```\n\n2. \u30d3\u30eb\u30c9\n\n  ```\n  bundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  $ cd /usr/local/apl/kandan/\n  $ bundle install --without development test --path vendor/bundle\n\n  DB\u4f5c\u6210\n  $ RAILS_ENV=production bundle exec rake db:create db:migrate kandan:bootstrap\n  \n  \u30d7\u30ea\u30b3\u30f3\u30d1\u30a4\u30eb\n  $ RAILS_ENV=production bundle exec rake assets:precompile\n  ```\n\n\n### 5.5. kandan\u306e\u8d77\u52d5</a>\n\n```\n# cd /usr/local/apl/kandan\n\n\u8d77\u52d5    \n# bundle exec thin start -e production\n\n\u30dd\u30fc\u30c8\u6307\u5b9a\u8d77\u52d5\uff08\u4f8b\uff1a80\uff09\n# bundle exec thin start -p 80 -e production\n\n\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\n# bundle exec thin start -e production -d\n```\n\n## 6. \u8d77\u52d5\u8a2d\u5b9a\n\n### 6.1. Kandan\u306e\u8d77\u52d5\u3001\u505c\u6b62\u3001\u518d\u8d77\u52d5\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\n\u3053\u3053\u3067\u3001\u30dd\u30fc\u30c8\u6307\u5b9a\u3084\u30b5\u30fc\u30d3\u30b9\u767b\u9332\uff08etc/services\uff09\u3059\u308b\u5834\u5408\u306f\u8003\u616e\u3002\n\u305d\u306e\u4ed6\u3001\u9069\u5f53\u30fb\u30fb\u30fb\n\n```:/etc/rc.d/init.d/kandan\n#!/bin/bash\n#\n# chkconfig: - 99 01\n#\n# description: Kandan@thin server daemon\n#\n\nprog=kandan\n\nPATH=$PATH:/usr/local/bin\ncase \"$1\" in\n  start)\n    echo -n $\"Starting $prog ...\"\n    cd /usr/local/apl/kandan && bundle exec thin start -e production -d\n    echo \"Done.\"\n    ;;\n  stop)\n    echo -n $\"Stopping $prog ...\"\n    cd /usr/local/apl/kandan && bundle exec thin stop -e production\n    echo \"Done.\"\n    ;;\n  restart)\n    echo -n $\"Restarting $prog ...\"\n    cd /usr/local/apl/kandan && bundle exec thin restart -e production -d\n    echo \"Done.\"\n    ;;\nesac\nexit 0      \n```\n\n### 6.2. \u8d77\u52d5\u30d5\u30a1\u30a4\u30eb\u8a2d\u7f6e\u3068\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n1. \u30d5\u30a1\u30a4\u30eb\u306b\u5b9f\u884c\u6a29\u9650\u3092\u3064\u3051\u308b\n\n  ```\n  # chmod 755 /etc/rc.d/init.d/kandan\n  ```\n\n2. chkconfig\u306b\u8ffd\u52a0\u3057\u3001\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n  ```\n  # chkconfig --add kandan\n  # chkconfig kandan on\n  ```\n\n\n### 6.3. \u8d77\u52d5\u64cd\u4f5c\n\n1. \u8d77\u52d5\u3059\u308b\u3002\n\n  ```\n  # /etc/init.d/kandan start\n  ```\n\n2. \u518d\u8d77\u52d5\u3059\u308b\u3002\n\n  ```\n  # /etc/init.d/kandan restart\n  ```\n\n3. \u505c\u6b62\u3059\u308b\u3002\n\n  ```\n  # /etc/init.d/kandan stop\n  ```\n\n## 7. \u30a2\u30af\u30bb\u30b9\n\n\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u7ba1\u7406\u8005\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n* URL\n  * http://{\u30db\u30b9\u30c8\u540d}:3000/\n* \u7ba1\u7406\u8005\u306e\u521d\u671fID\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\n  * ID: Admin\n  * Pass: kandanappadmin\n\n## 8. \u30ab\u30b9\u30bf\u30de\u30a4\u30ba\uff08\u975e\u63a8\u5968\uff09\n\n\u5168\u4f53\u306e\u601d\u60f3\u3092\u7406\u89e3\u3057\u3066\u5bfe\u5fdc\u3057\u305f\u308f\u3051\u3067\u306a\u304f\u3001\u5834\u5f53\u305f\u308a\u7684\u306a\u5bfe\u51e6\u306e\u305f\u3081\u63a8\u5968\u3057\u306a\u3044\u3002\n\n### 8.1 \u6295\u7a3f\u3057\u305f\u30c6\u30ad\u30b9\u30c8\uff08activity\uff09\u3092\u3001\u6295\u7a3f\u5185\u5bb9\u3069\u304a\u308a\u306b\u6539\u884c\u3059\u308b\u3002\n\n* \u6a19\u6e96\u306e\u4ed5\u69d8\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\n  1. 1\u56de\u306e\u6539\u884c\uff082\u884c\uff09\u3067\u306f\u6539\u884c\u305b\u305a1\u884c\u3067\u8868\u793a\u3059\u308b\u3002\u307e\u305f\u3053\u306e\u5834\u5408\u306fURL\u30ea\u30f3\u30af\u306f\u52b9\u304b\u306a\u3044\u3002\n  2. 2\u56de\u4ee5\u4e0a\u306e\u6539\u884c\uff083\u884c\uff09\u306e\u5834\u5408\u306f\u3001\"read more\"\u3068\u3044\u3046\u5168\u5185\u5bb9\u306e\u30ea\u30f3\u30af\u3092\u542b\u3081\u305f4\u884c\u3092\u8868\u793a\u3059\u308b\u3002\n  3. \u8a2d\u5b9a\u306f\u3001{\u30a2\u30d7\u30ea\u914d\u7f6e\u5148}/app/assets/javascripts/backbone/plugins/pastie.js.coffee\n\n```:pastie.js.coffee\n@options:\n    maxPreviewLength: 300\n    maxPreviewLines:  4\n    regex: /\\n.*\\n/i\n\n    template: _.template '''\n      <pre class=\"pastie\"><%= preview %><a target=\"_blank\" class=\"pastie-link\" href=\"<%= messageLink %>\">read more</a>\n      </pre>\n    '''\n```\n\n* \u4ee5\u4e0b\u306e\u3068\u304a\u308a\u306b\u5909\u66f4\u3059\u308b\u3002\n  * \"maxPreviewLines\"\uff08\u6700\u5927\u8868\u793a\u884c\uff09\u30921000\u306b\u5909\u66f4\u3059\u308b\u3002\n  * \u4ed5\u69d81\u30012\u3092\u5b9f\u73fe\u3059\u308b\u6761\u4ef6\u3067\u3042\u308bregex\u30921\u56de\u4ee5\u4e0a\u306e\u6539\u884c\u306b\u5909\u66f4\u3059\u308b\u3002\n  * \"read more\"\u306e\u30ea\u30f3\u30af\u3092\u524a\u9664\u3059\u308b\u3002\n* \u306a\u304a\u3001\u3053\u306e\u5909\u66f4\u306b\u3088\u308aURL\u30ea\u30f3\u30af\u306e\u6295\u7a3f\u3082\u6709\u52b9\u306b\u306a\u308b\u3002\n\n```:pastie.js.coffee\n@options:\n    maxPreviewLength: 300\n    maxPreviewLines:  1000\n    regex: /.*\\n/i\n\n    template: _.template '''\n      <pre class=\"pastie\"><%= preview %>\n      </pre>\n    '''\n```\n\n", "tags": ["Rails", "Ruby", "chat", "hipchat"]}