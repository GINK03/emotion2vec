{"context": "\n\n\u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306fUnity 2 Advent Calendar 2016\u306e24\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u4ee5\u524d\u306e\u6295\u7a3f\u3067Unity Cloud Build\u306e\u30d3\u30eb\u30c9\u7d50\u679c\u3092Slack\u306b\u901a\u77e5\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u304c\u3001\u4ed6\u306e\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3067\u3082Unity Cloud Build\u306eWebhook\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u540c\u69d8\u306e\u3053\u3068\u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\uff08\u305f\u3060\u3057\u3001\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u5074\u306eWeb API\u304c\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u304c\u6761\u4ef6\uff09\n\u4eca\u56de\u306fAtlassian\u793e\u306eHipChat\u306bUnity Cloud Build\u306e\u30d3\u30eb\u30c9\u7d50\u679c\u3092\u901a\u77e5\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\nUnity Cloud Build\u306e\u57fa\u672c\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3053\u3068\nHipChat\u306e\u30a2\u30ab\u30a6\u30f3\u30c8/\u30c1\u30fc\u30e0\u3092\u4f5c\u6210\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\nPHP\u304c\u52d5\u4f5c\u3059\u308b\u30b5\u30fc\u30d0\u306e\u6e96\u5099\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3053\u3068\n\n\n\u8a2d\u5b9a\u65b9\u6cd5\n\nHipChat\u306e\u8a2d\u5b9a\nHipChat\u306b\u901a\u77e5\u3059\u308b\u305f\u3081\u306b\u901a\u77e5\u5148\u306eroom\u306e\u4f5c\u6210\uff0f\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u624b\u9806\u306f\u30a2\u30d7\u30ea\u7248\u3001Web\u7248\u3068\u3082\u307b\u307c\u5909\u308f\u3089\u306a\u3044\u305f\u3081\u597d\u307f\u306e\u65b9\u304b\u3089\u64cd\u4f5c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nHipChat\u306e\u5de6\u5074\u306b\u3042\u308b\u300cCreate a room\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u901a\u77e5\u5148\u306eRoom\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u4eca\u56de\u306fRoom\u540d\u3092\u300cUnity Cloud Build\u300d\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u304c\u3001\u4efb\u610f\u306eRoom\u540d\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\u300cRoom name\u300d\u3092\u5165\u529b\u3057\u305f\u3089\u300cCreate room\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e\u624b\u9806\u3067\u4f5c\u6210\u3057\u305fRoom\u306e\u53f3\u5074\u306b\u3042\u308b\u300cAdd integrations\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nUnity Cloud Build\u7528\u306e\u30ab\u30b9\u30bf\u30e0\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001\u753b\u9762\u5de6\u4e0a\u306b\u3042\u308b\u300cBuild your own integration\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30ab\u30b9\u30bf\u30e0\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u300cCreate\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u300cUnity Cloud Build\u300d\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u304c\u3001\u4efb\u610f\u306e\u540d\u524d\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\n\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u753b\u9762\u4e2d\u592e\u306b\u3042\u308b\u300cTry it!\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\uff08\u3059\u3050\u4e0a\u306b\u3042\u308bcurl\u30b3\u30de\u30f3\u30c9\u3067\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff09\n\n\u8a2d\u5b9a\u304c\u6b63\u3057\u304f\u5b8c\u4e86\u3057\u3066\u3044\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306bHipChat\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u3053\u307e\u3067\u3067HipChat\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\u300cSend messages to this room by posting to this URL\u300d\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bURL\u306f\u5f8c\u306e\u624b\u9806\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n\nPHP\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30c7\u30d7\u30ed\u30a4\nUnity Cloud Build\u304b\u3089\u9001\u3089\u308c\u3066\u304f\u308b\u30c7\u30fc\u30bf\u3092HipChat\u306b\u901a\u77e5\u3059\u308b\u305f\u3081\u306ePHP\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6e96\u5099\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002PHP\u304c\u52d5\u4f5c\u3059\u308b\u30b5\u30fc\u30d0\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n<?php\n$url = 'YOUR HIPCHAT ENDPOINT';\n\n// Get \u2019X-UnityCloudBuild-Event' http header\n$event = $_SERVER['HTTP_X_UNITYCLOUDBUILD_EVENT'];\n\nswitch ($event) {\n    case 'ProjectBuildQueued':\n        $color = 'yellow';\n        $title = 'Build queued';\n        break;\n    case 'ProjectBuildStarted':\n        $color = 'yellow';\n        $title = 'Build started';\n        break;\n    case 'ProjectBuildRestarted':\n        $color = 'gray';\n        $title = 'Build restarted';\n        break;\n    case 'ProjectBuildSuccess':\n        $color = 'green';\n        $title = 'Build success';\n        break;\n    case 'ProjectBuildFailure':\n        $color = 'red';\n        $title = 'Build failed';\n        break;\n    case 'ProjectBuildCanceled':\n        $color = 'gray';\n        $title = 'Build canceled';\n        break;\n    default:\n        $color = 'red';\n        $title = 'Unexpected event';\n        break;\n}\n\n$json_string = file_get_contents('php://input');\n$obj = json_decode($json_string);\n\n$project_name = $obj->projectName;\n$dashboard_project = $obj->links->dashboard_url->href . $obj->links->dashboard_project->href;\n$build_target_name = $obj->buildTargetName;\n$dashboard_log = $obj->links->dashboard_url->href . $obj->links->dashboard_log->href;\n$build_number = $obj->buildNumber;\n$platform = $obj->platform;\n$started_by = $obj->startedBy;\n\n// format message\n$message = <<<EOM\n<table>\n<tr>\n  <td>\n    <b>$title</b><br>\n    <a href=\"$dashboard_project\">$project_name</a> - <a href=\"$dashboard_log\">#$build_number</a><br>\n  </td>\n  <td>\n    <b>Target</b><br>\n    $build_target_name\n  </td>\n</tr>\n<tr>\n  <td>\n    <b>Platform</b><br>\n    $platform\n  </td>\n  <td>\n    <b>Started By</b><br>\n    $started_by\n  </td>\n</tr>\n</table>\nEOM;\n\n$data = array(\n    'color' => $color,\n    \"message\" => $message,\n    'notify' => true,\n    'message_format' => 'html',\n);\n\n$content = http_build_query($data);\n$options = array('http' => array(\n    'method' => 'POST',\n    'content' => $content\n));\n\n$contents = file_get_contents($url, false, stream_context_create($options));\n\n2\u884c\u76ee\u306e'YOUR HIPCHAT ENDPOINT'\u306e\u90e8\u5206\u306fHipChat\u306e\u8a2d\u5b9a\u306e\u6700\u5f8c\u306e\u624b\u9806\u3067\u63a7\u3048\u3066\u304a\u3044\u305fURL\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$url = 'YOUR HIPCHAT ENDPOINT';\n\n\nUnity Cloud Build\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eCloud Build\u306e\u30da\u30fc\u30b8\u306b\u3042\u308b\u300cNotifications\u300d\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u753b\u9762\u53f3\u5074\u306b\u3042\u308b\u300cAdd New\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Webhook\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\nURL\u306bPHP\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30c7\u30d7\u30ed\u30a4\u5148\u3092\u5165\u529b\u3057\u300cNext: Save \u2192\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u901a\u77e5\u30a4\u30d9\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8abf\u6574\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n\n\u30a4\u30d9\u30f3\u30c8\n\u30c8\u30ea\u30ac\u6761\u4ef6\n\n\n\n\nProjectBuildQueued\n\u30d3\u30eb\u30c9\u304c\u30ad\u30e5\u30fc\u306b\u5165\u3063\u305f\u3068\u304d\n\n\nProjectBuildStarted\n\u30d3\u30eb\u30c9\u304c\u958b\u59cb\u3055\u308c\u305f\u3068\u304d\n\n\nProjectBuildRestarted\n\u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3001\u30b8\u30e7\u30d6\u304c\u30ea\u30b9\u30bf\u30fc\u30c8\u3055\u308c\u305f\u3068\u304d\n\n\nProjectBuildSuccess\n\u30d3\u30eb\u30c9\u304c\u6b63\u5e38\u7d42\u4e86\u3057\u305f\u3068\u304d\n\n\nProjectBuildFailure\n\u30d3\u30eb\u30c9\u304c\u7570\u5e38\u7d42\u4e86\u3057\u305f\u3068\u304d\n\n\nProjectBuildCanceled\n\u5b9f\u884c\u4e2d\u306e\u30d3\u30eb\u30c9\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u3068\u304d\n\n\n\n\u753b\u9762\u53f3\u4e0a\u306e\u300c\u30d3\u30eb\u30c9\u958b\u59cb\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30d3\u30eb\u30c9\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u304c\u6b63\u3057\u304f\u5b8c\u4e86\u3057\u3066\u3044\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bHipChat\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u901a\u77e5\u3059\u308b\u5185\u5bb9\u306fUnity Cloud Build\u306eSlack\u901a\u77e5\u306b\u4f3c\u305b\u3066\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001PHP\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4fee\u6b63\u3059\u308b\u3053\u3068\u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u3067\u3059\u3002\n\n\n\u53c2\u8003\n\nWEBHOOKS AND SLACK NOTIFICATIONS IN UNITY CLOUD BUILD\nUnity Cloud Build\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nUCB2HC (GitHub\u306e\u30ea\u30f3\u30af)\n\n## \u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f[Unity 2 Advent Calendar 2016](http://qiita.com/advent-calendar/2016/unity2)\u306e24\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n[\u4ee5\u524d\u306e\u6295\u7a3f](http://qiita.com/murapong/items/b0ae10cbb6be7d5b4cd4)\u3067Unity Cloud Build\u306e\u30d3\u30eb\u30c9\u7d50\u679c\u3092Slack\u306b\u901a\u77e5\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u304c\u3001\u4ed6\u306e\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3067\u3082Unity Cloud Build\u306eWebhook\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u540c\u69d8\u306e\u3053\u3068\u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\uff08\u305f\u3060\u3057\u3001\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u5074\u306eWeb API\u304c\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u304c\u6761\u4ef6\uff09\n\u4eca\u56de\u306f[Atlassian\u793e](https://ja.atlassian.com/)\u306e[HipChat](https://ja.atlassian.com/software/hipchat)\u306bUnity Cloud Build\u306e\u30d3\u30eb\u30c9\u7d50\u679c\u3092\u901a\u77e5\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u524d\u63d0\u6761\u4ef6\n* Unity Cloud Build\u306e\u57fa\u672c\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3053\u3068\n* HipChat\u306e\u30a2\u30ab\u30a6\u30f3\u30c8/\u30c1\u30fc\u30e0\u3092\u4f5c\u6210\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\n* PHP\u304c\u52d5\u4f5c\u3059\u308b\u30b5\u30fc\u30d0\u306e\u6e96\u5099\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3053\u3068\n\n## \u8a2d\u5b9a\u65b9\u6cd5\n\n### HipChat\u306e\u8a2d\u5b9a\nHipChat\u306b\u901a\u77e5\u3059\u308b\u305f\u3081\u306b\u901a\u77e5\u5148\u306eroom\u306e\u4f5c\u6210\uff0f\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u624b\u9806\u306f\u30a2\u30d7\u30ea\u7248\u3001Web\u7248\u3068\u3082\u307b\u307c\u5909\u308f\u3089\u306a\u3044\u305f\u3081\u597d\u307f\u306e\u65b9\u304b\u3089\u64cd\u4f5c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nHipChat\u306e\u5de6\u5074\u306b\u3042\u308b\u300cCreate a room\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u901a\u77e5\u5148\u306eRoom\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u4eca\u56de\u306fRoom\u540d\u3092\u300cUnity Cloud Build\u300d\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u304c\u3001\u4efb\u610f\u306eRoom\u540d\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\u300cRoom name\u300d\u3092\u5165\u529b\u3057\u305f\u3089\u300cCreate room\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![Kobito.0odzRm.png](https://qiita-image-store.s3.amazonaws.com/0/5879/44ba2570-f400-d15a-8f3a-6b7ea84acd2f.png \"Kobito.0odzRm.png\")\n\n\u4e0a\u8a18\u306e\u624b\u9806\u3067\u4f5c\u6210\u3057\u305fRoom\u306e\u53f3\u5074\u306b\u3042\u308b\u300cAdd integrations\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![Kobito.kSO9bp.png](https://qiita-image-store.s3.amazonaws.com/0/5879/b231f736-0f0b-76ae-776c-e3f74b54679d.png \"Kobito.kSO9bp.png\")\n\nUnity Cloud Build\u7528\u306e\u30ab\u30b9\u30bf\u30e0\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001\u753b\u9762\u5de6\u4e0a\u306b\u3042\u308b\u300cBuild your own integration\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![Kobito.GC4jFf.png](https://qiita-image-store.s3.amazonaws.com/0/5879/581c02b5-f901-6e96-5b0c-54047ac36721.png \"Kobito.GC4jFf.png\")\n\n\u30ab\u30b9\u30bf\u30e0\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u300cCreate\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u300cUnity Cloud Build\u300d\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u304c\u3001\u4efb\u610f\u306e\u540d\u524d\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\n![Kobito.b41yfC.png](https://qiita-image-store.s3.amazonaws.com/0/5879/f520027e-0582-dacc-3452-8101bc22a015.png \"Kobito.b41yfC.png\")\n\n\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u753b\u9762\u4e2d\u592e\u306b\u3042\u308b\u300cTry it!\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\uff08\u3059\u3050\u4e0a\u306b\u3042\u308bcurl\u30b3\u30de\u30f3\u30c9\u3067\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff09\n\n![Kobito.POHzNW.png](https://qiita-image-store.s3.amazonaws.com/0/5879/9fb51b88-e75a-0b7c-25e2-11d99b1f9314.png \"Kobito.POHzNW.png\")\n\n\u8a2d\u5b9a\u304c\u6b63\u3057\u304f\u5b8c\u4e86\u3057\u3066\u3044\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306bHipChat\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n\n![Kobito.3QTiZh.png](https://qiita-image-store.s3.amazonaws.com/0/5879/55323e50-c0f2-425c-98df-d13a977c40e0.png \"Kobito.3QTiZh.png\")\n\n\u3053\u3053\u307e\u3067\u3067HipChat\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002<b>\u300cSend messages to this room by posting to this URL\u300d\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bURL\u306f\u5f8c\u306e\u624b\u9806\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</b>\n\n![Kobito.V49yeS.png](https://qiita-image-store.s3.amazonaws.com/0/5879/1cb62a44-341b-3413-0b74-a54b32470e14.png \"Kobito.V49yeS.png\")\n\n### PHP\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30c7\u30d7\u30ed\u30a4\n[Unity Cloud Build\u304b\u3089\u9001\u3089\u308c\u3066\u304f\u308b\u30c7\u30fc\u30bf\u3092HipChat\u306b\u901a\u77e5\u3059\u308b\u305f\u3081\u306ePHP\u30b9\u30af\u30ea\u30d7\u30c8](https://github.com/murapong/ucb2hc/blob/master/src/ucb2hc.php)\u3092\u6e96\u5099\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002PHP\u304c\u52d5\u4f5c\u3059\u308b\u30b5\u30fc\u30d0\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```php\n<?php\n$url = 'YOUR HIPCHAT ENDPOINT';\n\n// Get \u2019X-UnityCloudBuild-Event' http header\n$event = $_SERVER['HTTP_X_UNITYCLOUDBUILD_EVENT'];\n\nswitch ($event) {\n    case 'ProjectBuildQueued':\n        $color = 'yellow';\n        $title = 'Build queued';\n        break;\n    case 'ProjectBuildStarted':\n        $color = 'yellow';\n        $title = 'Build started';\n        break;\n    case 'ProjectBuildRestarted':\n        $color = 'gray';\n        $title = 'Build restarted';\n        break;\n    case 'ProjectBuildSuccess':\n        $color = 'green';\n        $title = 'Build success';\n        break;\n    case 'ProjectBuildFailure':\n        $color = 'red';\n        $title = 'Build failed';\n        break;\n    case 'ProjectBuildCanceled':\n        $color = 'gray';\n        $title = 'Build canceled';\n        break;\n    default:\n        $color = 'red';\n        $title = 'Unexpected event';\n        break;\n}\n\n$json_string = file_get_contents('php://input');\n$obj = json_decode($json_string);\n\n$project_name = $obj->projectName;\n$dashboard_project = $obj->links->dashboard_url->href . $obj->links->dashboard_project->href;\n$build_target_name = $obj->buildTargetName;\n$dashboard_log = $obj->links->dashboard_url->href . $obj->links->dashboard_log->href;\n$build_number = $obj->buildNumber;\n$platform = $obj->platform;\n$started_by = $obj->startedBy;\n\n// format message\n$message = <<<EOM\n<table>\n<tr>\n  <td>\n    <b>$title</b><br>\n    <a href=\"$dashboard_project\">$project_name</a> - <a href=\"$dashboard_log\">#$build_number</a><br>\n  </td>\n  <td>\n    <b>Target</b><br>\n    $build_target_name\n  </td>\n</tr>\n<tr>\n  <td>\n    <b>Platform</b><br>\n    $platform\n  </td>\n  <td>\n    <b>Started By</b><br>\n    $started_by\n  </td>\n</tr>\n</table>\nEOM;\n\n$data = array(\n    'color' => $color,\n    \"message\" => $message,\n    'notify' => true,\n    'message_format' => 'html',\n);\n\n$content = http_build_query($data);\n$options = array('http' => array(\n    'method' => 'POST',\n    'content' => $content\n));\n\n$contents = file_get_contents($url, false, stream_context_create($options));\n```\n\n<b>2\u884c\u76ee\u306e'YOUR HIPCHAT ENDPOINT'\u306e\u90e8\u5206\u306fHipChat\u306e\u8a2d\u5b9a\u306e\u6700\u5f8c\u306e\u624b\u9806\u3067\u63a7\u3048\u3066\u304a\u3044\u305fURL\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</b>\n\n```php\n$url = 'YOUR HIPCHAT ENDPOINT';\n```\n\n### Unity Cloud Build\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eCloud Build\u306e\u30da\u30fc\u30b8\u306b\u3042\u308b\u300cNotifications\u300d\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![Kobito.xkKPmb.png](https://qiita-image-store.s3.amazonaws.com/0/5879/9b5ea5b8-525b-5688-f23e-6cf8f2d60ec5.png \"Kobito.xkKPmb.png\")\n\n\u753b\u9762\u53f3\u5074\u306b\u3042\u308b\u300cAdd New\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Webhook\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n![Kobito.V3hOyc.png](https://qiita-image-store.s3.amazonaws.com/0/5879/85460c58-6c1e-8245-d626-a5d40263ac07.png \"Kobito.V3hOyc.png\")\n\nURL\u306bPHP\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30c7\u30d7\u30ed\u30a4\u5148\u3092\u5165\u529b\u3057\u300cNext: Save \u2192\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![Kobito.nfR4ui.png](https://qiita-image-store.s3.amazonaws.com/0/5879/e15ddb8c-d68f-0380-7e00-2842037d2c46.png \"Kobito.nfR4ui.png\")\n\n\u306a\u304a\u3001\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u901a\u77e5\u30a4\u30d9\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8abf\u6574\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n| \u30a4\u30d9\u30f3\u30c8 | \u30c8\u30ea\u30ac\u6761\u4ef6 |\n|--------------------|--------------------|\n| ProjectBuildQueued    | \u30d3\u30eb\u30c9\u304c\u30ad\u30e5\u30fc\u306b\u5165\u3063\u305f\u3068\u304d |\n| ProjectBuildStarted   | \u30d3\u30eb\u30c9\u304c\u958b\u59cb\u3055\u308c\u305f\u3068\u304d |\n| ProjectBuildRestarted |\t \u5185\u90e8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3001\u30b8\u30e7\u30d6\u304c\u30ea\u30b9\u30bf\u30fc\u30c8\u3055\u308c\u305f\u3068\u304d |\n| ProjectBuildSuccess   | \u30d3\u30eb\u30c9\u304c\u6b63\u5e38\u7d42\u4e86\u3057\u305f\u3068\u304d |\n| ProjectBuildFailure   | \u30d3\u30eb\u30c9\u304c\u7570\u5e38\u7d42\u4e86\u3057\u305f\u3068\u304d |\n| ProjectBuildCanceled  | \u5b9f\u884c\u4e2d\u306e\u30d3\u30eb\u30c9\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u3068\u304d |\n\n\u753b\u9762\u53f3\u4e0a\u306e\u300c\u30d3\u30eb\u30c9\u958b\u59cb\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30d3\u30eb\u30c9\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n![Kobito.pC4ilK.png](https://qiita-image-store.s3.amazonaws.com/0/5879/a8f76b75-c378-61c9-9138-d842218b2b64.png \"Kobito.pC4ilK.png\")\n\n\u8a2d\u5b9a\u304c\u6b63\u3057\u304f\u5b8c\u4e86\u3057\u3066\u3044\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bHipChat\u306b\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n![Kobito.N0oOiN.png](https://qiita-image-store.s3.amazonaws.com/0/5879/b43e72cf-7416-5b49-9126-83f780b2d103.png \"Kobito.N0oOiN.png\")\n\n\u306a\u304a\u3001\u901a\u77e5\u3059\u308b\u5185\u5bb9\u306fUnity Cloud Build\u306eSlack\u901a\u77e5\u306b\u4f3c\u305b\u3066\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001PHP\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4fee\u6b63\u3059\u308b\u3053\u3068\u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u3067\u3059\u3002\n![Kobito.Olt8SM.png](https://qiita-image-store.s3.amazonaws.com/0/5879/1c064316-b2d2-3e11-e621-be561fba2491.png \"Kobito.Olt8SM.png\")\n\n## \u53c2\u8003\n* [WEBHOOKS AND SLACK NOTIFICATIONS IN UNITY CLOUD BUILD](https://blogs.unity3d.com/jp/2016/09/07/webhooks-and-slack-notifications-in-unity-cloud-build/)\n* [Unity Cloud Build\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://build-api.cloud.unity3d.com/docs/1.0.0/index.html#operation-webhooks-intro)\n* [UCB2HC (GitHub\u306e\u30ea\u30f3\u30af)](https://github.com/murapong/ucb2hc)\n", "tags": ["hipchat", "Unity", "UnityCloudBuild", "Atlassian"]}