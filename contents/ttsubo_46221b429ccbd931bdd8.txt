{"context": " More than 1 year has passed since last update.\u524d\u56de\u306e\u30d6\u30ed\u30b0\u8a18\u4e8b\u300cMac OS X\u74b0\u5883\u3067\u3001Apache Storm\u306e\u57fa\u672c\u52d5\u4f5c\u3092\u8a66\u3057\u3066\u307f\u308b\u300d\u306e\u3064\u3065\u304d\u3067\u3059\u3002\nApache Storm\u306f\u3001multi-language\u5bfe\u5fdc\u306a\u306e\u3067\u3001\"Scala\u7248 storm-starter\"\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u2b1b\ufe0e Scala\u7248 storm-starter\u3092\u69cb\u7bc9\u3059\u308b\n\nGithub\u304b\u3089\u3001Scala\u7248 storm-starter\u30ea\u30dd\u30b8\u30c8\u30ea\u60c5\u5831\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\u3082\u3068\u3082\u3068\u306f\u3001paulfryzel/scala-storm-starter\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\n\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3001\u6700\u65b0\u7248\u306eStorm\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u4e00\u90e8\u4fee\u6b63\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n$ git clone https://github.com/ttsubo/scala-storm-starter.git\n$ cd scala-storm-starter/\n$ git checkout sample\n$ brew install sbt\n$ sbt compile package assembly\n\n\n\n\"Nimbus\"\u3092\u8d77\u52d5\u3057\u307e\u3059\n\n$ storm nimbus\nRunning: java -server -Ddaemon.name=nimbus -Dstorm.options= -Dstorm.home=/usr/local/apache-storm-0.10.0 -Dstorm.log.dir=/usr/local/apache-storm-0.10.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /usr/local/apache-storm-0.10.0/lib/asm-4.0.jar:/usr/local/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/usr/local/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/usr/local/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/usr/local/apache-storm-0.10.0/lib/kryo-2.21.jar:/usr/local/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/usr/local/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/usr/local/apache-storm-0.10.0/lib/minlog-1.2.jar:/usr/local/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/usr/local/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/usr/local/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/usr/local/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/usr/local/storm/conf -Xmx1024m -Dlogfile.name=nimbus.log -Dlog4j.configurationFile=/usr/local/apache-storm-0.10.0/log4j2/cluster.xml backtype.storm.daemon.nimbus\n\n\n\n\"Supervisor\"\u3092\u8d77\u52d5\u3057\u307e\u3059\n\n$ storm supervisor\nRunning: java -server -Ddaemon.name=supervisor -Dstorm.options= -Dstorm.home=/usr/local/apache-storm-0.10.0 -Dstorm.log.dir=/usr/local/apache-storm-0.10.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /usr/local/apache-storm-0.10.0/lib/asm-4.0.jar:/usr/local/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/usr/local/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/usr/local/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/usr/local/apache-storm-0.10.0/lib/kryo-2.21.jar:/usr/local/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/usr/local/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/usr/local/apache-storm-0.10.0/lib/minlog-1.2.jar:/usr/local/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/usr/local/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/usr/local/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/usr/local/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/usr/local/storm/conf -Xmx256m -Dlogfile.name=supervisor.log -Dlog4j.configurationFile=/usr/local/apache-storm-0.10.0/log4j2/cluster.xml backtype.storm.daemon.supervisor\n\n\n\n\"UI\"\u3092\u8d77\u52d5\u3057\u307e\u3059\n\n$ storm ui\nRunning: java -server -Ddaemon.name=ui -Dstorm.options= -Dstorm.home=/usr/local/apache-storm-0.10.0 -Dstorm.log.dir=/usr/local/apache-storm-0.10.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /usr/local/apache-storm-0.10.0/lib/asm-4.0.jar:/usr/local/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/usr/local/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/usr/local/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/usr/local/apache-storm-0.10.0/lib/kryo-2.21.jar:/usr/local/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/usr/local/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/usr/local/apache-storm-0.10.0/lib/minlog-1.2.jar:/usr/local/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/usr/local/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/usr/local/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/usr/local/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/usr/local/apache-storm-0.10.0:/usr/local/storm/conf -Xmx768m -Dlogfile.name=ui.log -Dlog4j.configurationFile=/usr/local/apache-storm-0.10.0/log4j2/cluster.xml backtype.storm.ui.core\n\n\n\"ExclamationTopology\"\u3092\u30ed\u30fc\u30ab\u30eb\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3055\u305b\u307e\u3059\u3002\n\n$ storm jar target/scala-2.11/scala-storm-starter-assembly-0.0.2-SNAPSHOT.jar storm.starter.topology.ExclamationTopology\n\n...(snip)\n\n6159 [Thread-36-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6162 [Thread-36-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 4 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6163 [Thread-38-word] INFO  b.s.d.task - Emitting: word default [jackson]\n6168 [Thread-38-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:14, stream: default, id: {}, [jackson]\n6171 [Thread-40-exclaim1] INFO  b.s.d.executor - Processing received message FOR 4 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6172 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:14, stream: default, id: {}, [jackson]\n6174 [Thread-24-word] INFO  b.s.d.task - Emitting: word default [jackson]\n6174 [Thread-10-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6174 [Thread-24-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:9, stream: default, id: {}, [jackson]\n6174 [Thread-10-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 4 TUPLE: source: word:8, stream: default, id: {}, [bertels]\n6174 [Thread-42-word] INFO  b.s.d.task - Emitting: word default [jackson]\n6174 [Thread-42-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:15, stream: default, id: {}, [jackson]\n6174 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:9, stream: default, id: {}, [jackson]\n6179 [Thread-26-word] INFO  b.s.d.task - Emitting: word default [golda]\n6179 [Thread-26-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:11, stream: default, id: {}, [golda]\n6190 [Thread-12-word] INFO  b.s.d.task - Emitting: word default [golda]\n6190 [Thread-12-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:12, stream: default, id: {}, [golda]\n6200 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [jackson!!!]\n6200 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [jackson!!!]\n6200 [Thread-40-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [jackson!!!]\n6201 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:9, stream: default, id: {}, [jackson]\n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 4 TIME:  TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:9, stream: default, id: {}, [jackson] TASK: 2 DELTA: \n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:10, stream: default, id: {}, [bertels] TASK: 4 DELTA: \n6201 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:14, stream: default, id: {}, [jackson]\n6201 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [jackson!!!]\n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - Processing received message FOR 4 TUPLE: source: word:8, stream: default, id: {}, [bertels]\n6201 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6201 [Thread-40-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6201 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [jackson!!!!!!]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:11, stream: default, id: {}, [golda]\n6201 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:14, stream: default, id: {}, [jackson] TASK: 3 DELTA: \n6202 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [jackson!!!]\n6202 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [golda!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:15, stream: default, id: {}, [jackson]\n6202 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [jackson!!!] TASK: 5 DELTA: \n6202 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [jackson!!!]\n6202 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6202 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n6202 [Thread-40-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6202 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6202 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:4, stream: default, id: {}, [bertels!!!] TASK: 6 DELTA: \n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:15, stream: default, id: {}, [jackson]\n6202 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:15, stream: default, id: {}, [jackson] TASK: 3 DELTA: \n6202 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [jackson!!!!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:12, stream: default, id: {}, [golda]\n6202 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:11, stream: default, id: {}, [golda]\n6203 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:11, stream: default, id: {}, [golda] TASK: 2 DELTA: \n6203 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [golda!!!]\n6202 [Thread-40-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 4 TIME:  TUPLE: source: word:8, stream: default, id: {}, [bertels]\n6203 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6203 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [golda!!!]\n6203 [Thread-40-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:8, stream: default, id: {}, [bertels] TASK: 4 DELTA: \n6203 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n6203 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:12, stream: default, id: {}, [golda]\n6203 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6204 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:12, stream: default, id: {}, [golda] TASK: 3 DELTA: \n6204 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:4, stream: default, id: {}, [bertels!!!] TASK: 5 DELTA: \n6204 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6204 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6204 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [jackson!!!] TASK: 6 DELTA: \n6204 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [jackson!!!!!!]\n6204 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6204 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6204 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [golda!!!!!!]\n6205 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [jackson!!!] TASK: 5 DELTA: \n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [golda!!!] TASK: 6 DELTA: \n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [golda!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [golda!!!!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [golda!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [golda!!!] TASK: 6 DELTA: \n6209 [Thread-30-word] INFO  b.s.d.task - Emitting: word default [nathan]\n6209 [Thread-16-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6210 [Thread-16-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:7, stream: default, id: {}, [bertels]\n6210 [Thread-30-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:16, stream: default, id: {}, [nathan]\n6210 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:7, stream: default, id: {}, [bertels]\n6210 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:16, stream: default, id: {}, [nathan]\n6211 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6211 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [nathan!!!]\n6212 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [nathan!!!]\n6212 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:16, stream: default, id: {}, [nathan]\n6213 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:16, stream: default, id: {}, [nathan] TASK: 2 DELTA: \n6212 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6214 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:7, stream: default, id: {}, [bertels]\n6215 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:7, stream: default, id: {}, [bertels] TASK: 3 DELTA: \n6215 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [nathan!!!]\n6216 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [nathan!!!!!!]\n6218 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [nathan!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [nathan!!!] TASK: 5 DELTA: \n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [bertels!!!] TASK: 5 DELTA: \n6221 [Thread-32-word] INFO  b.s.d.task - Emitting: word default [golda]\n6222 [Thread-32-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:13, stream: default, id: {}, [golda]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:13, stream: default, id: {}, [golda]\n6223 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [golda!!!]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:13, stream: default, id: {}, [golda]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:13, stream: default, id: {}, [golda] TASK: 2 DELTA: \n6224 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6224 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [golda!!!!!!]\n6224 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6224 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [golda!!!] TASK: 6 DELTA: \n6266 [Thread-36-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6266 [Thread-36-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6266 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6266 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6266 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6266 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6267 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6267 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:10, stream: default, id: {}, [bertels] TASK: 3 DELTA: 1\n6267 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n\n\u4ee5\u4e0a\u3088\u308a\u3001\u524d\u56de\u3068\u540c\u69d8\u306b\u3001word(TestWordSpout) \u2192 exclaim1(ExclamationBolt) \u2192 exclaim2(ExclamationBolt)\u3068\u52d5\u4f5c\u3059\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u306b\u304a\u3044\u3066\u3001\"bertels\u201d \u2192 \u201dbertels!!!\u201d \u2192 \u201dbertels!!!!!!\"\u306e\u3088\u3046\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u69d8\u5b50\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u2b1b\ufe0e Storm\u52d5\u4f5c\u306b\u304a\u3051\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u3063\u3066\u3001\u3069\u3046\u306a\u3063\u3066\u3044\u308b\u306e\u304b\uff1f\n(1) Topology\u5b9a\u7fa9\u3092\u3055\u3050\u3063\u3066\u307f\u308b\n\u307e\u305a\u3001TopologyBuilder\u30af\u30e9\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3068\u3053\u308d\u304b\u3089\u306f\u3058\u307e\u308a\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001Topology\u69cb\u6210\u8981\u7d20\u3068\u306a\u308b\"Spout\"\u3068\"Bolt\"\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u3001\u3059\u306a\u308f\u3061\u3001\"Tuple\"\u306e\u632f\u308b\u821e\u3044\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001word(TestWordSpout) \u2192 exclaim1(ExclamationBolt) \u2192 exclaim2(ExclamationBolt)\u3068\u52d5\u4f5c\u3059\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\nExclamationTopology.scala\npackage storm.starter.topology\n\nimport backtype.storm.{ Config, LocalCluster, StormSubmitter }\nimport backtype.storm.testing.TestWordSpout\nimport backtype.storm.topology.TopologyBuilder\nimport backtype.storm.utils.Utils\n\nobject ExclamationTopology {\n  def main(args: Array[String]) {\n    import storm.starter.bolt.ExclamationBolt\n\n    val builder: TopologyBuilder = new TopologyBuilder()\n\n    builder.setSpout(\"word\", new TestWordSpout(), 10)\n    builder.setBolt(\"exclaim1\", new ExclamationBolt(), 3).shuffleGrouping(\"word\")\n    builder.setBolt(\"exclaim2\", new ExclamationBolt(), 2).shuffleGrouping(\"exclaim1\")\n\n    val config = new Config()\n    config.setDebug(true)\n\n    if (args != null && args.length > 0) {\n      config.setNumWorkers(3)\n      StormSubmitter.submitTopology(args(0), config, builder.createTopology())\n    } else {\n      val cluster: LocalCluster = new LocalCluster()\n      cluster.submitTopology(\"ExclamationTopology\", config, builder.createTopology())\n      Utils.sleep(5000)\n      cluster.killTopology(\"ExclamationTopology\")\n      cluster.shutdown()\n    }\n  }\n}\n\n\n\u3061\u306a\u307f\u306b\u3001Topology\u30e2\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f\u3001\u5f15\u6570\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3001\u30ed\u30fc\u30ab\u30eb\u30e2\u30fc\u30c9\u3068\u3057\u3066\u52d5\u4f5c\u3057\u3066\u3001\u5f15\u6570\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u30ea\u30e2\u30fc\u30c8\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u5b9f\u88c5\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\nStormSubmitter (Storm 0.10.0-SNAPSHOT API)\n(2) Spout\u3092\u3055\u3050\u3063\u3066\u307f\u308b\n\u5148\u307b\u3069\u306eTopology\u306b\u3066\u5b9a\u7fa9\u3055\u308c\u305fSpout\"TestWordSpout\"\u306f\u3001Github\u30ea\u30dd\u30b8\u30c8\u30ea\"apache/storm\"\u306ejava\u30b3\u30fc\u30c9\u306b\u3066\u5b9f\u88c5\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\n\nTestWordSpout.java\npackage org.apache.storm.testing;\n\nimport org.apache.storm.Config;\nimport org.apache.storm.topology.OutputFieldsDeclarer;\nimport java.util.Map;\nimport org.apache.storm.spout.SpoutOutputCollector;\nimport org.apache.storm.task.TopologyContext;\nimport org.apache.storm.topology.base.BaseRichSpout;\nimport org.apache.storm.tuple.Fields;\nimport org.apache.storm.tuple.Values;\nimport org.apache.storm.utils.Utils;\nimport java.util.HashMap;\nimport java.util.Random;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n\npublic class TestWordSpout extends BaseRichSpout {\n    public static Logger LOG = LoggerFactory.getLogger(TestWordSpout.class);\n    boolean _isDistributed;\n    SpoutOutputCollector _collector;\n\n    public TestWordSpout() {\n        this(true);\n    }\n\n    public TestWordSpout(boolean isDistributed) {\n        _isDistributed = isDistributed;\n    }\n\n    public void open(Map conf, TopologyContext context, SpoutOutputCollector collector) {\n        _collector = collector;\n    }\n\n    public void close() {\n\n    }\n\n    public void nextTuple() {\n        Utils.sleep(100);\n        final String[] words = new String[] {\"nathan\", \"mike\", \"jackson\", \"golda\", \"bertels\"};\n        final Random rand = new Random();\n        final String word = words[rand.nextInt(words.length)];\n        _collector.emit(new Values(word));\n    }\n\n    public void ack(Object msgId) {\n\n    }\n\n    public void fail(Object msgId) {\n\n    }\n\n    public void declareOutputFields(OutputFieldsDeclarer declarer) {\n        declarer.declare(new Fields(\"word\"));\n    }\n\n    @Override\n    public Map<String, Object> getComponentConfiguration() {\n        if(!_isDistributed) {\n            Map<String, Object> ret = new HashMap<String, Object>();\n            ret.put(Config.TOPOLOGY_MAX_TASK_PARALLELISM, 1);\n            return ret;\n        } else {\n            return null;\n        }\n    }    \n}\n\n\nnextTuple\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u5b9a\u671f\u7684\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\u306b\u3088\u308a\u3001Tuple\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n(3) Bolt\u3092\u3055\u3050\u3063\u3066\u307f\u308b\nSpout: word \u2192 Bolt: exclaim1 \u2192 Bolt: exclaim2\u3068\u3044\u3046Tuple\u51e6\u7406\u306b\u304a\u3044\u3066\u3001Bolt\u52d5\u4f5c\u306f\u3001ExclamationBolt\u30af\u30e9\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\n\nExclamationBolt\npackage storm.starter.bolt\n\nimport backtype.storm.task.{ OutputCollector, TopologyContext }\nimport backtype.storm.topology.base.BaseRichBolt\nimport backtype.storm.topology.OutputFieldsDeclarer\nimport backtype.storm.tuple.{ Fields, Tuple, Values }\nimport java.util.{ Map => JMap }\n\nclass ExclamationBolt extends BaseRichBolt {\n  var collector: OutputCollector = _\n\n  override def prepare(config: JMap[_, _], context: TopologyContext, collector: OutputCollector) {\n    this.collector = collector\n  }\n\n  override def execute(tuple: Tuple) {\n    this.collector.emit(tuple, new Values(Exclaimer.exclaim(tuple.getString(0))))\n    this.collector.ack(tuple)\n  }\n\n  override def declareOutputFields(declarer: OutputFieldsDeclarer) {\n    declarer.declare(new Fields(\"word\"))\n  }\n}\n\n\n\u306a\u304a\u3001Bolt:exclaim1\u3067\u306f\u3001Tuple\u3092\u53d7\u3051\u53d6\u308b\u3054\u3068\u306b\u3001execute\u30e1\u30bd\u30c3\u30c9\u304c\u8d77\u52d5\u3055\u308c\u307e\u3059\u3002\n\u6b21\u306eBolt:exclaim2\u306b\u5f15\u304d\u6e21\u3059\u306b\u3042\u305f\u3063\u3066\u3001\"!!!\"\u306e\u6587\u5b57\u5217\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001Tuple\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u793a\u3059\u3001ack\u30e1\u30bd\u30c3\u30c9\u304c\u8d77\u52d5\u3055\u308c\u307e\u3059\u3002\n\nExclaimer.scala\npackage storm.starter.bolt\n\nobject Exclaimer {\n  def exclaim(s: String): String = {\n    s + \"!!!\"\n  }\n}\n\n\n\u5b9f\u969b\u306e\"!!!\"\u306e\u6587\u5b57\u5217\u306e\u8ffd\u52a0\u306f\u3001exclaim\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u65bd\u3055\u308c\u307e\u3059\u3002\n\u306a\u304a\u3001Bolt: exclaim2\u3067\u3082\u3001ExclamationBolt\u30af\u30e9\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u52d5\u4f5c\u306f\u540c\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u2b1b\ufe0e \u7d42\u308f\u308a\u306b\n\u4eca\u56de\u3001Apache Storm\u3067\u306emulti-language\u5bfe\u5fdc\u3068\u3057\u3066\u3092Scala\u7248Bolt\u30b5\u30f3\u30d7\u30eb\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\nScala\u7248Bolt\u30b5\u30f3\u30d7\u30eb\u3067\u3082\u3001Apache Storm\u306e\u57fa\u672c\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u524d\u56de\u306e\u30d6\u30ed\u30b0\u8a18\u4e8b\u300c[Mac OS X\u74b0\u5883\u3067\u3001Apache Storm\u306e\u57fa\u672c\u52d5\u4f5c\u3092\u8a66\u3057\u3066\u307f\u308b](http://qiita.com/ttsubo/items/beafeb62190cb35593b0)\u300d\u306e\u3064\u3065\u304d\u3067\u3059\u3002\nApache Storm\u306f\u3001[multi-language\u5bfe\u5fdc](\nhttp://storm.apache.org/documentation/Multilang-protocol.html)\u306a\u306e\u3067\u3001\"Scala\u7248 storm-starter\"\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n#\u2b1b\ufe0e Scala\u7248 storm-starter\u3092\u69cb\u7bc9\u3059\u308b\n\n+ Github\u304b\u3089\u3001Scala\u7248 storm-starter\u30ea\u30dd\u30b8\u30c8\u30ea\u60c5\u5831\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\u3082\u3068\u3082\u3068\u306f\u3001[paulfryzel/scala-storm-starter](https://github.com/paulfryzel/scala-storm-starter)\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\n\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3001\u6700\u65b0\u7248\u306eStorm\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u4e00\u90e8\u4fee\u6b63\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n```\n$ git clone https://github.com/ttsubo/scala-storm-starter.git\n$ cd scala-storm-starter/\n$ git checkout sample\n$ brew install sbt\n$ sbt compile package assembly\n```\n\n+ <b>\"Nimbus\"</b>\u3092\u8d77\u52d5\u3057\u307e\u3059\n\n```\n$ storm nimbus\nRunning: java -server -Ddaemon.name=nimbus -Dstorm.options= -Dstorm.home=/usr/local/apache-storm-0.10.0 -Dstorm.log.dir=/usr/local/apache-storm-0.10.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /usr/local/apache-storm-0.10.0/lib/asm-4.0.jar:/usr/local/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/usr/local/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/usr/local/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/usr/local/apache-storm-0.10.0/lib/kryo-2.21.jar:/usr/local/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/usr/local/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/usr/local/apache-storm-0.10.0/lib/minlog-1.2.jar:/usr/local/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/usr/local/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/usr/local/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/usr/local/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/usr/local/storm/conf -Xmx1024m -Dlogfile.name=nimbus.log -Dlog4j.configurationFile=/usr/local/apache-storm-0.10.0/log4j2/cluster.xml backtype.storm.daemon.nimbus\n```\n\n+ <b>\"Supervisor\"</b>\u3092\u8d77\u52d5\u3057\u307e\u3059\n\n```\n$ storm supervisor\nRunning: java -server -Ddaemon.name=supervisor -Dstorm.options= -Dstorm.home=/usr/local/apache-storm-0.10.0 -Dstorm.log.dir=/usr/local/apache-storm-0.10.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /usr/local/apache-storm-0.10.0/lib/asm-4.0.jar:/usr/local/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/usr/local/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/usr/local/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/usr/local/apache-storm-0.10.0/lib/kryo-2.21.jar:/usr/local/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/usr/local/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/usr/local/apache-storm-0.10.0/lib/minlog-1.2.jar:/usr/local/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/usr/local/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/usr/local/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/usr/local/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/usr/local/storm/conf -Xmx256m -Dlogfile.name=supervisor.log -Dlog4j.configurationFile=/usr/local/apache-storm-0.10.0/log4j2/cluster.xml backtype.storm.daemon.supervisor\n```\n\n+ <b>\"UI\"</b>\u3092\u8d77\u52d5\u3057\u307e\u3059\n\n```\n$ storm ui\nRunning: java -server -Ddaemon.name=ui -Dstorm.options= -Dstorm.home=/usr/local/apache-storm-0.10.0 -Dstorm.log.dir=/usr/local/apache-storm-0.10.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /usr/local/apache-storm-0.10.0/lib/asm-4.0.jar:/usr/local/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/usr/local/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/usr/local/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/usr/local/apache-storm-0.10.0/lib/kryo-2.21.jar:/usr/local/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/usr/local/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/usr/local/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/usr/local/apache-storm-0.10.0/lib/minlog-1.2.jar:/usr/local/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/usr/local/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/usr/local/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/usr/local/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/usr/local/apache-storm-0.10.0:/usr/local/storm/conf -Xmx768m -Dlogfile.name=ui.log -Dlog4j.configurationFile=/usr/local/apache-storm-0.10.0/log4j2/cluster.xml backtype.storm.ui.core\n```\n\n+ \"ExclamationTopology\"\u3092\u30ed\u30fc\u30ab\u30eb\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3055\u305b\u307e\u3059\u3002\n\n```\n$ storm jar target/scala-2.11/scala-storm-starter-assembly-0.0.2-SNAPSHOT.jar storm.starter.topology.ExclamationTopology\n\n...(snip)\n\n6159 [Thread-36-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6162 [Thread-36-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 4 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6163 [Thread-38-word] INFO  b.s.d.task - Emitting: word default [jackson]\n6168 [Thread-38-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:14, stream: default, id: {}, [jackson]\n6171 [Thread-40-exclaim1] INFO  b.s.d.executor - Processing received message FOR 4 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6172 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:14, stream: default, id: {}, [jackson]\n6174 [Thread-24-word] INFO  b.s.d.task - Emitting: word default [jackson]\n6174 [Thread-10-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6174 [Thread-24-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:9, stream: default, id: {}, [jackson]\n6174 [Thread-10-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 4 TUPLE: source: word:8, stream: default, id: {}, [bertels]\n6174 [Thread-42-word] INFO  b.s.d.task - Emitting: word default [jackson]\n6174 [Thread-42-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:15, stream: default, id: {}, [jackson]\n6174 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:9, stream: default, id: {}, [jackson]\n6179 [Thread-26-word] INFO  b.s.d.task - Emitting: word default [golda]\n6179 [Thread-26-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:11, stream: default, id: {}, [golda]\n6190 [Thread-12-word] INFO  b.s.d.task - Emitting: word default [golda]\n6190 [Thread-12-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:12, stream: default, id: {}, [golda]\n6200 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [jackson!!!]\n6200 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [jackson!!!]\n6200 [Thread-40-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [jackson!!!]\n6201 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:9, stream: default, id: {}, [jackson]\n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 4 TIME:  TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:9, stream: default, id: {}, [jackson] TASK: 2 DELTA: \n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:10, stream: default, id: {}, [bertels] TASK: 4 DELTA: \n6201 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:14, stream: default, id: {}, [jackson]\n6201 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [jackson!!!]\n6201 [Thread-40-exclaim1] INFO  b.s.d.executor - Processing received message FOR 4 TUPLE: source: word:8, stream: default, id: {}, [bertels]\n6201 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6201 [Thread-40-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6201 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [jackson!!!!!!]\n6201 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:11, stream: default, id: {}, [golda]\n6201 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:14, stream: default, id: {}, [jackson] TASK: 3 DELTA: \n6202 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [jackson!!!]\n6202 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [golda!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:15, stream: default, id: {}, [jackson]\n6202 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [jackson!!!] TASK: 5 DELTA: \n6202 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [jackson!!!]\n6202 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6202 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n6202 [Thread-40-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6202 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6202 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:4, stream: default, id: {}, [bertels!!!] TASK: 6 DELTA: \n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:15, stream: default, id: {}, [jackson]\n6202 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:15, stream: default, id: {}, [jackson] TASK: 3 DELTA: \n6202 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [jackson!!!!!!]\n6202 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:12, stream: default, id: {}, [golda]\n6202 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:11, stream: default, id: {}, [golda]\n6203 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:11, stream: default, id: {}, [golda] TASK: 2 DELTA: \n6203 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [golda!!!]\n6202 [Thread-40-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 4 TIME:  TUPLE: source: word:8, stream: default, id: {}, [bertels]\n6203 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6203 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [golda!!!]\n6203 [Thread-40-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:8, stream: default, id: {}, [bertels] TASK: 4 DELTA: \n6203 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n6203 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:12, stream: default, id: {}, [golda]\n6203 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:4, stream: default, id: {}, [bertels!!!]\n6204 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:12, stream: default, id: {}, [golda] TASK: 3 DELTA: \n6204 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:4, stream: default, id: {}, [bertels!!!] TASK: 5 DELTA: \n6204 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6204 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6204 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [jackson!!!] TASK: 6 DELTA: \n6204 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [jackson!!!!!!]\n6204 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6204 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [jackson!!!]\n6204 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [golda!!!!!!]\n6205 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [jackson!!!] TASK: 5 DELTA: \n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [golda!!!] TASK: 6 DELTA: \n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [golda!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [golda!!!!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [golda!!!]\n6205 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [golda!!!] TASK: 6 DELTA: \n6209 [Thread-30-word] INFO  b.s.d.task - Emitting: word default [nathan]\n6209 [Thread-16-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6210 [Thread-16-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:7, stream: default, id: {}, [bertels]\n6210 [Thread-30-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:16, stream: default, id: {}, [nathan]\n6210 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:7, stream: default, id: {}, [bertels]\n6210 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:16, stream: default, id: {}, [nathan]\n6211 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6211 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [nathan!!!]\n6212 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [nathan!!!]\n6212 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:16, stream: default, id: {}, [nathan]\n6213 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:16, stream: default, id: {}, [nathan] TASK: 2 DELTA: \n6212 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6214 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:7, stream: default, id: {}, [bertels]\n6215 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:7, stream: default, id: {}, [bertels] TASK: 3 DELTA: \n6215 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:2, stream: default, id: {}, [nathan!!!]\n6216 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [nathan!!!!!!]\n6218 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [nathan!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [nathan!!!] TASK: 5 DELTA: \n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - Processing received message FOR 5 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 5 TIME:  TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6219 [Thread-34-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:3, stream: default, id: {}, [bertels!!!] TASK: 5 DELTA: \n6221 [Thread-32-word] INFO  b.s.d.task - Emitting: word default [golda]\n6222 [Thread-32-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 2 TUPLE: source: word:13, stream: default, id: {}, [golda]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - Processing received message FOR 2 TUPLE: source: word:13, stream: default, id: {}, [golda]\n6223 [Thread-14-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [golda!!!]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 2 TIME:  TUPLE: source: word:13, stream: default, id: {}, [golda]\n6223 [Thread-14-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:13, stream: default, id: {}, [golda] TASK: 2 DELTA: \n6224 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6224 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [golda!!!!!!]\n6224 [Thread-22-exclaim2] INFO  b.s.d.executor - BOLT ack TASK: 6 TIME:  TUPLE: source: exclaim1:2, stream: default, id: {}, [golda!!!]\n6224 [Thread-22-exclaim2] INFO  b.s.d.executor - Execute done TUPLE source: exclaim1:2, stream: default, id: {}, [golda!!!] TASK: 6 DELTA: \n6266 [Thread-36-word] INFO  b.s.d.task - Emitting: word default [bertels]\n6266 [Thread-36-word] INFO  b.s.d.executor - TRANSFERING tuple TASK: 3 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6266 [Thread-18-exclaim1] INFO  b.s.d.executor - Processing received message FOR 3 TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6266 [Thread-18-exclaim1] INFO  b.s.d.task - Emitting: exclaim1 default [bertels!!!]\n6266 [Thread-18-exclaim1] INFO  b.s.d.executor - TRANSFERING tuple TASK: 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6266 [Thread-18-exclaim1] INFO  b.s.d.executor - BOLT ack TASK: 3 TIME:  TUPLE: source: word:10, stream: default, id: {}, [bertels]\n6267 [Thread-22-exclaim2] INFO  b.s.d.executor - Processing received message FOR 6 TUPLE: source: exclaim1:3, stream: default, id: {}, [bertels!!!]\n6267 [Thread-18-exclaim1] INFO  b.s.d.executor - Execute done TUPLE source: word:10, stream: default, id: {}, [bertels] TASK: 3 DELTA: 1\n6267 [Thread-22-exclaim2] INFO  b.s.d.task - Emitting: exclaim2 default [bertels!!!!!!]\n```\n\n\u4ee5\u4e0a\u3088\u308a\u3001\u524d\u56de\u3068\u540c\u69d8\u306b\u3001word(TestWordSpout) \u2192 exclaim1(ExclamationBolt) \u2192 exclaim2(ExclamationBolt)\u3068\u52d5\u4f5c\u3059\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u306b\u304a\u3044\u3066\u3001\"bertels\u201d \u2192 \u201dbertels!!!\u201d \u2192 \u201dbertels!!!!!!\"\u306e\u3088\u3046\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u69d8\u5b50\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n#\u2b1b\ufe0e Storm\u52d5\u4f5c\u306b\u304a\u3051\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u3063\u3066\u3001\u3069\u3046\u306a\u3063\u3066\u3044\u308b\u306e\u304b\uff1f\n\n<b>(1) Topology\u5b9a\u7fa9\u3092\u3055\u3050\u3063\u3066\u307f\u308b\n\n\u307e\u305a\u3001[TopologyBuilder\u30af\u30e9\u30b9](https://github.com/apache/storm/blob/master/storm-core/src/jvm/org/apache/storm/topology/TopologyBuilder.java)\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3068\u3053\u308d\u304b\u3089\u306f\u3058\u307e\u308a\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001Topology\u69cb\u6210\u8981\u7d20\u3068\u306a\u308b\"Spout\"\u3068\"Bolt\"\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u3001\u3059\u306a\u308f\u3061\u3001\"Tuple\"\u306e\u632f\u308b\u821e\u3044\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001word(TestWordSpout) \u2192 exclaim1(ExclamationBolt) \u2192 exclaim2(ExclamationBolt)\u3068\u52d5\u4f5c\u3059\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n```scala:ExclamationTopology.scala\npackage storm.starter.topology\n\nimport backtype.storm.{ Config, LocalCluster, StormSubmitter }\nimport backtype.storm.testing.TestWordSpout\nimport backtype.storm.topology.TopologyBuilder\nimport backtype.storm.utils.Utils\n\nobject ExclamationTopology {\n  def main(args: Array[String]) {\n    import storm.starter.bolt.ExclamationBolt\n\n    val builder: TopologyBuilder = new TopologyBuilder()\n\n    builder.setSpout(\"word\", new TestWordSpout(), 10)\n    builder.setBolt(\"exclaim1\", new ExclamationBolt(), 3).shuffleGrouping(\"word\")\n    builder.setBolt(\"exclaim2\", new ExclamationBolt(), 2).shuffleGrouping(\"exclaim1\")\n\n    val config = new Config()\n    config.setDebug(true)\n\n    if (args != null && args.length > 0) {\n      config.setNumWorkers(3)\n      StormSubmitter.submitTopology(args(0), config, builder.createTopology())\n    } else {\n      val cluster: LocalCluster = new LocalCluster()\n      cluster.submitTopology(\"ExclamationTopology\", config, builder.createTopology())\n      Utils.sleep(5000)\n      cluster.killTopology(\"ExclamationTopology\")\n      cluster.shutdown()\n    }\n  }\n}\n```\n\u3061\u306a\u307f\u306b\u3001Topology\u30e2\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f\u3001\u5f15\u6570\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3001\u30ed\u30fc\u30ab\u30eb\u30e2\u30fc\u30c9\u3068\u3057\u3066\u52d5\u4f5c\u3057\u3066\u3001\u5f15\u6570\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u30ea\u30e2\u30fc\u30c8\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u5b9f\u88c5\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\n[StormSubmitter (Storm 0.10.0-SNAPSHOT API)](https://storm.apache.org/javadoc/apidocs/backtype/storm/StormSubmitter.html)\n\n\n<b>(2) Spout</b>\u3092\u3055\u3050\u3063\u3066\u307f\u308b\n\n\u5148\u307b\u3069\u306eTopology\u306b\u3066\u5b9a\u7fa9\u3055\u308c\u305fSpout\"TestWordSpout\"\u306f\u3001[Github\u30ea\u30dd\u30b8\u30c8\u30ea\"apache/storm\"](https://github.com/apache/storm/blob/master/storm-core/src/jvm/org/apache/storm/testing/TestWordSpout.java)\u306ejava\u30b3\u30fc\u30c9\u306b\u3066\u5b9f\u88c5\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\n\n```java:TestWordSpout.java\npackage org.apache.storm.testing;\n\nimport org.apache.storm.Config;\nimport org.apache.storm.topology.OutputFieldsDeclarer;\nimport java.util.Map;\nimport org.apache.storm.spout.SpoutOutputCollector;\nimport org.apache.storm.task.TopologyContext;\nimport org.apache.storm.topology.base.BaseRichSpout;\nimport org.apache.storm.tuple.Fields;\nimport org.apache.storm.tuple.Values;\nimport org.apache.storm.utils.Utils;\nimport java.util.HashMap;\nimport java.util.Random;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n\npublic class TestWordSpout extends BaseRichSpout {\n    public static Logger LOG = LoggerFactory.getLogger(TestWordSpout.class);\n    boolean _isDistributed;\n    SpoutOutputCollector _collector;\n\n    public TestWordSpout() {\n        this(true);\n    }\n\n    public TestWordSpout(boolean isDistributed) {\n        _isDistributed = isDistributed;\n    }\n        \n    public void open(Map conf, TopologyContext context, SpoutOutputCollector collector) {\n        _collector = collector;\n    }\n    \n    public void close() {\n        \n    }\n        \n    public void nextTuple() {\n        Utils.sleep(100);\n        final String[] words = new String[] {\"nathan\", \"mike\", \"jackson\", \"golda\", \"bertels\"};\n        final Random rand = new Random();\n        final String word = words[rand.nextInt(words.length)];\n        _collector.emit(new Values(word));\n    }\n    \n    public void ack(Object msgId) {\n\n    }\n\n    public void fail(Object msgId) {\n        \n    }\n    \n    public void declareOutputFields(OutputFieldsDeclarer declarer) {\n        declarer.declare(new Fields(\"word\"));\n    }\n\n    @Override\n    public Map<String, Object> getComponentConfiguration() {\n        if(!_isDistributed) {\n            Map<String, Object> ret = new HashMap<String, Object>();\n            ret.put(Config.TOPOLOGY_MAX_TASK_PARALLELISM, 1);\n            return ret;\n        } else {\n            return null;\n        }\n    }    \n}\n```\nnextTuple\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u5b9a\u671f\u7684\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\u306b\u3088\u308a\u3001Tuple\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n<b>(3) Bolt</b>\u3092\u3055\u3050\u3063\u3066\u307f\u308b\n\nSpout: word \u2192 Bolt: exclaim1 \u2192 Bolt: exclaim2\u3068\u3044\u3046Tuple\u51e6\u7406\u306b\u304a\u3044\u3066\u3001Bolt\u52d5\u4f5c\u306f\u3001ExclamationBolt\u30af\u30e9\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\n\n```scala:ExclamationBolt\npackage storm.starter.bolt\n\nimport backtype.storm.task.{ OutputCollector, TopologyContext }\nimport backtype.storm.topology.base.BaseRichBolt\nimport backtype.storm.topology.OutputFieldsDeclarer\nimport backtype.storm.tuple.{ Fields, Tuple, Values }\nimport java.util.{ Map => JMap }\n\nclass ExclamationBolt extends BaseRichBolt {\n  var collector: OutputCollector = _\n\n  override def prepare(config: JMap[_, _], context: TopologyContext, collector: OutputCollector) {\n    this.collector = collector\n  }\n\n  override def execute(tuple: Tuple) {\n    this.collector.emit(tuple, new Values(Exclaimer.exclaim(tuple.getString(0))))\n    this.collector.ack(tuple)\n  }\n\n  override def declareOutputFields(declarer: OutputFieldsDeclarer) {\n    declarer.declare(new Fields(\"word\"))\n  }\n}\n```\n\u306a\u304a\u3001Bolt:exclaim1\u3067\u306f\u3001Tuple\u3092\u53d7\u3051\u53d6\u308b\u3054\u3068\u306b\u3001execute\u30e1\u30bd\u30c3\u30c9\u304c\u8d77\u52d5\u3055\u308c\u307e\u3059\u3002\n\u6b21\u306eBolt:exclaim2\u306b\u5f15\u304d\u6e21\u3059\u306b\u3042\u305f\u3063\u3066\u3001\"!!!\"\u306e\u6587\u5b57\u5217\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001Tuple\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u793a\u3059\u3001ack\u30e1\u30bd\u30c3\u30c9\u304c\u8d77\u52d5\u3055\u308c\u307e\u3059\u3002\n\n```scala:Exclaimer.scala\npackage storm.starter.bolt\n\nobject Exclaimer {\n  def exclaim(s: String): String = {\n    s + \"!!!\"\n  }\n}\n```\n\u5b9f\u969b\u306e\"!!!\"\u306e\u6587\u5b57\u5217\u306e\u8ffd\u52a0\u306f\u3001exclaim\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u65bd\u3055\u308c\u307e\u3059\u3002\n\u306a\u304a\u3001Bolt: exclaim2\u3067\u3082\u3001ExclamationBolt\u30af\u30e9\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u52d5\u4f5c\u306f\u540c\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n#\u2b1b\ufe0e \u7d42\u308f\u308a\u306b\n\u4eca\u56de\u3001Apache Storm\u3067\u306emulti-language\u5bfe\u5fdc\u3068\u3057\u3066\u3092Scala\u7248Bolt\u30b5\u30f3\u30d7\u30eb\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\nScala\u7248Bolt\u30b5\u30f3\u30d7\u30eb\u3067\u3082\u3001Apache Storm\u306e\u57fa\u672c\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n", "tags": ["storm", "bigdata"]}