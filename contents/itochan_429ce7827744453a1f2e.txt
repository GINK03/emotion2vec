{"tags": ["Munin"], "context": " More than 1 year has passed since last update.Munin\u306b\u306fSMART\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u3089\u304b\u3058\u3081\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u666e\u901a\u306b\u8a2d\u5b9a\u3057\u3066\u3082\u30c7\u30d0\u30a4\u30b9\u304c /dev/sdX \u306e\u5f62\u5f0f\u3067\u6307\u5b9a\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u3060\u3068\u30c7\u30a3\u30b9\u30af\u3092\u629c\u304d\u5dee\u3057\u3057\u305f\u308a\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u540d\u304c\u5909\u308f\u3063\u305f\u3089\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u3059\u3002\n/dev/disk/by-id \u4ee5\u4e0b\u3067\u3042\u308c\u3070\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u30c7\u30d0\u30a4\u30b9\u540d\u304c\u5909\u308f\u3063\u3066\u3082\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306e\u5411\u304f\u5148\u304c\u5909\u308f\u308a\u3001\u30c7\u30a3\u30b9\u30af\u69cb\u6210\u304c\u5909\u308f\u3063\u3066\u3082\u4eca\u307e\u3067\u306e\u30ed\u30b0\u304c\u5909\u308f\u3089\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nmunin-node-configure --shell \u306a\u3069\u3092\u4f7f\u3046\u3068\u3001smart_sda\u3068\u3044\u3063\u305f\u98a8\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u304c\u8cbc\u3089\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n% munin-node-configure --shell\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sda'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdb'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdc'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdd'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sde'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdf'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdg'\n\nmunin-node-configure \u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\nmunin-node-configure\u30b3\u30de\u30f3\u30c9\u3092\u899a\u3048\u305f - \u30cc\u30ad\u306e\u3084\u308b\u6c17\u306e\u306a\u3044\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0\n\u306a\u305c\u3053\u3046\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3057\u3087\u3046\u304b\u3002\nMunin\u306eSMART\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5b9f\u4f53\uff08\u3053\u306e\u5834\u5408\u3060\u3068 /usr/share/munin/plugins/smart_\uff09\u3092\u898b\u308b\u3068\u308f\u304b\u308b\u306e\u3067\u3059\u304c\u3001\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2\u4ee5\u964d\u306e\u6587\u5b57\u3092\u898b\u3066\u5224\u65ad\u3057\u3066\u3044\u307e\u3059\u3002\nPython\u3067\u66f8\u304b\u308c\u305f\u30b3\u30fc\u30c9\u306e\u4e00\u90e8\u304b\u3089\u305d\u308c\u3092\u8aad\u307f\u89e3\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nsmart_\n# (\u7701\u7565)\n\ndef read_values(hard_drive):\n    global smart_values, emptyoutput\n    try :\n        verboselog('Reading S.M.A.R.T values')\n        os.putenv('LC_ALL','C')\n        device='/dev/'+hard_drive\n        if not os.path.exists(device):\n            device='/dev/disk/by-id/'+hard_drive\n\n# (\u7701\u7565)\n\n\nhttps://github.com/munin-monitoring/munin/blob/100128eb1ae067c426466d43f3269a52b651b706/plugins/node.d/smart_.in#L112-L119 \u3088\u308a\u5f15\u7528\nAuthor:\n(C) 2004-2009 Nicolas Stransky Nico@stransky.cx\n(C) 2008 Gabriele Pohl contact@dipohl.de\nLicense: GPLv2\n\nsmart_sda \u3068\u3044\u3046\u540d\u524d\u3067\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u5f35\u308b\u3068\u3001/dev/sda \u306eSMART\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\u304c\u3001smart_ata-ST2000DM001-1CH164_Z1E4PKGL \u306e\u3088\u3046\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u5f35\u308b\u3068 /dev/disk/by-id \u4ee5\u4e0b\u3092\u898b\u308b\u3068\u3044\u3046\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\n\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u3001\u52dd\u624b\u306b /dev/disk/by-id \u4ee5\u4e0b\u306eHDD\u306e\u578b\u756a\u3068\u30b7\u30ea\u30a2\u30eb\u304b\u3089Munin\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u5f35\u3063\u3066\u304f\u308c\u307e\u3059\uff08Ubuntu Server 14.04\u4e0a\u3067bash\u3068zsh\u3067\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\uff09\u3002\nsudo /bin/ls -b -1 /dev/disk/by-id/ata-*[^-part]? | xargs -n 1 basename | sudo xargs -I % -t -n 1 ln -s /usr/share/munin/plugins/smart_ /etc/munin/plugins/smart_%\n\n\u74b0\u5883\u306b\u3088\u3063\u3066\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u3042\u308b\u5834\u6240\u304c\u7570\u306a\u308b\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u5168\u7136\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u304c\u9055\u3046\u74b0\u5883\u304c\u3042\u308b\u5834\u5408\u30b3\u30e1\u30f3\u30c8\u3092\u9802\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\uff09\u3002\n\u3053\u308c\u3067\u3001HDD\u306e\u578b\u756a\u3068\u30b7\u30ea\u30a2\u30eb\u3067SMART\u306e\u30b0\u30e9\u30d5\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nitochan@kurokami:/etc/munin/plugins% ll smart_*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-KINGSTON_SV100S264G_64GB60075751 -> /usr/share/munin/plugins/smart_*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-ST2000DM001-1CH164_Z1E4PKGL -> /usr/share/munin/plugins/smart_*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EARS-00MVWB0_WD-WCAZ20023827 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WCC300347783 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WCC300366117 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WMC300043508 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WMC300228224 -> /usr/share/munin/plugins/smart*\n\n\n\nMunin\u306b\u306fSMART\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u3089\u304b\u3058\u3081\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u666e\u901a\u306b\u8a2d\u5b9a\u3057\u3066\u3082\u30c7\u30d0\u30a4\u30b9\u304c ``/dev/sdX`` \u306e\u5f62\u5f0f\u3067\u6307\u5b9a\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u3060\u3068\u30c7\u30a3\u30b9\u30af\u3092\u629c\u304d\u5dee\u3057\u3057\u305f\u308a\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u540d\u304c\u5909\u308f\u3063\u305f\u3089\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u3059\u3002\n``/dev/disk/by-id`` \u4ee5\u4e0b\u3067\u3042\u308c\u3070\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u30c7\u30d0\u30a4\u30b9\u540d\u304c\u5909\u308f\u3063\u3066\u3082\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306e\u5411\u304f\u5148\u304c\u5909\u308f\u308a\u3001\u30c7\u30a3\u30b9\u30af\u69cb\u6210\u304c\u5909\u308f\u3063\u3066\u3082\u4eca\u307e\u3067\u306e\u30ed\u30b0\u304c\u5909\u308f\u3089\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n``munin-node-configure --shell`` \u306a\u3069\u3092\u4f7f\u3046\u3068\u3001smart_sda\u3068\u3044\u3063\u305f\u98a8\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u304c\u8cbc\u3089\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```shell-session\n% munin-node-configure --shell\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sda'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdb'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdc'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdd'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sde'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdf'\nln -s '/usr/share/munin/plugins/smart_' '/etc/munin/plugins/smart_sdg'\n```\n\nmunin-node-configure \u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\n[munin-node-configure\u30b3\u30de\u30f3\u30c9\u3092\u899a\u3048\u305f - \u30cc\u30ad\u306e\u3084\u308b\u6c17\u306e\u306a\u3044\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0](http://d.hatena.ne.jp/editnuki/20110726/1311649985)\n\n\u306a\u305c\u3053\u3046\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3057\u3087\u3046\u304b\u3002\nMunin\u306eSMART\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5b9f\u4f53\uff08\u3053\u306e\u5834\u5408\u3060\u3068 ``/usr/share/munin/plugins/smart_``\uff09\u3092\u898b\u308b\u3068\u308f\u304b\u308b\u306e\u3067\u3059\u304c\u3001\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2\u4ee5\u964d\u306e\u6587\u5b57\u3092\u898b\u3066\u5224\u65ad\u3057\u3066\u3044\u307e\u3059\u3002\nPython\u3067\u66f8\u304b\u308c\u305f\u30b3\u30fc\u30c9\u306e\u4e00\u90e8\u304b\u3089\u305d\u308c\u3092\u8aad\u307f\u89e3\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n> ```python:smart_\n> # (\u7701\u7565)\n> \n> def read_values(hard_drive):\n>     global smart_values, emptyoutput\n>     try :\n>         verboselog('Reading S.M.A.R.T values')\n>         os.putenv('LC_ALL','C')\n>         device='/dev/'+hard_drive\n>         if not os.path.exists(device):\n>             device='/dev/disk/by-id/'+hard_drive\n> \n> # (\u7701\u7565)\n> ```\n> https://github.com/munin-monitoring/munin/blob/100128eb1ae067c426466d43f3269a52b651b706/plugins/node.d/smart_.in#L112-L119 \u3088\u308a\u5f15\u7528\n> \n> Author:\n> (C) 2004-2009 Nicolas Stransky <Nico@stransky.cx>\n> (C) 2008 Gabriele Pohl <contact@dipohl.de>\n> \n> License: GPLv2\n\nsmart_sda \u3068\u3044\u3046\u540d\u524d\u3067\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u5f35\u308b\u3068\u3001``/dev/sda`` \u306eSMART\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\u304c\u3001``smart_ata-ST2000DM001-1CH164_Z1E4PKGL`` \u306e\u3088\u3046\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u5f35\u308b\u3068 ``/dev/disk/by-id`` \u4ee5\u4e0b\u3092\u898b\u308b\u3068\u3044\u3046\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\n\n\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u3001\u52dd\u624b\u306b ``/dev/disk/by-id`` \u4ee5\u4e0b\u306eHDD\u306e\u578b\u756a\u3068\u30b7\u30ea\u30a2\u30eb\u304b\u3089Munin\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u5f35\u3063\u3066\u304f\u308c\u307e\u3059\uff08Ubuntu Server 14.04\u4e0a\u3067bash\u3068zsh\u3067\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\uff09\u3002\n\n```shell-session\nsudo /bin/ls -b -1 /dev/disk/by-id/ata-*[^-part]? | xargs -n 1 basename | sudo xargs -I % -t -n 1 ln -s /usr/share/munin/plugins/smart_ /etc/munin/plugins/smart_%\n```\n\n\u74b0\u5883\u306b\u3088\u3063\u3066\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u3042\u308b\u5834\u6240\u304c\u7570\u306a\u308b\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u5168\u7136\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u304c\u9055\u3046\u74b0\u5883\u304c\u3042\u308b\u5834\u5408\u30b3\u30e1\u30f3\u30c8\u3092\u9802\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\uff09\u3002\n\n\u3053\u308c\u3067\u3001HDD\u306e\u578b\u756a\u3068\u30b7\u30ea\u30a2\u30eb\u3067SMART\u306e\u30b0\u30e9\u30d5\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```shell-session\nitochan@kurokami:/etc/munin/plugins% ll smart_*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-KINGSTON_SV100S264G_64GB60075751 -> /usr/share/munin/plugins/smart_*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-ST2000DM001-1CH164_Z1E4PKGL -> /usr/share/munin/plugins/smart_*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EARS-00MVWB0_WD-WCAZ20023827 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WCC300347783 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WCC300366117 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WMC300043508 -> /usr/share/munin/plugins/smart*\nlrwxrwxrwx 1 root root 31 Aug 23 22:43 smart_ata-WDC_WD20EFRX-68AX9N0_WD-WMC300228224 -> /usr/share/munin/plugins/smart*\n```\n\n![smart_ata_ST2000DM001_1CH164_Z1E4PKGL-day.png](https://qiita-image-store.s3.amazonaws.com/0/15182/a399529b-8a61-5bdc-5a33-a2d2d298f2d4.png \"smart_ata_ST2000DM001_1CH164_Z1E4PKGL-day.png\")\n"}