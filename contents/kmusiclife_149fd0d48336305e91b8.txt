{"tags": ["Symfony2"], "context": " More than 1 year has passed since last update.Symfony2\u306b\u306f\u30da\u30fc\u30b8\u30e3\u30fc\u304c\u6a19\u6e96\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3068\u8a00\u3063\u3066\u3082\u6a19\u6e96\u306b\u3064\u3051\u308b\u304f\u3089\u3044\u306e\u6a5f\u80fd\u3067\u306f\u306a\u3044\u3068\u3044\u3046\u306e\u3082\u5b9f\u969b\u3067\u3002\n\u307e\u305a\u306f\u6e96\u5099\u304b\u3089\u3002config.yml\u306b\u306f\u3053\u3046\u306e\u3088\u3046\u306b\u767b\u9332\nservices:\n    pager:\n        class: Acme\\BlogBundle\\Classes\\Pager\n        arguments: [\"@service_container\", \"@doctrine.orm.entity_manager\"]\n        scope: request\n\nAcme\\BlogBundle\\Classes\\Pager \u306b Pager.php \u3092\u4f5c\u6210\u3057\u3066\u4e0b\u8a18\u306e\u5185\u5bb9\u306b\u3057\u307e\u3059\u3002\n<?php\n\nnamespace App\\BlogBundle\\Classes;\nuse Symfony\\Component\\Security\\Core\\SecurityContextInterface;\nuse Symfony\\Component\\OptionsResolver\\OptionsResolverInterface;\n\nclass Pager\n{\n\n    var $entityManager;\n    var $serviceContainer;\n\n    var $inc;\n    var $offset;\n    var $count;\n    var $is_next = true;\n    var $path;\n\n    public function __construct($serviceContainer, $entityManager)\n    {\n        $this->serviceContainer = $serviceContainer;\n        $this->entityManager = $entityManager;\n\n        $this->offset = $this->serviceContainer->get('request')->get('offset');\n        if(!$this->offset) $this->offset = 0;\n        if(!preg_match('/^\\d{1,}$/', $this->offset)) $this->offset = 0;\n\n    }\n    public function setPath($path){\n        $this->path = $path;\n    }\n    public function setInc($inc){\n        $this->inc = $inc;\n    }\n    public function getRepository($namespace, $where = array(), $orderby = array()){\n\n        $entities = $this->entityManager->getRepository($namespace)->findBy(\n            $where,\n            $orderby,\n            $this->inc,\n            $this->offset\n        );\n        $this->count = count($entities);\n        $this->is_next = $this->count >= $this->inc ? true : false;\n\n        return $entities;\n\n    }\n    public function getParameters(){\n\n        return array(\n            'next' => $this->offset + $this->inc,\n            'prev' => $this->offset - $this->inc,\n            'current' => $this->offset,\n            'is_next' => $this->is_next,\n            'inc' => $this->inc,\n            'count' => $this->count,\n            'path' => $this->path\n        );\n    }\n}\n\nAcme/BlogBundle/Blog/Resources/Views/Blog \u306b pager.parts.html.twig \u3092\u4fdd\u5b58\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u901a\u308a\n<p>\n{% if pager.prev >= 0 %}\n<a href=\"{{ path(pager.path, {'offset': pager.prev}) }}\" class=\"btn\">\u524d\u3078</a>\n{% endif %}\n\n{{ pager.current }}\u4ef6 \u304b\u3089 {{ pager.count }} \u4ef6\u3092\u8868\u793a\n\n{% if (pager.next >= 0 and pager.is_next) %}\n<a href=\"{{ path(pager.path, {'offset': pager.next}) }}\" class=\"btn\">\u6b21\u3078</a>\n{% endif %}\n</p>\n\n\u3053\u308c\u3067\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\u3067\u306fControeller\u3001Template\u306e\uff12\u7b87\u6240\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002\nController\u3067\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3002\n$pager = $this->get('pager');\n$pager->setInc(20); // 20\u4ef6\u8868\u793a\n$pager->setPath('blog'); // \u30da\u30fc\u30b8\u306erouting path\n\n$entities = $pager->getRepository('AcmeBlogBundle:Blog',array('createdUser' => $this->getUser()), array('id' => 'DESC')); /* namespace, where, orderby \u306e\u5f15\u6570\u3067\u3059 */\n\nreturn $this->render('AcmeBlogBundle:Blog:index.html.twig', array(\n    'pager' => $pager->getParameters(),\n    'entities' => $entities,\n));\n\nAcmeBlogBundle:Blog:index.html.twig\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u306f\u3053\u3046\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\n{% include 'AcmeBlogBundle:Blog:pager.parts.html.twig' %}\n\nSymfony2\u306b\u306f\u30da\u30fc\u30b8\u30e3\u30fc\u304c\u6a19\u6e96\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3068\u8a00\u3063\u3066\u3082\u6a19\u6e96\u306b\u3064\u3051\u308b\u304f\u3089\u3044\u306e\u6a5f\u80fd\u3067\u306f\u306a\u3044\u3068\u3044\u3046\u306e\u3082\u5b9f\u969b\u3067\u3002\n\n\u307e\u305a\u306f\u6e96\u5099\u304b\u3089\u3002config.yml\u306b\u306f\u3053\u3046\u306e\u3088\u3046\u306b\u767b\u9332\n\n```yaml\nservices:\n    pager:\n        class: Acme\\BlogBundle\\Classes\\Pager\n        arguments: [\"@service_container\", \"@doctrine.orm.entity_manager\"]\n        scope: request\n```\n\nAcme\\BlogBundle\\Classes\\Pager \u306b Pager.php \u3092\u4f5c\u6210\u3057\u3066\u4e0b\u8a18\u306e\u5185\u5bb9\u306b\u3057\u307e\u3059\u3002\n\n```php\n<?php\n\nnamespace App\\BlogBundle\\Classes;\nuse Symfony\\Component\\Security\\Core\\SecurityContextInterface;\nuse Symfony\\Component\\OptionsResolver\\OptionsResolverInterface;\n\nclass Pager\n{\n\n    var $entityManager;\n    var $serviceContainer;\n\n    var $inc;\n    var $offset;\n    var $count;\n    var $is_next = true;\n    var $path;\n\n    public function __construct($serviceContainer, $entityManager)\n    {\n        $this->serviceContainer = $serviceContainer;\n        $this->entityManager = $entityManager;\n\n        $this->offset = $this->serviceContainer->get('request')->get('offset');\n        if(!$this->offset) $this->offset = 0;\n        if(!preg_match('/^\\d{1,}$/', $this->offset)) $this->offset = 0;\n\n    }\n    public function setPath($path){\n        $this->path = $path;\n    }\n    public function setInc($inc){\n        $this->inc = $inc;\n    }\n    public function getRepository($namespace, $where = array(), $orderby = array()){\n\n        $entities = $this->entityManager->getRepository($namespace)->findBy(\n            $where,\n            $orderby,\n            $this->inc,\n            $this->offset\n        );\n        $this->count = count($entities);\n        $this->is_next = $this->count >= $this->inc ? true : false;\n\n        return $entities;\n\n    }\n    public function getParameters(){\n\n        return array(\n            'next' => $this->offset + $this->inc,\n            'prev' => $this->offset - $this->inc,\n            'current' => $this->offset,\n            'is_next' => $this->is_next,\n            'inc' => $this->inc,\n            'count' => $this->count,\n            'path' => $this->path\n        );\n    }\n}\n```\n\nAcme/BlogBundle/Blog/Resources/Views/Blog \u306b pager.parts.html.twig \u3092\u4fdd\u5b58\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u901a\u308a\n\n```html\n<p>\n{% if pager.prev >= 0 %}\n<a href=\"{{ path(pager.path, {'offset': pager.prev}) }}\" class=\"btn\">\u524d\u3078</a>\n{% endif %}\n\n{{ pager.current }}\u4ef6 \u304b\u3089 {{ pager.count }} \u4ef6\u3092\u8868\u793a\n\n{% if (pager.next >= 0 and pager.is_next) %}\n<a href=\"{{ path(pager.path, {'offset': pager.next}) }}\" class=\"btn\">\u6b21\u3078</a>\n{% endif %}\n</p>\n```\n\n\u3053\u308c\u3067\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\u3067\u306fControeller\u3001Template\u306e\uff12\u7b87\u6240\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002\n\nController\u3067\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3002\n\n```php\n$pager = $this->get('pager');\n$pager->setInc(20); // 20\u4ef6\u8868\u793a\n$pager->setPath('blog'); // \u30da\u30fc\u30b8\u306erouting path\n\n$entities = $pager->getRepository('AcmeBlogBundle:Blog',array('createdUser' => $this->getUser()), array('id' => 'DESC')); /* namespace, where, orderby \u306e\u5f15\u6570\u3067\u3059 */\n\nreturn $this->render('AcmeBlogBundle:Blog:index.html.twig', array(\n    'pager' => $pager->getParameters(),\n    'entities' => $entities,\n));\n```\n\nAcmeBlogBundle:Blog:index.html.twig\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u306f\u3053\u3046\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\n\n```php\n{% include 'AcmeBlogBundle:Blog:pager.parts.html.twig' %}\n```\n"}