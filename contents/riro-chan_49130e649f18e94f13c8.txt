{"context": "\u3053\u3093\u306a\u3093\u3067\u7c21\u5358\u306a\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u30b2\u30fc\u30e0\u304c\u4f5c\u308c\u307e\u3059\u3002\n\u4e00\u5ea6\u7686\u3055\u3093\u3082\u3084\u3063\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\n\nindex.html\n\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n\n    <title>test  </title>\n\n<style>\nhtml {\n  font-size: 62.5%;\n}\nbody {\n  color: #444;\n  background-color: hsl(0, 0%, 96%);\n}\nh1 {\n  font-size: 1.8rem;\n}\n\n</style>\n  </head>\n  <body>\n    <script src=\"http://cdn.rawgit.com/phi-jp/phina.js/v0.2.0/build/phina.js\"></script>\n<script>\nphina.globalize();//phina.game.GameApp\u306e\u3088\u3046\u306b\u968e\u5c64\u7684\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30b9\u3092GameApp\u3060\u3051\u3067\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u51e6\u7406\u306a\u3069\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\nvar BLOCK_WIDTH = 40 * 2;\nvar BLOCK_HEIGHT = 60 / 2;\nvar PADDLE_WIDTH = BLOCK_WIDTH * 1.5;\nvar PADDLE_HEIGHT = BLOCK_HEIGHT;\nvar BALL_RADIUS = BLOCK_WIDTH / 8;\n/*\n * \u30e1\u30a4\u30f3\u30b7\u30fc\u30f3\n */\nphina.define(\"MainScene\", {//phina.define\u306f\u3001\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n  // \u7d99\u627f\n  superClass: 'DisplayScene',//phina.define\u306f\u3001\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {//init\u95a2\u6570\u306f\u3001\u3044\u308f\u3086\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u3059\u3002\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit();//this.superInit\u3067\u89aa\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u5f8c\u306b\u3001\u5b9f\u969b\u306e\u30b2\u30fc\u30e0\u51e6\u7406\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n    this.backgroundColor = 'black';    // \u80cc\u666f\u8272\n\n    this.blockGroup = DisplayElement().addChildTo(this);// \u30d6\u30ed\u30c3\u30af\u30b0\u30eb\u30fc\u30d7\n\n    this.dummyGroup = DisplayElement().addChildTo(this); // \u30c0\u30df\u30fc\u30d6\u30ed\u30c3\u30af\u30b0\u30eb\u30fc\u30d7\n\n    var screenRect = Rect(0, 0, 640, 960); // \u4f4d\u7f6e\u5224\u5b9a\u7528\u306eRect\n\n    var self = this;\n    // Grid\u3092\u5229\u7528\u3057\u3066\u30d6\u30ed\u30c3\u30af\u8a2d\u7f6e\n    Array.range(2, 16, 2).each(function(spanX) {\n      Array.range(1, 4, 0.5).each(function(spanY) {\n        Block().addChildTo(self.blockGroup)\n               .setPosition(self.gridX.span(spanX), self.gridY.span(spanY));\n      });\n    });\n    // \u30d1\u30c9\u30eb\u79fb\u52d5\u30e9\u30a4\u30f3\n    var paddleY = this.gridY.span(14.5);\n    // \u30d1\u30c9\u30eb\u8a2d\u7f6e\n    var paddle = Paddle().addChildTo(this)\n                         .setPosition(this.gridX.center(), paddleY);\n    // \u753b\u9762\u4e0a\u3067\u306e\u30bf\u30c3\u30c1\u79fb\u52d5\u6642\n    this.onpointmove = function(e) {\n      // \u30bf\u30c3\u30c1\u4f4d\u7f6e\u306b\u79fb\u52d5\n      paddle.setPosition(e.pointer.x | 0, paddleY);\n      // \u753b\u9762\u306f\u307f\u51fa\u3057\u9632\u6b62\n      if (paddle.left < screenRect.left) { paddle.left = screenRect.left; }\n      if (paddle.right > screenRect.right) { paddle.right = screenRect.right; }\n    };\n    // \u753b\u9762\u4e0a\u3067\u30bf\u30c3\u30c1\u304c\u96e2\u308c\u305f\u6642\n    this.onpointend = function() {\n      if (self.status === 'ready') {\n        // \u30dc\u30fc\u30eb\u767a\u5c04\n        self.ball.vy = -self.ball.speed;\n        self.status = 'move';\n      }\n    };\n    // \u30b9\u30b3\u30a2\n    this.score = 0;\n    var scoreLabel = Label({\n      text: this.score + '',\n      fill: 'lime',\n      fontSize: 64,\n    }).addChildTo(this);\n    scoreLabel.setPosition(this.gridX.center(), this.gridY.center());\n    scoreLabel.alpha = 0.6;\n    // \u9023\u7d9a\u30d2\u30c3\u30c8\u6570\n    this.hitNumber = 0;\n    // \u30dc\u30fc\u30eb\u4f5c\u6210\n    this.ball = Ball().addChildTo(this);\n    // \u30b7\u30fc\u30f3\u5168\u4f53\u304b\u3089\u53c2\u7167\u53ef\u80fd\u306b\u3059\u308b\n    this.paddle = paddle;\n    this.screenRect = screenRect;\n    this.scoreLabel = scoreLabel;\n    // \u30b2\u30fc\u30e0\u72b6\u614b\n    this.status = 'ready';\n  },\n    // \u6bce\u30d5\u30ec\u30fc\u30e0\u66f4\u65b0\n  update: function() {\n    var ball = this.ball;\n    var paddle = this.paddle;\n    var screenRect = this.screenRect;\n    // \u30dc\u30fc\u30eb\u5f85\u6a5f\u4e2d\n    if (this.status === 'ready') {\n      // \u30dc\u30fc\u30eb\u306f\u30d1\u30c9\u30eb\u306e\u771f\u4e0a\n      ball.vx = ball.vy = 0;\n      ball.x = paddle.x;\n      ball.bottom = paddle.top;\n    }\n    // \u30dc\u30fc\u30eb\u79fb\u52d5\u4e2d\n    if (this.status === 'move') {\n      // \u30dc\u30fc\u30eb\u79fb\u52d5\n      ball.moveBy(ball.vx, ball.vy);\n      // \u753b\u9762\u7aef\u53cd\u5c04\n      // \u4e0a\n      if (ball.top < screenRect.top) {\n        ball.top = screenRect.top;\n        ball.vy = -ball.vy;\n      }\n      // \u5de6\n      if (ball.left < screenRect.left) {\n        ball.left = screenRect.left;\n        ball.vx = -ball.vx;\n      }\n      // \u53f3\n      if (ball.right > screenRect.right) {\n        ball.right = screenRect.right;\n        ball.vx = -ball.vx;\n      }\n      // \u843d\u4e0b\n      var self = this;\n\n      if (ball.top > screenRect.bottom) {\n        // \u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u8868\u793a\n        var label = Label({\n          text: 'GAME OVER',\n          fill: 'yellow',\n          fontSize: 64,\n        }).addChildTo(this);\n        label.setPosition(this.gridX.center(), this.gridY.center());\n        // \u5c11\u3057\u5f85\u3063\u3066\u304b\u3089\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u3078\n        label.tweener.clear()\n                     .wait(2000)\n                     .call(function() {\n                       self.nextLabel = 'title';\n                       self.exit();\n                     });\n      }\n      // \u30d1\u30c9\u30eb\u3068\u306e\u53cd\u5c04\n      if (ball.hitTestElement(paddle) && ball.vy > 0) {\n        ball.bottom = paddle.top;\n        ball.vy = -ball.vy;\n        // \u5f53\u305f\u3063\u305f\u4f4d\u7f6e\u3067\u89d2\u5ea6\u3092\u5909\u5316\u3055\u305b\u308b\n        var dx = paddle.x - ball.x;\n        ball.vx = -dx / 5;\n      }\n      // \u30d6\u30ed\u30c3\u30af\u3068\u306e\u53cd\u5c04\n      this.blockGroup.children.some(function(block) {\n        // \u30d2\u30c3\u30c8\u306a\u3089\n        if (ball.hitTestElement(block)) {\n          // \u5de6\u4e0a\u304b\u3069\n          if (ball.top < block.top && ball.left < block.left) {\n            // \u4f4d\u7f6e\u88dc\u6b63\n            ball.right = block.left;\n            ball.bottom = block.top;\n            // \u79fb\u52d5\u65b9\u5411\u8a2d\u5b9a\n            ball.vx = -ball.speed;\n            ball.vy = -ball.speed;\n            // \u30d6\u30ed\u30c3\u30af\u6d88\u53bb\n            self.disableBlock(block);\n            return true;\n          }\n          // \u53f3\u4e0a\u304b\u3069\n          if (block.top < ball.top && block.right < ball.right) {\n            ball.left = block.right;\n            ball.bottom = block.top;\n            ball.vx = ball.speed;\n            ball.vy = -ball.speed;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u5de6\u4e0b\u304b\u3069\n          if (block.bottom < ball.bottom && ball.left < block.left) {\n            ball.right = block.left;\n            ball.top = block.bottom;\n            ball.vx = -ball.speed;\n            ball.vy = ball.speed;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u53f3\u4e0b\u304b\u3069\n          if (block.bottom < ball.bottom && block.right < ball.right) {\n            ball.left = block.right;\n            ball.top = block.bottom;\n            ball.vx = ball.speed;\n            ball.vy = ball.speed;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u5de6\u5074\n          if (ball.left < block.left) {\n            ball.right = block.left;\n            ball.vx = -ball.vx;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u53f3\u5074\n          if (block.right < ball.right) {\n            ball.left = block.right;\n            ball.vx = -ball.vx;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u4e0a\u5074\n          if (ball.top < block.top) {\n            ball.bottom = block.top;\n            ball.vy = -ball.vy;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u4e0b\u5074\n          if (block.bottom < ball.bottom) {\n            ball.top = block.bottom;\n            ball.vy = -ball.vy;\n            self.disableBlock(block);\n            return true;\n          }\n        }\n      });\n    }\n    // \u30af\u30ea\u30a2\u30c1\u30a7\u30c3\u30af\n    if (this.blockGroup.children.length === 0) {\n      // \u30b9\u30b3\u30a2\u3092\u30ea\u30b6\u30eb\u30c8\u30b7\u30fc\u30f3\u306b\u6e21\u3059\n      this.exit({\n        score: this.score,  \n      });\n    }\n  },\n  // \u30d6\u30ed\u30c3\u30af\u306e\u6d88\u53bb\u51e6\u7406\n  disableBlock: function(block) {\n    // \u6d88\u53bb\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30c0\u30df\u30fc\u30d6\u30ed\u30c3\u30af\n    var dummy = Block().addChildTo(this.dummyGroup);\n    // \u5c5e\u6027\u30b3\u30d4\u30fc\n    dummy.x = block.x;\n    dummy.y = block.y;\n    // \u30d6\u30ed\u30c3\u30af\u524a\u9664\n    block.remove();\n    // \u7e2e\u5c0f\u3057\u3066\u6d88\u3048\u308b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\n    dummy.tweener.clear()\n                 .to({scaleX: 0.1, scaleY: 0.1}, 200)\n                 .call(function() {\n                   dummy.remove();\n                 });\n    // \u30b9\u30b3\u30a2\u52a0\u7b97\n    this.addScore();\n  },\n  // \u30b9\u30b3\u30a2\u52a0\u7b97\u51e6\u7406\n  addScore: function() {\n    this.hitNumber++;\n    this.score += this.hitNumber * 10;\n    this.scoreLabel.text = this.score;\n  },\n});\n/*\n * \u30d6\u30ed\u30c3\u30af\u30af\u30e9\u30b9\n */\nphina.define('Block', {\n  // \u89aa\u30af\u30e9\u30b9\u6307\u5b9a\n  superClass: 'RectangleShape',\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit({\n      width: BLOCK_WIDTH,\n      height: BLOCK_HEIGHT,\n    });\n  },\n});\n/*\n * \u30d1\u30c9\u30eb\u30af\u30e9\u30b9\n */\nphina.define('Paddle', {\n  // \u89aa\u30af\u30e9\u30b9\u6307\u5b9a\n  superClass: 'RectangleShape',\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit({\n      width: PADDLE_WIDTH,\n      height: PADDLE_HEIGHT,\n      fill: 'silver',\n    });\n  },\n});\n/*\n * \u30dc\u30fc\u30eb\u30af\u30e9\u30b9\n */\nphina.define('Ball', {\n  // \u89aa\u30af\u30e9\u30b9\u6307\u5b9a\n  superClass: 'CircleShape',\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit({\n      radius: BALL_RADIUS,\n      fill: 'silver',\n    });\n    // \u30b9\u30d4\u30fc\u30c9\n    this.speed = 6;\n  },\n});\n/*\n * \u30e1\u30a4\u30f3\u51e6\u7406\n */\nphina.main(function() {\n  // \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u751f\u6210\n  var app = GameApp({\n    title: 'GAMES',\n  });\n  // fps\u5909\u66f4\n  app.fps = 60;\n  // \u5b9f\u884c\n  app.run();\n});\n</script>\n  </body>\n</html>\n\n\n\u3053\u3093\u306a\u3093\u3067\u7c21\u5358\u306a\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u30b2\u30fc\u30e0\u304c\u4f5c\u308c\u307e\u3059\u3002\n\u4e00\u5ea6\u7686\u3055\u3093\u3082\u3084\u3063\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\n\n```index.html\n \n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    \n    <title>test  </title>\n    \n<style>\nhtml {\n  font-size: 62.5%;\n}\nbody {\n  color: #444;\n  background-color: hsl(0, 0%, 96%);\n}\nh1 {\n  font-size: 1.8rem;\n}\n\n</style>\n  </head>\n  <body>\n    <script src=\"http://cdn.rawgit.com/phi-jp/phina.js/v0.2.0/build/phina.js\"></script>\n<script>\nphina.globalize();//phina.game.GameApp\u306e\u3088\u3046\u306b\u968e\u5c64\u7684\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30b9\u3092GameApp\u3060\u3051\u3067\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u51e6\u7406\u306a\u3069\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\nvar BLOCK_WIDTH = 40 * 2;\nvar BLOCK_HEIGHT = 60 / 2;\nvar PADDLE_WIDTH = BLOCK_WIDTH * 1.5;\nvar PADDLE_HEIGHT = BLOCK_HEIGHT;\nvar BALL_RADIUS = BLOCK_WIDTH / 8;\n/*\n * \u30e1\u30a4\u30f3\u30b7\u30fc\u30f3\n */\nphina.define(\"MainScene\", {//phina.define\u306f\u3001\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n  // \u7d99\u627f\n  superClass: 'DisplayScene',//phina.define\u306f\u3001\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {//init\u95a2\u6570\u306f\u3001\u3044\u308f\u3086\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u3059\u3002\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit();//this.superInit\u3067\u89aa\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u5f8c\u306b\u3001\u5b9f\u969b\u306e\u30b2\u30fc\u30e0\u51e6\u7406\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n  \n    this.backgroundColor = 'black';    // \u80cc\u666f\u8272\n    \n    this.blockGroup = DisplayElement().addChildTo(this);// \u30d6\u30ed\u30c3\u30af\u30b0\u30eb\u30fc\u30d7\n    \n    this.dummyGroup = DisplayElement().addChildTo(this); // \u30c0\u30df\u30fc\u30d6\u30ed\u30c3\u30af\u30b0\u30eb\u30fc\u30d7\n  \n    var screenRect = Rect(0, 0, 640, 960); // \u4f4d\u7f6e\u5224\u5b9a\u7528\u306eRect\n\n    var self = this;\n    // Grid\u3092\u5229\u7528\u3057\u3066\u30d6\u30ed\u30c3\u30af\u8a2d\u7f6e\n    Array.range(2, 16, 2).each(function(spanX) {\n      Array.range(1, 4, 0.5).each(function(spanY) {\n        Block().addChildTo(self.blockGroup)\n               .setPosition(self.gridX.span(spanX), self.gridY.span(spanY));\n      });\n    });\n    // \u30d1\u30c9\u30eb\u79fb\u52d5\u30e9\u30a4\u30f3\n    var paddleY = this.gridY.span(14.5);\n    // \u30d1\u30c9\u30eb\u8a2d\u7f6e\n    var paddle = Paddle().addChildTo(this)\n                         .setPosition(this.gridX.center(), paddleY);\n    // \u753b\u9762\u4e0a\u3067\u306e\u30bf\u30c3\u30c1\u79fb\u52d5\u6642\n    this.onpointmove = function(e) {\n      // \u30bf\u30c3\u30c1\u4f4d\u7f6e\u306b\u79fb\u52d5\n      paddle.setPosition(e.pointer.x | 0, paddleY);\n      // \u753b\u9762\u306f\u307f\u51fa\u3057\u9632\u6b62\n      if (paddle.left < screenRect.left) { paddle.left = screenRect.left; }\n      if (paddle.right > screenRect.right) { paddle.right = screenRect.right; }\n    };\n    // \u753b\u9762\u4e0a\u3067\u30bf\u30c3\u30c1\u304c\u96e2\u308c\u305f\u6642\n    this.onpointend = function() {\n      if (self.status === 'ready') {\n        // \u30dc\u30fc\u30eb\u767a\u5c04\n        self.ball.vy = -self.ball.speed;\n        self.status = 'move';\n      }\n    };\n    // \u30b9\u30b3\u30a2\n    this.score = 0;\n    var scoreLabel = Label({\n      text: this.score + '',\n      fill: 'lime',\n      fontSize: 64,\n    }).addChildTo(this);\n    scoreLabel.setPosition(this.gridX.center(), this.gridY.center());\n    scoreLabel.alpha = 0.6;\n    // \u9023\u7d9a\u30d2\u30c3\u30c8\u6570\n    this.hitNumber = 0;\n    // \u30dc\u30fc\u30eb\u4f5c\u6210\n    this.ball = Ball().addChildTo(this);\n    // \u30b7\u30fc\u30f3\u5168\u4f53\u304b\u3089\u53c2\u7167\u53ef\u80fd\u306b\u3059\u308b\n    this.paddle = paddle;\n    this.screenRect = screenRect;\n    this.scoreLabel = scoreLabel;\n    // \u30b2\u30fc\u30e0\u72b6\u614b\n    this.status = 'ready';\n  },\n    // \u6bce\u30d5\u30ec\u30fc\u30e0\u66f4\u65b0\n  update: function() {\n    var ball = this.ball;\n    var paddle = this.paddle;\n    var screenRect = this.screenRect;\n    // \u30dc\u30fc\u30eb\u5f85\u6a5f\u4e2d\n    if (this.status === 'ready') {\n      // \u30dc\u30fc\u30eb\u306f\u30d1\u30c9\u30eb\u306e\u771f\u4e0a\n      ball.vx = ball.vy = 0;\n      ball.x = paddle.x;\n      ball.bottom = paddle.top;\n    }\n    // \u30dc\u30fc\u30eb\u79fb\u52d5\u4e2d\n    if (this.status === 'move') {\n      // \u30dc\u30fc\u30eb\u79fb\u52d5\n      ball.moveBy(ball.vx, ball.vy);\n      // \u753b\u9762\u7aef\u53cd\u5c04\n      // \u4e0a\n      if (ball.top < screenRect.top) {\n        ball.top = screenRect.top;\n        ball.vy = -ball.vy;\n      }\n      // \u5de6\n      if (ball.left < screenRect.left) {\n        ball.left = screenRect.left;\n        ball.vx = -ball.vx;\n      }\n      // \u53f3\n      if (ball.right > screenRect.right) {\n        ball.right = screenRect.right;\n        ball.vx = -ball.vx;\n      }\n      // \u843d\u4e0b\n      var self = this;\n\n      if (ball.top > screenRect.bottom) {\n        // \u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u8868\u793a\n        var label = Label({\n          text: 'GAME OVER',\n          fill: 'yellow',\n          fontSize: 64,\n        }).addChildTo(this);\n        label.setPosition(this.gridX.center(), this.gridY.center());\n        // \u5c11\u3057\u5f85\u3063\u3066\u304b\u3089\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u3078\n        label.tweener.clear()\n                     .wait(2000)\n                     .call(function() {\n                       self.nextLabel = 'title';\n                       self.exit();\n                     });\n      }\n      // \u30d1\u30c9\u30eb\u3068\u306e\u53cd\u5c04\n      if (ball.hitTestElement(paddle) && ball.vy > 0) {\n        ball.bottom = paddle.top;\n        ball.vy = -ball.vy;\n        // \u5f53\u305f\u3063\u305f\u4f4d\u7f6e\u3067\u89d2\u5ea6\u3092\u5909\u5316\u3055\u305b\u308b\n        var dx = paddle.x - ball.x;\n        ball.vx = -dx / 5;\n      }\n      // \u30d6\u30ed\u30c3\u30af\u3068\u306e\u53cd\u5c04\n      this.blockGroup.children.some(function(block) {\n        // \u30d2\u30c3\u30c8\u306a\u3089\n        if (ball.hitTestElement(block)) {\n          // \u5de6\u4e0a\u304b\u3069\n          if (ball.top < block.top && ball.left < block.left) {\n            // \u4f4d\u7f6e\u88dc\u6b63\n            ball.right = block.left;\n            ball.bottom = block.top;\n            // \u79fb\u52d5\u65b9\u5411\u8a2d\u5b9a\n            ball.vx = -ball.speed;\n            ball.vy = -ball.speed;\n            // \u30d6\u30ed\u30c3\u30af\u6d88\u53bb\n            self.disableBlock(block);\n            return true;\n          }\n          // \u53f3\u4e0a\u304b\u3069\n          if (block.top < ball.top && block.right < ball.right) {\n            ball.left = block.right;\n            ball.bottom = block.top;\n            ball.vx = ball.speed;\n            ball.vy = -ball.speed;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u5de6\u4e0b\u304b\u3069\n          if (block.bottom < ball.bottom && ball.left < block.left) {\n            ball.right = block.left;\n            ball.top = block.bottom;\n            ball.vx = -ball.speed;\n            ball.vy = ball.speed;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u53f3\u4e0b\u304b\u3069\n          if (block.bottom < ball.bottom && block.right < ball.right) {\n            ball.left = block.right;\n            ball.top = block.bottom;\n            ball.vx = ball.speed;\n            ball.vy = ball.speed;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u5de6\u5074\n          if (ball.left < block.left) {\n            ball.right = block.left;\n            ball.vx = -ball.vx;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u53f3\u5074\n          if (block.right < ball.right) {\n            ball.left = block.right;\n            ball.vx = -ball.vx;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u4e0a\u5074\n          if (ball.top < block.top) {\n            ball.bottom = block.top;\n            ball.vy = -ball.vy;\n            self.disableBlock(block);\n            return true;\n          }\n          // \u4e0b\u5074\n          if (block.bottom < ball.bottom) {\n            ball.top = block.bottom;\n            ball.vy = -ball.vy;\n            self.disableBlock(block);\n            return true;\n          }\n        }\n      });\n    }\n    // \u30af\u30ea\u30a2\u30c1\u30a7\u30c3\u30af\n    if (this.blockGroup.children.length === 0) {\n      // \u30b9\u30b3\u30a2\u3092\u30ea\u30b6\u30eb\u30c8\u30b7\u30fc\u30f3\u306b\u6e21\u3059\n      this.exit({\n        score: this.score,  \n      });\n    }\n  },\n  // \u30d6\u30ed\u30c3\u30af\u306e\u6d88\u53bb\u51e6\u7406\n  disableBlock: function(block) {\n    // \u6d88\u53bb\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30c0\u30df\u30fc\u30d6\u30ed\u30c3\u30af\n    var dummy = Block().addChildTo(this.dummyGroup);\n    // \u5c5e\u6027\u30b3\u30d4\u30fc\n    dummy.x = block.x;\n    dummy.y = block.y;\n    // \u30d6\u30ed\u30c3\u30af\u524a\u9664\n    block.remove();\n    // \u7e2e\u5c0f\u3057\u3066\u6d88\u3048\u308b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\n    dummy.tweener.clear()\n                 .to({scaleX: 0.1, scaleY: 0.1}, 200)\n                 .call(function() {\n                   dummy.remove();\n                 });\n    // \u30b9\u30b3\u30a2\u52a0\u7b97\n    this.addScore();\n  },\n  // \u30b9\u30b3\u30a2\u52a0\u7b97\u51e6\u7406\n  addScore: function() {\n    this.hitNumber++;\n    this.score += this.hitNumber * 10;\n    this.scoreLabel.text = this.score;\n  },\n});\n/*\n * \u30d6\u30ed\u30c3\u30af\u30af\u30e9\u30b9\n */\nphina.define('Block', {\n  // \u89aa\u30af\u30e9\u30b9\u6307\u5b9a\n  superClass: 'RectangleShape',\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit({\n      width: BLOCK_WIDTH,\n      height: BLOCK_HEIGHT,\n    });\n  },\n});\n/*\n * \u30d1\u30c9\u30eb\u30af\u30e9\u30b9\n */\nphina.define('Paddle', {\n  // \u89aa\u30af\u30e9\u30b9\u6307\u5b9a\n  superClass: 'RectangleShape',\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit({\n      width: PADDLE_WIDTH,\n      height: PADDLE_HEIGHT,\n      fill: 'silver',\n    });\n  },\n});\n/*\n * \u30dc\u30fc\u30eb\u30af\u30e9\u30b9\n */\nphina.define('Ball', {\n  // \u89aa\u30af\u30e9\u30b9\u6307\u5b9a\n  superClass: 'CircleShape',\n  // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n  init: function() {\n    // \u89aa\u30af\u30e9\u30b9\u521d\u671f\u5316\n    this.superInit({\n      radius: BALL_RADIUS,\n      fill: 'silver',\n    });\n    // \u30b9\u30d4\u30fc\u30c9\n    this.speed = 6;\n  },\n});\n/*\n * \u30e1\u30a4\u30f3\u51e6\u7406\n */\nphina.main(function() {\n  // \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u751f\u6210\n  var app = GameApp({\n    title: 'GAMES',\n  });\n  // fps\u5909\u66f4\n  app.fps = 60;\n  // \u5b9f\u884c\n  app.run();\n});\n</script>\n  </body>\n</html>\n```\n", "tags": ["phina.js", "JavaScript"]}