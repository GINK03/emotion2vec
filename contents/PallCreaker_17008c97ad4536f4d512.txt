{"context": "\n\n\u57fa\u790e\u96c6\u8a08\u3084\u6a5f\u68b0\u5b66\u7fd2\u3092\u5b9f\u884c\u3059\u308b\u524d\u306b\u3001\u7570\u5e38\u5024\u3084\u57fa\u790e\u60c5\u5831\u3092\u77e5\u308a\u305f\u3044\u305f\u3081\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\ninteger\u3084numeric\u3060\u3051\u3067\u306a\u304f\u3001factor\u3084logical\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u3060\u30a8\u30e9\u30fc\u3084\u66f8\u304d\u65b9\u304cR\u3089\u3057\u304f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30b3\u30e1\u30f3\u30c8\u9802\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\u5148\u306b\u7d50\u679c\u304b\u3089\u3002\n> output <- mySummary(iris)\n> output\n      colnames   class                                 inform   sum     sd   mean  Min Median  Max NA.s\n2 Sepal.Length numeric                                   <NA> 876.5 0.8281 5.8433  4.3    5.8  7.9    0\n3  Sepal.Width numeric                                   <NA> 458.6 0.4359 3.0573    2      3  4.4    0\n4 Petal.Length numeric                                   <NA> 563.7 1.7653  3.758    1   4.35  6.9    0\n5  Petal.Width numeric                                   <NA> 179.9 0.7622 1.1993  0.1    1.3  2.5    0\n6      Species  factor setosa:50, versicolor:50, virginica:50  <NA>   <NA>   <NA> <NA>   <NA> <NA>    0\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\n# \u57fa\u672c\u7d71\u8a08\u91cf\u3092\u7b97\u51fa\nmySummary <- function(df){\n  # only data frame\n  if (!is.data.frame(df)) return(NA)\n  # create new df\n  new.df <- data.frame(\n    colnames  = NA\n    ,class     = NA\n    ,inform    = NA\n    ,sum       = NA\n    ,sd        = NA\n    ,mean      = NA\n    ,Min       = NA\n    ,Median    = NA\n    ,Max       = NA\n    ,\"NA's\"    = NA\n  )\n  col.count <- ncol(df)\n  for (i in 1:col.count) {\n    if (is.integer(df[,i]) || is.numeric(df[,i])) {\n      cal.sum    <- sum(as.numeric(df[,i]), na.rm=TRUE)\n      cal.mean   <- mean(df[,i], na.rm=TRUE)\n      cal.sd     <- sd(df[,i], na.rm=TRUE)\n      cal.min    <- min(df[,i], na.rm=TRUE)\n      cal.median <- median(df[,i], na.rm=TRUE)\n      cal.max    <- max(df[,i], na.rm=TRUE)\n    } else if (is.factor(df[,i]) || is.logical(df[,i])) {\n      tmp <- summary(df[,i])\n      str.val <- paste(names(tmp), tmp, sep=\":\")\n      cal.summary<- paste(str.val, collapse=\", \")\n    }\n\n    insert.row <- c(\n      colnames  = colnames(df[i])\n      ,class     = class(df[,i])\n      ,inform    = ifelse(exists(\"cal.summary\"), cal.summary, NA)\n      ,sum       = ifelse(exists(\"cal.sum\"), cal.sum, NA)\n      ,sd        = ifelse(exists(\"cal.sd\"), round(cal.sd, 4), NA)\n      ,mean      = ifelse(exists(\"cal.mean\"), round(cal.mean, 4), NA)\n      ,Min       = ifelse(exists(\"cal.min\"), cal.min, NA)\n      ,Median    = ifelse(exists(\"cal.median\"), cal.median, NA)\n      ,Max       = ifelse(exists(\"cal.max\"), cal.max, NA)\n      ,\"NA's\"    = sum(is.na(df[,i]))\n    )\n    new.df <- rbind(new.df, insert.row)\n    suppressWarnings(rm(\"cal.sum\",\"cal.mean\",\"cal.max\",\"cal.median\",\"cal.min\",\"cal.sd\",\"cal.summary\"))\n  }\n  new.df <- new.df[-1,]\n  return(new.df)\n}\n\n# \u57fa\u790e\u96c6\u8a08\u3084\u6a5f\u68b0\u5b66\u7fd2\u3092\u5b9f\u884c\u3059\u308b\u524d\u306b\u3001\u7570\u5e38\u5024\u3084\u57fa\u790e\u60c5\u5831\u3092\u77e5\u308a\u305f\u3044\u305f\u3081\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\ninteger\u3084numeric\u3060\u3051\u3067\u306a\u304f\u3001factor\u3084logical\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u3060\u30a8\u30e9\u30fc\u3084\u66f8\u304d\u65b9\u304cR\u3089\u3057\u304f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30b3\u30e1\u30f3\u30c8\u9802\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\n\u5148\u306b\u7d50\u679c\u304b\u3089\u3002\n\n```R\n> output <- mySummary(iris)\n> output\n      colnames   class                                 inform   sum     sd   mean  Min Median  Max NA.s\n2 Sepal.Length numeric                                   <NA> 876.5 0.8281 5.8433  4.3    5.8  7.9    0\n3  Sepal.Width numeric                                   <NA> 458.6 0.4359 3.0573    2      3  4.4    0\n4 Petal.Length numeric                                   <NA> 563.7 1.7653  3.758    1   4.35  6.9    0\n5  Petal.Width numeric                                   <NA> 179.9 0.7622 1.1993  0.1    1.3  2.5    0\n6      Species  factor setosa:50, versicolor:50, virginica:50  <NA>   <NA>   <NA> <NA>   <NA> <NA>    0\n```\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\n\n```R\n# \u57fa\u672c\u7d71\u8a08\u91cf\u3092\u7b97\u51fa\nmySummary <- function(df){\n  # only data frame\n  if (!is.data.frame(df)) return(NA)\n  # create new df\n  new.df <- data.frame(\n    colnames  = NA\n    ,class     = NA\n    ,inform    = NA\n    ,sum       = NA\n    ,sd        = NA\n    ,mean      = NA\n    ,Min       = NA\n    ,Median    = NA\n    ,Max       = NA\n    ,\"NA's\"    = NA\n  )\n  col.count <- ncol(df)\n  for (i in 1:col.count) {\n    if (is.integer(df[,i]) || is.numeric(df[,i])) {\n      cal.sum    <- sum(as.numeric(df[,i]), na.rm=TRUE)\n      cal.mean   <- mean(df[,i], na.rm=TRUE)\n      cal.sd     <- sd(df[,i], na.rm=TRUE)\n      cal.min    <- min(df[,i], na.rm=TRUE)\n      cal.median <- median(df[,i], na.rm=TRUE)\n      cal.max    <- max(df[,i], na.rm=TRUE)\n    } else if (is.factor(df[,i]) || is.logical(df[,i])) {\n      tmp <- summary(df[,i])\n      str.val <- paste(names(tmp), tmp, sep=\":\")\n      cal.summary<- paste(str.val, collapse=\", \")\n    }\n\n    insert.row <- c(\n      colnames  = colnames(df[i])\n      ,class     = class(df[,i])\n      ,inform    = ifelse(exists(\"cal.summary\"), cal.summary, NA)\n      ,sum       = ifelse(exists(\"cal.sum\"), cal.sum, NA)\n      ,sd        = ifelse(exists(\"cal.sd\"), round(cal.sd, 4), NA)\n      ,mean      = ifelse(exists(\"cal.mean\"), round(cal.mean, 4), NA)\n      ,Min       = ifelse(exists(\"cal.min\"), cal.min, NA)\n      ,Median    = ifelse(exists(\"cal.median\"), cal.median, NA)\n      ,Max       = ifelse(exists(\"cal.max\"), cal.max, NA)\n      ,\"NA's\"    = sum(is.na(df[,i]))\n    )\n    new.df <- rbind(new.df, insert.row)\n    suppressWarnings(rm(\"cal.sum\",\"cal.mean\",\"cal.max\",\"cal.median\",\"cal.min\",\"cal.sd\",\"cal.summary\"))\n  }\n  new.df <- new.df[-1,]\n  return(new.df)\n}\n```\n\n\n\n", "tags": ["R", "RStudio"]}