{"context": " More than 1 year has passed since last update.WebAudio\u305d\u3053\u305d\u3053\u826f\u3044\u611f\u3058\u306b\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u30e1\u30e2\u3002\u3042\u3068\u5165\u7528\u3067\u3002\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u81ea\u524d\u3067\u6ce2\u5f62\u751f\u6210\u3057\u3066\u7a81\u3063\u8fbc\u3080\u306e\u3092\u5b9f\u9a13\u3002\u306a\u308b\u3079\u304f\u5c0f\u3055\u304f\u66f8\u3044\u3066\u307f\u305f\u3002\n\u5f53\u521d\u3082\u3063\u3068\u5c0f\u3055\u304f\u66f8\u3051\u305f\u3051\u3069\u5206\u304b\u308a\u3084\u3059\u3055\u91cd\u8996\u3002\nbuffer_size\u3092\u5927\u304d\u304f\u3059\u308b\u3068\u30ec\u30a4\u30c6\u30f3\u30b7\u304c\u3057\u3087\u307c\u304f\u306a\u308b\u3002\n\nxe.jp\n<script>\n\nvar buffer_size  = 16384; //power 2\nvar divide       = 10;\nvar finetune     = 512.0;\nvar gain         = 0.01;\nvar cutoff       = 1000; //hz\n\n//https://www.youtube.com/watch?v=oFXMxIvZeMk\nvar score =\n[\n    0, 12, 11 - 0, 12, 16, 12, 11 - 0, 12,\n    0, 12, 11 - 1, 12, 16, 12, 11 - 1, 12,\n    0, 12, 11 - 2, 12, 16, 12, 11 - 2, 12,\n    0, 12, 11 - 3, 12, 16, 12, 11 - 3, 12,\n];\n\n//webaudio.\nvar audio        = new (window.webkitAudioContext || window.AudioContext);\nvar scriptproc   = audio.createScriptProcessor(buffer_size);\nvar filter       = audio.createBiquadFilter();\nvar sample_pnote = audio.sampleRate / divide;\nvar basepitch    = finetune / audio.sampleRate;\n\nscriptproc.onaudioprocess = audiohandler;\nscriptproc.connect(filter);\n\nfilter.type      = 0;\nfilter.frequency.value = cutoff;\nfilter.connect(audio.destination);\n\nconsole.log(audio.sampleRate, sample_pnote, finetune);\n\nvar voice = function() {\n    this.ph = 0;\n    this.acc = 0;\n    this.on = function(note) {\n        //http://ja.wikipedia.org/wiki/%E5%B9%B3%E5%9D%87%E5%BE%8B\n        this.acc = Math.pow(2.0, note / 12.0) * basepitch;\n    }\n\n    this.get = function() {\n        this.ph += this.acc;\n        var g0 = Math.sin(this.ph * 3.141592 * 2);\n        return g0 > 0.0 ? -1 : 1;\n    }\n};\nvo = new voice();\n\nvar remain = 0;\nvar index  = 0;\nfunction audiohandler(event) {\n    var outL = event.outputBuffer.getChannelData(0);\n    var outR = event.outputBuffer.getChannelData(1);\n    for(var i = 0 ; i < outL.length; i++) {\n        remain--;\n        if(remain <= 0) {\n            var note = (score[index % score.length]);\n            vo.on(note);\n            remain = sample_pnote;\n            index++;\n            console.log(note);\n        }\n        var out  = vo.get()\n        outL[i]  = out * gain;\n        outR[i]  = outL[i];\n    }\n}\n\n</script>\n\n\n\u2191\u306e\u30b5\u30f3\u30d7\u30eb\u3002\nhttps://dl.dropboxusercontent.com/u/27656232/scsnd.html\n\u203b\u3053\u3044\u3064HTL21\u3067\u3082\u97f3\u9cf4\u3063\u305f\uff01\u3084\u308b\u306a\uff01\n\u3082\u3046\u3061\u3087\u3063\u3068\u51dd\u3063\u305f\u306e\u3002\nhttps://dl.dropboxusercontent.com/u/27656232/scsndseq.html\n\u30d5\u30a3\u30eb\u30bf\u3068\u304b\u306f\u9069\u5f53(\u8033\u89e6\u308a\u3060\u3063\u305f\u306e\u3067)\nvoice\u3092\u9069\u5f53\u306b\u5897\u3084\u305b\u3070\u30dd\u30ea\u306a\u611f\u3058\u306b\u3067\u304d\u308b\u3002\ncreateOscillator\u4f7f\u3046\u624b\u3082\u3042\u308b\u3051\u3069\u9069\u5f53\u306b\u30b0\u30e9\u30a4\u30c9\u767a\u751f\u3059\u308b\u3057\u3001FireFox\u3060\u3068\u30b0\u30e9\u30a4\u30c9\u7121\u3044\u3057\u307e\u3060\u30c0\u30e1(\u30c7\u30d5\u30a9\u306e\u5834\u5408)\n\u203b\u8abf\u3079\u305f\u3051\u3069createOscillator\u4eca\u6642\u70b9\u3067\u5168\u304f\u5f79\u306b\u7acb\u305f\u306a\u3044\u308f\u3002\u3055\u3059\u304c\u30c9\u30e9\u30d5\u30c8\u3002\nWebAudio\u305d\u3053\u305d\u3053\u826f\u3044\u611f\u3058\u306b\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u30e1\u30e2\u3002\u3042\u3068\u5165\u7528\u3067\u3002\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u81ea\u524d\u3067\u6ce2\u5f62\u751f\u6210\u3057\u3066\u7a81\u3063\u8fbc\u3080\u306e\u3092\u5b9f\u9a13\u3002\u306a\u308b\u3079\u304f\u5c0f\u3055\u304f\u66f8\u3044\u3066\u307f\u305f\u3002\n\u5f53\u521d\u3082\u3063\u3068\u5c0f\u3055\u304f\u66f8\u3051\u305f\u3051\u3069\u5206\u304b\u308a\u3084\u3059\u3055\u91cd\u8996\u3002\nbuffer_size\u3092\u5927\u304d\u304f\u3059\u308b\u3068\u30ec\u30a4\u30c6\u30f3\u30b7\u304c\u3057\u3087\u307c\u304f\u306a\u308b\u3002\n\n```js:xe.jp\n<script>\n\nvar buffer_size  = 16384; //power 2\nvar divide       = 10;\nvar finetune     = 512.0;\nvar gain         = 0.01;\nvar cutoff       = 1000; //hz\n\n//https://www.youtube.com/watch?v=oFXMxIvZeMk\nvar score =\n[\n\t0, 12, 11 - 0, 12, 16, 12, 11 - 0, 12,\n\t0, 12, 11 - 1, 12, 16, 12, 11 - 1, 12,\n\t0, 12, 11 - 2, 12, 16, 12, 11 - 2, 12,\n\t0, 12, 11 - 3, 12, 16, 12, 11 - 3, 12,\n];\n\n//webaudio.\nvar audio        = new (window.webkitAudioContext || window.AudioContext);\nvar scriptproc   = audio.createScriptProcessor(buffer_size);\nvar filter       = audio.createBiquadFilter();\nvar sample_pnote = audio.sampleRate / divide;\nvar basepitch    = finetune / audio.sampleRate;\n\nscriptproc.onaudioprocess = audiohandler;\nscriptproc.connect(filter);\n\nfilter.type      = 0;\nfilter.frequency.value = cutoff;\nfilter.connect(audio.destination);\n\nconsole.log(audio.sampleRate, sample_pnote, finetune);\n\nvar voice = function() {\n\tthis.ph = 0;\n\tthis.acc = 0;\n\tthis.on = function(note) {\n\t\t//http://ja.wikipedia.org/wiki/%E5%B9%B3%E5%9D%87%E5%BE%8B\n\t\tthis.acc = Math.pow(2.0, note / 12.0) * basepitch;\n\t}\n\n\tthis.get = function() {\n\t\tthis.ph += this.acc;\n\t\tvar g0 = Math.sin(this.ph * 3.141592 * 2);\n\t\treturn g0 > 0.0 ? -1 : 1;\n\t}\n};\nvo = new voice();\n\nvar remain = 0;\nvar index  = 0;\nfunction audiohandler(event) {\n\tvar outL = event.outputBuffer.getChannelData(0);\n\tvar outR = event.outputBuffer.getChannelData(1);\n\tfor(var i = 0 ; i < outL.length; i++) {\n\t\tremain--;\n\t\tif(remain <= 0) {\n\t\t\tvar note = (score[index % score.length]);\n\t\t\tvo.on(note);\n\t\t\tremain = sample_pnote;\n\t\t\tindex++;\n\t\t\tconsole.log(note);\n\t\t}\n\t\tvar out  = vo.get()\n\t\toutL[i]  = out * gain;\n\t\toutR[i]  = outL[i];\n\t}\n}\n\n</script>\n```\n\n\u2191\u306e\u30b5\u30f3\u30d7\u30eb\u3002\n\nhttps://dl.dropboxusercontent.com/u/27656232/scsnd.html\n\u203b\u3053\u3044\u3064HTL21\u3067\u3082\u97f3\u9cf4\u3063\u305f\uff01\u3084\u308b\u306a\uff01\n\n\n\u3082\u3046\u3061\u3087\u3063\u3068\u51dd\u3063\u305f\u306e\u3002\nhttps://dl.dropboxusercontent.com/u/27656232/scsndseq.html\n\n\n\n\u30d5\u30a3\u30eb\u30bf\u3068\u304b\u306f\u9069\u5f53(\u8033\u89e6\u308a\u3060\u3063\u305f\u306e\u3067)\n\nvoice\u3092\u9069\u5f53\u306b\u5897\u3084\u305b\u3070\u30dd\u30ea\u306a\u611f\u3058\u306b\u3067\u304d\u308b\u3002\ncreateOscillator\u4f7f\u3046\u624b\u3082\u3042\u308b\u3051\u3069\u9069\u5f53\u306b\u30b0\u30e9\u30a4\u30c9\u767a\u751f\u3059\u308b\u3057\u3001FireFox\u3060\u3068\u30b0\u30e9\u30a4\u30c9\u7121\u3044\u3057\u307e\u3060\u30c0\u30e1(\u30c7\u30d5\u30a9\u306e\u5834\u5408)\n\u203b\u8abf\u3079\u305f\u3051\u3069createOscillator\u4eca\u6642\u70b9\u3067\u5168\u304f\u5f79\u306b\u7acb\u305f\u306a\u3044\u308f\u3002\u3055\u3059\u304c\u30c9\u30e9\u30d5\u30c8\u3002\n", "tags": ["WebAudioAPI"]}