{"context": "\u30c7\u30e2\uff1ahttps://mo49.github.io/qiita/20160908/audio.html\n\u307e\u305a\u30c7\u30fc\u30bf\u3092\u7528\u610f\n\nSOUNDBOX_DATA\nconst SOUNDBOX_DATA = [\n    {\n        imgSrc: './img/rad.png',\n        audioSrc: './sound/rad.mp3',\n        pos: {\n            x:0,\n            y:15,\n            z:0\n        }\n    },\n    {\n        imgSrc: './img/utada.jpg',\n        audioSrc: './sound/utada.mp3',\n        pos: {\n            x:0,\n            y:15,\n            z:100\n        }\n    },\n    {\n        imgSrc: './img/yonezu.jpg',\n        audioSrc: './sound/yonezu.mp3',\n        pos: {\n            x:0,\n            y:15,\n            z:-100\n        }\n    }\n]\n\n\n\u7d9a\u3044\u3066\u3001\u97f3\u6e90\u3092\u7f6e\u304f\u7bb1\u3092\u4f5c\u6210\n\ncreateSoundBox\ncreateSoundBox(src, pos) {\n    const geom = new THREE.BoxGeometry(30,30,30);\n    const textureLoader = new THREE.TextureLoader();\n    const texture = textureLoader.load(src);\n    texture.minFilter = texture.magFilter = THREE.LinearFilter;\n    const mat = new THREE.MeshBasicMaterial({\n        color:0xffffff,\n        side:THREE.DoubleSide,\n        map:texture\n    })\n    const mesh = new THREE.Mesh(geom, mat);\n    mesh.position.set(pos.x, pos.y, pos.z);\n\n    return mesh;\n}\n\n\n\u4f5c\u6210\u3057\u305f\u7bb1\u306b\u97f3\u6e90\u3092\u7d10\u4ed8\u3051\u308b\n\nsetAudio\nsetAudio(src, mesh, refDis, rolloff, volume) {\n    const listener = new THREE.AudioListener();\n    this.camera.add(listener);\n\n    const sound = new THREE.PositionalAudio(listener);\n    const audioLoader = new THREE.AudioLoader();\n\n    refDis = refDis || 10; // \u97f3\u91cf\u304c\u4e0b\u304c\u308a\u59cb\u3081\u308b\u8ddd\u96e2\n    rolloff = rolloff || 2; // \u97f3\u6e90\u304b\u3089\u9060\u3056\u304b\u3063\u305f\u6642\u306b\u3069\u306e\u304f\u3089\u3044\u3059\u3050\u306b\u97f3\u91cf\u304c\u4e0b\u304c\u308b\u304b\n    volume = volume || 1;\n\n    audioLoader.load(src, (buffer) => {\n        sound.autoplay = true;\n        sound.setBuffer(buffer);\n        sound.setRefDistance(refDis);\n        sound.setLoop(true);\n        sound.setRolloffFactor(rolloff);\n        sound.setVolume(volume);\n        mesh.add(sound);\n    })\n}\n\n\n\u30b7\u30fc\u30f3\u306b\u97f3\u6e90\u3092\u8ffd\u52a0\nfor (let data of SOUNDBOX_DATA) {\n    const mesh = this.createSoundBox(data.imgSrc, data.pos);\n    this.scene.add(mesh);\n    this.setAudio(data.audioSrc, mesh);\n}\n\n\n\u30c7\u30e2\uff1ahttps://mo49.github.io/qiita/20160908/audio.html\n\n\u307e\u305a\u30c7\u30fc\u30bf\u3092\u7528\u610f\n\n```javascript:SOUNDBOX_DATA\nconst SOUNDBOX_DATA = [\n\t{\n\t\timgSrc: './img/rad.png',\n\t\taudioSrc: './sound/rad.mp3',\n\t\tpos: {\n\t\t\tx:0,\n\t\t\ty:15,\n\t\t\tz:0\n\t\t}\n\t},\n\t{\n\t\timgSrc: './img/utada.jpg',\n\t\taudioSrc: './sound/utada.mp3',\n\t\tpos: {\n\t\t\tx:0,\n\t\t\ty:15,\n\t\t\tz:100\n\t\t}\n\t},\n\t{\n\t\timgSrc: './img/yonezu.jpg',\n\t\taudioSrc: './sound/yonezu.mp3',\n\t\tpos: {\n\t\t\tx:0,\n\t\t\ty:15,\n\t\t\tz:-100\n\t\t}\n\t}\n]\n```\n\n\u7d9a\u3044\u3066\u3001\u97f3\u6e90\u3092\u7f6e\u304f\u7bb1\u3092\u4f5c\u6210\n\n```javascript:createSoundBox\ncreateSoundBox(src, pos) {\n\tconst geom = new THREE.BoxGeometry(30,30,30);\n\tconst textureLoader = new THREE.TextureLoader();\n\tconst texture = textureLoader.load(src);\n\ttexture.minFilter = texture.magFilter = THREE.LinearFilter;\n\tconst mat = new THREE.MeshBasicMaterial({\n\t\tcolor:0xffffff,\n\t\tside:THREE.DoubleSide,\n\t\tmap:texture\n\t})\n\tconst mesh = new THREE.Mesh(geom, mat);\n\tmesh.position.set(pos.x, pos.y, pos.z);\n\n\treturn mesh;\n}\n```\n\n\u4f5c\u6210\u3057\u305f\u7bb1\u306b\u97f3\u6e90\u3092\u7d10\u4ed8\u3051\u308b\n\n```javascript:setAudio\nsetAudio(src, mesh, refDis, rolloff, volume) {\n\tconst listener = new THREE.AudioListener();\n\tthis.camera.add(listener);\n\n\tconst sound = new THREE.PositionalAudio(listener);\n\tconst audioLoader = new THREE.AudioLoader();\n\n\trefDis = refDis || 10; // \u97f3\u91cf\u304c\u4e0b\u304c\u308a\u59cb\u3081\u308b\u8ddd\u96e2\n\trolloff = rolloff || 2; // \u97f3\u6e90\u304b\u3089\u9060\u3056\u304b\u3063\u305f\u6642\u306b\u3069\u306e\u304f\u3089\u3044\u3059\u3050\u306b\u97f3\u91cf\u304c\u4e0b\u304c\u308b\u304b\n\tvolume = volume || 1;\n\n\taudioLoader.load(src, (buffer) => {\n\t\tsound.autoplay = true;\n\t\tsound.setBuffer(buffer);\n\t\tsound.setRefDistance(refDis);\n\t\tsound.setLoop(true);\n\t\tsound.setRolloffFactor(rolloff);\n\t\tsound.setVolume(volume);\n\t\tmesh.add(sound);\n\t})\n}\n```\n\n\u30b7\u30fc\u30f3\u306b\u97f3\u6e90\u3092\u8ffd\u52a0\n\n```javascript\nfor (let data of SOUNDBOX_DATA) {\n\tconst mesh = this.createSoundBox(data.imgSrc, data.pos);\n\tthis.scene.add(mesh);\n\tthis.setAudio(data.audioSrc, mesh);\n}\n```\n", "tags": ["three.js", "WebGL", "audio", "JavaScript", "es6"]}