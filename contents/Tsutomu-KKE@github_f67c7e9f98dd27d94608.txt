{"tags": ["\u5f85\u3061\u884c\u5217", "Python", "\u6570\u5b66", "\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3"], "context": "\n\n \u306a\u306b\u3092\u3059\u308b\u306e\uff1f\n\u5f85\u3061\u884c\u5217\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u3001Python\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u901a\u3057\u3066\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n \u5f85\u3061\u884c\u5217\u3068\u306f\n\u78ba\u7387\u7684\u306b\u6319\u52d5\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u306e\u6df7\u96d1\u73fe\u8c61\u3092\n\u6570\u7406\u30e2\u30c7\u30eb\u3092\u7528\u3044\u3066\u89e3\u6790\u3059\u308b\u305f\u3081\u306e\u7406\u8ad6\u3002\n\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u30ba\u30fb\u30ea\u30b5\u30fc\u30c1\u306e1\u5206\u91ce\u3002\n\n\u5f85\u3061\u884c\u5217\u3067\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u3082\u306e\u3092\u30b5\u30fc\u30d0\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3055\u308c\u308b\u3082\u306e\u3092\u9867\u5ba2(\u30af\u30e9\u30a4\u30a2\u30f3\u30c8)\u3068\u3088\u3076\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u9867\u5ba2\u306f\u3001\u78ba\u7387\u7684(\u307e\u305f\u306f\u78ba\u5b9a\u7684)\u306b\u767a\u751f\u3057\u3001FIFO(First In First Out:\u5148\u5165\u308c\u5148\u51fa\u3057)\u306e\u884c\u5217\u306b\u4e26\u3073\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001\u5148\u982d\u304b\u3089\u78ba\u7387\u7684(\u307e\u305f\u306f\u78ba\u5b9a\u7684)\u306a\u6642\u9593\u3092\u304b\u3051\u3066\u30b5\u30fc\u30d3\u30b9\u3092\u53d7\u3051\u3001\u30b5\u30fc\u30d3\u30b9\u7d42\u4e86\u5f8c\u306b\u629c\u3051\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306a\u3057\u304f\u307f\u3092\u7cfb\u307e\u305f\u306f\u30b7\u30b9\u30c6\u30e0\u3068\u3088\u3073\u307e\u3059\u3002\n\n\u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u6700\u3082\u7c21\u5358\u306a\u30e2\u30c7\u30eb\u306f\u3001M/M/1 \u30e2\u30c7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\n M/M/1 \u30e2\u30c7\u30eb\u3068\u306f\n\u5f85\u3061\u884c\u5217\u3067\u306f\u3001(A)\u3069\u306e\u3088\u3046\u306b\u5230\u7740\u3059\u308b\u304b\u3001(B)\u3069\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d3\u30b9\u3055\u308c\u308b\u304b\u3001(C)\u30b5\u30fc\u30d0\u304c\u3044\u304f\u3064\u3042\u308b\u304b\u304c\u91cd\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e3\u3064\u306e\u60c5\u5831\u3092\u3001A/B/C\u306e\u3088\u3046\u306b\u66f8\u304f\u5f62\u5f0f\u3092\u30b1\u30f3\u30c9\u30fc\u30eb\u306e\u8a18\u53f7\u3068\u3088\u3073\u307e\u3059\u3002\u3064\u307e\u308a\u3001M/M/1\u3068\u306f\u3001\u4ee5\u4e0b\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u6307\u3057\u307e\u3059\u3002\n\n\u5230\u7740\u904e\u7a0b = M \uff1a\u30dd\u30a2\u30bd\u30f3\u5230\u7740(\u304a\u304a\u3056\u3063\u3071\u306b\u8a00\u3048\u3070\u30e9\u30f3\u30c0\u30e0\u306b\u5230\u7740\u3059\u308b\u3053\u3068)\n\u30b5\u30fc\u30d3\u30b9 = M \uff1a\u30b5\u30fc\u30d3\u30b9\u6642\u9593\u304c\u6307\u6570\u5206\u5e03\n\u30b5\u30fc\u30d0\u6570 = 1 \uff1a\u30b5\u30fc\u30d0\u304c1\u53f0\n\nM\u306f\u30de\u30eb\u30b3\u30d5(Markov)\u306e\u7565\u3067\u3001\u9593\u9694\u304c\u6307\u6570\u5206\u5e03\u3060\u3068\u5230\u7740\u6570\u306f\u30dd\u30a2\u30bd\u30f3\u5206\u5e03\u306b\u306a\u308a\u3001\u6319\u52d5\u306f\u30de\u30eb\u30b3\u30d5\u904e\u7a0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\u03bb(\u30e9\u30e0\u30c0)\uff1a\u5e73\u5747\u5230\u7740\u7387 = \u5358\u4f4d\u6642\u95931\u306b\u5230\u7740\u3059\u308b\u9867\u5ba2\u6570\u306e\u5e73\u5747(\u5e73\u5747\u5230\u7740\u9593\u9694\u306e\u9006\u6570)\n\u03bc(\u30df\u30e5\u30fc)\uff1a\u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u7387 = \u5358\u4f4d\u6642\u9593\u306b\u30b5\u30fc\u30d3\u30b9\u304c\u7d42\u4e86\u3059\u308b\u9867\u5ba2\u6570\u306e\u5e73\u5747(\u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u6642\u9593\u306e\u9006\u6570)\n\n\u3053\u308c\u3089\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a08\u7b97\u3057\u305f\u03c1\u306f\u3001\u30b5\u30fc\u30d0\u306e\u5e73\u5747\u7a3c\u50cd\u7387\u306b\u306a\u308b\u3053\u3068\u304c\u8a08\u7b97\u3067\u304d\u307e\u3059(\u5f8c\u8ff0)\u3002\n\n\u03c1(\u30ed\u30fc)\uff1a = \u03bb\u03bc \\frac{\\lambda}{\\mu} \n\n\n\u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u7d71\u8a08\u5024\n\n\u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570(LL)\uff1a\u30b7\u30b9\u30c6\u30e0\u5185\u306b\u3044\u308b\u4eba\u6570\u306e\u671f\u5f85\u5024\n\u5e73\u5747\u5f85\u3061\u884c\u5217\u9577(LqL_q)\uff1a\u5f85\u3061\u884c\u5217\u306b\u4e26\u3093\u3067\u3044\u308b\u4eba\u6570\u306e\u671f\u5f85\u5024\n\u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593(WW)\uff1a\u30b7\u30b9\u30c6\u30e0\u5185\u306b\u6ede\u5728\u3057\u3066\u3044\u308b\u6642\u9593\u306e\u671f\u5f85\u5024\n\u5e73\u5747\u5f85\u3061\u6642\u9593(WqW_q)\uff1a\u5f85\u3061\u884c\u5217\u306b\u4e26\u3093\u3067\u3044\u308b\u6642\u9593\u306e\u671f\u5f85\u5024\n\n\n \u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u91cd\u8981\u306a\u5f0f\n\n\u30ea\u30c8\u30eb\u306e\u516c\u5f0f\n\u30ea\u30c8\u30eb\u306e\u516c\u5f0f\u3068\u306f\u3001\u5b89\u5b9a\u306a\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3044\u3066\u9577\u6642\u9593\u5e73\u5747\u5316\u3057\u305f\u9867\u5ba2\u6570LL\u306f\u3001\u9577\u6642\u9593\u5e73\u5747\u5316\u3057\u305f\u5230\u7740\u7387\u03bb\u03bb\u3068\u3001\u9577\u6642\u9593\u5e73\u5747\u5316\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593WW\u306e\u7a4d\u306b\u7b49\u3057\u3044\u3068\u3044\u3046\u6cd5\u5247\u3067\u3059\u3002(\u30b7\u30b9\u30c6\u30e0\u3092\u5f85\u3061\u884c\u5217\u306b\u3057\u3066\u3082\u540c\u3058)\n\nL = \\lambda WL = \\lambda W\nL_q = \\lambda W_qL_q = \\lambda W_q\n\n\u3053\u306e\u516c\u5f0f\u306f\u3001\u5230\u7740\u5206\u5e03\u3084\u30b5\u30fc\u30d3\u30b9\u5206\u5e03\u304c\u3069\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3042\u3063\u3066\u3082\u6210\u308a\u7acb\u3061\u307e\u3059\u3002\n\u307e\u305f\u3001\u3053\u306e\u5f0f\u306f\u3001\u76f4\u611f\u7684\u306b\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\u3059\u306a\u308f\u3061\u3001\n\u7dcf\u5408\u75c5\u9662\u306f\u3001\u7d4c\u9a13\u7684\u306b\u30011\u6642\u9593\u306b3\u4eba\u3084\u3063\u3066\u304f\u308b\u3002\u307e\u305f\u3001\u5f85\u5408\u5ba4\u306b\u306f\u5e73\u57476\u4eba\u5f85\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u3063\u3066\u3044\u308b\u3002\n\u5e73\u5747\u5f85\u3061\u6642\u9593\u306f\u30012\u6642\u9593\u3068\u8003\u3048\u3089\u308c\u308b\u3002\n\n\u3053\u308c\u306f\u3001W_q = L_q / \\lambda = 6 / 3 = 2W_q = L_q / \\lambda = 6 / 3 = 2 \u3092\u8a08\u7b97\u3057\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u8a08\u7b97\u306f\u3001\u5e73\u5747\u306b\u3064\u3044\u3066\u6210\u308a\u7acb\u3061\u307e\u3059\u3002\n\u300c\u81ea\u5206\u304c\u5230\u7740\u3057\u305f\u3068\u304d6\u4eba\u4e26\u3093\u3067\u3044\u305f\u300d\u5834\u5408\u306e\u5f85\u3061\u6642\u9593\u306e\u671f\u5f85\u5024\u306f\u3001(\u30b5\u30fc\u30d3\u30b9\u304cM\u306e\u5834\u5408)6\u00d7\u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u6642\u9593\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u7d71\u8a08\u5024\u306e\u7406\u8ad6\u5024\nM/M/1\u3067\u306f\u3001\u6bd4\u8f03\u7684\u7c21\u5358\u306b\u7d71\u8a08\u5024\u306e\u7406\u8ad6\u5024\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7406\u8ad6\u5024\u3092\u4e38\u6697\u8a18\u3057\u306a\u304f\u3066\u3082\u3001\u6b21\u306e2\u3064\u3092\u899a\u3048\u308c\u3070\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\n\n\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570\u306e\u78ba\u7387\u306f\u30011\u4eba\u5897\u3048\u308b\u3068\u03c1\u500d\u306b\u306a\u308b(\u30de\u30eb\u30b3\u30d5\u904e\u7a0b\u3088\u308a\u5c0e\u304b\u308c\u308b)\n\u30ea\u30c8\u30eb\u306e\u516c\u5f0f\n\n\u307e\u305a\u3001\u30b7\u30b9\u30c6\u30e0\u5185\u306bii\u4eba\u3044\u308b\u78ba\u7387P_iP_i\u306f(1)\u304b\u3089\\alpha \\rho^i\\alpha \\rho^i\u3068\u306a\u308a\u307e\u3059\u3002\u78ba\u7387\u3092\u5168\u3066\u8db3\u3059\u30681\u306a\u306e\u3067\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\n\n \\alpha(1 + \\rho + \\rho^2 + \\rho^3 + \\cdots) = \\frac{\\alpha}{1 - \\rho} = 1 \u304b\u3089 \\alpha = 1-\\rho \\alpha(1 + \\rho + \\rho^2 + \\rho^3 + \\cdots) = \\frac{\\alpha}{1 - \\rho} = 1 \u304b\u3089 \\alpha = 1-\\rho\n \u30b7\u30b9\u30c6\u30e0\u5185\u306bi\u4eba\u3044\u308b\u78ba\u7387P_i = (1-\\rho) \\rho^i  \u30b7\u30b9\u30c6\u30e0\u5185\u306bi\u4eba\u3044\u308b\u78ba\u7387P_i = (1-\\rho) \\rho^i \n\n\u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u30b5\u30fc\u30d0\u306e\u5e73\u5747\u7a3c\u50cd\u7387=\\sum_{i=1}{P_i} = 1 - P_0 = 1 - (1-\\rho) = \\rho\\sum_{i=1}{P_i} = 1 - P_0 = 1 - (1-\\rho) = \\rho\u3068\u3044\u3046\u3053\u3068\u3082\u308f\u304b\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u30ea\u30c8\u30eb\u306e\u516c\u5f0f\u3082\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\n\n\u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570(LL) = \\sum_{i=0}{i P_i} = (1-\\rho)(\\rho+2 \\rho^2 + 3 \\rho^3 + \\cdots) = \\frac{\\rho}{1-\\rho}\\sum_{i=0}{i P_i} = (1-\\rho)(\\rho+2 \\rho^2 + 3 \\rho^3 + \\cdots) = \\frac{\\rho}{1-\\rho}\n\u5e73\u5747\u5f85\u3061\u884c\u5217\u9577(L_qL_q) = \u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570 - \u30b5\u30fc\u30d0\u306e\u5e73\u5747\u7a3c\u50cd\u7387 = L - \\rho = \\frac{\\rho^2}{1-\\rho}\u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570 - \u30b5\u30fc\u30d0\u306e\u5e73\u5747\u7a3c\u50cd\u7387 = L - \\rho = \\frac{\\rho^2}{1-\\rho}\n\u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593(WW) = L / \\lambda = \\frac{1}{\\mu - \\lambda}L / \\lambda = \\frac{1}{\\mu - \\lambda}\n\u5e73\u5747\u5f85\u3061\u6642\u9593(W_qW_q) = L_q / \\lambda = \\frac{\\rho}{\\mu - \\lambda}L_q / \\lambda = \\frac{\\rho}{\\mu - \\lambda}\n\n\n Python\u3067\u78ba\u8a8d\n\u5f85\u3061\u884c\u5217\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u3001Python\u306e\\mbox{simpy}\\mbox{simpy}\u3092\u4f7f\u3046\u3068\u4fbf\u5229\u3067\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001\"pip install simpy\"\u3067\u3067\u304d\u307e\u3059\u3002\n\u5230\u7740\u7387\u03bb=1/5\u3001\u30b5\u30fc\u30d3\u30b9\u7387\u03bc=1/3\u3068\u3057\u307e\u3059\u3002\n\npython3\nimport simpy, random, numpy as np\nrandom.seed(1)\nenv = simpy.Environment() # \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u74b0\u5883\nqueue, intime = [], [] # \u5f85\u3061\u884c\u5217(\u5230\u7740\u6642\u9593\u306e\u30ea\u30b9\u30c8) \u3068 \u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593\u306e\u30ea\u30b9\u30c8\n\n# \u5230\u7740\u30a4\u30d9\u30f3\u30c8\ndef arrive():\n    while True:\n        yield env.timeout(random.expovariate(1.0 / 5)) # \u5e73\u5747\u5230\u7740\u7387 1/5\n        env.process(into_queue())\n\n# \u5f85\u3061\u884c\u5217\u306b\u4e26\u3076\ndef into_queue():\n    global queue\n    queue.append(env.now)\n    if len(queue) > 1:\n        return\n    while len(queue) > 0:\n        yield env.timeout(random.expovariate(1.0 / 3)) # \u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u7387 1/3\n        tm, queue = queue[0], queue[1:]\n        intime.append(env.now - tm)\n\n# \u5b9f\u884c\nenv.process(arrive())\nenv.run(1000000)\nprint('total = %d clients, W = %.2f' % (len(intime), np.average(intime)))\n>>>\ntotal = 199962 clients, W = 7.53\n\n\n\u7406\u8ad6\u5024\u306f\u3001W = \\frac{1}{\\mu - \\lambda} = \\frac{1}{\\frac{1}{3} - \\frac{1}{5}} = 7.5W = \\frac{1}{\\mu - \\lambda} = \\frac{1}{\\frac{1}{3} - \\frac{1}{5}} = 7.5\u3067\u3001\u304a\u304a\u3088\u305d\u5408\u3063\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u4ee5\u4e0a\n\n\n\n\n\u5358\u4f4d\u6642\u9593\u3068\u306f\u3001\u57fa\u6e96\u3068\u306a\u308b\u6642\u9593\u30671\u6642\u9593\u3067\u30821\u5206\u3067\u3082\u3001\u30e2\u30c7\u30eb\u4f5c\u6210\u8005\u304c\u597d\u304d\u306a\u3082\u306e\u3092\u6c7a\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u00a0\u21a9\n\n\n\n# <i class='fa fa-magic' /> \u306a\u306b\u3092\u3059\u308b\u306e\uff1f\n\u5f85\u3061\u884c\u5217\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u3001Python\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u901a\u3057\u3066\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n# <i class='fa fa-magic' /> \u5f85\u3061\u884c\u5217\u3068\u306f\n    \u78ba\u7387\u7684\u306b\u6319\u52d5\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u306e\u6df7\u96d1\u73fe\u8c61\u3092\n    \u6570\u7406\u30e2\u30c7\u30eb\u3092\u7528\u3044\u3066\u89e3\u6790\u3059\u308b\u305f\u3081\u306e\u7406\u8ad6\u3002\n    \u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u30ba\u30fb\u30ea\u30b5\u30fc\u30c1\u306e1\u5206\u91ce\u3002\n\n\u5f85\u3061\u884c\u5217\u3067\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u3082\u306e\u3092\u30b5\u30fc\u30d0\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3055\u308c\u308b\u3082\u306e\u3092\u9867\u5ba2(\u30af\u30e9\u30a4\u30a2\u30f3\u30c8)\u3068\u3088\u3076\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u9867\u5ba2\u306f\u3001\u78ba\u7387\u7684(\u307e\u305f\u306f\u78ba\u5b9a\u7684)\u306b\u767a\u751f\u3057\u3001FIFO(First In First Out:\u5148\u5165\u308c\u5148\u51fa\u3057)\u306e\u884c\u5217\u306b\u4e26\u3073\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001\u5148\u982d\u304b\u3089\u78ba\u7387\u7684(\u307e\u305f\u306f\u78ba\u5b9a\u7684)\u306a\u6642\u9593\u3092\u304b\u3051\u3066\u30b5\u30fc\u30d3\u30b9\u3092\u53d7\u3051\u3001\u30b5\u30fc\u30d3\u30b9\u7d42\u4e86\u5f8c\u306b\u629c\u3051\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306a\u3057\u304f\u307f\u3092\u7cfb\u307e\u305f\u306f\u30b7\u30b9\u30c6\u30e0\u3068\u3088\u3073\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/13955/f47ef9d8-4705-7174-3885-19b972174188.png)\n\n\u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u6700\u3082\u7c21\u5358\u306a\u30e2\u30c7\u30eb\u306f\u3001M/M/1 \u30e2\u30c7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\n# <i class='fa fa-magic' /> M/M/1 \u30e2\u30c7\u30eb\u3068\u306f\n\u5f85\u3061\u884c\u5217\u3067\u306f\u3001(A)\u3069\u306e\u3088\u3046\u306b\u5230\u7740\u3059\u308b\u304b\u3001(B)\u3069\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d3\u30b9\u3055\u308c\u308b\u304b\u3001(C)\u30b5\u30fc\u30d0\u304c\u3044\u304f\u3064\u3042\u308b\u304b\u304c\u91cd\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e3\u3064\u306e\u60c5\u5831\u3092\u3001A/B/C\u306e\u3088\u3046\u306b\u66f8\u304f\u5f62\u5f0f\u3092[\u30b1\u30f3\u30c9\u30fc\u30eb\u306e\u8a18\u53f7](https://ja.wikipedia.org/wiki/%E3%82%B1%E3%83%B3%E3%83%89%E3%83%BC%E3%83%AB%E3%81%AE%E8%A8%98%E5%8F%B7)\u3068\u3088\u3073\u307e\u3059\u3002\u3064\u307e\u308a\u3001M/M/1\u3068\u306f\u3001\u4ee5\u4e0b\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u6307\u3057\u307e\u3059\u3002\n\n- \u5230\u7740\u904e\u7a0b = M \uff1a\u30dd\u30a2\u30bd\u30f3\u5230\u7740(\u304a\u304a\u3056\u3063\u3071\u306b\u8a00\u3048\u3070\u30e9\u30f3\u30c0\u30e0\u306b\u5230\u7740\u3059\u308b\u3053\u3068)\n- \u30b5\u30fc\u30d3\u30b9 = M \uff1a\u30b5\u30fc\u30d3\u30b9\u6642\u9593\u304c\u6307\u6570\u5206\u5e03\n- \u30b5\u30fc\u30d0\u6570 = 1 \uff1a\u30b5\u30fc\u30d0\u304c1\u53f0\n\nM\u306f[\u30de\u30eb\u30b3\u30d5](https://ja.wikipedia.org/wiki/%E3%83%9E%E3%83%AB%E3%82%B3%E3%83%95%E9%81%8E%E7%A8%8B)(Markov)\u306e\u7565\u3067\u3001\u9593\u9694\u304c[\u6307\u6570\u5206\u5e03](https://ja.wikipedia.org/wiki/%E6%8C%87%E6%95%B0%E5%88%86%E5%B8%83)\u3060\u3068\u5230\u7740\u6570\u306f[\u30dd\u30a2\u30bd\u30f3\u5206\u5e03](https://ja.wikipedia.org/wiki/%E3%83%9D%E3%82%A2%E3%82%BD%E3%83%B3%E5%88%86%E5%B8%83)\u306b\u306a\u308a\u3001\u6319\u52d5\u306f\u30de\u30eb\u30b3\u30d5\u904e\u7a0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n## \u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\n- \u03bb(\u30e9\u30e0\u30c0)\uff1a**\u5e73\u5747\u5230\u7740\u7387** = \u5358\u4f4d\u6642\u9593[^1]\u306b\u5230\u7740\u3059\u308b\u9867\u5ba2\u6570\u306e\u5e73\u5747(\u5e73\u5747\u5230\u7740\u9593\u9694\u306e\u9006\u6570)\n- \u03bc(\u30df\u30e5\u30fc)\uff1a**\u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u7387** = \u5358\u4f4d\u6642\u9593\u306b\u30b5\u30fc\u30d3\u30b9\u304c\u7d42\u4e86\u3059\u308b\u9867\u5ba2\u6570\u306e\u5e73\u5747(\u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u6642\u9593\u306e\u9006\u6570)\n\n[^1]: \u5358\u4f4d\u6642\u9593\u3068\u306f\u3001\u57fa\u6e96\u3068\u306a\u308b\u6642\u9593\u30671\u6642\u9593\u3067\u30821\u5206\u3067\u3082\u3001\u30e2\u30c7\u30eb\u4f5c\u6210\u8005\u304c\u597d\u304d\u306a\u3082\u306e\u3092\u6c7a\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u308c\u3089\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a08\u7b97\u3057\u305f\u03c1\u306f\u3001**\u30b5\u30fc\u30d0\u306e\u5e73\u5747\u7a3c\u50cd\u7387**\u306b\u306a\u308b\u3053\u3068\u304c\u8a08\u7b97\u3067\u304d\u307e\u3059(\u5f8c\u8ff0)\u3002\n\n- \u03c1(\u30ed\u30fc)\uff1a = $ \\frac{\\lambda}{\\mu} $\n\n## \u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u7d71\u8a08\u5024\n- \u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570($L$)\uff1a\u30b7\u30b9\u30c6\u30e0\u5185\u306b\u3044\u308b\u4eba\u6570\u306e\u671f\u5f85\u5024\n- \u5e73\u5747\u5f85\u3061\u884c\u5217\u9577($L_q$)\uff1a\u5f85\u3061\u884c\u5217\u306b\u4e26\u3093\u3067\u3044\u308b\u4eba\u6570\u306e\u671f\u5f85\u5024\n- \u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593($W$)\uff1a\u30b7\u30b9\u30c6\u30e0\u5185\u306b\u6ede\u5728\u3057\u3066\u3044\u308b\u6642\u9593\u306e\u671f\u5f85\u5024\n- \u5e73\u5747\u5f85\u3061\u6642\u9593($W_q$)\uff1a\u5f85\u3061\u884c\u5217\u306b\u4e26\u3093\u3067\u3044\u308b\u6642\u9593\u306e\u671f\u5f85\u5024\n\n# <i class='fa fa-magic' /> \u5f85\u3061\u884c\u5217\u306b\u304a\u3051\u308b\u91cd\u8981\u306a\u5f0f\n## \u30ea\u30c8\u30eb\u306e\u516c\u5f0f\n[\u30ea\u30c8\u30eb\u306e\u516c\u5f0f](https://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%88%E3%83%AB%E3%81%AE%E6%B3%95%E5%89%87)\u3068\u306f\u3001\u5b89\u5b9a\u306a\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3044\u3066\u9577\u6642\u9593\u5e73\u5747\u5316\u3057\u305f\u9867\u5ba2\u6570$L$\u306f\u3001\u9577\u6642\u9593\u5e73\u5747\u5316\u3057\u305f\u5230\u7740\u7387$\u03bb$\u3068\u3001\u9577\u6642\u9593\u5e73\u5747\u5316\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593$W$\u306e\u7a4d\u306b\u7b49\u3057\u3044\u3068\u3044\u3046\u6cd5\u5247\u3067\u3059\u3002(\u30b7\u30b9\u30c6\u30e0\u3092\u5f85\u3061\u884c\u5217\u306b\u3057\u3066\u3082\u540c\u3058)\n> $$L = \\lambda W$$\n> $$L_q = \\lambda W_q$$\n\n\u3053\u306e\u516c\u5f0f\u306f\u3001\u5230\u7740\u5206\u5e03\u3084\u30b5\u30fc\u30d3\u30b9\u5206\u5e03\u304c\u3069\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3042\u3063\u3066\u3082\u6210\u308a\u7acb\u3061\u307e\u3059\u3002\n\u307e\u305f\u3001\u3053\u306e\u5f0f\u306f\u3001\u76f4\u611f\u7684\u306b\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\u3059\u306a\u308f\u3061\u3001\n\n    \u7dcf\u5408\u75c5\u9662\u306f\u3001\u7d4c\u9a13\u7684\u306b\u30011\u6642\u9593\u306b3\u4eba\u3084\u3063\u3066\u304f\u308b\u3002\u307e\u305f\u3001\u5f85\u5408\u5ba4\u306b\u306f\u5e73\u57476\u4eba\u5f85\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u3063\u3066\u3044\u308b\u3002\n    \u5e73\u5747\u5f85\u3061\u6642\u9593\u306f\u30012\u6642\u9593\u3068\u8003\u3048\u3089\u308c\u308b\u3002\n\n\u3053\u308c\u306f\u3001$W_q = L_q / \\lambda = 6 / 3 = 2$ \u3092\u8a08\u7b97\u3057\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u8a08\u7b97\u306f\u3001\u5e73\u5747\u306b\u3064\u3044\u3066\u6210\u308a\u7acb\u3061\u307e\u3059\u3002\n\u300c\u81ea\u5206\u304c\u5230\u7740\u3057\u305f\u3068\u304d6\u4eba\u4e26\u3093\u3067\u3044\u305f\u300d\u5834\u5408\u306e\u5f85\u3061\u6642\u9593\u306e\u671f\u5f85\u5024\u306f\u3001(\u30b5\u30fc\u30d3\u30b9\u304cM\u306e\u5834\u5408)6\u00d7\u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u6642\u9593\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u7d71\u8a08\u5024\u306e\u7406\u8ad6\u5024\nM/M/1\u3067\u306f\u3001\u6bd4\u8f03\u7684\u7c21\u5358\u306b\u7d71\u8a08\u5024\u306e\u7406\u8ad6\u5024\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7406\u8ad6\u5024\u3092\u4e38\u6697\u8a18\u3057\u306a\u304f\u3066\u3082\u3001\u6b21\u306e2\u3064\u3092\u899a\u3048\u308c\u3070\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\n\n1. \u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570\u306e\u78ba\u7387\u306f\u30011\u4eba\u5897\u3048\u308b\u3068\u03c1\u500d\u306b\u306a\u308b(\u30de\u30eb\u30b3\u30d5\u904e\u7a0b\u3088\u308a\u5c0e\u304b\u308c\u308b)\n- \u30ea\u30c8\u30eb\u306e\u516c\u5f0f\n\n\u307e\u305a\u3001\u30b7\u30b9\u30c6\u30e0\u5185\u306b$i$\u4eba\u3044\u308b\u78ba\u7387$P_i$\u306f(1)\u304b\u3089$\\alpha \\rho^i$\u3068\u306a\u308a\u307e\u3059\u3002\u78ba\u7387\u3092\u5168\u3066\u8db3\u3059\u30681\u306a\u306e\u3067\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\n> $$ \\alpha(1 + \\rho + \\rho^2 + \\rho^3 + \\cdots) = \\frac{\\alpha}{1 - \\rho} = 1 \u304b\u3089 \\alpha = 1-\\rho$$\n> $$ \u30b7\u30b9\u30c6\u30e0\u5185\u306bi\u4eba\u3044\u308b\u78ba\u7387P_i = (1-\\rho) \\rho^i $$\n\n\u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u30b5\u30fc\u30d0\u306e\u5e73\u5747\u7a3c\u50cd\u7387=$\\sum_{i=1}{P_i} = 1 - P_0 = 1 - (1-\\rho) = \\rho$\u3068\u3044\u3046\u3053\u3068\u3082\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30ea\u30c8\u30eb\u306e\u516c\u5f0f\u3082\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\n> \u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570($L$) = $\\sum_{i=0}{i P_i} = (1-\\rho)(\\rho+2 \\rho^2 + 3 \\rho^3 + \\cdots) = \\frac{\\rho}{1-\\rho}$\n> \u5e73\u5747\u5f85\u3061\u884c\u5217\u9577($L_q$) = $\u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u4eba\u6570 - \u30b5\u30fc\u30d0\u306e\u5e73\u5747\u7a3c\u50cd\u7387 = L - \\rho = \\frac{\\rho^2}{1-\\rho}$\n> \u5e73\u5747\u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593($W$) = $L / \\lambda = \\frac{1}{\\mu - \\lambda}$\n> \u5e73\u5747\u5f85\u3061\u6642\u9593($W_q$) = $L_q / \\lambda = \\frac{\\rho}{\\mu - \\lambda}$\n\n# <i class='fa fa-magic' /> Python\u3067\u78ba\u8a8d\n\u5f85\u3061\u884c\u5217\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u3001Python\u306e$\\mbox{simpy}$\u3092\u4f7f\u3046\u3068\u4fbf\u5229\u3067\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001\"pip install simpy\"\u3067\u3067\u304d\u307e\u3059\u3002\n\u5230\u7740\u7387\u03bb=1/5\u3001\u30b5\u30fc\u30d3\u30b9\u7387\u03bc=1/3\u3068\u3057\u307e\u3059\u3002\n\n```py3:python3\nimport simpy, random, numpy as np\nrandom.seed(1)\nenv = simpy.Environment() # \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u74b0\u5883\nqueue, intime = [], [] # \u5f85\u3061\u884c\u5217(\u5230\u7740\u6642\u9593\u306e\u30ea\u30b9\u30c8) \u3068 \u30b7\u30b9\u30c6\u30e0\u5185\u6642\u9593\u306e\u30ea\u30b9\u30c8\n\n# \u5230\u7740\u30a4\u30d9\u30f3\u30c8\ndef arrive():\n    while True:\n        yield env.timeout(random.expovariate(1.0 / 5)) # \u5e73\u5747\u5230\u7740\u7387 1/5\n        env.process(into_queue())\n\n# \u5f85\u3061\u884c\u5217\u306b\u4e26\u3076\ndef into_queue():\n    global queue\n    queue.append(env.now)\n    if len(queue) > 1:\n        return\n    while len(queue) > 0:\n        yield env.timeout(random.expovariate(1.0 / 3)) # \u5e73\u5747\u30b5\u30fc\u30d3\u30b9\u7387 1/3\n        tm, queue = queue[0], queue[1:]\n        intime.append(env.now - tm)\n\n# \u5b9f\u884c\nenv.process(arrive())\nenv.run(1000000)\nprint('total = %d clients, W = %.2f' % (len(intime), np.average(intime)))\n>>>\ntotal = 199962 clients, W = 7.53\n```\n\n\u7406\u8ad6\u5024\u306f\u3001$W = \\frac{1}{\\mu - \\lambda} = \\frac{1}{\\frac{1}{3} - \\frac{1}{5}} = 7.5$\u3067\u3001\u304a\u304a\u3088\u305d\u5408\u3063\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u4ee5\u4e0a\n\n"}