{"context": " More than 1 year has passed since last update.AOJ\u306f\u3054\u5b58\u77e5\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u7af6\u6280\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u554f\u984c\u304c\u4e26\u3093\u3067\u304a\u308a\u3001\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306a\u3069\u306e\u529b\u3092\u8eab\u306b\u3064\u3051\u3066\u3044\u304f\u30b5\u30a4\u30c8\u3067\u3059\n\u4eca\u56de\u3001\u30bf\u30a4\u30c8\u30eb\u306b\u3082\u3042\u308b\u3088\u3046\u306bC#\u3092\u7528\u3044\u3066AOJ\u306b\u30b3\u30fc\u30c9\u3092\u63d0\u51fa\u3057\u3066AC\u3057\u305f\u5834\u5408\u306f\u81ea\u52d5\u7684\u306bTwitter\u306b\u6295\u7a3f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\nGithub\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u3061\u3089\u3067\u3059\nhttps://github.com/stone725/AOJsubmitform\nAOJ\u3067\u306f\u3001\u4e0b\u8a18\u306eURL\u306b\u5bfe\u3057\u3066userID\u3001sourceCode\u3001problemNO\u3001language\u3001password\u306e\u9805\u76ee\u3092\u57cb\u3081\u3066POST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u3046\u3053\u3068\u306b\u3088\u308a\u5916\u90e8\u304b\u3089\u306e\u63d0\u51fa\u304c\u53ef\u80fd\u3067\u3059\nhttp://judge.u-aizu.ac.jp/onlinejudge/servlet/Submit\n\u3053\u3061\u3089\u306e\u5b9f\u88c5\u3067\u306f\u3053\u3046\u306a\u3063\u3066\u304a\u308a\u307e\u3059\n\nAOJSubmit(\u629c\u7c8b).cs\npublic class AojSubmit \n{\n    private readonly AojAccount _account; //\u63d0\u51fa\u3092\u884c\u3046AOJ\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\n    public AojSubmit(AojAccount aojAccount)\n    {\n        _account = aojAccount;\n    }\n\n    public int Submit(string problemNo, string language, string sourceCode)\n    {\n        HttpWebRequest submitRequest = (HttpWebRequest) WebRequest.Create(\"http://judge.u-aizu.ac.jp/onlinejudge/servlet/Submit\");\n        Encoding enc = Encoding.GetEncoding(\"Shift_JIS\");\n        Hashtable submitConfig = new Hashtable();\n        submitConfig[\"userID\"] = WebUtility.UrlEncode(_account.GetUserName());\n        submitConfig[\"sourceCode\"] = WebUtility.UrlEncode(sourceCode);\n        submitConfig[\"problemNO\"] = WebUtility.UrlEncode(problemNo);\n        submitConfig[\"language\"] = WebUtility.UrlEncode(language);\n        submitConfig[\"password\"] = WebUtility.UrlEncode(_account.GetUserPass());\n        submitRequest.Method = \"POST\";\n        submitRequest.Timeout = 1000000000;\n        String submitParam = submitConfig.Keys.Cast<string>().Aggregate(\"\", (current, key) => current + String.Format(\"{0}={1}&\", key, submitConfig[key]));\n        Byte[] submitData = Encoding.GetEncoding(\"Shift_JIS\").GetBytes(submitParam);\n        submitRequest.ContentType = \"application/x-www-form-urlencoded\";\n        submitRequest.ContentLength = submitData.Length;\n        submitConfig.Clear();\n        /*\u3053\u308c\u304b\u3089\u884c\u3046\u63d0\u51fa\u306e\u4e00\u3064\u524d\u306e\u63d0\u51fa\u306e\u63d0\u51fa\u756a\u53f7\u3092\u53d6\u5f97\u3059\u308b*/\n        String responseUrl = \"http://judge.u-aizu.ac.jp/onlinejudge/webservice/status_log?user_id=\" + _account.GetUserName();\n        HttpWebRequest lastRunIdRequest = (HttpWebRequest) WebRequest.Create(responseUrl);\n        lastRunIdRequest.Timeout = 1000000000;\n        WebResponse lastRunIdresponse = lastRunIdRequest.GetResponse();\n        Stream lastrRunIdResstream = lastRunIdresponse.GetResponseStream();\n        StreamReader lastRunIdStreamReader = new StreamReader(lastrRunIdResstream, enc);\n        String lastSubmitResponse = lastRunIdStreamReader.ReadToEnd();\n        lastRunIdStreamReader.Close();\n        lastrRunIdResstream.Close();\n        lastRunIdresponse.Close();\n        const string runIdStartMark = \"<run_id>\\n\";\n        Int32 lastRunIdStartIndex, lastRunIdEndIndex;\n        String lastRunId = \"\";\n        if (lastSubmitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) != -1)\n        {\n            lastRunIdStartIndex = lastSubmitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) +\n                                        runIdStartMark.Length;\n            lastRunIdEndIndex = lastSubmitResponse.IndexOf(\"\\n\", lastRunIdStartIndex, StringComparison.Ordinal);\n            lastRunId = lastSubmitResponse.Substring(lastRunIdStartIndex, lastRunIdEndIndex - lastRunIdStartIndex);\n        }\n        /*\u30dd\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u66f8\u304d\u8fbc\u307f*/\n        Stream submitReqStream = submitRequest.GetRequestStream();\n        submitReqStream.Write(submitData, 0, submitData.Length);\n        submitReqStream.Close();\n        /*\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u53d6\u5f97\u3068\u8aad\u307f\u8fbc\u307f*/\n        /*\u63d0\u51fa\u7d50\u679c\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570*/\n        string submitResponse = \"\";\n        int challanged = 0;\n        bool success = false;\n        //200ms * 100 = 20000ms\u219220s\u3088\u308a100\u56de\u8a66\u884c\n        while (challanged <= 100)\n        {\n            HttpWebRequest runIdRequest = (HttpWebRequest) WebRequest.Create(responseUrl);\n            runIdRequest.Timeout = 1000000000;\n            WebResponse runIdResponse = runIdRequest.GetResponse();\n            Stream runIdResStream = runIdResponse.GetResponseStream();\n            StreamReader runIdStreamReader = new StreamReader(runIdResStream, enc);\n            submitResponse = runIdStreamReader.ReadToEnd();\n            runIdStreamReader.Close();\n            runIdResStream.Close();\n            runIdResponse.Close();\n            Int32 runIdStart, runIdEnd;\n            if (submitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) != -1)\n            {\n                runIdStart = submitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) + runIdStartMark.Length;\n                runIdEnd = submitResponse.IndexOf(\"\\n\", runIdStart, StringComparison.Ordinal);\n                if (lastRunId != submitResponse.Substring(runIdStart, runIdEnd - runIdStart))\n                {\n                    success = true;\n                    break;\n                }\n            }\n            Thread.Sleep(200);\n            challanged++;\n        }\n        if (!success)\n        {\n            return -1;\n        }\n        /*\u63d0\u51fa\u7d50\u679c\u306e\u53d6\u5f97*/\n        const string statusStartMark = \"<status>\\n\";\n        Int32 statusStartIndex = submitResponse.IndexOf(statusStartMark, submitResponse.IndexOf(statusStartMark, StringComparison.Ordinal) + statusStartMark.Length,\n                StringComparison.Ordinal) + statusStartMark.Length;\n        Int32 statusIdEndIndex = submitResponse.IndexOf(\"\\n</status>\", statusStartIndex, StringComparison.Ordinal);\n        String submitResult = submitResponse.Substring(statusStartIndex, statusIdEndIndex - statusStartIndex);\n        /*\u63d0\u51fa\u7d50\u679c\u306b\u3088\u308b\u5206\u5c90*/\n        switch (submitResult)\n        {\n            case \"Accepted\":\n                return 0;\n            case \"Partial Points\":\n                return 1;\n            case \"Wrong Answer\":\n                return 2;\n            case \"Runtime Error\":\n                return 3;\n            case \"Time Limit Exceeded\":\n                return 4;\n            case \"Memory Limit Exceeded\":\n                return 5;\n            case \"Compile Error\":\n                return 6;\n            case \"WA: Presentation Error\":\n                return 7;\n            case \"Output Limit Exceeded\":\n                return 8;\n            case \"Judge Not Available\":\n                return 9;\n        }\n        return -1;\n    }\n}\n\n\n\u63d0\u51fa\u3092\u884c\u3046\u524d\u306b\u524d\u306e\u63d0\u51fa\u756a\u53f7\u3092API\u304b\u3089\u53d6\u5f97\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u4eca\u56de\u63d0\u51fa\u3059\u308b\u7d50\u679c\u304c\u308f\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\n\u307e\u305f\u3001\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u304a\u3051\u308bTwitter\u5229\u7528\u306fTweetSharp\u3092\u5229\u7528\u3057\u3066\u304a\u308a\u307e\u3059\nTweetSharp\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3057\u305f\nhttp://d.hatena.ne.jp/yuto124takato216/20130618/1371574234\n\u5b9f\u8cea\u521d\u3081\u3066\u306eC#\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u3001\u8abf\u3079\u306a\u304c\u3089\u5b9f\u88c5\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u89e6\u3063\u3066\u307f\u308b\u3068Visual Studio\u3068C#\u306e\u6027\u80fd\u306e\u826f\u3055\u3068\u3044\u3046\u3082\u306e\u304c\u969b\u7acb\u3063\u3066\u3044\u305f\u6c17\u304c\u3057\u307e\u3059\n\u305d\u308c\u3067\u306f\u3001\u6b21\u304c\u3082\u3057\u3042\u3063\u305f\u306e\u306a\u3089\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\nAOJ\u306f\u3054\u5b58\u77e5\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u7af6\u6280\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u554f\u984c\u304c\u4e26\u3093\u3067\u304a\u308a\u3001\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306a\u3069\u306e\u529b\u3092\u8eab\u306b\u3064\u3051\u3066\u3044\u304f\u30b5\u30a4\u30c8\u3067\u3059\n\n\u4eca\u56de\u3001\u30bf\u30a4\u30c8\u30eb\u306b\u3082\u3042\u308b\u3088\u3046\u306bC#\u3092\u7528\u3044\u3066AOJ\u306b\u30b3\u30fc\u30c9\u3092\u63d0\u51fa\u3057\u3066AC\u3057\u305f\u5834\u5408\u306f\u81ea\u52d5\u7684\u306bTwitter\u306b\u6295\u7a3f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\n\nGithub\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u3061\u3089\u3067\u3059\nhttps://github.com/stone725/AOJsubmitform\n\nAOJ\u3067\u306f\u3001\u4e0b\u8a18\u306eURL\u306b\u5bfe\u3057\u3066userID\u3001sourceCode\u3001problemNO\u3001language\u3001password\u306e\u9805\u76ee\u3092\u57cb\u3081\u3066POST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u3046\u3053\u3068\u306b\u3088\u308a\u5916\u90e8\u304b\u3089\u306e\u63d0\u51fa\u304c\u53ef\u80fd\u3067\u3059\nhttp://judge.u-aizu.ac.jp/onlinejudge/servlet/Submit\n\n\u3053\u3061\u3089\u306e\u5b9f\u88c5\u3067\u306f\u3053\u3046\u306a\u3063\u3066\u304a\u308a\u307e\u3059\n\n```C#:AOJSubmit(\u629c\u7c8b).cs\npublic class AojSubmit \n{\n\tprivate readonly AojAccount _account; //\u63d0\u51fa\u3092\u884c\u3046AOJ\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\n\tpublic AojSubmit(AojAccount aojAccount)\n\t{\n\t\t_account = aojAccount;\n\t}\n\n\tpublic int Submit(string problemNo, string language, string sourceCode)\n\t{\n\t\tHttpWebRequest submitRequest = (HttpWebRequest) WebRequest.Create(\"http://judge.u-aizu.ac.jp/onlinejudge/servlet/Submit\");\n\t\tEncoding enc = Encoding.GetEncoding(\"Shift_JIS\");\n\t\tHashtable submitConfig = new Hashtable();\n\t\tsubmitConfig[\"userID\"] = WebUtility.UrlEncode(_account.GetUserName());\n\t\tsubmitConfig[\"sourceCode\"] = WebUtility.UrlEncode(sourceCode);\n\t\tsubmitConfig[\"problemNO\"] = WebUtility.UrlEncode(problemNo);\n\t\tsubmitConfig[\"language\"] = WebUtility.UrlEncode(language);\n\t\tsubmitConfig[\"password\"] = WebUtility.UrlEncode(_account.GetUserPass());\n\t\tsubmitRequest.Method = \"POST\";\n\t\tsubmitRequest.Timeout = 1000000000;\n\t\tString submitParam = submitConfig.Keys.Cast<string>().Aggregate(\"\", (current, key) => current + String.Format(\"{0}={1}&\", key, submitConfig[key]));\n\t\tByte[] submitData = Encoding.GetEncoding(\"Shift_JIS\").GetBytes(submitParam);\n\t\tsubmitRequest.ContentType = \"application/x-www-form-urlencoded\";\n\t\tsubmitRequest.ContentLength = submitData.Length;\n\t\tsubmitConfig.Clear();\n\t\t/*\u3053\u308c\u304b\u3089\u884c\u3046\u63d0\u51fa\u306e\u4e00\u3064\u524d\u306e\u63d0\u51fa\u306e\u63d0\u51fa\u756a\u53f7\u3092\u53d6\u5f97\u3059\u308b*/\n\t\tString responseUrl = \"http://judge.u-aizu.ac.jp/onlinejudge/webservice/status_log?user_id=\" + _account.GetUserName();\n\t\tHttpWebRequest lastRunIdRequest = (HttpWebRequest) WebRequest.Create(responseUrl);\n\t\tlastRunIdRequest.Timeout = 1000000000;\n\t\tWebResponse lastRunIdresponse = lastRunIdRequest.GetResponse();\n\t\tStream lastrRunIdResstream = lastRunIdresponse.GetResponseStream();\n\t\tStreamReader lastRunIdStreamReader = new StreamReader(lastrRunIdResstream, enc);\n\t\tString lastSubmitResponse = lastRunIdStreamReader.ReadToEnd();\n\t\tlastRunIdStreamReader.Close();\n\t\tlastrRunIdResstream.Close();\n\t\tlastRunIdresponse.Close();\n\t\tconst string runIdStartMark = \"<run_id>\\n\";\n\t\tInt32 lastRunIdStartIndex, lastRunIdEndIndex;\n\t\tString lastRunId = \"\";\n\t\tif (lastSubmitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) != -1)\n\t\t{\n\t\t\tlastRunIdStartIndex = lastSubmitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) +\n\t\t\t                            runIdStartMark.Length;\n\t\t\tlastRunIdEndIndex = lastSubmitResponse.IndexOf(\"\\n\", lastRunIdStartIndex, StringComparison.Ordinal);\n\t\t\tlastRunId = lastSubmitResponse.Substring(lastRunIdStartIndex, lastRunIdEndIndex - lastRunIdStartIndex);\n\t\t}\n\t\t/*\u30dd\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u66f8\u304d\u8fbc\u307f*/\n\t\tStream submitReqStream = submitRequest.GetRequestStream();\n\t\tsubmitReqStream.Write(submitData, 0, submitData.Length);\n\t\tsubmitReqStream.Close();\n\t\t/*\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u53d6\u5f97\u3068\u8aad\u307f\u8fbc\u307f*/\n\t\t/*\u63d0\u51fa\u7d50\u679c\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570*/\n\t\tstring submitResponse = \"\";\n\t\tint challanged = 0;\n\t\tbool success = false;\n\t\t//200ms * 100 = 20000ms\u219220s\u3088\u308a100\u56de\u8a66\u884c\n\t\twhile (challanged <= 100)\n\t\t{\n\t\t\tHttpWebRequest runIdRequest = (HttpWebRequest) WebRequest.Create(responseUrl);\n\t\t\trunIdRequest.Timeout = 1000000000;\n\t\t\tWebResponse runIdResponse = runIdRequest.GetResponse();\n\t\t\tStream runIdResStream = runIdResponse.GetResponseStream();\n\t\t\tStreamReader runIdStreamReader = new StreamReader(runIdResStream, enc);\n\t\t\tsubmitResponse = runIdStreamReader.ReadToEnd();\n\t\t\trunIdStreamReader.Close();\n\t\t\trunIdResStream.Close();\n\t\t\trunIdResponse.Close();\n\t\t\tInt32 runIdStart, runIdEnd;\n\t\t\tif (submitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) != -1)\n\t\t\t{\n\t\t\t\trunIdStart = submitResponse.IndexOf(runIdStartMark, 0, StringComparison.Ordinal) + runIdStartMark.Length;\n\t\t\t\trunIdEnd = submitResponse.IndexOf(\"\\n\", runIdStart, StringComparison.Ordinal);\n\t\t\t\tif (lastRunId != submitResponse.Substring(runIdStart, runIdEnd - runIdStart))\n\t\t\t\t{\n\t\t\t\t\tsuccess = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tThread.Sleep(200);\n\t\t\tchallanged++;\n\t\t}\n\t\tif (!success)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\t/*\u63d0\u51fa\u7d50\u679c\u306e\u53d6\u5f97*/\n\t\tconst string statusStartMark = \"<status>\\n\";\n\t\tInt32 statusStartIndex = submitResponse.IndexOf(statusStartMark, submitResponse.IndexOf(statusStartMark, StringComparison.Ordinal) + statusStartMark.Length,\n\t\t\t\tStringComparison.Ordinal) + statusStartMark.Length;\n\t\tInt32 statusIdEndIndex = submitResponse.IndexOf(\"\\n</status>\", statusStartIndex, StringComparison.Ordinal);\n\t\tString submitResult = submitResponse.Substring(statusStartIndex, statusIdEndIndex - statusStartIndex);\n\t\t/*\u63d0\u51fa\u7d50\u679c\u306b\u3088\u308b\u5206\u5c90*/\n\t\tswitch (submitResult)\n\t\t{\n\t\t\tcase \"Accepted\":\n\t\t\t\treturn 0;\n\t\t\tcase \"Partial Points\":\n\t\t\t\treturn 1;\n\t\t\tcase \"Wrong Answer\":\n\t\t\t\treturn 2;\n\t\t\tcase \"Runtime Error\":\n\t\t\t\treturn 3;\n\t\t\tcase \"Time Limit Exceeded\":\n\t\t\t\treturn 4;\n\t\t\tcase \"Memory Limit Exceeded\":\n\t\t\t\treturn 5;\n\t\t\tcase \"Compile Error\":\n\t\t\t\treturn 6;\n\t\t\tcase \"WA: Presentation Error\":\n\t\t\t\treturn 7;\n\t\t\tcase \"Output Limit Exceeded\":\n\t\t\t\treturn 8;\n\t\t\tcase \"Judge Not Available\":\n\t\t\t\treturn 9;\n\t\t}\n\t\treturn -1;\n\t}\n}\n```\n\u63d0\u51fa\u3092\u884c\u3046\u524d\u306b\u524d\u306e\u63d0\u51fa\u756a\u53f7\u3092API\u304b\u3089\u53d6\u5f97\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u4eca\u56de\u63d0\u51fa\u3059\u308b\u7d50\u679c\u304c\u308f\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\n\u307e\u305f\u3001\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u304a\u3051\u308bTwitter\u5229\u7528\u306fTweetSharp\u3092\u5229\u7528\u3057\u3066\u304a\u308a\u307e\u3059\nTweetSharp\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3057\u305f\nhttp://d.hatena.ne.jp/yuto124takato216/20130618/1371574234\n\n\u5b9f\u8cea\u521d\u3081\u3066\u306eC#\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u3001\u8abf\u3079\u306a\u304c\u3089\u5b9f\u88c5\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u89e6\u3063\u3066\u307f\u308b\u3068Visual Studio\u3068C#\u306e\u6027\u80fd\u306e\u826f\u3055\u3068\u3044\u3046\u3082\u306e\u304c\u969b\u7acb\u3063\u3066\u3044\u305f\u6c17\u304c\u3057\u307e\u3059\n\n\u305d\u308c\u3067\u306f\u3001\u6b21\u304c\u3082\u3057\u3042\u3063\u305f\u306e\u306a\u3089\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\n", "tags": ["C#", "\u7af6\u6280\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0", "AOJ"]}