{"tags": ["Cassandra"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nCentOS 6.4 \u74b0\u5883\u306b Cassandra 2.0.0-beta1 \u3092 tarball \u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u30e1\u30e2\u3092\u6b8b\u3057\u3066\u304a\u304f\u3002\u3068\u308a\u3042\u3048\u305a\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u3002\u4eca\u56de\u306f 5 \u53f0\u306e\u7269\u7406\u30b5\u30fc\u30d0  (cassandra[01-05].domain.local) \u3092\u4f7f\u7528\u3057\u3001\u305d\u308c\u305e\u308c CentOS 6.4 \u304c\u30af\u30ea\u30fc\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3002\n\u2605 Kernel \u3092\u78ba\u8a8d\u3059\u308b\n[cassandra[01-05]]# uname -a\nLinux localhost 2.6.32-358.11.1.el6.x86_64 #1 SMP Wed Jun 12 03:34:52 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\n\n\u2605 \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n[cassandra[01-05]]# cat /etc/redhat-release\nCentOS release 6.4 (Final)\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCassandra \u306e\u52d5\u4f5c\u306b\u5fc5\u8981\u306a Java \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\u4eca\u56de\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u306a\u3046 Cassandra 2.0.0-beta1 \u3067\u306f\u3001JDK-1.7 \u304c\u5fc5\u9808\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001Oracle \u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b SunJDK 1.7.0_25 \u3092\u4f7f\u7528\u3059\u308b\u3002\u3082\u3057 JDK-1.6 \u3067\u52d5\u304b\u305d\u3046\u3068\u3057\u305f\u3089 /var/log/cassandra/cassandra.log \u306b \"Unsupported major.minor version 51.0\" \u3068\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\u2605 SunJDK \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n[cassandra[01-05]]# rpm -e $(rpm -qa | grep java) jdk\n[cassandra[01-05]]# rpm -ihv ~/jdk-7u25-linux-x64.rpm\n\n\u2605 \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n[cassandra[01-05]]# java -version\njava version \"1.7.0_25\"\nJava(TM) SE Runtime Environment (build 1.7.0_25-b15)\nJava HotSpot(TM) 64-Bit Server VM (build 23.25-b01, mixed mode)\n\nCassandra \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\u4eca\u56de\u306f tarball \u304b\u3089 /opt/cassandra \u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\u2605 \u5c55\u958b\u5f8c\u306b /opt/cassandra \u4ee5\u4e0b\u306b\u79fb\u52d5\u3059\u308b\n[cassandra[01-05]]# tar xvzf ~/apache-cassandra-2.0.0-beta1-bin.tar.gz\n[cassandra[01-05]]# mv apache-cassandra-2.0.0-beta1 /opt/\n[cassandra[01-05]]# rm -f /opt/cassandra\n[cassandra[01-05]]# ln -s /opt/apache-cassandra-2.0.0-beta1 /opt/cassandra\n\n\u2605 \u30ed\u30b0\u3068\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\n[cassandra[01-05]]# sudo mkdir -p /var/log/cassandra \n[cassandra[01-05]]# mkdir -p /var/lib/cassandra\n\n\n\u8a2d\u5b9a\nCassandra \u3092\u8a2d\u5b9a\u3059\u308b\u3002\u8a2d\u5b9a\u9805\u76ee \"seeds\", \"listen_address\", \"rpc_address\" \u306e 3 \u30ab\u6240\u306f\u5fc5\u305a\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u8ffd\u52a0\u3067 virtualnode \u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3068\u3001IPv6 \u74b0\u5883\u3067\u52d5\u304b\u3059\u8a2d\u5b9a\u3092\u884c\u306a\u3046\u3002\u4eca\u56de\u306f 5 \u53f0\u306e\u7269\u7406\u30b5\u30fc\u30d0\u306e\u3046\u3061\u30013 \u53f0\u3092 seed \u3068\u3059\u308b\u3002\u307e\u305f \"listen_address\" \u306f\u3001\u4e92\u3044\u306b\u63a5\u7d9a\u3067\u304d\u308b IP \u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306f\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u30c9\u30e1\u30a4\u30f3\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u4eca\u56de\u306f IPv6 \u74b0\u5883\u304b\u3064 DNS \u304c\u3042\u308b\u74b0\u5883\u3067\u69cb\u7bc9\u3059\u308b\u3002\n\u2605 \u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\n[cassandra[01-05]]# sed -i 's/- seeds: \"127.0.0.1\"/- seeds: \"cassandra01.domain.local, cassandra02.domain.local, cassandra03.domain.local\"/g' /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i \"s/listen_address: localhost/listen_address: `hostname`.domain.local/g\" /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i \"s/rpc_address: localhost/rpc_address: `hostname`.domain.local/g\" /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i 's/# num_tokens: 256/num_tokens: 4/g' /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i 's/JVM_OPTS=\"$JVM_OPTS -Djava.net.preferIPv4Stack=true\"/JVM_OPTS=\"$JVM_OPTS -Djava.net.preferIPv4Stack=false\"/g' /opt/cassandra/conf/cassandra-env.sh\n[cassandra[01-05]]# echo \"::1 localhost localhost.localdomain localhost6 localhost6.localdomain6\" > /etc/hosts\n\nCassandra \u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\u7d50\u5c40\u306f /opt/cassandra/bin/cassandra \u30b7\u30a7\u30eb\u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u3060\u304c\u3001\u3044\u308d\u3044\u308d\u3068\u9762\u5012\u306a\u306e\u3067\u7c21\u6613\u7684\u306b\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002Cassandra \u306e PID \u3092\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406\u3057\u3001\u6a19\u6e96\u51fa\u529b\u304a\u3088\u3073\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u306f\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u3002\n\u2605 \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\n[cassandra[01-05]]# cat << 'EOS' > /etc/init.d/cassandra && sudo chmod +x /etc/init.d/cassandra\n#!/bin/sh\nCASSANDRA_ROOT_DIR=/opt/cassandra\nCASSANDRA_BIN_DIR=${CASSANDRA_ROOT_DIR}/bin\nCASSANDRA_LOG_DIR=/var/log/cassandra\nCASSANDRA_RUN_DIR=/var/run/cassandra\ncase \"$1\" in\n  start)\n    if [ ! -d ${CASSANDRA_LOG_DIR} ]; then\n      mkdir ${CASSANDRA_LOG_DIR}\n    fi\n    if [ ! -d ${CASSANDRA_RUN_DIR} ]; then\n      mkdir ${CASSANDRA_RUN_DIR}\n    fi\n    if [ -e ${CASSANDRA_RUN_DIR}/cassandra.pid ]; then\n      if [ 1 -ne $(ps $(cat ${CASSANDRA_RUN_DIR}/cassandra.pid) | wc -l) ]; then\n        echo \"NG: already running (pid=$(cat ${CASSANDRA_RUN_DIR}/cassandra.pid))\"\n        exit 1\n      fi\n    fi\n    ${CASSANDRA_BIN_DIR}/cassandra -p ${CASSANDRA_RUN_DIR}/cassandra.pid >> ${CASSANDRA_LOG_DIR}/cassandra.log 2>&1\n    echo \"OK: running cassandra (pid=$(cat ${CASSANDRA_RUN_DIR}/cassandra.pid))\"\n    ;;\n  stop)\n    kill $(cat ${CASSANDRA_RUN_DIR}/cassandra.pid)\n    echo \"OK: stopped cassandra\"\n    ;;\n  restart)\n    $0 stop\n    sleep 2\n    $0 start\n    ;;\n  *)\n    echo \"Usage: `basename $0` start|stop|restart\"\nesac\nexit 0\nEOS\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nCassandra \u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b\u3002\u4e00\u756a\u6700\u521d\u306b\u8d77\u52d5\u3059\u308b\u30ce\u30fc\u30c9\u306f seeds \u3067\u8a2d\u5b9a\u3057\u305f\u3069\u308c\u304b\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002Cluster \u5185\u306b seeds \u306b\u8a2d\u5b9a\u3057\u305f \u30ce\u30fc\u30c9\u304c 1 \u53f0\u3067\u3082\u3042\u308c\u3070\u826f\u3044\u305f\u3081\u3001\u6b21\u306b\u8d77\u52d5\u3059\u308b\u30ce\u30fc\u30c9\u306f\u3069\u308c\u3067\u3082\u304b\u307e\u308f\u306a\u3044\u3002\u6700\u5f8c\u306b\u4ed8\u5c5e\u306e nodetool \u30b3\u30de\u30f3\u30c9\u3067 Cluster \u306e\u60c5\u5831\u304c\u53d6\u5f97\u3059\u308b\u3002\n\u2605 \u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b (\u540c\u69d8\u306b\u4ed6\u306e\u30b5\u30fc\u30d0\u3067\u3082\u884c\u306a\u3046)\n[cassandra[01-05]]# /etc/init.d/cassandra start\nOK: running cassandra (pid=24225)\n\n\u2605 \u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u30ce\u30fc\u30c9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u8868\u793a\u3059\u308b\n[cassandra[01-05]]# /opt/cassandra/bin/nodetool status\nDatacenter: datacenter1\n=======================\nStatus=Up/Down\n|/ State=Normal/Leaving/Joining/Moving\n--  Address                             Load       Tokens  Owns (effective)  Host ID                               Rack\nUN  2402:4200:1:52:5054:40ff:fe1a:d412  55.16 KB   4       10.5%             40be2f96-9871-45b9-81e8-03364816bd39  rack1\nUN  2402:4200:1:52:5054:5eff:fee1:1174  58.55 KB   4       32.9%             36afe480-8b7d-4a42-9dae-979858f9395a  rack1\nUN  2402:4200:1:52:5054:60ff:fedb:ae9c  49.23 KB   4       16.1%             3824c783-6282-4615-99d9-58a8fc88bc4b  rack1\nUN  2402:4200:1:52:5054:7cff:fe4c:10cf  55.19 KB   4       21.3%             bc53b062-4258-4c03-ad6f-f9d482728c4e  rack1\nUN  2402:4200:1:52:5054:6cff:fefc:7aa   49.28 KB   4       19.2%             1a917447-b882-4f39-9b4d-cc87db860d36  rack1\n\n\n\u53c2\u8003\u306b\u3057\u305f\u6587\u732e\u306a\u3069\n\nDatastax Apache Cassandra 1.2\nApache Cassandra 1.1.0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u52d5\u4f5c\u78ba\u8a8d\nCassandra\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nApache Cassandra\u3067NoSQL\u306b\u6311\u6226 \u524d\u7de8\nCassandra\u30e1\u30e2\u305d\u306e1(\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u3001\u30c7\u30fc\u30bf\u64cd\u4f5c\u306b\u3064\u3044\u3066)\nCassandra \u306e\u81ea\u52d5\u8d77\u52d5 Shellscript\n\n\n## \u306f\u3058\u3081\u306b\n\nCentOS 6.4 \u74b0\u5883\u306b Cassandra 2.0.0-beta1 \u3092 tarball \u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u30e1\u30e2\u3092\u6b8b\u3057\u3066\u304a\u304f\u3002\u3068\u308a\u3042\u3048\u305a\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u3002\u4eca\u56de\u306f 5 \u53f0\u306e\u7269\u7406\u30b5\u30fc\u30d0  (cassandra[01-05].domain.local) \u3092\u4f7f\u7528\u3057\u3001\u305d\u308c\u305e\u308c CentOS 6.4 \u304c\u30af\u30ea\u30fc\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3002\n\n```\n\u2605 Kernel \u3092\u78ba\u8a8d\u3059\u308b\n[cassandra[01-05]]# uname -a\nLinux localhost 2.6.32-358.11.1.el6.x86_64 #1 SMP Wed Jun 12 03:34:52 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\n\n\u2605 \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n[cassandra[01-05]]# cat /etc/redhat-release\nCentOS release 6.4 (Final)\n```\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nCassandra \u306e\u52d5\u4f5c\u306b\u5fc5\u8981\u306a Java \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\u4eca\u56de\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u306a\u3046 Cassandra 2.0.0-beta1 \u3067\u306f\u3001JDK-1.7 \u304c\u5fc5\u9808\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001Oracle \u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b SunJDK 1.7.0_25 \u3092\u4f7f\u7528\u3059\u308b\u3002\u3082\u3057 JDK-1.6 \u3067\u52d5\u304b\u305d\u3046\u3068\u3057\u305f\u3089 /var/log/cassandra/cassandra.log \u306b \"Unsupported major.minor version 51.0\" \u3068\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n```\n\u2605 SunJDK \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n[cassandra[01-05]]# rpm -e $(rpm -qa | grep java) jdk\n[cassandra[01-05]]# rpm -ihv ~/jdk-7u25-linux-x64.rpm\n\n\u2605 \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n[cassandra[01-05]]# java -version\njava version \"1.7.0_25\"\nJava(TM) SE Runtime Environment (build 1.7.0_25-b15)\nJava HotSpot(TM) 64-Bit Server VM (build 23.25-b01, mixed mode)\n```\n\nCassandra \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\u4eca\u56de\u306f tarball \u304b\u3089 /opt/cassandra \u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```\n\u2605 \u5c55\u958b\u5f8c\u306b /opt/cassandra \u4ee5\u4e0b\u306b\u79fb\u52d5\u3059\u308b\n[cassandra[01-05]]# tar xvzf ~/apache-cassandra-2.0.0-beta1-bin.tar.gz\n[cassandra[01-05]]# mv apache-cassandra-2.0.0-beta1 /opt/\n[cassandra[01-05]]# rm -f /opt/cassandra\n[cassandra[01-05]]# ln -s /opt/apache-cassandra-2.0.0-beta1 /opt/cassandra\n\n\u2605 \u30ed\u30b0\u3068\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\n[cassandra[01-05]]# sudo mkdir -p /var/log/cassandra \n[cassandra[01-05]]# mkdir -p /var/lib/cassandra\n```\n\n## \u8a2d\u5b9a\n\nCassandra \u3092\u8a2d\u5b9a\u3059\u308b\u3002\u8a2d\u5b9a\u9805\u76ee \"seeds\", \"listen_address\", \"rpc_address\" \u306e 3 \u30ab\u6240\u306f\u5fc5\u305a\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u8ffd\u52a0\u3067 virtualnode \u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3068\u3001IPv6 \u74b0\u5883\u3067\u52d5\u304b\u3059\u8a2d\u5b9a\u3092\u884c\u306a\u3046\u3002\u4eca\u56de\u306f 5 \u53f0\u306e\u7269\u7406\u30b5\u30fc\u30d0\u306e\u3046\u3061\u30013 \u53f0\u3092 seed \u3068\u3059\u308b\u3002\u307e\u305f \"listen_address\" \u306f\u3001\u4e92\u3044\u306b\u63a5\u7d9a\u3067\u304d\u308b IP \u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306f\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u30c9\u30e1\u30a4\u30f3\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u4eca\u56de\u306f IPv6 \u74b0\u5883\u304b\u3064 DNS \u304c\u3042\u308b\u74b0\u5883\u3067\u69cb\u7bc9\u3059\u308b\u3002\n\n```\n\u2605 \u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\n[cassandra[01-05]]# sed -i 's/- seeds: \"127.0.0.1\"/- seeds: \"cassandra01.domain.local, cassandra02.domain.local, cassandra03.domain.local\"/g' /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i \"s/listen_address: localhost/listen_address: `hostname`.domain.local/g\" /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i \"s/rpc_address: localhost/rpc_address: `hostname`.domain.local/g\" /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i 's/# num_tokens: 256/num_tokens: 4/g' /opt/cassandra/conf/cassandra.yaml\n[cassandra[01-05]]# sed -i 's/JVM_OPTS=\"$JVM_OPTS -Djava.net.preferIPv4Stack=true\"/JVM_OPTS=\"$JVM_OPTS -Djava.net.preferIPv4Stack=false\"/g' /opt/cassandra/conf/cassandra-env.sh\n[cassandra[01-05]]# echo \"::1 localhost localhost.localdomain localhost6 localhost6.localdomain6\" > /etc/hosts\n```\n\nCassandra \u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\u7d50\u5c40\u306f /opt/cassandra/bin/cassandra \u30b7\u30a7\u30eb\u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u3060\u304c\u3001\u3044\u308d\u3044\u308d\u3068\u9762\u5012\u306a\u306e\u3067\u7c21\u6613\u7684\u306b\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002Cassandra \u306e PID \u3092\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406\u3057\u3001\u6a19\u6e96\u51fa\u529b\u304a\u3088\u3073\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u306f\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u3002\n\n```\n\u2605 \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\n[cassandra[01-05]]# cat << 'EOS' > /etc/init.d/cassandra && sudo chmod +x /etc/init.d/cassandra\n#!/bin/sh\nCASSANDRA_ROOT_DIR=/opt/cassandra\nCASSANDRA_BIN_DIR=${CASSANDRA_ROOT_DIR}/bin\nCASSANDRA_LOG_DIR=/var/log/cassandra\nCASSANDRA_RUN_DIR=/var/run/cassandra\ncase \"$1\" in\n  start)\n    if [ ! -d ${CASSANDRA_LOG_DIR} ]; then\n      mkdir ${CASSANDRA_LOG_DIR}\n    fi\n    if [ ! -d ${CASSANDRA_RUN_DIR} ]; then\n      mkdir ${CASSANDRA_RUN_DIR}\n    fi\n    if [ -e ${CASSANDRA_RUN_DIR}/cassandra.pid ]; then\n      if [ 1 -ne $(ps $(cat ${CASSANDRA_RUN_DIR}/cassandra.pid) | wc -l) ]; then\n        echo \"NG: already running (pid=$(cat ${CASSANDRA_RUN_DIR}/cassandra.pid))\"\n        exit 1\n      fi\n    fi\n    ${CASSANDRA_BIN_DIR}/cassandra -p ${CASSANDRA_RUN_DIR}/cassandra.pid >> ${CASSANDRA_LOG_DIR}/cassandra.log 2>&1\n    echo \"OK: running cassandra (pid=$(cat ${CASSANDRA_RUN_DIR}/cassandra.pid))\"\n    ;;\n  stop)\n    kill $(cat ${CASSANDRA_RUN_DIR}/cassandra.pid)\n    echo \"OK: stopped cassandra\"\n    ;;\n  restart)\n    $0 stop\n    sleep 2\n    $0 start\n    ;;\n  *)\n    echo \"Usage: `basename $0` start|stop|restart\"\nesac\nexit 0\nEOS\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\nCassandra \u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b\u3002\u4e00\u756a\u6700\u521d\u306b\u8d77\u52d5\u3059\u308b\u30ce\u30fc\u30c9\u306f seeds \u3067\u8a2d\u5b9a\u3057\u305f\u3069\u308c\u304b\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002Cluster \u5185\u306b seeds \u306b\u8a2d\u5b9a\u3057\u305f \u30ce\u30fc\u30c9\u304c 1 \u53f0\u3067\u3082\u3042\u308c\u3070\u826f\u3044\u305f\u3081\u3001\u6b21\u306b\u8d77\u52d5\u3059\u308b\u30ce\u30fc\u30c9\u306f\u3069\u308c\u3067\u3082\u304b\u307e\u308f\u306a\u3044\u3002\u6700\u5f8c\u306b\u4ed8\u5c5e\u306e nodetool \u30b3\u30de\u30f3\u30c9\u3067 Cluster \u306e\u60c5\u5831\u304c\u53d6\u5f97\u3059\u308b\u3002\n\n```\n\u2605 \u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b (\u540c\u69d8\u306b\u4ed6\u306e\u30b5\u30fc\u30d0\u3067\u3082\u884c\u306a\u3046)\n[cassandra[01-05]]# /etc/init.d/cassandra start\nOK: running cassandra (pid=24225)\n\n\u2605 \u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u30ce\u30fc\u30c9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u8868\u793a\u3059\u308b\n[cassandra[01-05]]# /opt/cassandra/bin/nodetool status\nDatacenter: datacenter1\n=======================\nStatus=Up/Down\n|/ State=Normal/Leaving/Joining/Moving\n--  Address                             Load       Tokens  Owns (effective)  Host ID                               Rack\nUN  2402:4200:1:52:5054:40ff:fe1a:d412  55.16 KB   4       10.5%             40be2f96-9871-45b9-81e8-03364816bd39  rack1\nUN  2402:4200:1:52:5054:5eff:fee1:1174  58.55 KB   4       32.9%             36afe480-8b7d-4a42-9dae-979858f9395a  rack1\nUN  2402:4200:1:52:5054:60ff:fedb:ae9c  49.23 KB   4       16.1%             3824c783-6282-4615-99d9-58a8fc88bc4b  rack1\nUN  2402:4200:1:52:5054:7cff:fe4c:10cf  55.19 KB   4       21.3%             bc53b062-4258-4c03-ad6f-f9d482728c4e  rack1\nUN  2402:4200:1:52:5054:6cff:fefc:7aa   49.28 KB   4       19.2%             1a917447-b882-4f39-9b4d-cc87db860d36  rack1\n```\n\n## \u53c2\u8003\u306b\u3057\u305f\u6587\u732e\u306a\u3069\n\n* [Datastax Apache Cassandra 1.2](http://www.datastax.com/documentation/cassandra/1.2/index.html)\n* [Apache Cassandra 1.1.0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u52d5\u4f5c\u78ba\u8a8d](http://seijimomoto.blogspot.jp/2012/05/apache-cassandra-110.html)\n* [Cassandra\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7](http://metasearch.sourceforge.jp/wiki/index.php?Cassandra\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7#z895a637)\n* [Apache Cassandra\u3067NoSQL\u306b\u6311\u6226 \u524d\u7de8](http://blog.gmocloud.com/?p=560)\n* [Cassandra\u30e1\u30e2\u305d\u306e1(\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u3001\u30c7\u30fc\u30bf\u64cd\u4f5c\u306b\u3064\u3044\u3066)](https://hiroakis.com/blog/2012/10/17/cassandra\u30e1\u30e2\u305d\u306e1\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u3001\u30c7\u30fc\u30bf/)\n* [Cassandra \u306e\u81ea\u52d5\u8d77\u52d5 Shellscript](http://d.hatena.ne.jp/proxy0721/20100717/1279368987)\n"}