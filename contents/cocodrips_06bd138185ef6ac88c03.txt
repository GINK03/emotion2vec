{"tags": ["Scheme", "SICP"], "context": "\u30aa\u30f3\u30e9\u30a4\u30f3SICP\u8aad\u66f8\u5973\u5b50\u4f1a #10 (1.3.3~1.3.4) - connpass\u306e\u307e\u3068\u3081\u3067\u3059\uff01\n\n1.37\nN_i, D_i \u304c\u3059\u3079\u30661\u306e\u7121\u9650\u9023\u5206\u6570\u306f1/\u03c6 (\u03c6\u306f\u9ec4\u91d1\u6bd4)\n;; \u518d\u5e30\u30d7\u30ed\u30bb\u30b9\n(define (cont-frac n d k)\n  (define (iter i)\n    (if (= i k)\n    (/ (n i) (d i))\n    #?= (/ (n i) (+ (d i) (iter (+ i 1))))))\n  (iter 1))\n\n(cont-frac (lambda (i) 1.0)\n       (lambda (i) 1.0)\n       20)\n\n;; #?-    0.5\n;; #?-    0.6666666666666666\n;; #?-    0.6000000000000001\n;; #?-    0.625\n;; #?-    0.6153846153846154\n;; #?-    0.6190476190476191\n;; #?-    0.6176470588235294\n;; #?-    0.6181818181818182\n;; #?-    0.6179775280898876\n;; #?-    0.6180555555555556\n;; #?-    0.6180257510729613\n;; #?-    0.6180371352785146\n;; #?-    0.6180327868852459\n;; #?-    0.6180344478216819\n;; #?-    0.6180338134001252\n;; #?-    0.6180340557275542\n;; #?-    0.6180339631667064\n;; #?-    0.6180339985218034\n;; #?-    0.6180339850173578\n\n;; \u53cd\u5fa9\u30d7\u30ed\u30bb\u30b9(\u672b\u5c3e\u518d\u5e30)\n(define (cont-frac n d k)\n  (define (iter i result)\n    (print i \"->\" result)\n    (if (= i 0)\n    result\n    (iter (- i 1)\n          (/ (n i)\n         (+ (d i) result)))))\n  (iter k 0))\n\n(cont-frac (lambda (i) 1.0)\n       (lambda (i) 1.0)\n       20)\n\n\n;; 20->0\n;; 19->1.0\n;; 18->0.5\n;; 17->0.6666666666666666\n;; 16->0.6000000000000001\n;; 15->0.625\n;; 14->0.6153846153846154\n;; 13->0.6190476190476191\n;; 12->0.6176470588235294\n;; 11->0.6181818181818182\n;; 10->0.6179775280898876\n;; 9->0.6180555555555556\n;; 8->0.6180257510729613\n;; 7->0.6180371352785146\n;; 6->0.6180327868852459\n;; 5->0.6180344478216819\n;; 4->0.6180338134001252\n;; 3->0.6180340557275542\n;; 2->0.6180339631667064\n;; 1->0.6180339985218034\n;; 0->0.6180339850173578\n;; 0.6180339850173578\n\nk = 11 \u304f\u3089\u3044\u304b\u30894\u6841\u306e\u7cbe\u5ea6\u306b\u306a\u3063\u305f\n\n1.38 \u81ea\u7136\u5bfe\u6570\u306e\u7121\u9650\u9023\u5206\u6570\n(define (cont-frac n d k)\n  (define (iter i)\n    (if (= i k)\n    (/ (n i) (d i))\n    (/ (n i) (+ (d i) (iter (+ i 1))))))\n  (iter 1))\n\n(define (n-cont-frac n)\n  (define (n-iter j)\n    (if (> j n)\n    \"end\"\n    (let ((ans\n           (cont-frac (lambda (i) 1.0)\n              (lambda (i)\n                (let ((div (quotient i 3))\n                  (mod (modulo i 3)))\n                  (if (= mod 2)\n                  (- i div)\n                  1.0)))\n              j)))\n      (print j \"=>\" (+ 2 ans))\n      (n-iter (+ j 1)))\n    ))\n  (n-iter 1))\n\n(n-cont-frac 10)\n;; 1=>3.0\n;; 2=>2.6666666666666665\n;; 3=>2.75\n;; 4=>2.7142857142857144\n;; 5=>2.71875\n;; 6=>2.717948717948718\n;; 7=>2.7183098591549295\n;; 8=>2.718279569892473\n;; 9=>2.718283582089552\n;; 10=>2.7182817182817183\n;; \"end\"\n\n\n;;\u53cd\u5fa9\u30d7\u30ed\u30bb\u30b9\n(define (cont-frac n d k)\n  (define (iter i result)\n    (if (= i 0)\n    result\n    (iter (- i 1)\n          (/ (n i)\n         (+ (d i) result)))))\n    (iter k 0))\n(n-cont-frac 10)\n\n;; 1=>3.0\n;; 2=>2.6666666666666665\n;; 3=>2.75\n;; 4=>2.7142857142857144\n;; 5=>2.71875\n;; 6=>2.717948717948718\n;; 7=>2.7183098591549295\n;; 8=>2.718279569892473\n;; 9=>2.718283582089552\n;; 10=>2.7182817182817183```\n\n\u53cd\u5fa9\u30d7\u30ed\u30bb\u30b9\u3082\u518d\u5e30\u30d7\u30ed\u30bb\u30b9\u3082\u3061\u3083\u3093\u3068\u3046\u3054\u3044\u3066\u308b\u3063\u307d\u3044\uff01\n\n1.39 tan_x \u306e\u221e\u9023\u5206\u6570\n(define (cont-frac n d k)\n  (define (iter i)\n    (if (= i k)\n    (/ (n i) (d i))\n    (/ (n i) (+ (d i) (iter (+ i 1))))))\n  (iter 1))\n\n(define (tan x)\n  (cont-frac (lambda (i)\n           (if (= i 0) x\n           (* -1 (* x x))))\n         (lambda (i) (- (* 2 i) 1))\n         n))\n\n(define pi 3.141592)\n(tan (/ pi 4)) ;; 0.9999996732051569\n\n\n[\u30aa\u30f3\u30e9\u30a4\u30f3SICP\u8aad\u66f8\u5973\u5b50\u4f1a #10 (1.3.3~1.3.4) - connpass](http://ladiespp.connpass.com/event/30416/)\u306e\u307e\u3068\u3081\u3067\u3059\uff01\n\n## 1.37\nN_i, D_i \u304c\u3059\u3079\u30661\u306e\u7121\u9650\u9023\u5206\u6570\u306f1/\u03c6 (\u03c6\u306f\u9ec4\u91d1\u6bd4)\n\n```lisp\n;; \u518d\u5e30\u30d7\u30ed\u30bb\u30b9\n(define (cont-frac n d k)\n  (define (iter i)\n    (if (= i k)\n\t(/ (n i) (d i))\n\t#?= (/ (n i) (+ (d i) (iter (+ i 1))))))\n  (iter 1))\n\n(cont-frac (lambda (i) 1.0)\n\t   (lambda (i) 1.0)\n\t   20)\n\n;; #?-    0.5\n;; #?-    0.6666666666666666\n;; #?-    0.6000000000000001\n;; #?-    0.625\n;; #?-    0.6153846153846154\n;; #?-    0.6190476190476191\n;; #?-    0.6176470588235294\n;; #?-    0.6181818181818182\n;; #?-    0.6179775280898876\n;; #?-    0.6180555555555556\n;; #?-    0.6180257510729613\n;; #?-    0.6180371352785146\n;; #?-    0.6180327868852459\n;; #?-    0.6180344478216819\n;; #?-    0.6180338134001252\n;; #?-    0.6180340557275542\n;; #?-    0.6180339631667064\n;; #?-    0.6180339985218034\n;; #?-    0.6180339850173578\n\n;; \u53cd\u5fa9\u30d7\u30ed\u30bb\u30b9(\u672b\u5c3e\u518d\u5e30)\n(define (cont-frac n d k)\n  (define (iter i result)\n    (print i \"->\" result)\n    (if (= i 0)\n\tresult\n\t(iter (- i 1)\n\t      (/ (n i)\n\t\t (+ (d i) result)))))\n  (iter k 0))\n\n(cont-frac (lambda (i) 1.0)\n\t   (lambda (i) 1.0)\n\t   20)\n\n\n;; 20->0\n;; 19->1.0\n;; 18->0.5\n;; 17->0.6666666666666666\n;; 16->0.6000000000000001\n;; 15->0.625\n;; 14->0.6153846153846154\n;; 13->0.6190476190476191\n;; 12->0.6176470588235294\n;; 11->0.6181818181818182\n;; 10->0.6179775280898876\n;; 9->0.6180555555555556\n;; 8->0.6180257510729613\n;; 7->0.6180371352785146\n;; 6->0.6180327868852459\n;; 5->0.6180344478216819\n;; 4->0.6180338134001252\n;; 3->0.6180340557275542\n;; 2->0.6180339631667064\n;; 1->0.6180339985218034\n;; 0->0.6180339850173578\n;; 0.6180339850173578\n```\n\nk = 11 \u304f\u3089\u3044\u304b\u30894\u6841\u306e\u7cbe\u5ea6\u306b\u306a\u3063\u305f\n\n## 1.38 \u81ea\u7136\u5bfe\u6570\u306e\u7121\u9650\u9023\u5206\u6570\n\n```lisp\n(define (cont-frac n d k)\n  (define (iter i)\n    (if (= i k)\n\t(/ (n i) (d i))\n\t(/ (n i) (+ (d i) (iter (+ i 1))))))\n  (iter 1))\n\n(define (n-cont-frac n)\n  (define (n-iter j)\n    (if (> j n)\n\t\"end\"\n\t(let ((ans\n\t       (cont-frac (lambda (i) 1.0)\n\t\t\t  (lambda (i)\n\t\t\t    (let ((div (quotient i 3))\n\t\t\t\t  (mod (modulo i 3)))\n\t\t\t      (if (= mod 2)\n\t\t\t\t  (- i div)\n\t\t\t\t  1.0)))\n\t\t\t  j)))\n\t  (print j \"=>\" (+ 2 ans))\n\t  (n-iter (+ j 1)))\n\t))\n  (n-iter 1))\n\n(n-cont-frac 10)\n;; 1=>3.0\n;; 2=>2.6666666666666665\n;; 3=>2.75\n;; 4=>2.7142857142857144\n;; 5=>2.71875\n;; 6=>2.717948717948718\n;; 7=>2.7183098591549295\n;; 8=>2.718279569892473\n;; 9=>2.718283582089552\n;; 10=>2.7182817182817183\n;; \"end\"\n\n\n;;\u53cd\u5fa9\u30d7\u30ed\u30bb\u30b9\n(define (cont-frac n d k)\n  (define (iter i result)\n    (if (= i 0)\n\tresult\n\t(iter (- i 1)\n\t      (/ (n i)\n\t\t (+ (d i) result)))))\n    (iter k 0))\n(n-cont-frac 10)\n\n;; 1=>3.0\n;; 2=>2.6666666666666665\n;; 3=>2.75\n;; 4=>2.7142857142857144\n;; 5=>2.71875\n;; 6=>2.717948717948718\n;; 7=>2.7183098591549295\n;; 8=>2.718279569892473\n;; 9=>2.718283582089552\n;; 10=>2.7182817182817183```\n```\n\n\u53cd\u5fa9\u30d7\u30ed\u30bb\u30b9\u3082\u518d\u5e30\u30d7\u30ed\u30bb\u30b9\u3082\u3061\u3083\u3093\u3068\u3046\u3054\u3044\u3066\u308b\u3063\u307d\u3044\uff01\n\n## 1.39 tan_x \u306e\u221e\u9023\u5206\u6570\n\n\n\n```lisp\n(define (cont-frac n d k)\n  (define (iter i)\n    (if (= i k)\n\t(/ (n i) (d i))\n\t(/ (n i) (+ (d i) (iter (+ i 1))))))\n  (iter 1))\n\n(define (tan x)\n  (cont-frac (lambda (i)\n\t       (if (= i 0) x\n\t\t   (* -1 (* x x))))\n\t     (lambda (i) (- (* 2 i) 1))\n\t     n))\n\n(define pi 3.141592)\n(tan (/ pi 4)) ;; 0.9999996732051569\n```\n\n"}