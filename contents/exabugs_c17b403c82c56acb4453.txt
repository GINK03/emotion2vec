{"context": "\n\n\u6982\u8981\nAWS \u306e \u30a2\u30ab\u30a6\u30f3\u30c8\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9 Cognito UserPools \u304c\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nCognito \u3067\u306f\u3001iOS/Android/Javascript \u306e SDK \u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f Javascript \u7248\u3092\u4f7f\u3063\u3066\u3001Cordova \u304b\u3089\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u96db\u5f62\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nCognito\n\n\nCognito User Pools\n\u307e\u305a\u3001User Pool \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u300cCreate a User Pool\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n(\u2193\u753b\u50cf\u306f\u3001\u3059\u3067\u306b\uff11\u500b\u5b58\u5728\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\u3002\u6c17\u306b\u3057\u306a\u3044)\n\n\u300cPool Name\u300d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u300cQiitaPool\u300d\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u300cStep through setting\u300d\u3067\u7d30\u304b\u304f\u8a2d\u5b9a\u3057\u306a\u304c\u3089\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u5c5e\u6027\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u300cemail\u300d\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u300cOn\u300d\u306a\u306e\u3067\u305d\u306e\u307e\u307e\u3067\u3002\n\u4eca\u56de\u306f\u300clocale\u300d\u3082\u8db3\u3057\u3066\u307f\u307e\u3057\u305f\u3002(\u5c06\u6765\u306f\u591a\u8a00\u8a9e\u5bfe\u5fdc\u3057\u305f\u3044\u306e\u3067\u3002)\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u304a\u597d\u307f\u3067\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Email \u3067\u30d9\u30ea\u30d5\u30a1\u30a4\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u3059\u304c\u3001Email \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u65e5\u672c\u8a9e\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n\u30b9\u30de\u30d5\u30a9\u306e\u5834\u5408\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u3092\u8a18\u61b6\u3057\u3066\u304f\u308c\u308b\u306e\u304b\u306a\uff1f\n\u5f8c\u304b\u3089\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u3053\u3053\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u300cNo\u300d\u3067\u5148\u306b\u9032\u3080\u3002\n\n\u6b21\u304c\u91cd\u8981\n\u300c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u306e\u8ffd\u52a0\u3002(\u5c11\u306a\u304f\u3068\u3082\u4e00\u3064\u306f\u8a2d\u5b9a\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u4f55\u3082\u3067\u304d\u306a\u3044\u3002)\n\u4eca\u56de\u306f\u300cQiitaTestApp\u300d\u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\nJavascript SDK \u3092\u4f7f\u3046\u5834\u5408\u3001\u300cGenerate client secret\u300d\u306f OFF \u306b\u3059\u308b\u3088\u3046\u306b\u66f8\u3044\u3066\u3042\u3063\u305f\u3002\nhttps://docs.aws.amazon.com/cognito/latest/developerguide/setting-up-the-javascript-sdk.html\n\n\u300cCreate app\u300d\u30dc\u30bf\u30f3\u3092\u3001\u5fd8\u308c\u305a\u306b\u62bc\u3059\u3002\n\n\u30e6\u30fc\u30b6\u751f\u6210/\u8a8d\u8a3c\u306e\u5404\u30d5\u30a7\u30fc\u30ba\u3067\u3001Lambda \u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u5f8c\u304b\u3089\u3001\u5fc5\u8981\u306b\u306a\u3063\u305f\u3089\u8a2d\u5b9a\u3057\u3088\u3046\u3002\u5148\u306b\u9032\u3080\u3002\n\n\u6700\u5f8c\u306e\u78ba\u8a8d\u3002\n\u3053\u306e\u78ba\u8a8d\u753b\u9762\u304b\u3089\u306e\u7de8\u96c6\u306f\u3001\u30d0\u30b0\u3063\u3066\u3044\u308b\u306e\u304b\u3001\u3046\u307e\u304f\u7de8\u96c6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u3093\u306a\u3068\u304d\u306f\u3001\u6700\u521d\u306b\u623b\u3063\u3066\u3084\u308a\u76f4\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\n\u554f\u984c\u306a\u3044\u306a\u3089\u300cCreate pool\u300d\u3092\u62bc\u4e0b\u3002\n\n\u3046\u307e\u304f\u4f5c\u6210\u3055\u308c\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\n\nID\u78ba\u8a8d\n\u3053\u3053\u3067\u53d6\u5f97\u3057\u305f\u306e\u306f\u3001UserPool\u306eID \u3068 App\u306eID\u3002\u3082\u3046\u4e00\u56de\u78ba\u8a8d\u3057\u3066\u304a\u3053\u3046\u3002\nUserPool\u306eID\u306f\u3001\u4ee5\u4e0b\u3002 App\u306eID\u306f \u925b\u7b46\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\n\n\u4ee5\u4e0b\u306b\u3001App\u306eID\u304c\u66f8\u3044\u3066\u3042\u308b\u3002\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n\nCognito Identity Pools\n\u6b21\u306f\u3001Identity Pool \u3092\u4f5c\u6210\u3059\u308b\u3002\nIdentity Pool \u3068 User Pool \u304c\u5225\u3005\u306b\u5b58\u5728\u3057\u3066\u3044\u308b\u306e\u304c\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u304c\u3001\nIdentity Pool \u3068 User Pool \u306f 1\u5bfe\u591a \u306e\u95a2\u4fc2\u306b\u3042\u308b\u3088\u3046\u3060\u3002\n\n\u300cCreate new Identity pool\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002\n(\u2193\u753b\u50cf\u306f\u3001\u3059\u3067\u306b\uff12\u500b\u5b58\u5728\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\u3002\u6c17\u306b\u3057\u306a\u3044)\n\n\u300cQiitaIdentityPool\u300d\u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u300cUnauthenticated Identities\u300d\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u524d\u306e\u30a2\u30af\u30bb\u30b9\u306b\u5bfe\u3059\u308b\u6a29\u9650\u306e\u4ed8\u4e0e\u3060\u3068\u601d\u308f\u308c\u308b\u3002\n\u3053\u306e\u9700\u8981\u306f\u3088\u304f\u3042\u308b\u306e\u3067\u3001\u4eca\u56de\u306f ON \u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u6a29\u9650\u306f\u5f8c\u304b\u3089\u8a2d\u5b9a\u3059\u308b\u3002\n\u300cAuthenticated providers\u300d\u306e\u8a2d\u5b9a\u3002\n\u3053\u3053\u3067\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f User Pool \u306e ID \u3068\u3001App \u306e ID \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u4ed6\u306b\u3082\u3001Amazon, Facebook, Google, Twitter, OpenID, SAML \u306a\u3069\u304c Provider \u3068\u3057\u3066\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u3060\u3002\n\u3042\u3041\u3001\u3084\u3063\u3068\u610f\u5473\u304c\u308f\u304b\u3063\u305f\u3002UserPool \u306f \u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0 \u3067\u3001IdentityPool \u306f \u8a8d\u8a3c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u306e\u5f79\u5272\u304b\u3002\n\u305d\u3046\u3044\u3048\u3070\u3001Cognito\u306f\u3001\u8907\u6570\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u300c\u540d\u5bc4\u305b\u300d\u3059\u308b\u6a5f\u80fd\u3082\u3042\u308b\u3068\u3001\u3069\u3053\u304b\u3067\u8aad\u3093\u3060\u3002\n\u300cCreate Pool\u300d\u3092\u62bc\u4e0b\u3057\u3066\u3001\u5148\u306b\u9032\u3080\u3002\n\n\u8a8d\u8a3c\u524d\u3068\u8a8d\u8a3c\u5f8c\u306e\u30e6\u30fc\u30b6\u306e\u3001\u30ed\u30fc\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u300c\u65b0\u3057\u3044IAM\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\u300d\u3057\u304b\u3067\u304d\u306a\u3044\u3088\u3046\u3060\u3002\u306a\u305c\u304b\u65e2\u5b58\u306e\u30ed\u30fc\u30eb\u306f\u9078\u629e\u3067\u304d\u306a\u3044\u3002\n\u7279\u306b\u5909\u66f4\u305b\u305a\u306b\u300c\u8a31\u53ef\u300d\u3092\u62bc\u4e0b\u3002\u5148\u306b\u9032\u3080\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3057\u3066\u304f\u308c\u308b\u753b\u9762\u304c\u3001\u3053\u3053\u3067\u631f\u307e\u308c\u308b\u3002\nSDK \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3082\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u300cGo to Dashboard\u300d\u3092\u62bc\u4e0b\u3059\u308c\u3070\u3001\u5b8c\u4e86\u3002\n\n\nID\u78ba\u8a8d\n\u3053\u3053\u3067\u53d6\u5f97\u3057\u305f\u306e\u306f\u3001IdentityPool\u306eID\u3002\u3082\u3046\u4e00\u56de\u78ba\u8a8d\u3057\u3066\u304a\u3053\u3046\u3002\n\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nCognito \u3092\u4f7f\u3046\u305f\u3081\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea \u3092\u3001\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u96c6\u3081\u3066\u304f\u308b\nhttps://docs.aws.amazon.com/cognito/latest/developerguide/setting-up-the-javascript-sdk.html\n\nAmazon Cognito AWS SDK for JavaScript\nhttps://raw.githubusercontent.com/aws/amazon-cognito-identity-js/master/dist/aws-cognito-sdk.min.js\n\nAmazon Cognito Identity SDK for JavaScript\nhttps://raw.githubusercontent.com/aws/amazon-cognito-identity-js/master/dist/amazon-cognito-identity.min.js\n\nJavaScript BN library for BigInteger computations\nhttp://www-cs-students.stanford.edu/~tjw/jsbn/\n\n\nStanford JavaScript Crypto Library\nhttps://github.com/bitwiseshiftleft/sjcl\ncodecBytes \u3092\u542b\u3081\u3066\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3089\u3057\u3044\u3002\u624b\u9806\u306f\u4ee5\u4e0b\u3002\n$ git clone https://github.com/bitwiseshiftleft/sjcl.git\n$ cd sjcl\n$ ./configure --with-all\n$ make\n\n\nMoment.js, a JavaScript library used for date manipulation\nhttp://momentjs.com/\nAWS SDK for JavaScript in the Browser\nhttps://github.com/aws/aws-sdk-js/releases\n(\u307e\u305f\u306f \u76f4\u30ea\u30f3\u30af https://sdk.amazonaws.com/js/aws-sdk-2.6.9.min.js )\n\n\u5168\u90e8\u3067\u4ee5\u4e0b\u306b\u306a\u308b\u3002\u3053\u308c\u3089\u306f\u5f8c\u3067\u3001\u307e\u3068\u3081\u3066\u3001cordova \u306b\u5165\u308c\u3088\u3046\u3002\namazon-cognito-identity.min.js\naws-cognito-sdk.min.js\naws-sdk.min.js\nmoment.min.js\nsjcl.min.js\njsbn.js\njsbn2.js\n\n\nCordova\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nhttps://cordova.apache.org/\n\nGet Started \u306e\u624b\u9806\u3069\u304a\u308a\u3002\n\u540d\u524d\u306f cordova_cognito \u306b\u3057\u305f\u3002\n$ npm install -g cordova\n$ cordova create cordova_cognito\n$ cd cordova_cognito\n$ cordova platform add browser\n$ cordova run browser\n\n\n\u96db\u5f62\u30b3\u30fc\u30c9\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3092 www/js \u306b\u30b3\u30d4\u30fc\nindex.html \u306b\u30d5\u30a9\u30fc\u30e0\u3092\u8ffd\u52a0\nwww/js/cognito.js \u306b\u51e6\u7406\u3092\u8ffd\u52a0\n\n\nindex.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n    <meta charset=\"UTF-8\"/>\n    <!--\n    <meta http-equiv=\"Content-Security-Policy\"\n          content=\"default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *\">\n    -->\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"msapplication-tap-highlight\" content=\"no\">\n    <meta name=\"viewport\"\n          content=\"user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/bootstrap-theme.min.css\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/index.css\">\n    <title>Hello World</title>\n</head>\n<body>\n    <div class=\"app\">\n        <h1>Apache Cordova</h1>\n        <div id=\"deviceready\" class=\"blink\">\n            <p class=\"event listening\">Connecting to Device</p>\n            <p class=\"event received\">Device is Ready</p>\n        </div>\n    </div>\n\n    <form>\n        <h2>\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7</h2>\n        <div id=\"message\" class=\"alert\" style=\"display:none;\"></div>\n        <label for=\"inputUsername\" class=\"sr-only\">\u30e6\u30fc\u30b6\u30fc\u540d</label>\n        <input type=\"text\" id=\"inputUsername\" class=\"form-control\" placeholder=\"User name\" required autofocus></input>\n        <label for=\"inputPassword\" class=\"sr-only\">\u30d1\u30b9\u30ef\u30fc\u30c9</label>\n        <input type=\"password\" id=\"inputPassword\" class=\"form-control\" placeholder=\"Password\" required></input>\n        <label for=\"inputEmail\" class=\"sr-only\">\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9</label>\n        <input type=\"text\" id=\"inputEmail\" class=\"form-control\" placeholder=\"EMail\" required></input>\n        <label for=\"inputLocale\" class=\"sr-only\">\u30ed\u30b1\u30fc\u30eb</label>\n        <input type=\"text\" id=\"inputLocale\" class=\"form-control\" placeholder=\"Locale\" required></input>\n        <input type=\"button\" class=\"btn btn-lg btn-primary btn-bloc\" id=\"user_add_btn\" value=\"\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\"></input>\n    </form>\n\n\n\n    <script type=\"text/javascript\" src=\"js/min/aws-sdk.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/src/jsbn.js\"></script>\n    <script type=\"text/javascript\" src=\"js/src/jsbn2.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/sjcl.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/moment.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/aws-cognito-sdk.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/amazon-cognito-identity.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/jquery-2.2.4.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/bootstrap.min.js\"></script>\n    <script type=\"text/javascript\" src=\"cordova.js\"></script>\n    <script type=\"text/javascript\" src=\"js/index.js\"></script>\n    <script type=\"text/javascript\" src=\"js/cognito.js\"></script>\n\n</body>\n</html>\n\n\n\ncognito.js\nvar region = 'ap-northeast-1'; // \u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\n\nvar IdentityPoolId = {\n  AWS: 'ap-northeast-1:4a0a8023-7770-499a-a92e-e8cd3d788871', // <YOUR_IDENTITY_POOL_ID>\n  AWSCognito: 'ap-northeast-1_uSVyq55eG' // <YOUR_USER_POOL_ID>\n};\n\nvar ClientId = '6elsp8qa9ecfbj8la64vrkr8ts'; // \u30a2\u30d7\u30eaID\n\n///////////////////\n\nvar idp = ['cognito-idp', region, 'amazonaws', 'com'].join(\".\");\nvar endpoint = [idp, IdentityPoolId.AWSCognito].join(\"/\");\n\n// Initialize the Amazon Cognito credentials provider\nAWS.config.region = region; // Region\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\n  IdentityPoolId: IdentityPoolId.AWS\n});\n\n// Initialize the Amazon Cognito credentials provider\nAWSCognito.config.region = region; // Region\nAWSCognito.config.credentials = new AWS.CognitoIdentityCredentials({\n  IdentityPoolId: IdentityPoolId.AWSCognito\n});\n\nvar data = {\n  UserPoolId: IdentityPoolId.AWSCognito,\n  ClientId: ClientId\n};\nvar userPool = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(data);\n\nvar cognitoUser;\n\nfunction message(div, message_text, message_class) {\n  div.text(message_text);\n  div.addClass(message_class);\n  div.show();\n  setTimeout(function () {\n    div.fadeOut();\n    div.removeClass(message_class);\n  }, 5000);\n}\n\n// Use case 1. Registering a user with the application.\n$('#user_add_btn').click(function () {\n  var username = $(\"#inputUsername\").val();\n  var password = $(\"#inputPassword\").val();\n\n  var email = $(\"#inputEmail\").val();\n  var locale = $(\"#inputLocale\").val();\n\n  var attributeList = [];\n  attributeList.push({Name: \"email\", Value: email});\n  attributeList.push({Name: \"locale\", Value: locale});\n\n  if (!username || !password) {\n    return false;\n  }\n\n  userPool.signUp(username, password, attributeList, null, function (err, result) {\n    if (err) {\n      console.log(err);\n      message($('#message'), err, \"alert-danger\");\n    } else {\n      cognitoUser = result.user;\n      console.log('user name is ' + cognitoUser.getUsername());\n      var message_text = cognitoUser.getUsername() + \"\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\";\n      message($('#message'), message_text, \"alert-success\");\n    }\n  });\n});\n\n\n\n\u4f7f\u3044\u65b9\n\n\u300c\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u300d\u3067\u30e6\u30fc\u30b6\u767b\u9332\u3059\u308b\u3068\u3001EMail\u5b9b\u306b Verification \u30b3\u30fc\u30c9\u304c\u9001\u3089\u308c\u3066\u304d\u307e\u3059\u3002\n\u300c\u30b3\u30f3\u30d5\u30a1\u30fc\u30e0\u300d\u3067 Verification \u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u3001\u30b3\u30f3\u30d5\u30a1\u30fc\u30e0\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30d5\u30a1\u30fc\u30e0\u5f8c\u306f\u3001\u300c\u30ed\u30b0\u30a4\u30f3\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n\u96db\u5f62\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e00\u5f0f\u3092 GitHub \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nPool ID \u306f\u6652\u3057\u3066\u307e\u3059\u306e\u3067\u3001\u96db\u5f62\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u307e\u307e\u3067 \u30e6\u30fc\u30b6\u767b\u9332/\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30ed\u30fc\u30eb\u306b\u6a29\u9650\u3092\u3064\u3051\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u5b9f\u969b\u306b\u306f\u4f55\u3082\u51fa\u6765\u306a\u3044\u3067\u3059\u3002\n\n\n\u4f7f\u3044\u65b9\n$ git clone https://github.com/exabugs/cordova_cognito.git\n$ cd cordova_cognito\n$ cordova run browser\n\n\n\u4fee\u6b63\u7b87\u6240\nwww/js/cognito.js \u306e ID \u90e8\u5206\u3092\u3001\u3042\u306a\u305f\u306e\u8a2d\u5b9a\u306b\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\u3002\n\ncognito.js\nvar IdentityPoolId = {\n  AWS: 'ap-northeast-1:4a0a8023-7770-499a-a92e-e8cd3d788871', // <YOUR_IDENTITY_POOL_ID>\n  AWSCognito: 'ap-northeast-1_uSVyq55eG' // <YOUR_USER_POOL_ID>\n};\n\nvar ClientId = '6elsp8qa9ecfbj8la64vrkr8ts'; // \u30a2\u30d7\u30eaID\n\n\n\n\u304a\u308f\u308a\u306b\n\n\u5b9f\u88c5\u304c\u9762\u5012\u306a\u30a2\u30ab\u30a6\u30f3\u30c8\u7ba1\u7406/\u8a8d\u8a3c \u304c\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u3068\u3066\u3082\u4fbf\u5229\u3067\u3059\u3002\nFacebook/Google/Twitter \u7b49\u3078\u306e\u8a8d\u8a3c\u3082\u3001\u4eca\u5f8c\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u6982\u8981\nAWS \u306e \u30a2\u30ab\u30a6\u30f3\u30c8\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9 Cognito UserPools \u304c\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nCognito \u3067\u306f\u3001iOS/Android/Javascript \u306e SDK \u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f Javascript \u7248\u3092\u4f7f\u3063\u3066\u3001Cordova \u304b\u3089\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u96db\u5f62\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n## Cognito\n\n![001.png](https://qiita-image-store.s3.amazonaws.com/0/69410/4ac2f6fc-e1aa-0a07-b1b4-c62336f224d6.png)\n\n### Cognito User Pools\n\u307e\u305a\u3001User Pool \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n![001_2.png](https://qiita-image-store.s3.amazonaws.com/0/69410/f5e78a90-d010-191e-9b9c-297f5fd7981e.png)\n\n\u300cCreate a User Pool\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n(\u2193\u753b\u50cf\u306f\u3001\u3059\u3067\u306b\uff11\u500b\u5b58\u5728\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\u3002\u6c17\u306b\u3057\u306a\u3044)\n![003.png](https://qiita-image-store.s3.amazonaws.com/0/69410/b028c349-97d2-5882-0c21-b35471ce4757.png)\n\n\u300cPool Name\u300d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u300cQiitaPool\u300d\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u300cStep through setting\u300d\u3067\u7d30\u304b\u304f\u8a2d\u5b9a\u3057\u306a\u304c\u3089\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n![004.png](https://qiita-image-store.s3.amazonaws.com/0/69410/270174fd-25c7-c98e-8e95-9b9c6309f7a3.png)\n\n\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u5c5e\u6027\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u300cemail\u300d\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u300cOn\u300d\u306a\u306e\u3067\u305d\u306e\u307e\u307e\u3067\u3002\n\u4eca\u56de\u306f\u300clocale\u300d\u3082\u8db3\u3057\u3066\u307f\u307e\u3057\u305f\u3002(\u5c06\u6765\u306f\u591a\u8a00\u8a9e\u5bfe\u5fdc\u3057\u305f\u3044\u306e\u3067\u3002)\n![005.png](https://qiita-image-store.s3.amazonaws.com/0/69410/a3d77845-5f0b-486d-5505-d7fb47b10d88.png)\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u304a\u597d\u307f\u3067\u3002\n![006.png](https://qiita-image-store.s3.amazonaws.com/0/69410/d9e9c73a-8e11-5c16-beb6-e055779c7149.png)\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Email \u3067\u30d9\u30ea\u30d5\u30a1\u30a4\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u3059\u304c\u3001Email \u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u65e5\u672c\u8a9e\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n![024.png](https://qiita-image-store.s3.amazonaws.com/0/69410/b3327a92-be5c-ab37-6a49-72731d6f554b.png)\n\n\u30b9\u30de\u30d5\u30a9\u306e\u5834\u5408\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u3092\u8a18\u61b6\u3057\u3066\u304f\u308c\u308b\u306e\u304b\u306a\uff1f\n\u5f8c\u304b\u3089\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u3053\u3053\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u300cNo\u300d\u3067\u5148\u306b\u9032\u3080\u3002\n![007.png](https://qiita-image-store.s3.amazonaws.com/0/69410/4fb68e2f-7960-a856-7cac-fc0f95b90af3.png)\n\n\u6b21\u304c\u91cd\u8981\n\n\u300c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u306e\u8ffd\u52a0\u3002(\u5c11\u306a\u304f\u3068\u3082\u4e00\u3064\u306f\u8a2d\u5b9a\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u4f55\u3082\u3067\u304d\u306a\u3044\u3002)\n\n\u4eca\u56de\u306f\u300cQiitaTestApp\u300d\u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\nJavascript SDK \u3092\u4f7f\u3046\u5834\u5408\u3001\u300cGenerate client secret\u300d\u306f OFF \u306b\u3059\u308b\u3088\u3046\u306b\u66f8\u3044\u3066\u3042\u3063\u305f\u3002\n\nhttps://docs.aws.amazon.com/cognito/latest/developerguide/setting-up-the-javascript-sdk.html\n![023.png](https://qiita-image-store.s3.amazonaws.com/0/69410/1156a464-19bd-8376-843e-33622f26d1b1.png)\n\n\u300cCreate app\u300d\u30dc\u30bf\u30f3\u3092\u3001\u5fd8\u308c\u305a\u306b\u62bc\u3059\u3002\n![010.png](https://qiita-image-store.s3.amazonaws.com/0/69410/86acea05-e945-b7b0-02a2-2c6bde76e854.png)\n\n\u30e6\u30fc\u30b6\u751f\u6210/\u8a8d\u8a3c\u306e\u5404\u30d5\u30a7\u30fc\u30ba\u3067\u3001Lambda \u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u5f8c\u304b\u3089\u3001\u5fc5\u8981\u306b\u306a\u3063\u305f\u3089\u8a2d\u5b9a\u3057\u3088\u3046\u3002\u5148\u306b\u9032\u3080\u3002\n![009.png](https://qiita-image-store.s3.amazonaws.com/0/69410/16ec224a-3652-0e6d-31a7-8eddce8a3702.png)\n\n\u6700\u5f8c\u306e\u78ba\u8a8d\u3002\n\n\u3053\u306e\u78ba\u8a8d\u753b\u9762\u304b\u3089\u306e\u7de8\u96c6\u306f\u3001\u30d0\u30b0\u3063\u3066\u3044\u308b\u306e\u304b\u3001\u3046\u307e\u304f\u7de8\u96c6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u3093\u306a\u3068\u304d\u306f\u3001\u6700\u521d\u306b\u623b\u3063\u3066\u3084\u308a\u76f4\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\n\n\u554f\u984c\u306a\u3044\u306a\u3089\u300cCreate pool\u300d\u3092\u62bc\u4e0b\u3002\n![011.png](https://qiita-image-store.s3.amazonaws.com/0/69410/09f593fe-15d8-d480-f522-93035585fa27.png)\n\n\n\n\u3046\u307e\u304f\u4f5c\u6210\u3055\u308c\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n![012.png](https://qiita-image-store.s3.amazonaws.com/0/69410/c3669cc4-6511-17ec-d660-26f115358f22.png)\n\n\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n![013.png](https://qiita-image-store.s3.amazonaws.com/0/69410/46204abe-5f96-9d1a-da6e-d89e8929a543.png)\n\n### ID\u78ba\u8a8d\n\u3053\u3053\u3067\u53d6\u5f97\u3057\u305f\u306e\u306f\u3001UserPool\u306eID \u3068 App\u306eID\u3002\u3082\u3046\u4e00\u56de\u78ba\u8a8d\u3057\u3066\u304a\u3053\u3046\u3002\nUserPool\u306eID\u306f\u3001\u4ee5\u4e0b\u3002 App\u306eID\u306f \u925b\u7b46\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\n![021.png](https://qiita-image-store.s3.amazonaws.com/0/69410/4179619e-f511-d35b-5feb-5c1325e60ac7.png)\n\u4ee5\u4e0b\u306b\u3001App\u306eID\u304c\u66f8\u3044\u3066\u3042\u308b\u3002\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n![022.png](https://qiita-image-store.s3.amazonaws.com/0/69410/bb0602ae-77f8-f50a-0cdc-1ef8bc1a11bb.png)\n\n\n### Cognito Identity Pools\n\n\u6b21\u306f\u3001Identity Pool \u3092\u4f5c\u6210\u3059\u308b\u3002\n\nIdentity Pool \u3068 User Pool \u304c\u5225\u3005\u306b\u5b58\u5728\u3057\u3066\u3044\u308b\u306e\u304c\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u304c\u3001\nIdentity Pool \u3068 User Pool \u306f 1\u5bfe\u591a \u306e\u95a2\u4fc2\u306b\u3042\u308b\u3088\u3046\u3060\u3002\n\n![001_\u306e\u30b3\u30d2\u309a\u30fc.png](https://qiita-image-store.s3.amazonaws.com/0/69410/d2c5c7b8-81dd-d956-d17c-c912488a6ec5.png)\n\n\u300cCreate new Identity pool\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002\n(\u2193\u753b\u50cf\u306f\u3001\u3059\u3067\u306b\uff12\u500b\u5b58\u5728\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\u3002\u6c17\u306b\u3057\u306a\u3044)\n![002.png](https://qiita-image-store.s3.amazonaws.com/0/69410/4690b49c-1989-4cc5-e56d-79e9f2042b9b.png)\n\n\u300cQiitaIdentityPool\u300d\u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u300cUnauthenticated Identities\u300d\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u524d\u306e\u30a2\u30af\u30bb\u30b9\u306b\u5bfe\u3059\u308b\u6a29\u9650\u306e\u4ed8\u4e0e\u3060\u3068\u601d\u308f\u308c\u308b\u3002\n\u3053\u306e\u9700\u8981\u306f\u3088\u304f\u3042\u308b\u306e\u3067\u3001\u4eca\u56de\u306f ON \u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u6a29\u9650\u306f\u5f8c\u304b\u3089\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u300cAuthenticated providers\u300d\u306e\u8a2d\u5b9a\u3002\n\u3053\u3053\u3067\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f User Pool \u306e ID \u3068\u3001App \u306e ID \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u4ed6\u306b\u3082\u3001Amazon, Facebook, Google, Twitter, OpenID, SAML \u306a\u3069\u304c Provider \u3068\u3057\u3066\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u3060\u3002\n\n\u3042\u3041\u3001\u3084\u3063\u3068\u610f\u5473\u304c\u308f\u304b\u3063\u305f\u3002UserPool \u306f \u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0 \u3067\u3001IdentityPool \u306f \u8a8d\u8a3c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u306e\u5f79\u5272\u304b\u3002\n\u305d\u3046\u3044\u3048\u3070\u3001Cognito\u306f\u3001\u8907\u6570\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u300c\u540d\u5bc4\u305b\u300d\u3059\u308b\u6a5f\u80fd\u3082\u3042\u308b\u3068\u3001\u3069\u3053\u304b\u3067\u8aad\u3093\u3060\u3002\n\n\u300cCreate Pool\u300d\u3092\u62bc\u4e0b\u3057\u3066\u3001\u5148\u306b\u9032\u3080\u3002\n![016.png](https://qiita-image-store.s3.amazonaws.com/0/69410/d69553cc-b345-d48e-6922-26b0144a21c3.png)\n\n\u8a8d\u8a3c\u524d\u3068\u8a8d\u8a3c\u5f8c\u306e\u30e6\u30fc\u30b6\u306e\u3001\u30ed\u30fc\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u300c\u65b0\u3057\u3044IAM\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\u300d\u3057\u304b\u3067\u304d\u306a\u3044\u3088\u3046\u3060\u3002\u306a\u305c\u304b\u65e2\u5b58\u306e\u30ed\u30fc\u30eb\u306f\u9078\u629e\u3067\u304d\u306a\u3044\u3002\n\n\u7279\u306b\u5909\u66f4\u305b\u305a\u306b\u300c\u8a31\u53ef\u300d\u3092\u62bc\u4e0b\u3002\u5148\u306b\u9032\u3080\u3002\n![017.png](https://qiita-image-store.s3.amazonaws.com/0/69410/7e58089c-6e7f-19ea-783a-c7feb371f21b.png)\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3057\u3066\u304f\u308c\u308b\u753b\u9762\u304c\u3001\u3053\u3053\u3067\u631f\u307e\u308c\u308b\u3002\nSDK \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3082\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u300cGo to Dashboard\u300d\u3092\u62bc\u4e0b\u3059\u308c\u3070\u3001\u5b8c\u4e86\u3002\n![018.png](https://qiita-image-store.s3.amazonaws.com/0/69410/3a8e8ad2-0eb3-6029-6d3f-e6836132386d.png)\n\n### ID\u78ba\u8a8d\n\u3053\u3053\u3067\u53d6\u5f97\u3057\u305f\u306e\u306f\u3001IdentityPool\u306eID\u3002\u3082\u3046\u4e00\u56de\u78ba\u8a8d\u3057\u3066\u304a\u3053\u3046\u3002\n![020.png](https://qiita-image-store.s3.amazonaws.com/0/69410/1d6caf69-2b52-9970-eb2e-39393426701c.png)\n\n## \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nCognito \u3092\u4f7f\u3046\u305f\u3081\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea \u3092\u3001\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u96c6\u3081\u3066\u304f\u308b\nhttps://docs.aws.amazon.com/cognito/latest/developerguide/setting-up-the-javascript-sdk.html\n\n - Amazon Cognito AWS SDK for JavaScript  \n   https://raw.githubusercontent.com/aws/amazon-cognito-identity-js/master/dist/aws-cognito-sdk.min.js\n - Amazon Cognito Identity SDK for JavaScript  \n   https://raw.githubusercontent.com/aws/amazon-cognito-identity-js/master/dist/amazon-cognito-identity.min.js\n - JavaScript BN library for BigInteger computations  \n   http://www-cs-students.stanford.edu/~tjw/jsbn/\n - Stanford JavaScript Crypto Library\n   https://github.com/bitwiseshiftleft/sjcl\n   codecBytes \u3092\u542b\u3081\u3066\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3089\u3057\u3044\u3002\u624b\u9806\u306f\u4ee5\u4e0b\u3002\n\n    ```\n$ git clone https://github.com/bitwiseshiftleft/sjcl.git\n$ cd sjcl\n$ ./configure --with-all\n$ make\n```\n - Moment.js, a JavaScript library used for date manipulation\n   http://momentjs.com/\n - AWS SDK for JavaScript in the Browser\n   https://github.com/aws/aws-sdk-js/releases\n   (\u307e\u305f\u306f \u76f4\u30ea\u30f3\u30af https://sdk.amazonaws.com/js/aws-sdk-2.6.9.min.js )\n\n\u5168\u90e8\u3067\u4ee5\u4e0b\u306b\u306a\u308b\u3002\u3053\u308c\u3089\u306f\u5f8c\u3067\u3001\u307e\u3068\u3081\u3066\u3001cordova \u306b\u5165\u308c\u3088\u3046\u3002\n\n```\namazon-cognito-identity.min.js\naws-cognito-sdk.min.js\naws-sdk.min.js\nmoment.min.js\nsjcl.min.js\njsbn.js\njsbn2.js\n```\n\n## Cordova\n\n### \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nhttps://cordova.apache.org/\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-11 22.25.45.png](https://qiita-image-store.s3.amazonaws.com/0/69410/b7958c75-bac9-fddd-f08c-aae6cfb726f1.png)\n\nGet Started \u306e\u624b\u9806\u3069\u304a\u308a\u3002\n\u540d\u524d\u306f cordova_cognito \u306b\u3057\u305f\u3002\n\n```\n$ npm install -g cordova\n$ cordova create cordova_cognito\n$ cd cordova_cognito\n$ cordova platform add browser\n$ cordova run browser\n```\n\n### \u96db\u5f62\u30b3\u30fc\u30c9\n\n - \u30e9\u30a4\u30d6\u30e9\u30ea\u3092 www/js \u306b\u30b3\u30d4\u30fc\n - index.html \u306b\u30d5\u30a9\u30fc\u30e0\u3092\u8ffd\u52a0\n - www/js/cognito.js \u306b\u51e6\u7406\u3092\u8ffd\u52a0\n\n```html:index.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n    <meta charset=\"UTF-8\"/>\n    <!--\n    <meta http-equiv=\"Content-Security-Policy\"\n          content=\"default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *\">\n    -->\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"msapplication-tap-highlight\" content=\"no\">\n    <meta name=\"viewport\"\n          content=\"user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/bootstrap-theme.min.css\">\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/index.css\">\n    <title>Hello World</title>\n</head>\n<body>\n    <div class=\"app\">\n        <h1>Apache Cordova</h1>\n        <div id=\"deviceready\" class=\"blink\">\n            <p class=\"event listening\">Connecting to Device</p>\n            <p class=\"event received\">Device is Ready</p>\n        </div>\n    </div>\n\n    <form>\n        <h2>\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7</h2>\n        <div id=\"message\" class=\"alert\" style=\"display:none;\"></div>\n        <label for=\"inputUsername\" class=\"sr-only\">\u30e6\u30fc\u30b6\u30fc\u540d</label>\n        <input type=\"text\" id=\"inputUsername\" class=\"form-control\" placeholder=\"User name\" required autofocus></input>\n        <label for=\"inputPassword\" class=\"sr-only\">\u30d1\u30b9\u30ef\u30fc\u30c9</label>\n        <input type=\"password\" id=\"inputPassword\" class=\"form-control\" placeholder=\"Password\" required></input>\n        <label for=\"inputEmail\" class=\"sr-only\">\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9</label>\n        <input type=\"text\" id=\"inputEmail\" class=\"form-control\" placeholder=\"EMail\" required></input>\n        <label for=\"inputLocale\" class=\"sr-only\">\u30ed\u30b1\u30fc\u30eb</label>\n        <input type=\"text\" id=\"inputLocale\" class=\"form-control\" placeholder=\"Locale\" required></input>\n        <input type=\"button\" class=\"btn btn-lg btn-primary btn-bloc\" id=\"user_add_btn\" value=\"\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\"></input>\n    </form>\n\n\n\n    <script type=\"text/javascript\" src=\"js/min/aws-sdk.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/src/jsbn.js\"></script>\n    <script type=\"text/javascript\" src=\"js/src/jsbn2.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/sjcl.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/moment.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/aws-cognito-sdk.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/amazon-cognito-identity.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/jquery-2.2.4.min.js\"></script>\n    <script type=\"text/javascript\" src=\"js/min/bootstrap.min.js\"></script>\n    <script type=\"text/javascript\" src=\"cordova.js\"></script>\n    <script type=\"text/javascript\" src=\"js/index.js\"></script>\n    <script type=\"text/javascript\" src=\"js/cognito.js\"></script>\n\n</body>\n</html>\n```\n\n\n\n```js:cognito.js\nvar region = 'ap-northeast-1'; // \u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\n\nvar IdentityPoolId = {\n  AWS: 'ap-northeast-1:4a0a8023-7770-499a-a92e-e8cd3d788871', // <YOUR_IDENTITY_POOL_ID>\n  AWSCognito: 'ap-northeast-1_uSVyq55eG' // <YOUR_USER_POOL_ID>\n};\n\nvar ClientId = '6elsp8qa9ecfbj8la64vrkr8ts'; // \u30a2\u30d7\u30eaID\n\n///////////////////\n\nvar idp = ['cognito-idp', region, 'amazonaws', 'com'].join(\".\");\nvar endpoint = [idp, IdentityPoolId.AWSCognito].join(\"/\");\n\n// Initialize the Amazon Cognito credentials provider\nAWS.config.region = region; // Region\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\n  IdentityPoolId: IdentityPoolId.AWS\n});\n\n// Initialize the Amazon Cognito credentials provider\nAWSCognito.config.region = region; // Region\nAWSCognito.config.credentials = new AWS.CognitoIdentityCredentials({\n  IdentityPoolId: IdentityPoolId.AWSCognito\n});\n\nvar data = {\n  UserPoolId: IdentityPoolId.AWSCognito,\n  ClientId: ClientId\n};\nvar userPool = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(data);\n\nvar cognitoUser;\n\nfunction message(div, message_text, message_class) {\n  div.text(message_text);\n  div.addClass(message_class);\n  div.show();\n  setTimeout(function () {\n    div.fadeOut();\n    div.removeClass(message_class);\n  }, 5000);\n}\n\n// Use case 1. Registering a user with the application.\n$('#user_add_btn').click(function () {\n  var username = $(\"#inputUsername\").val();\n  var password = $(\"#inputPassword\").val();\n\n  var email = $(\"#inputEmail\").val();\n  var locale = $(\"#inputLocale\").val();\n\n  var attributeList = [];\n  attributeList.push({Name: \"email\", Value: email});\n  attributeList.push({Name: \"locale\", Value: locale});\n\n  if (!username || !password) {\n    return false;\n  }\n\n  userPool.signUp(username, password, attributeList, null, function (err, result) {\n    if (err) {\n      console.log(err);\n      message($('#message'), err, \"alert-danger\");\n    } else {\n      cognitoUser = result.user;\n      console.log('user name is ' + cognitoUser.getUsername());\n      var message_text = cognitoUser.getUsername() + \"\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\";\n      message($('#message'), message_text, \"alert-success\");\n    }\n  });\n});\n```\n\n### \u4f7f\u3044\u65b9\n\n - \u300c\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u300d\u3067\u30e6\u30fc\u30b6\u767b\u9332\u3059\u308b\u3068\u3001EMail\u5b9b\u306b Verification \u30b3\u30fc\u30c9\u304c\u9001\u3089\u308c\u3066\u304d\u307e\u3059\u3002\n - \u300c\u30b3\u30f3\u30d5\u30a1\u30fc\u30e0\u300d\u3067 Verification \u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u3001\u30b3\u30f3\u30d5\u30a1\u30fc\u30e0\u3057\u307e\u3059\u3002\n - \u30b3\u30f3\u30d5\u30a1\u30fc\u30e0\u5f8c\u306f\u3001\u300c\u30ed\u30b0\u30a4\u30f3\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-12 0.26.44.png](https://qiita-image-store.s3.amazonaws.com/0/69410/7baba427-7c1c-85e3-3d40-e2ecd5407396.png)\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n - \u96db\u5f62\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e00\u5f0f\u3092 GitHub \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n - Pool ID \u306f\u6652\u3057\u3066\u307e\u3059\u306e\u3067\u3001\u96db\u5f62\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u307e\u307e\u3067 \u30e6\u30fc\u30b6\u767b\u9332/\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3067\u3059\u3002\n - \u30ed\u30fc\u30eb\u306b\u6a29\u9650\u3092\u3064\u3051\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u5b9f\u969b\u306b\u306f\u4f55\u3082\u51fa\u6765\u306a\u3044\u3067\u3059\u3002\n\n#### \u4f7f\u3044\u65b9\n```\n$ git clone https://github.com/exabugs/cordova_cognito.git\n$ cd cordova_cognito\n$ cordova run browser\n```\n#### \u4fee\u6b63\u7b87\u6240\nwww/js/cognito.js \u306e ID \u90e8\u5206\u3092\u3001\u3042\u306a\u305f\u306e\u8a2d\u5b9a\u306b\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n```js:cognito.js\nvar IdentityPoolId = {\n  AWS: 'ap-northeast-1:4a0a8023-7770-499a-a92e-e8cd3d788871', // <YOUR_IDENTITY_POOL_ID>\n  AWSCognito: 'ap-northeast-1_uSVyq55eG' // <YOUR_USER_POOL_ID>\n};\n\nvar ClientId = '6elsp8qa9ecfbj8la64vrkr8ts'; // \u30a2\u30d7\u30eaID\n```\n\n## \u304a\u308f\u308a\u306b\n - \u5b9f\u88c5\u304c\u9762\u5012\u306a\u30a2\u30ab\u30a6\u30f3\u30c8\u7ba1\u7406/\u8a8d\u8a3c \u304c\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u3068\u3066\u3082\u4fbf\u5229\u3067\u3059\u3002\n - Facebook/Google/Twitter \u7b49\u3078\u306e\u8a8d\u8a3c\u3082\u3001\u4eca\u5f8c\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n", "tags": ["AWS", "cognito", "Cordova", "JavaScript"]}