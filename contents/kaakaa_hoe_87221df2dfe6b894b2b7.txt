{"tags": ["Java", "gradle", "grunt", "bower", "docker"], "context": "\n\n\u306f\u3058\u3081\u306b\nJava/Spark\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eGradle\u3092\u5229\u7528\u3057\u305f\u30d3\u30eb\u30c9/\u30c7\u30d7\u30ed\u30a4\u306b\u3064\u3044\u3066\u3001\u79c1\u304c\u8a66\u3057\u305f\u3053\u3068\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002\n(\u3053\u3053\u3067\u8a00\u3046Spark\u306f\u3001\u5206\u6563\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u306eApache Spark\u3067\u306f\u306a\u304f\u3001Java\u306eSinatra\u30e9\u30a4\u30af\u306aMicroframework\u306eSpark\u306e\u3053\u3068\u3067\u3059)\n\n\u76ee\u6b21\n\nHello World\u30a2\u30d7\u30ea\njade\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\nGrunt/bower\u306b\u3088\u308bWeb\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\n\u4ed8\u9332A. TravisCI\u306b\u3088\u308b\u30d3\u30eb\u30c9\n\u4ed8\u9332B. Gradle\u3067docker build\n\u4ed8\u9332C. TravisCI\u304b\u3089DockerHub\u3078 docker push\n\n\u5404\u7ae0\u3067\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f Commits \u00b7 kaakaa/gradle-frontend-boilerplate \u304b\u3089\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u74b0\u5883\n\nJava 1.8.0_74\nGradle 2.12\nspark-core 2.3\nspark-template-jade 2.3\nnode.js 4.4.0\n\n\n\u4ed8\u9332C. TravisCI\u304b\u3089DockerHub\u3078 docker push\n\n\u6982\u8981\nGithub\u3078\u306ePush\u3092\u5951\u6a5f\u306bTravisCI\u3067Docker\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001Docker\u30a4\u30e1\u30fc\u30b8\u3092DockerHub\u3078Push\u3059\u308b\n\nTravisCI\u4e0a\u3067\u306fDocker Remote API\u304c\u8d77\u52d5\u3057\u3066\u3044\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3001\u5148\u307b\u3069\u4f5c\u3063\u305fbuildDockerImage\u30bf\u30b9\u30af\u306f\u4f7f\u7528\u305b\u305a\u3001\u666e\u901a\u306edocker build\u30b3\u30de\u30f3\u30c9\u3067Docker\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\u30d3\u30eb\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\n\n.travis.yml\nsudo: required  // (1) - Docker\u3092\u4f7f\u3046\u3053\u3068\u3092\u5ba3\u8a00\nservices:\n- docker\nlanguage: java\njdk:\n- oraclejdk8\nenv:  // (2) - Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u306b\u4f7f\u3046\u60c5\u5831\u3092\u5ba3\u8a00\u3059\u308b\n  global:\n  - REPO=kaakaa/gradle-frontend-boilerplate\n  - COMMIT=${TRAVIS_COMMIT::8}\n  - TAG=${COMMIT}\n  - secure: <encrypted env>\n  - secure: <encrypted env>\n  - secure: <encrypted env>\n\nscript: \"./gradlew build\"\ndeploy:\n  provider: releases\n  api_key:\n    secure: <encrypted repo>\n  file:\n  - \"./build/distributions/gradle-frontend-boilerplate-1.0-SNAPSHOT.tar\"\n  - \"./build/distributions/gradle-frontend-boilerplate-1.0-SNAPSHOT.zip\"\n  on:\n    repo: kaakaa/gradle-frontend-boilerplate\n    tags: true\n\nafter_deploy:  // (3) - Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u3092\u3059\u308b\n- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS\n- docker build -f Dockerfile -t $REPO:$COMMIT .\n- docker tag $REPO:$COMMIT $REPO:$TAG\n- docker push $REPO:$COMMIT\n\n\n\n(1) Docker\u3092\u4f7f\u3046\u3053\u3068\u3092\u5ba3\u8a00\nTravis\u30d3\u30eb\u30c9\u3067docker\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001\u3053\u306e\uff13\u884c\u304c\u5fc5\u8981\u3002\nUsing Docker in Builds - Travis CI\n\n(2) Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u306b\u4f7f\u3046\u60c5\u5831\u3092\u5ba3\u8a00\u3059\u308b\nDocker\u30a4\u30e1\u30fc\u30b8\u540d\u3084DockerHub\u3078Push\u3059\u308b\u969b\u306e\u540d\u524d\u306e\u60c5\u5831\u306a\u3069\u3092\u5ba3\u8a00\u3057\u3066\u3044\u308b\u3002\n${TRAVIS_COMMIT}\u306fTravis\u3067\u306e\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u969b\u306egit\u306e\u30b3\u30df\u30c3\u30c8ID\u3092\u793a\u3057\u3066\u304a\u308a\u3001${TRAVIS_COMMIT::8}\u3067\u3001\u305d\u306e\u5148\u982d\uff18\u6587\u5b57\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\nEnvironment Variables - Travis CI\nsecure\u6587\u5b57\u5217\u306fDockerHub\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u3092encrypt\u3057\u305f\u6587\u5b57\u5217\u3002\n\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u751f\u6210\u3067\u304d\u308b\u3002\ntravis encrypt DOCKEREMAIL=hoge@exampl.com --add env.global   \ntravis encrypt DOCKER_USER=kaakaa --add env.global   \ntravis encrypt DOCKER_PASS=password --add env.global   \n\nUsing Docker in Builds - Travis CI\nEncryption keys - Travis CI \n\n(3) Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u3092\u3059\u308b\ndocker\u30b3\u30de\u30f3\u30c9\u3092\u666e\u901a\u306b\u6253\u3063\u3066\u308b\u3060\u3051\u3002  \nTravis\u3067\u306fDocker Remote API\u304c\u8d77\u52d5\u3057\u3066\u306a\u3044\u306e\u3067gradle\u306ebuildDockerImage\u30bf\u30b9\u30af\u304c\u4f7f\u3048\u306a\u3044\u306e\u304c\u60b2\u3057\u3044\u3002\n\n\u30d3\u30eb\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\n\nbuild.gradle\nbuild.dependsOn installDist\n\n\nTravis\u4e0a\u3067\u5b9f\u884c\u3057\u3066\u3044\u308bbuild\u30bf\u30b9\u30af\u304c\u3001Docker\u30d3\u30eb\u30c9\u3067\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u305f\u3081\u306einstallDist\u30bf\u30b9\u30af\u306b\u4f9d\u5b58\u3059\u308b\u3088\u3046\u3001\u3069\u3053\u304b\u306b\u4e0a\u8a18\uff11\u884c\u3092\u8ffd\u52a0\u3059\u308b\u3002\n# \u306f\u3058\u3081\u306b\n\nJava/Spark\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eGradle\u3092\u5229\u7528\u3057\u305f\u30d3\u30eb\u30c9/\u30c7\u30d7\u30ed\u30a4\u306b\u3064\u3044\u3066\u3001\u79c1\u304c\u8a66\u3057\u305f\u3053\u3068\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002\n(\u3053\u3053\u3067\u8a00\u3046`Spark`\u306f\u3001\u5206\u6563\u51e6\u7406\u30e9\u30a4\u30d6\u30e9\u30ea\u306e`Apache Spark`\u3067\u306f\u306a\u304f\u3001Java\u306eSinatra\u30e9\u30a4\u30af\u306aMicroframework\u306e`Spark`\u306e\u3053\u3068\u3067\u3059)\n\n## \u76ee\u6b21\n\n1. [Hello World\u30a2\u30d7\u30ea](http://qiita.com/kaakaa_hoe/items/0e3c622ae8bde3d116ad)\n2. [jade\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3](http://qiita.com/kaakaa_hoe/items/6d4311e250df89f836b9)\n3. [Grunt/bower\u306b\u3088\u308bWeb\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9](http://qiita.com/kaakaa_hoe/items/61b326dcc5d7f161ff28)\n4. [\u4ed8\u9332A. TravisCI\u306b\u3088\u308b\u30d3\u30eb\u30c9](http://qiita.com/kaakaa_hoe/items/373a5a8718c92676771f)\n5. [\u4ed8\u9332B. Gradle\u3067docker build](http://qiita.com/kaakaa_hoe/items/18e5f3047931ee886acb)\n6. **\u4ed8\u9332C. TravisCI\u304b\u3089DockerHub\u3078 docker push**\n\n\u5404\u7ae0\u3067\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f [Commits \u00b7 kaakaa/gradle-frontend-boilerplate](https://github.com/kaakaa/gradle-frontend-boilerplate/commits/master) \u304b\u3089\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n## \u74b0\u5883\n\n* Java 1.8.0_74\n* Gradle 2.12\n* spark-core 2.3\n* spark-template-jade 2.3\n* node.js 4.4.0\n\n\n# \u4ed8\u9332C. TravisCI\u304b\u3089DockerHub\u3078 docker push\n\n## \u6982\u8981\n\nGithub\u3078\u306ePush\u3092\u5951\u6a5f\u306bTravisCI\u3067Docker\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001Docker\u30a4\u30e1\u30fc\u30b8\u3092DockerHub\u3078Push\u3059\u308b\n\n* * *\n\nTravisCI\u4e0a\u3067\u306fDocker Remote API\u304c\u8d77\u52d5\u3057\u3066\u3044\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3001\u5148\u307b\u3069\u4f5c\u3063\u305f`buildDockerImage`\u30bf\u30b9\u30af\u306f\u4f7f\u7528\u305b\u305a\u3001\u666e\u901a\u306e`docker build`\u30b3\u30de\u30f3\u30c9\u3067Docker\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\n## \u30d3\u30eb\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\n\n```yaml:.travis.yml\nsudo: required  // (1) - Docker\u3092\u4f7f\u3046\u3053\u3068\u3092\u5ba3\u8a00\nservices:\n- docker\nlanguage: java\njdk:\n- oraclejdk8\nenv:  // (2) - Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u306b\u4f7f\u3046\u60c5\u5831\u3092\u5ba3\u8a00\u3059\u308b\n  global:\n  - REPO=kaakaa/gradle-frontend-boilerplate\n  - COMMIT=${TRAVIS_COMMIT::8}\n  - TAG=${COMMIT}\n  - secure: <encrypted env>\n  - secure: <encrypted env>\n  - secure: <encrypted env>\n\nscript: \"./gradlew build\"\ndeploy:\n  provider: releases\n  api_key:\n    secure: <encrypted repo>\n  file:\n  - \"./build/distributions/gradle-frontend-boilerplate-1.0-SNAPSHOT.tar\"\n  - \"./build/distributions/gradle-frontend-boilerplate-1.0-SNAPSHOT.zip\"\n  on:\n    repo: kaakaa/gradle-frontend-boilerplate\n    tags: true\n\nafter_deploy:  // (3) - Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u3092\u3059\u308b\n- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS\n- docker build -f Dockerfile -t $REPO:$COMMIT .\n- docker tag $REPO:$COMMIT $REPO:$TAG\n- docker push $REPO:$COMMIT\n```\n\n### (1) Docker\u3092\u4f7f\u3046\u3053\u3068\u3092\u5ba3\u8a00\n\nTravis\u30d3\u30eb\u30c9\u3067`docker`\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001\u3053\u306e\uff13\u884c\u304c\u5fc5\u8981\u3002  \n[Using Docker in Builds - Travis CI](https://docs.travis-ci.com/user/docker/)\n\n### (2) Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u306b\u4f7f\u3046\u60c5\u5831\u3092\u5ba3\u8a00\u3059\u308b\n\nDocker\u30a4\u30e1\u30fc\u30b8\u540d\u3084DockerHub\u3078Push\u3059\u308b\u969b\u306e\u540d\u524d\u306e\u60c5\u5831\u306a\u3069\u3092\u5ba3\u8a00\u3057\u3066\u3044\u308b\u3002  \n`${TRAVIS_COMMIT}`\u306fTravis\u3067\u306e\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u969b\u306egit\u306e\u30b3\u30df\u30c3\u30c8ID\u3092\u793a\u3057\u3066\u304a\u308a\u3001`${TRAVIS_COMMIT::8}`\u3067\u3001\u305d\u306e\u5148\u982d\uff18\u6587\u5b57\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002  \n[Environment Variables - Travis CI](https://docs.travis-ci.com/user/environment-variables/#Default-Environment-Variables)\n\n`secure`\u6587\u5b57\u5217\u306fDockerHub\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u3092encrypt\u3057\u305f\u6587\u5b57\u5217\u3002  \n\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u751f\u6210\u3067\u304d\u308b\u3002\n\n```\ntravis encrypt DOCKEREMAIL=hoge@exampl.com --add env.global   \ntravis encrypt DOCKER_USER=kaakaa --add env.global   \ntravis encrypt DOCKER_PASS=password --add env.global   \n```\n\n[Using Docker in Builds - Travis CI](https://docs.travis-ci.com/user/docker/#Pushing-a-Docker-Image-to-a-Registry)  \n[Encryption keys - Travis CI](https://docs.travis-ci.com/user/encryption-keys/)  \n\n### (3) Docker\u30d3\u30eb\u30c9\u3001DockerHub\u3078\u306ePush\u3092\u3059\u308b\n\ndocker\u30b3\u30de\u30f3\u30c9\u3092\u666e\u901a\u306b\u6253\u3063\u3066\u308b\u3060\u3051\u3002  \n\nTravis\u3067\u306fDocker Remote API\u304c\u8d77\u52d5\u3057\u3066\u306a\u3044\u306e\u3067gradle\u306e`buildDockerImage`\u30bf\u30b9\u30af\u304c\u4f7f\u3048\u306a\u3044\u306e\u304c\u60b2\u3057\u3044\u3002\n\n## \u30d3\u30eb\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\n\n```groovy:build.gradle\nbuild.dependsOn installDist\n```\n\nTravis\u4e0a\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b`build`\u30bf\u30b9\u30af\u304c\u3001Docker\u30d3\u30eb\u30c9\u3067\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u305f\u3081\u306e`installDist`\u30bf\u30b9\u30af\u306b\u4f9d\u5b58\u3059\u308b\u3088\u3046\u3001\u3069\u3053\u304b\u306b\u4e0a\u8a18\uff11\u884c\u3092\u8ffd\u52a0\u3059\u308b\u3002\n"}