{"tags": ["Objective-C", "iOS", "Facebook"], "context": " More than 1 year has passed since last update.Facebook SDK for iOS\u3068\u3044\u3048\u3070\u3001\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306e\u305f\u3073\u306b\u3001\u5927\u5e45\u306a\u4ed5\u69d8\u5909\u66f4\u304c\u5165\u308a\u3001Facebook\u306edeveloper\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u306e\u4e56\u96e2\u304c\u8d77\u304d\u308b\uff08\u7279\u306b\u65e5\u672c\u8a9e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u5e38\u306b\u53e4\u3044\u30fb\u30fb\u30fb\uff09\u3053\u3068\u3067\u6709\u540d\u3067\u3059\u304c\u30013.14\u306e\u4fee\u6b63\u3067\u30cf\u30de\u3063\u305f\u3068\u3053\u308d\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n2014/7/8\u73fe\u5728\u3001\u6700\u65b0\u7248\u306f3.15.1\u3067\u3059\u3002\n\niOS Native\u306eFacebook\u8a2d\u5b9a\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u306a\u304f\u306a\u3063\u305f\n\u307e\u305aiOS6\u4ee5\u964d\u306e\u6a5f\u80fd\u3067\u3042\u308b\u30cd\u30a4\u30c6\u30a3\u30d6\u306eFacebook\u8a2d\u5b9a\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u3067\u306f\u306a\u304f\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\u4e0b\u8a18\u306e\u30ea\u30f3\u30af\u5148\u306e\u3088\u3046\u306a\u30a2\u30d7\u30ea\u306e\u9077\u79fb\u3092\u305b\u305a\u306b\u8a8d\u8a3c\u3067\u304d\u308b\u6a5f\u80fd\u306e\u3053\u3068\u3067\u3059\u3002\nhttps://developers.facebook.com/docs/facebook-login/ios/v2.0#dialogs-iosnative\n\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30ac\u30a4\u30c9\u306b\u3088\u308b\u3068\u3001\u65b0\u3057\u3044Facebook\u306e\u30ed\u30b0\u30a4\u30f3\u65b9\u5f0f\u306f\u3001iOS\u306enative\u306e\u65b9\u5f0f\u3067\u306f\u9069\u7528\u51fa\u6765\u306a\u3044\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u3092\u5909\u3048\u305f\u3068\u3044\u3046\u3053\u3068\u306a\u3093\u3067\u3057\u3087\u3046\u306d\u3002\n\nUpgrading from 3.13 to 3.14\n...\nThe New Facebook Login does not apply to iOS device account authentication.\nThe default login behavior has changed from FBSessionLoginBehaviorUseSystemAccountIfPresent to FBSessionLoginBehaviorWithFallbackToWebView.\nhttps://developers.facebook.com/docs/ios/upgrading\n\n\niOS\u306e\u30cd\u30a4\u30c6\u30a3\u30d6\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308b\u304b\n\u305d\u308c\u3067\u3082\u3001Facebook App\u3084Safari\u306a\u3069\u306b\u30a2\u30d7\u30ea\u9077\u79fb\u3059\u308b\u3088\u308a\u30cd\u30a4\u30c6\u30a3\u30d6\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3092SDK\u3067\u5b9f\u73fe\u3057\u305f\u3044\u5834\u5408\u3069\u3046\u3059\u308b\u304b\u3002\n\nFacebook SDK\u30923.13\u306b\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u4f7f\u3046\nFacebook SDK\u306e\u30bd\u30fc\u30b9\u3092\u5c11\u3057\u5909\u66f4\u3057\u3066\u3057\u307e\u3046\uff08cocoapods\u7d4c\u7531\u306a\u3089\u53ef\u80fd\uff09\n\u30bb\u30c3\u30b7\u30e7\u30f3\u53d6\u5f97\u90e8\u5206\u306e\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\n\n1\u756a\u306f\u7c21\u5358\u306a\u65b9\u6cd5\u3067\u3059\u304c\u3001\u4eca\u5f8c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u305f\u304f\u3066\u3082\u3001\u3067\u304d\u306a\u3044\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\n2\u756a\u306fFBSession.m\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5c11\u3057\u5909\u66f4\u3059\u308b\u3068\u53ef\u80fd\u3067\u3059\u3002\n+ (BOOL)openActiveSessionWithReadPermissions:(NSArray *)readPermissions\n                                allowLoginUI:(BOOL)allowLoginUI\n                           completionHandler:(FBSessionStateHandler)handler {\n    return [FBSession openActiveSessionWithPermissions:readPermissions\n                                          allowLoginUI:allowLoginUI\n                                    allowSystemAccount:NO //\u2190YES\u306b\u3057\u3066\u3057\u307e\u3046\n                                                isRead:YES\n                                       defaultAudience:FBSessionDefaultAudienceNone\n                                     completionHandler:handler];\n}\n\n\u3042\u307e\u308a\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u306a\u3044\u3067\u3059\u304c\u3001\u3053\u308c\u3067\u3082\u3044\u3051\u307e\u3057\u305f\u3002\u305f\u3060\u3053\u306e\u65b9\u6cd5\u3082\u907f\u3051\u305f\u3044\u30fb\u30fb\u30fb\n3\u756a\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f\u30e1\u30bd\u30c3\u30c9\u306b\u5c11\u3057\u5206\u5c90\u3092\u3064\u3051\u3066\u5bfe\u5fdc\u3059\u308b\u65b9\u6cd5\u3002\n\u3053\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\n[FBSession openActiveSessionWithReadPermissions:@[@\"email\"]\n                                       allowLoginUI:YES\n                                  completionHandler:\n                                          ^(FBSession *session, FBSessionState state, NSError *error) {\n                                          }\n];\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\n    FBSessionStateHandler completionHandler = ^(FBSession *session,     FBSessionState status, NSError *error) {};\n\n    if ([FBSession activeSession].state == FBSessionStateCreatedTokenLoaded) {\n        [[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent\n                  completionHandler:completionHandler];\n    } else {\n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u524a\u9664\n      [FBSession.activeSession closeAndClearTokenInformation];\n      [FBSession renewSystemCredentials:^(ACAccountCredentialRenewResult result, NSError *error) {}];\n     [FBSession setActiveSession:nil];\n\n        FBSession *fbSession = [[FBSession alloc] initWithPermissions:@[@\"email\"]];\n        [FBSession setActiveSession:fbSession];\n        [fbSession openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent\n                  completionHandler:completionHandler];\n    }\n\n\u3053\u308c\u3067\u3044\u3051\u307e\u3057\u305f\u3002\n\u53c2\u8003\n\nNative Facebook Login stopped working after SDK update to 3.14\nhttp://stackoverflow.com/questions/23476499/native-facebook-login-stopped-working-after-sdk-update-to-3-14\n\n\n[Facebook SDK for iOS](https://developers.facebook.com/docs/ios)\u3068\u3044\u3048\u3070\u3001\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306e\u305f\u3073\u306b\u3001\u5927\u5e45\u306a\u4ed5\u69d8\u5909\u66f4\u304c\u5165\u308a\u3001Facebook\u306edeveloper\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u306e\u4e56\u96e2\u304c\u8d77\u304d\u308b\uff08\u7279\u306b\u65e5\u672c\u8a9e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u5e38\u306b\u53e4\u3044\u30fb\u30fb\u30fb\uff09\u3053\u3068\u3067\u6709\u540d\u3067\u3059\u304c\u30013.14\u306e\u4fee\u6b63\u3067\u30cf\u30de\u3063\u305f\u3068\u3053\u308d\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n2014/7/8\u73fe\u5728\u3001\u6700\u65b0\u7248\u306f3.15.1\u3067\u3059\u3002\n\n## iOS Native\u306eFacebook\u8a2d\u5b9a\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u306a\u304f\u306a\u3063\u305f\n\n\u307e\u305aiOS6\u4ee5\u964d\u306e\u6a5f\u80fd\u3067\u3042\u308b\u30cd\u30a4\u30c6\u30a3\u30d6\u306eFacebook\u8a2d\u5b9a\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u3067\u306f\u306a\u304f\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\u4e0b\u8a18\u306e\u30ea\u30f3\u30af\u5148\u306e\u3088\u3046\u306a\u30a2\u30d7\u30ea\u306e\u9077\u79fb\u3092\u305b\u305a\u306b\u8a8d\u8a3c\u3067\u304d\u308b\u6a5f\u80fd\u306e\u3053\u3068\u3067\u3059\u3002\n\nhttps://developers.facebook.com/docs/facebook-login/ios/v2.0#dialogs-iosnative\n\n\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30ac\u30a4\u30c9\u306b\u3088\u308b\u3068\u3001\u65b0\u3057\u3044Facebook\u306e\u30ed\u30b0\u30a4\u30f3\u65b9\u5f0f\u306f\u3001iOS\u306enative\u306e\u65b9\u5f0f\u3067\u306f\u9069\u7528\u51fa\u6765\u306a\u3044\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u3092\u5909\u3048\u305f\u3068\u3044\u3046\u3053\u3068\u306a\u3093\u3067\u3057\u3087\u3046\u306d\u3002\n\n>Upgrading from 3.13 to 3.14\n...\nThe New Facebook Login does not apply to iOS device account authentication.\nThe default login behavior has changed from FBSessionLoginBehaviorUseSystemAccountIfPresent to FBSessionLoginBehaviorWithFallbackToWebView.\nhttps://developers.facebook.com/docs/ios/upgrading\n\n## iOS\u306e\u30cd\u30a4\u30c6\u30a3\u30d6\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308b\u304b\n\n\u305d\u308c\u3067\u3082\u3001Facebook App\u3084Safari\u306a\u3069\u306b\u30a2\u30d7\u30ea\u9077\u79fb\u3059\u308b\u3088\u308a\u30cd\u30a4\u30c6\u30a3\u30d6\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3092SDK\u3067\u5b9f\u73fe\u3057\u305f\u3044\u5834\u5408\u3069\u3046\u3059\u308b\u304b\u3002\n\n1. Facebook SDK\u30923.13\u306b\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u4f7f\u3046\n2. Facebook SDK\u306e\u30bd\u30fc\u30b9\u3092\u5c11\u3057\u5909\u66f4\u3057\u3066\u3057\u307e\u3046\uff08cocoapods\u7d4c\u7531\u306a\u3089\u53ef\u80fd\uff09\n3. \u30bb\u30c3\u30b7\u30e7\u30f3\u53d6\u5f97\u90e8\u5206\u306e\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\n\n1\u756a\u306f\u7c21\u5358\u306a\u65b9\u6cd5\u3067\u3059\u304c\u3001\u4eca\u5f8c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u305f\u304f\u3066\u3082\u3001\u3067\u304d\u306a\u3044\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\n2\u756a\u306fFBSession.m\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5c11\u3057\u5909\u66f4\u3059\u308b\u3068\u53ef\u80fd\u3067\u3059\u3002\n\n```\n+ (BOOL)openActiveSessionWithReadPermissions:(NSArray *)readPermissions\n                                allowLoginUI:(BOOL)allowLoginUI\n                           completionHandler:(FBSessionStateHandler)handler {\n    return [FBSession openActiveSessionWithPermissions:readPermissions\n                                          allowLoginUI:allowLoginUI\n                                    allowSystemAccount:NO //\u2190YES\u306b\u3057\u3066\u3057\u307e\u3046\n                                                isRead:YES\n                                       defaultAudience:FBSessionDefaultAudienceNone\n                                     completionHandler:handler];\n}\n```\n\n\u3042\u307e\u308a\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u306a\u3044\u3067\u3059\u304c\u3001\u3053\u308c\u3067\u3082\u3044\u3051\u307e\u3057\u305f\u3002\u305f\u3060\u3053\u306e\u65b9\u6cd5\u3082\u907f\u3051\u305f\u3044\u30fb\u30fb\u30fb\n\n3\u756a\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f\u30e1\u30bd\u30c3\u30c9\u306b\u5c11\u3057\u5206\u5c90\u3092\u3064\u3051\u3066\u5bfe\u5fdc\u3059\u308b\u65b9\u6cd5\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\n\n```\n[FBSession openActiveSessionWithReadPermissions:@[@\"email\"]\n                                       allowLoginUI:YES\n                                  completionHandler:\n                                          ^(FBSession *session, FBSessionState state, NSError *error) {\n                                          }\n];\n```\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\n\n```\n\tFBSessionStateHandler completionHandler = ^(FBSession *session, \tFBSessionState status, NSError *error) {};\n\n    if ([FBSession activeSession].state == FBSessionStateCreatedTokenLoaded) {\n        [[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent\n                  completionHandler:completionHandler];\n    } else {\n\t\t//\u30bb\u30c3\u30b7\u30e7\u30f3\u524a\u9664\n\t  [FBSession.activeSession closeAndClearTokenInformation];\n\t  [FBSession renewSystemCredentials:^(ACAccountCredentialRenewResult result, NSError *error) {}];\n     [FBSession setActiveSession:nil];\n\n        FBSession *fbSession = [[FBSession alloc] initWithPermissions:@[@\"email\"]];\n        [FBSession setActiveSession:fbSession];\n        [fbSession openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent\n                  completionHandler:completionHandler];\n    }\n```\n\n\u3053\u308c\u3067\u3044\u3051\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\n>Native Facebook Login stopped working after SDK update to 3.14\nhttp://stackoverflow.com/questions/23476499/native-facebook-login-stopped-working-after-sdk-update-to-3-14\n"}