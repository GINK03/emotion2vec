{"context": "\n\n\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\nRack\u3092\u77e5\u308b\u305f\u3081\u306b\u3001\u5c0f\u3055\u306aRack\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u52d5\u304b\u3057\u3066\u307f\u305f\u3044\u3067\u3059\u3002\nRuby\u306f\u6c17\u8efd\u306bgem install\u3059\u308b\u3068\u74b0\u5883\u304c\u6c5a\u308c\u308b\u306e\u3067sandbox\u304c\u6b32\u3057\u3044\u3067\u3059\u3002\n\u305d\u3053\u3067docker\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u30d9\u30fc\u30b9\u306b\u3059\u308bDokerfile\nlibrary/ruby - Docker Hub\u306eruby:2.4-alpine\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u4e8b\u524d\u306b\u5fc5\u8981\u306a\u3082\u306e\n\nmy_rack_app.rb\nGemfile\n\n\nmy_rack_app.rb\nRack: a Ruby Webserver Interface\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u5143\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nshebang\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nmy_rack_app.rb\n#! /usr/bin/env ruby\n\nrequire 'rack'\n\napp = Proc.new do |env|\n    ['200', {'Content-Type' => 'text/html'}, ['A barebones rack app.']]\nend\n\nRack::Handler::WEBrick.run app, {Host: '0.0.0.0'}\n\n\nPerl, Python \u53ca\u3073 Ruby \u30b9\u30af\u30ea\u30d7\u30c8\u306b\u304a\u3051\u308b\u6b63\u3057\u3044shebang\u306e\u66f8\u304d\u65b9 - Qiita\n\nshebang\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\npanic: standard_init_linux.go:175: exec user process caused \"exec format error\" [recovered]\n    panic: standard_init_linux.go:175: exec user process caused \"exec format error\"\n\ngoroutine 1 [running, locked to thread]:\npanic(0x88f8a0, 0xc820126d20)\n    /usr/local/go/src/runtime/panic.go:481 +0x3e6\ngithub.com/urfave/cli.HandleAction.func1(0xc8200f32e8)\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/app.go:478 +0x38e\npanic(0x88f8a0, 0xc820126d20)\n    /usr/local/go/src/runtime/panic.go:443 +0x4e9\ngithub.com/opencontainers/runc/libcontainer.(*LinuxFactory).StartInitialization.func1(0xc8200f2bf8, 0xc82001a0c8, 0xc8200f2d08)\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/opencontainers/runc/libcontainer/factory_linux.go:259 +0x136\ngithub.com/opencontainers/runc/libcontainer.(*LinuxFactory).StartInitialization(0xc820059630, 0x7fbe739ea728, 0xc820126d20)\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/opencontainers/runc/libcontainer/factory_linux.go:277 +0x5b1\nmain.glob.func8(0xc820076a00, 0x0, 0x0)\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/main_unix.go:26 +0x68\nreflect.Value.call(0x7f45a0, 0x9a4d88, 0x13, 0x8ebac8, 0x4, 0xc8200f3268, 0x1, 0x1, 0x0, 0x0, ...)\n    /usr/local/go/src/reflect/value.go:435 +0x120d\nreflect.Value.Call(0x7f45a0, 0x9a4d88, 0x13, 0xc8200f3268, 0x1, 0x1, 0x0, 0x0, 0x0)\n    /usr/local/go/src/reflect/value.go:303 +0xb1\ngithub.com/urfave/cli.HandleAction(0x7f45a0, 0x9a4d88, 0xc820076a00, 0x0, 0x0)\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/app.go:487 +0x2ee\ngithub.com/urfave/cli.Command.Run(0x8ee970, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x984240, 0x51, 0x0, ...)\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/command.go:191 +0xfec\ngithub.com/urfave/cli.(*App).Run(0xc820001800, 0xc82000a100, 0x2, 0x2, 0x0, 0x0)\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/app.go:240 +0xaa4\nmain.main()\n    /tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/main.go:137 +0xe24\n\n\nRack\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u6642\u306b\u5f15\u6570\u3092\u8ffd\u52a0\n{Host: '0.0.0.0'}\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nRack::Handler::WEBrick.run app, {Host: '0.0.0.0'}\n\n\nRack 1.6 \u306a Sinatra \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b Docker \u30b3\u30f3\u30c6\u30ca\u5916\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304b\u3063\u305f - Qiita\n\n\nRack 1.6 \u304b\u3089\u306f\u3001\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u306a\u3044\u9650\u308a localhost \u306e\u307f\u3092 listen \u3059\u308b\u3088\u3046\u306a\u5909\u66f4\u304c\u52a0\u308f\u3063\u305f\n\n\nrack/webrick.rb at master \u00b7 rack/rack\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u306fHost\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u30db\u30b9\u30c8\u3067\u5b9f\u884c\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nchmod +x my_rack_app.rb\n\n\n\u5b9f\u884c\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u3067\u307e\u3059\u3002\ndocker: Error response from daemon: invalid header field value \"oci runtime error: container_linux.go:247: starting container process caused \\\"exec: \\\\\\\"./my_rack_app.rb\\\\\\\": permission denied\\\"\\n\".\n\n\n\nGemfile\nrack\u3060\u3051\u5165\u308c\u307e\u3059\u3002\nsource 'https://rubygems.org'\n\ngem 'rack'\n\n\nDockerfile\nFROM ruby:2.4-alpine\n\nCOPY Gemfile /\n\nRUN bundle install --clean\n\nCOPY my_rack_app.rb /\n\nCMD [\"./my_rack_app.rb\"]\n\n\n\u5b9f\u884c\ndocker build -t my-ruby-app .\ndocker run --rm -p 8080:8080 my-ruby-app\n\n--rm\u3092\u3064\u3051\u3066\u3001\u7d42\u4e86\u6642\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u7834\u68c4\u3057\u307e\u3059\u3002\n-p\u3092\u3064\u3051\u3066\u3001\u30db\u30b9\u30c8\u306e\u30dd\u30fc\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u307e\u3059\u3002\n\nDocker\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u57fa\u790e | SOTA\n\n\n\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\uff0c\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u5916\u90e8\u30dd\u30fc\u30c8\u3092docker0\u306b\u6652\u3057\u305f\u5185\u90e8port\u306b\u30de\u30c3\u30d7\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n\n\u52d5\u4f5c\u78ba\u8a8d\ncurl\u30b3\u30de\u30f3\u30c9\u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3059\u3002\ncurl localhost:8080\n\n\u3067\nA barebones rack app.\n\n\u304c\u3001\u5e30\u3063\u3066\u304d\u307e\u3059\u3002\n\n\u53c2\u8003\n\n\nRack - Qiita \ndocker \u30b3\u30de\u30f3\u30c9 \u30c1\u30fc\u30c8\u30b7\u30fc\u30c8 - Qiita\n\n\n\n# \u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\n\nRack\u3092\u77e5\u308b\u305f\u3081\u306b\u3001\u5c0f\u3055\u306aRack\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u52d5\u304b\u3057\u3066\u307f\u305f\u3044\u3067\u3059\u3002\nRuby\u306f\u6c17\u8efd\u306bgem install\u3059\u308b\u3068\u74b0\u5883\u304c\u6c5a\u308c\u308b\u306e\u3067sandbox\u304c\u6b32\u3057\u3044\u3067\u3059\u3002\n\u305d\u3053\u3067docker\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n# \u30d9\u30fc\u30b9\u306b\u3059\u308bDokerfile\n[library/ruby - Docker Hub](https://hub.docker.com/_/ruby/)\u306e`ruby:2.4-alpine`\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n# \u4e8b\u524d\u306b\u5fc5\u8981\u306a\u3082\u306e\n- my_rack_app.rb\n- Gemfile\n\n## my_rack_app.rb\n[Rack: a Ruby Webserver Interface](http://rack.github.io/)\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u5143\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n### `shebang`\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```ruby:my_rack_app.rb\n#! /usr/bin/env ruby\n\nrequire 'rack'\n\napp = Proc.new do |env|\n    ['200', {'Content-Type' => 'text/html'}, ['A barebones rack app.']]\nend\n\nRack::Handler::WEBrick.run app, {Host: '0.0.0.0'}\n```\n\n[Perl, Python \u53ca\u3073 Ruby \u30b9\u30af\u30ea\u30d7\u30c8\u306b\u304a\u3051\u308b\u6b63\u3057\u3044shebang\u306e\u66f8\u304d\u65b9 - Qiita](http://qiita.com/tueda/items/369215b99316b2e9f3d8)\n\n#### shebang\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\n\n```\npanic: standard_init_linux.go:175: exec user process caused \"exec format error\" [recovered]\n\tpanic: standard_init_linux.go:175: exec user process caused \"exec format error\"\n\ngoroutine 1 [running, locked to thread]:\npanic(0x88f8a0, 0xc820126d20)\n\t/usr/local/go/src/runtime/panic.go:481 +0x3e6\ngithub.com/urfave/cli.HandleAction.func1(0xc8200f32e8)\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/app.go:478 +0x38e\npanic(0x88f8a0, 0xc820126d20)\n\t/usr/local/go/src/runtime/panic.go:443 +0x4e9\ngithub.com/opencontainers/runc/libcontainer.(*LinuxFactory).StartInitialization.func1(0xc8200f2bf8, 0xc82001a0c8, 0xc8200f2d08)\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/opencontainers/runc/libcontainer/factory_linux.go:259 +0x136\ngithub.com/opencontainers/runc/libcontainer.(*LinuxFactory).StartInitialization(0xc820059630, 0x7fbe739ea728, 0xc820126d20)\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/opencontainers/runc/libcontainer/factory_linux.go:277 +0x5b1\nmain.glob.func8(0xc820076a00, 0x0, 0x0)\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/main_unix.go:26 +0x68\nreflect.Value.call(0x7f45a0, 0x9a4d88, 0x13, 0x8ebac8, 0x4, 0xc8200f3268, 0x1, 0x1, 0x0, 0x0, ...)\n\t/usr/local/go/src/reflect/value.go:435 +0x120d\nreflect.Value.Call(0x7f45a0, 0x9a4d88, 0x13, 0xc8200f3268, 0x1, 0x1, 0x0, 0x0, 0x0)\n\t/usr/local/go/src/reflect/value.go:303 +0xb1\ngithub.com/urfave/cli.HandleAction(0x7f45a0, 0x9a4d88, 0xc820076a00, 0x0, 0x0)\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/app.go:487 +0x2ee\ngithub.com/urfave/cli.Command.Run(0x8ee970, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x984240, 0x51, 0x0, ...)\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/command.go:191 +0xfec\ngithub.com/urfave/cli.(*App).Run(0xc820001800, 0xc82000a100, 0x2, 0x2, 0x0, 0x0)\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/Godeps/_workspace/src/github.com/urfave/cli/app.go:240 +0xaa4\nmain.main()\n\t/tmp/tmp.n151sEscRu/src/github.com/opencontainers/runc/main.go:137 +0xe24\n```\n\n### Rack\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u6642\u306b\u5f15\u6570\u3092\u8ffd\u52a0\n`{Host: '0.0.0.0'}`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```rb\nRack::Handler::WEBrick.run app, {Host: '0.0.0.0'}\n```\n\n- [Rack 1.6 \u306a Sinatra \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b Docker \u30b3\u30f3\u30c6\u30ca\u5916\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304b\u3063\u305f - Qiita](http://qiita.com/dtan4/items/c7c47b845b6f15c4076f)\n\n> Rack 1.6 \u304b\u3089\u306f\u3001\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u306a\u3044\u9650\u308a localhost \u306e\u307f\u3092 listen \u3059\u308b\u3088\u3046\u306a\u5909\u66f4\u304c\u52a0\u308f\u3063\u305f\n\n- [rack/webrick.rb at master \u00b7 rack/rack](https://github.com/rack/rack/blob/master/lib/rack/handler/webrick.rb#L29)\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u306f`Host`\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n### \u30db\u30b9\u30c8\u3067\u5b9f\u884c\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\nchmod +x my_rack_app.rb\n```\n\n#### \u5b9f\u884c\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u3067\u307e\u3059\u3002\n\n```\ndocker: Error response from daemon: invalid header field value \"oci runtime error: container_linux.go:247: starting container process caused \\\"exec: \\\\\\\"./my_rack_app.rb\\\\\\\": permission denied\\\"\\n\".\n\n```\n\n## Gemfile\nrack\u3060\u3051\u5165\u308c\u307e\u3059\u3002\n\n```\nsource 'https://rubygems.org'\n\ngem 'rack'\n```\n\n\n\n\n\n# Dockerfile\n```\nFROM ruby:2.4-alpine\n\nCOPY Gemfile /\n\nRUN bundle install --clean\n\nCOPY my_rack_app.rb /\n\nCMD [\"./my_rack_app.rb\"]\n```\n\n# \u5b9f\u884c\n```\ndocker build -t my-ruby-app .\ndocker run --rm -p 8080:8080 my-ruby-app\n```\n\n`--rm`\u3092\u3064\u3051\u3066\u3001\u7d42\u4e86\u6642\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u7834\u68c4\u3057\u307e\u3059\u3002\n`-p`\u3092\u3064\u3051\u3066\u3001\u30db\u30b9\u30c8\u306e\u30dd\u30fc\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u307e\u3059\u3002\n\n- [Docker\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u57fa\u790e | SOTA](http://deeeet.com/writing/2014/05/11/docker-network/)\n\n> \u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\uff0c\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u5916\u90e8\u30dd\u30fc\u30c8\u3092docker0\u306b\u6652\u3057\u305f\u5185\u90e8port\u306b\u30de\u30c3\u30d7\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n# \u52d5\u4f5c\u78ba\u8a8d\n\ncurl\u30b3\u30de\u30f3\u30c9\u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\ncurl localhost:8080\n```\n\u3067\n\n```\nA barebones rack app.\n```\n\n\u304c\u3001\u5e30\u3063\u3066\u304d\u307e\u3059\u3002\n\n\n# \u53c2\u8003\n- [Rack - Qiita](http://qiita.com/bibio/items/7e45af09f3b8a0146c9e) \n- [docker \u30b3\u30de\u30f3\u30c9 \u30c1\u30fc\u30c8\u30b7\u30fc\u30c8 - Qiita](http://qiita.com/voluntas/items/68c1fd04dd3d507d4083)\n", "tags": ["docker", "rack", "Ruby"]}