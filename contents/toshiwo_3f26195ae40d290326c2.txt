{"context": " More than 1 year has passed since last update.\n\n\u3053\u306e\u624b\u6cd5\u306f RubyMotion version 2.4 \u3067\u306f\u89e3\u6c7a\u3055\u308c\u3066\u3044\u307e\u3059!\n\n\nFixed a long-standing set of memory-related bugs related to lambdas.\nDynamic variables (shared by lambdas and calling scope) are now allocated\nas heap memory inside the Proc data structure. Local variables are properly\nsynchronized. Proc objects are properly reclaimed by the system once they\nare no longer used. Changes have been added to both the compiler and the\nruntime.\n\n\n\u3053\u306e\u5bfe\u5fdc\u306b\u3088\u3063\u3066\u3001lambda \u306a\u3069\u306e\u4e2d\u3067\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304c\u53c2\u7167\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306elambda\u306e\u5916\u5074\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306f\u81ea\u52d5\u7684\u306b retain \u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305d\u3046\u3067\u3059\u3002\n\u3053\u306e\u5bfe\u5fdc\u306b\u3088\u3063\u3066 \u306a\u306b\u304c\u3046\u308c\u3057\u3044\u304b\uff1f \u3068\u8a00\u3046\u3068\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u4f7f\u3063\u3066\u3057\u307e\u3046\u3068\u3001\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6d88\u6ec5\u3059\u308b\u307e\u3067\u30e1\u30e2\u30ea\u304c\u6d88\u8cbb\u3055\u308c\u3066\u3057\u307e\u3046\u3053\u3068\u3084\u3001\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5024\u3092\u30bb\u30c3\u30c8/\u30ea\u30bb\u30c3\u30c8\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3060\u3068RubyMotion\u306eGC\u304c\u9069\u5ea6\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u89e3\u653e\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u305d\u306e\u3053\u3068\u304b\u3089\u3001\u9577\u671f\u7684\u306b\u898b\u308b\u3068\u30e1\u30e2\u30ea\u306e\u6d88\u8cbb\u91cf\u306a\u3069\u30ea\u30bd\u30fc\u30b9\u3068\u958b\u767a\u8005\u306b\u3084\u3055\u3057\u304f\u306a\u308b\u3068\u306e\u3053\u3068\u3067\u3059\u3002(watson1978\u8ac7)\n\nProMotion \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u8a18\u8ff0\u3055\u308c\u3066\u3044\u306a\u3044\u4e0a\u306b\u3001 ProMotion \u3067\u306e\u8a18\u8ff0\u65b9\u6cd5\u3067\u306f\u6c17\u4ed8\u304d\u306b\u304f\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u3001\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n(\u3059\u3067\u306b Objective-C \u306a\u3069\u3067\u306e iOS \u306e\u958b\u767a\u306b\u306a\u308c\u3066\u308b\u4eba\u306a\u3089\u3001\u843d\u3061\u308b\u539f\u56e0\u306b\u3064\u3044\u3066\u60f3\u50cf\u304c\u4ed8\u304f\u3068\u601d\u3044\u307e\u3059)\nModalView \u3092\u547c\u3073\u51fa\u3059\u5074\u304c HomeScreen \u3001\u547c\u3073\u51fa\u3055\u308c\u308b ModalView \u304c ModalScreen \u30af\u30e9\u30b9\u3068\u3057\u3066\u8a71\u3092\u9032\u3081\u307e\u3059\u3002\n\u6700\u521d\u306bgithub\u4e0a\u306eProMotion\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u65b9\u6cd5\u3060\u3068(ModalView\u3092\u4f55\u5ea6\u304b\u958b\u3044\u305f\u308a\u9589\u3058\u305f\u308a\u3057\u3066\u308b\u3068)\u30a2\u30d7\u30ea\u304c\u843d\u3061\u305f\u308a\u3057\u307e\u3059\u3002\n\nhome_screen.rb\nclass HomeScreen < ProMotion::Screen\n\n  def open_modal\n    open ModalScreen.new, modal: true\n  end\n\nend\n\n\n\nmodal_screen.rb\nclass ModalScreen < ProMotion::Screen\n\n  # close_modal \u306fUIButton\u306a\u3069\u306eaction\u3067\u547c\u3076\n  def close_modal\n    close \n  end\n\nend\n\n\n\u6b63\u3057\u304f\u306f \u2193\n\nhome_screen.rb\nclass HomeScreen < ProMotion::Screen\n\n  def  open_modal\n    # \u4e00\u5ea6\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306b ModalScreen \u3092\u5165\u308c\u308b\n    @modal_screen = ModalScreen.new\n    open @modal_screen, modal: true\n  end\n\n  # ModalScreen \u304b\u3089 dismissViewControllerAnimated:completion \u7d4c\u7531\u3067\u5024\u3092\u53d7\u3051\u53d6\u308c\u308b\n  def on_return args\n    puts args[:value] # => :ok\n  end\n\nend\n\n\n\nmodal_screen.rb\nclass ModalScreen < ProMotion::Screen\n\n  # parent_screen \u3092\u7528\u610f\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u81ea\u52d5\u7684\u306b\u547c\u3073\u51fa\u3057\u5143\u306e screen \u3092\u30bb\u30c3\u30c8\u3057\u3066\u304f\u308c\u308b\n  attr_accessor :parent_screen\n\n  def close_modal\n    # parent_screen \u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u308b\u3068\n    # close \u30e1\u30bd\u30c3\u30c9\u5185\u3067\u6b63\u3057\u304f dismissViewControllerAnimated:completion \u304c\u547c\u3070\u308c\u308b\n    close value: :ok\n  end\n\nend\n\n\n\u4e00\u5ea6\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306b\u683c\u7d0d\u3057\u3066\u3084\u308b\u3053\u3068\u3067 Objective-C \u306e strong \u306a property \u306b\u306a\u308a\u307e\u3059\u3002\nmodal_screen = ModalScreen.new \u306e\u3088\u3046\u306b\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3067\u306f\u30c0\u30e1\u3067\u3057\u305f\u3002\n\u3053\u306e\u65b9\u6cd5\u3067\u610f\u56f3\u3057\u306a\u3044\u30bf\u30a4\u30df\u30f3\u30b0\u3067 ModalScreen \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30e2\u30ea\u304c\u89e3\u653e\u3055\u308c\u3066\u843d\u3061\u308b\u3053\u3068\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u3001\u4f59\u8ac7\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u3051\u3066\u3082\u3044\u3044\u3068\u601d\u3046\u306e\u3060\u3051\u308c\u3069\u3001\u73fe\u72b6\u306f UIWindow \u304c\u8fd4\u3063\u3066\u304f\u308b\u3088\u3046\u3067\u3059 \u3053\u306e PR \u304cmerge\u3055\u308c\u305f\u306e\u3067(\u4ed6\u306e\u6a5f\u80fd\u3068conflict\u306a\u3069\u3059\u308b\u3053\u3068\u304c\u306a\u3051\u308c\u3070) version 1.0 \u304b\u3089\u4f7f\u3048\u305d\u3046\u3067\u3059\n\nhome_screen.rb\nclass HomeScreen < ProMotion::Screen\n\n  def open_modal\n    @modal_screen = open ModalScreen.new, modal: true # => UIWindow\n  end\n\nend\n\n\n\n# \u3053\u306e\u624b\u6cd5\u306f RubyMotion version 2.4 \u3067\u306f\u89e3\u6c7a\u3055\u308c\u3066\u3044\u307e\u3059!\n\n>  * Fixed a long-standing set of memory-related bugs related to lambdas.\n>    Dynamic variables (shared by lambdas and calling scope) are now allocated\n>    as heap memory inside the Proc data structure. Local variables are properly\n>    synchronized. Proc objects are properly reclaimed by the system once they\n>    are no longer used. Changes have been added to both the compiler and the\n>    runtime.\n\n\u3053\u306e\u5bfe\u5fdc\u306b\u3088\u3063\u3066\u3001lambda \u306a\u3069\u306e\u4e2d\u3067\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304c\u53c2\u7167\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306elambda\u306e\u5916\u5074\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306f\u81ea\u52d5\u7684\u306b retain \u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305d\u3046\u3067\u3059\u3002\n\n\u3053\u306e\u5bfe\u5fdc\u306b\u3088\u3063\u3066 *\u306a\u306b\u304c\u3046\u308c\u3057\u3044\u304b\uff1f* \u3068\u8a00\u3046\u3068\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u4f7f\u3063\u3066\u3057\u307e\u3046\u3068\u3001\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6d88\u6ec5\u3059\u308b\u307e\u3067\u30e1\u30e2\u30ea\u304c\u6d88\u8cbb\u3055\u308c\u3066\u3057\u307e\u3046\u3053\u3068\u3084\u3001\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5024\u3092\u30bb\u30c3\u30c8/\u30ea\u30bb\u30c3\u30c8\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3060\u3068RubyMotion\u306eGC\u304c\u9069\u5ea6\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u89e3\u653e\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u305d\u306e\u3053\u3068\u304b\u3089\u3001\u9577\u671f\u7684\u306b\u898b\u308b\u3068\u30e1\u30e2\u30ea\u306e\u6d88\u8cbb\u91cf\u306a\u3069\u30ea\u30bd\u30fc\u30b9\u3068\u958b\u767a\u8005\u306b\u3084\u3055\u3057\u304f\u306a\u308b\u3068\u306e\u3053\u3068\u3067\u3059\u3002(watson1978\u8ac7)\n\n\n***\n\nProMotion \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u8a18\u8ff0\u3055\u308c\u3066\u3044\u306a\u3044\u4e0a\u306b\u3001 ProMotion \u3067\u306e\u8a18\u8ff0\u65b9\u6cd5\u3067\u306f\u6c17\u4ed8\u304d\u306b\u304f\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u3001\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n(\u3059\u3067\u306b Objective-C \u306a\u3069\u3067\u306e iOS \u306e\u958b\u767a\u306b\u306a\u308c\u3066\u308b\u4eba\u306a\u3089\u3001\u843d\u3061\u308b\u539f\u56e0\u306b\u3064\u3044\u3066\u60f3\u50cf\u304c\u4ed8\u304f\u3068\u601d\u3044\u307e\u3059)\n\nModalView \u3092\u547c\u3073\u51fa\u3059\u5074\u304c HomeScreen \u3001\u547c\u3073\u51fa\u3055\u308c\u308b ModalView \u304c ModalScreen \u30af\u30e9\u30b9\u3068\u3057\u3066\u8a71\u3092\u9032\u3081\u307e\u3059\u3002\n\n\u6700\u521d\u306bgithub\u4e0a\u306eProMotion\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u65b9\u6cd5\u3060\u3068(ModalView\u3092\u4f55\u5ea6\u304b\u958b\u3044\u305f\u308a\u9589\u3058\u305f\u308a\u3057\u3066\u308b\u3068)\u30a2\u30d7\u30ea\u304c\u843d\u3061\u305f\u308a\u3057\u307e\u3059\u3002\n\n```rb:home_screen.rb\nclass HomeScreen < ProMotion::Screen\n\n  def open_modal\n    open ModalScreen.new, modal: true\n  end\n\nend\n```\n\n```rb:modal_screen.rb\nclass ModalScreen < ProMotion::Screen\n\n  # close_modal \u306fUIButton\u306a\u3069\u306eaction\u3067\u547c\u3076\n  def close_modal\n    close \n  end\n\nend\n```\n\n\u6b63\u3057\u304f\u306f \u2193\n\n```ruby:home_screen.rb\nclass HomeScreen < ProMotion::Screen\n\n  def  open_modal\n    # \u4e00\u5ea6\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306b ModalScreen \u3092\u5165\u308c\u308b\n    @modal_screen = ModalScreen.new\n    open @modal_screen, modal: true\n  end\n\n  # ModalScreen \u304b\u3089 dismissViewControllerAnimated:completion \u7d4c\u7531\u3067\u5024\u3092\u53d7\u3051\u53d6\u308c\u308b\n  def on_return args\n    puts args[:value] # => :ok\n  end\n\nend\n```\n\n```rb:modal_screen.rb\nclass ModalScreen < ProMotion::Screen\n\n  # parent_screen \u3092\u7528\u610f\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u81ea\u52d5\u7684\u306b\u547c\u3073\u51fa\u3057\u5143\u306e screen \u3092\u30bb\u30c3\u30c8\u3057\u3066\u304f\u308c\u308b\n  attr_accessor :parent_screen\n\n  def close_modal\n    # parent_screen \u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u308b\u3068\n    # close \u30e1\u30bd\u30c3\u30c9\u5185\u3067\u6b63\u3057\u304f dismissViewControllerAnimated:completion \u304c\u547c\u3070\u308c\u308b\n    close value: :ok\n  end\n\nend\n```\n\n\u4e00\u5ea6\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306b\u683c\u7d0d\u3057\u3066\u3084\u308b\u3053\u3068\u3067 Objective-C \u306e strong \u306a property \u306b\u306a\u308a\u307e\u3059\u3002\nmodal_screen = ModalScreen.new \u306e\u3088\u3046\u306b\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3067\u306f\u30c0\u30e1\u3067\u3057\u305f\u3002\n\u3053\u306e\u65b9\u6cd5\u3067\u610f\u56f3\u3057\u306a\u3044\u30bf\u30a4\u30df\u30f3\u30b0\u3067 ModalScreen \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30e2\u30ea\u304c\u89e3\u653e\u3055\u308c\u3066\u843d\u3061\u308b\u3053\u3068\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3001\u4f59\u8ac7\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u3051\u3066\u3082\u3044\u3044\u3068\u601d\u3046\u306e\u3060\u3051\u308c\u3069\u3001<del>\u73fe\u72b6\u306f UIWindow \u304c\u8fd4\u3063\u3066\u304f\u308b\u3088\u3046\u3067\u3059</del> \u3053\u306e [PR](https://github.com/clearsightstudio/ProMotion/pull/180) \u304cmerge\u3055\u308c\u305f\u306e\u3067(\u4ed6\u306e\u6a5f\u80fd\u3068conflict\u306a\u3069\u3059\u308b\u3053\u3068\u304c\u306a\u3051\u308c\u3070) version 1.0 \u304b\u3089\u4f7f\u3048\u305d\u3046\u3067\u3059\n\n```rb:home_screen.rb\nclass HomeScreen < ProMotion::Screen\n\n  def open_modal\n    @modal_screen = open ModalScreen.new, modal: true # => UIWindow\n  end\n\nend\n```\n", "tags": ["RubyMotion2.3", "ProMotion0.7.6"]}