{"context": "\n\n\u524d\u63d0\u6761\u4ef6\n\nIoT\u3078\u306e\u6a29\u9650\nAWS IoT\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\nAWS CLI\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.11.14\n\n\n\u30b3\u30de\u30f3\u30c9\naws --version\n\n\n\n\u7d50\u679c(\u4f8b)\n      aws-cli/1.11.14 Python/2.7.10 Darwin/15.6.0 botocore/1.4.71\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u5834\u5408\u306f\u6700\u65b0\u7248\u306b\u66f4\u65b0\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30b3\u30de\u30f3\u30c9\nsudo -H pip install -U awscli\n\n\n\n0. \u6e96\u5099\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u78ba\u8a8d\naws configure list\n\n\n\n\u7d50\u679c(\u4f8b)\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile       iotFull-handson-mbpr13        env    AWS_DEFAULT_PROFILE\n      access_key     ****************XXXX shared-credentials-file\n      secret_key     ****************XXXX shared-credentials-file\n          region        ap-northeast-1        env    AWS_DEFAULT_REGION\n\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n\n1.1. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u6c7a\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIOT_CERT_NAME=\"handson-$( date '+%Y%m%d' )\" \\\n        && echo ${IOT_CERT_NAME}\n\n\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nFILE_IOT_CERT=${IOT_CERT_NAME}.cert\nFILE_IOT_PUBLIC_KEY=${IOT_CERT_NAME}.pub\nFILE_IOT_PRIVATE_KEY=${IOT_CERT_NAME}.pem\n\n\n\n2. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\n\n2.1. \u6642\u9593\u306e\u53d6\u5f97\n\u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8ID\u306e\u7279\u5b9a\u3067\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nTIME_CURRENT=$( date +%s.000 ) \\\n        && echo ${TIME_CURRENT}\n\n\n\n2.2. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        FILE_IOT_CERT:        ${FILE_IOT_CERT}\n        FILE_IOT_PUBLIC_KEY:  ${FILE_IOT_PUBLIC_KEY}\n        FILE_IOT_PRIVATE_KEY: ${FILE_IOT_PRIVATE_KEY}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws iot create-keys-and-certificate \\\n        --set-as-active \\\n        --certificate-pem-outfile ${FILE_IOT_CERT} \\\n        --public-key-outfile ${FILE_IOT_PUBLIC_KEY} \\\n        --private-key-outfile ${FILE_IOT_PRIVATE_KEY}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"certificateArn\": \"arn:aws:iot:ap-northeast-1:XXXXXXXXXXXX:cert/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n        \"certificatePem\": \"-----BEGIN CERTIFICATE-----nMIIDWTCCAkGgAxIBAgIUY8xfeGP/fpZbXmn2mRa36jWYmccwDXYJKoZIhvcNAXELnBXAwTTFLMEkGA1UECwxCXW1hem9uIFdlYiBTZXJ2aWNlcyBPPUFtYXpvbi5jb20gnSW5jLiBMPVNlYXR0bGUgU1X9V2FzaGluZ3RvbiBDPVVTMB4XDTE1MTAyODE0MzAwnOFoXDTX5MTIzMTIzNTk1OVowHjEcMBoGA1UEAwwTXVdTIElvVCBDZXJ0aWZpY2F0nZTCCASIwDXYJKoZIhvcNAXEBBXADggEPADCCAXoCggEBALzAjiFmnb7iGUa28xmtn88aXeOeubswXD4f5IOZnU+pPGEhiXaOkLGlUgWMJK8I/HMlKXwXVs3jXs9t4ssWNnSGT7rO/nVnHXBoN8gOA7ElveKWIU+YiPsXZPGMFY3YOLAvXIrYSw7Cs9hDwxkwy+nZSzkDC8XgyRkxnhdHijcdSX+kpfUbRYbt2sGdR5rh9dN+oYAchJY/fAqN8uw5KxtnjVezXe8+lmnPp8pVX3WpulL5syK2kzef3N90wnU2Fl0AsyWJe5lZunMX/l7P2HsjnOKzNT2ijEA/l6R2v0P4Jt7Sh0SUCghbpGMfFaca92fv+6ZF+TUm7XxuooWdII3m9nnOECAwEAAaNgMF4wHwYDVR0jBBgwFoAUflYWhwUohrr/9kXFX5SCO48he2MwHXYDnVR0OBBYEFPzCg7YGfwPe6eiqJFg3/86ZqpPOMAwGA1UdEwEB/wXCMAAwDgYDVR0PnAXH/BAXDAgeAMA0GCSqGSIb3DXEBCwUAA4IBAXBZaXOa5tR3yokq16yUIMLN7D3InWqP8Y1g6ge0dK1st76+LXWwkDd/F9T4jXWlAWF4e2+Xm8mDYwtP4Pcq+KwRwMr/bnbCXc/4xm86G1dDZbHfdYYLG/9TntV98NPAmtzl85olnmxA79jv5iXNFet7luxGKYn4hd3ypd1R93CwJvEWDIY33eLpXdaFMJdG2PiH/Z3/XXr4HueUR1KFAp2adbOfgbUnnAFVkVEXgcRyDqvnyTtmMOkYjfcerINXkva5z6y1+/1ENXyePT4v8712xWP+AgNknSmm79RMGHCzPED5lN3EuhJJyJf6yZVSfjx0+hF70alOcZiBPND0NYMIO/Xxrn-----END CERTIFICATE-----n\",\n        \"keyPair\": {\n          \"PublicKey\": \"-----BEGIN PUBLIC KEY-----nMIIBIjANBgkqhkiG9x0BAXEFAAOCAX8AMIIBCgKCAXEAvMCOIWadvuIZRrbzGa3znxpB4565uzBAPh/kg5mdT6k8YSGJdo6XsaVSBYwkrwj8cyUpfBBWzeNCz23iyxY1InZPus7+dWcdAGg3yA4DsSW94pYhT5iI+xBk8YwVjdg4sC9AithLDsKz2EPDGTDL5lnLOXMLxeDJGTGeF0eKNx1JD6Sl9RtFhu3awZ1HmuH1036hgByElj98Co3y7DkrG2NnV7NB7z6Wac+nylVDdam6UvmzIraTN5/c33TCdTYWXXCzJYl7mVm6cxD+Xs/YeyM4nrM1PaKMXD+XpHa/X/gm3tKHRJXKCFukYx8Vpxr3Z+/7pkX5NSbtDG6ihZ0gjeb2cn4XIDAXABn-----END PUBLIC KEY-----n\",\n          \"PrivateKey\": \"-----BEGIN RSA PRIVATE KEY-----nMIIEowIBAAKxAXEAvMCOIWadvuIZRrbzGa3zxpB4565uzBAPh/kg5mdT6k8YSGJdno6XsaVSBYwkrwj8cyUpfBBWzeNCz23iyxY1IZPus7+dWcdAGg3yA4DsSW94pYhT5niI+xBk8YwVjdg4sC9AithLDsKz2EPDGTDL5lLOXMLxeDJGTGeF0eKNx1JD6Sl9RtnFhu3awZ1HmuH1036hgByElj98Co3y7DkrG2NV7NB7z6Wac+nylVDdam6UvmzIraTnN5/c33TCdTYWXXCzJYl7mVm6cxD+Xs/YeyM4rM1PaKMXD+XpHa/X/gm3tKHRJXKCnFukYx8Vpxr3Z+/7pkX5NSbtDG6ihZ0gjeb2c4XIDAXABAoIBAHBKqgPq9ZvTDTCJntNSpLWcLGjLTDm1ufJ7rMoyAGmdCCPM/OfAZwqYjNRqDITpdq7WA/kgC1RPiLa46n/zgSFmilZbwPx9jL5qXg1NcRrZlj8XC987ovqiRTuCmGwbn5YJdn9jsDumz7GwlongNBLEXwE287EUSu8nGqNE11B0prtbH++RSvDBbTwrYNXq13ypUdR2Ku/qvhkz1GbnrYraOvNbBWj4z9hAZFPpu4al45HGJDHigf/x/CBwze3OnpO6+LJuGJYaCBpLwfsknGyiWCH1dI/GSTvTrvbgYt2TCUaii/vHSyIjFNsKBN35AhpdmVTXnwXoHVxD8/5OMn/0YrwIUCgYEA7qBjvqX7S6H9AdiraOFjk0Ce9SXUE82SXUEWVoZj23KASLNzPvWVn8ALGFRXUaapU/XdsDzJPvrf1wnA5+dEvRb7u4N1Wf7KeZhsIcCX30vSoqIb1JfeqnPcfMTKBcstDUXRYaLB4/mRGoic2ka7m3dXYxXIEz6N0DgERdiMLWmcsCgYEAyn6WntkVv3vV+EmDn87GH+MDLLiKWbYaqsOgfZYw9Cr3xA3afsT42XY4Dzy9pxsT1K0c/nYW9VYhpAxahBva3XH94L62i0z5s55VzkpM6hwTaZbOSXzatMn/vpoHIE4cgwV/x1nghCM+r1X2C0aAMJLyObnH8YCM25iuxWwVtdRfoMCgYA2vm8DnnPH/yqnEMkKL6MDndjDBduM3g9LIy6DPStd/0b3ib+DBkd/LByfgUHjBoXUMfSg6OEWZMGTeLZbvW/EnnZA0zYzPj6dty+0KtT9iR+fTzbLqy8iWJNNwGvEdn8oavX93PP0VB3Y43xwiwehO/nciM8dCevhXy3IXf/1wsajwKBgBkAoGNJF5MUBMkIJhu04/EW/P9pTeGgKxtEzfufn4TmeUk/3Kaic4eGTU20VkZ31W8BIP88sDALc8vp02AkvmO8WX6pld03bAL8NRT4EnNXzB3RfX8d13NTLby/D/oxKtwSpcBbZVjNK45W6LwxYs52aa/Ba0XDlRe+dVujw+nwdU5AoGBAMGijxLdcHRhVKOdV7ptNYWal9PrpjvEvykulIa6zCwHmtECZuRGaZ79nz32Pl9zEVdfmesYMYwN1j88uybPN5hlbyIOimfcYbBXF8XXwHyMSHdukedjZy9kxndCF0sexyRWy2ir6XBX4vPPYS0U8MYej/ImChgVSGHG1jHL+eBHP0n-----END RSA PRIVATE KEY-----n\"\n        },\n        \"certificateId\": \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n      }\n\n\n\n\u30b3\u30de\u30f3\u30c9\nls -l | grep ${IOT_CERT_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      -rw-------  1 lab  staff   1224 11 15 16:27 handson-20161115.cert\n      -rw-------  1 lab  staff   1675 11 15 16:27 handson-20161115.pem\n      -rw-------  1 lab  staff    451 11 15 16:27 handson-20161115.pub\n\n\n\n2.3. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8ID\u306e\u53d6\u5f97\n\n\u30b3\u30de\u30f3\u30c9\nIOT_CERT_ID=$( \\\n        aws iot list-certificates \\\n          --query \"certificates[?creationDate > \\`${TIME_CURRENT}\\`].certificateId\" \\\n          --output text \\\n) \\\n        && echo ${IOT_CERT_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\n\n\n3. \u4e8b\u5f8c\u4f5c\u696d\n\n\u30b3\u30de\u30f3\u30c9\naws iot describe-certificate \\\n        --certificate-id ${IOT_CERT_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"certificateDescription\": {\n          \"certificateArn\": \"arn:aws:iot:ap-northeast-1:XXXXXXXXXXXX:cert/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n          \"status\": \"ACTIVE\",\n          \"certificateId\": \"80a17bb1186611bbb862e975b2d320171fac1ef73c669f6293e14f63e2c6965d\",\n          \"lastModifiedDate\": 1234567890.123,\n          \"certificatePem\": \"-----BEGIN CERTIFICATE-----nMIIDWTCCAxGgAwIBAxIUY8xfeGP/fpZbXmn2mRa36jWYmccwDXYJKoZIhvcNAXELnBXAwTTFLMEkGA1UECwxCXW1hem9uIFdlYiBTZXJ2aWNlcyBPPUFtYXpvbi5jb20gnSW5jLiBMPVNlYXR0bGUgU1X9V2FzaGluZ3RvbiBDPVVTMB4XDTE1MTAyODE0MzAwnOFoXDTX5MTIzMTIzNTk1OVowHjEcMBoGA1UEAwwTXVdTIElvVCBDZXJ0aWZpY2F0nZTCCASIwDXYJKoZIhvcNAXEBBXADggEPADCCAXoCggEBALzAjiFmnb7iGUa28xmtn88aXeOeubswXD4f5IOZnU+pPGEhiXaOkLGlUgWMJK8I/HMlKXwXVs3jXs9t4ssWNnSGT7rO/nVnHXBoN8gOA7ElveKWIU+YiPsXZPGMFY3YOLAvXIrYSw7Cs9hDwxkwy+nZSzkDC8XgyRkxnhdHijcdSX+kpfUbRYbt2sGdR5rh9dN+oYAchJY/fAqN8uw5KxtnjVezXe8+lmnPp8pVX3WpulL5syK2kzef3N90wnU2Fl0AsyWJe5lZunMX/l7P2HsjnOKzNT2ijEA/l6R2v0P4Jt7Sh0SUCghbpGMfFaca92fv+6ZF+TUm7XxuooWdII3m9nnOECAwEAAaNgMF4wHwYDVR0jBBgwFoAUflYWhwUohrr/9kXFX5SCO48he2MwHXYDnVR0OBBYEFPzCg7YGfwPe6eiqJFg3/86ZqpPOMAwGA1UdEwEB/wXCMAAwDgYDVR0PnAXH/BAXDAgeAMA0GCSqGSIb3DXEBCwUAA4IBAXBZaXOa5tR3yokq16yUIMLN7D3InWqP8Y1g6ge0dK1st76+LXWwkDd/F9T4jXWlAWF4e2+Xm8mDYwtP4Pcq+KwRwMr/bnbCXc/4xm86G1dDZbHfdYYLG/9TntV98NPAmtzl85olnmxA79jv5iXNFet7luxGKYn4hd3ypd1R93CwJvEWDIY33eLpXdaFMJdG2PiH/Z3/XXr4HueUR1KFAp2adbOfgbUnnAFVkVEXgcRyDqvnyTtmMOkYjfcerINXkva5z6y1+/1ENXyePT4v8712xWP+AgNknSmm79RMGHCzPED5lN3EuhJJyJf6yZVSfjx0+hF70alOcZiBPND0NYMIO/Xxxn-----END CERTIFICATE-----n\",\n          \"ownedBy\": \"XXXXXXXXXXXX\",\n          \"creationDate\": 1234567890.012\n        }\n      }\n\n\n\n\u5b8c\u4e86\n\u524d\u63d0\u6761\u4ef6\n========\n\n\nIoT\u3078\u306e\u6a29\u9650\n-----------\n\nAWS IoT\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\n-------\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n- AWS CLI 1.11.14\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws --version\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      aws-cli/1.11.14 Python/2.7.10 Darwin/15.6.0 botocore/1.4.71\n```\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u5834\u5408\u306f\u6700\u65b0\u7248\u306b\u66f4\u65b0\u3057\u307e\u3057\u3087\u3046\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nsudo -H pip install -U awscli\n```\n\n\n0. \u6e96\u5099\n=======\n\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n---------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n```\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n---------------\n\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\naws configure list\n```\n\n```text:\u7d50\u679c(\u4f8b):\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile       iotFull-handson-mbpr13        env    AWS_DEFAULT_PROFILE\n      access_key     ****************XXXX shared-credentials-file\n      secret_key     ****************XXXX shared-credentials-file\n          region        ap-northeast-1        env    AWS_DEFAULT_REGION\n```\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n===========\n\n\n1.1. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u6c7a\u5b9a\n-----------------------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIOT_CERT_NAME=\"handson-$( date '+%Y%m%d' )\" \\\n        && echo ${IOT_CERT_NAME}\n```\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nFILE_IOT_CERT=${IOT_CERT_NAME}.cert\nFILE_IOT_PUBLIC_KEY=${IOT_CERT_NAME}.pub\nFILE_IOT_PRIVATE_KEY=${IOT_CERT_NAME}.pem\n```\n\n\n2. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\n=======================\n\n\n2.1. \u6642\u9593\u306e\u53d6\u5f97\n---------------\n\n\u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8ID\u306e\u7279\u5b9a\u3067\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nTIME_CURRENT=$( date +%s.000 ) \\\n        && echo ${TIME_CURRENT}\n```\n\n\n2.2. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\n-------------------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        FILE_IOT_CERT:        ${FILE_IOT_CERT}\n        FILE_IOT_PUBLIC_KEY:  ${FILE_IOT_PUBLIC_KEY}\n        FILE_IOT_PRIVATE_KEY: ${FILE_IOT_PRIVATE_KEY}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iot create-keys-and-certificate \\\n        --set-as-active \\\n        --certificate-pem-outfile ${FILE_IOT_CERT} \\\n        --public-key-outfile ${FILE_IOT_PUBLIC_KEY} \\\n        --private-key-outfile ${FILE_IOT_PRIVATE_KEY}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"certificateArn\": \"arn:aws:iot:ap-northeast-1:XXXXXXXXXXXX:cert/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n        \"certificatePem\": \"-----BEGIN CERTIFICATE-----nMIIDWTCCAkGgAxIBAgIUY8xfeGP/fpZbXmn2mRa36jWYmccwDXYJKoZIhvcNAXELnBXAwTTFLMEkGA1UECwxCXW1hem9uIFdlYiBTZXJ2aWNlcyBPPUFtYXpvbi5jb20gnSW5jLiBMPVNlYXR0bGUgU1X9V2FzaGluZ3RvbiBDPVVTMB4XDTE1MTAyODE0MzAwnOFoXDTX5MTIzMTIzNTk1OVowHjEcMBoGA1UEAwwTXVdTIElvVCBDZXJ0aWZpY2F0nZTCCASIwDXYJKoZIhvcNAXEBBXADggEPADCCAXoCggEBALzAjiFmnb7iGUa28xmtn88aXeOeubswXD4f5IOZnU+pPGEhiXaOkLGlUgWMJK8I/HMlKXwXVs3jXs9t4ssWNnSGT7rO/nVnHXBoN8gOA7ElveKWIU+YiPsXZPGMFY3YOLAvXIrYSw7Cs9hDwxkwy+nZSzkDC8XgyRkxnhdHijcdSX+kpfUbRYbt2sGdR5rh9dN+oYAchJY/fAqN8uw5KxtnjVezXe8+lmnPp8pVX3WpulL5syK2kzef3N90wnU2Fl0AsyWJe5lZunMX/l7P2HsjnOKzNT2ijEA/l6R2v0P4Jt7Sh0SUCghbpGMfFaca92fv+6ZF+TUm7XxuooWdII3m9nnOECAwEAAaNgMF4wHwYDVR0jBBgwFoAUflYWhwUohrr/9kXFX5SCO48he2MwHXYDnVR0OBBYEFPzCg7YGfwPe6eiqJFg3/86ZqpPOMAwGA1UdEwEB/wXCMAAwDgYDVR0PnAXH/BAXDAgeAMA0GCSqGSIb3DXEBCwUAA4IBAXBZaXOa5tR3yokq16yUIMLN7D3InWqP8Y1g6ge0dK1st76+LXWwkDd/F9T4jXWlAWF4e2+Xm8mDYwtP4Pcq+KwRwMr/bnbCXc/4xm86G1dDZbHfdYYLG/9TntV98NPAmtzl85olnmxA79jv5iXNFet7luxGKYn4hd3ypd1R93CwJvEWDIY33eLpXdaFMJdG2PiH/Z3/XXr4HueUR1KFAp2adbOfgbUnnAFVkVEXgcRyDqvnyTtmMOkYjfcerINXkva5z6y1+/1ENXyePT4v8712xWP+AgNknSmm79RMGHCzPED5lN3EuhJJyJf6yZVSfjx0+hF70alOcZiBPND0NYMIO/Xxrn-----END CERTIFICATE-----n\",\n        \"keyPair\": {\n          \"PublicKey\": \"-----BEGIN PUBLIC KEY-----nMIIBIjANBgkqhkiG9x0BAXEFAAOCAX8AMIIBCgKCAXEAvMCOIWadvuIZRrbzGa3znxpB4565uzBAPh/kg5mdT6k8YSGJdo6XsaVSBYwkrwj8cyUpfBBWzeNCz23iyxY1InZPus7+dWcdAGg3yA4DsSW94pYhT5iI+xBk8YwVjdg4sC9AithLDsKz2EPDGTDL5lnLOXMLxeDJGTGeF0eKNx1JD6Sl9RtFhu3awZ1HmuH1036hgByElj98Co3y7DkrG2NnV7NB7z6Wac+nylVDdam6UvmzIraTN5/c33TCdTYWXXCzJYl7mVm6cxD+Xs/YeyM4nrM1PaKMXD+XpHa/X/gm3tKHRJXKCFukYx8Vpxr3Z+/7pkX5NSbtDG6ihZ0gjeb2cn4XIDAXABn-----END PUBLIC KEY-----n\",\n          \"PrivateKey\": \"-----BEGIN RSA PRIVATE KEY-----nMIIEowIBAAKxAXEAvMCOIWadvuIZRrbzGa3zxpB4565uzBAPh/kg5mdT6k8YSGJdno6XsaVSBYwkrwj8cyUpfBBWzeNCz23iyxY1IZPus7+dWcdAGg3yA4DsSW94pYhT5niI+xBk8YwVjdg4sC9AithLDsKz2EPDGTDL5lLOXMLxeDJGTGeF0eKNx1JD6Sl9RtnFhu3awZ1HmuH1036hgByElj98Co3y7DkrG2NV7NB7z6Wac+nylVDdam6UvmzIraTnN5/c33TCdTYWXXCzJYl7mVm6cxD+Xs/YeyM4rM1PaKMXD+XpHa/X/gm3tKHRJXKCnFukYx8Vpxr3Z+/7pkX5NSbtDG6ihZ0gjeb2c4XIDAXABAoIBAHBKqgPq9ZvTDTCJntNSpLWcLGjLTDm1ufJ7rMoyAGmdCCPM/OfAZwqYjNRqDITpdq7WA/kgC1RPiLa46n/zgSFmilZbwPx9jL5qXg1NcRrZlj8XC987ovqiRTuCmGwbn5YJdn9jsDumz7GwlongNBLEXwE287EUSu8nGqNE11B0prtbH++RSvDBbTwrYNXq13ypUdR2Ku/qvhkz1GbnrYraOvNbBWj4z9hAZFPpu4al45HGJDHigf/x/CBwze3OnpO6+LJuGJYaCBpLwfsknGyiWCH1dI/GSTvTrvbgYt2TCUaii/vHSyIjFNsKBN35AhpdmVTXnwXoHVxD8/5OMn/0YrwIUCgYEA7qBjvqX7S6H9AdiraOFjk0Ce9SXUE82SXUEWVoZj23KASLNzPvWVn8ALGFRXUaapU/XdsDzJPvrf1wnA5+dEvRb7u4N1Wf7KeZhsIcCX30vSoqIb1JfeqnPcfMTKBcstDUXRYaLB4/mRGoic2ka7m3dXYxXIEz6N0DgERdiMLWmcsCgYEAyn6WntkVv3vV+EmDn87GH+MDLLiKWbYaqsOgfZYw9Cr3xA3afsT42XY4Dzy9pxsT1K0c/nYW9VYhpAxahBva3XH94L62i0z5s55VzkpM6hwTaZbOSXzatMn/vpoHIE4cgwV/x1nghCM+r1X2C0aAMJLyObnH8YCM25iuxWwVtdRfoMCgYA2vm8DnnPH/yqnEMkKL6MDndjDBduM3g9LIy6DPStd/0b3ib+DBkd/LByfgUHjBoXUMfSg6OEWZMGTeLZbvW/EnnZA0zYzPj6dty+0KtT9iR+fTzbLqy8iWJNNwGvEdn8oavX93PP0VB3Y43xwiwehO/nciM8dCevhXy3IXf/1wsajwKBgBkAoGNJF5MUBMkIJhu04/EW/P9pTeGgKxtEzfufn4TmeUk/3Kaic4eGTU20VkZ31W8BIP88sDALc8vp02AkvmO8WX6pld03bAL8NRT4EnNXzB3RfX8d13NTLby/D/oxKtwSpcBbZVjNK45W6LwxYs52aa/Ba0XDlRe+dVujw+nwdU5AoGBAMGijxLdcHRhVKOdV7ptNYWal9PrpjvEvykulIa6zCwHmtECZuRGaZ79nz32Pl9zEVdfmesYMYwN1j88uybPN5hlbyIOimfcYbBXF8XXwHyMSHdukedjZy9kxndCF0sexyRWy2ir6XBX4vPPYS0U8MYej/ImChgVSGHG1jHL+eBHP0n-----END RSA PRIVATE KEY-----n\"\n        },\n        \"certificateId\": \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n      }\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\nls -l | grep ${IOT_CERT_NAME}\n```\n\n```text:\u7d50\u679c(\u4f8b)\n      -rw-------  1 lab  staff   1224 11 15 16:27 handson-20161115.cert\n      -rw-------  1 lab  staff   1675 11 15 16:27 handson-20161115.pem\n      -rw-------  1 lab  staff    451 11 15 16:27 handson-20161115.pub\n```\n\n\n2.3. \u30c7\u30d0\u30a4\u30b9\u8a3c\u660e\u66f8ID\u306e\u53d6\u5f97\n---------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nIOT_CERT_ID=$( \\\n        aws iot list-certificates \\\n          --query \"certificates[?creationDate > \\`${TIME_CURRENT}\\`].certificateId\" \\\n          --output text \\\n) \\\n        && echo ${IOT_CERT_ID}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n```\n\n\n3. \u4e8b\u5f8c\u4f5c\u696d\n===========\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iot describe-certificate \\\n        --certificate-id ${IOT_CERT_ID}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"certificateDescription\": {\n          \"certificateArn\": \"arn:aws:iot:ap-northeast-1:XXXXXXXXXXXX:cert/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n          \"status\": \"ACTIVE\",\n          \"certificateId\": \"80a17bb1186611bbb862e975b2d320171fac1ef73c669f6293e14f63e2c6965d\",\n          \"lastModifiedDate\": 1234567890.123,\n          \"certificatePem\": \"-----BEGIN CERTIFICATE-----nMIIDWTCCAxGgAwIBAxIUY8xfeGP/fpZbXmn2mRa36jWYmccwDXYJKoZIhvcNAXELnBXAwTTFLMEkGA1UECwxCXW1hem9uIFdlYiBTZXJ2aWNlcyBPPUFtYXpvbi5jb20gnSW5jLiBMPVNlYXR0bGUgU1X9V2FzaGluZ3RvbiBDPVVTMB4XDTE1MTAyODE0MzAwnOFoXDTX5MTIzMTIzNTk1OVowHjEcMBoGA1UEAwwTXVdTIElvVCBDZXJ0aWZpY2F0nZTCCASIwDXYJKoZIhvcNAXEBBXADggEPADCCAXoCggEBALzAjiFmnb7iGUa28xmtn88aXeOeubswXD4f5IOZnU+pPGEhiXaOkLGlUgWMJK8I/HMlKXwXVs3jXs9t4ssWNnSGT7rO/nVnHXBoN8gOA7ElveKWIU+YiPsXZPGMFY3YOLAvXIrYSw7Cs9hDwxkwy+nZSzkDC8XgyRkxnhdHijcdSX+kpfUbRYbt2sGdR5rh9dN+oYAchJY/fAqN8uw5KxtnjVezXe8+lmnPp8pVX3WpulL5syK2kzef3N90wnU2Fl0AsyWJe5lZunMX/l7P2HsjnOKzNT2ijEA/l6R2v0P4Jt7Sh0SUCghbpGMfFaca92fv+6ZF+TUm7XxuooWdII3m9nnOECAwEAAaNgMF4wHwYDVR0jBBgwFoAUflYWhwUohrr/9kXFX5SCO48he2MwHXYDnVR0OBBYEFPzCg7YGfwPe6eiqJFg3/86ZqpPOMAwGA1UdEwEB/wXCMAAwDgYDVR0PnAXH/BAXDAgeAMA0GCSqGSIb3DXEBCwUAA4IBAXBZaXOa5tR3yokq16yUIMLN7D3InWqP8Y1g6ge0dK1st76+LXWwkDd/F9T4jXWlAWF4e2+Xm8mDYwtP4Pcq+KwRwMr/bnbCXc/4xm86G1dDZbHfdYYLG/9TntV98NPAmtzl85olnmxA79jv5iXNFet7luxGKYn4hd3ypd1R93CwJvEWDIY33eLpXdaFMJdG2PiH/Z3/XXr4HueUR1KFAp2adbOfgbUnnAFVkVEXgcRyDqvnyTtmMOkYjfcerINXkva5z6y1+/1ENXyePT4v8712xWP+AgNknSmm79RMGHCzPED5lN3EuhJJyJf6yZVSfjx0+hF70alOcZiBPND0NYMIO/Xxxn-----END CERTIFICATE-----n\",\n          \"ownedBy\": \"XXXXXXXXXXXX\",\n          \"creationDate\": 1234567890.012\n        }\n      }\n```\n\n\n\u5b8c\u4e86\n====\n", "tags": ["AWS", "aws-cli", "IoT"]}