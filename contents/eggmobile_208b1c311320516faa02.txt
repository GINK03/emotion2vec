{"tags": ["CoreData", "iOS", "Objective-C"], "context": " More than 1 year has passed since last update.CoreData\u306b1\u4e07\u4ef6\u304f\u3089\u3044\u306e\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\u3001UISearchBar\u306a\u3069\u3067\u90e8\u5206\u4e00\u81f4\u3067\u4e00\u6587\u5b57\u76ee\u304b\u3089\u691c\u7d22\u3057\u305f\u308a\u3059\u308b\u3068\u3001\u6975\u7aef\u306b\u9045\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u3046\u3044\u3063\u305f\u5834\u5408\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u30cf\u30c3\u30af\u3067\u52d5\u304d\u3092\u8efd\u304f\u3057\u307e\u3057\u3087\u3046\u3002\n\u540d\u524d\u3068\u4f4f\u6240\u306e\u5165\u3063\u305f\u30c7\u30fc\u30bf\u3060\u3068\u3057\u3066\u3001\u3053\u308c\u304c1\u4e07\u4ef6\u3050\u3089\u3044\u65e2\u306b\u5165\u3063\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nfirstLetter\u306b\u306f\u3001Person\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u691c\u7d22\u5bfe\u8c61\u306eattribute\u306e\u3001\u982d\u6587\u5b57\u3092\u5165\u308c\u307e\u3059\u3002\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u308450\u97f3\u306a\u3069\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3042\u3068\u306fNSPredicate\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u5834\u5408\u5206\u3051\u3092\u3059\u308c\u3070\u826f\u3044\u3067\u3059\u3002\nUISearchBarController\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u5834\u5408\u3060\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u66f8\u3051\u3070\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n- (void)filterContentForSearchText:(NSString*)searchText\n                             scope:(NSString*)scope\n{\n    NSString *query = self.searchDisplayController.searchBar.text;\n\n    NSPredicate *namePred;      // \u540d\u524d\u7528\u306ePredicate\n\n    if([query length] == 0) {\n        return;\n    }else if ([query length] == 1) {    // \u691c\u7d22\u7a93\u306b\u4e00\u6587\u5b57\u3057\u304b\u5165\u529b\u3055\u308c\u306a\u304b\u3063\u305f\u3068\u304d\u306f\u3001firstLetter\u304b\u3089\u63a2\u3059\n        namePred = [NSPredicate predicateWithFormat:@\"firstLetter.firstLetter contains[cd] %@\", query];\n    }else{  // \u4e8c\u6587\u5b57\u4ee5\u4e0a\u306e\u5834\u5408\u306f\u90e8\u5206\u691c\u7d22\n        namePred = [NSPredicate predicateWithFormat:@\"name contains[cd] %@\", query];\n    }\n\n    if (query && query.length) {\n        [self.fetchedResultsController.fetchRequest setPredicate:namePred];\n        [NSFetchedResultsController deleteCacheWithName:@\"Person\"];\n\n        NSError *error = nil;\n        if (![self.fetchedResultsController performFetch:&error]) {\n            // Handle error\n            NSLog(@\"Unresolved error %@, %@\", error, [error userInfo]);\n            exit(-1);  // Fail\n        }\n    }\n}\n\nCoreData\u306b1\u4e07\u4ef6\u304f\u3089\u3044\u306e\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\u3001UISearchBar\u306a\u3069\u3067\u90e8\u5206\u4e00\u81f4\u3067\u4e00\u6587\u5b57\u76ee\u304b\u3089\u691c\u7d22\u3057\u305f\u308a\u3059\u308b\u3068\u3001\u6975\u7aef\u306b\u9045\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u3046\u3044\u3063\u305f\u5834\u5408\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u30cf\u30c3\u30af\u3067\u52d5\u304d\u3092\u8efd\u304f\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u540d\u524d\u3068\u4f4f\u6240\u306e\u5165\u3063\u305f\u30c7\u30fc\u30bf\u3060\u3068\u3057\u3066\u3001\u3053\u308c\u304c1\u4e07\u4ef6\u3050\u3089\u3044\u65e2\u306b\u5165\u3063\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2013-09-06 17.08.51.png](https://qiita-image-store.s3.amazonaws.com/0/6688/5172b8af-6d65-8a5b-843a-584c474161bc.png)\n\n\u3053\u308c\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2013-09-06 17.10.36.png](https://qiita-image-store.s3.amazonaws.com/0/6688/ce754ce1-6712-5c4b-0a8c-c264b0e7fa44.png)\nfirstLetter\u306b\u306f\u3001Person\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u691c\u7d22\u5bfe\u8c61\u306eattribute\u306e\u3001\u982d\u6587\u5b57\u3092\u5165\u308c\u307e\u3059\u3002\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u308450\u97f3\u306a\u3069\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3042\u3068\u306fNSPredicate\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u5834\u5408\u5206\u3051\u3092\u3059\u308c\u3070\u826f\u3044\u3067\u3059\u3002\nUISearchBarController\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u5834\u5408\u3060\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u66f8\u3051\u3070\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n```objc\n- (void)filterContentForSearchText:(NSString*)searchText\n\t\t\t\t\t\t\t scope:(NSString*)scope\n{\n\tNSString *query = self.searchDisplayController.searchBar.text;\n\t\n\tNSPredicate *namePred;\t\t// \u540d\u524d\u7528\u306ePredicate\n\t\t\n\tif([query length] == 0) {\n\t\treturn;\n\t}else if ([query length] == 1) {\t// \u691c\u7d22\u7a93\u306b\u4e00\u6587\u5b57\u3057\u304b\u5165\u529b\u3055\u308c\u306a\u304b\u3063\u305f\u3068\u304d\u306f\u3001firstLetter\u304b\u3089\u63a2\u3059\n\t\tnamePred = [NSPredicate predicateWithFormat:@\"firstLetter.firstLetter contains[cd] %@\", query];\n\t}else{\t// \u4e8c\u6587\u5b57\u4ee5\u4e0a\u306e\u5834\u5408\u306f\u90e8\u5206\u691c\u7d22\n\t\tnamePred = [NSPredicate predicateWithFormat:@\"name contains[cd] %@\", query];\n\t}\n\t\n    if (query && query.length) {\n        [self.fetchedResultsController.fetchRequest setPredicate:namePred];\n\t\t[NSFetchedResultsController deleteCacheWithName:@\"Person\"];\n\t\t\n\t\tNSError *error = nil;\n\t\tif (![self.fetchedResultsController performFetch:&error]) {\n\t\t\t// Handle error\n\t\t\tNSLog(@\"Unresolved error %@, %@\", error, [error userInfo]);\n\t\t\texit(-1);  // Fail\n\t\t}\n\t}\n}\n```"}