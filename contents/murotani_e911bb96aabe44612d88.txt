{"context": "\n\n\u6982\u8981\nXbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f7f\u3063\u3066mindstorm-EV3\u306e\u30e2\u30fc\u30bf\u30fc\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\nEV3\u3067\u52d5\u304fLinux\u74b0\u5883ev3dev\u3092\u4f7f\u3063\u3066\u958b\u767a\u3057\u307e\u3059\u3002\n\u524d\u7bc7\u306f\u3053\u3061\u3089\u3067\u3059\n\nXbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068mindstorm-EV3\u3067\u30e9\u30b8\u30b3\u30f3\u3092\u4f5c\u308b\u3010\u524d\u7de8\u3011\n\n\u5f8c\u7de8\u3067\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\n\nindex.html\ncontroller.js\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\n\nindex.html\n<html lang=\"ja\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>XboxEv3Tank</title>\n  </head>\n\n  <body>\n    <h2>XboxEv3Tank</h2>\n    <pre id=\"controller\"></pre>\n  </body>\n<script src=\"./controller.js\"></script>\n</html>\n\n\n\ncontroller.js\n\u30d6\u30e9\u30a6\u30b6(Javascript)\u3067Xbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u5165\u529b\u3092\u53d6\u5f97\u3057\u3066\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\ncontroller.js\n(function(){\n    if(!(window.Gamepad)) return;\n    if(!(navigator.getGamepads)) return;\n    var element = document.getElementById(\"controller\");\n    var lastCommand = {direction:0,launch:0};\n\n    setInterval(function(){\n        var str = \"\";\n        var command = {direction:0,launch:0};\n        // direction:0 => \u505c\u6b62\n        // direction:1 => \u524d\u9032\n        // direction:2 => \u53f3\u65cb\u56de\n        // direction:3 => \u5de6\u65cb\u56de\n\n        var gamepad_list = navigator.getGamepads();\n\n        for(var i = 0; i < gamepad_list.length; i++){\n\n            var gamepad = gamepad_list[i];\n            if(!gamepad) continue;\n            str += \"connected: \" + gamepad.connected + \"\\n\";\n            var buttons = gamepad.buttons;\n            str += \"buttons: {\\n\";\n\n            for(var j = 0; j < buttons.length; j++){\n                str += \"  \\\"\" + j + \"\\\": { \";\n                str += \"pressed:\" + buttons[j].pressed + \"}\\n\";\n            }\n            str += \"}\\n\";\n\n            if(buttons[6].pressed == true && buttons[7].pressed == true){\n                command.direction=1\n            }else if(buttons[6].pressed == false && buttons[7].pressed == true){\n                command.direction=2\n            }else if(buttons[6].pressed == true && buttons[7].pressed == false){\n                command.direction=3\n            }else{\n                command.direction=0\n            }\n\n            if(buttons[1].pressed == true){\n                command.launch=1;\n            }else{\n                command.launch=0;\n            }\n\n        }\n        element.textContent = str;\n\n        if(JSON.stringify(command) != JSON.stringify(lastCommand)){\n                window.location.href = 'http://ev3dev.local:3000/'+command.direction + command.launch;\n        }\n\n        lastCommand=command;\n\n    },50);\n})();\n\n\ncontroller.js\u3067\u306fGamepad API\u3092\u4f7f\u3063\u3066Xbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u5165\u529b\u3092\u53d6\u5f97\u3057\u3066\u3001\u5165\u529b\u72b6\u614b\u60c5\u5831\u3092\u8f09\u305b\u305furl\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d0\u30fc\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\ncontroller.js\nwindow.location.href = 'http://ev3dev.local:3000/'+command.direction + command.launch;\n\n\n\ncommand.direction,command.launch\u306b\u306f\u305d\u308c\u305e\u308c\u6570\u5024\u304c\u5165\u308a\u3001\ncommand.direcrion\u306b\u306f\u30ed\u30dc\u30c3\u30c8\u306e\u9032\u884c\u65b9\u5411\uff080 => \u505c\u6b62\u30011 => \u524d\u9032\u30012 => \u53f3\u65cb\u56de\u30013 => \u5de6\u65cb\u56de\uff09\u3001command.launch\u306b\u306f\u30dc\u30fc\u30eb\u306e\u767a\u5c04\u547d\u4ee4(0 => \u4f55\u3082\u3057\u306a\u3044\u30011 => \u767a\u5c04)\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u5074\n\napp.js\nev3dev\u4e0a\u3067Web\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u3066index.html\u3068controller.js\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066\u3044\u307e\u3059\u3002\nmotorControl\u95a2\u6570\u3067\u30b5\u30fc\u30d0\u30fc\u306b\u6765\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u6587\u5b57\u5217\u306b\u3088\u3063\u3066\u30e2\u30fc\u30bf\u30fc\u306e\u5236\u5fa1\u3092\u5207\u308a\u66ff\u3048\u3066\u3044\u307e\u3059\n\napp.js\nvar http = require('http');\nvar server = http.createServer();\nvar fs = require('fs');\nvar settings = require('./settings');\nvar motorControlCommands = require('./motorControl');\n\nmotorControlCommands.setForward(500);\n\nserver.on('request', function(req, res) {\n  var url = req.url;\n  console.log(url);\n  motorControl(url);\n  if ('/' == url) {\n    fs.readFile(__dirname + '/index.html', 'UTF-8', function (err, data) {\n      res.writeHead(200, {'Content-Type': 'text/html'});\n      res.write(data);\n      res.end();\n    });\n  } else if ('/controller.js' == url) {\n    fs.readFile(__dirname + '/controller.js', 'UTF-8', function (err, data) {\n      res.writeHead(200, {'Content-Type': 'text/plain'});\n      res.write(data);\n      res.end();\n    });\n  }\n})\n\nfunction motorControl(url){\n  motorControlId = url.slice(1,2);\n  launchId = url.slice(2,3);\n  if(launchId == 1) motorControlCommands.launch();\n\n  if(motorControlId == 1){\n    motorControlCommands.setForward(500);\n    motorControlCommands.run();\n  }else if(motorControlId == 0){\n    motorControlCommands.stop();\n  } else if(motorControlId == 1){\n    motorControlCommands.setForward(500);\n    motorControlCommands.run();\n  } else if(motorControlId == 2){\n    motorControlCommands.setRight(250);\n    motorControlCommands.run();\n  }else if(motorControlId == 3){\n    motorControlCommands.setLeft(250);\n    motorControlCommands.run();\n  }\n}\n\nconsole.log(settings);\nserver.listen(settings.port,settings.host)\n\n\n\nsettings.js\nsettings.js\u306b\u306fWeb\u30b5\u30fc\u30d0\u30fc\u306eIp\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\nsettings.js\nvar os = require('os');\nvar ifaces = os.networkInterfaces();\n\nexports.port = 3000;\nexports.host = ifaces.wlan0[0].address;\n\n\n\nmotorsetting.js\nmotorsetting.js\u306b\u306f\u63a5\u7d9a\u3055\u308c\u305f\u30e2\u30fc\u30bf\u30fc\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306f\u30ed\u30dc\u30c3\u30c8\u304c\u518d\u8d77\u52d5\u3055\u305b\u308b\u5ea6\u306b\u5909\u308f\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067Web\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\u524d\u306b\u6b63\u3057\u304f\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u5316\u3057\u305f\u306e\u304cmotorSetup.sh\u3067\u3059\u3002\n\nmotorSetting.js\nexports.outA = '/sys/class/tacho-motor/motor0';\nexports.outC = '/sys/class/tacho-motor/motor1';\nexports.outB = '/sys/class/tacho-motor/motor2';\n\n\n\nmotorSetup.sh\n\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067motorsetting.js\u306e\u8a2d\u5b9a\u3092\u66f4\u65b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nmotorSetup.sh\n#!/bin/sh\ncat /dev/null > motorSetting.js\nfor f in /sys/class/tacho-motor/*;\ndo\n  echo exports.`cat $f/address` = \\'$f\\'\\; >> motorSetting.js;\ndone\n\n\n\nmotorControl.js\n\u30e2\u30fc\u30bf\u30fc\u3092\u5236\u5fa1\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n\nmindstorm-EV3 ev3dev\u3067\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u30e2\u30fc\u30bf\u30fc\u5236\u5fa1\u3001\u30bb\u30f3\u30b5\u30fc\u5024\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u307e\u3068\u3081 \n\n\nmotorControl.js\nvar fs = require('fs');\nvar motorSetting = require('./motorSetting');\n\n//\u30e2\u30fc\u30bf\u30fc\u56de\u8ee2\u65b9\u5411\u3092\u524d\u9032\u306b\u30bb\u30c3\u30c8\nexports.setForward = function(speed){\n  fs.writeFileSync(motorSetting.outA + '/speed_sp',speed);\n  fs.writeFileSync(motorSetting.outB + '/speed_sp',speed);\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u56de\u8ee2\u65b9\u5411\u3092\u53f3\u65cb\u56de\u306b\u30bb\u30c3\u30c8\nexports.setRight = function(speed){\n  fs.writeFileSync(motorSetting.outA + '/speed_sp',speed);\n  fs.writeFileSync(motorSetting.outB + '/speed_sp',-speed);\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u56de\u8ee2\u65b9\u5411\u3092\u5de6\u65cb\u56de\u306b\u30bb\u30c3\u30c8\nexports.setLeft = function(speed){\n  fs.writeFileSync(motorSetting.outA + '/speed_sp',-speed);\n  fs.writeFileSync(motorSetting.outB + '/speed_sp',speed);\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u3092\u56de\u8ee2\u3055\u305b\u308b\nexports.run = function(){\n  fs.writeFileSync(motorSetting.outA + '/command','run-forever');\n  fs.writeFileSync(motorSetting.outB + '/command','run-forever');\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u3092\u505c\u6b62\u3055\u305b\u308b\nexports.stop = function(){\n  fs.writeFileSync(motorSetting.outA + '/command','stop');\n  fs.writeFileSync(motorSetting.outB + '/command','stop');\n}\n\n//\u30dc\u30fc\u30eb\u3092\u767a\u5c04\u3055\u305b\u308b\nexports.launch = function(){\n  fs.writeFileSync(motorSetting.outC + '/speed_sp',500);\n  fs.writeFileSync(motorSetting.outC + '/position_sp',1080);\n  fs.writeFileSync(motorSetting.outC + '/command','run-to-rel-pos');\n}\n\n\n## \u6982\u8981\nXbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f7f\u3063\u3066mindstorm-EV3\u306e\u30e2\u30fc\u30bf\u30fc\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\nEV3\u3067\u52d5\u304fLinux\u74b0\u5883ev3dev\u3092\u4f7f\u3063\u3066\u958b\u767a\u3057\u307e\u3059\u3002\n\n\u524d\u7bc7\u306f\u3053\u3061\u3089\u3067\u3059\n>\n[Xbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068mindstorm-EV3\u3067\u30e9\u30b8\u30b3\u30f3\u3092\u4f5c\u308b\u3010\u524d\u7de8\u3011](http://qiita.com/murotani/items/b1b14d4399cf182a7bde)\n\n\u5f8c\u7de8\u3067\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\n####index.html\ncontroller.js\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\n\n```html:index.html\n<html lang=\"ja\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>XboxEv3Tank</title>\n  </head>\n\n  <body>\n    <h2>XboxEv3Tank</h2>\n    <pre id=\"controller\"></pre>\n  </body>\n<script src=\"./controller.js\"></script>\n</html>\n```\n####controller.js\n\u30d6\u30e9\u30a6\u30b6(Javascript)\u3067Xbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u5165\u529b\u3092\u53d6\u5f97\u3057\u3066\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\n\n```js:controller.js\n(function(){\n\tif(!(window.Gamepad)) return;\n\tif(!(navigator.getGamepads)) return;\n\tvar element = document.getElementById(\"controller\");\n\tvar lastCommand = {direction:0,launch:0};\n\n\tsetInterval(function(){\n\t\tvar str = \"\";\n\t\tvar command = {direction:0,launch:0};\n\t\t// direction:0 => \u505c\u6b62\n\t\t// direction:1 => \u524d\u9032\n\t\t// direction:2 => \u53f3\u65cb\u56de\n\t\t// direction:3 => \u5de6\u65cb\u56de\n\n\t\tvar gamepad_list = navigator.getGamepads();\n\n\t\tfor(var i = 0; i < gamepad_list.length; i++){\n\n\t\t\tvar gamepad = gamepad_list[i];\n\t\t\tif(!gamepad) continue;\n\t\t\tstr += \"connected: \" + gamepad.connected + \"\\n\";\n\t\t\tvar buttons = gamepad.buttons;\n\t\t\tstr += \"buttons: {\\n\";\n\n\t\t\tfor(var j = 0; j < buttons.length; j++){\n\t\t\t\tstr += \"  \\\"\" + j + \"\\\": { \";\n\t\t\t\tstr += \"pressed:\" + buttons[j].pressed + \"}\\n\";\n\t\t\t}\n\t\t\tstr += \"}\\n\";\n\n\t\t\tif(buttons[6].pressed == true && buttons[7].pressed == true){\n\t\t\t\tcommand.direction=1\n\t\t\t}else if(buttons[6].pressed == false && buttons[7].pressed == true){\n\t\t\t\tcommand.direction=2\n\t\t\t}else if(buttons[6].pressed == true && buttons[7].pressed == false){\n\t\t\t\tcommand.direction=3\n\t\t\t}else{\n\t\t\t\tcommand.direction=0\n\t\t\t}\n\n\t\t\tif(buttons[1].pressed == true){\n\t\t\t\tcommand.launch=1;\n\t\t\t}else{\n\t\t\t\tcommand.launch=0;\n\t\t\t}\n\n\t\t}\n\t\telement.textContent = str;\n\n\t\tif(JSON.stringify(command) != JSON.stringify(lastCommand)){\n\t\t\t\twindow.location.href = 'http://ev3dev.local:3000/'+command.direction + command.launch;\n\t\t}\n\n\t\tlastCommand=command;\n\n\t},50);\n})();\n```\n\ncontroller.js\u3067\u306fGamepad API\u3092\u4f7f\u3063\u3066Xbox360\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u5165\u529b\u3092\u53d6\u5f97\u3057\u3066\u3001\u5165\u529b\u72b6\u614b\u60c5\u5831\u3092\u8f09\u305b\u305furl\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d0\u30fc\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:controller.js\nwindow.location.href = 'http://ev3dev.local:3000/'+command.direction + command.launch;\n\n```\ncommand.direction,command.launch\u306b\u306f\u305d\u308c\u305e\u308c\u6570\u5024\u304c\u5165\u308a\u3001\ncommand.direcrion\u306b\u306f\u30ed\u30dc\u30c3\u30c8\u306e\u9032\u884c\u65b9\u5411\uff080 => \u505c\u6b62\u30011 => \u524d\u9032\u30012 => \u53f3\u65cb\u56de\u30013 => \u5de6\u65cb\u56de\uff09\u3001command.launch\u306b\u306f\u30dc\u30fc\u30eb\u306e\u767a\u5c04\u547d\u4ee4(0 => \u4f55\u3082\u3057\u306a\u3044\u30011 => \u767a\u5c04)\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\n\n##\u30b5\u30fc\u30d0\u30fc\u5074\n#### app.js\nev3dev\u4e0a\u3067Web\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u3066index.html\u3068controller.js\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066\u3044\u307e\u3059\u3002\nmotorControl\u95a2\u6570\u3067\u30b5\u30fc\u30d0\u30fc\u306b\u6765\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u6587\u5b57\u5217\u306b\u3088\u3063\u3066\u30e2\u30fc\u30bf\u30fc\u306e\u5236\u5fa1\u3092\u5207\u308a\u66ff\u3048\u3066\u3044\u307e\u3059\n\n```js:app.js\nvar http = require('http');\nvar server = http.createServer();\nvar fs = require('fs');\nvar settings = require('./settings');\nvar motorControlCommands = require('./motorControl');\n\nmotorControlCommands.setForward(500);\n\nserver.on('request', function(req, res) {\n  var url = req.url;\n  console.log(url);\n  motorControl(url);\n  if ('/' == url) {\n    fs.readFile(__dirname + '/index.html', 'UTF-8', function (err, data) {\n      res.writeHead(200, {'Content-Type': 'text/html'});\n      res.write(data);\n      res.end();\n    });\n  } else if ('/controller.js' == url) {\n    fs.readFile(__dirname + '/controller.js', 'UTF-8', function (err, data) {\n      res.writeHead(200, {'Content-Type': 'text/plain'});\n      res.write(data);\n      res.end();\n    });\n  }\n})\n\nfunction motorControl(url){\n  motorControlId = url.slice(1,2);\n  launchId = url.slice(2,3);\n  if(launchId == 1) motorControlCommands.launch();\n\n  if(motorControlId == 1){\n    motorControlCommands.setForward(500);\n    motorControlCommands.run();\n  }else if(motorControlId == 0){\n    motorControlCommands.stop();\n  } else if(motorControlId == 1){\n    motorControlCommands.setForward(500);\n    motorControlCommands.run();\n  } else if(motorControlId == 2){\n    motorControlCommands.setRight(250);\n    motorControlCommands.run();\n  }else if(motorControlId == 3){\n    motorControlCommands.setLeft(250);\n    motorControlCommands.run();\n  }\n}\n\nconsole.log(settings);\nserver.listen(settings.port,settings.host)\n```\n#### settings.js\nsettings.js\u306b\u306fWeb\u30b5\u30fc\u30d0\u30fc\u306eIp\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:settings.js\nvar os = require('os');\nvar ifaces = os.networkInterfaces();\n\nexports.port = 3000;\nexports.host = ifaces.wlan0[0].address;\n```\n#### motorsetting.js\nmotorsetting.js\u306b\u306f\u63a5\u7d9a\u3055\u308c\u305f\u30e2\u30fc\u30bf\u30fc\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306f\u30ed\u30dc\u30c3\u30c8\u304c\u518d\u8d77\u52d5\u3055\u305b\u308b\u5ea6\u306b\u5909\u308f\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067Web\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\u524d\u306b\u6b63\u3057\u304f\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u5316\u3057\u305f\u306e\u304cmotorSetup.sh\u3067\u3059\u3002\n\n```js:motorSetting.js\nexports.outA = '/sys/class/tacho-motor/motor0';\nexports.outC = '/sys/class/tacho-motor/motor1';\nexports.outB = '/sys/class/tacho-motor/motor2';\n```\n#### motorSetup.sh\n\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067motorsetting.js\u306e\u8a2d\u5b9a\u3092\u66f4\u65b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash:motorSetup.sh\n#!/bin/sh\ncat /dev/null > motorSetting.js\nfor f in /sys/class/tacho-motor/*;\ndo\n  echo exports.`cat $f/address` = \\'$f\\'\\; >> motorSetting.js;\ndone\n```\n#### motorControl.js\n\u30e2\u30fc\u30bf\u30fc\u3092\u5236\u5fa1\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n>\n[mindstorm-EV3 ev3dev\u3067\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u30e2\u30fc\u30bf\u30fc\u5236\u5fa1\u3001\u30bb\u30f3\u30b5\u30fc\u5024\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u307e\u3068\u3081](http://qiita.com/murotani/items/d4e8b21b84fe0b99d579) \n\n\n```js:motorControl.js\nvar fs = require('fs');\nvar motorSetting = require('./motorSetting');\n\n//\u30e2\u30fc\u30bf\u30fc\u56de\u8ee2\u65b9\u5411\u3092\u524d\u9032\u306b\u30bb\u30c3\u30c8\nexports.setForward = function(speed){\n  fs.writeFileSync(motorSetting.outA + '/speed_sp',speed);\n  fs.writeFileSync(motorSetting.outB + '/speed_sp',speed);\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u56de\u8ee2\u65b9\u5411\u3092\u53f3\u65cb\u56de\u306b\u30bb\u30c3\u30c8\nexports.setRight = function(speed){\n  fs.writeFileSync(motorSetting.outA + '/speed_sp',speed);\n  fs.writeFileSync(motorSetting.outB + '/speed_sp',-speed);\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u56de\u8ee2\u65b9\u5411\u3092\u5de6\u65cb\u56de\u306b\u30bb\u30c3\u30c8\nexports.setLeft = function(speed){\n  fs.writeFileSync(motorSetting.outA + '/speed_sp',-speed);\n  fs.writeFileSync(motorSetting.outB + '/speed_sp',speed);\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u3092\u56de\u8ee2\u3055\u305b\u308b\nexports.run = function(){\n  fs.writeFileSync(motorSetting.outA + '/command','run-forever');\n  fs.writeFileSync(motorSetting.outB + '/command','run-forever');\n}\n\n//\u30e2\u30fc\u30bf\u30fc\u3092\u505c\u6b62\u3055\u305b\u308b\nexports.stop = function(){\n  fs.writeFileSync(motorSetting.outA + '/command','stop');\n  fs.writeFileSync(motorSetting.outB + '/command','stop');\n}\n\n//\u30dc\u30fc\u30eb\u3092\u767a\u5c04\u3055\u305b\u308b\nexports.launch = function(){\n  fs.writeFileSync(motorSetting.outC + '/speed_sp',500);\n  fs.writeFileSync(motorSetting.outC + '/position_sp',1080);\n  fs.writeFileSync(motorSetting.outC + '/command','run-to-rel-pos');\n}\n```\n", "tags": ["EV3", "ev3dev", "XBOX360"]}