{"tags": ["R", "Python", "pandas"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u306f\u3058\u3081\u306b\nR\u306edplyr\u3068python\u306epandas\u3067, \u540c\u3058\u8868\u30c7\u30fc\u30bf\u3092\u540c\u3058\u3088\u3046\u306b\u51e6\u7406\u3057\u3066\u307f\u307e\u3059. \n\u3069\u3063\u3061\u304c\u901f\u3044\u3093\u3067\u3059\u304b\u306d? \u6c17\u306b\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u8abf\u3079\u3066\u307f\u307e\u3057\u305f. \n\n\u91ce\u7403\u30c7\u30fc\u30bf\u306e\u96c6\u8a08\n2013\u5e74\u30e1\u30b8\u30e3\u30fc\u30ea\u30fc\u30b0\u5168\u8a66\u5408\u6253\u5e2d\u7d50\u679c\u30c7\u30fc\u30bf(77MB, \u7d0419\u4e07\u884c)\u304b\u3089, \u5841\u6253\u6570\u30e9\u30f3\u30ad\u30f3\u30b0.csv\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059. \nR\u306edplyr\u3092\u4f7f\u3063\u3066\u66f8\u3044\u305f\u30b9\u30af\u30ea\u30d7\u30c8dplyr.R\u306f, \nlibrary(data.table)\nlibrary(dplyr)\n\n## \u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f\ndat = fread(\"all2013.csv\")\n\n## \u96c6\u8a08 \ndat %>% select(BAT_ID, H_FL) %>% \n group_by(BAT_ID) %>% \n summarise(BASE = sum(H_FL)) %>% \n arrange(desc(BASE)) %>% \n write.csv(\"hoge.csv\")\n\n\u3053\u3093\u306a\u611f\u3058. \n> time R -f dplyr.R\nR -f dplyr.R  3.13s user 0.15s system 99% cpu 3.294 total\n\npython\u306epandas\u3060\u3068, \n\n#!/usr/bin/python\n\nimport pandas as pd\n\ndf = pd.read_csv('all2013.csv')\n\ndf[[\"BAT_ID\", \"H_FL\"]].groupby(\"BAT_ID\").sum().sort(\"H_FL\", ascending=False).to_csv('hoge.csv')\n\n\u3053\u3093\u306a\u611f\u3058. \n> time ./pd.py                                                                          \n./pd.py  3.12s user 0.40s system 98% cpu 3.567 total\n\ndplyr\u3060\u30683.29\u79d2, pandas\u3060\u30683.56\u79d2. \ndplyr\u304c\u3061\u3087\u3063\u3068\u52dd\u3063\u3066\u3044\u307e\u3059.\n\n\u307e\u3068\u3081\n77MB\u306e\u30c7\u30fc\u30bf\u3060\u3068, \u3069\u3061\u3089\u304b\u304c\u7279\u5225\u901f\u3044\u308f\u3051\u3067\u306f\u306a\u3055\u305d\u3046\u3067\u3059.\n\u6163\u308c\u3066\u3044\u308b\u65b9\u3092\u4f7f\u3048\u3070OK\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u306d? \n\u4ee5\u4e0a\u3067\u3059. \n## \u306f\u3058\u3081\u306b\n\nR\u306edplyr\u3068python\u306epandas\u3067, \u540c\u3058\u8868\u30c7\u30fc\u30bf\u3092\u540c\u3058\u3088\u3046\u306b\u51e6\u7406\u3057\u3066\u307f\u307e\u3059. \n\n\u3069\u3063\u3061\u304c\u901f\u3044\u3093\u3067\u3059\u304b\u306d? \u6c17\u306b\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u8abf\u3079\u3066\u307f\u307e\u3057\u305f. \n\n## \u91ce\u7403\u30c7\u30fc\u30bf\u306e\u96c6\u8a08\n\n2013\u5e74\u30e1\u30b8\u30e3\u30fc\u30ea\u30fc\u30b0\u5168\u8a66\u5408\u6253\u5e2d\u7d50\u679c\u30c7\u30fc\u30bf(77MB, \u7d0419\u4e07\u884c)\u304b\u3089, \u5841\u6253\u6570\u30e9\u30f3\u30ad\u30f3\u30b0.csv\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059. \n\nR\u306edplyr\u3092\u4f7f\u3063\u3066\u66f8\u3044\u305f\u30b9\u30af\u30ea\u30d7\u30c8dplyr.R\u306f, \n\n```r\nlibrary(data.table)\nlibrary(dplyr)\n\n## \u30c7\u30fc\u30bf\u8aad\u307f\u8fbc\u307f\ndat = fread(\"all2013.csv\")\n\n## \u96c6\u8a08 \ndat %>% select(BAT_ID, H_FL) %>% \n group_by(BAT_ID) %>% \n summarise(BASE = sum(H_FL)) %>% \n arrange(desc(BASE)) %>% \n write.csv(\"hoge.csv\")\n```\n\n\u3053\u3093\u306a\u611f\u3058. \n\n```bash\n> time R -f dplyr.R\nR -f dplyr.R  3.13s user 0.15s system 99% cpu 3.294 total\n```\n\npython\u306epandas\u3060\u3068, \n\n```py\n\n#!/usr/bin/python\n\nimport pandas as pd\n\ndf = pd.read_csv('all2013.csv')\n\ndf[[\"BAT_ID\", \"H_FL\"]].groupby(\"BAT_ID\").sum().sort(\"H_FL\", ascending=False).to_csv('hoge.csv')\n```\n\n\u3053\u3093\u306a\u611f\u3058. \n\n```bash\n> time ./pd.py                                                                          \n./pd.py  3.12s user 0.40s system 98% cpu 3.567 total\n```\n\ndplyr\u3060\u30683.29\u79d2, pandas\u3060\u30683.56\u79d2. \n\ndplyr\u304c\u3061\u3087\u3063\u3068\u52dd\u3063\u3066\u3044\u307e\u3059.\n\n## \u307e\u3068\u3081\n\n77MB\u306e\u30c7\u30fc\u30bf\u3060\u3068, \u3069\u3061\u3089\u304b\u304c\u7279\u5225\u901f\u3044\u308f\u3051\u3067\u306f\u306a\u3055\u305d\u3046\u3067\u3059.\n\n\u6163\u308c\u3066\u3044\u308b\u65b9\u3092\u4f7f\u3048\u3070OK\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u306d? \n\n\u4ee5\u4e0a\u3067\u3059. \n"}