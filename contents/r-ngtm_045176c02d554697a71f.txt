{"tags": ["Unity", "unity5"], "context": " More than 1 year has passed since last update.\u30b7\u30fc\u30f3\u4e0a\u3067\u30b7\u30a7\u30fc\u30c0\u30fc(.shader)\u3092\u7de8\u96c6\u3057\u305f\u304f\u306a\u3063\u305f\u306e\u3067\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n\u6e96\u5099\n\u30c6\u30ad\u30b9\u30c8\u5165\u529b\u30dc\u30c3\u30af\u30b9\u3092\u4f5c\u308a\u307e\u3059\u3002\nHierarchy -> Create -> UI -> Input Field \n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\nInput Field \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\u3053\u308c\u306b\u4ee5\u4e0b\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n\nShaderEdit.cs\nusing UnityEngine;\nusing UnityEditor;\nusing System.Collections;\nusing System.IO;\n\n[RequireComponent(typeof(UnityEngine.UI.InputField))]\npublic class ShaderEdit : MonoBehaviour {\n\n    string shaderCode;\n    public Shader shader = null;\n    UnityEngine.UI.InputField inputField;\n\n    void Start ()\n    {\n        inputField = this.GetComponent<UnityEngine.UI.InputField>();\n\n        string path = AssetDatabase.GetAssetPath(shader);\n        StreamReader sr = new StreamReader(path);\n        shaderCode = sr.ReadToEnd();\n\n        inputField.lineType = UnityEngine.UI.InputField.LineType.MultiLineNewline;\n\n        inputField.text = shaderCode;\n        inputField.characterLimit = int.MaxValue - 1;\n\n        inputField.onValueChange.AddListener((s) => {\n            OnValueChange();\n        });\n\n        inputField.onEndEdit.AddListener((s) => {\n            OnEndEdit();\n            SaveShader();\n        });\n    }\n\n    public void OnValueChange()\n    {\n        if (inputField.isFocused)\n        {\n            shaderCode = inputField.text;\n        }\n    }\n    public void OnEndEdit()\n    {\n        inputField.text = shaderCode;\n    }\n\n    public void SaveShader()\n    {\n        string path = AssetDatabase.GetAssetPath(shader);\n        FileInfo fi = new FileInfo(path);\n        try\n        {\n            StreamWriter sw = fi.CreateText();\n            sw.WriteLine(shaderCode);\n            sw.Flush();\n            sw.Close();\n\n        }\n        catch (System.Exception e)\n        {\n        }\n        AssetDatabase.Refresh();\n    }\n}\n\n\n\n\n\u7de8\u96c6\u3057\u305f\u3044.shader\u30d5\u30a1\u30a4\u30eb\u3082\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n\n\n\u518d\u751f\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u5b8c\u6210\n\nInputField\u4e0a\u3067\u30b7\u30a7\u30fc\u30c0\u30fc\u3092\u7de8\u96c6\u3057\u3066ESC\u3092\u62bc\u3059\u3068.shader\u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\n\u30b7\u30fc\u30f3\u4e0a\u3067\u30b7\u30a7\u30fc\u30c0\u30fc(.shader)\u3092\u7de8\u96c6\u3057\u305f\u304f\u306a\u3063\u305f\u306e\u3067\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/44288/f919cd3f-8a9c-0b91-96c5-eda68755e1ea.png)\n\n#\u6e96\u5099\n\u30c6\u30ad\u30b9\u30c8\u5165\u529b\u30dc\u30c3\u30af\u30b9\u3092\u4f5c\u308a\u307e\u3059\u3002\nHierarchy -> Create -> UI -> Input Field \n![image](https://qiita-image-store.s3.amazonaws.com/0/44288/99b5cd39-88c1-20f0-fed1-1beeaffa63fd.png)\n\n#\u30b9\u30af\u30ea\u30d7\u30c8\nInput Field \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n![image](https://qiita-image-store.s3.amazonaws.com/0/44288/f1c52bfc-ed73-a9dc-5d6c-44daa5dd8993.png)\n\n\u3053\u308c\u306b\u4ee5\u4e0b\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n\n```ShaderEdit.cs\nusing UnityEngine;\nusing UnityEditor;\nusing System.Collections;\nusing System.IO;\n\n[RequireComponent(typeof(UnityEngine.UI.InputField))]\npublic class ShaderEdit : MonoBehaviour {\n\n    string shaderCode;\n    public Shader shader = null;\n    UnityEngine.UI.InputField inputField;\n\n\tvoid Start ()\n    {\n        inputField = this.GetComponent<UnityEngine.UI.InputField>();\n\n        string path = AssetDatabase.GetAssetPath(shader);\n        StreamReader sr = new StreamReader(path);\n        shaderCode = sr.ReadToEnd();\n\n        inputField.lineType = UnityEngine.UI.InputField.LineType.MultiLineNewline;\n\n        inputField.text = shaderCode;\n        inputField.characterLimit = int.MaxValue - 1;\n\n        inputField.onValueChange.AddListener((s) => {\n            OnValueChange();\n        });\n\n        inputField.onEndEdit.AddListener((s) => {\n            OnEndEdit();\n            SaveShader();\n        });\n    }\n\n    public void OnValueChange()\n    {\n        if (inputField.isFocused)\n        {\n            shaderCode = inputField.text;\n        }\n    }\n    public void OnEndEdit()\n    {\n        inputField.text = shaderCode;\n    }\n\n    public void SaveShader()\n    {\n        string path = AssetDatabase.GetAssetPath(shader);\n        FileInfo fi = new FileInfo(path);\n        try\n        {\n            StreamWriter sw = fi.CreateText();\n            sw.WriteLine(shaderCode);\n            sw.Flush();\n            sw.Close();\n\n        }\n        catch (System.Exception e)\n        {\n        }\n        AssetDatabase.Refresh();\n    }\n}\n\n```\n<br>\n\u7de8\u96c6\u3057\u305f\u3044.shader\u30d5\u30a1\u30a4\u30eb\u3082\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/44288/7f90d8c8-129f-c34c-07ba-4f5a92c0cd81.png)\n\n#\u518d\u751f\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u5b8c\u6210\n![image](https://qiita-image-store.s3.amazonaws.com/0/44288/f919cd3f-8a9c-0b91-96c5-eda68755e1ea.png)\nInputField\u4e0a\u3067\u30b7\u30a7\u30fc\u30c0\u30fc\u3092\u7de8\u96c6\u3057\u3066ESC\u3092\u62bc\u3059\u3068.shader\u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\n"}