{"context": "\n\n\u3044\u304d\u3055\u3064\n\u4eca\u4f4f\u3093\u3067\u308b\u30de\u30f3\u30b7\u30e7\u30f3\u306e\u30a8\u30a2\u30b3\u30f3\u306f\u30aa\u30d5\u30bf\u30a4\u30de\u30fc\u3068\u30aa\u30f3\u30bf\u30a4\u30de\u30fc\u3092\u540c\u6642\u306b\u8a2d\u5b9a\u3067\u304d\u306a\u304f\u3001\u591c\u30aa\u30d5\u30bf\u30a4\u30de\u30fc\u3092\u3064\u3051\u308b\u3068\u3001\u671d\u306f\u5bd2\u3044\u4e2d\u8d77\u304d\u3066\u3053\u306a\u304f\u3061\u3083\u3044\u3051\u306a\u3044\u3002\u53bb\u5e74\u8cb7\u3063\u305fRaspberry Pi\u304c\u4f7f\u308f\u308c\u305a\u306b\u8ee2\u304c\u3063\u3066\u305f\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066\u554f\u984c\u3092\u89e3\u6c7a\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\nRaspberry Pi\u3067\u30ea\u30e2\u30b3\u30f3\u8d64\u5916\u7dda\u3092\u9001\u53d7\u4fe1\u3059\u308b\u65b9\u6cd5\u306f\u3001\n\n\u8d64\u5916\u7ddaLED\u3068\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u81ea\u524d\u3067\u56de\u8def\u3092\u5b9f\u88c5\u3057\u3066GPIO\u3067\u901a\u4fe1\u3059\u308b\nUSB\u63a5\u7d9a\u306e\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u30ad\u30c3\u30c8\u3092\u8cb7\u3063\u3066\u304f\u308b\n\n\u306e\uff12\u901a\u308a\u304c\u8003\u3048\u3089\u308c\u308b\u3051\u3069\u3001\u534a\u7530\u3054\u3066\u304c\u898b\u5f53\u305f\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u30ad\u30c3\u30c8\u3092\u8cb7\u3063\u3066\u304f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\u30cd\u30c3\u30c8\u3067\u8abf\u3079\u308b\u3068USB\u63a5\u7d9a \u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u30ad\u30c3\u30c8(\u682a\u5f0f\u4f1a\u793e\u30d3\u30c3\u30c8\u30fb\u30c8\u30ec\u30fc\u30c9\u30fb\u30ef\u30f3)\u3001irMagician(\u5927\u5bae\u6280\u7814 \u5408\u540c\u4f1a\u793e)\u8fba\u308a\u304c\u3001Raspberry Pi\u3067\u306e\u5b9f\u7e3e\u304c\u3059\u3067\u306b\u3042\u308b\u3089\u3057\u3044\u3002irMagician\u306e\u65b9\u304c\u30e1\u30e2\u30ea\u5bb9\u91cf\u3082\u5927\u304d\u3044\u306e\u3067\u9577\u3044\u4fe1\u53f7\u306b\u5bfe\u5fdc\u3057\u3066\u305d\u3046\u306a\u4e0a\u3001\u30b5\u30a4\u30ba\u3082\u5c0f\u3055\u3044\u306e\u3067\u3001irMagician\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u305f\u3002\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089Raspberry Pi\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u30eb\u30fc\u30bf\u30fc\u306e\u30dd\u30fc\u30c8\u3092\u958b\u3051\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u9762\u5012\u306a\u306e\u3067\u3001\u4eca\u56de\u306fFirebase Realtime Database\u3092\u4f7f\u3063\u3066\u901a\u4fe1\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u3002\u307e\u305f\u3001\u81ea\u5206\u4ee5\u5916\u306e\u4eba\u306b\u30a8\u30a2\u30b3\u30f3\u3092\u64cd\u4f5c\u3055\u308c\u305f\u304f\u306a\u3044\u306e\u3067\u3001Firebase Authentication\u3092\u4f7f\u3063\u3066Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8a8d\u8a3c\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n\n\u8cfc\u5165\n\n\n\n\u54c1\u7269\n\u5024\u6bb5(\u5186)\n\n\n\n\nirMagician\n3,980\n\n\nRaspberry Pi 3\n5,800\n\n\nRaspberry Pi 3 \u30b1\u30fc\u30b9\n1,280\n\n\nAC\u30a2\u30c0\u30d7\u30bf 5V2.5A\n1,100\n\n\nUSB\u30b1\u30fc\u30d6\u30eb 1.5m\n120\n\n\n\u30de\u30a4\u30af\u30edSD\u30ab\u30fc\u30c916GB\n900\n\n\n\nirMagician\u306fIT\u30d7\u30e9\u30b6\u3067\u5b8c\u6210\u54c1\u3092\u8cfc\u5165\u3002(\u306f\u3093\u3060\u4ed8\u3051\u306b\u81ea\u4fe1\u304c\u3042\u308c\u30701,980\u5186\u306e\u30ad\u30c3\u30c8\u306e\u307b\u3046\u304c\u304a\u5f97\u3002)\u305d\u308c\u4ee5\u5916\u306f\u79cb\u6708\u96fb\u5b50\u3067\u8cfc\u5165\u3002Raspberry Pi 2 Model B\u3092\u3059\u3067\u306b\u6301\u3063\u3066\u308b\u3051\u3069\u3001Raspberry Pi 3\u306e\u65b9\u304cWi-Fi\u3068Bluetooth(\u4eca\u56de\u306f\u4f7f\u308f\u306a\u3044)\u3092\u5185\u8535\u3057\u3066\u308b\u3057\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u3068\u601d\u3044\u885d\u52d5\u8cb7\u3044\u3002\n\u3053\u308c\u4ee5\u5916\u306b\u3001\u30de\u30a4\u30af\u30edSD->SD\u30ab\u30fc\u30c9\u30a2\u30c0\u30d7\u30bf\u3001AC\u30a2\u30c0\u30d7\u30bf\u304b\u3089\u306e\u7d66\u96fb\u7528USB\u30b1\u30fc\u30d6\u30eb\u3001USB\u30ad\u30fc\u30dc\u30fc\u30c9\u3001HDMI\u30b1\u30fc\u30d6\u30eb\u3068\u30c7\u30a3\u30b9\u30d7\u30ec\u30fc(\u30c6\u30ec\u30d3\u3067\u53ef)\u304c\u5225\u9014\u5fc5\u8981\u3002\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nMac\u3067\u8d77\u52d5\u7528SD\u30ab\u30fc\u30c9\u306e\u4f5c\u6210\n\u516c\u5f0f\u30da\u30fc\u30b8\u304b\u3089\u6700\u65b0\u306eRASPBIAN JESSIE LITE\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\uff0812\u67084\u65e5\u73fe\u57282016-11-25\u7248\u30012016-11-25-raspbian-jessie-lite.zip\u304c\u6700\u65b0\uff09\n\u5ff5\u306e\u305f\u3081SHA-1 \u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8\u306b\u66f8\u3044\u3066\u3042\u308bSHA-1\u3068\u4e00\u81f4\u3057\u3066\u308b\u306e\u3092\u78ba\u8a8d\u3057\u3066\u3001\u89e3\u51cd\u3002\n$ openssl sha1 2016-11-25-raspbian-jessie-lite.zip\nSHA1(2016-11-25-raspbian-jessie-lite.zip)= 6741a30d674d39246302a791f1b7b2b0c50ef9b7\n$ unzip 2016-11-25-raspbian-jessie-lite.zip\nArchive:  2016-11-25-raspbian-jessie-lite.zip\n  inflating: 2016-11-25-raspbian-jessie-lite.img  \n\nSD\u30ab\u30fc\u30c9\u3092Mac\u306b\u633f\u3059\u524d\u3068\u5f8c\u3067diskutil list\u3092\u6bd4\u8f03\u3057\u3066\u3001\u5897\u3048\u305f/dev/diskN\u3092\u78ba\u8a8d\u3002(\u79c1\u306e\u74b0\u5883\u3067\u306f/dev/disk2\u3002) diskutil unmountDisk\u3067\u30c7\u30a3\u30b9\u30af\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3001dd\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092SD\u30ab\u30fc\u30c9\u306b\u66f8\u304d\u8fbc\u3080\u3002dd\u30b3\u30de\u30f3\u30c9\u306f\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u308b\u3002Ctrl+T\u3067\u4f55\u30d0\u30a4\u30c8\u66f8\u304d\u8fbc\u307e\u308c\u305f\u304b\u78ba\u8a8d\u3067\u304d\u308b\u3002\n$ diskutil unmountDisk /dev/disk2 \nUnmount of all volumes on disk2 was successful\n$ sudo dd if=2016-11-25-raspbian-jessie-lite.img of=/dev/disk2 bs=1m\n\n\nRaspberry Pi\u306e\u521d\u671f\u8a2d\u5b9a\nRaspberry Pi\u3092\u30b1\u30fc\u30b9\u306b\u5165\u308c\u3066\u3001SD\u30ab\u30fc\u30c9\u3092\u633f\u3057\u3066\u3001HDMI\u30b1\u30fc\u30d6\u30eb\u3067\u30c6\u30ec\u30d3\u306b\u7e4b\u3044\u3067\u3001USB\u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u633f\u3057\u3066\u3001USB\u30a2\u30c0\u30d7\u30bf\u304b\u3089\u96fb\u6e90\u3092\u4f9b\u7d66\u3059\u308b\u3068\u521d\u56de\u8d77\u52d5\u304c\u59cb\u307e\u308b\u306e\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u307e\u3067\u304d\u305f\u3089\u3001ID: pi\u3001Password: raspberry\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001sudo raspi-config\u3067\u521d\u671f\u8a2d\u5b9a\u3002\n\n\n2 Change User Password \u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\n\n4 Internationalisation Options \u2192 I2 Change Timezone \u2192 Asia \u2192 Tokyo\n\n\n4 Internationalisation Options \u2192 I3 Change Keyboard Layout \u2192 Generic 105-key (Intel) PC \u2192 Other \u2192 Japanese \u2192 Japanese \u2192 The default for the keyboard layout \u2192 No compose key\n\n\n4 Internationalisation Options \u2192 I4 Change Wi-fi Country \u2192 JP Japan\n\n\n7 Advanced Options \u2192 A4 SSH \u2192 Yes\n\n\nsudo shutdown -r now\u3067\u518d\u8d77\u52d5\u3057\u3001sudo vi /etc/wpa_supplicant/wpa_supplicant.conf\u3067Wi-fi\u306e\u8a2d\u5b9a\u3002\n\nwpa_supplicant.conf\ncountry=JP\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nupdate_config=1\nnetwork={\n    ssid=\"Wi-fi\u306eSSID\"\n    psk=\"Wi-fi\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\"\n    key_mgmt=WPA-PSK\n}\n\n\n\u305d\u3057\u3066\u3001sudo shutdown -r now\u3067\u518d\u8d77\u52d5\u3002\u753b\u9762\u306bMy IP address is 192.168.0.10 ...\u3068IP\u30a2\u30c9\u30ec\u30b9\u304c\u51fa\u3066\u304f\u308b\u306e\u3067\u30e1\u30e2\u3063\u3066Mac\u304b\u3089ssh pi@192.168.0.10\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\u6700\u5f8c\u306b\u3001sudo apt-get update\u3068sudo apt-get dist-upgrade\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u3057\u3066\u521d\u671f\u8a2d\u5b9a\u306f\u7d42\u4e86\u3002\n\nirMagician\u306e\u52d5\u4f5c\u78ba\u8a8d\nRaspberry Pi\u3068irMagician\u3092USB\u3067\u63a5\u7d9a\u3057\u3001dmesg\u30b3\u30de\u30f3\u30c9\u3067ttyACM0\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u305f\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\ndmesg\n$ dmesg\n[    0.000000] Booting Linux on physical CPU 0x0\n...\n[  275.569696] usb 1-1.4: new full-speed USB device number 4 using dwc_otg\n[  275.692440] usb 1-1.4: New USB device found, idVendor=04d8, idProduct=000a\n[  275.692461] usb 1-1.4: New USB device strings: Mfr=1, Product=2, SerialNumber=3\n[  275.692475] usb 1-1.4: Product: The Ultimate irController - irMagician\n[  275.692487] usb 1-1.4: Manufacturer: Microchip Technology Inc.\n[  275.692500] usb 1-1.4: SerialNumber: 0123\n[  275.714912] cdc_acm 1-1.4:1.0: ttyACM0: USB ACM device\n[  275.715694] usbcore: registered new interface driver cdc_acm\n[  275.715706] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters\n\n\n\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u4f7f\u3046screen\u30b3\u30de\u30f3\u30c9\u3092sudo apt-get install screen\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001screen /dev/ttyACM0 9600\u3067\u3001irMagician\u3068\u901a\u4fe1\u958b\u59cb\u3002v\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u3068\u3001\u753b\u9762\u306b\nirMagician 1.0.1\nOK\n\n\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3089irMagician\u3068\u901a\u4fe1\u306f\u6210\u529f\u3002\n\u6b21\u306f\u4fe1\u53f7\u306e\u5b66\u7fd2\u306e\u52d5\u4f5c\u78ba\u8a8d\u3002c\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u3068\u3001\u753b\u9762\u306b...\u3068\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30c6\u30ec\u30d3\u30ea\u30e2\u30b3\u30f3\u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066irMagician\u306e\u30bb\u30f3\u30b5\u306b\u8d64\u5916\u7dda\u3092\u5f53\u3066\u308b\u3002... \u6574\u6570\u3068\u3044\u3046\u8868\u793a\u306b\u306a\u308c\u3070\u6210\u529f\u3002... Time Out !\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u5931\u6557\u3002\n\u6700\u5f8c\u306b\u3001\u4fe1\u53f7\u306e\u518d\u751f\u306e\u52d5\u4f5c\u78ba\u8a8d\u3002irMagician\u3092\u30c6\u30ec\u30d3\u306b\u5411\u3051\u3066\u3001p\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u30c6\u30ec\u30d3\u306e\u96fb\u6e90\u304c\u5207\u308c\u308bor\u5165\u308c\u3070\u6210\u529f\u3002Ctrl+a k\u3067screen\u3092\u7d42\u4e86\u3002\n\nirMagician\u3068\u901a\u4fe1\u3059\u308bPython\u30d7\u30ed\u30b0\u30e9\u30e0\n\u958b\u767a\u5143\u306e\u5927\u5bae\u6280\u7814\u306e\u30b5\u30a4\u30c8\u3067\u3001irMagician\u3068\u901a\u4fe1\u3059\u308bPython\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306fpyserial\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u307e\u305a\u3001pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304b\u3089\u3001pyserial\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ sudo apt-get install python-pip\n$ sudo pip install pyserial\n\ncap.py\u3001play.py\u3001saveIrMagician.py\u3001playIrMagicianLocal.py\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\n$ mkdir ~/irm\n$ cd ~/irm\n$ wget http://www.omiya-giken.com/irMagician/python/linux/cap.py\n$ wget http://www.omiya-giken.com/irMagician/python/linux/play.py\n$ wget http://www.omiya-giken.com/irMagician/python/linux/saveIrMagician.py\n$ wget http://www.omiya-giken.com/irMagician/python/linux/playIrMagicianLocal.py\n\ncap.py\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u5b66\u7fd2\u3057\u3001play.py\u3067\u518d\u751f\u304c\u6210\u529f\u3057\u3066\u3044\u305f\u3089\u3001saveIrMagician.py filename\u3067\u4fe1\u53f7\u60c5\u5831\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3001playIrMagicianLocal.py filename\u3067\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4fe1\u53f7\u60c5\u5831\u3092\u8aad\u307f\u53d6\u3063\u3066\u9001\u4fe1\u3067\u304d\u308b\u3002\n\u4eca\u56de\u306f\u9069\u5f53\u306a\u6e29\u5ea6\u8a2d\u5b9a\u3067\u30a8\u30a2\u30b3\u30f3\u3092\u30aa\u30f3\u306b\u3059\u308b\u4fe1\u53f7\u60c5\u5831on.json\u3068\u3001\u30aa\u30d5\u306b\u3059\u308b\u4fe1\u53f7\u60c5\u5831off.json\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n\nFirebase\u306e\u767b\u9332\nFirebase Console\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u300c\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u9069\u5f53\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3092\u5165\u529b\u3057\u3066\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u30ae\u30a2\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID\u300d\u3092\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\u5de6\u306e\u30e1\u30cb\u30e5\u30fc\u306e\u300cAuthentication\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u300d\u3001\u300cGoogle\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u6709\u52b9\u306b\u3059\u308b\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\u4fdd\u5b58\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u300c\u30a6\u30a7\u30d6\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001config\u306e\u4e2d\u8eab\u3092\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n  // Initialize Firebase\n  var config = {\n    apiKey: \"XXXXXXXXXXXXXXXX-XXXXXXXXXXXX\",\n    authDomain: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseapp.com\",\n    databaseURL: \"https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseio.com\",\n    storageBucket: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.appspot.com\",\n    messagingSenderId: \"0123456789\"\n  };\n  firebase.initializeApp(config);\n\n\nFirebase \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\n\u624b\u5143\u306e\u30d1\u30bd\u30b3\u30f3/Mac\u306bFirebase \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3067Firebase\u3092\u3044\u3058\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002(\u624b\u5143\u306e\u30d1\u30bd\u30b3\u30f3/Mac\u306b\u3082NodeJS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u3002)\n$ npm install -g firebase-tools\n\nFirebase\u306e\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001firebase\u30b3\u30de\u30f3\u30c9\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n$ mkdir ~/firebase_prj\n$ cd ~/firebase_prj\n$ firebase login\n? Allow Firebase to collect anonymous CLI usage information? (Y/n) # \u3053\u308c\u306f\u304a\u597d\u307f\u3067\u9078\u629e\n\nVisit this URL on any device to log in:\nhttps://accounts.google.com/o/oauth2/auth?client_id=......\n# \u8868\u793a\u3055\u308c\u305fURL\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001\u5148\u7a0bFirebase\u306b\u767b\u9332\u3057\u305fGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\nWaiting for authentication...\n\n\u2714  Success! Logged in as \u3042\u306a\u305f\u306eGooogle\u30a2\u30ab\u30a6\u30f3\u30c8\u30a2\u30c9\u30ec\u30b9\n$ firebase init\n# \u4e2d\u7565\n? What Firebase CLI features do you want to setup for this folder? (Press <space> to select)\n\u276f\u25c9 Database: Deploy Firebase Realtime Database Rules\n \u25c9 Hosting: Configure and deploy Firebase Hosting sites\n# \u4e21\u65b9\u9078\u629e\u3057\u305f\u72b6\u614b\u3067\u3001Enter\n=== Project Setup\n\nFirst, let's associate this project directory with a Firebase project.\nYou can create multiple project aliases by running firebase use --add, \nbut for now we'll just set up a default project.\n\n? What Firebase project do you want to associate as default? \n# \u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e\u3057\u3001Enter\n=== Database Setup\n\nFirebase Realtime Database Rules allow you to define how your data should be\nstructured and when your data can be read from and written to.\n\n? What file should be used for Database Rules? (database.rules.json) \n# Enter\n=== Hosting Setup\n\nYour public directory is the folder (relative to your project directory) that\nwill contain Hosting assets to uploaded with firebase deploy. If you\nhave a build process for your assets, use your build's output directory.\n\n? What do you want to use as your public directory? (public) \n# Enter\n? Configure as a single-page app (rewrite all urls to /index.html)? (y/N) \n# Enter\n\u2714  Wrote public/404.html\n\u2714  Wrote public/index.html\n\ni  Writing configuration info to firebase.json...\ni  Writing project information to .firebaserc...\n\n\u2714  Firebase initialization complete!\n$ ls\ndatabase.rules.json firebase.json       public\n\ndatabase.rules.json\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\u3002\n\ndatabase.rules.json\n{\n  \"rules\": {\n    \".read\": true,\n    \".write\": \"auth.provider == 'google' && auth.token.email == '\u81ea\u5206\u306eGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u30a2\u30c9\u30ec\u30b9@gmail.com'\"\n  }\n}\n\n\npublic/index.html\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\n\nindex.html\n<script src=\"https://www.gstatic.com/firebasejs/3.6.1/firebase.js\"></script>\n<script>\n// Initialize Firebase\nvar config = {\n  apiKey: \"XXXXXXXXXXXXXXXX-XXXXXXXXXXXX\",\n  authDomain: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseapp.com\",\n  databaseURL: \"https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseio.com\",\n  storageBucket: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.appspot.com\",\n  messagingSenderId: \"0000000000\"\n};\nfirebase.initializeApp(config);\n\nfunction loginOrLogout() {\n  if (firebase.auth().currentUser) {\n    // Logout\n    firebase.auth().signOut().then(_ => console.log('Logout: OK '),\n                                   _ => console.log('Logout: Error'));\n  } else {\n    // Login\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope('https://www.googleapis.com/auth/plus.login');\n    firebase.auth().signInWithRedirect(provider);\n  }\n}\n\nfunction sendEnabled(value) {\n  firebase.database().ref('aircon')\n      .set({value: value, timestamp: firebase.database.ServerValue.TIMESTAMP})\n      .then(_ => console.log('sendEnabled: OK'),\n            _ => console.log('sendEnabled: Error'));\n}\n\nfunction sendTimer() {\n  firebase.database().ref('timer')\n      .set({\n            on: {\n              enabled: document.getElementById('onCheck').checked,\n              time: document.getElementById('onTime').value\n            },\n            off: {\n              enabled: document.getElementById('offCheck').checked,\n              time: document.getElementById('offTime').value\n            },\n            timestamp: firebase.database.ServerValue.TIMESTAMP\n          })\n      .then(_ => console.log('sendTimer: OK'),\n            _ => console.log('sendTimer: Error'));\n}\n\nfunction initialize() {\n  firebase.auth().onAuthStateChanged(user => {\n    document.getElementById('loginOrLogout').value = user ? 'Logout' : 'Login';\n  });\n  firebase.database().ref('/')\n    .on('value', snapshot => {\n      var timer = snapshot.val().timer;\n      if (!timer)\n        return;\n      if (timer.on) {\n        if (timer.on.enabled)\n          document.getElementById('onCheck').checked = timer.on.enabled;\n        if (timer.on.time)\n          document.getElementById('onTime').value = timer.on.time;\n      }\n      if (timer.off) {\n        if (timer.off.enabled)\n          document.getElementById('offCheck').checked = timer.off.enabled;\n        if (timer.off.time)\n          document.getElementById('offTime').value = timer.off.time;\n      }\n    });\n}\nwindow.addEventListener('load', initialize);\n</script>\n\n<input type=\"button\" id='loginOrLogout' onclick=\"loginOrLogout()\" value=\"\">\n<div>\n<input type=\"button\" onclick=\"sendEnabled(true)\" value=\"On\">\n<input type=\"button\" onclick=\"sendEnabled(false)\" value=\"Off\">\n<input type=\"button\" onclick=\"sendTimer()\" value=\"Set Timer\">\n</div>\n<div>\n<label><input type=\"checkbox\" id=\"onCheck\">On: </label>\n<input type=\"time\" id=\"onTime\">\n</div>\n<div>\n<label><input type=\"checkbox\" id=\"offCheck\">Off: </label>\n<input type=\"time\" id=\"offTime\">\n</div>\n\n\n\n\n\u305d\u3057\u3066\u3001 firebase deploy\u3067\u30c7\u30d7\u30ed\u30a4\u3002\n$ firebase deploy\n\n\u3053\u308c\u3067\u3001 https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID.firebaseapp.com \u3067\u9060\u9694\u64cd\u4f5c\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\nRaspberry Pi\u306bNodeJS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install git\n$ git clone https://github.com/creationix/nvm.git ~/.nvm\n$ source ~/.nvm/nvm.sh\n$ nvm ls-remote      # Latest LTS\u3092\u78ba\u8a8d\n$ nvm install v6.9.1 # \u4e0a\u3067\u78ba\u8a8d\u3057\u305fLatest LTS\u3092\u9078\u3076\n\n\nRaspberry Pi\u304b\u3089firebase\u306b\u7e4b\u3044\u3067\u30ea\u30e2\u30b3\u30f3\u3092\u64cd\u4f5c\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\n$ mkdir ~/prj\n$ cd ~/prj\n$ npm init\n$ npm install --save firebase\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306aaircon.js\u3092prj\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3059\u308b\u3002\n\naircon.js\nvar firebase = require(\"firebase\");\nvar config = { databaseURL: \"https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID.firebaseio.com\" };\nfirebase.initializeApp(config);\n\nvar execSync = require('child_process').execSync;\n\nvar AIRCON_ON_COMMAND =\n    'python /home/pi/irm/playIrMagicianLocal.py /home/pi/irm/on.json';\nvar AIRCON_OFF_COMMAND =\n    'python /home/pi/irm/playIrMagicianLocal.py /home/pi/irm/off.json';\n\n\nfirebase.database().ref('/aircon').on('value', function(snapshot) {\n  console.log('/aircon: ' + JSON.stringify(snapshot.val()));\n  if (snapshot.val().value) {\n    console.log('aircon on');\n    console.log(execSync(AIRCON_ON_COMMAND).toString());\n  } else {\n    console.log('aircon off');\n    console.log(execSync(AIRCON_OFF_COMMAND).toString());\n  }\n});\n\nvar onTimerInfo = {enabled: false};\nvar offTimerInfo = {enabled: false};\n\nfunction fireOnTimer() {\n  console.log('fireOnTimer');\n  console.log(execSync(AIRCON_ON_COMMAND).toString());\n  onTimerInfo.timeoutID =\n      setTimeout(_ => { fireOnTimer(); },\n                 getDiffTimeMiliSec(onTimerInfo.time, new Date()));\n}\nfunction fireOffTimer() {\n  console.log('fireOffTimer');\n  console.log(execSync(AIRCON_OFF_COMMAND).toString());\n  offTimerInfo.timeoutID =\n      setTimeout(_ => { fireOffTimer(); },\n                 getDiffTimeMiliSec(offTimerInfo.time, new Date()));\n}\n\nfunction getDiffTimeMiliSec(timeString, nowDate) {\n  var time = (parseInt(timeString.substring(0, 2)) * 60 +\n              parseInt(timeString.substring(3, 5))) * 60;\n  var nowTime = (nowDate.getHours() * 60 + nowDate.getMinutes()) * 60 +\n                nowDate.getSeconds();\n  if (time > nowTime)\n    return (time - nowTime) * 1000;\n  return (time + 24 * 60 * 60 - nowTime) * 1000;\n}\n\nfirebase.database().ref('/timer').on('value', function(snapshot) {\n  console.log('/timer: ' + JSON.stringify(snapshot.val()));\n  var timer = snapshot.val();\n  if (!timer)\n    return;\n  if (onTimerInfo.enabled) {\n    clearTimeout(onTimerInfo.timeoutID);\n    onTimerInfo.enabled = false;\n  }\n  if (offTimerInfo.enabled) {\n    clearTimeout(offTimerInfo.timeoutID);\n    offTimerInfo.enabled = false;\n  }\n  if (timer.on && timer.on.enabled && timer.on.time) {\n    onTimerInfo.enabled = true;\n    onTimerInfo.time = timer.on.time;\n    onTimerInfo.timeoutID =\n        setTimeout(_ => { fireOnTimer(); },\n                   getDiffTimeMiliSec(onTimerInfo.time, new Date()));\n  }\n  if (timer.off && timer.off.enabled && timer.off.time) {\n    offTimerInfo.enabled = true;\n    offTimerInfo.time = timer.off.time;\n    offTimerInfo.timeoutID =\n        setTimeout(_ => { fireOffTimer(); },\n                   getDiffTimeMiliSec(offTimerInfo.time, new Date()));\n  }\n});\n\n\n\u3042\u3068\u306f\u3001node aircon.js\u3067\u8d77\u52d5\n$ node aircon.js\n\n# \u3044\u304d\u3055\u3064\n\n\u4eca\u4f4f\u3093\u3067\u308b\u30de\u30f3\u30b7\u30e7\u30f3\u306e\u30a8\u30a2\u30b3\u30f3\u306f\u30aa\u30d5\u30bf\u30a4\u30de\u30fc\u3068\u30aa\u30f3\u30bf\u30a4\u30de\u30fc\u3092\u540c\u6642\u306b\u8a2d\u5b9a\u3067\u304d\u306a\u304f\u3001\u591c\u30aa\u30d5\u30bf\u30a4\u30de\u30fc\u3092\u3064\u3051\u308b\u3068\u3001\u671d\u306f\u5bd2\u3044\u4e2d\u8d77\u304d\u3066\u3053\u306a\u304f\u3061\u3083\u3044\u3051\u306a\u3044\u3002\u53bb\u5e74\u8cb7\u3063\u305fRaspberry Pi\u304c\u4f7f\u308f\u308c\u305a\u306b\u8ee2\u304c\u3063\u3066\u305f\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066\u554f\u984c\u3092\u89e3\u6c7a\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\nRaspberry Pi\u3067\u30ea\u30e2\u30b3\u30f3\u8d64\u5916\u7dda\u3092\u9001\u53d7\u4fe1\u3059\u308b\u65b9\u6cd5\u306f\u3001\n\n- \u8d64\u5916\u7ddaLED\u3068\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u81ea\u524d\u3067\u56de\u8def\u3092\u5b9f\u88c5\u3057\u3066GPIO\u3067\u901a\u4fe1\u3059\u308b\n- USB\u63a5\u7d9a\u306e\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u30ad\u30c3\u30c8\u3092\u8cb7\u3063\u3066\u304f\u308b\n\n\u306e\uff12\u901a\u308a\u304c\u8003\u3048\u3089\u308c\u308b\u3051\u3069\u3001\u534a\u7530\u3054\u3066\u304c\u898b\u5f53\u305f\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u30ad\u30c3\u30c8\u3092\u8cb7\u3063\u3066\u304f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\u30cd\u30c3\u30c8\u3067\u8abf\u3079\u308b\u3068[USB\u63a5\u7d9a \u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u30ad\u30c3\u30c8(\u682a\u5f0f\u4f1a\u793e\u30d3\u30c3\u30c8\u30fb\u30c8\u30ec\u30fc\u30c9\u30fb\u30ef\u30f3)](http://bit-trade-one.co.jp/BTOpicture/Products/005-RS/index.html)\u3001[irMagician(\u5927\u5bae\u6280\u7814 \u5408\u540c\u4f1a\u793e)](http://www.omiya-giken.com/?page_id=837)\u8fba\u308a\u304c\u3001Raspberry Pi\u3067\u306e\u5b9f\u7e3e\u304c\u3059\u3067\u306b\u3042\u308b\u3089\u3057\u3044\u3002irMagician\u306e\u65b9\u304c\u30e1\u30e2\u30ea\u5bb9\u91cf\u3082\u5927\u304d\u3044\u306e\u3067\u9577\u3044\u4fe1\u53f7\u306b\u5bfe\u5fdc\u3057\u3066\u305d\u3046\u306a\u4e0a\u3001\u30b5\u30a4\u30ba\u3082\u5c0f\u3055\u3044\u306e\u3067\u3001irMagician\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u305f\u3002\n\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089Raspberry Pi\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u30eb\u30fc\u30bf\u30fc\u306e\u30dd\u30fc\u30c8\u3092\u958b\u3051\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u9762\u5012\u306a\u306e\u3067\u3001\u4eca\u56de\u306fFirebase Realtime Database\u3092\u4f7f\u3063\u3066\u901a\u4fe1\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u3002\u307e\u305f\u3001\u81ea\u5206\u4ee5\u5916\u306e\u4eba\u306b\u30a8\u30a2\u30b3\u30f3\u3092\u64cd\u4f5c\u3055\u308c\u305f\u304f\u306a\u3044\u306e\u3067\u3001Firebase Authentication\u3092\u4f7f\u3063\u3066Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8a8d\u8a3c\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n![aircon.png](https://qiita-image-store.s3.amazonaws.com/0/110601/11561037-9be6-1f30-0175-9833a2275a5b.png)\n\n\n# \u8cfc\u5165\n\n| \u54c1\u7269            |   \u5024\u6bb5(\u5186) |\n|:---------------|------:|\n| irMagician     | 3,980 |\n| Raspberry Pi 3 | 5,800 |\n| Raspberry Pi 3 \u30b1\u30fc\u30b9 | 1,280 |\n| AC\u30a2\u30c0\u30d7\u30bf 5V2.5A | 1,100 |\n| USB\u30b1\u30fc\u30d6\u30eb 1.5m  | 120 |\n| \u30de\u30a4\u30af\u30edSD\u30ab\u30fc\u30c916GB  | 900 |\n\nirMagician\u306f[IT\u30d7\u30e9\u30b6](http://www.itplaza.co.jp/)\u3067\u5b8c\u6210\u54c1\u3092\u8cfc\u5165\u3002(\u306f\u3093\u3060\u4ed8\u3051\u306b\u81ea\u4fe1\u304c\u3042\u308c\u30701,980\u5186\u306e\u30ad\u30c3\u30c8\u306e\u307b\u3046\u304c\u304a\u5f97\u3002)\u305d\u308c\u4ee5\u5916\u306f[\u79cb\u6708\u96fb\u5b50](http://akizukidenshi.com/catalog/default.aspx)\u3067\u8cfc\u5165\u3002Raspberry Pi 2 Model B\u3092\u3059\u3067\u306b\u6301\u3063\u3066\u308b\u3051\u3069\u3001Raspberry Pi 3\u306e\u65b9\u304cWi-Fi\u3068Bluetooth(\u4eca\u56de\u306f\u4f7f\u308f\u306a\u3044)\u3092\u5185\u8535\u3057\u3066\u308b\u3057\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u3068\u601d\u3044\u885d\u52d5\u8cb7\u3044\u3002\n\n\u3053\u308c\u4ee5\u5916\u306b\u3001\u30de\u30a4\u30af\u30edSD->SD\u30ab\u30fc\u30c9\u30a2\u30c0\u30d7\u30bf\u3001AC\u30a2\u30c0\u30d7\u30bf\u304b\u3089\u306e\u7d66\u96fb\u7528USB\u30b1\u30fc\u30d6\u30eb\u3001USB\u30ad\u30fc\u30dc\u30fc\u30c9\u3001HDMI\u30b1\u30fc\u30d6\u30eb\u3068\u30c7\u30a3\u30b9\u30d7\u30ec\u30fc(\u30c6\u30ec\u30d3\u3067\u53ef)\u304c\u5225\u9014\u5fc5\u8981\u3002\n\n\n# \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n## Mac\u3067\u8d77\u52d5\u7528SD\u30ab\u30fc\u30c9\u306e\u4f5c\u6210\n[\u516c\u5f0f\u30da\u30fc\u30b8](http://www.raspberrypi.org/downloads/)\u304b\u3089\u6700\u65b0\u306eRASPBIAN JESSIE LITE\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\uff0812\u67084\u65e5\u73fe\u57282016-11-25\u7248\u30012016-11-25-raspbian-jessie-lite.zip\u304c\u6700\u65b0\uff09\n\n\u5ff5\u306e\u305f\u3081SHA-1 \u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8\u306b\u66f8\u3044\u3066\u3042\u308bSHA-1\u3068\u4e00\u81f4\u3057\u3066\u308b\u306e\u3092\u78ba\u8a8d\u3057\u3066\u3001\u89e3\u51cd\u3002\n\n\n```bash\n$ openssl sha1 2016-11-25-raspbian-jessie-lite.zip\nSHA1(2016-11-25-raspbian-jessie-lite.zip)= 6741a30d674d39246302a791f1b7b2b0c50ef9b7\n$ unzip 2016-11-25-raspbian-jessie-lite.zip\nArchive:  2016-11-25-raspbian-jessie-lite.zip\n  inflating: 2016-11-25-raspbian-jessie-lite.img  \n```\n\nSD\u30ab\u30fc\u30c9\u3092Mac\u306b\u633f\u3059\u524d\u3068\u5f8c\u3067diskutil list\u3092\u6bd4\u8f03\u3057\u3066\u3001\u5897\u3048\u305f`/dev/diskN`\u3092\u78ba\u8a8d\u3002(\u79c1\u306e\u74b0\u5883\u3067\u306f`/dev/disk2`\u3002) `diskutil unmountDisk`\u3067\u30c7\u30a3\u30b9\u30af\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3001`dd`\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092SD\u30ab\u30fc\u30c9\u306b\u66f8\u304d\u8fbc\u3080\u3002`dd`\u30b3\u30de\u30f3\u30c9\u306f\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u308b\u3002`Ctrl+T`\u3067\u4f55\u30d0\u30a4\u30c8\u66f8\u304d\u8fbc\u307e\u308c\u305f\u304b\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n```bash\n$ diskutil unmountDisk /dev/disk2 \nUnmount of all volumes on disk2 was successful\n$ sudo dd if=2016-11-25-raspbian-jessie-lite.img of=/dev/disk2 bs=1m\n```\n\n## Raspberry Pi\u306e\u521d\u671f\u8a2d\u5b9a\n\nRaspberry Pi\u3092\u30b1\u30fc\u30b9\u306b\u5165\u308c\u3066\u3001SD\u30ab\u30fc\u30c9\u3092\u633f\u3057\u3066\u3001HDMI\u30b1\u30fc\u30d6\u30eb\u3067\u30c6\u30ec\u30d3\u306b\u7e4b\u3044\u3067\u3001USB\u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u633f\u3057\u3066\u3001USB\u30a2\u30c0\u30d7\u30bf\u304b\u3089\u96fb\u6e90\u3092\u4f9b\u7d66\u3059\u308b\u3068\u521d\u56de\u8d77\u52d5\u304c\u59cb\u307e\u308b\u306e\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u307e\u3067\u304d\u305f\u3089\u3001ID: `pi`\u3001Password: `raspberry`\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001`sudo raspi-config`\u3067\u521d\u671f\u8a2d\u5b9a\u3002\n\n- `2 Change User Password` \u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\n- `4 Internationalisation Options` \u2192 `I2 Change Timezone` \u2192 `Asia` \u2192 `Tokyo`\n- `4 Internationalisation Options` \u2192 `I3 Change Keyboard Layout` \u2192 `Generic 105-key (Intel) PC` \u2192 `Other` \u2192 `Japanese` \u2192 `Japanese` \u2192 `The default for the keyboard layout` \u2192 `No compose key`\n- `4 Internationalisation Options` \u2192 `I4 Change Wi-fi Country` \u2192 `JP Japan`\n- `7 Advanced Options` \u2192 `A4 SSH` \u2192 `Yes`\n\n`sudo shutdown -r now`\u3067\u518d\u8d77\u52d5\u3057\u3001`sudo vi /etc/wpa_supplicant/wpa_supplicant.conf`\u3067Wi-fi\u306e\u8a2d\u5b9a\u3002\n\n```filename:wpa_supplicant.conf\ncountry=JP\nctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\nupdate_config=1\nnetwork={\n    ssid=\"Wi-fi\u306eSSID\"\n    psk=\"Wi-fi\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\"\n    key_mgmt=WPA-PSK\n}\n```\n\u305d\u3057\u3066\u3001`sudo shutdown -r now`\u3067\u518d\u8d77\u52d5\u3002\u753b\u9762\u306b`My IP address is 192.168.0.10 ...`\u3068IP\u30a2\u30c9\u30ec\u30b9\u304c\u51fa\u3066\u304f\u308b\u306e\u3067\u30e1\u30e2\u3063\u3066Mac\u304b\u3089`ssh pi@192.168.0.10`\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n\u6700\u5f8c\u306b\u3001`sudo apt-get update`\u3068`sudo apt-get dist-upgrade`\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u306e[\u66f4\u65b0](https://www.raspberrypi.org/documentation/raspbian/updating.md)\u3092\u3057\u3066\u521d\u671f\u8a2d\u5b9a\u306f\u7d42\u4e86\u3002\n\n# irMagician\u306e\u52d5\u4f5c\u78ba\u8a8d\nRaspberry Pi\u3068irMagician\u3092USB\u3067\u63a5\u7d9a\u3057\u3001`dmesg`\u30b3\u30de\u30f3\u30c9\u3067ttyACM0\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u305f\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```filename:dmesg\n$ dmesg\n[    0.000000] Booting Linux on physical CPU 0x0\n...\n[  275.569696] usb 1-1.4: new full-speed USB device number 4 using dwc_otg\n[  275.692440] usb 1-1.4: New USB device found, idVendor=04d8, idProduct=000a\n[  275.692461] usb 1-1.4: New USB device strings: Mfr=1, Product=2, SerialNumber=3\n[  275.692475] usb 1-1.4: Product: The Ultimate irController - irMagician\n[  275.692487] usb 1-1.4: Manufacturer: Microchip Technology Inc.\n[  275.692500] usb 1-1.4: SerialNumber: 0123\n[  275.714912] cdc_acm 1-1.4:1.0: ttyACM0: USB ACM device\n[  275.715694] usbcore: registered new interface driver cdc_acm\n[  275.715706] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters\n```\n\n\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u4f7f\u3046`screen`\u30b3\u30de\u30f3\u30c9\u3092`sudo apt-get install screen`\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001`screen /dev/ttyACM0 9600`\u3067\u3001irMagician\u3068\u901a\u4fe1\u958b\u59cb\u3002`v`\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u3068\u3001\u753b\u9762\u306b\n\n```\nirMagician 1.0.1\nOK\n```\n\n\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3089irMagician\u3068\u901a\u4fe1\u306f\u6210\u529f\u3002\n\n\u6b21\u306f\u4fe1\u53f7\u306e\u5b66\u7fd2\u306e\u52d5\u4f5c\u78ba\u8a8d\u3002`c`\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u3068\u3001\u753b\u9762\u306b`...`\u3068\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30c6\u30ec\u30d3\u30ea\u30e2\u30b3\u30f3\u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066irMagician\u306e\u30bb\u30f3\u30b5\u306b\u8d64\u5916\u7dda\u3092\u5f53\u3066\u308b\u3002`... \u6574\u6570`\u3068\u3044\u3046\u8868\u793a\u306b\u306a\u308c\u3070\u6210\u529f\u3002`... Time Out !`\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u5931\u6557\u3002\n\n\u6700\u5f8c\u306b\u3001\u4fe1\u53f7\u306e\u518d\u751f\u306e\u52d5\u4f5c\u78ba\u8a8d\u3002irMagician\u3092\u30c6\u30ec\u30d3\u306b\u5411\u3051\u3066\u3001`p`\u30ad\u30fc\u3092\u62bc\u3057\u3066\u3001Enter\u30ad\u30fc\u3092\u62bc\u3059\u30c6\u30ec\u30d3\u306e\u96fb\u6e90\u304c\u5207\u308c\u308bor\u5165\u308c\u3070\u6210\u529f\u3002`Ctrl+a k`\u3067screen\u3092\u7d42\u4e86\u3002\n\n# irMagician\u3068\u901a\u4fe1\u3059\u308bPython\u30d7\u30ed\u30b0\u30e9\u30e0\n\n\u958b\u767a\u5143\u306e\u5927\u5bae\u6280\u7814\u306e\u30b5\u30a4\u30c8\u3067\u3001irMagician\u3068\u901a\u4fe1\u3059\u308bPython\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u304c[\u516c\u958b\u3055\u308c\u3066\u3044\u308b](http://www.omiya-giken.com/?page_id=1231)\u3002\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306fpyserial\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u307e\u305a\u3001pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304b\u3089\u3001pyserial\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\n$ sudo apt-get install python-pip\n$ sudo pip install pyserial\n```\n\n`cap.py`\u3001`play.py`\u3001`saveIrMagician.py`\u3001`playIrMagicianLocal.py`\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\n\n```bash\n$ mkdir ~/irm\n$ cd ~/irm\n$ wget http://www.omiya-giken.com/irMagician/python/linux/cap.py\n$ wget http://www.omiya-giken.com/irMagician/python/linux/play.py\n$ wget http://www.omiya-giken.com/irMagician/python/linux/saveIrMagician.py\n$ wget http://www.omiya-giken.com/irMagician/python/linux/playIrMagicianLocal.py\n```\n\n`cap.py`\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u5b66\u7fd2\u3057\u3001`play.py`\u3067\u518d\u751f\u304c\u6210\u529f\u3057\u3066\u3044\u305f\u3089\u3001`saveIrMagician.py filename`\u3067\u4fe1\u53f7\u60c5\u5831\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3001`playIrMagicianLocal.py filename`\u3067\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4fe1\u53f7\u60c5\u5831\u3092\u8aad\u307f\u53d6\u3063\u3066\u9001\u4fe1\u3067\u304d\u308b\u3002\n\n\u4eca\u56de\u306f\u9069\u5f53\u306a\u6e29\u5ea6\u8a2d\u5b9a\u3067\u30a8\u30a2\u30b3\u30f3\u3092\u30aa\u30f3\u306b\u3059\u308b\u4fe1\u53f7\u60c5\u5831`on.json`\u3068\u3001\u30aa\u30d5\u306b\u3059\u308b\u4fe1\u53f7\u60c5\u5831`off.json`\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n\n\n#Firebase\u306e\u767b\u9332\n[Firebase Console](https://console.firebase.google.com/)\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u300c\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u9069\u5f53\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3092\u5165\u529b\u3057\u3066\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u30ae\u30a2\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID\u300d\u3092\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\n\u5de6\u306e\u30e1\u30cb\u30e5\u30fc\u306e\u300cAuthentication\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u300d\u3001\u300cGoogle\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u6709\u52b9\u306b\u3059\u308b\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\u4fdd\u5b58\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\u300c\u30a6\u30a7\u30d6\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001config\u306e\u4e2d\u8eab\u3092\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\n```javascript\n  // Initialize Firebase\n  var config = {\n    apiKey: \"XXXXXXXXXXXXXXXX-XXXXXXXXXXXX\",\n    authDomain: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseapp.com\",\n    databaseURL: \"https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseio.com\",\n    storageBucket: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.appspot.com\",\n    messagingSenderId: \"0123456789\"\n  };\n  firebase.initializeApp(config);\n```\n\n# Firebase \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\n\n\u624b\u5143\u306e\u30d1\u30bd\u30b3\u30f3/Mac\u306bFirebase \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3067Firebase\u3092\u3044\u3058\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002(\u624b\u5143\u306e\u30d1\u30bd\u30b3\u30f3/Mac\u306b\u3082NodeJS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u3002)\n\n```bash\n$ npm install -g firebase-tools\n```\n\nFirebase\u306e\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001`firebase`\u30b3\u30de\u30f3\u30c9\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n\n```bash\n$ mkdir ~/firebase_prj\n$ cd ~/firebase_prj\n$ firebase login\n? Allow Firebase to collect anonymous CLI usage information? (Y/n) # \u3053\u308c\u306f\u304a\u597d\u307f\u3067\u9078\u629e\n\nVisit this URL on any device to log in:\nhttps://accounts.google.com/o/oauth2/auth?client_id=......\n# \u8868\u793a\u3055\u308c\u305fURL\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001\u5148\u7a0bFirebase\u306b\u767b\u9332\u3057\u305fGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\nWaiting for authentication...\n\n\u2714  Success! Logged in as \u3042\u306a\u305f\u306eGooogle\u30a2\u30ab\u30a6\u30f3\u30c8\u30a2\u30c9\u30ec\u30b9\n$ firebase init\n# \u4e2d\u7565\n? What Firebase CLI features do you want to setup for this folder? (Press <space> to select)\n\u276f\u25c9 Database: Deploy Firebase Realtime Database Rules\n \u25c9 Hosting: Configure and deploy Firebase Hosting sites\n# \u4e21\u65b9\u9078\u629e\u3057\u305f\u72b6\u614b\u3067\u3001Enter\n=== Project Setup\n\nFirst, let's associate this project directory with a Firebase project.\nYou can create multiple project aliases by running firebase use --add, \nbut for now we'll just set up a default project.\n\n? What Firebase project do you want to associate as default? \n# \u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e\u3057\u3001Enter\n=== Database Setup\n\nFirebase Realtime Database Rules allow you to define how your data should be\nstructured and when your data can be read from and written to.\n\n? What file should be used for Database Rules? (database.rules.json) \n# Enter\n=== Hosting Setup\n\nYour public directory is the folder (relative to your project directory) that\nwill contain Hosting assets to uploaded with firebase deploy. If you\nhave a build process for your assets, use your build's output directory.\n\n? What do you want to use as your public directory? (public) \n# Enter\n? Configure as a single-page app (rewrite all urls to /index.html)? (y/N) \n# Enter\n\u2714  Wrote public/404.html\n\u2714  Wrote public/index.html\n\ni  Writing configuration info to firebase.json...\ni  Writing project information to .firebaserc...\n\n\u2714  Firebase initialization complete!\n$ ls\ndatabase.rules.json\tfirebase.json\t\tpublic\n```\n\ndatabase.rules.json\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\u3002\n\n```json:database.rules.json\n{\n  \"rules\": {\n    \".read\": true,\n    \".write\": \"auth.provider == 'google' && auth.token.email == '\u81ea\u5206\u306eGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u30a2\u30c9\u30ec\u30b9@gmail.com'\"\n  }\n}\n```\n\npublic/index.html\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\n\n```html:index.html\n<script src=\"https://www.gstatic.com/firebasejs/3.6.1/firebase.js\"></script>\n<script>\n// Initialize Firebase\nvar config = {\n  apiKey: \"XXXXXXXXXXXXXXXX-XXXXXXXXXXXX\",\n  authDomain: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseapp.com\",\n  databaseURL: \"https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.firebaseio.com\",\n  storageBucket: \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 ID.appspot.com\",\n  messagingSenderId: \"0000000000\"\n};\nfirebase.initializeApp(config);\n\nfunction loginOrLogout() {\n  if (firebase.auth().currentUser) {\n    // Logout\n    firebase.auth().signOut().then(_ => console.log('Logout: OK '),\n                                   _ => console.log('Logout: Error'));\n  } else {\n    // Login\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope('https://www.googleapis.com/auth/plus.login');\n    firebase.auth().signInWithRedirect(provider);\n  }\n}\n\nfunction sendEnabled(value) {\n  firebase.database().ref('aircon')\n      .set({value: value, timestamp: firebase.database.ServerValue.TIMESTAMP})\n      .then(_ => console.log('sendEnabled: OK'),\n            _ => console.log('sendEnabled: Error'));\n}\n\nfunction sendTimer() {\n  firebase.database().ref('timer')\n      .set({\n            on: {\n              enabled: document.getElementById('onCheck').checked,\n              time: document.getElementById('onTime').value\n            },\n            off: {\n              enabled: document.getElementById('offCheck').checked,\n              time: document.getElementById('offTime').value\n            },\n            timestamp: firebase.database.ServerValue.TIMESTAMP\n          })\n      .then(_ => console.log('sendTimer: OK'),\n            _ => console.log('sendTimer: Error'));\n}\n\nfunction initialize() {\n  firebase.auth().onAuthStateChanged(user => {\n    document.getElementById('loginOrLogout').value = user ? 'Logout' : 'Login';\n  });\n  firebase.database().ref('/')\n    .on('value', snapshot => {\n      var timer = snapshot.val().timer;\n      if (!timer)\n        return;\n      if (timer.on) {\n        if (timer.on.enabled)\n          document.getElementById('onCheck').checked = timer.on.enabled;\n        if (timer.on.time)\n          document.getElementById('onTime').value = timer.on.time;\n      }\n      if (timer.off) {\n        if (timer.off.enabled)\n          document.getElementById('offCheck').checked = timer.off.enabled;\n        if (timer.off.time)\n          document.getElementById('offTime').value = timer.off.time;\n      }\n    });\n}\nwindow.addEventListener('load', initialize);\n</script>\n\n<input type=\"button\" id='loginOrLogout' onclick=\"loginOrLogout()\" value=\"\">\n<div>\n<input type=\"button\" onclick=\"sendEnabled(true)\" value=\"On\">\n<input type=\"button\" onclick=\"sendEnabled(false)\" value=\"Off\">\n<input type=\"button\" onclick=\"sendTimer()\" value=\"Set Timer\">\n</div>\n<div>\n<label><input type=\"checkbox\" id=\"onCheck\">On: </label>\n<input type=\"time\" id=\"onTime\">\n</div>\n<div>\n<label><input type=\"checkbox\" id=\"offCheck\">Off: </label>\n<input type=\"time\" id=\"offTime\">\n</div>\n\n\n```\n\n\u305d\u3057\u3066\u3001 `firebase deploy`\u3067\u30c7\u30d7\u30ed\u30a4\u3002\n\n```bash\n$ firebase deploy\n```\n\n\u3053\u308c\u3067\u3001 https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID.firebaseapp.com \u3067\u9060\u9694\u64cd\u4f5c\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n# Raspberry Pi\u306bNodeJS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ sudo apt-get install git\n$ git clone https://github.com/creationix/nvm.git ~/.nvm\n$ source ~/.nvm/nvm.sh\n$ nvm ls-remote      # Latest LTS\u3092\u78ba\u8a8d\n$ nvm install v6.9.1 # \u4e0a\u3067\u78ba\u8a8d\u3057\u305fLatest LTS\u3092\u9078\u3076\n```\n\n\n# Raspberry Pi\u304b\u3089firebase\u306b\u7e4b\u3044\u3067\u30ea\u30e2\u30b3\u30f3\u3092\u64cd\u4f5c\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\n\n```bash\n$ mkdir ~/prj\n$ cd ~/prj\n$ npm init\n$ npm install --save firebase\n```\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306aaircon.js\u3092prj\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3059\u308b\u3002\n\n\n```js:aircon.js\nvar firebase = require(\"firebase\");\nvar config = { databaseURL: \"https://\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID.firebaseio.com\" };\nfirebase.initializeApp(config);\n\nvar execSync = require('child_process').execSync;\n\nvar AIRCON_ON_COMMAND =\n    'python /home/pi/irm/playIrMagicianLocal.py /home/pi/irm/on.json';\nvar AIRCON_OFF_COMMAND =\n    'python /home/pi/irm/playIrMagicianLocal.py /home/pi/irm/off.json';\n\n\nfirebase.database().ref('/aircon').on('value', function(snapshot) {\n  console.log('/aircon: ' + JSON.stringify(snapshot.val()));\n  if (snapshot.val().value) {\n    console.log('aircon on');\n    console.log(execSync(AIRCON_ON_COMMAND).toString());\n  } else {\n    console.log('aircon off');\n    console.log(execSync(AIRCON_OFF_COMMAND).toString());\n  }\n});\n\nvar onTimerInfo = {enabled: false};\nvar offTimerInfo = {enabled: false};\n\nfunction fireOnTimer() {\n  console.log('fireOnTimer');\n  console.log(execSync(AIRCON_ON_COMMAND).toString());\n  onTimerInfo.timeoutID =\n      setTimeout(_ => { fireOnTimer(); },\n                 getDiffTimeMiliSec(onTimerInfo.time, new Date()));\n}\nfunction fireOffTimer() {\n  console.log('fireOffTimer');\n  console.log(execSync(AIRCON_OFF_COMMAND).toString());\n  offTimerInfo.timeoutID =\n      setTimeout(_ => { fireOffTimer(); },\n                 getDiffTimeMiliSec(offTimerInfo.time, new Date()));\n}\n\nfunction getDiffTimeMiliSec(timeString, nowDate) {\n  var time = (parseInt(timeString.substring(0, 2)) * 60 +\n              parseInt(timeString.substring(3, 5))) * 60;\n  var nowTime = (nowDate.getHours() * 60 + nowDate.getMinutes()) * 60 +\n                nowDate.getSeconds();\n  if (time > nowTime)\n    return (time - nowTime) * 1000;\n  return (time + 24 * 60 * 60 - nowTime) * 1000;\n}\n\nfirebase.database().ref('/timer').on('value', function(snapshot) {\n  console.log('/timer: ' + JSON.stringify(snapshot.val()));\n  var timer = snapshot.val();\n  if (!timer)\n    return;\n  if (onTimerInfo.enabled) {\n    clearTimeout(onTimerInfo.timeoutID);\n    onTimerInfo.enabled = false;\n  }\n  if (offTimerInfo.enabled) {\n    clearTimeout(offTimerInfo.timeoutID);\n    offTimerInfo.enabled = false;\n  }\n  if (timer.on && timer.on.enabled && timer.on.time) {\n    onTimerInfo.enabled = true;\n    onTimerInfo.time = timer.on.time;\n    onTimerInfo.timeoutID =\n        setTimeout(_ => { fireOnTimer(); },\n                   getDiffTimeMiliSec(onTimerInfo.time, new Date()));\n  }\n  if (timer.off && timer.off.enabled && timer.off.time) {\n    offTimerInfo.enabled = true;\n    offTimerInfo.time = timer.off.time;\n    offTimerInfo.timeoutID =\n        setTimeout(_ => { fireOffTimer(); },\n                   getDiffTimeMiliSec(offTimerInfo.time, new Date()));\n  }\n});\n```\n\n\u3042\u3068\u306f\u3001`node aircon.js`\u3067\u8d77\u52d5\n\n```bash\n$ node aircon.js\n```\n", "tags": ["RaspberryPi", "Firebase"]}