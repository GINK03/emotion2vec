{"context": "React \u3084 Redux \u306f Jest \u3068\u3044\u3046 JavaScript \u306e Testing Framework \u304c\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nActions, Reducers \u306e\u30c6\u30b9\u30c8\u306f\u3082\u3061\u308d\u3093\u3001Components \u306e\u30c6\u30b9\u30c8\u3082\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n\u524d\u56de \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b \u30c6\u30b9\u30c8 \u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nLearning\n\nJest \u3067 Actions, Reducers \u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3002\nEnzyme \u3067 Components \u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3002\n\n\nEnvironment\n\nnode: v6.9.1\nnpm: v4.0.3\nyarn: v0.18.0\n\n\nComment Box Form\n\n\u5b8c\u6210\u3055\u308c\u308b Source Code \u306e\u30d5\u30a1\u30a4\u30eb\u30ea\u30b9\u30c8\u3067\u3059\u3002\n\n$ tree -a -I node_modules\n.\n\u251c\u2500\u2500 .babelrc\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 actions\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 components\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Comment\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CommentBox\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 style.css\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CommentForm\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CommentList\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 global.css\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 containers\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 App\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 style.css\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 reducers\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 store\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 index.js\n\u251c\u2500\u2500 test\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 actions\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.test.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 components\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Comment\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.test.js\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 CommentBox\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 index.test.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 reducers\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 index.test.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 webpack.config.js\n\u2514\u2500\u2500 yarn.lock\n\nLet's hands-on\n\nSetup application\n\n\ngit clone \u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\nyarn \u30b3\u30de\u30f3\u30c9\u3067\u4f9d\u5b58\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n$ git clone https://github.com/ogom/react-comment-box-example.git\n$ cd react-comment-box-example\n$ git checkout package\n$ yarn\n\n\nJest\n\nJest \u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\n\nredux \u306e Writing Tests \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n\n\n$ yarn add --dev jest babel-jest\n\n\n\npackage.json \u306e scripts \u306b test \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\n\npackage.json\n   \"scripts\": {\n     \"start\": \"webpack-dev-server -d --progress --colors\",\n-    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n+    \"test\": \"jest\",\n+    \"test:watch\": \"npm test -- --watch\"\n   },\n\n\n\n\nyarn test \u30b3\u30de\u30f3\u30c9\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\n\u307e\u3060\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3044\u306a\u3044\u306e\u3067\u3001No tests found \u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\n\n$ yarn test\nNo tests found\n\n\n\nyarn run test:watch \u30b3\u30de\u30f3\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u307e\u3059\u3002\n\n$ yarn run test:watch\nNo tests found related to files changed since last commit.\nPress `a` to run all tests, or run Jest with `--watchAll`.\n\nWatch Usage\n \u203a Press a to run all tests.\n \u203a Press o to only run tests related to changed files.\n \u203a Press p to filter by a filename regex pattern.\n \u203a Press q to quit watch mode.\n \u203a Press Enter to trigger a test run.\n\n\u305d\u308c\u3067\u306f\u3001\u76e3\u8996\u3057\u305f\u72b6\u614b\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\nActions\n\n\ndescribe \u306b \u6982\u8981\u3084\u6a5f\u80fd \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002it \u306b\u306f \u671f\u5f85 \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n\n\nexpect \u306b \u89b3\u5bdf\u306e\u5bfe\u8c61 \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002toEqual \u306b \u671f\u5f85\u306e\u7d50\u679c \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n\n\nexpect \u306b Action \u3092\u8a18\u8ff0\u3057\u3066 toEqual \u306b Create \u3055\u308c\u308b type \u3084 payload \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n\ntest/app/actions/index.test.js\nimport * as actions from '../../../app/actions'\n\ndescribe('actions', () => {\n  it('should create an action to show the comments', () => {\n    const value = []\n    const expectedAction = {\n      type: 'show_comments',\n      payload: value\n    }\n    expect(\n      actions.showComments(value)\n    ).toEqual(\n      expectedAction\n    )\n  })\n\n  it('should create an action to add a comment', () => {\n    const value = {foo: '123', bar: '456'}\n    const expectedAction = {\n      type: 'add_comment',\n      payload: value\n    }\n    expect(\n      actions.addComment(value)\n    ).toEqual(\n      expectedAction\n    )\n  })\n})\n\n\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068 describe \u3068 it \u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002 \n\n PASS  test/app/actions/index.test.js\n  actions\n    \u2713 should create an action to show the comments (4ms)\n    \u2713 should create an action to add a comment (1ms)\n\n\nReducers\n\n\nexpect \u306b Reducer \u3092\u8a18\u8ff0\u3057\u3066 toEqual \u306b State \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\n\n\nAction \u306e\u5b9f\u884c\u3067 State \u306e\u5909\u66f4\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3001\u3053\u306e\u30c6\u30b9\u30c8\u306f\u5927\u5207\u3067\u3059\u3002 \n\n\n\n\ntest/app/reducers/index.test.js\nimport * as actions from '../../../app/actions'\nimport reducers from '../../../app/reducers'\n\ndescribe('reducers', () => {\n  let state\n  beforeEach(() => {\n    state = [undefined]\n  })\n\n  it('should return the initial state', () => {\n    expect(\n      reducers(undefined, {type: ''})\n    ).toEqual(\n      state\n    )\n  })\n\n  it('should return the show comments', () => {\n    const value = [{foo: '123', bar: '456'}]\n    state = value\n    expect(\n      reducers(undefined, actions.showComments(value))\n    ).toEqual(\n      state\n    )\n  })\n\n  it('should return the add a comment', () => {\n    const value = {foo: '123', bar: '456'}\n    state = [value]\n    expect(\n      reducers(undefined, actions.addComment(value))\n    ).toEqual(\n      state\n    )\n  })\n})\n\n\n\nComponents\n\nEnzyme \u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\n\nJest Tutorial - webpack \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n\n\n$ yarn add --dev enzyme react-addons-test-utils\n\n\nComment\n\n\nexpect \u306b Component \u3092\u8a18\u8ff0\u3057\u3066 toBe \u306b \u671f\u5f85\u5024 \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\n\ntest/app/components/Comment/index.test.js\nimport React from 'react'\nimport { shallow } from 'enzyme'\nimport Comment from '../../../../app/components/Comment'\n\ndescribe('components', () => {\n  describe('Comment', () => {\n    const wrapper = shallow(<Comment author={'foo'}>{'bar'}</Comment>)\n    it('should return author and comment', () => {\n      expect(wrapper.find('.commentAuthor').text()).toBe('foo')\n      expect(wrapper.find('span').render().find('p').text()).toBe('bar')\n    })\n  })\n})\n\n\n\nCommentBox\n\n\nCSS Modules \u306f identity-obj-proxy \u3067\u30e2\u30c3\u30af\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n$ yarn add --dev identity-obj-proxy\n\n\n\npackage.json \u306e jest \u306b moduleNameMapper \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\n\npackage.json\n+  \"jest\": {\n+    \"moduleNameMapper\": {\n+      \"\\\\.css$\": \"identity-obj-proxy\"\n+    }\n+  },\n\n\n\n\nCSS \u3092\u542b\u3080 Component \u306e\u30c6\u30b9\u30c8\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n\ntest/app/components/CommentBox/index.test.js\nimport React from 'react'\nimport { shallow } from 'enzyme'\nimport CommentBox from '../../../../app/components/CommentBox'\n\ndescribe('components', () => {\n  describe('CommentBox', () => {\n    const wrapper = shallow(<CommentBox/>)\n    it('should return the Comments', () => {\n      expect(wrapper.find('h1').text()).toBe('Comments')\n    })\n  })\n})\n\n\n\n\u6700\u5f8c\u306b yarn test \u3067\u5168\u3066 PASS \u3059\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n$ yarn test\n PASS  test/app/components/Comment/index.test.js\n PASS  test/app/components/CommentBox/index.test.js\n PASS  test/app/reducers/index.test.js\n PASS  test/app/actions/index.test.js\n\nTest Suites: 4 passed, 4 total\nTests:       7 passed, 7 total\nSnapshots:   0 total\nTime:        1.461s\nRan all test suites.\n\u2728  Done in 1.96s.\n\nCongrats!\n\n\u30c6\u30b9\u30c8\u306f\u8a2d\u8a08\u30d5\u30a7\u30fc\u30ba\u3084\u4fdd\u5b88\u30d5\u30a7\u30fc\u30ba\u3067\u3001\u5229\u7528\u306e\u65b9\u6cd5\u306b\u3088\u3063\u3066\u306f\u3068\u3066\u3082\u4fbf\u5229\u306a\u6a5f\u80fd\u3067\u3059\u3002\n\u6b21\u56de\u306f electron \u3067 native application \u306b\u3057\u307e\u3057\u3087\u3046\uff01\n\n[React](https://facebook.github.io/react/) \u3084 [Redux](http://redux.js.org/) \u306f [Jest](http://facebook.github.io/jest/) \u3068\u3044\u3046 JavaScript \u306e Testing Framework \u304c\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nActions, Reducers \u306e\u30c6\u30b9\u30c8\u306f\u3082\u3061\u308d\u3093\u3001Components \u306e\u30c6\u30b9\u30c8\u3082\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n[\u524d\u56de](http://qiita.com/ogomr/items/224a1355078ea1a809a5) \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b *\u30c6\u30b9\u30c8* \u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n## Learning\n\n* Jest \u3067 *Actions*, *Reducers* \u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3002\n* Enzyme \u3067 *Components* \u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3002\n\n## Environment\n\n* node: v6.9.1\n* npm: v4.0.3\n* yarn: v0.18.0\n\n## Comment Box Form\n\n* \u5b8c\u6210\u3055\u308c\u308b [Source Code](https://github.com/ogom/react-comment-box-example/tree/jest) \u306e\u30d5\u30a1\u30a4\u30eb\u30ea\u30b9\u30c8\u3067\u3059\u3002\n\n```bash\n$ tree -a -I node_modules\n.\n\u251c\u2500\u2500 .babelrc\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 actions\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 components\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Comment\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CommentBox\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 style.css\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CommentForm\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CommentList\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 global.css\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 containers\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 App\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 style.css\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 reducers\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 store\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 index.js\n\u251c\u2500\u2500 test\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 actions\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.test.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 components\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Comment\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.test.js\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 CommentBox\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 index.test.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 reducers\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 index.test.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 webpack.config.js\n\u2514\u2500\u2500 yarn.lock\n```\n\n*Let's hands-on*\n\n### Setup application\n\n* `git clone` \u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n* `yarn` \u30b3\u30de\u30f3\u30c9\u3067\u4f9d\u5b58\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ git clone https://github.com/ogom/react-comment-box-example.git\n$ cd react-comment-box-example\n$ git checkout package\n$ yarn\n```\n\n## Jest\n\n\n* Jest \u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\t* [redux \u306e Writing Tests](https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md) \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n```bash\n$ yarn add --dev jest babel-jest\n```\n\n* `package.json` \u306e `scripts` \u306b `test` \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\n```diff:package.json\n   \"scripts\": {\n     \"start\": \"webpack-dev-server -d --progress --colors\",\n-    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n+    \"test\": \"jest\",\n+    \"test:watch\": \"npm test -- --watch\"\n   },\n```\n\n* `yarn test` \u30b3\u30de\u30f3\u30c9\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\t* \u307e\u3060\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3044\u306a\u3044\u306e\u3067\u3001`No tests found` \u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```bash\n$ yarn test\nNo tests found\n```\n\n* `yarn run test:watch` \u30b3\u30de\u30f3\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u307e\u3059\u3002\n\n```bash\n$ yarn run test:watch\nNo tests found related to files changed since last commit.\nPress `a` to run all tests, or run Jest with `--watchAll`.\n\nWatch Usage\n \u203a Press a to run all tests.\n \u203a Press o to only run tests related to changed files.\n \u203a Press p to filter by a filename regex pattern.\n \u203a Press q to quit watch mode.\n \u203a Press Enter to trigger a test run.\n```\n\n\u305d\u308c\u3067\u306f\u3001\u76e3\u8996\u3057\u305f\u72b6\u614b\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n### Actions\n\n* `describe` \u306b *\u6982\u8981\u3084\u6a5f\u80fd* \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002`it` \u306b\u306f *\u671f\u5f85* \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\t* `expect` \u306b *\u89b3\u5bdf\u306e\u5bfe\u8c61* \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002`toEqual` \u306b *\u671f\u5f85\u306e\u7d50\u679c* \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n* `expect` \u306b **Action** \u3092\u8a18\u8ff0\u3057\u3066 `toEqual` \u306b *Create* \u3055\u308c\u308b `type` \u3084 `payload` \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```javascript:test/app/actions/index.test.js\nimport * as actions from '../../../app/actions'\n\ndescribe('actions', () => {\n  it('should create an action to show the comments', () => {\n    const value = []\n    const expectedAction = {\n      type: 'show_comments',\n      payload: value\n    }\n    expect(\n      actions.showComments(value)\n    ).toEqual(\n      expectedAction\n    )\n  })\n\n  it('should create an action to add a comment', () => {\n    const value = {foo: '123', bar: '456'}\n    const expectedAction = {\n      type: 'add_comment',\n      payload: value\n    }\n    expect(\n      actions.addComment(value)\n    ).toEqual(\n      expectedAction\n    )\n  })\n})\n```\n\n* \u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068 `describe` \u3068 `it` \u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002 \n\n```bash\n PASS  test/app/actions/index.test.js\n  actions\n    \u2713 should create an action to show the comments (4ms)\n    \u2713 should create an action to add a comment (1ms)\n```\n\n### Reducers\n\n* `expect` \u306b **Reducer** \u3092\u8a18\u8ff0\u3057\u3066 `toEqual` \u306b *State* \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\t* **Action** \u306e\u5b9f\u884c\u3067 *State* \u306e\u5909\u66f4\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3001\u3053\u306e\u30c6\u30b9\u30c8\u306f\u5927\u5207\u3067\u3059\u3002 \n\n```javascript:test/app/reducers/index.test.js\nimport * as actions from '../../../app/actions'\nimport reducers from '../../../app/reducers'\n\ndescribe('reducers', () => {\n  let state\n  beforeEach(() => {\n    state = [undefined]\n  })\n\n  it('should return the initial state', () => {\n    expect(\n      reducers(undefined, {type: ''})\n    ).toEqual(\n      state\n    )\n  })\n\n  it('should return the show comments', () => {\n    const value = [{foo: '123', bar: '456'}]\n    state = value\n    expect(\n      reducers(undefined, actions.showComments(value))\n    ).toEqual(\n      state\n    )\n  })\n\n  it('should return the add a comment', () => {\n    const value = {foo: '123', bar: '456'}\n    state = [value]\n    expect(\n      reducers(undefined, actions.addComment(value))\n    ).toEqual(\n      state\n    )\n  })\n})\n```\n\n### Components\n\n* Enzyme \u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\t* [Jest Tutorial - webpack](https://facebook.github.io/jest/docs/tutorial-webpack.html) \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n```bash\n$ yarn add --dev enzyme react-addons-test-utils\n```\n\n#### Comment\n\n* `expect` \u306b **Component** \u3092\u8a18\u8ff0\u3057\u3066 `toBe` \u306b *\u671f\u5f85\u5024* \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\n```javascript:test/app/components/Comment/index.test.js\nimport React from 'react'\nimport { shallow } from 'enzyme'\nimport Comment from '../../../../app/components/Comment'\n\ndescribe('components', () => {\n  describe('Comment', () => {\n    const wrapper = shallow(<Comment author={'foo'}>{'bar'}</Comment>)\n    it('should return author and comment', () => {\n      expect(wrapper.find('.commentAuthor').text()).toBe('foo')\n      expect(wrapper.find('span').render().find('p').text()).toBe('bar')\n    })\n  })\n})\n```\n\n#### CommentBox\n\n* *CSS Modules* \u306f `identity-obj-proxy` \u3067\u30e2\u30c3\u30af\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```bash\n$ yarn add --dev identity-obj-proxy\n```\n\n* `package.json` \u306e `jest` \u306b `moduleNameMapper` \u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002 \n\n```diff:package.json\n+  \"jest\": {\n+    \"moduleNameMapper\": {\n+      \"\\\\.css$\": \"identity-obj-proxy\"\n+    }\n+  },\n```\n\n* *CSS* \u3092\u542b\u3080 **Component** \u306e\u30c6\u30b9\u30c8\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n```javascript:test/app/components/CommentBox/index.test.js\nimport React from 'react'\nimport { shallow } from 'enzyme'\nimport CommentBox from '../../../../app/components/CommentBox'\n\ndescribe('components', () => {\n  describe('CommentBox', () => {\n    const wrapper = shallow(<CommentBox/>)\n    it('should return the Comments', () => {\n      expect(wrapper.find('h1').text()).toBe('Comments')\n    })\n  })\n})\n```\n\n* \u6700\u5f8c\u306b `yarn test` \u3067\u5168\u3066 *PASS* \u3059\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ yarn test\n PASS  test/app/components/Comment/index.test.js\n PASS  test/app/components/CommentBox/index.test.js\n PASS  test/app/reducers/index.test.js\n PASS  test/app/actions/index.test.js\n\nTest Suites: 4 passed, 4 total\nTests:       7 passed, 7 total\nSnapshots:   0 total\nTime:        1.461s\nRan all test suites.\n\u2728  Done in 1.96s.\n```\n\n*Congrats!*\n\n----\n\n\u30c6\u30b9\u30c8\u306f\u8a2d\u8a08\u30d5\u30a7\u30fc\u30ba\u3084\u4fdd\u5b88\u30d5\u30a7\u30fc\u30ba\u3067\u3001\u5229\u7528\u306e\u65b9\u6cd5\u306b\u3088\u3063\u3066\u306f\u3068\u3066\u3082\u4fbf\u5229\u306a\u6a5f\u80fd\u3067\u3059\u3002\n\u6b21\u56de\u306f [electron \u3067 native application](http://qiita.com/ogomr/items/681f5bffe9908e24469a) \u306b\u3057\u307e\u3057\u3087\u3046\uff01\u0010\n\n\n\n", "tags": ["Node.js", "reactjs", "jest"]}