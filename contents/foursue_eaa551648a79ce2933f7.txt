{"context": "\u4ed5\u4e8b\u3067Swagger\u306ayml\u3092\u3082\u3089\u3044\u307e\u3057\u305f\u3002\u521d\u3081\u3066\u3067\u3057\u305f\u304cSwagger\u3067\u7c21\u5358\u306b\u30e2\u30c3\u30afAPI\u30b5\u30fc\u30d0\u304c\u5efa\u3066\u3089\u308c\u3066QOL\u304c\u4e0a\u304c\u3063\u305f\u611f\u3058\u304c\u3057\u307e\u3057\u305f\u3002\n\nswagger-codegen\u3067\u30e2\u30c3\u30af\u30b5\u30fc\u30d0\u3092\u7acb\u3066\u308b\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u7c21\u5358\u3067\u3001brew\u4e00\u767a\u3067\u3059\u3002\u516c\u5f0f\u3067Docker\u3092\u4f7f\u3063\u3066\u30d3\u30eb\u30c9\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3057\u305f\u304c\u3001maven\u3067\u4e00\u3064\u4e00\u3064\u30d3\u30eb\u30c9\u3057\u3066\u3044\u304f\u305f\u3081\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u306e\u3067\u3001\u304a\u3059\u3059\u3081\u3057\u307e\u305b\u3093\u3002\n$ brew install swagger-codegen\n$ which swagger-codegen\n/usr/local/bin/swagger-codegen\n\n\u3082\u3057\u304b\u3057\u305f\u3089\u4e8b\u524d\u306bJava\u304c\u5fc5\u8981\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n$ brew cask install java\n\n\n\u4f7f\u3044\u65b9\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u4f7f\u3044\u307e\u3059\u3002\n$ swagger-codegen generate \\\n  -i swagger.json \\\n  -l nodejs-server \\\n  -o api-mock\n\n\n\n-i \u5143\u306b\u3059\u308bjson\n\n-l \u8a00\u8a9e\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u304b\u3001\u30b5\u30fc\u30d0\u3068\u304b\u3082\u3053\u3053\u3067\u8b58\u5225\uff09\n\n-o \u51fa\u529b\u5148\u306e\u30d5\u30a9\u30eb\u30c0\n\n\nAPI\u30b5\u30fc\u30d0\u8d77\u52d5\n$ cd api-mock\n$ npm install\n...\u7701\u7565...\n$ node .\nnotebook:api-mock foursue$ node .\nYour server is listening on port 8080 (http://localhost:8080)\nSwagger-ui is available on http://localhost:8080/docs\n\nnode\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u306a\u3044\u5834\u5408\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304b\u3089\u3001\u4e0a\u8a18\u306enpm install\u3057\u307e\u3057\u3087\u3046\u3002\n$ brew install node brew\n$ cat 'export PATH=$HOME/.nodebrew/current/bin:$PATH' >> ~/.bash_profile\n$ . ~/.bash_profile\n$ mkdir ~/.nodebrew/src\n$ nodebrew install-binary stable\n$ nodebrew use v6.2.2\n\n\ndocker-compose\u306bapi-mock\u5165\u308c\u3066\u958b\u767a\u3059\u308b\u3068\u697d\ndocker-compose.yml\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u203bweb\u306e\u65b9\u306f\u9069\u5f53\u3067\u3059\u3002\n\ndocker-compose.yml\napi:\n    image: node:latest\n    volumes:\n        - ./api-mock/:/usr/src/app\n    ports:\n        - \"8080:8080\"\n    working_dir: \"/usr/src/app\"\n    command: \"node .\"\nweb:\n    build: ./dockerfiles\n    volumes:\n        - ./:/var/www/\n    ports:\n        - \"80:80\"\n    links:\n        - api:api\n\n\nphp\u3060\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u52d5\u4f5c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n$ docker-compose up -d\n$ docker exec -ti ***_web_1 bash\n$ php -r \"var_dump(jsondecode(file_get_contents('http://api:8080/v1.0/api/***')));\"\n\n\u81ea\u524d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082Swagger\u4f7f\u3063\u3066\u307f\u3088\u3046\u304b\u306a\u3068\u601d\u308f\u305b\u308b\u304f\u3089\u3044\u306b\u306f\u6577\u5c45\u304c\u4f4e\u3044\u3002\u5b66\u7fd2\u30b3\u30b9\u30c8\u3082\u4f4e\u3044\u3002Swagger\u306f\u4f7f\u3048\u308b\u3002\n\u4ed5\u4e8b\u3067Swagger\u306ayml\u3092\u3082\u3089\u3044\u307e\u3057\u305f\u3002\u521d\u3081\u3066\u3067\u3057\u305f\u304cSwagger\u3067\u7c21\u5358\u306b\u30e2\u30c3\u30afAPI\u30b5\u30fc\u30d0\u304c\u5efa\u3066\u3089\u308c\u3066QOL\u304c\u4e0a\u304c\u3063\u305f\u611f\u3058\u304c\u3057\u307e\u3057\u305f\u3002\n\n## swagger-codegen\u3067\u30e2\u30c3\u30af\u30b5\u30fc\u30d0\u3092\u7acb\u3066\u308b\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u7c21\u5358\u3067\u3001brew\u4e00\u767a\u3067\u3059\u3002\u516c\u5f0f\u3067Docker\u3092\u4f7f\u3063\u3066\u30d3\u30eb\u30c9\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3057\u305f\u304c\u3001maven\u3067\u4e00\u3064\u4e00\u3064\u30d3\u30eb\u30c9\u3057\u3066\u3044\u304f\u305f\u3081\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u306e\u3067\u3001\u304a\u3059\u3059\u3081\u3057\u307e\u305b\u3093\u3002\n\n```bash\n$ brew install swagger-codegen\n$ which swagger-codegen\n/usr/local/bin/swagger-codegen\n```\n\n\u3082\u3057\u304b\u3057\u305f\u3089\u4e8b\u524d\u306bJava\u304c\u5fc5\u8981\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n\n```bash\n$ brew cask install java\n```\n\n### \u4f7f\u3044\u65b9\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u4f7f\u3044\u307e\u3059\u3002\n\n```bash\n$ swagger-codegen generate \\\n  -i swagger.json \\\n  -l nodejs-server \\\n  -o api-mock\n```\n\n- `-i` \u5143\u306b\u3059\u308bjson\n- `-l` \u8a00\u8a9e\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u304b\u3001\u30b5\u30fc\u30d0\u3068\u304b\u3082\u3053\u3053\u3067\u8b58\u5225\uff09\n- `-o` \u51fa\u529b\u5148\u306e\u30d5\u30a9\u30eb\u30c0\n\n### API\u30b5\u30fc\u30d0\u8d77\u52d5\n\n```bash\n$ cd api-mock\n$ npm install\n...\u7701\u7565...\n$ node .\nnotebook:api-mock foursue$ node .\nYour server is listening on port 8080 (http://localhost:8080)\nSwagger-ui is available on http://localhost:8080/docs\n```\n\nnode\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u306a\u3044\u5834\u5408\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304b\u3089\u3001\u4e0a\u8a18\u306e`npm install`\u3057\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ brew install node brew\n$ cat 'export PATH=$HOME/.nodebrew/current/bin:$PATH' >> ~/.bash_profile\n$ . ~/.bash_profile\n$ mkdir ~/.nodebrew/src\n$ nodebrew install-binary stable\n$ nodebrew use v6.2.2\n```\n\n## docker-compose\u306bapi-mock\u5165\u308c\u3066\u958b\u767a\u3059\u308b\u3068\u697d\n\ndocker-compose.yml\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u203bweb\u306e\u65b9\u306f\u9069\u5f53\u3067\u3059\u3002\n\n```docker-compose.yml\napi:\n    image: node:latest\n    volumes:\n        - ./api-mock/:/usr/src/app\n    ports:\n        - \"8080:8080\"\n    working_dir: \"/usr/src/app\"\n    command: \"node .\"\nweb:\n    build: ./dockerfiles\n    volumes:\n        - ./:/var/www/\n    ports:\n        - \"80:80\"\n    links:\n        - api:api\n```\n\nphp\u3060\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u52d5\u4f5c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ docker-compose up -d\n$ docker exec -ti ***_web_1 bash\n$ php -r \"var_dump(jsondecode(file_get_contents('http://api:8080/v1.0/api/***')));\"\n```\n\n\u81ea\u524d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082Swagger\u4f7f\u3063\u3066\u307f\u3088\u3046\u304b\u306a\u3068\u601d\u308f\u305b\u308b\u304f\u3089\u3044\u306b\u306f\u6577\u5c45\u304c\u4f4e\u3044\u3002\u5b66\u7fd2\u30b3\u30b9\u30c8\u3082\u4f4e\u3044\u3002Swagger\u306f\u4f7f\u3048\u308b\u3002\n", "tags": ["rest", "APIGateway", "Node.js", "docker"]}