{"tags": ["\u30b7\u30a7\u30eb\u82b8", "JavaScript", "VBScript", "Linux", "Windows"], "context": "\u30bf\u30a4\u30c8\u30eb\u306e\u901a\u308a\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3068\u81ea\u4f5c\u30b3\u30de\u30f3\u30c9\u3092\u99c6\u4f7f\u3057\u3066\u89e3\u3051\u308b\u3068\u3053\u308d\u307e\u3067\u89e3\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u3010\u554f\u984c\u3011\u7b2c23\u56de\u6885\u96e8\u3067\u30e2\u30ef\u30c3\u3068\u3057\u305f\u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a\n\u3068\u308a\u3042\u3048\u305a\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u306f bitsadmin \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u898b\u6163\u308c\u306a\u3044\u611f\u3058\u3067\u3059\u304c\u3001\u6a19\u6e96\u30b3\u30de\u30f3\u30c9\u3060\u305d\u3046\u3067\u3059\u3002\n\nQ0\nbitsadmin /rawreturn /transfer get http://www.data.jma.go.jp/fcd/yoho/typhoon/statistics/landing/landing.csv %CD%\\landing.csv\n\n\n\u843d\u3061\u3066\u304d\u305f\u30c7\u30fc\u30bf\u306f UTF-8 \u306e\u3088\u3046\u306a\u306e\u3067\u5909\u63db\u3057\u307e\u3059\u3002\n\u5909\u63db\u306b\u306f iconv \u3092\u4f7f\u3044\u307e\u3059\u3002\n\nQ0\niconv /f UTF-8 /o landing.sjis.csv landing.csv \n\n\niconv \u306f ADODB.Stream \u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\u51fa\u529b\u6587\u5b57\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f Shift_JIS \u3067\u6a19\u6e96\u51fa\u529b\u306b\u5410\u304d\u51fa\u3059\u306e\u3067\u3001\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u306f  iconv /f UTF-8 landing.csv > landing.sjis.csv \u3068\u7b49\u4fa1\u3067\u3059\u3002Shift_JIS \u4ee5\u5916\u3067\u51fa\u529b\u3059\u308b\u3068\u304d\u306f /o \u3067\u4e00\u65e6\u30d5\u30a1\u30a4\u30eb\u306b\u843d\u3068\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u8a71\u304c\u305d\u308c\u307e\u3057\u305f\u3002\u3067\u306f\u554f\u984c\u306b\u53d6\u308a\u639b\u304b\u308a\u307e\u3059\u3002\n\nQ1\n\u3044\u304d\u306a\u308a\u3067\u3059\u304c sed \u3067\u9ed2\u9b54\u8853\u3063\u307d\u3044\u3053\u3068\u3092\u3084\u308a\u307e\u3059\u300212\u6708\u307e\u3067\u306e\u30c7\u30fc\u30bf\u304c\u4e00\u884c\u306b\u4e26\u3093\u3067\u3044\u308b\u306e\u3067\u3001\u30ab\u30f3\u30de\u3092\u6539\u884c\u306b\u7f6e\u63db\u3057\u306a\u304c\u3089\u6708\u6bce\u306b\u5206\u5272\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nQ1\ntype landing.sjis.csv | ^\nsed /e \"1d\" | ^\nsed /e \"s/,/01 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$102 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$103 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$104 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$105 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$106 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$107 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$108 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$109 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$110 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$111 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$112 /\" ^\n/e \"s/,.*//\" > monthly_typhoon\n\n\n\nQ2\n\u3055\u3089\u306b\u95c7\u304c\u6df1\u307e\u308a\u307e\u3057\u305f\u3002\u3082\u306f\u3084\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\u81ea\u5206\u3067\u3082\u7406\u89e3\u3067\u304d\u307e\u305b\u3093\u3002\u5143\u30c7\u30fc\u30bf\u3068\u5909\u63db\u30c7\u30fc\u30bf\u306e\u7a81\u304d\u5408\u308f\u305b\u691c\u8a3c\u3092\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3067\u3059\u3002\u6700\u5f8c\u306e 3 \u884c\u3060\u3051\u89e3\u8aac\u3059\u308b\u3068\u3001 '\u5143\u30c7\u30fc\u30bf\u306e\u5408\u8a08\u5024'=='\u5909\u63db\u30c7\u30fc\u30bf\u306e\u5408\u8a08\u5024' \u3068\u3044\u3046\u5f0f\u3092\u4f5c\u308a\u3001 eval \u306b\u7a81\u3063\u8fbc\u3093\u3060\u7d50\u679c false \u3068\u306a\u3063\u305f\u884c\u3060\u3051\u51fa\u529b\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\uff08\u3053\u306e\u5834\u5408\u306f\u5168\u3066 true \u3068\u306a\u308a\u4f55\u3082\u51fa\u529b\u3055\u308c\u307e\u305b\u3093\uff09\u3002\n\nQ2\ntype monthly_typhoon | ^\nsed /e \"s/^(\\d{4})\\d{2}/$1/;$d\" | ^\nsed /e \"N;N;N;N;N;N;N;N;N;N;N;s/\\r\\n//g\" ^\n/e \"s/\\d{4} / /g\" ^\n/e \"s/ +/\\+/g\" ^\n/e \"s/\\+$/+0/\" | ^\nxargs /n 1 eval | ^\nsed /e \"1i hoge\" | ^\npaste landing.sjis.csv - | ^\nsed /e \"s/^.*,//\" ^\n/e \"s/^\\t/0\\t/\" | ^\nsed /e \"1d\" ^\n/e \"s/\\t/==/\" | ^\nxargs /n 1 eval | ^\nfindstr false\n\n\n\nQ3, Q4, Q5\n\u8ae6\u3081\u307e\u3057\u305f\u3002\n\nQ6\n\u7c21\u5358\u3067\u3057\u305f\u3002\n\nQ6\ntype hittakuri | ^\ncut /d , /f 1 | ^\nsort | ^\nuniq | ^\n(for /f \"usebackq\" %i in (`findstr .*`) do @( findstr %i hittakuri | wc /l | xargs /I @ echo %i @ ))\n\n\n\nQ7\n\u4f5c\u6210\u4e2d\u306e join \u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\u3068\u3053\u308d\u3067 wc \u304c\u30bf\u30d6\u3092\u51fa\u529b\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u4ed8\u3044\u305f\u3093\u3067\u3059\u304c\u3001\u3053\u306e\u6319\u52d5\u306f\u4e00\u822c\u7684\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002tr \u3067\u7c21\u5358\u306b\u7f6e\u63db\u3067\u304d\u308b\u306e\u3067\u6c17\u306b\u306a\u308a\u307e\u305b\u3093\u304c\u3002\n\nQ7\ntype hittakuri | ^\ncut /d , /f 1 | ^\nsort | uniq | ^\n(for /f \"usebackq\" %i in (`findstr .*`) do @( findstr %i hittakuri | wc /l | xargs /I @ echo %i @ )) | ^\ntr \"\\t\" \" \" | ^\njoin - population_h27sep | ^\nsed /e \"s/  .* /\\//\" /e \"s/^(.*) (.*)$/'$1 ' + \\($2\\)/\" | ^\nxargs /n 1 eval | ^\nmsort /k 2nr\n\n\n\nQ8\n\u3061\u3087\u308d\u3044\u3067\u3059\u306d\u3002\n\nQ8\ntype hittakuri | cut /d , /f 1,2,3,8,9,10 | sort | uniq /c | findstr /v \"^1\" | cut /d \" \" /f 2\n\n\n\nQ9\n\u8ae6\u3081\u307e\u3057\u305f\u3002\n\n\u304a\u308f\u308a\u306b\nwindows \u3067 awk \u306b\u76f8\u5f53\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u601d\u3044\u3064\u304b\u305a\u3001\u96c6\u8a08\u304c\u3046\u307e\u304f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002awk \u3060\u3068 hoge[$1] += 1 \u3067\u7c21\u5358\u306b\u96c6\u8a08\u3067\u304d\u308b\u306e\u3067\u9023\u60f3\u914d\u5217\u306f\u4fbf\u5229\u3067\u3059\u306d\u3002\u307e\u305f for \u3084 END \u304c\u4f7f\u3048\u308b\u306e\u3082 awk \u306e\u5f37\u307f\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u3084\u306f\u308a awk \u306f\u5049\u5927\u3002\n\u305d\u3046\u3044\u3048\u3070\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089 powershell \u3092\u547c\u3073\u51fa\u305b\u308b\u3053\u3068\u306b\u4eca\u6c17\u3065\u3044\u305f\u306e\u3067\u3059\u304c\u3082\u3057\u304b\u3057\u3066\u3002\u3002\u3002\n\n\u30bf\u30a4\u30c8\u30eb\u306e\u901a\u308a\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3068\u81ea\u4f5c\u30b3\u30de\u30f3\u30c9\u3092\u99c6\u4f7f\u3057\u3066\u89e3\u3051\u308b\u3068\u3053\u308d\u307e\u3067\u89e3\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n[\u3010\u554f\u984c\u3011\u7b2c23\u56de\u6885\u96e8\u3067\u30e2\u30ef\u30c3\u3068\u3057\u305f\u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a](https://blog.ueda.asia/?p=8465)\n\n\u3068\u308a\u3042\u3048\u305a\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u306f `bitsadmin` \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u898b\u6163\u308c\u306a\u3044\u611f\u3058\u3067\u3059\u304c\u3001\u6a19\u6e96\u30b3\u30de\u30f3\u30c9\u3060\u305d\u3046\u3067\u3059\u3002\n\n```bat:Q0\nbitsadmin /rawreturn /transfer get http://www.data.jma.go.jp/fcd/yoho/typhoon/statistics/landing/landing.csv %CD%\\landing.csv\n```\n\n\u843d\u3061\u3066\u304d\u305f\u30c7\u30fc\u30bf\u306f UTF-8 \u306e\u3088\u3046\u306a\u306e\u3067\u5909\u63db\u3057\u307e\u3059\u3002\n\u5909\u63db\u306b\u306f [`iconv`](https://github.com/asterisk9101/wincmd/blob/master/scripts/iconv.js) \u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```bat:Q0\niconv /f UTF-8 /o landing.sjis.csv landing.csv \n```\n\n`iconv` \u306f `ADODB.Stream` \u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\u51fa\u529b\u6587\u5b57\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f Shift_JIS \u3067\u6a19\u6e96\u51fa\u529b\u306b\u5410\u304d\u51fa\u3059\u306e\u3067\u3001\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u306f  `iconv /f UTF-8 landing.csv > landing.sjis.csv` \u3068\u7b49\u4fa1\u3067\u3059\u3002Shift_JIS \u4ee5\u5916\u3067\u51fa\u529b\u3059\u308b\u3068\u304d\u306f `/o` \u3067\u4e00\u65e6\u30d5\u30a1\u30a4\u30eb\u306b\u843d\u3068\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u8a71\u304c\u305d\u308c\u307e\u3057\u305f\u3002\u3067\u306f\u554f\u984c\u306b\u53d6\u308a\u639b\u304b\u308a\u307e\u3059\u3002\n\n# Q1\n\n\u3044\u304d\u306a\u308a\u3067\u3059\u304c [`sed`](https://github.com/asterisk9101/wincmd/blob/master/scripts/sed.js) \u3067\u9ed2\u9b54\u8853\u3063\u307d\u3044\u3053\u3068\u3092\u3084\u308a\u307e\u3059\u300212\u6708\u307e\u3067\u306e\u30c7\u30fc\u30bf\u304c\u4e00\u884c\u306b\u4e26\u3093\u3067\u3044\u308b\u306e\u3067\u3001\u30ab\u30f3\u30de\u3092\u6539\u884c\u306b\u7f6e\u63db\u3057\u306a\u304c\u3089\u6708\u6bce\u306b\u5206\u5272\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n```bat:Q1\ntype landing.sjis.csv | ^\nsed /e \"1d\" | ^\nsed /e \"s/,/01 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$102 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$103 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$104 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$105 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$106 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$107 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$108 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$109 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$110 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$111 /\" ^\n/e \"s/(\\d{4})(.*?),/$1$2\\n$112 /\" ^\n/e \"s/,.*//\" > monthly_typhoon\n```\n\n# Q2\n\n\u3055\u3089\u306b\u95c7\u304c\u6df1\u307e\u308a\u307e\u3057\u305f\u3002\u3082\u306f\u3084\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\u81ea\u5206\u3067\u3082\u7406\u89e3\u3067\u304d\u307e\u305b\u3093\u3002\u5143\u30c7\u30fc\u30bf\u3068\u5909\u63db\u30c7\u30fc\u30bf\u306e\u7a81\u304d\u5408\u308f\u305b\u691c\u8a3c\u3092\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3067\u3059\u3002\u6700\u5f8c\u306e 3 \u884c\u3060\u3051\u89e3\u8aac\u3059\u308b\u3068\u3001 '\u5143\u30c7\u30fc\u30bf\u306e\u5408\u8a08\u5024'=='\u5909\u63db\u30c7\u30fc\u30bf\u306e\u5408\u8a08\u5024' \u3068\u3044\u3046\u5f0f\u3092\u4f5c\u308a\u3001 `eval` \u306b\u7a81\u3063\u8fbc\u3093\u3060\u7d50\u679c `false` \u3068\u306a\u3063\u305f\u884c\u3060\u3051\u51fa\u529b\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\uff08\u3053\u306e\u5834\u5408\u306f\u5168\u3066 true \u3068\u306a\u308a\u4f55\u3082\u51fa\u529b\u3055\u308c\u307e\u305b\u3093\uff09\u3002\n\n```bat:Q2\ntype monthly_typhoon | ^\nsed /e \"s/^(\\d{4})\\d{2}/$1/;$d\" | ^\nsed /e \"N;N;N;N;N;N;N;N;N;N;N;s/\\r\\n//g\" ^\n/e \"s/\\d{4} / /g\" ^\n/e \"s/ +/\\+/g\" ^\n/e \"s/\\+$/+0/\" | ^\nxargs /n 1 eval | ^\nsed /e \"1i hoge\" | ^\npaste landing.sjis.csv - | ^\nsed /e \"s/^.*,//\" ^\n/e \"s/^\\t/0\\t/\" | ^\nsed /e \"1d\" ^\n/e \"s/\\t/==/\" | ^\nxargs /n 1 eval | ^\nfindstr false\n```\n\n# Q3, Q4, Q5\n\n\u8ae6\u3081\u307e\u3057\u305f\u3002\n\n# Q6\n\n\u7c21\u5358\u3067\u3057\u305f\u3002\n\n```bat:Q6\ntype hittakuri | ^\ncut /d , /f 1 | ^\nsort | ^\nuniq | ^\n(for /f \"usebackq\" %i in (`findstr .*`) do @( findstr %i hittakuri | wc /l | xargs /I @ echo %i @ ))\n```\n\n# Q7\n\n\u4f5c\u6210\u4e2d\u306e `join` \u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\u3068\u3053\u308d\u3067 `wc` \u304c\u30bf\u30d6\u3092\u51fa\u529b\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u4ed8\u3044\u305f\u3093\u3067\u3059\u304c\u3001\u3053\u306e\u6319\u52d5\u306f\u4e00\u822c\u7684\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002`tr` \u3067\u7c21\u5358\u306b\u7f6e\u63db\u3067\u304d\u308b\u306e\u3067\u6c17\u306b\u306a\u308a\u307e\u305b\u3093\u304c\u3002\n\n```bat:Q7\ntype hittakuri | ^\ncut /d , /f 1 | ^\nsort | uniq | ^\n(for /f \"usebackq\" %i in (`findstr .*`) do @( findstr %i hittakuri | wc /l | xargs /I @ echo %i @ )) | ^\ntr \"\\t\" \" \" | ^\njoin - population_h27sep | ^\nsed /e \"s/  .* /\\//\" /e \"s/^(.*) (.*)$/'$1 ' + \\($2\\)/\" | ^\nxargs /n 1 eval | ^\nmsort /k 2nr\n```\n\n# Q8\n\n\u3061\u3087\u308d\u3044\u3067\u3059\u306d\u3002\n\n```bat:Q8\ntype hittakuri | cut /d , /f 1,2,3,8,9,10 | sort | uniq /c | findstr /v \"^1\" | cut /d \" \" /f 2\n```\n\n# Q9\n\n\u8ae6\u3081\u307e\u3057\u305f\u3002\n\n\n# \u304a\u308f\u308a\u306b\n\nwindows \u3067 `awk` \u306b\u76f8\u5f53\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u601d\u3044\u3064\u304b\u305a\u3001\u96c6\u8a08\u304c\u3046\u307e\u304f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002`awk` \u3060\u3068 `hoge[$1] += 1` \u3067\u7c21\u5358\u306b\u96c6\u8a08\u3067\u304d\u308b\u306e\u3067\u9023\u60f3\u914d\u5217\u306f\u4fbf\u5229\u3067\u3059\u306d\u3002\u307e\u305f `for` \u3084 `END` \u304c\u4f7f\u3048\u308b\u306e\u3082 `awk` \u306e\u5f37\u307f\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u3084\u306f\u308a `awk` \u306f\u5049\u5927\u3002\n\n\u305d\u3046\u3044\u3048\u3070\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089 powershell \u3092\u547c\u3073\u51fa\u305b\u308b\u3053\u3068\u306b\u4eca\u6c17\u3065\u3044\u305f\u306e\u3067\u3059\u304c\u3082\u3057\u304b\u3057\u3066\u3002\u3002\u3002\n"}