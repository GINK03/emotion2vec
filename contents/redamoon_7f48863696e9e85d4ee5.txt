{"context": " More than 1 year has passed since last update.AWS\u306eMarketplace\u306b\u3042\u308bbitnami\u306eAMI\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u30db\u30b9\u30c8\u540d\u304c\u3001ec2-XX-XX-XX-XX.ap-northeast-1.compute.amazonaws.com\u306b\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u5909\u66f4\u3059\u308b\u624b\u9806\u306e\u30e1\u30e2\u306b\u306a\u308a\u307e\u3059\u3002\n\uff08\u3088\u304f\u308f\u304b\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\u3001\u5fd8\u308c\u306a\u3044\u305f\u3081\u306e\u30e1\u30e2\uff09\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u304b\u3089\u884c\u3044\u307e\u3057\u305f\u3002\n\nGitLab\u3092\u5c0e\u5165\u3057\u3088\u3046\u3068\u3057\u3066\u307f\u305f\n\n\n\u8a2d\u5b9a\u624b\u9806\n\n\u30db\u30b9\u30c8\u540d\u306e\u5909\u66f4\uff08yml\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\uff09\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\uff08020_update_ip\u306eif\u6587\u3092\u5909\u66f4\uff09\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\nGitlab\u306e\u518d\u8d77\u52d5\n\n\n\u30db\u30b9\u30c8\u540d\u306e\u5909\u66f4\uff08yml\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\uff09\nvi\u3067\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\nhost: ec2-XX-XX-XX-XX.ap-northeast-1.compute.amazonaws.com\u306e\u90e8\u5206\u3092\u30c9\u30e1\u30a4\u30f3\u306b\u5909\u66f4\n# vi /opt/bitnami/apps/gitlab/htdocs/config/gitlab.yml\n\n  ## GitLab settings\n  gitlab:\n    ## Web server settings (note: host is the FQDN, do not include http://)\n    host: ec2-XX-XX-XX-XX.ap-northeast-1.compute.amazonaws.com\n    port: 80 # Set to 443 if using HTTPS, see installation.md#using-https for additional HTTPS configuration details\n    https: false # Set to true if using HTTPS, see installation.md#using-https for additional HTTPS configuration details\n\ngit\u30e6\u30fc\u30b6\u5074\u306egit-shell\u306econfig.yml\u5909\u66f4\n\uff08\u306a\u305c\u304b\u3001\u3053\u308c\u3092\u30c9\u30e1\u30a4\u30f3\u306b\u5909\u66f4\u3057\u305f\u3089Gitlab\u306e\u5404\u30e6\u30fc\u30b6\u3067\u8a2d\u5b9a\u3057\u305fSSH\u304c\u8aad\u307f\u8fbc\u307f\u3067\u304d\u305f\u3002\u3002\uff09\nsu git\ncd /home/git/gitlab-shell\nvi config.yml\n\nconfig\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u305f\u3089\u3001gitlab_url:\u90e8\u5206\u306eEC2\u30c9\u30e1\u30a4\u30f3\u3092\u5404\u81ea\u306e\u30c9\u30e1\u30a4\u30f3\u306b\u5909\u66f4\u3059\u308b\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\uff08020_update_ip\u306eif\u6587\u3092\u5909\u66f4\uff09\nvi\u3067\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u306eif\u6587\u3092\u7de8\u96c6\n# vi /opt/bitnami/var/init/post-start/020_update_ip\n\nif [ \"x$1\" != \"x\" ]; then\n    PUBLIC_IP=$1\nelif [ -n $GITLABHOST ]; then\n    PUBLIC_IP=$GITLABHOST\nelse\n    PUBLIC_IP=`get_server_domain`\nfi\n\n\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\nvi\u3067\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u3001\u6700\u5f8c\u306e\u884c\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3059\u308b\n# vi /opt/bitnami/scripts/setenv.sh\n\nGITLABHOST=\"gitlab.your.hostname\"\nexport GITLABHOST\n\n\nGitlab\u306e\u518d\u8d77\u52d5\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u518d\u8d77\u52d5\u3092\u884c\u306a\u3046\n# /opt/bitnami/ctlscript.sh restart\n\nAWS\u306eMarketplace\u306b\b\u3042\u308bbitnami\u306eAMI\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u30db\u30b9\u30c8\u540d\u304c\u3001ec2-XX-XX-XX-XX.ap-northeast-1.compute.amazonaws.com\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u3001\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u5909\u66f4\u3059\u308b\u624b\u9806\u306e\u30e1\u30e2\u306b\u306a\u308a\u307e\u3059\u3002\n\uff08\u3088\u304f\u308f\u304b\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\u3001\u5fd8\u308c\u306a\u3044\u305f\u3081\u306e\u30e1\u30e2\uff09\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u304b\u3089\u884c\u3044\u307e\u3057\u305f\u3002\n\n* [GitLab\u3092\u5c0e\u5165\u3057\u3088\u3046\u3068\u3057\u3066\u307f\u305f](http://hack.sonix.asia/archives/tag/gitlab)\n\n# \u8a2d\u5b9a\u624b\u9806\n\n* \u30db\u30b9\u30c8\u540d\u306e\u5909\u66f4\uff08yml\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\uff09\n* \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\uff08020_update_ip\u306eif\u6587\u3092\u5909\u66f4\uff09\n* \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\n* Gitlab\u306e\u518d\u8d77\u52d5\n\n## \u30db\u30b9\u30c8\u540d\u306e\u5909\u66f4\uff08yml\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\uff09\n\nvi\u3067\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\nhost: ec2-XX-XX-XX-XX.ap-northeast-1.compute.amazonaws.com\u306e\u90e8\u5206\u3092\u30c9\u30e1\u30a4\u30f3\u306b\u5909\u66f4\n\n```\n# vi /opt/bitnami/apps/gitlab/htdocs/config/gitlab.yml\n\n  ## GitLab settings\n  gitlab:\n    ## Web server settings (note: host is the FQDN, do not include http://)\n    host: ec2-XX-XX-XX-XX.ap-northeast-1.compute.amazonaws.com\n    port: 80 # Set to 443 if using HTTPS, see installation.md#using-https for additional HTTPS configuration details\n    https: false # Set to true if using HTTPS, see installation.md#using-https for additional HTTPS configuration details\n```\n\ngit\u30e6\u30fc\u30b6\u5074\u306egit-shell\u306econfig.yml\u5909\u66f4\n\uff08\u306a\u305c\u304b\u3001\u3053\u308c\u3092\u30c9\u30e1\u30a4\u30f3\u306b\u5909\u66f4\u3057\u305f\u3089Gitlab\u306e\u5404\u30e6\u30fc\u30b6\u3067\u8a2d\u5b9a\u3057\u305fSSH\u304c\u8aad\u307f\u8fbc\u307f\u3067\u304d\u305f\u3002\u3002\uff09\n\n```\nsu git\ncd /home/git/gitlab-shell\nvi config.yml\n```\n\nconfig\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u305f\u3089\u3001gitlab_url:\u90e8\u5206\u306eEC2\u30c9\u30e1\u30a4\u30f3\u3092\u5404\u81ea\u306e\u30c9\u30e1\u30a4\u30f3\u306b\u5909\u66f4\u3059\u308b\n\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\uff08020_update_ip\u306eif\u6587\u3092\u5909\u66f4\uff09\n\nvi\u3067\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u306eif\u6587\u3092\u7de8\u96c6\n\n```\n# vi /opt/bitnami/var/init/post-start/020_update_ip\n\nif [ \"x$1\" != \"x\" ]; then\n    PUBLIC_IP=$1\nelif [ -n $GITLABHOST ]; then\n    PUBLIC_IP=$GITLABHOST\nelse\n    PUBLIC_IP=`get_server_domain`\nfi\n```\n\n## \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\n\nvi\u3067\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u3001\u6700\u5f8c\u306e\u884c\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3059\u308b\n\n```\n# vi /opt/bitnami/scripts/setenv.sh\n\nGITLABHOST=\"gitlab.your.hostname\"\nexport GITLABHOST\n```\n\n## Gitlab\u306e\u518d\u8d77\u52d5\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u518d\u8d77\u52d5\u3092\u884c\u306a\u3046\n\n```\n# /opt/bitnami/ctlscript.sh restart\n```\n", "tags": ["AWS", "GitLab"]}