{"tags": ["Node.js", "mecab", "mecab-ipadic-neologd"], "context": "Node.js \u7528\u30e2\u30b8\u30e5\u30fc\u30ebmecab-async\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u624b\u8efd\u306b\u5f62\u614b\u7d20\u89e3\u6790\u3092\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u89e3\u6790\u7d50\u679c\u304b\u3089\u54c1\u8a5e\u306e\u62bd\u51fa\u3092\u3059\u308b\u3053\u3068\u3067\u3001Bot\u306e\u30aa\u30a6\u30e0\u8fd4\u3057\u304c\u81ea\u7136\u306b\u306a\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u74b0\u5883\n\nMac OSX10.11.5\nNode.js v6.2.0\nmecab 0.996\nmecab-ipadic-neologd\u30002.0\n\n\n\u30c1\u30e3\u30c3\u30c8\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\nexpress\u3068socket.io\u3092\u5229\u7528\u3057\u3066\u307e\u305a\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u6295\u7a3f\u3092\u30aa\u30a6\u30e0\u8fd4\u3057\u3055\u305b\u3066\u307f\u307e\u3059\u3002\n\n\npackage.json\n{\n  \"dependencies\": {\n    \"socket.io\": \"^1.4.6\",\n    \"express\": \"^4.13.4\"\n  }\n\n\n\n\napp.js\nvar app = require('express')();\nvar http = require('http').Server(app);\nvar io = require('socket.io')(http);\n\napp.get('/', function(req, res){\n  res.sendFile(__dirname + '/index.html');\n});\n\nio.on('connection', function(socket){\n   socket.on('chat message', function(msg){\n\n  \u3000var your_reply = '\u3042\u306a\u305f > ' + msg;\n  \u3000io.emit('chat message', your_reply);\n    var bot_reply = '\u30dd\u30f3\u30c7\u30a3 > ' +  msg + '\u3060\u30dc\u30c3\u30c8';\n    io.emit('chat message', bot_reply);\n\n});\n});\n\nhttp.listen(process.env.PORT || 3000, function(){\n  console.log('listening on *:3000');\n});\n\n\n\n\nindex.html\n<!doctype html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>pondy</title>\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7\" crossorigin=\"anonymous\">\n    <style>\n      * { margin: 0; padding: 0; box-sizing: border-box; }\n      body { font: 13px Helvetica, Arial; }\n      #title { background: #fff; padding: 10px; position: fixed; top: 0; width: 100%; }\n      form { background: #ddd; padding: 20px 10px 10px; position: fixed; bottom: 0; width: 100%; }\n      #messages { list-style-type: none; margin-top: 6em;}\n      #messages li { padding: 5px 10px; }\n      #messages li:nth-child(odd) { background: #eee; }\n      #footer {margin-top:20px;}\n    </style>\n  </head>\n  <body>\n    <h1 id=\"title\">pondy</h1>\n    <ul id=\"messages\"></ul>\n    <form action=\"\">\n\n      <div class=\"form-group\">\n      <input id=\"m\" autocomplete=\"off\"\u3000type=\"text\" class=\"form-control\" placeholder=\"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\">\n      </div>\n      <button type=\"submit\" value=\"talk\"  class=\"btn btn-default\">\u9001\u4fe1</button>\n      <br>\n      <p id=\"footer\" class=\"small\">\u00a9 2016 PonDad All Right Reserved.</p>\n    </form>\n\n    <script src=\"https://cdn.socket.io/socket.io-1.2.0.js\"></script>\n    <script src=\"http://code.jquery.com/jquery-1.11.1.js\"></script>\n    <script>\n      var socket = io();\n      $('form').submit(function(){\n        socket.emit('chat message', $('#m').val());\n        $('#m').val('');\n        return false;\n      });\n      socket.on('chat message', function(msg){\n        $('#messages').append($('<li>').text(msg));\n      });\n    </script>\n\n  </body>\n</html>\n\n\n\n\nmecab-async \u3067\u54c1\u8a5e\u3092\u62bd\u51fa\u3059\u308b\nMeCab\u8f9e\u66f8\u306fmecab-ipadic-NEologd\u3092\u4f7f\u308f\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u300c\u3053\u3093\u306b\u3061\u306f\u3001\u30b5\u30df\u30e5\u30a8\u30ebL\u30b8\u30e3\u30af\u30bd\u30f3\u3067\u3059\u3002\u300d\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3059\u308b\u3068\u3053\u306e\u69d8\u306a\u7d50\u679c\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\n\nterminal\n$ node app.js\n[ { kanji: '\u3053\u3093\u306b\u3061\u306f',\n    lexical: '\u611f\u52d5\u8a5e',\n    compound: '*',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u3053\u3093\u306b\u3061\u306f',\n    reading: '\u30b3\u30f3\u30cb\u30c1\u30cf',\n    pronunciation: '\u30b3\u30f3\u30cb\u30c1\u30ef' },\n  { kanji: '\u3001',\n    lexical: '\u8a18\u53f7',\n    compound: '\u8aad\u70b9',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u3001',\n    reading: '\u3001',\n    pronunciation: '\u3001' },\n  { kanji: '\u30b5\u30df\u30e5\u30a8\u30ebL\u30b8\u30e3\u30af\u30bd\u30f3',\n    lexical: '\u540d\u8a5e',\n    compound: '\u56fa\u6709\u540d\u8a5e',\n    compound2: '\u4e00\u822c',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u30b5\u30df\u30e5\u30a8\u30eb\u30fbL\u30fb\u30b8\u30e3\u30af\u30bd\u30f3',\n    reading: '\u30b5\u30df\u30e5\u30a8\u30eb\u30a8\u30eb\u30b8\u30e3\u30af\u30bd\u30f3',\n    pronunciation: '\u30b5\u30df\u30e5\u30a8\u30eb\u30a8\u30eb\u30b8\u30e3\u30af\u30bd\u30f3' },\n  { kanji: '\u3067\u3059',\n    lexical: '\u52a9\u52d5\u8a5e',\n    compound: '*',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '\u7279\u6b8a\u30fb\u30c7\u30b9',\n    inflection: '\u57fa\u672c\u5f62',\n    original: '\u3067\u3059',\n    reading: '\u30c7\u30b9',\n    pronunciation: '\u30c7\u30b9' },\n  { kanji: '\u3002',\n    lexical: '\u8a18\u53f7',\n    compound: '\u53e5\u70b9',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u3002',\n    reading: '\u3002',\n    pronunciation: '\u3002' } ]\n\n\nmecab-async\u3092\u5229\u7528\u3057\u3066\u611f\u52d5\u8a5e\u3068\u540d\u8a5e\u3092\u62bd\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n\napp.js\nvar MeCab = new require('mecab-async')\nvar mecab = new MeCab();\n    MeCab.command = \"mecab -d /usr/local/lib/mecab/dic/mecab-ipadic-neologd\"\n    var text = '\u3053\u3093\u306b\u3061\u306f\u3001\u30b5\u30df\u30e5\u30a8\u30ebL\u30b8\u30e3\u30af\u30bd\u30f3\u3067\u3059\u3002'\n    //\u6ce8\uff1a\u30d1\u30fc\u30b9\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3059\u308b\u6642 \"MeCab.~\"\u3068\u5927\u6587\u5b57\u306b\u3057\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u307f\u305f\u3044\u3067\u3059\n    MeCab.parseFormat(text, function(err, morphs) {\n        if (err) throw err;\n        morphs.map(function(morph) {\n        if (morph.lexical === '\u611f\u52d5\u8a5e') {\n          console.log(morph.lexical + ' : ' + morph.original);\n        }\n        if (morph.lexical === '\u540d\u8a5e') {\n          console.log(morph.lexical + ' : ' +morph.original);\n        }\n    });\n    });\n\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\n\nterminal\n$ node app.js\n\u611f\u52d5\u8a5e : \u3053\u3093\u306b\u3061\u306f\n\u540d\u8a5e : \u30b5\u30df\u30e5\u30a8\u30eb\u30fbL\u30fb\u30b8\u30e3\u30af\u30bd\u30f3\n\n\n\u4eca\u56de\u306f\u8f9e\u66f8\u3092\u751f\u6210\u3059\u308b\u306e\u306b\u9069\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3001map\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068\u30ad\u30fc\u3092\u5229\u7528\u3057\u3066\u4efb\u610f\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u89e3\u6790\u7d50\u679c\uff08\u3053\u3053\u3067\u306fmorphs\uff09\u306e\u914d\u5217\u306e\u4e2d\u304b\u3089\u3001\u30ad\u30fclexical\u3092\u6307\u5b9a\u3059\u308b\u4e8b\u3067\u6307\u5b9a\u3057\u305f\u54c1\u8a5e\u306e\u5f62\u614b\u7d20\u3092\u62bd\u51fa\u3059\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\u3055\u3066\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30c1\u30e3\u30c3\u30c8\u6295\u7a3f\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u307f\u308b\u4e8b\u306b\u3057\u307e\u3059\u3002\n\n\u54c1\u8a5e\u62bd\u51fa\u3057\u3066Bot\u306b\u8fd4\u4fe1\u3055\u305b\u3066\u307f\u308b\n\u4eca\u56de\u306f\u300c\u611f\u52d5\u8a5e\u300d\u3068\u300c\u56fa\u6709\u540d\u8a5e\u300d\u3001\u300c\u81ea\u7acb\u5f62\u5bb9\u8a5e\u300d\u3092\u62bd\u51fa\u3057\u3066Bot\u306e\u30aa\u30a6\u30e0\u8fd4\u3057\u306b\u5909\u5316\u3092\u3064\u3051\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\napp.js\nvar app = require('express')();\nvar http = require('http').Server(app);\nvar io = require('socket.io')(http);\nvar MeCab = new require('mecab-async')\nvar mecab = new MeCab();\nvar array = [];\nvar reply = [];\n\napp.get('/', function(req, res){\n  res.sendFile(__dirname + '/index.html');\n});\n\nio.on('connection', function(socket){\n   socket.on('chat message', function(msg){\n\n  \u3000var your_reply = '\u3042\u306a\u305f > ' + msg;\n  \u3000io.emit('chat message', your_reply);\n\n  \u3000MeCab.command = \"mecab -d /usr/local/lib/mecab/dic/mecab-ipadic-neologd\"\n    MeCab.parseFormat(msg, function(err, morphs) {\n        if (err) throw err;\n        morphs.map(function(morph) {\n        if (morph.lexical === '\u611f\u52d5\u8a5e') {\n          array.push(morph.original);\n          reply = '!'\n          console.log(array);\n        }\n        if (morph.compound === '\u56fa\u6709\u540d\u8a5e') {\n          array.push(morph.original);\n          reply = '\u3063\u3066\u3044\u3044\u3088\u306d\u3002'\n          console.log(array);\n        }\n        if (morph.lexical === '\u5f62\u5bb9\u8a5e' | morph.compound === '\u81ea\u7acb') {\n          array.push(morph.original);\n          console.log(array);\n          reply = '\u3063\u3066\u697d\u3057\u305d\u3046\u3060\u306d\u3002'\n        }\n    });\n    if(array.length <= 0){\n      bot_reply = '\u30dd\u30f3\u30c7\u30a3 > \u305d\u3046\u306a\u3093\u3060\u3002' ;\n    }else{\n      bot_reply = '\u30dd\u30f3\u30c7\u30a3 > ' +  array[Math.floor(Math.random() * array.length)] + reply;\n    }\n    io.emit('chat message', bot_reply);\n    array = [];\n    reply = [];\n    });\n});\n});\n\nhttp.listen(process.env.PORT || 3000, function(){\n  console.log('listening on *:3000');\n});\n\n\n\n\u30b7\u30f3\u30d7\u30eb\u30c1\u30e3\u30c3\u30c8\u306eapp.js\u3092\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u78ba\u8a8d\u3059\u308b\u3068\u6295\u7a3f\u304b\u3089\u6307\u5b9a\u3057\u305f\u54c1\u8a5e\uff08\u3053\u3053\u3067\u306f\u300c\u611f\u52d5\u8a5e\u300d\u30fb\u300c\u56fa\u6709\u540d\u8a5e\u300d\u30fb\u300c\u81ea\u7acb\u5f62\u5bb9\u8a5e\u300d\uff09\u3092\u62bd\u51fa\u3057\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u8907\u6570\u540c\u3058\u54c1\u8a5e\u304c\u542b\u307e\u308c\u308b\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u62bd\u51fa\u3057\u305f\u5f62\u614b\u7d20\u3092push\u3092\u5229\u7528\u3057\u3066\u5909\u6570array\u306b\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u3002\n\nterminal\n$ node app.js\nlistening on *:3000\n[ '\u3053\u3093\u306b\u3061\u306f' ]\n[ '\u5996\u602a\u30a6\u30a9\u30c3\u30c1' ]\n[ '\u5996\u602a\u30a6\u30a9\u30c3\u30c1', '\u30a2\u30a4\u30ab\u30c4!' ]\n[ '\u30b8\u30d0\u30cb\u30e3\u30f3' ]\n[ '\u304b\u308f\u3044\u3044\u3088' ]\n[ '\u6b32\u3057\u3044' ]\n[ '\u3046\u3093' ]\n[ '\u3046\u3093', '\u3055\u3088\u3046\u306a\u3089' ]\n[ '\u3055\u3088\u306a\u3089' ]\n\n\n\n\u4eca\u56de\u306farray\u306b\u683c\u7d0d\u3057\u305f\u914d\u5217\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u8fd4\u4fe1\u3055\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\u300c\u611f\u52d5\u8a5e\u300d\uff08\u4f8b\uff1a\u3053\u3093\u306b\u3061\u306f\uff09\u3092\u542b\u3080\u969b\u306f\u611f\u52d5\u8a5e\u3092\u8fd4\u4fe1\u3002(\u4f8b\uff1a\u300c\u30dd\u30f3\u30c7\u30a3\u3000\u3053\u3093\u306b\u3061\u306f\u300d\u2192\u300c\u3053\u3093\u306b\u3061\u306f\uff01\u300d)\n\u300c\u56fa\u6709\u540d\u8a5e\u300d\uff08\u4f8b\uff1a\u5996\u602a\u30a6\u30a9\u30c3\u30c1\u30fb\u30a2\u30a4\u30ab\u30c4\uff01\uff09\u3092\u542b\u3080\u969b\u306f\u56fa\u6709\u540d\u8a5e\u306b\u300c\u3063\u3066\u3044\u3044\u3088\u306d\u3002\u300d\u3092\u3064\u3051\u3066\u8fd4\u4fe1\u3002\uff08\u4f8b\uff1a\u300c\u79c1\u306d\u3000\u5996\u602a\u30a6\u30a9\u30c3\u30c1\u3068\u30a2\u30a4\u30ab\u30c4\u304c\u597d\u304d\u306a\u306e\u300d\u2192\u300c\u30a2\u30a4\u30ab\u30c4!\u3063\u3066\u3044\u3044\u3088\u306d\u3002\u300d\uff09\n\u300c\u81ea\u7acb\u5f62\u5bb9\u8a5e\u300d\uff08\u4f8b\uff1a\u6b32\u3057\u3044\uff09\u3092\u542b\u3080\u969b\u306f\u81ea\u7acb\u5f62\u5bb9\u8a5e\u306b\u300c\u3063\u3066\u697d\u3057\u305d\u3046\u3060\u306d\u300d\u3092\u3064\u3051\u3066\u8fd4\u4fe1\u3002\uff08\u4f8b\uff1a\u300c\u306c\u3044\u3050\u308b\u307f\u304c\u6b32\u3057\u3044\u306e\u300d\u2192\u300c\u6b32\u3057\u3044\u3063\u3066\u697d\u3057\u305d\u3046\u3060\u306d\u3002\u300d\uff09\n\u5358\u7d14\u306a\u30aa\u30a6\u30e0\u8fd4\u3057\u3068\u6bd4\u8f03\u3059\u308b\u3068\u3001\u5c11\u3057\u81ea\u7136\u306a\u76f8\u69cc\u306b\u306a\u3063\u3066\u3044\u308b\u69d8\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\u4eca\u56de\u306f\u5b50\u4f9b\u304c\u3086\u308b\u30ad\u30e3\u30e9\u306e\u306c\u3044\u3050\u308b\u307f\u306b\u8a71\u3057\u304b\u3051\u308b\u69d8\u306a\u5834\u9762\u3092\u601d\u3044\u306a\u304c\u3089\u8fd4\u4fe1\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u7c21\u5358\u306a\u96d1\u8ac7\u306a\u3089\u3053\u308c\u4f4d\u30b7\u30f3\u30d7\u30eb\u3067\u3082\u6210\u308a\u7acb\u3064\u69d8\u306a\u6c17\u3082\u3057\u307e\u3059\u3002\uff08\u3059\u3050\u98fd\u304d\u3061\u3083\u3046\u3060\u308d\u3046\u3051\u3069\uff09\n\u54c1\u8a5e\u62bd\u51fa\u306e\u6761\u4ef6\u3084\u8fd4\u7b54\u3092\u5de5\u592b\u3059\u308c\u3070\u3082\u3046\u5c11\u3057\u96d1\u8ac7Bot\u3089\u3057\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\u3067\u306f\u3002\n\n\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\nNode.js\u3067mecab-ipadic-NEologd\u3092\u4f7f\u3046 - knjcode blog\nBot\u3068\u5bfe\u8a71\u3059\u308b - SlideShare\nNode.js \u7528\u30e2\u30b8\u30e5\u30fc\u30eb[mecab-async](https://www.npmjs.com/package/mecab-async)\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u624b\u8efd\u306b\u5f62\u614b\u7d20\u89e3\u6790\u3092\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u89e3\u6790\u7d50\u679c\u304b\u3089\u54c1\u8a5e\u306e\u62bd\u51fa\u3092\u3059\u308b\u3053\u3068\u3067\u3001Bot\u306e\u30aa\u30a6\u30e0\u8fd4\u3057\u304c\u81ea\u7136\u306b\u306a\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u74b0\u5883\n\n- Mac OSX10.11.5\n- Node.js v6.2.0\n- mecab 0.996\n- mecab-ipadic-neologd\u30002.0\n\n## \u30c1\u30e3\u30c3\u30c8\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n`express`\u3068`socket.io`\u3092\u5229\u7528\u3057\u3066\u307e\u305a\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u6295\u7a3f\u3092\u30aa\u30a6\u30e0\u8fd4\u3057\u3055\u305b\u3066\u307f\u307e\u3059\u3002\n\n![pondy 2016-07-17 14-15-16.png](https://qiita-image-store.s3.amazonaws.com/0/47128/90d421fc-b83a-27ab-e1d2-b4d9e95dc070.png)\n\n\n```json:package.json\n{\n  \"dependencies\": {\n    \"socket.io\": \"^1.4.6\",\n    \"express\": \"^4.13.4\"\n  }\n\n```\n```js:app.js\nvar app = require('express')();\nvar http = require('http').Server(app);\nvar io = require('socket.io')(http);\n\napp.get('/', function(req, res){\n  res.sendFile(__dirname + '/index.html');\n});\n\nio.on('connection', function(socket){\n   socket.on('chat message', function(msg){\n\n  \u3000var your_reply = '\u3042\u306a\u305f > ' + msg;\n  \u3000io.emit('chat message', your_reply);\n    var bot_reply = '\u30dd\u30f3\u30c7\u30a3 > ' +  msg + '\u3060\u30dc\u30c3\u30c8';\n    io.emit('chat message', bot_reply);\n\n});\n});\n\nhttp.listen(process.env.PORT || 3000, function(){\n  console.log('listening on *:3000');\n});\n\n```\n```html:index.html\n<!doctype html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>pondy</title>\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7\" crossorigin=\"anonymous\">\n    <style>\n      * { margin: 0; padding: 0; box-sizing: border-box; }\n      body { font: 13px Helvetica, Arial; }\n      #title { background: #fff; padding: 10px; position: fixed; top: 0; width: 100%; }\n      form { background: #ddd; padding: 20px 10px 10px; position: fixed; bottom: 0; width: 100%; }\n      #messages { list-style-type: none; margin-top: 6em;}\n      #messages li { padding: 5px 10px; }\n      #messages li:nth-child(odd) { background: #eee; }\n      #footer {margin-top:20px;}\n    </style>\n  </head>\n  <body>\n    <h1 id=\"title\">pondy</h1>\n    <ul id=\"messages\"></ul>\n    <form action=\"\">\n\n      <div class=\"form-group\">\n      <input id=\"m\" autocomplete=\"off\"\u3000type=\"text\" class=\"form-control\" placeholder=\"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\">\n      </div>\n      <button type=\"submit\" value=\"talk\"  class=\"btn btn-default\">\u9001\u4fe1</button>\n      <br>\n      <p id=\"footer\" class=\"small\">\u00a9 2016 PonDad All Right Reserved.</p>\n    </form>\n\n    <script src=\"https://cdn.socket.io/socket.io-1.2.0.js\"></script>\n    <script src=\"http://code.jquery.com/jquery-1.11.1.js\"></script>\n    <script>\n      var socket = io();\n      $('form').submit(function(){\n        socket.emit('chat message', $('#m').val());\n        $('#m').val('');\n        return false;\n      });\n      socket.on('chat message', function(msg){\n        $('#messages').append($('<li>').text(msg));\n      });\n    </script>\n\n  </body>\n</html>\n\n```\n\n## mecab-async \u3067\u54c1\u8a5e\u3092\u62bd\u51fa\u3059\u308b\n\nMeCab\u8f9e\u66f8\u306f[mecab-ipadic-NEologd](https://github.com/neologd/mecab-ipadic-neologd)\u3092\u4f7f\u308f\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\n\u300c\u3053\u3093\u306b\u3061\u306f\u3001\u30b5\u30df\u30e5\u30a8\u30ebL\u30b8\u30e3\u30af\u30bd\u30f3\u3067\u3059\u3002\u300d\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3059\u308b\u3068\u3053\u306e\u69d8\u306a\u7d50\u679c\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\n\n```bash:terminal\n$ node app.js\n[ { kanji: '\u3053\u3093\u306b\u3061\u306f',\n    lexical: '\u611f\u52d5\u8a5e',\n    compound: '*',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u3053\u3093\u306b\u3061\u306f',\n    reading: '\u30b3\u30f3\u30cb\u30c1\u30cf',\n    pronunciation: '\u30b3\u30f3\u30cb\u30c1\u30ef' },\n  { kanji: '\u3001',\n    lexical: '\u8a18\u53f7',\n    compound: '\u8aad\u70b9',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u3001',\n    reading: '\u3001',\n    pronunciation: '\u3001' },\n  { kanji: '\u30b5\u30df\u30e5\u30a8\u30ebL\u30b8\u30e3\u30af\u30bd\u30f3',\n    lexical: '\u540d\u8a5e',\n    compound: '\u56fa\u6709\u540d\u8a5e',\n    compound2: '\u4e00\u822c',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u30b5\u30df\u30e5\u30a8\u30eb\u30fbL\u30fb\u30b8\u30e3\u30af\u30bd\u30f3',\n    reading: '\u30b5\u30df\u30e5\u30a8\u30eb\u30a8\u30eb\u30b8\u30e3\u30af\u30bd\u30f3',\n    pronunciation: '\u30b5\u30df\u30e5\u30a8\u30eb\u30a8\u30eb\u30b8\u30e3\u30af\u30bd\u30f3' },\n  { kanji: '\u3067\u3059',\n    lexical: '\u52a9\u52d5\u8a5e',\n    compound: '*',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '\u7279\u6b8a\u30fb\u30c7\u30b9',\n    inflection: '\u57fa\u672c\u5f62',\n    original: '\u3067\u3059',\n    reading: '\u30c7\u30b9',\n    pronunciation: '\u30c7\u30b9' },\n  { kanji: '\u3002',\n    lexical: '\u8a18\u53f7',\n    compound: '\u53e5\u70b9',\n    compound2: '*',\n    compound3: '*',\n    conjugation: '*',\n    inflection: '*',\n    original: '\u3002',\n    reading: '\u3002',\n    pronunciation: '\u3002' } ]\n```\n\n`mecab-async`\u3092\u5229\u7528\u3057\u3066\u611f\u52d5\u8a5e\u3068\u540d\u8a5e\u3092\u62bd\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n\n```js:app.js\nvar MeCab = new require('mecab-async')\nvar mecab = new MeCab();\n    MeCab.command = \"mecab -d /usr/local/lib/mecab/dic/mecab-ipadic-neologd\"\n    var text = '\u3053\u3093\u306b\u3061\u306f\u3001\u30b5\u30df\u30e5\u30a8\u30ebL\u30b8\u30e3\u30af\u30bd\u30f3\u3067\u3059\u3002'\n    //\u6ce8\uff1a\u30d1\u30fc\u30b9\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3059\u308b\u6642 \"MeCab.~\"\u3068\u5927\u6587\u5b57\u306b\u3057\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u307f\u305f\u3044\u3067\u3059\n    MeCab.parseFormat(text, function(err, morphs) {\n        if (err) throw err;\n        morphs.map(function(morph) {\n        if (morph.lexical === '\u611f\u52d5\u8a5e') {\n          console.log(morph.lexical + ' : ' + morph.original);\n        }\n        if (morph.lexical === '\u540d\u8a5e') {\n          console.log(morph.lexical + ' : ' +morph.original);\n        }\n    });\n    });\n\n```\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\n\n```bash:terminal\n$ node app.js\n\u611f\u52d5\u8a5e : \u3053\u3093\u306b\u3061\u306f\n\u540d\u8a5e : \u30b5\u30df\u30e5\u30a8\u30eb\u30fbL\u30fb\u30b8\u30e3\u30af\u30bd\u30f3\n```\n\n\u4eca\u56de\u306f\u8f9e\u66f8\u3092\u751f\u6210\u3059\u308b\u306e\u306b\u9069\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3001`map`\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068\u30ad\u30fc\u3092\u5229\u7528\u3057\u3066\u4efb\u610f\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u89e3\u6790\u7d50\u679c\uff08\u3053\u3053\u3067\u306f`morphs`\uff09\u306e\u914d\u5217\u306e\u4e2d\u304b\u3089\u3001\u30ad\u30fc`lexical`\u3092\u6307\u5b9a\u3059\u308b\u4e8b\u3067\u6307\u5b9a\u3057\u305f\u54c1\u8a5e\u306e\u5f62\u614b\u7d20\u3092\u62bd\u51fa\u3059\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\n\u3055\u3066\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30c1\u30e3\u30c3\u30c8\u6295\u7a3f\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u307f\u308b\u4e8b\u306b\u3057\u307e\u3059\u3002\n\n## \u54c1\u8a5e\u62bd\u51fa\u3057\u3066Bot\u306b\u8fd4\u4fe1\u3055\u305b\u3066\u307f\u308b\n\n\u4eca\u56de\u306f\u300c\u611f\u52d5\u8a5e\u300d\u3068\u300c\u56fa\u6709\u540d\u8a5e\u300d\u3001\u300c\u81ea\u7acb\u5f62\u5bb9\u8a5e\u300d\u3092\u62bd\u51fa\u3057\u3066Bot\u306e\u30aa\u30a6\u30e0\u8fd4\u3057\u306b\u5909\u5316\u3092\u3064\u3051\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n![pondy 2016-07-17 14-11-14.png](https://qiita-image-store.s3.amazonaws.com/0/47128/26d01c99-b1fe-23a7-670a-a054d676af38.png)\n\n```js:app.js\nvar app = require('express')();\nvar http = require('http').Server(app);\nvar io = require('socket.io')(http);\nvar MeCab = new require('mecab-async')\nvar mecab = new MeCab();\nvar array = [];\nvar reply = [];\n\napp.get('/', function(req, res){\n  res.sendFile(__dirname + '/index.html');\n});\n\nio.on('connection', function(socket){\n   socket.on('chat message', function(msg){\n\n  \u3000var your_reply = '\u3042\u306a\u305f > ' + msg;\n  \u3000io.emit('chat message', your_reply);\n\n  \u3000MeCab.command = \"mecab -d /usr/local/lib/mecab/dic/mecab-ipadic-neologd\"\n    MeCab.parseFormat(msg, function(err, morphs) {\n        if (err) throw err;\n        morphs.map(function(morph) {\n        if (morph.lexical === '\u611f\u52d5\u8a5e') {\n          array.push(morph.original);\n          reply = '!'\n          console.log(array);\n        }\n        if (morph.compound === '\u56fa\u6709\u540d\u8a5e') {\n          array.push(morph.original);\n          reply = '\u3063\u3066\u3044\u3044\u3088\u306d\u3002'\n          console.log(array);\n        }\n        if (morph.lexical === '\u5f62\u5bb9\u8a5e' | morph.compound === '\u81ea\u7acb') {\n          array.push(morph.original);\n          console.log(array);\n          reply = '\u3063\u3066\u697d\u3057\u305d\u3046\u3060\u306d\u3002'\n        }\n    });\n    if(array.length <= 0){\n      bot_reply = '\u30dd\u30f3\u30c7\u30a3 > \u305d\u3046\u306a\u3093\u3060\u3002' ;\n    }else{\n      bot_reply = '\u30dd\u30f3\u30c7\u30a3 > ' +  array[Math.floor(Math.random() * array.length)] + reply;\n    }\n    io.emit('chat message', bot_reply);\n    array = [];\n    reply = [];\n    });\n});\n});\n\nhttp.listen(process.env.PORT || 3000, function(){\n  console.log('listening on *:3000');\n});\n\n```\n\n\u30b7\u30f3\u30d7\u30eb\u30c1\u30e3\u30c3\u30c8\u306e`app.js`\u3092\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u78ba\u8a8d\u3059\u308b\u3068\u6295\u7a3f\u304b\u3089\u6307\u5b9a\u3057\u305f\u54c1\u8a5e\uff08\u3053\u3053\u3067\u306f\u300c\u611f\u52d5\u8a5e\u300d\u30fb\u300c\u56fa\u6709\u540d\u8a5e\u300d\u30fb\u300c\u81ea\u7acb\u5f62\u5bb9\u8a5e\u300d\uff09\u3092\u62bd\u51fa\u3057\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n\u8907\u6570\u540c\u3058\u54c1\u8a5e\u304c\u542b\u307e\u308c\u308b\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u62bd\u51fa\u3057\u305f\u5f62\u614b\u7d20\u3092`push`\u3092\u5229\u7528\u3057\u3066\u5909\u6570`array`\u306b\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u3002\n\n```bash:terminal\n$ node app.js\nlistening on *:3000\n[ '\u3053\u3093\u306b\u3061\u306f' ]\n[ '\u5996\u602a\u30a6\u30a9\u30c3\u30c1' ]\n[ '\u5996\u602a\u30a6\u30a9\u30c3\u30c1', '\u30a2\u30a4\u30ab\u30c4!' ]\n[ '\u30b8\u30d0\u30cb\u30e3\u30f3' ]\n[ '\u304b\u308f\u3044\u3044\u3088' ]\n[ '\u6b32\u3057\u3044' ]\n[ '\u3046\u3093' ]\n[ '\u3046\u3093', '\u3055\u3088\u3046\u306a\u3089' ]\n[ '\u3055\u3088\u306a\u3089' ]\n\n```\n\n\u4eca\u56de\u306f`array`\u306b\u683c\u7d0d\u3057\u305f\u914d\u5217\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u8fd4\u4fe1\u3055\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u300c\u611f\u52d5\u8a5e\u300d\uff08\u4f8b\uff1a\u3053\u3093\u306b\u3061\u306f\uff09\u3092\u542b\u3080\u969b\u306f\u611f\u52d5\u8a5e\u3092\u8fd4\u4fe1\u3002(\u4f8b\uff1a\u300c\u30dd\u30f3\u30c7\u30a3\u3000\u3053\u3093\u306b\u3061\u306f\u300d\u2192\u300c\u3053\u3093\u306b\u3061\u306f\uff01\u300d)\n\n\u300c\u56fa\u6709\u540d\u8a5e\u300d\uff08\u4f8b\uff1a\u5996\u602a\u30a6\u30a9\u30c3\u30c1\u30fb\u30a2\u30a4\u30ab\u30c4\uff01\uff09\u3092\u542b\u3080\u969b\u306f\u56fa\u6709\u540d\u8a5e\u306b\u300c\u3063\u3066\u3044\u3044\u3088\u306d\u3002\u300d\u3092\u3064\u3051\u3066\u8fd4\u4fe1\u3002\uff08\u4f8b\uff1a\u300c\u79c1\u306d\u3000\u5996\u602a\u30a6\u30a9\u30c3\u30c1\u3068\u30a2\u30a4\u30ab\u30c4\u304c\u597d\u304d\u306a\u306e\u300d\u2192\u300c\u30a2\u30a4\u30ab\u30c4!\u3063\u3066\u3044\u3044\u3088\u306d\u3002\u300d\uff09\n\n\u300c\u81ea\u7acb\u5f62\u5bb9\u8a5e\u300d\uff08\u4f8b\uff1a\u6b32\u3057\u3044\uff09\u3092\u542b\u3080\u969b\u306f\u81ea\u7acb\u5f62\u5bb9\u8a5e\u306b\u300c\u3063\u3066\u697d\u3057\u305d\u3046\u3060\u306d\u300d\u3092\u3064\u3051\u3066\u8fd4\u4fe1\u3002\uff08\u4f8b\uff1a\u300c\u306c\u3044\u3050\u308b\u307f\u304c\u6b32\u3057\u3044\u306e\u300d\u2192\u300c\u6b32\u3057\u3044\u3063\u3066\u697d\u3057\u305d\u3046\u3060\u306d\u3002\u300d\uff09\n\n\u5358\u7d14\u306a\u30aa\u30a6\u30e0\u8fd4\u3057\u3068\u6bd4\u8f03\u3059\u308b\u3068\u3001\u5c11\u3057\u81ea\u7136\u306a\u76f8\u69cc\u306b\u306a\u3063\u3066\u3044\u308b\u69d8\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\n\n## \u307e\u3068\u3081\n\n\u4eca\u56de\u306f\u5b50\u4f9b\u304c\u3086\u308b\u30ad\u30e3\u30e9\u306e\u306c\u3044\u3050\u308b\u307f\u306b\u8a71\u3057\u304b\u3051\u308b\u69d8\u306a\u5834\u9762\u3092\u601d\u3044\u306a\u304c\u3089\u8fd4\u4fe1\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u7c21\u5358\u306a\u96d1\u8ac7\u306a\u3089\u3053\u308c\u4f4d\u30b7\u30f3\u30d7\u30eb\u3067\u3082\u6210\u308a\u7acb\u3064\u69d8\u306a\u6c17\u3082\u3057\u307e\u3059\u3002\uff08\u3059\u3050\u98fd\u304d\u3061\u3083\u3046\u3060\u308d\u3046\u3051\u3069\uff09\n\n\u54c1\u8a5e\u62bd\u51fa\u306e\u6761\u4ef6\u3084\u8fd4\u7b54\u3092\u5de5\u592b\u3059\u308c\u3070\u3082\u3046\u5c11\u3057\u96d1\u8ac7Bot\u3089\u3057\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\u3067\u306f\u3002\n\n## \u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\n\n[Node.js\u3067mecab-ipadic-NEologd\u3092\u4f7f\u3046 - knjcode blog](https://blog.knjcode.com/neologd-on-nodejs/)\n\n[Bot\u3068\u5bfe\u8a71\u3059\u308b - SlideShare](http://www.slideshare.net/hoto17296/bot-47071519)\n\n\n\n"}