{"context": " More than 1 year has passed since last update.heroku\u307f\u305f\u3044\u306bgit push\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u304d\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u3084\u3063\u3066\u307f\u305f\u3002\n\n0. \u4e0b\u6e96\u5099\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u304b\u3089SSH\u3092\u6709\u52b9\u306b\u3057\u3068\u304f\u306e\u3068\u3001\u516c\u958b\u9375\u8a2d\u5b9a\u3057\u3068\u304f\u3002\n\u53c2\u8003\uff1a heteml\u3067\u516c\u958b\u9375\u3092\u4f7f\u3046\u65b9\u6cd5\n\n\u3056\u3063\u3068\u4ed5\u7d44\u307f\u8aac\u660e\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\uff13\u3064\u3002\nA. \u30ed\u30fc\u30ab\u30eb\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u4f5c\u696d\u7528\uff09\nB. \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u7ba1\u7406\u7528\uff09\nC. \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u516c\u958b\u7528\uff09\n\u6d41\u308c\u306f\u3001\u3053\u3093\u306a\u304b\u3093\u3058\u3002\n1. \u30ed\u30fc\u30ab\u30eb\u306e\u4f5c\u696d\u5185\u5bb9\u3092A\u306bcommit\n2. A\u306e\u5185\u5bb9\u3092B\u3078push\n3. B\u306ehook\u3067B\u306e\u5185\u5bb9\u3092C\u304cpull\n\u672c\u984c\u3002\n\n1. \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\nheteml\u306bSSH\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u72b6\u614b\u304b\u3089\u8aac\u660e\u3002\n$ cd ~\n$ mkdir repos\n$ ls\napps  repos  web\n\n\u3053\u3053\u3067\u3001\nrepos ... \u3053\u306e\u4e2d\u306b\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u3044\u308d\u3044\u308d\u5165\u308b\nweb ... \u516c\u958b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\uff09\nrepos\u306e\u540d\u524d\u306f\u306a\u3093\u3067\u3082\u3044\u3044\u3093\u3060\u3051\u3069\u6163\u4f8b\u3063\u307d\u3044\u3002\n\u3067\u3001\u65e9\u901f\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3002\n$ cd repos\n$ mkdir hoge.git\n$ cd hoge.git\n$ git init\n\n\u305d\u306e\u6b21\u306bhook\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306bpost-receive\u3092\u7de8\u96c6\u3002\n$ vi hook/post-receive\n\nheteml\u306a\u3089\u3001\n#!/bin/sh\n\ncd ~/web\ngit --git-dir=.git pull\n\n\u5b9f\u884c\u6a29\u9650\u3092\u3064\u3051\u3068\u304f\u3002\n$ chmod +x post-receive\n\n\u6700\u5f8c\u306b\u3001\u516c\u958b\u7528\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306b\u3076\u3061\u307e\u3051\u308b\u3002\n$ cd ~/web\n$ git clone ~/repos/hoge.git\n$ mv hoge.git/* ./\n$ mv hoge.git/.??* ./\n$ rm -r hoge.git\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0a\u3002\n\n2. \u30ed\u30fc\u30ab\u30eb\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4f5c\u6210\n\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u3001git init\u3057\u3066\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3002\n$ git init\n$ git remote add origin ssh://YOU@sshXXX.heteml.jp:2222/~/repos/hoge.git\n\n\n\u304a\u307e\u3051\uff1a\u540c\u6642\u306bbitbucket\u306b\u3082push\u3059\u308b\nhook\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3068\u3053\u3067\u3044\u308d\u3044\u308d\u3067\u304d\u308b\u306e\u3067\u3001\u3064\u3044\u3067\u306bgithub\u3084bitbucket\u306bpush\u3057\u3068\u304f\u306a\u3093\u3066\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n$ cd ~/web\n$ git remote add bitbucket git@bitbucket.org:YOU/hoge.git \n\norigin\u306b\u3059\u308b\u3068\u3059\u3067\u306b\u3042\u308b\u3088\u3063\u3066\u6012\u3089\u308c\u308b\u306e\u3067bitbucket\u306a\u3069\u3066\u304d\u3068\u3046\u306b\u3002\n#!/bin/sh\n\ncd ~/web\ngit --git-dir=.git pull\ngit --git-dir=.git push bitbucket master\n\n\u6210\u529f\u3059\u308b\u3068\u3053\u3093\u306a\u304b\u3093\u3058\u3002\n\n$ git push origin master\n-----------------------------------------------------\n--***-------------------------------------------***--\n--***---------------***-------------------------***--\n--***---------------******----------------------***--\n--********-********-******-********-***********-***--\n--********-***--***-***----***--***-***********-***--\n--***--***-********-***----********-***-***-***-***--\n--***--***-***------******-***------***-***-***-***--\n--***--***-********-******-********-***-***-***-***--\n-----------------------------------------------------\n\n\nCounting objects: 5, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (4/4), done.\nWriting objects: 100% (5/5), 650 bytes | 0 bytes/s, done.\nTotal 5 (delta 1), reused 0 (delta 0)\nremote: From /home/sites/heteml/users/Y/O/U/YOU/web/../repos/hoge.git\nremote:    e7c36f5..c870f24  master     -> origin/master\nremote: Updating e7c36f5..c870f24\nremote: Fast-forward\nremote:  .DS_Store  | Bin 0 -> 6148 bytes\nremote:  .swp       | Bin 0 -> 12288 bytes\nremote:  index.html |   2 +-\nremote:  3 files changed, 1 insertion(+), 1 deletion(-)\nremote:  create mode 100644 .DS_Store\nremote:  create mode 100644 .swp\nremote: To git@bitbucket.org:YOU/hoge.git\nremote:  * [new branch]      master -> master\nTo ssh://YOU@sshXXX.heteml.jp:2222/~/repos/hoge.git\n   e7c36f5..c870f24  master -> master\n\n\nheroku\u307f\u305f\u3044\u306b`git push`\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u304d\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u3084\u3063\u3066\u307f\u305f\u3002\n\n\n# 0. \u4e0b\u6e96\u5099\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u304b\u3089SSH\u3092\u6709\u52b9\u306b\u3057\u3068\u304f\u306e\u3068\u3001\u516c\u958b\u9375\u8a2d\u5b9a\u3057\u3068\u304f\u3002\n\u53c2\u8003\uff1a [heteml\u3067\u516c\u958b\u9375\u3092\u4f7f\u3046\u65b9\u6cd5](http://qiita.com/ikedahidenori/items/64c9eb82b5b44f735a4b)\n\n## \u3056\u3063\u3068\u4ed5\u7d44\u307f\u8aac\u660e\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\uff13\u3064\u3002\nA. \u30ed\u30fc\u30ab\u30eb\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u4f5c\u696d\u7528\uff09\nB. \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u7ba1\u7406\u7528\uff09\nC. \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u516c\u958b\u7528\uff09\n\n\u6d41\u308c\u306f\u3001\u3053\u3093\u306a\u304b\u3093\u3058\u3002\n1. \u30ed\u30fc\u30ab\u30eb\u306e\u4f5c\u696d\u5185\u5bb9\u3092A\u306b`commit`\n2. A\u306e\u5185\u5bb9\u3092B\u3078`push`\n3. B\u306e`hook`\u3067B\u306e\u5185\u5bb9\u3092C\u304c`pull`\n\n\n\u672c\u984c\u3002\n\n# 1. \u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\n\nheteml\u306bSSH\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u72b6\u614b\u304b\u3089\u8aac\u660e\u3002\n\n```\u30ea\u30e2\u30fc\u30c8\n$ cd ~\n$ mkdir repos\n$ ls\napps  repos  web\n```\n\n\u3053\u3053\u3067\u3001\n`repos` ... \u3053\u306e\u4e2d\u306b\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u3044\u308d\u3044\u308d\u5165\u308b\n`web` ... \u516c\u958b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\uff09\n\nrepos\u306e\u540d\u524d\u306f\u306a\u3093\u3067\u3082\u3044\u3044\u3093\u3060\u3051\u3069\u6163\u4f8b\u3063\u307d\u3044\u3002\n\n\n\u3067\u3001\u65e9\u901f\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3002\n\n```\u30ea\u30e2\u30fc\u30c8\n$ cd repos\n$ mkdir hoge.git\n$ cd hoge.git\n$ git init\n```\n\n\u305d\u306e\u6b21\u306b`hook`\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b`post-receive`\u3092\u7de8\u96c6\u3002\n\n```\n$ vi hook/post-receive\n```\n\nheteml\u306a\u3089\u3001\n\n```\u30ea\u30e2\u30fc\u30c8/post-receive\n#!/bin/sh\n\ncd ~/web\ngit --git-dir=.git pull\n```\n\n\u5b9f\u884c\u6a29\u9650\u3092\u3064\u3051\u3068\u304f\u3002\n\n```\n$ chmod +x post-receive\n```\n\n\u6700\u5f8c\u306b\u3001\u516c\u958b\u7528\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306b\u3076\u3061\u307e\u3051\u308b\u3002\n\n```\n$ cd ~/web\n$ git clone ~/repos/hoge.git\n$ mv hoge.git/* ./\n$ mv hoge.git/.??* ./\n$ rm -r hoge.git\n```\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0a\u3002\n\n# 2. \u30ed\u30fc\u30ab\u30eb\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4f5c\u6210\n\n\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u3001`git init`\u3057\u3066\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3002\n\n```\u30ed\u30fc\u30ab\u30eb\n$ git init\n$ git remote add origin ssh://YOU@sshXXX.heteml.jp:2222/~/repos/hoge.git\n```\n\n\n# \u304a\u307e\u3051\uff1a\u540c\u6642\u306bbitbucket\u306b\u3082push\u3059\u308b\n\n`hook`\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3068\u3053\u3067\u3044\u308d\u3044\u308d\u3067\u304d\u308b\u306e\u3067\u3001\u3064\u3044\u3067\u306bgithub\u3084bitbucket\u306b`push`\u3057\u3068\u304f\u306a\u3093\u3066\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n```heteml\n$ cd ~/web\n$ git remote add bitbucket git@bitbucket.org:YOU/hoge.git \n```\n\norigin\u306b\u3059\u308b\u3068\u3059\u3067\u306b\u3042\u308b\u3088\u3063\u3066\u6012\u3089\u308c\u308b\u306e\u3067bitbucket\u306a\u3069\u3066\u304d\u3068\u3046\u306b\u3002\n\n```post-receive\n#!/bin/sh\n\ncd ~/web\ngit --git-dir=.git pull\ngit --git-dir=.git push bitbucket master\n```\n\n\u6210\u529f\u3059\u308b\u3068\u3053\u3093\u306a\u304b\u3093\u3058\u3002\n\n```\u30ed\u30fc\u30ab\u30eb\n\n$ git push origin master\n-----------------------------------------------------\n--***-------------------------------------------***--\n--***---------------***-------------------------***--\n--***---------------******----------------------***--\n--********-********-******-********-***********-***--\n--********-***--***-***----***--***-***********-***--\n--***--***-********-***----********-***-***-***-***--\n--***--***-***------******-***------***-***-***-***--\n--***--***-********-******-********-***-***-***-***--\n-----------------------------------------------------\n\n\nCounting objects: 5, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (4/4), done.\nWriting objects: 100% (5/5), 650 bytes | 0 bytes/s, done.\nTotal 5 (delta 1), reused 0 (delta 0)\nremote: From /home/sites/heteml/users/Y/O/U/YOU/web/../repos/hoge.git\nremote:    e7c36f5..c870f24  master     -> origin/master\nremote: Updating e7c36f5..c870f24\nremote: Fast-forward\nremote:  .DS_Store  | Bin 0 -> 6148 bytes\nremote:  .swp       | Bin 0 -> 12288 bytes\nremote:  index.html |   2 +-\nremote:  3 files changed, 1 insertion(+), 1 deletion(-)\nremote:  create mode 100644 .DS_Store\nremote:  create mode 100644 .swp\nremote: To git@bitbucket.org:YOU/hoge.git\nremote:  * [new branch]      master -> master\nTo ssh://YOU@sshXXX.heteml.jp:2222/~/repos/hoge.git\n   e7c36f5..c870f24  master -> master\n```\n", "tags": ["Hook", "deploy", "Git", "heteml", "SSH"]}