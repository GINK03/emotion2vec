{"context": " More than 1 year has passed since last update.CentOS7\u3067\u3059\u3002\n\n\u5927\u307e\u304b\u306a\u6d41\u308c\n\nMariaDB\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u8d77\u52d5\n\u90f5\u4fbf\u5c40\u306e\u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8\u304b\u3089CSV\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nCSV\u30d5\u30a1\u30a4\u30eb\u3092UTF8\u304b\u3064\u5168\u89d2\u30ab\u30ca\u306b\u5909\u63db\nMariaDB\u3067\u90f5\u4fbf\u756a\u53f7\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u308b\nLOAD DATA LOCAL INFILE\u3067CSV\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30a4\u30f3\u30dd\u30fc\u30c8\n\n\u307e\u305a\u4f55\u306f\u3068\u3082\u3042\u308croot\u306b\u3002\u4ee5\u4e0b\u5168\u90e8root\u4f5c\u696d\u3002\n\n1. MariaDB\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u8d77\u52d5\n# cat /etc/redhat-release\nCentOS Linux release 7.1.1503 (Core)\n\nMariaDB\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u8d77\u52d5\uff06\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\uff06\u52d5\u4f5c\u78ba\u8a8d\n# yum install mariadb-server\n# systemctl restart mariadb.service\n# systemctl enable mariadb.service\n\n\n2. \u90f5\u4fbf\u5c40\u306e\u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u3053\u3053\u306b\u3042\u308a\u307e\u3059\u3002\nhttp://www.post.japanpost.jp/zipcode/dl/kogaki-zip.html\n# yum install wget unzip\n# wget http://www.post.japanpost.jp/zipcode/dl/kogaki/zip/ken_all.zip\n# unzip ken_all.zip\n\n\n3. CSV\u30d5\u30a1\u30a4\u30eb\u3092UTF8\u304b\u3064\u5168\u89d2\u30ab\u30ca\u306b\u5909\u63db\n\u5143\u30d5\u30a1\u30a4\u30eb\u306fsjis\u3067\u534a\u89d2\u30ab\u30ca\u3042\u308a\u306a\u306e\u3067\u3001UTF\u304b\u3064\u5168\u89d2\u30ab\u30ca\u306b\u5909\u63db\u3002\nnkf\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u3001epel\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n# yum install epel-release\n# yum install nkf\n# nkf -w KEN_ALL.CSV > ken_all_u.csv\n\n\n4. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\nmysql\u306b\u63a5\u7d9a\n# mysql\n\n\u3053\u3053\u304b\u3089mysql\u306e\u64cd\u4f5c\n\u307e\u305a\u306fDB\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\u3001\u30ab\u30e9\u30e0\u306f15\u500b\u3067\u5927\u304d\u3055\u306f\u30c6\u30ad\u30c8\u30a6\u3002\n\nmysql\nMariaDB [(none)]> create database sampledb default character set utf8; \nMariaDB [(none)]> use sampledb\nMariaDB [(sampledb)]> \ncreate table zipcode (\n id int unsigned not null auto_increment,\n jiscode varchar(255),\n zipcode_old varchar(255),\n zipcode varchar(255),\n pref_kana varchar(255),\n city_kana varchar(255),\n street_kana varchar(255),\n pref varchar(255),\n city varchar(255),\n street varchar(255),\n flag1 tinyint,\n flag2 tinyint,\n flag3 tinyint,\n flag4 tinyint,\n flag5 tinyint,\n flag6 tinyint,\n primary key (id),\n key zipcode (zipcode)\n);\n\n\n\n5. LOAD DATA LOCAL INFILE\u3067CSV\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30a4\u30f3\u30dd\u30fc\u30c8\n\nmysql\nMariaDB [(sampledb)]> \nLOAD DATA LOCAL INFILE '/root/ken_all_u.csv'\nINTO TABLE zipcode \nFIELDS\n    TERMINATED BY ','\n    OPTIONALLY ENCLOSED BY '\"'\n    ESCAPED BY ''\nLINES\n    STARTING BY ''\n    TERMINATED BY '\\r\\n'\n(\n jiscode,\n zipcode_old,\n zipcode,\n pref_kana,\n city_kana,\n street_kana,\n pref,\n city,\n street,\n flag1,\n flag2,\n flag3,\n flag4,\n flag5,\n flag6\n);\n\n\n\u6700\u5f8c\u306b\u78ba\u8a8d\n\nmysql\nMariaDB [(sampledb)]> select * from zipcode limit 2 \\G\n\n\n**CentOS7**\u3067\u3059\u3002\n\n# \u5927\u307e\u304b\u306a\u6d41\u308c\n1. MariaDB\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u8d77\u52d5\n2. \u90f5\u4fbf\u5c40\u306e\u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8\u304b\u3089CSV\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n3. CSV\u30d5\u30a1\u30a4\u30eb\u3092UTF8\u304b\u3064\u5168\u89d2\u30ab\u30ca\u306b\u5909\u63db\n4. MariaDB\u3067\u90f5\u4fbf\u756a\u53f7\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u308b\n5. LOAD DATA LOCAL INFILE\u3067CSV\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30a4\u30f3\u30dd\u30fc\u30c8\n\n\u307e\u305a\u4f55\u306f\u3068\u3082\u3042\u308croot\u306b\u3002\u4ee5\u4e0b**\u5168\u90e8root\u4f5c\u696d**\u3002\n\n## 1. MariaDB\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u8d77\u52d5\n\n```\n# cat /etc/redhat-release\nCentOS Linux release 7.1.1503 (Core)\n```\n\nMariaDB\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u8d77\u52d5\uff06\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\uff06\u52d5\u4f5c\u78ba\u8a8d\n\n```\n# yum install mariadb-server\n# systemctl restart mariadb.service\n# systemctl enable mariadb.service\n```\n\n## 2. \u90f5\u4fbf\u5c40\u306e\u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u3053\u3053\u306b\u3042\u308a\u307e\u3059\u3002\nhttp://www.post.japanpost.jp/zipcode/dl/kogaki-zip.html\n\n```\n# yum install wget unzip\n# wget http://www.post.japanpost.jp/zipcode/dl/kogaki/zip/ken_all.zip\n# unzip ken_all.zip\n```\n\n## 3. CSV\u30d5\u30a1\u30a4\u30eb\u3092UTF8\u304b\u3064\u5168\u89d2\u30ab\u30ca\u306b\u5909\u63db\n\u5143\u30d5\u30a1\u30a4\u30eb\u306fsjis\u3067\u534a\u89d2\u30ab\u30ca\u3042\u308a\u306a\u306e\u3067\u3001UTF\u304b\u3064\u5168\u89d2\u30ab\u30ca\u306b\u5909\u63db\u3002\nnkf\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u3001epel\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\n```\n# yum install epel-release\n# yum install nkf\n# nkf -w KEN_ALL.CSV > ken_all_u.csv\n```\n\n## 4. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\nmysql\u306b\u63a5\u7d9a\n\n```\n# mysql\n```\n\n\u3053\u3053\u304b\u3089mysql\u306e\u64cd\u4f5c\n\u307e\u305a\u306fDB\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\u3001\u30ab\u30e9\u30e0\u306f15\u500b\u3067\u5927\u304d\u3055\u306f\u30c6\u30ad\u30c8\u30a6\u3002\n\n```lang:mysql\nMariaDB [(none)]> create database sampledb default character set utf8; \nMariaDB [(none)]> use sampledb\nMariaDB [(sampledb)]> \ncreate table zipcode (\n id int unsigned not null auto_increment,\n jiscode varchar(255),\n zipcode_old varchar(255),\n zipcode varchar(255),\n pref_kana varchar(255),\n city_kana varchar(255),\n street_kana varchar(255),\n pref varchar(255),\n city varchar(255),\n street varchar(255),\n flag1 tinyint,\n flag2 tinyint,\n flag3 tinyint,\n flag4 tinyint,\n flag5 tinyint,\n flag6 tinyint,\n primary key (id),\n key zipcode (zipcode)\n);\n```\n\n## 5. LOAD DATA LOCAL INFILE\u3067CSV\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30a4\u30f3\u30dd\u30fc\u30c8\n\n```lang:mysql\nMariaDB [(sampledb)]> \nLOAD DATA LOCAL INFILE '/root/ken_all_u.csv'\nINTO TABLE zipcode \nFIELDS\n    TERMINATED BY ','\n    OPTIONALLY ENCLOSED BY '\"'\n    ESCAPED BY ''\nLINES\n    STARTING BY ''\n    TERMINATED BY '\\r\\n'\n(\n jiscode,\n zipcode_old,\n zipcode,\n pref_kana,\n city_kana,\n street_kana,\n pref,\n city,\n street,\n flag1,\n flag2,\n flag3,\n flag4,\n flag5,\n flag6\n);\n```\n\n\u6700\u5f8c\u306b\u78ba\u8a8d\n\n```lang:mysql\nMariaDB [(sampledb)]> select * from zipcode limit 2 \\G\n```\n", "tags": ["centos7", "mariadb", "MySQL", "\u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf"]}