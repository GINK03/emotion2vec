{"context": "\n\n1. \u516c\u5f0f\u306eBest-Practice\u3092\u53c2\u8003\u306b\nitamae g cookbook \u3068\u304b itamae g role \u3068\u304b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3057\n\u30e2\u30b8\u30e5\u30fc\u30eb\u611f\u3068\u3044\u3046\u610f\u5473\u3067\u3082\u516c\u5f0f\u306e\u304c\u597d\u304d\nhttps://github.com/itamae-kitchen/itamae/wiki/Best-Practice\n\u3053\u3053\u307e\u3067\u3067\u2193\u306e\u72b6\u614b\n\uff08\u516c\u5f0f\u3067\u306froles/web.rb\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001itamae g role\u3057\u305f\u72b6\u614b\u306b\u3057\u305f\u304c\u3046\uff09\n.\n\u251c\u2500\u2500 cookbooks\n\u2502   \u2514\u2500\u2500 nginx\n\u2502       \u251c\u2500\u2500 default.rb\n\u2502       \u251c\u2500\u2500 files\n\u2502       \u2502   \u2514\u2500\u2500 etc\n\u2502       \u2502       \u2514\u2500\u2500 nginx\n\u2502       \u2502           \u2514\u2500\u2500 conf.d\n\u2502       \u2502               \u2514\u2500\u2500 static.conf\n\u2502       \u2514\u2500\u2500 templates\n\u2502           \u2514\u2500\u2500 etc\n\u2502               \u2514\u2500\u2500 nginx\n\u2502                   \u2514\u2500\u2500 conf.d\n\u2502                       \u2514\u2500\u2500 dynamic.conf\n\u2514\u2500\u2500 roles\n    \u2514\u2500\u2500 web\n        \u2514\u2500\u2500 default.rb\n        \u2514\u2500\u2500 files\n        \u2514\u2500\u2500 templates\n\n\n2. node\u306fYAML\u3067\nJSON\u3088\u308aYAML\u306e\u65b9\u304cconfiguration\u306b\u306f\u9069\u3057\u3066\u308b\u306e\u3067YAML\u3067\u3002\n\u3053\u3053\u307e\u3067\u3067\u2193\u306e\u72b6\u614b\n.\n\u251c\u2500\u2500 cookbooks\n\u2502   \u2514\u2500\u2500 nginx\n\u2502       \u251c\u2500\u2500 default.rb\n\u2502       \u251c\u2500\u2500 files\n\u2502       \u2502   \u2514\u2500\u2500 etc\n\u2502       \u2502       \u2514\u2500\u2500 nginx\n\u2502       \u2502           \u2514\u2500\u2500 conf.d\n\u2502       \u2502               \u2514\u2500\u2500 static.conf\n\u2502       \u2514\u2500\u2500 templates\n\u2502           \u2514\u2500\u2500 etc\n\u2502               \u2514\u2500\u2500 nginx\n\u2502                   \u2514\u2500\u2500 conf.d\n\u2502                       \u2514\u2500\u2500 dynamic.conf\n\u2514\u2500\u2500 roles\n\u2502   \u2514\u2500\u2500 web\n\u2502       \u2514\u2500\u2500 default.rb\n\u2502       \u2514\u2500\u2500 files\n\u2502       \u2514\u2500\u2500 templates\n\u2514\u2500\u2500 nodes\n    \u2514\u2500\u2500 web-staging.yml\n\n\n3. node\u306brole\u3092\u542b\u3081\u308b\n\u3060\u3044\u305f\u3044node\u306frole\u3068\u5bfe\u5fdc\u3059\u308b\u306e\u3067\n$ bundle exec itamae local -y nodes/web-staging.yml roles/web/default.rb\n\n\u3068\u3059\u308b\u306e\u306f\u5197\u9577\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3001node\u306brole\u3092\u542b\u3081\u308b\u3002\n\u306a\u304a\u3001\u4ee5\u4e0b\u3067\u306fnode\u5185\u3067recipe\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u304c\u3001recipe\u306b\u3059\u308b\u3068\u81ea\u7531\u5ea6\u9ad8\u304f\u3066\n\u3064\u3044\u624b\u629c\u304d\u3057\u305f\u3068\u304d\u306brole\u5916\u306erecipe\u3082\u8ffd\u52a0\u3057\u305f\u308a\u3057\u3066\u3054\u3061\u3083\u3064\u304f\u306e\u3067role\u3067\u7e1b\u3063\u305f\u65b9\u304c\u597d\u304d\nhttp://qiita.com/toritori0318/items/00ea2a75c8321aaf9ef6\n\u3053\u3053\u307e\u3067\u3067\u2193\u306e\u72b6\u614b\u3002\u5b8c\u6210\u3002\n.\n\u251c\u2500\u2500 cookbooks\n\u2502   \u2514\u2500\u2500 nginx\n\u2502       \u251c\u2500\u2500 default.rb\n\u2502       \u251c\u2500\u2500 files\n\u2502       \u2502   \u2514\u2500\u2500 etc\n\u2502       \u2502       \u2514\u2500\u2500 nginx\n\u2502       \u2502           \u2514\u2500\u2500 conf.d\n\u2502       \u2502               \u2514\u2500\u2500 static.conf\n\u2502       \u2514\u2500\u2500 templates\n\u2502           \u2514\u2500\u2500 etc\n\u2502               \u2514\u2500\u2500 nginx\n\u2502                   \u2514\u2500\u2500 conf.d\n\u2502                       \u2514\u2500\u2500 dynamic.conf\n\u2514\u2500\u2500 roles\n\u2502   \u2514\u2500\u2500 web\n\u2502       \u2514\u2500\u2500 default.rb\n\u2502       \u2514\u2500\u2500 files\n\u2502       \u2514\u2500\u2500 templates\n\u2514\u2500\u2500 nodes\n\u2502   \u2514\u2500\u2500 web-staging.yml\n\u2514\u2500\u2500 entry.rb\n\n\nentry.rb\nnode['roles'] = node['roles'] || []\nnode['roles'].each do |role|\n  include_recipe \"roles/#{role}/default.rb\"\nend\n\n\n\nweb-staging.yml\nroles:\n  - app\nnginx:\n  worker_processes: 2\n\n\n$ bundle exec itamae local -y nodes/web-staging.yml entry.rb\n\n## 1. \u516c\u5f0f\u306eBest-Practice\u3092\u53c2\u8003\u306b\n\n```itamae g cookbook``` \u3068\u304b ```itamae g role``` \u3068\u304b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3057\n\u30e2\u30b8\u30e5\u30fc\u30eb\u611f\u3068\u3044\u3046\u610f\u5473\u3067\u3082\u516c\u5f0f\u306e\u304c\u597d\u304d\n\nhttps://github.com/itamae-kitchen/itamae/wiki/Best-Practice\n\n\u3053\u3053\u307e\u3067\u3067\u2193\u306e\u72b6\u614b\n\uff08\u516c\u5f0f\u3067\u306froles/web.rb\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001```itamae g role```\u3057\u305f\u72b6\u614b\u306b\u3057\u305f\u304c\u3046\uff09\n\n```\n.\n\u251c\u2500\u2500 cookbooks\n\u2502   \u2514\u2500\u2500 nginx\n\u2502       \u251c\u2500\u2500 default.rb\n\u2502       \u251c\u2500\u2500 files\n\u2502       \u2502   \u2514\u2500\u2500 etc\n\u2502       \u2502       \u2514\u2500\u2500 nginx\n\u2502       \u2502           \u2514\u2500\u2500 conf.d\n\u2502       \u2502               \u2514\u2500\u2500 static.conf\n\u2502       \u2514\u2500\u2500 templates\n\u2502           \u2514\u2500\u2500 etc\n\u2502               \u2514\u2500\u2500 nginx\n\u2502                   \u2514\u2500\u2500 conf.d\n\u2502                       \u2514\u2500\u2500 dynamic.conf\n\u2514\u2500\u2500 roles\n    \u2514\u2500\u2500 web\n        \u2514\u2500\u2500 default.rb\n        \u2514\u2500\u2500 files\n        \u2514\u2500\u2500 templates\n```\n\n## 2. node\u306fYAML\u3067\n\nJSON\u3088\u308aYAML\u306e\u65b9\u304cconfiguration\u306b\u306f\u9069\u3057\u3066\u308b\u306e\u3067YAML\u3067\u3002\n\u3053\u3053\u307e\u3067\u3067\u2193\u306e\u72b6\u614b\n\n```\n.\n\u251c\u2500\u2500 cookbooks\n\u2502   \u2514\u2500\u2500 nginx\n\u2502       \u251c\u2500\u2500 default.rb\n\u2502       \u251c\u2500\u2500 files\n\u2502       \u2502   \u2514\u2500\u2500 etc\n\u2502       \u2502       \u2514\u2500\u2500 nginx\n\u2502       \u2502           \u2514\u2500\u2500 conf.d\n\u2502       \u2502               \u2514\u2500\u2500 static.conf\n\u2502       \u2514\u2500\u2500 templates\n\u2502           \u2514\u2500\u2500 etc\n\u2502               \u2514\u2500\u2500 nginx\n\u2502                   \u2514\u2500\u2500 conf.d\n\u2502                       \u2514\u2500\u2500 dynamic.conf\n\u2514\u2500\u2500 roles\n\u2502   \u2514\u2500\u2500 web\n\u2502       \u2514\u2500\u2500 default.rb\n\u2502       \u2514\u2500\u2500 files\n\u2502       \u2514\u2500\u2500 templates\n\u2514\u2500\u2500 nodes\n    \u2514\u2500\u2500 web-staging.yml\n```\n\n## 3. node\u306brole\u3092\u542b\u3081\u308b\n\n\u3060\u3044\u305f\u3044node\u306frole\u3068\u5bfe\u5fdc\u3059\u308b\u306e\u3067\n\n```\n$ bundle exec itamae local -y nodes/web-staging.yml roles/web/default.rb\n```\n\n\u3068\u3059\u308b\u306e\u306f\u5197\u9577\n\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3001node\u306brole\u3092\u542b\u3081\u308b\u3002\n\u306a\u304a\u3001\u4ee5\u4e0b\u3067\u306fnode\u5185\u3067recipe\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u304c\u3001recipe\u306b\u3059\u308b\u3068\u81ea\u7531\u5ea6\u9ad8\u304f\u3066\n\u3064\u3044\u624b\u629c\u304d\u3057\u305f\u3068\u304d\u306brole\u5916\u306erecipe\u3082\u8ffd\u52a0\u3057\u305f\u308a\u3057\u3066\u3054\u3061\u3083\u3064\u304f\u306e\u3067role\u3067\u7e1b\u3063\u305f\u65b9\u304c\u597d\u304d\nhttp://qiita.com/toritori0318/items/00ea2a75c8321aaf9ef6\n\n\u3053\u3053\u307e\u3067\u3067\u2193\u306e\u72b6\u614b\u3002\u5b8c\u6210\u3002\n\n```\n.\n\u251c\u2500\u2500 cookbooks\n\u2502   \u2514\u2500\u2500 nginx\n\u2502       \u251c\u2500\u2500 default.rb\n\u2502       \u251c\u2500\u2500 files\n\u2502       \u2502   \u2514\u2500\u2500 etc\n\u2502       \u2502       \u2514\u2500\u2500 nginx\n\u2502       \u2502           \u2514\u2500\u2500 conf.d\n\u2502       \u2502               \u2514\u2500\u2500 static.conf\n\u2502       \u2514\u2500\u2500 templates\n\u2502           \u2514\u2500\u2500 etc\n\u2502               \u2514\u2500\u2500 nginx\n\u2502                   \u2514\u2500\u2500 conf.d\n\u2502                       \u2514\u2500\u2500 dynamic.conf\n\u2514\u2500\u2500 roles\n\u2502   \u2514\u2500\u2500 web\n\u2502       \u2514\u2500\u2500 default.rb\n\u2502       \u2514\u2500\u2500 files\n\u2502       \u2514\u2500\u2500 templates\n\u2514\u2500\u2500 nodes\n\u2502   \u2514\u2500\u2500 web-staging.yml\n\u2514\u2500\u2500 entry.rb\n```\n\n```rb:entry.rb\nnode['roles'] = node['roles'] || []\nnode['roles'].each do |role|\n  include_recipe \"roles/#{role}/default.rb\"\nend\n```\n\n```yaml:web-staging.yml\nroles:\n  - app\nnginx:\n  worker_processes: 2\n```\n\n```bash\n$ bundle exec itamae local -y nodes/web-staging.yml entry.rb\n```\n", "tags": ["itamae", "Ruby"]}