{"tags": ["chef", "nodejs"], "context": " More than 1 year has passed since last update.\n\n\u30a8\u30e9\u30fc\u5185\u5bb9\n================================================================================\nError executing action `add` on resource 'apt_repository[node.js]'\n================================================================================\n\n\nMixlib::ShellOut::ShellCommandFailed\n------------------------------------\nexecute[install-key 1655a0ab68576280] (/var/chef/cache/cookbooks/apt/providers/repository.rb line 28) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '2'\n---- Begin output of apt-key adv --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280 ----\nSTDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /tmp/tmp.yuuCkD6HSP --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyring /etc/apt/trusted.gpg.d//zabbix-official-repo.gpg --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280\nSTDERR: gpg: requesting key 68576280 from hkp server keyserver.ubuntu.com\ngpg: keyserver timed out\ngpg: keyserver receive failed: keyserver error\n---- End output of apt-key adv --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280 ----\nRan apt-key adv --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280 returned 2\n\n\n\u539f\u56e0\ngpg\u30b3\u30de\u30f3\u30c9\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306711371\u756a\u30dd\u30fc\u30c8\u4f7f\u7528\u3059\u308b\u306e\u3067\u3059\u304c\u3001chef-client\u3092\u5b9f\u884c\u3057\u305f\u30b5\u30fc\u30d0\u306e11371\u756a\u30dd\u30fc\u30c8\u304c\u7a7a\u3044\u3066\u3044\u306a\u304b\u3063\u305f\u305b\u3044\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5931\u6557\u3057\u307e\u3057\u305f\u3002\n\n\u89e3\u6c7a\u65b9\u6cd5\nchef\u306erole\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3001nodejs\u306ekeyserver\u3092\u300chkp://keyserver.ubuntu.com:80\u300d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n# roles/my-role.json\n\n{\n  \"name\": \"my-role\",\n  \"default_attributes\": {\n    \"nodejs\": {\n      \"keyserver\": \"hkp://keyserver.ubuntu.com:80\"\n    }\n  },\n  \"json_class\": \"Chef::Role\",\n  \"description\": \"\",\n  \"chef_type\": \"role\",\n  \"run_list\": [\n    \"recipe[nodejs]\"\n  ]\n}\n\n\n\u53c2\u8003\n\nnodejs::repo recipe timing out to keyserver for ubuntu\n\u30dd\u30fc\u30c8\u5236\u9650\u306e\u3042\u308b\u74b0\u5883\u3067Ubuntu\u306bPPA\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b\n\n# \u30a8\u30e9\u30fc\u5185\u5bb9\n\n~~~\n================================================================================\nError executing action `add` on resource 'apt_repository[node.js]'\n================================================================================\n\n\nMixlib::ShellOut::ShellCommandFailed\n------------------------------------\nexecute[install-key 1655a0ab68576280] (/var/chef/cache/cookbooks/apt/providers/repository.rb line 28) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '2'\n---- Begin output of apt-key adv --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280 ----\nSTDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /tmp/tmp.yuuCkD6HSP --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyring /etc/apt/trusted.gpg.d//zabbix-official-repo.gpg --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280\nSTDERR: gpg: requesting key 68576280 from hkp server keyserver.ubuntu.com\ngpg: keyserver timed out\ngpg: keyserver receive failed: keyserver error\n---- End output of apt-key adv --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280 ----\nRan apt-key adv --keyserver keyserver.ubuntu.com --recv 1655a0ab68576280 returned 2\n~~~\n\n# \u539f\u56e0\n\ngpg\u30b3\u30de\u30f3\u30c9\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306711371\u756a\u30dd\u30fc\u30c8\u4f7f\u7528\u3059\u308b\u306e\u3067\u3059\u304c\u3001chef-client\u3092\u5b9f\u884c\u3057\u305f\u30b5\u30fc\u30d0\u306e11371\u756a\u30dd\u30fc\u30c8\u304c\u7a7a\u3044\u3066\u3044\u306a\u304b\u3063\u305f\u305b\u3044\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5931\u6557\u3057\u307e\u3057\u305f\u3002\n\n# \u89e3\u6c7a\u65b9\u6cd5\n\nchef\u306erole\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3001nodejs\u306ekeyserver\u3092\u300chkp://keyserver.ubuntu.com:80\u300d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n~~~\n# roles/my-role.json\n\n{\n  \"name\": \"my-role\",\n  \"default_attributes\": {\n    \"nodejs\": {\n      \"keyserver\": \"hkp://keyserver.ubuntu.com:80\"\n    }\n  },\n  \"json_class\": \"Chef::Role\",\n  \"description\": \"\",\n  \"chef_type\": \"role\",\n  \"run_list\": [\n    \"recipe[nodejs]\"\n  ]\n}\n~~~\n\n# \u53c2\u8003\n\n* [nodejs::repo recipe timing out to keyserver for ubuntu](https://github.com/redguide/nodejs/issues/45)\n* [\u30dd\u30fc\u30c8\u5236\u9650\u306e\u3042\u308b\u74b0\u5883\u3067Ubuntu\u306bPPA\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3059\u308b](http://teppeis.hatenablog.com/entry/20110605/1307254225)\n"}