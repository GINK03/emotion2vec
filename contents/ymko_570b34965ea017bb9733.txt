{"context": " More than 1 year has passed since last update.\u30af\u30ea\u30c3\u30af\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3060\u3051\u306e\u3082\u306e\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nSQLite\u3068Teng\u3068\u3044\u3046OR\u30de\u30c3\u30d1\u30fc\u3092\u4f7f\u3046\u7df4\u7fd2\u3067\u3059\u3002\n\u307e\u305a\u3001\u30af\u30ea\u30c3\u30af\u6570\u3092\u4fdd\u6301\u3059\u308b\u9069\u5f53\u306aDB\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n$ sqlite3 count.db\nsqlite> CREATE TABLE tbl (id INTEGER PRIMARY KEY, count INTEGER DEFAULT 0);\nsqlite> INSERT INTO tbl (count) VALUES (1);\nsqlite> .q\n\n\u3042\u3068\u306f\u3072\u306a\u5f62\u3092\u4f5c\u6210\u3057\u3001\u5c11\u3005\u8ffd\u52a0\u4fee\u6b63\u3057\u307e\u3059\u3002\n$ mojo generate lite_app sqlite_sample.pl\n\n\nsqlite_sample.pl\n#!/usr/bin/env perl\n\nuse Mojolicious::Lite;\nuse DBI;\nuse Teng::Schema::Loader;\n\nget '/' => sub {\n  my $c = shift;\n\n  # DB\u304b\u3089\u30b9\u30ad\u30fc\u30de\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3082\u3089\u3044\u307e\u3059\n  my $dbh  = DBI->connect(\"dbi:SQLite:count.db\",\"\",\"\");\n  my $teng = Teng::Schema::Loader->load(\n    dbh => $dbh,\n    namespace => \"My::DB\",\n  );\n\n  # select\u3068update\u306e\u30af\u30a8\u30ea\u30fc\u3092\u6295\u3052\u307e\u3059\n  my $row   = $teng->single('tbl', +{ id => 1 });\n  my $count = $row->count;\n  $row->update({ count => ++$count });\n\n  # \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5909\u6570\u3092\u5c55\u958b\u3057\u3066\u8868\u793a\u3057\u307e\u3059\n  $c->stash(count => $count);\n  $c->render('index');\n};\n\napp->start;\n__DATA__\n\n@@ index.html.ep\n% layout 'default';\n% title 'Welcome';\nWelcome to the Mojolicious real-time web framework!<br>\ncount = <%= $count %><br>\n<a href=\"/\">here</a>\n\n\n@@ layouts/default.html.ep\n<!DOCTYPE html>\n<html>\n  <head><title><%= title %></title></head>\n  <body><%= content %></body>\n</html>\n\n\n\uff12\u306f\u3042\u308b\u304b\u3069\u3046\u304b\u30fb\u30fb\u30fb\n\n\u53c2\u8003\nA Simple Mojolicious/DBI Example | Joel Berger [blogs.perl.org]\nhttp://blogs.perl.org/users/joel_berger/2012/10/a-simple-mojoliciousdbi-example.html\n\u30af\u30ea\u30c3\u30af\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3060\u3051\u306e\u3082\u306e\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nSQLite\u3068Teng\u3068\u3044\u3046OR\u30de\u30c3\u30d1\u30fc\u3092\u4f7f\u3046\u7df4\u7fd2\u3067\u3059\u3002\n\n\u307e\u305a\u3001\u30af\u30ea\u30c3\u30af\u6570\u3092\u4fdd\u6301\u3059\u308b\u9069\u5f53\u306aDB\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```bash\n$ sqlite3 count.db\nsqlite> CREATE TABLE tbl (id INTEGER PRIMARY KEY, count INTEGER DEFAULT 0);\nsqlite> INSERT INTO tbl (count) VALUES (1);\nsqlite> .q\n```\n\n\u3042\u3068\u306f\u3072\u306a\u5f62\u3092\u4f5c\u6210\u3057\u3001\u5c11\u3005\u8ffd\u52a0\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```bash\n$ mojo generate lite_app sqlite_sample.pl\n```\n\n```pl:sqlite_sample.pl\n#!/usr/bin/env perl\n\nuse Mojolicious::Lite;\nuse DBI;\nuse Teng::Schema::Loader;\n\nget '/' => sub {\n  my $c = shift;\n\n  # DB\u304b\u3089\u30b9\u30ad\u30fc\u30de\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3082\u3089\u3044\u307e\u3059\n  my $dbh  = DBI->connect(\"dbi:SQLite:count.db\",\"\",\"\");\n  my $teng = Teng::Schema::Loader->load(\n    dbh => $dbh,\n    namespace => \"My::DB\",\n  );\n\n  # select\u3068update\u306e\u30af\u30a8\u30ea\u30fc\u3092\u6295\u3052\u307e\u3059\n  my $row   = $teng->single('tbl', +{ id => 1 });\n  my $count = $row->count;\n  $row->update({ count => ++$count });\n\n  # \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5909\u6570\u3092\u5c55\u958b\u3057\u3066\u8868\u793a\u3057\u307e\u3059\n  $c->stash(count => $count);\n  $c->render('index');\n};\n\napp->start;\n__DATA__\n\n@@ index.html.ep\n% layout 'default';\n% title 'Welcome';\nWelcome to the Mojolicious real-time web framework!<br>\ncount = <%= $count %><br>\n<a href=\"/\">here</a>\n\n\n@@ layouts/default.html.ep\n<!DOCTYPE html>\n<html>\n  <head><title><%= title %></title></head>\n  <body><%= content %></body>\n</html>\n```\n\n\uff12\u306f\u3042\u308b\u304b\u3069\u3046\u304b\u30fb\u30fb\u30fb\n\n# \u53c2\u8003\n\nA Simple Mojolicious/DBI Example | Joel Berger [blogs.perl.org]\nhttp://blogs.perl.org/users/joel_berger/2012/10/a-simple-mojoliciousdbi-example.html\n\n", "tags": ["Perl", "Mojolicious", "SQLite3"]}