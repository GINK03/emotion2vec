{"tags": ["Flyway3.0", "Java", "gradle", "Android"], "context": " More than 1 year has passed since last update.Java Magazine \u306e\u7b2c 17 \u53f7\u3067\u3082\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u5642\uff1f\u306e Flyway \u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\nFlyway \u3068\u306f\nFlyway \u306f\u3001\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3002\nFlyway \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u72b6\u614b\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\nFlyway \uff08\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\uff09\u3092\u4f7f\u3046\u7406\u7531\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3063\u305f\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u5f80\u3005\u306b\u3057\u3066\u767a\u751f\u3059\u308b\u3002\n\u3088\u304f\u3042\u308b\u554f\u984c\n\n\u3042\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u3001\u73fe\u5728\u306e\u72b6\u614b\u304c\u5206\u304b\u3089\u306a\u3044\u3002\n\u3042\u308b\u30d1\u30c3\u30c1\u7528 SQL \u304c\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u65e2\u306b\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u5206\u304b\u3089\u306a\u3044\u3002\n\u672c\u756a\u74b0\u5883\u3067\u7dca\u6025\u5bfe\u5fdc\u304c\u5fc5\u8981\u306b\u306a\u308a\u9069\u7528\u3057\u305f\u30d1\u30c3\u30c1\u304c\u3001\u30c6\u30b9\u30c8\u74b0\u5883\u306b\u3082\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\u304b\u5206\u304b\u3089\u306a\u3044\u3002\n\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u3069\u306e SQL \u3092\u3001\u3069\u306e\u9806\u756a\u3067\u5b9f\u884c\u3059\u308c\u3070\u3044\u3044\u304b\u5206\u304b\u3089\u306a\u3044\u3002\n\n\u305d\u3093\u306a\u3068\u304d\u306b\u3001 Flyway \u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3059\u308b\u30c4\u30fc\u30eb\u304c\u3042\u308b\u3068\u4fbf\u5229\u3002\n\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3057\u305f\u304b\u3069\u3046\u304b\u306f\u3001 Flyway \u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u3057\u3001\u7c21\u5358\u306b\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u74b0\u5883\u3082\u3001 Flyway \u3092\u5b9f\u884c\u3059\u308c\u3070\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u308b\u3002\n\nHello World\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nFlyway\n\u3053\u3061\u3089 \u304b\u3089\u3001flyway-commandline-3.0.zip\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001 zip \u3092\u89e3\u51cd\u3059\u308b\u3002\n\n\u89e3\u51cd\u5f8c\u306e\u72b6\u614b\n|-bin/\n|-conf/\n|-jars/\n|-sql/\n|-flyway\n|-flyway.cmd\n|-LICENSE.txt\n`-README.txt\n\n\n\u4ee5\u964d\u3001\u3053\u306e\u89e3\u51cd\u5148\u30d5\u30a9\u30eb\u30c0\u3092 %FLYWAY_DIR% \u3068\u8868\u8a18\u3059\u308b\u3002\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\nHSQLDB \u3092\u4f7f\u7528\u3059\u308b\u3002\n\u3053\u3061\u3089 \u304b\u3089\u3001 hsqldb-2.3.2.zip \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001 zip \u3092\u89e3\u51cd\u3057\u3001 lib \u306e\u4e0b\u306e hsqldb.jar \u3092\u53d6\u5f97\u3059\u308b\u3002\n\nJava\n\u5272\u611b\u3002\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\nSQL \u3092\u4f5c\u6210\u3059\u308b\n\nV1__create_table.sql\nCREATE TABLE HOGE (\n    ID INT,\n    VALUE VARCHAR(12)\n);\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\nflyway.properties\nflyway.user=SA\nflyway.url=jdbc:hsqldb:file:./db/sample\n\n\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3002\n\n\n\n\u30d5\u30a1\u30a4\u30eb\n\u914d\u7f6e\u5148\n\n\n\n\nV1__create_table.sql\n%FLYWAY_DIR%\\sql\n\n\nflyway.properties\n%FLYWAY_DIR%\\conf\n\n\nhsqldb.jar\n%FLYWAY_DIR%\\jars\n\n\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n%FLYWAY_DIR%/\n  |-sql/\n  |  `-V1__create_table.sql\n  |-conf/\n  |  `-flyway.properties\n  |-jars/\n  |  `-hsqldb.jar\n  :\n  :\n\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u3001 %FLYWAY_DIR% \u306b\u79fb\u52d5\u3057\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n> flyway migrate\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\nValidated 1 migration (execution time 00:00.010s)\nCreating Metadata table: \"PUBLIC\".\"schema_version\"\nCurrent version of schema \"PUBLIC\": << Empty Schema >>\nMigrating schema \"PUBLIC\" to version 1\nSuccessfully applied 1 migration to schema \"PUBLIC\" (execution time 00:00.020s).\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\n\nHOGE \u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+--------------+---------------------+---------+\n| Version        | Description  | Installed on        | State   |\n+----------------+--------------+---------------------+---------+\n| 1              | create table | 2014-08-02 11:40:21 | Success |\n+----------------+--------------+---------------------+---------+\n\n\n\u8aac\u660e\nFlyway \u3067\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u9069\u7528\u3059\u308b\u5404 SQL \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306b\u4f5c\u6210\u3057\u3066\u3001\u7ba1\u7406\u3059\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u66f8\u5f0f\u304c\u6c7a\u3081\u3089\u308c\u3066\u304a\u308a\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u304b\u3089\u59cb\u307e\u308b\u5f62\u3067\u6307\u5b9a\u3059\u308b\u3002\n\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306f\u4e00\u610f\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u306e SQL \u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002\nflyway migrate \u30b3\u30de\u30f3\u30c9\u3067\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u3001\u307e\u3060\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u9069\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e SQL \u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\u65e2\u306b\u9069\u7528\u6e08\u307f\u306e SQL \u306f\u3001 Flyway \u304c\u5224\u65ad\u3057\u3066\u9069\u7528\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u304f\u308c\u308b\u3002\n\u3053\u308c\u306b\u3088\u3063\u3066\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u30b9\u30e0\u30fc\u30ba\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u3064\u3044\u3066\n\n\u66f8\u5f0f\nV<Version>__<Description>.sql\n\nV\n\nSQL \u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u306f\u3001\u5fc5\u305a V \u304b\u3089\u59cb\u3081\u308b\u3002\n\n<Version>\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u3002\n\u534a\u89d2\u6570\u5024\u3068\u3001\u30c9\u30c3\u30c8 . \u307e\u305f\u306f\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc _ \u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u6307\u5b9a\u3059\u308b\u3002\n\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306f\u3001\u5b9f\u884c\u6642\u306b\u30c9\u30c3\u30c8\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n\n\u4f8b\n2\n2.1.0\n3_1_2\n\n\n\n__\n\n\u300c\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u300d\u3068\u300c\u8aac\u660e\u300d\u3068\u3092\u533a\u5207\u308b\u90e8\u5206\u3002\n\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u3092\uff12\u3064\u7d9a\u3051\u308b\u3002\n\n<Description>\n\n\u8aac\u660e\u3002\n\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8aac\u660e\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306f\u5b9f\u884c\u6642\u306b\u7a7a\u767d\u30b9\u30da\u30fc\u30b9\u306b\u7f6e\u304d\u63db\u308f\u308b\u3002\n\u8aac\u660e\u306f\u3001 flyway info \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306b Description \u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u308b\u3002\n\n\u4f8b\n\nV1.0__create_table.sql\nCREATE TABLE HOGE (\n    ID INT,\n    VALUE VARCHAR(12)\n);\n\n\n\nV1.1__insert_data.sql\nINSERT INTO HOGE VALUES (1, 'hoge');\n\n\n\nV2_0__create_table.sql\nCREATE TABLE FUGA (\n    ID INT,\n    VALUE VARCHAR(12)\n);\n\n\n\nV2_1__insert_data.sql\nINSERT INTO FUGA VALUES (1, 'fuga');\n\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\n> flyway migrate\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\nValidated 4 migrations (execution time 00:00.010s)\nCreating Metadata table: \"PUBLIC\".\"schema_version\"\nCurrent version of schema \"PUBLIC\": << Empty Schema >>\nMigrating schema \"PUBLIC\" to version 1.0\nMigrating schema \"PUBLIC\" to version 1.1\nMigrating schema \"PUBLIC\" to version 2.0\nMigrating schema \"PUBLIC\" to version 2.1\nSuccessfully applied 4 migrations to schema \"PUBLIC\" (execution time 00:00.090s).\n\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+--------------+---------------------+---------+\n| Version        | Description  | Installed on        | State   |\n+----------------+--------------+---------------------+---------+\n| 1.0            | create table | 2014-08-02 12:16:28 | Success |\n| 1.1            | insert data  | 2014-08-02 12:16:28 | Success |\n| 2.0            | create table | 2014-08-02 12:16:28 | Success |\n| 2.1            | insert data  | 2014-08-02 12:16:28 | Success |\n+----------------+--------------+---------------------+---------+\n\n\n\n\u30b3\u30de\u30f3\u30c9\nFlyway \u306b\u306f migrate \u3084 info \u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u4ee5\u4e0b\u304c\u3001\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u306e\u4e00\u89a7\u3002\n\n\n\n\u30b3\u30de\u30f3\u30c9\n\u5185\u5bb9\n\n\n\n\nmigrate\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\n\n\nclean\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0a\u306e\u5168\u3066\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u3059\u308b\u3002\u3053\u308c\u306b\u306f\u3001 SQL \u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u3001\u624b\u52d5\u3067\u4f5c\u6210\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082\u542b\u307e\u308c\u308b\u3002\n\n\ninfo\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u307e\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u3002\n\n\nvalidate\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u3001\u7528\u610f\u3055\u308c\u3066\u3044\u308b SQL \u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5dee\u7570\u304c\u7121\u3044\u304b\u3092\u78ba\u8a8d\u3059\u308b\u3002\u5dee\u7570\u304c\u3042\u308b\u5834\u5408\u306f\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002\n\n\ninit\nFlyway \u7528\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u3060\u3051\u3092\u4f5c\u6210\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\uff11\u306b\u3059\u308b\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u53ef\u80fd\uff09\u3002\n\n\nrepair\n\u72b6\u614b\u304c Failed \u306b\u306a\u3063\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3059\u308b\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u3002\n\n\n\n\nrepair \u30b3\u30de\u30f3\u30c9\n\u3042\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e SQL \u30d5\u30a1\u30a4\u30eb\u304c\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u4e0a\u3067\u306f\u3001\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Status \u304c Failed \u306b\u306a\u308b\u3002\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u5931\u6557\u3057\u305f\u72b6\u614b\u306eStatus\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+---------------+---------------------+---------+\n| Version        | Description   | Installed on        | State   |\n+----------------+---------------+---------------------+---------+\n| 1.0            | create table  | 2014-08-02 12:32:26 | Success |\n| 1.1            | insert data   | 2014-08-02 12:33:08 | Failed  |\n| 2.0            | create table  |                     | Pending |\n| 2.1            | insert data   |                     | Pending |\n+----------------+---------------+---------------------+---------+\n\n\n\u3053\u306e\u72b6\u614b\u3067\u306f\u3001\u305f\u3068\u3048\u554f\u984c\u306e SQL \u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u3066\u3082\u3001 migrate \u3092\u5b9f\u884c\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\u30a8\u30e9\u30fc\u3092\u53d6\u308a\u9664\u304f\u305f\u3081\u306b\u306f\u3001 repair \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n> flyway repair\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\nMetadata table \"PUBLIC\".\"schema_version\" successfully repaired (execution time 00:00.000s).\nManual cleanup of the remaining effects the failed migration may still be required.\n\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+--------------+---------------------+---------+\n| Version        | Description  | Installed on        | State   |\n+----------------+--------------+---------------------+---------+\n| 1.0            | create table | 2014-08-02 12:32:26 | Success |\n| 1.1            | insert data  |                     | Pending |\n| 2.0            | create table |                     | Pending |\n| 2.1            | insert data  |                     | Pending |\n+----------------+--------------+---------------------+---------+\n\n\n\u69d8\u3005\u306a\u5b9f\u884c\u65b9\u6cd5\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5229\u7528\u3059\u308b\n\u300cHello World\u300d\u3067\u8aac\u660e\u3057\u305f\u65b9\u6cd5\u304c\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u306b\u306a\u308b\u3002\n\nJava \u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u7d44\u307f\u8fbc\u3093\u3067\u5229\u7528\u3059\u308b\nFlyway \u306f Java \u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u7d44\u307f\u8fbc\u3093\u3067\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\n\nbuild.gradle\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.hsqldb:hsqldb:2.3.2'\n    compile 'org.flywaydb:flyway-core:3.0'\n}\n\n\n\nMain.java\npackage sample.flyway;\n\nimport org.flywaydb.core.Flyway;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        Flyway flyway = new Flyway();\n\n        flyway.setDataSource(\"jdbc:hsqldb:file:./db/sample\", \"SA\", \"\");\n\n        flyway.migrate();\n    }\n}\n\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n`-src/\n  `-main/\n    |-java/\n    |  `-sample/\n    |    `-flyway/\n    |      `-Main.java\n    `-resources/\n      `-db/\n        `-migration/\n          `-V1__create_table.sql\n\n\nSQL \u30d5\u30a1\u30a4\u30eb\u306f\u3001 \u30af\u30e9\u30b9\u30d1\u30b9\u4ee5\u4e0b\u306e db/migration \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u3002\n\nGradle \u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u5229\u7528\u3059\u308b\n\nbuild.gradle\napply plugin: 'java'\napply plugin: 'flyway'\n\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.hsqldb:hsqldb:2.3.2\"\n        classpath \"org.flywaydb:flyway-gradle-plugin:3.0\"\n    }\n}\n\nflyway {\n    user = 'SA'\n    url = 'jdbc:hsqldb:file:./database/sample'\n}\n\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-build.gradle\n`-src/\n  `-main/\n    `-resources/\n      `-db/\n        `-migration/\n          `-V1__create_table.sql\n\n\n\n\u5b9f\u884c\n> gradle flywayMigrate\n:flywayMigrate\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayMigrate\n\nBUILD SUCCESSFUL\n\nTotal time: 4.084 secs\n\n> gradle flywayInfo\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayInfo\n+----------------+----------------------------+---------------------+---------+\n| Version        | Description                | Installed on        | State   |\n+----------------+----------------------------+---------------------+---------+\n| 1              | create table               | 2014-08-02 14:50:01 | Success |\n+----------------+----------------------------+---------------------+---------+\n\nBUILD SUCCESSFUL\n\nTotal time: 3.792 secs\n\n\nbuildscript \u3067 Flyway \u306e Gradle \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u3001 appliy plugin: 'flyway' \u3068\u3059\u308b\u3053\u3068\u3067\u3001 Gradle \u304b\u3089 Flyway \u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\nSQL \u30d5\u30a1\u30a4\u30eb\u306f\u5b9f\u884c\u6642\u306b\u30af\u30e9\u30b9\u30d1\u30b9\u304c\u901a\u3063\u3066\u3044\u308b\u5834\u6240\u304b\u3089\u898b\u3066 db/migration \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\u3064\u307e\u308a\u3001 src/main/resources/db/migration \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308c\u3070\u3001 Flyway \u304c\u691c\u51fa\u3067\u304d\u308b\uff08\u5834\u6240\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u53ef\u80fd\uff09\u3002\n\nJava \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3059\u308b\nLOB \u30c7\u30fc\u30bf\u3092\u6271\u3046\u5fc5\u8981\u304c\u3042\u3063\u305f\u308a\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u65b9\u6cd5\u304c\u8907\u96d1\u306a\u5834\u5408\u306f\u3001 Java \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u3053\u3053\u3067\u306f\u3001 Gradle \u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u5408\u308f\u305b\u3066\u4f7f\u7528\u3057\u3066\u307f\u308b\u3002\n\n\u5b9f\u88c5\u65b9\u6cd5\n\nbuild.gradle\napply plugin: 'java'\napply plugin: 'flyway'\n\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.hsqldb:hsqldb:2.3.2\"\n        classpath \"org.flywaydb:flyway-gradle-plugin:3.0\"\n    }\n}\n\nflyway {\n    user = 'SA'\n    url = 'jdbc:hsqldb:file:./database/sample'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.flywaydb:flyway-gradle-plugin:3.0\"\n}\n\n\n\nV2__insert_data.java\npackage db.migration;\n\nimport java.sql.Connection;\nimport java.sql.Statement;\n\nimport org.flywaydb.core.api.migration.jdbc.JdbcMigration;\n\npublic class V2__insert_data implements JdbcMigration {\n\n    @Override\n    public void migrate(Connection connection) throws Exception {\n\n        try (Statement statement = connection.createStatement();) {\n            statement.executeUpdate(\"INSERT INTO HOGE VALUES (1, 'hoge')\");\n        }\n\n    }\n}\n\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-build.gradle\n`-src/\n  `-main/\n    |-java/\n    | `-db/\n    |   `-migration/\n    |     `-V2__insert_data.java\n    `-resources/\n      `-db/\n        `-migration/\n          `-V1__create_table.sql\n\n\n\n\u5b9f\u884c\n\n\u5b9f\u884c\n> gradle flywayMigrate\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayMigrate\n\nBUILD SUCCESSFUL\n\nTotal time: 4.002 secs\n\n> gradle flywayInfo\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayInfo\n+----------------+----------------------------+---------------------+---------+\n| Version        | Description                | Installed on        | State   |\n+----------------+----------------------------+---------------------+---------+\n| 1              | create table               | 2014-08-02 14:53:43 | Success |\n| 2              | insert data                | 2014-08-02 14:53:43 | Success |\n+----------------+----------------------------+---------------------+---------+\n\nBUILD SUCCESSFUL\n\nTotal time: 4.01 secs\n\n\n\n\u8aac\u660e\nJava \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3059\u308b\u5834\u5408\u306f\u3001 SQL \u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u3088\u3046\u306b\u5b9a\u3081\u3089\u308c\u305f\u66f8\u5f0f\u3067\u30af\u30e9\u30b9\u540d\u3092\u5b9a\u7fa9\u3059\u308b\uff08V2__insert_data.java\uff09\u3002\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30af\u30e9\u30b9\u306f\u3001 JdbcMigration \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u3001 migrate() \u30e1\u30bd\u30c3\u30c9\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\nAndroid \u3067\u4f7f\u7528\u3059\u308b\nFlyway \u306f Android \u306b\u7d44\u307f\u8fbc\u3093\u3067\u5229\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\nflyway \u672c\u4f53\uff08flyway-core\uff09\u306e\u4ed6\u306b SQLDroid \u3068\u3044\u3046 Android \u7528\u306e JDBC \u30c9\u30e9\u30a4\u30d0\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\nbuild.gradle\ndependencies {\n    compile 'org.flywaydb:flyway-core:3.0'\n    compile 'org.sqldroid:sqldroid:1.0.3'\n}\n\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e SQL \u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e SQL \u30d5\u30a1\u30a4\u30eb\u306f\u3001 assets/db/migration \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\n\nV1__create_database.sql\nCREATE TABLE SAMPLE_TABLE (\n    ID INTEGER PRIMARY KEY AUTOINCREMENT,\n    CODE,\n    NAME\n);\n\nINSERT INTO SAMPLE_TABLE (CODE, NAME) VALUES ('hoge', 'HOGE');\nINSERT INTO SAMPLE_TABLE (CODE, NAME) VALUES ('fuga', 'FUGA');\nINSERT INTO SAMPLE_TABLE (CODE, NAME) VALUES ('piyo', 'PIYO');\n\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\n\nMainActivity.java\npackage com.example.flywaysample;\n\nimport org.flywaydb.core.Flyway;\nimport org.flywaydb.core.api.android.ContextHolder;\n\nimport android.app.Activity;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.os.Bundle;\nimport android.util.Log;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\n        SQLiteDatabase db = this.openOrCreateDatabase(\"sample.db\", MODE_PRIVATE, null);\n        ContextHolder.setContext(this.getApplicationContext());\n\n        Flyway flyway = new Flyway();\n        flyway.setDataSource(\"jdbc:sqlite:\" + db.getPath(), \"\", \"\");\n        flyway.migrate();\n        Log.v(\"FlywaySample\", \"migrate database.\");\n\n        // \u30c7\u30fc\u30bf\u53d6\u5f97\n        Cursor cursor = db.rawQuery(\"SELECT * FROM SAMPLE_TABLE\", null);\n        boolean next = cursor.moveToFirst();\n\n        while (next) {\n            int id = cursor.getInt(0);\n            String code = cursor.getString(1);\n            String name = cursor.getString(2);\n\n            Log.v(\"FlywaySample\", String.format(\"id=%d, code=%s, name=%s%n\", id, code, name));\n\n            next = cursor.moveToNext();\n        }\n\n        cursor.close();\n        db.close();\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\nLogCat\n10-12 07:50:40.385: V/FlywaySample(11986): migrate database.\n10-12 07:50:40.385: V/FlywaySample(11986): id=1, code=hoge, name=HOGE\n10-12 07:50:40.385: V/FlywaySample(11986): id=2, code=fuga, name=FUGA\n10-12 07:50:40.395: V/FlywaySample(11986): id=3, code=piyo, name=PIYO\n\n\n\nContextHolder.setContext() \u306b\u3064\u3044\u3066\n\uff11\u70b9\u8981\u6ce8\u610f\u306a\u306e\u304c\u3001\nContextHolder.setContext(this.getApplicationContext());\n\n\u3053\u306e\u90e8\u5206\u3002\nContextHolder \u306f\u3001\u540d\u524d\u306e\u901a\u308a Context \u3092\u4fdd\u6301\u3057\u3066\u304a\u304f\u305f\u3081\u306e\u30af\u30e9\u30b9\u3067\u3001 Flyway \u304c DB \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u6642\u306b assets/db/migration \u304b\u3089 SQL \u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3059\u308b\u306e\u306b\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n\u306a\u3093\u3060\u304b\u5acc\u306a\u81ed\u3044\u304c\u30d7\u30f3\u30d7\u30f3\u3057\u305f\uff08static \u30e1\u30bd\u30c3\u30c9\u3067 Context \u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\uff09\u306e\u3067\u3001\u5b9f\u88c5\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u3002\n\nContextHolder.java\uff08\u30b3\u30e1\u30f3\u30c8\u9664\u53bb\uff09\npackage org.flywaydb.core.api.android;\n\nimport android.content.Context;\n\npublic class ContextHolder {\n    private ContextHolder() {}\n\n    private static Context context;\n\n    public static Context getContext() {\n        return context;\n    }\n\n    public static void setContext(Context context) {\n        ContextHolder.context = context;\n    }\n}\n\n\nstatic \u30d5\u30a3\u30fc\u30eb\u30c9\u306b Context \u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\u3002\n\u3064\u307e\u308a\u3001\u3082\u3057 setContext() \u306b Activity \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6e21\u3057\u3066\u3057\u307e\u3046\u3068 Activity \u7d42\u4e86\u5f8c\u3082\u53c2\u7167\u304c\u6b8b\u3063\u3066\u3057\u307e\u3044\u3001\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u304c\u767a\u751f\u3059\u308b\u5371\u967a\u6027\u304c\u3042\u308b\u3002\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u308f\u3063\u305f\u3089\u5fc5\u305a setContext(null) \u3059\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308b\u304c\u3001\u6700\u521d\u304b\u3089 ApplicationContext \u3092\u6e21\u3059\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u3044\u3044\u3068\u601d\u3046\u3002\nFlyway \u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u306b\u5b9f\u88c5\u3059\u308b\u3068\u3001 Acitivty \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6e21\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u5371\u967a\u3067\u3059\u3002\n\nSQLiteOpenHelper \u3092\u4f7f\u3063\u305f\u5b9f\u88c5\nActivity \u306b\u76f4\u63a5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u51e6\u7406\u3092\u66f8\u304f\u306e\u306f\u304a\u884c\u5100\u304c\u60aa\u3044\u306e\u3067\u3001 SQLiteOpenHelper \u3092\u4f7f\u3063\u305f\u5b9f\u88c5\u306b\u5207\u308a\u66ff\u3048\u3066\u307f\u308b\u3002\n\n\u5b9f\u88c5\n\nSampleTable\npackage com.example.flywaysample;\n\npublic class SampleTable {\n\n    private int id;\n    private String code;\n    private String name;\n\n    public SampleTable(int id, String code, String name) {\n        this.id = id;\n        this.code = code;\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"SampleTable [id=\" + id + \", code=\" + code + \", name=\" + name + \"]\";\n    }\n}\n\n\n\nMyDatabaseHelper.java\npackage com.example.flywaysample;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.flywaydb.core.Flyway;\nimport org.flywaydb.core.api.android.ContextHolder;\n\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.Log;\n\npublic class MyDatabaseHelper extends SQLiteOpenHelper {\n\n    private static final String DATABASE_NAME = \"sample.db\";\n    private static final int DATABASE_VERSION = 1;\n\n    public MyDatabaseHelper(Context context) {\n        super(context, DATABASE_NAME, null, DATABASE_VERSION);\n\n        SQLiteDatabase db = getWritableDatabase();\n        ContextHolder.setContext(context.getApplicationContext());\n\n        Flyway flyway = new Flyway();\n        flyway.setDataSource(\"jdbc:sqlite:\" + db.getPath(), \"\", \"\");\n        flyway.migrate();\n\n        Log.v(\"FlywaySample\", \"migrate database.\");\n\n        db.close();\n    }\n\n    public List<SampleTable> findAll() {\n        SQLiteDatabase db = getReadableDatabase();\n\n        Cursor cursor = db.rawQuery(\"SELECT * FROM SAMPLE_TABLE\", null);\n        boolean next = cursor.moveToFirst();\n\n        List<SampleTable> list = new ArrayList<SampleTable>();\n\n        while (next) {\n            int id = cursor.getInt(0);\n            String code = cursor.getString(1);\n            String name = cursor.getString(2);\n\n            list.add(new SampleTable(id, code, name));\n\n            next = cursor.moveToNext();\n        }\n\n        cursor.close();\n        db.close();\n\n        return list;\n    }\n\n    @Override public void onCreate(SQLiteDatabase db) {/* no use */}\n    @Override public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {/* no use */}\n}\n\n\n\nMainActivity.java\npackage com.example.flywaysample;\n\nimport java.util.List;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.util.Log;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        MyDatabaseHelper dbHelper = new MyDatabaseHelper(this);\n        List<SampleTable> list = dbHelper.findAll();\n\n        for (SampleTable sample : list) {\n            Log.v(\"FlywaySample\", sample.toString());\n        }\n    }\n}\n\n\n\n\u8aac\u660e\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u306f Flyway \u304c\u7ba1\u7406\u3059\u308b\u306e\u3067\u3001 onCreate() \u3068 onUpgrade() \u306f\u4f7f\u7528\u3057\u306a\u3044\u3002\n\u4ee3\u308f\u308a\u306b\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u6642\u70b9\u3067 getWritableDatabase() \u3057\u3066\u3001 Flyway \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3063\u3066\u3044\u308b\u3002\n\n\n\u53c2\u8003\n\nGet Started - Flyway Database Migrations Made Easy.\nDocumentation - Flyway Database Migrations Made Easy.\n\n[Java Magazine \u306e\u7b2c 17 \u53f7](http://www.oracle.com/technetwork/jp/articles/java/overview/index.html)\u3067\u3082\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u5642\uff1f\u306e Flyway \u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\n#Flyway \u3068\u306f\nFlyway \u306f\u3001\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3002\n\nFlyway \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u72b6\u614b\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n##Flyway \uff08\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\uff09\u3092\u4f7f\u3046\u7406\u7531\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3063\u305f\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u5f80\u3005\u306b\u3057\u3066\u767a\u751f\u3059\u308b\u3002\n\n__\u3088\u304f\u3042\u308b\u554f\u984c__\n\n- \u3042\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u3001\u73fe\u5728\u306e\u72b6\u614b\u304c\u5206\u304b\u3089\u306a\u3044\u3002\n- \u3042\u308b\u30d1\u30c3\u30c1\u7528 SQL \u304c\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u65e2\u306b\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u5206\u304b\u3089\u306a\u3044\u3002\n- \u672c\u756a\u74b0\u5883\u3067\u7dca\u6025\u5bfe\u5fdc\u304c\u5fc5\u8981\u306b\u306a\u308a\u9069\u7528\u3057\u305f\u30d1\u30c3\u30c1\u304c\u3001\u30c6\u30b9\u30c8\u74b0\u5883\u306b\u3082\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\u304b\u5206\u304b\u3089\u306a\u3044\u3002\n- \u65b0\u3057\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u3069\u306e SQL \u3092\u3001\u3069\u306e\u9806\u756a\u3067\u5b9f\u884c\u3059\u308c\u3070\u3044\u3044\u304b\u5206\u304b\u3089\u306a\u3044\u3002\n\n\u305d\u3093\u306a\u3068\u304d\u306b\u3001 Flyway \u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3059\u308b\u30c4\u30fc\u30eb\u304c\u3042\u308b\u3068\u4fbf\u5229\u3002\n\n\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3057\u305f\u304b\u3069\u3046\u304b\u306f\u3001 Flyway \u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u3057\u3001\u7c21\u5358\u306b\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u74b0\u5883\u3082\u3001 Flyway \u3092\u5b9f\u884c\u3059\u308c\u3070\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u308b\u3002\n\n#Hello World\n##\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n###Flyway\n[\u3053\u3061\u3089](http://flywaydb.org/getstarted/download.html) \u304b\u3089\u3001`flyway-commandline-3.0.zip`\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001 zip \u3092\u89e3\u51cd\u3059\u308b\u3002\n\n```text:\u89e3\u51cd\u5f8c\u306e\u72b6\u614b\n|-bin/\n|-conf/\n|-jars/\n|-sql/\n|-flyway\n|-flyway.cmd\n|-LICENSE.txt\n`-README.txt\n```\n\n\u4ee5\u964d\u3001\u3053\u306e\u89e3\u51cd\u5148\u30d5\u30a9\u30eb\u30c0\u3092 `%FLYWAY_DIR%` \u3068\u8868\u8a18\u3059\u308b\u3002\n\n###\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\nHSQLDB \u3092\u4f7f\u7528\u3059\u308b\u3002\n\n[\u3053\u3061\u3089](http://sourceforge.net/projects/hsqldb/files/hsqldb/hsqldb_2_3/) \u304b\u3089\u3001 `hsqldb-2.3.2.zip` \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001 zip \u3092\u89e3\u51cd\u3057\u3001 lib \u306e\u4e0b\u306e `hsqldb.jar` \u3092\u53d6\u5f97\u3059\u308b\u3002\n\n###Java\n\u5272\u611b\u3002\n\n##\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n###SQL \u3092\u4f5c\u6210\u3059\u308b\n```sql:V1__create_table.sql\nCREATE TABLE HOGE (\n    ID INT,\n    VALUE VARCHAR(12)\n);\n```\n\n###\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n```properties:flyway.properties\nflyway.user=SA\nflyway.url=jdbc:hsqldb:file:./db/sample\n```\n\n###\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3002\n\n|\u30d5\u30a1\u30a4\u30eb|\u914d\u7f6e\u5148|\n|:--|:--|\n|V1__create_table.sql|%FLYWAY_DIR%\\sql|\n|flyway.properties|%FLYWAY_DIR%\\conf|\n|hsqldb.jar|%FLYWAY_DIR%\\jars|\n\n\n```text:\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n%FLYWAY_DIR%/\n  |-sql/\n  |  `-V1__create_table.sql\n  |-conf/\n  |  `-flyway.properties\n  |-jars/\n  |  `-hsqldb.jar\n  :\n  :\n```\n\n###\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u3001 `%FLYWAY_DIR%` \u306b\u79fb\u52d5\u3057\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```text:\n> flyway migrate\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\nValidated 1 migration (execution time 00:00.010s)\nCreating Metadata table: \"PUBLIC\".\"schema_version\"\nCurrent version of schema \"PUBLIC\": << Empty Schema >>\nMigrating schema \"PUBLIC\" to version 1\nSuccessfully applied 1 migration to schema \"PUBLIC\" (execution time 00:00.020s).\n```\n\n###\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\n![flyway.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/78982f2e-1919-9bc8-9d1b-939e77d4a775.jpeg)\n\nHOGE \u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3002\n\n###\u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```text:\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+--------------+---------------------+---------+\n| Version        | Description  | Installed on        | State   |\n+----------------+--------------+---------------------+---------+\n| 1              | create table | 2014-08-02 11:40:21 | Success |\n+----------------+--------------+---------------------+---------+\n```\n\n###\u8aac\u660e\nFlyway \u3067\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u9069\u7528\u3059\u308b\u5404 SQL \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306b\u4f5c\u6210\u3057\u3066\u3001\u7ba1\u7406\u3059\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u66f8\u5f0f\u304c\u6c7a\u3081\u3089\u308c\u3066\u304a\u308a\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u304b\u3089\u59cb\u307e\u308b\u5f62\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306f\u4e00\u610f\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u306e SQL \u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002\n\n`flyway migrate` \u30b3\u30de\u30f3\u30c9\u3067\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u3001\u307e\u3060\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u9069\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e SQL \u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\u65e2\u306b\u9069\u7528\u6e08\u307f\u306e SQL \u306f\u3001 Flyway \u304c\u5224\u65ad\u3057\u3066\u9069\u7528\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u3053\u308c\u306b\u3088\u3063\u3066\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u30b9\u30e0\u30fc\u30ba\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n#\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u3064\u3044\u3066\n##\u66f8\u5f0f\n`V<Version>__<Description>.sql`\n\n###`V`\nSQL \u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u306f\u3001\u5fc5\u305a `V` \u304b\u3089\u59cb\u3081\u308b\u3002\n\n###`<Version>`\n\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u3002\n\n\u534a\u89d2\u6570\u5024\u3068\u3001\u30c9\u30c3\u30c8 `.` \u307e\u305f\u306f\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc `_` \u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306f\u3001\u5b9f\u884c\u6642\u306b\u30c9\u30c3\u30c8\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n\n```text:\u4f8b\n2\n2.1.0\n3_1_2\n```\n\n###`__`\n\u300c\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u300d\u3068\u300c\u8aac\u660e\u300d\u3068\u3092\u533a\u5207\u308b\u90e8\u5206\u3002\n\n\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u3092\uff12\u3064\u7d9a\u3051\u308b\u3002\n\n###`<Description>`\n\u8aac\u660e\u3002\n\n\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8aac\u660e\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n\u30a2\u30f3\u30c0\u30fc\u30d0\u30fc\u306f\u5b9f\u884c\u6642\u306b\u7a7a\u767d\u30b9\u30da\u30fc\u30b9\u306b\u7f6e\u304d\u63db\u308f\u308b\u3002\n\n\u8aac\u660e\u306f\u3001 `flyway info` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306b `Description` \u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u308b\u3002\n\n##\u4f8b\n```sql:V1.0__create_table.sql\nCREATE TABLE HOGE (\n    ID INT,\n    VALUE VARCHAR(12)\n);\n```\n\n```sql:V1.1__insert_data.sql\nINSERT INTO HOGE VALUES (1, 'hoge');\n```\n\n```sql:V2_0__create_table.sql\nCREATE TABLE FUGA (\n    ID INT,\n    VALUE VARCHAR(12)\n);\n```\n\n```sql:V2_1__insert_data.sql\nINSERT INTO FUGA VALUES (1, 'fuga');\n```\n\n```text:\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\n> flyway migrate\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\nValidated 4 migrations (execution time 00:00.010s)\nCreating Metadata table: \"PUBLIC\".\"schema_version\"\nCurrent version of schema \"PUBLIC\": << Empty Schema >>\nMigrating schema \"PUBLIC\" to version 1.0\nMigrating schema \"PUBLIC\" to version 1.1\nMigrating schema \"PUBLIC\" to version 2.0\nMigrating schema \"PUBLIC\" to version 2.1\nSuccessfully applied 4 migrations to schema \"PUBLIC\" (execution time 00:00.090s).\n\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+--------------+---------------------+---------+\n| Version        | Description  | Installed on        | State   |\n+----------------+--------------+---------------------+---------+\n| 1.0            | create table | 2014-08-02 12:16:28 | Success |\n| 1.1            | insert data  | 2014-08-02 12:16:28 | Success |\n| 2.0            | create table | 2014-08-02 12:16:28 | Success |\n| 2.1            | insert data  | 2014-08-02 12:16:28 | Success |\n+----------------+--------------+---------------------+---------+\n```\n\n#\u30b3\u30de\u30f3\u30c9\nFlyway \u306b\u306f `migrate` \u3084 `info` \u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u4ee5\u4e0b\u304c\u3001\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u306e\u4e00\u89a7\u3002\n\n|\u30b3\u30de\u30f3\u30c9|\u5185\u5bb9|\n|:--|:--|\n|migrate|\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b|\n|clean|\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0a\u306e\u5168\u3066\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u3059\u308b\u3002\u3053\u308c\u306b\u306f\u3001 SQL \u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u3001\u624b\u52d5\u3067\u4f5c\u6210\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082\u542b\u307e\u308c\u308b\u3002|\n|info|\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u307e\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u3002|\n|validate|\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u3001\u7528\u610f\u3055\u308c\u3066\u3044\u308b SQL \u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5dee\u7570\u304c\u7121\u3044\u304b\u3092\u78ba\u8a8d\u3059\u308b\u3002\u5dee\u7570\u304c\u3042\u308b\u5834\u5408\u306f\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002|\n|init|Flyway \u7528\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u3060\u3051\u3092\u4f5c\u6210\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\uff11\u306b\u3059\u308b\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u53ef\u80fd\uff09\u3002|\n|repair|\u72b6\u614b\u304c `Failed` \u306b\u306a\u3063\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3059\u308b\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u3002|\n\n##repair \u30b3\u30de\u30f3\u30c9\n\u3042\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e SQL \u30d5\u30a1\u30a4\u30eb\u304c\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u4e0a\u3067\u306f\u3001\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Status \u304c `Failed` \u306b\u306a\u308b\u3002\n\n```text:\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u5931\u6557\u3057\u305f\u72b6\u614b\u306eStatus\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+---------------+---------------------+---------+\n| Version        | Description   | Installed on        | State   |\n+----------------+---------------+---------------------+---------+\n| 1.0            | create table  | 2014-08-02 12:32:26 | Success |\n| 1.1            | insert data   | 2014-08-02 12:33:08 | Failed  |\n| 2.0            | create table  |                     | Pending |\n| 2.1            | insert data   |                     | Pending |\n+----------------+---------------+---------------------+---------+\n```\n\n\u3053\u306e\u72b6\u614b\u3067\u306f\u3001\u305f\u3068\u3048\u554f\u984c\u306e SQL \u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u3066\u3082\u3001 `migrate` \u3092\u5b9f\u884c\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\n\u30a8\u30e9\u30fc\u3092\u53d6\u308a\u9664\u304f\u305f\u3081\u306b\u306f\u3001 `repair` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```text:\n> flyway repair\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\nMetadata table \"PUBLIC\".\"schema_version\" successfully repaired (execution time 00:00.000s).\nManual cleanup of the remaining effects the failed migration may still be required.\n\n> flyway info\nFlyway (Command-line Tool) v.3.0\n\nDatabase: jdbc:hsqldb:file:./db/sample (HSQL Database Engine 2.3)\n\n+----------------+--------------+---------------------+---------+\n| Version        | Description  | Installed on        | State   |\n+----------------+--------------+---------------------+---------+\n| 1.0            | create table | 2014-08-02 12:32:26 | Success |\n| 1.1            | insert data  |                     | Pending |\n| 2.0            | create table |                     | Pending |\n| 2.1            | insert data  |                     | Pending |\n+----------------+--------------+---------------------+---------+\n```\n\n#\u69d8\u3005\u306a\u5b9f\u884c\u65b9\u6cd5\n##\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5229\u7528\u3059\u308b\n\u300cHello World\u300d\u3067\u8aac\u660e\u3057\u305f\u65b9\u6cd5\u304c\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u306b\u306a\u308b\u3002\n\n##Java \u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u7d44\u307f\u8fbc\u3093\u3067\u5229\u7528\u3059\u308b\nFlyway \u306f Java \u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u7d44\u307f\u8fbc\u3093\u3067\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n###\u30d7\u30ed\u30b0\u30e9\u30e0\n```groovy:build.gradle\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.hsqldb:hsqldb:2.3.2'\n    compile 'org.flywaydb:flyway-core:3.0'\n}\n```\n\n```java:Main.java\npackage sample.flyway;\n\nimport org.flywaydb.core.Flyway;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        Flyway flyway = new Flyway();\n        \n        flyway.setDataSource(\"jdbc:hsqldb:file:./db/sample\", \"SA\", \"\");\n        \n        flyway.migrate();\n    }\n}\n```\n\n```text:\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n`-src/\n  `-main/\n    |-java/\n    |  `-sample/\n    |    `-flyway/\n    |      `-Main.java\n    `-resources/\n      `-db/\n        `-migration/\n          `-V1__create_table.sql\n```\n\nSQL \u30d5\u30a1\u30a4\u30eb\u306f\u3001 \u30af\u30e9\u30b9\u30d1\u30b9\u4ee5\u4e0b\u306e `db/migration` \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u3002\n\n##Gradle \u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u5229\u7528\u3059\u308b\n```groovy:build.gradle\napply plugin: 'java'\napply plugin: 'flyway'\n\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.hsqldb:hsqldb:2.3.2\"\n        classpath \"org.flywaydb:flyway-gradle-plugin:3.0\"\n    }\n}\n\nflyway {\n    user = 'SA'\n    url = 'jdbc:hsqldb:file:./database/sample'\n}\n```\n\n```text:\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-build.gradle\n`-src/\n  `-main/\n    `-resources/\n      `-db/\n        `-migration/\n          `-V1__create_table.sql\n```\n\n```text:\u5b9f\u884c\n> gradle flywayMigrate\n:flywayMigrate\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayMigrate\n\nBUILD SUCCESSFUL\n\nTotal time: 4.084 secs\n\n> gradle flywayInfo\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayInfo\n+----------------+----------------------------+---------------------+---------+\n| Version        | Description                | Installed on        | State   |\n+----------------+----------------------------+---------------------+---------+\n| 1              | create table               | 2014-08-02 14:50:01 | Success |\n+----------------+----------------------------+---------------------+---------+\n\nBUILD SUCCESSFUL\n\nTotal time: 3.792 secs\n```\n\n`buildscript` \u3067 Flyway \u306e Gradle \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u3001 `appliy plugin: 'flyway'` \u3068\u3059\u308b\u3053\u3068\u3067\u3001 Gradle \u304b\u3089 Flyway \u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\nSQL \u30d5\u30a1\u30a4\u30eb\u306f\u5b9f\u884c\u6642\u306b\u30af\u30e9\u30b9\u30d1\u30b9\u304c\u901a\u3063\u3066\u3044\u308b\u5834\u6240\u304b\u3089\u898b\u3066 `db/migration` \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\u3064\u307e\u308a\u3001 `src/main/resources/db/migration` \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308c\u3070\u3001 Flyway \u304c\u691c\u51fa\u3067\u304d\u308b\uff08\u5834\u6240\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u53ef\u80fd\uff09\u3002\n\n#Java \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3059\u308b\nLOB \u30c7\u30fc\u30bf\u3092\u6271\u3046\u5fc5\u8981\u304c\u3042\u3063\u305f\u308a\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u65b9\u6cd5\u304c\u8907\u96d1\u306a\u5834\u5408\u306f\u3001 Java \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u3053\u3053\u3067\u306f\u3001 Gradle \u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u5408\u308f\u305b\u3066\u4f7f\u7528\u3057\u3066\u307f\u308b\u3002\n\n##\u5b9f\u88c5\u65b9\u6cd5\n```groovy:build.gradle\napply plugin: 'java'\napply plugin: 'flyway'\n\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.hsqldb:hsqldb:2.3.2\"\n        classpath \"org.flywaydb:flyway-gradle-plugin:3.0\"\n    }\n}\n\nflyway {\n    user = 'SA'\n    url = 'jdbc:hsqldb:file:./database/sample'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.flywaydb:flyway-gradle-plugin:3.0\"\n}\n```\n\n```java:V2__insert_data.java\npackage db.migration;\n\nimport java.sql.Connection;\nimport java.sql.Statement;\n\nimport org.flywaydb.core.api.migration.jdbc.JdbcMigration;\n\npublic class V2__insert_data implements JdbcMigration {\n\n    @Override\n    public void migrate(Connection connection) throws Exception {\n        \n        try (Statement statement = connection.createStatement();) {\n            statement.executeUpdate(\"INSERT INTO HOGE VALUES (1, 'hoge')\");\n        }\n        \n    }\n}\n```\n\n```text:\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-build.gradle\n`-src/\n  `-main/\n    |-java/\n    | `-db/\n    |   `-migration/\n    |     `-V2__insert_data.java\n    `-resources/\n      `-db/\n        `-migration/\n          `-V1__create_table.sql\n```\n\n##\u5b9f\u884c\n```text:\u5b9f\u884c\n> gradle flywayMigrate\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayMigrate\n\nBUILD SUCCESSFUL\n\nTotal time: 4.002 secs\n\n> gradle flywayInfo\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:flywayInfo\n+----------------+----------------------------+---------------------+---------+\n| Version        | Description                | Installed on        | State   |\n+----------------+----------------------------+---------------------+---------+\n| 1              | create table               | 2014-08-02 14:53:43 | Success |\n| 2              | insert data                | 2014-08-02 14:53:43 | Success |\n+----------------+----------------------------+---------------------+---------+\n\nBUILD SUCCESSFUL\n\nTotal time: 4.01 secs\n```\n\n##\u8aac\u660e\nJava \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3059\u308b\u5834\u5408\u306f\u3001 SQL \u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u3088\u3046\u306b\u5b9a\u3081\u3089\u308c\u305f\u66f8\u5f0f\u3067\u30af\u30e9\u30b9\u540d\u3092\u5b9a\u7fa9\u3059\u308b\uff08`V2__insert_data.java`\uff09\u3002\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30af\u30e9\u30b9\u306f\u3001 `JdbcMigration` \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u3001 `migrate()` \u30e1\u30bd\u30c3\u30c9\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\n#Android \u3067\u4f7f\u7528\u3059\u308b\nFlyway \u306f Android \u306b\u7d44\u307f\u8fbc\u3093\u3067\u5229\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n##\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\nflyway \u672c\u4f53\uff08`flyway-core`\uff09\u306e\u4ed6\u306b [SQLDroid](https://github.com/SQLDroid/SQLDroid) \u3068\u3044\u3046 Android \u7528\u306e JDBC \u30c9\u30e9\u30a4\u30d0\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\n```groovy:build.gradle\ndependencies {\n    compile 'org.flywaydb:flyway-core:3.0'\n    compile 'org.sqldroid:sqldroid:1.0.3'\n}\n```\n\n##\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e SQL \u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u7528\u306e SQL \u30d5\u30a1\u30a4\u30eb\u306f\u3001 `assets/db/migration` \u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\n![flyway.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/549a36ec-a354-36a3-fce9-2745e585ac34.jpeg)\n\n```sql:V1__create_database.sql\nCREATE TABLE SAMPLE_TABLE (\n    ID INTEGER PRIMARY KEY AUTOINCREMENT,\n    CODE,\n    NAME\n);\n\nINSERT INTO SAMPLE_TABLE (CODE, NAME) VALUES ('hoge', 'HOGE');\nINSERT INTO SAMPLE_TABLE (CODE, NAME) VALUES ('fuga', 'FUGA');\nINSERT INTO SAMPLE_TABLE (CODE, NAME) VALUES ('piyo', 'PIYO');\n```\n\n##\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\n```java:MainActivity.java\npackage com.example.flywaysample;\n\nimport org.flywaydb.core.Flyway;\nimport org.flywaydb.core.api.android.ContextHolder;\n\nimport android.app.Activity;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.os.Bundle;\nimport android.util.Log;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n        // \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\n        SQLiteDatabase db = this.openOrCreateDatabase(\"sample.db\", MODE_PRIVATE, null);\n        ContextHolder.setContext(this.getApplicationContext());\n        \n        Flyway flyway = new Flyway();\n        flyway.setDataSource(\"jdbc:sqlite:\" + db.getPath(), \"\", \"\");\n        flyway.migrate();\n        Log.v(\"FlywaySample\", \"migrate database.\");\n        \n        // \u30c7\u30fc\u30bf\u53d6\u5f97\n        Cursor cursor = db.rawQuery(\"SELECT * FROM SAMPLE_TABLE\", null);\n        boolean next = cursor.moveToFirst();\n        \n        while (next) {\n            int id = cursor.getInt(0);\n            String code = cursor.getString(1);\n            String name = cursor.getString(2);\n            \n            Log.v(\"FlywaySample\", String.format(\"id=%d, code=%s, name=%s%n\", id, code, name));\n            \n            next = cursor.moveToNext();\n        }\n        \n        cursor.close();\n        db.close();\n    }\n}\n```\n\n##\u5b9f\u884c\u7d50\u679c\n```text:LogCat\n10-12 07:50:40.385: V/FlywaySample(11986): migrate database.\n10-12 07:50:40.385: V/FlywaySample(11986): id=1, code=hoge, name=HOGE\n10-12 07:50:40.385: V/FlywaySample(11986): id=2, code=fuga, name=FUGA\n10-12 07:50:40.395: V/FlywaySample(11986): id=3, code=piyo, name=PIYO\n```\n\n##ContextHolder.setContext() \u306b\u3064\u3044\u3066\n\uff11\u70b9\u8981\u6ce8\u610f\u306a\u306e\u304c\u3001\n\n```java:\nContextHolder.setContext(this.getApplicationContext());\n```\n\n\u3053\u306e\u90e8\u5206\u3002\n\n`ContextHolder` \u306f\u3001\u540d\u524d\u306e\u901a\u308a `Context` \u3092\u4fdd\u6301\u3057\u3066\u304a\u304f\u305f\u3081\u306e\u30af\u30e9\u30b9\u3067\u3001 Flyway \u304c DB \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u6642\u306b `assets/db/migration` \u304b\u3089 SQL \u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3059\u308b\u306e\u306b\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n\n\u306a\u3093\u3060\u304b\u5acc\u306a\u81ed\u3044\u304c\u30d7\u30f3\u30d7\u30f3\u3057\u305f\uff08static \u30e1\u30bd\u30c3\u30c9\u3067 Context \u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\uff09\u306e\u3067\u3001\u5b9f\u88c5\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u3002\n\n```java:ContextHolder.java\uff08\u30b3\u30e1\u30f3\u30c8\u9664\u53bb\uff09\npackage org.flywaydb.core.api.android;\n\nimport android.content.Context;\n\npublic class ContextHolder {\n    private ContextHolder() {}\n\n    private static Context context;\n\n    public static Context getContext() {\n        return context;\n    }\n\n    public static void setContext(Context context) {\n        ContextHolder.context = context;\n    }\n}\n```\n\nstatic \u30d5\u30a3\u30fc\u30eb\u30c9\u306b `Context` \u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\u3002\n\u3064\u307e\u308a\u3001<ins>\u3082\u3057 `setContext()` \u306b Activity \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6e21\u3057\u3066\u3057\u307e\u3046\u3068 Activity \u7d42\u4e86\u5f8c\u3082\u53c2\u7167\u304c\u6b8b\u3063\u3066\u3057\u307e\u3044\u3001\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u304c\u767a\u751f\u3059\u308b\u5371\u967a\u6027\u304c\u3042\u308b</ins>\u3002\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u308f\u3063\u305f\u3089\u5fc5\u305a `setContext(null)` \u3059\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308b\u304c\u3001\u6700\u521d\u304b\u3089 ApplicationContext \u3092\u6e21\u3059\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u3044\u3044\u3068\u601d\u3046\u3002\n\nFlyway \u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u306b\u5b9f\u88c5\u3059\u308b\u3068\u3001 Acitivty \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6e21\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u5371\u967a\u3067\u3059\u3002\n\n##SQLiteOpenHelper \u3092\u4f7f\u3063\u305f\u5b9f\u88c5\nActivity \u306b\u76f4\u63a5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u51e6\u7406\u3092\u66f8\u304f\u306e\u306f\u304a\u884c\u5100\u304c\u60aa\u3044\u306e\u3067\u3001 `SQLiteOpenHelper` \u3092\u4f7f\u3063\u305f\u5b9f\u88c5\u306b\u5207\u308a\u66ff\u3048\u3066\u307f\u308b\u3002\n\n###\u5b9f\u88c5\n```java:SampleTable\npackage com.example.flywaysample;\n\npublic class SampleTable {\n    \n    private int id;\n    private String code;\n    private String name;\n\n    public SampleTable(int id, String code, String name) {\n        this.id = id;\n        this.code = code;\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"SampleTable [id=\" + id + \", code=\" + code + \", name=\" + name + \"]\";\n    }\n}\n```\n\n```java:MyDatabaseHelper.java\npackage com.example.flywaysample;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.flywaydb.core.Flyway;\nimport org.flywaydb.core.api.android.ContextHolder;\n\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.Log;\n\npublic class MyDatabaseHelper extends SQLiteOpenHelper {\n    \n    private static final String DATABASE_NAME = \"sample.db\";\n    private static final int DATABASE_VERSION = 1;\n    \n    public MyDatabaseHelper(Context context) {\n        super(context, DATABASE_NAME, null, DATABASE_VERSION);\n        \n        SQLiteDatabase db = getWritableDatabase();\n        ContextHolder.setContext(context.getApplicationContext());\n        \n        Flyway flyway = new Flyway();\n        flyway.setDataSource(\"jdbc:sqlite:\" + db.getPath(), \"\", \"\");\n        flyway.migrate();\n        \n        Log.v(\"FlywaySample\", \"migrate database.\");\n        \n        db.close();\n    }\n    \n    public List<SampleTable> findAll() {\n        SQLiteDatabase db = getReadableDatabase();\n\n        Cursor cursor = db.rawQuery(\"SELECT * FROM SAMPLE_TABLE\", null);\n        boolean next = cursor.moveToFirst();\n        \n        List<SampleTable> list = new ArrayList<SampleTable>();\n        \n        while (next) {\n            int id = cursor.getInt(0);\n            String code = cursor.getString(1);\n            String name = cursor.getString(2);\n            \n            list.add(new SampleTable(id, code, name));\n            \n            next = cursor.moveToNext();\n        }\n        \n        cursor.close();\n        db.close();\n        \n        return list;\n    }\n    \n    @Override public void onCreate(SQLiteDatabase db) {/* no use */}\n    @Override public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {/* no use */}\n}\n```\n\n```java:MainActivity.java\npackage com.example.flywaysample;\n\nimport java.util.List;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.util.Log;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n        MyDatabaseHelper dbHelper = new MyDatabaseHelper(this);\n        List<SampleTable> list = dbHelper.findAll();\n        \n        for (SampleTable sample : list) {\n            Log.v(\"FlywaySample\", sample.toString());\n        }\n    }\n}\n```\n\n###\u8aac\u660e\n- \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u306f Flyway \u304c\u7ba1\u7406\u3059\u308b\u306e\u3067\u3001 `onCreate()` \u3068 `onUpgrade()` \u306f\u4f7f\u7528\u3057\u306a\u3044\u3002\n- \u4ee3\u308f\u308a\u306b\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u6642\u70b9\u3067 `getWritableDatabase()` \u3057\u3066\u3001 Flyway \u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3063\u3066\u3044\u308b\u3002\n\n\n\n\n#\u53c2\u8003\n- [Get Started - Flyway Database Migrations Made Easy.](http://flywaydb.org/getstarted/)\n- [Documentation - Flyway Database Migrations Made Easy.](http://flywaydb.org/documentation/)\n"}