{"context": "SORACOM Air\u5bfe\u5fdc USB\u30e2\u30c7\u30e0 ABIT\u3055\u3093\u306eAK-020 \u306e\u30c7\u30d0\u30a4\u30b9\u8a8d\u8b58\u3092udev\u306e\u307f\u3067\u3057\u3063\u304b\u308a\u884c\u304a\u3046\u3068\u3044\u3046\u8a66\u307f\u3067\u3059\n\n\u8ad6\u3088\u308a\u30b3\u30fc\u30c9\n\n/etc/udev/rules.d/40-ak-020.rules\nACTION==\"add\", ATTRS{idVendor}==\"15eb\", ATTRS{idProduct}==\"a403\", RUN+=\"/usr/sbin/usb_modeswitch --std-eject --default-vendor 0x15eb --default-product 0xa403 --target-vendor 0x15eb --target-product 0x7d0e\"\nACTION==\"add\", ATTRS{idVendor}==\"15eb\", ATTRS{idProduct}==\"7d0e\", RUN+=\"/sbin/modprobe usbserial vendor=0x15eb product=0x7d0e\"\n\n\nrules\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u305f\u3089 \u518d\u8d77\u52d5 OR $ sudo udevadm control --reload \u3067\u3059\nAK-020\u3092\u633f\u3057\u305f\u3089 /dev/ttyUSB[0-4] \u304c\u51fa\u6765\u4e0a\u304c\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u597d\u304d\u306b\u3057\u3066\u304f\u3060\u3055\u3044\n$ ls /dev/ttyUSB* | cat\n/dev/ttyUSB0\n/dev/ttyUSB1\n/dev/ttyUSB2\n/dev/ttyUSB3\n\n\n\u89e3\u8aac\nAK-020\u306f\uff12\u3064\u306eUSB\u30c7\u30d0\u30a4\u30b9\u3092\u6301\u3063\u3066\u3044\u307e\u3059\n\nCD-ROM: idProduct = a403\nUSB modem: idProduct = 7d0e\n\n\u3067\u3059\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u3067\u5bfe\u5fdc\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092 RUN \u3067\u52d5\u304b\u3059\u3068\u3044\u3046\u306e\u304c\u4e3b\u65e8\u3067\u3059\n\nusb_modeswitch\nusb_modeswitch --std-eject \\\n  --default-vendor 0x15eb --default-product 0xa403 \\\n  --target-vendor 0x15eb --target-product 0x7d0e\n\n\u73fe\u5728\u304c default-* \u3067 target-* \u306a\u30c7\u30d0\u30a4\u30b9\u306e\u5834\u5408\u306f --std-eject \u3092\u3057\u308d\u3001\u3068\u3044\u3046\u610f\u5473\u3067\u3059\n--std-eject \u306f eject \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u306e\u3068\u540c\u3058\u306b\u306a\u308a\u3001\u3053\u308c\u3067\u624b\u52d5\u3067eject\u3057\u305f\u72b6\u614b\u3068\u5168\u304f\u540c\u3058\u306b\u306a\u308a\u307e\u3059\n\nmodprobe\n\u4e0a\u8a18 usb_modeswitch \u306b\u3088\u308a idProduct = 7d0e \u3067(\u518d)\u8a8d\u8b58\u3055\u308c\u308b\u305f\u3081\u3001\u5148\u306erules\u306e2\u884c\u76ee\u306b\u53cd\u5fdc\u3057\u3001modprobe\u3055\u308c\u308b\u308f\u3051\u3067\u3059 (\u307e\u3041\u3001insmod\u3067\u3082\u3044\u3044\u3067\u3059\u304c)\n\nWIP;\n\u30c7\u30d0\u30a4\u30b9\u540d\u306e\u56fa\u5b9a\u5316\n\n\u3061\u306a\u307f\u306b\n/dev/ttyUSB* \u306f mode=0660 group=dialout \u3068\u306a\u3063\u3066\u3044\u308b\u306e\u3067 sudo gpasswd -a YOUR_ID dialout \u3068dialout\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3068\u5229\u7528\u3057\u3084\u3059\u3044\u304b\u3082\u3067\u3059\n\u305f\u3060\u3057 Ubuntu\u306a\u65b9\u306f ModemManager\u304c ttyUSB0\u3068ttyUSB1\u3092used\u3057\u3066\u3044\u308b\u306e\u3067 systemctl stop ModemManager \u3092\u3057\u306a\u3044\u3068 resource busy \u3068\u306a\u308b\u304b\u3089\u30cf\u30de\u308a\u307e\u3059\n\u203broot\u304b\u3089\u306a\u3089\u5f37\u5f15\u306b\u596a\u3048\u307e\u3059\u3051\u3069\n\n\u53c2\u8003\u8cc7\u6599\n\n(Raspbian) AK-020\u30673G\u30e2\u30c7\u30e0\u81ea\u52d5\u63a5\u7d9a(\u6bce\u56de\u306eeject\u3068modprobe\u306a\u3057) - Qiita\nUbuntu\u3067Emobile\u306eD21LC\u3092\u5229\u7528\u3059\u308b | Blog.37to.net\n\n\n\u3054\u3081\u3093\u306a\u3055\u3044\nrc.local\u3068\u304bobsolute\u3067\u3059\nSORACOM Air\u5bfe\u5fdc USB\u30e2\u30c7\u30e0 ABIT\u3055\u3093\u306e[AK-020](http://www.abit.co.jp/press-release/458.html) \u306e\u30c7\u30d0\u30a4\u30b9\u8a8d\u8b58\u3092udev\u306e\u307f\u3067\u3057\u3063\u304b\u308a\u884c\u304a\u3046\u3068\u3044\u3046\u8a66\u307f\u3067\u3059\n\n\u8ad6\u3088\u308a\u30b3\u30fc\u30c9\n----------\n\n```:/etc/udev/rules.d/40-ak-020.rules\nACTION==\"add\", ATTRS{idVendor}==\"15eb\", ATTRS{idProduct}==\"a403\", RUN+=\"/usr/sbin/usb_modeswitch --std-eject --default-vendor 0x15eb --default-product 0xa403 --target-vendor 0x15eb --target-product 0x7d0e\"\nACTION==\"add\", ATTRS{idVendor}==\"15eb\", ATTRS{idProduct}==\"7d0e\", RUN+=\"/sbin/modprobe usbserial vendor=0x15eb product=0x7d0e\"\n```\n\nrules\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u305f\u3089 \u518d\u8d77\u52d5 OR `$ sudo udevadm control --reload` \u3067\u3059\n\nAK-020\u3092\u633f\u3057\u305f\u3089 /dev/ttyUSB[0-4] \u304c\u51fa\u6765\u4e0a\u304c\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u597d\u304d\u306b\u3057\u3066\u304f\u3060\u3055\u3044\n\n```console\n$ ls /dev/ttyUSB* | cat\n/dev/ttyUSB0\n/dev/ttyUSB1\n/dev/ttyUSB2\n/dev/ttyUSB3\n```\n\n\u89e3\u8aac\n----\n\nAK-020\u306f\uff12\u3064\u306eUSB\u30c7\u30d0\u30a4\u30b9\u3092\u6301\u3063\u3066\u3044\u307e\u3059\n\n* CD-ROM: idProduct = a403\n* USB modem: idProduct = 7d0e\n\n\u3067\u3059\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u3067\u5bfe\u5fdc\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092 RUN \u3067\u52d5\u304b\u3059\u3068\u3044\u3046\u306e\u304c\u4e3b\u65e8\u3067\u3059\n\n### usb_modeswitch ###\n\n```\nusb_modeswitch --std-eject \\\n  --default-vendor 0x15eb --default-product 0xa403 \\\n  --target-vendor 0x15eb --target-product 0x7d0e\n```\n\n\u73fe\u5728\u304c default-* \u3067 target-* \u306a\u30c7\u30d0\u30a4\u30b9\u306e\u5834\u5408\u306f --std-eject \u3092\u3057\u308d\u3001\u3068\u3044\u3046\u610f\u5473\u3067\u3059\n\n--std-eject \u306f eject \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u306e\u3068\u540c\u3058\u306b\u306a\u308a\u3001\u3053\u308c\u3067\u624b\u52d5\u3067eject\u3057\u305f\u72b6\u614b\u3068\u5168\u304f\u540c\u3058\u306b\u306a\u308a\u307e\u3059\n\n### modprobe ###\n\n\u4e0a\u8a18 usb_modeswitch \u306b\u3088\u308a idProduct = 7d0e \u3067(\u518d)\u8a8d\u8b58\u3055\u308c\u308b\u305f\u3081\u3001\u5148\u306erules\u306e2\u884c\u76ee\u306b\u53cd\u5fdc\u3057\u3001modprobe\u3055\u308c\u308b\u308f\u3051\u3067\u3059 (\u307e\u3041\u3001insmod\u3067\u3082\u3044\u3044\u3067\u3059\u304c)\n\nWIP;\n----\n\n\u30c7\u30d0\u30a4\u30b9\u540d\u306e\u56fa\u5b9a\u5316\n\n\u3061\u306a\u307f\u306b\n-------\n\n`/dev/ttyUSB*` \u306f mode=0660 group=dialout \u3068\u306a\u3063\u3066\u3044\u308b\u306e\u3067 `sudo gpasswd -a YOUR_ID dialout` \u3068dialout\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3068\u5229\u7528\u3057\u3084\u3059\u3044\u304b\u3082\u3067\u3059\n\n\u305f\u3060\u3057 Ubuntu\u306a\u65b9\u306f ModemManager\u304c ttyUSB0\u3068ttyUSB1\u3092used\u3057\u3066\u3044\u308b\u306e\u3067 `systemctl stop ModemManager` \u3092\u3057\u306a\u3044\u3068 resource busy \u3068\u306a\u308b\u304b\u3089\u30cf\u30de\u308a\u307e\u3059\n\n\u203broot\u304b\u3089\u306a\u3089\u5f37\u5f15\u306b\u596a\u3048\u307e\u3059\u3051\u3069\n\n\u53c2\u8003\u8cc7\u6599\n-------\n\n* [(Raspbian) AK-020\u30673G\u30e2\u30c7\u30e0\u81ea\u52d5\u63a5\u7d9a(\u6bce\u56de\u306eeject\u3068modprobe\u306a\u3057) - Qiita](http://qiita.com/aquahika/items/dc7d8ad8f481414d3528)\n* [Ubuntu\u3067Emobile\u306eD21LC\u3092\u5229\u7528\u3059\u308b | Blog.37to.net](http://blog.37to.net/2009/01/ubuntuemobiled21lc/)\n\n\u3054\u3081\u3093\u306a\u3055\u3044\n----------\n\nrc.local\u3068\u304bobsolute\u3067\u3059\n", "tags": ["SORACOM", "USB", "modem", "udev"]}