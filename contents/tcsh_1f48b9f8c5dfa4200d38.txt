{"context": " More than 1 year has passed since last update.AWS CLI\u3092\u5229\u7528\u3057\u3066\u3001AssumeRole\u3078\u306e\u30d5\u30eb\u30a2\u30af\u30bb\u30b9\u304c\u53ef\u80fd\u306aIAM\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\u3042\u308f\u305b\u3066ReadOnly\u30dd\u30ea\u30b7\u3082\u9069\u7528\u3057\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\nIAM\u3078\u306e\u6a29\u9650\n\nIAM\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.10.0\nAWS CLI 1.9.11\n\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws --version\n\n\n\n\u7d50\u679c(\u4f8b)\naws-cli/1.10.0 Python/2.7.5 Darwin/13.4.0 botocore/1.3.22\n\n\n\n0. \u6e96\u5099\n\n\u5909\u6570\u306e\u78ba\u8a8d\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u78ba\u8a8d\naws configure list\n\n\n\n\u7d50\u679c(\u4f8b)\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile       iamFull-prjZ-mbp13              env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region                us-west-2      config-file    ~/.aws/config\n\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n\nIAM\u30b0\u30eb\u30fc\u30d7\u540d\u306e\u6c7a\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIAM_GROUP_NAME=\"assumeRoleFull\"\n\n\n\u540c\u3058\u540d\u524d\u306eIAM\u30b0\u30eb\u30fc\u30d7\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws iam get-group \\\n        --group-name ${IAM_GROUP_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\nA client error (NoSuchEntity) occurred when calling the GetGroup operation: The group with name assumeRoleFull cannot be found.\n\n\n\n2. \u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n\n2.1. IAM\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\nIAM\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        IAM_GROUP_NAME: ${IAM_GROUP_NAME}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws iam create-group \\\n        --group-name ${IAM_GROUP_NAME}\n\n\n\n\u7d50\u679c\n      {\n        \"Group\": {\n          \"Path\": \"/\",\n          \"CreateDate\": \"2015-04-06T08:47:22.756Z\",\n          \"GroupId\": \"AGPAIRBWX5F7GBWA5W5YS\",\n          \"Arn\": \"arn:aws:iam::XXXXXXXXXXXX:group/assumeRoleFull\",\n          \"GroupName\": \"assumeRoleFull\"\n        }\n      }\n\n\n\n2.2. IAM\u30b0\u30eb\u30fc\u30d7\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws iam get-group \\\n        --group-name ${IAM_GROUP_NAME}\n\n\n\n\u7d50\u679c\n      {\n        \"Group\": {\n          \"Path\": \"/\",\n          \"CreateDate\": \"2015-04-06T08:47:22Z\",\n          \"GroupId\": \"AGPAIRBWX5F7GBWA5W5YS\",\n          \"Arn\": \"arn:aws:iam::XXXXXXXXXXXX:group/assumeRoleFull\",\n          \"GroupName\": \"assumeRoleFull\"\n        },\n        \"Users\": []\n      }\n\n\n\n3. \u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528 (\u30ab\u30b9\u30bf\u30e0\u30dd\u30ea\u30b7\u30fc)\n\n3.1. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u6c7a\u5b9a\n\u5b58\u5728\u3059\u308b\u30e6\u30fc\u30b6\u7ba1\u7406\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws iam list-policies \\\n        --scope Local \\\n        --query 'Policies[].PolicyName' \\\n        --max-items 1000\n\n\n\u5229\u7528\u3059\u308bIAM\u30dd\u30ea\u30b7\u30fc\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIAM_POLICY_NAME='assumeRoleFull'\n\n\nARN\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIAM_POLICY_ARN=$( \\\n        aws iam list-policies \\\n          --scope Local \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].Arn\" \\\n          --output text \\\n      ) \\\n        && echo \"${IAM_POLICY_ARN}\"\n\n\n\n\u7d50\u679c(\u4f8b)\narn:aws:iam::XXXXXXXXXXXX:policy/assumeRoleFull\n\n\n\n3.2. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\n\u30dd\u30ea\u30b7\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIAM_POLICY_VERSION=$( \\\n        aws iam list-policies \\\n          --scope Local \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].DefaultVersionId\" \\\n          --output text \\\n      ) \\\n        && echo ${IAM_POLICY_VERSION}\n\n\n\n\u7d50\u679c(\u4f8b)\nv1\n\n\n\u30dd\u30ea\u30b7\u306e\u5185\u5bb9\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws iam get-policy-version \\\n        --policy-arn ${IAM_POLICY_ARN} \\\n        --version-id ${IAM_POLICY_VERSION}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"PolicyVersion\": {\n          \"CreateDate\": \"2015-12-06T14:03:54Z\",\n          \"VersionId\": \"v1\",\n          \"Document\": {\n              \"Version\": \"2012-10-17\",\n              \"Statement\": [\n                  {\n                      \"Action\": [\n                          \"sts:AssumeRole\"\n                      ],\n                      \"Resource\": \"*\",\n                      \"Effect\": \"Allow\"\n                  }\n              ]\n          },\n          \"IsDefaultVersion\": true\n        }\n      }\n\n\n\n3.3. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\nIAM\u30b0\u30eb\u30fc\u30d7\u306e\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws iam list-attached-group-policies \\\n        --group-name ${IAM_GROUP_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"AttachedPolicies\": [], \n      }\n\n\n\n3.4. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528\n\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092IAM\u30b0\u30eb\u30fc\u30d7\u306b\u9069\u7528\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        IAM_GROUP_NAME: ${IAM_GROUP_NAME}\n        IAM_POLICY_ARN: ${IAM_POLICY_ARN}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws iam attach-group-policy \\\n        --group-name ${IAM_GROUP_NAME} \\\n        --policy-arn ${IAM_POLICY_ARN}\n\n\n\n\u7d50\u679c\n(\u623b\u308a\u5024\u306a\u3057)\n\n\n\n4. \u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528 (AWS\u5b9a\u7fa9\u30dd\u30ea\u30b7)\n\n4.1. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u6c7a\u5b9a\n\u5b58\u5728\u3059\u308b\u30e6\u30fc\u30b6\u7ba1\u7406\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws iam list-policies \\\n        --scope AWS \\\n        --max-items 1000 \\\n        --query 'Policies[].PolicyName'\n\n\n\u5229\u7528\u3059\u308bIAM\u30dd\u30ea\u30b7\u30fc\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIAM_POLICY_NAME='ReadOnlyAccess'\n\n\nARN\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIAM_POLICY_ARN=$( \\\n        aws iam list-policies \\\n          --scope AWS \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].Arn\" \\\n          --output text \\\n      ) \\\n        && echo \"${IAM_POLICY_ARN}\"\n\n\n\n\u7d50\u679c(\u4f8b)\narn:aws:iam::aws:policy/ReadOnlyAccess\n\n\n\n4.2. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\n\u30dd\u30ea\u30b7\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nIAM_POLICY_VERSION=$( \\\n        aws iam list-policies \\\n          --scope AWS \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].DefaultVersionId\" \\\n          --output text \\\n      ) \\\n        && echo ${IAM_POLICY_VERSION}\n\n\n\n\u7d50\u679c(\u4f8b)\nv9\n\n\n\u30dd\u30ea\u30b7\u306e\u5185\u5bb9\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws iam get-policy-version \\\n        --policy-arn ${IAM_POLICY_ARN} \\\n        --version-id ${IAM_POLICY_VERSION}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"PolicyVersion\": {\n              \"CreateDate\": \"2015-11-02T23:13:14Z\", \n              \"VersionId\": \"v6\", \n              \"Document\": {\n                  \"Version\": \"2012-10-17\", \n                  \"Statement\": [\n                      {\n                          \"Action\": [\n                              \"appstream:Get*\", \n                              \"autoscaling:Describe*\", \n                              \"cloudformation:DescribeStackEvents\", \n                              \"cloudformation:DescribeStackResource\", \n                              \"cloudformation:DescribeStackResources\", \n                              \"cloudformation:DescribeStacks\", \n                              \"cloudformation:GetTemplate\", \n                              \"cloudformation:List*\", \n                              \"cloudfront:Get*\", \n                              \"cloudfront:List*\", \n                              \"cloudsearch:Describe*\", \n                              \"cloudsearch:List*\", \n                              \"cloudtrail:DescribeTrails\", \n                              \"cloudtrail:GetTrailStatus\", \n                              \"cloudwatch:Describe*\", \n                              \"cloudwatch:Get*\", \n                              \"cloudwatch:List*\", \n                              \"codecommit:BatchGetRepositories\", \n                              \"codecommit:Get*\", \n                              \"codecommit:GitPull\", \n                              \"codecommit:List*\", \n                              \"codedeploy:Batch*\", \n                              \"codedeploy:Get*\", \n                              \"codedeploy:List*\", \n                              \"config:Deliver*\", \n                              \"config:Describe*\", \n                              \"config:Get*\", \n                              \"datapipeline:DescribeObjects\", \n                              \"datapipeline:DescribePipelines\", \n                              \"datapipeline:EvaluateExpression\", \n                              \"datapipeline:GetPipelineDefinition\", \n                              \"datapipeline:ListPipelines\", \n                              \"datapipeline:QueryObjects\", \n                              \"datapipeline:ValidatePipelineDefinition\", \n                              \"directconnect:Describe*\", \n                              \"dynamodb:BatchGetItem\", \n                              \"dynamodb:DescribeTable\", \n                              \"dynamodb:GetItem\", \n                              \"dynamodb:ListTables\", \n                              \"dynamodb:Query\", \n                              \"dynamodb:Scan\", \n                              \"ec2:Describe*\", \n                              \"ec2:GetConsoleOutput\", \n                              \"ecs:Describe*\", \n                              \"ecs:List*\", \n                              \"elasticache:Describe*\", \n                              \"elasticache:List*\", \n                              \"elasticbeanstalk:Check*\", \n                              \"elasticbeanstalk:Describe*\", \n                              \"elasticbeanstalk:List*\", \n                              \"elasticbeanstalk:RequestEnvironmentInfo\", \n                              \"elasticbeanstalk:RetrieveEnvironmentInfo\", \n                              \"elasticloadbalancing:Describe*\", \n                              \"elasticmapreduce:Describe*\", \n                              \"elasticmapreduce:List*\", \n                              \"elastictranscoder:List*\", \n                              \"elastictranscoder:Read*\", \n                              \"firehose:Describe*\", \n                              \"firehose:List*\", \n                              \"iam:GenerateCredentialReport\", \n                              \"iam:Get*\", \n                              \"iam:List*\", \n                              \"inspector:Describe*\", \n                              \"inspector:Get*\", \n                              \"inspector:List*\", \n                              \"inspector:LocalizeText\", \n                              \"inspector:PreviewAgentsForResourceGroup\", \n                              \"iot:Describe*\", \n                              \"iot:Get*\", \n                              \"iot:List*\", \n                              \"kinesis:Describe*\", \n                              \"kinesis:Get*\", \n                              \"kinesis:List*\", \n                              \"kms:Describe*\", \n                              \"kms:Get*\", \n                              \"kms:List*\", \n                              \"lambda:List*\", \n                              \"lambda:Get*\", \n                              \"logs:Describe*\", \n                              \"logs:Get*\", \n                              \"logs:TestMetricFilter\", \n                              \"opsworks:Describe*\", \n                              \"opsworks:Get*\", \n                              \"rds:Describe*\", \n                              \"rds:ListTagsForResource\", \n                              \"redshift:Describe*\", \n                              \"redshift:ViewQueriesInConsole\", \n                              \"route53:Get*\", \n                              \"route53:List*\", \n                              \"route53domains:CheckDomainAvailability\", \n                              \"route53domains:GetDomainDetail\", \n                              \"route53domains:GetOperationDetail\", \n                              \"route53domains:ListDomains\", \n                              \"route53domains:ListOperations\", \n                              \"route53domains:ListTagsForDomain\", \n                              \"s3:Get*\", \n                              \"s3:List*\", \n                              \"sdb:GetAttributes\", \n                              \"sdb:List*\", \n                              \"sdb:Select*\", \n                              \"ses:Get*\", \n                              \"ses:List*\", \n                              \"sns:Get*\", \n                              \"sns:List*\", \n                              \"sqs:GetQueueAttributes\", \n                              \"sqs:ListQueues\", \n                              \"sqs:ReceiveMessage\", \n                              \"storagegateway:Describe*\", \n                              \"storagegateway:List*\", \n                              \"swf:Count*\", \n                              \"swf:Describe*\", \n                              \"swf:Get*\", \n                              \"swf:List*\", \n                              \"tag:Get*\", \n                              \"trustedadvisor:Describe*\", \n                              \"waf:Get*\", \n                              \"waf:List*\"\n                          ], \n                          \"Resource\": \"*\", \n                          \"Effect\": \"Allow\"\n                      }\n                  ]\n              }, \n              \"IsDefaultVersion\": true\n          }\n      }\n\n\n\n4.3. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528\n\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092IAM\u30b0\u30eb\u30fc\u30d7\u306b\u9069\u7528\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        IAM_GROUP_NAME: ${IAM_GROUP_NAME}\n        IAM_POLICY_ARN: ${IAM_POLICY_ARN}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws iam attach-group-policy \\\n        --group-name ${IAM_GROUP_NAME} \\\n        --policy-arn ${IAM_POLICY_ARN}\n\n\n\n\u7d50\u679c\n(\u623b\u308a\u5024\u306a\u3057)\n\n\n\n5. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\nIAM\u30b0\u30eb\u30fc\u30d7\u306e\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws iam list-attached-group-policies \\\n        --group-name ${IAM_GROUP_NAME}\n\n\n\n\u7d50\u679c\n      {\n        \"AttachedPolicies\": [\n          {\n              \"PolicyName\": \"ReadOnlyAccess\",\n              \"PolicyArn\": \"arn:aws:iam::aws:policy/ReadOnlyAccess\"\n          },\n          {\n              \"PolicyName\": \"assumeRoleFull\",\n              \"PolicyArn\": \"arn:aws:iam::XXXXXXXXXXXX:policy/assumeRoleFull\"\n          }\n        ]\n      }\n\n\n\n\u5b8c\u4e86\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001AssumeRole\u3078\u306e\u30d5\u30eb\u30a2\u30af\u30bb\u30b9\u304c\u53ef\u80fd\u306aIAM\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\u3042\u308f\u305b\u3066ReadOnly\u30dd\u30ea\u30b7\u3082\u9069\u7528\u3057\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n\nIAM\u3078\u306e\u6a29\u9650\n-----------\n\n* IAM\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n-------------------\n\n* \u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n  * AWS CLI 1.10.0\n  * AWS CLI 1.9.11\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws --version\n```\n\n```text:\u7d50\u679c(\u4f8b):\naws-cli/1.10.0 Python/2.7.5 Darwin/13.4.0 botocore/1.3.22\n```\n\n\n0. \u6e96\u5099\n=======\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\n----------\n\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\naws configure list\n```\n\n```text:\u7d50\u679c(\u4f8b):\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile       iamFull-prjZ-mbp13              env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region                us-west-2      config-file    ~/.aws/config\n```\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n===========\n\n\nIAM\u30b0\u30eb\u30fc\u30d7\u540d\u306e\u6c7a\u5b9a\n-------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIAM_GROUP_NAME=\"assumeRoleFull\"\n```\n\n\u540c\u3058\u540d\u524d\u306eIAM\u30b0\u30eb\u30fc\u30d7\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam get-group \\\n        --group-name ${IAM_GROUP_NAME}\n```\n\n```text:\u7d50\u679c(\u4f8b):\nA client error (NoSuchEntity) occurred when calling the GetGroup operation: The group with name assumeRoleFull cannot be found.\n```\n\n\n2. \u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n=================\n\n\n2.1. IAM\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n----------------------\n\nIAM\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        IAM_GROUP_NAME: ${IAM_GROUP_NAME}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam create-group \\\n        --group-name ${IAM_GROUP_NAME}\n```\n\n```json:\u7d50\u679c:\n      {\n        \"Group\": {\n          \"Path\": \"/\",\n          \"CreateDate\": \"2015-04-06T08:47:22.756Z\",\n          \"GroupId\": \"AGPAIRBWX5F7GBWA5W5YS\",\n          \"Arn\": \"arn:aws:iam::XXXXXXXXXXXX:group/assumeRoleFull\",\n          \"GroupName\": \"assumeRoleFull\"\n        }\n      }\n```\n\n\n2.2. IAM\u30b0\u30eb\u30fc\u30d7\u306e\u78ba\u8a8d\n----------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam get-group \\\n        --group-name ${IAM_GROUP_NAME}\n```\n\n```json:\u7d50\u679c:\n      {\n        \"Group\": {\n          \"Path\": \"/\",\n          \"CreateDate\": \"2015-04-06T08:47:22Z\",\n          \"GroupId\": \"AGPAIRBWX5F7GBWA5W5YS\",\n          \"Arn\": \"arn:aws:iam::XXXXXXXXXXXX:group/assumeRoleFull\",\n          \"GroupName\": \"assumeRoleFull\"\n        },\n        \"Users\": []\n      }\n```\n\n\n3. \u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528 (\u30ab\u30b9\u30bf\u30e0\u30dd\u30ea\u30b7\u30fc)\n============================================\n\n\n3.1. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u6c7a\u5b9a\n----------------------\n\n\u5b58\u5728\u3059\u308b\u30e6\u30fc\u30b6\u7ba1\u7406\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam list-policies \\\n        --scope Local \\\n        --query 'Policies[].PolicyName' \\\n        --max-items 1000\n```\n\n\u5229\u7528\u3059\u308bIAM\u30dd\u30ea\u30b7\u30fc\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIAM_POLICY_NAME='assumeRoleFull'\n```\n\nARN\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIAM_POLICY_ARN=$( \\\n        aws iam list-policies \\\n          --scope Local \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].Arn\" \\\n          --output text \\\n      ) \\\n        && echo \"${IAM_POLICY_ARN}\"\n```\n\n```text:\u7d50\u679c(\u4f8b):\narn:aws:iam::XXXXXXXXXXXX:policy/assumeRoleFull\n```\n\n3.2. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\n----------------------\n\n\u30dd\u30ea\u30b7\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIAM_POLICY_VERSION=$( \\\n        aws iam list-policies \\\n          --scope Local \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].DefaultVersionId\" \\\n          --output text \\\n      ) \\\n        && echo ${IAM_POLICY_VERSION}\n```\n\n```text:\u7d50\u679c(\u4f8b):\nv1\n```\n\n\u30dd\u30ea\u30b7\u306e\u5185\u5bb9\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam get-policy-version \\\n        --policy-arn ${IAM_POLICY_ARN} \\\n        --version-id ${IAM_POLICY_VERSION}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"PolicyVersion\": {\n          \"CreateDate\": \"2015-12-06T14:03:54Z\",\n          \"VersionId\": \"v1\",\n          \"Document\": {\n              \"Version\": \"2012-10-17\",\n              \"Statement\": [\n                  {\n                      \"Action\": [\n                          \"sts:AssumeRole\"\n                      ],\n                      \"Resource\": \"*\",\n                      \"Effect\": \"Allow\"\n                  }\n              ]\n          },\n          \"IsDefaultVersion\": true\n        }\n      }\n```\n\n\n3.3. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\n------------------------------\n\nIAM\u30b0\u30eb\u30fc\u30d7\u306e\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam list-attached-group-policies \\\n        --group-name ${IAM_GROUP_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n          \"AttachedPolicies\": [], \n      }\n```\n\n\n3.4. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528\n------------------------------\n\n\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092IAM\u30b0\u30eb\u30fc\u30d7\u306b\u9069\u7528\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        IAM_GROUP_NAME: ${IAM_GROUP_NAME}\n        IAM_POLICY_ARN: ${IAM_POLICY_ARN}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam attach-group-policy \\\n        --group-name ${IAM_GROUP_NAME} \\\n        --policy-arn ${IAM_POLICY_ARN}\n```\n\n```text:\u7d50\u679c:\n(\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n4. \u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528 (AWS\u5b9a\u7fa9\u30dd\u30ea\u30b7)\n=========================================\n\n\n4.1. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u6c7a\u5b9a\n----------------------\n\n\u5b58\u5728\u3059\u308b\u30e6\u30fc\u30b6\u7ba1\u7406\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam list-policies \\\n        --scope AWS \\\n        --max-items 1000 \\\n        --query 'Policies[].PolicyName'\n```\n\n\u5229\u7528\u3059\u308bIAM\u30dd\u30ea\u30b7\u30fc\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIAM_POLICY_NAME='ReadOnlyAccess'\n```\n\nARN\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIAM_POLICY_ARN=$( \\\n        aws iam list-policies \\\n          --scope AWS \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].Arn\" \\\n          --output text \\\n      ) \\\n        && echo \"${IAM_POLICY_ARN}\"\n```\n\n```text:\u7d50\u679c(\u4f8b):\narn:aws:iam::aws:policy/ReadOnlyAccess\n```\n\n4.2. IAM\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\n----------------------\n\n\u30dd\u30ea\u30b7\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nIAM_POLICY_VERSION=$( \\\n        aws iam list-policies \\\n          --scope AWS \\\n          --max-items 1000 \\\n          --query \"Policies[?PolicyName==\\`${IAM_POLICY_NAME}\\`].DefaultVersionId\" \\\n          --output text \\\n      ) \\\n        && echo ${IAM_POLICY_VERSION}\n```\n\n```text:\u7d50\u679c(\u4f8b):\nv9\n```\n\n\u30dd\u30ea\u30b7\u306e\u5185\u5bb9\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam get-policy-version \\\n        --policy-arn ${IAM_POLICY_ARN} \\\n        --version-id ${IAM_POLICY_VERSION}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n          \"PolicyVersion\": {\n              \"CreateDate\": \"2015-11-02T23:13:14Z\", \n              \"VersionId\": \"v6\", \n              \"Document\": {\n                  \"Version\": \"2012-10-17\", \n                  \"Statement\": [\n                      {\n                          \"Action\": [\n                              \"appstream:Get*\", \n                              \"autoscaling:Describe*\", \n                              \"cloudformation:DescribeStackEvents\", \n                              \"cloudformation:DescribeStackResource\", \n                              \"cloudformation:DescribeStackResources\", \n                              \"cloudformation:DescribeStacks\", \n                              \"cloudformation:GetTemplate\", \n                              \"cloudformation:List*\", \n                              \"cloudfront:Get*\", \n                              \"cloudfront:List*\", \n                              \"cloudsearch:Describe*\", \n                              \"cloudsearch:List*\", \n                              \"cloudtrail:DescribeTrails\", \n                              \"cloudtrail:GetTrailStatus\", \n                              \"cloudwatch:Describe*\", \n                              \"cloudwatch:Get*\", \n                              \"cloudwatch:List*\", \n                              \"codecommit:BatchGetRepositories\", \n                              \"codecommit:Get*\", \n                              \"codecommit:GitPull\", \n                              \"codecommit:List*\", \n                              \"codedeploy:Batch*\", \n                              \"codedeploy:Get*\", \n                              \"codedeploy:List*\", \n                              \"config:Deliver*\", \n                              \"config:Describe*\", \n                              \"config:Get*\", \n                              \"datapipeline:DescribeObjects\", \n                              \"datapipeline:DescribePipelines\", \n                              \"datapipeline:EvaluateExpression\", \n                              \"datapipeline:GetPipelineDefinition\", \n                              \"datapipeline:ListPipelines\", \n                              \"datapipeline:QueryObjects\", \n                              \"datapipeline:ValidatePipelineDefinition\", \n                              \"directconnect:Describe*\", \n                              \"dynamodb:BatchGetItem\", \n                              \"dynamodb:DescribeTable\", \n                              \"dynamodb:GetItem\", \n                              \"dynamodb:ListTables\", \n                              \"dynamodb:Query\", \n                              \"dynamodb:Scan\", \n                              \"ec2:Describe*\", \n                              \"ec2:GetConsoleOutput\", \n                              \"ecs:Describe*\", \n                              \"ecs:List*\", \n                              \"elasticache:Describe*\", \n                              \"elasticache:List*\", \n                              \"elasticbeanstalk:Check*\", \n                              \"elasticbeanstalk:Describe*\", \n                              \"elasticbeanstalk:List*\", \n                              \"elasticbeanstalk:RequestEnvironmentInfo\", \n                              \"elasticbeanstalk:RetrieveEnvironmentInfo\", \n                              \"elasticloadbalancing:Describe*\", \n                              \"elasticmapreduce:Describe*\", \n                              \"elasticmapreduce:List*\", \n                              \"elastictranscoder:List*\", \n                              \"elastictranscoder:Read*\", \n                              \"firehose:Describe*\", \n                              \"firehose:List*\", \n                              \"iam:GenerateCredentialReport\", \n                              \"iam:Get*\", \n                              \"iam:List*\", \n                              \"inspector:Describe*\", \n                              \"inspector:Get*\", \n                              \"inspector:List*\", \n                              \"inspector:LocalizeText\", \n                              \"inspector:PreviewAgentsForResourceGroup\", \n                              \"iot:Describe*\", \n                              \"iot:Get*\", \n                              \"iot:List*\", \n                              \"kinesis:Describe*\", \n                              \"kinesis:Get*\", \n                              \"kinesis:List*\", \n                              \"kms:Describe*\", \n                              \"kms:Get*\", \n                              \"kms:List*\", \n                              \"lambda:List*\", \n                              \"lambda:Get*\", \n                              \"logs:Describe*\", \n                              \"logs:Get*\", \n                              \"logs:TestMetricFilter\", \n                              \"opsworks:Describe*\", \n                              \"opsworks:Get*\", \n                              \"rds:Describe*\", \n                              \"rds:ListTagsForResource\", \n                              \"redshift:Describe*\", \n                              \"redshift:ViewQueriesInConsole\", \n                              \"route53:Get*\", \n                              \"route53:List*\", \n                              \"route53domains:CheckDomainAvailability\", \n                              \"route53domains:GetDomainDetail\", \n                              \"route53domains:GetOperationDetail\", \n                              \"route53domains:ListDomains\", \n                              \"route53domains:ListOperations\", \n                              \"route53domains:ListTagsForDomain\", \n                              \"s3:Get*\", \n                              \"s3:List*\", \n                              \"sdb:GetAttributes\", \n                              \"sdb:List*\", \n                              \"sdb:Select*\", \n                              \"ses:Get*\", \n                              \"ses:List*\", \n                              \"sns:Get*\", \n                              \"sns:List*\", \n                              \"sqs:GetQueueAttributes\", \n                              \"sqs:ListQueues\", \n                              \"sqs:ReceiveMessage\", \n                              \"storagegateway:Describe*\", \n                              \"storagegateway:List*\", \n                              \"swf:Count*\", \n                              \"swf:Describe*\", \n                              \"swf:Get*\", \n                              \"swf:List*\", \n                              \"tag:Get*\", \n                              \"trustedadvisor:Describe*\", \n                              \"waf:Get*\", \n                              \"waf:List*\"\n                          ], \n                          \"Resource\": \"*\", \n                          \"Effect\": \"Allow\"\n                      }\n                  ]\n              }, \n              \"IsDefaultVersion\": true\n          }\n      }\n```\n\n\n4.3. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528\n------------------------------\n\n\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092IAM\u30b0\u30eb\u30fc\u30d7\u306b\u9069\u7528\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        IAM_GROUP_NAME: ${IAM_GROUP_NAME}\n        IAM_POLICY_ARN: ${IAM_POLICY_ARN}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam attach-group-policy \\\n        --group-name ${IAM_GROUP_NAME} \\\n        --policy-arn ${IAM_POLICY_ARN}\n```\n\n```text:\u7d50\u679c:\n(\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n5. IAM\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\n============================\n\nIAM\u30b0\u30eb\u30fc\u30d7\u306e\u30b0\u30eb\u30fc\u30d7\u30dd\u30ea\u30b7\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws iam list-attached-group-policies \\\n        --group-name ${IAM_GROUP_NAME}\n```\n\n```json:\u7d50\u679c:\n      {\n        \"AttachedPolicies\": [\n          {\n              \"PolicyName\": \"ReadOnlyAccess\",\n              \"PolicyArn\": \"arn:aws:iam::aws:policy/ReadOnlyAccess\"\n          },\n          {\n              \"PolicyName\": \"assumeRoleFull\",\n              \"PolicyArn\": \"arn:aws:iam::XXXXXXXXXXXX:policy/assumeRoleFull\"\n          }\n        ]\n      }\n```\n\n\n\u5b8c\u4e86\n====\n", "tags": ["AWS", "aws-cli", "IAM"]}