{"context": "AWS CLI\u3092\u5229\u7528\u3057\u3066\u3001EC2\u306e\u30ad\u30fc\u30da\u30a2\u3092\u65b0\u898f\u306b\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\nEC2\u3078\u306e\u6a29\u9650\n\nEC2\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.10.44\nAWS CLI 1.8.11\nAWS CLI 1.7.39\nAWS CLI 1.7.36\n\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws --version\n\n\n\n\u7d50\u679c(\u4f8b)\n      aws-cli/1.10.44 Python/2.7.11 Darwin/15.5.0 botocore/1.4.34\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u5834\u5408\u306f\u6700\u65b0\u7248\u306b\u66f4\u65b0\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30b3\u30de\u30f3\u30c9\nsudo -H pip install -U awscli\n\n\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n\n\u5909\u6570\u306e\u78ba\u8a8d\naws configure list\n\n\n\n\u7d50\u679c(\u4f8b)\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile     ec2Full-prjZ-mbp13                env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region           ap-northeast-1              env    AWS_DEFAULT_REGION\n\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n\n1.1. \u30ad\u30fc\u30da\u30a2\u540d\u306e\u6c7a\u5b9a\n\u4eca\u56de\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f\u3001\u30ad\u30fc\u30da\u30a2\u540d\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3068\u4f5c\u696d\u5834\u6240\u3092\u57cb\u3081\u8fbc\u307f\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a(\u4f8b)\nPRJ_NAME='handson'\n\n\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nEC2_KEY_PAIR_NAME=\"${PRJ_NAME}-${AWS_DEFAULT_REGION}-ec2\" \\\n  && echo ${EC2_KEY_PAIR_NAME}\n\n\n\n1.2. \u540c\u540d\u30ad\u30fc\u30da\u30a2\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws ec2 describe-key-pairs \\\n  --key-names ${EC2_KEY_PAIR_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\nA client error (InvalidKeyPair.NotFound) occurred when calling the DescribeKeyPairs operation: The key pair 'prjz-us-west-2-ec2' does not exist\n\n\n\n1.3. Key\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u6c7a\u5b9a\n\n\u5909\u6570\u306e\u78ba\u8a8d\nFILE_SSH_KEY=\"${HOME}/.ssh/${EC2_KEY_PAIR_NAME}.pem\" \\\n  && echo ${FILE_SSH_KEY}\n\n\n\n1.4. Key\u30d5\u30a1\u30a4\u30eb\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\nls ${FILE_SSH_KEY}\n\n\n\n\u7d50\u679c(\u4f8b)\nls: /Users/aws/.ssh/prjz-us-west-2-ec2.pem: No such file or directory\n\n\n\n2. \u30ad\u30fc\u30da\u30a2\u306e\u4f5c\u6210\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        EC2_KEY_PAIR_NAME: ${EC2_KEY_PAIR_NAME}\n        FILE_SSH_KEY:      ${FILE_SSH_KEY}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ec2 create-key-pair \\\n  --key-name ${EC2_KEY_PAIR_NAME} \\\n  --query 'KeyMaterial' \\\n  --output text \\\n  > ${FILE_SSH_KEY} \\\n  && cat ${FILE_SSH_KEY} \\\n  && chmod 400 ${FILE_SSH_KEY}\n\n\n\n\u7d50\u679c(\u4f8b)\n-----BEGIN RSA PRIVATE KEY-----\nMIIEoQIBAAKCAQEAoeEnI72MIR/mCwTI9qBrD8vMPpBB3Jal5VsUvF4WX8j9q9yy/5SuSnoVptziYhc8n389ZkbHZaBK/hgEcNNecSpYcYSYmrpzLDDs1DTtdlNcLtExA3n0RmXnp1dO5WRmIothbVDzB9tFWURj1z/o4N1N2hMer+tV/0qQdFIG/7XkzzalIGHbbE1q+ZUiwGEygTvbZEjR/BjvT4VKf+Yyp5KrX+ZGpLCntDWoecRZdc1hZE+3mA+mF8p5pDdHR8nNqMVvmBB6uhGqChGsDnDGnIoC1YrV4YrjyZ+ej7W6ljlSmEbk6U4VdTr+GKOq79i1A6rR53/CqAnca3KlGNwuRwIDAQABAoH/fJHGjLpQGy1w2QnVm/PWb1Fk2sAn7pf/EYAFdO7ySMNicd5j4EmJ1cYc40sW6mT3QcWoegv9ZTb0fpP81tXQ10S+ypw+0tKnzlnX5XTVRzjetyhDj2lJkOLaYOvOyrd34R1g275vRpx1wTvfmMSVcHTcc/RCqR1wEARRJTH6MMuH/MfzjZhMSGCyzEL1ZA0p2vzKQIkZj1cUZwsIA6FP+wIEydQXUBrX+GGx5NNq5jU5kvHXUhNaT+xlvIqAWSf/TSC38soPtIfww2EYKIza9bfdBQSwy+gcAp2I+tJcE8N6e7zJgPQ2jMsViiw+q3+42a1F1iab3fG43Iin1wjhAoGBAPkvgR9MBeakAUvPJebv8wpTyzcDmfOVhd0CLD8NdvPiz3Vr9LF1F0DkH9fnQbSXw14+ns1lWenhLkNBp0t24p0QiCdGOM3uh5KQnYfkCy38rrG6JaP9rlm7+AqAE8QNZCx/9ld3SgKblSph9UPqihuVJcBIXy/YOs6h9onWpOERAoGBAKZOb+rBdNcNl4RMRfdkjzkxJG7JhNPhdFobzrwaglArAZZhTLQwpOTEGNlPjzv3N1VMdJlI6Nb/rC8HrZAaHp50/ZTkBnGs4Z49QvIWERyChcezlvPBTGr5OGm0NF1TZKufLmoLsUYszpY0Zeksn/U965GaraOumk8DoR6r4JnXAoGBAIXWfgPRUVoPvKJ7IGBpgKCLYRqrVIUASmXqRNmY4csch1EKKuMlgNfZr0DHdQMKgGSePa0UQrbbu31kRfbCY/T4bCisDtaMx0RxaCsU0OxiS3IqCQ2Ls5l+3DrHj9Y9WxCLqkRQTfAYoIWjF5ji4ErwUNZ2CKop+WwCkeh24RgBAoGAe7HxijFT3zRr0uoMTELOSGKlz4Uxt4qESRVPwhcRf+FM7/X04D0iGElGljOXvKlWzantO6nADVHjVqOmU30p8v/fMKQdquVEdrboGTmShpsKOAv6pdjLJvGxJOX04MlLIl9mXVfPBfwDuDLG7hTT8MuacBUVO559hXGUoESE7McCgYBbI5bGY11Hgq3dv+48FnlxVdd8Yj5KKvkNrAeCwg4aGns+en0tBU1mCIwEUhlJQH5fFdvVlWT98zOzcy5NemNwbD8a6Po3AFi7aIt3J1GpZqmIKaCxGmlREs7bUDGal8N+g0723pGMQVD0mqbw7KTL+6juANXayjaYpFAOwGc8BA==\n-----END RSA PRIVATE KEY-----\n\n\n\n3. \u4e8b\u5f8c\u4f5c\u696d\n\n\u30ad\u30fc\u30da\u30a2\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws ec2 describe-key-pairs \\\n  --key-names ${EC2_KEY_PAIR_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"KeyPairs\": [\n          {\n              \"KeyName\": \"prjz-us-west-2-ec2\",\n              \"KeyFingerprint\": \"xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx\"\n          }\n        ]\n      }\n\n\n\n\u5b8c\u4e86\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001EC2\u306e\u30ad\u30fc\u30da\u30a2\u3092\u65b0\u898f\u306b\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n\nEC2\u3078\u306e\u6a29\u9650\n-----------\n\n* EC2\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n-------------------\n\n* \u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n  * AWS CLI 1.10.44\n  * AWS CLI 1.8.11\n  * AWS CLI 1.7.39\n  * AWS CLI 1.7.36\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws --version\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      aws-cli/1.10.44 Python/2.7.11 Darwin/15.5.0 botocore/1.4.34\n```\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u5834\u5408\u306f\u6700\u65b0\u7248\u306b\u66f4\u65b0\u3057\u307e\u3057\u3087\u3046\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nsudo -H pip install -U awscli\n```\n\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n---------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n```\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n---------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\naws configure list\n```\n\n```text:\u7d50\u679c(\u4f8b):\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile     ec2Full-prjZ-mbp13                env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region           ap-northeast-1              env    AWS_DEFAULT_REGION\n```\n\n\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n===========\n\n\n1.1. \u30ad\u30fc\u30da\u30a2\u540d\u306e\u6c7a\u5b9a\n--------------------\n\n\u4eca\u56de\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f\u3001\u30ad\u30fc\u30da\u30a2\u540d\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3068\u4f5c\u696d\u5834\u6240\u3092\u57cb\u3081\u8fbc\u307f\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a(\u4f8b):\nPRJ_NAME='handson'\n```\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nEC2_KEY_PAIR_NAME=\"${PRJ_NAME}-${AWS_DEFAULT_REGION}-ec2\" \\\n  && echo ${EC2_KEY_PAIR_NAME}\n```\n\n\n1.2. \u540c\u540d\u30ad\u30fc\u30da\u30a2\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d\n----------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ec2 describe-key-pairs \\\n  --key-names ${EC2_KEY_PAIR_NAME}\n```\n\n```text:\u7d50\u679c(\u4f8b):\nA client error (InvalidKeyPair.NotFound) occurred when calling the DescribeKeyPairs operation: The key pair 'prjz-us-west-2-ec2' does not exist\n```\n\n\n1.3. Key\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u6c7a\u5b9a\n------------------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\nFILE_SSH_KEY=\"${HOME}/.ssh/${EC2_KEY_PAIR_NAME}.pem\" \\\n  && echo ${FILE_SSH_KEY}\n```\n\n\n1.4. Key\u30d5\u30a1\u30a4\u30eb\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d\n----------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nls ${FILE_SSH_KEY}\n```\n\n```text:\u7d50\u679c(\u4f8b):\nls: /Users/aws/.ssh/prjz-us-west-2-ec2.pem: No such file or directory\n```\n\n\n2. \u30ad\u30fc\u30da\u30a2\u306e\u4f5c\u6210\n================\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        EC2_KEY_PAIR_NAME: ${EC2_KEY_PAIR_NAME}\n        FILE_SSH_KEY:      ${FILE_SSH_KEY}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ec2 create-key-pair \\\n  --key-name ${EC2_KEY_PAIR_NAME} \\\n  --query 'KeyMaterial' \\\n  --output text \\\n  > ${FILE_SSH_KEY} \\\n  && cat ${FILE_SSH_KEY} \\\n  && chmod 400 ${FILE_SSH_KEY}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n-----BEGIN RSA PRIVATE KEY-----\nMIIEoQIBAAKCAQEAoeEnI72MIR/mCwTI9qBrD8vMPpBB3Jal5VsUvF4WX8j9q9yy/5SuSnoVptziYhc8n389ZkbHZaBK/hgEcNNecSpYcYSYmrpzLDDs1DTtdlNcLtExA3n0RmXnp1dO5WRmIothbVDzB9tFWURj1z/o4N1N2hMer+tV/0qQdFIG/7XkzzalIGHbbE1q+ZUiwGEygTvbZEjR/BjvT4VKf+Yyp5KrX+ZGpLCntDWoecRZdc1hZE+3mA+mF8p5pDdHR8nNqMVvmBB6uhGqChGsDnDGnIoC1YrV4YrjyZ+ej7W6ljlSmEbk6U4VdTr+GKOq79i1A6rR53/CqAnca3KlGNwuRwIDAQABAoH/fJHGjLpQGy1w2QnVm/PWb1Fk2sAn7pf/EYAFdO7ySMNicd5j4EmJ1cYc40sW6mT3QcWoegv9ZTb0fpP81tXQ10S+ypw+0tKnzlnX5XTVRzjetyhDj2lJkOLaYOvOyrd34R1g275vRpx1wTvfmMSVcHTcc/RCqR1wEARRJTH6MMuH/MfzjZhMSGCyzEL1ZA0p2vzKQIkZj1cUZwsIA6FP+wIEydQXUBrX+GGx5NNq5jU5kvHXUhNaT+xlvIqAWSf/TSC38soPtIfww2EYKIza9bfdBQSwy+gcAp2I+tJcE8N6e7zJgPQ2jMsViiw+q3+42a1F1iab3fG43Iin1wjhAoGBAPkvgR9MBeakAUvPJebv8wpTyzcDmfOVhd0CLD8NdvPiz3Vr9LF1F0DkH9fnQbSXw14+ns1lWenhLkNBp0t24p0QiCdGOM3uh5KQnYfkCy38rrG6JaP9rlm7+AqAE8QNZCx/9ld3SgKblSph9UPqihuVJcBIXy/YOs6h9onWpOERAoGBAKZOb+rBdNcNl4RMRfdkjzkxJG7JhNPhdFobzrwaglArAZZhTLQwpOTEGNlPjzv3N1VMdJlI6Nb/rC8HrZAaHp50/ZTkBnGs4Z49QvIWERyChcezlvPBTGr5OGm0NF1TZKufLmoLsUYszpY0Zeksn/U965GaraOumk8DoR6r4JnXAoGBAIXWfgPRUVoPvKJ7IGBpgKCLYRqrVIUASmXqRNmY4csch1EKKuMlgNfZr0DHdQMKgGSePa0UQrbbu31kRfbCY/T4bCisDtaMx0RxaCsU0OxiS3IqCQ2Ls5l+3DrHj9Y9WxCLqkRQTfAYoIWjF5ji4ErwUNZ2CKop+WwCkeh24RgBAoGAe7HxijFT3zRr0uoMTELOSGKlz4Uxt4qESRVPwhcRf+FM7/X04D0iGElGljOXvKlWzantO6nADVHjVqOmU30p8v/fMKQdquVEdrboGTmShpsKOAv6pdjLJvGxJOX04MlLIl9mXVfPBfwDuDLG7hTT8MuacBUVO559hXGUoESE7McCgYBbI5bGY11Hgq3dv+48FnlxVdd8Yj5KKvkNrAeCwg4aGns+en0tBU1mCIwEUhlJQH5fFdvVlWT98zOzcy5NemNwbD8a6Po3AFi7aIt3J1GpZqmIKaCxGmlREs7bUDGal8N+g0723pGMQVD0mqbw7KTL+6juANXayjaYpFAOwGc8BA==\n-----END RSA PRIVATE KEY-----\n```\n\n\n3. \u4e8b\u5f8c\u4f5c\u696d\n===========\n\n\n\u30ad\u30fc\u30da\u30a2\u306e\u78ba\u8a8d\n-------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ec2 describe-key-pairs \\\n  --key-names ${EC2_KEY_PAIR_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"KeyPairs\": [\n          {\n              \"KeyName\": \"prjz-us-west-2-ec2\",\n              \"KeyFingerprint\": \"xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx\"\n          }\n        ]\n      }\n```\n\n\u5b8c\u4e86\n====\n", "tags": ["aws-cli", "AWS", "EC2"]}