{"context": "erlang.mk\u3092\u4f7f\u3063\u3066\u30ea\u30ea\u30fc\u30b9\u4f5c\u6210\u306b\u95a2\u3057\u3066\u306f\u6b21\u306e\u6295\u7a3f\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002ninenines.eu\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30b5\u30a4\u30c8\u306ferlang.mk\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\uff0c\u500b\u4eba\u7684\u306b\u306fRebar\u306b\u306f\u307e\u305f\u306a\u308c\u3066\u3044\u306a\u304f\u3066\uff0c\u3068\u308a\u3042\u3048\u305aRebar\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u3044\u306e\u3067\uff0cRebar\u3067cowboy\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u307e\u3057\u305f\uff0eRebar\u306e\u3053\u3068\u5206\u304b\u3063\u305f\u5f8c\u306b\uff0cerlang.mk\u306b\u79fb\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\nhello_world\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0e\n$ rebar create-app appid=hello_world\n==> hello_world (create-app)\nWriting src/hello_world.app.src\nWriting src/hello_world_app.erl\nWriting src/hello_world_sup.erl\n\nrebar.config\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0esub_dirs\u306f\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u5165\u308c\u3066\u3042\u308a\u307e\u3059\uff0e\n{ sub_dirs, [\"rel\"] }.\n\n{deps, [\n        {cowboy, \".*\", {git, \"https://github.com/extend/cowboy.git\"}}\n       ]\n}.\n\n\u305d\u3057\u3066\u4f9d\u983c\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8cowboy\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\uff0e\n$ rebar get-deps\n\u4e0b\u306fsrc/hello_world_app.erl\u30d5\u30a1\u30a4\u30eb\n-module(hello_world_app).\n-behaviour(application).\n\n%% Application callbacks\n-export([start/2, stop/1]).\n\nstart(_StartType, _StartArgs) ->\n    Dispatch = cowboy_router:compile([\n        {'_',\n              [\n                {\"/\", cowboy_static, {priv_file, hello_world, \"index.html\"}}\n              ]\n        }\n    ]),\n    {ok, _} = cowboy:start_http(http, 100, [{port, 8080}],\n                                [\n                                    {env, [{dispatch, Dispatch} ] }\n                                ]),\n    hello_world_sup:start_link().\n\nstop(_State) ->\n    ok.\n\nsrc/hello_world.app.src\u306eapplications\u90e8\u5206\u306fcowboy\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n$ cat hello_world.app.src\n{application, hello_world,\n [\n  {description, \"\"},\n  {vsn, \"1\"},\n  {registered, []},\n  {applications, [\n                  kernel,\n                  stdlib,\n                  cowboy\n                 ]},\n  {mod, { hello_world_app, []}},\n  {env, []}\n ]}.\n\npriv\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0epriv/index.html\u3082\u7528\u610f\u3057\u307e\u3059\n$ mkdir priv\n$ cat index.html\n<h1>Hello world from cowboy</h1>\n\n\u3053\u308c\u304b\u3089\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0e\n$ mkdir rel\n$ cd rel\n$ rebar create-node nodeid=hello_world\n==> rel (create-node)\nWriting reltool.config\nWriting files/erl\nWriting files/nodetool\nWriting files/hello_world\nWriting files/sys.config\nWriting files/vm.args\nWriting files/hello_world.cmd\nWriting files/start_erl.cmd\nWriting files/install_upgrade.escript\n\nreltool.config\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\uff0e\n{lib_dirs, []},\n\u3092\n{lib_dirs, [\"../deps\", \"../apps\"]},\n\u306b\u5909\u66f4\u3057\u307e\u3059\uff0e\napps/hello_world\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u5fc5\u8981\n$ mkdir -p apps/hello_world\nebin/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u7528\u610f\u3057\u307e\u3059\uff0e\n$ mkdir ebin\n\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092apps/hello_world/\u306e\u4e0b\u306b\u4f5c\u6210(\u30ea\u30ea\u30fc\u30b9\u4f5c\u6210\u3059\u308b\u3068\u304d\u306bapp/hello_world\u4e0b\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u5fc5\u8981\u307f\u305f\u3044\u306a\u306e\u3067\u3001\u4f5c\u6210\u3057\u307e\u3057\u305f)\nmkdir -p apps/hello_world\ncd apps/hello_world\nln -s ../../src\nln -s ../../ebin\nln -s ../../priv\ncd ../..\n\n\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\n$ rebar compile generate\n==> cowlib (compile)\n==> ranch (compile)\n==> cowboy (compile)\n==> rel (compile)\n==> hello_world (compile)\nCompiled src/hello_world_sup.erl\nCompiled src/hello_world_app.erl\n==> rel (generate)\nWARN:  'generate' command does not apply to directory /Users/wzj/Projects/Web-Programming/Erlang/hello_world\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\uff0e\n$ ./rel/hello_world/bin/hello_world console\n\u3053\u308c\u3067127.0.0.1:8080\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068index.html\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u307e\u3059\uff0e\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\n$ tree -L 2\n.\n\u251c\u2500\u2500 apps\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_world\n\u251c\u2500\u2500 deps\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cowboy\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cowlib\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 ranch\n\u251c\u2500\u2500 ebin\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world.app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world_app.beam\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_world_sup.beam\n\u251c\u2500\u2500 priv\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 index.html\n\u251c\u2500\u2500 rebar.config\n\u251c\u2500\u2500 rel\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 files\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 reltool.config\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 hello_world.app.src\n    \u251c\u2500\u2500 hello_world_app.erl\n    \u2514\u2500\u2500 hello_world_sup.erl\n\n12 directories, 9 files\n\nerlang.mk\u3092\u4f7f\u3063\u3066\u30ea\u30ea\u30fc\u30b9\u4f5c\u6210\u306b\u95a2\u3057\u3066\u306f[\u6b21\u306e\u6295\u7a3f](http://qiita.com/ColdFreak/items/8aaa71d0bc4270e0970c)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002[ninenines.eu\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30b5\u30a4\u30c8](http://ninenines.eu/docs/en/cowboy/1.0/guide/getting_started/)\u306ferlang.mk\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\uff0c\u500b\u4eba\u7684\u306b\u306fRebar\u306b\u306f\u307e\u305f\u306a\u308c\u3066\u3044\u306a\u304f\u3066\uff0c\u3068\u308a\u3042\u3048\u305aRebar\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u3044\u306e\u3067\uff0cRebar\u3067cowboy\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u307e\u3057\u305f\uff0eRebar\u306e\u3053\u3068\u5206\u304b\u3063\u305f\u5f8c\u306b\uff0cerlang.mk\u306b\u79fb\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\n\nhello_world\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0e\n\n```erlang\n$ rebar create-app appid=hello_world\n==> hello_world (create-app)\nWriting src/hello_world.app.src\nWriting src/hello_world_app.erl\nWriting src/hello_world_sup.erl\n```\nrebar.config\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0esub_dirs\u306f\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u5165\u308c\u3066\u3042\u308a\u307e\u3059\uff0e\n\n```erlang\n{ sub_dirs, [\"rel\"] }.\n\n{deps, [\n        {cowboy, \".*\", {git, \"https://github.com/extend/cowboy.git\"}}\n       ]\n}.\n```\n\n\u305d\u3057\u3066\u4f9d\u983c\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8cowboy\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\uff0e\n`$ rebar get-deps`\n\n\u4e0b\u306fsrc/hello_world_app.erl\u30d5\u30a1\u30a4\u30eb\n\n```erlang\n-module(hello_world_app).\n-behaviour(application).\n\n%% Application callbacks\n-export([start/2, stop/1]).\n\nstart(_StartType, _StartArgs) ->\n    Dispatch = cowboy_router:compile([\n        {'_',\n              [\n                {\"/\", cowboy_static, {priv_file, hello_world, \"index.html\"}}\n              ]\n        }\n    ]),\n    {ok, _} = cowboy:start_http(http, 100, [{port, 8080}],\n                                [\n                                    {env, [{dispatch, Dispatch} ] }\n                                ]),\n    hello_world_sup:start_link().\n\nstop(_State) ->\n    ok.\n```\n\nsrc/hello_world.app.src\u306eapplications\u90e8\u5206\u306fcowboy\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\n```erlang\n$ cat hello_world.app.src\n{application, hello_world,\n [\n  {description, \"\"},\n  {vsn, \"1\"},\n  {registered, []},\n  {applications, [\n                  kernel,\n                  stdlib,\n                  cowboy\n                 ]},\n  {mod, { hello_world_app, []}},\n  {env, []}\n ]}.\n```\n\npriv\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0epriv/index.html\u3082\u7528\u610f\u3057\u307e\u3059\n\n```\n$ mkdir priv\n$ cat index.html\n<h1>Hello world from cowboy</h1>\n```\n\n\u3053\u308c\u304b\u3089\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0e\n\n```\n$ mkdir rel\n$ cd rel\n$ rebar create-node nodeid=hello_world\n==> rel (create-node)\nWriting reltool.config\nWriting files/erl\nWriting files/nodetool\nWriting files/hello_world\nWriting files/sys.config\nWriting files/vm.args\nWriting files/hello_world.cmd\nWriting files/start_erl.cmd\nWriting files/install_upgrade.escript\n```\n\nreltool.config\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\uff0e\n\n`{lib_dirs, []},`\n\u3092\n`{lib_dirs, [\"../deps\", \"../apps\"]},`\n\u306b\u5909\u66f4\u3057\u307e\u3059\uff0e\n\napps/hello_world\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u5fc5\u8981\n`$ mkdir -p apps/hello_world`\n\nebin/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u7528\u610f\u3057\u307e\u3059\uff0e\n\n`$ mkdir ebin`\n\n\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092apps/hello_world/\u306e\u4e0b\u306b\u4f5c\u6210(\u30ea\u30ea\u30fc\u30b9\u4f5c\u6210\u3059\u308b\u3068\u304d\u306bapp/hello_world\u4e0b\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u5fc5\u8981\u307f\u305f\u3044\u306a\u306e\u3067\u3001\u4f5c\u6210\u3057\u307e\u3057\u305f)\n\n```\nmkdir -p apps/hello_world\ncd apps/hello_world\nln -s ../../src\nln -s ../../ebin\nln -s ../../priv\ncd ../..\n```\n\n\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\n\n```\n$ rebar compile generate\n==> cowlib (compile)\n==> ranch (compile)\n==> cowboy (compile)\n==> rel (compile)\n==> hello_world (compile)\nCompiled src/hello_world_sup.erl\nCompiled src/hello_world_app.erl\n==> rel (generate)\nWARN:  'generate' command does not apply to directory /Users/wzj/Projects/Web-Programming/Erlang/hello_world\n```\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\uff0e\n\n`$ ./rel/hello_world/bin/hello_world console`\n\n\u3053\u308c\u3067127.0.0.1:8080\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068index.html\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u307e\u3059\uff0e\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\n\n```\n$ tree -L 2\n.\n\u251c\u2500\u2500 apps\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_world\n\u251c\u2500\u2500 deps\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cowboy\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cowlib\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 ranch\n\u251c\u2500\u2500 ebin\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world.app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world_app.beam\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_world_sup.beam\n\u251c\u2500\u2500 priv\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 index.html\n\u251c\u2500\u2500 rebar.config\n\u251c\u2500\u2500 rel\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 files\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 reltool.config\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 hello_world.app.src\n    \u251c\u2500\u2500 hello_world_app.erl\n    \u2514\u2500\u2500 hello_world_sup.erl\n\n12 directories, 9 files\n```\n", "tags": ["rebar", "cowboy", "Erlang"]}