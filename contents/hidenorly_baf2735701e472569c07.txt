{"context": " More than 1 year has passed since last update.\n\nOverview\n3/9(US\u6642\u9593) \u306b\u3001Android N Developer Preview\u304c\u51fa\u307e\u3057\u305f\u3002\n\u3068\u3001\u540c\u6642\u306b developer.android.com \u306b\u304a\u3044\u3066\u3001behavior change \u304c\u51fa\u307e\u3057\u305f\u306e\u3067\u3001\u5c11\u3057\u305a\u3064\u8aad\u307f\u89e3\u3044\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nbackground\u306e\u6700\u9069\u5316\nhttp://developer.android.com/preview/behavior-changes.html#bg-opt\n\nAndroid N removes three implicit broadcasts in order to help optimize both memory use and power consumption. This change is necessary because implicit broadcasts frequently start apps that have registered to listen for them in the background. Removing these broadcasts can substantially benefit device performance and user experience.\n\n\u6284\u8a33:\n\nAndroid N\u3067\u306f\u30013\u3064\u306e\u6697\u9ed9\u7684\u306abroadcast intent\u3092\u3001\u30e1\u30e2\u30ea\u30fc\u4f7f\u7528\u3068\u3001\u6d88\u8cbb\u96fb\u529b\u3092\u6700\u9069\u5316\u3059\u308b\u305f\u3081\u306b\u524a\u9664\u3057\u307e\u3059\u3002\u3068\u3044\u3046\u306e\u306f\u3001background\u3067\u3001\u6697\u9ed9\u7684\u306abroadcast intent\u3092listen\u3057\u3066\u3044\u308b\u30a2\u30d7\u30ea\u304c\u3001\u983b\u7e41\u306b\u8d77\u52d5\u3059\u308b\u305f\u3081\u3067\u3059\u3002\u3053\u308c\u3089\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001device\u306eperformance\u3068\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u306b\u8ca2\u732e\u3057\u3048\u307e\u3059\u3002\n\n\u3058\u3083\u3041\u3001\u4f55\u3092\u524a\u9664\u3059\u308b\u306e\u304b\uff1f\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u304c\u3001\n\nCONNECTIVITY_ACTION\nACTION_NEW_PICTURE\nACTION_NEW_VIDEO\n\n\u306e\uff13\u3064\u3067\u3059\u3002\n\nCONNECTIVITY_ACTION\u306f\u3001targetSdkVersion=N\u3067\u5f71\u97ff\u3057\u307e\u3059\u3002\u3067\u3001AndroidManifest.xml\u306b\u3001\u66f8\u3044\u3066\u3044\u3066\u3082\u3001\u53d7\u3051\u53d6\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u305f\u3060\u3057\u3001BroadcastReceiver\u3092Context.registerReceiver()\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001foreground\u3067\u30a2\u30d7\u30ea\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3068\u304d\u306f\u3001\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nhttp://developer.android.com/preview/features/background-optimization.html \u306b\u3088\u308b\u3068\u3001\nACTION_NEW_PICTURE / ACTION_NEW_VIDEO\u306f\u3001targetSdkVersion\u306b\u306f\u3088\u3089\u306a\u3044\u3067\u3059\u3002\n\n\u306a\u304a\u3001\u4eca\u5f8c\u3001\u3053\u306e\uff13\u3064\u306b\u9650\u3089\u305a\u3001\u3082\u3063\u3068\u5897\u3084\u3059\u304b\u3082\u3068\u306e\u3053\u3068\u3067\u3059\u3002\n\n\u4ee3\u66ff\u6848\u306f?\n\nCONNECTIVITY_ACTION\nCONNECTIVITY_ACTION\u306f\u3001\u524d\u8ff0\u306e\u3068\u304a\u308a\u3001foreground\u3067\u3060\u3051\u3067\u3088\u3051\u308c\u3070\u3001\u52d5\u7684\u306b\n\u767b\u9332\u3092\u884c\u3048\u3070\u3001\u5927\u4e08\u592b\u3067\u3059\u3002\nhttp://developer.android.com/preview/features/background-optimization.html#sched-jobs\n\u3084\u3001\nhttp://developer.android.com/samples/JobScheduler/index.html\n\u3092\u4f7f\u3048\u3068\u306e\u3053\u3068\u3067\u3059\u3002\nJobScheduler\u306b\u95a2\u3057\u3066\u306f\u304a\u306a\u3058\u307f\u306a\u306e\u3067\u3001\u3080\u3057\u308d\u3001connectivity change\u306ebroadcast intent\u3092\u4f7f\u3046\u306e\u306f\u3069\u3061\u3089\u304b\u3068\u3044\u3046\u3068\u3001\u304a\u4f5c\u6cd5\u7684\u306b\u3088\u308d\u3057\u304f\u306a\u3044\u306e\u3067\u3001\u7279\u306b\u76ee\u65b0\u3057\u304f\u306f\u306a\u3044\u611f\u3058\u3067\u3059\u3002\n\nNEW_PICTURE / NEW_VIDEO\n\u3053\u308c\u3089\u306e\u5bfe\u7b56\u306f\u5b8c\u5168\u306b\u65b0\u898f\u3067\u3059\u3002\nhttp://developer.android.com/preview/features/background-optimization.html#media-broadcasts\n\nJobInfo.TriggerContentUri()\nEncapsulates parameters required to trigger a job on content URI changes.\n\n\u6284\u8a33:\n\ncontent URI\u306e\u5909\u5316\u3067job\u3092\u8d77\u52d5\u3055\u305b\u308b\u306e\u306b\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5c01\u5165\u3057\u307e\u3059\u3002\n\n\u3068\n\nJobInfo.Builder.addTriggerContentUri()\nPasses a TriggerContentUri object to JobInfo. A ContentObserver monitors the encapsulated content URI. If there are multiple TriggerContentUri objects associated with a job, the system provides a callback even if it reports a change in only one of the content URIs.\nAdd the TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS flag to trigger the job if any descendants of the given URI change. This flag corresponds to the notifyForDescendants parameter passed to registerContentObserver().\n\n\u6284\u8a33:\n\nTriggerContentUri object\u3092JobInfo\u306b\u6e21\u3057\u307e\u3059\u3002ContentObserver\u306f\u3001\u5c01\u5165\u3055\u308c\u305fcontent URI\u3092\u76e3\u8996\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u304ccallback\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u305f\u3068\u3048\u3001\u8907\u6570\u306econtent URI\u306e\u3046\u3061\uff11\u3064\u3067\u3082\u5909\u5316\u3057\u305f\u3089report\u3057\u307e\u3059\u3002\u4e0e\u3048\u3089\u308c\u305fURI\u306b\u7531\u6765\u3059\u308b\u3069\u3093\u306a\u5909\u5316\u3082\u5fc5\u8981\u306a\u3068\u304d\u306f\u3001TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS\u306eflag\u3092Job\u3092trigger\u3059\u308b\u305f\u3081\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306eflag\u306f\u3001registerObserver\u306b\u6e21\u3059notifyForDescendants\u306eparameter\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u3002\n\n\u304c\u8ffd\u52a0\u306b\u306a\u3063\u3066\u3044\u307e\u3059(\u3061\u306a\u307f\u306b\u3001\u5b9a\u671f\u5b9f\u884c\u306f\u3067\u304d\u306a\u3044)\u3002\n\u3088\u3046\u306f\u3001JobScheduler\u3067\u3001content\u306e\u5909\u5316\u3092trigger\u6761\u4ef6\u306b\u3057\u3066\u3001Job\u3092\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u78ba\u8a8d\u306e\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3082\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3068\u306e\u3053\u3068\u3067\u3059\u3002\n$ adb shell cmd appops set RUN_IN_BACKGROUND ignore\n\n# Overview\n\n3/9(US\u6642\u9593) \u306b\u3001Android N Developer Preview\u304c\u51fa\u307e\u3057\u305f\u3002\n\n\u3068\u3001\u540c\u6642\u306b developer.android.com \u306b\u304a\u3044\u3066\u3001behavior change \u304c\u51fa\u307e\u3057\u305f\u306e\u3067\u3001\u5c11\u3057\u305a\u3064\u8aad\u307f\u89e3\u3044\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# background\u306e\u6700\u9069\u5316\n\nhttp://developer.android.com/preview/behavior-changes.html#bg-opt\n\n> Android N removes three implicit broadcasts in order to help optimize both memory use and power consumption. This change is necessary because implicit broadcasts frequently start apps that have registered to listen for them in the background. Removing these broadcasts can substantially benefit device performance and user experience.\n\n\u6284\u8a33:\n```\nAndroid N\u3067\u306f\u30013\u3064\u306e\u6697\u9ed9\u7684\u306abroadcast intent\u3092\u3001\u30e1\u30e2\u30ea\u30fc\u4f7f\u7528\u3068\u3001\u6d88\u8cbb\u96fb\u529b\u3092\u6700\u9069\u5316\u3059\u308b\u305f\u3081\u306b\u524a\u9664\u3057\u307e\u3059\u3002\u3068\u3044\u3046\u306e\u306f\u3001background\u3067\u3001\u6697\u9ed9\u7684\u306abroadcast intent\u3092listen\u3057\u3066\u3044\u308b\u30a2\u30d7\u30ea\u304c\u3001\u983b\u7e41\u306b\u8d77\u52d5\u3059\u308b\u305f\u3081\u3067\u3059\u3002\u3053\u308c\u3089\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001device\u306eperformance\u3068\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u306b\u8ca2\u732e\u3057\u3048\u307e\u3059\u3002\n```\n\n\u3058\u3083\u3041\u3001\u4f55\u3092\u524a\u9664\u3059\u308b\u306e\u304b\uff1f\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u304c\u3001\n\n* CONNECTIVITY_ACTION\n* ACTION_NEW_PICTURE\n* ACTION_NEW_VIDEO\n\n\u306e\uff13\u3064\u3067\u3059\u3002\n\n* CONNECTIVITY_ACTION\u306f\u3001targetSdkVersion=N\u3067\u5f71\u97ff\u3057\u307e\u3059\u3002\u3067\u3001AndroidManifest.xml\u306b\u3001\u66f8\u3044\u3066\u3044\u3066\u3082\u3001\u53d7\u3051\u53d6\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u305f\u3060\u3057\u3001BroadcastReceiver\u3092Context.registerReceiver()\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001foreground\u3067\u30a2\u30d7\u30ea\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3068\u304d\u306f\u3001\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nhttp://developer.android.com/preview/features/background-optimization.html \u306b\u3088\u308b\u3068\u3001\n* ACTION_NEW_PICTURE / ACTION_NEW_VIDEO\u306f\u3001targetSdkVersion\u306b\u306f\u3088\u3089\u306a\u3044\u3067\u3059\u3002\n\n\u306a\u304a\u3001\u4eca\u5f8c\u3001\u3053\u306e\uff13\u3064\u306b\u9650\u3089\u305a\u3001\u3082\u3063\u3068\u5897\u3084\u3059\u304b\u3082\u3068\u306e\u3053\u3068\u3067\u3059\u3002\n\n# \u4ee3\u66ff\u6848\u306f?\n\n## CONNECTIVITY_ACTION\n\nCONNECTIVITY_ACTION\u306f\u3001\u524d\u8ff0\u306e\u3068\u304a\u308a\u3001foreground\u3067\u3060\u3051\u3067\u3088\u3051\u308c\u3070\u3001\u52d5\u7684\u306b\n\u767b\u9332\u3092\u884c\u3048\u3070\u3001\u5927\u4e08\u592b\u3067\u3059\u3002\n\nhttp://developer.android.com/preview/features/background-optimization.html#sched-jobs\n\n\u3084\u3001\n\nhttp://developer.android.com/samples/JobScheduler/index.html\n\n\u3092\u4f7f\u3048\u3068\u306e\u3053\u3068\u3067\u3059\u3002\n\nJobScheduler\u306b\u95a2\u3057\u3066\u306f\u304a\u306a\u3058\u307f\u306a\u306e\u3067\u3001\u3080\u3057\u308d\u3001connectivity change\u306ebroadcast intent\u3092\u4f7f\u3046\u306e\u306f\u3069\u3061\u3089\u304b\u3068\u3044\u3046\u3068\u3001\u304a\u4f5c\u6cd5\u7684\u306b\u3088\u308d\u3057\u304f\u306a\u3044\u306e\u3067\u3001\u7279\u306b\u76ee\u65b0\u3057\u304f\u306f\u306a\u3044\u611f\u3058\u3067\u3059\u3002\n\n## NEW_PICTURE / NEW_VIDEO\n\n\u3053\u308c\u3089\u306e\u5bfe\u7b56\u306f\u5b8c\u5168\u306b\u65b0\u898f\u3067\u3059\u3002\n\nhttp://developer.android.com/preview/features/background-optimization.html#media-broadcasts\n\n> JobInfo.TriggerContentUri()\nEncapsulates parameters required to trigger a job on content URI changes.\n\n\u6284\u8a33:\n```\ncontent URI\u306e\u5909\u5316\u3067job\u3092\u8d77\u52d5\u3055\u305b\u308b\u306e\u306b\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5c01\u5165\u3057\u307e\u3059\u3002\n```\n\n\u3068\n\n> JobInfo.Builder.addTriggerContentUri()\nPasses a TriggerContentUri object to JobInfo. A ContentObserver monitors the encapsulated content URI. If there are multiple TriggerContentUri objects associated with a job, the system provides a callback even if it reports a change in only one of the content URIs.\nAdd the TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS flag to trigger the job if any descendants of the given URI change. This flag corresponds to the notifyForDescendants parameter passed to registerContentObserver().\n\n\u6284\u8a33:\n```\nTriggerContentUri object\u3092JobInfo\u306b\u6e21\u3057\u307e\u3059\u3002ContentObserver\u306f\u3001\u5c01\u5165\u3055\u308c\u305fcontent URI\u3092\u76e3\u8996\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u304ccallback\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u305f\u3068\u3048\u3001\u8907\u6570\u306econtent URI\u306e\u3046\u3061\uff11\u3064\u3067\u3082\u5909\u5316\u3057\u305f\u3089report\u3057\u307e\u3059\u3002\u4e0e\u3048\u3089\u308c\u305fURI\u306b\u7531\u6765\u3059\u308b\u3069\u3093\u306a\u5909\u5316\u3082\u5fc5\u8981\u306a\u3068\u304d\u306f\u3001TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS\u306eflag\u3092Job\u3092trigger\u3059\u308b\u305f\u3081\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306eflag\u306f\u3001registerObserver\u306b\u6e21\u3059notifyForDescendants\u306eparameter\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u3002\n```\n\n\n\u304c\u8ffd\u52a0\u306b\u306a\u3063\u3066\u3044\u307e\u3059(\u3061\u306a\u307f\u306b\u3001\u5b9a\u671f\u5b9f\u884c\u306f\u3067\u304d\u306a\u3044)\u3002\n\n\u3088\u3046\u306f\u3001JobScheduler\u3067\u3001content\u306e\u5909\u5316\u3092trigger\u6761\u4ef6\u306b\u3057\u3066\u3001Job\u3092\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u78ba\u8a8d\u306e\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3082\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3068\u306e\u3053\u3068\u3067\u3059\u3002\n\n```\n$ adb shell cmd appops set RUN_IN_BACKGROUND ignore\n```\n\n", "tags": ["AndroidN", "CONNECTIVITY_CHANGE", "PICTURE_NEW", "NEW_VIDEO", "JobScheduler"]}