{"context": " More than 1 year has passed since last update.Sometime you will need load database config variables from your libraries.In this case, if you use $this->_CI->config->load('database'), you will get an error:\n$this->_CI = &get_instance();\n$this->_CI->config->load('database');\n\nThe error somthing like Your application/config/database.php file does not appear to contain a valid configuration array.\nThe source is in system/core/Config.php#138:\n\n// CodeIgniter Version 2.1.4\n\nif ( ! isset($config) OR ! is_array($config))\n            {\n                if ($fail_gracefully === TRUE)\n                {\n                    return FALSE;\n                }\n                show_error('Your '.$file_path.' file does not appear to contain a valid configuration array.');\n            }\n\n\nYou can find that the config will lookup an array with the name $config, but in your database's config file it contains array variable with the name $db defaultly.This is the reason you got the invalid configuration array error message.\nTo correctly load database configuration from libraries,you can you code below:\n$this->_CI->load->database('default');\n\n$db = $this->_CI->db;\n\nSomething::config(['driver'=> 'mysql','host'=> $db->hostname,\n    'dbname'=> $db->database,\n    'user'=> $db->username,\n    'password'=> $db->password]);\n\n\n\nNotice the default is the active group in your database configuration file.\nSometime you will need load database config variables from your libraries.In this case, if you use `$this->_CI->config->load('database')`, you will get an error:\n\n```\n$this->_CI = &get_instance();\n$this->_CI->config->load('database');\n```\n\nThe error somthing like `Your application/config/database.php file does not appear to contain a valid configuration array.`\n\nThe source is in `system/core/Config.php#138`:\n\n```\n\n// CodeIgniter Version 2.1.4\n\nif ( ! isset($config) OR ! is_array($config))\n\t\t\t{\n\t\t\t\tif ($fail_gracefully === TRUE)\n\t\t\t\t{\n\t\t\t\t\treturn FALSE;\n\t\t\t\t}\n\t\t\t\tshow_error('Your '.$file_path.' file does not appear to contain a valid configuration array.');\n\t\t\t}\n\n```\n\nYou can find that the config will lookup an array with the name `$config`, but in your database's config file it contains array variable with the name `$db` defaultly.This is the reason you got the invalid configuration array error message.\n\nTo correctly load database configuration from libraries,you can you code below:\n\n```\n$this->_CI->load->database('default');\n\n$db = $this->_CI->db;\n\nSomething::config(['driver'=> 'mysql','host'=> $db->hostname,\n    'dbname'=> $db->database,\n    'user'=> $db->username,\n    'password'=> $db->password]);\n\n\n```\n\nNotice the `default` is the active group in your database configuration file.\n", "tags": ["PHP", "CodeIgniter"]}