{"context": "\n\niOS\u95a2\u9023\n\niOS\u306e\u958b\u767a\u7528\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\nApple Developer\u306e\u30da\u30fc\u30b8\u306b\u79fb\u52d5\u3059\u308b\u3002\nhttps://developer.apple.com/account/\n\nCertificates, IDs & Profiles\u306e\u30da\u30fc\u30b8\u306b\u79fb\u52d5\u3002\n\nCertification\u306eDevelopment\u304b\u3089\u3001[+]\u3092\u9078\u629e\u3057\u3001\u4eca\u56de\u4f7f\u7528\u3059\u308b\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\u4eca\u56de\u306f\u3001\u958b\u767a\u7528\u306e\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\"Apple Push Notification service SSL(Sandbox)\"\n\u3092\u9078\u629e\u3059\u308b\u3002\n\nApp ID\u3092\u9078\u629e\u3059\u308b\u3002\u5404\u30a2\u30d7\u30ea\u306eBundle identifier\u3092\u5143\u306b\u3001\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n\n\n[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3]-[\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3]\u304b\u3089\u3001\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9\u3092\u8d77\u52d5\u3059\u308b\u3002\n\n[\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9]-[\u8a3c\u660e\u66f8\u30a2\u30b7\u30b9\u30bf\u30f3\u30c8]-[\u8a8d\u8a3c\u5c40\u306b\u8a3c\u660e\u66f8\u3092\u8981\u6c42]\u3092\u9078\u629e\u3002\n\n\u30e6\u30fc\u30b6\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u901a\u79f0\u3092\u7de8\u96c6\u3057\u3001\u30c7\u30a3\u30b9\u30af\u306b\u4fdd\u5b58\u3092\u9078\u629e\u3002\u8a3c\u660e\u66f8\u95a2\u4fc2\u306f\u3001\u65e5\u672c\u8a9e\u306f\u4e00\u5207\u4f7f\u308f\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\u65e5\u672c\u8a9e\u3092\u4f7f\u3046\u3068\u3001AWS SNS\u3067\u3046\u307e\u304f\u8aad\u307f\u8fbc\u3081\u306a\u304f\u306a\u308b\u3002\n\n\u8a3c\u660e\u66f8\u8981\u6c42\u3092\u4fdd\u5b58\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u3082\u65e5\u672c\u8a9e\u306f\u4f7f\u308f\u306a\u3044\u3002\n\n\nCertificateSigningRequest.certSigningRequest \u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u518d\u3073\u3001iOS Dev Center\u306b\u623b\u308a\u3001Upload CSR file\u306b\u3001\u4eca\u4f5c\u6210\u3057\u305fCSR\u3092\u9078\u629e\u3059\u308b\u3002\n\n\u8a3c\u660e\u66f8\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001[Download]\u3067\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3057\u3001\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057[\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9]\u306b\u8ffd\u52a0\u3059\u308b\u3002\n\n[\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9]\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u8a3c\u660e\u66f8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\nP12\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u66f8\u304d\u51fa\u3059\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306f\u65e5\u672c\u8a9e\u306f\u4f7f\u308f\u306a\u3044\u3002\n\n\nAWS\u95a2\u9023\n\nAWS SNS\u306e\u8a2d\u5b9a\n\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u3001SNS\u3092\u9078\u629e\u3059\u308b\u3002\n\nApplication Platform\u3092\u65b0\u898f\u3067\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001Application\u3092\u9078\u629e\u3002\n\n[Create Platform Application]\u3067Platform Application\u3092\u4f5c\u6210\u3059\u308b\u3002\n\nApplication\u540d\u306f\u4efb\u610f\u306e\u540d\u79f0\u3001Push Notification Platform\u306f\u3001Apple Development\u3092\u9078\u629e\u3002Choose P12 File\u306e\u7b87\u6240\u3067\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fP12\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3001Load Credentials from File\u3092\u9078\u629e\u3059\u308b\u3002\n\nApplication Platform\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306f\u3001ARN\u3092\u30a2\u30d7\u30ea\u7b49\u3067\u4f7f\u7528\u3059\u308b\u3002\n\n[Topics]\u3092\u304b\u3089\u3001Create new topic\u3092\u9078\u629e\u3057\u3001 Topic\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\nTopic\u3067\u751f\u6210\u3055\u308c\u305fArn\u306f\u3001Topic Arn\u3068\u3057\u3066\u3001Topic\u306e\u547c\u3073\u51fa\u3057\u306b\u4f7f\u7528\u3059\u308b\u3002\n\n\nAWS Cognito\u306e\u8a2d\u5b9a\n\n\n\n\n\n\n\n\n\n\n\nSwift\n\nCocoaPod\npod 'AWSSNS'\npod 'AWSCognito'\n\n\n$ pod install\n\n\nimport\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\nimport CoreData\nimport AWSCognito\nimport AWSSNS\n\n\nUser\u304b\u3089Push\u306e\u8a31\u53ef\u3092\u3082\u3089\u3046\n\nAppDelegate.swift\n     func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        // Override point for customization after application launch.\n\n        // \u30e6\u30fc\u30b6\u304b\u3089Push Notification\u901a\u77e5\u306e\u8a31\u53ef\u3092\u3082\u3089\u3046\n        let types: UIUserNotificationType = [UIUserNotificationType.Badge, UIUserNotificationType.Alert, UIUserNotificationType.Sound]\n        let settings: UIUserNotificationSettings = UIUserNotificationSettings( forTypes: types, categories: nil )\n\n        application.registerUserNotificationSettings( settings )\n        application.registerForRemoteNotifications()\n\n        return true\n    }\n\n\n\nToken\u3092\u767b\u9332\n\nAppDelegate.swift\n // Device Token \u3092\u53d6\u5f97\n    func application( application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: NSData ) {\n\n        // <>\u3068\" \"(\u7a7a\u767d)\u3092\u53d6\u308b\n        let characterSet: NSCharacterSet = NSCharacterSet( charactersInString: \"<>\" )\n\n        // Device Toke\u306e\u53d6\u5f97\n        let deviceTokenString: String = ( deviceToken.description as NSString )\n            .stringByTrimmingCharactersInSet( characterSet )\n            .stringByReplacingOccurrencesOfString( \" \", withString: \"\" ) as String\n\n        // Initialize the Amazon Cognito credentials provider\n        let credentialsProvider = AWSCognitoCredentialsProvider(regionType:.APNortheast1,\n                                                                identityPoolId:\"Identity Pool ID\u3092\u8a18\u8f09\")\n        let configuration = AWSServiceConfiguration(region:.APNortheast1, credentialsProvider:credentialsProvider)\n        AWSServiceManager.defaultServiceManager().defaultServiceConfiguration = configuration\n\n        let sns = AWSSNS.defaultSNS()\n        let request = AWSSNSCreatePlatformEndpointInput()\n        request.token = deviceTokenString\n        request.platformApplicationArn = \"Application Arn\u3092\u8a18\u8f09\"\n        request.customUserData = \"Memo\"\n\n        sns.createPlatformEndpoint(request).continueWithExecutor(AWSExecutor.mainThreadExecutor(), withBlock: { (task: AWSTask!) -> AnyObject! in\n            if task.error != nil {\n                print(\"Error: \\(task.error)\")\n            } else {\n                let result = task.result as! AWSSNSCreateEndpointResponse\n                let subscribeInput = AWSSNSSubscribeInput()\n                subscribeInput.topicArn = \"Topic Arn\u3092\u8a18\u8f09\"\n                subscribeInput.endpoint = result.endpointArn\n                subscribeInput.protocols = \"Application\"\n                sns.subscribe(subscribeInput)\n\n                self.saveEndpointArn(result.endpointArn)\n            }\n            return nil\n        })\n}\n\n\n\nPush\u3092\u53d7\u4fe1\n\nAppDelegate.swift\n// \u30d7\u30c3\u30b7\u30e5\u3092\u53d7\u3051\u53d6\u3063\u305f\u3068\u304d\n    func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject], fetchCompletionHandler completionHandler: (UIBackgroundFetchResult) -> Void) {\n        log.debug(\"UserInfo:\\(userInfo)\")\n        let appState: UIApplicationState = application.applicationState;\n        var appStateString: String = \"\";\n        if (appState == .Active) {\n            appStateString = \"active\";\n        } else if (appState == .Inactive) {\n            appStateString = \"inactive\";\n        } else if (appState == .Background) {\n            appStateString = \"background\";\n        }\n\n        let notifiAlert = UIAlertView()\n        if let aps = userInfo[\"aps\"] as? NSDictionary {\n            let msg: NSString = aps[\"alert\"] as! NSString\n            notifiAlert.title = \"PushTest\"\n            notifiAlert.message = msg\n            notifiAlert.addButtonWithTitle(\"OK\")\n            notifiAlert.show()\n        }\n    }\n\n\n\n\nPush\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\nRemotePush\n{\n\"APNS_SANDBOX\":\"{\\\"aps\\\":{\\\"alert\\\":\\\"test\\\"}}\"\n}\n\n\n\nSilentPush\n{\n\"APNS_SANDBOX\":\"{\\\"aps\\\":{\\\"content-available\\\":\\\"1\\\"}}\"\n}\n\n\n\nRemote Push Payload\nThe Remote Notification Payload\nhttps://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/TheNotificationPayload.html#//apple_ref/doc/uid/TP40008194-CH107-SW1\n\n\n# iOS\u95a2\u9023  \n## iOS\u306e\u958b\u767a\u7528\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\n\nApple Developer\u306e\u30da\u30fc\u30b8\u306b\u79fb\u52d5\u3059\u308b\u3002\nhttps://developer.apple.com/account/\n\n![iosdev001.png](https://qiita-image-store.s3.amazonaws.com/0/63450/8a90a2b6-d12e-7171-6ace-86ccde15e386.png)\n\nCertificates, IDs & Profiles\u306e\u30da\u30fc\u30b8\u306b\u79fb\u52d5\u3002\n\n![iosdev002.png](https://qiita-image-store.s3.amazonaws.com/0/63450/b366ae02-8d1e-da8e-5d72-915aa4b541a6.png)\n\nCertification\u306eDevelopment\u304b\u3089\u3001[+]\u3092\u9078\u629e\u3057\u3001\u4eca\u56de\u4f7f\u7528\u3059\u308b\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n![apple001.png](https://qiita-image-store.s3.amazonaws.com/0/63450/7d60c74e-7d95-e3a8-6bf5-cde847d76969.png)\n\n\u4eca\u56de\u306f\u3001\u958b\u767a\u7528\u306e\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\"Apple Push Notification service SSL(Sandbox)\"\n\u3092\u9078\u629e\u3059\u308b\u3002\n\n![apple002.png](https://qiita-image-store.s3.amazonaws.com/0/63450/1e9eacd7-4799-b900-7e97-6c0dd79b1265.png)\n\nApp ID\u3092\u9078\u629e\u3059\u308b\u3002\u5404\u30a2\u30d7\u30ea\u306eBundle identifier\u3092\u5143\u306b\u3001\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n\n![apple003.png](https://qiita-image-store.s3.amazonaws.com/0/63450/45f6b0c5-ab10-1e4f-8b67-4485325f35d4.png)\n\n![apple004.png](https://qiita-image-store.s3.amazonaws.com/0/63450/30f680a5-48ed-2306-bf12-193067bcd479.png)\n\n[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3]-[\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3]\u304b\u3089\u3001\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9\u3092\u8d77\u52d5\u3059\u308b\u3002\n\n![key001.png](https://qiita-image-store.s3.amazonaws.com/0/63450/649c02bb-198e-e063-9a47-b2ccd60b7775.png)\n\n[\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9]-[\u8a3c\u660e\u66f8\u30a2\u30b7\u30b9\u30bf\u30f3\u30c8]-[\u8a8d\u8a3c\u5c40\u306b\u8a3c\u660e\u66f8\u3092\u8981\u6c42]\u3092\u9078\u629e\u3002\n\n![key002.png](https://qiita-image-store.s3.amazonaws.com/0/63450/473dea9d-b7f6-ecf5-d965-149ec3e29cd4.png)\n\n\u30e6\u30fc\u30b6\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u901a\u79f0\u3092\u7de8\u96c6\u3057\u3001\u30c7\u30a3\u30b9\u30af\u306b\u4fdd\u5b58\u3092\u9078\u629e\u3002\u8a3c\u660e\u66f8\u95a2\u4fc2\u306f\u3001\u65e5\u672c\u8a9e\u306f\u4e00\u5207\u4f7f\u308f\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\u65e5\u672c\u8a9e\u3092\u4f7f\u3046\u3068\u3001AWS SNS\u3067\u3046\u307e\u304f\u8aad\u307f\u8fbc\u3081\u306a\u304f\u306a\u308b\u3002\n\n![key003.png](https://qiita-image-store.s3.amazonaws.com/0/63450/b33e6cfb-695c-0b07-1e51-794d93094b9a.png)\n\n\u8a3c\u660e\u66f8\u8981\u6c42\u3092\u4fdd\u5b58\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u3082\u65e5\u672c\u8a9e\u306f\u4f7f\u308f\u306a\u3044\u3002\n\n![key004.png](https://qiita-image-store.s3.amazonaws.com/0/63450/72df5a2c-2521-3fe2-a363-ccf9891fef80.png)\n\n![key_finish.png](https://qiita-image-store.s3.amazonaws.com/0/63450/f3680740-379d-df39-c2cc-46da3c3e09bb.png)\n\nCertificateSigningRequest.certSigningRequest \u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u518d\u3073\u3001iOS Dev Center\u306b\u623b\u308a\u3001Upload CSR file\u306b\u3001\u4eca\u4f5c\u6210\u3057\u305fCSR\u3092\u9078\u629e\u3059\u308b\u3002\n\n![apple005.png](https://qiita-image-store.s3.amazonaws.com/0/63450/d6469080-3ed5-3b8b-0b77-80503993aee4.png)\n\n\u8a3c\u660e\u66f8\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001[Download]\u3067\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3057\u3001\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057[\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9]\u306b\u8ffd\u52a0\u3059\u308b\u3002\n\n![push_002.png](https://qiita-image-store.s3.amazonaws.com/0/63450/148f857d-f456-41b6-4fc4-170d31af5844.png)\n\n\n[\u30ad\u30fc\u30c1\u30a7\u30fc\u30f3\u30a2\u30af\u30bb\u30b9]\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u8a3c\u660e\u66f8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n![key005_002.png](https://qiita-image-store.s3.amazonaws.com/0/63450/e11803e6-ea17-38d4-f394-afb4392ce7e4.png)\n\nP12\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u66f8\u304d\u51fa\u3059\u3002\n\n![key006.png](https://qiita-image-store.s3.amazonaws.com/0/63450/3d83a948-6c27-b23d-ec0e-638716d3ba46.png)\n\n\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306f\u65e5\u672c\u8a9e\u306f\u4f7f\u308f\u306a\u3044\u3002\n\n![key007.png](https://qiita-image-store.s3.amazonaws.com/0/63450/c5573cfc-4985-d1db-4449-314668dbaa6a.png)\n\n# AWS\u95a2\u9023\n## AWS SNS\u306e\u8a2d\u5b9a\n\n\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u3001SNS\u3092\u9078\u629e\u3059\u308b\u3002\n\n![sns001.png](https://qiita-image-store.s3.amazonaws.com/0/63450/d1bb8273-7dc4-240f-71e8-8a8041e8c985.png)\n\nApplication Platform\u3092\u65b0\u898f\u3067\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001Application\u3092\u9078\u629e\u3002\n\n![sns002.png](https://qiita-image-store.s3.amazonaws.com/0/63450/a1f4717b-f4b6-2dd5-cfd9-6b5b7e5d9e23.png)\n\n[Create Platform Application]\u3067Platform Application\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n![awssns003.png](https://qiita-image-store.s3.amazonaws.com/0/63450/010e48e3-740f-cd54-55e3-e64c69d96e84.png)\n\nApplication\u540d\u306f\u4efb\u610f\u306e\u540d\u79f0\u3001Push Notification Platform\u306f\u3001Apple Development\u3092\u9078\u629e\u3002Choose P12 File\u306e\u7b87\u6240\u3067\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fP12\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3001Load Credentials from File\u3092\u9078\u629e\u3059\u308b\u3002\n\n![awssns004.png](https://qiita-image-store.s3.amazonaws.com/0/63450/7d36c0cf-e620-2b82-d5e9-45772cb493d4.png)\n\nApplication Platform\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306f\u3001ARN\u3092\u30a2\u30d7\u30ea\u7b49\u3067\u4f7f\u7528\u3059\u308b\u3002\n\n![awssns005.png](https://qiita-image-store.s3.amazonaws.com/0/63450/2b178715-66c8-4e2e-b07d-126aac7c24c8.png)\n\n[Topics]\u3092\u304b\u3089\u3001Create new topic\u3092\u9078\u629e\u3057\u3001 Topic\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n![awssns006.png](https://qiita-image-store.s3.amazonaws.com/0/63450/4c3149d6-9f21-7443-fe9f-d5562fea64a3.png)\n\n![awssns007.png](https://qiita-image-store.s3.amazonaws.com/0/63450/db58b1dd-1a7e-1d5a-b549-f5172e2cebc6.png)\n\nTopic\u3067\u751f\u6210\u3055\u308c\u305fArn\u306f\u3001Topic Arn\u3068\u3057\u3066\u3001Topic\u306e\u547c\u3073\u51fa\u3057\u306b\u4f7f\u7528\u3059\u308b\u3002\n\n![awssns008.png](https://qiita-image-store.s3.amazonaws.com/0/63450/4f75931d-3465-c399-7520-4d1543c3fe3c.png)\n\n## AWS Cognito\u306e\u8a2d\u5b9a\n\n![awscognito001.png](https://qiita-image-store.s3.amazonaws.com/0/63450/ad2cb367-0b54-8285-6efb-fdd941bb2099.png)\n\n![awscognito002.png](https://qiita-image-store.s3.amazonaws.com/0/63450/3d6876bf-3eec-77bb-bcbc-e8445a5a4de6.png)\n\n![awscontigo003.png](https://qiita-image-store.s3.amazonaws.com/0/63450/0edea074-9f41-666b-60e2-eec8dbde2fb6.png)\n\n![awscontigo004.png](https://qiita-image-store.s3.amazonaws.com/0/63450/500542cf-d230-3871-a93a-f5bf5329c5c5.png)\n\n![awscognito007.png](https://qiita-image-store.s3.amazonaws.com/0/63450/d72be291-3978-2009-6e88-777302245d05.png)\n\n![awsiam001.png](https://qiita-image-store.s3.amazonaws.com/0/63450/ff40ddf5-51a0-cb4f-6486-a8663a637be8.png)\n\n![cognito_plus.png](https://qiita-image-store.s3.amazonaws.com/0/63450/3d04b4fd-45b7-67c3-37d8-72b7a6ccf977.png)\n\n\n![awsiam003.png](https://qiita-image-store.s3.amazonaws.com/0/63450/1682b7a2-9927-75c8-d55e-d52a55ca6186.png)\n\n![awsiam004.png](https://qiita-image-store.s3.amazonaws.com/0/63450/e30debcd-3114-f2f7-adcc-b21662272750.png)\n\n![awsim005.png](https://qiita-image-store.s3.amazonaws.com/0/63450/6090a785-9f33-c3c4-58ff-1537b0568f27.png)\n\n# Swift\n\n## CocoaPod\n\n```\npod 'AWSSNS'\npod 'AWSCognito'\n```\n\n> $ pod install\n\n## import\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\n\n```\nimport CoreData\nimport AWSCognito\nimport AWSSNS\n```\n\n## User\u304b\u3089Push\u306e\u8a31\u53ef\u3092\u3082\u3089\u3046\n```swift:AppDelegate.swift\n     func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        // Override point for customization after application launch.\n        \n        // \u30e6\u30fc\u30b6\u304b\u3089Push Notification\u901a\u77e5\u306e\u8a31\u53ef\u3092\u3082\u3089\u3046\n        let types: UIUserNotificationType = [UIUserNotificationType.Badge, UIUserNotificationType.Alert, UIUserNotificationType.Sound]\n        let settings: UIUserNotificationSettings = UIUserNotificationSettings( forTypes: types, categories: nil )\n        \n        application.registerUserNotificationSettings( settings )\n        application.registerForRemoteNotifications()\n        \n        return true\n    }\n```\n\n## Token\u3092\u767b\u9332\n\n```swift:AppDelegate.swift\n // Device Token \u3092\u53d6\u5f97\n    func application( application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: NSData ) {\n    \n        // <>\u3068\" \"(\u7a7a\u767d)\u3092\u53d6\u308b\n        let characterSet: NSCharacterSet = NSCharacterSet( charactersInString: \"<>\" )\n        \n        // Device Toke\u306e\u53d6\u5f97\n        let deviceTokenString: String = ( deviceToken.description as NSString )\n            .stringByTrimmingCharactersInSet( characterSet )\n            .stringByReplacingOccurrencesOfString( \" \", withString: \"\" ) as String\n     \n        // Initialize the Amazon Cognito credentials provider\n        let credentialsProvider = AWSCognitoCredentialsProvider(regionType:.APNortheast1,\n                                                                identityPoolId:\"Identity Pool ID\u3092\u8a18\u8f09\")\n        let configuration = AWSServiceConfiguration(region:.APNortheast1, credentialsProvider:credentialsProvider)\n        AWSServiceManager.defaultServiceManager().defaultServiceConfiguration = configuration\n        \n        let sns = AWSSNS.defaultSNS()\n        let request = AWSSNSCreatePlatformEndpointInput()\n        request.token = deviceTokenString\n        request.platformApplicationArn = \"Application Arn\u3092\u8a18\u8f09\"\n        request.customUserData = \"Memo\"\n\n        sns.createPlatformEndpoint(request).continueWithExecutor(AWSExecutor.mainThreadExecutor(), withBlock: { (task: AWSTask!) -> AnyObject! in\n            if task.error != nil {\n                print(\"Error: \\(task.error)\")\n            } else {\n                let result = task.result as! AWSSNSCreateEndpointResponse\n                let subscribeInput = AWSSNSSubscribeInput()\n                subscribeInput.topicArn = \"Topic Arn\u3092\u8a18\u8f09\"\n                subscribeInput.endpoint = result.endpointArn\n                subscribeInput.protocols = \"Application\"\n                sns.subscribe(subscribeInput)\n                \n                self.saveEndpointArn(result.endpointArn)\n            }\n            return nil\n        })\n}\n```\n\n## Push\u3092\u53d7\u4fe1\n\n```swift:AppDelegate.swift\n// \u30d7\u30c3\u30b7\u30e5\u3092\u53d7\u3051\u53d6\u3063\u305f\u3068\u304d\n    func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject], fetchCompletionHandler completionHandler: (UIBackgroundFetchResult) -> Void) {\n        log.debug(\"UserInfo:\\(userInfo)\")\n        let appState: UIApplicationState = application.applicationState;\n        var appStateString: String = \"\";\n        if (appState == .Active) {\n            appStateString = \"active\";\n        } else if (appState == .Inactive) {\n            appStateString = \"inactive\";\n        } else if (appState == .Background) {\n            appStateString = \"background\";\n        }\n        \n        let notifiAlert = UIAlertView()\n        if let aps = userInfo[\"aps\"] as? NSDictionary {\n            let msg: NSString = aps[\"alert\"] as! NSString\n            notifiAlert.title = \"PushTest\"\n            notifiAlert.message = msg\n            notifiAlert.addButtonWithTitle(\"OK\")\n            notifiAlert.show()\n        }\n    }\n\n```\n\n## Push\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n```xml:RemotePush\n{\n\"APNS_SANDBOX\":\"{\\\"aps\\\":{\\\"alert\\\":\\\"test\\\"}}\"\n}\n```\n\n\n```xml:SilentPush\n{\n\"APNS_SANDBOX\":\"{\\\"aps\\\":{\\\"content-available\\\":\\\"1\\\"}}\"\n}\n```\n\n## Remote Push Payload\n\nThe Remote Notification Payload\nhttps://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/TheNotificationPayload.html#//apple_ref/doc/uid/TP40008194-CH107-SW1\n", "tags": ["fabo", "Push", "SNS", "AWS", "GClue"]}