{"context": " More than 1 year has passed since last update.\u5b8c\u5168\u306b\u81ea\u5206\u7528\u30e1\u30e2\u3067\u3054\u3056\u3044\u307e\u3059\u3002\n\nmemo\n<?php\n    $this->FastCSV->filename = 'hoge';\n    $this->FastCSV->delimiter = ',';\n    $this->FastCSV->enclosure = '\"';\n    $this->FastCSV->to_encoding = 'sjis';\n    $this->FastCSV->from_encoding = 'utf8';\n\n    $thead = array(\n          '\u6708'\n        , '\u5408\u8a08'\n        , 'AAA'\n        , 'BBB'\n    );\n    $this->FastCSV->setFirstRow($thead);\n    $now_month = 0;\n    $now_row = array(\n        \"month\" => \"\",\n        \"total\" => \"\",\n        \"aaa\" => \"\",\n        \"bbb\" => \"\",\n    );\n    foreach($datas as $val){\n        if($now_month == 0){\n            $now_month = $val[0]['month'];\n            $now_row['month'] = $now_month;\n        }elseif($now_month != $val[0]['month']){\n            $this->FastCSV->setRow($now_row);\n            $now_row = array();\n            $now_month = $now_row['month'] = $val[0]['month'];\n        }\n        switch($val['Model']['category']){\n            case 'total':\n                $now_row['total'] = $val[0]['price'];\n            case 'aaa':\n                $now_row['aaa'] = $val[0]['price'];\n            case 'bbb':\n                $now_row['bbb'] = $val[0]['price'];\n        }\n    }\n    $this->FastCSV->setRow($now_row);\n    $this->FastCSV->export();\n\n\n\u5b8c\u5168\u306b\u81ea\u5206\u7528\u30e1\u30e2\u3067\u3054\u3056\u3044\u307e\u3059\u3002\n\n\n```php:memo\n<?php\n\t$this->FastCSV->filename = 'hoge';\n\t$this->FastCSV->delimiter = ',';\n\t$this->FastCSV->enclosure = '\"';\n\t$this->FastCSV->to_encoding = 'sjis';\n\t$this->FastCSV->from_encoding = 'utf8';\n\n\t$thead = array(\n\t\t  '\u6708'\n\t\t, '\u5408\u8a08'\n\t\t, 'AAA'\n\t\t, 'BBB'\n\t);\n\t$this->FastCSV->setFirstRow($thead);\n\t$now_month = 0;\n\t$now_row = array(\n\t\t\"month\" => \"\",\n\t\t\"total\" => \"\",\n\t\t\"aaa\" => \"\",\n\t\t\"bbb\" => \"\",\n\t);\n\tforeach($datas as $val){\n\t\tif($now_month == 0){\n\t\t\t$now_month = $val[0]['month'];\n\t\t\t$now_row['month'] = $now_month;\n\t\t}elseif($now_month != $val[0]['month']){\n\t\t\t$this->FastCSV->setRow($now_row);\n\t\t\t$now_row = array();\n\t\t\t$now_month = $now_row['month'] = $val[0]['month'];\n\t\t}\n\t\tswitch($val['Model']['category']){\n\t\t\tcase 'total':\n\t\t\t\t$now_row['total'] = $val[0]['price'];\n\t\t\tcase 'aaa':\n\t\t\t\t$now_row['aaa'] = $val[0]['price'];\n\t\t\tcase 'bbb':\n\t\t\t\t$now_row['bbb'] = $val[0]['price'];\n\t\t}\n\t}\n\t$this->FastCSV->setRow($now_row);\n\t$this->FastCSV->export();\n```\n", "tags": ["CakePHP", "CSV"]}