{"context": " More than 1 year has passed since last update.\u6b21\u306e\u548c\u8a33\u3067\u3059\u3002\u81ea\u5206\u304cPuppet4\u306b\u305d\u308d\u305d\u308d\u79fb\u884c\u3057\u305f\u3044\u306a\u3068\u601d\u3063\u305f\u306e\u3067\u52dd\u624b\u306b\u548c\u8a33\u3057\u307e\u3057\u305f\u3002\nhttp://docs.puppetlabs.com/puppet/4.2/reference/experiments_future.html\n2015/10\u95b2\u89a7\n\n\u3044\u304f\u3064\u304b\u306e\u7834\u58ca\u7684\u306a\u5909\u66f4\u304cPuppet4.0\u3067\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u4ee5\u524dPuppet3.x\u3092\u4f7f\u3063\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u65b0\u3057\u3044\u5b9f\u88c5\u306b\u5408\u308f\u305b\u3066\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u30da\u30fc\u30b8\u3067\u306f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30924.0\u4e92\u63db\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u305f\u3081\u306b\u91cd\u8981\u306a\u624b\u9806\u3092\u4e26\u3079\u3066\u3044\u307e\u3059\u3002\n\nSeveral breaking changes were introduced in Puppet 4.0. If you previously used Puppet 3.x, your manifests will need to be updated for the new implementation. This page lists the most important steps to update your manifests to be 4.x compatible.\n\n\n\u3059\u3079\u3066\u304c\u6b63\u3057\u3044\u5834\u6240\u306b\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\nMake Sure Everything Is in the Right Place\n\n\u30b3\u30fc\u30c9\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u91cd\u8981\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\u305d\u308c\u3089\u304c\u3069\u3053\u306b\u884c\u3063\u305f\u304b\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u3001\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u3057\u3044\u5834\u6240\u306b\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306b\u6311\u6226\u3059\u308b\u306e\u306f\u305d\u306e\u5f8c\u3067\u3059\u3002\n\nThe locations of code directories and important config files have changed. Read about where everything went to make sure your files are in the correct place before tackling updates to your manifests.\n\n\ncron\u30ea\u30bd\u30fc\u30b9\u3092\u9664\u53bb\u3059\u308b\u524d\u306b\u3001\u305d\u306e\u5b89\u5168\u6027\u3092\u30c0\u30d6\u30eb\u30c1\u30a7\u30c3\u30af\u3059\u308b\n\nDouble-Check to Make Sure It\u2019s Safe Before Purging cron Resources\n\n\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001{'cron': purge => true}\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u3092\u4f7f\u3046\u3053\u3068\u306f\u73fe\u5728Puppet\u3092\u8d70\u3089\u305b\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\uff08\u305f\u3044\u3066\u3044root\u3067\u3059\u304c\uff09\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u30b8\u30e7\u30d6\u3092\u89e3\u9664\u3059\u308b\u3060\u3051\u306ecron\u30ea\u30bd\u30fc\u30b9\u3067\u3057\u305f\u3002\u3057\u304b\u3057Puppet4\u3067\u306f\u3088\u308a\u653b\u6483\u7684\u306b\u306a\u308a\u3001\u3059\u3079\u3066\u306e\u7ba1\u7406\u3055\u308c\u3066\u3044\u306a\u3044cron\u30b8\u30e7\u30d6\u3092\u89e3\u9664\u3057\u307e\u3059\u3002\u305d\u306e\u52d5\u4f5c\u304c\u672c\u5f53\u306b\u6c42\u3081\u3066\u3044\u308b\u3082\u306e\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u89e3\u9664\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u6c17\u3092\u3064\u3051\u308b\u305f\u3081\u306bnoop => true\u3092\u30bb\u30c3\u30c8\u3057\u305f\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nPreviously, using resources {'cron': purge => true} to purge cron resources would only purge jobs belonging to the current user performing the Puppet run (usually root). In Puppet 4, this action is more aggressive and causes all unmanaged cron jobs to be purged.\nMake sure this is what you want. You might want to set noop => true on the purge resource to keep an eye on it.\n\n\n\u578b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\n\nCheck Your Data Types\n\n\u578b\u306b\u306f\u3044\u304f\u3064\u304b\u5909\u66f4\u304c\u3042\u308a\u307e\u3059\u3002\n\nData types have changed in a few ways.\n\n\n\u30d6\u30fc\u30ea\u30a2\u30f3\u306f\u5e38\u306b\u672c\u5f53\u306e\u30d6\u30fc\u30ea\u30a2\u30f3\n\nBoolean Facts are Always Real Booleans\n\nPuppet3\u3067\u306f\u3001\u30d6\u30fc\u30ea\u30a2\u30f3\uff08true/false\u5024\uff09\u306f\u3001stringify_facts\u8a2d\u5b9a\u3092\u7121\u52b9\u306b\u3057\u306a\u3044\u9650\u308a\u6587\u5b57\u5217\u3078\u5909\u63db\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\u3053\u308c\u306fif $is_virtual == 'true' {...}\u306e\u3088\u3046\u306a\u6bd4\u8f03\u304c\u4e00\u822c\u7684\u3067\u3042\u3063\u305f\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002\nPuppet4\u3067\u306f\u3001\u30d6\u30fc\u30ea\u30a2\u30f3\u306f\u6c7a\u3057\u3066\u6587\u5b57\u5217\u306b\u306f\u5909\u63db\u3055\u308c\u307e\u305b\u3093\u3057\u3001\u307e\u305f\u5148\u307b\u3069\u306e==\u6f14\u7b97\u5b50\u306b\u3088\u308b\u6bd4\u8f03\u306f\u5e38\u306bfalse\u306b\u306a\u308a\u307e\u3059\u3002\u3088\u3063\u3066\u6df1\u523b\u306a\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3059\u3053\u3068\u304c\u3042\u308a\u3048\u307e\u3059\u3002\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u5168\u3066\u306e\u30d6\u30fc\u30ea\u30a2\u30f3\u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u3063\u3066\u3044\u308b\u6bd4\u8f03\u306b\u3064\u3044\u3066\u78ba\u8a8d\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u3082\u3057\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092Puppet3/Puppet4\u306e\u4e21\u65b9\u3067\u52d5\u304f\u3088\u3046\u306b\u3057\u305f\u3051\u308c\u3070\u3001\u30d6\u30fc\u30ea\u30a2\u30f3\u304b\u3089\u6587\u5b57\u5217\u3078\u5909\u63db\u3057\u3001\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u95a2\u6570\u3067\u3042\u308bstr2bool\u3092\u547c\u3073\u51fa\u3057\u3066\u5909\u63db\u3059\u308b\u3053\u3068\u3067\u5909\u63db\u3067\u304d\u307e\u3059\u3002\n\nIn Puppet 3, facts with boolean true/false values (like $is_virtual) were converted to strings unless the stringify_facts setting was disabled. This meant it was common to test for these facts with the == operator, like if $is_virtual == 'true' { ... }.\nIn Puppet 4, boolean facts are never turned into strings, and those == comparisons will always evaluate to false. This can cause serious problems. Check your manifests for any comparisons that treat boolean facts like strings; if you need a manifest to work with both Puppet 3 and Puppet 4, you can convert a boolean to a string and then pass it to the stdlib module\u2019s str2bool function:\nif str2bool(\"$is_virtual\") { ... }\n\n\n\nDSL\u306b\u304a\u3044\u3066\u6570\u5024\u3068\u6587\u5b57\u5217\u306f\u5225\u7269\n\nNumbers and Strings Are Different in the DSL\n\n\u3088\u308a\u8a73\u3057\u3044\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3067\u3002\n\u4ee5\u524dPuppet\u306f\u5168\u3066\u3092\u6587\u5b57\u5217\u3078\u5909\u63db\u3057\u3088\u3046\u3068\u3057\u3001\u6570\u7684\u6587\u8108\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u6642\u306b\u306f\u6587\u5b57\u5217\u3092\u6570\u5024\u3078\u5909\u63db\u3057\u623b\u3057\u3066\u3044\u307e\u3057\u305f\u3002Puppet4\u306b\u304a\u3044\u3066\u306f\u3001DSL\u4e2d\u306e\u6570\u5024\u306f\u30d1\u30fc\u30b9\u3055\u308c\u5185\u90e8\u7684\u306b\u6570\u5024\u3068\u3057\u3066\u4fdd\u6301\u3055\u308c\u307e\u3059\u3002\u6b21\u306e\u4f8b\u306e\uff12\u3064\u306e\u5909\u6570\u306f\u3001Puppet3\u306b\u304a\u3044\u3066\u306f\u540c\u3058\u3067\u3057\u305f\u304c\u3001Puppet4\u306b\u304a\u3044\u3066\u306f\u7570\u306a\u308b\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n$port_a = 80   # \u6570\u3068\u3057\u3066\u30d1\u30fc\u30b9\u30fb\u4fdd\u6301\u3055\u308c\u3001\u3082\u3057\u6570\u5024\u3067\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\n$port_b = '80' # \u6587\u5b57\u3068\u3057\u3066\u30d1\u30fc\u30b9\u30fb\u4fdd\u6301\u3055\u308c\u308b\n\n\u73fe\u5728\u3053\u306e\u9055\u3044\u306f\u3001\u53b3\u5bc6\u306b\u6570\u5024\u304c\u5f37\u5236\u3055\u308c\u3001\u3082\u3057\u5024\u304c\u6709\u52b9\u306a\u6570\u5b57\u304b\u3089\u59cb\u307e\u3089\u306a\u3051\u308c\u3070\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\nnode 1name {} # 1name\u306f\u6709\u52b9\u306a10\u9032\u6570\u3067\u306f\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\u3053\u306e\u540d\u524d\u306fquote\u3059\u308b\u5fc5\u8981\u304c\u6709\u308a\u307e\u3059\nnotice(0xggg) # 0xggg\u306f\u6709\u52b9\u306a16\u9032\u6570\u3067\u306f\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n$a = 1 + 0789 # 0789\u306f\u6709\u52b9\u306a8\u9032\u6570\u3067\u306f\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n\n\nFor full details, see the language page about numeric values.\nPreviously, Puppet would convert everything to strings, then attempt to convert those strings back into numbers when they were used in a numeric context. In Puppet 4, numbers in the DSL are parsed and maintained internally as numbers. The following examples would have been equivalent in Puppet 3, but are now different:\n$port_a = 80   # Parsed and maintained as a number, errors if NOT a number\n$port_b = '80' # Parsed and maintained as a string\n\nThe difference now is that Puppet will STRICTLY enforce numerics and will throw errors if values that begin with a number are not valid numbers.\nnode 1name {} # invalid because 1name is not a valid decimal number; you would need to quote this name\nnotice(0xggg) # invalid because 0xggg is not a valid hexadecimal number\n$a = 1 + 0789 # invalid because 0789 is not a valid octal number\n\n\n\n\u8a08\u7b97\u5f0f\n\nArithmetic Expressions\n\n\u6570\u5f0f\u306f\u6587\u5b57\u5217\u304b\u3089\u6570\u5024\u3078\u5909\u63db\u3055\u308c\u307e\u3059\u3002\u3082\u3057\u5024\u304c0\u3082\u3057\u304f\u306f0x\u304b\u3089\u59cb\u307e\u308b\u3068\u304d\u3001\u305d\u308c\u3089\u306f\uff18\u9032\u6570\u3082\u3057\u304f\u306f\uff11\uff16\u9032\u6570\u3068\u3057\u3066\u305d\u308c\u305e\u308c\u6271\u308f\u308c\u307e\u3059\u3002\u3082\u3057\u8a08\u7b97\u5f0f\u306e\u4e21\u65b9\u304c\u6570\u5024\u30fb\u6570\u5024\u3078\u5909\u63db\u3067\u304d\u308b\u6587\u5b57\u5217\u3067\u306a\u3044\u5834\u5408\u306f\u3001\u30a8\u30e9\u30fc\u304c\u8d77\u3053\u308a\u307e\u3059\u3002\n$valid = 40 + 50       # \u4e21\u65b9\u3068\u3082\u6570\u5024\u306a\u306e\u3067\u6709\u52b9\u3067\u3059\u3002\n$valid = 25 + '30'     # '30'\u3068\u3044\u3046\u6587\u5b57\u5217\u306f\u6570\u5024\u3078\u5909\u63db\u3067\u304d\u308b\u306e\u3067\u6709\u52b9\u3067\u3059\u3002\n$invalid = 40 + 0789   # 0789\u3068\u3044\u3046\u5024\u306f\u6709\u52b9\u306a8\u9032\u6570\u3067\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n$invalid = 40 + '0789' # '0789'\u3068\u3044\u3046\u6587\u5b57\u5217\u306f\u6570\u5024\u3078\u5909\u63db\u3067\u304d\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n\n\nMathematical expressions still convert strings to numeric values. If a value begins with 0 or 0x, it will be interpreted as an octal or hex number, respectively. An error is raised if either side in an arithmetic expression is not a number or a string that can be converted to a number. For example:\n$valid = 40 + 50       # valid because both values are numeric\n$valid = 25 + '30'     # valid because '30' can be cast numerically\n$invalid = 40 + 0789   # invalid because 0789 isn't a valid octal number\n$invalid = 40 + '0789' # invalid because '0789' can't be cast numerically\n\n\n\n\u6bd4\u8f03\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck Your Comparisons\n\n\u3044\u304f\u3064\u304b\u306e\u6bd4\u8f03\u6f14\u7b97\u5b50\u304cPuppet4\u306b\u304a\u3044\u3066\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u8a73\u3057\u304f\u306f\u5f0f\u3068\u6f14\u7b97\u5b50\u3067\u3002\n\nSome comparison operations have changed in Puppet 4. Read about expressions and operators for the full details.\n\n\n\u6587\u5b57\u5217\u4ee5\u5916\u3078\u306e\u6b63\u898f\u8868\u73fe\n\nRegular Expressions Against Non-Strings\n\n\u6587\u5b57\u5217\u4ee5\u5916\u3078\u306e\u6b63\u898f\u8868\u73fe\u30de\u30c3\u30c1\u51e6\u7406\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002Puppet3\u7cfb\u3060\u3068\u6587\u5b57\u5217\u4ee5\u5916\u306e\u578b\u3082\u30de\u30c3\u30c1\u51e6\u7406\u3092\u884c\u3046\u524d\u306b\u6587\u5b57\u5217\u3078\u5909\u63db\u3057\u3066\u3044\u307e\u3057\u305f\u3002\uff08\u4e88\u6e2c\u4e0d\u80fd\u3067\u672a\u5b9a\u7fa9\u306e\u7d50\u679c\u3082\u983b\u7e41\u306b\uff09\n$securitylevel = 2\n\ncase $securitylevel {\n  /[1-3]/: { notify { 'security low': } }\n  /[4-7]/: { notify { 'security medium': } }\n  default: { notify { 'security high': } }\n}\n\nPuppet4\u4ee5\u524d\u3067\u306f\u3001\u6700\u521d\u306e\u6b63\u898f\u8868\u73fe\u306f\u30de\u30c3\u30c1\u3059\u308b\u306e\u3067\u30ab\u30bf\u30ed\u30b0\u306b{ 'security low': }\u304c\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\nPuppet4\u3067\u306f\u3001$securityLevel\u306e\u5024\u304c\u6587\u5b57\u5217\u3067\u306f\u306a\u304f\u6574\u6570\u3067\u3042\u308b\u305f\u3081\u5168\u3066\u306e\u6b63\u898f\u8868\u73fe\u304c\u30de\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\u305d\u306e\u7d50\u679c\u30c7\u30d5\u30a9\u30eb\u30c8\u6761\u4ef6\u304c\u30de\u30c3\u30c1\u3057\u3001{ 'security high': }\u304c\u901a\u77e5\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nMatching a value that is not a string with a regular expression now raises an error. In 3.x, other data types were converted to string form before matching (often with surprising and undefined results).\n$securitylevel = 2\n\ncase $securitylevel {\n  /[1-3]/: { notify { 'security low': } }\n  /[4-7]/: { notify { 'security medium': } }\n  default: { notify { 'security high': } }\n}\n\nPrior to Puppet 4.0, the first regex would match, and the notify { \u2018security low\u2019: } resource would be put into the catalog.\nNow, in Puppet 4.0, neither of the regexes would match because the value of $securitylevel is an integer, not a string, and so the default condition would match, resulting in the inclusion of notify { 'security high': } in the catalog.\n\n\n\u30d6\u30fc\u30ea\u30a2\u30f3\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306b\u304a\u3044\u3066\u3001\u7a7a\u6587\u5b57\u5217\u306ftrue\u3067\u3042\u308b\n\nEmpty Strings in Boolean Context are true\n\n\n\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306ePuppet\u3067\u306f\u3001\u7a7a\u6587\u5b57\u5217\u306ffalse\u3068\u3057\u3066\u8a55\u4fa1\u3055\u308c\u307e\u3057\u305f\u3002\u5909\u6570\u306e\u5024\u3092\u6e21\u3057\u305f\u3082\u3057\u304f\u306f\u7a7a\u306e\u307e\u307e\u306e\u5834\u5408\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u6761\u4ef6\u6bd4\u8f03\u306b\u304a\u3044\u3066\u3001\u5909\u6570\u3084\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u3057\u3066\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u3092\u76ee\u306b\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nclass empty_string_defaults (\n  $parameter_to_check = ''\n) {\n  if $parameter_to_check {\n    $parameter_to_check_real = $parameter_to_check\n  } else {\n    $parameter_to_check_real = 'default value'\n  }\n}\n\n\u53e4\u3044Puppet\u3067\u306f\u7a7a\u6587\u5b57\u5217\u3067\u306ffalse\u3068\u3057\u3066\u8a55\u4fa1\u3055\u308c\u305f\u306e\u3067\u3001\u30b7\u30f3\u30d7\u30eb\u306aif\u6587\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002Puppet4\u306b\u304a\u3044\u3066\u3053\u306e\u632f\u308b\u821e\u3044\u306f$parameter_to_check_real\u306b\u3088\u3063\u3066\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u306b\u3064\u3044\u3066\u3053\u306e\u632f\u308b\u821e\u3044\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002puppet-lint plugin\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u30d6\u30fc\u30ea\u30a2\u30f3\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nIn previous versions of Puppet, an empty string was evaluated as a false boolean value. You would see this in variable and parameter default values where conditional checks would be used to determine if someone passed in a value or left it blank.\nclass empty_string_defaults (\n  $parameter_to_check = ''\n) {\n  if $parameter_to_check {\n    $parameter_to_check_real = $parameter_to_check\n  } else {\n    $parameter_to_check_real = 'default value'\n  }\n}\n\nPuppet\u2019s old behavior of evaluating the empty string as false would allow you to set the default based on a simple if-statement. In Puppet 4.x, this behavior is flipped and $parameter_to_check_real will be set to an empty string.\nYou can check your existing codebase for this behavior with a puppet-lint plugin.\nSee the language page on boolean values for more info.\n\n\nin\u6f14\u7b97\u5b50\u306f\u5c11\u3057\u3060\u3051\u7570\u306a\u308b\n\nThe in Operator Is Slightly Different\n\nin\u6f14\u7b97\u5b50\u306f\u304b\u3064\u3066\u306f\u6587\u5b57\u5217\u6bd4\u8f03\u306b\u304a\u3044\u3066\u5927\u6587\u5b57\u30fb\u5c0f\u6587\u5b57\u3092\u5225\u306e\u3082\u306e\u3068\u3057\u3066\u307f\u306a\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u3053\u308c\u306f==\u6f14\u7b97\u5b50\u3068\u7570\u306a\u308a\u307e\u3059\u3002Puppet4\u306b\u304a\u3044\u3066\u306f==\u6f14\u7b97\u5b50\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u5927\u6587\u5b57\u30fb\u5c0f\u6587\u5b57\u306e\u533a\u5225\u3092\u884c\u3044\u307e\u305b\u3093\u3002\u307e\u305f\u4ee5\u524d\u306f\u4e0d\u53ef\u80fd\u3060\u3063\u305f\u6b63\u898f\u8868\u73fe\u3068\u578b\u306e\u6bd4\u8f03\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u5168\u4f53\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u304a\u3051\u308b\u5b9a\u7fa9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nThe in operator used to be case-sensitive when testing strings, which was inconsistent with the == operator. Now it\u2019s case-insensitive, like ==. It can also test regular expressions and data types, which wasn\u2019t possible before.\nThe full behavior is defined in the documentation.\n\n\n\u578b\u306e\u6bd4\u8f03\n\nComparing Data Types\n\n\u7570\u306a\u308b\u578b\u306f\u540c\u3058\u578b\u3067\u306a\u3044\u9650\u308a\u6bd4\u8f03\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u6570\u5024\u3068\u6587\u5b57\u5217\u306e\u6bd4\u8f03\u6642\u306b\u3001\u308f\u304b\u308a\u3084\u3059\u3044\u5909\u5316\u3068\u3057\u3066\u6c17\u3065\u304f\u3067\u3057\u3087\u3046\u3002\n\nDifferent data types can\u2019t be compared as if they\u2019re the same data type anymore. This is most noticeable when comparing numbers to strings.\n\n\n\u4e8c\u91cd\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u304c\u3042\u308b\u3001\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u8868\u8a18\u306e\u6587\u5b57\u5217\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck Single-Quoted Strings for Double Backslashes\n\n\\\\\u30a8\u30b9\u30b1\u30fc\u30d7\u306f\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u8868\u8a18\u306b\u304a\u3044\u3066\u9069\u5207\u306b\u52d5\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4ee5\u524d\u306f\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u542b\u3080\u6587\u5b57\u5217\u306f\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u8868\u8a18\u3067\u6271\u3046\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u30ea\u30c6\u30e9\u30eb\u3068\u3057\u3066\u4e8c\u91cd\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u542b\u3080\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u5168\u3066\u5909\u66f4\u3055\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u30ea\u30c6\u30e9\u30eb\u3068\u3057\u3066\u306e\u4e8c\u91cd\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u306f\u56db\u91cd\u306e\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\\\\\\\\\u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u632f\u308b\u821e\u3044\u306b\u3064\u3044\u3066\u306f\u6587\u5b57\u5217\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nThe \\\\ escape now works properly in single-quoted strings. Previously, there was no way to end a single-quoted string with a backslash.\nThis will change any existing strings that are supposed to have literal double backslashes in them; you\u2019ll need to change them to quadruple backslashes. Read more about this behavior in the language page about strings.\n\n\n\u5909\u6570\u30fb\u30af\u30e9\u30b9\u30fb\u95a2\u6570\u30fbDefined Type\u30fb\u305d\u306e\u4ed6\u306e\u547d\u540d\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n\nCheck Names of Variables, Classes, Functions, Defined Types, etc.\n\n\u547d\u540d\u898f\u5247\u304c\u3088\u308a\u53b3\u683c\u306b\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u30af\u30aa\u30fc\u30c8\u7121\u3057\u306e\u5927\u6587\u5b57\u306e\u5358\u8a9e\u306f\u7981\u6b62\u3055\u308c\u307e\u3057\u305f\n\u5909\u6570\u306f\u5927\u6587\u5b57\u3067\u59cb\u307e\u3063\u3066\u306f\u3044\u3051\u307e\u305b\u3093\n\u30af\u30e9\u30b9\u30fbdefined type\u30fb\u95a2\u6570\u306f\u3001\u30cf\u30a4\u30d5\u30f3\u3092\u542b\u3093\u3067\u3082\u6570\u5b57\u3067\u59cb\u307e\u3063\u3066\u3082\u3044\u3051\u307e\u305b\u3093\n\n\nNaming conventions have changed and become more strict.\n\nCapitalized bare words as un-quoted strings are no longer allowed.\nVariables must not start with capital letters.\nClasses, defined types, functions must not include hyphens or begin with digits.\n\n\n\n\u7121\u610f\u5473\u306a\u5f0f\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck for Non-Productive Expressions\n\nPuppet4\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3088\u3046\u306a\u5f0f\u306b\u3064\u3044\u3066\u4f55\u3082\u52b9\u679c\u3082\u30d5\u30e9\u30b0\u3082\u6301\u3061\u307e\u305b\u3093\u3002\n\u7121\u610f\u5473\u306a\u5f0f\u306e\u4f8b\u3092\u793a\u3059\u3068\u3001\nif true { } # \u7121\u610f\u5473\u3067\u3059\n$a = 10\n\n\u3082\u3057\u5f0f\u304c\u672a\u5b9a\u7fa9\u5024\u3092\u751f\u307f\u51fa\u3059\u5834\u5408\u3001\u305d\u308c\u3089\u306f\u6368\u3066\u53bb\u3089\u308c\u307e\u3059\u3002\u6ce8\u610f\u3059\u3079\u304d\u3053\u3068\u306f\u3001\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30fb\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u306e\u672b\u5c3e\u3001\u3082\u3057\u304f\u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u5024\u306b\u3064\u3044\u3066\u306f\u7121\u610f\u5473\u306a\u5f0f\u3068\u3057\u3066\u6271\u3046\u3053\u3068\u306f\u6c7a\u3057\u3066\u3042\u308a\u307e\u3048\u3093\u3002\n\u3082\u3057Puppet\u304c\u7121\u610f\u5473\u306a\u30b3\u30fc\u30c9\u306b\u5bfe\u3059\u308b\u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u305f\u3089\u3001\u30b3\u30fc\u30c9\u306e\u632f\u308b\u821e\u3044\u306b\u5bfe\u3057\u3066\u4f55\u3082\u5f71\u97ff\u3092\u4e0e\u3048\u306a\u3044\u554f\u984c\u306e\u30b3\u30fc\u30c9\u3092\u9664\u53bb\u3059\u3079\u304d\u3067\u3059\u3002\n\nPuppet 4.0.0 validates logic that has no effect and flags such expressions as being errors.\nAn example of a non productive expression is:\nif true { } # non productive\n$a = 10\n\nThe if expression produces a value of undef, which is then thrown away. Note that expressions are never considered non-productive when they are the last in a manifest or block of code, as that is also the value of the sequence.\nIf Puppet raises a non-productive expression error about your code, you should be able to remove the offending statements without changing the code\u2019s behavior.\n\n\n\u4e88\u7d04\u6e08\u307f\u306e\u5358\u8a9e\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck for Bare Words That May Now Be Reserved\n\nPuppet4\u306b\u304a\u3044\u3066\u306f\u4e88\u7d04\u8a9e\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u30c1\u30a7\u30c3\u30af\u3057\u30af\u30aa\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u6587\u5b57\u5217\u304c\u4e88\u7d04\u8a9e\u30ea\u30b9\u30c8\u3092\u542b\u3093\u3067\u3044\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u5fc5\u8981\u3067\u3042\u308c\u3070\u30af\u30aa\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nMore reserved words were added in Puppet 4.0, so check your manifests for any un-quoted strings on the reserved words list and quote them as needed.\n\n\n\u30cf\u30c3\u30b7\u30e5\u3084\u914d\u5217\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u304d\u306e\u4f59\u5206\u306a\u7a7a\u767d\u6587\u5b57\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck for Excess Spaces When Accessing Hashes and Arrays\n\n\u5024\u4e2d\u3084\u89d2\u62ec\u5f27\u306e\u5de6\u306e\u7a7a\u767d\u6587\u5b57\u306f\u91cd\u8981\u3067\u3059\u3002Puppet\u306f\u7a7a\u767d\u6587\u5b57\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3067\u7570\u306a\u308b\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\u60aa\u3044\u4f8b\n$a [3]  # \u6700\u521d\u306f\u5909\u6570a\u306e\u5024\u306b\u306a\u308a\u3001\u6b21\u306f\u4e00\u3064\u306e\u5024\u3092\u542b\u3080\u914d\u5217\u306e\u30ea\u30c6\u30e9\u30eb\u8868\u8a18\n\n\u826f\u3044\u4f8b\n$a[3]   # \u914d\u5217a\u306e3\u756a\u76ee\u306e\u5024\u3092\u53c2\u7167\u3057\u307e\u3059\n\n\nThe space between a value and a left bracket is significant, and Puppet will output different results if there is a space.\nBad:\n$a [3]  # first the value of a, then a literal array with the single value 3 in it\n\nGood:\n$a[3]   # index 3 in the array referenced by $a\n\n\n\n\u62ec\u5f27\u7121\u3057\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck for Function Calls Without Parentheses\n\n\u3042\u308b\u9650\u3089\u308c\u305f\u95a2\u6570\u3060\u3051\u304c\u62ec\u5f27\u7121\u3057\u306b\u547c\u3073\u51fa\u3057\u53ef\u80fd\u3067\u3059\u3002\u95a2\u6570\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nOnly certain functions are allowed to be called without parentheses. Read the documentation on functions to learn when parentheses can be omitted.\n\n\n\u6b63\u898f\u8868\u73fe\u306e\u6b63\u3057\u3044\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck Your Regular Expressions for Correct Syntax\n\nPuppet4\u306fRuby2\u306e\u30b3\u30d4\u30fc\u3092\u72ec\u81ea\u306b\u30d0\u30f3\u30c9\u30eb\u3057\u3066\u304a\u308a\u3001\u6b63\u898f\u8868\u73fe\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306f\u4ee5\u524d\u306ePuppet\u3067\u5b9f\u884c\u3057\u3066\u3044\u305fRuby1.8.7\u3068\u306f\u5c11\u3057\u3060\u3051\u7570\u306a\u308b\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u30022\u3064\u306eRuby\u306f\u305d\u308c\u305e\u308c\u7570\u306a\u308b\u6b63\u898f\u8868\u73fe\u30a8\u30f3\u30b8\u30f3\u3092\u4f7f\u3063\u3066\u3044\u308b\u305f\u3081\u7570\u306a\u308b\u7d50\u679c\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nPuppet 4 bundles its own copy of Ruby 2.x, and the regex syntax is slightly different than Ruby 1.8.7, which you may have been running prior to upgrade. Because the two versions of Ruby use differing regex engines, your results may vary.\n\n\nHiera\u3067\u4f7f\u3046YAML\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u3057\u3044\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n\nCheck YAML Files Used by Hiera, etc. for Correct Syntax\n\n\u3082\u3057Ruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3055\u308c\u305f\u3089\u3001YAML\u306e\u30d1\u30fc\u30b5\u30fc\u304c\u3088\u308a\u53b3\u683c\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u6587\u5b57\u5217\u304c\u542b\u3093\u3067\u3044\u308b%\u304c\u30af\u30aa\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nIf the Ruby version changed since upgrade, the YAML parser will be more strict. Ensure strings containing a % are quoted.\n\n\n\u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u30e2\u30fc\u30c9\u5c5e\u6027\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck the mode Attribute of Any File Resources\n\n\u30d5\u30a1\u30a4\u30eb\u30ea\u30bd\u30fc\u30b9\u306e\u30e2\u30fc\u30c9\u5c5e\u6027\u304c\u6587\u5b57\u5217\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3082\u30578\u9032\u6570\u3092\u4f7f\u3063\u3066\u3044\u305f\u3089\u3001\u305d\u308c\u3089\u306f10\u9032\u6570\u3078\u5909\u63db\u3055\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u305d\u3057\u3066chown\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3055\u3044\u306b\u8aa4\u3063\u305f\u6570\u5024\u3068\u3057\u3066\u6587\u5b57\u5217\u3067\u8868\u73fe\u3055\u308c\u307e\u3059\u3002\n\nThe mode attribute of a file resource must be a string. If you use an actual octal number, it will be converted to a decimal number, then converted back to a string representing the wrong number when it comes time to run the chown command.\n\n\n\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u3051\u53d6\u308bnoop => true\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck for Resources with noop => true that Receive Refresh Events\n\nPuppet3\u306b\u304a\u3044\u3066\u306f\u3001noop\u3092true\u306b\u3059\u308b\u3053\u3068\u3067no-op\u30e2\u30fc\u30c9\u3092\u9000\u907f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30a4\u30d9\u30f3\u30c8\uff08notify\u3082\u3057\u304f\u306fsubscribe\u30e1\u30bf\u30d1\u30e9\u30e1\u30fc\u30bf\u3001~>\u77e2\u5370\uff09\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u4f55\u304b\u3057\u3089\u306e\u5909\u5316\u3092\u767a\u751f\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nPuppet4\u3067\u306f\u3053\u308c\u3089\u306f\u4e0d\u53ef\u80fd\u306b\u306a\u308a\u3001no-op\u30ea\u30bd\u30fc\u30b9\u306f\u5e38\u306bno-op\u3067\u3042\u308a\u7d9a\u3051\u307e\u3059\u3002\u591a\u304f\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u306f\u4f55\u3082\u4e0d\u90fd\u5408\u306a\u70b9\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304c\u3001\u307b\u3093\u306e\u308f\u305a\u304b\u306a\u53ef\u80fd\u6027\u3068\u3057\u3066\u8a2d\u5b9a\u304c\u3053\u306e\u632f\u308b\u821e\u3044\u306b\u4f9d\u5b58\u3057\u3066\u3044\u306a\u3044\u304b\u3001\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nIn Puppet 3, resources with noop set to true could escape no-op mode and cause changes if they received a refresh event (via the notify or subscribe metaparameters or the ~> arrow).\nThis is no longer possible in Puppet 4; no-op resources always stay no-op. For most users that\u2019s a win with no downside, but there\u2019s a slim chance that your configurations relied on this behavior, so look around to make sure.\n\n\n\u524a\u9664\u3055\u308c\u305f\u6a5f\u80fd\u3092\u78ba\u8a8d\u3059\u308b\n\nCheck for Removed Features\n\nPuppet4\u306b\u304a\u3044\u3066\u3044\u304f\u3064\u304b\u524a\u9664\u3055\u308c\u305f\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u3089\u306f\u3001\u3082\u3057\u304f\u306f\u3088\u308a\u826f\u3044\u56de\u907f\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\nSeveral things were removed from Puppet 4, either because they no longer had practical use cases and were not being used, or there was a better work around.\n\n\nimport\u6587\u3068\u30ce\u30fc\u30c9\u7d99\u627f\n\n\nimport Statements and Node Inheritance\n\nimport\u304c\u524a\u9664\u3055\u308c\u305f\u306e\u3067\u3001\u30e1\u30a4\u30f3\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u518d\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306f\u30e1\u30a4\u30f3\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\u30ce\u30fc\u30c9\u7d99\u627f\u3082\u540c\u69d8\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\u3082\u306f\u3084\u30ce\u30fc\u30c9\u306e\u5b9a\u7fa9\u3092\u5225\u306e\u30ce\u30fc\u30c9\u306e\u5b9a\u7fa9\u304b\u3089\u7d99\u627f\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002Hiera\u3068\u30e9\u30c3\u30d1\u30fc\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u3067\u3001\u3088\u308a\u826f\u3044\u7d50\u679c\u3092\u5f97\u3089\u308c\u307e\u3059\u3002\n\nRemoval of import means you\u2019ll have to use a directory as your main manifest to recreate this functionality. Read the Main Manifest page to learn more about this method.\nNode inheritance has also been removed. It is no longer possible to have node definitions that inherit from another node definition. You can get better results by using a combination of Hiera data and wrapper modules to construct system configurations.\n\n\u53c2\u8003\nQiita: Puppet 4.x \u304b\u3089\u6d88\u3048\u305f import \u306e\u4ee3\u308f\u308a\u306b Main Manifest \u3092 Directory \u306b\u5909\u66f4\u3059\u308b\n\nERB\u306b\u304a\u3051\u308b\u52d5\u7684\u30b9\u30b3\u30fc\u30d7\n\nDynamic Scoping in ERB\n\nPuppet4.0\u306b\u304a\u3044\u3066\u3001ERB\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u304a\u3051\u308b\u5909\u6570\u306e\u52d5\u7684\u30b9\u30b3\u30fc\u30d7\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nclass outer {\n  $var = 'dynamic'\n  include inner\n}\n>\nclass inner {\n  notice(inline_template('<%= @var %>'))\n}\n>\ninclude outer\n\n\u4ee5\u524d\u306ePuppet\u3067\u306f\u3001notice()\u3078\u6e21\u3055\u308c\u3066\u3044\u308b\u5024\u306f\u89e3\u6c7a\u3055\u308c\u3001\u52d5\u7684\u306b\u4f5c\u3089\u308c\u305f\u6587\u5b57\u5217\u3092\u5f97\u307e\u3059\u3002\n\u73fe\u5728\u306ePuppet4\u3067\u306f\u3001notice()\u3078\u6e21\u3055\u308c\u3066\u3044\u308b\u5024\u306f\u7a7a\u6587\u5b57\u3068\u3057\u3066\u89e3\u6c7a\u3055\u308c\u307e\u3059\u3002\n\u30ea\u30bd\u30fc\u30b9\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u5bfe\u3059\u308b\u632f\u308b\u821e\u3044\u306f\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\nIn Puppet 4.0, dynamic scoping has been removed for variables in ERB templates.\nclass outer {\n  $var = 'dynamic'\n  include inner\n}\n\nclass inner {\n  notice(inline_template('<%= @var %>'))\n}\n\ninclude outer\n\nPrior to Puppet 4.x, the value supplied to notice() will resolve to the string dynamic.\nNow, in Puppet 4.x, the value supplied to notice() will resolve to an empty string.\nThe behavior of resource defaults has not been changed.\n\n\n+=\u3068-=\n\n\n+= and -=\n\n+=\u6f14\u7b97\u5b50\u3068-=\u6f14\u7b97\u5b50\u306f\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002puppet-lint\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u3092\u691c\u67fb\u3067\u304d\u307e\u3059\u3002\n\nThese operators have been removed. You can run the puppet-lint plugin to check your existing code base for them.\n\n\nRuby DSL\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\n\nModules Using the Ruby DSL\n\n\u3064\u3044\u306b\u9577\u3089\u304f\u975e\u63a8\u5968\u3060\u3063\u305fRuby DSL\u304c\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\n\nFinally, the long-deprecated Ruby DSL has been fully removed from Puppet.\n\n\u6b21\u306e\u548c\u8a33\u3067\u3059\u3002\u81ea\u5206\u304cPuppet4\u306b\u305d\u308d\u305d\u308d\u79fb\u884c\u3057\u305f\u3044\u306a\u3068\u601d\u3063\u305f\u306e\u3067\u52dd\u624b\u306b\u548c\u8a33\u3057\u307e\u3057\u305f\u3002\n\n\b\bhttp://docs.puppetlabs.com/puppet/4.2/reference/experiments_future.html\n2015/10\u95b2\u89a7\n\n***\n\n\u3044\u304f\u3064\u304b\u306e\u7834\u58ca\u7684\u306a\u5909\u66f4\u304cPuppet4.0\u3067\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u4ee5\u524dPuppet3.x\u3092\u4f7f\u3063\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u65b0\u3057\u3044\u5b9f\u88c5\u306b\u5408\u308f\u305b\u3066\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u30da\u30fc\u30b8\u3067\u306f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30924.0\u4e92\u63db\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u305f\u3081\u306b\u91cd\u8981\u306a\u624b\u9806\u3092\u4e26\u3079\u3066\u3044\u307e\u3059\u3002\n> Several breaking changes were introduced in Puppet 4.0. If you previously used Puppet 3.x, your manifests will need to be updated for the new implementation. This page lists the most important steps to update your manifests to be 4.x compatible.\n\n# \u3059\u3079\u3066\u304c\u6b63\u3057\u3044\u5834\u6240\u306b\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n- `Make Sure Everything Is in the Right Place`\n\n\u30b3\u30fc\u30c9\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u91cd\u8981\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\u305d\u308c\u3089\u304c[\u3069\u3053\u306b\u884c\u3063\u305f\u304b\u306b\u3064\u3044\u3066](http://docs.puppetlabs.com/puppet/4.2/reference/whered_it_go.html)\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u3001\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u3057\u3044\u5834\u6240\u306b\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306b\u6311\u6226\u3059\u308b\u306e\u306f\u305d\u306e\u5f8c\u3067\u3059\u3002\n> The locations of code directories and important config files have changed. Read about [where everything went](http://docs.puppetlabs.com/puppet/4.2/reference/whered_it_go.html) to make sure your files are in the correct place before tackling updates to your manifests.\n\n# cron\u30ea\u30bd\u30fc\u30b9\u3092\u9664\u53bb\u3059\u308b\u524d\u306b\u3001\u305d\u306e\u5b89\u5168\u6027\u3092\u30c0\u30d6\u30eb\u30c1\u30a7\u30c3\u30af\u3059\u308b\n- `Double-Check to Make Sure It\u2019s Safe Before Purging cron Resources`\n\n\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001`{'cron': purge => true}`\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u3092\u4f7f\u3046\u3053\u3068\u306f\u73fe\u5728Puppet\u3092\u8d70\u3089\u305b\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\uff08\u305f\u3044\u3066\u3044root\u3067\u3059\u304c\uff09\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u30b8\u30e7\u30d6\u3092\u89e3\u9664\u3059\u308b\u3060\u3051\u306ecron\u30ea\u30bd\u30fc\u30b9\u3067\u3057\u305f\u3002\u3057\u304b\u3057Puppet4\u3067\u306f\u3088\u308a\u653b\u6483\u7684\u306b\u306a\u308a\u3001\u3059\u3079\u3066\u306e\u7ba1\u7406\u3055\u308c\u3066\u3044\u306a\u3044cron\u30b8\u30e7\u30d6\u3092\u89e3\u9664\u3057\u307e\u3059\u3002\u305d\u306e\u52d5\u4f5c\u304c\u672c\u5f53\u306b\u6c42\u3081\u3066\u3044\u308b\u3082\u306e\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u89e3\u9664\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u6c17\u3092\u3064\u3051\u308b\u305f\u3081\u306b`noop => true`\u3092\u30bb\u30c3\u30c8\u3057\u305f\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n> Previously, using resources `{'cron': purge => true}` to purge cron resources would only purge jobs belonging to the current user performing the Puppet run (usually root). [In Puppet 4](http://docs.puppetlabs.com/puppet/4.0/reference/release_notes.html), this action is more aggressive and causes all unmanaged cron jobs to be purged.\n>\n> Make sure this is what you want. You might want to set `noop => true` on the purge resource to keep an eye on it.\n\n# \u578b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\n- `Check Your Data Types`\n\n[\u578b](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data.html)\u306b\u306f\u3044\u304f\u3064\u304b\u5909\u66f4\u304c\u3042\u308a\u307e\u3059\u3002\n> [Data types](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data.html) have changed in a few ways.\n\n\n## \u30d6\u30fc\u30ea\u30a2\u30f3\u306f\u5e38\u306b\u672c\u5f53\u306e\u30d6\u30fc\u30ea\u30a2\u30f3\n- `Boolean Facts are Always Real Booleans`\n\nPuppet3\u3067\u306f\u3001\u30d6\u30fc\u30ea\u30a2\u30f3\uff08true/false\u5024\uff09\u306f\u3001`stringify_facts`\u8a2d\u5b9a\u3092\u7121\u52b9\u306b\u3057\u306a\u3044\u9650\u308a\u6587\u5b57\u5217\u3078\u5909\u63db\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\u3053\u308c\u306f`if $is_virtual == 'true' {...}`\u306e\u3088\u3046\u306a\u6bd4\u8f03\u304c\u4e00\u822c\u7684\u3067\u3042\u3063\u305f\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002\n\nPuppet4\u3067\u306f\u3001\u30d6\u30fc\u30ea\u30a2\u30f3\u306f\u6c7a\u3057\u3066\u6587\u5b57\u5217\u306b\u306f\u5909\u63db\u3055\u308c\u307e\u305b\u3093\u3057\u3001\u307e\u305f\u5148\u307b\u3069\u306e`==`\u6f14\u7b97\u5b50\u306b\u3088\u308b\u6bd4\u8f03\u306f\u5e38\u306bfalse\u306b\u306a\u308a\u307e\u3059\u3002\u3088\u3063\u3066\u6df1\u523b\u306a\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3059\u3053\u3068\u304c\u3042\u308a\u3048\u307e\u3059\u3002\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u5168\u3066\u306e\u30d6\u30fc\u30ea\u30a2\u30f3\u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u3063\u3066\u3044\u308b\u6bd4\u8f03\u306b\u3064\u3044\u3066\u78ba\u8a8d\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u3082\u3057\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092Puppet3/Puppet4\u306e\u4e21\u65b9\u3067\u52d5\u304f\u3088\u3046\u306b\u3057\u305f\u3051\u308c\u3070\u3001\u30d6\u30fc\u30ea\u30a2\u30f3\u304b\u3089\u6587\u5b57\u5217\u3078\u5909\u63db\u3057\u3001\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u95a2\u6570\u3067\u3042\u308b`str2bool`\u3092\u547c\u3073\u51fa\u3057\u3066\u5909\u63db\u3059\u308b\u3053\u3068\u3067\u5909\u63db\u3067\u304d\u307e\u3059\u3002\n\n> In Puppet 3, facts with boolean true/false values (like `$is_virtual`) were converted to strings unless the stringify_facts setting was disabled. This meant it was common to test for these facts with the == operator, like `if $is_virtual == 'true' { ... }`.\n\n> In Puppet 4, boolean facts are never turned into strings, and those == comparisons will always evaluate to false. This can cause serious problems. Check your manifests for any comparisons that treat boolean facts like strings; if you need a manifest to work with both Puppet 3 and Puppet 4, you can convert a boolean to a string and then pass it to the stdlib module\u2019s str2bool function:\n\n> ```puppet\nif str2bool(\"$is_virtual\") { ... }\n```\n\n# DSL\u306b\u304a\u3044\u3066\u6570\u5024\u3068\u6587\u5b57\u5217\u306f\u5225\u7269\n- Numbers and Strings Are Different in the DSL\n\n\u3088\u308a\u8a73\u3057\u3044\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f[\u3053\u3061\u3089\u3067\u3002](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data_number.html)\n\n\u4ee5\u524dPuppet\u306f\u5168\u3066\u3092\u6587\u5b57\u5217\u3078\u5909\u63db\u3057\u3088\u3046\u3068\u3057\u3001\u6570\u7684\u6587\u8108\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u6642\u306b\u306f\u6587\u5b57\u5217\u3092\u6570\u5024\u3078\u5909\u63db\u3057\u623b\u3057\u3066\u3044\u307e\u3057\u305f\u3002Puppet4\u306b\u304a\u3044\u3066\u306f\u3001DSL\u4e2d\u306e\u6570\u5024\u306f\u30d1\u30fc\u30b9\u3055\u308c\u5185\u90e8\u7684\u306b\u6570\u5024\u3068\u3057\u3066\u4fdd\u6301\u3055\u308c\u307e\u3059\u3002\u6b21\u306e\u4f8b\u306e\uff12\u3064\u306e\u5909\u6570\u306f\u3001Puppet3\u306b\u304a\u3044\u3066\u306f\u540c\u3058\u3067\u3057\u305f\u304c\u3001Puppet4\u306b\u304a\u3044\u3066\u306f\u7570\u306a\u308b\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\n```puppet\n$port_a = 80   # \u6570\u3068\u3057\u3066\u30d1\u30fc\u30b9\u30fb\u4fdd\u6301\u3055\u308c\u3001\u3082\u3057\u6570\u5024\u3067\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\n$port_b = '80' # \u6587\u5b57\u3068\u3057\u3066\u30d1\u30fc\u30b9\u30fb\u4fdd\u6301\u3055\u308c\u308b\n```\n\n\u73fe\u5728\u3053\u306e\u9055\u3044\u306f\u3001\u53b3\u5bc6\u306b\u6570\u5024\u304c\u5f37\u5236\u3055\u308c\u3001\u3082\u3057\u5024\u304c\u6709\u52b9\u306a\u6570\u5b57\u304b\u3089\u59cb\u307e\u3089\u306a\u3051\u308c\u3070\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n\n```puppet\nnode 1name {} # 1name\u306f\u6709\u52b9\u306a10\u9032\u6570\u3067\u306f\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\u3053\u306e\u540d\u524d\u306fquote\u3059\u308b\u5fc5\u8981\u304c\u6709\u308a\u307e\u3059\nnotice(0xggg) # 0xggg\u306f\u6709\u52b9\u306a16\u9032\u6570\u3067\u306f\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n$a = 1 + 0789 # 0789\u306f\u6709\u52b9\u306a8\u9032\u6570\u3067\u306f\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n```\n\n> For full details, [see the language page about numeric values.](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data_number.html)\n> Previously, Puppet would convert everything to strings, then attempt to convert those strings back into numbers when they were used in a numeric context. In Puppet 4, numbers in the DSL are parsed and maintained internally as numbers. The following examples would have been equivalent in Puppet 3, but are now different:\n\n> ```puppet\n$port_a = 80   # Parsed and maintained as a number, errors if NOT a number\n$port_b = '80' # Parsed and maintained as a string\n```\n\n> The difference now is that Puppet will STRICTLY enforce numerics and will throw errors if values that begin with a number are not valid numbers.\n\n> ```puppet\nnode 1name {} # invalid because 1name is not a valid decimal number; you would need to quote this name\nnotice(0xggg) # invalid because 0xggg is not a valid hexadecimal number\n$a = 1 + 0789 # invalid because 0789 is not a valid octal number\n```\n\n## \u8a08\u7b97\u5f0f\n- Arithmetic Expressions\n\n\u6570\u5f0f\u306f\u6587\u5b57\u5217\u304b\u3089\u6570\u5024\u3078\u5909\u63db\u3055\u308c\u307e\u3059\u3002\u3082\u3057\u5024\u304c0\u3082\u3057\u304f\u306f0x\u304b\u3089\u59cb\u307e\u308b\u3068\u304d\u3001\u305d\u308c\u3089\u306f\uff18\u9032\u6570\u3082\u3057\u304f\u306f\uff11\uff16\u9032\u6570\u3068\u3057\u3066\u305d\u308c\u305e\u308c\u6271\u308f\u308c\u307e\u3059\u3002\u3082\u3057\u8a08\u7b97\u5f0f\u306e\u4e21\u65b9\u304c\u6570\u5024\u30fb\u6570\u5024\u3078\u5909\u63db\u3067\u304d\u308b\u6587\u5b57\u5217\u3067\u306a\u3044\u5834\u5408\u306f\u3001\u30a8\u30e9\u30fc\u304c\u8d77\u3053\u308a\u307e\u3059\u3002\n\n```puppet\n$valid = 40 + 50       # \u4e21\u65b9\u3068\u3082\u6570\u5024\u306a\u306e\u3067\u6709\u52b9\u3067\u3059\u3002\n$valid = 25 + '30'     # '30'\u3068\u3044\u3046\u6587\u5b57\u5217\u306f\u6570\u5024\u3078\u5909\u63db\u3067\u304d\u308b\u306e\u3067\u6709\u52b9\u3067\u3059\u3002\n$invalid = 40 + 0789   # 0789\u3068\u3044\u3046\u5024\u306f\u6709\u52b9\u306a8\u9032\u6570\u3067\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n$invalid = 40 + '0789' # '0789'\u3068\u3044\u3046\u6587\u5b57\u5217\u306f\u6570\u5024\u3078\u5909\u63db\u3067\u304d\u306a\u3044\u306e\u3067\u7121\u52b9\u3067\u3059\u3002\n```\n\n> Mathematical expressions still convert strings to numeric values. If a value begins with 0 or 0x, it will be interpreted as an octal or hex number, respectively. An error is raised if either side in an arithmetic expression is not a number or a string that can be converted to a number. For example:\n\n> ```puppet\n$valid = 40 + 50       # valid because both values are numeric\n$valid = 25 + '30'     # valid because '30' can be cast numerically\n$invalid = 40 + 0789   # invalid because 0789 isn't a valid octal number\n$invalid = 40 + '0789' # invalid because '0789' can't be cast numerically\n```\n\n# \u6bd4\u8f03\u3092\u78ba\u8a8d\u3059\u308b\n- Check Your Comparisons\n\n\u3044\u304f\u3064\u304b\u306e\u6bd4\u8f03\u6f14\u7b97\u5b50\u304cPuppet4\u306b\u304a\u3044\u3066\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u8a73\u3057\u304f\u306f[\u5f0f\u3068\u6f14\u7b97\u5b50](http://docs.puppetlabs.com/puppet/4.2/reference/lang_expressions.html)\u3067\u3002\n\n> Some comparison operations have changed in Puppet 4. Read about [expressions and operators](http://docs.puppetlabs.com/puppet/4.2/reference/lang_expressions.html) for the full details.\n\n## \u6587\u5b57\u5217\u4ee5\u5916\u3078\u306e\u6b63\u898f\u8868\u73fe\n- Regular Expressions Against Non-Strings\n\n\u6587\u5b57\u5217\u4ee5\u5916\u3078\u306e\u6b63\u898f\u8868\u73fe\u30de\u30c3\u30c1\u51e6\u7406\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002Puppet3\u7cfb\u3060\u3068\u6587\u5b57\u5217\u4ee5\u5916\u306e\u578b\u3082\u30de\u30c3\u30c1\u51e6\u7406\u3092\u884c\u3046\u524d\u306b\u6587\u5b57\u5217\u3078\u5909\u63db\u3057\u3066\u3044\u307e\u3057\u305f\u3002\uff08\u4e88\u6e2c\u4e0d\u80fd\u3067\u672a\u5b9a\u7fa9\u306e\u7d50\u679c\u3082\u983b\u7e41\u306b\uff09\n\n```puppet\n$securitylevel = 2\n\ncase $securitylevel {\n  /[1-3]/: { notify { 'security low': } }\n  /[4-7]/: { notify { 'security medium': } }\n  default: { notify { 'security high': } }\n}\n```\n\nPuppet4\u4ee5\u524d\u3067\u306f\u3001\u6700\u521d\u306e\u6b63\u898f\u8868\u73fe\u306f\u30de\u30c3\u30c1\u3059\u308b\u306e\u3067\u30ab\u30bf\u30ed\u30b0\u306b`{ 'security low': }`\u304c\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n\nPuppet4\u3067\u306f\u3001`$securityLevel`\u306e\u5024\u304c\u6587\u5b57\u5217\u3067\u306f\u306a\u304f\u6574\u6570\u3067\u3042\u308b\u305f\u3081\u5168\u3066\u306e\u6b63\u898f\u8868\u73fe\u304c\u30de\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\u305d\u306e\u7d50\u679c\u30c7\u30d5\u30a9\u30eb\u30c8\u6761\u4ef6\u304c\u30de\u30c3\u30c1\u3057\u3001`{ 'security high': }`\u304c\u901a\u77e5\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n> Matching a value that is not a string with a regular expression now raises an error. In 3.x, other data types were converted to string form before matching (often with surprising and undefined results).\n\n> ```puppet\n$securitylevel = 2\n>\ncase $securitylevel {\n  /[1-3]/: { notify { 'security low': } }\n  /[4-7]/: { notify { 'security medium': } }\n  default: { notify { 'security high': } }\n}\n```\n\n> Prior to Puppet 4.0, the first regex would match, and the notify `{ \u2018security low\u2019: }` resource would be put into the catalog.\n\n> Now, in Puppet 4.0, neither of the regexes would match because the value of `$securitylevel` is an integer, not a string, and so the default condition would match, resulting in the inclusion of notify `{ 'security high': }` in the catalog.\n\n## \u30d6\u30fc\u30ea\u30a2\u30f3\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306b\u304a\u3044\u3066\u3001\u7a7a\u6587\u5b57\u5217\u306f`true`\u3067\u3042\u308b\n- Empty Strings in Boolean Context are `true`\n\n\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306ePuppet\u3067\u306f\u3001\u7a7a\u6587\u5b57\u5217\u306ffalse\u3068\u3057\u3066\u8a55\u4fa1\u3055\u308c\u307e\u3057\u305f\u3002\u5909\u6570\u306e\u5024\u3092\u6e21\u3057\u305f\u3082\u3057\u304f\u306f\u7a7a\u306e\u307e\u307e\u306e\u5834\u5408\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u6761\u4ef6\u6bd4\u8f03\u306b\u304a\u3044\u3066\u3001\u5909\u6570\u3084\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u3057\u3066\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u3092\u76ee\u306b\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```puppet\nclass empty_string_defaults (\n  $parameter_to_check = ''\n) {\n  if $parameter_to_check {\n    $parameter_to_check_real = $parameter_to_check\n  } else {\n    $parameter_to_check_real = 'default value'\n  }\n}\n```\n\n\u53e4\u3044Puppet\u3067\u306f\u7a7a\u6587\u5b57\u5217\u3067\u306f`false`\u3068\u3057\u3066\u8a55\u4fa1\u3055\u308c\u305f\u306e\u3067\u3001\u30b7\u30f3\u30d7\u30eb\u306aif\u6587\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002Puppet4\u306b\u304a\u3044\u3066\u3053\u306e\u632f\u308b\u821e\u3044\u306f`$parameter_to_check_real`\u306b\u3088\u3063\u3066\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u306b\u3064\u3044\u3066\u3053\u306e\u632f\u308b\u821e\u3044\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002[puppet-lint plugin](https://github.com/puppet-community/puppet-lint-empty_string-check)\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n\u307e\u305f[\u30d6\u30fc\u30ea\u30a2\u30f3\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data_boolean.html)\u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n> In previous versions of Puppet, an empty string was evaluated as a false boolean value. You would see this in variable and parameter default values where conditional checks would be used to determine if someone passed in a value or left it blank.\n\n> ```puppet\nclass empty_string_defaults (\n  $parameter_to_check = ''\n) {\n  if $parameter_to_check {\n    $parameter_to_check_real = $parameter_to_check\n  } else {\n    $parameter_to_check_real = 'default value'\n  }\n}\n```\n\n> Puppet\u2019s old behavior of evaluating the empty string as `false` would allow you to set the default based on a simple if-statement. In Puppet 4.x, this behavior is flipped and `$parameter_to_check_real` will be set to an empty string.\n\n> You can check your existing codebase for this behavior with a [puppet-lint plugin](https://github.com/puppet-community/puppet-lint-empty_string-check).\n\n> See [the language page on boolean values](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data_boolean.html) for more info.\n\n## `in`\u6f14\u7b97\u5b50\u306f\u5c11\u3057\u3060\u3051\u7570\u306a\u308b\n- The `in` Operator Is Slightly Different\n\n`in`\u6f14\u7b97\u5b50\u306f\u304b\u3064\u3066\u306f\u6587\u5b57\u5217\u6bd4\u8f03\u306b\u304a\u3044\u3066\u5927\u6587\u5b57\u30fb\u5c0f\u6587\u5b57\u3092\u5225\u306e\u3082\u306e\u3068\u3057\u3066\u307f\u306a\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u3053\u308c\u306f`==`\u6f14\u7b97\u5b50\u3068\u7570\u306a\u308a\u307e\u3059\u3002Puppet4\u306b\u304a\u3044\u3066\u306f`==`\u6f14\u7b97\u5b50\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u5927\u6587\u5b57\u30fb\u5c0f\u6587\u5b57\u306e\u533a\u5225\u3092\u884c\u3044\u307e\u305b\u3093\u3002\u307e\u305f\u4ee5\u524d\u306f\u4e0d\u53ef\u80fd\u3060\u3063\u305f\u6b63\u898f\u8868\u73fe\u3068\u578b\u306e\u6bd4\u8f03\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u5168\u4f53\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u304a\u3051\u308b\u5b9a\u7fa9](http://docs.puppetlabs.com/puppet/4.2/reference/lang_expressions.html#in)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n> The `in` operator used to be case-sensitive when testing strings, which was inconsistent with the `==` operator. Now it\u2019s case-insensitive, like `==`. It can also test regular expressions and data types, which wasn\u2019t possible before.\n\n> The full behavior is [defined in the documentation](http://docs.puppetlabs.com/puppet/4.2/reference/lang_expressions.html#in).\n\n## \u578b\u306e\u6bd4\u8f03\n- Comparing Data Types\n\n\u7570\u306a\u308b\u578b\u306f\u540c\u3058\u578b\u3067\u306a\u3044\u9650\u308a\u6bd4\u8f03\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u6570\u5024\u3068\u6587\u5b57\u5217\u306e\u6bd4\u8f03\u6642\u306b\u3001\u308f\u304b\u308a\u3084\u3059\u3044\u5909\u5316\u3068\u3057\u3066\u6c17\u3065\u304f\u3067\u3057\u3087\u3046\u3002\n\n> Different [data types](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data.html) can\u2019t be compared as if they\u2019re the same data type anymore. This is most noticeable when comparing numbers to strings.\n\n# \u4e8c\u91cd\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u304c\u3042\u308b\u3001\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u8868\u8a18\u306e\u6587\u5b57\u5217\u3092\u78ba\u8a8d\u3059\u308b\n- Check Single-Quoted Strings for Double Backslashes\n\n`\\\\`\u30a8\u30b9\u30b1\u30fc\u30d7\u306f\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u8868\u8a18\u306b\u304a\u3044\u3066\u9069\u5207\u306b\u52d5\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4ee5\u524d\u306f\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u542b\u3080\u6587\u5b57\u5217\u306f\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u8868\u8a18\u3067\u6271\u3046\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u30ea\u30c6\u30e9\u30eb\u3068\u3057\u3066\u4e8c\u91cd\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u542b\u3080\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u5168\u3066\u5909\u66f4\u3055\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u30ea\u30c6\u30e9\u30eb\u3068\u3057\u3066\u306e\u4e8c\u91cd\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u306f\u56db\u91cd\u306e\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5`\\\\\\\\`\u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u632f\u308b\u821e\u3044\u306b\u3064\u3044\u3066\u306f[\u6587\u5b57\u5217\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data_string.html#single-quoted-strings)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n> The `\\\\` escape now works properly in single-quoted strings. Previously, there was no way to end a single-quoted string with a backslash.\n\n> This will change any existing strings that are supposed to have literal double backslashes in them; you\u2019ll need to change them to quadruple backslashes. Read more about this behavior in [the language page about strings](http://docs.puppetlabs.com/puppet/4.2/reference/lang_data_string.html#single-quoted-strings).\n\n# \u5909\u6570\u30fb\u30af\u30e9\u30b9\u30fb\u95a2\u6570\u30fbDefined Type\u30fb\u305d\u306e\u4ed6\u306e\u547d\u540d\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n- Check Names of Variables, Classes, Functions, Defined Types, etc.\n\n\u547d\u540d\u898f\u5247\u304c\u3088\u308a\u53b3\u683c\u306b\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\n- \u30af\u30aa\u30fc\u30c8\u7121\u3057\u306e\u5927\u6587\u5b57\u306e\u5358\u8a9e\u306f\u7981\u6b62\u3055\u308c\u307e\u3057\u305f\n- \u5909\u6570\u306f\u5927\u6587\u5b57\u3067\u59cb\u307e\u3063\u3066\u306f\u3044\u3051\u307e\u305b\u3093\n- \u30af\u30e9\u30b9\u30fbdefined type\u30fb\u95a2\u6570\u306f\u3001\u30cf\u30a4\u30d5\u30f3\u3092\u542b\u3093\u3067\u3082\u6570\u5b57\u3067\u59cb\u307e\u3063\u3066\u3082\u3044\u3051\u307e\u305b\u3093\n\n> Naming conventions have changed and become more strict.\n\n> - Capitalized bare words as un-quoted strings are no longer allowed.\n> - Variables must not start with capital letters.\n> - Classes, defined types, functions must not include hyphens or begin with digits.\n\n# \u7121\u610f\u5473\u306a\u5f0f\u3092\u78ba\u8a8d\u3059\u308b\n- Check for Non-Productive Expressions\n\nPuppet4\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3088\u3046\u306a\u5f0f\u306b\u3064\u3044\u3066\u4f55\u3082\u52b9\u679c\u3082\u30d5\u30e9\u30b0\u3082\u6301\u3061\u307e\u305b\u3093\u3002\n\n\u7121\u610f\u5473\u306a\u5f0f\u306e\u4f8b\u3092\u793a\u3059\u3068\u3001\n\n```puppet\nif true { } # \u7121\u610f\u5473\u3067\u3059\n$a = 10\n```\n\n\u3082\u3057\u5f0f\u304c\u672a\u5b9a\u7fa9\u5024\u3092\u751f\u307f\u51fa\u3059\u5834\u5408\u3001\u305d\u308c\u3089\u306f\u6368\u3066\u53bb\u3089\u308c\u307e\u3059\u3002\u6ce8\u610f\u3059\u3079\u304d\u3053\u3068\u306f\u3001\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30fb\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u306e\u672b\u5c3e\u3001\u3082\u3057\u304f\u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u5024\u306b\u3064\u3044\u3066\u306f\u7121\u610f\u5473\u306a\u5f0f\u3068\u3057\u3066\u6271\u3046\u3053\u3068\u306f\u6c7a\u3057\u3066\u3042\u308a\u307e\u3048\u3093\u3002\n\n\u3082\u3057Puppet\u304c\u7121\u610f\u5473\u306a\u30b3\u30fc\u30c9\u306b\u5bfe\u3059\u308b\u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u305f\u3089\u3001\u30b3\u30fc\u30c9\u306e\u632f\u308b\u821e\u3044\u306b\u5bfe\u3057\u3066\u4f55\u3082\u5f71\u97ff\u3092\u4e0e\u3048\u306a\u3044\u554f\u984c\u306e\u30b3\u30fc\u30c9\u3092\u9664\u53bb\u3059\u3079\u304d\u3067\u3059\u3002\n\n> Puppet 4.0.0 validates logic that has no effect and flags such expressions as being errors.\n\n> An example of a non productive expression is:\n\n> ```puppet\nif true { } # non productive\n$a = 10\n```\n\n> The if expression produces a value of undef, which is then thrown away. Note that expressions are never considered non-productive when they are the last in a manifest or block of code, as that is also the value of the sequence.\n\n> If Puppet raises a non-productive expression error about your code, you should be able to remove the offending statements without changing the code\u2019s behavior.\n\n# \u4e88\u7d04\u6e08\u307f\u306e\u5358\u8a9e\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n- Check for Bare Words That May Now Be Reserved\n\nPuppet4\u306b\u304a\u3044\u3066\u306f\u4e88\u7d04\u8a9e\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u30c1\u30a7\u30c3\u30af\u3057\u30af\u30aa\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u6587\u5b57\u5217\u304c[\u4e88\u7d04\u8a9e\u30ea\u30b9\u30c8](http://docs.puppetlabs.com/puppet/4.2/reference/lang_reserved.html)\u3092\u542b\u3093\u3067\u3044\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u5fc5\u8981\u3067\u3042\u308c\u3070\u30af\u30aa\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n> More reserved words were added in Puppet 4.0, so check your manifests for any un-quoted strings on [the reserved words list](http://docs.puppetlabs.com/puppet/4.2/reference/lang_reserved.html) and quote them as needed.\n\n# \u30cf\u30c3\u30b7\u30e5\u3084\u914d\u5217\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u304d\u306e\u4f59\u5206\u306a\u7a7a\u767d\u6587\u5b57\u3092\u78ba\u8a8d\u3059\u308b\n- Check for Excess Spaces When Accessing Hashes and Arrays\n\n\u5024\u4e2d\u3084\u89d2\u62ec\u5f27\u306e\u5de6\u306e\u7a7a\u767d\u6587\u5b57\u306f\u91cd\u8981\u3067\u3059\u3002Puppet\u306f\u7a7a\u767d\u6587\u5b57\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3067\u7570\u306a\u308b\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\u60aa\u3044\u4f8b\n\n```puppet\n$a [3]  # \u6700\u521d\u306f\u5909\u6570a\u306e\u5024\u306b\u306a\u308a\u3001\u6b21\u306f\u4e00\u3064\u306e\u5024\u3092\u542b\u3080\u914d\u5217\u306e\u30ea\u30c6\u30e9\u30eb\u8868\u8a18\n```\n\n\u826f\u3044\u4f8b\n\n```puppet\n$a[3]   # \u914d\u5217a\u306e3\u756a\u76ee\u306e\u5024\u3092\u53c2\u7167\u3057\u307e\u3059\n```\n\n> The space between a value and a left bracket is significant, and Puppet will output different results if there is a space.\n\n> Bad:\n\n> ```puppet\n$a [3]  # first the value of a, then a literal array with the single value 3 in it\n```\n\n> Good:\n\n> ```puppet\n$a[3]   # index 3 in the array referenced by $a\n```\n\n# \u62ec\u5f27\u7121\u3057\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u3092\u78ba\u8a8d\u3059\u308b\n- Check for Function Calls Without Parentheses\n\n\u3042\u308b\u9650\u3089\u308c\u305f\u95a2\u6570\u3060\u3051\u304c\u62ec\u5f27\u7121\u3057\u306b\u547c\u3073\u51fa\u3057\u53ef\u80fd\u3067\u3059\u3002[\u95a2\u6570\u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.puppetlabs.com/puppet/4.2/reference/lang_functions.html)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n> Only certain functions are allowed to be called without parentheses. Read [the documentation on functions](http://docs.puppetlabs.com/puppet/4.2/reference/lang_functions.html) to learn when parentheses can be omitted.\n\n# \u6b63\u898f\u8868\u73fe\u306e\u6b63\u3057\u3044\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u78ba\u8a8d\u3059\u308b\n- Check Your Regular Expressions for Correct Syntax\n\nPuppet4\u306fRuby2\u306e\u30b3\u30d4\u30fc\u3092\u72ec\u81ea\u306b\u30d0\u30f3\u30c9\u30eb\u3057\u3066\u304a\u308a\u3001\u6b63\u898f\u8868\u73fe\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306f\u4ee5\u524d\u306ePuppet\u3067\u5b9f\u884c\u3057\u3066\u3044\u305fRuby1.8.7\u3068\u306f\u5c11\u3057\u3060\u3051\u7570\u306a\u308b\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u30022\u3064\u306eRuby\u306f\u305d\u308c\u305e\u308c\u7570\u306a\u308b\u6b63\u898f\u8868\u73fe\u30a8\u30f3\u30b8\u30f3\u3092\u4f7f\u3063\u3066\u3044\u308b\u305f\u3081\u7570\u306a\u308b\u7d50\u679c\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n> Puppet 4 bundles its own copy of Ruby 2.x, and the regex syntax is slightly different than Ruby 1.8.7, which you may have been running prior to upgrade. Because the two versions of Ruby use differing regex engines, your results may vary.\n\n# Hiera\u3067\u4f7f\u3046YAML\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u3057\u3044\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n- Check YAML Files Used by Hiera, etc. for Correct Syntax\n\n\u3082\u3057Ruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3055\u308c\u305f\u3089\u3001YAML\u306e\u30d1\u30fc\u30b5\u30fc\u304c\u3088\u308a\u53b3\u683c\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u6587\u5b57\u5217\u304c\u542b\u3093\u3067\u3044\u308b`%`\u304c\u30af\u30aa\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n> If the Ruby version changed since upgrade, the YAML parser will be more strict. Ensure strings containing a `%` are quoted.\n\n# \u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u30e2\u30fc\u30c9\u5c5e\u6027\u3092\u78ba\u8a8d\u3059\u308b\n- Check the mode Attribute of Any File Resources\n\n\u30d5\u30a1\u30a4\u30eb\u30ea\u30bd\u30fc\u30b9\u306e\u30e2\u30fc\u30c9\u5c5e\u6027\u304c\u6587\u5b57\u5217\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3082\u30578\u9032\u6570\u3092\u4f7f\u3063\u3066\u3044\u305f\u3089\u3001\u305d\u308c\u3089\u306f10\u9032\u6570\u3078\u5909\u63db\u3055\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u305d\u3057\u3066`chown`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3055\u3044\u306b\u8aa4\u3063\u305f\u6570\u5024\u3068\u3057\u3066\u6587\u5b57\u5217\u3067\u8868\u73fe\u3055\u308c\u307e\u3059\u3002\n\n> [The mode attribute](http://docs.puppetlabs.com/references/4.2.latest/type.html#file-attribute-mode) of a file resource must be a string. If you use an actual octal number, it will be converted to a decimal number, then converted back to a string representing the wrong number when it comes time to run the `chown` command.\n\n# \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u3051\u53d6\u308b`noop => true`\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u78ba\u8a8d\u3059\u308b\n- Check for Resources with `noop => true` that Receive Refresh Events\n\nPuppet3\u306b\u304a\u3044\u3066\u306f\u3001`noop`\u3092true\u306b\u3059\u308b\u3053\u3068\u3067no-op\u30e2\u30fc\u30c9\u3092\u9000\u907f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30a4\u30d9\u30f3\u30c8\uff08`notify`\u3082\u3057\u304f\u306f`subscribe`\u30e1\u30bf\u30d1\u30e9\u30e1\u30fc\u30bf\u3001`~>`\u77e2\u5370\uff09\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u4f55\u304b\u3057\u3089\u306e\u5909\u5316\u3092\u767a\u751f\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\nPuppet4\u3067\u306f\u3053\u308c\u3089\u306f\u4e0d\u53ef\u80fd\u306b\u306a\u308a\u3001no-op\u30ea\u30bd\u30fc\u30b9\u306f\u5e38\u306bno-op\u3067\u3042\u308a\u7d9a\u3051\u307e\u3059\u3002\u591a\u304f\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u306f\u4f55\u3082\u4e0d\u90fd\u5408\u306a\u70b9\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304c\u3001\u307b\u3093\u306e\u308f\u305a\u304b\u306a\u53ef\u80fd\u6027\u3068\u3057\u3066\u8a2d\u5b9a\u304c\u3053\u306e\u632f\u308b\u821e\u3044\u306b\u4f9d\u5b58\u3057\u3066\u3044\u306a\u3044\u304b\u3001\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n> In Puppet 3, resources with `noop` set to true could escape no-op mode and cause changes if they received a refresh event (via the `notify` or `subscribe` metaparameters or the `~>` arrow).\n\n> This is no longer possible in Puppet 4; no-op resources always stay no-op. For most users that\u2019s a win with no downside, but there\u2019s a slim chance that your configurations relied on this behavior, so look around to make sure.\n\n# \u524a\u9664\u3055\u308c\u305f\u6a5f\u80fd\u3092\u78ba\u8a8d\u3059\u308b\n- Check for Removed Features\n\nPuppet4\u306b\u304a\u3044\u3066\u3044\u304f\u3064\u304b\u524a\u9664\u3055\u308c\u305f\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u3089\u306f\u3001\u3082\u3057\u304f\u306f\u3088\u308a\u826f\u3044\u56de\u907f\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n> Several things were removed from Puppet 4, either because they no longer had practical use cases and were not being used, or there was a better work around.\n\n## `import`\u6587\u3068\u30ce\u30fc\u30c9\u7d99\u627f\n- `import` Statements and Node Inheritance\n\n`import`\u304c\u524a\u9664\u3055\u308c\u305f\u306e\u3067\u3001\u30e1\u30a4\u30f3\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u518d\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306f[\u30e1\u30a4\u30f3\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.puppetlabs.com/puppet/4.2/reference/dirs_manifest.html)\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\n\u30ce\u30fc\u30c9\u7d99\u627f\u3082\u540c\u69d8\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\u3082\u306f\u3084\u30ce\u30fc\u30c9\u306e\u5b9a\u7fa9\u3092\u5225\u306e\u30ce\u30fc\u30c9\u306e\u5b9a\u7fa9\u304b\u3089\u7d99\u627f\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002Hiera\u3068\u30e9\u30c3\u30d1\u30fc\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u3067\u3001\u3088\u308a\u826f\u3044\u7d50\u679c\u3092\u5f97\u3089\u308c\u307e\u3059\u3002\n\n> Removal of `import` means you\u2019ll have to use a directory as your main manifest to recreate this functionality. Read [the Main Manifest page](http://docs.puppetlabs.com/puppet/4.2/reference/dirs_manifest.html) to learn more about this method.\n\n> Node inheritance has also been removed. It is no longer possible to have node definitions that inherit from another node definition. You can get better results by using a combination of Hiera data and wrapper modules to construct system configurations.\n\n\u53c2\u8003\n[Qiita: Puppet 4.x \u304b\u3089\u6d88\u3048\u305f import \u306e\u4ee3\u308f\u308a\u306b Main Manifest \u3092 Directory \u306b\u5909\u66f4\u3059\u308b](http://qiita.com/hfm/items/a1c39a4e07d4f786d52f)\n\n## ERB\u306b\u304a\u3051\u308b\u52d5\u7684\u30b9\u30b3\u30fc\u30d7\n- Dynamic Scoping in ERB\n\nPuppet4.0\u306b\u304a\u3044\u3066\u3001ERB\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u304a\u3051\u308b\u5909\u6570\u306e\u52d5\u7684\u30b9\u30b3\u30fc\u30d7\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```puppet\nclass outer {\n  $var = 'dynamic'\n  include inner\n}\n>\nclass inner {\n  notice(inline_template('<%= @var %>'))\n}\n>\ninclude outer\n```\n\n\u4ee5\u524d\u306ePuppet\u3067\u306f\u3001`notice()`\u3078\u6e21\u3055\u308c\u3066\u3044\u308b\u5024\u306f\u89e3\u6c7a\u3055\u308c\u3001\u52d5\u7684\u306b\u4f5c\u3089\u308c\u305f\u6587\u5b57\u5217\u3092\u5f97\u307e\u3059\u3002\n\u73fe\u5728\u306ePuppet4\u3067\u306f\u3001`notice()`\u3078\u6e21\u3055\u308c\u3066\u3044\u308b\u5024\u306f\u7a7a\u6587\u5b57\u3068\u3057\u3066\u89e3\u6c7a\u3055\u308c\u307e\u3059\u3002\n\u30ea\u30bd\u30fc\u30b9\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u5bfe\u3059\u308b\u632f\u308b\u821e\u3044\u306f\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\n> In Puppet 4.0, dynamic scoping has been removed for variables in ERB templates.\n\n> ```puppet\nclass outer {\n  $var = 'dynamic'\n  include inner\n}\n>\nclass inner {\n  notice(inline_template('<%= @var %>'))\n}\n>\ninclude outer\n```\n\n> Prior to Puppet 4.x, the value supplied to notice() will resolve to the string dynamic.\n\n> Now, in Puppet 4.x, the value supplied to notice() will resolve to an empty string.\n\n> The behavior of resource defaults has not been changed.\n\n## `+=`\u3068`-=`\n- += and -=\n\n`+=`\u6f14\u7b97\u5b50\u3068`-=`\u6f14\u7b97\u5b50\u306f\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002puppet-lint\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u3092\u691c\u67fb\u3067\u304d\u307e\u3059\u3002\n\n> These operators have been removed. You can run the puppet-lint plugin to check your existing code base for them.\n\n## Ruby DSL\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\n- Modules Using the Ruby DSL\n\n\u3064\u3044\u306b\u9577\u3089\u304f\u975e\u63a8\u5968\u3060\u3063\u305fRuby DSL\u304c\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\n\n> Finally, the long-deprecated Ruby DSL has been fully removed from Puppet.\n", "tags": ["Puppet"]}