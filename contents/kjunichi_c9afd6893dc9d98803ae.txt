{"context": "\n\n\u80cc\u666f\n\u30d6\u30ed\u30c3\u30af\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u7279\u5b9a\u306e\u51e6\u7406\u3092C\u5074\u3067\u884c\u3044\u305f\u3044\u3002\n\n\u30d6\u30ed\u30c3\u30af\u3092\u53d7\u3051\u53d6\u308a\u3001\u4fdd\u6301\u3059\u308bruby\u5074\u306e\u5b9f\u88c5\nclass Webcam\n  attr_accessor :face_cb\n\n  def face(&blk)\n    @face_cb = blk\n  end\nend\n\n\n\u547c\u3073\u51fa\u3059\u30b3\u30fc\u30c9\u4f8b\ncam = Webcam.new\ncam.face {|img|\n   File.open(\"#{Time.now.to_s.gsub!(' ','').gsub!(':','')}_face.jpg\",\"wb\") {\n     |f| f.write img\n   }\n }\n\n\nC\u5074\u3067\u30d6\u30ed\u30c3\u30af\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u5224\u5b9a\nmrb_value faceBlock = mrb_iv_get(mrb, self, mrb_intern_lit(mrb, \"@face_cb\"));\nmrb_nil_p(faceBlock)) {\n  printf(\"\u30d6\u30ed\u30c3\u30af\u304c\u672a\u8a2d\u5b9a\u3067\u3059\u3002\\n\");\n}\n\n\u3053\u306e\u3088\u3046\u306b\u3001mrb_nil_p\u3092mrb_value\u578b\u306b\u5bfe\u3057\u3066\u884c\u3048\u3070\u3001\u5224\u5b9a\u3067\u304d\u305f\u3002\n\u7279\u306b\u3001\u4eca\u56de\u306f\u30d6\u30ed\u30c3\u30af\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\uff1f\u3068\u3044\u3046\u3053\u3068\u3092\u5224\u5b9a\u3057\u305f\u304b\u3063\u305f\u304c\u3001\n\u3053\u306emrb_nil_p\u3092\u4f7f\u3046\u65b9\u6cd5\u306a\u3089\u3001\u30d6\u30ed\u30c3\u30af\u3067\u306a\u304f\u3068\u3082\u3001\u6c4e\u7528\u7684\u306b\u5224\u5b9a\u304c\u53ef\u80fd\u306a\u6a21\u69d8\u3002\n# \u80cc\u666f\n\n\u30d6\u30ed\u30c3\u30af\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u7279\u5b9a\u306e\u51e6\u7406\u3092C\u5074\u3067\u884c\u3044\u305f\u3044\u3002\n\n# \u30d6\u30ed\u30c3\u30af\u3092\u53d7\u3051\u53d6\u308a\u3001\u4fdd\u6301\u3059\u308bruby\u5074\u306e\u5b9f\u88c5\n\n```rb\nclass Webcam\n  attr_accessor :face_cb\n\n  def face(&blk)\n    @face_cb = blk\n  end\nend\n```\n\n## \u547c\u3073\u51fa\u3059\u30b3\u30fc\u30c9\u4f8b\n\n```rb\ncam = Webcam.new\ncam.face {|img|\n   File.open(\"#{Time.now.to_s.gsub!(' ','').gsub!(':','')}_face.jpg\",\"wb\") {\n     |f| f.write img\n   }\n }\n```\n\n# C\u5074\u3067\u30d6\u30ed\u30c3\u30af\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u5224\u5b9a\n\n```c\nmrb_value faceBlock = mrb_iv_get(mrb, self, mrb_intern_lit(mrb, \"@face_cb\"));\nmrb_nil_p(faceBlock)) {\n  printf(\"\u30d6\u30ed\u30c3\u30af\u304c\u672a\u8a2d\u5b9a\u3067\u3059\u3002\\n\");\n}\n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001mrb_nil_p\u3092mrb_value\u578b\u306b\u5bfe\u3057\u3066\u884c\u3048\u3070\u3001\u5224\u5b9a\u3067\u304d\u305f\u3002\n\n\u7279\u306b\u3001\u4eca\u56de\u306f\u30d6\u30ed\u30c3\u30af\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\uff1f\u3068\u3044\u3046\u3053\u3068\u3092\u5224\u5b9a\u3057\u305f\u304b\u3063\u305f\u304c\u3001\n\u3053\u306emrb_nil_p\u3092\u4f7f\u3046\u65b9\u6cd5\u306a\u3089\u3001\u30d6\u30ed\u30c3\u30af\u3067\u306a\u304f\u3068\u3082\u3001\u6c4e\u7528\u7684\u306b\u5224\u5b9a\u304c\u53ef\u80fd\u306a\u6a21\u69d8\u3002\n", "tags": ["mruby"]}