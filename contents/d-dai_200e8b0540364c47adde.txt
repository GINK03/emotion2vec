{"context": "\n\n\u74b0\u5883\u69cb\u7bc9\u306b\u3064\u304b\u3046\u3082\u306e\nCentOS 6.7\u306bPHP\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u74b0\u5883\u69cb\u7bc9\u306b\u306f\u4ee5\u4e0b\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\nVagrant\nVirtualBox\nCentOS 6.7 64\u30d3\u30c3\u30c8 Vagrant\u30dc\u30c3\u30af\u30b9\nPHP7.0.6 \n\n\u3082\u3061\u308d\u3093Vagrant\u306f\u4f7f\u308f\u306a\u304f\u3066\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\nVagrant\u306e\u64cd\u4f5c\u65b9\u6cd5\u306f\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u3002\n\nApache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u306fApache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nApache\u306fyum\u3067\u5165\u308c\u307e\u3059\u3002\n$ su -\n# yum install -y httpd\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\nvi /etc/httpd/conf/httpd.conf\n\n\u2193\u4ee5\u4e0b\u3092\u8ffd\u8a18\nServerName localhost:80\n\n\n\u7acb\u3061\u4e0a\u304c\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n# service httpd start\n\nhttp://192.168.33.10 \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\nIP\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nOS\u8d77\u52d5\u6642\u306b\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n# chkconfig --add httpd\n\n\n\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# yum install -y httpd-devel libxml2-devel bzip2-devel curl-devel libjpeg-devel libpng-devel libXpm-devel freetype freetype-devel aspell-devel recode-devel openssl-devel gmp-devel readline-devel\n\nhttp://qiita.com/soundws/items/cc84da42419f1ab3443b \u3092\u53c2\u8003\u306b\u3057\u3066\u3001\nyum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n# wget http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6\n# rpm --import RPM-GPG-KEY-EPEL-6 \n# rm -f RPM-GPG-KEY-EPEL-6 \n# vi /etc/yum.repos.d/epel.repo\n# \u4ee5\u4e0b\u306e\u5185\u5bb9\u3067\u65b0\u898f\u4f5c\u6210\n[epel]\nname=EPEL RPM Repository for Red Hat Enterprise Linux\nbaseurl=http://ftp.riken.jp/Linux/fedora/epel/6/$basearch/\ngpgcheck=1\nenabled=0\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# yum --enablerepo=epel install -y libmcrypt php-mcrypt libmcrypt-devel php-mcrypt-devel\n\n\nPHP\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n# cd /usr/local/src\n# wget -O php-7.0.6.bz2 http://jp2.php.net/get/php7.0.6.tar.bz2/from/this/mirror\n# tar jvxf php-7.0.6.bz2\n\n\nPHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n# cd php-7.0.6\n# ./configure \\\n    --enable-mbstring \\\n    --enable-zip \\\n    --enable-bcmath \\\n    --enable-pcntl \\\n    --enable-ftp \\\n    --enable-exif \\\n    --enable-calendar \\\n    --enable-sysvmsg \\\n    --enable-sysvsem \\\n    --enable-sysvshm \\\n    --enable-wddx \\\n    --with-curl \\\n    --with-mcrypt \\\n    --with-iconv \\\n    --with-gmp \\\n    --with-pspell \\\n    --with-gd \\\n    --with-jpeg-dir=/usr \\\n    --with-png-dir=/usr \\\n    --with-zlib-dir=/usr \\\n    --with-xpm-dir=/usr \\\n    --with-freetype-dir=/usr \\\n    --enable-gd-native-ttf \\\n    --enable-gd-jis-conv \\\n    --with-openssl \\\n    --with-gettext=/usr \\\n    --with-zlib=/usr \\\n    --with-bz2=/usr \\\n    --with-recode=/usr \\\n    --with-mysqli=mysqlnd \\\n    --enable-mysqlnd \\\n    --with-pdo-mysql=mysqlnd \\\n    --with-readline \\\n    --with-apxs2=/usr/sbin/apxs\n\n\u6210\u529f\u3057\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u307e\u3059\u3002\n# make && make install\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\nYou may want to add: /usr/local/lib/php to your php.ini include_path\n/usr/local/src/php-7.0.6/build/shtool install -c ext/phar/phar.phar /usr/local/bin\nln -s -f phar.phar /usr/local/bin/phar\nInstalling PDO headers:           /usr/local/include/php/ext/pdo/\n\n\nPHP\u306e\u8a2d\u5b9a\nphp.ini\u3092\u8a2d\u7f6e\u3057\u307e\u3059\u3002\n/etc\u306b\u7f6e\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u6240\u5b9a\u306e\u4f4d\u7f6e\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n# cp /etc/php.ini /usr/local/lib\n# vi /usr/local/lib/php.ini\n\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\ninclude_path = \"/usr/local/lib/php\"\n\n\nApache\u306e\u8a2d\u5b9a\nApache\u3067PHP\u3092\u6271\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n# vi /etc/httpd/conf/httpd.conf\n\n\u4ee5\u4e0b\u3092\u8ffd\u52a0\n<IfModule mod_php7.c>\n  AddType application/x-httpd-php .php\n</IfModule>\n\n\u4ee5\u4e0b\u3092\u7de8\u96c6\uff08index.php\u3092\u8ffd\u52a0\uff09\nDirectoryIndex index.html index.html.var index.php\n\nApache\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n# service httpd restart\n\n# vi /var/www/html/info.php\n\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\n<?php\n\nphpinfo();\n\nhttp://192.168.33.10/info.php \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\nphpinfo\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\nPDO\u306e\u30c6\u30b9\u30c8\nPDO\u304c\u4f7f\u3048\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002dev\u3068\u3044\u3046DB\u3068\nusers\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u524d\u63d0\u3067\u9032\u3081\u307e\u3059\u3002\n# vi /var/www/html/pdotest.php\n\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\n<?php\n\n$dsn = 'mysql:dbname=dev; host=localhost; charset=utf8';\n$name = '\u30e6\u30fc\u30b6\u30fc\u540d';\n$password = '\u30d1\u30b9\u30ef\u30fc\u30c9';\n\ntry{\n    $db = new PDO($dsn, $name, $password);\n    $stt = $db->prepare(\"select * from users\");\n    $stt->execute();\n    while ($row = $stt->fetch(PDO::FETCH_ASSOC)) {\n        var_dump($row);\n    }\n    echo \"\u6b63\u5e38\u7d42\u4e86\";\n} catch(PDOException $e){\n    echo $e->getMessage();\n}\n\nPermission Denied \u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u969b\u306fSELinux\u304c\u6709\u52b9\u3067\u3042\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n# getenforce\nEnforcing\n\n# vi /etc/sysconfig/selinux\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3057\u3066\u4fdd\u5b58\u3057\u3066\u3001\u518d\u8d77\u52d5\nSELINUX=disabled\n\n\u306a\u304a\u3001MySQL(MariaDB)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3000http://qiita.com/d-dai/items/9b20c47402a8fc5f1a6a\u3000\n\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n# \u74b0\u5883\u69cb\u7bc9\u306b\u3064\u304b\u3046\u3082\u306e\n\nCentOS 6.7\u306bPHP\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u74b0\u5883\u69cb\u7bc9\u306b\u306f\u4ee5\u4e0b\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n- Vagrant\n- VirtualBox\n- [CentOS 6.7 64\u30d3\u30c3\u30c8 Vagrant\u30dc\u30c3\u30af\u30b9](https://github.com/CommanderK5/packer-centos-template/releases/download/0.6.7/vagrant-centos-6.7.box)\n- PHP7.0.6 \n\n\u3082\u3061\u308d\u3093Vagrant\u306f\u4f7f\u308f\u306a\u304f\u3066\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\nVagrant\u306e\u64cd\u4f5c\u65b9\u6cd5\u306f\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u3002\n\n# Apache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u306fApache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nApache\u306fyum\u3067\u5165\u308c\u307e\u3059\u3002\n\n```\n$ su -\n# yum install -y httpd\n```\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```\nvi /etc/httpd/conf/httpd.conf\n\n\u2193\u4ee5\u4e0b\u3092\u8ffd\u8a18\nServerName localhost:80\n\n```\n\n\u7acb\u3061\u4e0a\u304c\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n# service httpd start\n```\n\nhttp://192.168.33.10 \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\nIP\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nOS\u8d77\u52d5\u6642\u306b\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n# chkconfig --add httpd\n```\n\n# \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nPHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n# yum install -y httpd-devel libxml2-devel bzip2-devel curl-devel libjpeg-devel libpng-devel libXpm-devel freetype freetype-devel aspell-devel recode-devel openssl-devel gmp-devel readline-devel\n```\n\n\nhttp://qiita.com/soundws/items/cc84da42419f1ab3443b \u3092\u53c2\u8003\u306b\u3057\u3066\u3001\nyum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n# wget http://ftp.riken.jp/Linux/fedora/epel/RPM-GPG-KEY-EPEL-6\n# rpm --import RPM-GPG-KEY-EPEL-6 \n# rm -f RPM-GPG-KEY-EPEL-6 \n# vi /etc/yum.repos.d/epel.repo\n# \u4ee5\u4e0b\u306e\u5185\u5bb9\u3067\u65b0\u898f\u4f5c\u6210\n[epel]\nname=EPEL RPM Repository for Red Hat Enterprise Linux\nbaseurl=http://ftp.riken.jp/Linux/fedora/epel/6/$basearch/\ngpgcheck=1\nenabled=0\n```\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n# yum --enablerepo=epel install -y libmcrypt php-mcrypt libmcrypt-devel php-mcrypt-devel\n```\n\n\n\n# PHP\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\n# cd /usr/local/src\n# wget -O php-7.0.6.bz2 http://jp2.php.net/get/php7.0.6.tar.bz2/from/this/mirror\n# tar jvxf php-7.0.6.bz2\n```\n\n# PHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n\n```\n# cd php-7.0.6\n# ./configure \\\n    --enable-mbstring \\\n    --enable-zip \\\n    --enable-bcmath \\\n    --enable-pcntl \\\n    --enable-ftp \\\n    --enable-exif \\\n    --enable-calendar \\\n    --enable-sysvmsg \\\n    --enable-sysvsem \\\n    --enable-sysvshm \\\n    --enable-wddx \\\n    --with-curl \\\n    --with-mcrypt \\\n    --with-iconv \\\n    --with-gmp \\\n    --with-pspell \\\n    --with-gd \\\n    --with-jpeg-dir=/usr \\\n    --with-png-dir=/usr \\\n    --with-zlib-dir=/usr \\\n    --with-xpm-dir=/usr \\\n    --with-freetype-dir=/usr \\\n    --enable-gd-native-ttf \\\n    --enable-gd-jis-conv \\\n    --with-openssl \\\n    --with-gettext=/usr \\\n    --with-zlib=/usr \\\n    --with-bz2=/usr \\\n    --with-recode=/usr \\\n    --with-mysqli=mysqlnd \\\n    --enable-mysqlnd \\\n    --with-pdo-mysql=mysqlnd \\\n    --with-readline \\\n    --with-apxs2=/usr/sbin/apxs\n```\n\n\u6210\u529f\u3057\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u307e\u3059\u3002\n\n```\n# make && make install\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n```\nYou may want to add: /usr/local/lib/php to your php.ini include_path\n/usr/local/src/php-7.0.6/build/shtool install -c ext/phar/phar.phar /usr/local/bin\nln -s -f phar.phar /usr/local/bin/phar\nInstalling PDO headers:           /usr/local/include/php/ext/pdo/\n```\n\n# PHP\u306e\u8a2d\u5b9a\n\nphp.ini\u3092\u8a2d\u7f6e\u3057\u307e\u3059\u3002\n/etc\u306b\u7f6e\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u6240\u5b9a\u306e\u4f4d\u7f6e\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```\n# cp /etc/php.ini /usr/local/lib\n# vi /usr/local/lib/php.ini\n\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\ninclude_path = \"/usr/local/lib/php\"\n```\n\n# Apache\u306e\u8a2d\u5b9a\n\nApache\u3067PHP\u3092\u6271\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```\n# vi /etc/httpd/conf/httpd.conf\n\n\u4ee5\u4e0b\u3092\u8ffd\u52a0\n<IfModule mod_php7.c>\n  AddType application/x-httpd-php .php\n</IfModule>\n\n\u4ee5\u4e0b\u3092\u7de8\u96c6\uff08index.php\u3092\u8ffd\u52a0\uff09\nDirectoryIndex index.html index.html.var index.php\n```\n\nApache\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n# service httpd restart\n```\n\n\n```\n# vi /var/www/html/info.php\n\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\n<?php\n\nphpinfo();\n```\n\nhttp://192.168.33.10/info.php \u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\nphpinfo\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\n\n# PDO\u306e\u30c6\u30b9\u30c8\n\nPDO\u304c\u4f7f\u3048\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002**dev**\u3068\u3044\u3046DB\u3068\n**users**\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u524d\u63d0\u3067\u9032\u3081\u307e\u3059\u3002\n\n```\n# vi /var/www/html/pdotest.php\n\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\n<?php\n\n$dsn = 'mysql:dbname=dev; host=localhost; charset=utf8';\n$name = '\u30e6\u30fc\u30b6\u30fc\u540d';\n$password = '\u30d1\u30b9\u30ef\u30fc\u30c9';\n\ntry{\n    $db = new PDO($dsn, $name, $password);\n    $stt = $db->prepare(\"select * from users\");\n    $stt->execute();\n    while ($row = $stt->fetch(PDO::FETCH_ASSOC)) {\n        var_dump($row);\n    }\n    echo \"\u6b63\u5e38\u7d42\u4e86\";\n} catch(PDOException $e){\n    echo $e->getMessage();\n}\n```\n\n**Permission Denied** \u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u969b\u306fSELinux\u304c\u6709\u52b9\u3067\u3042\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\n# getenforce\nEnforcing\n\n# vi /etc/sysconfig/selinux\n\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3057\u3066\u4fdd\u5b58\u3057\u3066\u3001\u518d\u8d77\u52d5\nSELINUX=disabled\n```\n\n\u306a\u304a\u3001MySQL(MariaDB)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3000http://qiita.com/d-dai/items/9b20c47402a8fc5f1a6a\u3000\n\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n", "tags": ["PHP", "PHP7", "CentOS"]}