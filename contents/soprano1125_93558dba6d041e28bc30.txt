{"context": " More than 1 year has passed since last update.\n\ninstall\nmake \u306a\u308a portinstall \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\nconsole1\n# cd /usr/ports/www/tomcat7\n# make config-recursive\n# make install clean\n\n\n\nmake base dir\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308b\u3002 \nTomcat \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30d1\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u30ea\u30f3\u30af\u3092\u8cbc\u3063\u305f\u308a\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3084 conf \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30b3\u30d4\u30fc\u3001\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002 (\u5fc5\u8981\u3067\u3042\u308c\u3070\u30dd\u30fc\u30c8\u756a\u53f7\u3082\u5909\u66f4\u3002)\n(\u8a2d\u5b9a\u65b9\u6cd5\u306f\u5272\u611b)\n\nconsole2\n# mkdir -p /usr/local/tomcat/tomcat7_1\n# cd /usr/local/tomcat/tomcat7_1\n# ln -s /usr/local/apache-tomcat-7.0/bin .\n# ln -s /usr/local/apache-tomcat-7.0/endorsed .\n# ln -s /usr/local/apache-tomcat-7.0/lib .\n# ln -s /usr/local/apache-tomcat-7.0/logs .\n# ln -s /usr/local/apache-tomcat-7.0/temp .\n# ln -s /usr/local/apache-tomcat-7.0/webapps .\n# ln -s /usr/local/apache-tomcat-7.0/work .\n# cp -R /usr/local/apache-tomcat-7.0/conf .\n# cp /usr/local/etc/rc.d/tomcat7 /usr/local/etc/rc.d/tomcat7_1\n\n\n\ntouch init script\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\u306a\u3093\u3060\u304b\u30d1\u30b9\u304c\u30cf\u30fc\u30c9\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3055\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u3063\u305f\u306e\u3067\u5909\u6570\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002(\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3055\u308c\u305f\u3089\u6ce3\u304f\u306e\u304b\u306a\u3001\u3001\u3001w)\n\nconsole3\n# diff tomcat7 tomcat7_1\n86,87c86,87\n< eval \"_tomcat_catalina_home='/usr/local/apache-tomcat-7.0'\"\n< eval \"_tomcat_catalina_base=\\${${name}_catalina_base:-'/usr/local/apache-tomcat-7.0'}\"\n---\n> eval \"_tomcat_catalina_home='/usr/local/tomcat/${name}'\"\n> eval \"_tomcat_catalina_base=\\${${name}_catalina_base:-'${_tomcat_catalina_home}'}\"\n95,96c95,96\n< eval \"_tomcat_java_opts=\\${${name}_java_opts:-''}\"\n< eval \"_tomcat_wait=\\${${name}_wait:-'30'}\"\n---\n> eval \"_tomcat_java_opts=\\${${name}_java_opts:-''}\\ \\${tomcat7_java_opts:-''}\"\n> eval \"_tomcat_wait=\\${${name}_wait:-'60'}\"\n113c113\n<       -classpath '/usr/local/apache-tomcat-7.0/bin/bootstrap.jar:/usr/local/share/java/classes/commons-daemon.jar:/usr/local/apache-tomcat-7.0/bin/tomcat-juli.jar${_tomcat_classpath}' \\\n---\n>       -classpath '${_tomcat_catalina_home}/bin/bootstrap.jar:/usr/local/share/java/classes/commons-daemon.jar:${_tomcat_catalina_home}/bin/tomcat-juli.jar${_tomcat_classpath}' \\\n117c117\n<       -Djava.endorsed.dirs='/usr/local/apache-tomcat-7.0/endorsed' \\\n---\n>       -Djava.endorsed.dirs='${_tomcat_catalina_home}/endorsed' \\\n\n\n\nclone Tomcat\n\u5f8c\u306f\u3001\u30d9\u30fc\u30b9\u3092\u30b3\u30d4\u30fc\u3057\u3066\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u3048\u308b\u3002\n(\u8a2d\u5b9a\u65b9\u6cd5\u306f\u5272\u611b)\n\nconsole3\n# cd /usr/local/tomcat/\n# cp -R tomcat7_1 tomcat7_2\n# cp /usr/local/etc/rc.d/tomcat7_1 /usr/local/etc/rc.d/tomcat7_2\n\n\n##install\nmake \u306a\u308a portinstall \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```console:console1\n# cd /usr/ports/www/tomcat7\n# make config-recursive\n# make install clean\n```\n\n##make base dir\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308b\u3002 \nTomcat \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30d1\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u30ea\u30f3\u30af\u3092\u8cbc\u3063\u305f\u308a\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3084 conf \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30b3\u30d4\u30fc\u3001\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002 (\u5fc5\u8981\u3067\u3042\u308c\u3070\u30dd\u30fc\u30c8\u756a\u53f7\u3082\u5909\u66f4\u3002)\n(\u8a2d\u5b9a\u65b9\u6cd5\u306f\u5272\u611b)\n\n```console:console2\n# mkdir -p /usr/local/tomcat/tomcat7_1\n# cd /usr/local/tomcat/tomcat7_1\n# ln -s /usr/local/apache-tomcat-7.0/bin .\n# ln -s /usr/local/apache-tomcat-7.0/endorsed .\n# ln -s /usr/local/apache-tomcat-7.0/lib .\n# ln -s /usr/local/apache-tomcat-7.0/logs .\n# ln -s /usr/local/apache-tomcat-7.0/temp .\n# ln -s /usr/local/apache-tomcat-7.0/webapps .\n# ln -s /usr/local/apache-tomcat-7.0/work .\n# cp -R /usr/local/apache-tomcat-7.0/conf .\n# cp /usr/local/etc/rc.d/tomcat7 /usr/local/etc/rc.d/tomcat7_1\n```\n\n## touch init script\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\u306a\u3093\u3060\u304b\u30d1\u30b9\u304c\u30cf\u30fc\u30c9\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3055\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u3063\u305f\u306e\u3067\u5909\u6570\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002(\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3055\u308c\u305f\u3089\u6ce3\u304f\u306e\u304b\u306a\u3001\u3001\u3001w)\n\n```console:console3\n# diff tomcat7 tomcat7_1\n86,87c86,87\n< eval \"_tomcat_catalina_home='/usr/local/apache-tomcat-7.0'\"\n< eval \"_tomcat_catalina_base=\\${${name}_catalina_base:-'/usr/local/apache-tomcat-7.0'}\"\n---\n> eval \"_tomcat_catalina_home='/usr/local/tomcat/${name}'\"\n> eval \"_tomcat_catalina_base=\\${${name}_catalina_base:-'${_tomcat_catalina_home}'}\"\n95,96c95,96\n< eval \"_tomcat_java_opts=\\${${name}_java_opts:-''}\"\n< eval \"_tomcat_wait=\\${${name}_wait:-'30'}\"\n---\n> eval \"_tomcat_java_opts=\\${${name}_java_opts:-''}\\ \\${tomcat7_java_opts:-''}\"\n> eval \"_tomcat_wait=\\${${name}_wait:-'60'}\"\n113c113\n<       -classpath '/usr/local/apache-tomcat-7.0/bin/bootstrap.jar:/usr/local/share/java/classes/commons-daemon.jar:/usr/local/apache-tomcat-7.0/bin/tomcat-juli.jar${_tomcat_classpath}' \\\n---\n>       -classpath '${_tomcat_catalina_home}/bin/bootstrap.jar:/usr/local/share/java/classes/commons-daemon.jar:${_tomcat_catalina_home}/bin/tomcat-juli.jar${_tomcat_classpath}' \\\n117c117\n<       -Djava.endorsed.dirs='/usr/local/apache-tomcat-7.0/endorsed' \\\n---\n>       -Djava.endorsed.dirs='${_tomcat_catalina_home}/endorsed' \\\n```\n\n## clone Tomcat\n\u5f8c\u306f\u3001\u30d9\u30fc\u30b9\u3092\u30b3\u30d4\u30fc\u3057\u3066\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u3048\u308b\u3002\n(\u8a2d\u5b9a\u65b9\u6cd5\u306f\u5272\u611b)\n\n```console:console3\n# cd /usr/local/tomcat/\n# cp -R tomcat7_1 tomcat7_2\n# cp /usr/local/etc/rc.d/tomcat7_1 /usr/local/etc/rc.d/tomcat7_2\n```", "tags": ["Tomcat", "Java", "FreeBSD"]}