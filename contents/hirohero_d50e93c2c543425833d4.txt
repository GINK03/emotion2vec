{"context": "\u3061\u3087\u3063\u3068\u3057\u305f\u30c8\u30ea\u30c3\u30af\u3092\u601d\u3044\u3064\u3044\u305f\u306e\u3067\u3001\u5099\u5fd8\u9332\u3002\nLaravel(lumen)\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3001PHPUnit\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(phpunit.xml)\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\nphpunit.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"bootstrap/autoload.php\"\n         colors=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\">\n    <testsuites>\n        <testsuite name=\"Feature Tests\">\n            <directory suffix=\"Test.php\">./tests/Feature</directory>\n        </testsuite>\n\n        <testsuite name=\"Unit Tests\">\n            <directory suffix=\"Test.php\">./tests/Unit</directory>\n        </testsuite>\n    </testsuites>\n    <filter>\n        <whitelist processUncoveredFilesFromWhitelist=\"true\">\n            <directory suffix=\".php\">./app</directory>\n        </whitelist>\n    </filter>\n    <php>\n        <env name=\"APP_ENV\" value=\"testing\"/>\n        <env name=\"CACHE_DRIVER\" value=\"array\"/>\n        <env name=\"SESSION_DRIVER\" value=\"array\"/>\n        <env name=\"QUEUE_DRIVER\" value=\"sync\"/>\n    </php>\n</phpunit>\n\n\n\u30c6\u30b9\u30c8\u7528\u306e\u74b0\u5883\u5909\u6570\u8a2d\u5b9a\u306f<php>\u8981\u7d20\u306e<env>\u8981\u7d20\u306b\u8a18\u8ff0\u3059\u308b\u308f\u3051\u3067\u3059\u304c\u3001laravel(lumen)\u3067\u306f\u74b0\u5883\u5909\u6570\u306e\u5207\u308a\u66ff\u3048\u306fDotEnv\u3067\u884c\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u304b\u3089\u3001\u3053\u308c\u3082.env\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8ff0\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u305b\u3093\u304b\uff1f\n\u3067\u306f\u3001\u3053\u3093\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\ntests/bootstrap.php\n<?php\nrequire_once __DIR__.'/../vendor/autoload.php';\n\ntry {\n    (new Dotenv\\Dotenv(__DIR__))->load();\n} catch (Dotenv\\Exception\\InvalidPathException $e) {\n    echo \".env for test is missing.\";\n    exit(1);\n}\n\nrequire_once 'bootstrap/app.php';\n\n\ntests/.env\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u672c\u6765\u306ebootstrap\u30d5\u30a1\u30a4\u30eb\u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u306e\u30e9\u30c3\u30d1\u30fc\u3067\u3059\u3002\n\ntests/.env\nAPP_ENV=testing\n\nCACHE_DRIVER=array\nSESSION_DRIVER=array\nQUEUE_DRIVER=sync\n\n\n\u6700\u5f8c\u306b\u306fphpunit.xml\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\nbootstrap=\u3092\u5148\u7a0b\u306etests/bootstrap.php\u306b\u7f6e\u304d\u63db\u3048\u3066\u3001<php>\u8981\u7d20\u3092\u30d0\u30c3\u30b5\u30ea\u524a\u9664\u3059\u308c\u3070OK\u3067\u3059\u3002\n\nphpunit.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"tests/bootstrap.php\"\n         colors=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\">\n    <testsuites>\n        <testsuite name=\"Feature Tests\">\n            <directory suffix=\"Test.php\">./tests/Feature</directory>\n        </testsuite>\n\n        <testsuite name=\"Unit Tests\">\n            <directory suffix=\"Test.php\">./tests/Unit</directory>\n        </testsuite>\n    </testsuites>\n    <filter>\n        <whitelist processUncoveredFilesFromWhitelist=\"true\">\n            <directory suffix=\".php\">./app</directory>\n        </whitelist>\n    </filter>\n</phpunit>\n\n\n\u3053\u308c\u3067phpunit\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b7\u30fc\u30b1\u30f3\u30b9\u3067\u51e6\u7406\u304c\u6d41\u308c\u307e\u3059\u3002\nphpunit(phpunit.xml) \u2192 tests/bootstrap.php \uff08\u3053\u3053\u3067tests/.env\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\uff09 \u2192 bootstrap/app.php\n\u3053\u3046\u3044\u3046\u4ed5\u7d44\u307f\u3092\u5c0e\u5165\u3057\u3066\u304a\u304f\u3068\u3001\u4ed6\u306e\u30c6\u30b9\u30c8\u30c9\u30e9\u30a4\u30d0\u304b\u3089PHPUnit\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408\u3082\u540c\u3058\u4ed5\u7d44\u307f\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u4f8b\u3048\u3070Phing\u306ePHPUnit\u30bf\u30b9\u30af\u304b\u3089\u30c6\u30b9\u30c8\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u3001bootstrap\u306btests/bootstrap.php\u3092\u6307\u5b9a\u3059\u308c\u3070OK\u3067\u3059\u3002\n\nbuild.xml\n    <phpunit codecoverage=\"true\" bootstrap=\"tests/bootstrap.php\">\n        <batchtest>\n            <fileset dir=\".\">\n                <include name=\"tests/**/*Test.php\" />\n            </fileset>\n        </batchtest>\n    </phpunit>\n\n\n\u3061\u3087\u3063\u3068\u3057\u305f\u30c8\u30ea\u30c3\u30af\u3092\u601d\u3044\u3064\u3044\u305f\u306e\u3067\u3001\u5099\u5fd8\u9332\u3002\n\nLaravel(lumen)\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3001PHPUnit\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(phpunit.xml)\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n```xml:phpunit.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"bootstrap/autoload.php\"\n         colors=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\">\n    <testsuites>\n        <testsuite name=\"Feature Tests\">\n            <directory suffix=\"Test.php\">./tests/Feature</directory>\n        </testsuite>\n\n        <testsuite name=\"Unit Tests\">\n            <directory suffix=\"Test.php\">./tests/Unit</directory>\n        </testsuite>\n    </testsuites>\n    <filter>\n        <whitelist processUncoveredFilesFromWhitelist=\"true\">\n            <directory suffix=\".php\">./app</directory>\n        </whitelist>\n    </filter>\n    <php>\n        <env name=\"APP_ENV\" value=\"testing\"/>\n        <env name=\"CACHE_DRIVER\" value=\"array\"/>\n        <env name=\"SESSION_DRIVER\" value=\"array\"/>\n        <env name=\"QUEUE_DRIVER\" value=\"sync\"/>\n    </php>\n</phpunit>\n```\n\n\u30c6\u30b9\u30c8\u7528\u306e\u74b0\u5883\u5909\u6570\u8a2d\u5b9a\u306f`<php>`\u8981\u7d20\u306e`<env>`\u8981\u7d20\u306b\u8a18\u8ff0\u3059\u308b\u308f\u3051\u3067\u3059\u304c\u3001laravel(lumen)\u3067\u306f\u74b0\u5883\u5909\u6570\u306e\u5207\u308a\u66ff\u3048\u306f`DotEnv`\u3067\u884c\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u304b\u3089\u3001\u3053\u308c\u3082`.env`\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8ff0\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u305b\u3093\u304b\uff1f\n\n\u3067\u306f\u3001\u3053\u3093\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\n```php:tests/bootstrap.php\n<?php\nrequire_once __DIR__.'/../vendor/autoload.php';\n\ntry {\n    (new Dotenv\\Dotenv(__DIR__))->load();\n} catch (Dotenv\\Exception\\InvalidPathException $e) {\n    echo \".env for test is missing.\";\n    exit(1);\n}\n\nrequire_once 'bootstrap/app.php';\n```\n\n`tests/.env`\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u672c\u6765\u306ebootstrap\u30d5\u30a1\u30a4\u30eb\u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u306e\u30e9\u30c3\u30d1\u30fc\u3067\u3059\u3002\n\n```:tests/.env\nAPP_ENV=testing\n\nCACHE_DRIVER=array\nSESSION_DRIVER=array\nQUEUE_DRIVER=sync\n```\n\n\u6700\u5f8c\u306b\u306f`phpunit.xml`\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n`bootstrap=`\u3092\u5148\u7a0b\u306e`tests/bootstrap.php`\u306b\u7f6e\u304d\u63db\u3048\u3066\u3001`<php>`\u8981\u7d20\u3092\u30d0\u30c3\u30b5\u30ea\u524a\u9664\u3059\u308c\u3070OK\u3067\u3059\u3002\n\n```xml:phpunit.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit backupGlobals=\"false\"\n         backupStaticAttributes=\"false\"\n         bootstrap=\"tests/bootstrap.php\"\n         colors=\"true\"\n         convertErrorsToExceptions=\"true\"\n         convertNoticesToExceptions=\"true\"\n         convertWarningsToExceptions=\"true\"\n         processIsolation=\"false\"\n         stopOnFailure=\"false\">\n    <testsuites>\n        <testsuite name=\"Feature Tests\">\n            <directory suffix=\"Test.php\">./tests/Feature</directory>\n        </testsuite>\n\n        <testsuite name=\"Unit Tests\">\n            <directory suffix=\"Test.php\">./tests/Unit</directory>\n        </testsuite>\n    </testsuites>\n    <filter>\n        <whitelist processUncoveredFilesFromWhitelist=\"true\">\n            <directory suffix=\".php\">./app</directory>\n        </whitelist>\n    </filter>\n</phpunit>\n```\n\n\u3053\u308c\u3067phpunit\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b7\u30fc\u30b1\u30f3\u30b9\u3067\u51e6\u7406\u304c\u6d41\u308c\u307e\u3059\u3002\n`phpunit(phpunit.xml)` \u2192 `tests/bootstrap.php` \uff08\u3053\u3053\u3067`tests/.env`\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\uff09 \u2192 `bootstrap/app.php`\n\n\n\u3053\u3046\u3044\u3046\u4ed5\u7d44\u307f\u3092\u5c0e\u5165\u3057\u3066\u304a\u304f\u3068\u3001\u4ed6\u306e\u30c6\u30b9\u30c8\u30c9\u30e9\u30a4\u30d0\u304b\u3089PHPUnit\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408\u3082\u540c\u3058\u4ed5\u7d44\u307f\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u4f8b\u3048\u3070Phing\u306ePHPUnit\u30bf\u30b9\u30af\u304b\u3089\u30c6\u30b9\u30c8\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u3001`bootstrap`\u306b`tests/bootstrap.php`\u3092\u6307\u5b9a\u3059\u308c\u3070OK\u3067\u3059\u3002\n\n```xml:build.xml\n    <phpunit codecoverage=\"true\" bootstrap=\"tests/bootstrap.php\">\n        <batchtest>\n            <fileset dir=\".\">\n                <include name=\"tests/**/*Test.php\" />\n            </fileset>\n        </batchtest>\n    </phpunit>\n```\n", "tags": ["laravel", "lumen", "PHPUnit", "dotenv", "tips"]}