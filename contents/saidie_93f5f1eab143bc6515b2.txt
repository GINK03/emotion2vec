{"context": "\u4f8b\u3048\u3070\u3001\u3053\u3093\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u3042\u3063\u3066\u3001\n<source>\n  @type forward\n</source>\n\n<match hoge.**>\n  # ...\n</match>\n\n<match **>\n  @type file\n  path /tmp/td-agent.log\n</match>\n\n\u30bf\u30b0\u3092 typo \u3059\u308b\u3068\u304b\u3057\u3066 /tmp/td-agent.log.* \u306b\n2016-12-25T12:34:56+09:00       hgoe    {\"merry\":\"xmas\"}\n\n\u3053\u3093\u306a\u30ed\u30b0\u304c\u5410\u304d\u51fa\u3055\u308c\u305f\u6642\u306b\u3001\u3053\u308c\u3092\u518d\u9001\u3059\u308b\u305f\u3081\u306e\u96d1\u306a\u30b3\u30fc\u30c9\u304c\u3053\u3061\u3089\u3002\n\nretry.rb\nrequire 'time'\nrequire 'json'\nrequire 'fluent-logger'\n\nlogger = Fluent::Logger::FluentLogger.new\nSTDIN.each_line do |l|\n  time, tag, msg = l.split(\"\\t\")\n  time = Time.parse(time)\n  map = JSON.load(msg)\n  logger.post_with_time(tag.sub(/hgoe/, 'hoge'), map, time)\nend\n\n\n(\u203bout_file \u306e format \u3068\u304b delimiter \u304c\u9055\u3063\u3066\u305f\u3089\u305d\u308c\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3059\u308b\u5fc5\u8981\u3042\u308a)\ncat /tmp/td-agent.log* | grep hgoe | ruby retry.rb \u307f\u305f\u3044\u306b\u5b9f\u884c\u3059\u308b\u3002\n\u4f8b\u3048\u3070\u3001\u3053\u3093\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u3042\u3063\u3066\u3001\n\n```apache\n<source>\n  @type forward\n</source>\n\n<match hoge.**>\n  # ...\n</match>\n\n<match **>\n  @type file\n  path /tmp/td-agent.log\n</match>\n```\n\u30bf\u30b0\u3092 typo \u3059\u308b\u3068\u304b\u3057\u3066 `/tmp/td-agent.log.*` \u306b\n\n```\n2016-12-25T12:34:56+09:00       hgoe    {\"merry\":\"xmas\"}\n```\n\n\u3053\u3093\u306a\u30ed\u30b0\u304c\u5410\u304d\u51fa\u3055\u308c\u305f\u6642\u306b\u3001\u3053\u308c\u3092\u518d\u9001\u3059\u308b\u305f\u3081\u306e\u96d1\u306a\u30b3\u30fc\u30c9\u304c\u3053\u3061\u3089\u3002\n\n```ruby:retry.rb\nrequire 'time'\nrequire 'json'\nrequire 'fluent-logger'\n\nlogger = Fluent::Logger::FluentLogger.new\nSTDIN.each_line do |l|\n  time, tag, msg = l.split(\"\\t\")\n  time = Time.parse(time)\n  map = JSON.load(msg)\n  logger.post_with_time(tag.sub(/hgoe/, 'hoge'), map, time)\nend\n```\n(\u203b`out_file` \u306e `format` \u3068\u304b `delimiter` \u304c\u9055\u3063\u3066\u305f\u3089\u305d\u308c\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3059\u308b\u5fc5\u8981\u3042\u308a)\n\n`cat /tmp/td-agent.log* | grep hgoe | ruby retry.rb` \u307f\u305f\u3044\u306b\u5b9f\u884c\u3059\u308b\u3002\n", "tags": ["fluentd"]}