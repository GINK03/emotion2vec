{"context": " More than 1 year has passed since last update.Twitter\u306eJSON\u306b\u306f\u4e00\u90e8Unicode\u3067\u306f\u306a\u3044(?)\u6587\u5b57\u304c\u6df7\u3058\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308b\u3089\u3057\u304f\u3001\u3053\u308c\u304cD\u8a00\u8a9e\u306estd.json.parseJSON\u3067\u89e3\u6790\u306b\u5931\u6557\u3059\u308b\u539f\u56e0\u3068\u306a\u308b\u3002\nstd.json.parseJSON\u306b\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u306b\u51fa\u4f1a\u3063\u305f\u6642\u306b\u7f6e\u63db\u3057\u305f\u308a\u3059\u308b\u3088\u3046\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u5099\u308f\u3063\u3066\u3044\u306a\u3044\u3002(std.csv\u306b\u306f\u5099\u308f\u3063\u3066\u3044\u3066\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u304b\u7121\u8996\u3059\u308b\u304b\u3092\u9078\u629e\u53ef\u80fd)\n\u305d\u306e\u305f\u3081\u3001\u4e88\u3081\u3053\u308c\u3089\u306e\u6587\u5b57\u5217\u3092\u4f55\u304b\u3057\u3089\u306b\u7f6e\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u4eca\u56de\u306fstd.json\u306f\u3042\u308b\u7a0b\u5ea6\u89e3\u6790\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3042\u308b\u3068\u5272\u308a\u304d\u3063\u3066\u3001regex\u3092\u4f7f\u3063\u3066\u7f6e\u63db\u3092\u8a66\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\nimport std.json, std.utf, std.regex, std.uni, std.ascii;\n\nJSONValue toJSONValue(string contents)\n{\n    enum r = ctRegex!r\"\\\\u([0-9a-fA-F]{4})\";\n    string func(Captures!string c)\n    {\n        dchar val = 0;\n        char[4] buf = void;\n        auto str = c[1].toUpper();\n        foreach (i, ch; str)\n            val += (isDigit(ch) ? ch - '0' : ch - ('A' - 10)) << (4 * (3-i));\n        return isValidDchar(val) ? toUTF8(buf, val).idup : \"\u25a1\";\n    }\n    return contents.replaceAll!func(r).parseJSON();\n}\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u7121\u52b9\u6587\u5b57\u3092\u7f6e\u63db\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3084\u308b\u3053\u3068\u3067\u3001\u89e3\u6790\u3092\u884c\u3046\u4e8b\u304c\u3067\u304d\u308b\u3002\nTwitter\u306eJSON\u306b\u306f\u4e00\u90e8Unicode\u3067\u306f\u306a\u3044(?)\u6587\u5b57\u304c\u6df7\u3058\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308b\u3089\u3057\u304f\u3001\u3053\u308c\u304cD\u8a00\u8a9e\u306e`std.json.parseJSON`\u3067\u89e3\u6790\u306b\u5931\u6557\u3059\u308b\u539f\u56e0\u3068\u306a\u308b\u3002\n`std.json.parseJSON`\u306b\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u306b\u51fa\u4f1a\u3063\u305f\u6642\u306b\u7f6e\u63db\u3057\u305f\u308a\u3059\u308b\u3088\u3046\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u5099\u308f\u3063\u3066\u3044\u306a\u3044\u3002(std.csv\u306b\u306f\u5099\u308f\u3063\u3066\u3044\u3066\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u304b\u7121\u8996\u3059\u308b\u304b\u3092\u9078\u629e\u53ef\u80fd)\n\u305d\u306e\u305f\u3081\u3001\u4e88\u3081\u3053\u308c\u3089\u306e\u6587\u5b57\u5217\u3092\u4f55\u304b\u3057\u3089\u306b\u7f6e\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u4eca\u56de\u306fstd.json\u306f\u3042\u308b\u7a0b\u5ea6\u89e3\u6790\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3042\u308b\u3068\u5272\u308a\u304d\u3063\u3066\u3001regex\u3092\u4f7f\u3063\u3066\u7f6e\u63db\u3092\u8a66\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\n\n```d\nimport std.json, std.utf, std.regex, std.uni, std.ascii;\n\nJSONValue toJSONValue(string contents)\n{\n\tenum r = ctRegex!r\"\\\\u([0-9a-fA-F]{4})\";\n\tstring func(Captures!string c)\n\t{\n\t\tdchar val = 0;\n\t\tchar[4] buf = void;\n\t\tauto str = c[1].toUpper();\n\t\tforeach (i, ch; str)\n\t\t\tval += (isDigit(ch) ? ch - '0' : ch - ('A' - 10)) << (4 * (3-i));\n\t\treturn isValidDchar(val) ? toUTF8(buf, val).idup : \"\u25a1\";\n\t}\n\treturn contents.replaceAll!func(r).parseJSON();\n}\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u7121\u52b9\u6587\u5b57\u3092\u7f6e\u63db\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3084\u308b\u3053\u3068\u3067\u3001\u89e3\u6790\u3092\u884c\u3046\u4e8b\u304c\u3067\u304d\u308b\u3002\n", "tags": ["dlang2.067"]}