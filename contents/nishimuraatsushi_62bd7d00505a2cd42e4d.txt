{"context": "\u7814\u7a76\u5ba4\u306b Knowledge \u3092\u5c0e\u5165\u3057\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u7d4c\u7def\n\n\u7814\u7a76\u5ba4\u306e\u60c5\u5831\u5171\u6709\u3092\u9032\u3081\u305f\u3044\n\nwiki \u306f\u3059\u3067\u306b\u5b58\u5728\u3059\u308b\u304c\u66f4\u65b0\u306f\u505c\u6ede\u3057\u304c\u3061\n\n\n\u30ad\u30ec\u30a4\u306a\u968e\u5c64\u69cb\u9020\u3092\u610f\u8b58\u3057\u3066\u3057\u307e\u3044\u3001\u6295\u7a3f\u306e\u5fc3\u7406\u7684\u6577\u5c45\u304c\u9ad8\u3044\uff1f\n\u6295\u7a3f\u306b\u5bfe\u3059\u308b\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u53d6\u308a\u3065\u3089\u3044\n\n\n\nQiita Team \u826f\u3055\u305d\u3046\n\n\n\u3068\u308a\u3042\u3048\u305a\u6295\u7a3f\u3002\u691c\u7d22\u3059\u308b\u306a\u308a\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5f8c\u304b\u3089\u6574\u7406\n\u304c\u3001\u8ca1\u653f\u7684\u306b\u53b3\u3057\u3044 (\u95a2\u4fc2\u8005\u5408\u308f\u305b\u308b\u306830\u4eba\u898f\u6a21)\n\n\n\nKnowledge\n\n\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e Qiita Team \u30af\u30ed\u30fc\u30f3\n\u30c7\u30b6\u30a4\u30f3\u304c\u4eca\u98a8\n\u958b\u767a\u304c\u30a2\u30af\u30c6\u30a3\u30d6\n\n\n\n\n\u5171\u6709\u3057\u305f\u3044\u60c5\u5831\n\n\u671b\u9060\u93e1\u306e\u904b\u7528\u60c5\u5831 (\u88c5\u7f6e\u306e\u60c5\u5831\u3001\u30c8\u30e9\u30d6\u30eb\u5bfe\u51e6\u8a18\u9332)\n\u958b\u767a\u60c5\u5831 (\u8a2d\u8a08\u30fb\u88fd\u4f5c\u306e\u904e\u7a0b)\n\u7814\u7a76\u3092\u9032\u3081\u308b\u4e0a\u3067\u306e Tips (\u30c4\u30fc\u30eb\u306e\u4f7f\u3044\u65b9\u306a\u3069)\n\u5404\u81ea\u306e\u7814\u7a76\u9032\u6357\u5831\u544a\n\u7814\u7a76\u5ba4\u306e\u904b\u55b6\u60c5\u5831 (\u4e8b\u52d9\u624b\u7d9a\u304d\u65b9\u6cd5\u306a\u3069)\n\n\n\u69cb\u6210\n\n\u30b3\u30f3\u30c6\u30ca\u4eee\u60f3\u5316\u304c\u4fbf\u5229\u305d\u3046\nDocker \u304c\u4e00\u756a\u6d41\u884c\u3063\u3066\u3044\u308b\n\n\nKnowledge \u3082 Dockerfile \u3092\u516c\u958b\u3057\u3066\u3044\u308b\n\n\nCore OS \u306a\u308b\u3082\u306e\u304c\u3042\u308b\u305d\u3046\u3060\n\u65e2\u306b\u7814\u7a76\u5ba4 web \u30b5\u30fc\u30d0\u30fc\u304c\u3042\u308b\u306e\u3067\u3001\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3067 Knowledge \u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3055\u305b\u308b\n\n\n\u624b\u9806\n\n1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30c7\u30a3\u30a2\u306e\u6e96\u5099\n\nCore OS \u306e ISO image \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nCD-R \u306b\u713c\u304f\n\n\n2. Core OS \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u65b0\u3057\u3044 PC \u3092\u6e96\u5099\u3057\u3066\u304a\u304f\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30c7\u30a3\u30a2\u304b\u3089\u30d6\u30fc\u30c8\u3059\u308b\n\u56fa\u5b9a IP \u3067\u904b\u7528\u3057\u305f\u3044\u306e\u3067\u3001 network interface \u306e\u540d\u524d\u3092\u8abf\u3079\u3066\u304a\u304f\n\n\nifconfig\n\n\nCore OS \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308b\u3001cloud-config.yml \u3092\u4f5c\u6210\u3059\u308b\n\n\n\u516c\u5f0f : https://coreos.com/os/docs/latest/cloud-config.html\n\n\u53c2\u8003\u306b\u3057\u305f :\n\n\nhttp://qiita.com/ma2shita/items/e069b6019688d8e848f5\nhttp://qiita.com/xshsaku/items/1ba3f930ff80bef685a6\n\n\ncore \u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\n\u56fa\u5b9a IP \u3092\u8a2d\u5b9a\ndocker \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3055\u305b\u3066\u304a\u304f\n\n\n\n#cloud-config\n\ncoreos:\n  update:\n    reboot-strategy: off\n\n  units:\n    -\n      name: coreos-setup-environment.service\n      command: restart\n    - \n      name: systemd-networkd.service\n      command: restart\n    - \n      name: docker.service\n      command: start\n    -\n      name: 10-static.network\n      runtime: no\n      content: |\n        [Match]\n        Name=eno1\n        [Network]\n        Address=192.168.aaa.xxx\n        Gateway=192.168.aaa.yyy\n        DNS=192.168.aaa.zzz\n\nusers:\n  - \n    name: core\n    passwd: `openssl passwd -1` \u3067\u751f\u6210\u3055\u308c\u308b\u30cf\u30c3\u30b7\u30e5\u3092\u66f8\u304d\u8fbc\u3080\n    groups:\n      - sudo\n      - docker\n\n\ncloud-config.yml \u3092 local \u3067\u4f5c\u6210\u3057\u3066 scp \u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u3044\u5834\u5408\n\n\ncore \u30e6\u30fc\u30b6\u30fc\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\n\n\nsudo passwd core\n\n\nscp \u3067\u9001\u308b\n\n\nscp cloud-config.yml coreos-host:\n\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5b9f\u884c\n\n\nsudo coreos-install -d /dev/sda -c cloud-config.yml -v\n\n\n\n\n3. Knowledge \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nCore OS \u306b\u30ed\u30b0\u30a4\u30f3\n\u4f5c\u696d\u5834\u6240\u3092\u4f5c\u6210\n\nmkdir /home/core/knowledge\ncd /home/core/knowledge\n\n\nDockerfile \u3092\u53d6\u5f97\n\nwget https://raw.githubusercontent.com/support-project/docker-knowledge/master/Dockerfile\n\n\ndocker \u3092 build\n\ndocker build -t knowledge:1.3.1 .\n\n\ndocker \u3092\u8d77\u52d5\n\ndocker run -d -p 80:8080 -v /home/core/knowledge:/root/.knowledge knowledge:1.3.1\n\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089 Core OS \u30de\u30b7\u30f3\u306e port 80 \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Knowledge \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u304b\u3081\u308b\n\u521d\u671f\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3092\u65b0\u898f\u4f5c\u6210\u3001\u521d\u671f\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\n\n\n4. \u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a\n\n4.1 Knowledge \u5074\n\n\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u7d4c\u7531\u3057\u3066 https://lab-web-server/knowledge \u306e URL \u3092\u4f7f\u3044\u305f\u3044\u306e\u3067\u3001knowledge \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u3092 /usr/local/tomcat/webapps/ROOT.war \u304b\u3089 /usr/local/tomcat/webapps/knowledge.war \u306b\u5909\u66f4\n\n\nDockerfile \u306e ADD \u304b\u3089\u59cb\u307e\u308b\u884c\u3092\u5909\u66f4\u3059\u308b\n\n\nKnowledge \u306b\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u300c\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u300d - \u300c\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u300d - \u300c\u30b5\u30fc\u30d3\u30b9\u306eURL\u300d \u3092\u9069\u5207\u306b\u5909\u66f4\u3059\u308b\n\n\n4.2 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u5074\n\n\u4f7f\u7528\u3057\u3066\u3044\u308b web server \u306f\u3001apache\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u65b0\u898f\u4f5c\u6210\n\nsudo emacs proxy.conf\n\n\n\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u3092\u8a18\u8ff0\n\n<Location /knowledge/>\n  ProxyPass http://192.168.aaa.xxx/knowledge/\n  ProxyPassReverse http://192.168.aaa.xxx/knowledge/\n  SSLRequireSSL\n</Location>\n\n\napache \u3092\u518d\u8d77\u52d5\n\n\n5. PostgreSQL \u306e\u4f7f\u7528\n\u305d\u306e\u3046\u3061\u8a66\u3059\n\u7814\u7a76\u5ba4\u306b [Knowledge](https://support-project.org/knowledge_info/index) \u3092\u5c0e\u5165\u3057\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n# \u7d4c\u7def\n\n## \u7814\u7a76\u5ba4\u306e\u60c5\u5831\u5171\u6709\u3092\u9032\u3081\u305f\u3044\n\n- wiki \u306f\u3059\u3067\u306b\u5b58\u5728\u3059\u308b\u304c\u66f4\u65b0\u306f\u505c\u6ede\u3057\u304c\u3061\n    - \u30ad\u30ec\u30a4\u306a\u968e\u5c64\u69cb\u9020\u3092\u610f\u8b58\u3057\u3066\u3057\u307e\u3044\u3001\u6295\u7a3f\u306e\u5fc3\u7406\u7684\u6577\u5c45\u304c\u9ad8\u3044\uff1f\n    - \u6295\u7a3f\u306b\u5bfe\u3059\u308b\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u53d6\u308a\u3065\u3089\u3044\n- [Qiita Team](https://teams.qiita.com/) \u826f\u3055\u305d\u3046\n    - \u3068\u308a\u3042\u3048\u305a\u6295\u7a3f\u3002\u691c\u7d22\u3059\u308b\u306a\u308a\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5f8c\u304b\u3089\u6574\u7406\n    - \u304c\u3001\u8ca1\u653f\u7684\u306b\u53b3\u3057\u3044 (\u95a2\u4fc2\u8005\u5408\u308f\u305b\u308b\u306830\u4eba\u898f\u6a21)\n- [Knowledge](https://support-project.org/knowledge_info/index)\n    - \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e Qiita Team \u30af\u30ed\u30fc\u30f3\n    - \u30c7\u30b6\u30a4\u30f3\u304c\u4eca\u98a8\n    - \u958b\u767a\u304c\u30a2\u30af\u30c6\u30a3\u30d6\n\n## \u5171\u6709\u3057\u305f\u3044\u60c5\u5831\n\n- \u671b\u9060\u93e1\u306e\u904b\u7528\u60c5\u5831 (\u88c5\u7f6e\u306e\u60c5\u5831\u3001\u30c8\u30e9\u30d6\u30eb\u5bfe\u51e6\u8a18\u9332)\n- \u958b\u767a\u60c5\u5831 (\u8a2d\u8a08\u30fb\u88fd\u4f5c\u306e\u904e\u7a0b)\n- \u7814\u7a76\u3092\u9032\u3081\u308b\u4e0a\u3067\u306e Tips (\u30c4\u30fc\u30eb\u306e\u4f7f\u3044\u65b9\u306a\u3069)\n- \u5404\u81ea\u306e\u7814\u7a76\u9032\u6357\u5831\u544a\n- \u7814\u7a76\u5ba4\u306e\u904b\u55b6\u60c5\u5831 (\u4e8b\u52d9\u624b\u7d9a\u304d\u65b9\u6cd5\u306a\u3069)\n\n\n## \u69cb\u6210\n\n- \u30b3\u30f3\u30c6\u30ca\u4eee\u60f3\u5316\u304c\u4fbf\u5229\u305d\u3046\n- Docker \u304c\u4e00\u756a\u6d41\u884c\u3063\u3066\u3044\u308b\n    - Knowledge \u3082 [Dockerfile](https://github.com/support-project/docker-knowledge) \u3092\u516c\u958b\u3057\u3066\u3044\u308b\n- Core OS \u306a\u308b\u3082\u306e\u304c\u3042\u308b\u305d\u3046\u3060\n- \u65e2\u306b\u7814\u7a76\u5ba4 web \u30b5\u30fc\u30d0\u30fc\u304c\u3042\u308b\u306e\u3067\u3001\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3067 Knowledge \u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3055\u305b\u308b\n\n# \u624b\u9806\n\n## 1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30c7\u30a3\u30a2\u306e\u6e96\u5099\n\n- Core OS \u306e [ISO image](https://coreos.com/os/docs/latest/booting-with-iso.html) \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n- CD-R \u306b\u713c\u304f\n\n## 2. Core OS \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n- \u65b0\u3057\u3044 PC \u3092\u6e96\u5099\u3057\u3066\u304a\u304f\n- \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30c7\u30a3\u30a2\u304b\u3089\u30d6\u30fc\u30c8\u3059\u308b\n- \u56fa\u5b9a IP \u3067\u904b\u7528\u3057\u305f\u3044\u306e\u3067\u3001 network interface \u306e\u540d\u524d\u3092\u8abf\u3079\u3066\u304a\u304f\n    - `ifconfig`\n- Core OS \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308b\u3001cloud-config.yml \u3092\u4f5c\u6210\u3059\u308b\n    - \u516c\u5f0f : https://coreos.com/os/docs/latest/cloud-config.html\n    - \u53c2\u8003\u306b\u3057\u305f :\n        - http://qiita.com/ma2shita/items/e069b6019688d8e848f5\n        - http://qiita.com/xshsaku/items/1ba3f930ff80bef685a6\n    - core \u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\n    - \u56fa\u5b9a IP \u3092\u8a2d\u5b9a\n    - docker \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3055\u305b\u3066\u304a\u304f\n\n```yml\n#cloud-config\n\ncoreos:\n  update:\n    reboot-strategy: off\n\n  units:\n    -\n      name: coreos-setup-environment.service\n      command: restart\n    - \n      name: systemd-networkd.service\n      command: restart\n    - \n      name: docker.service\n      command: start\n    -\n      name: 10-static.network\n      runtime: no\n      content: |\n        [Match]\n        Name=eno1\n        [Network]\n        Address=192.168.aaa.xxx\n        Gateway=192.168.aaa.yyy\n        DNS=192.168.aaa.zzz\n\nusers:\n  - \n    name: core\n    passwd: `openssl passwd -1` \u3067\u751f\u6210\u3055\u308c\u308b\u30cf\u30c3\u30b7\u30e5\u3092\u66f8\u304d\u8fbc\u3080\n    groups:\n      - sudo\n      - docker\n```\n\n- cloud-config.yml \u3092 local \u3067\u4f5c\u6210\u3057\u3066 scp \u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u3044\u5834\u5408\n    - core \u30e6\u30fc\u30b6\u30fc\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\n        - `sudo passwd core`\n    - scp \u3067\u9001\u308b\n        - `scp cloud-config.yml coreos-host:`\n- \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5b9f\u884c\n    - `sudo coreos-install -d /dev/sda -c cloud-config.yml -v`\n\n## 3. Knowledge \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n- Core OS \u306b\u30ed\u30b0\u30a4\u30f3\n- \u4f5c\u696d\u5834\u6240\u3092\u4f5c\u6210\n\n```\nmkdir /home/core/knowledge\ncd /home/core/knowledge\n```\n\n- Dockerfile \u3092\u53d6\u5f97\n\n```\nwget https://raw.githubusercontent.com/support-project/docker-knowledge/master/Dockerfile\n```\n\n- docker \u3092 build\n\n```\ndocker build -t knowledge:1.3.1 .\n```\n\n- docker \u3092\u8d77\u52d5\n\n```\ndocker run -d -p 80:8080 -v /home/core/knowledge:/root/.knowledge knowledge:1.3.1\n```\n\n- \u30d6\u30e9\u30a6\u30b6\u304b\u3089 Core OS \u30de\u30b7\u30f3\u306e port 80 \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Knowledge \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u304b\u3081\u308b\n- \u521d\u671f\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3092\u65b0\u898f\u4f5c\u6210\u3001\u521d\u671f\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\n\n\n## 4. \u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a\n\n### 4.1 Knowledge \u5074\n- \u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u7d4c\u7531\u3057\u3066 https://lab-web-server/knowledge \u306e URL \u3092\u4f7f\u3044\u305f\u3044\u306e\u3067\u3001knowledge \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u3092 `/usr/local/tomcat/webapps/ROOT.war` \u304b\u3089 `/usr/local/tomcat/webapps/knowledge.war` \u306b\u5909\u66f4\n    - Dockerfile \u306e ADD \u304b\u3089\u59cb\u307e\u308b\u884c\u3092\u5909\u66f4\u3059\u308b\n- Knowledge \u306b\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u300c\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u300d - \u300c\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u300d - \u300c\u30b5\u30fc\u30d3\u30b9\u306eURL\u300d \u3092\u9069\u5207\u306b\u5909\u66f4\u3059\u308b\n\n### 4.2 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u5074\n\n- \u4f7f\u7528\u3057\u3066\u3044\u308b web server \u306f\u3001apache\n- \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u65b0\u898f\u4f5c\u6210\n\n```\nsudo emacs proxy.conf\n```\n\n- \u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u3092\u8a18\u8ff0\n\n```\n<Location /knowledge/>\n  ProxyPass http://192.168.aaa.xxx/knowledge/\n  ProxyPassReverse http://192.168.aaa.xxx/knowledge/\n  SSLRequireSSL\n</Location>\n```\n\n- apache \u3092\u518d\u8d77\u52d5\n\n\n## 5. PostgreSQL \u306e\u4f7f\u7528\n\n\u305d\u306e\u3046\u3061\u8a66\u3059\n", "tags": ["Knowledge", "docker", "CoreOS"]}