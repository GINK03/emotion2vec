{"context": "\u8d85\u30de\u30cb\u30a2\u30c3\u30af\u306a\u30cd\u30bf\u5f61(\uff9f)(\uff9f)\nOracle Database \u306e\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f5c\u6210\u3057\u3066\u3001\u4f5c\u6210\u3057\u305f\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f7f\u7528\u3059\u308b\nSQL\u304c\u5b9f\u884c\u3055\u308c\u308b\u3068\u3001\u62e1\u5f35\u7d71\u8a08(\u5f0f\u7d71\u8a08)\u306e\u30a8\u30f3\u30c8\u30ea\u304c\u4f5c\u6210\u3055\u308c\u3066 COL_USAGE$ \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u307e\u305a\u306f\u6e96\u5099\uff0f\u78ba\u8a8d\u304b\u3089\u3002\u3053\u306e\u6642\u70b9\u3067\u306f\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n-- COL_USAGE\u306e\u78ba\u8a8d\nSET LONG 1000000;\nSET LONGC 1000000;\nSET LINESIZE 1000;\nSET PAGESIZE 0;\nSELECT DBMS_STATS.REPORT_COL_USAGE('AYSHIBAT', 'TBL_B') FROM DUAL;\n\nLEGEND:\n.......\n\nEQ         : Used in single table EQuality predicate\nRANGE      : Used in single table RANGE predicate\n\uff1a\n###############################################################################\n\nCOLUMN USAGE REPORT FOR AYSHIBAT.TBL_B\n......................................\n\n1. P_CHAR                              : EQ_JOIN\n2. P_NO                                : EQ_JOIN\n###############################################################################\n\n\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f5c\u6210\u3057\u307e\u3059\u304c\u3001\u3053\u306e\u6642\u70b9\u3067\u3082\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n-- Function\u7d22\u5f15\u306e\u4f5c\u6210\nCREATE INDEX TBL_B_I1 ON TBL_B(TO_CHAR(P_DATE, 'YYYYMMDD'));\n\nIndex created.\n\n-- COL_USAGE\u306e\u78ba\u8a8d \u203b\u3053\u306e\u6642\u70b9\u3067\u306f\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u4f5c\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u3002\nSET LONG 1000000;\nSET LONGC 1000000;\nSET LINESIZE 1000;\nSET PAGESIZE 0;\nSELECT DBMS_STATS.REPORT_COL_USAGE('AYSHIBAT', 'TBL_B') FROM DUAL;\n\nLEGEND:\n.......\n\nEQ         : Used in single table EQuality predicate\nRANGE      : Used in single table RANGE predicate\n\uff1a\n###############################################################################\n\nCOLUMN USAGE REPORT FOR AYSHIBAT.TBL_B\n......................................\n\n1. P_CHAR                              : EQ_JOIN\n2. P_NO                                : EQ_JOIN\n###############################################################################\n\n\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f7f\u7528\u3059\u308bSQL\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n-- SQL\u5b9f\u884c\nSET AUTOTRACE TRACEONLY;\nSELECT /*+ MONITOR */\n       A.*\n  FROM TEST_TABLE_A A\n     , TBL_B B\n WHERE A.P_NO2  = B.P_NO\n   AND A.P_CHAR = B.P_CHAR\n   AND TO_CHAR(B.P_DATE, 'YYYYMMDD') = '20120801';\nSET AUTOTRACE OFF;\n\n1102 rows selected.\n\n\nExecution Plan\n----------------------------------------------------------\nPlan hash value: 4015380392\n\n---------------------------------------------------------------------------------------------\n| Id  | Operation                    | Name         | Rows  | Bytes | Cost (%CPU)| Time     |\n---------------------------------------------------------------------------------------------\n|   0 | SELECT STATEMENT             |              |    81 |  2187 |     7   (0)| 00:00:01 |\n|*  1 |  HASH JOIN                   |              |    81 |  2187 |     7   (0)| 00:00:01 |\n|   2 |   TABLE ACCESS FULL          | TEST_TABLE_A |    26 |   416 |     3   (0)| 00:00:01 |\n|   3 |   TABLE ACCESS BY INDEX ROWID| TBL_B        |   300 |  3300 |     4   (0)| 00:00:01 |\n|*  4 |    INDEX RANGE SCAN          | TBL_B_I1     |   120 |       |     3   (0)| 00:00:01 | \u2605\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\n---------------------------------------------------------------------------------------------\n\n\u3053\u3053\u3067COL_USAGE\u3092\u78ba\u8a8d\u3059\u308b\u3068\u2026\u2026\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u304c\u3042\u308b\u3084\u306d\u5f61(^)(^)\n-- COL_USAGE\u306e\u78ba\u8a8d\nSET LONG 1000000;\nSET LONGC 1000000;\nSET LINESIZE 1000;\nSET PAGESIZE 0;\nSELECT DBMS_STATS.REPORT_COL_USAGE('AYSHIBAT', 'TBL_B') FROM DUAL;\n\nLEGEND:\n.......\n\nEQ         : Used in single table EQuality predicate\nRANGE      : Used in single table RANGE predicate\n\uff1a\n###############################################################################\n\nCOLUMN USAGE REPORT FOR AYSHIBAT.TBL_B\n......................................\n\n1. P_CHAR                              : EQ_JOIN\n2. P_NO                                : EQ_JOIN\n3. SYS_NC00004$                        : EQ \u2605\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\n###############################################################################\n\n\u30a8\u30f3\u30c8\u30ea\u306e\u4e2d\u8eab\u3092DBA_STAT_EXTENSIONS\u3067\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u306e\u62e1\u5f35\u7d71\u8a08(\u5f0f\u7d71\u8a08)\u306a\u306e\u304c\u89e3\u308b\u3084\u3067\u5f61(\uff9f)(\uff9f)\n-- \u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306e\u78ba\u8a8d\nSET PAGESIZE 100;\nCOLUMN EXTENSION FORMAT A30;\nSELECT OWNER, TABLE_NAME, EXTENSION_NAME, EXTENSION FROM DBA_STAT_EXTENSIONS\n WHERE OWNER = 'AYSHIBAT' AND TABLE_NAME = 'TBL_B';\n\nOWNER      TABLE_NAME   EXTENSION_NAME  EXTENSION\n---------- ------------ --------------- ------------------------------\nAYSHIBAT   TBL_B        SYS_NC00004$    (TO_CHAR(\"P_DATE\",'YYYYMMDD'))\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306f11gR2(11.2.0.4.x)\u3067\u691c\u8a3c\u3057\u305f\u3084\u3067\u5f61(\uff9f)(\uff9f)\nSQL> SELECT * FROM V$VERSION;\n\nBANNER\n--------------------------------------------------------------------------------\nOracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production\nPL/SQL Release 11.2.0.4.0 - Production\nCORE    11.2.0.4.0      Production\nTNS for Solaris: Version 11.2.0.4.0 - Production\nNLSRTL Version 11.2.0.4.0 - Production\n\n11gR1 \u3084 11gR2 \u306e\u62e1\u5f35\u7d71\u8a08\u30a8\u30f3\u30c8\u30ea\u306f\u3001\u901a\u5e38\u306f\u62e1\u5f35\u7d71\u8a08\u3092\u660e\u793a\u7684\u306b\u4f5c\u6210\u3057\u305f\u308a\u3001\nSEED_COL_USAGE \u3067\u660e\u793a\u7684\u306b\u53ce\u96c6\u3057\u306a\u3044\u9650\u308a\u306f\u4f5c\u6210\u3055\u308c\u3093\u306e\u3067\u3059\u304c\u3001\n\u3053\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u3088\u3046\u306a\u4f8b\u5916\u30b1\u30fc\u30b9\u3082\u6709\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u5f61(\uff9f)(\uff9f)\n12cR1\u306e\u52d5\u304d\u3092\u77e5\u308a\u305f\u3044\u65b9\u306f\u3001\u53bb\u5e74\u306e DDD 2016\u8cc7\u6599\u3092\u898b\u3066\u30af\u30ec\u30e1\u30f3\u30b9\u5f61(-)(-)\n\nDD2-5\n\u30aa\u30e9\u30af\u30eb\u30fb\u30b3\u30f3\u30b5\u30eb\u304c\u8a9e\u308b\uff01 SQL\u6027\u80fd\u3092\u6700\u5927\u9650\u306b\u5f15\u304d\u51fa\u3059\nDB 12c\u30af\u30a8\u30ea\u30fc\u30fb\u30aa\u30d7\u30c6\u30a3\u30de\u30a4\u30b6 \u65b0\u6a5f\u80fd\u6d3b\u7528\u3068\u7d71\u8a08\u60c5\u5831\u904b\u7528\u306e\u6226\u7565\nhttp://otndnld.oracle.co.jp/ondemand/ddd-2016/DD2-5.pdf\n\n\n\u8d85\u30de\u30cb\u30a2\u30c3\u30af\u306a\u30cd\u30bf\u5f61(\uff9f)(\uff9f)\n\nOracle Database \u306e\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f5c\u6210\u3057\u3066\u3001\u4f5c\u6210\u3057\u305f\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f7f\u7528\u3059\u308b\nSQL\u304c\u5b9f\u884c\u3055\u308c\u308b\u3068\u3001\u62e1\u5f35\u7d71\u8a08(\u5f0f\u7d71\u8a08)\u306e\u30a8\u30f3\u30c8\u30ea\u304c\u4f5c\u6210\u3055\u308c\u3066 COL_USAGE$ \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u6e96\u5099\uff0f\u78ba\u8a8d\u304b\u3089\u3002\u3053\u306e\u6642\u70b9\u3067\u306f\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n```sql\n-- COL_USAGE\u306e\u78ba\u8a8d\nSET LONG 1000000;\nSET LONGC 1000000;\nSET LINESIZE 1000;\nSET PAGESIZE 0;\nSELECT DBMS_STATS.REPORT_COL_USAGE('AYSHIBAT', 'TBL_B') FROM DUAL;\n\nLEGEND:\n.......\n\nEQ         : Used in single table EQuality predicate\nRANGE      : Used in single table RANGE predicate\n\uff1a\n###############################################################################\n\nCOLUMN USAGE REPORT FOR AYSHIBAT.TBL_B\n......................................\n\n1. P_CHAR                              : EQ_JOIN\n2. P_NO                                : EQ_JOIN\n###############################################################################\n```\n\n\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f5c\u6210\u3057\u307e\u3059\u304c\u3001\u3053\u306e\u6642\u70b9\u3067\u3082\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n```sql\n-- Function\u7d22\u5f15\u306e\u4f5c\u6210\nCREATE INDEX TBL_B_I1 ON TBL_B(TO_CHAR(P_DATE, 'YYYYMMDD'));\n\nIndex created.\n\n-- COL_USAGE\u306e\u78ba\u8a8d \u203b\u3053\u306e\u6642\u70b9\u3067\u306f\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u4f5c\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u3002\nSET LONG 1000000;\nSET LONGC 1000000;\nSET LINESIZE 1000;\nSET PAGESIZE 0;\nSELECT DBMS_STATS.REPORT_COL_USAGE('AYSHIBAT', 'TBL_B') FROM DUAL;\n\nLEGEND:\n.......\n\nEQ         : Used in single table EQuality predicate\nRANGE      : Used in single table RANGE predicate\n\uff1a\n###############################################################################\n\nCOLUMN USAGE REPORT FOR AYSHIBAT.TBL_B\n......................................\n\n1. P_CHAR                              : EQ_JOIN\n2. P_NO                                : EQ_JOIN\n###############################################################################\n```\n\n\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u3092\u4f7f\u7528\u3059\u308bSQL\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```sql\n-- SQL\u5b9f\u884c\nSET AUTOTRACE TRACEONLY;\nSELECT /*+ MONITOR */\n       A.*\n  FROM TEST_TABLE_A A\n     , TBL_B B\n WHERE A.P_NO2  = B.P_NO\n   AND A.P_CHAR = B.P_CHAR\n   AND TO_CHAR(B.P_DATE, 'YYYYMMDD') = '20120801';\nSET AUTOTRACE OFF;\n\n1102 rows selected.\n\n\nExecution Plan\n----------------------------------------------------------\nPlan hash value: 4015380392\n\n---------------------------------------------------------------------------------------------\n| Id  | Operation                    | Name         | Rows  | Bytes | Cost (%CPU)| Time     |\n---------------------------------------------------------------------------------------------\n|   0 | SELECT STATEMENT             |              |    81 |  2187 |     7   (0)| 00:00:01 |\n|*  1 |  HASH JOIN                   |              |    81 |  2187 |     7   (0)| 00:00:01 |\n|   2 |   TABLE ACCESS FULL          | TEST_TABLE_A |    26 |   416 |     3   (0)| 00:00:01 |\n|   3 |   TABLE ACCESS BY INDEX ROWID| TBL_B        |   300 |  3300 |     4   (0)| 00:00:01 |\n|*  4 |    INDEX RANGE SCAN          | TBL_B_I1     |   120 |       |     3   (0)| 00:00:01 | \u2605\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\n---------------------------------------------------------------------------------------------\n```\n\n\u3053\u3053\u3067COL_USAGE\u3092\u78ba\u8a8d\u3059\u308b\u3068\u2026\u2026\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u304c\u3042\u308b\u3084\u306d\u5f61(^)(^)\n\n```sql\n-- COL_USAGE\u306e\u78ba\u8a8d\nSET LONG 1000000;\nSET LONGC 1000000;\nSET LINESIZE 1000;\nSET PAGESIZE 0;\nSELECT DBMS_STATS.REPORT_COL_USAGE('AYSHIBAT', 'TBL_B') FROM DUAL;\n\nLEGEND:\n.......\n\nEQ         : Used in single table EQuality predicate\nRANGE      : Used in single table RANGE predicate\n\uff1a\n###############################################################################\n\nCOLUMN USAGE REPORT FOR AYSHIBAT.TBL_B\n......................................\n\n1. P_CHAR                              : EQ_JOIN\n2. P_NO                                : EQ_JOIN\n3. SYS_NC00004$                        : EQ \u2605\u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\n###############################################################################\n```\n\n\u30a8\u30f3\u30c8\u30ea\u306e\u4e2d\u8eab\u3092DBA_STAT_EXTENSIONS\u3067\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7d22\u5f15\u306e\u62e1\u5f35\u7d71\u8a08(\u5f0f\u7d71\u8a08)\u306a\u306e\u304c\u89e3\u308b\u3084\u3067\u5f61(\uff9f)(\uff9f)\n\n```sql\n-- \u62e1\u5f35\u7d71\u8a08\u306e\u30a8\u30f3\u30c8\u30ea\u306e\u78ba\u8a8d\nSET PAGESIZE 100;\nCOLUMN EXTENSION FORMAT A30;\nSELECT OWNER, TABLE_NAME, EXTENSION_NAME, EXTENSION FROM DBA_STAT_EXTENSIONS\n WHERE OWNER = 'AYSHIBAT' AND TABLE_NAME = 'TBL_B';\n\nOWNER      TABLE_NAME   EXTENSION_NAME  EXTENSION\n---------- ------------ --------------- ------------------------------\nAYSHIBAT   TBL_B        SYS_NC00004$    (TO_CHAR(\"P_DATE\",'YYYYMMDD'))\n```\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306f11gR2(11.2.0.4.x)\u3067\u691c\u8a3c\u3057\u305f\u3084\u3067\u5f61(\uff9f)(\uff9f)\n\n```sql\nSQL> SELECT * FROM V$VERSION;\n\nBANNER\n--------------------------------------------------------------------------------\nOracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production\nPL/SQL Release 11.2.0.4.0 - Production\nCORE    11.2.0.4.0      Production\nTNS for Solaris: Version 11.2.0.4.0 - Production\nNLSRTL Version 11.2.0.4.0 - Production\n```\n\n11gR1 \u3084 11gR2 \u306e\u62e1\u5f35\u7d71\u8a08\u30a8\u30f3\u30c8\u30ea\u306f\u3001\u901a\u5e38\u306f\u62e1\u5f35\u7d71\u8a08\u3092\u660e\u793a\u7684\u306b\u4f5c\u6210\u3057\u305f\u308a\u3001\nSEED_COL_USAGE \u3067\u660e\u793a\u7684\u306b\u53ce\u96c6\u3057\u306a\u3044\u9650\u308a\u306f\u4f5c\u6210\u3055\u308c\u3093\u306e\u3067\u3059\u304c\u3001\n\u3053\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u3088\u3046\u306a\u4f8b\u5916\u30b1\u30fc\u30b9\u3082\u6709\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u5f61(\uff9f)(\uff9f)\n\n12cR1\u306e\u52d5\u304d\u3092\u77e5\u308a\u305f\u3044\u65b9\u306f\u3001\u53bb\u5e74\u306e DDD 2016\u8cc7\u6599\u3092\u898b\u3066\u30af\u30ec\u30e1\u30f3\u30b9\u5f61(-)(-)\n\n* DD2-5\n\u30aa\u30e9\u30af\u30eb\u30fb\u30b3\u30f3\u30b5\u30eb\u304c\u8a9e\u308b\uff01 SQL\u6027\u80fd\u3092\u6700\u5927\u9650\u306b\u5f15\u304d\u51fa\u3059\nDB 12c\u30af\u30a8\u30ea\u30fc\u30fb\u30aa\u30d7\u30c6\u30a3\u30de\u30a4\u30b6 \u65b0\u6a5f\u80fd\u6d3b\u7528\u3068\u7d71\u8a08\u60c5\u5831\u904b\u7528\u306e\u6226\u7565\nhttp://otndnld.oracle.co.jp/ondemand/ddd-2016/DD2-5.pdf\n", "tags": ["oracle", "Database"]}