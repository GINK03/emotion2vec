{"context": "\n\n\u6982\u8981\nTechFeed Live#2 \u300cReact vs Angular2\u300d\u306eLT\u8cc7\u6599\u3067\u3059\u3002\nAngular2\u3092\u898b\u636e\u3048\u305f\u4e0a\u3067\u306e\u3001React/Redux\u3067\u306e\u30c6\u30b9\u30c8\u306e\u66f8\u304d\u65b9\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3059\u3002\n\n\n\u3053\u306e\u8cc7\u6599\u3067\u8a71\u3059\u3053\u3068\n\n\u578b\u3068\u30c6\u30b9\u30c8\u306e\u3042\u308b\u66ae\u3089\u3057\u306b\u3064\u3044\u3066\nTypeScript\u3092\u7528\u3044\u3066\u306e\u958b\u767a\u304c\u3067\u304d\u308b\nReact/Redux\u3067\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u304c\u66f8\u3051\u308b\n\n\n\u5bfe\u8c61\u306fReducer/ActionCreator/component\u5168\u3066\n\n\nkarma\u3067\u5358\u4f53\u30c6\u30b9\u30c8\u3067\u304d\u308b\n\n\n\u304b\u3064\u3001\u5168\u4f53\u3067\u306a\u304f\u500b\u5225\u306b\u30c6\u30b9\u30c8\u3092\u56de\u305b\u308b\n\n\n\u30c6\u30b9\u30c8\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u304c\u53d6\u308c\u308b\n\n\n\u3082\u3061\u308d\u3093TypeScript\u30b3\u30fc\u30c9\u3067\n\n\n\n\n\n\u578b\u3068\u30c6\u30b9\u30c8\u306e\u3042\u308b\u66ae\u3089\u3057\u306b\u3064\u3044\u3066\n\n\n\u30c7\u30d5\u30a1\u30af\u30c8\u306e\u958b\u767a\u74b0\u5883\u304c\u307b\u3057\u3044\n\u30d5\u30ed\u30f3\u30c8\u5c02\u696d\u3067\u306a\u3044\u30de\u30f3\u3068\u3057\u3066\u306f\u3001\u30d5\u30ed\u30f3\u30c8\u306e\u52d5\u5411\u306f\u8ffd\u3063\u3066\u3066\u304b\u306a\u308a\u3057\u3093\u3069\u3044\u3002\n\u30c7\u30d5\u30a1\u30af\u30c8\u306e\u958b\u767a\u74b0\u5883\u304c\u307b\u3057\u3044\u3002\n\u671f\u5f85\u3059\u308b\u3053\u3068\u3068\u3057\u3066\n\n\u8907\u6570\u4eba\u3067\u3082\u958b\u767a\u3067\u304d\u308b\n\n\n\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u304c\u308f\u304b\u308a\u3084\u3059\u3044\n\u578b\u304c\u3042\u308b\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u5f79\u5272\u304c\u3042\u3063\u3066\u306a\u304a\u826f\u3044\n\n\nIDE\u306e\u88dc\u5b8c\u30b5\u30dd\u30fc\u30c8\u3084\u9759\u7684\u30c1\u30a7\u30c3\u30af\u3092\u3057\u3066\u307b\u3057\u3044\n\n\n\u578b\u304c\u3042\u308b\u3068\u826f\u3055\u305d\u3046\n\n\n\u518d\u5229\u7528\u3057\u3084\u3059\u3044\u8a2d\u8a08\u306b\u306a\u3063\u3066\u3044\u308b\n\n\n\u30c6\u30b9\u30c8\u304c\u7c21\u5358\u306b\u66f8\u3051\u308b\u306f\u305a\n\u758e\u7d50\u5408\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\n\n\n\u30ab\u30d0\u30ec\u30c3\u30b8\u53d6\u308a\u305f\u3044\n\n\n\u958b\u767a\u306eKPI\u306b\u3057\u3084\u3059\u3044\u306e\u3067\n\n\n\n\u304c\u3042\u308a\u307e\u3059\u3002\n\n\nAngular2\u3078\u306e\u671f\u5f85\u3068\u73fe\u72b6\n\u306a\u306e\u3067\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u3057\u3066\u300c\u3053\u308c\u306b\u4e57\u3063\u304b\u308c\u3070\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3084\u308b\u3088\u300d\u7684\u306a\u3082\u306e\u304c\u6b32\u3057\u3044\uff01\nAngular2\u306b\u305d\u308c\u3092\u671f\u5f85\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u73fe\u72b6\u306f\n\nRC\u304cRC\u3058\u3083\u306a\u3044\n\n\nRC4\u304b\u30895\u306e\u5927\u5e45\u306aAPI\u5909\u66f4\n\u3053\u308c\u307e\u3067\u66f8\u304b\u308c\u305f\u8a18\u4e8b\u307b\u3068\u3093\u3069\u53c2\u8003\u306b\u306a\u3089\u306a\u304f\u306a\u3063\u305f\uff1f\n\u5b89\u5b9a\u7248\u3082\u5b89\u5b9a\u3067\u306a\u3044\u306e\u3067\u306f\u8aac\u304c\u6d6e\u4e0a\u3001\u3001\n\n\n\u516c\u5f0f\u30b5\u30f3\u30d7\u30eb\u304cSystem.js\u4f7f\u3063\u3066\u308b\n\n\n\u30d5\u30ed\u30f3\u30c8\u5f37\u3044\u30de\u30f3\u66f0\u304f\u3001\u5b9f\u969b\u306b\u306fwebpack\u306a\u3069\u306b\u306a\u308b\u3068\u306e\u3053\u3068\n\u300c\u3048\u3001\u3058\u3083\u3041webpack\u3067\u66f8\u3044\u3066\u3088\u300d\n\n\n\u30c6\u30b9\u30c8\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u307b\u307c\u306a\u3044\n\n\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u540d\u4e57\u308b\u306a\u3089\u9811\u5f35\u3063\u3066\u6b32\u3057\u3044\n\u73fe\u72b6\u3001\u30dc\u30a4\u30e9\u30fc\u30d7\u30ec\u30fc\u30c8\u304c\u591a\u305d\u3046\u306a\u4e88\u611f\u304c\u3057\u3066\u3044\u308b\u3002\u3002\n\n\n\n\u30c4\u30e9\u307f\u3002\u3002\u3002\n\u306a\u306e\u3067\u4ed5\u65b9\u306a\u304f\u3057\u3070\u3089\u304f\u306fReact\u4f7f\u3046\u3064\u3082\u308a\u3067\u3059\u3002\n\n\n\u3053\u308c\u304b\u3089\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u5411\u3051\u3066\n\u3057\u304b\u3057\u4eca\u306f\u307e\u3060\u30a2\u30ec\u3067\u3082\u3001Angular2\u304c\u63a1\u7528\u3057\u3066\u3044\u308b\u30b9\u30bf\u30c3\u30af\u306b\u4e57\u3063\u304b\u3063\u3066\u304a\u304f\u3053\u3068\u3067\u5f8c\u3005\u697d\u3067\u304d\u305d\u3046\u306a\u6c17\u304c\u3057\u3066\u3044\u307e\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u3001\n\nAngular2\u3067\u306fTypeScript\u63a8\u5968\n\n\n\u578b\u306e\u3042\u308b\u4e16\u754c\u3067\u751f\u304d\u3066\u304d\u305f\u306e\u3067\u578b\u6b32\u3057\u3044\u3002\nflowtype\u3088\u308aTypeScript\u754c\u9688\u306e\u65b9\u304c\u4eba\u6c17\u3067\u578b\u5b9a\u7fa9\u3082\u5145\u5b9f\u3057\u3066\u305d\u3046\nWebStorm\u3082\u3061\u3083\u3093\u3068\u5bfe\u5fdc\u3057\u3066\u304f\u308c\u3066\u3066\u66f8\u304d\u3084\u3059\u3044\n\n\nAngular2\u3067\u306f\u30c6\u30b9\u30c8\u30e9\u30f3\u30ca\u30fc\u306fkarma\u3063\u307d\u3044\n\n\njest\u306e\u3088\u3046\u306anode/jsdom\u74b0\u5883\u3067\u306e\u30c6\u30b9\u30c8\u306f\u4e0d\u5b89\n\u3084\u3063\u3071\u308a\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u30c6\u30b9\u30c8\u3057\u305f\u3044\n\n\nAngular2\u3067\u306f\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306fjasmine\u3063\u307d\u3044\n\n\nmocha\u3067\u3082\u3044\u3044\u3051\u3069\u3001\u30c6\u30b9\u30c8\u306a\u3089\u5168\u90e8\u5165\u308a\u306e\u65b9\u304c\u8003\u3048\u308b\u3053\u3068\u304c\u5c11\u306a\u305d\u3046\n\n\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u3053\u308c\u3089\u306e\u30b9\u30bf\u30c3\u30af\u3092\u4f7f\u3063\u3066React/redux\u3067\u30c6\u30b9\u30c8\u66f8\u3044\u3066\u307e\u3059\u3002\n\n\nTypeScript\u3092\u7528\u3044\u3066\u306e\u958b\u767a\u304c\u3067\u304d\u308b\n\nQiita\u306b\u307e\u3068\u3081\u3066\u3044\u308b\u3001\nReact + Redux + Typescript\u30b7\u30ea\u30fc\u30ba\n\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\nReact/Redux\u3067\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u304c\u66f8\u3051\u308b\n\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\nhttps://github.com/uryyyyyyy/react-redux-sample/tree/test-karma\n\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\ntree src/\nsrc/\n\u251c\u2500\u2500 Counter.tsx\n\u251c\u2500\u2500 DispatchActions.ts\n\u251c\u2500\u2500 Index.tsx\n\u251c\u2500\u2500 Entities.ts\n\u251c\u2500\u2500 Reducer.ts\n\u2514\u2500\u2500 Store.ts\n\n\n\u7c21\u5358\u306aAction\u3068http\u901a\u4fe1\u3092\u542b\u3080\u4f8b\u3067\u3059\u3002\n\uff08redux\u306eMiddleWare\u3082router\u3082\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u306e\u66f8\u304d\u65b9\u306f\u307b\u307c\u540c\u3058\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\uff09\n\u3053\u3053\u3067\u306f\u3001\n\nIndex.tsx\n\n\nredux\u306estore\u3068component\u306e\u7d50\u3073\u3064\u3051\n\n\nEntities.ts\n\n\n\u5171\u6709\u306e\u578b\u5b9a\u7fa9\u3092\u7f6e\u304d\u5834\n\n\nStore.ts\u306f\n\n\nstore\u306e\u751f\u6210\n\n\n\n\u306a\u306e\u3067\u30c6\u30b9\u30c8\u4e0d\u8981\u3067\u3001\n\nDispatchActions.ts\n\n\nhttp\u901a\u4fe1\u3092\u542b\u3080ActionCreator\u5c64\n\n\nReducer.ts\n\n\n\u7d14\u7c8b\u306a\u95a2\u6570\u306b\u306a\u3063\u3066\u308b\u306f\u305a\u306eReducer\u5c64\n\n\nCounter.tsx\n\n\nview\u751f\u6210\u3068\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u3092\u62c5\u3046Component\u5c64\n\n\n\n\u306e\u30c6\u30b9\u30c8\u3092\u5bfe\u8c61\u3068\u3057\u307e\u3059\u3002\n\n\nkarma\u3067\u306e\u30c6\u30b9\u30c8\u306e\u8a2d\u5b9a\n\nkarma\u306ffiles\u306b\u6307\u5b9a\u3057\u305f\u30b3\u30fc\u30c9\u3092\u5168\u90e8\u30c6\u30b9\u30c8\u3059\u308b\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u5168\u90e8\u66f8\u304f\u3068\u30d0\u30f3\u30c9\u30eb\u3068\u30c6\u30b9\u30c8\u5b9f\u65bd\u3067\u3081\u3061\u3083\u304f\u3061\u3083\u6642\u9593\u304b\u304b\u308b\n\u306a\u306e\u3067\u5f15\u6570\u306b\u4e0e\u3048\u305f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u307f\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\n\n\npackage.json\n\"scripts\": {\n    ...\n    \"test:karma-ut\": \"karma start karma.conf.js\",\n    \"test:karma-all\": \"karma start karma.conf.js **/*-test.tsx **/*-test.ts\",\n    ...\n  },\n\n\n\nkarma.conf.js\nconst args = process.argv;\nargs.splice(0, 4);\n\nconst polyfills = [\n  'node_modules/jquery/dist/jquery.min.js'\n];\n\n//\u5f15\u6570\u306b\u4e0e\u3048\u305f\u3082\u306e\u3068\u3001polyfill\u3084\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u8aad\u307e\u305b\u308b\u3082\u306e\u3060\u3051\u3092\u542b\u3081\u308b\u3002\nconst files = polyfills.concat(args);\n\nmodule.exports = function(config) {\n  config.set({\n\n    basePath: '',\n\n    frameworks: ['jasmine'],\n\n    files: files,\n\n    preprocessors: {\n      '**/*-test.ts': ['webpack'],\n      '**/*-test.tsx': ['webpack']\n    },\n\n    webpack: {\n      resolve: {\n        extensions: ['', '.ts', '.js', \".tsx\"]\n      },\n      module: {\n        loaders: [{\n          test: /\\.tsx?$/,\n          loader: \"ts-loader\"\n        }]\n      }\n    },\n\n    reporters: ['mocha'],\n\n    port: 9876,\n\n    colors: true,\n\n    logLevel: config.LOG_INFO,\n\n    autoWatch: false,\n\n    browsers: ['Chrome'],\n\n    singleRun: true,\n\n    concurrency: Infinity\n\n};\n\n\n\u4f7f\u3044\u65b9\u306f\u3053\u3093\u306a\u611f\u3058\n$ npm run test:karma-ut ./src/__test__/Reducer-test.ts \n\n> react-typescript-redux@1.0.0 test:karma-ut /~~~/react-redux-sample\n> karma start karma.conf.js \"./src/__test__/Reducer-test.ts\"\n\n\nSTART:\nHash: f4683f5fa2953dc3a97c\nVersion: webpack 1.13.2\nTime: 7ms\nwebpack: bundle is now VALID.\nwebpack: bundle is now INVALID.\nts-loader: Using typescript@1.8.10 and /~~~/react-redux-sample/tsconfig.json\nHash: 394525184afc475de6c3\nVersion: webpack 1.13.2\nTime: 957ms\n                       Asset     Size  Chunks             Chunk Names\nsrc/__test__/Reducer-test.ts  6.66 kB       0  [emitted]  src/__test__/Reducer-test.ts\nchunk    {0} src/__test__/Reducer-test.ts (src/__test__/Reducer-test.ts) 4.91 kB [rendered]\n    [0] ./src/__test__/Reducer-test.ts 1.15 kB {0} [built]\n    [1] ./src/Reducer.ts 1.4 kB {0} [built]\n    [2] ./src/Entities.ts 370 bytes {0} [built]\n    [3] ./~/object-assign/index.js 1.99 kB {0} [built]\nwebpack: bundle is now VALID.\n07 09 2016 07:20:02.423:INFO [karma]: Karma v1.2.0 server started at http://localhost:9876/\n07 09 2016 07:20:02.424:INFO [launcher]: Launching browser Chrome with unlimited concurrency\n07 09 2016 07:20:02.429:INFO [launcher]: Starting browser Chrome\n07 09 2016 07:20:03.045:INFO [Chrome 53.0.2785 (Linux 0.0.0)]: Connected on socket /#ioetpDIDxOdeFnkTAAAA with id 36106878\n  Reducer\n    \u2714 INCREMENT\n    \u2714 DECREMENT\n    \u2714 FETCH_SUCCESS\n\nFinished in 0.009 secs / 0.001 secs\n\nSUMMARY:\n\u2714 3 tests completed\n\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\nCounter.tsx\n\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3053\u3068\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u901a\u308a\u306b\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067\u304d\u3066\u3044\u308b\u304b\n\u30a4\u30d9\u30f3\u30c8\u3092\u8d77\u3053\u3057\u3066\u3001\u671f\u5f85\u901a\u308a\u306e\u767a\u706b\u304c\u3067\u304d\u3066\u3044\u308b\u304b\n\n\nCounter-test.tsx\nimport * as React from \"react\";\nimport {Counter} from \"../Counter\";\nimport {GlobalState} from \"../Entities\";\nimport * as TestUtils from \"react-addons-test-utils\";\nimport * as ReactDOM from \"react-dom\";\n\ndescribe('Counter', () => {\n\n    it('rendering', () => {\n        const actions:any = {};\n        const state: GlobalState = {num: 1, loadingCount: 1};\n        const counterComponent: any = TestUtils.renderIntoDocument(\n            <Counter value={state} actions={actions} />\n        );\n\n        const counterDOM = ReactDOM.findDOMNode(counterComponent);\n        const ps: NodeListOf<HTMLParagraphElement> = counterDOM.getElementsByTagName(\"p\");\n\n        const p0: HTMLParagraphElement = ps[0];\n        expect(p0.textContent).toBe(\"loading\");\n\n        const p1: HTMLParagraphElement = ps[1];\n        expect(p1.textContent).toBe(\"score: 1\");\n    });\n\n    it('click', () => {\n        const spy:any = {fetchAmount: null};\n        spyOn(spy, 'fetchAmount');\n        const state: GlobalState = {num: 0, loadingCount: 0};\n        const counterComponent: any = TestUtils.renderIntoDocument(\n            <Counter value={state} actions={spy} />\n        );\n\n        const counterDOM = ReactDOM.findDOMNode(counterComponent);\n        const buttons: NodeListOf<HTMLButtonElement> = counterDOM.getElementsByTagName(\"button\");\n        const button: HTMLButtonElement = buttons[2];\n\n        TestUtils.Simulate.click(button);\n        expect(spy.fetchAmount).toHaveBeenCalledWith();\n    });\n});\n\n\n\nDispatchActions.ts\n\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3053\u3068\n\nhttp\u901a\u4fe1\u30fb\u975e\u540c\u671f\u306e\u51e6\u7406\u304c\u6b63\u3057\u304f\u884c\u3048\u3066\u3044\u308b\u304b\n\u6b63\u3057\u304faction\u304cdispatch\u3055\u308c\u3066\u3044\u308b\u304b\n\n\nDispatchActions-test.ts\nimport {ActionTypes} from \"../Entities\";\nimport {DispatchActions} from \"../DispatchActions\";\nconst request = require('superagent');\nconst mock = require('superagent-mocker')(request);\n\ndescribe('DispatchActions', () => {\n\n\n    beforeEach(() => {\n        mock.clearRoutes()\n    });\n\n    it('increment',  () => {\n        const spy:any = {dispatch: null};\n        spyOn(spy, 'dispatch');\n        const actions = new DispatchActions(spy.dispatch);\n        actions.increment(100);\n        expect(spy.dispatch).toHaveBeenCalledWith({ type: ActionTypes.INCREMENT, amount: 100});\n    });\n\n    it('fetchAmount success',  (done) => {\n\n        mock.get('/api/count', () => ({body: {amount: 100}, status: 200}));\n\n        const spy:any = {dispatch: null};\n        spyOn(spy, 'dispatch');\n        const actions = new DispatchActions(spy.dispatch);\n        actions.fetchAmount().then(() => {\n            expect(spy.dispatch.calls.argsFor(0)[0]).toEqual({ type: ActionTypes.FETCH_REQUEST });\n            expect(spy.dispatch.calls.argsFor(1)[0]).toEqual({ type: ActionTypes.FETCH_SUCCESS, amount: 100 });\n            done();\n        });\n    });\n\n    it('fetchAmount fail',  (done) => {\n\n        mock.get('/api/count', () => ({body: {}, status: 400}));\n\n        const spy:any = {dispatch: null};\n        spyOn(spy, 'dispatch');\n        const actions = new DispatchActions(spy.dispatch);\n        actions.fetchAmount().then(() => {\n            expect(spy.dispatch.calls.argsFor(0)[0]).toEqual({ type: ActionTypes.FETCH_REQUEST });\n            expect(spy.dispatch.calls.argsFor(1)[0]).toEqual({ type: ActionTypes.FETCH_FAIL });\n            done();\n        });\n    });\n});\n\n\n\nReducer.ts\n\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3053\u3068\n\naction\u3068state\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u6b63\u3057\u3044state\u3092\u8fd4\u305b\u3066\u3044\u308b\u304b\n\n\nReducer-test.ts\nimport {counter} from \"../Reducer\";\nimport {GlobalState, ActionTypes} from \"../Entities\";\n\ndescribe('Reducer', () => {\n    it('INCREMENT', () => {\n        const state: GlobalState = {num: 4, loadingCount:0};\n        const action = { type: ActionTypes.INCREMENT, amount: 3};\n        const result = counter(state, action);\n        expect(result.num).toBe(state.num + 3);\n        expect(result.loadingCount).toBe(state.loadingCount);\n    });\n\n    it('DECREMENT', () => {\n        const state: GlobalState = {num: -2, loadingCount:0};\n        const action = { type: ActionTypes.DECREMENT, amount: 10};\n        const result = counter(state, action);\n        expect(result.num).toBe(state.num - 10);\n        expect(result.loadingCount).toBe(state.loadingCount);\n    });\n\n    it('FETCH_SUCCESS', () => {\n        const state: GlobalState = {num: -2, loadingCount:1};\n        const action = { type: ActionTypes.FETCH_SUCCESS, amount: 10};\n        const result = counter(state, action);\n        expect(result.num).toBe(state.num + 10);\n        expect(result.loadingCount).toBe(state.loadingCount - 1);\n    });\n});\n\n\n\n\n\u30c6\u30b9\u30c8\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u304c\u53d6\u308c\u308b\n\n\u30ab\u30d0\u30ec\u30c3\u30b8\u3082\u53d6\u308a\u307e\u3059\u3002\u5f0a\u793e\u3067\u306f\u4e3b\u306bcoveralls\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u305d\u308c\u3092\u4f8b\u306b\u6319\u3052\u307e\u3059\u3002\n\u6d41\u308c\u3068\u3057\u3066\u306f\u3001\n\nTypeScript\u3092js\u306b\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30eb\u3059\u308b\n\n\n\u30bd\u30fc\u30b9\u30fb\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u5171\u306b\u884c\u3046\n\u30bd\u30fc\u30b9\u30de\u30c3\u30d7\u3092\u5410\u3044\u3066\u304a\u304f\n\n\njs\u306e\u30c6\u30b9\u30c8\u3092\u6d41\u3057\u3066\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u53d6\u308b\n\u53d6\u3063\u305f\u30ab\u30d0\u30ec\u30c3\u30b8\u3068\u30bd\u30fc\u30b9\u30de\u30c3\u30d7\u306b\u5408\u3046\u3088\u3046\u306bremap\u3059\u308b\n\u4efb\u610f\u306e\u5f62\u5f0f\u3067\u51fa\u529b\u3059\u308b\n\n\n\u5f0a\u793e\u3067\u306fscala\u30b3\u30fc\u30c9\u3067\u3082\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u53d6\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u306e\u7d50\u679c\u3068\u306e\u30de\u30fc\u30b8\u3082\u3057\u3066\u3044\u308b\n\n\n\n\npackage.json\n\"scripts\": {\n    ...\n    \"test:karma-coverage\": \"tsc && karma start karma.conf.js ./dist/**/*-test.js\",\n    \"coverage-html\": \"remap-istanbul -i ./coverage/XXX browser/coverage-final.json -o coverage-report -t html\",\n    \"coveralls\": \"remap-istanbul -i coverage/XXX browser/coverage-final.json -o coverage/coverage-final.json && istanbul report lcov && node mergeCoveralls.es6 < ./coverage/lcov.info\"\n    ...\n  },\n\n\n\nkarma.conf.js\nconst args = process.argv;\nargs.splice(0, 4);\n\nconst polyfils = [\n  'node_modules/jquery/dist/jquery.min.js'\n];\n\n//\u5f15\u6570\u306b\u4e0e\u3048\u305f\u3082\u306e\u3068\u3001polyfill\u3084\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u8aad\u307e\u305b\u308b\u3082\u306e\u3060\u3051\u3092\u542b\u3081\u308b\u3002\nvar files = polyfils.concat(args);\n\nmodule.exports = function(config) {\n  config.set({\n\n    //...\n\n    preprocessors: {\n      '**/*-test.js': ['webpack']\n    },\n\n    webpack: {\n      resolve: {\n        extensions: ['', '.ts', '.js', \".tsx\"]\n      },\n      module: {\n       //...\n        postLoaders: [{\n          test: /\\.js/,\n          exclude: /(__test__|node_modules|bower_components)/,\n          loader: 'istanbul-instrumenter'\n        }]\n      }\n    },\n\n    reporters: ['mocha', 'coverage'],\n\n    coverageReporter: {\n      type : 'json',\n      dir : 'coverage/'\n    }\n\n};\n\n\n\u4f7f\u3044\u65b9\n# \u30c6\u30b9\u30c8\u5b9f\u65bd\uff06\u30ab\u30d0\u30ec\u30c3\u30b8\u53d6\u5f97\nnpm run test:karma-coverage\n\n# html\u3067\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u898b\u305f\u3044\u5834\u5408\uff08\u4e3b\u306b\u30ed\u30fc\u30ab\u30eb\uff09\nnpm run coverage-html\n\n# coveralls\u306b\u9001\u4fe1\u3059\u308b\u5834\u5408\uff08\u4e3b\u306bCI\uff09\nnpm run coveralls\n\n\n\u3061\u306a\u307f\u306b\u3001\u3001\u3001\njsdom/mocha\u7248\u3082\u3042\u308a\u307e\u3059\u3002\uff08\u4ee5\u524d\u306f\u3053\u3061\u3089\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\uff09\nhttps://github.com/uryyyyyyy/react-redux-sample/tree/test-jsdom\n\n\n\u307e\u3068\u3081\nReact/Redux\u3060\u3068\u3001\u758e\u7d50\u5408\u306b\u7d44\u3081\u3066\u30c6\u30b9\u30c8\u3082\u7c21\u5358\u306a\u306e\u3067\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\ndispatch\u306e\u3068\u3053\u308d\u306f\u3069\u3046\u3057\u3066\u3082\u578b\u306e\u5236\u7d04\u3092\u3064\u3051\u306b\u304f\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u307e\u3041\u4ed5\u65b9\u306a\u3044\u3067\u3059\u306d\u3002\n\uff08\u305f\u3060\u3001React\u754c\u9688\u306f\u30c7\u30d5\u30a1\u30af\u30c8\u3082\u306a\u304f\u516c\u5f0f\u3082flowtype\u63a8\u3057\u306a\u306e\u3067\u3001\u60c5\u5831\u306f\u5206\u6563\u3057\u3066\u3044\u3066\u30c4\u30e9\u307f\u3002\uff09\nAngular2\u306f\u65e9\u304f\u5b89\u5b9a\u7248\u51fa\u3057\u3066\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5145\u5b9f\u3055\u305b\u3066\u307b\u3057\u3044\uff01\n\n## \u6982\u8981\n\n[TechFeed Live#2 \u300cReact vs Angular2\u300d](http://techfeed.connpass.com/event/38582/)\u306eLT\u8cc7\u6599\u3067\u3059\u3002\n\nAngular2\u3092\u898b\u636e\u3048\u305f\u4e0a\u3067\u306e\u3001React/Redux\u3067\u306e\u30c6\u30b9\u30c8\u306e\u66f8\u304d\u65b9\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3059\u3002\n\n---\n\n## \u3053\u306e\u8cc7\u6599\u3067\u8a71\u3059\u3053\u3068\n\n- \u578b\u3068\u30c6\u30b9\u30c8\u306e\u3042\u308b\u66ae\u3089\u3057\u306b\u3064\u3044\u3066\n- TypeScript\u3092\u7528\u3044\u3066\u306e\u958b\u767a\u304c\u3067\u304d\u308b\n- React/Redux\u3067\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u304c\u66f8\u3051\u308b\n  - \u5bfe\u8c61\u306fReducer/ActionCreator/component\u5168\u3066\n- karma\u3067\u5358\u4f53\u30c6\u30b9\u30c8\u3067\u304d\u308b\n  - \u304b\u3064\u3001\u5168\u4f53\u3067\u306a\u304f\u500b\u5225\u306b\u30c6\u30b9\u30c8\u3092\u56de\u305b\u308b\n- \u30c6\u30b9\u30c8\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u304c\u53d6\u308c\u308b\n  - \u3082\u3061\u308d\u3093TypeScript\u30b3\u30fc\u30c9\u3067\n\n---\n\n## \u578b\u3068\u30c6\u30b9\u30c8\u306e\u3042\u308b\u66ae\u3089\u3057\u306b\u3064\u3044\u3066\n\n---\n\n### \u30c7\u30d5\u30a1\u30af\u30c8\u306e\u958b\u767a\u74b0\u5883\u304c\u307b\u3057\u3044\n\n\u30d5\u30ed\u30f3\u30c8\u5c02\u696d\u3067\u306a\u3044\u30de\u30f3\u3068\u3057\u3066\u306f\u3001\u30d5\u30ed\u30f3\u30c8\u306e\u52d5\u5411\u306f\u8ffd\u3063\u3066\u3066\u304b\u306a\u308a\u3057\u3093\u3069\u3044\u3002\n\u30c7\u30d5\u30a1\u30af\u30c8\u306e\u958b\u767a\u74b0\u5883\u304c\u307b\u3057\u3044\u3002\n\n\u671f\u5f85\u3059\u308b\u3053\u3068\u3068\u3057\u3066\n\n- \u8907\u6570\u4eba\u3067\u3082\u958b\u767a\u3067\u304d\u308b\n  - \u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u304c\u308f\u304b\u308a\u3084\u3059\u3044\n  - \u578b\u304c\u3042\u308b\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u5f79\u5272\u304c\u3042\u3063\u3066\u306a\u304a\u826f\u3044\n- IDE\u306e\u88dc\u5b8c\u30b5\u30dd\u30fc\u30c8\u3084\u9759\u7684\u30c1\u30a7\u30c3\u30af\u3092\u3057\u3066\u307b\u3057\u3044\n  - \u578b\u304c\u3042\u308b\u3068\u826f\u3055\u305d\u3046\n- \u518d\u5229\u7528\u3057\u3084\u3059\u3044\u8a2d\u8a08\u306b\u306a\u3063\u3066\u3044\u308b\n  - \u30c6\u30b9\u30c8\u304c\u7c21\u5358\u306b\u66f8\u3051\u308b\u306f\u305a\n  - \u758e\u7d50\u5408\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\n- \u30ab\u30d0\u30ec\u30c3\u30b8\u53d6\u308a\u305f\u3044\n  - \u958b\u767a\u306eKPI\u306b\u3057\u3084\u3059\u3044\u306e\u3067\n\n\u304c\u3042\u308a\u307e\u3059\u3002\n\n---\n\n### Angular2\u3078\u306e\u671f\u5f85\u3068\u73fe\u72b6\n\n\u306a\u306e\u3067\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u3057\u3066\u300c\u3053\u308c\u306b\u4e57\u3063\u304b\u308c\u3070\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3084\u308b\u3088\u300d\u7684\u306a\u3082\u306e\u304c\u6b32\u3057\u3044\uff01\nAngular2\u306b\u305d\u308c\u3092\u671f\u5f85\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u73fe\u72b6\u306f\n\n- RC\u304cRC\u3058\u3083\u306a\u3044\n  - RC4\u304b\u30895\u306e\u5927\u5e45\u306aAPI\u5909\u66f4\n  - \u3053\u308c\u307e\u3067\u66f8\u304b\u308c\u305f\u8a18\u4e8b\u307b\u3068\u3093\u3069\u53c2\u8003\u306b\u306a\u3089\u306a\u304f\u306a\u3063\u305f\uff1f\n  - \u5b89\u5b9a\u7248\u3082\u5b89\u5b9a\u3067\u306a\u3044\u306e\u3067\u306f\u8aac\u304c\u6d6e\u4e0a\u3001\u3001\n- \u516c\u5f0f\u30b5\u30f3\u30d7\u30eb\u304cSystem.js\u4f7f\u3063\u3066\u308b\n  - \u30d5\u30ed\u30f3\u30c8\u5f37\u3044\u30de\u30f3\u66f0\u304f\u3001\u5b9f\u969b\u306b\u306fwebpack\u306a\u3069\u306b\u306a\u308b\u3068\u306e\u3053\u3068\n  - \u300c\u3048\u3001\u3058\u3083\u3041webpack\u3067\u66f8\u3044\u3066\u3088\u300d\n- \u30c6\u30b9\u30c8\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u307b\u307c\u306a\u3044\n  - \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u540d\u4e57\u308b\u306a\u3089\u9811\u5f35\u3063\u3066\u6b32\u3057\u3044\n  - \u73fe\u72b6\u3001\u30dc\u30a4\u30e9\u30fc\u30d7\u30ec\u30fc\u30c8\u304c\u591a\u305d\u3046\u306a\u4e88\u611f\u304c\u3057\u3066\u3044\u308b\u3002\u3002\n\n\u30c4\u30e9\u307f\u3002\u3002\u3002\n\u306a\u306e\u3067\u4ed5\u65b9\u306a\u304f\u3057\u3070\u3089\u304f\u306fReact\u4f7f\u3046\u3064\u3082\u308a\u3067\u3059\u3002\n\n---\n\n### \u3053\u308c\u304b\u3089\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u5411\u3051\u3066\n\n\u3057\u304b\u3057\u4eca\u306f\u307e\u3060\u30a2\u30ec\u3067\u3082\u3001Angular2\u304c\u63a1\u7528\u3057\u3066\u3044\u308b\u30b9\u30bf\u30c3\u30af\u306b\u4e57\u3063\u304b\u3063\u3066\u304a\u304f\u3053\u3068\u3067\u5f8c\u3005\u697d\u3067\u304d\u305d\u3046\u306a\u6c17\u304c\u3057\u3066\u3044\u307e\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u3001\n\n- Angular2\u3067\u306fTypeScript\u63a8\u5968\n  - \u578b\u306e\u3042\u308b\u4e16\u754c\u3067\u751f\u304d\u3066\u304d\u305f\u306e\u3067\u578b\u6b32\u3057\u3044\u3002\n  - flowtype\u3088\u308aTypeScript\u754c\u9688\u306e\u65b9\u304c\u4eba\u6c17\u3067\u578b\u5b9a\u7fa9\u3082\u5145\u5b9f\u3057\u3066\u305d\u3046\n  - WebStorm\u3082\u3061\u3083\u3093\u3068\u5bfe\u5fdc\u3057\u3066\u304f\u308c\u3066\u3066\u66f8\u304d\u3084\u3059\u3044\n- Angular2\u3067\u306f\u30c6\u30b9\u30c8\u30e9\u30f3\u30ca\u30fc\u306fkarma\u3063\u307d\u3044\n  - jest\u306e\u3088\u3046\u306anode/jsdom\u74b0\u5883\u3067\u306e\u30c6\u30b9\u30c8\u306f\u4e0d\u5b89\n  - \u3084\u3063\u3071\u308a\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u30c6\u30b9\u30c8\u3057\u305f\u3044\n- Angular2\u3067\u306f\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306fjasmine\u3063\u307d\u3044\n  - mocha\u3067\u3082\u3044\u3044\u3051\u3069\u3001\u30c6\u30b9\u30c8\u306a\u3089\u5168\u90e8\u5165\u308a\u306e\u65b9\u304c\u8003\u3048\u308b\u3053\u3068\u304c\u5c11\u306a\u305d\u3046\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u3053\u308c\u3089\u306e\u30b9\u30bf\u30c3\u30af\u3092\u4f7f\u3063\u3066React/redux\u3067\u30c6\u30b9\u30c8\u66f8\u3044\u3066\u307e\u3059\u3002\n\n---\n\n## TypeScript\u3092\u7528\u3044\u3066\u306e\u958b\u767a\u304c\u3067\u304d\u308b\n\n---\n\nQiita\u306b\u307e\u3068\u3081\u3066\u3044\u308b\u3001\n[React + Redux + Typescript\u30b7\u30ea\u30fc\u30ba](http://qiita.com/uryyyyyyy/items/1f2022bbf914d65d635a)\n\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n---\n\n## React/Redux\u3067\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u304c\u66f8\u3051\u308b\n\n---\n\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\n\nhttps://github.com/uryyyyyyy/react-redux-sample/tree/test-karma\n\n---\n\n### \u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n```\ntree src/\nsrc/\n\u251c\u2500\u2500 Counter.tsx\n\u251c\u2500\u2500 DispatchActions.ts\n\u251c\u2500\u2500 Index.tsx\n\u251c\u2500\u2500 Entities.ts\n\u251c\u2500\u2500 Reducer.ts\n\u2514\u2500\u2500 Store.ts\n```\n\n![myimage.gif](https://qiita-image-store.s3.amazonaws.com/0/7185/7a0fd345-7861-c2c3-5944-b0a909aa1e16.gif)\n\n\u7c21\u5358\u306aAction\u3068http\u901a\u4fe1\u3092\u542b\u3080\u4f8b\u3067\u3059\u3002\n\uff08redux\u306eMiddleWare\u3082router\u3082\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u306e\u66f8\u304d\u65b9\u306f\u307b\u307c\u540c\u3058\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\uff09\n\n\u3053\u3053\u3067\u306f\u3001\n\n- Index.tsx\n  - redux\u306estore\u3068component\u306e\u7d50\u3073\u3064\u3051\n- Entities.ts\n  - \u5171\u6709\u306e\u578b\u5b9a\u7fa9\u3092\u7f6e\u304d\u5834\n- Store.ts\u306f\n  - store\u306e\u751f\u6210\n\n\u306a\u306e\u3067\u30c6\u30b9\u30c8\u4e0d\u8981\u3067\u3001\n\n- DispatchActions.ts\n  - http\u901a\u4fe1\u3092\u542b\u3080ActionCreator\u5c64\n- Reducer.ts\n  - \u7d14\u7c8b\u306a\u95a2\u6570\u306b\u306a\u3063\u3066\u308b\u306f\u305a\u306eReducer\u5c64\n- Counter.tsx\n  - view\u751f\u6210\u3068\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u3092\u62c5\u3046Component\u5c64\n\n\u306e\u30c6\u30b9\u30c8\u3092\u5bfe\u8c61\u3068\u3057\u307e\u3059\u3002\n\n---\n\n### karma\u3067\u306e\u30c6\u30b9\u30c8\u306e\u8a2d\u5b9a\n\n- karma\u306ffiles\u306b\u6307\u5b9a\u3057\u305f\u30b3\u30fc\u30c9\u3092\u5168\u90e8\u30c6\u30b9\u30c8\u3059\u308b\n- \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u5168\u90e8\u66f8\u304f\u3068\u30d0\u30f3\u30c9\u30eb\u3068\u30c6\u30b9\u30c8\u5b9f\u65bd\u3067\u3081\u3061\u3083\u304f\u3061\u3083\u6642\u9593\u304b\u304b\u308b\n- \u306a\u306e\u3067\u5f15\u6570\u306b\u4e0e\u3048\u305f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u307f\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\n\n\n```package.json\n\"scripts\": {\n    ...\n    \"test:karma-ut\": \"karma start karma.conf.js\",\n    \"test:karma-all\": \"karma start karma.conf.js **/*-test.tsx **/*-test.ts\",\n    ...\n  },\n```\n\n```karma.conf.js\nconst args = process.argv;\nargs.splice(0, 4);\n\nconst polyfills = [\n  'node_modules/jquery/dist/jquery.min.js'\n];\n\n//\u5f15\u6570\u306b\u4e0e\u3048\u305f\u3082\u306e\u3068\u3001polyfill\u3084\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u8aad\u307e\u305b\u308b\u3082\u306e\u3060\u3051\u3092\u542b\u3081\u308b\u3002\nconst files = polyfills.concat(args);\n\nmodule.exports = function(config) {\n  config.set({\n\n    basePath: '',\n\n    frameworks: ['jasmine'],\n\n    files: files,\n\n    preprocessors: {\n      '**/*-test.ts': ['webpack'],\n      '**/*-test.tsx': ['webpack']\n    },\n\n    webpack: {\n      resolve: {\n        extensions: ['', '.ts', '.js', \".tsx\"]\n      },\n      module: {\n        loaders: [{\n          test: /\\.tsx?$/,\n          loader: \"ts-loader\"\n        }]\n      }\n    },\n\n    reporters: ['mocha'],\n\n    port: 9876,\n\n    colors: true,\n\n    logLevel: config.LOG_INFO,\n\n    autoWatch: false,\n\n    browsers: ['Chrome'],\n\n    singleRun: true,\n\n    concurrency: Infinity\n\n};\n```\n\n\u4f7f\u3044\u65b9\u306f\u3053\u3093\u306a\u611f\u3058\n\n```\n$ npm run test:karma-ut ./src/__test__/Reducer-test.ts \n\n> react-typescript-redux@1.0.0 test:karma-ut /~~~/react-redux-sample\n> karma start karma.conf.js \"./src/__test__/Reducer-test.ts\"\n\n\nSTART:\nHash: f4683f5fa2953dc3a97c\nVersion: webpack 1.13.2\nTime: 7ms\nwebpack: bundle is now VALID.\nwebpack: bundle is now INVALID.\nts-loader: Using typescript@1.8.10 and /~~~/react-redux-sample/tsconfig.json\nHash: 394525184afc475de6c3\nVersion: webpack 1.13.2\nTime: 957ms\n                       Asset     Size  Chunks             Chunk Names\nsrc/__test__/Reducer-test.ts  6.66 kB       0  [emitted]  src/__test__/Reducer-test.ts\nchunk    {0} src/__test__/Reducer-test.ts (src/__test__/Reducer-test.ts) 4.91 kB [rendered]\n    [0] ./src/__test__/Reducer-test.ts 1.15 kB {0} [built]\n    [1] ./src/Reducer.ts 1.4 kB {0} [built]\n    [2] ./src/Entities.ts 370 bytes {0} [built]\n    [3] ./~/object-assign/index.js 1.99 kB {0} [built]\nwebpack: bundle is now VALID.\n07 09 2016 07:20:02.423:INFO [karma]: Karma v1.2.0 server started at http://localhost:9876/\n07 09 2016 07:20:02.424:INFO [launcher]: Launching browser Chrome with unlimited concurrency\n07 09 2016 07:20:02.429:INFO [launcher]: Starting browser Chrome\n07 09 2016 07:20:03.045:INFO [Chrome 53.0.2785 (Linux 0.0.0)]: Connected on socket /#ioetpDIDxOdeFnkTAAAA with id 36106878\n  Reducer\n    \u2714 INCREMENT\n    \u2714 DECREMENT\n    \u2714 FETCH_SUCCESS\n\nFinished in 0.009 secs / 0.001 secs\n\nSUMMARY:\n\u2714 3 tests completed\n```\n\n---\n\n### \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\n#### Counter.tsx\n\n\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3053\u3068\n\n- \u30d1\u30e9\u30e1\u30fc\u30bf\u901a\u308a\u306b\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067\u304d\u3066\u3044\u308b\u304b\n- \u30a4\u30d9\u30f3\u30c8\u3092\u8d77\u3053\u3057\u3066\u3001\u671f\u5f85\u901a\u308a\u306e\u767a\u706b\u304c\u3067\u304d\u3066\u3044\u308b\u304b\n\n```ts:Counter-test.tsx\nimport * as React from \"react\";\nimport {Counter} from \"../Counter\";\nimport {GlobalState} from \"../Entities\";\nimport * as TestUtils from \"react-addons-test-utils\";\nimport * as ReactDOM from \"react-dom\";\n\ndescribe('Counter', () => {\n\n    it('rendering', () => {\n        const actions:any = {};\n        const state: GlobalState = {num: 1, loadingCount: 1};\n        const counterComponent: any = TestUtils.renderIntoDocument(\n            <Counter value={state} actions={actions} />\n        );\n\n        const counterDOM = ReactDOM.findDOMNode(counterComponent);\n        const ps: NodeListOf<HTMLParagraphElement> = counterDOM.getElementsByTagName(\"p\");\n\n        const p0: HTMLParagraphElement = ps[0];\n        expect(p0.textContent).toBe(\"loading\");\n\n        const p1: HTMLParagraphElement = ps[1];\n        expect(p1.textContent).toBe(\"score: 1\");\n    });\n\n    it('click', () => {\n        const spy:any = {fetchAmount: null};\n        spyOn(spy, 'fetchAmount');\n        const state: GlobalState = {num: 0, loadingCount: 0};\n        const counterComponent: any = TestUtils.renderIntoDocument(\n            <Counter value={state} actions={spy} />\n        );\n\n        const counterDOM = ReactDOM.findDOMNode(counterComponent);\n        const buttons: NodeListOf<HTMLButtonElement> = counterDOM.getElementsByTagName(\"button\");\n        const button: HTMLButtonElement = buttons[2];\n\n        TestUtils.Simulate.click(button);\n        expect(spy.fetchAmount).toHaveBeenCalledWith();\n    });\n});\n```\n\n#### DispatchActions.ts\n\n\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3053\u3068\n\n- http\u901a\u4fe1\u30fb\u975e\u540c\u671f\u306e\u51e6\u7406\u304c\u6b63\u3057\u304f\u884c\u3048\u3066\u3044\u308b\u304b\n- \u6b63\u3057\u304faction\u304cdispatch\u3055\u308c\u3066\u3044\u308b\u304b\n\n```ts:DispatchActions-test.ts\nimport {ActionTypes} from \"../Entities\";\nimport {DispatchActions} from \"../DispatchActions\";\nconst request = require('superagent');\nconst mock = require('superagent-mocker')(request);\n\ndescribe('DispatchActions', () => {\n\n\n    beforeEach(() => {\n        mock.clearRoutes()\n    });\n\n    it('increment',  () => {\n        const spy:any = {dispatch: null};\n        spyOn(spy, 'dispatch');\n        const actions = new DispatchActions(spy.dispatch);\n        actions.increment(100);\n        expect(spy.dispatch).toHaveBeenCalledWith({ type: ActionTypes.INCREMENT, amount: 100});\n    });\n\n    it('fetchAmount success',  (done) => {\n\n        mock.get('/api/count', () => ({body: {amount: 100}, status: 200}));\n\n        const spy:any = {dispatch: null};\n        spyOn(spy, 'dispatch');\n        const actions = new DispatchActions(spy.dispatch);\n        actions.fetchAmount().then(() => {\n            expect(spy.dispatch.calls.argsFor(0)[0]).toEqual({ type: ActionTypes.FETCH_REQUEST });\n            expect(spy.dispatch.calls.argsFor(1)[0]).toEqual({ type: ActionTypes.FETCH_SUCCESS, amount: 100 });\n            done();\n        });\n    });\n\n    it('fetchAmount fail',  (done) => {\n\n        mock.get('/api/count', () => ({body: {}, status: 400}));\n\n        const spy:any = {dispatch: null};\n        spyOn(spy, 'dispatch');\n        const actions = new DispatchActions(spy.dispatch);\n        actions.fetchAmount().then(() => {\n            expect(spy.dispatch.calls.argsFor(0)[0]).toEqual({ type: ActionTypes.FETCH_REQUEST });\n            expect(spy.dispatch.calls.argsFor(1)[0]).toEqual({ type: ActionTypes.FETCH_FAIL });\n            done();\n        });\n    });\n});\n```\n\n#### Reducer.ts\n\n\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3053\u3068\n\n- action\u3068state\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u6b63\u3057\u3044state\u3092\u8fd4\u305b\u3066\u3044\u308b\u304b\n\n```ts:Reducer-test.ts\nimport {counter} from \"../Reducer\";\nimport {GlobalState, ActionTypes} from \"../Entities\";\n\ndescribe('Reducer', () => {\n    it('INCREMENT', () => {\n        const state: GlobalState = {num: 4, loadingCount:0};\n        const action = { type: ActionTypes.INCREMENT, amount: 3};\n        const result = counter(state, action);\n        expect(result.num).toBe(state.num + 3);\n        expect(result.loadingCount).toBe(state.loadingCount);\n    });\n\n    it('DECREMENT', () => {\n        const state: GlobalState = {num: -2, loadingCount:0};\n        const action = { type: ActionTypes.DECREMENT, amount: 10};\n        const result = counter(state, action);\n        expect(result.num).toBe(state.num - 10);\n        expect(result.loadingCount).toBe(state.loadingCount);\n    });\n\n    it('FETCH_SUCCESS', () => {\n        const state: GlobalState = {num: -2, loadingCount:1};\n        const action = { type: ActionTypes.FETCH_SUCCESS, amount: 10};\n        const result = counter(state, action);\n        expect(result.num).toBe(state.num + 10);\n        expect(result.loadingCount).toBe(state.loadingCount - 1);\n    });\n});\n```\n---\n\n## \u30c6\u30b9\u30c8\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u304c\u53d6\u308c\u308b\n\n---\n\n\u30ab\u30d0\u30ec\u30c3\u30b8\u3082\u53d6\u308a\u307e\u3059\u3002\u5f0a\u793e\u3067\u306f\u4e3b\u306bcoveralls\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u305d\u308c\u3092\u4f8b\u306b\u6319\u3052\u307e\u3059\u3002\n\u6d41\u308c\u3068\u3057\u3066\u306f\u3001\n\n- TypeScript\u3092js\u306b\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30eb\u3059\u308b\n  - \u30bd\u30fc\u30b9\u30fb\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u5171\u306b\u884c\u3046\n  - \u30bd\u30fc\u30b9\u30de\u30c3\u30d7\u3092\u5410\u3044\u3066\u304a\u304f\n- js\u306e\u30c6\u30b9\u30c8\u3092\u6d41\u3057\u3066\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u53d6\u308b\n- \u53d6\u3063\u305f\u30ab\u30d0\u30ec\u30c3\u30b8\u3068\u30bd\u30fc\u30b9\u30de\u30c3\u30d7\u306b\u5408\u3046\u3088\u3046\u306bremap\u3059\u308b\n- \u4efb\u610f\u306e\u5f62\u5f0f\u3067\u51fa\u529b\u3059\u308b\n  - \u5f0a\u793e\u3067\u306fscala\u30b3\u30fc\u30c9\u3067\u3082\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u53d6\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u306e\u7d50\u679c\u3068\u306e\u30de\u30fc\u30b8\u3082\u3057\u3066\u3044\u308b\n\n\n```package.json\n\"scripts\": {\n    ...\n    \"test:karma-coverage\": \"tsc && karma start karma.conf.js ./dist/**/*-test.js\",\n    \"coverage-html\": \"remap-istanbul -i ./coverage/XXX browser/coverage-final.json -o coverage-report -t html\",\n    \"coveralls\": \"remap-istanbul -i coverage/XXX browser/coverage-final.json -o coverage/coverage-final.json && istanbul report lcov && node mergeCoveralls.es6 < ./coverage/lcov.info\"\n    ...\n  },\n```\n\n```karma.conf.js\nconst args = process.argv;\nargs.splice(0, 4);\n\nconst polyfils = [\n  'node_modules/jquery/dist/jquery.min.js'\n];\n\n//\u5f15\u6570\u306b\u4e0e\u3048\u305f\u3082\u306e\u3068\u3001polyfill\u3084\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u8aad\u307e\u305b\u308b\u3082\u306e\u3060\u3051\u3092\u542b\u3081\u308b\u3002\nvar files = polyfils.concat(args);\n\nmodule.exports = function(config) {\n  config.set({\n\n    //...\n\n    preprocessors: {\n      '**/*-test.js': ['webpack']\n    },\n\n    webpack: {\n      resolve: {\n        extensions: ['', '.ts', '.js', \".tsx\"]\n      },\n      module: {\n       //...\n        postLoaders: [{\n          test: /\\.js/,\n          exclude: /(__test__|node_modules|bower_components)/,\n          loader: 'istanbul-instrumenter'\n        }]\n      }\n    },\n\n    reporters: ['mocha', 'coverage'],\n\n    coverageReporter: {\n      type : 'json',\n      dir : 'coverage/'\n    }\n\n};\n```\n\n\u4f7f\u3044\u65b9\n\n```\n# \u30c6\u30b9\u30c8\u5b9f\u65bd\uff06\u30ab\u30d0\u30ec\u30c3\u30b8\u53d6\u5f97\nnpm run test:karma-coverage\n\n# html\u3067\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u898b\u305f\u3044\u5834\u5408\uff08\u4e3b\u306b\u30ed\u30fc\u30ab\u30eb\uff09\nnpm run coverage-html\n\n# coveralls\u306b\u9001\u4fe1\u3059\u308b\u5834\u5408\uff08\u4e3b\u306bCI\uff09\nnpm run coveralls\n```\n\n---\n\n\u3061\u306a\u307f\u306b\u3001\u3001\u3001\n\njsdom/mocha\u7248\u3082\u3042\u308a\u307e\u3059\u3002\uff08\u4ee5\u524d\u306f\u3053\u3061\u3089\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\uff09\n\nhttps://github.com/uryyyyyyy/react-redux-sample/tree/test-jsdom\n\n---\n\n## \u307e\u3068\u3081\n\nReact/Redux\u3060\u3068\u3001\u758e\u7d50\u5408\u306b\u7d44\u3081\u3066\u30c6\u30b9\u30c8\u3082\u7c21\u5358\u306a\u306e\u3067\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\ndispatch\u306e\u3068\u3053\u308d\u306f\u3069\u3046\u3057\u3066\u3082\u578b\u306e\u5236\u7d04\u3092\u3064\u3051\u306b\u304f\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u307e\u3041\u4ed5\u65b9\u306a\u3044\u3067\u3059\u306d\u3002\n\n\uff08\u305f\u3060\u3001React\u754c\u9688\u306f\u30c7\u30d5\u30a1\u30af\u30c8\u3082\u306a\u304f\u516c\u5f0f\u3082flowtype\u63a8\u3057\u306a\u306e\u3067\u3001\u60c5\u5831\u306f\u5206\u6563\u3057\u3066\u3044\u3066\u30c4\u30e9\u307f\u3002\uff09\n\nAngular2\u306f\u65e9\u304f\u5b89\u5b9a\u7248\u51fa\u3057\u3066\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5145\u5b9f\u3055\u305b\u3066\u307b\u3057\u3044\uff01\n", "tags": ["reactjs", "mocha", "jasmine", "TypeScript"]}