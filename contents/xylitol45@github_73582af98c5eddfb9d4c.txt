{"context": " More than 1 year has passed since last update.Monaca\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u306b\u3088\u308b\u30e6\u30fc\u30b6\u767b\u9332 monaca.cloud.User.register() \u306fusername\u3001password\u306e\u767b\u9332\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u308b\u304c\u3001\u30b9\u30de\u30db\u30a2\u30d7\u30ea\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u767b\u9332\u3055\u305b\u308b\u306e\u306f\u3001\u5c11\u3005\u30e6\u30fc\u30b6\u8ca0\u8377\u304c\u5927\u304d\u3044\u3068\u306f\u601d\u3046\u3002\n\u306a\u306e\u3067\u3001\u30a2\u30d7\u30ea\u5185\u90e8\u30678\u6841\u306e\u9069\u5f53\u306ausername\u3092\u751f\u6210\u3057\u3001\u81ea\u52d5\u767b\u9332\u3055\u305b\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002OnsenUI\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3001AngularJS\u30d9\u30fc\u30b9\u3067\u8a18\u8ff0\u3057\u3066\u307e\u3059\u3002\n\u306a\u304a\u3001\u81ea\u52d5\u30ed\u30b0\u30a4\u30f3API monaca.cloud.User.autoLogin()\u3082\u3042\u308b\u306e\u3060\u3051\u3069\u3001\u5229\u7528\u3057\u306a\u3044\u307b\u3046\u304c\u30ed\u30b8\u30c3\u30af\u304c\u3059\u3063\u304d\u308a\u3059\u308b\u6c17\u304c\u3059\u308b(\u3068\u3044\u3046\u304b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u660e\u8a18\u3055\u308c\u3066\u306a\u3044\u306e\u3067\u61b6\u6e2c\u3067\u3059\u304c\u3001\u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\u306b\u306f\u6709\u52b9\u671f\u9650\u304c\u3042\u308b\u3088\u3046\u306a)\u3002\n\nindex.html\n<!DOCTYPE HTML>\n<html ng-app=\"myApp\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n    <script src=\"components/loader.js\"></script>\n    <link rel=\"stylesheet\" href=\"components/loader.css\">\n    <link rel=\"stylesheet\" href=\"css/style.css\">\n    <script src=\"js/app.js\"></script>\n    <script src=\"js/controller.js\"></script>\n</head>\n<body>  \n\n    <ons-navigator page=\"first.html\" var=\"app.navi\"></ons-navigator>\n\n    <ons-template id=\"first.html\">\n    <div ng-controller=\"firstCtrl as ctrl\">\n        <ons-toolbar>\n            <div class=\"center\">FIRST</div>\n        </ons-toolbar>\n        <div style=\"padding:10px;\">\n        <p ng-show=\"ctrl.loading\"><ons-icon icon='fa-spinner' spin='true' style=\"opacity:0.7;\"></ons-icon> \u63a5\u7d9a\u4e2d...</p>\n        <p ng-hide=\"ctrl.loading\">\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u63a5\u7d9a\u3055\u308c\u3066\u307e\u305b\u3093</p>\n        <p>    \n        <ons-button modifier=\"large\" ng-disabled=\"ctrl.loading\" ng-click=\"ctrl.onGoLogin()\">\u518d\u63a5\u7d9a</ons-button>\n        </p>\n        </div>\n    </div>\n    </ons-template>\n\n    <ons-template id=\"top.html\">\n    <div ng-controller=\"topCtrl as ctrl\">\n        <ons-toolbar>\n            <div class=\"center\">TOP</div>\n        </ons-toolbar>\n        <div style=\"padding:10px;\">\n        {{ctrl.username}}\n        </div> \n    </div>\n    </ons-template>\n\n</body>\n</html>\n\n\n\napp.js\n(function(){\n    'use strict';\n\n    ons.bootstrap(\"myApp\",['onsen','controllerModule'])\n    .factory('shared',[function(){     \n        var _o = {\n            userid:null,\n            username:null,\n            uuid:function(){\n                var S4 = function() {\n                    return (((1+Math.random())*0x10000)|0).toString(16).substring(1).toUpperCase();\n                }   \n                return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4() +S4());\n            },\n            startup:function(){\n                var _d = new $.Deferred,\n                _username = localStorage[\"username\"], _password=localStorage[\"password\"];\n                if (_username !== void 0 && _password !== void 0) {\n                    // \u30ed\u30b0\u30a4\u30f3\n                    monaca.cloud.User.login(_username, _password).then(\n                        function(res){\n                            _o.userid = res.user._id,\n                            _o.username = _username;\n                            _d.resolve(\"OK\");\n                        },\n                        function(err){_d.reject(err);}\n                    );\n                } else {\n                    // \u30e6\u30fc\u30b6\u767b\u9332\n                    // \u65e2\u306b\u767b\u9332\u6e08\u307fusername\u306e\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\n                    _username = _o.uuid().substr(0,8),\n                    _password = _o.uuid();\n                    monaca.cloud.User.register(_username, _password).then(\n                        function(res){\n                            localStorage[\"username\"] = _username;\n                            localStorage[\"password\"] = _password;\n                            _o.userid = res.user._id,\n                            _o.username = _username\n                            _d.resolve(\"OK\");\n                        },\n                        function(err){_d.reject(err);}\n                    );\n                }\n                return _d.promise();\n            }\n        };\n        return _o;            \n    }]);\n\n})();\n\n\n\ncontroller.js\n(function(){\n    'use strict';\n\n    angular.module(\"controllerModule\", [])\n    .controller('firstCtrl',['shared','$scope',function(shared,$scope){        \n        var _this=this;\n        _this.loading = true,\n        _this.onStartup = function(){\n            _this.loading = true;\n            shared.startup().then(\n                function(res){\n                    // \u30ed\u30b0\u30a4\u30f3\u5b8c\u4e86\u5f8c\u306b\u547c\u3073\u51fa\u3055\u308c\u308b    \n                    app.navi.replacePage('top.html',{animation:\"none\"});\n                },\n                function(err){_this.loading=false;$scope.$apply();}\n            );\n        };\n        _this.onStartup();\n    }])\n    .controller('topCtrl',['shared',function(shared){\n        // TOP\u753b\u9762\n        this.username = shared.username;\n    }]);\n\n})();\n\n\nMonaca\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u306b\u3088\u308b\u30e6\u30fc\u30b6\u767b\u9332 *monaca.cloud.User.register()* \u306fusername\u3001password\u306e\u767b\u9332\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u308b\u304c\u3001\u30b9\u30de\u30db\u30a2\u30d7\u30ea\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u767b\u9332\u3055\u305b\u308b\u306e\u306f\u3001\u5c11\u3005\u30e6\u30fc\u30b6\u8ca0\u8377\u304c\u5927\u304d\u3044\u3068\u306f\u601d\u3046\u3002\n\u306a\u306e\u3067\u3001\u30a2\u30d7\u30ea\u5185\u90e8\u30678\u6841\u306e\u9069\u5f53\u306ausername\u3092\u751f\u6210\u3057\u3001\u81ea\u52d5\u767b\u9332\u3055\u305b\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002OnsenUI\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3001AngularJS\u30d9\u30fc\u30b9\u3067\u8a18\u8ff0\u3057\u3066\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u81ea\u52d5\u30ed\u30b0\u30a4\u30f3API *monaca.cloud.User.autoLogin()*\u3082\u3042\u308b\u306e\u3060\u3051\u3069\u3001\u5229\u7528\u3057\u306a\u3044\u307b\u3046\u304c\u30ed\u30b8\u30c3\u30af\u304c\u3059\u3063\u304d\u308a\u3059\u308b\u6c17\u304c\u3059\u308b(\u3068\u3044\u3046\u304b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u660e\u8a18\u3055\u308c\u3066\u306a\u3044\u306e\u3067\u61b6\u6e2c\u3067\u3059\u304c\u3001\u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\u306b\u306f\u6709\u52b9\u671f\u9650\u304c\u3042\u308b\u3088\u3046\u306a)\u3002\n\n\n```html:index.html\n<!DOCTYPE HTML>\n<html ng-app=\"myApp\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n    <script src=\"components/loader.js\"></script>\n    <link rel=\"stylesheet\" href=\"components/loader.css\">\n    <link rel=\"stylesheet\" href=\"css/style.css\">\n    <script src=\"js/app.js\"></script>\n    <script src=\"js/controller.js\"></script>\n</head>\n<body>  \n\n    <ons-navigator page=\"first.html\" var=\"app.navi\"></ons-navigator>\n\n    <ons-template id=\"first.html\">\n    <div ng-controller=\"firstCtrl as ctrl\">\n        <ons-toolbar>\n            <div class=\"center\">FIRST</div>\n        </ons-toolbar>\n        <div style=\"padding:10px;\">\n        <p ng-show=\"ctrl.loading\"><ons-icon icon='fa-spinner' spin='true' style=\"opacity:0.7;\"></ons-icon> \u63a5\u7d9a\u4e2d...</p>\n        <p ng-hide=\"ctrl.loading\">\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u63a5\u7d9a\u3055\u308c\u3066\u307e\u305b\u3093</p>\n        <p>    \n        <ons-button modifier=\"large\" ng-disabled=\"ctrl.loading\" ng-click=\"ctrl.onGoLogin()\">\u518d\u63a5\u7d9a</ons-button>\n        </p>\n        </div>\n    </div>\n    </ons-template>\n\n    <ons-template id=\"top.html\">\n    <div ng-controller=\"topCtrl as ctrl\">\n        <ons-toolbar>\n            <div class=\"center\">TOP</div>\n        </ons-toolbar>\n        <div style=\"padding:10px;\">\n        {{ctrl.username}}\n        </div> \n    </div>\n    </ons-template>\n\n</body>\n</html>\n```\n```js:app.js\n(function(){\n    'use strict';\n\n    ons.bootstrap(\"myApp\",['onsen','controllerModule'])\n    .factory('shared',[function(){     \n        var _o = {\n            userid:null,\n            username:null,\n            uuid:function(){\n                var S4 = function() {\n                    return (((1+Math.random())*0x10000)|0).toString(16).substring(1).toUpperCase();\n                }   \n                return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4() +S4());\n            },\n            startup:function(){\n                var _d = new $.Deferred,\n                _username = localStorage[\"username\"], _password=localStorage[\"password\"];\n                if (_username !== void 0 && _password !== void 0) {\n                    // \u30ed\u30b0\u30a4\u30f3\n                    monaca.cloud.User.login(_username, _password).then(\n                        function(res){\n                            _o.userid = res.user._id,\n                            _o.username = _username;\n                            _d.resolve(\"OK\");\n                        },\n                        function(err){_d.reject(err);}\n                    );\n                } else {\n                    // \u30e6\u30fc\u30b6\u767b\u9332\n                    // \u65e2\u306b\u767b\u9332\u6e08\u307fusername\u306e\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\n                    _username = _o.uuid().substr(0,8),\n                    _password = _o.uuid();\n                    monaca.cloud.User.register(_username, _password).then(\n                        function(res){\n                            localStorage[\"username\"] = _username;\n                            localStorage[\"password\"] = _password;\n                            _o.userid = res.user._id,\n                            _o.username = _username\n                            _d.resolve(\"OK\");\n                        },\n                        function(err){_d.reject(err);}\n                    );\n                }\n                return _d.promise();\n            }\n        };\n        return _o;            \n    }]);\n\n})();\n```\n```js:controller.js\n(function(){\n    'use strict';\n    \n    angular.module(\"controllerModule\", [])\n    .controller('firstCtrl',['shared','$scope',function(shared,$scope){        \n        var _this=this;\n        _this.loading = true,\n        _this.onStartup = function(){\n            _this.loading = true;\n            shared.startup().then(\n                function(res){\n                    // \u30ed\u30b0\u30a4\u30f3\u5b8c\u4e86\u5f8c\u306b\u547c\u3073\u51fa\u3055\u308c\u308b    \n                    app.navi.replacePage('top.html',{animation:\"none\"});\n                },\n                function(err){_this.loading=false;$scope.$apply();}\n            );\n        };\n        _this.onStartup();\n    }])\n    .controller('topCtrl',['shared',function(shared){\n        // TOP\u753b\u9762\n        this.username = shared.username;\n    }]);\n    \n})();\n```\n", "tags": ["monaca", "JavaScript", "AngularJS", "onsenui"]}