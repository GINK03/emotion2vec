{"context": " More than 1 year has passed since last update.\u30d5\u30a1\u30a4\u30eb\u3084\u30d5\u30a9\u30eb\u30c0\u306e\u66f8\u304d\u51fa\u3057\u3092\u3059\u308b\u3068\u304d\u3001\u65e2\u306b\u540c\u540d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u91cd\u8907\u3057\u306a\u3044\u3088\u3046\u306a\u540d\u524d\u3092\u751f\u6210\u3057\u305f\u3044\u3002\n\u5b9f\u306f\u3053\u306e\u50cd\u304d\u3092\u3059\u308b-[NSFileManager _web_pathWithUniqueFilenameForPath:]\u3068\u3044\u3046\u96a0\u3057\u30e1\u30bd\u30c3\u30c9\u304c\u5b58\u5728\u3059\u308b\u3089\u3057\u3044\u306e\u3060\u304c\u3001\u306a\u3093\u3068\u306a\u304f\u4e0d\u5b89\u306a\u306e\u3067\u3053\u306e\u7a0b\u5ea6\u306a\u3089\u3044\u3063\u305d\u66f8\u3044\u3066\u3057\u307e\u3048\uff01\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001NSFileManager\u306b\u30ab\u30c6\u30b4\u30ea\u3092\u8ffd\u52a0\u3002\n@interface NSFileManager (NSFileManagerUniquePathExtention)\n- (NSString *)pathWithUniqueFilenameForPath:(NSString *)path;\n@end\n\n@implementation NSFileManager (NSFileManagerUniquePathExtention)\n\n- (NSString *)pathWithUniqueFilenameForPath:(NSString *)path {\n    if (![self fileExistsAtPath:path]) return [path lastPathComponent];\n\n    NSString *extention = [path pathExtension];\n    NSString *base = [path stringByDeletingPathExtension];\n\n    if (extention.length > 0) extention = [@\".\" stringByAppendingString:extention];\n\n    NSString *prefixZero = @\"\";\n    while ([path length] + [prefixZero length] < NSUIntegerMax) {\n        for (NSUInteger i = 1; i < NSUIntegerMax; i++) {\n            NSString *result = [NSString stringWithFormat:@\"%@-%@%lu%@\", base, prefixZero, i, extention];\n            if (![self fileExistsAtPath:result]) return result;\n        }\n\n        prefixZero = [prefixZero stringByAppendingString:@\"0\"];\n    }\n\n    return nil;\n}\n\n@end\n\n\u30d5\u30a1\u30a4\u30eb\u3001\u30d5\u30a9\u30eb\u30c0\u306e\u3069\u3061\u3089\u3067\u3082\u4f7f\u3048\u308b\u3002\n\u300choge.txt\u300d\u304c\u300choge-1.txt\u300d\u300choge-2.txt\u300d\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\u5f8c\u308d\u306e\u6570\u5024\u304cNSUIntegerMax\u307e\u3067\u3044\u304f\u3068\u306f\u601d\u308f\u306a\u3044\u304c\u3001\u305d\u306e\u3088\u3046\u306a\u5834\u5408\u306f\u6570\u5b57\u306e\u524d\u306b0\u3092\u8ffd\u52a0\u3059\u308b\u3002\nwhile\u30eb\u30fc\u30d7\u3092\u629c\u3051\u308b\u6761\u4ef6\u306f\u9069\u5f53\u3002\u7121\u9650\u30eb\u30fc\u30d7\u306b\u306a\u3089\u306a\u3051\u308c\u3070\u826f\u3044\u3002\n\u30d5\u30a1\u30a4\u30eb\u3084\u30d5\u30a9\u30eb\u30c0\u306e\u66f8\u304d\u51fa\u3057\u3092\u3059\u308b\u3068\u304d\u3001\u65e2\u306b\u540c\u540d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u91cd\u8907\u3057\u306a\u3044\u3088\u3046\u306a\u540d\u524d\u3092\u751f\u6210\u3057\u305f\u3044\u3002\n\n\u5b9f\u306f\u3053\u306e\u50cd\u304d\u3092\u3059\u308b```-[NSFileManager _web_pathWithUniqueFilenameForPath:]```\u3068\u3044\u3046\u96a0\u3057\u30e1\u30bd\u30c3\u30c9\u304c\u5b58\u5728\u3059\u308b\u3089\u3057\u3044\u306e\u3060\u304c\u3001\u306a\u3093\u3068\u306a\u304f\u4e0d\u5b89\u306a\u306e\u3067\u3053\u306e\u7a0b\u5ea6\u306a\u3089\u3044\u3063\u305d\u66f8\u3044\u3066\u3057\u307e\u3048\uff01\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001NSFileManager\u306b\u30ab\u30c6\u30b4\u30ea\u3092\u8ffd\u52a0\u3002\n\n```objc\n@interface NSFileManager (NSFileManagerUniquePathExtention)\n- (NSString *)pathWithUniqueFilenameForPath:(NSString *)path;\n@end\n\n@implementation NSFileManager (NSFileManagerUniquePathExtention)\n\n- (NSString *)pathWithUniqueFilenameForPath:(NSString *)path {\n    if (![self fileExistsAtPath:path]) return [path lastPathComponent];\n    \n    NSString *extention = [path pathExtension];\n    NSString *base = [path stringByDeletingPathExtension];\n    \n    if (extention.length > 0) extention = [@\".\" stringByAppendingString:extention];\n    \n    NSString *prefixZero = @\"\";\n    while ([path length] + [prefixZero length] < NSUIntegerMax) {\n        for (NSUInteger i = 1; i < NSUIntegerMax; i++) {\n            NSString *result = [NSString stringWithFormat:@\"%@-%@%lu%@\", base, prefixZero, i, extention];\n            if (![self fileExistsAtPath:result]) return result;\n        }\n        \n        prefixZero = [prefixZero stringByAppendingString:@\"0\"];\n    }\n    \n    return nil;\n}\n\n@end\n```\n\n\u30d5\u30a1\u30a4\u30eb\u3001\u30d5\u30a9\u30eb\u30c0\u306e\u3069\u3061\u3089\u3067\u3082\u4f7f\u3048\u308b\u3002\n\u300choge.txt\u300d\u304c\u300choge-1.txt\u300d\u300choge-2.txt\u300d\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\u5f8c\u308d\u306e\u6570\u5024\u304cNSUIntegerMax\u307e\u3067\u3044\u304f\u3068\u306f\u601d\u308f\u306a\u3044\u304c\u3001\u305d\u306e\u3088\u3046\u306a\u5834\u5408\u306f\u6570\u5b57\u306e\u524d\u306b0\u3092\u8ffd\u52a0\u3059\u308b\u3002\nwhile\u30eb\u30fc\u30d7\u3092\u629c\u3051\u308b\u6761\u4ef6\u306f\u9069\u5f53\u3002\u7121\u9650\u30eb\u30fc\u30d7\u306b\u306a\u3089\u306a\u3051\u308c\u3070\u826f\u3044\u3002", "tags": ["Objective-C", "Cocoa"]}