{"tags": ["Python", "python3", "NLP", "\u81ea\u7136\u8a00\u8a9e\u51e6\u7406", "MachineLearning"], "context": "( \u8ffd\u8a18 )\n\u884c\u6570 = \u6587\u66f8\u4ef6\u6570 \u00d7 \u3044\u305a\u308c\u304b\u306e\u6587\u66f8\u306b1\u5ea6\u4ee5\u4e0a \u51fa\u73fe\u3057\u305f\u5168\u30c8\u30fc\u30af\u30f3 \n\u306eDataFrame \u3092\u751f\u6210\u3059\u308b\u3068\u898f\u6a21\u304c\u5927\u304d\u304f\u306a\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u69cb\u6210\u306e dict\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3082\u4f5c\u3063\u3066\u307f\u305f\u3044\u3002\n\uff08 2016/02/13 \u518d\u8ffd\u8a18 \uff09\ndict\u578b\u8f9e\u66f8\u3092\u751f\u6210\u3059\u308bPython\u30b9\u30af\u30ea\u30d7\u30c8 \u3092\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u306b\u8d77\u3053\u3057\u307e\u3057\u305f\u3002\n\nHirofumiYashima Qiita\u8a18\u4e8b\uff082016/02/13\uff09 \u300cPython \u3092\u4f7f\u3063\u3066\u3001\u30b3\u30fc\u30d1\u30b9\u30c7\u30fc\u30bf \u304b\u3089 \u540d\u8a5e\u306e\u307f\u62bd\u51fa\u3057\u3066\u3001\u540d\u8a5e\u5168\u4ef6\u5206\u3001\u300c\u540d\u8a5e\u30ea\u30c6\u30e9\u30eb\u5024, tfidf\u5024, okapi25bmi\u5024\u300d\u60c5\u5831 \u3092 \u683c\u7d0d\u3057\u305f \u8f9e\u66f8\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3092\u751f\u6210\u3059\u308b\u30b3\u30fc\u30c9\u4e8b\u4f8b\u300d\n\n\n\npython3\ndict = {\n  '\u30de\u30a4\u30ca\u30b9\u91d1\u5229': {\n    tfidf: [\n      ('doc_1', '0.576'),\n      ('doc_4', '0.012'),\n      ...\n    ],\n    Okapi_25BM: [\n      ('doc_1', '0.437'),\n      ('doc_4', '0.012'),\n      ...\n    ]\n  },\n  '10\u5e74\u7269\u56fd\u50b5': {\n    tfidf: [\n      ('doc_1', '0.386'),\n      ('doc_2', '0.063'),\n      ...\n    ],\n    Okapi_25BM: [\n      ('doc_1', '0.281'),\n      ('doc_2', '0.542'),\n      ...\n    ]\n  },\n  ...\n}\n\n\n\n\n\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u7528\u610f\n\n\uff08 \u53c2\u8003 \uff09\n\nSHANNON LAB (2013/01/01)\u300cpython OrderedDict\u4fbf\u5229\u3060\u304c\u6ce8\u610f\u304c\u5fc5\u8981\u300d\n\n\npyton3\ntmp_document_data = ((\"doc_1\" , \"\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002\"),\n                     (\"doc_2\" , \"FRB\uff08\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\uff09\u306f\u3001\u4f1d\u7d71\u7684\u306a\u7269\u4fa1\u4e0a\u6607\u7387\u3068\u4e26\u3073\u3001\u7c73\u56fd\u306e\u56fd\u5185\u5931\u696d\u7387\u306e\u6c34\u6e96\u3092\u3001\u91d1\u878d\u653f\u7b56\u306e\u8235\u53d6\u308a\u3092\u884c\u3046\u4e0a\u3067\u3001\u4e3b\u8981\u306a\u53c2\u8003\u6570\u5024\u306b\u4f4d\u7f6e\u4ed8\u3051\u3066\u3044\u308b\u3002\"),\n                     (\"doc_3\" , \"\u5e02\u5834\u3067\u306f\u300c\u56fd\u5185\u306e\u6a5f\u95a2\u6295\u8cc7\u5bb6\u306b\u306f\u62bc\u3057\u76ee\u8cb7\u3044\u3092\u5165\u308c\u308b\u52d5\u304d\u304c\u3042\u3063\u305f\u304c\u3001\u6d77\u5916\u6295\u8cc7\u5bb6\u304b\u3089\u306e\u8cb7\u3044\u6ce8\u6587\u306f\u5c11\u306a\u304f\u3001\u5dee\u3057\u5f15\u304d\u3067\u306f\u3084\u3084\u58f2\u308a\u8d8a\u3057\u3002\u8cb7\u3044\u306b\u614e\u91cd\u306b\u306a\u3063\u3066\u3044\u308b\u300d\uff08\u56fd\u5185\u8a3c\u5238\u30c8\u30ec\u30fc\u30c0\u30fc\uff09\u3068\u306e\u58f0\u304c\u3042\u3063\u305f\u3002\")\n                    )\n\nfrom collections import OrderedDict\n\ndocument_dict = OrderedDict()\ntmp_dict = OrderedDict(tmp_document_data)\n\ndocument_dict.update(tmp_dict)\n\ndocuments = list(document_dict.values())\ndocument_titles = list(document_dict.keys())\n\n\n\npyton3\nprint(documents)\n# ['FRB\uff08\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\uff09\u306f\u3001\u4f1d\u7d71\u7684\u306a\u7269\u4fa1\u4e0a\u6607\u7387\u3068\u4e26\u3073\u3001\u7c73\u56fd\u306e\u56fd\u5185\u5931\u696d\u7387\u306e\u6c34\u6e96\u3092\u3001\u91d1\u878d\u653f\u7b56\u306e\u8235\u53d6\u308a\u3092\u884c\u3046\u4e0a\u3067\u3001\u4e3b\u8981\u306a\u53c2\u8003\u6570\u5024\u306b\u4f4d\u7f6e\u4ed8\u3051\u3066\u3044\u308b\u3002', '\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002', '\u5e02\u5834\u3067\u306f\u300c\u56fd\u5185\u306e\u6a5f\u95a2\u6295\u8cc7\u5bb6\u306b\u306f\u62bc\u3057\u76ee\u8cb7\u3044\u3092\u5165\u308c\u308b\u52d5\u304d\u304c\u3042\u3063\u305f\u304c\u3001\u6d77\u5916\u6295\u8cc7\u5bb6\u304b\u3089\u306e\u8cb7\u3044\u6ce8\u6587\u306f\u5c11\u306a\u304f\u3001\u5dee\u3057\u5f15\u304d\u3067\u306f\u3084\u3084\u58f2\u308a\u8d8a\u3057\u3002\u8cb7\u3044\u306b\u614e\u91cd\u306b\u306a\u3063\u3066\u3044\u308b\u300d\uff08\u56fd\u5185\u8a3c\u5238\u30c8\u30ec\u30fc\u30c0\u30fc\uff09\u3068\u306e\u58f0\u304c\u3042\u3063\u305f\u3002']\n\nprint(document_titles)\n# ['doc_2', 'doc_1', 'doc_3']\n\n\n\npyton3\nfrom pprint import pprint\n\ndocuments = [\"\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002\"\\\n            , \"FRB\uff08\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\uff09\u306f\u3001\u4f1d\u7d71\u7684\u306a\u7269\u4fa1\u4e0a\u6607\u7387\u3068\u4e26\u3073\u3001\u7c73\u56fd\u306e\u56fd\u5185\u5931\u696d\u7387\u306e\u6c34\u6e96\u3092\u3001\u91d1\u878d\u653f\u7b56\u306e\u8235\u53d6\u308a\u3092\u884c\u3046\u4e0a\u3067\u3001\u4e3b\u8981\u306a\u53c2\u8003\u6570\u5024\u306b\u4f4d\u7f6e\u4ed8\u3051\u3066\u3044\u308b\u3002\"\\\n            , \"\u5e02\u5834\u3067\u306f\u300c\u56fd\u5185\u306e\u6a5f\u95a2\u6295\u8cc7\u5bb6\u306b\u306f\u62bc\u3057\u76ee\u8cb7\u3044\u3092\u5165\u308c\u308b\u52d5\u304d\u304c\u3042\u3063\u305f\u304c\u3001\u6d77\u5916\u6295\u8cc7\u5bb6\u304b\u3089\u306e\u8cb7\u3044\u6ce8\u6587\u306f\u5c11\u306a\u304f\u3001\u5dee\u3057\u5f15\u304d\u3067\u306f\u3084\u3084\u58f2\u308a\u8d8a\u3057\u3002\u8cb7\u3044\u306b\u614e\u91cd\u306b\u306a\u3063\u3066\u3044\u308b\u300d\uff08\u56fd\u5185\u8a3c\u5238\u30c8\u30ec\u30fc\u30c0\u30fc\uff09\u3068\u306e\u58f0\u304c\u3042\u3063\u305f\u3002\"\\\n            ]\n\n\n\n\ntfidf\u8a08\u7b97\u306f\u3001\u4ee5\u4e0b\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u3092\u62dd\u501f\n\nHateba Blog \u53c2\u8003\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u304b\u3089\u3001tf\u5024\u3001idf\u5024\u3001tf-idf\u5024\u3092\u7b97\u51fa\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u5f0f\u3092\u62dd\u501f\nHatena Blog \u7406\u7cfb\u5927\u5b66\u751f\u304cPython\u3068Java\u3067\u8272\u3005\u9811\u5f35\u308b\u30d6\u30ed\u30b0 (2015/02/21)\u300cPython\u306b\u3088\u308bTF-IDF\u300d\n\uff08 \u95a2\u9023 \uff09\n\nHirofumiYashima Qiita\u8a18\u4e8b\uff082016/01/05\uff09 \u300c\u3010 \u81ea\u7136\u8a00\u8a9e\u51e6\u7406 \u3011\u5bfe\u8c61\u6587\u66f8\u30d5\u30a1\u30a4\u30eb\u7fa4\u306e\u7279\u5fb4\u3092\u6349\u3048\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u30c8\u30fc\u30af\u30f3\u96c6\u5408\uff08\u5019\u88dc\uff09\u3092\u3001\u5168\u51fa\u73fe\u5358\u8a9e\u96c6\u5408\u304b\u3089\u81ea\u52d5\u62bd\u51fa\u3059\u308b\u65b9\u6cd5\u300d\n\n\npyton3\n# tf\u5024\u7b97\u51fa\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\ndef tf(terms, document):\n    tf_values = [document.count(term) for term in terms]\n    return list(map(lambda x: x/sum(tf_values), tf_values))\n\n# idf\u5024\u7b97\u51fa\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\ndef idf(terms, documents):\n    import math\n    return [math.log10(len(documents)/sum([bool(term in document) for document in documents])) for term in terms]\n\n# tf-idf\u5024\u7b97\u51fa\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\ndef tf_idf(terms, documents):\n    return [[_tf*_idf for _tf, _idf in zip(tf(terms, document), idf(terms, documents))] for document in documents]\n\n\n\n\n\ntfidf\u30e1\u30bd\u30c3\u30c9\u306e\u7b2c\u4e00\u5f15\u6570\u306b\u5fc5\u8981\u306a\u3001\u91cd\u8907\u6392\u9664\u3057\u305f\u30c8\u30fc\u30af\u30f3\u30ea\u30b9\u30c8\u3092\u5f97\u308b\n\n\uff08 \u540d\u8a5e\u306e\u307f\uff06\u5206\u304b\u3061\u66f8\u304d\u306b\u3057\u305f\u6587\u66f8\u30c7\u30fc\u30bf\u30ea\u30b9\u30c8\uff08\u30b3\u30fc\u30d1\u30b9\u30fb\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\uff09\u3092\u7528\u610f \uff09\n\npyton3\n# \u30c6\u30ad\u30b9\u30c8\u3092\u7279\u5b9a\u54c1\u8a5e\u306e\u307f\u306e\u30c8\u30fc\u30af\u30f3\u5206\u304b\u3061\u66f8\u304d\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3059\u308b\u30e1\u30bd\u30c3\u30c9\ndef get_token_list(text, hinshi):\n    import MeCab\n    token_list = []\n    mt = MeCab.Tagger(\"-Ochasen -d /usr/local/lib/mecab/dic/mecab-ipadic-neologd\")\n    mt.parse('')\n    node = mt.parseToNode(text)\n    while node:\n        feats = node.feature.split(',')\n        if feats[0] in hinshi :\n            try:\n                token_list.append(node.surface)\n            except:\n                print(\"err: \" + str(node.surface))\n        node = node.next\n    return token_list\n\n\n\npyton3\n>>> pprint([get_token_list(document, [\"\u540d\u8a5e\"])  for document in documents])\n[['\u653f\u5e9c',\n  'GDP',\n  '\u6570\u5024\u76ee\u6a19',\n  '\u660e\u793a',\n  '\u653f\u5e9c',\n  '\u5e74\u660e\u3051',\n  '\u6700\u521d',\n  '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70',\n  '\u666f\u6c17\u5bfe\u7b56',\n  '\u5931\u696d\u7387',\n  '\u8ffd\u52a0',\n  '\u7dcf\u5408',\n  '\u7d4c\u6e08',\n  '\u5bfe\u7b56',\n  '\u6c11\u9593',\n  '\u8b70\u54e1',\n  '\u610f\u898b',\n  '\u6a21\u69d8'],\n ['FRB',\n  '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a',\n  '\u4f1d\u7d71\u7684',\n  '\u7269\u4fa1\u4e0a\u6607\u7387',\n  '\u7c73\u56fd',\n  '\u56fd\u5185',\n  '\u5931\u696d\u7387',\n  '\u6c34\u6e96',\n  '\u91d1\u878d\u653f\u7b56',\n  '\u8235\u53d6\u308a',\n  '\u4e0a',\n  '\u4e3b\u8981',\n  '\u53c2\u8003',\n  '\u6570\u5024'],\n ['\u5e02\u5834',\n  '\u56fd\u5185',\n  '\u6a5f\u95a2\u6295\u8cc7\u5bb6',\n  '\u62bc\u3057\u76ee\u8cb7\u3044',\n  '\u52d5\u304d',\n  '\u6d77\u5916\u6295\u8cc7\u5bb6',\n  '\u6ce8\u6587',\n  '\u5dee\u3057\u5f15\u304d',\n  '\u8d8a\u3057',\n  '\u8cb7\u3044',\n  '\u614e\u91cd',\n  '\u56fd\u5185',\n  '\u8a3c\u5238',\n  '\u30c8\u30ec\u30fc\u30c0\u30fc',\n  '\u58f0']]\n>>> \n\n\n\npyton3\ndoc_token_list = [get_token_list(document, [\"\u540d\u8a5e\"])  for document in documents]\n\n\n\uff08 \u6587\u66f8\u30b3\u30fc\u30d1\u30b9\u30ea\u30b9\u30c8\uff08\u4e8c\u91cd\u30ea\u30b9\u30c8\uff09\u3092flatten\u3057\u3066\u3001\u91cd\u8907\u6392\u9664\u3057\u305f\u30c8\u30fc\u30af\u30f3\u30ea\u30b9\u30c8\u3092\u751f\u6210 \uff09\n\npyton3\nfrom functools import reduce\nfrom operator import add\n\nnoun_token_list  = reduce(add, doc_token_list)\nprint(noun_token_list)\n\n\n['\u653f\u5e9c', 'GDP', '\u6570\u5024\u76ee\u6a19', '\u660e\u793a', '\u653f\u5e9c', '\u5e74\u660e\u3051', '\u6700\u521d', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u666f\u6c17\u5bfe\u7b56', '\u5931\u696d\u7387', '\u8ffd\u52a0', '\u7dcf\u5408', '\u7d4c\u6e08', '\u5bfe\u7b56', '\u6c11\u9593', '\u8b70\u54e1', '\u610f\u898b', '\u6a21\u69d8', 'FRB', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u4f1d\u7d71\u7684', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u7c73\u56fd', '\u56fd\u5185', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u8235\u53d6\u308a', '\u4e0a', '\u4e3b\u8981', '\u53c2\u8003', '\u6570\u5024', '\u5e02\u5834', '\u56fd\u5185', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u52d5\u304d', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u6ce8\u6587', '\u5dee\u3057\u5f15\u304d', '\u8d8a\u3057', '\u8cb7\u3044', '\u614e\u91cd', '\u56fd\u5185', '\u8a3c\u5238', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u58f0']\n\n\uff08 \u91cd\u8907\u3057\u3066\u51fa\u73fe\u3059\u308b\u5358\u8a9e\u3092\u3001\uff11\u56de\u3060\u3051\u51fa\u73fe\u3059\u308b\u3088\u3046\u306b\u76f4\u3059 \uff09\n\npyton3\nunique_token_list = list(set(noun_token_list))\nprint(unique_token_list)\n\n\n['\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19']\n\n\ntfidf\u30e1\u30bd\u30c3\u30c9\u306e\u7b2c\u4e00\u5f15\u6570 \u306b\u5fc5\u8981\u306a\u3001\u91cd\u8907\u6392\u9664\u3057\u305f\u30c8\u30fc\u30af\u30f3\u30ea\u30b9\u30c8 \u304c\u5f97\u3089\u308c\u305f\n\n\n\ntf*idf\u5024\u3092\u7b97\u51fa\n\n\npyton3\ntfidf_per_doc_list = tf_idf(unique_token_list, documents)\npprint(tfidf_per_doc_list)\n\n\n[[0.0,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.0,\n  0.008385298050270535,\n  0.008385298050270535,\n  0.0,\n  0.0,\n  0.04544011949711071,\n  0.04544011949711071,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.0,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.0,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.04544011949711071,\n  0.0,\n  0.022720059748555354],\n [0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.01173941727037875,\n  0.0,\n  0.03180808364797749,\n  0.01173941727037875,\n  0.01173941727037875,\n  0.03180808364797749,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.06361616729595498,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0],\n [0.028065956159980143,\n  0.0,\n  0.028065956159980143,\n  0.0,\n  0.020716618712433087,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.0,\n  0.08419786847994043,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.0,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.0,\n  0.0,\n  0.0]]\n\n\n\nndl, Okapi BMI25 \u8a08\u7b97\u306f\u3001\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3001\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\n\nHatena Blog sonickun.log (2014/11/12) \u300c\u78ba\u7387\u7684\u60c5\u5831\u691c\u7d22 Okapi BM25 \u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u300d\n\nCW(i,j) = [ TF(i,j) * IDF(i) * (K1 + 1) ] / [ K1 * (1 - b + (b * NDL(j)) + TF(i,j) ]\nDL(j) = \u6587\u66f8Dj\u306e\u7dcf\u5358\u8a9e\u6570\n\u3068\u3057\u305f\u3068\u304d\nNDL(j) = DL(j) / (\u3059\u3079\u3066\u306e\u6587\u66f8\u306e\u5e73\u5747DL)\n\n\nHatena Blog (2013/10/15) \u65e7\u307f\u305a\u304e\u308f\u30d6\u30ed\u30b0\u300cOkapi BM25 \u5b9f\u88c5\u65b9\u6cd5\u300d\n\n( dl )\n\npyton3\ndef dl(document_list):\n    return [len(set(document)) for document in document_list]\n\n\n\npyton3\ndl_list = dl(doc_token_list)\nprint(dl_list)\n\n\n[17, 14, 14]\n\n(mean_dl)\n\npyton3\nimport numpy as np\nmean_dl = np.mean(dl_list)\nprint(mean_dl)\n\n\n15.0\n\nndl\u5024\u3092\u7b97\u51fa\n\npyton3\nndl_list = dl_list / mean_dl\nprint(ndl_list)\n# array([ 1.13333333,  0.93333333,  0.93333333])\n\nndl_list = list(dl_list / mean_dl)\nprint(ndl_list)\n\n\n[1.1333333333333333, 0.93333333333333335, 0.93333333333333335] \n\n\nOkapi BMI25\u5024\u3092\u7b97\u51fa\n\n( tf\u30ea\u30b9\u30c8 )\n\npyton3\ntf_list = [tf(unique_token_list, document) for document in documents]\nlen(tf_list) # Doc\u306e\u4ef6\u6570\u3060\u3051\u3001tf\u30ea\u30b9\u30c8\u304c\u51fa\u529b\u3055\u308c\u308b\uff08\u5404\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u6570\u306f\u3001\u5404Doc\u306e\u30c8\u30fc\u30af\u30f3\u500b\u6570\uff09\n#3\nlen(tf_list[0])\n#43\nlen(tf_list[1])\n#43\nlen(tf_list[2])\n#43 \nprint(tf_list)\n\n\n[[0.0, 0.047619047619047616, 0.0, 0.0, 0.0, 0.047619047619047616, 0.0, 0.047619047619047616, 0.047619047619047616, 0.0, 0.0, 0.09523809523809523, 0.09523809523809523, 0.047619047619047616, 0.0, 0.0, 0.0, 0.047619047619047616, 0.047619047619047616, 0.047619047619047616, 0.0, 0.0, 0.0, 0.0, 0.047619047619047616, 0.047619047619047616, 0.0, 0.047619047619047616, 0.047619047619047616, 0.0, 0.0, 0.047619047619047616, 0.0, 0.047619047619047616, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.09523809523809523, 0.0, 0.047619047619047616], [0.0, 0.0, 0.0, 0.06666666666666667, 0.06666666666666667, 0.0, 0.06666666666666667, 0.06666666666666667, 0.06666666666666667, 0.06666666666666667, 0.06666666666666667, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.0, 0.0, 0.06666666666666667, 0.0, 0.13333333333333333, 0.0, 0.0, 0.0, 0.0, 0.06666666666666667, 0.0], [0.058823529411764705, 0.0, 0.058823529411764705, 0.0, 0.11764705882352941, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.058823529411764705, 0.058823529411764705, 0.058823529411764705, 0.0, 0.0, 0.0, 0.0, 0.058823529411764705, 0.058823529411764705, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.058823529411764705, 0.0, 0.17647058823529413, 0.0, 0.0, 0.058823529411764705, 0.0, 0.058823529411764705, 0.058823529411764705, 0.058823529411764705, 0.0, 0.0, 0.0]]\n\n( idf\u30ea\u30b9\u30c8 )\n\npyton3\nidf_list = [idf(unique_token_list, documents)]\nprint(len(idf_list))\nprint(len(idf_list))\n# 1\nprint(len(idf_list[0]))\n# 43\nidf_list = idf_list[0]\n\n\n\u91cd\u8907\u6392\u9664\u3057\u305f\uff08\u5168\u6587\u66f8\u306e\u3044\u305a\u308c\u304b\uff11\u56de\u4ee5\u4e0a\u3001\u51fa\u73fe\u3059\u308b\uff09\u5168\u30c8\u30fc\u30af\u30f3\uff08\u540d\u8a5e\uff09\u306e\u500b\u6570\u500b\u5206\u3001idf\u5024\u304c\u751f\u6210\u3055\u308c\u308b\n\npyton3\nprint(len(unique_token_list))\n#43\n\n\n\npyton3\nprint(idf_list)\n\n\n[[0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.17609125905568124, 0.47712125471966244, 0.47712125471966244, 0.17609125905568124, 0.17609125905568124, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244]]\n\n>>> for i in list(range(len(tf_list))):\n...     print(i)\n... \n0\n1\n2\n\n\npyton3\ndef okappi_25(unique_token_list, tf_list, ndl_list, param_k, param_b):\n    okkapi_list = []\n    for doc_index in list(range(len(documents))):\n        for token_index in list(range(len(unique_token_list))):\n            okkapi_25bmi = (tf_list[doc_index][token_index] * idf_list[token_index] * (param_k + 1)) / (param_k * ( 1 - param_b + (param_b * ndl_list[doc_index] + tf_list[doc_index][token_index])) + tf_list[doc_index][token_index])\n            okkapi_list.append(okkapi_25bmi)\n    return okkapi_list\n\n\nokappi_list = okappi_25bmi(unique_token_list, tf_list, ndl_list, 2, 0.75)\nprint(okappi_list)\n\n\n[0.0, 0.029092759434125759, 0.0, 0.0, 0.0, 0.029092759434125759, 0.0, 0.010737271893639102, 0.010737271893639102, 0.0, 0.0, 0.054841523530995681, 0.054841523530995681, 0.029092759434125759, 0.0, 0.0, 0.0, 0.029092759434125759, 0.029092759434125759, 0.029092759434125759, 0.0, 0.0, 0.0, 0.0, 0.029092759434125759, 0.029092759434125759, 0.0, 0.029092759434125759, 0.029092759434125759, 0.0, 0.0, 0.029092759434125759, 0.0, 0.029092759434125759, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.054841523530995681, 0.0, 0.029092759434125759, 0.0, 0.0, 0.0, 0.045440119497110701, 0.016770596100541071, 0.0, 0.045440119497110701, 0.016770596100541071, 0.016770596100541071, 0.045440119497110701, 0.045440119497110701, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.0, 0.0, 0.045440119497110701, 0.0, 0.082977609516463033, 0.0, 0.0, 0.0, 0.0, 0.045440119497110701, 0.0, 0.040548548559744685, 0.0, 0.040548548559744685, 0.0, 0.027586098024388706, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.040548548559744685, 0.040548548559744685, 0.040548548559744685, 0.0, 0.0, 0.0, 0.0, 0.040548548559744685, 0.040548548559744685, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.040548548559744685, 0.0, 0.10397315478152451, 0.0, 0.0, 0.040548548559744685, 0.0, 0.040548548559744685, 0.040548548559744685, 0.040548548559744685, 0.0, 0.0, 0.0]\n\n\npyton3\nprint(len(okappi_list))\n#129\n\n\n\n\n\u3053\u308c\u307e\u3067\u5f97\u3066\u304d\u305f\u30ea\u30b9\u30c8\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8981\u7d20\u306b\u542b\u3080 pandas.DataFrame \u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\n\n\u6587\u66f8\u540d\u30e9\u30d9\u30eb\u3092\u3001unique\u306atoken\u306e\u4ef6\u6570\u5206\u3001\u751f\u6210\n\uff08DataFrame \u306e\u306a\u304b\u3067\u3001\uff11\u6587\u66f8\u3042\u305f\u308a\u3001unique token\u6570\u5206\u306e\u884c\u306e\u8981\u7d20\u3092\u6301\u305f\u305b\u308b\u305f\u3081\uff09\n\npyton3\n>>> doc_list = []\n>>> \n>>> for title in document_titles:\n...     for i in list(range(len(unique_token_list))):\n...         doc_list.append(title)\n... \n>>> \n>>> print(doc_list)\n['doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3']\n>>> \n>>> print(len(doc_list))\n129\n\n\nunique \u306a token\u30ea\u30b9\u30c8\u3092\u3001\u6587\u66f8\u306e\u6570\u3060\u3051\u751f\u6210\n\npyton3\n>>> unique_token_list_ = []\n>>> unique_token_list_ =  unique_token_list * len(documents)\n>>> print(unique_token_list_)\n['\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19', '\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19', '\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19']\nprint(len(unique_token_list_))\n129\n>>> \n\n\ntfidf\u30ea\u30b9\u30c8\u306f\u4e8c\u91cd\u30ea\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u5185\u5074\u306e\u30ea\u30b9\u30c8\u3092flatten\u51e6\u7406\u3057\u3066\u5916\u3059\n\npyton3\n>>> tfidf_list_  = reduce(add, tfidf_per_doc_list)\n>>> print(len(tfidf_list_))\n129\n>>> print(tfidf_list_)\n[0.0, 0.022720059748555354, 0.0, 0.0, 0.0, 0.022720059748555354, 0.0, 0.008385298050270535, 0.008385298050270535, 0.0, 0.0, 0.04544011949711071, 0.04544011949711071, 0.022720059748555354, 0.0, 0.0, 0.0, 0.022720059748555354, 0.022720059748555354, 0.022720059748555354, 0.0, 0.0, 0.0, 0.0, 0.022720059748555354, 0.022720059748555354, 0.0, 0.022720059748555354, 0.022720059748555354, 0.0, 0.0, 0.022720059748555354, 0.0, 0.022720059748555354, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.04544011949711071, 0.0, 0.022720059748555354, 0.0, 0.0, 0.0, 0.03180808364797749, 0.01173941727037875, 0.0, 0.03180808364797749, 0.01173941727037875, 0.01173941727037875, 0.03180808364797749, 0.03180808364797749, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.0, 0.0, 0.03180808364797749, 0.0, 0.06361616729595498, 0.0, 0.0, 0.0, 0.0, 0.03180808364797749, 0.0, 0.028065956159980143, 0.0, 0.028065956159980143, 0.0, 0.020716618712433087, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.028065956159980143, 0.028065956159980143, 0.028065956159980143, 0.0, 0.0, 0.0, 0.0, 0.028065956159980143, 0.028065956159980143, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.028065956159980143, 0.0, 0.08419786847994043, 0.0, 0.0, 0.028065956159980143, 0.0, 0.028065956159980143, 0.028065956159980143, 0.028065956159980143, 0.0, 0.0, 0.0]\n\n\nDataFrame\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u306e\u5404\u5217\u3092\u69cb\u6210\u3059\u308b\u30c7\u30fc\u30bf\u304c\u3001\u3059\u3079\u3066\u540c\u3058\u8981\u7d20\u6570\uff08DataFrme\u306e\u884c\u6570\u306b\u306a\u308b\uff09\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\npyton3\nprint(len(unique_token_list_))\n# 129\nprint(len(doc_list))\n# 129\nprint(len(tfidf_list_))\n# 129\nprint(len(okapi_list))\n# 129\n\n\n\npandas.DataFrame\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3092\u751f\u6210\n\n\npyton3\nimport pandas as pd\n\ntoken_attribute_pd  =  pd.DataFrame({'token': unique_token_list_,\n                                     'document' :  doc_list,\n                                     'tfidf' : tfidf_list_,\n                                     'okapi_25' : okapi_list\n                                    })\n\n\npprint(token_attribute_pd)\n\n\n\n\u6c42\u3081\u308bDataFrame\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5f97\u3089\u308c\u305f\u3002\n\n\npyton3\n    document  okapi_25     tfidf       token\n0      doc_1  0.000000  0.000000        \u5dee\u3057\u5f15\u304d\n1      doc_1  0.002607  0.022720         \u5e74\u660e\u3051\n2      doc_1  0.000000  0.000000          \u614e\u91cd\n3      doc_1  0.000000  0.000000          \u53c2\u8003\n4      doc_1  0.000000  0.000000          \u56fd\u5185\n5      doc_1  0.002607  0.022720          \u6700\u521d\n6      doc_1  0.000000  0.000000         \u4f1d\u7d71\u7684\n7      doc_1  0.000962  0.008385          \u6570\u5024\n8      doc_1  0.000962  0.008385         \u5931\u696d\u7387\n9      doc_1  0.000000  0.000000          \u6c34\u6e96\n10     doc_1  0.000000  0.000000        \u91d1\u878d\u653f\u7b56\n11     doc_1  0.005186  0.045440          \u653f\u5e9c\n12     doc_1  0.005186  0.045440          \u5bfe\u7b56\n13     doc_1  0.002607  0.022720        \u666f\u6c17\u5bfe\u7b56\n14     doc_1  0.000000  0.000000          \u52d5\u304d\n15     doc_1  0.000000  0.000000       \u30c8\u30ec\u30fc\u30c0\u30fc\n16     doc_1  0.000000  0.000000          \u6ce8\u6587\n17     doc_1  0.002607  0.022720          \u610f\u898b\n18     doc_1  0.002607  0.022720          \u6c11\u9593\n19     doc_1  0.002607  0.022720          \u660e\u793a\n20     doc_1  0.000000  0.000000          \u7c73\u56fd\n21     doc_1  0.000000  0.000000       \u6a5f\u95a2\u6295\u8cc7\u5bb6\n22     doc_1  0.000000  0.000000          \u5e02\u5834\n23     doc_1  0.000000  0.000000         FRB\n24     doc_1  0.002607  0.022720         GDP\n25     doc_1  0.002607  0.022720          \u8ffd\u52a0\n26     doc_1  0.000000  0.000000       \u7269\u4fa1\u4e0a\u6607\u7387\n27     doc_1  0.002607  0.022720          \u6a21\u69d8\n28     doc_1  0.002607  0.022720          \u7dcf\u5408\n29     doc_1  0.000000  0.000000         \u8235\u53d6\u308a\n..       ...       ...       ...         ...\n99     doc_3  0.000000  0.000000        \u666f\u6c17\u5bfe\u7b56\n100    doc_3  0.003884  0.028066          \u52d5\u304d\n101    doc_3  0.003884  0.028066       \u30c8\u30ec\u30fc\u30c0\u30fc\n102    doc_3  0.003884  0.028066          \u6ce8\u6587\n103    doc_3  0.000000  0.000000          \u610f\u898b\n104    doc_3  0.000000  0.000000          \u6c11\u9593\n105    doc_3  0.000000  0.000000          \u660e\u793a\n106    doc_3  0.000000  0.000000          \u7c73\u56fd\n107    doc_3  0.003884  0.028066       \u6a5f\u95a2\u6295\u8cc7\u5bb6\n108    doc_3  0.003884  0.028066          \u5e02\u5834\n109    doc_3  0.000000  0.000000         FRB\n110    doc_3  0.000000  0.000000         GDP\n111    doc_3  0.000000  0.000000          \u8ffd\u52a0\n112    doc_3  0.000000  0.000000       \u7269\u4fa1\u4e0a\u6607\u7387\n113    doc_3  0.000000  0.000000          \u6a21\u69d8\n114    doc_3  0.000000  0.000000          \u7dcf\u5408\n115    doc_3  0.000000  0.000000         \u8235\u53d6\u308a\n116    doc_3  0.003884  0.028066           \u58f0\n117    doc_3  0.000000  0.000000    \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n118    doc_3  0.011466  0.084198          \u8cb7\u3044\n119    doc_3  0.000000  0.000000          \u8b70\u54e1\n120    doc_3  0.000000  0.000000  \u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\n121    doc_3  0.003884  0.028066       \u6d77\u5916\u6295\u8cc7\u5bb6\n122    doc_3  0.000000  0.000000           \u4e0a\n123    doc_3  0.003884  0.028066       \u62bc\u3057\u76ee\u8cb7\u3044\n124    doc_3  0.003884  0.028066          \u8a3c\u5238\n125    doc_3  0.003884  0.028066          \u8d8a\u3057\n126    doc_3  0.000000  0.000000          \u7d4c\u6e08\n127    doc_3  0.000000  0.000000          \u4e3b\u8981\n128    doc_3  0.000000  0.000000        \u6570\u5024\u76ee\u6a19\n\n[129 rows x 4 columns]\n\n\n\u8868\u793a\u304c\u7701\u7565\u3055\u308c\u305fdoc_2\u306e\u30c7\u30fc\u30bf\n\npyton3\nprint(token_attribute_pd[token_attribute_pd[\"document\"]==\"doc_2\"])\n\n\n   document  okapi_25     tfidf       token\n43    doc_2  0.000000  0.000000        \u5dee\u3057\u5f15\u304d\n44    doc_2  0.000000  0.000000         \u5e74\u660e\u3051\n45    doc_2  0.000000  0.000000          \u614e\u91cd\n46    doc_2  0.004397  0.031808          \u53c2\u8003\n47    doc_2  0.001623  0.011739          \u56fd\u5185\n48    doc_2  0.000000  0.000000          \u6700\u521d\n49    doc_2  0.004397  0.031808         \u4f1d\u7d71\u7684\n50    doc_2  0.001623  0.011739          \u6570\u5024\n51    doc_2  0.001623  0.011739         \u5931\u696d\u7387\n52    doc_2  0.004397  0.031808          \u6c34\u6e96\n53    doc_2  0.004397  0.031808        \u91d1\u878d\u653f\u7b56\n54    doc_2  0.000000  0.000000          \u653f\u5e9c\n55    doc_2  0.000000  0.000000          \u5bfe\u7b56\n56    doc_2  0.000000  0.000000        \u666f\u6c17\u5bfe\u7b56\n57    doc_2  0.000000  0.000000          \u52d5\u304d\n58    doc_2  0.000000  0.000000       \u30c8\u30ec\u30fc\u30c0\u30fc\n59    doc_2  0.000000  0.000000          \u6ce8\u6587\n60    doc_2  0.000000  0.000000          \u610f\u898b\n61    doc_2  0.000000  0.000000          \u6c11\u9593\n62    doc_2  0.000000  0.000000          \u660e\u793a\n63    doc_2  0.004397  0.031808          \u7c73\u56fd\n64    doc_2  0.000000  0.000000       \u6a5f\u95a2\u6295\u8cc7\u5bb6\n65    doc_2  0.000000  0.000000          \u5e02\u5834\n66    doc_2  0.004397  0.031808         FRB\n67    doc_2  0.000000  0.000000         GDP\n68    doc_2  0.000000  0.000000          \u8ffd\u52a0\n69    doc_2  0.004397  0.031808       \u7269\u4fa1\u4e0a\u6607\u7387\n70    doc_2  0.000000  0.000000          \u6a21\u69d8\n71    doc_2  0.000000  0.000000          \u7dcf\u5408\n72    doc_2  0.004397  0.031808         \u8235\u53d6\u308a\n73    doc_2  0.000000  0.000000           \u58f0\n74    doc_2  0.000000  0.000000    \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n75    doc_2  0.000000  0.000000          \u8cb7\u3044\n76    doc_2  0.000000  0.000000          \u8b70\u54e1\n77    doc_2  0.004397  0.031808  \u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\n78    doc_2  0.000000  0.000000       \u6d77\u5916\u6295\u8cc7\u5bb6\n79    doc_2  0.008715  0.063616           \u4e0a\n80    doc_2  0.000000  0.000000       \u62bc\u3057\u76ee\u8cb7\u3044\n81    doc_2  0.000000  0.000000          \u8a3c\u5238\n82    doc_2  0.000000  0.000000          \u8d8a\u3057\n83    doc_2  0.000000  0.000000          \u7d4c\u6e08\n84    doc_2  0.004397  0.031808          \u4e3b\u8981\n85    doc_2  0.000000  0.000000        \u6570\u5024\u76ee\u6a19\n\n\u5404Doc\u306b\u3064\u3044\u3066\u3001\u5168Doc\u4e2d\u3001\uff11\u56de\u4ee5\u4e0a\u51fa\u73fe\u3059\u308b\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u3001tfidf, okapi \u3092\u51fa\u529b\u3057\u3066\u3044\u308b\u3002\n\u3042\u308bDoc\u4e2d\u3001\u51fa\u73fe\u3057\u306a\u3044\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u306f\u3001tfidf, opapi \u304c 0 \u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u308b\n\npyton3\n>>> \n>>> document_dict[\"doc_1\"]\n'\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002'\n>>> \n>>> \"\u5dee\u3057\u5f15\u304d\" in document_dict[\"doc_1\"]\nFalse\n>>> \n>>> \"\u5e74\u660e\u3051\" in document_dict[\"doc_1\"]\nTrue\n>>> \n>>> \"\u614e\u91cd\" in document_dict[\"doc_1\"]\nFalse\n>>> \n>>> \"\u8a3c\u5238\" in document_dict[\"doc_3\"]\nTrue\n>>> \n>>> \"\u6570\u5024\u76ee\u6a19\" in document_dict[\"doc_3\"]\nFalse\n>>> \n\n\n\npyton3\n>>> \n>>> print(token_attribute_pd[token_attribute_pd[\"token\"]==\"\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\"])\n    document  okapi_25    tfidf     token\n31     doc_1  0.002607  0.02272  \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n74     doc_2  0.000000  0.00000  \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n117    doc_3  0.000000  0.00000  \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n>>>\n>>> print(token_attribute_pd[token_attribute_pd[\"token\"]==\"\u6570\u5024\u76ee\u6a19\"])\n    document  okapi_25    tfidf token\n42     doc_1  0.002607  0.02272  \u6570\u5024\u76ee\u6a19\n85     doc_2  0.000000  0.00000  \u6570\u5024\u76ee\u6a19\n128    doc_3  0.000000  0.00000  \u6570\u5024\u76ee\u6a19\n>>>\n>>> print(token_attribute_pd[token_attribute_pd[\"token\"]==\"\u4f1d\u7d71\u7684\"])\ndocument  okapi_25     tfidf token\n6     doc_1  0.000000  0.000000   \u4f1d\u7d71\u7684\n49    doc_2  0.004397  0.031808   \u4f1d\u7d71\u7684\n92    doc_3  0.000000  0.000000   \u4f1d\u7d71\u7684\n>>>\n\n\n\n\n\u3010 \u5fdc\u7528 \u3011\n\n\u30fb \u5404\u6587\u66f8\u306b\u6b63\u89e3\u30e9\u30d9\u30eb \u3092\u4e0e\u3048\u305f\u300c\u6559\u5e2b\u3042\u308a\u5b66\u7fd2\u300d\u3067\u3001\"\u5404\u6587\u66f8\u304c\u6301\u3064 \u3069\u306e\u5358\u8a9e\u306etfidf\u5024 or Okapi25BMI\u5024 \u304c\u3069\u306e\u5024\u3067\u3042\u308b\u3068\u3001\u3042\u308b\u6587\u66f8\u304c\u3042\u308b\u6587\u66f8\u30e9\u30d9\u30eb\u306b\u8a72\u5f53\u3059\u308b\u6587\u66f8\u3067\u3042\u308b\u3068\u307f\u306a\u305b\u305d\u3046\u304b\"\u3001\u30af\u30e9\u30b9\u5224\u5b9a\u30b7\u30b9\u30c6\u30e0\uff08\u63a8\u5b9a\u5668\uff09 \u3092\u3001RandomForest \u306a\u3069\u3067\u4f5c\u6210\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u30fb \u300c\u6559\u5e2b\u306a\u3057\u5b66\u7fd2\u300d \u306e k-means\u6cd5 \u3084 \u968e\u5c64\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u6cd5\u3001SVM \u3084 DeepLearning \u3092\u7528\u3044\u3066\u3001\u30c7\u30fc\u30bf\u304b\u3089\u3001\u5404\u6587\u66f8\u3092\u3069\u306e\u3088\u3046\u306b\u30b0\u30eb\u30fc\u30d7\u5206\u3051\u3067\u304d\u308b\u304b\u3092\u3001\u4eba\u9593\u306e\u5148\u5165\u89b3\u3092\u6301\u3061\u8fbc\u307e\u305a\u306b\u3001Data driven \u306b\u30b0\u30eb\u30fc\u30d7\u751f\u6210\u3055\u305b\u3089\u308c\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\uff08\u5404\u30b0\u30eb\u30fc\u30d7\u306e\u300c\u610f\u5473\u5408\u3044\u300d\u306f\u3001\u6a5f\u68b0\u5b66\u7fd2\u304c\u63d0\u6848\u3057\u305f\u5404\u30b0\u30eb\u30fc\u30d7\u306b\u542b\u307e\u308c\u308b\u6587\u66f8\u3092\u3001\u4eba\u9593\u304c\u300c\u4e8b\u5f8c\u7684\u306b\u300d\u8997\u304d\u8fbc\u3080\u3053\u3068\u3067\u8003\u3048\u3066\u3001\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u540d\u3065\u3051\u308b\u30a4\u30e1\u30fc\u30b8\uff09\n\n\u6b63\u89e3\u30e9\u30d9\u30eb\u306e\u4f8b\n\u3000\u30cb\u30e5\u30fc\u30b9\u8a18\u4e8b\u3067\u3042\u308c\u3070\u3001\u653f\u6cbb\u9762\u3001\u56fd\u969b\u9762\u3001\u7d4c\u6e08\u9762\u3001\u751f\u6d3b\u9762\u3001\u793e\u4f1a\u9762\u3001\u6587\u5316\u79d1\u5b66\u9762\u306a\u3069\u3001\u8a18\u4e8b\u306e\u4ed5\u5206\u3051\u81ea\u52d5\u5316\u3055\u305b\u305f\u3044 \u306a\u3093\u3089\u304b\u306e\u8a18\u4e8b\u5c5e\u6027\u30e9\u30d9\u30eb\n\n__( \u8ffd\u8a18 )__\n\n\u884c\u6570 = \u6587\u66f8\u4ef6\u6570 \u00d7 \u3044\u305a\u308c\u304b\u306e\u6587\u66f8\u306b1\u5ea6\u4ee5\u4e0a \u51fa\u73fe\u3057\u305f\u5168\u30c8\u30fc\u30af\u30f3 \n\u306eDataFrame \u3092\u751f\u6210\u3059\u308b\u3068\u898f\u6a21\u304c\u5927\u304d\u304f\u306a\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u69cb\u6210\u306e dict\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3082\u4f5c\u3063\u3066\u307f\u305f\u3044\u3002\n\n__\uff08 2016/02/13 \u518d\u8ffd\u8a18 \uff09__\n\ndict\u578b\u8f9e\u66f8\u3092\u751f\u6210\u3059\u308bPython\u30b9\u30af\u30ea\u30d7\u30c8 \u3092\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u306b\u8d77\u3053\u3057\u307e\u3057\u305f\u3002\n\n* [HirofumiYashima Qiita\u8a18\u4e8b\uff082016/02/13\uff09 \u300cPython \u3092\u4f7f\u3063\u3066\u3001\u30b3\u30fc\u30d1\u30b9\u30c7\u30fc\u30bf \u304b\u3089 \u540d\u8a5e\u306e\u307f\u62bd\u51fa\u3057\u3066\u3001\u540d\u8a5e\u5168\u4ef6\u5206\u3001\u300c\u540d\u8a5e\u30ea\u30c6\u30e9\u30eb\u5024, tfidf\u5024, okapi25bmi\u5024\u300d\u60c5\u5831 \u3092 \u683c\u7d0d\u3057\u305f \u8f9e\u66f8\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3092\u751f\u6210\u3059\u308b\u30b3\u30fc\u30c9\u4e8b\u4f8b\u300d](http://qiita.com/HirofumiYashima/items/05a1d0afc8c805327f51)\n\n___\n\n```{python3:python3}\ndict = {\n  '\u30de\u30a4\u30ca\u30b9\u91d1\u5229': {\n    tfidf: [\n      ('doc_1', '0.576'),\n      ('doc_4', '0.012'),\n      ...\n    ],\n    Okapi_25BM: [\n      ('doc_1', '0.437'),\n      ('doc_4', '0.012'),\n      ...\n    ]\n  },\n  '10\u5e74\u7269\u56fd\u50b5': {\n    tfidf: [\n      ('doc_1', '0.386'),\n      ('doc_2', '0.063'),\n      ...\n    ],\n    Okapi_25BM: [\n      ('doc_1', '0.281'),\n      ('doc_2', '0.542'),\n      ...\n    ]\n  },\n  ...\n}\n```\n\n___\n\n###__\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u7528\u610f__\n\n__\uff08 \u53c2\u8003 \uff09__\n\n* [SHANNON LAB (2013/01/01)\u300cpython OrderedDict\u4fbf\u5229\u3060\u304c\u6ce8\u610f\u304c\u5fc5\u8981\u300d](http://shannon-lab.org/?p=1743)\n\n```{python3:pyton3}\ntmp_document_data = ((\"doc_1\" , \"\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002\"),\n                     (\"doc_2\" , \"FRB\uff08\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\uff09\u306f\u3001\u4f1d\u7d71\u7684\u306a\u7269\u4fa1\u4e0a\u6607\u7387\u3068\u4e26\u3073\u3001\u7c73\u56fd\u306e\u56fd\u5185\u5931\u696d\u7387\u306e\u6c34\u6e96\u3092\u3001\u91d1\u878d\u653f\u7b56\u306e\u8235\u53d6\u308a\u3092\u884c\u3046\u4e0a\u3067\u3001\u4e3b\u8981\u306a\u53c2\u8003\u6570\u5024\u306b\u4f4d\u7f6e\u4ed8\u3051\u3066\u3044\u308b\u3002\"),\n                     (\"doc_3\" , \"\u5e02\u5834\u3067\u306f\u300c\u56fd\u5185\u306e\u6a5f\u95a2\u6295\u8cc7\u5bb6\u306b\u306f\u62bc\u3057\u76ee\u8cb7\u3044\u3092\u5165\u308c\u308b\u52d5\u304d\u304c\u3042\u3063\u305f\u304c\u3001\u6d77\u5916\u6295\u8cc7\u5bb6\u304b\u3089\u306e\u8cb7\u3044\u6ce8\u6587\u306f\u5c11\u306a\u304f\u3001\u5dee\u3057\u5f15\u304d\u3067\u306f\u3084\u3084\u58f2\u308a\u8d8a\u3057\u3002\u8cb7\u3044\u306b\u614e\u91cd\u306b\u306a\u3063\u3066\u3044\u308b\u300d\uff08\u56fd\u5185\u8a3c\u5238\u30c8\u30ec\u30fc\u30c0\u30fc\uff09\u3068\u306e\u58f0\u304c\u3042\u3063\u305f\u3002\")\n                    )\n\nfrom collections import OrderedDict\n\ndocument_dict = OrderedDict()\ntmp_dict = OrderedDict(tmp_document_data)\n\ndocument_dict.update(tmp_dict)\n\ndocuments = list(document_dict.values())\ndocument_titles = list(document_dict.keys())\n```\n\n```{python3:pyton3}\nprint(documents)\n# ['FRB\uff08\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\uff09\u306f\u3001\u4f1d\u7d71\u7684\u306a\u7269\u4fa1\u4e0a\u6607\u7387\u3068\u4e26\u3073\u3001\u7c73\u56fd\u306e\u56fd\u5185\u5931\u696d\u7387\u306e\u6c34\u6e96\u3092\u3001\u91d1\u878d\u653f\u7b56\u306e\u8235\u53d6\u308a\u3092\u884c\u3046\u4e0a\u3067\u3001\u4e3b\u8981\u306a\u53c2\u8003\u6570\u5024\u306b\u4f4d\u7f6e\u4ed8\u3051\u3066\u3044\u308b\u3002', '\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002', '\u5e02\u5834\u3067\u306f\u300c\u56fd\u5185\u306e\u6a5f\u95a2\u6295\u8cc7\u5bb6\u306b\u306f\u62bc\u3057\u76ee\u8cb7\u3044\u3092\u5165\u308c\u308b\u52d5\u304d\u304c\u3042\u3063\u305f\u304c\u3001\u6d77\u5916\u6295\u8cc7\u5bb6\u304b\u3089\u306e\u8cb7\u3044\u6ce8\u6587\u306f\u5c11\u306a\u304f\u3001\u5dee\u3057\u5f15\u304d\u3067\u306f\u3084\u3084\u58f2\u308a\u8d8a\u3057\u3002\u8cb7\u3044\u306b\u614e\u91cd\u306b\u306a\u3063\u3066\u3044\u308b\u300d\uff08\u56fd\u5185\u8a3c\u5238\u30c8\u30ec\u30fc\u30c0\u30fc\uff09\u3068\u306e\u58f0\u304c\u3042\u3063\u305f\u3002']\n\nprint(document_titles)\n# ['doc_2', 'doc_1', 'doc_3']\n```\n\n\n```{python3:pyton3}\nfrom pprint import pprint\n\ndocuments = [\"\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002\"\\\n            , \"FRB\uff08\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\uff09\u306f\u3001\u4f1d\u7d71\u7684\u306a\u7269\u4fa1\u4e0a\u6607\u7387\u3068\u4e26\u3073\u3001\u7c73\u56fd\u306e\u56fd\u5185\u5931\u696d\u7387\u306e\u6c34\u6e96\u3092\u3001\u91d1\u878d\u653f\u7b56\u306e\u8235\u53d6\u308a\u3092\u884c\u3046\u4e0a\u3067\u3001\u4e3b\u8981\u306a\u53c2\u8003\u6570\u5024\u306b\u4f4d\u7f6e\u4ed8\u3051\u3066\u3044\u308b\u3002\"\\\n            , \"\u5e02\u5834\u3067\u306f\u300c\u56fd\u5185\u306e\u6a5f\u95a2\u6295\u8cc7\u5bb6\u306b\u306f\u62bc\u3057\u76ee\u8cb7\u3044\u3092\u5165\u308c\u308b\u52d5\u304d\u304c\u3042\u3063\u305f\u304c\u3001\u6d77\u5916\u6295\u8cc7\u5bb6\u304b\u3089\u306e\u8cb7\u3044\u6ce8\u6587\u306f\u5c11\u306a\u304f\u3001\u5dee\u3057\u5f15\u304d\u3067\u306f\u3084\u3084\u58f2\u308a\u8d8a\u3057\u3002\u8cb7\u3044\u306b\u614e\u91cd\u306b\u306a\u3063\u3066\u3044\u308b\u300d\uff08\u56fd\u5185\u8a3c\u5238\u30c8\u30ec\u30fc\u30c0\u30fc\uff09\u3068\u306e\u58f0\u304c\u3042\u3063\u305f\u3002\"\\\n            ]\n```\n\n\n\n___\n\n###__tfidf\u8a08\u7b97\u306f\u3001\u4ee5\u4e0b\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u3092\u62dd\u501f__\n\nHateba Blog \u53c2\u8003\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u304b\u3089\u3001tf\u5024\u3001idf\u5024\u3001tf-idf\u5024\u3092\u7b97\u51fa\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u5f0f\u3092\u62dd\u501f\n__[Hatena Blog \u7406\u7cfb\u5927\u5b66\u751f\u304cPython\u3068Java\u3067\u8272\u3005\u9811\u5f35\u308b\u30d6\u30ed\u30b0 (2015/02/21)\u300cPython\u306b\u3088\u308bTF-IDF\u300d](http://emoson.hateblo.jp/entry/2015/02/21/041904)__\n\n\n__\uff08 \u95a2\u9023 \uff09__\n\n* [HirofumiYashima Qiita\u8a18\u4e8b\uff082016/01/05\uff09 \u300c\u3010 \u81ea\u7136\u8a00\u8a9e\u51e6\u7406 \u3011\u5bfe\u8c61\u6587\u66f8\u30d5\u30a1\u30a4\u30eb\u7fa4\u306e\u7279\u5fb4\u3092\u6349\u3048\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u30c8\u30fc\u30af\u30f3\u96c6\u5408\uff08\u5019\u88dc\uff09\u3092\u3001\u5168\u51fa\u73fe\u5358\u8a9e\u96c6\u5408\u304b\u3089\u81ea\u52d5\u62bd\u51fa\u3059\u308b\u65b9\u6cd5\u300d](http://qiita.com/HirofumiYashima/items/61890a067026db99ff17)\n\n\n```{python3:pyton3}\n# tf\u5024\u7b97\u51fa\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\ndef tf(terms, document):\n    tf_values = [document.count(term) for term in terms]\n    return list(map(lambda x: x/sum(tf_values), tf_values))\n\n# idf\u5024\u7b97\u51fa\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\ndef idf(terms, documents):\n    import math\n    return [math.log10(len(documents)/sum([bool(term in document) for document in documents])) for term in terms]\n\n# tf-idf\u5024\u7b97\u51fa\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\ndef tf_idf(terms, documents):\n    return [[_tf*_idf for _tf, _idf in zip(tf(terms, document), idf(terms, documents))] for document in documents]\n\n```\n\n___\n\n####__tfidf\u30e1\u30bd\u30c3\u30c9\u306e\u7b2c\u4e00\u5f15\u6570\u306b\u5fc5\u8981\u306a\u3001\u91cd\u8907\u6392\u9664\u3057\u305f\u30c8\u30fc\u30af\u30f3\u30ea\u30b9\u30c8\u3092\u5f97\u308b__\n\n\uff08 \u540d\u8a5e\u306e\u307f\uff06\u5206\u304b\u3061\u66f8\u304d\u306b\u3057\u305f\u6587\u66f8\u30c7\u30fc\u30bf\u30ea\u30b9\u30c8\uff08\u30b3\u30fc\u30d1\u30b9\u30fb\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\uff09\u3092\u7528\u610f \uff09\n\n```{python3:pyton3}\n# \u30c6\u30ad\u30b9\u30c8\u3092\u7279\u5b9a\u54c1\u8a5e\u306e\u307f\u306e\u30c8\u30fc\u30af\u30f3\u5206\u304b\u3061\u66f8\u304d\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3059\u308b\u30e1\u30bd\u30c3\u30c9\ndef get_token_list(text, hinshi):\n    import MeCab\n    token_list = []\n    mt = MeCab.Tagger(\"-Ochasen -d /usr/local/lib/mecab/dic/mecab-ipadic-neologd\")\n    mt.parse('')\n    node = mt.parseToNode(text)\n    while node:\n        feats = node.feature.split(',')\n        if feats[0] in hinshi :\n            try:\n                token_list.append(node.surface)\n            except:\n                print(\"err: \" + str(node.surface))\n\t\tnode = node.next\n    return token_list\n```\n\n```{python3:pyton3}\n>>> pprint([get_token_list(document, [\"\u540d\u8a5e\"])  for document in documents])\n[['\u653f\u5e9c',\n  'GDP',\n  '\u6570\u5024\u76ee\u6a19',\n  '\u660e\u793a',\n  '\u653f\u5e9c',\n  '\u5e74\u660e\u3051',\n  '\u6700\u521d',\n  '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70',\n  '\u666f\u6c17\u5bfe\u7b56',\n  '\u5931\u696d\u7387',\n  '\u8ffd\u52a0',\n  '\u7dcf\u5408',\n  '\u7d4c\u6e08',\n  '\u5bfe\u7b56',\n  '\u6c11\u9593',\n  '\u8b70\u54e1',\n  '\u610f\u898b',\n  '\u6a21\u69d8'],\n ['FRB',\n  '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a',\n  '\u4f1d\u7d71\u7684',\n  '\u7269\u4fa1\u4e0a\u6607\u7387',\n  '\u7c73\u56fd',\n  '\u56fd\u5185',\n  '\u5931\u696d\u7387',\n  '\u6c34\u6e96',\n  '\u91d1\u878d\u653f\u7b56',\n  '\u8235\u53d6\u308a',\n  '\u4e0a',\n  '\u4e3b\u8981',\n  '\u53c2\u8003',\n  '\u6570\u5024'],\n ['\u5e02\u5834',\n  '\u56fd\u5185',\n  '\u6a5f\u95a2\u6295\u8cc7\u5bb6',\n  '\u62bc\u3057\u76ee\u8cb7\u3044',\n  '\u52d5\u304d',\n  '\u6d77\u5916\u6295\u8cc7\u5bb6',\n  '\u6ce8\u6587',\n  '\u5dee\u3057\u5f15\u304d',\n  '\u8d8a\u3057',\n  '\u8cb7\u3044',\n  '\u614e\u91cd',\n  '\u56fd\u5185',\n  '\u8a3c\u5238',\n  '\u30c8\u30ec\u30fc\u30c0\u30fc',\n  '\u58f0']]\n>>> \n```\n\n```{python3:pyton3}\ndoc_token_list = [get_token_list(document, [\"\u540d\u8a5e\"])  for document in documents]\n```\n\n\n\uff08 \u6587\u66f8\u30b3\u30fc\u30d1\u30b9\u30ea\u30b9\u30c8\uff08\u4e8c\u91cd\u30ea\u30b9\u30c8\uff09\u3092flatten\u3057\u3066\u3001\u91cd\u8907\u6392\u9664\u3057\u305f\u30c8\u30fc\u30af\u30f3\u30ea\u30b9\u30c8\u3092\u751f\u6210 \uff09\n\n```{python3:pyton3}\nfrom functools import reduce\nfrom operator import add\n\nnoun_token_list  = reduce(add, doc_token_list)\nprint(noun_token_list)\n```\n\n```\n['\u653f\u5e9c', 'GDP', '\u6570\u5024\u76ee\u6a19', '\u660e\u793a', '\u653f\u5e9c', '\u5e74\u660e\u3051', '\u6700\u521d', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u666f\u6c17\u5bfe\u7b56', '\u5931\u696d\u7387', '\u8ffd\u52a0', '\u7dcf\u5408', '\u7d4c\u6e08', '\u5bfe\u7b56', '\u6c11\u9593', '\u8b70\u54e1', '\u610f\u898b', '\u6a21\u69d8', 'FRB', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u4f1d\u7d71\u7684', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u7c73\u56fd', '\u56fd\u5185', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u8235\u53d6\u308a', '\u4e0a', '\u4e3b\u8981', '\u53c2\u8003', '\u6570\u5024', '\u5e02\u5834', '\u56fd\u5185', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u52d5\u304d', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u6ce8\u6587', '\u5dee\u3057\u5f15\u304d', '\u8d8a\u3057', '\u8cb7\u3044', '\u614e\u91cd', '\u56fd\u5185', '\u8a3c\u5238', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u58f0']\n```\n\n\n\uff08 \u91cd\u8907\u3057\u3066\u51fa\u73fe\u3059\u308b\u5358\u8a9e\u3092\u3001\uff11\u56de\u3060\u3051\u51fa\u73fe\u3059\u308b\u3088\u3046\u306b\u76f4\u3059 \uff09\n\n```{python3:pyton3}\nunique_token_list = list(set(noun_token_list))\nprint(unique_token_list)\n```\n\n```\n['\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19']\n```\n\n###__tfidf\u30e1\u30bd\u30c3\u30c9\u306e\u7b2c\u4e00\u5f15\u6570 \u306b\u5fc5\u8981\u306a\u3001\u91cd\u8907\u6392\u9664\u3057\u305f\u30c8\u30fc\u30af\u30f3\u30ea\u30b9\u30c8 \u304c\u5f97\u3089\u308c\u305f__\n___\n\n\n###__tf*idf\u5024\u3092\u7b97\u51fa__\n\n```{python3:pyton3}\ntfidf_per_doc_list = tf_idf(unique_token_list, documents)\npprint(tfidf_per_doc_list)\n```\n\n```\n[[0.0,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.0,\n  0.008385298050270535,\n  0.008385298050270535,\n  0.0,\n  0.0,\n  0.04544011949711071,\n  0.04544011949711071,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.0,\n  0.022720059748555354,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.022720059748555354,\n  0.0,\n  0.022720059748555354,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.04544011949711071,\n  0.0,\n  0.022720059748555354],\n [0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.01173941727037875,\n  0.0,\n  0.03180808364797749,\n  0.01173941727037875,\n  0.01173941727037875,\n  0.03180808364797749,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0,\n  0.06361616729595498,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.03180808364797749,\n  0.0],\n [0.028065956159980143,\n  0.0,\n  0.028065956159980143,\n  0.0,\n  0.020716618712433087,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.0,\n  0.08419786847994043,\n  0.0,\n  0.0,\n  0.028065956159980143,\n  0.0,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.028065956159980143,\n  0.0,\n  0.0,\n  0.0]]\n```\n\n\n___\n\n\n###__ndl, Okapi BMI25 \u8a08\u7b97\u306f\u3001\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3001\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0__\n\n__[Hatena Blog sonickun.log (2014/11/12) \u300c\u78ba\u7387\u7684\u60c5\u5831\u691c\u7d22 Okapi BM25 \u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u300d](http://sonickun.hatenablog.com/entry/2014/11/12/122806)__\n\n> CW(i,j) = [ TF(i,j) * IDF(i) * (K1 + 1) ] / [ K1 * (1 - b + (b * NDL(j)) + TF(i,j) ]\n\n> DL(j) = \u6587\u66f8Dj\u306e\u7dcf\u5358\u8a9e\u6570\n>\u3068\u3057\u305f\u3068\u304d\n>NDL(j) = DL(j) / (\u3059\u3079\u3066\u306e\u6587\u66f8\u306e\u5e73\u5747DL)\n\n* [Hatena Blog (2013/10/15) \u65e7\u307f\u305a\u304e\u308f\u30d6\u30ed\u30b0\u300cOkapi BM25 \u5b9f\u88c5\u65b9\u6cd5\u300d](http://yusuke0h.hatenablog.com/entry/2013/10/15/123821)\n\n__( dl )__\n\n\n```{python3:pyton3}\ndef dl(document_list):\n\treturn [len(set(document)) for document in document_list]\n```\n\n\n```{python3:pyton3}\ndl_list = dl(doc_token_list)\nprint(dl_list)\n```\n\t\n```\n[17, 14, 14]\n```\n\n__(mean_dl)__\n\n```{python3:pyton3}\nimport numpy as np\nmean_dl = np.mean(dl_list)\nprint(mean_dl)\n```\n\n```\n15.0\n```\n\n__ndl\u5024\u3092\u7b97\u51fa__\n\n```{python3:pyton3}\nndl_list = dl_list / mean_dl\nprint(ndl_list)\n# array([ 1.13333333,  0.93333333,  0.93333333])\n \nndl_list = list(dl_list / mean_dl)\nprint(ndl_list)\n```\n\n```\n[1.1333333333333333, 0.93333333333333335, 0.93333333333333335] \n```\n\n\n###__Okapi BMI25\u5024\u3092\u7b97\u51fa__\n\n__( tf\u30ea\u30b9\u30c8 )__\n\n```{python3:pyton3}\ntf_list = [tf(unique_token_list, document) for document in documents]\nlen(tf_list) # Doc\u306e\u4ef6\u6570\u3060\u3051\u3001tf\u30ea\u30b9\u30c8\u304c\u51fa\u529b\u3055\u308c\u308b\uff08\u5404\u30ea\u30b9\u30c8\u306e\u8981\u7d20\u6570\u306f\u3001\u5404Doc\u306e\u30c8\u30fc\u30af\u30f3\u500b\u6570\uff09\n#3\nlen(tf_list[0])\n#43\nlen(tf_list[1])\n#43\nlen(tf_list[2])\n#43 \nprint(tf_list)\n```\n\n```\n[[0.0, 0.047619047619047616, 0.0, 0.0, 0.0, 0.047619047619047616, 0.0, 0.047619047619047616, 0.047619047619047616, 0.0, 0.0, 0.09523809523809523, 0.09523809523809523, 0.047619047619047616, 0.0, 0.0, 0.0, 0.047619047619047616, 0.047619047619047616, 0.047619047619047616, 0.0, 0.0, 0.0, 0.0, 0.047619047619047616, 0.047619047619047616, 0.0, 0.047619047619047616, 0.047619047619047616, 0.0, 0.0, 0.047619047619047616, 0.0, 0.047619047619047616, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.09523809523809523, 0.0, 0.047619047619047616], [0.0, 0.0, 0.0, 0.06666666666666667, 0.06666666666666667, 0.0, 0.06666666666666667, 0.06666666666666667, 0.06666666666666667, 0.06666666666666667, 0.06666666666666667, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.06666666666666667, 0.0, 0.0, 0.0, 0.0, 0.06666666666666667, 0.0, 0.13333333333333333, 0.0, 0.0, 0.0, 0.0, 0.06666666666666667, 0.0], [0.058823529411764705, 0.0, 0.058823529411764705, 0.0, 0.11764705882352941, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.058823529411764705, 0.058823529411764705, 0.058823529411764705, 0.0, 0.0, 0.0, 0.0, 0.058823529411764705, 0.058823529411764705, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.058823529411764705, 0.0, 0.17647058823529413, 0.0, 0.0, 0.058823529411764705, 0.0, 0.058823529411764705, 0.058823529411764705, 0.058823529411764705, 0.0, 0.0, 0.0]]\n```\n\n__( idf\u30ea\u30b9\u30c8 )__\n\n```{python3:pyton3}\nidf_list = [idf(unique_token_list, documents)]\nprint(len(idf_list))\nprint(len(idf_list))\n# 1\nprint(len(idf_list[0]))\n# 43\nidf_list = idf_list[0]\n```\n\n__\u91cd\u8907\u6392\u9664\u3057\u305f\uff08\u5168\u6587\u66f8\u306e\u3044\u305a\u308c\u304b\uff11\u56de\u4ee5\u4e0a\u3001\u51fa\u73fe\u3059\u308b\uff09\u5168\u30c8\u30fc\u30af\u30f3\uff08\u540d\u8a5e\uff09\u306e\u500b\u6570\u500b\u5206\u3001idf\u5024\u304c\u751f\u6210\u3055\u308c\u308b__\n\n```{python3:pyton3}\nprint(len(unique_token_list))\n#43\n```\n\n```{python3:pyton3}\nprint(idf_list)\n```\n\n```\n[[0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.17609125905568124, 0.47712125471966244, 0.47712125471966244, 0.17609125905568124, 0.17609125905568124, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244, 0.47712125471966244]]\n``` \n\n\n```\n>>> for i in list(range(len(tf_list))):\n...     print(i)\n... \n0\n1\n2\n```\n\n```{python3:pyton3}\ndef okappi_25(unique_token_list, tf_list, ndl_list, param_k, param_b):\n    okkapi_list = []\n\tfor doc_index in list(range(len(documents))):\n   \t\tfor token_index in list(range(len(unique_token_list))):\n        \tokkapi_25bmi = (tf_list[doc_index][token_index] * idf_list[token_index] * (param_k + 1)) / (param_k * ( 1 - param_b + (param_b * ndl_list[doc_index] + tf_list[doc_index][token_index])) + tf_list[doc_index][token_index])\n\t\t    okkapi_list.append(okkapi_25bmi)\n\treturn okkapi_list\n\n\nokappi_list = okappi_25bmi(unique_token_list, tf_list, ndl_list, 2, 0.75)\nprint(okappi_list)\n```\n\n```\n[0.0, 0.029092759434125759, 0.0, 0.0, 0.0, 0.029092759434125759, 0.0, 0.010737271893639102, 0.010737271893639102, 0.0, 0.0, 0.054841523530995681, 0.054841523530995681, 0.029092759434125759, 0.0, 0.0, 0.0, 0.029092759434125759, 0.029092759434125759, 0.029092759434125759, 0.0, 0.0, 0.0, 0.0, 0.029092759434125759, 0.029092759434125759, 0.0, 0.029092759434125759, 0.029092759434125759, 0.0, 0.0, 0.029092759434125759, 0.0, 0.029092759434125759, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.054841523530995681, 0.0, 0.029092759434125759, 0.0, 0.0, 0.0, 0.045440119497110701, 0.016770596100541071, 0.0, 0.045440119497110701, 0.016770596100541071, 0.016770596100541071, 0.045440119497110701, 0.045440119497110701, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.045440119497110701, 0.0, 0.0, 0.0, 0.0, 0.045440119497110701, 0.0, 0.082977609516463033, 0.0, 0.0, 0.0, 0.0, 0.045440119497110701, 0.0, 0.040548548559744685, 0.0, 0.040548548559744685, 0.0, 0.027586098024388706, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.040548548559744685, 0.040548548559744685, 0.040548548559744685, 0.0, 0.0, 0.0, 0.0, 0.040548548559744685, 0.040548548559744685, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.040548548559744685, 0.0, 0.10397315478152451, 0.0, 0.0, 0.040548548559744685, 0.0, 0.040548548559744685, 0.040548548559744685, 0.040548548559744685, 0.0, 0.0, 0.0]\n```\n\n```{python3:pyton3}\nprint(len(okappi_list))\n#129\n```\n\n___\n\n#__\u3053\u308c\u307e\u3067\u5f97\u3066\u304d\u305f\u30ea\u30b9\u30c8\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8981\u7d20\u306b\u542b\u3080 pandas.DataFrame \u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210__\n\n__\u6587\u66f8\u540d\u30e9\u30d9\u30eb\u3092\u3001unique\u306atoken\u306e\u4ef6\u6570\u5206\u3001\u751f\u6210__\n\n\uff08DataFrame \u306e\u306a\u304b\u3067\u3001\uff11\u6587\u66f8\u3042\u305f\u308a\u3001unique token\u6570\u5206\u306e\u884c\u306e\u8981\u7d20\u3092\u6301\u305f\u305b\u308b\u305f\u3081\uff09\n\n```{python3:pyton3}\n>>> doc_list = []\n>>> \n>>> for title in document_titles:\n...     for i in list(range(len(unique_token_list))):\n...         doc_list.append(title)\n... \n>>> \n>>> print(doc_list)\n['doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_1', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_2', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3', 'doc_3']\n>>> \n>>> print(len(doc_list))\n129\n```\n\n__unique \u306a token\u30ea\u30b9\u30c8\u3092\u3001\u6587\u66f8\u306e\u6570\u3060\u3051\u751f\u6210__\n\n```{python3:pyton3}\n>>> unique_token_list_ = []\n>>> unique_token_list_ =  unique_token_list * len(documents)\n>>> print(unique_token_list_)\n['\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19', '\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19', '\u5dee\u3057\u5f15\u304d', '\u5e74\u660e\u3051', '\u614e\u91cd', '\u53c2\u8003', '\u56fd\u5185', '\u6700\u521d', '\u4f1d\u7d71\u7684', '\u6570\u5024', '\u5931\u696d\u7387', '\u6c34\u6e96', '\u91d1\u878d\u653f\u7b56', '\u653f\u5e9c', '\u5bfe\u7b56', '\u666f\u6c17\u5bfe\u7b56', '\u52d5\u304d', '\u30c8\u30ec\u30fc\u30c0\u30fc', '\u6ce8\u6587', '\u610f\u898b', '\u6c11\u9593', '\u660e\u793a', '\u7c73\u56fd', '\u6a5f\u95a2\u6295\u8cc7\u5bb6', '\u5e02\u5834', 'FRB', 'GDP', '\u8ffd\u52a0', '\u7269\u4fa1\u4e0a\u6607\u7387', '\u6a21\u69d8', '\u7dcf\u5408', '\u8235\u53d6\u308a', '\u58f0', '\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70', '\u8cb7\u3044', '\u8b70\u54e1', '\u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a', '\u6d77\u5916\u6295\u8cc7\u5bb6', '\u4e0a', '\u62bc\u3057\u76ee\u8cb7\u3044', '\u8a3c\u5238', '\u8d8a\u3057', '\u7d4c\u6e08', '\u4e3b\u8981', '\u6570\u5024\u76ee\u6a19']\nprint(len(unique_token_list_))\n129\n>>> \n```\n\n\n__tfidf\u30ea\u30b9\u30c8\u306f\u4e8c\u91cd\u30ea\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u5185\u5074\u306e\u30ea\u30b9\u30c8\u3092flatten\u51e6\u7406\u3057\u3066\u5916\u3059__\n\n```{python3:pyton3}\n>>> tfidf_list_  = reduce(add, tfidf_per_doc_list)\n>>> print(len(tfidf_list_))\n129\n>>> print(tfidf_list_)\n[0.0, 0.022720059748555354, 0.0, 0.0, 0.0, 0.022720059748555354, 0.0, 0.008385298050270535, 0.008385298050270535, 0.0, 0.0, 0.04544011949711071, 0.04544011949711071, 0.022720059748555354, 0.0, 0.0, 0.0, 0.022720059748555354, 0.022720059748555354, 0.022720059748555354, 0.0, 0.0, 0.0, 0.0, 0.022720059748555354, 0.022720059748555354, 0.0, 0.022720059748555354, 0.022720059748555354, 0.0, 0.0, 0.022720059748555354, 0.0, 0.022720059748555354, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.04544011949711071, 0.0, 0.022720059748555354, 0.0, 0.0, 0.0, 0.03180808364797749, 0.01173941727037875, 0.0, 0.03180808364797749, 0.01173941727037875, 0.01173941727037875, 0.03180808364797749, 0.03180808364797749, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.03180808364797749, 0.0, 0.0, 0.0, 0.0, 0.03180808364797749, 0.0, 0.06361616729595498, 0.0, 0.0, 0.0, 0.0, 0.03180808364797749, 0.0, 0.028065956159980143, 0.0, 0.028065956159980143, 0.0, 0.020716618712433087, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.028065956159980143, 0.028065956159980143, 0.028065956159980143, 0.0, 0.0, 0.0, 0.0, 0.028065956159980143, 0.028065956159980143, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.028065956159980143, 0.0, 0.08419786847994043, 0.0, 0.0, 0.028065956159980143, 0.0, 0.028065956159980143, 0.028065956159980143, 0.028065956159980143, 0.0, 0.0, 0.0]\n```\n\n__DataFrame\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u306e\u5404\u5217\u3092\u69cb\u6210\u3059\u308b\u30c7\u30fc\u30bf\u304c\u3001\u3059\u3079\u3066\u540c\u3058\u8981\u7d20\u6570\uff08DataFrme\u306e\u884c\u6570\u306b\u306a\u308b\uff09\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d__\n\n```{python3:pyton3}\nprint(len(unique_token_list_))\n# 129\nprint(len(doc_list))\n# 129\nprint(len(tfidf_list_))\n# 129\nprint(len(okapi_list))\n# 129\n```\n\n###__pandas.DataFrame\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3092\u751f\u6210__\n\n```{python3:pyton3}\nimport pandas as pd\n\ntoken_attribute_pd  =  pd.DataFrame({'token': unique_token_list_,\n                                     'document' :  doc_list,\n\t\t\t\t                     'tfidf' : tfidf_list_,\n\t\t\t\t                     'okapi_25' : okapi_list\n                                    })\n\t\t\t\t\t \n\t\npprint(token_attribute_pd)\n```\n\n#__\u6c42\u3081\u308bDataFrame\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5f97\u3089\u308c\u305f\u3002__\n\n\n```{python3:pyton3}\n    document  okapi_25     tfidf       token\n0      doc_1  0.000000  0.000000        \u5dee\u3057\u5f15\u304d\n1      doc_1  0.002607  0.022720         \u5e74\u660e\u3051\n2      doc_1  0.000000  0.000000          \u614e\u91cd\n3      doc_1  0.000000  0.000000          \u53c2\u8003\n4      doc_1  0.000000  0.000000          \u56fd\u5185\n5      doc_1  0.002607  0.022720          \u6700\u521d\n6      doc_1  0.000000  0.000000         \u4f1d\u7d71\u7684\n7      doc_1  0.000962  0.008385          \u6570\u5024\n8      doc_1  0.000962  0.008385         \u5931\u696d\u7387\n9      doc_1  0.000000  0.000000          \u6c34\u6e96\n10     doc_1  0.000000  0.000000        \u91d1\u878d\u653f\u7b56\n11     doc_1  0.005186  0.045440          \u653f\u5e9c\n12     doc_1  0.005186  0.045440          \u5bfe\u7b56\n13     doc_1  0.002607  0.022720        \u666f\u6c17\u5bfe\u7b56\n14     doc_1  0.000000  0.000000          \u52d5\u304d\n15     doc_1  0.000000  0.000000       \u30c8\u30ec\u30fc\u30c0\u30fc\n16     doc_1  0.000000  0.000000          \u6ce8\u6587\n17     doc_1  0.002607  0.022720          \u610f\u898b\n18     doc_1  0.002607  0.022720          \u6c11\u9593\n19     doc_1  0.002607  0.022720          \u660e\u793a\n20     doc_1  0.000000  0.000000          \u7c73\u56fd\n21     doc_1  0.000000  0.000000       \u6a5f\u95a2\u6295\u8cc7\u5bb6\n22     doc_1  0.000000  0.000000          \u5e02\u5834\n23     doc_1  0.000000  0.000000         FRB\n24     doc_1  0.002607  0.022720         GDP\n25     doc_1  0.002607  0.022720          \u8ffd\u52a0\n26     doc_1  0.000000  0.000000       \u7269\u4fa1\u4e0a\u6607\u7387\n27     doc_1  0.002607  0.022720          \u6a21\u69d8\n28     doc_1  0.002607  0.022720          \u7dcf\u5408\n29     doc_1  0.000000  0.000000         \u8235\u53d6\u308a\n..       ...       ...       ...         ...\n99     doc_3  0.000000  0.000000        \u666f\u6c17\u5bfe\u7b56\n100    doc_3  0.003884  0.028066          \u52d5\u304d\n101    doc_3  0.003884  0.028066       \u30c8\u30ec\u30fc\u30c0\u30fc\n102    doc_3  0.003884  0.028066          \u6ce8\u6587\n103    doc_3  0.000000  0.000000          \u610f\u898b\n104    doc_3  0.000000  0.000000          \u6c11\u9593\n105    doc_3  0.000000  0.000000          \u660e\u793a\n106    doc_3  0.000000  0.000000          \u7c73\u56fd\n107    doc_3  0.003884  0.028066       \u6a5f\u95a2\u6295\u8cc7\u5bb6\n108    doc_3  0.003884  0.028066          \u5e02\u5834\n109    doc_3  0.000000  0.000000         FRB\n110    doc_3  0.000000  0.000000         GDP\n111    doc_3  0.000000  0.000000          \u8ffd\u52a0\n112    doc_3  0.000000  0.000000       \u7269\u4fa1\u4e0a\u6607\u7387\n113    doc_3  0.000000  0.000000          \u6a21\u69d8\n114    doc_3  0.000000  0.000000          \u7dcf\u5408\n115    doc_3  0.000000  0.000000         \u8235\u53d6\u308a\n116    doc_3  0.003884  0.028066           \u58f0\n117    doc_3  0.000000  0.000000    \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n118    doc_3  0.011466  0.084198          \u8cb7\u3044\n119    doc_3  0.000000  0.000000          \u8b70\u54e1\n120    doc_3  0.000000  0.000000  \u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\n121    doc_3  0.003884  0.028066       \u6d77\u5916\u6295\u8cc7\u5bb6\n122    doc_3  0.000000  0.000000           \u4e0a\n123    doc_3  0.003884  0.028066       \u62bc\u3057\u76ee\u8cb7\u3044\n124    doc_3  0.003884  0.028066          \u8a3c\u5238\n125    doc_3  0.003884  0.028066          \u8d8a\u3057\n126    doc_3  0.000000  0.000000          \u7d4c\u6e08\n127    doc_3  0.000000  0.000000          \u4e3b\u8981\n128    doc_3  0.000000  0.000000        \u6570\u5024\u76ee\u6a19\n\n[129 rows x 4 columns]\n```\n\n__\u8868\u793a\u304c\u7701\u7565\u3055\u308c\u305fdoc_2\u306e\u30c7\u30fc\u30bf__\n\n\n```{python3:pyton3}\nprint(token_attribute_pd[token_attribute_pd[\"document\"]==\"doc_2\"])\n```\n\n```\n   document  okapi_25     tfidf       token\n43    doc_2  0.000000  0.000000        \u5dee\u3057\u5f15\u304d\n44    doc_2  0.000000  0.000000         \u5e74\u660e\u3051\n45    doc_2  0.000000  0.000000          \u614e\u91cd\n46    doc_2  0.004397  0.031808          \u53c2\u8003\n47    doc_2  0.001623  0.011739          \u56fd\u5185\n48    doc_2  0.000000  0.000000          \u6700\u521d\n49    doc_2  0.004397  0.031808         \u4f1d\u7d71\u7684\n50    doc_2  0.001623  0.011739          \u6570\u5024\n51    doc_2  0.001623  0.011739         \u5931\u696d\u7387\n52    doc_2  0.004397  0.031808          \u6c34\u6e96\n53    doc_2  0.004397  0.031808        \u91d1\u878d\u653f\u7b56\n54    doc_2  0.000000  0.000000          \u653f\u5e9c\n55    doc_2  0.000000  0.000000          \u5bfe\u7b56\n56    doc_2  0.000000  0.000000        \u666f\u6c17\u5bfe\u7b56\n57    doc_2  0.000000  0.000000          \u52d5\u304d\n58    doc_2  0.000000  0.000000       \u30c8\u30ec\u30fc\u30c0\u30fc\n59    doc_2  0.000000  0.000000          \u6ce8\u6587\n60    doc_2  0.000000  0.000000          \u610f\u898b\n61    doc_2  0.000000  0.000000          \u6c11\u9593\n62    doc_2  0.000000  0.000000          \u660e\u793a\n63    doc_2  0.004397  0.031808          \u7c73\u56fd\n64    doc_2  0.000000  0.000000       \u6a5f\u95a2\u6295\u8cc7\u5bb6\n65    doc_2  0.000000  0.000000          \u5e02\u5834\n66    doc_2  0.004397  0.031808         FRB\n67    doc_2  0.000000  0.000000         GDP\n68    doc_2  0.000000  0.000000          \u8ffd\u52a0\n69    doc_2  0.004397  0.031808       \u7269\u4fa1\u4e0a\u6607\u7387\n70    doc_2  0.000000  0.000000          \u6a21\u69d8\n71    doc_2  0.000000  0.000000          \u7dcf\u5408\n72    doc_2  0.004397  0.031808         \u8235\u53d6\u308a\n73    doc_2  0.000000  0.000000           \u58f0\n74    doc_2  0.000000  0.000000    \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n75    doc_2  0.000000  0.000000          \u8cb7\u3044\n76    doc_2  0.000000  0.000000          \u8b70\u54e1\n77    doc_2  0.004397  0.031808  \u7c73\u9023\u90a6\u6e96\u5099\u5236\u5ea6\u7406\u4e8b\u4f1a\n78    doc_2  0.000000  0.000000       \u6d77\u5916\u6295\u8cc7\u5bb6\n79    doc_2  0.008715  0.063616           \u4e0a\n80    doc_2  0.000000  0.000000       \u62bc\u3057\u76ee\u8cb7\u3044\n81    doc_2  0.000000  0.000000          \u8a3c\u5238\n82    doc_2  0.000000  0.000000          \u8d8a\u3057\n83    doc_2  0.000000  0.000000          \u7d4c\u6e08\n84    doc_2  0.004397  0.031808          \u4e3b\u8981\n85    doc_2  0.000000  0.000000        \u6570\u5024\u76ee\u6a19\n```\n\n__\u5404Doc\u306b\u3064\u3044\u3066\u3001\u5168Doc\u4e2d\u3001\uff11\u56de\u4ee5\u4e0a\u51fa\u73fe\u3059\u308b\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u3001tfidf, okapi \u3092\u51fa\u529b\u3057\u3066\u3044\u308b\u3002__\n__\u3042\u308bDoc\u4e2d\u3001\u51fa\u73fe\u3057\u306a\u3044\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u306f\u3001tfidf, opapi \u304c 0 \u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u308b__\n\n```{python3:pyton3}\n>>> \n>>> document_dict[\"doc_1\"]\n'\u653f\u5e9c\u306f\u3001GDP\u306e\u6570\u5024\u76ee\u6a19\u3092\u660e\u793a\u3057\u3066\u63b2\u3052\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u653f\u5e9c\u3067\u3059\u304c\u3001\u5e74\u660e\u3051\u6700\u521d\u306e\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\u3067\u3001\u666f\u6c17\u5bfe\u7b56\u3068\u5931\u696d\u7387\u306b\u3064\u3044\u3066\u306e\u8ffd\u52a0\u306e\u7dcf\u5408\u7d4c\u6e08\u5bfe\u7b56\u306b\u3064\u3044\u3066\u3001\u6c11\u9593\u8b70\u54e1\u304b\u3089\u610f\u898b\u3092\u805e\u3044\u305f\u6a21\u69d8\u3067\u3059\u3002'\n>>> \n>>> \"\u5dee\u3057\u5f15\u304d\" in document_dict[\"doc_1\"]\nFalse\n>>> \n>>> \"\u5e74\u660e\u3051\" in document_dict[\"doc_1\"]\nTrue\n>>> \n>>> \"\u614e\u91cd\" in document_dict[\"doc_1\"]\nFalse\n>>> \n>>> \"\u8a3c\u5238\" in document_dict[\"doc_3\"]\nTrue\n>>> \n>>> \"\u6570\u5024\u76ee\u6a19\" in document_dict[\"doc_3\"]\nFalse\n>>> \n```\n\n\n```{python3:pyton3}\n>>> \n>>> print(token_attribute_pd[token_attribute_pd[\"token\"]==\"\u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\"])\n    document  okapi_25    tfidf     token\n31     doc_1  0.002607  0.02272  \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n74     doc_2  0.000000  0.00000  \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n117    doc_3  0.000000  0.00000  \u7d4c\u6e08\u8ca1\u653f\u8aee\u554f\u4f1a\u8b70\n>>>\n>>> print(token_attribute_pd[token_attribute_pd[\"token\"]==\"\u6570\u5024\u76ee\u6a19\"])\n    document  okapi_25    tfidf token\n42     doc_1  0.002607  0.02272  \u6570\u5024\u76ee\u6a19\n85     doc_2  0.000000  0.00000  \u6570\u5024\u76ee\u6a19\n128    doc_3  0.000000  0.00000  \u6570\u5024\u76ee\u6a19\n>>>\n>>> print(token_attribute_pd[token_attribute_pd[\"token\"]==\"\u4f1d\u7d71\u7684\"])\ndocument  okapi_25     tfidf token\n6     doc_1  0.000000  0.000000   \u4f1d\u7d71\u7684\n49    doc_2  0.004397  0.031808   \u4f1d\u7d71\u7684\n92    doc_3  0.000000  0.000000   \u4f1d\u7d71\u7684\n>>>\n```\n\n___\n\n##__\u3010 \u5fdc\u7528 \u3011__\n\n\u30fb \u5404\u6587\u66f8\u306b\u6b63\u89e3\u30e9\u30d9\u30eb \u3092\u4e0e\u3048\u305f**\u300c\u6559\u5e2b\u3042\u308a\u5b66\u7fd2\u300d**\u3067\u3001_\"\u5404\u6587\u66f8\u304c\u6301\u3064 \u3069\u306e\u5358\u8a9e\u306etfidf\u5024 or Okapi25BMI\u5024 \u304c\u3069\u306e\u5024\u3067\u3042\u308b\u3068\u3001\u3042\u308b\u6587\u66f8\u304c\u3042\u308b\u6587\u66f8\u30e9\u30d9\u30eb\u306b\u8a72\u5f53\u3059\u308b\u6587\u66f8\u3067\u3042\u308b\u3068\u307f\u306a\u305b\u305d\u3046\u304b\"_\u3001\u30af\u30e9\u30b9\u5224\u5b9a\u30b7\u30b9\u30c6\u30e0\uff08\u63a8\u5b9a\u5668\uff09 \u3092\u3001**RandomForest** \u306a\u3069\u3067\u4f5c\u6210\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u30fb **\u300c\u6559\u5e2b\u306a\u3057\u5b66\u7fd2\u300d** \u306e **k-means\u6cd5** \u3084 **\u968e\u5c64\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u6cd5**\u3001**SVM** \u3084 **DeepLearning** \u3092\u7528\u3044\u3066\u3001\u30c7\u30fc\u30bf\u304b\u3089\u3001\u5404\u6587\u66f8\u3092\u3069\u306e\u3088\u3046\u306b\u30b0\u30eb\u30fc\u30d7\u5206\u3051\u3067\u304d\u308b\u304b\u3092\u3001\u4eba\u9593\u306e\u5148\u5165\u89b3\u3092\u6301\u3061\u8fbc\u307e\u305a\u306b\u3001Data driven \u306b\u30b0\u30eb\u30fc\u30d7\u751f\u6210\u3055\u305b\u3089\u308c\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\uff08\u5404\u30b0\u30eb\u30fc\u30d7\u306e\u300c\u610f\u5473\u5408\u3044\u300d\u306f\u3001\u6a5f\u68b0\u5b66\u7fd2\u304c\u63d0\u6848\u3057\u305f\u5404\u30b0\u30eb\u30fc\u30d7\u306b\u542b\u307e\u308c\u308b\u6587\u66f8\u3092\u3001\u4eba\u9593\u304c\u300c\u4e8b\u5f8c\u7684\u306b\u300d\u8997\u304d\u8fbc\u3080\u3053\u3068\u3067\u8003\u3048\u3066\u3001\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u540d\u3065\u3051\u308b\u30a4\u30e1\u30fc\u30b8\uff09\n\n> __\u6b63\u89e3\u30e9\u30d9\u30eb\u306e\u4f8b__\n>\u3000\u30cb\u30e5\u30fc\u30b9\u8a18\u4e8b\u3067\u3042\u308c\u3070\u3001\u653f\u6cbb\u9762\u3001\u56fd\u969b\u9762\u3001\u7d4c\u6e08\u9762\u3001\u751f\u6d3b\u9762\u3001\u793e\u4f1a\u9762\u3001\u6587\u5316\u79d1\u5b66\u9762\u306a\u3069\u3001\u8a18\u4e8b\u306e\u4ed5\u5206\u3051\u81ea\u52d5\u5316\u3055\u305b\u305f\u3044 \u306a\u3093\u3089\u304b\u306e\u8a18\u4e8b\u5c5e\u6027\u30e9\u30d9\u30eb\n"}