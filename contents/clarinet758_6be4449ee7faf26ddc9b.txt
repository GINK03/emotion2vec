{"context": " More than 1 year has passed since last update.\u306f\u3044\u3001\u4ed5\u4e8b\u4e2d\u306b\u30e1\u30fc\u30eb\u306f\u5916\u90e8\u306b\u30fb\u81ea\u7531\u306a\u5b9b\u5148\u306b\u9001\u3063\u3066\u3082\u30bb\u30d5\u30bb\u30d5\u3060\u3051\u3069twitter\u30a2\u30af\u30bb\u30b9\u306f\u51fa\u6765\u306a\u3044\u3001\u3068\u3044\u3046\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u306ftweet\u5f8c\u306b\u81ea\u52d5\u3067\u524a\u9664\u3055\u308c\u307e\u3059\u3002\u9023\u52d5\u3057\u3066\u3044\u308b\u8a3c\u62e0\u96a0\u6ec5\u3068\u91cd\u8907\u3057\u3066\u6295\u7a3f\u3057\u3088\u3046\u3068\u3059\u308b\u3053\u3068\u3092\u9632\u6b62\u3059\u308b\u76ee\u7684\u3067\u3059\u3002\n\u306f\u3044\u3001\u81ea\u5b85\u306a\u308a\u30ec\u30f3\u30bf\u30eb\u306a\u308a\u3067\u4f55\u51e6\u304b\u306b\u8a2d\u7f6e\u3057\u3066\u5b9a\u671f\u7684\u306b\u52d5\u4f5c\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nhttp://symfoware.blog68.fc2.com/blog-entry-891.html\nGmail\u306e\u4ef6\u540d\u53d6\u5f97\u306b\u3064\u304d\u307e\u3057\u3066\u306f\u5168\u9762\u7684\u306b\u304a\u4e16\u8a71\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\u3068\u3044\u3046\u304b\u30b3\u30d4\u30da\u3067\u3059\u3002\u4ef6\u540d\u53d6\u5f97\u4ee5\u5916\u306e\u8981\u7d20\u3092\u306a\u308b\u3079\u304f\u524a\u308a\u3001\u6295\u7a3f\u6a5f\u80fd\u3092\u4ed8\u3051\u8db3\u3057\u3066\u30e1\u30fc\u30eb\u3092\u524a\u9664\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u3060\u3051\u3067\u3059\u3002\u5168\u9762\u7684\u306b\u304a\u4e16\u8a71\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\ngmail_twitter.py\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\nimport imaplib, email, email.Header\nimport sys\nfrom urllib import urlencode\n\n#\u79c1\u304c\u72ec\u81ea\u306bOauth\u8a8d\u8a3c\u306e\u30c8\u30fc\u30af\u30f3\u5165\u308c\u3066\u3044\u308b\u3082\u306e\u3067\u3059\u3002\n#\u5225\u306b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u4e8b\u6545\u3067\u516c\u958b\u304c\u6016\u3044\u306e\u3067\u3059\u3002\nimport oat\n\"\"\"\nGmail\u53d6\u5f97\u306b\u3064\u3044\u3066\u306f\u5168\u9762\u7684\u306b\nhttp://symfoware.blog68.fc2.com/blog-entry-891.html\n\u3088\u308a\u9802\u3044\u3066\u304a\u308a\u307e\u3059\u3002\n\"\"\"\nclass imap4mail(object):\n\n\n    def __init__(self, data):\n        \"\"\"\n        \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u4e0e\u3048\u3089\u308c\u305f\u30e1\u30fc\u30eb\u30c7\u30fc\u30bf\u306e\u89e3\u6790\u3092\u5b9f\u884c\u3059\u308b\n        \"\"\"\n        self.files = {}\n\n        #\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30d1\u30fc\u30b9\n        msg = email.message_from_string(data)\n        #\u30bf\u30a4\u30c8\u30eb\u53d6\u5f97\n        self.title = self.decode(msg.get('Subject'))\n\n\n    def decode(self, dec_target):\n\n        \"\"\"\n        \u30e1\u30fc\u30eb\u30bf\u30a4\u30c8\u30eb\u3001\u9001\u4fe1\u8005\u306e\u30c7\u30b3\u30fc\u30c9\n        \"\"\"\n        decodefrag = email.Header.decode_header(dec_target)\n        title = ''\n\n        for frag, enc in decodefrag:\n            if enc:\n                title += unicode(frag, enc)\n            else:\n                title += unicode(frag)\n        return title\n\n\ndef analize_mail(mail):\n\n    #\u53d6\u5f97\u3057\u305f\u30e1\u30fc\u30eb\u306e\u4ef6\u540d\u3092\u6295\u7a3f\n    oat.client.request('https://api.twitter.com/1.1/statuses/update.json', 'POST', urlencode({'status': mail.title.encode('utf-8')}))\n\nif __name__ == \"__main__\":\n\n    host = 'imap.gmail.com'\n    user = 'example@gmail.com'\n    password = 'password'\n    mailbox = 'INBOX'\n\n    #\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u6307\u5b9a\n    M = imaplib.IMAP4_SSL(host=host)\n    #\u30ed\u30b0\u30a4\u30f3\n    M.login(user, password)\n\n    #\u30e1\u30fc\u30eb\u30dc\u30c3\u30af\u30b9\u9078\u629e\n    M.select(mailbox)\n\n    typ, data = M.search(None, 'ALL')\n    for num in data[0].split():\n        typ, data = M.fetch(num, '(RFC822)')\n        mail = imap4mail(data[0][1])\n# twitter\u306b\u6295\u7a3f\n        analize_mail(mail)\n# \u6295\u7a3f\u5f8c\u306f\u30e1\u30fc\u30eb\u3092\u524a\u9664\n        M.store(num, '+FLAGS', '\\\\Deleted')\n    M.expunge()\n    M.close()\n    M.logout()\n\n\n\u306f\u3044\u3001\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u3082\u6b86\u3069\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3067\u3059\u3002\u79c1\u306a\u3093\u304b\u304c\u30b3\u30e1\u30f3\u30c8\u5909\u3048\u305f\u3089\u30a2\u30ec\u3067\u3059\u3057\u3002\n\u306f\u3044\u3001\u4ed5\u4e8b\u4e2d\u306b\u30e1\u30fc\u30eb\u306f\u5916\u90e8\u306b\u30fb\u81ea\u7531\u306a\u5b9b\u5148\u306b\u9001\u3063\u3066\u3082\u30bb\u30d5\u30bb\u30d5\u3060\u3051\u3069twitter\u30a2\u30af\u30bb\u30b9\u306f\u51fa\u6765\u306a\u3044\u3001\u3068\u3044\u3046\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u306ftweet\u5f8c\u306b\u81ea\u52d5\u3067\u524a\u9664\u3055\u308c\u307e\u3059\u3002\u9023\u52d5\u3057\u3066\u3044\u308b\u8a3c\u62e0\u96a0\u6ec5\u3068\u91cd\u8907\u3057\u3066\u6295\u7a3f\u3057\u3088\u3046\u3068\u3059\u308b\u3053\u3068\u3092\u9632\u6b62\u3059\u308b\u76ee\u7684\u3067\u3059\u3002\n\u306f\u3044\u3001\u81ea\u5b85\u306a\u308a\u30ec\u30f3\u30bf\u30eb\u306a\u308a\u3067\u4f55\u51e6\u304b\u306b\u8a2d\u7f6e\u3057\u3066\u5b9a\u671f\u7684\u306b\u52d5\u4f5c\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n[http://symfoware.blog68.fc2.com/blog-entry-891.html](http://symfoware.blog68.fc2.com/blog-entry-891.html)\nGmail\u306e\u4ef6\u540d\u53d6\u5f97\u306b\u3064\u304d\u307e\u3057\u3066\u306f\u5168\u9762\u7684\u306b\u304a\u4e16\u8a71\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\u3068\u3044\u3046\u304b\u30b3\u30d4\u30da\u3067\u3059\u3002\u4ef6\u540d\u53d6\u5f97\u4ee5\u5916\u306e\u8981\u7d20\u3092\u306a\u308b\u3079\u304f\u524a\u308a\u3001\u6295\u7a3f\u6a5f\u80fd\u3092\u4ed8\u3051\u8db3\u3057\u3066\u30e1\u30fc\u30eb\u3092\u524a\u9664\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u3060\u3051\u3067\u3059\u3002\u5168\u9762\u7684\u306b\u304a\u4e16\u8a71\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```python:gmail_twitter.py\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\nimport imaplib, email, email.Header\nimport sys\nfrom urllib import urlencode\n\n#\u79c1\u304c\u72ec\u81ea\u306bOauth\u8a8d\u8a3c\u306e\u30c8\u30fc\u30af\u30f3\u5165\u308c\u3066\u3044\u308b\u3082\u306e\u3067\u3059\u3002\n#\u5225\u306b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u4e8b\u6545\u3067\u516c\u958b\u304c\u6016\u3044\u306e\u3067\u3059\u3002\nimport oat\n\"\"\"\nGmail\u53d6\u5f97\u306b\u3064\u3044\u3066\u306f\u5168\u9762\u7684\u306b\nhttp://symfoware.blog68.fc2.com/blog-entry-891.html\n\u3088\u308a\u9802\u3044\u3066\u304a\u308a\u307e\u3059\u3002\n\"\"\"\nclass imap4mail(object):\n\n\n    def __init__(self, data):\n        \"\"\"\n        \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u4e0e\u3048\u3089\u308c\u305f\u30e1\u30fc\u30eb\u30c7\u30fc\u30bf\u306e\u89e3\u6790\u3092\u5b9f\u884c\u3059\u308b\n        \"\"\"\n        self.files = {}\n\n        #\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30d1\u30fc\u30b9\n        msg = email.message_from_string(data)\n        #\u30bf\u30a4\u30c8\u30eb\u53d6\u5f97\n        self.title = self.decode(msg.get('Subject'))\n\n\n    def decode(self, dec_target):\n\n        \"\"\"\n        \u30e1\u30fc\u30eb\u30bf\u30a4\u30c8\u30eb\u3001\u9001\u4fe1\u8005\u306e\u30c7\u30b3\u30fc\u30c9\n        \"\"\"\n        decodefrag = email.Header.decode_header(dec_target)\n        title = ''\n\n        for frag, enc in decodefrag:\n            if enc:\n                title += unicode(frag, enc)\n            else:\n                title += unicode(frag)\n        return title\n\n\ndef analize_mail(mail):\n\n    #\u53d6\u5f97\u3057\u305f\u30e1\u30fc\u30eb\u306e\u4ef6\u540d\u3092\u6295\u7a3f\n    oat.client.request('https://api.twitter.com/1.1/statuses/update.json', 'POST', urlencode({'status': mail.title.encode('utf-8')}))\n\nif __name__ == \"__main__\":\n\n    host = 'imap.gmail.com'\n    user = 'example@gmail.com'\n    password = 'password'\n    mailbox = 'INBOX'\n\n    #\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u6307\u5b9a\n    M = imaplib.IMAP4_SSL(host=host)\n    #\u30ed\u30b0\u30a4\u30f3\n    M.login(user, password)\n\n    #\u30e1\u30fc\u30eb\u30dc\u30c3\u30af\u30b9\u9078\u629e\n    M.select(mailbox)\n\n    typ, data = M.search(None, 'ALL')\n    for num in data[0].split():\n        typ, data = M.fetch(num, '(RFC822)')\n        mail = imap4mail(data[0][1])\n# twitter\u306b\u6295\u7a3f\n        analize_mail(mail)\n# \u6295\u7a3f\u5f8c\u306f\u30e1\u30fc\u30eb\u3092\u524a\u9664\n        M.store(num, '+FLAGS', '\\\\Deleted')\n    M.expunge()\n    M.close()\n    M.logout()\n```\n\n\u306f\u3044\u3001\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u3082\u6b86\u3069\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3067\u3059\u3002\u79c1\u306a\u3093\u304b\u304c\u30b3\u30e1\u30f3\u30c8\u5909\u3048\u305f\u3089\u30a2\u30ec\u3067\u3059\u3057\u3002", "tags": ["gmail", "Python", "Twitter"]}