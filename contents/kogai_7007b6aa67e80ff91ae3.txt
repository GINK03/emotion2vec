{"tags": ["DigitalOcean"], "context": " More than 1 year has passed since last update.\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30ed\u30b0\u30a4\u30f3\n\nssh root@IP\n\u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u4f5c\u6210\u6642\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u5b9b\u306b\u5c4a\u3044\u305f\u30d1\u30b9\u3092\u5165\u529b\n\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\n\n\n\u74b0\u5883\u69cb\u7bc9\n\nsudo apt-get update\nsudo apt-get install nodejs\nsudo apt-get install npm\nsudo apt-get install git\n\n\ngit\u30c7\u30d7\u30ed\u30a4\u3064\u306a\u304e\u8fbc\u307f\n\u89e3\u8aac\u8a18\u4e8b\n\n\n/var/repo/site.git/ \u3092\u4f5c\u6210\u3057\u3066 git init \u2014bare\n\n\n/var/repo/site.git/hooks/ \u3078\u79fb\u52d5\n\ncat > post-receive \u3067post-receive\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\nvim\u30e2\u30fc\u30c9\u306b\u3059\u308b\u306a\u3069\u3057\u3066\u4ee5\u4e0b\u8a18\u5165:x\u3067\u4fdd\u5b58\n#!/bin/sh\ngit --work-tree=/var/www/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d --git-dir=/var/repo/site.git checkout -f\nchmod +x post-receive\n\u30ed\u30fc\u30ab\u30eb\u30ec\u30dd\u30b8\u30c8\u30ea\u306bgit\u30d1\u30b9\u3092\u3064\u306a\u304e\u8fbc\u307f\nssh://root@IP/var/repo/site.git\nSSH\u30ad\u30fc\u306e\u767b\u9332\uff08\u65b0\u898f\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u6642\u306e\u307f\uff09\n\u30d7\u30c3\u30b7\u30e5\u3057\u3066\u30c7\u30d7\u30ed\u30a4\n\n\n\u30b5\u30fc\u30d0\u30fc\u6c38\u7d9a\u5316\nnpm\u306epm2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npm2 start app.js \u3067\u30b5\u30fc\u30d0\u30fc\u6c38\u7d9a\u5316\n\n#\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30ed\u30b0\u30a4\u30f3\n1. `ssh root@IP`\n2. \u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u4f5c\u6210\u6642\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u5b9b\u306b\u5c4a\u3044\u305f\u30d1\u30b9\u3092\u5165\u529b\n3. \u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\n\n#\u74b0\u5883\u69cb\u7bc9\n1. `sudo apt-get update`\n2. `sudo apt-get install nodejs`\n3. `sudo apt-get install npm`\n4. `sudo apt-get install git`\n\n#git\u30c7\u30d7\u30ed\u30a4\u3064\u306a\u304e\u8fbc\u307f\n[\u89e3\u8aac\u8a18\u4e8b](https://www.digitalocean.com/community/tutorials/how-to-set-up-automatic-deployment-with-git-with-a-vps)\n\n\n1. `/var/repo/site.git/` \u3092\u4f5c\u6210\u3057\u3066 `git init \u2014bare`\n2. `/var/repo/site.git/hooks/` \u3078\u79fb\u52d5\n3. `cat > post-receive` \u3067`post-receive`\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n4. `vim`\u30e2\u30fc\u30c9\u306b\u3059\u308b\u306a\u3069\u3057\u3066\u4ee5\u4e0b\u8a18\u5165`:x`\u3067\u4fdd\u5b58  \n\t#!/bin/sh  \n\tgit --work-tree=/var/www/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d --git-dir=/var/repo/site.git checkout -f\n5. `chmod +x post-receive`\n\n6. \u30ed\u30fc\u30ab\u30eb\u30ec\u30dd\u30b8\u30c8\u30ea\u306bgit\u30d1\u30b9\u3092\u3064\u306a\u304e\u8fbc\u307f\n\t`ssh://root@IP/var/repo/site.git`\n\n7. `SSH\u30ad\u30fc`\u306e\u767b\u9332\uff08\u65b0\u898f\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u6642\u306e\u307f\uff09\n\n8. \u30d7\u30c3\u30b7\u30e5\u3057\u3066\u30c7\u30d7\u30ed\u30a4\n\n#\u30b5\u30fc\u30d0\u30fc\u6c38\u7d9a\u5316\n`npm`\u306e`pm2`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`pm2 start app.js` \u3067\u30b5\u30fc\u30d0\u30fc\u6c38\u7d9a\u5316\n"}