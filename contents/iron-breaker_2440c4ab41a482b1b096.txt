{"context": " More than 1 year has passed since last update.\u3069\u3046\u3082\u3001\u5e74\u672b\u5e74\u59cb\u306f[\u30cf\u30f3\u30bf\u30fc\u30cf\u30f3\u30bf\u30fc\u8aad\u3080]\u2192[ruby\u3044\u3058\u308b]\u2192[\u9905\u98df\u3079\u308b]\u2192[\u30cf\u30f3\u30bf\u30fc\u30cf\u30f3\u30bf\u30fc\u8aad\u3080]\u2192[ruby\u3044\u3058\u308b]\u2192[\u9905\u98df\u3079\u308b]\u3092\u30ed\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u5343\u8449\u3067\u3059\u3002\n\u4eca\u65e5\u306f\u3001google-api-ruby-client\u3092\u4f7f\u7528\u3057\u3066\u3001\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u60c5\u5831\u3092\u8868\u793a\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u76ee\u7684\ngoogle\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3002\n\u79c1\u306f\u3001\u51fa\u52e4\u30fb\u9000\u52e4\u3092\u30ab\u30ec\u30f3\u30c0\u30fc\u767b\u9332\u3057\u3066\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u3044\u3044\u611f\u3058\u306b\u51fa\u529b\u3057\u3066\u3001\u4f7f\u3046\u305f\u3081\u3002\n\u3053\u3053\u3067\u306f\u3001\u767b\u9332\u5185\u5bb9\u3092\u6a19\u6e96\u51fa\u529b\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\n\nOS X 10.9.1\nruby 2.0.0p247 (2013-06-27 revision 41674)\ngem 2.2.0\n\n\n\u624b\u9806\n\n\ngoogle-api-ruby-client\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngoogle API\u306e\u6709\u52b9\u3068API\u30ad\u30fc\u306e\u53d6\u5f97\nOAuth\u8a8d\u8a3c\u3092\u884c\u3044\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\n\u3044\u3056\u3001ruby\u3092\u5b9f\u884c\n\n\n\u624b\u9806\u8a73\u7d30\n\ngoogle-api-ruby-client\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo gem install google-api-client -v 0.6.4\n$ gem install jwt -v 0.1.5\n\n\ngoogle API\u306e\u6709\u52b9\u3068API\u30ad\u30fc\u306e\u53d6\u5f97\n\n\u30ab\u30ec\u30f3\u30c0\u30fcAPI\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u8a31\u53ef\n\n\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\nhttps://cloud.google.com/console\nCalendar API\u3092\u6709\u52b9\u306b\u3059\u308b\nAPIs > Calendar API\u3088\u308a\u300cON\u300d\u306b\u3059\u308b\n\n\n\nOAuth\u3067\u4f7f\u7528\u3059\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306e\u53d6\u5f97\n\nCredential > CREATE NEW CLIENT ID\u3092\u9078\u629e\n\nInstalled application\u3092\u9078\u629e\n\n\u751f\u6210\u3055\u308c\u305f\u300cClient ID\u300d\u3068\u300cClient secret\u300d\u306fOAuth\u8a8d\u8a3c\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u30e1\u30e2\u3057\u3066\u304a\u304f\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u767b\u9332\n\nConsent screen\u3088\u308a\u300cEMAIL ADDRESS\u300d\u3001\u300cPRODUCT NAME\u300d\u3092\u8a2d\u5b9a\n\nOAuth\u8a8d\u8a3c\u3092\u884c\u3044\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\n\u5148\u307b\u3069\u53d6\u5f97\u3057\u305f\u300cClient ID\u300d\u3068\u300cClient secret\u300d\u3092\u4f7f\u3044\u8a8d\u8a3c\u3092\u884c\u3046\u3002\n$ google-api oauth-2-login --client-id=\"<your client id>\" --client-secret=\"<your client secret>\" --scope=\"https://www.googleapis.com/auth/calendar\"\n\n\u30d6\u30e9\u30a6\u30b6\u304c\u958b\u304f\u306e\u3067\u300c\u627f\u8a8d\u300d\u3092\u9078\u629e\u3059\u308b\u3002\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\nls ~/.google-api.yaml\n\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306bAPI\u30a2\u30af\u30bb\u30b9\u306b\u5fc5\u8981\u306a\u60c5\u5831\u304c\u5165\u3063\u3066\u3044\u308b\u3002\n\n\u3044\u3056\u3001ruby\u306e\u5b9f\u884c\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u3063\u3051\u3066\u304a\u304d\u307e\u3059\u3002\n\u4ed6\u306b\u3082API\u304c\u8272\u3005\u3042\u308b\u306e\u3067\u3001\u8272\u3005\u3067\u304d\u305d\u3046\u3002\nhttps://developers.google.com/apis-explorer/#p/calendar/v3/\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\ncalendar.rb\n# Initialize the client & Google+ API\nrequire 'google/api_client'\nrequire \"yaml\"\nrequire \"time\"\n\n# Initialize OAuth 2.0 client\n# authorization\noauth_yaml = YAML.load_file('.google-api.yaml')\nclient = Google::APIClient.new(:application_name => '')\nclient.authorization.client_id = oauth_yaml[\"client_id\"]\nclient.authorization.client_secret = oauth_yaml[\"client_secret\"]\nclient.authorization.scope = oauth_yaml[\"scope\"]\nclient.authorization.refresh_token = oauth_yaml[\"refresh_token\"]\nclient.authorization.access_token = oauth_yaml[\"access_token\"]\n\ncal = client.discovered_api('calendar', 'v3')\n\n# \u30a4\u30d9\u30f3\u30c8\u53d6\u5f97\u6708\u306e\u78ba\u8a8d\nprintf(\"\u30ab\u30ec\u30f3\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\u5e74(20XX)\uff1a\")\nyear = gets.strip.to_i\nprintf(\"\u30ab\u30ec\u30f3\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\u6708(1-12)\uff1a\")\nmonth = gets.strip.to_i\n\n# \u6642\u9593\u3092\u683c\u7d0d\ntime_min = Time.utc(year, month, 1, 0).iso8601\ntime_max = Time.utc(year, month, 31, 0).iso8601\n\n# \u30a4\u30d9\u30f3\u30c8\u306e\u53d6\u5f97\nparams = {'calendarId' => 'primary',\n          'orderBy' => 'startTime',\n          'timeMax' => time_max,\n          'timeMin' => time_min,\n          'singleEvents' => 'True'}\n\nresult = client.execute(:api_method => cal.events.list,\n                        :parameters => params)\n\n# \u30a4\u30d9\u30f3\u30c8\u306e\u683c\u7d0d\nevents = []\nresult.data.items.each do |item|\n        events << item\nend\n\n# \u51fa\u529b\nevents.each do |event|\n    printf(\"%s,%s\\n\",event.start.date,event.summary)\nend\n\n\n\n\u8ab2\u984c\n\n\u30a4\u30d9\u30f3\u30c8\u304c\u65e5\u4ed8\u9806\u306b\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u60a9\u307f\u4e2d\u3010\u89e3\u6c7a\u3011\u30b3\u30fc\u30c9\u53d6\u308a\u8fbc\u307f\u6e08\u307f\n\n\n\u53c2\u8003URL\nhttp://blogaomu.com/2012/09/16/ruby-script-using-google-calendar-api\n\n\u3069\u3046\u3082\u3001\u5e74\u672b\u5e74\u59cb\u306f[\u30cf\u30f3\u30bf\u30fc\u30cf\u30f3\u30bf\u30fc\u8aad\u3080]\u2192[ruby\u3044\u3058\u308b]\u2192[\u9905\u98df\u3079\u308b]\u2192[\u30cf\u30f3\u30bf\u30fc\u30cf\u30f3\u30bf\u30fc\u8aad\u3080]\u2192[ruby\u3044\u3058\u308b]\u2192[\u9905\u98df\u3079\u308b]\u3092\u30ed\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u5343\u8449\u3067\u3059\u3002\n\n\u4eca\u65e5\u306f\u3001google-api-ruby-client\u3092\u4f7f\u7528\u3057\u3066\u3001\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u60c5\u5831\u3092\u8868\u793a\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u76ee\u7684\ngoogle\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3002\n\u79c1\u306f\u3001\u51fa\u52e4\u30fb\u9000\u52e4\u3092\u30ab\u30ec\u30f3\u30c0\u30fc\u767b\u9332\u3057\u3066\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u3044\u3044\u611f\u3058\u306b\u51fa\u529b\u3057\u3066\u3001\u4f7f\u3046\u305f\u3081\u3002\n\u3053\u3053\u3067\u306f\u3001\u767b\u9332\u5185\u5bb9\u3092\u6a19\u6e96\u51fa\u529b\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u307e\u3059\u3002\n\n# \u74b0\u5883\n* OS X 10.9.1\n* ruby 2.0.0p247 (2013-06-27 revision 41674)\n* gem 2.2.0\n\n# \u624b\u9806\n1. [google-api-ruby-client](https://github.com/google/google-api-ruby-client)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1. google API\u306e\u6709\u52b9\u3068API\u30ad\u30fc\u306e\u53d6\u5f97\n1. OAuth\u8a8d\u8a3c\u3092\u884c\u3044\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\n1. \u3044\u3056\u3001ruby\u3092\u5b9f\u884c\n\n# \u624b\u9806\u8a73\u7d30\n\n## google-api-ruby-client\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n    $ sudo gem install google-api-client -v 0.6.4\n    $ gem install jwt -v 0.1.5\n\n## google API\u306e\u6709\u52b9\u3068API\u30ad\u30fc\u306e\u53d6\u5f97\n### \u30ab\u30ec\u30f3\u30c0\u30fcAPI\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u8a31\u53ef\n* \u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\nhttps://cloud.google.com/console\n\n* Calendar API\u3092\u6709\u52b9\u306b\u3059\u308b\n `APIs` > `Calendar API`\u3088\u308a\u300cON\u300d\u306b\u3059\u308b\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-02 5.34.27.png](https://qiita-image-store.s3.amazonaws.com/0/33834/d1b50ecd-2177-f747-d021-4097e6c8ba11.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-02 54.27.png\")\n\n* OAuth\u3067\u4f7f\u7528\u3059\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306e\u53d6\u5f97\n\n`Credential` > `CREATE NEW CLIENT ID`\u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-01 22.51.47.png](https://qiita-image-store.s3.amazonaws.com/0/33834/3af15d4e-4bef-5a01-1c47-48f5b4bbc8bd.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-01 22.51.47.png\")\n\n`Installed application`\u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-01 23.17.38.png](https://qiita-image-store.s3.amazonaws.com/0/33834/3de4b8f8-6da2-665a-bbc3-69333d3f25ff.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-01 23.17.38.png\")\n\n\u751f\u6210\u3055\u308c\u305f\u300cClient ID\u300d\u3068\u300cClient secret\u300d\u306fOAuth\u8a8d\u8a3c\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u30e1\u30e2\u3057\u3066\u304a\u304f\n\n\n* \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u767b\u9332\n\n`Consent screen`\u3088\u308a\u300cEMAIL ADDRESS\u300d\u3001\u300cPRODUCT NAME\u300d\u3092\u8a2d\u5b9a\n\n## OAuth\u8a8d\u8a3c\u3092\u884c\u3044\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\n\u5148\u307b\u3069\u53d6\u5f97\u3057\u305f\u300cClient ID\u300d\u3068\u300cClient secret\u300d\u3092\u4f7f\u3044\u8a8d\u8a3c\u3092\u884c\u3046\u3002\n\n    $ google-api oauth-2-login --client-id=\"<your client id>\" --client-secret=\"<your client secret>\" --scope=\"https://www.googleapis.com/auth/calendar\"\n\n\u30d6\u30e9\u30a6\u30b6\u304c\u958b\u304f\u306e\u3067\u300c\u627f\u8a8d\u300d\u3092\u9078\u629e\u3059\u308b\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-02 0.01.17.png](https://qiita-image-store.s3.amazonaws.com/0/33834/7a24feb2-ff38-cf64-1cf8-8c3f99402932.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-01-02 0.01.17.png\")\n\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n    ls ~/.google-api.yaml\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306bAPI\u30a2\u30af\u30bb\u30b9\u306b\u5fc5\u8981\u306a\u60c5\u5831\u304c\u5165\u3063\u3066\u3044\u308b\u3002\n\n## \u3044\u3056\u3001ruby\u306e\u5b9f\u884c\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u3063\u3051\u3066\u304a\u304d\u307e\u3059\u3002\n\u4ed6\u306b\u3082API\u304c\u8272\u3005\u3042\u308b\u306e\u3067\u3001\u8272\u3005\u3067\u304d\u305d\u3046\u3002\nhttps://developers.google.com/apis-explorer/#p/calendar/v3/\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n```ruby:calendar.rb\n# Initialize the client & Google+ API\nrequire 'google/api_client'\nrequire \"yaml\"\nrequire \"time\"\n\n# Initialize OAuth 2.0 client\n# authorization\noauth_yaml = YAML.load_file('.google-api.yaml')\nclient = Google::APIClient.new(:application_name => '')\nclient.authorization.client_id = oauth_yaml[\"client_id\"]\nclient.authorization.client_secret = oauth_yaml[\"client_secret\"]\nclient.authorization.scope = oauth_yaml[\"scope\"]\nclient.authorization.refresh_token = oauth_yaml[\"refresh_token\"]\nclient.authorization.access_token = oauth_yaml[\"access_token\"]\n\ncal = client.discovered_api('calendar', 'v3')\n\n# \u30a4\u30d9\u30f3\u30c8\u53d6\u5f97\u6708\u306e\u78ba\u8a8d\nprintf(\"\u30ab\u30ec\u30f3\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\u5e74(20XX)\uff1a\")\nyear = gets.strip.to_i\nprintf(\"\u30ab\u30ec\u30f3\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\u6708(1-12)\uff1a\")\nmonth = gets.strip.to_i\n\n# \u6642\u9593\u3092\u683c\u7d0d\ntime_min = Time.utc(year, month, 1, 0).iso8601\ntime_max = Time.utc(year, month, 31, 0).iso8601\n\n# \u30a4\u30d9\u30f3\u30c8\u306e\u53d6\u5f97\nparams = {'calendarId' => 'primary',\n          'orderBy' => 'startTime',\n          'timeMax' => time_max,\n          'timeMin' => time_min,\n          'singleEvents' => 'True'}\n\nresult = client.execute(:api_method => cal.events.list,\n                        :parameters => params)\n\n# \u30a4\u30d9\u30f3\u30c8\u306e\u683c\u7d0d\nevents = []\nresult.data.items.each do |item|\n\t\tevents << item\nend\n\n# \u51fa\u529b\nevents.each do |event|\n\tprintf(\"%s,%s\\n\",event.start.date,event.summary)\nend\n```\n\n# \u8ab2\u984c\n* \u30a4\u30d9\u30f3\u30c8\u304c\u65e5\u4ed8\u9806\u306b\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u60a9\u307f\u4e2d\u3010\u89e3\u6c7a\u3011\u30b3\u30fc\u30c9\u53d6\u308a\u8fbc\u307f\u6e08\u307f\n\n#\u53c2\u8003URL\nhttp://blogaomu.com/2012/09/16/ruby-script-using-google-calendar-api\n\n", "tags": ["Ruby", "google"]}