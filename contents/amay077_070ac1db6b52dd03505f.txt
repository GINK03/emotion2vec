{"context": " More than 1 year has passed since last update.Google Map Android API v2 \u3067\u306f\u3001\u6307\u5b9a\u3057\u305f\u7bc4\u56f2\u306b\u3044\u3044\u304b\u3093\u3058\u306b\u30ba\u30fc\u30e0\u3057\u3066\u304f\u308c\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u3063\u3066\uff08\u3053\u308c\u3092\u4f7f\u3046\u3068\u4e0b\u8a18\u4e8b\u306e\u3088\u3046\u306a\u3053\u3068\u304c\u3067\u304d\u308b\uff09\u3001\u3068\u3066\u3082\u4fbf\u5229\u306a\u306e\u3067\u3059\u304c\u3001\u666e\u901a\u306b\u4f7f\u3063\u3066\u305f\u3089\u843d\u3061\u307e\u3057\u305f\uff08\u6ce3\n\nAndroid GooglMap\u3092\u4f7f\u3044\u3001\u73fe\u5728\u5024\u3068\u76ee\u7684\u5730\u3092\uff08\uff12\u70b9\u9593\uff09\u3092\u8868\u793a\u3055\u305b\u308b\u3002 | App Camp\n\n\u305d\u306e\u7406\u7531\u3068\u3001\u5bfe\u7b56\u3092\u8a18\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30a8\u30e9\u30fc\u306b\u306a\u308b\u30b3\u30fc\u30c9\nGoogleMap v2 \u3092\u4f7f\u3063\u305f\u3088\u304f\u3042\u308b\u30b3\u30fc\u30c9\u3002\n\nMainActivity.java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    SupportMapFragment fragment = ((SupportMapFragment)getSupportFragmentManager()\n            .findFragmentById(R.id.map));\n    GoogleMap gmap = fragment.getMap();\n\n    LatLngBounds bounds = LatLngBounds.builder()\n        .include(new LatLng(35.4433011,139.646108)) // \u6a2a\u6d5c\n        .include(new LatLng(35.6846001,139.696919)) // \u6771\u4eac\n        .build();\n\n    gmap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 15));\n}\n\n\n\u8d77\u52d5\u6642\u306b\u3001\u6a2a\u6d5c-\u6771\u4eac \u304c\u753b\u9762\u5185\u306b\u5165\u308b\u3088\u3046\u306b\u30ba\u30fc\u30e0\u3059\u308b\u3001\u3064\u3082\u308a\u306e\u30b3\u30fc\u30c9\u3002\n\u3053\u308c\u306f\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\n09-29 20:22:58.508: E/AndroidRuntime(18904): FATAL EXCEPTION: main\n09-29 20:22:58.508: E/AndroidRuntime(18904): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.amay077.android/com.amay077.android.mapsample.view.MainActivity}: java.lang.IllegalStateException: Map size should not be 0. Most likely, layout has not yet occured for the map view.\n\n\n\u30a8\u30e9\u30fc\u306e\u539f\u56e0\nStackOverflow \u3055\u307e\u306b\u8f09\u3063\u3066\u305f\u3002\n\nandroid - moveCamera with CameraUpdateFactory.newLatLngBounds crashes - Stack Overflow\n\n\u307e\u305f\u3001API\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 \u306b\u3082\u6b21\u306e\u3088\u3046\u306b\u8a18\u8f09\u304c\u3042\u308b\u3002\n\nNote: Only use the simpler method newLatLngBounds(boundary, padding) to generate a CameraUpdate if it is going to be used to move the camera after the map has undergone layout. During layout, the API calculates the display boundaries of the map which are needed to correctly project the bounding box. In comparison, you can use the CameraUpdate returned by the more complex method newLatLngBounds(boundary, width, height, padding) at any time, even before the map has undergone layout, because the API calculates the display boundaries from the arguments that you pass.\n\n\u610f\u8a33\u3059\u308b\u3068 newLatLngBounds(boundary, padding) \u306f\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3067\u4f7f\u3063\u3066\u306d\u3001\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u3001newLatLngBounds(boundary, width, height, padding) \u3092\u4f7f\u3063\u3066\u306d\u3002\u3068\u3044\u3046\u3053\u3068\u3089\u3057\u3044\u3002\n\u78ba\u304b\u306b onCreate \u3067\u306f\u307e\u3060\u30ec\u30a4\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u7d0d\u5f97\u3002\n\n\u5bfe\u7b56\n\u4e0a\u306e StackOverflow \u3067\u3082\u89e3\u6c7a\u7b56\u3068\u3057\u3066\u3001ViewTreeObserver.addOnGlobalLayoutListener \u3092\u4f7f\u3063\u3066\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067 moveCamera \u3059\u308b\u65b9\u6cd5\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u3082\u3046\u3061\u3063\u3068\u30b7\u30f3\u30d7\u30eb\u306b\u3067\u304d\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u3068\u3053\u308d\u3001\u3061\u3087\u3046\u3069\u5225\u4ef6\u3067\u300c\u30d3\u30e5\u30fc\u306e\u30b5\u30a4\u30ba\u304c\u78ba\u5b9a(\u3057\u3066 Width/Height \u304c\u53d6\u5f97\u3067\u304d\u308b)\u30bf\u30a4\u30df\u30f3\u30b0\u300d\u3092\u8abf\u3079\u3066\u3044\u3066\u3001\u540c\u3058\u304f StackOverflow \u3067\u4ee5\u4e0b\u306e\u60c5\u5831\u3092\u767a\u898b\u3002\n\nandroid - When Can I First Measure a View? - Stack Overflow\n\n\u3053\u308c\u306b\u3088\u308b\u3068 view.post(new Runnable() { \u2026 }) \u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3082 OK \u3089\u3057\u3044\u306e\u3067\u3001\u4eca\u56de\u306f\u3053\u308c\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\nMainActivity.java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    SupportMapFragment fragment = ((SupportMapFragment)getSupportFragmentManager()\n            .findFragmentById(R.id.map));\n    final GoogleMap gmap = fragment.getMap();\n\n    // NOTE MainActivity.this.runOnUiThread(new Runnable() { \u3067\u306f\u30c0\u30e1\u3060\u3063\u305f\n    fragment.getView().post(new Runnable() {\n        @Override\n        public void run() {\n            LatLngBounds bounds = LatLngBounds.builder()\n                    .include(new LatLng(35.4433011,139.646108)) // \u6a2a\u6d5c\n                    .include(new LatLng(35.6846001,139.696919)) // \u6771\u4eac\n                    .build();\n\n            gmap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 15));\n        }\n    });\n}\n\n\n\u3068\u3057\u305f\u3068\u3053\u308d\u3001\u6b63\u5e38\u306b\u5730\u56f3\u304c\u30ba\u30fc\u30e0\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u51e6\u7406\u3092\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u884c\u3046 Activity.runOnUiThread \u3084 Handler.post \u3067\u306f NG\u3001\u5192\u982d\u3068\u540c\u3058\u30a8\u30e9\u30fc\u3067\u3057\u305f\u3002\u51e6\u7406\u306f UI\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u884c\u308f\u308c\u308b\u3051\u3069\u3001Map \u306f\u307e\u3060\u30ec\u30a4\u30a2\u30a6\u30c8\u672a\u5b8c\u4e86\u3001\u3068\u3044\u3046\u4e8b\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\u8d77\u52d5\u6642\u306e\u51e6\u7406\u306f\u3001\u5168\u3066\u306e View \u3067 post \u5185\u306b\u66f8\u3044\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u306e\u304b\u3082\u3002\n\nGoogle Map Android API v2 \u3067\u306f\u3001\u6307\u5b9a\u3057\u305f\u7bc4\u56f2\u306b\u3044\u3044\u304b\u3093\u3058\u306b\u30ba\u30fc\u30e0\u3057\u3066\u304f\u308c\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u3063\u3066\uff08\u3053\u308c\u3092\u4f7f\u3046\u3068\u4e0b\u8a18\u4e8b\u306e\u3088\u3046\u306a\u3053\u3068\u304c\u3067\u304d\u308b\uff09\u3001\u3068\u3066\u3082\u4fbf\u5229\u306a\u306e\u3067\u3059\u304c\u3001\u666e\u901a\u306b\u4f7f\u3063\u3066\u305f\u3089\u843d\u3061\u307e\u3057\u305f\uff08\u6ce3\n\n* [Android GooglMap\u3092\u4f7f\u3044\u3001\u73fe\u5728\u5024\u3068\u76ee\u7684\u5730\u3092\uff08\uff12\u70b9\u9593\uff09\u3092\u8868\u793a\u3055\u305b\u308b\u3002 | App Camp](http://tryworks-design.com/?p=1530)\n\n\u305d\u306e\u7406\u7531\u3068\u3001\u5bfe\u7b56\u3092\u8a18\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n## \u30a8\u30e9\u30fc\u306b\u306a\u308b\u30b3\u30fc\u30c9\n\nGoogleMap v2 \u3092\u4f7f\u3063\u305f\u3088\u304f\u3042\u308b\u30b3\u30fc\u30c9\u3002\n\n```java:MainActivity.java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    \n    SupportMapFragment fragment = ((SupportMapFragment)getSupportFragmentManager()\n            .findFragmentById(R.id.map));\n    GoogleMap gmap = fragment.getMap();\n    \n    LatLngBounds bounds = LatLngBounds.builder()\n        .include(new LatLng(35.4433011,139.646108)) // \u6a2a\u6d5c\n        .include(new LatLng(35.6846001,139.696919)) // \u6771\u4eac\n        .build();\n    \n    gmap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 15));\n}\n```\n\n\u8d77\u52d5\u6642\u306b\u3001\u6a2a\u6d5c-\u6771\u4eac \u304c\u753b\u9762\u5185\u306b\u5165\u308b\u3088\u3046\u306b\u30ba\u30fc\u30e0\u3059\u308b\u3001\u3064\u3082\u308a\u306e\u30b3\u30fc\u30c9\u3002\n\n\u3053\u308c\u306f\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\n>09-29 20:22:58.508: E/AndroidRuntime(18904): FATAL EXCEPTION: main\n09-29 20:22:58.508: E/AndroidRuntime(18904): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.amay077.android/com.amay077.android.mapsample.view.MainActivity}: java.lang.IllegalStateException: Map size should not be 0. Most likely, layout has not yet occured for the map view.\n\n## \u30a8\u30e9\u30fc\u306e\u539f\u56e0\n\nStackOverflow \u3055\u307e\u306b\u8f09\u3063\u3066\u305f\u3002\n\n* [android - moveCamera with CameraUpdateFactory.newLatLngBounds crashes - Stack Overflow](http://stackoverflow.com/questions/13692579/movecamera-with-cameraupdatefactory-newlatlngbounds-crashes)\n\n\u307e\u305f\u3001[API\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://developers.google.com/maps/documentation/android/views#changing_camera_position) \u306b\u3082\u6b21\u306e\u3088\u3046\u306b\u8a18\u8f09\u304c\u3042\u308b\u3002\n\n>Note: Only use the simpler method newLatLngBounds(boundary, padding) to generate a CameraUpdate if it is going to be used to move the camera after the map has undergone layout. During layout, the API calculates the display boundaries of the map which are needed to correctly project the bounding box. In comparison, you can use the CameraUpdate returned by the more complex method newLatLngBounds(boundary, width, height, padding) at any time, even before the map has undergone layout, because the API calculates the display boundaries from the arguments that you pass.\n\n\u610f\u8a33\u3059\u308b\u3068 ``newLatLngBounds(boundary, padding)`` \u306f\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3067\u4f7f\u3063\u3066\u306d\u3001\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u3001``newLatLngBounds(boundary, width, height, padding)`` \u3092\u4f7f\u3063\u3066\u306d\u3002\u3068\u3044\u3046\u3053\u3068\u3089\u3057\u3044\u3002\n\n\u78ba\u304b\u306b ``onCreate`` \u3067\u306f\u307e\u3060\u30ec\u30a4\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u7d0d\u5f97\u3002\n\n## \u5bfe\u7b56\n\n\u4e0a\u306e StackOverflow \u3067\u3082\u89e3\u6c7a\u7b56\u3068\u3057\u3066\u3001``ViewTreeObserver.addOnGlobalLayoutListener`` \u3092\u4f7f\u3063\u3066\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067 moveCamera \u3059\u308b\u65b9\u6cd5\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u3082\u3046\u3061\u3063\u3068\u30b7\u30f3\u30d7\u30eb\u306b\u3067\u304d\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u3068\u3053\u308d\u3001\u3061\u3087\u3046\u3069\u5225\u4ef6\u3067\u300c\u30d3\u30e5\u30fc\u306e\u30b5\u30a4\u30ba\u304c\u78ba\u5b9a(\u3057\u3066 Width/Height \u304c\u53d6\u5f97\u3067\u304d\u308b)\u30bf\u30a4\u30df\u30f3\u30b0\u300d\u3092\u8abf\u3079\u3066\u3044\u3066\u3001\u540c\u3058\u304f StackOverflow \u3067\u4ee5\u4e0b\u306e\u60c5\u5831\u3092\u767a\u898b\u3002\n\n* [android - When Can I First Measure a View? - Stack Overflow](http://stackoverflow.com/questions/4393612/when-can-i-first-measure-a-view/15301092#15301092)\n\n\u3053\u308c\u306b\u3088\u308b\u3068 ``view.post(new Runnable() { \u2026 })`` \u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3082 OK \u3089\u3057\u3044\u306e\u3067\u3001\u4eca\u56de\u306f\u3053\u308c\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\n```java:MainActivity.java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    \n    SupportMapFragment fragment = ((SupportMapFragment)getSupportFragmentManager()\n            .findFragmentById(R.id.map));\n    final GoogleMap gmap = fragment.getMap();\n    \n    // NOTE MainActivity.this.runOnUiThread(new Runnable() { \u3067\u306f\u30c0\u30e1\u3060\u3063\u305f\n    fragment.getView().post(new Runnable() {\n        @Override\n        public void run() {\n            LatLngBounds bounds = LatLngBounds.builder()\n                    .include(new LatLng(35.4433011,139.646108)) // \u6a2a\u6d5c\n                    .include(new LatLng(35.6846001,139.696919)) // \u6771\u4eac\n                    .build();\n            \n            gmap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 15));\n        }\n    });\n}\n```\n\n\u3068\u3057\u305f\u3068\u3053\u308d\u3001\u6b63\u5e38\u306b\u5730\u56f3\u304c\u30ba\u30fc\u30e0\u3055\u308c\u307e\u3057\u305f\u3002\n\n![img](https://dl.dropboxusercontent.com/u/264530/qiita/movecamera_with_cameraupdatefactory_newlatlngbounds_crashes_01.png)\n\n\u3061\u306a\u307f\u306b\u3001\u51e6\u7406\u3092\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u884c\u3046 ``Activity.runOnUiThread`` \u3084 ``Handler.post`` \u3067\u306f NG\u3001\u5192\u982d\u3068\u540c\u3058\u30a8\u30e9\u30fc\u3067\u3057\u305f\u3002\u51e6\u7406\u306f UI\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u884c\u308f\u308c\u308b\u3051\u3069\u3001Map \u306f\u307e\u3060\u30ec\u30a4\u30a2\u30a6\u30c8\u672a\u5b8c\u4e86\u3001\u3068\u3044\u3046\u4e8b\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u8d77\u52d5\u6642\u306e\u51e6\u7406\u306f\u3001\u5168\u3066\u306e View \u3067 post \u5185\u306b\u66f8\u3044\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u306e\u304b\u3082\u3002\n", "tags": ["Java", "GoogleMapsAPI", "Android"]}