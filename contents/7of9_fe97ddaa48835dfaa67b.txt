{"context": " More than 1 year has passed since last update.\n\u52d5\u4f5c\u74b0\u5883\nRaspberry Pi2 + raspbian (python serial\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f)\nWindows 7 pro 32bit\n\n\n\n\u3084\u308a\u305f\u3044\u3053\u3068\nRS-232C\u901a\u4fe1\u3067\u4f7f\u308f\u308c\u308bcontrol character\u3092\u6271\u3046python\u5b9f\u88c5\u306e\u78ba\u8a8d\n\n\u63a5\u7d9a\u5f62\u614b\n\nUSB\u30b7\u30ea\u30a2\u30eb\u30b1\u30fc\u30d6\u30eb\u30922\u672c\u4f7f\u7528\n\nWin\u5074 > SRC06-USB (\u30d0\u30c3\u30d5\u30a1\u30ed\u30fc)\nPi2\u5074 > USB-RS232 (TFTEC JAPAN)\n\n\u901a\u4fe1\u901f\u5ea6\u306f 9600 bps\n\n\u30bd\u30d5\u30c8\n\nWindows\u5074: RS232C\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\n\n\n<ACK>\u3084\u6587\u5b57\u5217\u3092\u4e00\u7dd2\u306b\u9001\u4fe1\u3067\u304d\u308b\n\n\n\n\ncode\nPi2\u5074\u306e\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3092\u5b9f\u88c5\u3057\u3066\u307f\u305f\ngithub\n\n160216commPrintable.py\n#!/usr/bin/env python\n\nimport serial\nimport time\n\ndef isControlCharOtherThanCRLF(code):\n    if ord(code) == 13 or ord(code) == 10:\n        return False\n    return ord(code) < 32\n\ndef main():\n    con=serial.Serial('/dev/ttyUSB0', 9600, timeout=10)\n    rcvd=''\n    while 1:\n        code = con.read()\n        if len(code) > 0:\n            if isControlCharOtherThanCRLF(code):\n                print \"control char:\" + str(ord(code))\n            else:\n                rcvd = rcvd + code\n        if \"\\n\" in rcvd or \"\\r\" in rcvd:\n            print rcvd,\n            rcvd = ''\n\nmain()\n\n\n\n\u7d50\u679c\nWin7\u5074\u306eRS232C\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u6587\u5b57\u5217\u3092\u9001\u4fe1\u3057\u3066\u307f\u305f\u3002\ntest<CR><LF><ACK><NAK>test2<CR><LF>\n\nPi2\u5074(\u4e0a\u8a18\u30b3\u30fc\u30c9\u3092\u5b9f\u884c)\u3067\u306f\u4ee5\u4e0b\u3068\u306a\u3063\u305f\ntest\ncontrol char:6\ncontrol char:21\ntest2\n\n```txt:\u52d5\u4f5c\u74b0\u5883\nRaspberry Pi2 + raspbian (python serial\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f)\nWindows 7 pro 32bit\n```\n\n### \u3084\u308a\u305f\u3044\u3053\u3068\n\nRS-232C\u901a\u4fe1\u3067\u4f7f\u308f\u308c\u308bcontrol character\u3092\u6271\u3046python\u5b9f\u88c5\u306e\u78ba\u8a8d\n\n\n### \u63a5\u7d9a\u5f62\u614b\n\n![](http://yuml.me/diagram/class/[Win7]RS232C-->[\u30af\u30ed\u30b9], [\u30af\u30ed\u30b9]RS232C-->[Pi2])\n\nUSB\u30b7\u30ea\u30a2\u30eb\u30b1\u30fc\u30d6\u30eb\u30922\u672c\u4f7f\u7528\n\n- Win\u5074 > SRC06-USB (\u30d0\u30c3\u30d5\u30a1\u30ed\u30fc)\n- Pi2\u5074 > USB-RS232 (TFTEC JAPAN)\n\n\u901a\u4fe1\u901f\u5ea6\u306f 9600 bps\n\n### \u30bd\u30d5\u30c8\n\n- Windows\u5074: [RS232C\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb](http://www.vector.co.jp/soft/winnt/hardware/se411276.html)\n  - `<ACK>`\u3084\u6587\u5b57\u5217\u3092\u4e00\u7dd2\u306b\u9001\u4fe1\u3067\u304d\u308b\n\n### code\n\nPi2\u5074\u306e\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3092\u5b9f\u88c5\u3057\u3066\u307f\u305f\n\n[github](https://github.com/yasokada/python-151113-lineMonitor/blob/master/toLearn/160216commPrintable.py)\n\n```160216commPrintable.py\n#!/usr/bin/env python\n\nimport serial\nimport time\n\ndef isControlCharOtherThanCRLF(code):\n    if ord(code) == 13 or ord(code) == 10:\n        return False\n    return ord(code) < 32\n\ndef main():\n    con=serial.Serial('/dev/ttyUSB0', 9600, timeout=10)\n    rcvd=''\n    while 1:\n        code = con.read()\n        if len(code) > 0:\n            if isControlCharOtherThanCRLF(code):\n                print \"control char:\" + str(ord(code))\n            else:\n                rcvd = rcvd + code\n        if \"\\n\" in rcvd or \"\\r\" in rcvd:\n            print rcvd,\n            rcvd = ''\n        \nmain()\n```\n\n### \u7d50\u679c\n\nWin7\u5074\u306eRS232C\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u6587\u5b57\u5217\u3092\u9001\u4fe1\u3057\u3066\u307f\u305f\u3002\n\n```\ntest<CR><LF><ACK><NAK>test2<CR><LF>\n```\n\nPi2\u5074(\u4e0a\u8a18\u30b3\u30fc\u30c9\u3092\u5b9f\u884c)\u3067\u306f\u4ee5\u4e0b\u3068\u306a\u3063\u305f\n\n```\ntest\ncontrol char:6\ncontrol char:21\ntest2\n```\n\n", "tags": ["Python", "uart", "RS232C"]}