{"tags": ["monit"], "context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\n\nM/Monit | Wiki\nWEB\u7cfb\u5404\u793e\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u76e3\u8996\u30c4\u30fc\u30eb\u307e\u3068\u3081 - mikeda\u306e\u65e5\u8a18\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u307b\u307c\u306a\u3044\u3002\n\nsudo apt-get install -y monit\n\n\n\u8a2d\u5b9a\n\ninclude /etc/monit/conf.d/*\n\n\n/etc/monit/monitrc \u306f\u7de8\u96c6\u3057\u306a\u3044\u3002\u6700\u7d42\u884c\u3067\u4e0a\u8a18\u304c\u3042\u308b\u306e\u3067\u5916\u51fa\u3057\u3059\u308b\u3002\n\n\n/etc/monit/conf.d/check_hosts.conf\n#------------\n# \u30e1\u30fc\u30eb\u8a2d\u5b9a\n#------------\n# \u6307\u5b9a\u3057\u306a\u3044\u3068\u30e1\u30fc\u30eb\u304c\u98db\u3070\u306a\u304b\u3063\u305f\nset mailserver localhost\n\n# \u30a2\u30e9\u30fc\u30c8\u901a\u77e5\u5148\nset alert mymobile@address.com\n\n\n#--------------\n# http\u30b5\u30fc\u30d0\u8a2d\u5b9a\n#--------------\n# monit\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092web\u3067\u898b\u308c\u308b\u3002localhost\u306e\u307f\u8a31\u53ef\nset httpd port 2812 and\n   use address localhost\n   allow localhost\n\n\n#--------------\n# \u76e3\u8996\u5bfe\u8c61\n#--------------\n# http://server1.hoge.jp/ \u304c\u505c\u6b62\u30fb\u5fa9\u65e7\u3057\u305f\u3089\u30e1\u30fc\u30eb\u901a\u77e5\ncheck host server1 with address server1.hoge.jp\n    if failed url http://server1.hoge.jp/\n    then alert\n\n# server2.hoge.jp:22 \u304c\u505c\u6b62\u30fb\u5fa9\u65e7\u3057\u305f\u3089\u30e1\u30fc\u30eb\u901a\u77e5\ncheck host server2 with address server2.hoge.jp\n    if failed port 22\n    then alert\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\nsyntax\u30c1\u30a7\u30c3\u30af\nsudo monit -t\n\n\n\nmonit\u518d\u8d77\u52d5\nsudo systemctl restart monit\n\n\n\n\nhttp://localhost:2812\n\n\n\u76e3\u8996\u9593\u9694\n\nset daemon 120\n\n\n2\u5206\u304a\u304d\u306b\u76e3\u8996(\u521d\u671f\u5024)\n\n## \u53c2\u8003\n\n* [M/Monit | Wiki](https://mmonit.com/wiki/Monit/ConfigurationExamples)\n* [WEB\u7cfb\u5404\u793e\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u76e3\u8996\u30c4\u30fc\u30eb\u307e\u3068\u3081 - mikeda\u306e\u65e5\u8a18](http://mikeda.hatenablog.com/entry/2015/10/17/134805)\n\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* \u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u307b\u307c\u306a\u3044\u3002\n\n```bash:\nsudo apt-get install -y monit\n```\n\n## \u8a2d\u5b9a\n\n> include /etc/monit/conf.d/*\n\n* /etc/monit/monitrc \u306f\u7de8\u96c6\u3057\u306a\u3044\u3002\u6700\u7d42\u884c\u3067\u4e0a\u8a18\u304c\u3042\u308b\u306e\u3067\u5916\u51fa\u3057\u3059\u308b\u3002\n\n\n```apache:/etc/monit/conf.d/check_hosts.conf\n#------------\n# \u30e1\u30fc\u30eb\u8a2d\u5b9a\n#------------\n# \u6307\u5b9a\u3057\u306a\u3044\u3068\u30e1\u30fc\u30eb\u304c\u98db\u3070\u306a\u304b\u3063\u305f\nset mailserver localhost\n\n# \u30a2\u30e9\u30fc\u30c8\u901a\u77e5\u5148\nset alert mymobile@address.com\n\n\n#--------------\n# http\u30b5\u30fc\u30d0\u8a2d\u5b9a\n#--------------\n# monit\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092web\u3067\u898b\u308c\u308b\u3002localhost\u306e\u307f\u8a31\u53ef\nset httpd port 2812 and\n   use address localhost\n   allow localhost\n\n\n#--------------\n# \u76e3\u8996\u5bfe\u8c61\n#--------------\n# http://server1.hoge.jp/ \u304c\u505c\u6b62\u30fb\u5fa9\u65e7\u3057\u305f\u3089\u30e1\u30fc\u30eb\u901a\u77e5\ncheck host server1 with address server1.hoge.jp\n    if failed url http://server1.hoge.jp/\n    then alert\n\n# server2.hoge.jp:22 \u304c\u505c\u6b62\u30fb\u5fa9\u65e7\u3057\u305f\u3089\u30e1\u30fc\u30eb\u901a\u77e5\ncheck host server2 with address server2.hoge.jp\n    if failed port 22\n    then alert\n```\n\n## \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\n```bash:syntax\u30c1\u30a7\u30c3\u30af\nsudo monit -t\n```\n\n```bash:monit\u518d\u8d77\u52d5\nsudo systemctl restart monit\n```\n\n![monit.png](https://qiita-image-store.s3.amazonaws.com/0/25728/cdd231b0-a0cc-6fea-4f73-71b37f6b33d9.png)\n\n* http://localhost:2812\n\n### \u76e3\u8996\u9593\u9694\n\n> set daemon 120\n\n* 2\u5206\u304a\u304d\u306b\u76e3\u8996(\u521d\u671f\u5024)\n"}