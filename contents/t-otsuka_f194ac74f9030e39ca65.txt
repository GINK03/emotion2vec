{"context": " More than 1 year has passed since last update.JWT \u304c RS256 \u5f62\u5f0f\u306e\u7f72\u540d\u3067\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u3001PyJWT \u3067\u516c\u958b\u9375\u3092\u4f7f\u3063\u3066 JWT \u306e\u7f72\u540d\u3092\u691c\u8a3c\u3057\u3064\u3064\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u4e8b\u524d\u6e96\u5099\nPyJWT \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b\u3088\u3046\u306b RSA \u306e\u7f72\u540d\u306b\u5bfe\u5fdc\u3059\u308b\u306b\u306f\u3001PyJWT \u3068\u4f75\u305b\u3066\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e cryptography \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ pip install pyjwt\n$ pip install cryptography\n\ncryptography \u306e\u30d3\u30eb\u30c9\u306b\u306f Linux \u74b0\u5883\u3067\u306f libffi-devel \u3084 openssl-devel \u3068\u3044\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u4e0a\u8a18\u306e $ pip install cryptography \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306b\u306f\u3001\u3053\u308c\u3089\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nOS X \u3067\u306f\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u3082\u5fc5\u8981\u3067\u3001\u5272\u3068\u3084\u3084\u3053\u3057\u3044\u3067\u3059\u3002\n\u8a73\u3057\u304f\u306f cryptography \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u516c\u958b\u9375\u306e\u4f8b\npub_key.pem \u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u516c\u958b\u9375\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n\npub_key.pem\n-----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAuDopA35ZLa1sgi2QTFbZjH63BrhXw4evehjDiLHrSc5s+jKMSqfd\n6BLoQhN7jcOBnofQB/3rEoy6YXkW58lEtVmekQtYAHh11oB8TBBqzNZP1QxKXWjz\n8Jely5bJZHztZEzfddDR7yVZF0VSEa0KjiHbqCdAqXKYuAzUMN4dFyS/q0JXvGAr\nJq/LXyVC3EptcZki02p3Nd6KDZHW7hcj+p0xgYNiGCHO7yLf3uHP+7pak5TW0dWf\nMC9fl1/oYFILuasW7OV75+vJGs8d92joEC/Lx3S8+gi3z0CWMnCKrWiTtaAKAq8W\nyp4Go8WczOQ1rP+bzDj7b/9M3xrjqY3F0wIDAQAB\n-----END RSA PUBLIC KEY-----\n\n\n\u3061\u306a\u307f\u306b\u3053\u306e\u9375\u30c7\u30fc\u30bf\u306b\u300c-----BEGIN RSA PUBLIC KEY-----\u300d\u3001\u300c-----END RSA PUBLIC KEY-----\u300d\u3068\u3044\u3046\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u6307\u793a\u6587\u304c\u629c\u3051\u3066\u3044\u3066\u3001\u305d\u308c\u304c\u539f\u56e0\u3067\u691c\u8a3c\u306b\u5931\u6557\u3057\u3066\u3044\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\nPyJWT \u3067 JWT \u3092\u30c7\u30b3\u30fc\u30c9\u3059\u308b\n\n\u7f72\u540d\u691c\u8a3c\u3092\u3057\u306a\u3044\u5834\u5408\n\u691c\u8a3c\u3092\u3057\u306a\u3044\u5834\u5408\u306e\u30b3\u30fc\u30c9\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nimport jwt\n\nencoded_jwt = 'JWT\u306e\u30c7\u30fc\u30bf'\ndecoded_data = jwt.decode(encoded_jwt, verify=False)\n\n\u3053\u306e\u3088\u3046\u306b jwt.decode() \u95a2\u6570\u306e verify \u5f15\u6570\u306b False \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u7f72\u540d\u306e\u691c\u8a3c\u3092\u7701\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002verify \u5f15\u6570\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f True \u306a\u306e\u3067\u660e\u793a\u7684\u306b False \u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u7f72\u540d\u691c\u8a3c\u3092\u3059\u308b\u5834\u5408\n\u6b21\u306b\u7f72\u540d\u3092\u691c\u8a3c\u3059\u308b\u5834\u5408\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\nfrom Crypto.PublicKey import RSA\nimport jwt\n\nencoded_jwt = 'JWT\u306e\u30c7\u30fc\u30bf'\n\nrsa_public_key_pem = open('path/to/pub_key.pem', 'r').read()\nrsa_key = RSA.importKey(rsa_public_key_pem)\nkey = rsa_key.exportKey()\n\ndecoded_data = jwt.decode(encoded_jwt, key=key, verify=True)\n\n\u524d\u8ff0\u306e\u516c\u958b\u9375\u3092\u8aad\u307f\u8fbc\u307f\u3001\u307e\u305a RSA.importKey() \u30e1\u30bd\u30c3\u30c9\u3092\u901a\u3057\u3066 RSA \u30ad\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5909\u63db\u3057\u307e\u3059\u3002\u3053\u306e RSA \u30ad\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e exportKey() \u30e1\u30bd\u30c3\u30c9\u304b\u3089\u5f97\u3089\u308c\u308b\u9375\u30c7\u30fc\u30bf\u3092 jwt.decode() \u95a2\u6570\u306e key \u5f15\u6570\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\u305d\u3057\u3066 verify \u5f15\u6570\u306b True \u3092\u6307\u5b9a\u3057\u3066\u7f72\u540d\u691c\u8a3c\u3092\u6307\u793a\u3057\u307e\u3059\u3002\nRSA \u30ad\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3088\u308b\u9375\u30c7\u30fc\u30bf\u306e\u5909\u63db\u3092\u305b\u305a\u306b RSA \u516c\u958b\u9375\u306e\u6587\u5b57\u5217\u3092\u305d\u306e\u307e\u307e jwt.decode() \u95a2\u6570\u306e key \u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u3068 ValueError: Could not unserialize key data. \u3068\u3044\u3046\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n\nJWT \u304c RS256 \u5f62\u5f0f\u306e\u7f72\u540d\u3067\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u3001[PyJWT](https://github.com/progrium/pyjwt) \u3067\u516c\u958b\u9375\u3092\u4f7f\u3063\u3066 JWT \u306e\u7f72\u540d\u3092\u691c\u8a3c\u3057\u3064\u3064\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n### \u4e8b\u524d\u6e96\u5099\n\nPyJWT \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b\u3088\u3046\u306b RSA \u306e\u7f72\u540d\u306b\u5bfe\u5fdc\u3059\u308b\u306b\u306f\u3001PyJWT \u3068\u4f75\u305b\u3066\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e cryptography \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ pip install pyjwt\n$ pip install cryptography\n```\n\ncryptography \u306e\u30d3\u30eb\u30c9\u306b\u306f Linux \u74b0\u5883\u3067\u306f libffi-devel \u3084 openssl-devel \u3068\u3044\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u4e0a\u8a18\u306e ```$ pip install cryptography``` \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306b\u306f\u3001\u3053\u308c\u3089\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nOS X \u3067\u306f\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u3082\u5fc5\u8981\u3067\u3001\u5272\u3068\u3084\u3084\u3053\u3057\u3044\u3067\u3059\u3002\n\u8a73\u3057\u304f\u306f [cryptography \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://cryptography.io/en/latest/installation/)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n### \u516c\u958b\u9375\u306e\u4f8b\n\npub_key.pem \u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u516c\u958b\u9375\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n\n```text:pub_key.pem\n-----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAuDopA35ZLa1sgi2QTFbZjH63BrhXw4evehjDiLHrSc5s+jKMSqfd\n6BLoQhN7jcOBnofQB/3rEoy6YXkW58lEtVmekQtYAHh11oB8TBBqzNZP1QxKXWjz\n8Jely5bJZHztZEzfddDR7yVZF0VSEa0KjiHbqCdAqXKYuAzUMN4dFyS/q0JXvGAr\nJq/LXyVC3EptcZki02p3Nd6KDZHW7hcj+p0xgYNiGCHO7yLf3uHP+7pak5TW0dWf\nMC9fl1/oYFILuasW7OV75+vJGs8d92joEC/Lx3S8+gi3z0CWMnCKrWiTtaAKAq8W\nyp4Go8WczOQ1rP+bzDj7b/9M3xrjqY3F0wIDAQAB\n-----END RSA PUBLIC KEY-----\n```\n\n\u3061\u306a\u307f\u306b\u3053\u306e\u9375\u30c7\u30fc\u30bf\u306b\u300c-----BEGIN RSA PUBLIC KEY-----\u300d\u3001\u300c-----END RSA PUBLIC KEY-----\u300d\u3068\u3044\u3046\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u6307\u793a\u6587\u304c\u629c\u3051\u3066\u3044\u3066\u3001\u305d\u308c\u304c\u539f\u56e0\u3067\u691c\u8a3c\u306b\u5931\u6557\u3057\u3066\u3044\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\n### PyJWT \u3067 JWT \u3092\u30c7\u30b3\u30fc\u30c9\u3059\u308b\n\n#### \u7f72\u540d\u691c\u8a3c\u3092\u3057\u306a\u3044\u5834\u5408\n\n\u691c\u8a3c\u3092\u3057\u306a\u3044\u5834\u5408\u306e\u30b3\u30fc\u30c9\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```py\nimport jwt\n\nencoded_jwt = 'JWT\u306e\u30c7\u30fc\u30bf'\ndecoded_data = jwt.decode(encoded_jwt, verify=False)\n```\n\n\u3053\u306e\u3088\u3046\u306b jwt.decode() \u95a2\u6570\u306e verify \u5f15\u6570\u306b False \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u7f72\u540d\u306e\u691c\u8a3c\u3092\u7701\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002verify \u5f15\u6570\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f True \u306a\u306e\u3067\u660e\u793a\u7684\u306b False \u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n#### \u7f72\u540d\u691c\u8a3c\u3092\u3059\u308b\u5834\u5408\n\n\u6b21\u306b\u7f72\u540d\u3092\u691c\u8a3c\u3059\u308b\u5834\u5408\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n```py\nfrom Crypto.PublicKey import RSA\nimport jwt\n\nencoded_jwt = 'JWT\u306e\u30c7\u30fc\u30bf'\n\nrsa_public_key_pem = open('path/to/pub_key.pem', 'r').read()\nrsa_key = RSA.importKey(rsa_public_key_pem)\nkey = rsa_key.exportKey()\n\ndecoded_data = jwt.decode(encoded_jwt, key=key, verify=True)\n```\n\n\u524d\u8ff0\u306e\u516c\u958b\u9375\u3092\u8aad\u307f\u8fbc\u307f\u3001\u307e\u305a [RSA.importKey() \u30e1\u30bd\u30c3\u30c9](https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA-module.html#importKey)\u3092\u901a\u3057\u3066 RSA \u30ad\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5909\u63db\u3057\u307e\u3059\u3002\u3053\u306e RSA \u30ad\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e [exportKey() \u30e1\u30bd\u30c3\u30c9](https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA._RSAobj-class.html#exportKey)\u304b\u3089\u5f97\u3089\u308c\u308b\u9375\u30c7\u30fc\u30bf\u3092 jwt.decode() \u95a2\u6570\u306e key \u5f15\u6570\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\u305d\u3057\u3066 verify \u5f15\u6570\u306b True \u3092\u6307\u5b9a\u3057\u3066\u7f72\u540d\u691c\u8a3c\u3092\u6307\u793a\u3057\u307e\u3059\u3002\n\nRSA \u30ad\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3088\u308b\u9375\u30c7\u30fc\u30bf\u306e\u5909\u63db\u3092\u305b\u305a\u306b RSA \u516c\u958b\u9375\u306e\u6587\u5b57\u5217\u3092\u305d\u306e\u307e\u307e jwt.decode() \u95a2\u6570\u306e key \u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u3068 ```ValueError: Could not unserialize key data.``` \u3068\u3044\u3046\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n", "tags": ["JWT", "Python", "PyJWT0.4.0"]}