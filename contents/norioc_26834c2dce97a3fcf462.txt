{"tags": ["Ruby-Processing", "processing"], "context": " More than 1 year has passed since last update.\u30ad\u30e3\u30f3\u30d0\u30b9\u306b\u56de\u8ee2\u3059\u308b\u4e09\u89d2\u5f62\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb\u304c\u305d\u306e\u4e09\u89d2\u5f62\u306e\u5185\u5074\u306b\u3042\u308b\u3068\u304d\u306e\u307f\u3001\u305d\u306e\u4e09\u89d2\u5f62\u3092\u5857\u308a\u3064\u3076\u3059\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n\u74b0\u5883\n\nOS X 10.10.4\nRuby-Processing version 2.6.13\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\npoint-in-triangle.rb\n# 2 \u6b21\u5143\u30d9\u30af\u30c8\u30eb\nclass Vec2\n  attr_reader :x, :y\n\n  def initialize(x, y)\n    @x = x\n    @y = y\n  end\n\n  def subtract(v)\n    Vec2.new(@x - v.x, @y - v.y)\n  end\n\n  def -(v)\n    subtract(v)\n  end\n\n  def rotate!(deg)\n    rad = deg.radians\n    x = @x\n    y = @y\n    @x = x * cos(rad) - y * sin(rad)\n    @y = x * sin(rad) + y * cos(rad)\n  end\nend\n\ndef setup\n  size 400, 400\n\n  $a = Vec2.new 100, 0\n  $a.rotate! 0\n  $b = Vec2.new 100, 0\n  $b.rotate! 120\n  $c = Vec2.new 100, 0\n  $c.rotate! 240\nend\n\ndef draw\n  background 255\n\n  # \u4e09\u89d2\u5f62\u306e 3 \u70b9\u3092\u56de\u8ee2\n  $a.rotate! 1\n  $b.rotate! 1\n  $c.rotate! 1\n\n  pushMatrix()\n  translate(width/2, height/2)\n\n  a, b, c = $a, $b, $c\n  ellipse(a.x, a.y, 10, 10)\n  ellipse(b.x, b.y, 10, 10)\n  ellipse(c.x, c.y, 10, 10)\n\n  p = Vec2.new(mouseX - width/2, mouseY - height/2)\n  ab = b - a\n  bp = p - b\n\n  bc = c - b\n  cp = p - c\n\n  ca = a - c\n  ap = p - a\n\n  c1 = ab.x * bp.y - ab.y * bp.x\n  c2 = bc.x * cp.y - bc.y * cp.x\n  c3 = ca.x * ap.y - ca.y * ap.x\n\n  if (c1 > 0 && c2 > 0 && c3 > 0) || (c1 < 0 && c2 < 0 && c3 < 0)\n    # 3 \u70b9\u306e\u5185\u90e8\u306b\u3042\u308b\n    fill(120, 120, 120)\n  else\n    noFill\n  end\n  triangle(a.x, a.y, b.x, b.y, c.x, c.y)\n\n  popMatrix()\nend\n\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ rp5 --nojruby watch point-in-triangle.rb\n\n\n\u7591\u554f:\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u3042\u308b\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u305f\u3089\u3001Java \u306e\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u308b => \u6700\u65b0\u306e Java SE \u3092\u5165\u308c\u305f\u3089\u89e3\u6c7a\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u300c# \u3042\u300d\u3068\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u3068\u3001Java \u306e\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u300c# \u3042\u3042\u300d\u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3060\u3068\u3001\u4f8b\u5916\u306f\u751f\u6210\u3055\u308c\u307e\u305b\u3093\u3002\u7279\u5b9a\u306e\u30b3\u30e1\u30f3\u30c8\u6587\u5b57\u5217\u3060\u3068\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u304b\u3001\u3088\u304f\u5206\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f UTF-8 \u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9(UTF-8)\ndef setup\n  # \u3042\nend\n\n\nRubyRegexp.java \u3067\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u751f\u6210\u3055\u308c\u308b\u4f8b\u5916\nException occured while running sketch a.rb...\nBacktrace:\n    org/jruby/RubyRegexp.java:1680:in `match'\n    org/jruby/RubyString.java:1747:in `match'\n    /usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/base.rb:31:in `load_and_run_sketch'\n    /usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/watch.rb:47:in `start_runner'\n    /usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/watch.rb:35:in `report_errors'\n    /usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/watch.rb:46:in `start_runner'\nreloading sketch...\n\n\n(\u8ffd\u8a18:\u89e3\u6c7a\u3057\u307e\u3057\u305f) \u6700\u65b0\u306e Java SE (JDK 8u51)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u4e0a\u8a18\u306e\u30a8\u30e9\u30fc\u306f\u518d\u73fe\u3057\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\n\nRuby-Processing\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\nruby-processing\u3092\u3082\u3063\u3068\u77e5\u3063\u3066\u66f4\u306a\u308b\u30a4\u30b1\u30e1\u30f3\u306b\u306a\u308d\u3046\n\n\n\u30ad\u30e3\u30f3\u30d0\u30b9\u306b\u56de\u8ee2\u3059\u308b\u4e09\u89d2\u5f62\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb\u304c\u305d\u306e\u4e09\u89d2\u5f62\u306e\u5185\u5074\u306b\u3042\u308b\u3068\u304d\u306e\u307f\u3001\u305d\u306e\u4e09\u89d2\u5f62\u3092\u5857\u308a\u3064\u3076\u3059\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n## \u74b0\u5883\n\n- OS X 10.10.4\n- Ruby-Processing version 2.6.13\n\n\n## \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n```ruby:point-in-triangle.rb\n# 2 \u6b21\u5143\u30d9\u30af\u30c8\u30eb\nclass Vec2\n  attr_reader :x, :y\n\n  def initialize(x, y)\n    @x = x\n    @y = y\n  end\n\n  def subtract(v)\n    Vec2.new(@x - v.x, @y - v.y)\n  end\n\n  def -(v)\n    subtract(v)\n  end\n\n  def rotate!(deg)\n    rad = deg.radians\n    x = @x\n    y = @y\n    @x = x * cos(rad) - y * sin(rad)\n    @y = x * sin(rad) + y * cos(rad)\n  end\nend\n\ndef setup\n  size 400, 400\n\n  $a = Vec2.new 100, 0\n  $a.rotate! 0\n  $b = Vec2.new 100, 0\n  $b.rotate! 120\n  $c = Vec2.new 100, 0\n  $c.rotate! 240\nend\n\ndef draw\n  background 255\n\n  # \u4e09\u89d2\u5f62\u306e 3 \u70b9\u3092\u56de\u8ee2\n  $a.rotate! 1\n  $b.rotate! 1\n  $c.rotate! 1\n\n  pushMatrix()\n  translate(width/2, height/2)\n\n  a, b, c = $a, $b, $c\n  ellipse(a.x, a.y, 10, 10)\n  ellipse(b.x, b.y, 10, 10)\n  ellipse(c.x, c.y, 10, 10)\n\n  p = Vec2.new(mouseX - width/2, mouseY - height/2)\n  ab = b - a\n  bp = p - b\n\n  bc = c - b\n  cp = p - c\n\n  ca = a - c\n  ap = p - a\n\n  c1 = ab.x * bp.y - ab.y * bp.x\n  c2 = bc.x * cp.y - bc.y * cp.x\n  c3 = ca.x * ap.y - ca.y * ap.x\n\n  if (c1 > 0 && c2 > 0 && c3 > 0) || (c1 < 0 && c2 < 0 && c3 < 0)\n    # 3 \u70b9\u306e\u5185\u90e8\u306b\u3042\u308b\n    fill(120, 120, 120)\n  else\n    noFill\n  end\n  triangle(a.x, a.y, b.x, b.y, c.x, c.y)\n\n  popMatrix()\nend\n```\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash:\n$ rp5 --nojruby watch point-in-triangle.rb\n```\n\n## \u7591\u554f:\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u3042\u308b\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u305f\u3089\u3001Java \u306e\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u308b => \u6700\u65b0\u306e Java SE \u3092\u5165\u308c\u305f\u3089\u89e3\u6c7a\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u300c# \u3042\u300d\u3068\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u3068\u3001Java \u306e\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u300c# \u3042\u3042\u300d\u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3060\u3068\u3001\u4f8b\u5916\u306f\u751f\u6210\u3055\u308c\u307e\u305b\u3093\u3002\u7279\u5b9a\u306e\u30b3\u30e1\u30f3\u30c8\u6587\u5b57\u5217\u3060\u3068\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u304b\u3001\u3088\u304f\u5206\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f UTF-8 \u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n```ruby:\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9(UTF-8)\ndef setup\n  # \u3042\nend\n```\n\nRubyRegexp.java \u3067\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```ruby:\u751f\u6210\u3055\u308c\u308b\u4f8b\u5916\nException occured while running sketch a.rb...\nBacktrace:\n\torg/jruby/RubyRegexp.java:1680:in `match'\n\torg/jruby/RubyString.java:1747:in `match'\n\t/usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/base.rb:31:in `load_and_run_sketch'\n\t/usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/watch.rb:47:in `start_runner'\n\t/usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/watch.rb:35:in `report_errors'\n\t/usr/local/lib/ruby/gems/2.2.0/gems/ruby-processing-2.6.13/lib/ruby-processing/runners/watch.rb:46:in `start_runner'\nreloading sketch...\n```\n\n(\u8ffd\u8a18:\u89e3\u6c7a\u3057\u307e\u3057\u305f) \u6700\u65b0\u306e Java SE (JDK 8u51)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u4e0a\u8a18\u306e\u30a8\u30e9\u30fc\u306f\u518d\u73fe\u3057\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n## \u53c2\u8003\n\n- [Ruby-Processing\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5](http://qiita.com/yohm13/items/f3f82f423b507cec1dcc)\n- [ruby-processing\u3092\u3082\u3063\u3068\u77e5\u3063\u3066\u66f4\u306a\u308b\u30a4\u30b1\u30e1\u30f3\u306b\u306a\u308d\u3046](http://hoshi-sano.hatenablog.com/entry/2013/12/09/000154)\n\n"}