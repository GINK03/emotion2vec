{"context": " More than 1 year has passed since last update.\n\n\u524d\u63d0\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u74b0\u5883\nOS\uff1aWindows 8.1\nTeraTerm\uff1a4.82\n\u203bOS\u3084TeraTerm\u306f\u591a\u5c11\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3082\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\n\n\u30b5\u30fc\u30d0\u74b0\u5883\nOS\uff1aCentOS7.1\n\u203bRHEL\u7cfb\u3067\u3042\u308c\u3070\u3001\u591a\u5c11\u53e4\u304f\u3066\u3082\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\n\u5185\u90e8IP:192.168.1.15\nLinux\u306e\u30e6\u30fc\u30b6\u540d\uff1aroot\nLinux\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\uff1apassword\nSSH\u306e\u8a8d\u8a3c\uff1a\u30d1\u30b9\u30ef\u30fc\u30c9\u30d9\u30fc\u30b9\u8a8d\u8a3c\nMySQL\u306e\u30e6\u30fc\u30b6\uff1aroot\nMySQL\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\uff1apassword\nMySQL\u306eDB\u540d\uff1acms\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5bfe\u8c61\u306ePublic(\u516c\u958b) WWW\u306e\u30d1\u30b9\uff1a/var/www/html/cms\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5bfe\u8c61\u306eSecure(\u975e\u516c\u958b) Docs\u306e\u30d1\u30b9\uff1a/var/www/secure_docs\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5148\u306e\u5834\u6240\uff08Files\uff09\uff1a/home/user/backup/files/\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5148\u306e\u5834\u6240\uff08MySQL\uff09\uff1a/home/user/backup/sql/\n\n\u30de\u30af\u30ed\nTARGET_HOST             = \"192.168.1.15\"            ;\nUSERNAME                = \"root\"                ;\nPASSWORD                = \"password\"            ;\nTARGET_KEYWORD          = \"cms\"     ;\n\nROOT                        = \"/var/www/\"                       ;\nHTML_PATH                   = \"html/\"                           ;\nSECURE_PATH                 = \"secure_docs\"                 ;\n\nARCHIVE_EXTENSION           = \".tbz\"                            ;\nSQL_EXTENSION               = \".sql\"                            ;\n\nBACKUP_ARCHIVE_DIRECOTRY    = \"/home/user/backup/files/\"    ;\nBACKUP_SQL_DIRECOTRY        = \"/home/user/backup/sql/\"      ;\n\n\nconnectCom              = \"\" ;\n\ncdTargetHtmlDirCom      = \"cd \" ;\ntarArcHtmlCom           = \"tar cvfj \" ;\nmvArcHtmlCom            = \"mv \" ;\n\ncdTargetSecureDirCom        = \"cd \" ;\ntarArcTrustCom          = \"tar cvfj \" ;\nmvArcTrustCom           = \"mv \" ;\n\ntarArcSecureCom         = \"tar cvfj \" ;\nmvArcSecureCom          = \"mv \" ;\n\ncdSqlBakCom         = \"cd \" ;\ndumpSqlCom          = \"mysqldump -u root -p\" ;\n\ntimeStamp           = \"_\" ;\n\n\ntmpNowDate          = \"\" ;\ntmpNowTime          = \"\" ;\ntmpNowYear          = \"\" ;\ntmpNowMonth         = \"\" ;\ntmpNowDay           = \"\" ;\ntmpNowHour          = \"\" ;\ntmpNowMinute        = \"\" ;\n\n\ngetdate tmpNowDate      ;\ngettime tmpNowTime      ;\n\nstrcopy tmpNowDate 3 2 nowYear      ;\nstrcopy tmpNowDate 6 2 nowMonth ;\nstrcopy tmpNowDate 9 2 nowDay       ;\nstrcopy tmpNowTime 1 2 nowHour      ;\nstrcopy tmpNowTime 4 2 nowMinute    ;\n\n;\nstrconcat timeStamp nowYear     ;\nstrconcat timeStamp nowMonth    ;\nstrconcat timeStamp nowDay      ;\nstrconcat timeStamp \"-\"         ;\nstrconcat timeStamp nowHour     ;\nstrconcat timeStamp nowMinute   ;\n\n\nstrconcat connectCom TARGET_HOST ;\nstrconcat connectCom \" /ssh /2 /auth=password /user=\" ;\nstrconcat connectCom USERNAME ;\nstrconcat connectCom \" /passwd=\" ;\nstrconcat connectCom PASSWORD ;\n\n\nstrconcat cdTargetHtmlDirCom ROOT               ;\nstrconcat cdTargetHtmlDirCom HTML_PATH          ;\n\nstrconcat tarArcHtmlCom TARGET_KEYWORD          ;\nstrconcat tarArcHtmlCom timeStamp               ;\nstrconcat tarArcHtmlCom ARCHIVE_EXTENSION       ;\nstrconcat tarArcHtmlCom \" \"                     ;\nstrconcat tarArcHtmlCom TARGET_KEYWORD          ;\n\nstrconcat mvArcHtmlCom TARGET_KEYWORD           ;\nstrconcat mvArcHtmlCom timeStamp                ;\nstrconcat mvArcHtmlCom ARCHIVE_EXTENSION        ;\nstrconcat mvArcHtmlCom \" \"                      ;\nstrconcat mvArcHtmlCom BACKUP_ARCHIVE_DIRECOTRY ;\n\n\nstrconcat cdTargetSecureDirCom ROOT     ;\n\nstrconcat tarArcSecureCom SECURE_PATH       ;\nstrconcat tarArcSecureCom timeStamp         ;\nstrconcat tarArcSecureCom ARCHIVE_EXTENSION ;\nstrconcat tarArcSecureCom \" \"               ;\nstrconcat tarArcSecureCom SECURE_PATH       ;\n\nstrconcat mvArcSecureCom SECURE_PATH                ;\nstrconcat mvArcSecureCom timeStamp                  ;\nstrconcat mvArcSecureCom ARCHIVE_EXTENSION          ;\nstrconcat mvArcSecureCom \" \"                        ;\nstrconcat mvArcSecureCom BACKUP_ARCHIVE_DIRECOTRY   ;\n\n\nstrconcat cdSqlBakCom BACKUP_SQL_DIRECOTRY  ;\n\nstrconcat dumpSqlCom PASSWORD           ;\nstrconcat dumpSqlCom \" -h \"             ;\nstrconcat dumpSqlCom TARGET_HOST        ;\nstrconcat dumpSqlCom \" \"                ;\nstrconcat dumpSqlCom TARGET_KEYWORD     ;\nstrconcat dumpSqlCom \" > ./\"            ;\nstrconcat dumpSqlCom TARGET_KEYWORD     ;\nstrconcat dumpSqlCom timeStamp          ;\nstrconcat dumpSqlCom SQL_EXTENSION      ;\n\n\nconnect connectCom\n\n; \u30ed\u30b0\u30a4\u30f3\nwait '~]#'\n\n;messagebox cdTargetHtmlDirCom \"Test Mesasge\"\nsendln cdTargetHtmlDirCom\nwait ']#'\n\n;messagebox tarArcHtmlCom \"Test Mesasge\"\nsendln tarArcHtmlCom\nwait ']#'\n\n;messagebox mvArcHtmlCom \"Test Mesasge\"\nsendln mvArcHtmlCom\nwait ']#'\n\n\n;messagebox cdTargetSecureDirCom \"Test Mesasge\"\nsendln cdTargetSecureDirCom\nwait ']#'\n\n;messagebox tarArcSecureCom \"Test Mesasge\"\nsendln tarArcSecureCom\nwait ']#'\n\n;messagebox mvArcSecureCom \"Test Mesasge\"\nsendln mvArcSecureCom\nwait ']#'\n\n\n;messagebox cdSqlBakCom \"Test Mesasge\"\nsendln cdSqlBakCom\nwait ']#'\n\n;messagebox dumpSqlCom \"Test Mesasge\"\nsendln dumpSqlCom\nwait ']#'\n\n\n\u7d50\u679c\n\u30de\u30af\u30ed\u3092\u5b9f\u884c\u3057\u305f\u5e74\u6708\u65e5-\u6642\u5206\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\n\n\u4f8b\n2015\u5e7411\u670829\u65e5 20\u664219\u5206\u306b\u30de\u30af\u30ed\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001\n/home/user/backup/files/public_cms_151129-2019.tbz\n/home/user/backup/files/secure_docs_151129-2019.tbz\n/home/user/backup/sql/cms_151129-2019.sql\n\u3068\u3044\u30463\u3064\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n# \u524d\u63d0\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u74b0\u5883\n\nOS\uff1aWindows 8.1\nTeraTerm\uff1a4.82\n\u203bOS\u3084TeraTerm\u306f\u591a\u5c11\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3082\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\n\n\n## \u30b5\u30fc\u30d0\u74b0\u5883\n\nOS\uff1aCentOS7.1\n\u203bRHEL\u7cfb\u3067\u3042\u308c\u3070\u3001\u591a\u5c11\u53e4\u304f\u3066\u3082\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\n\n\u5185\u90e8IP:192.168.1.15\nLinux\u306e\u30e6\u30fc\u30b6\u540d\uff1aroot\nLinux\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\uff1apassword\nSSH\u306e\u8a8d\u8a3c\uff1a\u30d1\u30b9\u30ef\u30fc\u30c9\u30d9\u30fc\u30b9\u8a8d\u8a3c\n\nMySQL\u306e\u30e6\u30fc\u30b6\uff1aroot\nMySQL\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\uff1apassword\nMySQL\u306eDB\u540d\uff1acms\n\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5bfe\u8c61\u306ePublic(\u516c\u958b) WWW\u306e\u30d1\u30b9\uff1a/var/www/html/cms\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5bfe\u8c61\u306eSecure(\u975e\u516c\u958b) Docs\u306e\u30d1\u30b9\uff1a/var/www/secure_docs\n\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5148\u306e\u5834\u6240\uff08Files\uff09\uff1a/home/user/backup/files/\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u5148\u306e\u5834\u6240\uff08MySQL\uff09\uff1a/home/user/backup/sql/\n\n\n# \u30de\u30af\u30ed\n\n```bash:\nTARGET_HOST\t\t\t\t= \"192.168.1.15\" \t\t\t;\nUSERNAME\t\t\t\t= \"root\"\t\t\t\t;\nPASSWORD\t\t\t\t= \"password\"\t\t\t;\nTARGET_KEYWORD\t\t\t= \"cms\"\t\t;\n\nROOT\t\t\t\t\t\t= \"/var/www/\"\t\t\t\t\t\t;\nHTML_PATH\t\t\t\t\t= \"html/\"\t\t\t\t\t\t\t;\nSECURE_PATH\t\t\t\t\t= \"secure_docs\"\t\t\t\t\t;\n\nARCHIVE_EXTENSION\t\t\t= \".tbz\"\t\t\t\t\t\t\t;\nSQL_EXTENSION\t\t\t\t= \".sql\"\t\t\t\t\t\t\t;\n\nBACKUP_ARCHIVE_DIRECOTRY\t= \"/home/user/backup/files/\"\t;\nBACKUP_SQL_DIRECOTRY\t\t= \"/home/user/backup/sql/\"\t\t;\n\n\nconnectCom\t\t\t\t= \"\" ;\n\ncdTargetHtmlDirCom\t\t= \"cd \" ;\ntarArcHtmlCom\t\t\t= \"tar cvfj \" ;\nmvArcHtmlCom\t\t\t= \"mv \" ;\n\ncdTargetSecureDirCom\t\t= \"cd \" ;\ntarArcTrustCom\t\t\t= \"tar cvfj \" ;\nmvArcTrustCom\t\t\t= \"mv \" ;\n\ntarArcSecureCom\t\t\t= \"tar cvfj \" ;\nmvArcSecureCom\t\t\t= \"mv \" ;\n\ncdSqlBakCom\t\t\t= \"cd \" ;\ndumpSqlCom\t\t\t= \"mysqldump -u root -p\" ;\n\ntimeStamp\t\t\t= \"_\" ;\n\n\ntmpNowDate\t\t\t= \"\" ;\ntmpNowTime\t\t\t= \"\" ;\ntmpNowYear\t\t\t= \"\" ;\ntmpNowMonth\t\t\t= \"\" ;\ntmpNowDay\t\t\t= \"\" ;\ntmpNowHour\t\t\t= \"\" ;\ntmpNowMinute\t\t= \"\" ;\n\n\ngetdate tmpNowDate\t\t;\ngettime tmpNowTime\t\t;\n\nstrcopy tmpNowDate 3 2 nowYear\t\t;\nstrcopy tmpNowDate 6 2 nowMonth\t;\nstrcopy tmpNowDate 9 2 nowDay\t\t;\nstrcopy tmpNowTime 1 2 nowHour\t\t;\nstrcopy tmpNowTime 4 2 nowMinute\t;\n\n;\nstrconcat timeStamp nowYear\t\t;\nstrconcat timeStamp nowMonth\t;\nstrconcat timeStamp nowDay\t\t;\nstrconcat timeStamp \"-\"\t\t\t;\nstrconcat timeStamp nowHour\t\t;\nstrconcat timeStamp nowMinute\t;\n\n\nstrconcat connectCom TARGET_HOST ;\nstrconcat connectCom \" /ssh /2 /auth=password /user=\" ;\nstrconcat connectCom USERNAME ;\nstrconcat connectCom \" /passwd=\" ;\nstrconcat connectCom PASSWORD ;\n\n\nstrconcat cdTargetHtmlDirCom ROOT\t\t\t\t;\nstrconcat cdTargetHtmlDirCom HTML_PATH\t\t\t;\n\nstrconcat tarArcHtmlCom TARGET_KEYWORD\t\t\t;\nstrconcat tarArcHtmlCom timeStamp\t\t\t\t;\nstrconcat tarArcHtmlCom ARCHIVE_EXTENSION\t\t;\nstrconcat tarArcHtmlCom \" \"\t\t\t\t\t\t;\nstrconcat tarArcHtmlCom TARGET_KEYWORD\t\t\t;\n\nstrconcat mvArcHtmlCom TARGET_KEYWORD\t\t\t;\nstrconcat mvArcHtmlCom timeStamp\t\t\t\t;\nstrconcat mvArcHtmlCom ARCHIVE_EXTENSION\t\t;\nstrconcat mvArcHtmlCom \" \"\t\t\t\t\t\t;\nstrconcat mvArcHtmlCom BACKUP_ARCHIVE_DIRECOTRY\t;\n\n\nstrconcat cdTargetSecureDirCom ROOT\t\t;\n\nstrconcat tarArcSecureCom SECURE_PATH\t\t;\nstrconcat tarArcSecureCom timeStamp\t\t\t;\nstrconcat tarArcSecureCom ARCHIVE_EXTENSION\t;\nstrconcat tarArcSecureCom \" \"\t\t\t\t;\nstrconcat tarArcSecureCom SECURE_PATH\t\t;\n\nstrconcat mvArcSecureCom SECURE_PATH\t\t\t\t;\nstrconcat mvArcSecureCom timeStamp\t\t\t\t\t;\nstrconcat mvArcSecureCom ARCHIVE_EXTENSION\t\t\t;\nstrconcat mvArcSecureCom \" \"\t\t\t\t\t\t;\nstrconcat mvArcSecureCom BACKUP_ARCHIVE_DIRECOTRY\t;\n\n\nstrconcat cdSqlBakCom BACKUP_SQL_DIRECOTRY\t;\n\nstrconcat dumpSqlCom PASSWORD\t\t\t;\nstrconcat dumpSqlCom \" -h \"\t\t\t\t;\nstrconcat dumpSqlCom TARGET_HOST\t\t;\nstrconcat dumpSqlCom \" \"\t\t\t\t;\nstrconcat dumpSqlCom TARGET_KEYWORD\t\t;\nstrconcat dumpSqlCom \" > ./\"\t\t\t;\nstrconcat dumpSqlCom TARGET_KEYWORD\t\t;\nstrconcat dumpSqlCom timeStamp\t\t\t;\nstrconcat dumpSqlCom SQL_EXTENSION\t\t;\n\n\nconnect connectCom\n\n; \u30ed\u30b0\u30a4\u30f3\nwait '~]#'\n\n;messagebox cdTargetHtmlDirCom \"Test Mesasge\"\nsendln cdTargetHtmlDirCom\nwait ']#'\n\n;messagebox tarArcHtmlCom \"Test Mesasge\"\nsendln tarArcHtmlCom\nwait ']#'\n\n;messagebox mvArcHtmlCom \"Test Mesasge\"\nsendln mvArcHtmlCom\nwait ']#'\n\n\n;messagebox cdTargetSecureDirCom \"Test Mesasge\"\nsendln cdTargetSecureDirCom\nwait ']#'\n\n;messagebox tarArcSecureCom \"Test Mesasge\"\nsendln tarArcSecureCom\nwait ']#'\n\n;messagebox mvArcSecureCom \"Test Mesasge\"\nsendln mvArcSecureCom\nwait ']#'\n\n\n;messagebox cdSqlBakCom \"Test Mesasge\"\nsendln cdSqlBakCom\nwait ']#'\n\n;messagebox dumpSqlCom \"Test Mesasge\"\nsendln dumpSqlCom\nwait ']#'\n```\n\n## \u7d50\u679c\n\n\u30de\u30af\u30ed\u3092\u5b9f\u884c\u3057\u305f\u5e74\u6708\u65e5-\u6642\u5206\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\n\n### \u4f8b\n2015\u5e7411\u670829\u65e5 20\u664219\u5206\u306b\u30de\u30af\u30ed\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001\n/home/user/backup/files/public_cms_151129-2019.tbz\n/home/user/backup/files/secure_docs_151129-2019.tbz\n/home/user/backup/sql/cms_151129-2019.sql\n\u3068\u3044\u30463\u3064\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n\n\n", "tags": ["Bash", "SSH", "teraterm4.82", "MySQL5.6", "CentOS7.1"]}