{"tags": ["Rails", "Ajax", "Ruby"], "context": " More than 1 year has passed since last update.\n\n\u30c6\u30fc\u30d6\u30eb\u69cb\u6210\n\nproducts\ncomments\n\n\nProducts\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n\nproducts_controller.rb\ndef show\n  @product = Product.find(params[:id])\n  @comment = Comment.new\n  @comments = @product.comments\nend\n\n\n\n\u6295\u7a3f\u30da\u30fc\u30b8\n\nshow.html.haml\n/ \u30b3\u30e1\u30f3\u30c8\u4e00\u89a7\n%h2 Comments\n%ul#comments\n  = render :partial => \"prototypes/comments/comment\", :collection => @comments\n\n/ \u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\n%h2 Write a comment\n= form_for @comment, url: prototype_comments_path(@prototype), remote: true do |f|\n  = f.text_field :text, placeholder: 'write comment', class: 'form-control'\n  = f.submit 'COMMENT'\n\n\n\n\u90e8\u5206\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\n_comment.html.erb\n<li><%= comment.text %></li>\n\n\n\nComments\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n\ncomments_controller.rb\ndef create\n  prototype = Prototype.find(params[:prototype_id])\n  @comment = prototype.comments.create(create_params)\nend\n\n\n\u4e0a\u8a18\u3001comments\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u5b9f\u884c\u5f8c\u306b\u3001views > product > comments\u914d\u4e0b\u306e\u540c\u30a2\u30af\u30b7\u30e7\u30f3\u306ejs\uff08create.js\uff09\u3092\n\u5b9f\u884c\u3059\u308b\u3002\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u5185\u306e\u5909\u6570\u3092\u5f15\u304d\u7d99\u3050\u3053\u3068\u304c\u53ef\u80fd\u3002\n\ncreate.js\nviews > product > comments > create.js.erb\n$(\"<%= escape_javascript(render @comment) %>\").appendTo(\"#comments\");\n\n## \u30c6\u30fc\u30d6\u30eb\u69cb\u6210\n* products\n* comments\n\n\n## Products\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n```ruby:products_controller.rb\ndef show\n  @product = Product.find(params[:id])\n  @comment = Comment.new\n  @comments = @product.comments\nend\n```\n\n## \u6295\u7a3f\u30da\u30fc\u30b8\n```haml:show.html.haml\n/ \u30b3\u30e1\u30f3\u30c8\u4e00\u89a7\n%h2 Comments\n%ul#comments\n  = render :partial => \"prototypes/comments/comment\", :collection => @comments\n\n/ \u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\n%h2 Write a comment\n= form_for @comment, url: prototype_comments_path(@prototype), remote: true do |f|\n  = f.text_field :text, placeholder: 'write comment', class: 'form-control'\n  = f.submit 'COMMENT'\n```\n\n## \u90e8\u5206\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\n```ruby:_comment.html.erb\n<li><%= comment.text %></li>\n```\n\n## Comments\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n```ruby:comments_controller.rb\t\ndef create\n  prototype = Prototype.find(params[:prototype_id])\n  @comment = prototype.comments.create(create_params)\nend\n```\n\n\u4e0a\u8a18\u3001comments\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u5b9f\u884c\u5f8c\u306b\u3001views > product > comments\u914d\u4e0b\u306e\u540c\u30a2\u30af\u30b7\u30e7\u30f3\u306ejs\uff08create.js\uff09\u3092\n\u5b9f\u884c\u3059\u308b\u3002\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u5185\u306e\u5909\u6570\u3092\u5f15\u304d\u7d99\u3050\u3053\u3068\u304c\u53ef\u80fd\u3002\n\n## create.js\nviews > product > comments > create.js.erb\n\n```js:\n$(\"<%= escape_javascript(render @comment) %>\").appendTo(\"#comments\");\n```\n\n\n\n"}