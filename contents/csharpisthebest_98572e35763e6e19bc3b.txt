{"context": "\n\n\u578b\u4ed8\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\n.Net Framework\u3067\u306fDataSet\u3092\u30c7\u30b6\u30a4\u30ca\u304b\u3089\u751f\u6210\u3059\u308b\u3068\u3001\u56fa\u6709\u306e\u578b\u3092\u6301\u3063\u305f\u578b\u4ed8DataSet\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u305f\u3060\u3001Null\u8a31\u5bb9\u578b\u306e\u5217\u306b\u3064\u3044\u3066\u306f\u3001null\u3092\u5024\u3068\u3057\u3066\u8fd4\u3059\u3053\u3068\u306f\u3067\u304d\u305a\u3001Null\u30c1\u30a7\u30c3\u30af\u304c\u5fc5\u9808\u306b\u306a\u308b\u3002\n(.Net 3.5\u304b\u3089\u306fDataRow.Field<>\u30e1\u30bd\u30c3\u30c9\u3067\u5bfe\u5fdc\u53ef\u80fd\uff09\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u578b\u4ed8\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u8a2d\u5b9a\u3057\u305f\nID(int,\u5fc5\u9808),\nName(string,Null\u8a31\u5bb9),\nAddress(string,Null\u8a31\u5bb9),\n\u5e74\u9f62(int,Null\u8a31\u5bb9)\u3092\n\u753b\u9762\u9805\u76ee\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u8003\u3048\u308b\u3002\n\n            var ds = new SampleDataSet();\n            var row = ds.Table[0];\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.ADDRESS = null;\n            row.SetAGENull();\n\n            labelID.Text = row.ID.ToString();\n            if (row.IsNAMENull())\n            {\n                labelName.Text = string.Empty;\n            }\n            else\n            {\n                labelName.Text = row.NAME;\n            }\n\n            if (row.IsADDRESSNull())\n            {\n                labelAddress.Text = string.Empty;\n            }\n            else\n            {\n                labelAddress.Text = row.ADDRESS;\n            }\n\n            if (row.IsAGENull())\n            {\n                labelAge.Text = string.Empty;\n            }\n            else\n            {\n                labelAge.Text = row.AGE.ToString();\n            }\n\n\n\n\u7c21\u6f54\u306b\u66f8\u304d\u305f\u3044\u3002\n\u3053\u306e\u7a0b\u5ea6\u3067\u3042\u308c\u3070Null\u30c1\u30a7\u30c3\u30af\u305b\u305a\u306b\u4ee3\u5165\u3057\u305f\u304f\u306a\u308b\u304c\u3001Null\u30c1\u30a7\u30c3\u30af\u3057\u306a\u3044\u3068\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\u3002\n\n            var ds = new SampleDataSet();\n            var row = (SampleDataSet.TableRow)ds.Table.NewRow();\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.ADDRESS = null;\n            row.SetAGENull();\n            ds.Table.Rows.Add(row);\n\n            labelID.Text = row.ID.ToString();\n            labelName.Text = row.NAME;\n            // \u3053\u3053\u3067DBNull\u30a8\u30e9\u30fc\n            labelAddress.Text = row.ADDRESS;\n            labelAge.Text = row.AGE.ToString();\n\n\n\nNull\u8a31\u5bb9\u578b\u306b\u3059\u308b\u3002\nDataSet\u306fObject\u578b\u306b\u5143\u306e\u5024\u3092\u683c\u7d0d\u3057\u3066\u3044\u308b\u304c\u3001null\u306fDBNull\u3092\u4f7f\u7528\u3059\u308b\u70b9\u3092\u8003\u616e\u3059\u308c\u3070\u3001\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u3067Nullable\u306b\u3059\u308b\u3053\u3068\u306f\u7c21\u5358\u306b\u3067\u304d\u308b\u3002  \n\n\n// \u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\npublic static class DataSetExtension\n{\npublic static T? GetValue<T>(this DataRow row, DataColumn column) where T : struct\n{\n    var value = row[column];\n    if (Convert.IsDBNull(value))\n    {\n        return null;\n    }\n    else\n    {\n        return (T)value;\n    }\n}\n\npublic static string GetValueString(this DataRow row, DataColumn column)\n{\n    var value = row[column];\n    if (Convert.IsDBNull(value))\n    {\n        return null;\n    }\n    else\n    {\n        return (string)value;\n    }\n}\n\npublic static void SetValue(this DataRow row, DataColumn column, object value)\n{\n    if (value == null)\n    {\n        row[column] = DBNull.Value;\n    }\n    else\n    {\n        row[column] = value;\n    }\n}\n}\n\n\n\n\u6700\u7d42\u7684\u306a\u30b3\u30fc\u30c9\n\u4f5c\u6210\u3057\u305fGet\u30e1\u30bd\u30c3\u30c9\u3068Set\u30e1\u30bd\u30c3\u30c9\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\u3057\u305f\u3002\n\n\n\n\n\n            var ds = new SampleDataSet();\n            var row = (SampleDataSet.TableRow)ds.Table.NewRow();\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.SetValue(ds.Table.ADDRESSColumn, null);\n            row.SetValue(ds.Table.AGEColumn, null);\n            ds.Table.Rows.Add(row);\n\n            labelID.Text = row.ID.ToString();\n            labelName.Text = row.NAME;\n            // null\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n            labelAddress.Text = row.GetValueString(ds.Table.ADDRESSColumn);\n            // \u7a7a\u6587\u5b57\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3002Nullable\u578b\u306fnull\u3067ToString\u3057\u3066\u3082\u3001NullReferenceException\u306f\u767a\u751f\u3057\u306a\u3044\u3002\n            labelAge.Text = row.GetValue<int>(ds.Table.AGEColumn).ToString();\n\n\n.Net 3.5\u4ee5\u964d\nDataRow.Field, DataRow.SetField\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3060\u3051\u3067\u3088\u3044\u3002\n\n            var ds = new SampleDataSet();\n            var row = (SampleDataSet.TableRow)ds.Table.NewRow();\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.SetField<string>(ds.Table.ADDRESSColumn, null);\n            row.SetField<int?>(ds.Table.AGEColumn, null);\n            ds.Table.Rows.Add(row);\n\n            labelID.Text = row.ID.ToString();\n            labelName.Text = row.NAME;\n            labelAddress.Text = row.Field<string>(ds.Table.ADDRESSColumn);\n            labelAge.Text = row.Field<int?>(ds.Table.AGEColumn).ToString();\n\n\u76ee\u6b21\n#\u578b\u4ed8\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\n.Net Framework\u3067\u306fDataSet\u3092\u30c7\u30b6\u30a4\u30ca\u304b\u3089\u751f\u6210\u3059\u308b\u3068\u3001\u56fa\u6709\u306e\u578b\u3092\u6301\u3063\u305f\u578b\u4ed8DataSet\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u305f\u3060\u3001Null\u8a31\u5bb9\u578b\u306e\u5217\u306b\u3064\u3044\u3066\u306f\u3001null\u3092\u5024\u3068\u3057\u3066\u8fd4\u3059\u3053\u3068\u306f\u3067\u304d\u305a\u3001Null\u30c1\u30a7\u30c3\u30af\u304c\u5fc5\u9808\u306b\u306a\u308b\u3002\n(.Net 3.5\u304b\u3089\u306fDataRow.Field<>\u30e1\u30bd\u30c3\u30c9\u3067\u5bfe\u5fdc\u53ef\u80fd\uff09\u3002\n\n* \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9  \n\u578b\u4ed8\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u8a2d\u5b9a\u3057\u305f  \nID(int,\u5fc5\u9808),  \nName(string,Null\u8a31\u5bb9),  \nAddress(string,Null\u8a31\u5bb9),  \n\u5e74\u9f62(int,Null\u8a31\u5bb9)\u3092  \n\u753b\u9762\u9805\u76ee\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u8003\u3048\u308b\u3002\n\n```csharp\n            var ds = new SampleDataSet();\n            var row = ds.Table[0];\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.ADDRESS = null;\n            row.SetAGENull();\n\n            labelID.Text = row.ID.ToString();\n            if (row.IsNAMENull())\n            {\n                labelName.Text = string.Empty;\n            }\n            else\n            {\n                labelName.Text = row.NAME;\n            }\n\n            if (row.IsADDRESSNull())\n            {\n                labelAddress.Text = string.Empty;\n            }\n            else\n            {\n                labelAddress.Text = row.ADDRESS;\n            }\n\n            if (row.IsAGENull())\n            {\n                labelAge.Text = string.Empty;\n            }\n            else\n            {\n                labelAge.Text = row.AGE.ToString();\n            }\n\n```\n\n* \u7c21\u6f54\u306b\u66f8\u304d\u305f\u3044\u3002  \n\u3053\u306e\u7a0b\u5ea6\u3067\u3042\u308c\u3070Null\u30c1\u30a7\u30c3\u30af\u305b\u305a\u306b\u4ee3\u5165\u3057\u305f\u304f\u306a\u308b\u304c\u3001Null\u30c1\u30a7\u30c3\u30af\u3057\u306a\u3044\u3068\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\u3002\n \n```csharp\n            var ds = new SampleDataSet();\n            var row = (SampleDataSet.TableRow)ds.Table.NewRow();\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.ADDRESS = null;\n            row.SetAGENull();\n            ds.Table.Rows.Add(row);\n\n            labelID.Text = row.ID.ToString();\n            labelName.Text = row.NAME;\n            // \u3053\u3053\u3067DBNull\u30a8\u30e9\u30fc\n            labelAddress.Text = row.ADDRESS;\n            labelAge.Text = row.AGE.ToString();\n```\n\n* Null\u8a31\u5bb9\u578b\u306b\u3059\u308b\u3002\n  DataSet\u306fObject\u578b\u306b\u5143\u306e\u5024\u3092\u683c\u7d0d\u3057\u3066\u3044\u308b\u304c\u3001null\u306fDBNull\u3092\u4f7f\u7528\u3059\u308b\u70b9\u3092\u8003\u616e\u3059\u308c\u3070\u3001\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u3067Nullable\u306b\u3059\u308b\u3053\u3068\u306f\u7c21\u5358\u306b\u3067\u304d\u308b\u3002  \n * ```csharp\n// \u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\npublic static class DataSetExtension\n    {\n        public static T? GetValue<T>(this DataRow row, DataColumn column) where T : struct\n        {\n            var value = row[column];\n            if (Convert.IsDBNull(value))\n            {\n                return null;\n            }\n            else\n            {\n                return (T)value;\n            }\n        }\n\n        public static string GetValueString(this DataRow row, DataColumn column)\n        {\n            var value = row[column];\n            if (Convert.IsDBNull(value))\n            {\n                return null;\n            }\n            else\n            {\n                return (string)value;\n            }\n        }\n\n        public static void SetValue(this DataRow row, DataColumn column, object value)\n        {\n            if (value == null)\n            {\n                row[column] = DBNull.Value;\n            }\n            else\n            {\n                row[column] = value;\n            }\n        }\n    }\n\n         ```  \n\n  * \u6700\u7d42\u7684\u306a\u30b3\u30fc\u30c9  \n \u4f5c\u6210\u3057\u305fGet\u30e1\u30bd\u30c3\u30c9\u3068Set\u30e1\u30bd\u30c3\u30c9\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\u3057\u305f\u3002\n\n```csharp\n            var ds = new SampleDataSet();\n            var row = (SampleDataSet.TableRow)ds.Table.NewRow();\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.SetValue(ds.Table.ADDRESSColumn, null);\n            row.SetValue(ds.Table.AGEColumn, null);\n            ds.Table.Rows.Add(row);\n\n            labelID.Text = row.ID.ToString();\n            labelName.Text = row.NAME;\n            // null\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n            labelAddress.Text = row.GetValueString(ds.Table.ADDRESSColumn);\n            // \u7a7a\u6587\u5b57\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3002Nullable\u578b\u306fnull\u3067ToString\u3057\u3066\u3082\u3001NullReferenceException\u306f\u767a\u751f\u3057\u306a\u3044\u3002\n            labelAge.Text = row.GetValue<int>(ds.Table.AGEColumn).ToString();\n```\n * .Net 3.5\u4ee5\u964d  \n   DataRow.Field, DataRow.SetField\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3060\u3051\u3067\u3088\u3044\u3002\n\n```csharp\n            var ds = new SampleDataSet();\n            var row = (SampleDataSet.TableRow)ds.Table.NewRow();\n            row.ID = 1;\n            row.NAME = \"\u540d\u524d\";\n            row.SetField<string>(ds.Table.ADDRESSColumn, null);\n            row.SetField<int?>(ds.Table.AGEColumn, null);\n            ds.Table.Rows.Add(row);\n\n            labelID.Text = row.ID.ToString();\n            labelName.Text = row.NAME;\n            labelAddress.Text = row.Field<string>(ds.Table.ADDRESSColumn);\n            labelAge.Text = row.Field<int?>(ds.Table.AGEColumn).ToString();\n```\n\n\n[\u76ee\u6b21](http://qiita.com/csharpisthebest/items/57f27a33085f01211166)\n", "tags": [".NET", "NULL", "Dataset"]}