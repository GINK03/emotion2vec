{"context": "apex\u304c\u4fbf\u5229\u3059\u304e\u308b\u306e\u3067Go\u3067\u66f8\u3044\u3066apex\u3067Lambda\u3078\u30c7\u30d7\u30ed\u30a4\u3057\u3066\n\u9069\u5f53\u306b\u3084\u3089\u305b\u308b\u306e\u306b\u30cf\u30de\u3063\u3066\u3044\u308b\u3002S3\u306b\u4e0a\u304c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u4f55\u304b\u3084\u308b\u305f\u3081\u306e\n\u4e0b\u6e96\u5099\u3068\u3057\u3066\u3053\u3093\u306a\u611f\u3058\u306e\u5024\u304c\u53d6\u308c\u308b\u306e\u3067\u3001aws-sdk-go\u306es3.GetObjectInput\u3092\u5229\u7528\u3057\u3066\n\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3060\u308a\u3059\u308b\npackage main\n\nimport (\n    \"encoding/json\"\n    \"log\"\n\n    \"github.com/apex/go-apex\"\n)\n\nfunc main() {\n\n    apex.HandleFunc(func(event json.RawMessage, ctx *apex.Context) (interface{}, error) {\n        data, err := event.MarshalJSON()\n        if err != nil {\n            log.Fatal(err)\n        }\n        log.Println(string(data))\n\n        return nil, nil\n    })\n}\n\n// 2016/08/03 07:08:26\n// {\n//     \"Records\": [\n//         {\n//             \"eventVersion\": \"2.0\",\n//             \"eventSource\": \"aws:s3\",\n//             \"awsRegion\": \"ap-northeast-1\",\n//             \"eventTime\": \"2016-08-03T07:08:25.726Z\",\n//             \"eventName\": \"ObjectCreated:Put\",\n//             \"userIdentity\": {\n//                 \"principalId\": \"AWS:XXXXXXXXXXXXXXXXXXXXX\"\n//             },\n//             \"requestParameters\": {\n//                 \"sourceIPAddress\": \"192.0.2.1\"\n//             },\n//             \"responseElements\": {\n//                 \"x-amz-request-id\": \"XXXXXXXXXXXXXXXX\",\n//                 \"x-amz-id-2\": \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n//             },\n//             \"s3\": {\n//                 \"s3SchemaVersion\": \"1.0\",\n//                 \"configurationId\": \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\",\n//                 \"bucket\": {\n//                     \"name\": \"BUCKET_NAME\",\n//                     \"ownerIdentity\": {\n//                         \"principalId\": \"XXXXXXXXXXXXXX\"\n//                         \"principalId\": \"A2XB359WQOLGWM\"\n//                     },\n//                     \"arn\": \"arn:aws:s3:::BUCKET_NAME\"\n//                 },\n//                 \"object\": {\n//                     \"key\": \"FILE_NAME\",\n//                     \"size\": SIZE,\n//                     \"eTag\": \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\",\n//                     \"eTag\": \"e3ab69a36d84838ad2824fe34033368b\",\n//                     \"sequencer\": \"XXXXXXXXXXXXXXXXXX\"\n//                 }\n//             }\n//         }\n//     ]\n// }\n\n[apex](http://apex.run)\u304c\u4fbf\u5229\u3059\u304e\u308b\u306e\u3067Go\u3067\u66f8\u3044\u3066apex\u3067Lambda\u3078\u30c7\u30d7\u30ed\u30a4\u3057\u3066\n\u9069\u5f53\u306b\u3084\u3089\u305b\u308b\u306e\u306b\u30cf\u30de\u3063\u3066\u3044\u308b\u3002S3\u306b\u4e0a\u304c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u4f55\u304b\u3084\u308b\u305f\u3081\u306e\n\u4e0b\u6e96\u5099\u3068\u3057\u3066\u3053\u3093\u306a\u611f\u3058\u306e\u5024\u304c\u53d6\u308c\u308b\u306e\u3067\u3001`aws-sdk-go`\u306e`s3.GetObjectInput`\u3092\u5229\u7528\u3057\u3066\n\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3060\u308a\u3059\u308b\n\n```go\npackage main\n\nimport (\n\t\"encoding/json\"\n\t\"log\"\n\n\t\"github.com/apex/go-apex\"\n)\n\nfunc main() {\n\n\tapex.HandleFunc(func(event json.RawMessage, ctx *apex.Context) (interface{}, error) {\n\t\tdata, err := event.MarshalJSON()\n\t\tif err != nil {\n\t\t\tlog.Fatal(err)\n\t\t}\n\t\tlog.Println(string(data))\n\n\t\treturn nil, nil\n\t})\n}\n\n// 2016/08/03 07:08:26\n// {\n//     \"Records\": [\n//         {\n//             \"eventVersion\": \"2.0\",\n//             \"eventSource\": \"aws:s3\",\n//             \"awsRegion\": \"ap-northeast-1\",\n//             \"eventTime\": \"2016-08-03T07:08:25.726Z\",\n//             \"eventName\": \"ObjectCreated:Put\",\n//             \"userIdentity\": {\n//                 \"principalId\": \"AWS:XXXXXXXXXXXXXXXXXXXXX\"\n//             },\n//             \"requestParameters\": {\n//                 \"sourceIPAddress\": \"192.0.2.1\"\n//             },\n//             \"responseElements\": {\n//                 \"x-amz-request-id\": \"XXXXXXXXXXXXXXXX\",\n//                 \"x-amz-id-2\": \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n//             },\n//             \"s3\": {\n//                 \"s3SchemaVersion\": \"1.0\",\n//                 \"configurationId\": \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\",\n//                 \"bucket\": {\n//                     \"name\": \"BUCKET_NAME\",\n//                     \"ownerIdentity\": {\n//                         \"principalId\": \"XXXXXXXXXXXXXX\"\n//                         \"principalId\": \"A2XB359WQOLGWM\"\n//                     },\n//                     \"arn\": \"arn:aws:s3:::BUCKET_NAME\"\n//                 },\n//                 \"object\": {\n//                     \"key\": \"FILE_NAME\",\n//                     \"size\": SIZE,\n//                     \"eTag\": \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\",\n//                     \"eTag\": \"e3ab69a36d84838ad2824fe34033368b\",\n//                     \"sequencer\": \"XXXXXXXXXXXXXXXXXX\"\n//                 }\n//             }\n//         }\n//     ]\n// }\n```\n", "tags": ["AWS", "lambda", "Apex", "S3"]}