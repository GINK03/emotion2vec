{"tags": ["JavaScript", "Backbone.js1.0.0", "RequireJS"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u306e\n\nbackbone\u306emodelA\u306b\u3042\u308bdefaults\u3092\u3001\u305d\u308c\u3092\u7d99\u627f\u3057\u305fmodelB\u3068modelC\u304b\u3089\u4f7f\u3044\u305f\u3044\u3002\n\n\n\u8907\u6570\u306eModel\u304b\u3089\u6271\u308f\u308c\u308b\u305f\u3081\u3001modelA\u306eattribute\u306fsingleton\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u203b backbonejs\u3068requirejs\u3092\u4f7f\u3063\u3066\u3044\u308b\u524d\u63d0\u3067\u3059\n\n\n\n\n\u6700\u521d\u306b\u66f8\u3044\u3066\u305f\n\nModelA\ndefine(\n  [\"jquery\", \"underscore\", \"backbone\"],\n  function($, _, Backbone) {\n    var ModelA = Backbone.Model.extend({\n      defaults: {\n        \"type\": \"none\"\n      }\n    });\n    return ModelA;\n  }\n);\n\n\n\u6700\u521d\u306fModelA\u3092\u7d20\u76f4\u306b\u3053\u3046\u66f8\u3044\u3066\u305f\u3002\u3053\u308c\u3092ModelB\u3068ModelC\u3067\u7d99\u627f\u3057\u3066\u3001set\u3084get\u3092\u3059\u308b\u8a2d\u8a08\u306b\u3057\u3066\u3044\u305f\u3002\n\u3068\u3053\u308d\u304c\u3001ModelA\u306e\u8981\u7d20\u304csingleton\u3067\u306a\u3044\u306e\u3067\uff12\u3064\u306e\u5b50Model\u3067\u5225\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u3044\u3058\u3063\u3066\u3057\u307e\u3046\u3002\n\n\u8a66\u3057\u305f\n\nModelA\ndefine(\n  [\"jquery\", \"underscore\", \"backbone\"],\n  function($, _, Backbone) {\n    return new (Backbone.Model.extend({\n      defaults: {\n        \"type\": \"none\"\n      }\n    }));\n  }\n);\n\n\n\u3053\u308c\u3067singleton\u306b\u3057\u305f\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306f\u3067\u304d\u306a\u3044\u3002\nvar ModelB = ModelA.extend({});\nvar ModelC = ModelA.extend({});\n\n\u7d50\u5c40\u3053\u3046\u3057\u305f\n\nModelA\ndefine(\n  [\"jquery\", \"underscore\", \"backbone\"],\n  function($, _, Backbone) {\n  var instance = false;\n\n    var ModelA = function() {\n      var obj = Backbone.Model.extend({\n        defaults: {\n          \"type\": \"none\"\n        }\n      });\n\n      return {\n        getObj: function() {\n          return obj;\n        },\n        getInstance: function() {\n          if (! instance) {\n            instance = new obj();\n          }\n          return instance;\n        }\n      }\n    }\n\n    return ModelA;\n);\n\n\n\u3053\u308c\u3060\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5f62\u3067\u7d99\u627f\u3067\u304d\u308b\nvar ModelB = ModelA.getObj().extend({});\nvar ModelC = ModelA.getObj().extend({});\n\u307e\u305f\u3001singleton\u306b\u3057\u305f\u8981\u7d20\u3092\u6271\u3046\u3068\u304d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3067\u304d\u308b\nModelA.getInstance().set(\"type\", \"hoge\");\n\u307e\u3068\u3081\u308b\u3068\u5b50\u30e2\u30c7\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\n\nModelB\ndefine(\n  [\"app/modelA\"],\n  function(ModelA) {\n    var Model_B = ModelA.getObj().extend({\n      initialize: function() {\n        this.parent = ModelA.getInstance();\n      },\n      doSomething: function() {\n        this.parent.set(\"type\", \"hoge\");\n        console.log(this.parent.get(\"type\")); // hoge\n      }\n    });\n\n    return ModelB;\n  }\n);\n\n\n\u3053\u308c\u3067\u4e00\u5fdc\u5f53\u521d\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\u306f\u3067\u304d\u305f\u3051\u3069\u3001getObj\u3068\u304bgetInstance\u3068\u304b\u9650\u308a\u306a\u304f\u30c0\u30b5\u3044\u3002\n\u305d\u308c\u306b\u3001\u306a\u3093\u3068\u306a\u304f\u30d0\u30c3\u30c9\u30ce\u30a6\u30cf\u30a6\u306e\u3088\u3046\u306a\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u3046\u307e\u3044\u3084\u308a\u65b9\u304c\u3042\u308c\u3070\u305c\u3072\u6559\u3048\u3066\u307b\u3057\u3044\u3002\n# \u3084\u308a\u305f\u304b\u3063\u305f\u306e\n- backbone\u306e```modelA```\u306b\u3042\u308b```defaults```\u3092\u3001\u305d\u308c\u3092\u7d99\u627f\u3057\u305f```modelB```\u3068```modelC```\u304b\u3089\u4f7f\u3044\u305f\u3044\u3002\n - \u8907\u6570\u306eModel\u304b\u3089\u6271\u308f\u308c\u308b\u305f\u3081\u3001```modelA```\u306eattribute\u306fsingleton\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n - \u203b backbonejs\u3068requirejs\u3092\u4f7f\u3063\u3066\u3044\u308b\u524d\u63d0\u3067\u3059\n\n# \u6700\u521d\u306b\u66f8\u3044\u3066\u305f\n\n```js:ModelA\ndefine(\n  [\"jquery\", \"underscore\", \"backbone\"],\n  function($, _, Backbone) {\n    var ModelA = Backbone.Model.extend({\n      defaults: {\n        \"type\": \"none\"\n      }\n    });\n    return ModelA;\n  }\n);\n```\n\u6700\u521d\u306f```ModelA```\u3092\u7d20\u76f4\u306b\u3053\u3046\u66f8\u3044\u3066\u305f\u3002\u3053\u308c\u3092```ModelB```\u3068```ModelC```\u3067\u7d99\u627f\u3057\u3066\u3001```set```\u3084```get```\u3092\u3059\u308b\u8a2d\u8a08\u306b\u3057\u3066\u3044\u305f\u3002\n\u3068\u3053\u308d\u304c\u3001```ModelA```\u306e\u8981\u7d20\u304csingleton\u3067\u306a\u3044\u306e\u3067\uff12\u3064\u306e\u5b50Model\u3067\u5225\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u3044\u3058\u3063\u3066\u3057\u307e\u3046\u3002\n\n# \u8a66\u3057\u305f\n\n```js:ModelA\ndefine(\n  [\"jquery\", \"underscore\", \"backbone\"],\n  function($, _, Backbone) {\n    return new (Backbone.Model.extend({\n      defaults: {\n        \"type\": \"none\"\n      }\n    }));\n  }\n);\n```\n\u3053\u308c\u3067singleton\u306b\u3057\u305f\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306f\u3067\u304d\u306a\u3044\u3002\n```var ModelB = ModelA.extend({});```\n```var ModelC = ModelA.extend({});```\n\n\n# \u7d50\u5c40\u3053\u3046\u3057\u305f\n```js:ModelA\ndefine(\n  [\"jquery\", \"underscore\", \"backbone\"],\n  function($, _, Backbone) {\n  var instance = false;\n\n    var ModelA = function() {\n      var obj = Backbone.Model.extend({\n        defaults: {\n          \"type\": \"none\"\n        }\n      });\n\n      return {\n        getObj: function() {\n          return obj;\n        },\n        getInstance: function() {\n          if (! instance) {\n            instance = new obj();\n          }\n          return instance;\n        }\n      }\n    }\n\n    return ModelA;\n);\n```\n\u3053\u308c\u3060\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5f62\u3067\u7d99\u627f\u3067\u304d\u308b\n```var ModelB = ModelA.getObj().extend({});```\n```var ModelC = ModelA.getObj().extend({});```\n\u307e\u305f\u3001singleton\u306b\u3057\u305f\u8981\u7d20\u3092\u6271\u3046\u3068\u304d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3067\u304d\u308b\n```ModelA.getInstance().set(\"type\", \"hoge\");```\n\n\u307e\u3068\u3081\u308b\u3068\u5b50\u30e2\u30c7\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\n\n```js:ModelB\ndefine(\n  [\"app/modelA\"],\n  function(ModelA) {\n    var Model_B = ModelA.getObj().extend({\n      initialize: function() {\n        this.parent = ModelA.getInstance();\n      },\n      doSomething: function() {\n        this.parent.set(\"type\", \"hoge\");\n        console.log(this.parent.get(\"type\")); // hoge\n      }\n    });\n\n    return ModelB;\n  }\n);\n```\n\n\u3053\u308c\u3067\u4e00\u5fdc\u5f53\u521d\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\u306f\u3067\u304d\u305f\u3051\u3069\u3001```getObj```\u3068\u304b```getInstance```\u3068\u304b\u9650\u308a\u306a\u304f\u30c0\u30b5\u3044\u3002\n\u305d\u308c\u306b\u3001\u306a\u3093\u3068\u306a\u304f\u30d0\u30c3\u30c9\u30ce\u30a6\u30cf\u30a6\u306e\u3088\u3046\u306a\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u3046\u307e\u3044\u3084\u308a\u65b9\u304c\u3042\u308c\u3070\u305c\u3072\u6559\u3048\u3066\u307b\u3057\u3044\u3002\n\n"}