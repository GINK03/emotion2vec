{"context": " More than 1 year has passed since last update.\n\n\u4f7f\u7528\u3059\u308bJson\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\n\nLitJSON\n\n\u3069\u3093\u306a\u3082\u306e\u304b\uff1f\n\n\n\"LitJSON\"\u306f\u3001JSON\u8aad\u307f\u66f8\u304d\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3001\u30e9\u30a4\u30bb\u30f3\u30b9\u306fPublicDomain\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30a8\u30f3\u30b3\u30fc\u30c9\u30fb\u30c7\u30b3\u30fc\u30c9\u306a\u3069\u306e\u5fc5\u8981\u306a\u6a5f\u80fd\u306b\u52a0\u3048\u3066\u3001Exception\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u308a\u3001\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u30fb\u30c7\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u304c\u3067\u304d\u308b\u306e\u3067\u3001\u5341\u5206\u306a\u6a5f\u80fd\u306f\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3068\u601d\u3063\u3066\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\u30b5\u30a4\u30c8\n\n\n\nLitJSON \n\n\n\n\n\u66f8\u304d\u8fbc\u307f\u65b9\u6cd5\n\n\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u57fa\u672c\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n1\u4f53\u3060\u3051\u3067\u306f\u306a\u304f\u8907\u6570\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\nCharacterDataToJson.cs\n/// <summary>\n/// Vector3\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3057\u304b\u5165\u3063\u3066\u3044\u306a\u3044\u69cb\u9020\u4f53\n/// </summary>\npublic struct Vec3\n{\n    public Vec3(float x, float y, float z)\n        : this()\n    {\n        X = x;\n        Y = y;\n        Z = z;\n    }\n\n    public float X { get; set; }\n    public float Y { get; set; }\n    public float Z { get; set; }\n};\n\n\npublic struct CharacterData\n{\n    public CharacterData(string name,int level, Vector3 pos, Vector3 scale)\n        : this()\n    {\n        Level = level;\n        Name = name;\n        Pos = new Vec3(pos.x, pos.y, pos.z);\n        Scale = new Vec3(scale.x, scale.y, scale.z);\n    }\n\n    public string Name { get; set; }\n    public int Level { get; set; }\n    public Vec3 Scale { get; set; }\n    public Vec3 Pos { get; set; }\n};\n\npublic class CharacterDataToJson : MonoBehaviour\n{\n    List<CharacterData> DataList = new List<CharacterData>();\n\n    /// <summary>\n    /// 1\u4f53\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059\u3002\n    /// </summary>\n    public void Write(CharacterData saveCharacterData)\n    {\n        DataList.Add(saveCharacterData);\n    }\n\n    /// <summary>\n    /// \u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\n    /// </summary>\n    public void FileWrite(string name)\n    {\n        // \u30c7\u30fc\u30bf\u3092Json\u306e\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\n        string json = LitJson.JsonMapper.ToJson(DataList);\n\n        // \u4fdd\u5b58\u3059\u308b\u30d5\u30a9\u30eb\u30c0\u30fc\n        var path = Application.persistentDataPath + \"/Database/\" ;\n\n        // \u30d5\u30a9\u30eb\u30c0\u30fc\u304c\u306a\u3044\u5834\u5408\u306f\u4f5c\u6210\u3059\u308b\n        if (!Directory.Exists(path))\n        {\n            Directory.CreateDirectory(path);\n        }\n\n        File.WriteAllText(path + name + \".json\", json);\n        DataList.Clear();\n    }\n\n}\n\n\n\n\u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u5b50\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30fc\u30bf\u3092Json\u306b\u66f8\u304d\u51fa\u305b\u3070\u66f8\u304d\u51fa\u3057\u306fOK\u3067\u3059\u3002\n\n\n\u8aad\u307f\u8fbc\u3080\u65b9\u6cd5\n\n\u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u66f8\u304d\u51fa\u3057\u305fJson\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u3053\u3068\u3092\u3057\u307e\u3059\u3002\n\n\nCharacterManager.cs\n\n\n///\u3000\u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30af\u30e9\u30b9\npublic class CharacterManager : MonoBehaviour\n{\n    [SerializeField]\n    GameObject ChildrenPrefab = null;\n\n    void Start()\n    {    \n        ChildrensLoading();\n    }\n\n    /// <summary>\n    /// \u5b50\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u9054\u3092\u8aad\u307f\u8fbc\u3080\n    /// </summary>\n    void ChildrensLoading()\n    { \n        var folderpath = Application.persistentDataPath + \"/Database/\" ;\n        var filePath = folderpath + name + \".json\";\n\n        if (!File.Exists(filePath)) return;\n\n        var jsonText = File.ReadAllText(filePath);\n        if (string.IsNullOrEmpty(jsonText)) return;\n\n        /// Json\u6587\u5b57\u5217\u3092CharacterData\u306e\u914d\u5217\u306b\u5909\u63db\u3059\u308b\n        var json = LitJson.JsonMapper.ToObject<CharacterData[]>(jsonText);\n\n        foreach(var chara in json)\n        {\n            ChildrenCreate(chara);\n        }\n    }\n\n    /// <summary>\n    /// \u5b50\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\n    /// </summary>\n    void ChildrenCreate(CharacterData chara)\n    {\n        var clone = (GameObject)Instantiate(ChildrenPrefab, Vector3.zero, Quaternion.identity);\n        clone.name = chara.Name;\n        clone.transform.parent = transform;\n        clone.transform.position = new Vector3(chara.Pos.X, chara.Pos.Y, chara.Pos.Z);\n        clone.transform.lossyScale.Scale(new Vector3(chara.Pos.X, chara.Pos.Y, chara.Pos.Z));\n    }\n\n\n\n}\n\n\n\nLitJson\u3060\u3051\u3067\u7c21\u5358\u306b\u8aad\u307f\u66f8\u304d\u304c\u3067\u304d\u307e\u3059\u3002\n1\u4f53\u3060\u3051\u306a\u3089List\u3092\u306a\u304f\u305b\u3070\u3067\u304d\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\n# \u4f7f\u7528\u3059\u308bJson\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\n## LitJSON\n* \u3069\u3093\u306a\u3082\u306e\u304b\uff1f\n    * \"LitJSON\"\u306f\u3001JSON\u8aad\u307f\u66f8\u304d\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3001\u30e9\u30a4\u30bb\u30f3\u30b9\u306fPublicDomain\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30a8\u30f3\u30b3\u30fc\u30c9\u30fb\u30c7\u30b3\u30fc\u30c9\u306a\u3069\u306e\u5fc5\u8981\u306a\u6a5f\u80fd\u306b\u52a0\u3048\u3066\u3001Exception\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u308a\u3001\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u30fb\u30c7\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u304c\u3067\u304d\u308b\u306e\u3067\u3001\u5341\u5206\u306a\u6a5f\u80fd\u306f\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3068\u601d\u3063\u3066\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n* \u30b5\u30a4\u30c8\n    * [LitJSON](http://lbv.github.io/litjson/) \n\n\n# \u66f8\u304d\u8fbc\u307f\u65b9\u6cd5\n* \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u57fa\u672c\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n* 1\u4f53\u3060\u3051\u3067\u306f\u306a\u304f\u8907\u6570\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n```csharp:CharacterDataToJson.cs\n/// <summary>\n/// Vector3\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3057\u304b\u5165\u3063\u3066\u3044\u306a\u3044\u69cb\u9020\u4f53\n/// </summary>\npublic struct Vec3\n{\n    public Vec3(float x, float y, float z)\n        : this()\n    {\n        X = x;\n        Y = y;\n        Z = z;\n    }\n\n    public float X { get; set; }\n    public float Y { get; set; }\n    public float Z { get; set; }\n};\n\n\npublic struct CharacterData\n{\n    public CharacterData(string name,int level, Vector3 pos, Vector3 scale)\n        : this()\n    {\n        Level = level;\n        Name = name;\n        Pos = new Vec3(pos.x, pos.y, pos.z);\n        Scale = new Vec3(scale.x, scale.y, scale.z);\n    }\n\n    public string Name { get; set; }\n    public int Level { get; set; }\n    public Vec3 Scale { get; set; }\n    public Vec3 Pos { get; set; }\n};\n\npublic class CharacterDataToJson : MonoBehaviour\n{\n    List<CharacterData> DataList = new List<CharacterData>();\n\n    /// <summary>\n    /// 1\u4f53\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059\u3002\n    /// </summary>\n    public void Write(CharacterData saveCharacterData)\n    {\n        DataList.Add(saveCharacterData);\n    }\n\n    /// <summary>\n    /// \u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\n    /// </summary>\n    public void FileWrite(string name)\n    {\n        // \u30c7\u30fc\u30bf\u3092Json\u306e\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\n        string json = LitJson.JsonMapper.ToJson(DataList);\n\n        // \u4fdd\u5b58\u3059\u308b\u30d5\u30a9\u30eb\u30c0\u30fc\n        var path = Application.persistentDataPath + \"/Database/\" ;\n\n        // \u30d5\u30a9\u30eb\u30c0\u30fc\u304c\u306a\u3044\u5834\u5408\u306f\u4f5c\u6210\u3059\u308b\n        if (!Directory.Exists(path))\n        {\n            Directory.CreateDirectory(path);\n        }\n\n        File.WriteAllText(path + name + \".json\", json);\n        DataList.Clear();\n    }\n\n}\n```\n\n* \u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u5b50\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30fc\u30bf\u3092Json\u306b\u66f8\u304d\u51fa\u305b\u3070\u66f8\u304d\u51fa\u3057\u306fOK\u3067\u3059\u3002\n\n# \u8aad\u307f\u8fbc\u3080\u65b9\u6cd5\n* \u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u66f8\u304d\u51fa\u3057\u305fJson\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u3053\u3068\u3092\u3057\u307e\u3059\u3002\n\n```csharp:CharacterManager.cs\n\n\n///\u3000\u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30af\u30e9\u30b9\npublic class CharacterManager : MonoBehaviour\n{\n    [SerializeField]\n    GameObject ChildrenPrefab = null;\n    \n    void Start()\n    {    \n        ChildrensLoading();\n    }\n\n    /// <summary>\n    /// \u5b50\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u9054\u3092\u8aad\u307f\u8fbc\u3080\n    /// </summary>\n    void ChildrensLoading()\n    { \n        var folderpath = Application.persistentDataPath + \"/Database/\" ;\n        var filePath = folderpath + name + \".json\";\n        \n        if (!File.Exists(filePath)) return;\n\n        var jsonText = File.ReadAllText(filePath);\n        if (string.IsNullOrEmpty(jsonText)) return;\n\n        /// Json\u6587\u5b57\u5217\u3092CharacterData\u306e\u914d\u5217\u306b\u5909\u63db\u3059\u308b\n        var json = LitJson.JsonMapper.ToObject<CharacterData[]>(jsonText);\n\n        foreach(var chara in json)\n        {\n            ChildrenCreate(chara);\n        }\n    }\n\n    /// <summary>\n    /// \u5b50\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\n    /// </summary>\n    void ChildrenCreate(CharacterData chara)\n    {\n        var clone = (GameObject)Instantiate(ChildrenPrefab, Vector3.zero, Quaternion.identity);\n        clone.name = chara.Name;\n        clone.transform.parent = transform;\n        clone.transform.position = new Vector3(chara.Pos.X, chara.Pos.Y, chara.Pos.Z);\n        clone.transform.lossyScale.Scale(new Vector3(chara.Pos.X, chara.Pos.Y, chara.Pos.Z));\n    }\n\n   \n\n}\n\n```\n\nLitJson\u3060\u3051\u3067\u7c21\u5358\u306b\u8aad\u307f\u66f8\u304d\u304c\u3067\u304d\u307e\u3059\u3002\n1\u4f53\u3060\u3051\u306a\u3089List\u3092\u306a\u304f\u305b\u3070\u3067\u304d\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\n", "tags": ["Unity", "Unity3D", "JSON"]}