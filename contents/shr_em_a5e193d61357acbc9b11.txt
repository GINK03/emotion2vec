{"context": " More than 1 year has passed since last update.\u4f55\u5ea6\u3082\u5fc3\u6298\u308c\u305d\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3061\u3087\u3063\u3068\u3044\u3058\u304f\u308c\u3070\u4ed6\u306e\u8a00\u8a9e\u3067\u3082\u4f7f\u3048\u307e\u3059\u3002\u304d\u3063\u3068\u3002\n\nActionScript\nclass Mat44 {\n    public var e00:Number, e01:Number, e02:Number, e03:Number;\n    public var e10:Number, e11:Number, e12:Number, e13:Number;\n    public var e20:Number, e21:Number, e22:Number, e23:Number;\n    public var e30:Number, e31:Number, e32:Number, e33:Number;\n\n    /*\n     * this = m^-1\n     */\n    public function invert(m:Mat44):void {\n        var e1021_1120:Number = m.e10 * m.e21 - m.e11 * m.e20;\n        var e1022_1220:Number = m.e10 * m.e22 - m.e12 * m.e20;\n        var e1023_1320:Number = m.e10 * m.e23 - m.e13 * m.e20;\n        var e1031_1130:Number = m.e10 * m.e31 - m.e11 * m.e30;\n        var e1032_1230:Number = m.e10 * m.e32 - m.e12 * m.e30;\n        var e1033_1330:Number = m.e10 * m.e33 - m.e13 * m.e30;\n        var e1122_1221:Number = m.e11 * m.e22 - m.e12 * m.e21;\n        var e1123_1321:Number = m.e11 * m.e23 - m.e13 * m.e21;\n        var e1132_1231:Number = m.e11 * m.e32 - m.e12 * m.e31;\n        var e1133_1331:Number = m.e11 * m.e33 - m.e13 * m.e31;\n        var e1220_2022:Number = m.e12 * m.e20 - m.e20 * m.e22;\n        var e1223_1322:Number = m.e12 * m.e23 - m.e13 * m.e22;\n        var e1223_2223:Number = m.e12 * m.e33 - m.e22 * m.e23;\n        var e1233_1332:Number = m.e12 * m.e33 - m.e13 * m.e32;\n        var e2031_2130:Number = m.e20 * m.e31 - m.e21 * m.e30;\n        var e2032_2033:Number = m.e20 * m.e32 - m.e20 * m.e33;\n        var e2032_2230:Number = m.e20 * m.e32 - m.e22 * m.e30;\n        var e2033_2330:Number = m.e20 * m.e33 - m.e23 * m.e30;\n        var e2132_2231:Number = m.e21 * m.e32 - m.e22 * m.e31;\n        var e2133_2331:Number = m.e21 * m.e33 - m.e23 * m.e31;\n        var e2230_2330:Number = m.e22 * m.e30 - m.e23 * m.e30;\n        var e2233_2332:Number = m.e22 * m.e33 - m.e23 * m.e32;\n        var det:Number =\n            m.e00 * (m.e11 * e2233_2332 - m.e12 * e2133_2331 + m.e13 * e2132_2231) +\n            m.e01 * (-m.e10 * e2233_2332 - m.e12 * e2032_2033 + m.e13 * e2230_2330) +\n            m.e02 * (m.e10 * e2133_2331 - m.e11 * e2033_2330 + m.e13 * e2031_2130) +\n            m.e03 * (-m.e10 * e2132_2231 + m.e11 * e2032_2230 - m.e12 * e2031_2130)\n        ;\n        if (det != 0) det = 1 / det;\n        var t00:Number = m.e11 * e2233_2332 - m.e12 * e2133_2331 + m.e13 * e2132_2231;\n        var t01:Number = -m.e01 * e2233_2332 + m.e02 * e2133_2331 - m.e03 * e2132_2231;\n        var t02:Number = m.e01 * e1233_1332 - m.e02 * e1133_1331 + m.e03 * e1132_1231;\n        var t03:Number = -m.e01 * e1223_2223 + m.e02 * e1123_1321 - m.e03 * e1122_1221;\n        var t10:Number = -m.e10 * e2233_2332 + m.e12 * e2033_2330 - m.e13 * e2032_2230;\n        var t11:Number = m.e00 * e2233_2332 - m.e02 * e2033_2330 + m.e03 * e2032_2230;\n        var t12:Number = -m.e00 * e1233_1332 + m.e02 * e1033_1330 - m.e03 * e1032_1230;\n        var t13:Number = m.e00 * e1223_1322 - m.e02 * e1023_1320 - m.e03 * e1220_2022;\n        var t20:Number = m.e10 * e2133_2331 - m.e11 * e2033_2330 + m.e13 * e2031_2130;\n        var t21:Number = -m.e00 * e2133_2331 + m.e01 * e2033_2330 - m.e03 * e2031_2130;\n        var t22:Number = m.e00 * e1133_1331 - m.e01 * e1033_1330 + m.e03 * e1031_1130;\n        var t23:Number = -m.e00 * e1123_1321 + m.e01 * e1023_1320 - m.e03 * e1021_1120;\n        var t30:Number = -m.e10 * e2132_2231 + m.e11 * e2032_2230 - m.e12 * e2031_2130;\n        var t31:Number = m.e00 * e2132_2231 - m.e01 * e2032_2230 + m.e02 * e2031_2130;\n        var t32:Number = -m.e00 * e1132_1231 + m.e01 * e1032_1230 - m.e02 * e1031_1130;\n        var t33:Number = m.e00 * e1122_1221 - m.e01 * e1022_1220 + m.e02 * e1021_1120;\n        e00 = det * t00; e01 = det * t01; e02 = det * t02; e03 = det * t03;\n        e10 = det * t10; e11 = det * t11; e12 = det * t12; e13 = det * t13;\n        e20 = det * t20; e21 = det * t21; e22 = det * t22; e23 = det * t23;\n        e30 = det * t30; e31 = det * t31; e32 = det * t32; e33 = det * t33;\n    }\n    /*public function invert(m:Mat44):void {\n        var det:Number =\n            m.e00*m.e11*m.e22*m.e33+m.e00*m.e12*m.e23*m.e31+m.e00*m.e13*m.e21*m.e32+\n            m.e01*m.e10*m.e23*m.e32+m.e01*m.e12*m.e20*m.e33+m.e01*m.e13*m.e22*m.e30+\n            m.e02*m.e10*m.e21*m.e33+m.e02*m.e11*m.e23*m.e30+m.e02*m.e13*m.e20*m.e31+\n            m.e03*m.e10*m.e22*m.e31+m.e03*m.e11*m.e20*m.e32+m.e03*m.e12*m.e21*m.e30-\n            m.e00*m.e11*m.e23*m.e32-m.e00*m.e12*m.e21*m.e33-m.e00*m.e13*m.e22*m.e31-\n            m.e01*m.e10*m.e22*m.e33-m.e01*m.e12*m.e23*m.e30-m.e01*m.e13*m.e20*m.e32-\n            m.e02*m.e10*m.e23*m.e31-m.e02*m.e11*m.e20*m.e33-m.e02*m.e13*m.e21*m.e30-\n            m.e03*m.e10*m.e21*m.e32-m.e03*m.e11*m.e22*m.e30-m.e03*m.e12*m.e20*m.e31\n        ;\n        if (det != 0) det = 1 / det;\n        var t00:Number=m.e11*m.e22*m.e33+m.e12*m.e23*m.e31+m.e13*m.e21*m.e32-m.e11*m.e23*m.e32-m.e12*m.e21*m.e33-m.e13*m.e22*m.e31;\n        var t01:Number=m.e01*m.e23*m.e32+m.e02*m.e21*m.e33+m.e03*m.e22*m.e31-m.e01*m.e22*m.e33-m.e02*m.e23*m.e31-m.e03*m.e21*m.e32;\n        var t02:Number=m.e01*m.e12*m.e33+m.e02*m.e13*m.e31+m.e03*m.e11*m.e32-m.e01*m.e13*m.e32-m.e02*m.e11*m.e33-m.e03*m.e12*m.e31;\n        var t03:Number=m.e01*m.e23*m.e22+m.e02*m.e11*m.e23+m.e03*m.e12*m.e21-m.e01*m.e12*m.e23-m.e02*m.e13*m.e21-m.e03*m.e11*m.e22;\n        var t10:Number=m.e10*m.e23*m.e32+m.e12*m.e20*m.e33+m.e13*m.e22*m.e30-m.e10*m.e22*m.e33-m.e12*m.e23*m.e30-m.e13*m.e20*m.e32;\n        var t11:Number=m.e00*m.e22*m.e33+m.e02*m.e23*m.e30+m.e03*m.e20*m.e32-m.e00*m.e23*m.e32-m.e02*m.e20*m.e33-m.e03*m.e22*m.e30;\n        var t12:Number=m.e00*m.e13*m.e32+m.e02*m.e10*m.e33+m.e03*m.e12*m.e30-m.e00*m.e12*m.e33-m.e02*m.e13*m.e30-m.e03*m.e10*m.e32;\n        var t13:Number=m.e00*m.e12*m.e23+m.e02*m.e13*m.e20+m.e03*m.e20*m.e22-m.e00*m.e13*m.e22-m.e02*m.e10*m.e23-m.e03*m.e12*m.e20;\n        var t20:Number=m.e10*m.e21*m.e33+m.e11*m.e23*m.e30+m.e13*m.e20*m.e31-m.e10*m.e23*m.e31-m.e11*m.e20*m.e33-m.e13*m.e21*m.e30;\n        var t21:Number=m.e00*m.e23*m.e31+m.e01*m.e20*m.e33+m.e03*m.e21*m.e30-m.e00*m.e21*m.e33-m.e01*m.e23*m.e30-m.e03*m.e20*m.e31;\n        var t22:Number=m.e00*m.e11*m.e33+m.e01*m.e13*m.e30+m.e03*m.e10*m.e31-m.e00*m.e13*m.e31-m.e01*m.e10*m.e33-m.e03*m.e11*m.e30;\n        var t23:Number=m.e00*m.e13*m.e21+m.e01*m.e10*m.e23+m.e03*m.e11*m.e20-m.e00*m.e11*m.e23-m.e01*m.e13*m.e20-m.e03*m.e10*m.e21;\n        var t30:Number=m.e10*m.e22*m.e31+m.e11*m.e20*m.e32+m.e12*m.e21*m.e30-m.e10*m.e21*m.e32-m.e11*m.e22*m.e30-m.e12*m.e20*m.e31;\n        var t31:Number=m.e00*m.e21*m.e32+m.e01*m.e22*m.e30+m.e02*m.e20*m.e31-m.e00*m.e22*m.e31-m.e01*m.e20*m.e32-m.e02*m.e21*m.e30;\n        var t32:Number=m.e00*m.e12*m.e31+m.e01*m.e10*m.e32+m.e02*m.e11*m.e30-m.e00*m.e11*m.e32-m.e01*m.e12*m.e30-m.e02*m.e10*m.e31;\n        var t33:Number=m.e00*m.e11*m.e22+m.e01*m.e12*m.e20+m.e02*m.e10*m.e21-m.e00*m.e12*m.e21-m.e01*m.e10*m.e22-m.e02*m.e11*m.e20;\n        e00=det*t00;e01=det*t01;e02=det*t02;e03=det*t03;\n        e10=det*t10;e11=det*t11;e12=det*t12;e13=det*t13;\n        e20=det*t20;e21=det*t21;e22=det*t22;e23=det*t23;\n        e30=det*t30;e31=det*t31;e32=det*t32;e33=det*t33;\n    }*/\n}\n\n\n\u53c2\u8003:http://www.cg.info.hiroshima-cu.ac.jp/~miyazaki/knowledge/tech23.html\nP.S. \u5c11\u3057\u6700\u9069\u5316\u3002\u3053\u308c\u4ee5\u4e0a\u3084\u308b\u3068\u6c5a\u304f\u306a\u308b\u306e\u3067STOP\u3002\n\n\u4f55\u5ea6\u3082\u5fc3\u6298\u308c\u305d\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3061\u3087\u3063\u3068\u3044\u3058\u304f\u308c\u3070\u4ed6\u306e\u8a00\u8a9e\u3067\u3082\u4f7f\u3048\u307e\u3059\u3002\u304d\u3063\u3068\u3002\n\n```actionscript:ActionScript\nclass Mat44 {\n\tpublic var e00:Number, e01:Number, e02:Number, e03:Number;\n\tpublic var e10:Number, e11:Number, e12:Number, e13:Number;\n\tpublic var e20:Number, e21:Number, e22:Number, e23:Number;\n\tpublic var e30:Number, e31:Number, e32:Number, e33:Number;\n\n\t/*\n\t * this = m^-1\n\t */\n\tpublic function invert(m:Mat44):void {\n\t\tvar e1021_1120:Number = m.e10 * m.e21 - m.e11 * m.e20;\n\t\tvar e1022_1220:Number = m.e10 * m.e22 - m.e12 * m.e20;\n\t\tvar e1023_1320:Number = m.e10 * m.e23 - m.e13 * m.e20;\n\t\tvar e1031_1130:Number = m.e10 * m.e31 - m.e11 * m.e30;\n\t\tvar e1032_1230:Number = m.e10 * m.e32 - m.e12 * m.e30;\n\t\tvar e1033_1330:Number = m.e10 * m.e33 - m.e13 * m.e30;\n\t\tvar e1122_1221:Number = m.e11 * m.e22 - m.e12 * m.e21;\n\t\tvar e1123_1321:Number = m.e11 * m.e23 - m.e13 * m.e21;\n\t\tvar e1132_1231:Number = m.e11 * m.e32 - m.e12 * m.e31;\n\t\tvar e1133_1331:Number = m.e11 * m.e33 - m.e13 * m.e31;\n\t\tvar e1220_2022:Number = m.e12 * m.e20 - m.e20 * m.e22;\n\t\tvar e1223_1322:Number = m.e12 * m.e23 - m.e13 * m.e22;\n\t\tvar e1223_2223:Number = m.e12 * m.e33 - m.e22 * m.e23;\n\t\tvar e1233_1332:Number = m.e12 * m.e33 - m.e13 * m.e32;\n\t\tvar e2031_2130:Number = m.e20 * m.e31 - m.e21 * m.e30;\n\t\tvar e2032_2033:Number = m.e20 * m.e32 - m.e20 * m.e33;\n\t\tvar e2032_2230:Number = m.e20 * m.e32 - m.e22 * m.e30;\n\t\tvar e2033_2330:Number = m.e20 * m.e33 - m.e23 * m.e30;\n\t\tvar e2132_2231:Number = m.e21 * m.e32 - m.e22 * m.e31;\n\t\tvar e2133_2331:Number = m.e21 * m.e33 - m.e23 * m.e31;\n\t\tvar e2230_2330:Number = m.e22 * m.e30 - m.e23 * m.e30;\n\t\tvar e2233_2332:Number = m.e22 * m.e33 - m.e23 * m.e32;\n\t\tvar det:Number =\n\t\t\tm.e00 * (m.e11 * e2233_2332 - m.e12 * e2133_2331 + m.e13 * e2132_2231) +\n            m.e01 * (-m.e10 * e2233_2332 - m.e12 * e2032_2033 + m.e13 * e2230_2330) +\n            m.e02 * (m.e10 * e2133_2331 - m.e11 * e2033_2330 + m.e13 * e2031_2130) +\n            m.e03 * (-m.e10 * e2132_2231 + m.e11 * e2032_2230 - m.e12 * e2031_2130)\n\t\t;\n\t\tif (det != 0) det = 1 / det;\n\t\tvar t00:Number = m.e11 * e2233_2332 - m.e12 * e2133_2331 + m.e13 * e2132_2231;\n\t\tvar t01:Number = -m.e01 * e2233_2332 + m.e02 * e2133_2331 - m.e03 * e2132_2231;\n\t\tvar t02:Number = m.e01 * e1233_1332 - m.e02 * e1133_1331 + m.e03 * e1132_1231;\n\t\tvar t03:Number = -m.e01 * e1223_2223 + m.e02 * e1123_1321 - m.e03 * e1122_1221;\n\t\tvar t10:Number = -m.e10 * e2233_2332 + m.e12 * e2033_2330 - m.e13 * e2032_2230;\n\t\tvar t11:Number = m.e00 * e2233_2332 - m.e02 * e2033_2330 + m.e03 * e2032_2230;\n\t\tvar t12:Number = -m.e00 * e1233_1332 + m.e02 * e1033_1330 - m.e03 * e1032_1230;\n\t\tvar t13:Number = m.e00 * e1223_1322 - m.e02 * e1023_1320 - m.e03 * e1220_2022;\n\t\tvar t20:Number = m.e10 * e2133_2331 - m.e11 * e2033_2330 + m.e13 * e2031_2130;\n\t\tvar t21:Number = -m.e00 * e2133_2331 + m.e01 * e2033_2330 - m.e03 * e2031_2130;\n\t\tvar t22:Number = m.e00 * e1133_1331 - m.e01 * e1033_1330 + m.e03 * e1031_1130;\n\t\tvar t23:Number = -m.e00 * e1123_1321 + m.e01 * e1023_1320 - m.e03 * e1021_1120;\n\t\tvar t30:Number = -m.e10 * e2132_2231 + m.e11 * e2032_2230 - m.e12 * e2031_2130;\n\t\tvar t31:Number = m.e00 * e2132_2231 - m.e01 * e2032_2230 + m.e02 * e2031_2130;\n\t\tvar t32:Number = -m.e00 * e1132_1231 + m.e01 * e1032_1230 - m.e02 * e1031_1130;\n\t\tvar t33:Number = m.e00 * e1122_1221 - m.e01 * e1022_1220 + m.e02 * e1021_1120;\n\t\te00 = det * t00; e01 = det * t01; e02 = det * t02; e03 = det * t03;\n\t\te10 = det * t10; e11 = det * t11; e12 = det * t12; e13 = det * t13;\n\t\te20 = det * t20; e21 = det * t21; e22 = det * t22; e23 = det * t23;\n\t\te30 = det * t30; e31 = det * t31; e32 = det * t32; e33 = det * t33;\n\t}\n\t/*public function invert(m:Mat44):void {\n\t\tvar det:Number =\n\t\t\tm.e00*m.e11*m.e22*m.e33+m.e00*m.e12*m.e23*m.e31+m.e00*m.e13*m.e21*m.e32+\n\t\t\tm.e01*m.e10*m.e23*m.e32+m.e01*m.e12*m.e20*m.e33+m.e01*m.e13*m.e22*m.e30+\n\t\t\tm.e02*m.e10*m.e21*m.e33+m.e02*m.e11*m.e23*m.e30+m.e02*m.e13*m.e20*m.e31+\n\t\t\tm.e03*m.e10*m.e22*m.e31+m.e03*m.e11*m.e20*m.e32+m.e03*m.e12*m.e21*m.e30-\n\t\t\tm.e00*m.e11*m.e23*m.e32-m.e00*m.e12*m.e21*m.e33-m.e00*m.e13*m.e22*m.e31-\n\t\t\tm.e01*m.e10*m.e22*m.e33-m.e01*m.e12*m.e23*m.e30-m.e01*m.e13*m.e20*m.e32-\n\t\t\tm.e02*m.e10*m.e23*m.e31-m.e02*m.e11*m.e20*m.e33-m.e02*m.e13*m.e21*m.e30-\n\t\t\tm.e03*m.e10*m.e21*m.e32-m.e03*m.e11*m.e22*m.e30-m.e03*m.e12*m.e20*m.e31\n\t\t;\n\t\tif (det != 0) det = 1 / det;\n\t\tvar t00:Number=m.e11*m.e22*m.e33+m.e12*m.e23*m.e31+m.e13*m.e21*m.e32-m.e11*m.e23*m.e32-m.e12*m.e21*m.e33-m.e13*m.e22*m.e31;\n\t\tvar t01:Number=m.e01*m.e23*m.e32+m.e02*m.e21*m.e33+m.e03*m.e22*m.e31-m.e01*m.e22*m.e33-m.e02*m.e23*m.e31-m.e03*m.e21*m.e32;\n\t\tvar t02:Number=m.e01*m.e12*m.e33+m.e02*m.e13*m.e31+m.e03*m.e11*m.e32-m.e01*m.e13*m.e32-m.e02*m.e11*m.e33-m.e03*m.e12*m.e31;\n\t\tvar t03:Number=m.e01*m.e23*m.e22+m.e02*m.e11*m.e23+m.e03*m.e12*m.e21-m.e01*m.e12*m.e23-m.e02*m.e13*m.e21-m.e03*m.e11*m.e22;\n\t\tvar t10:Number=m.e10*m.e23*m.e32+m.e12*m.e20*m.e33+m.e13*m.e22*m.e30-m.e10*m.e22*m.e33-m.e12*m.e23*m.e30-m.e13*m.e20*m.e32;\n\t\tvar t11:Number=m.e00*m.e22*m.e33+m.e02*m.e23*m.e30+m.e03*m.e20*m.e32-m.e00*m.e23*m.e32-m.e02*m.e20*m.e33-m.e03*m.e22*m.e30;\n\t\tvar t12:Number=m.e00*m.e13*m.e32+m.e02*m.e10*m.e33+m.e03*m.e12*m.e30-m.e00*m.e12*m.e33-m.e02*m.e13*m.e30-m.e03*m.e10*m.e32;\n\t\tvar t13:Number=m.e00*m.e12*m.e23+m.e02*m.e13*m.e20+m.e03*m.e20*m.e22-m.e00*m.e13*m.e22-m.e02*m.e10*m.e23-m.e03*m.e12*m.e20;\n\t\tvar t20:Number=m.e10*m.e21*m.e33+m.e11*m.e23*m.e30+m.e13*m.e20*m.e31-m.e10*m.e23*m.e31-m.e11*m.e20*m.e33-m.e13*m.e21*m.e30;\n\t\tvar t21:Number=m.e00*m.e23*m.e31+m.e01*m.e20*m.e33+m.e03*m.e21*m.e30-m.e00*m.e21*m.e33-m.e01*m.e23*m.e30-m.e03*m.e20*m.e31;\n\t\tvar t22:Number=m.e00*m.e11*m.e33+m.e01*m.e13*m.e30+m.e03*m.e10*m.e31-m.e00*m.e13*m.e31-m.e01*m.e10*m.e33-m.e03*m.e11*m.e30;\n\t\tvar t23:Number=m.e00*m.e13*m.e21+m.e01*m.e10*m.e23+m.e03*m.e11*m.e20-m.e00*m.e11*m.e23-m.e01*m.e13*m.e20-m.e03*m.e10*m.e21;\n\t\tvar t30:Number=m.e10*m.e22*m.e31+m.e11*m.e20*m.e32+m.e12*m.e21*m.e30-m.e10*m.e21*m.e32-m.e11*m.e22*m.e30-m.e12*m.e20*m.e31;\n\t\tvar t31:Number=m.e00*m.e21*m.e32+m.e01*m.e22*m.e30+m.e02*m.e20*m.e31-m.e00*m.e22*m.e31-m.e01*m.e20*m.e32-m.e02*m.e21*m.e30;\n\t\tvar t32:Number=m.e00*m.e12*m.e31+m.e01*m.e10*m.e32+m.e02*m.e11*m.e30-m.e00*m.e11*m.e32-m.e01*m.e12*m.e30-m.e02*m.e10*m.e31;\n\t\tvar t33:Number=m.e00*m.e11*m.e22+m.e01*m.e12*m.e20+m.e02*m.e10*m.e21-m.e00*m.e12*m.e21-m.e01*m.e10*m.e22-m.e02*m.e11*m.e20;\n\t\te00=det*t00;e01=det*t01;e02=det*t02;e03=det*t03;\n\t\te10=det*t10;e11=det*t11;e12=det*t12;e13=det*t13;\n\t\te20=det*t20;e21=det*t21;e22=det*t22;e23=det*t23;\n\t\te30=det*t30;e31=det*t31;e32=det*t32;e33=det*t33;\n\t}*/\n}\n```\n\n\u53c2\u8003:http://www.cg.info.hiroshima-cu.ac.jp/~miyazaki/knowledge/tech23.html\n\nP.S. \u5c11\u3057\u6700\u9069\u5316\u3002\u3053\u308c\u4ee5\u4e0a\u3084\u308b\u3068\u6c5a\u304f\u306a\u308b\u306e\u3067STOP\u3002", "tags": ["ActionScript", "Mathematics", "Matrix"]}