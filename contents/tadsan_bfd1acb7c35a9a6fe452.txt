{"context": "\u3053\u306e\u30b9\u30e9\u30a4\u30c9\u306f\u30e4\u30d1\u30c1\u30fc\u30a8\u30a4\u30b8\u30a2\u30cf\u30c1\u30aa\u30a6\u30b82016\u306e\u300c[WIP]\u3042\u306a\u305f\u304c\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30ca\u30ebPHP\u30e9\u30a4\u30d6\u30e9\u30eaTeto\\Functools\u3092\u63a1\u7528\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304411\u500b\u306e\u7406\u7531\u300d\u306e\u767a\u8868\u5185\u5bb9\u3067\u3059\u3002\n\n\u95a2\u9023\u8a18\u4e8b\n\nFunctools\u3092\u4f5c\u3063\u305f\n\u904e\u5270\u306b\u30b9\u30de\u30fc\u30c8\u306aPHP\u3092\u66f8\u3053\u3046 (\u7121\u540d\u518d\u5e30\u7bc7)\n\n\n\n\u304a\u524d\u8ab0\u3088\n\n\u3046\u3055\u307f\u3051\u3093\u305f \u305e\u306c\u3048\u3050\u305c/\u3063\u3069\u3055\u3093\n\nGitHub: zonuexe (Pakagist\u3082\u540c\u3058)\nTwitter: @tadsan\n\n\n\n\u30d4\u30af\u30b7\u30d6\u682a\u5f0f\u4f1a\u793e\u3067pixiv\u3063\u3066\u30b5\u30fc\u30d3\u30b9\u3084\u3063\u3066\u308b\n\u6700\u8fd1\u306fPHP\u306e\u9759\u7684\u89e3\u6790\u304c\u30a2\u30c4\u3044\n\n\n\n\u3055\u3066\n\n\nTwitter\u306b\u30662016\u5e745\u670825\u65e5\n\n\n\u3042\u307e\u308a\u6709\u540d\u3067\u306f\u306a\u3044\u306e\u3067\u3082\u3057\u304b\u3057\u305f\u3089\u3054\u5b58\u3058\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001PHP\u306b\u306f\u9ad8\u901f\u9ad8\u6a5f\u80fd\u306aforeach\u3063\u3066\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u6a5f\u69cb\u304c\u8a00\u8a9e\u7d44\u307f\u8fbc\u307f\u306b\u3042\u308b\u306e\u3067\u3001\u308f\u3056\u308f\u3056array_map\u3068\u304b\u66f8\u304b\u306a\u304f\u3066\u3082\u3044\u3044\u3093\u3067\u3059\u3088\uff01\uff01\uff01\uff01\uff01\u2014 \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) May 25, 2016\n\n\n\n\u307e\u3058\u3081\u306a\u306f\u306a\u3057\u3001array_map\u306f\u540d\u524d\u306e\u901a\u308a\u914d\u5217\u3057\u304b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u672c\u5f53\u306b\u4e0d\u5fc5\u8981\u3067\u3064\u3089\u3044\u3002 https://t.co/lO7UCVlW9l\u2014 \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) May 25, 2016\n\n\n\narray_map\u304c\u6d3b\u304d\u308b\u30d1\u30bf\u30fc\u30f3\u3082\u304c\u3093\u3070\u3063\u3066\u6319\u3052\u308c\u3070\u306a\u304f\u306f\u306a\u304f\u3066\u3001\u3072\u3068\u3064\u306f array_map('floatval', range(1, 5) \u3001\u3082\u3046\u3072\u3068\u3064\u306f array_map(null, range('a', 'e') ,range(1, 5)) \u3002\u4ee5\u4e0a\u7d42\u4e86\u3067\u3054\u3056\u3044\u307e\u3059\u3002\u2014 \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) May 25, 2016\n\n\n\narray_map\u306b\u6e21\u3057\u3066\u3044\u3044\u306e\u306fcallable\u306a\u5024\u306e\u307f\u3067\u3001 array_map(function(){ ... \u3068\u304b\u66f8\u304d\u59cb\u3081\u305f\u3089\u305d\u308c\u306f\u6557\u5317\u30d5\u30e9\u30b0\u3002\u7d20\u76f4\u306b foreach \u3067\u66f8\u3051\uff01\u2014 \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) May 25, 2016\n\n\n\n\u50d5\u305a\u3063\u3068\u81ea\u5206\u306e\u3053\u3068\u3092\u30af\u30ed\u30fc\u30b8\u30e3\u53a8\u3060\u3068\u601d\u3063\u3066\u305f\u3051\u3069\u52d5\u7684\u30b9\u30b3\u30fc\u30d7\u306eEmacs Lisp\u6700\u9ad8\uff01 \u3068\u304b\u53eb\u3093\u3060\u308aPHP\u3067array_map(function()... \u3063\u3066\u66f8\u3044\u305f\u3089\u8ca0\u3051\u30d5\u30e9\u30b0\u3060\u3068\u4e3b\u5f35\u3057\u305f\u308a\u3059\u308b\u3057\u3001\u81ea\u5206\u3067\u8a8d\u8b58\u3057\u3066\u308b\u307b\u3069\u305d\u3046\u3067\u306f\u306a\u3044\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u2014 \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) May 25, 2016\n\n\n\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u3001\u3086\u3063\u304f\u308a30\u5206\u304b\u3051\u3066\u8a71\u3057\u307e\u3059\u3002\n\n\n\u4e09\u4e09 \u30fe(\u3003\uff1e\uff1c)\uff89\uff9e \u3000\u3000... \u03bb\n\n\n\u304a\u3053\u3068\u308f\u308a\n\u3053\u306e\u767a\u8868\u306e\u5185\u5bb9\u3067\u51fa\u3066\u304f\u308b\u7528\u8a9e\u306a\u3069\u306f\u53b3\u5bc6\u306a\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u73fe\u4ee3\u7684\u306a\u89e3\u91c8\u3092\u53cd\u6620\u3057\u305f\u3082\u306e\u3067\u306f\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\u9069\u5f53\u306bWikipedia\u3092\u6d41\u3057\u8aad\u3093\u3067\u3001\u96e3\u3057\u305d\u3046\u306a\u90e8\u5206\u3092\u90fd\u5408\u826f\u304f\u8aad\u307f\u98db\u3070\u3057\u305f\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n\n\u304a\u3053\u3068\u308f\u308a\n\u4e88\u9632\u7dda\u3092\u5f35\u3063\u3066\u304a\u304d\u307e\u3059\u304c\u7b46\u8005\u306f\u672c\u767a\u8868\u3067\u89e6\u308c\u308b\u3044\u308d\u3093\u306a\u6982\u5ff5\u306b\u3064\u3044\u3066\u5c02\u9580\u6559\u80b2\u3092\u53d7\u3051\u305f\u308a\u4f53\u7cfb\u7684\u306a\u7814\u7a76\u306b\u53d6\u308a\u7d44\u3093\u3060\u3053\u3068\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u3053\u3068\u6570\u5b66\u7684\u306a\u6982\u5ff5\u3078\u306e\u8a00\u53ca\u306f\u7591\u3063\u3066\u304b\u304b\u3063\u3066\u304f\u3060\u3055\u3044\u306d\u3002\u300cHaskell\u306e\u6a5f\u80fd\u3092\u30b3\u30d4\u30fc\u3057\u305f\u300d\u3063\u3066\u30ec\u30d9\u30eb\u3067\u306f\u7406\u89e3\u3057\u3066\u308b\u3051\u3069Haskeller\u3058\u3083\u306a\u3044\u3088\u3002\n\n\n\u30a2\u30b8\u30a7\u30f3\u30c0\n\n\u51fd\u6570\u3063\u3066\u306a\u3093\u3060\u3063\u3051\nPHP\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\nTeto\\Functools\u306e\u7d39\u4ecb\n\n\n\n\u51fd\u6570\u3068\u306f\u4f55\u304b\n\n\n\u51fd\u6570\u3068\u95a2\u6570\u306e\u610f\u5473\u306f\u540c\u3058\u3001\u7279\u5225\u306a\u542b\u610f\u306f\u306a\u3044\n\u4e2d\u5b66\u6821\u3067 $f(x) = 3x + 2$ \u307f\u305f\u3044\u306a\u306e\u3092\u7fd2\u3063\u305f\nPHP\u306b\u7ffb\u8a33\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\n\nfunction f($x) { return 3 * $x + 2; }\n\necho \"f(3) = \", f(3), PHP_EOL;\n\n\n\n\u51fd\u6570\u3068\u306f\u4f55\u304b\n\n\u7b97\u6570\u3067\u306a\u3089\u3063\u305f\u516c\u5f0f\u306e\u3088\u3046\u306a\u3082\u306e\u306f\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306e\u51fd\u6570\u3067\u8868\u73fe\u3067\u304d\u308b\n\n/** \u5186\u306e\u9762\u7a4d (\u03c0r\u00b2) */\nfunction circle_area($r) { return M_PI * $r ** 2; }\n\necho \"\u534a\u5f845: \u9762\u7a4d=\", circle_area(5), PHP_EOL;\n// \u534a\u5f845: \u9762\u7a4d=78.539816339745\n\n\n\n\u51fd\u6570\u3068\u306f\u4f55\u304b\n\n\u7528\u8a9e\u3092\u3072\u3068\u3064\u3060\u3051\u899a\u3048\u3066\u304f\u3060\u3055\u3044\n\u300c\u9069\u7528\u300d (apply)\n\n\n$f(a)$: \u300c$a$ \u306b $f$ \u3092\u9069\u7528\u3059\u308b\u300d\nPHP\u306e \u51fd\u6570\u547c\u3073\u51fa\u3057 \u307f\u305f\u3044\u306a\u611f\u3058\n\n\n\u3044\u3061\u3044\u3061\u300c\u51fd\u6570\u547c\u3073\u51fa\u3057\u3059\u308b\u300d\u306f\u3081\u3093\u3069\u3044\u304b\u3089\u4eca\u65e5\u306e\u3068\u3053\u308d\u306f\u300c\u9069\u7528\u3059\u308b\u300d\u3068\u547c\u3076\n\n\n\nPHP\u3067\u306e\u300c\u51fd\u6570\u300d\n\n\u51fd\u6570(\u6587): 'f'\n\nfunction f($a){ ... }\n\n\n\u30e1\u30bd\u30c3\u30c9\uff1a [$obj, 'f']\n\n\u30af\u30e9\u30b9\u5185 public function f($a){}\n\n\n\n\u9759\u7684\u30e1\u30bd\u30c3\u30c9\uff1a 'Klass::f / ['Klass', 'f']\n\n\u30af\u30e9\u30b9\u5185 public function f($a){ ... }\n\n\n\n\u51fd\u6570\u5f0f\uff1a \u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306b\u4ee3\u5165\u53ef\u80fd\n\n\n$f = function($a) { ... };\n\n\n\n\n\nPHP\u3067\u306e\u300c\u51fd\u6570\u300d = callable\n\n\u5168\u3066\u306e\u51fd\u6570\u306f\u5909\u6570\u4ee3\u5165\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3002\n$f = 'f';         // \u95a2\u6570\u306e f()\n$f = [$obj, 'f']; // \u30e1\u30bd\u30c3\u30c9 $obj->f()\n$f = 'Klass::f';  // \u9759\u7684\u30e1\u30bd\u30c3\u30c9 Klass::f()\n\n$f($v);\narray_map($f, range(1, 10));\n\n\u307e\u3068\u3081\u3066callable\u3068\u547c\u3076 (\u30bf\u30a4\u30d7\u30d2\u30f3\u30c8\u53ef\u80fd\uff01)\n\n\n\u96c6\u5408\n\n\u96e3\u3057\u3044\u6982\u5ff5\u306f\u304a\u3044\u3068\u3044\u3066\n\u306a\u3093\u304b\u7269\u304c\u96c6\u307e\u3063\u305f\u3084\u3064\nPHP\u306e\u914d\u5217\u3067\u305d\u308c\u3063\u307d\u304f\u8868\u73fe\u3067\u304d\u308b\n\n$fruits = [\"\u308a\u3093\u3054\", \"\u307f\u304b\u3093\", \"\u3070\u306a\u306a\"];\n\n\n\u96c6\u5408\u306b\u542b\u307e\u308c\u308b\u3082\u306e\u3092\u300c\u8981\u7d20\u300d(element)\u3068\u547c\u3076\n\u300c\u914d\u5217\u306e\u4e2d\u8eab\u300d\u306e\u3053\u3068\u3082\u540c\u3058\u3088\u3046\u306b\u8981\u7d20\u3068\u547c\u3076\n\n\n\n\u304a\u7d04\u675f\n\n\u3053\u3053\u3067\u306f\u300c\u540c\u3058\u5f15\u6570\u3092\u306a\u3089\u540c\u3058\u5024\u304c\u8fd4\u308b\u300d\u51fd\u6570\u306f\u300c\u540c\u3058\u300d\u3060\u3063\u3066\u3053\u3068\u306b\u3057\u307e\u3059\n\n\nPHP\u3067\u306e\u4e00\u822c\u7684\u306a\u89e3\u91c8\u3067\u306f\u3042\u308a\u307e\u305b\u3093\n\n\n\u4e2d\u8eab\u3067\u3069\u3093\u306a\u51e6\u7406\u3092\u3057\u3088\u3046\u304c\u300c\u540c\u3058\u300d\u3067\u3059\n\u3053\u308c\u3092\u300c\u51fd\u6570\u306e\u5916\u5ef6\u7684\u7b49\u5024\u6027\u300d\u3068\u547c\u3076\u3089\u3057\u3044\n\n\n\n\u300c\u540c\u3058\u51fd\u6570\u300d\u306e\u6bd4\u8f03\n\u3069\u3046\u66f8\u3044\u3066\u3082\u7d50\u679c\u306f\u540c\u3058\u306a\u306e\u3067\u7b49\u5024\u3002\nfunction pow3($n) { return $n ** 3; }\nfunction pow3($n) { return $n * $n * $n; }\nfunction pow3($n) {\n   $t = $n;\n   for ($i = 0; $i < (3 - 1); $i++) {\n       $t *= $n;\n   }\n\n   return $t;\n}\n\n\n\n\u4f59\u8ac7\n\u300c\u5916\u5ef6\u7684\u7b49\u5024\u6027\u300d\u306a\u3093\u3066\u7528\u8a9e\u3092\u6301\u3061\u51fa\u3059\u306e\u304c\u59a5\u5f53\u304b\u3069\u3046\u304b\u306f\u3055\u3066\u304a\u304d\u3001\u6982\u5ff5\u306f\u3068\u3066\u3082\u91cd\u8981\u3067\u3059\u3002\u300c\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u300d\u3084\u300c\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u300d\u3068\u306f\u3001\u51fa\u529b\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u306a\u304f(\u3042\u308b\u3044\u306f\u60f3\u5b9a\u5185\u306b\u53ce\u3081)\u5b9f\u884c\u52b9\u7387\u3084\u30b3\u30fc\u30c9\u306e\u8aad\u307f\u3084\u3059\u3055\u306e\u6539\u5584\u3092\u56f3\u308b\u6280\u6cd5\u3060\u304b\u3089\u3067\u3059\u3002\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306f\u5165\u51fa\u529b\u304c\u671f\u5f85\u901a\u308a\u3067\u3042\u308b\u3053\u3068\u3092\u691c\u8a3c\u3059\u308b\u305f\u3081\u306e\u826f\u3044\u624b\u6cd5\u3067\u3059\u3002\n\n\n\u3055\u3089\u306b\u4f59\u8ac7\n\u3053\u308c\u306f\u307b\u3093\u3068\u4f59\u8ac7\u306a\u306e\u3060\u3051\u308c\u3069\u300c\u5916\u5ef6(extension)\u300d\u306e\u53cd\u5bfe\u8a9e\u306f\u300c\u5185\u5305(intension)\u300d\u3067\u3059\uff08\u5185\u5305\u3068\u5916\u5ef6\uff09\u3002Python\u3092\u77e5\u3063\u3066\u308b\u578b\u306f\u300c\u5185\u5305\u8868\u8a18(List comprehension)\u300d\u3092\u66f8\u3044\u305f\u3053\u3068\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\u96c6\u5408\u306e\u5916\u5ef6\u7684\u8868\u8a18\u3068\u306f\u3001\u914d\u5217\u30ea\u30c6\u30e9\u30eb\u306e\u3088\u3046\u306b[1, 2, 3]\u3068\u8981\u7d20\u3092\u3072\u3068\u3064\u3072\u3068\u3064\u4e26\u3079\u4e0a\u3052\u308b\u66f8\u304d\u304b\u305f\u306e\u3053\u3068\u3067\u3059\u3002\n\n\nmap\n\n\nmap\n\n\u96c6\u5408\u3063\u307d\u3044\u3082\u306e\u306e\u8981\u7d20\u306b\u5bfe\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306b\u51fd\u6570\u3092\u9069\u7528\u3057\u305f\u96c6\u5408\u306b\u3059\u308b\u306e\u304cmap\n\u96c6\u5408\u8ad6\u306e\u7528\u8a9e\u3067\u306f\u5199\u50cf\n\n\n\n\nmap\nfunction x2($n) { return $n * 2; }\n\n\n\n\norig\n1\n2\n3\n5\n7\n13\n\n\n\n\nnew\n2\n4\n6\n10\n14\n26\n\n\n\n\u300c\u96c6\u5408\u3063\u307d\u3044\u3082\u306e\u300d\u3092\u8868\u306b\u3057\u3066\u307f\u308b\u3002\n\n\n\u300c\u96c6\u5408\u300d\u3063\u307d\u3044\u3082\u306e\n\n\u914d\u5217\n\n\n\u8981\u7d20\u306e\u91cd\u8907\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u3042\u308a\n\n\n\u914d\u5217\u306e\u30ad\u30fc\n\n\n\u91cd\u8907\u306f\u306a\u3057\u3001\u305f\u3060\u3057\u6587\u5b57\u5217\u3068\u6574\u6570\u306b\u9650\u308b\n\n\n\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\n\n\n\u5272\u3068\u6700\u8fd1(PHP 5.5, 2013\u5e74)\u306b\u5165\u3063\u305f\n\n\n\n\n\n\u3069\u3046\u3059\u308b\u304b\n\nPHP\u6a19\u6e96\u6a5f\u80fd\n\n\n\nforeach\u3067\u30eb\u30fc\u30d7\u3092\u56de\u3059\n\narray_map\u3067\u914d\u5217\u8981\u7d20\u306b\u9069\u7528\u3059\u308b\n\n\n\n\n\nforeach\nfunction x2($n) { return $n * 2; }\n\n$orig = [1, 2, 3, 5, 7, 13];\n$new = [];\nforeach ($orig as $o) {\n    $new[] = x2($o);\n}\n\n\u5916\u5ef6\u7684\u7b49\u5024\u6027\u306e\u8a71\u3092\u3057\u305f\u306e\u3067\u7acb\u6d3e\u306b\u3053\u308c\u3082map\n\n\narray_map\nfunction x2($n) { return $n * 2; }\n\n$orig = [1, 2, 3, 5, 7, 13];\n$new = array_map('x2', $orig);\n\n\n\u3061\u3063\u3061\u3083\u3044\u914d\u5217\u306a\u3089\u5225\u306b\u3053\u308c\u3067\u3044\u3044\n\u9577\u5927\u306a\u914d\u5217\u3067\u6700\u7d42\u7684\u306b\u5168\u3066\u306e\u8981\u7d20\u3092\u5229\u7528\u3057\u306a\u3044\u5834\u5408\u3001\u7121\u99c4\u306a\u51e6\u7406\u304c\u767a\u751f\u3059\u308b\n\n\n\n\u4f55\u304c\u554f\u984c\u306a\u306e\u304b\n\n\u6a19\u6e96\u306emap\u51fd\u6570\u306farray_map\u3057\u304b\u306a\u3044\uff01\n\nforeach\u3067\u66f8\u304f\u3068\u4e00\u6642\u5909\u6570\u304c\u5fc5\u8981\u3060\u3057\n\narray_map\u306f\u914d\u5217\u306b\u3057\u304b\u5229\u7528\u3067\u304d\u306a\u3044\n\n\n\nTraversable\u30af\u30e9\u30b9\n\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\n\n\n\nfunction\u3068\u304b\u3044\u3061\u3044\u3061\u5165\u529b\u3059\u308b\u306e\u306f\u3060\u308b\u3044\n\n\n\n\u89e3\u6c7a\u3059\u308b\u624b\u6bb5\n\n\u30a4\u30c6\u30ec\u30fc\u30bf\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\nTeto\\Functools\u3092\u5c0e\u5165\u3059\u308b\n\n\n\n\u30a4\u30c6\u30ec\u30fc\u30bf\u30e9\u30a4\u30d6\u30e9\u30ea\n\n\nnikic\\iter\n\n\u5358\u7d14\u306a\u30a4\u30c6\u30ec\u30fc\u30bf\u3058\u3083\u306a\u3044\u6a5f\u80fd\u3082\u5165\u3063\u3066\u308b\n\n\nUnderbar.php\nGinq\n\n\u3053\u308c\u3089\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u306f\u51e6\u7406\u3092\u9045\u5ef6\u8a55\u4fa1(\u5fc5\u8981\u306b\u306a\u308b\u307e\u3067\u8a08\u7b97\u3057\u306a\u3044)\u6a5f\u80fd\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3002\n\n\n\u3079\u3064\u306b\u81ea\u4f5c\u3057\u3066\u3082\u3044\u3044\n\u5de8\u4eba\u306e\u80a9\u306b\u4e57\u3063\u305f\u65b9\u304c\u826f\u3044\u306e\u3067\u63a8\u5968\u3082\u3057\u306a\u3044\n<?php /* tadsan@zonu.me | license WTFPL */\n\n/**\n * @param  array|\\Traversable $iter\n * @param  callable           $callback\n * @return \\Generator\n */\nfunction map($iter, callable $callback)\n{\n    foreach ($iter as $k => $v) {\n        yield $k => $callback($v);\n    }\n}\n\n/**\n * @param  array|\\Traversable $iter\n * @param  callable           $callback\n * @return \\Generator\n */\nfunction map_kv($iter, callable $callback)\n{\n    foreach ($iter as $k => $v) {\n        yield $k => $callback($k, $v);\n    }\n}\n\n/**\n * @param  array|\\Traversable $iter\n * @return array\n */\nfunction to_array($iter)\n{\n    if (is_array($iter)) {\n        return $iter;\n    }\n\n    $ary = [];\n    foreach ($iter as $i => $v) {\n        $ary[$i] = $v;\n    }\n\n    return $ary;\n}\n\n/**\n * @param  array|\\Traversable $iter\n * @param  int                $n\n * @return \\Generator\n */\nfunction take($iter, $n)\n{\n    $i = 0;\n    foreach ($iter as $x) {\n        if ($n <= $i++) { return; }\n        yield $x;\n    }\n}\n\n\n\n\u30a4\u30c6\u30ec\u30fc\u30bf\u3060\u3051\u3067\u306f\u89e3\u6c7a\u3057\u306a\u3044\u554f\u984c\n\n\nfunction\u3063\u3066\u6253\u3064\u306e\u306f\u3084\u3063\u3071\u308a\u3060\u308b\u3044\uff01\uff01\n\n\n\n\u3053\u3053\u3067\u3084\u3063\u3068\u672c\u6765\u306e\u30bf\u30a4\u30c8\u30eb\u306e\u63d0\u6848\n\n\n\u3042\u306a\u305f\u304c\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30ca\u30ebPHP\u30e9\u30a4\u30d6\u30e9\u30eaTeto\\Functools\u3092\u63a1\u7528\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044n\u500b\u306e\u7406\u7531\n\n\nFunctools\u306e\u6a5f\u80fd\n\n\u90e8\u5206\u9069\u7528\n\u6f14\u7b97\u5b50\u30e9\u30c3\u30d1\u30fc\n\u30bd\u30fc\u30c8\u51fd\u6570\u30e9\u30c3\u30d1\u30fc\n\u7121\u540d\u518d\u5e30\n\u30e1\u30e2\u5316\n\u51fd\u6570\u5408\u6210 / \u30d1\u30a4\u30d7\n\n\n\nFunctools\u306e\u3082\u304f\u308d\u307f\nmap\u3092\u5229\u7528\u3059\u308b\u3068\u304d\u306b\u5168\u529b\u3067function\u3063\u3066\u66f8\u304b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\uff01\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncomposer require zonuexe/functools\n\nComposer\u3092\u8aad\u307f\u8fbc\u3080\n<?php\ninclude_once __DIR__ . '/vendor/autoload.php';\n\n\n\n\u57fa\u672c\nPHP\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5148\u982d\u306e\u65b9\u3067\u30af\u30e9\u30b9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3002\n<?php\n\nuse Teto\\Functools as f;\n\n\n\n\u90e8\u5206\u9069\u7528\n\u65e2\u5b58\u306e\u51fd\u6570\u306b\u5f15\u6570\u3092\u5f53\u3066\u306f\u3081\u305f\u72b6\u614b\u306e\u51fd\u6570\u3092\u4f5c\u308b\nimplode(\",\", range(1, 10));\n// \"1, 2, 3, 4, 5, 6, 7, 8, 9, 10\"\n\n$comma = f::partial(\"implode\", [\", \"]);\n$comma(range(1, 10));\n// \"1, 2, 3, 4, 5, 6, 7, 8, 9, 10\"\n\n\n\n\u6f14\u7b97\u5b50\u30e9\u30c3\u30d1\u30fc\n2 + 3;\n\n$add = f::op(\"+\");\n$add(2, 3); // (2 + 3) === 5\n\n// \u540c\u6642\u306b\u90e8\u5206\u9069\u7528\u3082\u3067\u304d\u308b\n$add_1 = f::op(\"+\", [1]);\n$add_1(4);  // (1 + 4) === 5\n\n\n\n\u8a00\u8a9e\u69cb\u9020\u30e9\u30c3\u30d1\u30fc\ninclude\u3084print\u306f\u51fd\u6570\u3058\u3083\u306a\u3044\u306e\u3067\u30b5\u30dd\u30fc\u30c8\u3002\narray_map(f::op('include_once'), $files);\narray_map(f::op('eval'), $codes);\n\n\u2191 \u3044\u308d\u3044\u308d\u5371\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u63a8\u5968\u306f\u3057\u306a\u3044\n\n\n\u8a00\u8a9e\u69cb\u9020\u30e9\u30c3\u30d1\u30fc\n// Before\n$is_odd = function ($n) { return $n % 2 == 1; };\n$odd_even = function ($n) use ($is_odd) {\n    return sprintf(\"%d: %s\", $n, $is_odd($n) ? '\u5947\u6570' : '\u5076\u6570');\n};\n// After\n$is_odd = f::compose(f::op('%', [1 => 2], 0), f::op('==', [1 => 1], 0));\n$odd_even = f::op('if', [$is_odd, f::partial('sprintf', ['%d \u5947\u6570'], 1), f::partial('sprintf', ['%d \u5076\u6570'], 1)]);\n\narray_map($odd_even, range(1, 10));\n\n\u3069\u3063\u3061\u304c\u8aad\u307f\u3084\u3059\u3044\u304b\u306f\u3054\u81ea\u8eab\u3067\u5224\u65ad\u3092ry\n\n\nsort\u30e9\u30c3\u30d1\u30fc\n\u914d\u5217\u30bd\u30fc\u30c8\u51fd\u6570\u306f\u4ed5\u69d8\u4e0amap\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u3044\u3044\u611f\u3058\u306b\u30e9\u30c3\u30d7\u3057\u3066\u308b\u3002\narray_map(f::op('ksort'), $arrays);\narray_map(f::op('sort', [1 => SORT_NUMERIC]), $arrays);\n\n\n\n\u7121\u540d\u518d\u5e30 (fix)\nHaskell\u306e\u540c\u540d\u306e\u51fd\u6570\u3092\u30b3\u30d4\u30fc\u3057\u305f\u3002\nHaskell/\u4e0d\u52d5\u70b9\u3068\u518d\u5e30 - Wikibooks\n$fib = f::fix(function ($fib) {\n    return function ($x) use ($fib) {\n        return ($x < 2) ? 1 :\n            $fib($x - 1) + $fib($x -2);\n    };\n});\n\n$fib(6); // 13\n\n\n\n\u30bf\u30d7\u30eb (\u56fa\u5b9a\u500b\u306e\u5024\u306e\u7d44)\n\u4efb\u610f\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30fc\u306b\u3067\u304d\u308b\u3002\n$teto = f::tuple('\uff1aname',\"Teto Kasane\",'\uff1aage',31,'\uff1abirth',\"2008-04-01\",'\uff1aitem',\"Baguette\");\n$teto->pget('\uff1aname');  // \"Teto Kasane\"\n$teto->pget('\uff1aage');   // 31\n$teto->pget('\uff1abirth'); // \"2008-04-01\"\n$teto->pget('\uff1aitem');  // \"Baguette\"\n\n\u5185\u90e8\u69cb\u9020\u306fimmutable\u306a\u30bb\u30eb\u306b\u3088\u308b\u9023\u7d50\u30ea\u30b9\u30c8\n\n\n\u30ab\u30ea\u30fc\u5316\nPHP\u3067\u30ab\u30ea\u30fc\u5316\u304c\u9069\u5207\u306a\u5834\u9762\u306f\u7686\u7121(\u65ad\u8a00)\n\n\n\u30e1\u30e2\u5316\n\u6f38\u5316\u5f0f\u306b\u306a\u308b\u3088\u3046\u306a\u5358\u7d14\u306a\u518d\u5e30\u51fd\u6570\u3092\u52b9\u7387\u3088\u304f\u30e1\u30e2\u5316\u3059\u308b\n// simple fibonacci function. But, very very slow.\n$fib1 = function ($n) use (&$fib1) {\n    return ($n < 2) ? $n : $fib1($n - 1) + $fib1($n - 2);\n};\n\n// simple fibonacci function too. very fast!\n$fib2 = f::memoize(function ($n) use (&$fib2) {\n    return ($n < 2) ? $n : $fib2($n - 1) + $fib2($n - 2);\n}, /*initialize=*/ [0, 1]);\n\n\n\ncomposer require zonuexe/functools\n\n\n\n\u3044\u307e\u3059\u3050\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3053\u306e\u30b9\u30e9\u30a4\u30c9\u306f[\u30e4\u30d1\u30c1\u30fc\u30a8\u30a4\u30b8\u30a2\u30cf\u30c1\u30aa\u30a6\u30b82016](http://yapcasia8oji-2016mid.hachiojipm.org/)\u306e\u300c**[WIP]\u3042\u306a\u305f\u304c\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30ca\u30ebPHP\u30e9\u30a4\u30d6\u30e9\u30ea[Teto\\Functools](https://github.com/BaguettePHP/Functools/)\u3092\u63a1\u7528\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304411\u500b\u306e\u7406\u7531**\u300d\u306e\u767a\u8868\u5185\u5bb9\u3067\u3059\u3002\n\n### \u95a2\u9023\u8a18\u4e8b\n\n- [Functools\u3092\u4f5c\u3063\u305f](http://qiita.com/tadsan/items/abc52f0739ab5b4e781b)\n- [\u904e\u5270\u306b\u30b9\u30de\u30fc\u30c8\u306aPHP\u3092\u66f8\u3053\u3046 (\u7121\u540d\u518d\u5e30\u7bc7)](http://qiita.com/tadsan/items/6b8cc35ff9ccb3c27678)\n\n-----\n\n## \u304a\u524d\u8ab0\u3088\n\n* \u3046\u3055\u307f\u3051\u3093\u305f <sub>\u305e\u306c\u3048\u3050\u305c/\u3063\u3069\u3055\u3093</sub>\n  * GitHub: `zonuexe` (Pakagist\u3082\u540c\u3058)\n  * Twitter: `@tadsan`\n* \u30d4\u30af\u30b7\u30d6\u682a\u5f0f\u4f1a\u793e\u3067pixiv\u3063\u3066\u30b5\u30fc\u30d3\u30b9\u3084\u3063\u3066\u308b\n* \u6700\u8fd1\u306fPHP\u306e\u9759\u7684\u89e3\u6790\u304c\u30a2\u30c4\u3044\n\n-----\n\n# \u3055\u3066\n\n-----\n\n## Twitter\u306b\u3066<br>2016\u5e745\u670825\u65e5\n\n-----\n\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"ja\" dir=\"ltr\">\u3042\u307e\u308a\u6709\u540d\u3067\u306f\u306a\u3044\u306e\u3067\u3082\u3057\u304b\u3057\u305f\u3089\u3054\u5b58\u3058\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001PHP\u306b\u306f\u9ad8\u901f\u9ad8\u6a5f\u80fd\u306aforeach\u3063\u3066\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u6a5f\u69cb\u304c\u8a00\u8a9e\u7d44\u307f\u8fbc\u307f\u306b\u3042\u308b\u306e\u3067\u3001\u308f\u3056\u308f\u3056array_map\u3068\u304b\u66f8\u304b\u306a\u304f\u3066\u3082\u3044\u3044\u3093\u3067\u3059\u3088\uff01\uff01\uff01\uff01\uff01</p>&mdash; \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) <a href=\"https://twitter.com/tadsan/status/735444175236124672\">May 25, 2016</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n-----\n\n<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\"><p lang=\"ja\" dir=\"ltr\">\u307e\u3058\u3081\u306a\u306f\u306a\u3057\u3001array_map\u306f\u540d\u524d\u306e\u901a\u308a\u914d\u5217\u3057\u304b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u672c\u5f53\u306b\u4e0d\u5fc5\u8981\u3067\u3064\u3089\u3044\u3002 <a href=\"https://t.co/lO7UCVlW9l\">https://t.co/lO7UCVlW9l</a></p>&mdash; \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) <a href=\"https://twitter.com/tadsan/status/735447161840668672\">May 25, 2016</a></blockquote>\n\n-----\n\n<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\"><p lang=\"ja\" dir=\"ltr\">array_map\u304c\u6d3b\u304d\u308b\u30d1\u30bf\u30fc\u30f3\u3082\u304c\u3093\u3070\u3063\u3066\u6319\u3052\u308c\u3070\u306a\u304f\u306f\u306a\u304f\u3066\u3001\u3072\u3068\u3064\u306f array_map(&#39;floatval&#39;, range(1, 5) \u3001\u3082\u3046\u3072\u3068\u3064\u306f array_map(null, range(&#39;a&#39;, &#39;e&#39;) ,range(1, 5)) \u3002\u4ee5\u4e0a\u7d42\u4e86\u3067\u3054\u3056\u3044\u307e\u3059\u3002</p>&mdash; \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) <a href=\"https://twitter.com/tadsan/status/735448020997656576\">May 25, 2016</a></blockquote>\n\n-----\n\n<blockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"en\"><p lang=\"ja\" dir=\"ltr\">array_map\u306b\u6e21\u3057\u3066\u3044\u3044\u306e\u306fcallable\u306a\u5024\u306e\u307f\u3067\u3001 array_map(function(){ ... \u3068\u304b\u66f8\u304d\u59cb\u3081\u305f\u3089\u305d\u308c\u306f\u6557\u5317\u30d5\u30e9\u30b0\u3002\u7d20\u76f4\u306b foreach \u3067\u66f8\u3051\uff01</p>&mdash; \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) <a href=\"https://twitter.com/tadsan/status/735448356521054209\">May 25, 2016</a></blockquote>\n\n-----\n\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"ja\" dir=\"ltr\">\u50d5\u305a\u3063\u3068\u81ea\u5206\u306e\u3053\u3068\u3092\u30af\u30ed\u30fc\u30b8\u30e3\u53a8\u3060\u3068\u601d\u3063\u3066\u305f\u3051\u3069\u52d5\u7684\u30b9\u30b3\u30fc\u30d7\u306eEmacs Lisp\u6700\u9ad8\uff01 \u3068\u304b\u53eb\u3093\u3060\u308aPHP\u3067array_map(function()... \u3063\u3066\u66f8\u3044\u305f\u3089\u8ca0\u3051\u30d5\u30e9\u30b0\u3060\u3068\u4e3b\u5f35\u3057\u305f\u308a\u3059\u308b\u3057\u3001\u81ea\u5206\u3067\u8a8d\u8b58\u3057\u3066\u308b\u307b\u3069\u305d\u3046\u3067\u306f\u306a\u3044\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002</p>&mdash; \u3046\u3055\u307f\u3051\u3093\u305f (@tadsan) <a href=\"https://twitter.com/tadsan/status/735452489961480192\">May 25, 2016</a></blockquote>\n\n-----\n\n\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u3001\u3086\u3063\u304f\u308a30\u5206\u304b\u3051\u3066\u8a71\u3057\u307e\u3059\u3002\n\n<br>\n\n# \u4e09\u4e09 \u30fe(\u3003\uff1e\uff1c)\uff89\uff9e \u3000\u3000... \u03bb\n\n-----\n\n## \u304a\u3053\u3068\u308f\u308a\n\n\u3053\u306e\u767a\u8868\u306e\u5185\u5bb9\u3067\u51fa\u3066\u304f\u308b\u7528\u8a9e\u306a\u3069\u306f\u53b3\u5bc6\u306a\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u73fe\u4ee3\u7684\u306a\u89e3\u91c8\u3092\u53cd\u6620\u3057\u305f\u3082\u306e\u3067\u306f\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3064\u307e\u308a\u9069\u5f53\u306bWikipedia\u3092\u6d41\u3057\u8aad\u3093\u3067\u3001\u96e3\u3057\u305d\u3046\u306a\u90e8\u5206\u3092\u90fd\u5408\u826f\u304f\u8aad\u307f\u98db\u3070\u3057\u305f\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n-----\n\n## \u304a\u3053\u3068\u308f\u308a\n\n\u4e88\u9632\u7dda\u3092\u5f35\u3063\u3066\u304a\u304d\u307e\u3059\u304c\u7b46\u8005\u306f\u672c\u767a\u8868\u3067\u89e6\u308c\u308b\u3044\u308d\u3093\u306a\u6982\u5ff5\u306b\u3064\u3044\u3066\u5c02\u9580\u6559\u80b2\u3092\u53d7\u3051\u305f\u308a\u4f53\u7cfb\u7684\u306a\u7814\u7a76\u306b\u53d6\u308a\u7d44\u3093\u3060\u3053\u3068\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u3053\u3068\u6570\u5b66\u7684\u306a\u6982\u5ff5\u3078\u306e\u8a00\u53ca\u306f\u7591\u3063\u3066\u304b\u304b\u3063\u3066\u304f\u3060\u3055\u3044\u306d\u3002\u300cHaskell\u306e\u6a5f\u80fd\u3092\u30b3\u30d4\u30fc\u3057\u305f\u300d\u3063\u3066\u30ec\u30d9\u30eb\u3067\u306f\u7406\u89e3\u3057\u3066\u308b\u3051\u3069Haskeller\u3058\u3083\u306a\u3044\u3088\u3002\n\n-----\n\n## \u30a2\u30b8\u30a7\u30f3\u30c0\n\n 1. \u51fd\u6570\u3063\u3066\u306a\u3093\u3060\u3063\u3051\n 2. PHP\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\n 3. Teto\\Functools\u306e\u7d39\u4ecb\n\n-----\n\n## \u51fd\u6570\u3068\u306f\u4f55\u304b\n\n- **\u51fd\u6570**\u3068**\u95a2\u6570**\u306e\u610f\u5473\u306f\u540c\u3058\u3001\u7279\u5225\u306a\u542b\u610f\u306f\u306a\u3044\n- \u4e2d\u5b66\u6821\u3067 $f(x) = 3x + 2$ \u307f\u305f\u3044\u306a\u306e\u3092\u7fd2\u3063\u305f\n- PHP\u306b\u7ffb\u8a33\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\n\n```php\nfunction f($x) { return 3 * $x + 2; }\n\necho \"f(3) = \", f(3), PHP_EOL;\n```\n\n-----\n\n## \u51fd\u6570\u3068\u306f\u4f55\u304b\n\n- \u7b97\u6570\u3067\u306a\u3089\u3063\u305f**\u516c\u5f0f**\u306e\u3088\u3046\u306a\u3082\u306e\u306f\u3001<br>\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306e\u51fd\u6570\u3067\u8868\u73fe\u3067\u304d\u308b\n\n```php\n/** \u5186\u306e\u9762\u7a4d (\u03c0r\u00b2) */\nfunction circle_area($r) { return M_PI * $r ** 2; }\n\necho \"\u534a\u5f845: \u9762\u7a4d=\", circle_area(5), PHP_EOL;\n// \u534a\u5f845: \u9762\u7a4d=78.539816339745\n```\n-----\n\n## \u51fd\u6570\u3068\u306f\u4f55\u304b\n\n- \u7528\u8a9e\u3092\u3072\u3068\u3064\u3060\u3051\u899a\u3048\u3066\u304f\u3060\u3055\u3044\n- \u300c**\u9069\u7528**\u300d (apply)\n  - $f(a)$: \u300c$a$ \u306b $f$ \u3092\u9069\u7528\u3059\u308b\u300d\n  - PHP\u306e **\u51fd\u6570\u547c\u3073\u51fa\u3057** \u307f\u305f\u3044\u306a\u611f\u3058\n- \u3044\u3061\u3044\u3061\u300c\u51fd\u6570\u547c\u3073\u51fa\u3057\u3059\u308b\u300d\u306f\u3081\u3093\u3069\u3044\u304b\u3089<br>\u4eca\u65e5\u306e\u3068\u3053\u308d\u306f\u300c\u9069\u7528\u3059\u308b\u300d\u3068\u547c\u3076\n\n-----\n\n## PHP\u3067\u306e\u300c\u51fd\u6570\u300d\n\n- \u51fd\u6570(\u6587): `'f'`\n    - `function f($a){ ... }`\n- \u30e1\u30bd\u30c3\u30c9\uff1a `[$obj, 'f']`\n    - \u30af\u30e9\u30b9\u5185 `public function f($a){}`\n- \u9759\u7684\u30e1\u30bd\u30c3\u30c9\uff1a `'Klass::f` / `['Klass', 'f']`\n    - \u30af\u30e9\u30b9\u5185 `public function f($a){ ... }`\n- \u51fd\u6570\u5f0f\uff1a \u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306b\u4ee3\u5165\u53ef\u80fd\n    - `$f = function($a) { ... };`\n\n-----\n\n## PHP\u3067\u306e\u300c\u51fd\u6570\u300d = `callable`\n\n\u5168\u3066\u306e\u51fd\u6570\u306f[\u5909\u6570\u4ee3\u5165\u3057\u3066\u5229\u7528](https://ja.wikipedia.org/wiki/%E7%AC%AC%E4%B8%80%E7%B4%9A%E9%96%A2%E6%95%B0)\u3067\u304d\u308b\u3002\n\n```php\n$f = 'f';         // \u95a2\u6570\u306e f()\n$f = [$obj, 'f']; // \u30e1\u30bd\u30c3\u30c9 $obj->f()\n$f = 'Klass::f';  // \u9759\u7684\u30e1\u30bd\u30c3\u30c9 Klass::f()\n\n$f($v);\narray_map($f, range(1, 10));\n```\n\n\u307e\u3068\u3081\u3066`callable`\u3068\u547c\u3076 (\u30bf\u30a4\u30d7\u30d2\u30f3\u30c8\u53ef\u80fd\uff01)\n\n-----\n\n## \u96c6\u5408\n\n- \u96e3\u3057\u3044\u6982\u5ff5\u306f\u304a\u3044\u3068\u3044\u3066\n- \u306a\u3093\u304b\u7269\u304c\u96c6\u307e\u3063\u305f\u3084\u3064\n- PHP\u306e\u914d\u5217\u3067\u305d\u308c\u3063\u307d\u304f\u8868\u73fe\u3067\u304d\u308b\n\n```php\n$fruits = [\"\u308a\u3093\u3054\", \"\u307f\u304b\u3093\", \"\u3070\u306a\u306a\"];\n```\n\n- \u96c6\u5408\u306b\u542b\u307e\u308c\u308b\u3082\u306e\u3092\u300c**\u8981\u7d20**\u300d(element)\u3068\u547c\u3076\n- \u300c\u914d\u5217\u306e\u4e2d\u8eab\u300d\u306e\u3053\u3068\u3082\u540c\u3058\u3088\u3046\u306b\u8981\u7d20\u3068\u547c\u3076\n\n-----\n\n## \u304a\u7d04\u675f\n\n- \u3053\u3053\u3067\u306f\u300c\u540c\u3058\u5f15\u6570\u3092\u306a\u3089\u540c\u3058\u5024\u304c\u8fd4\u308b\u300d<br>\u51fd\u6570\u306f\u300c\u540c\u3058\u300d\u3060\u3063\u3066\u3053\u3068\u306b\u3057\u307e\u3059\n    - PHP\u3067\u306e\u4e00\u822c\u7684\u306a\u89e3\u91c8\u3067\u306f\u3042\u308a\u307e\u305b\u3093\n- \u4e2d\u8eab\u3067\u3069\u3093\u306a\u51e6\u7406\u3092\u3057\u3088\u3046\u304c\u300c\u540c\u3058\u300d\u3067\u3059\n- \u3053\u308c\u3092\u300c\u51fd\u6570\u306e\u5916\u5ef6\u7684\u7b49\u5024\u6027\u300d\u3068\u547c\u3076\u3089\u3057\u3044\n\n-----\n\n## \u300c\u540c\u3058\u51fd\u6570\u300d\u306e\u6bd4\u8f03\n\n\u3069\u3046\u66f8\u3044\u3066\u3082\u7d50\u679c\u306f\u540c\u3058\u306a\u306e\u3067\u7b49\u5024\u3002\n\n```php\nfunction pow3($n) { return $n ** 3; }\nfunction pow3($n) { return $n * $n * $n; }\nfunction pow3($n) {\n   $t = $n;\n   for ($i = 0; $i < (3 - 1); $i++) {\n       $t *= $n;\n   }\n\n   return $t;\n}\n```\n\n-----\n\n### \u4f59\u8ac7\n\n\u300c\u5916\u5ef6\u7684\u7b49\u5024\u6027\u300d\u306a\u3093\u3066\u7528\u8a9e\u3092\u6301\u3061\u51fa\u3059\u306e\u304c\u59a5\u5f53\u304b\u3069\u3046\u304b\u306f\u3055\u3066\u304a\u304d\u3001\u6982\u5ff5\u306f\u3068\u3066\u3082\u91cd\u8981\u3067\u3059\u3002\u300c\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u300d\u3084\u300c\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u300d\u3068\u306f\u3001**\u51fa\u529b\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u306a\u304f**(*\u3042\u308b\u3044\u306f\u60f3\u5b9a\u5185\u306b\u53ce\u3081*)\u5b9f\u884c\u52b9\u7387\u3084\u30b3\u30fc\u30c9\u306e\u8aad\u307f\u3084\u3059\u3055\u306e\u6539\u5584\u3092\u56f3\u308b\u6280\u6cd5\u3060\u304b\u3089\u3067\u3059\u3002\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306f\u5165\u51fa\u529b\u304c\u671f\u5f85\u901a\u308a\u3067\u3042\u308b\u3053\u3068\u3092\u691c\u8a3c\u3059\u308b\u305f\u3081\u306e\u826f\u3044\u624b\u6cd5\u3067\u3059\u3002\n\n-----\n\n### \u3055\u3089\u306b\u4f59\u8ac7\n\n*\u3053\u308c\u306f\u307b\u3093\u3068\u4f59\u8ac7\u306a\u306e\u3060\u3051\u308c\u3069\u300c\u5916\u5ef6(extension)\u300d\u306e\u53cd\u5bfe\u8a9e\u306f\u300c\u5185\u5305(intension)\u300d\u3067\u3059\uff08[\u5185\u5305\u3068\u5916\u5ef6](https://ja.wikipedia.org/wiki/%E5%86%85%E5%8C%85%E3%81%A8%E5%A4%96%E5%BB%B6)\uff09\u3002Python\u3092\u77e5\u3063\u3066\u308b\u578b\u306f\u300c\u5185\u5305\u8868\u8a18([List comprehension](https://en.wikipedia.org/wiki/List_comprehension))\u300d\u3092\u66f8\u3044\u305f\u3053\u3068\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\u96c6\u5408\u306e\u5916\u5ef6\u7684\u8868\u8a18\u3068\u306f\u3001\u914d\u5217\u30ea\u30c6\u30e9\u30eb\u306e\u3088\u3046\u306b`[1, 2, 3]`\u3068\u8981\u7d20\u3092\u3072\u3068\u3064\u3072\u3068\u3064\u4e26\u3079\u4e0a\u3052\u308b\u66f8\u304d\u304b\u305f\u306e\u3053\u3068\u3067\u3059\u3002*\n\n-----\n\n## map\n\n-----\n\n## map\n\n- \u96c6\u5408\u3063\u307d\u3044\u3082\u306e\u306e\u8981\u7d20\u306b\u5bfe\u3057\u3066\u3001<br>\u305d\u308c\u305e\u308c\u306b\u51fd\u6570\u3092\u9069\u7528\u3057\u305f\u96c6\u5408\u306b\u3059\u308b\u306e\u304cmap\n- \u96c6\u5408\u8ad6\u306e\u7528\u8a9e\u3067\u306f[\u5199\u50cf](https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F)\n\n-----\n\n## map\n\n```php\nfunction x2($n) { return $n * 2; }\n```\n\n| orig | 1 | 2 | 3 | 5 | 7 | 13 |\n|:---:|:-:|:-:|:-:|:-:|:-:|:--:|\n| **new** | 2 | 4 | 6 | 10 | 14 | 26 |\n\n\u300c\u96c6\u5408\u3063\u307d\u3044\u3082\u306e\u300d\u3092\u8868\u306b\u3057\u3066\u307f\u308b\u3002\n\n-----\n\n## \u300c\u96c6\u5408\u300d\u3063\u307d\u3044\u3082\u306e\n\n- \u914d\u5217\n  - \u8981\u7d20\u306e\u91cd\u8907\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u3042\u308a\n- \u914d\u5217\u306e\u30ad\u30fc\n  - \u91cd\u8907\u306f\u306a\u3057\u3001\u305f\u3060\u3057\u6587\u5b57\u5217\u3068\u6574\u6570\u306b\u9650\u308b\n- \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\n  - \u5272\u3068\u6700\u8fd1(PHP 5.5, 2013\u5e74)\u306b\u5165\u3063\u305f\n\n-----\n\n## \u3069\u3046\u3059\u308b\u304b\n\n- PHP\u6a19\u6e96\u6a5f\u80fd\n  - `foreach`\u3067\u30eb\u30fc\u30d7\u3092\u56de\u3059\n  - `array_map`\u3067\u914d\u5217\u8981\u7d20\u306b\u9069\u7528\u3059\u308b\n\n-----\n\n## foreach\n\n```php\nfunction x2($n) { return $n * 2; }\n\n$orig = [1, 2, 3, 5, 7, 13];\n$new = [];\nforeach ($orig as $o) {\n    $new[] = x2($o);\n}\n```\n\n\u5916\u5ef6\u7684\u7b49\u5024\u6027\u306e\u8a71\u3092\u3057\u305f\u306e\u3067\u7acb\u6d3e\u306b\u3053\u308c\u3082map\n\n-----\n\n## array_map\n\n```php\nfunction x2($n) { return $n * 2; }\n\n$orig = [1, 2, 3, 5, 7, 13];\n$new = array_map('x2', $orig);\n```\n\n- \u3061\u3063\u3061\u3083\u3044\u914d\u5217\u306a\u3089\u5225\u306b\u3053\u308c\u3067\u3044\u3044\n- \u9577\u5927\u306a\u914d\u5217\u3067\u6700\u7d42\u7684\u306b\u5168\u3066\u306e\u8981\u7d20\u3092\u5229\u7528\u3057\u306a\u3044\u5834\u5408\u3001\u7121\u99c4\u306a\u51e6\u7406\u304c\u767a\u751f\u3059\u308b\n\n-----\n\n## \u4f55\u304c\u554f\u984c\u306a\u306e\u304b\n\n- \u6a19\u6e96\u306emap\u51fd\u6570\u306f`array_map`\u3057\u304b\u306a\u3044\uff01\n- `foreach`\u3067\u66f8\u304f\u3068\u4e00\u6642\u5909\u6570\u304c\u5fc5\u8981\u3060\u3057\n- `array_map`\u306f\u914d\u5217\u306b\u3057\u304b\u5229\u7528\u3067\u304d\u306a\u3044\n    - `Traversable`\u30af\u30e9\u30b9\n    - \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\n- `function`\u3068\u304b\u3044\u3061\u3044\u3061\u5165\u529b\u3059\u308b\u306e\u306f\u3060\u308b\u3044\n\n-----\n\n### \u89e3\u6c7a\u3059\u308b\u624b\u6bb5\n\n 1. \u30a4\u30c6\u30ec\u30fc\u30bf\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\n 2. Teto\\Functools\u3092\u5c0e\u5165\u3059\u308b\n\n-----\n\n## \u30a4\u30c6\u30ec\u30fc\u30bf\u30e9\u30a4\u30d6\u30e9\u30ea\n\n- [`nikic\\iter`](https://github.com/nikic/iter)\n    - \u5358\u7d14\u306a\u30a4\u30c6\u30ec\u30fc\u30bf\u3058\u3083\u306a\u3044\u6a5f\u80fd\u3082\u5165\u3063\u3066\u308b\n- [Underbar.php](http://emonkak.github.io/underbar.php/)\n- [Ginq](https://github.com/akanehara/ginq)\n\n\u3053\u308c\u3089\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u306f\u51e6\u7406\u3092\u9045\u5ef6\u8a55\u4fa1(\u5fc5\u8981\u306b\u306a\u308b\u307e\u3067\u8a08\u7b97\u3057\u306a\u3044)\u6a5f\u80fd\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3002\n\n-----\n\n## \u3079\u3064\u306b\u81ea\u4f5c\u3057\u3066\u3082\u3044\u3044\n\n\u5de8\u4eba\u306e\u80a9\u306b\u4e57\u3063\u305f\u65b9\u304c\u826f\u3044\u306e\u3067\u63a8\u5968\u3082\u3057\u306a\u3044\n\n```php\n<?php /* tadsan@zonu.me | license WTFPL */\n\n/**\n * @param  array|\\Traversable $iter\n * @param  callable           $callback\n * @return \\Generator\n */\nfunction map($iter, callable $callback)\n{\n    foreach ($iter as $k => $v) {\n        yield $k => $callback($v);\n    }\n}\n\n/**\n * @param  array|\\Traversable $iter\n * @param  callable           $callback\n * @return \\Generator\n */\nfunction map_kv($iter, callable $callback)\n{\n    foreach ($iter as $k => $v) {\n        yield $k => $callback($k, $v);\n    }\n}\n\n/**\n * @param  array|\\Traversable $iter\n * @return array\n */\nfunction to_array($iter)\n{\n    if (is_array($iter)) {\n        return $iter;\n    }\n\n    $ary = [];\n    foreach ($iter as $i => $v) {\n        $ary[$i] = $v;\n    }\n\n    return $ary;\n}\n\n/**\n * @param  array|\\Traversable $iter\n * @param  int                $n\n * @return \\Generator\n */\nfunction take($iter, $n)\n{\n    $i = 0;\n    foreach ($iter as $x) {\n        if ($n <= $i++) { return; }\n        yield $x;\n    }\n}\n```\n\n-----\n\n## \u30a4\u30c6\u30ec\u30fc\u30bf\u3060\u3051\u3067\u306f\u89e3\u6c7a\u3057\u306a\u3044\u554f\u984c\n\n- `function`\u3063\u3066\u6253\u3064\u306e\u306f\u3084\u3063\u3071\u308a\u3060\u308b\u3044\uff01\uff01\n\n-----\n\n### \u3053\u3053\u3067\u3084\u3063\u3068\u672c\u6765\u306e\u30bf\u30a4\u30c8\u30eb\u306e\u63d0\u6848\n\n-----\n\n# \u3042\u306a\u305f\u304c\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30ca\u30ebPHP\u30e9\u30a4\u30d6\u30e9\u30eaTeto\\Functools\u3092\u63a1\u7528\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044n\u500b\u306e\u7406\u7531\n\n-----\n\n## Functools\u306e\u6a5f\u80fd\n\n- \u90e8\u5206\u9069\u7528\n- \u6f14\u7b97\u5b50\u30e9\u30c3\u30d1\u30fc\n- \u30bd\u30fc\u30c8\u51fd\u6570\u30e9\u30c3\u30d1\u30fc\n- \u7121\u540d\u518d\u5e30\n- \u30e1\u30e2\u5316\n- \u51fd\u6570\u5408\u6210 / \u30d1\u30a4\u30d7\n\n-----\n\n## Functools\u306e\u3082\u304f\u308d\u307f\n\nmap\u3092\u5229\u7528\u3059\u308b\u3068\u304d\u306b\u5168\u529b\u3067`function`\u3063\u3066\u66f8\u304b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\uff01\n\n-----\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ncomposer require zonuexe/functools\n```\n\nComposer\u3092\u8aad\u307f\u8fbc\u3080\n\n```php\n<?php\ninclude_once __DIR__ . '/vendor/autoload.php';\n```\n\n-----\n\n### \u57fa\u672c\n\nPHP\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5148\u982d\u306e\u65b9\u3067\u30af\u30e9\u30b9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3002\n\n```php\n<?php\n\nuse Teto\\Functools as f;\n```\n\n-----\n\n### \u90e8\u5206\u9069\u7528\n\n\u65e2\u5b58\u306e\u51fd\u6570\u306b\u5f15\u6570\u3092\u5f53\u3066\u306f\u3081\u305f\u72b6\u614b\u306e\u51fd\u6570\u3092\u4f5c\u308b\n\n```php\nimplode(\",\", range(1, 10));\n// \"1, 2, 3, 4, 5, 6, 7, 8, 9, 10\"\n\n$comma = f::partial(\"implode\", [\", \"]);\n$comma(range(1, 10));\n// \"1, 2, 3, 4, 5, 6, 7, 8, 9, 10\"\n```\n\n-----\n\n### \u6f14\u7b97\u5b50\u30e9\u30c3\u30d1\u30fc\n\n```php\n2 + 3;\n\n$add = f::op(\"+\");\n$add(2, 3); // (2 + 3) === 5\n\n// \u540c\u6642\u306b\u90e8\u5206\u9069\u7528\u3082\u3067\u304d\u308b\n$add_1 = f::op(\"+\", [1]);\n$add_1(4);  // (1 + 4) === 5\n```\n-----\n\n### \u8a00\u8a9e\u69cb\u9020\u30e9\u30c3\u30d1\u30fc\n\n`include`\u3084`print`\u306f\u51fd\u6570\u3058\u3083\u306a\u3044\u306e\u3067\u30b5\u30dd\u30fc\u30c8\u3002\n\n```php\narray_map(f::op('include_once'), $files);\narray_map(f::op('eval'), $codes);\n```\n\n\u2191 \u3044\u308d\u3044\u308d\u5371\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u63a8\u5968\u306f\u3057\u306a\u3044\n\n-----\n\n### \u8a00\u8a9e\u69cb\u9020\u30e9\u30c3\u30d1\u30fc\n\n```php\n// Before\n$is_odd = function ($n) { return $n % 2 == 1; };\n$odd_even = function ($n) use ($is_odd) {\n    return sprintf(\"%d: %s\", $n, $is_odd($n) ? '\u5947\u6570' : '\u5076\u6570');\n};\n// After\n$is_odd = f::compose(f::op('%', [1 => 2], 0), f::op('==', [1 => 1], 0));\n$odd_even = f::op('if', [$is_odd, f::partial('sprintf', ['%d \u5947\u6570'], 1), f::partial('sprintf', ['%d \u5076\u6570'], 1)]);\n\narray_map($odd_even, range(1, 10));\n```\n\n\u3069\u3063\u3061\u304c\u8aad\u307f\u3084\u3059\u3044\u304b\u306f\u3054\u81ea\u8eab\u3067\u5224\u65ad\u3092ry\n\n-----\n\n### sort\u30e9\u30c3\u30d1\u30fc\n\n\u914d\u5217\u30bd\u30fc\u30c8\u51fd\u6570\u306f\u4ed5\u69d8\u4e0a`map`\u3067\u304d\u306a\u3044\u306e\u3067\u3001<br>\u3044\u3044\u611f\u3058\u306b\u30e9\u30c3\u30d7\u3057\u3066\u308b\u3002\n\n```php\narray_map(f::op('ksort'), $arrays);\narray_map(f::op('sort', [1 => SORT_NUMERIC]), $arrays);\n```\n\n-----\n\n### \u7121\u540d\u518d\u5e30 (fix)\n\nHaskell\u306e\u540c\u540d\u306e\u51fd\u6570\u3092\u30b3\u30d4\u30fc\u3057\u305f\u3002\n[Haskell/\u4e0d\u52d5\u70b9\u3068\u518d\u5e30 - Wikibooks](https://ja.wikibooks.org/wiki/Haskell/%E4%B8%8D%E5%8B%95%E7%82%B9%E3%81%A8%E5%86%8D%E5%B8%B0)\n\n```php\n$fib = f::fix(function ($fib) {\n    return function ($x) use ($fib) {\n        return ($x < 2) ? 1 :\n            $fib($x - 1) + $fib($x -2);\n    };\n});\n\n$fib(6); // 13\n```\n\n-----\n\n### \u30bf\u30d7\u30eb (\u56fa\u5b9a\u500b\u306e\u5024\u306e\u7d44)\n\n\u4efb\u610f\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30fc\u306b\u3067\u304d\u308b\u3002\n\n\n```php\n$teto = f::tuple('\uff1aname',\"Teto Kasane\",'\uff1aage',31,'\uff1abirth',\"2008-04-01\",'\uff1aitem',\"Baguette\");\n$teto->pget('\uff1aname');  // \"Teto Kasane\"\n$teto->pget('\uff1aage');   // 31\n$teto->pget('\uff1abirth'); // \"2008-04-01\"\n$teto->pget('\uff1aitem');  // \"Baguette\"\n```\n\n\u5185\u90e8\u69cb\u9020\u306fimmutable\u306a\u30bb\u30eb\u306b\u3088\u308b\u9023\u7d50\u30ea\u30b9\u30c8\n\n-----\n\n### \u30ab\u30ea\u30fc\u5316\n\nPHP\u3067\u30ab\u30ea\u30fc\u5316\u304c\u9069\u5207\u306a\u5834\u9762\u306f\u7686\u7121(\u65ad\u8a00)\n\n-----\n\n### \u30e1\u30e2\u5316\n\n\u6f38\u5316\u5f0f\u306b\u306a\u308b\u3088\u3046\u306a\u5358\u7d14\u306a\u518d\u5e30\u51fd\u6570\u3092\u52b9\u7387\u3088\u304f\u30e1\u30e2\u5316\u3059\u308b\n\n```php\n// simple fibonacci function. But, very very slow.\n$fib1 = function ($n) use (&$fib1) {\n    return ($n < 2) ? $n : $fib1($n - 1) + $fib1($n - 2);\n};\n\n// simple fibonacci function too. very fast!\n$fib2 = f::memoize(function ($n) use (&$fib2) {\n    return ($n < 2) ? $n : $fib2($n - 1) + $fib2($n - 2);\n}, /*initialize=*/ [0, 1]);\n```\n\n-----\n\n### `composer require zonuexe/functools`\n\n-----\n\n### \u3044\u307e\u3059\u3050\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n", "tags": ["PHP", "\u30dd\u30a8\u30e0"]}