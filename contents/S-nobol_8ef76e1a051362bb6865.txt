{"context": "\u3000\u30b0\u30b0\u3063\u3066\u898b\u305f\u3068\u3053\u308d\u60c5\u5831\u304c\u5c11\u306a\u304b\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\u4eca\u9803android\u30a2\u30d7\u30ea\u306a\u3093\u3066\u3069\u3093\u3060\u3051\u521d\u5fc3\u8005\u306a\u3093\u3060\u3088\u3002\u3002\u3068\u306a\u308a\u307e\u3059\u304c\u8a31\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3042\u3068\u6587\u7ae0\u3092\u66f8\u304f\u306e\u304c\u4e0b\u624b\u306a\u306e\u3067\u304a\u898b\u82e6\u3057\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nwidget\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\n\u3000\u4eca\u56de\u306f\u5165\u529b\u30c6\u30ad\u30b9\u30c8\u3068\u5165\u529b\u30dc\u30bf\u30f31,2\u3068\u524a\u9664\u30dc\u30bf\u30f3DEL\u306e4\u3064\u306eView\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nnew_app_widget_test.xml\n   <RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"#ffffff\"\n    android:padding=\"@dimen/widget_margin\">\n\n    <TextView\n        android:id=\"@+id/appwidget_text\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:textColor=\"#000000\"\n        android:text=\"test\"\n        android:textSize=\"25dp\"\n        android:textStyle=\"bold|italic\" />\n\n    <Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"DEL\"\n        android:id=\"@+id/button\"\n        android:layout_below=\"@+id/appwidget_text\" />\n\n    <Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"1\"\n        android:id=\"@+id/button1\"\n        android:layout_below=\"@+id/appwidget_text\"\n        android:layout_toRightOf=\"@+id/button\"\n        android:layout_toEndOf=\"@+id/button\" />\n\n    <Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"2\"\n        android:id=\"@+id/button2\"\n        android:layout_alignTop=\"@+id/button\"\n        android:layout_toRightOf=\"@+id/button1\"\n        android:layout_toEndOf=\"@+id/button1\" />\n\n</RelativeLayout>\n\n\n\u3000\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u3067View\u3092\u8a2d\u5b9a\n\u3000\u8907\u6570\u306e\u30dc\u30bf\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u60f3\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067for\u6587\u3092\u4f7f\u3063\u3066\u3076\u3093\u56de\u3057\u3066\u3044\u307e\u3059\u3002\n\nMyservice.java\npublic class MyService extends Service {\n\n    private String text=\"\";\n\n    //\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3055\u308c\u305f\u3089\u958b\u59cb\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        int[] viewId={R.id.button,R.id.button1,R.id.button2};\n        String[] ACTION={\"0\",\"1\",\"2\"};\n\n\n        //View\u306e\u8a2d\u5b9a\n        Context con=getBaseContext();\n        RemoteViews remoteViews = new RemoteViews(this.getPackageName(), R.layout.new_app_widget_test);\n        remoteViews.setTextViewText(R.id.appwidget_text,text);//\u30c6\u30ad\u30b9\u30c8\n\n        for (int i=0;i<viewId.length; i++){\n            Intent buttonIntent1 = new Intent(con,MyService.class);\n            buttonIntent1.setAction(ACTION[i]);\n            PendingIntent pendingIntent1 = PendingIntent.getService(con, 0, buttonIntent1, 0);\n            remoteViews.setOnClickPendingIntent(viewId[i],pendingIntent1);\n        }\n\n        // AppWidget\u306e\u753b\u9762\u66f4\u65b0\n        ComponentName thisWidget = new ComponentName(MyService.this,NewAppWidget_test.class);\n        AppWidgetManager manager = AppWidgetManager.getInstance(MyService.this);\n        manager.updateAppWidget(thisWidget, remoteViews);\n\n        return super.onStartCommand(intent, flags, startId);\n    }\n\n  \u3000@Nullable\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n}\n\n\n\n\n\n\u30dc\u30bf\u30f3\u30af\u30ea\u30c3\u30af\u5f8cTextView\u306b\u53cd\u6620\n\u3000\u5165\u529b\u30dc\u30bf\u30f3\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b\u3001onStartCommand\u30e1\u30be\u30c3\u30c8\u306bSetText()\u8ffd\u52a0\u3002\u3053\u306e\u969b\u3001\u547c\u3073\u51fa\u3059\u30bf\u30a4\u30df\u30f3\u30b0\u3092View\u8a2d\u5b9a\u3088\u308a\u524d\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304b\u306a\u3044\u3068View\u306b\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002\n\nMyservice.java\n  @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        //\u8a2d\u5b9a\u306e\u5909\u66f4\u3092\u53cd\u6620\u3055\u305b\u308b\u3002\n        SetText(intent.getAction());\n        int[] viewId={R.id.button,R.id.button1,R.id.button2};\n        String[] ACTION={\"0\",\"1\",\"2\"};\n\n\u3000\u3000\u3000\u3000~~~\u4ee5\u4e0b\u7701\u7565~~~\n\n\n\u3000\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30c6\u30ad\u30b9\u30c8\u306b\u53cd\u6620\u3059\u308b\u305f\u3081\u306e\u30e1\u30be\u30c3\u30c8\u3092\u4f5c\u6210\n\nMyservice.java\n  private void SetText(String action) {\n\n        if (action!=null) {\n            //\u3082\u3057DEL\u3092\u9078\u629e\u3055\u308c\u305f\u3089\u6587\u5b57\u5217\u3092\u6d88\u3059\u3002\n            if (action==\"0\"){\n                text=\"\";\n            //\u305d\u308c\u4ee5\u5916\u306f\u6587\u5b57\u5217\u3092\u8ffd\u52a0\n            }else {\n                text=text+action;\n            }\n        }\n    }\n\n\n\n\u4ee5\u4e0a\u3067\u3046\u307e\u304f\u3044\u304f\u3044\u3063\u3066\u308b\u306f\u305a\u3067\u3059\u3002\nIntent\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u3067\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001\u30af\u30e9\u30b9\u30d5\u30a1\u30a4\u30eb\u3082\u5c11\u306a\u304f\u6574\u7406\u3082\u884c\u3044\u3084\u3059\u3044\u306e\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3092\u7528\u3044\u3066\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u30b3\u30fc\u30c9\u304c\u9577\u304f\u306a\u308b\u6642\u306f\u8106\u5f31\u6027\u304c\u9ad8\u307e\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u56de\u958b\u767a\u3057\u305f\u30a2\u30d7\u30ea\u306f\u4e0b\u306e\u30ea\u30f3\u30af\u306b\u8cbc\u3063\u3066\u304a\u304d\u307e\u3059\u3002\nGitHub-Androidwidget\u30fc\u30c6\u30b9\u30c8\u30a2\u30d7\u30ea\n\u53c2\u8003\u30b5\u30a4\u30c8\nAndroid widget\u30672\u3064\u306e\u30dc\u30bf\u30f3\u3092\u691c\u77e5\u3059\u308b\u65b9\u6cd5\n\u3000\u30b0\u30b0\u3063\u3066\u898b\u305f\u3068\u3053\u308d\u60c5\u5831\u304c\u5c11\u306a\u304b\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\u4eca\u9803android\u30a2\u30d7\u30ea\u306a\u3093\u3066\u3069\u3093\u3060\u3051\u521d\u5fc3\u8005\u306a\u3093\u3060\u3088\u3002\u3002\u3068\u306a\u308a\u307e\u3059\u304c\u8a31\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3042\u3068\u6587\u7ae0\u3092\u66f8\u304f\u306e\u304c\u4e0b\u624b\u306a\u306e\u3067\u304a\u898b\u82e6\u3057\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\n##widget\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\n\u3000\u4eca\u56de\u306f\u5165\u529b\u30c6\u30ad\u30b9\u30c8\u3068\u5165\u529b\u30dc\u30bf\u30f31,2\u3068\u524a\u9664\u30dc\u30bf\u30f3DEL\u306e4\u3064\u306eView\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n```new_app_widget_test.xml\n   <RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"#ffffff\"\n    android:padding=\"@dimen/widget_margin\">\n\n    <TextView\n        android:id=\"@+id/appwidget_text\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:textColor=\"#000000\"\n        android:text=\"test\"\n        android:textSize=\"25dp\"\n        android:textStyle=\"bold|italic\" />\n\n    <Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"DEL\"\n        android:id=\"@+id/button\"\n        android:layout_below=\"@+id/appwidget_text\" />\n\n    <Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"1\"\n        android:id=\"@+id/button1\"\n        android:layout_below=\"@+id/appwidget_text\"\n        android:layout_toRightOf=\"@+id/button\"\n        android:layout_toEndOf=\"@+id/button\" />\n\n    <Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"2\"\n        android:id=\"@+id/button2\"\n        android:layout_alignTop=\"@+id/button\"\n        android:layout_toRightOf=\"@+id/button1\"\n        android:layout_toEndOf=\"@+id/button1\" />\n\n</RelativeLayout>\n```\n\n\u3000\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u3067View\u3092\u8a2d\u5b9a\n\u3000\u8907\u6570\u306e\u30dc\u30bf\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u60f3\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067for\u6587\u3092\u4f7f\u3063\u3066\u3076\u3093\u56de\u3057\u3066\u3044\u307e\u3059\u3002\n\n```Myservice.java\npublic class MyService extends Service {\n\n    private String text=\"\";\n\n    //\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3055\u308c\u305f\u3089\u958b\u59cb\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        int[] viewId={R.id.button,R.id.button1,R.id.button2};\n        String[] ACTION={\"0\",\"1\",\"2\"};\n\n\n        //View\u306e\u8a2d\u5b9a\n        Context con=getBaseContext();\n        RemoteViews remoteViews = new RemoteViews(this.getPackageName(), R.layout.new_app_widget_test);\n        remoteViews.setTextViewText(R.id.appwidget_text,text);//\u30c6\u30ad\u30b9\u30c8\n\n        for (int i=0;i<viewId.length; i++){\n            Intent buttonIntent1 = new Intent(con,MyService.class);\n            buttonIntent1.setAction(ACTION[i]);\n            PendingIntent pendingIntent1 = PendingIntent.getService(con, 0, buttonIntent1, 0);\n            remoteViews.setOnClickPendingIntent(viewId[i],pendingIntent1);\n        }\n\n        // AppWidget\u306e\u753b\u9762\u66f4\u65b0\n        ComponentName thisWidget = new ComponentName(MyService.this,NewAppWidget_test.class);\n        AppWidgetManager manager = AppWidgetManager.getInstance(MyService.this);\n        manager.updateAppWidget(thisWidget, remoteViews);\n\n        return super.onStartCommand(intent, flags, startId);\n    }\n\n  \u3000@Nullable\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n}\n\n\n```\n    \n\n\n\n\n##\u30dc\u30bf\u30f3\u30af\u30ea\u30c3\u30af\u5f8cTextView\u306b\u53cd\u6620\n\u3000\u5165\u529b\u30dc\u30bf\u30f3\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b\u3001**onStartCommand**\u30e1\u30be\u30c3\u30c8\u306b**SetText()**\u8ffd\u52a0\u3002\u3053\u306e\u969b\u3001\u547c\u3073\u51fa\u3059\u30bf\u30a4\u30df\u30f3\u30b0\u3092View\u8a2d\u5b9a\u3088\u308a\u524d\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304b\u306a\u3044\u3068View\u306b\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002\n\n```Myservice.java\n  @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        //\u8a2d\u5b9a\u306e\u5909\u66f4\u3092\u53cd\u6620\u3055\u305b\u308b\u3002\n        SetText(intent.getAction());\n        int[] viewId={R.id.button,R.id.button1,R.id.button2};\n        String[] ACTION={\"0\",\"1\",\"2\"};\n\n\u3000\u3000\u3000\u3000~~~\u4ee5\u4e0b\u7701\u7565~~~\n```\n\n\u3000\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30c6\u30ad\u30b9\u30c8\u306b\u53cd\u6620\u3059\u308b\u305f\u3081\u306e\u30e1\u30be\u30c3\u30c8\u3092\u4f5c\u6210\n\n```Myservice.java\n  private void SetText(String action) {\n\n        if (action!=null) {\n            //\u3082\u3057DEL\u3092\u9078\u629e\u3055\u308c\u305f\u3089\u6587\u5b57\u5217\u3092\u6d88\u3059\u3002\n            if (action==\"0\"){\n                text=\"\";\n            //\u305d\u308c\u4ee5\u5916\u306f\u6587\u5b57\u5217\u3092\u8ffd\u52a0\n            }else {\n                text=text+action;\n            }\n        }\n    }\n\n```\n\n\u4ee5\u4e0a\u3067\u3046\u307e\u304f\u3044\u304f\u3044\u3063\u3066\u308b\u306f\u305a\u3067\u3059\u3002\nIntent\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u3067\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001\u30af\u30e9\u30b9\u30d5\u30a1\u30a4\u30eb\u3082\u5c11\u306a\u304f\u6574\u7406\u3082\u884c\u3044\u3084\u3059\u3044\u306e\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3092\u7528\u3044\u3066\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u30b3\u30fc\u30c9\u304c\u9577\u304f\u306a\u308b\u6642\u306f\u8106\u5f31\u6027\u304c\u9ad8\u307e\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4eca\u56de\u958b\u767a\u3057\u305f\u30a2\u30d7\u30ea\u306f\u4e0b\u306e\u30ea\u30f3\u30af\u306b\u8cbc\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n[GitHub-Androidwidget\u30fc\u30c6\u30b9\u30c8\u30a2\u30d7\u30ea](https://github.com/s-nobol/Widget_test)\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n[Android widget\u30672\u3064\u306e\u30dc\u30bf\u30f3\u3092\u691c\u77e5\u3059\u308b\u65b9\u6cd5](http://woodsmall.co.jp/android/android-widget%E3%81%A72%E3%81%A4%E3%81%AE%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%92%E6%A4%9C%E7%9F%A5%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/)\n\n", "tags": ["Android", "\u521d\u5fc3\u8005", "\u5099\u5fd8\u9332", "androidwidget"]}