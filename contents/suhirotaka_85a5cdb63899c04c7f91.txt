{"context": "\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\u81ea\u8eab\u306e\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\u89aa\u5b50\u95a2\u4fc2\u3092\u8a2d\u5b9a\u3057\u305f\u3044\u3002\nsomemodel.parent # Somemodel\nsomemodel.child # Somemodel\n\n\u3084\u3063\u3066\u307f\u308b\n\nmigration\nclass AddSelfReferenceToSomemodels < ActiveRecord::Migration[5.0]\n  def change\n    add_reference :somemodels, :parent, index: true\n  end \nend\n\n\u540c\u3058\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3057\u3066foreign key\u304c\u4f5c\u308c\u306a\u3044\u306e\u3067\u3001foreign_key: true \u3092\u6307\u5b9a\u3059\u308b\u3068DB\u5074\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u308b(postgres\u306e\u5834\u5408)\u3002integer\u578b\u306eparent_id\u30ab\u30e9\u30e0\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\nmodel\nclass Somemodel < ActiveRecord::Base\n  belongs_to :parent, :class_name => 'Somemodel'\n  has_one :child, :class_name => 'Somemodel', :foreign_key => 'parent_id'\nend\n\n\u3053\u308c\u3067\u3001somemodel.parent\u3068somemodel.child\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n##\u3084\u308a\u305f\u3044\u3053\u3068\n\u81ea\u8eab\u306e\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\u89aa\u5b50\u95a2\u4fc2\u3092\u8a2d\u5b9a\u3057\u305f\u3044\u3002\n`somemodel.parent # Somemodel`\n`somemodel.child # Somemodel`\n\n##\u3084\u3063\u3066\u307f\u308b\n\n### migration\n\n```ruby\nclass AddSelfReferenceToSomemodels < ActiveRecord::Migration[5.0]\n  def change\n    add_reference :somemodels, :parent, index: true\n  end \nend\n```\n\u540c\u3058\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3057\u3066foreign key\u304c\u4f5c\u308c\u306a\u3044\u306e\u3067\u3001foreign_key: true \u3092\u6307\u5b9a\u3059\u308b\u3068DB\u5074\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u308b(postgres\u306e\u5834\u5408)\u3002integer\u578b\u306eparent_id\u30ab\u30e9\u30e0\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n### model\n\n```ruby\nclass Somemodel < ActiveRecord::Base\n  belongs_to :parent, :class_name => 'Somemodel'\n  has_one :child, :class_name => 'Somemodel', :foreign_key => 'parent_id'\nend\n```\n\u3053\u308c\u3067\u3001`somemodel.parent`\u3068`somemodel.child`\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n", "tags": ["Ruby", "Rails", "ActiveRecord"]}