{"context": " More than 1 year has passed since last update.CoreOS \u3068\u306f\uff1f\n\nCoreOS Meetup Tokyo #1 - \u8cc7\u6599\u4e00\u89a7 - connpass : http://coreos-meetup-tokyo.connpass.com/event/12596/presentation/\n\n\nVagrant \u3067\u52d5\u304b\u3059\u305f\u3081\u306e\u6e96\u5099\n$ git clone https://github.com/coreos/coreos-vagrant/\n\n# \u8a2d\u5b9a\n$ cp user-data.sample user-data\n$ cp config.rb.sample config.rb\n\n# \u30a4\u30f3\u30b9\u30bf\u30f3\u30b93\u3064\u7528\u610f\u3059\u308b\ndiff -u config.rb.sample config.rb\n--- config.rb.sample    2015-03-30 01:01:27.000000000 +0900\n+++ config.rb   2015-03-30 01:04:24.000000000 +0900\n@@ -25,7 +25,7 @@\n # after the equals sign..\n\n # Size of the CoreOS cluster created by Vagrant\n-#$num_instances=1\n+$num_instances=3\n\n # Change basename of the VM\n # The default value is \"core\", which results in VMs named starting with\n\n# etcd \u306f\u3001\u30d5\u30ea\u30fc \u306e discovery service \u3092\u4f7f\u3046\n$ curl https://discovery.etcd.io/new\\?size\\=3\n\n$ diff -u user-data.sample user-data\n--- user-data.sample    2015-03-30 01:01:27.000000000 +0900\n+++ user-data   2015-04-12 20:28:35.000000000 +0900\n@@ -5,6 +5,7 @@\n     # generate a new token for each unique cluster from https://discovery.etcd.io/new\n     # WARNING: replace each time you 'vagrant destroy'\n     #discovery: https://discovery.etcd.io/<token>\n+    discovery: https://discovery.etcd.io/98e509e4fe7433794f3a5864e02bba79\n     addr: $public_ipv4:4001\n     peer-addr: $public_ipv4:7001\n   fleet: \n\n\n\n\u52d5\u304b\u3059\n$ vagrant up\n$ vagrant status\nCurrent machine states:\n\ncore-01                   running (virtualbox)\ncore-02                   running (virtualbox)\ncore-03                   running (virtualbox)\n\nThis environment represents multiple VMs. The VMs are all listed\nabove with their current state. For more information about a specific\nVM, run `vagrant status NAME`.\n\n\netcd, fleet \u78ba\u8a8d\n$ vagrant ssh core-01\nLast login: Mon Mar 30 14:08:49 2015 from 10.0.2.2\nCoreOS alpha (633.1.0)\ncore@core-01 ~ $\n\n# \u30af\u30e9\u30b9\u30bf\u78ba\u8a8d \ncore@core-01 ~ $ fleetctl list-machines\nMACHINE     IP      METADATA\n6dfa651c... 172.17.8.102    -\n6eef3090... 172.17.8.103    -\ne5b07b8a... 172.17.8.101    -\n\n# etcd \u307f\u3066\u307f\u308b\u3000\ncore@core-01 ~ $ etcdctl set first-etcd-key \"Hello World\"\nHello World\ncore@core-01 ~ $ etcdctl get first-etcd-key\nHello World\n\n# core-02 \u304b\u3089 get \u3057\u3066\u307f\u308b \n$ vagrant ssh core-02\nCoreOS alpha (633.1.0)\ncore@core-02 ~ $ etcdctl get first-etcd-key\nHello World\n\n# https://discovery.etcd.io/hogehogefugafugapiyopiyo \u3067\u3082\u78ba\u8a8d\u3067\u304d\u308b\n# chrome \u306a\u3089 JSONView \u3044\u308c\u3066\u304a\u304f\u3068\u3088\u3044\n\n\nfleet \u30a4\u30f3\u30b9\u30b3 (Mac)\n\nbin/fleetctl \u306f\u3001/usr/lobal/bin \u30d1\u30b9\u3068\u304a\u3057\u3066\u304a\u304f\u3068\u697d\u304b\u3082\nbrew \u3067\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u307f\u305f\u3044\n\ngit clone git@github.com:coreos/fleet.git\ncd fleet\n./build\n\n\u304b\u304f\u306b\u3093\n\nvagrant \u306b\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n$ export FLEETCTL_ENDPOINT=http://172.17.8.101:4001\n$ bin/fleetctl list-machines -l\nMACH]INE                    IP      METADATA\n0b07612e2955451e853e707627dde354    172.17.8.102    -\n7cd5b9a706904e2fa169d500700accf9    172.17.8.101    -\ncdeef8cb16e04286a8ccb3cf87b96516    172.17.8.103    -\n\n\n\u30b5\u30fc\u30d3\u30b9\uff08unit\uff09\u3092\u8ffd\u52a0\n\u30b5\u30f3\u30d7\u30eb\uff081\u79d2\u304a\u304d\u306b Hello World \u3092\u8fd4\u3059\u3082\u306e\uff09\n\nfleet/hello.service at master \u00b7 coreos/fleet : https://github.com/coreos/fleet/blob/master/examples/hello.service\n\n$ cat examples/hello.service\n[Unit]\nDescription=Hello World\n\n[Service]\nExecStart=/bin/bash -c \"while true; do echo \\\"Hello, world\\\"; sleep 1; done\"\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n$ bin/fleetctl start examples/hello.service\nUnit hello.service launched on 0b07612e.../172.17.8.102\n\n\u304b\u304f\u306b\u3093\n$ bin/fleetctl list-units\nUNIT        MACHINE             ACTIVE  SUB\nhello.service   0b07612e.../172.17.8.102    active  running\n\n\u8a73\u7d30\u304b\u304f\u306b\u3093\n$ bin/fleetctl status hello.service\nThe authenticity of host '172.17.8.102' can't be established.\nRSA key fingerprint is 2f:ea:73:22:b0:09:65:a7:53:0c:b3:e2:c1:e5:be:7c.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '172.17.8.102' (RSA) to the list of known hosts.\n\u25cf hello.service - Hello World\n   Loaded: loaded (/run/fleet/units/hello.service; linked-runtime; vendor preset: disabled)\n   Active: active (running) since Sun 2015-04-12 12:56:57 UTC; 3min 34s ago\n Main PID: 1024 (bash)\n   CGroup: /system.slice/hello.service\n           \u251c\u25001024 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\n           \u2514\u25001273 sleep 1\n\nApr 12 13:00:21 core-02 bash[1024]: Hello, world\nApr 12 13:00:22 core-02 bash[1024]: Hello, world\nApr 12 13:00:23 core-02 bash[1024]: Hello, world\nApr 12 13:00:24 core-02 bash[1024]: Hello, world\nApr 12 13:00:25 core-02 bash[1024]: Hello, world\nApr 12 13:00:26 core-02 bash[1024]: Hello, world\nApr 12 13:00:27 core-02 bash[1024]: Hello, world\nApr 12 13:00:28 core-02 bash[1024]: Hello, world\nApr 12 13:00:29 core-02 bash[1024]: Hello, world\nApr 12 13:00:30 core-02 bash[1024]: Hello, world\n\ntail -f \u30e9\u30a4\u30af\u306b\u78ba\u8a8d\n$ bin/fleetctl journal -f hello.service\n\nfleetctl \u3067\u3001\u52d5\u3044\u3066\u3044\u308b\u3068\u3053\u306b ssh \u3067\u304d\u308b (\u4eca\u56de\u306f\u3001core-02)\n$ bin/fleetctl ssh hello.service\nLast login: Sun Apr 12 13:03:12 2015 from 172.17.8.101\nCoreOS alpha (633.1.0)\n\ncore@core-02 ~ $ ps aux | grep bash\nroot      1024  0.0  0.2  14052  3032 ?        Ss   12:56   0:00 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\ncore      1735  0.0  0.3  14188  3220 pts/0    Ss   13:06   0:00 -bash\ncore      1768  0.0  0.0   4448   780 pts/0    S+   13:07   0:00 grep --colour=auto bash\n\n\nfail over\ncore-02 \u3092\u304a\u3068\u3057\u3066\u307f\u308b\n$ vagrant status\nCurrent machine states:\n\ncore-01                   running (virtualbox)\ncore-02                   running (virtualbox)\ncore-03                   running (virtualbox)\n\nThis environment represents multiple VMs. The VMs are all listed\nabove with their current state. For more information about a specific\nVM, run `vagrant status NAME`.\n\n$ vagrant halt core-02\n==> core-02: Attempting graceful shutdown of VM...\n\n$ vagrant status\nCurrent machine states:\n\ncore-01                   running (virtualbox)\ncore-02                   poweroff (virtualbox)\ncore-03                   running (virtualbox)\n\ncore-01 \u3067\u52d5\u3044\u3066\u308b\uff01\uff01\nbin/fleetctl status hello.service\n\u25cf hello.service - Hello World\n   Loaded: loaded (/run/fleet/units/hello.service; linked-runtime; vendor preset: disabled)\n   Active: active (running) since Sun 2015-04-12 13:17:40 UTC; 1min 45s ago\n Main PID: 1344 (bash)\n   CGroup: /system.slice/hello.service\n           \u251c\u25001344 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\n           \u2514\u25001483 sleep 1\n\nApr 12 13:19:16 core-01 bash[1344]: Hello, world\nApr 12 13:19:17 core-01 bash[1344]: Hello, world\nApr 12 13:19:18 core-01 bash[1344]: Hello, world\nApr 12 13:19:19 core-01 bash[1344]: Hello, world\nApr 12 13:19:20 core-01 bash[1344]: Hello, world\nApr 12 13:19:21 core-01 bash[1344]: Hello, world\nApr 12 13:19:22 core-01 bash[1344]: Hello, world\nApr 12 13:19:23 core-01 bash[1344]: Hello, world\nApr 12 13:19:24 core-01 bash[1344]: Hello, world\nApr 12 13:19:25 core-01 bash[1344]: Hello, world\n\u2601  fleet [master] bin/fleetctl ssh hello.service\nLast login: Sun Apr 12 13:19:26 2015 from 172.17.8.101\nCoreOS alpha (633.1.0)\ncore@core-01 ~ $ fleetctl status hello.service\n\u25cf hello.service - Hello World\n   Loaded: loaded (/run/fleet/units/hello.service; linked-runtime; vendor preset: disabled)\n   Active: active (running) since Sun 2015-04-12 13:17:40 UTC; 2min 10s ago\n Main PID: 1344 (bash)\n   CGroup: /system.slice/hello.service\n           \u251c\u25001344 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\n           \u2514\u25001543 sleep 1\n\nApr 12 13:19:40 core-01 bash[1344]: Hello, world\nApr 12 13:19:41 core-01 bash[1344]: Hello, world\nApr 12 13:19:42 core-01 bash[1344]: Hello, world\nApr 12 13:19:43 core-01 bash[1344]: Hello, world\nApr 12 13:19:44 core-01 bash[1344]: Hello, world\nApr 12 13:19:45 core-01 bash[1344]: Hello, world\nApr 12 13:19:46 core-01 bash[1344]: Hello, world\nApr 12 13:19:47 core-01 bash[1344]: Hello, world\nApr 12 13:19:48 core-01 bash[1344]: Hello, world\nApr 12 13:19:49 core-01 bash[1344]: Hello, world\n\n\n\u3061\u306a\n\nRaft\n\u8907\u6570\u306e\u30de\u30b7\u30f3\u9593\u3067\u5171\u6709\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u4ed5\u7d44\u307f\u3067\u306f\u3001etcd\uff08KVS\uff09\u304c\u4f7f\u308f\u308c\u3066\u3044\u3066\u3001Raft\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u304a\u3088\u3073\u305d\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u8003\u3048\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u308b\u3002CoreOS\u3092\u8abf\u3079\u3066\u3044\u304f\u3068\u5fc5\u305a\u3067\u3066\u304f\u308b\u3002\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3002\n\n\nEtcd - r7km/s : http://r7kamura.github.io/2014/02/26/etcd.html\n\nRaft : http://thesecretlivesofdata.com/raft/\n\nRaft : http://www.slideshare.net/pfi/raft-36155398\n\netcd\u7dcf\u9078\u6319\u3092\u773a\u3081\u3066\u307f\u308b - Qiita : http://qiita.com/ksato9700/items/9b44a95ce27ac23a94e1\n\n\n\n\nfleet (Unit\u30d5\u30a1\u30a4\u30eb)\n\u4eca\u56de\u306f\u3001\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u305f\u3060\u3051\u306a\u306e\u3067\u3001\u6b21\u56de\u306f\u81ea\u4f5c\u3067\u3084\u3063\u3066\u307f\u308b\u3002\n\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304f\u305f\u3081\u306b\u3082\u3001systemd \u3082\u3064\u3044\u3066\u7406\u89e3\u3057\u3066\u305f\u65b9\u304c\u3088\u3055\u305d\u3046\u3002\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3001\u96d1\u8a8c\u304c\u8a73\u3057\u3044\u3002\n\n\nFleet\u306e\u4f7f\u3044\u65b9\uff0cUnit\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u304d\u65b9 | SOTA : http://deeeet.com/writing/2014/11/20/fleet/\n\nSoftware Design 2015\u5e742\u6708\u53f7\uff5c\u6280\u8853\u8a55\u8ad6\u793e : http://gihyo.jp/magazine/SD/archive/2015/201502\n\nUnderstanding fleet // Speaker Deck : https://speakerdeck.com/spesnova/understanding-fleet\n\n\n\n\nREF\n\n\nClustering CoreOS with Vagrant : https://coreos.com/blog/coreos-clustering-with-vagrant/\n\nClustering Machines : https://coreos.com/docs/cluster-management/setup/cluster-discovery/\n\nLaunching Containers with fleet : https://coreos.com/docs/launching-containers/launching/launching-containers-fleet/\n\nDocker\u306b\u3088\u308b\u958b\u767a\u74b0\u5883\u304b\u3089\u672c\u756a\u74b0\u5883\u307e\u3067\u306e\u4e00\u8cab\u3057\u305f\u7ba1\u7406 | \u682a\u5f0f\u4f1a\u793e\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8 : https://www.cyberagent.co.jp/techinfo/techreport/report/id=9914\n\nCoreOS\u3092fleetctl\u304b\u3089\u64cd\u4f5c\u3059\u308b - Part1: --endpoint\u3068--tunnell\u30aa\u30d7\u30b7\u30e7\u30f3 // masato's blog : http://masato.github.io/2014/07/25/coreos-fleetctl-endpoint-tunnell-options/\n\n\n\n\nCoreOS \u3068\u306f\uff1f\n\n> CoreOS Meetup Tokyo #1 - \u8cc7\u6599\u4e00\u89a7 - connpass : http://coreos-meetup-tokyo.connpass.com/event/12596/presentation/\n\n## Vagrant \u3067\u52d5\u304b\u3059\u305f\u3081\u306e\u6e96\u5099\n\n```\n$ git clone https://github.com/coreos/coreos-vagrant/\n\n# \u8a2d\u5b9a\n$ cp user-data.sample user-data\n$ cp config.rb.sample config.rb\n```\n\n```\n# \u30a4\u30f3\u30b9\u30bf\u30f3\u30b93\u3064\u7528\u610f\u3059\u308b\ndiff -u config.rb.sample config.rb\n--- config.rb.sample\t2015-03-30 01:01:27.000000000 +0900\n+++ config.rb\t2015-03-30 01:04:24.000000000 +0900\n@@ -25,7 +25,7 @@\n # after the equals sign..\n\n # Size of the CoreOS cluster created by Vagrant\n-#$num_instances=1\n+$num_instances=3\n\n # Change basename of the VM\n # The default value is \"core\", which results in VMs named starting with\n```\n\n```\n# etcd \u306f\u3001\u30d5\u30ea\u30fc \u306e discovery service \u3092\u4f7f\u3046\n$ curl https://discovery.etcd.io/new\\?size\\=3\n\n$ diff -u user-data.sample user-data\n--- user-data.sample\t2015-03-30 01:01:27.000000000 +0900\n+++ user-data\t2015-04-12 20:28:35.000000000 +0900\n@@ -5,6 +5,7 @@\n     # generate a new token for each unique cluster from https://discovery.etcd.io/new\n     # WARNING: replace each time you 'vagrant destroy'\n     #discovery: https://discovery.etcd.io/<token>\n+    discovery: https://discovery.etcd.io/98e509e4fe7433794f3a5864e02bba79\n     addr: $public_ipv4:4001\n     peer-addr: $public_ipv4:7001\n   fleet: \n\n```\n\n## \u52d5\u304b\u3059\n\n```\n$ vagrant up\n$ vagrant status\nCurrent machine states:\n\ncore-01                   running (virtualbox)\ncore-02                   running (virtualbox)\ncore-03                   running (virtualbox)\n\nThis environment represents multiple VMs. The VMs are all listed\nabove with their current state. For more information about a specific\nVM, run `vagrant status NAME`.\n```\n\n## etcd, fleet \u78ba\u8a8d\n\n```\n$ vagrant ssh core-01\nLast login: Mon Mar 30 14:08:49 2015 from 10.0.2.2\nCoreOS alpha (633.1.0)\ncore@core-01 ~ $\n\n# \u30af\u30e9\u30b9\u30bf\u78ba\u8a8d \ncore@core-01 ~ $ fleetctl list-machines\nMACHINE\t\tIP\t\tMETADATA\n6dfa651c...\t172.17.8.102\t-\n6eef3090...\t172.17.8.103\t-\ne5b07b8a...\t172.17.8.101\t-\n\n# etcd \u307f\u3066\u307f\u308b\u3000\ncore@core-01 ~ $ etcdctl set first-etcd-key \"Hello World\"\nHello World\ncore@core-01 ~ $ etcdctl get first-etcd-key\nHello World\n\n# core-02 \u304b\u3089 get \u3057\u3066\u307f\u308b \n$ vagrant ssh core-02\nCoreOS alpha (633.1.0)\ncore@core-02 ~ $ etcdctl get first-etcd-key\nHello World\n\n# https://discovery.etcd.io/hogehogefugafugapiyopiyo \u3067\u3082\u78ba\u8a8d\u3067\u304d\u308b\n# chrome \u306a\u3089 JSONView \u3044\u308c\u3066\u304a\u304f\u3068\u3088\u3044\n```\n\n## fleet \u30a4\u30f3\u30b9\u30b3 (Mac)\n\n- bin/fleetctl \u306f\u3001/usr/lobal/bin \u30d1\u30b9\u3068\u304a\u3057\u3066\u304a\u304f\u3068\u697d\u304b\u3082\n- brew \u3067\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u307f\u305f\u3044\n\n```\ngit clone git@github.com:coreos/fleet.git\ncd fleet\n./build\n```\n\n\u304b\u304f\u306b\u3093\n\n- vagrant \u306b\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n```\n$ export FLEETCTL_ENDPOINT=http://172.17.8.101:4001\n$ bin/fleetctl list-machines -l\nMACH]INE\t\t\t\t\tIP\t\tMETADATA\n0b07612e2955451e853e707627dde354\t172.17.8.102\t-\n7cd5b9a706904e2fa169d500700accf9\t172.17.8.101\t-\ncdeef8cb16e04286a8ccb3cf87b96516\t172.17.8.103\t-\n```\n\n## \u30b5\u30fc\u30d3\u30b9\uff08unit\uff09\u3092\u8ffd\u52a0\n\n\u30b5\u30f3\u30d7\u30eb\uff081\u79d2\u304a\u304d\u306b Hello World \u3092\u8fd4\u3059\u3082\u306e\uff09\n> fleet/hello.service at master \u00b7 coreos/fleet : https://github.com/coreos/fleet/blob/master/examples/hello.service\n\n\n```\n$ cat examples/hello.service\n[Unit]\nDescription=Hello World\n\n[Service]\nExecStart=/bin/bash -c \"while true; do echo \\\"Hello, world\\\"; sleep 1; done\"\n```\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\n```\n$ bin/fleetctl start examples/hello.service\nUnit hello.service launched on 0b07612e.../172.17.8.102\n```\n\n\u304b\u304f\u306b\u3093\n\n```\n$ bin/fleetctl list-units\nUNIT\t\tMACHINE\t\t\t\tACTIVE\tSUB\nhello.service\t0b07612e.../172.17.8.102\tactive\trunning\n```\n\n\u8a73\u7d30\u304b\u304f\u306b\u3093\n\n```\n$ bin/fleetctl status hello.service\nThe authenticity of host '172.17.8.102' can't be established.\nRSA key fingerprint is 2f:ea:73:22:b0:09:65:a7:53:0c:b3:e2:c1:e5:be:7c.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '172.17.8.102' (RSA) to the list of known hosts.\n\u25cf hello.service - Hello World\n   Loaded: loaded (/run/fleet/units/hello.service; linked-runtime; vendor preset: disabled)\n   Active: active (running) since Sun 2015-04-12 12:56:57 UTC; 3min 34s ago\n Main PID: 1024 (bash)\n   CGroup: /system.slice/hello.service\n           \u251c\u25001024 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\n           \u2514\u25001273 sleep 1\n\nApr 12 13:00:21 core-02 bash[1024]: Hello, world\nApr 12 13:00:22 core-02 bash[1024]: Hello, world\nApr 12 13:00:23 core-02 bash[1024]: Hello, world\nApr 12 13:00:24 core-02 bash[1024]: Hello, world\nApr 12 13:00:25 core-02 bash[1024]: Hello, world\nApr 12 13:00:26 core-02 bash[1024]: Hello, world\nApr 12 13:00:27 core-02 bash[1024]: Hello, world\nApr 12 13:00:28 core-02 bash[1024]: Hello, world\nApr 12 13:00:29 core-02 bash[1024]: Hello, world\nApr 12 13:00:30 core-02 bash[1024]: Hello, world\n```\n\ntail -f \u30e9\u30a4\u30af\u306b\u78ba\u8a8d\n\n```\n$ bin/fleetctl journal -f hello.service\n```\n\nfleetctl \u3067\u3001\u52d5\u3044\u3066\u3044\u308b\u3068\u3053\u306b ssh \u3067\u304d\u308b (\u4eca\u56de\u306f\u3001core-02)\n\n```\n$ bin/fleetctl ssh hello.service\nLast login: Sun Apr 12 13:03:12 2015 from 172.17.8.101\nCoreOS alpha (633.1.0)\n\ncore@core-02 ~ $ ps aux | grep bash\nroot      1024  0.0  0.2  14052  3032 ?        Ss   12:56   0:00 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\ncore      1735  0.0  0.3  14188  3220 pts/0    Ss   13:06   0:00 -bash\ncore      1768  0.0  0.0   4448   780 pts/0    S+   13:07   0:00 grep --colour=auto bash\n```\n\n## fail over\n\ncore-02 \u3092\u304a\u3068\u3057\u3066\u307f\u308b\n\n```\n$ vagrant status\nCurrent machine states:\n\ncore-01                   running (virtualbox)\ncore-02                   running (virtualbox)\ncore-03                   running (virtualbox)\n\nThis environment represents multiple VMs. The VMs are all listed\nabove with their current state. For more information about a specific\nVM, run `vagrant status NAME`.\n\n$ vagrant halt core-02\n==> core-02: Attempting graceful shutdown of VM...\n\n$ vagrant status\nCurrent machine states:\n\ncore-01                   running (virtualbox)\ncore-02                   poweroff (virtualbox)\ncore-03                   running (virtualbox)\n```\n\n\ncore-01 \u3067\u52d5\u3044\u3066\u308b\uff01\uff01\n\n```\nbin/fleetctl status hello.service\n\u25cf hello.service - Hello World\n   Loaded: loaded (/run/fleet/units/hello.service; linked-runtime; vendor preset: disabled)\n   Active: active (running) since Sun 2015-04-12 13:17:40 UTC; 1min 45s ago\n Main PID: 1344 (bash)\n   CGroup: /system.slice/hello.service\n           \u251c\u25001344 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\n           \u2514\u25001483 sleep 1\n\nApr 12 13:19:16 core-01 bash[1344]: Hello, world\nApr 12 13:19:17 core-01 bash[1344]: Hello, world\nApr 12 13:19:18 core-01 bash[1344]: Hello, world\nApr 12 13:19:19 core-01 bash[1344]: Hello, world\nApr 12 13:19:20 core-01 bash[1344]: Hello, world\nApr 12 13:19:21 core-01 bash[1344]: Hello, world\nApr 12 13:19:22 core-01 bash[1344]: Hello, world\nApr 12 13:19:23 core-01 bash[1344]: Hello, world\nApr 12 13:19:24 core-01 bash[1344]: Hello, world\nApr 12 13:19:25 core-01 bash[1344]: Hello, world\n\u2601  fleet [master] bin/fleetctl ssh hello.service\nLast login: Sun Apr 12 13:19:26 2015 from 172.17.8.101\nCoreOS alpha (633.1.0)\ncore@core-01 ~ $ fleetctl status hello.service\n\u25cf hello.service - Hello World\n   Loaded: loaded (/run/fleet/units/hello.service; linked-runtime; vendor preset: disabled)\n   Active: active (running) since Sun 2015-04-12 13:17:40 UTC; 2min 10s ago\n Main PID: 1344 (bash)\n   CGroup: /system.slice/hello.service\n           \u251c\u25001344 /bin/bash -c while true; do echo \"Hello, world\"; sleep 1; done\n           \u2514\u25001543 sleep 1\n\nApr 12 13:19:40 core-01 bash[1344]: Hello, world\nApr 12 13:19:41 core-01 bash[1344]: Hello, world\nApr 12 13:19:42 core-01 bash[1344]: Hello, world\nApr 12 13:19:43 core-01 bash[1344]: Hello, world\nApr 12 13:19:44 core-01 bash[1344]: Hello, world\nApr 12 13:19:45 core-01 bash[1344]: Hello, world\nApr 12 13:19:46 core-01 bash[1344]: Hello, world\nApr 12 13:19:47 core-01 bash[1344]: Hello, world\nApr 12 13:19:48 core-01 bash[1344]: Hello, world\nApr 12 13:19:49 core-01 bash[1344]: Hello, world\n```\n\n## \u3061\u306a\n\n### Raft\n\u8907\u6570\u306e\u30de\u30b7\u30f3\u9593\u3067\u5171\u6709\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u4ed5\u7d44\u307f\u3067\u306f\u3001etcd\uff08KVS\uff09\u304c\u4f7f\u308f\u308c\u3066\u3044\u3066\u3001Raft\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u304a\u3088\u3073\u305d\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u8003\u3048\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u308b\u3002CoreOS\u3092\u8abf\u3079\u3066\u3044\u304f\u3068\u5fc5\u305a\u3067\u3066\u304f\u308b\u3002\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3002\n\n>\n- Etcd - r7km/s : http://r7kamura.github.io/2014/02/26/etcd.html\n- Raft : http://thesecretlivesofdata.com/raft/\n- Raft : http://www.slideshare.net/pfi/raft-36155398\n- etcd\u7dcf\u9078\u6319\u3092\u773a\u3081\u3066\u307f\u308b - Qiita : http://qiita.com/ksato9700/items/9b44a95ce27ac23a94e1\n\n### fleet (Unit\u30d5\u30a1\u30a4\u30eb)\n\u4eca\u56de\u306f\u3001\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u305f\u3060\u3051\u306a\u306e\u3067\u3001\u6b21\u56de\u306f\u81ea\u4f5c\u3067\u3084\u3063\u3066\u307f\u308b\u3002\n\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304f\u305f\u3081\u306b\u3082\u3001systemd \u3082\u3064\u3044\u3066\u7406\u89e3\u3057\u3066\u305f\u65b9\u304c\u3088\u3055\u305d\u3046\u3002\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3001\u96d1\u8a8c\u304c\u8a73\u3057\u3044\u3002\n\n> \n- Fleet\u306e\u4f7f\u3044\u65b9\uff0cUnit\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u304d\u65b9 | SOTA : http://deeeet.com/writing/2014/11/20/fleet/\n- Software Design 2015\u5e742\u6708\u53f7\uff5c\u6280\u8853\u8a55\u8ad6\u793e : http://gihyo.jp/magazine/SD/archive/2015/201502\n- Understanding fleet // Speaker Deck : https://speakerdeck.com/spesnova/understanding-fleet\n\n## REF\n> \n- Clustering CoreOS with Vagrant : https://coreos.com/blog/coreos-clustering-with-vagrant/\n- Clustering Machines : https://coreos.com/docs/cluster-management/setup/cluster-discovery/\n- Launching Containers with fleet : https://coreos.com/docs/launching-containers/launching/launching-containers-fleet/\n- Docker\u306b\u3088\u308b\u958b\u767a\u74b0\u5883\u304b\u3089\u672c\u756a\u74b0\u5883\u307e\u3067\u306e\u4e00\u8cab\u3057\u305f\u7ba1\u7406 | \u682a\u5f0f\u4f1a\u793e\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8 : https://www.cyberagent.co.jp/techinfo/techreport/report/id=9914\n- CoreOS\u3092fleetctl\u304b\u3089\u64cd\u4f5c\u3059\u308b - Part1: --endpoint\u3068--tunnell\u30aa\u30d7\u30b7\u30e7\u30f3 // masato's blog : http://masato.github.io/2014/07/25/coreos-fleetctl-endpoint-tunnell-options/\n", "tags": ["vagrant", "fleet", "etcd", "CoreOS", "docker"]}