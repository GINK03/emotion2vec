{"context": "Django \u751f\u30af\u30a8\u30ea\u306e\u767a\u884c\u3092\u691c\u8a0e\u3059\u308b\u3053\u3068\u304c\u3042\u3063\u305f\u3002\n\u4f8b\u3048\u3070 SELECT \u3084 WHERE \u3067\u30ab\u30e9\u30e0\u6307\u5b9a\u3058\u3083\u306a\u304f\u3066\u3001\u30ab\u30e9\u30e0\u3092\u5143\u306b\u8a08\u7b97\u3057\u305f\u7d50\u679c\u3068\u304b\u3092\u4f7f\u3044\u305f\u3044\u3001\u307f\u305f\u3044\u306a\u5834\u5408\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067\u56f0\u3063\u305f\u3002\n\n\u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u304c\u306a\u3044\uff01 \n\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u306f\u3042\u308b\u3063\u307d\u3044\uff01\n\u3067\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306e\u306f PostgreSQL\uff1f \u2192 \u4f7f\u3063\u3066\u3044\u308b\u306e\u306f MySQL\uff01\n\n\u3042\u3001ORM \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b raw \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u2026\u3048\u30fc\u3068\u3001\nentities = Entity.objects.raw(\"SELECT concat_ws(',', id, name) AS mystr FROM entities WHERE name IN %s\", params=(list(names),))\n\n\u3067\u3044\u3044\u306e\uff1f \u3067\u3082 IN \u306b\u6307\u5b9a\u3057\u3066\u3044\u308b\u30ea\u30b9\u30c8\u304c\u901a\u3089\u306a\u3044\u3002\u3046\u30fc\u3093\u3001\nhttps://docs.djangoproject.com/ja/1.9/ref/models/expressions/#raw-sql-expressions\n\u3067\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u2026\n\u3067\u3001\u3082\u3046\u5c11\u3057\u63a2\u3059\u3068\u3053\u3046\u3044\u3046\u306e\u304c\u3042\u3063\u305f\u3002\nhttps://docs.djangoproject.com/ja/1.9/ref/models/querysets/#django.db.models.query.QuerySet.extra\n\u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u3053\u3093\u306a\nentities = Entity.objects.extra(\n    select={'mystr': \"concat_ws(',', id, name)\"},\n    where=['name IN %s'],\n    params=[list(names)]\n)\n\n\u611f\u3058\u3067\u3001\u751f\u3088\u308a\u3082\u3046\u3061\u3087\u3063\u3068\u30de\u30b7\u306b\u66f8\u3051\u308b\u3063\u307d\u3044\u3002\n\u305f\u3060\u3057\u2026\uff01\n\nUse this method as a last resort\nThis is an old API that we aim to deprecate at some point in the future. Use it only if you cannot express your query using other queryset methods.\n\n\u3068\u3042\u308b\u306e\u3067\u3001\u4f7f\u308f\u306a\u3044\u65b9\u304c\u3088\u3044\u306e\u304b\u3082\u2026\nhttps://docs.djangoproject.com/ja/1.9/ref/models/expressions/#raw-sql-expressions\n\u3092\u4f7f\u3046\u307b\u3046\u304c\u3088\u3055\u305d\u3046\n\nDjango \u751f\u30af\u30a8\u30ea\u306e\u767a\u884c\u3092\u691c\u8a0e\u3059\u308b\u3053\u3068\u304c\u3042\u3063\u305f\u3002\n\n\u4f8b\u3048\u3070 SELECT \u3084 WHERE \u3067\u30ab\u30e9\u30e0\u6307\u5b9a\u3058\u3083\u306a\u304f\u3066\u3001\u30ab\u30e9\u30e0\u3092\u5143\u306b\u8a08\u7b97\u3057\u305f\u7d50\u679c\u3068\u304b\u3092\u4f7f\u3044\u305f\u3044\u3001\u307f\u305f\u3044\u306a\u5834\u5408\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u56f0\u3063\u305f\u3002\n\n- \u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u304c\u306a\u3044\uff01 \n- \u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u306f\u3042\u308b\u3063\u307d\u3044\uff01\n- \u3067\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306e\u306f PostgreSQL\uff1f \u2192 \u4f7f\u3063\u3066\u3044\u308b\u306e\u306f MySQL\uff01\n\n\u3042\u3001ORM \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b raw \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u2026\u3048\u30fc\u3068\u3001\n\n```py3\nentities = Entity.objects.raw(\"SELECT concat_ws(',', id, name) AS mystr FROM entities WHERE name IN %s\", params=(list(names),))\n```\n\n\u3067\u3044\u3044\u306e\uff1f \u3067\u3082 IN \u306b\u6307\u5b9a\u3057\u3066\u3044\u308b\u30ea\u30b9\u30c8\u304c\u901a\u3089\u306a\u3044\u3002\u3046\u30fc\u3093\u3001\n\nhttps://docs.djangoproject.com/ja/1.9/ref/models/expressions/#raw-sql-expressions\n\n\u3067\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u2026\n\n\u3067\u3001\u3082\u3046\u5c11\u3057\u63a2\u3059\u3068\u3053\u3046\u3044\u3046\u306e\u304c\u3042\u3063\u305f\u3002\n\nhttps://docs.djangoproject.com/ja/1.9/ref/models/querysets/#django.db.models.query.QuerySet.extra\n\n\u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u3053\u3093\u306a\n\n```py3\nentities = Entity.objects.extra(\n    select={'mystr': \"concat_ws(',', id, name)\"},\n    where=['name IN %s'],\n    params=[list(names)]\n)\n```\n\n\u611f\u3058\u3067\u3001\u751f\u3088\u308a\u3082\u3046\u3061\u3087\u3063\u3068\u30de\u30b7\u306b\u66f8\u3051\u308b\u3063\u307d\u3044\u3002\n\n\u305f\u3060\u3057\u2026\uff01\n\n> **Use this method as a last resort**\n>\n> This is an old API that we aim to deprecate at some point in the future. Use it only if you cannot express your query using other queryset methods.\n\n\u3068\u3042\u308b\u306e\u3067\u3001\u4f7f\u308f\u306a\u3044\u65b9\u304c\u3088\u3044\u306e\u304b\u3082\u2026\n\nhttps://docs.djangoproject.com/ja/1.9/ref/models/expressions/#raw-sql-expressions\n\n\u3092\u4f7f\u3046\u307b\u3046\u304c\u3088\u3055\u305d\u3046\n", "tags": ["Django", "Python", "SQL", "DB", "ORM"]}