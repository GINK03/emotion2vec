{"context": " More than 1 year has passed since last update.\nrequire 'active_merchant'\nrequire 'pp'\n\ncurrency = 'USD'\n\ngateway = ActiveMerchant::Billing::WorldpayGateway.new(\n  :login => 'YOUR_MERCHANT_ID',\n  :password => 'YOUR_XML_PASSWORD',\n  :test => true,\n)\n\nmoney = 100\n\n\ncredit_card = ActiveMerchant::Billing::CreditCard.new(\n  :number             => \"4444333322221111\",\n  :month              => \"12\",\n  :year               => Time.now.year + 1,\n  :brand              => :visa,\n  :first_name         => 'first',\n  :last_name          => 'last',\n)\n\norder_id = 'label-' + Time.now.to_i.to_s\n\n\n\n# 1. authorization\nresponse1 = gateway.authorize(money, credit_card, {\n  :order_id => order_id,\n  :currency => currency,\n})\n\npp response1\n\n\n# 2. capture\n#response2 = gateway.capture(money, response1.authorization, {\n#  :authorization_validated => true, # avoid order status query\n#})\n#pp response2\n\n# 3. void\n#response3 = gateway.void(response1.authorization)\n#pp response3\n\n\n# 4. Reccuring payment (payAsOrder)\n# Specify initial order_id instead of credit card comparing to the 1st payment.\nsubsequent_order_id = 'label-subsequent-' + Time.now.to_i.to_s\nresponse4 = gateway.authorize(money, order_id, {\n  :order_id => subsequent_order_id,\n  :currency => currency,\n})\n\npp response4\n\n\n\nquoted from\nhttp://matsu.teraren.com/blog/2014/02/25/worldpay-activemerchant/\n```rb\n\nrequire 'active_merchant'\nrequire 'pp'\n \ncurrency = 'USD'\n \ngateway = ActiveMerchant::Billing::WorldpayGateway.new(\n  :login => 'YOUR_MERCHANT_ID',\n  :password => 'YOUR_XML_PASSWORD',\n  :test => true,\n)\n \nmoney = 100\n \n \ncredit_card = ActiveMerchant::Billing::CreditCard.new(\n  :number             => \"4444333322221111\",\n  :month              => \"12\",\n  :year               => Time.now.year + 1,\n  :brand              => :visa,\n  :first_name         => 'first',\n  :last_name          => 'last',\n)\n \norder_id = 'label-' + Time.now.to_i.to_s\n \n \n \n# 1. authorization\nresponse1 = gateway.authorize(money, credit_card, {\n  :order_id => order_id,\n  :currency => currency,\n})\n \npp response1\n \n \n# 2. capture\n#response2 = gateway.capture(money, response1.authorization, {\n#  :authorization_validated => true, # avoid order status query\n#})\n#pp response2\n \n# 3. void\n#response3 = gateway.void(response1.authorization)\n#pp response3\n \n \n# 4. Reccuring payment (payAsOrder)\n# Specify initial order_id instead of credit card comparing to the 1st payment.\nsubsequent_order_id = 'label-subsequent-' + Time.now.to_i.to_s\nresponse4 = gateway.authorize(money, order_id, {\n  :order_id => subsequent_order_id,\n  :currency => currency,\n})\n \npp response4\n\n\n```\n\n\nquoted from\nhttp://matsu.teraren.com/blog/2014/02/25/worldpay-activemerchant/\n", "tags": ["ActiveMerchant", "Ruby", "WorldPay", "Gem"]}