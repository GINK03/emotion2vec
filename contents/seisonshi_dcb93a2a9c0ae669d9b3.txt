{"tags": ["mysql5.6"], "context": " More than 1 year has passed since last update.\u53c2\u8003\u8a18\u4e8b\nmysql\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\n\u30a8\u30e9\u30fc\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308b\u3068\u304a\u3082\u3044\u307e\u3059\u3002\nERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)\n\n1.mysql server\u306e\u505c\u6b62\nmysql.server stop\nMySQL\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3068\u505c\u6b62\nmysql.server start\nmysql.server stop\n\u30d7\u30ed\u30bb\u30b9\u306e\u78ba\u8a8d\nps ax | grep mysql\n\u3053\u3053\u3067\u6b62\u307e\u3063\u3066\u306a\u304b\u3063\u305f\u3089\u3001kill\u30b3\u30de\u30f3\u30c9\u3067\u3068\u3081\u307e\u3059\u3002\n\u30d7\u30ed\u30bb\u30b9\u505c\u6b62\nkill (PID)\n\u30d7\u30ed\u30bb\u30b9\u5f37\u5236\u505c\u6b62\nkill -9 (PID)\n(-9)\u306f\u9001\u4fe1\u3059\u308b\u30b7\u30b0\u30ca\u30eb\u306e\u6307\u5b9a\n9 \u3082\u3057\u304f\u306f SIGKILL \u3092\u6307\u5b9a\n\n2.mysql_safe\u3067\u8d77\u52d5\nmysqld_safe --skip-grant-tables\n--skip-grant-tables\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066\n\n\u901a\u5e38\u306e\u8d77\u52d5\u3067\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u306f mysql.plugins \u30b7\u30b9\u30c6\u30e0\u5909\u6570\u3092\u8aad\u307f\u53d6\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u30ed\u30fc\u30c9\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5224\u5225\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u304c --skip-grant-tables \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u8d77\u52d5\u3055\u308c\u305f\u5834\u5408\u3001\u30b5\u30fc\u30d0\u30fc\u306f mysql.plugins \u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u305b\u305a\u3001\u305d\u3053\u306b\u30ea\u30b9\u30c8\u3055\u308c\u3066\u3044\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30ed\u30fc\u30c9\u3057\u307e\u305b\u3093\u3002--plugin-load \u306b\u3088\u308a\u3001--skip-grant-tables \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3067\u3082\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30ed\u30fc\u30c9\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002--plugin-load \u306f\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5b9f\u884c\u6642\u306b\u30ed\u30fc\u30c9\u3067\u304d\u306a\u3044\u69cb\u6210\u3067\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8d77\u52d5\u6642\u306b\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\n3.root\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\nmysql -u root\n\n4.\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a\nuse mysql;\nupdate user set password=PASSWORD(\"\u3053\u3053\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a18\u8ff0\") where User='root';\nflush privileges;\n\n5.mysql\u30b5\u30fc\u30d0\u30fc\u306e\u518d\u8d77\u52d5\nmysql.server stop\nmysql.server start\n\u4ee5\u4e0a\u3067\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u304a\u307e\u3051\n\u4eca\u56de\u306fpostgres\u3067\u4f5c\u3063\u3066\u3044\u3066\u9014\u4e2d\u3067mysql\u306b\u5909\u66f4\u3057\u305f\u306e\u3067\u3059\u304c\u3001\n\u305d\u306e\u969b\u306bdevise\u306emigrate\u30d5\u30a1\u30a4\u30eb\u3067\u30a8\u30e9\u30fc\u304c\u3067\u307e\u3057\u305f\u3002\ndevise/lib/generators/active_record/devise_generator.rb\n\ndevise/lib/generators/active_record/devise_generator.rb\n ## Trackable\n      t.integer  :sign_in_count, default: 0, null: false\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.#{ip_column} :current_sign_in_ip # \u3053\u3053\u304c\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u7b87\u6240\u3067\u3059\u3002\n      t.#{ip_column} :last_sign_in_ip    # postgres\u3067\u306finet,mysql\u3067\u306fstring\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\n~\u4e2d\u7565\n\n      def ip_column\n        # Padded with spaces so it aligns nicely with the rest of the columns.\n        \"%-8s\" % (inet? ? \"inet\" : \"string\")\n      end\n\n      def inet?\n        postgresql?\n      end\n\n      def rails5?\n        Rails.version.start_with? '5'\n      end\n\n      def postgresql?\n        config = ActiveRecord::Base.configurations[Rails.env]\n        config && config['adapter'] == 'postgresql'\n      end\n\n\n\n\u53c2\u8003\u8a18\u4e8b\n[mysql\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://dev.mysql.com/doc/)\n\n\u30a8\u30e9\u30fc\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308b\u3068\u304a\u3082\u3044\u307e\u3059\u3002\nERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)\n\n## 1.mysql server\u306e\u505c\u6b62\n`mysql.server stop`\n\nMySQL\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3068\u505c\u6b62\n`mysql.server start\nmysql.server stop`\n\n\u30d7\u30ed\u30bb\u30b9\u306e\u78ba\u8a8d\n`ps ax | grep mysql`\n\u3053\u3053\u3067\u6b62\u307e\u3063\u3066\u306a\u304b\u3063\u305f\u3089\u3001kill\u30b3\u30de\u30f3\u30c9\u3067\u3068\u3081\u307e\u3059\u3002\n\n\u30d7\u30ed\u30bb\u30b9\u505c\u6b62\nkill (PID)\n\u30d7\u30ed\u30bb\u30b9\u5f37\u5236\u505c\u6b62\nkill -9 (PID)\n(-9)\u306f\u9001\u4fe1\u3059\u308b\u30b7\u30b0\u30ca\u30eb\u306e\u6307\u5b9a\n9 \u3082\u3057\u304f\u306f SIGKILL \u3092\u6307\u5b9a\n\n## 2.mysql_safe\u3067\u8d77\u52d5\n`mysqld_safe --skip-grant-tables`\n\n[--skip-grant-tables\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066](https://dev.mysql.com/doc/refman/5.6/ja/server-options.html)\n>\u901a\u5e38\u306e\u8d77\u52d5\u3067\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u306f mysql.plugins \u30b7\u30b9\u30c6\u30e0\u5909\u6570\u3092\u8aad\u307f\u53d6\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u30ed\u30fc\u30c9\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5224\u5225\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u304c --skip-grant-tables \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u8d77\u52d5\u3055\u308c\u305f\u5834\u5408\u3001\u30b5\u30fc\u30d0\u30fc\u306f mysql.plugins \u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u305b\u305a\u3001\u305d\u3053\u306b\u30ea\u30b9\u30c8\u3055\u308c\u3066\u3044\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30ed\u30fc\u30c9\u3057\u307e\u305b\u3093\u3002--plugin-load \u306b\u3088\u308a\u3001--skip-grant-tables \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3067\u3082\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30ed\u30fc\u30c9\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002--plugin-load \u306f\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5b9f\u884c\u6642\u306b\u30ed\u30fc\u30c9\u3067\u304d\u306a\u3044\u69cb\u6210\u3067\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8d77\u52d5\u6642\u306b\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n## 3.root\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\n`mysql -u root`\n\n## 4.\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a\n`use mysql;`\n`update user set password=PASSWORD(\"\u3053\u3053\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a18\u8ff0\") where User='root';`\n`flush privileges;`\n\n## 5.mysql\u30b5\u30fc\u30d0\u30fc\u306e\u518d\u8d77\u52d5\n`mysql.server stop\nmysql.server start`\n\n\u4ee5\u4e0a\u3067\u3067\u304d\u307e\u3057\u305f\u3002\n\n## \u304a\u307e\u3051\n\u4eca\u56de\u306fpostgres\u3067\u4f5c\u3063\u3066\u3044\u3066\u9014\u4e2d\u3067mysql\u306b\u5909\u66f4\u3057\u305f\u306e\u3067\u3059\u304c\u3001\n\u305d\u306e\u969b\u306bdevise\u306emigrate\u30d5\u30a1\u30a4\u30eb\u3067\u30a8\u30e9\u30fc\u304c\u3067\u307e\u3057\u305f\u3002\n\n[devise/lib/generators/active_record/devise_generator.rb](https://github.com/plataformatec/devise/blob/dd5de829c944dd955e4b35074c60798c3ad4b947/lib/generators/active_record/devise_generator.rb)\n\n```text:devise/lib/generators/active_record/devise_generator.rb\n ## Trackable\n      t.integer  :sign_in_count, default: 0, null: false\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.#{ip_column} :current_sign_in_ip # \u3053\u3053\u304c\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u7b87\u6240\u3067\u3059\u3002\n      t.#{ip_column} :last_sign_in_ip    # postgres\u3067\u306finet,mysql\u3067\u306fstring\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\n~\u4e2d\u7565\n\n      def ip_column\n        # Padded with spaces so it aligns nicely with the rest of the columns.\n        \"%-8s\" % (inet? ? \"inet\" : \"string\")\n      end\n\n      def inet?\n        postgresql?\n      end\n\n      def rails5?\n        Rails.version.start_with? '5'\n      end\n\n      def postgresql?\n        config = ActiveRecord::Base.configurations[Rails.env]\n        config && config['adapter'] == 'postgresql'\n      end\n\n```\n\n"}