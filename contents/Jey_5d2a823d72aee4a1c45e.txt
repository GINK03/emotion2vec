{"context": "reactjs\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u69cb\u7bc9\u3057\u305f\u969b\u3001\nproduction\u74b0\u5883\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u898b\u636e\u3048\u3066webpack\u5468\u308a\u306e\u8a2d\u5b9a\u3092\u898b\u76f4\u3057\u305f\u306e\u3067\n\u305d\u308c\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\nwebpack.config.js\u306e\u30ea\u30cd\u30fc\u30e0\nwebpack.config\u3067babel\u306a\u30b3\u30fc\u30c9\u304c\u66f8\u304d\u305f\u304b\u3063\u305f\u306e\u3067\u30ea\u30cd\u30fc\u30e0\n\u3042\u308f\u305b\u3066\u3001const\u3058\u3083\u306a\u304f\u3066\u3001import\u3067\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u5909\u66f4\n\n\u30ea\u30cd\u30fc\u30e0 & \u66f8\u304d\u63db\u3048\n% mv webpack.config.js webpack.config.babel.js\n\n// before\nconst webpack = require('webpack');\n\n// after\nimport webpack from 'webpack';\n\n\nwebpack-merge\nwebpack-merge\nwebpack.config\u3092\u30de\u30fc\u30b8\u3059\u308b\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3002\n\u5171\u901a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u74b0\u5883\u5225\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30fc\u30b8\u3059\u308b\u307f\u305f\u3044\u306a\u7528\u9014\u3067\u5229\u7528\u3059\u308b\u3002\n\u74b0\u5883\u5225\u3067webpack.config\u3092\u304b\u304d\u5206\u3051\u305f\u3044\u3002\n\u624b\u52d5\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306edeep merge\u3059\u308b\u306e\u306f\u3044\u3084\u3060\uff01\u307f\u305f\u3044\u306a\u4eba\u306f\u4f7f\u304a\u3046\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm i -D webpack-merge\n\n\u8a2d\u5b9a\n\n\u5171\u901a\u8a2d\u5b9a: webpack.config.babel.js\n\n\nNODE_ENV=production: webpack.config.prod.babel.js\n\n\nNODE_ENV=development: webpack.config.dev.babel.js\n\n\n\nwebpack.config.babel.js\nimport merge from 'webpack-merge';\n\n// NODE_ENV\u3067\u5206\u5c90\nconst config = process.env.NODE_ENV === 'production' ?\n    require('./webpack.config.prod.babel.js') :\n    require('./webpack.config.dev.babel.js');\n\nconst common = {\n  context: __dirname,\n  entry: './src/index.jsx',\n  output: {\n    path: `${__dirname}/public`,\n    publicPath: '/',\n    filename: 'bundle.js',\n  },\n  module: {\n    preLoaders: [\n      { test: /\\.jsx?$/, exclude: /node_modules/, loader: 'eslint' },\n    ],\n    loaders: [\n      { test: /\\.jsx?$/, exclude: /node_modules/, loaders: ['react-hot-loader/webpack', 'babel'] },\n      { test: /\\.css$/, loaders: ['style', 'css'] },\n      { test: /\\.json$/, loader: 'json' },\n      { test: /\\.(jpe?g|png|gif)$/, loader: 'url?limit=10000' },\n    ],\n  },\n  resolve: {\n    extensions: ['', '.js', '.jsx', '.json'],\n  },\n  eslint: {\n    configFile: './.eslintrc',\n  },\n};\n\nmodule.exports = merge(common, config);\n\n\nnpm run\u30b3\u30de\u30f3\u30c9\u3067webpack\u547c\u3076\u3068\u304d\u306f\u9069\u5b9cNODE_ENV\u3092\u3064\u3051\u308b\u3002\n\npackage.json\n  scripts: {\n    start: webpack-dev-server --history-api-fallback --hot --inline --progress --colors,\n    build-debug: webpack --display-error-details --progress --colors,\n    build: NODE_ENV=production webpack --progress --colors,\n  },\n\n\n\nUglifyJsPlugin \u306a\u3069\u3067js\u3092\u6700\u9069\u5316\u30fb\u5727\u7e2e\nUglifyJsPlugin\u3067\u5727\u7e2e\u3057\u3066\u3001DedupePlugin, AggressiveMergingPlugin\u3067\u6700\u9069\u5316\u3059\u308b\u3002\n\u8a73\u7d30\u304c\u77e5\u308a\u305f\u3051\u308c\u3070\u3053\u3061\u3089\nlist of plugins\n\n\u8a2d\u5b9a\n\nwebpack.config.prod.babel.js\nimport webpack from 'webpack';\n\nmodule.exports = {\n  debug: false,\n  devtool: false,\n  plugins: [\n    new webpack.optimize.DedupePlugin(),\n    new webpack.optimize.UglifyJsPlugin({\n      compress: {\n        warnings: false,\n      },\n      comments: false,\n    }),\n    new webpack.optimize.AggressiveMergingPlugin(),\n  ],\n};\n\n\n\nhtml-webpack-plugin\nhtml-webpack-plugin\nindex.html\u306b\u76f4\u63a5\u3001bundle.js\u3092\u66f8\u304d\u8fbc\u3093\u3067\u3044\u305f\u3068\u3053\u308d\u306b\u3001\n\u30cf\u30c3\u30b7\u30e5\u30b3\u30fc\u30c9\u4ed8\u304d\u306escript\u30bf\u30b0\u3092\u633f\u5165\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5c0e\u5165\u3057\u305f\u3002\n\u30cf\u30c3\u30b7\u30e5\u30b3\u30fc\u30c9\u3063\u3066\u306e\u306f\u3053\u3046\u3044\u3046\u3084\u3064\u306d\n<script src=\"/bundle.js?4398c4ce46af21776b47\"></script>\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm i -D html-webpack-plugin\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f\nindex.html\u3092ejs\u30d5\u30a1\u30a4\u30eb\u306b\u30ea\u30cd\u30fc\u30e0\u3057\u3001<script src=\"/bundle.js\" />\u306a\u30b3\u30fc\u30c9\u3092\u9664\u53bb\u3059\u308b\u3002\nmv src/index.html src/index.template.ejs\n\nsrc/index.template.ejs\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n    <title>title</title>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n-  <script type=\"text/javascript\" src=\"/bundle.js\"></script></body>\n  </body>\n</html>\n\n\n\n\u8a2d\u5b9a\nplugins\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3001npm run build\u3057\u305f\u6642\u306b\u3044\u3044\u611f\u3058\u3067index.html\u3092\u5410\u3044\u3066\u304f\u308c\u308b\u3002\n\u4ed6\u306b\u3082script\u3068\u304bmeta\u30bf\u30b0\u3092<head>\u306b\u5165\u308c\u305f\u304f\u306a\u3063\u305f\u3089\u30de\u30cb\u30e5\u30a2\u30eb\u898b\u3066\u306d\u3002\n\nwebpack.config.babel.js\nimport HtmlWebpackPlugin from 'html-webpack-plugin';\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      hash: true,\n      filename: 'index.html',\n      favicon: './src/favicon.jpg',\n      template: './src/index.template.ejs',\n      inject: 'body',\n    }),\n  ],\n\n\n\n\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\n\npublic/index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n    <title>title</title>\n  <link rel=\"shortcut icon\" href=\"/favicon.jpg\"></head>\n  <body>\n    <div id=\"root\"></div>\n  <script type=\"text/javascript\" src=\"/bundle.js?4398c4ce46af21776b47\"></script></body>\n</html>\n\n\n\nwebpack-manifest-plugin\nwebpack-manifest-plugin\nbundle.js\u3063\u3066\u540d\u524d\u3060\u3068CDN\u306b\u4e0a\u3052\u305f\u6642\u3001\u4e16\u4ee3\u7ba1\u7406\u3067\u304d\u306a\u3044\u3002\n\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u3057\u305f\u3044\u3063\u3066\u306a\u3063\u305f\u3089\u3053\u308c\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm i -D webpack-manifest-plugin chunk-manifest-webpack-plugin\n\n\u8a2d\u5b9a\n\u4e0b\u8a18\u8a2d\u5b9a\u3060\u3068\u3001entry\u306e\u30ad\u30fc\u304c\u51fa\u529b\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\nhot load\u3057\u305f\u3044\u306e\u3067production\u74b0\u5883\u4ee5\u5916\u306f[chunkhash]\u3064\u3051\u306a\u3044\u3002\n\nwebpack.config.js\nimport ManifestPlugin from 'webpack-manifest-plugin';\nimport ChunkManifestPlugin from 'chunk-manifest-webpack-plugin';\n\nmodule.exports = {\n  context: __dirname,\n  entry: {\n+    bundle: './src/index.jsx',\n  },\n   output: {\n     path: `${__dirname}/public`,\n     publicPath: '/',\n-    filename: 'bundle.js',\n+    filename: '[name].js',\n   },\n\n  plugins: [\n+    new ManifestPlugin(),\n+    new ChunkManifestPlugin({\n+      filename: 'chunk-manifest.json',\n+      manifestVariable: 'webpackManifest',\n+    }),\n  ]\n\n\n\nwebpack.config.prod.js\nmodule.exports = {\n  context: __dirname,\n  entry: {\n+    bundle: './src/index.jsx',\n  },\n   output: {\n     path: `${__dirname}/public`,\n     publicPath: '/',\n-    filename: 'bundle.js',\n+    filename: '[name].[chunkhash].js',\n   },\n  ]\n\n\nnpm run build\u3057\u305f\u3089\u3053\u3046\u3044\u3046\u306e\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\nmanifest.json\u3082\u5410\u304d\u51fa\u3055\u308c\u308b\u306e\u3067\u3001\u306a\u306b\u304b\u3068\u9023\u643a\u3057\u305f\u3051\u308c\u3070\u305d\u308c\u3092\u8aad\u307f\u8fbc\u3080\u3068\u3044\u3044\u304b\u3082\u3002\n\nsrc/index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n    <title>title</title>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n  <script type=\"text/javascript\" src=\"/bundle.b00a9f3a29b791781cc5.js?7490b7329f7ad1443141\"></script></body>\n</html>\n\n\n\ncopy-webpack-plugin\ncopy-webpack-plugin\n\u672c\u756a\u74b0\u5883\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3001\u3044\u3056\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u307f\u305f\u3089\u3001\nreact-router\u4f7f\u3063\u3066\u308b\u305b\u3044\u3067\u3001404\u51fa\u3061\u3083\u3063\u305f\u3068\u304b\u3042\u308a\u307e\u305b\u3093\u304b\u3002\n\u305d\u3057\u305f\u3089\u3001apache\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7f6e\u304d\u305f\u304f\u306a\u3063\u305f\u308a\u3001sass\u7528\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\npublic\u914d\u4e0b\u306b\u8a2d\u7f6e\u3057\u305f\u304f\u306a\u308a\u307e\u3059\u3088\u306d\u3002 \u305d\u3044\u3046\u3044\u3046\u6642\u306b\u3053\u308c\u4f7f\u3044\u307e\u3057\u305f\u3002\n\u4f8b .htaccess, _redirects\n\nwebpack.config.babel.js\nimport CopyWebpackPlugin from 'copy-webpack-plugin';\n// \u301c\u7565\u301c\n  plugins: [\n    new CopyWebpackPlugin([\n      { from: { glob: './src/static/**', dot: true }, to: '[name].[ext]' },\n    ]),\n\n\n\nGoogle Analytics\nreact-ga\nreact-router\u4f7f\u3063\u3066\u305f\u3089\u3001\u753b\u9762\u9077\u79fb\u6642\u306b\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u306b\u53d6\u308c\u306a\u304f\u306a\u308b\u306e\u3067\u3053\u308c\u3092\u5c0e\u5165\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\nnpm i -S react-ga\n\n\u8a2d\u5b9a\n\nsrc/index.jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactGA from 'react-ga';\nimport { Router, Route, IndexRoute, browserHistory } from 'react-router';\nimport App from '../containers/App';\n\nwindow.React = React;\nReactGA.initialize('UA-123456-7');\n\nconst logPageView = () => {\n  ReactGA.set({ page: window.location.pathname });\n  ReactGA.pageview(window.location.pathname);\n};\n\nReactDOM.render((\n  <Router history={browserHistory} onUpdate={logPageView}>\n    <Route path=\"/\">\n      <IndexRoute component={App} />\n      <Route path=\"/:userName\" component={App} />\n    </Route>\n  </Router>\n), document.getElementById('root'));\n\n\n\n\u6240\u7ba1\n\u3042\u3068\u3084\u308a\u6b8b\u3057\u3066\u308b\u3053\u3068\u3042\u308b\u304b\u306a\u3002\u6c17\u304c\u4ed8\u3044\u305f\u3089\u8ffd\u8a18\u3059\u308b\u3002\nreactjs\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u69cb\u7bc9\u3057\u305f\u969b\u3001\nproduction\u74b0\u5883\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u898b\u636e\u3048\u3066webpack\u5468\u308a\u306e\u8a2d\u5b9a\u3092\u898b\u76f4\u3057\u305f\u306e\u3067\n\u305d\u308c\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n# webpack.config.js\u306e\u30ea\u30cd\u30fc\u30e0\n\nwebpack.config\u3067babel\u306a\u30b3\u30fc\u30c9\u304c\u66f8\u304d\u305f\u304b\u3063\u305f\u306e\u3067\u30ea\u30cd\u30fc\u30e0\n\u3042\u308f\u305b\u3066\u3001const\u3058\u3083\u306a\u304f\u3066\u3001import\u3067\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u5909\u66f4\n\n## \u30ea\u30cd\u30fc\u30e0 & \u66f8\u304d\u63db\u3048\n\n```bash:\n% mv webpack.config.js webpack.config.babel.js\n```\n\n```js\n// before\nconst webpack = require('webpack');\n\n// after\nimport webpack from 'webpack';\n```\n\n# webpack-merge\n[webpack-merge](https://www.npmjs.com/package/webpack-merge \"webpack-merge\")\n\nwebpack.config\u3092\u30de\u30fc\u30b8\u3059\u308b\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3002\n\u5171\u901a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3068\u74b0\u5883\u5225\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30fc\u30b8\u3059\u308b\u307f\u305f\u3044\u306a\u7528\u9014\u3067\u5229\u7528\u3059\u308b\u3002\n \n\u74b0\u5883\u5225\u3067webpack.config\u3092\u304b\u304d\u5206\u3051\u305f\u3044\u3002\n\u624b\u52d5\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306edeep merge\u3059\u308b\u306e\u306f\u3044\u3084\u3060\uff01\u307f\u305f\u3044\u306a\u4eba\u306f\u4f7f\u304a\u3046\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`npm i -D webpack-merge`\n\n## \u8a2d\u5b9a\n\n- \u5171\u901a\u8a2d\u5b9a: `webpack.config.babel.js`\n- `NODE_ENV=production`: `webpack.config.prod.babel.js`\n- `NODE_ENV=development`: `webpack.config.dev.babel.js`\n\n```js:webpack.config.babel.js\nimport merge from 'webpack-merge';\n\n// NODE_ENV\u3067\u5206\u5c90\nconst config = process.env.NODE_ENV === 'production' ?\n    require('./webpack.config.prod.babel.js') :\n    require('./webpack.config.dev.babel.js');\n\nconst common = {\n  context: __dirname,\n  entry: './src/index.jsx',\n  output: {\n    path: `${__dirname}/public`,\n    publicPath: '/',\n    filename: 'bundle.js',\n  },\n  module: {\n    preLoaders: [\n      { test: /\\.jsx?$/, exclude: /node_modules/, loader: 'eslint' },\n    ],\n    loaders: [\n      { test: /\\.jsx?$/, exclude: /node_modules/, loaders: ['react-hot-loader/webpack', 'babel'] },\n      { test: /\\.css$/, loaders: ['style', 'css'] },\n      { test: /\\.json$/, loader: 'json' },\n      { test: /\\.(jpe?g|png|gif)$/, loader: 'url?limit=10000' },\n    ],\n  },\n  resolve: {\n    extensions: ['', '.js', '.jsx', '.json'],\n  },\n  eslint: {\n    configFile: './.eslintrc',\n  },\n};\n\nmodule.exports = merge(common, config);\n```\n\nnpm run\u30b3\u30de\u30f3\u30c9\u3067webpack\u547c\u3076\u3068\u304d\u306f\u9069\u5b9cNODE_ENV\u3092\u3064\u3051\u308b\u3002\n\n```package.json\n  scripts: {\n    start: webpack-dev-server --history-api-fallback --hot --inline --progress --colors,\n    build-debug: webpack --display-error-details --progress --colors,\n    build: NODE_ENV=production webpack --progress --colors,\n  },\n```\n\n# UglifyJsPlugin \u306a\u3069\u3067js\u3092\u6700\u9069\u5316\u30fb\u5727\u7e2e\nUglifyJsPlugin\u3067\u5727\u7e2e\u3057\u3066\u3001DedupePlugin, AggressiveMergingPlugin\u3067\u6700\u9069\u5316\u3059\u308b\u3002\n\n\u8a73\u7d30\u304c\u77e5\u308a\u305f\u3051\u308c\u3070\u3053\u3061\u3089\n[list of plugins](http://webpack.github.io/docs/list-of-plugins.html \"list of plugins\")\n\n## \u8a2d\u5b9a\n\n```js:webpack.config.prod.babel.js\nimport webpack from 'webpack';\n\nmodule.exports = {\n  debug: false,\n  devtool: false,\n  plugins: [\n    new webpack.optimize.DedupePlugin(),\n    new webpack.optimize.UglifyJsPlugin({\n      compress: {\n        warnings: false,\n      },\n      comments: false,\n    }),\n    new webpack.optimize.AggressiveMergingPlugin(),\n  ],\n};\n```\n\n# html-webpack-plugin\n[html-webpack-plugin](https://www.npmjs.com/package/html-webpack-plugin \"html-webpack-plugin\")\n\nindex.html\u306b\u76f4\u63a5\u3001bundle.js\u3092\u66f8\u304d\u8fbc\u3093\u3067\u3044\u305f\u3068\u3053\u308d\u306b\u3001\n\u30cf\u30c3\u30b7\u30e5\u30b3\u30fc\u30c9\u4ed8\u304d\u306escript\u30bf\u30b0\u3092\u633f\u5165\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5c0e\u5165\u3057\u305f\u3002\n\n\u30cf\u30c3\u30b7\u30e5\u30b3\u30fc\u30c9\u3063\u3066\u306e\u306f\u3053\u3046\u3044\u3046\u3084\u3064\u306d\n`<script src=\"/bundle.js?4398c4ce46af21776b47\"></script>`\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`npm i -D html-webpack-plugin`\n\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f\nindex.html\u3092ejs\u30d5\u30a1\u30a4\u30eb\u306b\u30ea\u30cd\u30fc\u30e0\u3057\u3001`<script src=\"/bundle.js\" />`\u306a\u30b3\u30fc\u30c9\u3092\u9664\u53bb\u3059\u308b\u3002\n\n`mv src/index.html src/index.template.ejs`\n\n```diff:src/index.template.ejs\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n    <title>title</title>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n-  <script type=\"text/javascript\" src=\"/bundle.js\"></script></body>\n  </body>\n</html>\n```\n\n\n## \u8a2d\u5b9a\nplugins\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3001`npm run build`\u3057\u305f\u6642\u306b\u3044\u3044\u611f\u3058\u3067index.html\u3092\u5410\u3044\u3066\u304f\u308c\u308b\u3002\n\u4ed6\u306b\u3082script\u3068\u304bmeta\u30bf\u30b0\u3092`<head>`\u306b\u5165\u308c\u305f\u304f\u306a\u3063\u305f\u3089\u30de\u30cb\u30e5\u30a2\u30eb\u898b\u3066\u306d\u3002\n\n```js:webpack.config.babel.js\nimport HtmlWebpackPlugin from 'html-webpack-plugin';\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      hash: true,\n      filename: 'index.html',\n      favicon: './src/favicon.jpg',\n      template: './src/index.template.ejs',\n      inject: 'body',\n    }),\n  ],\n```\n\n### \u51fa\u529b\u30b5\u30f3\u30d7\u30eb\n\n``` html:public/index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n    <title>title</title>\n  <link rel=\"shortcut icon\" href=\"/favicon.jpg\"></head>\n  <body>\n    <div id=\"root\"></div>\n  <script type=\"text/javascript\" src=\"/bundle.js?4398c4ce46af21776b47\"></script></body>\n</html>\n```\n\n# webpack-manifest-plugin\n[webpack-manifest-plugin](https://www.npmjs.com/package/webpack-manifest-plugin \"webpack-manifest-plugin\")\n\nbundle.js\u3063\u3066\u540d\u524d\u3060\u3068CDN\u306b\u4e0a\u3052\u305f\u6642\u3001\u4e16\u4ee3\u7ba1\u7406\u3067\u304d\u306a\u3044\u3002\n\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u3057\u305f\u3044\u3063\u3066\u306a\u3063\u305f\u3089\u3053\u308c\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`npm i -D webpack-manifest-plugin chunk-manifest-webpack-plugin`\n\n## \u8a2d\u5b9a\n\u4e0b\u8a18\u8a2d\u5b9a\u3060\u3068\u3001entry\u306e\u30ad\u30fc\u304c\u51fa\u529b\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\nhot load\u3057\u305f\u3044\u306e\u3067production\u74b0\u5883\u4ee5\u5916\u306f`[chunkhash]`\u3064\u3051\u306a\u3044\u3002\n\n```diff:webpack.config.js\nimport ManifestPlugin from 'webpack-manifest-plugin';\nimport ChunkManifestPlugin from 'chunk-manifest-webpack-plugin';\n\nmodule.exports = {\n  context: __dirname,\n  entry: {\n+    bundle: './src/index.jsx',\n  },\n   output: {\n     path: `${__dirname}/public`,\n     publicPath: '/',\n-    filename: 'bundle.js',\n+    filename: '[name].js',\n   },\n\n  plugins: [\n+    new ManifestPlugin(),\n+    new ChunkManifestPlugin({\n+      filename: 'chunk-manifest.json',\n+      manifestVariable: 'webpackManifest',\n+    }),\n  ]\n```\n\n```diff:webpack.config.prod.js\nmodule.exports = {\n  context: __dirname,\n  entry: {\n+    bundle: './src/index.jsx',\n  },\n   output: {\n     path: `${__dirname}/public`,\n     publicPath: '/',\n-    filename: 'bundle.js',\n+    filename: '[name].[chunkhash].js',\n   },\n  ]\n```\n\n`npm run build`\u3057\u305f\u3089\u3053\u3046\u3044\u3046\u306e\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\nmanifest.json\u3082\u5410\u304d\u51fa\u3055\u308c\u308b\u306e\u3067\u3001\u306a\u306b\u304b\u3068\u9023\u643a\u3057\u305f\u3051\u308c\u3070\u305d\u308c\u3092\u8aad\u307f\u8fbc\u3080\u3068\u3044\u3044\u304b\u3082\u3002\n\n``` html:src/index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n    <title>title</title>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n  <script type=\"text/javascript\" src=\"/bundle.b00a9f3a29b791781cc5.js?7490b7329f7ad1443141\"></script></body>\n</html>\n```\n\n# copy-webpack-plugin\n[copy-webpack-plugin](https://www.npmjs.com/package/copy-webpack-plugin \"copy-webpack-plugin\")\n\n\u672c\u756a\u74b0\u5883\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3001\u3044\u3056\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u307f\u305f\u3089\u3001\nreact-router\u4f7f\u3063\u3066\u308b\u305b\u3044\u3067\u3001404\u51fa\u3061\u3083\u3063\u305f\u3068\u304b\u3042\u308a\u307e\u305b\u3093\u304b\u3002\n\n\u305d\u3057\u305f\u3089\u3001apache\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7f6e\u304d\u305f\u304f\u306a\u3063\u305f\u308a\u3001sass\u7528\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\npublic\u914d\u4e0b\u306b\u8a2d\u7f6e\u3057\u305f\u304f\u306a\u308a\u307e\u3059\u3088\u306d\u3002 \u305d\u3044\u3046\u3044\u3046\u6642\u306b\u3053\u308c\u4f7f\u3044\u307e\u3057\u305f\u3002\n\u4f8b `.htaccess`, `_redirects`\n\n\n\n```js:webpack.config.babel.js\nimport CopyWebpackPlugin from 'copy-webpack-plugin';\n// \u301c\u7565\u301c\n  plugins: [\n    new CopyWebpackPlugin([\n      { from: { glob: './src/static/**', dot: true }, to: '[name].[ext]' },\n    ]),\n```\n\n# Google Analytics\n[react-ga](https://www.npmjs.com/package/react-ga \"react-ga\")\n\nreact-router\u4f7f\u3063\u3066\u305f\u3089\u3001\u753b\u9762\u9077\u79fb\u6642\u306b\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u306b\u53d6\u308c\u306a\u304f\u306a\u308b\u306e\u3067\u3053\u308c\u3092\u5c0e\u5165\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\n`npm i -S react-ga`\n\n## \u8a2d\u5b9a\n\n```js:src/index.jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactGA from 'react-ga';\nimport { Router, Route, IndexRoute, browserHistory } from 'react-router';\nimport App from '../containers/App';\n\nwindow.React = React;\nReactGA.initialize('UA-123456-7');\n\nconst logPageView = () => {\n  ReactGA.set({ page: window.location.pathname });\n  ReactGA.pageview(window.location.pathname);\n};\n\nReactDOM.render((\n  <Router history={browserHistory} onUpdate={logPageView}>\n    <Route path=\"/\">\n      <IndexRoute component={App} />\n      <Route path=\"/:userName\" component={App} />\n    </Route>\n  </Router>\n), document.getElementById('root'));\n```\n\n# \u6240\u7ba1\n\u3042\u3068\u3084\u308a\u6b8b\u3057\u3066\u308b\u3053\u3068\u3042\u308b\u304b\u306a\u3002\u6c17\u304c\u4ed8\u3044\u305f\u3089\u8ffd\u8a18\u3059\u308b\u3002\n", "tags": ["reactjs", "webpack"]}