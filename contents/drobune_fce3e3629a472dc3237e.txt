{"context": " More than 1 year has passed since last update.\u3088\u304f\u30cf\u30de\u308a\u305d\u3046\u306a\u306e\u3067\u30e1\u30e2\u3002\n\n\u6e96\u5099\nELB\u5185\u306enginx\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u5143\u306eIP\u3092$remote_addr\u306b\u3059\u308b\nhttp {\n\n    set_real_ip_from   10.0.0.0/8;\n    real_ip_header     X-Forwarded-For;\n\n}\n\n\n\u672c\u756a\nhttp {\n    limit_req_zone $remote_addr zone=ddos:1m  rate=10r/s;\n\n    server {\n\n        location / {\n            limit_req zone=ddos burst=50 nodelay;\n\n        }\n    }\n}\n\n\n\u9593\u9055\u3044\nhttp {\n   limit_req_zone $http_x_fowarded_for zone=ddos:1m  rate=10r/s;\n}\n\nhttp://serverfault.com/questions/487463/nginx-rate-limiting-with-x-forwarded-for-header\n$http_x_fowarded_for\u306flimit_req\u306b\u4f7f\u3063\u3066\u306f\u3044\u3051\u306a\u3044\u3068\u3042\u3063\u305f...\n\n\n\u3088\u304f\u30cf\u30de\u308a\u305d\u3046\u306a\u306e\u3067\u30e1\u30e2\u3002\n\n### \u6e96\u5099\n\nELB\u5185\u306enginx\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u5143\u306eIP\u3092$remote_addr\u306b\u3059\u308b\n\n```\nhttp {\n\n    set_real_ip_from   10.0.0.0/8;\n    real_ip_header     X-Forwarded-For;\n\n}\n```\n\n### \u672c\u756a\n\n```\nhttp {\n    limit_req_zone $remote_addr zone=ddos:1m  rate=10r/s;\n\n    server {\n\n        location / {\n            limit_req zone=ddos burst=50 nodelay;\n\n        }\n    }\n}\n```\n\n\n### \u9593\u9055\u3044\n\n\n```\nhttp {\n   limit_req_zone $http_x_fowarded_for zone=ddos:1m  rate=10r/s;\n}\n```\n\nhttp://serverfault.com/questions/487463/nginx-rate-limiting-with-x-forwarded-for-header\n\n$http_x_fowarded_for\u306flimit_req\u306b\u4f7f\u3063\u3066\u306f\u3044\u3051\u306a\u3044\u3068\u3042\u3063\u305f...\n", "tags": ["nginx", "AWS", "elb"]}