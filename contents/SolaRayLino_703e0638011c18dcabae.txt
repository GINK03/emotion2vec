{"tags": ["CoreData", "Objective-C"], "context": " More than 1 year has passed since last update.\u30ab\u30c6\u30b4\u30ea\u3068\u3057\u3066\u5b9f\u88c5\u3002\n\nNSFetchedResultsControllerExtension.h\n#import <CoreData/CoreData.h>\n\n@interface NSFetchedResultsController (NSFetchedResultsControllerExtension)\n\n/**\n * \u6b21\u306e IndexPath \u3092\u53d6\u5f97\n */\n- (NSIndexPath *)nextIndexPath:(NSIndexPath *)currentIndexPath;\n\n/**\n * \u524d\u306e IndexPath \u3092\u53d6\u5f97\n */\n- (NSIndexPath *)previousIndexPath:(NSIndexPath *)currentIndexPath;\n\n@end\n\n\n\nNSFetchedResultsControllerExtension.m\n#import \"NSFetchedResultsControllerExtension.h\"\n\n@implementation NSFetchedResultsController (NSFetchedResultsControllerExtension)\n\n- (NSIndexPath *)nextIndexPath:(NSIndexPath *)currentIndexPath\n{\n    if (!currentIndexPath) {\n        return nil;\n    }\n\n    NSIndexPath *nextIndexPath = nil;\n    id <NSFetchedResultsSectionInfo> sectionInfo = [[self sections] objectAtIndex:currentIndexPath.section];\n    NSInteger rowCount = [sectionInfo numberOfObjects];\n    NSInteger nextRow = currentIndexPath.row + 1;\n    NSInteger currentSection = currentIndexPath.section;\n\n    if (nextRow < rowCount) {\n        nextIndexPath = [NSIndexPath indexPathForRow:nextRow inSection:currentSection];\n    } else {\n        NSInteger sectionCount = [[self sections] count];\n        NSInteger nextSection = currentSection + 1;\n\n        if (nextSection < sectionCount) {\n            nextIndexPath = [NSIndexPath indexPathForRow:0 inSection:nextSection];\n        }\n    }\n\n    return nextIndexPath;\n}\n\n- (NSIndexPath *)previousIndexPath:(NSIndexPath *)currentIndexPath\n{\n    if (!currentIndexPath) {\n        return nil;\n    }\n\n    NSIndexPath *previousIndexPath = nil;\n    NSInteger previousRow = currentIndexPath.row - 1;\n    NSInteger currentSection = currentIndexPath.section;\n\n    if (previousRow >= 0) {\n        previousIndexPath = [NSIndexPath indexPathForRow:previousRow inSection:currentSection];\n    } else {\n        NSInteger previousSection = currentSection - 1;\n\n        if (previousSection >= 0) {\n            id <NSFetchedResultsSectionInfo> sectionInfo = [[self sections] objectAtIndex:previousSection];\n            NSInteger rowCount = [sectionInfo numberOfObjects];\n            previousRow = rowCount - 1;\n            previousIndexPath = [NSIndexPath indexPathForRow:previousRow inSection:previousSection];\n        }\n    }\n\n    return previousIndexPath;\n}\n\n@end\n\n\n\n\u30ab\u30c6\u30b4\u30ea\u3068\u3057\u3066\u5b9f\u88c5\u3002\n\n``` NSFetchedResultsControllerExtension.h\n#import <CoreData/CoreData.h>\n\n@interface NSFetchedResultsController (NSFetchedResultsControllerExtension)\n\n/**\n * \u6b21\u306e IndexPath \u3092\u53d6\u5f97\n */\n- (NSIndexPath *)nextIndexPath:(NSIndexPath *)currentIndexPath;\n\n/**\n * \u524d\u306e IndexPath \u3092\u53d6\u5f97\n */\n- (NSIndexPath *)previousIndexPath:(NSIndexPath *)currentIndexPath;\n\n@end\n```\n\n``` NSFetchedResultsControllerExtension.m\n#import \"NSFetchedResultsControllerExtension.h\"\n\n@implementation NSFetchedResultsController (NSFetchedResultsControllerExtension)\n\n- (NSIndexPath *)nextIndexPath:(NSIndexPath *)currentIndexPath\n{\n    if (!currentIndexPath) {\n        return nil;\n    }\n    \n    NSIndexPath *nextIndexPath = nil;\n    id <NSFetchedResultsSectionInfo> sectionInfo = [[self sections] objectAtIndex:currentIndexPath.section];\n    NSInteger rowCount = [sectionInfo numberOfObjects];\n    NSInteger nextRow = currentIndexPath.row + 1;\n    NSInteger currentSection = currentIndexPath.section;\n    \n    if (nextRow < rowCount) {\n        nextIndexPath = [NSIndexPath indexPathForRow:nextRow inSection:currentSection];\n    } else {\n        NSInteger sectionCount = [[self sections] count];\n        NSInteger nextSection = currentSection + 1;\n        \n        if (nextSection < sectionCount) {\n            nextIndexPath = [NSIndexPath indexPathForRow:0 inSection:nextSection];\n        }\n    }\n    \n    return nextIndexPath;\n}\n\n- (NSIndexPath *)previousIndexPath:(NSIndexPath *)currentIndexPath\n{\n    if (!currentIndexPath) {\n        return nil;\n    }\n    \n    NSIndexPath *previousIndexPath = nil;\n    NSInteger previousRow = currentIndexPath.row - 1;\n    NSInteger currentSection = currentIndexPath.section;\n    \n    if (previousRow >= 0) {\n        previousIndexPath = [NSIndexPath indexPathForRow:previousRow inSection:currentSection];\n    } else {\n        NSInteger previousSection = currentSection - 1;\n        \n        if (previousSection >= 0) {\n            id <NSFetchedResultsSectionInfo> sectionInfo = [[self sections] objectAtIndex:previousSection];\n            NSInteger rowCount = [sectionInfo numberOfObjects];\n            previousRow = rowCount - 1;\n            previousIndexPath = [NSIndexPath indexPathForRow:previousRow inSection:previousSection];\n        }\n    }\n    \n    return previousIndexPath;\n}\n\n@end\n```"}