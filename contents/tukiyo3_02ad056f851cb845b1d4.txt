{"tags": ["docker-machine"], "context": "\n\n\u53c2\u8003\n\n\u6c4e\u7528(generic)\u30c9\u30e9\u30a4\u30d0 \u2014 Docker-docs-ja 1.13.RC \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nhttps://github.com/docker/machine/releases\n\n\n\u624b\u9806\n\n\u9375\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f55\u5ea6\u3082\u805e\u304b\u308c\u308b\u306e\u3067\u5148\u306b\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304f\nssh-agent bash\nssh-add ~/.ssh/id_rsa\n\n\n\na.sh\nIP=192.168.2.2\nKEY=~/.ssh/id_rsa\nNAME=machine1\n\ndocker-machine create \\\n  --driver generic \\\n  --generic-ip-address=$IP \\\n  --generic-ssh-key $KEY \\\n  $NAME\n\n\n\n\u63a5\u7d9a\n\n\u78ba\u8a8d\ndocker-machine env $NAME\ndocker-machine ssh $NAME\n\n\n\neval\u3059\u308b\u3068docker\u30b3\u30de\u30f3\u30c9\u3067\u64cd\u4f5c\u3067\u304d\u308b\neval $(docker-machine env $NAME)\ndocker ps -a \ndocker pull alpine\ndocker run --rm -it alpine /bin/sh\n\n\n\nvolume\u306e\u6271\u3044\neval $(docker-machine env $NAME)\ndocker run --rm -it -v /root:/mnt alpine /bin/sh\n\n\u3068\u3059\u308b\u3068\u3001docker\u304c\u52d5\u3044\u3066\u3044\u308b\u30db\u30b9\u30c8\u4e0a\u306e /root \u304c /mnt\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3002\ndocker-machine \u3092\u5b9f\u884c\u3057\u305f\u30db\u30b9\u30c8\u306e/root \u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u306e\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002\n\nmemo: jessie\u306bdocker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# https://docs.docker.com/engine/installation/linux/debian/\nset -eu\n\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\necho \"deb http://apt.dockerproject.org/repo debian-jessie main\" > /etc/apt/sources.list.d/docker.list\n\napt update\napt install -y docker-engine\n\n\n\ndocker-machine\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n~/.docker/machine/machines/\u30db\u30b9\u30c8\u3054\u3068\u306b\u30d5\u30a9\u30eb\u30c0/config.json\n\n\nconfig.json \u5185\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u7d76\u5bfe\u30d1\u30b9\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u3002\n\n\n~/.docker/machine/machines/\u30db\u30b9\u30c8\u3054\u3068\u306b\u30d5\u30a9\u30eb\u30c0/id_rsa\n~/.docker/machine/certs/\u30db\u30b9\u30c8\u306e\u9375(?)\n\n\u3053\u3053\u306e id_rsa \u306f\u4ee5\u4e0b\u3067\u6307\u5b9a\u3057\u305f\u9375\u306e\u30b3\u30d4\u30fc\u304c\u7f6e\u304b\u308c\u308b\u3002\n docker-machine create \\\n  --driver generic \\\n  --generic-ip-address=$IP \\\n+ --generic-ssh-key ~/.ssh/id_rsa \\\n  $NAME\n\n\n(\u691c\u8a3c\u4e2d)docker-machine\u64cd\u4f5c\u3059\u308b\u30db\u30b9\u30c8\u3092\u8907\u6570\u306b\u3067\u304d\u306a\u3044\n\nmac \u3067 docker-machine\u3057\u305f\u5f8c\u3001\u540c\u3058\u30db\u30b9\u30c8\u306b\u5bfe\u3057 Linux\u3067docker-machine\u3059\u308b\u3068 mac\u3067\u306f\u63a5\u7d9a\u3067\u304d\u306a\u304f\u306a\u308b\u3002\n\u4ed6\u306e\u7aef\u672b\u3067\u5171\u6709\u3059\u308b\u305f\u3081\u306b\u306f --storage-path \u3067 /opt/ \u3068\u304b\u6307\u5b9a\u3057\u3066\u304a\u304f\u306e\u304c\u5409\ndocker-machine \u3092\u8ffd\u52a0\u3057\u76f4\u3059\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u505c\u6b62\u3059\u308b\u3002(--restart=always\u306e\u5834\u5408\u306f\u672a\u78ba\u8a8d)\n\n## \u53c2\u8003\n\n* [\u6c4e\u7528(generic)\u30c9\u30e9\u30a4\u30d0 \u2014 Docker-docs-ja 1.13.RC \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.docker.jp/machine/drivers/generic.html)\n* https://github.com/docker/machine/releases\n\n## \u624b\u9806\n\n```bash:\u9375\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f55\u5ea6\u3082\u805e\u304b\u308c\u308b\u306e\u3067\u5148\u306b\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304f\nssh-agent bash\nssh-add ~/.ssh/id_rsa\n```\n\n```bash:a.sh\nIP=192.168.2.2\nKEY=~/.ssh/id_rsa\nNAME=machine1\n\ndocker-machine create \\\n  --driver generic \\\n  --generic-ip-address=$IP \\\n  --generic-ssh-key $KEY \\\n  $NAME\n```\n\n## \u63a5\u7d9a\n\n```bash:\u78ba\u8a8d\ndocker-machine env $NAME\ndocker-machine ssh $NAME\n```\n\n```bash:eval\u3059\u308b\u3068docker\u30b3\u30de\u30f3\u30c9\u3067\u64cd\u4f5c\u3067\u304d\u308b\neval $(docker-machine env $NAME)\ndocker ps -a \ndocker pull alpine\ndocker run --rm -it alpine /bin/sh\n```\n\n## volume\u306e\u6271\u3044\n\n```bash:\neval $(docker-machine env $NAME)\ndocker run --rm -it -v /root:/mnt alpine /bin/sh\n```\n\n\u3068\u3059\u308b\u3068\u3001docker\u304c\u52d5\u3044\u3066\u3044\u308b\u30db\u30b9\u30c8\u4e0a\u306e /root \u304c /mnt\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3002\ndocker-machine \u3092\u5b9f\u884c\u3057\u305f\u30db\u30b9\u30c8\u306e/root \u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u306e\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002\n\n## memo: jessie\u306bdocker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\n# https://docs.docker.com/engine/installation/linux/debian/\nset -eu\n\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\necho \"deb http://apt.dockerproject.org/repo debian-jessie main\" > /etc/apt/sources.list.d/docker.list\n\napt update\napt install -y docker-engine\n```\n\n----\n\n## docker-machine\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n* ~/.docker/machine/machines/\u30db\u30b9\u30c8\u3054\u3068\u306b\u30d5\u30a9\u30eb\u30c0/config.json\n    * config.json \u5185\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u7d76\u5bfe\u30d1\u30b9\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u3002\n* ~/.docker/machine/machines/\u30db\u30b9\u30c8\u3054\u3068\u306b\u30d5\u30a9\u30eb\u30c0/id_rsa\n* ~/.docker/machine/certs/\u30db\u30b9\u30c8\u306e\u9375(?)\n\n\u3053\u3053\u306e id_rsa \u306f\u4ee5\u4e0b\u3067\u6307\u5b9a\u3057\u305f\u9375\u306e\u30b3\u30d4\u30fc\u304c\u7f6e\u304b\u308c\u308b\u3002\n\n```diff:\n docker-machine create \\\n  --driver generic \\\n  --generic-ip-address=$IP \\\n+ --generic-ssh-key ~/.ssh/id_rsa \\\n  $NAME\n```\n\n## (\u691c\u8a3c\u4e2d)docker-machine\u64cd\u4f5c\u3059\u308b\u30db\u30b9\u30c8\u3092\u8907\u6570\u306b\u3067\u304d\u306a\u3044\n\n* mac \u3067 docker-machine\u3057\u305f\u5f8c\u3001\u540c\u3058\u30db\u30b9\u30c8\u306b\u5bfe\u3057 Linux\u3067docker-machine\u3059\u308b\u3068 mac\u3067\u306f\u63a5\u7d9a\u3067\u304d\u306a\u304f\u306a\u308b\u3002\n* \u4ed6\u306e\u7aef\u672b\u3067\u5171\u6709\u3059\u308b\u305f\u3081\u306b\u306f `--storage-path` \u3067 /opt/ \u3068\u304b\u6307\u5b9a\u3057\u3066\u304a\u304f\u306e\u304c\u5409\n* docker-machine \u3092\u8ffd\u52a0\u3057\u76f4\u3059\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u505c\u6b62\u3059\u308b\u3002(--restart=always\u306e\u5834\u5408\u306f\u672a\u78ba\u8a8d)\n"}