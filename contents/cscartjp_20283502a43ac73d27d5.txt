{"context": " More than 1 year has passed since last update.\n\u30a2\u30c9\u30aa\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u6761\u4ef6\u3067\u3059\u3002\u300cmy_product_extend\u300d\n\u4eca\u56de\u306e\u4f8b\u3067\u5229\u7528\u3059\u308b\u30c6\u30fc\u30d6\u30eb  cscart_products_ex \u30fb\u30fb\u30fbproduct_id\u3092\u30ad\u30fc\u3068\u3057\u3066cscart_products\u3068\u3064\u306a\u304c\u3063\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\n\n\ninit.php\n/app/addons/my_product_extend/init.php\n/app/functions/fn.catalog.php \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308bHOOK\u30dd\u30a4\u30f3\u30c8\u300cadditional_fields_in_search\u300d\u3092\u5229\u7528\u3059\u308b\u3002\n\ninit.php\nfn_register_hooks(\n    'additional_fields_in_search'\n);\n\n\n\u203binit.php\u306f\u3001\u5229\u7528\u3059\u308bHOOK\u30dd\u30a4\u30f3\u30c8\u3092\u5ba3\u8a00\u3057\u307e\u3059\u3002\n\nfunc.php\n/app/addons/my_product_extend/func.php\n\nfunc.php\n\n//\u691c\u7d22\u5bfe\u8c61\u8ffd\u52a0\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u62e1\u5f35\nfunction fn_my_product_extend_additional_fields_in_search(&$params, &$fields, $sortings, $condition, &$join, $sorting, $group_by, &$tmp, $piece, $having)\n{\n    $params['pshort'] = 'Y';//\u30b7\u30e7\u30fc\u30c8\u8aac\u660e\u3092\u542b\u3081\u308b\n    $params['pfull'] = 'Y';//\u30d5\u30eb\u8aac\u660e\u3092\u542b\u3081\u308b\n    $params['pkeywords'] = 'Y';//META\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u542b\u3081\u308b\n\n    //\u72ec\u81ea\u30c6\u30fc\u30d6\u30eb\u3092JOIN\n    if(AREA == 'A'){\n        $join .= \" LEFT JOIN ?:products_ex AS products_ex ON products_ex.product_id = products.product_id\";\n    }\n\n    ///////////////////\u4ee5\u4e0b\u691c\u7d22\u5bfe\u8c61\u3068\u3059\u308b\n    //\u30ab\u30bf\u30ed\u30b0\u756a\u53f7\n    $tmp .= db_quote(\" OR products_ex.catelog_no LIKE ?l\", '%' . $params['q'] . '%');\n\n    //\u30ab\u30bf\u30ed\u30b0\u54c1\u540d\n    $tmp .= db_quote(\" OR products_ex.catelog_name LIKE ?l\", '%' . $params['q'] . '%');\n\n    //\u30e1\u30fc\u30ab\u30fc\u54c1\u756a\n    $tmp .= db_quote(\" OR products_ex.maker_item_code LIKE ?l\", '%' . $params['q'] . '%');\n}\n\n\n\u203bfunc.php\u306f\u3001\u30a2\u30c9\u30aa\u30f3\u3067\u5229\u7528\u3059\u308b\u95a2\u6570\u3092\u307e\u3068\u3081\u3066\u8a18\u8ff0\u3057\u307e\u3059\n\u3053\u308c\u3060\u3051\u3067\u30b7\u30e7\u30c3\u30d7\u30d5\u30ed\u30f3\u30c8\u3001\u7ba1\u7406\u30d1\u30cd\u30eb\u306e\u691c\u7d22\u30ed\u30b8\u30c3\u30af\u3092\u62e1\u5f35\u3067\u304d\u307e\u3059\u3002\n\n\nCS-Cart\u306fPHP\u3068MySQL\u3067\u66f8\u304b\u308c\u305fEC\u30b5\u30a4\u30c8\u69cb\u7bc9\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3059\u3002\nhttp://cs-cart.jp/\n- \u30a2\u30c9\u30aa\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u6761\u4ef6\u3067\u3059\u3002\u300c**my_product_extend**\u300d\n- \u4eca\u56de\u306e\u4f8b\u3067\u5229\u7528\u3059\u308b\u30c6\u30fc\u30d6\u30eb  **cscart_products_ex** \u30fb\u30fb\u30fbproduct_id\u3092\u30ad\u30fc\u3068\u3057\u3066cscart_products\u3068\u3064\u306a\u304c\u3063\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\n\n# init.php\n/app/addons/my_product_extend/**init.php**\n**/app/functions/fn.catalog.php** \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308bHOOK\u30dd\u30a4\u30f3\u30c8\u300cadditional_fields_in_search\u300d\u3092\u5229\u7528\u3059\u308b\u3002\n\n```php:init.php\nfn_register_hooks(\n    'additional_fields_in_search'\n);\n```\n\u203binit.php\u306f\u3001\u5229\u7528\u3059\u308bHOOK\u30dd\u30a4\u30f3\u30c8\u3092\u5ba3\u8a00\u3057\u307e\u3059\u3002\n\n\n# func.php\n/app/addons/my_product_extend/**func.php**\n\n```php:func.php\n\n//\u691c\u7d22\u5bfe\u8c61\u8ffd\u52a0\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u62e1\u5f35\nfunction fn_my_product_extend_additional_fields_in_search(&$params, &$fields, $sortings, $condition, &$join, $sorting, $group_by, &$tmp, $piece, $having)\n{\n    $params['pshort'] = 'Y';//\u30b7\u30e7\u30fc\u30c8\u8aac\u660e\u3092\u542b\u3081\u308b\n    $params['pfull'] = 'Y';//\u30d5\u30eb\u8aac\u660e\u3092\u542b\u3081\u308b\n    $params['pkeywords'] = 'Y';//META\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u542b\u3081\u308b\n    \n    //\u72ec\u81ea\u30c6\u30fc\u30d6\u30eb\u3092JOIN\n    if(AREA == 'A'){\n        $join .= \" LEFT JOIN ?:products_ex AS products_ex ON products_ex.product_id = products.product_id\";\n    }\n    \n    ///////////////////\u4ee5\u4e0b\u691c\u7d22\u5bfe\u8c61\u3068\u3059\u308b\n    //\u30ab\u30bf\u30ed\u30b0\u756a\u53f7\n    $tmp .= db_quote(\" OR products_ex.catelog_no LIKE ?l\", '%' . $params['q'] . '%');\n    \n    //\u30ab\u30bf\u30ed\u30b0\u54c1\u540d\n    $tmp .= db_quote(\" OR products_ex.catelog_name LIKE ?l\", '%' . $params['q'] . '%');\n    \n    //\u30e1\u30fc\u30ab\u30fc\u54c1\u756a\n    $tmp .= db_quote(\" OR products_ex.maker_item_code LIKE ?l\", '%' . $params['q'] . '%');\n}\n```\n\u203bfunc.php\u306f\u3001\u30a2\u30c9\u30aa\u30f3\u3067\u5229\u7528\u3059\u308b\u95a2\u6570\u3092\u307e\u3068\u3081\u3066\u8a18\u8ff0\u3057\u307e\u3059\n\n\n\u3053\u308c\u3060\u3051\u3067\u30b7\u30e7\u30c3\u30d7\u30d5\u30ed\u30f3\u30c8\u3001\u7ba1\u7406\u30d1\u30cd\u30eb\u306e\u691c\u7d22\u30ed\u30b8\u30c3\u30af\u3092\u62e1\u5f35\u3067\u304d\u307e\u3059\u3002\n\n----\n\n![CS-Cart](http://cs-cart.jp/images/content/features/feature_preview_design_2_ja.png)\nCS-Cart\u306fPHP\u3068MySQL\u3067\u66f8\u304b\u308c\u305fEC\u30b5\u30a4\u30c8\u69cb\u7bc9\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3059\u3002\nhttp://cs-cart.jp/\n", "tags": ["cs-cart4.2.4", "PHP"]}