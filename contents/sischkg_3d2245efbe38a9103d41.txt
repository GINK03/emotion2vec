{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nQNAME-MINIMISATION\u306e\u5b9f\u88c5\u304c\u51fa\u3066\u304d\u305f\u3088\u3046\u306a\u306e\u3067\u3001\u6295\u7a3f\u3057\u307e\u3059\u3002\n\nPowerDNS\u306ePeter van Dijk(@Habbie)\u3055\u3093\u304b\u3089\u3001PowerDNS\u3067\u306f\u30ec\u30b3\u30fc\u30c9\u3092\u767b\u9332\u5f8c\u306bpdnssec  recitfy-zone\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3068\u30a2\u30c9\u30d0\u30a4\u30b9\u3092\u9802\u304d\u307e\u3057\u305f\u306e\u3067\u3001rectify-zone\u5b9f\u884c\u5f8c\u306e\u7d50\u679c\u3092\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\n\u672c\u6295\u7a3f\u306f\u3001\u4ee5\u524d\u306bGitHub\u4e0a\u306b\u4f5c\u6210\u3057\u305f\u8cc7\u6599\u306b\u8ffd\u8a18\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30fbdig\u306e\u7d50\u679c\u306e\u30ea\u30f3\u30af\u5148\u306fGitHub\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u3057\u3066\u3044\u307e\u3059\u3002\n\u7b46\u8005\u306f\u3001Windows Server\u304a\u3088\u3073Microsoft DNS\u306e\u8d85\u521d\u5fc3\u8005\u3067\u3059\uff08\u904b\u7528\u3057\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u305b\u3093\uff09\u3002\n\u6295\u7a3f\u6642\u306eURL\u304c\u9593\u9055\u3063\u3066\u3044\u305f(\u4e0b\u66f8\u304d\u3092\u6307\u3057\u3066\u3044\u305f\uff09\u306e\u3067\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\n\n\n\u74b0\u5883\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\nOS: Ubuntu Mate 15.04\nDNS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8: DiG 9.10.3\n\n\n\u30b5\u30fc\u30d0\n\n\nOS: CentOS 6.7 on VirtualBox\n\n\u6a29\u5a01DNS\u30b5\u30fc\u30d0\n\n\nBind: 9.10.2-P3\nNSD: 4.1.3\nPowerDNS Authoritative Server 3.4.7(MySQL Backend)\nknotDNS 1.6.4\n\n\n\n\nOS: Microsoft Windows 2008R2\nOS: Microsoft Windows 2012R2\n\n\n\u8abf\u67fb\u5185\u5bb9\n\u5404DNS\u30b5\u30fc\u30d0\u4e0a\u306b\u30be\u30fc\u30f3example.com\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u305d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n$TTL 300\n@    IN SOA ns1.example.com. hostmaster.example.com. (\n                                    0       ; serial\n                                    1D      ; refresh\n                                    1H  ; retry\n                                    1W  ; expire\n                                    3H )    ; minimum\n       IN NS  ns1\nwww     IN A   <www.example.com\u306eIP\u30a2\u30c9\u30ec\u30b9>\nns1     IN A   <DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9>\nyyy.zzz IN A   <yyy.zzz.example.com\u306eIP\u30a2\u30c9\u30ec\u30b9>\n\n\nBind\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\nNSD\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\nPowerDNS\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\nknotDNS\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n\u3053\u306e\u30be\u30fc\u30f3\u306b\u5bfe\u3057\u3066QNAME-Minimisation\u306aresolver\u304c\u3001empty non-terminal\u3067\u3042\u308byyy.zzz.example.com\u306eA\u3092\u5f15\u3051\u308b\u304b\u3069\u3046\u304b\u3092\u8abf\u3079\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001draft-ietf-dnsop-qname-minimisation-07\n\u306eAppendix A\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308bAn algorithm to find the zone cut\u3092\u3001dig\u30b3\u30de\u30f3\u30c9\u306b\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\u65e2\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306f\u3001example.com\u306eNS\u30ec\u30b3\u30fc\u30c9\u3068\u305d\u306eA\u30ec\u30b3\u30fc\u30c9\u304c\u5b58\u5728\u3059\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\nexample.com.   IN  NS  ns1.example.com.\nexample.com.   IN  A   <DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9>\n\n\n\u7d50\u679c\n()\u4ed8\u304d\u306e\u6570\u5b57\u306f\u3001draft-ietf-dnsop-qname-minimisation-07\u306eAppendix A\u306e\u3082\u306e\u3067\u3059\u3002\n\nBind / NSD / knotDNS / Windoes 2012R2\n\n\u30af\u30a8\u30ea\u3092\u53d7\u4fe1\n\nQNAME = yyy.zzz.example.com.\n   TYPE  = A\n\nQNAME\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u5b58\u5728\u3057\u306a\u3044(0)\nPARENT = example.com. (1)\nCHILD = example.com. = PARENT (2)\nCHILD != QNAME (3)\n\nCHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\nCHILD = zzz.example.com.\n\nCHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044(5)\n\nns1.example.com.\u306bCHILD = zzz.example.com\u306eNS\u3092\u30af\u30a8\u30ea (6)\n$ dig @ zzz.example.com.  NS +norec\n\n\n\nBind\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nNSD\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nknotDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nWindows 2012R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\nCHILD != QNAME (3)\n\nCHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\nCHILD = yyy.zzz.example.com.\n\nCHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044 (5)\n\nns1.example.com.\u306bCHILD = yyy.zzz.example.com\u306eNS\u3092\u30af\u30a8\u30ea (6)\n$ dig @ yyy.zzz.example.com. NS +norec\n\n\n\nBind\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nNSD\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nknotDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nWindows 2012R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\n\nCHILD == QNAME \u306e\u305f\u3081CHILD(=QNAME)\u306eA\u3092\u30af\u30a8\u30ea\u3057\u3066\u7d42\u4e86 (3)\n$ dig @ yyy.zzz.example.com. A +norec\n\n\n\nBind\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nNSD\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nknotDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nWindows 2012R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\nPowerDNS ( pdnssec rectify-zone\u3092\u5b9f\u884c\u3057\u306a\u3044 )/ Windows 2008R2\n\n\u30af\u30a8\u30ea\u3092\u53d7\u4fe1\n\nQNAME = yyy.zzz.example.com.\n   TYPE  = A\n\nQNAME\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u5b58\u5728\u3057\u306a\u3044(0)\nPARENT = example.com. (1)\nCHILD = example.com. = PARENT (2)\nCHILD != QNAME (3)\n\nCHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\nCHILD = zzz.example.com.\n\nCHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044(5)\n\nns1.example.com.\u306bCHILD = zzz.example.com\u306eNS\u3092\u30af\u30a8\u30ea (6)\n$ dig @ zzz.example.com.  NS +norec\n\n\n\nPowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\nWindows 2008R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\u5fdc\u7b54\u306fNXDOMAIN\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001\u7d42\u4e86 (6c)\n\n\nPowerDNS ( pdnssec rectify-zone\u3092\u5b9f\u884c\u6e08\u307f )\nBackend(MySQL)\u306b\u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3042\u3068\u306b\u3001pdnssec rectify-zone\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ pdnssec rectify-zone example.com\nNon DNSSEC zone, only adding empty non-terminals\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001PowerDNS\u306fNOERROR\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u8a73\u7d30\u306fPowerDNS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8Rules for filling out fields in database backends\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30af\u30a8\u30ea\u3092\u53d7\u4fe1\n\nQNAME = yyy.zzz.example.com.\n   TYPE  = A\n\nQNAME\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u5b58\u5728\u3057\u306a\u3044(0)\nPARENT = example.com. (1)\nCHILD = example.com. = PARENT (2)\nCHILD != QNAME (3)\n\nCHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\nCHILD = zzz.example.com.\n\nCHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044(5)\n\nns1.example.com.\u306bCHILD = zzz.example.com\u306eNS\u3092\u30af\u30a8\u30ea (6)\n$ dig @ zzz.example.com.  NS +norec\n\n\n\nPowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\nCHILD != QNAME (3)\n\nCHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\nCHILD = yyy.zzz.example.com.\n\nCHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044 (5)\n\nns1.example.com.\u306bCHILD = yyy.zzz.example.com\u306eNS\u3092\u30af\u30a8\u30ea (6)\n$ dig @ yyy.zzz.example.com. NS +norec\n\n\n\nPowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\n\nCHILD == QNAME \u306e\u305f\u3081CHILD(=QNAME)\u306eA\u3092\u30af\u30a8\u30ea\u3057\u3066\u7d42\u4e86 (3)\n$ dig @ yyy.zzz.example.com. A +norec\n\n\n\nPowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\npdnssec rectify-zone\nPowerDNS(MySQL backend)\u306b\u3066pdnssec  rectify-zone\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001records\u30c6\u30fc\u30d6\u30eb\u3078zzz.example.com\u306b\u5bfe\u5fdc\u3059\u308b\u884c\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\u5b9f\u884c\u524d\nmysql> select * from records;\n+----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n| id | domain_id | name                | type | content                                                          | ttl  | prio | change_date | disabled | ordername | auth |\n+----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n|  1 |         1 | example.com         | SOA  | ns1.example.com hostmaster.example.com 0 86400 3600 604800 10800 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  2 |         1 | example.com         | NS   | ns1.example.com.                                                 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  3 |         1 | www.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  4 |         1 | ns1.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  5 |         1 | yyy.zzz.example.com | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n+----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n5 rows in set (0.00 sec)\n\n\u5b9f\u884c\u5f8c\nmysql> select * from records;\n+----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n| id | domain_id | name                | type | content                                                          | ttl  | prio | change_date | disabled | ordername | auth |\n+----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n|  1 |         1 | example.com         | SOA  | ns1.example.com hostmaster.example.com 0 86400 3600 604800 10800 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  2 |         1 | example.com         | NS   | ns1.example.com.                                                 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  3 |         1 | www.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  4 |         1 | ns1.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n|  5 |         1 | yyy.zzz.example.com | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n| 11 |         1 | zzz.example.com     | NULL | NULL                                                             | NULL | NULL |        NULL |        0 | NULL      |    1 |\n+----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n\n\u6700\u5f8c\u306bid = 11,  namae = \"zzz.example.com\"\u306e\u884c\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\u4ee5\u4e0b\u306eDNS\u30b5\u30fc\u30d0\u306f\u3001QNAME-MINIMISATION\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u304c\u51fa\u305f\u5834\u5408\u3001\u540d\u524d\u89e3\u6c7a\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\nPowerDNS Authoritative Server(pdnssec rectify-zone\u3092\u5b9f\u884c\u3057\u3066\u3044\u306a\u3044\uff09\nMicrosoft Windows 2008R2\n\nPowerDNS Authoritative Server\u306fpdnssec rectify-zone\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001QNAME-MINIMISATION\u306b\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3082\u3057\u3001PowerDNS\u8a2d\u5b9a\u7528\u306eGUI\u30c4\u30fc\u30eb\u306a\u3069\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001pdnssec rectify-zone\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u304b\uff08\u307e\u305f\u306f\u540c\u7b49\u306a\u6a5f\u80fd\u3092\u6709\u3057\u3066\u3044\u308b\u304b\uff09\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\u3061\u306a\u307f\u306bPowerAdmin 2.1.7\u306f\u3001\u30c0\u30e1\u3067\u3057\u305f\u3002\n## \u306f\u3058\u3081\u306b\n\n[QNAME-MINIMISATION\u306e\u5b9f\u88c5\u304c\u51fa\u3066\u304d\u305f\u3088\u3046\u306a\u306e\u3067](\"http://www.unbound.net/download.html\")\u3001\u6295\u7a3f\u3057\u307e\u3059\u3002\n \n* PowerDNS\u306ePeter van Dijk(@Habbie)\u3055\u3093\u304b\u3089\u3001PowerDNS\u3067\u306f\u30ec\u30b3\u30fc\u30c9\u3092\u767b\u9332\u5f8c\u306b`pdnssec  recitfy-zone`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3068\u30a2\u30c9\u30d0\u30a4\u30b9\u3092\u9802\u304d\u307e\u3057\u305f\u306e\u3067\u3001rectify-zone\u5b9f\u884c\u5f8c\u306e\u7d50\u679c\u3092\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\n* \u672c\u6295\u7a3f\u306f\u3001\u4ee5\u524d\u306b[GitHub\u4e0a\u306b\u4f5c\u6210\u3057\u305f\u8cc7\u6599](\"https://github.com/sischkg/qname-minimisation-test/blob/5756d7c9c6bea08389e7a6dde0e344e59273199e/qname_minimisation_result.ja.md\")\u306b\u8ffd\u8a18\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30fbdig\u306e\u7d50\u679c\u306e\u30ea\u30f3\u30af\u5148\u306fGitHub\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u3057\u3066\u3044\u307e\u3059\u3002\n* \u7b46\u8005\u306f\u3001Windows Server\u304a\u3088\u3073Microsoft DNS\u306e\u8d85\u521d\u5fc3\u8005\u3067\u3059\uff08\u904b\u7528\u3057\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u305b\u3093\uff09\u3002\n* \u6295\u7a3f\u6642\u306eURL\u304c\u9593\u9055\u3063\u3066\u3044\u305f(\u4e0b\u66f8\u304d\u3092\u6307\u3057\u3066\u3044\u305f\uff09\u306e\u3067\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\n\n## \u74b0\u5883\n\n### \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\n* OS: Ubuntu Mate 15.04\n* DNS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8: DiG 9.10.3\n\n### \u30b5\u30fc\u30d0\n\n* OS: CentOS 6.7 on VirtualBox\n  + \u6a29\u5a01DNS\u30b5\u30fc\u30d0\n     - Bind: 9.10.2-P3\n     - NSD: 4.1.3\n     - PowerDNS Authoritative Server 3.4.7(MySQL Backend)\n     - knotDNS 1.6.4\n\n* OS: Microsoft Windows 2008R2\n* OS: Microsoft Windows 2012R2\n\n## \u8abf\u67fb\u5185\u5bb9\n\n\u5404DNS\u30b5\u30fc\u30d0\u4e0a\u306b\u30be\u30fc\u30f3example.com\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u305d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n    $TTL 300\n    @    IN SOA ns1.example.com. hostmaster.example.com. (\n                                        0       ; serial\n                                        1D      ; refresh\n                                        1H\t; retry\n                                        1W\t; expire\n                                        3H )\t; minimum\n           IN NS  ns1\n    www     IN A   <www.example.com\u306eIP\u30a2\u30c9\u30ec\u30b9>\n    ns1     IN A   <DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9>\n    yyy.zzz IN A   <yyy.zzz.example.com\u306eIP\u30a2\u30c9\u30ec\u30b9>\n\n\n* [Bind\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb](https://github.com/sischkg/qname-minimisation-test/tree/master/config/bind)\n* [NSD\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb](https://github.com/sischkg/qname-minimisation-test/tree/master/config/nsd)\n* [PowerDNS\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb](https://github.com/sischkg/qname-minimisation-test/tree/master/config/powerdns)\n* [knotDNS\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb](https://github.com/sischkg/qname-minimisation-test/tree/master/config/knot)\n\n\u3053\u306e\u30be\u30fc\u30f3\u306b\u5bfe\u3057\u3066QNAME-Minimisation\u306aresolver\u304c\u3001empty non-terminal\u3067\u3042\u308b`yyy.zzz.example.com`\u306eA\u3092\u5f15\u3051\u308b\u304b\u3069\u3046\u304b\u3092\u8abf\u3079\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001[draft-ietf-dnsop-qname-minimisation-07](https://tools.ietf.org/html/draft-ietf-dnsop-qname-minimisation-07)\n\u306eAppendix A\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b*An algorithm to find the zone cut*\u3092\u3001dig\u30b3\u30de\u30f3\u30c9\u306b\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n### \u524d\u63d0\u6761\u4ef6\n\n\u65e2\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306f\u3001example.com\u306eNS\u30ec\u30b3\u30fc\u30c9\u3068\u305d\u306eA\u30ec\u30b3\u30fc\u30c9\u304c\u5b58\u5728\u3059\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n    example.com.   IN  NS  ns1.example.com.\n    example.com.   IN  A   <DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9>\n\n## \u7d50\u679c\n\n()\u4ed8\u304d\u306e\u6570\u5b57\u306f\u3001[draft-ietf-dnsop-qname-minimisation-07](https://tools.ietf.org/html/draft-ietf-dnsop-qname-minimisation-07)\u306eAppendix A\u306e\u3082\u306e\u3067\u3059\u3002\n\n### Bind / NSD / knotDNS / Windoes 2012R2\n\n1. \u30af\u30a8\u30ea\u3092\u53d7\u4fe1\n\n   QNAME = yyy.zzz.example.com.\n   TYPE  = A\n\n2. QNAME\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u5b58\u5728\u3057\u306a\u3044(0)\n\n3. `PARENT = example.com.` (1)\n\n4. `CHILD = example.com. = PARENT` (2)\n\n5. `CHILD != QNAME` (3)\n\n6. CHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\n\n    CHILD = zzz.example.com.\n\n7. CHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044(5)\n\n8. ns1.example.com.\u306b`CHILD = zzz.example.com`\u306eNS\u3092\u30af\u30a8\u30ea (6)\n\n    $ dig @<DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9> zzz.example.com.  NS +norec\n\n   * [Bind\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/bind/bind_01_zzz.example.com_ns.txt)\n   * [NSD\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/nsd/nsd_01_zzz.example.com_ns.txt)\n   * [knotDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/knot/knot_01_zzz.example.com_ns.txt)\n   * [Windows 2012R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/win2012r2/win2012r2_01_zzz.example.com_ns.txt)\n\n9. \u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\n\n10. `CHILD != QNAME` (3)\n\n11. CHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\n\n    CHILD = yyy.zzz.example.com.\n\n12. CHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044 (5)\n\n13. ns1.example.com.\u306b`CHILD = yyy.zzz.example.com`\u306eNS\u3092\u30af\u30a8\u30ea (6)\n\n    $ dig @<DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9> yyy.zzz.example.com. NS +norec\n\n   * [Bind\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/bind/bind_02_yyy.zzz.example.com_ns.txt)\n   * [NSD\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/nsd/nsd_02_yyy.zzz.example.com_ns.txt)\n   * [knotDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/knot/knot_02_yyy.zzz.example.com_ns.txt)\n   * [Windows 2012R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/win2012r2/win2012r2_02_yyy.zzz.example.com_ns.txt)\n\n14. \u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\n\n15. `CHILD == QNAME` \u306e\u305f\u3081CHILD(=QNAME)\u306eA\u3092\u30af\u30a8\u30ea\u3057\u3066\u7d42\u4e86 (3)\n\n    $ dig @<DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9> yyy.zzz.example.com. A +norec\n\n   * [Bind\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/bind/bind_03_yyy.zzz.example.com_a.txt)\n   * [NSD\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/nsd/nsd_03_yyy.zzz.example.com_a.txt)\n   * [knotDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/knot/knot_03_yyy.zzz.example.com_a.txt)\n   * [Windows 2012R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/win2012r2/win2012r2_03_yyy.zzz.example.com_a.txt)\n\n\n### PowerDNS ( pdnssec rectify-zone\u3092\u5b9f\u884c\u3057\u306a\u3044 )/ Windows 2008R2\n\n1. \u30af\u30a8\u30ea\u3092\u53d7\u4fe1\n\n   QNAME = yyy.zzz.example.com.\n   TYPE  = A\n\n2. QNAME\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u5b58\u5728\u3057\u306a\u3044(0)\n\n3. `PARENT = example.com.` (1)\n\n4. `CHILD = example.com. = PARENT` (2)\n\n5. `CHILD != QNAME` (3)\n\n6. CHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\n\n    CHILD = zzz.example.com.\n\n7. CHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044(5)\n\n8. ns1.example.com.\u306b`CHILD = zzz.example.com`\u306eNS\u3092\u30af\u30a8\u30ea (6)\n\n    $ dig @<DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9> zzz.example.com.  NS +norec\n\n   * [PowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/powerdns/powerdns_01_zzz.example.com_ns.txt)\n   * [Windows 2008R2\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/win2008r2/win2008r2_01_zzz.example.com_ns.txt)\n\n9. \u5fdc\u7b54\u306fNXDOMAIN\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001\u7d42\u4e86 (6c)\n\n\n### PowerDNS ( pdnssec rectify-zone\u3092\u5b9f\u884c\u6e08\u307f )\n\nBackend(MySQL)\u306b\u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3042\u3068\u306b\u3001`pdnssec rectify-zone`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n    $ pdnssec rectify-zone example.com\n    Non DNSSEC zone, only adding empty non-terminals\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001PowerDNS\u306fNOERROR\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u8a73\u7d30\u306fPowerDNS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8[Rules for filling out fields in database backends](\"https://doc.powerdns.com/md/authoritative/dnssec/#rules-for-filling-out-fields-in-database-backends\")\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n1. \u30af\u30a8\u30ea\u3092\u53d7\u4fe1\n\n   QNAME = yyy.zzz.example.com.\n   TYPE  = A\n\n2. QNAME\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u5b58\u5728\u3057\u306a\u3044(0)\n\n3. `PARENT = example.com.` (1)\n\n4. `CHILD = example.com. = PARENT` (2)\n\n5. `CHILD != QNAME` (3)\n\n6. CHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\n\n    CHILD = zzz.example.com.\n\n7. CHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044(5)\n\n8. ns1.example.com.\u306b`CHILD = zzz.example.com`\u306eNS\u3092\u30af\u30a8\u30ea (6)\n\n    $ dig @<DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9> zzz.example.com.  NS +norec\n\n   * [PowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/powerdns/powerdns_rectify_01_zzz.example.com_ns.txt)\n\n9. \u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\n\n10. `CHILD != QNAME` (3)\n\n11. CHILD\u306b\u30e9\u30d9\u30eb\u3092\uff11\u3064\u8ffd\u52a0 (4)\n\n    CHILD = yyy.zzz.example.com.\n\n12. CHILD\u306eNS RRset\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044 (5)\n\n13. ns1.example.com.\u306b`CHILD = yyy.zzz.example.com`\u306eNS\u3092\u30af\u30a8\u30ea (6)\n\n    $ dig @<DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9> yyy.zzz.example.com. NS +norec\n\n   * [PowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/powerdns/powerdns_rectify_02_yyy.zzz.example.com_ns.txt)\n\n14. \u5fdc\u7b54\u306fNOERROR/NODATA answer\u3067\u3042\u308b\u305f\u3081\u3001\u5fdc\u7b54\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58\u3057\u3001(3)\u3078 (6d)\n\n15. `CHILD == QNAME` \u306e\u305f\u3081CHILD(=QNAME)\u306eA\u3092\u30af\u30a8\u30ea\u3057\u3066\u7d42\u4e86 (3)\n\n    $ dig @<DNS\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9> yyy.zzz.example.com. A +norec\n\n   * [PowerDNS\u306b\u5bfe\u3059\u308b\u30af\u30a8\u30ea\u3068\u30ec\u30b9\u30dd\u30f3\u30b9](https://github.com/sischkg/qname-minimisation-test/blob/master/results/powerdns/powerdns_rectify_03_yyy.zzz.example.com_a.txt)\n\n#### pdnssec rectify-zone\n\nPowerDNS(MySQL backend)\u306b\u3066`pdnssec  rectify-zone`\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001records\u30c6\u30fc\u30d6\u30eb\u3078`zzz.example.com`\u306b\u5bfe\u5fdc\u3059\u308b\u884c\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\n\u5b9f\u884c\u524d\n\n    mysql> select * from records;\n    +----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n    | id | domain_id | name                | type | content                                                          | ttl  | prio | change_date | disabled | ordername | auth |\n    +----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n    |  1 |         1 | example.com         | SOA  | ns1.example.com hostmaster.example.com 0 86400 3600 604800 10800 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  2 |         1 | example.com         | NS   | ns1.example.com.                                                 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  3 |         1 | www.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  4 |         1 | ns1.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  5 |         1 | yyy.zzz.example.com | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    +----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n    5 rows in set (0.00 sec)\n\n\u5b9f\u884c\u5f8c\n\n    mysql> select * from records;\n    +----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n    | id | domain_id | name                | type | content                                                          | ttl  | prio | change_date | disabled | ordername | auth |\n    +----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n    |  1 |         1 | example.com         | SOA  | ns1.example.com hostmaster.example.com 0 86400 3600 604800 10800 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  2 |         1 | example.com         | NS   | ns1.example.com.                                                 |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  3 |         1 | www.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  4 |         1 | ns1.example.com     | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    |  5 |         1 | yyy.zzz.example.com | A    | 192.168.33.13                                                    |  300 | NULL |        NULL |        0 | NULL      |    1 |\n    | 11 |         1 | zzz.example.com     | NULL | NULL                                                             | NULL | NULL |        NULL |        0 | NULL      |    1 |\n    +----+-----------+---------------------+------+------------------------------------------------------------------+------+------+-------------+----------+-----------+------+\n\n\u6700\u5f8c\u306b`id = 11,  namae = \"zzz.example.com\"`\u306e\u884c\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n## \u307e\u3068\u3081\n\n\u4ee5\u4e0b\u306eDNS\u30b5\u30fc\u30d0\u306f\u3001QNAME-MINIMISATION\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u304c\u51fa\u305f\u5834\u5408\u3001\u540d\u524d\u89e3\u6c7a\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\n* PowerDNS Authoritative Server(`pdnssec rectify-zone`\u3092\u5b9f\u884c\u3057\u3066\u3044\u306a\u3044\uff09\n* Microsoft Windows 2008R2\n\nPowerDNS Authoritative Server\u306f`pdnssec rectify-zone`\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001QNAME-MINIMISATION\u306b\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3082\u3057\u3001PowerDNS\u8a2d\u5b9a\u7528\u306eGUI\u30c4\u30fc\u30eb\u306a\u3069\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001`pdnssec rectify-zone`\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u304b\uff08\u307e\u305f\u306f\u540c\u7b49\u306a\u6a5f\u80fd\u3092\u6709\u3057\u3066\u3044\u308b\u304b\uff09\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u3061\u306a\u307f\u306b[PowerAdmin 2.1.7](http://www.poweradmin.org/)\u306f\u3001\u30c0\u30e1\u3067\u3057\u305f\u3002\n", "tags": ["dns", "bind", "NSD", "PowerDNS"]}