{"context": "\n\n\u306f\u3058\u3081\u306b\n\u300cFPGA+SoC+Linux+Device Tree Overlay+FPGA Manager(\u30d6\u30fc\u30c8\u30a4\u30e1\u30fc\u30b8\u306e\u63d0\u4f9b) @Qiita\u300d\u3067\u3001ZYBO \u3068 DE0-Nano-SoC \u7528\u306e Device Tree Overay \u3068 FPGA Manager \u306b\u5bfe\u5fdc\u3057\u305f Linux Kernel \u3068 Debian8 RootFS \u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u65b0\u305f\u306b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3068\u3057\u3066 PYNQ-Z1 \u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002PYNQ-Z1 \u306b\u95a2\u3057\u3066\u306f\u6b21\u306e URL \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nhttp://www.pynq.io\n\n\u306a\u304a\u3001\u73fe\u6642\u70b9\u3067\u306e Linux \u306e FPGA Manager \u3068 Device Tree Overlay \u306e\u30b5\u30dd\u30fc\u30c8\u306f\u66ab\u5b9a\u7684\u304b\u3064\u9650\u5b9a\u7684\u306a\u3082\u306e\u3067\u3001\u5c06\u6765\u3069\u3046\u306a\u308b\u304b\u306f\u672a\u3060\u4e0d\u660e\u306a\u90e8\u5206\u304c\u3042\u308b\u3053\u3068\u3092\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u3002\u3053\u3053\u3067\u7d39\u4ecb\u3057\u3066\u3044\u308b dtbocfg \u3084 fpgacfg \u3068\u8a00\u3063\u305f\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u306f\u3001\u73fe\u6642\u70b9\u3067 Linux \u304c\u63d0\u4f9b\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u5074\u3068\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u79c1\u304c\u52dd\u624b\u306b\u8ffd\u52a0\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\n\u6982\u8981\n\nHardware\n\n\nPYNQ-Z1 : Python Productive for Zynq by Digilent\n\n\nU-Boot v2016.03 (customized)\n\n\nBuild for ZYBO, PYNQ-Z1 and DE0-Nano-SoC\nCustomized boot by uEnv.txt\nCustomized boot by boot.scr\n\n\nLinux Kernel Version v4.8.17\n\n\nAvailable in both Xilinx-Zynq-7000 and Altera-SoC in a single image\nEnable Device Tree Overlay\nEnable FPGA Manager\n\n\nDebian8(jessie) Root File System\n\n\nInstalled build-essential\nInstalled device-tree-compiler\nInstalled ruby ruby-msgpack ruby-serialport\nInstalled u-boot-tools\n\n\nFPGA Device Drivers\n\n\ndtbocfg    (Device Tree Blob Overlay Configuration File System)\nfpgacfg    (FPGA Configuration Interface for Linux FPGA Manager Framework)\nfclkcfg    (FPGA Clock Configuration Device Driver)\nudmabuf    (User space mappable DMA Buffer)\nzptty      (Pseudo TeleTYpewriter for FPGA Device)\n\n\n\n\nPYNQ-Z1 \u3078\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ngithub \u304b\u3089\u6b21\u306e\u3088\u3046\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u73fe\u6642\u70b9\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306f v0.3.0 \u3067\u3059\u3002\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u306a\u304a\u3001\u3044\u304f\u3064\u304b\u306e\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u306f\u304b\u306a\u308a\u5927\u304d\u3044\u306e\u3067\u3001Git LFS(Large File Storage)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u304a\u4f7f\u3044\u306e\u74b0\u5883\u306b git-lfs \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nshell$ git clone git://github.com/ikwzm/FPGA-SoC-Linux\nshell$ cd FPGA-SoC-Linux\nshell$ git checkout v0.3.0\nshell$ git lfs pull\n\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u8aac\u660e\ntarget/zynq-pynqz1/boot \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5404\u30d5\u30a1\u30a4\u30eb\u306e\u8a73\u7d30\u306f\u3001\u300cFPGA+SoC+Linux\u306e\u30d6\u30fc\u30c8\u30b7\u30fc\u30b1\u30f3\u30b9(ZYNQ+U-Boot-SPL\u7de8)\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\ntareget/zynq-pynqz1/\n\n\nboot/\n\n\nboot.bin                                                  : Stage 1 Boot Loader(U-boot-spl)\nu-boot.img                                                : Stage 2 Boot Loader(U-boot)\nuEnv.txt                                                  : U-Boot environment variables for linux boot\nzImage-4.8.17-armv7-fpga                                  : Linux Kernel Image\n\ndevicetree-4.8.17-zynq-pynqz1.dtb                         : Linux Device Tree Blob\n\ndevicetree-4.8.17-zynq-pynqz1.dts                         : Linux Device Tree Source\n\n\n\n\ndebian8-rootfs-vanilla.tgz                                    : Debian8 Root File System (use Git LFS)\nlinux-image-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb   : Linux Image Package      (use Git LFS)\nlinux-headers-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb : Linux Headers Package    (use Git LFS)\nfpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb    : Device Drivers Package   (use Git LFS)\n\n\nSD-Card \u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff11\u3092 FAT File System \u3067\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308a\u307e\u3059\u3002\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff12\u3092 ext3 File System \u3067\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u65b9\u6cd5\u306e\u8a73\u7d30\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n\nSD-Card \u3078\u306e\u66f8\u304d\u8fbc\u307f\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff11(\u4e0b\u306e\u4f8b\u3067\u306f/dev/sdc1)\u306b target/zynq-pynqz1/boot/ \u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff12(\u4e0b\u306e\u4f8b\u3067\u306f/dev/sdc2)\u306b debian8-rootfs-vanilla.tgz \u306e\u4e2d\u8eab\u3092\u5c55\u958b\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u5c55\u958b\u3057\u305f\u30eb\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e home/fpga \u306b fpga-soc-linux-drivers \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u3042\u3089\u304b\u3058\u3081\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u5f8c\u304b\u3089 network \u7d4c\u7531\u3067\u30b3\u30d4\u30fc\u3057\u3066\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\nshell# mount /dev/sdc1 /mnt/usb1\nshell# mount /dev/sdc2 /mnt/usb2\nshell# cp target/zynq-pynqz1/boot/*                                     /mnt/usb1\nshell# tar xfz debian8-rootfs-vanilla.tgz -C                            /mnt/usb2\nshell# cp linux-image-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb   /mnt/usb2/home/fpga\nshell# cp linux-headers-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb /mnt/usb2/home/fpga\nshell# cp fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb    /mnt/usb2/home/fpga\nshell# umount mnt/usb1\nshell# umount mnt/usb2\n\n\n\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30ea\u30d6\u30fc\u30c8\u3057\u3066 fpga \u307e\u305f\u306f root \u3067\u30ed\u30b0\u30a4\u30f3\nfpga\u3000\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f \"fpga\"\u3000\u3067\u3059\u3002\ndebian-fpga login: fpga\nPassword:\nfpga@debian-fpga:~$\n\nroot \u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f \"admin\" \u3067\u3059\u3002\ndebian-fpga login: root\nPassword:\nroot@debian-fpga:~#\n\n\nLinux \u30d8\u30c3\u30c0/\u30a4\u30e1\u30fc\u30b8 \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5148\u7acb\u3063\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a Linux \u30d8\u30c3\u30c0/\u30a4\u30e1\u30fc\u30b8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u306f\u3001\u5bfe\u5fdc\u3059\u308b Linux \u30ab\u30fc\u30cd\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d8\u30c3\u30c0/\u30a4\u30e1\u30fc\u30b8\u304c\u5fc5\u8981\u3067\u3059\u3002\nfpga@debian-fpga:~$ sudo dpkg -i linux-image-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb\nfpga@debian-fpga:~$ sudo dpkg -i linux-headers-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb\n\n\n\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0 \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ndpkg \u3092\u4f7f\u3063\u3066 fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nfpga@debian-fpga:~$ sudo dpkg -i fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb\nsudo: unable to resolve host debian-fpga\nSelecting previously unselected package fpga-soc-linux-drivers-4.8.17-armv7-fpga.\n(Reading database ... 37627 files and directories currently installed.)\nPreparing to unpack fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb ...\nUnpacking fpga-soc-linux-drivers-4.8.17-armv7-fpga (0.0.3-1) ...\nSetting up fpga-soc-linux-drivers-4.8.17-armv7-fpga (0.0.3-1) ...\nCreated symlink from /etc/systemd/system/multi-user.target.wants/device-tree-overlay.service to /etc/systemd/system/device-tree-overlay.service.\nCreated symlink from /etc/systemd/system/multi-user.target.wants/fpga-manager.service to /etc/systemd/system/fpga-manager.service.\nCreated symlink from /etc/systemd/system/multi-user.target.wants/udmabuf.service to /etc/systemd/system/udmabuf.service.\nCreated symlink from /etc/systemd/system/multi-user.target.wants/zptty.service to /etc/systemd/system/zptty.service.\n\n\u306a\u304a\u3001v0.1.3(Linux Kernel Version 4.4.7\u7248) \u306e fpga-soc-linux-drivers-4.4.7-armv7-fpga_0.0.2-1_armhf.deb \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e RootFS \u306b fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.2-1_armhf.deb \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30b3\u30f3\u30d5\u30ea\u30af\u30c8\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u79c1\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u4f5c\u6210\u30df\u30b9\u3067\u3059\u3002\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u6b21\u306e\u69d8\u306b\u5148\u306b fpga-soc-linux-drivers-4.4.7-armv7-fpga_0.0.2-1_armhf.deb \u3092\u524a\u9664\u3057\u3066\u304b\u3089\u3001fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.2-1_armhf.deb \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nfpga@debian-fpga:~$ sudo dpkg --purge fpga-soc-linux-drivers-4.4.7-armv7-fpga\n\n\n\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\nfpga@debian-fpga:~$ sudo lsmod\nModule                  Size  Used by\nzptty                   8529  0\nudmabuf                10177  0\nfpgacfg                12287  0\ndtbocfg                 3200  2\nfpga@debian-fpga:~$ sudo systemctl status device-tree-overlay.service\n\u25cf device-tree-overlay.service - Device Tree Overlay Service.\n   Loaded: loaded (/etc/systemd/system/device-tree-overlay.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:08 JST; 1min 22s ago\n  Process: 1461 ExecStart=/sbin/modprobe dtbocfg (code=exited, status=0/SUCCESS)\n Main PID: 1461 (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/device-tree-overlay.service\n\nApr 30 07:50:08 debian-fpga systemd[1]: Started Device Tree Overlay Service..\nfpga@debian-fpga:~$ sudo systemctl status fpga-manager.service\n\u25cf fpga-manager.service - FPGA Manager Service.\n   Loaded: loaded (/etc/systemd/system/fpga-manager.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:09 JST; 2min 46s ago\n  Process: 1477 ExecStart=/sbin/modprobe fpgacfg (code=exited, status=0/SUCCESS)\n  Process: 1467 ExecStartPre=/usr/bin/fpgacfg_load_overlay.rb (code=exited, status=0/SUCCESS)\n Main PID: 1477 (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/fpga-manager.service\n\nApr 30 07:50:09 debian-fpga systemd[1]: Started FPGA Manager Service..\nfpga@debian-fpga:~$ sudo systemctl status udmabuf.service\n\u25cf udmabuf.service - User space mappable DMA Buffer Service.\n   Loaded: loaded (/etc/systemd/system/udmabuf.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:09 JST; 3min 50s ago\n  Process: 1484 ExecStart=/sbin/modprobe udmabuf (code=exited, status=0/SUCCESS)\n Main PID: 1484 (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/udmabuf.service\n\nApr 30 07:50:09 debian-fpga systemd[1]: Started User space mappable DMA Buff....\nHint: Some lines were ellipsized, use -l to show in full.\nfpga@debian-fpga:~$ sudo systemctl status zptty.service\n\u25cf zptty.service - Pseudo TTY Driver for communication with FPGA.\n   Loaded: loaded (/etc/systemd/system/zptty.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:09 JST; 4min 40s ago\n  Process: 1491 ExecStart=/sbin/modprobe zptty (code=exited, status=0/SUCCESS)\n Main PID: 1491 (code=exited, status=0/SUCCESS)\n\n\n\u53c2\u8003\n\nhttps://github.com/ikwzm/FPGA-SoC-Linux\n\u300cFPGA+SoC+Linux+Device Tree Overlay+FPGA Manager(\u30d6\u30fc\u30c8\u30a4\u30e1\u30fc\u30b8\u306e\u63d0\u4f9b) @Qiita\u300d\n\n## \u306f\u3058\u3081\u306b\n\n[\u300cFPGA+SoC+Linux+Device Tree Overlay+FPGA Manager(\u30d6\u30fc\u30c8\u30a4\u30e1\u30fc\u30b8\u306e\u63d0\u4f9b) @Qiita\u300d](http://qiita.com/ikwzm/items/cdeb3c9c352776eac683)\u3067\u3001ZYBO \u3068 DE0-Nano-SoC \u7528\u306e Device Tree Overay \u3068 FPGA Manager \u306b\u5bfe\u5fdc\u3057\u305f Linux Kernel \u3068 Debian8 RootFS \u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\n\n\u4eca\u56de\u306f\u65b0\u305f\u306b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3068\u3057\u3066 PYNQ-Z1 \u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002PYNQ-Z1 \u306b\u95a2\u3057\u3066\u306f\u6b21\u306e URL \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n - [http://www.pynq.io](http://www.pynq.io)\n\n\u306a\u304a\u3001\u73fe\u6642\u70b9\u3067\u306e Linux \u306e FPGA Manager \u3068 Device Tree Overlay \u306e\u30b5\u30dd\u30fc\u30c8\u306f\u66ab\u5b9a\u7684\u304b\u3064\u9650\u5b9a\u7684\u306a\u3082\u306e\u3067\u3001\u5c06\u6765\u3069\u3046\u306a\u308b\u304b\u306f\u672a\u3060\u4e0d\u660e\u306a\u90e8\u5206\u304c\u3042\u308b\u3053\u3068\u3092\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u3002\u3053\u3053\u3067\u7d39\u4ecb\u3057\u3066\u3044\u308b dtbocfg \u3084 fpgacfg \u3068\u8a00\u3063\u305f\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u306f\u3001\u73fe\u6642\u70b9\u3067 Linux \u304c\u63d0\u4f9b\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u5074\u3068\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u79c1\u304c\u52dd\u624b\u306b\u8ffd\u52a0\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\n## \u6982\u8981\n\n* Hardware\n  + PYNQ-Z1 : Python Productive for Zynq by Digilent\n* U-Boot v2016.03 (customized)\n  + Build for ZYBO, PYNQ-Z1 and DE0-Nano-SoC\n  + Customized boot by uEnv.txt\n  + Customized boot by boot.scr\n* Linux Kernel Version v4.8.17\n  + Available in both Xilinx-Zynq-7000 and Altera-SoC in a single image\n  + Enable Device Tree Overlay\n  + Enable FPGA Manager\n* Debian8(jessie) Root File System\n  + Installed build-essential\n  + Installed device-tree-compiler\n  + Installed ruby ruby-msgpack ruby-serialport\n  + Installed u-boot-tools\n* FPGA Device Drivers\n  + [dtbocfg    (Device Tree Blob Overlay Configuration File System)](https://github.com/ikwzm/dtbocfg)\n  + [fpgacfg    (FPGA Configuration Interface for Linux FPGA Manager Framework)](https://github.com/ikwzm/fpgacfg)\n  + [fclkcfg    (FPGA Clock Configuration Device Driver)](https://github.com/ikwzm/fclkcfg)\n  + [udmabuf    (User space mappable DMA Buffer)](https://github.com/ikwzm/udmabuf)\n  + [zptty      (Pseudo TeleTYpewriter for FPGA Device)](https://github.com/ikwzm/PTTY_AXI4)\n\n## PYNQ-Z1 \u3078\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\ngithub \u304b\u3089\u6b21\u306e\u3088\u3046\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u73fe\u6642\u70b9\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306f v0.3.0 \u3067\u3059\u3002\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u306a\u304a\u3001\u3044\u304f\u3064\u304b\u306e\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u306f\u304b\u306a\u308a\u5927\u304d\u3044\u306e\u3067\u3001Git LFS(Large File Storage)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u304a\u4f7f\u3044\u306e\u74b0\u5883\u306b git-lfs \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\nshell$ git clone git://github.com/ikwzm/FPGA-SoC-Linux\nshell$ cd FPGA-SoC-Linux\nshell$ git checkout v0.3.0\nshell$ git lfs pull\n```\n\n### \u30d5\u30a1\u30a4\u30eb\u306e\u8aac\u660e\n\ntarget/zynq-pynqz1/boot \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5404\u30d5\u30a1\u30a4\u30eb\u306e\u8a73\u7d30\u306f\u3001[\u300cFPGA+SoC+Linux\u306e\u30d6\u30fc\u30c8\u30b7\u30fc\u30b1\u30f3\u30b9(ZYNQ+U-Boot-SPL\u7de8)\u300d](http://qiita.com/ikwzm/items/efacec8d8e0744e17d45)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n * tareget/zynq-pynqz1/\n   + boot/\n     - boot.bin                                                  : Stage 1 Boot Loader(U-boot-spl)\n     - u-boot.img                                                : Stage 2 Boot Loader(U-boot)\n     - uEnv.txt                                                  : U-Boot environment variables for linux boot\n     - zImage-4.8.17-armv7-fpga                                  : Linux Kernel Image       \n     - devicetree-4.8.17-zynq-pynqz1.dtb                         : Linux Device Tree Blob   \n     - devicetree-4.8.17-zynq-pynqz1.dts                         : Linux Device Tree Source\n * debian8-rootfs-vanilla.tgz                                    : Debian8 Root File System (use Git LFS)\n * linux-image-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb   : Linux Image Package      (use Git LFS)\n * linux-headers-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb : Linux Headers Package    (use Git LFS)\n * fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb    : Device Drivers Package   (use Git LFS)\n\n### SD-Card \u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff11\u3092 FAT File System \u3067\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308a\u307e\u3059\u3002\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff12\u3092 ext3 File System \u3067\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u65b9\u6cd5\u306e\u8a73\u7d30\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n\n### SD-Card \u3078\u306e\u66f8\u304d\u8fbc\u307f\n\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff11(\u4e0b\u306e\u4f8b\u3067\u306f/dev/sdc1)\u306b target/zynq-pynqz1/boot/ \u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nSD-Card \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff12(\u4e0b\u306e\u4f8b\u3067\u306f/dev/sdc2)\u306b debian8-rootfs-vanilla.tgz \u306e\u4e2d\u8eab\u3092\u5c55\u958b\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u5c55\u958b\u3057\u305f\u30eb\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e home/fpga \u306b fpga-soc-linux-drivers \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u3042\u3089\u304b\u3058\u3081\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u5f8c\u304b\u3089 network \u7d4c\u7531\u3067\u30b3\u30d4\u30fc\u3057\u3066\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\n````\nshell# mount /dev/sdc1 /mnt/usb1\nshell# mount /dev/sdc2 /mnt/usb2\nshell# cp target/zynq-pynqz1/boot/*                                     /mnt/usb1\nshell# tar xfz debian8-rootfs-vanilla.tgz -C                            /mnt/usb2\nshell# cp linux-image-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb   /mnt/usb2/home/fpga\nshell# cp linux-headers-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb /mnt/usb2/home/fpga\nshell# cp fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb    /mnt/usb2/home/fpga\nshell# umount mnt/usb1\nshell# umount mnt/usb2\n````\n\n## \u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### \u30ea\u30d6\u30fc\u30c8\u3057\u3066 fpga \u307e\u305f\u306f root \u3067\u30ed\u30b0\u30a4\u30f3\n\nfpga\u3000\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f \"fpga\"\u3000\u3067\u3059\u3002\n\n```\ndebian-fpga login: fpga\nPassword:\nfpga@debian-fpga:~$\n```\n\nroot \u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f \"admin\" \u3067\u3059\u3002\n\n```\ndebian-fpga login: root\nPassword:\nroot@debian-fpga:~#\n```\n\n### Linux \u30d8\u30c3\u30c0/\u30a4\u30e1\u30fc\u30b8 \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5148\u7acb\u3063\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a Linux \u30d8\u30c3\u30c0/\u30a4\u30e1\u30fc\u30b8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u306f\u3001\u5bfe\u5fdc\u3059\u308b Linux \u30ab\u30fc\u30cd\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d8\u30c3\u30c0/\u30a4\u30e1\u30fc\u30b8\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n```\nfpga@debian-fpga:~$ sudo dpkg -i linux-image-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb\nfpga@debian-fpga:~$ sudo dpkg -i linux-headers-4.8.17-armv7-fpga_4.8.17-armv7-fpga-1_armhf.deb\n```\n\n### \u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0 \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ndpkg \u3092\u4f7f\u3063\u3066 fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\nfpga@debian-fpga:~$ sudo dpkg -i fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb\nsudo: unable to resolve host debian-fpga\nSelecting previously unselected package fpga-soc-linux-drivers-4.8.17-armv7-fpga.\n(Reading database ... 37627 files and directories currently installed.)\nPreparing to unpack fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.3-1_armhf.deb ...\nUnpacking fpga-soc-linux-drivers-4.8.17-armv7-fpga (0.0.3-1) ...\nSetting up fpga-soc-linux-drivers-4.8.17-armv7-fpga (0.0.3-1) ...\nCreated symlink from /etc/systemd/system/multi-user.target.wants/device-tree-overlay.service to /etc/systemd/system/device-tree-overlay.service.\nCreated symlink from /etc/systemd/system/multi-user.target.wants/fpga-manager.service to /etc/systemd/system/fpga-manager.service.\nCreated symlink from /etc/systemd/system/multi-user.target.wants/udmabuf.service to /etc/systemd/system/udmabuf.service.\nCreated symlink from /etc/systemd/system/multi-user.target.wants/zptty.service to /etc/systemd/system/zptty.service.\n```\n\n\u306a\u304a\u3001v0.1.3(Linux Kernel Version 4.4.7\u7248) \u306e fpga-soc-linux-drivers-4.4.7-armv7-fpga_0.0.2-1_armhf.deb \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e RootFS \u306b fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.2-1_armhf.deb \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30b3\u30f3\u30d5\u30ea\u30af\u30c8\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u79c1\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u4f5c\u6210\u30df\u30b9\u3067\u3059\u3002\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u6b21\u306e\u69d8\u306b\u5148\u306b fpga-soc-linux-drivers-4.4.7-armv7-fpga_0.0.2-1_armhf.deb \u3092\u524a\u9664\u3057\u3066\u304b\u3089\u3001fpga-soc-linux-drivers-4.8.17-armv7-fpga_0.0.2-1_armhf.deb \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nfpga@debian-fpga:~$ sudo dpkg --purge fpga-soc-linux-drivers-4.4.7-armv7-fpga\n```\n\n\n### \u30c7\u30d0\u30a4\u30b9\u30c9\u30e9\u30a4\u30d0\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\n\n```\nfpga@debian-fpga:~$ sudo lsmod\nModule                  Size  Used by\nzptty                   8529  0\nudmabuf                10177  0\nfpgacfg                12287  0\ndtbocfg                 3200  2\nfpga@debian-fpga:~$ sudo systemctl status device-tree-overlay.service\n\u25cf device-tree-overlay.service - Device Tree Overlay Service.\n   Loaded: loaded (/etc/systemd/system/device-tree-overlay.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:08 JST; 1min 22s ago\n  Process: 1461 ExecStart=/sbin/modprobe dtbocfg (code=exited, status=0/SUCCESS)\n Main PID: 1461 (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/device-tree-overlay.service\n\nApr 30 07:50:08 debian-fpga systemd[1]: Started Device Tree Overlay Service..\nfpga@debian-fpga:~$ sudo systemctl status fpga-manager.service\n\u25cf fpga-manager.service - FPGA Manager Service.\n   Loaded: loaded (/etc/systemd/system/fpga-manager.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:09 JST; 2min 46s ago\n  Process: 1477 ExecStart=/sbin/modprobe fpgacfg (code=exited, status=0/SUCCESS)\n  Process: 1467 ExecStartPre=/usr/bin/fpgacfg_load_overlay.rb (code=exited, status=0/SUCCESS)\n Main PID: 1477 (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/fpga-manager.service\n\nApr 30 07:50:09 debian-fpga systemd[1]: Started FPGA Manager Service..\nfpga@debian-fpga:~$ sudo systemctl status udmabuf.service\n\u25cf udmabuf.service - User space mappable DMA Buffer Service.\n   Loaded: loaded (/etc/systemd/system/udmabuf.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:09 JST; 3min 50s ago\n  Process: 1484 ExecStart=/sbin/modprobe udmabuf (code=exited, status=0/SUCCESS)\n Main PID: 1484 (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/udmabuf.service\n\nApr 30 07:50:09 debian-fpga systemd[1]: Started User space mappable DMA Buff....\nHint: Some lines were ellipsized, use -l to show in full.\nfpga@debian-fpga:~$ sudo systemctl status zptty.service\n\u25cf zptty.service - Pseudo TTY Driver for communication with FPGA.\n   Loaded: loaded (/etc/systemd/system/zptty.service; enabled)\n   Active: active (exited) since Sat 2016-04-30 07:50:09 JST; 4min 40s ago\n  Process: 1491 ExecStart=/sbin/modprobe zptty (code=exited, status=0/SUCCESS)\n Main PID: 1491 (code=exited, status=0/SUCCESS)\n```\n\n## \u53c2\u8003\n\n - [https://github.com/ikwzm/FPGA-SoC-Linux](https://github.com/ikwzm/FPGA-SoC-Linux)\n - [\u300cFPGA+SoC+Linux+Device Tree Overlay+FPGA Manager(\u30d6\u30fc\u30c8\u30a4\u30e1\u30fc\u30b8\u306e\u63d0\u4f9b) @Qiita\u300d](http://qiita.com/ikwzm/items/cdeb3c9c352776eac683)\n\n", "tags": ["FPGA", "Linux", "zynq", "PYNQ"]}