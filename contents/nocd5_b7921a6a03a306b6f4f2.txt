{"context": " More than 1 year has passed since last update.Go1.5\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u306e\u3067\u3001mruby\u306e\u9759\u7684\u30ea\u30f3\u30af\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u306e\u3067\n\u8a9e\u5c3e\u306e\u4fee\u6b63\u3084\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u66f8\u304d\u63db\u3048\u306a\u3069\u3067\u3059\u3002\n\n\u524d\u56de\u307e\u3067\u306e\u3042\u3089\u3059\u3058\nlibmruby.a\u306e\u30ea\u30f3\u30af\u65b9\u6cd5\u304c\u300c\u306a\u3093\u3067\uff1f\u300d\u3063\u3066\u611f\u3058\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u6307\u5b9a\u3060\u3063\u305f\u308a(--Lmruby/lib -Wl,-lmruby)\u3001\u30a8\u30e9\u30fc\u3092\u63e1\u308a\u3064\u3076\u3057\u305f\u308a\u3057\u3066\u4f55\u3068\u304b\u30ea\u30f3\u30af\u3057\u305fnocd5\u3067\u3042\u3063\u305f\u304c\u2026\n\nGo 1.5\u3067\u89e3\u6c7a\u3055\u308c\u308b\u305f\u304b\u3082\uff01\n\n\n\n\n\n\n\n\n\n\nGo\n1.5\n32bit\n\n\nmruby\n71f2975\n32bit\n\n\ngcc\n4.9.2(TDM)\n32bit\n\n\nOS\nWindows8.1\n64bit\n\n\n\n\u203b Go\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u6700\u65b0\u3067\u3082\u3061\u3083\u3093\u3068\u30ea\u30f3\u30af\u3067\u304d\u308b\u3053\u3068\u78ba\u8a8d\u3057\u307e\u3057\u305f\n(\u305f\u3093\u306bgit checkout go1.5\u3057\u308f\u3059\u308c\u305f\u3060\u3051)\n\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u3001\u4ee5\u4e0b\u306e\u666e\u901a\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u30d3\u30eb\u30c9\u3067\u304d\u307e\u3057\u305f\uff01\n\nmruby_static_link/main.go\n\npackage main\n\n// #cgo CFLAGS: -II:/FreeSpace/C/mruby/include\n// #cgo LDFLAGS: -LI:/FreeSpace/C/mruby/build/host/lib -lmruby\n// #include <windows.h>\n// #include <mruby.h>\n// #include <mruby/compile.h>\nimport \"C\"\nimport \"unsafe\"\n\nfunc main() {\n    mrb := C.mrb_open()\n    defer C.mrb_close(mrb)\n    cxt := C.mrbc_context_new(mrb)\n    defer C.mrbc_context_free(mrb, cxt)\n\n    mrb_code0 := C.CString(\"puts 'Hello World ' + 'From mruby.'; m = 3\")\n    defer C.free(unsafe.Pointer(mrb_code0))\n    mrb_code1 := C.CString(\"puts 'hypot(m, m+1) = ' + Math.hypot(m,m+1).to_s\")\n    defer C.free(unsafe.Pointer(mrb_code1))\n\n    C.mrb_load_string_cxt(mrb, mrb_code0, cxt)\n    C.mrb_load_string_cxt(mrb, mrb_code1, cxt)\n}\n\n\n\u3053\u308c\u306fGo1.5\u3067\u306f\u300cGolang\u306ecgo\u306fwindows\u3067static-link\u304c\u4e0a\u624b\u304f\u6271\u3048\u306a\u3044\u3089\u3057\u3044\u300d\u3068\u3044\u3046\u554f\u984c\u304c\u89e3\u6c7a\u3055\u308c\u307e\u3057\u305f\u308b\u304b\u3082\uff01\nGo1.5\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u306e\u3067\u3001mruby\u306e\u9759\u7684\u30ea\u30f3\u30af\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u306e\u3067\n\u8a9e\u5c3e\u306e\u4fee\u6b63\u3084\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u66f8\u304d\u63db\u3048\u306a\u3069\u3067\u3059\u3002\n\n# [\u524d\u56de](http://qiita.com/nocd5/items/4a1ebe5dfccedd3d6e2b)\u307e\u3067\u306e\u3042\u3089\u3059\u3058\n**libmruby.a**\u306e\u30ea\u30f3\u30af\u65b9\u6cd5\u304c\u300c\u306a\u3093\u3067\uff1f\u300d\u3063\u3066\u611f\u3058\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u6307\u5b9a\u3060\u3063\u305f\u308a(`--Lmruby/lib -Wl,-lmruby`)\u3001\u30a8\u30e9\u30fc\u3092\u63e1\u308a\u3064\u3076\u3057\u305f\u308a\u3057\u3066\u4f55\u3068\u304b\u30ea\u30f3\u30af\u3057\u305fnocd5\u3067\u3042\u3063\u305f\u304c\u2026\n\n# Go 1.5\u3067\u89e3\u6c7a\u3055\u308c\u308b\u305f~~\u304b\u3082~~\uff01\n\n|       |            |       |\n|-------|------------|-------|\n| Go    | 1.5        | 32bit |\n| mruby | 71f2975    | 32bit |\n| gcc   | 4.9.2(TDM) | 32bit |\n| OS    | Windows8.1 | 64bit |\n\u203b Go\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u6700\u65b0\u3067\u3082\u3061\u3083\u3093\u3068\u30ea\u30f3\u30af\u3067\u304d\u308b\u3053\u3068\u78ba\u8a8d\u3057\u307e\u3057\u305f\n(\u305f\u3093\u306b`git checkout go1.5`\u3057\u308f\u3059\u308c\u305f\u3060\u3051)\n\n\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u3001\u4ee5\u4e0b\u306e**\u666e\u901a**\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u30d3\u30eb\u30c9\u3067\u304d\u307e\u3057\u305f\uff01\n\n```go:mruby_static_link/main.go\n\npackage main\n\n// #cgo CFLAGS: -II:/FreeSpace/C/mruby/include\n// #cgo LDFLAGS: -LI:/FreeSpace/C/mruby/build/host/lib -lmruby\n// #include <windows.h>\n// #include <mruby.h>\n// #include <mruby/compile.h>\nimport \"C\"\nimport \"unsafe\"\n\nfunc main() {\n    mrb := C.mrb_open()\n    defer C.mrb_close(mrb)\n    cxt := C.mrbc_context_new(mrb)\n    defer C.mrbc_context_free(mrb, cxt)\n\n    mrb_code0 := C.CString(\"puts 'Hello World ' + 'From mruby.'; m = 3\")\n    defer C.free(unsafe.Pointer(mrb_code0))\n    mrb_code1 := C.CString(\"puts 'hypot(m, m+1) = ' + Math.hypot(m,m+1).to_s\")\n    defer C.free(unsafe.Pointer(mrb_code1))\n\n    C.mrb_load_string_cxt(mrb, mrb_code0, cxt)\n    C.mrb_load_string_cxt(mrb, mrb_code1, cxt)\n}\n```\n\n\u3053\u308c\u306fGo1.5\u3067\u306f\u300cGolang\u306ecgo\u306fwindows\u3067static-link\u304c\u4e0a\u624b\u304f\u6271\u3048\u306a\u3044\u3089\u3057\u3044\u300d\u3068\u3044\u3046\u554f\u984c\u304c\u89e3\u6c7a\u3055\u308c\u307e\u3057\u305f~~\u308b\u304b\u3082~~\uff01\n", "tags": ["Go1.5", "mruby"]}