{"context": "\n\n\u306f\u3058\u3081\u306b\nUnreal C++\u3067Android\u306e\u4efb\u610f\u306e\u30d1\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u304c\u8272\u3005\u9762\u5012\u3060\u3063\u305f\u8a71\u3067\u3059\u3002\n\nVictory Plugin\u306e\u5c0e\u5165\u3067\u3064\u3089\u3044\n\u300cUnreal C++\u304b\u3089Android API\u547c\u3073\u51fa\u3057\u306e\u3064\u3089\u3055\u3092\u6e1b\u3089\u3057\u3066\u307f\u305f\u300d\u3067Pictures\u30d5\u30a9\u30eb\u30c0\u306e\u30d1\u30b9\u3092Blueprint\u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u6b21\u306f\u305d\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u30ea\u30b9\u30c8\u3092\u53d6\u308d\u3046\u3068\u3057\u307e\u3057\u305f\u3002\n\u5e78\u3044\u306b\u3082\u3001Victory Plugin\u306b\u4e01\u5ea6\u3088\u3055\u3052\u306a\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3067\u3059\u304c\u3001Windows\u3067\u306f\u554f\u984c\u306a\u304f\u52d5\u304f\u306e\u306bAndroid\u7528\u306b\u30d3\u30eb\u30c9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f\u516c\u5f0f\u30d5\u30a9\u30fc\u30e9\u30e0\u306eRama's Extra Blueprint Nodes for You as a Plugin, No C++ Required!\u306b\u89e3\u6c7a\u7b56\u304c\u3042\u308a\u3001Build.cs\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3068\u30d3\u30eb\u30c9\u304c\u901a\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u4ed6\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u8ffd\u52a0\u306e\u8a2d\u5b9a\u306a\u3057\u3067\u3082\u30d3\u30eb\u30c9\u3067\u304d\u308b\u306e\u306b\u4f55\u6545\u2026\n\nCppTest/Source/CppTest/CppTest.Build.cs\n// Fill out your copyright notice in the Description page of Project Settings.\n\nusing UnrealBuildTool;\nusing System.IO;\n\npublic class CppTest : ModuleRules\n{\n    public CppTest(TargetInfo Target)\n    {\n        PublicDependencyModuleNames.AddRange(new string[] { \"Core\", \"CoreUObject\", \"Engine\", \"InputCore\" });\n\n        PrivateDependencyModuleNames.AddRange(new string[] {  });\n        if (Target.Platform == UnrealTargetPlatform.Android)\n        {\n            string ProjectPath = Utils.MakePathRelativeTo(ModuleDirectory, BuildConfiguration.RelativeEnginePath);\n            AdditionalPropertiesForReceipt.Add(new ReceiptProperty(\"AndroidPlugin\", Path.Combine(ProjectPath, \"CppTest_release_UPL.xml\")));\n\n            // \u3053\u3053\u304b\u3089\u8ffd\u52a0\n            PrivateIncludePaths.AddRange(new string[] { \"CppTest/Plugins/VictoryPlugin/Source/VictoryBPLibrary/Private\" });\n            DynamicallyLoadedModuleNames.AddRange(new string[] { \"VictoryBPLibrary\" });\n            // \u3053\u3053\u307e\u3067\u8ffd\u52a0\n        }\n        // Uncomment if you are using Slate UI\n        // PrivateDependencyModuleNames.AddRange(new string[] { \"Slate\", \"SlateCore\" });\n\n        // Uncomment if you are using online features\n        // PrivateDependencyModuleNames.Add(\"OnlineSubsystem\");\n\n        // To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true\n    }\n}\n\n\n\nFAndroidPlatformFile::PathToAndroidPaths()\u306e\u7f60\nVictory Plugin\u3092\u5c0e\u5165\u3067\u304d\u305f\u306e\u3067\u6b21\u306f\u9069\u5f53\u306bpng\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u3092\u53d6\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u3067\u3059\u304c\u3001Joy File Get Files\u95a2\u6570\u306e\u7d50\u679c\u3001Return Value\u306ftrue\u306a\u306e\u306b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u914d\u5217\u306f0\u4ef6\u3067\u3059\u3002\n\u3055\u3059\u304c\u306b\u539f\u56e0\u304c\u5206\u304b\u3089\u306a\u304f\u3066\u30bd\u30fc\u30b9\u3092\u8ffd\u3063\u3066\u307f\u307e\u3057\u305f\u3002Android\u4f9d\u5b58\u90e8\u5206\u306eFAndroidPlatformFile::IterateDirectory()\u3067\u3082\u554f\u984c\u3092\u898b\u4ed8\u3051\u3089\u308c\u306a\u304b\u3063\u305f\u306e\u3067\u6700\u7d42\u624b\u6bb5\u306e\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u6709\u52b9\u5316\u3067\u3059\u3002\ndiff --git a/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp b/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp\nindex 104d4e6..8b8e737 100644\n--- a/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp\n+++ b/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp\n@@ -20,7 +20,7 @@\n\n DEFINE_LOG_CATEGORY_STATIC(LogAndroidFile, Log, All);\n\n-#define LOG_ANDROID_FILE 0\n+#define LOG_ANDROID_FILE 1\n\n #define LOG_ANDROID_FILE_MANIFEST 0\n\n\u4e0a\u8a18\u3060\u3051\u5909\u66f4\u3057\u305f\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305fUE4\u304b\u3089Android\u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u3066adb logcat\u3067\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nlogcat\nD UE4     : FAndroidPlatformFile::IterateDirectory('/storage/emulated/0/Pictures')\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('/storage/emulated/0/Pictures') => AndroidPath = '/storage/emulated/0/Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('/storage/emulated/0/Pictures') => LocalPath = '/storage/emulated/0/UE4Game/CppTest/storage/emulated/0/Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('/storage/emulated/0/Pictures') => AssetPath = '/storage/emulated/0/Pictures'\nD UE4     : [2016.11.03-09.15.36:314][  0]LogBlueprintUserMessages: [M_Default_C_1] 0\n\n\n\nPictures\u30d5\u30a9\u30eb\u30c0\u306e\u30d5\u30eb\u30d1\u30b9: /storage/emulated/0/Pictures\n\n\nFAndroidPlatformFile::PathToAndroidPaths\u3067\u5909\u63db\u3055\u308c\u305fPictures\u30d5\u30a9\u30eb\u30c0\u306e\u30d5\u30eb\u30d1\u30b9: /storage/emulated/0/UE4Game/CppTest/storage/emulated/0/Pictures\n\n\n\u3048\u30fc\u3001\u3068\u601d\u3044\u306a\u304c\u3089\u518d\u5ea6\u30bd\u30fc\u30b9\u3092\u8abf\u3079\u308b\u3068\u7d76\u5bfe\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066\u3082\u30b2\u30fc\u30e0\u7528\u30d5\u30a9\u30eb\u30c0\u3092\u30eb\u30fc\u30c8\u3068\u3057\u305f\u30d1\u30b9\u306b\u5909\u63db\u3055\u308c\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\u2026\u4f55\u3066\u3053\u3063\u305f\u3044\u2026\n\u66f4\u306b\u76f8\u5bfe\u30d1\u30b9\u6307\u5b9a\u3057\u3066\u3082\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u629c\u3051\u76ee\u306a\u3044\u2026\n\nAndroidFile.cpp\u306ePathToAndroitPaths\nwhile (AndroidPath.StartsWith(TEXT(\"../\")))\n{\n    AndroidPath = AndroidPath.RightChop(3);\n}\n\n\n\u3057\u304b\u3082\u3001IAndroidPlatformFile\u30af\u30e9\u30b9\u304b\u3089\u7d99\u627f\u3057\u3066\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u30e1\u30f3\u30d0\u30fc\u95a2\u6570\u306f\u5fc5\u305a\u3053\u306e\u5909\u63db\u304c\u884c\u308f\u308c\u308b\u306e\u3067FPaths\u3084FFileHelper\u306a\u3069\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u9055\u3044\u3092\u5438\u53ce\u3059\u308b\u30af\u30e9\u30b9\u306b\u5f71\u97ff\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u5c0f\u624b\u5148\u306e\u56de\u907f\u7b56\n\u7d76\u5bfe\u30d1\u30b9\u3082\u76f8\u5bfe\u30d1\u30b9\u3082\u99c4\u76ee\u306a\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3057\u305f\u304c\u30011\u30d1\u30bf\u30fc\u30f3\u3060\u3051\u629c\u3051\u9053\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u57fa\u6e96\u306b\u3057\u305f\u76f8\u5bfe\u30d1\u30b9\u3067\u3059\u3002\u5177\u4f53\u7684\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u53c2\u7167\u3057\u305f\u3044\u30d1\u30b9: /storage/emulated/0/Pictures\n\n\u5f15\u6570\u3067\u6e21\u3059\u76f8\u5bfe\u30d1\u30b9: ./../../Pictures\n\n\n\u3053\u308c\u3067\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u2026\n\nlogcat\nD UE4     : FAndroidPlatformFile::IterateDirectory('./../../Pictures')\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('./../../Pictures') => AndroidPath = './../../Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('./../../Pictures') => LocalPath = '/storage/emulated/0/UE4Game/CppTest/./../../Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('./../../Pictures') => AssetPath = './../../Pictures'\nD UE4     : FAndroidPlatformFile::IterateDirectory('./../../Pictures').. LOCAL Visit: './../../Pictures/Screenshot_20160610-201604.png'\nD UE4     : FAndroidPlatformFile::IterateDirectory('./../../Pictures').. LOCAL Visit: './../../Pictures/0.png'\nD UE4     : [2016.11.03-09.15.36:315][  0]LogBlueprintUserMessages: [M_Default_C_1] 2\n\n\n\u53d6\u308c\u305f\uff01Pictures\u30d5\u30a9\u30eb\u30c0\u306epng\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u53d6\u308c\u307e\u3057\u305f\uff01\n\u3064\u307e\u308a\u3001/storage/emulated/0/UE4Game/CppTest\u3092\u8d77\u70b9\u306b\u3057\u3066\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\u3092\u4f5c\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u70ba\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u3088\u3046\u306aFPaths::MakePathRelativeTo\u3092\u4f7f\u3048\u3070\u7c21\u5358\u306b\u76f8\u5bfe\u30d1\u30b9\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n(\u5143\u306e\u30bd\u30fc\u30b9\u306fMyBlueprintFunctionLibrary.cpp\u3067\u3059)\n\nMyBlueprintFunctionLibrary.cpp\n// Fill out your copyright notice in the Description page of Project Settings.\n\n#include \"CppTest_release.h\"\n#include \"MyBlueprintFunctionLibrary.h\"\n\n#if PLATFORM_ANDROID\n#include \"Android/AndroidApplication.h\"\n#endif\n\nFString UMyBlueprintFunctionLibrary::PicturesPath;\n\nFString UMyBlueprintFunctionLibrary::GetPicturesPath()\n{\n    return UMyBlueprintFunctionLibrary::PicturesPath;\n}\n\n#if PLATFORM_ANDROID\n/*\n * AndroidFile.cpp\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b /storage/emulated/0/UE4Game/CppTest \u3092\u8fd4\u3059\u95a2\u6570\n * AndroidFile.h\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001extern\u3067\u5ba3\u8a00\u3057\u3066\u3044\u307e\u3059\u3002\n */\nextern const FString &GetFileBasePath();\n\n/*\n * \u53c2\u7167\u3057\u305f\u3044\u7d76\u5bfe\u30d1\u30b9\u3092\u6e21\u3059\u3068\u76f8\u5bfe\u30d1\u30b9\u306b\u5909\u63db\u3059\u308b\n */\nbool AndroidRelativePath(FString InPath, FString& OutPath)\n{\n    auto Source = InPath;\n    auto InRelativeTo = GetFileBasePath();\n    auto Result = FPaths::MakePathRelativeTo(Source, *InRelativeTo);\n    OutPath = FPaths::Combine(TEXT(\".\"), *Source);\n\n    return Result;\n}\n\nextern \"C\"\n{\n    JNIEXPORT void JNICALL Java_com_epicgames_ue4_GameActivity_nativeSetPicturesPath(JNIEnv* jenv, jobject, jstring picturesPath)\n    {\n        const char* javaChars = jenv->GetStringUTFChars(picturesPath, 0);\n\n        // Pictures\u306e\u7d76\u5bfe\u30d1\u30b9\n        auto RawPicturesPath = FString(UTF8_TO_TCHAR(javaChars));\n\n        /*\n         * \u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\n         * \u3053\u3053\u3067Pictures\u306e\u7d76\u5bfe\u30d1\u30b9\u3092\u76f8\u5bfe\u30d1\u30b9\u306b\u5909\u63db\u3059\u308b\n         * \u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\n         */\n        AndroidRelativePath(RawPicturesPath, UMyBlueprintFunctionLibrary::PicturesPath);\n\n        jenv->ReleaseStringUTFChars(picturesPath, javaChars);\n    }\n}\n#endif\n\n\n\u305f\u3060\u3057\u3001\u3053\u306e\u65b9\u6cd5\u306fAndroidFile.cpp\u306e\u5b9f\u88c5\u4f9d\u5b58\u306e\u629c\u3051\u9053\u306a\u306e\u3067\u3001\u4eca\u5f8c\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3067\u4f7f\u3048\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\u4f55\u6545\u3053\u306e\u3088\u3046\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u3001GitHub\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306b\u3082\u7279\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u30bb\u30fc\u30d6\u30d5\u30a1\u30a4\u30eb\u7b49\u3092\u4fdd\u5b58\u3059\u308b\u90fd\u5408\u4e0a\u3001SD\u30ab\u30fc\u30c9\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3067\u305d\u306e\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u8b77\u3059\u308b\u4ed5\u7d44\u307f\u304c\u306a\u3044\u306e\u3067\u7c21\u5358\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\nUE4\u3067Android\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u306e\u3063\u3066\u8272\u3005\u3064\u3089\u3044\u3002\n# \u306f\u3058\u3081\u306b\n\nUnreal C++\u3067Android\u306e\u4efb\u610f\u306e\u30d1\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u304c\u8272\u3005\u9762\u5012\u3060\u3063\u305f\u8a71\u3067\u3059\u3002\n\n# Victory Plugin\u306e\u5c0e\u5165\u3067\u3064\u3089\u3044\n\n\u300c[Unreal C++\u304b\u3089Android API\u547c\u3073\u51fa\u3057\u306e\u3064\u3089\u3055\u3092\u6e1b\u3089\u3057\u3066\u307f\u305f](http://qiita.com/shiena/items/f07533702e2639a511c3)\u300d\u3067Pictures\u30d5\u30a9\u30eb\u30c0\u306e\u30d1\u30b9\u3092Blueprint\u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u6b21\u306f\u305d\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u30ea\u30b9\u30c8\u3092\u53d6\u308d\u3046\u3068\u3057\u307e\u3057\u305f\u3002\n\u5e78\u3044\u306b\u3082\u3001[Victory Plugin](https://github.com/EverNewJoy/VictoryPlugin)\u306b\u4e01\u5ea6\u3088\u3055\u3052\u306a\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\n\n![VictoryPlugin.png](https://qiita-image-store.s3.amazonaws.com/0/8995/1399658c-da05-e9c8-921e-06d2be2273e5.png)\n\n\u3067\u3059\u304c\u3001Windows\u3067\u306f\u554f\u984c\u306a\u304f\u52d5\u304f\u306e\u306bAndroid\u7528\u306b\u30d3\u30eb\u30c9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f\u516c\u5f0f\u30d5\u30a9\u30fc\u30e9\u30e0\u306e[Rama's Extra Blueprint Nodes for You as a Plugin, No C++ Required!](https://forums.unrealengine.com/showthread.php?3851-(39)-Rama-s-Extra-Blueprint-Nodes-for-You-as-a-Plugin-No-C-Required!&p=53249&viewfull=1#post53249)\u306b\u89e3\u6c7a\u7b56\u304c\u3042\u308a\u3001Build.cs\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3068\u30d3\u30eb\u30c9\u304c\u901a\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u4ed6\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u8ffd\u52a0\u306e\u8a2d\u5b9a\u306a\u3057\u3067\u3082\u30d3\u30eb\u30c9\u3067\u304d\u308b\u306e\u306b\u4f55\u6545\u2026\n\n```csharp:CppTest/Source/CppTest/CppTest.Build.cs\n// Fill out your copyright notice in the Description page of Project Settings.\n\nusing UnrealBuildTool;\nusing System.IO;\n\npublic class CppTest : ModuleRules\n{\n    public CppTest(TargetInfo Target)\n    {\n        PublicDependencyModuleNames.AddRange(new string[] { \"Core\", \"CoreUObject\", \"Engine\", \"InputCore\" });\n\n        PrivateDependencyModuleNames.AddRange(new string[] {  });\n        if (Target.Platform == UnrealTargetPlatform.Android)\n        {\n            string ProjectPath = Utils.MakePathRelativeTo(ModuleDirectory, BuildConfiguration.RelativeEnginePath);\n            AdditionalPropertiesForReceipt.Add(new ReceiptProperty(\"AndroidPlugin\", Path.Combine(ProjectPath, \"CppTest_release_UPL.xml\")));\n\n            // \u3053\u3053\u304b\u3089\u8ffd\u52a0\n            PrivateIncludePaths.AddRange(new string[] { \"CppTest/Plugins/VictoryPlugin/Source/VictoryBPLibrary/Private\" });\n            DynamicallyLoadedModuleNames.AddRange(new string[] { \"VictoryBPLibrary\" });\n            // \u3053\u3053\u307e\u3067\u8ffd\u52a0\n        }\n        // Uncomment if you are using Slate UI\n        // PrivateDependencyModuleNames.AddRange(new string[] { \"Slate\", \"SlateCore\" });\n\n        // Uncomment if you are using online features\n        // PrivateDependencyModuleNames.Add(\"OnlineSubsystem\");\n\n        // To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true\n    }\n}\n```\n\n# FAndroidPlatformFile::PathToAndroidPaths()\u306e\u7f60\n\nVictory Plugin\u3092\u5c0e\u5165\u3067\u304d\u305f\u306e\u3067\u6b21\u306f\u9069\u5f53\u306bpng\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u89a7\u3092\u53d6\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n![JoyFileIOGetFiles.png](https://qiita-image-store.s3.amazonaws.com/0/8995/97cb9e9d-a4e1-9f59-8282-44f92a4d0fad.png)\n\n\u3067\u3059\u304c\u3001`Joy File Get Files`\u95a2\u6570\u306e\u7d50\u679c\u3001Return Value\u306ftrue\u306a\u306e\u306b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u914d\u5217\u306f0\u4ef6\u3067\u3059\u3002\n\u3055\u3059\u304c\u306b\u539f\u56e0\u304c\u5206\u304b\u3089\u306a\u304f\u3066\u30bd\u30fc\u30b9\u3092\u8ffd\u3063\u3066\u307f\u307e\u3057\u305f\u3002Android\u4f9d\u5b58\u90e8\u5206\u306e[FAndroidPlatformFile::IterateDirectory()](https://github.com/EpicGames/UnrealEngine/blob/4.13.2-release/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp#L1509)\u3067\u3082\u554f\u984c\u3092\u898b\u4ed8\u3051\u3089\u308c\u306a\u304b\u3063\u305f\u306e\u3067\u6700\u7d42\u624b\u6bb5\u306e\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u6709\u52b9\u5316\u3067\u3059\u3002\n\n```diff\ndiff --git a/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp b/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp\nindex 104d4e6..8b8e737 100644\n--- a/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp\n+++ b/Engine/Source/Runtime/Core/Private/Android/AndroidFile.cpp\n@@ -20,7 +20,7 @@\n\n DEFINE_LOG_CATEGORY_STATIC(LogAndroidFile, Log, All);\n\n-#define LOG_ANDROID_FILE 0\n+#define LOG_ANDROID_FILE 1\n\n #define LOG_ANDROID_FILE_MANIFEST 0\n```\n\n\u4e0a\u8a18\u3060\u3051\u5909\u66f4\u3057\u305f\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305fUE4\u304b\u3089Android\u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u3066`adb logcat`\u3067\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```text:logcat\nD UE4     : FAndroidPlatformFile::IterateDirectory('/storage/emulated/0/Pictures')\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('/storage/emulated/0/Pictures') => AndroidPath = '/storage/emulated/0/Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('/storage/emulated/0/Pictures') => LocalPath = '/storage/emulated/0/UE4Game/CppTest/storage/emulated/0/Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('/storage/emulated/0/Pictures') => AssetPath = '/storage/emulated/0/Pictures'\nD UE4     : [2016.11.03-09.15.36:314][  0]LogBlueprintUserMessages: [M_Default_C_1] 0\n```\n\n* Pictures\u30d5\u30a9\u30eb\u30c0\u306e\u30d5\u30eb\u30d1\u30b9: `/storage/emulated/0/Pictures`\n* `FAndroidPlatformFile::PathToAndroidPaths`\u3067\u5909\u63db\u3055\u308c\u305fPictures\u30d5\u30a9\u30eb\u30c0\u306e\u30d5\u30eb\u30d1\u30b9: `/storage/emulated/0/UE4Game/CppTest/storage/emulated/0/Pictures`\n\n\u3048\u30fc\u3001\u3068\u601d\u3044\u306a\u304c\u3089\u518d\u5ea6\u30bd\u30fc\u30b9\u3092\u8abf\u3079\u308b\u3068\u7d76\u5bfe\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066\u3082\u30b2\u30fc\u30e0\u7528\u30d5\u30a9\u30eb\u30c0\u3092\u30eb\u30fc\u30c8\u3068\u3057\u305f\u30d1\u30b9\u306b\u5909\u63db\u3055\u308c\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\u2026\u4f55\u3066\u3053\u3063\u305f\u3044\u2026\n\n\u66f4\u306b\u76f8\u5bfe\u30d1\u30b9\u6307\u5b9a\u3057\u3066\u3082\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u629c\u3051\u76ee\u306a\u3044\u2026\n\n```cpp:AndroidFile.cpp\u306ePathToAndroitPaths\nwhile (AndroidPath.StartsWith(TEXT(\"../\")))\n{\n    AndroidPath = AndroidPath.RightChop(3);\n}\n```\n\n\u3057\u304b\u3082\u3001IAndroidPlatformFile\u30af\u30e9\u30b9\u304b\u3089\u7d99\u627f\u3057\u3066\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u30e1\u30f3\u30d0\u30fc\u95a2\u6570\u306f\u5fc5\u305a\u3053\u306e\u5909\u63db\u304c\u884c\u308f\u308c\u308b\u306e\u3067FPaths\u3084FFileHelper\u306a\u3069\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u9055\u3044\u3092\u5438\u53ce\u3059\u308b\u30af\u30e9\u30b9\u306b\u5f71\u97ff\u304c\u3042\u308a\u307e\u3059\u3002\n\n# \u5c0f\u624b\u5148\u306e\u56de\u907f\u7b56\n\n\u7d76\u5bfe\u30d1\u30b9\u3082\u76f8\u5bfe\u30d1\u30b9\u3082\u99c4\u76ee\u306a\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3057\u305f\u304c\u30011\u30d1\u30bf\u30fc\u30f3\u3060\u3051\u629c\u3051\u9053\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u57fa\u6e96\u306b\u3057\u305f\u76f8\u5bfe\u30d1\u30b9\u3067\u3059\u3002\u5177\u4f53\u7684\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n* \u53c2\u7167\u3057\u305f\u3044\u30d1\u30b9: `/storage/emulated/0/Pictures`\n* \u5f15\u6570\u3067\u6e21\u3059\u76f8\u5bfe\u30d1\u30b9: `./../../Pictures`\n\n\u3053\u308c\u3067\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u2026\n\n```text:logcat\nD UE4     : FAndroidPlatformFile::IterateDirectory('./../../Pictures')\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('./../../Pictures') => AndroidPath = './../../Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('./../../Pictures') => LocalPath = '/storage/emulated/0/UE4Game/CppTest/./../../Pictures'\nD UE4     : FAndroidPlatformFile::PathToAndroidPaths('./../../Pictures') => AssetPath = './../../Pictures'\nD UE4     : FAndroidPlatformFile::IterateDirectory('./../../Pictures').. LOCAL Visit: './../../Pictures/Screenshot_20160610-201604.png'\nD UE4     : FAndroidPlatformFile::IterateDirectory('./../../Pictures').. LOCAL Visit: './../../Pictures/0.png'\nD UE4     : [2016.11.03-09.15.36:315][  0]LogBlueprintUserMessages: [M_Default_C_1] 2\n```\n\n\u53d6\u308c\u305f\uff01Pictures\u30d5\u30a9\u30eb\u30c0\u306epng\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u53d6\u308c\u307e\u3057\u305f\uff01\n\n\u3064\u307e\u308a\u3001`/storage/emulated/0/UE4Game/CppTest`\u3092\u8d77\u70b9\u306b\u3057\u3066\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\u3092\u4f5c\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u70ba\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u3088\u3046\u306a[FPaths::MakePathRelativeTo](https://docs.unrealengine.com/latest/INT/API/Runtime/Core/Misc/FPaths/MakePathRelativeTo/index.html)\u3092\u4f7f\u3048\u3070\u7c21\u5358\u306b\u76f8\u5bfe\u30d1\u30b9\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n(\u5143\u306e\u30bd\u30fc\u30b9\u306f[MyBlueprintFunctionLibrary.cpp](http://qiita.com/shiena/items/f07533702e2639a511c3#umyblueprintfunctionlibrarycpp-1)\u3067\u3059)\n\n```cpp:MyBlueprintFunctionLibrary.cpp\n// Fill out your copyright notice in the Description page of Project Settings.\n\n#include \"CppTest_release.h\"\n#include \"MyBlueprintFunctionLibrary.h\"\n\n#if PLATFORM_ANDROID\n#include \"Android/AndroidApplication.h\"\n#endif\n\nFString UMyBlueprintFunctionLibrary::PicturesPath;\n\nFString UMyBlueprintFunctionLibrary::GetPicturesPath()\n{\n\treturn UMyBlueprintFunctionLibrary::PicturesPath;\n}\n\n#if PLATFORM_ANDROID\n/*\n * AndroidFile.cpp\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b /storage/emulated/0/UE4Game/CppTest \u3092\u8fd4\u3059\u95a2\u6570\n * AndroidFile.h\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001extern\u3067\u5ba3\u8a00\u3057\u3066\u3044\u307e\u3059\u3002\n */\nextern const FString &GetFileBasePath();\n\n/*\n * \u53c2\u7167\u3057\u305f\u3044\u7d76\u5bfe\u30d1\u30b9\u3092\u6e21\u3059\u3068\u76f8\u5bfe\u30d1\u30b9\u306b\u5909\u63db\u3059\u308b\n */\nbool AndroidRelativePath(FString InPath, FString& OutPath)\n{\n    auto Source = InPath;\n    auto InRelativeTo = GetFileBasePath();\n    auto Result = FPaths::MakePathRelativeTo(Source, *InRelativeTo);\n    OutPath = FPaths::Combine(TEXT(\".\"), *Source);\n\n    return Result;\n}\n\nextern \"C\"\n{\n    JNIEXPORT void JNICALL Java_com_epicgames_ue4_GameActivity_nativeSetPicturesPath(JNIEnv* jenv, jobject, jstring picturesPath)\n    {\n        const char* javaChars = jenv->GetStringUTFChars(picturesPath, 0);\n\n        // Pictures\u306e\u7d76\u5bfe\u30d1\u30b9\n        auto RawPicturesPath = FString(UTF8_TO_TCHAR(javaChars));\n\n        /*\n         * \u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\n         * \u3053\u3053\u3067Pictures\u306e\u7d76\u5bfe\u30d1\u30b9\u3092\u76f8\u5bfe\u30d1\u30b9\u306b\u5909\u63db\u3059\u308b\n         * \u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\u25c6\n         */\n        AndroidRelativePath(RawPicturesPath, UMyBlueprintFunctionLibrary::PicturesPath);\n\n        jenv->ReleaseStringUTFChars(picturesPath, javaChars);\n    }\n}\n#endif\n```\n\n\u305f\u3060\u3057\u3001\u3053\u306e\u65b9\u6cd5\u306fAndroidFile.cpp\u306e\u5b9f\u88c5\u4f9d\u5b58\u306e\u629c\u3051\u9053\u306a\u306e\u3067\u3001\u4eca\u5f8c\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3067\u4f7f\u3048\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n# \u307e\u3068\u3081\n\n\u4f55\u6545\u3053\u306e\u3088\u3046\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u3001GitHub\u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306b\u3082\u7279\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u30bb\u30fc\u30d6\u30d5\u30a1\u30a4\u30eb\u7b49\u3092\u4fdd\u5b58\u3059\u308b\u90fd\u5408\u4e0a\u3001SD\u30ab\u30fc\u30c9\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3067\u305d\u306e\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u8b77\u3059\u308b\u4ed5\u7d44\u307f\u304c\u306a\u3044\u306e\u3067\u7c21\u5358\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\nUE4\u3067Android\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u306e\u3063\u3066\u8272\u3005\u3064\u3089\u3044\u3002\n", "tags": ["UE4", "UnrealEngine", "Android"]}