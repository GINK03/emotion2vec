{"context": "\n\n4k intro \u4f5c\u308a\u307e\u3059\n4k intro\u306f\u3001C\u8a00\u8a9e\u3092\u66f8\u3044\u3066\u4f5c\u308a\u307e\u3059\u3002\u306a\u306e\u3067\u3001C\u8a00\u8a9e\u3092\u4f7f\u3048\u306a\u3044\u4eba\u9593\u306b\u306f\u3001\u6577\u5c45\u306e\u9ad8\u3044\u3082\u306e\u3068\u601d\u3044\u3053\u3093\u3067\u304d\u307e\u3057\u305f\u3002\u5b9f\u969b\u4f5c\u3063\u3066\u307f\u308b\u3068C\u8a00\u8a9e\u306e\u30b9\u30ad\u30eb\u306f\u3001\u307b\u3068\u3093\u3069\u8981\u308a\u307e\u305b\u3093\u3002\u6587\u6cd5\u3082GLSL\u3068\u540c\u3058\u3088\u3046\u306a\u306e\u3067\u8aad\u3080\u306b\u3082\u56f0\u308a\u307e\u305b\u3093\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3055\u3048\u624b\u306b\u5165\u308c\u308c\u3070webGL\u3067shader\u304c\u66f8\u3051\u308b\u306a\u3089\u4f5c\u308c\u308b\u30e2\u30ce\u3067\u3057\u305f\u3002\n\u3068\u308a\u3042\u3048\u305a\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u305d\u306e\u524d\u306b\u30bd\u30fc\u30b9\u3092\u3056\u30fc\u3068\u773a\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n// demo.c\n#include <windows.h>\n#include <GL/gl.h>\n#include <GL/glext.h>\n#include <mmreg.h>\n\nstatic const char *vsh = \\\n\"void main()\"\n\"{\"\n    \"gl_Position = gl_Vertex;\"\n\"}\";\n\nstatic const char *fsh = \\\n\"uniform vec2 resolution;\"\n\"uniform float time;\"\n\"void main()\"\n\"{\"\n    \"vec2 p = (2.0 * gl_FragCoord.xy - resolution.xy) / resolution.y;\"\n    \"p += vec2(cos(time), sin(time)) * 0.5;\"\n    \"float g = exp(-1.5 * dot(p,p));\"\n    \"gl_FragColor = vec4(g, g, g, 1.0);\"\n\"}\";\n\nconst char *msh = \\\n\"#version 330\\n\"\n\"out vec2 gain;\"\n\"uniform float sampleRate;\"\n\n\"void main()\"\n\"{\"\n    \"float time = float(gl_VertexID) / sampleRate;\"\n    \"gain = vec2(sin(6.2831*440.0*fract(time)));\"\n\"}\";\n\n#define U_RESOLUTION \"resolution\" \n#define U_SAMPLERATE \"sampleRate\" \n#define U_TIME \"time\" \n#define O_GAIN \"gain\" \n#define XRES 1920 \n#define YRES 1080 \n#define SND_DURATION 30 \n#define SAMPLE_RATE 48000 \n#define SND_NUMCHANNELS 2 \n\n#define SND_NUMSAMPLES  (SND_DURATION*SAMPLE_RATE)\n#define SND_NUMSAMPLESC (SND_NUMSAMPLES*SND_NUMCHANNELS)\n\nfloat samples[SND_NUMSAMPLESC];\n\nvoid entrypoint(){\n    DEVMODE dmScreenSettings={{0},0,0,sizeof(DEVMODE),0,DM_PELSWIDTH|DM_PELSHEIGHT,{0},0,0,0,0,0,{0},0,0,XRES,YRES,{0},0};\n    ChangeDisplaySettings(&dmScreenSettings,CDS_FULLSCREEN);\n    HWND hWnd = CreateWindow((LPCSTR)0xC018,0,WS_POPUP|WS_VISIBLE|WS_MAXIMIZE,0,0,0,0,0,0,0,0);\n    ShowCursor(0);\n    HDC hDC = GetDC(hWnd);\n    PIXELFORMATDESCRIPTOR pfd={0,1,PFD_SUPPORT_OPENGL|PFD_DOUBLEBUFFER,32,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0};\n    SetPixelFormat(hDC, ChoosePixelFormat(hDC, &pfd) , &pfd);\n    HGLRC  hGLrc = wglCreateContext(hDC);\n    wglMakeCurrent(hDC, hGLrc);\n    GLuint tmp;\n    GLuint programMzk = ((PFNGLCREATEPROGRAMPROC)wglGetProcAddress(\"glCreateProgram\"))();\n    tmp = ((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))(GL_VERTEX_SHADER);\n    ((PFNGLSHADERSOURCEPROC)wglGetProcAddress(\"glShaderSource\"))(tmp, 1, &msh, 0);\n    ((PFNGLCOMPILESHADERPROC)wglGetProcAddress(\"glCompileShader\"))(tmp);\n    ((PFNGLATTACHSHADERPROC)wglGetProcAddress(\"glAttachShader\"))(programMzk, tmp);        \n    const GLchar* outs[] = {O_GAIN};\n    ((PFNGLTRANSFORMFEEDBACKVARYINGSPROC)wglGetProcAddress(\"glTransformFeedbackVaryings\"))(programMzk, 1, outs, GL_INTERLEAVED_ATTRIBS);\n    ((PFNGLLINKPROGRAMPROC)wglGetProcAddress(\"glLinkProgram\"))(programMzk);\n    ((PFNGLUSEPROGRAMPROC)wglGetProcAddress(\"glUseProgram\"))(programMzk);\n    ((PFNGLGENBUFFERSPROC)wglGetProcAddress(\"glGenBuffers\"))(1, &tmp);\n    ((PFNGLBINDBUFFERPROC)wglGetProcAddress(\"glBindBuffer\"))(GL_ARRAY_BUFFER, tmp);\n    ((PFNGLBUFFERDATAPROC)wglGetProcAddress(\"glBufferData\"))(GL_ARRAY_BUFFER, SND_NUMSAMPLESC*sizeof(float), 0, GL_STATIC_READ);\n    ((PFNGLBINDBUFFERBASEPROC)wglGetProcAddress(\"glBindBufferBase\"))(GL_TRANSFORM_FEEDBACK_BUFFER, 0, tmp);\n    ((PFNGLUNIFORM1FPROC)wglGetProcAddress(\"glUniform1f\"))(\n        ((PFNGLGETUNIFORMLOCATIONPROC)wglGetProcAddress(\"glGetUniformLocation\"))(programMzk, U_SAMPLERATE),\n        (float)SAMPLE_RATE\n    );\n    glEnable(GL_RASTERIZER_DISCARD);\n    ((PFNGLBEGINTRANSFORMFEEDBACKPROC)wglGetProcAddress(\"glBeginTransformFeedback\"))(GL_POINTS);\n    glDrawArrays(GL_POINTS, 0, SND_NUMSAMPLES);\n    ((PFNGLENDTRANSFORMFEEDBACKPROC)wglGetProcAddress(\"glEndTransformFeedback\"))();\n    glDisable(GL_RASTERIZER_DISCARD);\n    ((PFNGLGETBUFFERSUBDATAPROC)wglGetProcAddress(\"glGetBufferSubData\"))(GL_TRANSFORM_FEEDBACK_BUFFER, 0, sizeof(samples), samples);\n    GLint program = ((PFNGLCREATEPROGRAMPROC)wglGetProcAddress(\"glCreateProgram\"))();\n    tmp = ((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))(GL_VERTEX_SHADER);\n    ((PFNGLSHADERSOURCEPROC)wglGetProcAddress(\"glShaderSource\"))(tmp, 1, &vsh, 0);\n    ((PFNGLCOMPILESHADERPROC)wglGetProcAddress(\"glCompileShader\"))(tmp);\n    ((PFNGLATTACHSHADERPROC)wglGetProcAddress(\"glAttachShader\"))(program, tmp);        \n    tmp = ((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))(GL_FRAGMENT_SHADER);\n    ((PFNGLSHADERSOURCEPROC)wglGetProcAddress(\"glShaderSource\"))(tmp, 1, &fsh, 0);\n    ((PFNGLCOMPILESHADERPROC)wglGetProcAddress(\"glCompileShader\"))(tmp);\n    ((PFNGLATTACHSHADERPROC)wglGetProcAddress(\"glAttachShader\"))(program, tmp);        \n    ((PFNGLLINKPROGRAMPROC)wglGetProcAddress(\"glLinkProgram\"))(program);\n    ((PFNGLUSEPROGRAMPROC)wglGetProcAddress(\"glUseProgram\"))(program);\n    ((PFNGLUNIFORM2FPROC)wglGetProcAddress(\"glUniform2f\"))(\n        ((PFNGLGETUNIFORMLOCATIONPROC)wglGetProcAddress(\"glGetUniformLocation\"))(program, U_RESOLUTION),\n        (float)XRES,\n        (float)YRES\n    );\n    WAVEFORMATEX wave_format = {\n        WAVE_FORMAT_IEEE_FLOAT,\n        SND_NUMCHANNELS,\n        SAMPLE_RATE,\n        SAMPLE_RATE*sizeof(float)*SND_NUMCHANNELS,\n        sizeof(float)*SND_NUMCHANNELS,\n        sizeof(float)*8,\n        0\n    };\n    WAVEHDR wave_hdr = {(LPSTR)samples, sizeof(samples)};\n    HWAVEOUT hWaveOut;\n    waveOutOpen(&hWaveOut, WAVE_MAPPER, &wave_format, (DWORD_PTR)hWnd, 0, CALLBACK_WINDOW);\n    waveOutPrepareHeader(hWaveOut, &wave_hdr, sizeof(wave_hdr));\n    waveOutWrite(hWaveOut, &wave_hdr, sizeof(wave_hdr));\n    MMTIME mmt = { TIME_SAMPLES };\n    MSG msg;\n    do {\n        PeekMessage(&msg, 0, 0, 0, TRUE);\n        waveOutGetPosition(hWaveOut, &mmt, sizeof(mmt));\n        float time = (float)mmt.u.sample / (float)SAMPLE_RATE;\n        ((PFNGLUNIFORM1FPROC)wglGetProcAddress(\"glUniform1f\"))(\n            ((PFNGLGETUNIFORMLOCATIONPROC)wglGetProcAddress(\"glGetUniformLocation\"))(program, U_TIME),\n            time\n        );\n        glRects(1, 1, -1, -1);\n        SwapBuffers(hDC);\n    } while (!GetAsyncKeyState(VK_ESCAPE) && (mmt.u.sample < SND_NUMSAMPLES));\n    ExitProcess(0);\n}    \n\n\u305d\u3093\u306a\u306b\u9577\u3044\u3082\u306e\u3058\u3083\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306eshader\u306e\u66f8\u304b\u308c\u3066\u3044\u308b\u90e8\u5206\u3092\u66f8\u304d\u63db\u3048\u308c\u3070\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e4K intro\u3067\u3059\u3002\n\n\u4f5c\u308b\u70ba\u306e\u4e0b\u6e96\u5099\n\uff43\u8a00\u8a9e\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u70ba\u306bgcc\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\ncrinkler.exe\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3059\u3002http://crinkler.net/\n32bit\u7248\u306eGdi32.Lib, GlU32.Lib, kernel32.Lib, OpenGL32.Lib, User32.Lib, WinMM.Lib\u3092\u624b\u306b\u5165\u308c\u307e\u3059\u3002\n\u3053\u308c\u3089\u306elib\u30d5\u30a1\u30a4\u30eb\u306f\u79c1\u306e\u5834\u5408windows\u306e\u30d5\u30a9\u30eb\u30c0\u5185\u3092\u691c\u7d22\u3057\u305f\u3089\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u307e\u3059\u3002\n\u306a\u306e\u3067\u5165\u624b\u65b9\u6cd5\u304c\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u3002\u81ea\u529b\u3067\u624b\u306b\u3044\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\u3082\u3057\u3001\u308f\u304b\u308b\u65b9\u304c\u3044\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u3092\u3082\u3089\u3048\u308b\u3068\u3042\u308a\u304c\u305f\u3044\u3067\u3059\u3002\n\ngcc\u306e\u5c0e\u5165\n\u3053\u308c\u304c\u3001\u3061\u3087\u3063\u3068\u5384\u4ecb\u3067\u3042\u308a\u307e\u3057\u3066\u3002 crinkler.exe\u306f\u300132bit\u306e\u30aa\u30d6\u30b8\u30a7\u30d5\u30a1\u30a4\u30eb\u3057\u304b\u53d7\u3051\u4ed8\u3051\u3066\u304f\u308c\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067MinGw(32bit)\u306egcc\u306b\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001glext.h\u304c\u58ca\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3002 \u5dee\u3057\u66ff\u3048\u308c\u3070\u4f7f\u3048\u307e\u3059\u304c\u3001\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u3059\u3002\u4ed6\u306b\u3082\u9762\u5012\u306a\u4e8b\u3082\u3042\u308a\u307e\u3059\u3002\n\u306a\u306e\u3067\u79c1\u306fmingw-w64\u306egcc\u306b-m32\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u4f7f\u3063\u3066\u307e\u3059\u3002\nhttp://mingw-w64.org/doku.php\n\n\u3067\u306f\u3001\u4f5c\u3063\u3066\u307f\u307e\u3059\n\u308f\u304b\u308a\u6613\u304f\u3059\u308b\u70ba\u306b\u4e00\u3064\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u5fc5\u8981\u306a\u3082\u306e\u3092\u5168\u90e8\u5165\u308c\u3061\u3083\u3044\u307e\u3059\u3002\n\u6d41\u308c\u304c\u7406\u89e3\u3067\u304d\u305f\u3089\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u306a\u308a\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u7ba1\u7406\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u5192\u982d\u306b\u8f09\u305b\u305fC\u8a00\u8a9e\u306e\u30bd\u30fc\u30b9\u3092demo.c\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u7f6e\u3044\u3066\u304f\u3060\u3055\u3044\u3002\ncrinkler.exe\nGdi32.Lib, GlU32.Lib, kernel32.Lib, OpenGL32.Lib, User32.Lib, WinMM.Lib\n\u3053\u308c\u3082\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\necho off\nset PATH=C:\\mingw-w64\\x86_64-6.1.0-posix-seh-rt_v5-rev0\\mingw64\\bin;%PATH%\ngcc -m32 -c demo.c -o demo.o\ncrinkler /OUT:demo.exe /LIBPATH:./ /COMPMODE:SLOW /ENTRY:entrypoint /RANGE:opengl32 /SUBSYSTEM:WINDOWS /ORDERTRIES:1000 /PRINT:IMPORTS /PRINT:LABELS kernel32.lib user32.lib gdi32.lib opengl32.lib winmm.lib demo.o\ndemo.exe\nexit\n\n\u3053\u308c\u3092'demo_make.bat'\u3068\u304b\u9069\u5f53\u306a\u540d\u524d\u3068\u4ed8\u3051\u3066\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\uff12\u884c\u76ee\u306f\u81ea\u5206\u306emingw64\u306e\u74b0\u5883\u306b\u3042\u308f\u305b\u3066\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u3057\u305f\u3089\u3001\u3053\u306ebat\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3057\u307e\u3089\u304f\u5f85\u3066\u3070\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30c7\u30e2\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067\u51fa\u6765\u4e0a\u304c\u308a\u3002\nESC\u30ad\u30fc\u3067\u30c7\u30e2\u306f\u7d42\u4e86\u3057\u307e\u3059\u3002\ncrinkler.exe\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5168\u3066\u3092\u628a\u63e1\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\n/LIBPATH:./ \u306b\u3064\u3044\u3066\nkernel32.lib\u7b49\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4ed6\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u305f\u3089\u3001\u3053\u3053\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\u5834\u5408\u306f\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u3092\u8d77\u52d5\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n/COMPMODE:SLOW\u3000\u306b\u3064\u3044\u3066\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30e2\u30fc\u30c9\u304cSLOW\u306b\u306a\u3063\u3066\u307e\u3059\u304cFAST\u3063\u3066\u306e\u3082\u3042\u308a\u307e\u3059\u3002\n\u5f8c\u306f\u5909\u3048\u308b\u4e8b\u3082\u7121\u3044\u3088\u3046\u306b\u601d\u3048\u307e\u3059\u3002\u5fc5\u8981\u306a\u3089\u81ea\u529b\u3067\u3084\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\nC\u8a00\u8a9e\u306e\u30de\u30af\u30ed\u90e8\u5206\u306e\u8aac\u660e\n#define U_RESOLUTION \"resolution\" \n#define U_SAMPLERATE \"sampleRate\" \n#define U_TIME \"time\" \n#define O_GAIN \"gain\" \n#define XRES 1920 \n#define YRES 1080 \n#define SND_DURATION 30 \n#define SAMPLE_RATE 48000 \n#define SND_NUMCHANNELS 2 \n\nshader\u306euniform\u540d\u3001out\u540d\u3068C\u8a00\u8a9e\u306euniform\u540d\u3001out\u540d\u3092\u7e4b\u3050\u70ba\u306b\u3001U_RESOLUTION,U_SAMPLERATE ,U_TIME, O_GAIN \u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002shader\u306euniform\u540d\u3001out\u540d\u3092\u5909\u3048\u305f\u6642\u306f\u3001\u3053\u3053\u3082\u66f8\u304d\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nXRES,YRES \u306f\u753b\u9762\u30b5\u30a4\u30ba\u3067\u3059\u3002\u4eca\u306e\u6570\u5b57\u306fTDF\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nSND_DURATION \u306f\u97f3\u697d\u306e\u6f14\u594f\u6642\u9593\uff08\u79d2\uff09\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u308c\u3068\u540c\u6642\u306b\u30c7\u30e2\u306e\u4e0a\u6620\u6642\u9593\u3068\u4e00\u7dd2\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nSAMPLE_RATE \u306f\u97f3\u306e\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30ec\u30fc\u30c8\u3002\nSND_NUMCHANNELS \u306f\u97f3\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u6570\u3067\u3059\u3002\n\nshader\u306e\u30df\u30cb\u5316\u51e6\u7406\n4K intro \u3068\u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c4096\u30d0\u30a4\u30c8\u3092\u8d85\u3048\u306a\u3044\u3053\u3068\u3001\u3068\u8a00\u3046\u6761\u4ef6\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u3053\u308c\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308c\u30701.43 KB\u3067\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u307e\u3059\u304c\u3001shader\u306e\u8a18\u8ff0\u91cf\u304c\u5897\u3048\u308b\u3068shader\u306e\u30df\u30cb\u5316\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u30df\u30cb\u5316\u3068\u306f\n\nfloat hoge = hoge2 + hoge3;\n\n\u3092\n\nfloat a=b+c; \n\n\u307f\u305f\u3044\u306b\u8a18\u8ff0\u91cf\u3092\u6e1b\u3089\u3059\u4f5c\u696d\u3002\n\u3053\u308c\u3092\u81ea\u5206\u3067\u3059\u308b\u3068\u306a\u308b\u3068\u3001\u56f0\u96e3\u304c\u4e88\u60f3\u3055\u308c\u307e\u3059\u3002\u3067\u3082\u30df\u30cb\u5316\u7528exe\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002\nshader_minifier.exe\u3000http://www.ctrl-alt-test.fr/?page_id=7\n\u3053\u308c\u306fshader\u306etext\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5165\u529b\u3059\u308b\u3068C\u8a00\u8a9e\u306e\u30d8\u30c3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u51fa\u529b\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u3053\u308c\u3092C\u8a00\u8a9e\u306b\u30d5\u30a1\u30a4\u30eb\u306b\u7d61\u3081\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n\u7528\u6cd5\u306f\u81ea\u529b\u3067\u898b\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u30df\u30cb\u5316\u5468\u8fba\u306e\u30b9\u30ad\u30eb\u30b2\u30c3\u30c8\u304c4K intro\u306e\u918d\u9190\u5473\u3067\u3059\u3002\n\u3082\u3046\u4e00\u3064\nGLSL Compiler - Minifier for GLSL.\nhttp://glslunit.appspot.com/compiler.html\n\u3068\u3044\u3046\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u30df\u30cb\u5316\u51e6\u7406\u306e\u51fa\u6765\u308b\u30da\u30fc\u30b8\u3082\u3042\u308a\u307e\u3059\u3002\n\u79c1\u306e\u5834\u5408\u306f\u81ea\u5206\u304c\u66f8\u3044\u305fshader\u3068shader_minifier.exe\u306e\u76f8\u6027\u304c\u308f\u308b\u304f\u3066\u3001python\u3067\u30df\u30cb\u5316\u51e6\u7406\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u3053\u306e\u90e8\u5206\u306fshader\u3092\u66f8\u304f\u306e\u3068\u306f\u3001\u307e\u305f\u9055\u3063\u305f\u697d\u3057\u307f\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3046\u3044\u3046\u306e\u3092\u30cf\u30c3\u30af\u3063\u3066\u3044\u3046\u3093\u3067\u3059\u304b\u306d\uff1f\n\n\u7121\u7406\u306b4k\u306b\u3053\u3060\u308f\u308b\u4e8b\u306f\u306a\u3044\nTDF\u306b\u304a\u3044\u30664k intro\u3092\u51fa\u54c1\u3057\u305f\u304c\u81ea\u5206\u3067\u3082\u30af\u30aa\u30ea\u30c6\u30a3\u306e\u4f4e\u3055\u306b\u60b2\u3057\u304f\u306a\u3057\u307e\u3057\u305f\u3002\n\u30b5\u30a4\u30ba\u304c\u5148\u3058\u3083\u306a\u304f\u3066\u30af\u30aa\u30ea\u30c6\u30a3\u304c\u5148\u3067\u3057\u305f\u30028K\u3068\u304b64K\u3068\u304b\u306e\u30ab\u30c6\u30b4\u30ea\u30fc\u3042\u308b\u306e\u3067\u3001\u7de9\u304f\u884c\u304d\u307e\u3057\u3087\u3046\u300264K\u306a\u3093\u304b\u306f\u30df\u30cb\u5316\u51e6\u7406\u3057\u306a\u304f\u3066\u3082\u30b5\u30a4\u30ba\u304c\u4f59\u3063\u3061\u3083\u3046\u3093\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u306d\u3002\n\u305f\u3060\u3001shader\u306e\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3044\u3068crinkler.exe\u304c\u3081\u3061\u3083\u304f\u3061\u3083\u6642\u9593\u304c\u639b\u304b\u308b\u4e8b\u304c\u4e88\u60f3\u3055\u308c\u307e\u3059\u3002\n\u899a\u609f\u3057\u3066\u3084\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u304b\u3082\uff1f\n\n\u3068\u308a\u3042\u3048\u305a\u6620\u50cf\u3060\u3051\u3067\u3044\u3044\u3084\u3063\u3066\u7de9\u3044\u306e\u3082\u6709\u308a\u304b\u306a\uff1f\uff01\n\u305d\u3093\u306a\u6642\u306f\u3001\u3053\u308c\u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\uff1f\nconst char *msh = \\\n\"#version 330\\n\"\n\"out vec2 gain;\"\n\"uniform float sampleRate;\"\n\n\"void main()\"\n\"{\"\n    \"gain = vec2(0);\"\n\"}\";\n\n\n\u304a\u308f\u308a\u306b\n\u53bb\u5e74\u3001\u60c5\u5831\u304c\u4f59\u308a\u7121\u3044\u4e2d\u306a\u3093\u3068\u304b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u5236\u4f5c\u307e\u3067\u3053\u304e\u3064\u3051\u307e\u3057\u305f\u3002\n\u308f\u304b\u3063\u3066\u307f\u308c\u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u5236\u4f5c\u81ea\u4f53\u306f\u7c21\u5358\u3067\u3057\u305f\u3002\n\u554f\u984c\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30a4\u30ba\u5236\u9650\u3067\u3059\u3002\u3053\u306e4K\u3068\u3044\u3046\u30d0\u30e9\u30f3\u30b9\u304c\u7d76\u5999\u306a\u3068\u3053\u308d\u306a\u306e\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u3053\u3053\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u304c\u30c7\u30e2\u306e\u9b45\u529b\u306a\u306e\u3067\u3059\u304b\u306d\uff1f\n\u3053\u306e\u3042\u305f\u308a\u306f\u4f01\u696d\u79d8\u5bc6\uff08\u7b11\uff09\u306b\u3042\u305f\u308b\u3068\u3053\u3060\u3068\u601d\u3046\u306e\u3067\u697d\u3057\u307f\u306f\u596a\u308f\u306a\u3044\u3067\u304a\u304d\u307e\u3059\u3002\nC\u8a00\u8a9e\u306eopenGL\u90e8\u5206\u3092\u66f8\u304d\u76f4\u3057\u305f\u3044\u4e8b\u304c\u3067\u304d\u3066\u3082webGL\u3068\u624b\u9806\u306f\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u3001\u3060\u3044\u305f\u3044\u691c\u8a0e\u304c\u3064\u304f\u306e\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u306d\u3002\u9069\u5f53\u306b\u66f8\u304d\u76f4\u3057\u3066\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\u53c2\u8003\u307e\u3067\u306b\n\u8a73\u3057\u3044\u5883\u754c\u306f\u308f\u304b\u308a\u307e\u305b\u3093\u304copenGL\u306bshader\u304c\u63a1\u7528\u3055\u308c\u308b\u4ee5\u524d\u306e\u95a2\u6570\u540d\u306f\nglEnable()\n\u307f\u305f\u3044\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u304cshader\u304c\u63a1\u7528\u3055\u308c\u305f\u4ee5\u964d\u306e\u95a2\u6570\u540d\u306f\n((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))()\n\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\u3053\u306e\u8fba\u308a\u306e\u4ed5\u7d44\u307f\u3068\u304b\u306f\u3001\u3042\u307e\u308a\u6c17\u306b\u305b\u305a\u306b\u305d\u3093\u306a\u3082\u306e\u304b\u3067\u4f7f\u3063\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u5834\u5408\u3060\u3068\n\"glCreateShader\"\u306e\u6587\u5b57\u3092\u5927\u6587\u5b57\u306b\u5909\u63db\u3057\u305f\"GLCREATESHADER\"\u306e\u524d\u306b\"PFN\"\u5f8c\u306b\"PROC\"\u3092\u4ed8\u3051\u305f\u6587\u5b57\"PFNGLCREATESHADERPROC\"\u3068\"wglGetProcAddress\"(\u3053\u306e\u6587\u5b57\u306f\u5168\u95a2\u6570\u5171\u901a)\u3068\"glCreateShader\"\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u95a2\u6570\u540d\u304c\u51fa\u6765\u3066\u307e\u3059\u3002\u5197\u9577\u3067\u3059\u304c\u7c21\u5358\u306a\u30eb\u30fc\u30eb\u3067\u3059\u3002\nC\u8a00\u8a9e\u306e\u6539\u884c\u3042\u308a\u6587\u5b57\u5217\u306e\u66f8\u304d\u65b9\u306f\n\nstatic const char *vsh = \\\n\"void main()\"\n\"{\"\n    \"gl_Position = gl_Vertex;\"\n\"}\";\n\n\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u9762\u5012\u306a\u306e\u3067python\u7b49\u3092\u4f7f\u3063\u3066\u52a0\u5de5\u3059\u308b\u304b\u3001\n\nstatic const char *vsh = \"void main(){gl_Position = gl_Vertex;}\";\n\n\u3068\uff11\u884c\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u30bd\u30fc\u30b9\u306fC\u8a00\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002C++\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\nC++\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u306a\u3044\u4e8b\u304c\u767a\u751f\u3057\u307e\u3059\u3002C\u30bd\u30fc\u30b9\u3092\u3044\u3058\u308b\u306a\u3089C\u8a00\u8a9e\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u308c\u3067\u3082C++\u306b\u3057\u305f\u3044\u306a\u3089\u3001\u81ea\u529b\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\u66f4\u306bC++\u306f\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u3002\n\u53c2\u8003\u60c5\u5831\u3068\u3057\u3066\u3001\u7d30\u304b\u3044\u6240\u306f\u5fd8\u308c\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3059\u304c\u3001C++\u306b\u3059\u308b\u306a\u3089gcc\u306e\u5834\u5408void entrypoint()\u306e\u524d\u306bextern\u201cC\u201d\u304c\u5fc5\u8981\u3060\u3063\u305f\u6c17\u304c\u3057\u307e\u3059\u3002\n#4k intro \u4f5c\u308a\u307e\u3059\n4k intro\u306f\u3001C\u8a00\u8a9e\u3092\u66f8\u3044\u3066\u4f5c\u308a\u307e\u3059\u3002\u306a\u306e\u3067\u3001C\u8a00\u8a9e\u3092\u4f7f\u3048\u306a\u3044\u4eba\u9593\u306b\u306f\u3001\u6577\u5c45\u306e\u9ad8\u3044\u3082\u306e\u3068\u601d\u3044\u3053\u3093\u3067\u304d\u307e\u3057\u305f\u3002\u5b9f\u969b\u4f5c\u3063\u3066\u307f\u308b\u3068C\u8a00\u8a9e\u306e\u30b9\u30ad\u30eb\u306f\u3001\u307b\u3068\u3093\u3069\u8981\u308a\u307e\u305b\u3093\u3002\u6587\u6cd5\u3082GLSL\u3068\u540c\u3058\u3088\u3046\u306a\u306e\u3067\u8aad\u3080\u306b\u3082\u56f0\u308a\u307e\u305b\u3093\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3055\u3048\u624b\u306b\u5165\u308c\u308c\u3070webGL\u3067shader\u304c\u66f8\u3051\u308b\u306a\u3089\u4f5c\u308c\u308b\u30e2\u30ce\u3067\u3057\u305f\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u305d\u306e\u524d\u306b\u30bd\u30fc\u30b9\u3092\u3056\u30fc\u3068\u773a\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n// demo.c\n#include <windows.h>\n#include <GL/gl.h>\n#include <GL/glext.h>\n#include <mmreg.h>\n\nstatic const char *vsh = \\\n\"void main()\"\n\"{\"\n\t\"gl_Position = gl_Vertex;\"\n\"}\";\n\nstatic const char *fsh = \\\n\"uniform vec2 resolution;\"\n\"uniform float time;\"\n\"void main()\"\n\"{\"\n\t\"vec2 p = (2.0 * gl_FragCoord.xy - resolution.xy) / resolution.y;\"\n\t\"p += vec2(cos(time), sin(time)) * 0.5;\"\n\t\"float g = exp(-1.5 * dot(p,p));\"\n\t\"gl_FragColor = vec4(g, g, g, 1.0);\"\n\"}\";\n\nconst char *msh = \\\n\"#version 330\\n\"\n\"out vec2 gain;\"\n\"uniform float sampleRate;\"\n\n\"void main()\"\n\"{\"\n\t\"float time = float(gl_VertexID) / sampleRate;\"\n\t\"gain = vec2(sin(6.2831*440.0*fract(time)));\"\n\"}\";\n\n#define U_RESOLUTION \"resolution\" \n#define U_SAMPLERATE \"sampleRate\" \n#define U_TIME \"time\" \n#define O_GAIN \"gain\" \n#define XRES 1920 \n#define YRES 1080 \n#define SND_DURATION 30 \n#define SAMPLE_RATE 48000 \n#define SND_NUMCHANNELS 2 \n\n#define SND_NUMSAMPLES  (SND_DURATION*SAMPLE_RATE)\n#define SND_NUMSAMPLESC (SND_NUMSAMPLES*SND_NUMCHANNELS)\n\nfloat samples[SND_NUMSAMPLESC];\n\nvoid entrypoint(){\n\tDEVMODE dmScreenSettings={{0},0,0,sizeof(DEVMODE),0,DM_PELSWIDTH|DM_PELSHEIGHT,{0},0,0,0,0,0,{0},0,0,XRES,YRES,{0},0};\n\tChangeDisplaySettings(&dmScreenSettings,CDS_FULLSCREEN);\n\tHWND hWnd = CreateWindow((LPCSTR)0xC018,0,WS_POPUP|WS_VISIBLE|WS_MAXIMIZE,0,0,0,0,0,0,0,0);\n\tShowCursor(0);\n\tHDC hDC = GetDC(hWnd);\n\tPIXELFORMATDESCRIPTOR pfd={0,1,PFD_SUPPORT_OPENGL|PFD_DOUBLEBUFFER,32,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0};\n\tSetPixelFormat(hDC, ChoosePixelFormat(hDC, &pfd) , &pfd);\n\tHGLRC  hGLrc = wglCreateContext(hDC);\n\twglMakeCurrent(hDC, hGLrc);\n\tGLuint tmp;\n\tGLuint programMzk = ((PFNGLCREATEPROGRAMPROC)wglGetProcAddress(\"glCreateProgram\"))();\n\ttmp = ((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))(GL_VERTEX_SHADER);\n\t((PFNGLSHADERSOURCEPROC)wglGetProcAddress(\"glShaderSource\"))(tmp, 1, &msh, 0);\n\t((PFNGLCOMPILESHADERPROC)wglGetProcAddress(\"glCompileShader\"))(tmp);\n\t((PFNGLATTACHSHADERPROC)wglGetProcAddress(\"glAttachShader\"))(programMzk, tmp);        \n\tconst GLchar* outs[] = {O_GAIN};\n\t((PFNGLTRANSFORMFEEDBACKVARYINGSPROC)wglGetProcAddress(\"glTransformFeedbackVaryings\"))(programMzk, 1, outs, GL_INTERLEAVED_ATTRIBS);\n\t((PFNGLLINKPROGRAMPROC)wglGetProcAddress(\"glLinkProgram\"))(programMzk);\n\t((PFNGLUSEPROGRAMPROC)wglGetProcAddress(\"glUseProgram\"))(programMzk);\n\t((PFNGLGENBUFFERSPROC)wglGetProcAddress(\"glGenBuffers\"))(1, &tmp);\n\t((PFNGLBINDBUFFERPROC)wglGetProcAddress(\"glBindBuffer\"))(GL_ARRAY_BUFFER, tmp);\n\t((PFNGLBUFFERDATAPROC)wglGetProcAddress(\"glBufferData\"))(GL_ARRAY_BUFFER, SND_NUMSAMPLESC*sizeof(float), 0, GL_STATIC_READ);\n\t((PFNGLBINDBUFFERBASEPROC)wglGetProcAddress(\"glBindBufferBase\"))(GL_TRANSFORM_FEEDBACK_BUFFER, 0, tmp);\n\t((PFNGLUNIFORM1FPROC)wglGetProcAddress(\"glUniform1f\"))(\n\t\t((PFNGLGETUNIFORMLOCATIONPROC)wglGetProcAddress(\"glGetUniformLocation\"))(programMzk, U_SAMPLERATE),\n\t\t(float)SAMPLE_RATE\n\t);\n\tglEnable(GL_RASTERIZER_DISCARD);\n\t((PFNGLBEGINTRANSFORMFEEDBACKPROC)wglGetProcAddress(\"glBeginTransformFeedback\"))(GL_POINTS);\n\tglDrawArrays(GL_POINTS, 0, SND_NUMSAMPLES);\n\t((PFNGLENDTRANSFORMFEEDBACKPROC)wglGetProcAddress(\"glEndTransformFeedback\"))();\n\tglDisable(GL_RASTERIZER_DISCARD);\n\t((PFNGLGETBUFFERSUBDATAPROC)wglGetProcAddress(\"glGetBufferSubData\"))(GL_TRANSFORM_FEEDBACK_BUFFER, 0, sizeof(samples), samples);\n\tGLint program = ((PFNGLCREATEPROGRAMPROC)wglGetProcAddress(\"glCreateProgram\"))();\n\ttmp = ((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))(GL_VERTEX_SHADER);\n\t((PFNGLSHADERSOURCEPROC)wglGetProcAddress(\"glShaderSource\"))(tmp, 1, &vsh, 0);\n\t((PFNGLCOMPILESHADERPROC)wglGetProcAddress(\"glCompileShader\"))(tmp);\n\t((PFNGLATTACHSHADERPROC)wglGetProcAddress(\"glAttachShader\"))(program, tmp);        \n\ttmp = ((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))(GL_FRAGMENT_SHADER);\n\t((PFNGLSHADERSOURCEPROC)wglGetProcAddress(\"glShaderSource\"))(tmp, 1, &fsh, 0);\n\t((PFNGLCOMPILESHADERPROC)wglGetProcAddress(\"glCompileShader\"))(tmp);\n\t((PFNGLATTACHSHADERPROC)wglGetProcAddress(\"glAttachShader\"))(program, tmp);        \n\t((PFNGLLINKPROGRAMPROC)wglGetProcAddress(\"glLinkProgram\"))(program);\n\t((PFNGLUSEPROGRAMPROC)wglGetProcAddress(\"glUseProgram\"))(program);\n    ((PFNGLUNIFORM2FPROC)wglGetProcAddress(\"glUniform2f\"))(\n\t\t((PFNGLGETUNIFORMLOCATIONPROC)wglGetProcAddress(\"glGetUniformLocation\"))(program, U_RESOLUTION),\n    \t(float)XRES,\n    \t(float)YRES\n    );\n\tWAVEFORMATEX wave_format = {\n\t\tWAVE_FORMAT_IEEE_FLOAT,\n\t\tSND_NUMCHANNELS,\n\t\tSAMPLE_RATE,\n\t\tSAMPLE_RATE*sizeof(float)*SND_NUMCHANNELS,\n\t\tsizeof(float)*SND_NUMCHANNELS,\n\t\tsizeof(float)*8,\n\t\t0\n\t};\n\tWAVEHDR wave_hdr = {(LPSTR)samples, sizeof(samples)};\n\tHWAVEOUT hWaveOut;\n\twaveOutOpen(&hWaveOut, WAVE_MAPPER, &wave_format, (DWORD_PTR)hWnd, 0, CALLBACK_WINDOW);\n\twaveOutPrepareHeader(hWaveOut, &wave_hdr, sizeof(wave_hdr));\n\twaveOutWrite(hWaveOut, &wave_hdr, sizeof(wave_hdr));\n\tMMTIME mmt = { TIME_SAMPLES };\n\tMSG msg;\n\tdo {\n\t\tPeekMessage(&msg, 0, 0, 0, TRUE);\n\t\twaveOutGetPosition(hWaveOut, &mmt, sizeof(mmt));\n\t\tfloat time = (float)mmt.u.sample / (float)SAMPLE_RATE;\n\t\t((PFNGLUNIFORM1FPROC)wglGetProcAddress(\"glUniform1f\"))(\n\t\t\t((PFNGLGETUNIFORMLOCATIONPROC)wglGetProcAddress(\"glGetUniformLocation\"))(program, U_TIME),\n\t\t\ttime\n\t\t);\n\t\tglRects(1, 1, -1, -1);\n\t\tSwapBuffers(hDC);\n\t} while (!GetAsyncKeyState(VK_ESCAPE) && (mmt.u.sample < SND_NUMSAMPLES));\n\tExitProcess(0);\n}    \n```\n\n\u305d\u3093\u306a\u306b\u9577\u3044\u3082\u306e\u3058\u3083\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306eshader\u306e\u66f8\u304b\u308c\u3066\u3044\u308b\u90e8\u5206\u3092\u66f8\u304d\u63db\u3048\u308c\u3070\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e4K intro\u3067\u3059\u3002\n\n#\u4f5c\u308b\u70ba\u306e\u4e0b\u6e96\u5099\n\uff43\u8a00\u8a9e\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u70ba\u306bgcc\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\ncrinkler.exe\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3059\u3002http://crinkler.net/\n32bit\u7248\u306eGdi32.Lib, GlU32.Lib, kernel32.Lib, OpenGL32.Lib, User32.Lib, WinMM.Lib\u3092\u624b\u306b\u5165\u308c\u307e\u3059\u3002\n\u3053\u308c\u3089\u306elib\u30d5\u30a1\u30a4\u30eb\u306f\u79c1\u306e\u5834\u5408windows\u306e\u30d5\u30a9\u30eb\u30c0\u5185\u3092\u691c\u7d22\u3057\u305f\u3089\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u307e\u3059\u3002\n\u306a\u306e\u3067\u5165\u624b\u65b9\u6cd5\u304c\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u3002\u81ea\u529b\u3067\u624b\u306b\u3044\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\u3082\u3057\u3001\u308f\u304b\u308b\u65b9\u304c\u3044\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u3092\u3082\u3089\u3048\u308b\u3068\u3042\u308a\u304c\u305f\u3044\u3067\u3059\u3002\n\n###gcc\u306e\u5c0e\u5165\n\u3053\u308c\u304c\u3001\u3061\u3087\u3063\u3068\u5384\u4ecb\u3067\u3042\u308a\u307e\u3057\u3066\u3002 crinkler.exe\u306f\u300132bit\u306e\u30aa\u30d6\u30b8\u30a7\u30d5\u30a1\u30a4\u30eb\u3057\u304b\u53d7\u3051\u4ed8\u3051\u3066\u304f\u308c\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067MinGw(32bit)\u306egcc\u306b\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001glext.h\u304c\u58ca\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3002 \u5dee\u3057\u66ff\u3048\u308c\u3070\u4f7f\u3048\u307e\u3059\u304c\u3001\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u3059\u3002\u4ed6\u306b\u3082\u9762\u5012\u306a\u4e8b\u3082\u3042\u308a\u307e\u3059\u3002\n\u306a\u306e\u3067\u79c1\u306fmingw-w64\u306egcc\u306b-m32\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u4f7f\u3063\u3066\u307e\u3059\u3002\nhttp://mingw-w64.org/doku.php\n\n#\u3067\u306f\u3001\u4f5c\u3063\u3066\u307f\u307e\u3059\n\u308f\u304b\u308a\u6613\u304f\u3059\u308b\u70ba\u306b\u4e00\u3064\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u5fc5\u8981\u306a\u3082\u306e\u3092\u5168\u90e8\u5165\u308c\u3061\u3083\u3044\u307e\u3059\u3002\n\u6d41\u308c\u304c\u7406\u89e3\u3067\u304d\u305f\u3089\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u306a\u308a\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u7ba1\u7406\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u5192\u982d\u306b\u8f09\u305b\u305fC\u8a00\u8a9e\u306e\u30bd\u30fc\u30b9\u3092demo.c\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u7f6e\u3044\u3066\u304f\u3060\u3055\u3044\u3002\ncrinkler.exe\nGdi32.Lib, GlU32.Lib, kernel32.Lib, OpenGL32.Lib, User32.Lib, WinMM.Lib\n\u3053\u308c\u3082\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\necho off\nset PATH=C:\\mingw-w64\\x86_64-6.1.0-posix-seh-rt_v5-rev0\\mingw64\\bin;%PATH%\ngcc -m32 -c demo.c -o demo.o\ncrinkler /OUT:demo.exe /LIBPATH:./ /COMPMODE:SLOW /ENTRY:entrypoint /RANGE:opengl32 /SUBSYSTEM:WINDOWS /ORDERTRIES:1000 /PRINT:IMPORTS /PRINT:LABELS kernel32.lib user32.lib gdi32.lib opengl32.lib winmm.lib demo.o\ndemo.exe\nexit\n```\n\n\u3053\u308c\u3092'demo_make.bat'\u3068\u304b\u9069\u5f53\u306a\u540d\u524d\u3068\u4ed8\u3051\u3066\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\uff12\u884c\u76ee\u306f\u81ea\u5206\u306emingw64\u306e\u74b0\u5883\u306b\u3042\u308f\u305b\u3066\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u3057\u305f\u3089\u3001\u3053\u306ebat\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3057\u307e\u3089\u304f\u5f85\u3066\u3070\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30c7\u30e2\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067\u51fa\u6765\u4e0a\u304c\u308a\u3002\nESC\u30ad\u30fc\u3067\u30c7\u30e2\u306f\u7d42\u4e86\u3057\u307e\u3059\u3002\n\ncrinkler.exe\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5168\u3066\u3092\u628a\u63e1\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\n/LIBPATH:./ \u306b\u3064\u3044\u3066\nkernel32.lib\u7b49\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4ed6\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u305f\u3089\u3001\u3053\u3053\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\u5834\u5408\u306f\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u3092\u8d77\u52d5\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n/COMPMODE:SLOW\u3000\u306b\u3064\u3044\u3066\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30e2\u30fc\u30c9\u304cSLOW\u306b\u306a\u3063\u3066\u307e\u3059\u304cFAST\u3063\u3066\u306e\u3082\u3042\u308a\u307e\u3059\u3002\n\u5f8c\u306f\u5909\u3048\u308b\u4e8b\u3082\u7121\u3044\u3088\u3046\u306b\u601d\u3048\u307e\u3059\u3002\u5fc5\u8981\u306a\u3089\u81ea\u529b\u3067\u3084\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n#C\u8a00\u8a9e\u306e\u30de\u30af\u30ed\u90e8\u5206\u306e\u8aac\u660e\n```\n#define U_RESOLUTION \"resolution\" \n#define U_SAMPLERATE \"sampleRate\" \n#define U_TIME \"time\" \n#define O_GAIN \"gain\" \n#define XRES 1920 \n#define YRES 1080 \n#define SND_DURATION 30 \n#define SAMPLE_RATE 48000 \n#define SND_NUMCHANNELS 2 \n```\nshader\u306euniform\u540d\u3001out\u540d\u3068C\u8a00\u8a9e\u306euniform\u540d\u3001out\u540d\u3092\u7e4b\u3050\u70ba\u306b\u3001U_RESOLUTION,U_SAMPLERATE ,U_TIME, O_GAIN \u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002shader\u306euniform\u540d\u3001out\u540d\u3092\u5909\u3048\u305f\u6642\u306f\u3001\u3053\u3053\u3082\u66f8\u304d\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nXRES,YRES \u306f\u753b\u9762\u30b5\u30a4\u30ba\u3067\u3059\u3002\u4eca\u306e\u6570\u5b57\u306fTDF\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nSND_DURATION \u306f\u97f3\u697d\u306e\u6f14\u594f\u6642\u9593\uff08\u79d2\uff09\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u308c\u3068\u540c\u6642\u306b\u30c7\u30e2\u306e\u4e0a\u6620\u6642\u9593\u3068\u4e00\u7dd2\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nSAMPLE_RATE \u306f\u97f3\u306e\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30ec\u30fc\u30c8\u3002\nSND_NUMCHANNELS \u306f\u97f3\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u6570\u3067\u3059\u3002\n\n\n#shader\u306e\u30df\u30cb\u5316\u51e6\u7406\n4K intro \u3068\u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c4096\u30d0\u30a4\u30c8\u3092\u8d85\u3048\u306a\u3044\u3053\u3068\u3001\u3068\u8a00\u3046\u6761\u4ef6\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u3053\u308c\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308c\u30701.43 KB\u3067\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u307e\u3059\u304c\u3001shader\u306e\u8a18\u8ff0\u91cf\u304c\u5897\u3048\u308b\u3068shader\u306e\u30df\u30cb\u5316\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u30df\u30cb\u5316\u3068\u306f\n```\nfloat hoge = hoge2 + hoge3;\n```\n\u3092\n```\nfloat a=b+c; \n```\n\u307f\u305f\u3044\u306b\u8a18\u8ff0\u91cf\u3092\u6e1b\u3089\u3059\u4f5c\u696d\u3002\n\u3053\u308c\u3092\u81ea\u5206\u3067\u3059\u308b\u3068\u306a\u308b\u3068\u3001\u56f0\u96e3\u304c\u4e88\u60f3\u3055\u308c\u307e\u3059\u3002\u3067\u3082\u30df\u30cb\u5316\u7528exe\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002\nshader_minifier.exe\u3000http://www.ctrl-alt-test.fr/?page_id=7\n\u3053\u308c\u306fshader\u306etext\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5165\u529b\u3059\u308b\u3068C\u8a00\u8a9e\u306e\u30d8\u30c3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u51fa\u529b\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u3053\u308c\u3092C\u8a00\u8a9e\u306b\u30d5\u30a1\u30a4\u30eb\u306b\u7d61\u3081\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n\u7528\u6cd5\u306f\u81ea\u529b\u3067\u898b\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u30df\u30cb\u5316\u5468\u8fba\u306e\u30b9\u30ad\u30eb\u30b2\u30c3\u30c8\u304c4K intro\u306e\u918d\u9190\u5473\u3067\u3059\u3002\n\u3082\u3046\u4e00\u3064\nGLSL Compiler - Minifier for GLSL.\nhttp://glslunit.appspot.com/compiler.html\n\u3068\u3044\u3046\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u30df\u30cb\u5316\u51e6\u7406\u306e\u51fa\u6765\u308b\u30da\u30fc\u30b8\u3082\u3042\u308a\u307e\u3059\u3002\n\u79c1\u306e\u5834\u5408\u306f\u81ea\u5206\u304c\u66f8\u3044\u305fshader\u3068shader_minifier.exe\u306e\u76f8\u6027\u304c\u308f\u308b\u304f\u3066\u3001python\u3067\u30df\u30cb\u5316\u51e6\u7406\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u3053\u306e\u90e8\u5206\u306fshader\u3092\u66f8\u304f\u306e\u3068\u306f\u3001\u307e\u305f\u9055\u3063\u305f\u697d\u3057\u307f\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3046\u3044\u3046\u306e\u3092\u30cf\u30c3\u30af\u3063\u3066\u3044\u3046\u3093\u3067\u3059\u304b\u306d\uff1f\n\n#\u7121\u7406\u306b4k\u306b\u3053\u3060\u308f\u308b\u4e8b\u306f\u306a\u3044\nTDF\u306b\u304a\u3044\u30664k intro\u3092\u51fa\u54c1\u3057\u305f\u304c\u81ea\u5206\u3067\u3082\u30af\u30aa\u30ea\u30c6\u30a3\u306e\u4f4e\u3055\u306b\u60b2\u3057\u304f\u306a\u3057\u307e\u3057\u305f\u3002\n\u30b5\u30a4\u30ba\u304c\u5148\u3058\u3083\u306a\u304f\u3066\u30af\u30aa\u30ea\u30c6\u30a3\u304c\u5148\u3067\u3057\u305f\u30028K\u3068\u304b64K\u3068\u304b\u306e\u30ab\u30c6\u30b4\u30ea\u30fc\u3042\u308b\u306e\u3067\u3001\u7de9\u304f\u884c\u304d\u307e\u3057\u3087\u3046\u300264K\u306a\u3093\u304b\u306f\u30df\u30cb\u5316\u51e6\u7406\u3057\u306a\u304f\u3066\u3082\u30b5\u30a4\u30ba\u304c\u4f59\u3063\u3061\u3083\u3046\u3093\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u306d\u3002\n\u305f\u3060\u3001shader\u306e\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3044\u3068crinkler.exe\u304c\u3081\u3061\u3083\u304f\u3061\u3083\u6642\u9593\u304c\u639b\u304b\u308b\u4e8b\u304c\u4e88\u60f3\u3055\u308c\u307e\u3059\u3002\n\u899a\u609f\u3057\u3066\u3084\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u304b\u3082\uff1f\n\n#\u3068\u308a\u3042\u3048\u305a\u6620\u50cf\u3060\u3051\u3067\u3044\u3044\u3084\u3063\u3066\u7de9\u3044\u306e\u3082\u6709\u308a\u304b\u306a\uff1f\uff01\n\u305d\u3093\u306a\u6642\u306f\u3001\u3053\u308c\u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\uff1f\n\n```\nconst char *msh = \\\n\"#version 330\\n\"\n\"out vec2 gain;\"\n\"uniform float sampleRate;\"\n\n\"void main()\"\n\"{\"\n    \"gain = vec2(0);\"\n\"}\";\n```\n\n#\u304a\u308f\u308a\u306b\n\u53bb\u5e74\u3001\u60c5\u5831\u304c\u4f59\u308a\u7121\u3044\u4e2d\u306a\u3093\u3068\u304b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u5236\u4f5c\u307e\u3067\u3053\u304e\u3064\u3051\u307e\u3057\u305f\u3002\n\u308f\u304b\u3063\u3066\u307f\u308c\u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u5236\u4f5c\u81ea\u4f53\u306f\u7c21\u5358\u3067\u3057\u305f\u3002\n\u554f\u984c\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30a4\u30ba\u5236\u9650\u3067\u3059\u3002\u3053\u306e4K\u3068\u3044\u3046\u30d0\u30e9\u30f3\u30b9\u304c\u7d76\u5999\u306a\u3068\u3053\u308d\u306a\u306e\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u3053\u3053\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u304c\u30c7\u30e2\u306e\u9b45\u529b\u306a\u306e\u3067\u3059\u304b\u306d\uff1f\n\u3053\u306e\u3042\u305f\u308a\u306f\u4f01\u696d\u79d8\u5bc6\uff08\u7b11\uff09\u306b\u3042\u305f\u308b\u3068\u3053\u3060\u3068\u601d\u3046\u306e\u3067\u697d\u3057\u307f\u306f\u596a\u308f\u306a\u3044\u3067\u304a\u304d\u307e\u3059\u3002\n\nC\u8a00\u8a9e\u306eopenGL\u90e8\u5206\u3092\u66f8\u304d\u76f4\u3057\u305f\u3044\u4e8b\u304c\u3067\u304d\u3066\u3082webGL\u3068\u624b\u9806\u306f\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u3001\u3060\u3044\u305f\u3044\u691c\u8a0e\u304c\u3064\u304f\u306e\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u306d\u3002\u9069\u5f53\u306b\u66f8\u304d\u76f4\u3057\u3066\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\u53c2\u8003\u307e\u3067\u306b\n\u8a73\u3057\u3044\u5883\u754c\u306f\u308f\u304b\u308a\u307e\u305b\u3093\u304copenGL\u306bshader\u304c\u63a1\u7528\u3055\u308c\u308b\u4ee5\u524d\u306e\u95a2\u6570\u540d\u306f\nglEnable()\n\u307f\u305f\u3044\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u304cshader\u304c\u63a1\u7528\u3055\u308c\u305f\u4ee5\u964d\u306e\u95a2\u6570\u540d\u306f\n((PFNGLCREATESHADERPROC)wglGetProcAddress(\"glCreateShader\"))()\n\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\u3053\u306e\u8fba\u308a\u306e\u4ed5\u7d44\u307f\u3068\u304b\u306f\u3001\u3042\u307e\u308a\u6c17\u306b\u305b\u305a\u306b\u305d\u3093\u306a\u3082\u306e\u304b\u3067\u4f7f\u3063\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u5834\u5408\u3060\u3068\n\"glCreateShader\"\u306e\u6587\u5b57\u3092\u5927\u6587\u5b57\u306b\u5909\u63db\u3057\u305f\"GLCREATESHADER\"\u306e\u524d\u306b\"PFN\"\u5f8c\u306b\"PROC\"\u3092\u4ed8\u3051\u305f\u6587\u5b57\"PFNGLCREATESHADERPROC\"\u3068\"wglGetProcAddress\"(\u3053\u306e\u6587\u5b57\u306f\u5168\u95a2\u6570\u5171\u901a)\u3068\"glCreateShader\"\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u95a2\u6570\u540d\u304c\u51fa\u6765\u3066\u307e\u3059\u3002\u5197\u9577\u3067\u3059\u304c\u7c21\u5358\u306a\u30eb\u30fc\u30eb\u3067\u3059\u3002\n\nC\u8a00\u8a9e\u306e\u6539\u884c\u3042\u308a\u6587\u5b57\u5217\u306e\u66f8\u304d\u65b9\u306f\n```\nstatic const char *vsh = \\\n\"void main()\"\n\"{\"\n    \"gl_Position = gl_Vertex;\"\n\"}\";\n```\n\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u9762\u5012\u306a\u306e\u3067python\u7b49\u3092\u4f7f\u3063\u3066\u52a0\u5de5\u3059\u308b\u304b\u3001\n```\nstatic const char *vsh = \"void main(){gl_Position = gl_Vertex;}\";\n```\n\u3068\uff11\u884c\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u30bd\u30fc\u30b9\u306fC\u8a00\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002C++\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\nC++\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u306a\u3044\u4e8b\u304c\u767a\u751f\u3057\u307e\u3059\u3002C\u30bd\u30fc\u30b9\u3092\u3044\u3058\u308b\u306a\u3089C\u8a00\u8a9e\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u308c\u3067\u3082C++\u306b\u3057\u305f\u3044\u306a\u3089\u3001\u81ea\u529b\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\u66f4\u306bC++\u306f\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u3002\n\u53c2\u8003\u60c5\u5831\u3068\u3057\u3066\u3001\u7d30\u304b\u3044\u6240\u306f\u5fd8\u308c\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3059\u304c\u3001C++\u306b\u3059\u308b\u306a\u3089gcc\u306e\u5834\u5408void entrypoint()\u306e\u524d\u306bextern\u201cC\u201d\u304c\u5fc5\u8981\u3060\u3063\u305f\u6c17\u304c\u3057\u307e\u3059\u3002\n", "tags": ["GLSL"]}