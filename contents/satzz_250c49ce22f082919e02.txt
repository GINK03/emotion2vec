{"context": "ActiveAdmin\u306e\u30ea\u30bd\u30fc\u30b9\u306eindex\u306b\u306f\u3001\u30e2\u30c7\u30eb\u306e\u5168\u30c7\u30fc\u30bf\u3092CSV\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30dc\u30bf\u30f3\u304c\u3064\u3044\u3066\u304f\u308b\u304c\u3001\u884c\u3084\u5217\u3092\u7d5e\u3063\u305fCSV\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u307f\u308b\u3002\uff08\u7d50\u679c\u7684\u306b\u306f\u3001CSV\u3092\u4e00\u884c\u305a\u3064\u7d44\u307f\u7acb\u3066\u308b\u3060\u3051\uff09\nActiveAdmin.register Klass do\n  before_filter :skip_sidebar!\n\n  collection_action :download_report, method: :get do\n    query = Klass.get_query\n    csv_data = CSV.generate do |csv|\n      csv << %w{col1 col2}\n      query.each do |row|\n        csv << [row.col1, row.col2]\n      end\n    end\n    send_data csv_data, type: 'text/csv; header=present', disposition: 'attachment; filename=file.csv'\n  end\n\n  action_item only: :index do\n    link_to 'download report', params.merge(action: :download_report)\n  end\n\n  index download_links: false do\n    # ...\n  end\nend\n\n\n\u53c2\u8003\n\u4ee5\u4e0b\u3092\u30b3\u30d4\u30fc\u3057\u3066\u4fee\u6b63\u3057\u305f\n\nhttps://codedump.io/share/JdwI3J2Knkx/1/active-admin-csv-export-custom-query-scoped\n\n\n[ActiveAdmin](https://github.com/activeadmin/activeadmin)\u306e\u30ea\u30bd\u30fc\u30b9\u306eindex\u306b\u306f\u3001\u30e2\u30c7\u30eb\u306e\u5168\u30c7\u30fc\u30bf\u3092CSV\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30dc\u30bf\u30f3\u304c\u3064\u3044\u3066\u304f\u308b\u304c\u3001\u884c\u3084\u5217\u3092\u7d5e\u3063\u305fCSV\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u307f\u308b\u3002\uff08\u7d50\u679c\u7684\u306b\u306f\u3001CSV\u3092\u4e00\u884c\u305a\u3064\u7d44\u307f\u7acb\u3066\u308b\u3060\u3051\uff09\n\n```Ruby\nActiveAdmin.register Klass do\n  before_filter :skip_sidebar!\n  \n  collection_action :download_report, method: :get do\n    query = Klass.get_query\n    csv_data = CSV.generate do |csv|\n      csv << %w{col1 col2}\n      query.each do |row|\n        csv << [row.col1, row.col2]\n      end\n    end\n    send_data csv_data, type: 'text/csv; header=present', disposition: 'attachment; filename=file.csv'\n  end\n\n  action_item only: :index do\n    link_to 'download report', params.merge(action: :download_report)\n  end\n\n  index download_links: false do\n    # ...\n  end\nend\n```\n\n# \u53c2\u8003\n\u4ee5\u4e0b\u3092\u30b3\u30d4\u30fc\u3057\u3066\u4fee\u6b63\u3057\u305f\n\n- https://codedump.io/share/JdwI3J2Knkx/1/active-admin-csv-export-custom-query-scoped\n", "tags": ["activeadmin", "Ruby"]}