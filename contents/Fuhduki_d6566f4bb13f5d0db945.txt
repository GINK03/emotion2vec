{"context": " More than 1 year has passed since last update.D\u8a00\u8a9e Advent Calendar 2012\u306e21\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\nD\u8a00\u8a9e\u306eRange\u306e\u4e8b\u3092\u8efd\u304f\u3068\u3001D\u8a00\u8a9e\u3067LINQ\u3092\u3069\u3046\u5b9f\u73fe\u3059\u308b\u304b\u3068\u3044\u3046\u304a\u8a71\u3092\u3057\u307e\u3059\u3002\n\nRange\u3063\u3066\uff1f\nRange\u3068\u3044\u3046\u306e\u306fD\u8a00\u8a9e\u3067\u6271\u308f\u308c\u308b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u3053\u3068\u3002\n\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u4f8b\u3068\u3057\u3066\u306f\u3001List\u3068\u304bMap\u3068\u304bQueue\u3068\u304b\u3042\u308a\u307e\u3059\u3002\nD\u8a00\u8a9e\u306e\u5834\u5408\u3001\u30af\u30e9\u30b9\u3084\u69cb\u9020\u4f53\u306b\u7279\u5b9a\u306e\u30e1\u30bd\u30c3\u30c9\u30fb\u30e1\u30f3\u30d0\u3092\u5b9f\u88c5\u3059\u308c\u3070OK\u3067\u3059\u3002\nRange\u306b\u306f\u5e7e\u3064\u304b\u306e\u7a2e\u985e\u304c\u3042\u3063\u3066\u3001\u4e0b\u306e\u8868\u306e\u901a\u308a\u3067\u3059\u3002\n\n\n\nRange\u306e\u7a2e\u985e\n\u8aac\u660e\n\n\n\n\nInputRange\nempty\u3001front\u3001popFront\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b\n\n\nOutputRange\nput\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b\n\n\nForwardRange\nInputRange+save\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b\n\n\nBidirectionalRange\nForwardRange+back\u3001popBack\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b\n\n\nRandomAccessRange\nBidirectionalRange+length\u3001opIndex\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\n\n\n\n\u6700\u4f4e\u3067\u3082InputRange\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308c\u3070foreach\u3067\u56de\u3059\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001std.range\u3092include\u3059\u308c\u3070isXXXXRange\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5404\u7a2eRange\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u308b\u304b\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5224\u5225\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u4ed6\u306b\u3082\u8272\u3005\u5224\u5225\u51fa\u6765\u3066\u3001isInfinit\u3067\u7121\u9650\u30ea\u30b9\u30c8\u304b\u3069\u3046\u304b\u3068\u304b\u3001hasSlicing\u3067\u30b9\u30e9\u30a4\u30b7\u30f3\u30b0\uff08range[3..5]\u307f\u305f\u3044\u306a\u306e)\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u304b\u5224\u5225\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u3001\u5168\u90e8\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\uff01\n\nLINQ\u3063\u3066\uff1f\nLINQ\u3063\u3066\u3044\u3046\u306e\u306fLanguage INtegrated Query(\u7d71\u5408\u8a00\u8a9e\u30af\u30a8\u30ea)\u306e\u7565\u3067\u3059\u3002\n.NET Framework3.5\u304b\u3089\u63d0\u4f9b\u3055\u308c\u305f\u6a5f\u80fd\u306e\u4e8b\u3067\u3001C#\u3084Visual Basic\u3067\u8272\u3093\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u5bfe\u3057\u3066\u540c\u3058\u30af\u30a8\u30ea\u3067\u30c7\u30fc\u30bf\u306e\u64cd\u4f5c\u3092\u53ef\u80fd\u306b\u3057\u3088\u3046\u3063\u3066\u3044\u3046\u5974\u3067\u3059\u3002\n\u6271\u3046\u30c7\u30fc\u30bf\u3082\u3001IEnumerable\u30fbIEnumerable<T>\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6271\u3046LINQ to Objects\u3001XML\u3092\u6271\u3046LINQ to XML\u3001RDB\u3092\u6271\u3046LINQ to SQL\u3084LINQ to Entities\u7b49\u3005\u8272\u3005\u3042\u308a\u307e\u3059\u3002\n\u5909\u308f\u308a\u7a2e\u3068\u3057\u3066\u975e\u540c\u671f\u3084\u30a4\u30d9\u30f3\u30c8\u306e\u64cd\u4f5c\u3092\u884c\u3046Reactive Extensions\u306a\u3093\u3066\u306a\u3093\u3066\u3082\u306e\u3082\u3042\u3063\u305f\u308a\u3002\nLINQ\u3063\u3066O/R\u30de\u30c3\u30d1\u30fc\u306a\u306e\u3067\u306f\u3001\u3068\u304b\u8a00\u308f\u308c\u308b\u306e\u3067\u3059\u304cO/R\u30de\u30c3\u30d1\u30fc\u306a\u306f\u3042\u304f\u307e\u3067LINQ\u306e\u307b\u3093\u306e\u4e00\u90e8\u306a\u306e\u3067\u3059\u3002\n\u3067\u306f\u3001\u305d\u306eLINQ\u306e\u7279\u5fb4\u3092\u4ee5\u4e0b\u306b\u8efd\u304f\u3002\n\n2\u3064\u306e\u8a18\u8ff0\u65b9\u6cd5\nLINQ\u306b\u306f\u30af\u30a8\u30ea\u8a18\u6cd5\u3068\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30a4\u30f3\u8a18\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b1\u301c100\u306e\u4e2d\u304b\u3089\u5076\u6570\u306e\u6570\u5b57\u306e\u4e8c\u4e57\u306e\u5024\u3092\u53d6\u308a\u51fa\u3059\u64cd\u4f5c\u30922\u3064\u306e\u8a18\u6cd5\u3067\u66f8\u304d\u307e\u3059\u3002\n\nLINQ\u306e\u8a18\u6cd5\n// \u30af\u30a8\u30ea\u8a18\u6cd5\nvar query = from x in Enumerable.Range(1, 100)\n            where x % 2 == 0\n            select x * x;\n\n// \u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30a4\u30f3\u8a18\u6cd5\nvar methodChain = Enumerable.Range(1, 100).Where(x => x % 2 == 0).Select(x => x * x);\n\n\n\n\u7d71\u4e00\u7684\u306a\u64cd\u4f5c\nLINQ to Objects\u3084LINQ to XML\u3001LINQ to SQL\u3084LINQ to Entities\u7b49\u306a\u3069\u3001\u6271\u3046\u30c7\u30fc\u30bf\u306e\u7a2e\u985e\u306f\u8272\u3005\u3042\u308a\u307e\u3059\u3002\n\u3060\u3051\u3069\u3001Where\u3060\u3068\u8a18\u8f09\u3057\u305f\u6761\u4ef6\u306e\u3082\u306e\u3060\u3051\u53d6\u308a\u51fa\u3059\u3057\u3001Select\u3060\u3068\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u8981\u7d20\u304b\u3089\u597d\u304d\u306a\u5f62\u5f0f\u306b\u6574\u5f62\u3057\u3066\u51fa\u529b\u3059\u308b\u3057\u3001Count\u3060\u3068\u8981\u7d20\u306e\u6570\u3092\u6570\u3048\u308b\u3057\u3001OrderBy\u306a\u3089\u30bd\u30fc\u30c8\u3059\u308b\u3057\u3001GroupBy\u306a\u3089\u7279\u5b9a\u306e\u8981\u7d20\u3067\u30b0\u30eb\u30fc\u30d7\u5206\u3051\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u6271\u3046\u30c7\u30fc\u30bf\u304c\u5909\u308f\u308c\u3069\u3001LINQ\u3067\u76ee\u7684\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u3084\u308a\u65b9\u304c\u7d71\u4e00\u3055\u308c\u308b\u3053\u3068\u3067\u3001\u899a\u3048\u308b\u3053\u3068\u304c\u5c11\u306a\u304f\u3066\u6e08\u3080\u3057\u3001\u3044\u3061\u3044\u3061\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u8abf\u3079\u306a\u304f\u3066\u3088\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u9045\u5ef6\u8a55\u4fa1\nLINQ\u306f\u3001LINQ\u3067\u8a18\u8f09\u3057\u305f\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u305d\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u306a\u3044\u9650\u308a\u30c7\u30fc\u30bf\u3078\u306e\u64cd\u4f5c\u3092\u884c\u308f\u306a\u3044\u69d8\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u4e0a\u8a18\u306e\u8a18\u8f09\u4f8b\u3060\u3068\u3001query\u3084methodChain\u306e\u7b87\u6240\u3067\u306f\u307e\u3060\u5076\u6570\u306e\u5224\u5225\u3084x\u306e\u4e8c\u4e57\u8a08\u7b97\u306f\u884c\u308f\u308c\u3066\u307e\u305b\u3093\u3002\nquery\u3084methodChain\u306e\u6700\u521d\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3001 foreach\u3067\u5404\u8981\u7d20\u3092\u53d6\u5f97\u3057\u305f\u308a\u3057\u305f\u6642\u306b\u3001\u521d\u3081\u3066\u5224\u5225\u3084\u8a08\u7b97\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\nRange\u3067LINQ\u3057\u3088\u3046\uff01\n\u5148\u307b\u3069\u6319\u3052\u305f\u901a\u308a\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u95a2\u3057\u3066\u306fRange\u304c\u3042\u308a\u307e\u3059\u3002\n\u30af\u30a8\u30ea\u8a18\u6cd5\u306f\u6d41\u77f3\u306b\u30b3\u30f3\u30d1\u30a4\u30e9\u81ea\u4f53\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u3044\u308b\u306e\u3067\u7121\u7406\u3067\u3059\u304c\u3001\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30a4\u30f3\u8a18\u6cd5\u306a\u3089\u30702.059\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305fUFCS\u3067\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u4ed6\u306b\u3082\u3001D\u8a00\u8a9e\u306b\u306f\u30e9\u30e0\u30c0\u5f0f\u304c\u3042\u3063\u305f\u308a\u3068\u5b9f\u88c5\u3057\u3084\u3059\u305d\u3046\u306a\u306e\u3067\u3001LINQ to Range\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u304b\u306a\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u3002\n\u3068\u3044\u3046\u304b\u3001JavaScript\u3067\u306eLINQ\u5b9f\u88c5\u3067\u3042\u308blinq.js\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3068\u304b\u30b3\u30fc\u30c9\u898b\u306a\u304c\u3089D\u8a00\u8a9e\u306b\u843d\u3068\u3057\u8fbc\u3093\u3060\u611f\u3058\u3067\u3059\u3002\n\u4f8b\u3068\u3057\u3066where\u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306b\u3002\n\nLINQ_to_Range\u306ewhere\ntemplate where(alias pred) if (is(typeof(unaryFun!pred)))\n{\n    auto where(Range)(Range r) if (isInputRange!(Unqual!Range))\n    {\n        return WhereRange!(unaryFun!pred, Range)(r);\n    }\n}\n\nprivate struct WhereRange(alias pred, Range)\n{\n    alias Unqual!Range R;\n    R _prevSource;\n    bool _isAccess;\n\n    // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    this(R r)\n    {\n        _prevSource = r;\n        _isAccess = false;\n    }\n\n    // empty(\u7a7a\u304b\u3069\u3046\u304b)\u306e\u63d0\u4f9b\n    static if (isInfinite!Range)\n    {\n        enum bool empty = false;\n    }\n    else\n    {\n        @property bool empty() { return _prevSource.any!(pred); }\n    }\n\n    // \u4e00\u756a\u6700\u521d\u306e\u8981\u7d20\u306b\u79fb\u52d5(1\u56de\u76ee\u3060\u3051)\n    private void popFirst()\n    {\n        if(!_isAccess)\n        {\n            while(!_prevSource.empty && !pred(_prevSource.front))\n            {\n                _prevSource.popFront();\n            }\n            _isAccess = true;\n        }\n    }\n\n    // popFront(\u53d6\u308a\u51fa\u3059\u8981\u7d20\u3092\u524d\u306b\u4e00\u3064\u5148\u306b\u79fb\u52d5)\u306e\u63d0\u4f9b\n    void popFront()\n    {\n        this.popFirst();\n        do\n        {\n            _prevSource.popFront();\n        }while(!_prevSource.empty && !pred(_prevSource.front));\n    }\n\n    // front(\u8981\u7d20\u306e\u53d6\u5f97)\u306e\u63d0\u4f9b\n    @property auto ref front()\n    {\n        this.popFirst();\n        return _prevSource.front;\n    }\n\n    // where\u306e\u9023\u6253\u3092\u63d0\u4f9b\n    public auto where(alias newPred)()\n    if (is(typeof(unaryFun!newPred)))\n    {\n        return WhereRange!(delegate bool(typeof(_prevSource.front) x) { return unaryFun!newPred(x) && pred(x);}, Range)(_prevSource);   \n    }\n}\n\n\nstd.algorithm\u3092\u898b\u305f\u308a\u3057\u306a\u304c\u3089\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\nstd.algorithm\u306efilter\u3068\u307b\u307c\u540c\u3058\u6a5f\u80fd\u306a\u306e\u3067\u3059\u304c\u3001\u3042\u3063\u3061\u306ffilter\u7528\u306e\u69cb\u9020\u4f53\u3092\u4f5c\u6210\u3059\u308b\u969b\u306bpred\u306e\u5224\u5b9a\u3068\u304b\u5b9f\u884c\u3059\u308b\u306e\u3067\u3001\u305d\u308c\u3082\u9045\u5ef6\u3055\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\u3042\u3068\u3001WhereRange\u306bwhere\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u306e\u3092\u898b\u3066\u5206\u304b\u308b\u901a\u308a\u3001where\u306bwhere\u3092\u7e4b\u3052\u3066\u3082\u3001\u305d\u308c\u305e\u308c\u306epred\u306e\u8ad6\u7406\u7a4d\u306e\u5f0f\u304b\u3089WhereRange\u3092\u4f5c\u308b\u306e\u3067\u3001where\u3092\u4f55\u56de\u3082\u7e4b\u3052\u308b\u3001\u307f\u305f\u3044\u306a\u3088\u304f\u3084\u308b\u66f8\u304d\u65b9\u3092\u3057\u3066\u3082\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5f71\u97ff\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3082linq.js\u3084\u5143\u3005\u306eLINQ\u3067\u540c\u3058\u69d8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u306e\u4ed6\u306b\u3053\u3093\u306a\u306e\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n\n\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd\n\u8aac\u660e\n\n\n\n\nany!(pred,Range)(Range r)\nRange\u306b\u8981\u7d20\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u5224\u5b9a\u3059\u308b\u3002pred\u3092\u66f8\u3051\u3070\u305d\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u8981\u7d20\u304c\u3042\u308b\u304b\u5206\u304b\u308b\u3002\n\n\ncount!(Range)(Range r)\nRnage\u306b\u3044\u304f\u3064\u8981\u7d20\u304c\u3042\u308b\u304b\u6570\u3048\u308b\u3002\n\n\nskip!(Range)(Range r, size_t count)\nRange\u306e\u8981\u7d20\u306e\u982dcount\u500b\u3092\u98db\u3070\u3057\u305fRange\u3092\u53d6\u5f97\u3059\u308b\u3002\n\n\nchois!(Range)(Range r)\nRange\u306e\u4e2d\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u3067\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3059\u3002\n\n\nselectMany!(pred, Range)(Range r)\nRange\u306e\u5404\u8981\u7d20\u3092\u4e00\u3064\u306eRange\u306b\u5c04\u5f71\u3057\u3066\u5e73\u5766\u5316\u3059\u308b\u3002\n\n\n\nselectMany\u306b\u3064\u3044\u3066\u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u56f3\u89e3 SelectMany\u304c\u56f3\u304c\u8f09\u3063\u3066\u3066\u5206\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u3001\u3053\u3061\u3089\u3092\u898b\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3044\u3044\u304b\u306a\u3068\u3002\nLINQ\u306b\u306f\u307e\u3060\u307e\u3060\u3044\u308d\u3093\u306a\u64cd\u4f5c\u304c\u3042\u3063\u3066\u3001linq.js\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30da\u30fc\u30b8\u306e\u3088\u3046\u306b\u8272\u3005\u3042\u308a\u307e\u3059\u3002\n.Net Framework\u5074\u306eLIQN to Objects\u306e\u4e00\u89a7\u306f\u300cLINQ\u306e\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u4e00\u89a7\u3068\u3001\u307b\u307c\u5168\u90e8\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002(\u5730\u5e73\u7dda\u306b\u884c\u304f)\u300d\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\n\u79c1\u3001\u6c17\u306b\u306a\u308a\u307e\u3059\uff01\n\u3067\u306f\u6700\u5f8c\u306b\u3001\u5343\u53cd\u7530\u3048\u308b\u3092\u4e0a\u8a18\u306eLINQ to Range\u3068std.range\u3068std.algorithm\u3092\u4f7f\u3063\u3066\u6c42\u3081\u3066\u307f\u307e\u3059\u3002\n\n\u5343\u53cd\u7530\u3048\u308b\u3092\u6c42\u3081\u308b\nimport std.stdio;\nimport std.algorithm;\nimport std.range;\nimport linq;    //LINQ to Range\u3092\u5b9f\u88c5\u3057\u3066\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\n\nvoid main()\n{\n    0.iota(1000).map!(n => (a => a[3].repeat.selectMany!\"a\".skip(n+1).front ~ a[2].repeat.selectMany!\"a\".skip(n+1).front ~ a[1].repeat.selectMany!\"a\".skip(n+1).front ~ a[0].repeat.selectMany!\"a\".skip(n+1).front ~ \"\u53cd\u7530\" ~ [\"\u3048\u30fc\",\"\u3073\u30fc\",\"\u3057\u30fc\",\"\u3067\u3043\u30fc\",\"\u3044\u30fc\",\"\u3048\u3075\",\"\u3058\u30fc\",\"\u3048\u3044\u3061\",\"\u3042\u3044\",\"\u3058\u3047\u30fc\",\"\u3051\u30fc\",\"\u3048\u308b\",\"\u3048\u3080\",\"\u3048\u306c\",\"\u304a\u30fc\",\"\u3074\u30fc\",\"\u304d\u3085\u30fc\",\"\u3042\u30fc\u308b\",\"\u3048\u3059\",\"\u3066\u3043\u30fc\",\"\u3086\u30fc\",\"\u3076\u3044\",\"\u3060\u3076\u308b\",\"\u3048\u3063\u304f\u3059\",\"\u308f\u3044\",\"\u305c\u3063\u3068\"].cycle.skip(n).front)([\"\", \"\u5341\", \"\u767e\",\"\u5343\"].map!(x => [\"\", \"\u4e00\", \"\u4e8c\", \"\u4e09\", \"\u56db\", \"\u4e94\", \"\u516d\", \"\u4e03\", \"\u516b\", \"\u4e5d\"].map!(y => ((x!=\"\" && y==\"\u4e00\")? \"\" : y) ~ ((x!=\"\" && y==\"\")? \"\" : x))).map!(x => x.map!(y => y.repeat.take(10 ^^ [\"\u4e00\", \"\u5341\", \"\u767e\",\"\u5343\"].countUntil(x.skip(1).front))).selectMany!(x => x)))).skip(1000-1).front.writeln; // \u5343\u53cd\u7530\u3048\u308b\n}\n\n\n\u4e2d\u9014\u534a\u7aef\u6975\u307e\u308a\u306d\u3047\u3047\u3047\u3048\u3048\u3048\u3048\u3048\u3048\uff01\u3000(\u9045\u5ef6\u3068\u304b\u8af8\u3005)\nselect\u3068\u304brepeat\u3068\u304bcylce\u3068\u304bzip(2\u3064\u306e\u914d\u5217\u3092\u540c\u6642\u306b\u56de\u3057\u306a\u304c\u3089select\u3059\u308b\u64cd\u4f5c)\u3068\u304b\u5b9f\u88c5\u3059\u308b\u6642\u9593\u304c\u306a\u304b\u3063\u305f\u2026\u2026orz\u3002\nstd.range\u3068std.algorithm\u3092\u4f7f\u3063\u3066\u308b\u306e\u306f\u3001\u5143\u304b\u3089\u3042\u308bmap\u3084repoeat\u3084cycle\u3067\u3042\u308b\u7a0b\u5ea6\u306f\u4ee3\u7528\u51fa\u6765\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u306a\u3093\u3068\u304b\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u7279\u306bzip\u304c\u3042\u308c\u30701\u301c1000\u306e\u6570\u5b57\u914d\u5217(0.iota(1000)\u306e\u6240)\u304b\u3089n\u53cd\u7530\u30b3\u30ec\u30af\u30b7\u30e7\u30f3(0<n<=1000)\u3092\u4f5c\u6210\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u2026\u2026\n\u306a\u3093\u3067\u4ffazip\u5148\u306b\u5b9f\u88c5\u305b\u3093\u304b\u3063\u305f\u3093\u3084\u2026\u2026\n\n\u6b21\u56de\u4e88\u544a\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001Range\u3068LINQ\u306b\u95a2\u3059\u308b\u8aac\u660e\u3068\u3001LINQ to Range\u306e\u8aac\u660e\u3092\u3057\u307e\u3057\u305f\u3002\nLINQ to Range\u3060\u3051\u3067\u306a\u304f\u3001D\u8a00\u8a9e\u3067JSON\u3084XML\u306b\u5bfe\u3057\u3066\u3082LINQ\u51fa\u6765\u305f\u308a\u3059\u308b\u3068\u3088\u308a\u9762\u767d\u3044\u3067\u3059\u306d\u3002\n\u6b21\u56de\u306e22\u65e5\u76ee\u306f@mono_shoo\u3055\u3093\u3067\u3059\u3002\u4e00\u8db3\u65e9\u3044\u3067\u3059\u304c\u8a95\u751f\u65e5\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n[D\u8a00\u8a9e Advent Calendar 2012](http://qiita.com/advent-calendar/2012/d)\u306e21\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\nD\u8a00\u8a9e\u306eRange\u306e\u4e8b\u3092\u8efd\u304f\u3068\u3001D\u8a00\u8a9e\u3067LINQ\u3092\u3069\u3046\u5b9f\u73fe\u3059\u308b\u304b\u3068\u3044\u3046\u304a\u8a71\u3092\u3057\u307e\u3059\u3002\n\n\n##Range\u3063\u3066\uff1f\n\nRange\u3068\u3044\u3046\u306e\u306fD\u8a00\u8a9e\u3067\u6271\u308f\u308c\u308b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u3053\u3068\u3002\n\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u4f8b\u3068\u3057\u3066\u306f\u3001List\u3068\u304bMap\u3068\u304bQueue\u3068\u304b\u3042\u308a\u307e\u3059\u3002\n\nD\u8a00\u8a9e\u306e\u5834\u5408\u3001\u30af\u30e9\u30b9\u3084\u69cb\u9020\u4f53\u306b\u7279\u5b9a\u306e\u30e1\u30bd\u30c3\u30c9\u30fb\u30e1\u30f3\u30d0\u3092\u5b9f\u88c5\u3059\u308c\u3070OK\u3067\u3059\u3002\nRange\u306b\u306f\u5e7e\u3064\u304b\u306e\u7a2e\u985e\u304c\u3042\u3063\u3066\u3001\u4e0b\u306e\u8868\u306e\u901a\u308a\u3067\u3059\u3002\n\n| Range\u306e\u7a2e\u985e | \u8aac\u660e |\n|:-----------|:------------|\n|InputRange|empty\u3001front\u3001popFront\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b|\n|OutputRange|put\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b|\n|ForwardRange|InputRange+save\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b|\n|BidirectionalRange|ForwardRange+back\u3001popBack\u304c\u5b9f\u88c5\u3055\u308c\u3066\u308b|\n|RandomAccessRange|BidirectionalRange+length\u3001opIndex\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b|\n\n\u6700\u4f4e\u3067\u3082InputRange\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308c\u3070foreach\u3067\u56de\u3059\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001std.range\u3092include\u3059\u308c\u3070isXXXXRange\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5404\u7a2eRange\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u308b\u304b\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5224\u5225\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u4ed6\u306b\u3082\u8272\u3005\u5224\u5225\u51fa\u6765\u3066\u3001isInfinit\u3067\u7121\u9650\u30ea\u30b9\u30c8\u304b\u3069\u3046\u304b\u3068\u304b\u3001hasSlicing\u3067\u30b9\u30e9\u30a4\u30b7\u30f3\u30b0\uff08range[3..5]\u307f\u305f\u3044\u306a\u306e)\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u304b\u5224\u5225\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u3001\u5168\u90e8\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\uff01\n\n##LINQ\u3063\u3066\uff1f\n\nLINQ\u3063\u3066\u3044\u3046\u306e\u306fLanguage INtegrated Query(\u7d71\u5408\u8a00\u8a9e\u30af\u30a8\u30ea)\u306e\u7565\u3067\u3059\u3002\n.NET Framework3.5\u304b\u3089\u63d0\u4f9b\u3055\u308c\u305f\u6a5f\u80fd\u306e\u4e8b\u3067\u3001C#\u3084Visual Basic\u3067\u8272\u3093\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u5bfe\u3057\u3066\u540c\u3058\u30af\u30a8\u30ea\u3067\u30c7\u30fc\u30bf\u306e\u64cd\u4f5c\u3092\u53ef\u80fd\u306b\u3057\u3088\u3046\u3063\u3066\u3044\u3046\u5974\u3067\u3059\u3002\n\n\u6271\u3046\u30c7\u30fc\u30bf\u3082\u3001IEnumerable\u30fbIEnumerable\\<T\\>\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6271\u3046LINQ to Objects\u3001XML\u3092\u6271\u3046LINQ to XML\u3001RDB\u3092\u6271\u3046LINQ to SQL\u3084LINQ to Entities\u7b49\u3005\u8272\u3005\u3042\u308a\u307e\u3059\u3002\n\u5909\u308f\u308a\u7a2e\u3068\u3057\u3066\u975e\u540c\u671f\u3084\u30a4\u30d9\u30f3\u30c8\u306e\u64cd\u4f5c\u3092\u884c\u3046Reactive Extensions\u306a\u3093\u3066\u306a\u3093\u3066\u3082\u306e\u3082\u3042\u3063\u305f\u308a\u3002\nLINQ\u3063\u3066O/R\u30de\u30c3\u30d1\u30fc\u306a\u306e\u3067\u306f\u3001\u3068\u304b\u8a00\u308f\u308c\u308b\u306e\u3067\u3059\u304cO/R\u30de\u30c3\u30d1\u30fc\u306a\u306f\u3042\u304f\u307e\u3067LINQ\u306e\u307b\u3093\u306e\u4e00\u90e8\u306a\u306e\u3067\u3059\u3002\n\n\u3067\u306f\u3001\u305d\u306eLINQ\u306e\u7279\u5fb4\u3092\u4ee5\u4e0b\u306b\u8efd\u304f\u3002\n\n###2\u3064\u306e\u8a18\u8ff0\u65b9\u6cd5\nLINQ\u306b\u306f\u30af\u30a8\u30ea\u8a18\u6cd5\u3068\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30a4\u30f3\u8a18\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b1\u301c100\u306e\u4e2d\u304b\u3089\u5076\u6570\u306e\u6570\u5b57\u306e\u4e8c\u4e57\u306e\u5024\u3092\u53d6\u308a\u51fa\u3059\u64cd\u4f5c\u30922\u3064\u306e\u8a18\u6cd5\u3067\u66f8\u304d\u307e\u3059\u3002\n\n```cs:LINQ\u306e\u8a18\u6cd5\n// \u30af\u30a8\u30ea\u8a18\u6cd5\nvar query = from x in Enumerable.Range(1, 100)\n            where x % 2 == 0\n            select x * x;\n\n// \u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30a4\u30f3\u8a18\u6cd5\nvar methodChain = Enumerable.Range(1, 100).Where(x => x % 2 == 0).Select(x => x * x);\n```\n\n###\u7d71\u4e00\u7684\u306a\u64cd\u4f5c\nLINQ to Objects\u3084LINQ to XML\u3001LINQ to SQL\u3084LINQ to Entities\u7b49\u306a\u3069\u3001\u6271\u3046\u30c7\u30fc\u30bf\u306e\u7a2e\u985e\u306f\u8272\u3005\u3042\u308a\u307e\u3059\u3002\n\n\u3060\u3051\u3069\u3001Where\u3060\u3068\u8a18\u8f09\u3057\u305f\u6761\u4ef6\u306e\u3082\u306e\u3060\u3051\u53d6\u308a\u51fa\u3059\u3057\u3001Select\u3060\u3068\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u8981\u7d20\u304b\u3089\u597d\u304d\u306a\u5f62\u5f0f\u306b\u6574\u5f62\u3057\u3066\u51fa\u529b\u3059\u308b\u3057\u3001Count\u3060\u3068\u8981\u7d20\u306e\u6570\u3092\u6570\u3048\u308b\u3057\u3001OrderBy\u306a\u3089\u30bd\u30fc\u30c8\u3059\u308b\u3057\u3001GroupBy\u306a\u3089\u7279\u5b9a\u306e\u8981\u7d20\u3067\u30b0\u30eb\u30fc\u30d7\u5206\u3051\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u6271\u3046\u30c7\u30fc\u30bf\u304c\u5909\u308f\u308c\u3069\u3001LINQ\u3067\u76ee\u7684\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u3084\u308a\u65b9\u304c\u7d71\u4e00\u3055\u308c\u308b\u3053\u3068\u3067\u3001\u899a\u3048\u308b\u3053\u3068\u304c\u5c11\u306a\u304f\u3066\u6e08\u3080\u3057\u3001\u3044\u3061\u3044\u3061\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u8abf\u3079\u306a\u304f\u3066\u3088\u304f\u306a\u308a\u307e\u3059\u3002\n\n###\u9045\u5ef6\u8a55\u4fa1\nLINQ\u306f\u3001LINQ\u3067\u8a18\u8f09\u3057\u305f\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u305d\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u306a\u3044\u9650\u308a\u30c7\u30fc\u30bf\u3078\u306e\u64cd\u4f5c\u3092\u884c\u308f\u306a\u3044\u69d8\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e\u8a18\u8f09\u4f8b\u3060\u3068\u3001query\u3084methodChain\u306e\u7b87\u6240\u3067\u306f\u307e\u3060\u5076\u6570\u306e\u5224\u5225\u3084x\u306e\u4e8c\u4e57\u8a08\u7b97\u306f\u884c\u308f\u308c\u3066\u307e\u305b\u3093\u3002\nquery\u3084methodChain\u306e\u6700\u521d\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3001 foreach\u3067\u5404\u8981\u7d20\u3092\u53d6\u5f97\u3057\u305f\u308a\u3057\u305f\u6642\u306b\u3001\u521d\u3081\u3066\u5224\u5225\u3084\u8a08\u7b97\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n##Range\u3067LINQ\u3057\u3088\u3046\uff01\n\u5148\u307b\u3069\u6319\u3052\u305f\u901a\u308a\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u95a2\u3057\u3066\u306fRange\u304c\u3042\u308a\u307e\u3059\u3002\n\u30af\u30a8\u30ea\u8a18\u6cd5\u306f\u6d41\u77f3\u306b\u30b3\u30f3\u30d1\u30a4\u30e9\u81ea\u4f53\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u3044\u308b\u306e\u3067\u7121\u7406\u3067\u3059\u304c\u3001\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30a4\u30f3\u8a18\u6cd5\u306a\u3089\u30702.059\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305fUFCS\u3067\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u4ed6\u306b\u3082\u3001D\u8a00\u8a9e\u306b\u306f\u30e9\u30e0\u30c0\u5f0f\u304c\u3042\u3063\u305f\u308a\u3068\u5b9f\u88c5\u3057\u3084\u3059\u305d\u3046\u306a\u306e\u3067\u3001LINQ to Range\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u304b\u306a\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u3002\n\n\u3068\u3044\u3046\u304b\u3001JavaScript\u3067\u306eLINQ\u5b9f\u88c5\u3067\u3042\u308b[linq.js](http://linqjs.codeplex.com/)\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3068\u304b\u30b3\u30fc\u30c9\u898b\u306a\u304c\u3089D\u8a00\u8a9e\u306b\u843d\u3068\u3057\u8fbc\u3093\u3060\u611f\u3058\u3067\u3059\u3002\n\n\u4f8b\u3068\u3057\u3066where\u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306b\u3002\n\n```d:LINQ_to_Range\u306ewhere\ntemplate where(alias pred) if (is(typeof(unaryFun!pred)))\n{\n    auto where(Range)(Range r) if (isInputRange!(Unqual!Range))\n    {\n        return WhereRange!(unaryFun!pred, Range)(r);\n    }\n}\n\nprivate struct WhereRange(alias pred, Range)\n{\n    alias Unqual!Range R;\n    R _prevSource;\n    bool _isAccess;\n\n    // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    this(R r)\n    {\n        _prevSource = r;\n        _isAccess = false;\n    }\n\n\t// empty(\u7a7a\u304b\u3069\u3046\u304b)\u306e\u63d0\u4f9b\n    static if (isInfinite!Range)\n    {\n        enum bool empty = false;\n    }\n    else\n    {\n        @property bool empty() { return _prevSource.any!(pred); }\n    }\n\n\t// \u4e00\u756a\u6700\u521d\u306e\u8981\u7d20\u306b\u79fb\u52d5(1\u56de\u76ee\u3060\u3051)\n    private void popFirst()\n    {\n        if(!_isAccess)\n        {\n            while(!_prevSource.empty && !pred(_prevSource.front))\n            {\n                _prevSource.popFront();\n            }\n            _isAccess = true;\n        }\n    }\n\n\t// popFront(\u53d6\u308a\u51fa\u3059\u8981\u7d20\u3092\u524d\u306b\u4e00\u3064\u5148\u306b\u79fb\u52d5)\u306e\u63d0\u4f9b\n    void popFront()\n    {\n        this.popFirst();\n        do\n        {\n            _prevSource.popFront();\n        }while(!_prevSource.empty && !pred(_prevSource.front));\n    }\n\n\t// front(\u8981\u7d20\u306e\u53d6\u5f97)\u306e\u63d0\u4f9b\n    @property auto ref front()\n    {\n        this.popFirst();\n        return _prevSource.front;\n    }\n\n\t// where\u306e\u9023\u6253\u3092\u63d0\u4f9b\n    public auto where(alias newPred)()\n    if (is(typeof(unaryFun!newPred)))\n    {\n        return WhereRange!(delegate bool(typeof(_prevSource.front) x) { return unaryFun!newPred(x) && pred(x);}, Range)(_prevSource);   \n    }\n}\n```\nstd.algorithm\u3092\u898b\u305f\u308a\u3057\u306a\u304c\u3089\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\nstd.algorithm\u306efilter\u3068\u307b\u307c\u540c\u3058\u6a5f\u80fd\u306a\u306e\u3067\u3059\u304c\u3001\u3042\u3063\u3061\u306ffilter\u7528\u306e\u69cb\u9020\u4f53\u3092\u4f5c\u6210\u3059\u308b\u969b\u306bpred\u306e\u5224\u5b9a\u3068\u304b\u5b9f\u884c\u3059\u308b\u306e\u3067\u3001\u305d\u308c\u3082\u9045\u5ef6\u3055\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u3042\u3068\u3001WhereRange\u306bwhere\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u306e\u3092\u898b\u3066\u5206\u304b\u308b\u901a\u308a\u3001where\u306bwhere\u3092\u7e4b\u3052\u3066\u3082\u3001\u305d\u308c\u305e\u308c\u306epred\u306e\u8ad6\u7406\u7a4d\u306e\u5f0f\u304b\u3089WhereRange\u3092\u4f5c\u308b\u306e\u3067\u3001where\u3092\u4f55\u56de\u3082\u7e4b\u3052\u308b\u3001\u307f\u305f\u3044\u306a\u3088\u304f\u3084\u308b\u66f8\u304d\u65b9\u3092\u3057\u3066\u3082\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5f71\u97ff\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3082linq.js\u3084\u5143\u3005\u306eLINQ\u3067\u540c\u3058\u69d8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u306e\u4ed6\u306b\u3053\u3093\u306a\u306e\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n|\u5b9f\u88c5\u3057\u305f\u6a5f\u80fd| \u8aac\u660e |\n|:-----------|:------------|\n|any!(pred,Range)(Range r)|Range\u306b\u8981\u7d20\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u5224\u5b9a\u3059\u308b\u3002pred\u3092\u66f8\u3051\u3070\u305d\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u8981\u7d20\u304c\u3042\u308b\u304b\u5206\u304b\u308b\u3002|\n|count!(Range)(Range r)|Rnage\u306b\u3044\u304f\u3064\u8981\u7d20\u304c\u3042\u308b\u304b\u6570\u3048\u308b\u3002|\n|skip!(Range)(Range r, size_t count)|Range\u306e\u8981\u7d20\u306e\u982dcount\u500b\u3092\u98db\u3070\u3057\u305fRange\u3092\u53d6\u5f97\u3059\u308b\u3002|\n|chois!(Range)(Range r)|Range\u306e\u4e2d\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u3067\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3059\u3002|\n|selectMany!(pred, Range)(Range r)|Range\u306e\u5404\u8981\u7d20\u3092\u4e00\u3064\u306eRange\u306b\u5c04\u5f71\u3057\u3066\u5e73\u5766\u5316\u3059\u308b\u3002|\nselectMany\u306b\u3064\u3044\u3066\u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002[\u56f3\u89e3 SelectMany](http://nyaruru.hatenablog.com/entry/20080206/p2)\u304c\u56f3\u304c\u8f09\u3063\u3066\u3066\u5206\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u3001\u3053\u3061\u3089\u3092\u898b\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3044\u3044\u304b\u306a\u3068\u3002\n\nLINQ\u306b\u306f\u307e\u3060\u307e\u3060\u3044\u308d\u3093\u306a\u64cd\u4f5c\u304c\u3042\u3063\u3066\u3001[linq.js\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30da\u30fc\u30b8](http://neue.cc/reference.htm)\u306e\u3088\u3046\u306b\u8272\u3005\u3042\u308a\u307e\u3059\u3002\n.Net Framework\u5074\u306eLIQN to Objects\u306e\u4e00\u89a7\u306f\u300c[LINQ\u306e\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u4e00\u89a7\u3068\u3001\u307b\u307c\u5168\u90e8\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002(\u5730\u5e73\u7dda\u306b\u884c\u304f)](http://d.hatena.ne.jp/chiheisen/20111031/1320068429)\u300d\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\n##\u79c1\u3001\u6c17\u306b\u306a\u308a\u307e\u3059\uff01\n\n\u3067\u306f\u6700\u5f8c\u306b\u3001[\u5343\u53cd\u7530\u3048\u308b](https://twitter.com/artchanter/status/262869992377307136)\u3092\u4e0a\u8a18\u306eLINQ to Range\u3068std.range\u3068std.algorithm\u3092\u4f7f\u3063\u3066\u6c42\u3081\u3066\u307f\u307e\u3059\u3002\n\n```d:\u5343\u53cd\u7530\u3048\u308b\u3092\u6c42\u3081\u308b\nimport std.stdio;\nimport std.algorithm;\nimport std.range;\nimport linq;\t//LINQ to Range\u3092\u5b9f\u88c5\u3057\u3066\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\n\nvoid main()\n{\n    0.iota(1000).map!(n => (a => a[3].repeat.selectMany!\"a\".skip(n+1).front ~ a[2].repeat.selectMany!\"a\".skip(n+1).front ~ a[1].repeat.selectMany!\"a\".skip(n+1).front ~ a[0].repeat.selectMany!\"a\".skip(n+1).front ~ \"\u53cd\u7530\" ~ [\"\u3048\u30fc\",\"\u3073\u30fc\",\"\u3057\u30fc\",\"\u3067\u3043\u30fc\",\"\u3044\u30fc\",\"\u3048\u3075\",\"\u3058\u30fc\",\"\u3048\u3044\u3061\",\"\u3042\u3044\",\"\u3058\u3047\u30fc\",\"\u3051\u30fc\",\"\u3048\u308b\",\"\u3048\u3080\",\"\u3048\u306c\",\"\u304a\u30fc\",\"\u3074\u30fc\",\"\u304d\u3085\u30fc\",\"\u3042\u30fc\u308b\",\"\u3048\u3059\",\"\u3066\u3043\u30fc\",\"\u3086\u30fc\",\"\u3076\u3044\",\"\u3060\u3076\u308b\",\"\u3048\u3063\u304f\u3059\",\"\u308f\u3044\",\"\u305c\u3063\u3068\"].cycle.skip(n).front)([\"\", \"\u5341\", \"\u767e\",\"\u5343\"].map!(x => [\"\", \"\u4e00\", \"\u4e8c\", \"\u4e09\", \"\u56db\", \"\u4e94\", \"\u516d\", \"\u4e03\", \"\u516b\", \"\u4e5d\"].map!(y => ((x!=\"\" && y==\"\u4e00\")? \"\" : y) ~ ((x!=\"\" && y==\"\")? \"\" : x))).map!(x => x.map!(y => y.repeat.take(10 ^^ [\"\u4e00\", \"\u5341\", \"\u767e\",\"\u5343\"].countUntil(x.skip(1).front))).selectMany!(x => x)))).skip(1000-1).front.writeln; // \u5343\u53cd\u7530\u3048\u308b\n}\n```\n\n\u4e2d\u9014\u534a\u7aef\u6975\u307e\u308a\u306d\u3047\u3047\u3047\u3048\u3048\u3048\u3048\u3048\u3048\uff01\u3000(\u9045\u5ef6\u3068\u304b\u8af8\u3005)\nselect\u3068\u304brepeat\u3068\u304bcylce\u3068\u304bzip(2\u3064\u306e\u914d\u5217\u3092\u540c\u6642\u306b\u56de\u3057\u306a\u304c\u3089select\u3059\u308b\u64cd\u4f5c)\u3068\u304b\u5b9f\u88c5\u3059\u308b\u6642\u9593\u304c\u306a\u304b\u3063\u305f\u2026\u2026orz\u3002\nstd.range\u3068std.algorithm\u3092\u4f7f\u3063\u3066\u308b\u306e\u306f\u3001\u5143\u304b\u3089\u3042\u308bmap\u3084repoeat\u3084cycle\u3067\u3042\u308b\u7a0b\u5ea6\u306f\u4ee3\u7528\u51fa\u6765\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u306a\u3093\u3068\u304b\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u7279\u306bzip\u304c\u3042\u308c\u30701\u301c1000\u306e\u6570\u5b57\u914d\u5217(`0.iota(1000)`\u306e\u6240)\u304b\u3089n\u53cd\u7530\u30b3\u30ec\u30af\u30b7\u30e7\u30f3(0<n<=1000)\u3092\u4f5c\u6210\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u2026\u2026\n\u306a\u3093\u3067\u4ffazip\u5148\u306b\u5b9f\u88c5\u305b\u3093\u304b\u3063\u305f\u3093\u3084\u2026\u2026\n\n##\u6b21\u56de\u4e88\u544a\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001Range\u3068LINQ\u306b\u95a2\u3059\u308b\u8aac\u660e\u3068\u3001LINQ to Range\u306e\u8aac\u660e\u3092\u3057\u307e\u3057\u305f\u3002\nLINQ to Range\u3060\u3051\u3067\u306a\u304f\u3001D\u8a00\u8a9e\u3067JSON\u3084XML\u306b\u5bfe\u3057\u3066\u3082LINQ\u51fa\u6765\u305f\u308a\u3059\u308b\u3068\u3088\u308a\u9762\u767d\u3044\u3067\u3059\u306d\u3002\n\n\u6b21\u56de\u306e22\u65e5\u76ee\u306f[@mono_shoo](http://qiita.com/users/mono_shoo)\u3055\u3093\u3067\u3059\u3002\u4e00\u8db3\u65e9\u3044\u3067\u3059\u304c\u8a95\u751f\u65e5\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n", "tags": ["dlang", "Dlanguage", "LINQ"]}