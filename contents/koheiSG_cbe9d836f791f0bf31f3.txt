{"context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306f Ruby on Rails Advent Calendar 2015 - Qiita \u306e12\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\nvim\u3067rails\u3092\u66f8\u304f\u6bce\u65e5\u3092\u9001\u3063\u3066\u3044\u308bkoheisg\u3068\u7533\u3057\u307e\u3059\u3002\n\u4e00\u6628\u5e74\u307e\u3067phper\u3060\u3063\u305f\u81ea\u5206\u304c\u3001\u3053\u306e1\u5e74rails\u3092\u66f8\u3044\u3066\u8eab\u306b\u4ed8\u3051\u305f\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u306b\u3064\u3044\u3066\u3001\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nrspec\u30a2\u30c9\u30d9\u30f3\u30c9\u30ab\u30ec\u30f3\u30c0\u30fc\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u304c\u3001rspec\u3067rails\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3068\u304d\u306e\u5185\u5bb9\u306a\u306e\u3067\u3054\u5bb9\u8d66\u304f\u3060\u3055\u3044\u3002\n\n\u305d\u3082\u305d\u3082\u3001\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u3068\u306f\ntwitter\u3067twada\u3055\u3093\u304c\u4e0b\u8a18\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u545f\u3044\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u81ea\u5206\u306b\u306f\u3053\u306e\u9593\u5408\u3044\u3068\u3044\u3046\u8a00\u8449\u975e\u5e38\u306b\u3057\u3063\u304f\u308a\u304d\u307e\u3057\u305f\u3002\n\u6b66\u9053\u7d4c\u9a13\u306e\u3042\u308b\u81ea\u5206\u304b\u3089\u3059\u308b\u3068\u3001\u81ea\u5206\u306e\u9593\u5408\u3044\u3067\u76f8\u624b\u3068\u6226\u3046\u3068\u76f8\u624b\u306e\u52d5\u304d\u304c\u76f4\u611f\u7684\u306b\u8aad\u3081\u308b(\u898b\u3048\u308b)\u305f\u3081\u3001\u624b\u6570\u3092\u51fa\u3055\u305a\u306b\u76f8\u624b\u3092\u5c01\u3058\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u81ea\u5206\u306frails\u3067\u306e\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u304c\u898b\u3048\u3066\u304d\u305f\u304b\u3082\u3057\u308c\u306a\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u3057\u305f\u3002\n\u5178\u578b\u7684\u306arails\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u66f8\u304f\u5834\u5408\u306f\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5c11\u306a\u3081\u306b\u5b9f\u88c5\u3092TDD\u3067\u4ed5\u7559\u3081\u3089\u308c\u3066\u304d\u305f\u306e\u3067\u3059\u3002\n\u3067\u306f\u3001\u3069\u306e\u3088\u3046\u306b\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3057\u3066\u3044\u308b\u304b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\n\nRouting\u306e\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\n\u81ea\u5206\u304crails\u30a2\u30d7\u30ea\u3092\u66f8\u304f\u5834\u5408\u306f\u3001Routing\u306b\u5bfe\u3057\u3066\u306f\u307b\u3068\u3093\u3069\u30c6\u30b9\u30c8\u3092\u66f8\u304d\u307e\u305b\u3093\u3002\n\u305d\u3082\u305d\u3082rails\u306erouting\u306f\u3001REST\u306e\u601d\u60f3\u306b\u5247\u3063\u3066\u304a\u308a\u3001\nRails.application.routes.draw do\n  resources :posts\nend\n\n\u3068\u66f8\u304f\u3060\u3051\u3067\u3001\u4e0b\u8a18\u306erouting\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n$ rake routes\n   Prefix Verb   URI Pattern               Controller#Action\n    posts GET    /posts(.:format)          posts#index\n          POST   /posts(.:format)          posts#create\n new_post GET    /posts/new(.:format)      posts#new\nedit_post GET    /posts/:id/edit(.:format) posts#edit\n     post GET    /posts/:id(.:format)      posts#show\n          PATCH  /posts/:id(.:format)      posts#update\n          PUT    /posts/:id(.:format)      posts#update\n          DELETE /posts/:id(.:format)      posts#destroy\n\n\u3053\u3053\u3067\u306f posts \u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u3001\u69d8\u3005\u306a\u64cd\u4f5c\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3059\u3002\u3044\u308f\u3086\u308bCRUD\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u3067\u3042\u308c\u3070\u3001\u3053\u308c\u3067\u3082\u306e\u8db3\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u524a\u9664\u304c\u5fc5\u8981\u306a\u304b\u3063\u305f\u308a\u3001\u691c\u7d22\u304c\u5fc5\u8981\u3060\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u306f\u3088\u304f\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nRails.application.routes.draw do\n  resources \"posts\", except: [:destroy] do\n    collection do\n      get :search\n    end\n  end\nend\n\n\u3068\u66f8\u3051\u3070\u3001\u524a\u9664\u304c\u306a\u304f\u306a\u308a\u3001\u691c\u7d22\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002\n$ rake routes\n      Prefix Verb  URI Pattern               Controller#Action\nsearch_posts GET   /posts/search(.:format)   posts#search\n       posts GET   /posts(.:format)          posts#index\n             POST  /posts(.:format)          posts#create\n    new_post GET   /posts/new(.:format)      posts#new\n   edit_post GET   /posts/:id/edit(.:format) posts#edit\n        post GET   /posts/:id(.:format)      posts#show\n             PATCH /posts/:id(.:format)      posts#update\n             PUT   /posts/:id(.:format)      posts#update\n\n\u3053\u308c\u3089\u3092\u601d\u3063\u305f\u901a\u308a\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3057\u305f\u304f\u306a\u308a\u3001\u30c6\u30b9\u30c8\u3092\u66f8\u304d\u305f\u304f\u306a\u308b\u6c17\u6301\u3061\u306f\u308f\u304b\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u81ea\u5206\u306f\u3053\u3053\u3067\u306frouting\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u304b\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nfeature spec\u3067\u305d\u308c\u305e\u308c\u306eroutes\u306epash\u306b\u5bfe\u3057\u3066\u3001\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3044\u3001\nURL\u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u62c5\u4fdd\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n    describe 'GET /posts/new' do\n      before do\n        visit new_post_path\n      end\n\n      it { expect(current_url).to eq 'http://www.example.com/posts/new' }\n    end\n\n\u3082\u3057\u3001contoroller\u306brouting\u304c\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u5834\u5408\u306f\u3001 rails_best_practices \u306egem\u304c\u6012\u3063\u3066\u304f\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306a\u9759\u7684\u89e3\u6790\u3082\u7a4d\u6975\u7684\u306b\u53d6\u308a\u5165\u308c\u308b\u3068\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nrailsbp/rails_best_practices\n/rails_sample/config/routes.rb:2 - restrict auto-generated routes posts (except: [:show, :destroy])\n\n\u305f\u3060\u3057\u3001feature spec\u306f\u975e\u5e38\u306b\u91cd\u3044\u30c6\u30b9\u30c8\u306a\u306e\u3067\u3001url\u3092\u691c\u8a3c\u3059\u308b\u3060\u3051\u306e\u305f\u3081\u306b\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3068\u5b9f\u884c\u6642\u9593\u304c\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u554f\u984c\u3082\u3042\u308a\u307e\u3059\u3002\n\u5b9f\u884c\u6642\u9593\u306f\u3082\u3061\u308d\u3093\u77ed\u3044\u65b9\u304c\u826f\u3044\u3067\u3059\u304c\u3001\u81ea\u5206\u306f\u5b9f\u88c5\u4e2d\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u5c11\u306a\u3055\u306b\u306f\u512a\u3089\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3089\u306e\u30b3\u30fc\u30c9\u306f\u5f8c\u304b\u3089routing\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3001\u5b9f\u884c\u6642\u9593\u3092\u77ed\u304f\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u826f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002(\u3042\u304f\u307e\u3067\u81ea\u5206\u6d41\u3068\u3044\u3046\u3053\u3068\u3067\n\nController\u306e\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\nController\u306b\u3064\u3044\u3066\u3082\u3001Routing\u540c\u69d8\u306b\u307b\u3068\u3093\u3069\u30c6\u30b9\u30c8\u3092\u3057\u306a\u3044\u3088\u3046\u306b\u8a2d\u8a08\u3092\u5fc3\u304c\u3051\u3066\u3044\u307e\u3059\u3002\nController\u306e\u5b9f\u88c5\u3092\u539a\u304f\u3057\u306a\u3044\u3068\u3044\u3046\u8a71\u306f\u4e00\u5ea6\u306f\u8ab0\u3082\u805e\u3044\u305f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u79c1\u3082\u305d\u308c\u3092\u53ef\u80fd\u306a\u9650\u308a\u5b9f\u8df5\u3057\u3066\u3044\u3066\u3001Controller\u5185\u306f\u5206\u5c90\u306e\u6570\u3092\u6975\u9650\u307e\u3067\u5c11\u306a\u304f\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3046\u3059\u308b\u3053\u3068\u3067\u3001controller\u306e\u30c6\u30b9\u30c8\u3092\u3001 feature spec \u306b\u79fb\u8b72\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nrequest spec\u306e\u9593\u5408\u3044\u306f\u96e3\u3057\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001DOM\u69cb\u9020\u307e\u3067\u30c6\u30b9\u30c8\u3057\u305f\u308a\u306f\u3057\u306a\u3044\u3088\u3046\u306b\u3001view\u306e\u8868\u793a\u304c\u5206\u5c90\u306b\u3088\u3063\u3066\u5909\u308f\u308b\u90e8\u5206\u306e\u307f\u3084response\u30b3\u30fc\u30c9\u306a\u3069\u3092\u4ed5\u69d8\u306b\u3088\u3063\u3066\u5927\u96d1\u628a\u306b\u66f8\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nView\u306e\u7d30\u304b\u3044\u30ed\u30b8\u30c3\u30af\u306fhelper\u304bdecorator\u306b\u5207\u308a\u51fa\u3059\nfeature spec\u3092\u8584\u304f\u3059\u308b\u306e\u306b\u3001View\u306e\u7d30\u304b\u3044\u30ed\u30b8\u30c3\u30af\u3092\u898b\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u304c\u8a00\u3048\u307e\u3059\u3002\n\u81ea\u5206\u306f\u3001View\u304c\u5fae\u5999\u306b\u5206\u5c90\u3059\u308b\u5834\u5408\u306fhelper/decorator\u306b\u5207\u308a\u51fa\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nhelper\u306frails\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6a5f\u80fd\u306a\u306e\u3067\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nhelper\u3060\u3068model\u306e\u72b6\u614b\u306b\u7d50\u3073\u3064\u3044\u305f\u51e6\u7406\u304c\u5358\u4f53\u30c6\u30b9\u30c8\u3057\u305a\u3089\u3044\u3067\u3059\u3088\u306d\u3002\n\u305d\u3046\u3044\u3046\u5834\u5408\u306bdecorator\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\ndrapergem/draper\n\nModel\u306e\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\n\nvalidation\u306e\u30c6\u30b9\u30c8\nvalidate\u306e\u30c6\u30b9\u30c8\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b describe \u201c#validate\u201d \u306e\u4e2d\u306b\u66f8\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nlet\u306bmodel\u306e\u5f15\u6570\u306b\u6e21\u3057\u305f\u3044\u3082\u306e\u3092\u5b9a\u7fa9\u3057\u3066\u3001context\u306e\u4e2d\u3067\u9045\u5ef6\u7684\u306blet\u3057\u306a\u304a\u3057\u307e\u3059\u3002\ndescribe '#validate' do\n  subject { Post.new params }\n  context '\u5168\u3066\u306e\u30c7\u30fc\u30bf\u304c\u6b63\u3057\u3044\u3068\u304d' do\n    let(:params) { body: \"iiyon\" }\n    it { should be_valid }\n  end\n  context '\u6b63\u3057\u304f\u306a\u3044\u5834\u5408' do\n    let(:params) { body: \"dame\" }\n    it { should_not be_valid }\n  end\nend\n\n\u3044\u3064\u3082\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3001params\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u5fae\u5999\u306b\u5909\u66f4\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nscope\u306e\u30c6\u30b9\u30c8\n\u57fa\u672c\u7684\u306bscope\u306e\u30c6\u30b9\u30c8\u306f\u3042\u307e\u308a\u66f8\u304d\u307e\u305b\u3093\u3002\u8907\u96d1\u306a\u6761\u4ef6\u3092\u4f7f\u308f\u306a\u3044\u3068\u66f8\u3051\u306a\u3044\u3088\u3046\u306a\u3082\u306e\u3082\u306e\u3060\u3051\u66f8\u304d\u307e\u3059\u3002\n\u3057\u304b\u3057\u306a\u304c\u3089\u3001scope\u304c\u8907\u96d1\u306b\u306a\u3063\u3066\u3044\u308b\u6642\u70b9\u3067\u5206\u5272\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nscope :hoge, -> {\n  where(created_at: begining_of_day...end_of_day, state: \"active\")\n}\n\nscope :today, -> {\n  where(created_at: begining_of_day...end_of_day)\n}\nscope :active, -> {\n  where(state: \"active\")\n}\n\ndef self.example\n  active.today.try(:first)\nend\n\n\u3053\u306e\u3088\u3046\u306b\u306a\u308b\u3079\u304f\u5c0f\u3055\u304fscope\u3092\u5206\u5272\u3057\u3066\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u53d6\u308a\u51fa\u3059\u3082\u306e\u306f\u3001\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u5316\u3057\u3001\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3060\u3051\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u591a\u3044\u3067\u3059\u3002\n\n\u307e\u3068\u3081\n\u3053\u306e\u3088\u3046\u306b\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u3092\u898b\u6975\u3081\u3001\u5c11\u306a\u3044\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u632f\u308b\u821e\u3044\u3092\u62c5\u4fdd\u3067\u304d\u308b\u8a2d\u8a08\u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u3067\u3001\u6765\u5e74\u3082\u5909\u66f4\u306b\u5f37\u3044\u30a2\u30d7\u30ea\u3092\u30b4\u30ea\u30b4\u30ea\u4f5c\u3063\u3066\u3044\u304d\u305f\u3044\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u306f [Ruby on Rails Advent Calendar 2015 - Qiita](http://qiita.com/advent-calendar/2015/rails) \u306e12\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\nvim\u3067rails\u3092\u66f8\u304f\u6bce\u65e5\u3092\u9001\u3063\u3066\u3044\u308bkoheisg\u3068\u7533\u3057\u307e\u3059\u3002\n\n\u4e00\u6628\u5e74\u307e\u3067phper\u3060\u3063\u305f\u81ea\u5206\u304c\u3001\u3053\u306e1\u5e74rails\u3092\u66f8\u3044\u3066\u8eab\u306b\u4ed8\u3051\u305f\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u306b\u3064\u3044\u3066\u3001\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nrspec\u30a2\u30c9\u30d9\u30f3\u30c9\u30ab\u30ec\u30f3\u30c0\u30fc\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u304c\u3001rspec\u3067rails\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3068\u304d\u306e\u5185\u5bb9\u306a\u306e\u3067\u3054\u5bb9\u8d66\u304f\u3060\u3055\u3044\u3002\n\n## \u305d\u3082\u305d\u3082\u3001\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u3068\u306f\n\ntwitter\u3067twada\u3055\u3093\u304c\u4e0b\u8a18\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u545f\u3044\u3066\u3044\u307e\u3057\u305f\u3002\n\n<blockquote class=\"twitter-tweet\" lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">\u4eca\u65e5\u306f\u307e\u3060\u30c6\u30b9\u30c8\u99c6\u52d5\u958b\u767a\u306b\u3064\u3044\u3066\u3088\u304f\u77e5\u3089\u306a\u3044\u4eba\u3084\u3001\u5c11\u3057\u77e5\u3063\u3066\u3044\u308b\u4eba\u3001\u3082\u3046\u9593\u5408\u3044\u3092\u898b\u5b9a\u3081\u305f\u4eba\u3001\u69d8\u3005\u306a\u4eba\u306e\u524d\u3067 TDD \u306b\u3064\u3044\u3066\u6539\u3081\u3066\u8a71\u3057\u307e\u3057\u305f\u3002\u304a\u805e\u304d\u304f\u3060\u3055\u3063\u305f\u7686\u69d8\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\u8b1b\u6f14\u5f8c\u3082\u305f\u304f\u3055\u3093\u8b70\u8ad6\u3067\u304d\u3066\u3088\u304b\u3063\u305f\u3067\u3059\u3002</p>&mdash; Takuto Wada (@t_wada) <a href=\"https://twitter.com/t_wada/status/659004550481756161\">2015, 10\u6708 27</a></blockquote> <script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n\u81ea\u5206\u306b\u306f\u3053\u306e`\u9593\u5408\u3044`\u3068\u3044\u3046\u8a00\u8449\u975e\u5e38\u306b\u3057\u3063\u304f\u308a\u304d\u307e\u3057\u305f\u3002\n\u6b66\u9053\u7d4c\u9a13\u306e\u3042\u308b\u81ea\u5206\u304b\u3089\u3059\u308b\u3068\u3001\u81ea\u5206\u306e\u9593\u5408\u3044\u3067\u76f8\u624b\u3068\u6226\u3046\u3068\u76f8\u624b\u306e\u52d5\u304d\u304c\u76f4\u611f\u7684\u306b\u8aad\u3081\u308b(\u898b\u3048\u308b)\u305f\u3081\u3001\u624b\u6570\u3092\u51fa\u3055\u305a\u306b\u76f8\u624b\u3092\u5c01\u3058\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u81ea\u5206\u306frails\u3067\u306e\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u304c\u898b\u3048\u3066\u304d\u305f\u304b\u3082\u3057\u308c\u306a\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u3057\u305f\u3002\n\u5178\u578b\u7684\u306arails\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u66f8\u304f\u5834\u5408\u306f\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5c11\u306a\u3081\u306b\u5b9f\u88c5\u3092TDD\u3067\u4ed5\u7559\u3081\u3089\u308c\u3066\u304d\u305f\u306e\u3067\u3059\u3002\n\n\u3067\u306f\u3001\u3069\u306e\u3088\u3046\u306b\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3057\u3066\u3044\u308b\u304b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n## \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\n\n### Routing\u306e\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\n\n\u81ea\u5206\u304crails\u30a2\u30d7\u30ea\u3092\u66f8\u304f\u5834\u5408\u306f\u3001Routing\u306b\u5bfe\u3057\u3066\u306f\u307b\u3068\u3093\u3069\u30c6\u30b9\u30c8\u3092\u66f8\u304d\u307e\u305b\u3093\u3002\n\n\n\u305d\u3082\u305d\u3082rails\u306erouting\u306f\u3001REST\u306e\u601d\u60f3\u306b\u5247\u3063\u3066\u304a\u308a\u3001\n\n```rb\nRails.application.routes.draw do\n  resources :posts\nend\n```\n\n\u3068\u66f8\u304f\u3060\u3051\u3067\u3001\u4e0b\u8a18\u306erouting\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n```\n$ rake routes\n   Prefix Verb   URI Pattern               Controller#Action\n    posts GET    /posts(.:format)          posts#index\n          POST   /posts(.:format)          posts#create\n new_post GET    /posts/new(.:format)      posts#new\nedit_post GET    /posts/:id/edit(.:format) posts#edit\n     post GET    /posts/:id(.:format)      posts#show\n          PATCH  /posts/:id(.:format)      posts#update\n          PUT    /posts/:id(.:format)      posts#update\n          DELETE /posts/:id(.:format)      posts#destroy\n```\n\n\u3053\u3053\u3067\u306f `posts` \u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u3001\u69d8\u3005\u306a\u64cd\u4f5c\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3059\u3002\u3044\u308f\u3086\u308b`CRUD`\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u3067\u3042\u308c\u3070\u3001\u3053\u308c\u3067\u3082\u306e\u8db3\u308a\u307e\u3059\u3002\n\n\u3057\u304b\u3057\u3001\u524a\u9664\u304c\u5fc5\u8981\u306a\u304b\u3063\u305f\u308a\u3001\u691c\u7d22\u304c\u5fc5\u8981\u3060\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u306f\u3088\u304f\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```rb\nRails.application.routes.draw do\n  resources \"posts\", except: [:destroy] do\n    collection do\n      get :search\n    end\n  end\nend\n```\n\n\u3068\u66f8\u3051\u3070\u3001\u524a\u9664\u304c\u306a\u304f\u306a\u308a\u3001\u691c\u7d22\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002\n\n```\n$ rake routes\n      Prefix Verb  URI Pattern               Controller#Action\nsearch_posts GET   /posts/search(.:format)   posts#search\n       posts GET   /posts(.:format)          posts#index\n             POST  /posts(.:format)          posts#create\n    new_post GET   /posts/new(.:format)      posts#new\n   edit_post GET   /posts/:id/edit(.:format) posts#edit\n        post GET   /posts/:id(.:format)      posts#show\n             PATCH /posts/:id(.:format)      posts#update\n             PUT   /posts/:id(.:format)      posts#update\n```\n\n\u3053\u308c\u3089\u3092\u601d\u3063\u305f\u901a\u308a\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3057\u305f\u304f\u306a\u308a\u3001\u30c6\u30b9\u30c8\u3092\u66f8\u304d\u305f\u304f\u306a\u308b\u6c17\u6301\u3061\u306f\u308f\u304b\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u81ea\u5206\u306f\u3053\u3053\u3067\u306frouting\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u304b\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nfeature spec\u3067\u305d\u308c\u305e\u308c\u306eroutes\u306epash\u306b\u5bfe\u3057\u3066\u3001\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3044\u3001\nURL\u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u62c5\u4fdd\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n```rb\n    describe 'GET /posts/new' do\n      before do\n        visit new_post_path\n      end\n\n      it { expect(current_url).to eq 'http://www.example.com/posts/new' }\n    end\n```\n\n\u3082\u3057\u3001contoroller\u306brouting\u304c\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u5834\u5408\u306f\u3001 `rails_best_practices` \u306egem\u304c\u6012\u3063\u3066\u304f\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306a\u9759\u7684\u89e3\u6790\u3082\u7a4d\u6975\u7684\u306b\u53d6\u308a\u5165\u308c\u308b\u3068\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n[railsbp/rails_best_practices](https://github.com/railsbp/rails_best_practices)\n\n```\n/rails_sample/config/routes.rb:2 - restrict auto-generated routes posts (except: [:show, :destroy])\n```\n\n\u305f\u3060\u3057\u3001feature spec\u306f\u975e\u5e38\u306b\u91cd\u3044\u30c6\u30b9\u30c8\u306a\u306e\u3067\u3001url\u3092\u691c\u8a3c\u3059\u308b\u3060\u3051\u306e\u305f\u3081\u306b\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3068\u5b9f\u884c\u6642\u9593\u304c\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u554f\u984c\u3082\u3042\u308a\u307e\u3059\u3002\n\u5b9f\u884c\u6642\u9593\u306f\u3082\u3061\u308d\u3093\u77ed\u3044\u65b9\u304c\u826f\u3044\u3067\u3059\u304c\u3001\u81ea\u5206\u306f\u5b9f\u88c5\u4e2d\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u5c11\u306a\u3055\u306b\u306f\u512a\u3089\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3089\u306e\u30b3\u30fc\u30c9\u306f\u5f8c\u304b\u3089routing\u306e\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3001\u5b9f\u884c\u6642\u9593\u3092\u77ed\u304f\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u826f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002(\u3042\u304f\u307e\u3067\u81ea\u5206\u6d41\u3068\u3044\u3046\u3053\u3068\u3067\n\n### Controller\u306e\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\n\nController\u306b\u3064\u3044\u3066\u3082\u3001Routing\u540c\u69d8\u306b\u307b\u3068\u3093\u3069\u30c6\u30b9\u30c8\u3092\u3057\u306a\u3044\u3088\u3046\u306b\u8a2d\u8a08\u3092\u5fc3\u304c\u3051\u3066\u3044\u307e\u3059\u3002\n\nController\u306e\u5b9f\u88c5\u3092\u539a\u304f\u3057\u306a\u3044\u3068\u3044\u3046\u8a71\u306f\u4e00\u5ea6\u306f\u8ab0\u3082\u805e\u3044\u305f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u79c1\u3082\u305d\u308c\u3092\u53ef\u80fd\u306a\u9650\u308a\u5b9f\u8df5\u3057\u3066\u3044\u3066\u3001Controller\u5185\u306f\u5206\u5c90\u306e\u6570\u3092\u6975\u9650\u307e\u3067\u5c11\u306a\u304f\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u3046\u3059\u308b\u3053\u3068\u3067\u3001controller\u306e\u30c6\u30b9\u30c8\u3092\u3001 `feature spec` \u306b\u79fb\u8b72\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nrequest spec\u306e\u9593\u5408\u3044\u306f\u96e3\u3057\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001DOM\u69cb\u9020\u307e\u3067\u30c6\u30b9\u30c8\u3057\u305f\u308a\u306f\u3057\u306a\u3044\u3088\u3046\u306b\u3001view\u306e\u8868\u793a\u304c\u5206\u5c90\u306b\u3088\u3063\u3066\u5909\u308f\u308b\u90e8\u5206\u306e\u307f\u3084response\u30b3\u30fc\u30c9\u306a\u3069\u3092\u4ed5\u69d8\u306b\u3088\u3063\u3066\u5927\u96d1\u628a\u306b\u66f8\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n#### View\u306e\u7d30\u304b\u3044\u30ed\u30b8\u30c3\u30af\u306fhelper\u304bdecorator\u306b\u5207\u308a\u51fa\u3059\n\nfeature spec\u3092\u8584\u304f\u3059\u308b\u306e\u306b\u3001View\u306e\u7d30\u304b\u3044\u30ed\u30b8\u30c3\u30af\u3092\u898b\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u304c\u8a00\u3048\u307e\u3059\u3002\n\u81ea\u5206\u306f\u3001View\u304c\u5fae\u5999\u306b\u5206\u5c90\u3059\u308b\u5834\u5408\u306fhelper/decorator\u306b\u5207\u308a\u51fa\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nhelper\u306frails\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6a5f\u80fd\u306a\u306e\u3067\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nhelper\u3060\u3068model\u306e\u72b6\u614b\u306b\u7d50\u3073\u3064\u3044\u305f\u51e6\u7406\u304c\u5358\u4f53\u30c6\u30b9\u30c8\u3057\u305a\u3089\u3044\u3067\u3059\u3088\u306d\u3002\n\u305d\u3046\u3044\u3046\u5834\u5408\u306bdecorator\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n[drapergem/draper](https://github.com/drapergem/draper)\n\n### Model\u306e\u30c6\u30b9\u30c8\u3092\u5c11\u306a\u304f\u3059\u308b\u6280\u8853\n\n#### validation\u306e\u30c6\u30b9\u30c8\n\nvalidate\u306e\u30c6\u30b9\u30c8\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b describe \u201c#validate\u201d \u306e\u4e2d\u306b\u66f8\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nlet\u306bmodel\u306e\u5f15\u6570\u306b\u6e21\u3057\u305f\u3044\u3082\u306e\u3092\u5b9a\u7fa9\u3057\u3066\u3001context\u306e\u4e2d\u3067\u9045\u5ef6\u7684\u306blet\u3057\u306a\u304a\u3057\u307e\u3059\u3002\n\n```rb\ndescribe '#validate' do\n  subject { Post.new params }\n  context '\u5168\u3066\u306e\u30c7\u30fc\u30bf\u304c\u6b63\u3057\u3044\u3068\u304d' do\n    let(:params) { body: \"iiyon\" }\n    it { should be_valid }\n  end\n  context '\u6b63\u3057\u304f\u306a\u3044\u5834\u5408' do\n    let(:params) { body: \"dame\" }\n    it { should_not be_valid }\n  end\nend\n```\n\n\u3044\u3064\u3082\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u3001params\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u5fae\u5999\u306b\u5909\u66f4\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n#### scope\u306e\u30c6\u30b9\u30c8\n\n\u57fa\u672c\u7684\u306bscope\u306e\u30c6\u30b9\u30c8\u306f\u3042\u307e\u308a\u66f8\u304d\u307e\u305b\u3093\u3002\u8907\u96d1\u306a\u6761\u4ef6\u3092\u4f7f\u308f\u306a\u3044\u3068\u66f8\u3051\u306a\u3044\u3088\u3046\u306a\u3082\u306e\u3082\u306e\u3060\u3051\u66f8\u304d\u307e\u3059\u3002\n\u3057\u304b\u3057\u306a\u304c\u3089\u3001scope\u304c\u8907\u96d1\u306b\u306a\u3063\u3066\u3044\u308b\u6642\u70b9\u3067\u5206\u5272\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```rb\nscope :hoge, -> {\n  where(created_at: begining_of_day...end_of_day, state: \"active\")\n}\n```\n\n```rb\nscope :today, -> {\n  where(created_at: begining_of_day...end_of_day)\n}\nscope :active, -> {\n  where(state: \"active\")\n}\n\ndef self.example\n  active.today.try(:first)\nend\n```\n\n\u3053\u306e\u3088\u3046\u306b\u306a\u308b\u3079\u304f\u5c0f\u3055\u304fscope\u3092\u5206\u5272\u3057\u3066\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u53d6\u308a\u51fa\u3059\u3082\u306e\u306f\u3001\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u5316\u3057\u3001\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3060\u3051\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u591a\u3044\u3067\u3059\u3002\n\n\n\n\n## \u307e\u3068\u3081\n\n\u3053\u306e\u3088\u3046\u306b\u30c6\u30b9\u30c8\u306e\u9593\u5408\u3044\u3092\u898b\u6975\u3081\u3001\u5c11\u306a\u3044\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u632f\u308b\u821e\u3044\u3092\u62c5\u4fdd\u3067\u304d\u308b\u8a2d\u8a08\u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u3067\u3001\u6765\u5e74\u3082\u5909\u66f4\u306b\u5f37\u3044\u30a2\u30d7\u30ea\u3092\u30b4\u30ea\u30b4\u30ea\u4f5c\u3063\u3066\u3044\u304d\u305f\u3044\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Rails", "RSpec", "TDD"]}