{"tags": ["SORACOM", "IoT"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\u6625\u306eIoT\u30ea\u30ec\u30fc\u30cf\u30f3\u30ba\u30aa\u30f3@\u95a2\u897f\u306e\u4e00\u74b0\u3068\u3057\u3066\u958b\u50ac\u3055\u308c\u308b\uff1cSORACOM\u63a5\u7d9a + MQTT\u7de8>\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u7528\u8cc7\u6599\u3067\u3059\u3002\n\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f\u3001Raspbian\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fRaspberry Pi\uff08\u4ee5\u964d\u3001\u30e9\u30ba\u30d1\u30a4\uff09\u3067SORACOM\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u57fa\u672c\u90e8\u5206\u3092\u3072\u3068\u3068\u304a\u308a\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u30018\u30b9\u30c6\u30c3\u30d7\u3042\u308b\u30cf\u30f3\u30ba\u30aa\u30f3\u624b\u9806\u306e\u3046\u3061\u3001\u5f8c\u534a\u3068\u306a\u308bStep 6 \uff5e Step 8\u3092\u63b2\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n\u524d\u534a\u306eStep 1 \uff5e Step 5\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n\n[Step 6.] \u30e9\u30ba\u30d1\u30a4\u306bAD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u5149\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3059\u308b\n\u30e9\u30ba\u30d1\u30a4\u306b\u306f\u4ee5\u4e0b\u306e\u56f3\u306e\u3088\u3046\u306b\u69d8\u3005\u306a\u96fb\u5b50\u90e8\u54c1\u3092\u63a5\u7d9a\u3059\u308b\u30d4\u30f3\uff08GPIO\u30d4\u30f3\u3068\u547c\u3076\uff09\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u305e\u308c\u306b\u30d4\u30f3\u756a\u53f7\uff08\u4f8b\uff1a\u5de6\u4e0a\u306e\u30d4\u30f3\u306e\u7070\u8272\u306e1)\uff09\u3068\u540d\u524d\uff08\u4f8b\uff1a\u5de6\u4e0a\u306e\u30d4\u30f3\u306e\u9ec4\u8272\u306e[3.3V PWR]\uff09\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u3066\u5f79\u5272\u3082\u6c7a\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\nIoT\u30b3\u30a2\u306e\u30b5\u30f3\u30d7\u30eb\u30da\u30fc\u30b8\u3088\u308a\u5f15\u7528\n\u30e9\u30ba\u30d1\u30a4\u306eGPIO\u3067\u4ed6\u306e\u30de\u30a4\u30b3\u30f3\u30dc\u30fc\u30c9\u3068\u9055\u3046\u70b9\u306f\u3001\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u30d4\u30f3\u304c\u7121\u3044\u3068\u3044\u3046\u70b9\u3067\u3059\u3002\u6e29\u5ea6\u3084\u5149\u91cf\u3001\u97f3\u91cf\u306a\u3069\u306f\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u3067\u30bb\u30f3\u30b5\u30fc\u90e8\u54c1\u304c\u8c4a\u5bcc\u306b\u3042\u308a\u307e\u3059\u304c\u3001\u30e9\u30ba\u30d1\u30a4\u3067\u306f\u305d\u308c\u3089\u30bb\u30f3\u30b5\u30fc\u306e\u30a2\u30ca\u30ed\u30b0\u30c7\u30fc\u30bf\u3092\u76f4\u63a5\u5165\u529b\u3067\u304d\u307e\u305b\u3093\u3002AD\u30b3\u30f3\u30d0\u30fc\u30bf\u7528IC\u3092\u4ecb\u3057\u3066\u9069\u5207\u306a\u30d3\u30c3\u30c8\u9577\u306e\u30c7\u30b8\u30bf\u30eb\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff08\u3082\u3057\u304f\u306fI2C\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u3082\u3063\u305f\u30bb\u30f3\u30b5\u30fc\u90e8\u54c1\u3092\u5165\u624b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff09\u3002\n\u5f53\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f\u3001\u30d5\u30a9\u30c8\u30c0\u30a4\u30aa\u30fc\u30c9\u306e\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u309210\u30d3\u30c3\u30c8(0\uff5e1023\uff09\u306e\u30c7\u30b8\u30bf\u30eb\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3057\u3066\u30e9\u30ba\u30d1\u30a4\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u3010ToDo 6.1\u3011AD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u306a\u3069\u96fb\u5b50\u90e8\u54c1\u3092\u6e96\u5099\u3059\u308b\n\u4ee5\u4e0b\u306e\u96fb\u5b50\u90e8\u54c1\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30e9\u30ba\u30d1\u30a4\uff08Raspberry Pi 2 Model B\u63a8\u5968\uff091\u500b\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\uff08\u30cf\u30fc\u30d5\u30bf\u30a4\u30d7EIC801\u3092\u63a8\u5968\uff09 1\u500b\nAD\u30b3\u30f3\u30d0\u30fc\u30bf 8\u30d4\u30f3IC MCP3002 1\u500b\n\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf NJL7502L 1\u500b\n\u62b5\u6297 7.5k\u03a9 1\u500b\n\u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb 6\u672c\n\u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u307e\u305f\u306f\u30b8\u30e3\u30f3\u30d1\u30fc\u30ef\u30a4\u30e4 3\u672c\n\n\u6b20\u54c1\u304c\u3042\u308b\u3088\u3046\u3067\u3057\u305f\u3089\u88dc\u5145\u3057\u3066\u304b\u3089\u4ee5\u4e0b\u306e\u4f5c\u696d\u306b\u5165\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3010ToDo 6.2\u3011AD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u3092\u914d\u7dda\u3059\u308b\n\u30e9\u30ba\u30d1\u30a4\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3001\u96fb\u6e90\u30b1\u30fc\u30d6\u30eb\u3092\u629c\u3044\u3066\u96fb\u6e90\u30aa\u30d5\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u56f3\u3092\u5143\u306b\u30e9\u30ba\u30d1\u30a4\u3068\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u4e0a\u306b\u90e8\u54c1\u3092\u914d\u7f6e\u3057\u30b1\u30fc\u30d6\u30eb\u3092\u914d\u7dda\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\nAD\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306b\u5dee\u3057\u8fbc\u3080\u30024\u3064\u3065\u3064\u3042\u308b\u5de6\u53f3\u306e\u30d4\u30f3\u306f\u3001\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u4e2d\u592e\u306e\u6e9d\u306b\u304b\u304b\u308b\u3088\u3046\u306b\u3057\u3001\u534a\u5186\u72b6\u306e\u5207\u308a\u6b20\u304d\u304c\u56f3\u3067\u306f\u4e0b\u5074\u306b\u5411\u304f\u3088\u3046\u306b\u3059\u308b\u3002\n7.5k\u03a9\u62b5\u6297\u3092AD\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002 4\u756a\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u306e\u77ed\u3044\u811a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\u77ed\u3044\u811a\uff08\u30ab\u30bd\u30fc\u30c9\uff1a\u9670\u6975\u5074\uff09\u3092\u56f3\u3067\u306f\u4e0b\u5074\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u3092MCP3002 3\u756a\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u306e\u77ed\u3044\u811a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n\u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e1\u756a\u30d4\u30f3[3.3V PWR]\u3068\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\uff0b\uff08\u8d64\u8272\uff09\u306e\u30e9\u30a4\u30f3\u306b\u5dee\u3057\u8fbc\u3080\u3002\n \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e9\u756a\u30d4\u30f3[GND]\u3068MCP3002 4\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e19\u756a\u30d4\u30f3[SPI0 MOSI]\u3068MCP3002 5\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e21\u756a\u30d4\u30f3[SPI0 MISO]\u3068MCP3002 6\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e23\u756a\u30d4\u30f3[SPI0 SCLK]\u3068MCP3002 7\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e24\u756a\u30d4\u30f3[SPI0 CS0]\u3068MCP3002 1\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n \u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\uff0b\uff08\u8d64\u8272\uff09\u306e\u30e9\u30a4\u30f3\u3068MCP3002 8\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n \u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\uff0b\uff08\u8d64\u8272\uff09\u306e\u30e9\u30a4\u30f3\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u306e\u9577\u3044\u811a\uff08\u30a2\u30ce\u30fc\u30c9\uff1a\u967d\u6975\u5074\uff09\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n\n\n\u3010ToDo 6.3\u3011SPI\u3092\u4f7f\u7528\u53ef\u80fd\u306b\u3059\u308b\n\u914d\u7dda\u304c\u7d42\u308f\u308c\u3070\u30e9\u30ba\u30d1\u30a4\u306e\u96fb\u6e90\u3092\u5165\u308c\u307e\u3059\u3002A/D\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002\u306fSPI\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u7528\u3044\u3066\u3044\u307e\u3059\u3002\u30e9\u30ba\u30d1\u30a4\u3067\u306f\u521d\u671f\u72b6\u614b\u3067SPI\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3057\u3066\u3044\u308b\u305f\u3081raspi-config\u3067SPI\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff08Rasbian JESSIE\u3067\u306f\u4ee5\u4e0b\u306e\u64cd\u4f5c\u306e\u307f\u306b\u306a\u308a\u307e\u3057\u305f\uff09\u3002\n$ sudo raspi-config\n\n\u30fb\u7ba1\u7406\u753b\u9762\u304c\u51fa\u307e\u3059\u306e\u3067\u300c9 Advanced Options\u300d\u3092\u9078\u629e\u3057\u3066Enter\n\n\u30fb\u300cA6 SPI\u300d\u3092\u9078\u629e\n\u30fb\u300cWould you like the SPI interface to be enabled?\u300d\u3068\u51fa\u308b\u306e\u3067\u300cYes\u300d\u3092\u9078\u629e\n\u30fb\u300cThe SPI interface is enabled\u300d\u3068\u51fa\u308b\u306e\u3067\u300cOk\u300d\u3092\u9078\u629e\n\u30fb\u300c Would you like the SPI kernel module to be loaded by default?\u300d\u3068\u51fa\u308b\u306e\u3067\u300cYes\u300d\u3092\u9078\u629e\u3002\n\u30fb\u300cSPI kernel module will now be loaded by default\u300d\u3068\u51fa\u308b\u306e\u3067\u300cOk\u300d\u3092\u9078\u629e\n\u30fb\u30e1\u30cb\u30e5\u30fc\u753b\u9762\u306b\u623b\u3063\u3066\u304f\u308b\u306e\u3067\u300cFinish\u300d\u3092\u9078\u629e\u3057\u3001\u518d\u8d77\u52d5\u3092\u4fc3\u3055\u308c\u308c\u3070\u305d\u306e\u307e\u307e\u30ea\u30d6\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n\u3010ToDo 6.4\u3011\u7167\u5ea6\u30bb\u30f3\u30b5\u306e\u52d5\u4f5c\u78ba\u8a8d\nAD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u306e\u914d\u7dda\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nsora03.py\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002GPIO\u3092\u5229\u7528\u3059\u308bPython\u30b3\u30fc\u30c9\u306fsudo\u3092\u3064\u3051\u3066\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u5b9f\u884c\u6642\u306b\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u304c\u5909\u5316\u3059\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ vi sora03.py\n$ sudo python sora03.py\nch0 =   40, 0.13[V], ch1 =  391,  1.26[V] \u2190\u81ea\u7136\u5149\nch0 =    0, 0.00[V], ch1 =  400,  1.29[V]\nch0 =    0, 0.00[V], ch1 =  416,  1.34[V]\nch0 =    0, 0.00[V], ch1 =  413,  1.33[V]\nch0 =   77, 0.25[V], ch1 =  382,  1.23[V]\nch0 =  168, 0.54[V], ch1 =  370,  1.19[V]\nch0 =  220, 0.71[V], ch1 =  725,  2.34[V] \u2190\u30b9\u30de\u30db\u306e\u30e9\u30a4\u30c8\u3092\u3042\u3066\u308b\nch0 =  194, 0.63[V], ch1 =  936,  3.02[V]\nch0 =  122, 0.39[V], ch1 =  939,  3.03[V]\nch0 =   22, 0.07[V], ch1 =  936,  3.02[V]\nch0 =    0, 0.00[V], ch1 =  932,  3.01[V]\nch0 =   11, 0.04[V], ch1 =  729,  2.35[V]\nch0 =  116, 0.37[V], ch1 =  756,  2.44[V]\nch0 =  191, 0.62[V], ch1 =   13,  0.04[V] \u2190\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u3092\u96a0\u3059\nch0 =  224, 0.72[V], ch1 =   15,  0.05[V]\nch0 =  203, 0.65[V], ch1 =   13,  0.04[V]\n^C$ \u2190[Ctrl]+C\u30ad\u30fc\u3067\u4e2d\u65ad\n\n\u203b\u5b9f\u884c\u4f8b\u306b\u3042\u308b\u3068\u304a\u308aAD\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002\u306f\u30012\u3064\u306e\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u30c1\u30e3\u30cd\u30eb\u3092\u6301\u3063\u3066\u304a\u308a\u3001\u4eca\u56de\u306fch1\u3060\u3051\u3057\u304b\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u6642\u9593\u304c\u3042\u308c\u3070\u3001ch0\u5074\u306b\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3057\u30662\u3064\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n[Step 7.] \u5149\u30bb\u30f3\u30b5\u30fc\u306e\u5024\u3092MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306b\u9001\u4fe1\u3059\u308b\nMQTT\u306f\u3001HTTP\u306b\u6bd4\u3079\u8efd\u91cf\u3067\u5358\u7d14\u306a\u30d7\u30ed\u30c8\u30b3\u30eb\u3067IoT\u7528\u9014\u306b\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\u5358\u7d14\u306a\u69cb\u6210\u56f3\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\n\nMQTT\u306ePubSub\u30e2\u30c7\u30eb\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2513     \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513     \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503(A)Pub\u2503---->\u2503(B)Broker\u2503---->\u2503(C)Sub\u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u251b     \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b     \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n(A)Publisher\uff08\u767a\u884c\u8005\uff09\uff1a\u30e9\u30ba\u30d1\u30a4\u306a\u3069\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u306e\u9001\u4fe1\n(B)MQ Broker\uff08\u4ef2\u4ecb\u8005\uff09\uff1a\u30c7\u30fc\u30bf\u304c\u767a\u751f\u3057\u305f\u3089Subscriber\u306b\u901a\u77e5\n(C)Subscriber\uff08\u8cfc\u8aad\u8005\uff09\uff1a\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\n\n\n\u30b7\u30b9\u30c6\u30e0\u904b\u7528\u4e0a\u306e\u69cb\u6210\u3067\u306f(A)(B)(C)\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n(A)Pub\u306b\u30e9\u30ba\u30d1\u30a4\u306a\u3069\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u30c7\u30d0\u30a4\u30b9\n\n(B)Broker\u306bsango\u6642\u96e8\u5802\u306a\u3069MQTT\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30af\u30e9\u30a6\u30c9\n\n(C)Sub\u306bAWS\u306a\u3069\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u84c4\u7a4d\u3059\u308b\u30af\u30e9\u30a6\u30c9\n\n\u8a73\u7d30\u306f\u5272\u611b\u3057\u307e\u3059\u304c\u3001(B)Broker\u306eMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u304c\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u306e\u3084\u308a\u53d6\u308a\u3092\u4ef2\u4ecb\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u5927\u91cf\u306b\u914d\u7f6e\u3055\u308c\u308bIoT\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u3088\u304f\u30af\u30e9\u30a6\u30c9\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u84c4\u7a4d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30e2\u30c7\u30eb\u3067\u3059\u3002\n\u3053\u3046\u3044\u3063\u305f\u30c7\u30fc\u30bf\u9001\u53d7\u4fe1\u306e\u65b9\u5f0f\u3092Pub/Sub\u30e1\u30c3\u30bb\u30fc\u30b8\u30f3\u30b0\u30e2\u30c7\u30eb\u3068\u547c\u3073\u307e\u3059\u3002\n\n\u3010ToDo 7.1\u3011\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067(A)(B)(C)\u3092\u5b9f\u88c5\u3057(A)(C)\u3092\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\n\u4eca\u56deMQTT\u306e\u5b9f\u88c5\u306b\u306fmosquitto\u3092\u7528\u3044\u307e\u3059\u3002\n\u307e\u305a\u306f(A)(B)(C)\u3092\u3059\u3079\u3066\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067\u5b9f\u884c\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\n(A)Pub mosquitto_pub\u30b3\u30de\u30f3\u30c9\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n\n(B)Broker mosquitto\u30b5\u30fc\u30d3\u30b9\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u7a3c\u50cd\n\n(C)Sub mosquitto_sub\u30b3\u30de\u30f3\u30c9\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\n\nmosquitto\u304a\u3088\u3073mosquitto-clients\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u540c\u6642\u306bMQ\u30d6\u30ed\u30fc\u30ab\u30fc\u306emosquitto\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u307e\u3059\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ sudo apt-get install mosquitto mosquitto-clients\n$ sudo /etc/init.d/mosquitto status\n\u25cf mosquitto.service - LSB: mosquitto MQTT v3.1 message broker\n   Loaded: loaded (/etc/init.d/mosquitto)\n   Active: active (running) since Mon 2016-03-21 12:17:48 JST; 3 days ago\n  Process: 373 ExecStart=/etc/init.d/mosquitto start (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/mosquitto.service\n           mq389 /usr/sbin/mosquitto -c /etc/mosquitto/mosquitto.conf\n\nMar 21 12:17:48 raspberrypi mosquitto[373]: Starting network daemon:: mosquitto.\nMar 21 12:17:48 raspberrypi systemd[1]: Started LSB: mosquitto MQTT v3.1 message broker.\n$\n\n\u6b21\u306b(C)Sub\u306e\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\u3059\u308b\u5074\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\u65b0\u305f\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057pi\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306emosquitt_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u30c7\u30fc\u30bf\u3092\u5f85\u3061\u53d7\u3051\u304f\u3060\u3055\u3044\u3002spinning/3f/brightness000\u306e\u90e8\u5206\u306f\u30c8\u30d4\u30c3\u30af\u3068\u547c\u3070\u308c\u308b\u300c\u89b3\u5bdf\u5bfe\u8c61\u300d\u3067\u3059\uff08\u3053\u3053\u3067\u306f\u30bb\u30f3\u30b5\u30fc\u56fa\u6709\u306eID\u3068\u306a\u308b\uff09\u3002\u672b\u5c3e\u306e000\u306e\u90e8\u5206\u306f\u4efb\u610f\u306e\u6570\u5024\u306b\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u8907\u6570\u306e\u30bb\u30f3\u30b5\u30fc\u304c\u3042\u308b\u969b\u3001\u533a\u5225\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u3067\u3059\uff09\u3002\n\n\u65b0\u305f\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3092\u3060\u3057\u3066mosquitt_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\n$ mosquitto_sub -t spinning/3f/brightness000 -v # 000\u306f\u4efb\u610f\u306e\u6570\u5b57\u306b\u5909\u66f4\n\n\nmosquitto\u30b5\u30fc\u30d3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u305f\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u306b\u623b\u3063\u3066\u3001(A)Sub\u306e\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u5074\u3092\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089mosquittp_pub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u30c7\u30fc\u30bf\u9001\u4fe1\n$ mosquitto_pub -t spinning/3f/brightness000 -m 1023 # 000\u306f\u4efb\u610f\u306e\u6570\u5b57\u306b\u5909\u66f4\n\n\n\u3059\u308b\u3068\u3001mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5225\u306e\u753b\u9762\u3067\u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304cSubscribe\uff08\uff1d\u8868\u793a\uff09\u3055\u308c\u307e\u3059\u3002\n\n\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -t spinning/3f/brightness000 -v\nspinning/3f/brightness000 1023    \u2190 \u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304cSubscribe\u3055\u308c\u308b\n\n\n\n\u3010ToDo 7.2\u3011\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067(A)(B)(C)\u3092\u5b9f\u88c5\u3057(A)\u3092Python\u3067\u5b9f\u884c\n\u6b21\u306b(B)(C)\u306f\u305d\u306e\u307e\u307e\u306b\u3001(A)Pub\u90e8\u5206\u3092Pyhton\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u3001\u3059\u3079\u3066\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067\u5b9f\u884c\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\n(A)Pub pub_light.py\u3092\u5b9f\u884c\u3057\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u5b9a\u671f\u7684\u306b\u9001\u4fe1\n\n(B)Broker mosquitto\u30b5\u30fc\u30d3\u30b9\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u7a3c\u50cd\n\n(C)Sub mosquito sub\u30b3\u30de\u30f3\u30c9\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\uff08\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff09\n\n\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\npub_light.py\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u300210\u79d2\u304a\u304d\u306bPublish\u3092\u884c\u3044\u307e\u3059\u3002\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u3092\u5909\u5316\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089Python\u30bd\u30fc\u30b9\u3067\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\n$ vi pub_light.py\n$ sudo python pub_light.py\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 562, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:20\"}\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 572, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:30\"}\n\u2026\n\n\n\u65e2\u306bmosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30c8\u30d4\u30c3\u30af\u3068JSON\u5f62\u5f0f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\n\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -t spinning/3f/brightness000 -v\nspinning/3f/brightness000 1023    \u2190 \u30b3\u30de\u30f3\u30c9\u3067\u9001\u3089\u308c\u3066\u304d\u305f\u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\nspinning/3f/brightness000 {\"brightness\": 562, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:20\"} \u2190 \u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304c10\u79d2\u304a\u304d\u306bSubscribe\u3055\u308c\u3066\u3044\u304f\nspinning/3f/brightness000 {\"brightness\": 572, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:30\"}\n\u2026\n\n\n\n\u3010Appendix\u3011\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092JSON\u5f62\u5f0f\u3067\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\n\u5149\u91cf\u306e\u30a2\u30ca\u30ed\u30b0\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092JSON\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3068\u3001\u4ee5\u5f8c\u306e\u30ea\u30ec\u30fc\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u884c\u308f\u308c\u308bAWS\u3067\u53ef\u8996\u5316\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u518d\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u4fdd\u5b58\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n$ sudo python pub_light.py >> brightness000.json\n\n\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d5\u30a1\u30a4\u30eb\u540dbrightness000.json\u3067JSON\u30c7\u30fc\u30bf\u304c\u8ffd\u8a18\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\n\n\u3010ToDo 7.3\u3011\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067(A)(C)\u3092\u5b9f\u884c\u3057(B)\u306b\u5916\u90e8MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u3092\u4f7f\u3046\n\u4e0a\u8a18\u4e00\u901a\u308a\u306e\u52d5\u4f5c\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\u5b9f\u969b\u306e\u904b\u7528\u3067\u306fMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306b\u30af\u30e9\u30a6\u30c9\u306e\u30b5\u30fc\u30d3\u30b9\u306a\u3069\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u6642\u96e8\u5802\u304c\u958b\u767a\u3057\u3066\u3044\u308b\u300csango\u300d\u3092\u4f7f\u3063\u3066\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n(A)Pub pub_light_to_cloud.py\u3092\u5b9f\u884c\u3057\u3066\u7167\u5ea6\u30c7\u30fc\u30bf\u3092\u5b9a\u671f\u7684\u306b\u9001\u4fe1\n\n(B)Broker \u6642\u96e8\u5802 sango\u30b5\u30fc\u30d3\u30b9\u306e\u7121\u6599\u30d7\u30e9\u30f3\u3092\u5229\u7528\n\n(C)Sub mosquito sub\u30b3\u30de\u30f3\u30c9\u3067\u7167\u5ea6\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\uff08\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff09\n\n\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\npub_light_to_cloud.py\n\n\u5b9f\u884c\u3059\u308b\u524d\u306b\u6642\u96e8\u5802\u300csango\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u767b\u9332\u3092\u3057\u3066\u4e0b\u3055\u3044\u3002\u30e9\u30a4\u30c8\u30d7\u30e9\u30f3\u306710\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u307e\u3067\u7121\u6599\u3067\u4f7f\u3048\u307e\u3059\u3002\u767b\u9332\u5f8c\u8868\u793a\u3055\u308c\u308b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u203b\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u6642\u96e8\u5802\u300csango\u300d\u306b\u767b\u9332\u3067\u304d\u306a\u3044\u65b9\u306f\u7533\u3057\u51fa\u3066\u304f\u3060\u3055\u3044\uff085\u540d\u307b\u3069\u306a\u3089\u4e00\u6642\u7684\u306b\u4e00\u7dd2\u306b\u4f7f\u3044\u307e\u3057\u3087\u3046\uff09\u3002\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u300215\u79d2\u304a\u304d\u306bPublish\u3092\u884c\u3044\u307e\u3059\u3002\u5148\u307b\u3069\u3068\u540c\u69d8\u306b\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u3092\u5909\u5316\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089Python\u30bd\u30fc\u30b9\u3067sango\u306b\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\n$ vi pub_light_to_cloud.py\n$ sudo python pub_light_to_cloud.py\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 562, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:20\"}\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 572, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:30\"}\n\u2026\n\n\n\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3067mosquittp_sub\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u3092\u4e2d\u65ad\u3057\u3001\u65b0\u305f\u306bsango\u306eMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306bspinning/3f/brightness000\u30c8\u30d4\u30c3\u30af\u3078\u306eSubscribe\u3092\u884c\u3046\u3002\n\u30b3\u30de\u30f3\u30c9\u5185\u306b{\u2026}\u3067\u56f2\u307e\u308c\u305f\u6587\u5b57\u5217\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b{\u2026}\u3054\u3068\u5dee\u3057\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n{account_name}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\uff08=github\u30a2\u30ab\u30a6\u30f3\u30c8\uff09\n{password}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\u65b0\u305f\u306b\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u3066\u304f\u308c\u3070\u6b63\u5e38\u306bSubscribe\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -h lite.mqtt.shiguredo.jp -u {account_name}@github -P {password} -t {account_name}@github/spinning/3f/brightness000 -v\n{account_name}@github/spinning/3f/brightness000 {\"brightness\": 579, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 16:03:52\"}\n{account_name}@github/spinning/3f/brightness000 {\"brightness\": 542, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 16:04:08\"} \u2190 \u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304c15\u79d2\u304a\u304d\u306bSubscribe\u3055\u308c\u3066\u3044\u304f\n\u2026\n\n\n\n[Step 8.] \u5149\u30bb\u30f3\u30b5\u30fc\u306e\u5024\u3092SORACOM Beam\u3092\u4f7f\u3063\u3066\u5916\u90e8MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306b\u9001\u4fe1\u3059\u308b\n\u6700\u5f8c\u306b\u3001(A)Pub\u3068(B)Broker\u9593\u3092\u3001SORACOM Beam\u3092\u4e2d\u7d99\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\n(A)Pub pub_light_to_beam.py\u3092\u5b9f\u884c\u3057\u3066\u30c7\u30fc\u30bf\u3092\u5b9a\u671f\u7684\u306b\u9001\u4fe1\nSORACOM Beam\u7d4c\u7531\u3067\u4e00\u62ec\u3057\u3066\u5b89\u5168\u306b\u30c7\u30fc\u30bf\u3092\u4e2d\u7d99\n\n(B)Broker \u6642\u96e8\u5802 sango\u30b5\u30fc\u30d3\u30b9\u306e\u7121\u6599\u30d7\u30e9\u30f3\n\n(C)Sub mosquito_sub\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\uff08\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff09\n\nSORACOM Beam\u306f\u3001Beam\u3092\u4f7f\u3044\u305f\u3044SORACOM Air\u3092\u7279\u5b9a\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7279\u5b9a\u306e\u30b0\u30eb\u30fc\u30d7\u3068\u306f\u3001\u3059\u3067\u306bSORACOM Beam\u8a2d\u5b9a\u304c\u6e08\u3093\u3067\u3044\u308b\u30b0\u30eb\u30fc\u30d7\u306e\u3053\u3068\u3092\u6307\u3057\u307e\u3059\u3002\nSORACOM\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\u3092\u5909\u66f4\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u3010ToDo 8.1\u3011SORACOM\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\u3092\u884c\u3046\n\u81ea\u8eab\u306ePC\u306e\u30d6\u30e9\u30a6\u30b6\u3067SORACOM\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u8868\u793a\u3055\u305b\u3001SORACOM\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001\u3054\u81ea\u8eab\u306eSORACOM\u30a2\u30ab\u30a6\u30f3\u30c8\u3084\u30cf\u30f3\u30ba\u30aa\u30f3\u6307\u5b9a\u306eSORACOM\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5165\u529b\u3057\u3066\u300c\u30ed\u30b0\u30a4\u30f3\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nSIM\u7ba1\u7406\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067SIM\u306e\u540d\u524d\u306a\u3069\u3092\u5165\u529b\u3057\u691c\u7d22\u3057\u3066\u3001\u81ea\u5206\u306eIMSI\u3092\u30d1\u30bd\u30b3\u30f3\uff08\u306e\u30a8\u30c7\u30a3\u30bf\u306a\u3069\uff09\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u81ea\u5206\u306eSIM\u306e\u756a\u53f7\u3092\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u4e00\u756a\u5de6\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u64cd\u4f5c\u300d\u30d7\u30eb\u30c0\u30a6\u30f3\u3092\u9078\u3073\u3001SIM\u8a73\u7d30\u753b\u9762\u3092\u8868\u793a\u3055\u305b\u307e\u3059\u3002\n\nSIM\u8a73\u7d30\u753b\u9762\u304b\u3089\u30b0\u30eb\u30fc\u30d7\u306e\u6b04\u306b\u300cMQTT\u300d\u3092\u6307\u5b9a\u3057\u3066\u3001\u300c\u9589\u3058\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\n\n\n\u3010ToDo 8.2\u3011SORACOM Beam\u3092\u7528\u3044\u305fPython\u30bd\u30fc\u30b9\u306b\u3088\u308bPublish\u306e\u5b9f\u884c\n\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\npub_light_to_beam.py\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\u3053\u308c\u3082\u307e\u305f15\u79d2\u304a\u304d\u306bPublish\u3092\u884c\u3044\u307e\u3059\u3002\u5148\u307b\u3069\u3068\u540c\u69d8\u306b\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u3092\u5909\u5316\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089Python\u30bd\u30fc\u30b9\u3067sango\u306b\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\n$ vi pub_light_to_cloud.py\n$ $ sudo python  pub_light_to_beam.py\nmosquitto_pub -t {account_name}@github/spinning/3f/brightness000 -m {\"brightness\": 560, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:44:16\"} -h beam.soracom.io\nmosquitto_pub -t {account_name}@github/spinning/3f/brightness000 -m {\"brightness\": 536, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:44:32\"} -h beam.soracom.io\n\u2026\n\n\n\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3067\u65b0\u305f\u306bsango\u306eMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306bspinning/3f/brightness000\u30c8\u30d4\u30c3\u30af\u3078\u306eSubscribe\u3092\u884c\u3046\u3002\n\u30b3\u30de\u30f3\u30c9\u5185\u306b{\u2026}\u3067\u56f2\u307e\u308c\u305f\u6587\u5b57\u5217\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b{\u2026}\u3054\u3068\u5dee\u3057\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n{account_name}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\uff08=github\u30a2\u30ab\u30a6\u30f3\u30c8\uff09\n{password}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\n{imsi}\u306f\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u4f7f\u3063\u3066\u3044\u308bSIM\u306eIMSI\u756a\u53f7\n\n\u65b0\u305f\u306b\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u3066\u304f\u308c\u3070\u6b63\u5e38\u306bSubscribe\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -h lite.mqtt.shiguredo.jp -u {account_name}@github -P {password} -t yoshidaken1@github/spinning/3f/brightness000/{imsi} -v\nyoshidaken1@github/spinning/3f/brightness000/{imsi} {\"brightness\": 583, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:48:52\"}\nyoshidaken1@github/spinning/3f/brightness000/{imsi} {\"brightness\": 576, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:49:08\"}\n\n\n\u4eca\u56de\u306e\u5834\u5408\u3001MQTT\u30b0\u30eb\u30fc\u30d7\u306b\u5c5e\u3057\u305fSIM\u306f\u3059\u3079\u3066beam.soracom.io\u7d4c\u7531\u3067Publish\u3055\u308c\u3066\u3044\u307e\u3059\u3002MQTT\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u304c\uff11\u3064\u306b\u307e\u3068\u307e\u308a\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6570\u306e\u7bc0\u7d04\u306b\u3082\u306a\u308b\u306e\u3067\u3059\u304c\u3001Publish\u5143\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u306f\u3069\u306e\u30e9\u30ba\u30d1\u30a4\u304b\u3089\u9001\u4fe1\u3057\u3066\u304d\u305f\u304b\u7279\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u306e\u305f\u3081MQTT\u30b0\u30eb\u30fc\u30d7\u306eSORACOM Beam\u3067\u306f\u3001\u30c8\u30d4\u30c3\u30af\u306e\u672b\u5c3e\u306bIMSI\u756a\u53f7\u3092\u4ed8\u4e0e\u3059\u308b\u6307\u5b9a\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u6642\u9593\u304c\u3042\u308c\u3070\u3001\u65b0\u305f\u306b\u81ea\u5206\u3067SORACOM\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\uff08MQTT_00\u306a\u3069\u300200\u306f\u81ea\u5206\u306e\u756a\u53f7\uff09\u3001\u4e0a\u56f3\u306b\u57fa\u3065\u3044\u305fSORACOM Beam - MQTT \u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3001Publish/Subscribe\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n# \u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u3001[\u6625\u306eIoT\u30ea\u30ec\u30fc\u30cf\u30f3\u30ba\u30aa\u30f3@\u95a2\u897f](http://www.slideshare.net/ichiroohkini/jawsugiot-iot)\u306e\u4e00\u74b0\u3068\u3057\u3066\u958b\u50ac\u3055\u308c\u308b[\uff1cSORACOM\u63a5\u7d9a + MQTT\u7de8>](https://soracom-ug-kansai.doorkeeper.jp/events/39574)\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u7528\u8cc7\u6599\u3067\u3059\u3002\n\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f\u3001Raspbian\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fRaspberry Pi\uff08\u4ee5\u964d\u3001\u30e9\u30ba\u30d1\u30a4\uff09\u3067SORACOM\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u57fa\u672c\u90e8\u5206\u3092\u3072\u3068\u3068\u304a\u308a\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u30018\u30b9\u30c6\u30c3\u30d7\u3042\u308b\u30cf\u30f3\u30ba\u30aa\u30f3\u624b\u9806\u306e\u3046\u3061\u3001\u5f8c\u534a\u3068\u306a\u308bStep 6 \uff5e Step 8\u3092\u63b2\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n\u524d\u534a\u306eStep 1 \uff5e Step 5\u306f[\u3053\u3061\u3089](http://qiita.com/dietposter/items/901de889b1a83f11fa60)\u3067\u3059\u3002\n \n# [Step 6.] \u30e9\u30ba\u30d1\u30a4\u306bAD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u5149\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3059\u308b\n\u30e9\u30ba\u30d1\u30a4\u306b\u306f\u4ee5\u4e0b\u306e\u56f3\u306e\u3088\u3046\u306b\u69d8\u3005\u306a\u96fb\u5b50\u90e8\u54c1\u3092\u63a5\u7d9a\u3059\u308b\u30d4\u30f3\uff08GPIO\u30d4\u30f3\u3068\u547c\u3076\uff09\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u305e\u308c\u306b\u30d4\u30f3\u756a\u53f7\uff08\u4f8b\uff1a\u5de6\u4e0a\u306e\u30d4\u30f3\u306e\u7070\u8272\u306e`1`)\uff09\u3068\u540d\u524d\uff08\u4f8b\uff1a\u5de6\u4e0a\u306e\u30d4\u30f3\u306e\u9ec4\u8272\u306e`[3.3V PWR]`\uff09\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u3066\u5f79\u5272\u3082\u6c7a\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n![image](http://ms-iot.github.io/content/images/PinMappings/RP2_Pinout.png)\n*[IoT\u30b3\u30a2\u306e\u30b5\u30f3\u30d7\u30eb\u30da\u30fc\u30b8](http://ms-iot.github.io/content/en-US/win10/samples/PushButton.htm)\u3088\u308a\u5f15\u7528*\n\n\u30e9\u30ba\u30d1\u30a4\u306eGPIO\u3067\u4ed6\u306e\u30de\u30a4\u30b3\u30f3\u30dc\u30fc\u30c9\u3068\u9055\u3046\u70b9\u306f\u3001\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u30d4\u30f3\u304c\u7121\u3044\u3068\u3044\u3046\u70b9\u3067\u3059\u3002\u6e29\u5ea6\u3084\u5149\u91cf\u3001\u97f3\u91cf\u306a\u3069\u306f\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u3067\u30bb\u30f3\u30b5\u30fc\u90e8\u54c1\u304c\u8c4a\u5bcc\u306b\u3042\u308a\u307e\u3059\u304c\u3001\u30e9\u30ba\u30d1\u30a4\u3067\u306f\u305d\u308c\u3089\u30bb\u30f3\u30b5\u30fc\u306e\u30a2\u30ca\u30ed\u30b0\u30c7\u30fc\u30bf\u3092\u76f4\u63a5\u5165\u529b\u3067\u304d\u307e\u305b\u3093\u3002AD\u30b3\u30f3\u30d0\u30fc\u30bf\u7528IC\u3092\u4ecb\u3057\u3066\u9069\u5207\u306a\u30d3\u30c3\u30c8\u9577\u306e\u30c7\u30b8\u30bf\u30eb\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff08\u3082\u3057\u304f\u306fI2C\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u3082\u3063\u305f\u30bb\u30f3\u30b5\u30fc\u90e8\u54c1\u3092\u5165\u624b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff09\u3002\n\u5f53\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u306f\u3001\u30d5\u30a9\u30c8\u30c0\u30a4\u30aa\u30fc\u30c9\u306e\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u309210\u30d3\u30c3\u30c8(0\uff5e1023\uff09\u306e\u30c7\u30b8\u30bf\u30eb\u30c7\u30fc\u30bf\u306b\u5909\u63db\u3057\u3066\u30e9\u30ba\u30d1\u30a4\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n## \u3010ToDo 6.1\u3011AD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u306a\u3069\u96fb\u5b50\u90e8\u54c1\u3092\u6e96\u5099\u3059\u308b\n\u4ee5\u4e0b\u306e\u96fb\u5b50\u90e8\u54c1\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n* \u30e9\u30ba\u30d1\u30a4\uff08Raspberry Pi 2 Model B\u63a8\u5968\uff091\u500b\n* \u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\uff08\u30cf\u30fc\u30d5\u30bf\u30a4\u30d7EIC801\u3092\u63a8\u5968\uff09 1\u500b\n* AD\u30b3\u30f3\u30d0\u30fc\u30bf 8\u30d4\u30f3IC MCP3002 1\u500b\n* \u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf NJL7502L 1\u500b\n* \u62b5\u6297 7.5k\u03a9 1\u500b\n* \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb 6\u672c\n* \u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u307e\u305f\u306f\u30b8\u30e3\u30f3\u30d1\u30fc\u30ef\u30a4\u30e4 3\u672c\n\n\u6b20\u54c1\u304c\u3042\u308b\u3088\u3046\u3067\u3057\u305f\u3089\u88dc\u5145\u3057\u3066\u304b\u3089\u4ee5\u4e0b\u306e\u4f5c\u696d\u306b\u5165\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u3010ToDo 6.2\u3011AD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u3092\u914d\u7dda\u3059\u308b\n\u30e9\u30ba\u30d1\u30a4\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3001\u96fb\u6e90\u30b1\u30fc\u30d6\u30eb\u3092\u629c\u3044\u3066\u96fb\u6e90\u30aa\u30d5\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u56f3\u3092\u5143\u306b\u30e9\u30ba\u30d1\u30a4\u3068\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u4e0a\u306b\u90e8\u54c1\u3092\u914d\u7f6e\u3057\u30b1\u30fc\u30d6\u30eb\u3092\u914d\u7dda\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/4092/800ea87a-2c8f-1ba8-7ff4-38ec8bd5e8a3.png)\n\n1. AD\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306b\u5dee\u3057\u8fbc\u3080\u30024\u3064\u3065\u3064\u3042\u308b\u5de6\u53f3\u306e\u30d4\u30f3\u306f\u3001\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u4e2d\u592e\u306e\u6e9d\u306b\u304b\u304b\u308b\u3088\u3046\u306b\u3057\u3001\u534a\u5186\u72b6\u306e\u5207\u308a\u6b20\u304d\u304c\u56f3\u3067\u306f\u4e0b\u5074\u306b\u5411\u304f\u3088\u3046\u306b\u3059\u308b\u3002\n2. 7.5k\u03a9\u62b5\u6297\u3092AD\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002 `4`\u756a\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u306e\u77ed\u3044\u811a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n3. \u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\u77ed\u3044\u811a\uff08\u30ab\u30bd\u30fc\u30c9\uff1a\u9670\u6975\u5074\uff09\u3092\u56f3\u3067\u306f\u4e0b\u5074\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n4. \u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u3092MCP3002 `3`\u756a\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u306e\u77ed\u3044\u811a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n5. \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e`1`\u756a\u30d4\u30f3`[3.3V PWR]`\u3068\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\uff0b\uff08\u8d64\u8272\uff09\u306e\u30e9\u30a4\u30f3\u306b\u5dee\u3057\u8fbc\u3080\u3002\n6.  \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e`9`\u756a\u30d4\u30f3`[GND]`\u3068MCP3002 `4`\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n7.  \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e`19`\u756a\u30d4\u30f3`[SPI0 MOSI]`\u3068MCP3002 `5`\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n8.  \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e`21`\u756a\u30d4\u30f3`[SPI0 MISO]`\u3068MCP3002 `6`\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n9.  \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e`23`\u756a\u30d4\u30f3`[SPI0 SCLK]`\u3068MCP3002 `7`\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n10.  \u30aa\u30b9\u30fb\u30e1\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30e9\u30ba\u30d1\u30a4\u306e`24`\u756a\u30d4\u30f3`[SPI0 CS0]`\u3068MCP3002 `1`\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n11.  \u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\uff0b\uff08\u8d64\u8272\uff09\u306e\u30e9\u30a4\u30f3\u3068MCP3002 `8`\u756a\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n12.  \u30aa\u30b9\u30fb\u30aa\u30b9\u30b1\u30fc\u30d6\u30eb\u3092\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\uff0b\uff08\u8d64\u8272\uff09\u306e\u30e9\u30a4\u30f3\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bfNJL7502L\u306e\u9577\u3044\u811a\uff08\u30a2\u30ce\u30fc\u30c9\uff1a\u967d\u6975\u5074\uff09\u306b\u3042\u305f\u308b\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u306e\u7a74\u306b\u5dee\u3057\u8fbc\u3080\u3002\n\n## \u3010ToDo 6.3\u3011SPI\u3092\u4f7f\u7528\u53ef\u80fd\u306b\u3059\u308b\n\u914d\u7dda\u304c\u7d42\u308f\u308c\u3070\u30e9\u30ba\u30d1\u30a4\u306e\u96fb\u6e90\u3092\u5165\u308c\u307e\u3059\u3002A/D\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002\u306fSPI\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u7528\u3044\u3066\u3044\u307e\u3059\u3002\u30e9\u30ba\u30d1\u30a4\u3067\u306f\u521d\u671f\u72b6\u614b\u3067SPI\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3057\u3066\u3044\u308b\u305f\u3081`raspi-config`\u3067SPI\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff08Rasbian JESSIE\u3067\u306f\u4ee5\u4e0b\u306e\u64cd\u4f5c\u306e\u307f\u306b\u306a\u308a\u307e\u3057\u305f\uff09\u3002\n\n```bash\n$ sudo raspi-config\n```\n\u30fb\u7ba1\u7406\u753b\u9762\u304c\u51fa\u307e\u3059\u306e\u3067\u300c9 Advanced Options\u300d\u3092\u9078\u629e\u3057\u3066Enter\n![image](https://qiita-image-store.s3.amazonaws.com/0/4092/d7e894c2-6f44-9663-bbc7-01214ef501ab.png)\n\u30fb\u300cA6 SPI\u300d\u3092\u9078\u629e\n\u30fb\u300cWould you like the SPI interface to be enabled?\u300d\u3068\u51fa\u308b\u306e\u3067\u300cYes\u300d\u3092\u9078\u629e\n\u30fb\u300cThe SPI interface is enabled\u300d\u3068\u51fa\u308b\u306e\u3067\u300cOk\u300d\u3092\u9078\u629e\n\u30fb\u300c Would you like the SPI kernel module to be loaded by default?\u300d\u3068\u51fa\u308b\u306e\u3067\u300cYes\u300d\u3092\u9078\u629e\u3002\n\u30fb\u300cSPI kernel module will now be loaded by default\u300d\u3068\u51fa\u308b\u306e\u3067\u300cOk\u300d\u3092\u9078\u629e\n\u30fb\u30e1\u30cb\u30e5\u30fc\u753b\u9762\u306b\u623b\u3063\u3066\u304f\u308b\u306e\u3067\u300cFinish\u300d\u3092\u9078\u629e\u3057\u3001\u518d\u8d77\u52d5\u3092\u4fc3\u3055\u308c\u308c\u3070\u305d\u306e\u307e\u307e\u30ea\u30d6\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n## \u3010ToDo 6.4\u3011\u7167\u5ea6\u30bb\u30f3\u30b5\u306e\u52d5\u4f5c\u78ba\u8a8d\nAD\u30b3\u30f3\u30d0\u30fc\u30bf\u3068\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u306e\u914d\u7dda\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n* [sora03.py](https://gist.github.com/yoshidaken1/e04c8b9da2b974c3228f#file-sora03-py)\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002GPIO\u3092\u5229\u7528\u3059\u308bPython\u30b3\u30fc\u30c9\u306fsudo\u3092\u3064\u3051\u3066\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u5b9f\u884c\u6642\u306b\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u304c\u5909\u5316\u3059\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n$ vi sora03.py\n$ sudo python sora03.py\nch0 =   40, 0.13[V], ch1 =  391,  1.26[V] \u2190\u81ea\u7136\u5149\nch0 =    0, 0.00[V], ch1 =  400,  1.29[V]\nch0 =    0, 0.00[V], ch1 =  416,  1.34[V]\nch0 =    0, 0.00[V], ch1 =  413,  1.33[V]\nch0 =   77, 0.25[V], ch1 =  382,  1.23[V]\nch0 =  168, 0.54[V], ch1 =  370,  1.19[V]\nch0 =  220, 0.71[V], ch1 =  725,  2.34[V] \u2190\u30b9\u30de\u30db\u306e\u30e9\u30a4\u30c8\u3092\u3042\u3066\u308b\nch0 =  194, 0.63[V], ch1 =  936,  3.02[V]\nch0 =  122, 0.39[V], ch1 =  939,  3.03[V]\nch0 =   22, 0.07[V], ch1 =  936,  3.02[V]\nch0 =    0, 0.00[V], ch1 =  932,  3.01[V]\nch0 =   11, 0.04[V], ch1 =  729,  2.35[V]\nch0 =  116, 0.37[V], ch1 =  756,  2.44[V]\nch0 =  191, 0.62[V], ch1 =   13,  0.04[V] \u2190\u30d5\u30a9\u30c8\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf\u3092\u96a0\u3059\nch0 =  224, 0.72[V], ch1 =   15,  0.05[V]\nch0 =  203, 0.65[V], ch1 =   13,  0.04[V]\n^C$ \u2190[Ctrl]+C\u30ad\u30fc\u3067\u4e2d\u65ad\n```\n\u203b\u5b9f\u884c\u4f8b\u306b\u3042\u308b\u3068\u304a\u308aAD\u30b3\u30f3\u30d0\u30fc\u30bfMCP3002\u306f\u30012\u3064\u306e\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u30c1\u30e3\u30cd\u30eb\u3092\u6301\u3063\u3066\u304a\u308a\u3001\u4eca\u56de\u306fch1\u3060\u3051\u3057\u304b\u4f7f\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u6642\u9593\u304c\u3042\u308c\u3070\u3001ch0\u5074\u306b\u30a2\u30ca\u30ed\u30b0\u5165\u529b\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3057\u30662\u3064\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n# [Step 7.] \u5149\u30bb\u30f3\u30b5\u30fc\u306e\u5024\u3092MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306b\u9001\u4fe1\u3059\u308b\nMQTT\u306f\u3001HTTP\u306b\u6bd4\u3079\u8efd\u91cf\u3067\u5358\u7d14\u306a\u30d7\u30ed\u30c8\u30b3\u30eb\u3067IoT\u7528\u9014\u306b\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\u5358\u7d14\u306a\u69cb\u6210\u56f3\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\n\n```bash:MQTT\u306ePubSub\u30e2\u30c7\u30eb\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2513     \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513     \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503(A)Pub\u2503---->\u2503(B)Broker\u2503---->\u2503(C)Sub\u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u251b     \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b     \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n(A)Publisher\uff08\u767a\u884c\u8005\uff09\uff1a\u30e9\u30ba\u30d1\u30a4\u306a\u3069\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u306e\u9001\u4fe1\n(B)MQ Broker\uff08\u4ef2\u4ecb\u8005\uff09\uff1a\u30c7\u30fc\u30bf\u304c\u767a\u751f\u3057\u305f\u3089Subscriber\u306b\u901a\u77e5\n(C)Subscriber\uff08\u8cfc\u8aad\u8005\uff09\uff1a\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\n```\n\n\u30b7\u30b9\u30c6\u30e0\u904b\u7528\u4e0a\u306e\u69cb\u6210\u3067\u306f(A)(B)(C)\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n* __(A)Pub__\u306b\u30e9\u30ba\u30d1\u30a4\u306a\u3069\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u30c7\u30d0\u30a4\u30b9\n* __(B)Broker__\u306bsango\u6642\u96e8\u5802\u306a\u3069MQTT\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30af\u30e9\u30a6\u30c9\n* __(C)Sub__\u306bAWS\u306a\u3069\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u84c4\u7a4d\u3059\u308b\u30af\u30e9\u30a6\u30c9\n\n\u8a73\u7d30\u306f\u5272\u611b\u3057\u307e\u3059\u304c\u3001(B)Broker\u306e**MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u304c\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u306e\u3084\u308a\u53d6\u308a\u3092\u4ef2\u4ecb\u3059\u308b**\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u5927\u91cf\u306b\u914d\u7f6e\u3055\u308c\u308bIoT\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u3088\u304f\u30af\u30e9\u30a6\u30c9\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u84c4\u7a4d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30e2\u30c7\u30eb\u3067\u3059\u3002\n\u3053\u3046\u3044\u3063\u305f\u30c7\u30fc\u30bf\u9001\u53d7\u4fe1\u306e\u65b9\u5f0f\u3092Pub/Sub\u30e1\u30c3\u30bb\u30fc\u30b8\u30f3\u30b0\u30e2\u30c7\u30eb\u3068\u547c\u3073\u307e\u3059\u3002\n\n## \u3010ToDo 7.1\u3011\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067(A)(B)(C)\u3092\u5b9f\u88c5\u3057(A)(C)\u3092\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\n\u4eca\u56deMQTT\u306e\u5b9f\u88c5\u306b\u306f[mosquitto](http://mosquitto.org/)\u3092\u7528\u3044\u307e\u3059\u3002\n\u307e\u305a\u306f(A)(B)(C)\u3092\u3059\u3079\u3066\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067\u5b9f\u884c\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n* __(A)Pub__ `mosquitto_pub`\u30b3\u30de\u30f3\u30c9\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n* __(B)Broker__ `mosquitto`\u30b5\u30fc\u30d3\u30b9\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u7a3c\u50cd\n* __(C)Sub__ `mosquitto_sub`\u30b3\u30de\u30f3\u30c9\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\n\nmosquitto\u304a\u3088\u3073mosquitto-clients\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u540c\u6642\u306bMQ\u30d6\u30ed\u30fc\u30ab\u30fc\u306emosquitto\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u307e\u3059\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n$ sudo apt-get install mosquitto mosquitto-clients\n$ sudo /etc/init.d/mosquitto status\n\u25cf mosquitto.service - LSB: mosquitto MQTT v3.1 message broker\n   Loaded: loaded (/etc/init.d/mosquitto)\n   Active: active (running) since Mon 2016-03-21 12:17:48 JST; 3 days ago\n  Process: 373 ExecStart=/etc/init.d/mosquitto start (code=exited, status=0/SUCCESS)\n   CGroup: /system.slice/mosquitto.service\n           mq389 /usr/sbin/mosquitto -c /etc/mosquitto/mosquitto.conf\n\nMar 21 12:17:48 raspberrypi mosquitto[373]: Starting network daemon:: mosquitto.\nMar 21 12:17:48 raspberrypi systemd[1]: Started LSB: mosquitto MQTT v3.1 message broker.\n$\n```\n\n\u6b21\u306b__(C)Sub__\u306e\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\u3059\u308b\u5074\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\u65b0\u305f\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057`pi`\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e`mosquitt_sub`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u30c7\u30fc\u30bf\u3092\u5f85\u3061\u53d7\u3051\u304f\u3060\u3055\u3044\u3002`spinning/3f/brightness000`\u306e\u90e8\u5206\u306f\u30c8\u30d4\u30c3\u30af\u3068\u547c\u3070\u308c\u308b\u300c\u89b3\u5bdf\u5bfe\u8c61\u300d\u3067\u3059\uff08\u3053\u3053\u3067\u306f\u30bb\u30f3\u30b5\u30fc\u56fa\u6709\u306eID\u3068\u306a\u308b\uff09\u3002\u672b\u5c3e\u306e`000`\u306e\u90e8\u5206\u306f\u4efb\u610f\u306e\u6570\u5024\u306b\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u8907\u6570\u306e\u30bb\u30f3\u30b5\u30fc\u304c\u3042\u308b\u969b\u3001\u533a\u5225\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u3067\u3059\uff09\u3002\n\n```bash:\u65b0\u305f\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3092\u3060\u3057\u3066mosquitt_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\n$ mosquitto_sub -t spinning/3f/brightness000 -v # 000\u306f\u4efb\u610f\u306e\u6570\u5b57\u306b\u5909\u66f4\n```\n\n`mosquitto`\u30b5\u30fc\u30d3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u305f\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u306b\u623b\u3063\u3066\u3001__(A)Sub__\u306e\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u5074\u3092\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash:\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089mosquittp_pub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u30c7\u30fc\u30bf\u9001\u4fe1\n$ mosquitto_pub -t spinning/3f/brightness000 -m 1023 # 000\u306f\u4efb\u610f\u306e\u6570\u5b57\u306b\u5909\u66f4\n```\n\u3059\u308b\u3068\u3001`mosquittp_sub`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5225\u306e\u753b\u9762\u3067\u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304cSubscribe\uff08\uff1d\u8868\u793a\uff09\u3055\u308c\u307e\u3059\u3002\n\n```bash:\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -t spinning/3f/brightness000 -v\nspinning/3f/brightness000 1023    \u2190 \u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304cSubscribe\u3055\u308c\u308b\n```\n\n## \u3010ToDo 7.2\u3011\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067(A)(B)(C)\u3092\u5b9f\u88c5\u3057(A)\u3092Python\u3067\u5b9f\u884c\n\u6b21\u306b(B)(C)\u306f\u305d\u306e\u307e\u307e\u306b\u3001(A)Pub\u90e8\u5206\u3092Pyhton\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u3001\u3059\u3079\u3066\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067\u5b9f\u884c\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n* __(A)Pub__ `pub_light.py`\u3092\u5b9f\u884c\u3057\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u5b9a\u671f\u7684\u306b\u9001\u4fe1\n* __(B)Broker__ `mosquitto`\u30b5\u30fc\u30d3\u30b9\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u7a3c\u50cd\n* __(C)Sub__ `mosquito sub`\u30b3\u30de\u30f3\u30c9\u3067\u5149\u91cf\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\uff08\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff09\n\n\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n* [pub_light.py](https://gist.github.com/yoshidaken1/e04c8b9da2b974c3228f#file-pub_light-py)\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u300210\u79d2\u304a\u304d\u306bPublish\u3092\u884c\u3044\u307e\u3059\u3002\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u3092\u5909\u5316\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash:\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089Python\u30bd\u30fc\u30b9\u3067\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\n$ vi pub_light.py\n$ sudo python pub_light.py\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 562, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:20\"}\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 572, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:30\"}\n\u2026\n```\n\n\u65e2\u306b`mosquittp_sub`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30c8\u30d4\u30c3\u30af\u3068JSON\u5f62\u5f0f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\n```bash:\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -t spinning/3f/brightness000 -v\nspinning/3f/brightness000 1023    \u2190 \u30b3\u30de\u30f3\u30c9\u3067\u9001\u3089\u308c\u3066\u304d\u305f\u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\nspinning/3f/brightness000 {\"brightness\": 562, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:20\"} \u2190 \u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304c10\u79d2\u304a\u304d\u306bSubscribe\u3055\u308c\u3066\u3044\u304f\nspinning/3f/brightness000 {\"brightness\": 572, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:30\"}\n\u2026\n```\n## \u3010Appendix\u3011\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092JSON\u5f62\u5f0f\u3067\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\n\n\u5149\u91cf\u306e\u30a2\u30ca\u30ed\u30b0\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092JSON\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3068\u3001\u4ee5\u5f8c\u306e\u30ea\u30ec\u30fc\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u884c\u308f\u308c\u308bAWS\u3067\u53ef\u8996\u5316\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u518d\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u4fdd\u5b58\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n$ sudo python pub_light.py >> brightness000.json\n```\n\n\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d5\u30a1\u30a4\u30eb\u540d`brightness000.json`\u3067JSON\u30c7\u30fc\u30bf\u304c\u8ffd\u8a18\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\n\n## \u3010ToDo 7.3\u3011\u30e9\u30ba\u30d1\u30a4\u4e0a\u3067(A)(C)\u3092\u5b9f\u884c\u3057(B)\u306b\u5916\u90e8MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u3092\u4f7f\u3046\n\n\u4e0a\u8a18\u4e00\u901a\u308a\u306e\u52d5\u4f5c\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\u5b9f\u969b\u306e\u904b\u7528\u3067\u306fMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306b\u30af\u30e9\u30a6\u30c9\u306e\u30b5\u30fc\u30d3\u30b9\u306a\u3069\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u6642\u96e8\u5802\u304c\u958b\u767a\u3057\u3066\u3044\u308b\u300c[sango](https://sango.shiguredo.jp)\u300d\u3092\u4f7f\u3063\u3066\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n* __(A)Pub__ `pub_light_to_cloud.py`\u3092\u5b9f\u884c\u3057\u3066\u7167\u5ea6\u30c7\u30fc\u30bf\u3092\u5b9a\u671f\u7684\u306b\u9001\u4fe1\n* __(B)Broker__ \u6642\u96e8\u5802 sango\u30b5\u30fc\u30d3\u30b9\u306e\u7121\u6599\u30d7\u30e9\u30f3\u3092\u5229\u7528\n* __(C)Sub__ `mosquito sub`\u30b3\u30de\u30f3\u30c9\u3067\u7167\u5ea6\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\uff08\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff09\n\n\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n* [pub_light_to_cloud.py](https://gist.github.com/yoshidaken1/e04c8b9da2b974c3228f#file-pub_light_to_cloud-py)\n\n\u5b9f\u884c\u3059\u308b\u524d\u306b\u6642\u96e8\u5802\u300c[sango](https://sango.shiguredo.jp)\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u767b\u9332\u3092\u3057\u3066\u4e0b\u3055\u3044\u3002\u30e9\u30a4\u30c8\u30d7\u30e9\u30f3\u306710\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u307e\u3067\u7121\u6599\u3067\u4f7f\u3048\u307e\u3059\u3002\u767b\u9332\u5f8c\u8868\u793a\u3055\u308c\u308b[\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9](https://sango.shiguredo.jp/dashboard)\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/4092/6d95ef55-c489-b566-84a3-935e58608967.png)\n\u203b\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u6642\u96e8\u5802\u300c[sango](https://sango.shiguredo.jp)\u300d\u306b\u767b\u9332\u3067\u304d\u306a\u3044\u65b9\u306f\u7533\u3057\u51fa\u3066\u304f\u3060\u3055\u3044\uff085\u540d\u307b\u3069\u306a\u3089\u4e00\u6642\u7684\u306b\u4e00\u7dd2\u306b\u4f7f\u3044\u307e\u3057\u3087\u3046\uff09\u3002\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u300215\u79d2\u304a\u304d\u306bPublish\u3092\u884c\u3044\u307e\u3059\u3002\u5148\u307b\u3069\u3068\u540c\u69d8\u306b\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u3092\u5909\u5316\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash:\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089Python\u30bd\u30fc\u30b9\u3067sango\u306b\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\n$ vi pub_light_to_cloud.py\n$ sudo python pub_light_to_cloud.py\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 562, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:20\"}\nmosquitto_pub -t spinning/3f/brightness000 -m {\"brightness\": 572, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 14:35:30\"}\n\u2026\n```\n\n\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3067`mosquittp_sub`\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u3092\u4e2d\u65ad\u3057\u3001\u65b0\u305f\u306bsango\u306eMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306bspinning/3f/brightness000\u30c8\u30d4\u30c3\u30af\u3078\u306eSubscribe\u3092\u884c\u3046\u3002\n\u30b3\u30de\u30f3\u30c9\u5185\u306b{\u2026}\u3067\u56f2\u307e\u308c\u305f\u6587\u5b57\u5217\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b{\u2026}\u3054\u3068\u5dee\u3057\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n* {account_name}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\uff08=github\u30a2\u30ab\u30a6\u30f3\u30c8\uff09\n* {password}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\u65b0\u305f\u306b\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u3066\u304f\u308c\u3070\u6b63\u5e38\u306bSubscribe\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n```bash:\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -h lite.mqtt.shiguredo.jp -u {account_name}@github -P {password} -t {account_name}@github/spinning/3f/brightness000 -v\n{account_name}@github/spinning/3f/brightness000 {\"brightness\": 579, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 16:03:52\"}\n{account_name}@github/spinning/3f/brightness000 {\"brightness\": 542, \"ID\": \"id000\", \"time_sensor\": \"2016-03-24 16:04:08\"} \u2190 \u30c8\u30d4\u30c3\u30af\u304a\u3088\u3073\u30c7\u30fc\u30bf\u304c15\u79d2\u304a\u304d\u306bSubscribe\u3055\u308c\u3066\u3044\u304f\n\u2026\n```\n\n# [Step 8.] \u5149\u30bb\u30f3\u30b5\u30fc\u306e\u5024\u3092SORACOM Beam\u3092\u4f7f\u3063\u3066\u5916\u90e8MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306b\u9001\u4fe1\u3059\u308b\n\n\u6700\u5f8c\u306b\u3001(A)Pub\u3068(B)Broker\u9593\u3092\u3001SORACOM Beam\u3092\u4e2d\u7d99\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n* __(A)Pub__ `pub_light_to_beam.py`\u3092\u5b9f\u884c\u3057\u3066\u30c7\u30fc\u30bf\u3092\u5b9a\u671f\u7684\u306b\u9001\u4fe1\n* __SORACOM Beam\u7d4c\u7531\u3067\u4e00\u62ec\u3057\u3066\u5b89\u5168\u306b\u30c7\u30fc\u30bf\u3092\u4e2d\u7d99__\n* __(B)Broker__ \u6642\u96e8\u5802 sango\u30b5\u30fc\u30d3\u30b9\u306e\u7121\u6599\u30d7\u30e9\u30f3\n* __(C)Sub__ `mosquito_sub`\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\uff08\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff09\n\nSORACOM Beam\u306f\u3001Beam\u3092\u4f7f\u3044\u305f\u3044SORACOM Air\u3092\u7279\u5b9a\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7279\u5b9a\u306e\u30b0\u30eb\u30fc\u30d7\u3068\u306f\u3001\u3059\u3067\u306bSORACOM Beam\u8a2d\u5b9a\u304c\u6e08\u3093\u3067\u3044\u308b\u30b0\u30eb\u30fc\u30d7\u306e\u3053\u3068\u3092\u6307\u3057\u307e\u3059\u3002\nSORACOM\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\u3092\u5909\u66f4\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n## \u3010ToDo 8.1\u3011SORACOM\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\u3092\u884c\u3046\n\n\u81ea\u8eab\u306ePC\u306e\u30d6\u30e9\u30a6\u30b6\u3067[SORACOM\u30b3\u30f3\u30bd\u30fc\u30eb](https://console.soracom.io/#/)\u3092\u8868\u793a\u3055\u305b\u3001SORACOM\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n![\u30ad\u30e3\u30d7\u30c1\u30e302.PNG](https://qiita-image-store.s3.amazonaws.com/0/4092/0d653422-bb64-2873-a43f-764df205a6a5.png)\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001\u3054\u81ea\u8eab\u306eSORACOM\u30a2\u30ab\u30a6\u30f3\u30c8\u3084\u30cf\u30f3\u30ba\u30aa\u30f3\u6307\u5b9a\u306eSORACOM\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5165\u529b\u3057\u3066\u300c\u30ed\u30b0\u30a4\u30f3\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nSIM\u7ba1\u7406\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067SIM\u306e\u540d\u524d\u306a\u3069\u3092\u5165\u529b\u3057\u691c\u7d22\u3057\u3066\u3001\u81ea\u5206\u306eIMSI\u3092\u30d1\u30bd\u30b3\u30f3\uff08\u306e\u30a8\u30c7\u30a3\u30bf\u306a\u3069\uff09\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n![\u30ad\u30e3\u30d7\u30c1\u30e303.PNG](https://qiita-image-store.s3.amazonaws.com/0/4092/1ee848f3-e577-f6d0-a081-dbcb18d0357d.png)\n\n\u81ea\u5206\u306eSIM\u306e\u756a\u53f7\u3092\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u4e00\u756a\u5de6\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u64cd\u4f5c\u300d\u30d7\u30eb\u30c0\u30a6\u30f3\u3092\u9078\u3073\u3001SIM\u8a73\u7d30\u753b\u9762\u3092\u8868\u793a\u3055\u305b\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/4092/2238c8e3-a7cb-aaae-69f5-200f8c148be4.png)\n\nSIM\u8a73\u7d30\u753b\u9762\u304b\u3089\u30b0\u30eb\u30fc\u30d7\u306e\u6b04\u306b\u300cMQTT\u300d\u3092\u6307\u5b9a\u3057\u3066\u3001\u300c\u9589\u3058\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/4092/fd595b48-f998-3a50-7f41-ecf68937be4a.png)\n\n## \u3010ToDo 8.2\u3011SORACOM Beam\u3092\u7528\u3044\u305fPython\u30bd\u30fc\u30b9\u306b\u3088\u308bPublish\u306e\u5b9f\u884c\n\n\u4ee5\u4e0b\u306ePython\u30bd\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n* [pub_light_to_beam.py](https://gist.github.com/yoshidaken1/e04c8b9da2b974c3228f#file-pub_light_to_beam-py)\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\u3053\u308c\u3082\u307e\u305f15\u79d2\u304a\u304d\u306bPublish\u3092\u884c\u3044\u307e\u3059\u3002\u5148\u307b\u3069\u3068\u540c\u69d8\u306b\u5149\u3092\u3042\u3066\u305f\u308a\u906e\u3063\u305f\u308a\u3057\u3066\u3001\u5024\u3092\u5909\u5316\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash:\u5143\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304b\u3089Python\u30bd\u30fc\u30b9\u3067sango\u306b\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\n$ vi pub_light_to_cloud.py\n$ $ sudo python  pub_light_to_beam.py\nmosquitto_pub -t {account_name}@github/spinning/3f/brightness000 -m {\"brightness\": 560, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:44:16\"} -h beam.soracom.io\nmosquitto_pub -t {account_name}@github/spinning/3f/brightness000 -m {\"brightness\": 536, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:44:32\"} -h beam.soracom.io\n\u2026\n```\n\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3067\u65b0\u305f\u306bsango\u306eMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u306bspinning/3f/brightness000\u30c8\u30d4\u30c3\u30af\u3078\u306eSubscribe\u3092\u884c\u3046\u3002\n\u30b3\u30de\u30f3\u30c9\u5185\u306b{\u2026}\u3067\u56f2\u307e\u308c\u305f\u6587\u5b57\u5217\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b{\u2026}\u3054\u3068\u5dee\u3057\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n* {account_name}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\uff08=github\u30a2\u30ab\u30a6\u30f3\u30c8\uff09\n* {password}\u306f\u3054\u81ea\u8eab\u306esango\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\n* {imsi}\u306f\u30cf\u30f3\u30ba\u30aa\u30f3\u3067\u4f7f\u3063\u3066\u3044\u308bSIM\u306eIMSI\u756a\u53f7\n\n\u65b0\u305f\u306b\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u3066\u304f\u308c\u3070\u6b63\u5e38\u306bSubscribe\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n```bash:\u65b0\u305f\u306a\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\uff08mosquittp_sub\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u5f85\u53d7\u3051\uff09\n$ mosquitto_sub -h lite.mqtt.shiguredo.jp -u {account_name}@github -P {password} -t yoshidaken1@github/spinning/3f/brightness000/{imsi} -v\nyoshidaken1@github/spinning/3f/brightness000/{imsi} {\"brightness\": 583, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:48:52\"}\nyoshidaken1@github/spinning/3f/brightness000/{imsi} {\"brightness\": 576, \"ID\": \"id000\", \"time_sensor\": \"2016-03-25 02:49:08\"}\n```\n\n\u4eca\u56de\u306e\u5834\u5408\u3001MQTT\u30b0\u30eb\u30fc\u30d7\u306b\u5c5e\u3057\u305fSIM\u306f\u3059\u3079\u3066beam.soracom.io\u7d4c\u7531\u3067Publish\u3055\u308c\u3066\u3044\u307e\u3059\u3002MQTT\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u304c\uff11\u3064\u306b\u307e\u3068\u307e\u308a\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6570\u306e\u7bc0\u7d04\u306b\u3082\u306a\u308b\u306e\u3067\u3059\u304c\u3001Publish\u5143\u306e\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u306f\u3069\u306e\u30e9\u30ba\u30d1\u30a4\u304b\u3089\u9001\u4fe1\u3057\u3066\u304d\u305f\u304b\u7279\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u306e\u305f\u3081MQTT\u30b0\u30eb\u30fc\u30d7\u306eSORACOM Beam\u3067\u306f\u3001\u30c8\u30d4\u30c3\u30af\u306e\u672b\u5c3e\u306bIMSI\u756a\u53f7\u3092\u4ed8\u4e0e\u3059\u308b\u6307\u5b9a\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/4092/0b039885-c5f9-9559-09b5-3d94567073b6.png)\n\n\u6642\u9593\u304c\u3042\u308c\u3070\u3001\u65b0\u305f\u306b\u81ea\u5206\u3067SORACOM\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\uff08MQTT_00\u306a\u3069\u300200\u306f\u81ea\u5206\u306e\u756a\u53f7\uff09\u3001\u4e0a\u56f3\u306b\u57fa\u3065\u3044\u305fSORACOM Beam - MQTT \u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3001Publish/Subscribe\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n"}