{"tags": ["Java", "ApacheCXF", "Tomcat"], "context": " More than 1 year has passed since last update.Jersey\u304c\u8af8\u4e8b\u60c5\u3067\u4f7f\u3048\u305a\u3001Apache CXF\u3092\u4f7f\u7528\u3057\u305fREST\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u969b\u306e\u899a\u66f8\n\n\u3084\u308b\u3053\u3068\nTomcat8.0 + Apache CXF\u3067\u306eREST\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\n\u203bSpring Framework\u306f\u4f7f\u7528\u3057\u306a\u3044\n\nApache CXF\u306b\u3064\u3044\u3066\nJAX-WS, JAX-RS\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\u4eca\u56de\u306f\u4e3b\u306bJAX-RS\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306f\u3053\u3053\u304b\u3089\nMaven\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\n\npom.xml\n<dependency>\n    <groupId>org.apache.cxf</groupId>\n    <artifactId>cxf-rt-frontend-jaxrs</artifactId>\n    <version>3.1.0</version>\n</dependency>\n\n\n\n\u74b0\u5883\u69cb\u7bc9\nTomcat 8.0\n\u30ea\u30bd\u30fc\u30b9\u30af\u30e9\u30b9\n\nSampleResource.java\npackage hoge.fuga.test.resource;\n\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.MediaType;\n\n@Path(\"/SampleResource\")\npublic class SampleResource {\n\n    @Path(\"/text\")\n    @Produces(MediaType.TEXT_PLAIN)\n    @GET\n    public String getText(){\n        return \"getText\";\n    }\n}\n\n\nweb.xml\u306e\u7de8\u96c6(\u53c2\u8003)\nCXFNonSpringJaxrsServlet\u3092\u4f7f\u7528\n\nweb.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n  xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n  id=\"ihdtool\"\n  version=\"3.0\" >\n\n    <servlet>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <servlet-class>\n            org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet\n        </servlet-class>\n        <init-param>\n            <param-name>jaxrs.serviceClasses</param-name>\n            <param-value>\n                hoge.fuga.test.resource.SampleResource\n             </param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <url-pattern>/rest/*</url-pattern>\n    </servlet-mapping>\n</web-app>\n\n\n\u8d77\u52d5\nTomcat\u3092\u8d77\u52d5\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089http://localhost:8080/[ContextName]/rest/SampleResource/text\u306b\u30a2\u30af\u30bb\u30b9\u3001getText\u3068\u8868\u793a\u3055\u308c\u308c\u3070OK\n\u30ea\u30bd\u30fc\u30b9\u30af\u30e9\u30b9\u306e\u8ffd\u52a0\u306f\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8ffd\u52a0\u3057\u3066\u3044\u304f\n\nweb.xml\n<init-param>\n    <param-name>jaxrs.serviceClasses</param-name>\n    <param-value>\n        hoge.fuga.test.resource.SampleResource,\n        hoge.fuga.test.resource.SampleResource2,\n        hoge.fuga.test.resource.SampleResource3\n     </param-value>\n</init-param>\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u306e\u6307\u5b9a\u3084\u3001hoge.fuga.test.resource.*\u306e\u3088\u3046\u306a\u6307\u5b9a\u65b9\u6cd5\u306f\u3067\u304d\u306a\u3044\n\u81ea\u524d\u306eProvider\u306a\u3093\u304b\u306f\u3001\n\nweb.xml\n<init-param>\n     <param-name>jaxrs.providers</param-name>\n     <param-value>\n         hoge.fuga.test.provider.CustomProvider1,\n         hoge.fuga.test.provider.CustomProvider2           \n     </param-value>\n</init-param>\n\n\n\u3067\u767b\u9332\u3067\u304d\u308b\n\n\u304a\u307e\u3051\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u6307\u5b9a\u3067\u306e\u30ea\u30bd\u30fc\u30b9\u30af\u30e9\u30b9\u767b\u9332\u65b9\u6cd5\njavax.ws.rs.Application\u306e\u81ea\u524d\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30e9\u30b9\u767b\u9332\u3084Provider\u767b\u9332\n\u3092\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd(Jersey\u306eResourceConfig\u30af\u30e9\u30b9\u306e\u3088\u3046\u306a)\nweb.xml\u306e\u7de8\u96c6\n\nweb.xml\n<web-app>\n    <servlet>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <servlet-class>\n            org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet\n        </servlet-class>\n        <init-param>\n            <param-name>javax.ws.rs.Application</param-name>\n            <param-value>\n                hoge.fuga.test.application.MyApplication\n             </param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <url-pattern>/rest/*</url-pattern>\n    </servlet-mapping>\n</web-app>\n\n\n<param-name>javax.ws.rs.Application</param-name>\u3092\u8a2d\u5b9a\nApplication\u30af\u30e9\u30b9\u306e\u4f5c\u6210\n\nMyApplication.java\npackage hoge.fuga.test.application;\n\nimport java.util.Set;\nimport javax.ws.rs.core.Application;\nimport org.reflections.Reflections;\n\npublic class MyApplication extends Application {\n\n    private static Set<Class<?>> resources = null;\n\n    public MyApplication(){\n        String resourcePackage = \"hoge.fuga.test.resource\";\n        Reflections reflection = new Reflections(resourcePackage);\n        resources = reflection.getTypesAnnotatedWith(javax.ws.rs.Path.class);\n    }\n\n    @Override\n    public Set<Class<?>> getClasses(){\n        return resources;\n    }\n}\n\n\n\u6307\u5b9a\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u914d\u4e0b\u306ePath\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6301\u3064\u30af\u30e9\u30b9\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u3001\u30af\u30e9\u30b9Set\u3092\u53d6\u5f97\n\u30af\u30e9\u30b9\u30b9\u30ad\u30e3\u30f3\u306b\u306freflections\u3092\u4f7f\u7528\nJersey\u304c\u8af8\u4e8b\u60c5\u3067\u4f7f\u3048\u305a\u3001Apache CXF\u3092\u4f7f\u7528\u3057\u305fREST\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u969b\u306e\u899a\u66f8\n\n##\u3084\u308b\u3053\u3068\nTomcat8.0 + Apache CXF\u3067\u306eREST\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\n\u203bSpring Framework\u306f\u4f7f\u7528\u3057\u306a\u3044\n\n##Apache CXF\u306b\u3064\u3044\u3066\nJAX-WS, JAX-RS\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\u4eca\u56de\u306f\u4e3b\u306bJAX-RS\n[\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](http://cxf.apache.org/download.html)\u306f\u3053\u3053\u304b\u3089\n\nMaven\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\n\n```xml:pom.xml\n<dependency>\n    <groupId>org.apache.cxf</groupId>\n    <artifactId>cxf-rt-frontend-jaxrs</artifactId>\n    <version>3.1.0</version>\n</dependency>\n```\n\n##\u74b0\u5883\u69cb\u7bc9\nTomcat 8.0\n\n**\u30ea\u30bd\u30fc\u30b9\u30af\u30e9\u30b9**\n\n```java:SampleResource.java\npackage hoge.fuga.test.resource;\n\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.MediaType;\n\t\n@Path(\"/SampleResource\")\npublic class SampleResource {\n\t\n\t@Path(\"/text\")\n\t@Produces(MediaType.TEXT_PLAIN)\n\t@GET\n\tpublic String getText(){\n\t\treturn \"getText\";\n\t}\n}\n```\n\n**web.xml\u306e\u7de8\u96c6[(\u53c2\u8003)](http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-ConfiguringJAX-RSendpointsprogrammaticallywithoutSpring)**\nCXFNonSpringJaxrsServlet\u3092\u4f7f\u7528\n\n```xml:web.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n  xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n  id=\"ihdtool\"\n  version=\"3.0\" >\n\n    <servlet>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <servlet-class>\n            org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet\n        </servlet-class>\n        <init-param>\n            <param-name>jaxrs.serviceClasses</param-name>\n            <param-value>\n                hoge.fuga.test.resource.SampleResource\n             </param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <url-pattern>/rest/*</url-pattern>\n    </servlet-mapping>\n</web-app>\n```\n\n**\u8d77\u52d5**\nTomcat\u3092\u8d77\u52d5\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089[http://localhost:8080/[ContextName]/rest/SampleResource/text](http://localhost:8080/[ContextName]/rest/SampleResource/text)\u306b\u30a2\u30af\u30bb\u30b9\u3001`getText`\u3068\u8868\u793a\u3055\u308c\u308c\u3070OK\n\n\u30ea\u30bd\u30fc\u30b9\u30af\u30e9\u30b9\u306e\u8ffd\u52a0\u306f\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8ffd\u52a0\u3057\u3066\u3044\u304f\n\n```xml:web.xml\n<init-param>\n    <param-name>jaxrs.serviceClasses</param-name>\n    <param-value>\n        hoge.fuga.test.resource.SampleResource,\n        hoge.fuga.test.resource.SampleResource2,\n        hoge.fuga.test.resource.SampleResource3\n     </param-value>\n</init-param>\n```\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u306e\u6307\u5b9a\u3084\u3001`hoge.fuga.test.resource.*`\u306e\u3088\u3046\u306a\u6307\u5b9a\u65b9\u6cd5\u306f\u3067\u304d\u306a\u3044\n\n\u81ea\u524d\u306eProvider\u306a\u3093\u304b\u306f\u3001\n\n```xml:web.xml\n<init-param>\n     <param-name>jaxrs.providers</param-name>\n     <param-value>\n         hoge.fuga.test.provider.CustomProvider1,\n         hoge.fuga.test.provider.CustomProvider2           \n     </param-value>\n</init-param>\n```\n\n\u3067\u767b\u9332\u3067\u304d\u308b\n\n\n##\u304a\u307e\u3051\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u6307\u5b9a\u3067\u306e\u30ea\u30bd\u30fc\u30b9\u30af\u30e9\u30b9\u767b\u9332\u65b9\u6cd5\n`javax.ws.rs.Application`\u306e\u81ea\u524d\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30e9\u30b9\u767b\u9332\u3084Provider\u767b\u9332\n\u3092\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd(Jersey\u306eResourceConfig\u30af\u30e9\u30b9\u306e\u3088\u3046\u306a)\n\n**web.xml\u306e\u7de8\u96c6**\n\n```xml:web.xml\n<web-app>\n    <servlet>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <servlet-class>\n            org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet\n        </servlet-class>\n        <init-param>\n            <param-name>javax.ws.rs.Application</param-name>\n            <param-value>\n                hoge.fuga.test.application.MyApplication\n             </param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>CXFNonSpringJaxrsServlet</servlet-name>\n        <url-pattern>/rest/*</url-pattern>\n    </servlet-mapping>\n</web-app>\n```\n\n`<param-name>javax.ws.rs.Application</param-name>`\u3092\u8a2d\u5b9a\n\n**Application\u30af\u30e9\u30b9\u306e\u4f5c\u6210**\n\n```java:MyApplication.java\npackage hoge.fuga.test.application;\n\nimport java.util.Set;\nimport javax.ws.rs.core.Application;\nimport org.reflections.Reflections;\n\npublic class MyApplication extends Application {\n\n    private static Set<Class<?>> resources = null;\n\n    public MyApplication(){\n        String resourcePackage = \"hoge.fuga.test.resource\";\n        Reflections reflection = new Reflections(resourcePackage);\n        resources = reflection.getTypesAnnotatedWith(javax.ws.rs.Path.class);\n    }\n\n    @Override\n    public Set<Class<?>> getClasses(){\n        return resources;\n    }\n}\n```\n\n\u6307\u5b9a\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u914d\u4e0b\u306ePath\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6301\u3064\u30af\u30e9\u30b9\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u3001\u30af\u30e9\u30b9Set\u3092\u53d6\u5f97\n\u30af\u30e9\u30b9\u30b9\u30ad\u30e3\u30f3\u306b\u306f[reflections](https://code.google.com/p/reflections/)\u3092\u4f7f\u7528\n\n"}