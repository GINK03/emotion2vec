{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u524d\u56de\u4f5c\u6210\u3057\u305fC\u3067\u4f5c\u308bOSX\u306e\u30ad\u30fc\u30ed\u30ac\u30fc\u3067\u8a18\u9332\u3057\u305f\u30ed\u30b0\u3092\u6642\u7cfb\u5217\u3067\u8868\u793a\u3057\u3066\u307f\u308b\u3002\n\n\u30ed\u30b0\u306e\u5f62\u5f0f\n\u524d\u56de\u4f5c\u6210\u3057\u305f\u30ad\u30fc\u30ed\u30ac\u30fc\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3068\u62bc\u4e0b\u3055\u308c\u305f\u30ad\u30fc\u30b3\u30fc\u30c9\u306e\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n$ head -n 5 keystrokes.log \n1401328736 124\n1401328737 125\n1401328737 44\n1401328737 44\n1401328738 1\n\n\nRuby\u30671\u5206\u3054\u3068\u306e\u30ad\u30fc\u62bc\u4e0b\u6570\u3092\u30ab\u30a6\u30f3\u30c8\nTime#strftime\u3067\u5206\u307e\u3067\u5207\u308a\u51fa\u3057\u3066\u305d\u308c\u3092hash\u3068eql?\u3067\u4f7f\u3044\u56de\u3057\u3066\u6a2a\u7740\u3057\u305f\u3002\n\nkeystrokes.rb\nrequire 'date'\n\nclass Rank\n\n  attr_reader :time\n\n  def initialize(time)\n    @time = time\n  end\n\n  def to_s\n    @time.strftime(\"%Y-%m-%d %H:%M\")\n  end\n\n  def hash\n    @hash ||= to_s.hash\n  end\n\n  def eql?(other)\n    self.hash == other.hash\n  end\n\nend\n\n{}.tap{ |ranks|\n  ARGF.readlines.each{ |line|\n    time = DateTime.strptime(line.split.first, '%s').to_time\n    rank = Rank.new(time)\n    ranks[rank] ||= 0\n    ranks[rank] += 1\n  }\n}.to_a.sort_by{ |rank|\n  rank[0].time\n}.each{ |number, rank|\n  puts \"#{rank.to_s}\\t#{number}\"\n}\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\ncat keystrokes.log | ruby keystrokes.rb | head -n 5\n5   2014-05-29 10:58\n122 2014-05-29 10:59\n105 2014-05-29 11:00\n60  2014-05-29 11:01\n62  2014-05-29 11:02\n\n\u3075\u3080\u3002\n\nGnuplot\u306b\u98df\u308f\u305b\u308b\nplot\u306b<\u3092\u4f7f\u3046\u3068\u98df\u3079\u3066\u304f\u308c\u308b\u3002\n\nkeystrokes.plt\nset xdata time\nset timefmt \"%Y-%m-%d %H:%M\"\nset xtics format \"%H\"\nset xtics 60*60\n\nset grid\nset style fill solid\nset xlabel \"Timeline.\"\nset ylabel \"The number of keystrokes.\"\n\nset terminal png\nset output \"keystrokes.png\"\n\nplot \"<cat keystrokse.log | ruby keystrokes.rb\" using 2:1:1 with i lc rgb \"royalblue\" notitle\n\n\n\u3053\u308c\u3092Gnuplot\u3067\u5b9f\u884c\u3059\u308b\u3002\n$ gnuplot keystrokes.plt\n\n\n\u7d50\u679c\n(\u00b4\uff61\uff65\u03c9\uff65\uff61)<\u9032\u6357\u3069\u3046\u3067\u3059\u304b\u2026\u3002\n\n# \u6982\u8981\n\n\u524d\u56de\u4f5c\u6210\u3057\u305f[C\u3067\u4f5c\u308bOSX\u306e\u30ad\u30fc\u30ed\u30ac\u30fc](http://qiita.com/61503891/items/4ae3ae64b2531b516321)\u3067\u8a18\u9332\u3057\u305f\u30ed\u30b0\u3092\u6642\u7cfb\u5217\u3067\u8868\u793a\u3057\u3066\u307f\u308b\u3002\n\n# \u30ed\u30b0\u306e\u5f62\u5f0f\n\n\u524d\u56de\u4f5c\u6210\u3057\u305f\u30ad\u30fc\u30ed\u30ac\u30fc\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3068\u62bc\u4e0b\u3055\u308c\u305f\u30ad\u30fc\u30b3\u30fc\u30c9\u306e\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n\n```shell-session\n$ head -n 5 keystrokes.log \n1401328736 124\n1401328737 125\n1401328737 44\n1401328737 44\n1401328738 1\n```\n\n# Ruby\u30671\u5206\u3054\u3068\u306e\u30ad\u30fc\u62bc\u4e0b\u6570\u3092\u30ab\u30a6\u30f3\u30c8\n\n`Time#strftime`\u3067\u5206\u307e\u3067\u5207\u308a\u51fa\u3057\u3066\u305d\u308c\u3092`hash`\u3068`eql?`\u3067\u4f7f\u3044\u56de\u3057\u3066\u6a2a\u7740\u3057\u305f\u3002\n\n```rb:keystrokes.rb\nrequire 'date'\n\nclass Rank\n\n  attr_reader :time\n\n  def initialize(time)\n    @time = time\n  end\n\n  def to_s\n    @time.strftime(\"%Y-%m-%d %H:%M\")\n  end\n\n  def hash\n    @hash ||= to_s.hash\n  end\n\n  def eql?(other)\n    self.hash == other.hash\n  end\n\nend\n\n{}.tap{ |ranks|\n  ARGF.readlines.each{ |line|\n    time = DateTime.strptime(line.split.first, '%s').to_time\n    rank = Rank.new(time)\n    ranks[rank] ||= 0\n    ranks[rank] += 1\n  }\n}.to_a.sort_by{ |rank|\n  rank[0].time\n}.each{ |number, rank|\n  puts \"#{rank.to_s}\\t#{number}\"\n}\n```\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\n```shell-session\ncat keystrokes.log | ruby keystrokes.rb | head -n 5\n5\t2014-05-29 10:58\n122\t2014-05-29 10:59\n105\t2014-05-29 11:00\n60\t2014-05-29 11:01\n62\t2014-05-29 11:02\n```\n\n\u3075\u3080\u3002\n\n# Gnuplot\u306b\u98df\u308f\u305b\u308b\n\n`plot`\u306b`<`\u3092\u4f7f\u3046\u3068\u98df\u3079\u3066\u304f\u308c\u308b\u3002\n\n```gnuplot:keystrokes.plt\nset xdata time\nset timefmt \"%Y-%m-%d %H:%M\"\nset xtics format \"%H\"\nset xtics 60*60\n\nset grid\nset style fill solid\nset xlabel \"Timeline.\"\nset ylabel \"The number of keystrokes.\"\n\nset terminal png\nset output \"keystrokes.png\"\n\nplot \"<cat keystrokse.log | ruby keystrokes.rb\" using 2:1:1 with i lc rgb \"royalblue\" notitle\n```\n\n\u3053\u308c\u3092Gnuplot\u3067\u5b9f\u884c\u3059\u308b\u3002\n\n```shell-session\n$ gnuplot keystrokes.plt\n```\n\n# \u7d50\u679c\n\n(\u00b4\uff61\uff65\u03c9\uff65\uff61)<\u9032\u6357\u3069\u3046\u3067\u3059\u304b\u2026\u3002\n\n![keystrokes.png](https://qiita-image-store.s3.amazonaws.com/0/32894/5ae8c631-d2a3-3f00-d7e6-7d4668d6d46d.png)\n", "tags": ["gnuplot", "Ruby", "Mac", "MacOSX"]}