{"context": " More than 1 year has passed since last update.Django\u3067\u7c21\u5358\u306aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u307e\u3067\u306e\u307e\u3068\u3081\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059.\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5207\u308a\u66ff\u3048\nDjango\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067SQLite3\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u7528\u3044\u307e\u3059.\u3051\u308c\u3069\u3082Heroku\u3067\u306fSQLite3\u4f7f\u3048\u306a\u3044.\n\u305d\u3053\u3067Heroku\u3092\u672c\u756a\u74b0\u5883\u3068\u60f3\u5b9a\u3057\u958b\u767a\u74b0\u5883\u3067\u306fSQLite\u3092, Heroku\u3067\u306fPostgres\u3092\u4f7f\u3046\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u4fbf\u5229\u3067\u3059.\n\u307e\u305a, \n$ pip install dj_database_url\n$ pip freeze > requirements.txt\n\n\u3067\u5fc5\u8981\u306a\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059.\n\u6b21\u306bsettings.py\u3092\u958b\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059.\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n\n# update db settings\nimport dj_database_url\ndb_from_env = dj_database_url.config(conn_max_age=400)\nDATABASES['default'].update(db_from_env)\n\n\u3042\u3068\u306fHeroku\u306eAdd-on\u3092\u63a2\u3057\u3066Postgres\u3092\u5165\u308c\u3066\u304a\u304d\u307e\u3059.\n\u307e\u305fPostgres\u3092Python\u5074\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059.\n$ pip install psycopg2\n$ pip freeze > requirements.txt\n\n\u5225\u306b\u958b\u767a\u74b0\u5883\u3067Postgres\u3092\u4f7f\u308f\u306a\u3044\u4eba\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u7121\u3044\u306e\u3067requirements.txt\u306b\u8ffd\u8a18\u3057\u3066\u304a\u304f\u3060\u3051\u3067\u3082\n\u6700\u5f8c\u306bHeroku\u306bpush\u3057\u3066DB\u3092\u69cb\u7bc9.\n$ git push heroku master\n$ heroku run python manage.py migrate\n\n\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3088\u3046\u3068\u3059\u308b\u3068staticfile\u304c\u3069\u3046\u306e\u3053\u3046\u306e\u3068\u8a00\u308f\u308c\u308b\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u901a\u308a\u306b\u9032\u3081\u308c\u3070\u554f\u984c\u306a\u304f\u89e3\u6c7a\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059.\n\n\u672c\u756a\u74b0\u5883\u3067\u306fDEBUG = False\u306b\u3057\u305f\u3044\n\u5f53\u305f\u308a\u524d\u3067\u3059\u306d.\u3057\u304b\u3057\u8abf\u3079\u3066\u307f\u3066\u3082\u3042\u307e\u308a\u89e3\u6c7a\u65b9\u6cd5\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f.\u305d\u3053\u3067\u79c1\u306f\u74b0\u5883\u5909\u6570PRODUCTION\u3092\u8a2d\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059.\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = (os.environ.get('PRODUCTION') != 'True')\nTEMPLATE_DEBUG = (os.environ.get('PRODUCTION') != 'True')\n\nHeroku\u5074\u3067 Settings >> Config Variables \u306b PRODUCTION = True\u3068\u8ffd\u52a0\u3057\u305f\u306e\u3067Heroku\u5074\u3067\u306f\u30c7\u30d0\u30c3\u30b0\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3059.\n\n\nPython app detected \u3068\u306a\u3089\u306a\u3044\n\u305f\u307e\u306b\u3042\u308b\u305d\u3046\u3067\u3059\u306d.\u305d\u3093\u306a\u3068\u304d\u306fBuildpack\u3092\u8a2d\u5b9a\u3057\u307e\u3059.\n$ heroku buildpacks:set git://github.com/heroku/heroku-buildpack-python.git --app <APP NAME>\n\n\nPython\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u56fa\u5b9a\u3059\u308b\nruntime.txt\u3092\u66f8\u304d\u307e\u3059.\u4f8b\u3048\u3070Python 3.5.1\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\n\nruntime.txt\npython-3.5.1\n\n\n\u306e\u3088\u3046\u306b\u66f8\u304f\u3060\u3051\u3067\u3059.\n\n\u30c7\u30d7\u30ed\u30a4\u306f\u6210\u529f\u3057\u3066\u3044\u308b\u306e\u306bApplication Error\nHeroku\u306e\u4ed5\u69d8\u3067Web\u30d7\u30ed\u30bb\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3042\u3052\u306a\u3044\u3068Web\u30a2\u30d7\u30ea\u81ea\u4f53\u304c\u8d77\u52d5\u3057\u307e\u305b\u3093.\n$ heroku ps:scale web=1\n\n\u3067\u8d77\u52d5.1\u3088\u308a\u5927\u304d\u3044\u5024\u306b\u3059\u308b\u3068Heroku\u306e\u8ab2\u91d1\u5bfe\u8c61\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f.\n\u3042\u3068\u306fheroku logs \u306a\u3069\u3092\u4f7f\u3063\u3066\u30ed\u30b0\u3092\u898b\u3066\u304a\u304f\u3068\u3069\u3053\u3067\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u3066\u3044\u308b\u306e\u304b\u53c2\u8003\u306b\u306a\u308a\u307e\u3059.\n\u53c2\u8003\u306b\u306a\u308c\u3070\u79c1\u304c\u66f8\u3044\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304cGitHub\u306b\u3042\u308b\u306e\u3067\u898b\u3066\u304f\u3060\u3055\u3044.\nhttps://github.com/jtwp470/codecheck-971/\n\n\u53c2\u8003\n\nGitHub: heroku/heroku-django-template\nConfiguring Django Apps for Heroku\nHeroku Buildpack: Python\n\nDjango\u3067\u7c21\u5358\u306aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u307e\u3067\u306e\u307e\u3068\u3081\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059.\n\n## \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5207\u308a\u66ff\u3048\nDjango\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067SQLite3\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u7528\u3044\u307e\u3059.\u3051\u308c\u3069\u3082Heroku\u3067\u306fSQLite3\u4f7f\u3048\u306a\u3044.\n\u305d\u3053\u3067Heroku\u3092\u672c\u756a\u74b0\u5883\u3068\u60f3\u5b9a\u3057\u958b\u767a\u74b0\u5883\u3067\u306fSQLite\u3092, Heroku\u3067\u306fPostgres\u3092\u4f7f\u3046\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u4fbf\u5229\u3067\u3059.\n\n\u307e\u305a, \n\n```bash\n$ pip install dj_database_url\n$ pip freeze > requirements.txt\n```\n\n\u3067\u5fc5\u8981\u306a\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059.\n\n\u6b21\u306bsettings.py\u3092\u958b\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059.\n\n```py\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n\n# update db settings\nimport dj_database_url\ndb_from_env = dj_database_url.config(conn_max_age=400)\nDATABASES['default'].update(db_from_env)\n```\n\n\u3042\u3068\u306fHeroku\u306eAdd-on\u3092\u63a2\u3057\u3066Postgres\u3092\u5165\u308c\u3066\u304a\u304d\u307e\u3059.\n\n\u307e\u305fPostgres\u3092Python\u5074\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059.\n\n```bash\n$ pip install psycopg2\n$ pip freeze > requirements.txt\n```\n\n\u5225\u306b\u958b\u767a\u74b0\u5883\u3067Postgres\u3092\u4f7f\u308f\u306a\u3044\u4eba\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u7121\u3044\u306e\u3067requirements.txt\u306b\u8ffd\u8a18\u3057\u3066\u304a\u304f\u3060\u3051\u3067\u3082:ok_hand:\n\n\u6700\u5f8c\u306bHeroku\u306bpush\u3057\u3066DB\u3092\u69cb\u7bc9.\n\n```bash\n$ git push heroku master\n$ heroku run python manage.py migrate\n```\n\n\n## Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3088\u3046\u3068\u3059\u308b\u3068staticfile\u304c\u3069\u3046\u306e\u3053\u3046\u306e\u3068\u8a00\u308f\u308c\u308b\n[\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://devcenter.heroku.com/articles/django-app-configuration#static-assets-and-file-serving)\u901a\u308a\u306b\u9032\u3081\u308c\u3070\u554f\u984c\u306a\u304f\u89e3\u6c7a\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059.\n\n## \u672c\u756a\u74b0\u5883\u3067\u306fDEBUG = False\u306b\u3057\u305f\u3044\n\u5f53\u305f\u308a\u524d\u3067\u3059\u306d.\u3057\u304b\u3057\u8abf\u3079\u3066\u307f\u3066\u3082\u3042\u307e\u308a\u89e3\u6c7a\u65b9\u6cd5\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f.\u305d\u3053\u3067\u79c1\u306f\u74b0\u5883\u5909\u6570`PRODUCTION`\u3092\u8a2d\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059.\n\n```py\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = (os.environ.get('PRODUCTION') != 'True')\nTEMPLATE_DEBUG = (os.environ.get('PRODUCTION') != 'True')\n```\n\nHeroku\u5074\u3067 `Settings >> Config Variables` \u306b `PRODUCTION = True`\u3068\u8ffd\u52a0\u3057\u305f\u306e\u3067Heroku\u5074\u3067\u306f\u30c7\u30d0\u30c3\u30b0\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3059.\n\n![Screen Shot 2016-02-15 at 14.50.09.png](https://qiita-image-store.s3.amazonaws.com/0/27298/cd028f00-1dae-780d-b4a0-19ba81abd731.png)\n\n## Python app detected \u3068\u306a\u3089\u306a\u3044\n\u305f\u307e\u306b\u3042\u308b\u305d\u3046\u3067\u3059\u306d.\u305d\u3093\u306a\u3068\u304d\u306fBuildpack\u3092\u8a2d\u5b9a\u3057\u307e\u3059.\n\n```bash\n$ heroku buildpacks:set git://github.com/heroku/heroku-buildpack-python.git --app <APP NAME>\n```\n\n## Python\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u56fa\u5b9a\u3059\u308b\nruntime.txt\u3092\u66f8\u304d\u307e\u3059.\u4f8b\u3048\u3070Python 3.5.1\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\n\n```runtime.txt\npython-3.5.1\n```\n\n\u306e\u3088\u3046\u306b\u66f8\u304f\u3060\u3051\u3067\u3059.\n\n## \u30c7\u30d7\u30ed\u30a4\u306f\u6210\u529f\u3057\u3066\u3044\u308b\u306e\u306bApplication Error\nHeroku\u306e\u4ed5\u69d8\u3067Web\u30d7\u30ed\u30bb\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3042\u3052\u306a\u3044\u3068Web\u30a2\u30d7\u30ea\u81ea\u4f53\u304c\u8d77\u52d5\u3057\u307e\u305b\u3093.\n\n```bash\n$ heroku ps:scale web=1\n```\n\n\u3067\u8d77\u52d5.1\u3088\u308a\u5927\u304d\u3044\u5024\u306b\u3059\u308b\u3068Heroku\u306e\u8ab2\u91d1\u5bfe\u8c61\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f.\n\n\u3042\u3068\u306f`heroku logs` \u306a\u3069\u3092\u4f7f\u3063\u3066\u30ed\u30b0\u3092\u898b\u3066\u304a\u304f\u3068\u3069\u3053\u3067\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u3066\u3044\u308b\u306e\u304b\u53c2\u8003\u306b\u306a\u308a\u307e\u3059.\n\n\u53c2\u8003\u306b\u306a\u308c\u3070\u79c1\u304c\u66f8\u3044\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304cGitHub\u306b\u3042\u308b\u306e\u3067\u898b\u3066\u304f\u3060\u3055\u3044.\n\nhttps://github.com/jtwp470/codecheck-971/\n\n## \u53c2\u8003\n\n* [GitHub: heroku/heroku-django-template](https://github.com/heroku/heroku-django-template)\n* [Configuring Django Apps for Heroku](https://devcenter.heroku.com/articles/django-app-configuration)\n* [Heroku Buildpack: Python](https://github.com/heroku/heroku-buildpack-python)\n", "tags": ["Python", "Django", "Heroku", "PostgreSQL", "SQLite3"]}