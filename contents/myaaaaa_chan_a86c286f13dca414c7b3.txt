{"context": " More than 1 year has passed since last update.Zabbix\u3067Couchbase\u3092\u76e3\u8996\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n(\u65e2\u5b58\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u6709\u308a\u305d\u3046\u3067\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30fb\u30fb\u30fb)\nhttps://github.com/myaaaaa-chan/zabbix-couchbase-template \n\u203b\u307e\u3060\u904b\u7528\u3067\u4f7f\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30a2\u30a4\u30c6\u30e0\u306e\u5185\u5bb9\u3084\u30c8\u30ea\u30ac\u30fc\u306e\u8a2d\u5b9a\u306f\u898b\u76f4\u3059\u3079\u304d\u3068\u3053\u308d\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n\nUsage - \u4f7f\u3044\u65b9\n1.Userparameter\u306e\u8a2d\u5b9a\nuserparamter_couchbase.conf\u3092\u76e3\u8996\u5bfe\u8c61\u306e\u30b5\u30fc\u30d0\u306e/etc/zabbix/zabbix/zabbix_agentd.d/\u306b\u914d\u7f6e\u3059\u308b\n\u203b\u5916\u90e8\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306bzabbixagent.conf\u306eEnableRemoteCommands\u30921\u306b\u8a2d\u5b9a\u3059\u308b_\n2.sudoers\u306e\u8a2d\u5b9a\n\u76e3\u8996\u306b\u306fcouchbase-cli\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001zabbix\u30e6\u30fc\u30b6\u304ccouchbase-cli\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b  \n$ visudo\n#Defaults    requiretty\n\nzabbix ALL=(root) NOPASSWD: /opt/couchbase/bin/couchbase-cli\n\n3.\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\nZabbix\u306bzbx_couchbase_templates.xml\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\n4.\u30de\u30af\u30ed\u3092\u8a2d\u5b9a\u3059\u308b\n\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u306b\u4ee5\u4e0b\u306e\u30de\u30af\u30ed\u3092\u8a2d\u5b9a\u3059\u308b\n\n{$USERNAME} -> \u7ba1\u7406\u7528\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u540d\n{$PASSWORD} -> \u7ba1\u7406\u7528\u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9\n{$BUCKET} -> \u7ba1\u7406\u5bfe\u8c61\u30d0\u30b1\u30c3\u30c8\u540d\n{$HDD_INDEX} -> \u76e3\u8996\u5bfe\u8c61HDD\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(ex. 0)\n{$SSD_INDEX} -> \u76e3\u8996\u5bfe\u8c61SSD\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(ex. 0)\n\n\nMonitoring Items - \u76e3\u8996\u9805\u76ee\n\n\n\n\u540d\u524d\n\u30ad\u30fc\n\u5185\u5bb9\n\n\n\n\nBucket item count\ncb.bucket.items[{$USERNAME},{$PASSWORD},{$BUCKET}]\n\u30d0\u30b1\u30c3\u30c8\u5185\u306e\u30a2\u30a4\u30c6\u30e0\u306e\u6570\n\n\nBucket name\ncb.bucket.name[{$USERNAME},{$PASSWORD},{$BUCKET}]\n\u76e3\u8996\u5bfe\u8c61\u30d0\u30b1\u30c3\u30c8\u540d\n\n\nBucket ops\ncb.bucket.ops[{$USERNAME},{$PASSWORD},{$BUCKET}]\n\u76e3\u8996\u5bfe\u8c61\u30d0\u30b1\u30c3\u30c8\u3078\u306eOPS\n\n\nBucket used(percent)\ncb.bucket.quotapercent[{$USERNAME},{$PASSWORD},{$BUCKET}]\n\u30d0\u30b1\u30c3\u30c8\u4f7f\u7528\u91cf(%)\n\n\nBucket size\ncb.bucket.size[{$USERNAME},{$PASSWORD},{$BUCKET}]\n\u30d0\u30b1\u30c3\u30c8\u30b5\u30a4\u30ba\n\n\nBucket type\ncb.bucket.type[{$USERNAME},{$PASSWORD},{$BUCKET}]\n\u30d0\u30b1\u30c3\u30c8\u30bf\u30a4\u30d7(couchbase or memcache)\n\n\nCluster status\ncb.cluster.membership[{$USERNAME},{$PASSWORD}]\n\u30af\u30e9\u30b9\u30bf\u30b9\u30c6\u30fc\u30bf\u30b9(active or not)\n\n\nHdd free\ncb.hdd.free[{$USERNAME},{$PASSWORD},{$HDD_INDEX}]\nHDD\u7a7a\u304d\u5bb9\u91cf\n\n\nHdd quota total\ncb.hdd.quotatotal[{$USERNAME},{$PASSWORD},{$HDD_INDEX}]\nHDD Quota\n\n\nHdd total\ncb.hdd.total[{$USERNAME},{$PASSWORD},{$HDD_INDEX}]\nHDD\u5bb9\u91cf\n\n\nHdd used by data\ncb.hdd.usedbydata[{$USERNAME},{$PASSWORD}]\nHDD\u4f7f\u7528\u91cf\n\n\nRam quota total\ncb.ram.quotatotal[{$USERNAME},{$PASSWORD}]\n\u30e1\u30e2\u30ea\u30fc quota\n\n\nRam quota used\ncb.ram.quotaused[{$USERNAME},{$PASSWORD}]\n\u30e1\u30e2\u30ea\u30fc quota\n\n\nRam total\ncb.ram.total[{$USERNAME},{$PASSWORD}]\n\u30e1\u30e2\u30ea\u30fc\u5bb9\u91cf\n\n\nRam used\ncb.ram.used[{$USERNAME},{$PASSWORD}]\n\u30e1\u30e2\u30ea\u30fc\u4f7f\u7528\u91cf\n\n\nData index path on HDD\ncb.strage.hdd.indexpath[{$USERNAME},{$PASSWORD},{$HDD_INDEX}]\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u683c\u7d0d\u30d1\u30b9\n\n\nData index path on HDD\ncb.strage.hdd.indexpath[{$USERNAME},{$PASSWORD},{$HDD_INDEX}]\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u683c\u7d0d\u30d1\u30b9\n\n\nData path on SSD\ncb.strage.ssd.datapath[{$USERNAME},{$PASSWORD},{$SSD_INDEX}]\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u683c\u7d0d\u30d1\u30b9\n\n\nData index path on SSD\ncb.strage.ssd.indexpath[{$USERNAME},{$PASSWORD},{$SSD_INDEX}]\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u683c\u7d0d\u30d1\u30b9\n\n\nVersion of Couchbase running\ncb.version[{$USERNAME},{$PASSWORD}]\nCouchbase\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\nCouchbase running status\nnet.tcp.listen[11210]\nCouchbase\u30b9\u30c6\u30fc\u30bf\u30b9(1:OK,2:NG)\n\n\n\n\nTrigger - \u30c8\u30ea\u30ac\u30fc\n\n\n\n\u540d\u524d\n\u6df1\u523b\u5ea6\n\u5185\u5bb9\n\n\n\n\nLack of free bucket quota warning on server {HOST.NAME}\n\u8b66\u544a\n\u30d0\u30b1\u30c3\u30c8\u306e\u7a7a\u304d\u5bb9\u91cf\u304c30%\u672a\u6e80\u306b\u306a\u3063\u305f\u5834\u5408\u306b\u8b66\u544a\n\n\nLack of free bucket quota on server {HOST.NAME}\n\u8efd\u5ea6\u306e\u969c\u5bb3\n\u30d0\u30b1\u30c3\u30c8\u306e\u7a7a\u304d\u5bb9\u91cf\u304c10%\u672a\u6e80\u306b\u306a\u3063\u305f\u5834\u5408\u306b\u8b66\u544a\n\n\nCouchbase status is not healthy\n\u91cd\u5ea6\u306e\u969c\u5bb3\n\u30b9\u30c6\u30fc\u30bf\u30b9\u304chelthy\u4ee5\u5916\u306b\u306a\u3063\u305f\u3089\u8b66\u544a\n\n\nCouchbase process is not running.\n\u81f4\u547d\u7684\u306a\u969c\u5bb3\ntcp:11210\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u3089\u8b66\u544a\n\n\n\n\u3000\n\nZabbix\u3067Couchbase\u3092\u76e3\u8996\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n(\u65e2\u5b58\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u6709\u308a\u305d\u3046\u3067\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30fb\u30fb\u30fb)\n\n[https://github.com/myaaaaa-chan/zabbix-couchbase-template](https://github.com/myaaaaa-chan/zabbix-couchbase-template \"zabbix-couchbase-template\")  \n\n*\u203b\u307e\u3060\u904b\u7528\u3067\u4f7f\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30a2\u30a4\u30c6\u30e0\u306e\u5185\u5bb9\u3084\u30c8\u30ea\u30ac\u30fc\u306e\u8a2d\u5b9a\u306f\u898b\u76f4\u3059\u3079\u304d\u3068\u3053\u308d\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093*\n  \n##Usage - \u4f7f\u3044\u65b9\n\n**1.Userparameter\u306e\u8a2d\u5b9a**\n\nuserparamter_couchbase.conf\u3092\u76e3\u8996\u5bfe\u8c61\u306e\u30b5\u30fc\u30d0\u306e/etc/zabbix/zabbix/zabbix_agentd.d/\u306b\u914d\u7f6e\u3059\u308b\n_\u203b\u5916\u90e8\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306bzabbix_agent.conf\u306eEnableRemoteCommands\u30921\u306b\u8a2d\u5b9a\u3059\u308b_\n\n**2.sudoers\u306e\u8a2d\u5b9a**\n\n\u76e3\u8996\u306b\u306fcouchbase-cli\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001zabbix\u30e6\u30fc\u30b6\u304ccouchbase-cli\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b  \n\n$ visudo\n\n```\n#Defaults    requiretty\n\nzabbix ALL=(root) NOPASSWD: /opt/couchbase/bin/couchbase-cli\n```\n\n**3.\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8**\nZabbix\u306bzbx_couchbase_templates.xml\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\n\n**4.\u30de\u30af\u30ed\u3092\u8a2d\u5b9a\u3059\u308b**\n\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u306b\u4ee5\u4e0b\u306e\u30de\u30af\u30ed\u3092\u8a2d\u5b9a\u3059\u308b\n\n* {$USERNAME} -> \u7ba1\u7406\u7528\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u540d\n* {$PASSWORD} -> \u7ba1\u7406\u7528\u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9\n* {$BUCKET} -> \u7ba1\u7406\u5bfe\u8c61\u30d0\u30b1\u30c3\u30c8\u540d\n* {$HDD_INDEX} -> \u76e3\u8996\u5bfe\u8c61HDD\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(ex. 0)\n* {$SSD_INDEX} -> \u76e3\u8996\u5bfe\u8c61SSD\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(ex. 0)\n\n\n##Monitoring Items - \u76e3\u8996\u9805\u76ee\n\n\n| \u540d\u524d  | \u30ad\u30fc  | \u5185\u5bb9 |\n|:-----------|:------------|:------------|\n| Bucket item count | cb.bucket.items[{$USERNAME},{$PASSWORD},{$BUCKET}] | \u30d0\u30b1\u30c3\u30c8\u5185\u306e\u30a2\u30a4\u30c6\u30e0\u306e\u6570 |\n| Bucket name | cb.bucket.name[{$USERNAME},{$PASSWORD},{$BUCKET}] | \u76e3\u8996\u5bfe\u8c61\u30d0\u30b1\u30c3\u30c8\u540d |\n| Bucket ops | cb.bucket.ops[{$USERNAME},{$PASSWORD},{$BUCKET}] | \u76e3\u8996\u5bfe\u8c61\u30d0\u30b1\u30c3\u30c8\u3078\u306eOPS |\n| Bucket used(percent) | cb.bucket.quotapercent[{$USERNAME},{$PASSWORD},{$BUCKET}] | \u30d0\u30b1\u30c3\u30c8\u4f7f\u7528\u91cf(%) |\n| Bucket size | cb.bucket.size[{$USERNAME},{$PASSWORD},{$BUCKET}] | \u30d0\u30b1\u30c3\u30c8\u30b5\u30a4\u30ba |\n| Bucket type | cb.bucket.type[{$USERNAME},{$PASSWORD},{$BUCKET}] | \u30d0\u30b1\u30c3\u30c8\u30bf\u30a4\u30d7(couchbase or memcache) |\n| Cluster status | cb.cluster.membership[{$USERNAME},{$PASSWORD}] | \u30af\u30e9\u30b9\u30bf\u30b9\u30c6\u30fc\u30bf\u30b9(active or not) |\n| Hdd free | cb.hdd.free[{$USERNAME},{$PASSWORD},{$HDD_INDEX}] | HDD\u7a7a\u304d\u5bb9\u91cf |\n| Hdd quota total | cb.hdd.quotatotal[{$USERNAME},{$PASSWORD},{$HDD_INDEX}] | HDD Quota |\n| Hdd total | cb.hdd.total[{$USERNAME},{$PASSWORD},{$HDD_INDEX}] | HDD\u5bb9\u91cf |\n| Hdd used by data | cb.hdd.usedbydata[{$USERNAME},{$PASSWORD}] | HDD\u4f7f\u7528\u91cf |\n| Ram quota total | cb.ram.quotatotal[{$USERNAME},{$PASSWORD}] | \u30e1\u30e2\u30ea\u30fc quota |\n| Ram quota used | cb.ram.quotaused[{$USERNAME},{$PASSWORD}] | \u30e1\u30e2\u30ea\u30fc quota |\n| Ram total | cb.ram.total[{$USERNAME},{$PASSWORD}] | \u30e1\u30e2\u30ea\u30fc\u5bb9\u91cf |\n| Ram used | cb.ram.used[{$USERNAME},{$PASSWORD}] | \u30e1\u30e2\u30ea\u30fc\u4f7f\u7528\u91cf |\n| Data index path on HDD | cb.strage.hdd.indexpath[{$USERNAME},{$PASSWORD},{$HDD_INDEX}] | \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u683c\u7d0d\u30d1\u30b9 |\n| Data index path on HDD | cb.strage.hdd.indexpath[{$USERNAME},{$PASSWORD},{$HDD_INDEX}] | \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u683c\u7d0d\u30d1\u30b9 |\n| Data path on SSD | cb.strage.ssd.datapath[{$USERNAME},{$PASSWORD},{$SSD_INDEX}] | \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u683c\u7d0d\u30d1\u30b9 |\n| Data index path on SSD | cb.strage.ssd.indexpath[{$USERNAME},{$PASSWORD},{$SSD_INDEX}] | \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u683c\u7d0d\u30d1\u30b9 |\n| Version of Couchbase running | cb.version[{$USERNAME},{$PASSWORD}] | Couchbase\u30d0\u30fc\u30b8\u30e7\u30f3 |\n| Couchbase running status | net.tcp.listen[11210] | Couchbase\u30b9\u30c6\u30fc\u30bf\u30b9(1:OK,2:NG) |\n\n##Trigger - \u30c8\u30ea\u30ac\u30fc\n\n| \u540d\u524d  | \u6df1\u523b\u5ea6 | \u5185\u5bb9 |\n|:-----------|:------------|:------------|\n| Lack of free bucket quota warning on server {HOST.NAME} | \u8b66\u544a | \u30d0\u30b1\u30c3\u30c8\u306e\u7a7a\u304d\u5bb9\u91cf\u304c30%\u672a\u6e80\u306b\u306a\u3063\u305f\u5834\u5408\u306b\u8b66\u544a |\n| Lack of free bucket quota on server {HOST.NAME} | \u8efd\u5ea6\u306e\u969c\u5bb3 | \u30d0\u30b1\u30c3\u30c8\u306e\u7a7a\u304d\u5bb9\u91cf\u304c10%\u672a\u6e80\u306b\u306a\u3063\u305f\u5834\u5408\u306b\u8b66\u544a |\n| Couchbase status is not healthy | \u91cd\u5ea6\u306e\u969c\u5bb3 | \u30b9\u30c6\u30fc\u30bf\u30b9\u304chelthy\u4ee5\u5916\u306b\u306a\u3063\u305f\u3089\u8b66\u544a |\n| Couchbase process is not running. | \u81f4\u547d\u7684\u306a\u969c\u5bb3 | tcp:11210\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u3089\u8b66\u544a |\n\u3000\n", "tags": ["Couchbase", "zabbix"]}