{"context": "MaxScale\u3067Read/Write split\u3092\u4f7f\u3063\u3066\u3044\u305f\u304c\u3001AWS\u306eAurora\u306b\u3057\u305f\u3068\u3053\u308d\nmaster\u3001slave\u306e\u5224\u65ad\u3092MaxScale\u306e\u65b9\u3067\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u306e\u3067maxscale\u8d77\u52d5\u6642\u306bmaster,slave\u8a2d\u5b9a\u3092\u624b\u52d5\u3067\u884c\u3046\u3002\n\nmaxscale.conf\nmaster\u3068slave(Aurora\u3060\u3068writer\u3001reader)\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u306e\u7b87\u6240\n[m_shard1]\ntype=server\naddress=server-1\nport=3306\nprotocol=MySQLBackend\n\n[s_shard1]\ntype=server\naddress=server-2\nport=3306\nprotocol=MySQLBackend\n\n\nmaxscale_start.sh\nserver\u540d\u306e\u5148\u982d\u304cm_\u3060\u3063\u305f\u3089master\u3001s_\u3060\u3063\u305f\u3089slave\u3068\u3059\u308b\u3002\nmaxscale\nsleep 5\nfor server in `maxadmin list servers | grep 3306 | awk '{print $1}'`\ndo\n  i=`echo $server | cut -c 1`\n  [ \"x$i\" = \"xm_\" ] && maxadmin set server $server master\n  [ \"x$i\" = \"xs_\" ] && maxadmin set server $server slave\ndone\n\n[MaxScale](https://github.com/mariadb-corporation/MaxScale)\u3067Read/Write split\u3092\u4f7f\u3063\u3066\u3044\u305f\u304c\u3001AWS\u306eAurora\u306b\u3057\u305f\u3068\u3053\u308d\nmaster\u3001slave\u306e\u5224\u65ad\u3092MaxScale\u306e\u65b9\u3067\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u306e\u3067maxscale\u8d77\u52d5\u6642\u306bmaster,slave\u8a2d\u5b9a\u3092\u624b\u52d5\u3067\u884c\u3046\u3002\n\n### maxscale.conf\n\nmaster\u3068slave(Aurora\u3060\u3068writer\u3001reader)\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u306e\u7b87\u6240\n\n```\n[m_shard1]\ntype=server\naddress=server-1\nport=3306\nprotocol=MySQLBackend\n\n[s_shard1]\ntype=server\naddress=server-2\nport=3306\nprotocol=MySQLBackend\n```\n### maxscale_start.sh\n\nserver\u540d\u306e\u5148\u982d\u304cm_\u3060\u3063\u305f\u3089master\u3001s_\u3060\u3063\u305f\u3089slave\u3068\u3059\u308b\u3002\n\n```\nmaxscale\nsleep 5\nfor server in `maxadmin list servers | grep 3306 | awk '{print $1}'`\ndo\n  i=`echo $server | cut -c 1`\n  [ \"x$i\" = \"xm_\" ] && maxadmin set server $server master\n  [ \"x$i\" = \"xs_\" ] && maxadmin set server $server slave\ndone\n```\n", "tags": ["Maxscale", "Aurora"]}