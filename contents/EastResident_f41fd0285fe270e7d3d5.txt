{"tags": ["Ruby", "Go", "golang", "mecab", "\u81ea\u7136\u8a00\u8a9e\u51e6\u7406"], "context": "\n\n\u6982\u8981\u30923\u884c\u3067\n\nRuby + natto\u3067\u3001\u9577\u3044\u6587\u7ae0\u306e\u4e2d\u304b\u3089\u7279\u5b9a\u306e\u54c1\u8a5e\u3060\u3051\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u3002\n\u3057\u304b\u3057\u9045\u304b\u3063\u305f\u306e\u3067\u3001Go\u3067\u66f8\u3044\u305fshared object\u3092\u7d4c\u7531\u3055\u305b\u305f\u3002\n\u7d0460\u4e07\u6587\u5b57\u306e\u51e6\u7406\u306b\u304a\u3044\u3066\u300110\u500d\u306e\u901f\u5ea6\u304c\u51fa\u305f\n\n\n\u306f\u3058\u3081\u306b\nRuby\u3067\u5f62\u614b\u7d20\u89e3\u6790\u3092\u3059\u308b\u5834\u5408\u306f\u3001mecab\u3092natto\u7d4c\u7531\u3067\u4f7f\u3046\u306e\u304c\u5b9a\u756a\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\u53c2\u8003:ruby\u306emecab\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0natto\u3092\u4f7f\u3046\nnatto\u81ea\u4f53\u306fmecab\u306eC\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092FFI\u7d4c\u7531\u3067\u53e9\u3044\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u5fc5\u8981\u5341\u5206\u306a\u901f\u5ea6\u304c\u51fa\u307e\u3059\u304c\u3001\u89e3\u6790\u7d50\u679c\u3092\u5f62\u614b\u7d20\u3054\u3068\u306b\u6587\u5b57\u5217\u51e6\u7406\u3057\u305f\u308a\u3059\u308b\u3068\u3001\u5f53\u7136\u3001Ruby\u3067\u306e\u51e6\u7406\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u6c7a\u3057\u3066\u901f\u3044\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u3002\u89e3\u6790\u3059\u308b\u6587\u7ae0\u91cf\u306b\u3088\u3063\u3066\u306f\u3001\u304b\u306a\u308a\u306e\u51e6\u7406\u30b3\u30b9\u30c8\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\nRuby\u306e\u307f\u3067\u51e6\u7406\u3059\u308b\n\u3061\u3087\u3063\u3068\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u9752\u7a7a\u6587\u5eab\u306e\u5bb6\u306a\u304d\u5b50(\u4e0a)\u5168\u6587\u306e\u4e2d\u304b\u3089\u3001\u540d\u8a5e\u306e\u307f\u3092\u62bd\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u3001\u540d\u8a5e\u306e\u307f\u3092\u914d\u5217\u306b\u7a81\u3063\u8fbc\u3080\u3068\u3044\u3046\u51e6\u7406\u3067\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u4e00\u5ea6\u306b\u8aad\u3080\u3068\u8d85\u91cd\u3044\u306e\u3067\u3001\u4e00\u884c\u305a\u3064\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n\u8aad\u307f\u8fbc\u3080\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\n\u6587\u5b57\u6570: 159,397\u6587\u5b57\n\u884c\u6570: 1926\u884c\n\nRuby\u3067\u306e\u51e6\u7406\nrequire \"natto\"\n\nwords = []\nnm = Natto::MeCab.new\n\nFile.foreach(\"ienaki.txt\") do |line|\n  nm.parse(line) do |word|\n    words << word.surface if word.feature.include?('\u540d\u8a5e')\n  end\nend\n\n\n\u7d50\u679c\ntime\u30b3\u30de\u30f3\u30c9\u3067\u6e2c\u5b9a\u3057\u307e\u3057\u305f\u3002\n\n\n\n\u3000\ntime\n\n\n\n\nreal\n0m1.541s\n\n\nuser\n0m1.448s\n\n\nsys\n0m0.083s\n\n\n\n\u7d041.5\u79d2\u3067\u3059\u306d\u3002\u7d0416\u4e07\u6587\u5b57\u3042\u308b\u306e\u3092\u8003\u3048\u308b\u3068\u3001\u305d\u3053\u307e\u3067\u9045\u3044\u308f\u3051\u3067\u3082\u306a\u3044\u3067\u3059\u3002\n\nGo\u3092\u7d4c\u7531\u3055\u305b\u308b\n\u6b21\u306bGo\u3067\u51fa\u529b\u3057\u305fShared Library\u3092\u7d4c\u7531\u3055\u305b\u3066\u307f\u307e\u3059\u3002\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\u53c2\u80032: Ruby\u304b\u3089Go\u306e\u95a2\u6570\u3092\u3064\u304b\u3046 \u2192 \u306f\u3084\u3044\n\u53c2\u80033: Golang \u3067 Shared Library \u3092\u51fa\u529b\u3059\u308b\u3002\n\nGo\u5074\u306e\u6e96\u5099\nGo\u306emecab\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306f\u8272\u3005\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306fgo-mecab\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\nmacab.go\npackage main\n\n// #include <stdlib.h>\nimport \"C\"\nimport (\n  \"strings\"\n  \"github.com/shogo82148/go-mecab\"\n  \"unsafe\"\n)\n\n//export parse\nfunc parse(str *C.char) *C.char {\n  tagger, err := mecab.New(map[string]string{})\n  if err != nil { panic(err) }\n  defer tagger.Destroy()\n\n  tagger.Parse(\"\")\n\n  gostr := C.GoString(str)\n  array := make([]string, 0, 0)\n  scanner := bufio.NewScanner(strings.NewReader(gostr))\n  // 1\u884c\u305a\u3064\u56de\u3059\n  for scanner.Scan() {\n    node, err := tagger.ParseToNode(scanner.Text())\n    if err != nil { panic(err) }\n    // node\u3054\u3068\u306b\u56de\u3059\n    for ; node != (mecab.Node{}); node = node.Next() {\n      if strings.Contains(node.Feature(), \"\u540d\u8a5e\") {\n        array = append(array, node.Surface())\n      }\n    }\n  }\n  cstr := C.CString(strings.Join(array, \",\"))\n  return cstr\n}\n\nfunc main() {\n}\n\n\n\u5148\u307b\u3069Ruby\u3067\u884c\u3063\u305f\u3082\u306e\u3068\u307b\u307c\u540c\u3058\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\u3001parse\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\n\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\ngo build -buildmode=c-shared -o mecab.so mecab.go\n\n\nRuby\u3067\u306e\u51e6\u7406\nRuby\u3067Shared Library\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306eGem\u3001ffi\u3092\u4f7f\u3063\u3066\u3001\u3055\u3063\u304d\u51fa\u529b\u3057\u305fmecab.so\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\nrequire \"ffi\"\n\nmodule Mecab\n  extend FFI::Library\n  ffi_lib \"mecab.so\"\n  attach_function :parse, [:string], :string\nend\n\nopen(\"ienaki.txt\") do |f|\n  Mecab.parse(f.read)\nend\n\n\u306a\u304a\u3001Mecab.parse\u95a2\u6570\u306e\u623b\u308a\u5024\u306f\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u306e\u6587\u5b57\u5217\u306b\u306a\u308a\u307e\u3059\u3002\nprint Mecab.parse(\"\u30e2\u30d3\u30eb\u30b9\u30fc\u30c4\u306e\u6027\u80fd\u306e\u9055\u3044\u304c\u3001\u6226\u529b\u306e\u6c7a\u5b9a\u7684\u5dee\u3067\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3092\u6559\u3048\u3066\u3084\u308b\")\n# => \u30e2\u30d3\u30eb\u30b9\u30fc\u30c4,\u6027\u80fd,\u9055\u3044,\u6226\u529b,\u6c7a\u5b9a\u7684,\u5dee,\u3053\u3068\n\n\n\u7d50\u679c\n\n\n\n\u3000\nRuby + Go\nRuby only\n\n\n\n\nreal\n0m0.246s\n0m1.541s\n\n\nuser\n0m0.190s\n0m1.448s\n\n\nsys\n0m0.056s\n0m0.083s\n\n\n\n\u7d045\u301c6\u500d\u306e\u901f\u5ea6\u3068\u306a\u308a\u307e\u3057\u305f\u3002\u671f\u5f85\u3057\u3066\u3044\u305f\u307b\u3069\u306e\u901f\u5ea6\u5dee\u306f\u51fa\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u305d\u308c\u306a\u308a\u306b\u306f\u65e9\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u8003\u5bdf\n\u8a66\u3057\u306b\u3001\u30c6\u30ad\u30b9\u30c8\u91cf\u30924\u500d\u306b\u3057\u3066\u540c\u3058\u51e6\u7406\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u6587\u5b57\u6570: 637,588\u6587\u5b57\n\u884c\u6570: 7704\u884c\n\n\n\n\u3000\nRuby + Go\nRuby only\n\n\n\n\nreal\n0m0.551s\n0m5.686s\n\n\nuser\n0m0.493s\n0m5.555s\n\n\nsys\n0m0.065s\n0m0.116s\n\n\n\nRuby\u306f\u3061\u3087\u3046\u30694\u500d\u307b\u3069\u306e\u6642\u9593\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001Go\u3092\u7d4c\u7531\u3057\u305f\u5834\u5408\u306f\u5143\u306e2.5\u500d\u307b\u3069\u3057\u304b\u639b\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u901f\u5ea6\u5dee\u306f\u7d0410\u500d\u307b\u3069\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3064\u307e\u308a\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u3084\u6587\u5b57\u5217\u306e\u578b\u5909\u63db\u306a\u3069\u3068\u3044\u3063\u305f\u3001\u5f62\u614b\u7d20\u89e3\u6790\u3092\u884c\u3063\u3066\u540d\u8a5e\u306e\u307f\u3092\u629c\u304d\u51fa\u3059\u3068\u3044\u3046\u51e6\u7406\u4ee5\u5916\u306e\u90e8\u5206\u306b\u3001\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3042\u3068\u3001mecab.go\u306e\ncstr := C.CString(strings.Join(array, \",\"))\n\n\u306e\u90e8\u5206\u306a\u3093\u3067\u3059\u3051\u3069\u3001\u3053\u306ecstr\u306fGo\u306eGC\u304b\u3089\u5916\u308c\u308b\u3063\u307d\u3044\u3067\u3059\u3002cstr\u306fparse\u95a2\u6570\u306e\u623b\u308a\u5024\u3068\u3057\u3066\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001defer\u3067\u30e1\u30e2\u30ea\u306e\u89e3\u653e\u304c\u3067\u304d\u307e\u305b\u3093(Go\u521d\u5fc3\u8005\u306a\u306e\u3067\u3001return\u5f8c\u306b\u5b9f\u884c\u3055\u305b\u308b\u65b9\u6cd5\u304c\u308f\u304b\u308a\u307e\u305b\u3093\u30fb\u30fb\u30fb)\u3002\u5f53\u7136Ruby\u306eGC\u306b\u3082\u5165\u3089\u306a\u3044\u3068\u601d\u3046\u306e\u3067\u3001Ruby\u5074\u3067\u660e\u793a\u7684\u306b\u89e3\u653e\u3057\u3066\u3042\u3052\u308b\u306e\u304c\u5b89\u5168\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\n\n\u5c55\u671b\u3068\u304b\n\u4eca\u56de\u306f\u63b2\u8f09\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001parse\u30e1\u30bd\u30c3\u30c9\u306e\u4e26\u5217\u51e6\u7406\u7248\u3082\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u4e26\u5217\u51e6\u7406\u81ea\u4f53\u306f\u51fa\u6765\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3082\u305d\u3082\u81ea\u5206\u304cGo\u306e\u6587\u5b57\u5217\u51e6\u7406\u306b\u6163\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4e26\u5217\u51e6\u7406\u3068\u304bmecab\u4f7f\u3046\u3068\u304b\u4ee5\u524d\u306e\u6bb5\u968e\u3067\u8a70\u307e\u308a\u6c17\u5473\u3067\u3059(\u8907\u6570\u884c\u306e\u6587\u5b57\u5217\u3092\u306b\u5206\u5272\u3059\u308b\u3068\u304b)\u3002\u4e26\u5217\u51e6\u7406\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30a2\u30c3\u30d7\u306b\u6210\u529f\u3057\u305f\u3089\u3001\u307e\u305f\u66f4\u65b0\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u6982\u8981\u30923\u884c\u3067\n\n- Ruby + natto\u3067\u3001\u9577\u3044\u6587\u7ae0\u306e\u4e2d\u304b\u3089**\u7279\u5b9a\u306e\u54c1\u8a5e\u3060\u3051**\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u3002\n- \u3057\u304b\u3057\u9045\u304b\u3063\u305f\u306e\u3067\u3001**Go\u3067\u66f8\u3044\u305fshared object\u3092\u7d4c\u7531**\u3055\u305b\u305f\u3002\n- \u7d0460\u4e07\u6587\u5b57\u306e\u51e6\u7406\u306b\u304a\u3044\u3066\u3001**10\u500d\u306e\u901f\u5ea6**\u304c\u51fa\u305f\n\n# \u306f\u3058\u3081\u306b\n\nRuby\u3067\u5f62\u614b\u7d20\u89e3\u6790\u3092\u3059\u308b\u5834\u5408\u306f\u3001mecab\u3092natto\u7d4c\u7531\u3067\u4f7f\u3046\u306e\u304c\u5b9a\u756a\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n[\u53c2\u8003:ruby\u306emecab\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0natto\u3092\u4f7f\u3046](http://qiita.com/k-shogo/items/0f8a98c52913c729c7eb)\n\nnatto\u81ea\u4f53\u306fmecab\u306eC\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092FFI\u7d4c\u7531\u3067\u53e9\u3044\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u5fc5\u8981\u5341\u5206\u306a\u901f\u5ea6\u304c\u51fa\u307e\u3059\u304c\u3001\u89e3\u6790\u7d50\u679c\u3092\u5f62\u614b\u7d20\u3054\u3068\u306b\u6587\u5b57\u5217\u51e6\u7406\u3057\u305f\u308a\u3059\u308b\u3068\u3001\u5f53\u7136\u3001Ruby\u3067\u306e\u51e6\u7406\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u6c7a\u3057\u3066\u901f\u3044\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u3002\u89e3\u6790\u3059\u308b\u6587\u7ae0\u91cf\u306b\u3088\u3063\u3066\u306f\u3001\u304b\u306a\u308a\u306e\u51e6\u7406\u30b3\u30b9\u30c8\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n# Ruby\u306e\u307f\u3067\u51e6\u7406\u3059\u308b\n\n\u3061\u3087\u3063\u3068\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u9752\u7a7a\u6587\u5eab\u306e[\u5bb6\u306a\u304d\u5b50(\u4e0a)](http://www.aozora.gr.jp/cards/001047/card42924.html)\u5168\u6587\u306e\u4e2d\u304b\u3089\u3001\u540d\u8a5e\u306e\u307f\u3092\u62bd\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u5177\u4f53\u7684\u306b\u306f\u3001\u540d\u8a5e\u306e\u307f\u3092\u914d\u5217\u306b\u7a81\u3063\u8fbc\u3080\u3068\u3044\u3046\u51e6\u7406\u3067\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u4e00\u5ea6\u306b\u8aad\u3080\u3068\u8d85\u91cd\u3044\u306e\u3067\u3001\u4e00\u884c\u305a\u3064\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n### \u8aad\u307f\u8fbc\u3080\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\n\n\u6587\u5b57\u6570: 159,397\u6587\u5b57\n\u884c\u6570: 1926\u884c\n\n## Ruby\u3067\u306e\u51e6\u7406\n\n```rb\nrequire \"natto\"\n\nwords = []\nnm = Natto::MeCab.new\n\nFile.foreach(\"ienaki.txt\") do |line|\n  nm.parse(line) do |word|\n    words << word.surface if word.feature.include?('\u540d\u8a5e')\n  end\nend\n```\n\n## \u7d50\u679c\n\ntime\u30b3\u30de\u30f3\u30c9\u3067\u6e2c\u5b9a\u3057\u307e\u3057\u305f\u3002\n\n|\u3000|time|\n|---|---|\n|real|0m1.541s|\n|user|0m1.448s|\n|sys|0m0.083s|\n\n\n\u7d041.5\u79d2\u3067\u3059\u306d\u3002\u7d0416\u4e07\u6587\u5b57\u3042\u308b\u306e\u3092\u8003\u3048\u308b\u3068\u3001\u305d\u3053\u307e\u3067\u9045\u3044\u308f\u3051\u3067\u3082\u306a\u3044\u3067\u3059\u3002\n\n# Go\u3092\u7d4c\u7531\u3055\u305b\u308b\n\n\u6b21\u306bGo\u3067\u51fa\u529b\u3057\u305fShared Library\u3092\u7d4c\u7531\u3055\u305b\u3066\u307f\u307e\u3059\u3002\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n[\u53c2\u80032: Ruby\u304b\u3089Go\u306e\u95a2\u6570\u3092\u3064\u304b\u3046 \u2192 \u306f\u3084\u3044](http://qiita.com/achm/items/679b3f3af2cf377f0f02)\n[\u53c2\u80033: Golang \u3067 Shared Library \u3092\u51fa\u529b\u3059\u308b\u3002](http://qiita.com/yanolab/items/1e0dd7fd27f19f697285)\n\n## Go\u5074\u306e\u6e96\u5099\n\nGo\u306emecab\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306f\u8272\u3005\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306f[go-mecab](https://github.com/shogo82148/go-mecab)\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n```go:macab.go\npackage main\n\n// #include <stdlib.h>\nimport \"C\"\nimport (\n  \"strings\"\n  \"github.com/shogo82148/go-mecab\"\n  \"unsafe\"\n)\n\n//export parse\nfunc parse(str *C.char) *C.char {\n  tagger, err := mecab.New(map[string]string{})\n  if err != nil { panic(err) }\n  defer tagger.Destroy()\n\n  tagger.Parse(\"\")\n\n  gostr := C.GoString(str)\n  array := make([]string, 0, 0)\n  scanner := bufio.NewScanner(strings.NewReader(gostr))\n  // 1\u884c\u305a\u3064\u56de\u3059\n  for scanner.Scan() {\n    node, err := tagger.ParseToNode(scanner.Text())\n    if err != nil { panic(err) }\n    // node\u3054\u3068\u306b\u56de\u3059\n    for ; node != (mecab.Node{}); node = node.Next() {\n      if strings.Contains(node.Feature(), \"\u540d\u8a5e\") {\n        array = append(array, node.Surface())\n      }\n    }\n  }\n  cstr := C.CString(strings.Join(array, \",\"))\n  return cstr\n}\n\nfunc main() {\n}\n```\n\n\u5148\u307b\u3069Ruby\u3067\u884c\u3063\u305f\u3082\u306e\u3068\u307b\u307c\u540c\u3058\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\u3001`parse`\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\n\n\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\n```\ngo build -buildmode=c-shared -o mecab.so mecab.go\n```\n\n## Ruby\u3067\u306e\u51e6\u7406\n\nRuby\u3067Shared Library\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306eGem\u3001[ffi](https://github.com/ffi/ffi)\u3092\u4f7f\u3063\u3066\u3001\u3055\u3063\u304d\u51fa\u529b\u3057\u305f`mecab.so`\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n```rb\nrequire \"ffi\"\n\nmodule Mecab\n  extend FFI::Library\n  ffi_lib \"mecab.so\"\n  attach_function :parse, [:string], :string\nend\n\nopen(\"ienaki.txt\") do |f|\n  Mecab.parse(f.read)\nend\n```\n\n\u306a\u304a\u3001Mecab.parse\u95a2\u6570\u306e\u623b\u308a\u5024\u306f\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u306e\u6587\u5b57\u5217\u306b\u306a\u308a\u307e\u3059\u3002\n\n```rb\nprint Mecab.parse(\"\u30e2\u30d3\u30eb\u30b9\u30fc\u30c4\u306e\u6027\u80fd\u306e\u9055\u3044\u304c\u3001\u6226\u529b\u306e\u6c7a\u5b9a\u7684\u5dee\u3067\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3092\u6559\u3048\u3066\u3084\u308b\")\n# => \u30e2\u30d3\u30eb\u30b9\u30fc\u30c4,\u6027\u80fd,\u9055\u3044,\u6226\u529b,\u6c7a\u5b9a\u7684,\u5dee,\u3053\u3068\n```\n\n### \u7d50\u679c\n\n|\u3000|Ruby + Go|Ruby only|\n|---|---|---|\n|real|0m0.246s|0m1.541s|\n|user|0m0.190s|0m1.448s|\n|sys|0m0.056s|0m0.083s|\n\n\n\u7d04**5\u301c6\u500d**\u306e\u901f\u5ea6\u3068\u306a\u308a\u307e\u3057\u305f\u3002\u671f\u5f85\u3057\u3066\u3044\u305f\u307b\u3069\u306e\u901f\u5ea6\u5dee\u306f\u51fa\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u305d\u308c\u306a\u308a\u306b\u306f\u65e9\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n# \u8003\u5bdf\n\n\u8a66\u3057\u306b\u3001**\u30c6\u30ad\u30b9\u30c8\u91cf\u30924\u500d**\u306b\u3057\u3066\u540c\u3058\u51e6\u7406\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6587\u5b57\u6570: 637,588\u6587\u5b57\n\u884c\u6570: 7704\u884c\n\n|\u3000|Ruby + Go|Ruby only|\n|---|---|---|\n|real|0m0.551s|0m5.686s|\n|user|0m0.493s|0m5.555s|\n|sys|0m0.065s|0m0.116s|\n\nRuby\u306f\u3061\u3087\u3046\u30694\u500d\u307b\u3069\u306e\u6642\u9593\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001Go\u3092\u7d4c\u7531\u3057\u305f\u5834\u5408\u306f\u5143\u306e2.5\u500d\u307b\u3069\u3057\u304b\u639b\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002**\u901f\u5ea6\u5dee\u306f\u7d0410\u500d**\u307b\u3069\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3064\u307e\u308a\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u3084\u6587\u5b57\u5217\u306e\u578b\u5909\u63db\u306a\u3069\u3068\u3044\u3063\u305f\u3001\u5f62\u614b\u7d20\u89e3\u6790\u3092\u884c\u3063\u3066\u540d\u8a5e\u306e\u307f\u3092\u629c\u304d\u51fa\u3059\u3068\u3044\u3046\u51e6\u7406\u4ee5\u5916\u306e\u90e8\u5206\u306b\u3001\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u3042\u3068\u3001`mecab.go`\u306e\n\n```go\ncstr := C.CString(strings.Join(array, \",\"))\n```\n\n\u306e\u90e8\u5206\u306a\u3093\u3067\u3059\u3051\u3069\u3001\u3053\u306ecstr\u306fGo\u306eGC\u304b\u3089\u5916\u308c\u308b\u3063\u307d\u3044\u3067\u3059\u3002cstr\u306f`parse`\u95a2\u6570\u306e\u623b\u308a\u5024\u3068\u3057\u3066\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001defer\u3067\u30e1\u30e2\u30ea\u306e\u89e3\u653e\u304c\u3067\u304d\u307e\u305b\u3093(Go\u521d\u5fc3\u8005\u306a\u306e\u3067\u3001return\u5f8c\u306b\u5b9f\u884c\u3055\u305b\u308b\u65b9\u6cd5\u304c\u308f\u304b\u308a\u307e\u305b\u3093\u30fb\u30fb\u30fb)\u3002\u5f53\u7136Ruby\u306eGC\u306b\u3082\u5165\u3089\u306a\u3044\u3068\u601d\u3046\u306e\u3067\u3001Ruby\u5074\u3067\u660e\u793a\u7684\u306b\u89e3\u653e\u3057\u3066\u3042\u3052\u308b\u306e\u304c\u5b89\u5168\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\n\n# \u5c55\u671b\u3068\u304b\n\n\u4eca\u56de\u306f\u63b2\u8f09\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001`parse`\u30e1\u30bd\u30c3\u30c9\u306e\u4e26\u5217\u51e6\u7406\u7248\u3082\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u4e26\u5217\u51e6\u7406\u81ea\u4f53\u306f\u51fa\u6765\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3082\u305d\u3082\u81ea\u5206\u304cGo\u306e\u6587\u5b57\u5217\u51e6\u7406\u306b\u6163\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4e26\u5217\u51e6\u7406\u3068\u304bmecab\u4f7f\u3046\u3068\u304b\u4ee5\u524d\u306e\u6bb5\u968e\u3067\u8a70\u307e\u308a\u6c17\u5473\u3067\u3059(\u8907\u6570\u884c\u306e\u6587\u5b57\u5217\u3092\u306b\u5206\u5272\u3059\u308b\u3068\u304b)\u3002\u4e26\u5217\u51e6\u7406\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30a2\u30c3\u30d7\u306b\u6210\u529f\u3057\u305f\u3089\u3001\u307e\u305f\u66f4\u65b0\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n"}