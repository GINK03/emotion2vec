{"context": "\u3053\u306e\u8a18\u4e8b\u306fPython \u305d\u306e2 Advent Calendar 2015\u306e19\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059.\nAdvent Calendar\u767b\u9332\u3057\u3066\u307f\u305f\u3082\u306e\u306e\u3001\u6700\u8fd1Python\u305d\u3093\u306a\u66f8\u3044\u3066\u3044\u306a\u3044&\u66f8\u3044\u3066\u3066\u3082\u696d\u52d9\u4e0a\u7279\u6b8a\u306a\u3053\u3068\u3092\u3084\u308a\u904e\u304e\u3066\u3066\u66f8\u3051\u306a\u3044\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u4eca\u66f4\u611f\u306f\u3042\u308a\u307e\u3059\u304cpandas\u306e\u5c0f\u30cd\u30bf\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u306e\u524d\u51e6\u7406\u3084\u96c6\u8a08\u7b49\u3067\u304a\u306a\u3058\u307f\u306epandas\u3001\u77e5\u3063\u3066\u306f\u3044\u308b\u3051\u3069\u3061\u3087\u3063\u3068\u4f7f\u3044\u3069\u3053\u308d\u304c\u308f\u304b\u308a\u306b\u304f\u3044Multiindex\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\n\n\u57f7\u7b46\u6642\u306e\u74b0\u5883\n\nPyhton 2.7.11 |Anaconda 2.0.1 (x86_64)\npandas 0.17.0\n\u5b9f\u884c\u74b0\u5883: jupyter notebook \n\n\u4ee5\u4e0b\u51fa\u3066\u304f\u308b\u30b3\u30fc\u30c9\u306f\nimport pandas as pd\n\n\u3057\u3066\u3042\u308b\u524d\u63d0\u3067\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u8cbc\u308a\u4ed8\u3051\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\u306fto_html\u3057\u305f\u3082\u306e\u3092\u30b3\u30d4\u30da\u3057\u3066\u3044\u308b\u306e\u3067\u3001jupyter notebook\u4e0a\u306e\u8868\u793a\u3068\u306f\u82e5\u5e72\u7570\u306a\u308a\u307e\u3059\u3002\n\nMultiIndex\u3063\u3066\u4f55\nMultiIndex / Advanced Indexing\npandas\u306eDataFrame\u7b49\u3067\u3001\u8907\u6570\u306e\u5217\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u3059\u308b\u6a5f\u80fd\u3002\u8907\u6570\u306e\u5024\u3092\u30ad\u30fc\u306b\u3057\u305f\u3089\u30c7\u30fc\u30bf\u304c\u4e00\u610f\u306b\u7279\u5b9a\u3055\u308c\u308b\u3088\u3046\u306a\u5834\u5408\u306b\u4fbf\u5229\u3002\n\n\u30c7\u30fc\u30bf\u306e\u7528\u610f\u3068\u666e\u901a\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u304a\u3055\u3089\u3044\n\u666e\u901a\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u3053\u306e\u8a18\u4e8b\u3067\u306fMultiIndex\u3068\u306e\u5bfe\u6bd4\u3067\u4fbf\u5b9c\u4e0aSingleIndex\u3068\u547c\u3073\u307e\u3059\u3002(\u305d\u3046\u3044\u3046\u578b\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3044)\n\n\u30c7\u30fc\u30bf\u306e\u6e96\u5099\n\u8aac\u660e\u7528\u306b\u6b21\u306e\u3088\u3046\u306acsv\u3092\u7528\u610f\u3059\u308b\n\nsample.csv\nname,year,product,expected,actual\nTaro,2013,A,116,119\nTaro,2013,B,131,149\nTaro,2014,A,151,124\nTaro,2014,B,125,107\nTaro,2015,A,135,109\nTaro,2015,B,142,148\nHanako,2013,A,170,130\nHanako,2013,B,113,190\nHanako,2014,A,102,142\nHanako,2014,B,183,125\nHanako,2015,A,169,120\nHanako,2015,B,134,199\n\n\n\u3053\u308c\u3092pandas\u3067\u8aad\u307f\u8fbc\u3080\u3002\ndf1 = pd.read_csv('sample.csv')\n\n\n\n\n\nname\nyear\nproduct\nexpected\nactual\n\n\n\n\n0\nTaro\n2013\nA\n116\n119\n\n\n1\nTaro\n2013\nB\n131\n149\n\n\n2\nTaro\n2014\nA\n151\n124\n\n\n3\nTaro\n2014\nB\n125\n107\n\n\n4\nTaro\n2015\nA\n135\n109\n\n\n5\nTaro\n2015\nB\n142\n148\n\n\n6\nHanako\n2013\nA\n170\n130\n\n\n7\nHanako\n2013\nB\n113\n190\n\n\n8\nHanako\n2014\nA\n102\n142\n\n\n9\nHanako\n2014\nB\n183\n125\n\n\n10\nHanako\n2015\nA\n169\n120\n\n\n11\nHanako\n2015\nB\n134\n199\n\n\n\n\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u30e9\u30d9\u30eb\u306b\u306a\u3063\u3066\u3044\u308b0,1,2...\u304cdata.index\u3001\u5217\u30e9\u30d9\u30eb\u306e\"name\", \"year\",...\u304cdata.columns\u3067\u3069\u3061\u3089\u3082pandas.Index\u3068\u3044\u3046\u30c7\u30fc\u30bf\u578b\u306b\u306a\u3063\u3066\u3044\u308b\u3002\npandas.Index\u306fname\u3068\u3044\u3046\u30e1\u30f3\u30d0\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\ndf1.index.name = \"id\"\ndf1.columns.name = \"header\"\n\n\u3068\u3059\u308b\u3068\n\n\n\nheader\nname\nyear\nproduct\nexpected\nactual\n\n\nid\n\n\n\n\n\n\n\n\n\n0\nTaro\n2013\nA\n116\n119\n\n\n1\nTaro\n2013\nB\n131\n149\n\n\n2\nTaro\n2014\nA\n151\n124\n\n\n3\nTaro\n2014\nB\n125\n107\n\n\n4\nTaro\n2015\nA\n135\n109\n\n\n5\nTaro\n2015\nB\n142\n148\n\n\n6\nHanako\n2013\nA\n170\n130\n\n\n7\nHanako\n2013\nB\n113\n190\n\n\n8\nHanako\n2014\nA\n102\n142\n\n\n9\nHanako\n2014\nB\n183\n125\n\n\n10\nHanako\n2015\nA\n169\n120\n\n\n11\nHanako\n2015\nB\n134\n199\n\n\n\n\u3053\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u306b\u306a\u308b\u3002\n\n\u30c7\u30fc\u30bf\u306e\u9078\u629e\n\n\u5217\u3067\u9078\u629e\n\ndf1[\"name\"]\n\n\n\u51fa\u529b\nid\n0       Taro\n1       Taro\n2       Taro\n3       Taro\n4       Taro\n5       Taro\n6     Hanako\n7     Hanako\n8     Hanako\n9     Hanako\n10    Hanako\n11    Hanako\nName: name, dtype: object\n\n\n\n\u884c\u3067\u9078\u629e\n\ndf1.loc[3]\n\n\n\u51fa\u529b\nheader\nname        Taro\nyear        2014\nproduct        B\nexpected     125\nactual       107\nName: 3, dtype: object\n\n\n\n\u884c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3067\u9078\u629e\n\ndf1.iloc[3]\n\n\u4eca\u56de\u306findex\u304c\u884c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306a\u306e\u3067\u51fa\u529b\u306f\u540c\u3058\u3002\n\n\u884c\u3068\u5217\u3067\u9078\u629e\n\ndf1.ix[3:5,\"product\":\"actual\"]\n\n\u51fa\u529b\n\n\n\n\nproduct\nexpected\nactual\n\n\n\n\n3\nB\n125\n107\n\n\n4\nA\n135\n109\n\n\n5\nB\n142\n148\n\n\n\n\n\u6761\u4ef6\u3067\u9078\u629e\n\ndf1[(df1[\"name\"] == \"Hanako\")&(df1[\"product\"] == \"A\")]\n\n\u51fa\u529b\n\n\n\nheader\nname\nyear\nproduct\nexpected\nactual\n\n\nid\n\n\n\n\n\n\n\n\n\n6\nHanako\n2013\nA\n170\n130\n\n\n8\nHanako\n2014\nA\n102\n142\n\n\n10\nHanako\n2015\nA\n169\n120\n\n\n\n\u8a73\u3057\u304f\u306f\u4ed6\u306e\u8a18\u4e8b\u3084\u66f8\u7c4d\u53c2\u7167\u3002\n\nMultiIndex\u306e\u8a2d\u5b9a\n\u3053\u3053\u304b\u3089\u304c\u672c\u984c\u3002\n\u5148\u307b\u3069\u8aad\u307f\u8fbc\u3093\u3060\u30c7\u30fc\u30bf\u306f\u3001\u898b\u308c\u3070\u308f\u304b\u308b\u3088\u3046\u306b\n\n\u30ec\u30b3\u30fc\u30c9id\u306e\u3088\u3046\u306a\u884c\u3067\u30e6\u30cb\u30fc\u30af\u306a\u5217\u304c\u306a\u304f\u3001\nname, year, product\u306e\uff13\u5217\u5408\u308f\u305b\u308b\u3068\u30ec\u30b3\u30fc\u30c9\u304c1\u3064\u306b\u6c7a\u307e\u308b\u3002\n\n\u3053\u3093\u306a\u6642\u306fMultiIndex\u3092\u4f7f\u3046\u3068\u30c7\u30fc\u30bf\u304c\u3059\u3063\u304d\u308a\u3068\u307e\u3068\u307e\u308b\u3002\ndf2 = pd.read_csv(\"sample.csv\",index_col=[\"name\",\"year\",\"product\"])\n\n\n\n\n\n\n\nexpected\nactual\n\n\nname\nyear\nproduct\n\n\n\n\n\n\nTaro\n2013\nA\n116\n119\n\n\nB\n131\n149\n\n\n2014\nA\n151\n124\n\n\nB\n125\n107\n\n\n2015\nA\n135\n109\n\n\nB\n142\n148\n\n\nHanako\n2013\nA\n170\n130\n\n\nB\n113\n190\n\n\n2014\nA\n102\n142\n\n\nB\n183\n125\n\n\n2015\nA\n169\n120\n\n\nB\n134\n199\n\n\n\n\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3093\u3060\u5f8c\u3084\u3001\u3044\u308d\u3044\u308d\u3068\u51e6\u7406\u3092\u3057\u3066\u4f5c\u6210\u3057\u305fDataFrame\u306bMultiIndex\u3092\u306f\u308b\u6642\u306f\n2016/3/18\u8ffd\u8a18\nset_index\u95a2\u6570\u3092\u4f7f\u3046\u3068\u3001\u6307\u5b9a\u3057\u305f\u5217\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u3057\u3066\u304f\u308c\u308b\u3002(\u3053\u308c\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306eMultiIndex\u306e\u30da\u30fc\u30b8\u306b\u8f09\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u77e5\u3089\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\u3002)\ndf2 = df1.set_index([\"name\",\"year\",\"product\"], drop=True)\n\ndrop=True\u3068\u3059\u308b\u3068\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u8a2d\u5b9a\u3057\u305f\u5217\u306f\u524a\u9664\u3055\u308c\u308b\u3002\n\u623b\u3059\u3068\u304d\u306f\ndf1 = df2.reset_index()\n\n\u3068\u3059\u308b\n\u8ffd\u8a18\u7d42\u308f\u308a\npd.MultiIndex.from_arrays()\npd.MultiIndex.from_product()\npd.MultiIndex.from_tuples()\n\n\u3042\u305f\u308a\u3092\u4f7f\u3048\u3070\u306a\u3093\u3068\u304b\u306a\u308b\u3002\u3061\u306a\u307f\u306bpd.MultiIndex.from_product\u306f\u8907\u6570\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u3084\u308b\u3068\u30cd\u30b9\u30c8\u3057\u305f\u30eb\u30fc\u30d7\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u308b(itertools.product\u3068\u540c\u3058)\u3002\u4f8b\u3048\u3070df2\u3068\u540c\u3058\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u308b\u306b\u306f\npd.MultiIndex.from_product(([\"Taro\",\"Hanako\"],[2013,2014,2015],[\"A\",\"B\"]),\\\n    names=[\"name\",\"year\",\"product\"])\n\n\u3068\u3059\u308c\u3070\u3044\u3044\u3002\n\n\u30c7\u30fc\u30bf\u306e\u9078\u629e\n\u884c\u3092\u9078\u629e\u3059\u308b\u6642\u306f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u30bf\u30d7\u30eb\u3092\u6e21\u305b\u3070\u826f\u3044\u3002\ndf2.loc[(\"Taro\",2013,\"A\")]\n\n\n\u51fa\u529b\nexpected    116\nactual      119\nName: (Taro, 2013, A), dtype: int64\n\n\n\u9014\u4e2d\u307e\u3067\u306e\u30bf\u30d7\u30eb\u3092\u6e21\u3059\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u304c\u8fd4\u3063\u3066\u304f\u308b\u304c\u3001\u9014\u4e2d\u306e\u30ec\u30d9\u30eb\u307e\u3067\u306e\u6307\u5b9a\u306fPerformanceWarning\u304c\u3067\u308b\u306e\u3067\u3001\u4e00\u6642\u7684\u306b\u4e2d\u3092\u898b\u305f\u3044\u6642\u4ee5\u5916\u306f\u4f7f\u308f\u306a\u3044\u307b\u3046\u304c\u3044\u3044\u3002\n\u7b2c\u4e00\u30ec\u30d9\u30eb(\u4eca\u56de\u3067\u8a00\u3046name)\u3082\u3057\u304f\u306f\u5168\u30ec\u30d9\u30eb\u306e\u6307\u5b9a\u306a\u3089\u554f\u984c\u306a\u3044\u3002\npy\ndf2.loc[(\"Taro\",2013)]\n\n\u51fa\u529b (PerformanceWarning)\n\n\n\n\nexpected\nactual\n\n\nproduct\n\n\n\n\n\n\nA\n116\n119\n\n\nB\n131\n149\n\n\n\n\u9014\u4e2d\u306e\u30ec\u30d9\u30eb\u307e\u3067\u306e\u6307\u5b9a\u3068\u304b\u3001\u9014\u4e2d\u3060\u3051\u306e\u6307\u5b9a\u3068\u304b\u306fxs\u3092\u4f7f\u3046\ndf2.xs([\"Taro\",\"A\"],level=[0,2])\n\n\u51fa\u529b\n\n\n\n\nexpected\nactual\n\n\nyear\n\n\n\n\n\n\n2013\n116\n119\n\n\n2014\n151\n124\n\n\n2015\n135\n109\n\n\n\n\u3053\u308c\u3067Warnning\u306f\u51fa\u306a\u304f\u306a\u3063\u305f\u304c\u3001\u4e0a\u3068\u540c\u3058\u51e6\u7406\u3092\u66f8\u3044\u3066\u3082\u3053\u3063\u3061\u306e\u65b9\u304c\u3061\u3087\u3063\u3068\u9045\u3044\u30fb\u30fb\u30fb\n\nMultiIndex\u306e\u4f7f\u3044\u6240\npandas.Index\u306fpandas.Series\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u666e\u901a\u306e\u5217\u306e\u3088\u3046\u306a\u611f\u899a\u3067\u4f7f\u3048\u306a\u3044\u3053\u3068\u304c\u7d50\u69cb\u3042\u308a\u3001\u5730\u5473\u306b\u30b9\u30c8\u30ec\u30b9\u304c\u305f\u307e\u308b\u3002\u3058\u3083\u3042SingleIndex\u3068Series\u306e\u307e\u307e\u3067\u3044\u3044\u3058\u3083\u3093 \u3068\u8a00\u3044\u305f\u3044\u3068\u3053\u308d\u3060\u304c\u3001\u305b\u3063\u304b\u304f\u3042\u308b\u3093\u3060\u304b\u3089\u4f7f\u3044\u3069\u3053\u308d\u3092\u8003\u3048\u308b\n\n\u8907\u6570\u5217\u3092\u30ad\u30fc\u306b\u3057\u3066\u4e00\u610f\u306b\u6c7a\u307e\u308b\u30c7\u30fc\u30bf\u3092\u63a2\u3057\u3066\u304f\u308b\n\u5148\u307b\u3069\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u3053\u308c\u304c\u4e3b\u306a\u4f7f\u3044\u6240\u3067\u3057\u3087\u3046\u3002\ndf2.loc[(\"Taro\",2013,\"A\")]\n\n\u540c\u3058\u3053\u3068\u3092SingleIndex\u3067\u3084\u308d\u3046\u3068\u601d\u3046\u3068\u3001\ndf1[(df1[\"name\"] == \"Taro\")&(df1[\"year\"] == 2013)&(df1[\"product\"] == \"A\")].iloc[0]\n\n\u3068\u3044\u3046\u611f\u3058\u306b\u306a\u3063\u3066\u6c5a\u3044(\u591a\u5206\u3082\u3063\u3068\u3044\u3044\u66f8\u304d\u65b9\u304c\u3042\u308b\u304c)\u3002\n\u5f53\u7136\u901f\u5ea6\u306b\u3082\u5dee\u304c\u3042\u308b\u3002\u3068\u601d\u3063\u3066\uff15\u4e07\u4ef6\u304f\u3089\u3044\u306e\u30c7\u30fc\u30bf\u4f7f\u3063\u3066\u8a66\u3057\u305f\u3089\uff11\u8a66\u884c\u3067\u306f2~3\u500d\u304f\u3089\u3044\u3057\u304b\u5dee\u304c\u3064\u304b\u306a\u304b\u3063\u305f\u3002%%timeit\u3067\u8abf\u3079\u3088\u3046\u3068\u3057\u305f\u304c\u3001df2\u306e\u65b9\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u6bd4\u8f03\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\u307e\u305f\u3001\u6307\u5b9a\u3057\u305f\u30ad\u30fc\u306b\u8a72\u5f53\u3059\u308b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u308f\u304b\u3089\u306a\u3044\u6642\u3001MultiIndex\u306a\u3089\n(\"Taro\",2013,\"A\") in df2.index\n\n\u3067\u3044\u3044\u304c\u3001SingleIndex\u3067\u306f\ndf1[(df1[\"name\"] == \"Taro\")&(df1[\"year\"] == 2013)&(df1[\"product\"] == \"A\")].shape[0]>0\n\n\u3068\u304b\u3084\u3089\u306a\u3044\u3068\u3044\u3051\u306a\u3044(\u591a\u5206\u3082\u3063\u3068\u3044\u3044\u66f8\u304d\u65b9\u304c\u3042\u308b\u304c)\n\n\u8868\u793a\u7528\n\u30ad\u30fc\u3068\u306a\u308b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u5165\u308c\u5b50\u306b\u306a\u3063\u305fMultiIndex\u306e\u51fa\u529b\u306f\u4eba\u9593\u306b\u3068\u3063\u3066\u306f\u8996\u8a8d\u6027\u304c\u9ad8\u3044\u306e\u3067\u3001\u51fa\u529b\u306e\u70ba\u3060\u3051\u306bMultiIndex\u3092\u4f7f\u3046\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u3002\nDataFrame\u306fhtml, excel, latex\u7b49\u3005\u591a\u6570\u306e\u5f62\u5f0f\u3067\u51fa\u529b\u3067\u304d\u3001\u30a8\u30af\u30bb\u30eb\u3067\u3042\u3063\u3066\u3082\u3061\u3083\u3093\u3068MultiIndex\u306b\u5408\u308f\u305b\u3066\u30bb\u30eb\u7d50\u5408\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u5730\u5473\u306b\u4fbf\u5229\u3002\n\u3061\u306a\u307f\u306bdf.to_csv\u3067\u306f\u3001MultiIndex\u3067\u3042\u3063\u3066\u3082\u3061\u3083\u3093\u3068\u5168\u884c\u30d5\u30eb\u306b\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u305d\u306e\u4ed6\u64cd\u4f5c\u65b9\u6cd5\u306a\u3069\n\n\uff11\u30ec\u30d9\u30eb\u5206\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3057\u305f\u3044\u6642\u306fdf.index.get_level_values\u3092\u4f7f\u3046\nMultiIndex\u3092SingleIndex\u306b\u623b\u3059\u306b\u306fdf.reset_index()\u3092\u4f7f\u3046\u3002\u5404level\u306e\u5217\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3001\u901a\u3057\u756a\u53f7\u304cindex\u306b\u306a\u3063\u305fDataFrame\u304c\u3067\u304d\u308b\u3002\n\u305d\u306e\u4ed6\u3001\u30b9\u30e9\u30a4\u30b9\u7b49\u3005\u3042\u308b\u304c\u30a4\u30de\u30a4\u30c1\u4f7f\u3044\u65b9\u304c\u308f\u304b\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u307e\u305f\u306e\u6a5f\u4f1a\u306b\n\n\u3053\u306e\u8a18\u4e8b\u306f[Python \u305d\u306e2 Advent Calendar 2015](http://qiita.com/advent-calendar/2015/yet_another_python)\u306e19\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059.\n\n\nAdvent Calendar\u767b\u9332\u3057\u3066\u307f\u305f\u3082\u306e\u306e\u3001\u6700\u8fd1Python\u305d\u3093\u306a\u66f8\u3044\u3066\u3044\u306a\u3044&\u66f8\u3044\u3066\u3066\u3082\u696d\u52d9\u4e0a\u7279\u6b8a\u306a\u3053\u3068\u3092\u3084\u308a\u904e\u304e\u3066\u3066\u66f8\u3051\u306a\u3044\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u4eca\u66f4\u611f\u306f\u3042\u308a\u307e\u3059\u304cpandas\u306e\u5c0f\u30cd\u30bf\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u306e\u524d\u51e6\u7406\u3084\u96c6\u8a08\u7b49\u3067\u304a\u306a\u3058\u307f\u306epandas\u3001\u77e5\u3063\u3066\u306f\u3044\u308b\u3051\u3069\u3061\u3087\u3063\u3068\u4f7f\u3044\u3069\u3053\u308d\u304c\u308f\u304b\u308a\u306b\u304f\u3044Multiindex\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\n\n\n## \u57f7\u7b46\u6642\u306e\u74b0\u5883\n* Pyhton 2.7.11 |Anaconda 2.0.1 (x86_64)\n* pandas 0.17.0\n* \u5b9f\u884c\u74b0\u5883: jupyter notebook \n\n\u4ee5\u4e0b\u51fa\u3066\u304f\u308b\u30b3\u30fc\u30c9\u306f\n\n```py\nimport pandas as pd\n```\n\u3057\u3066\u3042\u308b\u524d\u63d0\u3067\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u8cbc\u308a\u4ed8\u3051\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\u306f`to_html`\u3057\u305f\u3082\u306e\u3092\u30b3\u30d4\u30da\u3057\u3066\u3044\u308b\u306e\u3067\u3001jupyter notebook\u4e0a\u306e\u8868\u793a\u3068\u306f\u82e5\u5e72\u7570\u306a\u308a\u307e\u3059\u3002\n\n## MultiIndex\u3063\u3066\u4f55\n[MultiIndex / Advanced Indexing](http://pandas.pydata.org/pandas-docs/stable/advanced.html)\npandas\u306eDataFrame\u7b49\u3067\u3001\u8907\u6570\u306e\u5217\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u3059\u308b\u6a5f\u80fd\u3002\u8907\u6570\u306e\u5024\u3092\u30ad\u30fc\u306b\u3057\u305f\u3089\u30c7\u30fc\u30bf\u304c\u4e00\u610f\u306b\u7279\u5b9a\u3055\u308c\u308b\u3088\u3046\u306a\u5834\u5408\u306b\u4fbf\u5229\u3002\n\n## \u30c7\u30fc\u30bf\u306e\u7528\u610f\u3068\u666e\u901a\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u304a\u3055\u3089\u3044\n\u666e\u901a\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u3053\u306e\u8a18\u4e8b\u3067\u306fMultiIndex\u3068\u306e\u5bfe\u6bd4\u3067\u4fbf\u5b9c\u4e0aSingleIndex\u3068\u547c\u3073\u307e\u3059\u3002(\u305d\u3046\u3044\u3046\u578b\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3044)\n\n### \u30c7\u30fc\u30bf\u306e\u6e96\u5099\n\n\u8aac\u660e\u7528\u306b\u6b21\u306e\u3088\u3046\u306acsv\u3092\u7528\u610f\u3059\u308b\n\n```:sample.csv\nname,year,product,expected,actual\nTaro,2013,A,116,119\nTaro,2013,B,131,149\nTaro,2014,A,151,124\nTaro,2014,B,125,107\nTaro,2015,A,135,109\nTaro,2015,B,142,148\nHanako,2013,A,170,130\nHanako,2013,B,113,190\nHanako,2014,A,102,142\nHanako,2014,B,183,125\nHanako,2015,A,169,120\nHanako,2015,B,134,199\n```\n\u3053\u308c\u3092pandas\u3067\u8aad\u307f\u8fbc\u3080\u3002\n\n```py\ndf1 = pd.read_csv('sample.csv')\n```\n<table border=\"0\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>name</th>\n      <th>year</th>\n      <th>product</th>\n      <th>expected</th>\n      <th>actual</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Taro</td>\n      <td>2013</td>\n      <td>A</td>\n      <td>116</td>\n      <td>119</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Taro</td>\n      <td>2013</td>\n      <td>B</td>\n      <td>131</td>\n      <td>149</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Taro</td>\n      <td>2014</td>\n      <td>A</td>\n      <td>151</td>\n      <td>124</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Taro</td>\n      <td>2014</td>\n      <td>B</td>\n      <td>125</td>\n      <td>107</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Taro</td>\n      <td>2015</td>\n      <td>A</td>\n      <td>135</td>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Taro</td>\n      <td>2015</td>\n      <td>B</td>\n      <td>142</td>\n      <td>148</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Hanako</td>\n      <td>2013</td>\n      <td>A</td>\n      <td>170</td>\n      <td>130</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Hanako</td>\n      <td>2013</td>\n      <td>B</td>\n      <td>113</td>\n      <td>190</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Hanako</td>\n      <td>2014</td>\n      <td>A</td>\n      <td>102</td>\n      <td>142</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Hanako</td>\n      <td>2014</td>\n      <td>B</td>\n      <td>183</td>\n      <td>125</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Hanako</td>\n      <td>2015</td>\n      <td>A</td>\n      <td>169</td>\n      <td>120</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>Hanako</td>\n      <td>2015</td>\n      <td>B</td>\n      <td>134</td>\n      <td>199</td>\n    </tr>\n  </tbody>\n</table>\n\n\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u30e9\u30d9\u30eb\u306b\u306a\u3063\u3066\u3044\u308b`0,1,2...`\u304c`data.index`\u3001\u5217\u30e9\u30d9\u30eb\u306e`\"name\", \"year\",...`\u304c`data.columns`\u3067\u3069\u3061\u3089\u3082`pandas.Index`\u3068\u3044\u3046\u30c7\u30fc\u30bf\u578b\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n`pandas.Index`\u306f`name`\u3068\u3044\u3046\u30e1\u30f3\u30d0\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\n\n```py\ndf1.index.name = \"id\"\ndf1.columns.name = \"header\"\n```\n\u3068\u3059\u308b\u3068\n\n<table border=\"0\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>header</th>\n      <th>name</th>\n      <th>year</th>\n      <th>product</th>\n      <th>expected</th>\n      <th>actual</th>\n    </tr>\n    <tr>\n      <th>id</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Taro</td>\n      <td>2013</td>\n      <td>A</td>\n      <td>116</td>\n      <td>119</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Taro</td>\n      <td>2013</td>\n      <td>B</td>\n      <td>131</td>\n      <td>149</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Taro</td>\n      <td>2014</td>\n      <td>A</td>\n      <td>151</td>\n      <td>124</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Taro</td>\n      <td>2014</td>\n      <td>B</td>\n      <td>125</td>\n      <td>107</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Taro</td>\n      <td>2015</td>\n      <td>A</td>\n      <td>135</td>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Taro</td>\n      <td>2015</td>\n      <td>B</td>\n      <td>142</td>\n      <td>148</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Hanako</td>\n      <td>2013</td>\n      <td>A</td>\n      <td>170</td>\n      <td>130</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Hanako</td>\n      <td>2013</td>\n      <td>B</td>\n      <td>113</td>\n      <td>190</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Hanako</td>\n      <td>2014</td>\n      <td>A</td>\n      <td>102</td>\n      <td>142</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Hanako</td>\n      <td>2014</td>\n      <td>B</td>\n      <td>183</td>\n      <td>125</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Hanako</td>\n      <td>2015</td>\n      <td>A</td>\n      <td>169</td>\n      <td>120</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>Hanako</td>\n      <td>2015</td>\n      <td>B</td>\n      <td>134</td>\n      <td>199</td>\n    </tr>\n  </tbody>\n</table>\n\u3053\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u306b\u306a\u308b\u3002\n\n### \u30c7\u30fc\u30bf\u306e\u9078\u629e\n\n* \u5217\u3067\u9078\u629e\n\n```py\ndf1[\"name\"]\n```\n\n```:\u51fa\u529b\nid\n0       Taro\n1       Taro\n2       Taro\n3       Taro\n4       Taro\n5       Taro\n6     Hanako\n7     Hanako\n8     Hanako\n9     Hanako\n10    Hanako\n11    Hanako\nName: name, dtype: object\n```\n\n* \u884c\u3067\u9078\u629e\n\n```py\ndf1.loc[3]\n```\n\n```:\u51fa\u529b\nheader\nname        Taro\nyear        2014\nproduct        B\nexpected     125\nactual       107\nName: 3, dtype: object\n```\n\n* \u884c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3067\u9078\u629e\n\n```py\ndf1.iloc[3]\n```\n\n\u4eca\u56de\u306findex\u304c\u884c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306a\u306e\u3067\u51fa\u529b\u306f\u540c\u3058\u3002\n\n* \u884c\u3068\u5217\u3067\u9078\u629e\n\n```py\ndf1.ix[3:5,\"product\":\"actual\"]\n```\n\u51fa\u529b\n\n<table border=\"0\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>product</th>\n      <th>expected</th>\n      <th>actual</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>3</th>\n      <td>B</td>\n      <td>125</td>\n      <td>107</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>A</td>\n      <td>135</td>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>B</td>\n      <td>142</td>\n      <td>148</td>\n    </tr>\n  </tbody>\n</table>\n\n* \u6761\u4ef6\u3067\u9078\u629e\n\n```py\ndf1[(df1[\"name\"] == \"Hanako\")&(df1[\"product\"] == \"A\")]\n```\n\n\u51fa\u529b\n\n<table border=\"0\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>header</th>\n      <th>name</th>\n      <th>year</th>\n      <th>product</th>\n      <th>expected</th>\n      <th>actual</th>\n    </tr>\n    <tr>\n      <th>id</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>6</th>\n      <td>Hanako</td>\n      <td>2013</td>\n      <td>A</td>\n      <td>170</td>\n      <td>130</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Hanako</td>\n      <td>2014</td>\n      <td>A</td>\n      <td>102</td>\n      <td>142</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Hanako</td>\n      <td>2015</td>\n      <td>A</td>\n      <td>169</td>\n      <td>120</td>\n    </tr>\n  </tbody>\n</table>\n\n\n\u8a73\u3057\u304f\u306f\u4ed6\u306e\u8a18\u4e8b\u3084\u66f8\u7c4d\u53c2\u7167\u3002\n\n\n## MultiIndex\u306e\u8a2d\u5b9a\n\n\u3053\u3053\u304b\u3089\u304c\u672c\u984c\u3002\n\u5148\u307b\u3069\u8aad\u307f\u8fbc\u3093\u3060\u30c7\u30fc\u30bf\u306f\u3001\u898b\u308c\u3070\u308f\u304b\u308b\u3088\u3046\u306b\n\n* \u30ec\u30b3\u30fc\u30c9id\u306e\u3088\u3046\u306a\u884c\u3067\u30e6\u30cb\u30fc\u30af\u306a\u5217\u304c\u306a\u304f\u3001\n* name, year, product\u306e\uff13\u5217\u5408\u308f\u305b\u308b\u3068\u30ec\u30b3\u30fc\u30c9\u304c1\u3064\u306b\u6c7a\u307e\u308b\u3002\n\n\u3053\u3093\u306a\u6642\u306fMultiIndex\u3092\u4f7f\u3046\u3068\u30c7\u30fc\u30bf\u304c\u3059\u3063\u304d\u308a\u3068\u307e\u3068\u307e\u308b\u3002\n\n```py\ndf2 = pd.read_csv(\"sample.csv\",index_col=[\"name\",\"year\",\"product\"])\n```\n\n<table border=\"0\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th></th>\n      <th>expected</th>\n      <th>actual</th>\n    </tr>\n    <tr>\n      <th>name</th>\n      <th>year</th>\n      <th>product</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"6\" valign=\"top\">Taro</th>\n      <th rowspan=\"2\" valign=\"top\">2013</th>\n      <th>A</th>\n      <td>116</td>\n      <td>119</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>131</td>\n      <td>149</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">2014</th>\n      <th>A</th>\n      <td>151</td>\n      <td>124</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>125</td>\n      <td>107</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">2015</th>\n      <th>A</th>\n      <td>135</td>\n      <td>109</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>142</td>\n      <td>148</td>\n    </tr>\n    <tr>\n      <th rowspan=\"6\" valign=\"top\">Hanako</th>\n      <th rowspan=\"2\" valign=\"top\">2013</th>\n      <th>A</th>\n      <td>170</td>\n      <td>130</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>113</td>\n      <td>190</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">2014</th>\n      <th>A</th>\n      <td>102</td>\n      <td>142</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>183</td>\n      <td>125</td>\n    </tr>\n    <tr>\n      <th rowspan=\"2\" valign=\"top\">2015</th>\n      <th>A</th>\n      <td>169</td>\n      <td>120</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>134</td>\n      <td>199</td>\n    </tr>\n  </tbody>\n</table>\n\n\n\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3093\u3060\u5f8c\u3084\u3001\u3044\u308d\u3044\u308d\u3068\u51e6\u7406\u3092\u3057\u3066\u4f5c\u6210\u3057\u305fDataFrame\u306bMultiIndex\u3092\u306f\u308b\u6642\u306f\n<font color=\"red\">2016/3/18\u8ffd\u8a18</font>\n`set_index`\u95a2\u6570\u3092\u4f7f\u3046\u3068\u3001\u6307\u5b9a\u3057\u305f\u5217\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u3057\u3066\u304f\u308c\u308b\u3002(\u3053\u308c\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306eMultiIndex\u306e\u30da\u30fc\u30b8\u306b\u8f09\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u77e5\u3089\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\u3002)\n\n```py\ndf2 = df1.set_index([\"name\",\"year\",\"product\"], drop=True)\n```\n`drop=True`\u3068\u3059\u308b\u3068\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u8a2d\u5b9a\u3057\u305f\u5217\u306f\u524a\u9664\u3055\u308c\u308b\u3002\n\u623b\u3059\u3068\u304d\u306f\n\n```py\ndf1 = df2.reset_index()\n```\n\u3068\u3059\u308b\n<font color=\"red\">\u8ffd\u8a18\u7d42\u308f\u308a</font>\n\n\n\n```py\npd.MultiIndex.from_arrays()\npd.MultiIndex.from_product()\npd.MultiIndex.from_tuples()\n```\n\u3042\u305f\u308a\u3092\u4f7f\u3048\u3070\u306a\u3093\u3068\u304b\u306a\u308b\u3002\u3061\u306a\u307f\u306b`pd.MultiIndex.from_product`\u306f\u8907\u6570\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u3084\u308b\u3068\u30cd\u30b9\u30c8\u3057\u305f\u30eb\u30fc\u30d7\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u308b(itertools.product\u3068\u540c\u3058)\u3002\u4f8b\u3048\u3070`df2`\u3068\u540c\u3058\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u308b\u306b\u306f\n\n```py\npd.MultiIndex.from_product(([\"Taro\",\"Hanako\"],[2013,2014,2015],[\"A\",\"B\"]),\\\n    names=[\"name\",\"year\",\"product\"])\n```\n\u3068\u3059\u308c\u3070\u3044\u3044\u3002\n\n## \u30c7\u30fc\u30bf\u306e\u9078\u629e\n\n\u884c\u3092\u9078\u629e\u3059\u308b\u6642\u306f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u30bf\u30d7\u30eb\u3092\u6e21\u305b\u3070\u826f\u3044\u3002\n\n```py\ndf2.loc[(\"Taro\",2013,\"A\")]\n```\n\n```:\u51fa\u529b\nexpected    116\nactual      119\nName: (Taro, 2013, A), dtype: int64\n```\n\n\u9014\u4e2d\u307e\u3067\u306e\u30bf\u30d7\u30eb\u3092\u6e21\u3059\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u304c\u8fd4\u3063\u3066\u304f\u308b\u304c\u3001\u9014\u4e2d\u306e\u30ec\u30d9\u30eb\u307e\u3067\u306e\u6307\u5b9a\u306fPerformanceWarning\u304c\u3067\u308b\u306e\u3067\u3001\u4e00\u6642\u7684\u306b\u4e2d\u3092\u898b\u305f\u3044\u6642\u4ee5\u5916\u306f\u4f7f\u308f\u306a\u3044\u307b\u3046\u304c\u3044\u3044\u3002\n\u7b2c\u4e00\u30ec\u30d9\u30eb(\u4eca\u56de\u3067\u8a00\u3046name)\u3082\u3057\u304f\u306f\u5168\u30ec\u30d9\u30eb\u306e\u6307\u5b9a\u306a\u3089\u554f\u984c\u306a\u3044\u3002\n```py\ndf2.loc[(\"Taro\",2013)]\n```\n\n\u51fa\u529b (PerformanceWarning)\n\n\n<table border=\"0\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>expected</th>\n      <th>actual</th>\n    </tr>\n    <tr>\n      <th>product</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>A</th>\n      <td>116</td>\n      <td>119</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>131</td>\n      <td>149</td>\n    </tr>\n  </tbody>\n</table>\n\n\u9014\u4e2d\u306e\u30ec\u30d9\u30eb\u307e\u3067\u306e\u6307\u5b9a\u3068\u304b\u3001\u9014\u4e2d\u3060\u3051\u306e\u6307\u5b9a\u3068\u304b\u306f`xs`\u3092\u4f7f\u3046\n\n```py\ndf2.xs([\"Taro\",\"A\"],level=[0,2])\n```\n\u51fa\u529b\n\n<table border=\"0\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>expected</th>\n      <th>actual</th>\n    </tr>\n    <tr>\n      <th>year</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2013</th>\n      <td>116</td>\n      <td>119</td>\n    </tr>\n    <tr>\n      <th>2014</th>\n      <td>151</td>\n      <td>124</td>\n    </tr>\n    <tr>\n      <th>2015</th>\n      <td>135</td>\n      <td>109</td>\n    </tr>\n  </tbody>\n</table>\n\n\u3053\u308c\u3067Warnning\u306f\u51fa\u306a\u304f\u306a\u3063\u305f\u304c\u3001\u4e0a\u3068\u540c\u3058\u51e6\u7406\u3092\u66f8\u3044\u3066\u3082\u3053\u3063\u3061\u306e\u65b9\u304c\u3061\u3087\u3063\u3068\u9045\u3044\u30fb\u30fb\u30fb\n\n## MultiIndex\u306e\u4f7f\u3044\u6240\n\npandas.Index\u306fpandas.Series\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u666e\u901a\u306e\u5217\u306e\u3088\u3046\u306a\u611f\u899a\u3067\u4f7f\u3048\u306a\u3044\u3053\u3068\u304c\u7d50\u69cb\u3042\u308a\u3001\u5730\u5473\u306b\u30b9\u30c8\u30ec\u30b9\u304c\u305f\u307e\u308b\u3002\u3058\u3083\u3042SingleIndex\u3068Series\u306e\u307e\u307e\u3067\u3044\u3044\u3058\u3083\u3093 \u3068\u8a00\u3044\u305f\u3044\u3068\u3053\u308d\u3060\u304c\u3001\u305b\u3063\u304b\u304f\u3042\u308b\u3093\u3060\u304b\u3089\u4f7f\u3044\u3069\u3053\u308d\u3092\u8003\u3048\u308b\n\n### \u8907\u6570\u5217\u3092\u30ad\u30fc\u306b\u3057\u3066\u4e00\u610f\u306b\u6c7a\u307e\u308b\u30c7\u30fc\u30bf\u3092\u63a2\u3057\u3066\u304f\u308b\n\n\u5148\u307b\u3069\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u3053\u308c\u304c\u4e3b\u306a\u4f7f\u3044\u6240\u3067\u3057\u3087\u3046\u3002\n\n```py\ndf2.loc[(\"Taro\",2013,\"A\")]\n```\n\u540c\u3058\u3053\u3068\u3092SingleIndex\u3067\u3084\u308d\u3046\u3068\u601d\u3046\u3068\u3001\n\n```py\ndf1[(df1[\"name\"] == \"Taro\")&(df1[\"year\"] == 2013)&(df1[\"product\"] == \"A\")].iloc[0]\n```\n\u3068\u3044\u3046\u611f\u3058\u306b\u306a\u3063\u3066\u6c5a\u3044(\u591a\u5206\u3082\u3063\u3068\u3044\u3044\u66f8\u304d\u65b9\u304c\u3042\u308b\u304c)\u3002\n\u5f53\u7136\u901f\u5ea6\u306b\u3082\u5dee\u304c\u3042\u308b\u3002\u3068\u601d\u3063\u3066\uff15\u4e07\u4ef6\u304f\u3089\u3044\u306e\u30c7\u30fc\u30bf\u4f7f\u3063\u3066\u8a66\u3057\u305f\u3089\uff11\u8a66\u884c\u3067\u306f2~3\u500d\u304f\u3089\u3044\u3057\u304b\u5dee\u304c\u3064\u304b\u306a\u304b\u3063\u305f\u3002``%%timeit``\u3067\u8abf\u3079\u3088\u3046\u3068\u3057\u305f\u304c\u3001`df2`\u306e\u65b9\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u6bd4\u8f03\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\n\u307e\u305f\u3001\b\u6307\u5b9a\u3057\u305f\u30ad\u30fc\u306b\u8a72\u5f53\u3059\u308b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u308f\u304b\u3089\u306a\u3044\u6642\u3001MultiIndex\u306a\u3089\n\n```py\n(\"Taro\",2013,\"A\") in df2.index\n```\n\u3067\u3044\u3044\u304c\u3001SingleIndex\u3067\u306f\n\n```py\ndf1[(df1[\"name\"] == \"Taro\")&(df1[\"year\"] == 2013)&(df1[\"product\"] == \"A\")].shape[0]>0\n```\n\u3068\u304b\u3084\u3089\u306a\u3044\u3068\u3044\u3051\u306a\u3044(\u591a\u5206\u3082\u3063\u3068\u3044\u3044\u66f8\u304d\u65b9\u304c\u3042\u308b\u304c)\n\n### \u8868\u793a\u7528\n\n\u30ad\u30fc\u3068\u306a\u308b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u5165\u308c\u5b50\u306b\u306a\u3063\u305fMultiIndex\u306e\u51fa\u529b\u306f\u4eba\u9593\u306b\u3068\u3063\u3066\u306f\u8996\u8a8d\u6027\u304c\u9ad8\u3044\u306e\u3067\u3001\u51fa\u529b\u306e\u70ba\u3060\u3051\u306bMultiIndex\u3092\u4f7f\u3046\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u3002\nDataFrame\u306fhtml, excel, latex\u7b49\u3005\u591a\u6570\u306e\u5f62\u5f0f\u3067\u51fa\u529b\u3067\u304d\u3001\u30a8\u30af\u30bb\u30eb\u3067\u3042\u3063\u3066\u3082\u3061\u3083\u3093\u3068MultiIndex\u306b\u5408\u308f\u305b\u3066\u30bb\u30eb\u7d50\u5408\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u5730\u5473\u306b\u4fbf\u5229\u3002\n\u3061\u306a\u307f\u306b`df.to_csv`\u3067\u306f\u3001MultiIndex\u3067\u3042\u3063\u3066\u3082\u3061\u3083\u3093\u3068\u5168\u884c\u30d5\u30eb\u306b\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002\n\n## \u305d\u306e\u4ed6\u64cd\u4f5c\u65b9\u6cd5\u306a\u3069\n\n* \uff11\u30ec\u30d9\u30eb\u5206\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3057\u305f\u3044\u6642\u306fdf.index.get_level_values\u3092\u4f7f\u3046\n* MultiIndex\u3092SingleIndex\u306b\u623b\u3059\u306b\u306fdf.reset_index()\u3092\u4f7f\u3046\u3002\u5404level\u306e\u5217\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3001\u901a\u3057\u756a\u53f7\u304cindex\u306b\u306a\u3063\u305fDataFrame\u304c\u3067\u304d\u308b\u3002\n* \u305d\u306e\u4ed6\u3001\u30b9\u30e9\u30a4\u30b9\u7b49\u3005\u3042\u308b\u304c\u30a4\u30de\u30a4\u30c1\u4f7f\u3044\u65b9\u304c\u308f\u304b\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u307e\u305f\u306e\u6a5f\u4f1a\u306b\n", "tags": ["Python", "pandas"]}