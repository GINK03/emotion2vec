{"context": " More than 1 year has passed since last update.Tomcat8.0.15\u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\nlogging.properties\u306e\u30ea\u30cd\u30fc\u30e0/\u524a\u9664\n{TOMCAT_HOME}/conf/logging.properties\u3092\u524a\u9664\u307e\u305f\u306f\u62e1\u5f35\u5b50\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\nTomcat extras\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u9069\u5f53\u306a\u30df\u30e9\u30fc\u30b5\u30fc\u30d0\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306fjaist\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nhttp://ftp.jaist.ac.jp/pub/apache/tomcat/tomcat-8/v8.0.15/bin/extras/tomcat-juli-adapters.jar\nhttp://ftp.jaist.ac.jp/pub/apache/tomcat/tomcat-8/v8.0.15/bin/extras/tomcat-juli.jar\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u914d\u7f6e\ntomcat-juli-adapters.jar => {TOMCAT_HOME}/lib/tomcat-juli-adapters.jar\ntomcat-juli.jar => {TOMCAT_HOME}/bin/tomcat-juli.jar (\u65e2\u5b58\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304d\u63db\u3048\u307e\u3059)\n\nlog4j2\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u914d\u7f6e\n\u4ee5\u4e0b\u304b\u3089\u30d0\u30a4\u30ca\u30ea\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nhttp://www.apache.org/dyn/closer.cgi/logging/log4j/2.1/apache-log4j-2.1-bin.zip\n\u89e3\u51cd\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308b\u4ee5\u4e0b\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092 {TOMCAT_HOME}/lib/ \u914d\u4e0b\u306b\u7f6e\u304d\u307e\u3059\u3002\n\nlog4j-1.2-api-2.1.jar\nlog4j-api-2.1.jar\nlog4j-core-2.1.jar\n\n\nlog4j2.xml\u306e\u4f5c\u6210\u3068\u914d\u7f6e\nlog4j2.xml\u3092\u4f5c\u6210\u3057\u3066 {TOMCAT_HOME}/lib/ \u3084 {TOMCAT_HOME}/conf/ \u306b\u7f6e\u304d\u307e\u3059\u3002\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Configuration status=\"OFF\">\n    <Properties>\n        <Property name=\"pattern\">[%d{yyyy-MM-dd HH:mm:ss.SSS}] %-5p %-24c{1}- %m%n</Property>\n    </Properties>\n    <Appenders>\n        <Console name=\"console\" target=\"SYSTEM_OUT\">\n            <PatternLayout pattern=\"${pattern}\" />\n        </Console>\n        <RollingFile name=\"catalina\" fileName=\"/path/to/logs/catalina.log\" filePattern=\"/path/to/logs/catalina_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n        <RollingFile name=\"localhost\" fileName=\"/path/to/logs/localhost.log\" filePattern=\"/path/to/logs/localhost_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n        <RollingFile name=\"manager\" fileName=\"/path/to/logs/manager.log\" filePattern=\"/path/to/logs/manager_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n        <RollingFile name=\"host-manager\" fileName=\"/path/to/logs/host-manager.log\" filePattern=\"/path/to/logs/host-manager_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n    </Appenders>\n    <Loggers>\n        <Logger name=\"org.apache.catalina.core.ContainerBase.[Catalina].[localhost]\" level=\"info\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"localhost\"/>\n        </Logger>\n        <Logger name=\"org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager]\" level=\"info\" additivity=\"false\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"manager\"/>\n        </Logger>\n        <Logger name=\"org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager]\" level=\"info\" additivity=\"false\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"host-manager\"/>\n        </Logger>\n        <Root level=\"info\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"catalina\" />\n        </Root>\n    </Loggers>\n</Configuration>\n\n\n\u74b0\u5883\u5909\u6570JAVA_OPTS\u306e\u8a2d\u5b9a\n{TOMCAT_HOME}/bin/setenv.sh(Windows\u306e\u5834\u5408\u306fsetenv.bat)\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\uff08\u306a\u3044\u5834\u5408\u306f\u65b0\u898f\u4f5c\u6210\uff09\n# setenv.sh\nJAVA_OPTS=\"$JAVA_OPTS -Dlog4j.configurationFile=file:///path/to/log4j2.xml\"\n\n:: setenv.bat\n@SET JAVA_OPTS=%JAVA_OPTS% -Dlog4j.configurationFile=file://C:/path/to/log4j2.xml\n\nTomcat\u3092\u8d77\u52d5\u3059\u308b\u3068\u30ed\u30b0\u304clog4j2\u3067\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n[2015-01-15 14:35:37.518] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\examples has finished in 547 ms\n[2015-01-15 14:35:37.518] INFO  HostConfig              - Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea C:\\server\\apache-tomcat-8.0.15\\webapps\\host-manager \u3092\u914d\u5099\u3057\u307e\u3059\n[2015-01-15 14:35:37.655] INFO  TldScanner              - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of J\nARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n[2015-01-15 14:35:37.664] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\host-manager has finished in 146 ms\n[2015-01-15 14:35:37.664] INFO  HostConfig              - Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea C:\\server\\apache-tomcat-8.0.15\\webapps\\manager \u3092\u914d\u5099\u3057\u307e\u3059\n[2015-01-15 14:35:37.842] INFO  TldScanner              - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of J\nARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n[2015-01-15 14:35:37.848] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\manager has finished in 184 ms\n[2015-01-15 14:35:37.848] INFO  HostConfig              - Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea C:\\server\\apache-tomcat-8.0.15\\webapps\\ROOT \u3092\u914d\u5099\u3057\u307e\u3059\n[2015-01-15 14:35:37.990] INFO  TldScanner              - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of J\nARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n[2015-01-15 14:35:37.997] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\ROOT has finished in 149 ms\n[2015-01-15 14:35:38.000] INFO  Http11AprProtocol       - Starting ProtocolHandler [\"http-apr-8080\"]\n[2015-01-15 14:35:38.036] INFO  AjpAprProtocol          - Starting ProtocolHandler [\"ajp-apr-8009\"]\n[2015-01-15 14:35:38.038] INFO  Catalina                - Server startup in 1704 ms\n\n\u4ee5\u4e0a\u3002\nTomcat8.0.15\u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n## logging.properties\u306e\u30ea\u30cd\u30fc\u30e0/\u524a\u9664\n\n{TOMCAT_HOME}/conf/logging.properties\u3092\u524a\u9664\u307e\u305f\u306f\u62e1\u5f35\u5b50\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\n## Tomcat extras\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u9069\u5f53\u306a\u30df\u30e9\u30fc\u30b5\u30fc\u30d0\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306fjaist\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nhttp://ftp.jaist.ac.jp/pub/apache/tomcat/tomcat-8/v8.0.15/bin/extras/tomcat-juli-adapters.jar\nhttp://ftp.jaist.ac.jp/pub/apache/tomcat/tomcat-8/v8.0.15/bin/extras/tomcat-juli.jar\n\n## \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u914d\u7f6e\n\ntomcat-juli-adapters.jar => {TOMCAT_HOME}/lib/tomcat-juli-adapters.jar\ntomcat-juli.jar => {TOMCAT_HOME}/bin/tomcat-juli.jar (\u65e2\u5b58\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304d\u63db\u3048\u307e\u3059)\n\n## log4j2\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u914d\u7f6e\n\n\u4ee5\u4e0b\u304b\u3089\u30d0\u30a4\u30ca\u30ea\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nhttp://www.apache.org/dyn/closer.cgi/logging/log4j/2.1/apache-log4j-2.1-bin.zip\n\n\u89e3\u51cd\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308b\u4ee5\u4e0b\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092 {TOMCAT_HOME}/lib/ \u914d\u4e0b\u306b\u7f6e\u304d\u307e\u3059\u3002\n\n- log4j-1.2-api-2.1.jar\n- log4j-api-2.1.jar\n- log4j-core-2.1.jar\n\n## log4j2.xml\u306e\u4f5c\u6210\u3068\u914d\u7f6e\n\nlog4j2.xml\u3092\u4f5c\u6210\u3057\u3066 {TOMCAT_HOME}/lib/ \u3084 {TOMCAT_HOME}/conf/ \u306b\u7f6e\u304d\u307e\u3059\u3002\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Configuration status=\"OFF\">\n    <Properties>\n        <Property name=\"pattern\">[%d{yyyy-MM-dd HH:mm:ss.SSS}] %-5p %-24c{1}- %m%n</Property>\n    </Properties>\n    <Appenders>\n        <Console name=\"console\" target=\"SYSTEM_OUT\">\n            <PatternLayout pattern=\"${pattern}\" />\n        </Console>\n        <RollingFile name=\"catalina\" fileName=\"/path/to/logs/catalina.log\" filePattern=\"/path/to/logs/catalina_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n        <RollingFile name=\"localhost\" fileName=\"/path/to/logs/localhost.log\" filePattern=\"/path/to/logs/localhost_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n        <RollingFile name=\"manager\" fileName=\"/path/to/logs/manager.log\" filePattern=\"/path/to/logs/manager_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n        <RollingFile name=\"host-manager\" fileName=\"/path/to/logs/host-manager.log\" filePattern=\"/path/to/logs/host-manager_%d{yyyy-MM-dd}.gz\">\n            <PatternLayout pattern=\"${pattern}\" />\n            <Policies><TimeBasedTriggeringPolicy /></Policies>\n        </RollingFile>\n    </Appenders>\n    <Loggers>\n        <Logger name=\"org.apache.catalina.core.ContainerBase.[Catalina].[localhost]\" level=\"info\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"localhost\"/>\n        </Logger>\n        <Logger name=\"org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager]\" level=\"info\" additivity=\"false\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"manager\"/>\n        </Logger>\n        <Logger name=\"org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager]\" level=\"info\" additivity=\"false\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"host-manager\"/>\n        </Logger>\n        <Root level=\"info\">\n            <AppenderRef ref=\"console\" />\n            <AppenderRef ref=\"catalina\" />\n        </Root>\n    </Loggers>\n</Configuration>\n```\n## \u74b0\u5883\u5909\u6570JAVA_OPTS\u306e\u8a2d\u5b9a\n\n{TOMCAT_HOME}/bin/setenv.sh(Windows\u306e\u5834\u5408\u306fsetenv.bat)\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\uff08\u306a\u3044\u5834\u5408\u306f\u65b0\u898f\u4f5c\u6210\uff09\n\n```bash\n# setenv.sh\nJAVA_OPTS=\"$JAVA_OPTS -Dlog4j.configurationFile=file:///path/to/log4j2.xml\"\n```\n```bat\n:: setenv.bat\n@SET JAVA_OPTS=%JAVA_OPTS% -Dlog4j.configurationFile=file://C:/path/to/log4j2.xml\n```\n\nTomcat\u3092\u8d77\u52d5\u3059\u308b\u3068\u30ed\u30b0\u304clog4j2\u3067\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```\n[2015-01-15 14:35:37.518] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\examples has finished in 547 ms\n[2015-01-15 14:35:37.518] INFO  HostConfig              - Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea C:\\server\\apache-tomcat-8.0.15\\webapps\\host-manager \u3092\u914d\u5099\u3057\u307e\u3059\n[2015-01-15 14:35:37.655] INFO  TldScanner              - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of J\nARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n[2015-01-15 14:35:37.664] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\host-manager has finished in 146 ms\n[2015-01-15 14:35:37.664] INFO  HostConfig              - Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea C:\\server\\apache-tomcat-8.0.15\\webapps\\manager \u3092\u914d\u5099\u3057\u307e\u3059\n[2015-01-15 14:35:37.842] INFO  TldScanner              - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of J\nARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n[2015-01-15 14:35:37.848] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\manager has finished in 184 ms\n[2015-01-15 14:35:37.848] INFO  HostConfig              - Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea C:\\server\\apache-tomcat-8.0.15\\webapps\\ROOT \u3092\u914d\u5099\u3057\u307e\u3059\n[2015-01-15 14:35:37.990] INFO  TldScanner              - At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of J\nARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n[2015-01-15 14:35:37.997] INFO  HostConfig              - Deployment of web application directory C:\\server\\apache-tomcat-8.0.15\\webapps\\ROOT has finished in 149 ms\n[2015-01-15 14:35:38.000] INFO  Http11AprProtocol       - Starting ProtocolHandler [\"http-apr-8080\"]\n[2015-01-15 14:35:38.036] INFO  AjpAprProtocol          - Starting ProtocolHandler [\"ajp-apr-8009\"]\n[2015-01-15 14:35:38.038] INFO  Catalina                - Server startup in 1704 ms\n```\n\n\u4ee5\u4e0a\u3002\n", "tags": ["Tomcat", "log4j2"]}