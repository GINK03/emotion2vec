{"context": "#!/usr/bin/env ruby\n\nrequire 'json'\n\nelbs = `aws elb describe-load-balancers | jq '.LoadBalancerDescriptions[].LoadBalancerName'`\n\nputs \"| ELB Name | ConnectionDraining | ConnectionDraining Timeout | CrossZoneLoadBalancing | ConnectionSettingsTimeout | AccessLog |\"\nputs \"| --- | --- | --- | --- | --- | --- |\"\nelbs.each_line do |elb|\n  elb = elb.chomp\n  attributes                = JSON.load(`aws elb describe-load-balancer-attributes --load-balancer-name #{elb}`)\n  connection_during         = attributes['LoadBalancerAttributes']['ConnectionDraining']['Enabled']\n  connection_during_timeout = attributes['LoadBalancerAttributes']['ConnectionDraining']['Timeout'] || '-'\n  cross_zone                = attributes['LoadBalancerAttributes']['CrossZoneLoadBalancing']['Enabled']\n  connection_setting_idle   = attributes['LoadBalancerAttributes']['ConnectionSettings']['IdleTimeout']\n  access_log                = attributes['LoadBalancerAttributes']['AccessLog']['Enabled']\n  puts \"| #{elb.chomp} | #{connection_during} | #{connection_during_timeout} | #{cross_zone} | #{connection_setting_idle} | #{access_log} |\"\nend '.LoadBalancerDescriptions[].LoadBalancerName'\n\n| ELB Name | ConnectionDraining | ConnectionDraining Timeout | CrossZoneLoadBalancing | ConnectionSettingsTimeout | AccessLog |\n| --- | --- | --- | --- | --- | --- |\n| \"foo-elb\" | true | 300 | true | 60 | false |\n\n\u3068\u304b\u3067\u51fa\u308b\n\n```rb\n#!/usr/bin/env ruby\n\nrequire 'json'\n\nelbs = `aws elb describe-load-balancers | jq '.LoadBalancerDescriptions[].LoadBalancerName'`\n\nputs \"| ELB Name | ConnectionDraining | ConnectionDraining Timeout | CrossZoneLoadBalancing | ConnectionSettingsTimeout | AccessLog |\"\nputs \"| --- | --- | --- | --- | --- | --- |\"\nelbs.each_line do |elb|\n  elb = elb.chomp\n  attributes                = JSON.load(`aws elb describe-load-balancer-attributes --load-balancer-name #{elb}`)\n  connection_during         = attributes['LoadBalancerAttributes']['ConnectionDraining']['Enabled']\n  connection_during_timeout = attributes['LoadBalancerAttributes']['ConnectionDraining']['Timeout'] || '-'\n  cross_zone                = attributes['LoadBalancerAttributes']['CrossZoneLoadBalancing']['Enabled']\n  connection_setting_idle   = attributes['LoadBalancerAttributes']['ConnectionSettings']['IdleTimeout']\n  access_log                = attributes['LoadBalancerAttributes']['AccessLog']['Enabled']\n  puts \"| #{elb.chomp} | #{connection_during} | #{connection_during_timeout} | #{cross_zone} | #{connection_setting_idle} | #{access_log} |\"\nend '.LoadBalancerDescriptions[].LoadBalancerName'\n```\n\n```\n| ELB Name | ConnectionDraining | ConnectionDraining Timeout | CrossZoneLoadBalancing | ConnectionSettingsTimeout | AccessLog |\n| --- | --- | --- | --- | --- | --- |\n| \"foo-elb\" | true | 300 | true | 60 | false |\n```\n\n\u3068\u304b\u3067\u51fa\u308b\n", "tags": ["AWS", "elb"]}