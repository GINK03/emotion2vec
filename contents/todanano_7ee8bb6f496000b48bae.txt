{"context": "\n\npre,post,preun,postun\u306e$1\u306e\u5024\n\n\n\ncommand\npre\npost\npreun\npostun\n\n\n\n\nrpm -i\n1\n1\n-\n-\n\n\nrpm -e\n-\n-\n0\n0\n\n\nrpm -U\n2\n2\n1\n1\n\n\n\n\nrpm -U\u306e\u5b9f\u884c\u9806\u5e8f\n\nrpm -i \u65b0\u3057\u3044rpm\u30d1\u30c3\u30b1\u30fc\u30b8\nrpm -e \u53e4\u3044rpm\u30d1\u30c3\u30b1\u30fc\u30b8\n\n\n\u53c2\u8003\nhttps://vinelinux.org/docs/vine6/making-rpm/mr-symlink.html\n\nSPEC\u30d5\u30a1\u30a4\u30eb\u306e\u5206\u5c90\u51e6\u7406\n# \u4ee5\u4e0brpm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u51e6\u7406\u3092\u6307\u5b9a\u3059\u308b\u3002\n# rpm\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e2d\u8eab\u3092\u914d\u7f6e\u3059\u308b\u524d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%pre\n\nif [ $1 = 1 ]; then\n    # rpm -i\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -i pre\"\nelif [ $1 = 2 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U pre\"\nfi\n\n# rpm\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e2d\u8eab\u3092\u914d\u7f6e\u3057\u305f\u5f8c\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%post\n\nif [ $1 = 1 ]; then\n    # rpm -i\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -i post\"\nelif [ $1 = 2 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U post\"\nfi\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u524d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%preun\n\nif [ $1 = 0 ]; then\n    # rpm -e\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -e preun\"\nelif [ $1 = 1 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U preun\"\nfi\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u305f\u5f8c\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%postun\n\nif [ $1 = 0 ]; then\n    # rpm -e\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -e postun\"\nelif [ $1 = 1 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U postun\"\nfi\n\n\n\n\n\u4e0a\u8a18\u5185\u5bb9\u3092SPEC\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u3001rpm\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n[root@todanano ~]# rpm --prefix=/root/mytest -ivh MyPakcage-01.00-00.el6.x86_64.rpm\nPreparing...                ########################################### [100%]\nrpm -i pre\n   1:MyPakcage              ########################################### [100%]\nrpm -i post\n[root@todanano ~]# rpm -e MyPakcage\nrpm -e preun\nrpm -e postun\n[root@todanano ~]# rpm --prefix=/root/mytest -ivh MyPakcage-01.00-00.el6.x86_64.rpm\nPreparing...                ########################################### [100%]\nrpm -i pre\n   1:MyPakcage              ########################################### [100%]\nrpm -i post\n[root@todanano ~]# rpm --prefix=/root/mytest -Uvh MyPakcage-01.00-01.el6.x86_64.rpm\nPreparing...                ########################################### [100%]\nrpm -U pre\n   1:MyPakcage              ########################################### [100%]\nrpm -U post\nrpm -U preun\nrpm -U postun\n[root@todanano ~]#\n[root@todanano ~]#\n[root@todanano ~]# rpm -e MyPakcage\nrpm -e preun\nrpm -e postun\n[root@todanano ~]#\n[root@todanano ~]#\n[root@todanano ~]#\n\n\u3061\u306a\u307f\u306b\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u72b6\u614b\u3067-U\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\n\n[root@todanano ~]# rpm -e MyPackage\nrpm -e preun\nrpm -e postun\n[root@todanano ~]#\n[root@todanano ~]# rpm --prefix=/root/g3test -Uvh MyPackage.rpm\nPreparing...                ########################################### [100%]\nrpm -i pre\n   1:MyPackage              ########################################### [100%]\nrpm -i post\n[root@todanano ~]#\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u3001-U\u3060\u3051\u3069\u3001-i\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u51e6\u7406\u304c\u8d70\u308b\u3002\n\n\u7d14\u7c8b\u306a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3060\u3051\u4f55\u304b\u3059\u308b\u51e6\u7406\u304c\u3042\u308b\u304c\u3001\n\u3044\u304d\u306a\u308a-U\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u308b\u3053\u3068\u3092\u8003\u616e\u3057\u3066\u3001\u3001\u3001\u3001\n\u3068\u3044\u3046\u3088\u3046\u306a\u3053\u3068\u3092\u8003\u3048\u308b\u5fc5\u8981\u306f\u7121\u3055\u305d\u3046\uff08\u30fb\u03c9\u30fb\n\n\n## pre,post,preun,postun\u306e$1\u306e\u5024\n\n|command|pre|post|preun|postun|\n|---|:---:|:---:|:---:|:---:|\n|rpm -i|1|1|-|-|\n|rpm -e|-|-|0|0|\n|rpm -U|2|2|1|1|\n\n## rpm -U\u306e\u5b9f\u884c\u9806\u5e8f\n1. rpm -i \u65b0\u3057\u3044rpm\u30d1\u30c3\u30b1\u30fc\u30b8\n2. rpm -e \u53e4\u3044rpm\u30d1\u30c3\u30b1\u30fc\u30b8\n\n## \u53c2\u8003\nhttps://vinelinux.org/docs/vine6/making-rpm/mr-symlink.html\n\n## SPEC\u30d5\u30a1\u30a4\u30eb\u306e\u5206\u5c90\u51e6\u7406\n<pre>\n# \u4ee5\u4e0brpm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u51e6\u7406\u3092\u6307\u5b9a\u3059\u308b\u3002\n# rpm\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e2d\u8eab\u3092\u914d\u7f6e\u3059\u308b\u524d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%pre\n\nif [ $1 = 1 ]; then\n    # rpm -i\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -i pre\"\nelif [ $1 = 2 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U pre\"\nfi\n\n# rpm\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e2d\u8eab\u3092\u914d\u7f6e\u3057\u305f\u5f8c\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%post\n\nif [ $1 = 1 ]; then\n    # rpm -i\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -i post\"\nelif [ $1 = 2 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U post\"\nfi\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u524d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%preun\n\nif [ $1 = 0 ]; then\n    # rpm -e\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -e preun\"\nelif [ $1 = 1 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U preun\"\nfi\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u305f\u5f8c\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\u3002\n%postun\n\nif [ $1 = 0 ]; then\n    # rpm -e\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -e postun\"\nelif [ $1 = 1 ]; then\n    # rpm -U\u306e\u3068\u304d\u306b\u51e6\u7406\u3055\u308c\u308b\u5185\u5bb9\n    :\n    echo \"rpm -U postun\"\nfi\n\n\n</pre>\n\n## \u4e0a\u8a18\u5185\u5bb9\u3092SPEC\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u3001rpm\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n<pre>\n[root@todanano ~]# rpm --prefix=/root/mytest -ivh MyPakcage-01.00-00.el6.x86_64.rpm\nPreparing...                ########################################### [100%]\nrpm -i pre\n   1:MyPakcage              ########################################### [100%]\nrpm -i post\n[root@todanano ~]# rpm -e MyPakcage\nrpm -e preun\nrpm -e postun\n[root@todanano ~]# rpm --prefix=/root/mytest -ivh MyPakcage-01.00-00.el6.x86_64.rpm\nPreparing...                ########################################### [100%]\nrpm -i pre\n   1:MyPakcage              ########################################### [100%]\nrpm -i post\n[root@todanano ~]# rpm --prefix=/root/mytest -Uvh MyPakcage-01.00-01.el6.x86_64.rpm\nPreparing...                ########################################### [100%]\nrpm -U pre\n   1:MyPakcage              ########################################### [100%]\nrpm -U post\nrpm -U preun\nrpm -U postun\n[root@todanano ~]#\n[root@todanano ~]#\n[root@todanano ~]# rpm -e MyPakcage\nrpm -e preun\nrpm -e postun\n[root@todanano ~]#\n[root@todanano ~]#\n[root@todanano ~]#\n\n\u3061\u306a\u307f\u306b\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u72b6\u614b\u3067-U\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\n\n[root@todanano ~]# rpm -e MyPackage\nrpm -e preun\nrpm -e postun\n[root@todanano ~]#\n[root@todanano ~]# rpm --prefix=/root/g3test -Uvh MyPackage.rpm\nPreparing...                ########################################### [100%]\nrpm -i pre\n   1:MyPackage              ########################################### [100%]\nrpm -i post\n[root@todanano ~]#\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u3001-U\u3060\u3051\u3069\u3001-i\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u51e6\u7406\u304c\u8d70\u308b\u3002\n\n\u7d14\u7c8b\u306a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3060\u3051\u4f55\u304b\u3059\u308b\u51e6\u7406\u304c\u3042\u308b\u304c\u3001\n\u3044\u304d\u306a\u308a-U\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u308b\u3053\u3068\u3092\u8003\u616e\u3057\u3066\u3001\u3001\u3001\u3001\n\u3068\u3044\u3046\u3088\u3046\u306a\u3053\u3068\u3092\u8003\u3048\u308b\u5fc5\u8981\u306f\u7121\u3055\u305d\u3046\uff08\u30fb\u03c9\u30fb\n\n</pre>\n\n\n\n", "tags": ["rpm", "spec", "rpmbuild", "Linux"]}