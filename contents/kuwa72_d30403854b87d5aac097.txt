{"tags": ["PHP", "Smarty", "Gettext"], "context": " More than 1 year has passed since last update.\n\n\u3082\u3057\u304f\u306ftoken_get_all()\u306e\u4f7f\u3044\u65b9\u306e\u3088\u3046\u306a\u3082\u306e\n\u591a\u8a00\u8a9e\u5316\u306e\u8abf\u67fb\u306e\u305f\u3081\u306b\u4f5c\u3063\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u3002\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u975e\u5e38\u306b\u5358\u7d14\u3067\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u62e1\u5f35\u5b50.php\u30d5\u30a1\u30a4\u30eb\u5168\u3066\u306b\u5bfe\u3057\u3066\u3001PHP\u5185\u8535\u306e\u30ec\u30ad\u30b5\u30fc\u3067\u30c8\u30fc\u30af\u30f3\u306b\u5206\u5272\u3001\u591a\u30d0\u30a4\u30c8\u6587\u5b57\u5217(T_CONSTANT_ENCAPSED_STRING=$a[0])\u3092\u62bd\u51fa\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u884c\u6570\u3068\u8a72\u5f53\u884c\u3092\u51fa\u529b\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\u307e\u305a\u306f\u30bd\u30fc\u30b9\u3092\u3002\n<?php\n\nfunction filterMultibyte($tok)\n{\n    return array_filter($tok, function($x)\n    {\n        if ($x[0] === T_CONSTANT_ENCAPSED_STRING //\u6587\u5b57\u5217\u304b\uff1f\n            && !mb_check_encoding($x[1], 'ASCII') //ASCII\u5916?\n        ){\n            return true;\n        }\n        return false;\n    });\n}\n\nfunction findDir($dir = '.')\n{\n    $iterator = new RecursiveIteratorIterator(\n        new RecursiveDirectoryIterator($dir,\n        FilesystemIterator::CURRENT_AS_FILEINFO |\n        FilesystemIterator::KEY_AS_PATHNAME |\n        FilesystemIterator::SKIP_DOTS\n        )\n    );\n\n    $list = array();\n    foreach ($iterator as $fileinfo) { // $fileinfo\u306fSplFiIeInfo\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n        if ($fileinfo->isFile() && preg_match('/\\.php$/', $fileinfo->getPathname()) === 1) {\n            $source = file_get_contents($fileinfo->getPathname());\n            $source_array = explode(\"\\n\", $source); // \u8a72\u5f53\u884c\u3092\u51fa\u529b\u3059\u308b\u305f\u3081\u306b\u914d\u5217\u5316\u3057\u3066\u4fdd\u5b58\u3057\u3066\u304a\u304f\n            $tok = token_get_all($source);\n            $strs = filterMultibyte($tok);\n            foreach($strs as $s) {\n                fputcsv(STDOUT, array($fileinfo->getPathname(),$s[2],trim($source_array[$s[2]-1]),$s[1]));\n            }\n        }\n    }\n}\n\nfindDir(dirname(__FILE__));\n\n//\u4ee5\u4e0b\u30c6\u30b9\u30c8\u7528\ndefine('DEFAULT_PATH', 'c:/Users/\u7530\u5cf6\u662d\u5b87/Documents');\nfunction foo() {\n    $tplValue = \"\u9b4d\u9b4e\u6226\u8a18\u6469\u9640\u7f85\";\n}\n\n\u203b\u6307\u6458\u3092\u3046\u3051\u3066\u30bd\u30fc\u30b9\u76f4\u3057\u307e\u3057\u305f\u3002\n\u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u89e3\u6790\u3057\u305f\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\uff08\u5de6\u304b\u3089\u30d5\u30eb\u30d1\u30b9\u3001\u884c\u756a\u53f7\u3001\u8a72\u5f53\u884c\u306e\u5168\u3066\u3001\u6587\u5b57\u5217\u306e\u5168\u3066\uff09\n/home/vagrant/xxx/strout.php,43,\"define('DEFAULT_PATH', 'c:/Users/\u7530\u5cf6\u662d\u5b87/Documents');\",'c:/Users/\u7530\u5cf6\u662d\u5b87/Documents'\n/home/vagrant/xxx/strout.php,45,\"$tplValue = \"\"\u9b4d\u9b4e\u6226\u8a18\u6469\u9640\u7f85\"\";\",\"\"\"\u9b4d\u9b4e\u6226\u8a18\u6469\u9640\u7f85\"\"\"\n\nRecursiveDirectoryIterator\u3068RecursiveIteratorIterator\u304cfind(1)\u7684\u306a\u3053\u3068\u3092\u3059\u308bSPL\u306e\u30af\u30e9\u30b9\u3002\ntoken_get_all\u306f\u30c8\u30fc\u30af\u30f31\u500b\u3092[\u30c8\u30fc\u30af\u30f3\u306e\u7a2e\u985e, \u30c8\u30fc\u30af\u30f3\u305d\u306e\u3082\u306e\u306e\u6587\u5b57\u5217, \u884c\u756a\u53f7]\u3068\u3057\u3066\u3001\u4e8c\u91cd\u914d\u5217\u3067\u8fd4\u3057\u307e\u3059\u3002token_get_all\u306f\u30b7\u30f3\u30b0\u30eb\u30af\u30a9\u30fc\u30c8\u3001\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c8\u3001\u30d2\u30a2\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u4e00\u69d8\u306b\u6587\u5b57\u5b9a\u6570\u3068\u3057\u3066\u5b57\u53e5\u89e3\u6790\u3059\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u4eca\u56de\u306e\u7528\u9014\u306b\u306f\u975e\u5e38\u306b\u697d\u3067\u3057\u305f\u3002\n\n\uff08\u304a\u307e\u3051\uff09Smarty\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7528\u306e\u540c\u3058\u3088\u3046\u306a\u3082\u306e\n\u884c\u5358\u4f4d\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3066\u51fa\u529b\u3059\u308b\u3060\u3051\u3067\u3059\u3002HTML/Smarty\u30b3\u30e1\u30f3\u30c8\u306f\u62bd\u51fa\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3001\u4e00\u5fdc\u7121\u8996\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n<?php\n\nfunction filterMultibyte($ary) {\n  $res = array();\n  foreach ($ary as $k => $v) {\n    if (preg_match('/[^\\d\\w\\s_\\/\\'\"=\\?\\.:,\\*<>\\-\\(\\)#\\+\\\\\\|\\$\\^\\[\\]@%!{};~&`]/', $v) === 1) {\n      $item = array();\n      $item[1] = $v;\n      $item[2] = $k + 1;\n      $res[] = $item;\n    }\n  }\n  return $res;\n}\n\nfunction replaceToCRLF($str) {\n  $i = substr_count($str[0], \"\\n\");\n  #echo $str[0],$i,\"\\n\";\n  return $i === 0 ? \" \"  : str_repeat(\" \\n\", $i);\n}\n\nfunction replaceCommentToReturn($str) {\n  $str = preg_replace_callback('/(\\<\\!\\-\\-.*?\\-\\-\\>)/s', \"replaceToCRLF\", $str);\n  $str = preg_replace_callback('/({\\*.*?\\*})/s', \"replaceToCRLF\", $str);\n  return $str;\n}\n\nfunction findDir($dir = '.') {\n  $iterator = new RecursiveDirectoryIterator($dir);\n  $iterator = new RecursiveIteratorIterator($iterator);\n\n  $matches = array();\n  $list = array();\n  foreach ($iterator as $fileinfo) { // $fileinfo\u306fSplFiIeInfo\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n    if ($fileinfo->isFile() && preg_match('/\\.tpl$/', $fileinfo->getPathname()) === 1) {\n      $source = file_get_contents($fileinfo->getPathname());\n      $source1 = replaceCommentToReturn($source);\n      $source_array = explode(\"\\n\", $source1);\n      $strs = filterMultibyte($source_array);\n      foreach($strs as $s) {\n        $matches[] = $fileinfo->getPathname();\n        echo sprintf(\"%s:%d:%s\\n\", $fileinfo->getPathname(),$s[2],trim($source_array[$s[2]-1]));\n      }\n    }\n  }\n\n  echo \"\\n\";\n  $matches = array_unique($matches);\n\n  foreach($matches as $m) {\n    echo $m,\"\\n\";\n  }\n}\n\nfindDir();\n\n\n\n(\u8ffd\u8a18)xgettext\u3067\u5168\u6587\u5b57\u5217\u5b9a\u6570\u3092\u629c\u304d\u51fa\u3059\n\u6587\u5b57\u5217\u3092\u629c\u304d\u51fa\u3059\u3060\u3051\u306a\u3089xgettext\u3067\u3082\u53ef\u80fd\u3067\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u4ed6\u8a00\u8a9e\u5316\u4f5c\u696d\u6e08\u307f\u306e\u6587\u5b57\u5217\uff08_()\uff09\u3060\u3051\u62bd\u51fa\u3057\u307e\u3059\u304c\u3001-a\u3092\u3064\u3051\u308b\u3068\u5168\u3066\u306e\u6587\u5b57\u5217\u3092\u62bd\u51fa\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n$ find ./ -name '*.php' | xargs xgettext -j --language=php --from-code=UTF-8 -a\n\n\n\u65e2\u5b58\u30b3\u30fc\u30c9\u306e\u4ed6\u8a00\u8a9e\u5316\u306b\u3064\u3044\u3066\n\u4ee5\u524d\u591a\u8a00\u8a9e\u5316\u3092\u884c\u3063\u305f\u5834\u5408\u306e\u4f5c\u696d\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3067\u3057\u305f\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u591a\u8a00\u8a9e\u5316\u306b\u3064\u3044\u3066\u306f\u3001\u304a\u305d\u3089\u304f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306b\u6a5f\u80fd\u304c\u3042\u308b\u3068\u601d\u3046\u3067\u305d\u3061\u3089\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u306e\u8abf\u67fb\n\u539f\u6587\u62bd\u51fa\n\u7ffb\u8a33\n\u30b3\u30fc\u30c9\u5909\u66f4\u3002setlocale\u7b49\u521d\u671f\u5316\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\u3068\u3001\u6587\u5b57\u5217\u3092\u5168\u90e8_()\u3067\u56f2\u3080\u4f5c\u696d\u3002\npo\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\nmsgfmt\u3057\u3066\u30c7\u30d7\u30ed\u30a4\n\n\u5b9f\u969b\u306bi18n\u4f5c\u696d\u3092\u3059\u308b\u3068\u304d\u306f\u3001Poedit\u3092\u4f7f\u3046\u3068\u697d\u3067\u3059\u3002\n\u591a\u8a00\u8a9e\u5316\u5168\u822c\u3067\u3059\u304c\u3001\u6587\u5b57\u5217\u7d50\u5408\u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306f\u975e\u5e38\u306b\u7ffb\u8a33\u3057\u3065\u3089\u3044\u3067\u3059\u3002\uff08\"\u8a08\" . $price . \"\u5186\"\u306e\u3088\u3046\u306a\uff09\u540c\u69d8\u306b\u3001\u6587\u5b57\u5217\u5185\u3067\u306e\u5909\u6570\u5c55\u958b\u306fsprintf\u306b\u7f6e\u304d\u63db\u3048\u308b\u3079\u304d\u3067\u3059\u3002\n\u5143\u3005\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e2d\u306e\u30d6\u30e9\u30a6\u30b6\u306b\u51fa\u529b\u3059\u308b\u6587\u5b57\u5217\u3092\u65e5\u672c\u8a9e\u3067\u3092\u66f8\u3044\u3066\u3044\u305f\u30d7\u30ed\u30c0\u30af\u30c8\u3067\u3042\u308c\u3070\u3001\u6587\u5b57\u5217\u306f\u65e5\u672c\u8a9e\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u3044\u3066\u3001gettext\u3067\u82f1\u8a9e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5dee\u3057\u66ff\u3048\u308b\u307b\u3046\u304c\u697d\u3060\u3068\u601d\u3044\u307e\u3059\uff08\u65e5\u672c\u8a9e\u304c\u6b63\u3001\u4ed6\u306e\u8a00\u8a9e\u304c\u526f\uff09\u672a\u7ffb\u8a33\u306e\u6587\u5b57\u5217\u306f\u305d\u306e\u307e\u307e\u51fa\u529b\u3055\u308c\u308b\u70ba\u3001\u82f1\u8a9e\u306b\u3057\u3066\u304a\u3051\u3070\u65e5\u672c\u8a9e\u3088\u308a\u8aad\u3081\u308b\u4eba\u304c\u591a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u4f5c\u696d\u91cf\u7684\u306b\u306f\u304b\u306a\u308a\u3081\u3093\u3069\u304f\u3055\u304f\u306a\u308a\u307e\u3059\u3002\n\u3082\u3057\u304f\u306f[token_get_all()](http://www.php.net/manual/ja/function.token-get-all.php)\u306e\u4f7f\u3044\u65b9\u306e\u3088\u3046\u306a\u3082\u306e\n-------\n\n\n\u591a\u8a00\u8a9e\u5316\u306e\u8abf\u67fb\u306e\u305f\u3081\u306b\u4f5c\u3063\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u3002\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u975e\u5e38\u306b\u5358\u7d14\u3067\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u62e1\u5f35\u5b50.php\u30d5\u30a1\u30a4\u30eb\u5168\u3066\u306b\u5bfe\u3057\u3066\u3001PHP\u5185\u8535\u306e\u30ec\u30ad\u30b5\u30fc\u3067\u30c8\u30fc\u30af\u30f3\u306b\u5206\u5272\u3001\u591a\u30d0\u30a4\u30c8\u6587\u5b57\u5217(T_CONSTANT_ENCAPSED_STRING=$a[0])\u3092\u62bd\u51fa\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u884c\u6570\u3068\u8a72\u5f53\u884c\u3092\u51fa\u529b\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u307e\u305a\u306f\u30bd\u30fc\u30b9\u3092\u3002\n\n```php\n<?php\n\nfunction filterMultibyte($tok)\n{\n    return array_filter($tok, function($x)\n    {\n        if ($x[0] === T_CONSTANT_ENCAPSED_STRING //\u6587\u5b57\u5217\u304b\uff1f\n            && !mb_check_encoding($x[1], 'ASCII') //ASCII\u5916?\n        ){\n            return true;\n        }\n        return false;\n    });\n}\n\nfunction findDir($dir = '.')\n{\n    $iterator = new RecursiveIteratorIterator(\n        new RecursiveDirectoryIterator($dir,\n        FilesystemIterator::CURRENT_AS_FILEINFO |\n        FilesystemIterator::KEY_AS_PATHNAME |\n        FilesystemIterator::SKIP_DOTS\n        )\n    );\n\n    $list = array();\n    foreach ($iterator as $fileinfo) { // $fileinfo\u306fSplFiIeInfo\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n        if ($fileinfo->isFile() && preg_match('/\\.php$/', $fileinfo->getPathname()) === 1) {\n            $source = file_get_contents($fileinfo->getPathname());\n            $source_array = explode(\"\\n\", $source); // \u8a72\u5f53\u884c\u3092\u51fa\u529b\u3059\u308b\u305f\u3081\u306b\u914d\u5217\u5316\u3057\u3066\u4fdd\u5b58\u3057\u3066\u304a\u304f\n            $tok = token_get_all($source);\n            $strs = filterMultibyte($tok);\n            foreach($strs as $s) {\n                fputcsv(STDOUT, array($fileinfo->getPathname(),$s[2],trim($source_array[$s[2]-1]),$s[1]));\n            }\n        }\n    }\n}\n\nfindDir(dirname(__FILE__));\n\n//\u4ee5\u4e0b\u30c6\u30b9\u30c8\u7528\ndefine('DEFAULT_PATH', 'c:/Users/\u7530\u5cf6\u662d\u5b87/Documents');\nfunction foo() {\n    $tplValue = \"\u9b4d\u9b4e\u6226\u8a18\u6469\u9640\u7f85\";\n}\n```\n\n\u203b\u6307\u6458\u3092\u3046\u3051\u3066\u30bd\u30fc\u30b9\u76f4\u3057\u307e\u3057\u305f\u3002\n\n\u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u89e3\u6790\u3057\u305f\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\uff08\u5de6\u304b\u3089\u30d5\u30eb\u30d1\u30b9\u3001\u884c\u756a\u53f7\u3001\u8a72\u5f53\u884c\u306e\u5168\u3066\u3001\u6587\u5b57\u5217\u306e\u5168\u3066\uff09\n\n```csv\n/home/vagrant/xxx/strout.php,43,\"define('DEFAULT_PATH', 'c:/Users/\u7530\u5cf6\u662d\u5b87/Documents');\",'c:/Users/\u7530\u5cf6\u662d\u5b87/Documents'\n/home/vagrant/xxx/strout.php,45,\"$tplValue = \"\"\u9b4d\u9b4e\u6226\u8a18\u6469\u9640\u7f85\"\";\",\"\"\"\u9b4d\u9b4e\u6226\u8a18\u6469\u9640\u7f85\"\"\"\n```\n\n[RecursiveDirectoryIterator](http://www.php.net/manual/ja/class.recursivedirectoryiterator.php)\u3068[RecursiveIteratorIterator](http://jp1.php.net/manual/ja/class.recursiveiteratoriterator.php)\u304cfind(1)\u7684\u306a\u3053\u3068\u3092\u3059\u308bSPL\u306e\u30af\u30e9\u30b9\u3002\n\ntoken_get_all\u306f\u30c8\u30fc\u30af\u30f31\u500b\u3092```[\u30c8\u30fc\u30af\u30f3\u306e\u7a2e\u985e, \u30c8\u30fc\u30af\u30f3\u305d\u306e\u3082\u306e\u306e\u6587\u5b57\u5217, \u884c\u756a\u53f7]```\u3068\u3057\u3066\u3001\u4e8c\u91cd\u914d\u5217\u3067\u8fd4\u3057\u307e\u3059\u3002token_get_all\u306f\u30b7\u30f3\u30b0\u30eb\u30af\u30a9\u30fc\u30c8\u3001\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c8\u3001\u30d2\u30a2\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u4e00\u69d8\u306b\u6587\u5b57\u5b9a\u6570\u3068\u3057\u3066\u5b57\u53e5\u89e3\u6790\u3059\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u4eca\u56de\u306e\u7528\u9014\u306b\u306f\u975e\u5e38\u306b\u697d\u3067\u3057\u305f\u3002\n\n\uff08\u304a\u307e\u3051\uff09Smarty\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7528\u306e\u540c\u3058\u3088\u3046\u306a\u3082\u306e\n------\n\n\u884c\u5358\u4f4d\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3066\u51fa\u529b\u3059\u308b\u3060\u3051\u3067\u3059\u3002HTML/Smarty\u30b3\u30e1\u30f3\u30c8\u306f\u62bd\u51fa\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3001\u4e00\u5fdc\u7121\u8996\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```php\n<?php\n\nfunction filterMultibyte($ary) {\n  $res = array();\n  foreach ($ary as $k => $v) {\n    if (preg_match('/[^\\d\\w\\s_\\/\\'\"=\\?\\.:,\\*<>\\-\\(\\)#\\+\\\\\\|\\$\\^\\[\\]@%!{};~&`]/', $v) === 1) {\n      $item = array();\n      $item[1] = $v;\n      $item[2] = $k + 1;\n      $res[] = $item;\n    }\n  }\n  return $res;\n}\n\nfunction replaceToCRLF($str) {\n  $i = substr_count($str[0], \"\\n\");\n  #echo $str[0],$i,\"\\n\";\n  return $i === 0 ? \" \"  : str_repeat(\" \\n\", $i);\n}\n\nfunction replaceCommentToReturn($str) {\n  $str = preg_replace_callback('/(\\<\\!\\-\\-.*?\\-\\-\\>)/s', \"replaceToCRLF\", $str);\n  $str = preg_replace_callback('/({\\*.*?\\*})/s', \"replaceToCRLF\", $str);\n  return $str;\n}\n\nfunction findDir($dir = '.') {\n  $iterator = new RecursiveDirectoryIterator($dir);\n  $iterator = new RecursiveIteratorIterator($iterator);\n\n  $matches = array();\n  $list = array();\n  foreach ($iterator as $fileinfo) { // $fileinfo\u306fSplFiIeInfo\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n    if ($fileinfo->isFile() && preg_match('/\\.tpl$/', $fileinfo->getPathname()) === 1) {\n      $source = file_get_contents($fileinfo->getPathname());\n      $source1 = replaceCommentToReturn($source);\n      $source_array = explode(\"\\n\", $source1);\n      $strs = filterMultibyte($source_array);\n      foreach($strs as $s) {\n        $matches[] = $fileinfo->getPathname();\n        echo sprintf(\"%s:%d:%s\\n\", $fileinfo->getPathname(),$s[2],trim($source_array[$s[2]-1]));\n      }\n    }\n  }\n\n  echo \"\\n\";\n  $matches = array_unique($matches);\n\n  foreach($matches as $m) {\n    echo $m,\"\\n\";\n  }\n}\n\nfindDir();\n\n```\n\n\n(\u8ffd\u8a18)xgettext\u3067\u5168\u6587\u5b57\u5217\u5b9a\u6570\u3092\u629c\u304d\u51fa\u3059\n------\n\n\u6587\u5b57\u5217\u3092\u629c\u304d\u51fa\u3059\u3060\u3051\u306a\u3089xgettext\u3067\u3082\u53ef\u80fd\u3067\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u4ed6\u8a00\u8a9e\u5316\u4f5c\u696d\u6e08\u307f\u306e\u6587\u5b57\u5217\uff08`_()`\uff09\u3060\u3051\u62bd\u51fa\u3057\u307e\u3059\u304c\u3001-a\u3092\u3064\u3051\u308b\u3068\u5168\u3066\u306e\u6587\u5b57\u5217\u3092\u62bd\u51fa\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n```shell-session\n$ find ./ -name '*.php' | xargs xgettext -j --language=php --from-code=UTF-8 -a\n```\n\n## \u65e2\u5b58\u30b3\u30fc\u30c9\u306e\u4ed6\u8a00\u8a9e\u5316\u306b\u3064\u3044\u3066\n\n\u4ee5\u524d\u591a\u8a00\u8a9e\u5316\u3092\u884c\u3063\u305f\u5834\u5408\u306e\u4f5c\u696d\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3067\u3057\u305f\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u591a\u8a00\u8a9e\u5316\u306b\u3064\u3044\u3066\u306f\u3001\u304a\u305d\u3089\u304f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306b\u6a5f\u80fd\u304c\u3042\u308b\u3068\u601d\u3046\u3067\u305d\u3061\u3089\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n1. \u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u306e\u8abf\u67fb\n2. \u539f\u6587\u62bd\u51fa\n3. \u7ffb\u8a33\n4. \u30b3\u30fc\u30c9\u5909\u66f4\u3002setlocale\u7b49\u521d\u671f\u5316\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\u3068\u3001\u6587\u5b57\u5217\u3092\u5168\u90e8_()\u3067\u56f2\u3080\u4f5c\u696d\u3002\n5. po\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n6. msgfmt\u3057\u3066\u30c7\u30d7\u30ed\u30a4\n\n\u5b9f\u969b\u306bi18n\u4f5c\u696d\u3092\u3059\u308b\u3068\u304d\u306f\u3001[Poedit](http://poedit.net/)\u3092\u4f7f\u3046\u3068\u697d\u3067\u3059\u3002\n\n\u591a\u8a00\u8a9e\u5316\u5168\u822c\u3067\u3059\u304c\u3001\u6587\u5b57\u5217\u7d50\u5408\u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306f\u975e\u5e38\u306b\u7ffb\u8a33\u3057\u3065\u3089\u3044\u3067\u3059\u3002\uff08`\"\u8a08\" . $price . \"\u5186\"`\u306e\u3088\u3046\u306a\uff09\u540c\u69d8\u306b\u3001\u6587\u5b57\u5217\u5185\u3067\u306e\u5909\u6570\u5c55\u958b\u306fsprintf\u306b\u7f6e\u304d\u63db\u3048\u308b\u3079\u304d\u3067\u3059\u3002\n\n\u5143\u3005\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e2d\u306e\u30d6\u30e9\u30a6\u30b6\u306b\u51fa\u529b\u3059\u308b\u6587\u5b57\u5217\u3092\u65e5\u672c\u8a9e\u3067\u3092\u66f8\u3044\u3066\u3044\u305f\u30d7\u30ed\u30c0\u30af\u30c8\u3067\u3042\u308c\u3070\u3001\u6587\u5b57\u5217\u306f\u65e5\u672c\u8a9e\u306e\u307e\u307e\u306b\u3057\u3066\u304a\u3044\u3066\u3001gettext\u3067\u82f1\u8a9e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5dee\u3057\u66ff\u3048\u308b\u307b\u3046\u304c\u697d\u3060\u3068\u601d\u3044\u307e\u3059\uff08\u65e5\u672c\u8a9e\u304c\u6b63\u3001\u4ed6\u306e\u8a00\u8a9e\u304c\u526f\uff09\u672a\u7ffb\u8a33\u306e\u6587\u5b57\u5217\u306f\u305d\u306e\u307e\u307e\u51fa\u529b\u3055\u308c\u308b\u70ba\u3001\u82f1\u8a9e\u306b\u3057\u3066\u304a\u3051\u3070\u65e5\u672c\u8a9e\u3088\u308a\u8aad\u3081\u308b\u4eba\u304c\u591a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u4f5c\u696d\u91cf\u7684\u306b\u306f\u304b\u306a\u308a\u3081\u3093\u3069\u304f\u3055\u304f\u306a\u308a\u307e\u3059\u3002\n"}