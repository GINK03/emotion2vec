{"context": " More than 1 year has passed since last update.\n\nGroonga\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\u203b\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u8996\u70b9\u3067\u8aac\u660e\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\nuse_grn_expr_exec.c\n\ngrn_ctx_get\n\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\ngrn_obj *grn_ctx_get(grn_ctx *ctx, const char *name, int name_size);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\nname\nconst char *\n\u30b3\u30de\u30f3\u30c9\u540d\n\n\nname_size\nint\n\u30b3\u30de\u30f3\u30c9\u6587\u5b57\u5217\u9577\n\n\n\n\u623b\u308a\u5024\n\u30b0\u30eb\u30f3\u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n  grn_ctx ctx;\n\n  /* Groonga\u306e\u521d\u671f\u5316 */\n  grn_init();\n\n  /* \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u521d\u671f\u5316 */\n  grn_ctx_init(&ctx, 0);\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  table_create = grn_ctx_get(&ctx, \"table_create\", strlen(\"table_create\"));\n\n\ngrn_expr_get_var\n\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u306e\u5f15\u6570\u540d\u3092\u6307\u5b9a\u3057\u3066\u5f15\u6570\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\ngrn_obj *grn_expr_get_var(grn_ctx *ctx, grn_obj *expr,\n                                  const char *name, unsigned int name_size);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\nexpr\ngrn_obj *\n\u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\nname\nconst char *\n\u5f15\u6570\u540d\n\n\nname_size\nint\n\u5f15\u6570\u6587\u5b57\u5217\u9577\n\n\n\n\u623b\u308a\u5024\n\u30b0\u30eb\u30f3\u5f15\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *truncate = grn_ctx_get(&ctx, \"truncate\", strlen(\"truncate\"));\n\n  /* \u5f15\u6570\u3092\u53d6\u5f97\u3057\u3066\u5024\u3092\u8a2d\u5b9a */\n  grn_obj *table = grn_expr_get_var(&ctx, command, \"table\", strlen(\"table\"));\n\n\n  /* \u5f15\u6570\u306e\u4e2d\u8eab\u3092\u8a2d\u5b9a */\n  GRN_TEXT_PUTS(&ctx, table, \"Users\");\n\n\ngrn_expr_get_var_by_offset\n\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u306e\u5f15\u6570\u3092Offset\u306b\u3088\u308a\u6307\u5b9a\u3057\u3066\u53d6\u5f97\u3057\u307e\u3059\u3002\ngrn_obj *grn_expr_get_var_by_offset(grn_ctx *ctx, grn_obj *expr, unsigned int offset);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\nexpr\ngrn_obj *\n\u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\noffset\nunsigned int\n\u5f15\u6570\u306e\u9806\u756a\n\n\n\n\u623b\u308a\u5024\n\u30b0\u30eb\u30f3\u5f15\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *truncate = grn_ctx_get(&ctx, \"truncate\", strlen(\"truncate\"));\n\n  /* Offset\u304b\u3089\u5f15\u6570\u3092\u53d6\u5f97\u3057\u3066\u5024\u3092\u8a2d\u5b9a */\n  grn_obj *table = grn_expr_get_var_by_offset(&ctx, truncate, 0);\n\n  /* \u5f15\u6570\u306e\u4e2d\u8eab\u3092\u8a2d\u5b9a */\n  GRN_TEXT_PUTS(&ctx, table, \"Users\");\n\n\ngrn_expr_exec\n\u6307\u5b9a\u3057\u305f\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\ngrn_obj *grn_expr_exec(grn_ctx *ctx, grn_obj *expr, int nargs);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\nexpr\ngrn_obj *\n\u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\nnargs\nint\n\n\n\n\n\u623b\u308a\u5024\n\u30b0\u30eb\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n  grn_ctx ctx;\n\n  /* Groonga\u306e\u521d\u671f\u5316 */\n  grn_init();\n\n  /* \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u521d\u671f\u5316 */\n  grn_ctx_init(&ctx, 0);\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *status = grn_ctx_get(ctx, \"status\", strlen(\"status\"));\n\n  /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c*/\n  grn_expr_exec(ctx, status, 0);\n\n\ngrn_ctx_set_output_type\n\u5b9f\u884c\u7d50\u679c\u306a\u3069\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30bf\u30a4\u30d7\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\ngrn_content_type grn_ctx_get_output_type(grn_ctx *ctx);\ngrn_rc grn_ctx_set_output_type(grn_ctx *ctx, grn_content_type type);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\ntype\ngrn_content_type\n\u30b3\u30f3\u30c6\u30f3\u30c4\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n\n\n\u623b\u308a\u5024\n\u7d50\u679c\u30bb\u30c3\u30c8\n\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7\n\n\n\n\u5b9a\u6570\n\u6982\u8981\n\n\n\n\nGRN_CONTENT_TSV\nTSV\u5f62\u5f0f\n\n\nGRN_CONTENT_JSON\nJSON\u5f62\u5f0f\n\n\nGRN_CONTENT_XML\nXML\u5f62\u5f0f\n\n\n\n  grn_ctx ctx;\n\n  /* Groonga\u306e\u521d\u671f\u5316 */\n  grn_init();\n\n  /* \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u521d\u671f\u5316 */\n  grn_ctx_init(&ctx, 0);\n\n\n  /* \u51fa\u529b\u30bf\u30a4\u30d7\u306e\u8a2d\u5b9a */\n  grn_ctx_set_output_type(&ctx, GRN_CONTENT_JSON);\n\n\ngrn_expr_clear_vars\n\u5f15\u6570\u306e\u5024\u3092\u9664\u53bb\u3057\u307e\u3059\u3002\ngrn_rc grn_expr_clear_vars(grn_ctx *ctx, grn_obj *expr);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\nexpr\ngrn_obj *\n\u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n\n\u623b\u308a\u5024\n\u7d50\u679c\u30bb\u30c3\u30c8\n    /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n    grn_obj *table_create = grn_ctx_get(&ctx, \"table_create\", strlen(\"table_create\"));\n\n    /* \u5f15\u6570\u306e\u53d6\u5f97 */\n    grn_obj *name = grn_expr_get_var(&ctx, table_create, \"name\", strlen(\"name\"));\n    grn_obj *flags = grn_expr_get_var(&ctx, table_create , \"flags\", strlen(\"flags\"));\n    grn_obj *key_type = grn_expr_get_var(&ctx, table_create , \"key_type\", strlen(\"key_type\"));\n\n\n    /* \u5f15\u6570\u306e\u8a2d\u5b9a */\n    GRN_TEXT_PUTS(&ctx, name, \"Users\");\n    GRN_TEXT_PUTS(&ctx, flags, \"TABLE_HASH_KEY\");\n    GRN_TEXT_PUTS(&ctx, key_type, \"ShortText\");\n\n    /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c */\n    grn_expr_exec(&ctx, table_create, 0);\n\n\n    /* \u5f15\u6570\u306e\u30ea\u30bb\u30c3\u30c8 */\n    grn_expr_clear_vars(&ctx, table_create);\n\n    /* \u5f15\u6570\u306e\u53d6\u5f97 */\n    name = grn_expr_get_var(&ctx, table_create, \"name\", strlen(\"name\"));\n    flags = grn_expr_get_var(&ctx, table_create , \"flags\", strlen(\"flags\"));\n    key_type = grn_expr_get_var(&ctx, table_create , \"key_type\", strlen(\"key_type\"));\n\n\n    /* \u5f15\u6570\u306e\u8a2d\u5b9a */\n    GRN_TEXT_PUTS(&ctx, name, \"Comments\");\n    GRN_TEXT_PUTS(&ctx, flags, \"TABLE_HASH_KEY\");\n    GRN_TEXT_PUTS(&ctx, key_type, \"ShortText\");\n\n    /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c */\n    grn_expr_exec(&ctx, table_create, 0);\n\n\ngrn_ctx_info_get\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5185\u306b\u683c\u7d0d\u3055\u308c\u305f\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\ngrn_rc grn_ctx_info_get(grn_ctx *ctx, grn_ctx_info *info);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\ninfo\ngrn_ctx_info *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u60c5\u5831\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n\n\u623b\u308a\u5024\n\u7d50\u679c\u30bb\u30c3\u30c8\n  grn_ctx_info info;\n\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *status = grn_ctx_get(ctx, \"status\", strlen(\"status\"));\n\n  /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c*/\n  grn_expr_exec(&ctx, status, 0);\n\n\n  /* \u30b3\u30de\u30f3\u30c9\u7d50\u679c\u306e\u53d6\u5f97 */\n  grn_ctx_info_get(&ctx, &info);\n  printf(\"%.*s\\n\", (int)GRN_TEXT_LEN(info.outbuf), GRN_TEXT_VALUE(info.outbuf));\n\n\ngrn_ctx_recv\n\u7d50\u679c\u5185\u5bb9\u306e\u53d6\u5f97\nunsigned int grn_ctx_recv(grn_ctx *ctx, char **str, unsigned int *str_len, int *flags);\n\n\u5f15\u6570\n\n\n\n\u540d\u524d\n\u578b\n\u6982\u8981\n\n\n\n\nctx\ngrn_ctx *\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\nstr\nchar **\n\u7d50\u679c\u5185\u5bb9\n\n\nstr_len\nunsigned int *\n\u7d50\u679c\u5185\u5bb9\u6587\u5b57\u5217\u9577\n\n\nflags\nint *\n\u30d5\u30e9\u30b0\n\n\n\n\u623b\u308a\u5024\n\u7d50\u679c\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *status = grn_ctx_get(ctx, \"status\", strlen(\"status\"));\n\n  /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c*/\n  grn_expr_exec(&ctx, status, 0);\n\n  {\n    /* \u7d50\u679c\u306e\u53d6\u5f97 */\n    char *result;\n    unsigned int result_length;\n    int recv_flags;\n\n    grn_ctx_recv(&ctx, &result, &result_length, &recv_flags);\n    printf(\"%.*s\\n\", result_length, result);\n  }\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\nuse_grn_expr_exec.c\n# Groonga\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\n\u203b\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u8996\u70b9\u3067\u8aac\u660e\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n [use_grn_expr_exec.c](https://gist.github.com/Yujiro3/48e353aa41938663fc68 \"use_grn_expr_exec.c\")\n\n## grn_ctx_get\n\n\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n```c\ngrn_obj *grn_ctx_get(grn_ctx *ctx, const char *name, int name_size);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b            | \u6982\u8981             |\n|:-----------:|:-------------:|:----------------:|\n| ctx         |  grn_ctx *    | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8     |\n| name        |  const char * | \u30b3\u30de\u30f3\u30c9\u540d       |\n| name_size   |  int          | \u30b3\u30de\u30f3\u30c9\u6587\u5b57\u5217\u9577 |\n\n\n**\u623b\u308a\u5024**\n\n\u30b0\u30eb\u30f3\u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n```c\n  grn_ctx ctx;\n\n  /* Groonga\u306e\u521d\u671f\u5316 */\n  grn_init();\n\n  /* \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u521d\u671f\u5316 */\n  grn_ctx_init(&ctx, 0);\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  table_create = grn_ctx_get(&ctx, \"table_create\", strlen(\"table_create\"));\n```\n\n\n\n## grn_expr_get_var\n\n\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u306e\u5f15\u6570\u540d\u3092\u6307\u5b9a\u3057\u3066\u5f15\u6570\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```c\ngrn_obj *grn_expr_get_var(grn_ctx *ctx, grn_obj *expr,\n                                  const char *name, unsigned int name_size);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b            | \u6982\u8981                 |\n|:-----------:|:-------------:|:--------------------:|\n| ctx         |  grn_ctx *    | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8         |\n| expr        |  grn_obj *    | \u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 |\n| name        |  const char * | \u5f15\u6570\u540d               |\n| name_size   |  int          | \u5f15\u6570\u6587\u5b57\u5217\u9577         |\n\n\n**\u623b\u308a\u5024**\n\n\u30b0\u30eb\u30f3\u5f15\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n```c\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *truncate = grn_ctx_get(&ctx, \"truncate\", strlen(\"truncate\"));\n\n  /* \u5f15\u6570\u3092\u53d6\u5f97\u3057\u3066\u5024\u3092\u8a2d\u5b9a */\n  grn_obj *table = grn_expr_get_var(&ctx, command, \"table\", strlen(\"table\"));\n\n\n  /* \u5f15\u6570\u306e\u4e2d\u8eab\u3092\u8a2d\u5b9a */\n  GRN_TEXT_PUTS(&ctx, table, \"Users\");\n```\n\n\n\n\n\n## grn_expr_get_var_by_offset\n\n\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u306e\u5f15\u6570\u3092Offset\u306b\u3088\u308a\u6307\u5b9a\u3057\u3066\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```c\ngrn_obj *grn_expr_get_var_by_offset(grn_ctx *ctx, grn_obj *expr, unsigned int offset);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b            | \u6982\u8981                 |\n|:-----------:|:-------------:|:--------------------:|\n| ctx         |  grn_ctx *    | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8         |\n| expr        |  grn_obj *    | \u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 |\n| offset      |  unsigned int | \u5f15\u6570\u306e\u9806\u756a           |\n\n\n**\u623b\u308a\u5024**\n\n\u30b0\u30eb\u30f3\u5f15\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n```c\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *truncate = grn_ctx_get(&ctx, \"truncate\", strlen(\"truncate\"));\n\n  /* Offset\u304b\u3089\u5f15\u6570\u3092\u53d6\u5f97\u3057\u3066\u5024\u3092\u8a2d\u5b9a */\n  grn_obj *table = grn_expr_get_var_by_offset(&ctx, truncate, 0);\n\n  /* \u5f15\u6570\u306e\u4e2d\u8eab\u3092\u8a2d\u5b9a */\n  GRN_TEXT_PUTS(&ctx, table, \"Users\");\n```\n\n\n\n\n## grn_expr_exec\n\n\u6307\u5b9a\u3057\u305f\u7d44\u307f\u8fbc\u307f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```c\ngrn_obj *grn_expr_exec(grn_ctx *ctx, grn_obj *expr, int nargs);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b            | \u6982\u8981                 |\n|:-----------:|:-------------:|:--------------------:|\n| ctx         |  grn_ctx *    | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8         |\n| expr        |  grn_obj *    | \u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 |\n| nargs       |  int          |                      |\n\n\n**\u623b\u308a\u5024**\n\n\u30b0\u30eb\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n```c\n  grn_ctx ctx;\n\n  /* Groonga\u306e\u521d\u671f\u5316 */\n  grn_init();\n\n  /* \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u521d\u671f\u5316 */\n  grn_ctx_init(&ctx, 0);\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *status = grn_ctx_get(ctx, \"status\", strlen(\"status\"));\n\n  /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c*/\n  grn_expr_exec(ctx, status, 0);\n```\n\n\n\n\n## grn_ctx_set_output_type\n\n\u5b9f\u884c\u7d50\u679c\u306a\u3069\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30bf\u30a4\u30d7\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```c\ngrn_content_type grn_ctx_get_output_type(grn_ctx *ctx);\ngrn_rc grn_ctx_set_output_type(grn_ctx *ctx, grn_content_type type);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b                | \u6982\u8981                   |\n|:-----------:|:-----------------:|:----------------------:|\n| ctx         |  grn_ctx *        | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8           |\n| type        |  grn_content_type | \u30b3\u30f3\u30c6\u30f3\u30c4\u30d5\u30a9\u30fc\u30de\u30c3\u30c8 |\n\n\n**\u623b\u308a\u5024**\n\n\u7d50\u679c\u30bb\u30c3\u30c8\n\n\n**\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7**\n\n| \u5b9a\u6570             | \u6982\u8981      |\n|:----------------:|:---------:|\n| GRN_CONTENT_TSV  | TSV\u5f62\u5f0f   |\n| GRN_CONTENT_JSON | JSON\u5f62\u5f0f  |\n| GRN_CONTENT_XML  | XML\u5f62\u5f0f   |\n\n\n```c\n  grn_ctx ctx;\n\n  /* Groonga\u306e\u521d\u671f\u5316 */\n  grn_init();\n\n  /* \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u521d\u671f\u5316 */\n  grn_ctx_init(&ctx, 0);\n\n\n  /* \u51fa\u529b\u30bf\u30a4\u30d7\u306e\u8a2d\u5b9a */\n  grn_ctx_set_output_type(&ctx, GRN_CONTENT_JSON);\n```\n\n\n\n\n\n\n## grn_expr_clear_vars\n\n\u5f15\u6570\u306e\u5024\u3092\u9664\u53bb\u3057\u307e\u3059\u3002\n\n```c\ngrn_rc grn_expr_clear_vars(grn_ctx *ctx, grn_obj *expr);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b            | \u6982\u8981                 |\n|:-----------:|:-------------:|:--------------------:|\n| ctx         |  grn_ctx *    | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8         |\n| expr        |  grn_obj *    | \u30b3\u30de\u30f3\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 |\n\n\n**\u623b\u308a\u5024**\n\n\u7d50\u679c\u30bb\u30c3\u30c8\n\n\n\n```c\n    /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n    grn_obj *table_create = grn_ctx_get(&ctx, \"table_create\", strlen(\"table_create\"));\n\n    /* \u5f15\u6570\u306e\u53d6\u5f97 */\n    grn_obj *name = grn_expr_get_var(&ctx, table_create, \"name\", strlen(\"name\"));\n    grn_obj *flags = grn_expr_get_var(&ctx, table_create , \"flags\", strlen(\"flags\"));\n    grn_obj *key_type = grn_expr_get_var(&ctx, table_create , \"key_type\", strlen(\"key_type\"));\n\n\n    /* \u5f15\u6570\u306e\u8a2d\u5b9a */\n    GRN_TEXT_PUTS(&ctx, name, \"Users\");\n    GRN_TEXT_PUTS(&ctx, flags, \"TABLE_HASH_KEY\");\n    GRN_TEXT_PUTS(&ctx, key_type, \"ShortText\");\n\n    /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c */\n    grn_expr_exec(&ctx, table_create, 0);\n\n\n    /* \u5f15\u6570\u306e\u30ea\u30bb\u30c3\u30c8 */\n    grn_expr_clear_vars(&ctx, table_create);\n\n    /* \u5f15\u6570\u306e\u53d6\u5f97 */\n    name = grn_expr_get_var(&ctx, table_create, \"name\", strlen(\"name\"));\n    flags = grn_expr_get_var(&ctx, table_create , \"flags\", strlen(\"flags\"));\n    key_type = grn_expr_get_var(&ctx, table_create , \"key_type\", strlen(\"key_type\"));\n\n\n    /* \u5f15\u6570\u306e\u8a2d\u5b9a */\n    GRN_TEXT_PUTS(&ctx, name, \"Comments\");\n    GRN_TEXT_PUTS(&ctx, flags, \"TABLE_HASH_KEY\");\n    GRN_TEXT_PUTS(&ctx, key_type, \"ShortText\");\n\n    /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c */\n    grn_expr_exec(&ctx, table_create, 0);\n```\n\n\n\n\n\n## grn_ctx_info_get\n\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5185\u306b\u683c\u7d0d\u3055\u308c\u305f\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```c\ngrn_rc grn_ctx_info_get(grn_ctx *ctx, grn_ctx_info *info);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b              | \u6982\u8981                         |\n|:-----------:|:---------------:|:----------------------------:|\n| ctx         |  grn_ctx *      | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8                 |\n| info        |  grn_ctx_info * | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u60c5\u5831\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 |\n\n\n**\u623b\u308a\u5024**\n\n\u7d50\u679c\u30bb\u30c3\u30c8\n\n\n\n```c\n  grn_ctx_info info;\n\n\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *status = grn_ctx_get(ctx, \"status\", strlen(\"status\"));\n\n  /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c*/\n  grn_expr_exec(&ctx, status, 0);\n\n\n  /* \u30b3\u30de\u30f3\u30c9\u7d50\u679c\u306e\u53d6\u5f97 */\n  grn_ctx_info_get(&ctx, &info);\n  printf(\"%.*s\\n\", (int)GRN_TEXT_LEN(info.outbuf), GRN_TEXT_VALUE(info.outbuf));\n```\n\n\n\n## grn_ctx_recv\n\n\u7d50\u679c\u5185\u5bb9\u306e\u53d6\u5f97\n\n```c\nunsigned int grn_ctx_recv(grn_ctx *ctx, char **str, unsigned int *str_len, int *flags);\n```\n\n**\u5f15\u6570**\n\n| \u540d\u524d        | \u578b              | \u6982\u8981                         |\n|:-----------:|:---------------:|:----------------------------:|\n| ctx         |  grn_ctx *      | \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8                 |\n| str         |  char **        | \u7d50\u679c\u5185\u5bb9                     |\n| str_len     |  unsigned int * | \u7d50\u679c\u5185\u5bb9\u6587\u5b57\u5217\u9577             |\n| flags       |  int *          | \u30d5\u30e9\u30b0                       |\n\n**\u623b\u308a\u5024**\n\n\u7d50\u679c\n\n\n\n```c\n  /* \u30b3\u30de\u30f3\u30c9\u3092\u53d6\u5f97 */\n  grn_obj *status = grn_ctx_get(ctx, \"status\", strlen(\"status\"));\n\n  /* \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c*/\n  grn_expr_exec(&ctx, status, 0);\n\n  {\n    /* \u7d50\u679c\u306e\u53d6\u5f97 */\n    char *result;\n    unsigned int result_length;\n    int recv_flags;\n\n    grn_ctx_recv(&ctx, &result, &result_length, &recv_flags);\n    printf(\"%.*s\\n\", result_length, result);\n  }\n```\n\n\n## \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n [use_grn_expr_exec.c](https://gist.github.com/Yujiro3/48e353aa41938663fc68 \"use_grn_expr_exec.c\")\n", "tags": ["groonga"]}