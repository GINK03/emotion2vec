{"context": "\n\n\u5909\u66f4\u5c65\u6b74\n\n2016/06/08 Redmine\u306e\u52d5\u4f5c\u78ba\u8a8d\u9805\u76ee\u30b3\u30de\u30f3\u30c9\u3067\u306f\u6b63\u5e38\u306bWEBrick\u304c\u8d77\u52d5\u3057\u306a\u3044\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u3092\u4fee\u6b63\n2016/06/15 SendGrid\u3067\u306e\u30e1\u30fc\u30eb\u9001\u4fe1\u8a2d\u5b9a\u306e\u8ffd\u52a0\n2016/06/18 ssl\u8a2d\u5b9a\u306e\u8ffd\u52a0\n\n\u81ea\u5b85\u3067\u904a\u3076\u305f\u3081\u306b\u7acb\u3066\u305fRedmine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5468\u308a\u306e\u5099\u5fd8\u9332\nhttps\u5316\u306f\u5f8c\u3067\u3059\u308b\u4e88\u5b9a\u30fb\u30fb\u30fb\n\n\u524d\u63d0\u6761\u4ef6\n\nCentOS7\nnginx\nunicorn\nruby 2.2.5\nRedmine 3.2\npostgresql9.2\nssh\u63a5\u7d9a\u8a2d\u5b9a\u6e08\u307f\nsendgrid\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u53d6\u5f97\u6e08\u307f\uff08gmail\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u7121\u8996\uff09\nSELinux\u505c\u6b62\u6e08\u307f\nFirewalld\u8a2d\u5b9a\u6e08\u307f\n\u30e1\u30fc\u30eb\u914d\u9001\u306fgmail\u304b\u3089\u884c\u3046\u3002 \u203b\u3042\u3068\u304b\u3089sendgrid\u3078\u79fb\u884c\n\n\n\u53c2\u8003\u306b\u3057\u305fWeb\u30da\u30fc\u30b8\n\nhttp://blog.redmine.jp/articles/3_2/install/centos/\nhttp://www.torutk.com/projects/swe/wiki/Redmine%E3%82%92CentOS_7%E4%B8%8A%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%99%E3%83%BCUnicorn%E3%81%A8Nginx%E7%B7%A8\nhttp://www.torutk.com/projects/swe/wiki/Redmine%E3%82%92CentOS_6%E4%B8%8A%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%99%E3%83%BCUnicorn%E3%81%A8Nginx%E7%B7%A8#Unicorn%E3%81%AE%E8%A8%AD%E5%AE%9A\n\n\n\u524d\u6e96\u5099\n\nRedmine\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u958b\u767a\u30c4\u30fc\u30eb(C\u30b3\u30f3\u30d1\u30a4\u30e9\u7b49)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum -y groupinstall \"Development Tools\"\n\nRuby\u3068Passenger\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum -y install openssl-devel readline-devel zlib-devel curl-devel libyaml-devel libffi-devel\n\nPostgreSQL\u3068\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum -y install postgresql-server postgresql-devel\n\nImageMagick\u3068\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u30fb\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum -y install ImageMagick ImageMagick-devel ipa-pgothic-fonts\n\n\nNginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nNginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\nyum -y install http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306eupdate\nyum -y update nginx-release-centos\n\nnginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum -y --enablerepo=nginx install nginx\n\n\nRuby\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nRuby\u672c\u4f53\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ncurl -O https://cache.ruby-lang.org/pub/ruby/2.2/ruby-2.2.5.tar.gz\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306e\u89e3\u51cd\ntar xvf ruby-2.2.5.tar.gz\n\n\u89e3\u51cd\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u79fb\u52d5\ncd ruby-2.2.5\n\nmake\u6e96\u5099\n./configure --disable-install-doc\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\nmake\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nmake install\n\n\nbundler\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngem install bundler --no-rdoc --no-ri\n\n\nruby\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\nruby -v\n\n\nPostgreSQL\u306e\u521d\u671f\u8a2d\u5b9a\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30e9\u30b9\u30bf\u306e\u65b0\u898f\u4f5c\u6210\npostgresql-setup initdb\n\nRedmine\u304b\u3089PostgreSQL\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\u203b \u8a2d\u5b9a\u306f\u53c2\u8003web\u30da\u30fc\u30b81\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u901a\u308a\n\u203b \u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u3002\nvi /var/lib/pgsql/data/pg_hba.conf\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u7d42\u884c\u306b\u66f8\u304d\u3092\u8ffd\u52a0\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\nhost    redmine         redmine         127.0.0.1/32            md5\nhost    redmine         redmine         ::1/128                 md5\n\npostgresql\u306e\u5b9f\u884c\nsystemctl start postgresql\n\npostgresql\u306e\u81ea\u52d5\u5b9f\u884c\u8a2d\u5b9a\nsystemctl enable postgresql\n\nRedmine\u7528\u306e\u30e6\u30fc\u30b6\u4f5c\u6210\nsudo -u postgres createuser -P redmine\n\nRedmine\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\nsudo -u postgres createdb -E UTF-8 -l ja_JP.UTF-8 -O redmine -T template0 redmine\n\n\nRedmine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u672c\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u203b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d5\u30a9\u30eb\u30c0\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u308b\u3053\u3068\u3002\nsvn co http://svn.redmine.org/redmine/branches/3.2-stable /var/lib/redmine\n\n\nconfig\u306e\u7de8\u96c6\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u63a5\u7d9a\u8a2d\u5b9a\n\u203b database.yml.example\u3092\u30b3\u30d4\u30fc\u3057\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\u203b \u5fc5\u8981\u306a\u3044\u90e8\u5206\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u304b\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\n/var/lib/redmine/config/database.yml\nproduction:\n  adapter: postgresql\n  database: redmine\n  host: localhost\n  username: redmine\n  password: \"********\"\n  encoding: utf8\n\n\n\nemail\u8a2d\u5b9a\n\nGmail\u306e\u5834\u5408\n\u203b configuration.yml.example\u3092\u30b3\u30d4\u30fc\u3057\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n/var/lib/redmine/config/configuration.yml\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      enable_starttls_auto: true\n      address: \"smtp.gmail.com\"\n      port: 587\n      domain: \"smtp.gmail.com\"\n      authentication: :plain\n      user_name: \"\u81ea\u5206\u306egmail\u30a2\u30c9\u30ec\u30b9\"\n      password: \"\u4e0a\u8a18\u30a2\u30c9\u30ec\u30b9\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\"\n\n\n!!\u6ce8\u610f!! \n2016/05/21\u73fe\u5728\u3001\u4e0a\u8a18\u8a2d\u5b9a\u3067Gmail\u3078\u30e1\u30fc\u30eb\u9023\u643a\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3082\u300c\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u3092\u30d6\u30ed\u30c3\u30af\u3057\u307e\u3057\u305f\u300d\u3068\u3044\u3046\u30e1\u30fc\u30eb\u304c\u8a72\u5f53\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3055\u308c\u3001\u30e1\u30fc\u30eb\u304c\u9001\u308c\u307e\u305b\u3093\u3002\n\u4e0b\u8a18\u8a2d\u5b9a\u3092Gmail\u3067\u884c\u3046\u3053\u3068\u3067\u56de\u907f\u3067\u304d\u307e\u3059\u304c\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7684\u306b\u5fc3\u914d\u306a\u5834\u5408\u306f\u5225\u306e\u65b9\u6cd5\u3092\u3068\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\nGmail\u306e\u30e1\u30fc\u30eb\u914d\u9001\u30d6\u30ed\u30c3\u30af\u89e3\u9664\u65b9\u6cd5\n\u203b2016/05/21\u6642\u70b9\u306e\u60c5\u5831\u306e\u70ba\u3001\u53e4\u3044\u60c5\u5831\u306e\u5834\u5408\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u5fc5\u9808\n\nGmail\u3078\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n\u53f3\u8a18URL\u3078\u30a2\u30af\u30bb\u30b9\nhttps://accounts.google.com/DisplayUnlockCaptcha\n\n\u300cGoogle \u30a2\u30ab\u30a6\u30f3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u300d\u753b\u9762\u3067\u6b21\u3078\u3092\u30af\u30ea\u30c3\u30af\n\u53f3\u8a18URL\u3078\u30a2\u30af\u30bb\u30b9\nhttps://myaccount.google.com/security\n\n\u4e00\u756a\u4e0b\u307e\u3067\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3001\u300c\u5b89\u5168\u6027\u306e\u4f4e\u3044\u30a2\u30d7\u30ea\u306e\u8a31\u53ef\u300d\u3092\u6709\u52b9\u306b\u3059\u308b\n\n\u203b\u4e0a\u8a18\u624b\u6cd5\u304c\u5acc\u306a\u5834\u5408\u3001\u5225\u306e\u65b9\u6cd5\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nSendGrid\u306e\u5834\u5408\n\u203bSendGrid\u306eSMTP\u3092\u5229\u7528\u3057\u305f\u9001\u4fe1\u65b9\u6cd5\u3067\u3059\u3002\n\u203b\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u3059\u3067\u306b\u53d6\u5f97\u6e08\u307f\u3068\u3057\u3066\u9032\u3081\u307e\u3059\u3002\n\u203b configuration.yml.example\u3092\u30b3\u30d4\u30fc\u3057\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n/var/lib/redmine/config/configuration.yml\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      address: \"smtp.sendgrid.net\"\n      port: 587\n      authentication: login\n      domain: \"Your Redmine Domain\"\n      user_name: \"Sendgrid User ID\"\n      password: \"Sendgrid User Password\"\n\n\n\u203b domain:\u306e\u90e8\u5206\u306f\u4f55\u304c\u6b63\u89e3\u304b\u3061\u3087\u3063\u3068\u308f\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\u3000\u79c1\u306e\u5834\u5408\u306f\u4e0a\u8a18\u8a2d\u5b9a\u3067\u52d5\u3044\u3066\u307e\u3059\u7a0b\u5ea6\u306e\u7406\u89e3\u3067\u3059\u30fb\u30fb\u30fb\n\n\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u306e\u8a2d\u5b9a\n\n/var/lib/redmine/config/configuration.yml\nrmagick_font_path: /usr/share/fonts/ipa-pgothic/ipagp.ttf\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\ncd /var/lib/redmine\n\n\ngem\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbundle install --without development test --path vendor/bundle\n\n\n\u521d\u671f\u30c7\u30fc\u30bf\u306e\u767b\u9332\u3068\u8a2d\u5b9a\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u6539\u3056\u3093\u9632\u6b62\u7528\u79d8\u5bc6\u9375\u306e\u4f5c\u6210\nbundle exec rake generate_secret_token\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\nRAILS_ENV=production bundle exec rake db:migrate\n\n\ndefault\u30c7\u30fc\u30bf\u306e\u767b\u9332\nRAILS_ENV=production REDMINE_LANG=ja bundle exec rake redmine:load_default_data\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nWEBrick\u3092\u5b9f\u884c\u3057\u52d5\u4f5c\u78ba\u8a8d\nWEBrick\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3067\u30dd\u30fc\u30c83000\u3092\u4e00\u6642\u7684\u306b\u8a31\u53ef\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nruby bin/rails server webrick -e production\n\n\u4e0b\u8a18URL\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\nhttp://\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9:3000\nWEBrick\u306f\u300cctrl + C\u300d\u3067\u505c\u6b62\u3067\u304d\u307e\u3059\u3002\n\nUnicorn\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u203b \u53c2\u8003WEB\u30da\u30fc\u30b8 2 \u304c\u5927\u5909\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u8a2d\u5b9a\nredmine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\n\n/var/lib/redmine/Gemfile.local\ngem \"unicorn\"\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u4e0b\u8a18\u3092\u5b9f\u884c\n\u203b\u4eca\u56de\u306f/var/lib/redmine\nbundle update\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u203b WEBrick\u306e\u52d5\u4f5c\u78ba\u8a8d\u3067\u5229\u7528\u3057\u305f\u30dd\u30fc\u30c83000\u3092\u4e00\u6642\u7684\u306b\u5229\u7528\nbundle exec unicorn_rails -l 3000 -E production\n\n\nRedmine\u7528Unicorn\u8a2d\u5b9a\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\u203b\u3053\u3061\u3089\u3082\u53c2\u8003Web\u30da\u30fc\u30b82\u3092\u307b\u307c\u6d41\u7528\u3067\u3059\u30fb\u30fb\u30fb\n\n/var/lib/redmine/config/unicorn.rb\n# -*- coding: utf-8 -*-\n# Unicorn\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n# \u6b21\u306eURL\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u308b\u3002\n# http://unicorn.bogomips.org/examples/unicorn.conf.rb\n\n# \u5c02\u7528\u30b5\u30fc\u30d0\u30fc\u3067\u3042\u308c\u3070\u30b3\u30a2\u306b\u3064\u304d1\u500b\u4ee5\u4e0a\u3092\u6307\u5b9a\u3059\u308b\u3002\nworker_processes 2\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u5f85\u3061\u53d7\u3051\u53e3\u3001TCP\u3068UNIX\u30c9\u30e1\u30a4\u30f3\u3068\u304c\u6307\u5b9a\u53ef\u80fd\u3002\nlisten \"/var/lib/redmine/tmp/sockets/redmine.sock\", :backlog => 32\n# listen 8282, :tcp_nopush => true\n\n# \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u79d2\u6570\ntimeout 30\n\n# \u7a3c\u50cd\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306ePID\u3092\u66f8\u3044\u3066\u304a\u304f\u30d5\u30a1\u30a4\u30eb\u3002\npid \"/var/lib/redmine/tmp/pids/redmine.pid\"\n\n# \u30c7\u30fc\u30e2\u30f3\u3067\u8d77\u52d5\u3059\u308b\u3068\u6a19\u6e96\u51fa\u529b\uff0f\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u304c/dev/null\u306b\u306a\u308b\u306e\u3067\u3001\n# \u305d\u308c\u305e\u308c\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\u3002\n# /var/log\u3067\u4e00\u5143\u7ba1\u7406\u3059\u308b\u5834\u5408\u306f\u30d5\u30eb\u30d1\u30b9\u3067\u8a18\u8f09\u3001\u305d\u306e\u5834\u5408\u306f/var/log\u914d\u4e0b\u306bunicorn\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u304a\u304f\u3002\n# stderr_path '/var/log/unicorn/unicorn.stderr.log'\n# stdout_path '/var/log/unicorn/unicorn.stdout.log'\nstderr_path 'log/unicorn.stderr.log'\nstdout_path 'log/unicorn.stdout.log'\n\n# \u30de\u30b9\u30bf\u30fc\u30d7\u30ed\u30bb\u30b9\u8d77\u52d5\u6642\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ed\u30fc\u30c9\u3059\u308b(true\u6642)\u3002\n# \u30ef\u30fc\u30ab\u30fc\u30d7\u30ed\u30bb\u30b9\u5074\u3067\u30ed\u30fc\u30c9\u3092\u3057\u306a\u3044\u306e\u3067\u30e1\u30e2\u30ea\u6d88\u8cbb\u3001\u5fdc\u7b54\u6027\u826f\u597d\u306b\u306a\u308b\u3002\n# \u305f\u3060\u3057\u3001\u30bd\u30b1\u30c3\u30c8\u306ffork\u5f8c\u306b\u958b\u304d\u306a\u304a\u3059\u5fc5\u8981\u3042\u308a\u3002\n# HUP\u30b7\u30b0\u30ca\u30eb\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30ed\u30fc\u30c9\u3055\u308c\u306a\u3044\u3002\npreload_app true\n\n# unicorn\u3068\u540c\u4e00\u30db\u30b9\u30c8\u4e0a\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u9650\u5b9a\u3067\u3001\u7dad\u6301\u3055\u308c\u3066\u3044\u308b\u304b\u3092\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u547c\u3076\u524d\u306b\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\ncheck_client_connection false\n\nbefore_fork do |server, worker|\n  # Rails\u3067preload_app\u3092true\u306b\u3057\u3066\u3044\u308b\u3068\u304d\u306f\u5f37\u304f\u63a8\u5968\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.connection.disconnect!\nend\n\nafter_fork do |server, worker|\n  # Rails\u3067preload_app\u3092true\u306b\u3057\u3066\u3044\u308b\u3068\u304d\u306f\u5fc5\u9808\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.establish_connection\n\n  begin\n    uid, gid = Process.euid, Process.egid\n    # user, group = \"redmine\", \"redmine\"\n    # ENV[\"HOME\"] = \"/home/redmine\"\n    target_uid = Etc.getpwnam(user).uid\n    target_gid = Etc.getgrnam(group).gid\n    worker.tmp.chown(target_uid, target_gid)\n    if uid != target_uid or gid != target.gid\n      Process.initgroups(user, target_gid)\n      Process::GID.change_privilege(target_gid)\n      Process::UID.change_privilege(target_uid)\n    end\n  rescue\n    if RAILS_ENV = \"development\"\n      STDERR.puts \"could not change user, oh well\"\n    else\n      STDERR.puts \"could not change user, oh well\"\n      raise e\n    end\n  end\nend\n\n\n\u203b \u53c2\u8003WEB\u30da\u30fc\u30b8 3 \u304b\u3089\u304b\u306a\u308a\u6d41\u7528\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\u203b \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5468\u308a\u4ee5\u5916\u306f\u307b\u307c\u6d41\u7528\u3067\u3059\u30fb\u30fb\u30fb\n\nunicorn\u306e\u30b5\u30fc\u30d3\u30b9\u5316\n\u4e0b\u8a18\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bservice\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n/usr/lib/systemd/system/redmine.service\n\nredmine.service\n[Unit]\nDescription=Redmine Unicorn Server\n\n[Service]\nWorkingDirectory=/var/lib/redmine\nEnvironment=RAILS_ENV=production\nSyslogIdentifier=redmine\nPIDFile=/var/lib/redmine/tmp/pids/unicorn.pid\n\nExecStart=/usr/local/bin/bundle exec \"unicorn_rails -c config/unicorn.rb -E production\" \nExecStop=/usr/bin/kill -QUIT $MAINPID\nExecReload=/bin/kill -USR2 $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u78ba\u8a8d\nsystemctl start redmine\n\n\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u5e38\u306b\u52d5\u3044\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\nsystemctl status redmine\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\n\u25cf redmine.service - Redmine Unicorn Server\n   Loaded: loaded (/usr/lib/systemd/system/redmine.service; disabled; vendor preset: disabled)\n   Active: active (running) since \u91d1 2016-05-27 02:34:07 JST; 3 days ago\n Main PID: 11375 (ruby)\n   CGroup: /system.slice/redmine.service\n           \u251c\u250011375 unicorn_rails master -c config/unicorn.rb -E production\n           \u251c\u250011405 unicorn_rails worker[0] -c config/unicorn.rb -E production\n           \u2514\u250011407 unicorn_rails worker[1] -c config/unicorn.rb -E production\n\n\n\nNginx\u306e\u8a2d\u5b9a\nnginx\u3068unicron\u306e\u9023\u643a\u8a2d\u5b9a\u3067\u3059\u3002\n\u4e0b\u8a18\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n/ete/nginx/conf.d/redmine.conf\n\nhttp\u3067\u904b\u7528\u3059\u308b\u5834\u5408\n\nredmine.conf\nupstream redmine {\n    server unix:/var/lib/redmine/tmp/sockets/redmine.sock;\n}\nserver {\n    listen       80;\n    server_name  youdomainname.com;\n\n    root /var/lib/redmine/public;\n    client_max_body_size 1G;\n\n    location / {\n        try_files $uri/index.html $uri.html $uri @app;\n    }\n\n    location @app {\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_connect_timeout 60;\n        proxy_read_timeout 60;\n        proxy_send_timeout 600;\n        proxy_pass http://redmine;\n    }\n\n    error_page 500 502 503 504 /500.html;\n\n}\n\n\n\n\nhttps\u3067\u904b\u7528\u3059\u308b\u5834\u5408\nLet's Encrypt\u3067ssl\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n\u8a3c\u660e\u66f8\u53d6\u5f97\u65b9\u6cd5\u306a\u3069\u306f\u4e0b\u8a18\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttps://letsencrypt.jp\n\u203b\u306a\u3093\u3067\u3053\u306e\u8a2d\u5b9a\u304b\u306f\u307e\u3060\u8abf\u3079\u304d\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u5f8c\u3005\u4f55\u304c\u3069\u3046\u306a\u3063\u3066\u308b\u306e\u304b\u8abf\u3079\u307e\u3059\u30fb\u30fb\u30fb\n\u306a\u304a\u3001\u8a2d\u5b9a\u3092\u4e0b\u8a18\u30b5\u30a4\u30c8\u3067\u8a08\u6e2c\u3057\u305f\u7d50\u679cA+\u9802\u304d\u307e\u3057\u305f\u3002\nhttps://www.ssllabs.com/ssltest/\n\nredmine.conf\n\nupstream redmine {\n    server unix:/var/lib/redmine/tmp/sockets/redmine.sock;\n}\n\nserver {\n    listen 80;\n    server_name youredmine.domain;\n    rewrite ^ https://$server_name$request_uri? permanent;\n} \n\nserver {\n    listen       443 ssl;\n    server_name  youredmine.domain;\n\n    root /var/lib/redmine/public;\n\n    ssl on;\n\n    ssl_certificate /etc/letsencrypt/live/youredmine.domain/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/youredmine.domain/privkey.pem;\n    ssl_session_timeout 1d;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_tickets on;\n\n    ssl_dhparam /etc/nginx/ssl/dhparam.pem;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA';\n\n    ssl_prefer_server_ciphers on;\n\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_trusted_certificate /etc/letsencrypt/live/youredmine.domain/fullchain.pem;\n    resolver 8.8.8.8;\n\n    add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains;';\n\n    client_max_body_size 1G;\n\n    access_log  /var/log/nginx/redmine.access.log;\n    error_log /var/log/nginx/redmine.error.log;\n\n    location / {\n        try_files $uri/index.html $uri.html $uri @app;\n    }\n\n    location @app {\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_connect_timeout 60;\n        proxy_read_timeout 60;\n        proxy_send_timeout 600;\n        proxy_pass http://redmine;\n    }\n\n    error_page 500 502 503 504 /500.html;\n\n}\n\n\n\nnginx\u3092\u8d77\u52d5\u3059\u308b\nsystemctl start nginx\n\n\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u305f\u3089\u8a2d\u5b9a\u3057\u3066\u3044\u308bURL\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\n\n\u3042\u3068\u306f\u597d\u304d\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u3084\u30c6\u30fc\u30de\u3092\u5165\u308c\u3066\u904b\u7528\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u79c1\u306e\u5165\u308c\u305f(\u5165\u308c\u305f\u3044)\u30d7\u30e9\u30b0\u30a4\u30f3\n\nRedmine Theme Changer plugin\n\u30e6\u30fc\u30b6\u3054\u3068\u306b\u30c6\u30fc\u30de\u3092\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u30c6\u30fc\u30de\u306f\u7ba1\u7406\u8005\u304c\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308b\u304c\u3001\u30e6\u30fc\u30b6\u3054\u3068\u306b\u597d\u304d\u306b\u30c6\u30fc\u30de\u304c\u5165\u308c\u3089\u308c\u308b\u306e\u3067\u5229\u7528\u610f\u6b32\u304c\u6e67\u304f\u304b\u3082\uff1f\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\n\nSidebar Hide Plugin\n\u30c1\u30b1\u30c3\u30c8\u753b\u9762\u7b49\u3067\u30d5\u30a3\u30eb\u30bf\u30fc\u3084\u30a6\u30a9\u30c3\u30c1\u30e6\u30fc\u30b6\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u30b5\u30a4\u30c9\u30d0\u30fc\u3092\u96a0\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u5df7\u3067\u306f\u300cView customize plugin\u300d\u3092\u5165\u308c\u3001\u81ea\u5206\u3067js\u3092\u66f8\u304f\u3088\u3046\u3067\u3059\u304c\u79c1\u306f\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u5341\u5206\u3067\u3057\u305f\u3002\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n\nGood Job plugin\n\u5165\u308c\u305f\u3044\u30d7\u30e9\u30b0\u30a4\u30f3\u305d\u306e\uff11\n\u30c1\u30b1\u30c3\u30c8\u304c\u9589\u307e\u308b\u3068\u80cc\u666f\u304c\u300cGood job!\u300d\u306a\u611f\u3058\u306b\u306a\u308b\u307f\u305f\u3044\u3002\n\u30c1\u30b1\u30c3\u30c8\u9589\u3081\u308b\u305f\u3073\u5fc3\u304c\u307b\u3093\u308f\u304b\u3057\u305d\u3046\u3002\n\nRedmine Backlogs plugin\n\u5165\u308c\u3066\u307f\u305f\u3044\u30d7\u30e9\u30b0\u30a4\u30f3\u305d\u306e\uff12\n\u30b9\u30af\u30e9\u30e0\u958b\u767a\u3067\u4f7f\u3046\u30d0\u30c3\u30af\u30ed\u30b0\u6a5f\u80fd\u3092redmine\u4e0a\u3067\u63d0\u4f9b\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u307e\u3060\u81ea\u5206\u7528\u306eredmine\u306a\u306e\u3067\u5fc5\u8981\u306a\u3044\u304b\u306a\u30fb\u30fb\u30fb\uff1f\n\u3082\u3046\u3061\u3087\u3063\u3068\u958b\u767a\u624b\u6cd5\u306a\u3069\u3092\u52c9\u5f37\u3057\u3066\u304b\u3089\u8a66\u3057\u305f\u3044\n\n\u79c1\u306e\u5165\u308c\u305f\u30c6\u30fc\u30de\n\nA1\nhttp://redminecrm.com/pages/a1-theme\n\u9ed2\u3063\u307d\u3044\u753b\u9762\u304c\u597d\u304d\u306a\u306e\u3067\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n\u304b\u3063\u3053\u3044\u3044\n\nAxiom\nhttps://github.com/hulihanapplications/axiom\n\u3053\u3061\u3089\u3082\u9ed2\u3063\u307d\u3044\u753b\u9762\u306e\u30c6\u30fc\u30de\u3002\n\u30ae\u30fc\u30af\u306a\u611f\u3058\u304c\u3044\u3044\u611f\u3058\u3002\n\u305f\u3060\u753b\u9762\u304c\u3067\u304b\u3044PC\u306e\u3060\u3068\u63cf\u753b\u7bc4\u56f2\u304c\u72ed\u304f\u611f\u3058\u308b\u304b\u3082\uff1f\n\ngitmike theme\nhttps://github.com/makotokw/redmine-theme-gitmike\nGithub\u3063\u307d\u304f\u898b\u3048\u308b\u30c6\u30fc\u30de\u3002\n\u5165\u308c\u3066\u307f\u305f\u3051\u3069\u3042\u3093\u307e\u308a\u4f7f\u3063\u3066\u306a\u3044\u304b\u3082\u30fb\u30fb\u30fb\n\n# \u5909\u66f4\u5c65\u6b74\n\n1. 2016/06/08 Redmine\u306e\u52d5\u4f5c\u78ba\u8a8d\u9805\u76ee\u30b3\u30de\u30f3\u30c9\u3067\u306f\u6b63\u5e38\u306bWEBrick\u304c\u8d77\u52d5\u3057\u306a\u3044\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u3092\u4fee\u6b63\n2. 2016/06/15 SendGrid\u3067\u306e\u30e1\u30fc\u30eb\u9001\u4fe1\u8a2d\u5b9a\u306e\u8ffd\u52a0\n3. 2016/06/18 ssl\u8a2d\u5b9a\u306e\u8ffd\u52a0\n\n\u81ea\u5b85\u3067\u904a\u3076\u305f\u3081\u306b\u7acb\u3066\u305fRedmine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5468\u308a\u306e\u5099\u5fd8\u9332\nhttps\u5316\u306f\u5f8c\u3067\u3059\u308b\u4e88\u5b9a\u30fb\u30fb\u30fb\n\n# \u524d\u63d0\u6761\u4ef6\n\n* CentOS7\n* nginx\n* unicorn\n* ruby 2.2.5\n* Redmine 3.2\n* postgresql9.2\n* ssh\u63a5\u7d9a\u8a2d\u5b9a\u6e08\u307f\n* sendgrid\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u53d6\u5f97\u6e08\u307f\uff08gmail\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u7121\u8996\uff09\n* SELinux\u505c\u6b62\u6e08\u307f\n* Firewalld\u8a2d\u5b9a\u6e08\u307f\n* \u30e1\u30fc\u30eb\u914d\u9001\u306fgmail\u304b\u3089\u884c\u3046\u3002 \u203b\u3042\u3068\u304b\u3089sendgrid\u3078\u79fb\u884c\n\n# \u53c2\u8003\u306b\u3057\u305fWeb\u30da\u30fc\u30b8\n1. http://blog.redmine.jp/articles/3_2/install/centos/\n1. http://www.torutk.com/projects/swe/wiki/Redmine%E3%82%92CentOS_7%E4%B8%8A%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%99%E3%83%BCUnicorn%E3%81%A8Nginx%E7%B7%A8\n1. http://www.torutk.com/projects/swe/wiki/Redmine%E3%82%92CentOS_6%E4%B8%8A%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%99%E3%83%BCUnicorn%E3%81%A8Nginx%E7%B7%A8#Unicorn%E3%81%AE%E8%A8%AD%E5%AE%9A\n\n# \u524d\u6e96\u5099\n\n## Redmine\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u958b\u767a\u30c4\u30fc\u30eb(C\u30b3\u30f3\u30d1\u30a4\u30e9\u7b49)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nyum -y groupinstall \"Development Tools\"\n```\n\nRuby\u3068Passenger\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nyum -y install openssl-devel readline-devel zlib-devel curl-devel libyaml-devel libffi-devel\n```\n\nPostgreSQL\u3068\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nyum -y install postgresql-server postgresql-devel\n```\n\nImageMagick\u3068\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u30fb\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n```\nyum -y install ImageMagick ImageMagick-devel ipa-pgothic-fonts\n```\n\n## Nginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nNginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n\n```\nyum -y install http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n```\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306eupdate\n\n```\nyum -y update nginx-release-centos\n```\n\nnginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nyum -y --enablerepo=nginx install nginx\n```\n\n## Ruby\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n### Ruby\u672c\u4f53\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\ncurl -O https://cache.ruby-lang.org/pub/ruby/2.2/ruby-2.2.5.tar.gz\n```\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306e\u89e3\u51cd\n\n```\ntar xvf ruby-2.2.5.tar.gz\n```\n\n\u89e3\u51cd\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u79fb\u52d5\n\n```\ncd ruby-2.2.5\n```\n\nmake\u6e96\u5099\n\n```\n./configure --disable-install-doc\n```\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\n\n```\nmake\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nmake install\n```\n\n### bundler\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ngem install bundler --no-rdoc --no-ri\n```\n\n\n### ruby\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n\n```\nruby -v\n```\n\n## PostgreSQL\u306e\u521d\u671f\u8a2d\u5b9a\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30e9\u30b9\u30bf\u306e\u65b0\u898f\u4f5c\u6210\n\n```\npostgresql-setup initdb\n```\n\nRedmine\u304b\u3089PostgreSQL\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\u203b \u8a2d\u5b9a\u306f\u53c2\u8003web\u30da\u30fc\u30b81\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u901a\u308a\n\u203b \u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u3002\n\n```\nvi /var/lib/pgsql/data/pg_hba.conf\n```\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u7d42\u884c\u306b\u66f8\u304d\u3092\u8ffd\u52a0\n\n```\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\nhost    redmine         redmine         127.0.0.1/32            md5\nhost    redmine         redmine         ::1/128                 md5\n```\n\npostgresql\u306e\u5b9f\u884c\n\n```\nsystemctl start postgresql\n```\n\npostgresql\u306e\u81ea\u52d5\u5b9f\u884c\u8a2d\u5b9a\n\n```\nsystemctl enable postgresql\n```\n\nRedmine\u7528\u306e\u30e6\u30fc\u30b6\u4f5c\u6210\n\n```\nsudo -u postgres createuser -P redmine\n```\n\nRedmine\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n\n```\nsudo -u postgres createdb -E UTF-8 -l ja_JP.UTF-8 -O redmine -T template0 redmine\n```\n\n# Redmine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n## \u672c\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u203b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d5\u30a9\u30eb\u30c0\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u308b\u3053\u3068\u3002\n\n```\nsvn co http://svn.redmine.org/redmine/branches/3.2-stable /var/lib/redmine\n```\n\n## config\u306e\u7de8\u96c6\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u63a5\u7d9a\u8a2d\u5b9a\n\u203b database.yml.example\u3092\u30b3\u30d4\u30fc\u3057\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\u203b \u5fc5\u8981\u306a\u3044\u90e8\u5206\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u304b\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\n```/var/lib/redmine/config/database.yml\nproduction:\n  adapter: postgresql\n  database: redmine\n  host: localhost\n  username: redmine\n  password: \"********\"\n  encoding: utf8\n```\n\n### email\u8a2d\u5b9a\n#### Gmail\u306e\u5834\u5408\n\u203b configuration.yml.example\u3092\u30b3\u30d4\u30fc\u3057\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n```/var/lib/redmine/config/configuration.yml\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      enable_starttls_auto: true\n      address: \"smtp.gmail.com\"\n      port: 587\n      domain: \"smtp.gmail.com\"\n      authentication: :plain\n      user_name: \"\u81ea\u5206\u306egmail\u30a2\u30c9\u30ec\u30b9\"\n      password: \"\u4e0a\u8a18\u30a2\u30c9\u30ec\u30b9\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\"\n```\n\n__!!\u6ce8\u610f!!__ \n2016/05/21\u73fe\u5728\u3001\u4e0a\u8a18\u8a2d\u5b9a\u3067Gmail\u3078\u30e1\u30fc\u30eb\u9023\u643a\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3082\u300c\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u3092\u30d6\u30ed\u30c3\u30af\u3057\u307e\u3057\u305f\u300d\u3068\u3044\u3046\u30e1\u30fc\u30eb\u304c\u8a72\u5f53\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3055\u308c\u3001\u30e1\u30fc\u30eb\u304c\u9001\u308c\u307e\u305b\u3093\u3002\n\u4e0b\u8a18\u8a2d\u5b9a\u3092Gmail\u3067\u884c\u3046\u3053\u3068\u3067\u56de\u907f\u3067\u304d\u307e\u3059\u304c\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7684\u306b\u5fc3\u914d\u306a\u5834\u5408\u306f\u5225\u306e\u65b9\u6cd5\u3092\u3068\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n##### Gmail\u306e\u30e1\u30fc\u30eb\u914d\u9001\u30d6\u30ed\u30c3\u30af\u89e3\u9664\u65b9\u6cd5\n\u203b2016/05/21\u6642\u70b9\u306e\u60c5\u5831\u306e\u70ba\u3001\u53e4\u3044\u60c5\u5831\u306e\u5834\u5408\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u5fc5\u9808\n\n1. Gmail\u3078\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n1. \u53f3\u8a18URL\u3078\u30a2\u30af\u30bb\u30b9\nhttps://accounts.google.com/DisplayUnlockCaptcha\n1. \u300cGoogle \u30a2\u30ab\u30a6\u30f3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u300d\u753b\u9762\u3067\u6b21\u3078\u3092\u30af\u30ea\u30c3\u30af\n1. \u53f3\u8a18URL\u3078\u30a2\u30af\u30bb\u30b9\nhttps://myaccount.google.com/security\n1. \u4e00\u756a\u4e0b\u307e\u3067\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3001\u300c\u5b89\u5168\u6027\u306e\u4f4e\u3044\u30a2\u30d7\u30ea\u306e\u8a31\u53ef\u300d\u3092\u6709\u52b9\u306b\u3059\u308b\n\n__\u203b\u4e0a\u8a18\u624b\u6cd5\u304c\u5acc\u306a\u5834\u5408\u3001\u5225\u306e\u65b9\u6cd5\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002__\n\n#### SendGrid\u306e\u5834\u5408\n\u203bSendGrid\u306eSMTP\u3092\u5229\u7528\u3057\u305f\u9001\u4fe1\u65b9\u6cd5\u3067\u3059\u3002\n\u203b\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u3059\u3067\u306b\u53d6\u5f97\u6e08\u307f\u3068\u3057\u3066\u9032\u3081\u307e\u3059\u3002\n\u203b configuration.yml.example\u3092\u30b3\u30d4\u30fc\u3057\u4e0b\u8a18\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n```/var/lib/redmine/config/configuration.yml\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      address: \"smtp.sendgrid.net\"\n      port: 587\n      authentication: login\n      domain: \"Your Redmine Domain\"\n      user_name: \"Sendgrid User ID\"\n      password: \"Sendgrid User Password\"\n```\n\n\u203b `domain:`\u306e\u90e8\u5206\u306f\u4f55\u304c\u6b63\u89e3\u304b\u3061\u3087\u3063\u3068\u308f\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\u3000\u79c1\u306e\u5834\u5408\u306f\u4e0a\u8a18\u8a2d\u5b9a\u3067\u52d5\u3044\u3066\u307e\u3059\u7a0b\u5ea6\u306e\u7406\u89e3\u3067\u3059\u30fb\u30fb\u30fb\n\n### \u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u306e\u8a2d\u5b9a\n\n```/var/lib/redmine/config/configuration.yml\nrmagick_font_path: /usr/share/fonts/ipa-pgothic/ipagp.ttf\n```\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\n```\ncd /var/lib/redmine\n```\n\n### gem\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\nbundle install --without development test --path vendor/bundle\n```\n\n## \u521d\u671f\u30c7\u30fc\u30bf\u306e\u767b\u9332\u3068\u8a2d\u5b9a\n### \u30bb\u30c3\u30b7\u30e7\u30f3\u6539\u3056\u3093\u9632\u6b62\u7528\u79d8\u5bc6\u9375\u306e\u4f5c\u6210\n```\nbundle exec rake generate_secret_token\n```\n\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n```\nRAILS_ENV=production bundle exec rake db:migrate\n```\n\n### default\u30c7\u30fc\u30bf\u306e\u767b\u9332\n```\nRAILS_ENV=production REDMINE_LANG=ja bundle exec rake redmine:load_default_data\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\nWEBrick\u3092\u5b9f\u884c\u3057\u52d5\u4f5c\u78ba\u8a8d\nWEBrick\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3067\u30dd\u30fc\u30c83000\u3092\u4e00\u6642\u7684\u306b\u8a31\u53ef\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\nruby bin/rails server webrick -e production\n```\n\n\u4e0b\u8a18URL\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\nhttp://\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9:3000\n\nWEBrick\u306f\u300cctrl + C\u300d\u3067\u505c\u6b62\u3067\u304d\u307e\u3059\u3002\n\n# Unicorn\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u203b \u53c2\u8003WEB\u30da\u30fc\u30b8 2 \u304c\u5927\u5909\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u8a2d\u5b9a\nredmine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\n\n```/var/lib/redmine/Gemfile.local\ngem \"unicorn\"\n```\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u4e0b\u8a18\u3092\u5b9f\u884c\n\u203b\u4eca\u56de\u306f/var/lib/redmine\n\n``` \nbundle update\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\u203b WEBrick\u306e\u52d5\u4f5c\u78ba\u8a8d\u3067\u5229\u7528\u3057\u305f\u30dd\u30fc\u30c83000\u3092\u4e00\u6642\u7684\u306b\u5229\u7528\n\n```\nbundle exec unicorn_rails -l 3000 -E production\n```\n\n## Redmine\u7528Unicorn\u8a2d\u5b9a\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\u203b\u3053\u3061\u3089\u3082\u53c2\u8003Web\u30da\u30fc\u30b82\u3092\u307b\u307c\u6d41\u7528\u3067\u3059\u30fb\u30fb\u30fb\n\n```/var/lib/redmine/config/unicorn.rb\n# -*- coding: utf-8 -*-\n# Unicorn\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n# \u6b21\u306eURL\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u308b\u3002\n# http://unicorn.bogomips.org/examples/unicorn.conf.rb\n\n# \u5c02\u7528\u30b5\u30fc\u30d0\u30fc\u3067\u3042\u308c\u3070\u30b3\u30a2\u306b\u3064\u304d1\u500b\u4ee5\u4e0a\u3092\u6307\u5b9a\u3059\u308b\u3002\nworker_processes 2\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u5f85\u3061\u53d7\u3051\u53e3\u3001TCP\u3068UNIX\u30c9\u30e1\u30a4\u30f3\u3068\u304c\u6307\u5b9a\u53ef\u80fd\u3002\nlisten \"/var/lib/redmine/tmp/sockets/redmine.sock\", :backlog => 32\n# listen 8282, :tcp_nopush => true\n\n# \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u79d2\u6570\ntimeout 30\n\n# \u7a3c\u50cd\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306ePID\u3092\u66f8\u3044\u3066\u304a\u304f\u30d5\u30a1\u30a4\u30eb\u3002\npid \"/var/lib/redmine/tmp/pids/redmine.pid\"\n\n# \u30c7\u30fc\u30e2\u30f3\u3067\u8d77\u52d5\u3059\u308b\u3068\u6a19\u6e96\u51fa\u529b\uff0f\u6a19\u6e96\u30a8\u30e9\u30fc\u51fa\u529b\u304c/dev/null\u306b\u306a\u308b\u306e\u3067\u3001\n# \u305d\u308c\u305e\u308c\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\u3002\n# /var/log\u3067\u4e00\u5143\u7ba1\u7406\u3059\u308b\u5834\u5408\u306f\u30d5\u30eb\u30d1\u30b9\u3067\u8a18\u8f09\u3001\u305d\u306e\u5834\u5408\u306f/var/log\u914d\u4e0b\u306bunicorn\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u304a\u304f\u3002\n# stderr_path '/var/log/unicorn/unicorn.stderr.log'\n# stdout_path '/var/log/unicorn/unicorn.stdout.log'\nstderr_path 'log/unicorn.stderr.log'\nstdout_path 'log/unicorn.stdout.log'\n\n# \u30de\u30b9\u30bf\u30fc\u30d7\u30ed\u30bb\u30b9\u8d77\u52d5\u6642\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ed\u30fc\u30c9\u3059\u308b(true\u6642)\u3002\n# \u30ef\u30fc\u30ab\u30fc\u30d7\u30ed\u30bb\u30b9\u5074\u3067\u30ed\u30fc\u30c9\u3092\u3057\u306a\u3044\u306e\u3067\u30e1\u30e2\u30ea\u6d88\u8cbb\u3001\u5fdc\u7b54\u6027\u826f\u597d\u306b\u306a\u308b\u3002\n# \u305f\u3060\u3057\u3001\u30bd\u30b1\u30c3\u30c8\u306ffork\u5f8c\u306b\u958b\u304d\u306a\u304a\u3059\u5fc5\u8981\u3042\u308a\u3002\n# HUP\u30b7\u30b0\u30ca\u30eb\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30ed\u30fc\u30c9\u3055\u308c\u306a\u3044\u3002\npreload_app true\n\n# unicorn\u3068\u540c\u4e00\u30db\u30b9\u30c8\u4e0a\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u9650\u5b9a\u3067\u3001\u7dad\u6301\u3055\u308c\u3066\u3044\u308b\u304b\u3092\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u547c\u3076\u524d\u306b\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\ncheck_client_connection false\n\nbefore_fork do |server, worker|\n  # Rails\u3067preload_app\u3092true\u306b\u3057\u3066\u3044\u308b\u3068\u304d\u306f\u5f37\u304f\u63a8\u5968\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.connection.disconnect!\nend\n\nafter_fork do |server, worker|\n  # Rails\u3067preload_app\u3092true\u306b\u3057\u3066\u3044\u308b\u3068\u304d\u306f\u5fc5\u9808\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.establish_connection\n\n  begin\n    uid, gid = Process.euid, Process.egid\n    # user, group = \"redmine\", \"redmine\"\n    # ENV[\"HOME\"] = \"/home/redmine\"\n    target_uid = Etc.getpwnam(user).uid\n    target_gid = Etc.getgrnam(group).gid\n    worker.tmp.chown(target_uid, target_gid)\n    if uid != target_uid or gid != target.gid\n      Process.initgroups(user, target_gid)\n      Process::GID.change_privilege(target_gid)\n      Process::UID.change_privilege(target_uid)\n    end\n  rescue\n    if RAILS_ENV = \"development\"\n      STDERR.puts \"could not change user, oh well\"\n    else\n      STDERR.puts \"could not change user, oh well\"\n      raise e\n    end\n  end\nend\n```\n\n\u203b \u53c2\u8003WEB\u30da\u30fc\u30b8 3 \u304b\u3089\u304b\u306a\u308a\u6d41\u7528\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\u203b \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5468\u308a\u4ee5\u5916\u306f\u307b\u307c\u6d41\u7528\u3067\u3059\u30fb\u30fb\u30fb\n\n## unicorn\u306e\u30b5\u30fc\u30d3\u30b9\u5316\n\n\u4e0b\u8a18\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bservice\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n/usr/lib/systemd/system/redmine.service\n\n\n``` redmine.service\n[Unit]\nDescription=Redmine Unicorn Server\n\n[Service]\nWorkingDirectory=/var/lib/redmine\nEnvironment=RAILS_ENV=production\nSyslogIdentifier=redmine\nPIDFile=/var/lib/redmine/tmp/pids/unicorn.pid\n\nExecStart=/usr/local/bin/bundle exec \"unicorn_rails -c config/unicorn.rb -E production\" \nExecStop=/usr/bin/kill -QUIT $MAINPID\nExecReload=/bin/kill -USR2 $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n```\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u78ba\u8a8d\n\n```\nsystemctl start redmine\n```\n\n\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u5e38\u306b\u52d5\u3044\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\n\n```\nsystemctl status redmine\n```\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\n\n```\n\u25cf redmine.service - Redmine Unicorn Server\n   Loaded: loaded (/usr/lib/systemd/system/redmine.service; disabled; vendor preset: disabled)\n   Active: active (running) since \u91d1 2016-05-27 02:34:07 JST; 3 days ago\n Main PID: 11375 (ruby)\n   CGroup: /system.slice/redmine.service\n           \u251c\u250011375 unicorn_rails master -c config/unicorn.rb -E production\n           \u251c\u250011405 unicorn_rails worker[0] -c config/unicorn.rb -E production\n           \u2514\u250011407 unicorn_rails worker[1] -c config/unicorn.rb -E production\n\n```\n\n# Nginx\u306e\u8a2d\u5b9a\n\nnginx\u3068unicron\u306e\u9023\u643a\u8a2d\u5b9a\u3067\u3059\u3002\n\u4e0b\u8a18\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n/ete/nginx/conf.d/redmine.conf\n\n## http\u3067\u904b\u7528\u3059\u308b\u5834\u5408\n\n``` redmine.conf\nupstream redmine {\n    server unix:/var/lib/redmine/tmp/sockets/redmine.sock;\n}\nserver {\n    listen       80;\n    server_name  youdomainname.com;\n\n    root /var/lib/redmine/public;\n    client_max_body_size 1G;\n\n    location / {\n        try_files $uri/index.html $uri.html $uri @app;\n    }\n\n    location @app {\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_connect_timeout 60;\n        proxy_read_timeout 60;\n        proxy_send_timeout 600;\n        proxy_pass http://redmine;\n    }\n\n    error_page 500 502 503 504 /500.html;\n    \n}\n\n```\n\n## https\u3067\u904b\u7528\u3059\u308b\u5834\u5408\n\nLet's Encrypt\u3067ssl\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n\u8a3c\u660e\u66f8\u53d6\u5f97\u65b9\u6cd5\u306a\u3069\u306f\u4e0b\u8a18\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttps://letsencrypt.jp\n\n\u203b\u306a\u3093\u3067\u3053\u306e\u8a2d\u5b9a\u304b\u306f\u307e\u3060\u8abf\u3079\u304d\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u5f8c\u3005\u4f55\u304c\u3069\u3046\u306a\u3063\u3066\u308b\u306e\u304b\u8abf\u3079\u307e\u3059\u30fb\u30fb\u30fb\n\u306a\u304a\u3001\u8a2d\u5b9a\u3092\u4e0b\u8a18\u30b5\u30a4\u30c8\u3067\u8a08\u6e2c\u3057\u305f\u7d50\u679cA+\u9802\u304d\u307e\u3057\u305f\u3002\nhttps://www.ssllabs.com/ssltest/\n\n``` redmine.conf\n\nupstream redmine {\n    server unix:/var/lib/redmine/tmp/sockets/redmine.sock;\n}\n\nserver {\n    listen 80;\n    server_name youredmine.domain;\n    rewrite ^ https://$server_name$request_uri? permanent;\n} \n\nserver {\n    listen       443 ssl;\n    server_name  youredmine.domain;\n    \n    root /var/lib/redmine/public;\n\n    ssl on;\n\n    ssl_certificate /etc/letsencrypt/live/youredmine.domain/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/youredmine.domain/privkey.pem;\n    ssl_session_timeout 1d;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_tickets on;\n\n    ssl_dhparam /etc/nginx/ssl/dhparam.pem;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA';\n    \n    ssl_prefer_server_ciphers on;\n\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_trusted_certificate /etc/letsencrypt/live/youredmine.domain/fullchain.pem;\n    resolver 8.8.8.8;\n\n    add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains;';\n\n    client_max_body_size 1G;\n\n    access_log  /var/log/nginx/redmine.access.log;\n    error_log /var/log/nginx/redmine.error.log;\n\n    location / {\n        try_files $uri/index.html $uri.html $uri @app;\n    }\n\n    location @app {\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_connect_timeout 60;\n        proxy_read_timeout 60;\n        proxy_send_timeout 600;\n        proxy_pass http://redmine;\n    }\n\n    error_page 500 502 503 504 /500.html;\n\n}\n\n```\n\nnginx\u3092\u8d77\u52d5\u3059\u308b\n\n```\nsystemctl start nginx\n```\n\n\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u305f\u3089\u8a2d\u5b9a\u3057\u3066\u3044\u308bURL\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\n\n\n# \u3042\u3068\u306f\u597d\u304d\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u3084\u30c6\u30fc\u30de\u3092\u5165\u308c\u3066\u904b\u7528\u3057\u307e\u3057\u3087\u3046\u3002\n## \u79c1\u306e\u5165\u308c\u305f(\u5165\u308c\u305f\u3044)\u30d7\u30e9\u30b0\u30a4\u30f3\n\n### Redmine Theme Changer plugin\n\u30e6\u30fc\u30b6\u3054\u3068\u306b\u30c6\u30fc\u30de\u3092\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u30c6\u30fc\u30de\u306f\u7ba1\u7406\u8005\u304c\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308b\u304c\u3001\u30e6\u30fc\u30b6\u3054\u3068\u306b\u597d\u304d\u306b\u30c6\u30fc\u30de\u304c\u5165\u308c\u3089\u308c\u308b\u306e\u3067\u5229\u7528\u610f\u6b32\u304c\u6e67\u304f\u304b\u3082\uff1f\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\n\n### Sidebar Hide Plugin\n\u30c1\u30b1\u30c3\u30c8\u753b\u9762\u7b49\u3067\u30d5\u30a3\u30eb\u30bf\u30fc\u3084\u30a6\u30a9\u30c3\u30c1\u30e6\u30fc\u30b6\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u30b5\u30a4\u30c9\u30d0\u30fc\u3092\u96a0\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u5df7\u3067\u306f\u300cView customize plugin\u300d\u3092\u5165\u308c\u3001\u81ea\u5206\u3067js\u3092\u66f8\u304f\u3088\u3046\u3067\u3059\u304c\u79c1\u306f\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u5341\u5206\u3067\u3057\u305f\u3002\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n\n### Good Job plugin\n\u5165\u308c\u305f\u3044\u30d7\u30e9\u30b0\u30a4\u30f3\u305d\u306e\uff11\n\u30c1\u30b1\u30c3\u30c8\u304c\u9589\u307e\u308b\u3068\u80cc\u666f\u304c\u300cGood job!\u300d\u306a\u611f\u3058\u306b\u306a\u308b\u307f\u305f\u3044\u3002\n\u30c1\u30b1\u30c3\u30c8\u9589\u3081\u308b\u305f\u3073\u5fc3\u304c\u307b\u3093\u308f\u304b\u3057\u305d\u3046\u3002\n\n### Redmine Backlogs plugin\n\u5165\u308c\u3066\u307f\u305f\u3044\u30d7\u30e9\u30b0\u30a4\u30f3\u305d\u306e\uff12\n\u30b9\u30af\u30e9\u30e0\u958b\u767a\u3067\u4f7f\u3046\u30d0\u30c3\u30af\u30ed\u30b0\u6a5f\u80fd\u3092redmine\u4e0a\u3067\u63d0\u4f9b\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u307e\u3060\u81ea\u5206\u7528\u306eredmine\u306a\u306e\u3067\u5fc5\u8981\u306a\u3044\u304b\u306a\u30fb\u30fb\u30fb\uff1f\n\u3082\u3046\u3061\u3087\u3063\u3068\u958b\u767a\u624b\u6cd5\u306a\u3069\u3092\u52c9\u5f37\u3057\u3066\u304b\u3089\u8a66\u3057\u305f\u3044\n\n## \u79c1\u306e\u5165\u308c\u305f\u30c6\u30fc\u30de\n### A1\nhttp://redminecrm.com/pages/a1-theme\n\u9ed2\u3063\u307d\u3044\u753b\u9762\u304c\u597d\u304d\u306a\u306e\u3067\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n\u304b\u3063\u3053\u3044\u3044\n\n### Axiom\nhttps://github.com/hulihanapplications/axiom\n\u3053\u3061\u3089\u3082\u9ed2\u3063\u307d\u3044\u753b\u9762\u306e\u30c6\u30fc\u30de\u3002\n\u30ae\u30fc\u30af\u306a\u611f\u3058\u304c\u3044\u3044\u611f\u3058\u3002\n\u305f\u3060\u753b\u9762\u304c\u3067\u304b\u3044PC\u306e\u3060\u3068\u63cf\u753b\u7bc4\u56f2\u304c\u72ed\u304f\u611f\u3058\u308b\u304b\u3082\uff1f\n\n### gitmike theme\nhttps://github.com/makotokw/redmine-theme-gitmike\nGithub\u3063\u307d\u304f\u898b\u3048\u308b\u30c6\u30fc\u30de\u3002\n\u5165\u308c\u3066\u307f\u305f\u3051\u3069\u3042\u3093\u307e\u308a\u4f7f\u3063\u3066\u306a\u3044\u304b\u3082\u30fb\u30fb\u30fb\n\n", "tags": ["nginx", "unicorn", "PostgreSQL", "CentOS", "Redmine"]}