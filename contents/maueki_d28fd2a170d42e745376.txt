{"context": "Django\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u306f\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u306b\u95a2\u3059\u308b\u8a18\u8f09\u304c\u306a\u3044\u306e\u3067\u88dc\u8db3\u7684\u306b\u66f8\u3044\u3066\u307f\u308b\u3002\n(\u8a8d\u8a3c\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3042\u308b\u304c\u5165\u9580\u8005\u5411\u3051\u3067\u306f\u306a\u3044\u611f\u3058)\nDjango\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.10\n\naccounts \u30a2\u30d7\u30ea\u4f5c\u6210\n\u4eca\u56de\u306f\u30b5\u30a4\u30c8\u5185\u306b\u30ed\u30b0\u30a4\u30f3/\u30ed\u30b0\u30a2\u30a6\u30c8\u5c02\u7528\u306e\u30a2\u30d7\u30eaacocunts\u3092\u4f5c\u6210\u3059\u308b\u3002\naccounts\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u305f\u306e\u306fsessings.LOGIN_URL\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u304c/accounts/login\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3002\n$ python manage.py startapp accounts\n\npolls\u306e\u3068\u304d\u3068\u540c\u69d8\u306b\u30a2\u30d7\u30ea\u306e\u767b\u9332\u3092\u884c\u3046\n\nmysite/settings.py\nINSTALLED_APPS = [\n    'polls.apps.PollsConfig',\n    'accounts.apps.Accountsconfig', # \u8ffd\u52a0\n    #...\n]\n\n\n\nURL\u8a2d\u5b9a\nmysite/urls.py\u3092\u7de8\u96c6\n\nmysite/urls.py\nurlpatterns = [\n    #...\n    url(r'accounts/', include('accounts.urls')), # \u8ffd\u52a0\n]\n\n\naccounts/urls.py\u3092\u65b0\u898f\u4f5c\u6210\n\u3053\u3053\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308blogin/logout\u30d3\u30e5\u30fc\u3092\u4f7f\u7528\u3059\u308b\n\naccounts/urls.py\nfrom django.conf.urls import url\nfrom django.contrib.auth.views import login,logout\n\nurlpatterns = [\n    url(r'^login/$', login,\n        {'template_name': 'accounts/login.html'},\n        name='login'),\n    url(r'^logout/$', logout, name='logout')\n]\n\n\nDjango1.10\u304b\u3089\nurl(r'^login/$', 'django.contrib.auth.views.login')\n\n\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u6307\u5b9a\u306f\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u6ce8\u610f\n\nTemplate\u4f5c\u6210\n\naccounts/templates/accounts/login.html\n{% extends \"admin/base.html\" %} {# \u2460 #}\n\n{% block content %}\n\n{% if form.errors  %}\n  <div class=\"alert alert-danger\" role=\"alert\">\n    <p>Your usernamne and password didn't match. Please try again.</p>\n  </div>\n{% endif %}\n\n<div class=\"panel panel-primary\">\n  <div class=\"panel-heading\">\n    <h3 class=\"panel-title text-center\">Log-in to mysite</h3>\n  </div>\n  <div class=\"panel-body\">\n    <form action=\"{% url 'login' %}\" method=\"post\" role=\"form\">\n      {% csrf_token %}\n      <div class=\"input-group\" style=\"margin-bottom:10px\">\n        <span class=\"input-group-addon\"><i class=\"fa fa-user fa-fw\"></i></span>\n        <input id=\"id_username\" name=\"username\" type=\"text\" value=\"\" maxlength=\"256\" placeholder=\"Username\" aria-describedby=\"sizing-addon1\" autofocus required/> {# \u2461 #}\n      </div>\n      <div class=\"input-group\" style=\"margin-bottom:10px\">\n        <span class=\"input-group-addon\"><i class=\"fa fa-lock fa-fw\"></i></span>\n        <input id=\"id_password\" name=\"password\" type=\"password\" value=\"\" maxlength=\"256\" placeholder=\"Pasword\" aria-describedby=\"sizing-addon1\" required/> {# \u2461 #}\n      </div>\n\n      <button type=\"submit\" style=\"margin-bottom:-20px\"><i class=\"fa fa-sign-in\">Login</i></button>\n      <input name=\"next\" type=\"hidden\" value=\"{{ next }}\"/> {# \u2462 #}\n    </form>\n  </div>\n</div>\n{% endblock %}\n\n\n\u2460 \u697d\u3059\u308b\u305f\u3081\u306badmin\u306ebase.html\u3092\u62dd\u501f\n\u2461 django.contrib.auth.view.login\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067AuthenticationForm\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002AuthenticationForm\u306f\"username\",\"password\"\u3068\u540d\u524d\u306e\u3064\u3044\u305f\u30d5\u30a9\u30fc\u30e0\u306e\u5024\u3092\u5229\u7528\u3059\u308b\n\u2462 \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u305f\u5834\u5408\u30ea\u30c0\u30ec\u30af\u30c8\u5143\u306f/accounts/login/?next=/polls/3\u306e\u3088\u3046\u306b\u6e21\u3055\u308c\u308b\u3002\u3053\u306enext\u306e\u5024\u3092AuthenticationForm\u306b\u901a\u77e5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n\u30ed\u30b0\u30a2\u30a6\u30c8\u306e\u30da\u30fc\u30b8\u306fadmin\u306e\u3082\u306e\u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001\u4eca\u56de\u306f\u4f5c\u6210\u3057\u306a\u3044\u3002\n\n\u8a66\u3057\u3066\u307f\u308b\n\npolls/views.py\n# ...\nfrom django.contrib.auth.decorators import login_required\nfrom django.utils.decorators import method_decorator\n\n@method_decorator(login_required, name='dispatch')\nclass IndexView(generic.ListView):\n    # ...\n\n\n\u30af\u30e9\u30b9\u30d9\u30fc\u30b9\u30d3\u30e5\u30fc\u306e\u305f\u3081\u3001@method_decorator\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\u95a2\u6570\u306e\u5834\u5408\u306f@login_required\u3067OK\u3002\nhttp://localhost:8000/polls \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u3067\u308b\u3002\n\nsuperuser\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u306f\u305a\u3067\u3042\u308b\u3002\n\u4ee5\u524dadmin\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u306a\u3089\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u305f\u3081\u3001\u305d\u306e\u5834\u5408\u306f http://localhost:8000/accounts/logout \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u4e00\u5ea6\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n[Django\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](https://docs.djangoproject.com/ja/1.10/intro/)\u306b\u306f\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u306b\u95a2\u3059\u308b\u8a18\u8f09\u304c\u306a\u3044\u306e\u3067\u88dc\u8db3\u7684\u306b\u66f8\u3044\u3066\u307f\u308b\u3002\n(\u8a8d\u8a3c\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f[\u3042\u308b](https://docs.djangoproject.com/ja/1.10/topics/auth/)\u304c\u5165\u9580\u8005\u5411\u3051\u3067\u306f\u306a\u3044\u611f\u3058)\n\nDjango\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.10\n\n# accounts \u30a2\u30d7\u30ea\u4f5c\u6210\n\n\u4eca\u56de\u306f\u30b5\u30a4\u30c8\u5185\u306b\u30ed\u30b0\u30a4\u30f3/\u30ed\u30b0\u30a2\u30a6\u30c8\u5c02\u7528\u306e\u30a2\u30d7\u30eaacocunts\u3092\u4f5c\u6210\u3059\u308b\u3002\naccounts\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u305f\u306e\u306f`sessings.LOGIN_URL`\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u304c`/accounts/login`\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3002\n\n```bash\n$ python manage.py startapp accounts\n```\n\npolls\u306e\u3068\u304d\u3068\u540c\u69d8\u306b\u30a2\u30d7\u30ea\u306e\u767b\u9332\u3092\u884c\u3046\n\n```py3:mysite/settings.py\nINSTALLED_APPS = [\n    'polls.apps.PollsConfig',\n    'accounts.apps.Accountsconfig', # \u8ffd\u52a0\n    #...\n]\n```\n\n# URL\u8a2d\u5b9a\n\nmysite/urls.py\u3092\u7de8\u96c6\n\n```py3:mysite/urls.py\nurlpatterns = [\n    #...\n    url(r'accounts/', include('accounts.urls')), # \u8ffd\u52a0\n]\n```\n\naccounts/urls.py\u3092\u65b0\u898f\u4f5c\u6210\n\u3053\u3053\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308blogin/logout\u30d3\u30e5\u30fc\u3092\u4f7f\u7528\u3059\u308b\n\n```py3:accounts/urls.py\nfrom django.conf.urls import url\nfrom django.contrib.auth.views import login,logout\n\nurlpatterns = [\n    url(r'^login/$', login,\n        {'template_name': 'accounts/login.html'},\n        name='login'),\n    url(r'^logout/$', logout, name='logout')\n]\n```\n\nDjango1.10\u304b\u3089\n\n```py3\nurl(r'^login/$', 'django.contrib.auth.views.login')\n```\n\n\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u6307\u5b9a\u306f\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u6ce8\u610f\n\n# Template\u4f5c\u6210\n\n```jinja:accounts/templates/accounts/login.html\n{% extends \"admin/base.html\" %} {# \u2460 #}\n\n{% block content %}\n\n{% if form.errors  %}\n  <div class=\"alert alert-danger\" role=\"alert\">\n    <p>Your usernamne and password didn't match. Please try again.</p>\n  </div>\n{% endif %}\n\n<div class=\"panel panel-primary\">\n  <div class=\"panel-heading\">\n    <h3 class=\"panel-title text-center\">Log-in to mysite</h3>\n  </div>\n  <div class=\"panel-body\">\n    <form action=\"{% url 'login' %}\" method=\"post\" role=\"form\">\n      {% csrf_token %}\n      <div class=\"input-group\" style=\"margin-bottom:10px\">\n        <span class=\"input-group-addon\"><i class=\"fa fa-user fa-fw\"></i></span>\n        <input id=\"id_username\" name=\"username\" type=\"text\" value=\"\" maxlength=\"256\" placeholder=\"Username\" aria-describedby=\"sizing-addon1\" autofocus required/> {# \u2461 #}\n      </div>\n      <div class=\"input-group\" style=\"margin-bottom:10px\">\n        <span class=\"input-group-addon\"><i class=\"fa fa-lock fa-fw\"></i></span>\n        <input id=\"id_password\" name=\"password\" type=\"password\" value=\"\" maxlength=\"256\" placeholder=\"Pasword\" aria-describedby=\"sizing-addon1\" required/> {# \u2461 #}\n      </div>\n\n      <button type=\"submit\" style=\"margin-bottom:-20px\"><i class=\"fa fa-sign-in\">Login</i></button>\n      <input name=\"next\" type=\"hidden\" value=\"{{ next }}\"/> {# \u2462 #}\n    </form>\n  </div>\n</div>\n{% endblock %}\n```\n\n\u2460 \u697d\u3059\u308b\u305f\u3081\u306badmin\u306ebase.html\u3092\u62dd\u501f\n\u2461 `django.contrib.auth.view.login`\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067`AuthenticationForm`\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002`AuthenticationForm`\u306f\"username\",\"password\"\u3068\u540d\u524d\u306e\u3064\u3044\u305f\u30d5\u30a9\u30fc\u30e0\u306e\u5024\u3092\u5229\u7528\u3059\u308b\n\u2462 \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u305f\u5834\u5408\u30ea\u30c0\u30ec\u30af\u30c8\u5143\u306f`/accounts/login/?next=/polls/3`\u306e\u3088\u3046\u306b\u6e21\u3055\u308c\u308b\u3002\u3053\u306enext\u306e\u5024\u3092`AuthenticationForm`\u306b\u901a\u77e5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n\n\u30ed\u30b0\u30a2\u30a6\u30c8\u306e\u30da\u30fc\u30b8\u306fadmin\u306e\u3082\u306e\u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001\u4eca\u56de\u306f\u4f5c\u6210\u3057\u306a\u3044\u3002\n\n\n# \u8a66\u3057\u3066\u307f\u308b\n\n```py3:polls/views.py\n# ...\nfrom django.contrib.auth.decorators import login_required\nfrom django.utils.decorators import method_decorator\n\n@method_decorator(login_required, name='dispatch')\nclass IndexView(generic.ListView):\n    # ...\n```\n\n\u30af\u30e9\u30b9\u30d9\u30fc\u30b9\u30d3\u30e5\u30fc\u306e\u305f\u3081\u3001`@method_decorator`\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\u95a2\u6570\u306e\u5834\u5408\u306f`@login_required`\u3067OK\u3002\n\nhttp://localhost:8000/polls \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u3067\u308b\u3002\n\n![django_login.png](https://qiita-image-store.s3.amazonaws.com/0/39647/193082c3-2aef-6723-3ba7-9e869695260d.png)\n\nsuperuser\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u306f\u305a\u3067\u3042\u308b\u3002\n\n\u4ee5\u524dadmin\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u306a\u3089\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u305f\u3081\u3001\u305d\u306e\u5834\u5408\u306f http://localhost:8000/accounts/logout \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u4e00\u5ea6\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n", "tags": ["Django", "python3"]}