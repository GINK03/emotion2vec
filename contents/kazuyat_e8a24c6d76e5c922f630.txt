{"context": "\u524d\u56de\u306fRuby\u6a19\u6e96\u306enet/http\u3067DigitalOcean\u306eAPI\u3092\u53e9\u3044\u3066\u307f\u307e\u3057\u305f\u3002\nRuby\u306b\u306fHTTP\u30a2\u30af\u30bb\u30b9\u306e\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3044\u304f\u3064\u304b\u51fa\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u3089\u3092\u4f7f\u3046\u3053\u3068\u3067\u3088\u308aAPI\u304c\u53e9\u304d\u3084\u3059\u304f\u306a\u308b\u306e\u304b\u3069\u3046\u304b\u3001\u691c\u8a3c\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nopen-uri\nnet/http\u306ewrapper\u3068\u3057\u3066\u6b74\u53f2\u304c\u3042\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\nwget\u7684\u306b\u3001\u3068\u306b\u304b\u304fWeb\u304b\u3089\u4f55\u304b\u53d6\u3063\u3066\u304f\u308b\u306b\u306f\u8a18\u8ff0\u91cf\u304c\u5c11\u306a\u304f\u3066\u6e08\u307f\u307e\u3059\u3002\u3044\u3064\u3082\u306eDroplet\u4e00\u89a7\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\ndo_listdroplet_openuri.rb\nrequire 'open-uri'\n\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\n\nres = open(droplet_ep,\n  \"Authorization\" => \"bearer #{token}\") do |f|\n    f.each_line do |line|\n      puts line\n    end\nend\n\n\n\u306f\u3044\u3001\u3044\u304d\u306a\u308a\u77ed\u3044\u3067\u3059\uff01\n\u5f8c\u308d\u306e\u65b9\u306a\u3093\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u884c\u3054\u3068\u306bputs\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u306e\u3067\u3001\u305d\u3053\u304c\u306a\u3051\u308c\u3070\u3081\u3061\u3083\u304f\u3061\u3083\u77ed\u3044\u3067\u3059\u306d\u3002\n\u305f\u3060\u3057\u3001open-uri\u306b\u306f\u91cd\u5927\u306a\u554f\u984c\u304c\u3042\u308a\u307e\u3057\u3066\u3001GET\u3057\u304b\u3067\u304d\u306a\u3044\u3093\u3067\u3059\u306d\u3002\u4e00\u5fdc\u3001POST\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u308a\u3059\u308b\u30d1\u30c3\u30c1\u7b49\u3082\u3042\u308b\u3088\u3046\u3067\u3059\u304c\u3001PUT\u3084POST\u3001DELETE\u3092\u591a\u7528\u3059\u308bAPI\u64cd\u4f5c\u306b\u306f\u3061\u3087\u3063\u3068\u5411\u304b\u306a\u3044\u611f\u3058\u3067\u3059\u3002\n\nrest-client\n\u6b21\u306f\u307e\u3055\u306bREST\u64cd\u4f5c\u306e\u305f\u3081\u306b\u751f\u307e\u308c\u3066\u304d\u305f\u3088\u3046\u306a\u540d\u524d\u306erest-client\u3067\u3059\u3002\n\ndo_listdroplet_rest-client\nrequire 'rest-client'\n\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\n\nres = RestClient.get droplet_ep, { :Authorization => \"bearer #{token}\" }\n\nputs res\n\n\n\u3053\u308c\u3082\u77ed\u3044\uff01GET\u306b\u3064\u3044\u3066\u306fopen-uri\u3068\u80a9\u3092\u4e26\u3079\u307e\u3059\u3002\n\u6b21\u306bDroplet\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\n\ndo_createdroplet_rest-client.rb\nrequire 'rest-client'\nrequire 'json'\n\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\n\ndata = {\n    \"name\" => \"testserver2\",\n    \"region\" => \"sgp1\",\n    \"size\" => \"512MB\",\n    \"image\" => \"ubuntu-14-04-x64\",\n    \"ipv6\" => \"false\"\n}.to_json\n\nres = RestClient.post droplet_ep, data, { :Authorization => \"bearer #{token}\", content_type: :json }\n\nputs res\n\n\n\u3053\u308c\u3082net/http\u306b\u6bd4\u3079\u308c\u3070\u3060\u3044\u3076\u77ed\u3044\u6c17\u304c\u3057\u307e\u3059\u3002\nContent-Type\u3067\u6307\u5b9a\u3059\u308b\"application/json\"\u306f:json\u3068\u30b7\u30f3\u30dc\u30eb\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nFaraday\nFaraday\u306fDigitalOcean\u306e\u516c\u5f0fSDK\u3082\u4f7f\u3063\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\n\u58f2\u308a\u3068\u3057\u3066\u306f\u8a18\u8ff0\u306e\u9577\u3055\u4e91\u3005\u3088\u308a\u3082\"middleware\"\u3068\u547c\u3070\u308c\u308b\u62e1\u5f35\u306e\u4ed5\u7d44\u307f\u306b\u3088\u308a\u6319\u52d5\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u3053\u3068\u306b\u3042\u308b\u3001\u3088\u3046\u3067\u3059\u3002\n\ndo_listdroplet_faraday.rb\nrequire 'uri'\nrequire 'faraday'\n\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\n\nuri = URI.parse(droplet_ep)\n\nhttp = Faraday.new(:url => \"#{uri.scheme}://#{uri.host}\")\nres = http.get do |req|\n  req.url uri.path\n  req.headers['Authorization'] = \"bearer #{token}\"\nend\n\np res.body\n\n\nFaraday\u306f\u5148\u306b\u30a2\u30af\u30bb\u30b9\u5148\u30db\u30b9\u30c8\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u304a\u3044\u3066\u304b\u3089\u3001\u305d\u306eURL\u306e\u30d1\u30b9\u306b\u5411\u3051\u3066GET\u306a\u308aPOST\u306a\u308a\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u6253\u3061\u51fa\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b(\u540c\u3058\u30db\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u8907\u6570\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u305b\u307e\u3059\u306d)\u305f\u3081\u3001\u3044\u3063\u305f\u3093parse\u3059\u308b\u3068\u3044\u3046\u9762\u5012\u306a\u3053\u3068\u3092\u3057\u3066\u3044\u307e\u3059(\u6700\u521d\u304b\u3089\u5206\u3051\u3068\u3051\u3070\u3044\u3044\u3093\u3067\u3059\u304c)\u3002\n\u6b21\u306bPOST\u3067\u3059\u3002\n\ndo_createdroplet_faraday.rb\nrequire 'uri'\nrequire 'faraday'\nrequire 'json'\n\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\n\nuri = URI.parse(droplet_ep)\n\nhttp = Faraday.new(:url => \"#{uri.scheme}://#{uri.host}\")\nres = http.post do |req|\n  req.url \"#{uri.path}\"\n  req.headers['Authorization'] = \"bearer #{token}\"\n  req.headers['Content-Type'] = \"application/json\"\n  req.body = {\n    \"name\" => \"testserver\",\n    \"region\" => \"sgp1\",\n    \"size\" => \"512MB\",\n    \"image\" => \"ubuntu-14-04-x64\",\n    \"ipv6\" => \"false\"\n  }.to_json\nend\n\np res.body\n\n\nrest-client\u3088\u308a\u306f\u8a18\u8ff0\u91cf\u304c\u591a\u3044\u3067\u3059\u304c\u3001\u8aa4\u5dee\u306e\u7bc4\u7587\u306a\u6c17\u3082\u3057\u307e\u3059\u3002\n\u3067\u3001\u540c\u3058POST\u3067\u3059\u304c\"faraday-middleware\"\u3092\u4f7f\u3063\u3066\u307f\u308b\u3068\u3001\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\ndo_createdroplet_faraday2.rb\nrequire 'uri'\nrequire 'faraday'\nrequire 'faraday_middleware'\nrequire 'json'\n\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\n\nuri = URI.parse(droplet_ep)\n\nhttp = Faraday.new(:url => \"#{uri.scheme}://#{uri.host}\") do |h|\n  h.request :json\n  h.adapter Faraday.default_adapter\nend\n\nres = http.post do |req|\n  req.url \"#{uri.path}\"\n  req.headers['Authorization'] = \"bearer #{token}\"\n  req.body = {\n    \"name\" => \"testserver\",\n    \"region\" => \"sgp1\",\n    \"size\" => \"512MB\",\n    \"image\" => \"ubuntu-14-04-x64\",\n    \"ipv6\" => \"false\"\n  }\nend\n\np res.body\n\n\n\u9593\u9055\u3044\u63a2\u3057\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u307e\u3059\u304c\u3001\u30db\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306brequest :json\u3068\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001POST\u30ea\u30af\u30a8\u30b9\u30c8\u4e2d\u3067\u306eContent-Type\u8a18\u8ff0\u3001\u304a\u3088\u3073\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306ejson\u5909\u63db\u304c\u8981\u3089\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u300c\u305d\u308c\u3060\u3051\u304b\u3088\u300d\u3068\u3044\u3046\u6c17\u3082\u3057\u307e\u3059\u304c\u2026faraday_middleware\u306f\u81ea\u5206\u3067\u4f5c\u308a\u8fbc\u3080\u3053\u3068\u3067\u67d4\u8edf\u306b\u6d3b\u7528\u3059\u308b\u3068\u3053\u308d\u304c\u30df\u30bd\u3067\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u5927\u3057\u305f\u52b9\u679c\u306f\u5f97\u3089\u308c\u306a\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3057\u3087\u3046\u3002\n\n\u7dcf\u8a55\nopen-uri\u306f\u3057\u3087\u3046\u304c\u306a\u3044\u3068\u3057\u3066\u3001\u4e00\u822c\u7684\u306aREST\u64cd\u4f5c\u306e\u7bc4\u7587\u306b\u8981\u4ef6\u304c\u53ce\u307e\u308b\u306a\u3089\u3070rest-client\u304c\u6271\u3044\u3084\u3059\u3044\u3088\u3046\u306b\u601d\u3044\u307e\u3059\u3002API\u64cd\u4f5c\u306b\u7d61\u3081\u3066\u9ad8\u5ea6\u306a\u51e6\u7406\u3092\u884c\u3046\u306e\u3067\u3042\u308c\u3070\u3001Faraday\u3082\u30a2\u30ea\u3067\u3059\u3002\n\u6b63\u76f4\u306a\u3068\u3053\u308d\u3001\u8a18\u8ff0\u91cf\u3068\u3057\u3066\u306fnet/http\u304b\u3089\u6975\u7aef\u306b\u6e1b\u308b\u3082\u306e\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u8af8\u822c\u306e\u4e8b\u60c5\u306b\u3088\u308agem\u304crequire\u304c\u3057\u306b\u304f\u3044\u958b\u767a\u3067\u3042\u308c\u3070\u3001\u7121\u7406\u306b\u4f7f\u308f\u306a\u304f\u3066\u3082\u306a\u3093\u3068\u304b\u306a\u3063\u3066\u3057\u307e\u3046\u3067\u3057\u3087\u3046\u3002\u305f\u3060\u3057\u4eca\u56de\u53d6\u308a\u4e0a\u3052\u3066\u3044\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4f8b\u5916\u51e6\u7406\u306b\u3082\u76ee\u304c\u884c\u304d\u5c4a\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u7dcf\u5408\u7684\u306b\u5224\u65ad\u3059\u308b\u306e\u304c\u5409\u306a\u3088\u3046\u306b\u3082\u3002\n\u79c1\u306f\u7d20\u4eba\u306a\u306e\u3067\u3001\u6271\u3044\u3084\u3059\u3044\u305d\u3046\u306arest-client\u3067\u3057\u3070\u3089\u304f\u304a\u4e16\u8a71\u306b\u306a\u3063\u3066\u307f\u3088\u3046\u304b\u306a\u3068\u601d\u3063\u3066\u307e\u3059(\u9014\u4e2d\u3067\u5909\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c)\u3002\n[\u524d\u56de](http://qiita.com/kazuyat/items/56c8a87aca9fc0180516)\u306fRuby\u6a19\u6e96\u306enet/http\u3067DigitalOcean\u306eAPI\u3092\u53e9\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\nRuby\u306b\u306fHTTP\u30a2\u30af\u30bb\u30b9\u306e\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3044\u304f\u3064\u304b\u51fa\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u3089\u3092\u4f7f\u3046\u3053\u3068\u3067\u3088\u308aAPI\u304c\u53e9\u304d\u3084\u3059\u304f\u306a\u308b\u306e\u304b\u3069\u3046\u304b\u3001\u691c\u8a3c\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## open-uri\nnet/http\u306ewrapper\u3068\u3057\u3066\u6b74\u53f2\u304c\u3042\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\nwget\u7684\u306b\u3001\u3068\u306b\u304b\u304fWeb\u304b\u3089\u4f55\u304b\u53d6\u3063\u3066\u304f\u308b\u306b\u306f\u8a18\u8ff0\u91cf\u304c\u5c11\u306a\u304f\u3066\u6e08\u307f\u307e\u3059\u3002\u3044\u3064\u3082\u306eDroplet\u4e00\u89a7\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\n```ruby:do_listdroplet_openuri.rb\nrequire 'open-uri'\n\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\n\nres = open(droplet_ep,\n  \"Authorization\" => \"bearer #{token}\") do |f|\n    f.each_line do |line|\n      puts line\n    end\nend\n```\n\u306f\u3044\u3001\u3044\u304d\u306a\u308a\u77ed\u3044\u3067\u3059\uff01\n\u5f8c\u308d\u306e\u65b9\u306a\u3093\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u884c\u3054\u3068\u306bputs\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u306e\u3067\u3001\u305d\u3053\u304c\u306a\u3051\u308c\u3070\u3081\u3061\u3083\u304f\u3061\u3083\u77ed\u3044\u3067\u3059\u306d\u3002\n\n\u305f\u3060\u3057\u3001open-uri\u306b\u306f\u91cd\u5927\u306a\u554f\u984c\u304c\u3042\u308a\u307e\u3057\u3066\u3001**GET\u3057\u304b\u3067\u304d\u306a\u3044**\u3093\u3067\u3059\u306d\u3002\u4e00\u5fdc\u3001POST\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u308a\u3059\u308b\u30d1\u30c3\u30c1\u7b49\u3082\u3042\u308b\u3088\u3046\u3067\u3059\u304c\u3001PUT\u3084POST\u3001DELETE\u3092\u591a\u7528\u3059\u308bAPI\u64cd\u4f5c\u306b\u306f\u3061\u3087\u3063\u3068\u5411\u304b\u306a\u3044\u611f\u3058\u3067\u3059\u3002\n\n## rest-client\n\u6b21\u306f\u307e\u3055\u306bREST\u64cd\u4f5c\u306e\u305f\u3081\u306b\u751f\u307e\u308c\u3066\u304d\u305f\u3088\u3046\u306a\u540d\u524d\u306erest-client\u3067\u3059\u3002\n\n```ruby:do_listdroplet_rest-client\nrequire 'rest-client'\n\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\n\nres = RestClient.get droplet_ep, { :Authorization => \"bearer #{token}\" }\n\nputs res\n```\n\u3053\u308c\u3082\u77ed\u3044\uff01GET\u306b\u3064\u3044\u3066\u306fopen-uri\u3068\u80a9\u3092\u4e26\u3079\u307e\u3059\u3002\n\n\u6b21\u306bDroplet\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\n\n```ruby:do_createdroplet_rest-client.rb\nrequire 'rest-client'\nrequire 'json'\n\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\n\ndata = {\n\t\"name\" => \"testserver2\",\n\t\"region\" => \"sgp1\",\n\t\"size\" => \"512MB\",\n\t\"image\" => \"ubuntu-14-04-x64\",\n\t\"ipv6\" => \"false\"\n}.to_json\n\nres = RestClient.post droplet_ep, data, { :Authorization => \"bearer #{token}\", content_type: :json }\n\nputs res\n```\n\u3053\u308c\u3082net/http\u306b\u6bd4\u3079\u308c\u3070\u3060\u3044\u3076\u77ed\u3044\u6c17\u304c\u3057\u307e\u3059\u3002\nContent-Type\u3067\u6307\u5b9a\u3059\u308b\"application/json\"\u306f:json\u3068\u30b7\u30f3\u30dc\u30eb\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n## Faraday\nFaraday\u306fDigitalOcean\u306e\u516c\u5f0fSDK\u3082\u4f7f\u3063\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\n\u58f2\u308a\u3068\u3057\u3066\u306f\u8a18\u8ff0\u306e\u9577\u3055\u4e91\u3005\u3088\u308a\u3082\"middleware\"\u3068\u547c\u3070\u308c\u308b\u62e1\u5f35\u306e\u4ed5\u7d44\u307f\u306b\u3088\u308a\u6319\u52d5\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u3053\u3068\u306b\u3042\u308b\u3001\u3088\u3046\u3067\u3059\u3002\n\n```ruby:do_listdroplet_faraday.rb\nrequire 'uri'\nrequire 'faraday'\n\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\n\nuri = URI.parse(droplet_ep)\n\nhttp = Faraday.new(:url => \"#{uri.scheme}://#{uri.host}\")\nres = http.get do |req|\n  req.url uri.path\n  req.headers['Authorization'] = \"bearer #{token}\"\nend\n\np res.body\n```\nFaraday\u306f\u5148\u306b\u30a2\u30af\u30bb\u30b9\u5148\u30db\u30b9\u30c8\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u304a\u3044\u3066\u304b\u3089\u3001\u305d\u306eURL\u306e\u30d1\u30b9\u306b\u5411\u3051\u3066GET\u306a\u308aPOST\u306a\u308a\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u6253\u3061\u51fa\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b(\u540c\u3058\u30db\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u8907\u6570\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u305b\u307e\u3059\u306d)\u305f\u3081\u3001\u3044\u3063\u305f\u3093parse\u3059\u308b\u3068\u3044\u3046\u9762\u5012\u306a\u3053\u3068\u3092\u3057\u3066\u3044\u307e\u3059(\u6700\u521d\u304b\u3089\u5206\u3051\u3068\u3051\u3070\u3044\u3044\u3093\u3067\u3059\u304c)\u3002\n\n\u6b21\u306bPOST\u3067\u3059\u3002\n\n```ruby:do_createdroplet_faraday.rb\nrequire 'uri'\nrequire 'faraday'\nrequire 'json'\n\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\n\nuri = URI.parse(droplet_ep)\n\nhttp = Faraday.new(:url => \"#{uri.scheme}://#{uri.host}\")\nres = http.post do |req|\n  req.url \"#{uri.path}\"\n  req.headers['Authorization'] = \"bearer #{token}\"\n  req.headers['Content-Type'] = \"application/json\"\n  req.body = {\n\t\"name\" => \"testserver\",\n\t\"region\" => \"sgp1\",\n\t\"size\" => \"512MB\",\n\t\"image\" => \"ubuntu-14-04-x64\",\n\t\"ipv6\" => \"false\"\n  }.to_json\nend\n\np res.body\n```\n\nrest-client\u3088\u308a\u306f\u8a18\u8ff0\u91cf\u304c\u591a\u3044\u3067\u3059\u304c\u3001\u8aa4\u5dee\u306e\u7bc4\u7587\u306a\u6c17\u3082\u3057\u307e\u3059\u3002\n\u3067\u3001\u540c\u3058POST\u3067\u3059\u304c\"faraday-middleware\"\u3092\u4f7f\u3063\u3066\u307f\u308b\u3068\u3001\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n```ruby:do_createdroplet_faraday2.rb\nrequire 'uri'\nrequire 'faraday'\nrequire 'faraday_middleware'\nrequire 'json'\n\ndroplet_ep = 'https://api.digitalocean.com/v2/droplets'\ntoken = '(\u30c8\u30fc\u30af\u30f3)'\n\nuri = URI.parse(droplet_ep)\n\nhttp = Faraday.new(:url => \"#{uri.scheme}://#{uri.host}\") do |h|\n  h.request :json\n  h.adapter Faraday.default_adapter\nend\n\nres = http.post do |req|\n  req.url \"#{uri.path}\"\n  req.headers['Authorization'] = \"bearer #{token}\"\n  req.body = {\n\t\"name\" => \"testserver\",\n\t\"region\" => \"sgp1\",\n\t\"size\" => \"512MB\",\n\t\"image\" => \"ubuntu-14-04-x64\",\n\t\"ipv6\" => \"false\"\n  }\nend\n\np res.body\n```\n\n**\u9593\u9055\u3044\u63a2\u3057**\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u307e\u3059\u304c\u3001\u30db\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b`request :json`\u3068\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001POST\u30ea\u30af\u30a8\u30b9\u30c8\u4e2d\u3067\u306eContent-Type\u8a18\u8ff0\u3001\u304a\u3088\u3073\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306ejson\u5909\u63db\u304c\u8981\u3089\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u300c\u305d\u308c\u3060\u3051\u304b\u3088\u300d\u3068\u3044\u3046\u6c17\u3082\u3057\u307e\u3059\u304c\u2026faraday_middleware\u306f\u81ea\u5206\u3067\u4f5c\u308a\u8fbc\u3080\u3053\u3068\u3067\u67d4\u8edf\u306b\u6d3b\u7528\u3059\u308b\u3068\u3053\u308d\u304c\u30df\u30bd\u3067\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u5927\u3057\u305f\u52b9\u679c\u306f\u5f97\u3089\u308c\u306a\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3057\u3087\u3046\u3002\n\n## \u7dcf\u8a55\nopen-uri\u306f\u3057\u3087\u3046\u304c\u306a\u3044\u3068\u3057\u3066\u3001\u4e00\u822c\u7684\u306aREST\u64cd\u4f5c\u306e\u7bc4\u7587\u306b\u8981\u4ef6\u304c\u53ce\u307e\u308b\u306a\u3089\u3070rest-client\u304c\u6271\u3044\u3084\u3059\u3044\u3088\u3046\u306b\u601d\u3044\u307e\u3059\u3002API\u64cd\u4f5c\u306b\u7d61\u3081\u3066\u9ad8\u5ea6\u306a\u51e6\u7406\u3092\u884c\u3046\u306e\u3067\u3042\u308c\u3070\u3001Faraday\u3082\u30a2\u30ea\u3067\u3059\u3002\n\n\u6b63\u76f4\u306a\u3068\u3053\u308d\u3001\u8a18\u8ff0\u91cf\u3068\u3057\u3066\u306fnet/http\u304b\u3089\u6975\u7aef\u306b\u6e1b\u308b\u3082\u306e\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u8af8\u822c\u306e\u4e8b\u60c5\u306b\u3088\u308agem\u304crequire\u304c\u3057\u306b\u304f\u3044\u958b\u767a\u3067\u3042\u308c\u3070\u3001\u7121\u7406\u306b\u4f7f\u308f\u306a\u304f\u3066\u3082\u306a\u3093\u3068\u304b\u306a\u3063\u3066\u3057\u307e\u3046\u3067\u3057\u3087\u3046\u3002\u305f\u3060\u3057\u4eca\u56de\u53d6\u308a\u4e0a\u3052\u3066\u3044\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4f8b\u5916\u51e6\u7406\u306b\u3082\u76ee\u304c\u884c\u304d\u5c4a\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u7dcf\u5408\u7684\u306b\u5224\u65ad\u3059\u308b\u306e\u304c\u5409\u306a\u3088\u3046\u306b\u3082\u3002\n\n\u79c1\u306f\u7d20\u4eba\u306a\u306e\u3067\u3001\u6271\u3044\u3084\u3059\u3044\u305d\u3046\u306arest-client\u3067\u3057\u3070\u3089\u304f\u304a\u4e16\u8a71\u306b\u306a\u3063\u3066\u307f\u3088\u3046\u304b\u306a\u3068\u601d\u3063\u3066\u307e\u3059(\u9014\u4e2d\u3067\u5909\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c)\u3002\n\n", "tags": ["Ruby", "DigitalOcean", "api"]}