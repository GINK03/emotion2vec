{"context": " More than 1 year has passed since last update.\n\nURLConnection\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nAuthenticator\u306e\u5b9f\u88c5\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u5c11\u3057\u53e4\u3044\u60c5\u5831\u3060\u3068\u30b7\u30b9\u30c6\u30e0\u30d7\u30ed\u30d1\u30c6\u30a3\u306eproxyUser\u3068proxyPassword\u3092\u4f7f\u3046\u3088\u3046\u306b\u66f8\u3044\u3066\u3042\u308b\u304c\u3001\u73fe\u5728\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u306e\u3067\u6ce8\u610f\u3002\n    public static String URL = \"http://www.apache.org/\";\n    public static String HOST = \"proxy.server\";\n    public static int PORT = 9000;\n    public static String USER = \"user\";\n    public static String PASSWORD = \"pass\";\n\n    public static void example1() throws Exception {\n        System.setProperty(\"proxySet\", \"true\");\n        System.setProperty(\"proxyHost\", HOST);\n        System.setProperty(\"proxyPort\", Integer.toString(PORT));\n\n        Authenticator.setDefault(new Authenticator() {\n            @Override\n            protected PasswordAuthentication getPasswordAuthentication() {\n                return new PasswordAuthentication(USER, PASSWORD.toCharArray());\n            }\n        });\n\n        URL url = new URL(URL);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n        System.out.println(conn.getResponseCode());\n    }\n\n\nHttpClient4.3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n    public static void example2() throws Exception {\n        HttpHost proxy = new HttpHost(HOST, PORT);\n        CredentialsProvider credsProvider = new BasicCredentialsProvider();\n        credsProvider.setCredentials(\n                new AuthScope(proxy),\n                new UsernamePasswordCredentials(USER, PASSWORD));\n        RequestConfig config = RequestConfig.custom()\n                .setProxy(proxy)\n                .build();\n        HttpClient httpclient = HttpClients.custom()\n                .setDefaultCredentialsProvider(credsProvider)\n                .setDefaultRequestConfig(config)\n                .build();\n\n        HttpGet get = new HttpGet(URL);\n        HttpResponse res = httpclient.execute(get);\n        System.out.println(res.getStatusLine());\n    }\n\n\n\u53c2\u8003\nApache HttpComponents > HttpClient 4.3 > Examples > Proxy authentication\n# URLConnection\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\n`Authenticator`\u306e\u5b9f\u88c5\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u5c11\u3057\u53e4\u3044\u60c5\u5831\u3060\u3068\u30b7\u30b9\u30c6\u30e0\u30d7\u30ed\u30d1\u30c6\u30a3\u306e`proxyUser`\u3068`proxyPassword`\u3092\u4f7f\u3046\u3088\u3046\u306b\u66f8\u3044\u3066\u3042\u308b\u304c\u3001\u73fe\u5728\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u306e\u3067\u6ce8\u610f\u3002\n\n```java\n    public static String URL = \"http://www.apache.org/\";\n    public static String HOST = \"proxy.server\";\n    public static int PORT = 9000;\n    public static String USER = \"user\";\n    public static String PASSWORD = \"pass\";\n\n    public static void example1() throws Exception {\n        System.setProperty(\"proxySet\", \"true\");\n        System.setProperty(\"proxyHost\", HOST);\n        System.setProperty(\"proxyPort\", Integer.toString(PORT));\n        \n        Authenticator.setDefault(new Authenticator() {\n            @Override\n            protected PasswordAuthentication getPasswordAuthentication() {\n                return new PasswordAuthentication(USER, PASSWORD.toCharArray());\n            }\n        });\n        \n        URL url = new URL(URL);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n        System.out.println(conn.getResponseCode());\n    }\n```\n\n# HttpClient4.3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\n```java\n    public static void example2() throws Exception {\n        HttpHost proxy = new HttpHost(HOST, PORT);\n        CredentialsProvider credsProvider = new BasicCredentialsProvider();\n        credsProvider.setCredentials(\n                new AuthScope(proxy),\n                new UsernamePasswordCredentials(USER, PASSWORD));\n        RequestConfig config = RequestConfig.custom()\n                .setProxy(proxy)\n                .build();\n        HttpClient httpclient = HttpClients.custom()\n                .setDefaultCredentialsProvider(credsProvider)\n                .setDefaultRequestConfig(config)\n                .build();\n\n        HttpGet get = new HttpGet(URL);\n        HttpResponse res = httpclient.execute(get);\n        System.out.println(res.getStatusLine());\n    }\n```\n\n## \u53c2\u8003\n[Apache HttpComponents](http://hc.apache.org/) > [HttpClient 4.3](http://hc.apache.org/httpcomponents-client-4.3.x/index.html) > [Examples](http://hc.apache.org/httpcomponents-client-4.3.x/examples.html) > [Proxy authentication](http://hc.apache.org/httpcomponents-client-4.3.x/httpclient/examples/org/apache/http/examples/client/ClientProxyAuthentication.java)\n\n\n\n", "tags": ["Java", "HttpClient4.3", "proxy"]}