{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nSORACOM Advent Calendar 2015 \u306e 15 \u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\u3084\u308a\u305f\u3044\u3053\u3068\nBLE \u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092 AWS IoT \u306b Publish \u3057\u307e\u3059\u3002\n\u3053\u308c\u3092 Go \u8a00\u8a9e\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\nPublish \u3059\u308b\u3068\u304d\u306f\u3001SORACOM Beam \u3092\u4f7f\u3063\u3066\u3001\u6697\u53f7\u5316\u51e6\u7406\u3092\u30aa\u30d5\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nGo \u3067\u5b9f\u88c5\u3059\u308b\u306e\u306f\u6700\u8fd1 Go \u3092\u89e6\u308a\u59cb\u3081\u3066\u3001\u52c9\u5f37\u304c\u3066\u3089\u4f55\u304b\u66f8\u3044\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u304b\u3089\u3067\u3059\u3002\nMac \u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u6700\u8fd1\u306f\u3001IoT \u95a2\u9023\u306e\u6280\u8853\u60c5\u5831\u306f\u30cd\u30c3\u30c8\u306b\u6ea2\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u8abf\u3079\u3066\u3059\u3050\u5206\u304b\u308b\u3068\u3053\u308d\u306f\u672c\u8a18\u4e8b\u3067\u306f\u9069\u5b9c\u7701\u7565\u3057\u307e\u3059\u3002\n\u3044\u308d\u3044\u308d\u3054\u3063\u305f\u716e\u306b\u3057\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u91cd\u8981\u306a\u524d\u63d0\u304c\u6b20\u3051\u3066\u3044\u305f\u308a\u3057\u305f\u3089\u3059\u307f\u307e\u305b\u3093\u3002\n\nAWS IoT \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\uff08\u624b\u9806\u3060\u3051\u6574\u7406\u3057\u307e\u3059\uff01\uff09\n\nThing \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\u30fb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002(\u5fd8\u308c\u305a\u306b\uff01)\nPolicy \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u8a3c\u660e\u66f8\u306b Thing \u3068 Polich \u3092\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n\n\nSORACOM Beam \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\uff08Beam \u306e\u8a2d\u5b9a\u306f User Console \u3060\u3051\u3067\u3067\u304d\u307e\u3059\uff01\uff09\n\nAWS IoT \u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\nCA \u8a3c\u660e\u66f8 \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nSORACOM User Console \u3067\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3057\u3001\u305d\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u5bfe\u3057\u3066 SORACOM Beam \u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4f7f\u7528\u3059\u308b SIM \u3092 2. \u3067\u8a2d\u5b9a\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3055\u305b\u307e\u3059\u3002\n\n\nGo \u3067 BLE \u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n\u4eca\u56de\u306f\u30bb\u30f3\u30b5\u30fc\u306b\u3000SensorTag CC2650STK \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u3061\u3087\u3063\u3068\u6642\u9593\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u4eca\u56de\u306f\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3089\u305d\u306e\u90fd\u5ea6\u901a\u77e5\u3055\u305b\u308b\u3001\u3068\u3044\u3046\u3068\u3053\u308d\u307e\u3067\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nGo \u3067\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u3001paypal/gatt \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n% go get github.com/paypal/gatt\n\nexamples/explorer.go \u53c2\u8003\u306b\u3001SensorTag \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\nBLE\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\nPeripheral ID\nService \u306e UUID\nCharactaristic \u306e UUID\n\nPeripheral ID \u306f examples/discover.go \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nService \u306e UUID \u3068 Charactaristic \u306e UUID \u306f examples/explorer.go \u3092\u5b9f\u884c\u3057\u305f\u308a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u78ba\u8a8d\u3059\u308c\u3070\u5206\u304b\u308b\u306f\u305a\u306a\u3093\u3067\u3059\u304c\u3001\u5c11\u3057\u697d\u3092\u3059\u308b\u305f\u3081\u306b\u3001sandeepmistry/node-sensortag \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nnode-sensortag \u306e lib/common.js \u306b SIMPLE_KEY_UUID \u3068\u3001SIMPLE_KEY_DATA_UUID \u3068\u3044\u3046\u5b9a\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u3001\u3053\u306e\u5024\u304c Sensortag \u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306b\u901a\u77e5\u3057\u3066\u3082\u3089\u3046\u305f\u3081\u306b\u5fc5\u8981\u306a\u3001UUID \u306b\u306a\u308a\u307e\u3059\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u90e8\u5206\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\napp.go\npackage main\n\nimport (\n    \"fmt\"\n    \"strings\"\n\n    \"github.com/paypal/gatt\"\n)\n\nvar message = make(chan string)\nvar done = make(chan struct{})\n\nfunc main() {\n    d, err := gatt.NewDevice()\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n\n    go publish(message)\n\n    d.Handle(\n        gatt.PeripheralDiscovered(onPeriphDiscovered),\n        gatt.PeripheralConnected(onPeriphConnected),\n        gatt.PeripheralDisconnected(onPeriphDisconnected),\n    )\n\n    d.Init(onStateChanged)\n    <-done\n    fmt.Println(\"Exit\")\n}\n\n\n\nfunc onStateChanged(d gatt.Device, s gatt.State) {\n    switch s {\n    case gatt.StatePoweredOn:\n        fmt.Println(\"Scanning...\")\n        d.Scan([]gatt.UUID{}, false)\n        return\n    default:\n        d.StopScanning()\n    }\n}\n\nfunc onPeriphDiscovered(p gatt.Peripheral, a *gatt.Advertisement, rssi int) {\n    id := strings.ToUpper(<Peripheral ID>)\n    if strings.ToUpper(p.ID()) != id {\n        return\n    }\n\n    p.Device().StopScanning()\n\n    p.Device().Connect(p)\n}\n\nfunc onPeriphConnected(p gatt.Peripheral, err error) {\n    fmt.Println(\"connected\")\n    sUUID := gatt.MustParseUUID(\"ffe0\")\n    ss, err := p.DiscoverServices([]gatt.UUID{sUUID})\n    if err != nil {\n        return\n    }\n\n    cUUID := gatt.MustParseUUID(\"ffe1\")\n    cc, err := p.DiscoverCharacteristics([]gatt.UUID{cUUID}, ss[0])\n    if err != nil {\n        return\n    }\n\n    p.SetNotifyValue(cc[0], func(c *gatt.Characteristic, b []byte, err error) {\n        switch b[0] {\n        case 0x1:\n            message<-\"left\"\n        case 0x2:\n            message<-\"right\"\n        case 0x3:\n            message<-\"gobeam\"\n        }\n    })\n}\n\nfunc onPeriphDisconnected(p gatt.Peripheral, err error) {\n    fmt.Println(\"Disconnected\")\n    close(done)\n}\n\n\nScan \u3092\u958b\u59cb\u3059\u308b\u3068\u3044\u308d\u3093\u306a Peripheral \u304c\u898b\u3064\u304b\u308a\u307e\u3059\u306e\u3067\u3001onPeriphDiscovered \u95a2\u6570\u3067\u306f\u3001\u898b\u3064\u304b\u3063\u305f Peripheral \u306e\u4e2d\u304b\u3089 Sensortag \u306b\u4e00\u81f4\u3059\u308b\u3082\u306e\u3060\u3051\u306b\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u8fba\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u6e21\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u308a\u3001\u30a2\u30c9\u30ec\u30b9\u3084\u540d\u524d\u3067\u691c\u7d22\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u65b9\u304c\u4fbf\u5229\u3067\u3059\u306d\u3002\nPeripheral \u306b\u7e4b\u304c\u3063\u305f\u3089\u3001onPeriphConnected \u95a2\u6570\u3067 Service \u3068 Characteristic \u3092\u53d6\u5f97\u3057\u3001Peripheral \u306b\u5bfe\u3057\u3066 SetNotifyValue \u3057\u3066\u3044\u307e\u3059\u3002\n\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u308b\u3068\u3001\u53f3\u306e\u30dc\u30bf\u30f3\u304b\u3001\u5de6\u306e\u30dc\u30bf\u30f3\u304b\u3001\u3042\u308b\u3044\u306f\u4e21\u65b9\u304b\u3067\u53d6\u5f97\u3067\u304d\u308b\u5024\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\u6b21\u306b\u3001AWS IoT \u306b Publish \u3059\u308b\u90e8\u5206\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\npublisher.go\npackage main\n\nimport (\n    \"fmt\"\n\n    MQTT \"git.eclipse.org/gitroot/paho/org.eclipse.paho.mqtt.golang.git\"\n)\n\nconst uri = \"tcp://beam.soracom.io:1883\"\n\nfunc publish(message chan string) {\n    opts := MQTT.NewClientOptions().AddBroker(uri)\n    opts.SetClientID(\"clientid2\")\n\n    c := MQTT.NewClient(opts)\n    if token := c.Connect(); token.Wait() && token.Error() != nil {\n        panic(token.Error())\n    }\n    defer c.Disconnect(250)\n\n    for ;; {\n        select {\n        case text := <-message:\n            token := c.Publish(\"gobeam\", 0, false, text)\n            token.Wait()\n            fmt.Printf(\"published: %s\\n\", text)\n        }\n    }\n}\n\n\n\nPaho MQTT client library \u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\u809d\u306f\u3001\u30db\u30b9\u30c8\u306b SORACOM Beam \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3068\u3001\u30e1\u30a4\u30f3\u306e\u51e6\u7406\u304b\u3089\u30c1\u30e3\u30cd\u30eb\u3092\u7d4c\u7531\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\u3068\u3053\u308d\u3067\u3059\u3002\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\n\u79c1\u306f gobeam \u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u30d3\u30eb\u30c9\u3059\u308b\u3068 gobeam \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3057\u305f\u3002\n\u3061\u3083\u3093\u3068 Mac \u304c SORACOM Air \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\n% ./gobeam\n\n\u3068\u3084\u3063\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\"Scanning...\" \u3068\u8868\u793a\u3055\u308c\u3066 Sensortag \u3092\u63a2\u3057\u59cb\u3081\u307e\u3059\u3002\n\u898b\u3064\u304b\u308b\u3068\u3001\"connected\" \u3068\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u304f\u308a\u307e\u3059\u3002\n\u304c\u305d\u306e\u524d\u306b\u3061\u3083\u3093\u3068 Publish \u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001mosuquitto_sub \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n% mosquitto_sub -h beam.soracom.io -p 1883 -q 1 -d -t gobeam -i clientid1\n\n\u305d\u3046\u3059\u308b\u3068\u3001\u30dc\u30bf\u30f3\u306e\u53f3\u304b\u5de6\u304b\u4e21\u65b9\u304b\u3067 Subscribe \u3055\u308c\u308b\u5185\u5bb9\u304c\u5909\u308f\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u3042\u3068\u3084\u308a\u305f\u3044\u3053\u3068\n\u6642\u9593\u5207\u308c\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u4eca\u56de\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\n\nSensorTag \u4ee5\u5916\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u3002\nIoT \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306b\u914d\u7f6e\u3057\u3066\u307f\u3066\u3001Beam \u3092\u4f7f\u3046/\u4f7f\u308f\u306a\u3044\u3067\u6bd4\u8f03\n\u591a\u8a00\u8a9e\u3067\u5b9f\u88c5\u3057\u3066\u307f\u3066\u6bd4\u8f03\n\n\u306a\u3069\u3084\u3063\u3066\u307f\u305f\u3044\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n# \u306f\u3058\u3081\u306b\n\nSORACOM Advent Calendar 2015 \u306e 15 \u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n# \u3084\u308a\u305f\u3044\u3053\u3068\nBLE \u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092 AWS IoT \u306b Publish \u3057\u307e\u3059\u3002\n\u3053\u308c\u3092 Go \u8a00\u8a9e\u3067\u3084\u3063\u3066\u307f\u307e\u3059\u3002\nPublish \u3059\u308b\u3068\u304d\u306f\u3001SORACOM Beam \u3092\u4f7f\u3063\u3066\u3001\u6697\u53f7\u5316\u51e6\u7406\u3092\u30aa\u30d5\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nGo \u3067\u5b9f\u88c5\u3059\u308b\u306e\u306f\u6700\u8fd1 Go \u3092\u89e6\u308a\u59cb\u3081\u3066\u3001\u52c9\u5f37\u304c\u3066\u3089\u4f55\u304b\u66f8\u3044\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u304b\u3089\u3067\u3059\u3002\nMac \u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u6700\u8fd1\u306f\u3001IoT \u95a2\u9023\u306e\u6280\u8853\u60c5\u5831\u306f\u30cd\u30c3\u30c8\u306b\u6ea2\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u8abf\u3079\u3066\u3059\u3050\u5206\u304b\u308b\u3068\u3053\u308d\u306f\u672c\u8a18\u4e8b\u3067\u306f\u9069\u5b9c\u7701\u7565\u3057\u307e\u3059\u3002\n\u3044\u308d\u3044\u308d\u3054\u3063\u305f\u716e\u306b\u3057\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u91cd\u8981\u306a\u524d\u63d0\u304c\u6b20\u3051\u3066\u3044\u305f\u308a\u3057\u305f\u3089\u3059\u307f\u307e\u305b\u3093\u3002\n\n# AWS IoT \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\uff08\u624b\u9806\u3060\u3051\u6574\u7406\u3057\u307e\u3059\uff01\uff09\n\n1. Thing \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n2. \u8a3c\u660e\u66f8\u306e\u4f5c\u6210\u30fb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002(\u5fd8\u308c\u305a\u306b\uff01)\n3. Policy \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n4. \u8a3c\u660e\u66f8\u306b Thing \u3068 Polich \u3092\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n\n# SORACOM Beam \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\uff08Beam \u306e\u8a2d\u5b9a\u306f User Console \u3060\u3051\u3067\u3067\u304d\u307e\u3059\uff01\uff09\n\n1. AWS IoT \u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n2. [CA \u8a3c\u660e\u66f8](https://www.symantec.com/content/en/us/enterprise/verisign/roots/VeriSign-Class%203-Public-Primary-Certification-Authority-G5.pem) \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n3. SORACOM User Console \u3067\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3057\u3001\u305d\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u5bfe\u3057\u3066 SORACOM Beam \u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n4. \u4f7f\u7528\u3059\u308b SIM \u3092 2. \u3067\u8a2d\u5b9a\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3055\u305b\u307e\u3059\u3002\n\n# Go \u3067 BLE \u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n\n\u4eca\u56de\u306f\u30bb\u30f3\u30b5\u30fc\u306b\u3000[SensorTag CC2650STK](http://www.tij.co.jp/tool/jp/CC2650STK?DCMP=edn0915&HQS=ep-wcs-lprf-edn0915-bs-text-evm-cc2650stk-jp) \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u3061\u3087\u3063\u3068\u6642\u9593\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u4eca\u56de\u306f\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3089\u305d\u306e\u90fd\u5ea6\u901a\u77e5\u3055\u305b\u308b\u3001\u3068\u3044\u3046\u3068\u3053\u308d\u307e\u3067\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\nGo \u3067\u30bb\u30f3\u30b5\u30fc\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u3001[paypal/gatt](https://github.com/paypal/gatt) \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```\n% go get github.com/paypal/gatt\n```\n\nexamples/explorer.go \u53c2\u8003\u306b\u3001SensorTag \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\nBLE\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n* Peripheral ID\n* Service \u306e UUID\n* Charactaristic \u306e UUID\n\nPeripheral ID \u306f examples/discover.go \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nService \u306e UUID \u3068 Charactaristic \u306e UUID \u306f examples/explorer.go \u3092\u5b9f\u884c\u3057\u305f\u308a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u78ba\u8a8d\u3059\u308c\u3070\u5206\u304b\u308b\u306f\u305a\u306a\u3093\u3067\u3059\u304c\u3001\u5c11\u3057\u697d\u3092\u3059\u308b\u305f\u3081\u306b\u3001[sandeepmistry/node-sensortag](https://github.com/sandeepmistry/node-sensortag) \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\nnode-sensortag \u306e lib/common.js \u306b SIMPLE_KEY_UUID \u3068\u3001SIMPLE_KEY_DATA_UUID \u3068\u3044\u3046\u5b9a\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u3001\u3053\u306e\u5024\u304c Sensortag \u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306b\u901a\u77e5\u3057\u3066\u3082\u3089\u3046\u305f\u3081\u306b\u5fc5\u8981\u306a\u3001UUID \u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u90e8\u5206\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n``` app.go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"strings\"\n\n\t\"github.com/paypal/gatt\"\n)\n\nvar message = make(chan string)\nvar done = make(chan struct{})\n\nfunc main() {\n\td, err := gatt.NewDevice()\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\t\n\tgo publish(message)\n\n\td.Handle(\n\t\tgatt.PeripheralDiscovered(onPeriphDiscovered),\n\t\tgatt.PeripheralConnected(onPeriphConnected),\n\t\tgatt.PeripheralDisconnected(onPeriphDisconnected),\n\t)\n\n\td.Init(onStateChanged)\n\t<-done\n\tfmt.Println(\"Exit\")\n}\n\n\n\nfunc onStateChanged(d gatt.Device, s gatt.State) {\n\tswitch s {\n\tcase gatt.StatePoweredOn:\n\t\tfmt.Println(\"Scanning...\")\n\t\td.Scan([]gatt.UUID{}, false)\n\t\treturn\n\tdefault:\n\t\td.StopScanning()\n\t}\n}\n\nfunc onPeriphDiscovered(p gatt.Peripheral, a *gatt.Advertisement, rssi int) {\n\tid := strings.ToUpper(<Peripheral ID>)\n\tif strings.ToUpper(p.ID()) != id {\n\t\treturn\n\t}\n\n\tp.Device().StopScanning()\n\n\tp.Device().Connect(p)\n}\n\nfunc onPeriphConnected(p gatt.Peripheral, err error) {\n\tfmt.Println(\"connected\")\n\tsUUID := gatt.MustParseUUID(\"ffe0\")\n\tss, err := p.DiscoverServices([]gatt.UUID{sUUID})\n\tif err != nil {\n\t\treturn\n\t}\n\t\n\tcUUID := gatt.MustParseUUID(\"ffe1\")\n\tcc, err := p.DiscoverCharacteristics([]gatt.UUID{cUUID}, ss[0])\n\tif err != nil {\n\t\treturn\n\t}\n\t\n\tp.SetNotifyValue(cc[0], func(c *gatt.Characteristic, b []byte, err error) {\n\t\tswitch b[0] {\n\t\tcase 0x1:\n\t\t\tmessage<-\"left\"\n\t\tcase 0x2:\n\t\t\tmessage<-\"right\"\n\t\tcase 0x3:\n\t\t\tmessage<-\"gobeam\"\n\t\t}\n\t})\n}\n\nfunc onPeriphDisconnected(p gatt.Peripheral, err error) {\n\tfmt.Println(\"Disconnected\")\n\tclose(done)\n}\n```\n\nScan \u3092\u958b\u59cb\u3059\u308b\u3068\u3044\u308d\u3093\u306a Peripheral \u304c\u898b\u3064\u304b\u308a\u307e\u3059\u306e\u3067\u3001onPeriphDiscovered \u95a2\u6570\u3067\u306f\u3001\u898b\u3064\u304b\u3063\u305f Peripheral \u306e\u4e2d\u304b\u3089 Sensortag \u306b\u4e00\u81f4\u3059\u308b\u3082\u306e\u3060\u3051\u306b\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u8fba\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3067\u6e21\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u308a\u3001\u30a2\u30c9\u30ec\u30b9\u3084\u540d\u524d\u3067\u691c\u7d22\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u65b9\u304c\u4fbf\u5229\u3067\u3059\u306d\u3002\nPeripheral \u306b\u7e4b\u304c\u3063\u305f\u3089\u3001onPeriphConnected \u95a2\u6570\u3067 Service \u3068 Characteristic \u3092\u53d6\u5f97\u3057\u3001Peripheral \u306b\u5bfe\u3057\u3066 SetNotifyValue \u3057\u3066\u3044\u307e\u3059\u3002\n\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u308b\u3068\u3001\u53f3\u306e\u30dc\u30bf\u30f3\u304b\u3001\u5de6\u306e\u30dc\u30bf\u30f3\u304b\u3001\u3042\u308b\u3044\u306f\u4e21\u65b9\u304b\u3067\u53d6\u5f97\u3067\u304d\u308b\u5024\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\n\u6b21\u306b\u3001AWS IoT \u306b Publish \u3059\u308b\u90e8\u5206\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n``` publisher.go\npackage main\n\nimport (\n\t\"fmt\"\n\t\n\tMQTT \"git.eclipse.org/gitroot/paho/org.eclipse.paho.mqtt.golang.git\"\n)\n\nconst uri = \"tcp://beam.soracom.io:1883\"\n\nfunc publish(message chan string) {\n\topts := MQTT.NewClientOptions().AddBroker(uri)\n\topts.SetClientID(\"clientid2\")\n\t\n\tc := MQTT.NewClient(opts)\n\tif token := c.Connect(); token.Wait() && token.Error() != nil {\n    \tpanic(token.Error())\n    }\n\tdefer c.Disconnect(250)\n\t\n\tfor ;; {\n\t\tselect {\n\t\tcase text := <-message:\n\t\t\ttoken := c.Publish(\"gobeam\", 0, false, text)\n\t\t\ttoken.Wait()\n\t\t\tfmt.Printf(\"published: %s\\n\", text)\n\t\t}\n\t}\n}\n\n```\n\nPaho MQTT client library \u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\u809d\u306f\u3001\u30db\u30b9\u30c8\u306b SORACOM Beam \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3068\u3001\u30e1\u30a4\u30f3\u306e\u51e6\u7406\u304b\u3089\u30c1\u30e3\u30cd\u30eb\u3092\u7d4c\u7531\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\u3068\u3053\u308d\u3067\u3059\u3002\n\n# \u5b9f\u884c\u3057\u3066\u307f\u308b\n\n\u79c1\u306f gobeam \u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u30d3\u30eb\u30c9\u3059\u308b\u3068 gobeam \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3057\u305f\u3002\n\u3061\u3083\u3093\u3068 Mac \u304c SORACOM Air \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\n\n```\n% ./gobeam\n```\n\n\u3068\u3084\u3063\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\"Scanning...\" \u3068\u8868\u793a\u3055\u308c\u3066 Sensortag \u3092\u63a2\u3057\u59cb\u3081\u307e\u3059\u3002\n\u898b\u3064\u304b\u308b\u3068\u3001\"connected\" \u3068\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u304f\u308a\u307e\u3059\u3002\n\u304c\u305d\u306e\u524d\u306b\u3061\u3083\u3093\u3068 Publish \u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001mosuquitto_sub \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n% mosquitto_sub -h beam.soracom.io -p 1883 -q 1 -d -t gobeam -i clientid1\n```\n\n\u305d\u3046\u3059\u308b\u3068\u3001\u30dc\u30bf\u30f3\u306e\u53f3\u304b\u5de6\u304b\u4e21\u65b9\u304b\u3067 Subscribe \u3055\u308c\u308b\u5185\u5bb9\u304c\u5909\u308f\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u3053\u306e\u3042\u3068\u3084\u308a\u305f\u3044\u3053\u3068\n\n\u6642\u9593\u5207\u308c\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u4eca\u56de\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\n\n* SensorTag \u4ee5\u5916\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u3002\n* IoT \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306b\u914d\u7f6e\u3057\u3066\u307f\u3066\u3001Beam \u3092\u4f7f\u3046/\u4f7f\u308f\u306a\u3044\u3067\u6bd4\u8f03\n* \u591a\u8a00\u8a9e\u3067\u5b9f\u88c5\u3057\u3066\u307f\u3066\u6bd4\u8f03\n\n\u306a\u3069\u3084\u3063\u3066\u307f\u305f\u3044\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["SORACOM", "Go", "bluetooth"]}