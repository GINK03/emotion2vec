{"context": " More than 1 year has passed since last update.\u7c21\u7d20\u306a\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u6b32\u3057\u304f\u3066\u3001clndr-rails\u3092\u8a66\u3057\u305f\u304c\u3072\u3068\u6708\u6bce\u306b\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u306b\u306fjson\u3067\u3084\u308a\u53d6\u308a\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u304b\u3063\u305f\u308a\u3001Event\u306e\u7a2e\u985e\u308f\u3051\u3066CSS\u5f53\u3066\u305f\u3044\u7b49\u3044\u308d\u3044\u308d\u5f04\u304f\u3063\u3066\u62e1\u5f35\u96e3\u3057\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u30d9\u30fc\u30b9\u306eCSS\u3060\u3051\u6b8b\u3057\u3066\u5f8c\u306f\u81ea\u4f5c\u3057\u305f\u65b9\u304c\u826f\u3044\u6c17\u304c\u3057\u305f\u306e\u3067\u305d\u306e\u30e1\u30e2\n\nClndr\n\nClndr\nclndr-rails\n\ngem 'clndr-rails'\n\n\napplication.css\n*= require clndr-rails\n\n\n\nModel\n\ncalendar.rb\nclass Calendar\n  attr_accessor :current_month_days, :prev_month_days, :next_month_days, :start_day\n\n  def initialize(date, start_day: :sunday)\n    self.current_month_days = date.all_month\n    self.prev_month_days    = date.prev_month.all_month\n    self.next_month_days    = date.next_month.all_month\n    self.start_day = start_day\n  end\n\n  def to_partial_path\n    'calendar/calendar'\n  end\n\n\n  def headers\n    %w(Sun Mon Tue Wed Thu Fri Sat)\n  end\n\n  def title\n    \"#{current_month_days.first.month} #{current_month_days.first.year}\"\n  end\n\n\n  def days\n    days = current_month_days.to_a\n    days.concat(prev_month_days_in_first_week)\n    days.concat(next_month_days_in_last_week)\n\n    days.sort.map{|date| add_singleton_methods(date) }\n  end\n\n\n  def prev_month_path\n    switch_month_path(:prev)\n  end\n\n  def next_month_path\n    switch_month_path(:next)\n  end\n\n\nprivate\n\n  def prev_month_days_in_first_week\n    (current_month_days.first.beginning_of_week(start_day)...current_month_days.first).reject{|date|\n      date.in?(current_month_days)\n    }\n  end\n\n\n  def next_month_days_in_last_week\n    (current_month_days.last..current_month_days.last.end_of_week(start_day)).reject {|date|\n      date.in?(current_month_days)\n    }\n  end\n\n\n  def add_singleton_methods(date)\n    is_prev_month, is_next_month = prev_month_days.include?(date), next_month_days.include?(date)\n\n    date.define_singleton_method(:prev_month?){ is_prev_month }\n    date.define_singleton_method(:next_month?){ is_next_month }\n\n    date\n  end\n\n\n  def switch_month_path(type)\n    target_date =\n      case type\n      when :prev then prev_month_days.first\n      when :next then next_month_days.first\n      end\n\n    Rails.application.routes.url_helpers.calendar_path(\n      month: target_date.month,\n      year:  target_date.year\n    )\n  end\nend\n\n\nto_partial_path\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067rendar @calendar\u3067\u63cf\u753b\u3067\u304d\u308b\n\nController\n\ncalendar_controller.rb\ndef index\n  @calendar = Calendar.new(current_date)\nend\n\n\n\nView\n\ncalndar/index.html.erb\n<%= render @calendar %>\n\n\n\nclandar/_calendar.html.erb\n<div id=\"my-clndr\" class=\"clearfix full-clndr-template\">\n  <div class=\"clndr\">\n    <div class=\"clndr-controls\">\n      <%= link_to calendar.prev_month_path do %>\n        <div class=\"clndr-previous-button\">&lt;</div>\n      <% end %>\n      <%= link_to calendar.next_month_path do %>\n        <div class=\"clndr-next-button\">&gt;</div>\n      <% end %>\n    <div class=\"current-month\"><%= calendar.title %></div>\n  </div>\n  </div>\n  <div class=\"clndr-grid full\">\n    <div class=\"days-of-the-week clearfix\">\n      <% calendar.headers.each do |day_of_week| %>\n        <div class=\"header-day\"><%= day_of_week %></div>\n      <% end %>\n    </div>\n    <div class=\"days\">\n      <% calendar.days.each do |date| %>\n        <%= content_tag :div,\n        class: \"day #{'past' if date.past?} \\\n          #{'prev-month adjacent-month' if date.prev_month?} \\\n          #{'next-month adjacent-month' if date.next_month?} \\\n          calendar-dow-#{date.wday}\".squish! do %>\n          <span class=\"day-number\"><%= date.day %></span>\n        <% end %>\n      <% end %>\n    </div>\n  </div>\n</div>\n\n\n\u3068\u308a\u3042\u3048\u305a\u57fa\u672c\u7684\u306a\u3068\u3053\u3060\u3051\u51fa\u6765\u305f\n\n\u3042\u3068\u306f\u3053\u3053\u304b\u3089\u898b\u305f\u76ee\u5f04\u304f\u3063\u305f\u308aevents\u3092\u3064\u3063\u3053\u3093\u3060\u308a\u3002\n\u7c21\u7d20\u306a\u30ab\u30ec\u30f3\u30c0\u30fc\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u6b32\u3057\u304f\u3066\u3001[clndr-rails](https://github.com/sedx/clndr-rails)\u3092\u8a66\u3057\u305f\u304c\u3072\u3068\u6708\u6bce\u306b\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u306b\u306fjson\u3067\u3084\u308a\u53d6\u308a\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u304b\u3063\u305f\u308a\u3001Event\u306e\u7a2e\u985e\u308f\u3051\u3066CSS\u5f53\u3066\u305f\u3044\u7b49\u3044\u308d\u3044\u308d\u5f04\u304f\u3063\u3066\u62e1\u5f35\u96e3\u3057\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u30d9\u30fc\u30b9\u306eCSS\u3060\u3051\u6b8b\u3057\u3066\u5f8c\u306f\u81ea\u4f5c\u3057\u305f\u65b9\u304c\u826f\u3044\u6c17\u304c\u3057\u305f\u306e\u3067\u305d\u306e\u30e1\u30e2\n\n### Clndr\n+ [Clndr](https://github.com/kylestetz/CLNDR)\n+ [clndr-rails](https://github.com/sedx/clndr-rails)\n\n```Gemfile\ngem 'clndr-rails'\n```\n\n```application.css\n*= require clndr-rails\n```\n\n### Model\n```calendar.rb\nclass Calendar\n  attr_accessor :current_month_days, :prev_month_days, :next_month_days, :start_day\n\n  def initialize(date, start_day: :sunday)\n    self.current_month_days = date.all_month\n    self.prev_month_days    = date.prev_month.all_month\n    self.next_month_days    = date.next_month.all_month\n    self.start_day = start_day\n  end\n\n  def to_partial_path\n    'calendar/calendar'\n  end\n\n\n  def headers\n    %w(Sun Mon Tue Wed Thu Fri Sat)\n  end\n\n  def title\n    \"#{current_month_days.first.month} #{current_month_days.first.year}\"\n  end\n\n\n  def days\n    days = current_month_days.to_a\n    days.concat(prev_month_days_in_first_week)\n    days.concat(next_month_days_in_last_week)\n\n    days.sort.map{|date| add_singleton_methods(date) }\n  end\n\n\n  def prev_month_path\n    switch_month_path(:prev)\n  end\n\n  def next_month_path\n    switch_month_path(:next)\n  end\n\n\nprivate\n\n  def prev_month_days_in_first_week\n    (current_month_days.first.beginning_of_week(start_day)...current_month_days.first).reject{|date|\n      date.in?(current_month_days)\n    }\n  end\n\n\n  def next_month_days_in_last_week\n    (current_month_days.last..current_month_days.last.end_of_week(start_day)).reject {|date|\n      date.in?(current_month_days)\n    }\n  end\n\n\n  def add_singleton_methods(date)\n    is_prev_month, is_next_month = prev_month_days.include?(date), next_month_days.include?(date)\n\n    date.define_singleton_method(:prev_month?){ is_prev_month }\n    date.define_singleton_method(:next_month?){ is_next_month }\n\n    date\n  end\n\n\n  def switch_month_path(type)\n    target_date =\n      case type\n      when :prev then prev_month_days.first\n      when :next then next_month_days.first\n      end\n\n    Rails.application.routes.url_helpers.calendar_path(\n      month: target_date.month,\n      year:  target_date.year\n    )\n  end\nend\n```\n\n`to_partial_path`\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067`rendar @calendar`\u3067\u63cf\u753b\u3067\u304d\u308b\n\n\n### Controller\n```calendar_controller.rb\ndef index\n  @calendar = Calendar.new(current_date)\nend\n```\n\n\n### View\n```calndar/index.html.erb\n<%= render @calendar %>\n```\n\n\n```clandar/_calendar.html.erb\n<div id=\"my-clndr\" class=\"clearfix full-clndr-template\">\n  <div class=\"clndr\">\n    <div class=\"clndr-controls\">\n      <%= link_to calendar.prev_month_path do %>\n        <div class=\"clndr-previous-button\">&lt;</div>\n      <% end %>\n      <%= link_to calendar.next_month_path do %>\n        <div class=\"clndr-next-button\">&gt;</div>\n      <% end %>\n    <div class=\"current-month\"><%= calendar.title %></div>\n  </div>\n  </div>\n  <div class=\"clndr-grid full\">\n    <div class=\"days-of-the-week clearfix\">\n      <% calendar.headers.each do |day_of_week| %>\n        <div class=\"header-day\"><%= day_of_week %></div>\n      <% end %>\n    </div>\n    <div class=\"days\">\n      <% calendar.days.each do |date| %>\n        <%= content_tag :div,\n        class: \"day #{'past' if date.past?} \\\n          #{'prev-month adjacent-month' if date.prev_month?} \\\n          #{'next-month adjacent-month' if date.next_month?} \\\n          calendar-dow-#{date.wday}\".squish! do %>\n          <span class=\"day-number\"><%= date.day %></span>\n        <% end %>\n      <% end %>\n    </div>\n  </div>\n</div>\n```\n\n\u3068\u308a\u3042\u3048\u305a\u57fa\u672c\u7684\u306a\u3068\u3053\u3060\u3051\u51fa\u6765\u305f\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-29 1.54.50.png](https://qiita-image-store.s3.amazonaws.com/0/3914/cd33d2d8-2e54-ae9e-aba9-a4df306e9a93.png)\n\n\u3042\u3068\u306f\u3053\u3053\u304b\u3089\u898b\u305f\u76ee\u5f04\u304f\u3063\u305f\u308aevents\u3092\u3064\u3063\u3053\u3093\u3060\u308a\u3002\n\n", "tags": ["Rails", "activesupport", "clndr"]}