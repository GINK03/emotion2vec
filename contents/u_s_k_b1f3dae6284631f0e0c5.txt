{"context": " More than 1 year has passed since last update.\u5f8c\u3067\u81ea\u5206\u3067\u518d\u5ea6\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306e\u81ea\u5206\u7528\u30e1\u30e2\u3002\n\uff08\u9593\u9055\u3044\u3042\u308b\u304b\u3082\u3060\u3051\u3069\u3001\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6642\u306b\u76f4\u3059\uff09\n\n\u74b0\u5883\nConoHa\u306eVPS(\u30e1\u30e2\u30ea:1GB\u3001CPU:2\u30b3\u30a2\u3001SSD:50GB\uff09\nCentOS7\u3067\u74b0\u5883\u3092\u4f5c\u6210\u3002\n\nphp7\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum update\u3057\u305f\u3042\u3068\u3001\u8af8\u3005\u304c\u3055\u3063\u3068\u5165\u308c\u308b\n$yum -y groupinstall base network-tools development httpd-devel \n$yum install httpd openssl autoconf libxml2-devel openssl-devel freetype-devel libcurl-devel net-snmp-devel libpng-devel libjpeg-turbo-devel openldap-devel libmcrypt-devel readline-devel gd-devel\n bzip2-devel libicu-devel libwebp-devel gmp-devel libtidy-devel libxslt-devel\n$rpm -ivh http://dev.mysql.com/get/mysql57-community-release-el7-7.noarch.rpm\n$yum -y install mysql-community-devel mysql-community-server\n$cd /usr/local/src\n$wget -O php-7.0.2.tar.gz http://jp2.php.net/get/php-7.0.2.tar.gz/from/this/mirror\n$tar -xzvf php-7.0.2.tar.gz\n$./buildconf --force\n$./configure --with-libdir=lib64 --with-pic --with-bz2 --with-freetype-dir --with-png-dir --with-xpm-dir --enable-gd-native-ttf --with-gettext --with-gmp --with-iconv --with-jpeg-dir --with-curl --with-webp-dir --with-png-dir --with-openssl --with-pcre-regex --with-zlib --with-layout=GNU --enable-exif --enable-ftp --enable-sockets --with-kerberos --enable-shmop --enable-calendar --with-libxml-dir --with-mhash --with-ldap --with-readline --with-snmp --with-tidy --with-xsl --with-gnu-ld --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-mysql-sock=/var/lib/mysql/mysql.sock --enable-mbstring --with-mcrypt --with-gd --with-apxs2=/usr/bin/apxs --enable-pcntl --enable-zip\n\n\ncomposer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$curl -sS https://getcomposer.org/installer | php\n$mv composer.phar /usr/local/bin/composer\n\n\nyii2 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$cd /var/www/\n$composer global require \"fxp/composer-asset-plugin:~1.1.1\"\n$composer create-project --prefer-dist yiisoft/yii2-app-basic yii2\n\n\ncomposer\u3067\u74b0\u5883\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nrequire-dev\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u3057\u3066\u3001composer install\u3002\n\ncomposer.json\n    \"require-dev\": {\n        \"yiisoft/yii2-codeception\": \"*\",\n        \"yiisoft/yii2-debug\": \"*\",\n        \"yiisoft/yii2-gii\": \"*\",\n        \"yiisoft/yii2-faker\": \"*\",\n        \"phpunit/phpunit\": \"3.7.*\",\n        \"phpunit/phpunit-selenium\": \"*\",\n        \"phpunit/phpunit-story\": \"*\",\n        \"phpunit/dbunit\": \"*\",\n        \"phpunit/php-invoker\": \"*\",\n        \"codeception/codeception\": \"*\",\n        \"guzzle/guzzle\": \"*\"\n    },\n\n\n\ncodeception \u306bpath\u3092\u5207\u308b\n\u4ee5\u4e0b\u3092\u8ffd\u52a0\n\n.bashrc\nPATH=\"$PATH\":/var/www/yii2/vendor/codeception/codeception/\n\n\n\nfirefox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$wget -O firefox-44.0.tar.bz2 \"https://download.mozilla.org/?product=firefox-44.0-SSL&os=linux64&lang=ja\"\n$tar jxf firefox-44.0.tar.bz2\n$ln -s /usr/local/src/firefox/firefox /usr/bin/firefox\n\n\nXvfb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$yum install xorg-x11-server-Xvfb\n\nselenium-server\u306e\u6e96\u5099\n$yum install java-1.8.0-openjdk-devel.x86_64\n$wget -O selenium-server-standalone-2.50.1.jar http://goo.gl/76CpPA\n\n\ncodecept\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u751f\u6210\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u30c6\u30b9\u30c8\u4f5c\u6210\u3002\u7701\u7565\u51fa\u6765\u308b\u3057\u3001\u624b\u3067\u66f8\u3044\u3066\u3082\u826f\u3044\u3002\ncodecept generate:cept \u30c6\u30b9\u30c8\u7a2e\u5225 \u30c6\u30b9\u30c8\u540d -c \u4f5c\u6210\u5148\u30d1\u30b9\n\u4f8b\n$codecept generate:cept acceptance Login\n\nCUI\u3067selenium\u3092\u4f7f\u3063\u305f\u30d6\u30e9\u30a6\u30b6\u30c6\u30b9\u30c8\u306e\u6e96\u5099\nshell\u3068\u304b\u3067\u307e\u3068\u3081\u3066\u304a\u3044\u305f\u65b9\u304c\u697d\u304b\u3082\u3002\n\n$export DISPLAY=\"localhost:1.0\"\n$Xvfb :1 -screen 0 1440x900x16 &\n$java -jar /path/to/selenium-server/selenium-server-standalone-2.50.1.jar &\n\n\u5f8c\u306fyii2/tests/\u306e\u914d\u4e0b\u306b\u3042\u308b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7f6e\u304b\u308c\u305f\u3044\u3089\u306a\u3044\u30c6\u30b9\u30c8\u306a\u3069\u3092\u6d88\u3057\u3066\u3001tests\u306e\u914d\u4e0b\u3067\u300ccodecept run\u300d\u3067\u5b9f\u884c\u3002\n\u203b\u4f55\u6545\u304b\u4f7f\u308f\u306a\u3044\uff08\u3068\u3044\u3046\u304b\u6d88\u3048\u305f\u306f\u305a\uff09\u30e1\u30bd\u30c3\u30c9\u300cgetCookieValidationKey\u300d\u3068\u3044\u3046\u306e\u304c\u751f\u304d\u3066\u3044\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u624b\u52d5\u3067\u76f4\u3057\u305f\nvendor/codeception/codeception/src/Codeception/Util/Connector/Yii2.php\n98\u884c\u76ee\u304f\u3089\u3044\n\nYii2.php\n //$validationKey = $request->getCookieValidationKey(); // \u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n $validationKey = $request->cookieValidationKey; // \u8ffd\u52a0\n\n\n\u5f8c\u3067\u81ea\u5206\u3067\u518d\u5ea6\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306e\u81ea\u5206\u7528\u30e1\u30e2\u3002\n\uff08\u9593\u9055\u3044\u3042\u308b\u304b\u3082\u3060\u3051\u3069\u3001\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6642\u306b\u76f4\u3059\uff09\n\n# \u74b0\u5883\nConoHa\u306eVPS(\u30e1\u30e2\u30ea:1GB\u3001CPU:2\u30b3\u30a2\u3001SSD:50GB\uff09\nCentOS7\u3067\u74b0\u5883\u3092\u4f5c\u6210\u3002\n\n#php7\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum update\u3057\u305f\u3042\u3068\u3001\u8af8\u3005\u304c\u3055\u3063\u3068\u5165\u308c\u308b\n\n```\n$yum -y groupinstall base network-tools development httpd-devel \n$yum install httpd openssl autoconf libxml2-devel openssl-devel freetype-devel libcurl-devel net-snmp-devel libpng-devel libjpeg-turbo-devel openldap-devel libmcrypt-devel readline-devel gd-devel\n bzip2-devel libicu-devel libwebp-devel gmp-devel libtidy-devel libxslt-devel\n$rpm -ivh http://dev.mysql.com/get/mysql57-community-release-el7-7.noarch.rpm\n$yum -y install mysql-community-devel mysql-community-server\n$cd /usr/local/src\n$wget -O php-7.0.2.tar.gz http://jp2.php.net/get/php-7.0.2.tar.gz/from/this/mirror\n$tar -xzvf php-7.0.2.tar.gz\n$./buildconf --force\n$./configure --with-libdir=lib64 --with-pic --with-bz2 --with-freetype-dir --with-png-dir --with-xpm-dir --enable-gd-native-ttf --with-gettext --with-gmp --with-iconv --with-jpeg-dir --with-curl --with-webp-dir --with-png-dir --with-openssl --with-pcre-regex --with-zlib --with-layout=GNU --enable-exif --enable-ftp --enable-sockets --with-kerberos --enable-shmop --enable-calendar --with-libxml-dir --with-mhash --with-ldap --with-readline --with-snmp --with-tidy --with-xsl --with-gnu-ld --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-mysql-sock=/var/lib/mysql/mysql.sock --enable-mbstring --with-mcrypt --with-gd --with-apxs2=/usr/bin/apxs --enable-pcntl --enable-zip\n```\n\n# composer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$curl -sS https://getcomposer.org/installer | php\n$mv composer.phar /usr/local/bin/composer\n```\n\n# yii2 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$cd /var/www/\n$composer global require \"fxp/composer-asset-plugin:~1.1.1\"\n$composer create-project --prefer-dist yiisoft/yii2-app-basic yii2\n```\n\n# composer\u3067\u74b0\u5883\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nrequire-dev\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u3057\u3066\u3001composer install\u3002\n\n```filename:composer.json\n    \"require-dev\": {\n        \"yiisoft/yii2-codeception\": \"*\",\n        \"yiisoft/yii2-debug\": \"*\",\n        \"yiisoft/yii2-gii\": \"*\",\n        \"yiisoft/yii2-faker\": \"*\",\n        \"phpunit/phpunit\": \"3.7.*\",\n        \"phpunit/phpunit-selenium\": \"*\",\n        \"phpunit/phpunit-story\": \"*\",\n        \"phpunit/dbunit\": \"*\",\n        \"phpunit/php-invoker\": \"*\",\n        \"codeception/codeception\": \"*\",\n        \"guzzle/guzzle\": \"*\"\n    },\n```\n\n# codeception \u306bpath\u3092\u5207\u308b\n\u4ee5\u4e0b\u3092\u8ffd\u52a0\n\n```filename:.bashrc\nPATH=\"$PATH\":/var/www/yii2/vendor/codeception/codeception/\n```\n# firefox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$wget -O firefox-44.0.tar.bz2 \"https://download.mozilla.org/?product=firefox-44.0-SSL&os=linux64&lang=ja\"\n$tar jxf firefox-44.0.tar.bz2\n$ln -s /usr/local/src/firefox/firefox /usr/bin/firefox\n```\n\n# Xvfb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n`$yum install xorg-x11-server-Xvfb`\n\n# selenium-server\u306e\u6e96\u5099\n```\n$yum install java-1.8.0-openjdk-devel.x86_64\n$wget -O selenium-server-standalone-2.50.1.jar http://goo.gl/76CpPA\n```\n\n# codecept\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u751f\u6210\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u30c6\u30b9\u30c8\u4f5c\u6210\u3002\u7701\u7565\u51fa\u6765\u308b\u3057\u3001\u624b\u3067\u66f8\u3044\u3066\u3082\u826f\u3044\u3002\ncodecept generate:cept \u30c6\u30b9\u30c8\u7a2e\u5225 \u30c6\u30b9\u30c8\u540d -c \u4f5c\u6210\u5148\u30d1\u30b9\n\u4f8b\n`$codecept generate:cept acceptance Login`\n\n# CUI\u3067selenium\u3092\u4f7f\u3063\u305f\u30d6\u30e9\u30a6\u30b6\u30c6\u30b9\u30c8\u306e\u6e96\u5099\nshell\u3068\u304b\u3067\u307e\u3068\u3081\u3066\u304a\u3044\u305f\u65b9\u304c\u697d\u304b\u3082\u3002\n```\n$export DISPLAY=\"localhost:1.0\"\n$Xvfb :1 -screen 0 1440x900x16 &\n$java -jar /path/to/selenium-server/selenium-server-standalone-2.50.1.jar &\n```\n\n\u5f8c\u306fyii2/tests/\u306e\u914d\u4e0b\u306b\u3042\u308b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7f6e\u304b\u308c\u305f\u3044\u3089\u306a\u3044\u30c6\u30b9\u30c8\u306a\u3069\u3092\u6d88\u3057\u3066\u3001tests\u306e\u914d\u4e0b\u3067\u300ccodecept run\u300d\u3067\u5b9f\u884c\u3002\n\n\u203b\u4f55\u6545\u304b\u4f7f\u308f\u306a\u3044\uff08\u3068\u3044\u3046\u304b\u6d88\u3048\u305f\u306f\u305a\uff09\u30e1\u30bd\u30c3\u30c9\u300cgetCookieValidationKey\u300d\u3068\u3044\u3046\u306e\u304c\u751f\u304d\u3066\u3044\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u624b\u52d5\u3067\u76f4\u3057\u305f\nvendor/codeception/codeception/src/Codeception/Util/Connector/Yii2.php\n98\u884c\u76ee\u304f\u3089\u3044\n\n```filename:Yii2.php\n //$validationKey = $request->getCookieValidationKey(); // \u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n $validationKey = $request->cookieValidationKey; // \u8ffd\u52a0\n```\n", "tags": ["PHP", "yii2", "codeception"]}