{"context": " More than 1 year has passed since last update.\nisMatch_YYYYMMDD\n\u65e5\u4ed8\u304c\u897f\u66a64\u6841\u3001\u67082\u6841\u3001\u65e52\u6841\u306e\u5f62\u5f0f\u304b\u3064\u6709\u52b9\u306a\u65e5\u4ed8\u304b\u3069\u3046\u304b\nisMatch_HHMMSS\n\u6642\u523b\u304c\u66422\u6841\u3001\u52062\u6841\u3001\u79d22\u6841\u306e\u5f62\u5f0f\u304b\u3064\u6709\u52b9\u306a\u6642\u523b\u304b\u3069\u3046\u304b\nisMatchDateTime\n\u4e0a2\u3064\u3092\u78ba\u8a8d\u3059\u308b\u3002\u65e5\u4ed8\u3068\u6642\u523b\u306f\u534a\u89d2\u7a7a\u767d\u533a\u5207\u308a\n\n\npreg_match\u3092\u4f7f\u7528\u3057\u3066\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\n$_exclusive_date_list\u5909\u6570\u3067\u6307\u5b9a\u3057\u305f\u5f62\u5f0f\u306e\u65e5\u4ed8\u306f\u6709\u52b9\u306a\u65e5\u4ed8\u3068\u3059\u308b\n\n/**\n * \u65e5\u4ed8\u30c1\u30a7\u30c3\u30af\u3092\u9664\u5916\u3059\u308b\u65e5\u4ed8\u306e\u30ea\u30b9\u30c8\n * @var array\n */\n$_exclusive_date_list = array('00000000');\n\n/**\n * \u65e5\u4ed8\u304c\u897f\u66a64\u6841\u3001\u67082\u6841\u3001\u65e52\u6841\u306e\u5f62\u5f0f\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  string  $delim        \u65e5\u4ed8\u533a\u5207\u308a\u6587\u5b57\u3002/\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3059\u308b\u3068\u304d\u306f'\\/'\u3068\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u3092\u5165\u308c\u308b\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @return boolean               \u6709\u52b9\u306a\u65e5\u4ed8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b TRUE:\u6709\u52b9 FALSE:\u6709\u52b9\u3067\u306a\u3044\n */\nfunction isMatch_YYYYMMDD($text, $delim = '-', $errorIfEmpty = TRUE) {\n    global $_exclusive_date_list;\n\n    #\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n    if($text == ''){\n        return !$errorIfEmpty;\n    }\n\n    #\u5e74 0000-9999 \u6708 00-99 \u65e5 00-99\n    $pattern = '/^([0-9]{4})' . $delim . '([0-9]{2})' . $delim . '([0-9]{2})$/';\n    $matches = array();\n    $match = isMatch($pattern, $text, $errorIfEmpty, $matches);\n    if(!$match) {\n        return FALSE;\n    }\n\n    #\u65e5\u4ed8\u30c1\u30a7\u30c3\u30af\u3092\u9664\u5916\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\n    if(in_array($matches[1] . $matches[2] . $matches[3], $_exclusive_date_list)) {\n        return TRUE;\n    }\n\n    #\u3000\u65e5\u4ed8\u5b58\u5728\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\n    if(!checkdate((int)$matches[2], (int)$matches[3], (int)$matches[1])) {\n        return FALSE;\n    }\n\n    return TRUE;\n}\n\n/**\n * \u6642\u523b\u304c\u66422\u6841\u3001\u52062\u6841\u3001\u79d22\u6841\u306e\u5f62\u5f0f\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  string  $decimal      \u79d2\u672a\u6e80\u306e\u6841\u6570\n * @param  string  $delim        \u6642\u523b\u533a\u5207\u308a\u6587\u5b57\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @return boolean               \u6709\u52b9\u306a\u6642\u523b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b TRUE:\u6709\u52b9 FALSE:\u6709\u52b9\u3067\u306a\u3044\n */\nfunction isMatch_HHMMSS($text, $decimal = 0, $delim = ':', $errorIfEmpty = TRUE) {\n    #\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n    if($text == ''){\n        return !$errorIfEmpty;\n    }\n\n    //\u3046\u308b\u3046\u79d2\u306fMySQL\u3067\u306f\u767b\u9332\u3067\u304d\u306a\u3044\u305f\u3081\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30a8\u30e9\u30fc\u3068\u3059\u308b\u3002\n    //\u5bfe\u5fdc\u3059\u308b\u5834\u5408\u306f\u4e0b\u306e\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u7528\u3059\u308b\n    //#\u6642 00-23 \u5206 00-59 \u79d2 00-60\n    //$pattern = '/^(0[0-9]{1}|1{1}[0-9]{1}|2{1}[0-3]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1}|60)';\n    #\u6642 00-23 \u5206 00-59 \u79d2 00-59\n    $pattern = '/^(0[0-9]{1}|1{1}[0-9]{1}|2{1}[0-3]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1})';\n\n    # \u5c0f\u6570\u90e8\u304c\u3042\u308c\u3070\u30d1\u30bf\u30fc\u30f3\u306b\u8ffd\u52a0\n    if($decimal > 0) {\n        $pattern = $pattern . sprintf('\\.([0-9]{%d})', $decimal);\n    }\n    $pattern = $pattern . '$/';\n\n    return isMatch($pattern, $text, $errorIfEmpty);\n}\n\n/**\n * \u65e5\u6642\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n * \u65e5\u4ed8\u3068\u6642\u523b\u306e\u9593\u306f\u534a\u89d2\u7a7a\u767d\u3067\u533a\u5207\u3089\u308c\u3066\u3044\u308b\u3053\u3068\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  string  $decimal      \u79d2\u672a\u6e80\u306e\u6841\u6570\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @param  string  $date_delim   \u65e5\u4ed8\u533a\u5207\u308a\u6587\u5b57\u3002/\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3059\u308b\u3068\u304d\u306f'\\/'\u3068\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u3092\u5165\u308c\u308b\n * @param  string  $time_delim   \u6642\u523b\u533a\u5207\u308a\u6587\u5b57\n * @return boolean               \u6709\u52b9\u306a\u65e5\u6642\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b TRUE:\u6709\u52b9 FALSE:\u6709\u52b9\u3067\u306a\u3044\n */\nfunction isMatchDateTime($text, $decimal = 0, $errorIfEmpty = TRUE, $date_delim = '-', $time_delim = ':') {\n    #\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n    if($text == ''){\n        return !$errorIfEmpty;\n    }\n\n    # \u65e5\u4ed8\u3068\u6642\u523b\u306b\u5206\u89e3\n    $datetime = explode(' ', $text);\n    if(count($datetime) < 2) {\n        return FALSE;\n    }\n\n    # \u65e5\u4ed8\n    if(!isMatch_YYYYMMDD($datetime[0], $date_delim)) {\n        return FALSE;\n    }\n\n    # \u6642\u523b\n    if(!isMatch_HHMMSS($datetime[1], $decimal, $time_delim)) {\n        return FALSE;\n    }\n\n    return TRUE;\n}\n\n/**\n * \u6b63\u898f\u8868\u73fe\u30d1\u30bf\u30fc\u30f3\u691c\u7d22\n * @param  string  $pattern      \u6b63\u898f\u8868\u73fe\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @return boolean               \u6b63\u898f\u8868\u73fe\u306b\u5408\u81f4\u3059\u308b\u304b TRUE:\u5408\u81f4\u3059\u308b FALSE:\u5408\u81f4\u3057\u306a\u3044\n */\nfunction isMatch($pattern, $text, $errorIfEmpty = TRUE, &$matches = array()) {\n    #\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n    if($text == ''){\n        return !$errorIfEmpty;\n    }\n\n    if(!preg_match($pattern, $text, $matches)) {\n        return FALSE;\n    } else {\n        return TRUE;\n    }\n}\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\uff08\u5168\u5206\u5c90\u7db2\u7f85\u3057\u3066\u3044\u306a\u3044\uff09\nfunction testisMatch_YYYYMMDD($date, $exists = TRUE, $delim = '\\/'){\n    if(isMatch_YYYYMMDD($date, $delim, $exists))\n        {echo '<font color=\"blue\">'.$date.' \u6b63\u3057\u3044\u65e5\u4ed8</font><br/>';}\n    else\n        {echo '<font color=\"red\">'.$date.' \u4e0d\u6b63\u306a\u65e5\u4ed8</font><br/>';}\n}\n\nfunction testisMatch_HHMMSS($time, $decimal = 0, $delim = ':'){\n    if(isMatch_HHMMSS($time, $decimal, $delim))\n        {echo '<font color=\"blue\">'.$time.' \u6b63\u3057\u3044\u6642\u523b</font><br/>';}\n    else\n        {echo '<font color=\"red\">'.$time.' \u4e0d\u6b63\u306a\u6642\u523b</font><br/>';}\n}\n\necho '<h4>\u5e74\u304c\u4e0d\u6b63</h4>';\ntestisMatch_YYYYMMDD('/01/01'); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('200/01/01'); #\u6841\u4e0d\u8db3\n\necho '<h4>\u6708\u304c\u4e0d\u6b63</h4>';\ntestisMatch_YYYYMMDD('2012//01'); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('2012/1/01'); #\u6841\u4e0d\u8db3\ntestisMatch_YYYYMMDD('2012/00/01'); #\u7121\u52b9\u306a\u6708\ntestisMatch_YYYYMMDD('2012/13/01'); #\u7121\u52b9\u306a\u6708\n\necho '<h4>\u65e5\u304c\u4e0d\u6b63</h4>';\ntestisMatch_YYYYMMDD('2012/01/'); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('2012/01/1'); #\u6841\u4e0d\u8db3\ntestisMatch_YYYYMMDD('2012/01/00'); #\u7121\u52b9\u306a\u65e5\ntestisMatch_YYYYMMDD('2012/01/32'); #\u7121\u52b9\u306a\u65e5\ntestisMatch_YYYYMMDD('2014/02/29'); #\u7121\u52b9\u306a\u65e5\n\necho '<h4>0000/00/00\u306fOK</h4>';\ntestisMatch_YYYYMMDD('0000/00/00');\n\necho '<h4>1000\u65e5\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 1000; $i++){\n    $date = date('Y/m/d',mktime(0,0,0,date('n'),date('j')+$i,date('Y')-1));\n    testisMatch_YYYYMMDD($date);\n}\n\necho '<h4>\u5e74\u304c\u4e0d\u6b63\uff08\u533a\u5207\u308a\u306a\u3057\uff09</h4>';\ntestisMatch_YYYYMMDD('0101', TRUE, ''); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('1000101', TRUE, ''); #\u6841\u4e0d\u8db3\n\necho '<h4>\u5168\u90e8\u30bc\u30ed\u306fOK</h4>';\ntestisMatch_YYYYMMDD('00000000', TRUE, '');\necho '<h4>\u3046\u308b\u3046\u5e74\u306fOK</h4>';\ntestisMatch_YYYYMMDD('20120229', TRUE, ''); #2/29\n\necho '<h4>1000\u65e5\u30c1\u30a7\u30c3\u30af\uff08\u533a\u5207\u308a\u306a\u3057\uff09</h4>';\nfor($i = 0; $i <= 1000; $i++){\n    $date = date('Ymd',mktime(0,0,0,date('n'),date('j')+$i,date('Y')-1));\n    testisMatch_YYYYMMDD($date, TRUE, '');\n}\n\necho '<h4>\u6642\u304c\u4e0d\u6b63</h4>';\ntestisMatch_HHMMSS(':59:59'); #\u5024\u306a\u3057\ntestisMatch_HHMMSS('0:59:59'); #\u6841\u4e0d\u8db3\ntestisMatch_HHMMSS('24:59:59'); #\u7121\u52b9\u306a\u6642\n\n\necho '<h4>\u79d2\u304c\u4e0d\u6b63</h4>';\ntestisMatch_HHMMSS('00:00:'); #\u5024\u306a\u3057\ntestisMatch_HHMMSS('00:00:0'); #\u6841\u4e0d\u8db3\ntestisMatch_HHMMSS('00:00:60'); #\u3046\u308b\u3046\u79d2\u306fNG\n\necho '<h4>\u30df\u30ea\u79d2\u304c\u4e0d\u6b63</h4>';\ntestisMatch_HHMMSS('00:00:00.'); #\u5024\u306a\u3057\ntestisMatch_HHMMSS('00:00:00.01'); #\u6841\u4e0d\u8db3\n\necho '<h4>30\u6642\u9593\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 30; $i++){\n    $time = date('H:i:s',mktime(0+$i,0,0,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($time);\n}\necho '<h4>100\u5206\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 100; $i++){\n    $time = date('H:i:s',mktime(0,0+$i,0,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($time);\n}\necho '<h4>100\u79d2\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 100; $i++){\n    $time = date('H:i:s',mktime(0,0,0+$i,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($time);\n}\n\necho '<h4>100\u30df\u30ea\u79d2\u30c1\u30a7\u30c3\u30af</h4>';\n$millitime = date('H:i:s',mktime(0,0,0,date('n'),date('j'),date('Y')));\nfor($i = 0; $i <= 100; $i++){\n    $time = date('H:i:s',mktime(0,0,0+$i,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($millitime . '.' . sprintf('%03d', $i),3);\n}\n\n\n\npreg_match()\u6b63\u898f\u8868\u73fe\u30c1\u30a7\u30c3\u30ab\u30fc ver2.0\n\u6b63\u898f\u8868\u73fe \u6642\u523b \u306e\u66f8\u5f0f\u306e\u5224\u5225 \u300cpreg_match()\u300d\n\n<dl>\n<dt>isMatch_YYYYMMDD</dt>\n<dd>\u65e5\u4ed8\u304c\u897f\u66a64\u6841\u3001\u67082\u6841\u3001\u65e52\u6841\u306e\u5f62\u5f0f\u304b\u3064\u6709\u52b9\u306a\u65e5\u4ed8\u304b\u3069\u3046\u304b</dd>\n<dt>isMatch_HHMMSS</dt>\n<dd>\u6642\u523b\u304c\u66422\u6841\u3001\u52062\u6841\u3001\u79d22\u6841\u306e\u5f62\u5f0f\u304b\u3064\u6709\u52b9\u306a\u6642\u523b\u304b\u3069\u3046\u304b</dd>\n<dt>isMatchDateTime</dt>\n<dd>\u4e0a2\u3064\u3092\u78ba\u8a8d\u3059\u308b\u3002\u65e5\u4ed8\u3068\u6642\u523b\u306f\u534a\u89d2\u7a7a\u767d\u533a\u5207\u308a</dd>\n</dl>\n\n* preg_match\u3092\u4f7f\u7528\u3057\u3066\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\n* $_exclusive_date_list\u5909\u6570\u3067\u6307\u5b9a\u3057\u305f\u5f62\u5f0f\u306e\u65e5\u4ed8\u306f\u6709\u52b9\u306a\u65e5\u4ed8\u3068\u3059\u308b\n\n```php\n/**\n * \u65e5\u4ed8\u30c1\u30a7\u30c3\u30af\u3092\u9664\u5916\u3059\u308b\u65e5\u4ed8\u306e\u30ea\u30b9\u30c8\n * @var array\n */\n$_exclusive_date_list = array('00000000');\n\n/**\n * \u65e5\u4ed8\u304c\u897f\u66a64\u6841\u3001\u67082\u6841\u3001\u65e52\u6841\u306e\u5f62\u5f0f\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  string  $delim        \u65e5\u4ed8\u533a\u5207\u308a\u6587\u5b57\u3002/\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3059\u308b\u3068\u304d\u306f'\\/'\u3068\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u3092\u5165\u308c\u308b\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @return boolean               \u6709\u52b9\u306a\u65e5\u4ed8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b TRUE:\u6709\u52b9 FALSE:\u6709\u52b9\u3067\u306a\u3044\n */\nfunction isMatch_YYYYMMDD($text, $delim = '-', $errorIfEmpty = TRUE) {\n\tglobal $_exclusive_date_list;\n\t\n\t#\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n\tif($text == ''){\n\t\treturn !$errorIfEmpty;\n\t}\n\n\t#\u5e74 0000-9999 \u6708 00-99 \u65e5 00-99\n\t$pattern = '/^([0-9]{4})' . $delim . '([0-9]{2})' . $delim . '([0-9]{2})$/';\n\t$matches = array();\n\t$match = isMatch($pattern, $text, $errorIfEmpty, $matches);\n\tif(!$match) {\n\t\treturn FALSE;\n\t}\n\t\n\t#\u65e5\u4ed8\u30c1\u30a7\u30c3\u30af\u3092\u9664\u5916\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\n\tif(in_array($matches[1] . $matches[2] . $matches[3], $_exclusive_date_list)) {\n\t\treturn TRUE;\n\t}\n\n\t#\u3000\u65e5\u4ed8\u5b58\u5728\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\n\tif(!checkdate((int)$matches[2], (int)$matches[3], (int)$matches[1])) {\n\t\treturn FALSE;\n\t}\n\n\treturn TRUE;\n}\n\n/**\n * \u6642\u523b\u304c\u66422\u6841\u3001\u52062\u6841\u3001\u79d22\u6841\u306e\u5f62\u5f0f\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  string  $decimal      \u79d2\u672a\u6e80\u306e\u6841\u6570\n * @param  string  $delim        \u6642\u523b\u533a\u5207\u308a\u6587\u5b57\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @return boolean               \u6709\u52b9\u306a\u6642\u523b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b TRUE:\u6709\u52b9 FALSE:\u6709\u52b9\u3067\u306a\u3044\n */\nfunction isMatch_HHMMSS($text, $decimal = 0, $delim = ':', $errorIfEmpty = TRUE) {\n\t#\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n\tif($text == ''){\n\t\treturn !$errorIfEmpty;\n\t}\n\n\t//\u3046\u308b\u3046\u79d2\u306fMySQL\u3067\u306f\u767b\u9332\u3067\u304d\u306a\u3044\u305f\u3081\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30a8\u30e9\u30fc\u3068\u3059\u308b\u3002\n\t//\u5bfe\u5fdc\u3059\u308b\u5834\u5408\u306f\u4e0b\u306e\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u7528\u3059\u308b\n\t//#\u6642 00-23 \u5206 00-59 \u79d2 00-60\n\t//$pattern = '/^(0[0-9]{1}|1{1}[0-9]{1}|2{1}[0-3]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1}|60)';\n\t#\u6642 00-23 \u5206 00-59 \u79d2 00-59\n\t$pattern = '/^(0[0-9]{1}|1{1}[0-9]{1}|2{1}[0-3]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1})' . $delim . '(0[0-9]{1}|[1-5]{1}[0-9]{1})';\n\n\t# \u5c0f\u6570\u90e8\u304c\u3042\u308c\u3070\u30d1\u30bf\u30fc\u30f3\u306b\u8ffd\u52a0\n\tif($decimal > 0) {\n\t\t$pattern = $pattern . sprintf('\\.([0-9]{%d})', $decimal);\n\t}\n\t$pattern = $pattern . '$/';\n\n\treturn isMatch($pattern, $text, $errorIfEmpty);\n}\n\n/**\n * \u65e5\u6642\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n * \u65e5\u4ed8\u3068\u6642\u523b\u306e\u9593\u306f\u534a\u89d2\u7a7a\u767d\u3067\u533a\u5207\u3089\u308c\u3066\u3044\u308b\u3053\u3068\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  string  $decimal      \u79d2\u672a\u6e80\u306e\u6841\u6570\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @param  string  $date_delim   \u65e5\u4ed8\u533a\u5207\u308a\u6587\u5b57\u3002/\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3059\u308b\u3068\u304d\u306f'\\/'\u3068\u30a8\u30b9\u30b1\u30fc\u30d7\u6587\u5b57\u3092\u5165\u308c\u308b\n * @param  string  $time_delim   \u6642\u523b\u533a\u5207\u308a\u6587\u5b57\n * @return boolean               \u6709\u52b9\u306a\u65e5\u6642\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304b\u3069\u3046\u304b TRUE:\u6709\u52b9 FALSE:\u6709\u52b9\u3067\u306a\u3044\n */\nfunction isMatchDateTime($text, $decimal = 0, $errorIfEmpty = TRUE, $date_delim = '-', $time_delim = ':') {\n\t#\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n\tif($text == ''){\n\t\treturn !$errorIfEmpty;\n\t}\n\n\t# \u65e5\u4ed8\u3068\u6642\u523b\u306b\u5206\u89e3\n\t$datetime = explode(' ', $text);\n\tif(count($datetime) < 2) {\n\t\treturn FALSE;\n\t}\n\n\t# \u65e5\u4ed8\n\tif(!isMatch_YYYYMMDD($datetime[0], $date_delim)) {\n\t\treturn FALSE;\n\t}\n\n\t# \u6642\u523b\n\tif(!isMatch_HHMMSS($datetime[1], $decimal, $time_delim)) {\n\t\treturn FALSE;\n\t}\n\n\treturn TRUE;\n}\n\n/**\n * \u6b63\u898f\u8868\u73fe\u30d1\u30bf\u30fc\u30f3\u691c\u7d22\n * @param  string  $pattern      \u6b63\u898f\u8868\u73fe\n * @param  string  $text         \u78ba\u8a8d\u3059\u308b\u6587\u5b57\u5217\n * @param  boolean $errorIfEmpty \u7a7a\u6587\u5b57\u5217\u3092\u30a8\u30e9\u30fc\u3068\u3059\u308b\u3059\u308b\u304b TRUE:\u3059\u308b FALSE:\u3057\u306a\u3044\n * @return boolean               \u6b63\u898f\u8868\u73fe\u306b\u5408\u81f4\u3059\u308b\u304b TRUE:\u5408\u81f4\u3059\u308b FALSE:\u5408\u81f4\u3057\u306a\u3044\n */\nfunction isMatch($pattern, $text, $errorIfEmpty = TRUE, &$matches = array()) {\n\t#\u7a7a\u6587\u5b57\u30c1\u30a7\u30c3\u30af\n\tif($text == ''){\n\t\treturn !$errorIfEmpty;\n\t}\n\n\tif(!preg_match($pattern, $text, $matches)) {\n\t\treturn FALSE;\n\t} else {\n\t\treturn TRUE;\n\t}\n}\n```\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\uff08\u5168\u5206\u5c90\u7db2\u7f85\u3057\u3066\u3044\u306a\u3044\uff09\n\n```php\nfunction testisMatch_YYYYMMDD($date, $exists = TRUE, $delim = '\\/'){\n    if(isMatch_YYYYMMDD($date, $delim, $exists))\n        {echo '<font color=\"blue\">'.$date.' \u6b63\u3057\u3044\u65e5\u4ed8</font><br/>';}\n    else\n        {echo '<font color=\"red\">'.$date.' \u4e0d\u6b63\u306a\u65e5\u4ed8</font><br/>';}\n}\n\nfunction testisMatch_HHMMSS($time, $decimal = 0, $delim = ':'){\n    if(isMatch_HHMMSS($time, $decimal, $delim))\n        {echo '<font color=\"blue\">'.$time.' \u6b63\u3057\u3044\u6642\u523b</font><br/>';}\n    else\n        {echo '<font color=\"red\">'.$time.' \u4e0d\u6b63\u306a\u6642\u523b</font><br/>';}\n}\n\necho '<h4>\u5e74\u304c\u4e0d\u6b63</h4>';\ntestisMatch_YYYYMMDD('/01/01'); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('200/01/01'); #\u6841\u4e0d\u8db3\n\necho '<h4>\u6708\u304c\u4e0d\u6b63</h4>';\ntestisMatch_YYYYMMDD('2012//01'); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('2012/1/01'); #\u6841\u4e0d\u8db3\ntestisMatch_YYYYMMDD('2012/00/01'); #\u7121\u52b9\u306a\u6708\ntestisMatch_YYYYMMDD('2012/13/01'); #\u7121\u52b9\u306a\u6708\n\necho '<h4>\u65e5\u304c\u4e0d\u6b63</h4>';\ntestisMatch_YYYYMMDD('2012/01/'); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('2012/01/1'); #\u6841\u4e0d\u8db3\ntestisMatch_YYYYMMDD('2012/01/00'); #\u7121\u52b9\u306a\u65e5\ntestisMatch_YYYYMMDD('2012/01/32'); #\u7121\u52b9\u306a\u65e5\ntestisMatch_YYYYMMDD('2014/02/29'); #\u7121\u52b9\u306a\u65e5\n\necho '<h4>0000/00/00\u306fOK</h4>';\ntestisMatch_YYYYMMDD('0000/00/00');\n \necho '<h4>1000\u65e5\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 1000; $i++){\n    $date = date('Y/m/d',mktime(0,0,0,date('n'),date('j')+$i,date('Y')-1));\n    testisMatch_YYYYMMDD($date);\n}\n\necho '<h4>\u5e74\u304c\u4e0d\u6b63\uff08\u533a\u5207\u308a\u306a\u3057\uff09</h4>';\ntestisMatch_YYYYMMDD('0101', TRUE, ''); #\u5024\u306a\u3057\ntestisMatch_YYYYMMDD('1000101', TRUE, ''); #\u6841\u4e0d\u8db3\n\necho '<h4>\u5168\u90e8\u30bc\u30ed\u306fOK</h4>';\ntestisMatch_YYYYMMDD('00000000', TRUE, '');\necho '<h4>\u3046\u308b\u3046\u5e74\u306fOK</h4>';\ntestisMatch_YYYYMMDD('20120229', TRUE, ''); #2/29\n\necho '<h4>1000\u65e5\u30c1\u30a7\u30c3\u30af\uff08\u533a\u5207\u308a\u306a\u3057\uff09</h4>';\nfor($i = 0; $i <= 1000; $i++){\n    $date = date('Ymd',mktime(0,0,0,date('n'),date('j')+$i,date('Y')-1));\n    testisMatch_YYYYMMDD($date, TRUE, '');\n}\n\necho '<h4>\u6642\u304c\u4e0d\u6b63</h4>';\ntestisMatch_HHMMSS(':59:59'); #\u5024\u306a\u3057\ntestisMatch_HHMMSS('0:59:59'); #\u6841\u4e0d\u8db3\ntestisMatch_HHMMSS('24:59:59'); #\u7121\u52b9\u306a\u6642\n\n\necho '<h4>\u79d2\u304c\u4e0d\u6b63</h4>';\ntestisMatch_HHMMSS('00:00:'); #\u5024\u306a\u3057\ntestisMatch_HHMMSS('00:00:0'); #\u6841\u4e0d\u8db3\ntestisMatch_HHMMSS('00:00:60'); #\u3046\u308b\u3046\u79d2\u306fNG\n\necho '<h4>\u30df\u30ea\u79d2\u304c\u4e0d\u6b63</h4>';\ntestisMatch_HHMMSS('00:00:00.'); #\u5024\u306a\u3057\ntestisMatch_HHMMSS('00:00:00.01'); #\u6841\u4e0d\u8db3\n\necho '<h4>30\u6642\u9593\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 30; $i++){\n    $time = date('H:i:s',mktime(0+$i,0,0,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($time);\n}\necho '<h4>100\u5206\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 100; $i++){\n    $time = date('H:i:s',mktime(0,0+$i,0,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($time);\n}\necho '<h4>100\u79d2\u30c1\u30a7\u30c3\u30af</h4>';\nfor($i = 0; $i <= 100; $i++){\n    $time = date('H:i:s',mktime(0,0,0+$i,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($time);\n}\n\necho '<h4>100\u30df\u30ea\u79d2\u30c1\u30a7\u30c3\u30af</h4>';\n$millitime = date('H:i:s',mktime(0,0,0,date('n'),date('j'),date('Y')));\nfor($i = 0; $i <= 100; $i++){\n    $time = date('H:i:s',mktime(0,0,0+$i,date('n'),date('j'),date('Y')));\n    testisMatch_HHMMSS($millitime . '.' . sprintf('%03d', $i),3);\n}\n\n```\n\n> [preg_match()\u6b63\u898f\u8868\u73fe\u30c1\u30a7\u30c3\u30ab\u30fc ver2.0](http://okumocchi.jp/php/re.php)\n\n> [\u6b63\u898f\u8868\u73fe \u6642\u523b \u306e\u66f8\u5f0f\u306e\u5224\u5225 \u300cpreg_match()\u300d](http://www.tryphp.net/2012/03/14/phpsample-preg-time/)\n", "tags": ["PHP", "CSV"]}