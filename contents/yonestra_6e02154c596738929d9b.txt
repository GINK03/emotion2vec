{"context": " More than 1 year has passed since last update.Titanium mobile\u3067Weightbot\u306e\u3088\u3046\u306a\u6a2a\u30b9\u30af\u30ed\u30fc\u30eb\u76ee\u76db\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\u4e3b\u306a\u6a5f\u80fd\n 1. \u30b9\u30af\u30ed\u30fc\u30eb\u30e9\u30d9\u30eb\u306e\u533a\u5207\u308a\u3067\u53c2\u7167\u3059\u308b\u30c7\u30fc\u30bf\u3092\u5207\u308a\u66ff\u3048\u308b\n 2. \u76ee\u76db\u306e\u77e2\u5370\u304c\u30b9\u30af\u30ed\u30fc\u30eb\u30e9\u30d9\u30eb\u306e\u4e01\u5ea6\u771f\u3093\u4e2d\u306b\u6765\u308b\u3088\u3046\u306b\u3059\u308b\n\uff12\u756a\u76ee\u306e\u6a5f\u80fd\u3092\u5b9f\u73fe\u3059\u308b\u30ed\u30b8\u30c3\u30af\n \u30fb \u8cab\u6027\u3067\u30b9\u30af\u30ed\u30fc\u30eb\u4e2d\u306b\u901f\u5ea6\u304c\u843d\u3061\u305f\u3089\u3061\u3087\u3046\u3069\u771f\u3093\u4e2d\u306b\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\n \u30fb \u6307\u3092\u96e2\u3057\u3066\u5c11\u3057\u7d4c\u3063\u3066\u3082\u52d5\u3044\u3066\u3044\u306a\u304b\u3063\u305f\u3089\u3061\u3087\u3046\u3069\u771f\u3093\u4e2d\u306b\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\nTitanium mobile SDK 1.8\u304b\u3089\"dragEnd\"\u30a4\u30d9\u30f3\u30c8\u304c\u62fe\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u3084\u3063\u3068\u5b9f\u73fe\u3067\u304d\u307e\u3057\u305f\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u611f\u899a\u3067\u9069\u5f53\u306b\u6c7a\u3081\u307e\u3057\u305f\u3002\n\u3054\u610f\u898b\u3001\u30a2\u30c9\u30d0\u30a4\u30b9\u3044\u305f\u3060\u3051\u305f\u3089\u5b09\u3057\u3044\u3067\u3059\u3002\n\u5168\u304f\u540c\u3058\u5185\u5bb9\u3067\u3059\u304c\u5b9f\u884c\u753b\u9762\u306f\u3053\u3061\u3089\u3067\u898b\u308c\u307e\u3059\u3002\n\nscrollCursor.js\nvar win = Ti.UI.currentWindow;\n\n// \u4eee\u30c7\u30fc\u30bf\nvar dataList = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];\n\n// \u53c2\u7167\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3059\u308b\u30e9\u30d9\u30eb\nvar dataLabel = Titanium.UI.createLabel({\n    backgroundColor: 'black',\n    borderRadius: 30,\n    color:'white',\n    font:{\n        fontFamily:'Helvetica Neue',\n        fontSize:100\n    },\n    textAlign:'center',\n    top:50, left:'auto', height: 150, width: 200,\n    text: dataList[0]\n});\nwin.add(dataLabel);\n\n// \u76ee\u76db\u306b\u5408\u308f\u305b\u3066\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u305b\u308b\u3053\u3068\u3067\u53c2\u7167\u30c7\u30fc\u30bf\u3092\u5207\u308a\u66ff\u3048\u308bScrollView\nvar scrollView = Titanium.UI.createScrollView({\n    contentWidth:'auto',\n    contentHeight:'auto',\n    top:290,\n    height:70,\n    width:320,\n    backgroundColor:'#gray',\n    zIndex:1\n});\n\nvar labelNum = dataList.length + 1; // \u5207\u308a\u66ff\u3048\u30e9\u30d9\u30eb\u306e\u6570\nvar labelWidth = 50; // \u5207\u308a\u66ff\u3048\u30e9\u30d9\u30eb\u306e\u6a2a\u5e45\nfor(var i = 0; i < labelNum; i++){\n    if(i < labelNum - 1){\n        // \u30b9\u30af\u30ed\u30fc\u30eb\u30e1\u30e2\u30ea\u306e\u30e9\u30d9\u30eb\n        var scrollLabel = Ti.UI.createLabel({\n            borderColor:'black',\n            backgroundColor:'#A0522D',\n            height:70, width:labelWidth,\n            left: 135 + labelWidth * i,\n            font:{\n                fontFamily:'Helvetica Neue',\n                fontSize:25\n            },\n            textAlign: 'center',\n            text:i\n        });\n        scrollView.add(scrollLabel);\n    } else {\n        // \u9078\u629e\u7bc4\u56f2\u5916\u306f\u7121\u5730\u30b0\u30ec\u30fc\n        var scrollLabel = Ti.UI.createLabel({\n            backgroundColor:'#gray',\n            height:70, width:135,\n            left: 135 + labelWidth * i\n        });\n        scrollView.add(scrollLabel);\n    }\n}\nwin.add(scrollView);\n\n// \u76ee\u76db\nvar allow = Titanium.UI.createLabel({\n    text:\"\u25bc\",\n    font:{fontSize:20},\n    color:'#gray',\n    top:200,\n    left:150,\n    width:20,\n    textAlign:'center',\n    zIndex:3\n});\nwin.add(allow);\n\n\n// ---------------------------\u3053\u3053\u304b\u3089\u30ed\u30b8\u30c3\u30af\u90e8\u5206---------------------------------\n\n// \u5909\u6570\u521d\u671f\u5316\nvar pos_old = 0;\nvar time_old = new Date();\nvar catchDragEnd = false;\nvar throwDistance = 0;\n\n// Titanium mobile SDK 1.8\u304b\u3089dragEnd\u30a4\u30d9\u30f3\u30c8\u304c\u62fe\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\nscrollView.addEventListener('dragEnd', function(){\n    catchDragEnd = true;\n\n    // 0.2\u79d2\u5f8c\u306b\u3042\u307e\u308a\u52d5\u3044\u3066\u3044\u306a\u3051\u308c\u3070\u5207\u308a\u306e\u826f\u3044\u4f4d\u7f6e\u3078\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\n    setTimeout(function(){\n        if(pos_old % labelWidth != 0 && throwDistance < labelWidth / 2){\n            scrollView.scrollTo(Math.round(pos_old / labelWidth) * labelWidth, 0);\n            throwDistance = 0;\n            catchDragEnd = false;\n        }\n    }, 200);\n});\n\nscrollView.addEventListener('scroll', function(e){\n    var pos_new = e.x;\n\n    // \u76ee\u76db\u306e\u8a08\u7b97\n    var index = Math.floor((pos_new + labelWidth / 2) / labelWidth);\n\n    dataLabel.text = dataList[index];\n\n    time_new = new Date();\n    var time_diff = time_new.getTime() - time_old.getTime();\n\n    // \u3042\u307e\u308a\u306b\u3082\u7d30\u304b\u304f\u898b\u3059\u304e\u3066\u3082\u610f\u5473\u304c\u7121\u3044\u306e\u30670.1\u79d2\u9593\u9694\u3067\u30c1\u30a7\u30c3\u30af\n    if( 100 < time_diff ){\n        var pos_diff = Math.abs(pos_new - pos_old);\n\n        // dragEnd\u30a4\u30d9\u30f3\u30c8\u3092\u62fe\u3063\u3066\u304b\u3089\u306e\u30b9\u30af\u30ed\u30fc\u30eb\u8ddd\u96e2\u306e\u5408\u8a08\n        if(catchDragEnd) {\n            throwDistance += pos_diff;\n        }\n\n        // \u30b9\u30af\u30ed\u30fc\u30eb\u901f\u5ea6\u306e\u8a08\u7b97\n        velocity = Math.round(pos_diff / time_diff * 1000);\n\n        // 0.2\u79d2\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u306a\u3044\u5834\u5408\n        // \u304b\u3064\u3001\u901f\u5ea6\u304c\u9045\u304f\u306a\u3063\u305f\u5834\u5408\n        if(time_diff < 200 && velocity < 20){\n\n            // \u4e2d\u9014\u534a\u7aef\u306a\u4f4d\u7f6e\u306e\u5834\u5408\n            if(pos_new % labelWidth != 0){\n                // \u5207\u308a\u306e\u826f\u3044\u4f4d\u7f6e\u3078\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\n                scrollView.scrollTo(Math.round(pos_new / labelWidth) * labelWidth, 0);\n                catchDragEnd = false;\n                throwDistance = 0;\n            }\n        }\n\n        time_old = time_new;\n        pos_old = pos_new;\n    }\n});\n\n\nTitanium mobile\u3067[Weightbot](http://itunes.apple.com/app/weightbot-track-your-weight/id293642937?mt=8)\u306e\u3088\u3046\u306a\u6a2a\u30b9\u30af\u30ed\u30fc\u30eb\u76ee\u76db\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\n\u4e3b\u306a\u6a5f\u80fd\n 1. \u30b9\u30af\u30ed\u30fc\u30eb\u30e9\u30d9\u30eb\u306e\u533a\u5207\u308a\u3067\u53c2\u7167\u3059\u308b\u30c7\u30fc\u30bf\u3092\u5207\u308a\u66ff\u3048\u308b\n 2. \u76ee\u76db\u306e\u77e2\u5370\u304c\u30b9\u30af\u30ed\u30fc\u30eb\u30e9\u30d9\u30eb\u306e\u4e01\u5ea6\u771f\u3093\u4e2d\u306b\u6765\u308b\u3088\u3046\u306b\u3059\u308b\n\n\uff12\u756a\u76ee\u306e\u6a5f\u80fd\u3092\u5b9f\u73fe\u3059\u308b\u30ed\u30b8\u30c3\u30af\n \u30fb \u8cab\u6027\u3067\u30b9\u30af\u30ed\u30fc\u30eb\u4e2d\u306b\u901f\u5ea6\u304c\u843d\u3061\u305f\u3089\u3061\u3087\u3046\u3069\u771f\u3093\u4e2d\u306b\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\n \u30fb \u6307\u3092\u96e2\u3057\u3066\u5c11\u3057\u7d4c\u3063\u3066\u3082\u52d5\u3044\u3066\u3044\u306a\u304b\u3063\u305f\u3089\u3061\u3087\u3046\u3069\u771f\u3093\u4e2d\u306b\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\n\nTitanium mobile SDK 1.8\u304b\u3089\"dragEnd\"\u30a4\u30d9\u30f3\u30c8\u304c\u62fe\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u3084\u3063\u3068\u5b9f\u73fe\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u611f\u899a\u3067\u9069\u5f53\u306b\u6c7a\u3081\u307e\u3057\u305f\u3002\n\n\u3054\u610f\u898b\u3001\u30a2\u30c9\u30d0\u30a4\u30b9\u3044\u305f\u3060\u3051\u305f\u3089\u5b09\u3057\u3044\u3067\u3059\u3002\n\n\u5168\u304f\u540c\u3058\u5185\u5bb9\u3067\u3059\u304c\u5b9f\u884c\u753b\u9762\u306f[\u3053\u3061\u3089](http://yonecode.blogspot.com/2012/02/titaniumui.html)\u3067\u898b\u308c\u307e\u3059\u3002\n\n```js:scrollCursor.js\nvar win = Ti.UI.currentWindow;\n\n// \u4eee\u30c7\u30fc\u30bf\nvar dataList = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];\n\n// \u53c2\u7167\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3059\u308b\u30e9\u30d9\u30eb\nvar dataLabel = Titanium.UI.createLabel({\n\tbackgroundColor: 'black',\n\tborderRadius: 30,\n\tcolor:'white',\n\tfont:{\n\t\tfontFamily:'Helvetica Neue',\n\t\tfontSize:100\n\t},\n\ttextAlign:'center',\n\ttop:50, left:'auto', height: 150, width: 200,\n\ttext: dataList[0]\n});\nwin.add(dataLabel);\n\n// \u76ee\u76db\u306b\u5408\u308f\u305b\u3066\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u305b\u308b\u3053\u3068\u3067\u53c2\u7167\u30c7\u30fc\u30bf\u3092\u5207\u308a\u66ff\u3048\u308bScrollView\nvar scrollView = Titanium.UI.createScrollView({\n\tcontentWidth:'auto',\n\tcontentHeight:'auto',\n\ttop:290,\n\theight:70,\n\twidth:320,\n\tbackgroundColor:'#gray',\n\tzIndex:1\n});\n\nvar labelNum = dataList.length + 1; // \u5207\u308a\u66ff\u3048\u30e9\u30d9\u30eb\u306e\u6570\nvar labelWidth = 50; // \u5207\u308a\u66ff\u3048\u30e9\u30d9\u30eb\u306e\u6a2a\u5e45\nfor(var i = 0; i < labelNum; i++){\n\tif(i < labelNum - 1){\n\t\t// \u30b9\u30af\u30ed\u30fc\u30eb\u30e1\u30e2\u30ea\u306e\u30e9\u30d9\u30eb\n\t\tvar scrollLabel = Ti.UI.createLabel({\n\t\t\tborderColor:'black',\n\t\t\tbackgroundColor:'#A0522D',\n\t\t\theight:70, width:labelWidth,\n\t\t\tleft: 135 + labelWidth * i,\n\t\t\tfont:{\n\t\t\t\tfontFamily:'Helvetica Neue',\n\t\t\t\tfontSize:25\n\t\t\t},\n\t\t\ttextAlign: 'center',\n\t\t\ttext:i\n\t\t});\n\t\tscrollView.add(scrollLabel);\n\t} else {\n\t\t// \u9078\u629e\u7bc4\u56f2\u5916\u306f\u7121\u5730\u30b0\u30ec\u30fc\n\t\tvar scrollLabel = Ti.UI.createLabel({\n\t\t\tbackgroundColor:'#gray',\n\t\t\theight:70, width:135,\n\t\t\tleft: 135 + labelWidth * i\n\t\t});\n\t\tscrollView.add(scrollLabel);\n\t}\n}\nwin.add(scrollView);\n\n// \u76ee\u76db\nvar allow = Titanium.UI.createLabel({\n\ttext:\"\u25bc\",\n\tfont:{fontSize:20},\n\tcolor:'#gray',\n\ttop:200,\n\tleft:150,\n\twidth:20,\n\ttextAlign:'center',\n\tzIndex:3\n});\nwin.add(allow);\n\n\n// ---------------------------\u3053\u3053\u304b\u3089\u30ed\u30b8\u30c3\u30af\u90e8\u5206---------------------------------\n\n// \u5909\u6570\u521d\u671f\u5316\nvar pos_old = 0;\nvar time_old = new Date();\nvar catchDragEnd = false;\nvar throwDistance = 0;\n\n// Titanium mobile SDK 1.8\u304b\u3089dragEnd\u30a4\u30d9\u30f3\u30c8\u304c\u62fe\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\nscrollView.addEventListener('dragEnd', function(){\n\tcatchDragEnd = true;\n\n\t// 0.2\u79d2\u5f8c\u306b\u3042\u307e\u308a\u52d5\u3044\u3066\u3044\u306a\u3051\u308c\u3070\u5207\u308a\u306e\u826f\u3044\u4f4d\u7f6e\u3078\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\n\tsetTimeout(function(){\n\t\tif(pos_old % labelWidth != 0 && throwDistance < labelWidth / 2){\n\t\t\tscrollView.scrollTo(Math.round(pos_old / labelWidth) * labelWidth, 0);\n\t\t\tthrowDistance = 0;\n\t\t\tcatchDragEnd = false;\n\t\t}\n\t}, 200);\n});\n\nscrollView.addEventListener('scroll', function(e){\n\tvar pos_new = e.x;\n\n\t// \u76ee\u76db\u306e\u8a08\u7b97\n\tvar index = Math.floor((pos_new + labelWidth / 2) / labelWidth);\n\n\tdataLabel.text = dataList[index];\n\n\ttime_new = new Date();\n\tvar time_diff = time_new.getTime() - time_old.getTime();\n\n\t// \u3042\u307e\u308a\u306b\u3082\u7d30\u304b\u304f\u898b\u3059\u304e\u3066\u3082\u610f\u5473\u304c\u7121\u3044\u306e\u30670.1\u79d2\u9593\u9694\u3067\u30c1\u30a7\u30c3\u30af\n\tif( 100 < time_diff ){\n\t\tvar pos_diff = Math.abs(pos_new - pos_old);\n\n\t\t// dragEnd\u30a4\u30d9\u30f3\u30c8\u3092\u62fe\u3063\u3066\u304b\u3089\u306e\u30b9\u30af\u30ed\u30fc\u30eb\u8ddd\u96e2\u306e\u5408\u8a08\n\t\tif(catchDragEnd) {\n\t\t\tthrowDistance += pos_diff;\n\t\t}\n\n\t\t// \u30b9\u30af\u30ed\u30fc\u30eb\u901f\u5ea6\u306e\u8a08\u7b97\n\t\tvelocity = Math.round(pos_diff / time_diff * 1000);\n\n\t\t// 0.2\u79d2\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u306a\u3044\u5834\u5408\n\t\t// \u304b\u3064\u3001\u901f\u5ea6\u304c\u9045\u304f\u306a\u3063\u305f\u5834\u5408\n\t\tif(time_diff < 200 && velocity < 20){\n\n\t\t\t// \u4e2d\u9014\u534a\u7aef\u306a\u4f4d\u7f6e\u306e\u5834\u5408\n\t\t\tif(pos_new % labelWidth != 0){\n\t\t\t\t// \u5207\u308a\u306e\u826f\u3044\u4f4d\u7f6e\u3078\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\n\t\t\t\tscrollView.scrollTo(Math.round(pos_new / labelWidth) * labelWidth, 0);\n\t\t\t\tcatchDragEnd = false;\n\t\t\t\tthrowDistance = 0;\n\t\t\t}\n\t\t}\n\n\t\ttime_old = time_new;\n\t\tpos_old = pos_new;\n\t}\n});\n```", "tags": ["Titanium", "JavaScript"]}