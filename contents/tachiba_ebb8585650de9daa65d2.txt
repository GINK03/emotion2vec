{"context": " More than 1 year has passed since last update.\u8af8\u4e8b\u60c5\u306b\u3088\u308aAWS\u4ee5\u5916\u306b\u5efa\u3066\u305f\u304b\u3063\u305f\u306e\u3067\u3001DigitalOcean\u306b\u3002\n\u6708$5\u3063\u3066\u3059\u3054\u3044\u3067\u3059\u3088\u3002\n\niptables\nAWS\u306eSecurityGroup\u3067\u306c\u308b\u307e\u6e6f\u751f\u6d3b\u3092\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u4e00\u82e6\u52b4\u3002\nSSH\u4ee5\u5916\u306b\u3082\u30013128\u30dd\u30fc\u30c8\u3042\u3051\u3066\u304a\u304f\u3002\n*filter\n\n:INPUT DROP [0:0]\n:FORWARD DROP [0:0]\n:OUTPUT ACCEPT [0:0]\n\n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT\n-A INPUT -p tcp -m tcp --dport 3128 -j ACCEPT\n\nCOMMIT\n\n/etc/init.d/iptables restart\n\niptables\u3044\u3058\u308b\u306e\u3063\u3066\u3061\u3087\u3063\u3068\u524d\u307e\u3067\u306f\u7d50\u69cb\u6050\u6016\u3060\u3063\u305f\u3093\u3067\u3059\u304c\u3001\u4eca\u3069\u304d\u306f\u6700\u60aa\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u308a\u306a\u304a\u305b\u3070\u3044\u3044\u306e\u3067\u6c17\u304c\u697d\u306b\u306a\u308a\u307e\u3057\u305f\u306d...\nCentOS7\u304b\u3089\u306fiptables\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u52d5\u304b\u306a\u304f\u306a\u3063\u305f\u306e\u3067\u4e0b\u8a18\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\u7b2c47\u56de\u3000RHEL7/CentOS7\u306e\u65b0\u898f\u30b3\u30de\u30f3\u30c9\u7dcf\u307e\u3068\u3081\uff01 (\u4e2d\u4e95\u60a6\u53f8)\nhttp://www.school.ctc-g.co.jp/columns/nakai/nakai47.html\nyum -y install iptables-services\nsystemctl stop firewalld.service\nsystemctl mask firewalld.service\nsystemctl enable iptables.service\nsystemctl start iptables.service\n\n\nsquid\nyum update\nyum install squid\n\n\n/etc/squid/squid.conf\n# \u4f7f\u3046IP\u3092\u5b9a\u7fa9\u3059\u308b\nacl my_pc               src xxx.xxx.xxx.xxx # your source ip\n\n# http_access deny all \u3088\u308a\u3082\u624b\u524d\u306b\nhttp_access allow my_pc\n\n# And finally deny all other access to this proxy\nhttp_access deny all\n\n# \u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\u306b\nrequest_header_access X-Forwarded-For deny all\nrequest_header_access Via deny all\nrequest_header_access Cache-Control deny all\n\n\n/etc/init.d/squid restart\n\n\u3064\u306a\u3052\u3066\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u8af8\u4e8b\u60c5\u306b\u3088\u308aAWS\u4ee5\u5916\u306b\u5efa\u3066\u305f\u304b\u3063\u305f\u306e\u3067\u3001DigitalOcean\u306b\u3002\n\u6708$5\u3063\u3066\u3059\u3054\u3044\u3067\u3059\u3088\u3002\n\n## iptables\n\nAWS\u306eSecurityGroup\u3067\u306c\u308b\u307e\u6e6f\u751f\u6d3b\u3092\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u4e00\u82e6\u52b4\u3002\n\nSSH\u4ee5\u5916\u306b\u3082\u30013128\u30dd\u30fc\u30c8\u3042\u3051\u3066\u304a\u304f\u3002\n\n```/etc/sysconfig/iptables\n*filter\n\n:INPUT DROP [0:0]\n:FORWARD DROP [0:0]\n:OUTPUT ACCEPT [0:0]\n\n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT\n-A INPUT -p tcp -m tcp --dport 3128 -j ACCEPT\n\nCOMMIT\n```\n\n```\n/etc/init.d/iptables restart\n```\n\niptables\u3044\u3058\u308b\u306e\u3063\u3066\u3061\u3087\u3063\u3068\u524d\u307e\u3067\u306f\u7d50\u69cb\u6050\u6016\u3060\u3063\u305f\u3093\u3067\u3059\u304c\u3001\u4eca\u3069\u304d\u306f\u6700\u60aa\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u308a\u306a\u304a\u305b\u3070\u3044\u3044\u306e\u3067\u6c17\u304c\u697d\u306b\u306a\u308a\u307e\u3057\u305f\u306d...\n\nCentOS7\u304b\u3089\u306fiptables\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u52d5\u304b\u306a\u304f\u306a\u3063\u305f\u306e\u3067\u4e0b\u8a18\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u7b2c47\u56de\u3000RHEL7/CentOS7\u306e\u65b0\u898f\u30b3\u30de\u30f3\u30c9\u7dcf\u307e\u3068\u3081\uff01 (\u4e2d\u4e95\u60a6\u53f8)\nhttp://www.school.ctc-g.co.jp/columns/nakai/nakai47.html\n\n```\nyum -y install iptables-services\nsystemctl stop firewalld.service\nsystemctl mask firewalld.service\nsystemctl enable iptables.service\nsystemctl start iptables.service\n```\n\n## squid\n\n```\nyum update\nyum install squid\n```\n\n```/etc/squid/squid.conf\n# \u4f7f\u3046IP\u3092\u5b9a\u7fa9\u3059\u308b\nacl my_pc               src xxx.xxx.xxx.xxx # your source ip\n\n# http_access deny all \u3088\u308a\u3082\u624b\u524d\u306b\nhttp_access allow my_pc\n\n# And finally deny all other access to this proxy\nhttp_access deny all\n\n# \u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\u306b\nrequest_header_access X-Forwarded-For deny all\nrequest_header_access Via deny all\nrequest_header_access Cache-Control deny all\n```\n\n```\n/etc/init.d/squid restart\n```\n\n\u3064\u306a\u3052\u3066\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n", "tags": ["squid", "DigitalOcean"]}