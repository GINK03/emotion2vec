{"context": "\n\n\u80cc\u666f\n\u5f93\u6765\u306e\u30c7\u30fc\u30bf\u5206\u6790\u306e\u4e16\u754c\u3067\u306f\u3001\u4e00\u822c\u7684\u306b\u3001\u30c7\u30fc\u30bf\u30a6\u30a7\u30a2\u30cf\u30a6\u30b9\u7b49\u3067\u52a0\u5de5\uff08\u30b9\u30ad\u30fc\u30de\u3092\u5b9a\u7fa9\uff09\u3057\u305f\u72b6\u614b\u306e\u30c7\u30fc\u30bf\u3092\u5229\u7528\u3057\u3001\u30ad\u30e5\u30fc\u30d6\u306a\u3069\u3092\u69cb\u7bc9\u3059\u308b\u3068\u3044\u3063\u305f\u6d41\u308c\u3067\u30c7\u30fc\u30bf\u5206\u6790\u3092\u3057\u3066\u304d\u307e\u3057\u305f\u3002\u305d\u3057\u3066\u8fd1\u5e74\u3001\u30d3\u30c3\u30b0\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u6271\u3046\u3088\u3046\u306b\u306a\u308a\u3001\u5fc5\u305a\u6307\u5b9a\u3055\u308c\u305f\u30b9\u30ad\u30fc\u30de\u3067\u30c7\u30fc\u30bf\u30a6\u30a7\u30a2\u30cf\u30a6\u30b9\u306b\u84c4\u7a4d\u3059\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u306f\u306a\u304f\u3001\u751f\u30c7\u30fc\u30bf\u304b\u3089\u90fd\u5ea6\u597d\u304d\u306a\u30c7\u30fc\u30bf\u3092\u62bd\u51fa\u3059\u308b\u3068\u3044\u3063\u305f\u30a2\u30d7\u30ed\u30fc\u30c1\u306e\u65b9\u6cd5\u3082\u51fa\u3066\u304d\u307e\u3057\u305f\u3002Microsoft Azure\u3067\u306f\u3001\u3053\u306e\u5f8c\u8005\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3092Azure Data Lake\u3001Azure HDInsight\u3068\u3044\u3063\u305f\u30b5\u30fc\u30d3\u30b9\u3067\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001Azure Data Lake\u306e\u4f7f\u3044\u65b9\u3068\u3001\u72ec\u81ea\u8a00\u8a9e\u306eU-SQL\u3092\u6d3b\u7528\u3057\u3001\u300cCortana Intelligence Suite\u3092\u69cb\u7bc9\uff08\u7b2c3\u56de\uff09\u300d\u307e\u3067\u3067\u69cb\u7bc9\u3057\u3001\u30c7\u30fc\u30bf\u3092\u84c4\u7a4d\u3057\u3066\u304d\u305f\u3001Azure BLOB\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u4e8b\u524d\u306b\u6e96\u5099\u3059\u308b\u3082\u306e\n\nAzure \u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\nVisual Studio 2015\u4ee5\u964d\uff08\u3069\u306e\u30a8\u30c7\u30a3\u30b7\u30e7\u30f3\u3082\u5229\u7528\u53ef\u80fd\uff09\n\n\n\u4e8b\u524d\u306bAzure SDK\u304c\u5fc5\u8981\u3067\u3059\uff08https://www.visualstudio.com/ja-jp/features/azure-tools-vs.aspx\uff09\n\n\u4e8b\u524d\u306bAzure Data Lake Tools for Visual Studio\u304c\u5fc5\u8981\u3067\u3059\uff08https://www.microsoft.com/en-us/download/details.aspx?id=49504)\n\n\n\n\n\u8a2d\u5b9a\u624b\u9806\n\nAzure Data Lake Analytics\u306e\u6e96\u5099\nAzure Data Lake Analytics\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u3001\u307e\u305a\u306fAzure\u30dd\u30fc\u30bf\u30eb\u304b\u3089Azure Data Lake Analytics\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u300c\u65b0\u898f\u300d>\u300cIntelligence + analytics\u300d>\u300cData Lake Analytics\u300d\u306e\u9806\u306b\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n \n\u5404\u9805\u76ee\u3092\u8a18\u5165\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u8a18\u5165\u3057\u305f\u3089\u3001\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u73fe\u5728\u3001\u5834\u6240\u306f\u7c73\u56fd\u6771\u90e8\uff12\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u307f\u9078\u629e\u3067\u304d\u307e\u3059\u3002\n\u4fa1\u683c\u30ec\u30d9\u30eb\u306f\u5f93\u91cf\u8ab2\u91d1\u5236\u306a\u306e\u3067\u3001\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u305f\u5206\u306e\u307f\u8ab2\u91d1\u3055\u308c\u308b\u4ed5\u7d44\u307f\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \n\n\u30c7\u30d7\u30ed\u30a4\u304c\u958b\u59cb\u3055\u308c\u307e\u3059\u3002\uff11\uff5e\uff13\u5206\u307b\u3069\u3067\u5b8c\u4e86\u3057\u307e\u3059\u3002\n\u30c7\u30d7\u30ed\u30a4\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u300c\u305d\u306e\u4ed6\u30b5\u30fc\u30d3\u30b9\u300d>\u300c\u30c7\u30fc\u30bf + \u5206\u6790\u300d>\u300cData Lake Analytics\u300d\u306e\u9806\u306b\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n(2)\u3067\u8a18\u5165\u3057\u305f\u540d\u524d\u306eData Lake Analytics\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u3001Azure Data Lake Analytics\u306e\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\n\n\n\u5206\u6790\u3059\u308b\u305f\u3081\u306e\u4e0b\u6e96\u5099\nData Lake Analytics\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001U-SQL\u3068\u3044\u3046\u65b0\u3057\u3044\u8a00\u8a9e\u3067\u30af\u30a8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3056\u3063\u304f\u308a\u8a00\u3046\u3068\u3001\u666e\u901a\u306eSQL\u8a00\u8a9e\u306e\u3088\u3046\u3067C#\u3082\u542b\u3081\u3089\u308c\u3066\u3057\u307e\u3046\u3001\u30d1\u30ef\u30d5\u30eb\u306a\u30af\u30a8\u30ea\u8a00\u8a9e\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u3042\u307e\u308a\u8a73\u3057\u304f\u89e6\u308c\u307e\u305b\u3093\u304c\u3001\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u3068\u3053\u308d\u307e\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001JSON\u5f62\u5f0f\u306e\u751f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u305d\u308c\u3092\u30af\u30a8\u30ea\u3067\u96c6\u7d04\u3057\u305f\u3082\u306e\u3092SQL Database\u3078\u66f8\u304d\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u3044\u3046\u3053\u3068\u3092\u5b9f\u65bd\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u3067\u3059\u304c\u3001Azure\u30dd\u30fc\u30bf\u30eb\u306e\u753b\u9762\u3067\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3059\u308b\u753b\u9762\u304b\u3089\u306f\u3001\u76f4\u63a5JSON\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u8aad\u307f\u8fbc\u3081\u306a\u3044\u3093\u3067\u3059\u3002\u6b8b\u5ff5\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001JSON\u3092\u6271\u3046\u305f\u3081\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u3092Visual Studio\u304b\u3089\u767b\u9332\u3059\u308b\u6d41\u308c\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u30a2\u30bb\u30f3\u30d6\u30ea\u306e\u767b\u9332\nJSON\u3092\u53d6\u308a\u6271\u3046\u306b\u306f\u3001\u4e8b\u524d\u306bNewtosoft.Json.dll\u7b49\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u30fc\u3092Azure Data Lake\u4e0a\u3078\u767b\u9332\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u901a\u5e38\u306eC#\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306a\u3069\u3068\u306f\u9055\u3044\u3001NuGet\u306f\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001Newtonsoft.Json.dll\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3001\u30d3\u30eb\u30c9\u3057\u305f\u3082\u306e\u3092Azure Data Lake\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\nGithub\u304b\u3089USQL\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u3053\u306b\u306f\u3001JSON\u304b\u3089\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306a\u3069\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001\u975e\u5e38\u306b\u4fbf\u5229\u3067\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u5185\u306e\u3001Examples/DataFormats/Microsoft.Analytics.Samples.Formats\u306b\u3042\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u307e\u3059\u3002\n\u958b\u3044\u305f\u3089\u3001\u305d\u306e\u307e\u307e\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u30af\u30e9\u30a6\u30c9\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u3001Data Lake Analytics\u3092\u958b\u304d\u3001Databases > master > Assemblies\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30a2\u30bb\u30f3\u30d6\u30ea\u306e\u767b\u9332\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u300cLoad assembly from path\u300d\u306e\u300c\u2026\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u300cLocal\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u2026\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3067\u3001\u5148\u307b\u3069\uff083\uff09\u3067\u30d3\u30eb\u30c9\u3057\u305fdll\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u300cInput Status\u300d\u304c\u300cReady\u300d\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3001\u767b\u9332\u6e96\u5099\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\n\u4e00\u6642\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u306f\u300cYes\u300d\u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30b9\u30c6\u30c3\u30d75~8\u307e\u3067\u3092\u3001Microsoft.Analytics.Samples.Formats.dll\u306b\u5bfe\u3057\u3066\u3082\u884c\u3044\u307e\u3059\u3002\n\n\n\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u95a2\u9023\u4ed8\u3051\nAzure Data Lake Analytics\u3067Azure\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u3001\u95a2\u9023\u4ed8\u3051\u3092\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u308c\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30c9\u30ec\u30b9\u5f62\u5f0f\u3067\u3001Azure\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30c7\u30fc\u30bf\u5143\u3068\u3057\u3066\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nData Lake Analytics\u3092Azure\u30dd\u30fc\u30bf\u30eb\u304b\u3089\u958b\u304d\u3001\u300c\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u300d>\u300c\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u7a2e\u985e\u3092\u300cAzure Storage\u300d\u306b\u3057\u3001\u30e1\u30bd\u30c3\u30c9\u306e\u9078\u629e\u306f\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u9078\u629e\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Azure Storage\u3067\u306f\u95a2\u9023\u4ed8\u3051\u3057\u305f\u3044\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3042\u3068\u306f\u300c\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u6b63\u3057\u304f\u95a2\u9023\u4ed8\u3051\u3067\u304d\u305f\u304b\u3069\u3046\u304b\u306f\u3001\u300c\u30c7\u30fc\u30bf\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u300d\u304b\u3089\u3001\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n\n\u30af\u30a8\u30ea\u306e\u4f5c\u6210\n\n\u5225\u306eVisual Studio\u3092\u958b\u304d\u3001\u65b0\u3057\u3044U-SQL\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\u3002 \u300cwasb://\u300d\u306e\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u4e8b\u524d\u306b\u95a2\u9023\u4ed8\u3051\u3057\u305fAzure\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002{*}\u3068\u5165\u529b\u3059\u308b\u3053\u3068\u3067\u3001\u30d5\u30a9\u30eb\u30c0\u5185/\u30d5\u30a1\u30a4\u30eb\u540d\u3059\u3079\u3066\u3092\u9078\u629e\u3057\u305f\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\nCREATE ASSEMBLY IF NOT EXISTS [Newtonsoft.Json] FROM \"assemblies/Newtonsoft.Json.dll\";\nCREATE ASSEMBLY IF NOT EXISTS [Microsoft.Analytics.Samples.Formats] FROM \"assemblies/Microsoft.Analytics.Samples.Formats.dll\";\n\nREFERENCE ASSEMBLY [Newtonsoft.Json];\nREFERENCE ASSEMBLY [Microsoft.Analytics.Samples.Formats]; \n\n//USE DATABASE [traindetail];\n\n@json = \n    EXTRACT jsonString string FROM @\"wasb://tyqiita@tyqiita/logs/{*}/{*}/{*}.json\" USING Extractors.Text(delimiter:'\\b', quoting:false);\n\n@jsonify = SELECT Microsoft.Analytics.Samples.Formats.Json.JsonFunctions.JsonTuple(jsonString) AS rec FROM @json;\n\n@columnized = SELECT \n            DateTime.Parse(rec[\"dc:date\"]) AS date,\n            rec[\"odpt:railway\"] AS railway,\n            rec[\"odpt:trainNumber\"] AS trainnumber,\n            Double.Parse((rec[\"odpt:delay\"] ?? \"0\")) AS delay,\n            rec[\"odpt:startingStation\"] AS startingstation,\n            rec[\"odpt:terminalStation\"] AS terminalstation, \n            rec[\"odpt:fromStation\"] AS fromstation, \n            rec[\"odpt:toStation\"] AS tostation,\n            rec[\"odpt:railDirection\"] AS raildirection \n    FROM @jsonify;\n\nOUTPUT @columnized\nTO @\"wasb://tyqiita@tyqiita/output/result.txt\"\nUSING Outputters.Text();\n\n\n\u30af\u30a8\u30ea\u3092\u5b9f\u884c\nData Lake Analytics\u3067\u306e\u5b9f\u884c\u51e6\u7406\u3092\u300c\u30b8\u30e7\u30d6\u300d\u3068\u8a00\u3044\u307e\u3059\u3002\nVisual Studio\u304b\u3089\u30b8\u30e7\u30d6\u3092\u767a\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u30b8\u30e7\u30d6\u304cData Lake Analytics\u5185\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306a\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\n\nVisual Studio\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u3001\u4f5c\u6210\u3057\u305fUSQL\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cSubmit Script\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nSubmit Job\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001Job Name\u3092\u308f\u304b\u308a\u3084\u3059\u3044\u540d\u524d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u8907\u6570\u306eData Lake Analytics\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30b8\u30e7\u30d6\u3092\u5b9f\u884c\u3059\u308bData Lake Analytics\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9078\u3073\u307e\u3059\u3002Parallelism\u3068\u306f\u3001\u3053\u306e\u51e6\u7406\u306e\u4e26\u5217\u5b9f\u884c\u6570\u306e\u3053\u3068\u3067\u3059\u3002\u591a\u3051\u308c\u3070\u591a\u3044\u307b\u3069\u3001\u4e26\u5217\u3067\u51e6\u7406\u3055\u308c\u308b\u305f\u3081\u3001\u65e9\u304f\u306f\u306a\u308a\u307e\u3059\u304c\u3001\u30c7\u30fc\u30bf\u91cf\u304c\u5c11\u306a\u3044\u5834\u5408\u306f\u4e26\u5217\u5b9f\u884c\u306e\u305f\u3081\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\uff08\u6e96\u5099\u51e6\u7406\uff09\u306e\u65b9\u304c\u6642\u9593\u304c\u304b\u304b\u308b\u305f\u3081\u3001\u3042\u307e\u308a\u5dee\u306f\u611f\u3058\u3089\u308c\u307e\u305b\u3093\u3002\n\n\u5b9f\u884c\u958b\u59cb\u3055\u308c\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u9032\u6357\u72b6\u6cc1\u3068\u3001\u8a73\u7d30\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u8996\u899a\u7684\u306b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u753b\u9762\u5de6\u5074\u306e\u9032\u6357\u304c\u300cFinalizing\u300d\u307e\u3067\u9032\u3080\u3068\u3001\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\n\u51fa\u529b\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306f\u3001Azure\u30dd\u30fc\u30bf\u30eb\u3067Data Lake Analytics\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u300c\u30c7\u30fc\u30bf\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u300d\u307e\u305f\u306f\u3001\u300cMicrosoft Azure Storage Explorer\u300d\u304b\u3089\u78ba\u8a8d/\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\n\n\n\u30ea\u30f3\u30af\u96c6\n\u8457\u8005\u304c\u4f5c\u6210\u3059\u308b\u969b\u306b\u3001\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\u3067\u3059\uff1a\nhttp://sqlblog.com/blogs/jorg_klein/archive/2016/06/27/use-adlcopy-to-generate-u-sql-jobs-that-copy-data-between-azure-blob-storage-and-azure-data-lake-store.aspx\nhttps://azure.microsoft.com/en-us/documentation/articles/data-lake-analytics-manage-use-portal/\nhttps://azure.microsoft.com/en-us/documentation/articles/data-lake-store-copy-data-azure-storage-blob/\nhttp://www.rcloudnetwork.com/the-cloud-in-the-news/creating-big-data-pipelines-using-azure-data-lake-and-azure-data-factory/\nhttps://github.com/Azure/usql\nhttps://blogs.msdn.microsoft.com/robinlester/2016/01/04/an-introduction-to-u-sql-in-azure-data-lake/\n#\u80cc\u666f\n\u5f93\u6765\u306e\u30c7\u30fc\u30bf\u5206\u6790\u306e\u4e16\u754c\u3067\u306f\u3001\u4e00\u822c\u7684\u306b\u3001\u30c7\u30fc\u30bf\u30a6\u30a7\u30a2\u30cf\u30a6\u30b9\u7b49\u3067\u52a0\u5de5\uff08\u30b9\u30ad\u30fc\u30de\u3092\u5b9a\u7fa9\uff09\u3057\u305f\u72b6\u614b\u306e\u30c7\u30fc\u30bf\u3092\u5229\u7528\u3057\u3001\u30ad\u30e5\u30fc\u30d6\u306a\u3069\u3092\u69cb\u7bc9\u3059\u308b\u3068\u3044\u3063\u305f\u6d41\u308c\u3067\u30c7\u30fc\u30bf\u5206\u6790\u3092\u3057\u3066\u304d\u307e\u3057\u305f\u3002\u305d\u3057\u3066\u8fd1\u5e74\u3001\u30d3\u30c3\u30b0\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u6271\u3046\u3088\u3046\u306b\u306a\u308a\u3001\u5fc5\u305a\u6307\u5b9a\u3055\u308c\u305f\u30b9\u30ad\u30fc\u30de\u3067\u30c7\u30fc\u30bf\u30a6\u30a7\u30a2\u30cf\u30a6\u30b9\u306b\u84c4\u7a4d\u3059\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u306f\u306a\u304f\u3001\u751f\u30c7\u30fc\u30bf\u304b\u3089\u90fd\u5ea6\u597d\u304d\u306a\u30c7\u30fc\u30bf\u3092\u62bd\u51fa\u3059\u308b\u3068\u3044\u3063\u305f\u30a2\u30d7\u30ed\u30fc\u30c1\u306e\u65b9\u6cd5\u3082\u51fa\u3066\u304d\u307e\u3057\u305f\u3002Microsoft Azure\u3067\u306f\u3001\u3053\u306e\u5f8c\u8005\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3092Azure Data Lake\u3001Azure HDInsight\u3068\u3044\u3063\u305f\u30b5\u30fc\u30d3\u30b9\u3067\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001Azure Data Lake\u306e\u4f7f\u3044\u65b9\u3068\u3001\u72ec\u81ea\u8a00\u8a9e\u306eU-SQL\u3092\u6d3b\u7528\u3057\u3001[\u300cCortana Intelligence Suite\u3092\u69cb\u7bc9\uff08\u7b2c3\u56de\uff09\u300d](URL http://qiita.com/taiki_yoshida/items/58cd5af970e24f2453de)\u307e\u3067\u3067\u69cb\u7bc9\u3057\u3001\u30c7\u30fc\u30bf\u3092\u84c4\u7a4d\u3057\u3066\u304d\u305f\u3001Azure BLOB\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3066\u307f\u307e\u3059\u3002\n\n#\u4e8b\u524d\u306b\u6e96\u5099\u3059\u308b\u3082\u306e\n* Azure \u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\n* Visual Studio 2015\u4ee5\u964d\uff08\u3069\u306e\u30a8\u30c7\u30a3\u30b7\u30e7\u30f3\u3082\u5229\u7528\u53ef\u80fd\uff09\n    * \u4e8b\u524d\u306bAzure SDK\u304c\u5fc5\u8981\u3067\u3059\uff08https://www.visualstudio.com/ja-jp/features/azure-tools-vs.aspx\uff09\n    * \u4e8b\u524d\u306bAzure Data Lake Tools for Visual Studio\u304c\u5fc5\u8981\u3067\u3059\uff08https://www.microsoft.com/en-us/download/details.aspx?id=49504)\n\n#\u8a2d\u5b9a\u624b\u9806\n\n##Azure Data Lake Analytics\u306e\u6e96\u5099\nAzure Data Lake Analytics\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u3001\u307e\u305a\u306fAzure\u30dd\u30fc\u30bf\u30eb\u304b\u3089Azure Data Lake Analytics\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n1. \u300c\u65b0\u898f\u300d>\u300cIntelligence + analytics\u300d>\u300cData Lake Analytics\u300d\u306e\u9806\u306b\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/44a7e0e4-0c04-1518-f6df-a2d59d419f6b.png) \n\n2. \u5404\u9805\u76ee\u3092\u8a18\u5165\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u8a18\u5165\u3057\u305f\u3089\u3001\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u73fe\u5728\u3001\u5834\u6240\u306f\u7c73\u56fd\u6771\u90e8\uff12\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u307f\u9078\u629e\u3067\u304d\u307e\u3059\u3002\n\u4fa1\u683c\u30ec\u30d9\u30eb\u306f\u5f93\u91cf\u8ab2\u91d1\u5236\u306a\u306e\u3067\u3001\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u305f\u5206\u306e\u307f\u8ab2\u91d1\u3055\u308c\u308b\u4ed5\u7d44\u307f\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/6e85d0bf-9c8d-1f47-174f-558c3c4f1da1.png)\n\n3. \u30c7\u30d7\u30ed\u30a4\u304c\u958b\u59cb\u3055\u308c\u307e\u3059\u3002\uff11\uff5e\uff13\u5206\u307b\u3069\u3067\u5b8c\u4e86\u3057\u307e\u3059\u3002\n\u30c7\u30d7\u30ed\u30a4\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/e9db6e02-2243-c138-4520-63d88e9c9ca6.png)\n\n4. \u300c\u305d\u306e\u4ed6\u30b5\u30fc\u30d3\u30b9\u300d>\u300c\u30c7\u30fc\u30bf + \u5206\u6790\u300d>\u300cData Lake Analytics\u300d\u306e\u9806\u306b\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/389e1440-a560-4669-9dfe-63cace3550f4.png)\n\n5. (2)\u3067\u8a18\u5165\u3057\u305f\u540d\u524d\u306eData Lake Analytics\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/f949c477-3f9b-c5ed-b0f6-e0163ccc130a.png)\n\n6. \u3053\u308c\u3067\u3001Azure Data Lake Analytics\u306e\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/184019c9-e76a-5a8a-cf1b-6aae89ff0875.png)\n\n##\u5206\u6790\u3059\u308b\u305f\u3081\u306e\u4e0b\u6e96\u5099\nData Lake Analytics\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001U-SQL\u3068\u3044\u3046\u65b0\u3057\u3044\u8a00\u8a9e\u3067\u30af\u30a8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3056\u3063\u304f\u308a\u8a00\u3046\u3068\u3001\u666e\u901a\u306eSQL\u8a00\u8a9e\u306e\u3088\u3046\u3067C#\u3082\u542b\u3081\u3089\u308c\u3066\u3057\u307e\u3046\u3001\u30d1\u30ef\u30d5\u30eb\u306a\u30af\u30a8\u30ea\u8a00\u8a9e\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u3042\u307e\u308a\u8a73\u3057\u304f\u89e6\u308c\u307e\u305b\u3093\u304c\u3001\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u3068\u3053\u308d\u307e\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001JSON\u5f62\u5f0f\u306e\u751f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u305d\u308c\u3092\u30af\u30a8\u30ea\u3067\u96c6\u7d04\u3057\u305f\u3082\u306e\u3092SQL Database\u3078\u66f8\u304d\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u3044\u3046\u3053\u3068\u3092\u5b9f\u65bd\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u3067\u3059\u304c\u3001Azure\u30dd\u30fc\u30bf\u30eb\u306e\u753b\u9762\u3067\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3059\u308b\u753b\u9762\u304b\u3089\u306f\u3001\u76f4\u63a5JSON\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u8aad\u307f\u8fbc\u3081\u306a\u3044\u3093\u3067\u3059\u3002\u6b8b\u5ff5\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001JSON\u3092\u6271\u3046\u305f\u3081\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u3092Visual Studio\u304b\u3089\u767b\u9332\u3059\u308b\u6d41\u308c\u3068\u306a\u308a\u307e\u3059\u3002\n\n###\u30a2\u30bb\u30f3\u30d6\u30ea\u306e\u767b\u9332\nJSON\u3092\u53d6\u308a\u6271\u3046\u306b\u306f\u3001\u4e8b\u524d\u306bNewtosoft.Json.dll\u7b49\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u30fc\u3092Azure Data Lake\u4e0a\u3078\u767b\u9332\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u901a\u5e38\u306eC#\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306a\u3069\u3068\u306f\u9055\u3044\u3001NuGet\u306f\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001Newtonsoft.Json.dll\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3001\u30d3\u30eb\u30c9\u3057\u305f\u3082\u306e\u3092Azure Data Lake\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n1. Github\u304b\u3089[USQL\u306e\u30ec\u30dd\u30b8\u30c8\u30ea](URL https://github.com/Azure/usql)\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u3053\u306b\u306f\u3001JSON\u304b\u3089\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306a\u3069\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001\u975e\u5e38\u306b\u4fbf\u5229\u3067\u3059\u3002\n\n2. \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u5185\u306e\u3001Examples/DataFormats/Microsoft.Analytics.Samples.Formats\u306b\u3042\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u307e\u3059\u3002\n\n3. \u958b\u3044\u305f\u3089\u3001\u305d\u306e\u307e\u307e\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/dc2f885d-74d1-2096-eba9-8563536ac2e1.png)\n\n4. \u30af\u30e9\u30a6\u30c9\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u3001Data Lake Analytics\u3092\u958b\u304d\u3001Databases > master > Assemblies\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30a2\u30bb\u30f3\u30d6\u30ea\u306e\u767b\u9332\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/df43d9c8-4e28-23ad-96bd-2190688a8900.png)\n\n5. \u300cLoad assembly from path\u300d\u306e\u300c\u2026\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/3cb544c8-12fa-6953-04af-ce4f07f75dc9.png)\n\n6. \u300cLocal\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u2026\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3067\u3001\u5148\u307b\u3069\uff083\uff09\u3067\u30d3\u30eb\u30c9\u3057\u305fdll\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/e493b796-a545-a65d-f71c-7038233fea6a.png)\n\n7. \u300cInput Status\u300d\u304c\u300cReady\u300d\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3001\u767b\u9332\u6e96\u5099\u304c\u5b8c\u4e86\u3067\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/eb02e909-1ef2-326c-0514-737314486824.png)\n\n8. \u4e00\u6642\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u306f\u300cYes\u300d\u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/6d913766-c11a-133d-c94e-56bcb1b63da3.png)\n\n9. \u30b9\u30c6\u30c3\u30d75~8\u307e\u3067\u3092\u3001Microsoft.Analytics.Samples.Formats.dll\u306b\u5bfe\u3057\u3066\u3082\u884c\u3044\u307e\u3059\u3002\n\n###\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u95a2\u9023\u4ed8\u3051\nAzure Data Lake Analytics\u3067Azure\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u3001\u95a2\u9023\u4ed8\u3051\u3092\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u308c\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30c9\u30ec\u30b9\u5f62\u5f0f\u3067\u3001Azure\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30c7\u30fc\u30bf\u5143\u3068\u3057\u3066\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n1. Data Lake Analytics\u3092Azure\u30dd\u30fc\u30bf\u30eb\u304b\u3089\u958b\u304d\u3001\u300c\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u300d>\u300c\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/45121c9d-bb83-2c4f-a78a-63a341395231.png)\n\n2. \u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u7a2e\u985e\u3092\u300cAzure Storage\u300d\u306b\u3057\u3001\u30e1\u30bd\u30c3\u30c9\u306e\u9078\u629e\u306f\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u9078\u629e\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Azure Storage\u3067\u306f\u95a2\u9023\u4ed8\u3051\u3057\u305f\u3044\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3042\u3068\u306f\u300c\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/6cc0cfa1-9101-d1f0-5705-19588e1f9377.png)\n\n3. \u6b63\u3057\u304f\u95a2\u9023\u4ed8\u3051\u3067\u304d\u305f\u304b\u3069\u3046\u304b\u306f\u3001\u300c\u30c7\u30fc\u30bf\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u300d\u304b\u3089\u3001\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/b5c05b40-e593-303b-433f-d800e90da203.png)\n\n\n##\u30af\u30a8\u30ea\u306e\u4f5c\u6210\n1. \u5225\u306eVisual Studio\u3092\u958b\u304d\u3001\u65b0\u3057\u3044U-SQL\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/bbea284d-63b1-74d2-65b3-c51c6b539728.png)\n\n2. \u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\u3002 \u300cwasb://\u300d\u306e\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u4e8b\u524d\u306b\u95a2\u9023\u4ed8\u3051\u3057\u305fAzure\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002{*}\u3068\u5165\u529b\u3059\u308b\u3053\u3068\u3067\u3001\u30d5\u30a9\u30eb\u30c0\u5185/\u30d5\u30a1\u30a4\u30eb\u540d\u3059\u3079\u3066\u3092\u9078\u629e\u3057\u305f\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\n ```sql\nCREATE ASSEMBLY IF NOT EXISTS [Newtonsoft.Json] FROM \"assemblies/Newtonsoft.Json.dll\";\nCREATE ASSEMBLY IF NOT EXISTS [Microsoft.Analytics.Samples.Formats] FROM \"assemblies/Microsoft.Analytics.Samples.Formats.dll\";\n\nREFERENCE ASSEMBLY [Newtonsoft.Json];\nREFERENCE ASSEMBLY [Microsoft.Analytics.Samples.Formats]; \n\n//USE DATABASE [traindetail];\n\n@json = \n    EXTRACT jsonString string FROM @\"wasb://tyqiita@tyqiita/logs/{*}/{*}/{*}.json\" USING Extractors.Text(delimiter:'\\b', quoting:false);\n\n@jsonify = SELECT Microsoft.Analytics.Samples.Formats.Json.JsonFunctions.JsonTuple(jsonString) AS rec FROM @json;\n\n@columnized = SELECT \n            DateTime.Parse(rec[\"dc:date\"]) AS date,\n            rec[\"odpt:railway\"] AS railway,\n            rec[\"odpt:trainNumber\"] AS trainnumber,\n            Double.Parse((rec[\"odpt:delay\"] ?? \"0\")) AS delay,\n            rec[\"odpt:startingStation\"] AS startingstation,\n            rec[\"odpt:terminalStation\"] AS terminalstation, \n            rec[\"odpt:fromStation\"] AS fromstation, \n            rec[\"odpt:toStation\"] AS tostation,\n            rec[\"odpt:railDirection\"] AS raildirection \n    FROM @jsonify;\n\nOUTPUT @columnized\nTO @\"wasb://tyqiita@tyqiita/output/result.txt\"\nUSING Outputters.Text();\n```\n\n##\u30af\u30a8\u30ea\u3092\u5b9f\u884c\nData Lake Analytics\u3067\u306e\u5b9f\u884c\u51e6\u7406\u3092\u300c\u30b8\u30e7\u30d6\u300d\u3068\u8a00\u3044\u307e\u3059\u3002\nVisual Studio\u304b\u3089\u30b8\u30e7\u30d6\u3092\u767a\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u30b8\u30e7\u30d6\u304cData Lake Analytics\u5185\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306a\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\n\n1. Visual Studio\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u3001\u4f5c\u6210\u3057\u305fUSQL\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cSubmit Script\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/d5efd672-44b8-0522-1871-f64ebe56668d.png)\n\n2. Submit Job\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001Job Name\u3092\u308f\u304b\u308a\u3084\u3059\u3044\u540d\u524d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u8907\u6570\u306eData Lake Analytics\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30b8\u30e7\u30d6\u3092\u5b9f\u884c\u3059\u308bData Lake Analytics\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9078\u3073\u307e\u3059\u3002Parallelism\u3068\u306f\u3001\u3053\u306e\u51e6\u7406\u306e\u4e26\u5217\u5b9f\u884c\u6570\u306e\u3053\u3068\u3067\u3059\u3002\u591a\u3051\u308c\u3070\u591a\u3044\u307b\u3069\u3001\u4e26\u5217\u3067\u51e6\u7406\u3055\u308c\u308b\u305f\u3081\u3001\u65e9\u304f\u306f\u306a\u308a\u307e\u3059\u304c\u3001\u30c7\u30fc\u30bf\u91cf\u304c\u5c11\u306a\u3044\u5834\u5408\u306f\u4e26\u5217\u5b9f\u884c\u306e\u305f\u3081\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\uff08\u6e96\u5099\u51e6\u7406\uff09\u306e\u65b9\u304c\u6642\u9593\u304c\u304b\u304b\u308b\u305f\u3081\u3001\u3042\u307e\u308a\u5dee\u306f\u611f\u3058\u3089\u308c\u307e\u305b\u3093\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/6437f24e-6b03-171b-2c5a-37292c63ebe7.png)\n\n3. \u5b9f\u884c\u958b\u59cb\u3055\u308c\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u9032\u6357\u72b6\u6cc1\u3068\u3001\u8a73\u7d30\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u8996\u899a\u7684\u306b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/489439c5-22d7-9d53-d22b-66a4c8e43903.png)\n\n4. \u753b\u9762\u5de6\u5074\u306e\u9032\u6357\u304c\u300cFinalizing\u300d\u307e\u3067\u9032\u3080\u3068\u3001\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/abcd3c46-126b-f19b-017a-ddf22e52a5a7.png)\n\n5. \u51fa\u529b\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306f\u3001Azure\u30dd\u30fc\u30bf\u30eb\u3067Data Lake Analytics\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3001\u300c\u30c7\u30fc\u30bf\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u300d\u307e\u305f\u306f\u3001\u300cMicrosoft Azure Storage Explorer\u300d\u304b\u3089\u78ba\u8a8d/\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u53ef\u80fd\u3067\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/47bf18cc-b163-747f-ea68-0f3b668f3e63.png)\n![image](https://qiita-image-store.s3.amazonaws.com/0/136660/fc2ded6b-4dfd-f47e-f312-477d0d33307f.png)\n\n\n#\u30ea\u30f3\u30af\u96c6\n\u8457\u8005\u304c\u4f5c\u6210\u3059\u308b\u969b\u306b\u3001\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\u3067\u3059\uff1a\nhttp://sqlblog.com/blogs/jorg_klein/archive/2016/06/27/use-adlcopy-to-generate-u-sql-jobs-that-copy-data-between-azure-blob-storage-and-azure-data-lake-store.aspx\nhttps://azure.microsoft.com/en-us/documentation/articles/data-lake-analytics-manage-use-portal/\nhttps://azure.microsoft.com/en-us/documentation/articles/data-lake-store-copy-data-azure-storage-blob/\nhttp://www.rcloudnetwork.com/the-cloud-in-the-news/creating-big-data-pipelines-using-azure-data-lake-and-azure-data-factory/\nhttps://github.com/Azure/usql\nhttps://blogs.msdn.microsoft.com/robinlester/2016/01/04/an-introduction-to-u-sql-in-azure-data-lake/\n", "tags": ["Azure", "AzureStorage", "AzureDataLake", "CortanaIntelligenceSuite", "bigdata"]}