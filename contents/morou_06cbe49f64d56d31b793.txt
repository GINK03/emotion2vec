{"context": " More than 1 year has passed since last update.express\u306e\u4f7f\u3044\u65b9\u3092\u9006\u5f15\u304d\u5f62\u5f0f\u3067\u307e\u3068\u3081\u3066\u307f\u305f\u3002\u53c2\u8003\u306b\u3057\u305f\u306e\u306f2014\u5e742\u670820\u65e5\u6642\u70b9\uff08express 3.4.8\u6642\u70b9\uff09\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304a\u3088\u3073\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3001\u30b5\u30f3\u30d7\u30eb\u306a\u3069\u3002\n\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\u30b5\u30f3\u30d7\u30eb\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\uff08i.e. \u30d1\u30b9\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u95a2\u6570\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u306b\u306f\uff09app.get(path, func)\u3084app.post(path, func)\u306a\u3069\u5404HTTP Verb\u306b\u5bfe\u5fdc\u3057\u305f\u95a2\u6570\u3092\u4f7f\u3046\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306f\u66f8\u304b\u308c\u305f\u9806\u756a\u306b\u8a55\u4fa1\u3055\u308c\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3068path\u306e\u4e00\u81f4\u3057\u305f\u3082\u306e\u304c\u9069\u7528\u3055\u308c\u308b\n\npath\u306f\u6587\u5b57\u5217\u307e\u305f\u306f\u6b63\u898f\u8868\u73fe\u3092\u6307\u5b9a\u53ef\u80fd\n\nfunc\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306ffunction(req, res[, next])\n\n\nnext\u306f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\n\n\n\u5f15\u6570\u7121\u3057next()\u3067\u547c\u3073\u51fa\u3059\u3068\u3001\u6b21\u306b\u4e00\u81f4\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306b\u51e6\u7406\u304c\u79fb\u308b\n\u5f15\u6570\u6709\u308anext(object)\u3067\u547c\u3073\u51fa\u3059\u3068\u3001\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u306e\u95a2\u6570\u306b\u51e6\u7406\u304c\u79fb\u308b\uff08\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306b\u3064\u3044\u3066\u306f\u5225\u9805\u76ee\u53c2\u7167\u306e\u3053\u3068\uff09\n\n\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // something\n    :\n});\n\napp.post(/^\\/items\\/[0-9]+\\.html$/, function(req, res) {\n    :\n  // something\n    :\n});\n\n/*\n  app.get()\u3001app.post()\u4ee5\u5916\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u95a2\u6570\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\u305d\u308c\u305e\u308c\u540c\u540d\u306eHTTP Verb\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n\n  app.put()\n  app.head()\n  app.delete()\n  app.options()\n  app.trace()\n  app.copy()\n  app.lock()\n  app.mkcol()\n  app.move()\n  app.propfind()\n  app.proppatch()\n  app.unlock()\n  app.report()\n  app.mkactivity()\n  app.checkout()\n  app.merge()\n  app.m-search()\n  app.notify()\n  app.subscribe()\n  app.unsubscribe()\n  app.patch()\n  app.search()\n*/\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306fresponse.render(templateName)\u3092\u4f7f\u3046\n\ntemplateName\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u79f0\u3067\u3042\u308a\u3001app.set('views', path)\u3067\u6307\u5b9a\u3057\u305f\u30d1\u30b9\u76f4\u4e0b\u306b\u7f6e\u304f\u5fc5\u8981\u304c\u3042\u308b\n\ntemplateName\u3067\u306f\u62e1\u5f35\u5b50\u3092\u7701\u7565\u53ef\u80fd\u3002\u7701\u7565\u3057\u305f\u5834\u5408app.set('view engine', ext)\u3067\u6307\u5b9a\u3057\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u62e1\u5f35\u5b50\u3067\u3042\u308b\u3068\u89e3\u91c8\u3055\u308c\u308b\n\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u5229\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306fapp.engine(ext, engineFunc)\u3067\u767b\u9332\u3059\u308b\n\n// \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u30d1\u30b9\u3092\u8a2d\u5b9a\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f \"process.cwd() + '/views'\"\napp.set('views', 'path_to_somewhere');\n\n// \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u5229\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u767b\u9332\nvar jadeEngine = require('jade').someFunc;\napp.engine('jade', jadeEngine);\n\nvar ejsEngine = require('ejs').someFunc;\napp.engine('ejs', ejsEngine);\n/*\napp.engine()\u306e\u7b2c\u4e8c\u5f15\u6570\u306ffunction(path, options, callback)\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u6301\u3064\u5fc5\u8981\u304c\u3042\u308b\u3002consolidate.js(https://github.com/visionmedia/consolidate.js)\u3092\u4f7f\u3046\u3068\u69d8\u3005\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u3053\u306e\u5f62\u5f0f\u306b\u5408\u308f\u305b\u3066\u304f\u308c\u308b\u306e\u3067\u4fbf\u5229\u3002\n*/\n\n// templateName\u3067\u62e1\u5f35\u5b50\u304c\u7701\u7565\u3055\u308c\u305f\u5834\u5408\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u62e1\u5f35\u5b50\napp.set('view engine', 'ejs');\n\n\n//\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u51e6\u7406\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u5b9f\u884c\n  res.render('index');  //\u3053\u306e\u4f8b\u306e\u5834\u5408index.ejs\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u89e3\u91c8\u3055\u308c\u308b\n    :\n});\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5024\u3092\u57cb\u3081\u8fbc\u3080\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5024\u3092\u57cb\u3081\u8fbc\u3080\u65b9\u6cd5\u306f4\u3064\n\n\n\nresponse.render(templateName, object)\u306eobject\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u6307\u5b9a\n\nresponse.locals.name = value\u3067\u6307\u5b9a\n\napp.locals.name = value\u3067\u6307\u5b9a\n\napp.set(name, value)\u3067\u6307\u5b9a\n\n\n1\u301c3\u306e\u65b9\u6cd5\u3067\u57cb\u3081\u8fbc\u3093\u3060\u5024\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd\n4\u306e\u65b9\u6cd5\u3067\u57cb\u3081\u8fbc\u3093\u3060\u5024\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u306fsettings\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u65b9\u6cd51\n  res.render('index', {title1: 'exposed via res.render'});\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u65b9\u6cd52\n  res.locals.title2 = 'exposed via res.local');\n  res.render('index');\n    :\n});\n\n// \u65b9\u6cd53\napp.locals.title3 = 'exposed via app.local');\n\n// \u65b9\u6cd54\napp.set('title3', 'exposed via app.set');\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5074\uff08ejs\u306e\u4f8b\uff09\n<h1> <%= test1 %> </h1>  <!-- \u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n<h1> <%= test2 %> </h1>  <!-- \u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n<h1> <%= test3 %> </h1>  <!-- \u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n<h1> <%= settings.test3 %> </h1>  <!-- settings\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n\n<!-- \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\n<h1>exposed via res.render</h1>\n<h1>exposed via res.local</h1>\n<h1>exposed via app.local</h1>\n<h1>exposed via app.set</h1>\n-->\n\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3059\u308b\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3059\u308b\u306b\u306fresponse.set(name, value)\u3092\u4f7f\u3046\n\u8907\u6570\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u307e\u3068\u3081\u3066\u6307\u5b9a\u3059\u308b\u5834\u5408\u306fresponse.set\u306e\u5f15\u6570\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\n\nresponse.set\u306e\u5225\u540d\u3068\u3057\u3066response.header\u3092\u4f7f\u3063\u3066\u3082\u826f\u3044\uff08\u540d\u524d\u304c\u9055\u3046\u3060\u3051\u3067\u6a5f\u80fd\u306f\u5168\u304f\u540c\u3058\uff09\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.set('Cache-Control': 'max-age=600');\n  res.set('ETag': '12345');\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5f15\u6570\u306b\u6e21\u3057\u3066\u8907\u6570\u540c\u6642\u306b\u6307\u5b9a\n  res.set({\n    'Cache-Control': 'max-age=600',\n    'ETag': '12345'\n  });\n    :\n});\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u306b\u306fresponse.status(code)\u3092\u4f7f\u3046\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.status(501);\n    :\n});\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306bCookie\u3092\u542b\u3081\u308b\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306bCookie\u3092\u542b\u3081\u308b\u306b\u306fresponse.cookie(name, value[, option])\u3092\u4f7f\u3046\n\nvalue\u306b\u306f\u5024\u3060\u3051\u3067\u306a\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082\u6307\u5b9a\u53ef\u80fd\uff08JSON\u5316\u3057\u3066\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u3055\u308c\u308b\uff09\n\noption\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n\n\n\ndomain: Cookie\u3092\u6709\u52b9\u3068\u3059\u308b\u30c9\u30e1\u30a4\u30f3\uff08\u521d\u671f\u5024\uff1a\u30db\u30b9\u30c8\u306e\u30c9\u30e1\u30a4\u30f3\uff09\n\npath: Cookie\u3092\u6709\u52b9\u3068\u3059\u308b\u30d1\u30b9\uff08\u521d\u671f\u5024\uff1a'/'\uff09\n\nhttpOnly: HTTP\u3060\u3051\u3067\u6709\u52b9\u306b\u3059\u308b\u304b\uff08\u521d\u671f\u5024\uff1afalse\uff09\n\nmaxAge: \u7834\u68c4\u3055\u308c\u308b\u307e\u3067\u306e\u6642\u9593\uff08\u30df\u30ea\u79d2\uff09\u3002\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306fexpire\u5c5e\u6027\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30b7\u30e5\u30ac\u30fc\uff08\u521d\u671f\u5024\uff1asession\uff09\n\nsecure: Cookie\u306b\u7f72\u540d\u3059\u308b\u304b\uff08\u521d\u671f\u5024\uff1afalse\uff09\n\n\n\nsecure\u30aa\u30d7\u30b7\u30e7\u30f3\u3092true\u306b\u3059\u308b\u5834\u5408\u306f\u3001cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u7f72\u540d\u7528\u306e\u9375\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff08cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\u306f\u5225\u9805\u76ee\u53c2\u7167\u306e\u3053\u3068\uff09\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.cookie('cookie_name', 'cookie_value', {maxAge: 900000, httpOnly: true});\n    :\n});\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304b\u3089Cookie\u3092\u53d6\u308a\u9664\u304f\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304b\u3089Cookie\u3092\u53d6\u308a\u9664\u304f\u306b\u306fresponse.clearCookie(name)\u3092\u4f7f\u3046\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.clearCookie('cookie_name');\n    :\n});\n\n\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\n\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u306b\u306fresponse.redirect([status, ] url)\u3092\u4f7f\u3046\n\nstatus\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f302\uff08Found\uff09\u304c\u4f7f\u308f\u308c\u308b\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.redirect(302, \"../login\");\n    :\n});\n\n\n\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3046\n\n\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u306fexpress\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3057\u3066\u4f7f\u3046\u6a5f\u80fd\u306e\u3053\u3068\u3067\u3001connect\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u57fa\u76e4\u3068\u3057\u3066\u3044\u308b\nexpress\u306b\u540c\u68b1\u3055\u308c\u3066\u3044\u308b\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306fexpress\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3001\u307e\u305f\u306fconnect\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u306e\u3053\u3068\n\u5229\u7528\u3059\u308b\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306fapp.use([path, ] middlewareFunc)\u3067\u8aad\u307f\u8fbc\u3080\n\npath\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3068path\u304c\u4e00\u81f4\u3057\u305f\u5834\u5408\u306e\u307f\u305d\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5229\u7528\u3055\u308c\u308b\u3002path\u304c\u7701\u7565\u3055\u308c\u305f\u5834\u5408\u306f'/'\u3068\u3057\u3066\u6271\u308f\u308c\u308b\n\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u5b9f\u614b\u306fmiddlewareFunc\u95a2\u6570\u3067\u3001\u305d\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306ffunction(req, res, next)\n\n\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306fapp.use\u3055\u308c\u305f\u9806\u756a\u306b\u9069\u7528\u3055\u308c\u308b\uff08\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306e\u9069\u7528\u9806\u5e8f\u3068\u540c\u3058\u8003\u3048\u65b9\uff09\n\napp.use(middlewareFactory(someOption));\n\n/*\n\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\uff08\u95a2\u6570\u3092return\u3059\u308b\u95a2\u6570\uff09\u3092\u4f7f\u3063\u3066\u751f\u6210\u3059\u308b\u3082\u306e\u304c\u591a\u3044\u3002\u3053\u306e\u4f8b\u306e\u5834\u5408\u3001middlewareFactory\u95a2\u6570\u306ffunction(req, res, next)\u3068\u3044\u3046\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u6301\u3063\u305f\u95a2\u6570\u3092\u8fd4\u3059\n*/\n\n\nstatic\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\n\n\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3084CSS\u30d5\u30a1\u30a4\u30eb\u3001JavaScript\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306estatic\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\u306b\u306f\u3001static\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\nstatic\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306fexpress.static(path[, option])\n\n\npath\u306b\u306f\u3001static\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3057\u305f\u3044\u30d5\u30a9\u30eb\u30c0 / \u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\u3092\u6307\u5b9a\n\noption\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n\n\n\nmaxAge:  Browser cache maxAge in milliseconds. defaults to 0\n\nhidden:  Allow transfer of hidden files. defaults to false\n\nredirect:  Redirect to trailing \"/\" when the pathname is a dir. defaults to true\n\nindex:  Default file name, defaults to 'index.html'\n\n\n\napp.use(express.static('path_to_somewhere', {hidden: true}));\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u542b\u307e\u308c\u308bCookie\u3092\u8aad\u307f\u51fa\u3059\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u542b\u307e\u308c\u308bCookie\u3092\u8aad\u307f\u51fa\u3059\u306b\u306f\u3001cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3046\uff08\u3053\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f\u5c06\u6765\u7684\u306bdeprecated\u306b\u306a\u308b\u3068\u4e88\u544a\u3055\u308c\u3066\u304a\u308a\u3001cookies\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306b\u7f6e\u304d\u63db\u308f\u308b\u4e88\u5b9a\uff09\ncookieParser\u3092\u4f7f\u3046\u3068\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u542b\u307e\u308c\u308bCookie\u306e\u60c5\u5831\u304crequest.cookies[]\u30e1\u30f3\u30d0\u306b\u683c\u7d0d\u3055\u308c\u308b\ncookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306fexpress.cookieParser([secret])\n\n\nsecret\u306b\u306f\u7f72\u540d\u4ed8\u304dCookie\u7528\u306e\u9375\u3092\u6307\u5b9a\u3059\u308b\n\napp.use(express.cookieParser('some_secret'));\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u4f7f\u3046\u306b\u306f\u3001session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\ncookie\u3092\u5229\u7528\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092\u7ba1\u7406\u3059\u308b\u306e\u3067cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3082\u5fc5\u9808\nsession\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3046\u3068\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u4fdd\u6301\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8request.session\u304c\u751f\u6210\u3055\u308c\u308b\n\nrequest.session\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u305f\u308a\u7834\u68c4\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\u8a73\u7d30\u306fconnect\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u306e\u3053\u3068\nsession\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306fexpress.session([option])\n\n\noption\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n\n\n\nkey: cookie name defaulting to connect.sid\n\nstore: session store instance\n\nsecret: session cookie is signed with this secret to prevent tampering\n\ncookie: session cookie settings, defaulting to { path: '/', httpOnly: true, maxAge: null }\n\nproxy: trust the reverse proxy when setting secure cookies (via \"x-forwarded-proto\")\n\n\n\n// \u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\napp.use(express.cookieParser());\napp.use(express.session({secret: 'secret_for_sign'}));\n\n// request.session\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5229\u7528\u3059\u308b\uff08\u3053\u306e\u4f8b\u3067\u306f\u8a2a\u554f\u56de\u6570\u3092\u8a18\u9332\u3057\u3066\u3044\u308b\uff09\napp.get('path_to_somewhere', function(req, res) {\n  if (req.session.counter) {\n    res.end('you already visit this page ' + req.session.counter + '-th time');\n    req.session.counter++;\n  }\n  else {\n    req.session.counter = 1;\n    res.end('this is first time you visit this page!');\n  }\n});\n\n\n\u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u308b\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u95a2\u6570\u306e\u4e2d\u3067\u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u308b\u306b\u306f\u3001\u4f8b\u5916\u3092throw\u3059\u308b\u3001\u307e\u305f\u306fnext()\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u5f15\u6570\u306b\u4f8b\u5916\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\n\n// \u4f8b\u5916\u3092throw\u3059\u308b\napp.get('path_to_somewhere', function(req, res) {\n    :\n  throw new Error('this is error');\n});\n\n// next()\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u547c\u3073\u51fa\u3059\napp.get('path_to_somewhere', function(req, res) {\n    :\n  next(new Error('this is error');\n});\n\n\n\u30a8\u30e9\u30fc\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\n\n\u30a8\u30e9\u30fc\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306f\u3001app.use()\u3092\u4f7f\u3063\u3066\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u3092\u6307\u5b9a\u3059\u308b\uff08\u3064\u307e\u308a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3082\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u540c\u3058\u6271\u3044\uff09\n\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306ffunction(err, req, res, next)\u3067\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\uff08\u305d\u306e\u4ed6\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u306f\u30b7\u30b0\u30cd\u30c1\u30e3\u304c\u7570\u306a\u308b\u3002\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306b\u306ferr\u304c\u542b\u307e\u308c\u306a\u3044\uff09\n\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u306e\u4e2d\u3067next()\u3092\u5f15\u6570\u306a\u3057\u3067\u547c\u3073\u51fa\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u4ed6\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306b\u51e6\u7406\u304c\u79fb\u308b\n\nnext()\u3092err\u5f15\u6570\u4ed8\u304d\u3067\u547c\u3073\u51fa\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u4ed6\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u3060\u3051\u304c\u5b9f\u884c\u3055\u308c\u308b\uff08\u305d\u306e\u4ed6\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f\u5b9f\u884c\u3055\u308c\u306a\u3044\uff09\n\napp.use(function(err, req, res, next) {\n    :\n  next(err);  // \u3082\u3046\u4e00\u3064\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u51e6\u7406\u3092\u6e21\u3059\n});\n\napp.use(function(err, req, res, next) {\n    :\n  res.status(500);\n  res.render('500');\n});\n\n\nCSRF\u5bfe\u7b56\u3059\u308b\n\ncsrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u3092\u884c\u3046\n\n\n\u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\uff08csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u81ea\u52d5\u3067\u884c\u3046\uff09\nForm\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u969b\u306b\u30c8\u30fc\u30af\u30f3\u3092\u57cb\u3081\u8fbc\u3080\uff08\u8981\u5b9f\u88c5\uff09\nForm\u304b\u3089\u306ePOST\u306b\u542b\u307e\u308c\u308b\u30c8\u30fc\u30af\u30f3\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3092\u6bd4\u8f03\u3057\u3001\u7570\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u308b\uff08csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u81ea\u52d5\u3067\u884c\u3046\uff09\n\u30a8\u30e9\u30fc\u3092\u9069\u5207\u306b\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\uff08\u8981\u5b9f\u88c5\u3001\u8a73\u7d30\u306f\u5225\u9805\u76ee\u53c2\u7167\u306e\u3053\u3068\uff09\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u306e\u3067cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3082\u5fc5\u9808\ncsrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306fexpress.csrf()\n\n\n// session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\napp.use(express.cookieParser());\napp.use(express.session({secret: 'secret_to_sign'}));\n\n// csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\napp.use(express.csrf());\n\n// \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306e\u5b9f\u88c5\napp.use(function(err, req, res, next) {\n    :\n  // something\n    :\n});\n\n// \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\napp.get('path_to_form', function(req, res, next) {\n    :\n  // \u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\u3055\u308c\u305ftoken\u3092Form\u306b\u57cb\u3081\u8fbc\u3080\n  res.local.token = req.session._csrf;\n  res.render('index');\n});\n\n\nView\u5074\uff08ejs\u306e\u4f8b\uff09\n<form action='/form', method>\n  <input type='hidden' name='_csrf' value='<%=token%>'/>\n</form>\n\n\n\n\u30a2\u30af\u30bb\u30b9\u30ed\u30b0 / \u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u6b8b\u3059\n\n\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3084\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u6b8b\u3059\u306b\u306f\u3001logger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\nlogger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306fexpress.logger([string | function | option])\n\n\u5f15\u6570\u3067\u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3084\u51fa\u529b\u5148\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\u8a73\u7d30\u306flogger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\u306e\u3053\u3068\n\u5f15\u6570\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001Apache\u3068\u540c\u7b49\u306e\u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067stdout\u306b\u51fa\u529b\u3055\u308c\u308b\n\napp.use(express.logger());\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3068\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u5b9f\u884c\u9806\u5e8f\u3092\u660e\u793a\u3059\u308b\n\n\u539f\u5247\u3068\u3057\u3066\u3001\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3084\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u66f8\u304b\u308c\u305f\u9806\u756a\u306b\u5b9f\u884c\u3055\u308c\u308b\n\u305f\u3060\u3057\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\uff08app.get()\u3084app.post()\uff09\u306f\u3001express\u5185\u90e8\u3067\u4e00\u3064\u306b\u307e\u3068\u3081\u3089\u308c\u3001\u4e00\u3064\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u3088\u3046\u306b\u6271\u308f\u308c\u308b\uff08\u3053\u3053\u3067\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u547c\u3076\uff09\n\u3053\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u306f\u3001\u6700\u521d\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u304c\u66f8\u304b\u308c\u305f\u7b87\u6240\u3068\u306a\u308b\uff08\u4ee5\u4e0b\u306e\u4f8b\u53c2\u7167\uff09\n\n// \u2460\u301c\u2465\u306e\u9806\u5e8f\u3067\u5b9f\u884c\u3055\u308c\u308b\n\n// \u6700\u521d\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\n// \u3053\u306e\u4f4d\u7f6e\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5165\u308b\napp.get('path_to_somewhere', function(req, res) { // \u2460\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2461\n    :\n});\n\napp.use(someMiddleware); // \u2464\napp.use(otherMiddleware); // \u2465\n\napp.get('path_to_somewhere', function(req, res) { // \u2462\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2463\n    :\n});\n\n\n\u3053\u306e\u307e\u307e\u3067\u306f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5168\u4f53\u3092\u898b\u306a\u3051\u308c\u3070\u5b9f\u884c\u9806\u5e8f\u304c\u5206\u304b\u3089\u306a\u3044\uff08\u7279\u306b\u5927\u898f\u6a21\u306a\u30b7\u30b9\u30c6\u30e0\u306e\u5834\u5408\uff09\n\u305d\u3053\u3067\u3001\u5b9f\u884c\u9806\u5e8f\u3092\u898b\u901a\u3057\u826f\u304f\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306bapp.use(app.router)\u3092\u4f7f\u3046\u3068\u3088\u3044\n\napp.use(app.router)\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u305d\u306e\u3082\u306e\u3067\u3042\u308a\u3001\u3053\u308c\u304c\u66f8\u304b\u308c\u305f\u4f4d\u7f6e\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5165\u308b\u3053\u3068\u306b\u306a\u308b\n\n// \u2460\u301c\u2465\u306e\u9806\u5e8f\u3067\u9069\u7528\u3055\u308c\u308b\n\napp.get('path_to_somewhere', function(req, res) { // \u2462\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2463\n    :\n});\n\n//\n// \u5168\u4f53\u3092\u898b\u306a\u304f\u3066\u3082\u3053\u3053\u3060\u3051\u898b\u308c\u3070\u5b9f\u884c\u9806\u5e8f\u304c\u5224\u308b\n//\napp.use(someMiddleware); // \u2460\napp.use(otherMiddleware); // \u2461\napp.use(app.router); // \u3053\u306e\u4f4d\u7f6e\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5165\u308b\n\napp.get('path_to_somewhere', function(req, res) { // \u2464\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2465\n    :\n});\n\n\n\u5168\u3066\u306eHTTP Verb\u306b\u4e00\u81f4\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u6307\u5b9a\u3059\u308b\n\nHTTP Verb\u6bce\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306f\u524d\u8ff0\u306e\u901a\u308a\u3060\u304c\u3001\u5168\u3066\u306eVerb\u306b\u5bfe\u3057\u3066\u9069\u7528\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306fapp.all()\u3067\u884c\u3046\n\napp.all('path_to_somewhere', function(req, res, next) {\n    :\n});\n\n\n\u30b3\u30f3\u30c6\u30f3\u30c4\u3092gzip / deflat\u3067\u5727\u7e2e\u3057\u3066\u8fd4\u3059\n\ncompress\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\n\napp.use(express.compress());\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ea\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ea\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u306b\u306f\u3001directory\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u5229\u7528\u3059\u308b\ndirecotory\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306fexpress.directory(path [,option])\n\n\npath\u306b\u306f\u3001directory\u3092\u516c\u958b\u3057\u305f\u3044\u30d5\u30a9\u30eb\u30c0\u3078\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n\noption\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n\n\n\nhidden:  display hidden (dot) files. Defaults to false.\n\nicons:  display icons. Defaults to false.\n\nfilter:  Apply this filter function to files. Defaults to false.\n\n\n\napp.use(express.directory('path_to_somewhere'), {hidden: false});\n\n\nfavicon\u3092\u6307\u5b9a\u3059\u308b\n\nfavicon\u304cstatic\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u516c\u958b\u3055\u308c\u3066\u3044\u308c\u3070\u4f55\u3082\u3057\u306a\u304f\u3066\u3082\u3088\u3044\n\u305f\u3060\u3057\u3001favicon\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30ed\u30b0\u306b\u6b8b\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u3001favicon\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3088\u3044\n\n// \u5148\u306bfavicon\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u9069\u7528\napp.use(express.favicon('path_to_favicon'));\n\n// \u305d\u306e\u5f8clogger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u9069\u7528\napp.use(express.logger());\n\n\n\u30c7\u30d0\u30c3\u30b0\u95a2\u9023\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3059\u308b\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u306fapp.routes\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\n\u3053\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092console.log\u306b\u51fa\u529b\u3059\u308c\u3070\u3001\u767b\u9332\u3055\u308c\u305f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3067\u304d\u308b\n\nconsole.log(app.routes);\n\n/* \u51fa\u529b\u306e\u4f8b\n{ get: \n   [ { path: '/',\n       method: 'get',\n       callbacks: [Object],\n       keys: [],\n       regexp: /^\\/\\/?$/i },\n   { path: '/user/:id',\n       method: 'get',\n       callbacks: [Object],\n       keys: [{ name: 'id', optional: false }],\n       regexp: /^\\/user\\/(?:([^\\/]+?))\\/?$/i } ],\ndelete: \n   [ { path: '/user/:id',\n       method: 'delete',\n       callbacks: [Object],\n       keys: [Object],\n       regexp: /^\\/user\\/(?:([^\\/]+?))\\/?$/i } ] }\n*/\n\n\nexpress\u5185\u90e8\u306e\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\n\n\nDEBUG\u74b0\u5883\u5909\u6570\u306bexpress:*\u3092\u8a2d\u5b9a\u3057\u305f\u4e0a\u3067node\u3092\u8d77\u52d5\u3059\u308c\u3070\u3001\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u308b\n\n$ DEBUG=express:* node app.js\n\n# \u51fa\u529b\u306e\u4f8b\n# express:application booting in development mode +0ms\n# express:router defined get /hello.txt +0ms\n# express:router defined get /hello.txt +1ms\n\n\nexpress\u306e\u4f7f\u3044\u65b9\u3092\u9006\u5f15\u304d\u5f62\u5f0f\u3067\u307e\u3068\u3081\u3066\u307f\u305f\u3002\u53c2\u8003\u306b\u3057\u305f\u306e\u306f2014\u5e742\u670820\u65e5\u6642\u70b9\uff08express 3.4.8\u6642\u70b9\uff09\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304a\u3088\u3073\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3001\u30b5\u30f3\u30d7\u30eb\u306a\u3069\u3002\n\n- [\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://expressjs.com/api.html)\n- [\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9](https://github.com/visionmedia/express)\n- [\u30b5\u30f3\u30d7\u30eb](https://github.com/visionmedia/express/tree/master/examples)\n\n## \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\n- \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\uff08i.e. \u30d1\u30b9\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u95a2\u6570\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u306b\u306f\uff09```app.get(path, func)```\u3084```app.post(path, func)```\u306a\u3069\u5404HTTP Verb\u306b\u5bfe\u5fdc\u3057\u305f\u95a2\u6570\u3092\u4f7f\u3046\n- \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306f\u66f8\u304b\u308c\u305f\u9806\u756a\u306b\u8a55\u4fa1\u3055\u308c\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3068```path```\u306e\u4e00\u81f4\u3057\u305f\u3082\u306e\u304c\u9069\u7528\u3055\u308c\u308b\n- ```path```\u306f\u6587\u5b57\u5217\u307e\u305f\u306f\u6b63\u898f\u8868\u73fe\u3092\u6307\u5b9a\u53ef\u80fd\n- ```func```\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306f```function(req, res[, next])```\n- ```next```\u306f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\n    - \u5f15\u6570\u7121\u3057```next()```\u3067\u547c\u3073\u51fa\u3059\u3068\u3001\u6b21\u306b\u4e00\u81f4\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306b\u51e6\u7406\u304c\u79fb\u308b\n    - \u5f15\u6570\u6709\u308a```next(object)```\u3067\u547c\u3073\u51fa\u3059\u3068\u3001\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u306e\u95a2\u6570\u306b\u51e6\u7406\u304c\u79fb\u308b\uff08\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306b\u3064\u3044\u3066\u306f[\u5225\u9805\u76ee](#2-14)\u53c2\u7167\u306e\u3053\u3068\uff09\n\n```javascript\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // something\n    :\n});\n\napp.post(/^\\/items\\/[0-9]+\\.html$/, function(req, res) {\n    :\n  // something\n    :\n});\n\n/*\n  app.get()\u3001app.post()\u4ee5\u5916\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u95a2\u6570\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\u305d\u308c\u305e\u308c\u540c\u540d\u306eHTTP Verb\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n\n  app.put()\n  app.head()\n  app.delete()\n  app.options()\n  app.trace()\n  app.copy()\n  app.lock()\n  app.mkcol()\n  app.move()\n  app.propfind()\n  app.proppatch()\n  app.unlock()\n  app.report()\n  app.mkactivity()\n  app.checkout()\n  app.merge()\n  app.m-search()\n  app.notify()\n  app.subscribe()\n  app.unsubscribe()\n  app.patch()\n  app.search()\n*/\n```\n\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\n- \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306f```response.render(templateName)```\u3092\u4f7f\u3046\n- ```templateName```\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u79f0\u3067\u3042\u308a\u3001```app.set('views', path)```\u3067\u6307\u5b9a\u3057\u305f\u30d1\u30b9\u76f4\u4e0b\u306b\u7f6e\u304f\u5fc5\u8981\u304c\u3042\u308b\n- ```templateName```\u3067\u306f\u62e1\u5f35\u5b50\u3092\u7701\u7565\u53ef\u80fd\u3002\u7701\u7565\u3057\u305f\u5834\u5408```app.set('view engine', ext)```\u3067\u6307\u5b9a\u3057\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u62e1\u5f35\u5b50\u3067\u3042\u308b\u3068\u89e3\u91c8\u3055\u308c\u308b\n- \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u5229\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306f```app.engine(ext, engineFunc)```\u3067\u767b\u9332\u3059\u308b\n\n```javascript\n// \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u30d1\u30b9\u3092\u8a2d\u5b9a\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f \"process.cwd() + '/views'\"\napp.set('views', 'path_to_somewhere');\n\n// \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u5229\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u767b\u9332\nvar jadeEngine = require('jade').someFunc;\napp.engine('jade', jadeEngine);\n\nvar ejsEngine = require('ejs').someFunc;\napp.engine('ejs', ejsEngine);\n/*\napp.engine()\u306e\u7b2c\u4e8c\u5f15\u6570\u306ffunction(path, options, callback)\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u6301\u3064\u5fc5\u8981\u304c\u3042\u308b\u3002consolidate.js(https://github.com/visionmedia/consolidate.js)\u3092\u4f7f\u3046\u3068\u69d8\u3005\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u3053\u306e\u5f62\u5f0f\u306b\u5408\u308f\u305b\u3066\u304f\u308c\u308b\u306e\u3067\u4fbf\u5229\u3002\n*/\n\n// templateName\u3067\u62e1\u5f35\u5b50\u304c\u7701\u7565\u3055\u308c\u305f\u5834\u5408\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u62e1\u5f35\u5b50\napp.set('view engine', 'ejs');\n\n\n//\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u51e6\u7406\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u5b9f\u884c\n  res.render('index');  //\u3053\u306e\u4f8b\u306e\u5834\u5408index.ejs\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u89e3\u91c8\u3055\u308c\u308b\n    :\n});\n```\n\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5024\u3092\u57cb\u3081\u8fbc\u3080\n- \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5024\u3092\u57cb\u3081\u8fbc\u3080\u65b9\u6cd5\u306f4\u3064\n    1. ```response.render(templateName, object)```\u306e```object```\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u6307\u5b9a\n    1. ```response.locals.name = value```\u3067\u6307\u5b9a\n    1. ```app.locals.name = value```\u3067\u6307\u5b9a\n    1. ```app.set(name, value)```\u3067\u6307\u5b9a\n- 1\u301c3\u306e\u65b9\u6cd5\u3067\u57cb\u3081\u8fbc\u3093\u3060\u5024\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd\n- 4\u306e\u65b9\u6cd5\u3067\u57cb\u3081\u8fbc\u3093\u3060\u5024\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u306f```settings```\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd\n\n```javascript\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u65b9\u6cd51\n  res.render('index', {title1: 'exposed via res.render'});\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u65b9\u6cd52\n  res.locals.title2 = 'exposed via res.local');\n  res.render('index');\n    :\n});\n\n// \u65b9\u6cd53\napp.locals.title3 = 'exposed via app.local');\n\n// \u65b9\u6cd54\napp.set('title3', 'exposed via app.set');\n```\n\n```html:\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5074\uff08ejs\u306e\u4f8b\uff09\n<h1> <%= test1 %> </h1>  <!-- \u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n<h1> <%= test2 %> </h1>  <!-- \u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n<h1> <%= test3 %> </h1>  <!-- \u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n<h1> <%= settings.test3 %> </h1>  <!-- settings\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u3057\u3066\u53c2\u7167\u53ef\u80fd -->\n\n<!-- \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\n<h1>exposed via res.render</h1>\n<h1>exposed via res.local</h1>\n<h1>exposed via app.local</h1>\n<h1>exposed via app.set</h1>\n-->\n```\n\n## \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3059\u308b\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f```response.set(name, value)```\u3092\u4f7f\u3046\n- \u8907\u6570\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u307e\u3068\u3081\u3066\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f```response.set```\u306e\u5f15\u6570\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\n- ```response.set```\u306e\u5225\u540d\u3068\u3057\u3066```response.header```\u3092\u4f7f\u3063\u3066\u3082\u826f\u3044\uff08\u540d\u524d\u304c\u9055\u3046\u3060\u3051\u3067\u6a5f\u80fd\u306f\u5168\u304f\u540c\u3058\uff09\n\n```javascript\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.set('Cache-Control': 'max-age=600');\n  res.set('ETag': '12345');\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) {\n    :\n  // \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5f15\u6570\u306b\u6e21\u3057\u3066\u8907\u6570\u540c\u6642\u306b\u6307\u5b9a\n  res.set({\n    'Cache-Control': 'max-age=600',\n    'ETag': '12345'\n  });\n    :\n});\n```\n\n\n## \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f```response.status(code)```\u3092\u4f7f\u3046\n\n```javascript\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.status(501);\n    :\n});\n```\n\n\n## \u30ec\u30b9\u30dd\u30f3\u30b9\u306bCookie\u3092\u542b\u3081\u308b\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u306bCookie\u3092\u542b\u3081\u308b\u306b\u306f```response.cookie(name, value[, option])```\u3092\u4f7f\u3046\n- ```value```\u306b\u306f\u5024\u3060\u3051\u3067\u306a\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082\u6307\u5b9a\u53ef\u80fd\uff08JSON\u5316\u3057\u3066\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u3055\u308c\u308b\uff09\n- ```option```\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n    - *domain*: Cookie\u3092\u6709\u52b9\u3068\u3059\u308b\u30c9\u30e1\u30a4\u30f3\uff08\u521d\u671f\u5024\uff1a\u30db\u30b9\u30c8\u306e\u30c9\u30e1\u30a4\u30f3\uff09\n    - *path*: Cookie\u3092\u6709\u52b9\u3068\u3059\u308b\u30d1\u30b9\uff08\u521d\u671f\u5024\uff1a'/'\uff09\n    - *httpOnly*: HTTP\u3060\u3051\u3067\u6709\u52b9\u306b\u3059\u308b\u304b\uff08\u521d\u671f\u5024\uff1afalse\uff09\n    - *maxAge*: \u7834\u68c4\u3055\u308c\u308b\u307e\u3067\u306e\u6642\u9593\uff08\u30df\u30ea\u79d2\uff09\u3002\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306fexpire\u5c5e\u6027\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30b7\u30e5\u30ac\u30fc\uff08\u521d\u671f\u5024\uff1asession\uff09\n    - *secure*: Cookie\u306b\u7f72\u540d\u3059\u308b\u304b\uff08\u521d\u671f\u5024\uff1afalse\uff09\n- ```secure```\u30aa\u30d7\u30b7\u30e7\u30f3\u3092```true```\u306b\u3059\u308b\u5834\u5408\u306f\u3001cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u7f72\u540d\u7528\u306e\u9375\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff08cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\u306f[\u5225\u9805\u76ee](#2-11)\u53c2\u7167\u306e\u3053\u3068\uff09\n\n```javascript\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.cookie('cookie_name', 'cookie_value', {maxAge: 900000, httpOnly: true});\n    :\n});\n```\n\n\n## \u30ec\u30b9\u30dd\u30f3\u30b9\u304b\u3089Cookie\u3092\u53d6\u308a\u9664\u304f\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u304b\u3089Cookie\u3092\u53d6\u308a\u9664\u304f\u306b\u306f```response.clearCookie(name)```\u3092\u4f7f\u3046\n\n```javascript\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.clearCookie('cookie_name');\n    :\n});\n```\n\n\n## \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\n- \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u306b\u306f```response.redirect([status, ] url)```\u3092\u4f7f\u3046\n- ```status```\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f302\uff08Found\uff09\u304c\u4f7f\u308f\u308c\u308b\n\n```javascript\napp.get('path_to_somewhere', function(req, res) {\n    :\n  res.redirect(302, \"../login\");\n    :\n});\n```\n\n\n## \u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3046\n- \u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u306fexpress\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3057\u3066\u4f7f\u3046\u6a5f\u80fd\u306e\u3053\u3068\u3067\u3001[connect](http://www.senchalabs.org/connect/)\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u57fa\u76e4\u3068\u3057\u3066\u3044\u308b\n- express\u306b\u540c\u68b1\u3055\u308c\u3066\u3044\u308b\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f[express\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://expressjs.com/api.html#middleware)\u3001\u307e\u305f\u306f[connect\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://www.senchalabs.org/connect/)\u3092\u53c2\u7167\u306e\u3053\u3068\n- \u5229\u7528\u3059\u308b\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f```app.use([path, ] middlewareFunc)```\u3067\u8aad\u307f\u8fbc\u3080\n- ```path```\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3068```path```\u304c\u4e00\u81f4\u3057\u305f\u5834\u5408\u306e\u307f\u305d\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5229\u7528\u3055\u308c\u308b\u3002```path```\u304c\u7701\u7565\u3055\u308c\u305f\u5834\u5408\u306f```'/'```\u3068\u3057\u3066\u6271\u308f\u308c\u308b\n- \u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u5b9f\u614b\u306f```middlewareFunc```\u95a2\u6570\u3067\u3001\u305d\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306f```function(req, res, next)```\n- \u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f```app.use```\u3055\u308c\u305f\u9806\u756a\u306b\u9069\u7528\u3055\u308c\u308b\uff08\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306e\u9069\u7528\u9806\u5e8f\u3068\u540c\u3058\u8003\u3048\u65b9\uff09\n\n```javascript\napp.use(middlewareFactory(someOption));\n\n/*\n\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\uff08\u95a2\u6570\u3092return\u3059\u308b\u95a2\u6570\uff09\u3092\u4f7f\u3063\u3066\u751f\u6210\u3059\u308b\u3082\u306e\u304c\u591a\u3044\u3002\u3053\u306e\u4f8b\u306e\u5834\u5408\u3001middlewareFactory\u95a2\u6570\u306ffunction(req, res, next)\u3068\u3044\u3046\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u6301\u3063\u305f\u95a2\u6570\u3092\u8fd4\u3059\n*/\n```\n\n\n## static\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\n- \u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3084CSS\u30d5\u30a1\u30a4\u30eb\u3001JavaScript\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306estatic\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\u306b\u306f\u3001static\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\n- static\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f```express.static(path[, option])```\n- ```path```\u306b\u306f\u3001static\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3057\u305f\u3044\u30d5\u30a9\u30eb\u30c0 / \u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\u3092\u6307\u5b9a\n- ```option```\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n    - *maxAge*:  Browser cache maxAge in milliseconds. defaults to 0\n    - *hidden*:  Allow transfer of hidden files. defaults to false\n    - *redirect*:  Redirect to trailing \"/\" when the pathname is a dir. defaults to true\n    - *index*:  Default file name, defaults to 'index.html'\n\n```javascript\napp.use(express.static('path_to_somewhere', {hidden: true}));\n```\n\n## \u30ea\u30af\u30a8\u30b9\u30c8\u306b\u542b\u307e\u308c\u308bCookie\u3092\u8aad\u307f\u51fa\u3059\n- \u30ea\u30af\u30a8\u30b9\u30c8\u306b\u542b\u307e\u308c\u308bCookie\u3092\u8aad\u307f\u51fa\u3059\u306b\u306f\u3001cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3046\uff08\u3053\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f\u5c06\u6765\u7684\u306bdeprecated\u306b\u306a\u308b\u3068\u4e88\u544a\u3055\u308c\u3066\u304a\u308a\u3001cookies\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306b\u7f6e\u304d\u63db\u308f\u308b\u4e88\u5b9a\uff09\n- cookieParser\u3092\u4f7f\u3046\u3068\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u542b\u307e\u308c\u308bCookie\u306e\u60c5\u5831\u304c```request.cookies[]```\u30e1\u30f3\u30d0\u306b\u683c\u7d0d\u3055\u308c\u308b\n- cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f```express.cookieParser([secret])```\n- ```secret```\u306b\u306f\u7f72\u540d\u4ed8\u304dCookie\u7528\u306e\u9375\u3092\u6307\u5b9a\u3059\u308b\n\n```javascript\napp.use(express.cookieParser('some_secret'));\n```\n\n## \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\n- \u30bb\u30c3\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u4f7f\u3046\u306b\u306f\u3001session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\n- cookie\u3092\u5229\u7528\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092\u7ba1\u7406\u3059\u308b\u306e\u3067cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3082\u5fc5\u9808\n- session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3046\u3068\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u4fdd\u6301\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8```request.session```\u304c\u751f\u6210\u3055\u308c\u308b\n- ```request.session```\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u305f\u308a\u7834\u68c4\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\u8a73\u7d30\u306f[connect\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://www.senchalabs.org/connect/session.html)\u3092\u53c2\u7167\u306e\u3053\u3068\n- session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f```express.session([option])```\n- ```option```\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n    - *key*: cookie name defaulting to connect.sid\n    - *store*: session store instance\n    - *secret*: session cookie is signed with this secret to prevent tampering\n    - *cookie*: session cookie settings, defaulting to { path: '/', httpOnly: true, maxAge: null }\n    - *proxy*: trust the reverse proxy when setting secure cookies (via \"x-forwarded-proto\")\n\n```javascript\n// \u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\napp.use(express.cookieParser());\napp.use(express.session({secret: 'secret_for_sign'}));\n\n// request.session\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5229\u7528\u3059\u308b\uff08\u3053\u306e\u4f8b\u3067\u306f\u8a2a\u554f\u56de\u6570\u3092\u8a18\u9332\u3057\u3066\u3044\u308b\uff09\napp.get('path_to_somewhere', function(req, res) {\n  if (req.session.counter) {\n    res.end('you already visit this page ' + req.session.counter + '-th time');\n    req.session.counter++;\n  }\n  else {\n    req.session.counter = 1;\n    res.end('this is first time you visit this page!');\n  }\n});\n```\n\n\n## \u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u308b\n- \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u95a2\u6570\u306e\u4e2d\u3067\u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u308b\u306b\u306f\u3001\u4f8b\u5916\u3092throw\u3059\u308b\u3001\u307e\u305f\u306f```next()```\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u5f15\u6570\u306b\u4f8b\u5916\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\n\n```javascript\n// \u4f8b\u5916\u3092throw\u3059\u308b\napp.get('path_to_somewhere', function(req, res) {\n    :\n  throw new Error('this is error');\n});\n\n// next()\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u547c\u3073\u51fa\u3059\napp.get('path_to_somewhere', function(req, res) {\n    :\n  next(new Error('this is error');\n});\n```\n\n\n## \u30a8\u30e9\u30fc\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\n- \u30a8\u30e9\u30fc\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306f\u3001```app.use()```\u3092\u4f7f\u3063\u3066\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u3092\u6307\u5b9a\u3059\u308b\uff08\u3064\u307e\u308a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3082\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u540c\u3058\u6271\u3044\uff09\n- \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306f```function(err, req, res, next)```\u3067\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\uff08\u305d\u306e\u4ed6\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u306f\u30b7\u30b0\u30cd\u30c1\u30e3\u304c\u7570\u306a\u308b\u3002\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306b\u306f```err```\u304c\u542b\u307e\u308c\u306a\u3044\uff09\n- \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u306e\u4e2d\u3067```next()```\u3092\u5f15\u6570\u306a\u3057\u3067\u547c\u3073\u51fa\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u4ed6\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306b\u51e6\u7406\u304c\u79fb\u308b\n- ```next()```\u3092err\u5f15\u6570\u4ed8\u304d\u3067\u547c\u3073\u51fa\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u4ed6\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u7528\u95a2\u6570\u3060\u3051\u304c\u5b9f\u884c\u3055\u308c\u308b\uff08\u305d\u306e\u4ed6\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306f\u5b9f\u884c\u3055\u308c\u306a\u3044\uff09\n\n```javascript\napp.use(function(err, req, res, next) {\n    :\n  next(err);  // \u3082\u3046\u4e00\u3064\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u51e6\u7406\u3092\u6e21\u3059\n});\n\napp.use(function(err, req, res, next) {\n    :\n  res.status(500);\n  res.render('500');\n});\n```\n\n\n## CSRF\u5bfe\u7b56\u3059\u308b\n- csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u3092\u884c\u3046\n    - \u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\uff08csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u81ea\u52d5\u3067\u884c\u3046\uff09\n    - Form\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u969b\u306b\u30c8\u30fc\u30af\u30f3\u3092\u57cb\u3081\u8fbc\u3080\uff08\u8981\u5b9f\u88c5\uff09\n    - Form\u304b\u3089\u306ePOST\u306b\u542b\u307e\u308c\u308b\u30c8\u30fc\u30af\u30f3\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3092\u6bd4\u8f03\u3057\u3001\u7570\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u30a8\u30e9\u30fc\u3092\u767a\u751f\u3055\u305b\u308b\uff08csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u81ea\u52d5\u3067\u884c\u3046\uff09\n    - \u30a8\u30e9\u30fc\u3092\u9069\u5207\u306b\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\uff08\u8981\u5b9f\u88c5\u3001\u8a73\u7d30\u306f[\u5225\u9805\u76ee](#2-14)\u53c2\u7167\u306e\u3053\u3068\uff09\n- \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u306e\u3067cookieParser\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3082\u5fc5\u9808\n- csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f```express.csrf()```\n\n```javascript\n// session\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\napp.use(express.cookieParser());\napp.use(express.session({secret: 'secret_to_sign'}));\n\n// csrf\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u8aad\u307f\u8fbc\u307f\napp.use(express.csrf());\n\n// \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306e\u5b9f\u88c5\napp.use(function(err, req, res, next) {\n    :\n  // something\n    :\n});\n\n// \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\napp.get('path_to_form', function(req, res, next) {\n    :\n  // \u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\u3055\u308c\u305ftoken\u3092Form\u306b\u57cb\u3081\u8fbc\u3080\n  res.local.token = req.session._csrf;\n  res.render('index');\n});\n```\n\n```html:View\u5074\uff08ejs\u306e\u4f8b\uff09\n<form action='/form', method>\n  <input type='hidden' name='_csrf' value='<%=token%>'/>\n</form>\n```\n\n\n## \u30a2\u30af\u30bb\u30b9\u30ed\u30b0 / \u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u6b8b\u3059\n- \u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3084\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u6b8b\u3059\u306b\u306f\u3001logger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\n- logger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f```express.logger([string | function | option])```\n- \u5f15\u6570\u3067\u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3084\u51fa\u529b\u5148\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\u8a73\u7d30\u306f[logger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30de\u30cb\u30e5\u30a2\u30eb](http://www.senchalabs.org/connect/logger.html)\u3092\u53c2\u7167\u306e\u3053\u3068\n- \u5f15\u6570\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001Apache\u3068\u540c\u7b49\u306e\u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067stdout\u306b\u51fa\u529b\u3055\u308c\u308b\n\n```javascript\napp.use(express.logger());\n```\n\n## \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3068\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u5b9f\u884c\u9806\u5e8f\u3092\u660e\u793a\u3059\u308b\n- \u539f\u5247\u3068\u3057\u3066\u3001\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3084\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u66f8\u304b\u308c\u305f\u9806\u756a\u306b\u5b9f\u884c\u3055\u308c\u308b\n- \u305f\u3060\u3057\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\uff08```app.get()```\u3084```app.post()```\uff09\u306f\u3001express\u5185\u90e8\u3067\u4e00\u3064\u306b\u307e\u3068\u3081\u3089\u308c\u3001\u4e00\u3064\u306e\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u3088\u3046\u306b\u6271\u308f\u308c\u308b\uff08\u3053\u3053\u3067\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3068\u547c\u3076\uff09\n- \u3053\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u306f\u3001\u6700\u521d\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u304c\u66f8\u304b\u308c\u305f\u7b87\u6240\u3068\u306a\u308b\uff08\u4ee5\u4e0b\u306e\u4f8b\u53c2\u7167\uff09\n\n```javascript\n// \u2460\u301c\u2465\u306e\u9806\u5e8f\u3067\u5b9f\u884c\u3055\u308c\u308b\n\n// \u6700\u521d\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\n// \u3053\u306e\u4f4d\u7f6e\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5165\u308b\napp.get('path_to_somewhere', function(req, res) { // \u2460\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2461\n    :\n});\n\napp.use(someMiddleware); // \u2464\napp.use(otherMiddleware); // \u2465\n\napp.get('path_to_somewhere', function(req, res) { // \u2462\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2463\n    :\n});\n```\n\n- \u3053\u306e\u307e\u307e\u3067\u306f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5168\u4f53\u3092\u898b\u306a\u3051\u308c\u3070\u5b9f\u884c\u9806\u5e8f\u304c\u5206\u304b\u3089\u306a\u3044\uff08\u7279\u306b\u5927\u898f\u6a21\u306a\u30b7\u30b9\u30c6\u30e0\u306e\u5834\u5408\uff09\n- \u305d\u3053\u3067\u3001\u5b9f\u884c\u9806\u5e8f\u3092\u898b\u901a\u3057\u826f\u304f\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306b```app.use(app.router)```\u3092\u4f7f\u3046\u3068\u3088\u3044\n- ```app.use(app.router)```\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u305d\u306e\u3082\u306e\u3067\u3042\u308a\u3001\u3053\u308c\u304c\u66f8\u304b\u308c\u305f\u4f4d\u7f6e\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5165\u308b\u3053\u3068\u306b\u306a\u308b\n\n```javascript\n// \u2460\u301c\u2465\u306e\u9806\u5e8f\u3067\u9069\u7528\u3055\u308c\u308b\n\napp.get('path_to_somewhere', function(req, res) { // \u2462\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2463\n    :\n});\n\n//\n// \u5168\u4f53\u3092\u898b\u306a\u304f\u3066\u3082\u3053\u3053\u3060\u3051\u898b\u308c\u3070\u5b9f\u884c\u9806\u5e8f\u304c\u5224\u308b\n//\napp.use(someMiddleware); // \u2460\napp.use(otherMiddleware); // \u2461\napp.use(app.router); // \u3053\u306e\u4f4d\u7f6e\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u304c\u5165\u308b\n\napp.get('path_to_somewhere', function(req, res) { // \u2464\n    :\n});\n\napp.get('path_to_somewhere', function(req, res) { // \u2465\n    :\n});\n```\n\n## \u5168\u3066\u306eHTTP Verb\u306b\u4e00\u81f4\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u6307\u5b9a\u3059\u308b\n- HTTP Verb\u6bce\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306f[\u524d\u8ff0](#2-1)\u306e\u901a\u308a\u3060\u304c\u3001\u5168\u3066\u306eVerb\u306b\u5bfe\u3057\u3066\u9069\u7528\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306f```app.all()```\u3067\u884c\u3046\n\n```javascript\napp.all('path_to_somewhere', function(req, res, next) {\n    :\n});\n```\n\n\n## \u30b3\u30f3\u30c6\u30f3\u30c4\u3092gzip / deflat\u3067\u5727\u7e2e\u3057\u3066\u8fd4\u3059\n- compress\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3059\u308b\n\n```javascript\napp.use(express.compress());\n```\n\n\n## \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ea\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\n- \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ea\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u306b\u306f\u3001directory\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u5229\u7528\u3059\u308b\n- direcotory\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f```express.directory(path [,option])```\n- ```path```\u306b\u306f\u3001directory\u3092\u516c\u958b\u3057\u305f\u3044\u30d5\u30a9\u30eb\u30c0\u3078\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n- ```option```\u306b\u306f\u4ee5\u4e0b\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u308b\n    - *hidden*:  display hidden (dot) files. Defaults to false.\n    - *icons*:  display icons. Defaults to false.\n    - *filter*:  Apply this filter function to files. Defaults to false.\n\n```javascript\napp.use(express.directory('path_to_somewhere'), {hidden: false});\n```\n\n\n## favicon\u3092\u6307\u5b9a\u3059\u308b\n- favicon\u304c[static\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u516c\u958b](#2-10)\u3055\u308c\u3066\u3044\u308c\u3070\u4f55\u3082\u3057\u306a\u304f\u3066\u3082\u3088\u3044\n- \u305f\u3060\u3057\u3001favicon\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30ed\u30b0\u306b\u6b8b\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u3001favicon\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u5229\u7528\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3088\u3044\n\n```javascript\n// \u5148\u306bfavicon\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u9069\u7528\napp.use(express.favicon('path_to_favicon'));\n\n// \u305d\u306e\u5f8clogger\u30df\u30c9\u30eb\u30a6\u30a8\u30a2\u3092\u9069\u7528\napp.use(express.logger());\n```\n\n\n## \u30c7\u30d0\u30c3\u30b0\u95a2\u9023\n### \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3059\u308b\n- \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u306f```app.routes```\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\n- \u3053\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092```console.log```\u306b\u51fa\u529b\u3059\u308c\u3070\u3001\u767b\u9332\u3055\u308c\u305f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3067\u304d\u308b\n\n```javascript\nconsole.log(app.routes);\n\n/* \u51fa\u529b\u306e\u4f8b\n{ get: \n   [ { path: '/',\n       method: 'get',\n       callbacks: [Object],\n       keys: [],\n       regexp: /^\\/\\/?$/i },\n   { path: '/user/:id',\n       method: 'get',\n       callbacks: [Object],\n       keys: [{ name: 'id', optional: false }],\n       regexp: /^\\/user\\/(?:([^\\/]+?))\\/?$/i } ],\ndelete: \n   [ { path: '/user/:id',\n       method: 'delete',\n       callbacks: [Object],\n       keys: [Object],\n       regexp: /^\\/user\\/(?:([^\\/]+?))\\/?$/i } ] }\n*/\n```\n\n### express\u5185\u90e8\u306e\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\n- ```DEBUG```\u74b0\u5883\u5909\u6570\u306b```express:*```\u3092\u8a2d\u5b9a\u3057\u305f\u4e0a\u3067node\u3092\u8d77\u52d5\u3059\u308c\u3070\u3001\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u308b\n\n```bash\n$ DEBUG=express:* node app.js\n\n# \u51fa\u529b\u306e\u4f8b\n# express:application booting in development mode +0ms\n# express:router defined get /hello.txt +0ms\n# express:router defined get /hello.txt +1ms\n```\n", "tags": ["Node.js", "Express"]}