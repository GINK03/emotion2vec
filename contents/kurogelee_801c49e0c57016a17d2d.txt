{"context": " More than 1 year has passed since last update.Clojure\u304b\u3089Jubatus\u306eRecommender\uff08\u63a8\u85a6\uff09\u3092\u4f7f\u3063\u3066\u307f\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e http://jubat.us/ja/tutorial/recommender.html \u306eClojure\u7248\u3067\u3059\u3002\n\u30d7\u30ed\u91ce\u7403\u306e\u91ce\u624b\u6210\u7e3e\u3092\u5b66\u7fd2\u3057\u3001\u4f3c\u305f\u6210\u7e3e\u306e\u91ce\u624b\u30923\u4eba\u63a8\u85a6\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u52d5\u4f5c\u306b\u5fc5\u8981\u306anpb_similar_player.json\u3068baseball.csv\u306f\u4e0a\u8a18\u30ea\u30f3\u30af\u5148\u304b\u3089\u3069\u3046\u305e\u3002\njubarecommender -f npb_similar_player.json\u3067Jubatus\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u304a\u3051\u3070\u4ee5\u4e0b\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\nrecommender.clj\n(ns jubatus-sample.recommender\n  (:require [clojure.java.io :as io]\n            [clojure.string :as s])\n  (:import [us.jubat.recommender RecommenderClient]\n           [us.jubat.common Datum]))\n\n(defn map->datum [hmap]\n  (let [d (Datum.)]\n    (doseq [[k v] hmap]\n      (condp instance? v \n        String (.addString d k v)\n        Number (.addNumber d k v)\n        (.addBinary d k v)))\n    d))\n\n(defn- datum [values]\n  (let [ks [\"\u30c1\u30fc\u30e0\" \"\u6253\u7387\" \"\u8a66\u5408\u6570\" \"\u6253\u5e2d\" \"\u6253\u6570\" \"\u5b89\u6253\" \"\u672c\u5841\u6253\" \"\u6253\u70b9\" \"\u76d7\u5841\" \"\u56db\u7403\"\n            \"\u6b7b\u7403\" \"\u4e09\u632f\" \"\u72a0\u6253\" \"\u4f75\u6bba\u6253\" \"\u9577\u6253\u7387\" \"\u51fa\u5841\u7387\" \"OPS\" \"RC27\" \"XR27\"]\n        vs (cons (first values) (map #(Double/parseDouble %) (rest values)))]\n    (map->datum (zipmap ks vs))))\n\n(def ids (atom []))\n\n(defn update [client]\n  (reset! ids [])\n  (with-open [r (io/reader \"baseball.csv\")]\n    (doseq [line (line-seq r)]\n      (let [values (s/split line #\",\")\n            id (first values)]\n        (swap! ids conj id)\n        (.updateRow client id (datum (rest values)))))))\n\n(defn analyze [client]\n  (doseq [id @ids]\n    (let [result (rest (.similarRowFromId client id 4))]\n      (println \"player\" id \"is similar to :\" (s/join \",\" (map #(.-id %) result))))))\n\n(def client (RecommenderClient. \"127.0.0.1\" 9199 \"recommender_baseball\" 1))\n(update client)\n(analyze client)\n\n\nmap->datum\u306f\u5f15\u6570\u306eMap\u306evalue\u306e\u578b\u3092\u898b\u3066\u9069\u5207\u306bDatum\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u69cb\u7bc9\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\ndatum\u306fCSV\u30d5\u30a1\u30a4\u30eb\u306e2\u30ab\u30e9\u30e0\u76ee\u4ee5\u964d\u306e\u30c7\u30fc\u30bf\u3092\u3082\u3089\u3063\u3066\u305d\u308c\u3092Datum\u306b\u5909\u63db\u3057\u3066\u3044\u307e\u3059\u3002\nupdate\u306fCSV\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u30671\u884c\u305a\u3064\u5b66\u7fd2\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u5f8c\u3067\u4f7f\u3046\u305f\u3081\u306bid\u3082\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\nanalyze\u306f\u305d\u308c\u305e\u308c\u306eid\u3054\u3068\u306b\uff08\u91ce\u624b\u3054\u3068\u306b\uff09\u4f3c\u305f\u91ce\u624b\u3092\u53d6\u5f97\u3057\u3066\u30d7\u30ea\u30f3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\nClojure\u304b\u3089Jubatus\u306eRecommender\uff08\u63a8\u85a6\uff09\u3092\u4f7f\u3063\u3066\u307f\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e http://jubat.us/ja/tutorial/recommender.html \u306eClojure\u7248\u3067\u3059\u3002\n\u30d7\u30ed\u91ce\u7403\u306e\u91ce\u624b\u6210\u7e3e\u3092\u5b66\u7fd2\u3057\u3001\u4f3c\u305f\u6210\u7e3e\u306e\u91ce\u624b\u30923\u4eba\u63a8\u85a6\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u52d5\u4f5c\u306b\u5fc5\u8981\u306anpb_similar_player.json\u3068baseball.csv\u306f\u4e0a\u8a18\u30ea\u30f3\u30af\u5148\u304b\u3089\u3069\u3046\u305e\u3002\n\n`jubarecommender -f npb_similar_player.json `\u3067Jubatus\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u304a\u3051\u3070\u4ee5\u4e0b\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n```recommender.clj\n(ns jubatus-sample.recommender\n  (:require [clojure.java.io :as io]\n            [clojure.string :as s])\n  (:import [us.jubat.recommender RecommenderClient]\n           [us.jubat.common Datum]))\n\n(defn map->datum [hmap]\n  (let [d (Datum.)]\n    (doseq [[k v] hmap]\n      (condp instance? v \n        String (.addString d k v)\n        Number (.addNumber d k v)\n        (.addBinary d k v)))\n    d))\n\n(defn- datum [values]\n  (let [ks [\"\u30c1\u30fc\u30e0\" \"\u6253\u7387\" \"\u8a66\u5408\u6570\" \"\u6253\u5e2d\" \"\u6253\u6570\" \"\u5b89\u6253\" \"\u672c\u5841\u6253\" \"\u6253\u70b9\" \"\u76d7\u5841\" \"\u56db\u7403\"\n            \"\u6b7b\u7403\" \"\u4e09\u632f\" \"\u72a0\u6253\" \"\u4f75\u6bba\u6253\" \"\u9577\u6253\u7387\" \"\u51fa\u5841\u7387\" \"OPS\" \"RC27\" \"XR27\"]\n        vs (cons (first values) (map #(Double/parseDouble %) (rest values)))]\n    (map->datum (zipmap ks vs))))\n\n(def ids (atom []))\n\n(defn update [client]\n  (reset! ids [])\n  (with-open [r (io/reader \"baseball.csv\")]\n    (doseq [line (line-seq r)]\n      (let [values (s/split line #\",\")\n            id (first values)]\n        (swap! ids conj id)\n        (.updateRow client id (datum (rest values)))))))\n\n(defn analyze [client]\n  (doseq [id @ids]\n    (let [result (rest (.similarRowFromId client id 4))]\n      (println \"player\" id \"is similar to :\" (s/join \",\" (map #(.-id %) result))))))\n\n(def client (RecommenderClient. \"127.0.0.1\" 9199 \"recommender_baseball\" 1))\n(update client)\n(analyze client)\n```\n\n`map->datum`\u306f\u5f15\u6570\u306eMap\u306evalue\u306e\u578b\u3092\u898b\u3066\u9069\u5207\u306bDatum\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u69cb\u7bc9\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n`datum`\u306fCSV\u30d5\u30a1\u30a4\u30eb\u306e2\u30ab\u30e9\u30e0\u76ee\u4ee5\u964d\u306e\u30c7\u30fc\u30bf\u3092\u3082\u3089\u3063\u3066\u305d\u308c\u3092Datum\u306b\u5909\u63db\u3057\u3066\u3044\u307e\u3059\u3002\n`update`\u306fCSV\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u30671\u884c\u305a\u3064\u5b66\u7fd2\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u5f8c\u3067\u4f7f\u3046\u305f\u3081\u306b`id`\u3082\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\n`analyze`\u306f\u305d\u308c\u305e\u308c\u306e`id`\u3054\u3068\u306b\uff08\u91ce\u624b\u3054\u3068\u306b\uff09\u4f3c\u305f\u91ce\u624b\u3092\u53d6\u5f97\u3057\u3066\u30d7\u30ea\u30f3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\n", "tags": ["Clojure1.6.0", "jubatus0.6.1", "\u6a5f\u68b0\u5b66\u7fd2"]}