{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u524d\u56de\u306f\u3001Spring Boot\u3067Apache Wicket\u3092\u52d5\u304b\u3059\u3068\u3053\u308d\u307e\u3067\u9032\u3081\u305f\u3002\u3053\u308c\u3092WicketTester\u3067JUnit\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n1.2.x\u7cfb\u3078\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\nSpring Boot\u306e1.2.x\u7cfb\u304c\u51fa\u3066\u3044\u305f\u306e\u3067\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u3002\nversion\u30921.2.0\u306b\u3002\n\npom.xml\uff08\u629c\u7c8b\uff09\n<parent>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-parent</artifactId>\n  <version>1.2.0.RELEASE</version>\n</parent>\n\n\nWicketApplication\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f@SpringBootApplication\u306b\u307e\u3068\u3081\u308b\u3002\n\nWicketApplication.java\uff08\u629c\u7c8b\uff09\n@SpringBootApplication\npublic class WicketApplication extends WebApplication {\n\n\n\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u57fa\u672c\u5f62\nSpring\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u8a2d\u5b9a\u306e\u89e3\u6c7a\u306e\u305f\u3081\u3001@RunWith\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068@ContextConfiguration\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3002\n\u307e\u305fWicket\u306e\u5834\u5408\u306f\u30c6\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u306b @DirtiesContext \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u8907\u6570\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u306b\u521d\u671f\u5316\u51e6\u7406\u3067\u5931\u6557\u3059\u308b\u3002\n\nFooPageTest.java\n@RunWith(SpringJUnit4ClassRunner. class)\n@ContextConfiguration(classes = { WebInitializer.class, WicketApplication.class })\npublic static class FooPageTest {\n\n  @Autowired\n  private WicketApplication wicketApplication;\n  private WicketTester sut;\n\n  @Before\n  public void setUp() throws Exception {\n    sut = new WicketTester(wicketApplication);\n  }\n\n  @Test\n  @DirtiesContext \n  public void FooPage\u304c\u8868\u793a\u3055\u308c\u308b() {\n    sut.startPage(FooPage.class);\n    sut.assertRenderedPage(FooPage.class);\n    sut.assertLabel(\"label\", \"Hello, Spring Boot + Wicket!\");\n  }\n}\n\n\n\nMockito\u306e\u5229\u7528\nSpring Boot\u3067\u306fMockito\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30b9\u30bf\u30d6\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3082\u3057\u305f\u3044\u3002Wicket-Spring\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3068\u307b\u307c\u5909\u308f\u3089\u306a\u3044\u304c\u3001@SetUP\u90e8\u5206\u3067\u30b9\u30bf\u30d6\u3092\u8a2d\u5b9a\u3059\u308b\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\nFooPageTest\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = { WebInitializer.class, WicketApplication.class })\npublic static class FooPageTest {\n\n  @Autowired\n  private WicketApplication wicketApplication;\n  private ApplicationContextMock applicationContextMock;\n  private WicketTester sut;\n\n  @Before\n  public void setUp() throws Exception {\n    sut = new WicketTester(wicketApplication);\n    // \u30b9\u30bf\u30d6\u306e\u4f5c\u6210\n    applicationContextMock = new ApplicationContextMock();\n    sut.getApplication().getComponentInstantiationListeners()\n        .add(new SpringComponentInjector(sut.getApplication(), applicationContextMock));\n    IBarService mock = mock(IBarService.class);\n    when(mock.createMessage()).thenReturn(\"it is mocked!\");\n    applicationContextMock.putBean(\"barService\", mock);\n  }\n\n  @Test\n  @DirtiesContext \n  public void FooPage\u304c\u8868\u793a\u3055\u308c\u308b() {\n    sut.startPage(FooPage.class);\n    Sat. assertRenderedPage (FooPage. class);\n    sut.assertLabel(\"label\", \"it is mocked!\");\n  }\n}\n\n\n\u306a\u304a\u3001\u3053\u3053\u307e\u3067\u306e\u30b3\u30fc\u30c9\u306fgishi-yama/wicket-on-spring-boot/tree/180eecd5c7\u306bpush\u3057\u3066\u3042\u308b\u3002\n\n\u53c2\u8003\u6587\u732e\n\nPentadrago/spring-boot-example-wicket\n\u3069\u3053\u3088\u308a\u3082\u65e9\u3044 Spring Boot 1.2 \u89e3\u8aac #\u6e0b\u8c37Java\nUnit testing with Spring injected Application\nSpring Unit Test and object re-injection\nMocking Spring Beans with Apache Wicket And Mockito\n\n## \u6982\u8981\n\n[\u524d\u56de\u306f\u3001Spring Boot\u3067Apache Wicket\u3092\u52d5\u304b\u3059](http://qiita.com/gishi_yama/items/363b408188da6b9627fc)\u3068\u3053\u308d\u307e\u3067\u9032\u3081\u305f\u3002\u3053\u308c\u3092WicketTester\u3067JUnit\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n## 1.2.x\u7cfb\u3078\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\n\nSpring Boot\u306e1.2.x\u7cfb\u304c\u51fa\u3066\u3044\u305f\u306e\u3067\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u3002\n\nversion\u30921.2.0\u306b\u3002\n\n```xml:pom.xml\uff08\u629c\u7c8b\uff09\n<parent>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-parent</artifactId>\n  <version>1.2.0.RELEASE</version>\n</parent>\n```\n\nWicketApplication\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f`@SpringBootApplication`\u306b\u307e\u3068\u3081\u308b\u3002\n\n```java:WicketApplication.java\uff08\u629c\u7c8b\uff09\n@SpringBootApplication\npublic class WicketApplication extends WebApplication {\n```\n\n## \u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u57fa\u672c\u5f62\n\nSpring\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u8a2d\u5b9a\u306e\u89e3\u6c7a\u306e\u305f\u3081\u3001`@RunWith`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068`@ContextConfiguration`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3002\n\n\u307e\u305fWicket\u306e\u5834\u5408\u306f\u30c6\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u306b `@DirtiesContext` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u8907\u6570\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u306b\u521d\u671f\u5316\u51e6\u7406\u3067\u5931\u6557\u3059\u308b\u3002\n\n```java:FooPageTest.java\n@RunWith(SpringJUnit4ClassRunner. class)\n@ContextConfiguration(classes = { WebInitializer.class, WicketApplication.class })\npublic static class FooPageTest {\n\n  @Autowired\n  private WicketApplication wicketApplication;\n  private WicketTester sut;\n\n  @Before\n  public void setUp() throws Exception {\n    sut = new WicketTester(wicketApplication);\n  }\n\n  @Test\n  @DirtiesContext \n  public void FooPage\u304c\u8868\u793a\u3055\u308c\u308b() {\n    sut.startPage(FooPage.class);\n    sut.assertRenderedPage(FooPage.class);\n    sut.assertLabel(\"label\", \"Hello, Spring Boot + Wicket!\");\n  }\n}\n```\n\n## Mockito\u306e\u5229\u7528\n\nSpring Boot\u3067\u306fMockito\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30b9\u30bf\u30d6\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3082\u3057\u305f\u3044\u3002Wicket-Spring\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3068\u307b\u307c\u5909\u308f\u3089\u306a\u3044\u304c\u3001`@SetUP`\u90e8\u5206\u3067\u30b9\u30bf\u30d6\u3092\u8a2d\u5b9a\u3059\u308b\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```java:FooPageTest\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = { WebInitializer.class, WicketApplication.class })\npublic static class FooPageTest {\n\n  @Autowired\n  private WicketApplication wicketApplication;\n  private ApplicationContextMock applicationContextMock;\n  private WicketTester sut;\n\n  @Before\n  public void setUp() throws Exception {\n    sut = new WicketTester(wicketApplication);\n    // \u30b9\u30bf\u30d6\u306e\u4f5c\u6210\n    applicationContextMock = new ApplicationContextMock();\n    sut.getApplication().getComponentInstantiationListeners()\n        .add(new SpringComponentInjector(sut.getApplication(), applicationContextMock));\n    IBarService mock = mock(IBarService.class);\n    when(mock.createMessage()).thenReturn(\"it is mocked!\");\n    applicationContextMock.putBean(\"barService\", mock);\n  }\n\n  @Test\n  @DirtiesContext \n  public void FooPage\u304c\u8868\u793a\u3055\u308c\u308b() {\n    sut.startPage(FooPage.class);\n    Sat. assertRenderedPage (FooPage. class);\n    sut.assertLabel(\"label\", \"it is mocked!\");\n  }\n}\n```\n\n\u306a\u304a\u3001\u3053\u3053\u307e\u3067\u306e\u30b3\u30fc\u30c9\u306f[gishi-yama/wicket-on-spring-boot/tree/180eecd5c7](https://github.com/gishi-yama/wicket-on-spring-boot/tree/180eecd5c7)\u306bpush\u3057\u3066\u3042\u308b\u3002\n\n\n## \u53c2\u8003\u6587\u732e\n- [Pentadrago/spring-boot-example-wicket](https://github.com/Pentadrago/spring-boot-example-wicket)\n- [\u3069\u3053\u3088\u308a\u3082\u65e9\u3044 Spring Boot 1.2 \u89e3\u8aac #\u6e0b\u8c37Java](http://www.slideshare.net/makingx/spring-boot12)\n- [Unit testing with Spring injected Application](http://apache-wicket.1842946.n4.nabble.com/Unit-testing-with-Spring-injected-Application-td4653110.html)\n- [Spring Unit Test and object re-injection](http://stackoverflow.com/questions/14470642/spring-unit-test-and-object-re-injection)\n- [Mocking Spring Beans with Apache Wicket And Mockito](http://www.petrikainulainen.net/programming/tips-and-tricks/mocking-spring-beans-with-apache-wicket-and-mockito/)\n", "tags": ["Wicket6.18.0", "spring-boot1.2.0"]}