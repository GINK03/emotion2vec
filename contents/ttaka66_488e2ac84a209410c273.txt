{"context": " More than 1 year has passed since last update.\n\n\u6e96\u5099\nbootstrap\ncarrierwave\n\n1. \u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u4f5c\u6210\n\u6ce8)\u30e2\u30fc\u30c0\u30eb\u304b\u3089\u76f4\u63a5DB\u306b\u4fdd\u5b58\u3059\u308b\u306b\u306fform_for\u306e\u4e2d\u306b\u8a18\u8ff0\u3059\u308b\n\nhtml.erb\n<%= form_for(@product) do |f| %>\n  <!-- \u30e2\u30fc\u30c0\u30eb\u8868\u793a\u9818\u57df -->\n  <div id=\"auto_modal\" class=\"modal fade\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n          <h4 class=\"modal-title\">Modal title</h4>\n        </div>\n        <div class=\"modal-body\" align=\"center\">\n          <img id=\"modal_img\" src=\"\" alt=\"\" />\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n          <%= f.submit class: \"btn btn-primary\" %>\n        </div>\n      </div><!-- /.modal-content -->\n    </div><!-- /.modal-dialog -->\n  </div><!-- /.auto_modal -->\n\n  ...\n\n  <%= f.label :image %><br>\n  <%= f.file_field :image, class: \"fileInput\" %>\n  <%= f.hidden_field :image_cache %>\n<% end %>\n\n\n\n2. jquery\u3067\u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u8868\u793a\n# 1.\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3059\u308b\u95a2\u6570\u3092\u8a2d\u5b9a\n    $('.fileInput2').change ->\n\n        # 2. \u9078\u629e\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u305b\u305a\u306breturn\n        if !@files.length\n            return\n        file = @files[0] # 3.files\u914d\u5217\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u5165\u3063\u3066\u3044\u307e\u3059\n        $_img = $('#modal_img') # 4. \u753b\u50cf\u8868\u793a\u9818\u57df\u3092\u53d6\u5f97\n        reader = new FileReader() # 5. \u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080FileReader\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n        if file.type isnt 'image/jpeg'\n            alert('\u9078\u629e\u3067\u304d\u308b\u30d5\u30a1\u30a4\u30eb\u306f10KB\u4ee5\u4e0b\u306eJPEG\u753b\u50cf\u3060\u3051\u3067\u3059\u3002')\n            @value = ''\n\n        else\n            # 6. \u753b\u50cf\u8aad\u307f\u8fbc\u307f\n            reader.readAsDataURL(file)\n            # 7. \u8aad\u307f\u8fbc\u307f\u304c\u5b8c\u4e86\u3057\u305f\u969b\u306e\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u3002img\u306esrc\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n            reader.onload = (e)->\n                # \u8aad\u307f\u8fbc\u3093\u3060\u30c7\u30fc\u30bf\u3092img\u306b\u8a2d\u5b9a\n                $_img.attr('src', e.target.result)\n                return\n\n        # 8. \u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u8868\u793a\n        $('#auto_modal').modal('show')\n        return\n\n\n##\u6e96\u5099\nbootstrap\ncarrierwave\n\n##1. \u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u4f5c\u6210\n\n\u6ce8)\u30e2\u30fc\u30c0\u30eb\u304b\u3089\u76f4\u63a5DB\u306b\u4fdd\u5b58\u3059\u308b\u306b\u306fform_for\u306e\u4e2d\u306b\u8a18\u8ff0\u3059\u308b\n\n```html.erb\n<%= form_for(@product) do |f| %>\n  <!-- \u30e2\u30fc\u30c0\u30eb\u8868\u793a\u9818\u57df -->\n  <div id=\"auto_modal\" class=\"modal fade\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n          <h4 class=\"modal-title\">Modal title</h4>\n        </div>\n        <div class=\"modal-body\" align=\"center\">\n          <img id=\"modal_img\" src=\"\" alt=\"\" />\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n          <%= f.submit class: \"btn btn-primary\" %>\n        </div>\n      </div><!-- /.modal-content -->\n    </div><!-- /.modal-dialog -->\n  </div><!-- /.auto_modal -->\n  \n  ...\n  \n  <%= f.label :image %><br>\n  <%= f.file_field :image, class: \"fileInput\" %>\n  <%= f.hidden_field :image_cache %>\n<% end %>\n```\n\n\n##2. jquery\u3067\u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u8868\u793a\n\n```CoffeeScript\n# 1.\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3059\u308b\u95a2\u6570\u3092\u8a2d\u5b9a\n\t$('.fileInput2').change ->\n\t\t\n\t\t# 2. \u9078\u629e\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u305b\u305a\u306breturn\n\t\tif !@files.length\n\t\t\treturn\n\t\tfile = @files[0] # 3.files\u914d\u5217\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u5165\u3063\u3066\u3044\u307e\u3059\n\t\t$_img = $('#modal_img') # 4. \u753b\u50cf\u8868\u793a\u9818\u57df\u3092\u53d6\u5f97\n\t\treader = new FileReader() # 5. \u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080FileReader\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\t\tif file.type isnt 'image/jpeg'\n    \t\talert('\u9078\u629e\u3067\u304d\u308b\u30d5\u30a1\u30a4\u30eb\u306f10KB\u4ee5\u4e0b\u306eJPEG\u753b\u50cf\u3060\u3051\u3067\u3059\u3002')\n    \t\t@value = ''\n\n    \telse\n    \t\t# 6. \u753b\u50cf\u8aad\u307f\u8fbc\u307f\n\t\t\treader.readAsDataURL(file)\n\t\t\t# 7. \u8aad\u307f\u8fbc\u307f\u304c\u5b8c\u4e86\u3057\u305f\u969b\u306e\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u3002img\u306esrc\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n\t\t\treader.onload = (e)->\n\t\t\t\t# \u8aad\u307f\u8fbc\u3093\u3060\u30c7\u30fc\u30bf\u3092img\u306b\u8a2d\u5b9a\n\t\t\t\t$_img.attr('src', e.target.result)\n\t\t\t\treturn\n\t\t\t\n\t\t# 8. \u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u8868\u793a\n\t\t$('#auto_modal').modal('show')\n\t\treturn\n```\n", "tags": ["modal", "JavaScript", "jQuery", "bootstrap"]}