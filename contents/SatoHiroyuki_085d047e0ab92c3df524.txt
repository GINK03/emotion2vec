{"context": "\n\nMetrin(\u30e1\u30c3\u30c8\u30ea\u30f3)\nAWS\u306eCloudWatch\u306e\u5024\u3092\u53d6\u5f97\u3067\u304d\u308bMackerel\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u3044\u304f\u3064\u304b\u3042\u308b\u306e\u3067\u3059\u304c\u3001\n\u5bfe\u8c61\u30ea\u30bd\u30fc\u30b9\u304c\u672a\u5bfe\u5fdc\u306e\u3082\u306e\u304c\u591a\u304f\u3001\u307e\u305f\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u306b\u306f\u3059\u3050\u306b\u5bfe\u5fdc\u3057\u306a\u3044\u4f5c\u308a\u3060\u3063\u305f\u3081\u56f0\u3063\u3066\u307e\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001\u6c4e\u7528\u3067\u5229\u7528\u3067\u304d\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u307b\u3057\u3044\u306a\u30fc\u3068y13i\u306b\u30a2\u30d4\u30fc\u30eb\u3057\u3066\u3044\u307e\u3057\u305f\u3089\u3001\n\u306a\u3093\u3068\u4f5c\u3063\u3066\u9802\u3051\u305f\u306e\u3067\u7d39\u4ecb\u306b\u306a\u308a\u307e\u3059\uff01\uff01\nMetrin\u306fy13i\u304c\u4f5c\u6210\u3057\u305f\u6c4e\u7528CloudWatch\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3059\u3002\n1\u3064\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u30c1\u30a7\u30c3\u30af\u6a5f\u80fd\u3068\u30e1\u30c8\u30ea\u30c3\u30af\u306e\u53d6\u5f97\u306e\u4e21\u65b9\u3092\u517c\u306d\u5099\u3048\u3066\u3044\u307e\u3059\u3002\nZabbix/Sensu/Mackerel\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u3092\u9078\u3070\u305a\u3001\u8a00\u8a9e\u306fGo\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u305f\u3081\u3001\nOS\u306fWindows/Linux/Mac/BSD\u3069\u308c\u3067\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001Metrin\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Mackerel\u306e\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u5bfe\u5fdc\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\uff01\nhttps://github.com/y13i/metrin\n\n\u6e96\u5099\n\u5bfe\u8c61\u306eOS(Windows/Linux/Mac/BSD)\u306e\u3082\u306e\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u304a\u597d\u304d\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\nhttps://github.com/y13i/metrin/releases\n\u307e\u305f\u3001AWS\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bCloudWatch\u304c\u53c2\u7167\u3067\u304d\u308bIAMRole\u3092\u4ed8\u4e0e\u3057\u3066\u304a\u3044\u3066\u307e\u3059\u3002\n$ cd /usr/local/bin/\n$ wget https://github.com/y13i/metrin/releases/download/v0.0.3/metrin-linux_amd64.zip\n$ unzip metrin-linux_amd64.zip\n\n\n\u30b3\u30de\u30f3\u30c9\nmetrin\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3001\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u306e\uff12\u3064\u306b\u5206\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u306f\u3001\u5bfe\u8c61\u306eCloudWatch\u306e\u5024\u306b\u95a2\u3057\u3066\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3001\u30c1\u30a7\u30c3\u30af\u306a\u306e\u304b\u30d7\u30ea\u30f3\u30c8\u306a\u306e\u304b\u3092\u6c7a\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001CloudWatch\u306eCPU\u306e\u4f7f\u7528\u7387\u304c\u3042\u308b\u4e00\u5b9a\u4ee5\u4e0a\u306e\u5024\u306b\u306a\u3063\u305f\u3089\u30a2\u30e9\u30fc\u30c8\u3092\u4e0a\u3052\u308b\u5834\u5408\u306fcheck\u3092\u5229\u7528\u3002\nMackerel\u5074\u306bCPU\u4f7f\u7528\u7387\u3092\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u3068\u3057\u3066\u9001\u4fe1\u3057\u305f\u3044\u306e\u3067\u3042\u308c\u3070print\u3092\u5229\u7528\u3057\u307e\u3059\u3002\nNAME:\n   metrin - Very simple CloudWatch CLI for Zabbix/Nagios/Sensu/Mackerel/etc.\n\nUSAGE:\n   metrin [global options] command [command options] [arguments...]\n\nVERSION:\n   0.0.3\n\nCOMMANDS:\n     check    perform check and exit with status codes (0: OK, 1: WARNING, 2: CRITICAL, 3: UNKNOWN)\n     print    Prints GetMetricStatistics response with given format template\n     debug    Prints GetMetricStatistics params and response\n     help, h  Shows a list of commands or help for one command\n\nGLOBAL OPTIONS:\n   --namespace value, -n value                          CloudWatch namespace. e.g. 'AWS/EC2'\n   --metric-name value, -m value                        CloudWatch metric name. e.g. 'CPUUtilization'\n   --start-time value, -S value                         start time as unix timestamp, relative from now if 0 or negative value given (default: -300)\n   --end-time value, -E value                           end time as unix timestamp, relative from now if 0 or negative value given (default: 0)\n   --period value, -p value                             CloudWatch metric statistic period. (default: 60)\n   --unit value, -u value                               CloudWatch metric statistic unit. e.g. 'Percent'\n   --statistic value, -s value                          CloudWatch metrics statistic. e.g. 'Average'\n   --extended-statistic value, -e value                 CloudWatch extended metrics statistic. e.g. 'p99.5'\n   --dimension DIM_KEY:DIM_VALUE, -d DIM_KEY:DIM_VALUE  CloudWatch dimension. DIM_KEY:DIM_VALUE e.g. 'InstanceId:i-12345678'\n   --region value                                       AWS region. e.g. 'us-west-2'\n   --profile value                                      AWS profile name. e.g. 'myprofile'\n   --access-key-id value                                AWS access key id. e.g. 'AKIAIOSFODNN7EXAMPLE'\n   --secret-access-key value                            AWS secret access key. e.g. 'wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY'\n   --help, -h                                           show help\n   --version, -v                                        print the version\n\n\nPrint\n\u8a66\u3057\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eCPU\u4f7f\u7528\u7387\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n$ metrin --namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxxxx --start-time -600 print --last-value-only\nCloudWatch.InstanceId.i-xxxxxxxxx.CPUUtilization.Average    1.468   1482596160\n\n\u554f\u984c\u306a\u304f\u8868\u793a\u3067\u304d\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3057\u3067\u304d\u307e\u3057\u305f\u3002\n\u5f8c\u306f\u78ba\u8a8d\u3067\u304d\u305f\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307eMackerel\u306econf\u306b\u5165\u308c\u308c\u3070\u7d42\u308f\u308a\u3067\u3059\u3002\n[plugin.metrics.cloudwatch-i-xxxxxxxxx-cpu]\ncommand = \"/usr/local/bin/metrin--namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxxxx --start-time -600 print --last-value-only\"\n\n\u5f8c\u306fCloudWatch\u306e\u597d\u304d\u306a\u5024\u3092\u9078\u3076\u3060\u3051\u3067\u3001Mackerel\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u5074\u3067\u8868\u793a\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306eprint\u8868\u793a\u306fMackerel\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u306a\u308a\u307e\u3059\u304c\u3001\n--template \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308c\u3070\u304a\u597d\u307f\u3067\u5909\u66f4\u304c\u53ef\u80fd\u3067\u3059\u3002\nZabbix\u3084Sensu\u3067\u3082\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\nCheck\nPrint\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u540c\u3058\u3067\u3001check\u306e\u90e8\u5206\u306e\u307f\u5909\u66f4\u3059\u308c\u3070\u30c1\u30a7\u30c3\u30af\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u30ea\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\u306fsensu\u3068\u540c\u69d8\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001Mackerel\u3067\u3082\u554f\u984c\u306a\u304f\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u5024\u304c1\u4ee5\u4e0a\u3067\u3042\u308c\u3070\u30a2\u30e9\u30fc\u30c8\u3092\u4e0a\u3052\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3002\n# metrin --namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxx --start-time -600 check --critical-gt 1\nCloudWatch CRITICAL, got `1.628000` (Percent), greater than `1.000000`\nParams: {\n  Dimensions: [{\n      Name: \"InstanceId\",\n      Value: \"i-xxxxxxxxxx\"\n    }],\n  EndTime: 2016-12-24 xx:xx:xx +0000 UTC,\n  MetricName: \"CPUUtilization\",\n  Namespace: \"AWS/EC2\",\n  Period: 60,\n  StartTime: 2016-12-24 xx:xx:xx +0000 UTC,\n  Statistics: [\"Average\"]\n}\n\n\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u540c\u69d8\u306bMackerel\u306econf\u306b\u8a18\u8f09\u3059\u308c\u3070\u3088\u3044\u3002\n[plugin.checks.cloudwatch-i-xxxxxxxxx-cpu]\ncommand = \"/usr/local/bin/metrin --namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxxxx --start-time -600 check --critical-gt 1\"\nnotification_interval = 60\nmax_check_attempts = 1\ncheck_interval = 1\n\n\u3053\u308c\u3067\u76e3\u8996\u8a2d\u5b9a\u3082\u53ef\u80fd\u3002\n\n\u304a\u307e\u3051\n\u8907\u6570dimension\u304c\u3042\u308b\u5834\u5408\u306f[--dimension]\u3092\u8907\u6570\u8a18\u8f09\u3059\u308c\u3070\u3088\u3044\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u66f8\u304d\u65b9\u306fGo\u306ePackage template\u3092\u53c2\u7167\nhttps://golang.org/pkg/text/template/\n\netc\n\u4f7f\u3044\u307e\u308f\u305b\u308b\u6c4e\u7528\u76e3\u8996\u30d7\u30e9\u30b0\u30a4\u30f3Metrin\u306e\u7d39\u4ecb\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u4e00\u3064\u4e00\u3064\u306e\u5024\u3092\u53d6\u5f97\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3067\u3059\u304c\u3001conf\u306e\u53cd\u6620\u306fchef\u306a\u3069\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3042\u307e\u308a\u6c17\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u305d\u308c\u3067\u306f\u7686\u3055\u3093\u3001\u697d\u3057\u3044Mackrel\u30e9\u30a4\u30d5\u3092\uff01\n\uff3c\uff71\uff6f\uff76\uff98\uff5e\uff9d\uff0f \n\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u540d\u304c\u4f3c\u3066\u308b\u306a\u3063\u3066\u601d\u3063\u305f\u3051\u3069\u3001\u4ffa\u3060\u3051\u3060\u3063\u305f\u6a21\u69d8\u3002\n12\u670824\u65e5\u306b\u8a18\u4e8b\u3092\u4e0a\u3052\u308b\u3068\u8a00\u3063\u305f\u304c\u3001JST\u3068\u306f\u8a00\u3063\u3066\u3044\u306a\u3044\u3002\uff08\u3054\u3081\u3093\u306a\u3055\u3044\n#Metrin(\u30e1\u30c3\u30c8\u30ea\u30f3)\n\nAWS\u306eCloudWatch\u306e\u5024\u3092\u53d6\u5f97\u3067\u304d\u308bMackerel\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u3044\u304f\u3064\u304b\u3042\u308b\u306e\u3067\u3059\u304c\u3001\n\u5bfe\u8c61\u30ea\u30bd\u30fc\u30b9\u304c\u672a\u5bfe\u5fdc\u306e\u3082\u306e\u304c\u591a\u304f\u3001\u307e\u305f\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u306b\u306f\u3059\u3050\u306b\u5bfe\u5fdc\u3057\u306a\u3044\u4f5c\u308a\u3060\u3063\u305f\u3081\u56f0\u3063\u3066\u307e\u3057\u305f\u3002\n\n\u305d\u3053\u3067\u3001\u6c4e\u7528\u3067\u5229\u7528\u3067\u304d\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u307b\u3057\u3044\u306a\u30fc\u3068[y13i](https://y13i.com/)\u306b\u30a2\u30d4\u30fc\u30eb\u3057\u3066\u3044\u307e\u3057\u305f\u3089\u3001\n\u306a\u3093\u3068\u4f5c\u3063\u3066\u9802\u3051\u305f\u306e\u3067\u7d39\u4ecb\u306b\u306a\u308a\u307e\u3059\uff01\uff01\n\nMetrin\u306f[y13i](https://y13i.com/)\u304c\u4f5c\u6210\u3057\u305f\u6c4e\u7528CloudWatch\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3059\u3002\n1\u3064\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u30c1\u30a7\u30c3\u30af\u6a5f\u80fd\u3068\u30e1\u30c8\u30ea\u30c3\u30af\u306e\u53d6\u5f97\u306e\u4e21\u65b9\u3092\u517c\u306d\u5099\u3048\u3066\u3044\u307e\u3059\u3002\n\nZabbix/Sensu/Mackerel\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u3092\u9078\u3070\u305a\u3001\u8a00\u8a9e\u306fGo\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u305f\u3081\u3001\nOS\u306fWindows/Linux/Mac/BSD\u3069\u308c\u3067\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u307e\u305f\u3001Metrin\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Mackerel\u306e\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u5bfe\u5fdc\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\uff01\n\nhttps://github.com/y13i/metrin\n\n## \u6e96\u5099\n\n\u5bfe\u8c61\u306eOS(Windows/Linux/Mac/BSD)\u306e\u3082\u306e\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u304a\u597d\u304d\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\nhttps://github.com/y13i/metrin/releases\n\n\u307e\u305f\u3001AWS\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bCloudWatch\u304c\u53c2\u7167\u3067\u304d\u308bIAMRole\u3092\u4ed8\u4e0e\u3057\u3066\u304a\u3044\u3066\u307e\u3059\u3002\n\n```\n$ cd /usr/local/bin/\n$ wget https://github.com/y13i/metrin/releases/download/v0.0.3/metrin-linux_amd64.zip\n$ unzip metrin-linux_amd64.zip\n```\n\n## \u30b3\u30de\u30f3\u30c9\n\nmetrin\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3001\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u306e\uff12\u3064\u306b\u5206\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u306f\u3001\u5bfe\u8c61\u306eCloudWatch\u306e\u5024\u306b\u95a2\u3057\u3066\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3001\u30c1\u30a7\u30c3\u30af\u306a\u306e\u304b\u30d7\u30ea\u30f3\u30c8\u306a\u306e\u304b\u3092\u6c7a\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001CloudWatch\u306eCPU\u306e\u4f7f\u7528\u7387\u304c\u3042\u308b\u4e00\u5b9a\u4ee5\u4e0a\u306e\u5024\u306b\u306a\u3063\u305f\u3089\u30a2\u30e9\u30fc\u30c8\u3092\u4e0a\u3052\u308b\u5834\u5408\u306fcheck\u3092\u5229\u7528\u3002\nMackerel\u5074\u306bCPU\u4f7f\u7528\u7387\u3092\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u3068\u3057\u3066\u9001\u4fe1\u3057\u305f\u3044\u306e\u3067\u3042\u308c\u3070print\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```\nNAME:\n   metrin - Very simple CloudWatch CLI for Zabbix/Nagios/Sensu/Mackerel/etc.\n\nUSAGE:\n   metrin [global options] command [command options] [arguments...]\n\nVERSION:\n   0.0.3\n\nCOMMANDS:\n     check    perform check and exit with status codes (0: OK, 1: WARNING, 2: CRITICAL, 3: UNKNOWN)\n     print    Prints GetMetricStatistics response with given format template\n     debug    Prints GetMetricStatistics params and response\n     help, h  Shows a list of commands or help for one command\n\nGLOBAL OPTIONS:\n   --namespace value, -n value                          CloudWatch namespace. e.g. 'AWS/EC2'\n   --metric-name value, -m value                        CloudWatch metric name. e.g. 'CPUUtilization'\n   --start-time value, -S value                         start time as unix timestamp, relative from now if 0 or negative value given (default: -300)\n   --end-time value, -E value                           end time as unix timestamp, relative from now if 0 or negative value given (default: 0)\n   --period value, -p value                             CloudWatch metric statistic period. (default: 60)\n   --unit value, -u value                               CloudWatch metric statistic unit. e.g. 'Percent'\n   --statistic value, -s value                          CloudWatch metrics statistic. e.g. 'Average'\n   --extended-statistic value, -e value                 CloudWatch extended metrics statistic. e.g. 'p99.5'\n   --dimension DIM_KEY:DIM_VALUE, -d DIM_KEY:DIM_VALUE  CloudWatch dimension. DIM_KEY:DIM_VALUE e.g. 'InstanceId:i-12345678'\n   --region value                                       AWS region. e.g. 'us-west-2'\n   --profile value                                      AWS profile name. e.g. 'myprofile'\n   --access-key-id value                                AWS access key id. e.g. 'AKIAIOSFODNN7EXAMPLE'\n   --secret-access-key value                            AWS secret access key. e.g. 'wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY'\n   --help, -h                                           show help\n   --version, -v                                        print the version\n```\n\n## Print\n\u8a66\u3057\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eCPU\u4f7f\u7528\u7387\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ metrin --namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxxxx --start-time -600 print --last-value-only\nCloudWatch.InstanceId.i-xxxxxxxxx.CPUUtilization.Average\t1.468  \t1482596160\n```\n\n\u554f\u984c\u306a\u304f\u8868\u793a\u3067\u304d\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3057\u3067\u304d\u307e\u3057\u305f\u3002\n\u5f8c\u306f\u78ba\u8a8d\u3067\u304d\u305f\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307eMackerel\u306econf\u306b\u5165\u308c\u308c\u3070\u7d42\u308f\u308a\u3067\u3059\u3002\n\n```\n[plugin.metrics.cloudwatch-i-xxxxxxxxx-cpu]\ncommand = \"/usr/local/bin/metrin--namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxxxx --start-time -600 print --last-value-only\"\n```\n\n\u5f8c\u306fCloudWatch\u306e\u597d\u304d\u306a\u5024\u3092\u9078\u3076\u3060\u3051\u3067\u3001Mackerel\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u5074\u3067\u8868\u793a\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306eprint\u8868\u793a\u306fMackerel\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u306a\u308a\u307e\u3059\u304c\u3001\n`--template` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308c\u3070\u304a\u597d\u307f\u3067\u5909\u66f4\u304c\u53ef\u80fd\u3067\u3059\u3002\nZabbix\u3084Sensu\u3067\u3082\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\n## Check\n\nPrint\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u540c\u3058\u3067\u3001check\u306e\u90e8\u5206\u306e\u307f\u5909\u66f4\u3059\u308c\u3070\u30c1\u30a7\u30c3\u30af\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u30ea\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\u306fsensu\u3068\u540c\u69d8\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001Mackerel\u3067\u3082\u554f\u984c\u306a\u304f\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001\u5024\u304c1\u4ee5\u4e0a\u3067\u3042\u308c\u3070\u30a2\u30e9\u30fc\u30c8\u3092\u4e0a\u3052\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3002\n\n```\n# metrin --namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxx --start-time -600 check --critical-gt 1\nCloudWatch CRITICAL, got `1.628000` (Percent), greater than `1.000000`\nParams: {\n  Dimensions: [{\n      Name: \"InstanceId\",\n      Value: \"i-xxxxxxxxxx\"\n    }],\n  EndTime: 2016-12-24 xx:xx:xx +0000 UTC,\n  MetricName: \"CPUUtilization\",\n  Namespace: \"AWS/EC2\",\n  Period: 60,\n  StartTime: 2016-12-24 xx:xx:xx +0000 UTC,\n  Statistics: [\"Average\"]\n}\n```\n\n\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u540c\u69d8\u306bMackerel\u306econf\u306b\u8a18\u8f09\u3059\u308c\u3070\u3088\u3044\u3002\n\n```\n[plugin.checks.cloudwatch-i-xxxxxxxxx-cpu]\ncommand = \"/usr/local/bin/metrin --namespace AWS/EC2 --metric-name CPUUtilization --statistic Average --dimension InstanceId:i-xxxxxxxxx --start-time -600 check --critical-gt 1\"\nnotification_interval = 60\nmax_check_attempts = 1\ncheck_interval = 1\n```\n\n\u3053\u308c\u3067\u76e3\u8996\u8a2d\u5b9a\u3082\u53ef\u80fd\u3002\n\n## \u304a\u307e\u3051\n\n\u8907\u6570dimension\u304c\u3042\u308b\u5834\u5408\u306f[--dimension]\u3092\u8907\u6570\u8a18\u8f09\u3059\u308c\u3070\u3088\u3044\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u66f8\u304d\u65b9\u306fGo\u306ePackage template\u3092\u53c2\u7167\nhttps://golang.org/pkg/text/template/\n\n## etc\n\n\u4f7f\u3044\u307e\u308f\u305b\u308b\u6c4e\u7528\u76e3\u8996\u30d7\u30e9\u30b0\u30a4\u30f3Metrin\u306e\u7d39\u4ecb\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u4e00\u3064\u4e00\u3064\u306e\u5024\u3092\u53d6\u5f97\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3067\u3059\u304c\u3001conf\u306e\u53cd\u6620\u306fchef\u306a\u3069\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3042\u307e\u308a\u6c17\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u305d\u308c\u3067\u306f\u7686\u3055\u3093\u3001\u697d\u3057\u3044Mackrel\u30e9\u30a4\u30d5\u3092\uff01\n\n\uff3c\uff71\uff6f\uff76\uff98\uff5e\uff9d\uff0f \n\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u540d\u304c\u4f3c\u3066\u308b\u306a\u3063\u3066\u601d\u3063\u305f\u3051\u3069\u3001\u4ffa\u3060\u3051\u3060\u3063\u305f\u6a21\u69d8\u3002\n12\u670824\u65e5\u306b\u8a18\u4e8b\u3092\u4e0a\u3052\u308b\u3068\u8a00\u3063\u305f\u304c\u3001JST\u3068\u306f\u8a00\u3063\u3066\u3044\u306a\u3044\u3002\uff08\u3054\u3081\u3093\u306a\u3055\u3044\n\n", "tags": ["Mackerel", "zabbix", "Sensu", "Metrin", "CloudWatch"]}