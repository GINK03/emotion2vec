{"context": "\n\nFirebase Cloud Messaging \u3092\u4f7f\u3063\u3066Android\u7aef\u672b\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u3059\u308b\u3010Delphi 10.1 Berlin update 2\u3011\n\u5143\u30cd\u30bf\u306f\u4e0b\u8a18URL\u3067\u3059\nhttp://thundaxsoftware.blogspot.jp/2017/01/firebase-cloud-messaging-with-delphi.html\nGoogle\u306eFireBase\u3092\u4f7f\u7528\u3057\u3066\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092Android\u7aef\u672b\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\u79c1\u7684\u5099\u5fd8\u9332\u3092\u517c\u306d\u3066\n\n\u74b0\u5883\nDelphi 10.1 Berlin update 2\nAndroid 4.1.1\nFirebase\n\nTodo\n1.FireBase\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\n2.Android\u7aef\u672b\u5074\u3067FCM Token\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u307e\u3059\n3.Android\u7aef\u672b\u5074\u3067FCM Push Notification\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\n\nFireBase\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\n\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092FireBase\u5074\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306f\u4efb\u610f\u3067\u767b\u9332\u3057\u307e\u3059\u3002\n\u5f8c\u304b\u3089\u3067\u3082\u4fee\u6b63\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fAndroid\u3067\u3059\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092\u5165\u529b\u3057\u3066\u3001\n\u30a2\u30d7\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u3092\u8ffd\u52a0\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068google-services.json\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\njson\u306b\u306f\u30a2\u30d7\u30ea\u306e\u60c5\u5831\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u7d9a\u884c\u30dc\u30bf\u30f3\n\n\u7d42\u4e86\u30dc\u30bf\u30f3\nFireBase\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30d7\u30ea\u304c\u8ffd\u52a0\u3067\u304d\u307e\u3057\u305f\u3002\n\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092Delphi\u5074\u3067\u767b\u9332\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nFireBase\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3068Delphi\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e00\u7dd2\u306b\u3059\u308c\u3070\u3088\u3044\u306e\u3067\n\nDelphi\u5074\u3067\u3082package\u540d\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nAndroid\u7aef\u672b\u5074\u3067FCM Token\u306e\u30ea\u30af\u30a8\u30b9\u30c8\nForm\u306bButton\u3068Memo\u3092\u304a\u304d\u307e\u3059\u3002\n\nButton\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\nFCM Token\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3001\n\u305d\u306e\u7d50\u679c\u3092Memo\u306b\u51fa\u529b\u3057\u307e\u3059\u3002\nunit Mainform;\n\ninterface\n\nuses\n  System.SysUtils\n  , System.Types\n  , System.UITypes\n  , System.Classes\n  , System.Variants\n  , FMX.Types\n  , FMX.Controls\n  , FMX.Forms\n  , FMX.Graphics\n  , FMX.Dialogs\n  , System.PushNotification\n  , FMX.Controls.Presentation\n  , FMX.ScrollBox, FMX.Memo,\n  , FMX.StdCtrls\n  , System.Notification\n  {$IFDEF ANDROID}\n    , FMX.PushNotification.Android\n  {$ENDIF}\n  ;\n\ntype\n  TForm1 = class(TForm)\n    Memo1: TMemo;\n    Button1: TButton;\n    procedure Button1Click(Sender: TObject);\n  private\n    { private \u5ba3\u8a00 }\n    PushService : TPushService;\n    ServiceConnection : TPushServiceConnection;\n    procedure ShowTokenExecute(Sender:TObject);\n    procedure OnServiceConnectionChange(Sender : TObject; PushChange: TPushService.TChanges);\n    procedure OnReceiveNotificationEvent(Sender : TObject; const ServiceNotification: TPushServiceNotification);\n  public\n    { public \u5ba3\u8a00 }\n  end;\nprocedure TForm1.Button1Click(Sender: TObject);\nbegin\n  ShowTokenExecute(Self);\nend;\n\nprocedure TForm1.ShowTokenExecute(Sender: TObject);\nvar\n  DeviceId, DeviceToken : String;\nbegin\n  {$IFDEF ANDROID}\n    PushService := TPushServiceManager.Instance.GetServiceByName(TPushService.TServiceNames.GCM);\n    PushService.AppProps[TPushService.TAppPropNames.GCMAppID] := 'SENDER ID';\n  {$ENDIF}\n  ServiceConnection := TPushServiceConnection.Create(PushService);\n  ServiceConnection.Active := True;\n  ServiceConnection.OnChange := OnServiceConnectionChange;\n  ServiceConnection.OnReceiveNotification := OnReceiveNotificationEvent;\n\n  DeviceId := PushService.DeviceIDValue[TPushService.TDeviceIDNames.DeviceID];\n  DeviceToken := PushService.DeviceTokenValue[TPushService.TDeviceTokenNames.DeviceToken];\n\n\n  Memo1.Lines.Add('DeviceID:' + DeviceId);\n  Memo1.Lines.Add('FCM Token:' + DeviceToken);\n  Memo1.Lines.Add('Ready to Receive!');\nend;\nprocedure TForm1.OnReceiveNotificationEvent(Sender: TObject;\n  const ServiceNotification: TPushServiceNotification);\nvar\n  MessageText : String;\nbegin\n  // Do something with the notification received from FCM\nend;\n\nprocedure TForm1.OnServiceConnectionChange(Sender: TObject;\n  PushChange: TPushService.TChanges);\nbegin\n  // Do something if the service connection change;\nend;\n\nButton\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\nMemo\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\nSenderID\u90e8\u5206\u306bFireBase\u306e\u9001\u4fe1\u8005ID\u3092\u5165\u529b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nShowTokenExecute\u90e8\u306e\nPushService.AppProps[TPushService.TAppPropNames.GCMAppID] := 'SENDER ID';\n\u3092SENDER ID\u3092\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\n\u307e\u305f\u3001Delphi\u5074\u3067Android\u7528\u306eManifest\u3078\u306e\u8a18\u8ff0\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\nDelphi\u5074\u3067\u306eManifest\u3078\u306e\u8a2d\u5b9a \u305d\u306e1\n\n\u8cc7\u683c\u30ea\u30b9\u30c8\u304b\u3089\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u306e\u53d7\u4fe1\u3092True\u306b\u3057\u307e\u3059\u3002\n\nDelphi\u5074\u3067\u306eManifest\u3078\u306e\u8a2d\u5b9a \u305d\u306e2\n<%uses-permission%>\n<!-- This needs to be added to receive FCM pushes. \n  It is used when receiving a broadcast from GCM server that contains a GCM message. -->\n<uses-permission android:name=\"com.google.android.c2dm.permission.RECEIVE\" />\n\n<!-- Add this intent under %services%. -->\n<intent-filter>  \n    <action android:name=\"android.intent.action.MAIN\" />\n    <category android:name=\"android.intent.category.LAUNCHER\" />\n</intent-filter> \n\n<!-- Add this service under %receivers%. -->\n<service android:name=\"com.embarcadero.gcm.notifications.GCMIntentService\" />\n\n\u5404\u9805\u76ee\u304cManifest\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u306a\u3051\u308c\u3070\u3001\u8ffd\u52a0\u3059\u308b\u3002\n\u5b9f\u969b\u306bToken\u3092Request\u3057\u3066\u307f\u307e\u3059\u3002\n\nButton\u3092\u30bf\u30c3\u30d7\u3057\u3066\u3001\n\u5b9f\u969b\u306b\u53d6\u5f97\u3057\u305f\u72b6\u614b\u3067\u3059\u3002\nDeviceID\u3068FCM Token\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\nAndroid\u3067Push\u3092\u53d7\u4fe1\nAndroid\u5074\u306eReceiveNotificationEvent\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001NotificationEvent\u304b\u3089\u3001Android\u5074\u306eNotificationCenter\u3082\u8a18\u8ff0\u3057\u307e\u3059\u3002\nprocedure TForm1.OnReceiveNotificationEvent(Sender: TObject;\n  const ServiceNotification: TPushServiceNotification);\nvar\n  MessageText : String;\nbegin\n  Memo1.Lines.Add('Datakey = ' + ServiceNotification.DataKey);\n  Memo1.Lines.Add('Json = ' + ServiceNotification.Json.ToString);\n  Memo1.Lines.Add('DataObject = ' + ServiceNotification.DataObject.ToString);\n\n\n  {$IFDEF ANDROID}\n    MessageText := ServiceNotification.DataObject.GetValue('gcm.notification.body').Value;\n  {$ENDIF}\n  Memo1.Lines.Add(DateTimetoStr(Now) + 'Message = ' + MessageText);\n  ShowAndroidNotification(MessageText, 0);\n\n  // Do something with the notification received from FCM\nend;\n\nprocedure TForm1.ShowAndroidNotification(MessageText: string;\n  NotificationNumber: integer);\nvar\n  NotificationCenter : TNotificationCenter;\n  Notification : TNotification;\nbegin\n  NotificationCenter := TNotificationCenter.Create(nil);\n  try\n    Notification := NotificationCenter.CreateNotification;\n    try\n      Notification.Name := MessageText;\n      Notification.AlertBody := MessageText;\n      Notification.Title := MessageText;\n      Notification.EnableSound := false;\n      Notification.Number := NotificationNumber;\n      NotificationCenter.ApplicationIconBadgeNumber := NotificationNumber;\n      NotificationCenter.PresentNotification(Notification);\n    finally\n      Notification.DisposeOf;\n    end;\n  finally\n    NotificationCenter.Free;\n    NotificationCenter.DisposeOf;\n  end;\nend;\n\n\n\u3053\u308c\u3067\u53d7\u4fe1\u5f8c\u3001Android\u5074\u3067Notification\u3092\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u65e9\u901fFireBase\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u3057\u3070\u3089\u304f\u3059\u308b\u3068\u3001\nAndroid\u5074\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3067\u304d\u307e\u3059\u3002\n\n\u7121\u4e8b\u306b\u53d7\u4fe1\u3067\u304d\u307e\u3057\u305f\u3002\n\u6b21\u306fiOS\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n#Firebase Cloud Messaging \u3092\u4f7f\u3063\u3066Android\u7aef\u672b\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u3059\u308b\u3010Delphi 10.1 Berlin update 2\u3011\n\u5143\u30cd\u30bf\u306f\u4e0b\u8a18URL\u3067\u3059\nhttp://thundaxsoftware.blogspot.jp/2017/01/firebase-cloud-messaging-with-delphi.html\n\nGoogle\u306eFireBase\u3092\u4f7f\u7528\u3057\u3066\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092Android\u7aef\u672b\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n\u79c1\u7684\u5099\u5fd8\u9332\u3092\u517c\u306d\u3066\n\n#\u74b0\u5883\nDelphi 10.1 Berlin update 2\nAndroid 4.1.1\nFirebase\n\n#Todo\n1.FireBase\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\n2.Android\u7aef\u672b\u5074\u3067FCM Token\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u307e\u3059\n3.Android\u7aef\u672b\u5074\u3067FCM Push Notification\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\n\n#FireBase\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/096ff1e2-db64-1261-e37a-7bc8955f96ae.png)\n\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092FireBase\u5074\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/66cf68d2-8d38-0723-13ac-24a135c952aa.png)\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306f\u4efb\u610f\u3067\u767b\u9332\u3057\u307e\u3059\u3002\n\u5f8c\u304b\u3089\u3067\u3082\u4fee\u6b63\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/cd97e6dd-dc52-878a-f4fd-4daa38eda2f3.png)\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fAndroid\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/d14b29a9-b619-ba13-bcf2-b1b751988944.png)\n\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092\u5165\u529b\u3057\u3066\u3001\n\u30a2\u30d7\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u3092\u8ffd\u52a0\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068google-services.json\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\njson\u306b\u306f\u30a2\u30d7\u30ea\u306e\u60c5\u5831\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/a247977d-3067-f5ae-92c2-a3101db9378b.png)\n\u7d9a\u884c\u30dc\u30bf\u30f3\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/dab7a147-ccfc-bfea-3ae0-c6684006f7fd.png)\n\u7d42\u4e86\u30dc\u30bf\u30f3\nFireBase\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30d7\u30ea\u304c\u8ffd\u52a0\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092Delphi\u5074\u3067\u767b\u9332\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nFireBase\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3068Delphi\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e00\u7dd2\u306b\u3059\u308c\u3070\u3088\u3044\u306e\u3067\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/4759151e-ebef-f9e7-7376-80be5f687e1a.png)\nDelphi\u5074\u3067\u3082package\u540d\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n#Android\u7aef\u672b\u5074\u3067FCM Token\u306e\u30ea\u30af\u30a8\u30b9\u30c8\nForm\u306bButton\u3068Memo\u3092\u304a\u304d\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/c6b92ace-0c1f-a538-9483-34ac182a355e.png)\nButton\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\nFCM Token\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3001\n\u305d\u306e\u7d50\u679c\u3092Memo\u306b\u51fa\u529b\u3057\u307e\u3059\u3002\n\n```\nunit Mainform;\n\ninterface\n\nuses\n  System.SysUtils\n  , System.Types\n  , System.UITypes\n  , System.Classes\n  , System.Variants\n  , FMX.Types\n  , FMX.Controls\n  , FMX.Forms\n  , FMX.Graphics\n  , FMX.Dialogs\n  , System.PushNotification\n  , FMX.Controls.Presentation\n  , FMX.ScrollBox, FMX.Memo,\n  , FMX.StdCtrls\n  , System.Notification\n  {$IFDEF ANDROID}\n    , FMX.PushNotification.Android\n  {$ENDIF}\n  ;\n\ntype\n  TForm1 = class(TForm)\n    Memo1: TMemo;\n    Button1: TButton;\n    procedure Button1Click(Sender: TObject);\n  private\n    { private \u5ba3\u8a00 }\n    PushService : TPushService;\n    ServiceConnection : TPushServiceConnection;\n    procedure ShowTokenExecute(Sender:TObject);\n    procedure OnServiceConnectionChange(Sender : TObject; PushChange: TPushService.TChanges);\n    procedure OnReceiveNotificationEvent(Sender : TObject; const ServiceNotification: TPushServiceNotification);\n  public\n    { public \u5ba3\u8a00 }\n  end;\nprocedure TForm1.Button1Click(Sender: TObject);\nbegin\n  ShowTokenExecute(Self);\nend;\n\nprocedure TForm1.ShowTokenExecute(Sender: TObject);\nvar\n  DeviceId, DeviceToken : String;\nbegin\n  {$IFDEF ANDROID}\n    PushService := TPushServiceManager.Instance.GetServiceByName(TPushService.TServiceNames.GCM);\n    PushService.AppProps[TPushService.TAppPropNames.GCMAppID] := 'SENDER ID';\n  {$ENDIF}\n  ServiceConnection := TPushServiceConnection.Create(PushService);\n  ServiceConnection.Active := True;\n  ServiceConnection.OnChange := OnServiceConnectionChange;\n  ServiceConnection.OnReceiveNotification := OnReceiveNotificationEvent;\n\n  DeviceId := PushService.DeviceIDValue[TPushService.TDeviceIDNames.DeviceID];\n  DeviceToken := PushService.DeviceTokenValue[TPushService.TDeviceTokenNames.DeviceToken];\n\n\n  Memo1.Lines.Add('DeviceID:' + DeviceId);\n  Memo1.Lines.Add('FCM Token:' + DeviceToken);\n  Memo1.Lines.Add('Ready to Receive!');\nend;\nprocedure TForm1.OnReceiveNotificationEvent(Sender: TObject;\n  const ServiceNotification: TPushServiceNotification);\nvar\n  MessageText : String;\nbegin\n  // Do something with the notification received from FCM\nend;\n\nprocedure TForm1.OnServiceConnectionChange(Sender: TObject;\n  PushChange: TPushService.TChanges);\nbegin\n  // Do something if the service connection change;\nend;\n```\nButton\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\nMemo\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/73b9bb9a-6e20-5def-6784-38f41ae3c26a.png)\nSenderID\u90e8\u5206\u306bFireBase\u306e\u9001\u4fe1\u8005ID\u3092\u5165\u529b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nShowTokenExecute\u90e8\u306e\n```PushService.AppProps[TPushService.TAppPropNames.GCMAppID] := 'SENDER ID';\n```\u3092SENDER ID\u3092\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\n\n\n\u307e\u305f\u3001Delphi\u5074\u3067Android\u7528\u306eManifest\u3078\u306e\u8a18\u8ff0\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n##Delphi\u5074\u3067\u306eManifest\u3078\u306e\u8a2d\u5b9a \u305d\u306e1\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/887ec61b-ddcc-a500-e100-f28e8a3149a8.png)\n\u8cc7\u683c\u30ea\u30b9\u30c8\u304b\u3089\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u306e\u53d7\u4fe1\u3092True\u306b\u3057\u307e\u3059\u3002\n\n##Delphi\u5074\u3067\u306eManifest\u3078\u306e\u8a2d\u5b9a \u305d\u306e2\n```\n<%uses-permission%>\n<!-- This needs to be added to receive FCM pushes. \n  It is used when receiving a broadcast from GCM server that contains a GCM message. -->\n<uses-permission android:name=\"com.google.android.c2dm.permission.RECEIVE\" />\n  \n<!-- Add this intent under %services%. -->\n<intent-filter>  \n    <action android:name=\"android.intent.action.MAIN\" />\n    <category android:name=\"android.intent.category.LAUNCHER\" />\n</intent-filter> \n\n<!-- Add this service under %receivers%. -->\n<service android:name=\"com.embarcadero.gcm.notifications.GCMIntentService\" />\n```\n\u5404\u9805\u76ee\u304cManifest\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u306a\u3051\u308c\u3070\u3001\u8ffd\u52a0\u3059\u308b\u3002\n\n\u5b9f\u969b\u306bToken\u3092Request\u3057\u3066\u307f\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/3c6814f3-2186-031c-68c4-8f5a48654dc3.png)\nButton\u3092\u30bf\u30c3\u30d7\u3057\u3066\u3001\n\u5b9f\u969b\u306b\u53d6\u5f97\u3057\u305f\u72b6\u614b\u3067\u3059\u3002\nDeviceID\u3068FCM Token\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n#Android\u3067Push\u3092\u53d7\u4fe1\nAndroid\u5074\u306eReceiveNotificationEvent\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001NotificationEvent\u304b\u3089\u3001Android\u5074\u306eNotificationCenter\u3082\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```\nprocedure TForm1.OnReceiveNotificationEvent(Sender: TObject;\n  const ServiceNotification: TPushServiceNotification);\nvar\n  MessageText : String;\nbegin\n  Memo1.Lines.Add('Datakey = ' + ServiceNotification.DataKey);\n  Memo1.Lines.Add('Json = ' + ServiceNotification.Json.ToString);\n  Memo1.Lines.Add('DataObject = ' + ServiceNotification.DataObject.ToString);\n\n\n  {$IFDEF ANDROID}\n    MessageText := ServiceNotification.DataObject.GetValue('gcm.notification.body').Value;\n  {$ENDIF}\n  Memo1.Lines.Add(DateTimetoStr(Now) + 'Message = ' + MessageText);\n  ShowAndroidNotification(MessageText, 0);\n\n  // Do something with the notification received from FCM\nend;\n\nprocedure TForm1.ShowAndroidNotification(MessageText: string;\n  NotificationNumber: integer);\nvar\n  NotificationCenter : TNotificationCenter;\n  Notification : TNotification;\nbegin\n  NotificationCenter := TNotificationCenter.Create(nil);\n  try\n    Notification := NotificationCenter.CreateNotification;\n    try\n      Notification.Name := MessageText;\n      Notification.AlertBody := MessageText;\n      Notification.Title := MessageText;\n      Notification.EnableSound := false;\n      Notification.Number := NotificationNumber;\n      NotificationCenter.ApplicationIconBadgeNumber := NotificationNumber;\n      NotificationCenter.PresentNotification(Notification);\n    finally\n      Notification.DisposeOf;\n    end;\n  finally\n    NotificationCenter.Free;\n    NotificationCenter.DisposeOf;\n  end;\nend;\n\n```\n\u3053\u308c\u3067\u53d7\u4fe1\u5f8c\u3001Android\u5074\u3067Notification\u3092\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u65e9\u901fFireBase\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/36f4a131-90cd-831e-072d-067c8d8731aa.png)\n\u3057\u3070\u3089\u304f\u3059\u308b\u3068\u3001\nAndroid\u5074\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3067\u304d\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/143249/dc3b998b-9605-555b-609d-b1844a9b27bc.png)\n\n\u7121\u4e8b\u306b\u53d7\u4fe1\u3067\u304d\u307e\u3057\u305f\u3002\n\n\n\n\u6b21\u306fiOS\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\n\n\n\n", "tags": ["Delphi", "FireMonkey", "Push", "Android", "Notification"]}