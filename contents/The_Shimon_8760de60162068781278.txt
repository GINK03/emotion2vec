{"context": "UITableView\u3068\u30bb\u30c3\u30c8\u3067\u3088\u304f\u4f7f\u308f\u308c\u308b\u691c\u7d22\u30d0\u30fc\u3001\nUISearchController\u3068UISearchBar\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4f3c\u305f\u3082\u306e\u3067UISearchDisplayController\u304c\u3042\u308a\u307e\u3059\u304c\u3001\n\u3053\u3061\u3089\u306fiOS8\u304b\u3089\u975e\u63a8\u5968\u3068\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u4f7f\u308f\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\nUISearchController\n\n\u30c7\u30e2\n\n\n\u30b3\u30fc\u30c9\n\nViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController, UITableViewDelegate, UITableViewDataSource, UISearchResultsUpdating {\n\n    let PPAP:[String] = [\"PPAP\", \"I have a pen\", \"I have a apple\", \"Uh! Apple-Pen!\", \"I have a pen\", \"I have pineapple\", \"Uh! Pineapple-Pen!\", \"Apple-Pen, Pineapple-Pen\", \"Uh! Pen-Pineapple-Apple-Pen\", \"Pen-Pineapple-Apple-Pen\"]\n    var searchResults:[String] = []\n    var tableView: UITableView!\n    var searchController = UISearchController()\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        let barHeight: CGFloat = UIApplication.shared.statusBarFrame.size.height\n        tableView = UITableView(frame: CGRect(x: 0, y: barHeight, width: self.view.frame.width, height: self.view.frame.height))\n        tableView.register(UITableViewCell.self, forCellReuseIdentifier: \"cell\")\n        tableView.dataSource = self\n        tableView.delegate = self\n        self.view.addSubview(tableView)\n\n        searchController = UISearchController(searchResultsController: nil)\n        searchController.searchResultsUpdater = self\n        searchController.searchBar.sizeToFit()\n        searchController.dimsBackgroundDuringPresentation = false\n        searchController.hidesNavigationBarDuringPresentation = false\n\n        tableView.tableHeaderView = searchController.searchBar\n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n    }\n\n    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n        if searchController.isActive {\n            return searchResults.count\n        } else {\n            return PPAP.count\n        }\n    }\n\n    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {\n        let cell = tableView.dequeueReusableCell(withIdentifier: \"cell\", for: indexPath as IndexPath)\n        if searchController.isActive {\n            cell.textLabel!.text = \"\\(searchResults[indexPath.row])\"\n        } else {\n            cell.textLabel!.text = \"\\(PPAP[indexPath.row])\"\n        }\n\n        return cell\n    }\n\n    // \u6587\u5b57\u304c\u5165\u529b\u3055\u308c\u308b\u5ea6\u306b\u547c\u3070\u308c\u308b\n    func updateSearchResults(for searchController: UISearchController) {\n        self.searchResults = PPAP.filter{\n            // \u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306b\u691c\u7d22\n            $0.lowercased().contains(searchController.searchBar.text!.lowercased())\n        }\n        self.tableView.reloadData()\n    }\n\n}\n\n\n\nUISearchBar\n\n\u30c7\u30e2\n\n\n\u30b3\u30fc\u30c9\n\nViewController.swift\nimport UIKit\n\nclass SearchBarViewController: UIViewController, UITableViewDelegate, UITableViewDataSource, UISearchBarDelegate {\n\n    let PPAP:[String] = [\"PPAP\", \"I have a pen\", \"I have a apple\", \"Uh! Apple-Pen!\", \"I have a pen\", \"I have pineapple\", \"Uh! Pineapple-Pen!\", \"Apple-Pen, Pineapple-Pen\", \"Uh! Pen-Pineapple-Apple-Pen\", \"Pen-Pineapple-Apple-Pen\"]\n    var searchResults:[String] = []\n    var tableView: UITableView!\n    var searchBar = UISearchBar()\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        let barHeight: CGFloat = UIApplication.shared.statusBarFrame.size.height\n        tableView = UITableView(frame: CGRect(x: 0, y: barHeight, width: self.view.frame.width, height: self.view.frame.height))\n        tableView.register(UITableViewCell.self, forCellReuseIdentifier: \"cell\")\n        tableView.dataSource = self\n        tableView.delegate = self\n        self.view.addSubview(tableView)\n\n        searchBar = UISearchBar()\n        searchBar.delegate = self\n        searchBar.frame = CGRect(x:0, y:0, width:self.view.frame.width, height:42)\n        searchBar.layer.position = CGPoint(x: self.view.bounds.width/2, y: 89)\n        searchBar.searchBarStyle = UISearchBarStyle.default\n        searchBar.showsSearchResultsButton = false\n        searchBar.placeholder = \"\u691c\u7d22\"\n        searchBar.setValue(\"\u30ad\u30e3\u30f3\u30bb\u30eb\", forKey: \"_cancelButtonText\")\n        searchBar.tintColor = UIColor.red\n\n        tableView.tableHeaderView = searchBar\n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n    }\n\n    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n        if searchBar.text != \"\" {\n            return searchResults.count\n        } else {\n            return PPAP.count\n        }\n    }\n\n    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {\n        let cell = tableView.dequeueReusableCell(withIdentifier: \"cell\", for: indexPath as IndexPath)\n        if searchBar.text != \"\" {\n            cell.textLabel!.text = \"\\(searchResults[indexPath.row])\"\n        } else {\n            cell.textLabel!.text = \"\\(PPAP[indexPath.row])\"\n        }\n\n        return cell\n    }\n\n    // \u691c\u7d22\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u547c\u3070\u308c\u308b\n    func searchBarSearchButtonClicked(_ searchBar: UISearchBar) {\n        self.view.endEditing(true)\n        searchBar.showsCancelButton = true\n        self.searchResults = PPAP.filter{\n            // \u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306b\u691c\u7d22\n            $0.lowercased().contains(searchBar.text!.lowercased())\n        }\n        self.tableView.reloadData()\n    }\n\n    // \u30ad\u30e3\u30f3\u30bb\u30eb\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u547c\u3070\u308c\u308b\n    func searchBarCancelButtonClicked(_ searchBar: UISearchBar) {\n        searchBar.showsCancelButton = false\n        self.view.endEditing(true)\n        searchBar.text = \"\"\n        self.tableView.reloadData()\n    }\n\n    // \u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u5165\u529b\u958b\u59cb\u524d\u306b\u547c\u3070\u308c\u308b\n    func searchBarShouldBeginEditing(_ searchBar: UISearchBar) -> Bool {\n        searchBar.showsCancelButton = true\n        return true\n    }\n}\n\n\n\nUITableView\u3068\u30bb\u30c3\u30c8\u3067\u3088\u304f\u4f7f\u308f\u308c\u308b\u691c\u7d22\u30d0\u30fc\u3001\nUISearchController\u3068UISearchBar\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n\u4f3c\u305f\u3082\u306e\u3067UISearchDisplayController\u304c\u3042\u308a\u307e\u3059\u304c\u3001\n\u3053\u3061\u3089\u306fiOS8\u304b\u3089\u975e\u63a8\u5968\u3068\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u4f7f\u308f\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n# UISearchController\n\n## \u30c7\u30e2\n![uisearchcontroller.gif](https://qiita-image-store.s3.amazonaws.com/0/135478/2ee8190d-e2cf-407b-a06d-1f0e754fade9.gif)\n\n## \u30b3\u30fc\u30c9\n\n```ViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController, UITableViewDelegate, UITableViewDataSource, UISearchResultsUpdating {\n    \n    let PPAP:[String] = [\"PPAP\", \"I have a pen\", \"I have a apple\", \"Uh! Apple-Pen!\", \"I have a pen\", \"I have pineapple\", \"Uh! Pineapple-Pen!\", \"Apple-Pen, Pineapple-Pen\", \"Uh! Pen-Pineapple-Apple-Pen\", \"Pen-Pineapple-Apple-Pen\"]\n    var searchResults:[String] = []\n    var tableView: UITableView!\n    var searchController = UISearchController()\n    \n    override func viewDidLoad() {\n        super.viewDidLoad()\n        \n        let barHeight: CGFloat = UIApplication.shared.statusBarFrame.size.height\n        tableView = UITableView(frame: CGRect(x: 0, y: barHeight, width: self.view.frame.width, height: self.view.frame.height))\n        tableView.register(UITableViewCell.self, forCellReuseIdentifier: \"cell\")\n        tableView.dataSource = self\n        tableView.delegate = self\n        self.view.addSubview(tableView)\n        \n        searchController = UISearchController(searchResultsController: nil)\n        searchController.searchResultsUpdater = self\n        searchController.searchBar.sizeToFit()\n        searchController.dimsBackgroundDuringPresentation = false\n        searchController.hidesNavigationBarDuringPresentation = false\n        \n        tableView.tableHeaderView = searchController.searchBar\n    }\n    \n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n    }\n    \n    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n        if searchController.isActive {\n            return searchResults.count\n        } else {\n            return PPAP.count\n        }\n    }\n    \n    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {\n        let cell = tableView.dequeueReusableCell(withIdentifier: \"cell\", for: indexPath as IndexPath)\n        if searchController.isActive {\n            cell.textLabel!.text = \"\\(searchResults[indexPath.row])\"\n        } else {\n            cell.textLabel!.text = \"\\(PPAP[indexPath.row])\"\n        }\n        \n        return cell\n    }\n    \n    // \u6587\u5b57\u304c\u5165\u529b\u3055\u308c\u308b\u5ea6\u306b\u547c\u3070\u308c\u308b\n    func updateSearchResults(for searchController: UISearchController) {\n        self.searchResults = PPAP.filter{\n            // \u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306b\u691c\u7d22\n            $0.lowercased().contains(searchController.searchBar.text!.lowercased())\n        }\n        self.tableView.reloadData()\n    }\n    \n}\n```\n\n# UISearchBar\n\n## \u30c7\u30e2\n![uisearchbar.gif](https://qiita-image-store.s3.amazonaws.com/0/135478/46d7b231-5d6d-78c6-cccc-44ca0cbdf809.gif)\n\n## \u30b3\u30fc\u30c9\n\n```ViewController.swift\nimport UIKit\n\nclass SearchBarViewController: UIViewController, UITableViewDelegate, UITableViewDataSource, UISearchBarDelegate {\n    \n    let PPAP:[String] = [\"PPAP\", \"I have a pen\", \"I have a apple\", \"Uh! Apple-Pen!\", \"I have a pen\", \"I have pineapple\", \"Uh! Pineapple-Pen!\", \"Apple-Pen, Pineapple-Pen\", \"Uh! Pen-Pineapple-Apple-Pen\", \"Pen-Pineapple-Apple-Pen\"]\n    var searchResults:[String] = []\n    var tableView: UITableView!\n    var searchBar = UISearchBar()\n    \n    override func viewDidLoad() {\n        super.viewDidLoad()\n        \n        let barHeight: CGFloat = UIApplication.shared.statusBarFrame.size.height\n        tableView = UITableView(frame: CGRect(x: 0, y: barHeight, width: self.view.frame.width, height: self.view.frame.height))\n        tableView.register(UITableViewCell.self, forCellReuseIdentifier: \"cell\")\n        tableView.dataSource = self\n        tableView.delegate = self\n        self.view.addSubview(tableView)\n        \n        searchBar = UISearchBar()\n        searchBar.delegate = self\n        searchBar.frame = CGRect(x:0, y:0, width:self.view.frame.width, height:42)\n        searchBar.layer.position = CGPoint(x: self.view.bounds.width/2, y: 89)\n        searchBar.searchBarStyle = UISearchBarStyle.default\n        searchBar.showsSearchResultsButton = false\n        searchBar.placeholder = \"\u691c\u7d22\"\n        searchBar.setValue(\"\u30ad\u30e3\u30f3\u30bb\u30eb\", forKey: \"_cancelButtonText\")\n        searchBar.tintColor = UIColor.red\n        \n        tableView.tableHeaderView = searchBar\n    }\n    \n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n    }\n    \n    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n        if searchBar.text != \"\" {\n            return searchResults.count\n        } else {\n            return PPAP.count\n        }\n    }\n    \n    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {\n        let cell = tableView.dequeueReusableCell(withIdentifier: \"cell\", for: indexPath as IndexPath)\n        if searchBar.text != \"\" {\n            cell.textLabel!.text = \"\\(searchResults[indexPath.row])\"\n        } else {\n            cell.textLabel!.text = \"\\(PPAP[indexPath.row])\"\n        }\n        \n        return cell\n    }\n    \n    // \u691c\u7d22\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u547c\u3070\u308c\u308b\n    func searchBarSearchButtonClicked(_ searchBar: UISearchBar) {\n        self.view.endEditing(true)\n        searchBar.showsCancelButton = true\n        self.searchResults = PPAP.filter{\n            // \u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306b\u691c\u7d22\n            $0.lowercased().contains(searchBar.text!.lowercased())\n        }\n        self.tableView.reloadData()\n    }\n    \n    // \u30ad\u30e3\u30f3\u30bb\u30eb\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u547c\u3070\u308c\u308b\n    func searchBarCancelButtonClicked(_ searchBar: UISearchBar) {\n        searchBar.showsCancelButton = false\n        self.view.endEditing(true)\n        searchBar.text = \"\"\n        self.tableView.reloadData()\n    }\n    \n    // \u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u5165\u529b\u958b\u59cb\u524d\u306b\u547c\u3070\u308c\u308b\n    func searchBarShouldBeginEditing(_ searchBar: UISearchBar) -> Bool {\n        searchBar.showsCancelButton = true\n        return true\n    }\n}\n\n```\n", "tags": ["Swift", "Swift3.0", "iOS"]}