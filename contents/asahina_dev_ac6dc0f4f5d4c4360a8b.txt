{"tags": ["teraterm", "TeraTermMacro"], "context": " More than 1 year has passed since last update.\u30e1\u30e2\n\nhost.login.ttl\nusername  = ''               ; ssh user\nuserpass  = ''               ; ssh user password\npublickey = '~/.ssl/pub.key' ; ssh public key file\nhostname  = '127.0.0.1:22'   ; ssh host:port\nport      = '22'             ; ssh host connection port\nauth_type = 1                           ; ssh auty type\n; auth_type = 1 : password\n; auth_type = 2 : public key\n; auth_type = 3 : challenge\n; auth_type = 4 : pageant \n;\n\ngetspecialfolder logdir \"MyDocuments\";\nlogfileptn = '%s_%s-%s.log'\n\ngetdate datetime  '%Y%m%d'\ngetdate datetime2 '%Y%m%d-%H%M%S'\n\nsprintf logfileptn username hostname2 datetime2;\nlogfile=inputstr;\n\ndebugmode = 0;\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n\nsshuser = ' /user=';\nstrconcat sshuser username;\n\nsshpass = ' /passwd=';\nstrconcat sshpass userpass;\n\nsshpkey = ' /keyfile=';\nstrconcat sshpkey publickey;\n\nmsg = '';\n\nstrconcat msg hostname ; xample.com\n\nif auth_type=1 then; password\n   sshauth   = ' /ssh /2 /auth=password ';\n\n   sprintf '%s %s %s %s' hostname sshauth sshuser sshpass\n   msg=inputstr;\n\nelseif auth_type=2 then; publickey\n   sshauth   = ' /ssh /2 /auth=publickey ';\n\n   sprintf '%s %s %s %s %s' hostname sshauth sshuser sshpass sshpkey\n   msg=inputstr;\n\nelseif auth_type=3 then; challenge\n   sshauth   = ' /ssh /2 /auth=challenge';\n\n   sprintf '%s %s %s %s' hostname sshauth sshuser sshpass\n   msg=inputstr;\n\nelseif auth_type=4 then; pagent\n   sshauth   = ' /ssh /2 /auth=pagent';\n\n   sprintf '%s %s %s %s' hostname sshauth sshuser\n   msg=inputstr;\n\nendif;\n\nconnect msg;\n\n\nchangedir logdir;\n; binary:appended:plain:timestamp:dialog \nlogautoclosemode 1;\nlogopen logfile 0 1 1 0 0;\n\nlogwrite #13#10;\nlogwrite '***********************************************'\nlogwrite #13#10;\nlogwrite 'login : '\nlogwrite datetime2\nlogwrite #13#10;\nlogwrite '-----------------------------------------------'\nlogwrite #13#10;\n\nif debugmode=1 then\n\n   wait '#' '$'\n   sendln 'id'\n   pause 1;\n\n   wait '#' '$'\n   sendln 'date'\n   pause 1;\n\n   wait '#' '$'\n   sendln '/sbin/ifconfig'\n   pause 1;\n\n   wait '#' '$'\n   send 'ps aux '\n   send '| sed -e \"s/[ ]\\+/ /ig\"'\n   send '| cut -d \" \" -f 11'\n   send '| grep \"/\"'\n   send '| grep \"[[]\" -v'\n   send '| sort'\n   send '| uniq'\n   sendln\n   pause 1;\n\n   wait '#' '$'\n   send 'netstat -an'\n   send '| cut -d \":\" -f 2'\n   send '| cut -d \" \" -f 1'\n   send '| sed -e \"/^$/d\"'\n   send '| sed \"/[^0-9]/d\"'\n   send '| sort'\n   send '| uniq'\n   sendln\n   pause 1;\n\n   wait '#' '$'\n   sendln 'df -H'\n   pause 1;\n\nendif;\n\n\n\n\u30e1\u30e2\n\n```bash:host.login.ttl\nusername  = ''               ; ssh user\nuserpass  = ''               ; ssh user password\npublickey = '~/.ssl/pub.key' ; ssh public key file\nhostname  = '127.0.0.1:22'   ; ssh host:port\nport      = '22'             ; ssh host connection port\nauth_type = 1                           ; ssh auty type\n; auth_type = 1 : password\n; auth_type = 2 : public key\n; auth_type = 3 : challenge\n; auth_type = 4 : pageant \n;\n\ngetspecialfolder logdir \"MyDocuments\";\nlogfileptn = '%s_%s-%s.log'\n\ngetdate datetime  '%Y%m%d'\ngetdate datetime2 '%Y%m%d-%H%M%S'\n\nsprintf logfileptn username hostname2 datetime2;\nlogfile=inputstr;\n\ndebugmode = 0;\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n\nsshuser = ' /user=';\nstrconcat sshuser username;\n\nsshpass = ' /passwd=';\nstrconcat sshpass userpass;\n\nsshpkey = ' /keyfile=';\nstrconcat sshpkey publickey;\n\nmsg = '';\n\nstrconcat msg hostname ; xample.com\n\nif auth_type=1 then; password\n   sshauth   = ' /ssh /2 /auth=password ';\n\n   sprintf '%s %s %s %s' hostname sshauth sshuser sshpass\n   msg=inputstr;\n   \nelseif auth_type=2 then; publickey\n   sshauth   = ' /ssh /2 /auth=publickey ';\n      \n   sprintf '%s %s %s %s %s' hostname sshauth sshuser sshpass sshpkey\n   msg=inputstr;\n\nelseif auth_type=3 then; challenge\n   sshauth   = ' /ssh /2 /auth=challenge';\n      \n   sprintf '%s %s %s %s' hostname sshauth sshuser sshpass\n   msg=inputstr;\n\nelseif auth_type=4 then; pagent\n   sshauth   = ' /ssh /2 /auth=pagent';\n      \n   sprintf '%s %s %s %s' hostname sshauth sshuser\n   msg=inputstr;\n\nendif;\n\nconnect msg;\n\n\nchangedir logdir;\n; binary:appended:plain:timestamp:dialog \nlogautoclosemode 1;\nlogopen logfile 0 1 1 0 0;\n\nlogwrite #13#10;\nlogwrite '***********************************************'\nlogwrite #13#10;\nlogwrite 'login : '\nlogwrite datetime2\nlogwrite #13#10;\nlogwrite '-----------------------------------------------'\nlogwrite #13#10;\n\nif debugmode=1 then\n\n   wait '#' '$'\n   sendln 'id'\n   pause 1;\n\t\n   wait '#' '$'\n   sendln 'date'\n   pause 1;\n\t\n   wait '#' '$'\n   sendln '/sbin/ifconfig'\n   pause 1;\n\t\n   wait '#' '$'\n   send 'ps aux '\n   send '| sed -e \"s/[ ]\\+/ /ig\"'\n   send '| cut -d \" \" -f 11'\n   send '| grep \"/\"'\n   send '| grep \"[[]\" -v'\n   send '| sort'\n   send '| uniq'\n   sendln\n   pause 1;\n\t\n   wait '#' '$'\n   send 'netstat -an'\n   send '| cut -d \":\" -f 2'\n   send '| cut -d \" \" -f 1'\n   send '| sed -e \"/^$/d\"'\n   send '| sed \"/[^0-9]/d\"'\n   send '| sort'\n   send '| uniq'\n   sendln\n   pause 1;\n\t\n   wait '#' '$'\n   sendln 'df -H'\n   pause 1;\n\nendif;\n\n```"}