{"tags": ["dlang"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002D\u8a00\u8a9e Advent Calendar 2014 \u306b\u7a7a\u304d\u304c\u3042\u3063\u305f\u306e\u3067\u66f8\u304b\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u96d1\u6587\u3067\u7533\u3057\u8a33\u306a\u3044\u3067\u3059\u3002\n\n\u548c\u5e03\u856a\n\u3055\u3066\u3055\u3066\u3001\u7686\u3055\u3093\u3001\u548c\u5e03\u856a\u306f\u597d\u304d\u3067\u3059\u304b\uff1f\n\u79c1\u306f\u5927\u597d\u304d\u3067\u3059\u3002\n\u305d\u3093\u306a\u308f\u3051\u3067MeCab\u3092D\u304b\u3089\u4f7f\u3046\u3068\u3044\u3046\u8a71\u3067\u3059\u3002\n\nMeCab\u3068\u306f\nMeCab\u3068\u306f\u3001\u5de5\u85e4\u62d3 \u6c0f\u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u305f\u5f62\u614b\u7d20\u89e3\u6790\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u3002\n\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30fb\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u3057\u3066GPL\u3068\u304bLGPL\u3068\u304bBSD\u30e9\u30a4\u30bb\u30f3\u30b9\u3068\u304b\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067\u4f7f\u3044\u307e\u3059\u3002\n$ echo \"\u5931\u6557\u3057\u305f\u3063\u3066\u3044\u3044\u3058\u3083\u306a\u3044\u3001\u306b\u3093\u3052\u3093\u3060\u3082\u306e\" | mecab\n\u5931\u6557  \u540d\u8a5e,\u30b5\u5909\u63a5\u7d9a,*,*,*,*,\u5931\u6557,\u30b7\u30c3\u30d1\u30a4,\u30b7\u30c3\u30d1\u30a4\n\u3057 \u52d5\u8a5e,\u81ea\u7acb,*,*,\u30b5\u5909\u30fb\u30b9\u30eb,\u9023\u7528\u5f62,\u3059\u308b,\u30b7,\u30b7\n\u305f \u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30bf,\u57fa\u672c\u5f62,\u305f,\u30bf,\u30bf\n\u3063\u3066  \u52a9\u8a5e,\u683c\u52a9\u8a5e,\u9023\u8a9e,*,*,*,\u3063\u3066,\u30c3\u30c6,\u30c3\u30c6\n\u3044\u3044  \u5f62\u5bb9\u8a5e,\u81ea\u7acb,*,*,\u5f62\u5bb9\u8a5e\u30fb\u30a4\u30a4,\u57fa\u672c\u5f62,\u3044\u3044,\u30a4\u30a4,\u30a4\u30a4\n\u3058\u3083  \u52a9\u8a5e,\u526f\u52a9\u8a5e,*,*,*,*,\u3058\u3083,\u30b8\u30e3,\u30b8\u30e3\n\u306a\u3044  \u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30ca\u30a4,\u57fa\u672c\u5f62,\u306a\u3044,\u30ca\u30a4,\u30ca\u30a4\n\u3001 \u8a18\u53f7,\u8aad\u70b9,*,*,*,*,\u3001,\u3001,\u3001\n\u306b\u3093\u3052\u3093\u3060\u3082\u306e   \u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u4e00\u822c,*,*,*,\u306b\u3093\u3052\u3093\u3060\u3082\u306e,\u30cb\u30f3\u30b2\u30f3\u30c0\u30e2\u30ce,\u30cb\u30f3\u30b2\u30f3\u30c0\u30e2\u30ce\nEOS\n\n\u2026\u2026MeCab\u3055\u3093\u7684\u306b\u306f\uff08\u3068\u3044\u3046\u304bIPA\u8f9e\u66f8\u7684\u306b\u306f\uff09\u300c\u306b\u3093\u3052\u3093\u3060\u3082\u306e\u300d\u306f\u56fa\u6709\u540d\u8a5e\u306e\u3088\u3046\u3067\u3059\u3002\n\u30c9\u30e9\u30de\u306e\u30bf\u30a4\u30c8\u30eb\u3060\u304b\u3089\uff1f\u3000\u307e\u3041\u3044\u3044\u3084\u3002\n\u8a73\u3057\u304f\u306fwikipedia\u3084\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\u5f62\u614b\u7d20\u89e3\u6790\u3068\u306f\n\u81ea\u7136\u8a00\u8a9e\u3067\u66f8\u304b\u308c\u305f\u6587\u3092\u3001\u5f62\u614b\u7d20\u306b\u5206\u89e3\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306e\u54c1\u8a5e\u3092\u5224\u5225\u3059\u308b\u4e8b\u3067\u3059\u3002\n\u3053\u3061\u3089\u3082\u8a73\u3057\u304f\u306fwikipedia\u8fba\u308a\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\uff08\u3060\u3063\u3066\u8a73\u3057\u304f\u8aac\u660e\u3067\u304d\u308b\u7a0b\u306e\u77e5\u8b58\u3092\u6301\u3063\u3066\u306a\u3044\u3093\u3060\u3082\u306e\uff09\n\nMeCab\u3092D\u304b\u3089\u4f7f\u3046\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u672c\u984c\u3067\u3059\u3002\u3053\u306eMeCab\u3092D\u8a00\u8a9e\u3067\u4f7f\u3063\u3066\u307f\u3088\u3046\u3001\u3068\u3044\u3046\u8a71\u3067\u3059\u3002\n\nMeCab\u3068C++\u3068D\nMeCab\u306fC++\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u6b8b\u5ff5\u306a\u4e8b\u306b\u3001D\u8a00\u8a9e\u306e\u30d0\u30a4\u30ca\u30ea\u306fC++\u306e\u30d0\u30a4\u30ca\u30ea\u3068\u306e\u4e92\u63db\u6027\u304c\u3042\u307e\u308a\u3042\u308a\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u300c\u3042\u307e\u308a\u3042\u308a\u307e\u305b\u3093\u300d\u3068\u3044\u3046\u4e8b\u306f\u3001\u5168\u304f\u7121\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u3082\u306a\u3044\u306e\u3067\u3059\u3002\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u5f53\u8a72\u306e\u30da\u30fc\u30b8\u306b\u3088\u308b\u3068\u3001\u30af\u30e9\u30b9\u3084\u4eee\u60f3\u95a2\u6570\u306a\u3093\u304b\u306f\u3042\u308b\u7a0b\u5ea6\u4e92\u63db\u6027\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u5165\u3063\u3066\u3044\u308b\u89e3\u8aac\u306b\u3088\u308b\u3068\u3001MeCab\u306e\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u306fMeCab::Tagger\u30af\u30e9\u30b9\u3055\u3048\u3042\u308c\u3070\u4f7f\u3048\u308b\u3088\u3046\u3067\u3059\u3002\n\u2026\u2026\u4f55\u3068\u304bD\u304b\u3089\u4f7f\u3048\u308b\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u74b0\u5883\nUbuntu 14.04 \u306e\u4e0a\u3067\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\u3002\n\u65e2\u306bMeCab\u81ea\u4f53\u306f apt-get \u3067\u5165\u308c\u3066\u3042\u308b\u72b6\u614b\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001Windows \u3068\u304b\u3060\u3068\u4e0a\u624b\u304f\u884c\u304b\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u8f9e\u66f8\u306fUTF-8\u306eIPA\u8f9e\u66f8\u3067\u3059\u3002\n\nD\u304b\u3089C++\u306e\u30af\u30e9\u30b9\u3092\u547c\u3076\n\u4e0a\u8a18\u30b5\u30a4\u30c8\u306e\u89e3\u8aac\u306b\u3088\u308b\u3068\u3001D\u304b\u3089C++\u306e\u30af\u30e9\u30b9\u3092\u4f7f\u3046\u306b\u306f\u3001D\u306einterface\u3092\u4f7f\u3048\u3070\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u305d\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\ntest_cpp.d\nextern(C++, MeCab)\n{\n    interface Tagger\n    {\n        const(char)* parse(const(char)*);\n    }\n\n    Tagger createTagger(const(char)*);\n}\n\nimport std.string : toStringz;\nimport std.conv : to;\nimport std.stdio;\n\nvoid main()\n{\n    auto tagger = createTagger(\"\");\n    auto input = \"\u592a\u90ce\u306f\u6b21\u90ce\u304c\u6301\u3063\u3066\u3044\u308b\u672c\u3092\u82b1\u5b50\u306b\u6e21\u3057\u305f\u3002\";\n    auto result = tagger.parse(input.toStringz);\n\n    writeln(result.to!string);\n}\n\n\n\u4f55\u3060\u304b\u3068\u3063\u3066\u3082\u9069\u5f53\u306b\u898b\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u3054\u5bb9\u8d66\u3092\u3002\n\u52d5\u3051\u3070\u826f\u3044\u306e\u3067\u3059\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ dmd test_cpp.d -L-lmecab\n\n\u30ea\u30f3\u30ab\u306b MeCab \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\uff08libmecab.a\uff09\u3092\u30ea\u30f3\u30af\u3059\u308b\u3088\u3046\u8a00\u3046\u306e\u3092\u5fd8\u308c\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002\n$ ./test_cpp\nSegmentation fault (\u30b3\u30a2\u30c0\u30f3\u30d7)\n\n\u3059\u3044\u307e\u305b\u3093\u3001\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\n\u307e\u3001\u307e\u3041\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306b\u306f\u5931\u6557\u304c\u4ed8\u304d\u7269\u3067\u3059\u304b\u3089\u306d\u3002\n\u30b3\u30a2\u30c0\u30f3\u30d7\u3092\u5410\u3044\u305f\u3088\u3046\u306a\u306e\u3067\u3001\u3053\u308c\u3092\u8abf\u3079\u3066\u307f\u307e\u3057\u3087\u3046\u2026\u2026\u3042\u3001\u8a2d\u5b9a\u3059\u308b\u306e\u5fd8\u308c\u3066\u305f\u304b\u3089\u51fa\u529b\u3055\u308c\u3066\u306a\u3044\u3084\u3002\n\u3057\u304b\u3057\u3069\u3046\u305b\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3092\u5165\u308c\u3066\u306a\u3044\u306e\u3067\u307e\u3041\u3001\u306d\u3002\n\u4eca\u5ea6\u306f -g \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u306a\u304a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ dmd -g test_cpp.d -L-lmecab\n\n\u305d\u308c\u3067\u3001GDB\u3092\u4f7f\u3063\u3066\u30c7\u30d0\u30c3\u30b0\u3092\u2026\u2026\n$ gdb ./test_cpp\n\n    :\n    :\n\nProgram received signal SIGSEGV, Segmentation fault.\n0xb7e09d2a in MeCab::Viterbi::analyze(MeCab::Lattice*) const ()\n   from /usr/lib/libmecab.so.2\n(gdb) where\n#0  0xb7e09d2a in MeCab::Viterbi::analyze(MeCab::Lattice*) const ()\n   from /usr/lib/libmecab.so.2\n#1  0xb7e0c821 in ?? () from /usr/lib/libmecab.so.2\n#2  0x0806fc1a in D main () at test_cpp.d:16\n#3  0x08074ada in rt.dmain2._d_run_main() ()\n#4  0x08074a50 in rt.dmain2._d_run_main() ()\n#5  0x08074a9f in rt.dmain2._d_run_main() ()\n#6  0x08074a50 in rt.dmain2._d_run_main() ()\n#7  0x080749e7 in _d_run_main ()\n#8  0x0807256c in main ()\n\n\u3093\u3093\u2026\u2026\uff1f\n\u2026\u2026\u3002\n\u2026\u3002\n\u305d\u306e\u5f8c\u3001\u8272\u3005\u8abf\u3079\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3069\u3046\u306b\u3082\u539f\u56e0\u304c\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3084\u306f\u308a\u79c1\u306b\u306fD\u3068C++\u306e\u63a5\u7d9a\u306a\u3069\u3068\u3044\u3046\u9ad8\u5c1a\u306a\u884c\u70ba\u306f\u65e9\u3059\u304e\u305f\u306e\u3067\u3057\u3087\u3046\u304b\u3002\n\u3069\u306a\u305f\u304b\u89e3\u308b\u65b9\u3001\u3054\u6559\u6388\u304f\u3060\u3055\u308c\u3070\u5927\u5909\u559c\u3073\u307e\u3059\u3002\n\u7d42\u308f\u308a\n(12\u670824\u65e5\u8ffd\u8a18)\n\u30b3\u30e1\u30f3\u30c8\u3067\u3054\u6559\u6388\u9802\u304d\u307e\u3057\u305f\uff01\n\u8a18\u4e8b\u306e\u672b\u5c3e\u306b\u539f\u56e0\u3068\u89e3\u6c7a\u7b56\u3092\u8ffd\u8a18\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u308c\u3067\n\u3053\u308c\u3067\u7d42\u308f\u308b\u3068\u6d41\u77f3\u306b\u300c\u771f\u9762\u76ee\u306b\u66f8\u3051\u300d\u3068\u304a\u53f1\u308a\u3092\u53d7\u3051\u305d\u3046\u306a\u306e\u3067\u3001\u3082\u3046\u5c11\u3057\u7d9a\u3051\u307e\u3057\u3087\u3046\u3002\nMeCab\u306b\u306fC\u306eAPI\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nRuby\u3084Python\u3084Java\u3078\u306e\u30dd\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u3001\u3053\u306eC\u306eAPI\uff08\u3068SWIG\uff09\u3092\u5229\u7528\u3057\u3066\u884c\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\nMeCab\u3068C\u3068D\nD\u8a00\u8a9e\u306fC\u8a00\u8a9e\u3068\u306e\u63a5\u7d9a\u304c\u306a\u308b\u3079\u304f\u7c21\u5358\u306a\u3088\u3046\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001C\u306eAPI\u3092\u901a\u3057\u3066\u306a\u3089D\u304b\u3089\u3082\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u7c21\u5358\u306b\u547c\u3079\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\u3068\u3044\u3046\u304b\u6700\u521d\u304b\u3089\u305d\u3046\u3057\u3066\u304a\u3051\u3088\u3001\u3068\u3044\u3046\u611f\u3058\u306a\u306e\u3067\u3059\u304c\u3001C++\u3092\u30e9\u30c3\u30d7\u3057\u305fC\u3092\u30e9\u30c3\u30d7\u3057\u305fD\u3001\u3088\u308a\u3082C++\u3092\u30e9\u30c3\u30d7\u3057\u305fD\u3001\u306e\u65b9\u304c\u7d20\u76f4\u3067\u826f\u3044\u306a\u3041\u3001\u306a\u3093\u3066\u601d\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u304c\u9593\u9055\u3044\u3067\u3057\u305f\u3002\n\u305d\u308c\u3067\u306f\u30011\u3064\u306e\u30b3\u30fc\u30c9\u306b\u306f1024\u30ef\u30fc\u30c9\u5206\u306e\u4fa1\u5024\u304c\u3042\u308b\u3089\u3057\u3044\u306e\u3067\u3001\u65e9\u901f\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\ntest_c.d\nextern(C)\n{\n    struct mecab_t;\n\n    mecab_t* mecab_new2(const(char)* arg);\n    void mecab_destroy(mecab_t *mecab);\n    const(char)* mecab_sparse_tostr(mecab_t *mecab, const(char)* str);\n}\n\nimport std.string : toStringz;\nimport std.conv : to;\nimport std.stdio;\n\nvoid main()\n{\n    auto input = \"\u592a\u90ce\u306f\u6b21\u90ce\u304c\u6301\u3063\u3066\u3044\u308b\u672c\u3092\u82b1\u5b50\u306b\u6e21\u3057\u305f\u3002\";\n\n    auto mecab = mecab_new2(\"\");\n    scope(exit) mecab_destroy(mecab);\n\n    auto result = mecab_sparse_tostr(mecab, input.toStringz);\n    writefln(result.to!string);\n}\n\n\n\u3061\u3087\u3063\u3068\u3057\u305f\u30c7\u30b8\u30e3\u30f4\u611f\u304c\u3042\u308a\u307e\u3059\u304b\uff1f\n\u307e\u3041\u4e0a\u306e\u3068\u4f3c\u305f\u308a\u5bc4\u3063\u305f\u308a\u306a\u5185\u5bb9\u306b\u306a\u308a\u307e\u3059\u3088\u306d\u3002\n\u2026\u2026\u5148\u7a0b\u306e\u5931\u6557\u3092\u601d\u3044\u51fa\u3057\u3066\u5fc3\u304c\u82e6\u3057\u3044\u3067\u3059\u304c\u3001\u90aa\u5ff5\u306f\u632f\u308a\u6255\u3063\u3066\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ dmd test_c.d -L-lmecab\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u306e\u30ea\u30f3\u30af\u3092\uff08\uff52\uff59\n$ ./test_c\n\u592a\u90ce  \u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u4eba\u540d,\u540d,*,*,\u592a\u90ce,\u30bf\u30ed\u30a6,\u30bf\u30ed\u30fc\n\u306f \u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\n\u6b21\u90ce  \u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u4eba\u540d,\u540d,*,*,\u6b21\u90ce,\u30b8\u30ed\u30a6,\u30b8\u30ed\u30fc\n\u304c \u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u304c,\u30ac,\u30ac\n\u6301\u3063  \u52d5\u8a5e,\u81ea\u7acb,*,*,\u4e94\u6bb5\u30fb\u30bf\u884c,\u9023\u7528\u30bf\u63a5\u7d9a,\u6301\u3064,\u30e2\u30c3,\u30e2\u30c3\n\u3066 \u52a9\u8a5e,\u63a5\u7d9a\u52a9\u8a5e,*,*,*,*,\u3066,\u30c6,\u30c6\n\u3044\u308b  \u52d5\u8a5e,\u975e\u81ea\u7acb,*,*,\u4e00\u6bb5,\u57fa\u672c\u5f62,\u3044\u308b,\u30a4\u30eb,\u30a4\u30eb\n\u672c \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u672c,\u30db\u30f3,\u30db\u30f3\n\u3092 \u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u3092,\u30f2,\u30f2\n\u82b1 \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u82b1,\u30cf\u30ca,\u30cf\u30ca\n\u5b50 \u540d\u8a5e,\u63a5\u5c3e,\u4e00\u822c,*,*,*,\u5b50,\u30b3,\u30b3\n\u306b \u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u306b,\u30cb,\u30cb\n\u6e21\u3057  \u52d5\u8a5e,\u81ea\u7acb,*,*,\u4e94\u6bb5\u30fb\u30b5\u884c,\u9023\u7528\u5f62,\u6e21\u3059,\u30ef\u30bf\u30b7,\u30ef\u30bf\u30b7\n\u305f \u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30bf,\u57fa\u672c\u5f62,\u305f,\u30bf,\u30bf\n\u3002 \u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\nEOS\n\n\u3084\u3063\u305f\uff01\u3000\u52d5\u3044\u305f\uff01\n\n\u89e3\u8aac\n\u4e0a\u306e\u4f8b\u3067\u4f7f\u7528\u3057\u305fmecab_sparse_tostr()\u95a2\u6570\u306f\u3001\u6587\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u6587\u5b57\u5217\u306b\u3057\u3066\u8fd4\u3057\u3066\u304f\u308c\u308b\u3068\u3044\u3046\u95a2\u6570\u3067\u3059\u3002\n\u4eba\u9593\u304c\u898b\u308b\u5206\u306b\u306f\u3068\u3066\u3082\u89e3\u308a\u3084\u3059\u3044\u3067\u3059\u304c\u3001\u8a08\u7b97\u6a5f\u306b\u3068\u3063\u3066\u306f\u305d\u3046\u3067\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4e2d\u3067\u5f62\u614b\u7d20\u89e3\u6790\u306e\u7d50\u679c\u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001\u4ed6\u306e\u95a2\u6570\u3092\u5229\u7528\u3059\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u30ce\u30fc\u30c9\u306b\u5206\u5272\n\u305d\u3053\u3067\u51fa\u3066\u304f\u308b\u306e\u304cmecab_sparse_tonode()\u95a2\u6570\u3067\u3059\u3002\n\u3053\u306e\u95a2\u6570\u306f\u3001\u6587\u3092\u5f62\u614b\u7d20\u6bce\u306b\u5206\u5272\u3057\u3066\u3001\u305d\u306e\u5f62\u614b\u7d20\u306e\u60c5\u5831\u3092\u683c\u7d0d\u3057\u305f\u69cb\u9020\u4f53\u3092\u4f5c\u308a\u3001\u305d\u308c\u3089\u306e\u69cb\u9020\u4f53\u3092\u53cc\u65b9\u5411\u30ea\u30b9\u30c8\u3068\u3057\u3066\u7e4b\u3052\u3001\u305d\u306e\u5148\u982d\u306e\u69cb\u9020\u4f53\u306e\u30dd\u30a4\u30f3\u30bf\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\u95a2\u6570\u3067\u3059\u3002\u2026\u2026\u6587\u7ae0\u306b\u3059\u308b\u3068\u3084\u305f\u3089\u3084\u3084\u3053\u3057\u3044\u3067\u3059\u304c\u3001\u8981\u3059\u308b\u306b\u5206\u6790\u7d50\u679c\u3092\u5f62\u614b\u7d20\u6bce\u306b\u6271\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3044\u3046\u4e8b\u3067\u3059\u3002\n\u4eca\u5ea6\u306f\u3053\u306e\u95a2\u6570\u3092\u4f7f\u3063\u3066\u5f62\u614b\u7d20\u89e3\u6790\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3057\u304b\u3057mecab_sparse_tonode()\u95a2\u6570\u3092\u4f7f\u3063\u3066\u5404\u5f62\u614b\u7d20\u3092\u8abf\u3079\u308b\u306b\u306f\u3001\u305d\u308c\u304c\u8fd4\u3059\u69cb\u9020\u4f53\u3067\u3042\u308bmecab_node_t\u306e\u5b9a\u7fa9\u304c\u7121\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u4ed6\u306b\u3082mecab_dictionary_info_t\u3068\u304b\u3082\u4f7f\u3044\u305f\u3044\u306a\u3041\u3001\u3068\u8003\u3048\u3066\u3044\u304f\u3068\u3001\u5168\u3066\u306e\u30bd\u30fc\u30b9\u30921\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u3044\u304f\u306e\u306f\u3061\u3087\u3063\u3068\u554f\u984c\u304c\u5927\u304d\u3044\u3068\u3044\u3046\u4e8b\u306b\u601d\u3044\u81f3\u308a\u307e\u3059\u3002\n\u305d\u3046\u3044\u3046\u308f\u3051\u3067\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306f\u5206\u5272\u3057\u307e\u3057\u3087\u3046\u3002\n\nmecab.di\nmodule mecab;\n\n__gshared extern(C) nothrow @nogc:\n\nenum\n    MECAB_NOR_NODE = 0,\n    MECAB_UNK_NODE = 1,\n    MECAB_BOS_NODE = 2,\n    MECAB_EOS_NODE = 3,\n    MECAB_EON_NODE = 4;\n\nstruct mecab_t;\n\nstruct mecab_dictionary_info_t {\n    const(char)* filename;\n    const(char)* charset;\n    uint size;\n    int type;\n    uint lsize;\n    uint rsize;\n    ushort version_;\n    mecab_dictionary_info_t *next;\n}\n\nstruct mecab_path_t {\n    mecab_node_t* rnode;\n    mecab_path_t* rnext;\n    mecab_node_t* lnode;\n    mecab_path_t* lnext;\n    int cost;\n    float prob;\n}\n\nstruct mecab_node_t {\n    mecab_node_t* prev;\n    mecab_node_t* next;\n    mecab_node_t* enext;\n    mecab_node_t* bnext;\n    mecab_path_t* rpath;\n    mecab_path_t* lpath;\n    const(char)* surface;\n    const(char)* feature;\n    uint id;\n    ushort length;\n    ushort rlength;\n    ushort rcAttr;\n    ushort lcAttr;\n    ushort posid;\n    ubyte char_type;\n    ubyte stat;\n    ubyte isbest;\n    float alpha;\n    float beta;\n    float prob;\n    short wcost;\n    long cost;\n}\n\nmecab_t* mecab_new2(const(char)*);\nvoid mecab_destroy(mecab_t*);\n\nconst(char)* mecab_sparse_tostr(mecab_t*, const(char)*);\n\nconst(mecab_node_t)* mecab_sparse_tonode(mecab_t*, const(char)*);\n\nconst(mecab_dictionary_info_t)* mecab_dictionary_info(mecab_t*);\n\n\n\uff0812\u670824\u65e5\u8ffd\u8a18\uff09\n\u30b3\u30e1\u30f3\u30c8\u3067\u3054\u6307\u6458\u3092\u9802\u304d\u307e\u3057\u305f\u3002\n\u305d\u308c\u306b\u5f93\u3044\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u91cd\u5927\u306a\u554f\u984c\u70b9\u3092\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\n\u8a18\u4e8b\u306e\u672b\u5c3e\u306b\u8ffd\u8a18\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u2026\u2026C\u306e\u30d8\u30c3\u30c0\u3092D\u306b\u7ffb\u8a33\u3059\u308b\u306e\u306b\u6163\u308c\u3066\u308b\u4eba\u304b\u3089\u898b\u308b\u3068\u3001\u7a81\u3063\u8fbc\u307f\u3069\u3053\u308d\u6e80\u8f09\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f\u304a\u304b\u3057\u3044\u3001\u307f\u305f\u3044\u306a\u70b9\u304c\u3042\u308c\u3070\u3001\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\n\u514e\u3082\u89d2\u3082\u3001\u3053\u308c\u3067MeCab\u306e\u95a2\u6570\u3092\u4f7f\u3046\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\u6b21\u306f\u672c\u4f53\u3092\u66f8\u304f\u3060\u3051\u3067\u3059\u3002\n\ntest.d\nimport mecab;\nimport std.stdio : writefln;\nimport std.string : toStringz;\nimport std.conv : to;\n\nvoid main(string[] argv) {\n    auto input = argv.length > 1 ? argv[1] : \"\u592a\u90ce\u306f\u6b21\u90ce\u304c\u6301\u3063\u3066\u3044\u308b\u672c\u3092\u82b1\u5b50\u306b\u6e21\u3057\u305f\u3002\";\n\n    auto mecab = mecab_new2(\"\");\n    scope(exit) mecab_destroy(mecab);\n\n    auto node = mecab_sparse_tonode(mecab, input.toStringz);\n    for(; node; node = node.next) {\n        if (node.stat == MECAB_NOR_NODE || node.stat == MECAB_UNK_NODE) {\n            writefln(\"%s\\t%s\", node.surface[0 .. node.length].to!string, node.feature.to!string);\n        }\n    }\n    auto dic = mecab_dictionary_info(mecab);\n\n    writefln(\"filename: %s\\ncharset: %s\\nsize: %s\\ntype: %s\\n\",\n             dic.filename.to!string,\n             dic.charset.to!string,\n             dic.size,\n             dic.type);\n}\n\n\n\u65e2\u306b\u304a\u6c17\u4ed8\u304d\u306e\u65b9\u3082\u591a\u3044\u3067\u3057\u3087\u3046\u304c\u3001\u4eca\u307e\u3067\u306e\u30b3\u30fc\u30c9\u306f\u4e0a\u8a18\u306eMeCab\u306e\u30bd\u30fc\u30b9\u306b\u5165\u3063\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u304b\u3089\u4e00\u90e8\u629c\u304d\u51fa\u3057\u3066\u3001D\u98a8\u306b\u66f8\u304d\u306a\u304a\u3057\u305f\u3060\u3051\u3067\u3059\u3002\n\u898b\u3066\u306e\u901a\u308a\u3001mecab_node_t\u306e\u30e1\u30f3\u30d0\u5909\u6570\u3067\u3042\u308bsurface\u3060\u3068\u304blength\u3060\u3068\u304bfeature\u3060\u3068\u304b\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002surface\u306f\u5f62\u614b\u7d20\u306e\u6587\u5b57\u5217\u306e\u30dd\u30a4\u30f3\u30bf\u3067\u3001length\u304c\u305d\u306e\u9577\u3055\u3067\u3059\u3002feature\u306b\u306f\u5f62\u614b\u7d20\u306e\u60c5\u5831\u304c\u6587\u5b57\u5217\u3068\u3057\u3066\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u306e\u4e0b\u306emecab_dictionary_info()\u306f\u3001\u5229\u7528\u3059\u308b\u8f9e\u66f8\u306e\u60c5\u5831\u3092\u5f97\u308b\u95a2\u6570\u3067\u3059\u3002MeCab\u306e\u8f9e\u66f8\u306f\u3001mecabrc\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3082\u306e\u3092\u4f7f\u3046\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u8aad\u307f\u8fbc\u3093\u3060\u8f9e\u66f8\u306e\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3057\u3066\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\u3053\u308c\u3092\u52d5\u304b\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n$ ./test \"D \u306f C\u8a00\u8a9e\u98a8\u306e\u69cb\u6587\u3092\u6301\u3064\u9759\u7684\u578b\u4ed8\u3051\u8a00\u8a9e\u3067\u3059\u3002\"\nD   \u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u7d44\u7e54,*,*,*,*\n\u306f \u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\nC   \u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u7d44\u7e54,*,*,*,*\n\u8a00\u8a9e  \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u8a00\u8a9e,\u30b2\u30f3\u30b4,\u30b2\u30f3\u30b4\n\u98a8 \u540d\u8a5e,\u63a5\u5c3e,\u4e00\u822c,*,*,*,\u98a8,\u30d5\u30a6,\u30d5\u30fc\n\u306e \u52a9\u8a5e,\u9023\u4f53\u5316,*,*,*,*,\u306e,\u30ce,\u30ce\n\u69cb\u6587  \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u69cb\u6587,\u30b3\u30a6\u30d6\u30f3,\u30b3\u30fc\u30d6\u30f3\n\u3092 \u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u3092,\u30f2,\u30f2\n\u6301\u3064  \u52d5\u8a5e,\u81ea\u7acb,*,*,\u4e94\u6bb5\u30fb\u30bf\u884c,\u57fa\u672c\u5f62,\u6301\u3064,\u30e2\u30c4,\u30e2\u30c4\n\u9759\u7684  \u540d\u8a5e,\u5f62\u5bb9\u52d5\u8a5e\u8a9e\u5e79,*,*,*,*,\u9759\u7684,\u30bb\u30a4\u30c6\u30ad,\u30bb\u30a4\u30c6\u30ad\n\u578b\u4ed8\u3051   \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u578b\u4ed8\u3051,\u30ab\u30bf\u30c4\u30b1,\u30ab\u30bf\u30c4\u30b1\n\u8a00\u8a9e  \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u8a00\u8a9e,\u30b2\u30f3\u30b4,\u30b2\u30f3\u30b4\n\u3067\u3059  \u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30c7\u30b9,\u57fa\u672c\u5f62,\u3067\u3059,\u30c7\u30b9,\u30c7\u30b9\n\u3002 \u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\nfilename: /var/lib/mecab/dic/debian/sys.dic\ncharset: UTF-8\nsize: 392126\ntype: 0\n\nmecab_node_t\u3092for\u30eb\u30fc\u30d7\u56de\u3057\u3066\u4f7f\u3063\u3066\u3044\u308b\u90e8\u5206\u306f\u3001\u7d50\u679c\u3068\u3057\u3066mecab_sparse_tostr()\u95a2\u6570\u3068\u4f3c\u305f\u3088\u3046\u306a\u51fa\u529b\u3092\u3057\u3066\u3044\u307e\u3059\u306d\u3002\u305d\u306e\u4e0b\u306f\u3001\u8f9e\u66f8\u306b\u95a2\u3059\u308b\u60c5\u5831\u3067\u3059\u3002\n\u89e3\u8aac\u3059\u308b\u3088\u3046\u306a\u4e8b\u306f\u3001\u7279\u306b\u3001\u7121\u3044\u3067\u3059\u3002\n\n\u3082\u3046\u5c11\u3057\u9ad8\u5ea6\u306a\u4e8b\u3092\u3059\u308b\n\u3055\u3066\u3001\u3053\u308c\u3060\u3051\u3060\u3068mecab_sparse_tostr()\u95a2\u6570\u304c\u3084\u3063\u305f\u4e8b\u3092\u81ea\u5206\u3067\u5b9f\u88c5\u3057\u305f\u3060\u3051\u306a\u306e\u3067\u3001mecab_node_t\u306e\u60c5\u5831\u3092\u307e\u308b\u3067\u6d3b\u7528\u3067\u304d\u3066\u3044\u307e\u305b\u3093\u306d\u3002\u3053\u308c\u306f\u826f\u304f\u306a\u3044\u3002\n\u306a\u306e\u3067\u3001\u3082\u3046\u5c11\u3057\u3084\u3084\u3053\u3057\u3044\u4e8b\u3092\u3057\u3066\u307f\u305f\u3044\u3067\u3059\u3002\n\u3068\u3053\u308d\u3067\u3001\u300c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9eD\u300d\u306f\u3054\u5b58\u77e5\u3067\u3059\u3088\u306d\u3002\u65e5\u672c\u30672\u756a\u76ee\u306b\u51fa\u305fD\u8a00\u8a9e\u306e\u672c\u3067\u3059\uff08\u591a\u5206\uff09\u3002\n\u305d\u3046\u3044\u3048\u3070\u65e5\u672c\u3067\u6700\u521d\u306eD\u8a00\u8a9e\u306e\u672c\u304c\u51fa\u3066\u304b\u308910\u5e74\u7d4c\u3063\u305f\u3089\u3057\u3044\u3067\u3059\u306d\u3002\n\u9591\u8a71\u4f11\u984c\u3002\u305d\u308c\u3067\u3001\u300c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9eD\u300d\u306e\u7b2c1\u7ae0\u306b\u306f\u3001\u300e\u30cf\u30e0\u30ec\u30c3\u30c8\u300f\u3092\u5206\u6790\u3059\u308b\u4f8b\u304c\u51fa\u3066\u3044\u307e\u3059\u3002\n\u305d\u308c\u306b\u3042\u3084\u304b\u3063\u3066\u3001\u65e5\u672c\u306e\u53e4\u5178\u7684\u540d\u5287\u4f5c\u5bb6\u3067\u3042\u308b\u4e16\u963f\u5f25\u306e\u8b21\u66f2\u306e\u5206\u6790\u3092\u2026\u2026\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u6d41\u77f3\u306b\u5ba4\u753a\u6642\u4ee3\u306e\u6587\u7ae0\u3092MeCab\u306b\u8aad\u307e\u305b\u308b\u306e\u306f\u96e3\u3057\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u3001\u5c11\u3057\u6642\u4ee3\u3092\u4e0b\u3063\u3066\u3001\u660e\u6cbb\u306e\u6587\u8c6a\u306e\u6587\u7ae0\u3092MeCab\u3067\u5206\u6790\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u5c0f\u8aac\u306e\u6587\u7ae0\u3092\u5206\u6790\n\u5206\u6790\u3068\u3044\u3063\u3066\u3082\u3001\u5358\u306b\u5c0f\u8aac\u306e\u6587\u7ae0\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u3067\u306f\u9762\u767d\u304f\u306a\u3044\u3002\u3068\u3044\u3046\u304b\u6050\u3089\u304f\u3001\u9577\u3055\u306b\u3082\u3088\u308a\u307e\u3059\u304c\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u3042\u307e\u308a\u8aad\u3080\u6c17\u306e\u3057\u306a\u3044\u72b6\u614b\u306b\u306a\u308b\u4e8b\u8acb\u3051\u5408\u3044\u3067\u3059\u3002\u6298\u89d2\u30d7\u30ed\u30b0\u30e9\u30e0\u4e2d\u3067\u6587\u7ae0\u3092\u5f62\u614b\u7d20\u306b\u5206\u89e3\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304b\u3089\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u6587\u7ae0\u3068\u3044\u3046\u306e\u306f\u3001\u540d\u8a5e\u3084\u3001\u52d5\u8a5e\u3084\u3001\u5f62\u5bb9\u8a5e\u7b49\u306e\u54c1\u8a5e\u304b\u3089\u6210\u308a\u7acb\u3063\u3066\u3044\u307e\u3059\u3002MeCab\u3067\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u5f62\u614b\u7d20\u304c\u305d\u306e\u3069\u308c\u306b\u5f53\u3066\u306f\u307e\u308b\u306e\u304b\u3001\u63a8\u6e2c\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u6587\u7ae0\u306e\u7279\u8272\u306b\u306f\u3001\u69d8\u3005\u306a\u8981\u7d20\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u306e\u54c1\u8a5e\u306e\u5272\u5408\u304c\u95a2\u308f\u3063\u3066\u304f\u308b\u306e\u306f\u9593\u9055\u3044\u306a\u3044\u3068\u601d\u308f\u308c\u307e\u3059\u3002\u7c21\u7d20\u306a\u6587\u4f53\u3068\u7d62\u721b\u8c6a\u83ef\u306a\u6587\u4f53\u306e\u5bfe\u6bd4\u306f\u3001\u305d\u308c\u3053\u305d\u53e4\u4ee3\u30ed\u30fc\u30de\u6642\u4ee3\u306e\u30ab\u30a8\u30b5\u30eb\u3068\u30ab\u30c8\u30fc\u306e\u6bd4\u8f03\u306b\u898b\u3089\u308c\u308b\u3088\u3046\u306b\u3001\u53e4\u304f\u304b\u3089\u8a00\u308f\u308c\u3066\u3044\u308b\u4e8b\u3067\u3059\u3002\n\u6587\u7ae0\u304b\u3089\u3001\u305d\u308c\u305e\u308c\u306e\u54c1\u8a5e\u304c\u3069\u308c\u3060\u3051\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u304b\u3001\u307e\u305f\u305d\u306e\u6587\u7ae0\u5185\u3067\u306e\u5272\u5408\u306f\u3069\u306e\u7a0b\u5ea6\u306a\u306e\u304b\u3092\u8a08\u7b97\u3059\u308b\u4e8b\u304c\u3067\u304d\u308c\u3070\u3001\u3069\u3046\u3044\u3046\u6587\u4f53\u304c\u826f\u3044\u6587\u4f53\u3067\u3069\u3046\u3044\u3046\u6587\u4f53\u304c\u60aa\u3044\u6587\u4f53\u306a\u306e\u304b\u3092\u6a5f\u68b0\u7684\u306b\u8a08\u7b97\u3059\u308b\u4e00\u52a9\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u305f\u3060\u3042\u3093\u307e\u308a\u3084\u3084\u3053\u3057\u3044\u3082\u306e\u3092\u4f5c\u3063\u3066\u3082\u30a2\u30ec\u3067\u3059\u306e\u3067\u3001\u8abf\u3079\u308b\u306e\u306f\u300c\u540d\u8a5e\u3001\u5f62\u5bb9\u8a5e\u3001\u52d5\u8a5e\u3001\u526f\u8a5e\u3001\u63a5\u7d9a\u8a5e\u300d\u306e5\u3064\u3060\u3051\u306b\u9650\u5b9a\u3057\u3066\u3001\u305d\u308c\u3089\u306e\u4e2d\u306b\u3042\u308b\u7d30\u304b\u3044\u9055\u3044\uff08\u81ea\u7acb\u8a9e\u304b\u63a5\u5c3e\u8a9e\u304b\u3001\u4e00\u822c\u540d\u8a5e\u304b\u56fa\u6709\u540d\u8a5e\u304b\u3001\u7b49\uff09\u306f\u7121\u8996\u3059\u308b\u4e8b\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\u3068\u3001\u5352\u8ad6\u3067\u300c\u3046\u30fc\u3093\u3001\u3053\u306e\u7814\u7a76\u5206\u91ce\u3084\u30c6\u30fc\u30de\u81ea\u4f53\u306f\u60aa\u304f\u306a\u3044\u3068\u601d\u3046\u3093\u3060\u3051\u3069\u3001\u7814\u7a76\u3057\u3066\u307f\u305f\u7d50\u679c\u5206\u304b\u3063\u305f\u4e8b\u304c\u4eca\u5f8c\u5f79\u7acb\u3064\u304b\u3063\u3066\u8a00\u308f\u308c\u305f\u3089\u5fae\u5999\u3060\u3088\u306d\u30fc\u3002\u3066\u3044\u3046\u304b\u6b74\u53f2\u7814\u7a76\u306b\u610f\u7fa9\u3068\u304b\u6c42\u3081\u308b\u306a\u3088\u306a\u3041\u300d\u306a\u3093\u3066\u601d\u3063\u3066\u308b\u5927\u5b66\u751f\u304c\u524d\u6587\u306b\u66f8\u304f\u3088\u3046\u306a\u8a00\u3044\u8a33\u3092\u8ff0\u3079\u305f\u6240\u3067\u3001\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u304b\u3002\n\npos-id\n\u5f62\u614b\u7d20\u306e\u60c5\u5831\u306f\u3001\u4e0a\u3067\u66f8\u3044\u305f\u3088\u3046\u306bmecab_node_t\u69cb\u9020\u4f53\u306efeature\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u304c\u3001\u3053\u308c\u306f\u6587\u5b57\u5217\uff08CSV\u5f62\u5f0f\u306b\u5247\u3063\u3066\u3044\u308b\u305d\u3046\u3067\u3059\uff09\u306a\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u6271\u3044\u96e3\u3044\u3002\u3088\u3063\u3066\u3001pos-id \u3068\u3044\u3046\u3082\u306e\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002pos-id \u3068\u3044\u3046\u306e\u306f\u3001\u4e0a\u8a18\u306e\u5f62\u614b\u7d20\u306e\u60c5\u5831\u3092\u5206\u985e\u3057\u3066\u756a\u53f7\u4ed8\u3051\u3057\u305f\u3082\u306e\u304c\u3042\u3063\u3066\uff08\u540d\u8a5e\u304b\u3064\u4e00\u822c\u540d\u8a5e\u306a\u308938\u3001\u3068\u304b\uff09\u3001\u305d\u306e\u81ea\u5206\u306b\u5f53\u3066\u306f\u307e\u308b\u756a\u53f7\u3092\u683c\u7d0d\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\u3069\u3046\u3044\u3046\u57fa\u6e96\u3067\u756a\u53f7\u4ed8\u3051\u304c\u884c\u308f\u308c\u308b\u304b\u306f\u3001\u8f9e\u66f8\u30c7\u30fc\u30bf\u306e\u4e2d\u306e pos-id.def \u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3053\u308c\u3092\u66f8\u304d\u63db\u3048\u308c\u3070\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u57fa\u6e96\u3067\u756a\u53f7\u4ed8\u3051\u3092\u3059\u308b\u4e8b\u3082\u3067\u304d\u307e\u3059\u3002\u8a73\u3057\u304f\u306fMeCab\u306e\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u898b\u3066\u4e0b\u3055\u3044\u3002\n\u4eca\u56de\u306f\u6700\u521d\u304b\u3089\u5165\u3063\u3066\u3044\u308b pos-id.def \u306e\u5206\u985e\u756a\u53f7\u4ed8\u3051\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3057\u307e\u3057\u3087\u3046\u3002\u6c7a\u3057\u3066\u3001\u518d\u5ea6\u8f9e\u66f8\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u30b3\u30fc\u30c9\n\nanly.d\nimport mecab;\nimport std.stdio;\n\nvoid analysis(mecab_t* mecab, string filename) {\n    File file;\n    try {\n        file = File(filename, \"r\");\n    } catch {\n        return;\n    }\n    uint[string] info = [\"\u540d\u8a5e\":0, \"\u52d5\u8a5e\":0, \"\u5f62\u5bb9\u8a5e\":0, \"\u526f\u8a5e\":0, \"\u63a5\u7d9a\u8a5e\":0];\n    uint count;\n    const(mecab_node_t)* node;\n\n    foreach(line; file.byLine) {\n        node = mecab_sparse_tonode2(mecab, line.ptr, line.length);\n        for(; node; node = node.next) {\n            if (node.stat != MECAB_NOR_NODE && node.stat != MECAB_UNK_NODE) continue;\n            ++count;\n            switch(node.posid) {\n                case 10: .. case 12:\n                    ++info[\"\u5f62\u5bb9\u8a5e\"];\n                    break;\n                case 26:\n                    ++info[\"\u63a5\u7d9a\u8a5e\"];\n                    break;\n                case 31: .. case 33:\n                    ++info[\"\u52d5\u8a5e\"];\n                    break;\n                case 34: case 35:\n                    ++info[\"\u526f\u8a5e\"];\n                    break;\n                case 36: .. case 47:\n                    ++info[\"\u540d\u8a5e\"];\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n    printResult(filename, info, count);\n}\n\nvoid printResult(string filename, uint[string] info, uint i) {\n    import std.algorithm, std.conv;\n\n    writeln(\"filename: \", filename);\n    writeln(\" * * *\");\n\n    writefln(\"\u5358\u8a9e\u6570:\\t%s\", i);\n    auto words = info.keys.sort!((a, b) => info[a] > info[b]);\n    auto count = i.to!double;\n    foreach(ref k; words)\n        writefln(\"%s:\\t%s\\t%.3f%%\", k, info[k], (info[k]/count)*100);\n\n    writeln(\"\");\n}\n\nvoid main(string[] args) {\n    if(args.length == 1) return;\n\n    auto mecab = mecab_new2(\"\");\n    scope(exit) mecab_destroy(mecab);\n\n    foreach(text; args[1..$])\n        analysis(mecab, text);\n}\n\n\n\n\u89e3\u8aac\nswitch\u6587\u3067\u7bc4\u56f2\u6307\u5b9a\u3067\u304d\u308b\u306e\u306fD\u306e\u826f\u3044\u3068\u3053\u308d\u3060\u3068\u601d\u3044\u307e\u3059\u3002\npos-id.def \u3092\u898b\u308c\u3070\u308f\u304b\u308b\u306e\u3067\u3059\u304c\u300148\u756a\u304b\u308967\u756a\u307e\u3067\u3082\u540d\u8a5e\u306b\u5206\u985e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u304c\u3001\u300c\u63a5\u5c3e\u8a9e\u3084\u4ee3\u540d\u8a5e\u306f\u3061\u3087\u3063\u3068\u9055\u3046\u304f\u306a\u3044\u304b\uff1f\u300d\u3068\u601d\u3063\u305f\u306e\u3067\u300147\u756a\u307e\u3067\u3092\u300c\u540d\u8a5e\u300d\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u4f55\u304b\u5b66\u8853\u7684\u306a\u6839\u62e0\u304c\u3042\u3063\u3066\u3053\u308c\u3089\u3092\u9664\u3044\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u3002\nmecab_sparse_tonode()\u3067\u306f\u306a\u304fmecab_sparse_tonode2()\u306a\u308b\u95a2\u6570\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u6587\u5b57\u5217\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u9577\u3055\u3092\u4e00\u7dd2\u306b\u53d7\u3051\u53d6\u308b\u95a2\u6570\u3067\u3059\u3002byLine()\u3067\u5206\u5272\u3057\u305f\u3089null\u30bf\u30fc\u30df\u30cd\u30fc\u30bf\u30fc\u4ed8\u304b\u306a\u3044\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\u3000\u3068\u601d\u3063\u305f\u306e\u3067\u3053\u3061\u3089\u3092\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001byLine()\u306e\u5b9a\u7fa9\u3092\u3057\u3063\u304b\u308a\u898b\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u78ba\u8a3c\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u66f8\u3044\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u52ff\u8ad6mecab.di\u306e\u65b9\u306b\u3082\u5b9a\u7fa9\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4f7f\u3063\u3066\u307f\u308b\n\u3055\u3066\u3001\u5206\u6790\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u4eca\u56de\u5206\u6790\u5bfe\u8c61\u3068\u3059\u308b\u4f5c\u5bb6\u306f\u4ee5\u4e0b\u306e4\u4eba\u3067\u3001\u53f3\u304c\u5bfe\u8c61\u306e\u5c0f\u8aac\u3067\u3059\u3002\n\n\u590f\u76ee\u6f31\u77f3 : \u5922\u5341\u591c\n\u6cc9\u93e1\u82b1 : \u591c\u884c\u5de1\u67fb\n\u68ee\u9d0e\u5916 : \u5bd2\u5c71\u62fe\u5f97\n\u82a5\u5ddd\u9f8d\u4e4b\u4ecb : \u7f85\u751f\u9580\n\n\u5168\u3066\u9752\u7a7a\u6587\u5eab\u304b\u3089\u5165\u624b\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u5229\u7528\u3055\u305b\u3066\u9802\u3044\u305f\u30c6\u30ad\u30b9\u30c8\u3082\u9752\u7a7a\u6587\u5eab\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3082\u306e\u3067\u3059\u304c\u3001\u9752\u7a7a\u6587\u5eab\u306e\u30c6\u30ad\u30b9\u30c8\u3060\u3068\u3001\u8868\u793a\u3067\u304d\u306a\u3044\u6587\u5b57\u3092\u203b\u3067\u4ee3\u7528\u3057\u3066\u3044\u307e\u3059\uff08\u305d\u306e\u5f8c\u308d\u306b\u6587\u5b57\u306e\u8aac\u660e\u304c\u7d9a\u304d\u307e\u3059\uff09\u3002\u4eca\u56de\u306e\u5206\u6790\u3067\u306f\u3001\u305d\u308c\u3089\u306e\u6587\u5b57\u306f\u5358\u7d14\u306b\u6587\u7ae0\u304b\u3089\u53d6\u308a\u9664\u304d\u307e\u3057\u305f\uff08\u5f62\u614b\u7d20\u89e3\u6790\u306b\u5f71\u97ff\u304c\u51fa\u305d\u3046\u3067\u3059\u304c\u3001\u8003\u3048\u306a\u3044\u4e8b\u306b\u3057\u307e\u3059\uff09\u3002\n\n\u5165\u51fa\u529b\n$ dmd anly.d -L-lmecab\n$ ./anly \"akutagawa.txt\" \"ogai.txt\" \"soseki.txt\" \"kyoka.txt\"\nfilename: akutagawa.txt\n * * *\n\u5358\u8a9e\u6570:  3884\n\u540d\u8a5e: 648 16.684%\n\u52d5\u8a5e: 533 13.723%\n\u526f\u8a5e: 87  2.240%\n\u5f62\u5bb9\u8a5e:  65  1.674%\n\u63a5\u7d9a\u8a5e:  54  1.390%\n\nfilename: ogai.txt\n * * *\n\u5358\u8a9e\u6570:  4123\n\u540d\u8a5e: 736 17.851%\n\u52d5\u8a5e: 653 15.838%\n\u526f\u8a5e: 81  1.965%\n\u5f62\u5bb9\u8a5e:  40  0.970%\n\u63a5\u7d9a\u8a5e:  28  0.679%\n\nfilename: soseki.txt\n * * *\n\u5358\u8a9e\u6570:  10796\n\u540d\u8a5e: 1967    18.220%\n\u52d5\u8a5e: 1718    15.913%\n\u526f\u8a5e: 297 2.751%\n\u5f62\u5bb9\u8a5e:  255 2.362%\n\u63a5\u7d9a\u8a5e:  132 1.223%\n\nfilename: kyoka.txt\n * * *\n\u5358\u8a9e\u6570:  6815\n\u540d\u8a5e: 1144    16.787%\n\u52d5\u8a5e: 956 14.028%\n\u526f\u8a5e: 278 4.079%\n\u5f62\u5bb9\u8a5e:  131 1.922%\n\u63a5\u7d9a\u8a5e:  41  0.602%\n\n\u3055\u3041\u4e0a\u624b\u304f\u51fa\u529b\u3067\u304d\u307e\u3057\u305f\u3001\u304c\u2026\u2026\u3002\n\u3053\u306e\u7d50\u679c\u306f\u679c\u305f\u3057\u3066\u5408\u3063\u3066\u3044\u308b\u306e\u304b\u3002\u78ba\u304b\u3081\u308b\u624b\u6bb5\u304c\u7121\u3044\u3067\u3059\u306d\u3002\n\u691c\u7b97\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u3044\u3066\u307f\u3088\u3046\u306b\u3082\u3001\u79c1\u306eC\u3084C++\u306e\u8155\u524d\u3067\u306f\u305d\u3063\u3061\u3067\u30df\u30b9\u308b\u53ef\u80fd\u6027\u306e\u65b9\u304c\u9ad8\u3044\u3067\u3059\u3002\n\u307e\u3041\u305d\u308c\u3063\u307d\u3044\u611f\u3058\u306e\u7d50\u679c\u306a\u306e\u3067\u5408\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u524d\u63d0\u3067\u9032\u3081\u307e\u3057\u3087\u3046\u304b\u3002\n\n\u7d50\u679c\u3092\u898b\u308b\nvalue \u3067\u30bd\u30fc\u30c8\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u5168\u90e8\u9806\u5e8f\u306f\u540c\u3058\u3067\u3059\u306d\u3002\u3053\u308c\u3089\u306e\u54c1\u8a5e\u306e\u983b\u5ea6\u306f\u5927\u4f53\u3069\u306e\u6587\u7ae0\u3067\u3082\u4f3c\u901a\u3063\u305f\u3082\u306e\u306b\u306a\u308b\u3001\u3068\u3044\u3046\u4e8b\u306a\u306e\u304b\u3002\n\u7d30\u304b\u3044\u5dee\u7570\u306f\u8272\u3005\u3068\u3042\u308a\u307e\u3059\u304c\u2026\u2026\u4f55\u304b\u305d\u306e\u3001\u300c\u3053\u308c\u304c\u50be\u5411\u3060\u300d\u307f\u305f\u304f\u8a00\u3048\u308b\u7a0b\u306e\u9055\u3044\u304c\u898b\u3066\u53d6\u308c\u306a\u3044\u306e\u304c\u8f9b\u3044\u3067\u3059\u3002\n\u3082\u3063\u3068\u30b5\u30f3\u30d7\u30eb\u6570\u5897\u3084\u3057\u3066\u4f55\u3089\u304b\u306e\u7d71\u8a08\u7684\u306a\u8a08\u7b97\u3067\u3082\u3059\u308c\u3070\u3001\u4f55\u304b\u3057\u3089\u6709\u610f\u306a\u7d50\u679c\u3092\u5c0e\u304d\u51fa\u305b\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u306a\u3093\u3068\u3044\u3046\u304b\u3001\u3050\u3060\u3050\u3060\u306a\u7d50\u679c\u3067\u3059\u306d\u3002\n\u3054\u3081\u3093\u306a\u3055\u3044\n\n\u305d\u306e\u4ed6\u306e\u5fdc\u7528\n\u4eca\u56de\u306e\u4f8b\u306f\u3068\u3066\u3082\u8ca7\u5f31\u306a\u3082\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u306f\u5168\u3066\u79c1\u500b\u4eba\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u80fd\u529b\u306b\u4f9d\u308b\u3082\u306e\u3067\u3001MeCab\u3084\u3001D\u8a00\u8a9e\u306e\u6027\u80fd\u3068\u306f\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u3002\n\u3080\u3057\u308dMeCab\u3001D\u8a00\u8a9e\u306e\u6027\u80fd\u3092\u3061\u3083\u3093\u3068\u5f15\u304d\u51fa\u305b\u3070\u3001\u3082\u3063\u3068\u8907\u96d1\u306a\u4e8b\u3092\u3082\u3063\u3068\u5bb9\u6613\u304f\u3001\u305d\u3057\u3066\u9ad8\u901f\u306b\u884c\u3048\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u7d42\u308f\u308a\u306b\n\u3055\u3066D\u8a00\u8a9e\u304b\u3089MeCab\u3092\u4f7f\u3046\u3001\u3069\u3046\u3060\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\n\u6050\u3089\u304fD\u8a00\u8a9e\u304b\u3089C\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u306a\u3093\u3066\u3044\u3046\u306e\u306f\u3001D\u8a00\u8a9eer\u306e\u9593\u3067\u306f\u7a7a\u6c17\u306e\u3088\u3046\u306b\u5f53\u305f\u308a\u524d\u306e\u4e8b\u306e\u3088\u3046\u306a\u306e\u3067\u3001\u6562\u3048\u3066\u3053\u3046\u3044\u3046\u4e8b\u3092\u66f8\u304f\u4eba\u306f\u3042\u3093\u307e\u308a\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\uff08\u79c1\u306b\u3068\u3063\u3066\u306f\u5927\u5909\u306a\u4e8b\u3067\u3057\u305f\uff09\u3002\n\u3067\u3082C++\u3092\u4f7f\u3046\u306a\u3089\u3069\u3046\u3060\u308d\u3046\uff1f\u3000\u3068\u601d\u3063\u3066\u3053\u306e\u6295\u7a3f\u3092\u66f8\u3053\u3046\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3082\u305d\u3082C++\u306eAPI\u3092D\u304b\u3089\u4f7f\u3046\u306e\u306b\u5931\u6557\u3059\u308b\u3068\u3044\u3046\u2026\u2026\u3002\n\u3057\u304b\u3082\u5fd7\u3092\u5c48\u3057\u305f\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u5b8c\u5168\u306b\u306f\u4f7f\u3044\u3053\u306a\u305b\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u3002\n\u4ee5\u4e0b\u3001\u305d\u308c\u306b\u89e3\u3059\u308b\u89e3\u8aac\u3067\u3059\u3002\n\n\u8ab2\u984c\nMeCab\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u898b\u305f\u65b9\u3067\u3042\u308c\u3070\u3001mecab_dictionary_info_t\u3092\u8abf\u3079\u308b\u90e8\u5206\u304c\u5c11\u3057\u9055\u3046\u306a\u3001\u3068\u304a\u6c17\u4ed8\u304d\u306b\u306a\u3063\u305f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nlibmecab.html\nconst mecab_dictionary_info_t *d = mecab_dictionary_info(mecab);\nfor (; d; d = d->next) {\n    printf(\"filename: %s\\n\", d->filename);\n    printf(\"charset: %s\\n\", d->charset);\n    printf(\"size: %d\\n\", d->size);\n    printf(\"type: %d\\n\", d->type);\n    printf(\"lsize: %d\\n\", d->lsize);\n    printf(\"rsize: %d\\n\", d->rsize);\n    printf(\"version: %d\\n\", d->version);\n}\n\n\n\u30b5\u30f3\u30d7\u30eb\u306b\u8f09\u3063\u3066\u308b\u30b3\u30fc\u30c9\u3067\u306f\u3001for\u30eb\u30fc\u30d7\u3092\u4f7f\u3063\u3066\u30ea\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u308bmecab_dictionary_info_t\u69cb\u9020\u4f53\u3092\u5168\u3066\u8fbf\u3063\u3066\u3044\u307e\u3059\u306d\u3002\u4eca\u56de\u79c1\u304c\u4f7f\u7528\u3057\u305f\u74b0\u5883\u3067\u306f\u3001\u8f9e\u66f8\u306f1\u3064\u3057\u304b\u306a\u3044\u306e\u3067\u3001next\u306e\u5148\u306b\u306fnull\u304c\u5165\u3063\u3066\u3044\u308b\u2026\u2026\u3068\u79c1\u306f\u601d\u3063\u305f\u306e\u3067\u3059\u3002\u5b9f\u969b\u3001C\u306e\u30b3\u30fc\u30c9\u3084C++\u306e\u30b3\u30fc\u30c9\u306f\u305d\u3046\u3044\u3046\u69cb\u9020\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001D\u304b\u3089mecab_dictionary_info()\u95a2\u6570\u3092\u4f7f\u3063\u3066mecab_dictionary_info_t\u69cb\u9020\u4f53\u3092\u4f5c\u308b\u3068\u3001\u4f55\u6545\u304bnext\u304cnull\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002null\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u4f55\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u304b\u304c\u308f\u304b\u3089\u306a\u3044\u2026\u2026\u3002\nimport mecab;\nimport std.stdio;\nimport std.conv : to;\n\nvoid main()\n{\n    auto mecab = mecab_new2(\"\");\n    scope(exit) mecab_destroy(mecab);\n\n    auto dic = mecab_dictionary_info(mecab);\n\n    if(dic) writeln(\"dic\u306f\u3042\u308b\u3002\");\n    writeln(dic.filename.to!string);\n\n    dic = dic.next;\n    if(dic) writeln(\"dic\u306f\u307e\u3060\u3042\u308b\u3002\");\n    writeln(dic.filename.to!string); // \u3053\u3053\u3067Segmentation fault\n}\n\n$ ./mtf3\ndic\u306f\u3042\u308b\u3002\n/var/lib/mecab/dic/debian/sys.dic\ndic\u306f\u307e\u3060\u3042\u308b\u3002\nSegmentation fault\n\n\u3055\u3066\u3001dic.next\u306b\u306f\u4f55\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u304b\u3002\nconst(mecab_dictionary_info_t)*\u578b\u306a\u306e\u306f\u78ba\u5b9f\u306a\u306e\u3067\u3059\u304c\u2026\u2026\u3002\n\u7d50\u5c40\u308f\u304b\u3089\u305a\u4ed5\u821e\u3044\u3067\u3057\u305f\u3002\n\u529b\u4e0d\u8db3\u3067\u3054\u3081\u3093\u306a\u3055\u3044\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\n\uff0812\u670824\u65e5\u8ffd\u8a18\uff09\n\u6559\u3048\u3066\u9802\u304d\u307e\u3057\u305f\uff01\n\u4ee5\u4e0b\u306b\u3001\u305d\u306e\u4fee\u6b63\u3068\u89e3\u8aac\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n\u554f\u984c\u89e3\u6c7a\n\u30b3\u30e1\u30f3\u30c8\u3067\u8272\u3005\u3068\u6559\u3048\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001\u8a18\u4e8b\u306e\u8a02\u6b63\u3092\u4ee5\u4e0b\u306b\u8a18\u3057\u307e\u3059\u3002\n\nD\u304b\u3089C++\u306e\u30af\u30e9\u30b9\u3092\u547c\u3076\nTagger\u306e\u30e1\u30f3\u30d0\u95a2\u6570\u306bbool parse(Lattice)\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u306a\u304b\u3063\u305f\u306e\u304c\u307e\u305a\u304b\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001\u3053\u306e\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u305f\u3060\u3057\u5f15\u6570\u304cLattice\u30af\u30e9\u30b9\u306a\u306e\u3067\u3001\u5148\u306b\u3053\u306e\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\u3088\u3063\u3066\u3001\nextern(C++, MeCab)\n{\n    interface Lattice\n    {\n    }\n\n    interface Tagger\n    {\n        bool parse(Lattice);\n        const(char)* parse(const(char)*);\n    }\n\n    Tagger createTagger(const(char)*);\n}\n\n\u3068\u3059\u308c\u3070\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\u2026\u2026\u3088\u3046\u3067\u3059\u3001\u3068\u66d6\u6627\u306a\u66f8\u304d\u65b9\u3092\u3057\u3066\u3044\u308b\u306e\u306f\u3001\u79c1\u304c\u672a\u3060\u306b\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u4e2d\u3067\u305d\u308c\u305e\u308c\u306e\u547c\u3073\u51fa\u3057\u304c\u3069\u3053\u306e\u5b9a\u7fa9\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u304b\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u304b\u3089\u3067\u3059\u3002\n\u3068\u3082\u304b\u304f\u3001D\u304b\u3089C++\u3092\u547c\u3073\u51fa\u3059\u4e8b\u306f\u3061\u3083\u3093\u3068\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u7d20\u6674\u3089\u3057\u3044\u3067\u3059\u3002\n\u4ed6\u306bMeCab::Node\u7b49\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u3051\u3070\u3001\u4eca\u56de\u5b9f\u884c\u3057\u305f\u4f8b\u3092C++\u306e\u547c\u3073\u51fa\u3057\u3067\u5b9f\u884c\u3059\u308b\u4e8b\u3082\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n\u8ab2\u984c\u306e\u89e3\u6c7a\n\u6700\u5f8c\u306e\u8ab2\u984c\u3067\u3059\u304c\u2026\u2026\u3053\u308c\u306f\u5b8c\u74a7\u306b\u611a\u304b\u306a\u79c1\u306b\u539f\u56e0\u304c\u3042\u308a\u307e\u3057\u305f\u3002\nMeCab\u306emecab_dictionary_info_t\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nstruct mecab_dictionary_info_t {\n  const char                     *filename;\n  const char                     *charset;\n  unsigned int                    size;\n  int                             type;\n  unsigned int                    lsize;\n  unsigned int                    rsize;\n  unsigned short                  version;\n  struct mecab_dictionary_info_t *next;\n};\n\n\u3053\u308c\u3092\u79c1\u306f\u3001\u6b21\u306e\u3088\u3046\u306bD\u306b\u7ffb\u8a33\u3057\u307e\u3057\u305f\u3002\nstruct mecab_dictionary_info_t {\n    const(char)* filename;\n    const(char)* charset;\n    uint size;\n    int type;\n    uint lsize;\n    uint rsize;\n    mecab_dictionary_info_t *next;\n}\n\n\u304a\u3084\u3041\uff1f\u3000\u4f55\u304b\u8db3\u308a\u307e\u305b\u3093\u306a\u3002\n\u306f\u3044\u3001\u305d\u3046\u3067\u3059\u3002version\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u7701\u3044\u3066\u3044\u307e\u3057\u305f\u3002\n\u300c\u3042\u308c\u3001version\u3063\u3066D\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3058\u3083\u3093\u3002\u56f0\u3063\u305f\u306a\u2026\u2026\u307e\u3041\u5b9a\u7fa9\u7121\u3057\u3067\u3082\u53c2\u7167\u3057\u306a\u3051\u308a\u3083\u3044\u3044\u304b\u300d\n\u3044\u3044\u308f\u304d\u3083\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\nC\u3067\u3082D\u3067\u3082\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4e0a\u304b\u3089\u9806\u756a\u306b\u4e26\u3079\u3066\u3044\u304f\u306e\u304c\u69cb\u9020\u4f53\u306e\u4f5c\u6cd5\u3067\u3059\u3082\u306e\u306d\u3002\n\u3061\u3083\u3093\u3068\u30ad\u30fc\u30ef\u30fc\u30c9\u3068\u540c\u540d\u306e\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u3070\u3063\u3061\u308a\u66f8\u3044\u3066\u3042\u308a\u307e\u3057\u305f\u3002\nhtod\u4f7f\u3063\u3066\u304a\u3051\u3070\u3053\u3093\u306a\u4e8b\u306b\u306f\u2026\u2026\u3002\n\u5f01\u89e3\u306e\u4f59\u5730\u306e\u7121\u3044\u30ec\u30d9\u30eb\u306e\u5927\u30dd\u30ab\u3067\u3059\u3002\u672c\u5f53\u306b\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001D\u306b\u3082MeCab\u306b\u3082\u4e00\u5207\u306e\u7455\u75b5\u304c\u7121\u304b\u3063\u305f\u4e8b\u304c\u8a3c\u660e\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u304a\u307e\u3051\u3000dic\u306e\u6b63\u4f53\n\u3082\u3046\u3053\u3053\u307e\u3067\u8aad\u3093\u3067\u3044\u305f\u3060\u3051\u308c\u3070\u660e\u3089\u304b\u306a\u4e8b\u3067\u3059\u304c\u3001\nvoid main()\n{\n    auto mecab = mecab_new2(\"\");\n    scope(exit) mecab_destroy(mecab);\n\n    auto dic = mecab_dictionary_info(mecab);\n\n    writeln(dic.filename.to!string);\n    dic = dic.next;\n    writeln(cast(ushort)dic);\n}\n\n$ dmd tmf4.d -L-lmecab\n$ ./tmf4\n/var/lib/mecab/dic/debian/sys.dic\n102\n\ndic.next\u306e\u4e2d\u306b\u3044\u305f\u306e\u306fversion\u3055\u3093\u3067\u3057\u305f\n\n\u3055\u3066\u3001dic.next\u306b\u306f\u4f55\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u304b\u3002\nconst(mecab_dictionary_info_t)*\u578b\u306a\u306e\u306f\u78ba\u5b9f\u306a\u306e\u3067\u3059\u304c\u2026\u2026\u3002\n\n\u3053\u3053\u304b\u3089\u3057\u3066\u9593\u9055\u3063\u3066\u305f\u308f\u3051\u3067\u3059\u306d\u3002\n\u3053\u308c\u306f\u6065\u305a\u304b\u3057\u3044\u3002\n[D\u8a00\u8a9e Advent Calendar 2014](http://qiita.com/advent-calendar/2014/dlang) \u306b\u7a7a\u304d\u304c\u3042\u3063\u305f\u306e\u3067\u66f8\u304b\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u96d1\u6587\u3067\u7533\u3057\u8a33\u306a\u3044\u3067\u3059\u3002\n\n#\u548c\u5e03\u856a\n\u3055\u3066\u3055\u3066\u3001\u7686\u3055\u3093\u3001\u548c\u5e03\u856a\u306f\u597d\u304d\u3067\u3059\u304b\uff1f\n\u79c1\u306f\u5927\u597d\u304d\u3067\u3059\u3002\n\n\u305d\u3093\u306a\u308f\u3051\u3067MeCab\u3092D\u304b\u3089\u4f7f\u3046\u3068\u3044\u3046\u8a71\u3067\u3059\u3002\n\n##MeCab\u3068\u306f\nMeCab\u3068\u306f\u3001\u5de5\u85e4\u62d3 \u6c0f\u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u305f\u5f62\u614b\u7d20\u89e3\u6790\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u3002\n\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30fb\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u3057\u3066GPL\u3068\u304bLGPL\u3068\u304bBSD\u30e9\u30a4\u30bb\u30f3\u30b9\u3068\u304b\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067\u4f7f\u3044\u307e\u3059\u3002\n\n```bash\n$ echo \"\u5931\u6557\u3057\u305f\u3063\u3066\u3044\u3044\u3058\u3083\u306a\u3044\u3001\u306b\u3093\u3052\u3093\u3060\u3082\u306e\" | mecab\n\u5931\u6557\t\u540d\u8a5e,\u30b5\u5909\u63a5\u7d9a,*,*,*,*,\u5931\u6557,\u30b7\u30c3\u30d1\u30a4,\u30b7\u30c3\u30d1\u30a4\n\u3057\t\u52d5\u8a5e,\u81ea\u7acb,*,*,\u30b5\u5909\u30fb\u30b9\u30eb,\u9023\u7528\u5f62,\u3059\u308b,\u30b7,\u30b7\n\u305f\t\u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30bf,\u57fa\u672c\u5f62,\u305f,\u30bf,\u30bf\n\u3063\u3066\t\u52a9\u8a5e,\u683c\u52a9\u8a5e,\u9023\u8a9e,*,*,*,\u3063\u3066,\u30c3\u30c6,\u30c3\u30c6\n\u3044\u3044\t\u5f62\u5bb9\u8a5e,\u81ea\u7acb,*,*,\u5f62\u5bb9\u8a5e\u30fb\u30a4\u30a4,\u57fa\u672c\u5f62,\u3044\u3044,\u30a4\u30a4,\u30a4\u30a4\n\u3058\u3083\t\u52a9\u8a5e,\u526f\u52a9\u8a5e,*,*,*,*,\u3058\u3083,\u30b8\u30e3,\u30b8\u30e3\n\u306a\u3044\t\u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30ca\u30a4,\u57fa\u672c\u5f62,\u306a\u3044,\u30ca\u30a4,\u30ca\u30a4\n\u3001\t\u8a18\u53f7,\u8aad\u70b9,*,*,*,*,\u3001,\u3001,\u3001\n\u306b\u3093\u3052\u3093\u3060\u3082\u306e\t\u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u4e00\u822c,*,*,*,\u306b\u3093\u3052\u3093\u3060\u3082\u306e,\u30cb\u30f3\u30b2\u30f3\u30c0\u30e2\u30ce,\u30cb\u30f3\u30b2\u30f3\u30c0\u30e2\u30ce\nEOS\n```\n\n\u2026\u2026MeCab\u3055\u3093\u7684\u306b\u306f\uff08\u3068\u3044\u3046\u304bIPA\u8f9e\u66f8\u7684\u306b\u306f\uff09\u300c\u306b\u3093\u3052\u3093\u3060\u3082\u306e\u300d\u306f\u56fa\u6709\u540d\u8a5e\u306e\u3088\u3046\u3067\u3059\u3002\n\u30c9\u30e9\u30de\u306e\u30bf\u30a4\u30c8\u30eb\u3060\u304b\u3089\uff1f\u3000\u307e\u3041\u3044\u3044\u3084\u3002\n\u8a73\u3057\u304f\u306f[wikipedia](http://ja.wikipedia.org/wiki/MeCab)\u3084[\u516c\u5f0f\u30b5\u30a4\u30c8](http://mecab.googlecode.com/svn/trunk/mecab/doc/index.html)\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n##\u5f62\u614b\u7d20\u89e3\u6790\u3068\u306f\n\u81ea\u7136\u8a00\u8a9e\u3067\u66f8\u304b\u308c\u305f\u6587\u3092\u3001\u5f62\u614b\u7d20\u306b\u5206\u89e3\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306e\u54c1\u8a5e\u3092\u5224\u5225\u3059\u308b\u4e8b\u3067\u3059\u3002\n\u3053\u3061\u3089\u3082\u8a73\u3057\u304f\u306f[wikipedia](http://ja.wikipedia.org/wiki/\u5f62\u614b\u7d20\u89e3\u6790)\u8fba\u308a\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\uff08\u3060\u3063\u3066\u8a73\u3057\u304f\u8aac\u660e\u3067\u304d\u308b\u7a0b\u306e\u77e5\u8b58\u3092\u6301\u3063\u3066\u306a\u3044\u3093\u3060\u3082\u306e\uff09\n\n#MeCab\u3092D\u304b\u3089\u4f7f\u3046\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u672c\u984c\u3067\u3059\u3002\u3053\u306eMeCab\u3092D\u8a00\u8a9e\u3067\u4f7f\u3063\u3066\u307f\u3088\u3046\u3001\u3068\u3044\u3046\u8a71\u3067\u3059\u3002\n\n##MeCab\u3068C++\u3068D\nMeCab\u306fC++\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u6b8b\u5ff5\u306a\u4e8b\u306b\u3001D\u8a00\u8a9e\u306e\u30d0\u30a4\u30ca\u30ea\u306fC++\u306e\u30d0\u30a4\u30ca\u30ea\u3068\u306e\u4e92\u63db\u6027\u304c\u3042\u307e\u308a\u3042\u308a\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u300c**\u3042\u307e\u308a**\u3042\u308a\u307e\u305b\u3093\u300d\u3068\u3044\u3046\u4e8b\u306f\u3001\u5168\u304f\u7121\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u3082\u306a\u3044\u306e\u3067\u3059\u3002\n[\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u5f53\u8a72\u306e\u30da\u30fc\u30b8](http://dlang.org/cpp_interface.html)\u306b\u3088\u308b\u3068\u3001\u30af\u30e9\u30b9\u3084\u4eee\u60f3\u95a2\u6570\u306a\u3093\u304b\u306f\u3042\u308b\u7a0b\u5ea6\u4e92\u63db\u6027\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n[\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u5165\u3063\u3066\u3044\u308b\u89e3\u8aac](http://mecab.googlecode.com/svn/trunk/mecab/doc/libmecab.html)\u306b\u3088\u308b\u3068\u3001MeCab\u306e\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u306f`MeCab::Tagger`\u30af\u30e9\u30b9\u3055\u3048\u3042\u308c\u3070\u4f7f\u3048\u308b\u3088\u3046\u3067\u3059\u3002\n\u2026\u2026\u4f55\u3068\u304bD\u304b\u3089\u4f7f\u3048\u308b\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\n##\u74b0\u5883\nUbuntu 14.04 \u306e\u4e0a\u3067\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\u3002\n\u65e2\u306bMeCab\u81ea\u4f53\u306f apt-get \u3067\u5165\u308c\u3066\u3042\u308b\u72b6\u614b\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001Windows \u3068\u304b\u3060\u3068\u4e0a\u624b\u304f\u884c\u304b\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u8f9e\u66f8\u306fUTF-8\u306eIPA\u8f9e\u66f8\u3067\u3059\u3002\n\n##D\u304b\u3089C++\u306e\u30af\u30e9\u30b9\u3092\u547c\u3076\n\u4e0a\u8a18\u30b5\u30a4\u30c8\u306e\u89e3\u8aac\u306b\u3088\u308b\u3068\u3001D\u304b\u3089C++\u306e\u30af\u30e9\u30b9\u3092\u4f7f\u3046\u306b\u306f\u3001D\u306e`interface`\u3092\u4f7f\u3048\u3070\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u305d\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```d:test_cpp.d\nextern(C++, MeCab)\n{\n\tinterface Tagger\n\t{\n\t\tconst(char)* parse(const(char)*);\n\t}\n\t\n\tTagger createTagger(const(char)*);\n}\n\nimport std.string : toStringz;\nimport std.conv : to;\nimport std.stdio;\n\nvoid main()\n{\n\tauto tagger = createTagger(\"\");\n\tauto input = \"\u592a\u90ce\u306f\u6b21\u90ce\u304c\u6301\u3063\u3066\u3044\u308b\u672c\u3092\u82b1\u5b50\u306b\u6e21\u3057\u305f\u3002\";\n\tauto result = tagger.parse(input.toStringz);\n\t\n\twriteln(result.to!string);\n}\n```\n\n\u4f55\u3060\u304b\u3068\u3063\u3066\u3082\u9069\u5f53\u306b\u898b\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u3054\u5bb9\u8d66\u3092\u3002\n\u52d5\u3051\u3070\u826f\u3044\u306e\u3067\u3059\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ dmd test_cpp.d -L-lmecab\n```\n\n\u30ea\u30f3\u30ab\u306b MeCab \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\uff08libmecab.a\uff09\u3092\u30ea\u30f3\u30af\u3059\u308b\u3088\u3046\u8a00\u3046\u306e\u3092\u5fd8\u308c\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002\n\n```bash\n$ ./test_cpp\nSegmentation fault (\u30b3\u30a2\u30c0\u30f3\u30d7)\n```\n\n**\u3059\u3044\u307e\u305b\u3093\u3001\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f**\n\u307e\u3001\u307e\u3041\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306b\u306f\u5931\u6557\u304c\u4ed8\u304d\u7269\u3067\u3059\u304b\u3089\u306d\u3002\n\u30b3\u30a2\u30c0\u30f3\u30d7\u3092\u5410\u3044\u305f\u3088\u3046\u306a\u306e\u3067\u3001\u3053\u308c\u3092\u8abf\u3079\u3066\u307f\u307e\u3057\u3087\u3046\u2026\u2026\u3042\u3001\u8a2d\u5b9a\u3059\u308b\u306e\u5fd8\u308c\u3066\u305f\u304b\u3089\u51fa\u529b\u3055\u308c\u3066\u306a\u3044\u3084\u3002\n\u3057\u304b\u3057\u3069\u3046\u305b\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3092\u5165\u308c\u3066\u306a\u3044\u306e\u3067\u307e\u3041\u3001\u306d\u3002\n\u4eca\u5ea6\u306f -g \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u306a\u304a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ dmd -g test_cpp.d -L-lmecab\n```\n\n\u305d\u308c\u3067\u3001GDB\u3092\u4f7f\u3063\u3066\u30c7\u30d0\u30c3\u30b0\u3092\u2026\u2026\n\n```bash\n$ gdb ./test_cpp\n\n\t:\n\t:\n\nProgram received signal SIGSEGV, Segmentation fault.\n0xb7e09d2a in MeCab::Viterbi::analyze(MeCab::Lattice*) const ()\n   from /usr/lib/libmecab.so.2\n(gdb) where\n#0  0xb7e09d2a in MeCab::Viterbi::analyze(MeCab::Lattice*) const ()\n   from /usr/lib/libmecab.so.2\n#1  0xb7e0c821 in ?? () from /usr/lib/libmecab.so.2\n#2  0x0806fc1a in D main () at test_cpp.d:16\n#3  0x08074ada in rt.dmain2._d_run_main() ()\n#4  0x08074a50 in rt.dmain2._d_run_main() ()\n#5  0x08074a9f in rt.dmain2._d_run_main() ()\n#6  0x08074a50 in rt.dmain2._d_run_main() ()\n#7  0x080749e7 in _d_run_main ()\n#8  0x0807256c in main ()\n```\n\n\u3093\u3093\u2026\u2026\uff1f\n\u2026\u2026\u3002\n\u2026\u3002\n\n\n\n\u305d\u306e\u5f8c\u3001\u8272\u3005\u8abf\u3079\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3069\u3046\u306b\u3082\u539f\u56e0\u304c\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3084\u306f\u308a\u79c1\u306b\u306fD\u3068C++\u306e\u63a5\u7d9a\u306a\u3069\u3068\u3044\u3046\u9ad8\u5c1a\u306a\u884c\u70ba\u306f\u65e9\u3059\u304e\u305f\u306e\u3067\u3057\u3087\u3046\u304b\u3002\n\u3069\u306a\u305f\u304b\u89e3\u308b\u65b9\u3001\u3054\u6559\u6388\u304f\u3060\u3055\u308c\u3070\u5927\u5909\u559c\u3073\u307e\u3059\u3002\n\n\u7d42\u308f\u308a\n\n(12\u670824\u65e5\u8ffd\u8a18)\n\u30b3\u30e1\u30f3\u30c8\u3067\u3054\u6559\u6388\u9802\u304d\u307e\u3057\u305f\uff01\n\u8a18\u4e8b\u306e\u672b\u5c3e\u306b\u539f\u56e0\u3068\u89e3\u6c7a\u7b56\u3092\u8ffd\u8a18\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\n#\u305d\u308c\u3067\n\u3053\u308c\u3067\u7d42\u308f\u308b\u3068\u6d41\u77f3\u306b\u300c\u771f\u9762\u76ee\u306b\u66f8\u3051\u300d\u3068\u304a\u53f1\u308a\u3092\u53d7\u3051\u305d\u3046\u306a\u306e\u3067\u3001\u3082\u3046\u5c11\u3057\u7d9a\u3051\u307e\u3057\u3087\u3046\u3002\nMeCab\u306b\u306fC\u306eAPI\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nRuby\u3084Python\u3084Java\u3078\u306e\u30dd\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u3001\u3053\u306eC\u306eAPI\uff08\u3068SWIG\uff09\u3092\u5229\u7528\u3057\u3066\u884c\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n##MeCab\u3068C\u3068D\nD\u8a00\u8a9e\u306fC\u8a00\u8a9e\u3068\u306e\u63a5\u7d9a\u304c\u306a\u308b\u3079\u304f\u7c21\u5358\u306a\u3088\u3046\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001C\u306eAPI\u3092\u901a\u3057\u3066\u306a\u3089D\u304b\u3089\u3082\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u7c21\u5358\u306b\u547c\u3079\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\u3068\u3044\u3046\u304b\u6700\u521d\u304b\u3089\u305d\u3046\u3057\u3066\u304a\u3051\u3088\u3001\u3068\u3044\u3046\u611f\u3058\u306a\u306e\u3067\u3059\u304c\u3001C++\u3092\u30e9\u30c3\u30d7\u3057\u305fC\u3092\u30e9\u30c3\u30d7\u3057\u305fD\u3001\u3088\u308a\u3082C++\u3092\u30e9\u30c3\u30d7\u3057\u305fD\u3001\u306e\u65b9\u304c\u7d20\u76f4\u3067\u826f\u3044\u306a\u3041\u3001\u306a\u3093\u3066\u601d\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u304c\u9593\u9055\u3044\u3067\u3057\u305f\u3002\n\u305d\u308c\u3067\u306f\u30011\u3064\u306e\u30b3\u30fc\u30c9\u306b\u306f1024\u30ef\u30fc\u30c9\u5206\u306e\u4fa1\u5024\u304c\u3042\u308b\u3089\u3057\u3044\u306e\u3067\u3001\u65e9\u901f\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```d:test_c.d\nextern(C)\n{\n\tstruct mecab_t;\n\t\n\tmecab_t* mecab_new2(const(char)* arg);\n\tvoid mecab_destroy(mecab_t *mecab);\n\tconst(char)* mecab_sparse_tostr(mecab_t *mecab, const(char)* str);\n}\n\nimport std.string : toStringz;\nimport std.conv : to;\nimport std.stdio;\n\nvoid main()\n{\n\tauto input = \"\u592a\u90ce\u306f\u6b21\u90ce\u304c\u6301\u3063\u3066\u3044\u308b\u672c\u3092\u82b1\u5b50\u306b\u6e21\u3057\u305f\u3002\";\n\t\n\tauto mecab = mecab_new2(\"\");\n\tscope(exit) mecab_destroy(mecab);\n\t\n\tauto result = mecab_sparse_tostr(mecab, input.toStringz);\n\twritefln(result.to!string);\n}\n```\n\n\u3061\u3087\u3063\u3068\u3057\u305f\u30c7\u30b8\u30e3\u30f4\u611f\u304c\u3042\u308a\u307e\u3059\u304b\uff1f\n\u307e\u3041\u4e0a\u306e\u3068\u4f3c\u305f\u308a\u5bc4\u3063\u305f\u308a\u306a\u5185\u5bb9\u306b\u306a\u308a\u307e\u3059\u3088\u306d\u3002\n\u2026\u2026\u5148\u7a0b\u306e\u5931\u6557\u3092\u601d\u3044\u51fa\u3057\u3066\u5fc3\u304c\u82e6\u3057\u3044\u3067\u3059\u304c\u3001\u90aa\u5ff5\u306f\u632f\u308a\u6255\u3063\u3066\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ dmd test_c.d -L-lmecab\n```\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u306e\u30ea\u30f3\u30af\u3092\uff08\uff52\uff59\n\n```bash\n$ ./test_c\n\u592a\u90ce\t\u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u4eba\u540d,\u540d,*,*,\u592a\u90ce,\u30bf\u30ed\u30a6,\u30bf\u30ed\u30fc\n\u306f\t\u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\n\u6b21\u90ce\t\u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u4eba\u540d,\u540d,*,*,\u6b21\u90ce,\u30b8\u30ed\u30a6,\u30b8\u30ed\u30fc\n\u304c\t\u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u304c,\u30ac,\u30ac\n\u6301\u3063\t\u52d5\u8a5e,\u81ea\u7acb,*,*,\u4e94\u6bb5\u30fb\u30bf\u884c,\u9023\u7528\u30bf\u63a5\u7d9a,\u6301\u3064,\u30e2\u30c3,\u30e2\u30c3\n\u3066\t\u52a9\u8a5e,\u63a5\u7d9a\u52a9\u8a5e,*,*,*,*,\u3066,\u30c6,\u30c6\n\u3044\u308b\t\u52d5\u8a5e,\u975e\u81ea\u7acb,*,*,\u4e00\u6bb5,\u57fa\u672c\u5f62,\u3044\u308b,\u30a4\u30eb,\u30a4\u30eb\n\u672c\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u672c,\u30db\u30f3,\u30db\u30f3\n\u3092\t\u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u3092,\u30f2,\u30f2\n\u82b1\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u82b1,\u30cf\u30ca,\u30cf\u30ca\n\u5b50\t\u540d\u8a5e,\u63a5\u5c3e,\u4e00\u822c,*,*,*,\u5b50,\u30b3,\u30b3\n\u306b\t\u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u306b,\u30cb,\u30cb\n\u6e21\u3057\t\u52d5\u8a5e,\u81ea\u7acb,*,*,\u4e94\u6bb5\u30fb\u30b5\u884c,\u9023\u7528\u5f62,\u6e21\u3059,\u30ef\u30bf\u30b7,\u30ef\u30bf\u30b7\n\u305f\t\u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30bf,\u57fa\u672c\u5f62,\u305f,\u30bf,\u30bf\n\u3002\t\u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\nEOS\n```\n\n**\u3084\u3063\u305f\uff01\u3000\u52d5\u3044\u305f\uff01**\n\n##\u89e3\u8aac\n\u4e0a\u306e\u4f8b\u3067\u4f7f\u7528\u3057\u305f`mecab_sparse_tostr()`\u95a2\u6570\u306f\u3001\u6587\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u6587\u5b57\u5217\u306b\u3057\u3066\u8fd4\u3057\u3066\u304f\u308c\u308b\u3068\u3044\u3046\u95a2\u6570\u3067\u3059\u3002\n\u4eba\u9593\u304c\u898b\u308b\u5206\u306b\u306f\u3068\u3066\u3082\u89e3\u308a\u3084\u3059\u3044\u3067\u3059\u304c\u3001\u8a08\u7b97\u6a5f\u306b\u3068\u3063\u3066\u306f\u305d\u3046\u3067\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4e2d\u3067\u5f62\u614b\u7d20\u89e3\u6790\u306e\u7d50\u679c\u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001\u4ed6\u306e\u95a2\u6570\u3092\u5229\u7528\u3059\u308b\u306e\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n##\u30ce\u30fc\u30c9\u306b\u5206\u5272\n\u305d\u3053\u3067\u51fa\u3066\u304f\u308b\u306e\u304c`mecab_sparse_tonode()`\u95a2\u6570\u3067\u3059\u3002\n\u3053\u306e\u95a2\u6570\u306f\u3001\u6587\u3092\u5f62\u614b\u7d20\u6bce\u306b\u5206\u5272\u3057\u3066\u3001\u305d\u306e\u5f62\u614b\u7d20\u306e\u60c5\u5831\u3092\u683c\u7d0d\u3057\u305f\u69cb\u9020\u4f53\u3092\u4f5c\u308a\u3001\u305d\u308c\u3089\u306e\u69cb\u9020\u4f53\u3092\u53cc\u65b9\u5411\u30ea\u30b9\u30c8\u3068\u3057\u3066\u7e4b\u3052\u3001\u305d\u306e\u5148\u982d\u306e\u69cb\u9020\u4f53\u306e\u30dd\u30a4\u30f3\u30bf\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\u95a2\u6570\u3067\u3059\u3002\u2026\u2026\u6587\u7ae0\u306b\u3059\u308b\u3068\u3084\u305f\u3089\u3084\u3084\u3053\u3057\u3044\u3067\u3059\u304c\u3001\u8981\u3059\u308b\u306b\u5206\u6790\u7d50\u679c\u3092\u5f62\u614b\u7d20\u6bce\u306b\u6271\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3044\u3046\u4e8b\u3067\u3059\u3002\n\u4eca\u5ea6\u306f\u3053\u306e\u95a2\u6570\u3092\u4f7f\u3063\u3066\u5f62\u614b\u7d20\u89e3\u6790\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3057\u304b\u3057`mecab_sparse_tonode()`\u95a2\u6570\u3092\u4f7f\u3063\u3066\u5404\u5f62\u614b\u7d20\u3092\u8abf\u3079\u308b\u306b\u306f\u3001\u305d\u308c\u304c\u8fd4\u3059\u69cb\u9020\u4f53\u3067\u3042\u308b`mecab_node_t`\u306e\u5b9a\u7fa9\u304c\u7121\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u4ed6\u306b\u3082`mecab_dictionary_info_t`\u3068\u304b\u3082\u4f7f\u3044\u305f\u3044\u306a\u3041\u3001\u3068\u8003\u3048\u3066\u3044\u304f\u3068\u3001\u5168\u3066\u306e\u30bd\u30fc\u30b9\u30921\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u3044\u304f\u306e\u306f\u3061\u3087\u3063\u3068\u554f\u984c\u304c\u5927\u304d\u3044\u3068\u3044\u3046\u4e8b\u306b\u601d\u3044\u81f3\u308a\u307e\u3059\u3002\n\u305d\u3046\u3044\u3046\u308f\u3051\u3067\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306f\u5206\u5272\u3057\u307e\u3057\u3087\u3046\u3002\n\n```d:mecab.di\nmodule mecab;\n\n__gshared extern(C) nothrow @nogc:\n\nenum\n\tMECAB_NOR_NODE = 0,\n\tMECAB_UNK_NODE = 1,\n\tMECAB_BOS_NODE = 2,\n\tMECAB_EOS_NODE = 3,\n\tMECAB_EON_NODE = 4;\n\nstruct mecab_t;\n\nstruct mecab_dictionary_info_t {\n\tconst(char)* filename;\n\tconst(char)* charset;\n\tuint size;\n\tint type;\n\tuint lsize;\n\tuint rsize;\n\tushort version_;\n\tmecab_dictionary_info_t *next;\n}\n\nstruct mecab_path_t {\n\tmecab_node_t* rnode;\n\tmecab_path_t* rnext;\n\tmecab_node_t* lnode;\n\tmecab_path_t* lnext;\n\tint cost;\n\tfloat prob;\n}\n\nstruct mecab_node_t {\n\tmecab_node_t* prev;\n\tmecab_node_t* next;\n\tmecab_node_t* enext;\n\tmecab_node_t* bnext;\n\tmecab_path_t* rpath;\n\tmecab_path_t* lpath;\n\tconst(char)* surface;\n\tconst(char)* feature;\n\tuint id;\n\tushort length;\n\tushort rlength;\n\tushort rcAttr;\n\tushort lcAttr;\n\tushort posid;\n\tubyte char_type;\n\tubyte stat;\n\tubyte isbest;\n\tfloat alpha;\n\tfloat beta;\n\tfloat prob;\n\tshort wcost;\n\tlong cost;\n}\n\nmecab_t* mecab_new2(const(char)*);\nvoid mecab_destroy(mecab_t*);\n\nconst(char)* mecab_sparse_tostr(mecab_t*, const(char)*);\n\nconst(mecab_node_t)* mecab_sparse_tonode(mecab_t*, const(char)*);\n\nconst(mecab_dictionary_info_t)* mecab_dictionary_info(mecab_t*);\n```\n\n\uff0812\u670824\u65e5\u8ffd\u8a18\uff09\n\u30b3\u30e1\u30f3\u30c8\u3067\u3054\u6307\u6458\u3092\u9802\u304d\u307e\u3057\u305f\u3002\n\u305d\u308c\u306b\u5f93\u3044\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u91cd\u5927\u306a\u554f\u984c\u70b9\u3092\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\n\u8a18\u4e8b\u306e\u672b\u5c3e\u306b\u8ffd\u8a18\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n\u2026\u2026C\u306e\u30d8\u30c3\u30c0\u3092D\u306b\u7ffb\u8a33\u3059\u308b\u306e\u306b\u6163\u308c\u3066\u308b\u4eba\u304b\u3089\u898b\u308b\u3068\u3001\u7a81\u3063\u8fbc\u307f\u3069\u3053\u308d\u6e80\u8f09\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f\u304a\u304b\u3057\u3044\u3001\u307f\u305f\u3044\u306a\u70b9\u304c\u3042\u308c\u3070\u3001\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\n\u514e\u3082\u89d2\u3082\u3001\u3053\u308c\u3067MeCab\u306e\u95a2\u6570\u3092\u4f7f\u3046\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\u6b21\u306f\u672c\u4f53\u3092\u66f8\u304f\u3060\u3051\u3067\u3059\u3002\n\n```d:test.d\nimport mecab;\nimport std.stdio : writefln;\nimport std.string : toStringz;\nimport std.conv : to;\n\nvoid main(string[] argv) {\n\tauto input = argv.length > 1 ? argv[1] : \"\u592a\u90ce\u306f\u6b21\u90ce\u304c\u6301\u3063\u3066\u3044\u308b\u672c\u3092\u82b1\u5b50\u306b\u6e21\u3057\u305f\u3002\";\n\t\n\tauto mecab = mecab_new2(\"\");\n\tscope(exit) mecab_destroy(mecab);\n\t\n\tauto node = mecab_sparse_tonode(mecab, input.toStringz);\n\tfor(; node; node = node.next) {\n\t\tif (node.stat == MECAB_NOR_NODE || node.stat == MECAB_UNK_NODE) {\n\t\t\twritefln(\"%s\\t%s\", node.surface[0 .. node.length].to!string, node.feature.to!string);\n\t\t}\n\t}\n\tauto dic = mecab_dictionary_info(mecab);\n\t\n\twritefln(\"filename: %s\\ncharset: %s\\nsize: %s\\ntype: %s\\n\",\n\t\t\t dic.filename.to!string,\n\t\t\t dic.charset.to!string,\n\t\t\t dic.size,\n\t\t\t dic.type);\n}\n```\n\n\u65e2\u306b\u304a\u6c17\u4ed8\u304d\u306e\u65b9\u3082\u591a\u3044\u3067\u3057\u3087\u3046\u304c\u3001\u4eca\u307e\u3067\u306e\u30b3\u30fc\u30c9\u306f\u4e0a\u8a18\u306eMeCab\u306e\u30bd\u30fc\u30b9\u306b\u5165\u3063\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u304b\u3089\u4e00\u90e8\u629c\u304d\u51fa\u3057\u3066\u3001D\u98a8\u306b\u66f8\u304d\u306a\u304a\u3057\u305f\u3060\u3051\u3067\u3059\u3002\n\u898b\u3066\u306e\u901a\u308a\u3001`mecab_node_t`\u306e\u30e1\u30f3\u30d0\u5909\u6570\u3067\u3042\u308b`surface`\u3060\u3068\u304b`length`\u3060\u3068\u304b`feature`\u3060\u3068\u304b\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002`surface`\u306f\u5f62\u614b\u7d20\u306e\u6587\u5b57\u5217\u306e\u30dd\u30a4\u30f3\u30bf\u3067\u3001`length`\u304c\u305d\u306e\u9577\u3055\u3067\u3059\u3002`feature`\u306b\u306f\u5f62\u614b\u7d20\u306e\u60c5\u5831\u304c\u6587\u5b57\u5217\u3068\u3057\u3066\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u306e\u4e0b\u306e`mecab_dictionary_info()`\u306f\u3001\u5229\u7528\u3059\u308b\u8f9e\u66f8\u306e\u60c5\u5831\u3092\u5f97\u308b\u95a2\u6570\u3067\u3059\u3002MeCab\u306e\u8f9e\u66f8\u306f\u3001mecabrc\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3082\u306e\u3092\u4f7f\u3046\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u8aad\u307f\u8fbc\u3093\u3060\u8f9e\u66f8\u306e\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3057\u3066\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\u3053\u308c\u3092\u52d5\u304b\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\n$ ./test \"D \u306f C\u8a00\u8a9e\u98a8\u306e\u69cb\u6587\u3092\u6301\u3064\u9759\u7684\u578b\u4ed8\u3051\u8a00\u8a9e\u3067\u3059\u3002\"\nD\t\u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u7d44\u7e54,*,*,*,*\n\u306f\t\u52a9\u8a5e,\u4fc2\u52a9\u8a5e,*,*,*,*,\u306f,\u30cf,\u30ef\nC\t\u540d\u8a5e,\u56fa\u6709\u540d\u8a5e,\u7d44\u7e54,*,*,*,*\n\u8a00\u8a9e\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u8a00\u8a9e,\u30b2\u30f3\u30b4,\u30b2\u30f3\u30b4\n\u98a8\t\u540d\u8a5e,\u63a5\u5c3e,\u4e00\u822c,*,*,*,\u98a8,\u30d5\u30a6,\u30d5\u30fc\n\u306e\t\u52a9\u8a5e,\u9023\u4f53\u5316,*,*,*,*,\u306e,\u30ce,\u30ce\n\u69cb\u6587\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u69cb\u6587,\u30b3\u30a6\u30d6\u30f3,\u30b3\u30fc\u30d6\u30f3\n\u3092\t\u52a9\u8a5e,\u683c\u52a9\u8a5e,\u4e00\u822c,*,*,*,\u3092,\u30f2,\u30f2\n\u6301\u3064\t\u52d5\u8a5e,\u81ea\u7acb,*,*,\u4e94\u6bb5\u30fb\u30bf\u884c,\u57fa\u672c\u5f62,\u6301\u3064,\u30e2\u30c4,\u30e2\u30c4\n\u9759\u7684\t\u540d\u8a5e,\u5f62\u5bb9\u52d5\u8a5e\u8a9e\u5e79,*,*,*,*,\u9759\u7684,\u30bb\u30a4\u30c6\u30ad,\u30bb\u30a4\u30c6\u30ad\n\u578b\u4ed8\u3051\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u578b\u4ed8\u3051,\u30ab\u30bf\u30c4\u30b1,\u30ab\u30bf\u30c4\u30b1\n\u8a00\u8a9e\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u8a00\u8a9e,\u30b2\u30f3\u30b4,\u30b2\u30f3\u30b4\n\u3067\u3059\t\u52a9\u52d5\u8a5e,*,*,*,\u7279\u6b8a\u30fb\u30c7\u30b9,\u57fa\u672c\u5f62,\u3067\u3059,\u30c7\u30b9,\u30c7\u30b9\n\u3002\t\u8a18\u53f7,\u53e5\u70b9,*,*,*,*,\u3002,\u3002,\u3002\nfilename: /var/lib/mecab/dic/debian/sys.dic\ncharset: UTF-8\nsize: 392126\ntype: 0\n```\n\n`mecab_node_t`\u3092for\u30eb\u30fc\u30d7\u56de\u3057\u3066\u4f7f\u3063\u3066\u3044\u308b\u90e8\u5206\u306f\u3001\u7d50\u679c\u3068\u3057\u3066`mecab_sparse_tostr()`\u95a2\u6570\u3068\u4f3c\u305f\u3088\u3046\u306a\u51fa\u529b\u3092\u3057\u3066\u3044\u307e\u3059\u306d\u3002\u305d\u306e\u4e0b\u306f\u3001\u8f9e\u66f8\u306b\u95a2\u3059\u308b\u60c5\u5831\u3067\u3059\u3002\n\u89e3\u8aac\u3059\u308b\u3088\u3046\u306a\u4e8b\u306f\u3001\u7279\u306b\u3001\u7121\u3044\u3067\u3059\u3002\n\n#\u3082\u3046\u5c11\u3057\u9ad8\u5ea6\u306a\u4e8b\u3092\u3059\u308b\n\u3055\u3066\u3001\u3053\u308c\u3060\u3051\u3060\u3068`mecab_sparse_tostr()`\u95a2\u6570\u304c\u3084\u3063\u305f\u4e8b\u3092\u81ea\u5206\u3067\u5b9f\u88c5\u3057\u305f\u3060\u3051\u306a\u306e\u3067\u3001`mecab_node_t`\u306e\u60c5\u5831\u3092\u307e\u308b\u3067\u6d3b\u7528\u3067\u304d\u3066\u3044\u307e\u305b\u3093\u306d\u3002\u3053\u308c\u306f\u826f\u304f\u306a\u3044\u3002\n\u306a\u306e\u3067\u3001\u3082\u3046\u5c11\u3057\u3084\u3084\u3053\u3057\u3044\u4e8b\u3092\u3057\u3066\u307f\u305f\u3044\u3067\u3059\u3002\n\n\u3068\u3053\u308d\u3067\u3001\u300c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9eD\u300d\u306f\u3054\u5b58\u77e5\u3067\u3059\u3088\u306d\u3002\u65e5\u672c\u30672\u756a\u76ee\u306b\u51fa\u305fD\u8a00\u8a9e\u306e\u672c\u3067\u3059\uff08\u591a\u5206\uff09\u3002\n\u305d\u3046\u3044\u3048\u3070\u65e5\u672c\u3067\u6700\u521d\u306eD\u8a00\u8a9e\u306e\u672c\u304c\u51fa\u3066\u304b\u308910\u5e74\u7d4c\u3063\u305f\u3089\u3057\u3044\u3067\u3059\u306d\u3002\n\u9591\u8a71\u4f11\u984c\u3002\u305d\u308c\u3067\u3001\u300c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9eD\u300d\u306e\u7b2c1\u7ae0\u306b\u306f\u3001\u300e\u30cf\u30e0\u30ec\u30c3\u30c8\u300f\u3092\u5206\u6790\u3059\u308b\u4f8b\u304c\u51fa\u3066\u3044\u307e\u3059\u3002\n\u305d\u308c\u306b\u3042\u3084\u304b\u3063\u3066\u3001\u65e5\u672c\u306e\u53e4\u5178\u7684\u540d\u5287\u4f5c\u5bb6\u3067\u3042\u308b\u4e16\u963f\u5f25\u306e\u8b21\u66f2\u306e\u5206\u6790\u3092\u2026\u2026\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u6d41\u77f3\u306b\u5ba4\u753a\u6642\u4ee3\u306e\u6587\u7ae0\u3092MeCab\u306b\u8aad\u307e\u305b\u308b\u306e\u306f\u96e3\u3057\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u3001\u5c11\u3057\u6642\u4ee3\u3092\u4e0b\u3063\u3066\u3001\u660e\u6cbb\u306e\u6587\u8c6a\u306e\u6587\u7ae0\u3092MeCab\u3067\u5206\u6790\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n##\u5c0f\u8aac\u306e\u6587\u7ae0\u3092\u5206\u6790\n\u5206\u6790\u3068\u3044\u3063\u3066\u3082\u3001\u5358\u306b\u5c0f\u8aac\u306e\u6587\u7ae0\u3092\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u3067\u306f\u9762\u767d\u304f\u306a\u3044\u3002\u3068\u3044\u3046\u304b\u6050\u3089\u304f\u3001\u9577\u3055\u306b\u3082\u3088\u308a\u307e\u3059\u304c\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u3042\u307e\u308a\u8aad\u3080\u6c17\u306e\u3057\u306a\u3044\u72b6\u614b\u306b\u306a\u308b\u4e8b\u8acb\u3051\u5408\u3044\u3067\u3059\u3002\u6298\u89d2\u30d7\u30ed\u30b0\u30e9\u30e0\u4e2d\u3067\u6587\u7ae0\u3092\u5f62\u614b\u7d20\u306b\u5206\u89e3\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304b\u3089\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u6587\u7ae0\u3068\u3044\u3046\u306e\u306f\u3001\u540d\u8a5e\u3084\u3001\u52d5\u8a5e\u3084\u3001\u5f62\u5bb9\u8a5e\u7b49\u306e\u54c1\u8a5e\u304b\u3089\u6210\u308a\u7acb\u3063\u3066\u3044\u307e\u3059\u3002MeCab\u3067\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u5f62\u614b\u7d20\u304c\u305d\u306e\u3069\u308c\u306b\u5f53\u3066\u306f\u307e\u308b\u306e\u304b\u3001\u63a8\u6e2c\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u6587\u7ae0\u306e\u7279\u8272\u306b\u306f\u3001\u69d8\u3005\u306a\u8981\u7d20\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u306e\u54c1\u8a5e\u306e\u5272\u5408\u304c\u95a2\u308f\u3063\u3066\u304f\u308b\u306e\u306f\u9593\u9055\u3044\u306a\u3044\u3068\u601d\u308f\u308c\u307e\u3059\u3002\u7c21\u7d20\u306a\u6587\u4f53\u3068\u7d62\u721b\u8c6a\u83ef\u306a\u6587\u4f53\u306e\u5bfe\u6bd4\u306f\u3001\u305d\u308c\u3053\u305d\u53e4\u4ee3\u30ed\u30fc\u30de\u6642\u4ee3\u306e\u30ab\u30a8\u30b5\u30eb\u3068\u30ab\u30c8\u30fc\u306e\u6bd4\u8f03\u306b\u898b\u3089\u308c\u308b\u3088\u3046\u306b\u3001\u53e4\u304f\u304b\u3089\u8a00\u308f\u308c\u3066\u3044\u308b\u4e8b\u3067\u3059\u3002\n\u6587\u7ae0\u304b\u3089\u3001\u305d\u308c\u305e\u308c\u306e\u54c1\u8a5e\u304c\u3069\u308c\u3060\u3051\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u304b\u3001\u307e\u305f\u305d\u306e\u6587\u7ae0\u5185\u3067\u306e\u5272\u5408\u306f\u3069\u306e\u7a0b\u5ea6\u306a\u306e\u304b\u3092\u8a08\u7b97\u3059\u308b\u4e8b\u304c\u3067\u304d\u308c\u3070\u3001\u3069\u3046\u3044\u3046\u6587\u4f53\u304c\u826f\u3044\u6587\u4f53\u3067\u3069\u3046\u3044\u3046\u6587\u4f53\u304c\u60aa\u3044\u6587\u4f53\u306a\u306e\u304b\u3092\u6a5f\u68b0\u7684\u306b\u8a08\u7b97\u3059\u308b\u4e00\u52a9\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u305f\u3060\u3042\u3093\u307e\u308a\u3084\u3084\u3053\u3057\u3044\u3082\u306e\u3092\u4f5c\u3063\u3066\u3082\u30a2\u30ec\u3067\u3059\u306e\u3067\u3001\u8abf\u3079\u308b\u306e\u306f\u300c\u540d\u8a5e\u3001\u5f62\u5bb9\u8a5e\u3001\u52d5\u8a5e\u3001\u526f\u8a5e\u3001\u63a5\u7d9a\u8a5e\u300d\u306e5\u3064\u3060\u3051\u306b\u9650\u5b9a\u3057\u3066\u3001\u305d\u308c\u3089\u306e\u4e2d\u306b\u3042\u308b\u7d30\u304b\u3044\u9055\u3044\uff08\u81ea\u7acb\u8a9e\u304b\u63a5\u5c3e\u8a9e\u304b\u3001\u4e00\u822c\u540d\u8a5e\u304b\u56fa\u6709\u540d\u8a5e\u304b\u3001\u7b49\uff09\u306f\u7121\u8996\u3059\u308b\u4e8b\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u3068\u3001\u5352\u8ad6\u3067\u300c\u3046\u30fc\u3093\u3001\u3053\u306e\u7814\u7a76\u5206\u91ce\u3084\u30c6\u30fc\u30de\u81ea\u4f53\u306f\u60aa\u304f\u306a\u3044\u3068\u601d\u3046\u3093\u3060\u3051\u3069\u3001\u7814\u7a76\u3057\u3066\u307f\u305f\u7d50\u679c\u5206\u304b\u3063\u305f\u4e8b\u304c\u4eca\u5f8c\u5f79\u7acb\u3064\u304b\u3063\u3066\u8a00\u308f\u308c\u305f\u3089\u5fae\u5999\u3060\u3088\u306d\u30fc\u3002\u3066\u3044\u3046\u304b\u6b74\u53f2\u7814\u7a76\u306b\u610f\u7fa9\u3068\u304b\u6c42\u3081\u308b\u306a\u3088\u306a\u3041\u300d\u306a\u3093\u3066\u601d\u3063\u3066\u308b\u5927\u5b66\u751f\u304c\u524d\u6587\u306b\u66f8\u304f\u3088\u3046\u306a\u8a00\u3044\u8a33\u3092\u8ff0\u3079\u305f\u6240\u3067\u3001\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u304b\u3002\n\n##pos-id\n\u5f62\u614b\u7d20\u306e\u60c5\u5831\u306f\u3001\u4e0a\u3067\u66f8\u3044\u305f\u3088\u3046\u306b`mecab_node_t`\u69cb\u9020\u4f53\u306e`feature`\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u304c\u3001\u3053\u308c\u306f\u6587\u5b57\u5217\uff08CSV\u5f62\u5f0f\u306b\u5247\u3063\u3066\u3044\u308b\u305d\u3046\u3067\u3059\uff09\u306a\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u6271\u3044\u96e3\u3044\u3002\u3088\u3063\u3066\u3001pos-id \u3068\u3044\u3046\u3082\u306e\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002pos-id \u3068\u3044\u3046\u306e\u306f\u3001\u4e0a\u8a18\u306e\u5f62\u614b\u7d20\u306e\u60c5\u5831\u3092\u5206\u985e\u3057\u3066\u756a\u53f7\u4ed8\u3051\u3057\u305f\u3082\u306e\u304c\u3042\u3063\u3066\uff08\u540d\u8a5e\u304b\u3064\u4e00\u822c\u540d\u8a5e\u306a\u308938\u3001\u3068\u304b\uff09\u3001\u305d\u306e\u81ea\u5206\u306b\u5f53\u3066\u306f\u307e\u308b\u756a\u53f7\u3092\u683c\u7d0d\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\u3069\u3046\u3044\u3046\u57fa\u6e96\u3067\u756a\u53f7\u4ed8\u3051\u304c\u884c\u308f\u308c\u308b\u304b\u306f\u3001\u8f9e\u66f8\u30c7\u30fc\u30bf\u306e\u4e2d\u306e pos-id.def \u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3053\u308c\u3092\u66f8\u304d\u63db\u3048\u308c\u3070\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u57fa\u6e96\u3067\u756a\u53f7\u4ed8\u3051\u3092\u3059\u308b\u4e8b\u3082\u3067\u304d\u307e\u3059\u3002\u8a73\u3057\u304f\u306fMeCab\u306e\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u898b\u3066\u4e0b\u3055\u3044\u3002\n\u4eca\u56de\u306f\u6700\u521d\u304b\u3089\u5165\u3063\u3066\u3044\u308b pos-id.def \u306e\u5206\u985e\u756a\u53f7\u4ed8\u3051\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3057\u307e\u3057\u3087\u3046\u3002\u6c7a\u3057\u3066\u3001\u518d\u5ea6\u8f9e\u66f8\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n##\u30b3\u30fc\u30c9\n\n```d:anly.d\nimport mecab;\nimport std.stdio;\n\nvoid analysis(mecab_t* mecab, string filename) {\n\tFile file;\n\ttry {\n\t\tfile = File(filename, \"r\");\n\t} catch {\n\t\treturn;\n\t}\n\tuint[string] info = [\"\u540d\u8a5e\":0, \"\u52d5\u8a5e\":0, \"\u5f62\u5bb9\u8a5e\":0, \"\u526f\u8a5e\":0, \"\u63a5\u7d9a\u8a5e\":0];\n\tuint count;\n\tconst(mecab_node_t)* node;\n\n\tforeach(line; file.byLine) {\n\t\tnode = mecab_sparse_tonode2(mecab, line.ptr, line.length);\n\t\tfor(; node; node = node.next) {\n\t\t\tif (node.stat != MECAB_NOR_NODE && node.stat != MECAB_UNK_NODE) continue;\n\t\t\t++count;\n\t\t\tswitch(node.posid) {\n\t\t\t\tcase 10: .. case 12:\n\t\t\t\t\t++info[\"\u5f62\u5bb9\u8a5e\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 26:\n\t\t\t\t\t++info[\"\u63a5\u7d9a\u8a5e\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 31: .. case 33:\n\t\t\t\t\t++info[\"\u52d5\u8a5e\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 34: case 35:\n\t\t\t\t\t++info[\"\u526f\u8a5e\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 36: .. case 47:\n\t\t\t\t\t++info[\"\u540d\u8a5e\"];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tprintResult(filename, info, count);\n}\n\nvoid printResult(string filename, uint[string] info, uint i) {\n\timport std.algorithm, std.conv;\n\n\twriteln(\"filename: \", filename);\n\twriteln(\" * * *\");\n\n\twritefln(\"\u5358\u8a9e\u6570:\\t%s\", i);\n\tauto words = info.keys.sort!((a, b) => info[a] > info[b]);\n\tauto count = i.to!double;\n\tforeach(ref k; words)\n\t\twritefln(\"%s:\\t%s\\t%.3f%%\", k, info[k], (info[k]/count)*100);\n\n\twriteln(\"\");\n}\n\nvoid main(string[] args) {\n\tif(args.length == 1) return;\n\t\n\tauto mecab = mecab_new2(\"\");\n\tscope(exit) mecab_destroy(mecab);\n\t\n\tforeach(text; args[1..$])\n\t\tanalysis(mecab, text);\n}\n```\n\n##\u89e3\u8aac\nswitch\u6587\u3067\u7bc4\u56f2\u6307\u5b9a\u3067\u304d\u308b\u306e\u306fD\u306e\u826f\u3044\u3068\u3053\u308d\u3060\u3068\u601d\u3044\u307e\u3059\u3002\npos-id.def \u3092\u898b\u308c\u3070\u308f\u304b\u308b\u306e\u3067\u3059\u304c\u300148\u756a\u304b\u308967\u756a\u307e\u3067\u3082\u540d\u8a5e\u306b\u5206\u985e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u304c\u3001\u300c\u63a5\u5c3e\u8a9e\u3084\u4ee3\u540d\u8a5e\u306f\u3061\u3087\u3063\u3068\u9055\u3046\u304f\u306a\u3044\u304b\uff1f\u300d\u3068\u601d\u3063\u305f\u306e\u3067\u300147\u756a\u307e\u3067\u3092\u300c\u540d\u8a5e\u300d\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u4f55\u304b\u5b66\u8853\u7684\u306a\u6839\u62e0\u304c\u3042\u3063\u3066\u3053\u308c\u3089\u3092\u9664\u3044\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u3002\n`mecab_sparse_tonode()`\u3067\u306f\u306a\u304f`mecab_sparse_tonode2()`\u306a\u308b\u95a2\u6570\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u6587\u5b57\u5217\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u9577\u3055\u3092\u4e00\u7dd2\u306b\u53d7\u3051\u53d6\u308b\u95a2\u6570\u3067\u3059\u3002`byLine()`\u3067\u5206\u5272\u3057\u305f\u3089null\u30bf\u30fc\u30df\u30cd\u30fc\u30bf\u30fc\u4ed8\u304b\u306a\u3044\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\u3000\u3068\u601d\u3063\u305f\u306e\u3067\u3053\u3061\u3089\u3092\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001`byLine()`\u306e\u5b9a\u7fa9\u3092\u3057\u3063\u304b\u308a\u898b\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u78ba\u8a3c\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u66f8\u3044\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u52ff\u8ad6`mecab.di`\u306e\u65b9\u306b\u3082\u5b9a\u7fa9\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n\n##\u4f7f\u3063\u3066\u307f\u308b\n\u3055\u3066\u3001\u5206\u6790\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u4eca\u56de\u5206\u6790\u5bfe\u8c61\u3068\u3059\u308b\u4f5c\u5bb6\u306f\u4ee5\u4e0b\u306e4\u4eba\u3067\u3001\u53f3\u304c\u5bfe\u8c61\u306e\u5c0f\u8aac\u3067\u3059\u3002\n\n * \u590f\u76ee\u6f31\u77f3 : \u5922\u5341\u591c\n * \u6cc9\u93e1\u82b1 : \u591c\u884c\u5de1\u67fb\n * \u68ee\u9d0e\u5916 : \u5bd2\u5c71\u62fe\u5f97\n * \u82a5\u5ddd\u9f8d\u4e4b\u4ecb : \u7f85\u751f\u9580\n\n\u5168\u3066\u9752\u7a7a\u6587\u5eab\u304b\u3089\u5165\u624b\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u5229\u7528\u3055\u305b\u3066\u9802\u3044\u305f\u30c6\u30ad\u30b9\u30c8\u3082\u9752\u7a7a\u6587\u5eab\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3082\u306e\u3067\u3059\u304c\u3001\u9752\u7a7a\u6587\u5eab\u306e\u30c6\u30ad\u30b9\u30c8\u3060\u3068\u3001\u8868\u793a\u3067\u304d\u306a\u3044\u6587\u5b57\u3092\u203b\u3067\u4ee3\u7528\u3057\u3066\u3044\u307e\u3059\uff08\u305d\u306e\u5f8c\u308d\u306b\u6587\u5b57\u306e\u8aac\u660e\u304c\u7d9a\u304d\u307e\u3059\uff09\u3002\u4eca\u56de\u306e\u5206\u6790\u3067\u306f\u3001\u305d\u308c\u3089\u306e\u6587\u5b57\u306f\u5358\u7d14\u306b\u6587\u7ae0\u304b\u3089\u53d6\u308a\u9664\u304d\u307e\u3057\u305f\uff08\u5f62\u614b\u7d20\u89e3\u6790\u306b\u5f71\u97ff\u304c\u51fa\u305d\u3046\u3067\u3059\u304c\u3001\u8003\u3048\u306a\u3044\u4e8b\u306b\u3057\u307e\u3059\uff09\u3002\n\n##\u5165\u51fa\u529b\n\n```bash\n$ dmd anly.d -L-lmecab\n$ ./anly \"akutagawa.txt\" \"ogai.txt\" \"soseki.txt\" \"kyoka.txt\"\nfilename: akutagawa.txt\n * * *\n\u5358\u8a9e\u6570:\t3884\n\u540d\u8a5e:\t648\t16.684%\n\u52d5\u8a5e:\t533\t13.723%\n\u526f\u8a5e:\t87\t2.240%\n\u5f62\u5bb9\u8a5e:\t65\t1.674%\n\u63a5\u7d9a\u8a5e:\t54\t1.390%\n\nfilename: ogai.txt\n * * *\n\u5358\u8a9e\u6570:\t4123\n\u540d\u8a5e:\t736\t17.851%\n\u52d5\u8a5e:\t653\t15.838%\n\u526f\u8a5e:\t81\t1.965%\n\u5f62\u5bb9\u8a5e:\t40\t0.970%\n\u63a5\u7d9a\u8a5e:\t28\t0.679%\n\nfilename: soseki.txt\n * * *\n\u5358\u8a9e\u6570:\t10796\n\u540d\u8a5e:\t1967\t18.220%\n\u52d5\u8a5e:\t1718\t15.913%\n\u526f\u8a5e:\t297\t2.751%\n\u5f62\u5bb9\u8a5e:\t255\t2.362%\n\u63a5\u7d9a\u8a5e:\t132\t1.223%\n\nfilename: kyoka.txt\n * * *\n\u5358\u8a9e\u6570:\t6815\n\u540d\u8a5e:\t1144\t16.787%\n\u52d5\u8a5e:\t956\t14.028%\n\u526f\u8a5e:\t278\t4.079%\n\u5f62\u5bb9\u8a5e:\t131\t1.922%\n\u63a5\u7d9a\u8a5e:\t41\t0.602%\n```\n\n\u3055\u3041\u4e0a\u624b\u304f\u51fa\u529b\u3067\u304d\u307e\u3057\u305f\u3001\u304c\u2026\u2026\u3002\n\u3053\u306e\u7d50\u679c\u306f\u679c\u305f\u3057\u3066\u5408\u3063\u3066\u3044\u308b\u306e\u304b\u3002\u78ba\u304b\u3081\u308b\u624b\u6bb5\u304c\u7121\u3044\u3067\u3059\u306d\u3002\n\u691c\u7b97\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u3044\u3066\u307f\u3088\u3046\u306b\u3082\u3001\u79c1\u306eC\u3084C++\u306e\u8155\u524d\u3067\u306f\u305d\u3063\u3061\u3067\u30df\u30b9\u308b\u53ef\u80fd\u6027\u306e\u65b9\u304c\u9ad8\u3044\u3067\u3059\u3002\n\u307e\u3041\u305d\u308c\u3063\u307d\u3044\u611f\u3058\u306e\u7d50\u679c\u306a\u306e\u3067\u5408\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u524d\u63d0\u3067\u9032\u3081\u307e\u3057\u3087\u3046\u304b\u3002\n\n##\u7d50\u679c\u3092\u898b\u308b\nvalue \u3067\u30bd\u30fc\u30c8\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u5168\u90e8\u9806\u5e8f\u306f\u540c\u3058\u3067\u3059\u306d\u3002\u3053\u308c\u3089\u306e\u54c1\u8a5e\u306e\u983b\u5ea6\u306f\u5927\u4f53\u3069\u306e\u6587\u7ae0\u3067\u3082\u4f3c\u901a\u3063\u305f\u3082\u306e\u306b\u306a\u308b\u3001\u3068\u3044\u3046\u4e8b\u306a\u306e\u304b\u3002\n\u7d30\u304b\u3044\u5dee\u7570\u306f\u8272\u3005\u3068\u3042\u308a\u307e\u3059\u304c\u2026\u2026\u4f55\u304b\u305d\u306e\u3001\u300c\u3053\u308c\u304c\u50be\u5411\u3060\u300d\u307f\u305f\u304f\u8a00\u3048\u308b\u7a0b\u306e\u9055\u3044\u304c\u898b\u3066\u53d6\u308c\u306a\u3044\u306e\u304c\u8f9b\u3044\u3067\u3059\u3002\n\u3082\u3063\u3068\u30b5\u30f3\u30d7\u30eb\u6570\u5897\u3084\u3057\u3066\u4f55\u3089\u304b\u306e\u7d71\u8a08\u7684\u306a\u8a08\u7b97\u3067\u3082\u3059\u308c\u3070\u3001\u4f55\u304b\u3057\u3089\u6709\u610f\u306a\u7d50\u679c\u3092\u5c0e\u304d\u51fa\u305b\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u306a\u3093\u3068\u3044\u3046\u304b\u3001\u3050\u3060\u3050\u3060\u306a\u7d50\u679c\u3067\u3059\u306d\u3002\n**\u3054\u3081\u3093\u306a\u3055\u3044**\n\n#\u305d\u306e\u4ed6\u306e\u5fdc\u7528\n\u4eca\u56de\u306e\u4f8b\u306f\u3068\u3066\u3082\u8ca7\u5f31\u306a\u3082\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u306f\u5168\u3066\u79c1\u500b\u4eba\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u80fd\u529b\u306b\u4f9d\u308b\u3082\u306e\u3067\u3001MeCab\u3084\u3001D\u8a00\u8a9e\u306e\u6027\u80fd\u3068\u306f\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u3002\n\u3080\u3057\u308dMeCab\u3001D\u8a00\u8a9e\u306e\u6027\u80fd\u3092\u3061\u3083\u3093\u3068\u5f15\u304d\u51fa\u305b\u3070\u3001\u3082\u3063\u3068\u8907\u96d1\u306a\u4e8b\u3092\u3082\u3063\u3068\u5bb9\u6613\u304f\u3001\u305d\u3057\u3066\u9ad8\u901f\u306b\u884c\u3048\u308b\u3067\u3057\u3087\u3046\u3002\n\n#\u7d42\u308f\u308a\u306b\n\u3055\u3066D\u8a00\u8a9e\u304b\u3089MeCab\u3092\u4f7f\u3046\u3001\u3069\u3046\u3060\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\n\u6050\u3089\u304fD\u8a00\u8a9e\u304b\u3089C\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u306a\u3093\u3066\u3044\u3046\u306e\u306f\u3001D\u8a00\u8a9eer\u306e\u9593\u3067\u306f\u7a7a\u6c17\u306e\u3088\u3046\u306b\u5f53\u305f\u308a\u524d\u306e\u4e8b\u306e\u3088\u3046\u306a\u306e\u3067\u3001\u6562\u3048\u3066\u3053\u3046\u3044\u3046\u4e8b\u3092\u66f8\u304f\u4eba\u306f\u3042\u3093\u307e\u308a\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\uff08\u79c1\u306b\u3068\u3063\u3066\u306f\u5927\u5909\u306a\u4e8b\u3067\u3057\u305f\uff09\u3002\n\u3067\u3082C++\u3092\u4f7f\u3046\u306a\u3089\u3069\u3046\u3060\u308d\u3046\uff1f\u3000\u3068\u601d\u3063\u3066\u3053\u306e\u6295\u7a3f\u3092\u66f8\u3053\u3046\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3082\u305d\u3082C++\u306eAPI\u3092D\u304b\u3089\u4f7f\u3046\u306e\u306b\u5931\u6557\u3059\u308b\u3068\u3044\u3046\u2026\u2026\u3002\n\u3057\u304b\u3082\u5fd7\u3092\u5c48\u3057\u305f\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u5b8c\u5168\u306b\u306f\u4f7f\u3044\u3053\u306a\u305b\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u3002\n\u4ee5\u4e0b\u3001\u305d\u308c\u306b\u89e3\u3059\u308b\u89e3\u8aac\u3067\u3059\u3002\n\n#\u8ab2\u984c\nMeCab\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u898b\u305f\u65b9\u3067\u3042\u308c\u3070\u3001`mecab_dictionary_info_t`\u3092\u8abf\u3079\u308b\u90e8\u5206\u304c\u5c11\u3057\u9055\u3046\u306a\u3001\u3068\u304a\u6c17\u4ed8\u304d\u306b\u306a\u3063\u305f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n```c:libmecab.html\nconst mecab_dictionary_info_t *d = mecab_dictionary_info(mecab);\nfor (; d; d = d->next) {\n\tprintf(\"filename: %s\\n\", d->filename);\n\tprintf(\"charset: %s\\n\", d->charset);\n\tprintf(\"size: %d\\n\", d->size);\n\tprintf(\"type: %d\\n\", d->type);\n\tprintf(\"lsize: %d\\n\", d->lsize);\n\tprintf(\"rsize: %d\\n\", d->rsize);\n\tprintf(\"version: %d\\n\", d->version);\n}\n```\n\n\u30b5\u30f3\u30d7\u30eb\u306b\u8f09\u3063\u3066\u308b\u30b3\u30fc\u30c9\u3067\u306f\u3001for\u30eb\u30fc\u30d7\u3092\u4f7f\u3063\u3066\u30ea\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u308b`mecab_dictionary_info_t`\u69cb\u9020\u4f53\u3092\u5168\u3066\u8fbf\u3063\u3066\u3044\u307e\u3059\u306d\u3002\u4eca\u56de\u79c1\u304c\u4f7f\u7528\u3057\u305f\u74b0\u5883\u3067\u306f\u3001\u8f9e\u66f8\u306f1\u3064\u3057\u304b\u306a\u3044\u306e\u3067\u3001`next`\u306e\u5148\u306b\u306fnull\u304c\u5165\u3063\u3066\u3044\u308b\u2026\u2026\u3068\u79c1\u306f\u601d\u3063\u305f\u306e\u3067\u3059\u3002\u5b9f\u969b\u3001C\u306e\u30b3\u30fc\u30c9\u3084C++\u306e\u30b3\u30fc\u30c9\u306f\u305d\u3046\u3044\u3046\u69cb\u9020\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\n\n\u3057\u304b\u3057\u3001D\u304b\u3089`mecab_dictionary_info()`\u95a2\u6570\u3092\u4f7f\u3063\u3066`mecab_dictionary_info_t`\u69cb\u9020\u4f53\u3092\u4f5c\u308b\u3068\u3001\u4f55\u6545\u304b`next`\u304cnull\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002null\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u4f55\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u304b\u304c\u308f\u304b\u3089\u306a\u3044\u2026\u2026\u3002\n\n```d\nimport mecab;\nimport std.stdio;\nimport std.conv : to;\n\nvoid main()\n{\n\tauto mecab = mecab_new2(\"\");\n\tscope(exit) mecab_destroy(mecab);\n\t\n\tauto dic = mecab_dictionary_info(mecab);\n\t\n\tif(dic) writeln(\"dic\u306f\u3042\u308b\u3002\");\n\twriteln(dic.filename.to!string);\n\t\n\tdic = dic.next;\n\tif(dic) writeln(\"dic\u306f\u307e\u3060\u3042\u308b\u3002\");\n\twriteln(dic.filename.to!string); // \u3053\u3053\u3067Segmentation fault\n}\n```\n\n```bash\n$ ./mtf3\ndic\u306f\u3042\u308b\u3002\n/var/lib/mecab/dic/debian/sys.dic\ndic\u306f\u307e\u3060\u3042\u308b\u3002\nSegmentation fault\n```\n\n\u3055\u3066\u3001`dic.next`\u306b\u306f\u4f55\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u304b\u3002\n`const(mecab_dictionary_info_t)*`\u578b\u306a\u306e\u306f\u78ba\u5b9f\u306a\u306e\u3067\u3059\u304c\u2026\u2026\u3002\n\u7d50\u5c40\u308f\u304b\u3089\u305a\u4ed5\u821e\u3044\u3067\u3057\u305f\u3002\n\u529b\u4e0d\u8db3\u3067\u3054\u3081\u3093\u306a\u3055\u3044\u3002\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n\uff0812\u670824\u65e5\u8ffd\u8a18\uff09\n**\u6559\u3048\u3066\u9802\u304d\u307e\u3057\u305f\uff01**\n\u4ee5\u4e0b\u306b\u3001\u305d\u306e\u4fee\u6b63\u3068\u89e3\u8aac\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n#\u554f\u984c\u89e3\u6c7a\n\u30b3\u30e1\u30f3\u30c8\u3067\u8272\u3005\u3068\u6559\u3048\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001\u8a18\u4e8b\u306e\u8a02\u6b63\u3092\u4ee5\u4e0b\u306b\u8a18\u3057\u307e\u3059\u3002\n\n##D\u304b\u3089C++\u306e\u30af\u30e9\u30b9\u3092\u547c\u3076\n`Tagger`\u306e\u30e1\u30f3\u30d0\u95a2\u6570\u306b`bool parse(Lattice)`\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u306a\u304b\u3063\u305f\u306e\u304c\u307e\u305a\u304b\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001\u3053\u306e\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u305f\u3060\u3057\u5f15\u6570\u304c`Lattice`\u30af\u30e9\u30b9\u306a\u306e\u3067\u3001\u5148\u306b\u3053\u306e\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\u3088\u3063\u3066\u3001\n\n```D\nextern(C++, MeCab)\n{\n\tinterface Lattice\n\t{\n\t}\n\t\n\tinterface Tagger\n\t{\n\t\tbool parse(Lattice);\n\t\tconst(char)* parse(const(char)*);\n\t}\n\t\n\tTagger createTagger(const(char)*);\n}\n```\n\n\u3068\u3059\u308c\u3070\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\u2026\u2026\u3088\u3046\u3067\u3059\u3001\u3068\u66d6\u6627\u306a\u66f8\u304d\u65b9\u3092\u3057\u3066\u3044\u308b\u306e\u306f\u3001\u79c1\u304c\u672a\u3060\u306b\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u4e2d\u3067\u305d\u308c\u305e\u308c\u306e\u547c\u3073\u51fa\u3057\u304c\u3069\u3053\u306e\u5b9a\u7fa9\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u304b\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u304b\u3089\u3067\u3059\u3002\n\n\u3068\u3082\u304b\u304f\u3001D\u304b\u3089C++\u3092\u547c\u3073\u51fa\u3059\u4e8b\u306f\u3061\u3083\u3093\u3068\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u7d20\u6674\u3089\u3057\u3044\u3067\u3059\u3002\n\u4ed6\u306b`MeCab::Node`\u7b49\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u3051\u3070\u3001\u4eca\u56de\u5b9f\u884c\u3057\u305f\u4f8b\u3092C++\u306e\u547c\u3073\u51fa\u3057\u3067\u5b9f\u884c\u3059\u308b\u4e8b\u3082\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n##\u8ab2\u984c\u306e\u89e3\u6c7a\n\u6700\u5f8c\u306e\u8ab2\u984c\u3067\u3059\u304c\u2026\u2026\u3053\u308c\u306f\u5b8c\u74a7\u306b\u611a\u304b\u306a\u79c1\u306b\u539f\u56e0\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\nMeCab\u306e`mecab_dictionary_info_t`\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```c\nstruct mecab_dictionary_info_t {\n  const char                     *filename;\n  const char                     *charset;\n  unsigned int                    size;\n  int                             type;\n  unsigned int                    lsize;\n  unsigned int                    rsize;\n  unsigned short                  version;\n  struct mecab_dictionary_info_t *next;\n};\n```\n\n\u3053\u308c\u3092\u79c1\u306f\u3001\u6b21\u306e\u3088\u3046\u306bD\u306b\u7ffb\u8a33\u3057\u307e\u3057\u305f\u3002\n\n```d\nstruct mecab_dictionary_info_t {\n\tconst(char)* filename;\n\tconst(char)* charset;\n\tuint size;\n\tint type;\n\tuint lsize;\n\tuint rsize;\n\tmecab_dictionary_info_t *next;\n}\n```\n\n\u304a\u3084\u3041\uff1f\u3000\u4f55\u304b\u8db3\u308a\u307e\u305b\u3093\u306a\u3002\n\u306f\u3044\u3001\u305d\u3046\u3067\u3059\u3002`version`\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u7701\u3044\u3066\u3044\u307e\u3057\u305f\u3002\n\u300c\u3042\u308c\u3001version\u3063\u3066D\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3058\u3083\u3093\u3002\u56f0\u3063\u305f\u306a\u2026\u2026\u307e\u3041\u5b9a\u7fa9\u7121\u3057\u3067\u3082\u53c2\u7167\u3057\u306a\u3051\u308a\u3083\u3044\u3044\u304b\u300d\n**\u3044\u3044\u308f\u304d\u3083\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f**\nC\u3067\u3082D\u3067\u3082\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4e0a\u304b\u3089\u9806\u756a\u306b\u4e26\u3079\u3066\u3044\u304f\u306e\u304c\u69cb\u9020\u4f53\u306e\u4f5c\u6cd5\u3067\u3059\u3082\u306e\u306d\u3002\n\u3061\u3083\u3093\u3068\u30ad\u30fc\u30ef\u30fc\u30c9\u3068\u540c\u540d\u306e\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3057\u305f\u3002[\u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u3070\u3063\u3061\u308a\u66f8\u3044\u3066\u3042\u308a\u307e\u3057\u305f](http://dlang.org/dstyle.html)\u3002\nhtod\u4f7f\u3063\u3066\u304a\u3051\u3070\u3053\u3093\u306a\u4e8b\u306b\u306f\u2026\u2026\u3002\n\u5f01\u89e3\u306e\u4f59\u5730\u306e\u7121\u3044\u30ec\u30d9\u30eb\u306e\u5927\u30dd\u30ab\u3067\u3059\u3002\u672c\u5f53\u306b\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001D\u306b\u3082MeCab\u306b\u3082\u4e00\u5207\u306e\u7455\u75b5\u304c\u7121\u304b\u3063\u305f\u4e8b\u304c\u8a3c\u660e\u3055\u308c\u307e\u3057\u305f\u3002\n\n##\u304a\u307e\u3051\u3000dic\u306e\u6b63\u4f53\n\u3082\u3046\u3053\u3053\u307e\u3067\u8aad\u3093\u3067\u3044\u305f\u3060\u3051\u308c\u3070\u660e\u3089\u304b\u306a\u4e8b\u3067\u3059\u304c\u3001\n\n```d\nvoid main()\n{\n\tauto mecab = mecab_new2(\"\");\n\tscope(exit) mecab_destroy(mecab);\n\t\n\tauto dic = mecab_dictionary_info(mecab);\n\t\n\twriteln(dic.filename.to!string);\n\tdic = dic.next;\n\twriteln(cast(ushort)dic);\n}\n```\n\n```bash\n$ dmd tmf4.d -L-lmecab\n$ ./tmf4\n/var/lib/mecab/dic/debian/sys.dic\n102\n```\n\n**dic.next\u306e\u4e2d\u306b\u3044\u305f\u306e\u306fversion\u3055\u3093\u3067\u3057\u305f**\n\n>\u3055\u3066\u3001`dic.next`\u306b\u306f\u4f55\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u304b\u3002\n>`const(mecab_dictionary_info_t)*`\u578b\u306a\u306e\u306f\u78ba\u5b9f\u306a\u306e\u3067\u3059\u304c\u2026\u2026\u3002\n\n\u3053\u3053\u304b\u3089\u3057\u3066\u9593\u9055\u3063\u3066\u305f\u308f\u3051\u3067\u3059\u306d\u3002\n\u3053\u308c\u306f\u6065\u305a\u304b\u3057\u3044\u3002\n"}