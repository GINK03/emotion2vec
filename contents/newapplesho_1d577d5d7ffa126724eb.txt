{"context": " More than 1 year has passed since last update.Seaside\u3067\u30a2\u30d7\u30ea\u958b\u767a\u3092\u3057\u305f\u3089\u4e16\u306e\u4e2d\u306b\u516c\u958b\u3092\u3057\u307e\u3057\u3087\u3046\u3002\u4eca\u56de\u306fSeaside\u3092\u516c\u958b\u3059\u308b\u969b\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u7d39\u4ecb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\ncss\u3001js\u306b\u3064\u3044\u3066\nSeaside\u3067\u306f\u3001image\u5185\u306bcss\u3001js\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u53c2\u7167\u3059\u308b\u6a5f\u80fd\u3042\u308a\u307e\u3059\u304c\u3001image\u306e\u30b5\u30a4\u30ba\u304c\u5927\u304d\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u3084\u4fee\u6b63\u306e\u5ea6\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304f\u308b\u305f\u3081\u3001image\u5916\u90e8\u306b\u914d\u7f6e\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u5916\u90e8url\u53c2\u7167\u306b\u3059\u308b\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\nSeaside\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u306e\u975e\u8868\u793a\n\u958b\u767a\u6642\u306b\u306f\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u516c\u958b\u3059\u308b\u524d\u306b\u306f\u975e\u8868\u793a\u306b\u3057\u307e\u3059\u3002\u975e\u8868\u793a\u306e\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3059\u3002\nWAAdmin applicationDefaults removeParent: WADevelopmentConfiguration instance.\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u306eCookie\u5316\nSeaside\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3060\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304cURL\u306b\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002URL\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u3092\u57cb\u3081\u8fbc\u3080\u306e\u306f\u5371\u967a\u3067\u3059\u306e\u3067\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u306eCookie\u5316\u306e\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002Seaside\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u3044\u304f\u3064\u304b\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u305d\u308d\u305d\u308d\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Cookie\u3067\u3044\u3044\u3068\u601d\u3046\u3093\u3067\u3059\u3051\u3069\u306d\u30fb\u30fb\u30fb\u3002\n\nSeaside3.0\n| app |\napp := WAAdmin register: MyCounter asApplicationAt:'mycounter'.\napp preferenceAt: #useCookies put: true.\napp cache expiryPolicy configuration at: #cacheTimeout put: 3600. \n\n\n\nSeaside3.1\n| app |\napp := WAAdmin register: MyCounter asApplicationAt:'mycounter'.     \napp preferenceAt: #trackingStrategy put: WACookieOnlySessionTrackingStrategy new.\napp cache expiryPolicy configuration at: #cacheTimeout put: 3600. \n\n\n\nSSL\u306e\u904b\u7528\u306b\u3064\u3044\u3066\nSeaside\u3092SSL\u3067\u904b\u7528\u3059\u308b\u969b\u306b\u306f\u3001Apache\u3084Nginx\u306eSSL\u30d7\u30ed\u30ad\u30b7\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002Smalltalk\u5074\u3067\u3082SSL\u901a\u4fe1\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u5c11\u3057\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5fc3\u914d\u306a\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001SSL\u306e\u904b\u7528\u3067\u6c17\u3092\u3064\u3051\u308b\u3053\u3068\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u306eCookie\u5316\u3057\u305f\u969b\u306bSecure\u5c5e\u6027\u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u3059\u3002SSL\u904b\u7528\u3092\u3057\u3066\u3082\u3001Secure\u5c5e\u6027\u304c\u306a\u3044\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u76d7\u8074\u306e\u6050\u308c\u304c\u3042\u308a\u307e\u3059\u3002\nSecure\u5c5e\u6027\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\n| app |\napp := (WAAdmin register: self asApplicationAt:'app')\n    preferenceAt: #sessionClass put: MSession;\n    yourself.\napp preferenceAt: #trackingStrategy put: WACookieOnlySessionTrackingStrategy new.       \napp preferenceAt: #serverProtocol put: 'https'.\n\nChrome\u306e\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u30c4\u30fc\u30eb > Resources > Cookies > Secure \u3067\u30af\u30c3\u30ad\u30fc\u306eSecure\u5c5e\u6027\u306b\u30c1\u30a7\u30c3\u30af\u304c\u4ed8\u3044\u3066\u3044\u308c\u3070\u3001Secure\u5c5e\u6027\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002HTTP, HTTPS\u306e\u4e21\u65b9\u3067\u52d5\u304f\u3088\u3046\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5834\u5408\u306f\u5c11\u3057\u5de5\u592b\u304c\u3044\u308a\u307e\u3059\u304c\u3001\u6700\u8fd1\u3067\u306f\u5e38\u6642SSL\u904b\u7528\u3082\u4e00\u822c\u7684\u306b\u306a\u308a\u3064\u3064\u3042\u308b\u306e\u3067\u3001\u5e38\u6642SSL\u904b\u7528\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n\n\u30de\u30eb\u30c1\u30a4\u30e1\u30fc\u30b8\u3067\u306e\u904b\u7528\nPharo Smalltalk\u306eVM\u958b\u767a\u306f\u9032\u3093\u3067\u3044\u308b\u305f\u3081\u51e6\u7406\u81ea\u4f53\u306f\u901f\u3044\u306e\u3067\u3059\u304c\u3001\u4e2d\u898f\u6a21\u3001\u5927\u898f\u6a21\u30b5\u30fc\u30d3\u30b9\u306b\u306a\u308b\u3068\uff11\u30a4\u30e1\u30fc\u30b8\u3067\u306e\u904b\u7528\u306f\u5fc3\u914d\u3067\u3059\u3002\u305d\u3053\u3067\u3001\u30dd\u30fc\u30c8\u3092\u5909\u3048\u3066\u8907\u6570\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u3057\u3001\u9ad8\u8ca0\u8377\u306b\u3082\u8010\u3048\u308c\u308b\u904b\u7528\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306bApache\u3068Nginx\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306fSeaside\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5171\u6709\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc\u3067\u904b\u7528\u3059\u308b\u969b\u306b\u306f\u3001\u540c\u3058\u30b5\u30fc\u30d0\u30fc\uff08\u30a2\u30d7\u30ea\uff09\u3067\u51e6\u7406\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002sticky session\u3092\u3059\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\nApache\n<VirtualHost *:80>\n    ProxyPreserveHost On\n    ProxyRequests Off\n    ProxyStatus On\n    ServerName exmaple.com\n    ServerAlias exmaple.com\n    DocumentRoot /home/ec2-user/public_html\n    Header add Set-Cookie \"ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/\" env=BALANCER_ROUTE_CHANGED\n    <Proxy balancer://mycluster>\n      BalancerMember http://localhost:8080 route=first loadfactor=10\n      BalancerMember http://localhost:8081 route=second loadfactor=10\n      ProxySet stickysession=ROUTEID\n    </Proxy>\n    RewriteEngine On\n    # applicationName\u306fSeaside\u306eApplication Name\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\n    RewriteRule ^/(applicationName.*)$ balancer://mycluster/$1 [P,L]\n</VirtualHost>\n\n\nNginx\u306fsticky session\u306e\u6a5f\u80fd\u304c\u6a19\u6e96\u306b\u306a\u3044\u305f\u3081\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nNginx\nupstream app {\n    sticky;\n    server localhost:8080;\n    server localhost:8081;\n}\n\nserver {\n    client_max_body_size 25M;\n    client_body_buffer_size 128k;\n    listen       80;\n    server_name  example.com;\n\n    location / {\n        root   /home/ec2-user/public_html;\n        index  index.html index.htm;\n    }\n\n    # applicationName\u306fSeaside\u306eApplication Name\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\n    location /applecationName {\n        proxy_intercept_errors on;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect   off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_pass_header 'Access-Control-Allow-Origin';\n        proxy_pass http://app;\n    }\n\n}\n\n\n\nELB\u3067\u306e\u904b\u7528\nPharo Smalltalk\u3068Seaside\u3067\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u308b\u4eba\u3082\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306e\u3067\u3001Amazon Web Service\u306eELB(Elastic Load Balancing)\u3092\u7528\u3044\u305f\u904b\u7528\u3082\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30de\u30eb\u30c1\u30a4\u30e1\u30fc\u30b8\u904b\u7528\u3068\u540c\u3058\u3067\u3059\u304c\u3001\u8ca0\u8377\u5206\u6563\u3059\u308b\u969b\u306b\u540c\u3058\u30b5\u30fc\u30d0\u30fc\uff08\u30a2\u30d7\u30ea\u30b5\u30fc\u30d0\u30fc\uff09\u304c\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\nAWS Management Console\u306eEC2 DashBoard\u306eLoad Balancers\u3092\u9078\u629e\u3002Port Configuration\u306eEdit\u3092\u30af\u30ea\u30c3\u30af\u3002\u300cEnable Application Generated Cookie Stickiness\u300d\u3092\u9078\u629e\u3057\u3066\u3001Cookie Name\u3092_s\u3068\u3057\u307e\u3057\u3087\u3046\u3002\u3053\u308c\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eCookie\u3092\u7528\u3044\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u7dad\u6301\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\nGUI\u306a\u3057\u306e\u8d77\u52d5\u65b9\u6cd5\n\u30b5\u30fc\u30d0\u30fc\u3067\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u3068\u3057\u3066Pharo\u3092\u8d77\u52d5\u3059\u308b\u5834\u5408\u3001GUI\u3092\u30aa\u30d5\u3057\u3066\u8d77\u52d5\u3059\u308b\u30b1\u30fc\u30b9\u304c\u591a\u3044\u305f\u3081\u7d39\u4ecb\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u304cLinux\u3067\u516c\u5f0f\u30b5\u30a4\u30c8\u306eVM\uff08 http://pharo.org/download \uff09\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u8d77\u52d5\u30b7\u30a7\u30eb\u5185\u306e-vm-display-X11\u3092-vm-display-null\u306b\u5909\u66f4\u3057\u307e\u3059\uff08\u4ee5\u4e0b\u306f\u5909\u66f4\u5f8c\u306e\u30b7\u30a7\u30eb\uff09\u3002\n\npharo3.0/pharo\n#!/bin/bash\n\n# path\nDIR=`readlink -f $0` #resolve symlink\nROOT=`dirname $DIR` #obtain dir of the resolved path\nLINUX=\"$ROOT/bin\"\nRESOURCES=\"$ROOT/shared\"\nICONS=\"$ROOT/icons\"\n\n# icon (note: gvfs-set-attribute is found in gvfs-bin on Ubuntu\n# systems and it seems to require an absolute filename)\ngvfs-set-attribute \\\n    \"$0\" \\\n    \"metadata::custom-icon\" \\\n    \"file://$ICONS/Pharo.png\" \\\n        2> /dev/null\n\n# zenity is part of GNOME\nimage_count=`ls \"$RESOURCES\"/*.image 2>/dev/null |wc -l`\nif [ \"$1\" == \"\" ]; then \n    if which zenity &>/dev/null && [ \"$image_count\"  -ne 1 ]; then\n        image=`zenity --title 'Select an image' --file-selection --filename \"$RESOURCES/\" --file-filter '*.image' --file-filter '*'`\n    else\n        image=\"$RESOURCES/Pharo3.0.image\"       \n    fi\nelse\n    image=$*\nfi\n\n\n# execute\nexec \"$LINUX/pharo\" \\\n    --plugins \"$LINUX\" \\\n    --encoding utf8 \\\n    -vm-display-null \\\n    $image\n\n\n\u8d77\u52d5\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nPharo3.0\u3088\u308a\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u3082\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305f\u3081\u3001\u8d77\u52d5\u6642\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nPharo3.0\n./pharo3.0/pharo ./Pharo3.0.app/Contents/Resources/Pharo3.0.image --no-quit\n\n\n\n\u307e\u3068\u3081\nSeaside\u306e\u4e00\u822c\u7684\u306a\u516c\u958b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u304d\u307e\u3057\u305f\u3002\u30bb\u30c3\u30b7\u30e7\u30f3\u306eCookie\u5316\u3001SSL\u306e\u65b9\u6cd5\u3001\u30de\u30eb\u30c1\u30a4\u30e1\u30fc\u30b8\u904b\u7528\u306b\u3088\u308b\u8ca0\u8377\u5206\u6563\u3001\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3092\u7528\u3044\u305f\u8ca0\u8377\u5206\u6563\u306a\u3069\u3092\u77e5\u3063\u3066\u3044\u308c\u3070\u3001Seaside\u3092\u4f7f\u3063\u305f\u30b5\u30fc\u30d3\u30b9\u3082\u53ef\u80fd\u306a\u306f\u305a\u3067\u3059\u3002Seaside\u306fSmalltalk\u3089\u3057\u3044Web Framework\u3060\u3068\u601d\u3063\u3066\u304a\u308a\u307e\u3059\u3002\u53ef\u80fd\u306a\u9650\u308aSmalltalk\u3067\u4f5c\u308b\u3092\u5fb9\u5e95\u3057\u305f\u3068\u3053\u308d\u304c\u3001\u500b\u4eba\u7684\u306b\u306f\u6c17\u306b\u5165\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3067\u3082\u3042\u308a\u307e\u3059\u3002\u305f\u3060\u3001Seaside\u81ea\u4f53\u306f\u3069\u3093\u3069\u3093\u5de8\u5927\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306a\u308a\u3064\u3064\u3042\u308a\u307e\u3059\u3057\u3001\u4eca\u6642\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u308b\u969b\u306b\u306f\u5c11\u3057\u7269\u8db3\u308a\u306a\u3055\u3082\u611f\u3058\u308b\u3068\u3053\u308d\u3082\u3042\u3063\u305f\u308a\u3057\u307e\u3059\u3002Smalltalk\u958b\u767a\u8005\u306e\u4e2d\u306b\u306f\u65b0\u3057\u3044Web Framework\u306e\u958b\u767a\u3082\u3057\u3066\u3044\u305f\u308a\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u6ce8\u76ee\u3057\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u53c2\u8003\nHTTPS\u3092\u4f7f\u3063\u3066\u3082Cookie\u306e\u6539\u5909\u306f\u9632\u3052\u306a\u3044\u3053\u3068\u3092\u5b9f\u9a13\u3067\u8a66\u3057\u3066\u307f\u305f - \u5fb3\u4e38\u6d69\u306e\u65e5\u8a18\nhttp://blog.tokumaru.org/2013/09/cookie-manipulation-is-possible-even-on-ssl.html\nSticky Sessions - Elastic Load Balancing \nhttp://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html\n\u7b2c68\u56deSmalltalk\u52c9\u5f37\u4f1a\nhttp://www.smalltalk-users.jp/Home/gao-zhi/dai68kaismalltalkbenkyoukai\nSeaside\u3067\u30a2\u30d7\u30ea\u958b\u767a\u3092\u3057\u305f\u3089\u4e16\u306e\u4e2d\u306b\u516c\u958b\u3092\u3057\u307e\u3057\u3087\u3046\u3002\u4eca\u56de\u306fSeaside\u3092\u516c\u958b\u3059\u308b\u969b\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u7d39\u4ecb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n# css\u3001js\u306b\u3064\u3044\u3066\nSeaside\u3067\u306f\u3001image\u5185\u306bcss\u3001js\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u53c2\u7167\u3059\u308b\u6a5f\u80fd\u3042\u308a\u307e\u3059\u304c\u3001image\u306e\u30b5\u30a4\u30ba\u304c\u5927\u304d\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u3084\u4fee\u6b63\u306e\u5ea6\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304f\u308b\u305f\u3081\u3001image\u5916\u90e8\u306b\u914d\u7f6e\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u5916\u90e8url\u53c2\u7167\u306b\u3059\u308b\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n\n# Seaside\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u306e\u975e\u8868\u793a\n\u958b\u767a\u6642\u306b\u306f\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u3067\u3059\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u516c\u958b\u3059\u308b\u524d\u306b\u306f\u975e\u8868\u793a\u306b\u3057\u307e\u3059\u3002\u975e\u8868\u793a\u306e\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n```smalltalk\nWAAdmin applicationDefaults removeParent: WADevelopmentConfiguration instance.\n```\n\n# \u30bb\u30c3\u30b7\u30e7\u30f3\u306eCookie\u5316\nSeaside\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3060\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304cURL\u306b\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002URL\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u3092\u57cb\u3081\u8fbc\u3080\u306e\u306f\u5371\u967a\u3067\u3059\u306e\u3067\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u306eCookie\u5316\u306e\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002Seaside\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u3044\u304f\u3064\u304b\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n*\u305d\u308d\u305d\u308d\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Cookie\u3067\u3044\u3044\u3068\u601d\u3046\u3093\u3067\u3059\u3051\u3069\u306d\u30fb\u30fb\u30fb\u3002*\n\n```smalltalk:Seaside3.0\n| app |\napp := WAAdmin register: MyCounter asApplicationAt:'mycounter'.\napp preferenceAt: #useCookies put: true.\napp cache expiryPolicy configuration at: #cacheTimeout put: 3600. \n```\n\n```smalltalk:Seaside3.1\n| app |\napp := WAAdmin register: MyCounter asApplicationAt:'mycounter'.\t\t\napp preferenceAt: #trackingStrategy put: WACookieOnlySessionTrackingStrategy new.\napp cache expiryPolicy configuration at: #cacheTimeout put: 3600. \n```\n\n# SSL\u306e\u904b\u7528\u306b\u3064\u3044\u3066\nSeaside\u3092SSL\u3067\u904b\u7528\u3059\u308b\u969b\u306b\u306f\u3001Apache\u3084Nginx\u306eSSL\u30d7\u30ed\u30ad\u30b7\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002Smalltalk\u5074\u3067\u3082SSL\u901a\u4fe1\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u5c11\u3057\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5fc3\u914d\u306a\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001SSL\u306e\u904b\u7528\u3067\u6c17\u3092\u3064\u3051\u308b\u3053\u3068\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u306eCookie\u5316\u3057\u305f\u969b\u306bSecure\u5c5e\u6027\u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u3059\u3002SSL\u904b\u7528\u3092\u3057\u3066\u3082\u3001Secure\u5c5e\u6027\u304c\u306a\u3044\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u76d7\u8074\u306e\u6050\u308c\u304c\u3042\u308a\u307e\u3059\u3002\n\nSecure\u5c5e\u6027\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n```smalltalk\n| app |\napp := (WAAdmin register: self asApplicationAt:'app')\n\tpreferenceAt: #sessionClass put: MSession;\n\tyourself.\napp preferenceAt: #trackingStrategy put: WACookieOnlySessionTrackingStrategy new.\t\t\napp preferenceAt: #serverProtocol put: 'https'.\n```\n\nChrome\u306e\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u30c4\u30fc\u30eb > Resources > Cookies > Secure \u3067\u30af\u30c3\u30ad\u30fc\u306eSecure\u5c5e\u6027\u306b\u30c1\u30a7\u30c3\u30af\u304c\u4ed8\u3044\u3066\u3044\u308c\u3070\u3001Secure\u5c5e\u6027\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002HTTP, HTTPS\u306e\u4e21\u65b9\u3067\u52d5\u304f\u3088\u3046\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5834\u5408\u306f\u5c11\u3057\u5de5\u592b\u304c\u3044\u308a\u307e\u3059\u304c\u3001\u6700\u8fd1\u3067\u306f\u5e38\u6642SSL\u904b\u7528\u3082\u4e00\u822c\u7684\u306b\u306a\u308a\u3064\u3064\u3042\u308b\u306e\u3067\u3001\u5e38\u6642SSL\u904b\u7528\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-17 13.50.54.jpg](https://qiita-image-store.s3.amazonaws.com/0/18287/595671d4-d629-99f2-42bb-73d8ae2edbcb.jpeg)\n\n\n# \u30de\u30eb\u30c1\u30a4\u30e1\u30fc\u30b8\u3067\u306e\u904b\u7528\nPharo Smalltalk\u306eVM\u958b\u767a\u306f\u9032\u3093\u3067\u3044\u308b\u305f\u3081\u51e6\u7406\u81ea\u4f53\u306f\u901f\u3044\u306e\u3067\u3059\u304c\u3001\u4e2d\u898f\u6a21\u3001\u5927\u898f\u6a21\u30b5\u30fc\u30d3\u30b9\u306b\u306a\u308b\u3068\uff11\u30a4\u30e1\u30fc\u30b8\u3067\u306e\u904b\u7528\u306f\u5fc3\u914d\u3067\u3059\u3002\u305d\u3053\u3067\u3001\u30dd\u30fc\u30c8\u3092\u5909\u3048\u3066\u8907\u6570\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u3057\u3001\u9ad8\u8ca0\u8377\u306b\u3082\u8010\u3048\u308c\u308b\u904b\u7528\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306bApache\u3068Nginx\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n![m-server.jpg](https://qiita-image-store.s3.amazonaws.com/0/18287/1d9f0711-c83c-498f-0f37-0c876a2107e6.jpeg)\n\n\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306fSeaside\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5171\u6709\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc\u3067\u904b\u7528\u3059\u308b\u969b\u306b\u306f\u3001\u540c\u3058\u30b5\u30fc\u30d0\u30fc\uff08\u30a2\u30d7\u30ea\uff09\u3067\u51e6\u7406\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002sticky session\u3092\u3059\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\n```apache:Apache\n<VirtualHost *:80>\n    ProxyPreserveHost On\n    ProxyRequests Off\n    ProxyStatus On\n    ServerName exmaple.com\n    ServerAlias exmaple.com\n    DocumentRoot /home/ec2-user/public_html\n    Header add Set-Cookie \"ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/\" env=BALANCER_ROUTE_CHANGED\n    <Proxy balancer://mycluster>\n      BalancerMember http://localhost:8080 route=first loadfactor=10\n      BalancerMember http://localhost:8081 route=second loadfactor=10\n      ProxySet stickysession=ROUTEID\n    </Proxy>\n    RewriteEngine On\n    # applicationName\u306fSeaside\u306eApplication Name\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\n    RewriteRule ^/(applicationName.*)$ balancer://mycluster/$1 [P,L]\n</VirtualHost>\n```\n\nNginx\u306fsticky session\u306e\u6a5f\u80fd\u304c\u6a19\u6e96\u306b\u306a\u3044\u305f\u3081\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```nginx:Nginx\nupstream app {\n    sticky;\n    server localhost:8080;\n    server localhost:8081;\n}\n\nserver {\n    client_max_body_size 25M;\n    client_body_buffer_size 128k;\n    listen       80;\n    server_name  example.com;\n\n    location / {\n        root   /home/ec2-user/public_html;\n        index  index.html index.htm;\n    }\n\n    # applicationName\u306fSeaside\u306eApplication Name\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\n    location /applecationName {\n        proxy_intercept_errors on;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header Host $http_host;\n        proxy_redirect   off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_pass_header 'Access-Control-Allow-Origin';\n        proxy_pass http://app;\n    }\n\n}\n```\n\n# ELB\u3067\u306e\u904b\u7528\nPharo Smalltalk\u3068Seaside\u3067\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u308b\u4eba\u3082\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306e\u3067\u3001Amazon Web Service\u306eELB(Elastic Load Balancing)\u3092\u7528\u3044\u305f\u904b\u7528\u3082\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n![elb.jpg](https://qiita-image-store.s3.amazonaws.com/0/18287/f8dfd7ce-7c6f-c3a0-8e72-7b5605409103.jpeg)\n\n\u30de\u30eb\u30c1\u30a4\u30e1\u30fc\u30b8\u904b\u7528\u3068\u540c\u3058\u3067\u3059\u304c\u3001\u8ca0\u8377\u5206\u6563\u3059\u308b\u969b\u306b\u540c\u3058\u30b5\u30fc\u30d0\u30fc\uff08\u30a2\u30d7\u30ea\u30b5\u30fc\u30d0\u30fc\uff09\u304c\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\nAWS Management Console\u306eEC2 DashBoard\u306eLoad Balancers\u3092\u9078\u629e\u3002Port Configuration\u306eEdit\u3092\u30af\u30ea\u30c3\u30af\u3002\u300cEnable Application Generated Cookie Stickiness\u300d\u3092\u9078\u629e\u3057\u3066\u3001Cookie Name\u3092_s\u3068\u3057\u307e\u3057\u3087\u3046\u3002\u3053\u308c\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eCookie\u3092\u7528\u3044\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u7dad\u6301\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n![elb2.png](https://qiita-image-store.s3.amazonaws.com/0/18287/1ec88133-7c2d-f124-221e-1fdae4d8d4ed.png)\n\n# GUI\u306a\u3057\u306e\u8d77\u52d5\u65b9\u6cd5\n\n\u30b5\u30fc\u30d0\u30fc\u3067\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u3068\u3057\u3066Pharo\u3092\u8d77\u52d5\u3059\u308b\u5834\u5408\u3001GUI\u3092\u30aa\u30d5\u3057\u3066\u8d77\u52d5\u3059\u308b\u30b1\u30fc\u30b9\u304c\u591a\u3044\u305f\u3081\u7d39\u4ecb\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u304cLinux\u3067\u516c\u5f0f\u30b5\u30a4\u30c8\u306eVM\uff08 http://pharo.org/download \uff09\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u8d77\u52d5\u30b7\u30a7\u30eb\u5185\u306e`-vm-display-X11`\u3092`-vm-display-null`\u306b\u5909\u66f4\u3057\u307e\u3059\uff08\u4ee5\u4e0b\u306f\u5909\u66f4\u5f8c\u306e\u30b7\u30a7\u30eb\uff09\u3002\n\n```bash:pharo3.0/pharo\n#!/bin/bash\n\n# path\nDIR=`readlink -f $0` #resolve symlink\nROOT=`dirname $DIR` #obtain dir of the resolved path\nLINUX=\"$ROOT/bin\"\nRESOURCES=\"$ROOT/shared\"\nICONS=\"$ROOT/icons\"\n\n# icon (note: gvfs-set-attribute is found in gvfs-bin on Ubuntu\n# systems and it seems to require an absolute filename)\ngvfs-set-attribute \\\n\t\"$0\" \\\n\t\"metadata::custom-icon\" \\\n\t\"file://$ICONS/Pharo.png\" \\\n\t\t2> /dev/null\n\n# zenity is part of GNOME\nimage_count=`ls \"$RESOURCES\"/*.image 2>/dev/null |wc -l`\nif [ \"$1\" == \"\" ]; then \n\tif which zenity &>/dev/null && [ \"$image_count\"  -ne 1 ]; then\n\t\timage=`zenity --title 'Select an image' --file-selection --filename \"$RESOURCES/\" --file-filter '*.image' --file-filter '*'`\n\telse\n\t\timage=\"$RESOURCES/Pharo3.0.image\"\t\t\n\tfi\nelse\n\timage=$*\nfi\n\n\n# execute\nexec \"$LINUX/pharo\" \\\n\t--plugins \"$LINUX\" \\\n\t--encoding utf8 \\\n\t-vm-display-null \\\n\t$image\n```\n\n\u8d77\u52d5\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n*Pharo3.0\u3088\u308a\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u3082\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305f\u3081\u3001\u8d77\u52d5\u6642\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002*\n\n```bash:Pharo3.0\n./pharo3.0/pharo ./Pharo3.0.app/Contents/Resources/Pharo3.0.image --no-quit\n```\n\n\n# \u307e\u3068\u3081\nSeaside\u306e\u4e00\u822c\u7684\u306a\u516c\u958b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u304d\u307e\u3057\u305f\u3002\u30bb\u30c3\u30b7\u30e7\u30f3\u306eCookie\u5316\u3001SSL\u306e\u65b9\u6cd5\u3001\u30de\u30eb\u30c1\u30a4\u30e1\u30fc\u30b8\u904b\u7528\u306b\u3088\u308b\u8ca0\u8377\u5206\u6563\u3001\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3092\u7528\u3044\u305f\u8ca0\u8377\u5206\u6563\u306a\u3069\u3092\u77e5\u3063\u3066\u3044\u308c\u3070\u3001Seaside\u3092\u4f7f\u3063\u305f\u30b5\u30fc\u30d3\u30b9\u3082\u53ef\u80fd\u306a\u306f\u305a\u3067\u3059\u3002Seaside\u306fSmalltalk\u3089\u3057\u3044Web Framework\u3060\u3068\u601d\u3063\u3066\u304a\u308a\u307e\u3059\u3002\u53ef\u80fd\u306a\u9650\u308aSmalltalk\u3067\u4f5c\u308b\u3092\u5fb9\u5e95\u3057\u305f\u3068\u3053\u308d\u304c\u3001\u500b\u4eba\u7684\u306b\u306f\u6c17\u306b\u5165\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3067\u3082\u3042\u308a\u307e\u3059\u3002\u305f\u3060\u3001Seaside\u81ea\u4f53\u306f\u3069\u3093\u3069\u3093\u5de8\u5927\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306a\u308a\u3064\u3064\u3042\u308a\u307e\u3059\u3057\u3001\u4eca\u6642\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u308b\u969b\u306b\u306f\u5c11\u3057\u7269\u8db3\u308a\u306a\u3055\u3082\u611f\u3058\u308b\u3068\u3053\u308d\u3082\u3042\u3063\u305f\u308a\u3057\u307e\u3059\u3002Smalltalk\u958b\u767a\u8005\u306e\u4e2d\u306b\u306f\u65b0\u3057\u3044Web Framework\u306e\u958b\u767a\u3082\u3057\u3066\u3044\u305f\u308a\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u6ce8\u76ee\u3057\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n#\u53c2\u8003\n\nHTTPS\u3092\u4f7f\u3063\u3066\u3082Cookie\u306e\u6539\u5909\u306f\u9632\u3052\u306a\u3044\u3053\u3068\u3092\u5b9f\u9a13\u3067\u8a66\u3057\u3066\u307f\u305f - \u5fb3\u4e38\u6d69\u306e\u65e5\u8a18\nhttp://blog.tokumaru.org/2013/09/cookie-manipulation-is-possible-even-on-ssl.html\n\nSticky Sessions - Elastic Load Balancing \nhttp://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html\n\n\u7b2c68\u56deSmalltalk\u52c9\u5f37\u4f1a\nhttp://www.smalltalk-users.jp/Home/gao-zhi/dai68kaismalltalkbenkyoukai\n", "tags": ["Pharo3.0", "Seaside3.1", "Smalltalk"]}