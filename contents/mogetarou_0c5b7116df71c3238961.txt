{"tags": ["sendmail", "AWS", "SMTP"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nAWS+Sendmail\u3067SMTP\u30ea\u30ec\u30fc\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\u305d\u306e\u307e\u3068\u3081\u306b\u306a\u308a\u307e\u3059\u3002\n\u74b0\u5883\uff09\n\u304a\u540d\u524d.com\nAWS\nsendmail\n\n\u6982\u8981\n\nSPF\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\nsendmail\u306bSMART_HOST\u306e\u8a2d\u5b9a\n\u6b63\u3057\u304f\u30ea\u30ec\u30fc\u3055\u308c\u308b\u304b\u30c6\u30b9\u30c8\n\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\n\n\n\u8a73\u7d30\n\n1.SPF\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\nDNS\u306e\u7ba1\u7406\u753b\u9762\u3067SPF\u30ec\u30b3\u30fc\u30c9\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\nv=spf1 include:spf.XXXX.jp ~all\n\u5c1a\u3001\u8907\u6570\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\uff08\u672a\u691c\u8a3c\uff09\nv=spf1 include:spf.XXXX.jp include:_spf.google.com ~all\n\n2.sendmail\u306bSMART_HOST\u306e\u8a2d\u5b9a\nsendmail\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u306bSMART_HOST\u3092\u8ffd\u52a0\u3057\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n# vim /etc/mail/sendmail.mc \ndefine(`SMART_HOST',`smtp.xxxxx.net')\n:\n# make sendmail.cf\nWARNING: 'sendmail.mc' is modified. Please install package sendmail-cf to update your configuration.\n\nAWS\u3060\u3068\u30a8\u30e9\u30fc\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fsendmail-cf\u304c\u5165\u3063\u3066\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# yum install sendmail-cf\n:\n# make sendmail.cf\n\n\n3.\u6b63\u3057\u304f\u30ea\u30ec\u30fc\u3055\u308c\u308b\u304b\u30c6\u30b9\u30c8\n\u6b63\u3057\u304f\u30ea\u30ec\u30fc\u3055\u308c\u308b\u304b\u30c6\u30b9\u30c8\u3092\u3057\u307e\u3059\u3002relay\u304c\u51fa\u3066\u304a\u308a\u3001HOST\u304cSMART_HOST\u306e\u5024\u3067\u3042\u308c\u3070OK\u3067\u3059\u3002\n# sendmail -bv XXXX@xxxxxx.jp\nXXXX@xxxxxx.jp... deliverable: mailer relay, host smtp.xxxxx.net, user XXXX@xxxxxx.jp\n\n\n4.\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\n\u30b3\u30de\u30f3\u30c9\u3067\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u3066\u307f\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068mail\u30b3\u30de\u30f3\u30c9\u304c\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3082\u3057\u3068\u304f\u3002\n\u3042\u3068\u306f\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3067\u304d\u3066\u308c\u3070OK\u3002\n# hostname | mail -s 'TEST' XXXX@xxxxxx.jp\n-bash: mail: command not found\n\n# yum install mail\n\uff1a\n# hostname | mail -s 'TEST' XXXX@xxxxxx.jp\n\n\n\u3042\u3068\u304c\u304d\nsendmail\u3067\u3084\u3063\u305f\u3051\u3069postfix\u3067\u8a2d\u5b9a\u3057\u305f\u3044\u306e\u3067\u5f8c\u307b\u3069\u66f8\u304d\u307e\u3059\u3002\n\n\u305d\u306e\u4ed6\n\u53c2\u8003\uff09\nSendmail\u304b\u3089SendGrid\u3078\u30ea\u30ec\u30fc\u3059\u308b4\u3064\u306e\u65b9\u6cd5\n## \u306f\u3058\u3081\u306b\nAWS+Sendmail\u3067SMTP\u30ea\u30ec\u30fc\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\u305d\u306e\u307e\u3068\u3081\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u74b0\u5883\uff09\n\u304a\u540d\u524d.com\nAWS\nsendmail\n\n## \u6982\u8981\n1. SPF\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\n2. sendmail\u306bSMART_HOST\u306e\u8a2d\u5b9a\n3. \u6b63\u3057\u304f\u30ea\u30ec\u30fc\u3055\u308c\u308b\u304b\u30c6\u30b9\u30c8\n4. \u30e1\u30fc\u30eb\u3092\u9001\u4fe1\n\n## \u8a73\u7d30\n### 1.SPF\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\nDNS\u306e\u7ba1\u7406\u753b\u9762\u3067SPF\u30ec\u30b3\u30fc\u30c9\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\nv=spf1 include:spf.XXXX.jp ~all\n\n\u5c1a\u3001\u8907\u6570\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\uff08\u672a\u691c\u8a3c\uff09\nv=spf1 include:spf.XXXX.jp include:_spf.google.com ~all\n\n### 2.sendmail\u306bSMART_HOST\u306e\u8a2d\u5b9a\nsendmail\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u306bSMART_HOST\u3092\u8ffd\u52a0\u3057\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n\n```shell-session\n# vim /etc/mail/sendmail.mc \ndefine(`SMART_HOST',`smtp.xxxxx.net')\n:\n# make sendmail.cf\nWARNING: 'sendmail.mc' is modified. Please install package sendmail-cf to update your configuration.\n```\n\nAWS\u3060\u3068\u30a8\u30e9\u30fc\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fsendmail-cf\u304c\u5165\u3063\u3066\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```shell-session\n# yum install sendmail-cf\n:\n# make sendmail.cf\n```\n\n### 3.\u6b63\u3057\u304f\u30ea\u30ec\u30fc\u3055\u308c\u308b\u304b\u30c6\u30b9\u30c8\n\u6b63\u3057\u304f\u30ea\u30ec\u30fc\u3055\u308c\u308b\u304b\u30c6\u30b9\u30c8\u3092\u3057\u307e\u3059\u3002relay\u304c\u51fa\u3066\u304a\u308a\u3001HOST\u304cSMART_HOST\u306e\u5024\u3067\u3042\u308c\u3070OK\u3067\u3059\u3002\n\n```shell-session\n# sendmail -bv XXXX@xxxxxx.jp\nXXXX@xxxxxx.jp... deliverable: mailer relay, host smtp.xxxxx.net, user XXXX@xxxxxx.jp\n```\n\n### 4.\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\n\u30b3\u30de\u30f3\u30c9\u3067\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u3066\u307f\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068mail\u30b3\u30de\u30f3\u30c9\u304c\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3082\u3057\u3068\u304f\u3002\n\u3042\u3068\u306f\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3067\u304d\u3066\u308c\u3070OK\u3002\n\n```shell-session\n# hostname | mail -s 'TEST' XXXX@xxxxxx.jp\n-bash: mail: command not found\n\n# yum install mail\n\uff1a\n# hostname | mail -s 'TEST' XXXX@xxxxxx.jp\n```\n\n## \u3042\u3068\u304c\u304d\nsendmail\u3067\u3084\u3063\u305f\u3051\u3069postfix\u3067\u8a2d\u5b9a\u3057\u305f\u3044\u306e\u3067\u5f8c\u307b\u3069\u66f8\u304d\u307e\u3059\u3002\n\n## \u305d\u306e\u4ed6\n\u53c2\u8003\uff09\n[Sendmail\u304b\u3089SendGrid\u3078\u30ea\u30ec\u30fc\u3059\u308b4\u3064\u306e\u65b9\u6cd5](http://blog.azumakuniyuki.org/2011/08/4-ways-to-relay-email-from-sendmail-to.html)\n"}