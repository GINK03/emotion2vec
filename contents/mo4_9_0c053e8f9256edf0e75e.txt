{"context": "Three.js\u306e\u30ab\u30e1\u30e9\u3092Tween.js\u3067\u79fb\u52d5\u3055\u305b\u3066\u307f\u305f\n\n\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u305f\u4f4d\u7f6e\u304b\u3089\u5bfe\u8c61\u306b\u30ba\u30fc\u30e0\u30a4\u30f3\u3059\u308b\n\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/amoKrW\n\nES6\u306eClass\u5185\u304b\u3089\u4e00\u90e8\u629c\u7c8b\n\nanimateCameraPos(50,20,0);\n\n\u30fb\u30fb\u30fb\n\nanimateCameraPos(x,y,z) {\n  const that = this;\n  const coords = this.camera.position; // \u73fe\u5728\u5730\u70b9\n  const destinationVector = new THREE.Vector3(x, y, z); // \u7d42\u7740\u5730\u70b9\n  const DURATION = 1000;\n  let loop;\n\n  const tween = new TWEEN.Tween(coords)\n    .to(destinationVector, DURATION)\n    .easing(TWEEN.Easing.Cubic.Out) // \u6700\u5f8c\u3067\u6e1b\u901f\u3059\u308b\n    .onUpdate(update) // TWEEN.update()\u306e\u5ea6\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\n    .onComplete(complete)\n    .start();\n\n  renderCamera();\n\n  function renderCamera() {\n    loop = requestAnimationFrame(renderCamera);\n    TWEEN.update();\n  }\n  function update() {\n    that.camera.lookAt(that.zeroVector); // \u5411\u304d\u3092\u5909\u3048\u306a\u304c\u3089\u79fb\u52d5\n    console.log(coords);\n  }\n  // \u7d42\u7740\u5730\u70b9\u306b\u7740\u304d\u6b21\u7b2c\u3001requestAnimationFrame\u3092\u30b9\u30c8\u30c3\u30d7\n  function complete() {\n    cancelAnimationFrame(loop);\n  }\n}\n\n\n\n\u30ab\u30e1\u30e9\u3092\u30a8\u30f3\u30c9\u30ec\u30b9\u306b\u3086\u3089\u3086\u3089\u3055\u305b\u308b\n\nchain\n\u884c\u304d\u3068\u5e30\u308a\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u9055\u3046\u30013\u70b9\u4ee5\u4e0a\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u7e4b\u3052\u308b\u3068\u304d\u306a\u3069\u306b\u4f7f\u3048\u308b\n\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/xExxKL\n\nES6\u306eClass\u5185\u304b\u3089\u4e00\u90e8\u629c\u7c8b\nswayCamera() {\n  const posSrc = {pos:1};\n  const DURATION = 3000;\n  const that = this;\n\n  // \u884c\u304d\n  const tween = new TWEEN.Tween(posSrc)\n    .delay(500)\n    .to({pos:0}, DURATION)\n    .easing(TWEEN.Easing.Quadratic.Out)\n    .onUpdate(update)\n\n  // \u5e30\u308a\n  const tweenBack = new TWEEN.Tween(posSrc)\n    .delay(500)\n    .to({pos:1}, DURATION)\n    .easing(TWEEN.Easing.Elastic.In)\n    .onUpdate(update)\n\n  // \u30eb\u30fc\u30d7\u3055\u305b\u308b | chain() \u9023\u7d50\n  tween.chain(tweenBack);\n  tweenBack.chain(tween);\n\n  tween.start();\n\n  function update() {\n    // this\u306f\u30c8\u30a5\u30a4\u30fc\u30f3\u306b\u3088\u3063\u3066\u4e0e\u3048\u3089\u308c\u308b\u5ea7\u6a19\n    // new TWEEN.Tween(posSrc)\u306eposSrc\u3092\u6307\u3059\n    // \u3064\u307e\u308athis == {pos: 1}\n    const pos = this.pos;\n    const RANGE = 10;\n\n    const newX = that.initialCameraPosX + ((RANGE * pos) * 2 - RANGE); // 90 ~ 110\n    that.camera.position.x = newX;\n  }\n}\n\n\n\nyoyo\n\u884c\u304d\u3068\u5e30\u308a\u306e\u52d5\u304d\u304c\u540c\u3058\u306e\u5834\u5408\u3001yoyo\u3067\u66f8\u3044\u305f\u65b9\u304c\u7c21\u5358\n\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/bwNraw\n\nES6\u306eClass\u5185\u304b\u3089\u4e00\u90e8\u629c\u7c8b\nconst tween = new TWEEN.Tween(posSrc)\n  .delay(500)\n  .to({pos:0}, DURATION)\n  .easing(TWEEN.Easing.Quadratic.Out)\n  .yoyo(true)\n  .repeat(Infinity)\n  .onUpdate(update)\n  .start();\n\n\n\n\u53c2\u8003\nTween.js \u00d7 Three.js\n\n\nThree.js\u306e\u30ab\u30e1\u30e9\u3092[Tween.js](https://github.com/tweenjs/tween.js/)\u3067\u79fb\u52d5\u3055\u305b\u3066\u307f\u305f\n\n## \u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u305f\u4f4d\u7f6e\u304b\u3089\u5bfe\u8c61\u306b\u30ba\u30fc\u30e0\u30a4\u30f3\u3059\u308b\n\n\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/amoKrW\n\n```javascript:ES6\u306eClass\u5185\u304b\u3089\u4e00\u90e8\u629c\u7c8b\n\nanimateCameraPos(50,20,0);\n\n\u30fb\u30fb\u30fb\n\nanimateCameraPos(x,y,z) {\n  const that = this;\n  const coords = this.camera.position; // \u73fe\u5728\u5730\u70b9\n  const destinationVector = new THREE.Vector3(x, y, z); // \u7d42\u7740\u5730\u70b9\n  const DURATION = 1000;\n  let loop;\n  \n  const tween = new TWEEN.Tween(coords)\n    .to(destinationVector, DURATION)\n    .easing(TWEEN.Easing.Cubic.Out) // \u6700\u5f8c\u3067\u6e1b\u901f\u3059\u308b\n    .onUpdate(update) // TWEEN.update()\u306e\u5ea6\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\n    .onComplete(complete)\n    .start();\n  \n  renderCamera();\n  \n  function renderCamera() {\n    loop = requestAnimationFrame(renderCamera);\n    TWEEN.update();\n  }\n  function update() {\n    that.camera.lookAt(that.zeroVector); // \u5411\u304d\u3092\u5909\u3048\u306a\u304c\u3089\u79fb\u52d5\n    console.log(coords);\n  }\n  // \u7d42\u7740\u5730\u70b9\u306b\u7740\u304d\u6b21\u7b2c\u3001requestAnimationFrame\u3092\u30b9\u30c8\u30c3\u30d7\n  function complete() {\n    cancelAnimationFrame(loop);\n  }\n}\n```\n\n## \u30ab\u30e1\u30e9\u3092\u30a8\u30f3\u30c9\u30ec\u30b9\u306b\u3086\u3089\u3086\u3089\u3055\u305b\u308b\n\n### chain\n\n\u884c\u304d\u3068\u5e30\u308a\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u9055\u3046\u30013\u70b9\u4ee5\u4e0a\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u7e4b\u3052\u308b\u3068\u304d\u306a\u3069\u306b\u4f7f\u3048\u308b\n\n\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/xExxKL\n\n```javascript:ES6\u306eClass\u5185\u304b\u3089\u4e00\u90e8\u629c\u7c8b\nswayCamera() {\n  const posSrc = {pos:1};\n  const DURATION = 3000;\n  const that = this;\n  \n  // \u884c\u304d\n  const tween = new TWEEN.Tween(posSrc)\n    .delay(500)\n    .to({pos:0}, DURATION)\n    .easing(TWEEN.Easing.Quadratic.Out)\n    .onUpdate(update)\n  \n  // \u5e30\u308a\n  const tweenBack = new TWEEN.Tween(posSrc)\n    .delay(500)\n    .to({pos:1}, DURATION)\n    .easing(TWEEN.Easing.Elastic.In)\n    .onUpdate(update)\n  \n  // \u30eb\u30fc\u30d7\u3055\u305b\u308b | chain() \u9023\u7d50\n  tween.chain(tweenBack);\n  tweenBack.chain(tween);\n  \n  tween.start();\n  \n  function update() {\n  \t// this\u306f\u30c8\u30a5\u30a4\u30fc\u30f3\u306b\u3088\u3063\u3066\u4e0e\u3048\u3089\u308c\u308b\u5ea7\u6a19\n  \t// new TWEEN.Tween(posSrc)\u306eposSrc\u3092\u6307\u3059\n  \t// \u3064\u307e\u308athis == {pos: 1}\n    const pos = this.pos;\n    const RANGE = 10;\n    \n    const newX = that.initialCameraPosX + ((RANGE * pos) * 2 - RANGE); // 90 ~ 110\n    that.camera.position.x = newX;\n  }\n}\n```\n\n### yoyo\n\n\u884c\u304d\u3068\u5e30\u308a\u306e\u52d5\u304d\u304c\u540c\u3058\u306e\u5834\u5408\u3001yoyo\u3067\u66f8\u3044\u305f\u65b9\u304c\u7c21\u5358\n\n\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/bwNraw\n\n```javascript:ES6\u306eClass\u5185\u304b\u3089\u4e00\u90e8\u629c\u7c8b\nconst tween = new TWEEN.Tween(posSrc)\n  .delay(500)\n  .to({pos:0}, DURATION)\n  .easing(TWEEN.Easing.Quadratic.Out)\n  .yoyo(true)\n  .repeat(Infinity)\n  .onUpdate(update)\n  .start();\n```\n\n> \u53c2\u8003\n[Tween.js \u00d7 Three.js](http://qiita.com/mo4_9/items/738f0a94dd83fab318e2)\n", "tags": ["JavaScript", "es6", "three.js"]}