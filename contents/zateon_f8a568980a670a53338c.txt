{"context": "\u3042\u308b\u30d7\u30eb\u30c0\u30a6\u30f3\u3092\u9078\u629e\u3057\u305f\u3089\u5225\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u30ea\u30b9\u30c8\u306e\u8868\u793a\u5019\u88dc\u3092\u5207\u308a\u66ff\u3048\u308b\u3084\u308a\u65b9\u306b\u3064\u3044\u3066\u4e0b\u8a182\u30d1\u30bf\u30fc\u30f3\u306e\u3046\u3061\u3069\u3063\u3061\u3067\u3084\u308d\u3046\u304b\u60a9\u3093\u3067\u307e\u3057\u305f\u3002\n1\uff0e\u5168\u30d1\u30bf\u30fc\u30f3\u3092\u3042\u3089\u304b\u3058\u3081\u753b\u9762\u306b\u8a2d\u5b9a\u3057\u3066\u30d7\u30eb\u30c0\u30a6\u30f3\u5909\u66f4\u6642\u306b\u753b\u9762\u4e0a\u3067\u5207\u308a\u66ff\u3048\u308b\n2\uff0e\u30d7\u30eb\u30c0\u30a6\u30f3\u5909\u66f4\u6642\u306bAjax\u3067\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n1\uff0e\u306e\u65b9\u6cd5\u306f\u5207\u308a\u66ff\u3048\u51e6\u7406\u304c\u9762\u5012\u3060\u3063\u305f\u306e\u30672\uff0e\u306e\u65b9\u6cd5\u3067\u3084\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\nhome.html\n<!DOCTYPE html SYSTEM \"http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\"\n      xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n<title>Insert title here</title>\n</head>\n<body>\n\n<div>\n    <select id=\"select1\" style=\"width: 80px;\">\n        <option value=\"nothing\">-</option>\n        <option value=\"001\">\u5317\u6d77\u9053</option>\n        <option value=\"002\">\u6771\u5317</option>\n        <option value=\"003\">\u5317\u9678</option>\n        <option value=\"004\">\u95a2\u6771</option>\n    </select>\n    <select id=\"select2\" style=\"width: 80px;\">\n        <option value=\"nothing\">-</option>\n    </select>\n</div>\n\n<script th:src=\"@{/resources/js/jquery-1.12.4.min.js}\" src=\"../../../resources/js/jquery-1.12.4.min.js\"></script>\n<script>\n$(function () {\n    $(\"#select1\").change(function() {\n        $.ajax({\n            type: \"POST\",\n            url: \"select\",\n            data: \"select1=\" + $(\"#select1\").val(),\n            dataType: \"text\",\n            success: function(msg) {\n                $(\"#select2\").html(msg);\n            }\n        });\n    });\n});\n</script>\n</body>\n</html>\n\n\njquery\u3067id=\"select1\"\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u5207\u308a\u66ff\u3048\u6642\u306bAjax\u901a\u4fe1\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\n\u30c7\u30fc\u30bf\u53d6\u5f97\u3067\u304d\u305f\u3089id=\"select2\"\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u306ehtml\u3092\u66f8\u304d\u63db\u3048\u308b\n\nHomeController.java\npackage jp.co.test.controller;\n\nimport java.util.List;\nimport java.util.Locale;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport jp.co.test.service.HomeService;\n\n@Controller\npublic class HomeController {\n\n    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);\n\n    @Autowired\n    private HomeService homeService;\n\n    @RequestMapping(value = \"/\", method = RequestMethod.GET)\n    public String home(Locale locale, Model model) {\n        return \"home\";\n    }\n\n    @RequestMapping(value = \"/select\", method = RequestMethod.POST)\n    @ResponseBody\n    public String getSelectData(String selectValue) {\n        logger.info(\"start\");\n\n        StringBuilder sb = new StringBuilder(\"<option value=\\\"nothing\\\">-</option>\");\n\n        List<String> selectDataList = homeService.getSelectData(selectValue);\n        selectDataList.stream()\n            .map(value -> String.format(\"<option value=\\\"%s\\\">%s</option>\", value, value))\n            .forEach(option -> sb.append(option));\n\n        logger.info(sb.toString());\n\n        logger.info(\"end\");\n        return sb.toString();\n    }\n\n}\n\n\nController\u5074\u306e\u51e6\u7406\u3067\u306f\u30bf\u30b0\u4ed8\u304d\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u3059\u3088\u3046\u306b\u8a2d\u5b9a\n\u3093\u3067\u52d5\u4f5c\u3055\u305b\u3066\u307f\u308b\u3068\u3042\u308c\uff1f\u6587\u5b57\u5316\u3051\u3057\u3066\u3044\u308b\u3002\u3002\n\nAjax\u3067\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u304c\u6587\u5b57\u5316\u3051\u3057\u3066\u307e\u3057\u305f\u3002\n\u8272\u3005\u8abf\u3079\u3066\u307f\u308b\u3068Controller\u306eRequestMapping\u306b\u300cproduces = \"text/plain;charset=UTF8\"\u300d\u3092\u8ffd\u52a0\u3059\u308b\u3068\u89e3\u6c7a\u3059\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u7121\u4e8b\u89e3\u6c7a\u3057\u307e\u3057\u305f\u304c\u3001\u6587\u5b57\u5316\u3051\u306b\u95a2\u3057\u3066\u306f\u3044\u308d\u3044\u308d\u3042\u3063\u3066\u5927\u5909\u3067\u3059\u306d\uff5e\n\n\u53c2\u8003\u30ea\u30f3\u30af\nhttp://d.hatena.ne.jp/graySpace/20140406/1396756991\n\u3042\u308b\u30d7\u30eb\u30c0\u30a6\u30f3\u3092\u9078\u629e\u3057\u305f\u3089\u5225\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u30ea\u30b9\u30c8\u306e\u8868\u793a\u5019\u88dc\u3092\u5207\u308a\u66ff\u3048\u308b\u3084\u308a\u65b9\u306b\u3064\u3044\u3066\u4e0b\u8a182\u30d1\u30bf\u30fc\u30f3\u306e\u3046\u3061\u3069\u3063\u3061\u3067\u3084\u308d\u3046\u304b\u60a9\u3093\u3067\u307e\u3057\u305f\u3002\n\n1\uff0e\u5168\u30d1\u30bf\u30fc\u30f3\u3092\u3042\u3089\u304b\u3058\u3081\u753b\u9762\u306b\u8a2d\u5b9a\u3057\u3066\u30d7\u30eb\u30c0\u30a6\u30f3\u5909\u66f4\u6642\u306b\u753b\u9762\u4e0a\u3067\u5207\u308a\u66ff\u3048\u308b\n2\uff0e\u30d7\u30eb\u30c0\u30a6\u30f3\u5909\u66f4\u6642\u306bAjax\u3067\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n\n1\uff0e\u306e\u65b9\u6cd5\u306f\u5207\u308a\u66ff\u3048\u51e6\u7406\u304c\u9762\u5012\u3060\u3063\u305f\u306e\u30672\uff0e\u306e\u65b9\u6cd5\u3067\u3084\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n```home.html\n<!DOCTYPE html SYSTEM \"http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\"\n      xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n<title>Insert title here</title>\n</head>\n<body>\n\n<div>\n    <select id=\"select1\" style=\"width: 80px;\">\n        <option value=\"nothing\">-</option>\n        <option value=\"001\">\u5317\u6d77\u9053</option>\n        <option value=\"002\">\u6771\u5317</option>\n        <option value=\"003\">\u5317\u9678</option>\n        <option value=\"004\">\u95a2\u6771</option>\n    </select>\n    <select id=\"select2\" style=\"width: 80px;\">\n        <option value=\"nothing\">-</option>\n    </select>\n</div>\n\n<script th:src=\"@{/resources/js/jquery-1.12.4.min.js}\" src=\"../../../resources/js/jquery-1.12.4.min.js\"></script>\n<script>\n$(function () {\n    $(\"#select1\").change(function() {\n        $.ajax({\n            type: \"POST\",\n            url: \"select\",\n            data: \"select1=\" + $(\"#select1\").val(),\n            dataType: \"text\",\n            success: function(msg) {\n                $(\"#select2\").html(msg);\n            }\n        });\n    });\n});\n</script>\n</body>\n</html>\n```\n\njquery\u3067id=\"select1\"\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u5207\u308a\u66ff\u3048\u6642\u306bAjax\u901a\u4fe1\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\n\u30c7\u30fc\u30bf\u53d6\u5f97\u3067\u304d\u305f\u3089id=\"select2\"\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u306ehtml\u3092\u66f8\u304d\u63db\u3048\u308b\n\n```HomeController.java\npackage jp.co.test.controller;\n\nimport java.util.List;\nimport java.util.Locale;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport jp.co.test.service.HomeService;\n\n@Controller\npublic class HomeController {\n    \n    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);\n    \n    @Autowired\n    private HomeService homeService;\n    \n    @RequestMapping(value = \"/\", method = RequestMethod.GET)\n    public String home(Locale locale, Model model) {\n        return \"home\";\n    }\n    \n    @RequestMapping(value = \"/select\", method = RequestMethod.POST)\n    @ResponseBody\n    public String getSelectData(String selectValue) {\n        logger.info(\"start\");\n        \n        StringBuilder sb = new StringBuilder(\"<option value=\\\"nothing\\\">-</option>\");\n        \n        List<String> selectDataList = homeService.getSelectData(selectValue);\n        selectDataList.stream()\n            .map(value -> String.format(\"<option value=\\\"%s\\\">%s</option>\", value, value))\n            .forEach(option -> sb.append(option));\n        \n        logger.info(sb.toString());\n        \n        logger.info(\"end\");\n        return sb.toString();\n    }\n\n}\n```\n\nController\u5074\u306e\u51e6\u7406\u3067\u306f\u30bf\u30b0\u4ed8\u304d\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u3059\u3088\u3046\u306b\u8a2d\u5b9a\n\u3093\u3067\u52d5\u4f5c\u3055\u305b\u3066\u307f\u308b\u3068\u3042\u308c\uff1f\u6587\u5b57\u5316\u3051\u3057\u3066\u3044\u308b\u3002\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/133525/abd0f3b2-c47d-acb2-0d50-9101b2194cdf.png)\n\nAjax\u3067\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u304c\u6587\u5b57\u5316\u3051\u3057\u3066\u307e\u3057\u305f\u3002\n\u8272\u3005\u8abf\u3079\u3066\u307f\u308b\u3068Controller\u306eRequestMapping\u306b\u300cproduces = \"text/plain;charset=UTF8\"\u300d\u3092\u8ffd\u52a0\u3059\u308b\u3068\u89e3\u6c7a\u3059\u308b\u3088\u3046\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/133525/b18a1ef4-84d8-c4ad-7941-db0366c55305.png)\n\n\u7121\u4e8b\u89e3\u6c7a\u3057\u307e\u3057\u305f\u304c\u3001\u6587\u5b57\u5316\u3051\u306b\u95a2\u3057\u3066\u306f\u3044\u308d\u3044\u308d\u3042\u3063\u3066\u5927\u5909\u3067\u3059\u306d\uff5e\n\n###\u53c2\u8003\u30ea\u30f3\u30af\nhttp://d.hatena.ne.jp/graySpace/20140406/1396756991\n", "tags": ["Ajax", "\u6587\u5b57\u5316\u3051", "spring"]}