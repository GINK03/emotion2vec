{"context": " More than 1 year has passed since last update.\u696d\u52d9\u3067Symfony2.7\u3067\u306e\u958b\u767a\u3092\u884c\u3046\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\uff0c\u4f5c\u696d\u30ed\u30b0\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n\n\u3084\u308a\u305f\u3044\u3053\u3068\nMac\u4e0a\u304b\u3089Vagrant\u3092\u7528\u3044\u3066CentOS\u306e\u4eee\u60f3\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\uff0c\u30b2\u30b9\u30c8OS\u306bSymfony2\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\uff0c\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\n\u3064\u3044\u3067\u306bApache\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\uff0e\nPHP\u3092\u6271\u3046\u306e\u306f\u521d\u3081\u3066\u3067\uff0c\u77e5\u3089\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u305f\u3081\uff0c\u3067\u304d\u308b\u3060\u3051\u7c21\u5358\u306a\u65b9\u6cd5\u3092\u4f7f\u3044\u305f\u3044\uff0e\n\n\u4f5c\u696d\u74b0\u5883\n\u30db\u30b9\u30c8OS: Mac OS X 10.9\n\u30b2\u30b9\u30c8OS: CentOS 7.1.1503\nPHP 5.6.9\nSymfony 2.7.0\nMySQL 5.6.19\n\nSymfony2.7\u3092\u52d5\u304b\u3059\n\nVagrant\u306e\u5c0e\u5165\n\nVagrant\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nVagrant \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 (Mac)\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u306b\u5f93\u3046\uff0e\nVagrant\uff0cVirtual Box\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u4e0a\u3067\uff0c\nVagrant Boxes\nhttp://www.vagrantbox.es/\n\u304b\u3089\uff0c\n\n\u8d64\u67a0\u3067\u793a\u3057\u305f\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\uff0c\"CentOS 7 x64 (Minimal, Shrinked, Guest Additions 4.3.26) (Monthly updates)\"\u306eURL\u3092\u30b3\u30d4\u30fc\uff0e\n\nHost\n$ vagrant box add centos7 https://github.com/holms/vagrant-centos7-box/releases/download/7.1.1503.001/CentOS-7.1.1503-x86_64-netboot.box # \u3055\u3063\u304d\u30b3\u30d4\u30fc\u3057\u305fURL\n$ mkdir -p Vagrant/centos7\n$ cd Vagrant/centos7\n$ vagrant init centos7\n\n\n\nVagrant\u306e\u8a2d\u5b9a\n\nHost\n$ cd ~/Vagrant/centos7\n$ emacs Vagrantfile\n\n\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306b\uff0c\n\nVagrantfile\nVagrant.configure(2) do |config|\n\n  # ...\n\n  # \u4e0b\u8a18\u306e\u884c\u3092\u8ffd\u8a18\n  config.vm.network \"forwarded_port\", guest: 8000, host: 8000\nend\n\n\n\u306e\u3088\u3046\u306b\u8ffd\u8a18\uff0e\n\u3053\u308c\u306b\u3088\u308a\uff0c\u30db\u30b9\u30c8OS\u306e8000\u756a\u30dd\u30fc\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\uff0c\u30b2\u30b9\u30c8OS\u306e8000\u756a\u30dd\u30fc\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u8ee2\u9001\u3055\u308c\u308b\uff0e\n\n\u30b2\u30b9\u30c8OS\u3078\u306e\u30ed\u30b0\u30a4\u30f3\n\nHost\n$ vagrant up\n$ vagrant ssh\n\n\n\nPHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nPHP5.6\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3082\u3061\u308d\u3093\uff0c\u666e\u901a\u306byum install php\u3068\u3057\u3066PHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3060\u304c\uff0c\u305d\u306e\u307e\u307e\u3060\u3068\uff0c\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306ePHP\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\uff0e\n\u4eca\u56de\uff0c\u696d\u52d9\u4e0a\u306e\u8981\u8acb\u3068\u3057\u3066\uff0cPHP\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30925.6\u306b\u6307\u5b9a\u3055\u308c\u305f\u306e\u3067\uff0c\u305d\u308c\u306b\u5f93\u3046\u3053\u3068\u3068\u3059\u308b\uff0e\nCentOS7\u306bPHP5.6\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\u3053\u3061\u3089\u306b\u5f93\u3046\uff0e\n\nGuest\n$ sudo rpm -Uvh http://ftp.iij.ad.jp/pub/linux/fedora/epel/7/x86_64/e/epel-release-7-5.noarch.rpm\n$ sudo rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n$ sudo yum install --enablerepo=remi --enablerepo=remi-php56 php php-opcache php-devel php-mbstring php-mcrypt php-mysqlnd php-phpunit-PHPUnit php-pecl-xdebug php-pecl-xhprof\n\n\n\nGuest\n$ php --version\nPHP 5.6.9 (cli) (built: May 15 2015 09:31:38)\nCopyright (c) 1997-2015 The PHP Group\nZend Engine v2.6.0, Copyright (c) 1998-2015 Zend Technologies\n    with Zend OPcache v7.0.4-dev, Copyright (c) 1999-2015, by Zend Technologies\n    with Xdebug v2.3.2, Copyright (c) 2002-2015, by Derick Rethans\n\n\n\u3053\u3046\u306a\u3063\u3066\u308c\u3070\u305f\u3076\u3093\u554f\u984c\u306a\u3044\uff0e\n\nphp-intl\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nSymfony\u3092\u52d5\u304b\u3059\u306e\u306b\u5fc5\u8981\u3089\u3057\u3044\uff08\u6b63\u76f4\u3088\u304f\u308f\u304b\u3063\u3066\u3044\u306a\u3044\uff09\uff0e\nCentOS\u3067Symfony2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u3001ICU\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3064\u307e\u3065\u304f\n\u3053\u3061\u3089\u306b\u5f93\u3046\uff0e\n\nGuest\n$ wget http://download.icu-project.org/files/icu4c/51.2/icu4c-51_2-src.tgz\n$ tar zxf icu4c-51_2-src.tgz \n$ cd icu/source/\n$ ./configure\n$ make\n$ sudo make install\n$ sudo pear install pecl/intl\n$ echo \"extension=intl.so\" > /etc/php.d/intl.ini\n\n\n\nPHP\u306eTimezone\u8a2d\u5b9a\n\u3053\u308c\u3082Symfony\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u5fc5\u8981\uff0e\n\nGuest\n$ sudo vi /etc/php.ini\n\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u672b\u5c3e\u306b\n[Date]\ndate.timezone = 'UTC'\n\n\u3092\u8ffd\u8a18\uff0e\n\nComposer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nComposer\u306f\uff0cPHP\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb\uff08Python\u306b\u304a\u3051\u308bPIP\u306e\u3088\u3046\u306a\u3082\u306e\u3060\u308d\u3046\u304b\uff09\uff0e\n\u5fc5\u9808\u3067\u306f\u306a\u3044\u304c\uff0c\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306a\u3069\u306b\u4f7f\u3046\u3089\u3057\u3044\uff0e\nInstalling Composer (The Symfony CookBook)\n\nGuest\n$ curl -sS https://getcomposer.org/installer | php\n$ sudo mv composer.phar /usr/local/bin/composer\n\n\n\nSymfony\u306e\u5c0e\u5165\n\nSymfony2.7\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nInstalling and Configuring Symfony (The Symfony Book)\n\u3053\u3061\u3089\u306b\u5f93\u3046\uff0e\n\u65e5\u672c\u8a9e\u7248\u3082\u3042\u308b\u304c\uff0c\u5c11\u3057\u5185\u5bb9\u304c\u53e4\u3044\uff08\u57fa\u672c\u7684\u306bSymfony2.3\u5411\u3051\u306e\u8aac\u660e\u3067\u3042\u308b\uff0cSymfony Installer\u306b\u3064\u3044\u3066\u306e\u8a18\u8ff0\u304c\u306a\u3044\u306a\u3069\uff09\u305f\u3081\uff0c\u7121\u7406\u3057\u3066\u3067\u3082\u82f1\u8a9e\u7248\u516c\u5f0f\u3092\u8aad\u3093\u3060\u65b9\u304c\u826f\u3044\u3068\u601d\u3046\uff0e\n\nGuest\n$ cd\n$ sudo curl -LsS http://symfony.com/installer -o /usr/local/bin/symfony\n$ sudo chmod a+x /usr/local/bin/symfony\n$ symfony new sample\n\n\n\n\u958b\u767a\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u95b2\u89a7\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\nSymfony\u306b\u306f\u958b\u767a\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u3042\u308a\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u8981\u4ef6\u306a\u3069\u3092\u78ba\u304b\u3081\u305f\u308a\uff0c\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u304c\u3067\u304d\u305f\u308a\u3059\u308b\uff0e\nconfig.php\u306f\uff0cSymfony\u304c\u52d5\u4f5c\u3059\u308b\u72b6\u6cc1\u304b\u3069\u3046\u304b\u3092\u5224\u65ad\u3057\u3066\u304f\u308c\u308b\u30c4\u30fc\u30eb\uff0e\nhttp://localhost:8000/config.php\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3067\u8a3a\u65ad\u3057\u3066\u304f\u308c\u308b\uff0e\n\u5b9f\u74b0\u5883\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306a\u3089\u554f\u984c\u306a\u3044\u304c\uff0c\u4eee\u60f3\u74b0\u5883\u4e0a\u306b\u304a\u3044\u305f\u30a2\u30d7\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306e\u5834\u5408\uff0c\"This script is only accessible from localhost.\"\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u95b2\u89a7\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u3042\u308b\uff0e\n\u3053\u308c\u3092\u30b2\u30b9\u30c8OS\u304b\u3089\u95b2\u89a7\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\nGuest\n$ sudo vi ~/sample/web/config.php\n\n\n\nconfig.php\n# ...\n# \u3053\u3053\u304b\u3089\nif (!in=array(@$_SERVER['REMOTE_ADDR'], array(\n    '127.0.0.1',\n    '::1',\n))) {\n    header('HTTP/1.0 403 Forbidden');\n    exit('This script is only accessible from localhost.');\n}\n# \u3053\u3053\u307e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# ...\n\n\n\u4e0a\u8a18\u306e\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8/\u524a\u9664\u3059\u308b\u3068\u3088\u3044\uff0e\napp_dev.php\u306f\uff0cSymfony\u306edevelopment\u74b0\u5883\u306b\u304a\u3044\u3066\uff0c\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306a\u3069\u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u7684\u306b\u884c\u306a\u3063\u3066\u304f\u308c\u308b\uff08\u3089\u3057\u3044\uff09\u30c4\u30fc\u30eb\uff0e\n\u3053\u308c\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b\u3059\u308b\uff0e\n\nGuest\n$ sudo vi ~/sample/web/app_dev.php\n\n\n\napp_dev.php\n# ...\n# \u3053\u3053\u304b\u3089\n// This check prevents access to debug front controllers that are deployed by accident to production servers.\n// Feel free to remove this, extend it, or make something more sophisticated.\nif (isset($_SERVER['HTTP_CLIENT_IP'])\n    || isset($_SERVER['HTTP_X_FORWARDED_FOR'])\n    || !(in_array(@$_SERVER['REMOTE_ADDR'], array('127.0.0.1', 'fe80::1', '::1')) || php_sapi_name() === 'cli-server')\n) {\n    header('HTTP/1.0 403 Forbidden');\n    exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.');\n}\n# \u3053\u3053\u307e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# ...\n\n\n\u4e0a\u8a18\u306e\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8/\u524a\u9664\uff0e\n\n\u30a2\u30d7\u30ea\u3092\u8a66\u3059\n\u30d3\u30eb\u30c8\u30a4\u30f3\u306eWeb\u30b5\u30fc\u30d0\u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u3092\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u308b\uff08Rails\u306eWEBrick\u306e\u3088\u3046\u306a\u3082\u306e\uff1f\uff09\uff0e\nHow to Use PHP's built-in Web Server (The Symfony CookBook)\n\u4eca\u56de\u306f\uff0c\u4eee\u60f3\u74b0\u5883\u4e0a\u3067\u30b5\u30fc\u30d0\u3092\u52d5\u304b\u3057\u3066\u3044\u308b\u305f\u3081\uff0c\u30b2\u30b9\u30c8OS\u306b\u306fGUI\u3067\u52d5\u304f\u30d6\u30e9\u30a6\u30b6\u304c\u306a\u3044\uff0e\n\u305d\u3053\u3067\uff0c\u4e00\u5ea6\u30b2\u30b9\u30c8OS\u4e0a\u3067curl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u3057\u3066\u3044\u305d\u3046\u304b\u3092\u8a66\u3057\uff0c\u305d\u306e\u4e0a\u3067\u30db\u30b9\u30c8OS\u304b\u3089\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\uff0e\n\nGuest\n$ cd ~/sample\n$ php app/console server:start\n$ curl http://localhost:8000/config.php\n# HTML\u304c\u51fa\u529b\u3055\u308c\u308b\n\n\n\u51fa\u529b\u3055\u308c\u308bHTML\u306e\u4e2d\u306b\uff0c\n\nGuest\nYour configuration looks good to run Symfony.\n\n\n\u306e\u3088\u3046\u306a\u8a18\u8ff0\u304c\u3042\u308c\u3070\u554f\u984c\u306a\u3044\uff0e\n\u4f59\u8ac7\u3060\u304c\uff0c\n\nGuest\n$ php app/check.php\n\n\n\u3068\u3059\u308b\u3053\u3068\u3067\uff0c\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u4e0a\u304b\u3089\u3067\u3082\u8a2d\u5b9a\u304c\u304d\u3061\u3093\u3068\u51fa\u6765\u3066\u3044\u308b\u304b\u78ba\u304b\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff0e\n\u3053\u3053\u304b\u3089\u304c\uff0c\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u30a2\u30d7\u30ea\u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u8a2d\u5b9a\uff0e\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u306e\"Using the built-in Web Server from inside a Virtual Machine\"\u306e\u9805\u306b\u3082\u66f8\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u306b\uff0c\u30b5\u30fc\u30d0\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u306e\u5f15\u6570\u306b\"0.0.0.0:8000\"\u3092\u8a2d\u5b9a\u3057\u3066\uff0c8000\u756a\u30dd\u30fc\u30c8\u304b\u3089\u6765\u308bHTTP\u63a5\u7d9a\u3092\u3059\u3079\u3066\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\uff0e\n\u3053\u308c\u306b\u3088\u308a\uff0c\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306e\u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\uff0e\n\u3082\u3061\u308d\u3093\uff0c\u672c\u756a\u30b5\u30fc\u30d0\u3067\u3053\u3093\u306a\u3053\u3068\u3092\u3057\u3066\u306f\u3044\u3051\u306a\u3044\uff0e\n\nGuest\n$ php app/console server:stop\n$ php app/console server:start 0.0.0.0:8000\n\n\n\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u305f\u5f8c\uff0c\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089http://localhost:8000/app/example\u306b\u30a2\u30af\u30bb\u30b9\u3057\uff0c\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\"Homepage.\"\u304c\u51fa\u529b\u3055\u308c\u308c\u3070OK\uff0e\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u63a5\u7d9a\n\nMySQL\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCentOS7\u306bMySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRPM\u3092\u4f7f\u3046\u65b9\u6cd5\u3092\u8a66\u3057\u305f\u304c\uff0c\u3088\u304f\u8003\u3048\u305f\u3089yum\u3067\u3084\u3063\u305f\u65b9\u304c\u7c21\u5358\u3060\u3057\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3082\u3057\u3084\u3059\u305d\u3046\u3060\u3063\u305f\uff0e\n\nGuest\n$ wget http://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-5.6.19-1.linux_glibc2.5.x86_64.rpm-bundle.tar\n$ tar xvf MySQL-5.6.19-1.linux_glibc2.5.x86_64.rpm-bundle.tar\n$ sudo rpm -ivh MySQL-shared-compat-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-shared-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-devel-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-client-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-server-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-embedded-5.6.19-1.linux_glibc2.5.x86_64.rpm \n$ sudo cat /root/.mysql_secret\n# The random password set for the root user at Sat Jun  6 06:22:43 2015 (local time): xxxxxxxxxx\n# \u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e0e\u3048\u3089\u308c\u308b\n$ sudo systemctl start mysql\n$ mysql -r root -p\n# \u30d1\u30b9\u30ef\u30fc\u30c9: xxxxxxxxxx\u3092\u5165\u529b\nmysql> SET PASSWORD FOR root@localhost=PASSWORD('');\nQuery OK, 0 rows affected (0.02 sec)\n$ /usr/bin/mysql_secure_installation\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u306e\u3067\uff0c\u3064\u3044\u3067\u306b\u6587\u5b57\u30b3\u30fc\u30c9\u3092UTF-8\u306b\u8a2d\u5b9a\uff0e\n\nGuest\n$ sudo vi /usr/my.cnf\n\n\n[mysqld]\n\n# \u3053\u3053\u304b\u3089\u4e0b\u3092\u8ffd\u52a0\ncollation-server     = utf8mb4_general_ci\ncharacter-set-server = utf8mb4\n\nmy.cnf\u306e\u5834\u6240\u306f\u74b0\u5883\u306b\u3088\u3063\u3066\u9055\u3046\u304b\u3082\uff0e\n\nGuest\n$ sudo systemctl restart mysql\n\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\n\nGuest\n$ cd ~/sample\n$ php app/console doctrine:database:create\n\n\n\u3053\u308c\u3067\uff0cMySQL\u4e0a\u306b\"symfony\"\u3068\u3044\u3046\u540d\u524d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u3067\u304d\u308b\u306f\u305a\uff0e\n\u3053\u3053\u307e\u3067\u3067\u304d\u308c\u3070\uff0cdevelopment\u74b0\u5883\u3067\u306e\u958b\u767a\u3068\u3057\u3066\u306f\u5341\u5206\u3067\u304d\u308b\uff0e\n\u4ee5\u964d\u306e\u90e8\u5206\u306f\uff0c\u500b\u4eba\u7684\u306b\u6c17\u306b\u306a\u3063\u305f\u306e\u3067\u3084\u3063\u305f\u304a\u307e\u3051\uff0e\n\nApache\u4e0a\u306b\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\nVagrantfile\u306e\u518d\u8a2d\u5b9a\n\u4e00\u5ea6\u30db\u30b9\u30c8OS\u306b\u623b\u308a\uff0c\u30db\u30b9\u30c8OS\u304b\u3089\u30b2\u30b9\u30c8OS\u306e80\u756a\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\uff0cVagrantfile\u306e\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\uff0e\n\nHost\n$ emacs ~/Vagrant/centos7/Vagrantfile\n\n\nconfig.vm.network \"forwarded_port\", guest: 8000, host: 8000\n\n\u306e\u6240\u3092\uff0c\nconfig.vm.network \"forwarded_port\", guest: 80, host: 8000\n\n\u306e\u3088\u3046\u306b\u5909\u66f4\uff0e\n\u305d\u306e\u5f8c\uff0c\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u518d\u8d77\u52d5\u3057\uff0c\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\uff0e\n\nHost\n$ vagrant reload\n$ vagrant ssh\n\n\n\nApache2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCentOS7\u6700\u5c0f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089HTTP\u63a5\u7d9a\u304c\u63a5\u7d9a\u3067\u304d\u308b\u307e\u3067\nCentOS\u304c7\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3055\u308c\u305f\u969b\u306b\uff0c\u7ba1\u7406\u7cfb\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5927\u304d\u304f\u5909\u308f\u3063\u305f\u3089\u3057\u3044\uff0e\n\u7d50\u69cb\u6df7\u4e71\u3057\u305f\uff0e\nCentOS7\u3067\u30b5\u30fc\u30d3\u30b9\u306e\u7ba1\u7406\u65b9\u6cd5\u304c\u5909\u308f\u3063\u305f\uff01\n\nGuest\n$ sudo yum -y install httpd\n$ sudo systemctl start httpd.service\n$ sudo systemctl status httpd.service\n\n\nsystemctl status httpd.service\u3067\uff0chttpd.service\u304cactive\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\uff0e\n/var/www/html/index.html\u304ccurl\u306a\u3069\u3067\u898b\u3089\u308c\u308b\u304b\u78ba\u8a8d\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3059\u308b\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306b\u3064\u3044\u3066\u3082\uff0c\u4ee5\u524d\u306eiptables\u306f\u3042\u307e\u308a\u4f7f\u308f\u306a\u3044\u65b9\u304c\u3088\u304f\uff0c\u4ee3\u308f\u308a\u306b\uff0cfirewalld\u3068\u547c\u3070\u308c\u308b\u65b0\u305f\u306a\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u7528\u3044\u308b\u3068\u3088\u3044\u3089\u3057\u3044\uff0e\n\u4eca\u56de\u306f\u4eee\u60f3\u74b0\u5883\u4e0a\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u306e\u305f\u3081\uff0c\u3068\u308a\u3042\u3048\u305a\u7121\u52b9\u306b\u3057\u3066\u304a\u304f\uff0e\n\u3082\u3061\u308d\u3093\uff0c\u672c\u756a\u30b5\u30fc\u30d0\u3067\u3053\u3093\u306a\u3053t(ry\n\nGuest\n$ sudo systemctl stop firewalld\n$ systemctl status firewalld\n\n# \u30b5\u30fc\u30d0\u8d77\u52d5\u3068\u540c\u6642\u306bapache\u3092\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n$ sudo systemctl enable httpd.service\n$ sudo systemctl list-unit-files | grep httpd\n\n# \u30b5\u30fc\u30d0\u8d77\u52d5\u3068\u540c\u6642\u306bfirewalld\u3092\u7121\u52b9\u306b\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n$ sudo systemctl disable firewalld.service\n$ sudo systemctl list-unit-files | grep firewall\n\n\n\nApache\u306e\u8a2d\u5b9a\nConfiguring a Web Server (The Symfony CookBook) \n\u3054\u4e01\u5be7\u306bApache\uff08\u3068Nginx\uff09\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u306e\u4ed5\u65b9\u307e\u3067\u66f8\u3044\u3066\u3042\u308b\uff0e\n\u4eca\u56de\u306f\u3068\u306b\u304b\u304f\u52d5\u304b\u3059\u3053\u3068\u3092\u76ee\u6a19\u306b\uff0c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u3092\u6d41\u7528\u3059\u308b\uff0e\n\nGuest\n$ sudo vi /etc/httpd/conf/httpd.conf\n\n\n<VirtualHost *:80>\n    ServerName domain.tld\n    ServerAlias www.domain.tld\n\n    DocumentRoot /var/www/project/web\n    <Directory /var/www/project/web>\n        AllowOverride All\n        Order Allow,Deny\n        Allow from All\n    </Directory>\n\n    # uncomment the following lines if you install assets as symlinks\n    # or run into problems when compiling LESS/Sass/CoffeScript assets\n    # <Directory /var/www/project>\n    #     Options FollowSymlinks\n    # </Directory>\n\n    # ErrorLog /var/log/apache2/project_error.log\n    # CustomLog /var/log/apache2/project_access.log\ncombined\n</VirtualHost>\n\nLog\u51fa\u529b\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u3082\u306e\u3092\u8a2d\u5b9a\u3059\u308b\u3079\u304d\u306a\u306e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u304a\u304f\uff0e\n\n\u30ea\u30ea\u30fc\u30b9\u7528\u306e\u30a2\u30d7\u30ea\u306e\u30a2\u30b8\u30e3\u30b9\u30c8\u30e1\u30f3\u30c8\n\u3053\u308c\u3082\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3060\u304c\uff0cApache\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u969b\u306b\u306f\uff0capp/cache\u3068app/logs\u3068\u3044\u30462\u3064\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5bfe\u3057\u3066\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u5fc5\u8981\u3089\u3057\u3044\uff0e\nInstalling and Configuring Symfony (The Symfony Book)\n\u306e\uff0c\"Setting up Permissions\"\u306e\u9805\u306e\"3\"\u3092\u53c2\u7167\uff0e\n\u3053\u308c\u306b\u3088\u308a\uff0cApache\u306e\u30e6\u30fc\u30b6\u3068\u958b\u767a\u8005\u306e\u30e6\u30fc\u30b6\u306e\u4e21\u65b9\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3089\u3057\u3044\uff0e\n\nGuest\n$ HTTPDUSER=`ps aux | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\\  -f1`\n$ sudo setfacl -R -m u:\"$HTTPDUSER\":rwX -m u:`whoami`:rwX app/cache app/logs\n$ sudo setfacl -dR -m u:\"$HTTPDUSER\":rwX -m u:`whoami`:rwX app/cache app/logs\n\n\n\n\u5b9f\u969b\u306b\u30a2\u30af\u30bb\u30b9\n\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089\uff0chttp://localhost/app/example\u306b\u30a2\u30af\u30bb\u30b9\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\"Homepage.\"\u304c\u51fa\u529b\u3055\u308c\u308c\u3070OK\n\n\u696d\u52d9\u3067Symfony2.7\u3067\u306e\u958b\u767a\u3092\u884c\u3046\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\uff0c\u4f5c\u696d\u30ed\u30b0\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n\n# \u3084\u308a\u305f\u3044\u3053\u3068\nMac\u4e0a\u304b\u3089Vagrant\u3092\u7528\u3044\u3066CentOS\u306e\u4eee\u60f3\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\uff0c\u30b2\u30b9\u30c8OS\u306bSymfony2\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\uff0c\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\n\u3064\u3044\u3067\u306bApache\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\uff0e\nPHP\u3092\u6271\u3046\u306e\u306f\u521d\u3081\u3066\u3067\uff0c\u77e5\u3089\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u305f\u3081\uff0c\u3067\u304d\u308b\u3060\u3051\u7c21\u5358\u306a\u65b9\u6cd5\u3092\u4f7f\u3044\u305f\u3044\uff0e\n\n# \u4f5c\u696d\u74b0\u5883\n\u30db\u30b9\u30c8OS: Mac OS X 10.9\n\u30b2\u30b9\u30c8OS: CentOS 7.1.1503\nPHP 5.6.9\nSymfony 2.7.0\nMySQL 5.6.19\n\n# Symfony2.7\u3092\u52d5\u304b\u3059\n\n## Vagrant\u306e\u5c0e\u5165\n\n### Vagrant\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[Vagrant \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 (Mac)](http://qiita.com/inouet/items/b36638adc2b5772db457)\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u306b\u5f93\u3046\uff0e\n\n[Vagrant](http://www.vagrantup.com/)\uff0c[Virtual Box](https://www.virtualbox.org/)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u4e0a\u3067\uff0c\n\nVagrant Boxes\nhttp://www.vagrantbox.es/\n\n\u304b\u3089\uff0c\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-06 13.52.07.png](https://qiita-image-store.s3.amazonaws.com/0/46811/5a24668b-82f4-dc8d-ef1d-9aa1f31ead73.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-06 13.52.07.png\")\n\n\u8d64\u67a0\u3067\u793a\u3057\u305f\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\uff0c\"CentOS 7 x64 (Minimal, Shrinked, Guest Additions 4.3.26) (Monthly updates)\"\u306eURL\u3092\u30b3\u30d4\u30fc\uff0e\n\n```bash:Host\n$ vagrant box add centos7 https://github.com/holms/vagrant-centos7-box/releases/download/7.1.1503.001/CentOS-7.1.1503-x86_64-netboot.box # \u3055\u3063\u304d\u30b3\u30d4\u30fc\u3057\u305fURL\n$ mkdir -p Vagrant/centos7\n$ cd Vagrant/centos7\n$ vagrant init centos7\n```\n\n### Vagrant\u306e\u8a2d\u5b9a\n```bash:Host\n$ cd ~/Vagrant/centos7\n$ emacs Vagrantfile\n```\n\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306b\uff0c\n\n```ruby:Vagrantfile\nVagrant.configure(2) do |config|\n\n  # ...\n\n  # \u4e0b\u8a18\u306e\u884c\u3092\u8ffd\u8a18\n  config.vm.network \"forwarded_port\", guest: 8000, host: 8000\nend\n```\n\n\u306e\u3088\u3046\u306b\u8ffd\u8a18\uff0e\n\u3053\u308c\u306b\u3088\u308a\uff0c\u30db\u30b9\u30c8OS\u306e8000\u756a\u30dd\u30fc\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\uff0c\u30b2\u30b9\u30c8OS\u306e8000\u756a\u30dd\u30fc\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u8ee2\u9001\u3055\u308c\u308b\uff0e\n\n### \u30b2\u30b9\u30c8OS\u3078\u306e\u30ed\u30b0\u30a4\u30f3\n\n```bash:Host\n$ vagrant up\n$ vagrant ssh\n```\n\n## PHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### PHP5.6\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u3082\u3061\u308d\u3093\uff0c\u666e\u901a\u306b`yum install php`\u3068\u3057\u3066PHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3060\u304c\uff0c\u305d\u306e\u307e\u307e\u3060\u3068\uff0c\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306ePHP\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\uff0e\n\u4eca\u56de\uff0c\u696d\u52d9\u4e0a\u306e\u8981\u8acb\u3068\u3057\u3066\uff0cPHP\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30925.6\u306b\u6307\u5b9a\u3055\u308c\u305f\u306e\u3067\uff0c\u305d\u308c\u306b\u5f93\u3046\u3053\u3068\u3068\u3059\u308b\uff0e\n\n[CentOS7\u306bPHP5.6\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002](http://qiita.com/koichi_amami/items/e97bc70e82e95ab99f55)\n\u3053\u3061\u3089\u306b\u5f93\u3046\uff0e\n\n```bash:Guest\n$ sudo rpm -Uvh http://ftp.iij.ad.jp/pub/linux/fedora/epel/7/x86_64/e/epel-release-7-5.noarch.rpm\n$ sudo rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n$ sudo yum install --enablerepo=remi --enablerepo=remi-php56 php php-opcache php-devel php-mbstring php-mcrypt php-mysqlnd php-phpunit-PHPUnit php-pecl-xdebug php-pecl-xhprof\n```\n\n```bash:Guest\n$ php --version\nPHP 5.6.9 (cli) (built: May 15 2015 09:31:38)\nCopyright (c) 1997-2015 The PHP Group\nZend Engine v2.6.0, Copyright (c) 1998-2015 Zend Technologies\n    with Zend OPcache v7.0.4-dev, Copyright (c) 1999-2015, by Zend Technologies\n    with Xdebug v2.3.2, Copyright (c) 2002-2015, by Derick Rethans\n```\n\u3053\u3046\u306a\u3063\u3066\u308c\u3070\u305f\u3076\u3093\u554f\u984c\u306a\u3044\uff0e\n\n### php-intl\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nSymfony\u3092\u52d5\u304b\u3059\u306e\u306b\u5fc5\u8981\u3089\u3057\u3044\uff08\u6b63\u76f4\u3088\u304f\u308f\u304b\u3063\u3066\u3044\u306a\u3044\uff09\uff0e\n\n[CentOS\u3067Symfony2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u3001ICU\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3064\u307e\u3065\u304f](http://qiita.com/emegane/items/f8f66eeb6dbac95c662d)\n\u3053\u3061\u3089\u306b\u5f93\u3046\uff0e\n\n```bash:Guest\n$ wget http://download.icu-project.org/files/icu4c/51.2/icu4c-51_2-src.tgz\n$ tar zxf icu4c-51_2-src.tgz \n$ cd icu/source/\n$ ./configure\n$ make\n$ sudo make install\n$ sudo pear install pecl/intl\n$ echo \"extension=intl.so\" > /etc/php.d/intl.ini\n```\n\n### PHP\u306eTimezone\u8a2d\u5b9a\n\u3053\u308c\u3082Symfony\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u5fc5\u8981\uff0e\n\n```bash:Guest\n$ sudo vi /etc/php.ini\n```\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u672b\u5c3e\u306b\n\n```\n[Date]\ndate.timezone = 'UTC'\n```\n\n\u3092\u8ffd\u8a18\uff0e\n\n\n## Composer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nComposer\u306f\uff0cPHP\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb\uff08Python\u306b\u304a\u3051\u308bPIP\u306e\u3088\u3046\u306a\u3082\u306e\u3060\u308d\u3046\u304b\uff09\uff0e\n\u5fc5\u9808\u3067\u306f\u306a\u3044\u304c\uff0c\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306a\u3069\u306b\u4f7f\u3046\u3089\u3057\u3044\uff0e\n\n[Installing Composer (The Symfony CookBook)](http://symfony.com/doc/current/cookbook/composer.html)\n\n```bash:Guest\n$ curl -sS https://getcomposer.org/installer | php\n$ sudo mv composer.phar /usr/local/bin/composer\n```\n\n## Symfony\u306e\u5c0e\u5165\n\n### Symfony2.7\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[Installing and Configuring Symfony (The Symfony Book)](http://symfony.com/doc/current/book/installation.html)\n\u3053\u3061\u3089\u306b\u5f93\u3046\uff0e\n[\u65e5\u672c\u8a9e\u7248](http://docs.symfony.gr.jp/symfony2/book/installation.html)\u3082\u3042\u308b\u304c\uff0c\u5c11\u3057\u5185\u5bb9\u304c\u53e4\u3044\uff08\u57fa\u672c\u7684\u306bSymfony2.3\u5411\u3051\u306e\u8aac\u660e\u3067\u3042\u308b\uff0cSymfony Installer\u306b\u3064\u3044\u3066\u306e\u8a18\u8ff0\u304c\u306a\u3044\u306a\u3069\uff09\u305f\u3081\uff0c\u7121\u7406\u3057\u3066\u3067\u3082\u82f1\u8a9e\u7248\u516c\u5f0f\u3092\u8aad\u3093\u3060\u65b9\u304c\u826f\u3044\u3068\u601d\u3046\uff0e\n\n```bash:Guest\n$ cd\n$ sudo curl -LsS http://symfony.com/installer -o /usr/local/bin/symfony\n$ sudo chmod a+x /usr/local/bin/symfony\n$ symfony new sample\n```\n\n### \u958b\u767a\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u95b2\u89a7\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\nSymfony\u306b\u306f\u958b\u767a\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u3042\u308a\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u8981\u4ef6\u306a\u3069\u3092\u78ba\u304b\u3081\u305f\u308a\uff0c\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u304c\u3067\u304d\u305f\u308a\u3059\u308b\uff0e\n\nconfig.php\u306f\uff0cSymfony\u304c\u52d5\u4f5c\u3059\u308b\u72b6\u6cc1\u304b\u3069\u3046\u304b\u3092\u5224\u65ad\u3057\u3066\u304f\u308c\u308b\u30c4\u30fc\u30eb\uff0e\n[http://localhost:8000/config.php](http://localhost:8000/config.php)\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3067\u8a3a\u65ad\u3057\u3066\u304f\u308c\u308b\uff0e\n\n\u5b9f\u74b0\u5883\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306a\u3089\u554f\u984c\u306a\u3044\u304c\uff0c\u4eee\u60f3\u74b0\u5883\u4e0a\u306b\u304a\u3044\u305f\u30a2\u30d7\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306e\u5834\u5408\uff0c\"This script is only accessible from localhost.\"\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u95b2\u89a7\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u3042\u308b\uff0e\n\n\u3053\u308c\u3092\u30b2\u30b9\u30c8OS\u304b\u3089\u95b2\u89a7\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n```bash:Guest\n$ sudo vi ~/sample/web/config.php\n```\n\n```php:config.php\n# ...\n# \u3053\u3053\u304b\u3089\nif (!in=array(@$_SERVER['REMOTE_ADDR'], array(\n    '127.0.0.1',\n    '::1',\n))) {\n    header('HTTP/1.0 403 Forbidden');\n    exit('This script is only accessible from localhost.');\n}\n# \u3053\u3053\u307e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# ...\n```\n\n\u4e0a\u8a18\u306e\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8/\u524a\u9664\u3059\u308b\u3068\u3088\u3044\uff0e\n\napp_dev.php\u306f\uff0cSymfony\u306edevelopment\u74b0\u5883\u306b\u304a\u3044\u3066\uff0c\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306a\u3069\u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u7684\u306b\u884c\u306a\u3063\u3066\u304f\u308c\u308b\uff08\u3089\u3057\u3044\uff09\u30c4\u30fc\u30eb\uff0e\n\u3053\u308c\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b\u3059\u308b\uff0e\n\n```bash:Guest\n$ sudo vi ~/sample/web/app_dev.php\n```\n\n```php:app_dev.php\n# ...\n# \u3053\u3053\u304b\u3089\n// This check prevents access to debug front controllers that are deployed by accident to production servers.\n// Feel free to remove this, extend it, or make something more sophisticated.\nif (isset($_SERVER['HTTP_CLIENT_IP'])\n    || isset($_SERVER['HTTP_X_FORWARDED_FOR'])\n    || !(in_array(@$_SERVER['REMOTE_ADDR'], array('127.0.0.1', 'fe80::1', '::1')) || php_sapi_name() === 'cli-server')\n) {\n    header('HTTP/1.0 403 Forbidden');\n    exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.');\n}\n# \u3053\u3053\u307e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# ...\n```\n\n\u4e0a\u8a18\u306e\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8/\u524a\u9664\uff0e\n\n\n## \u30a2\u30d7\u30ea\u3092\u8a66\u3059\n\u30d3\u30eb\u30c8\u30a4\u30f3\u306eWeb\u30b5\u30fc\u30d0\u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u3092\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u308b\uff08Rails\u306eWEBrick\u306e\u3088\u3046\u306a\u3082\u306e\uff1f\uff09\uff0e\n\n[How to Use PHP's built-in Web Server (The Symfony CookBook)](http://symfony.com/doc/current/cookbook/web_server/built_in.html)\n\n\u4eca\u56de\u306f\uff0c\u4eee\u60f3\u74b0\u5883\u4e0a\u3067\u30b5\u30fc\u30d0\u3092\u52d5\u304b\u3057\u3066\u3044\u308b\u305f\u3081\uff0c\u30b2\u30b9\u30c8OS\u306b\u306fGUI\u3067\u52d5\u304f\u30d6\u30e9\u30a6\u30b6\u304c\u306a\u3044\uff0e\n\u305d\u3053\u3067\uff0c\u4e00\u5ea6\u30b2\u30b9\u30c8OS\u4e0a\u3067curl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u3057\u3066\u3044\u305d\u3046\u304b\u3092\u8a66\u3057\uff0c\u305d\u306e\u4e0a\u3067\u30db\u30b9\u30c8OS\u304b\u3089\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\uff0e\n\n```bash:Guest\n$ cd ~/sample\n$ php app/console server:start\n$ curl http://localhost:8000/config.php\n# HTML\u304c\u51fa\u529b\u3055\u308c\u308b\n```\n\n\u51fa\u529b\u3055\u308c\u308bHTML\u306e\u4e2d\u306b\uff0c\n\n```bash:Guest\nYour configuration looks good to run Symfony.\n```\n\n\u306e\u3088\u3046\u306a\u8a18\u8ff0\u304c\u3042\u308c\u3070\u554f\u984c\u306a\u3044\uff0e\n\n\u4f59\u8ac7\u3060\u304c\uff0c\n\n```bash:Guest\n$ php app/check.php\n```\n\n\u3068\u3059\u308b\u3053\u3068\u3067\uff0c\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u4e0a\u304b\u3089\u3067\u3082\u8a2d\u5b9a\u304c\u304d\u3061\u3093\u3068\u51fa\u6765\u3066\u3044\u308b\u304b\u78ba\u304b\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff0e\n\n\u3053\u3053\u304b\u3089\u304c\uff0c\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u30a2\u30d7\u30ea\u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u8a2d\u5b9a\uff0e\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u306e\"Using the built-in Web Server from inside a Virtual Machine\"\u306e\u9805\u306b\u3082\u66f8\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u306b\uff0c\u30b5\u30fc\u30d0\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u306e\u5f15\u6570\u306b\"0.0.0.0:8000\"\u3092\u8a2d\u5b9a\u3057\u3066\uff0c8000\u756a\u30dd\u30fc\u30c8\u304b\u3089\u6765\u308bHTTP\u63a5\u7d9a\u3092\u3059\u3079\u3066\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\uff0e\n\u3053\u308c\u306b\u3088\u308a\uff0c\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306e\u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\uff0e\n\u3082\u3061\u308d\u3093\uff0c\u672c\u756a\u30b5\u30fc\u30d0\u3067\u3053\u3093\u306a\u3053\u3068\u3092\u3057\u3066\u306f\u3044\u3051\u306a\u3044\uff0e\n\n```bash:Guest\n$ php app/console server:stop\n$ php app/console server:start 0.0.0.0:8000\n```\n\n\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u305f\u5f8c\uff0c\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089[http://localhost:8000/app/example](http://localhost:8000/app/example)\u306b\u30a2\u30af\u30bb\u30b9\u3057\uff0c\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\"Homepage.\"\u304c\u51fa\u529b\u3055\u308c\u308c\u3070OK\uff0e\n\n## \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u63a5\u7d9a\n\n### MySQL\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n[CentOS7\u306bMySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](http://sawara.me/mysql/2094/)\n\nRPM\u3092\u4f7f\u3046\u65b9\u6cd5\u3092\u8a66\u3057\u305f\u304c\uff0c\u3088\u304f\u8003\u3048\u305f\u3089yum\u3067\u3084\u3063\u305f\u65b9\u304c\u7c21\u5358\u3060\u3057\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3082\u3057\u3084\u3059\u305d\u3046\u3060\u3063\u305f\uff0e\n\n```bash:Guest\n$ wget http://dev.mysql.com/get/Downloads/MySQL-5.6/MySQL-5.6.19-1.linux_glibc2.5.x86_64.rpm-bundle.tar\n$ tar xvf MySQL-5.6.19-1.linux_glibc2.5.x86_64.rpm-bundle.tar\n$ sudo rpm -ivh MySQL-shared-compat-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-shared-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-devel-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-client-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-server-5.6.19-1.linux_glibc2.5.x86_64.rpm\n$ sudo rpm -ivh MySQL-embedded-5.6.19-1.linux_glibc2.5.x86_64.rpm \n$ sudo cat /root/.mysql_secret\n# The random password set for the root user at Sat Jun  6 06:22:43 2015 (local time): xxxxxxxxxx\n# \u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e0e\u3048\u3089\u308c\u308b\n$ sudo systemctl start mysql\n$ mysql -r root -p\n# \u30d1\u30b9\u30ef\u30fc\u30c9: xxxxxxxxxx\u3092\u5165\u529b\nmysql> SET PASSWORD FOR root@localhost=PASSWORD('');\nQuery OK, 0 rows affected (0.02 sec)\n$ /usr/bin/mysql_secure_installation\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u306e\u3067\uff0c\u3064\u3044\u3067\u306b\u6587\u5b57\u30b3\u30fc\u30c9\u3092UTF-8\u306b\u8a2d\u5b9a\uff0e\n\n```bash:Guest\n$ sudo vi /usr/my.cnf\n```\n\n```\n[mysqld]\n\n# \u3053\u3053\u304b\u3089\u4e0b\u3092\u8ffd\u52a0\ncollation-server     = utf8mb4_general_ci\ncharacter-set-server = utf8mb4\n```\n\nmy.cnf\u306e\u5834\u6240\u306f\u74b0\u5883\u306b\u3088\u3063\u3066\u9055\u3046\u304b\u3082\uff0e\n\n```bash:Guest\n$ sudo systemctl restart mysql\n```\n\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\n\n```bash:Guest\n$ cd ~/sample\n$ php app/console doctrine:database:create\n```\n\n\u3053\u308c\u3067\uff0cMySQL\u4e0a\u306b\"symfony\"\u3068\u3044\u3046\u540d\u524d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u3067\u304d\u308b\u306f\u305a\uff0e\n\n\u3053\u3053\u307e\u3067\u3067\u304d\u308c\u3070\uff0cdevelopment\u74b0\u5883\u3067\u306e\u958b\u767a\u3068\u3057\u3066\u306f\u5341\u5206\u3067\u304d\u308b\uff0e\n\u4ee5\u964d\u306e\u90e8\u5206\u306f\uff0c\u500b\u4eba\u7684\u306b\u6c17\u306b\u306a\u3063\u305f\u306e\u3067\u3084\u3063\u305f\u304a\u307e\u3051\uff0e\n\n# Apache\u4e0a\u306b\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\n## Vagrantfile\u306e\u518d\u8a2d\u5b9a\n\u4e00\u5ea6\u30db\u30b9\u30c8OS\u306b\u623b\u308a\uff0c\u30db\u30b9\u30c8OS\u304b\u3089\u30b2\u30b9\u30c8OS\u306e80\u756a\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\uff0cVagrantfile\u306e\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\uff0e\n\n```bash:Host\n$ emacs ~/Vagrant/centos7/Vagrantfile\n```\n\n```ruby\nconfig.vm.network \"forwarded_port\", guest: 8000, host: 8000\n```\n\n\u306e\u6240\u3092\uff0c\n\n```ruby\nconfig.vm.network \"forwarded_port\", guest: 80, host: 8000\n```\n\n\u306e\u3088\u3046\u306b\u5909\u66f4\uff0e\n\n\u305d\u306e\u5f8c\uff0c\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u518d\u8d77\u52d5\u3057\uff0c\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\uff0e\n\n```bash:Host\n$ vagrant reload\n$ vagrant ssh\n```\n\n## Apache2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[CentOS7\u6700\u5c0f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089HTTP\u63a5\u7d9a\u304c\u63a5\u7d9a\u3067\u304d\u308b\u307e\u3067](http://qiita.com/tamamius/items/448c350ca34e4db9f6f5)\n\nCentOS\u304c7\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3055\u308c\u305f\u969b\u306b\uff0c\u7ba1\u7406\u7cfb\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5927\u304d\u304f\u5909\u308f\u3063\u305f\u3089\u3057\u3044\uff0e\n\u7d50\u69cb\u6df7\u4e71\u3057\u305f\uff0e\n\n[CentOS7\u3067\u30b5\u30fc\u30d3\u30b9\u306e\u7ba1\u7406\u65b9\u6cd5\u304c\u5909\u308f\u3063\u305f\uff01](http://qiita.com/haisaihiroki/items/c38cb3c0a331db9b6f69)\n\n```bash:Guest\n$ sudo yum -y install httpd\n$ sudo systemctl start httpd.service\n$ sudo systemctl status httpd.service\n```\n\n`systemctl status httpd.service`\u3067\uff0chttpd.service\u304cactive\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\uff0e\n/var/www/html/index.html\u304ccurl\u306a\u3069\u3067\u898b\u3089\u308c\u308b\u304b\u78ba\u8a8d\n\n## \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3059\u308b\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306b\u3064\u3044\u3066\u3082\uff0c\u4ee5\u524d\u306eiptables\u306f\u3042\u307e\u308a\u4f7f\u308f\u306a\u3044\u65b9\u304c\u3088\u304f\uff0c\u4ee3\u308f\u308a\u306b\uff0cfirewalld\u3068\u547c\u3070\u308c\u308b\u65b0\u305f\u306a\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u7528\u3044\u308b\u3068\u3088\u3044\u3089\u3057\u3044\uff0e\n\u4eca\u56de\u306f\u4eee\u60f3\u74b0\u5883\u4e0a\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u306e\u305f\u3081\uff0c\u3068\u308a\u3042\u3048\u305a\u7121\u52b9\u306b\u3057\u3066\u304a\u304f\uff0e\n\u3082\u3061\u308d\u3093\uff0c\u672c\u756a\u30b5\u30fc\u30d0\u3067\u3053\u3093\u306a\u3053t(ry\n\n```bash:Guest\n$ sudo systemctl stop firewalld\n$ systemctl status firewalld\n\n# \u30b5\u30fc\u30d0\u8d77\u52d5\u3068\u540c\u6642\u306bapache\u3092\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n$ sudo systemctl enable httpd.service\n$ sudo systemctl list-unit-files | grep httpd\n\n# \u30b5\u30fc\u30d0\u8d77\u52d5\u3068\u540c\u6642\u306bfirewalld\u3092\u7121\u52b9\u306b\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n$ sudo systemctl disable firewalld.service\n$ sudo systemctl list-unit-files | grep firewall\n```\n\n## Apache\u306e\u8a2d\u5b9a\n[Configuring a Web Server (The Symfony CookBook) ](http://symfony.com/doc/current/cookbook/configuration/web_server_configuration.html)\n\u3054\u4e01\u5be7\u306bApache\uff08\u3068Nginx\uff09\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u306e\u4ed5\u65b9\u307e\u3067\u66f8\u3044\u3066\u3042\u308b\uff0e\n\u4eca\u56de\u306f\u3068\u306b\u304b\u304f\u52d5\u304b\u3059\u3053\u3068\u3092\u76ee\u6a19\u306b\uff0c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u3092\u6d41\u7528\u3059\u308b\uff0e\n\n```bash:Guest\n$ sudo vi /etc/httpd/conf/httpd.conf\n```\n\n```\n<VirtualHost *:80>\n    ServerName domain.tld\n    ServerAlias www.domain.tld\n\n    DocumentRoot /var/www/project/web\n    <Directory /var/www/project/web>\n        AllowOverride All\n        Order Allow,Deny\n        Allow from All\n    </Directory>\n\n    # uncomment the following lines if you install assets as symlinks\n    # or run into problems when compiling LESS/Sass/CoffeScript assets\n    # <Directory /var/www/project>\n    #     Options FollowSymlinks\n    # </Directory>\n    \n    # ErrorLog /var/log/apache2/project_error.log\n    # CustomLog /var/log/apache2/project_access.log\ncombined\n</VirtualHost>\n```\n\nLog\u51fa\u529b\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u3082\u306e\u3092\u8a2d\u5b9a\u3059\u308b\u3079\u304d\u306a\u306e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u304a\u304f\uff0e\n\n## \u30ea\u30ea\u30fc\u30b9\u7528\u306e\u30a2\u30d7\u30ea\u306e\u30a2\u30b8\u30e3\u30b9\u30c8\u30e1\u30f3\u30c8\n\n\u3053\u308c\u3082\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3060\u304c\uff0cApache\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u969b\u306b\u306f\uff0capp/cache\u3068app/logs\u3068\u3044\u30462\u3064\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5bfe\u3057\u3066\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u5fc5\u8981\u3089\u3057\u3044\uff0e\n\n[Installing and Configuring Symfony (The Symfony Book)](http://symfony.com/doc/current/book/installation.html)\n\u306e\uff0c\"Setting up Permissions\"\u306e\u9805\u306e\"3\"\u3092\u53c2\u7167\uff0e\n\u3053\u308c\u306b\u3088\u308a\uff0cApache\u306e\u30e6\u30fc\u30b6\u3068\u958b\u767a\u8005\u306e\u30e6\u30fc\u30b6\u306e\u4e21\u65b9\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3089\u3057\u3044\uff0e\n\n```bash:Guest\n$ HTTPDUSER=`ps aux | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\\  -f1`\n$ sudo setfacl -R -m u:\"$HTTPDUSER\":rwX -m u:`whoami`:rwX app/cache app/logs\n$ sudo setfacl -dR -m u:\"$HTTPDUSER\":rwX -m u:`whoami`:rwX app/cache app/logs\n```\n\n## \u5b9f\u969b\u306b\u30a2\u30af\u30bb\u30b9\n\u30db\u30b9\u30c8OS\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089\uff0c[http://localhost/app/example](http://localhost/app/example)\u306b\u30a2\u30af\u30bb\u30b9\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\"Homepage.\"\u304c\u51fa\u529b\u3055\u308c\u308c\u3070OK\n", "tags": ["vagrant", "Symfony", "PHP5", "centos7", "PHP"]}