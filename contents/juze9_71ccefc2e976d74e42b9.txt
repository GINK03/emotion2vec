{"context": "\n\nLXC\u3092\u4f5c\u6210\uff08\u30db\u30b9\u30c8\u304b\u3089\uff09\npct create 100 /var/lib/vz/template/cache/debian-8.0-standard_8.4-1_amd64.tar.gz \\\n  -ostype debian -hostname CT100 \\\n  -memory 1024 -swap 256 \\\n  -storage local -rootfs 1.5 \\\n  -net0 name=eth0,bridge=vmbr0,hwaddr=00:00:00:00:00:00,ip=192.168.1.2/24,gw=192.168.1.1,ip6=auto,type=veth\n\nWebUI\u3067\u4f5c\u6210\u3059\u308b\u306e\u304c\u9762\u5012\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\nSSH\u8a2d\u5b9a\uff08\u30db\u30b9\u30c8\u304b\u3089\uff09\npct start 100 #\u8d77\u52d5\npct enter 100 #LXC\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u79fb\u52d5\nmkdir -m 700 ~/.ssh #.ssh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u6210\uff08root\u30e6\u30fc\u30b6\u30fc\uff09\nnano ~/.ssh/authorized_keys #SSH\u30c7\u30fc\u30e2\u30f3\u306b\u516c\u958b\u9375\u3092\u767b\u9332\uff08root\u30e6\u30fc\u30b6\u30fc\uff09\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\n\n\n\u521d\u671f\u8a2d\u5b9a\uff08SSH\u63a5\u7d9a\u306eroot\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n#SSH\u30c7\u30fc\u30e2\u30f3\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u7981\u6b62\nnano /etc/ssh/sshd_config\n#>#PasswordAuthentication yes\n#>\u2193\n#>PasswordAuthentication no\n#sed -i -r 's/^#? *(PasswordAuthentication) .*$/\\1 no/' /etc/ssh/sshd_config\n/etc/init.d/ssh restart #SSH\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3057\u3066\u8a2d\u5b9a\u3092\u53cd\u6620\n\n#\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\napt-get update && apt-get -y upgrade && apt-get -y dist-upgrade\n\n#\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\uff08IPv6\u304c\u539f\u56e0\u3067\u9045\u3044\u3068\u304d\uff09\napt-get update -o Acquire::ForceIPv4=true &&\napt-get upgrade -y -o Acquire::ForceIPv4=true &&\napt-get dist-upgrade -y -o Acquire::ForceIPv4=true\n\n\n\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\uff08SSH\u63a5\u7d9a\u306eroot\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n#su\u3092adm\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u5236\u9650\nnano /etc/pam.d/su\n#># auth       required   pam_wheel.so\n#>\u2193\n#>auth       required   pam_wheel.so group=adm\n#sed -i -r 's/^# *(auth +required +pam_wheel\\.so)$/\\1 group=adm/' /etc/pam.d/su\n\n#sudo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\napt-get -y install sudo\n\n#sudo\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4e0d\u8981\u306b\u3059\u308b\nnano /etc/sudoers\n#>%sudo ALL=(ALL:ALL) ALL\n#>\u2193\n#>%sudo ALL=(ALL:ALL) NOPASSWD:ALL\n#sed -i -r 's/^(%sudo[\\t ]+ALL=\\(ALL:ALL\\)[\\t ]+)(ALL)$/\\1NOPASSWD:\\2/' /etc/sudoers\n\n#\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\nuser='user' &&\nuid=9999 &&\nuseradd -u $uid -m -s /bin/bash $user && #\u8ffd\u52a0\ngpasswd -a $user adm && #su\u3092\u8a31\u53ef\ngpasswd -a $user sudo #sudo\u3092\u8a31\u53ef\n\npasswd user #\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\uff08\u5bfe\u8a71\uff09\necho 'user:password' | chpasswd && history -c #\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\uff08\u975e\u5bfe\u8a71\uff09\n\n\n#\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u306eSSH\u8a2d\u5b9a\nsu user #\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\nchmod 700 ~ #home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nmkdir -m 700 ~/.ssh #.ssh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u6210\nnano ~/.ssh/authorized_keys #SSH\u30c7\u30fc\u30e2\u30f3\u306b\u516c\u958b\u9375\u3092\u767b\u9332\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\n\n\n\u305d\u306e\u4ed6\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\uff08SSH\u63a5\u7d9a\u306e\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n\n\u65e5\u672c\u8a9e\u5316\u30fb\u65e5\u672c\u6642\u9593\u5316\n#\u65e5\u672c\u8a9e\u5316\nlocale #\u73fe\u72b6\u3092\u78ba\u8a8d\n\nsudo nano /etc/locale.gen\n#># ja_JP.UTF-8 UTF-8\n#>\u2193\n#>ja_JP.UTF-8 UTF-8\n#sudo sed -i -r 's/^#? *(ja_JP\\.UTF-8 UTF-8)$/\\1/' /etc/locale.gen\nsudo locale-gen\n\nsudo update-locale LANG=ja_JP.UTF-8\nsource /etc/default/locale\n\n#\u65e5\u672c\u6642\u9593\u5316\ncat /etc/timezone #\u73fe\u72b6\u3092\u78ba\u8a8d\n\nsudo echo \"Asia/Tokyo\" > /etc/timezone\nsudo dpkg-reconfigure --frontend noninteractive tzdata\n\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u81ea\u52d5\u5316\u3059\u308b\nsudo apt-get install -y unattended-upgrades apt-listchanges\nsudo nano /etc/apt/apt.conf.d/50unattended-upgrades\n#>//Unattended-Upgrade::Mail \"root\";\n#>\u2193\n#>Unattended-Upgrade::Mail \"root\";\n#sudo sed -i -r 's!^//(Unattended-Upgrade::Mail \"root\";)$!\\1!' /etc/apt/apt.conf.d/50unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n\n\nSamba\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get -y install samba\n\nsudo nano /etc/samba/smb.conf\n#global\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u5192\u982d\u306b\u66f8\u304d\u8db3\u3059\n#   unix charset = UTF-8\n#   dos charset = CP932\n#   load printers = no\n#   disable spoolss = yes\n#   acl allow execute always = yes\n#\n#homes\u30bb\u30af\u30b7\u30e7\u30f3\u306eread only\u3092no\u306b\u3059\u308b\n#   read only = no\n\nsudo /etc/init.d/samba restart #Samba\u3092\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\n\n#Samba\u95a2\u9023\u3067\u30e6\u30fc\u30b6\u30fc\u3092\u7ba1\u7406\nsudo pdbedit -a -u user #Samba\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u767b\u9332\nsudo pdbedit -L #Samba\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u5217\u6319\nsudo pdbedit -a -u user #Samba\u304b\u3089\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\n\n#Windows\u304b\u3089Samba\u306b\u30a2\u30af\u30bb\u30b9\nrundll32.exe keymgr.dll,KRShowKeyMgr #\u30c6\u30b9\u30c8\u6642\u306b\u8cc7\u683c\u60c5\u5831\u3092\u524a\u9664\u3057\u305f\u3044\u3068\u304d\n\n\n\u305d\u306e\u4ed6\u7ba1\u7406\uff08SSH\u63a5\u7d9a\u306e\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n\nSSH\u30c7\u30fc\u30e2\u30f3\u306e\u516c\u958b\u9375\u3092\u5dee\u3057\u66ff\u3048\n#root\u30e6\u30fc\u30b6\u30fc\nsudo nano ~/.ssh/authorized_keys\n\nsudo chmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\n\n#\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\nsudo su user\nnano ~/.ssh/authorized_keys\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nexit\n\n#IP\u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\nip a\n\n\n\u516c\u958b\u9375\u3068\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\n#root\u30e6\u30fc\u30b6\u30fc\nsudo ssh-keygen -N '' -t rsa -f ~/.ssh/id_rsa &&\nsudo ssh-keygen -N '' -t ecdsa -f ~/.ssh/id_ecdsa &&\nsudo ssh-keygen -N '' -t ed25519 -f ~/.ssh/id_ed25519 &&\nhistory -c\n\n#\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\nssh-keygen -N '' -t rsa -f ~/.ssh/id_rsa &&\nssh-keygen -N '' -t ecdsa -f ~/.ssh/id_ecdsa &&\nssh-keygen -N '' -t ed25519 -f ~/.ssh/id_ed25519 &&\nhistory -c\n\n\n\u30e6\u30fc\u30b6\u30fc\u3092\u7ba1\u7406\n#\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\nsudo useradd -u 9999 -m -s /bin/bash user\nsudo su user #\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\nchmod 700 ~ #home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nmkdir ~/.ssh #.ssh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u6210\nchmod 700 ~/.ssh #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nnano ~/.ssh/authorized_keys #SSH\u30c7\u30fc\u30e2\u30f3\u306b\u516c\u958b\u9375\u3092\u767b\u9332\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nexit #\u30ed\u30b0\u30a2\u30a6\u30c8\n\n#\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\nsudo userdel -r user\n\n#\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\nsudo passwd user #\u5bfe\u8a71\necho 'user:password' | sudo chpasswd #\u975e\u5bfe\u8a71\n\n#\u30b7\u30a7\u30eb\u3092\u5909\u66f4\ncat /etc/shells #\u4f7f\u7528\u53ef\u80fd\u306a\u30b7\u30a7\u30eb\u3092\u78ba\u8a8d\nsudo usermod -s /bin/bash user #\u5909\u66f4\n\n#\u30b0\u30eb\u30fc\u30d7\u306e\u8ffd\u52a0\u3068\u524a\u9664\nsudo groupadd -g 9999 group #\u8ffd\u52a0\nsudo groupdel group #\u524a\u9664\n\n#\u30b0\u30eb\u30fc\u30d7\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3068\u524a\u9664\nsudo gpasswd -a user group #\u8ffd\u52a0\nsudo gpasswd -d user group #\u524a\u9664\n\n#\u30e6\u30fc\u30b6\u30fc\u3068\u30b0\u30eb\u30fc\u30d7\u3092\u78ba\u8a8d\ncat /etc/passwd #\u30e6\u30fc\u30b6\u30fc\u3092\u5217\u6319\ncat /etc/group #\u30b0\u30eb\u30fc\u30d7\u3092\u5217\u6319\nid user #\u30e6\u30fc\u30b6\u30fc\u306e\u60c5\u5831\u3092\u8868\u793a\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\nsudo apt-get update && sudo apt-get -y upgrade && sudo apt-get -y dist-upgrade && sudo apt-get -y autoremove && sudo apt-get -y autoclean\n\n#IPv6\u304c\u539f\u56e0\u3067\u9045\u3044\u3068\u304d\nsudo apt-get update -o Acquire::ForceIPv4=true &&\nsudo apt-get upgrade -y -o Acquire::ForceIPv4=true &&\nsudo apt-get dist-upgrade -y -o Acquire::ForceIPv4=true &&\nsudo apt-get autoremove -y -o Acquire::ForceIPv4=true &&\nsudo apt-get autoclean -y -o Acquire::ForceIPv4=true\n\n#LXC\u3092\u4f5c\u6210\uff08\u30db\u30b9\u30c8\u304b\u3089\uff09\n```\npct create 100 /var/lib/vz/template/cache/debian-8.0-standard_8.4-1_amd64.tar.gz \\\n  -ostype debian -hostname CT100 \\\n  -memory 1024 -swap 256 \\\n  -storage local -rootfs 1.5 \\\n  -net0 name=eth0,bridge=vmbr0,hwaddr=00:00:00:00:00:00,ip=192.168.1.2/24,gw=192.168.1.1,ip6=auto,type=veth\n```\nWebUI\u3067\u4f5c\u6210\u3059\u308b\u306e\u304c\u9762\u5012\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n#SSH\u8a2d\u5b9a\uff08\u30db\u30b9\u30c8\u304b\u3089\uff09\n```\npct start 100 #\u8d77\u52d5\npct enter 100 #LXC\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u79fb\u52d5\nmkdir -m 700 ~/.ssh #.ssh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u6210\uff08root\u30e6\u30fc\u30b6\u30fc\uff09\nnano ~/.ssh/authorized_keys #SSH\u30c7\u30fc\u30e2\u30f3\u306b\u516c\u958b\u9375\u3092\u767b\u9332\uff08root\u30e6\u30fc\u30b6\u30fc\uff09\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\n```\n\n#\u521d\u671f\u8a2d\u5b9a\uff08SSH\u63a5\u7d9a\u306eroot\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n```\n#SSH\u30c7\u30fc\u30e2\u30f3\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u7981\u6b62\nnano /etc/ssh/sshd_config\n#>#PasswordAuthentication yes\n#>\u2193\n#>PasswordAuthentication no\n#sed -i -r 's/^#? *(PasswordAuthentication) .*$/\\1 no/' /etc/ssh/sshd_config\n/etc/init.d/ssh restart #SSH\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3057\u3066\u8a2d\u5b9a\u3092\u53cd\u6620\n\n#\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\napt-get update && apt-get -y upgrade && apt-get -y dist-upgrade\n\n#\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\uff08IPv6\u304c\u539f\u56e0\u3067\u9045\u3044\u3068\u304d\uff09\napt-get update -o Acquire::ForceIPv4=true &&\napt-get upgrade -y -o Acquire::ForceIPv4=true &&\napt-get dist-upgrade -y -o Acquire::ForceIPv4=true\n```\n\n#\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\uff08SSH\u63a5\u7d9a\u306eroot\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n```\n#su\u3092adm\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u5236\u9650\nnano /etc/pam.d/su\n#># auth       required   pam_wheel.so\n#>\u2193\n#>auth       required   pam_wheel.so group=adm\n#sed -i -r 's/^# *(auth +required +pam_wheel\\.so)$/\\1 group=adm/' /etc/pam.d/su\n\n#sudo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\napt-get -y install sudo\n\n#sudo\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4e0d\u8981\u306b\u3059\u308b\nnano /etc/sudoers\n#>%sudo\tALL=(ALL:ALL) ALL\n#>\u2193\n#>%sudo\tALL=(ALL:ALL) NOPASSWD:ALL\n#sed -i -r 's/^(%sudo[\\t ]+ALL=\\(ALL:ALL\\)[\\t ]+)(ALL)$/\\1NOPASSWD:\\2/' /etc/sudoers\n\n#\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\nuser='user' &&\nuid=9999 &&\nuseradd -u $uid -m -s /bin/bash $user && #\u8ffd\u52a0\ngpasswd -a $user adm && #su\u3092\u8a31\u53ef\ngpasswd -a $user sudo #sudo\u3092\u8a31\u53ef\n\npasswd user #\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\uff08\u5bfe\u8a71\uff09\necho 'user:password' | chpasswd && history -c #\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\uff08\u975e\u5bfe\u8a71\uff09\n\n\n#\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u306eSSH\u8a2d\u5b9a\nsu user #\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\nchmod 700 ~ #home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nmkdir -m 700 ~/.ssh #.ssh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u6210\nnano ~/.ssh/authorized_keys #SSH\u30c7\u30fc\u30e2\u30f3\u306b\u516c\u958b\u9375\u3092\u767b\u9332\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\n```\n\n#\u305d\u306e\u4ed6\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\uff08SSH\u63a5\u7d9a\u306e\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n##\u65e5\u672c\u8a9e\u5316\u30fb\u65e5\u672c\u6642\u9593\u5316\n```\n#\u65e5\u672c\u8a9e\u5316\nlocale #\u73fe\u72b6\u3092\u78ba\u8a8d\n\nsudo nano /etc/locale.gen\n#># ja_JP.UTF-8 UTF-8\n#>\u2193\n#>ja_JP.UTF-8 UTF-8\n#sudo sed -i -r 's/^#? *(ja_JP\\.UTF-8 UTF-8)$/\\1/' /etc/locale.gen\nsudo locale-gen\n\nsudo update-locale LANG=ja_JP.UTF-8\nsource /etc/default/locale\n\n#\u65e5\u672c\u6642\u9593\u5316\ncat /etc/timezone #\u73fe\u72b6\u3092\u78ba\u8a8d\n\nsudo echo \"Asia/Tokyo\" > /etc/timezone\nsudo dpkg-reconfigure --frontend noninteractive tzdata\n```\n\n##\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u81ea\u52d5\u5316\u3059\u308b\n```\nsudo apt-get install -y unattended-upgrades apt-listchanges\nsudo nano /etc/apt/apt.conf.d/50unattended-upgrades\n#>//Unattended-Upgrade::Mail \"root\";\n#>\u2193\n#>Unattended-Upgrade::Mail \"root\";\n#sudo sed -i -r 's!^//(Unattended-Upgrade::Mail \"root\";)$!\\1!' /etc/apt/apt.conf.d/50unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n```\n\n##Samba\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\nsudo apt-get -y install samba\n\nsudo nano /etc/samba/smb.conf\n#global\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u5192\u982d\u306b\u66f8\u304d\u8db3\u3059\n#   unix charset = UTF-8\n#   dos charset = CP932\n#   load printers = no\n#   disable spoolss = yes\n#   acl allow execute always = yes\n#\n#homes\u30bb\u30af\u30b7\u30e7\u30f3\u306eread only\u3092no\u306b\u3059\u308b\n#   read only = no\n\nsudo /etc/init.d/samba restart #Samba\u3092\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\n\n#Samba\u95a2\u9023\u3067\u30e6\u30fc\u30b6\u30fc\u3092\u7ba1\u7406\nsudo pdbedit -a -u user #Samba\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u767b\u9332\nsudo pdbedit -L #Samba\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u5217\u6319\nsudo pdbedit -a -u user #Samba\u304b\u3089\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\n\n#Windows\u304b\u3089Samba\u306b\u30a2\u30af\u30bb\u30b9\nrundll32.exe keymgr.dll,KRShowKeyMgr #\u30c6\u30b9\u30c8\u6642\u306b\u8cc7\u683c\u60c5\u5831\u3092\u524a\u9664\u3057\u305f\u3044\u3068\u304d\n```\n\n#\u305d\u306e\u4ed6\u7ba1\u7406\uff08SSH\u63a5\u7d9a\u306e\u7ba1\u7406\u7528\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\uff09\n##SSH\u30c7\u30fc\u30e2\u30f3\u306e\u516c\u958b\u9375\u3092\u5dee\u3057\u66ff\u3048\n```\n#root\u30e6\u30fc\u30b6\u30fc\nsudo nano ~/.ssh/authorized_keys\n\nsudo chmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\n\n#\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\nsudo su user\nnano ~/.ssh/authorized_keys\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nexit\n\n#IP\u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\nip a\n```\n\n##\u516c\u958b\u9375\u3068\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\n```\n#root\u30e6\u30fc\u30b6\u30fc\nsudo ssh-keygen -N '' -t rsa -f ~/.ssh/id_rsa &&\nsudo ssh-keygen -N '' -t ecdsa -f ~/.ssh/id_ecdsa &&\nsudo ssh-keygen -N '' -t ed25519 -f ~/.ssh/id_ed25519 &&\nhistory -c\n\n#\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\nssh-keygen -N '' -t rsa -f ~/.ssh/id_rsa &&\nssh-keygen -N '' -t ecdsa -f ~/.ssh/id_ecdsa &&\nssh-keygen -N '' -t ed25519 -f ~/.ssh/id_ed25519 &&\nhistory -c\n```\n\n##\u30e6\u30fc\u30b6\u30fc\u3092\u7ba1\u7406\n```\n#\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\nsudo useradd -u 9999 -m -s /bin/bash user\nsudo su user #\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\nchmod 700 ~ #home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nmkdir ~/.ssh #.ssh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u6210\nchmod 700 ~/.ssh #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nnano ~/.ssh/authorized_keys #SSH\u30c7\u30fc\u30e2\u30f3\u306b\u516c\u958b\u9375\u3092\u767b\u9332\nchmod 600 ~/.ssh/authorized_keys #\u672c\u4eba\u3060\u3051\u8aad\u307f\u66f8\u304d\u53ef\u306b\nexit #\u30ed\u30b0\u30a2\u30a6\u30c8\n\n#\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\nsudo userdel -r user\n\n#\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\nsudo passwd user #\u5bfe\u8a71\necho 'user:password' | sudo chpasswd #\u975e\u5bfe\u8a71\n\n#\u30b7\u30a7\u30eb\u3092\u5909\u66f4\ncat /etc/shells #\u4f7f\u7528\u53ef\u80fd\u306a\u30b7\u30a7\u30eb\u3092\u78ba\u8a8d\nsudo usermod -s /bin/bash user #\u5909\u66f4\n\n#\u30b0\u30eb\u30fc\u30d7\u306e\u8ffd\u52a0\u3068\u524a\u9664\nsudo groupadd -g 9999 group #\u8ffd\u52a0\nsudo groupdel group #\u524a\u9664\n\n#\u30b0\u30eb\u30fc\u30d7\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3068\u524a\u9664\nsudo gpasswd -a user group #\u8ffd\u52a0\nsudo gpasswd -d user group #\u524a\u9664\n\n#\u30e6\u30fc\u30b6\u30fc\u3068\u30b0\u30eb\u30fc\u30d7\u3092\u78ba\u8a8d\ncat /etc/passwd #\u30e6\u30fc\u30b6\u30fc\u3092\u5217\u6319\ncat /etc/group #\u30b0\u30eb\u30fc\u30d7\u3092\u5217\u6319\nid user #\u30e6\u30fc\u30b6\u30fc\u306e\u60c5\u5831\u3092\u8868\u793a\n```\n\n##\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\n```\nsudo apt-get update && sudo apt-get -y upgrade && sudo apt-get -y dist-upgrade && sudo apt-get -y autoremove && sudo apt-get -y autoclean\n\n#IPv6\u304c\u539f\u56e0\u3067\u9045\u3044\u3068\u304d\nsudo apt-get update -o Acquire::ForceIPv4=true &&\nsudo apt-get upgrade -y -o Acquire::ForceIPv4=true &&\nsudo apt-get dist-upgrade -y -o Acquire::ForceIPv4=true &&\nsudo apt-get autoremove -y -o Acquire::ForceIPv4=true &&\nsudo apt-get autoclean -y -o Acquire::ForceIPv4=true\n```\n", "tags": ["proxmox", "Debian", "lxc"]}