{"context": " More than 1 year has passed since last update.GitLab\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u7c21\u5358\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u305d\u306eGitLab Omnibus\u3067\u3082\u5229\u7528\u3055\u308c\u3066\u3044\u308b\nCookbook\u306f\u7c21\u5358\u306bSSL\u304c\u8a2d\u5b9a\u3055\u308c\u305fGitLab\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nPrepare\n\u6700\u521d\u306b\u30de\u30b7\u30f3\u3068\u30c9\u30e1\u30a4\u30f3\u3068\u8a3c\u660e\u66f8\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n\nMachne\nAWS\u3084\u3055\u304f\u3089\u306eVPS\u7b49\u3067\u30d1\u30d6\u30ea\u30c3\u30af\u306b\u30de\u30b7\u30f3\u3092\u4f5c\u308a\u307e\u3059\u3002\n(\u4eca\u56de\u306eOS\u306fUbuntu 12.04\u3092\u5229\u7528\u3057\u307e\u3059\u3002)\n\nSSH\n\u30ed\u30fc\u30ab\u30eb\u3068\u30ea\u30e2\u30fc\u30c8\u306eSSH\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u7981\u6b62\u3059\u308b\u306b\u306f\nsshd_config\u306ePasswordAuthentication\u3092no\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n$ ssh ubuntu@example.com mkdir .ssh\n$ scp ~/.ssh/id_rsa.pub ubuntu@example.com:.ssh/authorized_keys\n$ cat << __EOS__ >> ~/.ssh/config\nHost example.com\n  User ubuntu\n  IdentityFile ~/.ssh/id_rsa\n__EOS__\n$ ssh example.com\nubuntu@example:~$ sudo editor /etc/ssh/sshd_config\nubuntu@example:~$ sudo service ssh restart\n\n\nDomain\n\u304a\u540d\u524d.com\u3084Do\u30ec\u30b8\u7b49\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n(DNS\u306e\u8a2d\u5b9a\u3067SPF\u30ec\u30b3\u30fc\u30c9\u3092\u767b\u9332\u3057\u307e\u3057\u3087\u3046\u3002)\n\nSender Policy Framework\nnslookup\u30b3\u30de\u30f3\u30c9\u3067TXT\u30ec\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ nslookup -q=txt example.com\nServer:   192.168.0.1\nAddress:  192.168.0.1#53\n\nNon-authoritative answer:\nexample.com text = \"v=spf1 ip4:93.184.216.119 -all\"\n\n\nCertificate\n\u30b5\u30a4\u30d0\u30fc\u30c8\u30e9\u30b9\u30c8\u3084BIZCERT\u7b49\u3067\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n(\u4eca\u56de\u306f\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3057\u307e\u3059\u3002)\n\nSelf-signed certificate\nopenssl\u30b3\u30de\u30f3\u30c9\u3067\u81ea\u5df1\u7f72\u540d\u8a3c\u660e(\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ openssl genrsa -out server.key 2048\n$ openssl req -new -key server.key -out server.csr\n$ openssl rsa -in server.key -out server.key\n$ openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt\n\n\u79d8\u5bc6\u9375\u3068\u8a3c\u660e\u66f8\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u5f8c\u307b\u3069\u5229\u7528\u3057\u307e\u3059\u3002\n\n\n\nFiles\n\u5185\u5bb9\n\u88dc\u8db3\n\n\n\n\nserver.key\nRSA PRIVATE KEY\n\u79d8\u5bc6\u9375\n\n\nserver.csr\nCERTIFICATE REQUEST\n\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42\n\n\nserver.crt\nCERTIFICATE\n\u8a3c\u660e\u66f8\n\n\n\n\nDelivered\n\nChef Solo\n\u6b21\u306fChef\u306e\u30c4\u30fc\u30eb\u3067GitLab\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nDownload\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u306fknife-solo\u3068Berkshelf\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n$ gem install berkshelf\n$ gem install knife-solo\n$ knife configure\n$ knife solo init ./gitlab_chef\n$ cd ./gitlab_chef/\n$ curl -o Berksfile https://gitlab.com/gitlab-org/cookbook-gitlab/raw/master/Berksfile\n$ sed -i.bak '/^metadata$/d' Berksfile\n$ echo \"cookbook 'gitlab', git: 'https://gitlab.com/gitlab-org/cookbook-gitlab.git'\" >> Berksfile\n$ berks vendor\n\n\nProvision\nssl_certificate\u3068ssl_certificate_key\u306b\u8a3c\u660e\u66f8\u3068\u79d8\u5bc6\u9375\u306e\u5185\u5bb9\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002(\u6539\u884c\u306f\\n\u3067\u3059\u3002)\nknife solo\u30b3\u30de\u30f3\u30c9\u3067GitLab\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n$ cat << __EOS__ > ./nodes/example.com.json\n{\n  \"gitlab\": {\n    \"host\": \"example.com\",\n    \"port\": \"443\",\n    \"email_from\": \"gitlab@example.com\",\n    \"url\": \"https://git.example.com/\",\n    \"ssl_certificate\": \"-----BEGIN CERTIFICATE-----\\nfoo\\nbar\\nbaz\\n-----END CERTIFICATE-----\",\n    \"ssl_certificate_key\": \"-----BEGIN RSA PRIVATE KEY-----\\nqux\\nquux\\ncorge\\n-----END RSA PRIVATE KEY-----\"\n  }\n  \"run_list\": [\n    \"gitlab::default\"\n  ]\n}\n__EOS__\n$ knife solo prepare example.com --bootstrap-version 11.4.4\n$ knife solo cook example.com\n\n\nSelf-signed certificate\n\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u306fconfig.yml\u306eself_signed_cert\u3092true\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n$ ssh example.com\nubuntu@example:~$ sudo editor /home/git/gitlab-shell/config.yml\n\n\nMail(SMTP)\n\nPostfix\n\u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u306bPostfix\u3092\u5229\u7528\u3057\u307e\u3059\u3002main.cf\u3092\u7de8\u96c6\u3057\u3066\u30ea\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u3002\n$ ssh example.com\nubuntu@example:~$ sudo apt-get install postfix\nubuntu@example:~$ sudo editor /etc/postfix/main.cf\nubuntu@example:~$ sudo service postfix restart\n\n\nGitlab\nproduction.rb\u306econfig.action_mailer.delivery_method = :sendmail\u306e\n\u6b21\u884c\u306b\u4e0b\u8a18\u306econfig.action_mailer.sendmail_settings\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nconfig.action_mailer.sendmail_settings = {\n  location: '/usr/sbin/sendmail',\n  arguments: '-i -t'\n}\n\nproduction.rb\u3092\u7de8\u96c6\u3057\u3066\u30ea\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u3002\n$ ssh example.com\nubuntu@example:~$ sudo editor /home/git/gitlab/config/environments/production.rb\nubuntu@example:~$ sudo service gitlab restart\n\n\nInspect\n\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u3066\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3055\u3089\u306b\u516c\u958b\u9375\u3092\u8ffd\u52a0\u3059\u308b\u30683\u901a\u306e\u30e1\u30fc\u30eb\u304c\u53d7\u4fe1\u3055\u308c\u307e\u3059\u3002\n\n\n\nActions\nMail Subject\n\n\n\n\nNew User\nAccount was created for you\n\n\nNew project\nAccess to project was granted\n\n\nAdd SSH Key\nSSH key was added to your account\n\n\n\n\u3053\u308c\u3067 \u30aa\u30ec\u30aa\u30ecGitLab \u304c\u5b8c\u6210\u3067\u3059\u3002\n\n\nTips\n\nVagrant\nVagrant\u3068Amazon EC2\u3067\u306f\u3082\u3063\u3068\u306b\u7c21\u5358\u306bGitLab\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n\nDownload\nVagrantfile\u306eaccess_key_id\u3001secret_access_key\u3084private_key_path\u3001keypair_name\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n$ gem install berkshelf\n$ vagrant plugin install vagrant-berkshelf\n$ vagrant plugin install vagrant-omnibus\n$ vagrant plugin install vagrant-aws\n$ vagrant box add dummy https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box\n$ git clone https://gitlab.com/gitlab-org/cookbook-gitlab.git ./gitlab\n$ cd ./gitlab/\n$ cp ./example/Vagrantfile_aws ./Vagrantfile\n$ editor ./Vagrantfile\n\n\nProvision\nVagrantfile\u306echef.json\u3084chef.run_list\u3092Chef Solo\u3068\u540c\u3058\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\nvagrant provision\u30b3\u30de\u30f3\u30c9\u3067GitLab\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n$ vagrant up --provider=aws\n$ eval $(vagrant ssh-config | awk '/HostName/ {print \"HostName=\" $2}')\n$ sed -i.bak \"s/example.com/$HostName/g\" Vagrantfile\n$ sed -i.bak 's/chef.run_list = \\[\\]/chef.run_list = \\[\"gitlab::default\"\\]/g' Vagrantfile\n$ vagrant provision\n\nGitLab.org\u306eProduction\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n[GitLab](https://about.gitlab.com/)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u7c21\u5358\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u305d\u306e[GitLab Omnibus](https://about.gitlab.com/downloads/)\u3067\u3082\u5229\u7528\u3055\u308c\u3066\u3044\u308b\n[Cookbook](https://gitlab.com/gitlab-org/cookbook-gitlab/)\u306f\u7c21\u5358\u306bSSL\u304c\u8a2d\u5b9a\u3055\u308c\u305fGitLab\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n# Prepare\n\n\u6700\u521d\u306b`\u30de\u30b7\u30f3`\u3068`\u30c9\u30e1\u30a4\u30f3`\u3068`\u8a3c\u660e\u66f8`\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n\n## Machne\n\n[AWS](http://aws.amazon.com/jp/)\u3084[\u3055\u304f\u3089\u306eVPS](http://vps.sakura.ad.jp/)\u7b49\u3067\u30d1\u30d6\u30ea\u30c3\u30af\u306b\u30de\u30b7\u30f3\u3092\u4f5c\u308a\u307e\u3059\u3002\n(\u4eca\u56de\u306e`OS`\u306f`Ubuntu 12.04`\u3092\u5229\u7528\u3057\u307e\u3059\u3002)\n\n### SSH\n\n\u30ed\u30fc\u30ab\u30eb\u3068\u30ea\u30e2\u30fc\u30c8\u306eSSH\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u7981\u6b62\u3059\u308b\u306b\u306f\n`sshd_config`\u306e`PasswordAuthentication`\u3092`no`\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```bash\n$ ssh ubuntu@example.com mkdir .ssh\n$ scp ~/.ssh/id_rsa.pub ubuntu@example.com:.ssh/authorized_keys\n$ cat << __EOS__ >> ~/.ssh/config\nHost example.com\n  User ubuntu\n  IdentityFile ~/.ssh/id_rsa\n__EOS__\n$ ssh example.com\nubuntu@example:~$ sudo editor /etc/ssh/sshd_config\nubuntu@example:~$ sudo service ssh restart\n```\n\n## Domain\n\n[\u304a\u540d\u524d.com](http://www.onamae.com/)\u3084[Do\u30ec\u30b8](http://do-reg.jp/)\u7b49\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n(`DNS`\u306e\u8a2d\u5b9a\u3067[SPF\u30ec\u30b3\u30fc\u30c9](http://salt.iajapan.org/wpmu/anti_spam/admin/tech/explanation/spf/)\u3092\u767b\u9332\u3057\u307e\u3057\u3087\u3046\u3002)\n\n### Sender Policy Framework\n\n`nslookup`\u30b3\u30de\u30f3\u30c9\u3067TXT\u30ec\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n$ nslookup -q=txt example.com\nServer:   192.168.0.1\nAddress:  192.168.0.1#53\n\nNon-authoritative answer:\nexample.com text = \"v=spf1 ip4:93.184.216.119 -all\"\n```\n\n## Certificate\n\n[\u30b5\u30a4\u30d0\u30fc\u30c8\u30e9\u30b9\u30c8](https://www.cybertrust.ne.jp/)\u3084[BIZCERT](http://www.fsv.jp/function/ssl/bizcert/)\u7b49\u3067\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n(\u4eca\u56de\u306f\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3057\u307e\u3059\u3002)\n\n### Self-signed certificate\n\n`openssl`\u30b3\u30de\u30f3\u30c9\u3067\u81ea\u5df1\u7f72\u540d\u8a3c\u660e(\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\n$ openssl genrsa -out server.key 2048\n$ openssl req -new -key server.key -out server.csr\n$ openssl rsa -in server.key -out server.key\n$ openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt\n```\n\n`\u79d8\u5bc6\u9375`\u3068`\u8a3c\u660e\u66f8`\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u5f8c\u307b\u3069\u5229\u7528\u3057\u307e\u3059\u3002\n\n| Files      | \u5185\u5bb9                | \u88dc\u8db3           |\n|:----------:|:--------------------|:---------------|\n| server.key | RSA PRIVATE KEY     | \u79d8\u5bc6\u9375         |\n| server.csr | CERTIFICATE REQUEST | \u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42 |\n| server.crt | CERTIFICATE         | \u8a3c\u660e\u66f8         |\n\n# Delivered\n\n## Chef Solo\n\n\u6b21\u306f[Chef](http://www.getchef.com/)\u306e\u30c4\u30fc\u30eb\u3067GitLab\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n### Download\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u306f[knife-solo](http://matschaffer.github.io/knife-solo/)\u3068[Berkshelf](http://berkshelf.com/)\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```bash\n$ gem install berkshelf\n$ gem install knife-solo\n$ knife configure\n$ knife solo init ./gitlab_chef\n$ cd ./gitlab_chef/\n$ curl -o Berksfile https://gitlab.com/gitlab-org/cookbook-gitlab/raw/master/Berksfile\n$ sed -i.bak '/^metadata$/d' Berksfile\n$ echo \"cookbook 'gitlab', git: 'https://gitlab.com/gitlab-org/cookbook-gitlab.git'\" >> Berksfile\n$ berks vendor\n```\n\n### Provision\n\n`ssl_certificate`\u3068`ssl_certificate_key`\u306b`\u8a3c\u660e\u66f8`\u3068`\u79d8\u5bc6\u9375`\u306e\u5185\u5bb9\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002(\u6539\u884c\u306f`\\n`\u3067\u3059\u3002)\n`knife solo`\u30b3\u30de\u30f3\u30c9\u3067GitLab\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\n```json\n$ cat << __EOS__ > ./nodes/example.com.json\n{\n  \"gitlab\": {\n    \"host\": \"example.com\",\n    \"port\": \"443\",\n    \"email_from\": \"gitlab@example.com\",\n    \"url\": \"https://git.example.com/\",\n    \"ssl_certificate\": \"-----BEGIN CERTIFICATE-----\\nfoo\\nbar\\nbaz\\n-----END CERTIFICATE-----\",\n    \"ssl_certificate_key\": \"-----BEGIN RSA PRIVATE KEY-----\\nqux\\nquux\\ncorge\\n-----END RSA PRIVATE KEY-----\"\n  }\n  \"run_list\": [\n    \"gitlab::default\"\n  ]\n}\n__EOS__\n$ knife solo prepare example.com --bootstrap-version 11.4.4\n$ knife solo cook example.com\n```\n\n### Self-signed certificate\n\n\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u306f`config.yml`\u306e`self_signed_cert`\u3092`true`\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```bash\n$ ssh example.com\nubuntu@example:~$ sudo editor /home/git/gitlab-shell/config.yml\n```\n\n### Mail(SMTP)\n\n#### Postfix\n\n\u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u306b`Postfix`\u3092\u5229\u7528\u3057\u307e\u3059\u3002`main.cf`\u3092\u7de8\u96c6\u3057\u3066\u30ea\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```bash\n$ ssh example.com\nubuntu@example:~$ sudo apt-get install postfix\nubuntu@example:~$ sudo editor /etc/postfix/main.cf\nubuntu@example:~$ sudo service postfix restart\n```\n\n#### Gitlab\n\n`production.rb`\u306e`config.action_mailer.delivery_method = :sendmail`\u306e\n\u6b21\u884c\u306b\u4e0b\u8a18\u306e`config.action_mailer.sendmail_settings`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```yml\nconfig.action_mailer.sendmail_settings = {\n  location: '/usr/sbin/sendmail',\n  arguments: '-i -t'\n}\n```\n\n`production.rb`\u3092\u7de8\u96c6\u3057\u3066\u30ea\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```bash\n$ ssh example.com\nubuntu@example:~$ sudo editor /home/git/gitlab/config/environments/production.rb\nubuntu@example:~$ sudo service gitlab restart\n```\n\n# Inspect\n\n\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u3066\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3055\u3089\u306b\u516c\u958b\u9375\u3092\u8ffd\u52a0\u3059\u308b\u30683\u901a\u306e\u30e1\u30fc\u30eb\u304c\u53d7\u4fe1\u3055\u308c\u307e\u3059\u3002\n\n| Actions     | Mail Subject                      |\n|:------------|:----------------------------------|\n| New User    | Account was created for you       |\n| New project | Access to project was granted     |\n| Add SSH Key | SSH key was added to your account |\n\n\u3053\u308c\u3067 **\u30aa\u30ec\u30aa\u30ecGitLab** \u304c\u5b8c\u6210\u3067\u3059\u3002\n\n![logo-black](https://raw.githubusercontent.com/gitlabhq/gitlabhq/master/app/assets/images/logo-black.png)\n\n# Tips\n\n## Vagrant\n\n[Vagrant](http://www.vagrantup.com/)\u3068[Amazon EC2](http://aws.amazon.com/jp/ec2/)\u3067\u306f\u3082\u3063\u3068\u306b\u7c21\u5358\u306bGitLab\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n\n### Download\n\n`Vagrantfile`\u306e`access_key_id`\u3001`secret_access_key`\u3084`private_key_path`\u3001`keypair_name`\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```bash\n$ gem install berkshelf\n$ vagrant plugin install vagrant-berkshelf\n$ vagrant plugin install vagrant-omnibus\n$ vagrant plugin install vagrant-aws\n$ vagrant box add dummy https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box\n$ git clone https://gitlab.com/gitlab-org/cookbook-gitlab.git ./gitlab\n$ cd ./gitlab/\n$ cp ./example/Vagrantfile_aws ./Vagrantfile\n$ editor ./Vagrantfile\n```\n\n### Provision\n\n`Vagrantfile`\u306e`chef.json`\u3084`chef.run_list`\u3092`Chef Solo`\u3068\u540c\u3058\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n`vagrant provision`\u30b3\u30de\u30f3\u30c9\u3067GitLab\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\n```bash\n$ vagrant up --provider=aws\n$ eval $(vagrant ssh-config | awk '/HostName/ {print \"HostName=\" $2}')\n$ sed -i.bak \"s/example.com/$HostName/g\" Vagrantfile\n$ sed -i.bak 's/chef.run_list = \\[\\]/chef.run_list = \\[\"gitlab::default\"\\]/g' Vagrantfile\n$ vagrant provision\n```\n\nGitLab.org\u306e[Production](https://gitlab.com/gitlab-org/cookbook-gitlab/blob/master/doc/production.md)\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n\n", "tags": ["chef", "vagrant", "GitLab", "AWS"]}