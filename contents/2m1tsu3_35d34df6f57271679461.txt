{"context": " More than 1 year has passed since last update.CentOS7\u306bOpenStack\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3068\u304d\u306b\u3001\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u7b87\u6240\u306e\u30e1\u30e2\u66f8\u304d\u3067\u3059\u3002\n\n\u30a4\u30e1\u30fc\u30b8\u4f5c\u6210\u6642\u30a8\u30e9\u30fc\uff08virt-install\uff09\nProblem:\nERROR \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f: 'default' \u306b\u4e00\u81f4\u3059\u308b\u540d\u524d\u3092\u6301\u3064\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u3042\u308a\u307e\u305b\u3093\n\nAnswer:\n(bash)# virsh net-define /usr/share/libvirt/networks/default.xml\n(bash)# virsh net-autostart default\n(bash)# virsh net-start default\n\n\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u958b\u3051\u306a\u3044\nProblem:\n\n/var/log/httpd/error_log\nImportError: Could not import settings 'openstack_dashboard.settings' (Is it on sys.path? Is there an import error in the settings file?): No module named angular_cookies\n\n\nAnswer:\n(bash)# pip install XStatic_Anglar_Cookies\n\n\nnovnc\u304c127.0.0.1\u306b\u7e4b\u3054\u3046\u3068\u3059\u308b\nProblem:\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u4ee5\u5916\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u4e0a\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u3053\u3046\u3068\u3059\u308b\u3068\u3001127.0.0.1:6080\u306b\u7e4b\u3044\u3067\u3044\u308b\u3002\nAnswer:\n\u4ee5\u4e0b\u3001\u8ffd\u52a0\u3059\u308b\u3002\n\n/etc/nova/nova.conf(compute_node)\nvnc_enabled=True\nnovncproxy_base_url=http://Controller_IP:6080/vnc_auto.html\nvncserver_listen=0.0.0.0\nvncserver_proxyclient_address=Controller_IP\n#Controller_IP\u306f\u9069\u5b9c\u5909\u66f4\u306e\u3053\u3068\n\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u6642\u30a8\u30e9\u30fc\nProblem:\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u3066\n\u30a8\u30e9\u30fc: \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9 \"ins01\" \u306e\u8d77\u52d5\u306b\u5931\u6557\u3057\u307e\u3057\u305f: \u5f8c\u304b\u3089\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044 [\u30a8\u30e9\u30fc: Build of instance 5e9fcc9c-1b2f-44ad-af6f-b51d7637696b aborted: Failed to allocate the network(s), not rescheduling.]\n/var/log/nova/nova-copute.log in node01\nInstance fails to spawn with Unexpected vif_type=binding_failed [closed]\n\nAnswer:\nopenvswitch\u3092\u5165\u308c\u76f4\u3059\u3001\u307e\u305f\u306fbr-int\u3092\u4f5c\u308a\u76f4\u3059\u3002\n\nnoVNC\u30a8\u30e9\u30fc\nProblem:\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306enoVNC\u304c\u7e4b\u304c\u3089\u306a\u3044\u3002\nAnswer:\n\n/etc/nova/nova.conf(compute.node)\nvncserver_listen = 0.0.0.0\n\n\n\n\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\nProblem:\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u5c4a\u304b\u306a\u3044\u3002\nError: External network b7169915-050a-4c67-83fc-9ed28ae7dc0f is not reachable from subnet b7169915-050a-4c67-83fc-9ed28ae7dc0f. Therefore, cannot associate Port 4cd7cc7c-db9f-4fcc-86d4-a05607f0eb74 with a Floating IP.\n\nAnswer:\n\n/etc/neutron/l3-agent.ini\n[DEFAULT]\n\u2026\ngateway_external_network_id = EXTERNAL_NETWORK_ID\nexternal_network_bridge = br-ex\n\u2026\n\n\n\n\n/etc/neutron/plugins/ml2/ml2_conf.ini\n[ml2]\n\u2026\ntype_drivers = vxlan,vlan,flat\ntenant_network_types = vxlan,vlan\nmechanism_drivers =openvswitch\n\u2026\n[ml2_type_flat]\nflat_networks = external\n\u2026\n[ovs]\nbridge_mappings = external:br-ex\n\n\n(bash)# neutron net-create public --router:external --provider:physical_network external --provider:network_type flat\n\n(bash)# neutron subnet-create public 192.168.0.0/24 --name public-subnet   --allocation-pool start=192.168.0.101,end=192.168.0.200   --disable-dhcp --gateway 192.168.0.1\n\n(bash)# neutron router-create external_router\n(bash)# neutron router-gateway-set external_router public\n\n\n\u3069\u3053\u304b\u304c\u304a\u304b\u3057\u304f\u306a\u308a\u307e\u3057\u305f\uff01\nProblem:\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3059\u308b\u3068\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u5165\u308c\u306a\u3044\u3002\nAnswer:\nCookie\u3092\u6d88\u53bb\u3057\u307e\u3059\u3002\n\u3000\u3000\n\u30e1\u30e2\u66f8\u304d\u968f\u6642\u8ffd\u52a0\u4e88\u5b9a\u3002\nCentOS7\u306bOpenStack\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3068\u304d\u306b\u3001\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u7b87\u6240\u306e\u30e1\u30e2\u66f8\u304d\u3067\u3059\u3002\n\n##\u30a4\u30e1\u30fc\u30b8\u4f5c\u6210\u6642\u30a8\u30e9\u30fc\uff08virt-install\uff09\n**Problem:**\n\n```text:\nERROR \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f: 'default' \u306b\u4e00\u81f4\u3059\u308b\u540d\u524d\u3092\u6301\u3064\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u3042\u308a\u307e\u305b\u3093\n```\n\n**Answer:**\n\n```text:\n(bash)# virsh net-define /usr/share/libvirt/networks/default.xml\n(bash)# virsh net-autostart default\n(bash)# virsh net-start default\n```\n\n##\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u958b\u3051\u306a\u3044\n**Problem:**\n\n```text:/var/log/httpd/error_log\nImportError: Could not import settings 'openstack_dashboard.settings' (Is it on sys.path? Is there an import error in the settings file?): No module named angular_cookies\n```\n\n**Answer:**\n\n```text:\n(bash)# pip install XStatic_Anglar_Cookies\n```\n\n##novnc\u304c127.0.0.1\u306b\u7e4b\u3054\u3046\u3068\u3059\u308b\n**Problem:**\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u4ee5\u5916\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u4e0a\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u3053\u3046\u3068\u3059\u308b\u3068\u3001127.0.0.1:6080\u306b\u7e4b\u3044\u3067\u3044\u308b\u3002\n\n\n**Answer:**\n\u4ee5\u4e0b\u3001\u8ffd\u52a0\u3059\u308b\u3002\n\n```py:/etc/nova/nova.conf(compute_node)\nvnc_enabled=True\nnovncproxy_base_url=http://Controller_IP:6080/vnc_auto.html\nvncserver_listen=0.0.0.0\nvncserver_proxyclient_address=Controller_IP\n#Controller_IP\u306f\u9069\u5b9c\u5909\u66f4\u306e\u3053\u3068\n```\n\n##\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u6642\u30a8\u30e9\u30fc\n**Problem:**\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u3066\n\n```text:\n\u30a8\u30e9\u30fc: \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9 \"ins01\" \u306e\u8d77\u52d5\u306b\u5931\u6557\u3057\u307e\u3057\u305f: \u5f8c\u304b\u3089\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044 [\u30a8\u30e9\u30fc: Build of instance 5e9fcc9c-1b2f-44ad-af6f-b51d7637696b aborted: Failed to allocate the network(s), not rescheduling.]\n/var/log/nova/nova-copute.log in node01\nInstance fails to spawn with Unexpected vif_type=binding_failed [closed]\n```\n\n**Answer:**\nopenvswitch\u3092\u5165\u308c\u76f4\u3059\u3001\u307e\u305f\u306fbr-int\u3092\u4f5c\u308a\u76f4\u3059\u3002\n\n##noVNC\u30a8\u30e9\u30fc\n**Problem:**\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306enoVNC\u304c\u7e4b\u304c\u3089\u306a\u3044\u3002\n\n**Answer:**\n\n```text:/etc/nova/nova.conf(compute.node)\nvncserver_listen = 0.0.0.0\n```\n\n##\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\n**Problem:**\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u5c4a\u304b\u306a\u3044\u3002\n\n```text:\nError: External network b7169915-050a-4c67-83fc-9ed28ae7dc0f is not reachable from subnet b7169915-050a-4c67-83fc-9ed28ae7dc0f. Therefore, cannot associate Port 4cd7cc7c-db9f-4fcc-86d4-a05607f0eb74 with a Floating IP.\n```\n\n**Answer:**\n\n```text:/etc/neutron/l3-agent.ini\n[DEFAULT]\n\u2026\ngateway_external_network_id = EXTERNAL_NETWORK_ID\nexternal_network_bridge = br-ex\n\u2026\n\n```\n\n```text:/etc/neutron/plugins/ml2/ml2_conf.ini\n[ml2]\n\u2026\ntype_drivers = vxlan,vlan,flat\ntenant_network_types = vxlan,vlan\nmechanism_drivers =openvswitch\n\u2026\n[ml2_type_flat]\nflat_networks = external\n\u2026\n[ovs]\nbridge_mappings = external:br-ex\n```\n\n```text:\n(bash)# neutron net-create public --router:external --provider:physical_network external --provider:network_type flat\n\n(bash)# neutron subnet-create public 192.168.0.0/24 --name public-subnet   --allocation-pool start=192.168.0.101,end=192.168.0.200   --disable-dhcp --gateway 192.168.0.1\n\n(bash)# neutron router-create external_router\n(bash)# neutron router-gateway-set external_router public\n```\n\n##\u3069\u3053\u304b\u304c\u304a\u304b\u3057\u304f\u306a\u308a\u307e\u3057\u305f\uff01\n**Problem:**\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3059\u308b\u3068\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u5165\u308c\u306a\u3044\u3002\n\n**Answer:**\nCookie\u3092\u6d88\u53bb\u3057\u307e\u3059\u3002\n\n\u3000\u3000\n\n\u30e1\u30e2\u66f8\u304d\u968f\u6642\u8ffd\u52a0\u4e88\u5b9a\u3002\n", "tags": ["openstack", "CentOS"]}