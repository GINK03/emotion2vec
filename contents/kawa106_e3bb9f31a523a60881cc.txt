{"tags": ["AndroidStudio", "android\u958b\u767a"], "context": " More than 1 year has passed since last update.(Android Studio 0.8.14) PreferenceActivity\u304c\u4f5c\u308c\u307e\u3059\u304c\u3001\u4e2d\u8eab\u304c\u307b\u3068\u3093\u3069Deprecated\u3063\u3066\u306a\u3093\u3068\u304b\u306a\u3089\u3093\u306e\u304b\u3044\uff01\n\n\u5c02\u7528\u306eActivity\u3092\u4f5c\u308b\nPreferenceFragment\u3092\u4f5c\u308b\n\u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u3084\u308b\n\n\u3053\u308c\u3067\u3044\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u5c02\u7528\u306eActivity\u3092\u4f5c\u308b\n\napp\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001New \u2192 Activity \u2192 Blank Activity\u3092\u4f5c\u308b\n\n\n\uff08\u3053\u3053\u3067\u306fSettingsActivity\u3068\u540d\u4ed8\u3051\u307e\u3059\uff09\n\n\n\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u7de8\u96c6\u3057\u3066FrameLayout\u3060\u3051\u306b\u3059\u308b\uff08\u30b3\u30fc\u30c9\u306f\u5f8c\u3067\uff09\n\n\n\u3053\u306e1\u753b\u9762\u3060\u3051\u306a\u306e\u3067 match_parent\u3067\u3001context\u3082\u3053\u3053\u3067\u6307\u5b9a\u3057\u3061\u3083\u3044\u307e\u3057\u3087\u3046\n\n\n\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/settings_container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".SettingsActivity\" />\n\n\n\nPreferenceFragment\u3092\u4f5c\u308b\n\napp\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001New \u2192 Fragment \u2192 Fragment(Blank)\u3092\u4f5c\u308b\n\n\n\uff08\u3053\u3053\u3067\u306fSettingsFragment\u3068\u540d\u4ed8\u3051\u307e\u3059\uff09\nCreate layout XML?\u3001include fragment factory method?\u3001include interface callbacks? \u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059\n\n\n\u30bd\u30fc\u30b9\u3092\u5909\u66f4\n\n\n\u666e\u901a\u306eFragment\u307f\u305f\u3044\u306b\u518d\u4f5c\u6210\u30c1\u30a7\u30c3\u30af\uff08onCreate\u3067savedInstanceState\u304cNull\u304b\u5426\u304b\uff09\u3057\u306a\u304f\u3066\u3044\u3044\u3093\u3060\u308d\u304b\uff1f\n\n\n\n public class SettingsFragment extends PreferenceFragment {\n    public SettingsFragment() {\n    }\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        addPreferencesFromResource(R.xml.preferences);\n    }\n}\n\n\n\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5909\u66f4\n\n\n\n\u672c\u5bb6\u30ac\u30a4\u30c9\u306a\u3069\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\n\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u3067\u306fTextPreference\u3092\u4e8c\u3064\u4f5c\u3063\u305f\u3068\u3057\u307e\u3059\n\n\n\n\n\u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u3084\u308b\n\nFragment\u306bListener\u3092\u8a2d\u5b9a\u3057\u307e\u3059\n\n\nsettingsFragment\n    @Override\n    public void onResume() {\n        super.onResume();\n        getPreferenceManager().getSharedPreferences()\n            .registerOnSharedPreferenceChangeListener(this);\n    }\n    @Override\n    public void onPause() {\n        super.onPause();\n        getPreferenceManager().getSharedPreferences()\n            .unregisterOnSharedPreferenceChangeListener(this);\n    }\n    @Override\n    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {\n        if (key.equals(getString(R.string.preference_key1))) {\n            EditTextPreference pref = (EditTextPreference) findPreference(key);\n            pref.setSummary(pref.getText());\n        } else if (key.equals(getString(R.string.preference_key2))) {\n            EditTextPreference pref = (EditTextPreference) findPreference(key);\n            pref.setSummary(pref.getText());\n        }\n    }\n\n\n\nActivity\u304b\u3089\u547c\u3093\u3067\u3084\u308a\u307e\u3059\n\n\nsettingsActivity\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_settings);\n        if(savedInstanceState == null) {\n            getFragmentManager().beginTransaction()\n                .replace(R.id.settings_container, new SettingsFragment())\n                .commit();\n        }\n    }\n\n\n\u6700\u5c0f\u9650\u3067\u306f\u3053\u306e\u304f\u3089\u3044\u3067\u52d5\u304f\u306f\u305a\u3067\u3059\u3002\n(Android Studio 0.8.14) PreferenceActivity\u304c\u4f5c\u308c\u307e\u3059\u304c\u3001\u4e2d\u8eab\u304c\u307b\u3068\u3093\u3069Deprecated\u3063\u3066\u306a\u3093\u3068\u304b\u306a\u3089\u3093\u306e\u304b\u3044\uff01\n\n1. \u5c02\u7528\u306eActivity\u3092\u4f5c\u308b\n1. PreferenceFragment\u3092\u4f5c\u308b\n1. \u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u3084\u308b\n\n\u3053\u308c\u3067\u3044\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u5c02\u7528\u306eActivity\u3092\u4f5c\u308b\n---\n\n- app\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001New \u2192 Activity \u2192 Blank Activity\u3092\u4f5c\u308b\n - \uff08\u3053\u3053\u3067\u306fSettingsActivity\u3068\u540d\u4ed8\u3051\u307e\u3059\uff09\n- \u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u7de8\u96c6\u3057\u3066FrameLayout\u3060\u3051\u306b\u3059\u308b\uff08\u30b3\u30fc\u30c9\u306f\u5f8c\u3067\uff09\n - \u3053\u306e1\u753b\u9762\u3060\u3051\u306a\u306e\u3067 match_parent\u3067\u3001context\u3082\u3053\u3053\u3067\u6307\u5b9a\u3057\u3061\u3083\u3044\u307e\u3057\u3087\u3046\n\n```xml:\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/settings_container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".SettingsActivity\" />\n\n```\n\nPreferenceFragment\u3092\u4f5c\u308b\n---\n- app\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001New \u2192 Fragment \u2192 Fragment(Blank)\u3092\u4f5c\u308b\n - \uff08\u3053\u3053\u3067\u306fSettingsFragment\u3068\u540d\u4ed8\u3051\u307e\u3059\uff09\n - Create layout XML?\u3001include fragment factory method?\u3001include interface callbacks? \u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059\n- \u30bd\u30fc\u30b9\u3092\u5909\u66f4\n - \u666e\u901a\u306eFragment\u307f\u305f\u3044\u306b\u518d\u4f5c\u6210\u30c1\u30a7\u30c3\u30af\uff08onCreate\u3067savedInstanceState\u304cNull\u304b\u5426\u304b\uff09\u3057\u306a\u304f\u3066\u3044\u3044\u3093\u3060\u308d\u304b\uff1f\n\n```java:\n public class SettingsFragment extends PreferenceFragment {\n    public SettingsFragment() {\n    }\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        addPreferencesFromResource(R.xml.preferences);\n    }\n}\n```\n\n- \u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5909\u66f4\n - [\u672c\u5bb6\u30ac\u30a4\u30c9] (http://developer.android.com/design/patterns/settings.html)\u306a\u3069\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\n - \u3068\u308a\u3042\u3048\u305a\u3053\u3053\u3067\u306fTextPreference\u3092\u4e8c\u3064\u4f5c\u3063\u305f\u3068\u3057\u307e\u3059\n\n\u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u3084\u308b\n---\n\n- Fragment\u306bListener\u3092\u8a2d\u5b9a\u3057\u307e\u3059\n\n```java:settingsFragment\n    @Override\n    public void onResume() {\n        super.onResume();\n        getPreferenceManager().getSharedPreferences()\n            .registerOnSharedPreferenceChangeListener(this);\n    }\n    @Override\n    public void onPause() {\n        super.onPause();\n        getPreferenceManager().getSharedPreferences()\n            .unregisterOnSharedPreferenceChangeListener(this);\n    }\n    @Override\n    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {\n        if (key.equals(getString(R.string.preference_key1))) {\n            EditTextPreference pref = (EditTextPreference) findPreference(key);\n            pref.setSummary(pref.getText());\n        } else if (key.equals(getString(R.string.preference_key2))) {\n            EditTextPreference pref = (EditTextPreference) findPreference(key);\n            pref.setSummary(pref.getText());\n        }\n    }\n```\n\n- Activity\u304b\u3089\u547c\u3093\u3067\u3084\u308a\u307e\u3059\n\n```java:settingsActivity\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_settings);\n        if(savedInstanceState == null) {\n            getFragmentManager().beginTransaction()\n                .replace(R.id.settings_container, new SettingsFragment())\n                .commit();\n        }\n    }\n```\n\n\u6700\u5c0f\u9650\u3067\u306f\u3053\u306e\u304f\u3089\u3044\u3067\u52d5\u304f\u306f\u305a\u3067\u3059\u3002\n"}