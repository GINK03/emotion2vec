{"tags": ["procmail", "postfix"], "context": " More than 1 year has passed since last update.procmail\u3067\u8ff7\u60d1\u30e1\u30fc\u30eb\u5bfe\u7b56 (\u4e00\u30e6\u30fc\u30b6\u3068\u3057\u3066)\u3067\u306f\u4e00\u30e6\u30fc\u30b6\u3060\u3051\u53ef\u80fd\u3002\n\u5168\u54e1\u306b\u5bfe\u3057\u3066\u884c\u3046\u306b\u306f\u4ee5\u4e0b\n\n\u6e96\u5099\n\n\u4f5c\u696d\u5834\u6240\u3092\u6e96\u5099\n# mkdir -p /var/procmail/spam/new/\n# mkdir -p /var/procmail/spam/cur/\n# mkdir -p /var/procmail/spam/tmp/\n# touch /var/procmail/procmail.log\n\n\n\nprocmail\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# apt-get install -y procmail\n\n\n\n/etc/postfix/main.cf\n+home_mailbox = Maildir/\n+mailbox_command = /usr/bin/procmail\n\n\n\nMaildir\u5f62\u5f0f\u3092\u4f7f\u3063\u3066\u3044\u308b\u3053\u3068\u3002(\u4f7f\u3063\u3066\u3044\u306a\u3044\u5834\u5408/etc/procmailrc\u3067MAILDIR\u3068DEFAULT\u306e\u6307\u5b9a\u3092\u524a\u9664)\n\n\n\u30ec\u30b7\u30d4\nUTF8\u3067\u66f8\u304f\n\n/etc/procmailrc\nMAILDIR=$HOME/Maildir/\nDEFAULT=$MAILDIR\nLOGFILE=/var/procmail/procmail.log\nSPAMDIR=/var/procmail/spam/new/.\nPATH=$PATH:/bin:/usr/bin\n\n:0\n* ^From (mike.*|advertise.*|mensshop.*)@gmail.com\n$SPAMDIR\n\n:0\n* ^From (.*-mag0.*|mastainfo.*|magmagnew-ade)@yahoo.co.jp\n$SPAMDIR\n\n# \u672c\u6587\u304b\u4ef6\u540d\u30de\u30c3\u30c1\n:0\n*^From .*@(docomo.ne.jp|ezweb.ne.jp|softbank.ne.jp|i.softbank.jp)\n* ? nkf -Zmw | egrep \"\u696d\u754c\u8a71\u984c\u6cb8\u9a30|\u691c\u7d22PASS:|\u691c\u7d22\u7528ID:\"\n$SPAMDIR\n\n\n\n\u30ed\u30b0\u78ba\u8a8d\n\n/var/log/maillog\n/var/procmail/procmail.log\n\n[procmail\u3067\u8ff7\u60d1\u30e1\u30fc\u30eb\u5bfe\u7b56 (\u4e00\u30e6\u30fc\u30b6\u3068\u3057\u3066)](http://qiita.com/tukiyo3/items/b90e6fb671401e53495e)\u3067\u306f\u4e00\u30e6\u30fc\u30b6\u3060\u3051\u53ef\u80fd\u3002\n\u5168\u54e1\u306b\u5bfe\u3057\u3066\u884c\u3046\u306b\u306f\u4ee5\u4e0b\n\n\u6e96\u5099\n============\n\n```bash:\u4f5c\u696d\u5834\u6240\u3092\u6e96\u5099\n# mkdir -p /var/procmail/spam/new/\n# mkdir -p /var/procmail/spam/cur/\n# mkdir -p /var/procmail/spam/tmp/\n# touch /var/procmail/procmail.log\n```\n\n```bash:procmail\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# apt-get install -y procmail\n```\n\n```diff:/etc/postfix/main.cf\n+home_mailbox = Maildir/\n+mailbox_command = /usr/bin/procmail\n```\n\n* Maildir\u5f62\u5f0f\u3092\u4f7f\u3063\u3066\u3044\u308b\u3053\u3068\u3002(\u4f7f\u3063\u3066\u3044\u306a\u3044\u5834\u5408/etc/procmailrc\u3067MAILDIR\u3068DEFAULT\u306e\u6307\u5b9a\u3092\u524a\u9664)\n\n\u30ec\u30b7\u30d4\n=======\n\nUTF8\u3067\u66f8\u304f\n\n```bash:/etc/procmailrc\nMAILDIR=$HOME/Maildir/\nDEFAULT=$MAILDIR\nLOGFILE=/var/procmail/procmail.log\nSPAMDIR=/var/procmail/spam/new/.\nPATH=$PATH:/bin:/usr/bin\n\n:0\n* ^From (mike.*|advertise.*|mensshop.*)@gmail.com\n$SPAMDIR\n\n:0\n* ^From (.*-mag0.*|mastainfo.*|magmagnew-ade)@yahoo.co.jp\n$SPAMDIR\n\n# \u672c\u6587\u304b\u4ef6\u540d\u30de\u30c3\u30c1\n:0\n*^From .*@(docomo.ne.jp|ezweb.ne.jp|softbank.ne.jp|i.softbank.jp)\n* ? nkf -Zmw | egrep \"\u696d\u754c\u8a71\u984c\u6cb8\u9a30|\u691c\u7d22PASS:|\u691c\u7d22\u7528ID:\"\n$SPAMDIR\n```\n\n\u30ed\u30b0\u78ba\u8a8d\n=======\n\n* /var/log/maillog\n* /var/procmail/procmail.log\n"}