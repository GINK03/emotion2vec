{"context": "\n\n\u306a\u305c\u305d\u3093\u306a\nCI\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u3001GitHub\u306e\u30d7\u30eb\u30ea\u30af\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u5165\u308c\u305f\u3044\u3002\n\u30d1\u30a4\u30d7\u3067\u6e21\u3059\u3068\u3001\u826f\u304d\u5177\u5408\u306b\u6295\u3058\u3066\u304f\u308c\u308b\u3068\u30d9\u30b9\u30c8\u3002\n\n\u73fe\u7269\nhttps://gist.github.com/sasasin/1a1b7534dfe2f6246378615c80ab720b\n\nghpr-comment.sh\n#!/bin/bash -e\n# how to use:\n#   export GITHUB_OAUTH_KEY=....\n#   export PR_REPONAME=....\n#   export PR_NUMBER=....\n#   echo \"HELLO WORLD\" | ./ghpr-comment.sh\n#\n# BODY from stdin\nBODY=$(cat - | perl -ne 'chomp; s/\\\\/\\\\\\\\/g; s/\"/\\\\\"/g; print $_ .\"\\\\n\"')\ncurl -v -X POST \\\n  -H \"Content-type: application/json\" -H \"Accept: application/json\" \\\n  -u ${GITHUB_OAUTH_KEY}:x-oauth-basic \\\n  -d \"{ \\\"body\\\": \\\"${BODY}\\\" }\" \\\n  https://api.github.com/repos/uluru/${PR_REPONAME}/issues/${PR_NUMBER}/comments\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u7f6e\u3044\u3066 +x \u3059\u308b\u3060\u3051\nwget https://gist.githubusercontent.com/sasasin/1a1b7534dfe2f6246378615c80ab720b/raw/3b03f25456ce1d557613671c12bb2be4dae5f0f0/ghpr-comment.sh\nchmod +x ghpr-comment.sh\n\n\n\u4f7f\u3044\u65b9\nexport GITHUB_OAUTH_KEY=....\nexport PR_REPONAME=....\nexport PR_NUMBER=....\necho \"HELLO WORLD\" | ./ghpr-comment.sh\n\n\n\u30d1\u30a4\u30d7\u8d8a\u3057\u306b\u4f55\u3067\u3082\u6e21\u305b\u308b\u3002\ncat /path/to/bigfile.txt \\\n| grep ... \\\n| awk .... \\\n| cowsay \\\n| ./ghpr-comment.sh\n\n# \u306a\u305c\u305d\u3093\u306a\nCI\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u3001GitHub\u306e\u30d7\u30eb\u30ea\u30af\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u5165\u308c\u305f\u3044\u3002\n\u30d1\u30a4\u30d7\u3067\u6e21\u3059\u3068\u3001\u826f\u304d\u5177\u5408\u306b\u6295\u3058\u3066\u304f\u308c\u308b\u3068\u30d9\u30b9\u30c8\u3002\n\n# \u73fe\u7269\n\nhttps://gist.github.com/sasasin/1a1b7534dfe2f6246378615c80ab720b\n\n```bash:ghpr-comment.sh\n#!/bin/bash -e\n# how to use:\n#   export GITHUB_OAUTH_KEY=....\n#   export PR_REPONAME=....\n#   export PR_NUMBER=....\n#   echo \"HELLO WORLD\" | ./ghpr-comment.sh\n#\n# BODY from stdin\nBODY=$(cat - | perl -ne 'chomp; s/\\\\/\\\\\\\\/g; s/\"/\\\\\"/g; print $_ .\"\\\\n\"')\ncurl -v -X POST \\\n  -H \"Content-type: application/json\" -H \"Accept: application/json\" \\\n  -u ${GITHUB_OAUTH_KEY}:x-oauth-basic \\\n  -d \"{ \\\"body\\\": \\\"${BODY}\\\" }\" \\\n  https://api.github.com/repos/uluru/${PR_REPONAME}/issues/${PR_NUMBER}/comments\n```\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u7f6e\u3044\u3066 +x \u3059\u308b\u3060\u3051\n\n```bash\nwget https://gist.githubusercontent.com/sasasin/1a1b7534dfe2f6246378615c80ab720b/raw/3b03f25456ce1d557613671c12bb2be4dae5f0f0/ghpr-comment.sh\nchmod +x ghpr-comment.sh\n```\n\n# \u4f7f\u3044\u65b9\n\n```bash\nexport GITHUB_OAUTH_KEY=....\nexport PR_REPONAME=....\nexport PR_NUMBER=....\necho \"HELLO WORLD\" | ./ghpr-comment.sh\n```\n\n![3.jpg](https://qiita-image-store.s3.amazonaws.com/0/22947/0e6e6372-c14c-791f-41d1-3cb45540b06b.jpeg)\n\n\u30d1\u30a4\u30d7\u8d8a\u3057\u306b\u4f55\u3067\u3082\u6e21\u305b\u308b\u3002\n\n```bash\ncat /path/to/bigfile.txt \\\n| grep ... \\\n| awk .... \\\n| cowsay \\\n| ./ghpr-comment.sh\n```\n\n", "tags": ["GitHub", "curl", "cli", "Bash", "ShellScript"]}