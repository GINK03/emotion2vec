{"context": "Mockito 2\u306e\u5909\u66f4\u70b9\u306b\u3064\u3044\u3066\u3067\u3059\u3002\nMockito 1\u30e6\u30fc\u30b6\u306e\u65b9\u306b\u5411\u3051\u305f\u5185\u5bb9\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u5c0e\u5165\nMockito 2\u306f\u30b3\u30fc\u30c9\u306b\u4f55\u3089\u304b\u306e\u5909\u66f4\u304c\u5165\u308b\u5ea6\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3059\u306e\u3067\u30011\u65e5\u306e\u3046\u3061\u306b\u8907\u6570\u56de\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u3042\u304c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u3067\u3059\u306e\u3067\u3001\u5e38\u306b\u6700\u65b0\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nbuild.gradle\ndependencies {\n    testCompile \"org.mockito:mockito-core:+\"\n}\n\n\nAndroid Studio\u3067\u958b\u767a\u3057\u3066\u3044\u308b\u5834\u5408\u7b49\u3001+\u3092\u4f7f\u3046\u3068\u8b66\u544a\u304c\u51fa\u308b\u74b0\u5883\u3067\u306f\u3001+\u306e\u4ee3\u308f\u308a\u306blatest.release\u3084latest.integration\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nbuild.gradle\ndependencies {\n    testCompile \"org.mockito:mockito-core:latest.release\"\n}\n\n\n\nMockito 1\u304b\u3089\u306e\u5909\u66f4\u70b9\n\u4e3b\u306a\u5909\u66f4\u70b9\u3001\u8ffd\u52a0\u6a5f\u80fd\u3092\u4ee5\u4e0b\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u8a73\u7d30\u306f\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u304a\u3088\u3073Mockito\u306eJavadoc\u3092\u78ba\u8a8d\u4e0b\u3055\u3044\u3002\n\nfinal\u30af\u30e9\u30b9/\u30e1\u30bd\u30c3\u30c9\u3092\u30e2\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\nMockito 1\u3067\u306fPowerMock\u3092\u5fc5\u8981\u3068\u3057\u307e\u3057\u305f\u304c\u3001Mockito 2\u304b\u3089\u306finline mock maker\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u308c\u3089\u3092\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067final\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bKotlin\u306e\u30af\u30e9\u30b9\u3082\u3001kotlin-allopen\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3046\u3053\u3068\u306a\u304f\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001\u30c6\u30b9\u30c8\u7528\u306e\u30ea\u30bd\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4ee5\u4e0b\u306eMockMaker\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\napp/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker\nmock-maker-inline\n\n\n\u307e\u305f\u306f\u3001mockito-core\u306e\u4ee3\u308f\u308a\u306bmockito-inline\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nbuild.gradle\ndependencies {\n    //testCompile \"org.mockito:mockito-core:+\"\n    testCompile \"org.mockito:mockito-inline:+\"\n}\n\n\n\u305f\u3060\u3057\u3001\u3053\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u306f\u5f53\u8a72\u6a5f\u80fd\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u308b\u307e\u3067\u306e\u904e\u6e21\u7684\u306a\u3082\u306e\u306a\u306e\u3067\u3001\u5c06\u6765\u7684\u306b\u306f\u524a\u9664\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3053\u306e\u6a5f\u80fd\u306fInlineByteBuddyMockMaker\u3068\u3044\u3046mock maker\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u30af\u30e9\u30b9\u306b\u306f@Incubating\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n@Incubating\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u65b0\u3057\u3081\u306eAPI\u306b\u4ed8\u4e0e\u3055\u308c\u308b\u3082\u306e\u3067\u3001\u30e6\u30fc\u30b6\u304b\u3089\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u671f\u5f85\u3059\u308b\u3053\u3068\u3092\u793a\u3059\u3082\u306e\u3067\u3059\u3002\n\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u6b21\u7b2c\u3067\u306f(\u307b\u3068\u3093\u3069\u306a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c)API\u306e\u5909\u66f4\u304c\u3042\u308a\u3048\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u70b9\u306b\u7559\u610f\u4e0b\u3055\u3044\u3002\n\u306a\u304a\u3001static\u30e1\u30bd\u30c3\u30c9\u3084\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u30e2\u30c3\u30af\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u306e\u3067\u3001\u305d\u308c\u3089\u3092\u30e2\u30c3\u30af\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u3053\u308c\u307e\u3067\u901a\u308aPowerMock\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\nAndroid\u7aef\u672b\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u7528\u610f\u3055\u308c\u305f\n\u4ee5\u524d\u306fDexmaker\u3092\u5fc5\u8981\u3068\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001Mockito 2.6\u304b\u3089Android\u7aef\u672b\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u63d0\u4f9b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nmockito-android\u3092androidTestCompile\u30b9\u30b3\u30fc\u30d7\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001Android\u7aef\u672b\u4e0a\u3067Mockito\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nbuild.gradle\ndependencies {\n    androidTestCompile \"org.mockito:mockito-android:+\"\n}\n\n\nmockito-android\u3067\u306f\u3001Dexmaker\u3067\u4e0d\u53ef\u80fd\u3060\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u306a\u304a\u3001\u3053\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u3067final\u30af\u30e9\u30b9/\u30e1\u30bd\u30c3\u30c9\u3092\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n(\u4e0a\u8a18\u3067\u6319\u3052\u305finline mock maker\u3082Android\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093)\n\u3053\u3061\u3089\u306b\u95a2\u3057\u3066\u306f\u3001\u62d9\u4f5c\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001Android\u7aef\u672b\u4e0a\u3067\u306efinal\u30af\u30e9\u30b9/\u30e1\u30bd\u30c3\u30c9\u306e\u30e2\u30c3\u30af\u3092\u5b9f\u73fe\u3059\u308bDexOpener\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\u3088\u308d\u3057\u3051\u308c\u3070\u304a\u8a66\u3057\u4e0b\u3055\u3044\u3002\n\nArgumentMatcher\u3092\u30e9\u30e0\u30c0\u5f0f\u3067\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\nMockito 1\u3067\u306fArgumentMatcher\u306f\u62bd\u8c61\u30af\u30e9\u30b9\u3067\u3057\u305f\u3002\nMockito 2\u3067SAM\u30bf\u30a4\u30d7\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306b\u5909\u66f4\u3055\u308c\u305f\u306e\u3067\u3001argThat(ArgumentMatcher)\u3067\u30e9\u30e0\u30c0\u5f0f\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nany(Class)\u304cnull\u306b\u30de\u30c3\u30c1\u3057\u306a\u304f\u306a\u3063\u305f\nany()\u3068any(Class)\u304c\u660e\u78ba\u306b\u5225\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nany()\u306fnull\u3092\u542b\u3080\u4efb\u610f\u306e\u5f15\u6570\u306b\u30de\u30c3\u30c1\u3057\u307e\u3059\u304c\u3001any(Class)\u306fnull\u306b\u306f\u30de\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\n\u3042\u3068\u3001\u3053\u308c\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30b9\u304c\u3001Matchers\u304b\u3089ArgumentMatchers\u3078\u3068\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nanyXxx()\u7cfb\u304cnull\u306b\u30de\u30c3\u30c1\u3057\u306a\u304f\u306a\u3063\u305f\nanyString()\u3001anyList()\u306a\u3069\u306eanyXxx()\u7cfb\u30de\u30c3\u30c1\u30e3\u30fc\u304cnull\u306b\u30de\u30c3\u30c1\u3057\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nnull\n\nanyObject()/anyVararg()\u304c\u975e\u63a8\u5968\u306b\u306a\u3063\u305f\nMockito 2\u3067\u306fany()\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nnullable(Class)\u306e\u8ffd\u52a0\nisA(Class)\u306b\u3088\u304f\u4f3c\u305f\u30e1\u30bd\u30c3\u30c9\u3068\u3057\u3066nullable(Class)\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nnullable(Class)\u306fnull\u307e\u305f\u306f\u6307\u5b9a\u3057\u305f\u578b\u306e\u5f15\u6570\u306b\u30de\u30c3\u30c1\u3057\u307e\u3059\u304c\u3001isA(Class)\u306fnull\u306b\u306f\u30de\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\n\n\u30e2\u30c3\u30af\u30af\u30e9\u30b9\u306b\u5bfe\u8c61\u30af\u30e9\u30b9\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\n\u4f8b\u3048\u3070\u3001\u5bfe\u8c61\u30af\u30e9\u30b9\u304c\u4ee5\u4e0b\u3067\u3042\u3063\u305f\u5834\u5408\n@Foo\nclass Bar { ... }\n\n\u30e2\u30c3\u30af\u306e\u30af\u30e9\u30b9\u306b\u3082@Foo\u304c\u4ed8\u4e0e\u3055\u308c\u307e\u3059\u3002\nBar mock = mock(Bar.class);\nassertTrue(mock.getClass().isAnnotationPresent(Foo.class));\n\n\nStrictness\u304c\u5c0e\u5165\u3055\u308c\u305f\nMockito 2.3\u3088\u308a\u3001Strictness\u30af\u30e9\u30b9\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nLENIENT (Mockito 1\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3001\u6700\u3082\u3086\u308b\u3044)\nWARN (Mockito 2\u306e\u30c7\u30d5\u30a9\u30eb\u30c8)\nSTRICT_STUBS (Mockito 3\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u308b\u4e88\u5b9a\u3001\u6700\u3082\u53b3\u3057\u3044)\n\n\u306e3\u3064\u306e\u30e2\u30fc\u30c9\u304c\u3042\u308a\u3001\u30e2\u30c3\u30af\u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u95a2\u3059\u308b\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u305f\u308a\u3001\u30d2\u30f3\u30c8\u3068\u306a\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u51fa\u529b\u3055\u305b\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001MockitoJUnitRunner\u306b\u3082\n\nMockitoJUnitRunner.Silent (LENIENT\u76f8\u5f53)\nMockitoJUnitRunner.Strict (WARN\u76f8\u5f53\u3001MockitoJUnitRunner\u3068\u540c\u7b49)\nMockitoJUnitRunner.StrictStubs (STRICT_STUBS\u76f8\u5f53)\n\n\u306e3\u3064\u306e\u30af\u30e9\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b\u3001MockitoRule\u3067Strictness\u3092\u5207\u308a\u304b\u3048\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\npublic class MyTest {\n\n    @Rule\n    public MockitoRule rule = MockitoJUnit.rule().strictness(Strictness.STRICT_STUBS);\n\n    @Mock\n    Foo foo;\n\n    @Test\n    public void test() {\n        when(foo.bar()).thenReturn(\"test\");\n    }\n\n    class Foo {\n        String bar() {\n            return \"\";\n        }\n    }\n\n}\n\n\u4e0a\u8a18\u306etest()\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u3001when\u53e5\u3067\u8a2d\u5b9a\u3057\u305f\u30e2\u30c3\u30af\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\u3053\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001UnnecessaryStubbingException\u304c\u30b9\u30ed\u30fc\u3055\u308c\u307e\u3059\u3002\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u306eSTRICT_STUBS\u3092WARN\u306b\u5909\u66f4\u3057\u305f\u5834\u5408\u306f\u3001[MockitoHint]\u3067\u59cb\u307e\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u304c\u3001\u30a8\u30e9\u30fc\u306b\u306f\u306a\u308a\u307e\u305b\u3093\u3002\nLENIENT\u306b\u5909\u66f4\u3057\u305f\u5834\u5408\u306f\u3001\u30a8\u30e9\u30fc\u306b\u3082\u306a\u3089\u305a\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u51fa\u529b\u3055\u308c\u307e\u305b\u3093\u3002\nMockito\u30c1\u30fc\u30e0\u306fSTRICT_STUBS\u306e\u4f7f\u7528\u3092\u5f37\u304f\u52e7\u3081\u3066(Highly recommended)\u3044\u307e\u3059\u3002\n\u306a\u304a\u3001Strictness\u30af\u30e9\u30b9\u306b\u306f@Incubating\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u70b9\u306b\u7559\u610f\u4e0b\u3055\u3044\u3002\n\nMockitoSession\u304c\u5c0e\u5165\u3055\u308c\u305f\nMockito 2.7\u3088\u308a\u3001MockitoJUnitRunner/MockitoRule\u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u74b0\u5883\u5411\u3051\u306b\u3001MockitoSession\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30e2\u30c3\u30af\u306e\u751f\u6210\u306bMockitoAnnotations#initMocks(Object)\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001MockitoSession\u306b\u7f6e\u304d\u304b\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f7f\u7528\u65b9\u6cd5\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\nprivate MockitoSession session;\n\n@Before\npublic void setUp() {\n    session = Mockito.mockitoSession().initMocks(this).startMocking();\n}\n\n@After\npublic void tearDown() {\n    session.finishMocking();\n}\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3001finishMocking()\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067Strictness\u306e\u30e2\u30fc\u30c9\u306b\u5fdc\u3058\u305f\u30c1\u30a7\u30c3\u30af\u304c\u884c\u308f\u308c\u307e\u3059\u3002\nStrictness\u3092\u5207\u308a\u304b\u3048\u308b\u306b\u306fstrictness(Strictness)\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nsession = Mockito.mockitoSession()\n    .initMocks(this)\n    .strictness(Strictness.WARN)\n    .startMocking();\n\nStrictness\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306fSTRICT_STUBS\u3067\u3001MockitoJUnitRunner/MockitoRule\u306eWARN\u3088\u308a\u3082\u53b3\u3057\u3044\u30e2\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u306a\u304a\u3001MockitoSession\u306b\u3082@Incubating\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u7559\u610f\u4e0b\u3055\u3044\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\n[Mockito 2](http://site.mockito.org/)\u306e\u5909\u66f4\u70b9\u306b\u3064\u3044\u3066\u3067\u3059\u3002\nMockito 1\u30e6\u30fc\u30b6\u306e\u65b9\u306b\u5411\u3051\u305f\u5185\u5bb9\u3068\u306a\u308a\u307e\u3059\u3002\n\n## \u5c0e\u5165\nMockito 2\u306f[\u30b3\u30fc\u30c9\u306b\u4f55\u3089\u304b\u306e\u5909\u66f4\u304c\u5165\u308b\u5ea6\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3059](https://github.com/mockito/mockito/wiki/Continuous-Delivery-Overview)\u306e\u3067\u30011\u65e5\u306e\u3046\u3061\u306b\u8907\u6570\u56de\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u3042\u304c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u3067\u3059\u306e\u3067\u3001\u5e38\u306b\u6700\u65b0\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```groovy:build.gradle\ndependencies {\n    testCompile \"org.mockito:mockito-core:+\"\n}\n```\n\nAndroid Studio\u3067\u958b\u767a\u3057\u3066\u3044\u308b\u5834\u5408\u7b49\u3001`+`\u3092\u4f7f\u3046\u3068\u8b66\u544a\u304c\u51fa\u308b\u74b0\u5883\u3067\u306f\u3001`+`\u306e\u4ee3\u308f\u308a\u306b`latest.release`\u3084`latest.integration`\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```groovy:build.gradle\ndependencies {\n    testCompile \"org.mockito:mockito-core:latest.release\"\n}\n```\n\n## Mockito 1\u304b\u3089\u306e\u5909\u66f4\u70b9\n\n\u4e3b\u306a\u5909\u66f4\u70b9\u3001\u8ffd\u52a0\u6a5f\u80fd\u3092\u4ee5\u4e0b\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u8a73\u7d30\u306f[\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8](https://github.com/mockito/mockito/blob/release/2.x/doc/release-notes/official.md)\u304a\u3088\u3073[Mockito\u306eJavadoc](https://javadoc.io/page/org.mockito/mockito-core/latest/org/mockito/Mockito.html#0)\u3092\u78ba\u8a8d\u4e0b\u3055\u3044\u3002\n\n### final\u30af\u30e9\u30b9/\u30e1\u30bd\u30c3\u30c9\u3092\u30e2\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\n\nMockito 1\u3067\u306f[PowerMock](https://github.com/powermock/powermock)\u3092\u5fc5\u8981\u3068\u3057\u307e\u3057\u305f\u304c\u3001Mockito 2\u304b\u3089\u306finline mock maker\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u308c\u3089\u3092\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067final\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bKotlin\u306e\u30af\u30e9\u30b9\u3082\u3001[kotlin-allopen\u30d7\u30e9\u30b0\u30a4\u30f3](https://blog.jetbrains.com/kotlin/2016/12/kotlin-1-0-6-is-here/)\u3092\u4f7f\u3046\u3053\u3068\u306a\u304f\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001\u30c6\u30b9\u30c8\u7528\u306e\u30ea\u30bd\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4ee5\u4e0b\u306eMockMaker\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```text:app/src/test/resources/mockito-extensions/org.mockito.plugins.MockMaker\nmock-maker-inline\n```\n\n\u307e\u305f\u306f\u3001mockito-core\u306e\u4ee3\u308f\u308a\u306bmockito-inline\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```groovy:build.gradle\ndependencies {\n    //testCompile \"org.mockito:mockito-core:+\"\n    testCompile \"org.mockito:mockito-inline:+\"\n}\n```\n\n\u305f\u3060\u3057\u3001\u3053\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u306f\u5f53\u8a72\u6a5f\u80fd\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u308b\u307e\u3067\u306e\u904e\u6e21\u7684\u306a\u3082\u306e\u306a\u306e\u3067\u3001\u5c06\u6765\u7684\u306b\u306f\u524a\u9664\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u3053\u306e\u6a5f\u80fd\u306fInlineByteBuddyMockMaker\u3068\u3044\u3046mock maker\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u30af\u30e9\u30b9\u306b\u306f[`@Incubating`](https://javadoc.io/page/org.mockito/mockito-core/latest/org/mockito/Incubating.html)\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n`@Incubating`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u65b0\u3057\u3081\u306eAPI\u306b\u4ed8\u4e0e\u3055\u308c\u308b\u3082\u306e\u3067\u3001\u30e6\u30fc\u30b6\u304b\u3089\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u671f\u5f85\u3059\u308b\u3053\u3068\u3092\u793a\u3059\u3082\u306e\u3067\u3059\u3002\n\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u6b21\u7b2c\u3067\u306f(\u307b\u3068\u3093\u3069\u306a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c)API\u306e\u5909\u66f4\u304c\u3042\u308a\u3048\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u70b9\u306b\u7559\u610f\u4e0b\u3055\u3044\u3002\n\n\u306a\u304a\u3001static\u30e1\u30bd\u30c3\u30c9\u3084\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u30e2\u30c3\u30af\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u306e\u3067\u3001\u305d\u308c\u3089\u3092\u30e2\u30c3\u30af\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u3053\u308c\u307e\u3067\u901a\u308aPowerMock\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n### Android\u7aef\u672b\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u7528\u610f\u3055\u308c\u305f\n\n\u4ee5\u524d\u306f[Dexmaker](https://github.com/linkedin/dexmaker)\u3092\u5fc5\u8981\u3068\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001Mockito 2.6\u304b\u3089Android\u7aef\u672b\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u63d0\u4f9b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nmockito-android\u3092androidTestCompile\u30b9\u30b3\u30fc\u30d7\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001Android\u7aef\u672b\u4e0a\u3067Mockito\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```groovy:build.gradle\ndependencies {\n    androidTestCompile \"org.mockito:mockito-android:+\"\n}\n```\n\nmockito-android\u3067\u306f\u3001Dexmaker\u3067\u4e0d\u53ef\u80fd\u3060\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u3053\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u3067final\u30af\u30e9\u30b9/\u30e1\u30bd\u30c3\u30c9\u3092\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n(\u4e0a\u8a18\u3067\u6319\u3052\u305finline mock maker\u3082Android\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093)\n\u3053\u3061\u3089\u306b\u95a2\u3057\u3066\u306f\u3001\u62d9\u4f5c\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001Android\u7aef\u672b\u4e0a\u3067\u306efinal\u30af\u30e9\u30b9/\u30e1\u30bd\u30c3\u30c9\u306e\u30e2\u30c3\u30af\u3092\u5b9f\u73fe\u3059\u308b[DexOpener](https://github.com/tmurakami/dexopener)\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\u3088\u308d\u3057\u3051\u308c\u3070\u304a\u8a66\u3057\u4e0b\u3055\u3044\u3002\n\n### ArgumentMatcher\u3092\u30e9\u30e0\u30c0\u5f0f\u3067\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\n\nMockito 1\u3067\u306fArgumentMatcher\u306f\u62bd\u8c61\u30af\u30e9\u30b9\u3067\u3057\u305f\u3002\nMockito 2\u3067SAM\u30bf\u30a4\u30d7\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306b\u5909\u66f4\u3055\u308c\u305f\u306e\u3067\u3001`argThat(ArgumentMatcher)`\u3067\u30e9\u30e0\u30c0\u5f0f\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n### any(Class)\u304cnull\u306b\u30de\u30c3\u30c1\u3057\u306a\u304f\u306a\u3063\u305f\n\n`any()`\u3068`any(Class)`\u304c\u660e\u78ba\u306b\u5225\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n`any()`\u306fnull\u3092\u542b\u3080\u4efb\u610f\u306e\u5f15\u6570\u306b\u30de\u30c3\u30c1\u3057\u307e\u3059\u304c\u3001`any(Class)`\u306fnull\u306b\u306f\u30de\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\n\n\u3042\u3068\u3001\u3053\u308c\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30b9\u304c\u3001Matchers\u304b\u3089ArgumentMatchers\u3078\u3068\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n### anyXxx()\u7cfb\u304cnull\u306b\u30de\u30c3\u30c1\u3057\u306a\u304f\u306a\u3063\u305f\n\n`anyString()`\u3001`anyList()`\u306a\u3069\u306eanyXxx()\u7cfb\u30de\u30c3\u30c1\u30e3\u30fc\u304cnull\u306b\u30de\u30c3\u30c1\u3057\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nnull\n\n\n### anyObject()/anyVararg()\u304c\u975e\u63a8\u5968\u306b\u306a\u3063\u305f\n\nMockito 2\u3067\u306f`any()`\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n### nullable(Class)\u306e\u8ffd\u52a0\n\n`isA(Class)`\u306b\u3088\u304f\u4f3c\u305f\u30e1\u30bd\u30c3\u30c9\u3068\u3057\u3066`nullable(Class)`\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n`nullable(Class)`\u306fnull\u307e\u305f\u306f\u6307\u5b9a\u3057\u305f\u578b\u306e\u5f15\u6570\u306b\u30de\u30c3\u30c1\u3057\u307e\u3059\u304c\u3001`isA(Class)`\u306fnull\u306b\u306f\u30de\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\n\n### \u30e2\u30c3\u30af\u30af\u30e9\u30b9\u306b\u5bfe\u8c61\u30af\u30e9\u30b9\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\n\n\u4f8b\u3048\u3070\u3001\u5bfe\u8c61\u30af\u30e9\u30b9\u304c\u4ee5\u4e0b\u3067\u3042\u3063\u305f\u5834\u5408\n\n```java\n@Foo\nclass Bar { ... }\n```\n\n\u30e2\u30c3\u30af\u306e\u30af\u30e9\u30b9\u306b\u3082`@Foo`\u304c\u4ed8\u4e0e\u3055\u308c\u307e\u3059\u3002\n\n```java\nBar mock = mock(Bar.class);\nassertTrue(mock.getClass().isAnnotationPresent(Foo.class));\n```\n\n### Strictness\u304c\u5c0e\u5165\u3055\u308c\u305f\n\nMockito 2.3\u3088\u308a\u3001Strictness\u30af\u30e9\u30b9\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n- LENIENT (Mockito 1\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3001\u6700\u3082\u3086\u308b\u3044)\n- WARN (Mockito 2\u306e\u30c7\u30d5\u30a9\u30eb\u30c8)\n- STRICT_STUBS (Mockito 3\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u308b\u4e88\u5b9a\u3001\u6700\u3082\u53b3\u3057\u3044)\n\n\u306e3\u3064\u306e\u30e2\u30fc\u30c9\u304c\u3042\u308a\u3001\u30e2\u30c3\u30af\u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u95a2\u3059\u308b\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u305f\u308a\u3001\u30d2\u30f3\u30c8\u3068\u306a\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u51fa\u529b\u3055\u305b\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u307e\u305f\u3001MockitoJUnitRunner\u306b\u3082\n\n- MockitoJUnitRunner.Silent (`LENIENT`\u76f8\u5f53)\n- MockitoJUnitRunner.Strict (`WARN`\u76f8\u5f53\u3001MockitoJUnitRunner\u3068\u540c\u7b49)\n- MockitoJUnitRunner.StrictStubs (`STRICT_STUBS`\u76f8\u5f53)\n\n\u306e3\u3064\u306e\u30af\u30e9\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306b\u3001MockitoRule\u3067Strictness\u3092\u5207\u308a\u304b\u3048\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n\n```java\npublic class MyTest {\n\n    @Rule\n    public MockitoRule rule = MockitoJUnit.rule().strictness(Strictness.STRICT_STUBS);\n\n    @Mock\n    Foo foo;\n\n    @Test\n    public void test() {\n        when(foo.bar()).thenReturn(\"test\");\n    }\n\n    class Foo {\n        String bar() {\n            return \"\";\n        }\n    }\n\n}\n```\n\n\u4e0a\u8a18\u306e`test()`\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u3001`when`\u53e5\u3067\u8a2d\u5b9a\u3057\u305f\u30e2\u30c3\u30af\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\u3053\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001UnnecessaryStubbingException\u304c\u30b9\u30ed\u30fc\u3055\u308c\u307e\u3059\u3002\n\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u306e`STRICT_STUBS`\u3092`WARN`\u306b\u5909\u66f4\u3057\u305f\u5834\u5408\u306f\u3001[MockitoHint]\u3067\u59cb\u307e\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u304c\u3001\u30a8\u30e9\u30fc\u306b\u306f\u306a\u308a\u307e\u305b\u3093\u3002\n`LENIENT`\u306b\u5909\u66f4\u3057\u305f\u5834\u5408\u306f\u3001\u30a8\u30e9\u30fc\u306b\u3082\u306a\u3089\u305a\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u51fa\u529b\u3055\u308c\u307e\u305b\u3093\u3002\n\nMockito\u30c1\u30fc\u30e0\u306f`STRICT_STUBS`\u306e\u4f7f\u7528\u3092[\u5f37\u304f\u52e7\u3081\u3066(Highly recommended)](https://javadoc.io/page/org.mockito/mockito-core/latest/org/mockito/quality/Strictness.html#STRICT_STUBS)\u3044\u307e\u3059\u3002\n\n\u306a\u304a\u3001Strictness\u30af\u30e9\u30b9\u306b\u306f`@Incubating`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u70b9\u306b\u7559\u610f\u4e0b\u3055\u3044\u3002\n\n### MockitoSession\u304c\u5c0e\u5165\u3055\u308c\u305f\n\nMockito 2.7\u3088\u308a\u3001MockitoJUnitRunner/MockitoRule\u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u74b0\u5883\u5411\u3051\u306b\u3001MockitoSession\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30e2\u30c3\u30af\u306e\u751f\u6210\u306b`MockitoAnnotations#initMocks(Object)`\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001MockitoSession\u306b\u7f6e\u304d\u304b\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f7f\u7528\u65b9\u6cd5\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002\n\n```java\nprivate MockitoSession session;\n\n@Before\npublic void setUp() {\n    session = Mockito.mockitoSession().initMocks(this).startMocking();\n}\n\n@After\npublic void tearDown() {\n    session.finishMocking();\n}\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3001`finishMocking()`\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067Strictness\u306e\u30e2\u30fc\u30c9\u306b\u5fdc\u3058\u305f\u30c1\u30a7\u30c3\u30af\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\nStrictness\u3092\u5207\u308a\u304b\u3048\u308b\u306b\u306f`strictness(Strictness)`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```java\nsession = Mockito.mockitoSession()\n    .initMocks(this)\n    .strictness(Strictness.WARN)\n    .startMocking();\n```\n\nStrictness\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f`STRICT_STUBS`\u3067\u3001MockitoJUnitRunner/MockitoRule\u306e`WARN`\u3088\u308a\u3082\u53b3\u3057\u3044\u30e2\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u306a\u304a\u3001MockitoSession\u306b\u3082`@Incubating`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u7559\u610f\u4e0b\u3055\u3044\u3002\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n", "tags": ["Mockito", "Java", "Android", "Kotlin"]}