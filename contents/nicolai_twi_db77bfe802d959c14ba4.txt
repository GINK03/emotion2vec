{"context": " More than 1 year has passed since last update.\n\n3\u7de8\u306b\u5206\u304b\u308c\u3066\u307e\u3059\n\u3053\u306e\u8a18\u4e8b\u306f\u524d\u5f8c\u7de8\u306b\u5206\u304b\u308c\u3066\u307e\u3059\u3002\nPortAudio\u3067\uff5e\u3063\u3066\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3053\u306e\u524d\u7de8\u3067\u306fPortAudio\u306e\u8a71\u306f\u307b\u307c\u51fa\u3066\u304d\u307e\u305b\u3093\u3001\n\u305d\u3063\u3061\u304c\u77e5\u308a\u305f\u3044\u65b9\u306f\u5f8c\u7de8\u306e\u65b9\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3042\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d3\u30eb\u30c9\u306b\u3064\u3044\u3066\u66f8\u3044\u305f\u6e96\u5099\u7de8\u3082\u3042\u308b\u306e\u3067\u305d\u3061\u3089\u3082\u53c2\u8003\u306b\u3002\n\n\u6e96\u5099\u7de8\uff1aVS2012\u3067PortAudio\u306e\u74b0\u5883\u69cb\u7bc9\n\u524d\u7de8\uff1aPortAudio\u3067WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u308b(WAVE\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u7de8)\u3000\u2190\u3044\u307e\u3053\u3053\n\u5f8c\u7de8\uff1aPortAudio\u3067WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u308b(\u9cf4\u3089\u3059\u7de8)\n\n\n\u4eca\u56de\u304b\u3089\u30b3\u30fc\u30c9\u66f8\u304f\u3088\n\u524d\u56de\u306e\u8a18\u4e8b\uff08\u6e96\u5099\u7de8\uff09\u306b\u5f15\u304d\u7d9a\u304dPortAudio\u306e\u8a18\u4e8b\u3067\u3059\u3002 \n\u4eca\u56de\u3082\u81ea\u5206\u7528\u5099\u5fd8\u9332\u3081\u3044\u305f\u8a18\u4e8b\u306a\u306e\u3067\u3001\u4ed6\u306e\u4eba\u304c\u8aad\u3080\u3053\u3068\u306f\u3042\u307e\u308a\u8003\u616e\u3057\u3066\u307e\u305b\u3093\u3059\u307f\u307e\u305b\u3093\u3002\n\uff08\u516c\u958b\u8a2d\u5b9a\u3067\u306f\u3042\u308a\u307e\u3059\u3051\u3069\uff09\n\u524d\u56de\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d3\u30eb\u30c9\uff5e\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\u6642\u306e\u6ce8\u610f\u70b9\u3092\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\n\u4eca\u56de\u306fPortAudio\u3092\u4f7f\u3063\u3066WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u307e\u3059\u3002 \u4eca\u56de\u306f\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306f\u8003\u616e\u3057\u3066\u307e\u305b\u3093\u3002 \n\u76f8\u3082\u5909\u308f\u3089\u305a\u5b9f\u884c\u74b0\u5883\u306fVS2012,Windows8,64bit\u3067\u3059\u3002\nPortAudio\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u524d\u56de\u30d3\u30eb\u30c9\u3057\u305f\u3084\u3064(portaudio_x86.dll\u3068lib)\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nWAVE\u30d5\u30a1\u30a4\u30eb\u306f\u81ea\u5206\u3067\u53d6\u308a\u6271\u304a\u3046\n\u3055\u3066\u3001\u300c\u518d\u751f\u3057\u3066\u307f\u308b\u300d\u3068\u304b\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\n\u305d\u306e\u5b9fPortAudio\u306f\u30c9\u30e9\u30a4\u30d0\u3078\u50cd\u304d\u304b\u3051\u3001\u6ce2\u5f62\u3092\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3059\u308b\u6700\u4f4e\u9650\u306eAPI\u3057\u304b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067\u3001 WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u30af\u30e9\u30b9\u306f\u81ea\u524d\u3067\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \nOGG\u3068\u304bMP3\u3067\u3084\u308b\u5834\u5408\u3082\u57fa\u672c\u306f\u540c\u3058\u3067\u3059\u3093\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u306a\u3093\u3067\u308f\u3056\u308f\u3056\u305d\u3093\u306a\u3081\u3063\u3061\u3083\u624b\u9593\u306a\u3053\u3068\u3084\u3063\u3066\u3093\u306e\uff1f\u3063\u3066\u8a00\u308f\u308c\u308b\u3068\u5b8c\u5168\u306a\u81ea\u5df1\u6e80\u8db3\u3067\u3059\u3001\u6687\u306a\u306e\u3067 \n\u3067\u3001\u4eca\u56de\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u69d8\u306a\u3093\u3067\u3059\u3051\u3069\u4ee5\u4e0b\u306e2\u3064\u306b\u306a\u308a\u307e\u3059\u3002\n\nhttp://www.kk.iij4u.or.jp/~kondo/wave/\nhttp://d.hatena.ne.jp/colorcle/20100203/1265209117\n\n\u4e0a\u306e\u30b5\u30a4\u30c8\u306fWAVE\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u304c\u8f09\u3063\u3066\u308b\u30b5\u30a4\u30c8\u3067\u3059\u3002\n\u4e0b\u306fWAVE\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u3092\u30af\u30e9\u30b9\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u307f\u305f\u3044\u306a\u8a18\u4e8b\u3067\u3059\u3002\n\u2026\u306a\u3093\u3067\u3059\u304c\u3001\u79c1\u306e\u7406\u89e3\u4e0d\u8db3\u3082\u3042\u3063\u3066\u306a\u3093\u304b\u6ce2\u5f62\u306e\u51fa\u529b\u304c\u3046\u307e\u304f\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u3001 \n\u4f3c\u305f\u3088\u3046\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u65b0\u3057\u304f\u30af\u30e9\u30b9\u4f5c\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\uff0f(^o^)\uff3c \n \uff08\u4e0b\u306e\u30b5\u30a4\u30c8\u306e\u4eba\u898b\u3066\u305f\u3089\u307b\u3093\u3068\u3059\u307f\u307e\u305b\u3093\u2026\uff09\n\u3068\u308a\u3042\u3048\u305aWAVE\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u683c\u7d0d\u3059\u308b\u69cb\u9020\u4f53\u304b\u3089\u8f09\u305b\u307e\u3059\u3002\n\nwave.h\n//WAVE\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\n//---------------------------------------------------------------------------\n#define _CRT_SECURE_NO_WARNINGS\n#include <vector>\n#include <stdio.h>\n#include <string>\n\n//\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u683c\u7d0d\u7528\n//---------------------------------------------------------------------------\nstruct WAVE_FORMAT\n{\n    unsigned short format_id;   //\u30d5\u30a9\u30fc\u30de\u30c3\u30c8ID\n    unsigned short channel; //\u30c1\u30e3\u30f3\u30cd\u30eb\u6570 monaural=1 , stereo=2\n    unsigned long  sampling_rate;//\uff11\u79d2\u9593\u306e\u30b5\u30f3\u30d7\u30eb\u6570\uff0c\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30ec\u30fc\u30c8(Hz),\u3060\u3044\u305f\u3044\u306f44.1kHz\n    unsigned long  bytes_per_sec;//\uff11\u79d2\u9593\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba   44.1kHz 16bit \u30b9\u30c6\u30ec\u30aa \u306a\u3089\u307044100\u00d72\u00d72 = 176400\n    unsigned short block_size;  //\uff11\u30d6\u30ed\u30c3\u30af\u306e\u30b5\u30a4\u30ba\uff0e8bit:nomaural=1byte , 16bit:stereo=4byte\n    unsigned short bits_per_sample;//\uff11\u30b5\u30f3\u30d7\u30eb\u306e\u30d3\u30c3\u30c8\u6570 8bit or 16bit\n};\n//---------------------------------------------------------------------------\n\n\n\u3053\u306e\u69cb\u9020\u4f53\u306b\u306f\u3001\u4e0a\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u3067\u8a00\u3046\u3068\u3053\u308d\u306e\u300c\u30c7\u30fc\u30bf1\u300d\u306e\u90e8\u5206\u304c\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u307e\u3041\u3001\u3060\u3044\u305f\u3044\u306f 44100Hz,16bit,stereo,\u30ea\u30cb\u30a2PCM\u30d5\u30a9\u30fc\u30de\u30c3\u30c8 \u306a\u3093\u3058\u3083\u306a\u3044\u304b\u3063\u3066\u6c17\u304c\u3057\u307e\u3059\u3002\n\u3067\u3001\u6b21\u306b\u6ce2\u5f62\u30c7\u30fc\u30bf\u3068\u3001\u4e0a\u306e\u69cb\u9020\u4f53\u3092\u6301\u3063\u3066\u308b\u30af\u30e9\u30b9\u3092\u8f09\u305b\u307e\u3059\u3002\n\u3068\u308a\u3042\u3048\u305a\u30d8\u30c3\u30c0\u306e\u307f\u3002\n\nwave.h\n//---------------------------------------------------------------------------\nclass WAVE\n{\nprivate:\n    WAVE(const WAVE&);                  //\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    WAVE& operator=(const WAVE&);       //\u4ee3\u5165\u6f14\u7b97\u5b50\u5b9a\u7fa9\n\n    WAVE_FORMAT fmt;                    //\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u60c5\u5831\n    std::vector<unsigned char> data_8bit;   //\u97f3\u30c7\u30fc\u30bf(8bit\u306e\u5834\u5408)\n    std::vector<short> data_16bit;          //\u97f3\u30c7\u30fc\u30bf(16bit\u306e\u5834\u5408)\n\n    int RIFFFileSize;                   //RIFF\u30d8\u30c3\u30c0\u304b\u3089\u8aad\u3093\u3060\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\n    int PCMDataSize;                    //\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\n    int BufPos;                         //\u30d0\u30c3\u30d5\u30a1\u30dd\u30b8\u30b7\u30e7\u30f3\n    bool LoopFlag;                      //\u30eb\u30fc\u30d7\u30d5\u30e9\u30b0\n\npublic:\n    WAVE(bool _LoopFlag = false);\n    WAVE(std::string _name,bool _LoopFlag = false);\n    ~WAVE(){}\n    bool LoadFile(std::string _name);\n    template <class T> T WAVE::Read(){\n        //PCM\u30c7\u30fc\u30bf\u3092\u8aad\u3093\u3067\u6ce2\u5f62\u3092\u8fd4\u3059\n        if(LoopFlag && Get_End()){\n            //\u30eb\u30fc\u30d7\u30d5\u30e9\u30b0\u304c\u7acb\u3063\u3066\u308b\u5834\u5408\u3001\u5dfb\u304d\u623b\u3057\n            BufPos = 0;\n        }\n        if(fmt.bits_per_sample == 8){\n            //8bit\n            return data_8bit[BufPos++];\n        }else if(fmt.bits_per_sample == 16){\n            //16bit\n            return data_16bit[BufPos++];\n        }\n        return 0;\n    }\n\n    bool Get_End();\n\n    WAVE_FORMAT    Get_Format(){ return fmt; }\n    unsigned long  Get_DataSize(){ return PCMDataSize; }\n    double Get_Sec(){ return PCMDataSize/(double)fmt.sampling_rate; }\n    void Set_LoopFlag(bool _LoopFlag){ LoopFlag = _LoopFlag; }\n    bool Get_LoopFlag(){return LoopFlag;}\n};\n//---------------------------------------------------------------------------\n\n\nRead\u95a2\u6570\u3060\u3051\u30d8\u30c3\u30c0\u5185\u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u306f\u3001\n\u30e1\u30f3\u30d0\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u30d8\u30c3\u30c0\u5185\u306b\u66f8\u304b\u306a\u3044\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u308b\u305f\u3081 \u3067\u3059\u3002\n\u6ce2\u5f62\u90e8\u5206\u306e\u8aad\u307f\u51fa\u3057\u3067\u3059\u304c\u300116bit\u306e\u5834\u5408short\u3068\u3057\u3066vector\u306b\u8aad\u3093\u3067\u3001\n8bit\u306e\u5834\u5408unsigned char\u3068\u3057\u3066\u8aad\u3093\u3067\u683c\u7d0d\u307f\u305f\u3044\u306a\u5b9f\u88c5\u3067\u3059\u3002\n\u3069\u3046\u3067\u3082\u3044\u3044\u3067\u3059\u304c\u500b\u4eba\u7684\u306bC++\u306e\u30d5\u30a1\u30a4\u30eb\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u5acc\u3044\u306a\u306e\u3067char*\u578b\u3082\u5acc\u3044\u306a\u3093\u3067\u3059\u3088\u2026\u3002\n\u666e\u901a\u306f\u3068\u308a\u3042\u3048\u305aunsigned char*\u3067\u4fdd\u6301\u3057\u3066\u3001\u6ce2\u5f62\u3068\u3057\u3066\u8aad\u3080\u3068\u304d\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u307f\u305f\u3044\u306a\u611f\u3058\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\n\u3042\u3093\u307e\u308a\u597d\u304d\u304f\u306a\u3044\u306e\u3067\u5206\u3051\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u4e00\u5fdc\u8aac\u660e\u3059\u308b\u30688bit\u306e\u5834\u54081byte\u3054\u3068\u306e\u30c7\u30fc\u30bf\u306a\u3093\u3067unsigned char\u3067\u4fdd\u5b58\u3001\n16bit\u306e\u5834\u54082byte\u30c7\u30fc\u30bf\u306a\u3093\u3067short\u3067\u4fdd\u5b58\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u3093\u3067\u30b9\u30c6\u30ec\u30aa\u306e\u5834\u5408L,R,L,R,...\u3068\u6ce2\u5f62\u304c\u4fdd\u5b58\u3055\u308c\u3066\u308b\u3093\u3067\u3001\n16bit\u30c7\u30fc\u30bf\u306e\u5834\u54081\u30d6\u30ed\u30c3\u30af4byte\u3067\u3059\u3002\nint RIFFFileSize; \u306f\u3001\u4e0a\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u3067\u8a00\u3046\u3068\u3053\u308d\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba(byte\u5358\u4f4d)\u3067\u3001\nint PCMDataSize; \u306f\u3001\u4e0a\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u3067\u8a00\u3046\u3068\u3053\u308d\u306e \u300c\u30c7\u30fc\u30bf\u306e\u9577\u3055 3\u300d \u306b\u76f8\u5f53\u3057\u307e\u3059\u3002\nint BufPos; \u306f\u5358\u306a\u308b\u30ab\u30a6\u30f3\u30bf\u3067\u3059\u3002\n\u5b9f\u969b\u91cd\u8981\u306a\u95a2\u6570\u90e8\u5206\u306f\n    bool LoadFile(std::string _name);\n    template <class T> T Read();\n    bool Get_End();\n\n\u3053\u308c\u3060\u3051\u3067\u3059\u3002\u3042\u3068\u306fGetter/Setter\u306a\u306e\u3067\u3002\nRead\u4ee5\u5916\u306e\u5b9f\u88c5\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nwave.cpp\n#include \"wave.h\"\n\n//---------------------------------------------------------------------------\nWAVE::WAVE(bool _LoopFlag = false){\n    BufPos = 0;\n    LoopFlag = _LoopFlag;\n}\n//---------------------------------------------------------------------------\nWAVE::WAVE(std::string _name,bool _LoopFlag = false){\n    BufPos = 0;\n    LoopFlag = _LoopFlag;\n    LoadFile(_name);\n}\n//---------------------------------------------------------------------------\nbool WAVE::LoadFile(std::string _name){\n    FILE *fp;\n    fopen_s(&fp,_name.c_str(), \"rb\");\n\n    std::string readbuf;    //\u9069\u5f53\n    readbuf.resize(4);\n    int readbuf2;   //\u9069\u5f53\u306a\u30d0\u30c3\u30d5\u30a1\n\n    //RIFF\u3092\u8aad\u3080\n    fread( (char*)readbuf.c_str(), 4,1,fp); //4byte\u8aad\u3080\u3000\"RIFF\"\u304c\u304b\u3048\u308b\n    if(readbuf != \"RIFF\")return false;\n\n    fread( &RIFFFileSize, 4,1,fp);  //4byte\u8aad\u3080\u3000\u3053\u308c\u4ee5\u964d\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba (\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba - 8)\u304c\u8fd4\u308b\n    //WAVE\u30c1\u30e3\u30f3\u30af\n    fread( (char*)readbuf.c_str(), 4,1,fp); //4byte\u8aad\u3080\u3000\"WAVE\"\u304c\u304b\u3048\u308b\n    if(readbuf != \"WAVE\")return false;\n\n    //\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u5b9a\u7fa9\n    fread( (char*)readbuf.c_str(), 4,1,fp); //4byte\u8aad\u3080\u3000\"fmt \"\u304c\u304b\u3048\u308b\n    if(readbuf != \"fmt \")return false;\n\n    //fmt\u30c1\u30e3\u30f3\u30af\u306e\u30d0\u30a4\u30c8\u6570\n    fread( &readbuf2, 4,1,fp);  //4byte\u8aad\u3080\u3000\u30ea\u30cb\u30a2PCM\u306a\u3089\u307016\u304c\u8fd4\u308b\n\n    //\u30c7\u30fc\u30bf1\n    fread( &fmt.format_id, 2,1,fp); //2byte\u8aad\u3080\u3000\u30ea\u30cb\u30a2PCM\u306a\u3089\u30701\u304c\u8fd4\u308b\n    fread( &fmt.channel, 2,1,fp);   //2byte\u8aad\u3080\u3000\u30e2\u30ce\u30e9\u30eb\u306a\u3089\u30701\u304c\u3001\u30b9\u30c6\u30ec\u30aa\u306a\u3089\u30702\u304c\u8fd4\u308b\n    fread( &fmt.sampling_rate, 4,1,fp); //4byte\u8aad\u3080\u300044.1kHz\u306a\u3089\u307044100\u304c\u8fd4\u308b\n    fread( &fmt.bytes_per_sec, 4,1,fp); //4byte\u8aad\u3080\u300044.1kHz 16bit \u30b9\u30c6\u30ec\u30aa\u306a\u3089\u307044100\u00d72\u00d72 = 176400\n    fread( &fmt.block_size, 2,1,fp);    //2byte\u8aad\u3080\u300016bit \u30b9\u30c6\u30ec\u30aa\u306a\u3089\u30702\u00d72 = 4\n    fread( &fmt.bits_per_sample, 2,1,fp);   //2byte\u8aad\u3080\u300016bit\u306a\u3089\u307016\n\n    //\u62e1\u5f35\u90e8\u5206\u306f\u5b58\u5728\u3057\u306a\u3044\u3082\u306e\u3068\u3057\u3066\u6271\u3046\n    if(fmt.format_id != 1)return false;\n\n    //data\u30c1\u30e3\u30f3\u30af\n    fread( (char*)readbuf.c_str(), 4,1,fp); //4byte\u8aad\u3080\u3000\"data\"\u304c\u304b\u3048\u308b\n    if(readbuf != \"data\")return false;\n    fread( &PCMDataSize, 4,1,fp);   //4byte\u8aad\u3080\u3000\u5b9f\u52b9\u30c7\u30fc\u30bf\u306e\u30d0\u30a4\u30c8\u6570\u304c\u304b\u3048\u308b\n\n    //\u4ee5\u4e0b\u3001\u4e0a\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u5206\u3060\u3051\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u5358\u4f4d\u3067\u30c7\u30fc\u30bf\u8aad\u307f\u51fa\u3057\n    if(fmt.bits_per_sample == 8){\n        //8\u30d3\u30c3\u30c8\n        data_8bit.resize(PCMDataSize+1);    //reserve\u3060\u3068\u7bc4\u56f2\u5916\u30a8\u30e9\u30fc\n        fread( &data_8bit[0],1,(size_t)2*PCMDataSize/fmt.block_size,fp);    //vector\u306b1byte\u305a\u3064\u8a70\u3081\u3066\u3044\u304f\n    }else if(fmt.bits_per_sample == 16){\n        //16\u30d3\u30c3\u30c8\n        data_16bit.resize(PCMDataSize/2+2); //reserve\u3060\u3068\u7bc4\u56f2\u5916\u30a8\u30e9\u30fc\n        fread( &data_16bit[0],2,(size_t)2*PCMDataSize/fmt.block_size,fp);   //vector\u306b2byte\u305a\u3064\u8a70\u3081\u3066\u3044\u304f\n    }\n\n    fclose( fp );\n    return true;    //\u6b63\u5e38\u7d42\u4e86\n}\n//---------------------------------------------------------------------------\nbool WAVE::Get_End(){ \n    if(fmt.bits_per_sample == 8){\n        return BufPos >= (int)data_8bit.size();\n    }else if(fmt.bits_per_sample == 16){\n        return BufPos >= (int)data_16bit.size();\n    }\n    return true;\n}\n//---------------------------------------------------------------------------\n\n\nLoadFile() \u304c\u306a\u3093\u304b\u9577\u3005\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001\n\u3084\u3063\u3066\u308b\u3053\u3068\u306ffread()\u3067\u8aad\u3093\u3067\u9069\u5b9c\u30e1\u30f3\u30d0\u306b\u683c\u7d0d\u3057\u3066\u308b\u3060\u3051\u3067\u3059\u3002\n\u66f8\u304d\u6368\u3066\u3058\u307f\u3066\u66f8\u3044\u305f\u306e\u3067\u4f8b\u5916\u306a\u306b\u305d\u308c\u304a\u3044\u3057\u3044\u306e\u3063\u3066\u611f\u3058\u3067\u3059\u306d\u2026\n\u307e\u3042\u5143\u3005\u6700\u4f4e\u9650\u306e\u6a5f\u80fd\u3057\u304b\u306a\u3044\u306e\u3067\u7f6e\u3044\u3068\u304d\u307e\u3057\u3087\u3046\u3002\nGet_End() \u306f\u6f14\u594f\u7d42\u4e86\u3092\u77e5\u3089\u305b\u308b\u3060\u3051\u306e\u95a2\u6570\u3067\u3059\u3002\n\u3055\u3066\u3001WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u30af\u30e9\u30b9\u304c\u3067\u304d\u305f\u306e\u3067\u3001\n\u5f8c\u7de8\u3067\u306f\u3053\u306e\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u5b9f\u969b\u306b\u97f3\u3092\u9cf4\u3089\u3057\u3066\u307f\u307e\u3059\u3002\n# 3\u7de8\u306b\u5206\u304b\u308c\u3066\u307e\u3059\n\u3053\u306e\u8a18\u4e8b\u306f\u524d\u5f8c\u7de8\u306b\u5206\u304b\u308c\u3066\u307e\u3059\u3002\nPortAudio\u3067\uff5e\u3063\u3066\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3053\u306e\u524d\u7de8\u3067\u306fPortAudio\u306e\u8a71\u306f\u307b\u307c\u51fa\u3066\u304d\u307e\u305b\u3093\u3001\n\u305d\u3063\u3061\u304c\u77e5\u308a\u305f\u3044\u65b9\u306f\u5f8c\u7de8\u306e\u65b9\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3042\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d3\u30eb\u30c9\u306b\u3064\u3044\u3066\u66f8\u3044\u305f\u6e96\u5099\u7de8\u3082\u3042\u308b\u306e\u3067\u305d\u3061\u3089\u3082\u53c2\u8003\u306b\u3002\n\n- [\u6e96\u5099\u7de8\uff1aVS2012\u3067PortAudio\u306e\u74b0\u5883\u69cb\u7bc9](http://qiita.com/nicolai_twi/items/86c26fb192f1613ec96a)\n- \u524d\u7de8\uff1aPortAudio\u3067WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u308b(WAVE\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u7de8)\u3000\u2190\u3044\u307e\u3053\u3053\n- [\u5f8c\u7de8\uff1aPortAudio\u3067WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u308b(\u9cf4\u3089\u3059\u7de8)](http://qiita.com/nicolai_twi/items/35cfbd868f42afedd88d)\n\n\n#\u4eca\u56de\u304b\u3089\u30b3\u30fc\u30c9\u66f8\u304f\u3088\n __[\u524d\u56de\u306e\u8a18\u4e8b\uff08\u6e96\u5099\u7de8\uff09](http://qiita.com/nicolai_twi/private/86c26fb192f1613ec96a)\u306b\u5f15\u304d\u7d9a\u304dPortAudio\u306e\u8a18\u4e8b\u3067\u3059\u3002__ \n\u4eca\u56de\u3082\u81ea\u5206\u7528\u5099\u5fd8\u9332\u3081\u3044\u305f\u8a18\u4e8b\u306a\u306e\u3067\u3001\u4ed6\u306e\u4eba\u304c\u8aad\u3080\u3053\u3068\u306f\u3042\u307e\u308a\u8003\u616e\u3057\u3066\u307e\u305b\u3093\u3059\u307f\u307e\u305b\u3093\u3002\n\uff08\u516c\u958b\u8a2d\u5b9a\u3067\u306f\u3042\u308a\u307e\u3059\u3051\u3069\uff09\n\n\u524d\u56de\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d3\u30eb\u30c9\uff5e\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\u6642\u306e\u6ce8\u610f\u70b9\u3092\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\n\u4eca\u56de\u306fPortAudio\u3092\u4f7f\u3063\u3066WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u307e\u3059\u3002 __\u4eca\u56de\u306f\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306f\u8003\u616e\u3057\u3066\u307e\u305b\u3093\u3002__ \n\n\u76f8\u3082\u5909\u308f\u3089\u305a\u5b9f\u884c\u74b0\u5883\u306fVS2012,Windows8,64bit\u3067\u3059\u3002\nPortAudio\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u524d\u56de\u30d3\u30eb\u30c9\u3057\u305f\u3084\u3064(portaudio_x86.dll\u3068lib)\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n# WAVE\u30d5\u30a1\u30a4\u30eb\u306f\u81ea\u5206\u3067\u53d6\u308a\u6271\u304a\u3046\n\u3055\u3066\u3001\u300c\u518d\u751f\u3057\u3066\u307f\u308b\u300d\u3068\u304b\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\n\u305d\u306e\u5b9fPortAudio\u306f\u30c9\u30e9\u30a4\u30d0\u3078\u50cd\u304d\u304b\u3051\u3001\u6ce2\u5f62\u3092\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3059\u308b\u6700\u4f4e\u9650\u306eAPI\u3057\u304b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067\u3001 __WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u30af\u30e9\u30b9\u306f\u81ea\u524d\u3067\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002__ \n\nOGG\u3068\u304bMP3\u3067\u3084\u308b\u5834\u5408\u3082\u57fa\u672c\u306f\u540c\u3058\u3067\u3059\u3093\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n _\u306a\u3093\u3067\u308f\u3056\u308f\u3056\u305d\u3093\u306a\u3081\u3063\u3061\u3083\u624b\u9593\u306a\u3053\u3068\u3084\u3063\u3066\u3093\u306e\uff1f\u3063\u3066\u8a00\u308f\u308c\u308b\u3068\u5b8c\u5168\u306a\u81ea\u5df1\u6e80\u8db3\u3067\u3059\u3001\u6687\u306a\u306e\u3067_ \n\n\u3067\u3001\u4eca\u56de\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u69d8\u306a\u3093\u3067\u3059\u3051\u3069\u4ee5\u4e0b\u306e2\u3064\u306b\u306a\u308a\u307e\u3059\u3002\n\n- http://www.kk.iij4u.or.jp/~kondo/wave/\n- http://d.hatena.ne.jp/colorcle/20100203/1265209117\n\n\u4e0a\u306e\u30b5\u30a4\u30c8\u306fWAVE\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u304c\u8f09\u3063\u3066\u308b\u30b5\u30a4\u30c8\u3067\u3059\u3002\n\u4e0b\u306fWAVE\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u3092\u30af\u30e9\u30b9\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u307f\u305f\u3044\u306a\u8a18\u4e8b\u3067\u3059\u3002\n\n __\u2026\u306a\u3093\u3067\u3059\u304c\u3001\u79c1\u306e\u7406\u89e3\u4e0d\u8db3\u3082\u3042\u3063\u3066\u306a\u3093\u304b\u6ce2\u5f62\u306e\u51fa\u529b\u304c\u3046\u307e\u304f\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u3001__ \n __\u4f3c\u305f\u3088\u3046\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u65b0\u3057\u304f\u30af\u30e9\u30b9\u4f5c\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\uff0f(^o^)\uff3c__ \n \uff08\u4e0b\u306e\u30b5\u30a4\u30c8\u306e\u4eba\u898b\u3066\u305f\u3089\u307b\u3093\u3068\u3059\u307f\u307e\u305b\u3093\u2026\uff09\n\n\u3068\u308a\u3042\u3048\u305aWAVE\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u683c\u7d0d\u3059\u308b\u69cb\u9020\u4f53\u304b\u3089\u8f09\u305b\u307e\u3059\u3002\n\n```cpp:wave.h\n//WAVE\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\n//---------------------------------------------------------------------------\n#define _CRT_SECURE_NO_WARNINGS\n#include <vector>\n#include <stdio.h>\n#include <string>\n\n//\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u683c\u7d0d\u7528\n//---------------------------------------------------------------------------\nstruct WAVE_FORMAT\n{\n    unsigned short format_id;\t//\u30d5\u30a9\u30fc\u30de\u30c3\u30c8ID\n    unsigned short channel;\t//\u30c1\u30e3\u30f3\u30cd\u30eb\u6570 monaural=1 , stereo=2\n    unsigned long  sampling_rate;//\uff11\u79d2\u9593\u306e\u30b5\u30f3\u30d7\u30eb\u6570\uff0c\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30ec\u30fc\u30c8(Hz),\u3060\u3044\u305f\u3044\u306f44.1kHz\n    unsigned long  bytes_per_sec;//\uff11\u79d2\u9593\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba \t44.1kHz 16bit \u30b9\u30c6\u30ec\u30aa \u306a\u3089\u307044100\u00d72\u00d72 = 176400\n    unsigned short block_size;\t//\uff11\u30d6\u30ed\u30c3\u30af\u306e\u30b5\u30a4\u30ba\uff0e8bit:nomaural=1byte , 16bit:stereo=4byte\n    unsigned short bits_per_sample;//\uff11\u30b5\u30f3\u30d7\u30eb\u306e\u30d3\u30c3\u30c8\u6570 8bit or 16bit\n};\n//---------------------------------------------------------------------------\n```\n\n\u3053\u306e\u69cb\u9020\u4f53\u306b\u306f\u3001\u4e0a\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u3067\u8a00\u3046\u3068\u3053\u308d\u306e\u300c\u30c7\u30fc\u30bf1\u300d\u306e\u90e8\u5206\u304c\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u307e\u3041\u3001\u3060\u3044\u305f\u3044\u306f __44100Hz,16bit,stereo,\u30ea\u30cb\u30a2PCM\u30d5\u30a9\u30fc\u30de\u30c3\u30c8__ \u306a\u3093\u3058\u3083\u306a\u3044\u304b\u3063\u3066\u6c17\u304c\u3057\u307e\u3059\u3002\n\n\u3067\u3001\u6b21\u306b\u6ce2\u5f62\u30c7\u30fc\u30bf\u3068\u3001\u4e0a\u306e\u69cb\u9020\u4f53\u3092\u6301\u3063\u3066\u308b\u30af\u30e9\u30b9\u3092\u8f09\u305b\u307e\u3059\u3002\n\u3068\u308a\u3042\u3048\u305a\u30d8\u30c3\u30c0\u306e\u307f\u3002\n\n```cpp:wave.h\n//---------------------------------------------------------------------------\nclass WAVE\n{\nprivate:\n\tWAVE(const WAVE&);                  //\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\tWAVE& operator=(const WAVE&);       //\u4ee3\u5165\u6f14\u7b97\u5b50\u5b9a\u7fa9\n\n    WAVE_FORMAT fmt;                    //\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u60c5\u5831\n    std::vector<unsigned char> data_8bit;\t//\u97f3\u30c7\u30fc\u30bf(8bit\u306e\u5834\u5408)\n    std::vector<short> data_16bit;\t\t\t//\u97f3\u30c7\u30fc\u30bf(16bit\u306e\u5834\u5408)\n\n    int RIFFFileSize;\t\t\t\t\t//RIFF\u30d8\u30c3\u30c0\u304b\u3089\u8aad\u3093\u3060\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\n\tint PCMDataSize;\t\t\t\t\t//\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\n\tint BufPos;\t\t\t\t\t\t\t//\u30d0\u30c3\u30d5\u30a1\u30dd\u30b8\u30b7\u30e7\u30f3\n\tbool LoopFlag;\t\t\t\t\t\t//\u30eb\u30fc\u30d7\u30d5\u30e9\u30b0\n    \npublic:\n\tWAVE(bool _LoopFlag = false);\n\tWAVE(std::string _name,bool _LoopFlag = false);\n\t~WAVE(){}\n\tbool LoadFile(std::string _name);\n\ttemplate <class T> T WAVE::Read(){\n\t\t//PCM\u30c7\u30fc\u30bf\u3092\u8aad\u3093\u3067\u6ce2\u5f62\u3092\u8fd4\u3059\n\t\tif(LoopFlag && Get_End()){\n\t\t\t//\u30eb\u30fc\u30d7\u30d5\u30e9\u30b0\u304c\u7acb\u3063\u3066\u308b\u5834\u5408\u3001\u5dfb\u304d\u623b\u3057\n\t\t\tBufPos = 0;\n\t\t}\n\t\tif(fmt.bits_per_sample == 8){\n\t\t\t//8bit\n\t\t\treturn data_8bit[BufPos++];\n\t\t}else if(fmt.bits_per_sample == 16){\n\t\t\t//16bit\n\t\t\treturn data_16bit[BufPos++];\n\t\t}\n\t\treturn 0;\n\t}\n\n\tbool Get_End();\n    \n    WAVE_FORMAT    Get_Format(){ return fmt; }\n    unsigned long  Get_DataSize(){ return PCMDataSize; }\n    double Get_Sec(){ return PCMDataSize/(double)fmt.sampling_rate; }\n\tvoid Set_LoopFlag(bool _LoopFlag){ LoopFlag = _LoopFlag; }\n\tbool Get_LoopFlag(){return LoopFlag;}\n};\n//---------------------------------------------------------------------------\n```\n\nRead\u95a2\u6570\u3060\u3051\u30d8\u30c3\u30c0\u5185\u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u306f\u3001\n __\u30e1\u30f3\u30d0\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u30d8\u30c3\u30c0\u5185\u306b\u66f8\u304b\u306a\u3044\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u308b\u305f\u3081__ \u3067\u3059\u3002\n\n\u6ce2\u5f62\u90e8\u5206\u306e\u8aad\u307f\u51fa\u3057\u3067\u3059\u304c\u300116bit\u306e\u5834\u5408short\u3068\u3057\u3066vector\u306b\u8aad\u3093\u3067\u3001\n8bit\u306e\u5834\u5408unsigned char\u3068\u3057\u3066\u8aad\u3093\u3067\u683c\u7d0d\u307f\u305f\u3044\u306a\u5b9f\u88c5\u3067\u3059\u3002\n\u3069\u3046\u3067\u3082\u3044\u3044\u3067\u3059\u304c\u500b\u4eba\u7684\u306bC++\u306e\u30d5\u30a1\u30a4\u30eb\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u5acc\u3044\u306a\u306e\u3067char*\u578b\u3082\u5acc\u3044\u306a\u3093\u3067\u3059\u3088\u2026\u3002\n\u666e\u901a\u306f\u3068\u308a\u3042\u3048\u305aunsigned char*\u3067\u4fdd\u6301\u3057\u3066\u3001\u6ce2\u5f62\u3068\u3057\u3066\u8aad\u3080\u3068\u304d\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u307f\u305f\u3044\u306a\u611f\u3058\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\n\u3042\u3093\u307e\u308a\u597d\u304d\u304f\u306a\u3044\u306e\u3067\u5206\u3051\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u4e00\u5fdc\u8aac\u660e\u3059\u308b\u30688bit\u306e\u5834\u54081byte\u3054\u3068\u306e\u30c7\u30fc\u30bf\u306a\u3093\u3067unsigned char\u3067\u4fdd\u5b58\u3001\n16bit\u306e\u5834\u54082byte\u30c7\u30fc\u30bf\u306a\u3093\u3067short\u3067\u4fdd\u5b58\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u3093\u3067\u30b9\u30c6\u30ec\u30aa\u306e\u5834\u5408L,R,L,R,...\u3068\u6ce2\u5f62\u304c\u4fdd\u5b58\u3055\u308c\u3066\u308b\u3093\u3067\u3001\n16bit\u30c7\u30fc\u30bf\u306e\u5834\u54081\u30d6\u30ed\u30c3\u30af4byte\u3067\u3059\u3002\n\n `int RIFFFileSize;` \u306f\u3001\u4e0a\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u3067\u8a00\u3046\u3068\u3053\u308d\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba(byte\u5358\u4f4d)\u3067\u3001\n `int PCMDataSize;` \u306f\u3001\u4e0a\u306e\u53c2\u8003\u30b5\u30a4\u30c8\u3067\u8a00\u3046\u3068\u3053\u308d\u306e __\u300c\u30c7\u30fc\u30bf\u306e\u9577\u3055 3\u300d__ \u306b\u76f8\u5f53\u3057\u307e\u3059\u3002\n `int BufPos;` \u306f\u5358\u306a\u308b\u30ab\u30a6\u30f3\u30bf\u3067\u3059\u3002\n\u5b9f\u969b\u91cd\u8981\u306a\u95a2\u6570\u90e8\u5206\u306f\n\n```cpp\n\tbool LoadFile(std::string _name);\n\ttemplate <class T> T Read();\n\tbool Get_End();\n```\n\n\u3053\u308c\u3060\u3051\u3067\u3059\u3002\u3042\u3068\u306fGetter/Setter\u306a\u306e\u3067\u3002\n\n\nRead\u4ee5\u5916\u306e\u5b9f\u88c5\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```cpp:wave.cpp\n#include \"wave.h\"\n\n//---------------------------------------------------------------------------\nWAVE::WAVE(bool _LoopFlag = false){\n\tBufPos = 0;\n\tLoopFlag = _LoopFlag;\n}\n//---------------------------------------------------------------------------\nWAVE::WAVE(std::string _name,bool _LoopFlag = false){\n\tBufPos = 0;\n\tLoopFlag = _LoopFlag;\n\tLoadFile(_name);\n}\n//---------------------------------------------------------------------------\nbool WAVE::LoadFile(std::string _name){\n\tFILE *fp;\n\tfopen_s(&fp,_name.c_str(), \"rb\");\n\n\tstd::string readbuf;\t//\u9069\u5f53\n\treadbuf.resize(4);\n\tint readbuf2;\t//\u9069\u5f53\u306a\u30d0\u30c3\u30d5\u30a1\n\n\t//RIFF\u3092\u8aad\u3080\n\tfread( (char*)readbuf.c_str(), 4,1,fp);\t//4byte\u8aad\u3080\u3000\"RIFF\"\u304c\u304b\u3048\u308b\n\tif(readbuf != \"RIFF\")return false;\n\n\tfread( &RIFFFileSize, 4,1,fp);\t//4byte\u8aad\u3080\u3000\u3053\u308c\u4ee5\u964d\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba (\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba - 8)\u304c\u8fd4\u308b\n\t//WAVE\u30c1\u30e3\u30f3\u30af\n\tfread( (char*)readbuf.c_str(), 4,1,fp);\t//4byte\u8aad\u3080\u3000\"WAVE\"\u304c\u304b\u3048\u308b\n\tif(readbuf != \"WAVE\")return false;\n\n\t//\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u5b9a\u7fa9\n\tfread( (char*)readbuf.c_str(), 4,1,fp);\t//4byte\u8aad\u3080\u3000\"fmt \"\u304c\u304b\u3048\u308b\n\tif(readbuf != \"fmt \")return false;\n\n\t//fmt\u30c1\u30e3\u30f3\u30af\u306e\u30d0\u30a4\u30c8\u6570\n\tfread( &readbuf2, 4,1,fp);\t//4byte\u8aad\u3080\u3000\u30ea\u30cb\u30a2PCM\u306a\u3089\u307016\u304c\u8fd4\u308b\n\n\t//\u30c7\u30fc\u30bf1\n\tfread( &fmt.format_id, 2,1,fp);\t//2byte\u8aad\u3080\u3000\u30ea\u30cb\u30a2PCM\u306a\u3089\u30701\u304c\u8fd4\u308b\n\tfread( &fmt.channel, 2,1,fp);\t//2byte\u8aad\u3080\u3000\u30e2\u30ce\u30e9\u30eb\u306a\u3089\u30701\u304c\u3001\u30b9\u30c6\u30ec\u30aa\u306a\u3089\u30702\u304c\u8fd4\u308b\n\tfread( &fmt.sampling_rate, 4,1,fp);\t//4byte\u8aad\u3080\u300044.1kHz\u306a\u3089\u307044100\u304c\u8fd4\u308b\n\tfread( &fmt.bytes_per_sec, 4,1,fp);\t//4byte\u8aad\u3080\u300044.1kHz 16bit \u30b9\u30c6\u30ec\u30aa\u306a\u3089\u307044100\u00d72\u00d72 = 176400\n\tfread( &fmt.block_size, 2,1,fp);\t//2byte\u8aad\u3080\u300016bit \u30b9\u30c6\u30ec\u30aa\u306a\u3089\u30702\u00d72 = 4\n\tfread( &fmt.bits_per_sample, 2,1,fp);\t//2byte\u8aad\u3080\u300016bit\u306a\u3089\u307016\n\n\t//\u62e1\u5f35\u90e8\u5206\u306f\u5b58\u5728\u3057\u306a\u3044\u3082\u306e\u3068\u3057\u3066\u6271\u3046\n\tif(fmt.format_id != 1)return false;\n\n\t//data\u30c1\u30e3\u30f3\u30af\n\tfread( (char*)readbuf.c_str(), 4,1,fp);\t//4byte\u8aad\u3080\u3000\"data\"\u304c\u304b\u3048\u308b\n\tif(readbuf != \"data\")return false;\n\tfread( &PCMDataSize, 4,1,fp);\t//4byte\u8aad\u3080\u3000\u5b9f\u52b9\u30c7\u30fc\u30bf\u306e\u30d0\u30a4\u30c8\u6570\u304c\u304b\u3048\u308b\n\n\t//\u4ee5\u4e0b\u3001\u4e0a\u306e\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u5206\u3060\u3051\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u5358\u4f4d\u3067\u30c7\u30fc\u30bf\u8aad\u307f\u51fa\u3057\n\tif(fmt.bits_per_sample == 8){\n\t\t//8\u30d3\u30c3\u30c8\n\t\tdata_8bit.resize(PCMDataSize+1);\t//reserve\u3060\u3068\u7bc4\u56f2\u5916\u30a8\u30e9\u30fc\n\t\tfread( &data_8bit[0],1,(size_t)2*PCMDataSize/fmt.block_size,fp);\t//vector\u306b1byte\u305a\u3064\u8a70\u3081\u3066\u3044\u304f\n\t}else if(fmt.bits_per_sample == 16){\n\t\t//16\u30d3\u30c3\u30c8\n\t\tdata_16bit.resize(PCMDataSize/2+2);\t//reserve\u3060\u3068\u7bc4\u56f2\u5916\u30a8\u30e9\u30fc\n\t\tfread( &data_16bit[0],2,(size_t)2*PCMDataSize/fmt.block_size,fp);\t//vector\u306b2byte\u305a\u3064\u8a70\u3081\u3066\u3044\u304f\n\t}\n\n\tfclose( fp );\n\treturn true;\t//\u6b63\u5e38\u7d42\u4e86\n}\n//---------------------------------------------------------------------------\nbool WAVE::Get_End(){ \n\tif(fmt.bits_per_sample == 8){\n\t\treturn BufPos >= (int)data_8bit.size();\n\t}else if(fmt.bits_per_sample == 16){\n\t\treturn BufPos >= (int)data_16bit.size();\n\t}\n\treturn true;\n}\n//---------------------------------------------------------------------------\n```\n\n `LoadFile()` \u304c\u306a\u3093\u304b\u9577\u3005\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3001\n\u3084\u3063\u3066\u308b\u3053\u3068\u306ffread()\u3067\u8aad\u3093\u3067\u9069\u5b9c\u30e1\u30f3\u30d0\u306b\u683c\u7d0d\u3057\u3066\u308b\u3060\u3051\u3067\u3059\u3002\n\u66f8\u304d\u6368\u3066\u3058\u307f\u3066\u66f8\u3044\u305f\u306e\u3067\u4f8b\u5916\u306a\u306b\u305d\u308c\u304a\u3044\u3057\u3044\u306e\u3063\u3066\u611f\u3058\u3067\u3059\u306d\u2026\n\u307e\u3042\u5143\u3005\u6700\u4f4e\u9650\u306e\u6a5f\u80fd\u3057\u304b\u306a\u3044\u306e\u3067\u7f6e\u3044\u3068\u304d\u307e\u3057\u3087\u3046\u3002\n\n `Get_End()` \u306f\u6f14\u594f\u7d42\u4e86\u3092\u77e5\u3089\u305b\u308b\u3060\u3051\u306e\u95a2\u6570\u3067\u3059\u3002\n\n\n\u3055\u3066\u3001WAVE\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u30af\u30e9\u30b9\u304c\u3067\u304d\u305f\u306e\u3067\u3001\n[\u5f8c\u7de8\u3067\u306f\u3053\u306e\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u5b9f\u969b\u306b\u97f3\u3092\u9cf4\u3089\u3057\u3066\u307f\u307e\u3059\u3002](http://qiita.com/nicolai_twi/items/35cfbd868f42afedd88d)", "tags": ["\u30aa\u30fc\u30c7\u30a3\u30aa", "PortAudio", "C++", "VisualStudio", "\u97f3\u58f0\u51e6\u7406"]}