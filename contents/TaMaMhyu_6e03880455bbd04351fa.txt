{"tags": ["Groovy", "Archive", "tar.gz", "tar", "gzip"], "context": " More than 1 year has passed since last update.Apache Commons Compress\u3092\u4f7f\u7528\u3057\u3066\u5c55\u958b\u3057\u3066\u307f\u308b\u3002\n\u3068\u308a\u3042\u3048\u305a\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3067\u3067\u304d\u305f\u3002(Windows 7\u3067\u78ba\u8a8d\u3057\u305f)\n#!/bin/env groovy\n\n@Grab('org.apache.commons:commons-compress:1.+')\nimport org.apache.commons.compress.compressors.gzip.*\nimport org.apache.commons.compress.archivers.tar.*\nimport org.apache.commons.compress.utils.*\n\n\nnew BufferedInputStream(new GzipCompressorInputStream(new FileInputStream('./archive1.tar.gz'))).with { gzipInputStream ->\n    new TarArchiveInputStream(gzipInputStream, 64 * 1024).with { tarInputStream -> // TODO: \u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba\u306f\u9069\u5f53\n        def tarEntry\n        while ((tarEntry = tarInputStream.nextTarEntry) != null) {\n            def entryFile = new File(\"./${tarEntry.name}\")\n            if (tarEntry.isDirectory()) {\n                entryFile.mkdirs()\n            }\n            else {\n                if (!entryFile.parentFile.exists()) {\n                    entryFile.parentFile.mkdirs()\n                }\n                entryFile.withOutputStream { outputStream ->\n                    IOUtils.copy(tarInputStream, outputStream, 64 * 1024) // TODO: \u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba\u306f\u9069\u5f53\n                }\n                entryFile.with {\n                    // TODO: \u66f4\u65b0\u65e5\u6642\u4ee5\u5916\u306f\u53cd\u6620\u3057\u3066\u3044\u306a\u3044\n                    lastModified = tarEntry.modTime.time\n                }\n            }\n        }\n    }\n}\n\ntar\u306e\u5c55\u958b\u306b\u3064\u3044\u3066\u306f\u3001\u5c55\u958b\u5f8c\u306b\u66f4\u65b0\u65e5\u6642\u3060\u3051\u53cd\u6620\u3057\u3066\u3044\u308b\u3002\u66f4\u65b0\u65e5\u6642\u4ee5\u5916\u306e\u6a29\u9650\u306a\u3069\u306f\u53cd\u6620\u3057\u3066\u3044\u306a\u3044\u3002\n\u5b9f\u969b\u306b\u306f\u3001\u3053\u308c\u306b\u52a0\u3048\u3066\u3001FTP\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3001MD5\u30cf\u30c3\u30b7\u30e5\u5024\u5224\u5b9a\u3001AsperaConnect\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3001SFTP\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306a\u3069\u3082\u4e00\u7dd2\u306b\u3084\u3063\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u5272\u611b\u3057\u305f\u3002\n\n\u53c2\u8003\u8cc7\u6599\nhttp://groovyarekore.blogspot.jp/2010/09/groovyapache-commons-compresstar_11.html\nhttp://groovyarekore.blogspot.jp/2010/09/groovyapache-commons-compressgzip_20.html\n[Apache Commons Compress](https://commons.apache.org/proper/commons-compress/)\u3092\u4f7f\u7528\u3057\u3066\u5c55\u958b\u3057\u3066\u307f\u308b\u3002\n\u3068\u308a\u3042\u3048\u305a\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3067\u3067\u304d\u305f\u3002(Windows 7\u3067\u78ba\u8a8d\u3057\u305f)\n\n```groovy\n#!/bin/env groovy\n\n@Grab('org.apache.commons:commons-compress:1.+')\nimport org.apache.commons.compress.compressors.gzip.*\nimport org.apache.commons.compress.archivers.tar.*\nimport org.apache.commons.compress.utils.*\n\n\nnew BufferedInputStream(new GzipCompressorInputStream(new FileInputStream('./archive1.tar.gz'))).with { gzipInputStream ->\n\tnew TarArchiveInputStream(gzipInputStream, 64 * 1024).with { tarInputStream -> // TODO: \u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba\u306f\u9069\u5f53\n\t\tdef tarEntry\n\t\twhile ((tarEntry = tarInputStream.nextTarEntry) != null) {\n\t\t\tdef entryFile = new File(\"./${tarEntry.name}\")\n\t\t\tif (tarEntry.isDirectory()) {\n\t\t\t\tentryFile.mkdirs()\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!entryFile.parentFile.exists()) {\n\t\t\t\t\tentryFile.parentFile.mkdirs()\n\t\t\t\t}\n\t\t\t\tentryFile.withOutputStream { outputStream ->\n\t\t\t\t\tIOUtils.copy(tarInputStream, outputStream, 64 * 1024) // TODO: \u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba\u306f\u9069\u5f53\n\t\t\t\t}\n\t\t\t\tentryFile.with {\n\t\t\t\t\t// TODO: \u66f4\u65b0\u65e5\u6642\u4ee5\u5916\u306f\u53cd\u6620\u3057\u3066\u3044\u306a\u3044\n\t\t\t\t\tlastModified = tarEntry.modTime.time\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\ntar\u306e\u5c55\u958b\u306b\u3064\u3044\u3066\u306f\u3001\u5c55\u958b\u5f8c\u306b\u66f4\u65b0\u65e5\u6642\u3060\u3051\u53cd\u6620\u3057\u3066\u3044\u308b\u3002\u66f4\u65b0\u65e5\u6642\u4ee5\u5916\u306e\u6a29\u9650\u306a\u3069\u306f\u53cd\u6620\u3057\u3066\u3044\u306a\u3044\u3002\n\n\u5b9f\u969b\u306b\u306f\u3001\u3053\u308c\u306b\u52a0\u3048\u3066\u3001FTP\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3001MD5\u30cf\u30c3\u30b7\u30e5\u5024\u5224\u5b9a\u3001AsperaConnect\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3001SFTP\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306a\u3069\u3082\u4e00\u7dd2\u306b\u3084\u3063\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u5272\u611b\u3057\u305f\u3002\n\n-----\n\u53c2\u8003\u8cc7\u6599\nhttp://groovyarekore.blogspot.jp/2010/09/groovyapache-commons-compresstar_11.html\nhttp://groovyarekore.blogspot.jp/2010/09/groovyapache-commons-compressgzip_20.html\n"}