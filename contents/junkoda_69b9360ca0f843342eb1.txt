{"context": "\u4f3c\u305f\u3088\u3046\u306a\u3082\u306e\u306f\u3044\u3063\u3071\u3044\u3042\u308b\u3051\u308c\u3069\u3001zsh \u3068 peco \u3092\u4f7f\u3063\u305f\u79c1\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\u3002\nz <dir name>\n\n[tab] \u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e00\u89a7\u304b\u3089\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u3092\u88dc\u5b8c\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u304c\u4e00\u81f4\u3057\u305f\u3089\u4e00\u6c17\u306b\u79fb\u52d5\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u90e8\u5206\u7684\u306b\u4e00\u81f4\u3057\u305f\u3089 peco \u3067\u9078\u3076\n\n\npeco \u3068\u306f \"Simplistic interactive filtering tool\"\n% brew install peco\n\n~/.zshrc \u306b z \u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304f\u3002\nautoload -U compinit; compinit\n\nfunction _z {\n  compadd `cat $HOME/.peco/z-paths | sed 's|.*/||'`\n}\n\ncompdef _z z\n\n# z <dir>\n# z add . : add current directory to directory list\n# z edit  : edit the directory list with $ZEDIT\n\nfunction z() {\n  local PCD_FILE=$HOME/.peco/z-paths\n  local PCD_RETURN\n  local ZEDIT=${EDITOR:-emacs} # set your favourite editor\n\n  if [ $1 ] && [ $1 = \"add\" ]; then\n    # z add <dir>\n    if [ $2 ]; then\n      local ADD_DIR=$2\n      if [ $2 = \".\" ]; then\n        ADD_DIR=$(pwd) \n      fi\n      echo \"Adding $ADD_DIR to $PCD_FILE\"\n      echo $ADD_DIR >> $PCD_FILE\n    fi\n  elif [ $1 ] && [ $1 = \"edit\" ]; then\n    # z edit\n    $ZEDIT $PCD_FILE\n  elif [ $1 ] && [ $1 = \".\" ]; then\n    PCD_RETURN=$(/bin/ls -F | grep /$ | sort | peco)\n  elif [ $1 ]; then\n    # z <dir> unique matching\n    local GREP_RETURN\n    local grepcmd=\"cat $PCD_FILE\"\n    for pat in $*\n    do\n      grepcmd=\"$grepcmd | grep -e '/$pat'\"\n    done\n\n    grepcmd=`echo $grepcmd | sed \"s/'$/\\$'/\"`\n\n    GREP_RETURN=`eval $grepcmd`\n    echo \"grep return = $GREP_RETURN\"\n\n    if [ `expr \"$GREP_RETURN\" : '.*'` -ne 0 -a \\\n     $(echo $GREP_RETURN | wc -l) -eq 1 ]; then\n      # unique match\n      PCD_RETURN=$GREP_RETURN\n    else\n      PCD_RETURN=$(cat $PCD_FILE | sort | peco --query \"$*\")\n    fi\n  else\n    PCD_RETURN=$(cat $PCD_FILE | sort | peco)\n  fi\n\n  if [ $PCD_RETURN ]; then\n    echo $PCD_RETURN\n    cd $PCD_RETURN\n  fi\n}\n\n\u307e\u305a\u306f\n% mkdir ~/.peco\n% touch ~/.peco/z-paths\n\n\u79c1\u306f\u4e00\u89a7\u306b\u8ffd\u52a0\u3057\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u624b\u52d5\u3067\u8ffd\u52a0\u3057\u3066\u3044\u308b\n% z add .\n\n\u3082\u3057\u3001$HOME\u4ee5\u4e0b\u5168\u90e8\u3092\u81ea\u52d5\u7684\u306b\u767b\u9332\u3057\u305f\u3051\u308c\u3070 find \u306a\u3069\n% find $HOME -type d > ~/.peco/z-paths\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e00\u89a7\u3092\u307f\u305f\u308a\u7de8\u96c6\u3059\u308b\u306b\u306f\n% z edit\n\n\n\u53c2\u8003\nzsh\u306e\u95a2\u6570\u306a\u3069\u306e\u30cd\u30bf\u5143\u306f\u5fd8\u308c\u3066\u3057\u307e\u3044\u307e\u3057\u305f(_ _)\u3002\n\n\u4f3c\u305f\u3088\u3046\u306a\u3082\u306e\u306f\u3044\u3063\u3071\u3044\u3042\u308b\u3051\u308c\u3069\u3001zsh \u3068 [peco](https://github.com/peco/peco) \u3092\u4f7f\u3063\u305f\u79c1\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\u3002\n\n`z <dir name>`\n\n- [tab] \u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e00\u89a7\u304b\u3089\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u3092\u88dc\u5b8c\n- \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u304c\u4e00\u81f4\u3057\u305f\u3089\u4e00\u6c17\u306b\u79fb\u52d5\n- \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u90e8\u5206\u7684\u306b\u4e00\u81f4\u3057\u305f\u3089 peco \u3067\u9078\u3076\n\n![peco_cd.png](https://qiita-image-store.s3.amazonaws.com/0/63210/49a4b1a1-68d1-f41b-3518-664b9f75958c.png \"peco_cd.png\")\n\n\n`peco` \u3068\u306f \"Simplistic interactive filtering tool\"\n\n```bash\n% brew install peco\n```\n\n`~/.zshrc` \u306b `z` \u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304f\u3002\n\n```bash\nautoload -U compinit; compinit\n\nfunction _z {\n  compadd `cat $HOME/.peco/z-paths | sed 's|.*/||'`\n}\n\ncompdef _z z\n\n# z <dir>\n# z add . : add current directory to directory list\n# z edit  : edit the directory list with $ZEDIT\n\nfunction z() {\n  local PCD_FILE=$HOME/.peco/z-paths\n  local PCD_RETURN\n  local ZEDIT=${EDITOR:-emacs} # set your favourite editor\n\n  if [ $1 ] && [ $1 = \"add\" ]; then\n    # z add <dir>\n    if [ $2 ]; then\n      local ADD_DIR=$2\n      if [ $2 = \".\" ]; then\n        ADD_DIR=$(pwd) \n      fi\n      echo \"Adding $ADD_DIR to $PCD_FILE\"\n      echo $ADD_DIR >> $PCD_FILE\n    fi\n  elif [ $1 ] && [ $1 = \"edit\" ]; then\n    # z edit\n    $ZEDIT $PCD_FILE\n  elif [ $1 ] && [ $1 = \".\" ]; then\n    PCD_RETURN=$(/bin/ls -F | grep /$ | sort | peco)\n  elif [ $1 ]; then\n    # z <dir> unique matching\n    local GREP_RETURN\n    local grepcmd=\"cat $PCD_FILE\"\n    for pat in $*\n    do\n      grepcmd=\"$grepcmd | grep -e '/$pat'\"\n    done\n\n    grepcmd=`echo $grepcmd | sed \"s/'$/\\$'/\"`\n\n    GREP_RETURN=`eval $grepcmd`\n    echo \"grep return = $GREP_RETURN\"\n\n    if [ `expr \"$GREP_RETURN\" : '.*'` -ne 0 -a \\\n\t $(echo $GREP_RETURN | wc -l) -eq 1 ]; then\n      # unique match\n      PCD_RETURN=$GREP_RETURN\n    else\n      PCD_RETURN=$(cat $PCD_FILE | sort | peco --query \"$*\")\n    fi\n  else\n    PCD_RETURN=$(cat $PCD_FILE | sort | peco)\n  fi\n\n  if [ $PCD_RETURN ]; then\n    echo $PCD_RETURN\n    cd $PCD_RETURN\n  fi\n}\n```\n\n\u307e\u305a\u306f\n\n```zsh\n% mkdir ~/.peco\n% touch ~/.peco/z-paths\n```\n\n\u79c1\u306f\u4e00\u89a7\u306b\u8ffd\u52a0\u3057\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u624b\u52d5\u3067\u8ffd\u52a0\u3057\u3066\u3044\u308b\n\n```bash\n% z add .\n```\n\n\u3082\u3057\u3001$HOME\u4ee5\u4e0b\u5168\u90e8\u3092\u81ea\u52d5\u7684\u306b\u767b\u9332\u3057\u305f\u3051\u308c\u3070 find \u306a\u3069\n\n```bash\n% find $HOME -type d > ~/.peco/z-paths\n```\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e00\u89a7\u3092\u307f\u305f\u308a\u7de8\u96c6\u3059\u308b\u306b\u306f\n\n```bash\n% z edit\n```\n\n\n\n\n### \u53c2\u8003\nzsh\u306e\u95a2\u6570\u306a\u3069\u306e\u30cd\u30bf\u5143\u306f\u5fd8\u308c\u3066\u3057\u307e\u3044\u307e\u3057\u305f(_ _)\u3002\n", "tags": ["Zsh", "Peco"]}