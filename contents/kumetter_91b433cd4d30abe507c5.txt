{"context": "Swift3\u3067\u52d5\u4f5c\u3059\u308bUITextView\u306bHTML\u3092\u8868\u793a\u3059\u308b\u30b3\u30fc\u30c9\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\nNSHTMLTextDocumentType\u304c\u4f7f\u7528\u4e0d\u53ef\nOption\u3068\u3057\u3066\u6e21\u3059NSCharacterEncodingDocumentAttribute\u306e\u5024\u306bNSHTMLTextDocumentType\u3092\u4f7f\u7528\u3057\u3088\u3046\u3068\u3059\u308b\u3068String.Encoding.utf8\u3092\u4f7f\u3048\u3068Xcode\u3055\u3093\u306b\u6012\u3089\u308c\u307e\u3059\u3002\n\nString.Encoding.utf8\u3092\u4f7f\u3046\u3068\u30a2\u30d7\u30ea\u304c\u843d\u3061\u308b\n\u3057\u304b\u3057\u3001String.Encoding.utf8\u3092\u8a2d\u5b9a\u3059\u308b\u3068NSAttributedString\u306e\u5b9f\u884c\u6642\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u30a2\u30d7\u30ea\u304c\u843d\u3061\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3002\u3002\n\n\u5bfe\u5fdc\n\u3053\u3061\u3089\u3067\u540c\u69d8\u306e\u554f\u984c\u3067\u30cf\u30de\u3063\u3066\u3044\u308b\u65b9\u3092\u767a\u898b\u3002\nApple\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306b\u3088\u308c\u3070NSCharacterEncodingDocumentAttribute\u306e\u5024\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u306e\u306fNSNumber\u578b\u3068\u306e\u3053\u3068\u3002\nString.Encoding.utf8\u306fString.Encoding\u578b\u306a\u306e\u3067\u3082\u3061\u308d\u3093NG\u3067\u3059\u306d\u3002\nString.Encoding.utf8.rawValue\u3068\u3059\u308b\u306e\u304c\u30ad\u30e2\u3002\n\u4ee5\u4e0b\u306bHTML\u5f62\u5f0f\u306e\u6587\u5b57\u5217\u3092NSAttributedString\u306b\u3057\u3066\u8fd4\u3059\u30e1\u30bd\u30c3\u30c9\u3092\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n    /// HTML\u5f62\u5f0f\u3067\u8a18\u8ff0\u3055\u308c\u305f\u6587\u5b57\u5217\u3092NSAttributedString\u306b\u5909\u63db\u3059\u308b\n    ///\n    /// - Parameter text: \u5909\u63db\u3059\u308b\u6587\u5b57\u5217\n    /// - Returns: HTML\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5909\u63db\u3055\u308c\u305fNSAttributedString\n    func parseText2HTML(sourceText text: String) -> NSAttributedString? {\n\n        // \u53d7\u3051\u53d6\u3063\u305f\u30c7\u30fc\u30bf\u3092UTF-8\u30a8\u30f3\u30b3\u30fc\u30c9\u3059\u308b\n        let encodeData = text.data(using: String.Encoding.utf8, allowLossyConversion: true)\n\n        // \u8868\u793a\u30c7\u30fc\u30bf\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b       \n        let attributedOptions : [String: AnyObject] = [\n            NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType as AnyObject,\n            NSCharacterEncodingDocumentAttribute: String.Encoding.utf8.rawValue as AnyObject\n        ]\n\n        // \u6587\u5b57\u5217\u306e\u5909\u63db\u51e6\u7406\n        var attributedString:NSAttributedString?\n        do {\n            attributedString = try NSAttributedString(\n                data: encodeData!,\n                options: attributedOptions,\n                documentAttributes: nil\n            )\n        } catch let e {\n            // \u5909\u63db\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u5834\u5408\n        }\n\n        return attributedString\n    }\n\nSwift3\u3067\u52d5\u4f5c\u3059\u308bUITextView\u306bHTML\u3092\u8868\u793a\u3059\u308b\u30b3\u30fc\u30c9\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n#NSHTMLTextDocumentType\u304c\u4f7f\u7528\u4e0d\u53ef\n\nOption\u3068\u3057\u3066\u6e21\u3059NSCharacterEncodingDocumentAttribute\u306e\u5024\u306b**NSHTMLTextDocumentType**\u3092\u4f7f\u7528\u3057\u3088\u3046\u3068\u3059\u308b\u3068**String.Encoding.utf8**\u3092\u4f7f\u3048\u3068Xcode\u3055\u3093\u306b\u6012\u3089\u308c\u307e\u3059\u3002\n\n#String.Encoding.utf8\u3092\u4f7f\u3046\u3068\u30a2\u30d7\u30ea\u304c\u843d\u3061\u308b\n\n\u3057\u304b\u3057\u3001**String.Encoding.utf8**\u3092\u8a2d\u5b9a\u3059\u308b\u3068NSAttributedString\u306e\u5b9f\u884c\u6642\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u30a2\u30d7\u30ea\u304c\u843d\u3061\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3002\u3002\n\n#\u5bfe\u5fdc\n\n[\u3053\u3061\u3089](http://stackoverflow.com/questions/39248092/nsattributedstring-extension-in-swift-3)\u3067\u540c\u69d8\u306e\u554f\u984c\u3067\u30cf\u30de\u3063\u3066\u3044\u308b\u65b9\u3092\u767a\u898b\u3002\n[Apple\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://developer.apple.com/reference/uikit/nscharacterencodingdocumentattribute)\u306b\u3088\u308c\u3070NSCharacterEncodingDocumentAttribute\u306e\u5024\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u306e\u306fNSNumber\u578b\u3068\u306e\u3053\u3068\u3002\nString.Encoding.utf8\u306fString.Encoding\u578b\u306a\u306e\u3067\u3082\u3061\u308d\u3093NG\u3067\u3059\u306d\u3002\n\n**String.Encoding.utf8.rawValue**\u3068\u3059\u308b\u306e\u304c\u30ad\u30e2\u3002\n\n\u4ee5\u4e0b\u306bHTML\u5f62\u5f0f\u306e\u6587\u5b57\u5217\u3092NSAttributedString\u306b\u3057\u3066\u8fd4\u3059\u30e1\u30bd\u30c3\u30c9\u3092\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n```swift:\n    /// HTML\u5f62\u5f0f\u3067\u8a18\u8ff0\u3055\u308c\u305f\u6587\u5b57\u5217\u3092NSAttributedString\u306b\u5909\u63db\u3059\u308b\n    ///\n    /// - Parameter text: \u5909\u63db\u3059\u308b\u6587\u5b57\u5217\n    /// - Returns: HTML\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5909\u63db\u3055\u308c\u305fNSAttributedString\n    func parseText2HTML(sourceText text: String) -> NSAttributedString? {\n                \n        // \u53d7\u3051\u53d6\u3063\u305f\u30c7\u30fc\u30bf\u3092UTF-8\u30a8\u30f3\u30b3\u30fc\u30c9\u3059\u308b\n        let encodeData = text.data(using: String.Encoding.utf8, allowLossyConversion: true)\n        \n        // \u8868\u793a\u30c7\u30fc\u30bf\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b       \n        let attributedOptions : [String: AnyObject] = [\n            NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType as AnyObject,\n            NSCharacterEncodingDocumentAttribute: String.Encoding.utf8.rawValue as AnyObject\n        ]\n        \n        // \u6587\u5b57\u5217\u306e\u5909\u63db\u51e6\u7406\n        var attributedString:NSAttributedString?\n        do {\n            attributedString = try NSAttributedString(\n                data: encodeData!,\n                options: attributedOptions,\n                documentAttributes: nil\n            )\n        } catch let e {\n            // \u5909\u63db\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u5834\u5408\n        }\n        \n        return attributedString\n    }\n```\n", "tags": ["Xcode", "Swift", "Swift3.0", "iOS", "ios10"]}