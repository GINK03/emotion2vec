{"tags": ["Node.js", "Socket.io", "Redis"], "context": " More than 1 year has passed since last update.\n\n\u74b0\u5883\u6982\u8981\n\nNodeJS v4.2.1\nSocket.io v1.3.7\n\nSocket.io\u304cv1.3.7\u304b\u30894\u306b\u5bfe\u5fdc\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u304c\u53d6\u308c\u305f\u306e\u3067\u66f4\u65b0\u3057\u307e\u3057\u305f\n\n\u4f5c\u308b\n\u4eca\u56de\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u3002\u305d\u3046\u3044\u3048\u3070Socket.io\u3063\u3066http\u3082\u6271\u3063\u3066\u308b\u304b\u3089http\u30b5\u30fc\u30d0\u30fc\u3092\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308b\u3093\u3067\u3059\u306d\u3002\nvar http         = require('http');\nvar socketIo     = require('socket.io');\nvar redisAdapter = require('socket.io-redis');\n\nvar server = http.createServer(function(req, res) {\n    res.writeHead(200, {'Content-Type': 'text/plain'});\n    res.end('Node.js server.');\n});\n\nvar io = socketIo.listen(server);\nio.adapter(redisAdapter({host: '127.0.0.1', port: '6379'});\n\nserver.listen(8080);\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\nsocket.io\u3082\u4fbf\u5229\u306b\u306a\u3063\u3066\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u697d\u306b\u306a\u308a\u307e\u3057\u305f\u3088\u306d\u3002\nvar cookieParser = require('cookie-parser')();\nvar session = require('cookie-session')({ secret: 'secret key'});\n\nio.use(function(socket, next) {\n    var req = socket.request;\n    var res = {};\n    cookieParser(req, res, function(err) {\n        if(err) return next(err);\n        session(req, res, next);\n    });\n});\n\n\nio\u5468\u308a\nio.sockets.on('connection', function(socket) {\n    // \u51e6\u7406\u5185\u5bb9\n});\n\n// \u540d\u524d\u7a7a\u9593\u5207\u308b\u5834\u5408\nvar ActivityIo = io.of('/activity');\nActivityIo.on('connection', function(socket) {\n    // \u5f8c\u306f\u4e00\u7dd2\n});\n\n\n\u6700\u5f8c\u306b\n\u304a\u30fc\u308f\u308a\u3002\n\u4f55\u304b\u9593\u9055\u3048\u3066\u3044\u308b\u304b\u3082\u306a\u306e\u3067\u3001\u9593\u9055\u3048\u3066\u305f\u3089\u6559\u3048\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\u6700\u8fd1\u306b\u306a\u3063\u3066\u3084\u3063\u3068Node.js\u3068Socket.io\u5206\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u5b09\u3057\u3044\n## \u74b0\u5883\u6982\u8981\n\n* NodeJS v4.2.1\n* Socket.io v1.3.7\n\nSocket.io\u304cv1.3.7\u304b\u30894\u306b\u5bfe\u5fdc\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u304c\u53d6\u308c\u305f\u306e\u3067\u66f4\u65b0\u3057\u307e\u3057\u305f\n\n## \u4f5c\u308b\n\n\u4eca\u56de\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u3002\u305d\u3046\u3044\u3048\u3070Socket.io\u3063\u3066http\u3082\u6271\u3063\u3066\u308b\u304b\u3089http\u30b5\u30fc\u30d0\u30fc\u3092\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308b\u3093\u3067\u3059\u306d\u3002\n\n```js\nvar http         = require('http');\nvar socketIo     = require('socket.io');\nvar redisAdapter = require('socket.io-redis');\n\nvar server = http.createServer(function(req, res) {\n    res.writeHead(200, {'Content-Type': 'text/plain'});\n    res.end('Node.js server.');\n});\n\nvar io = socketIo.listen(server);\nio.adapter(redisAdapter({host: '127.0.0.1', port: '6379'});\n\nserver.listen(8080);\n```\n\n## \u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\n\nsocket.io\u3082\u4fbf\u5229\u306b\u306a\u3063\u3066\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u697d\u306b\u306a\u308a\u307e\u3057\u305f\u3088\u306d\u3002\n\n```js\nvar cookieParser = require('cookie-parser')();\nvar session = require('cookie-session')({ secret: 'secret key'});\n\nio.use(function(socket, next) {\n    var req = socket.request;\n    var res = {};\n    cookieParser(req, res, function(err) {\n        if(err) return next(err);\n        session(req, res, next);\n    });\n});\n```\n\n## io\u5468\u308a\n\n```js\nio.sockets.on('connection', function(socket) {\n    // \u51e6\u7406\u5185\u5bb9\n});\n\n// \u540d\u524d\u7a7a\u9593\u5207\u308b\u5834\u5408\nvar ActivityIo = io.of('/activity');\nActivityIo.on('connection', function(socket) {\n    // \u5f8c\u306f\u4e00\u7dd2\n});\n```\n\n## \u6700\u5f8c\u306b\n\n\u304a\u30fc\u308f\u308a\u3002\n\u4f55\u304b\u9593\u9055\u3048\u3066\u3044\u308b\u304b\u3082\u306a\u306e\u3067\u3001\u9593\u9055\u3048\u3066\u305f\u3089\u6559\u3048\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\n\u6700\u8fd1\u306b\u306a\u3063\u3066\u3084\u3063\u3068Node.js\u3068Socket.io\u5206\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u5b09\u3057\u3044\n"}