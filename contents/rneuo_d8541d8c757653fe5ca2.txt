{"tags": ["Symfony22.6"], "context": " More than 1 year has passed since last update.\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nComposer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncurl -sS https://getcomposer.org/installer | php\nsudo mv composer.phar /usr/local/bin/composer\nchmod a+x /usr/local/bin/composer\n\n\nSymfony\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncurl -LsS http://symfony.com/installer > ~/bin/symfony.phar\nsudo mv symfony.phar /usr/local/bin/symfony\nchmod a+x /usr/local/bin/symphony\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u3068\u521d\u671f\u8a2d\u5b9a\nsymfony new myproject\ncd myproject\nphp app/console generate:bundle --namespace=MyProjectBundle --format=yml\n\n\nDB\u306e\u8a2d\u5b9a\u3068\u4f5c\u6210\n\nDB\u540d\u306e\u6307\u5b9a\n\u4eca\u56de\u306fmyproject\u3068\u3044\u3046DB\u540d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nvi app/config/parameters.yml\n\n\napp/config/parameters.yml\nparameters:\n    database_name: myproject\n\n\n\nDB\u4f5c\u6210\nphp app/console doctrine:database:create\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\u4eca\u56de\u306fDoctrineMigrationsBundle\u3092\u4f7f\u7528\u3057\u3066\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u30c6\u30fc\u30d6\u30eb\u306e\u5909\u66f4\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\n\nDoctrineMigrationsBundle\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n\nDoctrineMigrationsBundle\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nvi composer.json\n\n\n\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\n\n\n\ncomposer.json\n{\n    require: {\n        \u30fb\u30fb\u30fb\n        \"doctrine/migrations\": \"1.0.*@dev\",\n        \"doctrine/doctrine-migrations-bundle\": \"2.1.*@dev\",\n        \u30fb\u30fb\u30fb\n    }\n\n}\n\n\n\ninstall\n\ncomposer update\n\n\n\u8a2d\u5b9a\n\nvi app/AppKernel.php\n\n\napp/AppKernel.php\npublic function registerBundles()\n{\n    $bundles = array(\n        //...\n        new Doctrine\\Bundle\\MigrationsBundle\\DoctrineMigrationsBundle(),\n        //...\n    );\n}\n\n\n\n\napp/console\u3092\u5b9f\u884c\u3057\u3066doctrine:migrations:diff\u306a\u3069\u306e\u3082\u306e\u304c\u3042\u308c\u3070\u6210\u529f\n\n\nMigration\u306e\u521d\u671f\u5316\nphp app/console doctrine:migrations:status\n\n\nMigration\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\napp/console doctrine:migrations:generate\n\n\n\u751f\u6210\u3055\u308c\u305fmigration\u30d5\u30a1\u30a4\u30eb(app/DoctrineMigrations/Version*.php)\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\n    /**\n     * @param Schema $schema\n     */\n    public function up(Schema $schema)\n    {\n        // this up() migration is auto-generated, please modify it to your needs\n        $sql = <<<SQL\nCREATE TABLE `hoge` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `title` varchar(255) NOT NULL,\n  `created_at` datetime NOT NULL,\n  `updated_at` datetime NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\nSQL;\n        $this->addSql($sql);\n    }\n\n\nMigration\u306e\u5b9f\u884c(\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210)\nphp app/console doctrine:migrations:migrate\n\n\u3053\u308c\u3067myproject\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306bhoge\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\nEntity\u306e\u4f5c\u6210\nphp app/console doctrine:mapping:import --force MyProjectBundle yml\nphp app/console doctrine:generate:entities MyProjectBundle\n\n\nController\u3068View\u306e\u4f5c\u6210\nphp app/console doctrine:generate:crud --entity=MyProjectBundle:Hoge\n\n\u3053\u308c\u3067\n\nphp app/console server:run\n\n\u3057\u3066\nhttp://localhost:8000/hoge/\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070\u5b8c\u4e86\u3067\u3059\uff01\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n## Composer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ncurl -sS https://getcomposer.org/installer | php\nsudo mv composer.phar /usr/local/bin/composer\nchmod a+x /usr/local/bin/composer\n```\n\n## Symfony\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ncurl -LsS http://symfony.com/installer > ~/bin/symfony.phar\nsudo mv symfony.phar /usr/local/bin/symfony\nchmod a+x /usr/local/bin/symphony\n```\n\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u3068\u521d\u671f\u8a2d\u5b9a\n\n```\nsymfony new myproject\ncd myproject\nphp app/console generate:bundle --namespace=MyProjectBundle --format=yml\n```\n\n# DB\u306e\u8a2d\u5b9a\u3068\u4f5c\u6210\n\n## DB\u540d\u306e\u6307\u5b9a\n\n\u4eca\u56de\u306f`myproject`\u3068\u3044\u3046DB\u540d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n- vi app/config/parameters.yml\n\n```yml:app/config/parameters.yml\nparameters:\n    database_name: myproject\n```\n\n## DB\u4f5c\u6210\n\n```bash\nphp app/console doctrine:database:create\n```\n\n## \u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n\u4eca\u56de\u306f[DoctrineMigrationsBundle](https://github.com/doctrine/DoctrineMigrationsBundle)\u3092\u4f7f\u7528\u3057\u3066\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u30c6\u30fc\u30d6\u30eb\u306e\u5909\u66f4\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\n\n### DoctrineMigrationsBundle\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n\n#### DoctrineMigrationsBundle\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n- vi composer.json\n  - \u4ee5\u4e0b\u3092\u8ffd\u8a18\n    \n```json:composer.json\n{\n    require: {\n        \u30fb\u30fb\u30fb\n        \"doctrine/migrations\": \"1.0.*@dev\",\n        \"doctrine/doctrine-migrations-bundle\": \"2.1.*@dev\",\n        \u30fb\u30fb\u30fb\n    }\n\n}\n```\n\n- install\n\n```bash\ncomposer update\n```\n\n#### \u8a2d\u5b9a\n\n- vi app/AppKernel.php\n\n```php:app/AppKernel.php\npublic function registerBundles()\n{\n    $bundles = array(\n        //...\n        new Doctrine\\Bundle\\MigrationsBundle\\DoctrineMigrationsBundle(),\n        //...\n    );\n}\n```\n\n- `app/console`\u3092\u5b9f\u884c\u3057\u3066`doctrine:migrations:diff`\u306a\u3069\u306e\u3082\u306e\u304c\u3042\u308c\u3070\u6210\u529f\n\n### Migration\u306e\u521d\u671f\u5316\n\n```\nphp app/console doctrine:migrations:status\n```\n\n### Migration\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\n```\napp/console doctrine:migrations:generate\n```\n\n- \u751f\u6210\u3055\u308c\u305fmigration\u30d5\u30a1\u30a4\u30eb(app/DoctrineMigrations/Version*.php)\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\n```php\n    /**\n     * @param Schema $schema\n     */\n    public function up(Schema $schema)\n    {\n        // this up() migration is auto-generated, please modify it to your needs\n        $sql = <<<SQL\nCREATE TABLE `hoge` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `title` varchar(255) NOT NULL,\n  `created_at` datetime NOT NULL,\n  `updated_at` datetime NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\nSQL;\n        $this->addSql($sql);\n    }\n```\n\n### Migration\u306e\u5b9f\u884c(\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210)\n\n```\nphp app/console doctrine:migrations:migrate\n```\n\n\u3053\u308c\u3067`myproject`\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306b`hoge`\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\n# Entity\u306e\u4f5c\u6210\n\n```\nphp app/console doctrine:mapping:import --force MyProjectBundle yml\nphp app/console doctrine:generate:entities MyProjectBundle\n```\n\n# Controller\u3068View\u306e\u4f5c\u6210\n\n```\nphp app/console doctrine:generate:crud --entity=MyProjectBundle:Hoge\n```\n\n\u3053\u308c\u3067\n```\nphp app/console server:run\n```\n\u3057\u3066\n\n`http://localhost:8000/hoge/`\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070\u5b8c\u4e86\u3067\u3059\uff01\n"}