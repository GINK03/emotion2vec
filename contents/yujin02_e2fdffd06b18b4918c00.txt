{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\nnodejs/Express/node-config\u3068\u4e00\u7dd2\u306b\u3001log4js\u3067\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002\n\n\n\u65b9\u6cd5\n\nsmtp appender\u3092\u4f7f\u3044\u307e\u3059\u3002\u8a73\u7d30\u306f\u3053\u3061\u3089\u2192(https://github.com/nomiddlename/log4js-node/wiki/SMTP)\n\n\n\u4e8b\u524d\u6e96\u5099\n\u4ee5\u4e0b\u3092npm install\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n- expressjs\n- node-config\n- log4js\n- nodemailer\n\n\u30b5\u30f3\u30d7\u30eb\n\nnode-config\u306econfig.json\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n  \"log4js\": {\n    \"appenders\": [{\n      \"category\": \"access\",\n      \"type\": \"dateFile\",\n      \"filename\": \"./reports/logs/access.log\",\n      \"pattern\": \"-yyyy-MM-dd\",\n      \"backups\": 3\n    },\n    {\n      \"category\": \"system\",\n      \"type\": \"dateFile\",\n      \"filename\": \"./reports/logs/system.log\",\n      \"pattern\": \"-yyyy-MM-dd\",\n      \"backups\": 3\n    },\n    {\n      \"category\": \"mailer\",\n      \"type\": \"smtp\",\n      \"recipients\": \"logfilerecipient@logging.com\",\n      \"sendInterval\": 5,\n      \"transport\": \"SMTP\",\n      \"SMTP\": {\n        \"host\": \"smtp.gmail.com\",\n        \"secureConnection\": true,\n        \"port\": 465,\n        \"proxy\": \"proxy.hogehoge.co.jp\",    // \u30d7\u30ed\u30ad\u30b7\u304c\u3042\u308c\u3070\u3053\u3053\u306b\u8a2d\u5b9a\n        \"auth\": {\n          \"user\": \"****@gmail.com\",  // user\n          \"pass\": \"**********\"       // \u30d1\u30b9\u30ef\u30fc\u30c9\n        },\n        \"debug\": true\n      }\n    },\n    {\"type\": \"console\"}],\n    \"levels\": {\n      \"access\": \"WARN\",\n      \"system\": \"DEBUG\",\n      \"mailer\": \"warn\"\n    }\n  },\n\n\n\nlogger.js\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\nvar log4js = require('log4js');\nvar config = require('config');\n\nlog4js.configure(config.log4js);\n\nmodule.exports = { \n    access: log4js.getLogger('access'),\n    system: log4js.getLogger('system'),\n    mailer: log4js.getLogger('mailer'),\n    express: log4js.connectLogger(log4js.getLogger('access'), {level: log4js.levels.INFO})\n};\n\n\n\n\u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u4e2d\u3067\u306e\u547c\u3073\u51fa\u3057\u65b9\u3067\u3059\u3002\n\nvar logger = require('logger.js');\nlogger.mailer.warn('test warn mail');\nlogger.mailer.error('test error mail');\n\n\u30e1\u30fc\u30eb\u672c\u6587\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\u30e1\u30fc\u30eb\u30bf\u30a4\u30c8\u30eb\u306f\u300ctest warn mail\u300d\u306a\u3069\u306b\u306a\u308a\u307e\u3059\u3002\n[2016-03-09 15:30:04.571] [WARN] mailer - test warn mail\n[2016-03-09 15:30:04.587] [ERROR] mailer - test error mail\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n# \u6982\u8981\n- nodejs/Express/node-config\u3068\u4e00\u7dd2\u306b\u3001log4js\u3067\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002\n\n# \u65b9\u6cd5\n- smtp appender\u3092\u4f7f\u3044\u307e\u3059\u3002\u8a73\u7d30\u306f\u3053\u3061\u3089\u2192(https://github.com/nomiddlename/log4js-node/wiki/SMTP)\n\n# \u4e8b\u524d\u6e96\u5099\n\u4ee5\u4e0b\u3092npm install\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n- expressjs\n- node-config\n- log4js\n- nodemailer\n\n# \u30b5\u30f3\u30d7\u30eb\n- node-config\u306econfig.json\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n```\n  \"log4js\": {\n    \"appenders\": [{\n      \"category\": \"access\",\n      \"type\": \"dateFile\",\n      \"filename\": \"./reports/logs/access.log\",\n      \"pattern\": \"-yyyy-MM-dd\",\n      \"backups\": 3\n    },\n    {\n      \"category\": \"system\",\n      \"type\": \"dateFile\",\n      \"filename\": \"./reports/logs/system.log\",\n      \"pattern\": \"-yyyy-MM-dd\",\n      \"backups\": 3\n    },\n    {\n      \"category\": \"mailer\",\n      \"type\": \"smtp\",\n      \"recipients\": \"logfilerecipient@logging.com\",\n      \"sendInterval\": 5,\n      \"transport\": \"SMTP\",\n      \"SMTP\": {\n        \"host\": \"smtp.gmail.com\",\n        \"secureConnection\": true,\n        \"port\": 465,\n        \"proxy\": \"proxy.hogehoge.co.jp\",    // \u30d7\u30ed\u30ad\u30b7\u304c\u3042\u308c\u3070\u3053\u3053\u306b\u8a2d\u5b9a\n        \"auth\": {\n          \"user\": \"****@gmail.com\",  // user\n          \"pass\": \"**********\"       // \u30d1\u30b9\u30ef\u30fc\u30c9\n        },\n        \"debug\": true\n      }\n    },\n    {\"type\": \"console\"}],\n    \"levels\": {\n      \"access\": \"WARN\",\n      \"system\": \"DEBUG\",\n      \"mailer\": \"warn\"\n    }\n  },\n\n```\n\n- logger.js\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n```\nvar log4js = require('log4js');\nvar config = require('config');\n\nlog4js.configure(config.log4js);\n\nmodule.exports = { \n    access: log4js.getLogger('access'),\n    system: log4js.getLogger('system'),\n    mailer: log4js.getLogger('mailer'),\n    express: log4js.connectLogger(log4js.getLogger('access'), {level: log4js.levels.INFO})\n};\n\n```\n\n- \u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u4e2d\u3067\u306e\u547c\u3073\u51fa\u3057\u65b9\u3067\u3059\u3002\n\n```\nvar logger = require('logger.js');\nlogger.mailer.warn('test warn mail');\nlogger.mailer.error('test error mail');\n```\n\n\u30e1\u30fc\u30eb\u672c\u6587\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\u30e1\u30fc\u30eb\u30bf\u30a4\u30c8\u30eb\u306f\u300ctest warn mail\u300d\u306a\u3069\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n[2016-03-09 15:30:04.571] [WARN] mailer - test warn mail\n[2016-03-09 15:30:04.587] [ERROR] mailer - test error mail\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n", "tags": ["Node.js", "log4js", "node-config", "Express.js"]}