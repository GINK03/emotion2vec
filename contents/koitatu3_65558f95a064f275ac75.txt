{"context": " More than 1 year has passed since last update.\u969c\u5bb3\u8abf\u67fb\u5bfe\u5fdc\u6642\u306b\u4f7f\u3063\u3066\u307f\u305f\u3002\n\u4eca\u307e\u3067Excel\u3068\u304b\u3067\u96c6\u8a08\u3057\u3066\u305f\u304b\u3089\u591a\u5c11\u306f\u65e9\u304f\u306a\u308a\u305d\u3046\u3002\n\n\u6750\u6599(\u5fc5\u8981\u306a\u7269)\n\nawk\u30b3\u30de\u30f3\u30c9\u3002\nsort\u30b3\u30de\u30f3\u30c9\u3002\nuniq\u30b3\u30de\u30f3\u30c9\u3002\n\n\n\u60f3\u5b9a\napache\u306eLogFormat\u306f\u4ee5\u4e0b\u3092\u60f3\u5b9a\u3002\n\n\u7b2c\u4e00\u30d5\u30a3\u30fc\u30eb\u30c9\u306bSorceIP\u304c\u51fa\u529b\u3055\u308c\u308b\u60f3\u5b9a\u3002\n\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\nLogFormat \"%{Referer}i -> %U\" referer\nLogFormat \"%{User-agent}i\" agent\n\n\n\nSourceIP\u6bce\u306b\u4e00\u6642\u9593\u3042\u305f\u308a\u4f55\u56de\u30a2\u30af\u30bb\u30b9\u304c\u3042\u3063\u305f\u304b\u62bd\u51fa\u3059\u308b\u3002\n# awk '{print $1}' /var/log/httpd/access_log |sort |uniq -c |sort |awk '{print $1/3600, \"From:\"$2\"/hour\"}'\n\n\n\u5b9f\u884c\u7d50\u679c\u3002\n# awk '{print $1}' /var/log/httpd/access_log |sort |uniq -c |sort |awk '{print $1/3600, \"From:\"$2\"/hour\"}'\n0.000277778 From:104.131.170.117/hour\n0.000277778 From:104.131.187.65/hour\n0.000277778 From:104.236.72.31/hour\n0.000277778 From:109.234.34.82/hour\n0.000277778 From:141.212.122.81/hour\n0.000277778 From:142.54.169.164/hour\n0.000277778 From:157.55.39.109/hour\n0.000277778 From:162.222.227.163/hour\n0.000277778 From:180.76.15.11/hour\n0.000277778 From:180.76.15.14/hour\n0.000277778 From:180.76.15.140/hour\n\n\u969c\u5bb3\u8abf\u67fb\u5bfe\u5fdc\u6642\u306b\u4f7f\u3063\u3066\u307f\u305f\u3002\n\u4eca\u307e\u3067Excel\u3068\u304b\u3067\u96c6\u8a08\u3057\u3066\u305f\u304b\u3089\u591a\u5c11\u306f\u65e9\u304f\u306a\u308a\u305d\u3046\u3002\n\n\n# \u6750\u6599(\u5fc5\u8981\u306a\u7269)\n* awk\u30b3\u30de\u30f3\u30c9\u3002\n* sort\u30b3\u30de\u30f3\u30c9\u3002\n* uniq\u30b3\u30de\u30f3\u30c9\u3002\n\n# \u60f3\u5b9a\n\napache\u306eLogFormat\u306f\u4ee5\u4e0b\u3092\u60f3\u5b9a\u3002\n\n* \u7b2c\u4e00\u30d5\u30a3\u30fc\u30eb\u30c9\u306bSorceIP\u304c\u51fa\u529b\u3055\u308c\u308b\u60f3\u5b9a\u3002\n\n```\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\nLogFormat \"%{Referer}i -> %U\" referer\nLogFormat \"%{User-agent}i\" agent\n\n```\n\n## SourceIP\u6bce\u306b\u4e00\u6642\u9593\u3042\u305f\u308a\u4f55\u56de\u30a2\u30af\u30bb\u30b9\u304c\u3042\u3063\u305f\u304b\u62bd\u51fa\u3059\u308b\u3002\n\n```bash\n# awk '{print $1}' /var/log/httpd/access_log |sort |uniq -c |sort |awk '{print $1/3600, \"From:\"$2\"/hour\"}'\n```\n\n\n## \u5b9f\u884c\u7d50\u679c\u3002\n\n```bash\n# awk '{print $1}' /var/log/httpd/access_log |sort |uniq -c |sort |awk '{print $1/3600, \"From:\"$2\"/hour\"}'\n0.000277778 From:104.131.170.117/hour\n0.000277778 From:104.131.187.65/hour\n0.000277778 From:104.236.72.31/hour\n0.000277778 From:109.234.34.82/hour\n0.000277778 From:141.212.122.81/hour\n0.000277778 From:142.54.169.164/hour\n0.000277778 From:157.55.39.109/hour\n0.000277778 From:162.222.227.163/hour\n0.000277778 From:180.76.15.11/hour\n0.000277778 From:180.76.15.14/hour\n0.000277778 From:180.76.15.140/hour\n```\n\n", "tags": ["awk", "Linux"]}