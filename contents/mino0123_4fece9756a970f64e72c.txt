{"context": "\u78ba\u8a8d\u3057\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\nhttps://github.com/forcedotcom/aura/tree/7fc7016ab808cbf21587940f939fbba79d23a80d\n\u3053\u306e\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u5834\u6240\u306f\nhttps://github.com/forcedotcom/aura/tree/7fc7016ab808cbf21587940f939fbba79d23a80d/aura-impl/src/main/java/org/auraframework/impl/context/AuraContextImpl.java#L651\n\u8ffd\u52a0\u3055\u308c\u305f\u306e\u306f\nhttps://github.com/forcedotcom/aura/commit/d690b578e7d30655689f3225fed8e64f0882cd65#diff-b9484b824eca9d4b5c617f2edfc89a7eR684\n\u5236\u9650\u3068\u3057\u3066\u306f10000\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306a\u306e\u3067\u7d50\u69cb\u9060\u305d\u3046\u306b\u898b\u3048\u308b\u3051\u3069\u3001\n\u30bf\u30b0\u3068\u30c6\u30ad\u30b9\u30c8\u306b\u3064\u3044\u3066\u307b\u307c\u5168\u90e8\u8a08\u4e0a\u3055\u308c\u308b\u3063\u307d\u304f\u3001\u5272\u3068\u3059\u3050\u5230\u9054\u3059\u308b\u6c17\u304c\u3059\u308b\u3002\n\u4f8b\u3048\u3070 <div></div> \u306f1\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3060\u304c\u3001\n<div>foo</div>\u306f2\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n<div>foo<br />bar</div>\u306f4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u306a\u308b\u3002\n\u4ee5\u4e0b\u306edeploy\u30bf\u30b9\u30af\u3067\u30eb\u30fc\u30d7\u56de\u6570\u30925000\u306b\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002\n\npackage.json\n{\n  \"devDependencies\": {\n    \"btoa\": \"^1.1.2\",\n    \"gulp\": \"^3.9.0\",\n    \"gulp-file\": \"^0.2.0\",\n    \"gulp-jsforce-deploy\": \"^1.1.1\",\n    \"gulp-zip\": \"^3.0.2\",\n    \"salesforce-metadata-xml-builder\": \"^0.1.1\",\n    \"through2\": \"^2.0.1\"\n  }\n}\n\ngulpfile.js\nconst gulp = require('gulp');\nconst through = require('through2');\nconst zip = require('gulp-zip');\nconst file = require('gulp-file');\nconst deploy = require('gulp-jsforce-deploy');\nconst metadata = require('salesforce-metadata-xml-builder');\nconst btoa = require('btoa');\n\nconst COMPONENT_NAME = 'TooManyComponents';\nconst API_VERSION = '36.0';\nconst SF_USERNAME = process.env.SF_USERNAME;\nconst SF_PASSWORD = process.env.SF_PASSWORD;\n\nfunction makeComponentUrl(componentName) {\n  var hash = btoa(JSON.stringify({\n    componentDef: 'one:auraContainer',\n    attributes: {\n      values: {\n        tag: 'c:' + componentName,\n        t: Date.now()\n      }\n    }\n  }));\n  return '/one/one.app#' + hash;\n}\n\ngulp.task('deploy', () => {\n\n  const html = Array.apply(null, new Array(4999)).map((_, i) => `<div>${i}</div>`).join('')\n  const componentBody = `<aura:component>\n    ${html}\n  </aura:component>`;\n  const packagexml = metadata.Package({ version: API_VERSION, types: [\n    { name: 'AuraDefinitionBundle', members: ['*'] },\n  ]});\n\n  return through.obj()\n    .pipe(file(`src/aura/${COMPONENT_NAME}/${COMPONENT_NAME}.cmp`, componentBody, {src: true}))\n    .pipe(file('src/package.xml', packagexml))\n    // .pipe(gulp.dest('./tmp'))\n    .pipe(zip('pkg.zip'))\n    .pipe(deploy({\n      username: SF_USERNAME,\n      password: SF_PASSWORD\n    }))\n    .on('end', () => {\n      console.log('URL:' + makeComponentUrl(COMPONENT_NAME));\n    });\n\n});\n\n\n\u307e\u305f\u3001\u5225\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u547c\u3073\u51fa\u3057\u306b\u3064\u3044\u3066\u3082\u78ba\u8a8d\u3057\u305f\u3002\ngulp.task('deploy2', () => {\n\n  const html = `<c:${COMPONENT_NAME}2 />`.repeat(3333);\n  const componentBody = `<aura:component>\n    ${html}\n  </aura:component>`;\n  const component2Body = `<aura:component>a</aura:component>`;\n  const packagexml = metadata.Package({ version: API_VERSION, types: [\n    { name: 'AuraDefinitionBundle', members: ['*'] },\n  ]});\n\n  return through.obj()\n    .pipe(file(`src/aura/${COMPONENT_NAME}/${COMPONENT_NAME}.cmp`, componentBody, {src: true}))\n    .pipe(file(`src/aura/${COMPONENT_NAME}2/${COMPONENT_NAME}2.cmp`, component2Body))\n    .pipe(file('src/package.xml', packagexml))\n    .pipe(zip('pkg.zip'))\n    .pipe(deploy({\n      username: SF_USERNAME,\n      password: SF_PASSWORD\n    }))\n    .on('error', console.log.bind(console))\n    .on('end', () => {\n      console.log('URL:' + makeComponentUrl(COMPONENT_NAME));\n    });\n\n});\n\n3334\u30eb\u30fc\u30d7\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u30eb\u30fc\u30d7\u306e\u4e2d\u8eab\u306f3\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3068\u3057\u3066\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u4ed6\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u547c\u3073\u51fa\u3057\u304b\u3001\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306eaura:component\u30bf\u30b0\u3067\u30821\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\u3002\n\u78ba\u8a8d\u3057\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\nhttps://github.com/forcedotcom/aura/tree/7fc7016ab808cbf21587940f939fbba79d23a80d\n\n<!--\n`git grep \"Too many components\"` \u3067\u8abf\u67fb\u3002\n\n\u4ee5\u4e0b\u304c\u898b\u3064\u304b\u308b\n\n```\naura-impl/src/main/java/org/auraframework/impl/context/AuraContextImpl.java:\nthrow new SystemErrorException(\"Too many components for \" + sb.toString());\n```\n-->\n\n\u3053\u306e\u4f8b\u5916\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u5834\u6240\u306f\n\nhttps://github.com/forcedotcom/aura/tree/7fc7016ab808cbf21587940f939fbba79d23a80d/aura-impl/src/main/java/org/auraframework/impl/context/AuraContextImpl.java#L651\n\n\u8ffd\u52a0\u3055\u308c\u305f\u306e\u306f\nhttps://github.com/forcedotcom/aura/commit/d690b578e7d30655689f3225fed8e64f0882cd65#diff-b9484b824eca9d4b5c617f2edfc89a7eR684\n\n\u5236\u9650\u3068\u3057\u3066\u306f10000\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306a\u306e\u3067\u7d50\u69cb\u9060\u305d\u3046\u306b\u898b\u3048\u308b\u3051\u3069\u3001\n\u30bf\u30b0\u3068\u30c6\u30ad\u30b9\u30c8\u306b\u3064\u3044\u3066\u307b\u307c\u5168\u90e8\u8a08\u4e0a\u3055\u308c\u308b\u3063\u307d\u304f\u3001\u5272\u3068\u3059\u3050\u5230\u9054\u3059\u308b\u6c17\u304c\u3059\u308b\u3002\n\n\u4f8b\u3048\u3070 `<div></div>` \u306f1\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3060\u304c\u3001\n`<div>foo</div>`\u306f2\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n`<div>foo<br />bar</div>`\u306f4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u306a\u308b\u3002\n\n\u4ee5\u4e0b\u306edeploy\u30bf\u30b9\u30af\u3067\u30eb\u30fc\u30d7\u56de\u6570\u30925000\u306b\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002\n\n----\npackage.json\n\n```json\n{\n  \"devDependencies\": {\n    \"btoa\": \"^1.1.2\",\n    \"gulp\": \"^3.9.0\",\n    \"gulp-file\": \"^0.2.0\",\n    \"gulp-jsforce-deploy\": \"^1.1.1\",\n    \"gulp-zip\": \"^3.0.2\",\n    \"salesforce-metadata-xml-builder\": \"^0.1.1\",\n    \"through2\": \"^2.0.1\"\n  }\n}\n```\ngulpfile.js\n\n```js\nconst gulp = require('gulp');\nconst through = require('through2');\nconst zip = require('gulp-zip');\nconst file = require('gulp-file');\nconst deploy = require('gulp-jsforce-deploy');\nconst metadata = require('salesforce-metadata-xml-builder');\nconst btoa = require('btoa');\n\nconst COMPONENT_NAME = 'TooManyComponents';\nconst API_VERSION = '36.0';\nconst SF_USERNAME = process.env.SF_USERNAME;\nconst SF_PASSWORD = process.env.SF_PASSWORD;\n\nfunction makeComponentUrl(componentName) {\n  var hash = btoa(JSON.stringify({\n    componentDef: 'one:auraContainer',\n    attributes: {\n      values: {\n        tag: 'c:' + componentName,\n        t: Date.now()\n      }\n    }\n  }));\n  return '/one/one.app#' + hash;\n}\n\ngulp.task('deploy', () => {\n\n  const html = Array.apply(null, new Array(4999)).map((_, i) => `<div>${i}</div>`).join('')\n  const componentBody = `<aura:component>\n    ${html}\n  </aura:component>`;\n  const packagexml = metadata.Package({ version: API_VERSION, types: [\n    { name: 'AuraDefinitionBundle', members: ['*'] },\n  ]});\n\n  return through.obj()\n    .pipe(file(`src/aura/${COMPONENT_NAME}/${COMPONENT_NAME}.cmp`, componentBody, {src: true}))\n    .pipe(file('src/package.xml', packagexml))\n    // .pipe(gulp.dest('./tmp'))\n    .pipe(zip('pkg.zip'))\n    .pipe(deploy({\n      username: SF_USERNAME,\n      password: SF_PASSWORD\n    }))\n    .on('end', () => {\n      console.log('URL:' + makeComponentUrl(COMPONENT_NAME));\n    });\n\n});\n```\n\n----\n\n\u307e\u305f\u3001\u5225\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u547c\u3073\u51fa\u3057\u306b\u3064\u3044\u3066\u3082\u78ba\u8a8d\u3057\u305f\u3002\n\n```js\ngulp.task('deploy2', () => {\n\n  const html = `<c:${COMPONENT_NAME}2 />`.repeat(3333);\n  const componentBody = `<aura:component>\n    ${html}\n  </aura:component>`;\n  const component2Body = `<aura:component>a</aura:component>`;\n  const packagexml = metadata.Package({ version: API_VERSION, types: [\n    { name: 'AuraDefinitionBundle', members: ['*'] },\n  ]});\n\n  return through.obj()\n    .pipe(file(`src/aura/${COMPONENT_NAME}/${COMPONENT_NAME}.cmp`, componentBody, {src: true}))\n    .pipe(file(`src/aura/${COMPONENT_NAME}2/${COMPONENT_NAME}2.cmp`, component2Body))\n    .pipe(file('src/package.xml', packagexml))\n    .pipe(zip('pkg.zip'))\n    .pipe(deploy({\n      username: SF_USERNAME,\n      password: SF_PASSWORD\n    }))\n    .on('error', console.log.bind(console))\n    .on('end', () => {\n      console.log('URL:' + makeComponentUrl(COMPONENT_NAME));\n    });\n\n});\n```\n\n3334\u30eb\u30fc\u30d7\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u30eb\u30fc\u30d7\u306e\u4e2d\u8eab\u306f3\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3068\u3057\u3066\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u4ed6\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u547c\u3073\u51fa\u3057\u304b\u3001\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306eaura:component\u30bf\u30b0\u3067\u30821\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\u3002\n", "tags": ["Lightning", "Salesforce"]}