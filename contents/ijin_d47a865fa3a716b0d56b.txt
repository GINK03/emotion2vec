{"context": "\n\nWhat\nSolution Stack: 64bit Amazon Linux 2016.09 v2.2.2 running Docker 1.11.2\u306e\u5834\u5408\n\nWhy\n\u74b0\u5883\u5225\uff08\u672c\u756a\u3001\u958b\u767a\u7b49\uff09\u3067\u74b0\u5883\u5909\u6570\u306e\u6709\u7121\u306b\u3088\u3063\u3066Elastic Beanstalk\u4e0a\u306e\u30db\u30b9\u30c8\u3067\u51e6\u7406\u3092\u3057\u305f\u3044\u3002\u4f8b\u3048\u3070\u672c\u756a\u74b0\u5883\u3067\u306e\u307fnewrelic\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u304b\u3002\n\nHow\n\u30b3\u30f3\u30c6\u30ca\u30db\u30b9\u30c8\uff08EC2\uff09\u4e0a\u3067\u306f\u76f4\u63a5Elastic Beanstalk\u306e\u74b0\u5883\u5909\u6570\u304c\u898b\u308c\u306a\u3044\u306e\u3067get-config\u3092\u4f7f\u3046\u3002\n\n.ebextensionsnewrelic.config\npackages: \n  yum: \n    newrelic-sysmond: [] \n  rpm: \n    newrelic: http://yum.newrelic.com/pub/newrelic/el5/x86_64/newrelic-repo-5-3.noarch.rpm\ncontainer_commands: \n  \"01\": \n    command: /opt/elasticbeanstalk/bin/get-config environment | jq -e -r '.NEWRELIC_KEY' && usermod -a -G docker newrelic || echo 'NEWRELIC_KEY not found'\n  \"02\": \n    command: /opt/elasticbeanstalk/bin/get-config environment | jq -e -r '.NEWRELIC_KEY' && nrsysmond-config --set license_key=$NEWRELIC_KEY || echo 'NEWRELIC_KEY not found'\n  \"03\": \n    command: /opt/elasticbeanstalk/bin/get-config environment | jq -e -r '.NEWRELIC_KEY' && /etc/init.d/newrelic-sysmond start || echo 'NEWRELIC_KEY not found'\n\n\n\u3053\u306e\u5834\u5408\u3001NEWRELIC_KEY\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306e\u307f\u8a2d\u5b9a\u304c\u3055\u308c\u308b\u3002\n# What\n\nSolution Stack: `64bit Amazon Linux 2016.09 v2.2.2 running Docker 1.11.2`\u306e\u5834\u5408\n\n# Why\n\n\u74b0\u5883\u5225\uff08\u672c\u756a\u3001\u958b\u767a\u7b49\uff09\u3067\u74b0\u5883\u5909\u6570\u306e\u6709\u7121\u306b\u3088\u3063\u3066Elastic Beanstalk\u4e0a\u306e\u30db\u30b9\u30c8\u3067\u51e6\u7406\u3092\u3057\u305f\u3044\u3002\u4f8b\u3048\u3070\u672c\u756a\u74b0\u5883\u3067\u306e\u307f`newrelic`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u304b\u3002\n\n# How\n\n\u30b3\u30f3\u30c6\u30ca\u30db\u30b9\u30c8\uff08EC2\uff09\u4e0a\u3067\u306f\u76f4\u63a5Elastic Beanstalk\u306e\u74b0\u5883\u5909\u6570\u304c\u898b\u308c\u306a\u3044\u306e\u3067`get-config`\u3092\u4f7f\u3046\u3002\n\n```yaml:.ebextensionsnewrelic.config\npackages: \n  yum: \n    newrelic-sysmond: [] \n  rpm: \n    newrelic: http://yum.newrelic.com/pub/newrelic/el5/x86_64/newrelic-repo-5-3.noarch.rpm\ncontainer_commands: \n  \"01\": \n    command: /opt/elasticbeanstalk/bin/get-config environment | jq -e -r '.NEWRELIC_KEY' && usermod -a -G docker newrelic || echo 'NEWRELIC_KEY not found'\n  \"02\": \n    command: /opt/elasticbeanstalk/bin/get-config environment | jq -e -r '.NEWRELIC_KEY' && nrsysmond-config --set license_key=$NEWRELIC_KEY || echo 'NEWRELIC_KEY not found'\n  \"03\": \n    command: /opt/elasticbeanstalk/bin/get-config environment | jq -e -r '.NEWRELIC_KEY' && /etc/init.d/newrelic-sysmond start || echo 'NEWRELIC_KEY not found'\n```\n\n\u3053\u306e\u5834\u5408\u3001`NEWRELIC_KEY`\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306e\u307f\u8a2d\u5b9a\u304c\u3055\u308c\u308b\u3002\n", "tags": ["ElasticBeanstalk", "newrelic", "docker", "AWS"]}