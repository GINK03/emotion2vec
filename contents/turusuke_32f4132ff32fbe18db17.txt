{"context": "Heroku \u3067 node-canvas \u3092\u4f7f\u3063\u3066 Hello World \u3057\u3066\u307f\u307e\u3059\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\u4e8b\u524d\u306b Heroku \u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u53d6\u5f97\u3068 Heroku Toolbelt \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089 Heroku \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u958b\u767a\u3082\u884c\u3048\u308b\u3088\u3046\u306b Mac\u3067node-canvas\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u65b9\u6cd5 \u3092\u53c2\u8003\u306b\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306b Cairo \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nNode.js \u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u305f\u3081\u306e\u3072\u306a\u5f62\u3092 clone \u3059\u308b\ngit clone https://github.com/heroku/node-js-getting-started.git\ncd node-js-getting-started\nnpm install\n\n\u53c2\u8003: Getting Started with Node.js on Heroku\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u65b0\u898f\u4f5c\u6210\nheroku create\n\n\nnode-canvas \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm \u3092\u4f7f\u3063\u3066 node-canvas \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nnpm install --save canvas\n\n\nCairo \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nnode-canvas \u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f Cairo \u304c\u5fc5\u8981\u3068\u306a\u308b\u306e\u3067\u3001\ncustom buildpack \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\nheroku buildpacks:set https://github.com/ddollar/heroku-buildpack-multi.git\n\ncat << EOF > .buildpacks\nhttps://github.com/mojodna/heroku-buildpack-cairo.git\nhttps://github.com/heroku/heroku-buildpack-nodejs.git\nEOF\n\n\u53c2\u8003: heroku-buildpack-cairo\n\nHello World \u3059\u308b\u305f\u3081\u306b index.js \u3092\u66f8\u304d\u63db\u3048\u3066\u304a\u304f\n\u305d\u306e\u307e\u307e\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3082 node-canvas \u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u304b\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306b\u7f6e\u304b\u308c\u3066\u3044\u308b index.js \u306b Node-canvas \u306e\u51e6\u7406\u3092\u66f8\u304d\u52a0\u3048\u3066 Hello World \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nindex.js\nvar express = require('express');\nvar app = express();\n\nvar Canvas = require('canvas');\nvar canvas = new Canvas(200,200);\nvar ctx = canvas.getContext('2d');\n\nctx.font = '30px Impact';\nctx.rotate(.1);\nctx.fillText(\"Hello World!\", 50, 100);\n\napp.set('port', (process.env.PORT || 5000));\napp.use(express.static(__dirname + '/public'));\n\napp.get('/', function(request, response) {\n    response.send('<img src=\"' + canvas.toDataURL() + '\" />');\n});\n\napp.listen(app.get('port'), function() {\n  console.log(\"Node app is running at localhost:\" + app.get('port'));\n});\n\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\nadd .\ngit commit -m \"node-canvas on Heroku\"\ngit push heroku master\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\nremote: Verifying deploy... done.\n\n\u3068\u3044\u3046\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u7121\u4e8b\u3067\u30c7\u30d7\u30ed\u30a4\u304c\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\nheroku ps:scale web=1\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30af\u30bb\u30b9\nheroku open\n\n\u30d6\u30e9\u30a6\u30b6\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066,node-canvas \u304b\u3089\u5410\u51fa\u3055\u308c\u305f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u7121\u4e8b\u5b8c\u4e86\u3067\u3059\u3002\n\nDEMO: https://rocky-eyrie-7538.herokuapp.com/\nHeroku \u3067 [node-canvas](https://github.com/Automattic/node-canvas) \u3092\u4f7f\u3063\u3066 Hello World \u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u4e8b\u524d\u6e96\u5099\n\n\u4e8b\u524d\u306b Heroku \u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u53d6\u5f97\u3068 [Heroku Toolbelt](https://toolbelt.heroku.com/) \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089 Heroku \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u958b\u767a\u3082\u884c\u3048\u308b\u3088\u3046\u306b [Mac\u3067node-canvas\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u65b9\u6cd5](http://qiita.com/maru_cc/items/ea483477d7ed7df6a9cc) \u3092\u53c2\u8003\u306b\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306b Cairo \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n## Node.js \u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u305f\u3081\u306e\u3072\u306a\u5f62\u3092 clone \u3059\u308b\n\n```\ngit clone https://github.com/heroku/node-js-getting-started.git\ncd node-js-getting-started\nnpm install\n```\n\n\u53c2\u8003: [Getting Started with Node.js on Heroku](https://devcenter.heroku.com/articles/getting-started-with-nodejs#deploy-the-app)\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u65b0\u898f\u4f5c\u6210\n\n```\nheroku create\n```\n\n## node-canvas \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nnpm \u3092\u4f7f\u3063\u3066 node-canvas \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\nnpm install --save canvas\n```\n\n## Cairo \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\nnode-canvas \u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f Cairo \u304c\u5fc5\u8981\u3068\u306a\u308b\u306e\u3067\u3001\ncustom buildpack \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\n\n```\nheroku buildpacks:set https://github.com/ddollar/heroku-buildpack-multi.git\n\ncat << EOF > .buildpacks\nhttps://github.com/mojodna/heroku-buildpack-cairo.git\nhttps://github.com/heroku/heroku-buildpack-nodejs.git\nEOF\n```\n\n\u53c2\u8003: [heroku-buildpack-cairo](https://github.com/mojodna/heroku-buildpack-cairo)\n\n## Hello World \u3059\u308b\u305f\u3081\u306b index.js \u3092\u66f8\u304d\u63db\u3048\u3066\u304a\u304f\n\n\u305d\u306e\u307e\u307e\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3082 node-canvas \u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u304b\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306b\u7f6e\u304b\u308c\u3066\u3044\u308b index.js \u306b Node-canvas \u306e\u51e6\u7406\u3092\u66f8\u304d\u52a0\u3048\u3066 Hello World \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```javascript:index.js\nvar express = require('express');\nvar app = express();\n\nvar Canvas = require('canvas');\nvar canvas = new Canvas(200,200);\nvar ctx = canvas.getContext('2d');\n\nctx.font = '30px Impact';\nctx.rotate(.1);\nctx.fillText(\"Hello World!\", 50, 100);\n\napp.set('port', (process.env.PORT || 5000));\napp.use(express.static(__dirname + '/public'));\n\napp.get('/', function(request, response) {\n\tresponse.send('<img src=\"' + canvas.toDataURL() + '\" />');\n});\n\napp.listen(app.get('port'), function() {\n  console.log(\"Node app is running at localhost:\" + app.get('port'));\n});\n```\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\n```\nadd .\ngit commit -m \"node-canvas on Heroku\"\ngit push heroku master\n```\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\n\n```\nremote: Verifying deploy... done.\n```\n\n\u3068\u3044\u3046\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u7121\u4e8b\u3067\u30c7\u30d7\u30ed\u30a4\u304c\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\n\n```\nheroku ps:scale web=1\n```\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30af\u30bb\u30b9\n\n```\nheroku open\n```\n\n\u30d6\u30e9\u30a6\u30b6\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066,node-canvas \u304b\u3089\u5410\u51fa\u3055\u308c\u305f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u7121\u4e8b\u5b8c\u4e86\u3067\u3059\u3002\n\n![node-canvas on Heroku](http://i.gyazo.com/01ceca66df0705a239122eabc85b5535.png)\n\nDEMO: https://rocky-eyrie-7538.herokuapp.com/\n", "tags": ["Heroku", "canvas", "Node.js"]}