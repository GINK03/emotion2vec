{"tags": ["AdventCalendar", "\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea", "monaca"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u5916\u90e8\u30b5\u30fc\u30d0\u30fc\u3068Ajax\u901a\u4fe1\u3057\u305f\u3044\u5834\u5408\u306b\u3064\u3044\u3066\u8abf\u3079\u307e\u3059\u3002\n\nAccess-Control-Allow-Origin\u3068\u306f\n\u901a\u5e38\u3001\u7570\u306a\u308b\u30c9\u30e1\u30a4\u30f3\u3078\u306eAjax\u901a\u4fe1\u306f\u3067\u304d\u306a\u3044\u304c\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u30fc\u306bAccess-Control-Allow-Origin\u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u81ea\u8eab\u306e\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u3002\n\n\n\n\u9805\u76ee\n\u8aac\u660e\n\n\n\n\nAccess-Control-Allow-Origin\n\u300c*\u300d\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3059\u3079\u3066\u306e\u30b5\u30a4\u30c8\u304b\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u7279\u5b9a\u306e\u30b5\u30a4\u30c8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306e\u307f\u8a31\u53ef\u3059\u308b\u3068\u3044\u3063\u305f\u8a2d\u5b9a\u306b\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3002\n\n\nAccess-Control-Allow-Methods\n\u3069\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8a31\u53ef\u3059\u308b\u304b\u306e\u8a2d\u5b9a\u3002GET\u3001PUT\u3001DELETE\u306a\u3069\u3092\u6307\u5b9a\u3002\n\n\n\n\n\u30b3\u30fc\u30c9\n\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u30fc\u306b\u300cAccess-Control-Allow-Origin\u300d\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u4eca\u56de\u306f\u300c*\u300d\u3092\u6307\u5b9a\u3002\n\nservlet\n@WebServlet(name = \"CrossServlet\", urlPatterns = {\"/CrossServlet\"})\npublic class CrossServlet extends HttpServlet {\n\n    protected void processRequest(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        response.setContentType(\"text/html;charset=UTF-8\");\n\n        String name = request.getParameter(\"name\");\n\n        response.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n\n        try (PrintWriter out = response.getWriter()) {\n            out.println(name + \"\u3055\u3093\u3053\u3093\u306b\u3061\u306f\uff01\");\n        }\n    }\n}\n\n\n\u753b\u9762\u306fJavaScript\u3092\u547c\u3073\u51fa\u3059\u30dc\u30bf\u30f3\u306e\u307f\u3002\n\nhtml\n<ons-page>\n    <ons-toolbar>\n        <div class=\"center\">AjaxJSON</div>\n    </ons-toolbar>\n\n    <div style=\"text-align: center\">\n        <ons-button onclick=\"crossAjax()\">\n            Cross Ajax\n        </ons-button>\n\n        <div id=\"ajax\"></div>\n    </div>\n</ons-page>\n\n\n\u5916\u90e8\u30b5\u30fc\u30d0\u30fc\u306bPOST\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u3002\n\u30c7\u30fc\u30bf\u306b\u306fname\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306bMary\u3092\u8a2d\u5b9a\u3002\n\u6210\u529f\u3057\u305f\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u3063\u3066\u753b\u9762\u306b\u8868\u793a\u3002\n\njs\nfunction crossAjax(){\n    $.ajax({\n        type: \"POST\",\n        url: \"http://examplea.com:/AllowAccessCross/CrossServlet\",\n        data: \"name=Mary\",\n        success: function(data){\n            $(\"#ajax\").append(\"<div>\" + data + \"</div>\");\n        }\n    });\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nMonaca\u306fhttps\u306b\u5bfe\u3057\u3066\u3001\u79c1\u304c\u7acb\u3066\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306fhttp\u3067\u306e\u30a2\u30af\u30bb\u30b9\u306a\u306e\u3067\u3001\u5b89\u5168\u3067\u306f\u306a\u3044\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u3066\u3044\u308b\u3068\u3057\u3066Chrome\u306e\u958b\u767a\u8005\u30c4\u30fc\u30eb\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\u3001\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u306e\u53f3\u7aef\u306e\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u5b89\u5168\u3067\u306f\u306a\u3044\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8aad\u307f\u8fbc\u3080\u3092\u62bc\u4e0b\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u304b\u3089\u9001\u3063\u305fname\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u5024\u3092\u5143\u306b\u30b5\u30fc\u30d0\u30fc\u5074\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u753b\u9762\u306b\u8868\u793a\u3002\n\n\n\u307e\u3068\u3081\n\u30b5\u30fc\u30d0\u30fc\u5074\u304c\u30af\u30ed\u30b9\u30aa\u30ea\u30b8\u30f3\u5236\u7d04\u3092\u53d7\u3051\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u8a31\u53ef\u3059\u308c\u3070\u3088\u3044\u3060\u3051\u3063\u3066\u3044\u3046\u611f\u3058\u3067\u3059\u3002\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7684\u306a\u3053\u3068\u306f\u8003\u616e\u306b\u5165\u308c\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u304c\u3002\n\n\u53c2\u8003\n\nHTTP access control (CORS)\n\n# \u306f\u3058\u3081\u306b\n\u5916\u90e8\u30b5\u30fc\u30d0\u30fc\u3068Ajax\u901a\u4fe1\u3057\u305f\u3044\u5834\u5408\u306b\u3064\u3044\u3066\u8abf\u3079\u307e\u3059\u3002\n\n# Access-Control-Allow-Origin\u3068\u306f\n\u901a\u5e38\u3001\u7570\u306a\u308b\u30c9\u30e1\u30a4\u30f3\u3078\u306eAjax\u901a\u4fe1\u306f\u3067\u304d\u306a\u3044\u304c\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u30fc\u306b**Access-Control-Allow-Origin**\u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u81ea\u8eab\u306e\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u3002\n\n|\u9805\u76ee|\u8aac\u660e|\n|:--|:--|\n|Access-Control-Allow-Origin|\u300c*\u300d\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3059\u3079\u3066\u306e\u30b5\u30a4\u30c8\u304b\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u7279\u5b9a\u306e\u30b5\u30a4\u30c8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306e\u307f\u8a31\u53ef\u3059\u308b\u3068\u3044\u3063\u305f\u8a2d\u5b9a\u306b\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3002|\n|Access-Control-Allow-Methods|\u3069\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8a31\u53ef\u3059\u308b\u304b\u306e\u8a2d\u5b9a\u3002GET\u3001PUT\u3001DELETE\u306a\u3069\u3092\u6307\u5b9a\u3002|\n\n# \u30b3\u30fc\u30c9\n\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u30fc\u306b\u300cAccess-Control-Allow-Origin\u300d\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u4eca\u56de\u306f\u300c*\u300d\u3092\u6307\u5b9a\u3002\n\n```java:servlet\n@WebServlet(name = \"CrossServlet\", urlPatterns = {\"/CrossServlet\"})\npublic class CrossServlet extends HttpServlet {\n\n    protected void processRequest(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        response.setContentType(\"text/html;charset=UTF-8\");\n        \n        String name = request.getParameter(\"name\");\n        \n        response.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n        \n        try (PrintWriter out = response.getWriter()) {\n            out.println(name + \"\u3055\u3093\u3053\u3093\u306b\u3061\u306f\uff01\");\n        }\n    }\n}\n```\n\n\u753b\u9762\u306fJavaScript\u3092\u547c\u3073\u51fa\u3059\u30dc\u30bf\u30f3\u306e\u307f\u3002\n\n```html:html\n<ons-page>\n    <ons-toolbar>\n        <div class=\"center\">AjaxJSON</div>\n    </ons-toolbar>\n\n    <div style=\"text-align: center\">\n        <ons-button onclick=\"crossAjax()\">\n            Cross Ajax\n        </ons-button>\n    \n        <div id=\"ajax\"></div>\n    </div>\n</ons-page>\n```\n\n\u5916\u90e8\u30b5\u30fc\u30d0\u30fc\u306bPOST\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u3002\n\u30c7\u30fc\u30bf\u306b\u306fname\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306bMary\u3092\u8a2d\u5b9a\u3002\n\u6210\u529f\u3057\u305f\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u3063\u3066\u753b\u9762\u306b\u8868\u793a\u3002\n\n```js:js\nfunction crossAjax(){\n    $.ajax({\n        type: \"POST\",\n        url: \"http://examplea.com:/AllowAccessCross/CrossServlet\",\n        data: \"name=Mary\",\n        success: function(data){\n            $(\"#ajax\").append(\"<div>\" + data + \"</div>\");\n        }\n    });\n}\n```\n\n# \u5b9f\u884c\u7d50\u679c\nMonaca\u306fhttps\u306b\u5bfe\u3057\u3066\u3001\u79c1\u304c\u7acb\u3066\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306fhttp\u3067\u306e\u30a2\u30af\u30bb\u30b9\u306a\u306e\u3067\u3001\u5b89\u5168\u3067\u306f\u306a\u3044\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u3066\u3044\u308b\u3068\u3057\u3066Chrome\u306e\u958b\u767a\u8005\u30c4\u30fc\u30eb\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\u3001\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u306e\u53f3\u7aef\u306e\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001**\u5b89\u5168\u3067\u306f\u306a\u3044\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8aad\u307f\u8fbc\u3080**\u3092\u62bc\u4e0b\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-09 13.34.57.png](https://qiita-image-store.s3.amazonaws.com/0/48912/7e1961e4-034d-89cb-633a-b19cf73c342e.png)\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u304b\u3089\u9001\u3063\u305fname\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u5024\u3092\u5143\u306b\u30b5\u30fc\u30d0\u30fc\u5074\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u753b\u9762\u306b\u8868\u793a\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-09 13.35.37.png](https://qiita-image-store.s3.amazonaws.com/0/48912/369f0a78-0b0a-be7a-a998-54662e7c1284.png)\n\n# \u307e\u3068\u3081\n\u30b5\u30fc\u30d0\u30fc\u5074\u304c\u30af\u30ed\u30b9\u30aa\u30ea\u30b8\u30f3\u5236\u7d04\u3092\u53d7\u3051\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u8a31\u53ef\u3059\u308c\u3070\u3088\u3044\u3060\u3051\u3063\u3066\u3044\u3046\u611f\u3058\u3067\u3059\u3002\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7684\u306a\u3053\u3068\u306f\u8003\u616e\u306b\u5165\u308c\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u304c\u3002\n\n# \u53c2\u8003\n* [HTTP access control (CORS)](https://developer.mozilla.org/ja/docs/HTTP_access_control#Access-Control-Expose-Headers)\n"}