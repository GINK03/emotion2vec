{"context": "HTTPoison \u3067 \u975e\u540c\u671f\u901a\u4fe1\u3059\u308b\u5834\u5408\u306f receive do\u3092\u5229\u7528\u3059\u308b\u3002\n\u307e\u305f\u518d\u5e30\u3067\u7d50\u679c\u3092\u66f4\u65b0\u3059\u308b\u3002\n  def send(url, json, headers) do\n    process = spawn fn -> looper end\n    HTTPoison.post!(url, json, headers, [stream_to: process]) \n  end\n\n  defp looper(code \\\\ 200, headers \\\\ \"\", payload \\\\ \"\") do\n    receive do\n      %HTTPoison.AsyncStatus{id: reference, code: code} -> \n        looper(code)\n      %HTTPoison.AsyncHeaders{id: reference, headers: headers} -> \n        looper(code, headers)\n      %HTTPoison.AsyncChunk{chunk: chunk} -> \n        looper(code, headers, chunk)\n      %HTTPoison.AsyncEnd{id: reference} -> \n        # do something ...\n    end\n  end\n\n\u53c2\u8003\u30ea\u30f3\u30af\nhttps://hexdocs.pm/httpoison/overview.html\n`HTTPoison` \u3067 \u975e\u540c\u671f\u901a\u4fe1\u3059\u308b\u5834\u5408\u306f `receive do `\u3092\u5229\u7528\u3059\u308b\u3002\n\u307e\u305f\u518d\u5e30\u3067\u7d50\u679c\u3092\u66f4\u65b0\u3059\u308b\u3002\n\n```\n  def send(url, json, headers) do\n    process = spawn fn -> looper end\n    HTTPoison.post!(url, json, headers, [stream_to: process]) \n  end\n  \n  defp looper(code \\\\ 200, headers \\\\ \"\", payload \\\\ \"\") do\n    receive do\n      %HTTPoison.AsyncStatus{id: reference, code: code} -> \n        looper(code)\n      %HTTPoison.AsyncHeaders{id: reference, headers: headers} -> \n        looper(code, headers)\n      %HTTPoison.AsyncChunk{chunk: chunk} -> \n        looper(code, headers, chunk)\n      %HTTPoison.AsyncEnd{id: reference} -> \n        # do something ...\n    end\n  end\n```\n\n\u53c2\u8003\u30ea\u30f3\u30af\nhttps://hexdocs.pm/httpoison/overview.html\n", "tags": ["Elixir", "Phoenix"]}