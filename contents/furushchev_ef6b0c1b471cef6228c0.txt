{"context": "\n\nEnvironment\n\nNVIDIA Jetson TX1\n\nhttps://developer.nvidia.com/embedded-computing\n\n\nStereolabs ZED\n\nhttps://www.stereolabs.com/zed/specs/\n\n\nPreInstall\n\nCPU Fan\u3092\u6709\u52b9\u306b\u3059\u308b\n# ref: http://elinux.org/Jetson/TX1_Controlling_Performance\nsudo sh -c 'echo 255 > /sys/kernel/debug/tegra_fan/target_pwm'\n\n\u5f53\u521dCPU\u30d5\u30a1\u30f3\u304c\u56de\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u304b\u3089\u304b\u3001\u9014\u4e2d\u3067\u56fa\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u3002\n\nInstallation\n\nJetPack\u3092\u4f7f\u3063\u3066OpenCV/CUDA\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nZED\u306fCUDA\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u3067\u307e\u305a\u306fCUDA\u3092\u5165\u308c\u308b\u3002\n\nhttps://developer.nvidia.com/embedded/jetpack\n\nNOTE JetPack\u306fTX1\u3067\u306f\u306a\u304f\u3001\u666e\u901a\u306ePC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u7528\u3059\u308b\u3002\n\n\nTX1 32-bit\u3092\u9078\u629e(TX1\u306fCPU\u306f64bit\u3060\u304c\u3001OS\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f32bit)\n\n\n\u6700\u4f4e\u9650\u306e\u3082\u306e\u3060\u3051\u9078\u629e(\u5fc5\u8981\u306e\u306a\u3044\u3082\u306e\u3092\"no action\"\u3078\u5909\u66f4\u3059\u308b)\n\n\n\u3042\u3068\u306f\u30c0\u30a4\u30a2\u30ed\u30b0\u306b\u5f93\u3046\u3002\n\n\nZED\u3092TX1\u306b\u633f\u3059\u3002\n\nZED SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u6700\u5f8c\u306b\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u3002\n\n\nZED SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nhttps://www.stereolabs.com/developers/#download_anchor\n\n\u30d0\u30c3\u30c1\u3092\u5b9f\u884c\u3059\u308b\nchmod +x ZED_SDK_JTX1_v*.run\nbash ./ZED_SDK_JTX1_v*.run\n\n\n\n\u518d\u8d77\u52d5\nsudo reboot\n\n\n\n\nROS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu trusty main\" > /etc/apt/sources.list.d/ros-latest.list'\nsudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net --recv-key 0xB01FA116\nsudo apt-get update\nsudo apt-get install -y -qq git python-rosdep python-wstool python-catkin-tools ros-indigo-rosbash ros-indigo-roslib\nsudo rosdep init\nrosdep update\nmkdir -p ~/ros/indigo/src\ncd ~/ros/indigo/src\nwstool init\nwstool set zed-ros-wrapper --git https://github.com/stereolabs/zed-ros-wrapper\nwstool up\nrosdep install --from-paths . --ignore-src -r -n -y\ncd ~/ros/indigo\ncatkin init\ncatkin config --cmake-args -DCMAKE_BUILD_TYPE=Release\ncatkin build\necho 'source $HOME/ros/indigo/devel/setup.bash' >> ~/.bashrc\nexec -l $SHELL\n\n\n\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u306e\u624b\u52d5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u30ab\u30e1\u30e9\u8d77\u52d5\u6642\u306b\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u3063\u3066\u304f\u308b\u304c\u3001Firewall\u306e\u8a2d\u5b9a\u306a\u3069\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u304c\u3042\u308b\u3002\u305d\u306e\u5834\u5408\u306f\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u3066\u3001 /usr/local/zed/settings\u306b\u7f6e\u304f\u3002\n\nRun\n\n\u753b\u50cf\u30fb\u70b9\u7fa4\u3092\u898b\u3066\u307f\u308b\n\nViewer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nsudo apt-get install -y -qq ros-indigo-rqt-image-view ros-indigo-rviz\n\n# ref: http://answers.ros.org/question/223995/rviz-bus-error-on-nvidia-jetson-tx1-board/\necho 'unset GTK_IM_MODULE' >> ~/.bashrc\nexec -l $SHELL\n\n\n\u30ab\u30e1\u30e9\u306e\u8d77\u52d5\n\nroslaunch zed_wrapper zed.launch\n\n\n\u753b\u50cf\u8868\u793a\n\nrqt_image_view\n# /camera/rgb/image_rect_color \u306a\u3069\u3092\u9078\u629e\n\n\n\u70b9\u7fa4\u8868\u793a\n\nrviz\n# Fixed Frame\u3092zed_initial_frame\u306b\n# Add -> PointCloud2\n# Topic: /camera/point_cloud/cloud, Color Transformer: RGB8\n\n\nSLAM\u3057\u3066\u307f\u308b\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nsudo apt-get install -y -qq ros-indigo-rtabmap-ros\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306alaunch\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\n<!-- zed_rtabmap.launch -->\n<launch>\n  <arg name=\"rviz\" default=\"false\" />\n  <arg name=\"rtabmapviz\" default=\"true\" />\n  <node name=\"camera_to_zed_frame\"\n    pkg=\"tf\" type=\"static_transform_publisher\"\n    args=\"0 0 0 -1.5707963267948966 0 -1.5707963267948966 camera_link zed_initial_frame 100\" />\n  <include file=\"$(find rtabmap_ros)/launch/rgbd_mapping.launch\">\n    <arg name=\"rtabmap_args\" value=\"--delete_db_on_start\" />\n    <arg name=\"depth_registered_topic\" value=\"/camera/depth/image_rect_color\" />\n    <arg name=\"rviz\" value=\"$(arg rviz)\" />\n    <arg name=\"rtabmapviz\" value=\"$(arg rtabmapviz)\" />\n  </include>\n</launch>\n\n\n\u8d77\u52d5\u3059\u308b\n\nroslaunch zed_wrapper zed.launch\n\nroslaunch zed_rtabmap.launch\n\n\u4e0b\u8a18\u753b\u50cf\u53f3\u5074\u306b\u4e16\u754c\u5ea7\u6a19\u7cfb\u304b\u3089\u898b\u305f\u30ab\u30e1\u30e9\u306e\u8ecc\u8de1\u3068\u91cd\u306d\u3042\u308f\u305b\u3089\u308c\u305f\u70b9\u7fa4\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308b\u3002\n\n\u753b\u9762\u304c\u8d64\u304f\u306a\u3063\u305f\u3089\u81ea\u5df1\u4f4d\u7f6e\u3092\u55aa\u5931\u3057\u305f\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u306a\u306e\u3067\u3001\u4e00\u6642\u505c\u6b62\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3001Reset Odometry\u3092\u62bc\u3059\u3002\n\n\n\u3059\u3054\u3044\n\n# Environment\n\n- NVIDIA Jetson TX1\n\nhttps://developer.nvidia.com/embedded-computing\n![tx1.png](http://images.nvidia.com/content/tegra/embedded-systems/images/jetson-tx1-developer-kits.png)\n\n- Stereolabs ZED\n\nhttps://www.stereolabs.com/zed/specs/\n![zed.jpg](https://www.stereolabs.com/img/about/zed_face.jpg)\n\n# PreInstall\n\n### CPU Fan\u3092\u6709\u52b9\u306b\u3059\u308b\n\n```bash\n# ref: http://elinux.org/Jetson/TX1_Controlling_Performance\nsudo sh -c 'echo 255 > /sys/kernel/debug/tegra_fan/target_pwm'\n```\n\n\u5f53\u521dCPU\u30d5\u30a1\u30f3\u304c\u56de\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u304b\u3089\u304b\u3001\u9014\u4e2d\u3067\u56fa\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u3002\n\n# Installation\n\n### JetPack\u3092\u4f7f\u3063\u3066OpenCV/CUDA\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n  ZED\u306fCUDA\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u3067\u307e\u305a\u306fCUDA\u3092\u5165\u308c\u308b\u3002\n\n- https://developer.nvidia.com/embedded/jetpack\n- **NOTE** JetPack\u306fTX1\u3067\u306f\u306a\u304f\u3001\u666e\u901a\u306ePC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u7528\u3059\u308b\u3002\n\n  1. TX1 32-bit\u3092\u9078\u629e(TX1\u306fCPU\u306f64bit\u3060\u304c\u3001OS\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f32bit)\n  ![jetpack_top.png](https://qiita-image-store.s3.amazonaws.com/0/10402/23df362f-8607-7fb7-f56a-7294b31cab4d.png)\n  2. \u6700\u4f4e\u9650\u306e\u3082\u306e\u3060\u3051\u9078\u629e(\u5fc5\u8981\u306e\u306a\u3044\u3082\u306e\u3092\"no action\"\u3078\u5909\u66f4\u3059\u308b)\n  ![select.png](https://qiita-image-store.s3.amazonaws.com/0/10402/c0ce8e2a-33af-89b8-c756-440bed231556.png)\n  3. \u3042\u3068\u306f\u30c0\u30a4\u30a2\u30ed\u30b0\u306b\u5f93\u3046\u3002\n\n### ZED\u3092TX1\u306b\u633f\u3059\u3002\n\n- ZED SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u6700\u5f8c\u306b\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u3002\n\n### ZED SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n- https://www.stereolabs.com/developers/#download_anchor\n\n- \u30d0\u30c3\u30c1\u3092\u5b9f\u884c\u3059\u308b\n\n    ```bash\nchmod +x ZED_SDK_JTX1_v*.run\nbash ./ZED_SDK_JTX1_v*.run\n```\n\n- \u518d\u8d77\u52d5\n\n    ```bash\nsudo reboot\n```\n\n### ROS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nsudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu trusty main\" > /etc/apt/sources.list.d/ros-latest.list'\nsudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net --recv-key 0xB01FA116\nsudo apt-get update\nsudo apt-get install -y -qq git python-rosdep python-wstool python-catkin-tools ros-indigo-rosbash ros-indigo-roslib\nsudo rosdep init\nrosdep update\nmkdir -p ~/ros/indigo/src\ncd ~/ros/indigo/src\nwstool init\nwstool set zed-ros-wrapper --git https://github.com/stereolabs/zed-ros-wrapper\nwstool up\nrosdep install --from-paths . --ignore-src -r -n -y\ncd ~/ros/indigo\ncatkin init\ncatkin config --cmake-args -DCMAKE_BUILD_TYPE=Release\ncatkin build\necho 'source $HOME/ros/indigo/devel/setup.bash' >> ~/.bashrc\nexec -l $SHELL\n```\n\n- \u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u306e\u624b\u52d5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u30ab\u30e1\u30e9\u8d77\u52d5\u6642\u306b\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u3063\u3066\u304f\u308b\u304c\u3001Firewall\u306e\u8a2d\u5b9a\u306a\u3069\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u304c\u3042\u308b\u3002\u305d\u306e\u5834\u5408\u306f\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089\u30ad\u30e3\u30ea\u30d6\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u3066\u3001 `/usr/local/zed/settings`\u306b\u7f6e\u304f\u3002\n\n# Run\n\n### \u753b\u50cf\u30fb\u70b9\u7fa4\u3092\u898b\u3066\u307f\u308b\n\n- Viewer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nsudo apt-get install -y -qq ros-indigo-rqt-image-view ros-indigo-rviz\n\n# ref: http://answers.ros.org/question/223995/rviz-bus-error-on-nvidia-jetson-tx1-board/\necho 'unset GTK_IM_MODULE' >> ~/.bashrc\nexec -l $SHELL\n```\n\n- \u30ab\u30e1\u30e9\u306e\u8d77\u52d5\n\n```bash\nroslaunch zed_wrapper zed.launch\n```\n\n- \u753b\u50cf\u8868\u793a\n\n```bash\nrqt_image_view\n# /camera/rgb/image_rect_color \u306a\u3069\u3092\u9078\u629e\n```\n\n- \u70b9\u7fa4\u8868\u793a\n\n```bash\nrviz\n# Fixed Frame\u3092zed_initial_frame\u306b\n# Add -> PointCloud2\n# Topic: /camera/point_cloud/cloud, Color Transformer: RGB8\n```\n\n### SLAM\u3057\u3066\u307f\u308b\n\n- \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nsudo apt-get install -y -qq ros-indigo-rtabmap-ros\n```\n\n- \u4ee5\u4e0b\u306e\u3088\u3046\u306alaunch\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\n```xml\n<!-- zed_rtabmap.launch -->\n<launch>\n  <arg name=\"rviz\" default=\"false\" />\n  <arg name=\"rtabmapviz\" default=\"true\" />\n  <node name=\"camera_to_zed_frame\"\n\tpkg=\"tf\" type=\"static_transform_publisher\"\n\targs=\"0 0 0 -1.5707963267948966 0 -1.5707963267948966 camera_link zed_initial_frame 100\" />\n  <include file=\"$(find rtabmap_ros)/launch/rgbd_mapping.launch\">\n    <arg name=\"rtabmap_args\" value=\"--delete_db_on_start\" />\n    <arg name=\"depth_registered_topic\" value=\"/camera/depth/image_rect_color\" />\n    <arg name=\"rviz\" value=\"$(arg rviz)\" />\n    <arg name=\"rtabmapviz\" value=\"$(arg rtabmapviz)\" />\n  </include>\n</launch>\n```\n\n- \u8d77\u52d5\u3059\u308b\n\n```bash\nroslaunch zed_wrapper zed.launch\n```\n\n```bash\nroslaunch zed_rtabmap.launch\n```\n\n\u4e0b\u8a18\u753b\u50cf\u53f3\u5074\u306b\u4e16\u754c\u5ea7\u6a19\u7cfb\u304b\u3089\u898b\u305f\u30ab\u30e1\u30e9\u306e\u8ecc\u8de1\u3068\u91cd\u306d\u3042\u308f\u305b\u3089\u308c\u305f\u70b9\u7fa4\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308b\u3002\n![rtabmap.png](https://qiita-image-store.s3.amazonaws.com/0/10402/d918b8e5-a1f6-516e-5d73-5d9f4d32cbef.png)\n\n\u753b\u9762\u304c\u8d64\u304f\u306a\u3063\u305f\u3089\u81ea\u5df1\u4f4d\u7f6e\u3092\u55aa\u5931\u3057\u305f\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u306a\u306e\u3067\u3001\u4e00\u6642\u505c\u6b62\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3001Reset Odometry\u3092\u62bc\u3059\u3002\n![recover.png](http://official-rtab-map-forum.67519.x6.nabble.com/file/n239/red2.png)\n\n- \u3059\u3054\u3044\n", "tags": ["JetsonTX1", "ZED", "ROS", "SLAM", "CUDA"]}