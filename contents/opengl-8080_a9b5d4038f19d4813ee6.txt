{"context": " More than 1 year has passed since last update.\n\nMyBatis \u3068\u306f\nSQL \u3068 Java \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7d10\u4ed8\u3051\u308b\u6c38\u7d9a\u5316\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\u4ee5\u524d\u306f iBATIS \u3068\u3044\u3046\u540d\u524d\u3067 Apache \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\uff11\u3064\u3068\u3057\u3066\u958b\u767a\u3055\u308c\u3066\u3044\u305f\u3002\n\u3057\u304b\u3057\u3001 2010\u5e746\u6708\u306b Apache \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u8ca1\u56e3\u3067\u306e\u958b\u767a\u304c\u4e2d\u6b62\u3055\u308c\u3001\u73fe\u5728\u306f MyBatis \u3068\u3044\u3046\u540d\u524d\u3067\u958b\u767a\u3055\u308c\u3066\u3044\u308b\u3002\nSQL \u6587\u3092\u5b8c\u5168\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u305f\u3044\u5834\u5408\u306b\u4f7f\u3044\u3084\u3059\u3044\u3089\u3057\u3044\u3002\n\n\u74b0\u5883\n\nOS\nWindows 7 64bit\n\nJava\n1.8.0_65\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\nMySQL 5.5.28\n\nHello World\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nbuild.gradle\n    compile 'org.mybatis:mybatis:3.3.0'\n    compile 'mysql:mysql-connector-java:5.1.38'\n\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u6e96\u5099\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-src/main/\n|  |-java/\n|  |  `-sample/mybatis/\n|  |     `-Main.java\n|  `-resources/\n|     |-mybatis-config.xml\n|     `-sample_mapper.xml\n`-build.gradle\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <environments default=\"sample_id\">\n    <environment id=\"sample_id\">\n      <transactionManager type=\"JDBC\"/>\n      <dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n        <property name=\"url\" value=\"jdbc:mysql://localhost/test\"/>\n        <property name=\"username\" value=\"test\"/>\n        <property name=\"password\" value=\"test\"/>\n      </dataSource>\n    </environment>\n  </environments>\n  <mappers>\n    <mapper resource=\"sample_mapper.xml\"/>\n  </mappers>\n</configuration>\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\n\u5b9f\u88c5\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        // \u2605\u30eb\u30fc\u30c8\u3068\u306a\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            // \u2605\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5143\u306b\u3001 SqlSessionFactory \u3092\u4f5c\u6210\u3059\u308b\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            // \u2605SqlSessionFactory \u304b\u3089 SqlSession \u3092\u751f\u6210\u3059\u308b\n            try (SqlSession session = factory.openSession()) {\n                // \u2605SqlSession \u3092\u4f7f\u3063\u3066 SQL \u3092\u5b9f\u884c\u3059\u308b\n                List<Map<String, Object>> result = session.selectList(\"sample.mybatis.selectTest\");\n\n                result.forEach(row -> {\n                    System.out.println(\"---------------\");\n                    row.forEach((columnName, value) -> {\n                        System.out.printf(\"columnName=%s, value=%s%n\", columnName, value);\n                    });\n                });\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n---------------\ncolumnName=id, value=1\ncolumnName=value, value=hoge\n---------------\ncolumnName=id, value=2\ncolumnName=value, value=fuga\n---------------\ncolumnName=id, value=3\ncolumnName=value, value=piyo\n\n\n\n\u8aac\u660e\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n\n\u307e\u305a\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u306e\u63a5\u7d9a\u60c5\u5831\u306a\u3069\u3092\u5b9a\u7fa9\u3057\u305f\u30e1\u30a4\u30f3\u3068\u306a\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\uff08mybatis-config.xml\uff09\u3002\n\u6b21\u306b\u3001 SQL \u6587\u3084\u691c\u7d22\u7d50\u679c\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u306a\u3069\u3092\u5b9a\u7fa9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\uff08sample_mapper.xml\uff09\u3002\n\n\n\u5b9f\u88c5\n\n\n\u307e\u305a\u3001 SqlSessionFactoryBuilder \u3092\u4f7f\u3063\u3066\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\uff08mybatis-config.xml\uff09\u3092\u8aad\u307f\u8fbc\u3080\u3002\n\nSqlSessionFactory \u3092\u4f7f\u3063\u3066\u3001 SqlSession \u3092\u751f\u6210\u3059\u308b\u3002\n\nSqlSession \u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b SQL \u5b9f\u884c\u7528\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066 SQL \u3092\u5b9f\u884c\u3059\u308b\uff08selectList()\uff09\u3002\n\u7b2c\u4e00\u5f15\u6570\u306b\u306f\u3001\u5b9f\u884c\u3059\u308b SQL \u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e ID \uff08\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID\uff09\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \u3084\u623b\u308a\u5024\u306e\u578b\u306f\u3001 sample_mapper.xml \u3067\u5b9a\u7fa9\u3055\u308c\u305f\u60c5\u5831\u304c\u5143\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n\n\n\u5404\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u63a8\u5968\u30b9\u30b3\u30fc\u30d7\n\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n\u8aac\u660e\n\u63a8\u5968\u30b9\u30b3\u30fc\u30d7\n\n\n\n\nSqlSessionFactoryBuilder\n\nSqlSessionFactory \u3092\u4f5c\u3063\u305f\u3089\u7528\u6e08\u307f\u3002\n\u30e1\u30bd\u30c3\u30c9\u30b9\u30b3\u30fc\u30d7\n\n\nSqlSessionFactory\n\u4e00\u5ea6\u4f5c\u3063\u305f\u3089\u3001\u305d\u308c\u3092\u4f7f\u3044\u56de\u3059\u3079\u304d\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\n\n\nSqlSession\n\u975e\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u3002\u4e00\u9023\u306e SQL \u5b9f\u884c\u304c\u7d42\u308f\u3063\u305f\u3089\u30af\u30ed\u30fc\u30ba\u3059\u308b\u3002\n\u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30b3\u30fc\u30d7\n\n\n\nMapper \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u203b\n\nSqlSession \u3068\u540c\u8abf\u3059\u3079\u304d\u3060\u304c\u3001\u3088\u308a\u77ed\u3044\u30b9\u30b3\u30fc\u30d7\u304c\u826f\u3044\u3002\n\u30e1\u30bd\u30c3\u30c9\u30b9\u30b3\u30fc\u30d7\n\n\n\n\u203bMapper \u306b\u3064\u3044\u3066\u306f \u3053\u3061\u3089 \u3092\u53c2\u7167\u3002\n\n\u30e1\u30bd\u30c3\u30c9\u30b9\u30b3\u30fc\u30d7\n\n\n\u30e1\u30bd\u30c3\u30c9\u5185\u3060\u3051\u3067\u4f7f\u3044\u6368\u3066\u308b\u3002\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30b3\u30fc\u30d7\n\n\nWeb \u30a2\u30d7\u30ea\u3067\u3001\uff11\u3064\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u9593\u3060\u3051\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3044\u56de\u3059\u3002\n\u4ed6\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u306f\u53c2\u7167\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u52d5\u3044\u3066\u3044\u308b\u9593\u305a\u3063\u3068\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3044\u56de\u3059\u3002\n\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n\u5916\u90e8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <properties resource=\"hoge.properties\">\n    <property name=\"hoge\" value=\"property tag\"/>\n    <property name=\"fuga\" value=\"property tag\"/>\n    <property name=\"piyo\" value=\"property tag\"/>\n  </properties>\n</configuration>\n\n\n\nhoge.properties\nfuga=property file\npiyo=property file\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Properties;\n\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            Properties prop = new Properties();\n            prop.put(\"piyo\", \"Properties Class\");\n\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in, prop);\n            Properties properties = factory.getConfiguration().getVariables();\n\n            properties.forEach((key, value) -> {\n                System.out.printf(\"%s=%s%n\", key, value);\n            });\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nhoge=property tag\nfuga=property file\npiyo=Properties Class\n\n\n\n\u4ee5\u4e0b\u306e\u5834\u6240\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\n\n<properties> \u30bf\u30b0\u5185\u306e <property> \u30bf\u30b0\u3002\n\n<properties> \u30bf\u30b0\u3067\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30ed\u30d1\u30c6\u30a3\u30d5\u30a1\u30a4\u30eb\u3002\n\nSqlSessionFactory \u3092\u751f\u6210\u3059\u308b\u3068\u304d\u306b Properties \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6e21\u3059\u3002\n\n\n\u5404\u5b9a\u7fa9\u306f\u4e0a\u8ff0\u306e\u9806\u5e8f\u3067\u8aad\u307f\u8fbc\u307e\u308c\u3001\u5f8c\u3067\u8aad\u307f\u8fbc\u307e\u308c\u305f\u3082\u306e\u3067\u4e0a\u66f8\u304d\u3055\u308c\u308b\u3002\n\n<properties> \u30bf\u30b0\u3067\u5225\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u5834\u5408\u306f\u3001 resource \u5c5e\u6027\u3067\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u3001 url \u5c5e\u6027\u3067 URL \u6307\u5b9a\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b\u3002\n\n\n\nurl \u5c5e\u6027\u3067\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f file:///C:/foo/bar/hoge.properties \u307f\u305f\u3044\u306a\u611f\u3058\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u3001 ${...} \u3068\u3044\u3046\u5f62\u3067\u53c2\u7167\u3067\u304d\u308b\u3002\n\n\n\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u3092\u5b9a\u7fa9\u3059\u308b\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u63a5\u7d9a\u5148\u60c5\u5831\u306f\u3001 environment \u3068\u3044\u3046\u5358\u4f4d\u3067\u5b9a\u7fa9\u3059\u308b\u3002\nSqlSessionFactory \u306f\u3001\u3053\u306e environment \u5358\u4f4d\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f <environments> \u30bf\u30b0\u306e default \u5c5e\u6027\u3067\u6307\u5b9a\u3057\u305f environment \u304c\u4f7f\u7528\u3055\u308c\u308b\u3002\n\u3057\u304b\u3057\u3001 SqlSessionFactory \u3092\u751f\u6210\u3059\u308b\u3068\u304d\u306b\u4efb\u610f\u306e environment \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\ntest_table @ hoge \u30b9\u30ad\u30fc\u30de\n\ntest_table @ fuga \u30b9\u30ad\u30fc\u30de\n\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <environments default=\"hoge\"> <!-- \u2605hoge \u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u6307\u5b9a -->\n    <environment id=\"hoge\">\n      <transactionManager type=\"JDBC\"/>\n      <dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n        <property name=\"url\" value=\"jdbc:mysql://localhost/hoge\"/>\n        <property name=\"username\" value=\"test\"/>\n        <property name=\"password\" value=\"test\"/>\n      </dataSource>\n    </environment>\n\n    <environment id=\"fuga\">\n      <transactionManager type=\"JDBC\"/>\n      <dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n        <property name=\"url\" value=\"jdbc:mysql://localhost/fuga\"/>\n        <property name=\"username\" value=\"test\"/>\n        <property name=\"password\" value=\"test\"/>\n      </dataSource>\n    </environment>\n  </environments>\n\n  <mappers>\n    <mapper resource=\"sample_mapper.xml\"/>\n  </mappers>\n</configuration>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.function.Function;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        execute(in -> new SqlSessionFactoryBuilder().build(in)); // \u2605environment \u3092\u6307\u5b9a\u3057\u306a\u3044\n        execute(in -> new SqlSessionFactoryBuilder().build(in, \"fuga\")); // \u2605environment \u3092\u6307\u5b9a\n    }\n\n    private static void execute(Function<InputStream, SqlSessionFactory> sqlSessionFactorySupplier) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = sqlSessionFactorySupplier.apply(in);\n\n            try (SqlSession session = factory.openSession()) {\n                System.out.println(session.selectList(\"sample.mybatis.selectTest\"));\n            }\n        }\n        System.out.println();\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[{id=1, value=fizz}, {id=2, value=buzz}]\n\n[{id=1, value=hoge}, {id=2, value=fuga}, {id=3, value=piyo}]\n\n\n\n\nSqlSessionFactoryBuilder#build() \u306e\u7b2c\u4e8c\u5f15\u6570\u3067\u3001 environment \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nJava EE \u30b5\u30fc\u30d0\u30fc\u306b\u7ba1\u7406\u3055\u308c\u305f\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u4f7f\u7528\u3059\u308b\nJava EE \u30b5\u30fc\u30d0\u30fc\u4e0a\u3067\u52d5\u304b\u3059\u5834\u5408\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306f\u30b5\u30fc\u30d0\u30fc\u306b\u767b\u9332\u3057\u3066\u304a\u3044\u3066\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5236\u5fa1\u306f Java EE \u30b3\u30f3\u30c6\u30ca\u306b\u4efb\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <environments default=\"test\">\n    <environment id=\"test\">\n      <transactionManager type=\"MANAGED\"/> <!-- \u2605type \u3092 MANAGED \u306b\u3059\u308b -->\n\n      <dataSource type=\"JNDI\"> <!-- \u2605JNDI \u306b\u3059\u308b -->\n        <!-- \u2605data_source \u3067 JNDI \u304b\u3089\u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306e\u540d\u3092\u6307\u5b9a\u3059\u308b -->\n        <property name=\"data_source\" value=\"java:app/sampleDS\"/>\n      </dataSource>\n    </environment>\n  </environments>\n\n  <mappers>\n    <mapper resource=\"sample_mapper.xml\"/>\n  </mappers>\n</configuration>\n\n\n\n\n<transactionManager> \u30bf\u30b0\u306e type \u3092 MANAGED \u306b\u3059\u308b\u3002\n\n<datasource> \u30bf\u30b0\u306e type \u3092 JNDI \u306b\u3059\u308b\u3002\n\n<property> \u30bf\u30b0\u3067\u3001 data_source \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\n\u5024\u306f JNDI \u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306e\u540d\u524d\u306b\u3059\u308b\u3002\n\n\n\n\n\u5b9f\u884c\u3055\u308c\u308b SQL \u3092\u30ed\u30b0\u306b\u51fa\u529b\u3059\u308b\nlogback \u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3059\u308c\u3070\u3001 DEBUG \u30ec\u30d9\u30eb\u3067\u51fa\u529b\u3055\u308c\u308b\u3002\n\nbuild.gradle\n    compile 'ch.qos.logback:logback-classic:1.1.3'\n\n\n\n\u30ed\u30b0\u51fa\u529b\n18:10:01.123 [main] DEBUG sample.mybatis.selectTest - ==>  Preparing: select * from test_table where id=? and id=? \n18:10:01.151 [main] DEBUG sample.mybatis.selectTest - ==> Parameters: 1(Integer), 1(Integer)\n18:10:01.165 [main] DEBUG sample.mybatis.selectTest - <==      Total: 1\n\n\n\u5b9f\u884c\u3055\u308c\u305f SQL \u3068\u3001\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u3002\n\u5b9f\u884c\u3057\u305f SQL \u306e\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \uff08sample.mybatis.selectTest\uff09\u304c\u30ed\u30ac\u30fc\u540d\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \u3092\u5229\u7528\u3057\u305f\u30ed\u30b0\u51fa\u529b\u306e\u5236\u5fa1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u691c\u7d22\n\n\u8907\u6570\u4ef6\u306e\u7d50\u679c\u3092\u53d6\u5f97\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                List<Map<String, Object>> result = session.selectList(\"sample.mybatis.selectTest\");\n                System.out.println(result);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[{id=1, value=fizz}, {id=2, value=buzz}]\n\n\n\n\u691c\u7d22\u7528\u306e SQL \u306f\u3001 <select> \u30bf\u30b0\u3067\u5ba3\u8a00\u3059\u308b\u3002\n\n\n\nid \u5c5e\u6027\u3067\u3001\u305d\u306e SQL \u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u8b58\u5225\u540d\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\nresultType \u5c5e\u6027\u3067\u3001\u691c\u7d22\u7d50\u679c\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u3069\u306e\u578b\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u304b\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\u3053\u3053\u3067\u306f map \u3068\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001 Map \u578b\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n\n\n\u691c\u7d22\u7d50\u679c\u304c\u8907\u6570\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\u5834\u5408\u3001 SqlSession \u306e selectList() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\n\u623b\u308a\u5024\u306f List \u578b\u306b\u306a\u308b\u3002\n\n\n\n\n\u5358\u4e00\u306e\u7d50\u679c\u3092\u53d6\u5f97\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table limit 1\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\");\n                System.out.println(result);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n{id=1, value=fizz}\n\n\n\n\u691c\u7d22\u7d50\u679c\u304c\uff11\u4ef6\u3060\u3051\u3067\u5358\u4e00\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u53d6\u5f97\u3057\u305f\u3044\u5834\u5408\u306f\u3001 selectOne() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u3082\u3057\u691c\u7d22\u7d50\u679c\u304c\u8907\u6570\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u8fd4\u3057\u305f\u5834\u5408\u3001 TooManyResultsException \u304c\u30b9\u30ed\u30fc\u3055\u308c\u308b\u3002\n\u691c\u7d22\u7d50\u679c\u304c 0 \u4ef6\u306e\u5834\u5408\u306f null \u3092\u8fd4\u3059\u3002\n\n\nresultType \u3067\u6307\u5b9a\u3067\u304d\u308b\u5024\nresultType \u306b\u306f\u3001\u691c\u7d22\u7d50\u679c\u3092 Java \u306e\u3069\u306e\u578b\u306b\u5909\u63db\u3059\u308b\u304b\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u901a\u5e38\u306f java.util.Map \u306e\u3088\u3046\u306b\u5909\u63db\u5148\u30af\u30e9\u30b9\u306e FQCN \u3092\u6307\u5b9a\u3059\u308b\u3002\n\u3057\u304b\u3057\u3001\u4e00\u90e8\u306e\u3088\u304f\u5229\u7528\u3059\u308b\u578b\u306b\u3064\u3044\u3066\u306f\u4e88\u3081\u30a8\u30a4\u30ea\u30a2\u30b9\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u3001\u77ed\u3044\u540d\u524d\u3067\u6307\u5b9a\u3067\u304d\u308b\u3002\n\u4ee5\u4e0b\u3001 org.apache.ibatis.type.TypeAliasRegistry \u3088\u308a\u62bd\u51fa\u3002\n\n\n\n\u30a8\u30a4\u30ea\u30a2\u30b9\n\u578b\n\n\n\n\nstring\nString\n\n\ndate\nDate\n\n\nmap\nMap\n\n\nhashmap\nHashMap\n\n\nlist\nList\n\n\narraylist\nArrayList\n\n\ndecimal\nBigDecimal\n\n\nbigdecimal\nBigDecimal\n\n\nbiginteger\nBigInteger\n\n\n_byte\nbyte\n\n\n_long\nlong\n\n\n_short\nshort\n\n\n_int\nint\n\n\n_integer\nint\n\n\n_double\ndouble\n\n\n_float\nfloat\n\n\n_boolean\nboolean\n\n\n_byte[]\nbyte[]\n\n\n_long[]\nlong[]\n\n\n_short[]\nshort[]\n\n\n_int[]\nint[]\n\n\n_integer[]\nint[]\n\n\n_double[]\ndouble[]\n\n\n_float[]\nfloat[]\n\n\n_boolean[]\nboolean[]\n\n\nbyte\nByte\n\n\nlong\nLong\n\n\nshort\nShort\n\n\nint\nInteger\n\n\ninteger\nInteger\n\n\ndouble\nDouble\n\n\nfloat\nFloat\n\n\nboolean\nBoolean\n\n\nbyte[]\nByte[]\n\n\nlong[]\nLong[]\n\n\nshort[]\nShort[]\n\n\nint[]\nInteger[]\n\n\ninteger[]\nInteger[]\n\n\ndouble[]\nDouble[]\n\n\nfloat[]\nFloat[]\n\n\nboolean[]\nBoolean[]\n\n\nobject\nObject\n\n\ndate[]\nDate[]\n\n\ndecimal[]\nBigDecimal[]\n\n\nbigdecimal[]\nBigDecimal[]\n\n\nbiginteger[]\nBigInteger[]\n\n\nobject[]\nObject[]\n\n\ncollection\nCollection\n\n\niterator\nIterator\n\n\nResultSet\nResultSet\n\n\n\n\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b\u306e\u5834\u5408\u306f _ \u3092\u524d\u306b\u4ed8\u3051\u308b\u3002\u4ed8\u3051\u306a\u3044\u5834\u5408\u306f\u30e9\u30c3\u30d1\u30fc\u30af\u30e9\u30b9\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\n\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u4efb\u610f\u306b\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <typeAliases>\n    <typeAlias type=\"foo.bar.Hoge\" alias=\"Hoge\" />\n  </typeAliases>\n\n  ...\n</configuration>\n\n\n\n\u30e1\u30a4\u30f3\u306e\u65b9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\uff08mybatis-config.xml\uff09\u306b <typeAlias> \u30bf\u30b0\u3067\u5ba3\u8a00\u3067\u304d\u308b\u3002\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u3066\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <typeAliases>\n    <package name=\"foo.bar\"/>\n  </typeAliases>\n\n  ...\n</configuration>\n\n\n\n\n<package> \u30bf\u30b0\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u5358\u4f4d\u3067\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\u3053\u306e\u5834\u5408\u3001\u30af\u30e9\u30b9\u540d\u304c\u305d\u306e\u307e\u307e\u30a8\u30a4\u30ea\u30a2\u30b9\u306b\u306a\u308b\u3002\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\u5358\u4e00\u306e\u5834\u5408\n\nsample_mapping.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table where id=#{id}\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\", 1);\n                System.out.println(result);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=? \n[DEBUG] s.m.selectTest  - ==> Parameters: 1(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 1\n{id=1, value=fizz}\n\n\n\n\n#{...} \u3068\u3044\u3046\u5f62\u5f0f\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5ba3\u8a00\u3067\u304d\u308b\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001 SqlSession \u3067 SQL \u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306b\u3001\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \uff08sample.mybatis.selectTest\uff09\u306e\u6b21\u306b\u5f15\u6570\u3067\u6e21\u3059\u3002\n\n\n\u8907\u6570\u306e\u5834\u5408\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n                                           <!-- \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b\u3092\u6307\u5b9a\u3059\u308b -->\n  <select id=\"selectTest\" resultType=\"map\" parameterType=\"sample.mybatis.MyParameter\">\n    select *\n      from test_table\n     where id=#{id}\n       and value=#{value}\n  </select>\n</mapper>\n\n\n\nMyParameter.java\npackage sample.mybatis;\n\npublic class MyParameter {\n\n    private int id;\n    private String value;\n\n    public MyParameter(int id, String value) {\n        this.id = id;\n        this.value = value;\n    }\n\n    public int getId() {\n        System.out.println(\"get id\");\n        return id;\n    }\n}\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                MyParameter param = new MyParameter(2, \"aaa\");\n\n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\", param);\n                System.out.println(result);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nget id\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=? and value=? \nget id\n[DEBUG] s.m.selectTest  - ==> Parameters: 2(Integer), aaa(String)\n\n\n\n\u8907\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u57cb\u3081\u8fbc\u3080\u5834\u5408\u3001\u4f55\u304b\u3057\u3089\u306e\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5024\u3092\u5165\u308c\u3066\u3001\u305d\u308c\u3092\u6e21\u3059\u3088\u3046\u306b\u3059\u308b\u3002\n\u5165\u308c\u7269\u3068\u306a\u308b\u30af\u30e9\u30b9\u306f\u3001 <select> \u30bf\u30b0\u306e parameterType \u5c5e\u6027\u3067\u578b\u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3002\n\u5ba3\u8a00\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u540d\u524d\u3068\u4e00\u81f4\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\uff09\u306e\u5024\u304c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089\u53d6\u5f97\u3055\u308c\u308b\u3002\n\u5024\u306f\u3001 Getter \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308c\u3070\u305d\u308c\u7d4c\u7531\u3067\u3001\u306a\u3051\u308c\u3070\u30d5\u30a3\u30fc\u30eb\u30c9\u304b\u3089\u76f4\u63a5\u53d6\u5f97\u3055\u308c\u308b\uff08private \u3067\u3082\u53d6\u5f97\u3055\u308c\u308b\u6a21\u69d8\uff09\u3002\n\n\nMap \u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\n\u8907\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u306b\u306f\u3001 Map \u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select *\n      from test_table\n     where id=#{id}\n       and value=#{value}\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                Map<String, Object> param = new HashMap<>();\n                param.put(\"id\", 10);\n                param.put(\"value\", \"hogeeee\");\n\n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\", param);\n                System.out.println(result);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=? and value=? \n[DEBUG] s.m.selectTest  - ==> Parameters: 10(Integer), hogeeee(String)\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306f Map \u3067\u3082\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001 <select> \u30bf\u30b0\u306e parameterType \u306e\u8a2d\u5b9a\u306f\u7121\u304f\u3066\u3082\u52d5\u304f\u3002\n\n\n\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\n\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u306f\u3001 MyBatis \u306b\u3088\u3063\u3066\u81ea\u52d5\u3067\u767b\u9332\u3055\u308c\u308b\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3067\u3001\u6697\u9ed9\u7684\u306b\u5229\u7528\u3067\u304d\u308b\u3002\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\n\u6761\u4ef6\n\n\n\n\n_parameter\n\uff08\u305f\u3076\u3093\uff09\u5e38\u306b\u53c2\u7167\u53ef\u80fd\n\n\ncollection\n\u30d1\u30e9\u30e1\u30fc\u30bf\u304c java.util.Collection \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u5834\u5408\n\n\nlist\n\u30d1\u30e9\u30e1\u30fc\u30bf\u304c java.util.List \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u5834\u5408\n\n\narray\n\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u914d\u5217\u306e\u5834\u5408\n\n\n\n\n\n_parameter \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u6240\u3002\n\n\norg.apache.ibatis.scripting.xmltags.DynamicContext\n\n\n\ncollection, list, arrary \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u6240\u3002\n\n\norg.apache.ibatis.session.defaults.DefaultSqlSession#wrapCollection(Object)\n\n\n\n\n\u691c\u7d22\u7d50\u679c\u3092\u4efb\u610f\u306e Java \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n\u57fa\u672c\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n\n    private int id;\n    private String value;\n\n    public void setValue(String value) {\n        System.out.println(\"setValue(\" + value + \")\");\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", value=\" + value + \"]\";\n    }\n}\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                List<TestTable> result = session.selectList(\"sample.mybatis.selectTest\");\n                System.out.println(result);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table \n[DEBUG] s.m.selectTest  - ==> Parameters: \nsetValue(fizz)\nsetValue(buzz)\n[DEBUG] s.m.selectTest  - <==      Total: 2\n[TestTable [id=1, value=fizz], TestTable [id=2, value=buzz]]\n\n\n\n\nresultType \u306b\u691c\u7d22\u7d50\u679c\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u3044 Java \u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u30ab\u30e9\u30e0\u540d\u3068\u4e00\u81f4\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u5024\u304c\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3002\n\u5024\u306e\u30bb\u30c3\u30c8\u306f\u3001 Setter \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308c\u3070\u305d\u308c\u7d4c\u7531\u3067\u3001\u306a\u3051\u308c\u3070\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u76f4\u63a5\u884c\u308f\u308c\u308b\u3002\n\n\n\u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\u3068\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u81ea\u52d5\u5316\u3055\u305b\u308b\ntest_table\n\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String testValue;\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", testValue=\" + testValue + \"]\";\n    }\n}\n\n\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/>\n  </settings>\n\n  ...\n</configuration>\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\nselectTest\u306e\u5b9f\u884c\u7d50\u679c\nTestTable [id=1, testValue=hoge]\nTestTable [id=2, testValue=fuga]\nTestTable [id=3, testValue=piyo]\n\n\n\n\nmapUnderscoreToCamelCase \u306b true \u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\u3068\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\u306e\u81ea\u52d5\u5909\u63db\u3092\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306f false \u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n\u30af\u30e9\u30b9\u3054\u3068\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <resultMap id=\"testTableResultMap\" type=\"sample.mybatis.TestTable\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"value\" column=\"value\" />\n  </resultMap>\n\n  <select id=\"selectTest\" resultMap=\"testTableResultMap\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\n\n<resultMap> \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u3001\u691c\u7d22\u7d50\u679c\u3068 Java \u30af\u30e9\u30b9\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n<id> \u30bf\u30b0\u3067\u3001\u8b58\u5225\u5b50\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\u8b58\u5225\u5b50\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8b58\u5225\u3059\u308b\u3068\u304d\u306b\u4f7f\u7528\u3059\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u3059\u3002\n\u8b58\u5225\u5b50\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3084 JOIN \u30de\u30c3\u30d4\u30f3\u30b0\u306e\u3068\u304d\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5411\u4e0a\u3059\u308b\u3089\u3057\u3044\u3002\n\nproperty \u5c5e\u6027\u3067\u3001 Java \u5074\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\ncolumn \u5c5e\u6027\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5074\u306e\u5217\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n<result> \u30bf\u30b0\u3067\u3001\u5404\u5217\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\u3053\u3061\u3089\u3082 property \u3068 column \u3067\u540d\u524d\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n\n\n\n<resultMap> \u306e id \u5c5e\u6027\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u4e00\u610f\u306b\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u540d\u524d\u3092\u5b9a\u7fa9\u3059\u308b\uff08testTableResultMap\uff09\u3002\n\n\n\u3053\u306e\u540d\u524d\u3092\u3001 <select> \u30bf\u30b0\u306e resultMap \u5c5e\u6027\u306b\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n\n\u5358\u4e00\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n\u57fa\u672c\ntest_table\n\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n\n    private int id;\n    private String string;\n    private Embedded embedded;\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", string=\" + string + \", embedded=\" + embedded + \"]\";\n    }\n}\n\n\n\nEmbedded.java\npackage sample.mybatis;\n\npublic class Embedded {\n\n    private int number;\n\n    @Override\n    public String toString() {\n        return \"Embedded [number=\" + number + \"]\";\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.TestTable\" id=\"testTableResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"string\" column=\"string\" />\n\n    <!-- \u2605association \u30bf\u30b0\u3067\u5b9a\u7fa9 -->\n    <association property=\"embedded\" javaType=\"sample.mybatis.Embedded\">\n      <result property=\"number\" column=\"number\" />\n    </association>\n  </resultMap>\n\n\n  <select id=\"selectTest\" resultMap=\"testTableResultMap\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                session\n                    .selectList(\"sample.mybatis.selectTest\")\n                    .forEach(System.out::println);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nTestTable [id=1, string=hoge, embedded=Embedded [number=100]]\nTestTable [id=2, string=fuga, embedded=Embedded [number=200]]\nTestTable [id=3, string=piyo, embedded=Embedded [number=300]]\n\n\n\n\n<association> \u30bf\u30b0\u3067\u3001\u5358\u4e00\u306e\u30af\u30e9\u30b9\u306e\u57cb\u3081\u8fbc\u307f\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\n\njavaType \u5c5e\u6027\u3067\u3001\u57cb\u3081\u8fbc\u3080\u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\uff08\u30a8\u30a4\u30ea\u30a2\u30b9\u53ef\uff09\u3002\n\u5b50\u8981\u7d20\u3067\u3001\u57cb\u3081\u8fbc\u307f\u30af\u30e9\u30b9\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\u57cb\u3081\u8fbc\u3080\u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\u3092\u5916\u51fa\u3057\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.TestTable\" id=\"testTableResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"string\" column=\"string\" />\n\n    <!-- \u2605resutlMap \u3092\u6307\u5b9a -->\n    <association property=\"embedded\" resultMap=\"embeddedResultMap\" />\n  </resultMap>\n\n  <!-- \u2605\u5225\u9014 resultMap \u3067\u5b9a\u7fa9 -->\n  <resultMap type=\"sample.mybatis.Embedded\" id=\"embeddedResultMap\">\n    <result property=\"number\" column=\"number\" />\n  </resultMap>\n\n\n  <select id=\"selectTest\" resultMap=\"testTableResultMap\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\n\n<resultMap> \u3067\u5225\u9014\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\n\u30ab\u30e9\u30e0\u540d\u306b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3059\u308b\nfoo_table\n\nbar_table\n\n\nFoo.java\npackage sample.mybatis;\n\npublic class Foo {\n    private int id;\n    private Bar bar;\n\n    @Override\n    public String toString() {\n        return \"Foo [id=\" + id + \", bar=\" + bar + \"]\";\n    }\n}\n\n\n\nBar.java\npackage sample.mybatis;\n\npublic class Bar {\n    private int id;\n\n    @Override\n    public String toString() {\n        return \"Bar [id=\" + id + \"]\";\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <!-- \u2605columnPrefix \u3067\u5171\u901a\u3059\u308b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3059\u308b -->\n    <association property=\"bar\" columnPrefix=\"bar_\" resultMap=\"barResultMap\" />\n  </resultMap>\n\n  <resultMap type=\"sample.mybatis.Bar\" id=\"barResultMap\">\n    <id property=\"id\" column=\"id\" />\n  </resultMap>\n\n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select foo.id\n          ,bar.id bar_id -- \u2605\"bar_\" \u3092\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3068\u3057\u3066\u4ed8\u3051\u308b\n      from foo_table foo\n          ,bar_table bar\n     where bar.id = foo.bar_id\n  order by foo.id asc\n  </select>\n</mapper>\n\n\n\nselectFoo\u306e\u5b9f\u884c\u7d50\u679c\nFoo [id=1, bar=Bar [id=3]]\nFoo [id=2, bar=Bar [id=2]]\nFoo [id=3, bar=Bar [id=1]]\n\n\n\nJOIN \u3068\u304b\u3057\u305f\u3068\u304d\u306b\u5225\u30c6\u30fc\u30d6\u30eb\u306e\u540c\u540d\u30ab\u30e9\u30e0\u3068\u533a\u5225\u3059\u308b\u305f\u3081\u306b\u3001\u3088\u304f\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\uff08bar_\uff09\u3092\u4ed8\u3051\u308b\u3068\u601d\u3046\u3002\n\u305d\u3046\u3044\u3046\u3068\u304d\u3067\u3082 resultMap \u3092\u4f7f\u3044\u56de\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3001 columnPrefix \u3068\u3044\u3046\u5c5e\u6027\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\ncolumnPrefix \u3092\u6307\u5b9a\u3059\u308c\u3070\u3001 column \u306e\u8a2d\u5b9a\u5024\u306b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u305f\u540d\u79f0\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\nSELECT \u3092\u5206\u3051\u3066\u5b9f\u884c\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <association property=\"bar\" column=\"bar_id\" select=\"selectBar\" />\n  </resultMap>\n\n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n\n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select * from bar_table where id = #{id}\n  </select>\n</mapper>\n\n\n\nselectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 2(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 3(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectFoo   - <==      Total: 3\nFoo [id=3, bar=Bar [id=1]]\nFoo [id=2, bar=Bar [id=2]]\nFoo [id=1, bar=Bar [id=3]]\n\n\n\n\nfoo_table \u3092\u691c\u7d22\u3057\u305f\u3042\u3068\u3001\u5404\u5217\u306b\u5bfe\u3057\u3066 bar_table \u306e\u691c\u7d22\u3092\u5225\u9014\u5b9f\u884c\u3057\u3066\u3044\u308b\u3002\n\n<association> \u30bf\u30b0\u306e select \u5c5e\u6027\u3067\u3001 <select> \u30bf\u30b0\u306e\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u3046\u3044\u3046\u691c\u7d22\u306b\u3067\u304d\u308b\u3002\n\ncolumn \u5c5e\u6027\u306b\u306f\u3001\u5b50\u30c6\u30fc\u30d6\u30eb\u306e JOIN \u306b\u4f7f\u7528\u3059\u308b\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\nJOIN \u30ad\u30fc\u304c\u8907\u6570\u3042\u308b\u5834\u5408\nfoo_table\n\nbar_table\n\n\nBar.java\npackage sample.mybatis;\n\npublic class Bar {\n    private int key1;\n    private String key2;\n\n    @Override\n    public String toString() {\n        return \"Bar [key1=\" + key1 + \", key2=\" + key2 + \"]\";\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n                                <!-- \u2605\u30ad\u30fc\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306e\u6307\u5b9a\u65b9\u6cd5 -->\n    <association property=\"bar\" column=\"{key1=bar_key1,key2=bar_key2}\" select=\"selectBar\" />\n  </resultMap>\n\n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n\n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select *\n      from bar_table\n     where key1 = #{key1}\n       and key2 = #{key2}\n  </select>\n</mapper>\n\n\n\nselectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer), fuga(String)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer), hoge(String)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 2(Integer), hoge(String)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectFoo   - <==      Total: 3\nFoo [id=2, bar=Bar [key1=1, key2=fuga]]\nFoo [id=3, bar=Bar [key1=1, key2=hoge]]\nFoo [id=1, bar=Bar [key1=2, key2=hoge]]\n\n\n\nJOIN \u3059\u308b\u3068\u304d\u306e\u30ab\u30e9\u30e0\u304c\u8907\u6570\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u3001 {prop1=column1,prop2=column2} \u3068\u3044\u3046\u5f62\u3067 column \u5c5e\u6027\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u95a2\u9023\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u3092\u9045\u5ef6\u3055\u305b\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <association property=\"bar\" column=\"{key1=bar_key1,key2=bar_key2}\" select=\"selectBar\"\n                 fetchType=\"lazy\" /> <!-- \u2605fetchType \u306b lazy \u3092\u6307\u5b9a -->\n  </resultMap>\n\n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n\n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select *\n      from bar_table\n     where key1 = #{key1}\n       and key2 = #{key2}\n  </select>\n</mapper>\n\n\n\nFoo.java\npackage sample.mybatis;\n\npublic class Foo {\n    private int id;\n    public Bar bar;\n\n    public void method() {\n        System.out.println(\"Foo.method() is called\");\n    }\n}\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                System.out.println(\"@selectList()\");\n                List<Foo> result = session.selectList(\"sample.mybatis.selectFoo\");\n\n                System.out.println(\"@result.get(0)\");\n                Foo foo = result.get(0);\n\n                System.out.println(\"** foo.class = \" + foo.getClass() + \" **\");\n\n                System.out.println(\"@foo.bar 1\");\n                System.out.println(\"<< foo.bar = \" + foo.bar + \" >>\");\n\n                System.out.println(\"@foo.method()\");\n                foo.method();\n\n                System.out.println(\"@foo.bar 2\");\n                System.out.println(\"<< foo.bar = \" + foo.bar + \" >>\");\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n@selectList()\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectFoo   - <==      Total: 3\n@result.get(0)\n** foo.class = class sample.mybatis.Foo_$$_jvst80f_0 **\n@foo.bar 1\n<< foo.bar = null >>\n@foo.method()\n[DEBUG] s.m.selectBar   - ==>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ==> Parameters: 1(Integer), fuga(String)\n[DEBUG] s.m.selectBar   - <==      Total: 1\nFoo.method() is called\n@foo.bar 2\n<< foo.bar = Bar [key1=1, key2=fuga] >>\n\n\n\n\n<association> \u306e fetchType \u5c5e\u6027\u306b lazy \u3068\u30bb\u30c3\u30c8\u3059\u308b\u3068\u3001\u95a2\u9023\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u3092\u9045\u5ef6\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u5373\u6642\u30ed\u30fc\u30c9\uff08eager\uff09\u3002\n\n\n\u9045\u5ef6\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001 MyBatis \u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u30d7\u30ed\u30ad\u30b7\u306b\u306a\u308b\uff08class sample.mybatis.Foo_$$_jvst80f_0\uff09\u3002\n\n\n\u9045\u5ef6\u30ed\u30fc\u30c9\u3067\u306a\u3044\u5834\u5408\u306f\u3001\u666e\u901a\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6e21\u3055\u308c\u308b\u3002\n\n\n\u9045\u5ef6\u30ed\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001\u300c\u30d7\u30ed\u30ad\u30b7\u306e\u3044\u305a\u308c\u304b\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u305f\u3068\u304d\u306e\u5148\u982d\u300d\u306e\u6a21\u69d8\u3002\n\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u8aad\u307f\u53d6\u3089\u308c\u305f\u3068\u304d\u3067\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u30e1\u30bd\u30c3\u30c9\u5b9f\u884c\u524d\u306b\u53c2\u7167\u3059\u308b\u3068 null \u306b\u306a\u3063\u3066\u3044\u308b\uff08\u307e\u3041\u3001\u76f4\u63a5\u53c2\u7167\u3059\u308b\u3053\u3068\u306f\u306a\u3044\u3068\u601d\u3046\u3051\u3069\u3001\u4e00\u5fdc\u6ce8\u610f\uff09\u3002\n\n\u5168\u3066\u306e\u95a2\u9023\u3092\u9045\u5ef6\u30ed\u30fc\u30c9\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u3001\u30eb\u30fc\u30c8\u306e\u8a2d\u5b9a\u3067 lazyLoadingEnabled \u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308b\u3002\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"lazyLoadingEnabled\" value=\"true\"/> <!-- \u2605true \u306b\u3059\u308b -->\n  </settings>\n\n  ...\n</configuration>\n\n\n\u3053\u306e\u5834\u5408\u3067\u3082\u3001 <association> \u30bf\u30b0\u306e fetchType \u306e\u65b9\u304c\u512a\u5148\u3055\u308c\u308b\u306e\u3067\u3001\u7279\u5b9a\u306e\u8aad\u307f\u8fbc\u307f\u3060\u3051\u5373\u6642\u30ed\u30fc\u30c9\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u8a2d\u5b9a\u3092\u4e0a\u66f8\u304d\u3067\u304d\u308b\u3002\n\n\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n\u57fa\u672c\nfoo_table\n\nbar_table\n\n\nFoo.java\npackage sample.mybatis;\n\nimport java.util.List;\n\npublic class Foo {\n    private int id;\n    private List<Bar> barList;\n\n    @Override\n    public String toString() {\n        return \"Foo [id=\" + id + \", barList=\" + barList + \"]\";\n    }\n}\n\n\n\nBar.java\npackage sample.mybatis;\n\npublic class Bar {\n    private int id;\n\n    @Override\n    public String toString() {\n        return \"Bar [id=\" + id + \"]\";\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <!-- \u2605collection \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b -->\n    <collection property=\"barList\" ofType=\"sample.mybatis.Bar\">\n      <id property=\"id\" column=\"bar_id\" />\n    </collection>\n  </resultMap>\n\n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select foo.id\n          ,bar.id bar_id\n      from foo_table foo\n          ,bar_table bar\n     where bar.foo_id = foo.id\n  </select>\n</mapper>\n\n\n\nselectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select foo.id ,bar.id bar_id from foo_table foo ,bar_table bar where bar.foo_id = foo.id \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectFoo   - <==      Total: 6\nFoo [id=1, barList=[Bar [id=1], Bar [id=2], Bar [id=3]]]\nFoo [id=2, barList=[Bar [id=4], Bar [id=5]]]\nFoo [id=3, barList=[Bar [id=6]]]\n\n\n\n\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306f\u3001 <collection> \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u5404\u8981\u7d20\u306e\u578b\u306f ofType \u5c5e\u6027\u3067\u6307\u5b9a\u3059\u308b\uff08\u30a8\u30a4\u30ea\u30a2\u30b9\u53ef\uff09\u3002\n\u305d\u308c\u4ee5\u5916\u306f\u3001 <association> \u30bf\u30b0\u306e\u3068\u304d\u3068\u540c\u3058\u30ce\u30ea\u3067\u3044\u3051\u308b\u3002\n\n\nSELECT \u3092\u5206\u5272\u3057\u3066\u5b9f\u884c\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <collection property=\"barList\" column=\"id\" select=\"selectBar\" />\n  </resultMap>\n\n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n\n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select * from bar_table where foo_id = #{id}\n  </select>\n</mapper>\n\n\n\nselectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where foo_id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 3\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where foo_id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 2(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 2\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where foo_id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 3(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectFoo   - <==      Total: 3\nFoo [id=1, barList=[Bar [id=1], Bar [id=2], Bar [id=3]]]\nFoo [id=2, barList=[Bar [id=4], Bar [id=5]]]\nFoo [id=3, barList=[Bar [id=6]]]\n\n\n\n\n<association> \u306e\u3068\u304d\u3068\u540c\u3058\u30ce\u30ea\u3067\u3067\u304d\u308b\u3002\n\u9045\u5ef6\u30ed\u30fc\u30c9\u3082\u540c\u3058\u304f\u53ef\u80fd\u3002\n\n\n\u6761\u4ef6\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u30af\u30e9\u30b9\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u4e3b\u306b\u7d99\u627f\u95a2\u4fc2\u306b\u3042\u308b\u30af\u30e9\u30b9\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3068\u304d\u306b\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3002\nbase_table\n\n\nBase.java\npackage sample.mybatis;\n\npublic class Base {\n    protected int id;\n    protected String commonValue;\n\n    @Override\n    public String toString() {\n        return \"Base [id=\" + id + \", commonValue=\" + commonValue + \"]\";\n    }\n}\n\n\n\nHoge.java\npackage sample.mybatis;\n\npublic class Hoge extends Base {\n    private String value;\n\n    @Override\n    public String toString() {\n        return \"Hoge [value=\" + value + \", id=\" + id + \", commonValue=\" + commonValue + \"]\";\n    }\n}\n\n\n\nFuga.java\npackage sample.mybatis;\n\npublic class Fuga extends Base {\n    private String value;\n\n    @Override\n    public String toString() {\n        return \"Fuga [value=\" + value + \", id=\" + id + \", commonValue=\" + commonValue + \"]\";\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Base\" id=\"baseResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n\n    <discriminator javaType=\"int\" column=\"type\">\n      <case value=\"1\" resultType=\"sample.mybatis.Hoge\">\n        <result property=\"value\" column=\"hoge_value\" />\n      </case>\n      <case value=\"2\" resultType=\"sample.mybatis.Fuga\">\n        <result property=\"value\" column=\"fuga_value\" />\n      </case>\n    </discriminator>\n  </resultMap>\n\n  <select id=\"selectBase\" resultMap=\"baseResultMap\">\n    select * from base_table\n  </select>\n</mapper>\n\n\n\nselectBase\u306e\u5b9f\u884c\u7d50\u679c\nHoge [value=hoge1, id=1, commonValue=common1]\nFuga [value=fuga2, id=2, commonValue=common2]\nBase [id=3, commonValue=common3]\n\n\n\n\n<discriminator> \u30bf\u30b0\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u6761\u4ef6\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u30af\u30e9\u30b9\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\ncolumn \u5c5e\u6027\u3067\u3001\u6761\u4ef6\u5024\u3092\u6301\u3064\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n<case> \u30bf\u30b0\u3067\u3001\u6761\u4ef6\u5024\u3054\u3068\u306b\u3069\u3046\u3044\u3046\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u884c\u3046\u304b\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\u3053\u3053\u3067\u306f\u3001 1 \u306e\u5834\u5408\u306f Hoge \u30af\u30e9\u30b9\u306b\u3001 2 \u306e\u5834\u5408\u306f Fuga \u30af\u30e9\u30b9\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3088\u3046\u306b\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\n\n\n\n<case> \u5f0f\u306b\u5b58\u5728\u3057\u306a\u3044\u6761\u4ef6\u5024\u306e\u5834\u5408\u306f\u3001\u3082\u3068\u3082\u3068\u306e <resultMap> \u30bf\u30b0\u3067\u6307\u5b9a\u3057\u3066\u3044\u305f type \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n\n\n\u30b1\u30fc\u30b9\u3054\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5916\u51fa\u3057\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Base\" id=\"baseResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n\n    <discriminator javaType=\"int\" column=\"type\">\n      <case value=\"1\" resultMap=\"hogeResultMap\" />\n      <case value=\"2\" resultMap=\"fugaResultMap\" />\n    </discriminator>\n  </resultMap>\n\n  <resultMap type=\"sample.mybatis.Hoge\" id=\"hogeResultMap\">\n    <result property=\"value\" column=\"hoge_value\" />\n  </resultMap>\n\n  <resultMap type=\"sample.mybatis.Fuga\" id=\"fugaResultMap\">\n    <result property=\"value\" column=\"fuga_value\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n  </resultMap>\n\n  <select id=\"selectBase\" resultMap=\"baseResultMap\">\n    select * from base_table\n  </select>\n</mapper>\n\n\n\n\u5b9f\u884c\u7d50\u679c\nHoge [value=hoge1, id=1, commonValue=null]\nFuga [value=fuga2, id=2, commonValue=common2]\nBase [id=3, commonValue=common3]\n\n\n\n\n<case> \u3054\u3068\u306e\u5b9a\u7fa9\u306f\u3001 <resultMap> \u3067\u62bd\u51fa\u3067\u304d\u308b\u3002\n\u305f\u3060\u3057\u3001\u305d\u306e\u5834\u5408\u5171\u901a\u90e8\u5206\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u305f\u30ab\u30e9\u30e0\u306f <id> \u4ee5\u5916\u306f\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u500b\u3005\u306e <resultMap> \u3067\u5b9a\u7fa9\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\n\n\nhogeResultMap \u306f\u3001 commonValue \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u306e\u3067 null \u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n\u3044\u3061\u3044\u3061\u500b\u3005\u306e <resultMap> \u3067\u5171\u901a\u9805\u76ee\u3092\u5b9a\u7fa9\u3057\u306a\u304a\u3059\u306e\u304c\u30b7\u30f3\u30c9\u30a4\u5834\u5408\u306f\u3001 extends \u5c5e\u6027\u3092\u4f7f\u3046\u65b9\u6cd5\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\nextends \u5c5e\u6027\u3067\u5171\u901a\u90e8\u5206\u3092\u7d99\u627f\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Base\" id=\"baseResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n\n    <discriminator javaType=\"int\" column=\"type\">\n      <case value=\"1\" resultMap=\"hogeResultMap\" />\n      <case value=\"2\" resultMap=\"fugaResultMap\" />\n    </discriminator>\n  </resultMap>\n                                                           <!-- \u2605extends \u3067 baseResultMap \u3092\u7d99\u627f -->\n  <resultMap type=\"sample.mybatis.Hoge\" id=\"hogeResultMap\" extends=\"baseResultMap\">\n    <result property=\"value\" column=\"hoge_value\" />\n  </resultMap>\n\n  <resultMap type=\"sample.mybatis.Fuga\" id=\"fugaResultMap\" extends=\"baseResultMap\">\n    <result property=\"value\" column=\"fuga_value\" />\n  </resultMap>\n\n  <select id=\"selectBase\" resultMap=\"baseResultMap\">\n    select * from base_table\n  </select>\n</mapper>\n\n\n\n\u5b9f\u884c\u7d50\u679c\nHoge [value=hoge1, id=1, commonValue=common1]\nFuga [value=fuga2, id=2, commonValue=common2]\nBase [id=3, commonValue=common3]\n\n\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session1 = factory.openSession();\n                 SqlSession session2 = factory.openSession();) {\n\n                TestTable testTable = selectAndPrintln(\"session1\", session1);\n                testTable.setValue(\"update\");\n\n                selectAndPrintln(\"session1\", session1);\n\n                selectAndPrintln(\"session2\", session2);\n            }\n        }\n    }\n\n    private static TestTable selectAndPrintln(String tag, SqlSession session) {\n        TestTable result = session.selectOne(\"sample.mybatis.selectTest\");\n        System.out.printf(\"<<%s>> %s%n\", tag, result);\n        return result;\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=1 \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 1\n<<session1>> TestTable [id=1, value=hoge]\n<<session1>> TestTable [id=1, value=update]\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=1 \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 1\n<<session2>> TestTable [id=1, value=hoge]\n\n\n\n\u691c\u7d22\u7d50\u679c\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u308b\u3002\n\u540c\u3058\u691c\u7d22\u3092\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u3068\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3044\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u8fd4\u3055\u308c\u308b\u3002\n\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u3054\u3068\u306b\u4fdd\u6301\u3055\u308c\u308b\u305f\u3081\u3001\u4ed6\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u306e\u5909\u66f4\u306e\u5f71\u97ff\u306f\u53d7\u3051\u306a\u3044\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u52d5\u4f5c\u3092\u3059\u308b\u3089\u3057\u3044\u3002\n\n\n1024 \u500b\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3002\n\u6700\u3082\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u30ad\u30e3\u30c3\u30b7\u30e5\u304b\u3089\u524a\u9664\u3055\u308c\u3066\u3044\u304f\u3002\n\u6642\u9593\u7d4c\u904e\u3067\u306f\u524a\u9664\u3055\u308c\u306a\u3044\u3002\n\ninsert, update, delete \u304c\u5b9f\u884c\u3055\u308c\u308b\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u30af\u30ea\u30a2\u3055\u308c\u308b\u3002\n\n\n\u3053\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u8a2d\u5b9a\u5024\u306e\u8a73\u7d30\u306f \u3053\u3061\u3089 \u3092\u53c2\u7167\u3002\n\n\n\u66f4\u65b0\u7cfb\u51e6\u7406\n\n\u767b\u9332\n\n\u57fa\u672c\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <insert id=\"insertTest\">\n    insert into test_table (\n        value\n    ) values (\n        #{value}\n    )\n  </insert>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                session.insert(\"sample.mybatis.insertTest\", \"hoge\");\n                session.commit();\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( value ) values ( ? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: hoge(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\n\n\ntest_table\n\n\n\n<insert> \u30bf\u30b0\u3067 INSERT \u6587\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\u3060\u3044\u305f\u3044 <select> \u306e\u3068\u304d\u3068\u540c\u3058\u30ce\u30ea\u3067\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6e21\u3059\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String value;\n\n    public TestTable(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", value=\" + value + \"]\";\n    }\n}\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(\"fuga\");\n\n                session.insert(\"sample.mybatis.insertTest\", table);\n                session.commit();\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( value ) values ( ? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: fuga(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\n\n\n\n\n\u3053\u3061\u3089\u3082 <select> \u306e\u3068\u304d\u3068\u540c\u3058\u611f\u3058\u3002\n\nparameterType \u306f\u7701\u7565\u53ef\u80fd\u3002\n\n\n\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30ad\u30fc\u3092\u53d6\u5f97\u3059\u308b\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <insert id=\"insertTest\" useGeneratedKeys=\"true\" keyProperty=\"id\">\n    insert into test_table (\n        value\n    ) values (\n        #{value}\n    )\n  </insert>\n\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(\"piyo\");\n\n                session.insert(\"sample.mybatis.insertTest\", table);\n                session.commit();\n\n                System.out.println(table);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( value ) values ( ? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: fuga(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nTestTable [id=7, value=piyo]\n\n\n\n\n\n<insert> \u30bf\u30b0\u306b useGeneratedKeys \u3068 keyProperty \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\nuseGeneratedKeys \u306f true \u3092\u6307\u5b9a\u3002\n\nkeyProperty \u306b\u306f\u30ad\u30fc\u5024\u3092\u8a2d\u5b9a\u3059\u308b Java \u5074\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\uff09\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u3059\u308b\u3068\u3001 INSERT \u6642\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f ID \u304c\u81ea\u52d5\u3067 Java \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\nOracle \u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5834\u5408\nID \u3092\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u53d6\u5f97\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <insert id=\"insertTest\">\n    <selectKey keyProperty=\"id\" resultType=\"_int\" order=\"BEFORE\">\n      select test_table_seq.nextval\n        from dual\n    </selectKey>\n    insert into test_table (\n        id\n        ,value\n    ) values (\n        #{id}\n        ,#{value}\n    )\n  </insert>\n</mapper>\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest!selectKey - ==>  Preparing: select test_table_seq.nextval from dual \n[DEBUG] s.m.insertTest!selectKey - ==> Parameters: \n[DEBUG] s.m.insertTest!selectKey - <==      Total: 1\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( id ,value ) values ( ? ,? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: 11(Integer), aaa(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nTestTable [id=11, value=aaa]\n\n\n\n\u78ba\u8a8d\nSQL> select * from test_table;\n\n        ID VALUE\n---------- -----\n        11 aaa\n\n\n\n\n<insert> \u30bf\u30b0\u306e\u4e2d\u306b <selectKey> \u30bf\u30b0\u3092\u5ba3\u8a00\u3059\u308b\u3002\n\nkeyProperty \u5c5e\u6027\u3067\u3001\u751f\u6210\u3055\u308c\u305f ID \u3092\u30bb\u30c3\u30c8\u3059\u308b Java \u30d5\u30a3\u30fc\u30eb\u30c9\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\uff09\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\norder \u5c5e\u6027\u306b BEFORE \u3092\u30bb\u30c3\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u307e\u305a\u30b7\u30fc\u30b1\u30f3\u30b9\u304b\u3089\u5024\u3092\u53d6\u5f97\u3057\u3066\u304b\u3089 INSERT \u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\u66f4\u65b0\ntest_table\n\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String value;\n\n    public TestTable(int id, String value) {\n        this.id = id;\n        this.value = value;\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <update id=\"updateTest\">\n    update test_table\n       set value = #{value}\n     where id = #{id}\n  </update>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(1, \"update\");\n\n                session.insert(\"sample.mybatis.updateTest\", table);\n                session.commit();\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.updateTest  - ==>  Preparing: update test_table set value = ? where id = ? \n[DEBUG] s.m.updateTest  - ==> Parameters: update(String), 1(Integer)\n[DEBUG] s.m.updateTest  - <==    Updates: 1\n\n\n\n\n\n<update> \u30bf\u30b0\u3067 UPDATE \u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\n\u524a\u9664\ntest_table\n\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String value;\n\n    public TestTable(int id) {\n        this.id = id;\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <delete id=\"deleteTest\">\n    delete from test_table where id = #{id}\n  </delete>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(2);\n\n                session.insert(\"sample.mybatis.deleteTest\", table);\n                session.commit();\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.deleteTest  - ==>  Preparing: delete from test_table where id = ? \n[DEBUG] s.m.deleteTest  - ==> Parameters: 2(Integer)\n[DEBUG] s.m.deleteTest  - <==    Updates: 1\n\n\n\n\n\n<delete> \u30bf\u30b0\u3067 DELETE \u6587\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\n\u30d0\u30c3\u30c1\u66f4\u65b0\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001 SQL \u3092\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b PreparedStatement \u3092\u751f\u6210\u3057\u3066 SQL \u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u767a\u884c\u3057\u3066\u3044\u308b\u3002\n\u66f4\u65b0\u4ef6\u6570\u304c\u591a\u304f\u306a\u308b\u5834\u5408\u3001\u3053\u308c\u306f\u975e\u5e38\u306b\u52b9\u7387\u304c\u60aa\u3044\u3002\nMyBatis \u3067\u306f\u3001\u8a2d\u5b9a\u306b\u3088\u308a PreparedStatement \u306e\u4f7f\u3044\u56de\u3057\u3084\u3001\u30d0\u30c3\u30c1\u66f4\u65b0\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <insert id=\"insertTest\">\n    insert into test_table (value) values (#{value})\n  </insert>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                for (int i=0; i<3; i++) {\n                    TestTable t = new TestTable(\"value-\" + i);\n                    int updateCount = session.insert(\"sample.mybatis.insertTest\", t);\n                    System.out.println(\"updateCount = \" + updateCount);\n                }\n\n                session.commit();\n            }\n        }\n    }\n}\n\n\n\n3\u56de\u30eb\u30fc\u30d7\u3057\u3066\u3001 INSERT \u3092\u5b9f\u884c\u3059\u308b\u5b9f\u88c5\u3002\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-0(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-1(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-2(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n\n\n\n\u6bce\u56de PreparedStatement \u304c\u751f\u6210\u3055\u308c\u3066\u3001 SQL \u304c\u767a\u884c\u3055\u308c\u3066\u3044\u308b\u3002\n\n\nPreparedStatement \u3092\u518d\u5229\u7528\u3059\u308b\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"defaultExecutorType\" value=\"REUSE\"/>\n  </settings>\n\n  ...\n</configuration>\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-0(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==> Parameters: value-1(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==> Parameters: value-2(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067 defaultExecutorType \u306b REUSE \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\nPreparedStatement \u306e\u751f\u6210\u306f\uff11\u56de\u3060\u3051\u306b\u306a\u308b\u3002\nSQL \u306e\u767a\u884c\u306f\u6bce\u56de\u884c\u308f\u308c\u3066\u3044\u308b\u3002\n\n\n\u30d0\u30c3\u30c1\u66f4\u65b0\u306b\u3059\u308b\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"defaultExecutorType\" value=\"BATCH\"/>\n  </settings>\n\n  ...\n</configuration>\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-0(String)\nupdateCount = -2147482646\n[DEBUG] s.m.insertTest  - ==> Parameters: value-1(String)\nupdateCount = -2147482646\n[DEBUG] s.m.insertTest  - ==> Parameters: value-2(String)\nupdateCount = -2147482646\n\n\n\n\ndefaultExecutorType \u3092 BATCH \u306b\u3059\u308b\u3068\u30d0\u30c3\u30c1\u66f4\u65b0\u306b\u306a\u308b\u3002\nSQL \u306e\u767a\u884c\u306f\u6700\u5f8c\u306b\u307e\u3068\u3081\u3066\u884c\u308f\u308c\u308b\u3002\n\u306a\u306e\u3067\u3001\u66f4\u65b0\u4ef6\u6570\u306f\u53d6\u5f97\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u3002\n\n\nSqlSession \u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306b\u6307\u5b9a\u3059\u308b\n\u30d0\u30c3\u30c1\u66f4\u65b0\u306b\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8a2d\u5b9a\u306f\u3001 SqlSession \u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306e\u5f15\u6570\u3067\u3082\u6307\u5b9a\u3067\u304d\u308b\u3002\nimport org.apache.ibatis.session.ExecutorType;\n\n...\n\nSqlSession session = factory.openSession(ExecutorType.BATCH);\n\n\n\nopenSession() \u306e\u5f15\u6570\u306b ExecutorType \u3092\u6e21\u3059\u3053\u3068\u3067\u6307\u5b9a\u3067\u304d\u308b\u3002\n\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3088\u308a\u3082\u512a\u5148\u3055\u308c\u308b\u3002\n\n\nMapper\n\u3053\u3053\u307e\u3067\u306f\u3001 SqlSession \u306b\u76f4\u63a5\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \u3068\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u65b9\u6cd5\u3067 SQL \u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u3002\nMyBatis \u306b\u306f\u3001\u3053\u308c\u3068\u306f\u5225\u306b Mapper \u3068\u3044\u3046\u4ed5\u7d44\u307f\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nMapper \u3092\u4f7f\u3046\u3068\u3001 SqlSession \u3092\u76f4\u63a5\u4f7f\u3046\u3088\u308a\u578b\u5b89\u5168\u306b\u306a\u308b\u3002\n\u57fa\u672c\u7684\u306b\u3053\u306e Mapper \u3092\u4f7f\u7528\u3057\u305f\u65b9\u6cd5\u306e\u65b9\u304c\u63a8\u5968\u3063\u307d\u3044\u3002\n\uff08\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u81ea\u7136\u3068 Mapper \u5358\u4f4d\u306b\u306a\u308b\u306e\u3067\u3001\u7ba1\u7406\u3082\u3057\u3084\u3059\u304f\u306a\u308b\u3063\u307d\u3044\uff09\n\n\u57fa\u672c\ntest_table\n\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String string;\n    private int number;\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", string=\" + string + \", number=\" + number + \"]\";\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.TestTableMapper\"> <!-- \u2605Mapper \u306e FQCN \u3092 namespace \u306b\u3059\u308b -->\n\n  <select id=\"selectAll\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n  </select>\n</mapper>\n\n\n\nTestTableMapper.java\npackage sample.mybatis;\n\nimport java.util.List;\n\n// \u2605 Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\npublic interface TestTableMapper {\n\n    // \u2605\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID \u3068\u540c\u3058\u540d\u524d\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\n    List<TestTable> selectAll();\n}\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                // \u2605Mapper \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\n                TestTableMapper mapper = session.getMapper(TestTableMapper.class);\n\n                mapper.selectAll().forEach(System.out::println);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.T.selectAll - ==>  Preparing: select * from test_table \n[DEBUG] s.m.T.selectAll - ==> Parameters: \n[DEBUG] s.m.T.selectAll - <==      Total: 3\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=2, string=fuga, number=200]\nTestTable [id=3, string=piyo, number=300]\n\n\n\nMapper \u3092\u5229\u7528\u3059\u308b\u5834\u5408\u3001\u5c02\u7528\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\uff08TestTableMapper\uff09\u3002\n\n\n\u3053\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3068\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5404\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u304c\u5bfe\u5fdc\u3059\u308b\u3088\u3046\u306b\u305d\u308c\u305e\u308c\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e\u65b9\u306f\u3001 namespace \u3092\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e FQCN \u306b\u3059\u308b\uff08sample.mybatis.TestTableMapper\uff09\u3002\n\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID \u3068\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u540d\u3092\u4e00\u81f4\u3055\u305b\u308b\uff08selectAll\uff09\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u3001\u30e1\u30bd\u30c3\u30c9\u306b\u5f15\u6570\u3092\u6e21\u3059\u3088\u3046\u306b\u5b9a\u7fa9\u3059\u308b\u3002\n\n\nMapper \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001 SqlSession \u306e getMapper() \u30e1\u30bd\u30c3\u30c9\u3067\u53d6\u5f97\u3059\u308b\u3002\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8907\u6570\u306e\u5f15\u6570\u306b\u5206\u3051\u3066\u6e21\u3059\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.TestTableMapper\">\n\n  <select id=\"selectByStringOrNumber\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n     where string = #{string}\n        or number = #{number}\n  </select>\n</mapper>\n\n\n\nTestTableMapper.java\npackage sample.mybatis;\n\nimport java.util.List;\n\nimport org.apache.ibatis.annotations.Param;\n\npublic interface TestTableMapper {\n\n    List<TestTable> selectByStringOrNumber(\n        @Param(\"string\") String string,\n        @Param(\"number\") int number\n    );\n}\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                TestTableMapper mapper = session.getMapper(TestTableMapper.class);\n\n                mapper.selectByStringOrNumber(\"hoge\", 300).forEach(System.out::println);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.T.selectByStringOrNumber - ==>  Preparing: select * from test_table where string = ? or number = ? \n[DEBUG] s.m.T.selectByStringOrNumber - ==> Parameters: hoge(String), 300(Integer)\n[DEBUG] s.m.T.selectByStringOrNumber - <==      Total: 2\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=3, string=piyo, number=300]\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8907\u6570\u5b58\u5728\u3059\u308b\u30b1\u30fc\u30b9\u3067\u3001\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3092\u305d\u308c\u305e\u308c\u5206\u3051\u3066\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f @Param \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5f15\u6570\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n@Param \u306e value \u306b\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u52d5\u7684 SQL\n\u6761\u4ef6\u306b\u5408\u308f\u305b\u3066 SQL \u3092\u52d5\u7684\u306b\u7d44\u307f\u7acb\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\nif\ntest_table\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n     where string_value = 'hoge'\n     <if test=\"numberValue != null\"> <!-- \u2605if \u30bf\u30b0\u3067\u6761\u4ef6\u5206\u5c90 -->\n       and number_value = #{numberValue}\n     </if>\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                session\n                    .selectList(\"sample.mybatis.selectTest\") // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u672a\u8a2d\u5b9a\n                    .forEach(System.out::println);\n\n                Map<String, Object> param = new HashMap<>();\n                param.put(\"numberValue\", 100);\n\n                session\n                    .selectList(\"sample.mybatis.selectTest\", param) // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\n                    .forEach(System.out::println);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where string_value = 'hoge' \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 2\nTestTable [id=1, stringValue=hoge, numberValue=100]\nTestTable [id=2, stringValue=hoge, numberValue=200]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where string_value = 'hoge' and number_value = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: 100(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=1, stringValue=hoge, numberValue=100]\n\n\n\n\n<if> \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u305f\u3068\u304d\u3060\u3051 SQL \u3092\u8ffd\u52a0\u3055\u305b\u305f\u308a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\ntest \u5c5e\u6027\u3067\u6761\u4ef6\u5f0f\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n\n\u3053\u306e\u4e2d\u3067\u306f\u3001\u691c\u7d22\u6761\u4ef6\u3067\u6e21\u3059\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u3092\u53c2\u7167\u3067\u304d\u308b\u3002\nAND \u3084 OR \u6761\u4ef6\u3092\u8a18\u8ff0\u3059\u308b\u3068\u304d\u306f\u3001 and, or \u3092\u4f7f\u7528\u3059\u308b\uff08&&, || \u3067\u306f\u306a\u3044\uff01\uff09\u3002\n\n\n\n\nchoose\ntest_table\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n    <choose>\n      <when test=\"value == null\">\n        where value is null\n      </when>\n      <otherwise>\n        where value = #{value}\n      </otherwise>\n    </choose>\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                TestTable testTable = session.selectOne(\"sample.mybatis.selectTest\");\n                System.out.println(testTable);\n\n                Map<String, Object> param = new HashMap<>();\n                param.put(\"value\", \"hoge\");\n\n                testTable = session.selectOne(\"sample.mybatis.selectTest\", param);\n                System.out.println(testTable);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where value is null \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=2, value=null]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where value = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: hoge(String)\n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=1, value=hoge]\n\n\n\n\n<choose> \u30bf\u30b0\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u8907\u6570\u306e\u9078\u629e\u80a2\u306e\u3046\u3061\uff11\u3064\u3060\u3051\u3092\u9069\u7528\u3059\u308b\u3068\u3044\u3046\u6761\u4ef6\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n<when> \u30bf\u30b0\u3067\u3001\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u305f\u5834\u5408\u306e SQL \u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n<otherwise> \u30bf\u30b0\u3067\u3001\u305d\u308c\u4ee5\u5916\u306e\u6761\u4ef6\u304c\u5168\u3066\u6e80\u305f\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u306e SQL \u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n\nwhere\ntest_table\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n    <where>\n      <if test=\"string != null\">\n        and string = #{string}\n      </if>\n      <if test=\"number != null\">\n        and number = #{number}\n      </if>\n    </where>\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u7a7a\u3067\u5b9f\u884c\n                Map<String, Object> param = new HashMap<>();\n                selectAndPrint(session, param);\n\n                // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u306b string \u3060\u3051\u6307\u5b9a\u3057\u3066\u5b9f\u884c\n                param = new HashMap<>();\n                param.put(\"string\", \"hoge\");\n                selectAndPrint(session, param);\n\n                // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u306b string \u3068 number \u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\n                param = new HashMap<>();\n                param.put(\"string\", \"hoge\");\n                param.put(\"number\", 200);\n                selectAndPrint(session, param);\n            }\n        }\n    }\n\n    private static void selectAndPrint(SqlSession session, Map<String, Object> param) {\n        session\n            .selectList(\"sample.mybatis.selectTest\", param)\n            .forEach(System.out::println);\n        System.out.println();\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 4\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=2, string=hoge, number=200]\nTestTable [id=3, string=fuga, number=200]\nTestTable [id=4, string=piyo, number=300]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table WHERE string = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: hoge(String)\n[DEBUG] s.m.selectTest  - <==      Total: 2\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=2, string=hoge, number=200]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table WHERE string = ? and number = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: hoge(String), 200(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=2, string=hoge, number=200]\n\n\n\n\n<where> \u30bf\u30b0\u3092\u4f7f\u3046\u3068\u3001\u5b50\u8981\u7d20\u304c\u4f55\u3089\u304b\u306e\u6587\u5b57\u5217\u304c\u5b58\u5728\u3057\u305f\u5834\u5408\u306b\u9650\u308a WHERE \u53e5\u3092\u5148\u982d\u306b\u8ffd\u52a0\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u307e\u305f\u3001 <where> \u30bf\u30b0\u5185\u306e\u6587\u5b57\u5217\u304c AND \u304b OR \u3067\u59cb\u307e\u308b\u5834\u5408\u3001\u81ea\u52d5\u3067\u305d\u306e\u8a18\u8ff0\u304c\u9664\u53bb\u3055\u308c\u308b\u3002\n\u3053\u306e\u52d5\u304d\u3092 <if> \u306a\u3069\u3060\u3051\u3067\u5b9f\u73fe\u4f7f\u7528\u3068\u3059\u308b\u3068\u3001\u7d50\u69cb\u8907\u96d1\u306a\u8a18\u8ff0\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\n\ntrim \u30bf\u30b0\u3067\u7f6e\u304d\u63db\u3048\u308b\n\u4e0a\u8a18\u306e <where> \u3092\u4f7f\u3063\u305f\u5b9a\u7fa9\u306f\u3001 <trim> \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n    <trim prefix=\"where\" prefixOverrides=\"AND|OR\">\n      <if test=\"string != null\">\n        and string = #{string}\n      </if>\n      <if test=\"number != null\">\n        and number = #{number}\n      </if>\n    </trim>\n  </select>\n</mapper>\n\n\n\n\nprefix \u5c5e\u6027\u306b\u3001\u5148\u982d\u306b\u8ffd\u52a0\u3059\u308b\u6587\u5b57\u5217\u3002\n\nprefixOverrides \u5c5e\u6027\u306b\u3001\u5148\u982d\u304b\u3089\u9664\u53bb\u3059\u308b\u6587\u5b57\u5217\u3092\u30d1\u30a4\u30d7(|)\u533a\u5207\u308a\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n\nset\ntest_table\n\n\nTestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String string;\n    private Integer number;\n\n    public TestTable id(int id) {\n        this.id = id;\n        return this;\n    }\n\n    public TestTable string(String string) {\n        this.string = string;\n        return this;\n    }\n\n    public TestTable number(int number) {\n        this.number = number;\n        return this;\n    }\n}\n\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <update id=\"updateTest\">\n    update test_table\n    <set>\n      <if test=\"string != null\">\n        string = #{string},\n      </if>\n      <if test=\"number != null\">\n        number = #{number},\n      </if>\n    </set>\n    where id = #{id}\n  </update>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                session.update(\"sample.mybatis.updateTest\",\n                        new TestTable().id(1).number(555));\n\n                session.update(\"sample.mybatis.updateTest\",\n                        new TestTable().id(3).string(\"update\").number(999));\n\n                session.commit();\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.updateTest  - ==>  Preparing: update test_table SET number = ? where id = ? \n[DEBUG] s.m.updateTest  - ==> Parameters: 555(Integer), 1(Integer)\n[DEBUG] s.m.updateTest  - <==    Updates: 1\n[DEBUG] s.m.updateTest  - ==>  Preparing: update test_table SET string = ?, number = ? where id = ? \n[DEBUG] s.m.updateTest  - ==> Parameters: update(String), 999(Integer), 3(Integer)\n[DEBUG] s.m.updateTest  - <==    Updates: 1\n\n\ntest_table\n\n\n\n<set> \u30bf\u30b0\u3092\u4f7f\u3046\u3068\u3001\u5185\u90e8\u306e\u6587\u5b57\u5217\u304c\u7a7a\u3067\u306a\u3044\u5834\u5408\u306b\u3001\u5148\u982d\u306b SET \u53e5\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\u307e\u305f\u3001\u672b\u5c3e\u306e\u30ab\u30f3\u30de\uff08,\uff09\u304c\u81ea\u52d5\u3067\u9664\u53bb\u3055\u308c\u308b\u3002\n\n\ntrim \u30bf\u30b0\u3067\u7f6e\u304d\u63db\u3048\u308b\n<where> \u306e\u3068\u304d\u3068\u540c\u3058\u3088\u3046\u306b\u3001 <trim> \u3067\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <update id=\"updateTest\">\n    update test_table\n    <trim prefix=\"set\" suffixOverrides=\",\">\n      <if test=\"string != null\">\n        string = #{string},\n      </if>\n      <if test=\"number != null\">\n        number = #{number},\n      </if>\n    </trim>\n    where id = #{id}\n  </update>\n</mapper>\n\n\n\n\nsuffixOverrides \u5c5e\u6027\u3067\u3001\u672b\u5c3e\u306e\u524a\u9664\u3059\u308b\u6587\u5b57\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\nforeach\ntest_table\n\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n     where id in\n     <foreach collection=\"list\" item=\"item\"\n              open=\"(\" separator=\",\" close=\")\">\n       #{item}\n     </foreach>\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Arrays;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                session\n                    .selectList(\"sample.mybatis.selectTest\", Arrays.asList(1, 3, 5))\n                    .forEach(System.out::println);\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id in ( ? , ? , ? ) \n[DEBUG] s.m.selectTest  - ==> Parameters: 1(Integer), 3(Integer), 5(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 3\nTestTable [id=1]\nTestTable [id=3]\nTestTable [id=5]\n\n\n\n\n<foreach> \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u53cd\u5fa9\u51e6\u7406\u3057\u306a\u304c\u3089 SQL \u3092\u69cb\u7bc9\u3067\u304d\u308b\u3002\n\ncollection \u5c5e\u6027\u306b\u3001\u53cd\u5fa9\u51e6\u7406\u3059\u308b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\nlist \u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u53cd\u5fa9\u51e6\u7406\u53ef\u80fd\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3057\u305f\u3068\u304d\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5229\u7528\u3067\u304d\u308b\u53c2\u7167\u540d\uff08\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d \u3092\u53c2\u7167\uff09\u3002\n\n\n\nitem \u5c5e\u6027\u3067\u3001\u53cd\u5fa9\u4e2d\u306e\u5404\u8981\u7d20\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u5909\u6570\u540d\u3092\u5ba3\u8a00\u3059\u308b\u3002\n\nopen \u5c5e\u6027\u306f\u3001\u53cd\u5fa9\u306e\u5148\u982d\u306b\u8ffd\u52a0\u3059\u308b\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nseparator \u5c5e\u6027\u306f\u3001\u5404\u53cd\u5fa9\u7d50\u679c\u306e\u9593\u306b\u633f\u5165\u3059\u308b\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nclose \u5c5e\u6027\u306f\u3001\u53cd\u5fa9\u306e\u6700\u5f8c\u306b\u8ffd\u52a0\u3059\u308b\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nindex \u5c5e\u6027\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u3001\u53cd\u5fa9\u4e2d\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5024\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u5909\u6570\u540d\u3092\u5ba3\u8a00\u3067\u304d\u308b\u3002\n\u304a\u3082\u306b IN \u53e5\u306e\u52d5\u7684\u751f\u6210\u306b\u5229\u7528\u3059\u308b\u3002\n\n\nbind\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    <bind name=\"parameter\" value=\"'@@@' + _parameter + '@@@'\"/>\n    select *\n      from test_table\n     where value = #{parameter}\n  </select>\n</mapper>\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                session.selectList(\"sample.mybatis.selectTest\", \"abc\");\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where value = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: @@@abc@@@(String)\n\n\n\n\n<bind> \u30bf\u30b0\u3067\u3001\u4e00\u6642\u5909\u6570\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\nname \u5c5e\u6027\u3067\u3001\u4e00\u6642\u5909\u6570\u306e\u540d\u524d\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\nvalue \u5c5e\u6027\u3067\u3001 OGNL \u5f0f\u3092\u4f7f\u3063\u305f\u5024\u306e\u5b9a\u7fa9\u304c\u3067\u304d\u308b\u3002\n\n_parameter \u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6e21\u3057\u305f\u5024\u3092\u53c2\u7167\u3067\u304d\u308b\u6697\u9ed9\u5909\u6570\uff08\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d \u3092\u53c2\u7167\uff09\u3002\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3067 SQL \u3092\u52d5\u7684\u751f\u6210\u3059\u308b\nMyBatis \u306b\u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066 SQL \u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u3057\u304b\u3057\u3001\u6587\u5b57\u5217\u9023\u7d50\u3067 SQL \u3092\u7d44\u307f\u7acb\u3066\u3066\u3044\u308b\u3068\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3068\u304b AND, OR \u533a\u5207\u308a\u306a\u3069\u3001\u6ce8\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u7d30\u304b\u3044\u554f\u984c\u304c\u3044\u308d\u3044\u308d\u3042\u308b\u3002\n\u305d\u306e\u3078\u3093\u306e\u9762\u5012\u306a\u90e8\u5206\u3092\u96a0\u853d\u3057\u305f API \u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\nsample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.TestTableMapper\"> <!-- \u2605Mapper \u3092 namespace \u306b\u6307\u5b9a -->\n</mapper>\n\n\n\nTestTableMapper.java\npackage sample.mybatis;\n\nimport java.util.List;\n\nimport org.apache.ibatis.annotations.SelectProvider;\n\n// \u2605Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u3064\u304f\u308b\npublic interface TestTableMapper {\n    // \u2605@SelectProvider \u3067 SQL \u3092\u751f\u6210\u3059\u308b\u30af\u30e9\u30b9\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\n    @SelectProvider(type=TestTableSqlProvider.class, method=\"getSelectTestSql\")\n    List<TestTable> selectTest();\n}\n\n\n\nTestTableSqlProvider.java\npackage sample.mybatis;\n\nimport org.apache.ibatis.jdbc.SQL;\n\n// \u2605SQL \u3092\u751f\u6210\u3059\u308b\u30af\u30e9\u30b9\u3002\npublic class TestTableSqlProvider {\n\n    // \u2605SQL \u3092\u751f\u6210\u3059\u308b\u30e1\u30bd\u30c3\u30c9\n    public String getSelectTestSql() {\n        // \u2605SQL \u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u3001 SQL \u3092\u751f\u6210\u3059\u308b\n        SQL sql = new SQL() {{ // \u2605\u533f\u540d\u30af\u30e9\u30b9\u3067\u751f\u6210\n            SELECT(\"id, hoge_value\");\n            SELECT(\"fuga_value\");\n            SELECT(\"piyo_value\");\n            FROM(\"test_table\");\n        }};\n\n        return sql.toString();\n    }\n}\n\n\n\nMain.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n\n            try (SqlSession session = factory.openSession()) {\n                TestTableMapper mapper = session.getMapper(TestTableMapper.class);\n                mapper.selectTest();\n            }\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.T.selectTest - ==>  Preparing: SELECT id, hoge_value, fuga_value, piyo_value FROM test_table WHERE (hoge_value is not null) \n[DEBUG] s.m.T.selectTest - ==> Parameters: \n\n\n\nMapper \u306e\u30e1\u30bd\u30c3\u30c9\u3092 @SelectProvider \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n\n\ntype \u306b SQL \u3092\u751f\u6210\u3059\u308b\u30af\u30e9\u30b9\u3092\u3001 method \u306b SQL \u3092\u751f\u6210\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nINSERT \u3084 UPDATE \u306b\u306f @InsertProvider \u3084 @UpdateProvider \u304c\u3042\u308b\u3002\n\n\nSQL \u306e\u751f\u6210\u306b\u306f\u3001 org.apache.ibatis.jdbc.SQL \u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\nSQL \u30af\u30e9\u30b9\u3092\u533f\u540d\u30af\u30e9\u30b9\u3068\u3057\u3066 new \u3057\u3066\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u521d\u671f\u5316\u30d6\u30ed\u30c3\u30af\u5185\u3067 SELECT() \u3084 FROM() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066 SQL \u3092\u69cb\u7bc9\u3059\u308b\u3002\n\n\n\u5404\u5f15\u6570\u306b\u306f\u6587\u5b57\u5217\u3067 SQL \u306e\u90e8\u54c1\u3092\u6e21\u3059\u3002\n\u3053\u306e\u969b\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u306a\u3069\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8ffd\u52a0\u3055\u308c\u305f\u308a\u3059\u308b\u3002\n\n\n\u751f\u6210\u3057\u305f SQL \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e toString() \u30e1\u30bd\u30c3\u30c9\u3067\u69cb\u7bc9\u3057\u305f SQL \u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\n\u5404\u30e1\u30bd\u30c3\u30c9\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\n\nSELECT\nnew SQL() {{\n    SELECT(\"foo\");\n    SELECT(\"bar\");\n    SELECT(\"fizz, buzz\");\n    FROM(\"foo_table\");\n}};\n\nSELECT foo, bar, fizz, buzz FROM foo_table \n\n\n\u9023\u7d9a\u3057\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u9805\u76ee\u304c\u30ab\u30f3\u30de\u3067\u52dd\u624b\u306b\u533a\u5207\u3089\u308c\u308b\u3002\n\u660e\u793a\u7684\u306b\u30ab\u30f3\u30de\u533a\u5207\u308a\u306e\u6587\u5b57\u5217\u3092\u6e21\u3057\u3066\u3082OK\u3002\n\u672b\u5c3e\u306b\u4e0d\u8981\u306a\u30ab\u30f3\u30de\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u9664\u53bb\u3057\u3066\u304f\u308c\u306a\u3044\u3002\n\n\nFROM\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    FROM(\"bar_table\");\n}};\n\nSELECT * FROM foo_table, bar_table \n\n\n\nFROM \u3092\u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067 FROM \u53e5\u304c\u5217\u6319\u3055\u308c\u308b\u3002\n\n\nWHERE\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    WHERE(\"foo = ?\");\n    WHERE(\"bar = ?\");\n    AND();\n    WHERE(\"fizz = ?\");\n    WHERE(\"buzz = ?\");\n    OR();\n    WHERE(\"hoge = ?\");\n    WHERE(\"fuga = ?\");\n}};\n\nSELECT *\n  FROM foo_table\n WHERE (\n       foo = ?\n       AND bar = ?\n ) AND (\n       fizz = ?\n       AND buzz = ?\n )  OR (\n       hoge = ?\n       AND fuga = ?\n ) \n\n\n\nWHERE() \u30e1\u30bd\u30c3\u30c9\u3067 WHERE \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\u9023\u7d9a\u3055\u305b\u308b\u3068 AND \u6761\u4ef6\u3067\u9023\u7d50\u3055\u308c\u308b\u3002\n\nAND() \u304a\u3088\u3073 OR() \u30e1\u30bd\u30c3\u30c9\u3067 AND, OR \u3067\u9023\u7d50\u3067\u304d\u308b\u3002\n\n\nINNER_JOIN\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    INNER_JOIN(\"bar_table on bar_table.id = foo_table.bar_id\");\n    INNER_JOIN(\"fizz_table on fizz_table.id = bar_table.fizz_id\");\n}};\n\n    SELECT *\n      FROM foo_table\nINNER JOIN bar_table\n        on bar_table.id = foo_table.bar_id\nINNER JOIN fizz_table\n        on fizz_table.id = bar_table.fizz_id \n\n\n\nINNER_JOIN() \u30e1\u30bd\u30c3\u30c9\u3067\u3001 INNER JOIN \u53e5\u3092\u8ffd\u52a0\u3067\u304d\u308b\u3002\n\u7d50\u5408\u6761\u4ef6\u306f\u9811\u5f35\u3063\u3066\u6587\u5b57\u5217\u3067\u7d44\u307f\u7acb\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3063\u307d\u3044\u3002\n\n\nORDER_BY\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    ORDER_BY(\"foo\");\n    ORDER_BY(\"bar desc\");\n}};\n\nSELECT * FROM foo_table ORDER BY foo, bar desc \n\n\n\nORDER_BY() \u30e1\u30bd\u30c3\u30c9\u3067 ORDER BY \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n\nGROUP_BY\nnew SQL() {{\n    SELECT(\"foo, bar\");\n    FROM(\"foo_table\");\n    GROUP_BY(\"foo\");\n    GROUP_BY(\"bar\");\n}};\n\nSELECT foo, bar FROM foo_table GROUP BY foo, bar \n\n\n\nGROUP_BY() \u30e1\u30bd\u30c3\u30c9\u3067\u3001 GROUP BY \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n\nHAVING\nnew SQL() {{\n    SELECT(\"foo, count(*)\");\n    FROM(\"foo_table\");\n    GROUP_BY(\"foo\");\n    HAVING(\"0 < count(*)\");\n    HAVING(\"count(*) < 100\");\n}};\n\n  SELECT foo\n        ,count(*)\n    FROM foo_table\nGROUP BY foo\n  HAVING (\n         0 < count(foo)\n         AND count(foo) < 100\n  )\n\n\n\nHAVING() \u30e1\u30bd\u30c3\u30c9\u3067 HAVING \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\nWHERE() \u3068\u540c\u3058\u3088\u3046\u306a\u52d5\u4f5c\u3092\u3059\u308b\uff08\u9023\u7d9a\u3055\u305b\u308b\u3068 AND \u3067\u9023\u7d50\u3055\u308c\u308b\uff09\u3002\n\n\nINSERT_INTO, VALUES\nnew SQL() {{\n    INSERT_INTO(\"foo_table\");\n    VALUES(\"foo_value\", \"#{foo_value}\");\n    VALUES(\"fizz_value, buzz_value\", \"#{fizz_value}, #{buzz_value}\");\n}};\n\nINSERT INTO foo_table (foo_value, fizz_value, buzz_value) VALUES (?, ?, ?) \n\n\n\nINSERT_INTO() \u30e1\u30bd\u30c3\u30c9\u3067 INSERT \u6587\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\nVALUES() \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u767b\u9332\u3059\u308b\u9805\u76ee\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\n\u7b2c\u4e00\u5f15\u6570\u306b\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u9805\u76ee\u306e\u540d\u524d\u3092\u3001\n\u7b2c\u4e8c\u5f15\u6570\u306b VALUES \u53e5\u3067\u6307\u5b9a\u3059\u308b\u5024\u3092\u6e21\u3059\u3002\n\u8907\u6570\u8a18\u8ff0\u3059\u308b\u3068\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n\n\n\nUPDATE, SET\nnew SQL() {{\n    UPDATE(\"foo_table\");\n    SET(\"foo_value = #{foo_value}\");\n    SET(\"bar_value = #{bar_value}\");\n    WHERE(\"id = #{id}\");\n}};\n\nUPDATE foo_table SET foo_value = ?, bar_value = ? WHERE (id = ?)\n\n\n\nUPDATE() \u30e1\u30bd\u30c3\u30c9\u3067\u3001 UPDATE \u6587\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\nSET() \u30e1\u30bd\u30c3\u30c9\u3067\u3001 SET \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\n\n\u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n\n\n\nDELETE_FROM\nnew SQL() {{\n    DELETE_FROM(\"foo_table\");\n    WHERE(\"id = #{id}\");\n}};\n\nDELETE FROM foo_table WHERE (id = ?) \n\n\n\nDELETE_FROM() \u30e1\u30bd\u30c3\u30c9\u3067 DELETE \u6587\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\n\nSpring Boot \u3068\u9023\u643a\u3059\u308b\nSpring Boot \u7528\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3048\u3070\u7c21\u5358\u306b\u9023\u643a\u3067\u304d\u308b\u3002\ntest_table\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-build.gradle\n`-src/main/\n  |-java/\n  |  `-sample/mybatis/springboot/\n  |    |-Main.java\n  |    `-TestTableMapper.java\n  `-resources/\n     |-application.properties\n     |-mybatis-config.xml\n     `-TestTableMapper.xml\n\n\n\nbuild.gradle\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.3.1.RELEASE'\n    }\n}\n\napply plugin: 'java'\napply plugin: 'spring-boot'\n\nsourceCompatibility = '1.8'\ntargetCompatibility = '1.8'\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter'\n    // \u2605MyBatis \u306e SpringBoot \u7528\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8aad\u307f\u8fbc\u3080\n    compile 'org.mybatis.spring.boot:mybatis-spring-boot-starter:1.0.0'\n    compile 'mysql:mysql-connector-java:5.1.38'\n}\n\n\n\napplication.properties\n# \u2605MyBatis \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\nmybatis.config=mybatis-config.xml\n\n# \u2605\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\nspring.datasource.url=jdbc:mysql://localhost/test\nspring.datasource.username=test\nspring.datasource.password=test\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n\n\n\nmybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <!-- \u2605\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u7ba1\u7406\u306f Spring Boot \u306b\u4efb\u305b\u308b\u306e\u3067\u3001\u3053\u3061\u3089\u306b\u306f\u8a18\u8ff0\u3057\u306a\u3044 -->\n  <mappers>\n    <mapper resource=\"TestTableMapper.xml\"/>\n  </mappers>\n</configuration>\n\n\n\nTestTableMapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.springboot.TestTableMapper\">\n\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table\n  </select>\n</mapper>\n\n\n\nTestTableMapper.java\npackage sample.mybatis.springboot;\n\nimport java.util.List;\nimport java.util.Map;\n\npublic interface TestTableMapper {\n\n    List<Map<String, Object>> selectTest();\n}\n\n\n\nMain.java\npackage sample.mybatis.springboot;\n\nimport java.io.IOException;\n\nimport org.mybatis.spring.SqlSessionTemplate;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) throws IOException {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n\n    @Autowired\n    private SqlSessionTemplate sqlSession;\n    @Autowired\n    private TestTableMapper mapper;\n\n    public void method() throws IOException {\n        System.out.println(\"[SqlSessionTemplate]\");\n        this.sqlSession\n            .selectList(\"sample.mybatis.springboot.TestTableMapper.selectTest\")\n            .forEach(System.out::println);\n\n        System.out.println(\"[TestTableMapper]\");\n        this.mapper\n            .selectTest()\n            .forEach(System.out::println);\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n[SqlSessionTemplate]\n{id=1, value=hoge}\n{id=2, value=fuga}\n{id=3, value=piyo}\n\n[TestTableMapper]\n{id=1, value=hoge}\n{id=2, value=fuga}\n{id=3, value=piyo}\n\n\n\nSpring Boot \u3067 MyBatis \u3092\u4f7f\u3046\u5834\u5408\u306f\u3001 mybatis-spring-boot-starter \u3092\u4f9d\u5b58\u95a2\u4fc2\u306b\u8ffd\u52a0\u3059\u308b\u3002\n\u6b21\u306b Spring Boot \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\uff08application.properties\uff09\u306b\u3066\u3001 mybatis.config \u3068\u3044\u3046\u540d\u524d\u3067 MyBatis \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306f Spring Boot \u306b\u7ba1\u7406\u3057\u3066\u3082\u3089\u3046\u306e\u3067\u3001 Spring Boot \u306e\u65b9\u306b\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u3066\u3001 MyBatis \u306e\u65b9\u306b\u306f\u8a18\u8ff0\u3057\u306a\u3044\u3002\n\nSqlSession \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001 SqlSessionTemplate \u3092 @Autowired \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308c\u3070\u3044\u3044\u3002\n\n\n\nSqlSessionTemplate \u306e API \u306f SqlSession \u3068\u540c\u3058\u3002\n\nSqlSession \u3068\u9055\u3044\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u3067\u3001\u7570\u306a\u308b\u30b9\u30ec\u30c3\u30c9\u3084 DAO \u304b\u3089\u4f7f\u3063\u3066\u3082\u554f\u984c\u306a\u3044\u3002\n\n\nMapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u3051\u3070\u3001 @Autowired \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\n\nSpring \u306b\u30b9\u30ad\u30e3\u30f3\u3055\u308c\u308b\u5834\u6240\u306b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5165\u308c\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nMain \u30af\u30e9\u30b9\u3092 @MapperScan \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308c\u3070\u3001\u4efb\u610f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u30b9\u30ad\u30e3\u30f3\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\uff08\u4f8b\uff1a@MapperScan(\"foo.bar\")\uff09\u3002\n\u3053\u3061\u3089\u3082\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u305f\u3081\u3001\u7570\u306a\u308b\u30b9\u30ec\u30c3\u30c9\u3084 DAO \u304b\u3089\u5229\u7528\u3057\u3066\u3082\u554f\u984c\u306a\u3044\u3002\n\n\n\n\n\u53c2\u8003\n\nMyBatis \u2013 MyBatis 3 | \u30a4\u30f3\u30c8\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\nmybatis-spring \u2013 MyBatis-Spring | \u30a4\u30f3\u30c8\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\nMyBatis\u3067\u30c0\u30a4\u30ca\u30df\u30c3\u30afSQL\uff08\u52d5\u7684SQL\uff09\u3092\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3084\u308b\uff5cPimp my Code. @wataru420\niBATIS - Wikipedia\nMyBatis - Wikipedia\n\n# MyBatis \u3068\u306f\nSQL \u3068 Java \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7d10\u4ed8\u3051\u308b\u6c38\u7d9a\u5316\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\n\u4ee5\u524d\u306f iBATIS \u3068\u3044\u3046\u540d\u524d\u3067 Apache \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\uff11\u3064\u3068\u3057\u3066\u958b\u767a\u3055\u308c\u3066\u3044\u305f\u3002\n\u3057\u304b\u3057\u3001 2010\u5e746\u6708\u306b Apache \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u8ca1\u56e3\u3067\u306e\u958b\u767a\u304c\u4e2d\u6b62\u3055\u308c\u3001\u73fe\u5728\u306f MyBatis \u3068\u3044\u3046\u540d\u524d\u3067\u958b\u767a\u3055\u308c\u3066\u3044\u308b\u3002\n\nSQL \u6587\u3092\u5b8c\u5168\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u305f\u3044\u5834\u5408\u306b\u4f7f\u3044\u3084\u3059\u3044\u3089\u3057\u3044\u3002\n\n# \u74b0\u5883\n## OS\nWindows 7 64bit\n\n## Java\n1.8.0_65\n\n## \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\nMySQL 5.5.28\n\n# Hello World\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```groovy:build.gradle\n    compile 'org.mybatis:mybatis:3.3.0'\n    compile 'mysql:mysql-connector-java:5.1.38'\n```\n\n## \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u6e96\u5099\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/cb00c03b-e57d-7ad2-6d9e-0b0b6da74cef.jpeg)\n\n## \u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n```text:\n|-src/main/\n|  |-java/\n|  |  `-sample/mybatis/\n|  |     `-Main.java\n|  `-resources/\n|     |-mybatis-config.xml\n|     `-sample_mapper.xml\n`-build.gradle\n```\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <environments default=\"sample_id\">\n    <environment id=\"sample_id\">\n      <transactionManager type=\"JDBC\"/>\n      <dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n        <property name=\"url\" value=\"jdbc:mysql://localhost/test\"/>\n        <property name=\"username\" value=\"test\"/>\n        <property name=\"password\" value=\"test\"/>\n      </dataSource>\n    </environment>\n  </environments>\n  <mappers>\n    <mapper resource=\"sample_mapper.xml\"/>\n  </mappers>\n</configuration>\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n## \u5b9f\u88c5\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        // \u2605\u30eb\u30fc\u30c8\u3068\u306a\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            // \u2605\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5143\u306b\u3001 SqlSessionFactory \u3092\u4f5c\u6210\u3059\u308b\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            // \u2605SqlSessionFactory \u304b\u3089 SqlSession \u3092\u751f\u6210\u3059\u308b\n            try (SqlSession session = factory.openSession()) {\n                // \u2605SqlSession \u3092\u4f7f\u3063\u3066 SQL \u3092\u5b9f\u884c\u3059\u308b\n                List<Map<String, Object>> result = session.selectList(\"sample.mybatis.selectTest\");\n                \n                result.forEach(row -> {\n                    System.out.println(\"---------------\");\n                    row.forEach((columnName, value) -> {\n                        System.out.printf(\"columnName=%s, value=%s%n\", columnName, value);\n                    });\n                });\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n---------------\ncolumnName=id, value=1\ncolumnName=value, value=hoge\n---------------\ncolumnName=id, value=2\ncolumnName=value, value=fuga\n---------------\ncolumnName=id, value=3\ncolumnName=value, value=piyo\n```\n\n## \u8aac\u660e\n- \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n    - \u307e\u305a\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u306e\u63a5\u7d9a\u60c5\u5831\u306a\u3069\u3092\u5b9a\u7fa9\u3057\u305f\u30e1\u30a4\u30f3\u3068\u306a\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\uff08`mybatis-config.xml`\uff09\u3002\n    - \u6b21\u306b\u3001 SQL \u6587\u3084\u691c\u7d22\u7d50\u679c\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u306a\u3069\u3092\u5b9a\u7fa9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\uff08`sample_mapper.xml`\uff09\u3002\n- \u5b9f\u88c5\n    - \u307e\u305a\u3001 `SqlSessionFactoryBuilder` \u3092\u4f7f\u3063\u3066\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\uff08`mybatis-config.xml`\uff09\u3092\u8aad\u307f\u8fbc\u3080\u3002\n    - `SqlSessionFactory` \u3092\u4f7f\u3063\u3066\u3001 `SqlSession` \u3092\u751f\u6210\u3059\u308b\u3002\n    - `SqlSession` \u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b SQL \u5b9f\u884c\u7528\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066 SQL \u3092\u5b9f\u884c\u3059\u308b\uff08`selectList()`\uff09\u3002\n    - \u7b2c\u4e00\u5f15\u6570\u306b\u306f\u3001\u5b9f\u884c\u3059\u308b SQL \u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e ID \uff08\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID\uff09\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \u3084\u623b\u308a\u5024\u306e\u578b\u306f\u3001 `sample_mapper.xml` \u3067\u5b9a\u7fa9\u3055\u308c\u305f\u60c5\u5831\u304c\u5143\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n### \u5404\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u63a8\u5968\u30b9\u30b3\u30fc\u30d7\n|        \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9        |                             \u8aac\u660e                            |       \u63a8\u5968\u30b9\u30b3\u30fc\u30d7       |\n|----------------------------|-------------------------------------------------------------|--------------------------|\n| `SqlSessionFactoryBuilder` | `SqlSessionFactory` \u3092\u4f5c\u3063\u305f\u3089\u7528\u6e08\u307f\u3002                      | \u30e1\u30bd\u30c3\u30c9\u30b9\u30b3\u30fc\u30d7         |\n| `SqlSessionFactory`        | \u4e00\u5ea6\u4f5c\u3063\u305f\u3089\u3001\u305d\u308c\u3092\u4f7f\u3044\u56de\u3059\u3079\u304d\u3002                          | \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7 |\n| `SqlSession`               | \u975e\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u3002\u4e00\u9023\u306e SQL \u5b9f\u884c\u304c\u7d42\u308f\u3063\u305f\u3089\u30af\u30ed\u30fc\u30ba\u3059\u308b\u3002 | \u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30b3\u30fc\u30d7       |\n| `Mapper` \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u203b    | `SqlSession` \u3068\u540c\u8abf\u3059\u3079\u304d\u3060\u304c\u3001\u3088\u308a\u77ed\u3044\u30b9\u30b3\u30fc\u30d7\u304c\u826f\u3044\u3002     | \u30e1\u30bd\u30c3\u30c9\u30b9\u30b3\u30fc\u30d7         |\n\n\u203bMapper \u306b\u3064\u3044\u3066\u306f [\u3053\u3061\u3089](#mapper) \u3092\u53c2\u7167\u3002\n\n- \u30e1\u30bd\u30c3\u30c9\u30b9\u30b3\u30fc\u30d7\n    - \u30e1\u30bd\u30c3\u30c9\u5185\u3060\u3051\u3067\u4f7f\u3044\u6368\u3066\u308b\u3002\n- \u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30b3\u30fc\u30d7\n    - Web \u30a2\u30d7\u30ea\u3067\u3001\uff11\u3064\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u9593\u3060\u3051\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3044\u56de\u3059\u3002\n    - \u4ed6\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u306f\u53c2\u7167\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\n    - \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u52d5\u3044\u3066\u3044\u308b\u9593\u305a\u3063\u3068\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3044\u56de\u3059\u3002\n\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n## \u5916\u90e8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <properties resource=\"hoge.properties\">\n    <property name=\"hoge\" value=\"property tag\"/>\n    <property name=\"fuga\" value=\"property tag\"/>\n    <property name=\"piyo\" value=\"property tag\"/>\n  </properties>\n</configuration>\n```\n\n```properties:hoge.properties\nfuga=property file\npiyo=property file\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Properties;\n\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            Properties prop = new Properties();\n            prop.put(\"piyo\", \"Properties Class\");\n            \n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in, prop);\n            Properties properties = factory.getConfiguration().getVariables();\n            \n            properties.forEach((key, value) -> {\n                System.out.printf(\"%s=%s%n\", key, value);\n            });\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\nhoge=property tag\nfuga=property file\npiyo=Properties Class\n```\n\n- \u4ee5\u4e0b\u306e\u5834\u6240\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n    1. `<properties>` \u30bf\u30b0\u5185\u306e `<property>` \u30bf\u30b0\u3002\n    1. `<properties>` \u30bf\u30b0\u3067\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30ed\u30d1\u30c6\u30a3\u30d5\u30a1\u30a4\u30eb\u3002\n    1. `SqlSessionFactory` \u3092\u751f\u6210\u3059\u308b\u3068\u304d\u306b `Properties` \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6e21\u3059\u3002\n- \u5404\u5b9a\u7fa9\u306f\u4e0a\u8ff0\u306e\u9806\u5e8f\u3067\u8aad\u307f\u8fbc\u307e\u308c\u3001\u5f8c\u3067\u8aad\u307f\u8fbc\u307e\u308c\u305f\u3082\u306e\u3067\u4e0a\u66f8\u304d\u3055\u308c\u308b\u3002\n- `<properties>` \u30bf\u30b0\u3067\u5225\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u5834\u5408\u306f\u3001 `resource` \u5c5e\u6027\u3067\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u3001 `url` \u5c5e\u6027\u3067 URL \u6307\u5b9a\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u308b\u3002\n    - `url` \u5c5e\u6027\u3067\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f `file:///C:/foo/bar/hoge.properties` \u307f\u305f\u3044\u306a\u611f\u3058\u3067\u6307\u5b9a\u3059\u308b\u3002\n- \u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u3001 `${...}` \u3068\u3044\u3046\u5f62\u3067\u53c2\u7167\u3067\u304d\u308b\u3002\n\n## \u8907\u6570\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u3092\u5b9a\u7fa9\u3059\u308b\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u63a5\u7d9a\u5148\u60c5\u5831\u306f\u3001 `environment` \u3068\u3044\u3046\u5358\u4f4d\u3067\u5b9a\u7fa9\u3059\u308b\u3002\n`SqlSessionFactory` \u306f\u3001\u3053\u306e `environment` \u5358\u4f4d\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f `<environments>` \u30bf\u30b0\u306e `default` \u5c5e\u6027\u3067\u6307\u5b9a\u3057\u305f `environment` \u304c\u4f7f\u7528\u3055\u308c\u308b\u3002\n\u3057\u304b\u3057\u3001 `SqlSessionFactory` \u3092\u751f\u6210\u3059\u308b\u3068\u304d\u306b\u4efb\u610f\u306e `environment` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n**test_table @ hoge \u30b9\u30ad\u30fc\u30de**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ce770d83-c7c5-1e40-388d-d0bc227eeac5.jpeg)\n\n**test_table @ fuga \u30b9\u30ad\u30fc\u30de**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/888fb8fc-26da-af4a-7e12-a8abf5e62428.jpeg)\n\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <environments default=\"hoge\"> <!-- \u2605hoge \u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u6307\u5b9a -->\n    <environment id=\"hoge\">\n      <transactionManager type=\"JDBC\"/>\n      <dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n        <property name=\"url\" value=\"jdbc:mysql://localhost/hoge\"/>\n        <property name=\"username\" value=\"test\"/>\n        <property name=\"password\" value=\"test\"/>\n      </dataSource>\n    </environment>\n    \n    <environment id=\"fuga\">\n      <transactionManager type=\"JDBC\"/>\n      <dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n        <property name=\"url\" value=\"jdbc:mysql://localhost/fuga\"/>\n        <property name=\"username\" value=\"test\"/>\n        <property name=\"password\" value=\"test\"/>\n      </dataSource>\n    </environment>\n  </environments>\n  \n  <mappers>\n    <mapper resource=\"sample_mapper.xml\"/>\n  </mappers>\n</configuration>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.function.Function;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        execute(in -> new SqlSessionFactoryBuilder().build(in)); // \u2605environment \u3092\u6307\u5b9a\u3057\u306a\u3044\n        execute(in -> new SqlSessionFactoryBuilder().build(in, \"fuga\")); // \u2605environment \u3092\u6307\u5b9a\n    }\n    \n    private static void execute(Function<InputStream, SqlSessionFactory> sqlSessionFactorySupplier) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = sqlSessionFactorySupplier.apply(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                System.out.println(session.selectList(\"sample.mybatis.selectTest\"));\n            }\n        }\n        System.out.println();\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[{id=1, value=fizz}, {id=2, value=buzz}]\n\n[{id=1, value=hoge}, {id=2, value=fuga}, {id=3, value=piyo}]\n```\n\n- `SqlSessionFactoryBuilder#build()` \u306e\u7b2c\u4e8c\u5f15\u6570\u3067\u3001 `environment` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n## Java EE \u30b5\u30fc\u30d0\u30fc\u306b\u7ba1\u7406\u3055\u308c\u305f\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u4f7f\u7528\u3059\u308b\nJava EE \u30b5\u30fc\u30d0\u30fc\u4e0a\u3067\u52d5\u304b\u3059\u5834\u5408\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306f\u30b5\u30fc\u30d0\u30fc\u306b\u767b\u9332\u3057\u3066\u304a\u3044\u3066\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5236\u5fa1\u306f Java EE \u30b3\u30f3\u30c6\u30ca\u306b\u4efb\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <environments default=\"test\">\n    <environment id=\"test\">\n      <transactionManager type=\"MANAGED\"/> <!-- \u2605type \u3092 MANAGED \u306b\u3059\u308b -->\n      \n      <dataSource type=\"JNDI\"> <!-- \u2605JNDI \u306b\u3059\u308b -->\n        <!-- \u2605data_source \u3067 JNDI \u304b\u3089\u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306e\u540d\u3092\u6307\u5b9a\u3059\u308b -->\n        <property name=\"data_source\" value=\"java:app/sampleDS\"/>\n      </dataSource>\n    </environment>\n  </environments>\n  \n  <mappers>\n    <mapper resource=\"sample_mapper.xml\"/>\n  </mappers>\n</configuration>\n```\n\n- `<transactionManager>` \u30bf\u30b0\u306e `type` \u3092 `MANAGED` \u306b\u3059\u308b\u3002\n- `<datasource>` \u30bf\u30b0\u306e `type` \u3092 `JNDI` \u306b\u3059\u308b\u3002\n- `<property>` \u30bf\u30b0\u3067\u3001 `data_source` \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n    - \u5024\u306f JNDI \u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306e\u540d\u524d\u306b\u3059\u308b\u3002\n\n# \u5b9f\u884c\u3055\u308c\u308b SQL \u3092\u30ed\u30b0\u306b\u51fa\u529b\u3059\u308b\nlogback \u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3059\u308c\u3070\u3001 DEBUG \u30ec\u30d9\u30eb\u3067\u51fa\u529b\u3055\u308c\u308b\u3002\n\n```groovy:build.gradle\n    compile 'ch.qos.logback:logback-classic:1.1.3'\n```\n\n```text:\u30ed\u30b0\u51fa\u529b\n18:10:01.123 [main] DEBUG sample.mybatis.selectTest - ==>  Preparing: select * from test_table where id=? and id=? \n18:10:01.151 [main] DEBUG sample.mybatis.selectTest - ==> Parameters: 1(Integer), 1(Integer)\n18:10:01.165 [main] DEBUG sample.mybatis.selectTest - <==      Total: 1\n```\n\n\u5b9f\u884c\u3055\u308c\u305f SQL \u3068\u3001\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u5b9f\u884c\u3057\u305f SQL \u306e\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \uff08`sample.mybatis.selectTest`\uff09\u304c\u30ed\u30ac\u30fc\u540d\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \u3092\u5229\u7528\u3057\u305f\u30ed\u30b0\u51fa\u529b\u306e\u5236\u5fa1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n# \u691c\u7d22\n## \u8907\u6570\u4ef6\u306e\u7d50\u679c\u3092\u53d6\u5f97\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                List<Map<String, Object>> result = session.selectList(\"sample.mybatis.selectTest\");\n                System.out.println(result);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[{id=1, value=fizz}, {id=2, value=buzz}]\n```\n\n- \u691c\u7d22\u7528\u306e SQL \u306f\u3001 `<select>` \u30bf\u30b0\u3067\u5ba3\u8a00\u3059\u308b\u3002\n    - `id` \u5c5e\u6027\u3067\u3001\u305d\u306e SQL \u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u8b58\u5225\u540d\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n    - `resultType` \u5c5e\u6027\u3067\u3001\u691c\u7d22\u7d50\u679c\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u3069\u306e\u578b\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u304b\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n    - \u3053\u3053\u3067\u306f `map` \u3068\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001 `Map` \u578b\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n- \u691c\u7d22\u7d50\u679c\u304c\u8907\u6570\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\u5834\u5408\u3001 `SqlSession` \u306e `selectList()` \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n    - \u623b\u308a\u5024\u306f `List` \u578b\u306b\u306a\u308b\u3002\n\n## \u5358\u4e00\u306e\u7d50\u679c\u3092\u53d6\u5f97\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table limit 1\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\");\n                System.out.println(result);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n{id=1, value=fizz}\n```\n\n- \u691c\u7d22\u7d50\u679c\u304c\uff11\u4ef6\u3060\u3051\u3067\u5358\u4e00\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u53d6\u5f97\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `selectOne()` \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n- \u3082\u3057\u691c\u7d22\u7d50\u679c\u304c\u8907\u6570\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u8fd4\u3057\u305f\u5834\u5408\u3001 `TooManyResultsException` \u304c\u30b9\u30ed\u30fc\u3055\u308c\u308b\u3002\n- \u691c\u7d22\u7d50\u679c\u304c 0 \u4ef6\u306e\u5834\u5408\u306f `null` \u3092\u8fd4\u3059\u3002\n\n\n## resultType \u3067\u6307\u5b9a\u3067\u304d\u308b\u5024\n`resultType` \u306b\u306f\u3001\u691c\u7d22\u7d50\u679c\u3092 Java \u306e\u3069\u306e\u578b\u306b\u5909\u63db\u3059\u308b\u304b\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u901a\u5e38\u306f `java.util.Map` \u306e\u3088\u3046\u306b\u5909\u63db\u5148\u30af\u30e9\u30b9\u306e FQCN \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\u3057\u304b\u3057\u3001\u4e00\u90e8\u306e\u3088\u304f\u5229\u7528\u3059\u308b\u578b\u306b\u3064\u3044\u3066\u306f\u4e88\u3081\u30a8\u30a4\u30ea\u30a2\u30b9\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u3001\u77ed\u3044\u540d\u524d\u3067\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n\u4ee5\u4e0b\u3001 `org.apache.ibatis.type.TypeAliasRegistry` \u3088\u308a\u62bd\u51fa\u3002\n\n|  \u30a8\u30a4\u30ea\u30a2\u30b9  |    \u578b      |\n|--------------|--------------|\n| string       | String       |\n| date         | Date         |\n| map          | Map          |\n| hashmap      | HashMap      |\n| list         | List         |\n| arraylist    | ArrayList    |\n| decimal      | BigDecimal   |\n| bigdecimal   | BigDecimal   |\n| biginteger   | BigInteger   |\n| _byte        | byte         |\n| _long        | long         |\n| _short       | short        |\n| _int         | int          |\n| _integer     | int          |\n| _double      | double       |\n| _float       | float        |\n| _boolean     | boolean      |\n| _byte[]      | byte[]       |\n| _long[]      | long[]       |\n| _short[]     | short[]      |\n| _int[]       | int[]        |\n| _integer[]   | int[]        |\n| _double[]    | double[]     |\n| _float[]     | float[]      |\n| _boolean[]   | boolean[]    |\n| byte         | Byte         |\n| long         | Long         |\n| short        | Short        |\n| int          | Integer      |\n| integer      | Integer      |\n| double       | Double       |\n| float        | Float        |\n| boolean      | Boolean      |\n| byte[]       | Byte[]       |\n| long[]       | Long[]       |\n| short[]      | Short[]      |\n| int[]        | Integer[]    |\n| integer[]    | Integer[]    |\n| double[]     | Double[]     |\n| float[]      | Float[]      |\n| boolean[]    | Boolean[]    |\n| object       | Object       |\n| date[]       | Date[]       |\n| decimal[]    | BigDecimal[] |\n| bigdecimal[] | BigDecimal[] |\n| biginteger[] | BigInteger[] |\n| object[]     | Object[]     |\n| collection   | Collection   |\n| iterator     | Iterator     |\n| ResultSet    | ResultSet    |\n\n\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b\u306e\u5834\u5408\u306f `_` \u3092\u524d\u306b\u4ed8\u3051\u308b\u3002\u4ed8\u3051\u306a\u3044\u5834\u5408\u306f\u30e9\u30c3\u30d1\u30fc\u30af\u30e9\u30b9\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n### \u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\n\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u4efb\u610f\u306b\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <typeAliases>\n    <typeAlias type=\"foo.bar.Hoge\" alias=\"Hoge\" />\n  </typeAliases>\n\n  ...\n</configuration>\n```\n\n- \u30e1\u30a4\u30f3\u306e\u65b9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\uff08`mybatis-config.xml`\uff09\u306b `<typeAlias>` \u30bf\u30b0\u3067\u5ba3\u8a00\u3067\u304d\u308b\u3002\n\n### \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u3066\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <typeAliases>\n    <package name=\"foo.bar\"/>\n  </typeAliases>\n\n  ...\n</configuration>\n```\n\n- `<package>` \u30bf\u30b0\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u5358\u4f4d\u3067\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- \u3053\u306e\u5834\u5408\u3001\u30af\u30e9\u30b9\u540d\u304c\u305d\u306e\u307e\u307e\u30a8\u30a4\u30ea\u30a2\u30b9\u306b\u306a\u308b\u3002\n\n## \u30d1\u30e9\u30e1\u30fc\u30bf\n### \u5358\u4e00\u306e\u5834\u5408\n```xml:sample_mapping.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table where id=#{id}\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\", 1);\n                System.out.println(result);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=? \n[DEBUG] s.m.selectTest  - ==> Parameters: 1(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 1\n{id=1, value=fizz}\n```\n\n- `#{...}` \u3068\u3044\u3046\u5f62\u5f0f\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5ba3\u8a00\u3067\u304d\u308b\u3002\n- \u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001 `SqlSession` \u3067 SQL \u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306b\u3001\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \uff08`sample.mybatis.selectTest`\uff09\u306e\u6b21\u306b\u5f15\u6570\u3067\u6e21\u3059\u3002\n\n### \u8907\u6570\u306e\u5834\u5408\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n                                           <!-- \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b\u3092\u6307\u5b9a\u3059\u308b -->\n  <select id=\"selectTest\" resultType=\"map\" parameterType=\"sample.mybatis.MyParameter\">\n    select *\n      from test_table\n     where id=#{id}\n       and value=#{value}\n  </select>\n</mapper>\n```\n\n```java:MyParameter.java\npackage sample.mybatis;\n\npublic class MyParameter {\n    \n    private int id;\n    private String value;\n    \n    public MyParameter(int id, String value) {\n        this.id = id;\n        this.value = value;\n    }\n\n    public int getId() {\n        System.out.println(\"get id\");\n        return id;\n    }\n}\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                MyParameter param = new MyParameter(2, \"aaa\");\n\n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\", param);\n                System.out.println(result);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\nget id\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=? and value=? \nget id\n[DEBUG] s.m.selectTest  - ==> Parameters: 2(Integer), aaa(String)\n```\n\n- \u8907\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u57cb\u3081\u8fbc\u3080\u5834\u5408\u3001\u4f55\u304b\u3057\u3089\u306e\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5024\u3092\u5165\u308c\u3066\u3001\u305d\u308c\u3092\u6e21\u3059\u3088\u3046\u306b\u3059\u308b\u3002\n- \u5165\u308c\u7269\u3068\u306a\u308b\u30af\u30e9\u30b9\u306f\u3001 `<select>` \u30bf\u30b0\u306e `parameterType` \u5c5e\u6027\u3067\u578b\u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3002\n- \u5ba3\u8a00\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u540d\u524d\u3068\u4e00\u81f4\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\uff09\u306e\u5024\u304c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089\u53d6\u5f97\u3055\u308c\u308b\u3002\n- \u5024\u306f\u3001 Getter \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308c\u3070\u305d\u308c\u7d4c\u7531\u3067\u3001\u306a\u3051\u308c\u3070\u30d5\u30a3\u30fc\u30eb\u30c9\u304b\u3089\u76f4\u63a5\u53d6\u5f97\u3055\u308c\u308b\uff08`private` \u3067\u3082\u53d6\u5f97\u3055\u308c\u308b\u6a21\u69d8\uff09\u3002\n\n### Map \u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\n\u8907\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u306b\u306f\u3001 Map \u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"map\">\n    select *\n      from test_table\n     where id=#{id}\n       and value=#{value}\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                Map<String, Object> param = new HashMap<>();\n                param.put(\"id\", 10);\n                param.put(\"value\", \"hogeeee\");\n                \n                Map<String, Object> result = session.selectOne(\"sample.mybatis.selectTest\", param);\n                System.out.println(result);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=? and value=? \n[DEBUG] s.m.selectTest  - ==> Parameters: 10(Integer), hogeeee(String)\n```\n\n- \u30d1\u30e9\u30e1\u30fc\u30bf\u306f `Map` \u3067\u3082\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u305d\u306e\u5834\u5408\u306f\u3001 `<select>` \u30bf\u30b0\u306e `parameterType` \u306e\u8a2d\u5b9a\u306f\u7121\u304f\u3066\u3082\u52d5\u304f\u3002\n\n### \u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\n\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u306f\u3001 MyBatis \u306b\u3088\u3063\u3066\u81ea\u52d5\u3067\u767b\u9332\u3055\u308c\u308b\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3067\u3001\u6697\u9ed9\u7684\u306b\u5229\u7528\u3067\u304d\u308b\u3002\n\n| \u30d1\u30e9\u30e1\u30fc\u30bf\u540d |                          \u6761\u4ef6                          |\n|--------------|--------------------------------------------------------|\n| `_parameter` | \uff08\u305f\u3076\u3093\uff09\u5e38\u306b\u53c2\u7167\u53ef\u80fd                                 |\n| `collection` | \u30d1\u30e9\u30e1\u30fc\u30bf\u304c `java.util.Collection` \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u5834\u5408 |\n| `list`       | \u30d1\u30e9\u30e1\u30fc\u30bf\u304c `java.util.List` \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u5834\u5408       |\n| `array`      | \u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u914d\u5217\u306e\u5834\u5408                                 |\n\n- `_parameter` \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u6240\u3002\n    - `org.apache.ibatis.scripting.xmltags.DynamicContext`\n- `collection`, `list`, `arrary` \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u6240\u3002\n    - `org.apache.ibatis.session.defaults.DefaultSqlSession#wrapCollection(Object)`\n\n\n## \u691c\u7d22\u7d50\u679c\u3092\u4efb\u610f\u306e Java \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n### \u57fa\u672c\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/6c6d9aca-9552-8924-363c-9933ed6145ae.jpeg)\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    \n    private int id;\n    private String value;\n    \n    public void setValue(String value) {\n        System.out.println(\"setValue(\" + value + \")\");\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", value=\" + value + \"]\";\n    }\n}\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                List<TestTable> result = session.selectList(\"sample.mybatis.selectTest\");\n                System.out.println(result);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table \n[DEBUG] s.m.selectTest  - ==> Parameters: \nsetValue(fizz)\nsetValue(buzz)\n[DEBUG] s.m.selectTest  - <==      Total: 2\n[TestTable [id=1, value=fizz], TestTable [id=2, value=buzz]]\n```\n\n- `resultType` \u306b\u691c\u7d22\u7d50\u679c\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u3044 Java \u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u30ab\u30e9\u30e0\u540d\u3068\u4e00\u81f4\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u5024\u304c\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3002\n- \u5024\u306e\u30bb\u30c3\u30c8\u306f\u3001 Setter \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308c\u3070\u305d\u308c\u7d4c\u7531\u3067\u3001\u306a\u3051\u308c\u3070\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u76f4\u63a5\u884c\u308f\u308c\u308b\u3002\n\n### \u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\u3068\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u81ea\u52d5\u5316\u3055\u305b\u308b\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/48e5cf19-8e6c-612b-1d65-f469082f56d3.jpeg)\n\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String testValue;\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", testValue=\" + testValue + \"]\";\n    }\n}\n```\n\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/>\n  </settings>\n\n  ...\n</configuration>\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n```text:selectTest\u306e\u5b9f\u884c\u7d50\u679c\nTestTable [id=1, testValue=hoge]\nTestTable [id=2, testValue=fuga]\nTestTable [id=3, testValue=piyo]\n```\n\n- `mapUnderscoreToCamelCase` \u306b `true` \u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\u3068\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\u306e\u81ea\u52d5\u5909\u63db\u3092\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306f `false` \u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n### \u30af\u30e9\u30b9\u3054\u3068\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  <resultMap id=\"testTableResultMap\" type=\"sample.mybatis.TestTable\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"value\" column=\"value\" />\n  </resultMap>\n\n  <select id=\"selectTest\" resultMap=\"testTableResultMap\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n- `<resultMap>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u3001\u691c\u7d22\u7d50\u679c\u3068 Java \u30af\u30e9\u30b9\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- `<id>` \u30bf\u30b0\u3067\u3001\u8b58\u5225\u5b50\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n    - \u8b58\u5225\u5b50\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8b58\u5225\u3059\u308b\u3068\u304d\u306b\u4f7f\u7528\u3059\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u3059\u3002\n    - \u8b58\u5225\u5b50\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3084 JOIN \u30de\u30c3\u30d4\u30f3\u30b0\u306e\u3068\u304d\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5411\u4e0a\u3059\u308b\u3089\u3057\u3044\u3002\n    - `property` \u5c5e\u6027\u3067\u3001 Java \u5074\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `column` \u5c5e\u6027\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5074\u306e\u5217\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `<result>` \u30bf\u30b0\u3067\u3001\u5404\u5217\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n    - \u3053\u3061\u3089\u3082 `property` \u3068 `column` \u3067\u540d\u524d\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n- `<resultMap>` \u306e `id` \u5c5e\u6027\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u4e00\u610f\u306b\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u540d\u524d\u3092\u5b9a\u7fa9\u3059\u308b\uff08`testTableResultMap`\uff09\u3002\n    - \u3053\u306e\u540d\u524d\u3092\u3001 `<select>` \u30bf\u30b0\u306e `resultMap` \u5c5e\u6027\u306b\u6307\u5b9a\u3059\u308b\u3002\n\n### \u5358\u4e00\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n#### \u57fa\u672c\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/df1a7bf6-821b-ed53-d7f2-dc88a6bb6bc8.jpeg)\n\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    \n    private int id;\n    private String string;\n    private Embedded embedded;\n    \n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", string=\" + string + \", embedded=\" + embedded + \"]\";\n    }\n}\n```\n\n```java:Embedded.java\npackage sample.mybatis;\n\npublic class Embedded {\n    \n    private int number;\n\n    @Override\n    public String toString() {\n        return \"Embedded [number=\" + number + \"]\";\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.TestTable\" id=\"testTableResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"string\" column=\"string\" />\n\n    <!-- \u2605association \u30bf\u30b0\u3067\u5b9a\u7fa9 -->\n    <association property=\"embedded\" javaType=\"sample.mybatis.Embedded\">\n      <result property=\"number\" column=\"number\" />\n    </association>\n  </resultMap>\n\n\n  <select id=\"selectTest\" resultMap=\"testTableResultMap\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                session\n                    .selectList(\"sample.mybatis.selectTest\")\n                    .forEach(System.out::println);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\nTestTable [id=1, string=hoge, embedded=Embedded [number=100]]\nTestTable [id=2, string=fuga, embedded=Embedded [number=200]]\nTestTable [id=3, string=piyo, embedded=Embedded [number=300]]\n```\n\n- `<association>` \u30bf\u30b0\u3067\u3001\u5358\u4e00\u306e\u30af\u30e9\u30b9\u306e\u57cb\u3081\u8fbc\u307f\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\n- `javaType` \u5c5e\u6027\u3067\u3001\u57cb\u3081\u8fbc\u3080\u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\uff08\u30a8\u30a4\u30ea\u30a2\u30b9\u53ef\uff09\u3002\n- \u5b50\u8981\u7d20\u3067\u3001\u57cb\u3081\u8fbc\u307f\u30af\u30e9\u30b9\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n#### \u57cb\u3081\u8fbc\u3080\u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\u3092\u5916\u51fa\u3057\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.TestTable\" id=\"testTableResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"string\" column=\"string\" />\n    \n    <!-- \u2605resutlMap \u3092\u6307\u5b9a -->\n    <association property=\"embedded\" resultMap=\"embeddedResultMap\" />\n  </resultMap>\n  \n  <!-- \u2605\u5225\u9014 resultMap \u3067\u5b9a\u7fa9 -->\n  <resultMap type=\"sample.mybatis.Embedded\" id=\"embeddedResultMap\">\n    <result property=\"number\" column=\"number\" />\n  </resultMap>\n\n\n  <select id=\"selectTest\" resultMap=\"testTableResultMap\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n- `<resultMap>` \u3067\u5225\u9014\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n#### \u30ab\u30e9\u30e0\u540d\u306b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3059\u308b\n**foo_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/250f99b7-7c1c-f090-1cc4-a6fe252fbd1a.jpeg)\n\n**bar_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/32c94698-4e52-c283-3363-868b46cff430.jpeg)\n\n```java:Foo.java\npackage sample.mybatis;\n\npublic class Foo {\n    private int id;\n    private Bar bar;\n    \n    @Override\n    public String toString() {\n        return \"Foo [id=\" + id + \", bar=\" + bar + \"]\";\n    }\n}\n```\n\n```java:Bar.java\npackage sample.mybatis;\n\npublic class Bar {\n    private int id;\n\n    @Override\n    public String toString() {\n        return \"Bar [id=\" + id + \"]\";\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <!-- \u2605columnPrefix \u3067\u5171\u901a\u3059\u308b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u6307\u5b9a\u3059\u308b -->\n    <association property=\"bar\" columnPrefix=\"bar_\" resultMap=\"barResultMap\" />\n  </resultMap>\n  \n  <resultMap type=\"sample.mybatis.Bar\" id=\"barResultMap\">\n    <id property=\"id\" column=\"id\" />\n  </resultMap>\n\n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select foo.id\n          ,bar.id bar_id -- \u2605\"bar_\" \u3092\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3068\u3057\u3066\u4ed8\u3051\u308b\n      from foo_table foo\n          ,bar_table bar\n     where bar.id = foo.bar_id\n  order by foo.id asc\n  </select>\n</mapper>\n```\n\n```text:selectFoo\u306e\u5b9f\u884c\u7d50\u679c\nFoo [id=1, bar=Bar [id=3]]\nFoo [id=2, bar=Bar [id=2]]\nFoo [id=3, bar=Bar [id=1]]\n```\n\n- JOIN \u3068\u304b\u3057\u305f\u3068\u304d\u306b\u5225\u30c6\u30fc\u30d6\u30eb\u306e\u540c\u540d\u30ab\u30e9\u30e0\u3068\u533a\u5225\u3059\u308b\u305f\u3081\u306b\u3001\u3088\u304f\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\uff08`bar_`\uff09\u3092\u4ed8\u3051\u308b\u3068\u601d\u3046\u3002\n- \u305d\u3046\u3044\u3046\u3068\u304d\u3067\u3082 `resultMap` \u3092\u4f7f\u3044\u56de\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3001 `columnPrefix` \u3068\u3044\u3046\u5c5e\u6027\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n- `columnPrefix` \u3092\u6307\u5b9a\u3059\u308c\u3070\u3001 `column` \u306e\u8a2d\u5b9a\u5024\u306b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u305f\u540d\u79f0\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n#### SELECT \u3092\u5206\u3051\u3066\u5b9f\u884c\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <association property=\"bar\" column=\"bar_id\" select=\"selectBar\" />\n  </resultMap>\n  \n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n  \n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select * from bar_table where id = #{id}\n  </select>\n</mapper>\n```\n\n```text:selectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 2(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 3(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectFoo   - <==      Total: 3\nFoo [id=3, bar=Bar [id=1]]\nFoo [id=2, bar=Bar [id=2]]\nFoo [id=1, bar=Bar [id=3]]\n```\n\n- `foo_table` \u3092\u691c\u7d22\u3057\u305f\u3042\u3068\u3001\u5404\u5217\u306b\u5bfe\u3057\u3066 `bar_table` \u306e\u691c\u7d22\u3092\u5225\u9014\u5b9f\u884c\u3057\u3066\u3044\u308b\u3002\n- `<association>` \u30bf\u30b0\u306e `select` \u5c5e\u6027\u3067\u3001 `<select>` \u30bf\u30b0\u306e\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u3046\u3044\u3046\u691c\u7d22\u306b\u3067\u304d\u308b\u3002\n- `column` \u5c5e\u6027\u306b\u306f\u3001\u5b50\u30c6\u30fc\u30d6\u30eb\u306e JOIN \u306b\u4f7f\u7528\u3059\u308b\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n#### JOIN \u30ad\u30fc\u304c\u8907\u6570\u3042\u308b\u5834\u5408\n**foo_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d9a80959-7e96-35ba-6b75-b7b4134a23ce.jpeg)\n\n**bar_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/6b2f2eb3-3be3-db16-0364-c529b6ca7063.jpeg)\n\n```java:Bar.java\npackage sample.mybatis;\n\npublic class Bar {\n    private int key1;\n    private String key2;\n\n    @Override\n    public String toString() {\n        return \"Bar [key1=\" + key1 + \", key2=\" + key2 + \"]\";\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n                                <!-- \u2605\u30ad\u30fc\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306e\u6307\u5b9a\u65b9\u6cd5 -->\n    <association property=\"bar\" column=\"{key1=bar_key1,key2=bar_key2}\" select=\"selectBar\" />\n  </resultMap>\n  \n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n  \n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select *\n      from bar_table\n     where key1 = #{key1}\n       and key2 = #{key2}\n  </select>\n</mapper>\n```\n\n```text:selectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer), fuga(String)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer), hoge(String)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 2(Integer), hoge(String)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectFoo   - <==      Total: 3\nFoo [id=2, bar=Bar [key1=1, key2=fuga]]\nFoo [id=3, bar=Bar [key1=1, key2=hoge]]\nFoo [id=1, bar=Bar [key1=2, key2=hoge]]\n```\n\n- JOIN \u3059\u308b\u3068\u304d\u306e\u30ab\u30e9\u30e0\u304c\u8907\u6570\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u3001 `{prop1=column1,prop2=column2}` \u3068\u3044\u3046\u5f62\u3067 `column` \u5c5e\u6027\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n#### \u95a2\u9023\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u3092\u9045\u5ef6\u3055\u305b\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <association property=\"bar\" column=\"{key1=bar_key1,key2=bar_key2}\" select=\"selectBar\"\n                 fetchType=\"lazy\" /> <!-- \u2605fetchType \u306b lazy \u3092\u6307\u5b9a -->\n  </resultMap>\n  \n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n  \n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select *\n      from bar_table\n     where key1 = #{key1}\n       and key2 = #{key2}\n  </select>\n</mapper>\n```\n\n```java:Foo.java\npackage sample.mybatis;\n\npublic class Foo {\n    private int id;\n    public Bar bar;\n    \n    public void method() {\n        System.out.println(\"Foo.method() is called\");\n    }\n}\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.List;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                System.out.println(\"@selectList()\");\n                List<Foo> result = session.selectList(\"sample.mybatis.selectFoo\");\n                \n                System.out.println(\"@result.get(0)\");\n                Foo foo = result.get(0);\n                \n                System.out.println(\"** foo.class = \" + foo.getClass() + \" **\");\n                \n                System.out.println(\"@foo.bar 1\");\n                System.out.println(\"<< foo.bar = \" + foo.bar + \" >>\");\n\n                System.out.println(\"@foo.method()\");\n                foo.method();\n\n                System.out.println(\"@foo.bar 2\");\n                System.out.println(\"<< foo.bar = \" + foo.bar + \" >>\");\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n@selectList()\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectFoo   - <==      Total: 3\n@result.get(0)\n** foo.class = class sample.mybatis.Foo_$$_jvst80f_0 **\n@foo.bar 1\n<< foo.bar = null >>\n@foo.method()\n[DEBUG] s.m.selectBar   - ==>  Preparing: select * from bar_table where key1 = ? and key2 = ? \n[DEBUG] s.m.selectBar   - ==> Parameters: 1(Integer), fuga(String)\n[DEBUG] s.m.selectBar   - <==      Total: 1\nFoo.method() is called\n@foo.bar 2\n<< foo.bar = Bar [key1=1, key2=fuga] >>\n```\n\n- `<association>` \u306e `fetchType` \u5c5e\u6027\u306b `lazy` \u3068\u30bb\u30c3\u30c8\u3059\u308b\u3068\u3001\u95a2\u9023\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u3092\u9045\u5ef6\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n    - \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u5373\u6642\u30ed\u30fc\u30c9\uff08`eager`\uff09\u3002\n- \u9045\u5ef6\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001 MyBatis \u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u30d7\u30ed\u30ad\u30b7\u306b\u306a\u308b\uff08`class sample.mybatis.Foo_$$_jvst80f_0`\uff09\u3002\n    - \u9045\u5ef6\u30ed\u30fc\u30c9\u3067\u306a\u3044\u5834\u5408\u306f\u3001\u666e\u901a\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6e21\u3055\u308c\u308b\u3002\n- \u9045\u5ef6\u30ed\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001\u300c\u30d7\u30ed\u30ad\u30b7\u306e\u3044\u305a\u308c\u304b\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u305f\u3068\u304d\u306e\u5148\u982d\u300d\u306e\u6a21\u69d8\u3002\n- \u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u8aad\u307f\u53d6\u3089\u308c\u305f\u3068\u304d\u3067\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u30e1\u30bd\u30c3\u30c9\u5b9f\u884c\u524d\u306b\u53c2\u7167\u3059\u308b\u3068 `null` \u306b\u306a\u3063\u3066\u3044\u308b\uff08\u307e\u3041\u3001\u76f4\u63a5\u53c2\u7167\u3059\u308b\u3053\u3068\u306f\u306a\u3044\u3068\u601d\u3046\u3051\u3069\u3001\u4e00\u5fdc\u6ce8\u610f\uff09\u3002\n\n\u5168\u3066\u306e\u95a2\u9023\u3092\u9045\u5ef6\u30ed\u30fc\u30c9\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u3001\u30eb\u30fc\u30c8\u306e\u8a2d\u5b9a\u3067 `lazyLoadingEnabled` \u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308b\u3002\n\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"lazyLoadingEnabled\" value=\"true\"/> <!-- \u2605true \u306b\u3059\u308b -->\n  </settings>\n\n  ...\n</configuration>\n```\n\n\u3053\u306e\u5834\u5408\u3067\u3082\u3001 `<association>` \u30bf\u30b0\u306e `fetchType` \u306e\u65b9\u304c\u512a\u5148\u3055\u308c\u308b\u306e\u3067\u3001\u7279\u5b9a\u306e\u8aad\u307f\u8fbc\u307f\u3060\u3051\u5373\u6642\u30ed\u30fc\u30c9\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u8a2d\u5b9a\u3092\u4e0a\u66f8\u304d\u3067\u304d\u308b\u3002\n\n### \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n#### \u57fa\u672c\n**foo_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/dfd9b494-17f2-48c8-43c6-33df314bdb14.jpeg)\n\n**bar_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/84977609-0910-e257-4f1a-e3c5f98b1f16.jpeg)\n\n```java:Foo.java\npackage sample.mybatis;\n\nimport java.util.List;\n\npublic class Foo {\n    private int id;\n    private List<Bar> barList;\n    \n    @Override\n    public String toString() {\n        return \"Foo [id=\" + id + \", barList=\" + barList + \"]\";\n    }\n}\n```\n\n```java:Bar.java\npackage sample.mybatis;\n\npublic class Bar {\n    private int id;\n\n    @Override\n    public String toString() {\n        return \"Bar [id=\" + id + \"]\";\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <!-- \u2605collection \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b -->\n    <collection property=\"barList\" ofType=\"sample.mybatis.Bar\">\n      <id property=\"id\" column=\"bar_id\" />\n    </collection>\n  </resultMap>\n  \n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select foo.id\n          ,bar.id bar_id\n      from foo_table foo\n          ,bar_table bar\n     where bar.foo_id = foo.id\n  </select>\n</mapper>\n```\n\n```text:selectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select foo.id ,bar.id bar_id from foo_table foo ,bar_table bar where bar.foo_id = foo.id \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectFoo   - <==      Total: 6\nFoo [id=1, barList=[Bar [id=1], Bar [id=2], Bar [id=3]]]\nFoo [id=2, barList=[Bar [id=4], Bar [id=5]]]\nFoo [id=3, barList=[Bar [id=6]]]\n```\n\n- \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306f\u3001 `<collection>` \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3002\n- \u5404\u8981\u7d20\u306e\u578b\u306f `ofType` \u5c5e\u6027\u3067\u6307\u5b9a\u3059\u308b\uff08\u30a8\u30a4\u30ea\u30a2\u30b9\u53ef\uff09\u3002\n- \u305d\u308c\u4ee5\u5916\u306f\u3001 `<association>` \u30bf\u30b0\u306e\u3068\u304d\u3068\u540c\u3058\u30ce\u30ea\u3067\u3044\u3051\u308b\u3002\n\n#### SELECT \u3092\u5206\u5272\u3057\u3066\u5b9f\u884c\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Foo\" id=\"fooResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <collection property=\"barList\" column=\"id\" select=\"selectBar\" />\n  </resultMap>\n  \n  <select id=\"selectFoo\" resultMap=\"fooResultMap\">\n    select * from foo_table\n  </select>\n  \n  <select id=\"selectBar\" resultType=\"sample.mybatis.Bar\">\n    select * from bar_table where foo_id = #{id}\n  </select>\n</mapper>\n```\n\n```text:selectFoo\u306e\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectFoo   - ==>  Preparing: select * from foo_table \n[DEBUG] s.m.selectFoo   - ==> Parameters: \n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where foo_id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 1(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 3\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where foo_id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 2(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 2\n[DEBUG] s.m.selectBar   - ====>  Preparing: select * from bar_table where foo_id = ? \n[DEBUG] s.m.selectBar   - ====> Parameters: 3(Integer)\n[DEBUG] s.m.selectBar   - <====      Total: 1\n[DEBUG] s.m.selectFoo   - <==      Total: 3\nFoo [id=1, barList=[Bar [id=1], Bar [id=2], Bar [id=3]]]\nFoo [id=2, barList=[Bar [id=4], Bar [id=5]]]\nFoo [id=3, barList=[Bar [id=6]]]\n```\n\n- `<association>` \u306e\u3068\u304d\u3068\u540c\u3058\u30ce\u30ea\u3067\u3067\u304d\u308b\u3002\n- \u9045\u5ef6\u30ed\u30fc\u30c9\u3082\u540c\u3058\u304f\u53ef\u80fd\u3002\n\n### \u6761\u4ef6\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u30af\u30e9\u30b9\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u4e3b\u306b\u7d99\u627f\u95a2\u4fc2\u306b\u3042\u308b\u30af\u30e9\u30b9\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3068\u304d\u306b\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3002\n\n**base_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/676f5ee0-a915-4610-460f-f9578313dd3b.jpeg)\n\n```java:Base.java\npackage sample.mybatis;\n\npublic class Base {\n    protected int id;\n    protected String commonValue;\n\n    @Override\n    public String toString() {\n        return \"Base [id=\" + id + \", commonValue=\" + commonValue + \"]\";\n    }\n}\n```\n\n```java:Hoge.java\npackage sample.mybatis;\n\npublic class Hoge extends Base {\n    private String value;\n\n    @Override\n    public String toString() {\n        return \"Hoge [value=\" + value + \", id=\" + id + \", commonValue=\" + commonValue + \"]\";\n    }\n}\n```\n\n```java:Fuga.java\npackage sample.mybatis;\n\npublic class Fuga extends Base {\n    private String value;\n\n    @Override\n    public String toString() {\n        return \"Fuga [value=\" + value + \", id=\" + id + \", commonValue=\" + commonValue + \"]\";\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Base\" id=\"baseResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n    \n    <discriminator javaType=\"int\" column=\"type\">\n      <case value=\"1\" resultType=\"sample.mybatis.Hoge\">\n        <result property=\"value\" column=\"hoge_value\" />\n      </case>\n      <case value=\"2\" resultType=\"sample.mybatis.Fuga\">\n        <result property=\"value\" column=\"fuga_value\" />\n      </case>\n    </discriminator>\n  </resultMap>\n  \n  <select id=\"selectBase\" resultMap=\"baseResultMap\">\n    select * from base_table\n  </select>\n</mapper>\n```\n\n```text:selectBase\u306e\u5b9f\u884c\u7d50\u679c\nHoge [value=hoge1, id=1, commonValue=common1]\nFuga [value=fuga2, id=2, commonValue=common2]\nBase [id=3, commonValue=common3]\n```\n\n- `<discriminator>` \u30bf\u30b0\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u6761\u4ef6\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u30af\u30e9\u30b9\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n    - `column` \u5c5e\u6027\u3067\u3001\u6761\u4ef6\u5024\u3092\u6301\u3064\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `<case>` \u30bf\u30b0\u3067\u3001\u6761\u4ef6\u5024\u3054\u3068\u306b\u3069\u3046\u3044\u3046\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u884c\u3046\u304b\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n    - \u3053\u3053\u3067\u306f\u3001 `1` \u306e\u5834\u5408\u306f `Hoge` \u30af\u30e9\u30b9\u306b\u3001 `2` \u306e\u5834\u5408\u306f `Fuga` \u30af\u30e9\u30b9\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3088\u3046\u306b\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\n- `<case>` \u5f0f\u306b\u5b58\u5728\u3057\u306a\u3044\u6761\u4ef6\u5024\u306e\u5834\u5408\u306f\u3001\u3082\u3068\u3082\u3068\u306e `<resultMap>` \u30bf\u30b0\u3067\u6307\u5b9a\u3057\u3066\u3044\u305f `type` \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n\n#### \u30b1\u30fc\u30b9\u3054\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u5916\u51fa\u3057\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Base\" id=\"baseResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n    \n    <discriminator javaType=\"int\" column=\"type\">\n      <case value=\"1\" resultMap=\"hogeResultMap\" />\n      <case value=\"2\" resultMap=\"fugaResultMap\" />\n    </discriminator>\n  </resultMap>\n  \n  <resultMap type=\"sample.mybatis.Hoge\" id=\"hogeResultMap\">\n    <result property=\"value\" column=\"hoge_value\" />\n  </resultMap>\n  \n  <resultMap type=\"sample.mybatis.Fuga\" id=\"fugaResultMap\">\n    <result property=\"value\" column=\"fuga_value\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n  </resultMap>\n  \n  <select id=\"selectBase\" resultMap=\"baseResultMap\">\n    select * from base_table\n  </select>\n</mapper>\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\nHoge [value=hoge1, id=1, commonValue=null]\nFuga [value=fuga2, id=2, commonValue=common2]\nBase [id=3, commonValue=common3]\n```\n\n- `<case>` \u3054\u3068\u306e\u5b9a\u7fa9\u306f\u3001 `<resultMap>` \u3067\u62bd\u51fa\u3067\u304d\u308b\u3002\n- \u305f\u3060\u3057\u3001\u305d\u306e\u5834\u5408\u5171\u901a\u90e8\u5206\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u305f\u30ab\u30e9\u30e0\u306f `<id>` \u4ee5\u5916\u306f\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u500b\u3005\u306e `<resultMap>` \u3067\u5b9a\u7fa9\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n    - `hogeResultMap` \u306f\u3001 `commonValue` \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u306e\u3067 `null` \u306b\u306a\u3063\u3066\u3044\u308b\u3002\n- \u3044\u3061\u3044\u3061\u500b\u3005\u306e `<resultMap>` \u3067\u5171\u901a\u9805\u76ee\u3092\u5b9a\u7fa9\u3057\u306a\u304a\u3059\u306e\u304c\u30b7\u30f3\u30c9\u30a4\u5834\u5408\u306f\u3001 `extends` \u5c5e\u6027\u3092\u4f7f\u3046\u65b9\u6cd5\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n**extends \u5c5e\u6027\u3067\u5171\u901a\u90e8\u5206\u3092\u7d99\u627f\u3059\u308b**\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <resultMap type=\"sample.mybatis.Base\" id=\"baseResultMap\">\n    <id property=\"id\" column=\"id\" />\n    <result property=\"commonValue\" column=\"common_value\" />\n    \n    <discriminator javaType=\"int\" column=\"type\">\n      <case value=\"1\" resultMap=\"hogeResultMap\" />\n      <case value=\"2\" resultMap=\"fugaResultMap\" />\n    </discriminator>\n  </resultMap>\n                                                           <!-- \u2605extends \u3067 baseResultMap \u3092\u7d99\u627f -->\n  <resultMap type=\"sample.mybatis.Hoge\" id=\"hogeResultMap\" extends=\"baseResultMap\">\n    <result property=\"value\" column=\"hoge_value\" />\n  </resultMap>\n  \n  <resultMap type=\"sample.mybatis.Fuga\" id=\"fugaResultMap\" extends=\"baseResultMap\">\n    <result property=\"value\" column=\"fuga_value\" />\n  </resultMap>\n  \n  <select id=\"selectBase\" resultMap=\"baseResultMap\">\n    select * from base_table\n  </select>\n</mapper>\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\nHoge [value=hoge1, id=1, commonValue=common1]\nFuga [value=fuga2, id=2, commonValue=common2]\nBase [id=3, commonValue=common3]\n```\n\n## \u30ad\u30e3\u30c3\u30b7\u30e5\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session1 = factory.openSession();\n                 SqlSession session2 = factory.openSession();) {\n                \n                TestTable testTable = selectAndPrintln(\"session1\", session1);\n                testTable.setValue(\"update\");\n                \n                selectAndPrintln(\"session1\", session1);\n                \n                selectAndPrintln(\"session2\", session2);\n            }\n        }\n    }\n    \n    private static TestTable selectAndPrintln(String tag, SqlSession session) {\n        TestTable result = session.selectOne(\"sample.mybatis.selectTest\");\n        System.out.printf(\"<<%s>> %s%n\", tag, result);\n        return result;\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=1 \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 1\n<<session1>> TestTable [id=1, value=hoge]\n<<session1>> TestTable [id=1, value=update]\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id=1 \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 1\n<<session2>> TestTable [id=1, value=hoge]\n```\n\n- \u691c\u7d22\u7d50\u679c\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u308b\u3002\n- \u540c\u3058\u691c\u7d22\u3092\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u3068\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3044\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u8fd4\u3055\u308c\u308b\u3002\n- \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u3054\u3068\u306b\u4fdd\u6301\u3055\u308c\u308b\u305f\u3081\u3001\u4ed6\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u306e\u5909\u66f4\u306e\u5f71\u97ff\u306f\u53d7\u3051\u306a\u3044\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u52d5\u4f5c\u3092\u3059\u308b\u3089\u3057\u3044\u3002\n    - 1024 \u500b\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3002\n    - \u6700\u3082\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u30ad\u30e3\u30c3\u30b7\u30e5\u304b\u3089\u524a\u9664\u3055\u308c\u3066\u3044\u304f\u3002\n    - \u6642\u9593\u7d4c\u904e\u3067\u306f\u524a\u9664\u3055\u308c\u306a\u3044\u3002\n    - `insert`, `update`, `delete` \u304c\u5b9f\u884c\u3055\u308c\u308b\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u30af\u30ea\u30a2\u3055\u308c\u308b\u3002\n- \u3053\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u8a2d\u5b9a\u5024\u306e\u8a73\u7d30\u306f [\u3053\u3061\u3089](http://mybatis.org/mybatis-3/ja/sqlmap-xml.html#cache) \u3092\u53c2\u7167\u3002\n\n# \u66f4\u65b0\u7cfb\u51e6\u7406\n## \u767b\u9332\n### \u57fa\u672c\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <insert id=\"insertTest\">\n    insert into test_table (\n        value\n    ) values (\n        #{value}\n    )\n  </insert>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                session.insert(\"sample.mybatis.insertTest\", \"hoge\");\n                session.commit();\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( value ) values ( ? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: hoge(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\n```\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/b9cffbd0-1e8d-90a2-335e-9d02ab569085.jpeg)\n\n- `<insert>` \u30bf\u30b0\u3067 `INSERT` \u6587\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- \u3060\u3044\u305f\u3044 `<select>` \u306e\u3068\u304d\u3068\u540c\u3058\u30ce\u30ea\u3067\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n### \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6e21\u3059\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String value;\n    \n    public TestTable(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", value=\" + value + \"]\";\n    }\n}\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(\"fuga\");\n                \n                session.insert(\"sample.mybatis.insertTest\", table);\n                session.commit();\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( value ) values ( ? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: fuga(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\n```\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/945899fb-3997-c03c-95ac-a2e77069984a.jpeg)\n\n- \u3053\u3061\u3089\u3082 `<select>` \u306e\u3068\u304d\u3068\u540c\u3058\u611f\u3058\u3002\n- `parameterType` \u306f\u7701\u7565\u53ef\u80fd\u3002\n\n### \u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30ad\u30fc\u3092\u53d6\u5f97\u3059\u308b\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <insert id=\"insertTest\" useGeneratedKeys=\"true\" keyProperty=\"id\">\n    insert into test_table (\n        value\n    ) values (\n        #{value}\n    )\n  </insert>\n  \n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(\"piyo\");\n                \n                session.insert(\"sample.mybatis.insertTest\", table);\n                session.commit();\n                \n                System.out.println(table);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( value ) values ( ? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: fuga(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nTestTable [id=7, value=piyo]\n```\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/b1be224a-dc89-9248-047c-c9a6ef3e306d.jpeg)\n\n- `<insert>` \u30bf\u30b0\u306b `useGeneratedKeys` \u3068 `keyProperty` \u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `useGeneratedKeys` \u306f `true` \u3092\u6307\u5b9a\u3002\n    - `keyProperty` \u306b\u306f\u30ad\u30fc\u5024\u3092\u8a2d\u5b9a\u3059\u308b Java \u5074\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\uff09\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u3059\u308b\u3068\u3001 `INSERT` \u6642\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f ID \u304c\u81ea\u52d5\u3067 Java \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n#### Oracle \u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5834\u5408\nID \u3092\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u53d6\u5f97\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <insert id=\"insertTest\">\n    <selectKey keyProperty=\"id\" resultType=\"_int\" order=\"BEFORE\">\n      select test_table_seq.nextval\n        from dual\n    </selectKey>\n    insert into test_table (\n        id\n        ,value\n    ) values (\n        #{id}\n        ,#{value}\n    )\n  </insert>\n</mapper>\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest!selectKey - ==>  Preparing: select test_table_seq.nextval from dual \n[DEBUG] s.m.insertTest!selectKey - ==> Parameters: \n[DEBUG] s.m.insertTest!selectKey - <==      Total: 1\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table ( id ,value ) values ( ? ,? ) \n[DEBUG] s.m.insertTest  - ==> Parameters: 11(Integer), aaa(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nTestTable [id=11, value=aaa]\n```\n\n```text:\u78ba\u8a8d\nSQL> select * from test_table;\n\n        ID VALUE\n---------- -----\n        11 aaa\n```\n\n- `<insert>` \u30bf\u30b0\u306e\u4e2d\u306b `<selectKey>` \u30bf\u30b0\u3092\u5ba3\u8a00\u3059\u308b\u3002\n- `keyProperty` \u5c5e\u6027\u3067\u3001\u751f\u6210\u3055\u308c\u305f ID \u3092\u30bb\u30c3\u30c8\u3059\u308b Java \u30d5\u30a3\u30fc\u30eb\u30c9\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\uff09\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `order` \u5c5e\u6027\u306b `BEFORE` \u3092\u30bb\u30c3\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u307e\u305a\u30b7\u30fc\u30b1\u30f3\u30b9\u304b\u3089\u5024\u3092\u53d6\u5f97\u3057\u3066\u304b\u3089 `INSERT` \u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n## \u66f4\u65b0\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/18d54c18-639a-7c84-f0b2-5eb22118d9ad.jpeg)\n\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String value;\n    \n    public TestTable(int id, String value) {\n        this.id = id;\n        this.value = value;\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <update id=\"updateTest\">\n    update test_table\n       set value = #{value}\n     where id = #{id}\n  </update>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(1, \"update\");\n                \n                session.insert(\"sample.mybatis.updateTest\", table);\n                session.commit();\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.updateTest  - ==>  Preparing: update test_table set value = ? where id = ? \n[DEBUG] s.m.updateTest  - ==> Parameters: update(String), 1(Integer)\n[DEBUG] s.m.updateTest  - <==    Updates: 1\n```\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/23ac8760-156a-1919-69e2-e58fcd83e1eb.jpeg)\n\n- `<update>` \u30bf\u30b0\u3067 `UPDATE` \u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n## \u524a\u9664\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/c00fcd11-5fb1-ed5d-1e34-a56c0c6faaa2.jpeg)\n\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String value;\n    \n    public TestTable(int id) {\n        this.id = id;\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <delete id=\"deleteTest\">\n    delete from test_table where id = #{id}\n  </delete>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                TestTable table = new TestTable(2);\n                \n                session.insert(\"sample.mybatis.deleteTest\", table);\n                session.commit();\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.deleteTest  - ==>  Preparing: delete from test_table where id = ? \n[DEBUG] s.m.deleteTest  - ==> Parameters: 2(Integer)\n[DEBUG] s.m.deleteTest  - <==    Updates: 1\n```\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f7c8ce53-9588-d5b7-fa7f-888449785f33.jpeg)\n\n- `<delete>` \u30bf\u30b0\u3067 `DELETE` \u6587\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n## \u30d0\u30c3\u30c1\u66f4\u65b0\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001 SQL \u3092\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b `PreparedStatement` \u3092\u751f\u6210\u3057\u3066 SQL \u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u767a\u884c\u3057\u3066\u3044\u308b\u3002\n\n\u66f4\u65b0\u4ef6\u6570\u304c\u591a\u304f\u306a\u308b\u5834\u5408\u3001\u3053\u308c\u306f\u975e\u5e38\u306b\u52b9\u7387\u304c\u60aa\u3044\u3002\n\nMyBatis \u3067\u306f\u3001\u8a2d\u5b9a\u306b\u3088\u308a `PreparedStatement` \u306e\u4f7f\u3044\u56de\u3057\u3084\u3001\u30d0\u30c3\u30c1\u66f4\u65b0\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n\n  <insert id=\"insertTest\">\n    insert into test_table (value) values (#{value})\n  </insert>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                for (int i=0; i<3; i++) {\n                    TestTable t = new TestTable(\"value-\" + i);\n                    int updateCount = session.insert(\"sample.mybatis.insertTest\", t);\n                    System.out.println(\"updateCount = \" + updateCount);\n                }\n                \n                session.commit();\n            }\n        }\n    }\n}\n```\n\n- 3\u56de\u30eb\u30fc\u30d7\u3057\u3066\u3001 `INSERT` \u3092\u5b9f\u884c\u3059\u308b\u5b9f\u88c5\u3002\n\n### \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-0(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-1(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-2(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n```\n\n- \u6bce\u56de `PreparedStatement` \u304c\u751f\u6210\u3055\u308c\u3066\u3001 SQL \u304c\u767a\u884c\u3055\u308c\u3066\u3044\u308b\u3002\n\n### PreparedStatement \u3092\u518d\u5229\u7528\u3059\u308b\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"defaultExecutorType\" value=\"REUSE\"/>\n  </settings>\n  \n  ...\n</configuration>\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-0(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==> Parameters: value-1(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n[DEBUG] s.m.insertTest  - ==> Parameters: value-2(String)\n[DEBUG] s.m.insertTest  - <==    Updates: 1\nupdateCount = 1\n```\n\n- \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067 `defaultExecutorType` \u306b `REUSE` \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n- `PreparedStatement` \u306e\u751f\u6210\u306f\uff11\u56de\u3060\u3051\u306b\u306a\u308b\u3002\n- SQL \u306e\u767a\u884c\u306f\u6bce\u56de\u884c\u308f\u308c\u3066\u3044\u308b\u3002\n\n### \u30d0\u30c3\u30c1\u66f4\u65b0\u306b\u3059\u308b\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <settings>\n    <setting name=\"defaultExecutorType\" value=\"BATCH\"/>\n  </settings>\n  \n  ...\n</configuration>\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.insertTest  - ==>  Preparing: insert into test_table (value) values (?) \n[DEBUG] s.m.insertTest  - ==> Parameters: value-0(String)\nupdateCount = -2147482646\n[DEBUG] s.m.insertTest  - ==> Parameters: value-1(String)\nupdateCount = -2147482646\n[DEBUG] s.m.insertTest  - ==> Parameters: value-2(String)\nupdateCount = -2147482646\n```\n\n- `defaultExecutorType` \u3092 `BATCH` \u306b\u3059\u308b\u3068\u30d0\u30c3\u30c1\u66f4\u65b0\u306b\u306a\u308b\u3002\n- SQL \u306e\u767a\u884c\u306f\u6700\u5f8c\u306b\u307e\u3068\u3081\u3066\u884c\u308f\u308c\u308b\u3002\n- \u306a\u306e\u3067\u3001\u66f4\u65b0\u4ef6\u6570\u306f\u53d6\u5f97\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n### SqlSession \u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306b\u6307\u5b9a\u3059\u308b\n\u30d0\u30c3\u30c1\u66f4\u65b0\u306b\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8a2d\u5b9a\u306f\u3001 `SqlSession` \u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306e\u5f15\u6570\u3067\u3082\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n```java\nimport org.apache.ibatis.session.ExecutorType;\n\n...\n\nSqlSession session = factory.openSession(ExecutorType.BATCH);\n```\n\n- `openSession()` \u306e\u5f15\u6570\u306b `ExecutorType` \u3092\u6e21\u3059\u3053\u3068\u3067\u6307\u5b9a\u3067\u304d\u308b\u3002\n- \u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3088\u308a\u3082\u512a\u5148\u3055\u308c\u308b\u3002\n\n# Mapper\n\u3053\u3053\u307e\u3067\u306f\u3001 `SqlSession` \u306b\u76f4\u63a5\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8 ID \u3068\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u65b9\u6cd5\u3067 SQL \u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u3002\n\nMyBatis \u306b\u306f\u3001\u3053\u308c\u3068\u306f\u5225\u306b Mapper \u3068\u3044\u3046\u4ed5\u7d44\u307f\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nMapper \u3092\u4f7f\u3046\u3068\u3001 `SqlSession` \u3092\u76f4\u63a5\u4f7f\u3046\u3088\u308a\u578b\u5b89\u5168\u306b\u306a\u308b\u3002\n\n\u57fa\u672c\u7684\u306b\u3053\u306e Mapper \u3092\u4f7f\u7528\u3057\u305f\u65b9\u6cd5\u306e\u65b9\u304c\u63a8\u5968\u3063\u307d\u3044\u3002\n\uff08\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u81ea\u7136\u3068 Mapper \u5358\u4f4d\u306b\u306a\u308b\u306e\u3067\u3001\u7ba1\u7406\u3082\u3057\u3084\u3059\u304f\u306a\u308b\u3063\u307d\u3044\uff09\n\n## \u57fa\u672c\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/305fd414-5fd7-e525-017a-000b9180b520.jpeg)\n\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String string;\n    private int number;\n\n    @Override\n    public String toString() {\n        return \"TestTable [id=\" + id + \", string=\" + string + \", number=\" + number + \"]\";\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.TestTableMapper\"> <!-- \u2605Mapper \u306e FQCN \u3092 namespace \u306b\u3059\u308b -->\n  \n  <select id=\"selectAll\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n  </select>\n</mapper>\n```\n\n```java:TestTableMapper.java\npackage sample.mybatis;\n\nimport java.util.List;\n\n// \u2605 Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\npublic interface TestTableMapper {\n    \n    // \u2605\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID \u3068\u540c\u3058\u540d\u524d\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\n    List<TestTable> selectAll();\n}\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                // \u2605Mapper \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\n                TestTableMapper mapper = session.getMapper(TestTableMapper.class);\n                \n                mapper.selectAll().forEach(System.out::println);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.T.selectAll - ==>  Preparing: select * from test_table \n[DEBUG] s.m.T.selectAll - ==> Parameters: \n[DEBUG] s.m.T.selectAll - <==      Total: 3\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=2, string=fuga, number=200]\nTestTable [id=3, string=piyo, number=300]\n```\n\n- Mapper \u3092\u5229\u7528\u3059\u308b\u5834\u5408\u3001\u5c02\u7528\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\uff08`TestTableMapper`\uff09\u3002\n    - \u3053\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3068\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5404\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u304c\u5bfe\u5fdc\u3059\u308b\u3088\u3046\u306b\u305d\u308c\u305e\u308c\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n    - \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e\u65b9\u306f\u3001 `namespace` \u3092\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e FQCN \u306b\u3059\u308b\uff08`sample.mybatis.TestTableMapper`\uff09\u3002\n    - \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8ID \u3068\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u540d\u3092\u4e00\u81f4\u3055\u305b\u308b\uff08`selectAll`\uff09\u3002\n    - \u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u3001\u30e1\u30bd\u30c3\u30c9\u306b\u5f15\u6570\u3092\u6e21\u3059\u3088\u3046\u306b\u5b9a\u7fa9\u3059\u308b\u3002\n- Mapper \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001 `SqlSession` \u306e `getMapper()` \u30e1\u30bd\u30c3\u30c9\u3067\u53d6\u5f97\u3059\u308b\u3002\n\n## \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8907\u6570\u306e\u5f15\u6570\u306b\u5206\u3051\u3066\u6e21\u3059\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.TestTableMapper\">\n  \n  <select id=\"selectByStringOrNumber\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n     where string = #{string}\n        or number = #{number}\n  </select>\n</mapper>\n```\n\n```java:TestTableMapper.java\npackage sample.mybatis;\n\nimport java.util.List;\n\nimport org.apache.ibatis.annotations.Param;\n\npublic interface TestTableMapper {\n    \n    List<TestTable> selectByStringOrNumber(\n        @Param(\"string\") String string,\n        @Param(\"number\") int number\n    );\n}\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                TestTableMapper mapper = session.getMapper(TestTableMapper.class);\n                \n                mapper.selectByStringOrNumber(\"hoge\", 300).forEach(System.out::println);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.T.selectByStringOrNumber - ==>  Preparing: select * from test_table where string = ? or number = ? \n[DEBUG] s.m.T.selectByStringOrNumber - ==> Parameters: hoge(String), 300(Integer)\n[DEBUG] s.m.T.selectByStringOrNumber - <==      Total: 2\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=3, string=piyo, number=300]\n```\n\n- \u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8907\u6570\u5b58\u5728\u3059\u308b\u30b1\u30fc\u30b9\u3067\u3001\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3092\u305d\u308c\u305e\u308c\u5206\u3051\u3066\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f `@Param` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5f15\u6570\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- `@Param` \u306e `value` \u306b\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n# \u52d5\u7684 SQL\n\u6761\u4ef6\u306b\u5408\u308f\u305b\u3066 SQL \u3092\u52d5\u7684\u306b\u7d44\u307f\u7acb\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n## if\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ec329f27-aa9f-4ec7-4334-1419fb41e245.jpeg)\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n     where string_value = 'hoge'\n     <if test=\"numberValue != null\"> <!-- \u2605if \u30bf\u30b0\u3067\u6761\u4ef6\u5206\u5c90 -->\n       and number_value = #{numberValue}\n     </if>\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                session\n                    .selectList(\"sample.mybatis.selectTest\") // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u672a\u8a2d\u5b9a\n                    .forEach(System.out::println);\n                \n                Map<String, Object> param = new HashMap<>();\n                param.put(\"numberValue\", 100);\n                \n                session\n                    .selectList(\"sample.mybatis.selectTest\", param) // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\n                    .forEach(System.out::println);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where string_value = 'hoge' \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 2\nTestTable [id=1, stringValue=hoge, numberValue=100]\nTestTable [id=2, stringValue=hoge, numberValue=200]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where string_value = 'hoge' and number_value = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: 100(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=1, stringValue=hoge, numberValue=100]\n```\n\n- `<if>` \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u305f\u3068\u304d\u3060\u3051 SQL \u3092\u8ffd\u52a0\u3055\u305b\u305f\u308a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n- `test` \u5c5e\u6027\u3067\u6761\u4ef6\u5f0f\u3092\u8a18\u8ff0\u3059\u308b\u3002\n    - \u3053\u306e\u4e2d\u3067\u306f\u3001\u691c\u7d22\u6761\u4ef6\u3067\u6e21\u3059\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u3092\u53c2\u7167\u3067\u304d\u308b\u3002\n    - AND \u3084 OR \u6761\u4ef6\u3092\u8a18\u8ff0\u3059\u308b\u3068\u304d\u306f\u3001 `and`, `or` \u3092\u4f7f\u7528\u3059\u308b\uff08`&&`, `||` \u3067\u306f\u306a\u3044\uff01\uff09\u3002\n\n## choose\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/505c3500-ddcf-4bd4-86a3-43272dd2d537.jpeg)\n\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n    <choose>\n      <when test=\"value == null\">\n        where value is null\n      </when>\n      <otherwise>\n        where value = #{value}\n      </otherwise>\n    </choose>\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                TestTable testTable = session.selectOne(\"sample.mybatis.selectTest\");\n                System.out.println(testTable);\n                \n                Map<String, Object> param = new HashMap<>();\n                param.put(\"value\", \"hoge\");\n\n                testTable = session.selectOne(\"sample.mybatis.selectTest\", param);\n                System.out.println(testTable);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where value is null \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=2, value=null]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where value = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: hoge(String)\n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=1, value=hoge]\n```\n\n- `<choose>` \u30bf\u30b0\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u8907\u6570\u306e\u9078\u629e\u80a2\u306e\u3046\u3061\uff11\u3064\u3060\u3051\u3092\u9069\u7528\u3059\u308b\u3068\u3044\u3046\u6761\u4ef6\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- `<when>` \u30bf\u30b0\u3067\u3001\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u305f\u5834\u5408\u306e SQL \u3092\u8a18\u8ff0\u3059\u308b\u3002\n- `<otherwise>` \u30bf\u30b0\u3067\u3001\u305d\u308c\u4ee5\u5916\u306e\u6761\u4ef6\u304c\u5168\u3066\u6e80\u305f\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u306e SQL \u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n## where\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/71aa6f21-47f9-49b6-f4ab-21d6ddd70ce4.jpeg)\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n    <where>\n      <if test=\"string != null\">\n        and string = #{string}\n      </if>\n      <if test=\"number != null\">\n        and number = #{number}\n      </if>\n    </where>\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u7a7a\u3067\u5b9f\u884c\n                Map<String, Object> param = new HashMap<>();\n                selectAndPrint(session, param);\n                \n                // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u306b string \u3060\u3051\u6307\u5b9a\u3057\u3066\u5b9f\u884c\n                param = new HashMap<>();\n                param.put(\"string\", \"hoge\");\n                selectAndPrint(session, param);\n                \n                // \u2605\u30d1\u30e9\u30e1\u30fc\u30bf\u306b string \u3068 number \u3092\u6307\u5b9a\u3057\u3066\u5b9f\u884c\n                param = new HashMap<>();\n                param.put(\"string\", \"hoge\");\n                param.put(\"number\", 200);\n                selectAndPrint(session, param);\n            }\n        }\n    }\n    \n    private static void selectAndPrint(SqlSession session, Map<String, Object> param) {\n        session\n            .selectList(\"sample.mybatis.selectTest\", param)\n            .forEach(System.out::println);\n        System.out.println();\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table \n[DEBUG] s.m.selectTest  - ==> Parameters: \n[DEBUG] s.m.selectTest  - <==      Total: 4\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=2, string=hoge, number=200]\nTestTable [id=3, string=fuga, number=200]\nTestTable [id=4, string=piyo, number=300]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table WHERE string = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: hoge(String)\n[DEBUG] s.m.selectTest  - <==      Total: 2\nTestTable [id=1, string=hoge, number=100]\nTestTable [id=2, string=hoge, number=200]\n\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table WHERE string = ? and number = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: hoge(String), 200(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 1\nTestTable [id=2, string=hoge, number=200]\n```\n\n- `<where>` \u30bf\u30b0\u3092\u4f7f\u3046\u3068\u3001\u5b50\u8981\u7d20\u304c\u4f55\u3089\u304b\u306e\u6587\u5b57\u5217\u304c\u5b58\u5728\u3057\u305f\u5834\u5408\u306b\u9650\u308a `WHERE` \u53e5\u3092\u5148\u982d\u306b\u8ffd\u52a0\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n- \u307e\u305f\u3001 `<where>` \u30bf\u30b0\u5185\u306e\u6587\u5b57\u5217\u304c `AND` \u304b `OR` \u3067\u59cb\u307e\u308b\u5834\u5408\u3001\u81ea\u52d5\u3067\u305d\u306e\u8a18\u8ff0\u304c\u9664\u53bb\u3055\u308c\u308b\u3002\n- \u3053\u306e\u52d5\u304d\u3092 `<if>` \u306a\u3069\u3060\u3051\u3067\u5b9f\u73fe\u4f7f\u7528\u3068\u3059\u308b\u3068\u3001\u7d50\u69cb\u8907\u96d1\u306a\u8a18\u8ff0\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\n### trim \u30bf\u30b0\u3067\u7f6e\u304d\u63db\u3048\u308b\n\u4e0a\u8a18\u306e `<where>` \u3092\u4f7f\u3063\u305f\u5b9a\u7fa9\u306f\u3001 `<trim>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n    <trim prefix=\"where\" prefixOverrides=\"AND|OR\">\n      <if test=\"string != null\">\n        and string = #{string}\n      </if>\n      <if test=\"number != null\">\n        and number = #{number}\n      </if>\n    </trim>\n  </select>\n</mapper>\n```\n\n- `prefix` \u5c5e\u6027\u306b\u3001\u5148\u982d\u306b\u8ffd\u52a0\u3059\u308b\u6587\u5b57\u5217\u3002\n- `prefixOverrides` \u5c5e\u6027\u306b\u3001\u5148\u982d\u304b\u3089\u9664\u53bb\u3059\u308b\u6587\u5b57\u5217\u3092\u30d1\u30a4\u30d7(`|`)\u533a\u5207\u308a\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n## set\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/48202c45-9ce2-f983-f42f-53ce69125128.jpeg)\n\n```java:TestTable.java\npackage sample.mybatis;\n\npublic class TestTable {\n    private int id;\n    private String string;\n    private Integer number;\n    \n    public TestTable id(int id) {\n        this.id = id;\n        return this;\n    }\n    \n    public TestTable string(String string) {\n        this.string = string;\n        return this;\n    }\n    \n    public TestTable number(int number) {\n        this.number = number;\n        return this;\n    }\n}\n```\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <update id=\"updateTest\">\n    update test_table\n    <set>\n      <if test=\"string != null\">\n        string = #{string},\n      </if>\n      <if test=\"number != null\">\n        number = #{number},\n      </if>\n    </set>\n    where id = #{id}\n  </update>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                session.update(\"sample.mybatis.updateTest\",\n                        new TestTable().id(1).number(555));\n                \n                session.update(\"sample.mybatis.updateTest\",\n                        new TestTable().id(3).string(\"update\").number(999));\n                \n                session.commit();\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.updateTest  - ==>  Preparing: update test_table SET number = ? where id = ? \n[DEBUG] s.m.updateTest  - ==> Parameters: 555(Integer), 1(Integer)\n[DEBUG] s.m.updateTest  - <==    Updates: 1\n[DEBUG] s.m.updateTest  - ==>  Preparing: update test_table SET string = ?, number = ? where id = ? \n[DEBUG] s.m.updateTest  - ==> Parameters: update(String), 999(Integer), 3(Integer)\n[DEBUG] s.m.updateTest  - <==    Updates: 1\n```\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/077c9257-bbd6-7ff7-cacf-9c24ce571e8b.jpeg)\n\n- `<set>` \u30bf\u30b0\u3092\u4f7f\u3046\u3068\u3001\u5185\u90e8\u306e\u6587\u5b57\u5217\u304c\u7a7a\u3067\u306a\u3044\u5834\u5408\u306b\u3001\u5148\u982d\u306b `SET` \u53e5\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n- \u307e\u305f\u3001\u672b\u5c3e\u306e\u30ab\u30f3\u30de\uff08`,`\uff09\u304c\u81ea\u52d5\u3067\u9664\u53bb\u3055\u308c\u308b\u3002\n\n### trim \u30bf\u30b0\u3067\u7f6e\u304d\u63db\u3048\u308b\n\n`<where>` \u306e\u3068\u304d\u3068\u540c\u3058\u3088\u3046\u306b\u3001 `<trim>` \u3067\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <update id=\"updateTest\">\n    update test_table\n    <trim prefix=\"set\" suffixOverrides=\",\">\n      <if test=\"string != null\">\n        string = #{string},\n      </if>\n      <if test=\"number != null\">\n        number = #{number},\n      </if>\n    </trim>\n    where id = #{id}\n  </update>\n</mapper>\n```\n\n- `suffixOverrides` \u5c5e\u6027\u3067\u3001\u672b\u5c3e\u306e\u524a\u9664\u3059\u308b\u6587\u5b57\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n## foreach\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/3179a412-c4b3-d992-78af-90ebab830699.jpeg)\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    select *\n      from test_table\n     where id in\n     <foreach collection=\"list\" item=\"item\"\n              open=\"(\" separator=\",\" close=\")\">\n       #{item}\n     </foreach>\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\nimport java.util.Arrays;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                session\n                    .selectList(\"sample.mybatis.selectTest\", Arrays.asList(1, 3, 5))\n                    .forEach(System.out::println);\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where id in ( ? , ? , ? ) \n[DEBUG] s.m.selectTest  - ==> Parameters: 1(Integer), 3(Integer), 5(Integer)\n[DEBUG] s.m.selectTest  - <==      Total: 3\nTestTable [id=1]\nTestTable [id=3]\nTestTable [id=5]\n```\n\n- `<foreach>` \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u53cd\u5fa9\u51e6\u7406\u3057\u306a\u304c\u3089 SQL \u3092\u69cb\u7bc9\u3067\u304d\u308b\u3002\n- `collection` \u5c5e\u6027\u306b\u3001\u53cd\u5fa9\u51e6\u7406\u3059\u308b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `list` \u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u53cd\u5fa9\u51e6\u7406\u53ef\u80fd\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3057\u305f\u3068\u304d\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5229\u7528\u3067\u304d\u308b\u53c2\u7167\u540d\uff08[\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d](#\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d) \u3092\u53c2\u7167\uff09\u3002\n- `item` \u5c5e\u6027\u3067\u3001\u53cd\u5fa9\u4e2d\u306e\u5404\u8981\u7d20\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u5909\u6570\u540d\u3092\u5ba3\u8a00\u3059\u308b\u3002\n- `open` \u5c5e\u6027\u306f\u3001\u53cd\u5fa9\u306e\u5148\u982d\u306b\u8ffd\u52a0\u3059\u308b\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `separator` \u5c5e\u6027\u306f\u3001\u5404\u53cd\u5fa9\u7d50\u679c\u306e\u9593\u306b\u633f\u5165\u3059\u308b\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `close` \u5c5e\u6027\u306f\u3001\u53cd\u5fa9\u306e\u6700\u5f8c\u306b\u8ffd\u52a0\u3059\u308b\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `index` \u5c5e\u6027\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u3001\u53cd\u5fa9\u4e2d\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5024\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u5909\u6570\u540d\u3092\u5ba3\u8a00\u3067\u304d\u308b\u3002\n- \u304a\u3082\u306b `IN` \u53e5\u306e\u52d5\u7684\u751f\u6210\u306b\u5229\u7528\u3059\u308b\u3002\n\n## bind\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis\">\n  \n  <select id=\"selectTest\" resultType=\"sample.mybatis.TestTable\">\n    <bind name=\"parameter\" value=\"'@@@' + _parameter + '@@@'\"/>\n    select *\n      from test_table\n     where value = #{parameter}\n  </select>\n</mapper>\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                session.selectList(\"sample.mybatis.selectTest\", \"abc\");\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.selectTest  - ==>  Preparing: select * from test_table where value = ? \n[DEBUG] s.m.selectTest  - ==> Parameters: @@@abc@@@(String)\n```\n\n- `<bind>` \u30bf\u30b0\u3067\u3001\u4e00\u6642\u5909\u6570\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- `name` \u5c5e\u6027\u3067\u3001\u4e00\u6642\u5909\u6570\u306e\u540d\u524d\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n- `value` \u5c5e\u6027\u3067\u3001 OGNL \u5f0f\u3092\u4f7f\u3063\u305f\u5024\u306e\u5b9a\u7fa9\u304c\u3067\u304d\u308b\u3002\n- `_parameter` \u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6e21\u3057\u305f\u5024\u3092\u53c2\u7167\u3067\u304d\u308b\u6697\u9ed9\u5909\u6570\uff08[\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d](#\u7279\u6b8a\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u540d) \u3092\u53c2\u7167\uff09\u3002\n\n# \u30d7\u30ed\u30b0\u30e9\u30e0\u3067 SQL \u3092\u52d5\u7684\u751f\u6210\u3059\u308b\nMyBatis \u306b\u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066 SQL \u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u3057\u304b\u3057\u3001\u6587\u5b57\u5217\u9023\u7d50\u3067 SQL \u3092\u7d44\u307f\u7acb\u3066\u3066\u3044\u308b\u3068\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3068\u304b `AND`, `OR` \u533a\u5207\u308a\u306a\u3069\u3001\u6ce8\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u7d30\u304b\u3044\u554f\u984c\u304c\u3044\u308d\u3044\u308d\u3042\u308b\u3002\n\u305d\u306e\u3078\u3093\u306e\u9762\u5012\u306a\u90e8\u5206\u3092\u96a0\u853d\u3057\u305f API \u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n```xml:sample_mapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.TestTableMapper\"> <!-- \u2605Mapper \u3092 namespace \u306b\u6307\u5b9a -->\n</mapper>\n```\n\n```java:TestTableMapper.java\npackage sample.mybatis;\n\nimport java.util.List;\n\nimport org.apache.ibatis.annotations.SelectProvider;\n\n// \u2605Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u3064\u304f\u308b\npublic interface TestTableMapper {\n    // \u2605@SelectProvider \u3067 SQL \u3092\u751f\u6210\u3059\u308b\u30af\u30e9\u30b9\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\n    @SelectProvider(type=TestTableSqlProvider.class, method=\"getSelectTestSql\")\n    List<TestTable> selectTest();\n}\n```\n\n```java:TestTableSqlProvider.java\npackage sample.mybatis;\n\nimport org.apache.ibatis.jdbc.SQL;\n\n// \u2605SQL \u3092\u751f\u6210\u3059\u308b\u30af\u30e9\u30b9\u3002\npublic class TestTableSqlProvider {\n    \n    // \u2605SQL \u3092\u751f\u6210\u3059\u308b\u30e1\u30bd\u30c3\u30c9\n    public String getSelectTestSql() {\n        // \u2605SQL \u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u3001 SQL \u3092\u751f\u6210\u3059\u308b\n        SQL sql = new SQL() {{ // \u2605\u533f\u540d\u30af\u30e9\u30b9\u3067\u751f\u6210\n            SELECT(\"id, hoge_value\");\n            SELECT(\"fuga_value\");\n            SELECT(\"piyo_value\");\n            FROM(\"test_table\");\n        }};\n        \n        return sql.toString();\n    }\n}\n```\n\n```java:Main.java\npackage sample.mybatis;\n\nimport java.io.InputStream;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\npublic class Main {\n    \n    public static void main(String[] args) throws Exception {\n        try (InputStream in = Main.class.getResourceAsStream(\"/mybatis-config.xml\")) {\n            SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(in);\n            \n            try (SqlSession session = factory.openSession()) {\n                TestTableMapper mapper = session.getMapper(TestTableMapper.class);\n                mapper.selectTest();\n            }\n        }\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[DEBUG] s.m.T.selectTest - ==>  Preparing: SELECT id, hoge_value, fuga_value, piyo_value FROM test_table WHERE (hoge_value is not null) \n[DEBUG] s.m.T.selectTest - ==> Parameters: \n```\n\n- Mapper \u306e\u30e1\u30bd\u30c3\u30c9\u3092 `@SelectProvider` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n    - `type` \u306b SQL \u3092\u751f\u6210\u3059\u308b\u30af\u30e9\u30b9\u3092\u3001 `method` \u306b SQL \u3092\u751f\u6210\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `INSERT` \u3084 `UPDATE` \u306b\u306f `@InsertProvider` \u3084 `@UpdateProvider` \u304c\u3042\u308b\u3002\n- SQL \u306e\u751f\u6210\u306b\u306f\u3001 `org.apache.ibatis.jdbc.SQL` \u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3059\u308b\u3002\n- `SQL` \u30af\u30e9\u30b9\u3092\u533f\u540d\u30af\u30e9\u30b9\u3068\u3057\u3066 new \u3057\u3066\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u521d\u671f\u5316\u30d6\u30ed\u30c3\u30af\u5185\u3067 `SELECT()` \u3084 `FROM()` \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066 SQL \u3092\u69cb\u7bc9\u3059\u308b\u3002\n    - \u5404\u5f15\u6570\u306b\u306f\u6587\u5b57\u5217\u3067 SQL \u306e\u90e8\u54c1\u3092\u6e21\u3059\u3002\n    - \u3053\u306e\u969b\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u306a\u3069\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8ffd\u52a0\u3055\u308c\u305f\u308a\u3059\u308b\u3002\n- \u751f\u6210\u3057\u305f `SQL` \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e `toString()` \u30e1\u30bd\u30c3\u30c9\u3067\u69cb\u7bc9\u3057\u305f SQL \u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n## \u5404\u30e1\u30bd\u30c3\u30c9\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\n### SELECT\n```java:\nnew SQL() {{\n    SELECT(\"foo\");\n    SELECT(\"bar\");\n    SELECT(\"fizz, buzz\");\n    FROM(\"foo_table\");\n}};\n```\n\n```sql:\nSELECT foo, bar, fizz, buzz FROM foo_table \n```\n\n- \u9023\u7d9a\u3057\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u9805\u76ee\u304c\u30ab\u30f3\u30de\u3067\u52dd\u624b\u306b\u533a\u5207\u3089\u308c\u308b\u3002\n- \u660e\u793a\u7684\u306b\u30ab\u30f3\u30de\u533a\u5207\u308a\u306e\u6587\u5b57\u5217\u3092\u6e21\u3057\u3066\u3082OK\u3002\n- \u672b\u5c3e\u306b\u4e0d\u8981\u306a\u30ab\u30f3\u30de\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u9664\u53bb**\u3057\u3066\u304f\u308c\u306a\u3044**\u3002\n\n### FROM\n```java:\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    FROM(\"bar_table\");\n}};\n```\n\n```sql:\nSELECT * FROM foo_table, bar_table \n```\n\n- `FROM` \u3092\u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067 FROM \u53e5\u304c\u5217\u6319\u3055\u308c\u308b\u3002\n\n### WHERE\n```java:\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    WHERE(\"foo = ?\");\n    WHERE(\"bar = ?\");\n    AND();\n    WHERE(\"fizz = ?\");\n    WHERE(\"buzz = ?\");\n    OR();\n    WHERE(\"hoge = ?\");\n    WHERE(\"fuga = ?\");\n}};\n```\n\n```sql:\nSELECT *\n  FROM foo_table\n WHERE (\n       foo = ?\n       AND bar = ?\n ) AND (\n       fizz = ?\n       AND buzz = ?\n )  OR (\n       hoge = ?\n       AND fuga = ?\n ) \n```\n\n- `WHERE()` \u30e1\u30bd\u30c3\u30c9\u3067 `WHERE` \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n- \u9023\u7d9a\u3055\u305b\u308b\u3068 `AND` \u6761\u4ef6\u3067\u9023\u7d50\u3055\u308c\u308b\u3002\n- `AND()` \u304a\u3088\u3073 `OR()` \u30e1\u30bd\u30c3\u30c9\u3067 `AND`, `OR` \u3067\u9023\u7d50\u3067\u304d\u308b\u3002\n\n### INNER_JOIN\n```java:\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    INNER_JOIN(\"bar_table on bar_table.id = foo_table.bar_id\");\n    INNER_JOIN(\"fizz_table on fizz_table.id = bar_table.fizz_id\");\n}};\n```\n\n```sql:\n    SELECT *\n      FROM foo_table\nINNER JOIN bar_table\n        on bar_table.id = foo_table.bar_id\nINNER JOIN fizz_table\n        on fizz_table.id = bar_table.fizz_id \n```\n\n- `INNER_JOIN()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001 `INNER JOIN` \u53e5\u3092\u8ffd\u52a0\u3067\u304d\u308b\u3002\n- \u7d50\u5408\u6761\u4ef6\u306f\u9811\u5f35\u3063\u3066\u6587\u5b57\u5217\u3067\u7d44\u307f\u7acb\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3063\u307d\u3044\u3002\n\n### ORDER_BY\n```java\nnew SQL() {{\n    SELECT(\"*\");\n    FROM(\"foo_table\");\n    ORDER_BY(\"foo\");\n    ORDER_BY(\"bar desc\");\n}};\n```\n\n```sql\nSELECT * FROM foo_table ORDER BY foo, bar desc \n```\n\n- `ORDER_BY()` \u30e1\u30bd\u30c3\u30c9\u3067 `ORDER BY` \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n- \u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n### GROUP_BY\n```java\nnew SQL() {{\n    SELECT(\"foo, bar\");\n    FROM(\"foo_table\");\n    GROUP_BY(\"foo\");\n    GROUP_BY(\"bar\");\n}};\n```\n\n```sql\nSELECT foo, bar FROM foo_table GROUP BY foo, bar \n```\n\n- `GROUP_BY()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001 `GROUP BY` \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n- \u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n### HAVING\n```java\nnew SQL() {{\n    SELECT(\"foo, count(*)\");\n    FROM(\"foo_table\");\n    GROUP_BY(\"foo\");\n    HAVING(\"0 < count(*)\");\n    HAVING(\"count(*) < 100\");\n}};\n```\n\n```sql\n  SELECT foo\n        ,count(*)\n    FROM foo_table\nGROUP BY foo\n  HAVING (\n         0 < count(foo)\n         AND count(foo) < 100\n  )\n```\n\n- `HAVING()` \u30e1\u30bd\u30c3\u30c9\u3067 `HAVING` \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n- `WHERE()` \u3068\u540c\u3058\u3088\u3046\u306a\u52d5\u4f5c\u3092\u3059\u308b\uff08\u9023\u7d9a\u3055\u305b\u308b\u3068 `AND` \u3067\u9023\u7d50\u3055\u308c\u308b\uff09\u3002\n\n### INSERT_INTO, VALUES\n```java\nnew SQL() {{\n    INSERT_INTO(\"foo_table\");\n    VALUES(\"foo_value\", \"#{foo_value}\");\n    VALUES(\"fizz_value, buzz_value\", \"#{fizz_value}, #{buzz_value}\");\n}};\n```\n\n```sql\nINSERT INTO foo_table (foo_value, fizz_value, buzz_value) VALUES (?, ?, ?) \n```\n\n- `INSERT_INTO()` \u30e1\u30bd\u30c3\u30c9\u3067 `INSERT` \u6587\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n- `VALUES()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u767b\u9332\u3059\u308b\u9805\u76ee\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n    - \u7b2c\u4e00\u5f15\u6570\u306b\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u9805\u76ee\u306e\u540d\u524d\u3092\u3001\n    - \u7b2c\u4e8c\u5f15\u6570\u306b `VALUES` \u53e5\u3067\u6307\u5b9a\u3059\u308b\u5024\u3092\u6e21\u3059\u3002\n    - \u8907\u6570\u8a18\u8ff0\u3059\u308b\u3068\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n### UPDATE, SET\n```java\nnew SQL() {{\n    UPDATE(\"foo_table\");\n    SET(\"foo_value = #{foo_value}\");\n    SET(\"bar_value = #{bar_value}\");\n    WHERE(\"id = #{id}\");\n}};\n```\n\n```sql\nUPDATE foo_table SET foo_value = ?, bar_value = ? WHERE (id = ?)\n```\n\n- `UPDATE()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001 `UPDATE` \u6587\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n- `SET()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001 `SET` \u53e5\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n    - \u9023\u7d9a\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u81ea\u52d5\u3067\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u306a\u308b\u3002\n\n### DELETE_FROM\n```java\nnew SQL() {{\n    DELETE_FROM(\"foo_table\");\n    WHERE(\"id = #{id}\");\n}};\n```\n\n```sql\nDELETE FROM foo_table WHERE (id = ?) \n```\n\n- `DELETE_FROM()` \u30e1\u30bd\u30c3\u30c9\u3067 `DELETE` \u6587\u3092\u751f\u6210\u3067\u304d\u308b\u3002\n\n# Spring Boot \u3068\u9023\u643a\u3059\u308b\nSpring Boot \u7528\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3048\u3070\u7c21\u5358\u306b\u9023\u643a\u3067\u304d\u308b\u3002\n\n**test_table**\n\n![mybatis.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/800cf20e-a8bf-3e57-20c8-8551801556a9.jpeg)\n\n```text:\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-build.gradle\n`-src/main/\n  |-java/\n  |  `-sample/mybatis/springboot/\n  |    |-Main.java\n  |    `-TestTableMapper.java\n  `-resources/\n     |-application.properties\n     |-mybatis-config.xml\n     `-TestTableMapper.xml\n```\n\n```groovy:build.gradle\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.3.1.RELEASE'\n    }\n}\n\napply plugin: 'java'\napply plugin: 'spring-boot'\n\nsourceCompatibility = '1.8'\ntargetCompatibility = '1.8'\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter'\n    // \u2605MyBatis \u306e SpringBoot \u7528\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8aad\u307f\u8fbc\u3080\n    compile 'org.mybatis.spring.boot:mybatis-spring-boot-starter:1.0.0'\n    compile 'mysql:mysql-connector-java:5.1.38'\n}\n```\n\n```properties:application.properties\n# \u2605MyBatis \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\nmybatis.config=mybatis-config.xml\n\n# \u2605\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\nspring.datasource.url=jdbc:mysql://localhost/test\nspring.datasource.username=test\nspring.datasource.password=test\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n```\n\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n  <!-- \u2605\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u7ba1\u7406\u306f Spring Boot \u306b\u4efb\u305b\u308b\u306e\u3067\u3001\u3053\u3061\u3089\u306b\u306f\u8a18\u8ff0\u3057\u306a\u3044 -->\n  <mappers>\n    <mapper resource=\"TestTableMapper.xml\"/>\n  </mappers>\n</configuration>\n```\n\n```xml:TestTableMapper.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n  PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n  \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"sample.mybatis.springboot.TestTableMapper\">\n\n  <select id=\"selectTest\" resultType=\"map\">\n    select * from test_table\n  </select>\n</mapper>\n```\n\n```java:TestTableMapper.java\npackage sample.mybatis.springboot;\n\nimport java.util.List;\nimport java.util.Map;\n\npublic interface TestTableMapper {\n    \n    List<Map<String, Object>> selectTest();\n}\n```\n\n```java:Main.java\npackage sample.mybatis.springboot;\n\nimport java.io.IOException;\n\nimport org.mybatis.spring.SqlSessionTemplate;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n@SpringBootApplication\npublic class Main {\n    \n    public static void main(String[] args) throws IOException {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n    \n    @Autowired\n    private SqlSessionTemplate sqlSession;\n    @Autowired\n    private TestTableMapper mapper;\n    \n    public void method() throws IOException {\n        System.out.println(\"[SqlSessionTemplate]\");\n        this.sqlSession\n            .selectList(\"sample.mybatis.springboot.TestTableMapper.selectTest\")\n            .forEach(System.out::println);\n        \n        System.out.println(\"[TestTableMapper]\");\n        this.mapper\n            .selectTest()\n            .forEach(System.out::println);\n    }\n}\n```\n\n```text:\u5b9f\u884c\u7d50\u679c\n[SqlSessionTemplate]\n{id=1, value=hoge}\n{id=2, value=fuga}\n{id=3, value=piyo}\n\n[TestTableMapper]\n{id=1, value=hoge}\n{id=2, value=fuga}\n{id=3, value=piyo}\n```\n\n- Spring Boot \u3067 MyBatis \u3092\u4f7f\u3046\u5834\u5408\u306f\u3001 `mybatis-spring-boot-starter` \u3092\u4f9d\u5b58\u95a2\u4fc2\u306b\u8ffd\u52a0\u3059\u308b\u3002\n- \u6b21\u306b Spring Boot \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\uff08`application.properties`\uff09\u306b\u3066\u3001 `mybatis.config` \u3068\u3044\u3046\u540d\u524d\u3067 MyBatis \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306f Spring Boot \u306b\u7ba1\u7406\u3057\u3066\u3082\u3089\u3046\u306e\u3067\u3001 Spring Boot \u306e\u65b9\u306b\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u3066\u3001 MyBatis \u306e\u65b9\u306b\u306f\u8a18\u8ff0\u3057\u306a\u3044\u3002\n- `SqlSession` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001 `SqlSessionTemplate` \u3092 `@Autowired` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308c\u3070\u3044\u3044\u3002\n    - `SqlSessionTemplate` \u306e API \u306f `SqlSession` \u3068\u540c\u3058\u3002\n    - `SqlSession` \u3068\u9055\u3044\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u3067\u3001\u7570\u306a\u308b\u30b9\u30ec\u30c3\u30c9\u3084 DAO \u304b\u3089\u4f7f\u3063\u3066\u3082\u554f\u984c\u306a\u3044\u3002\n- Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u3051\u3070\u3001 `@Autowired` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n    - Spring \u306b\u30b9\u30ad\u30e3\u30f3\u3055\u308c\u308b\u5834\u6240\u306b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5165\u308c\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u3002\n    - `Main` \u30af\u30e9\u30b9\u3092 `@MapperScan` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308c\u3070\u3001\u4efb\u610f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e Mapper \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u30b9\u30ad\u30e3\u30f3\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\uff08\u4f8b\uff1a`@MapperScan(\"foo.bar\")`\uff09\u3002\n    - \u3053\u3061\u3089\u3082\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u305f\u3081\u3001\u7570\u306a\u308b\u30b9\u30ec\u30c3\u30c9\u3084 DAO \u304b\u3089\u5229\u7528\u3057\u3066\u3082\u554f\u984c\u306a\u3044\u3002\n\n\n\n\n\n\n# \u53c2\u8003\n- [MyBatis \u2013 MyBatis 3 | \u30a4\u30f3\u30c8\u30ed\u30c0\u30af\u30b7\u30e7\u30f3](https://mybatis.github.io/mybatis-3/ja/index.html)\n- [mybatis-spring \u2013 MyBatis-Spring | \u30a4\u30f3\u30c8\u30ed\u30c0\u30af\u30b7\u30e7\u30f3](http://mybatis.org/spring/ja/index.html)\n- [MyBatis\u3067\u30c0\u30a4\u30ca\u30df\u30c3\u30afSQL\uff08\u52d5\u7684SQL\uff09\u3092\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3084\u308b\uff5cPimp my Code. @wataru420](http://ameblo.jp/wataru420/entry-11135592975.html)\n- [iBATIS - Wikipedia](https://ja.wikipedia.org/wiki/IBATIS)\n- [MyBatis - Wikipedia](https://ja.wikipedia.org/wiki/MyBatis)\n", "tags": ["Java", "MyBatis"]}