{"tags": ["docker1.4.1", "boot2docker1.4.1", "CentOS7.0.1406"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\u3069\u3046\u305b\u306a\u3089CentOS7\u3067\uff01\u3068\u610f\u6c17\u8fbc\u3093\u3060\u306e\u306bsystemctl\u3067\u30a8\u30e9\u30fc\u3002\n\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u3001\u89e3\u6c7a\u7b56\u306f\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\uff08\u9014\u4e2d\u3067\u8ae6\u3081\u305f\uff09\u3067\u3059\u3002\n\nCentOS7\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\n$ docker run -it centos:centos7 /bin/bash\n\n\nsystemd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3069\u3046\u3044\u3046\u7406\u7531\u304b\u307e\u3067\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u6700\u521d\u306fsystemd\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u30b3\u30f3\u30c6\u30ca\u7aef\u672b\u4e0a\u3067\u3001facesystemd\u3068\u5165\u308c\u66ff\u3048\u3066\u3001systemctl\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n# yum swap -y fakesystemd systemd\n.\n.\n.\nError unpacking rpm package systemd-208-11.el7_0.6.x86_64\n  Installing : systemd-208-11.el7_0.6.x86_64                               9/12 \nerror: unpacking of archive failed on file /usr/bin/systemd-detect-virt: cpio: cap_set_file\nerror: systemd-208-11.el7_0.6.x86_64: install failed\n.\n.\n.\n\n# systemctl \nFailed to get D-Bus connection: No connection to service manager.\n\n\u4f7f\u3048\u306a\u3044\u6a21\u69d8\u3002\n\n\u5bfe\u7b56\u3092\u63a2\u3059\n\u63a2\u3059\u3068\u4e0b\u8a18\u30da\u30fc\u30b8\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\nboot2docker\u306a\u3089\u7279\u6a29\u30e2\u30fc\u30c9\uff08--privileged\uff09\u306a\u3089\u3042\u308b\u3044\u306f\uff01\u3068\u3042\u3063\u305f\u306e\u3067\u3001\u65e9\u901f\u5b9f\u65bd\u3057\u307e\u3059\u3002\nhttps://bugs.centos.org/view.php?id=7480\n$ docker run --privileged -it centos:centos7 /bin/bash\n\n\u7d50\u679c\u3001\u5909\u308f\u3089\u305a\u3001\u30a8\u30e9\u30fc\u3002\n\u5408\u308f\u305b\u3066--cap-add=SYS_ADMIN\u5bfe\u5fdc\u3082\u4e00\u5fdc\u8a66\u3057\u3066\u307f\u305f\u3082\u306e\u306e\u7279\u306b\u5909\u308f\u3089\u305a\u3001\u30a8\u30e9\u30fc\u3002\n\n\u8ae6\u3081\u305f\n# uname -a\nLinux 21026139e6fc 3.16.7-tinycore64 #1 SMP Tue Dec 16 23:03:39 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n\n\u304d\u3063\u30683.x\u7cfb\u306b\u306a\u3063\u305f\u304b\u3089\u3001\u3068\u3044\u3046\u30ab\u30fc\u30cd\u30eb\u30ec\u30d9\u30eb\u306e\u304a\u8a71\u306a\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u3002\u3053\u3053\u304b\u3089\u5148\u5177\u4f53\u7684\u306b\u306f\u8abf\u3079\u3066\u307e\u305b\u3093\u3002\nboot2docker\u4e0a\u3067CentOS7\u306f\u7121\u7406\u3068\u3044\u3046\u7d50\u8ad6\u306b\u3057\u3066\u3001\u5927\u4eba\u3057\u304f6\u7cfb\u3092pull\u3057\u3066\u307e\u3059\u3002\n\u3069\u3046\u305b\u306a\u3089CentOS7\u3067\uff01\u3068\u610f\u6c17\u8fbc\u3093\u3060\u306e\u306b`systemctl`\u3067\u30a8\u30e9\u30fc\u3002\n\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u3001\u89e3\u6c7a\u7b56\u306f\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\uff08\u9014\u4e2d\u3067\u8ae6\u3081\u305f\uff09\u3067\u3059\u3002\n\n\n# CentOS7\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\n```Terminal\n$ docker run -it centos:centos7 /bin/bash\n```\n\n## `systemd`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3069\u3046\u3044\u3046\u7406\u7531\u304b\u307e\u3067\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u6700\u521d\u306f`systemd`\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u30b3\u30f3\u30c6\u30ca\u7aef\u672b\u4e0a\u3067\u3001`facesystemd`\u3068\u5165\u308c\u66ff\u3048\u3066\u3001`systemctl`\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\n```Container\n# yum swap -y fakesystemd systemd\n.\n.\n.\nError unpacking rpm package systemd-208-11.el7_0.6.x86_64\n  Installing : systemd-208-11.el7_0.6.x86_64                               9/12 \nerror: unpacking of archive failed on file /usr/bin/systemd-detect-virt: cpio: cap_set_file\nerror: systemd-208-11.el7_0.6.x86_64: install failed\n.\n.\n.\n\n# systemctl \nFailed to get D-Bus connection: No connection to service manager.\n```\n\n\u4f7f\u3048\u306a\u3044\u6a21\u69d8\u3002\n\n\n## \u5bfe\u7b56\u3092\u63a2\u3059\n\u63a2\u3059\u3068\u4e0b\u8a18\u30da\u30fc\u30b8\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\nboot2docker\u306a\u3089\u7279\u6a29\u30e2\u30fc\u30c9\uff08`--privileged`\uff09\u306a\u3089\u3042\u308b\u3044\u306f\uff01\u3068\u3042\u3063\u305f\u306e\u3067\u3001\u65e9\u901f\u5b9f\u65bd\u3057\u307e\u3059\u3002\nhttps://bugs.centos.org/view.php?id=7480\n\n```Terminal\n$ docker run --privileged -it centos:centos7 /bin/bash\n```\n\u7d50\u679c\u3001\u5909\u308f\u3089\u305a\u3001\u30a8\u30e9\u30fc\u3002\n\u5408\u308f\u305b\u3066`--cap-add=SYS_ADMIN`\u5bfe\u5fdc\u3082\u4e00\u5fdc\u8a66\u3057\u3066\u307f\u305f\u3082\u306e\u306e\u7279\u306b\u5909\u308f\u3089\u305a\u3001\u30a8\u30e9\u30fc\u3002\n\n## \u8ae6\u3081\u305f\n\n```CentOS7\n# uname -a\nLinux 21026139e6fc 3.16.7-tinycore64 #1 SMP Tue Dec 16 23:03:39 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n```\n\u304d\u3063\u30683.x\u7cfb\u306b\u306a\u3063\u305f\u304b\u3089\u3001\u3068\u3044\u3046\u30ab\u30fc\u30cd\u30eb\u30ec\u30d9\u30eb\u306e\u304a\u8a71\u306a\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u3002\u3053\u3053\u304b\u3089\u5148\u5177\u4f53\u7684\u306b\u306f\u8abf\u3079\u3066\u307e\u305b\u3093\u3002\n\nboot2docker\u4e0a\u3067CentOS7\u306f\u7121\u7406\u3068\u3044\u3046\u7d50\u8ad6\u306b\u3057\u3066\u3001\u5927\u4eba\u3057\u304f6\u7cfb\u3092pull\u3057\u3066\u307e\u3059\u3002\n"}