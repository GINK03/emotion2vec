{"context": "Sinatra\u306b\u3066\u3001Ajax\u3067\u30b5\u30fc\u30d0\u30fc\u3078\u30c7\u30fc\u30bf\u3092post\u9001\u4fe1\u3057\u623b\u308a\u5024(JSON)\u3092JavaScript\u3067\u53d7\u3051\u53d6\u3063\u3066\u8868\u793a\u3059\u308b\u3084\u308a\u65b9\u3067\u3059\u3002\n\n\u672c\u4f53\n\nmain.rb\nrequire 'sinatra'\nrequire 'sinatra/reloader'\nrequire 'json'\n\nget '/' do\n  erb :index\nend\n\npost '/post' do\n  #\u3053\u3053\u3067\u5165\u529b\u30c7\u30fc\u30bf\u3092\u51e6\u7406\u3059\u308b\n  foo = params[:foo]\n  bar = params[:bar]\n  data = {\n    \"foo\" => foo,\n    \"bar\" => bar\n  }\n  content_type :json\n  @data = data.to_json  \nend\n\n\n\n\u30d3\u30e5\u30fc\n\npublic/index.erb\n<body>\n  <!--\u30c7\u30fc\u30bf\u5165\u529b\u30d5\u30a9\u30fc\u30e0-->\n  <input type=\"text\" id=\"foo\">\n  <input type=\"text\" id=\"bar\">\n  <input id=\"submit\" type=\"button\" value=\"submit\">\n  <p id=\"result\"></p>\n\n  <!--jQuery\u53ec\u559a-->\n  <script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"></script> \n\n  <!--submit\u30dc\u30bf\u30f3\u3092\u304a\u3059\u3068\u4ee5\u4e0b\u306eAjax\u901a\u4fe1-->\n  <script type=\"text/javascript\">\n    $(function(){\n      $(\"#submit\").click(function(){\n        var foo = $(\"#foo\").val();\n        var bar = $(\"#bar\").val();\n        $.ajax({\n          type: \"POST\",\n          url: \"/post\",\n          dataType: \"text\", //dataType\u3092\u3061\u3083\u3093\u3068\u6307\u5b9a\u3059\u308b\n          data: {\n            foo: foo,\n            bar: bar\n          },\n        //\u4ee5\u4e0b\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u3067\u623b\u308a\u5024\u3092\u53d7\u3051\u53d6\u308a\u3001id=\"result\"\u306b\u8868\u793a\n        success: function(json) {\n        dataType: \"json\",  //dataType\u3092\u3061\u3083\u3093\u3068\u6307\u5b9a\u3059\u308b\n        $('#result').append(json);\n        },\n        error: function() {\n        $('#result').append('error');\n        }\n        });\n      });\n    });\n  </script>\n</body>\n\n\n\n\u7d50\u679c\n\nbefore\n\n\n[submit]\u3092\u304a\u3059\u3068\n\n\n\u3067\u304d\u305f\uff01\nSinatra\u306b\u3066\u3001Ajax\u3067\u30b5\u30fc\u30d0\u30fc\u3078\u30c7\u30fc\u30bf\u3092post\u9001\u4fe1\u3057\u623b\u308a\u5024(JSON)\u3092JavaScript\u3067\u53d7\u3051\u53d6\u3063\u3066\u8868\u793a\u3059\u308b\u3084\u308a\u65b9\u3067\u3059\u3002\n##\u672c\u4f53\n```main.rb\nrequire 'sinatra'\nrequire 'sinatra/reloader'\nrequire 'json'\n\nget '/' do\n  erb :index\nend\n\npost '/post' do\n  #\u3053\u3053\u3067\u5165\u529b\u30c7\u30fc\u30bf\u3092\u51e6\u7406\u3059\u308b\n  foo = params[:foo]\n  bar = params[:bar]\n  data = {\n    \"foo\" => foo,\n    \"bar\" => bar\n  }\n  content_type :json\n  @data = data.to_json  \nend\n```\n\n##\u30d3\u30e5\u30fc\n```public/index.erb\n<body>\n  <!--\u30c7\u30fc\u30bf\u5165\u529b\u30d5\u30a9\u30fc\u30e0-->\n  <input type=\"text\" id=\"foo\">\n  <input type=\"text\" id=\"bar\">\n  <input id=\"submit\" type=\"button\" value=\"submit\">\n  <p id=\"result\"></p>\n  \n  <!--jQuery\u53ec\u559a-->\n  <script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"></script> \n  \n  <!--submit\u30dc\u30bf\u30f3\u3092\u304a\u3059\u3068\u4ee5\u4e0b\u306eAjax\u901a\u4fe1-->\n  <script type=\"text/javascript\">\n    $(function(){\n      $(\"#submit\").click(function(){\n        var foo = $(\"#foo\").val();\n        var bar = $(\"#bar\").val();\n        $.ajax({\n          type: \"POST\",\n          url: \"/post\",\n          dataType: \"text\", //dataType\u3092\u3061\u3083\u3093\u3068\u6307\u5b9a\u3059\u308b\n          data: {\n            foo: foo,\n            bar: bar\n          },\n        //\u4ee5\u4e0b\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u3067\u623b\u308a\u5024\u3092\u53d7\u3051\u53d6\u308a\u3001id=\"result\"\u306b\u8868\u793a\n        success: function(json) {\n        dataType: \"json\",  //dataType\u3092\u3061\u3083\u3093\u3068\u6307\u5b9a\u3059\u308b\n        $('#result').append(json);\n        },\n        error: function() {\n        $('#result').append('error');\n        }\n        });\n      });\n    });\n  </script>\n</body>\n```\n##\u7d50\u679c\n####before\n![before](https://qiita-image-store.s3.amazonaws.com/0/155786/09b4eb05-59ff-d752-8bfe-f47acf16f20d.png)\n\n####[submit]\u3092\u304a\u3059\u3068\n![submit](https://qiita-image-store.s3.amazonaws.com/0/155786/cb9478be-3b75-231f-004e-4dde51655254.png)\n\n###\u3067\u304d\u305f\uff01\n", "tags": ["Ruby", "JavaScript", "Sinatra", "Ajax"]}