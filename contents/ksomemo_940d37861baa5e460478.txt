{"context": " More than 1 year has passed since last update.\n\u3044\u307e\u3055\u3089flask\u4f7f\u3063\u3066\u307f\u305f\njinja\u306f\u524d\u306b\u4f7f\u3063\u305f\u3053\u3068\u3042\u308b\u306e\u3067\u7279\u306b\u554f\u984c\u306a\u3057\n\n\n\u307e\u3068\u3081\n\nflask\u4fbf\u5229\nhtml\u3092rendor\u3067\u304d\u305f\njson API\u4f5c\u308c\u305f\nfile download\u3082\u3067\u304d\u305f\n\u30e1\u30e2\u30a2\u30d7\u30ea\u3068\u3057\u3066\u306f\u672a\u5b8c\u6210\u2026\nMicro\u306a\u57df\u3092\u8d85\u3048\u305f\u3089django\u306b\u3057\u306a\u3044\u3068\u6d88\u8017\u3057\u305d\u3046\n\n\nmemo.py\nfrom flask import (\n    Flask,\n    render_template,\n    jsonify,\n    request,\n    send_from_directory\n)\nimport sys\nimport datetime\napp = Flask(__name__)\n\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n\n@app.route('/hello_html/<name>')\ndef hello_html(name=None):\n    return 'hello {}'.format(name)\n\n\n@app.route('/api/save/word', methods=['POST'])\ndef save_word():\n    filename = 'save.tsv'\n    print(request.form)\n    with open(filename, 'a') as f:\n        data = [\n            request.form['word'],\n            request.form['memo'],\n            datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"),\n        ]\n        f.write('\\t'.join(data) + '\\n')\n    return jsonify({'status': 'ok'})\n\n\n@app.route('/download/<path:filename>')\ndef download(filename):\n    \"\"\"donwload file\"\"\"\n    return send_from_directory('.', filename)\n\n\nif __name__ == '__main__':\n    debug = False\n    if len(sys.argv) > 1 and sys.argv[1] == 'debug':\n        debug = True\n    app.run(debug=debug)\n\n\n\ntemplate.html\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <title>index</title>\n</head>\n<body>\n  <h1>memo app</h1>\n  <h2>\u5358\u8a9e\u767b\u9332</h2>\n    \u5358\u8a9e:<input type=\"text\" id=\"word\">\n    \u30e1\u30e2<textarea id=\"memo\">\u30e1\u30e2\u5185\u5bb9</textarea>\n    <input type=\"button\" id=\"register\" value=\"\u767b\u9332\">\n  <h2>\u5358\u8a9e\u4e00\u89a7</h2>\n  <table border=\"1\">\n    <thead>\n      <th>\u5358\u8a9e</th>\n      <th>\u30e1\u30e2</th>\n      <th>\u8abf\u3079\u305f\u56de\u6570</th>\n    </thead>\n    <tbody>\n      <td>hellow</td>\n      <td>\u3053\u3093\u306b\u3061\u306f</td>\n      <td>1</td>\n    </tbody>\n  </table>\n  <script src=\"https://code.jquery.com/jquery-2.1.4.min.js\"></script>\n  <script>\n    $(function() {\n      $(\"#register\").on('click', function() {\n        postData = {\n          \"word\": $(\"#word\").val(),\n          \"memo\": $(\"#memo\").val()\n        };\n        $.post(\"{{ url_for('save_word') }}\", postData, function(data) {\n          console.log(data);\n        })\n      });\n    });\n  </script>\n</body>\n</html>\n\n\n- \u3044\u307e\u3055\u3089flask\u4f7f\u3063\u3066\u307f\u305f\n- jinja\u306f\u524d\u306b\u4f7f\u3063\u305f\u3053\u3068\u3042\u308b\u306e\u3067\u7279\u306b\u554f\u984c\u306a\u3057\n\n## \u307e\u3068\u3081\n- flask\u4fbf\u5229\n- html\u3092rendor\u3067\u304d\u305f\n- json API\u4f5c\u308c\u305f\n- file download\u3082\u3067\u304d\u305f\n- \u30e1\u30e2\u30a2\u30d7\u30ea\u3068\u3057\u3066\u306f\u672a\u5b8c\u6210\u2026\n- Micro\u306a\u57df\u3092\u8d85\u3048\u305f\u3089django\u306b\u3057\u306a\u3044\u3068\u6d88\u8017\u3057\u305d\u3046\n\n```py3:memo.py\nfrom flask import (\n    Flask,\n    render_template,\n    jsonify,\n    request,\n    send_from_directory\n)\nimport sys\nimport datetime\napp = Flask(__name__)\n\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n\n@app.route('/hello_html/<name>')\ndef hello_html(name=None):\n    return 'hello {}'.format(name)\n\n\n@app.route('/api/save/word', methods=['POST'])\ndef save_word():\n    filename = 'save.tsv'\n    print(request.form)\n    with open(filename, 'a') as f:\n        data = [\n            request.form['word'],\n            request.form['memo'],\n            datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"),\n        ]\n        f.write('\\t'.join(data) + '\\n')\n    return jsonify({'status': 'ok'})\n\n\n@app.route('/download/<path:filename>')\ndef download(filename):\n    \"\"\"donwload file\"\"\"\n    return send_from_directory('.', filename)\n\n\nif __name__ == '__main__':\n    debug = False\n    if len(sys.argv) > 1 and sys.argv[1] == 'debug':\n        debug = True\n    app.run(debug=debug)\n```\n\n```html:template.html\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <title>index</title>\n</head>\n<body>\n  <h1>memo app</h1>\n  <h2>\u5358\u8a9e\u767b\u9332</h2>\n    \u5358\u8a9e:<input type=\"text\" id=\"word\">\n    \u30e1\u30e2<textarea id=\"memo\">\u30e1\u30e2\u5185\u5bb9</textarea>\n    <input type=\"button\" id=\"register\" value=\"\u767b\u9332\">\n  <h2>\u5358\u8a9e\u4e00\u89a7</h2>\n  <table border=\"1\">\n    <thead>\n      <th>\u5358\u8a9e</th>\n      <th>\u30e1\u30e2</th>\n      <th>\u8abf\u3079\u305f\u56de\u6570</th>\n    </thead>\n    <tbody>\n      <td>hellow</td>\n      <td>\u3053\u3093\u306b\u3061\u306f</td>\n      <td>1</td>\n    </tbody>\n  </table>\n  <script src=\"https://code.jquery.com/jquery-2.1.4.min.js\"></script>\n  <script>\n    $(function() {\n      $(\"#register\").on('click', function() {\n        postData = {\n          \"word\": $(\"#word\").val(),\n          \"memo\": $(\"#memo\").val()\n        };\n        $.post(\"{{ url_for('save_word') }}\", postData, function(data) {\n          console.log(data);\n        })\n      });\n    });\n  </script>\n</body>\n</html>\n```\n", "tags": ["memo"]}