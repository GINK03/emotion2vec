{"context": " More than 1 year has passed since last update.@Nabetani \u3055\u3093\u306b\u8a98\u308f\u308c\u3066\u53c2\u52a0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://d.hatena.ne.jp/torazuka/20140509/yhpg\n\u3061\u306a\u307f\u306b\u9032\u6357\u30c0\u30e1\u3067\u3059\u3002\n\nlesson.rb\nclass Lesson\n  class << self\n    def create(data)\n      application_list = data.split(\"|\")\n      lessons = {}\n      # \u30c7\u30fc\u30bf\u3092\u4f5c\u308b\n      application_list.each do |a|\n        split_data = a.split(\"_\")\n        employee = split_data.first\n        days = split_data.last\n        days.chars.each do |d|\n          lessons[d] = [] unless lessons[d]\n          if lessons[d].size < 4\n            lessons[d].push(employee)\n            break\n          end\n        end\n      end\n      # \u51fa\u529b\u7528\u3092\u7d44\u307f\u7acb\u3066\u308b\n      result = \"\"\n      lessons.sort.each do |day, emps|\n        result += \"#{day}_\"\n        emps.sort_by{|e| e.to_i }.each do |e|\n          result += \"#{e}:\"\n        end\n        result.chop!\n        result += \"|\"\n      end\n      result.chop!\n      result\n    end\n\n  end\nend\n\n\n\n\nlesson_spec.rb\nrequire \"spec_helper\"\nrequire \"lesson\"\n\ndescribe Lesson do\n  describe \".create\" do\n    let(:result){ Lesson.create(data) }\n    context \"one data\" do\n      let(:data){ \"1_12345\" }\n      it \"returns hoped data\" do\n        result.should eq \"1_1\"\n      end\n    end\n    context \"one data and other number\" do\n      let(:data){ \"30_32451\" }\n      it \"returns hoped data\" do\n        result.should eq \"3_30\"\n      end\n    end\n    context \"two data for same lesson\" do\n      let(:data){ \"1_12345|2_12345\" }\n      it \"create one lesson in two person.\" do\n        result.should eq \"1_1:2\"\n      end\n    end\n    context \"three employee for one lesson\" do\n      let(:data){ \"3_12345|2_12345|1_12345\" }\n      it \"create one lesson in three person\" do\n        result.should eq \"1_1:2:3\"\n      end\n    end\n    context \"three persons for three lesson\" do\n      let(:data){ \"1_23415|2_12435|3_42135\" }\n      it \"create three lesson\" do\n        result.should eq \"1_2|2_1|4_3\"\n      end\n    end\n    context \"#5\" do\n      let(:data){ \"1_23415|2_12435|3_42135|4_31245|5_53124\" }\n      it \"create three lesson\" do\n        result.should eq \"1_2|2_1|3_4|4_3|5_5\"\n      end\n    end\n    [\n      # 6\n      [\"40_12345|21_12345|3_12345|61_12345|10_12345\", \"1_3:21:40:61|2_10\"],\n      # 7\n      [\"1_23415|2_12435|3_42135|4_54321|5_12345|6_13524|7_42351|8_31254|9_24513|10_12345\", \"1_2:5:6:10|2_1:9|3_8|4_3:7|5_4\"],\n      # 8\n      [\"1_54321|2_54321|3_54321|4_54321|5_54321|6_54321|7_54321|8_54321|9_54321|10_54321|11_54321|12_54321|13_54321|14_54321|15_54321|16_54321|17_54321|18_54321|19_54321|20_54321|21_54321\", \"1_17:18:19:20|2_13:14:15:16|3_9:10:11:12|4_5:6:7:8|5_1:2:3:4\"],\n      # 9\n      [\"1_34152|2_23514|3_41325|4_15342|5_45312|6_35124|7_21453|8_52431|9_13245|10_54123|11_13245\", \"1_4:9:11|2_2:7|3_1:6|4_3:5|5_8:10\"],\n      # 10\n      [\"92_41532|58_14325|40_25413|5_45132|71_35124|23_13452|60_35241|77_31542|53_13542|72_12354\", \"1_23:53:58:72|2_40|3_60:71:77|4_5:92\"],\n      # 11\n      [\"55_24153|91_24531|9_12543|41_34215|72_15423|44_42531|6_42351|79_15243|21_35412|31_52413|74_24135|83_31254|33_35421|84_53421|89_53241|16_32415|36_15234|92_34521|62_12345|14_23415|40_23415|88_43251|52_45213|77_32154|59_53241\", \"1_9:36:72:79|2_14:55:74:91|3_21:33:41:83|4_6:44:52:88|5_31:59:84:89\"],\n    ].each do |input, output|\n      it \"should match\" do\n        Lesson.create(input).should eq output\n      end\n    end\n  end\nend\n\n\n\u60a0\u9577\u306b\u30c6\u30b9\u30c8\u66f8\u3044\u3066\u305f\u3089\u9014\u4e2d\u304b\u3089\u6642\u9593\u304c\u8db3\u308a\u306a\u304f\u306a\u3063\u305f\u3057#6\u304b\u3089\u306e\u66f8\u304d\u65b9\u306b\u3057\u305f\u307b\u3046\u304c\u901f\u3044\u3053\u3068\u306b\u6c17\u3065\u304f\u306e\u304c\u9045\u3059\u304e\u307e\u3057\u305f\u306d\u301c\u3002\u3057\u304b\u3082 #11 \u306e\u30c6\u30b9\u30c8\u304c\u901a\u3089\u306a\u3044\u306e\u3067\u9032\u6357\u30c0\u30e1\u3067\u3059orz\n\n\u304d\u3061\u3093\u3068\u3057\u305f\u89e3\u7b54\u306f\n@Nabetani\u3055\u3093\u306e\u3092\u53c2\u8003\u306b\nhttp://qiita.com/Nabetani/items/7d7c46438339b730cc4b\n\n\u611f\u60f3\n\u9762\u767d\u304b\u3063\u305f\u3067\u3059\u3002\n\n@Nabetani \u3055\u3093\u306b\u8a98\u308f\u308c\u3066\u53c2\u52a0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://d.hatena.ne.jp/torazuka/20140509/yhpg\n\n\u3061\u306a\u307f\u306b\u9032\u6357\u30c0\u30e1\u3067\u3059\u3002\n\n``` lesson.rb\nclass Lesson\n  class << self\n    def create(data)\n      application_list = data.split(\"|\")\n      lessons = {}\n      # \u30c7\u30fc\u30bf\u3092\u4f5c\u308b\n      application_list.each do |a|\n        split_data = a.split(\"_\")\n        employee = split_data.first\n        days = split_data.last\n        days.chars.each do |d|\n          lessons[d] = [] unless lessons[d]\n          if lessons[d].size < 4\n            lessons[d].push(employee)\n            break\n          end\n        end\n      end\n      # \u51fa\u529b\u7528\u3092\u7d44\u307f\u7acb\u3066\u308b\n      result = \"\"\n      lessons.sort.each do |day, emps|\n        result += \"#{day}_\"\n        emps.sort_by{|e| e.to_i }.each do |e|\n          result += \"#{e}:\"\n        end\n        result.chop!\n        result += \"|\"\n      end\n      result.chop!\n      result\n    end\n\n  end\nend\n\n```\n\n``` lesson_spec.rb\nrequire \"spec_helper\"\nrequire \"lesson\"\n\ndescribe Lesson do\n  describe \".create\" do\n    let(:result){ Lesson.create(data) }\n    context \"one data\" do\n      let(:data){ \"1_12345\" }\n      it \"returns hoped data\" do\n        result.should eq \"1_1\"\n      end\n    end\n    context \"one data and other number\" do\n      let(:data){ \"30_32451\" }\n      it \"returns hoped data\" do\n        result.should eq \"3_30\"\n      end\n    end\n    context \"two data for same lesson\" do\n      let(:data){ \"1_12345|2_12345\" }\n      it \"create one lesson in two person.\" do\n        result.should eq \"1_1:2\"\n      end\n    end\n    context \"three employee for one lesson\" do\n      let(:data){ \"3_12345|2_12345|1_12345\" }\n      it \"create one lesson in three person\" do\n        result.should eq \"1_1:2:3\"\n      end\n    end\n    context \"three persons for three lesson\" do\n      let(:data){ \"1_23415|2_12435|3_42135\" }\n      it \"create three lesson\" do\n        result.should eq \"1_2|2_1|4_3\"\n      end\n    end\n    context \"#5\" do\n      let(:data){ \"1_23415|2_12435|3_42135|4_31245|5_53124\" }\n      it \"create three lesson\" do\n        result.should eq \"1_2|2_1|3_4|4_3|5_5\"\n      end\n    end\n    [\n      # 6\n      [\"40_12345|21_12345|3_12345|61_12345|10_12345\", \"1_3:21:40:61|2_10\"],\n      # 7\n      [\"1_23415|2_12435|3_42135|4_54321|5_12345|6_13524|7_42351|8_31254|9_24513|10_12345\", \"1_2:5:6:10|2_1:9|3_8|4_3:7|5_4\"],\n      # 8\n      [\"1_54321|2_54321|3_54321|4_54321|5_54321|6_54321|7_54321|8_54321|9_54321|10_54321|11_54321|12_54321|13_54321|14_54321|15_54321|16_54321|17_54321|18_54321|19_54321|20_54321|21_54321\", \"1_17:18:19:20|2_13:14:15:16|3_9:10:11:12|4_5:6:7:8|5_1:2:3:4\"],\n      # 9\n      [\"1_34152|2_23514|3_41325|4_15342|5_45312|6_35124|7_21453|8_52431|9_13245|10_54123|11_13245\", \"1_4:9:11|2_2:7|3_1:6|4_3:5|5_8:10\"],\n      # 10\n      [\"92_41532|58_14325|40_25413|5_45132|71_35124|23_13452|60_35241|77_31542|53_13542|72_12354\", \"1_23:53:58:72|2_40|3_60:71:77|4_5:92\"],\n      # 11\n      [\"55_24153|91_24531|9_12543|41_34215|72_15423|44_42531|6_42351|79_15243|21_35412|31_52413|74_24135|83_31254|33_35421|84_53421|89_53241|16_32415|36_15234|92_34521|62_12345|14_23415|40_23415|88_43251|52_45213|77_32154|59_53241\", \"1_9:36:72:79|2_14:55:74:91|3_21:33:41:83|4_6:44:52:88|5_31:59:84:89\"],\n    ].each do |input, output|\n      it \"should match\" do\n        Lesson.create(input).should eq output\n      end\n    end\n  end\nend\n```\n\n\u60a0\u9577\u306b\u30c6\u30b9\u30c8\u66f8\u3044\u3066\u305f\u3089\u9014\u4e2d\u304b\u3089\u6642\u9593\u304c\u8db3\u308a\u306a\u304f\u306a\u3063\u305f\u3057#6\u304b\u3089\u306e\u66f8\u304d\u65b9\u306b\u3057\u305f\u307b\u3046\u304c\u901f\u3044\u3053\u3068\u306b\u6c17\u3065\u304f\u306e\u304c\u9045\u3059\u304e\u307e\u3057\u305f\u306d\u301c\u3002\u3057\u304b\u3082 #11 \u306e\u30c6\u30b9\u30c8\u304c\u901a\u3089\u306a\u3044\u306e\u3067\u9032\u6357\u30c0\u30e1\u3067\u3059orz\n\n## \u304d\u3061\u3093\u3068\u3057\u305f\u89e3\u7b54\u306f\n@Nabetani\u3055\u3093\u306e\u3092\u53c2\u8003\u306b\n\nhttp://qiita.com/Nabetani/items/7d7c46438339b730cc4b\n\n## \u611f\u60f3\n\u9762\u767d\u304b\u3063\u305f\u3067\u3059\u3002\n", "tags": ["yhpg", "\u3069\u3046\u66f8\u304f", "Ruby"]}