{"tags": ["Elixir", "Phoenix"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u524d\u56de\u306f\u3001Plug\u3092\u898b\u3066\u3044\u304d\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306fController\u3067\u3059\u3002\n\u6b21\u56de\u306fView\u3067\u3059\u3002\n\n\u6982\u8981\nController\u306b\u306f\u3001Action (Router\u306b\u3088\u3063\u3066HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u884c\u3046\u305f\u3081\u306e\u95a2\u6570) \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\nAction\u306f\u3001Template\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u305f\u308a\u3001JSON\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3057\u305f\u308a\u3057\u307e\u3059\u3002\nPhoenix\u306eController\u306fPlug\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u3066\u3001Controller\u81ea\u8eab\u3082Plug\u3067\u3059\u3002\nPhoenix\u3067\u65b0\u898f\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u305f\u3068\u304d\u3001\u30eb\u30fc\u30c8\u7528\u306eController\u3068\u3057\u3066PageController\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059(web/controllers/page_controller.ex)\u3002\ndefmodule HelloPhoenix.PageController do\n  use HelloPhoenix.Web, :controller\n\n  def index(conn, _params) do\n    render conn, \"index.html\"\n  end\nend\n\nuse HelloPhoenix.Web, :controller\u306f\u3001HelloPhoenix.Web(web/web.ex)\u306econtroller\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001HelloPhoenix.Router(web/router.ex)\u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30eb\u30fc\u30c8\u7528\u306eController\u5b9a\u7fa9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n  scope \"/\", HelloPhoenix do\n    ...\n    get \"/\", PageController, :index\n\n\nAction\nAction\u306f\u95a2\u6570\u3067\u3042\u308a\u3001Elixir\u306e\u547d\u540d\u898f\u5247\u306b\u5f93\u3063\u3066\u3044\u308c\u3070\u3069\u3093\u306a\u95a2\u6570\u540d\u3067\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e:index\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\"?\"\u3092\u4ed8\u3051\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001index\u3084route\u306eresources\u3067\u4f5c\u6210\u3055\u308c\u308bAction(show, new, create\u306a\u3069)\u306f\u5909\u66f4\u3057\u306a\u3044\u65b9\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\nAction\u306f\u3001\u5e38\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e8c\u3064\u3068\u308b\u95a2\u6570\u3067\u3001\u7b2c\u4e00\u5f15\u6570\u306f\u3001Plug\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3067\u751f\u6210\u3055\u308c\u305f\u63a5\u7d9a\u60c5\u5831\u3092\u8868\u3059\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u3059\u3002\u7b2c\u4e8c\u5f15\u6570\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u5f15\u304d\u56de\u3055\u308c\u3066\u304d\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306emap\u3067\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\nPhoenix\u81ea\u8eab\u306f\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ec\u30a4\u30e4\u30fc\u3092\u6301\u305f\u305a\u306b\u3001Ecto\u306b\u3088\u308bDB\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3001OTP\u306eETS\u3084DETS\u3001mnesia\u3001\u4ed6\u306e\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\n\u30e6\u30fc\u30b6\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u5fdc\u3058\u3066\u7c21\u5358\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8fd4\u3059\u3088\u3046\u306a\u30b1\u30fc\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001\u30a8\u30e9\u30fc\u306b\u3088\u308b\u66f4\u65b0\u5931\u6557\u3067\u3042\u3063\u305f\u308a\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3078\u306e\u30a6\u30a7\u30eb\u30ab\u30e0\u30e1\u30c3\u30bb\u30fc\u30b8\u306a\u3069\u3067\u3059\u3002\u3053\u3046\u3044\u3046\u30b1\u30fc\u30b9\u3067\u306f\u3001\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6709\u52b9\u3067\u3059\u3002\nPhoenix.Controller\u3067\u306f\u3001put_flash/3\u3068get_flash/2\u3068\u3044\u3046\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u306eKey-Value\u30da\u30a2\u7528\u306e\u95a2\u6570\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b\u3001\u4e8c\u3064\u306e\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u3059\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6d88\u53bb\u3059\u308bclear_flash/1\u3068\u3044\u3046\u95a2\u6570\u3082\u3042\u308a\u307e\u3059\u3002\ndefmodule HelloPhoenix.PageController do\n  . . .\n  def index(conn, _params) do\n    conn\n    |> put_flash(:info, \"Welcome to Phoenix, from flash info!\")\n    |> put_flash(:error, \"Let's pretend we have an error.\")\n    |> render(\"index.html\")\n  end\nend\n\n\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30ad\u30fc\u306b\u7279\u306b\u6c7a\u307e\u308a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001:info\u3084:error\u3068\u3044\u3046\u306e\u306f\u4e00\u822c\u7684\u3067\u3059\u3002\n\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306b\u306f\u3001Template\u5074\u3067\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092get_flash/2\u3067\u53d6\u5f97\u3057\u3066\u8868\u793a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ec\u30a4\u30a2\u30a6\u30c8(web/templates/layout/app.html.eex)\u306b\u306f\u305d\u306e\u4ed5\u7d44\u307f\u304c\u5099\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n<p class=\"alert alert-info\" role=\"alert\"><%= get_flash(@conn, :info) %></p>\n<p class=\"alert alert-danger\" role=\"alert\"><%= get_flash(@conn, :error) %></p>\n\n\n\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\nController\u306b\u304a\u3044\u3066\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306f\u4f55\u7a2e\u985e\u304b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\u3082\u3063\u3068\u3082\u7c21\u5358\u306a\u306e\u306fPhoenix\u304c\u63d0\u4f9b\u3059\u308btext/2\u95a2\u6570\u3067\u3059\u3002\ndef show(conn, %{\"id\" => id}) do\n  text conn, \"Showing id #{id}\"\nend\n\nget \"/path/:id\"\u3092\u3053\u306eshow\u95a2\u6570\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u3066\u3044\u308b\u3068\u3057\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089/path/15\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u5834\u5408\u3001\u60f3\u50cf\u901a\u308a\u3001plain-text\u3067\"Showing id 15\"\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\n\u540c\u69d8\u306bjson/2\u95a2\u6570\u3092\u4f7f\u3048\u3070\u3001JSON\u3092\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u3001Map\u578b\u306a\u3069\u3092JSON\u306b\u5909\u63db\u3059\u308b\u306b\u306fPoison\u30e9\u30a4\u30d6\u30e9\u30ea (Phoenix\u306e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea)\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nshow\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3068\u3001/path/15\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3057\u3066{ id: \"15\" }\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\ndef show(conn, %{\"id\" => id}) do\n  json conn, %{id: id}\nend\n\nPhoenix\u3067\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u308f\u305a\u306bHTML\u3092\u8fd4\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002text\u3001json\u3068\u540c\u69d8\u306bhtml/2\u95a2\u6570\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u4f7f\u7528\u65b9\u6cd5\u306f\u60f3\u50cf\u901a\u308a\u3067\u3059\u3002\n\u305f\u3060\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u9055\u3063\u3066<%= id %>\u3068\u3044\u3063\u305f\u66f8\u304d\u65b9\u306f\u3067\u304d\u307e\u305b\u3093\u3002\ndef show(conn, %{\"id\" => id}) do\n  html conn, \"\"\"\n     <html>\n       <head>\n          <title>Passing an Id</title>\n       </head>\n       <body>\n         <p>You sent in id #{id}</p>\n       </body>\n     </html>\n    \"\"\"\nend\n\n\u76f4\u63a5\u5024\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\u4ee5\u5916\u306b\u3082\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3063\u3066\u8868\u793a\u3059\u308b\u65b9\u6cd5\u3082\u4e00\u822c\u7684\u3067\u3059\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3063\u3066\u8868\u793a\u3059\u308b\u5834\u5408\u306f\u3001render/3\u95a2\u6570\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u5185\u90e8\u7684\u306b\u306f\u3001render/3\u95a2\u6570\u306fPhoenix.View\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u5229\u4fbf\u6027\u306e\u7406\u7531\u304b\u3089Phoenix.Controller\u306b\u3082\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3046\u4f8b\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\ndefmodule HelloPhoenix.HelloController do\n  use HelloPhoenix.Web, :controller\n\n  def show(conn, %{\"messenger\" => messenger}) do\n    render conn, \"show.html\", messenger: messenger\n  end\nend\n\nrender/3\u95a2\u6570\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u3001\u305d\u308c\u305e\u308c\u306e\u540d\u524d\u306e\u5148\u982d\u3092\u7d71\u4e00\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001HelloController\u304b\u3089\u306fHelloView\u3092\u53c2\u7167\u3057\u307e\u3059\u3057\u3001HelloView\u306fweb/templates/hello\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53c2\u7167\u3057\u3001\u305d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u306frender/3\u3067\u6307\u5b9a\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8(\u4e0a\u8a18\u306e\u4f8b\u3060\u3068\"show.html.eex\")\u304c\u7121\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\nrender/3\u306b\u306f\u3001\u7b2c\u4e09\u5f15\u6570\u3068\u3057\u3066\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3057\u307e\u3059\u304c\u3001\u95a2\u6570\u5185\u3067\u3053\u308c\u3092\u5236\u5fa1\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndef index(conn, _params) do\n  conn\n  |> assign(:message, \"Welcome Back!\")\n  |> render(\"index.html\")\nend\n\n\u4e0a\u8a18\u306e\u4f8b\u3092plug\u3092\u4f7f\u3063\u3066\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\nplug :assign_welcome_message, \"Welcome Back\"\n\ndef index(conn, _params) do\n  conn\n  |> render(\"index.html\")\nend\n\ndefp assign_welcome_message(conn, msg) do\n  assign(conn, :message, :msg)\nend\n\n\u306a\u304a\u3001plug\u306b\u306f\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u3060\u3051\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306a\u66f8\u304d\u65b9\u3082\u3042\u308a\u307e\u3059\u3002\n  plug :assign_welcome_message, \"Hi!\" when action in[:index]\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n200\u4ee5\u5916\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u5834\u5408\u306b\u306f\u3001send_resp/3\u3092\u4f7f\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306econtent-type\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306b\u306f\u3001put_resp_content_type/2\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\ndef index(conn, _params) do\n  conn\n  |> put_resp_content_type(\"text/plain\")\n  |> send_resp(201, \"\")\nend\n\n\n\u30ec\u30a4\u30a2\u30a6\u30c8\nLayout\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30b5\u30d6\u30bb\u30c3\u30c8\u3067\u3001/web/templates/layout\u306b\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002Phoenix\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067app.html.eex\u3068\u3044\u3046\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u751f\u6210\u3057\u3001\u5168\u3066\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u3053\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u4e0a\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\nLayout\u306f\u3042\u304f\u307e\u3067Template\u306b\u904e\u304e\u307e\u305b\u3093\u306e\u3067\u3001\u8868\u793a\u3059\u308b\u969b\u306b\u306fView\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002LayoutView\u30e2\u30b8\u30e5\u30fc\u30eb\u304c/web/views/layout_view.ex\u306b\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002Layout\u3092/web/templates/layout\u306b\u914d\u7f6e\u3059\u308b\u9650\u308a\u306f\u3001Layout\u7528\u306e\u65b0\u3057\u3044View\u3092\u751f\u6210\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\nPhoenix.Controller\u30e2\u30b8\u30e5\u30fc\u30eb\u306eput_layout/2\u95a2\u6570\u3092\u4f7f\u3063\u3066\u3001\u4f7f\u7528\u3059\u308bLayout\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306bfalse\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30ec\u30a4\u30a2\u30a6\u30c8\u7121\u3057\u3067\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndef index(conn, params) do\n  conn\n  |> put_layout(false)                # \u2190 ()\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\n  |> render \"index.html\"\nend\n\n\n\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\u540c\u3058\u95a2\u6570\u3067HTML\u3084plain-text\u306a\u3069\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5207\u308a\u66ff\u3048\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\ndefmodule HelloPhoenix.Router do\n  use HelloPhoenix.Web, :router\n\n  pipeline :browser do\n    plug :accepts, [\"html\", \"text\"]\n    ...\n  end\n\n  def index(conn, _params) do\n    render conn, :index\n  end\n  ...  \n\nhttp://localhost:4000/?_format=text\u3068\u3059\u308b\u3068\u3001\"index.text.eex\"\u3092\u53c2\u7167\u3057\u3001html\u3060\u3068\"index.html.eex\"\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nContent-Type\u306e\u30bb\u30c3\u30c8\nxml\u3092\u51fa\u529b\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\ndef index(conn, _params) do\n  conn\n  |> put_resp_content_type(\"text/xml\")\n  |> render \"index.xml\", content: some_xml_content\nend\n\n\nHTTP\u30b9\u30c6\u30fc\u30bf\u30b9\nput_status/2\u3092\u4f7f\u3063\u3066\u3001200\u4ee5\u5916\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\ndef index(conn, _params) do\n  conn\n  |> put_status(202)\n  |> render(\"index.html\")\nend\n\n\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u306b\u306f\u3001redirect/2\u95a2\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002\ndefmodule HelloPhoenix.Router do\n  use HelloPhoenix.Web, :router\n  . . .\n\n  scope \"/\", HelloPhoenix do\n    . . .\n    get \"/\", PageController, :index\n  end\n\n  # New route for redirects\n  scope \"/\", HelloPhoenix do\n    get \"/redirect_test\", PageController, :redirect_test, as: :redirect_test\n  end\nend\n\ndefmodule HelloPhoenix.PageController do\n  . . .\n  def index(conn, _params) do\n    redirect conn, to: \"/redirect_test\"\n  end\n\n  def redirect_test(conn, _params) do\n    text conn, \"Redirect!\"\n  end\n  . . .\nend\n\n\u5916\u90e8\u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u5834\u5408\u3001to:\u3067\u306f\u306a\u304fexternal:\u3092\u4f7f\u3044\u307e\u3059\n\n## \u306f\u3058\u3081\u306b\n\n[\u524d\u56de](http://qiita.com/dynamitecoolguy/items/01df54b9eea28a0b1eb9)\u306f\u3001Plug\u3092\u898b\u3066\u3044\u304d\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f[Controller](http://www.phoenixframework.org/docs/controllers)\u3067\u3059\u3002\n[\u6b21\u56de](http://qiita.com/dynamitecoolguy/items/894c394faf9c3690ec5d)\u306fView\u3067\u3059\u3002\n\n## \u6982\u8981\n\nController\u306b\u306f\u3001Action (Router\u306b\u3088\u3063\u3066HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u884c\u3046\u305f\u3081\u306e\u95a2\u6570) \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\nAction\u306f\u3001Template\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u305f\u308a\u3001JSON\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3057\u305f\u308a\u3057\u307e\u3059\u3002\n\nPhoenix\u306eController\u306fPlug\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u3066\u3001Controller\u81ea\u8eab\u3082Plug\u3067\u3059\u3002\nPhoenix\u3067\u65b0\u898f\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u305f\u3068\u304d\u3001\u30eb\u30fc\u30c8\u7528\u306eController\u3068\u3057\u3066`PageController`\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059(`web/controllers/page_controller.ex`)\u3002\n\n```\ndefmodule HelloPhoenix.PageController do\n  use HelloPhoenix.Web, :controller\n\n  def index(conn, _params) do\n    render conn, \"index.html\"\n  end\nend\n```\n\n`use HelloPhoenix.Web, :controller`\u306f\u3001HelloPhoenix.Web(`web/web.ex`)\u306econtroller\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001HelloPhoenix.Router(`web/router.ex`)\u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30eb\u30fc\u30c8\u7528\u306eController\u5b9a\u7fa9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n```\n  scope \"/\", HelloPhoenix do\n    ...\n    get \"/\", PageController, :index\n```\n\n## Action\n\nAction\u306f\u95a2\u6570\u3067\u3042\u308a\u3001Elixir\u306e\u547d\u540d\u898f\u5247\u306b\u5f93\u3063\u3066\u3044\u308c\u3070\u3069\u3093\u306a\u95a2\u6570\u540d\u3067\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e`:index`\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\"?\"\u3092\u4ed8\u3051\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n\u305f\u3060\u3057\u3001index\u3084route\u306eresources\u3067\u4f5c\u6210\u3055\u308c\u308bAction(show, new, create\u306a\u3069)\u306f\u5909\u66f4\u3057\u306a\u3044\u65b9\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\nAction\u306f\u3001\u5e38\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e8c\u3064\u3068\u308b\u95a2\u6570\u3067\u3001\u7b2c\u4e00\u5f15\u6570\u306f\u3001Plug\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3067\u751f\u6210\u3055\u308c\u305f\u63a5\u7d9a\u60c5\u5831\u3092\u8868\u3059[\u30d1\u30e9\u30e1\u30fc\u30bf](http://hexdocs.pm/plug/Plug.Conn.html)\u3067\u3059\u3002\u7b2c\u4e8c\u5f15\u6570\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u5f15\u304d\u56de\u3055\u308c\u3066\u304d\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306emap\u3067\u3059\u3002\n\n## \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\n\nPhoenix\u81ea\u8eab\u306f\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ec\u30a4\u30e4\u30fc\u3092\u6301\u305f\u305a\u306b\u3001Ecto\u306b\u3088\u308bDB\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3001OTP\u306eETS\u3084DETS\u3001mnesia\u3001\u4ed6\u306e\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n## \u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\n\n\u30e6\u30fc\u30b6\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u5fdc\u3058\u3066\u7c21\u5358\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8fd4\u3059\u3088\u3046\u306a\u30b1\u30fc\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001\u30a8\u30e9\u30fc\u306b\u3088\u308b\u66f4\u65b0\u5931\u6557\u3067\u3042\u3063\u305f\u308a\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3078\u306e\u30a6\u30a7\u30eb\u30ab\u30e0\u30e1\u30c3\u30bb\u30fc\u30b8\u306a\u3069\u3067\u3059\u3002\u3053\u3046\u3044\u3046\u30b1\u30fc\u30b9\u3067\u306f\u3001\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6709\u52b9\u3067\u3059\u3002\n\nPhoenix.Controller\u3067\u306f\u3001`put_flash/3`\u3068`get_flash/2`\u3068\u3044\u3046\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u306eKey-Value\u30da\u30a2\u7528\u306e\u95a2\u6570\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b\u3001\u4e8c\u3064\u306e\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u3059\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6d88\u53bb\u3059\u308b`clear_flash/1`\u3068\u3044\u3046\u95a2\u6570\u3082\u3042\u308a\u307e\u3059\u3002\n\n```\ndefmodule HelloPhoenix.PageController do\n  . . .\n  def index(conn, _params) do\n    conn\n    |> put_flash(:info, \"Welcome to Phoenix, from flash info!\")\n    |> put_flash(:error, \"Let's pretend we have an error.\")\n    |> render(\"index.html\")\n  end\nend\n```\n\n\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30ad\u30fc\u306b\u7279\u306b\u6c7a\u307e\u308a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001`:info`\u3084`:error`\u3068\u3044\u3046\u306e\u306f\u4e00\u822c\u7684\u3067\u3059\u3002\n\n\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306b\u306f\u3001Template\u5074\u3067\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092`get_flash/2`\u3067\u53d6\u5f97\u3057\u3066\u8868\u793a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ec\u30a4\u30a2\u30a6\u30c8(`web/templates/layout/app.html.eex`)\u306b\u306f\u305d\u306e\u4ed5\u7d44\u307f\u304c\u5099\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\n```\n<p class=\"alert alert-info\" role=\"alert\"><%= get_flash(@conn, :info) %></p>\n<p class=\"alert alert-danger\" role=\"alert\"><%= get_flash(@conn, :error) %></p>\n```\n\n## \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\n\nController\u306b\u304a\u3044\u3066\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306f\u4f55\u7a2e\u985e\u304b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\u3082\u3063\u3068\u3082\u7c21\u5358\u306a\u306e\u306fPhoenix\u304c\u63d0\u4f9b\u3059\u308b`text/2`\u95a2\u6570\u3067\u3059\u3002\n\n```\ndef show(conn, %{\"id\" => id}) do\n  text conn, \"Showing id #{id}\"\nend\n```\n\n`get \"/path/:id\"`\u3092\u3053\u306e`show`\u95a2\u6570\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u3066\u3044\u308b\u3068\u3057\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089`/path/15`\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u5834\u5408\u3001\u60f3\u50cf\u901a\u308a\u3001plain-text\u3067\"Showing id 15\"\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\n\n\u540c\u69d8\u306b`json/2`\u95a2\u6570\u3092\u4f7f\u3048\u3070\u3001JSON\u3092\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u3001Map\u578b\u306a\u3069\u3092JSON\u306b\u5909\u63db\u3059\u308b\u306b\u306f[Poison\u30e9\u30a4\u30d6\u30e9\u30ea](https://github.com/devinus/poison) (Phoenix\u306e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea)\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n`show`\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3068\u3001`/path/15`\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3057\u3066`{ id: \"15\" }`\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\ndef show(conn, %{\"id\" => id}) do\n  json conn, %{id: id}\nend\n```\n\nPhoenix\u3067\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u308f\u305a\u306bHTML\u3092\u8fd4\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002`text`\u3001`json`\u3068\u540c\u69d8\u306b`html/2`\u95a2\u6570\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u4f7f\u7528\u65b9\u6cd5\u306f\u60f3\u50cf\u901a\u308a\u3067\u3059\u3002\n\u305f\u3060\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u9055\u3063\u3066`<%= id %>`\u3068\u3044\u3063\u305f\u66f8\u304d\u65b9\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n```\ndef show(conn, %{\"id\" => id}) do\n  html conn, \"\"\"\n     <html>\n       <head>\n          <title>Passing an Id</title>\n       </head>\n       <body>\n         <p>You sent in id #{id}</p>\n       </body>\n     </html>\n    \"\"\"\nend\n```\n\n\u76f4\u63a5\u5024\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\u4ee5\u5916\u306b\u3082\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3063\u3066\u8868\u793a\u3059\u308b\u65b9\u6cd5\u3082\u4e00\u822c\u7684\u3067\u3059\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3063\u3066\u8868\u793a\u3059\u308b\u5834\u5408\u306f\u3001`render/3`\u95a2\u6570\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u5185\u90e8\u7684\u306b\u306f\u3001`render/3`\u95a2\u6570\u306fPhoenix.View\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u5229\u4fbf\u6027\u306e\u7406\u7531\u304b\u3089Phoenix.Controller\u306b\u3082\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3046\u4f8b\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n```\ndefmodule HelloPhoenix.HelloController do\n  use HelloPhoenix.Web, :controller\n\n  def show(conn, %{\"messenger\" => messenger}) do\n    render conn, \"show.html\", messenger: messenger\n  end\nend\n```\n\n`render/3`\u95a2\u6570\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u3001\u305d\u308c\u305e\u308c\u306e\u540d\u524d\u306e\u5148\u982d\u3092\u7d71\u4e00\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001`HelloController`\u304b\u3089\u306f`HelloView`\u3092\u53c2\u7167\u3057\u307e\u3059\u3057\u3001`HelloView`\u306f`web/templates/hello`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53c2\u7167\u3057\u3001\u305d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u306f`render/3`\u3067\u6307\u5b9a\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8(\u4e0a\u8a18\u306e\u4f8b\u3060\u3068\"show.html.eex\")\u304c\u7121\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\n`render/3`\u306b\u306f\u3001\u7b2c\u4e09\u5f15\u6570\u3068\u3057\u3066\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3057\u307e\u3059\u304c\u3001\u95a2\u6570\u5185\u3067\u3053\u308c\u3092\u5236\u5fa1\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```\ndef index(conn, _params) do\n  conn\n  |> assign(:message, \"Welcome Back!\")\n  |> render(\"index.html\")\nend\n```\n\n\u4e0a\u8a18\u306e\u4f8b\u3092plug\u3092\u4f7f\u3063\u3066\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```\nplug :assign_welcome_message, \"Welcome Back\"\n\ndef index(conn, _params) do\n  conn\n  |> render(\"index.html\")\nend\n\ndefp assign_welcome_message(conn, msg) do\n  assign(conn, :message, :msg)\nend\n```\n\n\u306a\u304a\u3001plug\u306b\u306f\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u3060\u3051\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306a\u66f8\u304d\u65b9\u3082\u3042\u308a\u307e\u3059\u3002\n\n```\n  plug :assign_welcome_message, \"Hi!\" when action in[:index]\n```\n\n### \u30ec\u30b9\u30dd\u30f3\u30b9\n\n200\u4ee5\u5916\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u5834\u5408\u306b\u306f\u3001`send_resp/3`\u3092\u4f7f\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306econtent-type\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306b\u306f\u3001`put_resp_content_type/2`\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```\ndef index(conn, _params) do\n  conn\n  |> put_resp_content_type(\"text/plain\")\n  |> send_resp(201, \"\")\nend\n```\n\n### \u30ec\u30a4\u30a2\u30a6\u30c8\n\nLayout\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30b5\u30d6\u30bb\u30c3\u30c8\u3067\u3001`/web/templates/layout`\u306b\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002Phoenix\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067`app.html.eex`\u3068\u3044\u3046\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u751f\u6210\u3057\u3001\u5168\u3066\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u3053\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u4e0a\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\nLayout\u306f\u3042\u304f\u307e\u3067Template\u306b\u904e\u304e\u307e\u305b\u3093\u306e\u3067\u3001\u8868\u793a\u3059\u308b\u969b\u306b\u306fView\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002`LayoutView`\u30e2\u30b8\u30e5\u30fc\u30eb\u304c`/web/views/layout_view.ex`\u306b\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002Layout\u3092`/web/templates/layout`\u306b\u914d\u7f6e\u3059\u308b\u9650\u308a\u306f\u3001Layout\u7528\u306e\u65b0\u3057\u3044View\u3092\u751f\u6210\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n`Phoenix.Controller`\u30e2\u30b8\u30e5\u30fc\u30eb\u306e`put_layout/2`\u95a2\u6570\u3092\u4f7f\u3063\u3066\u3001\u4f7f\u7528\u3059\u308bLayout\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306b`false`\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30ec\u30a4\u30a2\u30a6\u30c8\u7121\u3057\u3067\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```\ndef index(conn, params) do\n  conn\n  |> put_layout(false)                # \u2190 ()\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\n  |> render \"index.html\"\nend\n```\n\n### \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n\u540c\u3058\u95a2\u6570\u3067HTML\u3084plain-text\u306a\u3069\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5207\u308a\u66ff\u3048\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```\ndefmodule HelloPhoenix.Router do\n  use HelloPhoenix.Web, :router\n\n  pipeline :browser do\n    plug :accepts, [\"html\", \"text\"]\n    ...\n  end\n\n  def index(conn, _params) do\n    render conn, :index\n  end\n  ...  \n```\n\n`http://localhost:4000/?_format=text`\u3068\u3059\u308b\u3068\u3001\"index.text.eex\"\u3092\u53c2\u7167\u3057\u3001html\u3060\u3068\"index.html.eex\"\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n### Content-Type\u306e\u30bb\u30c3\u30c8\n\nxml\u3092\u51fa\u529b\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```\ndef index(conn, _params) do\n  conn\n  |> put_resp_content_type(\"text/xml\")\n  |> render \"index.xml\", content: some_xml_content\nend\n```\n\n### HTTP\u30b9\u30c6\u30fc\u30bf\u30b9\n\n`put_status/2`\u3092\u4f7f\u3063\u3066\u3001200\u4ee5\u5916\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\ndef index(conn, _params) do\n  conn\n  |> put_status(202)\n  |> render(\"index.html\")\nend\n```\n\n### \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u306b\u306f\u3001`redirect/2`\u95a2\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```\ndefmodule HelloPhoenix.Router do\n  use HelloPhoenix.Web, :router\n  . . .\n\n  scope \"/\", HelloPhoenix do\n    . . .\n    get \"/\", PageController, :index\n  end\n\n  # New route for redirects\n  scope \"/\", HelloPhoenix do\n    get \"/redirect_test\", PageController, :redirect_test, as: :redirect_test\n  end\nend\n\ndefmodule HelloPhoenix.PageController do\n  . . .\n  def index(conn, _params) do\n    redirect conn, to: \"/redirect_test\"\n  end\n\n  def redirect_test(conn, _params) do\n    text conn, \"Redirect!\"\n  end\n  . . .\nend\n```\n\n\u5916\u90e8\u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u5834\u5408\u3001`to:`\u3067\u306f\u306a\u304f`external:`\u3092\u4f7f\u3044\u307e\u3059\n\n\n```\n"}