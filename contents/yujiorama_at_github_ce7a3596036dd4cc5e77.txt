{"context": " More than 1 year has passed since last update.Spring \u3067 JMock \u3092\u4f7f\u3063\u305f unit test \u3092\u3059\u308b\u305f\u3081\u306e\u3084\u308a\u65b9\u3002\n\npom.xml\n\u6b21\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8db3\u3057\u307e\u3059\u3002\n<dependency>\n    <groupId>junit</groupId>\n    <artifactId>junit</artifactId>\n    <version>4.10</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.jmock</groupId>\n    <artifactId>jmock</artifactId>\n    <version>2.5.1</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.jmock</groupId>\n    <artifactId>jmock-junit4</artifactId>\n    <version>2.5.1</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.jmock</groupId>\n    <artifactId>jmock-legacy</artifactId>\n    <version>2.5.1</version>\n    <scope>test</scope>\n</dependency>\n\n\napplicationContext.xml\n\u3053\u3093\u306a\u611f\u3058\u3067\u3002\n<?xml  version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:jee=\"http://www.springframework.org/schema/jee\" xmlns:lang=\"http://www.springframework.org/schema/lang\"\n    xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:tx=\"http://www.springframework.org/schema/tx\"\n    xmlns:util=\"http://www.springframework.org/schema/util\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd\n    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd\n    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\n    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd\">\n\n    <!-- \u30e2\u30c3\u30ab\u30ea\u30fc -->\n    <bean id=\"context\" class=\"org.jmock.integration.junit4.JUnit4Mockery\">\n        <property name=\"imposteriser\">\n            <util:constant static-field=\"org.jmock.lib.legacy.ClassImposteriser.INSTANCE\" />\n        </property>\n    </bean>\n\n    <!-- \u30e2\u30c3\u30af\u3059\u308b\u30b5\u30fc\u30d3\u30b9 -->\n    <bean id=\"mockService\" factory-bean=\"context\" factory-method=\"mock\" class=\"test.YourService\">\n        <constructor-arg value=\"test.YourService\" />\n    </bean>\n    <!-- YourService \u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30af\u30e9\u30b9 -->\n    <bean id=\"serviceProvider\" class=\"test.YourServiceProvider\">\n        <property name=\"service\" ref=\"mockService\" />\n    </bean>\n</beans>\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\u524d\u63d0\u3002\n- \u5168\u90e8 test \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5165\u3063\u3066\u308b\n- YourService \u3068\u3044\u3046\u30b5\u30fc\u30d3\u30b9\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u304c\u3042\u308b\n- ServiceProvider \u3068\u3044\u3046 YourService \u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u3042\u308b\n\u3067\u3001\u3053\u3046\u3057\u307e\u3059\u3002\npackage test;\n\nimport org.jmock.Expectations;\nimport org.jmock.Mockery;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\n\nimport javax.annotation.Resource;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations={\"applicationContext.xml\"})\npublic class YourServiceProviderTest {\n\n    @Autowired\n    Mockery context;\n\n    @Resource(name = \"mockService\")\n    YourService mockService;\n\n    @Resource(name = \"serviceProvider\")\n    YourServiceProvider serviceProvider;\n\n    @Test\n    public void () {\n        context.checking(new Expectations(){{\n            oneOf(mockService).someMethod(); will(returnValue(\"called\"));\n        }});\n        serviceProvider.control(\"hoge\");\n    }\n}\n\n\n\u6240\u611f\n\nJMock \u306e API\n\n\n\u5197\u9577\u3068\u3044\u3046\u4eba\u3082\u3044\u308b\u3068\u601d\u3046\u3051\u3069\u597d\u304d\u3067\u3059\n\u3060\u3051\u3069\u30b3\u30fc\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30bf\u30fc\u3068\u76f8\u6027\u304c\u60aa\u3044\n\n\n\u5177\u8c61\u30af\u30e9\u30b9\u304c\u30e2\u30c3\u30af\u3067\u304d\u306a\u3044\n\n\nimposteriser \u306b\u5225\u306e\u3084\u3064\u3092\u5165\u308c\u3066\u3084\u308c\u3070\u3067\u304d\u305f\u3088\u3046\u306a\u6c17\u304c\u3059\u308b\n\n\n\nSpring \u3067 JMock \u3092\u4f7f\u3063\u305f unit test \u3092\u3059\u308b\u305f\u3081\u306e\u3084\u308a\u65b9\u3002\n\npom.xml\n========\n\n\u6b21\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8db3\u3057\u307e\u3059\u3002\n\n    <dependency>\n        <groupId>junit</groupId>\n        <artifactId>junit</artifactId>\n        <version>4.10</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.jmock</groupId>\n        <artifactId>jmock</artifactId>\n        <version>2.5.1</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.jmock</groupId>\n        <artifactId>jmock-junit4</artifactId>\n        <version>2.5.1</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.jmock</groupId>\n        <artifactId>jmock-legacy</artifactId>\n        <version>2.5.1</version>\n        <scope>test</scope>\n    </dependency>\n\napplicationContext.xml\n========================\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3002\n\n    <?xml  version=\"1.0\" encoding=\"UTF-8\"?>\n    <beans xmlns=\"http://www.springframework.org/schema/beans\"\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\n        xmlns:context=\"http://www.springframework.org/schema/context\"\n        xmlns:jee=\"http://www.springframework.org/schema/jee\" xmlns:lang=\"http://www.springframework.org/schema/lang\"\n        xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:tx=\"http://www.springframework.org/schema/tx\"\n        xmlns:util=\"http://www.springframework.org/schema/util\"\n        xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd\n        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd\n        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd\">\n    \n        <!-- \u30e2\u30c3\u30ab\u30ea\u30fc -->\n        <bean id=\"context\" class=\"org.jmock.integration.junit4.JUnit4Mockery\">\n            <property name=\"imposteriser\">\n                <util:constant static-field=\"org.jmock.lib.legacy.ClassImposteriser.INSTANCE\" />\n            </property>\n        </bean>\n    \n        <!-- \u30e2\u30c3\u30af\u3059\u308b\u30b5\u30fc\u30d3\u30b9 -->\n        <bean id=\"mockService\" factory-bean=\"context\" factory-method=\"mock\" class=\"test.YourService\">\n            <constructor-arg value=\"test.YourService\" />\n        </bean>\n        <!-- YourService \u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30af\u30e9\u30b9 -->\n        <bean id=\"serviceProvider\" class=\"test.YourServiceProvider\">\n            <property name=\"service\" ref=\"mockService\" />\n        </bean>\n    </beans>\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n================\n\n\u524d\u63d0\u3002\n- \u5168\u90e8 test \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5165\u3063\u3066\u308b\n- YourService \u3068\u3044\u3046\u30b5\u30fc\u30d3\u30b9\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u304c\u3042\u308b\n- ServiceProvider \u3068\u3044\u3046 YourService \u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u3042\u308b\n\n\u3067\u3001\u3053\u3046\u3057\u307e\u3059\u3002\n\n    package test;\n    \n    import org.jmock.Expectations;\n    import org.jmock.Mockery;\n    import org.junit.Test;\n    import org.junit.runner.RunWith;\n    \n    import javax.annotation.Resource;\n    \n    import org.springframework.beans.factory.annotation.Autowired;\n    import org.springframework.test.context.ContextConfiguration;\n    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n    \n    @RunWith(SpringJUnit4ClassRunner.class)\n    @ContextConfiguration(locations={\"applicationContext.xml\"})\n    public class YourServiceProviderTest {\n    \n        @Autowired\n        Mockery context;\n    \n        @Resource(name = \"mockService\")\n        YourService mockService;\n    \n        @Resource(name = \"serviceProvider\")\n        YourServiceProvider serviceProvider;\n    \n        @Test\n        public void () {\n            context.checking(new Expectations(){{\n                oneOf(mockService).someMethod(); will(returnValue(\"called\"));\n            }});\n            serviceProvider.control(\"hoge\");\n        }\n    }\n\n\u6240\u611f\n========\n\n- JMock \u306e API\n - \u5197\u9577\u3068\u3044\u3046\u4eba\u3082\u3044\u308b\u3068\u601d\u3046\u3051\u3069\u597d\u304d\u3067\u3059\n - \u3060\u3051\u3069\u30b3\u30fc\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30bf\u30fc\u3068\u76f8\u6027\u304c\u60aa\u3044\n- \u5177\u8c61\u30af\u30e9\u30b9\u304c\u30e2\u30c3\u30af\u3067\u304d\u306a\u3044\n - imposteriser \u306b\u5225\u306e\u3084\u3064\u3092\u5165\u308c\u3066\u3084\u308c\u3070\u3067\u304d\u305f\u3088\u3046\u306a\u6c17\u304c\u3059\u308b\n", "tags": ["Java", "spring", "jmock", "testing"]}