{"tags": ["CentOS", "redhat", "postfix"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\npostfix\u3092\u5229\u7528\u3059\u308b\u3068\u304d\u306e\u3088\u304f\u3084\u308b\u8a2d\u5b9a\u30e1\u30e2\n\n\n\u74b0\u5883\n\nOS\uff1aCentOS /Redhat 6.x\npostfix\uff1apostfix-2.6.x\n\n\n\u624b\u9806\n\nmain.cf \u8a2d\u5b9a\n\n\u8ffd\u52a0\u3057\u305f\u308a\u5909\u66f4\u3057\u305f\u308a\u3059\u308b\u70b9\n\n\n/etc/postfix/main.cf\n# myhostname\u306b\u30db\u30b9\u30c8\u540d\u3092\u6307\u5b9a\nmyhostname = mail.hogehoge.com  \n\n# mydomain\u306b\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u6307\u5b9a\nmydomain = hogehoge.com\n\n# myorigin\u306e\u30b3\u30e1\u30f3\u30c8\u524a\u9664\nmyorigin = $mydomain\n\n# inet_protocol\u3092ipv4\u306b\u9650\u5b9a\ninet_protocols = ipv4\n\n# mydestination\u8a2d\u5b9a\u5909\u66f4\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\n\n# mynetworks\u3092\u81ea\u74b0\u5883\u306b\u5408\u308f\u305b\u5909\u66f4\nmynetworks = 127.0.0.0/8,192.168.0.0/24,10.0.0.0/8\n\n# relay_domains\u306e\u30b3\u30e1\u30f3\u30c8\u524a\u9664\nrelay_domains = $mydestination\n\n# header_checks\u306e\u30b3\u30e1\u30f3\u30c8\u524a\u9664\nheader_checks = regexp:/etc/postfix/header_checks\n\n# smtpd_banne\u8a2d\u5b9a\nsmtpd_banner = $myhostname ESMTP\n\n# \u6700\u4e0b\u884c\u306b\u4ee5\u4e0b\u8ffd\u8a18\nmessage_size_limit = 5242880\ndisable_vrfy_command = yes\nsmtpd_helo_required = yes\nstrict_rfc821_envelopes = yes\nallow_percent_hack = yes\nswap_bangpath = yes\nallow_untrusted_routing = no\nsmtpd_client_restrictions =\n   permit_mynetworks,\n   reject_unknown_client,\n   permit\nsmtpd_data_restrictions =\n   reject_unauth_pipelining,\n   reject_multi_recipient_bounce\nsmtpd_helo_restrictions =\n   permit_mynetworks,\n   reject_invalid_hostname,\n   reject_non_fqdn_hostname,\n   reject_unknown_hostname,\n   permit\nsmtpd_sender_restrictions =\n   permit_mynetworks,\n   reject_unknown_sender_domain,\n   reject_non_fqdn_sender,\n   permit\nsmtpd_recipient_restrictions =\n   permit_mynetworks,\n   reject_non_fqdn_recipient,\n   reject_unknown_recipient_domain,\n   reject_unauth_destination,\n   permit\nsmtpd_etrn_restrictions =\n   permit_mynetworks,\n   reject_invalid_hostname,\n   permit\n\n\n\nheader_checks\u8a2d\u5b9a\n\nReceived\u304b\u3089\u59cb\u307e\u308b\u884c\u3092\u524a\u9664\n\n\n/etc/postfix/header_checks\n/^Received:/ IGNORE\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n# service postfix restart\n# chkconfig postfix on\n\n\n\u30e1\u30fc\u30eb\u9001\u4fe1\u78ba\u8a8d\n\n\u9069\u5f53\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306b\u5411\u3051\u3066\u9001\u4fe1\u78ba\u8a8d\n\n# telnet localhost 25\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\n220 mail.hogehoge.com ESMTP\n\nHELO hogehoge.com\n250 mail.hogehoge.com\n\nMAIL FROM:<admin@hogehoge.com>\n250 2.1.0 Ok\n\nRCPT TO:<mail_to@fugafuga.com>\n250 2.1.5 Ok\n\nDATA\n354 End data with .\nHello test mail\n.\n250 2.0.0 Ok: queued as 952E42FD\n\nquit\n221 2.0.0 Bye\nConnection closed by foreign host.\n# \u6982\u8981\n* postfix\u3092\u5229\u7528\u3059\u308b\u3068\u304d\u306e\u3088\u304f\u3084\u308b\u8a2d\u5b9a\u30e1\u30e2\n\n# \u74b0\u5883\n* OS\uff1aCentOS /Redhat 6.x\n* postfix\uff1apostfix-2.6.x\n\n# \u624b\u9806\n## main.cf \u8a2d\u5b9a\n* \u8ffd\u52a0\u3057\u305f\u308a\u5909\u66f4\u3057\u305f\u308a\u3059\u308b\u70b9\n\n```bash:/etc/postfix/main.cf\n# myhostname\u306b\u30db\u30b9\u30c8\u540d\u3092\u6307\u5b9a\nmyhostname = mail.hogehoge.com  \n\n# mydomain\u306b\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u6307\u5b9a\nmydomain = hogehoge.com\n\n# myorigin\u306e\u30b3\u30e1\u30f3\u30c8\u524a\u9664\nmyorigin = $mydomain\n\n# inet_protocol\u3092ipv4\u306b\u9650\u5b9a\ninet_protocols = ipv4\n\n# mydestination\u8a2d\u5b9a\u5909\u66f4\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\n\n# mynetworks\u3092\u81ea\u74b0\u5883\u306b\u5408\u308f\u305b\u5909\u66f4\nmynetworks = 127.0.0.0/8,192.168.0.0/24,10.0.0.0/8\n\n# relay_domains\u306e\u30b3\u30e1\u30f3\u30c8\u524a\u9664\nrelay_domains = $mydestination\n\n# header_checks\u306e\u30b3\u30e1\u30f3\u30c8\u524a\u9664\nheader_checks = regexp:/etc/postfix/header_checks\n\n# smtpd_banne\u8a2d\u5b9a\nsmtpd_banner = $myhostname ESMTP\n\n# \u6700\u4e0b\u884c\u306b\u4ee5\u4e0b\u8ffd\u8a18\nmessage_size_limit = 5242880\ndisable_vrfy_command = yes\nsmtpd_helo_required = yes\nstrict_rfc821_envelopes = yes\nallow_percent_hack = yes\nswap_bangpath = yes\nallow_untrusted_routing = no\nsmtpd_client_restrictions =\n   permit_mynetworks,\n   reject_unknown_client,\n   permit\nsmtpd_data_restrictions =\n   reject_unauth_pipelining,\n   reject_multi_recipient_bounce\nsmtpd_helo_restrictions =\n   permit_mynetworks,\n   reject_invalid_hostname,\n   reject_non_fqdn_hostname,\n   reject_unknown_hostname,\n   permit\nsmtpd_sender_restrictions =\n   permit_mynetworks,\n   reject_unknown_sender_domain,\n   reject_non_fqdn_sender,\n   permit\nsmtpd_recipient_restrictions =\n   permit_mynetworks,\n   reject_non_fqdn_recipient,\n   reject_unknown_recipient_domain,\n   reject_unauth_destination,\n   permit\nsmtpd_etrn_restrictions =\n   permit_mynetworks,\n   reject_invalid_hostname,\n   permit\n```\n\n## header_checks\u8a2d\u5b9a\n* Received\u304b\u3089\u59cb\u307e\u308b\u884c\u3092\u524a\u9664\n\n```bash:/etc/postfix/header_checks\n/^Received:/ IGNORE\n```\n\n## \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n<pre>\n# service postfix restart\n# chkconfig postfix on\n</pre>\n\n## \u30e1\u30fc\u30eb\u9001\u4fe1\u78ba\u8a8d\n* \u9069\u5f53\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306b\u5411\u3051\u3066\u9001\u4fe1\u78ba\u8a8d\n\n<pre>\n\\# telnet localhost 25\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\n220 mail.hogehoge.com ESMTP\n\nHELO hogehoge.com\n250 mail.hogehoge.com\n\nMAIL FROM:\\<admin@hogehoge.com>           \n250 2.1.0 Ok\n\nRCPT TO:\\<mail_to@fugafuga.com>\n250 2.1.5 Ok\n\nDATA\n354 End data with <CR><LF>.<CR><LF>\nHello test mail\n.\n250 2.0.0 Ok: queued as 952E42FD\n\nquit\n221 2.0.0 Bye\nConnection closed by foreign host.\n"}