{"context": "@maru1981\u3055\u3093\u306eHDP SANDBOX on AWS EC2\u3092\u53c2\u8003\u306b\u3001SoftLayer\u4e0a\u3067HDP SANDBOX\u306eDocker\u30b3\u30f3\u30c6\u30ca\u3092\u7a3c\u50cd\u3055\u305b\u3066\u3001Rancher\u3067\u7ba1\u7406\u3059\u308b\u307e\u3067\u3092\u8a66\u3057\u3066\u307f\u305f\u8a18\u9332\u3067\u3059\u3002\n\n1.SoftLayer\u3067\u30b5\u30fc\u30d0\u306e\u6e96\u5099\nSoftLayer\u4e0a\u306b\u4eee\u60f3\u30b5\u30fc\u30d0(1\u53f0)\u3092\u4ee5\u4e0b\u306e\u69cb\u6210\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\n\u9805\u76ee\n\u8a2d\u5b9a\u5185\u5bb9\n\u5099\u8003\n\n\n\n\nData Center\nSJC01 - San Jose\nHortonworks\u672c\u793e\u306e\u8fd1\u304f\u3068\u3044\u3046\u3053\u3068\u3067\uff01\n\n\nComputing Instance\n4 x 2.0 GHz Cores\n-\n\n\nRAM\n16GB\n8GB\u4ee5\u4e0a\u5fc5\u8981\u3067\u3059\u3002\n\n\n\u30c7\u30a3\u30b9\u30af\n100GB\n1\u53f0\u3067OK\u3067\u3059\u3002\n\n\nOperating System\nCentOS7.x - Minimal Install(64 bit)\nHDP SANDBOX\u306f\u78ba\u304bRHEL\u7cfb\u3060\u3063\u305f\u306e\u3067CentOS\u306b\u3057\u307e\u3057\u305f\u3002\n\n\n\n\n2.Docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u6700\u65b0\u306eDocker-engine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u4f5c\u696d\u306f\u3001root\u30e6\u30fc\u30b6\u3067\u884c\u3044\u307e\u3057\u305f\u3002\n# yum update -y\n\n# wget -qO- https://get.docker.com/ | sh\n+ sh -c 'sleep 3; yum -y -q install docker-engine'\nwarning: /var/cache/yum/x86_64/7/docker-main-repo/packages/docker-engine-1.12.3-1.el7.centos.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 2c52609d: NOKEY\nPublic key for docker-engine-1.12.3-1.el7.centos.x86_64.rpm is not installed\nImporting GPG key 0x2C52609D:\n Userid     : \"Docker Release Tool (releasedocker) <docker@docker.com>\"\n Fingerprint: 5811 8e89 f3a9 1289 7c07 0adb f762 2157 2c52 609d\n From       : https://yum.dockerproject.org/gpg\nrestorecon:  lstat(/var/lib/docker) failed:  No such file or directory\nwarning: %post(docker-engine-selinux-1.12.3-1.el7.centos.noarch) scriptlet failed, exit status 255\nNon-fatal POSTIN scriptlet failure in rpm package docker-engine-selinux-1.12.3-1.el7.centos.noarch\n\nIf you would like to use Docker as a non-root user, you should now consider\nadding your user to the \"docker\" group with something like:\n\n  sudo usermod -aG docker your-user\n\nRemember that you will have to log out and back in for this to take effect!\n\n# docker version\nClient:\n Version:      1.12.3\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   6b644ec\n Built:\n OS/Arch:      linux/amd64\nCannot connect to the Docker daemon. Is the docker daemon running on this host?\n\nyum install docker \u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001CentOS\u306e\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u306eDocker\u3068\u306a\u308a\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u306fdocker.x86_64 0:1.10.3-46.el7.centos.14\u3068\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u516c\u5f0f\u306eDocker-engin\u306e\u6700\u65b0\u7248\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\u306f\u3001wget -qO- https://get.docker.com/ | sh \u3068\u306a\u308a\u307e\u3059\u3002\n\n3.Docker\u306e\u8a2d\u5b9a\n\na.Base Device Size\u306e\u5909\u66f4\nBase Device Size\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e10GB\u3060\u3068\u3001HDP\u306e\u30a4\u30e1\u30fc\u30b8\u5bb9\u91cf\u304c\u5927\u304d\u304fdocker load\u3067\u5931\u6557\u3059\u308b\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u300110GB\u304b\u308930GB\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n# cp /lib/systemd/system/docker.service /etc/systemd/system/docker.service\n\n# vi /etc/systemd/system/docker.service\n=========================================================\nExecStart=/usr/bin/dockerd\n\u2193\u5909\u66f4\nExecStart=/usr/bin/dockerd --storage-opt=dm.basesize=30G\n=========================================================\n:wq\n\n# systemctl daemon-reload\n\n# systemctl restart docker\n\n# docker info\n(\u4e2d\u7565)\nBase Device Size: 32.21 GB\n\n\nb.HDP SANDBOX\u30a4\u30e1\u30fc\u30b8\u3092\u30ed\u30fc\u30c9\n\u307e\u305a\u306f\u3001HDP SANDBOX\u30a4\u30e1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n# wget http://hortonassets.s3.amazonaws.com/2.5/HDP_2.5_docker.tar.gz\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fHDP SANDBOX\u30a4\u30e1\u30fc\u30b8\u3092docker load\u3057\u307e\u3059\u3002\n\u5c11\u3057\u6642\u9593\u3092\u8981\u3057\u307e\u3059\u3002\n# docker load < HDP_2.5_docker.tar.gz\ndocker load < HDP_2.5_docker.tar.gz\nb1b065555b8a: Loading layer 202.2 MB/202.2 MB\n3901568415a3: Loading layer 13.85 GB/13.85 GB\nLoaded image: sandbox:latest\n\n# docker images\nsandbox                   latest              a4150ee4e70b        5 weeks ago         13.96 GB\n\n\n4.HDP SANDBOX\u306e\u8d77\u52d5\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u516c\u5f0f\u306estart_sandbox.sh\u306e\u5185\u5bb9\u3092\u3053\u3061\u3089\u304b\u3089\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n# vi start_sandbox.sh\n=======================================================================\n#!/bin/bash\necho \"Waiting for docker daemon to start up:\"\nuntil /usr/bin/docker ps 2>&1| grep STATUS>/dev/null; do  sleep 1; done;  >/dev/null\n/usr/bin/docker ps -a | grep sandbox\nif [ $? -eq 0 ]; then\n /usr/bin/docker start sandbox\nelse\ndocker run -v hadoop:/hadoop --name sandbox --hostname \"sandbox.hortonworks.com\" --privileged -d \\\n-p 6080:6080 \\\n-p 9090:9090 \\\n-p 9000:9000 \\\n-p 8000:8000 \\\n-p 8020:8020 \\\n-p 42111:42111 \\\n-p 10500:10500 \\\n-p 16030:16030 \\\n-p 8042:8042 \\\n-p 8040:8040 \\\n-p 2100:2100 \\\n-p 4200:4200 \\\n-p 4040:4040 \\\n-p 8050:8050 \\\n-p 9996:9996 \\\n-p 9995:9995 \\\n-p 8080:8080 \\\n-p 8088:8088 \\\n-p 8886:8886 \\\n-p 8889:8889 \\\n-p 8443:8443 \\\n-p 8744:8744 \\\n-p 8888:8888 \\\n-p 8188:8188 \\\n-p 8983:8983 \\\n-p 1000:1000 \\\n-p 1100:1100 \\\n-p 11000:11000 \\\n-p 10001:10001 \\\n-p 15000:15000 \\\n-p 10000:10000 \\\n-p 8993:8993 \\\n-p 1988:1988 \\\n-p 5007:5007 \\\n-p 50070:50070 \\\n-p 19888:19888 \\\n-p 16010:16010 \\\n-p 50111:50111 \\\n-p 50075:50075 \\\n-p 50095:50095 \\\n-p 18080:18080 \\\n-p 60000:60000 \\\n-p 8090:8090 \\\n-p 8091:8091 \\\n-p 8005:8005 \\\n-p 8086:8086 \\\n-p 8082:8082 \\\n-p 60080:60080 \\\n-p 8765:8765 \\\n-p 5011:5011 \\\n-p 6001:6001 \\\n-p 6003:6003 \\\n-p 6008:6008 \\\n-p 1220:1220 \\\n-p 21000:21000 \\\n-p 6188:6188 \\\n-p 61888:61888 \\\n-p 2222:22 \\\nsandbox /usr/sbin/sshd -D\nfi\n#docker exec -t sandbox /etc/init.d/startup_script start\ndocker exec -t sandbox make --makefile /usr/lib/hue/tools/start_scripts/start_deps.mf  -B Startup -j -i\ndocker exec -t sandbox nohup su - hue -c '/bin/bash /usr/lib/tutorials/tutorials_app/run/run.sh' &>/dev/nul\ndocker exec -t sandbox touch /usr/hdp/current/oozie-server/oozie-server/work/Catalina/localhost/oozie/SESSIONS.ser\ndocker exec -t sandbox chown oozie:hadoop /usr/hdp/current/oozie-server/oozie-server/work/Catalina/localhost/oozie/SESSIONS.ser\ndocker exec -d sandbox /etc/init.d/tutorials start\ndocker exec -d sandbox /etc/init.d/splash\ndocker exec -d sandbox /etc/init.d/shellinaboxd start\n=======================================================================\n:wq\n\n# chmod +x start_sandbox.sh\n\n# bash start_sandbox.sh\n\n\n5.HDP\u306e\u30b9\u30bf\u30fc\u30c8\n\u30d6\u30e9\u30a6\u30b6\u3092\u8d77\u52d5\u3057\u3066\u3001http://\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9:8888/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Launch Dashboard\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nAmbari\u306e\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306eUsername/Password\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\nUsername\uff1amaria_dev\nPassword\uff1amaria_dev\n\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u3067HDP SANDBOX\u306e\u74b0\u5883\u69cb\u7bc9\u306f\u7d42\u4e86\u3068\u306a\u308a\u307e\u3059\u3002\n\n6.Rancher Agent\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRancher\u306e\u30de\u30cd\u30fc\u30b8\u30e3\u30db\u30b9\u30c8\u306e\u69cb\u7bc9\u3055\u308c\u305f\u3053\u3068\u3092\u524d\u63d0\u3057\u307e\u3059\u306e\u3067\u3001Rancher\u30de\u30cd\u30fc\u30b8\u30e3\u30db\u30b9\u30c8\u306e\u69cb\u7bc9\u306f\u300cHadoop + Yarn Docker on SoftLayer by Rancher\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nRancher\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fv1.2.0\u3001\u8a00\u8a9e\u74b0\u5883\u306f\u65e5\u672c\u8a9e\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\na.Rancher\u306e\u74b0\u5883\u3092\u4f5c\u6210\nRancher\u306e\u7ba1\u7406\u753b\u9762\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u300c\u74b0\u5883\u300d\u304b\u3089\u300c\u74b0\u5883\u3092\u7ba1\u7406\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u300c\u74b0\u5883\u3092\u8ffd\u52a0\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u540d\u524d\u3092HDP(\u4efb\u610f\u540d)\u306b\u3057\u3066\u3001\u300c\u4f5c\u6210\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n\n\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u300c\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u300d\u304b\u3089\u300c\u30db\u30b9\u30c8\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u300c\u30db\u30b9\u30c8\u3092\u8ffd\u52a0\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n\n\u8d64\u67a0\u306e\u30b3\u30de\u30f3\u30c9\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30b5\u30fc\u30d0\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u3001\u30b3\u30f3\u30c6\u30ca\u306ePull\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u306b\u300c\u9589\u3058\u308b\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n# docker run -d --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/rancher:/var/lib/rancher rancher/agent:v1.1.0 http://Rancher\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9:8080/v1/scripts/7E0CA449959F4B634E4D:1480946400000:uLwKStkhQHBCuPz4j9eoqm0NDM\n\n\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u300c\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u300d\u304b\u3089\u300c\u30b3\u30f3\u30c6\u30ca\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u5bfe\u8c61\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bHDP SANDBOX\u30b3\u30f3\u30c6\u30ca\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u72b6\u614b\u7b49\u3092\u76e3\u8996\u53ca\u3073\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002\n\n\n\u4ee5\u4e0a\u3067HDP SANDBOX on SoftLayer by Rancher\u306f\u5b8c\u4e86\u3068\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306fSoftLayer\u3067\u5b9f\u65bd\u3057\u307e\u3057\u305f\u304c\u3001\u3053\u3061\u3089\u306e\u5185\u5bb9\u3067GCP\u3001Azure\u3001AWS\u3001\u305d\u306e\u4ed6\u306e\u30af\u30e9\u30a6\u30c9\u3067\u3082\u5b9f\u65bd\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\u6700\u5f8c\u306b\u306a\u308a\u307e\u3059\u304c\u3001@maru1981\u3055\u3093\u3001\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u611f\u8b1d\u3044\u305f\u3057\u307e\u3059\u3002\n\u53c2\u8003\u30b5\u30a4\u30c8\n\nHDP SANDBOX on AWS EC2\nHadoop + Yarn Docker on SoftLayer by Rancher\n\n@maru1981\u3055\u3093\u306e[HDP SANDBOX on AWS EC2](http://www.stay-ko.be/hadoop/hdp_on_ec2)\u3092\u53c2\u8003\u306b\u3001SoftLayer\u4e0a\u3067HDP SANDBOX\u306eDocker\u30b3\u30f3\u30c6\u30ca\u3092\u7a3c\u50cd\u3055\u305b\u3066\u3001Rancher\u3067\u7ba1\u7406\u3059\u308b\u307e\u3067\u3092\u8a66\u3057\u3066\u307f\u305f\u8a18\u9332\u3067\u3059\u3002\n\n# 1.SoftLayer\u3067\u30b5\u30fc\u30d0\u306e\u6e96\u5099\n\nSoftLayer\u4e0a\u306b\u4eee\u60f3\u30b5\u30fc\u30d0(1\u53f0)\u3092\u4ee5\u4e0b\u306e\u69cb\u6210\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|\u9805\u76ee|\u8a2d\u5b9a\u5185\u5bb9|\u5099\u8003|\n|:-----------------|:------------------|:------------------|\n|Data Center      |SJC01 - San Jose| Hortonworks\u672c\u793e\u306e\u8fd1\u304f\u3068\u3044\u3046\u3053\u3068\u3067\uff01|\n|Computing Instance|4 x 2.0 GHz Cores|-|\n|RAM|16GB|8GB\u4ee5\u4e0a\u5fc5\u8981\u3067\u3059\u3002|\n|\u30c7\u30a3\u30b9\u30af|100GB|1\u53f0\u3067OK\u3067\u3059\u3002|\n|Operating System|CentOS7.x - Minimal Install(64 bit) |HDP SANDBOX\u306f\u78ba\u304bRHEL\u7cfb\u3060\u3063\u305f\u306e\u3067CentOS\u306b\u3057\u307e\u3057\u305f\u3002|\n\n# 2.Docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u6700\u65b0\u306eDocker-engine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u4f5c\u696d\u306f\u3001root\u30e6\u30fc\u30b6\u3067\u884c\u3044\u307e\u3057\u305f\u3002\n\n```\u30b3\u30de\u30f3\u30c9\n# yum update -y\n\n# wget -qO- https://get.docker.com/ | sh\n+ sh -c 'sleep 3; yum -y -q install docker-engine'\nwarning: /var/cache/yum/x86_64/7/docker-main-repo/packages/docker-engine-1.12.3-1.el7.centos.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 2c52609d: NOKEY\nPublic key for docker-engine-1.12.3-1.el7.centos.x86_64.rpm is not installed\nImporting GPG key 0x2C52609D:\n Userid     : \"Docker Release Tool (releasedocker) <docker@docker.com>\"\n Fingerprint: 5811 8e89 f3a9 1289 7c07 0adb f762 2157 2c52 609d\n From       : https://yum.dockerproject.org/gpg\nrestorecon:  lstat(/var/lib/docker) failed:  No such file or directory\nwarning: %post(docker-engine-selinux-1.12.3-1.el7.centos.noarch) scriptlet failed, exit status 255\nNon-fatal POSTIN scriptlet failure in rpm package docker-engine-selinux-1.12.3-1.el7.centos.noarch\n\nIf you would like to use Docker as a non-root user, you should now consider\nadding your user to the \"docker\" group with something like:\n\n  sudo usermod -aG docker your-user\n\nRemember that you will have to log out and back in for this to take effect!\n\n# docker version\nClient:\n Version:      1.12.3\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   6b644ec\n Built:\n OS/Arch:      linux/amd64\nCannot connect to the Docker daemon. Is the docker daemon running on this host?\n```\n\nyum install docker \u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001CentOS\u306e\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u306eDocker\u3068\u306a\u308a\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u306fdocker.x86_64 0:1.10.3-46.el7.centos.14\u3068\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u516c\u5f0f\u306eDocker-engin\u306e\u6700\u65b0\u7248\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\u306f\u3001wget -qO- https://get.docker.com/ | sh \u3068\u306a\u308a\u307e\u3059\u3002\n\n# 3.Docker\u306e\u8a2d\u5b9a\n\n## a.Base Device Size\u306e\u5909\u66f4\nBase Device Size\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e10GB\u3060\u3068\u3001HDP\u306e\u30a4\u30e1\u30fc\u30b8\u5bb9\u91cf\u304c\u5927\u304d\u304fdocker load\u3067\u5931\u6557\u3059\u308b\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u300110GB\u304b\u308930GB\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9\n# cp /lib/systemd/system/docker.service /etc/systemd/system/docker.service\n\n# vi /etc/systemd/system/docker.service\n=========================================================\nExecStart=/usr/bin/dockerd\n\u2193\u5909\u66f4\nExecStart=/usr/bin/dockerd --storage-opt=dm.basesize=30G\n=========================================================\n:wq\n\n# systemctl daemon-reload\n\n# systemctl restart docker\n\n# docker info\n(\u4e2d\u7565)\nBase Device Size: 32.21 GB\n```\n\n## b.HDP SANDBOX\u30a4\u30e1\u30fc\u30b8\u3092\u30ed\u30fc\u30c9\n\n\u307e\u305a\u306f\u3001HDP SANDBOX\u30a4\u30e1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9\n# wget http://hortonassets.s3.amazonaws.com/2.5/HDP_2.5_docker.tar.gz\n```\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fHDP SANDBOX\u30a4\u30e1\u30fc\u30b8\u3092docker load\u3057\u307e\u3059\u3002\n\u5c11\u3057\u6642\u9593\u3092\u8981\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9\n# docker load < HDP_2.5_docker.tar.gz\ndocker load < HDP_2.5_docker.tar.gz\nb1b065555b8a: Loading layer 202.2 MB/202.2 MB\n3901568415a3: Loading layer 13.85 GB/13.85 GB\nLoaded image: sandbox:latest\n\n# docker images\nsandbox                   latest              a4150ee4e70b        5 weeks ago         13.96 GB\n```\n\n# 4.HDP SANDBOX\u306e\u8d77\u52d5\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u516c\u5f0f\u306estart_sandbox.sh\u306e\u5185\u5bb9\u3092[\u3053\u3061\u3089](https://github.com/hortonworks/tutorials/blob/hdp-2.5/tutorials/hortonworks/hortonworks-sandbox-hdp2.5-guide/start_sandbox.sh)\u304b\u3089\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9\n# vi start_sandbox.sh\n=======================================================================\n#!/bin/bash\necho \"Waiting for docker daemon to start up:\"\nuntil /usr/bin/docker ps 2>&1| grep STATUS>/dev/null; do  sleep 1; done;  >/dev/null\n/usr/bin/docker ps -a | grep sandbox\nif [ $? -eq 0 ]; then\n /usr/bin/docker start sandbox\nelse\ndocker run -v hadoop:/hadoop --name sandbox --hostname \"sandbox.hortonworks.com\" --privileged -d \\\n-p 6080:6080 \\\n-p 9090:9090 \\\n-p 9000:9000 \\\n-p 8000:8000 \\\n-p 8020:8020 \\\n-p 42111:42111 \\\n-p 10500:10500 \\\n-p 16030:16030 \\\n-p 8042:8042 \\\n-p 8040:8040 \\\n-p 2100:2100 \\\n-p 4200:4200 \\\n-p 4040:4040 \\\n-p 8050:8050 \\\n-p 9996:9996 \\\n-p 9995:9995 \\\n-p 8080:8080 \\\n-p 8088:8088 \\\n-p 8886:8886 \\\n-p 8889:8889 \\\n-p 8443:8443 \\\n-p 8744:8744 \\\n-p 8888:8888 \\\n-p 8188:8188 \\\n-p 8983:8983 \\\n-p 1000:1000 \\\n-p 1100:1100 \\\n-p 11000:11000 \\\n-p 10001:10001 \\\n-p 15000:15000 \\\n-p 10000:10000 \\\n-p 8993:8993 \\\n-p 1988:1988 \\\n-p 5007:5007 \\\n-p 50070:50070 \\\n-p 19888:19888 \\\n-p 16010:16010 \\\n-p 50111:50111 \\\n-p 50075:50075 \\\n-p 50095:50095 \\\n-p 18080:18080 \\\n-p 60000:60000 \\\n-p 8090:8090 \\\n-p 8091:8091 \\\n-p 8005:8005 \\\n-p 8086:8086 \\\n-p 8082:8082 \\\n-p 60080:60080 \\\n-p 8765:8765 \\\n-p 5011:5011 \\\n-p 6001:6001 \\\n-p 6003:6003 \\\n-p 6008:6008 \\\n-p 1220:1220 \\\n-p 21000:21000 \\\n-p 6188:6188 \\\n-p 61888:61888 \\\n-p 2222:22 \\\nsandbox /usr/sbin/sshd -D\nfi\n#docker exec -t sandbox /etc/init.d/startup_script start\ndocker exec -t sandbox make --makefile /usr/lib/hue/tools/start_scripts/start_deps.mf  -B Startup -j -i\ndocker exec -t sandbox nohup su - hue -c '/bin/bash /usr/lib/tutorials/tutorials_app/run/run.sh' &>/dev/nul\ndocker exec -t sandbox touch /usr/hdp/current/oozie-server/oozie-server/work/Catalina/localhost/oozie/SESSIONS.ser\ndocker exec -t sandbox chown oozie:hadoop /usr/hdp/current/oozie-server/oozie-server/work/Catalina/localhost/oozie/SESSIONS.ser\ndocker exec -d sandbox /etc/init.d/tutorials start\ndocker exec -d sandbox /etc/init.d/splash\ndocker exec -d sandbox /etc/init.d/shellinaboxd start\n=======================================================================\n:wq\n\n# chmod +x start_sandbox.sh\n\n# bash start_sandbox.sh\n```\n\n# 5.HDP\u306e\u30b9\u30bf\u30fc\u30c8\n\n\u30d6\u30e9\u30a6\u30b6\u3092\u8d77\u52d5\u3057\u3066\u3001http://\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9:8888/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Launch Dashboard\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![launch_dashboard.png](https://qiita-image-store.s3.amazonaws.com/0/61606/f90e09af-0909-aa94-e74f-d2d3cf9bfbad.png)\n\nAmbari\u306e\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306eUsername/Password\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\nUsername\uff1amaria_dev\nPassword\uff1amaria_dev\n\n![ambari.png](https://qiita-image-store.s3.amazonaws.com/0/61606/1361e261-d6ba-0ee4-9265-070bf7479dbe.png)\n\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n![ambari2.png](https://qiita-image-store.s3.amazonaws.com/0/61606/f1af02eb-792b-c69e-d81f-c750b9019ba1.png)\n\n\u4ee5\u4e0a\u3067HDP SANDBOX\u306e\u74b0\u5883\u69cb\u7bc9\u306f\u7d42\u4e86\u3068\u306a\u308a\u307e\u3059\u3002\n\n# 6.Rancher Agent\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nRancher\u306e\u30de\u30cd\u30fc\u30b8\u30e3\u30db\u30b9\u30c8\u306e\u69cb\u7bc9\u3055\u308c\u305f\u3053\u3068\u3092\u524d\u63d0\u3057\u307e\u3059\u306e\u3067\u3001Rancher\u30de\u30cd\u30fc\u30b8\u30e3\u30db\u30b9\u30c8\u306e\u69cb\u7bc9\u306f\u300c[Hadoop + Yarn Docker on SoftLayer by Rancher](http://qiita.com/cyberblack28/items/4c9c36f3a49622594c55)\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nRancher\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fv1.2.0\u3001\u8a00\u8a9e\u74b0\u5883\u306f\u65e5\u672c\u8a9e\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n## a.Rancher\u306e\u74b0\u5883\u3092\u4f5c\u6210\nRancher\u306e\u7ba1\u7406\u753b\u9762\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u300c\u74b0\u5883\u300d\u304b\u3089\u300c\u74b0\u5883\u3092\u7ba1\u7406\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![rancher1.png](https://qiita-image-store.s3.amazonaws.com/0/61606/c5bbf7b5-1e36-4106-3a75-211d51624cd6.png)\n\n\u300c\u74b0\u5883\u3092\u8ffd\u52a0\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![rancher2.png](https://qiita-image-store.s3.amazonaws.com/0/61606/0dd24c8e-4631-06dd-bd11-1666e90baa31.png)\n\n\u540d\u524d\u3092HDP(\u4efb\u610f\u540d)\u306b\u3057\u3066\u3001\u300c\u4f5c\u6210\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n\n![rancher3.png](https://qiita-image-store.s3.amazonaws.com/0/61606/bfa5e427-e7f4-1159-c5d8-d0c2ae96cde5.png)\n\n\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u300c\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u300d\u304b\u3089\u300c\u30db\u30b9\u30c8\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u300c\u30db\u30b9\u30c8\u3092\u8ffd\u52a0\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n\n![rancher4.png](https://qiita-image-store.s3.amazonaws.com/0/61606/1233ed1c-2b82-52d7-4dbc-62e7f78ecaa4.png)\n\n\u8d64\u67a0\u306e\u30b3\u30de\u30f3\u30c9\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30b5\u30fc\u30d0\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n![rancher5.png](https://qiita-image-store.s3.amazonaws.com/0/61606/643be4bc-6510-de4f-c5eb-4945fb956913.png)\n\n\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u3001\u30b3\u30f3\u30c6\u30ca\u306ePull\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u306b\u300c\u9589\u3058\u308b\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9\n# docker run -d --privileged -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/rancher:/var/lib/rancher rancher/agent:v1.1.0 http://Rancher\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9:8080/v1/scripts/7E0CA449959F4B634E4D:1480946400000:uLwKStkhQHBCuPz4j9eoqm0NDM\n```\n\n\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u300c\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u300d\u304b\u3089\u300c\u30b3\u30f3\u30c6\u30ca\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u5bfe\u8c61\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![rancher6.png](https://qiita-image-store.s3.amazonaws.com/0/61606/58718b76-7b98-3cb9-514c-9674ee460149.png)\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bHDP SANDBOX\u30b3\u30f3\u30c6\u30ca\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u72b6\u614b\u7b49\u3092\u76e3\u8996\u53ca\u3073\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002\n\n![screencapture-169-54-135-242-8080-env-1a2876-infra-containers-1i4155-ports-1480950589008.png](https://qiita-image-store.s3.amazonaws.com/0/61606/7b1c5801-4a38-e702-748c-c53bf0a87c71.png)\n\n***\n\n\u4ee5\u4e0a\u3067HDP SANDBOX on SoftLayer by Rancher\u306f\u5b8c\u4e86\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u4eca\u56de\u306fSoftLayer\u3067\u5b9f\u65bd\u3057\u307e\u3057\u305f\u304c\u3001\u3053\u3061\u3089\u306e\u5185\u5bb9\u3067GCP\u3001Azure\u3001AWS\u3001\u305d\u306e\u4ed6\u306e\u30af\u30e9\u30a6\u30c9\u3067\u3082\u5b9f\u65bd\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n\u6700\u5f8c\u306b\u306a\u308a\u307e\u3059\u304c\u3001@maru1981\u3055\u3093\u3001\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u611f\u8b1d\u3044\u305f\u3057\u307e\u3059\u3002\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\n- [HDP SANDBOX on AWS EC2](http://www.stay-ko.be/hadoop/hdp_on_ec2)\n- [Hadoop + Yarn Docker on SoftLayer by Rancher](http://qiita.com/cyberblack28/items/4c9c36f3a49622594c55)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "tags": ["rancher", "hadoop", "YARN", "HDP", "Hortonworks"]}