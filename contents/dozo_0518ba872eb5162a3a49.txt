{"context": " More than 1 year has passed since last update.\u95a2\u9023\u8a18\u4e8b:\n\nVirtualBox+Ubuntu\u306bLEMP\u74b0\u5883\u69cb\u7bc9\nnginScript\u3092\u8a66\u3059(1):nginx\u3092\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\nnginx\u3067http2(1)\n\n\u6b21\u306fPHP\u3092\u52d5\u304b\u3059\n\u30fe(\u30fb\u03c9<)\uff89\"\u3000\u4e09\u4e09\u4e09\u25cf\u3000\u2171\u2172 \u30b3\u30ed\u30b3\u30ed\u266a\n\n------------------- \u2193 \u4f59\u8ac7\u306f\u3053\u3053\u304b\u3089 \u2193-------------------\nHTTP/2\u306e\u52d5\u4f5c\u78ba\u8a8d\u306f\u3067\u304d\u305f\u306e\u3067\u3001\n\u4eca\u5ea6\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\nPHP\u5074\u3067\u7279\u306b\u8a2d\u5b9a\u306f\u3044\u3089\u306a\u3044\u306e\u3067\u3001\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fdebian\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u305f\u3002\n\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3067\u53d7\u3051\u3066\u3082\u3044\u3044\u3051\u3069\u3001\n\u4eca\u56de\u306fSOCK\u7d4c\u7531\u3067\u53d7\u3051\u3066\u307f\u3088\u3046\u3068\u601d\u3046\u3002\n\u30fe(\u30fb\u03c9<)\uff89\"\u3000\u4e09\u4e09\u4e09\u25cf\u3000\u2171\u2172 \u30b3\u30ed\u30b3\u30ed\u266a\n\n------------------- \u2193 \u672c\u984c\u306f\u3053\u3053\u304b\u3089 \u2193-------------------\n\nnginx\u3092HTTP/2\u5bfe\u5fdc\u306e\u30b5\u30fc\u30d0\u306bPHP\u3092\u5165\u308c\u308b\nHTTP/2\u5bfe\u5fdc\u306enginx\u69cb\u7bc9\u306f\u524d\u56de\u3084\u3063\u305f\u306e\u3067\u305d\u3063\u3061\u3092\u898b\u3066\u307b\u3057\u3044\u3002\n\nPHP\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install php5-fpm\n\n\nnginx\u306e\u8abf\u6574\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u8abf\u6574\nnginx\u5074\u306bsock\u306epath\u3092\u767b\u9332\n\n/usr/local/nginx/conf/nginx.conf\nhttp {\n    server {\n        listen       443 ssl http2;\n        server_name  localhost;\n        \u30fb\u30fb\u30fb\n        location ~ \\.php$ {\n            root           html;\n        #    fastcgi_pass   127.0.0.1:9000;\n            fastcgi_pass   unix:/var/run/php5-fpm.sock;\n            fastcgi_index  index.php;\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n        }\n    }\n}\n\n\n\n\u518d\u8d77\u52d5\nsudo /usr/local/nginx/sbin/nginx -t # \u8a2d\u5b9a\u5909\u66f4\u78ba\u8a8d\nsudo /usr/local/nginx/sbin/nginx -s quit # \u7d42\u4e86\nsudo /usr/local/nginx/sbin/nginx # \u8d77\u52d5\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\n/usr/local/nginx/html/index.php\n<?php phpinfo();\n\n\n\n\u30fe(\u30fb\u03c9<)\uff89\"\u3000\u4e09\u4e09\u4e09\u25cf\u3000\u2171\u2172 \u30b3\u30ed\u30b3\u30ed\u266a\n\n------------------- \u2193 \u88dc\u8db3\u306f\u3053\u3053\u304b\u3089 \u2193-------------------\n\u3055\u3066\u3001\u52d5\u4f5c\u78ba\u8a8d\u306f\u3067\u304d\u305f\u306e\u3067\u3001\n\u3053\u3053\u3067\u306f\u30ea\u30e9\u30a4\u30c8\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8003\u3048\u3088\u3046\u3002\n\u6700\u8fd1\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306a\u3089\u3070URL\u3092\u7dba\u9e97\u306b\u3059\u308b(SEO\u306b\u6700\u9069\u306aURL\u306b\u3059\u308b)\u3068\u3044\u3046\u624b\u6cd5\u304c\u4e00\u822c\u7684\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3002\n\u5bfe\u5fdc\u65b9\u6cd5\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u3088\u3063\u3066\u307e\u3061\u307e\u3061\u3067\u3042\u308b\u304c\u3001\n\u4e3b\u306b\u4ee5\u4e0b\u306e\u4e8c\u3064\u3060\u3068\u601d\u3046\u3002\n\n\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\n\u7279\u5b9a\u306e\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092URL\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u53d6\u308a\u8fbc\u3080\u65b9\u6cd5\nPATHINFO\ncgi\u306ePATHINFO\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u53d6\u308a\u8fbc\u3080\u65b9\u6cd5\n\n\n\u30ea\u30e9\u30a4\u30c8\u904b\u7528\n\n\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\nPHP\u30d5\u30a1\u30a4\u30eb\u3092index.php\n\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3092q\u3068\u3059\u308b\u3068\n\n/usr/local/nginx/conf/nginx.conf\nhttp{\n    \u30fb\u30fb\u30fb\n    server{\n        listen 443 ssl http2\n        \u30fb\u30fb\u30fb\n        root   html;\n        index  index.html index.htm;\n        location / {\n            try_files = $uri $uri/ /index.php?q=$uri&$args;\n        }\n        location ~ \\.php {\n            fastcgi_pass   unix:/var/run/php5-fpm.sock;\n            fastcgi_index  index.php;\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n        }\n    }\n}\n\n\n\nPATHINFO\nPHP\u30d5\u30a1\u30a4\u30eb\u3092index.php\u3068\u3059\u308b\u3068\n\n/usr/local/nginx/conf/nginx.conf\nhttp{\n    \u30fb\u30fb\u30fb\n    server{\n        listen 443 ssl http2\n        \u30fb\u30fb\u30fb\n        root   html;\n        index  index.html index.htm;\n        location / {\n            try_files = $uri $uri/ /index.php$uri?$args;\n        }\n        location ~ [^/]\\.php(/|$) {\n            fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n            fastcgi_pass   unix:/var/run/php5-fpm.sock;\n            fastcgi_index  index.php;\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n            fastcgi_param  PATH_INFO        $fastcgi_path_info;\n        }\n    }\n}\n\n\n[VirtualBox]:https://www.virtualbox.org/wiki/Downloads\n[Ubuntu]:http://ftp.riken.jp/Linux/ubuntu-releases/\n[nginx]:http://nginx.org/\n[Launching nginScript and Looking Ahead]:https://www.nginx.com/blog/launching-nginscript-and-looking-ahead/\n[nginScript Documentation]:https://www.nginx.com/resources/wiki/nginScript/\n[HTTP/2 and SPDY indicator]:https://chrome.google.com/webstore/detail/http2-and-spdy-indicator/mpbpobfflnpcgagjijhmgnchggcjblin?hl=ja\n\n\u95a2\u9023\u8a18\u4e8b:\n\n * [VirtualBox+Ubuntu\u306bLEMP\u74b0\u5883\u69cb\u7bc9]\n * [nginScript\u3092\u8a66\u3059(1):nginx\u3092\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb]\n * [nginx\u3067http2(1)]\n\n[VirtualBox+Ubuntu\u306bLEMP\u74b0\u5883\u69cb\u7bc9]:http://qiita.com/dozo/items/1c21c8758121c366ba90\n[nginScript\u3092\u8a66\u3059(1):nginx\u3092\u30bd\u30fc\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb]:http://qiita.com/dozo/items/98077bdd9cbf928cc422\n[nginx\u3067http2(1)]:http://qiita.com/dozo/items/866b2e0be6fcc0b46697\n\n\u6b21\u306fPHP\u3092\u52d5\u304b\u3059\n\n\u30fe(\u30fb\u03c9<)\uff89\"\u3000\u4e09\u4e09\u4e09\u25cf\u3000\u2171\u2172 \u30b3\u30ed\u30b3\u30ed\u266a\n***\n------------------- \u2193 \u4f59\u8ac7\u306f\u3053\u3053\u304b\u3089 \u2193-------------------\nHTTP/2\u306e\u52d5\u4f5c\u78ba\u8a8d\u306f\u3067\u304d\u305f\u306e\u3067\u3001\n\u4eca\u5ea6\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\nPHP\u5074\u3067\u7279\u306b\u8a2d\u5b9a\u306f\u3044\u3089\u306a\u3044\u306e\u3067\u3001\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fdebian\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u305f\u3002\n\n\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3067\u53d7\u3051\u3066\u3082\u3044\u3044\u3051\u3069\u3001\n\u4eca\u56de\u306fSOCK\u7d4c\u7531\u3067\u53d7\u3051\u3066\u307f\u3088\u3046\u3068\u601d\u3046\u3002\n\n\u30fe(\u30fb\u03c9<)\uff89\"\u3000\u4e09\u4e09\u4e09\u25cf\u3000\u2171\u2172 \u30b3\u30ed\u30b3\u30ed\u266a\n***\n------------------- \u2193 \u672c\u984c\u306f\u3053\u3053\u304b\u3089 \u2193-------------------\n\n# [nginx]\u3092HTTP/2\u5bfe\u5fdc\u306e\u30b5\u30fc\u30d0\u306bPHP\u3092\u5165\u308c\u308b\n\nHTTP/2\u5bfe\u5fdc\u306e[nginx]\u69cb\u7bc9\u306f\u524d\u56de\u3084\u3063\u305f\u306e\u3067\u305d\u3063\u3061\u3092\u898b\u3066\u307b\u3057\u3044\u3002\n\n## PHP\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session\nsudo apt-get install php5-fpm\n```\n\n## nginx\u306e\u8abf\u6574\n\n### \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u8abf\u6574\n\nnginx\u5074\u306bsock\u306epath\u3092\u767b\u9332\n\n```:/usr/local/nginx/conf/nginx.conf\nhttp {\n    server {\n        listen       443 ssl http2;\n        server_name  localhost;\n        \u30fb\u30fb\u30fb\n        location ~ \\.php$ {\n            root           html;\n        #    fastcgi_pass   127.0.0.1:9000;\n            fastcgi_pass   unix:/var/run/php5-fpm.sock;\n            fastcgi_index  index.php;\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n        }\n    }\n}\n```\n\n### \u518d\u8d77\u52d5\n```shell-session\nsudo /usr/local/nginx/sbin/nginx -t # \u8a2d\u5b9a\u5909\u66f4\u78ba\u8a8d\nsudo /usr/local/nginx/sbin/nginx -s quit # \u7d42\u4e86\nsudo /usr/local/nginx/sbin/nginx # \u8d77\u52d5\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n```php:/usr/local/nginx/html/index.php\n<?php phpinfo();\n```\n\n![nginx07.PNG](https://qiita-image-store.s3.amazonaws.com/0/40697/c7128d7a-40ac-eb92-9e33-211088eaf058.png)\n\n\n\u30fe(\u30fb\u03c9<)\uff89\"\u3000\u4e09\u4e09\u4e09\u25cf\u3000\u2171\u2172 \u30b3\u30ed\u30b3\u30ed\u266a\n***\n------------------- \u2193 \u88dc\u8db3\u306f\u3053\u3053\u304b\u3089 \u2193-------------------\n\n\u3055\u3066\u3001\u52d5\u4f5c\u78ba\u8a8d\u306f\u3067\u304d\u305f\u306e\u3067\u3001\n\u3053\u3053\u3067\u306f\u30ea\u30e9\u30a4\u30c8\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8003\u3048\u3088\u3046\u3002\n\u6700\u8fd1\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306a\u3089\u3070URL\u3092\u7dba\u9e97\u306b\u3059\u308b(SEO\u306b\u6700\u9069\u306aURL\u306b\u3059\u308b)\u3068\u3044\u3046\u624b\u6cd5\u304c\u4e00\u822c\u7684\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3002\n\u5bfe\u5fdc\u65b9\u6cd5\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u3088\u3063\u3066\u307e\u3061\u307e\u3061\u3067\u3042\u308b\u304c\u3001\n\u4e3b\u306b\u4ee5\u4e0b\u306e\u4e8c\u3064\u3060\u3068\u601d\u3046\u3002\n\n* \u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\n\u7279\u5b9a\u306e\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092URL\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u53d6\u308a\u8fbc\u3080\u65b9\u6cd5\n\n* PATHINFO\ncgi\u306ePATHINFO\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u53d6\u308a\u8fbc\u3080\u65b9\u6cd5\n\n\n# \u30ea\u30e9\u30a4\u30c8\u904b\u7528\n\n#### \u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\n\nPHP\u30d5\u30a1\u30a4\u30eb\u3092index.php\n\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3092q\u3068\u3059\u308b\u3068\n\n```:/usr/local/nginx/conf/nginx.conf\nhttp{\n    \u30fb\u30fb\u30fb\n    server{\n        listen 443 ssl http2\n        \u30fb\u30fb\u30fb\n        root   html;\n        index  index.html index.htm;\n        location / {\n            try_files = $uri $uri/ /index.php?q=$uri&$args;\n        }\n        location ~ \\.php {\n            fastcgi_pass   unix:/var/run/php5-fpm.sock;\n            fastcgi_index  index.php;\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n        }\n    }\n}\n```\n\n#### PATHINFO\nPHP\u30d5\u30a1\u30a4\u30eb\u3092index.php\u3068\u3059\u308b\u3068\n\n```:/usr/local/nginx/conf/nginx.conf\nhttp{\n    \u30fb\u30fb\u30fb\n    server{\n        listen 443 ssl http2\n        \u30fb\u30fb\u30fb\n        root   html;\n        index  index.html index.htm;\n        location / {\n            try_files = $uri $uri/ /index.php$uri?$args;\n        }\n        location ~ [^/]\\.php(/|$) {\n            fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n            fastcgi_pass   unix:/var/run/php5-fpm.sock;\n            fastcgi_index  index.php;\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n            fastcgi_param  PATH_INFO        $fastcgi_path_info;\n        }\n    }\n}\n```\n", "tags": ["nginx", "http2", "PHP"]}