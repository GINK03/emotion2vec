{"context": "Java\u30a2\u30d7\u30ea\u958b\u767a\u3067\u306f\u3001\u30af\u30e9\u30b9\u30d5\u30a1\u30a4\u30eb\u3084\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u3064\u306eJar\u306b\u307e\u3068\u3081\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3059\u308b\u306e\u304c\u4e00\u822c\u7684\u3067\u3059\u3002\nMaven\u3084Gradle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308c\u3070\u3001 src/main/resources \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u304f\u306e\u304c\u4e00\u822c\u7684\u3067\u3057\u3087\u3046\u304b\u3002\n\u6642\u3005\u3001\u30ea\u30bd\u30fc\u30b9\u306b\u542b\u3081\u305f\u30d5\u30a1\u30a4\u30eb\u3092Jar\u5916\u306b\u30b3\u30d4\u30fc\u3057\u3066\u4f7f\u3044\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\uff08\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5916\u306b\u51fa\u3057\u305f\u308a\u3001\u914d\u5e03\u306e\u90fd\u5408\u3067\u540c\u68b1\u3057\u3066\u3044\u305f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3057\u305f\u3044\u3068\u304d\u306a\u3069\uff09\nresources \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u305f\u30d5\u30a1\u30a4\u30eb hoge.txt \u306eURI\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\nClassLoader.getSystemResource(\"hoge.txt\").toURI()\n\nURI\u304c\u308f\u304b\u308c\u3070\u3042\u3068\u306f\u3053\u308c\u3092\u6240\u671b\u306e\u5834\u6240\u306b\u30b3\u30d4\u30fc\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001Jar\u306b\u3057\u305f\u5834\u5408\u3068\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u3067\u9055\u3044\u304c\u3042\u3063\u3066\u306f\u307e\u308a\u307e\u3057\u305f\u3002\n\nJar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u306a\u3044\u3067\u30ea\u30bd\u30fc\u30b9\u3092\u53c2\u7167\u3057\u305f\u6642\u306eURI\n\u52d5\u4f5c\u8a66\u9a13\u306e\u305f\u3081\u306b ./gradlew :run \u3068\u304b\u3057\u305f\u5834\u5408\u3067\u3059\u306d\u3002\nJar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u305b\u305a\u306b\u5b9f\u884c\u3057\u305f\u5834\u5408\u306f\u3001\u30ea\u30bd\u30fc\u30b9\u306eURI\u306f file: \u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u3001\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u6307\u3057\u307e\u3059\u3002\nfile:/path/to/project/build/resources/main/hoge.txt\n\n\u3053\u306eURI\u3060\u3068 File \u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3001Kotlin\u306e\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9 File.copyTo() \u3067\u30b3\u30d4\u30fc\u304c\u53ef\u80fd\u3067\u3059\u3002\nFile(ClassLoader.getSystemResource(\"hoge.txt\").toURI()).copyTo(destination)\n\n\u3057\u304b\u3057Jar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u3066\u3057\u307e\u3046\u3068\u3001URI\u3092File\u30af\u30e9\u30b9\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3057\u305f\u9014\u7aef\u306b\u4f8b\u5916\u304c\u51fa\u307e\u3059\u3002\n\nJar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3055\u308c\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u53c2\u7167\u3057\u305f\u6642\u306eURI\njar: \u30b9\u30ad\u30fc\u30e0\u306eURI\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\njar:file:/path/to/jar/file/MyApp.jar!/hoge.txt\n\n\u3053\u308c\u3092\u305d\u306e\u307e\u307eFile\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3059\u3068 java.lang.IllegalArgumentException: URI is not hierarchical \u304c\u767a\u751f\u3057\u307e\u3059\u3002\n\u30b3\u30d4\u30fc\u5143File\u304c\u5f97\u3089\u308c\u308c\u3070\u30b3\u30d4\u30fc\u304c\u697d\u306a\u306e\u3067\u3059\u304c\u3001\u5f97\u3089\u308c\u306a\u3044\u306e\u3067\u305d\u3046\u306f\u3044\u304d\u307e\u305b\u3093\u3002\n\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u304b\u3068\u8a00\u3046\u3068\u3001\u30ea\u30bd\u30fc\u30b9\u3092\u958b\u304fInputStream\u304b\u3089\u5185\u5bb9\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u30b3\u30d4\u30fc\u5148\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3093\u3067\u3057\u307e\u3048\u3070\u826f\u3055\u305d\u3046\u3067\u3057\u305f\u3002\n\u81ea\u529b\u3067\u30b3\u30d4\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u3001\u4fbf\u5229\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u3059\u3067\u306b\u3042\u308b\u306e\u3067\u4f7f\u308f\u305b\u3066\u3082\u3089\u3044\u307e\u3057\u3087\u3046\u3002\nJDK\u4ed8\u5c5e\u306e Files.copy() (Java 1.7\u304b\u3089\u5b9f\u88c5)\u3092\u4f7f\u3046\u304b\u3001Commons IO\u306e FileUtils.copyURLToFile() \u304b FileUtils.copyToFile() \u3092\u4f7f\u3046\u306e\u304c\u304a\u624b\u8efd\u3067\u3057\u3087\u3046\u3002\nval srcIs: InputStream = ClassLoader.getSystemResourceAsStream(\"hoge.txt\")\nval srcUrl: URL = ClassLoader.getSystemResource(\"hoge.txt\")\n\n// Files.copy() \u306e\u5834\u5408\nFiles.copy(srcIs, destination.toPath())\n\n// FileUtils.copyURLToFile()\u306e\u5834\u5408\nFileUtils.copyURLToFile(srcUrl, destination)\n\n// FileUtils.copyToFile()\u306e\u5834\u5408\nFileUtils.copyToFile(srcIs, destination)\n\n\u3068\u308a\u3042\u3048\u305a\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306fURL\u3084URI\u3067\u6271\u3046\u306e\u3067\u306f\u306a\u304f\u3001Stream\u3067\u6271\u3063\u305f\u3089\u9593\u9055\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\nJava\u30a2\u30d7\u30ea\u958b\u767a\u3067\u306f\u3001\u30af\u30e9\u30b9\u30d5\u30a1\u30a4\u30eb\u3084\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u3064\u306eJar\u306b\u307e\u3068\u3081\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3059\u308b\u306e\u304c\u4e00\u822c\u7684\u3067\u3059\u3002\nMaven\u3084Gradle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308c\u3070\u3001 `src/main/resources` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u304f\u306e\u304c\u4e00\u822c\u7684\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u6642\u3005\u3001\u30ea\u30bd\u30fc\u30b9\u306b\u542b\u3081\u305f\u30d5\u30a1\u30a4\u30eb\u3092Jar\u5916\u306b\u30b3\u30d4\u30fc\u3057\u3066\u4f7f\u3044\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\uff08\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5916\u306b\u51fa\u3057\u305f\u308a\u3001\u914d\u5e03\u306e\u90fd\u5408\u3067\u540c\u68b1\u3057\u3066\u3044\u305f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3057\u305f\u3044\u3068\u304d\u306a\u3069\uff09\n\n`resources` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u305f\u30d5\u30a1\u30a4\u30eb `hoge.txt` \u306eURI\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```kotlin\nClassLoader.getSystemResource(\"hoge.txt\").toURI()\n```\n\nURI\u304c\u308f\u304b\u308c\u3070\u3042\u3068\u306f\u3053\u308c\u3092\u6240\u671b\u306e\u5834\u6240\u306b\u30b3\u30d4\u30fc\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001Jar\u306b\u3057\u305f\u5834\u5408\u3068\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u3067\u9055\u3044\u304c\u3042\u3063\u3066\u306f\u307e\u308a\u307e\u3057\u305f\u3002\n\n# Jar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u306a\u3044\u3067\u30ea\u30bd\u30fc\u30b9\u3092\u53c2\u7167\u3057\u305f\u6642\u306eURI\n\n\u52d5\u4f5c\u8a66\u9a13\u306e\u305f\u3081\u306b `./gradlew :run` \u3068\u304b\u3057\u305f\u5834\u5408\u3067\u3059\u306d\u3002\n\nJar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u305b\u305a\u306b\u5b9f\u884c\u3057\u305f\u5834\u5408\u306f\u3001\u30ea\u30bd\u30fc\u30b9\u306eURI\u306f `file:` \u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u3001\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u6307\u3057\u307e\u3059\u3002\n\n```\nfile:/path/to/project/build/resources/main/hoge.txt\n```\n\n\u3053\u306eURI\u3060\u3068 `File` \u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3001Kotlin\u306e\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9 [`File.copyTo()`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/copy-to.html) \u3067\u30b3\u30d4\u30fc\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n```kotlin\nFile(ClassLoader.getSystemResource(\"hoge.txt\").toURI()).copyTo(destination)\n```\n\n\u3057\u304b\u3057Jar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u3066\u3057\u307e\u3046\u3068\u3001URI\u3092File\u30af\u30e9\u30b9\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3057\u305f\u9014\u7aef\u306b\u4f8b\u5916\u304c\u51fa\u307e\u3059\u3002\n\n# Jar\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3055\u308c\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u53c2\u7167\u3057\u305f\u6642\u306eURI\n\n`jar:` \u30b9\u30ad\u30fc\u30e0\u306eURI\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\n\n```\njar:file:/path/to/jar/file/MyApp.jar!/hoge.txt\n```\n\n\u3053\u308c\u3092\u305d\u306e\u307e\u307eFile\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3059\u3068 ` java.lang.IllegalArgumentException: URI is not hierarchical` \u304c\u767a\u751f\u3057\u307e\u3059\u3002\n\n\u30b3\u30d4\u30fc\u5143File\u304c\u5f97\u3089\u308c\u308c\u3070\u30b3\u30d4\u30fc\u304c\u697d\u306a\u306e\u3067\u3059\u304c\u3001\u5f97\u3089\u308c\u306a\u3044\u306e\u3067\u305d\u3046\u306f\u3044\u304d\u307e\u305b\u3093\u3002\n\n\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u304b\u3068\u8a00\u3046\u3068\u3001\u30ea\u30bd\u30fc\u30b9\u3092\u958b\u304fInputStream\u304b\u3089\u5185\u5bb9\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u30b3\u30d4\u30fc\u5148\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3093\u3067\u3057\u307e\u3048\u3070\u826f\u3055\u305d\u3046\u3067\u3057\u305f\u3002\n\n\u81ea\u529b\u3067\u30b3\u30d4\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u3001\u4fbf\u5229\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u3059\u3067\u306b\u3042\u308b\u306e\u3067\u4f7f\u308f\u305b\u3066\u3082\u3089\u3044\u307e\u3057\u3087\u3046\u3002\n\nJDK\u4ed8\u5c5e\u306e [`Files.copy()`](https://docs.oracle.com/javase/jp/8/docs/api/java/nio/file/Files.html#copy-java.io.InputStream-java.nio.file.Path-java.nio.file.CopyOption...-) (Java 1.7\u304b\u3089\u5b9f\u88c5)\u3092\u4f7f\u3046\u304b\u3001[Commons IO](http://commons.apache.org/proper/commons-io/)\u306e [`FileUtils.copyURLToFile()`](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#copyURLToFile(java.net.URL,%20java.io.File)) \u304b [`FileUtils.copyToFile()`](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#copyToFile(java.io.InputStream,%20java.io.File)) \u3092\u4f7f\u3046\u306e\u304c\u304a\u624b\u8efd\u3067\u3057\u3087\u3046\u3002\n\n```kotlin\nval srcIs: InputStream = ClassLoader.getSystemResourceAsStream(\"hoge.txt\")\nval srcUrl: URL = ClassLoader.getSystemResource(\"hoge.txt\")\n\n// Files.copy() \u306e\u5834\u5408\nFiles.copy(srcIs, destination.toPath())\n\n// FileUtils.copyURLToFile()\u306e\u5834\u5408\nFileUtils.copyURLToFile(srcUrl, destination)\n\n// FileUtils.copyToFile()\u306e\u5834\u5408\nFileUtils.copyToFile(srcIs, destination)\n```\n\n\n\u3068\u308a\u3042\u3048\u305a\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306fURL\u3084URI\u3067\u6271\u3046\u306e\u3067\u306f\u306a\u304f\u3001Stream\u3067\u6271\u3063\u305f\u3089\u9593\u9055\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n", "tags": ["Java", "Kotlin"]}