{"tags": ["BLE"], "context": " More than 1 year has passed since last update.\n\n\u4eca\u65e5\u4e2d\u306b\u9593\u306b\u5408\u3046\u304b\uff01\uff1f\n\u3053\u306e\u8a18\u4e8b\u306f\u51fa\u5f35\u4e2d\u306e\u4eac\u90fd\u3067\u8b1b\u6f14\u3092\u8074\u304d\u306a\u304c\u3089\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nBLE Advent Calender\u306e\u4eca\u65e5\u306e\u5f53\u756a\u306a\u306e\u3067\u3001\u9811\u5f35\u3063\u3066\u66f8\u304d\u307e\u3059\uff61\uff9f(\uff9f\u00b4\u0414\uff40\uff9f)\uff9f\uff61\n\u2192\u3059\u3044\u307e\u305b\u3093\u3001\u6295\u7a3f\u9045\u308c\u307e\u3057\u305fm(_ _)m\n\nIoT\u30dc\u30bf\u30f3\u306e\u30d6\u30eb\u30fc\u30d7\u30ea\u30f3\u30c8\nhttps://aws.amazon.com/jp/iot/button/\n\n\u3053\u308c\uff01\u304c\u3064\u304f\u308a\u305f\u3044\u3093\u3067\u3059\u304c\u3001Wi-Fi\u4f7f\u3063\u3066\u3044\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u308c\u3060\u3068\u76f4\u63a5\u30af\u30e9\u30a6\u30c9\u306b\u3064\u306a\u304c\u3063\u3061\u3083\u3063\u3066BLE\u4f7f\u308f\u306a\u3044\uff01\u3063\u3066\u3053\u3068\u3067\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067BLE\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3056\u3063\u304f\u308a\u30a4\u30ab\u306e\u3088\u3046\u306a\u69cb\u6210\u3067\u3064\u304f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u5b9f\u306fTechCrunch Tokyo 2015 CTO Night\u3067\u4f7f\u308f\u308c\u305f\u30d7\u30ec\u30bc\u30f3\u30dc\u30bf\u30f3\u3067\u3059\u3002\n\n\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001BLE\u3067\u30b9\u30de\u30d5\u30a9\u306b\u901a\u4fe1\u304c\u884c\u3063\u3066\u3001MQTT\u3067AWS\u7d4c\u7531\u3067\u81ea\u5206\u306e\u624b\u5143\u306ePC\u307e\u3067Pub/Sub\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6765\u3066\u3001\u6700\u5f8c\u306bWebSocket\u3067\u3064\u306a\u304c\u3063\u3066\u3044\u308b\u30d7\u30ec\u30bc\u30f3\u30c4\u30fc\u30eb\u304c\u6b21\u306e\u30da\u30fc\u30b8\u306b\u884c\u3063\u305f\u3089\u6210\u529f\u3067\u3059\uff01\n\n\u307e\u305a\u30dc\u30bf\u30f3(\u30cf\u30fc\u30c9)\u3092\u3064\u304f\u308b\n\u30dc\u30bf\u30f3\u306e\u69cb\u6210\u306f\u3053\u308c\u3067\u3059\u3002\n\n\u30dd\u30c3\u30d7\u30f3\u307f\u305f\u3044\u306a\u30dc\u30bf\u30f3\u30d1\u30fc\u30c4\uff08\u65e2\u6210\u54c1\uff09\n\u898b\u6804\u3048\u3092\u826f\u304f\u3059\u308b\u305f\u3081\u306e\u7b50\u4f53\uff08Fusion 360\u3067\u8a2d\u8a08\u21923D\u30d7\u30ea\u30f3\u30bf\u3067\u88fd\u9020\uff09\n\n\u30dc\u30bf\u30f3\u3092\u8cb7\u3063\u3066\u3001\nhttps://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-4LG4\n\n3DCAD\u3067\u8a2d\u8a08\u3057\u3066\u3001\n\n3D\u30d7\u30ea\u30f3\u30bf\u30fc\u3067\u51fa\u529b\u3057\u307e\u3059\uff01\n\n\u3053\u308c\u3067\u4e00\u65e6\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u306e\u5b8c\u6210\u3067\u3059\uff01\n\n\u57fa\u677f\u4f5c\u6210\nEagle\u3084Quadcept\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3002\u56de\u8def\u56f3\u30fb\u30a2\u30fc\u30c8\u30ef\u30fc\u30af\u306f\u307e\u305f\u4eca\u5ea6\u3002\n\u8981\u7d20\u7684\u306b\u306f\nBLE\u306e\u30c1\u30c3\u30d7\n\u21c5 (\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u3067\u5236\u5fa1)\nGPIO(Input|Interrupt)\n\u21c5 (\u96fb\u6c17\u7684\u306aHIGH/LOW\u3092\u53d7\u3051\u53d6\u308b)\n\u30dc\u30bf\u30f3\n\u304c\u3067\u304d\u308b\u69cb\u6210\u3002\n\n\u30d5\u30a1\u30fc\u30e0\n\u30bd\u30fc\u30b9\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3051\u3069\u3001NDA(\u00b4\u30fb\u03c9\u30fb\uff40)\n\u4eca\u5f8cNordic\u306e\u30c1\u30c3\u30d7\u3092\u4f7f\u3046\u3053\u3068\u3067\u30aa\u30fc\u30d7\u30f3\u306b\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\u4eee\u60f3\u8a00\u8a9e\u3067\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\nvoid interrupt() {\n    notification(characteristic_hander, 1);\n}\n\n\u5272\u308a\u8fbc\u307f\u30d4\u30f3\u3067\u5165\u529b\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u4e2d\u306b\u3001\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u306e\u901a\u77e5\u3092\u9001\u4fe1\u3059\u308b\u95a2\u6570\u3092\u547c\u3076\u3060\u3051\u3067\u3059\u3002\n\nBLE\n\nBLE\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u306f\u30b9\u30bf\u30fc\u578b\n\n\nIoT\u30dc\u30bf\u30f3\u5074\u3092\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u3068\u3059\u308b\n\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u304c\u30bb\u30f3\u30c8\u30e9\u30eb\n\n\nNotification\n\n\n\u30bb\u30f3\u30c8\u30e9\u30eb\u306f\u57fa\u672c\u7684\u306b\u306f\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u306b\u30a4\u30f3\u30d9\u30f3\u30c8\u3092\u8d77\u3053\u305b\u308b/Write\n\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u304b\u3089\u3082\u30bb\u30f3\u30c8\u30e9\u30eb\u304c\u901a\u77e5\u3092\u8cfc\u8aad\u3057\u3066\u3044\u308b\u3068\u3001\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u304b\u3089\u306epush\u304c\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u53d7\u3051\u53d6\u308c\u308b\uff08\u30bb\u30f3\u30c8\u30e9\u30eb\u304c\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u3092\u30dd\u30fc\u30ea\u30f3\u30b0/read\u3057\u306a\u304f\u3066\u3044\u3044\uff09\n\n\nGATT\u306e\u8a2d\u8a08\n\n\nNotification\u304c\u3067\u304d\u308b\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u304c\u4e00\u3064\u3060\u3051\n\n\n\n\niOS\nCoreBluetooth\u3092\u4f7f\u3063\u3066\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u3057\u307e\u3059\u3002Swift\u3092\u4f7f\u3063\u305fCoreBluetooth\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f @shu223 \u306e\u30d6\u30ed\u30b0\u306b\u8a73\u3057\u3044\u306e\u3067\u305d\u3061\u3089\u3092\u898b\u3066\u4e0b\u3055\u3044\uff01\nCore Bluetooth with Swift \uff08ObjC\u306e\u304a\u307e\u3051\u4ed8\u304d\uff09 - Qiita\n\n\u30b9\u30ad\u30e3\u30f3\nimport CoreBluetooth\n...\n    self.centralManager.scanForPeripheralsWithServices(services, options: nil)\n...\nfunc centralManager(central: CBCentralManager,\n     didDiscoverPeripheral peripheral: CBPeripheral,\n     advertisementData: [String : AnyObject],\n     RSSI: NSNumber){\n     self.peripheral = peripheral\n}\n\n\n\n\u63a5\u7d9a\n...\n    self.centralManager.connectPeripheral(self.peripheral, options: nil)\n...\nfunc centralManager(central: CBCentralManager,\n     didConnectPeripheral peripheral: CBPeripheral) {\n}\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u3068\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u306e\u63a2\u7d22\n    let services : [CBUUID]? = [self.serviceUUID]\n    self.peripheral.delegate = self\n    self.peripheral.discoverServices(services)\n...\nfunc peripheral(peripheral: CBPeripheral,\n     didDiscoverCharacteristicsForService service: CBService,\n     error: NSError?){\n    let characteristics = service.characteristics!\n    self.characteristic = characteristics[0]\n}\n\n\n\nNotification\u3092\u53d7\u3051\u53d6\u308a\u305f\u3044\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u306e\u767b\u9332\nself.peripheral.setNotifyValue(true, forCharacteristic: self.characteristic)\n\n\n\nNotification\u304c\u5c4a\u3044\u305f\u3068\u304d\u306b\u53d7\u3051\u53d6\u308b\nfunc peripheral(peripheral: CBPeripheral,\n     didUpdateValueForCharacteristic characteristic: CBCharacteristic,\n     error: NSError?) {\n    print(\"Update! characteristic UUID: \\(characteristic.UUID), value: \\(characteristic.value)\")\n}\n\n\n\u307b\u3044\u3001\u3060\u3044\u3076\u7aef\u6298\u308a\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3067\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u304b\u3089\u306eNotification\u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\niOS\u2192AWS IoT\niOS\u304cBLE\u7d4c\u7531\u3067\u53d7\u3051\u53d6\u3063\u305f\u901a\u77e5\u3092\u305d\u306e\u307e\u307eAWS IoT\u3092\u4f7f\u3063\u3066Publish\u3057\u307e\u3059\u3002\n\u30d7\u30ed\u30c8\u30b3\u30eb\u306fMQTT\u3067\u3059\u3002\n\niOS\u3067MQTT\u306bPublish\u3059\u308b\nimport Moscapsule\n\nmoscapsule_init()\n\nlet mqttConfig = MQTTConfig(clientId: \"iot_button\", \n           host: \"AAAAAAAAAAAAAA.iot.ap-northeast-1.amazonaws.com\", port: 8883, keepAlive: 60)\nlet certFile = NSBundle.mainBundle().pathForResource(\"1111111111-certificate.pem\", ofType: \"crt\")\nlet keyFile = NSBundle.mainBundle().pathForResource(\"2222222222-private.pem\", ofType: \"key\")\nlet caFile = NSBundle.mainBundle().pathForResource(\"ca\", ofType: \"pem\")\n\nmqttConfig.mqttServerCert = MQTTServerCert(cafile: caFile, capath: nil)\nmqttConfig.mqttClientCert = MQTTClientCert(certfile: certFile!, keyfile: keyFile!, keyfile_passwd: nil)\n\nself.mqttClient = MQTT.newConnection(mqttConfig)\nself.mqttClient!.publish(data, topic: \"topic/hoge\", qos: 1, retain: false)\n\n\n\nAWS IoT\u2192Mac\nNode\u3067\u66f8\u304d\u307e\u3057\u305f\uff01\n\nMQTT\u3092\u8cfc\u8aad\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\n// aws iot\u3067MQTT\u306e\u8cfc\u8aad\nvar awsIot = require('aws-iot-device-sdk');\nvar device = awsIot.device({\n    keyPath:  '1111111111-private.pem.key',\n    certPath: '2222222222-certificate.pem.crt',\n    caPath:   'ca.pem',\n    clientId: 'iot_button_sub',\n    region: 'ap-northeast-1'\n});\n// \u63a5\u7d9a\u3067\u304d\u305f\u3089\u8cfc\u8aad\u3059\u308b\ndevice.on('connect', function() {\n    device.subscribe('topic/hoge');\n});\n// \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\ndevice.on('message', function(topic, payload) {\n    ...\n});\n\n\n\nMac\u2192\u30b9\u30e9\u30a4\u30c9\u30c4\u30fc\u30eb\n\u30b9\u30e9\u30a4\u30c9\u30c4\u30fc\u30eb\u306fJS\u88fd\u306e\u3082\u306e\u306a\u306e\u3067\u3001\u8272\u3005\u30cf\u30c3\u30af\u3067\u304d\u3066\u4fbf\u5229\u3067\u3059\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u5074\n// websocket\u3067\u30d6\u30e9\u30a6\u30b6\u3068\u63a5\u7d9a\nvar io = require('socket.io').listen(8080)\nvar socket;\nio.sockets.on('connection', function(_socket) {\n    socket = _socket;\n});\n\n// MQTT\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5c4a\u3044\u305f\u3089socket\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\nsocket.emit('click', 'next page');\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(\u30d6\u30e9\u30a6\u30b6)\u5074\nvar socket = io.connect(\"http://localhost:8080\");\nsocket.on('connect', function() {\n});\nsocket.on('click', function(data) {\u3000\u3000\n    talkie.next.push();\n});\n\n\n\u3053\u308c\u3060\u3051\uff01\u7c21\u5358\u3067\u3059\u306d\uff01\n\n\u30c7\u30e2\n\n\n\u307e\u3068\u3081\n\u4eca\u56de\u306fBLE\u3092\u4f7f\u3063\u305fIoT\u30dc\u30bf\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\uff01Wi-Fi\u3067\u3082\u3084\u3063\u3066\u307f\u305f\u3044\u3067\u3059\u304c\u3001\u96fb\u6c60\u6d88\u8cbb\u3092\u6c17\u306b\u3059\u308b\u3068\u63a5\u7d9a\u3057\u3063\u3071\u306a\u3057\u3063\u3066\u306e\u306f\u8f9b\u3044\u3068\u601d\u3046\u306e\u3067\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u3063\u3066\u610f\u5473\u3060\u3068BLE\u3067\u5b9f\u88c5\u3057\u3066\u30b9\u30de\u30d5\u30a9\u3084IoT Hub\u3067\u3084\u308a\u53d6\u308a\u3059\u308b\u65b9\u304c\u3053\u3046\u3044\u3046\u7528\u9014\u306b\u306f\u5411\u304f\u3068\u601d\u3044\u307e\u3057\u305f\u3002\nBLE\u306f\u89e6\u3063\u3066\u3044\u308b\u3051\u3069\u30b5\u30fc\u30d0\u30fc\u5074\u307e\u3067\u306f\u2026\u3063\u3066\u4eba\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u2606\n## \u4eca\u65e5\u4e2d\u306b\u9593\u306b\u5408\u3046\u304b\uff01\uff1f\n\n\u3053\u306e\u8a18\u4e8b\u306f\u51fa\u5f35\u4e2d\u306e\u4eac\u90fd\u3067\u8b1b\u6f14\u3092\u8074\u304d\u306a\u304c\u3089\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nBLE Advent Calender\u306e\u4eca\u65e5\u306e\u5f53\u756a\u306a\u306e\u3067\u3001\u9811\u5f35\u3063\u3066\u66f8\u304d\u307e\u3059\uff61\uff9f(\uff9f\u00b4\u0414\uff40\uff9f)\uff9f\uff61\n\n\u2192\u3059\u3044\u307e\u305b\u3093\u3001\u6295\u7a3f\u9045\u308c\u307e\u3057\u305fm(_ _)m\n\n## IoT\u30dc\u30bf\u30f3\u306e\u30d6\u30eb\u30fc\u30d7\u30ea\u30f3\u30c8\n\nhttps://aws.amazon.com/jp/iot/button/\n\n![button](https://d0.awsstatic.com/IoT/Starter%20Kits/AWS_IoT_button.jpg)\n\n\u3053\u308c\uff01\u304c\u3064\u304f\u308a\u305f\u3044\u3093\u3067\u3059\u304c\u3001Wi-Fi\u4f7f\u3063\u3066\u3044\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u308c\u3060\u3068\u76f4\u63a5\u30af\u30e9\u30a6\u30c9\u306b\u3064\u306a\u304c\u3063\u3061\u3083\u3063\u3066BLE\u4f7f\u308f\u306a\u3044\uff01\u3063\u3066\u3053\u3068\u3067\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067BLE\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3056\u3063\u304f\u308a\u30a4\u30ab\u306e\u3088\u3046\u306a\u69cb\u6210\u3067\u3064\u304f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u5b9f\u306fTechCrunch Tokyo 2015 CTO Night\u3067\u4f7f\u308f\u308c\u305f\u30d7\u30ec\u30bc\u30f3\u30dc\u30bf\u30f3\u3067\u3059\u3002\n\n![blueprint](http://kazuph.github.io/presentation/TechCrunchTokyoCTONight2015/images/iot_button_description.png)\n\n\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001BLE\u3067\u30b9\u30de\u30d5\u30a9\u306b\u901a\u4fe1\u304c\u884c\u3063\u3066\u3001MQTT\u3067AWS\u7d4c\u7531\u3067\u81ea\u5206\u306e\u624b\u5143\u306ePC\u307e\u3067Pub/Sub\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6765\u3066\u3001\u6700\u5f8c\u306bWebSocket\u3067\u3064\u306a\u304c\u3063\u3066\u3044\u308b\u30d7\u30ec\u30bc\u30f3\u30c4\u30fc\u30eb\u304c\u6b21\u306e\u30da\u30fc\u30b8\u306b\u884c\u3063\u305f\u3089\u6210\u529f\u3067\u3059\uff01\n\n\n## \u307e\u305a\u30dc\u30bf\u30f3(\u30cf\u30fc\u30c9)\u3092\u3064\u304f\u308b\n\n\u30dc\u30bf\u30f3\u306e\u69cb\u6210\u306f\u3053\u308c\u3067\u3059\u3002\n\n- \u30dd\u30c3\u30d7\u30f3\u307f\u305f\u3044\u306a\u30dc\u30bf\u30f3\u30d1\u30fc\u30c4\uff08\u65e2\u6210\u54c1\uff09\n- \u898b\u6804\u3048\u3092\u826f\u304f\u3059\u308b\u305f\u3081\u306e\u7b50\u4f53\uff08Fusion 360\u3067\u8a2d\u8a08\u21923D\u30d7\u30ea\u30f3\u30bf\u3067\u88fd\u9020\uff09\n\n\u30dc\u30bf\u30f3\u3092\u8cb7\u3063\u3066\u3001\n\nhttps://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-4LG4\n![button](https://i.gyazo.com/75ec5fe191ebe39f73413922f039f36c.png)\n\n3DCAD\u3067\u8a2d\u8a08\u3057\u3066\u3001\n\n![cad](https://dl.dropboxusercontent.com/u/6615196/images/iot_button_cad1.JPG)\n\n3D\u30d7\u30ea\u30f3\u30bf\u30fc\u3067\u51fa\u529b\u3057\u307e\u3059\uff01\n\n![3d](https://dl.dropboxusercontent.com/u/6615196/images/iot_button_3d_print.jpg)\n\n\u3053\u308c\u3067\u4e00\u65e6\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u306e\u5b8c\u6210\u3067\u3059\uff01\n\n## \u57fa\u677f\u4f5c\u6210\n\nEagle\u3084Quadcept\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3002\u56de\u8def\u56f3\u30fb\u30a2\u30fc\u30c8\u30ef\u30fc\u30af\u306f\u307e\u305f\u4eca\u5ea6\u3002\n\n\u8981\u7d20\u7684\u306b\u306f\n\nBLE\u306e\u30c1\u30c3\u30d7\n\u21c5 (\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u3067\u5236\u5fa1)\nGPIO(Input|Interrupt)\n\u21c5 (\u96fb\u6c17\u7684\u306aHIGH/LOW\u3092\u53d7\u3051\u53d6\u308b)\n\u30dc\u30bf\u30f3\n\n\u304c\u3067\u304d\u308b\u69cb\u6210\u3002\n\n## \u30d5\u30a1\u30fc\u30e0\n\n\u30bd\u30fc\u30b9\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3051\u3069\u3001NDA(\u00b4\u30fb\u03c9\u30fb\uff40)\n\u4eca\u5f8cNordic\u306e\u30c1\u30c3\u30d7\u3092\u4f7f\u3046\u3053\u3068\u3067\u30aa\u30fc\u30d7\u30f3\u306b\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u4eee\u60f3\u8a00\u8a9e\u3067\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\n\n```\nvoid interrupt() {\n    notification(characteristic_hander, 1);\n}\n```\n\n\u5272\u308a\u8fbc\u307f\u30d4\u30f3\u3067\u5165\u529b\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u4e2d\u306b\u3001\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u306e\u901a\u77e5\u3092\u9001\u4fe1\u3059\u308b\u95a2\u6570\u3092\u547c\u3076\u3060\u3051\u3067\u3059\u3002\n\n## BLE\n\n- BLE\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u306f\u30b9\u30bf\u30fc\u578b\n    - IoT\u30dc\u30bf\u30f3\u5074\u3092\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u3068\u3059\u308b\n    - \u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u304c\u30bb\u30f3\u30c8\u30e9\u30eb\n- Notification\n    - \u30bb\u30f3\u30c8\u30e9\u30eb\u306f\u57fa\u672c\u7684\u306b\u306f\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u306b\u30a4\u30f3\u30d9\u30f3\u30c8\u3092\u8d77\u3053\u305b\u308b/Write\n    - \u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u304b\u3089\u3082\u30bb\u30f3\u30c8\u30e9\u30eb\u304c\u901a\u77e5\u3092\u8cfc\u8aad\u3057\u3066\u3044\u308b\u3068\u3001\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u304b\u3089\u306epush\u304c\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u53d7\u3051\u53d6\u308c\u308b\uff08\u30bb\u30f3\u30c8\u30e9\u30eb\u304c\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u3092\u30dd\u30fc\u30ea\u30f3\u30b0/read\u3057\u306a\u304f\u3066\u3044\u3044\uff09\n- GATT\u306e\u8a2d\u8a08\n    - Notification\u304c\u3067\u304d\u308b\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u304c\u4e00\u3064\u3060\u3051\n\n## iOS\n\nCoreBluetooth\u3092\u4f7f\u3063\u3066\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u3057\u307e\u3059\u3002Swift\u3092\u4f7f\u3063\u305fCoreBluetooth\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f @shu223 \u306e\u30d6\u30ed\u30b0\u306b\u8a73\u3057\u3044\u306e\u3067\u305d\u3061\u3089\u3092\u898b\u3066\u4e0b\u3055\u3044\uff01\n\n[Core Bluetooth with Swift \uff08ObjC\u306e\u304a\u307e\u3051\u4ed8\u304d\uff09 - Qiita](http://qiita.com/shu223/items/78614325ce25bf7f4379)\n\n```objc:\u30b9\u30ad\u30e3\u30f3\nimport CoreBluetooth\n...\n    self.centralManager.scanForPeripheralsWithServices(services, options: nil)\n...\nfunc centralManager(central: CBCentralManager,\n     didDiscoverPeripheral peripheral: CBPeripheral,\n     advertisementData: [String : AnyObject],\n     RSSI: NSNumber){\n     self.peripheral = peripheral\n}\n```\n\n```objc:\u63a5\u7d9a\n...\n    self.centralManager.connectPeripheral(self.peripheral, options: nil)\n...\nfunc centralManager(central: CBCentralManager,\n     didConnectPeripheral peripheral: CBPeripheral) {\n}\n```\n\n```objc:\u30b5\u30fc\u30d3\u30b9\u3068\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u306e\u63a2\u7d22\n    let services : [CBUUID]? = [self.serviceUUID]\n    self.peripheral.delegate = self\n    self.peripheral.discoverServices(services)\n...\nfunc peripheral(peripheral: CBPeripheral,\n     didDiscoverCharacteristicsForService service: CBService,\n     error: NSError?){\n    let characteristics = service.characteristics!\n    self.characteristic = characteristics[0]\n}\n```\n\n```objc:Notification\u3092\u53d7\u3051\u53d6\u308a\u305f\u3044\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u306e\u767b\u9332\nself.peripheral.setNotifyValue(true, forCharacteristic: self.characteristic)\n```\n\n```objc:Notification\u304c\u5c4a\u3044\u305f\u3068\u304d\u306b\u53d7\u3051\u53d6\u308b\nfunc peripheral(peripheral: CBPeripheral,\n     didUpdateValueForCharacteristic characteristic: CBCharacteristic,\n     error: NSError?) {\n    print(\"Update! characteristic UUID: \\(characteristic.UUID), value: \\(characteristic.value)\")\n}\n```\n\n\u307b\u3044\u3001\u3060\u3044\u3076\u7aef\u6298\u308a\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3067\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30ea\u30b9\u30c6\u30a3\u30c3\u30af\u304b\u3089\u306eNotification\u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\n## iOS\u2192AWS IoT\n\niOS\u304cBLE\u7d4c\u7531\u3067\u53d7\u3051\u53d6\u3063\u305f\u901a\u77e5\u3092\u305d\u306e\u307e\u307eAWS IoT\u3092\u4f7f\u3063\u3066Publish\u3057\u307e\u3059\u3002\n\n\u30d7\u30ed\u30c8\u30b3\u30eb\u306fMQTT\u3067\u3059\u3002\n\n```objc:iOS\u3067MQTT\u306bPublish\u3059\u308b\nimport Moscapsule\n\nmoscapsule_init()\n\nlet mqttConfig = MQTTConfig(clientId: \"iot_button\", \n           host: \"AAAAAAAAAAAAAA.iot.ap-northeast-1.amazonaws.com\", port: 8883, keepAlive: 60)\nlet certFile = NSBundle.mainBundle().pathForResource(\"1111111111-certificate.pem\", ofType: \"crt\")\nlet keyFile = NSBundle.mainBundle().pathForResource(\"2222222222-private.pem\", ofType: \"key\")\nlet caFile = NSBundle.mainBundle().pathForResource(\"ca\", ofType: \"pem\")\n\nmqttConfig.mqttServerCert = MQTTServerCert(cafile: caFile, capath: nil)\nmqttConfig.mqttClientCert = MQTTClientCert(certfile: certFile!, keyfile: keyFile!, keyfile_passwd: nil)\n\nself.mqttClient = MQTT.newConnection(mqttConfig)\nself.mqttClient!.publish(data, topic: \"topic/hoge\", qos: 1, retain: false)\n```\n\n## AWS IoT\u2192Mac\n\nNode\u3067\u66f8\u304d\u307e\u3057\u305f\uff01\n\n```js:MQTT\u3092\u8cfc\u8aad\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\n// aws iot\u3067MQTT\u306e\u8cfc\u8aad\nvar awsIot = require('aws-iot-device-sdk');\nvar device = awsIot.device({\n    keyPath:  '1111111111-private.pem.key',\n    certPath: '2222222222-certificate.pem.crt',\n    caPath:   'ca.pem',\n    clientId: 'iot_button_sub',\n    region: 'ap-northeast-1'\n});\n// \u63a5\u7d9a\u3067\u304d\u305f\u3089\u8cfc\u8aad\u3059\u308b\ndevice.on('connect', function() {\n    device.subscribe('topic/hoge');\n});\n// \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\ndevice.on('message', function(topic, payload) {\n    ...\n});\n```\n\n## Mac\u2192\u30b9\u30e9\u30a4\u30c9\u30c4\u30fc\u30eb\n\n\u30b9\u30e9\u30a4\u30c9\u30c4\u30fc\u30eb\u306fJS\u88fd\u306e\u3082\u306e\u306a\u306e\u3067\u3001\u8272\u3005\u30cf\u30c3\u30af\u3067\u304d\u3066\u4fbf\u5229\u3067\u3059\u3002\n\n```js:\u30b5\u30fc\u30d0\u30fc\u5074\n// websocket\u3067\u30d6\u30e9\u30a6\u30b6\u3068\u63a5\u7d9a\nvar io = require('socket.io').listen(8080)\nvar socket;\nio.sockets.on('connection', function(_socket) {\n    socket = _socket;\n});\n\n// MQTT\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5c4a\u3044\u305f\u3089socket\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\nsocket.emit('click', 'next page');\n```\n\n```js:\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(\u30d6\u30e9\u30a6\u30b6)\u5074\nvar socket = io.connect(\"http://localhost:8080\");\nsocket.on('connect', function() {\n});\nsocket.on('click', function(data) {\u3000\u3000\n    talkie.next.push();\n});\n```\n\n\u3053\u308c\u3060\u3051\uff01\u7c21\u5358\u3067\u3059\u306d\uff01\n\n## \u30c7\u30e2\n\n![gif](https://dl.dropboxusercontent.com/u/6615196/images/iot_button.gif)\n\n## \u307e\u3068\u3081\n\n\u4eca\u56de\u306fBLE\u3092\u4f7f\u3063\u305fIoT\u30dc\u30bf\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\uff01Wi-Fi\u3067\u3082\u3084\u3063\u3066\u307f\u305f\u3044\u3067\u3059\u304c\u3001\u96fb\u6c60\u6d88\u8cbb\u3092\u6c17\u306b\u3059\u308b\u3068\u63a5\u7d9a\u3057\u3063\u3071\u306a\u3057\u3063\u3066\u306e\u306f\u8f9b\u3044\u3068\u601d\u3046\u306e\u3067\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u3063\u3066\u610f\u5473\u3060\u3068BLE\u3067\u5b9f\u88c5\u3057\u3066\u30b9\u30de\u30d5\u30a9\u3084IoT Hub\u3067\u3084\u308a\u53d6\u308a\u3059\u308b\u65b9\u304c\u3053\u3046\u3044\u3046\u7528\u9014\u306b\u306f\u5411\u304f\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\nBLE\u306f\u89e6\u3063\u3066\u3044\u308b\u3051\u3069\u30b5\u30fc\u30d0\u30fc\u5074\u307e\u3067\u306f\u2026\u3063\u3066\u4eba\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u2606\n"}