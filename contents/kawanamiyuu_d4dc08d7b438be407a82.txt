{"context": " More than 1 year has passed since last update.Doctrine ORM\u3067\u697d\u89b3\u7684\u30ed\u30c3\u30af\u306e\u4ed5\u7d44\u307f\u3092\u5229\u7528\u3059\u308b\u3059\u308b\u305f\u3081\u306b@Version\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u4e0e\u3059\u308b\u30ab\u30e9\u30e0\u306b\u306f\u3001\u5b9f\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u5b9a\u7fa9\u306b default 1 \u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\uff08\u203bv2.5.4\u6642\u70b9\uff09\n\u4f8b\nCREATE TABLE user (\n   :\n  version integer not null default 1 -- \u2605\u2605\u2605\n   :\n);\n\n/**\n * @Entity\n * @Table(name=\"`user`\")\n */\nclass User\n{\n    /**\n     * @var integer\n     *\n     * @Version\n     * @Column(type=\"integer\", nullable=false, options={\"default\":1})\n     */\n    public $version;\n\n\u3068\u3044\u3046\u306e\u3082\u3001\nDoctrine\\ORM\\Persisters\\Entity\\BasicEntityPersister::getInsertColumnList\u3067\u660e\u793a\u7684\u306b @Version \u30ab\u30e9\u30e0\u3092insert\u5bfe\u8c61\u304b\u3089\u9664\u5916\u3057\u3066\u304a\u308a\u3001\u5b9f\u969b\u306einsert\u6587\u306bversion\u30ab\u30e9\u30e0\u304c\u542b\u307e\u308c\u306a\u3044\u305f\u3081\u3002\n    protected function getInsertColumnList()\n    {\n          :\n\n        foreach ($this->class->reflFields as $name => $field) {\n            if ($this->class->isVersioned && $this->class->versionField == $name) {\n                continue;\n            }\n\n[Doctrine ORM](https://github.com/doctrine/doctrine2)\u3067\u697d\u89b3\u7684\u30ed\u30c3\u30af\u306e\u4ed5\u7d44\u307f\u3092\u5229\u7528\u3059\u308b\u3059\u308b\u305f\u3081\u306b`@Version`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u4e0e\u3059\u308b\u30ab\u30e9\u30e0\u306b\u306f\u3001\u5b9f\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u5b9a\u7fa9\u306b `default 1` \u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\uff08\u203bv2.5.4\u6642\u70b9\uff09\n\n\u4f8b\n\n```sql\nCREATE TABLE user (\n   :\n  version integer not null default 1 -- \u2605\u2605\u2605\n   :\n);\n```\n\n```php\n/**\n * @Entity\n * @Table(name=\"`user`\")\n */\nclass User\n{\n    /**\n     * @var integer\n     *\n     * @Version\n     * @Column(type=\"integer\", nullable=false, options={\"default\":1})\n     */\n    public $version;\n```\n\n\u3068\u3044\u3046\u306e\u3082\u3001\n\n[Doctrine\\ORM\\Persisters\\Entity\\BasicEntityPersister::getInsertColumnList](https://github.com/doctrine/doctrine2/blob/v2.5.4/lib/Doctrine/ORM/Persisters/Entity/BasicEntityPersister.php#L1425)\u3067\u660e\u793a\u7684\u306b `@Version` \u30ab\u30e9\u30e0\u3092insert\u5bfe\u8c61\u304b\u3089\u9664\u5916\u3057\u3066\u304a\u308a\u3001\u5b9f\u969b\u306einsert\u6587\u306bversion\u30ab\u30e9\u30e0\u304c\u542b\u307e\u308c\u306a\u3044\u305f\u3081\u3002\n\n```php\n    protected function getInsertColumnList()\n    {\n          :\n\n        foreach ($this->class->reflFields as $name => $field) {\n            if ($this->class->isVersioned && $this->class->versionField == $name) {\n                continue;\n            }\n```\n", "tags": ["PHP", "Doctrine2"]}