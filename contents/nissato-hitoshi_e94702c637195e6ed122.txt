{"context": "\n\nAngular2 \u3072\u306a\u578b ver.0.0.3\n\n\u6982\u8981\nAngular2 \u3072\u306a\u578b ver.0.0.2 \u3092\u5143\u306b\u4ee5\u4e0b\u306e\u5909\u66f4\u3092\u52a0\u3048\u308b\u3002\n- \u8a8d\u8a3c\u7528\u30b5\u30fc\u30d3\u30b9\u306e\u8ffd\u52a0\uff08\u4e00\u90e8\u30c0\u30df\u30fc\uff09\n- \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306e\u8ffd\u52a0\uff08\u30c0\u30df\u30fc\uff09\n- \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u306e\u8ffd\u52a0\uff08\u30c0\u30df\u30fc\uff09\n- \u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u306e\u8ffd\u52a0\uff08\u30c0\u30df\u30fc\uff09\n\n\u624b\u98061\n\n\u8a8d\u8a3c\u7528\u306e\u30b5\u30fc\u30d3\u30b9\u8ffd\u52a0\n\n\napp/services/auth.service.ts\nimport { Injectable } from '@angular/core';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/operator/do';\nimport 'rxjs/add/operator/delay';\n\n@Injectable()\nexport class AuthService {\n  isLoggedIn: boolean = false;\n\n  // store the URL so we can redirect after logging in\n  redirectUrl: string;\n\n  login(email:string, password: string): Observable<boolean> {\n    return Observable.of(true).delay(1000).do(val => this.isLoggedIn = true);\n  }\n\n  logout(): void {\n    this.isLoggedIn = false;\n  }\n}\n\n\n\u203b\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u307b\u307c\u305d\u306e\u307e\u307e\uff08 login\u30e1\u30bd\u30c3\u30c9\u306b email\u3001password \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u8ffd\u52a0 \uff09\n\napp/services/auth-guade.service.ts\nimport { Injectable }       from '@angular/core';\nimport {\n  CanActivate, Router,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot\n}                           from '@angular/router';\nimport { AuthService }      from './auth.service';\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(private authService: AuthService, private router: Router) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    let url: string = state.url;\n\n    return this.checkLogin(url);\n  }\n\n  checkLogin(url: string): boolean {\n    if (this.authService.isLoggedIn) { return true; }\n\n    // Store the attempted URL for redirecting\n    this.authService.redirectUrl = url;\n\n    // Navigate to the login page with extras\n    this.router.navigate(['/login']);\n    return false;\n  }\n}\n\n\n\u203b\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u305d\u306e\u307e\u307e\n\n\u624b\u98062\n\n\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306e\u8ffd\u52a0\n\n\napp/login/login-routing.ts\nimport { NgModule }             from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LoginComponent }       from './login.component';\n\nconst loginRoutes: Routes = [\n  { path: 'login', component: LoginComponent }\n];\n\n@NgModule({\n  imports: [ RouterModule.forChild(loginRoutes) ],\n  exports: [ RouterModule ]\n})\nexport class LoginRoutingModule {}\n\n\n\napp/login/login.module.ts\nimport { NgModule }             from '@angular/core';\nimport { FormsModule }          from '@angular/forms';\nimport { LoginComponent }       from './login.component';\nimport { LoginRoutingModule }   from './login-routing.module';\nimport { AuthGuard }            from '../services/auth-guard.service';\nimport { AuthService }          from '../services/auth.service';\n\n@NgModule({\n  imports: [ LoginRoutingModule, FormsModule ],\n  declarations: [ LoginComponent ],\n  providers: [ AuthGuard, AuthService ]\n})\nexport class LoginModule {}\n\n\n\u203bFormsModule\u3001AuthGuard\u3001AuthService \u306e\u8aad\u8fbc\u3092\u884c\u3046\u3002\n\u203bAuthGuard\u3001AuthService \u306f providers \u306b\u8ffd\u52a0\u3059\u308b\u3002\n\napp/login/login.component.ts\nimport { Component,Input }  from '@angular/core';\nimport { Router }           from '@angular/router';\nimport { AuthService }      from '../services/auth.service';\nimport { Observable }       from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\n\n@Component({\n  moduleId:     module.id,\n  templateUrl:  './login.component.html',\n  styleUrls:    ['./login.component.css'] \n })\nexport class LoginComponent {\n  email: string = '';\n  password: string = '';\n\n  /**\n   * \u521d\u671f\u51e6\u7406\n   */\n  constructor(public authService: AuthService, public router: Router) {}\n\n  /**\n   * \u30ed\u30b0\u30a4\u30f3\u51e6\u7406\n   */\n  login() {\n\n    this.authService.login(this.email, this.password).subscribe(() => {\n\n      if (this.authService.isLoggedIn) {\n        let redirect = this.authService.redirectUrl ? this.authService.redirectUrl : '/home';\n        this.router.navigate([redirect]);\n      } else {\n        console.log('login error !!');\n      }\n    });\n  }\n\n  /**\n   * \u30ed\u30b0\u30a2\u30a6\u30c8\u51e6\u7406\n   */\n  logout() {\n    this.authService.logout();\n  }\n\n  /**\n   * \u5165\u529b\u30c1\u30a7\u30c3\u30af\u51e6\u7406\n   */\n  checkInputValue():boolean {\n    var disabled = ( !this.email || !this.password );\n    return disabled;\n  }\n}\n\n\n\napp/login/login.component.html\n<div class=\"panel panel-default\">\n  <div class=\"panel-heading\">\n    <h3 class=\"panel-title\">\u30ed\u30b0\u30a4\u30f3</h3>\n  </div>\n  <div class=\"panel-body\">\n    <form class=\"form-signin\">\n      <input name=\"email\" type=\"email\" [(ngModel)]=\"email\" class=\"form-control\" placeholder=\"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" required autofocus>\n      <input name=\"password\" type=\"password\"  [(ngModel)]=\"password\" class=\"form-control\" placeholder=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" required>\n      <button class=\"btn btn-lg btn-primary btn-block\" (click)=\"login()\" [disabled]=\"checkInputValue()\">\n        <span class=\"glyphicon glyphicon-log-in\" aria-hidden=\"true\"></span> \u30ed\u30b0\u30a4\u30f3\n      </button>\n    </form>\n  </div>\n</div>\n\n\n\napp/login/login.component.css\n.panel {\n  max-width: 380px;\n  margin: auto;\n  margin-top: 100px;\n}\n\ninput {\n  margin-top: 10px; \n}\n\nbutton {\n  margin-top: 30px; \n}\n\n\n\n\u624b\u98063\n\n\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u306e\u8ffd\u52a0\n\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u306e\u8ffd\u52a0\n\n\napp/user/user-routing.ts\nimport { NgModule }               from '@angular/core';\nimport { RouterModule, Routes }   from '@angular/router';\nimport { UserInfoComponent }      from './user-info.component';\nimport { UserPasswordComponent }  from './user-password.component';\nimport { AuthGuard }              from '../services/auth-guard.service';\n\nconst routes: Routes = [\n  { \n    path: 'user',\n    children: [\n      {\n        path: 'info',\n        component: UserInfoComponent,\n        canActivateChild: [ AuthGuard ], \n      },\n      {\n        path: 'password',\n        component: UserPasswordComponent,\n        canActivateChild: [ AuthGuard ], \n      },\n    ]\n  },\n];\n\n@NgModule({\n  imports: [ RouterModule.forChild(routes) ],\n  exports: [ RouterModule ]\n})\nexport class UserRoutingModule { }\n\n\n\napp/user/user.module.ts\nimport { NgModule }               from '@angular/core';\nimport { FormsModule }            from '@angular/forms';\nimport { UserInfoComponent }      from './user-info.component';\nimport { UserPasswordComponent }  from './user-password.component';\nimport { UserRoutingModule }      from './user-routing.module';\n\n@NgModule({\n  imports: [\n    UserRoutingModule,\n    FormsModule\n  ],\n  declarations: [\n    UserInfoComponent,\n    UserPasswordComponent\n  ]\n})\nexport class UserModule {}\n\n\n\napp/user/user-info.component.ts\nimport { Component } from '@angular/core';\n\n@Component({\n  moduleId: module.id,\n  templateUrl: 'user-info.component.html'\n})\nexport class UserInfoComponent { }\n\n\n\napp/user/user-info.component.html\n<div class=\"jumbotron\">\n  <h2>User Info</h2>\n</div>\n\n\n\napp/user/user-password.ts\nimport { Component } from '@angular/core';\n\n@Component({\n  moduleId: module.id,\n  templateUrl: 'user-password.component.html'\n})\nexport class UserPasswordComponent { }\n\n\n\napp/user/user-password.html\n<div class=\"jumbotron\">\n  <h2>User Password</h2>\n</div>\n\n\n\n\u624b\u98064\n\n\u30db\u30fc\u30e0\u753b\u9762\u306b\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u51e6\u7406\u3092\u8ffd\u52a0\n\n\napp/home/home-routing.ts\nconst routes: Routes = [\n  { \n    path: 'home',\n    component: HomeComponent,\n    canActivate: [ AuthGuard ], \n  },\n];\n\n\n\u203b canActivate: [ AuthGuard ], \u3092\u8ffd\u52a0\uff08\u3053\u308c\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u51e6\u7406\u306e\u5bfe\u8c61\u3068\u306a\u308b\uff09\n\n\u624b\u98065\n\n\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u90e8\u3092\u8a8d\u8a3c\u6e08\u306e\u5834\u5408\u306e\u307f\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\n\n\napp/app.component.html\n    <div id=\"navbar\" class=\"collapse navbar-collapse\">\n      <ul *ngIf=\"authService.isLoggedIn\" class=\"nav navbar-nav\">\n      </ul>\n      <ul *ngIf=\"authService.isLoggedIn\" class=\"nav navbar-nav navbar-right\">\n        <li class=\"dropdown\">\n\n\n\u203b *ngIf=\"authService.isLoggedIn\" \u3092\u8ffd\u52a0\u3057\u30ed\u30b0\u30a4\u30f3\u6e08\u306e\u5834\u5408\u306e\u307f\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\n\n\u624b\u98066\n\n\u30ed\u30b0\u30a2\u30a6\u30c8\u306e\u9077\u79fb\u5148\u3092\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u5909\u66f4\n\n\napp/app.component.html\n           <li>\n              <a routerLink=\"/user/info\">\n                <span class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span> \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\n              </a>\n            </li>\n            <li>\n              <a routerLink=\"/user/password\">\n                <span class=\"glyphicon glyphicon-lock\" aria-hidden=\"true\"></span> \u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\n              </a>\n            </li>\n            <li>\n              <a routerLink=\"/login\" (click)=\"authService.logout()\" >\n                <span class=\"glyphicon glyphicon-log-out\" aria-hidden=\"true\"></span> \u30ed\u30b0\u30a2\u30a6\u30c8\n              </a>\n            </li>\n\n\n\u203b href=\"#\" \u3092 routerLink=\"/login\" \u306b\u4fee\u6b63\n\u203b \u305d\u306e\u4ed6\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u3078\u306e href=\"#\" \u3082\u524a\u9664\n\n\u624b\u98067\n\n\u8ffd\u52a0\u6a5f\u80fd\u30fb\u753b\u9762\u306e\u8aad\u8fbc\u51e6\u7406\u3092\u8ffd\u52a0\n\n\napp/app.module.ts\nimport { NgModule }               from '@angular/core';\nimport { BrowserModule }          from '@angular/platform-browser';\nimport { CommonModule }           from '@angular/common';\nimport { FormsModule }            from '@angular/forms';\nimport { Router }                 from '@angular/router';\n\nimport { AppComponent }           from './app.component';\nimport { AppRoutingModule }       from './app-routing.module';\nimport { PageNotFoundComponent }  from './not-found.component';\nimport { HomeModule }             from './home/home.module';\nimport { LoginModule }            from './login/login.module';\nimport { UserModule }             from './user/user.module';\n\n@NgModule({\n  imports: [ \n    BrowserModule,\n    CommonModule,\n    FormsModule,\n    HomeModule,\n    LoginModule,\n    UserModule,\n    AppRoutingModule\n   ],\n  declarations: [\n    AppComponent,\n    PageNotFoundComponent\n  ],\n  bootstrap: [\n    AppComponent\n  ]\n})\nexport class AppModule {\n  constructor(router: Router) {\n    console.log('Routes: ', JSON.stringify(router.config, undefined, 2));\n  }\n}\n\n\n\u203b LoginModule\u3001UserModule \u306e\u8ffd\u52a0\uff08AppRoutingModule\u3088\u308a\u3082\u524d\u306b\uff09\n\n\u6700\u5f8c\u306b\n\n\u521d\u671f\u8868\u793a\u6642\u306b\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u90e8\u306b\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u7528\u306e\u30e1\u30cb\u30e5\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u306b\u9077\u79fb\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u306b\u9077\u79fb\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306b\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n\n\u53c2\u8003\nver.0.0.3\u30bd\u30fc\u30b9\nver.0.0.1 \u89e3\u8aac\u30da\u30fc\u30b8\nver.0.0.2 \u89e3\u8aac\u30da\u30fc\u30b8\n\u4ee5\u4e0a\n#Angular2 \u3072\u306a\u578b ver.0.0.3\n\n##\u6982\u8981\nAngular2 \u3072\u306a\u578b ver.0.0.2 \u3092\u5143\u306b\u4ee5\u4e0b\u306e\u5909\u66f4\u3092\u52a0\u3048\u308b\u3002\n- \u8a8d\u8a3c\u7528\u30b5\u30fc\u30d3\u30b9\u306e\u8ffd\u52a0\uff08\u4e00\u90e8\u30c0\u30df\u30fc\uff09\n- \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306e\u8ffd\u52a0\uff08\u30c0\u30df\u30fc\uff09\n- \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u306e\u8ffd\u52a0\uff08\u30c0\u30df\u30fc\uff09\n- \u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u306e\u8ffd\u52a0\uff08\u30c0\u30df\u30fc\uff09\n\n### \u624b\u98061\n- \u8a8d\u8a3c\u7528\u306e\u30b5\u30fc\u30d3\u30b9\u8ffd\u52a0\n\n```ts:app/services/auth.service.ts\nimport { Injectable } from '@angular/core';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/operator/do';\nimport 'rxjs/add/operator/delay';\n\n@Injectable()\nexport class AuthService {\n  isLoggedIn: boolean = false;\n\n  // store the URL so we can redirect after logging in\n  redirectUrl: string;\n\n  login(email:string, password: string): Observable<boolean> {\n    return Observable.of(true).delay(1000).do(val => this.isLoggedIn = true);\n  }\n\n  logout(): void {\n    this.isLoggedIn = false;\n  }\n}\n```\n\n\u203b\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u307b\u307c\u305d\u306e\u307e\u307e\uff08 login\u30e1\u30bd\u30c3\u30c9\u306b email\u3001password \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u8ffd\u52a0 \uff09\n\n```ts:app/services/auth-guade.service.ts\nimport { Injectable }       from '@angular/core';\nimport {\n  CanActivate, Router,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot\n}                           from '@angular/router';\nimport { AuthService }      from './auth.service';\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(private authService: AuthService, private router: Router) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    let url: string = state.url;\n\n    return this.checkLogin(url);\n  }\n\n  checkLogin(url: string): boolean {\n    if (this.authService.isLoggedIn) { return true; }\n\n    // Store the attempted URL for redirecting\n    this.authService.redirectUrl = url;\n\n    // Navigate to the login page with extras\n    this.router.navigate(['/login']);\n    return false;\n  }\n}\n```\n\n\u203b\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u305d\u306e\u307e\u307e\n\n### \u624b\u98062\n- \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306e\u8ffd\u52a0\n\n```ts:app/login/login-routing.ts\nimport { NgModule }             from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LoginComponent }       from './login.component';\n\nconst loginRoutes: Routes = [\n  { path: 'login', component: LoginComponent }\n];\n\n@NgModule({\n  imports: [ RouterModule.forChild(loginRoutes) ],\n  exports: [ RouterModule ]\n})\nexport class LoginRoutingModule {}\n```\n\n```ts:app/login/login.module.ts\nimport { NgModule }             from '@angular/core';\nimport { FormsModule }          from '@angular/forms';\nimport { LoginComponent }       from './login.component';\nimport { LoginRoutingModule }   from './login-routing.module';\nimport { AuthGuard }            from '../services/auth-guard.service';\nimport { AuthService }          from '../services/auth.service';\n\n@NgModule({\n  imports: [ LoginRoutingModule, FormsModule ],\n  declarations: [ LoginComponent ],\n  providers: [ AuthGuard, AuthService ]\n})\nexport class LoginModule {}\n```\n\n\u203bFormsModule\u3001AuthGuard\u3001AuthService \u306e\u8aad\u8fbc\u3092\u884c\u3046\u3002\n\u203bAuthGuard\u3001AuthService \u306f providers \u306b\u8ffd\u52a0\u3059\u308b\u3002\n\n```ts:app/login/login.component.ts\nimport { Component,Input }  from '@angular/core';\nimport { Router }           from '@angular/router';\nimport { AuthService }      from '../services/auth.service';\nimport { Observable }       from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\n\n@Component({\n  moduleId:     module.id,\n  templateUrl:  './login.component.html',\n  styleUrls:    ['./login.component.css'] \n })\nexport class LoginComponent {\n  email: string = '';\n  password: string = '';\n\n  /**\n   * \u521d\u671f\u51e6\u7406\n   */\n  constructor(public authService: AuthService, public router: Router) {}\n\n  /**\n   * \u30ed\u30b0\u30a4\u30f3\u51e6\u7406\n   */\n  login() {\n\n    this.authService.login(this.email, this.password).subscribe(() => {\n\n      if (this.authService.isLoggedIn) {\n        let redirect = this.authService.redirectUrl ? this.authService.redirectUrl : '/home';\n        this.router.navigate([redirect]);\n      } else {\n        console.log('login error !!');\n      }\n    });\n  }\n\n  /**\n   * \u30ed\u30b0\u30a2\u30a6\u30c8\u51e6\u7406\n   */\n  logout() {\n    this.authService.logout();\n  }\n\n  /**\n   * \u5165\u529b\u30c1\u30a7\u30c3\u30af\u51e6\u7406\n   */\n  checkInputValue():boolean {\n    var disabled = ( !this.email || !this.password );\n    return disabled;\n  }\n}\n```\n\n```html:app/login/login.component.html\n<div class=\"panel panel-default\">\n  <div class=\"panel-heading\">\n    <h3 class=\"panel-title\">\u30ed\u30b0\u30a4\u30f3</h3>\n  </div>\n  <div class=\"panel-body\">\n    <form class=\"form-signin\">\n      <input name=\"email\" type=\"email\" [(ngModel)]=\"email\" class=\"form-control\" placeholder=\"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" required autofocus>\n      <input name=\"password\" type=\"password\"  [(ngModel)]=\"password\" class=\"form-control\" placeholder=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" required>\n      <button class=\"btn btn-lg btn-primary btn-block\" (click)=\"login()\" [disabled]=\"checkInputValue()\">\n        <span class=\"glyphicon glyphicon-log-in\" aria-hidden=\"true\"></span> \u30ed\u30b0\u30a4\u30f3\n      </button>\n    </form>\n  </div>\n</div>\n```\n\n```css:app/login/login.component.css\n.panel {\n  max-width: 380px;\n  margin: auto;\n  margin-top: 100px;\n}\n\ninput {\n  margin-top: 10px; \n}\n\nbutton {\n  margin-top: 30px; \n}\n```\n\n### \u624b\u98063\n- \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u306e\u8ffd\u52a0\n- \u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u306e\u8ffd\u52a0\n\n```ts:app/user/user-routing.ts\nimport { NgModule }               from '@angular/core';\nimport { RouterModule, Routes }   from '@angular/router';\nimport { UserInfoComponent }      from './user-info.component';\nimport { UserPasswordComponent }  from './user-password.component';\nimport { AuthGuard }              from '../services/auth-guard.service';\n\nconst routes: Routes = [\n  { \n    path: 'user',\n    children: [\n      {\n        path: 'info',\n        component: UserInfoComponent,\n        canActivateChild: [ AuthGuard ], \n      },\n      {\n        path: 'password',\n        component: UserPasswordComponent,\n        canActivateChild: [ AuthGuard ], \n      },\n    ]\n  },\n];\n\n@NgModule({\n  imports: [ RouterModule.forChild(routes) ],\n  exports: [ RouterModule ]\n})\nexport class UserRoutingModule { }\n```\n\n```ts:app/user/user.module.ts\nimport { NgModule }               from '@angular/core';\nimport { FormsModule }            from '@angular/forms';\nimport { UserInfoComponent }      from './user-info.component';\nimport { UserPasswordComponent }  from './user-password.component';\nimport { UserRoutingModule }      from './user-routing.module';\n\n@NgModule({\n  imports: [\n    UserRoutingModule,\n    FormsModule\n  ],\n  declarations: [\n    UserInfoComponent,\n    UserPasswordComponent\n  ]\n})\nexport class UserModule {}\n```\n\n```ts:app/user/user-info.component.ts\nimport { Component } from '@angular/core';\n\n@Component({\n  moduleId: module.id,\n  templateUrl: 'user-info.component.html'\n})\nexport class UserInfoComponent { }\n```\n\n```html:app/user/user-info.component.html\n<div class=\"jumbotron\">\n  <h2>User Info</h2>\n</div>\n```\n\n```ts:app/user/user-password.ts\nimport { Component } from '@angular/core';\n\n@Component({\n  moduleId: module.id,\n  templateUrl: 'user-password.component.html'\n})\nexport class UserPasswordComponent { }\n```\n\n```ts:app/user/user-password.html\n<div class=\"jumbotron\">\n  <h2>User Password</h2>\n</div>\n```\n\n### \u624b\u98064\n- \u30db\u30fc\u30e0\u753b\u9762\u306b\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u51e6\u7406\u3092\u8ffd\u52a0\n\n```ts:app/home/home-routing.ts\nconst routes: Routes = [\n  { \n    path: 'home',\n    component: HomeComponent,\n    canActivate: [ AuthGuard ], \n  },\n];\n```\n\n\u203b canActivate: [ AuthGuard ], \u3092\u8ffd\u52a0\uff08\u3053\u308c\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u51e6\u7406\u306e\u5bfe\u8c61\u3068\u306a\u308b\uff09\n\n### \u624b\u98065\n- \u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u90e8\u3092\u8a8d\u8a3c\u6e08\u306e\u5834\u5408\u306e\u307f\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\n\n```html:app/app.component.html\n    <div id=\"navbar\" class=\"collapse navbar-collapse\">\n      <ul *ngIf=\"authService.isLoggedIn\" class=\"nav navbar-nav\">\n      </ul>\n      <ul *ngIf=\"authService.isLoggedIn\" class=\"nav navbar-nav navbar-right\">\n        <li class=\"dropdown\">\n```\n\n\u203b *ngIf=\"authService.isLoggedIn\" \u3092\u8ffd\u52a0\u3057\u30ed\u30b0\u30a4\u30f3\u6e08\u306e\u5834\u5408\u306e\u307f\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\n\n### \u624b\u98066\n- \u30ed\u30b0\u30a2\u30a6\u30c8\u306e\u9077\u79fb\u5148\u3092\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u5909\u66f4\n\n```html:app/app.component.html\n           <li>\n              <a routerLink=\"/user/info\">\n                <span class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span> \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\n              </a>\n            </li>\n            <li>\n              <a routerLink=\"/user/password\">\n                <span class=\"glyphicon glyphicon-lock\" aria-hidden=\"true\"></span> \u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\n              </a>\n            </li>\n            <li>\n              <a routerLink=\"/login\" (click)=\"authService.logout()\" >\n                <span class=\"glyphicon glyphicon-log-out\" aria-hidden=\"true\"></span> \u30ed\u30b0\u30a2\u30a6\u30c8\n              </a>\n            </li>\n```\n\n\u203b href=\"#\" \u3092 routerLink=\"/login\" \u306b\u4fee\u6b63\n\u203b \u305d\u306e\u4ed6\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u3078\u306e href=\"#\" \u3082\u524a\u9664\n\n### \u624b\u98067\n- \u8ffd\u52a0\u6a5f\u80fd\u30fb\u753b\u9762\u306e\u8aad\u8fbc\u51e6\u7406\u3092\u8ffd\u52a0\n\n```ts:app/app.module.ts\nimport { NgModule }               from '@angular/core';\nimport { BrowserModule }          from '@angular/platform-browser';\nimport { CommonModule }           from '@angular/common';\nimport { FormsModule }            from '@angular/forms';\nimport { Router }                 from '@angular/router';\n\nimport { AppComponent }           from './app.component';\nimport { AppRoutingModule }       from './app-routing.module';\nimport { PageNotFoundComponent }  from './not-found.component';\nimport { HomeModule }             from './home/home.module';\nimport { LoginModule }            from './login/login.module';\nimport { UserModule }             from './user/user.module';\n\n@NgModule({\n  imports: [ \n    BrowserModule,\n    CommonModule,\n    FormsModule,\n    HomeModule,\n    LoginModule,\n    UserModule,\n    AppRoutingModule\n   ],\n  declarations: [\n    AppComponent,\n    PageNotFoundComponent\n  ],\n  bootstrap: [\n    AppComponent\n  ]\n})\nexport class AppModule {\n  constructor(router: Router) {\n    console.log('Routes: ', JSON.stringify(router.config, undefined, 2));\n  }\n}\n```\n\n\u203b LoginModule\u3001UserModule \u306e\u8ffd\u52a0\uff08AppRoutingModule\u3088\u308a\u3082\u524d\u306b\uff09\n\n### \u6700\u5f8c\u306b\n- \u521d\u671f\u8868\u793a\u6642\u306b\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n- \u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u90e8\u306b\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u7528\u306e\u30e1\u30cb\u30e5\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n- \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u9762\u306b\u9077\u79fb\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n- \u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u753b\u9762\u306b\u9077\u79fb\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n- \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306b\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n### \u53c2\u8003\n[ver.0.0.3\u30bd\u30fc\u30b9](https://github.com/nissato-hitoshi/angular2-sample01/tree/ver.0.0.3)\n\n[ver.0.0.1 \u89e3\u8aac\u30da\u30fc\u30b8](http://qiita.com/nissato-hitoshi/items/05848f0d7bd7839c1d0e)\n[ver.0.0.2 \u89e3\u8aac\u30da\u30fc\u30b8](http://qiita.com/nissato-hitoshi/items/716ead1cfb1d4e4d46a1)\n\n\n\u4ee5\u4e0a\n\n\n\n\n", "tags": ["Angular2"]}