{"context": " More than 1 year has passed since last update.\u4eca\u56de\u306fFlappy\u7cfb\u30b2\u30fc\u30e0\u300cFlappybalt\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u516c\u5f0f\u306e\u30c7\u30e2\u306f\u3053\u3061\u3089\u3067\u3059\u3002\nhttp://haxeflixel.com/demos/Flappybalt/\n\n\u898b\u305f\u76ee\u306f\u30b9\u30bf\u30a4\u30ea\u30c3\u30b7\u30e5\u306a\u96f0\u56f2\u6c17\u3067\u3059\u304c\u3001\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u3068\u3066\u3082\u30b7\u30d3\u30a2\u306a\u6fc0\u30e0\u30ba\u30b2\u30fc\u30e0\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u3067\u3059\u3002\nhttps://github.com/HaxeFlixel/flixel-demos/tree/master/Other/Flappybalt/source\n\u307e\u305f\u753b\u50cf\u30ea\u30bd\u30fc\u30b9\u304c\u3044\u304f\u3064\u304b\u5fc5\u8981\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nhttps://github.com/HaxeFlixel/flixel-demos/tree/master/Other/Flappybalt/assets\n\nbg.png\ndove.png\nfeather.png\nicon.png\nicon.svg\npaddle.png\nscreenshot.png\nspike.png\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u305f\u3089\u3001assets/images\u30d5\u30a9\u30eb\u30c0\u306b\u307e\u3068\u3081\u3066\u683c\u7d0d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u8d77\u52d5\u8a2d\u5b9a (Main.hx)\n\u3044\u3064\u3082\u306e\u3088\u3046\u306b\u8d77\u52d5\u8a2d\u5b9a\u3092Main.hx\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\nMain.hx\nclass Main extends Sprite \n{\n    var gameWidth:Int = 160;\n    var gameHeight:Int = 240;\n    var initialState:Class<FlxState> = PlayState;\n    var zoom:Float = -1;\n    var framerate:Int = 60;\n    var skipSplash:Bool = true;\n    var startFullscreen:Bool = false;\n\n\n\u4eca\u56de\u306f\u89e3\u50cf\u5ea6\u304c160x240\u3068\u306a\u308a\u307e\u3059\u3002skipSplash\u3092true\u306b\u3059\u308b\u3053\u3068\u3067\u30b9\u30d7\u30e9\u30c3\u30b7\u30e5\u8868\u793a\u304c\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u308b\u306e\u3067\u3001\u30c8\u30e9\u30a4\uff06\u30a8\u30e9\u30fc\u304c\u7d20\u65e9\u304f\u3067\u304d\u308b\u3088\u3046\u306b\u306b\u306a\u308a\u307e\u3059\u3002\n\u3042\u3068\u4eca\u56de\u306f\u7e26\u9577\u306a\u306e\u3067\u3001Project.xml\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u753b\u9762\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\nProject.xml\n<!--These window settings apply to all targets-->\n<window width=\"480\" height=\"720\" fps=\"60\" background=\"#000000\" hardware=\"true\" vsync=\"true\" />\n\n\n640x480\u304b\u3089\u3001480x720\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n\u80cc\u666f\u306e\u8868\u793a (PlayState.hx)\n\u307e\u305a\u306f\u80cc\u666f\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u3093\u3067\u8868\u793a\u3057\u307e\u3059\u3002create()\u95a2\u6570\u306b\u8aad\u307f\u8fbc\u307f\u30fb\u8868\u793a\u51e6\u7406\u3092\u5165\u308c\u307e\u3059\u3002\n\nPlayState.hx\nclass PlayState extends FlxState {\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        add(new FlxSprite(0, 0, \"assets/images/bg.png\"));\n    }\n\n\n\u5b9f\u884c\u3059\u308b\u3068\u80cc\u666f\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\n\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u52d5\u304b\u3059\n\n\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u5b9f\u88c5 (Player.hx)\n\u65b0\u898f\u306b\u30af\u30e9\u30b9(Player)\u3092\u4f5c\u6210\u3057\u3066\u3001\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u307e\u305a\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u3059\u3002\n\nPlayer.hx\n/**\n * \u30d7\u30ec\u30a4\u30e4\u30fc\u30af\u30e9\u30b9\n **/\nclass Player extends FlxSprite {\n\n    /**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n     */\n    public function new() {\n\n        // \u753b\u9762\u4e2d\u5fc3\u306b\u751f\u6210\n        super(FlxG.width * 0.5 - 4, FlxG.height * 0.5 - 4);\n\n        // \u753b\u50cf\u8aad\u307f\u8fbc\u307f (\u30a2\u30cb\u30e1\u4ed8\u304d)\n        loadGraphic(\"assets/images/dove.png\", true);\n\n        // \u30a2\u30cb\u30e1\u756a\u53f72\u3067\u59cb\u3081\u308b\n        animation.frameIndex = 2;\n\n        // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\n        // 1 -> 0 -> 1 -> 2 \u306e\u9806\u756a\n        // 12\u30d5\u30ec\u30fc\u30e0\u3067\u66f4\u65b0\n        // \u30eb\u30fc\u30d7\u306a\u3057\n        animation.add(\"flap\", [1, 0, 1, 2], 12, false);\n    }\n\n\n\u753b\u9762\u4e2d\u5fc3\u306b\u914d\u7f6e\u3057\u3001\u753b\u50cf\u3092\u30a2\u30cb\u30e1\u3064\u304d\u3067\u8aad\u307f\u8fbc\u307f\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u3060\u3051\u30a2\u30cb\u30e1\u3059\u308b\u306e\u3067\u30eb\u30fc\u30d7\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u306a\u304a\u30a2\u30cb\u30e1\u756a\u53f7\u306f2\u306e\u7fbd\u3092\u5e83\u3052\u305f\u72b6\u614b\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u7d9a\u3044\u3066\u66f4\u65b0\u95a2\u6570\u3067\u3059\u3002SPACE\u3092\u62bc\u3059\u3068\u30b8\u30e3\u30f3\u30d7\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nPlayer.hx\n    /**\n     * \u66f4\u65b0\n     */\n    override public function update():Void {\n\n        if(FlxG.keys.justPressed.SPACE) {\n            if(acceleration.y == 0) {\n                // \u52d5\u3044\u3066\u3044\u306a\u3051\u308c\u3070\u52d5\u304d\u59cb\u3081\u308b\n                acceleration.y = 500; // \u91cd\u529b\u8a2d\u5b9a\n                velocity.x = 80; // \u53f3\u306b\u52d5\u304d\u59cb\u3081\u308b\n            }\n            velocity.y = -240; // \u30b8\u30e3\u30f3\u30d7\u3059\u308b\n\n            // \u30a2\u30cb\u30e1\u3092\u6700\u521d\u304b\u3089\u518d\u751f\n            animation.play(\"flap\", true);\n        }\n\n        super.update();\n    } \n\n\n\n\u30d7\u30ec\u30a4\u30e4\u30fc\u3092State\u306b\u914d\u7f6e (PlayState.hx)\nPlayState.hx\u3092\u7de8\u96c6\u3057\u3066\u3001\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30d5\u30a3\u30fc\u30eb\u30c9_player\u3092\u8ffd\u52a0\u3057\u3066\u3001create()\u3067new\u3057\u307e\u3059\u3002\n\nPlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        add(new FlxSprite(0, 0, \"assets/images/bg.png\"));\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u751f\u6210\n        _player = new Player();\n        add(_player);\n    }\n\n\n\u66f4\u65b0\u95a2\u6570update()\u306b\u753b\u9762\u7aef\u3067\u8df3\u306d\u8fd4\u308b\u5224\u5b9a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nPlayState.hx\n    override public function update():Void {\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            _player.x = 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u3082\u3068\u306b\u623b\u3059\n            _player.flipX = false;\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            _player.x = FlxG.width - _player.width - 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u53cd\u8ee2\n            _player.flipX = true;\n        }\n\n        super.update();\n    }\n\n\nflipX\u306btrue\u3092\u6307\u5b9a\u3059\u308b\u3068\u753b\u50cf\u3092\u53cd\u8ee2\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001SPACE\u30ad\u30fc\u3067\u30b8\u30e3\u30f3\u30d7\u3057\u3066\u753b\u9762\u7aef\u3067\u8df3\u306d\u8fd4\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u8df3\u306d\u8fd4\u308b\u58c1\u3092\u4f5c\u308b (Reg.hx)\n\u3053\u306e\u307e\u307e\u3060\u3068\u306a\u305c\u753b\u9762\u7aef\u3067\u6298\u308a\u8fd4\u3059\u306e\u304b\u304c\u5206\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u753b\u9762\u7aef\u306b\u8df3\u306d\u8fd4\u308a\u7528\u306e\u58c1\u3092\u7f6e\u3044\u3066\u3001\u8df3\u306d\u8fd4\u3063\u305f\u6642\u306b\u5149\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u58c1\u753b\u50cf\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u4e0a\u3067\u4f5c\u6210\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u306a\u304aReg.hx\u306fState\u3092\u307e\u305f\u304c\u308b\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u30af\u30e9\u30b9\u3068\u3057\u3066\u4f7f\u3046\u3088\u3046\u3067\u3059\u3002\n\nReg.hx\nclass Reg\n{\n    // \u58c1\u306e\u753b\u50cf\u30c7\u30fc\u30bf\n    static private var _bitmapData:BitmapData;\n\n    /**\n     * \u8df3\u306d\u8fd4\u308a\u58c1\u306e\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n     **/\n    static public function getBounceImage(height:Int):BitmapData {\n        if(_bitmapData != null) {\n            // \u751f\u6210\u6e08\u307f\u3067\u3042\u308c\u3070\u305d\u306e\u307e\u307e\u8fd4\u3059\n            return _bitmapData;\n        }\n\n        // \u8272\u5b9a\u7fa9\n        var WHITE:Int = 0xffFFFFFF;\n        var GREY_LIGHT:Int = 0xffB0B0BF;\n        var GREY_MED:Int = 0xff646A7D;\n        var GREY_DARK:Int = 0xff35353D;\n\n        // \u30d3\u30c3\u30c8\u30de\u30c3\u30d7\u751f\u6210\n        _bitmapData = new BitmapData(8, height, false, GREY_MED);\n\n        var rect:Rectangle = new Rectangle(4, 0, 4, height);\n        _bitmapData.fillRect(rect, GREY_LIGHT);\n        rect.setTo(0, 1, 1, height - 2);\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.x = 3;\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.setTo(1, 0, 2, 1);\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.y = height - 1;\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.setTo(4, 1, 1, height - 2);\n        _bitmapData.fillRect(rect, WHITE);\n        rect.x = 7;\n        _bitmapData.fillRect(rect, WHITE);\n        rect.setTo(5, 0, 2, 1);\n        _bitmapData.fillRect(rect, WHITE);\n        rect.y = height - 1;\n        _bitmapData.fillRect(rect, WHITE);\n\n        return _bitmapData;\n    }\n\n\n\n\u77e9\u5f62\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u4f5c\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u8907\u96d1\u3067\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3053\u3053\u306f\u30b3\u30d4\u30da\u3067\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u305f\u3060\u7406\u89e3\u3057\u3066\u304a\u304f\u3079\u304d\u3053\u3068\u306f\u3001\u5de6\u534a\u5206\u306f\u767d\u3044\u58c1\u3067\u53f3\u534a\u5206\u306f\u9ed2\u3063\u307d\u3044\u58c1\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u901a\u5e38\u306f\u9ed2\u3044\u58c1\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u58c1\u3067\u8df3\u306d\u8fd4\u308b\u6642\u306b\u4e00\u77ac\u767d\u3044\u58c1\u306b\u306a\u308b\u3001\u3068\u3044\u3046\u4f7f\u3044\u65b9\u3092\u3057\u307e\u3059\u3002\n\n\u58c1\u3092\u914d\u7f6e\u3057\u3066\u5149\u3089\u305b\u308b (PlayState.hx)\n\u3067\u306f\u3053\u306e\u58c1\u3092\u914d\u7f6e\u3057\u3066\u307f\u307e\u3059\u3002PlayState.hx\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b_bounceLeft\u3068_boundRight\u3092\u8ffd\u52a0\u3057\u3001create()\u95a2\u6570\u3067\u751f\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n\nPlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        add(new FlxSprite(0, 0, \"assets/images/bg.png\"));\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u751f\u6210\n        _player = new Player();\n        add(_player);\n\n        // \u8df3\u306d\u8fd4\u308a\u58c1\uff08\u5de6\uff09\u306e\u751f\u6210\n        _bounceLeft = new FlxSprite(1, 17);\n        // 1\u30d1\u30bf\u30fc\u30f3\u3042\u305f\u308a4x(height-34)\u306e\u30a2\u30cb\u30e1\u3092\u751f\u6210\u3059\u308b\n        _bounceLeft.loadGraphic(Reg.getBounceImage(FlxG.height - 34), true, 4, FlxG.height - 34);\n        _bounceLeft.animation.add(\"flash\", [1, 0], 8, false);\n        add(_bounceLeft);\n\n        // \u8df3\u306d\u8fd4\u308a\u58c1\uff08\u53f3\uff09\u306e\u751f\u6210\n        _bounceRight = new FlxSprite(FlxG.width - 5, 17);\n        _bounceRight.loadGraphic(Reg.getBounceImage(FlxG.height - 34), true, 4, FlxG.height - 34);\n        _bounceRight.animation.add(\"flash\", [1, 0], 8, false);\n        add(_bounceRight);\n    }\n\n\n\n\u5148\u307b\u3069Reg\u30af\u30e9\u30b9\u3067\u4f5c\u6210\u3057\u305f\u753b\u50cf\u3092\u4f7f\u7528\u3057\u3066\u3001\u58c1\u753b\u50cf\u3092\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001\u58c1\u306b\u3042\u305f\u3063\u305f\u6642\u306b\"flash\"\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u751f\u3055\u305b\u3066\u307f\u307e\u3059\u3002\n\nPlayState.hx\n    override public function update():Void {\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            _player.x = 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u3082\u3068\u306b\u623b\u3059\n            _player.flipX = false;\n            // \u5de6\u58c1\u5149\u308b\n            _bounceLeft.animation.play(\"flash\");\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            _player.x = FlxG.width - _player.width - 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u53cd\u8ee2\n            _player.flipX = true;\n            // \u53f3\u58c1\u5149\u308b\n            _bounceRight.animation.play(\"flash\");\n        }\n\n        super.update();\n    }\n\n\n\u753b\u9762\u7aef\u5224\u5b9a\u306e\u6700\u5f8c\u3067\u3001\u5149\u308b\u30a2\u30cb\u30e1\u306e\u518d\u751f\u95a2\u6570\u3092\u547c\u3076\u3060\u3051\u3067\u3059\u3002\n\u3053\u308c\u3067\u753b\u9762\u7aef\u3067\u5149\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3069\u3046\u3067\u3082\u3044\u3044\u3053\u3068\u3067\u3059\u304c\u3001\u58c1\u304c\u5149\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u53d6\u308b\u306e\u306f\u30b7\u30d3\u30a2\u3067\u96e3\u3057\u304b\u3063\u305f\u3067\u3059\u3002\n\n\u5e8a\u3068\u5929\u4e95\u306b\u91dd\u58c1\u3092\u914d\u7f6e\u3059\u308b (PlayState.hx)\n\u5e8a\u3068\u5929\u4e95\u306b\u91dd\u306e\u58c1\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002PlayState\u30af\u30e9\u30b9\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b_spikeBottom\u3068_spikeTop\u3092\u8ffd\u52a0\u3057,\n\nPlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n        // \u8df3\u306d\u8fd4\u308a\u58c1\uff08\u53f3\uff09\u306e\u751f\u6210\n        _bounceRight = new FlxSprite(FlxG.width - 5, 17);\n        _bounceRight.loadGraphic(Reg.getBounceImage(FlxG.height - 34), true, 4, FlxG.height - 34);\n        _bounceRight.animation.add(\"flash\", [1, 0], 8, false);\n        add(_bounceRight);\n\n        // \u91dd\u306e\u5e8a\u3092\u751f\u6210\n        _spikeBottom = new FlxSprite(0, 0, \"assets/images/spike.png\");\n        _spikeBottom.y = FlxG.height - _spikeBottom.height;\n        add(_spikeBottom);\n\n        // \u91dd\u306e\u5929\u4e95\u3092\u751f\u6210\n        _spikeTop = new FlxSprite(0, 0);\n        _spikeTop.loadRotatedGraphic(\"assets/images/spike.png\", 4);\n        _spikeTop.angle = 180;\n        _spikeTop.y = -72;\n        add(_spikeTop);\n    }\n\n\n\u91dd\u5929\u4e95\u3067\u3059\u304c\u3001\u91dd\u753b\u50cf\u3092loadRotatedGraphic()\u3067\u30ed\u30fc\u30c9\u30574\u30d1\u30bf\u30fc\u30f3\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30010\u5ea6\u30fb90\u5ea6\u30fb180\u5ea6\u30fb270\u5ea6\u306b\u56de\u8ee2\u3057\u305f\u753b\u50cf\u3092\u4fdd\u6301\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059(\u7b2c\u4e8c\u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u6570\u5024\u3067\u30d1\u30bf\u30fc\u30f3\u6570\u304c\u6c7a\u307e\u308a\u307e\u3059)\u3002\u305d\u308c\u306b\u3088\u308a\u3001\u89d2\u5ea6\u3092180\u5ea6\u56de\u8ee2\u3055\u305b\u3066\u63cf\u753b\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u306a\u304a\u3001loadRotateGraphic\u306e\u8a73\u7d30\u306f\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\u304c\u53c2\u8003\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\nFlixel Demo \u2013 Creating animated and rotated sprites from an un-rotated animated images\n\n\nhttp://gameonaut.com/wordpress/2011/11/flixel-demo-creating-animated-and-rotated-sprites-from-an-un-rotated-animated-images/\n\n\n\n\u3064\u3044\u3067\u306b\u5f53\u305f\u308a\u5224\u5b9a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nPlayState.hx\n    /**\n     * \u30d7\u30ec\u30a4\u30e4\u30fc\u3068\u91dd\u3068\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\n     * @return \u5f53\u305f\u3063\u3066\u3044\u305f\u3089true\n     **/\n    private function _isHit():Bool {\n        if(FlxG.pixelPerfectOverlap(_player, _spikeBottom)) { return true; } // \u91dd\u5e8a\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _spikeTop)) { return true; } // \u91dd\u5929\u4e95\u306b\u885d\u7a81\n\n        return false; // \u4f55\u3082\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\n    }\n\n    override public function update():Void {\n\n        if(_isHit()) {\n            // \u30d7\u30ec\u30a4\u30e4\u30fc\u6b7b\u4ea1\n            _player.kill();\n        }\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n\nFlxG.pixelPerfectOverlap()\u3092\u4f7f\u7528\u3059\u308b\u3068\u30012\u3064\u306eFlxSprite\u304c\u30d4\u30af\u30bb\u30eb\u306e\u91cd\u306a\u308a\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3067\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u5b9f\u884c\u3057\u3066\u3001\u91dd\u306b\u885d\u7a81\u3059\u308b\u3068\u30d7\u30ec\u30a4\u30e4\u30fc\u304c\u6d88\u3048\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3060\u3068\u4f55\u304c\u8d77\u304d\u305f\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\n\n\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u5b9f\u88c5 (PlayState.hx)\n\u30a8\u30d5\u30a7\u30af\u30c8\u306b\u306fFlxEmitter\u3068\u3044\u3046\u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30a8\u30df\u30c3\u30bf\u3068\u306f\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u767a\u751f\u6e90\u3092\u6307\u3059\u7528\u8a9e\u3067\u3059\u3002PlayState.hx\u306b\u30d5\u30a3\u30fc\u30eb\u30c9_feathers\u3092\u8ffd\u52a0\u3057\u3066\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\nPlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n    private var _feathers:FlxEmitter; // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n\n        // \u91dd\u306e\u5929\u4e95\u3092\u751f\u6210\n        _spikeTop = new FlxSprite(0, 0);\n        _spikeTop.loadRotatedGraphic(\"assets/images/spike.png\", 4);\n        _spikeTop.angle = 180;\n        _spikeTop.y = -72;\n        add(_spikeTop);\n\n        // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u751f\u6210\n        _feathers = new FlxEmitter();\n        _feathers.makeParticles(\"assets/images/feather.png\", 50, 32);\n        _feathers.setXSpeed(-10, 10);\n        _feathers.setYSpeed(-10, 10);\n        _feathers.gravity = 10;\n        add(_feathers);\n    }\n\n\n\u30a8\u30df\u30c3\u30bf\u306e\u751f\u6210\u5f8c\u3001\u79fb\u52d5\u91cf\u306e\u6700\u5927\u5024\u3084\u91cd\u529b\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u30a8\u30d5\u30a7\u30af\u30c8\u518d\u751f\u7528\u306e\u95a2\u6570\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\nPlayState.hx\n    /**\n     * \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\u751f\u6210\n     * @param x \u30a8\u30df\u30c3\u30bf\u306eS\u5ea7\u6a19\n     * @param y \u30a8\u30df\u30c3\u30bf\u306eY\u5ea7\u6a19\n     * @param amount \u51fa\u73fe\u6570\n     **/\n    public function launchFeathers(x:Float, y:Float, amount:Int):Void {\n        _feathers.x = x;\n        _feathers.y = y;\n        // \u30a8\u30d5\u30a7\u30af\u30c8\u3092\u767a\u751f\n        // \u4e00\u6589\u306b\u767a\u751f\n        // \u30a8\u30d5\u30a7\u30af\u30c8\u306e\u751f\u5b58\u6642\u9593\n        // \u767a\u751f\u3059\u308b\u9593\u9694\n        // \u767a\u751f\u3059\u308b\u6570\n        _feathers.start(true, 2, 0, amount, 1);\n    }\n\n\nstart()\u95a2\u6570\u3067\u3059\u304c\u3001\u7b2c\u4e00\u5f15\u6570\u306btrue\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u4e00\u6589\u306b\u767a\u751f\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u3057\u3066\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u751f\u5b58\u6642\u9593\u306f2\u79d2\u3001\u767a\u751f\u9593\u9694\u306e\u6307\u5b9a\u306f\u306a\u3057\u3001\u767a\u751f\u6570\u3092amount\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u6700\u5f8c\u306e\u5f15\u6570\u306f\u30eb\u30fc\u30d7\u56de\u6570\u3067\u3059\u30021\u306a\u306e\u30671\u56de\u767a\u751f\u3057\u3066\u7d42\u308f\u308a\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\nActionScript\u5165\u9580wiki - FlxEmitter.start()\u306e\u8a73\u7d30\n\n\nhttp://www40.atwiki.jp/spellbound/pages/1554.html\n\n\n\n\n\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u518d\u751f (Player.hx)\nPlayer.hx\u306b\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u518d\u751f\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002kill()\u95a2\u6570\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nPlayer.hx\n    /**\n     * \u6b7b\u4ea1\u51e6\u7406\n     **/\n    override public function kill():Void {\n        if(exists == false) {\n            // \u3059\u3067\u306b\u6b7b\u3093\u3067\u3044\u308b\u306a\u3089\u4f55\u3082\u3057\u306a\u3044\n            return;\n        }\n\n        // PlayState\u3092\u53d6\u5f97\n        var state:PlayState = cast(FlxG.state, PlayState);\n        state.launchFeathers(x, y, 10);\n\n        super.kill();\n\n        // \u753b\u9762\u5168\u4f53\u3092\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u3059\u308b\n        FlxG.camera.flash(0xffFFFFFF, 1);\n        // \u753b\u9762\u3092\u63fa\u3089\u3059\n        FlxG.camera.shake(0.02, 0.35);\n    }\n\n\n\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u3068\u4e00\u7dd2\u306b\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u3068\u753b\u9762\u63fa\u308c\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3067\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306f\u5b9f\u88c5\u5b8c\u4e86\u3067\u3059\u3002\n\n\n\u5de6\u53f3\u306e\u30d1\u30c9\u30eb\u3092\u5b9f\u88c5\u3059\u308b (Paddle.hx)\n\u5de6\u53f3\u306e\u79fb\u52d5\u3059\u308b\u30d1\u30c9\u30eb\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u65b0\u898f\u306bPaddle\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\nPaddile.hx\n/**\n * \u30d1\u30c9\u30eb\u30af\u30e9\u30b9\n **/\nclass Paddle extends FlxSprite {\n\n    static public inline var SPEED:Int = 480; // \u76ee\u6a19\u306b\u9032\u3080\u79fb\u52d5\u901f\u5ea6\n    public var targetY:Int = 0; // \u76ee\u6a19\u5ea7\u6a19(Y)\n\n    /**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n     **/\n    public function new(x:Float=0, facing:Int=0) {\n\n        super(0, 0);\n\n        // \u753b\u50cf\u8aad\u307f\u8fbc\u307f\n        loadGraphic(\"assets/images/paddle.png\", false);\n        if(facing == FlxObject.LEFT) {\n            // \u5de6\u5411\u304d\u306a\u3089\u53cd\u8ee2\u3059\u308b\n            flipX = true;\n        }\n\n        // \u79fb\u52d5\u3059\u308b\n        this.x = x;\n        y = 0-height; // \u753b\u9762\u5916\u306b\u51fa\u3059\n    }\n\n    /**\n     * \u4f4d\u7f6e\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u3059\u308b\n     **/\n    public function randomize():Void {\n\n        // \u30d1\u30c9\u30eb\u306e\u4f4d\u7f6e\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u8a2d\u5b9a\n        targetY = cast(FlxG.state, PlayState).randomPaddleY();\n\n        if(targetY < y) {\n            // \u4e0a\u65b9\u5411\u3078\u79fb\u52d5\n            velocity.y = -SPEED;\n        }\n        else {\n            // \u4e0b\u65b9\u5411\u3078\u79fb\u52d5\n            velocity.y = SPEED;\n        }\n    }\n\n    /**\n     * \u66f4\u65b0\n     **/\n    override public function update():Void {\n\n        var bStop:Bool = false; // \u505c\u6b62\u3059\u308b\u304b\u3069\u3046\u304b\n        if(velocity.y < 0) {\n            // \u4e0a\u65b9\u5411\u3078\u79fb\u52d5\n            // \u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u3067\u76ee\u6a19\u5ea7\u6a19\u3092\u8d85\u3048\u308b\u306a\u3089\u505c\u6b62\u3059\u308b\n            bStop = (y <= targetY + SPEED * FlxG.elapsed);\n        }\n        else {\n            // \u4e0b\u65b9\u5411\u3078\u79fb\u52d5\n            // \u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u3067\u76ee\u6a19\u5ea7\u6a19\u3092\u8d85\u3048\u308b\u306a\u3089\u505c\u6b62\u3059\u308b\n            bStop = (y >= targetY - SPEED * FlxG.elapsed);\n        }\n\n        if(bStop) {\n            // \u505c\u6b62\u3059\u308b\n            velocity.y = 0;\n            y = targetY;\n        }\n\n        super.update();\n    }\n}\n\n\n\u79fb\u52d5\u5148\u306e\u6c7a\u5b9a\u306bPlayState\u306erandomPaddleY()\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u672a\u5b9f\u88c5\u306a\u306e\u3067\u5f8c\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u307e\u305fupdate()\u95a2\u6570\u306e\u505c\u6b62\u30c1\u30a7\u30c3\u30af\u3067\u3059\u304c\u3001\u6b21\u306e\u66f4\u65b0\uff08\u79fb\u52d5\uff09\u3067\u76ee\u6a19\u5ea7\u6a19\u3092\u8d85\u3048\u3066\u3057\u307e\u3046\u5834\u5408\u306f\u505c\u6b62\u3059\u308b\u3001\u3068\u3044\u3046\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30d1\u30c9\u30eb\u306e\u914d\u7f6e\u3068\u79fb\u52d5\u5148\u3092\u6c42\u3081\u308b\u95a2\u6570\u3092\u5b9f\u88c5\u3059\u308b (PlayState.hx)\n\u30d1\u30c9\u30eb\u306e\u914d\u7f6e\u3068randomPaddleY()\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f\u30d1\u30c9\u30eb\u306e\u751f\u6210\u3067\u3059\u3002\u30d5\u30a3\u30fc\u30eb\u30c9\u306b_paddleLeft\u3068_paddleRight\u3092\u8ffd\u52a0\u3057\u751f\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n\nPlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n    private var _feathers:FlxEmitter; // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\n    private var _paddleLeft:Paddle; // \u30d0\u30c9\u30eb\u30fb\u5de6\n    private var _paddleRight:Paddle; // \u30d1\u30c9\u30eb\u30fb\u53f3\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n        // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u751f\u6210\n        _feathers = new FlxEmitter();\n        _feathers.makeParticles(\"assets/images/feather.png\", 50, 32);\n        _feathers.setXSpeed(-10, 10);\n        _feathers.setYSpeed(-10, 10);\n        _feathers.gravity = 10;\n        add(_feathers);\n\n        // \u30d1\u30c9\u30eb\u30fb\u5de6\u30fb\u751f\u6210\n        _paddleLeft = new Paddle(6, FlxObject.RIGHT);\n        add(_paddleLeft);\n\n        // \u30d1\u30c9\u30eb\u30fb\u53f3\u30fb\u751f\u6210\n        _paddleRight = new Paddle(FlxG.width-15, FlxObject.LEFT);\n        add(_paddleRight);\n\n    }\n\n\n\u30d1\u30c9\u30eb\u306e\u79fb\u52d5\u5148\u3092\u6c7a\u5b9a\u3059\u308b\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nPlayState.hx\n    /**\n     * \u30d1\u30c9\u30eb\u306e\u79fb\u52d5\u5148\u3092\u6c7a\u5b9a\u3057\u307e\u3059\n     * @return \u79fb\u52d5\u5148Y\u5ea7\u6a19\n     **/\n    public function randomPaddleY():Int {\n        var a:Int = Std.int(_bounceLeft.y); // \u4e0a\n        var b:Int = Std.int(_bounceLeft.y + _bounceLeft.height - _paddleLeft.height); // \u4e0b\n\n        return FlxRandom.intRanged(a, b);\n    }\n\n\n\u30d1\u30c9\u30eb\u306b\u5f53\u305f\u3063\u305f\u3089\u6b7b\u306c\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nPlayState.hx\n    /**\n     * \u30d7\u30ec\u30a4\u30e4\u30fc\u3068\u91dd\u3068\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\n     * @return \u5f53\u305f\u3063\u3066\u3044\u305f\u3089true\n     **/\n    private function _isHit():Bool {\n        if(FlxG.pixelPerfectOverlap(_player, _spikeBottom)) { return true; } // \u91dd\u5e8a\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _spikeTop)) { return true; } // \u91dd\u5929\u4e95\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _paddleLeft)) { return true; } // \u5de6\u306e\u30d1\u30c9\u30eb\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _paddleRight)) { return true; } // \u53f3\u306e\u30d1\u30c9\u30eb\u306b\u885d\u7a81\n\n        return false; // \u4f55\u3082\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\n    }\n\n\n\u30d1\u30c9\u30eb\u3068\u306e\u885d\u7a81\u5224\u5b9a\u3092\u5897\u3084\u3057\u3066\u3044\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u58c1\u306b\u3042\u305f\u3063\u305f\u6642\u306b\u58c1\u304c\u30e9\u30f3\u30c0\u30e0\u3067\u79fb\u52d5\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nPlayState.hx\n    override public function update():Void {\n\n        if(_isHit()) {\n            // \u30d7\u30ec\u30a4\u30e4\u30fc\u6b7b\u4ea1\n            _player.kill();\n        }\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            _player.x = 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u3082\u3068\u306b\u623b\u3059\n            _player.flipX = false;\n            // \u5de6\u58c1\u5149\u308b\n            _bounceLeft.animation.play(\"flash\");\n            // \u53f3\u306e\u30d1\u30c9\u30eb\u30e9\u30f3\u30c0\u30e0\u79fb\u52d5\n            _paddleRight.randomize();\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            _player.x = FlxG.width - _player.width - 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u53cd\u8ee2\n            _player.flipX = true;\n            // \u53f3\u58c1\u5149\u308b\n            _bounceRight.animation.play(\"flash\");\n            // \u5de6\u306e\u30d1\u30c9\u30eb\u30e9\u30f3\u30c0\u30e0\u79fb\u52d5\n            _paddleLeft.randomize();\n        }\n\n\n\n\u5f53\u305f\u3063\u305f\u58c1\u3068\u53cd\u5bfe\u5074\u306b\u3042\u308b\u30d1\u30c9\u30eb\u304c\u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u5b9f\u884c\u3059\u308b\u3068\u30d1\u30c9\u30eb\u304c\u51fa\u73fe\u3057\u52d5\u304f\u3088\u3046\u306b\u306a\u3063\u3066\u3001\u885d\u7a81\u5224\u5b9a\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\n\n\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u30fb\u30ea\u30c8\u30e9\u30a4\u3092\u5b9f\u88c5\u3059\u308b (Player.hx)\n\u4f55\u56de\u3082\u30d7\u30ec\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\nPlayer\u30af\u30e9\u30b9\u306ekill()\u51e6\u7406\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nPlayer.hx\n    /**\n     * \u6b7b\u4ea1\u51e6\u7406\n     **/\n    override public function kill():Void {\n        if(exists == false) {\n            // \u3059\u3067\u306b\u6b7b\u3093\u3067\u3044\u308b\u306a\u3089\u4f55\u3082\u3057\u306a\u3044\n            return;\n        }\n\n        // PlayState\u3092\u53d6\u5f97\n        var state:PlayState = cast(FlxG.state, PlayState);\n        state.launchFeathers(x, y, 10);\n\n        super.kill();\n\n        // \u753b\u9762\u5168\u4f53\u3092\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u3059\u308b\n        FlxG.camera.flash(0xffFFFFFF, 1, onFlashDone);\n        // \u753b\u9762\u3092\u63fa\u3089\u3059\n        FlxG.camera.shake(0.02, 0.35);\n    }\n\n\n\n\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u306bonFlashDone\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u6642\u306b\u3001onFlashDone\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\u3068\u306a\u308a\u307e\u3059\u3002\n\u3067\u306f\u3001\u3053\u306e\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nPlayer.hx\n    /**\n     * \u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u95a2\u6570\n     **/\n    public function onFlashDone():Void {\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u5fa9\u6d3b\u3055\u305b\u308b\n        revive();\n\n        // State\u30ea\u30bb\u30c3\u30c8\n        cast(FlxG.state, PlayState).reset();\n    }\n\n    /**\n     * \u5fa9\u6d3b\u51e6\u7406\n     **/\n    override public function revive():Void {\n\n        // \u753b\u9762\u4e2d\u5fc3\u306b\u623b\u3059\n        x = FlxG.width * 0.5 - 4;\n        y = FlxG.height * 0.5 - 4;\n\n        // \u52d5\u304d\u3092\u6b62\u3081\u308b\n        acceleration.x = 0;\n        acceleration.y = 0;\n        velocity.x = 0;\n        velocity.y = 0;\n\n        super.revive();\n    }\n}\n\n\n\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u5f8c\u3001\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u521d\u671f\u72b6\u614b\u306b\u623b\u3059\u305f\u3081\u306b revive()\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001PlayState\u306ereset()\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u672a\u5b9f\u88c5\u306a\u306e\u3067\u5b9f\u88c5\u304c\u5fc5\u8981\u3067\u3059\u3002\nPlayState\u306ereset()\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nPlayState.hx\n\n    /**\n     * \u30ea\u30bb\u30c3\u30c8\u51e6\u7406\n     **/\n    public function reset():Void {\n\n        // \u30d1\u30c9\u30eb\u3092\u521d\u671f\u4f4d\u7f6e\u306b\u623b\u3059\n        _paddleLeft.y = 0 - _paddleLeft.height;\n        _paddleRight.y = 0 - _paddleRight.height;\n\n    }\n\n\n\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u30d1\u30c9\u30eb\u3092\u521d\u671f\u4f4d\u7f6e\u306b\u623b\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\u5b9f\u884c\u3059\u308b\u3068\u3001\u6b7b\u4ea1\u5f8c\u3001\u521d\u671f\u72b6\u614b\u306b\u623b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30b9\u30b3\u30a2\u30fb\u30bb\u30fc\u30d6\u306e\u5b9f\u88c5\n\n\u5909\u6570\u5b9a\u7fa9 (Reg.hx)\n\u6700\u5f8c\u306b\u30b9\u30b3\u30a2\u30fb\u30bb\u30fc\u30d6\u306e\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002\nState\u3092\u307e\u305f\u304c\u308b\u306e\u3067\u3001\u5fc5\u8981\u306a\u5909\u6570\u306fReg.hx\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\nReg.hx\nclass Reg\n{\n    // \u58c1\u3092\u5149\u3089\u305b\u308b\u69d8\u306e\u753b\u50cf\u30c7\u30fc\u30bf\n    static private var _bitmapData:BitmapData;\n\n    // \u73fe\u5728\u306e\u30b9\u30b3\u30a2\n    static public var score:Int = 0;\n\n    // \u30cf\u30a4\u30b9\u30b3\u30a2\n    static public var highScore:Int = 0;\n\n    // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\n    static public var save:FlxSave;\n\n\n\u30b9\u30b3\u30a2score\u3001\u30cf\u30a4\u30b9\u30b3\u30a2highscore\u3001\u30bb\u30fc\u30d6\u30c7\u30fc\u30bfsave\u306e3\u3064\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\u30b9\u30b3\u30a2\u30bb\u30fc\u30d6\u547c\u3073\u51fa\u3057 (Player.hx)\n\u6b21\u306bPlayer\u30af\u30e9\u30b9\u3067\u30b9\u30b3\u30a2\u30bb\u30fc\u30d6\u306e\u547c\u3073\u51fa\u3057\u3092\u884c\u3044\u307e\u3059\u3002\n\nPlayer.hx\n    /**\n     * \u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u95a2\u6570\n     **/\n    public function onFlashDone():Void {\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u5fa9\u6d3b\u3055\u305b\u308b\n        revive();\n\n        // \u30bb\u30fc\u30d6\u3092\u547c\u3073\u51fa\u3059\n        PlayState.saveScore();\n\n        // State\u30ea\u30bb\u30c3\u30c8\n        cast(FlxG.state, PlayState).reset();\n    }\n\n\n\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u30bb\u30fc\u30d6\u3057\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306f\u672a\u5b9f\u88c5\u306a\u306e\u3067\u3001PlayState\u30af\u30e9\u30b9\u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u30b9\u30b3\u30a2\u51e6\u7406\u30fb\u30bb\u30fc\u30d6\u51e6\u7406\u306e\u5b9f\u88c5 (PlayState.hx)\n\u305d\u3082\u305d\u3082\u30b9\u30b3\u30a2\u3092\u8868\u793a\u3059\u308b\u4ed5\u7d44\u307f\u304c\u306a\u3044\u306e\u3067\u3001\u30b9\u30b3\u30a2\u8868\u793a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\nPlayState\u306b\u30d5\u30a3\u30fc\u30eb\u30c9_scoreDisplay\u3068_highScore\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30ad\u30b9\u30c8\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\u305d\u308c\u3068\u3001\u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u540dSAVE_DATA\u306e\u5b9a\u7fa9\u3082\u3057\u307e\u3059\u3002\n\nPlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n    private var _feathers:FlxEmitter; // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\n    private var _paddleLeft:Paddle; // \u30d0\u30c9\u30eb\u30fb\u5de6\n    private var _paddleRight:Paddle; // \u30d1\u30c9\u30eb\u30fb\u53f3\n    private var _scoreDisplay:FlxText; // \u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\n    private var _highScore:FlxText; // \u30cf\u30a4\u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\n\n    static inline private var SAVE_DATA:String = \"FLAPPYBALT\"; // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u540d\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n        // \u30d1\u30c9\u30eb\u30fb\u53f3\u30fb\u751f\u6210\n        _paddleRight = new Paddle(FlxG.width-15, FlxObject.LEFT);\n        add(_paddleRight);\n\n        // \u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\u3092\u751f\u6210\n        _scoreDisplay = new FlxText(0, 180, FlxG.width);\n        _scoreDisplay.alignment = \"center\";\n        _scoreDisplay.color = 0xff898996;\n        _scoreDisplay.size = 24;\n        add(_scoreDisplay);\n\n        // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u304b\u3089\u30cf\u30a4\u30b9\u30b3\u30a2\u3092\u30ed\u30fc\u30c9\u3059\u308b\n        Reg.highScore = loadScore();\n\n        // \u30cf\u30a4\u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\u3092\u751f\u6210\n        _highScore = new FlxText(0, 40, FlxG.width, \"\");\n        _highScore.alignment = \"center\";\n        _highScore.color = 0xff868696;\n        add(_highScore);\n\n        // \u30cf\u30a4\u30b9\u30b3\u30a2\u30c7\u30fc\u30bf\u304c\u3042\u308c\u3070\u305d\u308c\u3092\u30c6\u30ad\u30b9\u30c8\u306b\u8a2d\u5b9a\n        if(Reg.highScore > 0) {\n            _highScore.text = Std.string(Reg.highScore);\n        }\n    }\n\n\n\n\u30cf\u30a4\u30b9\u30b3\u30a2\u306e\u30ed\u30fc\u30c9\u95a2\u6570loadScore()\u304c\u672a\u5b9f\u88c5\u306a\u306e\u3067\u3053\u308c\u3082\u5b9f\u88c5\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\u307e\u305a\u306f\u30bb\u30fc\u30d6\u95a2\u6570\u3067\u3059\u3002\n\nPlayState.hx\n    /**\n     * \u30bb\u30fc\u30d6\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\n     **/\n    static public function saveScore():Void {\n        Reg.save = new FlxSave();\n        if(Reg.save.bind(SAVE_DATA)) {\n            if((Reg.save.data.score == null) || (Reg.save.data.score < Reg.score)) {\n\n                // \u672a\u30bb\u30fc\u30d6\u307e\u305f\u306f\u30cf\u30a4\u30b9\u30b3\u30a2\u66f4\u65b0\u3067\u3042\u308c\u3070\u4fdd\u5b58\n                Reg.save.data.score = Reg.score;\n            }\n        }\n\n        // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u66f8\u304d\u8fbc\u307f\n        Reg.save.flush();\n    }\n\n\n\u30bb\u30fc\u30d6\u3092\u3059\u308b\u305f\u3073\u306bFlxSave\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u540d\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u3001data\u306b\u4ee3\u5165\u3057\u3066\u3001flush\u3067\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3044\u307e\u3059\u3002\n\u7d9a\u3044\u3066\u30ed\u30fc\u30c9\u95a2\u6570\u306e\u5b9f\u88c5\u3067\u3059\u3002\n\nPlayState.hx\n    /**\n     * \u30ed\u30fc\u30c9\u51e6\u7406\u3092\u884c\u3046\n     **/\n    static public function loadScore():Int {\n        Reg.save = new FlxSave();\n\n        if(Reg.save.bind(SAVE_DATA)) {\n            if((Reg.save.data != null) && (Reg.save.data.score != null)) {\n\n                // \u7121\u52b9\u306a\u30c7\u30fc\u30bf\u3067\u306a\u3051\u308c\u3070\u30b9\u30b3\u30a2\u3092\u8fd4\u3059\n                return Reg.save.data.score;\n\n            }\n        }\n\n        // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\n        return 0;\n    }\n\n\n\u3053\u308c\u3067\u30bb\u30fc\u30d6\u30fb\u30ed\u30fc\u30c9\u306f\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u30b9\u30b3\u30a2\u8a08\u7b97\u306e\u51e6\u7406\u304c\u307e\u3060\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002update()\u306b\u30b9\u30b3\u30a2\u52a0\u7b97\u3068\u30c6\u30ad\u30b9\u30c8\u66f4\u65b0\u51e6\u7406\u3092\u5165\u308c\u307e\u3059\u3002\n\nPlayState.hx\n    override public function update():Void {\n\n        if(_isHit()) {\n            // \u30d7\u30ec\u30a4\u30e4\u30fc\u6b7b\u4ea1\n            _player.kill();\n        }\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            // ... (\u7701\u7565)\n\n            // \u30b9\u30b3\u30a2\u8a08\u7b97\n            Reg.score++;\n            _scoreDisplay.text = Std.string(Reg.score);\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            // ... (\u7701\u7565)\n\n            // \u30b9\u30b3\u30a2\u8a08\u7b97\n            Reg.score++;\n            _scoreDisplay.text = Std.string(Reg.score);\n        }\n\n\n\u6700\u5f8c\u306breset()\u95a2\u6570\u306b\u30b9\u30b3\u30a2\u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u5165\u308c\u307e\u3059\u3002\n\nPlayState.hx\n    /**\n     * \u30ea\u30bb\u30c3\u30c8\u51e6\u7406\n     **/\n    public function reset():Void {\n\n        // \u30d1\u30c9\u30eb\u3092\u521d\u671f\u4f4d\u7f6e\u306b\u623b\u3059\n        _paddleLeft.y = 0 - _paddleLeft.height;\n        _paddleRight.y = 0 - _paddleRight.height;\n\n        // \u30b9\u30b3\u30a2\u521d\u671f\u5316\n        Reg.score = 0;\n        _scoreDisplay.text = \"\";\n        Reg.highScore = loadScore();\n\n        if(Reg.highScore > 0) {\n            _highScore.text = Std.string(Reg.highScore);\n        }\n\n    }\n\n\n\u3088\u3046\u3084\u304f\u3053\u308c\u3067\u5b8c\u6210\u3067\u3059\uff01\n\n\u30b9\u30b3\u30a2\u30fb\u30cf\u30a4\u30b9\u30b3\u30a2\u304c\u8868\u793a\u3055\u308c\u3001\u6b63\u3057\u304f\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fFlappy\u7cfb\u30b2\u30fc\u30e0\u300cFlappybalt\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u516c\u5f0f\u306e\u30c7\u30e2\u306f\u3053\u3061\u3089\u3067\u3059\u3002\nhttp://haxeflixel.com/demos/Flappybalt/\n![001.png](https://qiita-image-store.s3.amazonaws.com/0/43772/f6fe4288-b14b-78de-4531-4981fc3b5276.png)\n\u898b\u305f\u76ee\u306f\u30b9\u30bf\u30a4\u30ea\u30c3\u30b7\u30e5\u306a\u96f0\u56f2\u6c17\u3067\u3059\u304c\u3001\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u3068\u3066\u3082\u30b7\u30d3\u30a2\u306a\u6fc0\u30e0\u30ba\u30b2\u30fc\u30e0\u3067\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u3067\u3059\u3002\nhttps://github.com/HaxeFlixel/flixel-demos/tree/master/Other/Flappybalt/source\n\n\u307e\u305f\u753b\u50cf\u30ea\u30bd\u30fc\u30b9\u304c\u3044\u304f\u3064\u304b\u5fc5\u8981\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nhttps://github.com/HaxeFlixel/flixel-demos/tree/master/Other/Flappybalt/assets\n\n* bg.png\n* dove.png\n* feather.png\n* icon.png\n* icon.svg\n* paddle.png\n* screenshot.png\n* spike.png\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u305f\u3089\u3001`assets/images`\u30d5\u30a9\u30eb\u30c0\u306b\u307e\u3068\u3081\u3066\u683c\u7d0d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n## \u8d77\u52d5\u8a2d\u5b9a (Main.hx)\n\n\u3044\u3064\u3082\u306e\u3088\u3046\u306b\u8d77\u52d5\u8a2d\u5b9a\u3092Main.hx\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```hx:Main.hx\nclass Main extends Sprite \n{\n\tvar gameWidth:Int = 160;\n\tvar gameHeight:Int = 240;\n\tvar initialState:Class<FlxState> = PlayState;\n\tvar zoom:Float = -1;\n\tvar framerate:Int = 60;\n\tvar skipSplash:Bool = true;\n\tvar startFullscreen:Bool = false;\n```\n\n\u4eca\u56de\u306f\u89e3\u50cf\u5ea6\u304c`160x240`\u3068\u306a\u308a\u307e\u3059\u3002`skipSplash`\u3092true\u306b\u3059\u308b\u3053\u3068\u3067\u30b9\u30d7\u30e9\u30c3\u30b7\u30e5\u8868\u793a\u304c\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u308b\u306e\u3067\u3001\u30c8\u30e9\u30a4\uff06\u30a8\u30e9\u30fc\u304c\u7d20\u65e9\u304f\u3067\u304d\u308b\u3088\u3046\u306b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3042\u3068\u4eca\u56de\u306f\u7e26\u9577\u306a\u306e\u3067\u3001Project.xml\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u753b\u9762\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```xml:Project.xml\n<!--These window settings apply to all targets-->\n<window width=\"480\" height=\"720\" fps=\"60\" background=\"#000000\" hardware=\"true\" vsync=\"true\" />\n```\n\n640x480\u304b\u3089\u3001480x720\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n## \u80cc\u666f\u306e\u8868\u793a (PlayState.hx)\n\u307e\u305a\u306f\u80cc\u666f\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u3093\u3067\u8868\u793a\u3057\u307e\u3059\u3002create()\u95a2\u6570\u306b\u8aad\u307f\u8fbc\u307f\u30fb\u8868\u793a\u51e6\u7406\u3092\u5165\u308c\u307e\u3059\u3002\n\n```hx:PlayState.hx\nclass PlayState extends FlxState {\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        add(new FlxSprite(0, 0, \"assets/images/bg.png\"));\n    }\n```\n\n\u5b9f\u884c\u3059\u308b\u3068\u80cc\u666f\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n![002.png](https://qiita-image-store.s3.amazonaws.com/0/43772/10edae2f-6a5c-dc87-c36f-0740ad7e58f3.png)\n\n## \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u52d5\u304b\u3059\n### \u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u5b9f\u88c5 (Player.hx)\n\u65b0\u898f\u306b\u30af\u30e9\u30b9(Player)\u3092\u4f5c\u6210\u3057\u3066\u3001\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u307e\u305a\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u3059\u3002\n\n```hx:Player.hx\n/**\n * \u30d7\u30ec\u30a4\u30e4\u30fc\u30af\u30e9\u30b9\n **/\nclass Player extends FlxSprite {\n\n    /**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n     */\n    public function new() {\n\n        // \u753b\u9762\u4e2d\u5fc3\u306b\u751f\u6210\n        super(FlxG.width * 0.5 - 4, FlxG.height * 0.5 - 4);\n\n        // \u753b\u50cf\u8aad\u307f\u8fbc\u307f (\u30a2\u30cb\u30e1\u4ed8\u304d)\n        loadGraphic(\"assets/images/dove.png\", true);\n\n        // \u30a2\u30cb\u30e1\u756a\u53f72\u3067\u59cb\u3081\u308b\n        animation.frameIndex = 2;\n\n        // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\n        // 1 -> 0 -> 1 -> 2 \u306e\u9806\u756a\n        // 12\u30d5\u30ec\u30fc\u30e0\u3067\u66f4\u65b0\n        // \u30eb\u30fc\u30d7\u306a\u3057\n        animation.add(\"flap\", [1, 0, 1, 2], 12, false);\n    }\n```\n\n\u753b\u9762\u4e2d\u5fc3\u306b\u914d\u7f6e\u3057\u3001\u753b\u50cf\u3092\u30a2\u30cb\u30e1\u3064\u304d\u3067\u8aad\u307f\u8fbc\u307f\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u3060\u3051\u30a2\u30cb\u30e1\u3059\u308b\u306e\u3067\u30eb\u30fc\u30d7\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u306a\u304a\u30a2\u30cb\u30e1\u756a\u53f7\u306f2\u306e\u7fbd\u3092\u5e83\u3052\u305f\u72b6\u614b\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n![002.png](https://qiita-image-store.s3.amazonaws.com/0/43772/cf32ce77-0cf9-cc2a-b816-57e978ff387e.png)\n\n\u7d9a\u3044\u3066\u66f4\u65b0\u95a2\u6570\u3067\u3059\u3002SPACE\u3092\u62bc\u3059\u3068\u30b8\u30e3\u30f3\u30d7\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```hx:Player.hx\n    /**\n     * \u66f4\u65b0\n     */\n    override public function update():Void {\n    \n        if(FlxG.keys.justPressed.SPACE) {\n            if(acceleration.y == 0) {\n                // \u52d5\u3044\u3066\u3044\u306a\u3051\u308c\u3070\u52d5\u304d\u59cb\u3081\u308b\n                acceleration.y = 500; // \u91cd\u529b\u8a2d\u5b9a\n                velocity.x = 80; // \u53f3\u306b\u52d5\u304d\u59cb\u3081\u308b\n            }\n            velocity.y = -240; // \u30b8\u30e3\u30f3\u30d7\u3059\u308b\n            \n            // \u30a2\u30cb\u30e1\u3092\u6700\u521d\u304b\u3089\u518d\u751f\n            animation.play(\"flap\", true);\n        }\n        \n        super.update();\n    } \n```\n\n### \u30d7\u30ec\u30a4\u30e4\u30fc\u3092State\u306b\u914d\u7f6e (PlayState.hx)\nPlayState.hx\u3092\u7de8\u96c6\u3057\u3066\u3001\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30d5\u30a3\u30fc\u30eb\u30c9`_player`\u3092\u8ffd\u52a0\u3057\u3066\u3001create()\u3067new\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        add(new FlxSprite(0, 0, \"assets/images/bg.png\"));\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u751f\u6210\n        _player = new Player();\n        add(_player);\n    }\n```\n\n\u66f4\u65b0\u95a2\u6570update()\u306b\u753b\u9762\u7aef\u3067\u8df3\u306d\u8fd4\u308b\u5224\u5b9a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    override public function update():Void {\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            _player.x = 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u3082\u3068\u306b\u623b\u3059\n            _player.flipX = false;\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            _player.x = FlxG.width - _player.width - 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u53cd\u8ee2\n            _player.flipX = true;\n        }\n\n        super.update();\n    }\n```\n\n`flipX`\u306btrue\u3092\u6307\u5b9a\u3059\u308b\u3068\u753b\u50cf\u3092\u53cd\u8ee2\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001SPACE\u30ad\u30fc\u3067\u30b8\u30e3\u30f3\u30d7\u3057\u3066\u753b\u9762\u7aef\u3067\u8df3\u306d\u8fd4\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n![002.png](https://qiita-image-store.s3.amazonaws.com/0/43772/eb92f8ff-6b53-6398-1061-1a8784979461.png)\n\n## \u8df3\u306d\u8fd4\u308b\u58c1\u3092\u4f5c\u308b (Reg.hx)\n\u3053\u306e\u307e\u307e\u3060\u3068\u306a\u305c\u753b\u9762\u7aef\u3067\u6298\u308a\u8fd4\u3059\u306e\u304b\u304c\u5206\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u753b\u9762\u7aef\u306b\u8df3\u306d\u8fd4\u308a\u7528\u306e\u58c1\u3092\u7f6e\u3044\u3066\u3001\u8df3\u306d\u8fd4\u3063\u305f\u6642\u306b\u5149\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u58c1\u753b\u50cf\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u4e0a\u3067\u4f5c\u6210\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u306a\u304aReg.hx\u306fState\u3092\u307e\u305f\u304c\u308b\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u30af\u30e9\u30b9\u3068\u3057\u3066\u4f7f\u3046\u3088\u3046\u3067\u3059\u3002\n\n```hx:Reg.hx\nclass Reg\n{\n    // \u58c1\u306e\u753b\u50cf\u30c7\u30fc\u30bf\n    static private var _bitmapData:BitmapData;\n\n    /**\n     * \u8df3\u306d\u8fd4\u308a\u58c1\u306e\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n     **/\n    static public function getBounceImage(height:Int):BitmapData {\n        if(_bitmapData != null) {\n            // \u751f\u6210\u6e08\u307f\u3067\u3042\u308c\u3070\u305d\u306e\u307e\u307e\u8fd4\u3059\n            return _bitmapData;\n        }\n\n        // \u8272\u5b9a\u7fa9\n        var WHITE:Int = 0xffFFFFFF;\n        var GREY_LIGHT:Int = 0xffB0B0BF;\n        var GREY_MED:Int = 0xff646A7D;\n        var GREY_DARK:Int = 0xff35353D;\n\n        // \u30d3\u30c3\u30c8\u30de\u30c3\u30d7\u751f\u6210\n        _bitmapData = new BitmapData(8, height, false, GREY_MED);\n\n        var rect:Rectangle = new Rectangle(4, 0, 4, height);\n        _bitmapData.fillRect(rect, GREY_LIGHT);\n        rect.setTo(0, 1, 1, height - 2);\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.x = 3;\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.setTo(1, 0, 2, 1);\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.y = height - 1;\n        _bitmapData.fillRect(rect, GREY_DARK);\n        rect.setTo(4, 1, 1, height - 2);\n        _bitmapData.fillRect(rect, WHITE);\n        rect.x = 7;\n        _bitmapData.fillRect(rect, WHITE);\n        rect.setTo(5, 0, 2, 1);\n        _bitmapData.fillRect(rect, WHITE);\n        rect.y = height - 1;\n        _bitmapData.fillRect(rect, WHITE);\n\n        return _bitmapData;\n    }\n\n```\n\n\u77e9\u5f62\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u4f5c\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u8907\u96d1\u3067\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3053\u3053\u306f\u30b3\u30d4\u30da\u3067\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u305f\u3060\u7406\u89e3\u3057\u3066\u304a\u304f\u3079\u304d\u3053\u3068\u306f\u3001\u5de6\u534a\u5206\u306f\u767d\u3044\u58c1\u3067\u53f3\u534a\u5206\u306f\u9ed2\u3063\u307d\u3044\u58c1\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u901a\u5e38\u306f\u9ed2\u3044\u58c1\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u58c1\u3067\u8df3\u306d\u8fd4\u308b\u6642\u306b\u4e00\u77ac\u767d\u3044\u58c1\u306b\u306a\u308b\u3001\u3068\u3044\u3046\u4f7f\u3044\u65b9\u3092\u3057\u307e\u3059\u3002\n\n## \u58c1\u3092\u914d\u7f6e\u3057\u3066\u5149\u3089\u305b\u308b (PlayState.hx)\n\u3067\u306f\u3053\u306e\u58c1\u3092\u914d\u7f6e\u3057\u3066\u307f\u307e\u3059\u3002PlayState.hx\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b`_bounceLeft`\u3068`_boundRight`\u3092\u8ffd\u52a0\u3057\u3001create()\u95a2\u6570\u3067\u751f\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n\n```hx:PlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        add(new FlxSprite(0, 0, \"assets/images/bg.png\"));\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u751f\u6210\n        _player = new Player();\n        add(_player);\n\n        // \u8df3\u306d\u8fd4\u308a\u58c1\uff08\u5de6\uff09\u306e\u751f\u6210\n        _bounceLeft = new FlxSprite(1, 17);\n        // 1\u30d1\u30bf\u30fc\u30f3\u3042\u305f\u308a4x(height-34)\u306e\u30a2\u30cb\u30e1\u3092\u751f\u6210\u3059\u308b\n        _bounceLeft.loadGraphic(Reg.getBounceImage(FlxG.height - 34), true, 4, FlxG.height - 34);\n        _bounceLeft.animation.add(\"flash\", [1, 0], 8, false);\n        add(_bounceLeft);\n\n        // \u8df3\u306d\u8fd4\u308a\u58c1\uff08\u53f3\uff09\u306e\u751f\u6210\n        _bounceRight = new FlxSprite(FlxG.width - 5, 17);\n        _bounceRight.loadGraphic(Reg.getBounceImage(FlxG.height - 34), true, 4, FlxG.height - 34);\n        _bounceRight.animation.add(\"flash\", [1, 0], 8, false);\n        add(_bounceRight);\n    }\n\n```\n\n\u5148\u307b\u3069Reg\u30af\u30e9\u30b9\u3067\u4f5c\u6210\u3057\u305f\u753b\u50cf\u3092\u4f7f\u7528\u3057\u3066\u3001\u58c1\u753b\u50cf\u3092\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001\u58c1\u306b\u3042\u305f\u3063\u305f\u6642\u306b\"flash\"\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u751f\u3055\u305b\u3066\u307f\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    override public function update():Void {\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            _player.x = 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u3082\u3068\u306b\u623b\u3059\n            _player.flipX = false;\n            // \u5de6\u58c1\u5149\u308b\n            _bounceLeft.animation.play(\"flash\");\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            _player.x = FlxG.width - _player.width - 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u53cd\u8ee2\n            _player.flipX = true;\n            // \u53f3\u58c1\u5149\u308b\n            _bounceRight.animation.play(\"flash\");\n        }\n\n        super.update();\n    }\n```\n\n\u753b\u9762\u7aef\u5224\u5b9a\u306e\u6700\u5f8c\u3067\u3001\u5149\u308b\u30a2\u30cb\u30e1\u306e\u518d\u751f\u95a2\u6570\u3092\u547c\u3076\u3060\u3051\u3067\u3059\u3002\n\u3053\u308c\u3067\u753b\u9762\u7aef\u3067\u5149\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n![005.png](https://qiita-image-store.s3.amazonaws.com/0/43772/1aba93ba-464e-764c-b62c-7bb7c8edd9d5.png)\n\u3069\u3046\u3067\u3082\u3044\u3044\u3053\u3068\u3067\u3059\u304c\u3001\u58c1\u304c\u5149\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u53d6\u308b\u306e\u306f\u30b7\u30d3\u30a2\u3067\u96e3\u3057\u304b\u3063\u305f\u3067\u3059\u3002\n\n## \u5e8a\u3068\u5929\u4e95\u306b\u91dd\u58c1\u3092\u914d\u7f6e\u3059\u308b (PlayState.hx)\n\u5e8a\u3068\u5929\u4e95\u306b\u91dd\u306e\u58c1\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002PlayState\u30af\u30e9\u30b9\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b`_spikeBottom`\u3068`_spikeTop`\u3092\u8ffd\u52a0\u3057,\n\n\n```hx:PlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n        // \u8df3\u306d\u8fd4\u308a\u58c1\uff08\u53f3\uff09\u306e\u751f\u6210\n        _bounceRight = new FlxSprite(FlxG.width - 5, 17);\n        _bounceRight.loadGraphic(Reg.getBounceImage(FlxG.height - 34), true, 4, FlxG.height - 34);\n        _bounceRight.animation.add(\"flash\", [1, 0], 8, false);\n        add(_bounceRight);\n\n        // \u91dd\u306e\u5e8a\u3092\u751f\u6210\n        _spikeBottom = new FlxSprite(0, 0, \"assets/images/spike.png\");\n        _spikeBottom.y = FlxG.height - _spikeBottom.height;\n        add(_spikeBottom);\n\n        // \u91dd\u306e\u5929\u4e95\u3092\u751f\u6210\n        _spikeTop = new FlxSprite(0, 0);\n        _spikeTop.loadRotatedGraphic(\"assets/images/spike.png\", 4);\n        _spikeTop.angle = 180;\n        _spikeTop.y = -72;\n        add(_spikeTop);\n    }\n```\n\n\u91dd\u5929\u4e95\u3067\u3059\u304c\u3001\u91dd\u753b\u50cf\u3092loadRotatedGraphic()\u3067\u30ed\u30fc\u30c9\u30574\u30d1\u30bf\u30fc\u30f3\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30010\u5ea6\u30fb90\u5ea6\u30fb180\u5ea6\u30fb270\u5ea6\u306b\u56de\u8ee2\u3057\u305f\u753b\u50cf\u3092\u4fdd\u6301\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059(\u7b2c\u4e8c\u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u6570\u5024\u3067\u30d1\u30bf\u30fc\u30f3\u6570\u304c\u6c7a\u307e\u308a\u307e\u3059)\u3002\u305d\u308c\u306b\u3088\u308a\u3001\u89d2\u5ea6\u3092180\u5ea6\u56de\u8ee2\u3055\u305b\u3066\u63cf\u753b\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u306a\u304a\u3001loadRotateGraphic\u306e\u8a73\u7d30\u306f\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\u304c\u53c2\u8003\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n* Flixel Demo \u2013 Creating animated and rotated sprites from an un-rotated animated images\n    * http://gameonaut.com/wordpress/2011/11/flixel-demo-creating-animated-and-rotated-sprites-from-an-un-rotated-animated-images/\n\n\u3064\u3044\u3067\u306b\u5f53\u305f\u308a\u5224\u5b9a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    /**\n     * \u30d7\u30ec\u30a4\u30e4\u30fc\u3068\u91dd\u3068\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\n     * @return \u5f53\u305f\u3063\u3066\u3044\u305f\u3089true\n     **/\n    private function _isHit():Bool {\n        if(FlxG.pixelPerfectOverlap(_player, _spikeBottom)) { return true; } // \u91dd\u5e8a\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _spikeTop)) { return true; } // \u91dd\u5929\u4e95\u306b\u885d\u7a81\n\n        return false; // \u4f55\u3082\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\n    }\n\n    override public function update():Void {\n\n        if(_isHit()) {\n            // \u30d7\u30ec\u30a4\u30e4\u30fc\u6b7b\u4ea1\n            _player.kill();\n        }\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n```\n\nFlxG.pixelPerfectOverlap()\u3092\u4f7f\u7528\u3059\u308b\u3068\u30012\u3064\u306eFlxSprite\u304c\u30d4\u30af\u30bb\u30eb\u306e\u91cd\u306a\u308a\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3067\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u5b9f\u884c\u3057\u3066\u3001\u91dd\u306b\u885d\u7a81\u3059\u308b\u3068\u30d7\u30ec\u30a4\u30e4\u30fc\u304c\u6d88\u3048\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3060\u3068\u4f55\u304c\u8d77\u304d\u305f\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n## \u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\n### \u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u5b9f\u88c5 (PlayState.hx)\n\u30a8\u30d5\u30a7\u30af\u30c8\u306b\u306fFlxEmitter\u3068\u3044\u3046\u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30a8\u30df\u30c3\u30bf\u3068\u306f\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u767a\u751f\u6e90\u3092\u6307\u3059\u7528\u8a9e\u3067\u3059\u3002PlayState.hx\u306b\u30d5\u30a3\u30fc\u30eb\u30c9`_feathers`\u3092\u8ffd\u52a0\u3057\u3066\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n    private var _feathers:FlxEmitter; // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n\n        // \u91dd\u306e\u5929\u4e95\u3092\u751f\u6210\n        _spikeTop = new FlxSprite(0, 0);\n        _spikeTop.loadRotatedGraphic(\"assets/images/spike.png\", 4);\n        _spikeTop.angle = 180;\n        _spikeTop.y = -72;\n        add(_spikeTop);\n\n        // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u751f\u6210\n        _feathers = new FlxEmitter();\n        _feathers.makeParticles(\"assets/images/feather.png\", 50, 32);\n        _feathers.setXSpeed(-10, 10);\n        _feathers.setYSpeed(-10, 10);\n        _feathers.gravity = 10;\n        add(_feathers);\n    }\n```\n\n\u30a8\u30df\u30c3\u30bf\u306e\u751f\u6210\u5f8c\u3001\u79fb\u52d5\u91cf\u306e\u6700\u5927\u5024\u3084\u91cd\u529b\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u30a8\u30d5\u30a7\u30af\u30c8\u518d\u751f\u7528\u306e\u95a2\u6570\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    /**\n     * \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\u751f\u6210\n     * @param x \u30a8\u30df\u30c3\u30bf\u306eS\u5ea7\u6a19\n     * @param y \u30a8\u30df\u30c3\u30bf\u306eY\u5ea7\u6a19\n     * @param amount \u51fa\u73fe\u6570\n     **/\n    public function launchFeathers(x:Float, y:Float, amount:Int):Void {\n        _feathers.x = x;\n        _feathers.y = y;\n        // \u30a8\u30d5\u30a7\u30af\u30c8\u3092\u767a\u751f\n        // \u4e00\u6589\u306b\u767a\u751f\n        // \u30a8\u30d5\u30a7\u30af\u30c8\u306e\u751f\u5b58\u6642\u9593\n        // \u767a\u751f\u3059\u308b\u9593\u9694\n        // \u767a\u751f\u3059\u308b\u6570\n        _feathers.start(true, 2, 0, amount, 1);\n    }\n```\n\nstart()\u95a2\u6570\u3067\u3059\u304c\u3001\u7b2c\u4e00\u5f15\u6570\u306btrue\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u4e00\u6589\u306b\u767a\u751f\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u3057\u3066\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u751f\u5b58\u6642\u9593\u306f2\u79d2\u3001\u767a\u751f\u9593\u9694\u306e\u6307\u5b9a\u306f\u306a\u3057\u3001\u767a\u751f\u6570\u3092amount\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u6700\u5f8c\u306e\u5f15\u6570\u306f\u30eb\u30fc\u30d7\u56de\u6570\u3067\u3059\u30021\u306a\u306e\u30671\u56de\u767a\u751f\u3057\u3066\u7d42\u308f\u308a\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\n* ActionScript\u5165\u9580wiki - FlxEmitter.start()\u306e\u8a73\u7d30\n    * http://www40.atwiki.jp/spellbound/pages/1554.html\n\n### \u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u518d\u751f (Player.hx)\nPlayer.hx\u306b\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u518d\u751f\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002kill()\u95a2\u6570\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```hx:Player.hx\n    /**\n     * \u6b7b\u4ea1\u51e6\u7406\n     **/\n    override public function kill():Void {\n        if(exists == false) {\n            // \u3059\u3067\u306b\u6b7b\u3093\u3067\u3044\u308b\u306a\u3089\u4f55\u3082\u3057\u306a\u3044\n            return;\n        }\n\n        // PlayState\u3092\u53d6\u5f97\n        var state:PlayState = cast(FlxG.state, PlayState);\n        state.launchFeathers(x, y, 10);\n\n        super.kill();\n\n        // \u753b\u9762\u5168\u4f53\u3092\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u3059\u308b\n        FlxG.camera.flash(0xffFFFFFF, 1);\n        // \u753b\u9762\u3092\u63fa\u3089\u3059\n        FlxG.camera.shake(0.02, 0.35);\n    }\n```\n\n\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u3068\u4e00\u7dd2\u306b\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u3068\u753b\u9762\u63fa\u308c\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u6b7b\u4ea1\u30a8\u30d5\u30a7\u30af\u30c8\u306f\u5b9f\u88c5\u5b8c\u4e86\u3067\u3059\u3002\n![006.png](https://qiita-image-store.s3.amazonaws.com/0/43772/4e61a35b-f7de-6810-1d48-9df47c9bac66.png)\n\n## \u5de6\u53f3\u306e\u30d1\u30c9\u30eb\u3092\u5b9f\u88c5\u3059\u308b (Paddle.hx)\n\u5de6\u53f3\u306e\u79fb\u52d5\u3059\u308b\u30d1\u30c9\u30eb\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u65b0\u898f\u306bPaddle\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```hx:Paddile.hx\n/**\n * \u30d1\u30c9\u30eb\u30af\u30e9\u30b9\n **/\nclass Paddle extends FlxSprite {\n    \n    static public inline var SPEED:Int = 480; // \u76ee\u6a19\u306b\u9032\u3080\u79fb\u52d5\u901f\u5ea6\n    public var targetY:Int = 0; // \u76ee\u6a19\u5ea7\u6a19(Y)\n    \n    /**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n     **/\n    public function new(x:Float=0, facing:Int=0) {\n\n        super(0, 0);\n\n        // \u753b\u50cf\u8aad\u307f\u8fbc\u307f\n        loadGraphic(\"assets/images/paddle.png\", false);\n        if(facing == FlxObject.LEFT) {\n            // \u5de6\u5411\u304d\u306a\u3089\u53cd\u8ee2\u3059\u308b\n            flipX = true;\n        }\n\n        // \u79fb\u52d5\u3059\u308b\n        this.x = x;\n        y = 0-height; // \u753b\u9762\u5916\u306b\u51fa\u3059\n    }\n    \n    /**\n     * \u4f4d\u7f6e\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u3059\u308b\n     **/\n    public function randomize():Void {\n        \n        // \u30d1\u30c9\u30eb\u306e\u4f4d\u7f6e\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u8a2d\u5b9a\n        targetY = cast(FlxG.state, PlayState).randomPaddleY();\n        \n        if(targetY < y) {\n            // \u4e0a\u65b9\u5411\u3078\u79fb\u52d5\n            velocity.y = -SPEED;\n        }\n        else {\n            // \u4e0b\u65b9\u5411\u3078\u79fb\u52d5\n            velocity.y = SPEED;\n        }\n    }\n    \n    /**\n     * \u66f4\u65b0\n     **/\n    override public function update():Void {\n        \n        var bStop:Bool = false; // \u505c\u6b62\u3059\u308b\u304b\u3069\u3046\u304b\n        if(velocity.y < 0) {\n            // \u4e0a\u65b9\u5411\u3078\u79fb\u52d5\n            // \u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u3067\u76ee\u6a19\u5ea7\u6a19\u3092\u8d85\u3048\u308b\u306a\u3089\u505c\u6b62\u3059\u308b\n            bStop = (y <= targetY + SPEED * FlxG.elapsed);\n        }\n        else {\n            // \u4e0b\u65b9\u5411\u3078\u79fb\u52d5\n            // \u6b21\u306e\u30d5\u30ec\u30fc\u30e0\u3067\u76ee\u6a19\u5ea7\u6a19\u3092\u8d85\u3048\u308b\u306a\u3089\u505c\u6b62\u3059\u308b\n            bStop = (y >= targetY - SPEED * FlxG.elapsed);\n        }\n        \n        if(bStop) {\n            // \u505c\u6b62\u3059\u308b\n            velocity.y = 0;\n            y = targetY;\n        }\n        \n        super.update();\n    }\n}\n```\n\n\u79fb\u52d5\u5148\u306e\u6c7a\u5b9a\u306bPlayState\u306erandomPaddleY()\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u672a\u5b9f\u88c5\u306a\u306e\u3067\u5f8c\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u307e\u305fupdate()\u95a2\u6570\u306e\u505c\u6b62\u30c1\u30a7\u30c3\u30af\u3067\u3059\u304c\u3001\u6b21\u306e\u66f4\u65b0\uff08\u79fb\u52d5\uff09\u3067\u76ee\u6a19\u5ea7\u6a19\u3092\u8d85\u3048\u3066\u3057\u307e\u3046\u5834\u5408\u306f\u505c\u6b62\u3059\u308b\u3001\u3068\u3044\u3046\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n### \u30d1\u30c9\u30eb\u306e\u914d\u7f6e\u3068\u79fb\u52d5\u5148\u3092\u6c42\u3081\u308b\u95a2\u6570\u3092\u5b9f\u88c5\u3059\u308b (PlayState.hx)\n\n\u30d1\u30c9\u30eb\u306e\u914d\u7f6e\u3068randomPaddleY()\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f\u30d1\u30c9\u30eb\u306e\u751f\u6210\u3067\u3059\u3002\u30d5\u30a3\u30fc\u30eb\u30c9\u306b`_paddleLeft`\u3068`_paddleRight`\u3092\u8ffd\u52a0\u3057\u751f\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n\n```hx:PlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n    private var _feathers:FlxEmitter; // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\n    private var _paddleLeft:Paddle; // \u30d0\u30c9\u30eb\u30fb\u5de6\n    private var _paddleRight:Paddle; // \u30d1\u30c9\u30eb\u30fb\u53f3\n\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n        // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u751f\u6210\n        _feathers = new FlxEmitter();\n        _feathers.makeParticles(\"assets/images/feather.png\", 50, 32);\n        _feathers.setXSpeed(-10, 10);\n        _feathers.setYSpeed(-10, 10);\n        _feathers.gravity = 10;\n        add(_feathers);\n        \n        // \u30d1\u30c9\u30eb\u30fb\u5de6\u30fb\u751f\u6210\n        _paddleLeft = new Paddle(6, FlxObject.RIGHT);\n        add(_paddleLeft);\n        \n        // \u30d1\u30c9\u30eb\u30fb\u53f3\u30fb\u751f\u6210\n        _paddleRight = new Paddle(FlxG.width-15, FlxObject.LEFT);\n        add(_paddleRight);\n        \n    }\n```\n\n\u30d1\u30c9\u30eb\u306e\u79fb\u52d5\u5148\u3092\u6c7a\u5b9a\u3059\u308b\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    /**\n     * \u30d1\u30c9\u30eb\u306e\u79fb\u52d5\u5148\u3092\u6c7a\u5b9a\u3057\u307e\u3059\n     * @return \u79fb\u52d5\u5148Y\u5ea7\u6a19\n     **/\n    public function randomPaddleY():Int {\n        var a:Int = Std.int(_bounceLeft.y); // \u4e0a\n        var b:Int = Std.int(_bounceLeft.y + _bounceLeft.height - _paddleLeft.height); // \u4e0b\n\n        return FlxRandom.intRanged(a, b);\n    }\n```\n\n\u30d1\u30c9\u30eb\u306b\u5f53\u305f\u3063\u305f\u3089\u6b7b\u306c\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    /**\n     * \u30d7\u30ec\u30a4\u30e4\u30fc\u3068\u91dd\u3068\u306e\u5f53\u305f\u308a\u5224\u5b9a\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\n     * @return \u5f53\u305f\u3063\u3066\u3044\u305f\u3089true\n     **/\n    private function _isHit():Bool {\n        if(FlxG.pixelPerfectOverlap(_player, _spikeBottom)) { return true; } // \u91dd\u5e8a\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _spikeTop)) { return true; } // \u91dd\u5929\u4e95\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _paddleLeft)) { return true; } // \u5de6\u306e\u30d1\u30c9\u30eb\u306b\u885d\u7a81\n        if(FlxG.pixelPerfectOverlap(_player, _paddleRight)) { return true; } // \u53f3\u306e\u30d1\u30c9\u30eb\u306b\u885d\u7a81\n\n        return false; // \u4f55\u3082\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\n    }\n```\n\n\u30d1\u30c9\u30eb\u3068\u306e\u885d\u7a81\u5224\u5b9a\u3092\u5897\u3084\u3057\u3066\u3044\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u58c1\u306b\u3042\u305f\u3063\u305f\u6642\u306b\u58c1\u304c\u30e9\u30f3\u30c0\u30e0\u3067\u79fb\u52d5\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    override public function update():Void {\n\n        if(_isHit()) {\n            // \u30d7\u30ec\u30a4\u30e4\u30fc\u6b7b\u4ea1\n            _player.kill();\n        }\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            _player.x = 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u3082\u3068\u306b\u623b\u3059\n            _player.flipX = false;\n            // \u5de6\u58c1\u5149\u308b\n            _bounceLeft.animation.play(\"flash\");\n            // \u53f3\u306e\u30d1\u30c9\u30eb\u30e9\u30f3\u30c0\u30e0\u79fb\u52d5\n            _paddleRight.randomize();\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            _player.x = FlxG.width - _player.width - 5;\n            // \u53cd\u5bfe\u65b9\u5411\u306b\u79fb\u52d5\u3059\u308b\n            _player.velocity.x *= -1;\n            // \u753b\u50cf\u3092\u53cd\u8ee2\n            _player.flipX = true;\n            // \u53f3\u58c1\u5149\u308b\n            _bounceRight.animation.play(\"flash\");\n            // \u5de6\u306e\u30d1\u30c9\u30eb\u30e9\u30f3\u30c0\u30e0\u79fb\u52d5\n            _paddleLeft.randomize();\n        }\n\n```\n\n\u5f53\u305f\u3063\u305f\u58c1\u3068\u53cd\u5bfe\u5074\u306b\u3042\u308b\u30d1\u30c9\u30eb\u304c\u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5b9f\u884c\u3059\u308b\u3068\u30d1\u30c9\u30eb\u304c\u51fa\u73fe\u3057\u52d5\u304f\u3088\u3046\u306b\u306a\u3063\u3066\u3001\u885d\u7a81\u5224\u5b9a\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n![007.png](https://qiita-image-store.s3.amazonaws.com/0/43772/9a2398b6-a63c-e9a4-57b6-b24beb510a1f.png)\n\n## \u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u30fb\u30ea\u30c8\u30e9\u30a4\u3092\u5b9f\u88c5\u3059\u308b (Player.hx)\n\n\u4f55\u56de\u3082\u30d7\u30ec\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\nPlayer\u30af\u30e9\u30b9\u306ekill()\u51e6\u7406\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```hx:Player.hx\n    /**\n     * \u6b7b\u4ea1\u51e6\u7406\n     **/\n    override public function kill():Void {\n        if(exists == false) {\n            // \u3059\u3067\u306b\u6b7b\u3093\u3067\u3044\u308b\u306a\u3089\u4f55\u3082\u3057\u306a\u3044\n            return;\n        }\n\n        // PlayState\u3092\u53d6\u5f97\n        var state:PlayState = cast(FlxG.state, PlayState);\n        state.launchFeathers(x, y, 10);\n\n        super.kill();\n\n        // \u753b\u9762\u5168\u4f53\u3092\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u3059\u308b\n        FlxG.camera.flash(0xffFFFFFF, 1, onFlashDone);\n        // \u753b\u9762\u3092\u63fa\u3089\u3059\n        FlxG.camera.shake(0.02, 0.35);\n    }\n\n```\n\n\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u306b`onFlashDone`\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u6642\u306b\u3001`onFlashDone`\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\u3068\u306a\u308a\u307e\u3059\u3002\n\u3067\u306f\u3001\u3053\u306e\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```hx:Player.hx\n    /**\n     * \u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u95a2\u6570\n     **/\n    public function onFlashDone():Void {\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u5fa9\u6d3b\u3055\u305b\u308b\n        revive();\n\n        // State\u30ea\u30bb\u30c3\u30c8\n        cast(FlxG.state, PlayState).reset();\n    }\n\n    /**\n     * \u5fa9\u6d3b\u51e6\u7406\n     **/\n    override public function revive():Void {\n\n        // \u753b\u9762\u4e2d\u5fc3\u306b\u623b\u3059\n        x = FlxG.width * 0.5 - 4;\n        y = FlxG.height * 0.5 - 4;\n\n        // \u52d5\u304d\u3092\u6b62\u3081\u308b\n        acceleration.x = 0;\n        acceleration.y = 0;\n        velocity.x = 0;\n        velocity.y = 0;\n\n        super.revive();\n    }\n}\n```\n\n\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u5f8c\u3001\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u521d\u671f\u72b6\u614b\u306b\u623b\u3059\u305f\u3081\u306b revive()\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001PlayState\u306ereset()\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u672a\u5b9f\u88c5\u306a\u306e\u3067\u5b9f\u88c5\u304c\u5fc5\u8981\u3067\u3059\u3002\n\nPlayState\u306ereset()\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    \n    /**\n     * \u30ea\u30bb\u30c3\u30c8\u51e6\u7406\n     **/\n    public function reset():Void {\n\n        // \u30d1\u30c9\u30eb\u3092\u521d\u671f\u4f4d\u7f6e\u306b\u623b\u3059\n        _paddleLeft.y = 0 - _paddleLeft.height;\n        _paddleRight.y = 0 - _paddleRight.height;\n\n    }\n```\n\n\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u30d1\u30c9\u30eb\u3092\u521d\u671f\u4f4d\u7f6e\u306b\u623b\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\u5b9f\u884c\u3059\u308b\u3068\u3001\u6b7b\u4ea1\u5f8c\u3001\u521d\u671f\u72b6\u614b\u306b\u623b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n## \u30b9\u30b3\u30a2\u30fb\u30bb\u30fc\u30d6\u306e\u5b9f\u88c5\n### \u5909\u6570\u5b9a\u7fa9 (Reg.hx)\n\u6700\u5f8c\u306b\u30b9\u30b3\u30a2\u30fb\u30bb\u30fc\u30d6\u306e\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002\nState\u3092\u307e\u305f\u304c\u308b\u306e\u3067\u3001\u5fc5\u8981\u306a\u5909\u6570\u306fReg.hx\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```hx:Reg.hx\nclass Reg\n{\n    // \u58c1\u3092\u5149\u3089\u305b\u308b\u69d8\u306e\u753b\u50cf\u30c7\u30fc\u30bf\n    static private var _bitmapData:BitmapData;\n    \n    // \u73fe\u5728\u306e\u30b9\u30b3\u30a2\n    static public var score:Int = 0;\n    \n    // \u30cf\u30a4\u30b9\u30b3\u30a2\n    static public var highScore:Int = 0;\n    \n    // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\n    static public var save:FlxSave;\n```\n\n\u30b9\u30b3\u30a2`score`\u3001\u30cf\u30a4\u30b9\u30b3\u30a2`highscore`\u3001\u30bb\u30fc\u30d6\u30c7\u30fc\u30bf`save`\u306e3\u3064\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n### \u30b9\u30b3\u30a2\u30bb\u30fc\u30d6\u547c\u3073\u51fa\u3057 (Player.hx)\n\u6b21\u306bPlayer\u30af\u30e9\u30b9\u3067\u30b9\u30b3\u30a2\u30bb\u30fc\u30d6\u306e\u547c\u3073\u51fa\u3057\u3092\u884c\u3044\u307e\u3059\u3002\n\n```hx:Player.hx\n    /**\n     * \u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u95a2\u6570\n     **/\n    public function onFlashDone():Void {\n\n        // \u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u5fa9\u6d3b\u3055\u305b\u308b\n        revive();\n        \n        // \u30bb\u30fc\u30d6\u3092\u547c\u3073\u51fa\u3059\n        PlayState.saveScore();\n\n        // State\u30ea\u30bb\u30c3\u30c8\n        cast(FlxG.state, PlayState).reset();\n    }\n```\n\n\u767d\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u30bb\u30fc\u30d6\u3057\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306f\u672a\u5b9f\u88c5\u306a\u306e\u3067\u3001PlayState\u30af\u30e9\u30b9\u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n### \u30b9\u30b3\u30a2\u51e6\u7406\u30fb\u30bb\u30fc\u30d6\u51e6\u7406\u306e\u5b9f\u88c5 (PlayState.hx)\n\u305d\u3082\u305d\u3082\u30b9\u30b3\u30a2\u3092\u8868\u793a\u3059\u308b\u4ed5\u7d44\u307f\u304c\u306a\u3044\u306e\u3067\u3001\u30b9\u30b3\u30a2\u8868\u793a\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\nPlayState\u306b\u30d5\u30a3\u30fc\u30eb\u30c9`_scoreDisplay`\u3068`_highScore`\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30ad\u30b9\u30c8\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\u305d\u308c\u3068\u3001\u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u540d`SAVE_DATA`\u306e\u5b9a\u7fa9\u3082\u3057\u307e\u3059\u3002\n\n```hx:PlayState.hx\nclass PlayState extends FlxState {\n\n    private var _player:Player; // \u30d7\u30ec\u30a4\u30e4\u30fc\n    private var _bounceLeft:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u5de6\n    private var _bounceRight:FlxSprite; // \u8df3\u306d\u8fd4\u308a\u58c1\u30fb\u53f3\n    private var _spikeBottom:FlxSprite; // \u91dd\u306e\u5e8a\n    private var _spikeTop:FlxSprite; // \u91dd\u306e\u5929\u4e95\n    private var _feathers:FlxEmitter; // \u7fbd\u30a8\u30d5\u30a7\u30af\u30c8\n    private var _paddleLeft:Paddle; // \u30d0\u30c9\u30eb\u30fb\u5de6\n    private var _paddleRight:Paddle; // \u30d1\u30c9\u30eb\u30fb\u53f3\n    private var _scoreDisplay:FlxText; // \u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\n    private var _highScore:FlxText; // \u30cf\u30a4\u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\n    \n    static inline private var SAVE_DATA:String = \"FLAPPYBALT\"; // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u540d\n    /**\n     * \u751f\u6210\n     **/\n    override public function create():Void {\n        super.create();\n\n        // \u80cc\u666f\u753b\u50cf\u306e\u8868\u793a\n        // ... (\u7701\u7565)\n\n        // \u30d1\u30c9\u30eb\u30fb\u53f3\u30fb\u751f\u6210\n        _paddleRight = new Paddle(FlxG.width-15, FlxObject.LEFT);\n        add(_paddleRight);\n\n        // \u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\u3092\u751f\u6210\n        _scoreDisplay = new FlxText(0, 180, FlxG.width);\n        _scoreDisplay.alignment = \"center\";\n        _scoreDisplay.color = 0xff898996;\n        _scoreDisplay.size = 24;\n        add(_scoreDisplay);\n        \n        // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u304b\u3089\u30cf\u30a4\u30b9\u30b3\u30a2\u3092\u30ed\u30fc\u30c9\u3059\u308b\n        Reg.highScore = loadScore();\n        \n        // \u30cf\u30a4\u30b9\u30b3\u30a2\u30c6\u30ad\u30b9\u30c8\u3092\u751f\u6210\n        _highScore = new FlxText(0, 40, FlxG.width, \"\");\n        _highScore.alignment = \"center\";\n        _highScore.color = 0xff868696;\n        add(_highScore);\n        \n        // \u30cf\u30a4\u30b9\u30b3\u30a2\u30c7\u30fc\u30bf\u304c\u3042\u308c\u3070\u305d\u308c\u3092\u30c6\u30ad\u30b9\u30c8\u306b\u8a2d\u5b9a\n        if(Reg.highScore > 0) {\n            _highScore.text = Std.string(Reg.highScore);\n        }\n    }\n\n```\n\n\u30cf\u30a4\u30b9\u30b3\u30a2\u306e\u30ed\u30fc\u30c9\u95a2\u6570loadScore()\u304c\u672a\u5b9f\u88c5\u306a\u306e\u3067\u3053\u308c\u3082\u5b9f\u88c5\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u30bb\u30fc\u30d6\u95a2\u6570\u3067\u3059\u3002\n\n```hx:PlayState.hx\n    /**\n     * \u30bb\u30fc\u30d6\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\n     **/\n    static public function saveScore():Void {\n        Reg.save = new FlxSave();\n        if(Reg.save.bind(SAVE_DATA)) {\n            if((Reg.save.data.score == null) || (Reg.save.data.score < Reg.score)) {\n\n                // \u672a\u30bb\u30fc\u30d6\u307e\u305f\u306f\u30cf\u30a4\u30b9\u30b3\u30a2\u66f4\u65b0\u3067\u3042\u308c\u3070\u4fdd\u5b58\n                Reg.save.data.score = Reg.score;\n            }\n        }\n\n        // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u66f8\u304d\u8fbc\u307f\n        Reg.save.flush();\n    }\n```\n\n\u30bb\u30fc\u30d6\u3092\u3059\u308b\u305f\u3073\u306bFlxSave\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u540d\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u3001data\u306b\u4ee3\u5165\u3057\u3066\u3001flush\u3067\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u7d9a\u3044\u3066\u30ed\u30fc\u30c9\u95a2\u6570\u306e\u5b9f\u88c5\u3067\u3059\u3002\n\n```hx:PlayState.hx\n    /**\n     * \u30ed\u30fc\u30c9\u51e6\u7406\u3092\u884c\u3046\n     **/\n    static public function loadScore():Int {\n        Reg.save = new FlxSave();\n\n        if(Reg.save.bind(SAVE_DATA)) {\n            if((Reg.save.data != null) && (Reg.save.data.score != null)) {\n\n                // \u7121\u52b9\u306a\u30c7\u30fc\u30bf\u3067\u306a\u3051\u308c\u3070\u30b9\u30b3\u30a2\u3092\u8fd4\u3059\n                return Reg.save.data.score;\n\n            }\n        }\n\n        // \u30bb\u30fc\u30d6\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\n        return 0;\n    }\n```\n\n\u3053\u308c\u3067\u30bb\u30fc\u30d6\u30fb\u30ed\u30fc\u30c9\u306f\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u30b9\u30b3\u30a2\u8a08\u7b97\u306e\u51e6\u7406\u304c\u307e\u3060\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002update()\u306b\u30b9\u30b3\u30a2\u52a0\u7b97\u3068\u30c6\u30ad\u30b9\u30c8\u66f4\u65b0\u51e6\u7406\u3092\u5165\u308c\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    override public function update():Void {\n\n        if(_isHit()) {\n            // \u30d7\u30ec\u30a4\u30e4\u30fc\u6b7b\u4ea1\n            _player.kill();\n        }\n\n        if(FlxG.keys.justPressed.ESCAPE) {\n            // ESCAPE\u30ad\u30fc\u3067\u7d42\u4e86\n            throw new Error(\"terminate.\");\n        }\n\n        // \u753b\u9762\u7aef\u5224\u5b9a\n        if(_player.x < 5) {\n\n            // \u5de6\u7aef\u306b\u5230\u9054\n            // ... (\u7701\u7565)\n\n            // \u30b9\u30b3\u30a2\u8a08\u7b97\n            Reg.score++;\n            _scoreDisplay.text = Std.string(Reg.score);\n        }\n        else if(_player.x + _player.width > FlxG.width - 5) {\n\n            // \u53f3\u7aef\u306b\u5230\u9054\n            // ... (\u7701\u7565)\n\n            // \u30b9\u30b3\u30a2\u8a08\u7b97\n            Reg.score++;\n            _scoreDisplay.text = Std.string(Reg.score);\n        }\n```\n\n\u6700\u5f8c\u306breset()\u95a2\u6570\u306b\u30b9\u30b3\u30a2\u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u5165\u308c\u307e\u3059\u3002\n\n```hx:PlayState.hx\n    /**\n     * \u30ea\u30bb\u30c3\u30c8\u51e6\u7406\n     **/\n    public function reset():Void {\n\n        // \u30d1\u30c9\u30eb\u3092\u521d\u671f\u4f4d\u7f6e\u306b\u623b\u3059\n        _paddleLeft.y = 0 - _paddleLeft.height;\n        _paddleRight.y = 0 - _paddleRight.height;\n        \n        // \u30b9\u30b3\u30a2\u521d\u671f\u5316\n        Reg.score = 0;\n        _scoreDisplay.text = \"\";\n        Reg.highScore = loadScore();\n        \n        if(Reg.highScore > 0) {\n            _highScore.text = Std.string(Reg.highScore);\n        }\n\n    }\n```\n\n\u3088\u3046\u3084\u304f\u3053\u308c\u3067\u5b8c\u6210\u3067\u3059\uff01\n![008.png](https://qiita-image-store.s3.amazonaws.com/0/43772/0101326a-d1be-ae2c-bd4a-c423d674d974.png)\n\u30b9\u30b3\u30a2\u30fb\u30cf\u30a4\u30b9\u30b3\u30a2\u304c\u8868\u793a\u3055\u308c\u3001\u6b63\u3057\u304f\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n", "tags": ["HaxeFlixel3.3.4", "Haxe3.1.37"]}