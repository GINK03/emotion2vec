{"context": "\u30c7\u30e2\uff1ahttp://mo49.tokyo/qiita/20160426/\nCircle\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\n\nCircle.js\nvar Circle = function(){\n  // \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\n  return this.set();\n};\n\nCircle.prototype.set = function(){\n  var radian = Math.random() * (Math.PI * 360);\n  this.x = cv.width * Math.random(); \n  this.y = cv.height * Math.random(); \n  this.to_x = Math.cos( radian );\n  this.to_y = Math.tan( radian );\n  this.speed = Math.random() * 3 + 2;\n  this.size = Math.random() * 8 + 3;\n  // this.color(); // \u521d\u56de\u3060\u3051\u306a\u3089\u3053\u3061\u3089\u3067\u8a2d\u5b9a\n};\n\nCircle.prototype.move = function(){\n  this.x += this.to_x * this.speed;\n  this.y += this.to_y * this.speed;\n  this.out_square_in();\n  this.color();\n};\n\n// \u753b\u9762\u304b\u3089\u306f\u307f\u51fa\u3057\u305f\u3068\u304d\u623b\u3059\nCircle.prototype.out_square_in = function(){\n  if( this.x + this.size < 0 ) this.x = cv.width;\n  if( cv.width < this.x ) this.x = 0 - this.size;\n  if( this.y + this.size < 0 ) this.y = cv.height;\n  if( cv.height < this.y ) this.y = 0 - this.size;\n};\n\nCircle.prototype.color = function(){\n  this.r = Math.floor(Math.random()*255);\n  this.g = Math.floor(Math.random()*255);\n  this.b = Math.floor(Math.random()*255);\n};\n\n\ncanvas\u306e\u51e6\u7406\u3092\u8a18\u8ff0\n\nmain.js\nvar cv = document.getElementById(\"cv\");\nvar ctx = cv.getContext(\"2d\");\n\nsetCanvasSize();\nfunction setCanvasSize() {\n  cv.style.width = window.innerWidth + 'px';\n  cv.style.height = window.innerHeight + 'px';\n  cv.width = window.innerWidth * window.devicePixelRatio;\n  cv.height = window.innerHeight * window.devicePixelRatio;\n}\n$(window).on('resize load', function(){\n  setCanvasSize();\n});\n\n// \u30b9\u30ef\u30a4\u30d7\u306b\u3088\u308b\u30b9\u30af\u30ed\u30fc\u30eb\u3092\u7981\u6b62\u3055\u305b\u308b\ndocument.body.addEventListener('touchstart', function(event) {\n  event.preventDefault();\n});\n\n// canvas\u304c\u4f7f\u7528\u53ef\u80fd\u304b\u5224\u5b9a\nif( cv && cv.getContext ) {\n  canvasInit();\n}\n\nfunction canvasInit(){\n\n  var instances = [];\n  var count = 0;\n\n  for( var i = 1; i <= 100; i++ ){\n    instances.push( new Circle() );\n  }\n\n  function draw(){\n    // \u80cc\u666f\n    var p;\n    ctx.fillStyle = \"#000\";\n    ctx.fillRect( 0, 0, cv.width, cv.height );\n\n    // \u5186\n    for ( var i = 0; i < instances.length; i++) {\n      p = instances[i];\n      ctx.fillStyle = 'rgba(' + p.r + ',' + p.g + ',' + p.b + ', 1)';\n      ctx.beginPath();\n      ctx.arc( p.x, p.y, p.size, 0, Math.PI * 2, false );     \n      if (count > 1500) {\n        ctx.arc( p.x, p.y, p.size*3, 0, Math.PI * 2, false );     \n        if(count > 2000){ count = 0; }\n      }\n      count++;\n      ctx.fill();\n      p.move();\n    }\n  setInterval(draw, 50);\n\n}\n\n\n\n\u3000\u5f15\u7528\nJavaScript\u3067\u5b66\u3076 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u5165\u9580\n\u30d6\u30e9\u30a6\u30b6\u3044\u3063\u3071\u3044\u306e\u30ad\u30e3\u30f3\u30d0\u30b9\u3092\u4f5c\u308b\n\n\n\u30c7\u30e2\uff1ahttp://mo49.tokyo/qiita/20160426/\n\nCircle\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\n\n```javascript:Circle.js\nvar Circle = function(){\n  // \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\n  return this.set();\n};\n\nCircle.prototype.set = function(){\n  var radian = Math.random() * (Math.PI * 360);\n  this.x = cv.width * Math.random(); \n  this.y = cv.height * Math.random(); \n  this.to_x = Math.cos( radian );\n  this.to_y = Math.tan( radian );\n  this.speed = Math.random() * 3 + 2;\n  this.size = Math.random() * 8 + 3;\n  // this.color(); // \u521d\u56de\u3060\u3051\u306a\u3089\u3053\u3061\u3089\u3067\u8a2d\u5b9a\n};\n\nCircle.prototype.move = function(){\n  this.x += this.to_x * this.speed;\n  this.y += this.to_y * this.speed;\n  this.out_square_in();\n  this.color();\n};\n\n// \u753b\u9762\u304b\u3089\u306f\u307f\u51fa\u3057\u305f\u3068\u304d\u623b\u3059\nCircle.prototype.out_square_in = function(){\n  if( this.x + this.size < 0 ) this.x = cv.width;\n  if( cv.width < this.x ) this.x = 0 - this.size;\n  if( this.y + this.size < 0 ) this.y = cv.height;\n  if( cv.height < this.y ) this.y = 0 - this.size;\n};\n\nCircle.prototype.color = function(){\n  this.r = Math.floor(Math.random()*255);\n  this.g = Math.floor(Math.random()*255);\n  this.b = Math.floor(Math.random()*255);\n};\n```\n\ncanvas\u306e\u51e6\u7406\u3092\u8a18\u8ff0\n\n```javascript:main.js\nvar cv = document.getElementById(\"cv\");\nvar ctx = cv.getContext(\"2d\");\n\nsetCanvasSize();\nfunction setCanvasSize() {\n  cv.style.width = window.innerWidth + 'px';\n  cv.style.height = window.innerHeight + 'px';\n  cv.width = window.innerWidth * window.devicePixelRatio;\n  cv.height = window.innerHeight * window.devicePixelRatio;\n}\n$(window).on('resize load', function(){\n  setCanvasSize();\n});\n\n// \u30b9\u30ef\u30a4\u30d7\u306b\u3088\u308b\u30b9\u30af\u30ed\u30fc\u30eb\u3092\u7981\u6b62\u3055\u305b\u308b\ndocument.body.addEventListener('touchstart', function(event) {\n  event.preventDefault();\n});\n\n// canvas\u304c\u4f7f\u7528\u53ef\u80fd\u304b\u5224\u5b9a\nif( cv && cv.getContext ) {\n  canvasInit();\n}\n\nfunction canvasInit(){\n\n  var instances = [];\n  var count = 0;\n\n  for( var i = 1; i <= 100; i++ ){\n    instances.push( new Circle() );\n  }\n\n  function draw(){\n    // \u80cc\u666f\n    var p;\n    ctx.fillStyle = \"#000\";\n    ctx.fillRect( 0, 0, cv.width, cv.height );\n\n    // \u5186\n    for ( var i = 0; i < instances.length; i++) {\n      p = instances[i];\n      ctx.fillStyle = 'rgba(' + p.r + ',' + p.g + ',' + p.b + ', 1)';\n      ctx.beginPath();\n      ctx.arc( p.x, p.y, p.size, 0, Math.PI * 2, false );     \n      if (count > 1500) {\n        ctx.arc( p.x, p.y, p.size*3, 0, Math.PI * 2, false );     \n        if(count > 2000){ count = 0; }\n      }\n      count++;\n      ctx.fill();\n      p.move();\n    }\n  setInterval(draw, 50);\n  \n}\n```\n\n>\u3000\u5f15\u7528\n[JavaScript\u3067\u5b66\u3076 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u5165\u9580](http://codeprep.jp/ja/books/book/36)\n[\u30d6\u30e9\u30a6\u30b6\u3044\u3063\u3071\u3044\u306e\u30ad\u30e3\u30f3\u30d0\u30b9\u3092\u4f5c\u308b](http://qiita.com/tyfkda/items/d1c650786bce6ff825b1)\n\n", "tags": ["JavaScript", "canvas"]}