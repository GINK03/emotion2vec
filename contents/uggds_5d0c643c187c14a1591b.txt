{"context": " More than 1 year has passed since last update.\n\nAngularJS\u306e\u30c6\u30b9\u30c8\nAngularJS\u306eUnit\u30c6\u30b9\u30c8\u306f\u958b\u767a\u8005\u30ac\u30a4\u30c9\u3067\u306fJasmine\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://docs.angularjs.org/guide/unit-testing\n\u3055\u3089\u306b\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306fJamine\u306e\u5b9f\u884c\u74b0\u5883\u3068\u3057\u3066karma\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\nkarma\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306fnode.js\u304c\u5fc5\u8981\u306a\u3088\u3046\u3067\u3059\u3002\nhttps://docs.angularjs.org/tutorial\n\u308f\u3051\u3042\u3063\u3066node\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u304f\u306a\u304b\u3063\u305f\u306e\u3067\u3001Jasmine\u306e\u307f\uff08\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30fc\u30f3\uff09\u3067AngularJS\u306e\u30c6\u30b9\u30c8\u3092\n\u30c8\u30e9\u30a4\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n(Jasmine-2.0.1: https://github.com/pivotal/jasmine/blob/master/dist/jasmine-standalone-2.0.1.zip)\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\u251c\u2500\u2500 angular\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-cookies.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-mocks.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-resource.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-route.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-sanitize.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 angular.js\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 controllers.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 services.js\n\u251c\u2500\u2500 index.html\n\u2514\u2500\u2500 jasmine\n \u00a0\u00a0 \u251c\u2500\u2500 MIT.LICENSE\n \u00a0\u00a0 \u251c\u2500\u2500 SpecRunner.html\n \u00a0\u00a0 \u251c\u2500\u2500 lib\n \u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 jasmine-2.0.1\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 boot.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 console.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 jasmine-html.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 jasmine.css\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 jasmine.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 jasmine_favicon.png\n \u00a0\u00a0 \u2514\u2500\u2500 spec\n \u00a0\u00a0     \u2514\u2500\u2500 sampleControllerSpec.js\n\n\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306fAngularJS\u306e\u958b\u767a\u8005\u30ac\u30a4\u30c9\u304b\u3089\u62dd\u501f\u3002\n\uff08Yahoo\u30d5\u30a1\u30a4\u30ca\u30f3\u30b9API\u3067\u53d6\u5f97\u3057\u305f\u5404\u56fd\u306e\u70ba\u66ff\u30ec\u30fc\u30c8\u3092\u5165\u529b\u3057\u305f\u6570\u91cf\u30fb\u91d1\u984d\u306b\u639b\u3051\u3066\u4e00\u89a7\u8868\u793a\u3059\u308b\u3082\u306e\uff09\nhttps://docs.angularjs.org/guide/concepts\n\nindex.html\n<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <title>Try Jasmine</title>\n    <script src=\"angular/angular.js\"></script>\n    <script src=\"angular/angular-resource.js\"></script>\n    <script src=\"angular/angular-cookies.js\"></script>\n    <script src=\"angular/angular-sanitize.js\"></script>\n    <script src=\"angular/angular-route.js\"></script>\n    <script src=\"app/app.js\"></script>\n    <script src=\"app/controllers.js\"></script>\n    <script src=\"app/services.js\"></script>\n  </head>\n  <body ng-app=\"myapp.controllers\">\n    <h1>AngularJs Sample</h1>\n    <div class=\"container\" ng-controller=\"SampleController\">\n      <b>Invoice:</b>\n      <div>\n        Quantity: <input type=\"number\" ng-model=\"qty\" required />\n      </div>\n      <div>\n        Costs: <input type=\"number\" ng-model=\"cost\" required /><br />\n        <select ng-model=\"inCurr\">\n          <option ng-repeat=\"c in currencies\">{{c}}</option>\n        </select>\n      </div>\n      <div>\n        <b>Total:</b>\n        <span ng-repeat=\"c in currencies\">\n          {{total(c) | currency:c }}\n        </span><br/>\n        <button class=\"btn\" ng-click=\"pay()\">Pay</button>\n      </div>\n    </div>\n</body>\n</html>\n\n\n\ncontrollers.js\nangular.module('myapp.controllers', ['myapp.services'])\n.controller('SampleController', function($scope, SampleService) {\n  $scope.qty = 1;\n  $scope.cost = 2;\n  $scope.inCurr = 'JPY';\n  $scope.currencies = SampleService.currencies;\n  $scope.total = function (outCurr) {\n    return SampleService.convert($scope.qty * $scope.cost, $scope.inCurr, outCurr);\n  };\n  $scope.pay = function () {\n    window.alert(\"Thanks!\");\n  };\n});\n\n\n\nservices.js\nangular.module('myapp.services', [])\n.factory('SampleService', function ($http) {\n  var YAHOO_FINANCE_URL_PATTERN = \n    'http://query.yahooapis.com/v1/public/yql?q=select * from '+\n      'yahoo.finance.xchange where pair in (\"PAIRS\")&format=json&'+\n        'env=store://datatables.org/alltableswithkeys&callback=JSON_CALLBACK';\n  var currencies = ['USD', 'EUR', 'CNY', 'JPY'];\n  var usdToForeignRates = {};\n  refresh();\n  return {\n    currencies: currencies,\n    convert: convert,\n    refresh: refresh\n  };\n  function convert(amount, inCurr, outCurr) {\n    return amount * usdToForeignRates[outCurr] * 1 / usdToForeignRates[inCurr];\n  };\n\n  function refresh() {\n    var url = YAHOO_FINANCE_URL_PATTERN.replace('PAIRS', 'USD' + currencies.join('\",\"USD'));\n    return $http.jsonp(url).success(\n      function(data) {\n        var newUsdToForeignRates = {};\n        angular.forEach(data.query.results.rate, function(rate) {\n          var currency = rate.id.substring(3,6);\n          newUsdToForeignRates[currency] = window.parseFloat(rate.Rate);\n        });\n        usdToForeignRates = newUsdToForeignRates;\n      });\n  };\n});\n\n\n\n\u30c6\u30b9\u30c8\u3059\u308b\n\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5b9a\u7fa9\u306fSpecRunner.html\u3067\u884c\u3044\u307e\u3059\u3002\n\nSpecRunner.html\n<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n  <title>Jasmine Spec Runner v2.0.1</title>\n\n  <link rel=\"shortcut icon\" type=\"image/png\" href=\"lib/jasmine-2.0.1/jasmine_favicon.png\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"lib/jasmine-2.0.1/jasmine.css\">\n\n  <script type=\"text/javascript\" src=\"lib/jasmine-2.0.1/jasmine.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/jasmine-2.0.1/jasmine-html.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/jasmine-2.0.1/boot.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-mocks.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-resource.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-cookies.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-sanitize.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-route.js\"></script>\n\n\n  <!-- include source files here... -->\n  <script type=\"text/javascript\" src=\"../app/controllers.js\"></script>\n  <script type=\"text/javascript\" src=\"../app/services.js\"></script>\n\n  <!-- include spec files here... -->\n  <script type=\"text/javascript\" src=\"spec/SampleControllerSpec.js\"></script>\n\n</head>\n\n<body>\n</body>\n</html>\n\n\nsource\u3084spec\u3092\u30d5\u30a1\u30a4\u30eb\u306e\u5206\u3060\u3051\u5b9a\u7fa9\u3057\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u304c\u9762\u5012\u304f\u3055\u3044\u3067\u3059\u3002\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u307b\u3068\u3093\u3069index.html\u3067\u5b9a\u7fa9\u3059\u308b\u3082\u306e\u3068\u540c\u3058\u3067\u3088\u3044\u306e\u3067\u3059\u304c\u3001\u552f\u4e00\u30c6\u30b9\u30c8\u7528\u306b\nangular-mocks.js\n\u3092\u5b9a\u7fa9\u3057\u3066\u3042\u3052\u308b\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306fReferenceError: module is not defined\u3068\u3044\u3046\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u3042\u307e\u308a\u76f4\u63a5\u7684\u3067\u306a\u3044\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306a\u306e\u3067\u5d4c\u308a\u307e\u3057\u305f\u3002\n\u3042\u3068\u306fSampleController\u306b\u5bfe\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u7d42\u308f\u308a\u3067\u3059\u3002\n\nsampleControllerSpec.js\n'use strict';\n\ndescribe('Controller: SampleController', function () {\n\n  // load the controller's module\n  beforeEach(module('myapp.controllers'));\n\n  var ctrl,\n    scope;\n\n  var expected = [ 'USD', 'EUR', 'CNY', 'JPY' ];\n  var usdToForeignRates = [];\n  usdToForeignRates['USD'] = 0.01;\n  usdToForeignRates['EUR'] = 0.01;\n  usdToForeignRates['CYN'] = 0.06;\n  usdToForeignRates['JPY'] = 1.00;\n\n  var alert_msg;\n\n  // Initialize the controller and a mock scope\n  beforeEach(inject(function ($controller, $rootScope, SampleService) {\n    scope = $rootScope.$new();\n    ctrl = $controller('SampleController', {\n      $scope: scope\n    });\n    spyOn(SampleService, 'convert').and.callFake(function(amount, inCurr, outCurr) {\n      return amount * usdToForeignRates[outCurr] * 1 / usdToForeignRates[inCurr];\n    });\n    alert_msg = '_defalut_';\n    spyOn(window, 'alert').and.callFake(function(msg) {\n      alert_msg = msg;\n    });\n  }));\n\n  it('should attach a list of currencies to the scope', function () {\n    expect(scope.currencies.length).toBe(4);\n    expect(scope.currencies).toEqual(expected);\n  });\n\n  it('when total() is called returns the calculated value', function () {\n    expect(scope.total('USD')).toBe(0.02);\n    expect(scope.total('EUR')).toBe(0.02);\n    expect(scope.total('CYN')).toBe(0.12);\n    expect(scope.total('JPY')).toBe(2);\n  });\n\n  it('when pay() is called returns the correct alert message', function () {\n    expect(alert_msg).toEqual('_defalut_');\n    scope.pay();\n    expect(alert_msg).toEqual('Thanks!');\n  });\n});\n\n\n\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3068\u3001\n\u307e\u305a\u4f8b\u306b\u306a\u3089\u3063\u3066\u3001\u6700\u521d\u306ebeforeEach\u3067\u4f7f\u7528\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u6b21\u306ebeforeEach\u3067\u306fscope\u3068\u30c6\u30b9\u30c8\u5bfe\u8c61\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fcctrl\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\u3055\u3089\u306b\u3001\u3053\u3053\u3067SampleService\u306e\u95a2\u6570convert\u306b\u306fJasmine\u306eSpy\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u4ee3\u5f79\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u306fconvert\u304c\u5916\u90e8\u306e\u51e6\u7406\u3092\u547c\u3073\u51fa\u3057\u305f\u7d50\u679c\u3092\u7528\u3044\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\n\u307e\u305f\u3001alert\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u306b\u3082Spy\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002Spy\u3061\u3083\u3093\u4fbf\u5229\u3061\u3083\u3093\u3002\n\n\u53c2\u8003\n\u30fbAngularJS\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u66f8\u304f\n\u30fbJasmine\u306eSpy\u6a5f\u80fd\u3067\u30c6\u30b9\u30c8\u30c0\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\u30fbUnit Testing $http service in Angular.js\n\u30fbAlert! Testing Javascript's alert function with Jasmine\n# AngularJS\u306e\u30c6\u30b9\u30c8\nAngularJS\u306eUnit\u30c6\u30b9\u30c8\u306f\u958b\u767a\u8005\u30ac\u30a4\u30c9\u3067\u306fJasmine\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://docs.angularjs.org/guide/unit-testing\n\n\u3055\u3089\u306b\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306fJamine\u306e\u5b9f\u884c\u74b0\u5883\u3068\u3057\u3066karma\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\nkarma\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306fnode.js\u304c\u5fc5\u8981\u306a\u3088\u3046\u3067\u3059\u3002\nhttps://docs.angularjs.org/tutorial\n\n\u308f\u3051\u3042\u3063\u3066node\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u304f\u306a\u304b\u3063\u305f\u306e\u3067\u3001Jasmine\u306e\u307f\uff08\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30fc\u30f3\uff09\u3067AngularJS\u306e\u30c6\u30b9\u30c8\u3092\n\u30c8\u30e9\u30a4\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n(Jasmine-2.0.1: https://github.com/pivotal/jasmine/blob/master/dist/jasmine-standalone-2.0.1.zip)\n\n```lang:\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\u251c\u2500\u2500 angular\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-cookies.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-mocks.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-resource.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-route.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 angular-sanitize.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 angular.js\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 controllers.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 services.js\n\u251c\u2500\u2500 index.html\n\u2514\u2500\u2500 jasmine\n \u00a0\u00a0 \u251c\u2500\u2500 MIT.LICENSE\n \u00a0\u00a0 \u251c\u2500\u2500 SpecRunner.html\n \u00a0\u00a0 \u251c\u2500\u2500 lib\n \u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 jasmine-2.0.1\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 boot.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 console.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 jasmine-html.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 jasmine.css\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 jasmine.js\n \u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 jasmine_favicon.png\n \u00a0\u00a0 \u2514\u2500\u2500 spec\n \u00a0\u00a0     \u2514\u2500\u2500 sampleControllerSpec.js\n\n```\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306fAngularJS\u306e\u958b\u767a\u8005\u30ac\u30a4\u30c9\u304b\u3089\u62dd\u501f\u3002\n\uff08Yahoo\u30d5\u30a1\u30a4\u30ca\u30f3\u30b9API\u3067\u53d6\u5f97\u3057\u305f\u5404\u56fd\u306e\u70ba\u66ff\u30ec\u30fc\u30c8\u3092\u5165\u529b\u3057\u305f\u6570\u91cf\u30fb\u91d1\u984d\u306b\u639b\u3051\u3066\u4e00\u89a7\u8868\u793a\u3059\u308b\u3082\u306e\uff09\nhttps://docs.angularjs.org/guide/concepts\n\n```html:index.html\n<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <title>Try Jasmine</title>\n    <script src=\"angular/angular.js\"></script>\n    <script src=\"angular/angular-resource.js\"></script>\n    <script src=\"angular/angular-cookies.js\"></script>\n    <script src=\"angular/angular-sanitize.js\"></script>\n    <script src=\"angular/angular-route.js\"></script>\n    <script src=\"app/app.js\"></script>\n    <script src=\"app/controllers.js\"></script>\n    <script src=\"app/services.js\"></script>\n  </head>\n  <body ng-app=\"myapp.controllers\">\n    <h1>AngularJs Sample</h1>\n    <div class=\"container\" ng-controller=\"SampleController\">\n      <b>Invoice:</b>\n      <div>\n        Quantity: <input type=\"number\" ng-model=\"qty\" required />\n      </div>\n      <div>\n        Costs: <input type=\"number\" ng-model=\"cost\" required /><br />\n        <select ng-model=\"inCurr\">\n          <option ng-repeat=\"c in currencies\">{{c}}</option>\n        </select>\n      </div>\n      <div>\n        <b>Total:</b>\n        <span ng-repeat=\"c in currencies\">\n          {{total(c) | currency:c }}\n        </span><br/>\n        <button class=\"btn\" ng-click=\"pay()\">Pay</button>\n      </div>\n    </div>\n</body>\n</html>\n```\n```js:controllers.js\nangular.module('myapp.controllers', ['myapp.services'])\n.controller('SampleController', function($scope, SampleService) {\n  $scope.qty = 1;\n  $scope.cost = 2;\n  $scope.inCurr = 'JPY';\n  $scope.currencies = SampleService.currencies;\n  $scope.total = function (outCurr) {\n    return SampleService.convert($scope.qty * $scope.cost, $scope.inCurr, outCurr);\n  };\n  $scope.pay = function () {\n    window.alert(\"Thanks!\");\n  };\n});\n```\n```js:services.js\nangular.module('myapp.services', [])\n.factory('SampleService', function ($http) {\n  var YAHOO_FINANCE_URL_PATTERN = \n    'http://query.yahooapis.com/v1/public/yql?q=select * from '+\n      'yahoo.finance.xchange where pair in (\"PAIRS\")&format=json&'+\n        'env=store://datatables.org/alltableswithkeys&callback=JSON_CALLBACK';\n  var currencies = ['USD', 'EUR', 'CNY', 'JPY'];\n  var usdToForeignRates = {};\n  refresh();\n  return {\n    currencies: currencies,\n    convert: convert,\n    refresh: refresh\n  };\n  function convert(amount, inCurr, outCurr) {\n    return amount * usdToForeignRates[outCurr] * 1 / usdToForeignRates[inCurr];\n  };\n\n  function refresh() {\n    var url = YAHOO_FINANCE_URL_PATTERN.replace('PAIRS', 'USD' + currencies.join('\",\"USD'));\n    return $http.jsonp(url).success(\n      function(data) {\n        var newUsdToForeignRates = {};\n        angular.forEach(data.query.results.rate, function(rate) {\n          var currency = rate.id.substring(3,6);\n          newUsdToForeignRates[currency] = window.parseFloat(rate.Rate);\n        });\n        usdToForeignRates = newUsdToForeignRates;\n      });\n  };\n});\n```\n\n# \u30c6\u30b9\u30c8\u3059\u308b\n\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5b9a\u7fa9\u306f`SpecRunner.html`\u3067\u884c\u3044\u307e\u3059\u3002\n\n```html:SpecRunner.html\n<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n  <title>Jasmine Spec Runner v2.0.1</title>\n\n  <link rel=\"shortcut icon\" type=\"image/png\" href=\"lib/jasmine-2.0.1/jasmine_favicon.png\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"lib/jasmine-2.0.1/jasmine.css\">\n\n  <script type=\"text/javascript\" src=\"lib/jasmine-2.0.1/jasmine.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/jasmine-2.0.1/jasmine-html.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/jasmine-2.0.1/boot.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-mocks.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-resource.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-cookies.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-sanitize.js\"></script>\n  <script type=\"text/javascript\" src=\"../angular/angular-route.js\"></script>\n\n\n  <!-- include source files here... -->\n  <script type=\"text/javascript\" src=\"../app/controllers.js\"></script>\n  <script type=\"text/javascript\" src=\"../app/services.js\"></script>\n\n  <!-- include spec files here... -->\n  <script type=\"text/javascript\" src=\"spec/SampleControllerSpec.js\"></script>\n\n</head>\n\n<body>\n</body>\n</html>\n```\nsource\u3084spec\u3092\u30d5\u30a1\u30a4\u30eb\u306e\u5206\u3060\u3051\u5b9a\u7fa9\u3057\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u304c\u9762\u5012\u304f\u3055\u3044\u3067\u3059\u3002\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u307b\u3068\u3093\u3069index.html\u3067\u5b9a\u7fa9\u3059\u308b\u3082\u306e\u3068\u540c\u3058\u3067\u3088\u3044\u306e\u3067\u3059\u304c\u3001\u552f\u4e00\u30c6\u30b9\u30c8\u7528\u306b\n`angular-mocks.js`\n\u3092\u5b9a\u7fa9\u3057\u3066\u3042\u3052\u308b\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f`ReferenceError: module is not defined`\u3068\u3044\u3046\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u3042\u307e\u308a\u76f4\u63a5\u7684\u3067\u306a\u3044\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306a\u306e\u3067\u5d4c\u308a\u307e\u3057\u305f\u3002\n\n\u3042\u3068\u306f`SampleController`\u306b\u5bfe\u3059\u308b\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u7d42\u308f\u308a\u3067\u3059\u3002\n\n```js:sampleControllerSpec.js\n'use strict';\n\ndescribe('Controller: SampleController', function () {\n\n  // load the controller's module\n  beforeEach(module('myapp.controllers'));\n\n  var ctrl,\n    scope;\n\n  var expected = [ 'USD', 'EUR', 'CNY', 'JPY' ];\n  var usdToForeignRates = [];\n  usdToForeignRates['USD'] = 0.01;\n  usdToForeignRates['EUR'] = 0.01;\n  usdToForeignRates['CYN'] = 0.06;\n  usdToForeignRates['JPY'] = 1.00;\n\n  var alert_msg;\n\n  // Initialize the controller and a mock scope\n  beforeEach(inject(function ($controller, $rootScope, SampleService) {\n    scope = $rootScope.$new();\n    ctrl = $controller('SampleController', {\n      $scope: scope\n    });\n    spyOn(SampleService, 'convert').and.callFake(function(amount, inCurr, outCurr) {\n      return amount * usdToForeignRates[outCurr] * 1 / usdToForeignRates[inCurr];\n    });\n    alert_msg = '_defalut_';\n    spyOn(window, 'alert').and.callFake(function(msg) {\n      alert_msg = msg;\n    });\n  }));\n\n  it('should attach a list of currencies to the scope', function () {\n    expect(scope.currencies.length).toBe(4);\n    expect(scope.currencies).toEqual(expected);\n  });\n\n  it('when total() is called returns the calculated value', function () {\n    expect(scope.total('USD')).toBe(0.02);\n    expect(scope.total('EUR')).toBe(0.02);\n    expect(scope.total('CYN')).toBe(0.12);\n    expect(scope.total('JPY')).toBe(2);\n  });\n\n  it('when pay() is called returns the correct alert message', function () {\n    expect(alert_msg).toEqual('_defalut_');\n    scope.pay();\n    expect(alert_msg).toEqual('Thanks!');\n  });\n});\n```\n\n\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3068\u3001\n\u307e\u305a\u4f8b\u306b\u306a\u3089\u3063\u3066\u3001\u6700\u521d\u306e`beforeEach`\u3067\u4f7f\u7528\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u6b21\u306e`beforeEach`\u3067\u306f`scope`\u3068\u30c6\u30b9\u30c8\u5bfe\u8c61\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc`ctrl`\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n\u3055\u3089\u306b\u3001\u3053\u3053\u3067`SampleService`\u306e\u95a2\u6570`convert`\u306b\u306fJasmine\u306eSpy\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u4ee3\u5f79\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u306f`convert`\u304c\u5916\u90e8\u306e\u51e6\u7406\u3092\u547c\u3073\u51fa\u3057\u305f\u7d50\u679c\u3092\u7528\u3044\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\n\u307e\u305f\u3001alert\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u306b\u3082Spy\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002Spy\u3061\u3083\u3093\u4fbf\u5229\u3061\u3083\u3093\u3002\n\n# \u53c2\u8003\n\u30fb[AngularJS\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u66f8\u304f](http://qiita.com/opengl-8080/items/f150dc723509b2871d93)\n\u30fb[Jasmine\u306eSpy\u6a5f\u80fd\u3067\u30c6\u30b9\u30c8\u30c0\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b](http://www.buildinsider.net/web/bookjslib111/109)\n\u30fb[Unit Testing $http service in Angular.js](http://jasonmore.net/unit-testing-http-service-angular-js/)\n\u30fb[Alert! Testing Javascript's alert function with Jasmine](http://blog.q-media.com/2013/02/alert-testing-javascripts-alert.html)\n", "tags": ["AngularJS", "jasmine"]}