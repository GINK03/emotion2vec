{"context": " More than 1 year has passed since last update.S3\u306eVersioning\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u308b\u3068\uff0caws s3 rm\u3068\u304b\u3084\u3063\u3066\u3082\u5b9f\u4f53\u306f\u524a\u9664\u3055\u308c\u3066\u304a\u3089\u305a\uff0c\u524a\u9664\u6e08\u307f\u3068\u3044\u3046\u76ee\u5370(DeleteMarker)\u304c\u4ed8\u3044\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\uff0e\n\u3053\u306e\u72b6\u614b\u3067\u5f53\u8a72\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308d\u3046\u3068\u3057\u3066\u3082\nuraura@rosemary$ aws s3api get-object --bucket target-bucket --key db.dump.gz ./db.dump.gz\n\nA client error (NoSuchKey) occurred when calling the GetObject operation: The specified key does not exist.\n\n\u3068\uff0c\u60b2\u3057\u3044\u601d\u3044\u3092\u3057\u307e\u3059\uff0e(\u307e\u3041\u524a\u9664\u3057\u305f\u3093\u3060\u304b\u3089\u5f53\u7136\u3067\u3059\u306d\uff0e\uff0e\uff0e)\n\u305d\u3053\u3067\uff0cDeleteMarkers\u306e\u4ed8\u3044\u3066\u306a\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u8abf\u3079\u307e\u3059\uff0e\nuraura@rosemary$ aws s3api list-object-versions --bucket target-bucket --prefix db.dump.gz\n{\n    \"DeleteMarkers\": [\n        {\n            \"Owner\": {\n                \"DisplayName\": \"admin\",\n                \"ID\": \"87428fc522803d31065e7bce3cf03fe475096631e5e07bbd7a0fde60c4cf25c7\"\n            },\n            \"IsLatest\": true,\n            \"VersionId\": \"uZALiONs1lXzsJBvjv.jgnLSdBrHfCox\",\n            \"Key\": \"db.dump.gz\",\n            \"LastModified\": \"2015-10-30T17:55:38.000Z\"\n        }\n    ],\n    \"CommonPrefixes\": [],\n    \"Versions\": [\n        {\n            \"LastModified\": \"2015-09-30T17:55:30.000Z\",\n            \"VersionId\": \"b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx\",\n            \"ETag\": \"\\\"712fe04afa2e31dee3583dc6586bf74a-11\\\"\",\n            \"StorageClass\": \"STANDARD\",\n            \"Key\": \"db.dump.gz\",\n            \"Owner\": {\n                \"DisplayName\": \"admin\",\n                \"ID\": \"87428fc522803d31065e7bce3cf03fe475096631e5e07bbd7a0fde60c4cf25c7\"\n            },\n            \"IsLatest\": false,\n            \"Size\": 80885743\n        }\n    ]\n}\n\n\u3053\u306e\u5834\u5408\u306f\"VersionId\": \"b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx\"\u3067\u3088\u3055\u305d\u3046\u3067\u3059\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u307e\u3067\u6307\u5b9a\u3057\u3066\u547c\u3073\u3060\u3057\u3066\u3084\u308a\u307e\u3057\u3087\u3046\uff0e\nuraura@rosemary$ aws s3api get-object --bucket target-bucket --key db.dump.gz --version-id b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx ./db.dump.gz\n{\n    \"AcceptRanges\": \"bytes\",\n    \"ContentType\": \"binary/octet-stream\",\n    \"LastModified\": \"Wed, 30 Sep 2015 17:55:30 GMT\",\n    \"ContentLength\": 80885743,\n    \"VersionId\": \"b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx\",\n    \"ETag\": \"\\\"712fe04afa2e31dee3583dc6586bf74a-11\\\"\",\n    \"Metadata\": {}\n}\n\n\n\u307e\u3068\u3081\naws s3api\u3063\u3066\u3042\u3093\u307e\u308a\u4f7f\u3063\u3066\u306a\u304b\u3063\u305f\u3051\u3069\u4fbf\u5229\u3084\u3093\nS3\u306eVersioning\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u308b\u3068\uff0c`aws s3 rm`\u3068\u304b\u3084\u3063\u3066\u3082\u5b9f\u4f53\u306f\u524a\u9664\u3055\u308c\u3066\u304a\u3089\u305a\uff0c\u524a\u9664\u6e08\u307f\u3068\u3044\u3046\u76ee\u5370(DeleteMarker)\u304c\u4ed8\u3044\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\uff0e\n\n\u3053\u306e\u72b6\u614b\u3067\u5f53\u8a72\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308d\u3046\u3068\u3057\u3066\u3082\n\n```shell-session\nuraura@rosemary$ aws s3api get-object --bucket target-bucket --key db.dump.gz ./db.dump.gz\n\nA client error (NoSuchKey) occurred when calling the GetObject operation: The specified key does not exist.\n```\n\u3068\uff0c\u60b2\u3057\u3044\u601d\u3044\u3092\u3057\u307e\u3059\uff0e(\u307e\u3041**\u524a\u9664\u3057\u305f**\u3093\u3060\u304b\u3089\u5f53\u7136\u3067\u3059\u306d\uff0e\uff0e\uff0e)\n\n\u305d\u3053\u3067\uff0cDeleteMarkers\u306e\u4ed8\u3044\u3066\u306a\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u8abf\u3079\u307e\u3059\uff0e\n\n```shell-session\nuraura@rosemary$ aws s3api list-object-versions --bucket target-bucket --prefix db.dump.gz\n{\n    \"DeleteMarkers\": [\n        {\n            \"Owner\": {\n                \"DisplayName\": \"admin\",\n                \"ID\": \"87428fc522803d31065e7bce3cf03fe475096631e5e07bbd7a0fde60c4cf25c7\"\n            },\n            \"IsLatest\": true,\n            \"VersionId\": \"uZALiONs1lXzsJBvjv.jgnLSdBrHfCox\",\n            \"Key\": \"db.dump.gz\",\n            \"LastModified\": \"2015-10-30T17:55:38.000Z\"\n        }\n    ],\n    \"CommonPrefixes\": [],\n    \"Versions\": [\n        {\n            \"LastModified\": \"2015-09-30T17:55:30.000Z\",\n            \"VersionId\": \"b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx\",\n            \"ETag\": \"\\\"712fe04afa2e31dee3583dc6586bf74a-11\\\"\",\n            \"StorageClass\": \"STANDARD\",\n            \"Key\": \"db.dump.gz\",\n            \"Owner\": {\n                \"DisplayName\": \"admin\",\n                \"ID\": \"87428fc522803d31065e7bce3cf03fe475096631e5e07bbd7a0fde60c4cf25c7\"\n            },\n            \"IsLatest\": false,\n            \"Size\": 80885743\n        }\n    ]\n}\n```\n\n\u3053\u306e\u5834\u5408\u306f`\"VersionId\": \"b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx\"`\u3067\u3088\u3055\u305d\u3046\u3067\u3059\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u307e\u3067\u6307\u5b9a\u3057\u3066\u547c\u3073\u3060\u3057\u3066\u3084\u308a\u307e\u3057\u3087\u3046\uff0e\n\n```shell-session\nuraura@rosemary$ aws s3api get-object --bucket target-bucket --key db.dump.gz --version-id b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx ./db.dump.gz\n{\n    \"AcceptRanges\": \"bytes\",\n    \"ContentType\": \"binary/octet-stream\",\n    \"LastModified\": \"Wed, 30 Sep 2015 17:55:30 GMT\",\n    \"ContentLength\": 80885743,\n    \"VersionId\": \"b8O0kCjQYrPvtMNXTGRayqRe.U11dxzx\",\n    \"ETag\": \"\\\"712fe04afa2e31dee3583dc6586bf74a-11\\\"\",\n    \"Metadata\": {}\n}\n```\n\n# \u307e\u3068\u3081\n`aws s3api`\u3063\u3066\u3042\u3093\u307e\u308a\u4f7f\u3063\u3066\u306a\u304b\u3063\u305f\u3051\u3069\u4fbf\u5229\u3084\u3093\n", "tags": ["S3", "AWS", "aws-cli"]}