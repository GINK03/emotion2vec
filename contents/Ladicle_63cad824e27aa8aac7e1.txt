{"context": "\n\n\u306f\u3058\u3081\u306b\nKubernetes\u306ehelm\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b?\nhelm\u306f\u3001apt\u3084yum\u306e\u69d8\u306aKubernetes\u7248\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u3067\u3059\u3002\n\u4eca\u5e74\u306e6\u6708\u3054\u308d\u306bk8s meetup Tokyo #2\u3067helm\u306e\u8a71\u3092\u3057\u305f\u6642\u306f\u307e\u3060\u4f7f\u3048\u308b\u72b6\u614b\u3067\u306f\u306a\u304f\nhelm\u306e\u5143\u3068\u306a\u3063\u3066\u3044\u308bDeis\u306ehelm-classic\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u3066\u3044\u307e\u3057\u305f\u3002[\u53c2\u7167]\n\u73fe\u5728\u306ehelm\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.1.3\u3001\u5341\u5206\u306b\u4f7f\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\nhelm-classic\u306b\u306fPetSet\u3084ScheduledJob\u306a\u3069\u65b0\u6a5f\u80fd\u306b\u5bfe\u5fdc\u3057\u7121\u3044\u306e\u3067hlem\u3078\u306e\u79fb\u884c\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\n\n\u7528\u8a9e\n\u8aad\u307f\u9032\u3081\u3066\u3044\u304f\u306b\u3042\u305f\u308a\u6700\u4f4e\u9650\u5fc5\u8981\u306a\u7528\u8a9e\u306e\u5b9a\u7fa9\u3067\u3059\u3002\n\n\n\nName\nDescription\n\n\n\n\nPackage\n\nJenkins, Spark\u306a\u3069\u306ehelm\u3092\u4f7f\u3063\u3066k8s\u4e0a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n\n\nChart\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306b\u306aService/Deployment/ConfigMap\u306a\u3069\u306eYAML(JSON)\u306e\u30d5\u30a1\u30a4\u30eb\u7fa4\n\n\nRelease\nk8s\u4e0a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\n\n\n\n\n\u4f7f\u3044\u304b\u305f\n\nhelm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306fGithub\u306erelease\u30da\u30fc\u30b8\u304b\u3089\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306b\u3042\u3063\u305f\u30d0\u30a4\u30ca\u30ea\u3092\u843d\u3068\u3057\u3066\u304d\u3066\u3088\u3057\u306a\u306b\u914d\u7f6e\u3059\u308b\u3060\u3051\u3002\n\u305f\u3060\u3057\u3001\u521d\u56de\u306e\u307f\u521d\u671f\u8a2d\u5b9a\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\nhelm init\n\n\u3092\u5b9f\u884c\u3059\u308b\u3068$HOME/.helm\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u914d\u7f6e\u3055\u308c\ntailer\u304ck8s\u4e0a\u306b\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002(\u3053\u3061\u3089\u306e\u8a73\u7d30\u306f\u6b21\u7ae0)\n\n\u6ce8\u610f\nkubectl\u304chelm init\u3092\u5b9f\u884c\u3059\u308b\u74b0\u5883\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\nk8s\u306f\u30d0\u30fc\u30b8\u30e7\u30f31.4\u4ee5\u964d\u3067\u3042\u308b\u3053\u3068\n\n\n\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u78ba\u8a8d\u3059\u308b\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8ffd\u52a0\u306e\u524d\u306b\u4e00\u65e6\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u78ba\u8a8d\u3068\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306fGCP\u3092\u5411\u3044\u3066\u307e\u3059\u304c\u3001\u3053\u306e\u4e2d\u8eab\u306fcharts\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n# \u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u4e00\u89a7\u8868\u793a\n$ helm repo list\nNAME    URL\nstable  https://kubernetes-charts.storage.googleapis.com/\nlocal   http://127.0.0.1:8879/charts\n\n# \u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n$ helm repo update\nHang tight while we grab the latest from your chart repositories...\n...Successfully got an update from the \"stable\" chart repository\nUpdate Complete. \u2388 Happy Helming!\u2388\n\n\u30ec\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7\u306e\u4e2d\u306blocal\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u5358\u7d14\u306b\u8a72\u5f53\u30a2\u30c9\u30ec\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3082\u7e4b\u304c\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u306fserve\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nserve\u3092\u5b9f\u884c\u3059\u308b\u3068$HELM_HOME/repository/local\u5185\u306echarts\u304c\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u8d77\u52d5\u3057\u3066\u3044\u306a\u3044\n$ curl http://127.0.0.1:8879/charts\ncurl: (7) Failed to connect to 127.0.0.1 port 8879: Connection refused\n\n# \u30ed\u30fc\u30ab\u30eb\u306echarts\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3059\u308b\n$ helm serve\nRegenerating index. This may take a moment.\nNow serving you on 127.0.0.1:8879\n\n# \u5225\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u4e0a\u3067\u5b9f\u884c\n$ curl localhost:8879\n<html>\n<head>\n        <title>Helm Repository</title>\n</head>\n<h1>Helm Charts Repository</h1>\n<ul>\n\n</ul>\n<body>\n<p>Last Generated: 2016-12-25 17:40:23.95566401 &#43;0900 JST</p>\n</body>\n</html>\n\n\nk8s\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u8a66\u3057\u306bgrafana\u3092k8s\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\u540d\u524d\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3068\u308a\u3042\u3048\u305asearch\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n# search\u306b\u306a\u306b\u3082\u5f15\u6570\u3092\u6e21\u3055\u306a\u3044\u3068\u5168\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\n$ helm search grafana\nNAME            VERSION DESCRIPTION\nstable/grafana  0.2.0   A Helm chart for Kubernetes\n\nstabl/grafana\u3068\u3044\u3046\u306e\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\u3053\u306estable\u3068\u3044\u3046\u90e8\u5206\u306f\u3001\u30ec\u30dd\u30b8\u30c8\u30ea\u540d\u3068\u4e00\u81f4\u3057\u3066\u3044\u307e\u3059\u3002\n\u3088\u3063\u3066\u3001\u524d\u7ae0\u3067\u51fa\u3066\u304d\u305fstable\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u4e2d\u306b\u5b58\u5728\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u3067\u306f\u3001\u3053\u308c\u3092install\u30b3\u30de\u30f3\u30c9\u3067k8s\u4e0a\u306b\u7acb\u3061\u4e0a\u3052\u3066\u307f\u307e\u3059\u3002\n# grafana\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n$ helm install stable/grafana\n\nNAME:   auxilliary-leopard\nLAST DEPLOYED: Sun Dec 25 17:57:19 2016\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==> v1/Service\nNAME                         CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE\nauxilliary-leopard-grafana   10.108.32.18   <none>        80/TCP    1s\n\n==> extensions/Deployment\nNAME                         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nauxilliary-leopard-grafana   1         1         1            0           1s\n\n==> v1/PersistentVolumeClaim\nNAME                         STATUS    VOLUME    CAPACITY   ACCESSMODES   AGE\nauxilliary-leopard-grafana   Pending                                      1s\n\n==> v1/Secret\nNAME                         TYPE      DATA      AGE\nauxilliary-leopard-grafana   Opaque    2         1s\n\n==> v1/ConfigMap\nNAME                                DATA      AGE\nauxilliary-leopard-grafana-config   1         1s\nauxilliary-leopard-grafana-dashs   0         1s\n\n\nNOTES:\n1. Get your 'admin' user password by running:\n\n   printf $(printf '\\%o' `kubectl get secret --namespace default auxilliary-leopard-grafana -o jsonpath=\"{.data.grafana-admin-password[*]}\"`);echo\n\n2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster:\n\n   auxilliary-leopard-grafana.default.svc.cluster.local\n\n   Get the Grafana URL to visit by running these commands in the same shell:\n\n     export POD_NAME=$(kubectl get pods --namespace default -l \"app=auxilliary-leopard-grafana,component=grafana\" -o jsonpath=\"{.items[0].metadata.name}\")\n     kubectl --namespace default port-forward $POD_NAME 3000\n\n3. Login with the password from step 1 and the username: admin\n\n# k8s\u4e0a\u3067\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n$ kubectl get po\nNAME                                          READY     STATUS    RESTARTS   AGE\nauxilliary-leopard-grafana-2846005379-p35ss   0/1       Running   0          2m\n\n# helm\u3067\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u3082\u306e\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\n$ helm list\nNAME                    REVISION        UPDATED                         STATUS          CHART\nauxilliary-leopard      1               Sun Dec 25 17:57:19 2016        DEPLOYED        grafana-0.2.0\n\n# \u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u8868\u793a\u3059\u308b\n$ helm status auxilliary-leopard\nLAST DEPLOYED: Sun Dec 25 17:57:19 2016\nNAMESPACE: default\n~~ \u7701\u7565 ~~\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\ngrafana\u3067\u306f\u3001Service/Deployment/PersistentVolumeClaim/Secret/ConfigMap\u306e5\u3064\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\u3053\u308c\u306f\u3001\u6a19\u6e96\u51fa\u529b\u306b\u5410\u304d\u51fa\u3055\u308c\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u4e00\u89a7\u304b\u3089\u308f\u304b\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001list\u30b3\u30de\u30f3\u30c9\u3067\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e00\u89a7\u3084\u3001status\u3067\u5358\u4f53\u306e\u72b6\u614b\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nhelm\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\n\u601d\u60f3\u3068\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\nhelm\u306f12FactorApp\u306b\u5247\u3063\u3066\u3044\u3066\u3001Chart(Template + Config)\u3092Relase\u3068\u3057\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nRelease\u306fupgrade\u30b3\u30de\u30f3\u30c9\u3067\u4fee\u6b63\u5185\u5bb9\u306e\u9069\u7528\u3001\u554f\u984c\u304c\u3042\u308c\u3070rollback\u30b3\u30de\u30f3\u30c9\u3067\u5143\u306b\u623b\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\nRelease\u306e\u30ea\u30d3\u30b8\u30e7\u30f3\u9077\u79fb\u306fhistory\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ helm history angry-bird\nREVISION   UPDATED                      STATUS           CHART\n1           Mon Oct 3 10:15:13 2016     SUPERSEDED      alpine-0.1.0\n2           Mon Oct 3 10:15:13 2016     SUPERSEDED      alpine-0.1.0\n3           Mon Oct 3 10:15:13 2016     DEPLOYED        alpine-0.1.0\n\n\n\u69cb\u6210\u3068\u901a\u4fe1\u65b9\u6cd5\n\u4e3b\u306a\u69cb\u6210\u8981\u7d20\u306fhelm, Repository, tiller\u306e3\u3064\u3067\u3059\u3002\nhelm\u306fChart\u306e\u3001tiller\u306fRelease\u306e\u7ba1\u7406\u3092\u884c\u3063\u3066\u3044\u3066\u3001\u3056\u3063\u304f\u308a\u6a5f\u80fd\u3092\u6319\u3052\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3002\n\nHelm\n\n\u30ed\u30fc\u30ab\u30eb\u306echart\u958b\u767a\n\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u7ba1\u7406\n\nTiller\u30b5\u30fc\u30d0\u3068\u306e\u901a\u4fe1\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bchart\u306e\u9001\u4fe1\n\nRelease\u60c5\u5831\u306e\u53d6\u5f97\n\nRelease\u306b\u5bfe\u3059\u308b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3084\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u8981\u6c42\n\n\n\n\nTiller\n\nHelm\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u53d7\u4ed8\n\nchart\u3068configuration\u3092\u7d44\u307f\u5408\u308f\u305b\u305frelease\u306e\u30d3\u30eb\u30c9\n\nchart\u3092k8s\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001release\u3092\u30c8\u30e9\u30c3\u30af\u3059\u308b\nk8s\u3078chart\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3068\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3059\u308b\n\n\nhelm\u3068tiller\u9593\u306e\u901a\u4fe1\u306fgRPC\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u3066\u3001tiller\u304cgRPC\u30b5\u30fc\u30d0\u306e\u5f79\u76ee\u3092\u3082\u3063\u3066\u3044\u307e\u3059\u3002\nk8s\u3068tailler\u9593\u306f\u5358\u7d14\u306bK8s\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u53e9\u3044\u3066\u3044\u308b\u306e\u3067REST+JSON\u3067\u901a\u4fe1\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001tiller\u306e\u60c5\u5831\u306fk8s\u306eConfigMap\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001DB\u306f\u4fdd\u6301\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u529b\u5c3d\u304d\u305f\u306e\u3067\u3053\u3053\u3089\u8fba\u3067\u6b62\u3081\u3066\u304a\u304d\u307e\u3059\u3002\nCharts\u306e\u4f5c\u308a\u65b9\u3084helmc\u304b\u3089\u306e\u79fb\u884c\u306f\u307e\u305f\u3069\u3053\u304b\u3067...\n\n\n\u4eca\u5f8c\u3069\u3046\u306a\u308b\u306e\u304b?\n\u30ed\u30fc\u30c9\u30de\u30c3\u30d7\u306fGithub\u306eWiki\u3067\u516c\u958b\u3055\u308c\u3066\u307e\u3059\u3002\nhttps://github.com/kubernetes/helm/wiki/Roadmap\n\u5927\u304d\u306a\u5909\u66f4\u3068\u3057\u3066\u306f\u3001Man\u30da\u30fc\u30b8\u3092\u4f5c\u308c\u308b\u3088\u3046\u306b\u3059\u308bdoc\u30b3\u30de\u30f3\u30c9\u3084\u30ec\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u8a8d\u8a3c\u6a5f\u80fd\u306e\u8ffd\u52a0\u3067\u3059\u3002\n\n\u304a\u308f\u308a\u306b\nhelm\u306f\u958b\u767a\u3082\u6d3b\u767a\u306a\u306e\u3067\u4eca\u5f8c\u3082\u3069\u3093\u3069\u3093\u4fbf\u5229\u306b\u306a\u3063\u3066\u3044\u304d\u305d\u3046\u3067\u3059\u3002\n\u2388 Happy Helming!\u2388\n## \u306f\u3058\u3081\u306b\nKubernetes\u306e`helm`\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b?\n`helm`\u306f\u3001`apt`\u3084`yum`\u306e\u69d8\u306aKubernetes\u7248\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u3067\u3059\u3002\n\n\u4eca\u5e74\u306e6\u6708\u3054\u308d\u306b[k8s meetup Tokyo #2](https://k8sjp.connpass.com/event/33508/)\u3067helm\u306e\u8a71\u3092\u3057\u305f\u6642\u306f\u307e\u3060\u4f7f\u3048\u308b\u72b6\u614b\u3067\u306f\u306a\u304f\n`helm`\u306e\u5143\u3068\u306a\u3063\u3066\u3044\u308bDeis\u306e`helm-classic`\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u3066\u3044\u307e\u3057\u305f\u3002[[\u53c2\u7167](https://speakerdeck.com/ladicle/kubernetes-helm-and-helmc?slide=1)]\n\n\u73fe\u5728\u306e`helm`\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.1.3\u3001\u5341\u5206\u306b\u4f7f\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n`helm-classic`\u306b\u306f`PetSet`\u3084`ScheduledJob`\u306a\u3069\u65b0\u6a5f\u80fd\u306b\u5bfe\u5fdc\u3057\u7121\u3044\u306e\u3067`hlem`\u3078\u306e\u79fb\u884c\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\n\n## \u7528\u8a9e\n\n\u8aad\u307f\u9032\u3081\u3066\u3044\u304f\u306b\u3042\u305f\u308a\u6700\u4f4e\u9650\u5fc5\u8981\u306a\u7528\u8a9e\u306e\u5b9a\u7fa9\u3067\u3059\u3002\n\n|Name|Description|\n|----|-----------|\n|Package|`Jenkins`, `Spark`\u306a\u3069\u306e`helm`\u3092\u4f7f\u3063\u3066k8s\u4e0a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3|\n|Chart|\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306b\u306a`Service`/`Deployment`/`ConfigMap`\u306a\u3069\u306eYAML(JSON)\u306e\u30d5\u30a1\u30a4\u30eb\u7fa4|\n|Release|k8s\u4e0a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30d1\u30c3\u30b1\u30fc\u30b8|\n\n## \u4f7f\u3044\u304b\u305f\n\n### helm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306fGithub\u306e[release](https://github.com/kubernetes/helm/releases)\u30da\u30fc\u30b8\u304b\u3089\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306b\u3042\u3063\u305f\u30d0\u30a4\u30ca\u30ea\u3092\u843d\u3068\u3057\u3066\u304d\u3066\u3088\u3057\u306a\u306b\u914d\u7f6e\u3059\u308b\u3060\u3051\u3002\n\u305f\u3060\u3057\u3001\u521d\u56de\u306e\u307f\u521d\u671f\u8a2d\u5b9a\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\nhelm init\n```\n\u3092\u5b9f\u884c\u3059\u308b\u3068`$HOME/.helm`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u914d\u7f6e\u3055\u308c\n`tailer`\u304ck8s\u4e0a\u306b\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002(\u3053\u3061\u3089\u306e\u8a73\u7d30\u306f\u6b21\u7ae0)\n\n> **\u6ce8\u610f**\n> kubectl\u304c`helm init`\u3092\u5b9f\u884c\u3059\u308b\u74b0\u5883\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\n> k8s\u306f\u30d0\u30fc\u30b8\u30e7\u30f31.4\u4ee5\u964d\u3067\u3042\u308b\u3053\u3068\n\n### \u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u78ba\u8a8d\u3059\u308b\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8ffd\u52a0\u306e\u524d\u306b\u4e00\u65e6\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u78ba\u8a8d\u3068\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306fGCP\u3092\u5411\u3044\u3066\u307e\u3059\u304c\u3001\u3053\u306e\u4e2d\u8eab\u306f[charts](https://github.com/kubernetes/charts)\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```bash\n# \u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u4e00\u89a7\u8868\u793a\n$ helm repo list\nNAME    URL\nstable  https://kubernetes-charts.storage.googleapis.com/\nlocal   http://127.0.0.1:8879/charts\n\n# \u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n$ helm repo update\nHang tight while we grab the latest from your chart repositories...\n...Successfully got an update from the \"stable\" chart repository\nUpdate Complete. \u2388 Happy Helming!\u2388\n```\n\n\u30ec\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7\u306e\u4e2d\u306b`local`\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u5358\u7d14\u306b\u8a72\u5f53\u30a2\u30c9\u30ec\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3082\u7e4b\u304c\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u306f`serve`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n`serve`\u3092\u5b9f\u884c\u3059\u308b\u3068`$HELM_HOME/repository/local`\u5185\u306e`charts`\u304c\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u8d77\u52d5\u3057\u3066\u3044\u306a\u3044\n$ curl http://127.0.0.1:8879/charts\ncurl: (7) Failed to connect to 127.0.0.1 port 8879: Connection refused\n\n# \u30ed\u30fc\u30ab\u30eb\u306echarts\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3059\u308b\n$ helm serve\nRegenerating index. This may take a moment.\nNow serving you on 127.0.0.1:8879\n\n# \u5225\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u4e0a\u3067\u5b9f\u884c\n$ curl localhost:8879\n<html>\n<head>\n        <title>Helm Repository</title>\n</head>\n<h1>Helm Charts Repository</h1>\n<ul>\n\n</ul>\n<body>\n<p>Last Generated: 2016-12-25 17:40:23.95566401 &#43;0900 JST</p>\n</body>\n</html>\n```\n\n### k8s\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u8a66\u3057\u306bgrafana\u3092k8s\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\u540d\u524d\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3068\u308a\u3042\u3048\u305a`search`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n\n```bash\n# search\u306b\u306a\u306b\u3082\u5f15\u6570\u3092\u6e21\u3055\u306a\u3044\u3068\u5168\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\n$ helm search grafana\nNAME            VERSION DESCRIPTION\nstable/grafana  0.2.0   A Helm chart for Kubernetes\n```\n\n`stabl/grafana`\u3068\u3044\u3046\u306e\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\u3053\u306e`stable`\u3068\u3044\u3046\u90e8\u5206\u306f\u3001\u30ec\u30dd\u30b8\u30c8\u30ea\u540d\u3068\u4e00\u81f4\u3057\u3066\u3044\u307e\u3059\u3002\n\u3088\u3063\u3066\u3001\u524d\u7ae0\u3067\u51fa\u3066\u304d\u305f`stable`\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u4e2d\u306b\u5b58\u5728\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u3067\u306f\u3001\u3053\u308c\u3092`install`\u30b3\u30de\u30f3\u30c9\u3067k8s\u4e0a\u306b\u7acb\u3061\u4e0a\u3052\u3066\u307f\u307e\u3059\u3002\n\n```bash\n# grafana\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n$ helm install stable/grafana\n\nNAME:   auxilliary-leopard\nLAST DEPLOYED: Sun Dec 25 17:57:19 2016\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==> v1/Service\nNAME                         CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE\nauxilliary-leopard-grafana   10.108.32.18   <none>        80/TCP    1s\n\n==> extensions/Deployment\nNAME                         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nauxilliary-leopard-grafana   1         1         1            0           1s\n\n==> v1/PersistentVolumeClaim\nNAME                         STATUS    VOLUME    CAPACITY   ACCESSMODES   AGE\nauxilliary-leopard-grafana   Pending                                      1s\n\n==> v1/Secret\nNAME                         TYPE      DATA      AGE\nauxilliary-leopard-grafana   Opaque    2         1s\n\n==> v1/ConfigMap\nNAME                                DATA      AGE\nauxilliary-leopard-grafana-config   1         1s\nauxilliary-leopard-grafana-dashs   0         1s\n\n\nNOTES:\n1. Get your 'admin' user password by running:\n\n   printf $(printf '\\%o' `kubectl get secret --namespace default auxilliary-leopard-grafana -o jsonpath=\"{.data.grafana-admin-password[*]}\"`);echo\n\n2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster:\n\n   auxilliary-leopard-grafana.default.svc.cluster.local\n\n   Get the Grafana URL to visit by running these commands in the same shell:\n\n     export POD_NAME=$(kubectl get pods --namespace default -l \"app=auxilliary-leopard-grafana,component=grafana\" -o jsonpath=\"{.items[0].metadata.name}\")\n     kubectl --namespace default port-forward $POD_NAME 3000\n\n3. Login with the password from step 1 and the username: admin\n\n# k8s\u4e0a\u3067\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n$ kubectl get po\nNAME                                          READY     STATUS    RESTARTS   AGE\nauxilliary-leopard-grafana-2846005379-p35ss   0/1       Running   0          2m\n\n# helm\u3067\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u3082\u306e\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\n$ helm list\nNAME                    REVISION        UPDATED                         STATUS          CHART\nauxilliary-leopard      1               Sun Dec 25 17:57:19 2016        DEPLOYED        grafana-0.2.0\n\n# \u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u8868\u793a\u3059\u308b\n$ helm status auxilliary-leopard\nLAST DEPLOYED: Sun Dec 25 17:57:19 2016\nNAMESPACE: default\n~~ \u7701\u7565 ~~\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\ngrafana\u3067\u306f\u3001`Service`/`Deployment`/`PersistentVolumeClaim`/`Secret`/`ConfigMap`\u306e5\u3064\u304c\u8ffd\u52a0\u3055\u308c\u0010\u307e\u3057\u305f\u3002\u0010\n\u3053\u308c\u306f\u3001\u6a19\u6e96\u51fa\u529b\u306b\u5410\u304d\u51fa\u3055\u308c\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u4e00\u89a7\u304b\u3089\u308f\u304b\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001`list`\u30b3\u30de\u30f3\u30c9\u3067\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e00\u89a7\u3084\u3001status\u3067\u5358\u4f53\u306e\u72b6\u614b\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n## helm\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\n### \u601d\u60f3\u3068\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\n\n`helm`\u306f[12FactorApp](http://12factor.net/)\u306b\u5247\u3063\u3066\u3044\u3066\u3001Chart(Template + Config)\u3092Relase\u3068\u3057\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nRelease\u306f`upgrade`\u30b3\u30de\u30f3\u30c9\u3067\u0010\u4fee\u6b63\u5185\u5bb9\u306e\u9069\u7528\u3001\u554f\u984c\u304c\u3042\u308c\u3070`rollback`\u30b3\u30de\u30f3\u30c9\u3067\u5143\u306b\u623b\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\nRelease\u306e\u30ea\u30d3\u30b8\u30e7\u30f3\u9077\u79fb\u306f`history`\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ helm history angry-bird\nREVISION   UPDATED                      STATUS           CHART\n1           Mon Oct 3 10:15:13 2016     SUPERSEDED      alpine-0.1.0\n2           Mon Oct 3 10:15:13 2016     SUPERSEDED      alpine-0.1.0\n3           Mon Oct 3 10:15:13 2016     DEPLOYED        alpine-0.1.0\n```\n\n### \u69cb\u6210\u3068\u901a\u4fe1\u65b9\u6cd5\n\n\u4e3b\u306a\u69cb\u6210\u8981\u7d20\u306f`helm`, `Repository`, `tiller`\u306e3\u3064\u3067\u3059\u0010\u3002\n`helm`\u306f`Chart`\u306e\u3001`tiller`\u306f`Release`\u306e\u7ba1\u7406\u3092\u884c\u3063\u3066\u3044\u3066\u3001\u3056\u3063\u304f\u308a\u6a5f\u80fd\u3092\u6319\u3052\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3002\n\n#### Helm\n* \u30ed\u30fc\u30ab\u30eb\u306e`chart`\u958b\u767a\n* \u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u7ba1\u7406\n* `Tiller`\u30b5\u30fc\u30d0\u3068\u306e\u901a\u4fe1\n    * \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b`chart`\u306e\u9001\u4fe1\n    * `Release`\u60c5\u5831\u306e\u53d6\u5f97\n    * `Release`\u306b\u5bfe\u3059\u308b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3084\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u8981\u6c42\n\n#### Tiller\n* Helm\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u53d7\u4ed8\n* `chart`\u3068`configuration`\u3092\u7d44\u307f\u5408\u308f\u305b\u305f`release`\u306e\u30d3\u30eb\u30c9\n* `chart`\u3092k8s\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001`release`\u3092\u30c8\u30e9\u30c3\u30af\u3059\u308b\n* k8s\u3078`chart`\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3068\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3059\u308b\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/26683/c0eaeebb-abe9-8b12-c27d-4b07845f548a.png)\n\n`helm`\u3068`tiller`\u9593\u306e\u901a\u4fe1\u306fgRPC\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u3066\u3001`tiller`\u304cgRPC\u30b5\u30fc\u30d0\u306e\u5f79\u76ee\u3092\u3082\u3063\u3066\u3044\u307e\u3059\u3002\n`k8s`\u3068`tailler`\u9593\u306f\u5358\u7d14\u306bK8s\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u53e9\u3044\u3066\u3044\u308b\u306e\u3067REST+JSON\u3067\u901a\u4fe1\u0010\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001`tiller`\u306e\u60c5\u5831\u306fk8s\u306eConfigMap\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001DB\u306f\u4fdd\u6301\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n\n> \u529b\u5c3d\u304d\u305f\u306e\u3067\u3053\u3053\u3089\u8fba\u3067\u6b62\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n> Charts\u306e\u4f5c\u308a\u65b9\u3084helmc\u304b\u3089\u306e\u79fb\u884c\u306f\u307e\u305f\u3069\u3053\u304b\u3067...\n\n## \u4eca\u5f8c\u3069\u3046\u306a\u308b\u306e\u304b?\n\n\u30ed\u30fc\u30c9\u30de\u30c3\u30d7\u306fGithub\u306eWiki\u3067\u516c\u958b\u3055\u308c\u3066\u307e\u3059\u3002\nhttps://github.com/kubernetes/helm/wiki/Roadmap\n\u5927\u304d\u306a\u5909\u66f4\u3068\u3057\u3066\u306f\u3001Man\u30da\u30fc\u30b8\u3092\u4f5c\u308c\u308b\u3088\u3046\u306b\u3059\u308b`doc`\u30b3\u30de\u30f3\u30c9\u3084\u30ec\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u8a8d\u8a3c\u6a5f\u80fd\u306e\u8ffd\u52a0\u3067\u3059\u3002\n\n## \u304a\u308f\u308a\u306b\n\nhelm\u306f\u958b\u767a\u3082\u6d3b\u767a\u306a\u306e\u3067\u4eca\u5f8c\u3082\u3069\u3093\u3069\u3093\u4fbf\u5229\u306b\u306a\u3063\u3066\u3044\u304d\u305d\u3046\u3067\u3059\u3002\n\u2388 Happy Helming!\u2388\n", "tags": ["kubernetes"]}