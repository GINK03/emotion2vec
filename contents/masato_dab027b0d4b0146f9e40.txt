{"context": " More than 1 year has passed since last update.IDCF\u30af\u30e9\u30a6\u30c9\u306eCoreOS\u30af\u30e9\u30b9\u30bf\u306bCouchbase Server 3.0.1\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u3002Couchbase Server\u306e\u30af\u30e9\u30b9\u30bf\u306b\u63a5\u7d9a\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30b5\u30a4\u30c8\u306b\u3042\u308bJava SDK 2.0\u3092\u4f7f\u3063\u3066\u3001Hello Couchbase Example\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002CoreOS\u306e\u4eee\u88c5\u30de\u30b7\u30f3\u306e1\u53f0\u306bJava\u958b\u767a\u74b0\u5883\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u7528\u610f\u3057\u3066Gradle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nJava\u958b\u767a\u74b0\u5883\ndockerfile/java\u3092pull\u3057\u3066\u4f7f\u3044\u6368\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u307e\u3059\u3002$JAVA_HOME\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ docker run -it --rm dockerfile/java:oracle-java8\n$ echo $JAVA_HOME\n/usr/lib/jvm/java-8-oracle\n$ java -version\njava version \"1.8.0_25\"\nJava(TM) SE Runtime Environment (build 1.8.0_25-b17)\nJava HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)\n\n\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\u4f5c\u6210\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306fsimple-couchbase\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3042\u308a\u307e\u3059\u3002git clone\u3057\u305f\u3042\u3068gradlew\u3092\u5b9f\u884c\u3059\u308c\u3070Gradle\u306e\u5b9f\u884c\u74b0\u5883\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3059\u3002\n$ git clone https://github.com/masato/simple-couchbase.git\n$ cd simple-couchbase\n$ ./gradlew\n\n\nCouchMain.java\nCouchbase Server\u306b\u63a5\u7d9a\u3059\u308b\u30a2\u30d7\u30ea\u306eMain\u30af\u30e9\u30b9\u3067\u3059\u3002CouchbaseCluster.create(\"10.3.0.47\",\"10.3.0.193\",\"10.3.0.210\");\u306e\u69d8\u306b\u3001\u5f15\u6570\u3078Couchbase Server\u30af\u30e9\u30b9\u30bf\u306e3\u53f0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n~/simple-couchbase/src/main/java/example/CouchMain.java\npackage example;\nimport com.couchbase.client.java.Cluster;\nimport com.couchbase.client.java.CouchbaseCluster;\nimport com.couchbase.client.java.Bucket;\nimport com.couchbase.client.java.document.json.JsonObject;\nimport com.couchbase.client.java.document.Document;\nimport com.couchbase.client.java.document.JsonDocument;\npublic class CouchMain\n{\n    public static void main(String args[])\n    {\n        try {\n            Cluster cluster = CouchbaseCluster.create(\"10.3.0.193\",\"10.3.0.7\",\"10.3.0.210\");\n            Bucket bucket = cluster.openBucket();\n            JsonObject user = JsonObject.empty()\n                .put(\"firstname\", \"Walter\")\n                .put(\"lastname\", \"White\")\n                .put(\"job\", \"chemistry teacher\")\n                .put(\"age\", 50);\n            JsonDocument doc = JsonDocument.create(\"walter\", user);\n            JsonDocument response = bucket.upsert(doc);\n            JsonDocument walter = bucket.get(\"walter\");\n            System.out.println(\"Found: \" + walter);\n            cluster.disconnect();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n\n\nbuild.gradle\nbuild.gradle\u306b\u306fapply plugin: 'application'\u3068mainClassName = 'example.CouchMain'\u3092\u8a18\u8ff0\u3057\u3066\u3001run\u30bf\u30b9\u30af\u304b\u3089Main\u30af\u30e9\u30b9\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002dependencies\u306b\u306fMaven\u304b\u3089java-client:2.0.2\u3092\u53d6\u5f97\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n~/simple-couchbase/build.gradle\napply plugin: 'java'\napply plugin: 'application'\n\nmainClassName = 'example.CouchMain'\n\nrepositories {\n    mavenCentral()\n}\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\ndependencies {\n    compile 'com.couchbase.client:java-client:2.0.2'\n}\n\n\n\n./gradlew run\nCouchbase Server\u306bupsert\u3057\u305fJSON\u3092get\u3057\u3066\u4e2d\u8eab\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n$ cd ~/simple-couchbase\n$ ./gradlew clean run\n...\nFound: JsonDocument{id='walter', cas=255239600078706, expiry=0, content={\"firstname\":\"Walter\",\"job\":\"chemistry teacher\",\"age\":50,\"lastname\":\"White\"}}\n\nIDCF\u30af\u30e9\u30a6\u30c9\u306eCoreOS\u30af\u30e9\u30b9\u30bf\u306bCouchbase Server 3.0.1\u3092[\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](http://qiita.com/masato/items/3b4decb2cf093027c167)\u3057\u307e\u3057\u305f\u3002Couchbase Server\u306e\u30af\u30e9\u30b9\u30bf\u306b\u63a5\u7d9a\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30b5\u30a4\u30c8\u306b\u3042\u308b[Java SDK 2.0](http://docs.couchbase.com/developer/java-2.0/java-intro.html)\u3092\u4f7f\u3063\u3066\u3001[Hello Couchbase Example](http://docs.couchbase.com/developer/java-2.0/hello-couchbase.html)\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002CoreOS\u306e\u4eee\u88c5\u30de\u30b7\u30f3\u306e1\u53f0\u306bJava\u958b\u767a\u74b0\u5883\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u7528\u610f\u3057\u3066Gradle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n## Java\u958b\u767a\u74b0\u5883\n\n[dockerfile/java](https://registry.hub.docker.com/u/dockerfile/java/)\u3092pull\u3057\u3066\u4f7f\u3044\u6368\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u307e\u3059\u3002`$JAVA_HOME`\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n``` bash\n$ docker run -it --rm dockerfile/java:oracle-java8\n$ echo $JAVA_HOME\n/usr/lib/jvm/java-8-oracle\n$ java -version\njava version \"1.8.0_25\"\nJava(TM) SE Runtime Environment (build 1.8.0_25-b17)\nJava HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)\n```\n\n## \u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\n\u4f5c\u6210\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f[simple-couchbase](https://github.com/masato/simple-couchbase)\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3042\u308a\u307e\u3059\u3002`git clone`\u3057\u305f\u3042\u3068gradlew\u3092\u5b9f\u884c\u3059\u308c\u3070Gradle\u306e\u5b9f\u884c\u74b0\u5883\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3059\u3002\n\n``` bash\n$ git clone https://github.com/masato/simple-couchbase.git\n$ cd simple-couchbase\n$ ./gradlew\n```\n\n## CouchMain.java\n\nCouchbase Server\u306b\u63a5\u7d9a\u3059\u308b\u30a2\u30d7\u30ea\u306eMain\u30af\u30e9\u30b9\u3067\u3059\u3002`CouchbaseCluster.create(\"10.3.0.47\",\"10.3.0.193\",\"10.3.0.210\");`\u306e\u69d8\u306b\u3001\u5f15\u6570\u3078Couchbase Server\u30af\u30e9\u30b9\u30bf\u306e3\u53f0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n``` java:~/simple-couchbase/src/main/java/example/CouchMain.java\npackage example;\nimport com.couchbase.client.java.Cluster;\nimport com.couchbase.client.java.CouchbaseCluster;\nimport com.couchbase.client.java.Bucket;\nimport com.couchbase.client.java.document.json.JsonObject;\nimport com.couchbase.client.java.document.Document;\nimport com.couchbase.client.java.document.JsonDocument;\npublic class CouchMain\n{\n    public static void main(String args[])\n    {\n        try {\n            Cluster cluster = CouchbaseCluster.create(\"10.3.0.193\",\"10.3.0.7\",\"10.3.0.210\");\n            Bucket bucket = cluster.openBucket();\n            JsonObject user = JsonObject.empty()\n                .put(\"firstname\", \"Walter\")\n                .put(\"lastname\", \"White\")\n                .put(\"job\", \"chemistry teacher\")\n                .put(\"age\", 50);\n            JsonDocument doc = JsonDocument.create(\"walter\", user);\n            JsonDocument response = bucket.upsert(doc);\n            JsonDocument walter = bucket.get(\"walter\");\n            System.out.println(\"Found: \" + walter);\n            cluster.disconnect();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\n## build.gradle\n\nbuild.gradle\u306b\u306f`apply plugin: 'application'`\u3068`mainClassName = 'example.CouchMain'`\u3092\u8a18\u8ff0\u3057\u3066\u3001run\u30bf\u30b9\u30af\u304b\u3089Main\u30af\u30e9\u30b9\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002dependencies\u306b\u306fMaven\u304b\u3089java-client:2.0.2\u3092\u53d6\u5f97\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n``` groovy:~/simple-couchbase/build.gradle\napply plugin: 'java'\napply plugin: 'application'\n\nmainClassName = 'example.CouchMain'\n\nrepositories {\n    mavenCentral()\n}\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\ndependencies {\n    compile 'com.couchbase.client:java-client:2.0.2'\n}\n```\n\n## ./gradlew run\n\nCouchbase Server\u306bupsert\u3057\u305fJSON\u3092get\u3057\u3066\u4e2d\u8eab\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n``` bash\n$ cd ~/simple-couchbase\n$ ./gradlew clean run\n...\nFound: JsonDocument{id='walter', cas=255239600078706, expiry=0, content={\"firstname\":\"Walter\",\"job\":\"chemistry teacher\",\"age\":50,\"lastname\":\"White\"}}\n```\n", "tags": ["IDCF\u30af\u30e9\u30a6\u30c9", "Couchbase3.0.1", "gradle2.2.1"]}