{"context": "\n\n\u901a\u8fc7 rsync \u53d1\u5e03\u5230\u81ea\u5df1\u7684\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u65b9\u6cd5\n\u4fee\u6539 octopress \u6839\u76ee\u5f55\u4e0b\u7684 Rakefile \u6587\u4ef6\uff1a\nssh_user       = \"user1@[\u670d\u52a1\u5668IP]\"\nssh_port       = \"9981\" # \u670d\u52a1\u5668\u7aef\u53e3\ndocument_root  = \"/data/wwwroot/\"\nrsync_delete   = true # \u540c\u6b65\u5220\u9664\nrsync_args     = \" --omit-dir-times --no-perms \"  # \u9700\u8981\u6307\u5b9a\u7684 rsync \u7684\u53c2\u6570\n\n\nrsync \u547d\u4ee4\u51fa\u9519\u53ca\u89e3\u51b3\u65b9\u6cd5\uff1a\n\u5982\u4e0a\u90e8\u5206\u4ee3\u7801\u6240\u793a\uff0c\u8fd9\u4e24\u4e2a\u9519\u8bef\u5df2\u7ecf\u89e3\u51b3\n\n\n\n\u9519\u8bef\u63cf\u8ff0\n\u5728\u547d\u4ee4\u4e2d\u52a0\u5165\u53c2\u6570\n\n\n\n\nrsync: failed to set permissions on \u2026\n--no-perms\n\n\nrsync error: failed to set times on \u201c.\u201d Operation not permitted\n--omit-dir-times\n\n\n\n\nSSH \u514d\u767b\u5f55\u7684\u65b9\u5f0f\n\u8fd9\u91cc\u65b9\u6cd5\u5176\u5b9e\u7f51\u4e0a\u6709\u5f88\u591a\uff0canyway \u82e5\u6c34\u4e09\u5343\uff0c\u53ea\u53d6\u4e00\u74e2\uff0c\u8fd9\u91cc\u7eaa\u5f55\u662f\u6211\u81ea\u5df1\u4f7f\u7528\u7684\u65b9\u5f0f\uff0c\u4e5f\u6bd4\u8f83\u901a\u7528\n\u5ba2\u6237\u673a\u64cd\u4f5c\u6b65\u9aa4\uff1a\n ssh-keygen -t rsa # \u672c\u5730\u751f\u6210\u516c\u79c1\u94a5\n ssh user1@[\u670d\u52a1\u5668IP] \"mkdir .ssh\" # \u4f7f\u7528\u5c06\u6765\u8981\u767b\u5f55\u5230\u670d\u52a1\u5668\u7684\u7528\u6237\u5728\u5176 home \u76ee\u5f55\u521b\u5efa .ssh \u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u8ba4\u8bc1\u6587\u4ef6\n scp ~/.ssh/id_rsa.pub user1@[\u670d\u52a1\u5668IP]:.ssh/id_rsa.pub # \u5c06\u672c\u5730\u516c\u94a5\u6587\u4ef6\u901a\u8fc7 scp \u4f20\u8f93\u5230\u670d\u52a1\u5668\u7528\u6237\u7684 .ssh \u76ee\u5f55\u4e0b\n\n\u670d\u52a1\u5668\u64cd\u4f5c\u6b65\u9aa4\n touch ~/.ssh/authorized_keys # \u751f\u6210 authorized_keys (\u5982\u679c\u4e0d\u5b58\u5728\u7684\u8bdd)\n cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys # \u5c06\u516c\u94a5\uff08id_rsa.pub\uff09\u7684\u5185\u5bb9\u590d\u5236\u5230 authorized_keys \u6587\u4ef6\n\n\n\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728\u5ba2\u6237\u673a\u4e0a\u4f7f\u7528 ssh user1@[\u670d\u52a1\u5668IP] \u7684\u65b9\u5f0f\u767b\u9646\u670d\u52a1\u5668\u800c\u65e0\u9700\u518d\u8f93\u5165\u5bc6\u7801\n\n####\u901a\u8fc7 rsync \u53d1\u5e03\u5230\u81ea\u5df1\u7684\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u65b9\u6cd5####\n\n\n\u4fee\u6539 octopress \u6839\u76ee\u5f55\u4e0b\u7684 Rakefile \u6587\u4ef6\uff1a\n\n```config\nssh_user       = \"user1@[\u670d\u52a1\u5668IP]\"\nssh_port       = \"9981\" # \u670d\u52a1\u5668\u7aef\u53e3\ndocument_root  = \"/data/wwwroot/\"\nrsync_delete   = true # \u540c\u6b65\u5220\u9664\nrsync_args     = \" --omit-dir-times --no-perms \"  # \u9700\u8981\u6307\u5b9a\u7684 rsync \u7684\u53c2\u6570\n```\n\n####rsync \u547d\u4ee4\u51fa\u9519\u53ca\u89e3\u51b3\u65b9\u6cd5\uff1a####\n\n_\u5982\u4e0a\u90e8\u5206\u4ee3\u7801\u6240\u793a\uff0c\u8fd9\u4e24\u4e2a\u9519\u8bef\u5df2\u7ecf\u89e3\u51b3_\n\n| \u9519\u8bef\u63cf\u8ff0|\u5728\u547d\u4ee4\u4e2d\u52a0\u5165\u53c2\u6570|\n|-------------|------------|\n|rsync: failed to set permissions on \u2026|--no-perms|\n|rsync error: failed to set times on \u201c.\u201d Operation not permitted|--omit-dir-times|\n\n\n####SSH \u514d\u767b\u5f55\u7684\u65b9\u5f0f####\n\n_\u8fd9\u91cc\u65b9\u6cd5\u5176\u5b9e\u7f51\u4e0a\u6709\u5f88\u591a\uff0canyway \u82e5\u6c34\u4e09\u5343\uff0c\u53ea\u53d6\u4e00\u74e2\uff0c\u8fd9\u91cc\u7eaa\u5f55\u662f\u6211\u81ea\u5df1\u4f7f\u7528\u7684\u65b9\u5f0f\uff0c\u4e5f\u6bd4\u8f83\u901a\u7528_\n\n**\u5ba2\u6237\u673a\u64cd\u4f5c\u6b65\u9aa4\uff1a**\n\n```Bash\n ssh-keygen -t rsa # \u672c\u5730\u751f\u6210\u516c\u79c1\u94a5\n ssh user1@[\u670d\u52a1\u5668IP] \"mkdir .ssh\" # \u4f7f\u7528\u5c06\u6765\u8981\u767b\u5f55\u5230\u670d\u52a1\u5668\u7684\u7528\u6237\u5728\u5176 home \u76ee\u5f55\u521b\u5efa .ssh \u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u8ba4\u8bc1\u6587\u4ef6\n scp ~/.ssh/id_rsa.pub user1@[\u670d\u52a1\u5668IP]:.ssh/id_rsa.pub # \u5c06\u672c\u5730\u516c\u94a5\u6587\u4ef6\u901a\u8fc7 scp \u4f20\u8f93\u5230\u670d\u52a1\u5668\u7528\u6237\u7684 .ssh \u76ee\u5f55\u4e0b\n```\n\n**\u670d\u52a1\u5668\u64cd\u4f5c\u6b65\u9aa4**\n\n```Bash\n touch ~/.ssh/authorized_keys # \u751f\u6210 authorized_keys (\u5982\u679c\u4e0d\u5b58\u5728\u7684\u8bdd)\n cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys # \u5c06\u516c\u94a5\uff08id_rsa.pub\uff09\u7684\u5185\u5bb9\u590d\u5236\u5230 authorized_keys \u6587\u4ef6\n\n```\n\n\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728\u5ba2\u6237\u673a\u4e0a\u4f7f\u7528 `ssh user1@[\u670d\u52a1\u5668IP]` \u7684\u65b9\u5f0f\u767b\u9646\u670d\u52a1\u5668\u800c\u65e0\u9700\u518d\u8f93\u5165\u5bc6\u7801\n", "tags": ["Octopress", "rsync", "SSH"]}