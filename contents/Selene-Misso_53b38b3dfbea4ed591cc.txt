{"context": " More than 1 year has passed since last update.\u6c17\u3065\u3044\u305f\u3089\u6c17\u8c61\u5e81XML\u3067\u964d\u7070\u4e88\u5831\u306e\u914d\u4fe1\u304c\u958b\u59cb\u3055\u308c\u3066\u3044\u305f\u306e\u3067\uff0c\n\u6c17\u8c61\u5e81XML\u306e\u964d\u7070\u4e88\u5831(\u5b9a\u6642)\u3092\uff0cR\u3067\u30b0\u30e9\u30d5\u306b\u3057\u3066\u307f\u308b\uff0e\nGit\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u3061\u3089.\n\n\u5b8c\u6210\u56f3\n \n\n\u6e96\u5099\n\n\u6c17\u8c61\u5e81XML\n\u6c17\u8c61\u5e81\u304b\u3089\u76f4\u63a5\u914d\u4fe1\u3092\u53d7\u3051\u308b\u304b\uff0c http://api.aitc.jp/ \u7b49\u304b\u3089\u964d\u7070\u4e88\u5831(\u5b9a\u6642)\u306eXML\u3092\u53d6\u5f97\u3059\u308b\uff0e\n\n\u6c17\u8c61\u5e81XML\u306e\u5229\u7528\u306b\u3064\u3044\u3066\u306f\uff0chttp://xml.kishou.go.jp/open_trial/index.html \u306e\n\u7559\u610f\u4e8b\u9805\u3092\u5fc5\u305a\u53c2\u7167\u3059\u308b\uff0e\n\n\nR Package\n\nXML\nggmap\n\n\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\nGoogle Map\u304b\u3089\u5730\u56f3\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\uff0c\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u304c\u5fc5\u8981\uff0e\n\n\u964d\u7070\u4e88\u5831\u306e\u4f5c\u56f3\n\u963f\u8607\u5c71\u3067\u964d\u7070\u4e88\u5831(\u5b9a\u6642)\u3092\u4f5c\u56f3\u3057\u3066\u307f\u308b\uff0e\nlibrary(XML)\nlibrary(ggmap)\n\nxml <- xmlToList(\"Aso151207T2000.xml\")\n\n# \u706b\u5c71\u5ea7\u6a19\nvolcano_name<- xml$Body$VolcanoInfo$Item$Areas$Area$Name\nvolcano_str <- xml$Body$VolcanoInfo$Item$Areas$Area$Coordinate$text\n# DMM\u5f62\u5f0f\u306e\u5ea7\u6a19\u3092DEG\u306b\u5909\u63db\nvolcano_lat <- as.numeric(substr(volcano_str, 1, 3)) + (as.numeric(substr(volcano_str, 4, 8)))/60\nvolcano_lon <- as.numeric(substr(volcano_str, 9,12)) + (as.numeric(substr(volcano_str,13,17)))/60\n\n\n# 1\u3064\u76ee\u306e\u4e88\u5831(\u4e88\u5831 3\u6642\u9593\u5f8c)\ni <- 1\ninfo <- xml$Body$AshInfos[i]\n\n## \u964d\u7070\u306e\u7bc4\u56f2\nashPolygons <- list()\nfor(i in 1:(length(info$AshInfo[3]$Item$Kind$Property) - 2)){\n  polygonStr <- info$AshInfo[3]$Item$Kind$Property[i]$Polygon$text\n\n  ### \u6587\u5b57\u5217\u3092\u5206\u5272\n  polygonStr <- unlist(strsplit(polygonStr, \"/\"))\n  ### \u6587\u5b57\u5217\u3092\u5ea7\u6a19\u306b\u5909\u63db\n  lats <- as.numeric(substring(polygonStr, 1,8))\n  lons <- as.numeric(substring(polygonStr, 9,17))\n  ### \u30dd\u30ea\u30b4\u30f3\u3092\u4f5c\u6210\n  ashPolygon <- data.frame(lon=lons, lat=lats)\n\n  ### \u30ea\u30b9\u30c8\u306b\u8ffd\u52a0\n  ashPolygons <- append(ashPolygons, geom_polygon(data = ashPolygon, colour=\"gray30\", alpha=0.6, size = 1))\n}\n\n\n## \u56f3\u306e\u4e2d\u5fc3\u3092\u5c71\u9802\u306b\u6307\u5b9a\u3057\u3066\u53d6\u5f97\nmap <- get_map(c(volcano_lon, volcano_lat), language = \"ja\", maptype = \"roadmap\", zoom = 10)\n\n## \u4f5c\u56f3\ng <- ggmap(map)\n### \u964d\u7070\u30a8\u30ea\u30a2\nfor(m in ashPolygons){g <- g+m}\n### \u5c71\u9802\ng <- g + geom_point(x = volcano_lon, y = volcano_lat, shape = 17, size = 4)\n### \u30d7\u30ed\u30c3\u30c8\ng\n\n\n\n\n\u5c0f\u3055\u306a\u5674\u77f3\u306e\u843d\u4e0b\u7bc4\u56f2\u306e\u4f5c\u753b\n## \u5c0f\u3055\u306a\u5674\u77f3\u306e\u843d\u4e0b\u7bc4\u56f2\npolygonStr <- info$AshInfo[4]$Item$Kind$Property$Polygon$text\n### \u6587\u5b57\u5217\u3092\u5206\u5272\npolygonStr <- unlist(strsplit(polygonStr, \"/\"))\n### \u6587\u5b57\u5217\u3092\u5ea7\u6a19\u306b\u5909\u63db\nlats <- as.numeric(substring(polygonStr, 1,8))\nlons <- as.numeric(substring(polygonStr, 9,17))\n### \u30dd\u30ea\u30b4\u30f3\u3092\u4f5c\u6210\nashPolygon <- data.frame(lon=lons, lat=lats)\n\n\n## \u56f3\u306e\u4e2d\u5fc3\u3092\u5c71\u9802\u306b\u6307\u5b9a\u3057\u3066\u53d6\u5f97\nmap <- get_map(c(volcano_lon, volcano_lat), language = \"ja\", maptype = \"roadmap\", zoom = 12)\n\n## \u4f5c\u56f3\ng <- ggmap(map)\n### \u843d\u77f3\u30a8\u30ea\u30a2\ng <- g + geom_polygon(data = ashPolygon, colour=\"gray0\", fill=\"red\", alpha=0.4, size = 1)\n### \u5c71\u9802\ng <- g + geom_point(x = volcano_lon, y = volcano_lat, shape = 17, size = 4)\n### \u30d7\u30ed\u30c3\u30c8\ng\n\n\n\n\u611f\u60f3\n\u610f\u5916\u3068\u3042\u3063\u3055\u308a\u3067\u304d\u305f\uff0e\n\u5674\u77f3\u7bc4\u56f2\u306e\u5857\u308a\u3064\u3076\u3057\u3092\u659c\u7dda\u306b\u3057\u305f\u304b\u3063\u305f\u304c\uff0cggplot2\u3060\u3068\u3069\u3046\u3057\u3066\u3082\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u65ad\u5ff5\uff0e\n\u5c71\u9802\u306e\u4f4d\u7f6e\u304c\u30ba\u30ec\u3066\u308b\u6c17\u304c\u3059\u308b\uff0e\u6e2c\u5730\u7cfb\u306e\u554f\u984c\uff1f\n\n\u53c2\u8003\n\nhttp://xml.kishou.go.jp/open_trial/index.html\nhttp://qiita.com/ckazu/items/d166757ed664ca622ecc\nhttps://oku.edu.mie-u.ac.jp/~okumura/stat/xml.html\nhttp://api.aitc.jp/websocket/\n\n\n\u6c17\u3065\u3044\u305f\u3089\u6c17\u8c61\u5e81XML\u3067\u964d\u7070\u4e88\u5831\u306e\u914d\u4fe1\u304c\u958b\u59cb\u3055\u308c\u3066\u3044\u305f\u306e\u3067\uff0c\n\u6c17\u8c61\u5e81XML\u306e\u964d\u7070\u4e88\u5831(\u5b9a\u6642)\u3092\uff0cR\u3067\u30b0\u30e9\u30d5\u306b\u3057\u3066\u307f\u308b\uff0e\nGit\u30ea\u30dd\u30b8\u30c8\u30ea\u306f[\u3053\u3061\u3089](https://github.com/Selene-Misso/AshFallXML).\n\n\n## \u5b8c\u6210\u56f3\n\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/91885/73e5df8b-d4de-ef26-27d8-fc39ab4c1a5e.png\" alt=\"\u963f\u8607\u964d\u7070\" width=45% /> <img src=\"https://qiita-image-store.s3.amazonaws.com/0/91885/fe761c68-b828-4bb7-7c9c-a4769831ee0b.png\" alt=\"\u963f\u8607\u5674\u77f3\" width=45% />\n\n\n## \u6e96\u5099\n### \u6c17\u8c61\u5e81XML\n\n\u6c17\u8c61\u5e81\u304b\u3089\u76f4\u63a5\u914d\u4fe1\u3092\u53d7\u3051\u308b\u304b\uff0c http://api.aitc.jp/ \u7b49\u304b\u3089\u964d\u7070\u4e88\u5831(\u5b9a\u6642)\u306eXML\u3092\u53d6\u5f97\u3059\u308b\uff0e\n\n> \u6c17\u8c61\u5e81XML\u306e\u5229\u7528\u306b\u3064\u3044\u3066\u306f\uff0chttp://xml.kishou.go.jp/open_trial/index.html \u306e\n\u7559\u610f\u4e8b\u9805\u3092\u5fc5\u305a\u53c2\u7167\u3059\u308b\uff0e\n\n\n### R Package\n\n* XML\n* ggmap\n\n### \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\n\nGoogle Map\u304b\u3089\u5730\u56f3\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\uff0c\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u304c\u5fc5\u8981\uff0e\n\n\n## \u964d\u7070\u4e88\u5831\u306e\u4f5c\u56f3\n\n\u963f\u8607\u5c71\u3067\u964d\u7070\u4e88\u5831(\u5b9a\u6642)\u3092\u4f5c\u56f3\u3057\u3066\u307f\u308b\uff0e\n\n\n```R\nlibrary(XML)\nlibrary(ggmap)\n\nxml <- xmlToList(\"Aso151207T2000.xml\")\n\n# \u706b\u5c71\u5ea7\u6a19\nvolcano_name<- xml$Body$VolcanoInfo$Item$Areas$Area$Name\nvolcano_str <- xml$Body$VolcanoInfo$Item$Areas$Area$Coordinate$text\n# DMM\u5f62\u5f0f\u306e\u5ea7\u6a19\u3092DEG\u306b\u5909\u63db\nvolcano_lat <- as.numeric(substr(volcano_str, 1, 3)) + (as.numeric(substr(volcano_str, 4, 8)))/60\nvolcano_lon <- as.numeric(substr(volcano_str, 9,12)) + (as.numeric(substr(volcano_str,13,17)))/60\n\n\n# 1\u3064\u76ee\u306e\u4e88\u5831(\u4e88\u5831 3\u6642\u9593\u5f8c)\ni <- 1\ninfo <- xml$Body$AshInfos[i]\n\n## \u964d\u7070\u306e\u7bc4\u56f2\nashPolygons <- list()\nfor(i in 1:(length(info$AshInfo[3]$Item$Kind$Property) - 2)){\n  polygonStr <- info$AshInfo[3]$Item$Kind$Property[i]$Polygon$text\n  \n  ### \u6587\u5b57\u5217\u3092\u5206\u5272\n  polygonStr <- unlist(strsplit(polygonStr, \"/\"))\n  ### \u6587\u5b57\u5217\u3092\u5ea7\u6a19\u306b\u5909\u63db\n  lats <- as.numeric(substring(polygonStr, 1,8))\n  lons <- as.numeric(substring(polygonStr, 9,17))\n  ### \u30dd\u30ea\u30b4\u30f3\u3092\u4f5c\u6210\n  ashPolygon <- data.frame(lon=lons, lat=lats)\n  \n  ### \u30ea\u30b9\u30c8\u306b\u8ffd\u52a0\n  ashPolygons <- append(ashPolygons, geom_polygon(data = ashPolygon, colour=\"gray30\", alpha=0.6, size = 1))\n}\n\n\n## \u56f3\u306e\u4e2d\u5fc3\u3092\u5c71\u9802\u306b\u6307\u5b9a\u3057\u3066\u53d6\u5f97\nmap <- get_map(c(volcano_lon, volcano_lat), language = \"ja\", maptype = \"roadmap\", zoom = 10)\n\n## \u4f5c\u56f3\ng <- ggmap(map)\n### \u964d\u7070\u30a8\u30ea\u30a2\nfor(m in ashPolygons){g <- g+m}\n### \u5c71\u9802\ng <- g + geom_point(x = volcano_lon, y = volcano_lat, shape = 17, size = 4)\n### \u30d7\u30ed\u30c3\u30c8\ng\n\n```\n\n![\u963f\u8607\u964d\u7070](https://qiita-image-store.s3.amazonaws.com/0/91885/73e5df8b-d4de-ef26-27d8-fc39ab4c1a5e.png \"\u963f\u8607\u964d\u7070\")\n\n## \u5c0f\u3055\u306a\u5674\u77f3\u306e\u843d\u4e0b\u7bc4\u56f2\u306e\u4f5c\u753b\n\n```R\n## \u5c0f\u3055\u306a\u5674\u77f3\u306e\u843d\u4e0b\u7bc4\u56f2\npolygonStr <- info$AshInfo[4]$Item$Kind$Property$Polygon$text\n### \u6587\u5b57\u5217\u3092\u5206\u5272\npolygonStr <- unlist(strsplit(polygonStr, \"/\"))\n### \u6587\u5b57\u5217\u3092\u5ea7\u6a19\u306b\u5909\u63db\nlats <- as.numeric(substring(polygonStr, 1,8))\nlons <- as.numeric(substring(polygonStr, 9,17))\n### \u30dd\u30ea\u30b4\u30f3\u3092\u4f5c\u6210\nashPolygon <- data.frame(lon=lons, lat=lats)\n\n\n## \u56f3\u306e\u4e2d\u5fc3\u3092\u5c71\u9802\u306b\u6307\u5b9a\u3057\u3066\u53d6\u5f97\nmap <- get_map(c(volcano_lon, volcano_lat), language = \"ja\", maptype = \"roadmap\", zoom = 12)\n\n## \u4f5c\u56f3\ng <- ggmap(map)\n### \u843d\u77f3\u30a8\u30ea\u30a2\ng <- g + geom_polygon(data = ashPolygon, colour=\"gray0\", fill=\"red\", alpha=0.4, size = 1)\n### \u5c71\u9802\ng <- g + geom_point(x = volcano_lon, y = volcano_lat, shape = 17, size = 4)\n### \u30d7\u30ed\u30c3\u30c8\ng\n```\n\n![\u963f\u8607\u5674\u77f3](https://qiita-image-store.s3.amazonaws.com/0/91885/fe761c68-b828-4bb7-7c9c-a4769831ee0b.png \"\u963f\u8607\u5674\u77f3\")\n\n\n## \u611f\u60f3\n\n\u610f\u5916\u3068\u3042\u3063\u3055\u308a\u3067\u304d\u305f\uff0e\n\u5674\u77f3\u7bc4\u56f2\u306e\u5857\u308a\u3064\u3076\u3057\u3092\u659c\u7dda\u306b\u3057\u305f\u304b\u3063\u305f\u304c\uff0c`ggplot2`\u3060\u3068\u3069\u3046\u3057\u3066\u3082\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u65ad\u5ff5\uff0e\n\u5c71\u9802\u306e\u4f4d\u7f6e\u304c\u30ba\u30ec\u3066\u308b\u6c17\u304c\u3059\u308b\uff0e\u6e2c\u5730\u7cfb\u306e\u554f\u984c\uff1f\n\n## \u53c2\u8003\n> http://xml.kishou.go.jp/open_trial/index.html\n> http://qiita.com/ckazu/items/d166757ed664ca622ecc\n> https://oku.edu.mie-u.ac.jp/~okumura/stat/xml.html\n> http://api.aitc.jp/websocket/\n", "tags": ["\u5730\u56f3", "XML", "R"]}