{"tags": ["swift3", "ServerSideSwift", "Swift3.0", "Prorsum"], "context": "Go\u30e9\u30a4\u30af\u306aServer Swift Swift\u306e\u30e9\u30a4\u30d6\u30e9\u30eaProrsum\u306e\u4f5c\u8005\u306enoppoMan\u3055\u3093\u306b\nProrsum\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u4ed5\u65b9\u3092\u6559\u3048\u3066\u3082\u3089\u3063\u3066\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u305f\u306e\u3067\u5171\u6709\u3057\u307e\u3059\u3002\n\u4f7f\u3063\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\nhttps://github.com/noppoMan/Prorsum\nA Go like concurrent system + networking/http library for Swift that works on Linux and Mac  \n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u7d50\u679c\u306f\u4ee5\u4e0b\n\n\u3081\u3063\u3061\u3083\u65e9\u304f\u306a\u3044\u3067\u3059\u304b\uff1f\n3\u5206\u3067\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n(\u6ce8)\u3059\u3067\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u304c\u629c\u3051\u3066\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3093\u3002\nTerminal.app\u3092\u958b\u3044\u3066\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\n$ mkdir ProrsumSample\n$ cd ProrsumSample\n$ swift package init\n\n$ vim Package.swift\n\nPackage.swift\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\nimport PackageDescription\n\nlet package = Package(\n    name: \"ProrsumSample\",\n    dependencies: [\n        .Package(url: \"https://github.com/noppoMan/Prorsum.git\", majorVersion: 0, minor: 1),\n    ]\n)\n\nESC\u62bc\u3057\u3066\u3001:wq\u306evim\u30b3\u30de\u30f3\u30c9\u3067\u3001Package.swift\u3092\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b\n$ swift build\n$ vim Sources/main.swift\n\nSources/main.swift\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b\nimport Prorsum\nimport Foundation\n\nlet server = try! HTTPServer { (request, writer) in\n    do {\n        let response = Response(\n            headers: [\"Server\": \"Prorsum Micro HTTP Server\"],\n            body: .buffer(\"hello Server Side Swift\".data)\n        )\n\n        try writer.serialize(response)\n\n        writer.close()\n    } catch {\n        fatalError(\"\\(error)\")\n    }\n}\n\ntry! server.bind(host: \"0.0.0.0\", port: 3000)\nprint(\"Server listening at 0.0.0.0:3000\")\ntry! server.listen()\n\nRunLoop.main.run()\n\nESC\u62bc\u3057\u3066\u3001:wq\u306evim\u30b3\u30de\u30f3\u30c9\u3067\u3001Sources/main.swift\u3092\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b\nTerminal.app\u3092\u958b\u3044\u3066\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\n$ swift build\n$ .build/debug/ProrsumSample\n\n\u6700\u5f8c\u306e.build/debug/ProrsumSample\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306b\u5408\u308f\u305b\u3066\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3068\u306e\u3053\u3068\nTerminal.app\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u7acb\u3061\u4e0a\u3052\u305f\u307e\u307e\u3001Command+T\u3067\u30bf\u30d6\u3092\u958b\u304d\u3001\nab -n 10000 -c 100 -g out.data http://127.0.0.1:3000/\n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u8a08\u6e2c\u3057\u305f\u3089\u3001Control+C\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u3092\u7d42\u4e86\u3057\u3066\u3001gnuplot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nhttp://memorynotfound.com/using-gnuplot-to-plot-apache-benchmark-data/\n\u3053\u308c\u3092\u53c2\u8003\u306b\u3057\u3066\n$ brew install gnuplot\n$ vim apache-benchmark.p\n\napache-benchmark.p\n# output as png image\nset terminal png\n\n# save file to \"benchmark.png\"\nset output \"benchmark.png\"\n\n# graph title\nset title \"Server Side Swift for Prorsum\\nab -n 10000 -c 100 -g out.data http://127.0.0.1:3000/\"\n\n#nicer aspect ratio for image size\nset size 1,0.7\n\n# y-axis grid\nset grid y\n\n#x-axis label\nset xlabel \"request\"\n\n#y-axis label\nset ylabel \"response time (ms)\"\n\n#plot data from \"out.data\" using column 9 with smooth sbezier lines\nplot \"out.data\" using 9 smooth sbezier with lines title \"something\"\n\nESC\u62bc\u3057\u3066\u3001:wq\u306evim\u30b3\u30de\u30f3\u30c9\u3067\u3001apache-benchmark.p\u3092\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b\n$ gnuplot apache-benchmark.p\n$ open benchmark.png\n\n\u30bd\u30fc\u30b9\u3092Xcode\u3067\u7de8\u96c6\u3059\u308b\u306b\u306f\n$ swift package generate-xcodeproj\n$ ProrsumSample.xcodeproj \n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u7d50\u679c\u306f\u4ee5\u4e0b\n\n\u8a08\u6e2c\u3057\u305f\u30de\u30b7\u30f3\u3068\u30b9\u30da\u30c3\u30af\n\nnoppoMan\u3055\u3093\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3001Tokyo Server Side Swift\u306e\u767a\u8868\u8cc7\u6599\u306f\u3053\u3061\u3089\nA Go like concurrent system + networking/http library for Swift that works on Linux and Mac\nhttps://github.com/noppoMan/Prorsum \nhttps://tokyo-ss-swift.connpass.com/presentation/\n\u4eca\u5f8c\u306b\u671f\u5f85\u3067\u3059\u306d\uff01\n\u4ee5\u4e0a\u3001Tokyo Server Side Swift #6\u306e\u53c2\u52a0\u30ec\u30dd\u30fc\u30c8\u3067\u3057\u305f\nhttps://tokyo-ss-swift.connpass.com/event/48660/\nGo\u30e9\u30a4\u30af\u306aServer Swift Swift\u306e\u30e9\u30a4\u30d6\u30e9\u30eaProrsum\u306e\u4f5c\u8005\u306enoppoMan\u3055\u3093\u306b\n\nProrsum\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u4ed5\u65b9\u3092\u6559\u3048\u3066\u3082\u3089\u3063\u3066\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u305f\u306e\u3067\u5171\u6709\u3057\u307e\u3059\u3002\n\n\u4f7f\u3063\u305f\u30e9\u30a4\u30d6\u30e9\u30ea  \nhttps://github.com/noppoMan/Prorsum  \nA Go like concurrent system + networking/http library for Swift that works on Linux and Mac  \n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u7d50\u679c\u306f\u4ee5\u4e0b  \n![benchmark](https://cloud.githubusercontent.com/assets/1066618/22382780/8c544480-e50a-11e6-816a-0d79c771dcdf.png)\n\n\u3081\u3063\u3061\u3083\u65e9\u304f\u306a\u3044\u3067\u3059\u304b\uff1f\n\n3\u5206\u3067\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n(\u6ce8)\u3059\u3067\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u304c\u629c\u3051\u3066\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3093\u3002\n\nTerminal.app\u3092\u958b\u3044\u3066\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\n\n```\n$ mkdir ProrsumSample\n$ cd ProrsumSample\n$ swift package init\n\n$ vim Package.swift\n```\n\nPackage.swift\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\n\n```\nimport PackageDescription\n\nlet package = Package(\n    name: \"ProrsumSample\",\n    dependencies: [\n        .Package(url: \"https://github.com/noppoMan/Prorsum.git\", majorVersion: 0, minor: 1),\n    ]\n)\n```\n\nESC\u62bc\u3057\u3066\u3001:wq\u306evim\u30b3\u30de\u30f3\u30c9\u3067\u3001Package.swift\u3092\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b\n\n```\n$ swift build\n$ vim Sources/main.swift\n```\nSources/main.swift\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b\n\n``` swift\nimport Prorsum\nimport Foundation\n\nlet server = try! HTTPServer { (request, writer) in\n    do {\n        let response = Response(\n            headers: [\"Server\": \"Prorsum Micro HTTP Server\"],\n            body: .buffer(\"hello Server Side Swift\".data)\n        )\n\n        try writer.serialize(response)\n\n        writer.close()\n    } catch {\n        fatalError(\"\\(error)\")\n    }\n}\n\ntry! server.bind(host: \"0.0.0.0\", port: 3000)\nprint(\"Server listening at 0.0.0.0:3000\")\ntry! server.listen()\n\nRunLoop.main.run()\n```\n\nESC\u62bc\u3057\u3066\u3001:wq\u306evim\u30b3\u30de\u30f3\u30c9\u3067\u3001Sources/main.swift\u3092\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b\n\nTerminal.app\u3092\u958b\u3044\u3066\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\n\n```\n$ swift build\n$ .build/debug/ProrsumSample\n```\n\n\u6700\u5f8c\u306e.build/debug/ProrsumSample\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306b\u5408\u308f\u305b\u3066\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3068\u306e\u3053\u3068\n\nTerminal.app\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u7acb\u3061\u4e0a\u3052\u305f\u307e\u307e\u3001Command+T\u3067\u30bf\u30d6\u3092\u958b\u304d\u3001\n\n```\nab -n 10000 -c 100 -g out.data http://127.0.0.1:3000/\n```\n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3092\u8a08\u6e2c\u3057\u305f\u3089\u3001Control+C\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u3092\u7d42\u4e86\u3057\u3066\u3001gnuplot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nhttp://memorynotfound.com/using-gnuplot-to-plot-apache-benchmark-data/\n\u3053\u308c\u3092\u53c2\u8003\u306b\u3057\u3066\n\n```\n$ brew install gnuplot\n$ vim apache-benchmark.p\n```\n\napache-benchmark.p\n\n```\n# output as png image\nset terminal png\n\n# save file to \"benchmark.png\"\nset output \"benchmark.png\"\n\n# graph title\nset title \"Server Side Swift for Prorsum\\nab -n 10000 -c 100 -g out.data http://127.0.0.1:3000/\"\n\n#nicer aspect ratio for image size\nset size 1,0.7\n\n# y-axis grid\nset grid y\n\n#x-axis label\nset xlabel \"request\"\n\n#y-axis label\nset ylabel \"response time (ms)\"\n\n#plot data from \"out.data\" using column 9 with smooth sbezier lines\nplot \"out.data\" using 9 smooth sbezier with lines title \"something\"\n```\n\nESC\u62bc\u3057\u3066\u3001:wq\u306evim\u30b3\u30de\u30f3\u30c9\u3067\u3001apache-benchmark.p\u3092\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b\n\n```\n$ gnuplot apache-benchmark.p\n$ open benchmark.png\n```\n\u30bd\u30fc\u30b9\u3092Xcode\u3067\u7de8\u96c6\u3059\u308b\u306b\u306f\n\n```\n$ swift package generate-xcodeproj\n$ ProrsumSample.xcodeproj \n```\n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u7d50\u679c\u306f\u4ee5\u4e0b  \n![benchmark](https://cloud.githubusercontent.com/assets/1066618/22382780/8c544480-e50a-11e6-816a-0d79c771dcdf.png)\n\n\u8a08\u6e2c\u3057\u305f\u30de\u30b7\u30f3\u3068\u30b9\u30da\u30c3\u30af  \n<img width=\"255\" alt=\"2017-01-28 3 58 48\" src=\"https://cloud.githubusercontent.com/assets/1066618/22383694/24baeb5e-e50e-11e6-853b-784fdf109b47.png\">\n\nnoppoMan\u3055\u3093\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3001Tokyo Server Side Swift\u306e\u767a\u8868\u8cc7\u6599\u306f\u3053\u3061\u3089\nA Go like concurrent system + networking/http library for Swift that works on Linux and Mac  \nhttps://github.com/noppoMan/Prorsum  \n\nhttps://tokyo-ss-swift.connpass.com/presentation/\n\n\u4eca\u5f8c\u306b\u671f\u5f85\u3067\u3059\u306d\uff01\n\n\u4ee5\u4e0a\u3001Tokyo Server Side Swift #6\u306e\u53c2\u52a0\u30ec\u30dd\u30fc\u30c8\u3067\u3057\u305f\n\nhttps://tokyo-ss-swift.connpass.com/event/48660/\n\n"}