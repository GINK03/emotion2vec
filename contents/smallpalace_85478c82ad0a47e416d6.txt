{"context": "\u305f\u3060\u306e\u5099\u5fd8\u9332\u3067\u3059\u3002\n\n/etc/sysconfig/ntpd\u306e\u8a2d\u5b9a\n\uff08\u4ed6\u306e\u30c7\u30a3\u30b9\u30c8\u30ea\u3060\u3068sysconfig\u3067\u306a\u304f\u3066default\u3060\u3063\u305f\u308a\u3059\u308b\u6a21\u69d8\uff09\n\u3046\u308b\u3046\u79d2\u5bfe\u7b56\u3067slew\u30e2\u30fc\u30c9\u306b\u3057\u3066\u308b\u3002\u5177\u4f53\u7684\u306b\u306f-x\u30aa\u30d7\u30b7\u30e7\u30f3\u3092syscofig\u306b\u5165\u308c\u3066\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u3048\u3066\u308b\u3002\n$ cat /etc/sysconfig/ntpd\n# Drop root to id 'ntp:ntp' by default.\nOPTIONS=\"-u ntp:ntp -p /var/run/ntpd.pid -g -x\"\n\n\u203b-g\u5165\u3063\u3066\u308b\u306e\u3067syslog\u3068\u3044\u3046\u304bmessages\u306bntpd\u306e\u30ed\u30b0\u306f\u51fa\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u30dd\u30fc\u30ea\u30f3\u30b0\u9593\u9694\u306e\u78ba\u8a8d\u306a\u3069\nman 5 ntp.conf\u306a\u3069\u3067\u30dd\u30fc\u30ea\u30f3\u30b0\u9593\u9694\u306a\u3069\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u78ba\u8a8d\u3002\n-x  ntpd \u306e\u52d5\u4f5c\u306b\u306f\u3075\u305f\u3064\u306e\u30e2\u30fc\u30c9\u304c\u3042\u308b\u3002slew \u30e2\u30fc\u30c9\u3068 step \u30e2\u30fc\u30c9\u3060\u3002slew \u30e2\u30fc\u30c9\u3067\u306f\u3001 1 \u79d2\u3042\u305f\u308a\u6700\u5927\n\u3067 0.5ms (0.0005 \u79d2) \u3065\u3064\u5f90\u3005\u306b\u6642\u9593\u3092\u5408\u308f\u305b\u3001\u9023\u7d9a\u6027\u3092\u91cd\u8996\u3059\u308b\u3002step \u30e2\u30fc\u30c9\u3067\u306f\u3001\u4e0d\u9023\u7d9a\u306b\u6642\u9593\u3092\u4e00\u6c17\u306b\u9032\u3081\u308b \n(\u307e\u305f\u306f\u9045\u3089\u305b\u308b)\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u6642\u9593\u306e\u305a\u308c\u304c 128 ms (0.128 \u79d2) \u3088\u308a\u3082\u5c0f\u3055\u304b\u3063\u305f\u5834\u5408\u306b\u306f slew \u52d5\u4f5c\u3092\u884c\n\u3044\u3001128 ms \u4ee5\u4e0a\u305a\u308c\u305f\u72b6\u614b\u304c 300\u79d2\u4ee5\u4e0a\u7d9a\u304f\u3068 step \u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u308f\u308b\u3002\u52d5\u4f5c\u5207\u66ff\u306e\u95be\u5024\u3092 ntpd \u3067\u306f `step \nthreshold'\u3001\u305d\u308c\u304c\u3069\u308c\u3060\u3051\u9577\u304f\u7d9a\u3044\u305f\u3089\u52d5\u4f5c\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u306e\u95be\u5024\u3092 `stepout threshold' \u3068\u547c\u3076\u3002-x \u30aa\u30d7\u30b7\u30e7\u30f3\n\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001step\u95be\u5024\u304c 600 \u79d2\u3068\u3044\u3046\u975e\u5e38\u306b\u5927\u304d\u306a\u5024\u306b\u5909\u308f\u308a\u3001 ntpd \u306f (\u5b9f\u8cea\u7684\u306b) \u5c02\u3089 slew \u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\n\u3053\u3068\u306b\u306a\u308b\u3002-x \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u4e00\u898b\u3001\u6642\u9593\u306e\u9023\u7d9a\u6027\u3092\u4fdd\u3064\u3068\u3044\u3046\u70b9\u3067\u597d\u307e\u3057\u3044\u3088\u3046\u306b\u601d\u3048\u308b\u304c\u3001slew \u30e2\u30fc\u30c9\u3067\u306f 10 \u79d2\u306e\n\u72c2\u3044\u3092\u8abf\u6574\u3059\u308b\u306e\u306b 20000 \u79d2 (= 10 / 0.0005) \u3064\u307e\u308a 5 \u6642\u9593\u534a\u3082\u304b\u304b\u3063\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u3053\u3068\u3092\u982d\u306b\u7f6e\u3044\u3066\u304a\u304b\u306a\u304f\u3066\n\u306f\u306a\u3089\u306a\u3044\u3002\u306a\u304a\u3001\u8d77\u52d5\u6642\u306b -x \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4e0e\u3048\u308b\u4ee3\u308f\u308a\u306b\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e tinker \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u4f7f\u3048\u3070 step\n\u95be\u5024\u3068 stepout\u95be\u5024\u3092\u4efb\u610f\u306e\u5024\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\n\nmaxpoll\u3068\u304b\u306f\u7279\u306b\u5909\u3048\u3066\u3044\u306a\u3044\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e10\u30671024\u79d2\u3067\u3001minpoll\u3082\u30c7\u30d5\u30a9\u30eb\u30c86\u306a\u306e\u306764\u79d2\u304b\u30891024\u79d2\u306e\u9593\u306e\u3044\u305a\u308c\u304b\u306e\u9593\u9694\u3067\u540c\u671f\u78ba\u8a8d\u3057\u306b\u884c\u3063\u3066\u308b\u306f\u305a\u3002\uff08\u73fe\u5728\u5024\u306fntpq -p\u3067\u898b\u305f\u6642\u306epoll\uff09\n       server address [options ...]\n\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u6642\u9593\u78ba\u8a8d\u3092\u884c\u3046\u983b\u5ea6\u306e\u3053\u3068\u3092\u3001\u30dd\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb (poll interval) \u3068\u547c\u3076\u3002\u30dd\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u306f\u3001\nntpd \u3067\u306f\u52d5\u7684\u306b\u5909\u5316\u3057\u3066\u3044\u304f\u3002\u3053\u308c\u306f\u3001\u6700\u5c0f (minpoll) \u3068\u6700\u5927 (maxpoll) \u3067\u898f\u5b9a\u3055\u308c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306e\n\u6642\u8a08\u304c\u5b89\u5b9a\u3057\u306a\u3044\u3046\u3061\u306f 64 \u79d2\u6bce\u3001\u305d\u308c\u304b\u3089\u6b21\u7b2c\u306b\u3001128 \u79d2\u3001256 \u79d2\u3068\u9593\u9694\u304c\u9577\u304f\u306a\u308a\u3001\u6700\u7d42\u7684\u306b\u306f\u6700\u5927\u30dd\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\n\u30d0\u30eb\u3067\u3042\u308b 1024 \u79d2 (\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5834\u5408) \u306b\u843d\u3061\u7740\u304f\u3002\u3053\u308c\u3089\u3075\u305f\u3064\u306e\u5024\u306f server \u30b3\u30de\u30f3\u30c9\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066 \n\"minpoll num \" \u307e\u305f\u306f \"maxpoll num \" \u3042\u308b\u3044\u306f\u305d\u306e\u4e21\u65b9\u3092\u6307\u5b9a\u3057\u3066\u3001\u5909\u66f4\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\u9593\u9055\u3048\u3084\u3059\u3044\u306e\u306f\u3001\u3053\n\u306e num \u304c\u6587\u5b57\u901a\u308a\u306e\u79d2\u6570\u3067\u306f\u306a\u3044\u3068\u3044\u3046\u70b9\u3060\u3002num \u306f 2\u3092\u57fa\u5e95\u3068\u3059\u308b\u6307\u6570\u3001\u3064\u307e\u308a 2n \u306e n \u306b\u3042\u305f\u308b\u3082\u306e (\u30d3\u30c3\u30c8\u6570\u3068\n\u3082\u8a00\u3048\u308b)\u3002maxpoll \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f 10 (1024\u79d2) \u3067\u3001\u6307\u5b9a\u53ef\u80fd\u306a\u6700\u5927\u5024\u306f 17 (\u7d0436\u6642\u959325\u5206)\u3002minpoll \u306e\u30c7\u30d5\u30a9\n\u30eb\u30c8\u306f 6 (64\u79d2) \u3067\u3001\u6307\u5b9a\u3067\u304d\u308b\u6700\u5c0f\u5024\u306f 4 (16\u79d2) \u3068\u306a\u3063\u3066\u3044\u308b\u3002\u4f8b\u3067\u306f maxpoll \u3092 30\u5206\u304f\u3089\u3044\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u3001\nnum \u3092 11 (\u7d0434\u5206) \u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\u307e\u305f\u3001minpoll \u3092 30 \u79d2\u304f\u3089\u3044\u306b\u3057\u305f\u3044\u306a\u3089 num \u306b\u306f 5 (32\u79d2) \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u69cb\u6210\u3068ntp.conf\u306e\u5185\u5bb9\u306a\u3069\n\u540c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30ea\u30a2\u5185\u306b\u3044\u308b2\u53f0\u306entp\u30b5\u30fc\u30d0\u3092\u307f\u3066\u3044\u3066\u305d\u306e\uff12\u53f0\u306f\u540c\u3058\u5730\u57df\u306e\u516c\u958bntp\u30b5\u30fc\u30d0\u3092\u898b\u306b\u884c\u3063\u3066\u308b\u3002\npeer\u306f\u3064\u304b\u3063\u3066\u304a\u3089\u305aserver\u3060\u3051\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\nrestrict\u3082FW\u7684\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5236\u9650\u8a2d\u5b9a\u304c\u3042\u308b\u305f\u3081\u660e\u793a\u7684\u306b\u4f7f\u3063\u3066\u3044\u306a\u3044\u3002\n\u6642\u523b\u540c\u671f\u306b\u6697\u53f7\u5316\u306e\u5fc5\u8981\u6027\u3092\u611f\u3058\u306a\u3044\u306e\u3067\u3082\u3061\u308d\u3093\u8a8d\u8a3c\u3082\u4f7f\u3063\u3066\u3044\u306a\u3044\u3002\nserver -4 ldap1.mng.hoge.local iburst\n-4\u306fIPV4\u3068\u3044\u3046\u610f\u5473\u3002\niburst\u306f\u8d77\u52d5\u6642\u306e\u307f8\u56de\u901a\u4fe1\u3067\u521d\u56de\u306e\u540c\u671f\u901f\u5ea6\u3092\u4e0a\u3052\u3066\u308b\u3002\n\u516c\u958b\u30b5\u30fc\u30d0\u306b\u4f55\u56de\u3082\u884c\u304f\u306e\u306f\u975e\u63a8\u5968\u3089\u3057\u3044\u306e\u3067\u3001burst\u306f\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u3002\n\u30ed\u30fc\u30ab\u30eb\u30a8\u30ea\u30a2\u5185\u3082\u30d1\u30b1\u30c3\u30c8\u304c\u5897\u3048\u308b\u306e\u306f\u3069\u3046\u304b\u3068\u304a\u3082\u3063\u3066iburst\u306b\u3057\u3066\u3044\u308b\u3002\n\u30ed\u30fc\u30ab\u30eb\u30a8\u30ea\u30a2\u5185\u306fpeer\u3064\u304b\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u304b\u3082\u3068\u601d\u3063\u3066\u305f\u304c\u304a\u4e92\u3044\u304c\u304a\u4e92\u3044\u3092\u66f4\u65b0\u3059\u308b\u3063\u3066\u306e\u3068\n\u52d5\u7684\u306b\u5909\u5316\u3059\u308b\u74b0\u5883\u306a\u306e\u3067peer\u306f\u7121\u7406\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u308b\u3002\n\n\u30ed\u30b0\u3092\u8a73\u7d30\u306b\u51fa\u3057\u305f\u308a\u8abf\u3079\u305f\u308a\u3057\u305f\u3044\n\u8abf\u3079\u305f\u3089\u3053\u3093\u306a\u2193\u304b\u3093\u3058\u3089\u3057\u3044\u3002\u3082\u3057\u304f\u306fcron\u3067ntpq -c readvar\u306e\u7d50\u679c\u3092\u30ed\u30ae\u30f3\u30b0\u3068\u304b\u3002\n$ sudo vi /etc/ntp.conf\nlogfile /var/log/ntpd.log\nlogconfig =all\n\n\nchronyd\u306e\u98a8\u306e\u3046\u308f\u3055\uff08\u305f\u3081\u3057\u3066\u306a\u304f\u3066\u898b\u304b\u3051\u305f\u3060\u3051\uff09\nCentOS7\u304b\u3089\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6642\u523b\u540c\u671f\u30c7\u30fc\u30e2\u30f3\u304cchronyd\u306b\u4ee3\u308f\u308b\u304c\nslew\u30e2\u30fc\u30c9\u304c\u307e\u3068\u3082\u306b\u52d5\u4f5c\u3059\u308b\u304b\u3069\u3046\u304b\u602a\u3057\u3044\u3068\u3044\u3046\u554f\u984c\u306b\u3064\u3044\u3066\u3001\n\u3044\u3061\u304a\u3046ntpd\u3067-x\u3067slew\u3067\u52d5\u304f\u306e\u3067\u305d\u308c\u3067\u3044\u3044\u306e\u3067\u306f\u3068\u3044\u3046\u8a71\u3067\u304a\u3061\u3064\u3044\u3066\u3044\u308b\u304c\u3001\nCentOS7\u306echronyd\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304b\u3089leapsecmode slew\u306a\u3069\u3057\u3066\u304a\u304f\u3068\u3088\u3044\u6a21\u69d8\u3002\nhttp://qiita.com/ynishimura0922/items/ab4fed24f680aa034f82\n\u53c2\u8003\uff1a\nhttp://d.hatena.ne.jp/incarose86/20110505/1312522379\nhttp://www.asahi-net.or.jp/~AA4T-NNGK/ntpd.html\nhttp://kaworu.jpn.org/doc/FreeBSD/jman/man5/ntp.conf.5.php\nhttps://access.redhat.com/documentation/ja-JP/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/s1-Configure_NTP.html\nhttp://qiita.com/kirksencho/items/f789af7ed6046278b9d3\nhttp://qiita.com/ynishimura0922/items/ab4fed24f680aa034f82\nhttp://support.ntp.org/bin/view/Servers/NTPPoolServers\nhttp://dev.classmethod.jp/cloud/aws/clock-on-amazon-linux-and-ntp/\nhttp://qiita.com/pitan/items/1cb3f78dd936afc6aa32\nhttps://developers.google.com/time/guides?hl=ja\nhttp://blog.serverworks.co.jp/tech/2016/12/24/leapsecond/\nhttp://www.geocities.co.jp/SiliconValley-Bay/9357/ntpq.html\nhttp://www.cisco.com/cisco/web/support/JP/100/1007/1007845_ntpassoc-j.html\nhttps://hiroki.jp/leap-second-2015\nhttp://luna2-linux.blogspot.jp/2015/07/201571.html\n\u305f\u3060\u306e\u5099\u5fd8\u9332\u3067\u3059\u3002\n\n#### /etc/sysconfig/ntpd\u306e\u8a2d\u5b9a\n\n\uff08\u4ed6\u306e\u30c7\u30a3\u30b9\u30c8\u30ea\u3060\u3068sysconfig\u3067\u306a\u304f\u3066default\u3060\u3063\u305f\u308a\u3059\u308b\u6a21\u69d8\uff09\n\n\u3046\u308b\u3046\u79d2\u5bfe\u7b56\u3067slew\u30e2\u30fc\u30c9\u306b\u3057\u3066\u308b\u3002\u5177\u4f53\u7684\u306b\u306f-x\u30aa\u30d7\u30b7\u30e7\u30f3\u3092syscofig\u306b\u5165\u308c\u3066\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u3048\u3066\u308b\u3002\n\n```\n$ cat /etc/sysconfig/ntpd\n# Drop root to id 'ntp:ntp' by default.\nOPTIONS=\"-u ntp:ntp -p /var/run/ntpd.pid -g -x\"\n```\n\n\u203b-g\u5165\u3063\u3066\u308b\u306e\u3067syslog\u3068\u3044\u3046\u304bmessages\u306bntpd\u306e\u30ed\u30b0\u306f\u51fa\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n#### \u30dd\u30fc\u30ea\u30f3\u30b0\u9593\u9694\u306e\u78ba\u8a8d\u306a\u3069\n\nman 5 ntp.conf\u306a\u3069\u3067\u30dd\u30fc\u30ea\u30f3\u30b0\u9593\u9694\u306a\u3069\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u78ba\u8a8d\u3002\n\n```\n-x\tntpd \u306e\u52d5\u4f5c\u306b\u306f\u3075\u305f\u3064\u306e\u30e2\u30fc\u30c9\u304c\u3042\u308b\u3002slew \u30e2\u30fc\u30c9\u3068 step \u30e2\u30fc\u30c9\u3060\u3002slew \u30e2\u30fc\u30c9\u3067\u306f\u3001 1 \u79d2\u3042\u305f\u308a\u6700\u5927\n\u3067 0.5ms (0.0005 \u79d2) \u3065\u3064\u5f90\u3005\u306b\u6642\u9593\u3092\u5408\u308f\u305b\u3001\u9023\u7d9a\u6027\u3092\u91cd\u8996\u3059\u308b\u3002step \u30e2\u30fc\u30c9\u3067\u306f\u3001\u4e0d\u9023\u7d9a\u306b\u6642\u9593\u3092\u4e00\u6c17\u306b\u9032\u3081\u308b \n(\u307e\u305f\u306f\u9045\u3089\u305b\u308b)\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u6642\u9593\u306e\u305a\u308c\u304c 128 ms (0.128 \u79d2) \u3088\u308a\u3082\u5c0f\u3055\u304b\u3063\u305f\u5834\u5408\u306b\u306f slew \u52d5\u4f5c\u3092\u884c\n\u3044\u3001128 ms \u4ee5\u4e0a\u305a\u308c\u305f\u72b6\u614b\u304c 300\u79d2\u4ee5\u4e0a\u7d9a\u304f\u3068 step \u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u308f\u308b\u3002\u52d5\u4f5c\u5207\u66ff\u306e\u95be\u5024\u3092 ntpd \u3067\u306f `step \nthreshold'\u3001\u305d\u308c\u304c\u3069\u308c\u3060\u3051\u9577\u304f\u7d9a\u3044\u305f\u3089\u52d5\u4f5c\u3092\u5207\u308a\u66ff\u3048\u308b\u304b\u306e\u95be\u5024\u3092 `stepout threshold' \u3068\u547c\u3076\u3002-x \u30aa\u30d7\u30b7\u30e7\u30f3\n\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001step\u95be\u5024\u304c 600 \u79d2\u3068\u3044\u3046\u975e\u5e38\u306b\u5927\u304d\u306a\u5024\u306b\u5909\u308f\u308a\u3001 ntpd \u306f (\u5b9f\u8cea\u7684\u306b) \u5c02\u3089 slew \u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\n\u3053\u3068\u306b\u306a\u308b\u3002-x \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u4e00\u898b\u3001\u6642\u9593\u306e\u9023\u7d9a\u6027\u3092\u4fdd\u3064\u3068\u3044\u3046\u70b9\u3067\u597d\u307e\u3057\u3044\u3088\u3046\u306b\u601d\u3048\u308b\u304c\u3001slew \u30e2\u30fc\u30c9\u3067\u306f 10 \u79d2\u306e\n\u72c2\u3044\u3092\u8abf\u6574\u3059\u308b\u306e\u306b 20000 \u79d2 (= 10 / 0.0005) \u3064\u307e\u308a 5 \u6642\u9593\u534a\u3082\u304b\u304b\u3063\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u3053\u3068\u3092\u982d\u306b\u7f6e\u3044\u3066\u304a\u304b\u306a\u304f\u3066\n\u306f\u306a\u3089\u306a\u3044\u3002\u306a\u304a\u3001\u8d77\u52d5\u6642\u306b -x \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4e0e\u3048\u308b\u4ee3\u308f\u308a\u306b\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e tinker \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u4f7f\u3048\u3070 step\n\u95be\u5024\u3068 stepout\u95be\u5024\u3092\u4efb\u610f\u306e\u5024\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\n```\n\nmaxpoll\u3068\u304b\u306f\u7279\u306b\u5909\u3048\u3066\u3044\u306a\u3044\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e10\u30671024\u79d2\u3067\u3001minpoll\u3082\u30c7\u30d5\u30a9\u30eb\u30c86\u306a\u306e\u306764\u79d2\u304b\u30891024\u79d2\u306e\u9593\u306e\u3044\u305a\u308c\u304b\u306e\u9593\u9694\u3067\u540c\u671f\u78ba\u8a8d\u3057\u306b\u884c\u3063\u3066\u308b\u306f\u305a\u3002\uff08\u73fe\u5728\u5024\u306f`ntpq -p`\u3067\u898b\u305f\u6642\u306epoll\uff09\n\n```\n       server address [options ...]\n\u30b5\u30fc\u30d0\u306b\u5bfe\u3057\u3066\u6642\u9593\u78ba\u8a8d\u3092\u884c\u3046\u983b\u5ea6\u306e\u3053\u3068\u3092\u3001\u30dd\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb (poll interval) \u3068\u547c\u3076\u3002\u30dd\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u306f\u3001\nntpd \u3067\u306f\u52d5\u7684\u306b\u5909\u5316\u3057\u3066\u3044\u304f\u3002\u3053\u308c\u306f\u3001\u6700\u5c0f (minpoll) \u3068\u6700\u5927 (maxpoll) \u3067\u898f\u5b9a\u3055\u308c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306e\n\u6642\u8a08\u304c\u5b89\u5b9a\u3057\u306a\u3044\u3046\u3061\u306f 64 \u79d2\u6bce\u3001\u305d\u308c\u304b\u3089\u6b21\u7b2c\u306b\u3001128 \u79d2\u3001256 \u79d2\u3068\u9593\u9694\u304c\u9577\u304f\u306a\u308a\u3001\u6700\u7d42\u7684\u306b\u306f\u6700\u5927\u30dd\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\n\u30d0\u30eb\u3067\u3042\u308b 1024 \u79d2 (\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5834\u5408) \u306b\u843d\u3061\u7740\u304f\u3002\u3053\u308c\u3089\u3075\u305f\u3064\u306e\u5024\u306f server \u30b3\u30de\u30f3\u30c9\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066 \n\"minpoll num \" \u307e\u305f\u306f \"maxpoll num \" \u3042\u308b\u3044\u306f\u305d\u306e\u4e21\u65b9\u3092\u6307\u5b9a\u3057\u3066\u3001\u5909\u66f4\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\u9593\u9055\u3048\u3084\u3059\u3044\u306e\u306f\u3001\u3053\n\u306e num \u304c\u6587\u5b57\u901a\u308a\u306e\u79d2\u6570\u3067\u306f\u306a\u3044\u3068\u3044\u3046\u70b9\u3060\u3002num \u306f 2\u3092\u57fa\u5e95\u3068\u3059\u308b\u6307\u6570\u3001\u3064\u307e\u308a 2n \u306e n \u306b\u3042\u305f\u308b\u3082\u306e (\u30d3\u30c3\u30c8\u6570\u3068\n\u3082\u8a00\u3048\u308b)\u3002maxpoll \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f 10 (1024\u79d2) \u3067\u3001\u6307\u5b9a\u53ef\u80fd\u306a\u6700\u5927\u5024\u306f 17 (\u7d0436\u6642\u959325\u5206)\u3002minpoll \u306e\u30c7\u30d5\u30a9\n\u30eb\u30c8\u306f 6 (64\u79d2) \u3067\u3001\u6307\u5b9a\u3067\u304d\u308b\u6700\u5c0f\u5024\u306f 4 (16\u79d2) \u3068\u306a\u3063\u3066\u3044\u308b\u3002\u4f8b\u3067\u306f maxpoll \u3092 30\u5206\u304f\u3089\u3044\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u3001\nnum \u3092 11 (\u7d0434\u5206) \u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\u307e\u305f\u3001minpoll \u3092 30 \u79d2\u304f\u3089\u3044\u306b\u3057\u305f\u3044\u306a\u3089 num \u306b\u306f 5 (32\u79d2) \u3092\u6307\u5b9a\u3059\u308b\u3002\n```\n\n#### \u69cb\u6210\u3068ntp.conf\u306e\u5185\u5bb9\u306a\u3069\n\n\u540c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30ea\u30a2\u5185\u306b\u3044\u308b2\u53f0\u306entp\u30b5\u30fc\u30d0\u3092\u307f\u3066\u3044\u3066\u305d\u306e\uff12\u53f0\u306f\u540c\u3058\u5730\u57df\u306e\u516c\u958bntp\u30b5\u30fc\u30d0\u3092\u898b\u306b\u884c\u3063\u3066\u308b\u3002\npeer\u306f\u3064\u304b\u3063\u3066\u304a\u3089\u305aserver\u3060\u3051\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\nrestrict\u3082FW\u7684\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5236\u9650\u8a2d\u5b9a\u304c\u3042\u308b\u305f\u3081\u660e\u793a\u7684\u306b\u4f7f\u3063\u3066\u3044\u306a\u3044\u3002\n\u6642\u523b\u540c\u671f\u306b\u6697\u53f7\u5316\u306e\u5fc5\u8981\u6027\u3092\u611f\u3058\u306a\u3044\u306e\u3067\u3082\u3061\u308d\u3093\u8a8d\u8a3c\u3082\u4f7f\u3063\u3066\u3044\u306a\u3044\u3002\n\n`server -4 ldap1.mng.hoge.local iburst`\n\n-4\u306fIPV4\u3068\u3044\u3046\u610f\u5473\u3002\niburst\u306f\u8d77\u52d5\u6642\u306e\u307f8\u56de\u901a\u4fe1\u3067\u521d\u56de\u306e\u540c\u671f\u901f\u5ea6\u3092\u4e0a\u3052\u3066\u308b\u3002\n\u516c\u958b\u30b5\u30fc\u30d0\u306b\u4f55\u56de\u3082\u884c\u304f\u306e\u306f\u975e\u63a8\u5968\u3089\u3057\u3044\u306e\u3067\u3001burst\u306f\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u3002\n\u30ed\u30fc\u30ab\u30eb\u30a8\u30ea\u30a2\u5185\u3082\u30d1\u30b1\u30c3\u30c8\u304c\u5897\u3048\u308b\u306e\u306f\u3069\u3046\u304b\u3068\u304a\u3082\u3063\u3066iburst\u306b\u3057\u3066\u3044\u308b\u3002\n\u30ed\u30fc\u30ab\u30eb\u30a8\u30ea\u30a2\u5185\u306fpeer\u3064\u304b\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u304b\u3082\u3068\u601d\u3063\u3066\u305f\u304c\u304a\u4e92\u3044\u304c\u304a\u4e92\u3044\u3092\u66f4\u65b0\u3059\u308b\u3063\u3066\u306e\u3068\n\u52d5\u7684\u306b\u5909\u5316\u3059\u308b\u74b0\u5883\u306a\u306e\u3067peer\u306f\u7121\u7406\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u308b\u3002\n\n#### \u30ed\u30b0\u3092\u8a73\u7d30\u306b\u51fa\u3057\u305f\u308a\u8abf\u3079\u305f\u308a\u3057\u305f\u3044\n\n\u8abf\u3079\u305f\u3089\u3053\u3093\u306a\u2193\u304b\u3093\u3058\u3089\u3057\u3044\u3002\u3082\u3057\u304f\u306f`cron\u3067ntpq -c readvar`\u306e\u7d50\u679c\u3092\u30ed\u30ae\u30f3\u30b0\u3068\u304b\u3002\n\n```\n$ sudo vi /etc/ntp.conf\nlogfile /var/log/ntpd.log\nlogconfig =all\n```\n\n#### chronyd\u306e\u98a8\u306e\u3046\u308f\u3055\uff08\u305f\u3081\u3057\u3066\u306a\u304f\u3066\u898b\u304b\u3051\u305f\u3060\u3051\uff09\n\nCentOS7\u304b\u3089\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6642\u523b\u540c\u671f\u30c7\u30fc\u30e2\u30f3\u304cchronyd\u306b\u4ee3\u308f\u308b\u304c\nslew\u30e2\u30fc\u30c9\u304c\u307e\u3068\u3082\u306b\u52d5\u4f5c\u3059\u308b\u304b\u3069\u3046\u304b\u602a\u3057\u3044\u3068\u3044\u3046\u554f\u984c\u306b\u3064\u3044\u3066\u3001\n\u3044\u3061\u304a\u3046ntpd\u3067-x\u3067slew\u3067\u52d5\u304f\u306e\u3067\u305d\u308c\u3067\u3044\u3044\u306e\u3067\u306f\u3068\u3044\u3046\u8a71\u3067\u304a\u3061\u3064\u3044\u3066\u3044\u308b\u304c\u3001\nCentOS7\u306echronyd\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304b\u3089leapsecmode slew\u306a\u3069\u3057\u3066\u304a\u304f\u3068\u3088\u3044\u6a21\u69d8\u3002\nhttp://qiita.com/ynishimura0922/items/ab4fed24f680aa034f82\n\n\u53c2\u8003\uff1a\nhttp://d.hatena.ne.jp/incarose86/20110505/1312522379\nhttp://www.asahi-net.or.jp/~AA4T-NNGK/ntpd.html\nhttp://kaworu.jpn.org/doc/FreeBSD/jman/man5/ntp.conf.5.php\nhttps://access.redhat.com/documentation/ja-JP/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/s1-Configure_NTP.html\nhttp://qiita.com/kirksencho/items/f789af7ed6046278b9d3\nhttp://qiita.com/ynishimura0922/items/ab4fed24f680aa034f82\nhttp://support.ntp.org/bin/view/Servers/NTPPoolServers\nhttp://dev.classmethod.jp/cloud/aws/clock-on-amazon-linux-and-ntp/\nhttp://qiita.com/pitan/items/1cb3f78dd936afc6aa32\nhttps://developers.google.com/time/guides?hl=ja\nhttp://blog.serverworks.co.jp/tech/2016/12/24/leapsecond/\nhttp://www.geocities.co.jp/SiliconValley-Bay/9357/ntpq.html\nhttp://www.cisco.com/cisco/web/support/JP/100/1007/1007845_ntpassoc-j.html\nhttps://hiroki.jp/leap-second-2015\nhttp://luna2-linux.blogspot.jp/2015/07/201571.html\n", "tags": ["ntp"]}