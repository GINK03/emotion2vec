{"context": "kubernetes\u74b0\u5883\u304c\u308f\u3089\u308f\u3089\u7acb\u3061\u59cb\u3081\u3066\u304d\u305f\u306e\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3057\u306a\u304c\u3089\u89e6\u3063\u3066\u307f\u305f\u3044\u306a\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3088\u3055\u6c17\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63a2\u3057\u307e\u3057\u305f\u304c\u307e\u3060\u66f4\u65b0\u7cfb\u306f\u305d\u3093\u306a\u306b\u306a\u3044\u307f\u305f\u3044\u3067\u3059\u3002\nkubectl\u3092\u53e9\u304f\u306e\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u6a19\u6e96\u51fa\u529b\u3055\u308c\u308b\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u5f62\u5f0f\u3092\u30b7\u30a7\u30eb\u7b49\u3067\u3044\u3058\u308b\u306e\u3082\u9762\u5012\u3067\u3059\u3002\u3002\n\u305d\u3053\u3067\u3001REST API\u3092\u53e9\u3044\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u306a\u304a\u3001rest \u4e00\u89a7\u306f\u3001localhost:8080 \u3067k8s\u3092\u7acb\u3066\u305f\u3089\u3001\n\nhttp://localhost:8080/swagger-ui\n\n\u3067\u78ba\u8a8d\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\nhttpoison\u3068poison\u304c\u3042\u308c\u3070\u3044\u3051\u308b\u306e\u3067\u3001mix.exs\u3092\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\n\nmix.exs\n  def application do\n    [applications: [:logger, :httpoison]]\n  end\n\n  defp deps do\n    [\n      {:httpoison, \"~> 0.8.0\"},\n      {:poison, \"~> 2.0\"}\n    ]\n\n\n\u4f8b\u3048\u3070\u4e0b\u8a18\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u3057\u3066\u307f\u307e\u3057\u305f\u3002\ndef ExK8S\n\n  @base_url  \"localhost:8080/apis/extensions/v1beta1/namespaces/default\" \n\n  def show_deployments do\n    url = @base_url <> \"/deployments\"\n\n    case HTTPoison.get(url) do\n      {:ok, response} ->\n        IO.puts(response.body)\n\n      {:error, error} ->\n        IO.inspect(error.reason)\n    end\n  end\n\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\n{\n  \"kind\": \"DeploymentList\",\n  \"apiVersion\": \"extensions/v1beta1\",\n  \"metadata\": {\n    \"selfLink\": \"/apis/extensions/v1beta1/namespaces/default/deployments\",\n    \"resourceVersion\": \"543\"\n  },\n  \"items\": [\n    {\n      \"metadata\": {\n        \"name\": \"nginx\",\n        \"namespace\": \"default\",\n        \"selfLink\": \"/apis/extensions/v1beta1/namespaces/default/deployments/nginx\",\n        \"uid\": \"2403844c-02e8-11e6-9089-9c5c8e718ea8\",\n        \"resourceVersion\": \"267\",\n        \"generation\": 2,\n        \"creationTimestamp\": \"2016-04-15T08:57:54Z\",\n        \"labels\": {\n          \"run\": \"nginx\"\n        },\n        \"annotations\": {\n          \"deployment.kubernetes.io/revision\": \"1\"\n        }\n      },\n      \"spec\": {\n        \"replicas\": 1,\n        \"selector\": {\n          \"matchLabels\": {\n            \"run\": \"nginx\"\n          }\n        },\n        \"template\": {\n          \"metadata\": {\n            \"creationTimestamp\": null,\n            \"labels\": {\n              \"run\": \"nginx\"\n            }\n          },\n          \"spec\": {\n            \"containers\": [\n              {\n                \"name\": \"nginx\",\n                \"image\": \"nginx\",\n                \"ports\": [\n                  {\n                    \"containerPort\": 80,\n                    \"protocol\": \"TCP\"\n                  }\n                ],\n                \"resources\": {},\n                \"terminationMessagePath\": \"/dev/termination-log\",\n                \"imagePullPolicy\": \"Always\"\n              }\n            ],\n            \"restartPolicy\": \"Always\",\n            \"terminationGracePeriodSeconds\": 30,\n            \"dnsPolicy\": \"ClusterFirst\",\n            \"securityContext\": {}\n          }\n        },\n        \"strategy\": {\n          \"type\": \"RollingUpdate\",\n          \"rollingUpdate\": {\n            \"maxUnavailable\": 1,\n            \"maxSurge\": 1\n          }\n        }\n      },\n      \"status\": {\n        \"observedGeneration\": 2,\n        \"replicas\": 1,\n        \"updatedReplicas\": 1,\n        \"availableReplicas\": 1\n      }\n    }\n  ]\n}\n\n\u3068\u3001Json\u304c\u305d\u306e\u307e\u307e\u53d6\u308c\u307e\u3057\u305f\u3002\n\u304a\u3001\u3044\u3051\u305d\u3046\u3058\u3083\u3093\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3001rolling update\u7b49\u3092\u3088\u3057\u306a\u306b\u5b9f\u884c\u3067\u304d\u308b\u304b\u3092\u4eca\u5f8c\u306f\u5b9f\u9a13\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u672c\u65e5\u306f\u4ee5\u4e0a\u3067\u3059\u3002\nkubernetes\u74b0\u5883\u304c\u308f\u3089\u308f\u3089\u7acb\u3061\u59cb\u3081\u3066\u304d\u305f\u306e\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3057\u306a\u304c\u3089\u89e6\u3063\u3066\u307f\u305f\u3044\u306a\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3088\u3055\u6c17\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u63a2\u3057\u307e\u3057\u305f\u304c\u307e\u3060\u66f4\u65b0\u7cfb\u306f\u305d\u3093\u306a\u306b\u306a\u3044\u307f\u305f\u3044\u3067\u3059\u3002\n\nkubectl\u3092\u53e9\u304f\u306e\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u6a19\u6e96\u51fa\u529b\u3055\u308c\u308b\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u5f62\u5f0f\u3092\u30b7\u30a7\u30eb\u7b49\u3067\u3044\u3058\u308b\u306e\u3082\u9762\u5012\u3067\u3059\u3002\u3002\n\n\u305d\u3053\u3067\u3001REST API\u3092\u53e9\u3044\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u306a\u304a\u3001rest \u4e00\u89a7\u306f\u3001localhost:8080 \u3067k8s\u3092\u7acb\u3066\u305f\u3089\u3001\n\n* http://localhost:8080/swagger-ui\n\n\u3067\u78ba\u8a8d\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\nhttpoison\u3068poison\u304c\u3042\u308c\u3070\u3044\u3051\u308b\u306e\u3067\u3001mix.exs\u3092\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\n\n```mix.exs\n  def application do\n    [applications: [:logger, :httpoison]]\n  end\n\n  defp deps do\n    [\n      {:httpoison, \"~> 0.8.0\"},\n      {:poison, \"~> 2.0\"}\n    ]\n```\n\n\u4f8b\u3048\u3070\u4e0b\u8a18\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```ex\ndef ExK8S\n\n  @base_url  \"localhost:8080/apis/extensions/v1beta1/namespaces/default\" \n\n  def show_deployments do\n    url = @base_url <> \"/deployments\"\n\n    case HTTPoison.get(url) do\n      {:ok, response} ->\n        IO.puts(response.body)\n\n      {:error, error} ->\n        IO.inspect(error.reason)\n    end\n  end\n```\n\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\n\n```json\n{\n  \"kind\": \"DeploymentList\",\n  \"apiVersion\": \"extensions/v1beta1\",\n  \"metadata\": {\n    \"selfLink\": \"/apis/extensions/v1beta1/namespaces/default/deployments\",\n    \"resourceVersion\": \"543\"\n  },\n  \"items\": [\n    {\n      \"metadata\": {\n        \"name\": \"nginx\",\n        \"namespace\": \"default\",\n        \"selfLink\": \"/apis/extensions/v1beta1/namespaces/default/deployments/nginx\",\n        \"uid\": \"2403844c-02e8-11e6-9089-9c5c8e718ea8\",\n        \"resourceVersion\": \"267\",\n        \"generation\": 2,\n        \"creationTimestamp\": \"2016-04-15T08:57:54Z\",\n        \"labels\": {\n          \"run\": \"nginx\"\n        },\n        \"annotations\": {\n          \"deployment.kubernetes.io/revision\": \"1\"\n        }\n      },\n      \"spec\": {\n        \"replicas\": 1,\n        \"selector\": {\n          \"matchLabels\": {\n            \"run\": \"nginx\"\n          }\n        },\n        \"template\": {\n          \"metadata\": {\n            \"creationTimestamp\": null,\n            \"labels\": {\n              \"run\": \"nginx\"\n            }\n          },\n          \"spec\": {\n            \"containers\": [\n              {\n                \"name\": \"nginx\",\n                \"image\": \"nginx\",\n                \"ports\": [\n                  {\n                    \"containerPort\": 80,\n                    \"protocol\": \"TCP\"\n                  }\n                ],\n                \"resources\": {},\n                \"terminationMessagePath\": \"/dev/termination-log\",\n                \"imagePullPolicy\": \"Always\"\n              }\n            ],\n            \"restartPolicy\": \"Always\",\n            \"terminationGracePeriodSeconds\": 30,\n            \"dnsPolicy\": \"ClusterFirst\",\n            \"securityContext\": {}\n          }\n        },\n        \"strategy\": {\n          \"type\": \"RollingUpdate\",\n          \"rollingUpdate\": {\n            \"maxUnavailable\": 1,\n            \"maxSurge\": 1\n          }\n        }\n      },\n      \"status\": {\n        \"observedGeneration\": 2,\n        \"replicas\": 1,\n        \"updatedReplicas\": 1,\n        \"availableReplicas\": 1\n      }\n    }\n  ]\n}\n```\n\n\u3068\u3001Json\u304c\u305d\u306e\u307e\u307e\u53d6\u308c\u307e\u3057\u305f\u3002\n\n\u304a\u3001\u3044\u3051\u305d\u3046\u3058\u3083\u3093\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3001rolling update\u7b49\u3092\u3088\u3057\u306a\u306b\u5b9f\u884c\u3067\u304d\u308b\u304b\u3092\u4eca\u5f8c\u306f\u5b9f\u9a13\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n---\n\n\u672c\u65e5\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n", "tags": ["Elixir", "kubernetes"]}