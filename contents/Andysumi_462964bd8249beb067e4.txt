{"context": "\u8077\u5834\u3067\u30bf\u30b9\u30af\u7ba1\u7406\u306b\u300cTrello\u300d\u3068\u3044\u3046\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u30bf\u30b9\u30af\u306e\u72b6\u6cc1\u304c\u8996\u899a\u7684\u306b\u5206\u304b\u308a\u3084\u3059\u304f\u3001\u5c11\u4eba\u6570\u306e\u30c1\u30fc\u30e0\u306e\u30bf\u30b9\u30af\u7ba1\u7406\u306b\u306f\u30d4\u30c3\u30bf\u30ea\u3002\n\u306a\u3093\u3067\u3059\u304c\u3001\u4eba\u6570\u304c\u5897\u3048\u3066\u304f\u308b\u3068\u3001\u8ffd\u52a0\u3057\u305f\u30bf\u30b9\u30af\u3084\u30b3\u30e1\u30f3\u30c8\u306b\u306a\u304b\u306a\u304b\u6c17\u3065\u3044\u3066\u304f\u308c\u306a\u3044\u3068\u3044\u3046\u4e8b\u304c\u5ea6\u3005\u30fb\u30fb\u30fb\u306a\u3093\u3068\u304b\u51fa\u6765\u306a\u3044\u304b\u3068\u8abf\u3079\u3066\u3044\u308b\u3068\u3001\u300cWebhook\u300d\u306a\u308bAPI\u3092\u767a\u898b\u3057\u307e\u3057\u305f\uff01\n\u793e\u5185\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306fChatwork\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u9023\u643a\u3067\u304d\u306a\u3044\u304b\u3068\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u69cb\u60f3\n\nTrello\u3067\u30ab\u30fc\u30c9\u306e\u767b\u9332\u3084\u30b3\u30e1\u30f3\u30c8\u7b49\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\nGoogle Apps Script\u306bWebhook\u3067\u901a\u77e5\nWebhook\u3092\u30c8\u30ea\u30ac\u30fc\u3068\u3057\u3066\u3001chatwork\u3078\u901a\u77e5\n\n\nAPI Key\u3068API Token\u306e\u53d6\u5f97\u3059\u308b\nAPI Key\u3068API Token\u306e\u53d6\u5f97\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u300c\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u300d\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\nGoogle Apps Script\u304b\u3089Trello API\u3092\u4f7f\u3063\u3066Card\u3092\u4f5c\u6210\u3059\u308b\n\n\n\nWebhook\u3092\u4f5c\u6210\u3059\u308b\n\nWebhook\u3092\u53d7\u3051\u53d6\u308bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\nGoogle Apps Script\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e\u300c\u516c\u958b -> \u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5c0e\u5165\u2026\u300d\u304b\u3089\u3001Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u516c\u958b\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u6642\u8868\u793a\u3055\u308c\u308bURL (https://script.google.com/macros/s/xxxxxxxxxxxxxxxxxxx/exec) \u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3059\u3002 \n\nTrello API\u3092\u4f7f\u3063\u3066Webhook\u3092\u8a2d\u5b9a\u3059\u308b\n\ncode.gs\nfunction createWebhook(){\n  var scriptProp =  PropertiesService.getScriptProperties().getProperties();\n  var trelloKey = scriptProp.TRELLO_API_KEY;\n  var trelloToken = scriptProp.TRELLO_TOKEN;\n\n  var url = 'https://api.trello.com/1/tokens/' + trelloToken + '/webhooks/?key=' + trelloKey;\n  var options = {\n    'method' : 'post',\n    'payload' : {\n      'description': 'My first Webhook!',\n      'callbackURL': '\u5148\u307b\u3069\u30e1\u30e2\u3057\u305fURL',\n      'idModel': '\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308bBoar\u306eID'\n    }\n  }\n  Logger.log(UrlFetchApp.fetch(url, options));\n}\n\n\n\n\u30ed\u30b0\n{\n    \"active\": true, \n    \"callbackURL\": \"'\u5148\u307b\u3069\u30e1\u30e2\u3057\u305fURL'\", \n    \"description\": \"My first Webhook!\", \n    \"id\": \"56e21998e35cf05844744512\", \n    \"idModel\": \"\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308bBoar\u306eID\"\n}\n\n\n\u2191\u3053\u306e\u3088\u3046\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3063\u3066\u304d\u3066\u3044\u305f\u3089\u3001Webhook\u306e\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308a\u3001Chatwork\u3078\u901a\u77e5\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\nTrello API\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n\ncode.gs\nfunction doPost(e){\n  var contents = JSON.parse(e.postData.contents);\n\n  var actionType = contents.action.type;\n  // actionType\u304c'commentCard'\u4ee5\u5916\u306e\u5834\u5408\u306f\u7d42\u4e86\u3002\n  if(actionType !== 'commentCard'){ return }\n\n  var cardName = contents.action.data.card.name;\n  var userName = '[piconname:' + user[contents.action.memberCreator.username] + ']';\n  var shortLink = 'https://trello.com/c/' + contents.action.data.card.shortLink;\n\n  var message = '[info][title]' + cardName + '[/title]' + comment + '\\n     by ' + userName + '[hr]' + shortLink + '[/info]';\n\n  var cw = ChatWorkClient.factory({token: chatworkToken});\n  cw.sendMessage({room_id: chatworkRoomId, body: message});\n}\n\n\n\u30ab\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u305f\u6642\u3001\u30b3\u30e1\u30f3\u30c8\u3092\u3057\u305f\u6642\u306a\u3069\u3042\u3089\u3086\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u901a\u77e5\u3055\u308c\u308b\u306e\u3067\u3001\u73fe\u5728\u306f\u3001\u30ab\u30fc\u30c9\u306b\u30b3\u30e1\u30f3\u30c8\u3057\u305f\u6642\uff08actionType\u304c'commentCard'\u306e\u6642\uff09\u306e\u307f\u901a\u77e5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nChatWorkClient\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8ffd\u52a0\nChatwork\u3078\u306e\u6295\u7a3f\u306f\u3001\u300c ChatWork Client for Google Apps Script \u300d\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e\u300c\u30ea\u30bd\u30fc\u30b9 > \u30e9\u30a4\u30d6\u30e9\u30ea\u300d\u3088\u308a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\u6700\u5f8c\u306b\nTrello API\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308b\u3068\u3001Webhook\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u51fa\u6765\u308b\u3088\u3046\u3060\u3051\u3069\u3001\u3046\u307e\u304f\u3044\u304b\u305a\u65ad\u5ff5\u30fb\u30fb\u30fb\n\u3082\u3057\u3001\u51fa\u6765\u305f\u65b9\u304c\u3044\u305f\u3089\u6559\u3048\u3066\u304f\u3060\u3055\u3044m\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\n\nTrello\u306b\u300cWebhook API\u300d\u3068\u3044\u3046\u306e\u304c\u3042\u3063\u305f\u306e\u304b\uff08\u5358\u306a\u308b\u96d1\u8a18\uff09\nTrello \u306e Webhook API \u3092PHP\u3067\u53d7\u3051\u53d6\u3063\u3066\u307f\u305f\n2013\u5e74\u5ea6\u7248 5\u5206\u3067\u59cb\u3081\u308bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(Google Apps Script)\n\n\n\u8077\u5834\u3067\u30bf\u30b9\u30af\u7ba1\u7406\u306b\u300c[Trello](https://trello.com/)\u300d\u3068\u3044\u3046\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u30bf\u30b9\u30af\u306e\u72b6\u6cc1\u304c\u8996\u899a\u7684\u306b\u5206\u304b\u308a\u3084\u3059\u304f\u3001\u5c11\u4eba\u6570\u306e\u30c1\u30fc\u30e0\u306e\u30bf\u30b9\u30af\u7ba1\u7406\u306b\u306f\u30d4\u30c3\u30bf\u30ea\u3002\n\u306a\u3093\u3067\u3059\u304c\u3001\u4eba\u6570\u304c\u5897\u3048\u3066\u304f\u308b\u3068\u3001\u8ffd\u52a0\u3057\u305f\u30bf\u30b9\u30af\u3084\u30b3\u30e1\u30f3\u30c8\u306b\u306a\u304b\u306a\u304b\u6c17\u3065\u3044\u3066\u304f\u308c\u306a\u3044\u3068\u3044\u3046\u4e8b\u304c\u5ea6\u3005\u30fb\u30fb\u30fb\u306a\u3093\u3068\u304b\u51fa\u6765\u306a\u3044\u304b\u3068\u8abf\u3079\u3066\u3044\u308b\u3068\u3001\u300cWebhook\u300d\u306a\u308bAPI\u3092\u767a\u898b\u3057\u307e\u3057\u305f\uff01\n\u793e\u5185\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u306fChatwork\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u9023\u643a\u3067\u304d\u306a\u3044\u304b\u3068\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u69cb\u60f3\n1. Trello\u3067\u30ab\u30fc\u30c9\u306e\u767b\u9332\u3084\u30b3\u30e1\u30f3\u30c8\u7b49\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\n2. Google Apps Script\u306bWebhook\u3067\u901a\u77e5\n3. Webhook\u3092\u30c8\u30ea\u30ac\u30fc\u3068\u3057\u3066\u3001chatwork\u3078\u901a\u77e5\n\n# API Key\u3068API Token\u306e\u53d6\u5f97\u3059\u308b\nAPI Key\u3068API Token\u306e\u53d6\u5f97\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u300c\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u300d\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n> - [Google Apps Script\u304b\u3089Trello API\u3092\u4f7f\u3063\u3066Card\u3092\u4f5c\u6210\u3059\u308b](http://qiita.com/Andysumi/items/eb281c3f0d4d30aa8a88#api-key%E3%81%A8api-token%E3%81%AE%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B)\n\n# Webhook\u3092\u4f5c\u6210\u3059\u308b\n## Webhook\u3092\u53d7\u3051\u53d6\u308bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\nGoogle Apps Script\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e\u300c\u516c\u958b -> \u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5c0e\u5165\u2026\u300d\u304b\u3089\u3001Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u516c\u958b\u3057\u307e\u3059\u3002\n\n![setting.png](https://qiita-image-store.s3.amazonaws.com/0/53215/cc7f96cc-bbf6-c059-5d72-21115c630c25.png)\n\n\u3053\u306e\u6642\u8868\u793a\u3055\u308c\u308bURL (https://script.google.com/macros/s/xxxxxxxxxxxxxxxxxxx/exec) \u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3059\u3002 \n\n## Trello API\u3092\u4f7f\u3063\u3066Webhook\u3092\u8a2d\u5b9a\u3059\u308b\n```js:code.gs\nfunction createWebhook(){\n  var scriptProp =  PropertiesService.getScriptProperties().getProperties();\n  var trelloKey = scriptProp.TRELLO_API_KEY;\n  var trelloToken = scriptProp.TRELLO_TOKEN;\n  \n  var url = 'https://api.trello.com/1/tokens/' + trelloToken + '/webhooks/?key=' + trelloKey;\n  var options = {\n    'method' : 'post',\n    'payload' : {\n      'description': 'My first Webhook!',\n      'callbackURL': '\u5148\u307b\u3069\u30e1\u30e2\u3057\u305fURL',\n      'idModel': '\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308bBoar\u306eID'\n    }\n  }\n  Logger.log(UrlFetchApp.fetch(url, options));\n}\n```\n```lang:\u30ed\u30b0\n{\n    \"active\": true, \n    \"callbackURL\": \"'\u5148\u307b\u3069\u30e1\u30e2\u3057\u305fURL'\", \n    \"description\": \"My first Webhook!\", \n    \"id\": \"56e21998e35cf05844744512\", \n    \"idModel\": \"\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308bBoar\u306eID\"\n}\n```\n\u2191\u3053\u306e\u3088\u3046\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3063\u3066\u304d\u3066\u3044\u305f\u3089\u3001Webhook\u306e\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308a\u3001Chatwork\u3078\u901a\u77e5\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n- [Trello API\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://developers.trello.com/apis/webhooks)\n\n```js:code.gs\nfunction doPost(e){\n  var contents = JSON.parse(e.postData.contents);\n  \n  var actionType = contents.action.type;\n  // actionType\u304c'commentCard'\u4ee5\u5916\u306e\u5834\u5408\u306f\u7d42\u4e86\u3002\n  if(actionType !== 'commentCard'){ return }\n\n  var cardName = contents.action.data.card.name;\n  var userName = '[piconname:' + user[contents.action.memberCreator.username] + ']';\n  var shortLink = 'https://trello.com/c/' + contents.action.data.card.shortLink;\n  \n  var message = '[info][title]' + cardName + '[/title]' + comment + '\\n     by ' + userName + '[hr]' + shortLink + '[/info]';\n\n  var cw = ChatWorkClient.factory({token: chatworkToken});\n  cw.sendMessage({room_id: chatworkRoomId, body: message});\n}\n```\n\u30ab\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u305f\u6642\u3001\u30b3\u30e1\u30f3\u30c8\u3092\u3057\u305f\u6642\u306a\u3069\u3042\u3089\u3086\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u901a\u77e5\u3055\u308c\u308b\u306e\u3067\u3001\u73fe\u5728\u306f\u3001\u30ab\u30fc\u30c9\u306b\u30b3\u30e1\u30f3\u30c8\u3057\u305f\u6642\uff08actionType\u304c'commentCard'\u306e\u6642\uff09\u306e\u307f\u901a\u77e5\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n# ChatWorkClient\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8ffd\u52a0\nChatwork\u3078\u306e\u6295\u7a3f\u306f\u3001\u300c [ChatWork Client for Google Apps Script](https://github.com/cw-shibuya/chatwork-client-gas) \u300d\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e\u300c\u30ea\u30bd\u30fc\u30b9 > \u30e9\u30a4\u30d6\u30e9\u30ea\u300d\u3088\u308a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n![\u30e9\u30a4\u30d5\u3099\u30e9\u30ea.png](https://qiita-image-store.s3.amazonaws.com/0/53215/8bb65982-57c0-2ce7-4bd6-e474fe878ed0.png)\n\n\n# \u6700\u5f8c\u306b\n[Trello API\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://developers.trello.com/apis/webhooks)\u306b\u3088\u308b\u3068\u3001Webhook\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u51fa\u6765\u308b\u3088\u3046\u3060\u3051\u3069\u3001\u3046\u307e\u304f\u3044\u304b\u305a\u65ad\u5ff5\u30fb\u30fb\u30fb\n\u3082\u3057\u3001\u51fa\u6765\u305f\u65b9\u304c\u3044\u305f\u3089\u6559\u3048\u3066\u304f\u3060\u3055\u3044m\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\n> - [Trello\u306b\u300cWebhook API\u300d\u3068\u3044\u3046\u306e\u304c\u3042\u3063\u305f\u306e\u304b\uff08\u5358\u306a\u308b\u96d1\u8a18\uff09](http://qiita.com/kijtra/items/1fa4de285967cd012144)\n> - [Trello \u306e Webhook API \u3092PHP\u3067\u53d7\u3051\u53d6\u3063\u3066\u307f\u305f](https://kijtra.com/article/trello-webhook-api-php/)\n> - [2013\u5e74\u5ea6\u7248 5\u5206\u3067\u59cb\u3081\u308bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(Google Apps Script)](http://qiita.com/soundTricker/items/a4878d7e3100082576e4)\n", "tags": ["GoogleAppsScript", "Trello"]}