{"tags": ["Rails5", "devise"], "context": "\n\n\u74b0\u5883\n\nRails: 5.0.0\n\ndevise: 4.2.0\n\n\n\u554f\u984c\n\nRails\u3068devise\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u3066\u30c6\u30b9\u30c8\u3057\u305f\u3068\u3053\u308d\u3001\u30e6\u30fc\u30b6\u767b\u9332\u6642\u306b\u78ba\u8a8d\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3055\u308c\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\n\n\n\u539f\u56e0\nUser\u30e2\u30c7\u30eb\u306b\u3001after_create\u3092\u5b9f\u88c5\u3057\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3060\u3063\u305f\u3002\n# models/user.rb:\n\nclass User < ActiveRecord::Base\n  after_create { |record|\n    hoge\n  }\nend\n\n\u6df1\u304f\u8abf\u3079\u3066\u3044\u306a\u3044\u304c\u3001Devise\u306eConfirmable\u30e2\u30b8\u30e5\u30fc\u30eb\u306eafter_commit\u3067\u5b9a\u7fa9\u3057\u305f\u5185\u5bb9\u304c\u3001after_create\u306b\u3088\u3063\u3066\u4e0a\u66f8\u304d\u3055\u308c\u305f\u306e\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u308b\u3002\n# devise/lib/devise/models/confirmable.rb:\n\n    module Confirmable\n      extend ActiveSupport::Concern\n\n      included do\n        before_create :generate_confirmation_token, if: :confirmation_required?\n        after_create :skip_reconfirmation_in_callback!, if: :send_confirmation_notification?\n        if respond_to?(:after_commit) # ActiveRecord\n          after_commit :send_on_create_confirmation_instructions, on: :create, if: :send_confirmation_notification?\n\nhttps://github.com/plataformatec/devise/blob/88724e10adaf9ffd1d8dbfbaadda2b9d40de756a/lib/devise/models/confirmable.rb#L48\n\n\u5bfe\u5fdc\u65b9\u6cd5\nUser\u30e2\u30c7\u30eb\u5185\u3067after_create\u306e\u4ee3\u308f\u308a\u306bafter_create_commit\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u305f\u3089\u3001\u78ba\u8a8d\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n# models/user.rb:\n\nclass User < ActiveRecord::Base\n  after_create_commit :hoge\nend\n\n# \u74b0\u5883\n\n- Rails: 5.0.0\n- [devise](https://github.com/plataformatec/devise): 4.2.0\n\n# \u554f\u984c\n\n- Rails\u3068devise\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u3066\u30c6\u30b9\u30c8\u3057\u305f\u3068\u3053\u308d\u3001\u30e6\u30fc\u30b6\u767b\u9332\u6642\u306b\u78ba\u8a8d\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3055\u308c\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\n\n# \u539f\u56e0\n\nUser\u30e2\u30c7\u30eb\u306b\u3001`after_create`\u3092\u5b9f\u88c5\u3057\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3060\u3063\u305f\u3002\n\n```rb\n# models/user.rb:\n\nclass User < ActiveRecord::Base\n  after_create { |record|\n    hoge\n  }\nend\n```\n\n\u6df1\u304f\u8abf\u3079\u3066\u3044\u306a\u3044\u304c\u3001Devise\u306eConfirmable\u30e2\u30b8\u30e5\u30fc\u30eb\u306e`after_commit`\u3067\u5b9a\u7fa9\u3057\u305f\u5185\u5bb9\u304c\u3001`after_create`\u306b\u3088\u3063\u3066\u4e0a\u66f8\u304d\u3055\u308c\u305f\u306e\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u308b\u3002\n\n```rb\n# devise/lib/devise/models/confirmable.rb:\n\n    module Confirmable\n      extend ActiveSupport::Concern\n\n      included do\n        before_create :generate_confirmation_token, if: :confirmation_required?\n        after_create :skip_reconfirmation_in_callback!, if: :send_confirmation_notification?\n        if respond_to?(:after_commit) # ActiveRecord\n          after_commit :send_on_create_confirmation_instructions, on: :create, if: :send_confirmation_notification?\n```\n\nhttps://github.com/plataformatec/devise/blob/88724e10adaf9ffd1d8dbfbaadda2b9d40de756a/lib/devise/models/confirmable.rb#L48\n\n# \u5bfe\u5fdc\u65b9\u6cd5\n\nUser\u30e2\u30c7\u30eb\u5185\u3067`after_create`\u306e\u4ee3\u308f\u308a\u306b`after_create_commit`\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u305f\u3089\u3001\u78ba\u8a8d\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n```rb\n# models/user.rb:\n\nclass User < ActiveRecord::Base\n  after_create_commit :hoge\nend\n```\n"}