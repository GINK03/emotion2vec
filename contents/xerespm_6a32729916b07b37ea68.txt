{"tags": ["OpenSSH", "SSH", "Ubuntu", "ubuntu16.04"], "context": "\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30b7\u30fc\u30ea\u30f3\u30b0\u7b49\u3067 rm /etc/ssh/ssh_host* \u3059\u308b\u306e\u306f\u5b9a\u756a\u3060\u3068\u601d\u3046\u304c\u3001\nUbuntu 16.04 LTS Server \u3060\u3068 SSH \u306e\u30db\u30b9\u30c8\u30ad\u30fc\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u305a\u30cf\u30de\u3063\u305f\u3002\n$ rm /etc/ssh/ssh_host*\n$ sudo systemctl stop sshd\n$ sudo systemctl start sshd\n$ ls /etc/ssh/\nmoduli                ssh_config                ssh_import_id\nsshd_config\n\n\u3042\u3001\u3042\u308c\uff1f\u81ea\u52d5\u751f\u6210\u3055\u308c\u3066\u306a\u3044\uff1f\n$ sudo systemctl status sshd\n* ssh.service - OpenBSD Secure Shell server\n   Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)\n   Active: active (running) since Wed 2016-04-27 16:41:35 JST; 5min ago\n  Process: 1326 ExecReload=/bin/kill -HUP $MAINPID (code=exited, status=0/SUCCESS)\n Main PID: 1701 (sshd)\n    Tasks: 1 (limit: 512)\n   Memory: 1.5M\n      CPU: 154ms\n   CGroup: /system.slice/ssh.service\n           `-1701 /usr/sbin/sshd -D\n\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_rsa_key\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_dsa_key\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_ecdsa_key\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_ed25519_key\nApr 27 16:41:35 ubuntu sshd[1701]: Server listening on 0.0.0.0 port 22.\nApr 27 16:41:35 ubuntu sshd[1701]: Server listening on :: port 22.\nApr 27 16:41:35 ubuntu systemd[1]: Started OpenBSD Secure Shell server.\n\n\u304a\u3001\u305d\u3046\u3060\u306a\uff01\n$ sudo ssh-keygen -A\nssh-keygen: generating new host keys: RSA DSA ECDSA ED25519\n$ ls /etc/ssh/\nmoduli                ssh_host_ecdsa_key        ssh_host_rsa_key\nssh_config            ssh_host_ecdsa_key.pub    ssh_host_rsa_key.pub\nssh_host_dsa_key      ssh_host_ed25519_key      ssh_import_id\nssh_host_dsa_key.pub  ssh_host_ed25519_key.pub  sshd_config\n$ sudo systemctl start sshd\n\nssh-keygen -A \u3067\u624b\u52d5\u751f\u6210\u3059\u308b\u3053\u3068\u3067\u7121\u4e8b\u306b\u8d77\u52d5\u3057\u305f\u3002\n\u3046\u30fc\u3093\u3001\u307e\u3001\u89e3\u6c7a\u3057\u305f\u3057\u3001\u3053\u308c\u3067\u3044\u3063\u304b\uff01(\u96d1\n\n2016/05/02\u8ffd\u8a18:\n\u77e5\u4eba\u306b Debian/Ubuntu \u4f7f\u3044\u306a\u3089 dpkg-reconfigure \u4f7f\u3044\u306a\u3055\u3044\u3068\u8a00\u308f\u308c\u305f\u3002\n\u3055\u30fc\u305b\u3093\uff57\uff57\uff57\n$ dpkg-reconfigure openssh-server\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30b7\u30fc\u30ea\u30f3\u30b0\u7b49\u3067 `rm /etc/ssh/ssh_host*` \u3059\u308b\u306e\u306f\u5b9a\u756a\u3060\u3068\u601d\u3046\u304c\u3001\nUbuntu 16.04 LTS Server \u3060\u3068 SSH \u306e\u30db\u30b9\u30c8\u30ad\u30fc\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u305a\u30cf\u30de\u3063\u305f\u3002\n\n```console\n$ rm /etc/ssh/ssh_host*\n$ sudo systemctl stop sshd\n$ sudo systemctl start sshd\n$ ls /etc/ssh/\nmoduli                ssh_config                ssh_import_id\nsshd_config\n```\n\n\u3042\u3001\u3042\u308c\uff1f\u81ea\u52d5\u751f\u6210\u3055\u308c\u3066\u306a\u3044\uff1f\n\n```console\n$ sudo systemctl status sshd\n* ssh.service - OpenBSD Secure Shell server\n   Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)\n   Active: active (running) since Wed 2016-04-27 16:41:35 JST; 5min ago\n  Process: 1326 ExecReload=/bin/kill -HUP $MAINPID (code=exited, status=0/SUCCESS)\n Main PID: 1701 (sshd)\n    Tasks: 1 (limit: 512)\n   Memory: 1.5M\n      CPU: 154ms\n   CGroup: /system.slice/ssh.service\n           `-1701 /usr/sbin/sshd -D\n\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_rsa_key\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_dsa_key\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_ecdsa_key\nApr 27 16:41:35 ubuntu sshd[1701]: Could not load host key: /etc/ssh/ssh_host_ed25519_key\nApr 27 16:41:35 ubuntu sshd[1701]: Server listening on 0.0.0.0 port 22.\nApr 27 16:41:35 ubuntu sshd[1701]: Server listening on :: port 22.\nApr 27 16:41:35 ubuntu systemd[1]: Started OpenBSD Secure Shell server.\n```\n\n\u304a\u3001\u305d\u3046\u3060\u306a\uff01\n\n```console\n$ sudo ssh-keygen -A\nssh-keygen: generating new host keys: RSA DSA ECDSA ED25519\n$ ls /etc/ssh/\nmoduli                ssh_host_ecdsa_key        ssh_host_rsa_key\nssh_config            ssh_host_ecdsa_key.pub    ssh_host_rsa_key.pub\nssh_host_dsa_key      ssh_host_ed25519_key      ssh_import_id\nssh_host_dsa_key.pub  ssh_host_ed25519_key.pub  sshd_config\n$ sudo systemctl start sshd\n```\n\n`ssh-keygen -A` \u3067\u624b\u52d5\u751f\u6210\u3059\u308b\u3053\u3068\u3067\u7121\u4e8b\u306b\u8d77\u52d5\u3057\u305f\u3002\n\n\u3046\u30fc\u3093\u3001\u307e\u3001\u89e3\u6c7a\u3057\u305f\u3057\u3001\u3053\u308c\u3067\u3044\u3063\u304b\uff01(\u96d1\n\n#### 2016/05/02\u8ffd\u8a18:\n\n\u77e5\u4eba\u306b Debian/Ubuntu \u4f7f\u3044\u306a\u3089 `dpkg-reconfigure` \u4f7f\u3044\u306a\u3055\u3044\u3068\u8a00\u308f\u308c\u305f\u3002\n\u3055\u30fc\u305b\u3093\uff57\uff57\uff57\n\n```console\n$ dpkg-reconfigure openssh-server\n```\n"}