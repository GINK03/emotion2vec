{"tags": ["GoogleCloudPlatform", "gcp", "gce", "Peco", "SSH"], "context": " More than 1 year has passed since last update.\n\nGoogle Compute Engine\u3078\u306essh\u3092peco\u3067\u52b9\u7387\u5316\u3059\u308b\n\n\u6982\u8981\nGCP(Google Cloud Platform)\u4e0a\u306b\u3042\u308bGCE\u3078ssh\u3059\u308b\u969b\u3001Developer Console\u304b\u3089ssh\u3057\u305f\u308assh\u30b3\u30de\u30f3\u30c9\u3092\u30b3\u30d4\u30da\u3057\u305f\u308a\u306e\u904b\u7528\u3092\u4e0d\u4fbf\u306b\u611f\u3058\u3066\u3044\u307e\u3057\u305f\u3002\u3082\u3063\u3068\u52b9\u7387\u3088\u304f\u51fa\u6765\u306a\u3044\u304b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u524d\u63d0\n\npeco\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\nbrew install peco\u3082\u3057\u304f\u306fbrew tap peco/peco && brew install peco\n\nGCP\u306b1\u3064\u4ee5\u4e0aGCE\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\ngcloud\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\nhttps://cloud.google.com/sdk/gcloud/\n\n\n\n\u5b9f\u65bd\nGCP\u4e0a\u306b\u3042\u304c\u3063\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u60c5\u5831\u3092\u53d6\u5f97\n$ gcloud compute instances list | awk \"NR>1 {print \\$1,\\$2}\" > ~/.ssh/gce_hosts\n\n\u7121\u4e8b\u53d6\u308c\u307e\u3057\u305f\u3002\u30ea\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u30ea\u30fc\u30b8\u30e7\u30f3\u3082\u5165\u308c\u3066\u307e\u3059\u3002\n$ cat ~/.ssh/gce_hosts\ndev-build-0 asia-east1-a\ndev-cache-0 asia-east1-a\ndev-db-0 asia-east1-a\ndev-redis-mkhz asia-east1-a\ndev-web-0 asia-east1-a\ndev-web-autoscaler-zg1o asia-east1-a\n\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fgce_hosts\u3068peco\u3092\u4f7f\u3063\u3066ssh\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3002\n$ gcloud compute ssh --zone $(cat ~/.ssh/gce_hosts | peco | awk \"{print \\$2,\\$1}\")\n\n\u304a\u304a\u3001\u3053\u308c\u306f\u4fbf\u5229\uff01\n\nuser ~]$ gcloud compute ssh --zone $(cat ~/.ssh/gce_hosts | peco | awk \"{print \\$2,\\$1}\")\nWarning: Permanently added '0.0.0.0' (RSA) to the list of known hosts.\n[user@dev-web-0 ~]$\n\n\n\u3061\u306a\u307f\u306b\n.bashrc\u306balias\u8cbc\u3063\u3066\u304a\u304f\u3068\u3055\u3089\u306b\u4fbf\u5229\u3002\nalias reload-gcessh='gcloud compute instances list | awk \"NR>1 {print \\$1,\\$2}\" > ~/.ssh/gce_hosts'\nalias peco-gcessh='gcloud compute ssh --zone $(cat ~/.ssh/gce_hosts | peco | awk \"{print \\$2,\\$1}\")'\n\n# Google Compute Engine\u3078\u306essh\u3092peco\u3067\u52b9\u7387\u5316\u3059\u308b\n## \u6982\u8981\nGCP(Google Cloud Platform)\u4e0a\u306b\u3042\u308bGCE\u3078ssh\u3059\u308b\u969b\u3001Developer Console\u304b\u3089ssh\u3057\u305f\u308assh\u30b3\u30de\u30f3\u30c9\u3092\u30b3\u30d4\u30da\u3057\u305f\u308a\u306e\u904b\u7528\u3092\u4e0d\u4fbf\u306b\u611f\u3058\u3066\u3044\u307e\u3057\u305f\u3002\u3082\u3063\u3068\u52b9\u7387\u3088\u304f\u51fa\u6765\u306a\u3044\u304b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u524d\u63d0\n- peco\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b   \n `brew install peco`\u3082\u3057\u304f\u306f`brew tap peco/peco && brew install peco`\n- GCP\u306b1\u3064\u4ee5\u4e0aGCE\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\n- gcloud\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b   \n    https://cloud.google.com/sdk/gcloud/\n\n## \u5b9f\u65bd\nGCP\u4e0a\u306b\u3042\u304c\u3063\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u60c5\u5831\u3092\u53d6\u5f97\n\n```bash\n$ gcloud compute instances list | awk \"NR>1 {print \\$1,\\$2}\" > ~/.ssh/gce_hosts\n```\n\n\u7121\u4e8b\u53d6\u308c\u307e\u3057\u305f\u3002\u30ea\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u30ea\u30fc\u30b8\u30e7\u30f3\u3082\u5165\u308c\u3066\u307e\u3059\u3002\n\n```bash\n$ cat ~/.ssh/gce_hosts\ndev-build-0 asia-east1-a\ndev-cache-0 asia-east1-a\ndev-db-0 asia-east1-a\ndev-redis-mkhz asia-east1-a\ndev-web-0 asia-east1-a\ndev-web-autoscaler-zg1o asia-east1-a\n```\n\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fgce_hosts\u3068peco\u3092\u4f7f\u3063\u3066ssh\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3002\n\n```bash\n$ gcloud compute ssh --zone $(cat ~/.ssh/gce_hosts | peco | awk \"{print \\$2,\\$1}\")\n```\n\n\u304a\u304a\u3001\u3053\u308c\u306f\u4fbf\u5229\uff01\n![Screen Shot 2015-09-02 at 19.01.28.png](https://qiita-image-store.s3.amazonaws.com/0/20310/68c0be49-40f5-e014-8a94-7333e244cf08.png)\n\n```bash\nuser ~]$ gcloud compute ssh --zone $(cat ~/.ssh/gce_hosts | peco | awk \"{print \\$2,\\$1}\")\nWarning: Permanently added '0.0.0.0' (RSA) to the list of known hosts.\n[user@dev-web-0 ~]$\n```\n\n## \u3061\u306a\u307f\u306b\n.bashrc\u306balias\u8cbc\u3063\u3066\u304a\u304f\u3068\u3055\u3089\u306b\u4fbf\u5229\u3002\n\n```bash\nalias reload-gcessh='gcloud compute instances list | awk \"NR>1 {print \\$1,\\$2}\" > ~/.ssh/gce_hosts'\nalias peco-gcessh='gcloud compute ssh --zone $(cat ~/.ssh/gce_hosts | peco | awk \"{print \\$2,\\$1}\")'\n```\n"}