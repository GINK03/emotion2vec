{"tags": ["Python", "python3", "JSON", "\u30d5\u30a1\u30a4\u30eb\u64cd\u4f5c", "\u30a2\u30af\u30bb\u30b9\u89e3\u6790"], "context": "\n\n\u3010 \u60f3\u5b9a\u3059\u308b\u30c7\u30fc\u30bf\u30fb\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f \u3011\uff08\u4f8b\uff09\u30ed\u30b0\u30fb\u30d5\u30a1\u30a4\u30eb\n\n\n\u5404\u884c\u306b\u30011\u500b\u306e\u5b8c\u7d50\u3057\u305f\uff08\u72ec\u7acb\u3057\u305f\uff09json\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u304c \u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u3002\n\u5404\u884c\u306e\u884c\u672b \u306b \u30ab\u30f3\u30de \u306f\u306a\u3057\n\n\n\n\u30c7\u30fc\u30bf\u30fb\u30d5\u30a1\u30a4\u30eb\u306b\u7a7a\u884c\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001JSON\u30d1\u30fc\u30b5\u30fc\u306b\u98df\u308f\u305b\u308b\u6bb5\u968e\u3067\u30b3\u30b1\u308b\n\n\n\u53d6\u308a\u6271\u3046\u30d5\u30a1\u30a4\u30eb \u306b\u3001\u7a7a\u884c\u304c\u542b\u307e\u308c\u306a\u3044\u5834\u5408\uff08readlines\u30e1\u30bd\u30c3\u30c9\u3067\u4e00\u6c17\u306b\u8aad\u307f\u8fbc\u307f\uff09\n\u7a7a\u884c\u542b\u3080\u30d5\u30a1\u30a4\u30eb\u3092\u6271\u3046\u5834\u5408\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u5f8c\u6bb5\u306b\u8a18\u8f09\u3057\u305f\u3001readline\u30e1\u30bd\u30c3\u30c9\u3067\uff11\u884c\u305a\u3064\u8aad\u307f\u8fbc\u3093\u3067\u7a7a\u884c\u5224\u5b9a\uff06\u9664\u53bb\u3092\u884c\u3046\u3084\u308a\u65b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\nPython3\nimport json\nimport types\n\nwith open('user_access_record.log') as f:\n    lines = f.readlines()\n\n# print(type(lines))\n## <class 'list'>\n\n# print(len(lines))\n# print(lines[0])\n\n\n\n\u30ea\u30b9\u30c8\u306e\u5404\u8981\u7d20\u306e\u30c7\u30fc\u30bf\u578b \u306f\u3001 str\u578b\n\n\nPython3\nprint(type(lines[0]))\n# <class 'str'> \n\n\n\uff11\u4ef6\u6bce\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u306b\u3001\u4e0d\u8981\u306a\u30c7\u30fc\u30bf\u9805\u76ee\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u9069\u5b9c\u3001\u9664\u53bb\n\n\uff08\u4f8b\uff09 TAB\u8a18\u53f7\uff08/t\uff09\u306e\u524d\u306b\u3001\u4e0d\u8981\u306a\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001TAB\u8a18\u53f7\u3092\u533a\u5207\u308a\u6587\u5b57\u306b\u3057\u3066\u3001TAB\u4ee5\u964d\u306e\u307f\u53d6\u5f97\uff08\u5404\u884c\u306b\u3001TAB\u306f\uff11\u7b87\u6240\u3057\u304b\u51fa\u73fe\u3057\u306a\u3044\u3053\u3068\u304c\u524d\u63d0\uff09\n\n\nPython3\ncleaned_lines = [line.split('\\t')[1] for line in lines]\n# print(len(cleaned_lines))\n# print(cleaned_lines[0])\n\n\n\n\u30ea\u30b9\u30c8\u306e\u5404\u8981\u7d20\u306e\u30c7\u30fc\u30bf\u578b \u306f\u3001 str\u578b\n\n\nPython3\nprint(type(cleaned_lines[0]))\n# <class 'str'>\n\n\n\njson parser \u3067 JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u306b \u5909\u63db\n\n\nPython3\njson_encoded_lines = [json.loads(line) for line in cleaned_lines]\n# print(len(json_encoded_lines))\n\nprint(type(json_encoded_lines))\n# <class 'list'>\n\n\n\n\u30ea\u30b9\u30c8\u306e\u5404\u8981\u7d20\u306e\u30c7\u30fc\u30bf\u578b \u306f\u3001 dict\u578b\nJSON\u5f62\u5f0f \u306f\u3001Python\u306edict\u578b \u3068 \u540c\u3058\u306a\u306e\u3067\u3001dict\u578b \u3068\u3057\u3066 \u8a8d\u8b58\u3055\u308c\u308b\n\n\nPython3\nprint(type(json_encoded_lines[0]))\n# <class 'dict'>\n\n\n\nPython3\n# print(json_encoded_lines[0])\n\n\n\njson.dumps\u30e1\u30bd\u30c3\u30c9 \u3067 JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3092\u898b\u3084\u3059\u3044\u5f62\u5f0f\u3067\u6a19\u6e96\u51fa\u529b\u306b\u8868\u793a\u3057\u3066\u304f\u308c\u308b\n\n\nPython3\nprint(json.dumps(json_encoded_lines[0], sort_keys=True, indent=4))\n\n\n\n\n\u30ed\u30b0\u30c7\u30fc\u30bf\u30fb\u30d5\u30a1\u30a4\u30eb\u306b\u7a7a\u884c\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001JSON\u30d1\u30fc\u30b5\u30fc\u306b\u98df\u308f\u305b\u308b\u6bb5\u968e\u3067\u30b3\u30b1\u308b\n\n\nreadline\u30e1\u30bd\u30c3\u30c9\u3067\uff11\u884c\u305a\u3064\u3001\u7a7a\u884c\u5224\u5b9a\uff06\u7a7a\u884c\u9664\u53bb\u3059\u308b\u306e\u304c\u8ce2\u3044\n\n\nPython3\nimport json\n\nlines = []\n\nwith open('user_access_record.log') as f:\n    while True:\n        log_line = f.readline()\n        if log_line == '':\n            break\n        line = log_line.split('\\t')[1] # TAB\u306e\u524d\u306b\u4e0d\u8981\u306aTimestamp\u304c\u3042\u308b\u306e\u3067\u9664\u53bb\n        lines.append(json.loads(line))\n\n\n\n\nPython3\n# print(len(lines))\n# print(lines[0])\n\nimport types\nprint(type(lines[0]))\n# <class 'dict'>\n\n# print(json.dumps(lines[0], sort_keys=True, indent=4))\n# print(json.dumps(lines[2000], sort_keys=True, indent=4))\n\n\n\n###__\u3010 \u60f3\u5b9a\u3059\u308b\u30c7\u30fc\u30bf\u30fb\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f \u3011\uff08\u4f8b\uff09\u30ed\u30b0\u30fb\u30d5\u30a1\u30a4\u30eb__\n\n* \u5404\u884c\u306b\u30011\u500b\u306e\u5b8c\u7d50\u3057\u305f\uff08\u72ec\u7acb\u3057\u305f\uff09json\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u304c \u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u3002\n* \u5404\u884c\u306e\u884c\u672b \u306b \u30ab\u30f3\u30de \u306f\u306a\u3057\n\n___\n\n###__\u30c7\u30fc\u30bf\u30fb\u30d5\u30a1\u30a4\u30eb\u306b\u7a7a\u884c\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001JSON\u30d1\u30fc\u30b5\u30fc\u306b\u98df\u308f\u305b\u308b\u6bb5\u968e\u3067\u30b3\u30b1\u308b__\n* __\u53d6\u308a\u6271\u3046\u30d5\u30a1\u30a4\u30eb \u306b\u3001\u7a7a\u884c\u304c\u542b\u307e\u308c\u306a\u3044\u5834\u5408\uff08readlines\u30e1\u30bd\u30c3\u30c9\u3067\u4e00\u6c17\u306b\u8aad\u307f\u8fbc\u307f\uff09__\n* __\u7a7a\u884c\u542b\u3080\u30d5\u30a1\u30a4\u30eb\u3092\u6271\u3046\u5834\u5408\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u5f8c\u6bb5\u306b\u8a18\u8f09\u3057\u305f\u3001readline\u30e1\u30bd\u30c3\u30c9\u3067\uff11\u884c\u305a\u3064\u8aad\u307f\u8fbc\u3093\u3067\u7a7a\u884c\u5224\u5b9a\uff06\u9664\u53bb\u3092\u884c\u3046\u3084\u308a\u65b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002__\n\n\n```{python:Python3}\nimport json\nimport types\n\nwith open('user_access_record.log') as f:\n    lines = f.readlines()\n\t\n# print(type(lines))\n## <class 'list'>\n\n# print(len(lines))\n# print(lines[0])\n```\n\n* __\u30ea\u30b9\u30c8\u306e\u5404\u8981\u7d20\u306e\u30c7\u30fc\u30bf\u578b \u306f\u3001 str\u578b__\n\n```{python:Python3}\nprint(type(lines[0]))\n# <class 'str'> \n```\n\n__\uff11\u4ef6\u6bce\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u306b\u3001\u4e0d\u8981\u306a\u30c7\u30fc\u30bf\u9805\u76ee\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u9069\u5b9c\u3001\u9664\u53bb__\n\n* \uff08\u4f8b\uff09 TAB\u8a18\u53f7\uff08/t\uff09\u306e\u524d\u306b\u3001\u4e0d\u8981\u306a\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001TAB\u8a18\u53f7\u3092\u533a\u5207\u308a\u6587\u5b57\u306b\u3057\u3066\u3001TAB\u4ee5\u964d\u306e\u307f\u53d6\u5f97\uff08\u5404\u884c\u306b\u3001TAB\u306f\uff11\u7b87\u6240\u3057\u304b\u51fa\u73fe\u3057\u306a\u3044\u3053\u3068\u304c\u524d\u63d0\uff09\n\n```{python:Python3}\ncleaned_lines = [line.split('\\t')[1] for line in lines]\n# print(len(cleaned_lines))\n# print(cleaned_lines[0])\n```\n\n* __\u30ea\u30b9\u30c8\u306e\u5404\u8981\u7d20\u306e\u30c7\u30fc\u30bf\u578b \u306f\u3001 str\u578b__\n\n```{python:Python3}\nprint(type(cleaned_lines[0]))\n# <class 'str'>\n```\n\n* __json parser \u3067 JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u306b \u5909\u63db__\n\n```{python:Python3}\njson_encoded_lines = [json.loads(line) for line in cleaned_lines]\n# print(len(json_encoded_lines))\n\nprint(type(json_encoded_lines))\n# <class 'list'>\n```\n\n* __\u30ea\u30b9\u30c8\u306e\u5404\u8981\u7d20\u306e\u30c7\u30fc\u30bf\u578b \u306f\u3001 dict\u578b__\n* JSON\u5f62\u5f0f \u306f\u3001Python\u306edict\u578b \u3068 \u540c\u3058\u306a\u306e\u3067\u3001dict\u578b \u3068\u3057\u3066 \u8a8d\u8b58\u3055\u308c\u308b\n\n```{python:Python3}\nprint(type(json_encoded_lines[0]))\n# <class 'dict'>\n```\n\n```{python:Python3}\n# print(json_encoded_lines[0])\n```\n\n\n* __json.dumps\u30e1\u30bd\u30c3\u30c9 \u3067 JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3092\u898b\u3084\u3059\u3044\u5f62\u5f0f\u3067\u6a19\u6e96\u51fa\u529b\u306b\u8868\u793a\u3057\u3066\u304f\u308c\u308b__\n\n```{python:Python3}\nprint(json.dumps(json_encoded_lines[0], sort_keys=True, indent=4))\n```\n\n___\n\n###__\u30ed\u30b0\u30c7\u30fc\u30bf\u30fb\u30d5\u30a1\u30a4\u30eb\u306b\u7a7a\u884c\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001JSON\u30d1\u30fc\u30b5\u30fc\u306b\u98df\u308f\u305b\u308b\u6bb5\u968e\u3067\u30b3\u30b1\u308b__\n####__readline\u30e1\u30bd\u30c3\u30c9\u3067\uff11\u884c\u305a\u3064\u3001\u7a7a\u884c\u5224\u5b9a\uff06\u7a7a\u884c\u9664\u53bb\u3059\u308b\u306e\u304c\u8ce2\u3044__\n\n```{python:Python3}\nimport json\n\nlines = []\n\nwith open('user_access_record.log') as f:\n    while True:\n        log_line = f.readline()\n        if log_line == '':\n            break\n        line = log_line.split('\\t')[1] # TAB\u306e\u524d\u306b\u4e0d\u8981\u306aTimestamp\u304c\u3042\u308b\u306e\u3067\u9664\u53bb\n        lines.append(json.loads(line))\n\n```\n\n\n```{python:Python3}\n# print(len(lines))\n# print(lines[0])\n\nimport types\nprint(type(lines[0]))\n# <class 'dict'>\n\n# print(json.dumps(lines[0], sort_keys=True, indent=4))\n# print(json.dumps(lines[2000], sort_keys=True, indent=4))\n```\n"}