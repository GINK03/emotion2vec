{"context": "Drupal7 \u3067\u306f PHP 5.6 \u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001Drupal8 \u3067\u306f \u9ad8\u901f\u52d5\u4f5c\u304c\u671f\u5f85\u3067\u304d\u308b PHP7\u3092\u4f7f\u3044\u305f\u3044\u3067\u3059\u306d\u3002\n\u4eca\u56de\u306f\u3001Vagrant\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b CentOS6.7 \u306e PHP \u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3063\u305f\u3068\u304d\u306e\u30e1\u30e2\u3067\u3059\u3002\n\n\u4f5c\u696d\u74b0\u5883\n\nMAC OS X El Capitan\nVagrant 1.7.4\nCentOS release 6.7 (Final)\nPHP 5.6.17\uff08yum\u7ba1\u7406\uff09  \u2192 PHP 7.0.11\uff08\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff09\nApache 2.4.23\uff08yum\u7ba1\u7406\uff09  \u2192 Apache 2.4.23\uff08\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff09\nMySQL  5.6.33\nDrupal7/8\n\n\u4ee5\u4e0a\u306e CentOS6.7 \u74b0\u5883\u4e0b\u3067\u3001Apache 2.4\u3001PHP5.6 \u306fyum\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u3092\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u65b0\u305f\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b PHP7 \u306f\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u5408\u308f\u305b\u3066 mod_php \u3068\u4f9d\u5b58\u95a2\u4fc2\u306b\u3042\u308b Apache 2.4 \u3082\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u76f4\u3057\u307e\u3057\u305f\u3002\n\n\u5404\u7a2e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nPHP7 \u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u3042\u3089\u304b\u3058\u3081yum\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n# yum install pcre-devel\n# yum install libxml2-devel\n# yum install openssl-devel\n# yum install bzip2\n# yum install bzip2-devel\n# yum install libbz2\n# yum install libbz2-dev\n# yum install lbzip2-utils\n# yum install lbzip2-devel\n# yum install libssl-dev\n# yum install curl-devel\n# yum install db4-devel\n# yum install libXpm-devel\n# yum install gmp-devel\n# yum install libc-client-devel\n# yum install openldap-devel\n# yum install postgresql-devel\n# yum install aspell-devel\n# yum install libxslt-devel\n# yum install libxml2-devel\n# yum install pcre-devel\n# yum install t1lib-devel.x86_64\n# yum install libmcrypt-devel.x86_64\n# yum install libpng-devel\n# yum install libjpeg-devel\n# yum install libfreetype-dev\n# yum install freetype-devel.x86_64\n\n\nApache2.4\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eApache\u3092\u3044\u3063\u305f\u3093\u524a\u9664\u3057\u3066\u3001\u65b0\u305f\u306b\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nApache HTTP Server 2.4\nhttp://httpd.apache.org/download.cgi#apache24\nApache2.4 \u3067\u306f APR \u3068 APR-util \u304c\u5fc5\u8981\u306a\u306e\u3067\u3053\u3061\u3089\u3082\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nhttp://apr.apache.org/download.cgi\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306f\u3001Vagrant\u30de\u30b7\u30f3\u4e0a\u306e /vagrant \u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\uff08\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u4efb\u610f\u306e\u5834\u6240\u306b\u4fdd\u5b58\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\uff09\n\nyum\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b Apache2.4 \u3092\u524a\u9664\u3059\u308b\n# yum remove httpd24*\n# rm -rf /opt/rh/httpd24/root/etc/httpd\n# rm -rf /etc/httpd\n\n\nApache2.4\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n# cd /vagrant\n# tar -xjvf httpd-2.4.18.tar.bz2\n# tar -xzvf apr-1.5.2.tar.gz\n# cp -r apr-1.5.2 httpd-2.4.18/srclib/apr\n# tar -xzvf apr-util-1.5.4.tar.gz\n# cp -r apr-util-1.5.4 httpd-2.4.18/srclib/apr-util\n# cd httpd-2.4.18\n# ./configure\n# make\n# make install\n\n\nhttp.conf\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\n# vim /usr/local/apache2/conf/httpd.conf\n\nmod_rewrite\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3057\u3066\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\nLoadModule rewrite_module modules/mod_rewrite.so\n\nDirectoryIndex\u306e\u8a2d\u5b9a\u884c\u3092\u898b\u3064\u3051\u305f\u3089 index.php \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n<IfModule dir_module>\n    DirectoryIndex index.php index.html\n</IfModule>\n\nhttp.conf \u306e\u6700\u7d42\u884c\u306b SetHandler \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n<FilesMatch \\.php$>\n    SetHandler application/x-httpd-php\n</FilesMatch>\n\nhttp.conf \u306e\u69cb\u6587\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\"Syntax OK\"\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u7de8\u96c6\u5b8c\u4e86\u3067\u3059\u3002\n# /usr/local/apache2/bin/httpd -t\nSyntax OK\n\n\nPHP7\u304c\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\nPHP\u304c\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b phpinfo() \u306e\u7d50\u679c\u3092\u8868\u793a\u3057\u307e\u3059\u3002\nphpinfo.php \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n# cd /usr/local/apache2/htdocs\n# vim phpinfo.php\n<?php phpinfo(); ?>\n\nApache2.4\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n# /usr/local/apache2/bin/apachectl start\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u8868\u793a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nhttp://[\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9]/phpinfo.php\n\nApache\u306e\u81ea\u52d5\u8d77\u52d5\u3092\u8a2d\u5b9a\u3059\u308b\n# cp /vagrant/httpd-2.4.23/build/rpm/httpd.init /etc/init.d/httpd\n# vim /etc/init.d/httpd\n\n\u524d\uff09 httpd=${HTTPD-/usr/sbin/httpd}\n\u5f8c\uff09 httpd=${HTTPD-/usr/local/apache2/bin/httpd}\n\n\u524d\uff09 pidfile=${PIDFILE-/var/run/${prog}.pid}\n\u5f8c\uff09 pidfile=${PIDFILE-/usr/local/apache2/logs/httpd.pid}\n\n\u524d\uff09 CONFFILE=/etc/httpd/conf/httpd.conf\n\u5f8c\uff09 CONFFILE=/usr/local/apache2/conf/httpd.conf\n\n\nApache\u3092\u30b5\u30fc\u30d3\u30b9\u306b\u767b\u9332\u3059\u308b\nchkconfig\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d3\u30b9\u767b\u9332\u3057\u307e\u3059\u3002\n$ chkconfig --add httpd\n\n\u30b5\u30fc\u30d3\u30b9\u4e00\u89a7\u306b\u767b\u9332\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ chkconfig --list httpd\nhttpd           0:off   1:off   2:off   3:off   4:off   5:off   6:off\n\n\u30b5\u30fc\u30d3\u30b9\u3092\u30aa\u30f3\u306b\u3057\u307e\u3059\u3002\n$ chkconfig httpd on\n\n\u30b5\u30fc\u30d3\u30b9\u304c\u81ea\u52d5\u8d77\u52d5\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ chkconfig --list httpd\nhttpd           0:off   1:off   2:on    3:on    4:on    5:on    6:off\n\n\u4ee5\u4e0a\u3067Apache2.4\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u304c\u3001\u305d\u306e\u4ed6\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nPHP7\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\nPHP7\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nCurrent Stable PHP\nhttp://www.php.net/downloads.php\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306f\u3001Vagrant\u30de\u30b7\u30f3\u4e0a\u306e /vagrant \u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\uff08\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u4efb\u610f\u306e\u5834\u6240\u306b\u4fdd\u5b58\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\uff09\n\n\u53e4\u3044PHP\u3092\u524a\u9664\u3059\u308b\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306ePHP5.6\u3092\u3044\u3063\u305f\u3093\u524a\u9664\u3057\u3066\u3001\u65b0\u305f\u306b\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u4f5c\u696d\u524d\u306b Apache \u3092\u3044\u3063\u305f\u3093\u505c\u6b62\u3057\u307e\u3059\u3002\n# /usr/local/apache2/bin/apachectl stop\n\n\u3067\u306f\u3001yum\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b PHP5.6 \u3092\u524a\u9664\u3057\u307e\u3059\u3002\n$ sudo yum remove php*\n\nPHP5.6\u304c\u524a\u9664\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ yum list installed | grep php\n\n\nPHP7\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n# tar -xjvf php-7.0.2.tar.bz2\n# cd php-7.0.2\n# ./configure --with-apxs2=/usr/local/apache2/bin/apxs --libdir=/usr/lib64 --with-libdir=lib64 --with-curl --disable-debug --with-pic --disable-rpath --without-pear --with-bz2 --with-freetype-dir --with-png-dir --with-xpm-dir --enable-gd-native-ttf --without-gdbm --with-gettext --with-iconv --with-jpeg-dir --with-openssl --with-pcre-regex --with-zlib --enable-exif --enable-ftp --enable-sockets --enable-calendar --with-libxml-dir --enable-xml --with-mhash --enable-mbstring --enable-mbregex --with-gd --enable-bcmath --with-xmlrpc --with-mysqli --with-pdo-mysql --with-curl --with-pdo-mysql --enable-json --enable-zip --without-readline --with-mcrypt\n\n# make\n# make install\n# cp php.ini-development /usr/local/php7/lib/php.ini\n\nphp.ini\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n# vim /usr/local/php7/lib/php.ini\n\nDrupal\u306fMySQL\u3078\u306e\u63a5\u7d9a\u306bPDO\u3092\u5229\u7528\u3059\u308b\u306e\u3067 MysqL PDO \u306e\u63a5\u7d9a\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\npdo_mysql.default_socket=/var/lib/mysql/mysql.sock\n\n\u5927\u898f\u6a21\u30b5\u30a4\u30c8\u306b\u3082\u8010\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3057\u307e\u3059\u3002\nmemory_limit = 256M\nrealpath_cache_size = 256k\nrealpath_cache_ttl = 3600\nupload_max_filesize = 20M\npost_max_size = 64M\n\n\nApache\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n# /usr/local/apache2/bin/apachectl start\n\n\n\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\nApache2.4\u3001PHP7 \u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u307e\u3059\u3002\n# export PATH=$PATH:/usr/local/apache2/bin:/usr/local/php7/bin\n\n\u901a\u3057\u305f\u30d1\u30b9\u3092\u5168\u30e6\u30fc\u30b6\u30fc\u3078\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b /etc/profile \u306e\u6700\u7d42\u884c\u306b\u3082\u8ffd\u52a0\u3057\u307e\u3059\u3002\n# vim /etc/profile\nexport PATH=$PATH:/usr/local/apache2/bin:/usr/local/php7/bin\n\n\u4ee5\u4e0a\u3067\u3059\u3002 \u3053\u308c\u3067Drupal7/8\u304c\u52d5\u4f5c\u3067\u304d\u308b\u74b0\u5883\u304c\u6574\u3044\u307e\u3057\u305f\u3002\nDrupal7 \u3067\u306f PHP 5.6 \u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001Drupal8 \u3067\u306f \u9ad8\u901f\u52d5\u4f5c\u304c\u671f\u5f85\u3067\u304d\u308b PHP7\u3092\u4f7f\u3044\u305f\u3044\u3067\u3059\u306d\u3002\n\u4eca\u56de\u306f\u3001Vagrant\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b CentOS6.7 \u306e PHP \u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3063\u305f\u3068\u304d\u306e\u30e1\u30e2\u3067\u3059\u3002\n\n##\u4f5c\u696d\u74b0\u5883\n\n- MAC OS X El Capitan\n- Vagrant 1.7.4\n- CentOS release 6.7 (Final)\n- PHP 5.6.17\uff08yum\u7ba1\u7406\uff09  \u2192 PHP 7.0.11\uff08\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff09\n- Apache 2.4.23\uff08yum\u7ba1\u7406\uff09  \u2192 Apache 2.4.23\uff08\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff09\n- MySQL  5.6.33\n- Drupal7/8\n\n\u4ee5\u4e0a\u306e CentOS6.7 \u74b0\u5883\u4e0b\u3067\u3001Apache 2.4\u3001PHP5.6 \u306fyum\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u3092\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u65b0\u305f\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b PHP7 \u306f\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u5408\u308f\u305b\u3066 mod_php \u3068\u4f9d\u5b58\u95a2\u4fc2\u306b\u3042\u308b Apache 2.4 \u3082\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u76f4\u3057\u307e\u3057\u305f\u3002\n\n\n##\u5404\u7a2e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\nPHP7 \u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u3042\u3089\u304b\u3058\u3081yum\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n# yum install pcre-devel\n# yum install libxml2-devel\n# yum install openssl-devel\n# yum install bzip2\n# yum install bzip2-devel\n# yum install libbz2\n# yum install libbz2-dev\n# yum install lbzip2-utils\n# yum install lbzip2-devel\n# yum install libssl-dev\n# yum install curl-devel\n# yum install db4-devel\n# yum install libXpm-devel\n# yum install gmp-devel\n# yum install libc-client-devel\n# yum install openldap-devel\n# yum install postgresql-devel\n# yum install aspell-devel\n# yum install libxslt-devel\n# yum install libxml2-devel\n# yum install pcre-devel\n# yum install t1lib-devel.x86_64\n# yum install libmcrypt-devel.x86_64\n# yum install libpng-devel\n# yum install libjpeg-devel\n# yum install libfreetype-dev\n# yum install freetype-devel.x86_64\n```\n\n##Apache2.4\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eApache\u3092\u3044\u3063\u305f\u3093\u524a\u9664\u3057\u3066\u3001\u65b0\u305f\u306b\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\nApache HTTP Server 2.4\nhttp://httpd.apache.org/download.cgi#apache24\n\nApache2.4 \u3067\u306f APR \u3068 APR-util \u304c\u5fc5\u8981\u306a\u306e\u3067\u3053\u3061\u3089\u3082\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nhttp://apr.apache.org/download.cgi\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306f\u3001Vagrant\u30de\u30b7\u30f3\u4e0a\u306e /vagrant \u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\uff08\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u4efb\u610f\u306e\u5834\u6240\u306b\u4fdd\u5b58\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\uff09\n\n\n##yum\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b Apache2.4 \u3092\u524a\u9664\u3059\u308b\n\n```\n# yum remove httpd24*\n# rm -rf /opt/rh/httpd24/root/etc/httpd\n# rm -rf /etc/httpd\n```\n\n\n##Apache2.4\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\n# cd /vagrant\n# tar -xjvf httpd-2.4.18.tar.bz2\n# tar -xzvf apr-1.5.2.tar.gz\n# cp -r apr-1.5.2 httpd-2.4.18/srclib/apr\n# tar -xzvf apr-util-1.5.4.tar.gz\n# cp -r apr-util-1.5.4 httpd-2.4.18/srclib/apr-util\n# cd httpd-2.4.18\n# ./configure\n# make\n# make install\n```\n\n###http.conf\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\n\n```\n# vim /usr/local/apache2/conf/httpd.conf\n```\n\nmod_rewrite\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3057\u3066\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```\nLoadModule rewrite_module modules/mod_rewrite.so\n```\n\nDirectoryIndex\u306e\u8a2d\u5b9a\u884c\u3092\u898b\u3064\u3051\u305f\u3089 index.php \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n<IfModule dir_module>\n    DirectoryIndex index.php index.html\n</IfModule>\n```\n\n\nhttp.conf \u306e\u6700\u7d42\u884c\u306b SetHandler \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n<FilesMatch \\.php$>\n    SetHandler application/x-httpd-php\n</FilesMatch>\n```\n\nhttp.conf \u306e\u69cb\u6587\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\n\"Syntax OK\"\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u7de8\u96c6\u5b8c\u4e86\u3067\u3059\u3002\n\n```\n# /usr/local/apache2/bin/httpd -t\nSyntax OK\n```\n\n###PHP7\u304c\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\nPHP\u304c\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b phpinfo() \u306e\u7d50\u679c\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\nphpinfo.php \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\n# cd /usr/local/apache2/htdocs\n# vim phpinfo.php\n<?php phpinfo(); ?>\n```\n\nApache2.4\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n# /usr/local/apache2/bin/apachectl start\n```\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u8868\u793a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nhttp://[\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9]/phpinfo.php\n\n\n###Apache\u306e\u81ea\u52d5\u8d77\u52d5\u3092\u8a2d\u5b9a\u3059\u308b\n\n```\n# cp /vagrant/httpd-2.4.23/build/rpm/httpd.init /etc/init.d/httpd\n# vim /etc/init.d/httpd\n\n\u524d\uff09 httpd=${HTTPD-/usr/sbin/httpd}\n\u5f8c\uff09 httpd=${HTTPD-/usr/local/apache2/bin/httpd}\n\n\u524d\uff09 pidfile=${PIDFILE-/var/run/${prog}.pid}\n\u5f8c\uff09 pidfile=${PIDFILE-/usr/local/apache2/logs/httpd.pid}\n\n\u524d\uff09 CONFFILE=/etc/httpd/conf/httpd.conf\n\u5f8c\uff09 CONFFILE=/usr/local/apache2/conf/httpd.conf\n```\n\n###Apache\u3092\u30b5\u30fc\u30d3\u30b9\u306b\u767b\u9332\u3059\u308b\n\nchkconfig\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d3\u30b9\u767b\u9332\u3057\u307e\u3059\u3002\n\n```\n$ chkconfig --add httpd\n```\n\n\u30b5\u30fc\u30d3\u30b9\u4e00\u89a7\u306b\u767b\u9332\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$ chkconfig --list httpd\nhttpd           0:off   1:off   2:off   3:off   4:off   5:off   6:off\n```\n\n\u30b5\u30fc\u30d3\u30b9\u3092\u30aa\u30f3\u306b\u3057\u307e\u3059\u3002\n\n```\n$ chkconfig httpd on\n```\n\n\u30b5\u30fc\u30d3\u30b9\u304c\u81ea\u52d5\u8d77\u52d5\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$ chkconfig --list httpd\nhttpd           0:off   1:off   2:on    3:on    4:on    5:on    6:off\n```\n\n\n\u4ee5\u4e0a\u3067Apache2.4\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u304c\u3001\u305d\u306e\u4ed6\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n##PHP7\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n\nPHP7\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\nCurrent Stable PHP\nhttp://www.php.net/downloads.php\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306f\u3001Vagrant\u30de\u30b7\u30f3\u4e0a\u306e /vagrant \u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\uff08\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u4efb\u610f\u306e\u5834\u6240\u306b\u4fdd\u5b58\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\uff09\n\n\n###\u53e4\u3044PHP\u3092\u524a\u9664\u3059\u308b\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306ePHP5.6\u3092\u3044\u3063\u305f\u3093\u524a\u9664\u3057\u3066\u3001\u65b0\u305f\u306b\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u4f5c\u696d\u524d\u306b Apache \u3092\u3044\u3063\u305f\u3093\u505c\u6b62\u3057\u307e\u3059\u3002\n\n```\n# /usr/local/apache2/bin/apachectl stop\n```\n\n\u3067\u306f\u3001yum\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b PHP5.6 \u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n```\n$ sudo yum remove php*\n```\n\nPHP5.6\u304c\u524a\u9664\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$ yum list installed | grep php\n```\n\n###PHP7\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\n# tar -xjvf php-7.0.2.tar.bz2\n# cd php-7.0.2\n# ./configure --with-apxs2=/usr/local/apache2/bin/apxs --libdir=/usr/lib64 --with-libdir=lib64 --with-curl --disable-debug --with-pic --disable-rpath --without-pear --with-bz2 --with-freetype-dir --with-png-dir --with-xpm-dir --enable-gd-native-ttf --without-gdbm --with-gettext --with-iconv --with-jpeg-dir --with-openssl --with-pcre-regex --with-zlib --enable-exif --enable-ftp --enable-sockets --enable-calendar --with-libxml-dir --enable-xml --with-mhash --enable-mbstring --enable-mbregex --with-gd --enable-bcmath --with-xmlrpc --with-mysqli --with-pdo-mysql --with-curl --with-pdo-mysql --enable-json --enable-zip --without-readline --with-mcrypt\n\n# make\n# make install\n# cp php.ini-development /usr/local/php7/lib/php.ini\n```\n\n\nphp.ini\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```\n# vim /usr/local/php7/lib/php.ini\n```\n\nDrupal\u306fMySQL\u3078\u306e\u63a5\u7d9a\u306bPDO\u3092\u5229\u7528\u3059\u308b\u306e\u3067 MysqL PDO \u306e\u63a5\u7d9a\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n```\npdo_mysql.default_socket=/var/lib/mysql/mysql.sock\n```\n\n\n\u5927\u898f\u6a21\u30b5\u30a4\u30c8\u306b\u3082\u8010\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3057\u307e\u3059\u3002\n\n```\nmemory_limit = 256M\nrealpath_cache_size = 256k\nrealpath_cache_ttl = 3600\nupload_max_filesize = 20M\npost_max_size = 64M\n\n```\n\n\nApache\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n# /usr/local/apache2/bin/apachectl start\n```\n\n\n##\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\n\nApache2.4\u3001PHP7 \u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u307e\u3059\u3002\n\n```\n# export PATH=$PATH:/usr/local/apache2/bin:/usr/local/php7/bin\n```\n\n\u901a\u3057\u305f\u30d1\u30b9\u3092\u5168\u30e6\u30fc\u30b6\u30fc\u3078\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b /etc/profile \u306e\u6700\u7d42\u884c\u306b\u3082\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n# vim /etc/profile\nexport PATH=$PATH:/usr/local/apache2/bin:/usr/local/php7/bin\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002 \u3053\u308c\u3067Drupal7/8\u304c\u52d5\u4f5c\u3067\u304d\u308b\u74b0\u5883\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\n\n\n\n\n\n", "tags": ["CentOS", "PHP", "vagrant", "Drupal", "Apache"]}