{"tags": ["Kotlin"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nKotlin\u6587\u6cd5 - this\u3001\u7b49\u4fa1\u6027\u3001\u6f14\u7b97\u5b50\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u3001Null\u5b89\u5168\u3001\u4f8b\u5916\u306e\u7d9a\u304d\u3002\nKotlin Reference\u306eOther\u7ae0This expressions, Equality, Operator overloading, Null Safety, Exceptions\u306e\u5927\u96d1\u628a\u65e5\u672c\u8a9e\u8a33\u3002\u9069\u5b9c\u8aac\u660e\u3092\u5909\u3048\u305f\u308a\u7aef\u6298\u3063\u305f\u308a\u88dc\u8db3\u3057\u305f\u308a\u3057\u3066\u3044\u308b\u3002\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5ba3\u8a00\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u30b3\u30fc\u30c9\u306b\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u4ed8\u52a0\u3059\u308b\u624b\u6bb5\u3002\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5ba3\u8a00\u3059\u308b\u306b\u306f\u3001class \u306e\u524d\u306b annotation \u4fee\u98fe\u5b50\u3092\u4ed8\u3051\u308b\u3002\n// Fancy\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5ba3\u8a00\u3059\u308b\nannotation class Fancy\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u30af\u30e9\u30b9\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u4fee\u98fe\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u4ed8\u52a0\u5c5e\u6027\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n\n@Target \u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3089\u308c\u308b\u8981\u7d20\u306e\u3042\u308a\u5f97\u308b\u7a2e\u985e\uff08\u30af\u30e9\u30b9\u3001\u95a2\u6570\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u3001\u5f0f\u306a\u3069\uff09\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n@Retention \u306f\u3001\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30af\u30e9\u30b9\u30d5\u30a1\u30a4\u30eb\u306b\u542b\u3081\u308b\u304b\u3068\u3001\u5b9f\u884c\u6642\u306b\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u901a\u3057\u3066\u53ef\u8996\u5316\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3069\u3061\u3089\u3082 true\u3002\n\n@Repetable\u306f\uff11\u3064\u306e\u30a8\u30ec\u30e1\u30f3\u30c8\u306b\u540c\u3058\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8907\u6570\u56de\u4f7f\u3046\u3053\u3068\u3092\u8a31\u53ef\u3059\u308b\u3002\n\n@MustBeDocumented \u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u516c\u958bAPI\u306e\u4e00\u90e8\u3068\u3059\u308b\u304b\u3001\u751f\u6210\u3055\u308c\u308bAPI\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8868\u793a\u3055\u308c\u308b\u30af\u30e9\u30b9\u3084\u30e1\u30bd\u30c3\u30c9\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306b\u542b\u3081\u308b\u3079\u304d\u304b\u3069\u3046\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION,\n        AnnotationTarget.VALUE_PARAMETER, AnnotationTarget.EXPRESSION)\n@Retention(AnnotationRetention.SOURCE)\n@MustBeDocumented\npublic annotation class Fancy\n\n\n\u4f7f\u3044\u65b9\n@Fancy class Foo {\n  @Fancy fun baz(@Fancy foo: Int): Int {\n    return (@Fancy 1)\n  }\n}\n\n\u3082\u3057\u30af\u30e9\u30b9\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4fee\u98fe\u3057\u305f\u3044\u306a\u3089\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5ba3\u8a00\u3067 constructor \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u305d\u306e\u524d\u306b\u4ed8\u3051\u308b\u3002\nclass Foo @Inject constructor(dependency: MyDependency) {\n  // ...\n}\n\n\u30a2\u30af\u30bb\u30b5\u306b\u3082\u4ed8\u3051\u3089\u308c\u308b\u3002\nclass Foo {\n    var x: MyDependency? = null\n        @Inject set\n}\n\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d6\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u3064\u304b\u3082\u3057\u308c\u306a\u3044\u3002\nannotation class Special(val why: String)\n\n@Special(\"example\") class Foo {}\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b\u3068\u3057\u3066\u8a31\u3055\u308c\u308b\u306e\u306f\u4ee5\u4e0b\u3002\n\nJava\u306e\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b\u306b\u5bfe\u5fdc\u3059\u308b\u578b(Int, Long\u306a\u3069\uff09\n\u6587\u5b57\u5217\n\u30af\u30e9\u30b9(Foo::class)\nenum\n\u4ed6\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\u4e0a\u306b\u6319\u3052\u305f\u578b\u306e\u914d\u5217\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed6\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u4f7f\u3046\u5834\u5408\u3001\u305d\u306e\u540d\u524d\u306e\u524d\u306b @ \u306f\u4ed8\u3051\u306a\u3044\u3002\npublic annotation class ReplaceWith(val expression: String)\n\npublic annotation class Deprecated(\n        val message: String,\n        val replaceWith: ReplaceWith = ReplaceWith(\"\"))\n\n@Deprecated(\"This function is deprecated, use === instead\", ReplaceWith(\"this === other\"))\n\n\n\u30e9\u30e0\u30c0\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u30e9\u30e0\u30c0\u306b\u3082\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30e9\u30e0\u30c0\u306e\u30dc\u30c7\u30a3\u304c\u751f\u6210\u3055\u308c\u308b\u5148\u306e invoke() \u30e1\u30bd\u30c3\u30c9\u306b\u9069\u7528\u3055\u308c\u308b\u3002\u3053\u308c\u306fQuasar\uff08\u4e26\u5217\u6027\u306e\u5236\u5fa1\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\uff09\u306e\u3088\u3046\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u4fbf\u5229\u3002\nannotation class Suspendable\n\nval f = @Suspendable { Fiber.sleep(10) }\n\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5229\u7528\u5834\u6240\u30bf\u30fc\u30b2\u30c3\u30c8\n\u30d7\u30ed\u30d1\u30c6\u30a3\u3084\u30d7\u30e9\u30a4\u30de\u30ea\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4fee\u98fe\u3059\u308b\u3068\u304d\u3001Kotlin\u306e\u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308bJava\u8981\u7d20\u304c\u8907\u6570\u751f\u6210\u3055\u308c\u3001\u305d\u308c\u3086\u3048\u751f\u6210\u3055\u308c\u308bJava\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u914d\u7f6e\u3055\u308c\u308b\u5834\u6240\u304c\u8907\u6570\u751f\u3058\u3066\u3057\u307e\u3046\u3002\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u751f\u6210\u3092\u6b63\u78ba\u306b\u6307\u5b9a\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u66f8\u5f0f\u304c\u4f7f\u3048\u308b\u3002\n// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u5f15\u6570\u306bval\u3092\u4ed8\u3051\u308b\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u3082\u4e00\u7dd2\u306b\u751f\u6210\u3055\u308c\u308b\u3002\n// \u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u306f\u30d0\u30c3\u30ad\u30f3\u30b0\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u30b2\u30c3\u30bf\u30fc\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n// \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u5f15\u6570\u306b\u4ed8\u304f\u306e\uff1f\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\uff1f\u305d\u308c\u3068\u3082\u30b2\u30c3\u30bf\u30fc\uff1f\nclass Example(@field:Ann val foo,    // Java\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4fee\u98fe\u3059\u308b\n              @get:Ann val bar,      // Java\u306egetter\u3092\u4fee\u98fe\u3059\u308b\n              @param:Ann val quux)   // Java\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5f15\u6570\u3092\u4fee\u98fe\u3059\u308b\n\n\u540c\u3058\u66f8\u5f0f\u306f\u30d5\u30a1\u30a4\u30eb\u5168\u4f53\u306e\u4fee\u98fe\u306b\u3082\u4f7f\u3048\u308b\u3002\u305d\u308c\u306b\u306f\u30d5\u30a1\u30a4\u30eb\u306e\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u3067\u3001package \u547d\u4ee4\u306e\u524d\u304b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30c3\u30b1\u30fc\u30b8\u306a\u3089\u5168\u3066\u306e import \u306e\u524d\u306b\u3001file \u30bf\u30fc\u30b2\u30c3\u30c8\u4ed8\u304d\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u7f6e\u304f\u3002\n@file:JvmName(\"Foo\")\n\npackage org.jetbrains.demo\n\n\u540c\u3058\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u8907\u6570\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u306a\u3089\u3001\u62ec\u5f27\u3092\u4f7f\u3063\u3066\u4e2d\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4e26\u3079\u308b\u3053\u3068\u3067\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u7e70\u308a\u8fd4\u3057\u66f8\u304f\u306e\u3092\u907f\u3051\u3089\u308c\u308b\u3002\nclass Example {\n     // @set:Inject @set:VisibleForTesting \u3068\u66f8\u304b\u306a\u304f\u3066\u3082\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\n     @set:[Inject VisibleForTesting]\n     public var collaborator: Collaborator\n}\n\n\u5229\u7528\u5834\u6240\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u5168\u3066\u306e\u30ea\u30b9\u30c8\u306f\u4ee5\u4e0b\u3002\n\nfile\nproperty \uff08\u3053\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u4ed8\u304d\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306fJava\u304b\u3089\u306f\u898b\u3048\u306a\u3044\uff09\nfield\nget\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30b2\u30c3\u30bf\u30fc\uff09\nset\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30bb\u30c3\u30bf\u30fc\uff09\nreceiver\uff08\u62e1\u5f35\u95a2\u6570\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30ec\u30b7\u30fc\u30d0\u30d1\u30e9\u30e1\u30fc\u30bf\uff09\nparam\uff08\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5f15\u6570\uff09\nsetparam\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30bb\u30c3\u30bf\u30fc\u5f15\u6570\uff09\n\n\u62e1\u5f35\u95a2\u6570\u306e\u30ec\u30b7\u30fc\u30d0\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4fee\u98fe\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u66f8\u5f0f\u3092\u4f7f\u3046\u3002\nfun @receiver:Fancy String.myExtension() { }\n\n\u5229\u7528\u5834\u6240\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e @Target \u306b\u5f93\u3063\u3066\u9078\u629e\u3055\u308c\u308b\u3002\u3082\u3057\u8907\u6570\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u3042\u308a\u5f97\u308b\u306a\u3089\u3001\u6b21\u306e\u30ea\u30b9\u30c8\u304b\u3089\u6700\u521d\u306e\u9069\u7528\u53ef\u80fd\u306a\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u4f7f\u308f\u308c\u308b\u3002\n\nparam\nproperty\nfield\n\n\nJava\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\nJava\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306fKotlin\u3068100%\u4e92\u63db\u6027\u304c\u3042\u308b\u3002\nimport org.junit.Test\nimport org.junit.Assert.*\n\nclass Tests {\n  @Test fun simple() {\n    assertEquals(42, getTheAnswer())\n  }\n}\n\nJava\u3067\u66f8\u304b\u308c\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u9806\u756a\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u5f15\u6570\u3092\u6e21\u3059\u306e\u306b\u901a\u5e38\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u66f8\u5f0f\u306f\u5229\u7528\u3067\u304d\u306a\u3044\u3002\u4ee3\u308f\u308a\u306b\u540d\u524d\u4ed8\u304d\u5f15\u6570\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3002\n// Java\npublic @interface Ann {\n    int intValue();\n    String stringValue();\n}\n\n// Kotlin\n@Ann(intValue = 1, stringValue = \"abc\") class C\n\nJava\u3068\u540c\u69d8\u306b value \u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u7279\u5225\u3067\u3001\u540d\u524d\u3092\u660e\u793a\u3057\u306a\u304f\u3066\u3044\u3044\u3002\n// Java\npublic @interface AnnWithValue {\n    String value();\n}\n\n// Kotlin\n@AnnWithValue(\"abc\") class C\n\n\u3082\u3057Java\u306e value \u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u914d\u5217\u306a\u3089\u3001Kotlin\u3067\u306f vararg \uff08\u53ef\u5909\u9577\uff09\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306a\u308b\u3002\n// Java\npublic @interface AnnWithArrayValue {\n    String[] value();\n}\n\n// Kotlin\n@AnnWithArrayValue(\"abc\", \"foo\", \"bar\") class C\n\n\u3082\u3057\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u5f15\u6570\u3068\u3057\u3066\u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306a\u3089\u3001Kotlin\u30af\u30e9\u30b9(KClass)\u3092\u4f7f\u3046\u3002Kotlin\u30b3\u30f3\u30d1\u30a4\u30e9\u306f\u81ea\u52d5\u7684\u306b\u305d\u308c\u3092Java\u30af\u30e9\u30b9\u306b\u5909\u63db\u3059\u308b\u306e\u3067\u3001Java\u30b3\u30fc\u30c9\u306f\u666e\u901a\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u5f15\u6570\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nimport kotlin.reflect.KClass\n\nannotation class Ann(val arg1: KClass<*>, val arg2: KClass<out Any?>)\n\n@Ann(String::class, Int::class) class MyClass\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u5024\u306fKotlin\u30b3\u30fc\u30c9\u306b\u306f\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u898b\u3048\u308b\u3002\n// Java\npublic @interface Ann {\n    int value();\n}\n\n// Kotlin\nfun foo(ann: Ann) {\n    val i = ann.value\n}\n\n\n\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\n\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u306f\u5b9f\u884c\u6642\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u69cb\u9020\u3092\u8997\u304d\u898b\u308b\u3053\u3068\u3092\u53ef\u80fd\u3068\u3059\u308b\u8a00\u8a9e\u3084\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4ed5\u7d44\u307f\u3067\u3042\u308b\u3002Kotlin\u306f\u95a2\u6570\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u7b2c1\u7d1a\u5e02\u6c11\u306b\u3057\u3066\u304a\u308a\u3001\u305d\u308c\u3089\u3092\u8997\u304d\u898b\u308b\uff08\u3064\u307e\u308a\u5b9f\u884c\u6642\u306b\u95a2\u6570\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u578b\u3084\u540d\u524d\u304c\u5206\u304b\u308b\uff09\u3053\u3068\u306f\u95a2\u6570\u578b\u3084\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30bf\u30a4\u30eb\u3092\u7c21\u5358\u306b\u7528\u3044\u308b\u3053\u3068\u3068\u5bc6\u63a5\u306b\u7d50\u3073\u3064\u3044\u3066\u3044\u308b\u3002\n\u6ce8\uff1aJava\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f\u3001\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u4f7f\u3046\u30e9\u30f3\u30bf\u30a4\u30e0\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u5225\u306eJAR\u30d5\u30a1\u30a4\u30eb(kotlin-reflect.jar)\u3068\u3057\u3066\u914d\u5e03\u3055\u308c\u308b\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u308f\u306a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u8981\u6c42\u3055\u308c\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u30e9\u30a4\u30d6\u30e9\u30ea\u30b5\u30a4\u30ba\u3092\u524a\u6e1b\u3057\u3066\u3044\u308b\u3002\u3082\u3057\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u306a\u3089\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30af\u30e9\u30b9\u30d1\u30b9\u306b\u305d\u306e .jar \u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u306e\u3092\u5fd8\u308c\u306a\u3044\u3053\u3068\u3002\n\n\u30af\u30e9\u30b9\u53c2\u7167\n\u6700\u3082\u57fa\u672c\u7684\u306a\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u6a5f\u80fd\u306f\u3001Kotlin\u30af\u30e9\u30b9\u3078\u306e\u5b9f\u884c\u6642\u53c2\u7167\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u3002\u9759\u7684\u306b\u5206\u304b\u3063\u3066\u3044\u308bKotlin\u30af\u30e9\u30b9\u3078\u306e\u53c2\u7167\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001\u30af\u30e9\u30b9\u30ea\u30c6\u30e9\u30eb\u66f8\u5f0f\u304c\u5229\u7528\u3067\u304d\u308b\u3002\nval c = MyClass::class\n\n\u53c2\u7167\u306fKClass\u578b\u306e\u5024\u3002\nKotlin\u30af\u30e9\u30b9\u53c2\u7167\u306fJava\u30af\u30e9\u30b9\u53c2\u7167\u3068\u540c\u3058\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002Java\u30af\u30e9\u30b9\u53c2\u7167\u3092\u5f97\u308b\u306b\u306f\u3001KClass \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e .java \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u3002\n\n\u95a2\u6570\u53c2\u7167\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u540d\u524d\u4ed8\u304d\u95a2\u6570\u304c\u3042\u308b\u3068\u304d\u3001\nfun isOdd(x: Int) = x % 2 != 0\n\n\u3053\u308c\u3092\u7c21\u5358\u306b\u76f4\u63a5\u547c\u3073\u51fa\u305b\u308b( isOdd(5) )\u3002\u3051\u3069\u3053\u308c\u3092\u5024\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u308b\u3002\u3064\u307e\u308a\u4ed6\u306e\u95a2\u6570\u306b\u3002\u305d\u308c\u306b\u306f :: \u6f14\u7b97\u5b50\u3092\u4f7f\u3046\u3002\nval numbers = listOf(1, 2, 3)\nprintln(numbers.filter(::isOdd)) // [1, 3]\u3092\u8868\u793a\u3059\u308b\n\n\u3053\u3053\u3067 ::isOdd \u306f (Int) -> Boolean \u95a2\u6570\u578b\u306e\u5024\u3067\u3042\u308b\u3002\n:: \u6f14\u7b97\u5b50\u306f\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u95a2\u6570\u306b\u306f\u4f7f\u3048\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002\u5c06\u6765\u7684\u306b\u306f\u3001\u95a2\u6570\u306e\u7279\u5b9a\u306e\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u304c\u9078\u629e\u53ef\u80fd\u306a\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u578b\u3092\u6307\u5b9a\u3059\u308b\u66f8\u5f0f\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3092\u8a08\u753b\u3057\u3066\u3044\u308b\u3002\n\n\u4f8b\uff1a\u95a2\u6570\u5408\u6210\n\u6b21\u306e\u95a2\u6570\u3092\u8003\u3048\u3066\u307f\u308b\u3002\nfun <A, B, C> compose(f: (B) -> C, g: (A) -> B): (A) -> C {\n    return { x -> f(g(x)) }\n}\n\n\u3053\u308c\u306f\u6e21\u3055\u308c\u305f\uff12\u3064\u306e\u95a2\u6570\u3092\u5408\u6210\u3057\u305f\u3082\u306e\u3092\u8fd4\u3059\u3002\u3064\u307e\u308a compose(f, g) = f(g(*)) \u3002\u3053\u308c\u3092\u547c\u3073\u51fa\u3057\u53ef\u80fd\u306a\u53c2\u7167\u306b\u9069\u7528\u3067\u304d\u308b\u3002\nfun length(s: String) = s.size\n\n// isOdd(length(s)) \u306e\u52d5\u4f5c\u3092\u3059\u308b\u95a2\u6570\u3092\u4f5c\u3063\u3066 oddLength \u306b\u683c\u7d0d\u3059\u308b\nval oddLength = compose(::isOdd, ::length)\nval strings = listOf(\"a\", \"ab\", \"abc\")\n\n// \u6e21\u3057\u305f\u6587\u5b57\u5217\u306e\u30ea\u30b9\u30c8\u306e\u3046\u3061\u3001\u9577\u3055\u304c\u5947\u6570\u306e\u3082\u306e\u3060\u3051\u8868\u793a\u3059\u308b\nprintln(strings.filter(oddLength)) // \"[a, abc]\"\u3068\u8868\u793a\u3055\u308c\u308b\n\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u53c2\u7167\nKotlin\u3067\u7b2c1\u7d1a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u306b\u3082\u3001:: \u6f14\u7b97\u5b50\u304c\u5229\u7528\u3067\u304d\u308b\u3002\nvar x = 1\n\nfun main(args: Array<String>) {\n    println(::x.get()) // \"1\"\u304c\u8868\u793a\u3055\u308c\u308b\n    ::x.set(2)\n    println(x)         // \"2\"\u304c\u8868\u793a\u3055\u308c\u308b\n}\n\n::x \u306f KProperty<Int> \u578b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u7b49\u4fa1\u3067\u3042\u308b1\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068 get() \u3067\u5024\u3092\u8aad\u307f\u3060\u3057\u305f\u308a\u3001name \u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u3092\u53d6\u5f97\u3057\u305f\u308a\u3067\u304d\u308b\u3002\u8a73\u7d30\u306fKProperty\u30af\u30e9\u30b9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3002\n\u5909\u66f4\u53ef\u80fd\u306a\u30d7\u30ed\u30d1\u30c6\u30a3(\u4f8b\u3048\u3070 var y = 1)\u306b\u306f\u3001::y \u306f set() \u3092\u6301\u3064 KMutableProperty<Int> \u3092\u8fd4\u3059\u3002\n\u30d7\u30ed\u30d1\u30c6\u30a3\u53c2\u7167\u306f\u5f15\u6570\u306e\u306a\u3044\u95a2\u6570\u304c\u671f\u5f85\u3055\u308c\u308b\u5834\u6240\u3067\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nval strs = listOf(\"a\", \"bc\", \"def\")\n// map\u306e\u51e6\u7406\u3068\u3057\u3066\u3001\u5404String\u8981\u7d20\u306elength\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3059\u308b\nprintln(strs.map(String::length)) // [1, 2, 3] \u3092\u8868\u793a\u3059\u308b\n\n\u30af\u30e9\u30b9\u30e1\u30f3\u30d0\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u4fee\u98fe\u3059\u308b\u3002\nclass A(val p: Int)\n\nfun main(args: Array<String>) {\n    val prop = A::p         // A\u30af\u30e9\u30b9\u306ep\u30d7\u30ed\u30d1\u30c6\u30a3\u53c2\u7167\u3092prop\u306b\u4ee3\u5165\n    println(prop.get(A(1))) // \"1\"\u3092\u8868\u793a\u3059\u308b\n}\n\n\u62e1\u5f35\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n// String\u306blastChar\u62e1\u5f35\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u7528\u610f\nval String.lastChar: Char\n  get() = this[size - 1]\n\nfun main(args: Array<String>) {\n  println(String::lastChar.get(\"abc\")) // \"c\"\u3092\u8868\u793a\u3059\u308b\n}\n\n\nJava\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3068\u306e\u76f8\u4e92\u904b\u7528\u6027\nJava\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f\u3001\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u30af\u30e9\u30b9\u306e\u62e1\u5f35\u3092\u7528\u610f\u3057\u3066\u3044\u308b\u3002\u305d\u306e\u62e1\u5f35\u304cJava\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u306e\u9593\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u63d0\u4f9b\u3059\u308b\u3002\u4f8b\u3048\u3070\u3001\u30d0\u30c3\u30ad\u30f3\u30b0\u30d5\u30a3\u30fc\u30eb\u30c9\u3084Kotlin\u30d7\u30ed\u30d1\u30c6\u30a3\u306egetter\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u308bJava\u30e1\u30bd\u30c3\u30c9\u3092\u898b\u3064\u3051\u308b\u305f\u3081\u306b\u3001\u3053\u3093\u306a\u98a8\u306b\u66f8\u3051\u308b\u3002\n// \u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308bJava\u3068\u306e\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u76f8\u4e92\u904b\u7528\u62e1\u5f35\u3092\u4f7f\u3046\nimport kotlin.reflect.jvm.*\n\nclass A(val p: Int)\n\nfun main(args: Array<String>) {\n    // Kotlin\u30af\u30e9\u30b9\u3067\u3042\u308bA\u306e\u30d7\u30ed\u30d1\u30c6\u30a3p\u306eJava\u3067\u306eGetter\u30e1\u30bd\u30c3\u30c9\u3092\u8868\u793a\n    println(A::p.javaGetter) // \"public final int A.getP()\" \u3068\u8868\u793a\u3055\u308c\u308b\n    // Kotlin\u30af\u30e9\u30b9\u3067\u3042\u308bA\u306e\u30d7\u30ed\u30d1\u30c6\u30a3p\u306eJava\u3067\u306e\u30d0\u30c3\u30ad\u30f3\u30b0\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8868\u793a\n    println(A::p.javaField)  // \"private final int A.p\" \u3068\u8868\u793a\u3055\u308c\u308b\n}\n\nJava\u30af\u30e9\u30b9\u306b\u5bfe\u5fdc\u3059\u308bKotlin\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001.kotlin \u62e1\u5f35\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u3002\nfun getKClass(o: Any): KClass<Any> = o.javaClass.kotlin\n\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u53c2\u7167\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3082\u30e1\u30bd\u30c3\u30c9\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u540c\u3058\u3088\u3046\u306b\u53c2\u7167\u3067\u304d\u308b\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u5f15\u6570\u304c\u540c\u3058\u3067\u9069\u5207\u306a\u578b\u306e\u623b\u308a\u5024\u3092\u6301\u3064\u95a2\u6570\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u671f\u5f85\u3055\u308c\u308b\u5834\u6240\u306a\u3089\u3001\u3069\u3053\u3067\u3082\u5229\u7528\u3067\u304d\u308b\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f :: \u6f14\u7b97\u5b50\u306e\u5f8c\u306b\u30af\u30e9\u30b9\u540d\u3092\u52a0\u3048\u308b\u3053\u3068\u3067\u53c2\u7167\u3067\u304d\u308b\u3002\u300c\u5f15\u6570\u306a\u3057\u3067 Foo \u3092\u8fd4\u3059\u95a2\u6570\u300d\u3092\u5f15\u6570\u3068\u3057\u3066\u671f\u5f85\u3059\u308b\u3001\u6b21\u306e\u95a2\u6570\u3092\u8003\u3048\u3066\u307f\u3088\u3046\u3002\nclass Foo\n\nfun function(factory : () -> Foo) {\n    val x : Foo = factory()\n}\n\n::Foo \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001Foo \u306e\u5f15\u6570\u306a\u3057\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u3001\u3053\u3093\u306a\u98a8\u306b\u7c21\u5358\u306b\u547c\u3073\u51fa\u305b\u308b\u3002\nfunction(::Foo)\n\n\n\u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\n\u30d3\u30eb\u30c0\u30fc\u306e\u6982\u5ff5\u306fGroovy\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u306f\u304b\u306a\u308a\u30dd\u30d4\u30e5\u30e9\u30fc\u3002\u30d3\u30eb\u30c0\u30fc\u3092\u7528\u3044\u308b\u3068\u6e96\u5ba3\u8a00\u7684\u306b\u30c7\u30fc\u30bf\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\u30d3\u30eb\u30c0\u30fc\u306fXML\u751f\u6210\u3001UI\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u30013D\u30b7\u30fc\u30f3\u306e\u63cf\u5199\u306a\u3069\u3067\u4fbf\u5229\u3002\n\u591a\u304f\u306e\u5229\u7528\u30b1\u30fc\u30b9\u3067\u3001Kotlin\u306f\u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\u3092\u63d0\u4f9b\u3067\u304d\u308b\u3002\u578b\u5b89\u5168\u6027\u3067\u3042\u308b\u3053\u3068\u3067Groovy\u3067\u306e\u52d5\u7684\u578b\u4ed8\u3051\u5b9f\u88c5\u3088\u308a\u3082\u9b45\u529b\u7684\u306a\u3082\u306e\u306b\u306a\u308b\u3002\n\u6b8b\u308a\u306e\u4e8b\u4f8b\u3067\u306f\u3001Kotlin\u306f\u52d5\u7684\u7247\u4ed8\u3051\u30d3\u30eb\u30c0\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u3002\n\n\u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\u306e\u4f8b\n\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u8003\u3048\u3066\u307f\u3088\u3046\u3002\nimport com.example.html.*\n\nfun result(args: Array<String>) =\n  html {\n    head {\n      title {+\"Kotlin\u3067\u306eXML\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\"}\n    }\n    body {\n      h1 {+\"Kotlin\u3067\u306eXML\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\"}\n      p  {+\"\u3053\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306fXML\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u4ee3\u66ff\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3002\"}\n\n      // \u5c5e\u6027\u3068\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3064\u8981\u7d20\n      a(href = \"http://kotlinlang.org\") {+\"Kotlin\"}\n\n      // \u8907\u5408\u30b3\u30f3\u30c6\u30f3\u30c4\n      p {\n        +\"\u3053\u308c\u306f\u5e7e\u3064\u304b\u306e\"\n        b {+\"\u8907\u5408\u3055\u308c\u305f\"}\n        +\"\u30c6\u30ad\u30b9\u30c8\u3002\u8a73\u7d30\u306f\"\n        a(href = \"http://kotlinlang.org\") {+\"Kotlin\"}\n        +\"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53c2\u7167\u3002\"\n      }\n      p {+\"\u3044\u304f\u3089\u304b\u306e\u30c6\u30ad\u30b9\u30c8\"}\n\n      // \u751f\u6210\u3055\u308c\u308b\u5185\u5bb9\n      p {\n        for (arg in args)\n          +arg\n      }\n    }\n  }\n\n\u3053\u308c\u306f\u5b8c\u5168\u306b\u6b63\u5f53\u306aKotlin\u30b3\u30fc\u30c9\u3067\u3042\u308b\u3002\u3053\u3053\u3067\uff08\u5909\u66f4\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u3067\u5b9f\u884c\u3057\u3066\uff09\u3053\u306e\u30b3\u30fc\u30c9\u3092\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u3069\u3046\u3084\u3063\u3066\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\nKotlin\u3067\u306e\u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\u306e\u5b9f\u88c5\u30e1\u30ab\u30cb\u30ba\u30e0\u3092\u9806\u306b\u898b\u3066\u3044\u3053\u3046\u3002\u307e\u305a\u6700\u521d\u306b\u7d44\u307f\u7acb\u3066\u305f\u3044\u30e2\u30c7\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\u3002\u3053\u3053\u306e\u4f8b\u3067\u306fHTML\u30bf\u30b0\u306e\u30e2\u30c7\u30eb\u304c\u5fc5\u8981\u3060\u3002\u3053\u308c\u306f\u4e00\u9023\u306e\u30af\u30e9\u30b9\u3092\u7528\u610f\u3059\u308c\u3070\u6e08\u3080\u3002\u4f8b\u3048\u3070 <html> \u30bf\u30b0\u3092\u8868\u3059\u306e\u306f HTML \u30af\u30e9\u30b9\u3067\u3001\u3053\u308c\u306f <head> \u3084 <body> \u3092\u5b50\u4f9b\u3068\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u3002\uff08\u5ba3\u8a00\u306f\u4e0b\u3092\u53c2\u7167\u3002\uff09\n\u30b3\u30fc\u30c9\u306e\u4e2d\u3067\u3053\u3093\u306a\u98a8\u306b\u66f8\u3051\u308b\u306e\u306f\u4f55\u6545\u306a\u306e\u304b\u601d\u3044\u51fa\u3057\u3066\u307f\u3088\u3046\u3002\nhtml {\n // ...\n}\n\nhtml \u306f\u5b9f\u969b\u306b\u306f\u30e9\u30e0\u30c0\u5f0f\u3092\u5f15\u6570\u306b\u53d6\u308b\u95a2\u6570\u3060\u3002\u3053\u306e\u95a2\u6570\u306f\u6b21\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\nfun html(init: HTML.() -> Unit): HTML {\n  val html = HTML()\n  html.init()\n  return html\n}\n\n\u3053\u306e\u95a2\u6570\u306finit \u3068\u3044\u3046\u540d\u524d\u306e\uff11\u3064\u306e\u5f15\u6570\u3092\u53d6\u308a\u3001\u305d\u306e\u5f15\u6570\u81ea\u8eab\u304c\u95a2\u6570\u3067\u3042\u308b\u3002\uff08\u5f15\u6570\u306e\uff09\u95a2\u6570\u306e\u578b\u306f HTML.() -> Unit \u3067\u3001\u3053\u308c\u306f\u30ec\u30b7\u30fc\u30d0\u4ed8\u304d\u306e\u95a2\u6570\u3060\u3002\u3053\u308c\u306f\u95a2\u6570\u306b HTML \u578b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff08\u30ec\u30b7\u30fc\u30d0\uff09\u3092\u6e21\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u95a2\u6570\u306e\u4e2d\u3067\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30f3\u30d0\u3092\u547c\u3073\u51fa\u305b\u308b\u3053\u3068\u3092\u610f\u5473\u3059\u308b\u3002\u30ec\u30b7\u30fc\u30d0\u306f this \u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u901a\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\nhtml {\n  this.head { /* ... */ }\n  this.body { /* ... */ }\n}\n\n\uff08head \u3068 body \u306f html \u306e\u30e1\u30f3\u30d0\u95a2\u6570\u3002\uff09\n\u3053\u3053\u3067 this \u306f\u666e\u901a\u306f\u7701\u7565\u3067\u304d\u308b\u3002\u3082\u3046\u3059\u3067\u306b\u3059\u3054\u304f\u30d3\u30eb\u30c0\u30fc\u3063\u307d\u3044\u611f\u3058\u306b\u898b\u3048\u308b\u3002\nhtml {\n  head { /* ... */ }\n  body { /* ... */ }\n}\n\n\u305d\u308c\u3067\u3001\u3053\u306e\u547c\u3073\u51fa\u3057\u306f\u4f55\u3092\u3084\u3063\u3066\u308b\u3093\u3060\u308d\u3046\uff1f\u4e0a\u3067\u5b9a\u7fa9\u3057\u305f html \u95a2\u6570\u306e\u30dc\u30c7\u30a3\u3092\u898b\u3066\u304f\u308c\u3002\u65b0\u3057\u3044 HTML \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u308b\u3002\u305d\u308c\u304b\u3089\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305f\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u521d\u671f\u5316\u3059\u308b\uff08\u3053\u306e\u4f8b\u3067\u306f HTML \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e head \u3068 body \u3092\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u3066\u308b\uff09\u3002\u305d\u308c\u304b\u3089\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059\u3002\u3053\u308c\u3053\u305d\u30d3\u30eb\u30c0\u30fc\u304c\u3084\u308b\u3079\u304d\u3053\u3068\u3060\u3002\nHTML \u30af\u30e9\u30b9\u306e head \u3068 body \u95a2\u6570\u306f html \u306b\u4f3c\u305f\u611f\u3058\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\u552f\u4e00\u306e\u9055\u3044\u306f\u69cb\u7bc9\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 HTML \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e children \u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3060\u3051\u3002\nfun head(init: Head.() -> Unit) : Head {\n  val head = Head()\n  head.init()\n  children.add(head)  // \u5185\u90e8\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\u3059\u308b\n  return head\n}\n\nfun body(init: Body.() -> Unit) : Body {\n  val body = Body()\n  body.init()\n  children.add(body)  // \u5185\u90e8\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\u3059\u308b\n  return body\n\n\u5b9f\u969b\u3053\u308c\u3089\uff12\u3064\u306e\u95a2\u6570\u306f\u540c\u3058\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30b8\u30a7\u30cd\u30ea\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30f3 initTag \u3092\u7528\u610f\u3067\u304d\u308b\u3002\n  protected fun <T : Element> initTag(tag: T, init: T.() -> Unit): T {\n    tag.init()\n    children.add(tag)\n    return tag\n  }\n\n\u3059\u308b\u3068\u3055\u3063\u304d\u306e\u95a2\u6570\u306f\u3059\u3063\u304d\u308a\u3068\u3053\u3046\u306a\u308b\u3002\nfun head(init: Head.() -> Unit) = initTag(Head(), init)\n\nfun body(init: Body.() -> Unit) = initTag(Body(), init)\n\n\u3053\u308c\u3067 head \u3068 body \u30bf\u30b0\u3092\u69cb\u7bc9\u3059\u308b\u306e\u306b\u3053\u308c\u3089\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\u3082\u3046\u4e00\u500b\u3053\u3053\u3067\u8003\u5bdf\u3059\u308b\u306e\u306f\u3001\u3069\u3046\u3084\u3063\u3066\u30c6\u30ad\u30b9\u30c8\u3092\u30bf\u30b0\u306e\u4e2d\u306b\u5165\u308c\u308b\u304b\u3060\u3002\u4e0a\u306e\u4f8b\u3067\u3053\u3093\u306a\u611f\u3058\u3067\u66f8\u3044\u305f\u3002\nhtml {\n  head {\n    title {+\"XML encoding with Kotlin\"}\n  }\n  // ...\n}\n\n\u57fa\u672c\u7684\u306b\u306f\u30bf\u30b0\u306e\u4e2d\u306b\u6587\u5b57\u5217\u3092\u66f8\u304f\u3060\u3051\u306a\u306e\u3060\u304c\u3001\u305d\u306e\u524d\u306b + \u304c\u3042\u308b\u3002\u3053\u308c\u306f unaryPlus() \u6f14\u7b97\u5b50\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3002\u3053\u306e\u6f14\u7b97\u5b50\u306f\uff08Title \u306e\u89aa\u306e\uff09TagWithText \u62bd\u8c61\u30af\u30e9\u30b9\u306e\u30e1\u30f3\u30d0\u3067\u3042\u308b\u62e1\u5f35\u95a2\u6570 unaryPlus \u306b\u3088\u3063\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n// title\u5185\u3067 + \u3092String\u306b\u5bfe\u3057\u3066\u547c\u3073\u51fa\u3059\u3068\u3001String\u306eunaryPlus\u30e1\u30bd\u30c3\u30c9\u307e\u305f\u306f\u62e1\u5f35\u95a2\u6570\u3092\u63a2\u3059\u3002\n// \u3059\u308b\u3068Title\u306e\u89aa\u30af\u30e9\u30b9\u3067\u3042\u308b\u3053\u306eTagWithText\u30af\u30e9\u30b9\u306b\u3001String.unaryPlus\u62e1\u5f35\u95a2\u6570\u304c\u898b\u3064\u304b\u308b\u306e\u3067\u3001\n// \u6587\u5b57\u5217\u3092\u30ec\u30b7\u30fc\u30d0\u306b\u3057\u3066\u3053\u308c\u3092\u547c\u3073\u51fa\u3059\u3002\nabstract class TagWithText(name: String) : Tag(name) {\n    operator fun String.unaryPlus() {\n        children.add(TextElement(this))  // \u3053\u3053\u3067\u306ethis\u306f\u30ec\u30b7\u30fc\u30d0\u3067\u3001\u578b\u306fString\n    }\n}\n\n\u3053\u3053\u3067\u524d\u7f6e\u306e + \u304c\u3084\u3063\u3066\u3044\u308b\u306e\u306f\u3001\u6587\u5b57\u5217\u3092 TextElement \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30e9\u30c3\u30d7\u3057\u3066\u3001\u305d\u308c\u3092 children \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3067\u6587\u5b57\u5217\u306f\u30bf\u30b0\u6728\u69cb\u9020\u306e\u6b63\u5f0f\u306a\u4e00\u90e8\u306b\u306a\u308c\u305f\u3002\n\u3053\u308c\u3089\u5168\u3066\u306f\u4e0a\u306e\u65b9\u306b\u3042\u308b\u30d3\u30eb\u30c0\u30fc\u306e\u4f8b\u306e\u30c8\u30c3\u30d7\u3067 import \u3057\u3066\u3044\u308b com.example.html \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\ncom.example.html\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u5b9a\u7fa9\u5168\u90e8\npackage com.example.html\n\ninterface Element {\n    fun render(builder: StringBuilder, indent: String)\n}\n\nclass TextElement(val text: String) : Element {\n    override fun render(builder: StringBuilder, indent: String) {\n        builder.append(\"$indent$text\\n\")\n    }\n}\n\nabstract class Tag(val name: String) : Element {\n    val children = arrayListOf<Element>()\n    val attributes = hashMapOf<String, String>()\n\n    protected fun <T : Element> initTag(tag: T, init: T.() -> Unit): T {\n        tag.init()\n        children.add(tag)\n        return tag\n    }\n\n    override fun render(builder: StringBuilder, indent: String) {\n        builder.append(\"$indent<$name${renderAttributes()}>\\n\")\n        for (c in children) {\n            c.render(builder, indent + \"  \")\n        }\n        builder.append(\"$indent</$name>\\n\")\n    }\n\n    private fun renderAttributes(): String? {\n        val builder = StringBuilder()\n        for (a in attributes.keys) {\n            builder.append(\" $a=\\\"${attributes[a]}\\\"\")\n        }\n        return builder.toString()\n    }\n\n\n    override fun toString(): String {\n        val builder = StringBuilder()\n        render(builder, \"\")\n        return builder.toString()\n    }\n}\n\nabstract class TagWithText(name: String) : Tag(name) {\n    operator fun String.unaryPlus() {\n        children.add(TextElement(this))\n    }\n}\n\nclass HTML() : TagWithText(\"html\") {\n    fun head(init: Head.() -> Unit) = initTag(Head(), init)\n\n    fun body(init: Body.() -> Unit) = initTag(Body(), init)\n}\n\nclass Head() : TagWithText(\"head\") {\n    fun title(init: Title.() -> Unit) = initTag(Title(), init)\n}\n\nclass Title() : TagWithText(\"title\")\n\nabstract class BodyTag(name: String) : TagWithText(name) {\n    fun b(init: B.() -> Unit) = initTag(B(), init)\n    fun p(init: P.() -> Unit) = initTag(P(), init)\n    fun h1(init: H1.() -> Unit) = initTag(H1(), init)\n    fun a(href: String, init: A.() -> Unit) {\n        val a = initTag(A(), init)\n        a.href = href\n    }\n}\n\nclass Body() : BodyTag(\"body\")\nclass B() : BodyTag(\"b\")\nclass P() : BodyTag(\"p\")\nclass H1() : BodyTag(\"h1\")\n\nclass A() : BodyTag(\"a\") {\n    public var href: String\n        get() = attributes[\"href\"]!!\n        set(value) {\n            attributes[\"href\"] = value\n        }\n}\n\nfun html(init: HTML.() -> Unit): HTML {\n    val html = HTML()\n    html.init()\n    return html\n}\n\n\n\u52d5\u7684\u578b\n\u6ce8\uff1aJVM\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3057\u305f\u30b3\u30fc\u30c9\u3067\u306f\u52d5\u7684\u578b\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u3044\u3002\nKotlin\u306f\u9759\u7684\u578b\u4ed8\u3051\u8a00\u8a9e\u3067\u3042\u308a\u306a\u304c\u3089\u3001Javascript\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u3088\u3046\u306a\u578b\u306e\u306a\u3044\u307e\u305f\u306f\u578b\u4ed8\u3051\u306e\u3086\u308b\u3044\u74b0\u5883\u3068\u3082\u76f8\u4e92\u904b\u7528\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\u3053\u308c\u3089\u306e\u5229\u7528\u72b6\u6cc1\u3092\u624b\u52a9\u3051\u3059\u308b\u305f\u3081\u306b\u3001\u8a00\u8a9e\u5185\u3067\u52d5\u7684\u306a\u578b\u304c\u5229\u7528\u3067\u304d\u308b\u3002\nval dyn: dynamic = ...\n\n\u52d5\u7684\u578b\u306f\u57fa\u672c\u7684\u306bKotlin\u306e\u578b\u30c1\u30a7\u30c3\u30af\u3092\u6b62\u3081\u308b\u3002\n\n\u3053\u306e\u578b\u306e\u5024\u306f\u3069\u3093\u306a\u5909\u6570\u306b\u3082\u5165\u308c\u3089\u308c\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u3069\u3053\u306b\u3067\u3082\u6e21\u305b\u308b\u3002\n\u3069\u3093\u306a\u5024\u3082 dynamic \u578b\u306e\u5909\u6570\u306b\u4ee3\u5165\u3067\u304d\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066 dynamic \u3092\u53d6\u308b\u95a2\u6570\u306b\u6e21\u305b\u308b\u3002\n\u3053\u308c\u3089\u306e\u5024\u3067null\u30c1\u30a7\u30c3\u30af\u306f\u7121\u52b9\n\ndynamic \u578b\u306e\u6700\u3082\u7279\u5fb4\u7684\u306a\u6a5f\u80fd\u306f dynamic \u5909\u6570\u306b\u5bfe\u3057\u3066\u3069\u3093\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u3084\u95a2\u6570\u3082\u547c\u3073\u51fa\u305b\u308b\u3053\u3068\u3002\ndyn.whatever(1, \"foo\", dyn) // 'whatever' \u306f\u3069\u3053\u306b\u3082\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\ndyn.whatever(*array(1, 2, 3))\n\nJavascript\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f\u3001\u3053\u306e\u30b3\u30fc\u30c9\u306f\u300c\u305d\u306e\u307e\u307e\u300d\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3002\u3064\u307e\u308a Kotlin\u3067\u306e dyn.whatever(1) \u306f\u751f\u6210\u3055\u308c\u305fJavascript\u30b3\u30fc\u30c9\u3067\u306f dyn.whatever(1) \u3068\u306a\u308b\u3002\n\u52d5\u7684\u547c\u3073\u51fa\u3057\u306f\u5e38\u306b\u7d50\u679c\u3068\u3057\u3066 dynamic \u3092\u8fd4\u3059\u3002\u306a\u306e\u3067\u81ea\u7531\u306b\u30c1\u30a7\u30a4\u30f3\u547c\u3073\u51fa\u3057\u3067\u304d\u308b\u3002\ndyn.foo().bar.baz()\n\n\u52d5\u7684\u547c\u3073\u51fa\u3057\u306b\u30e9\u30e0\u30c0\u3092\u6e21\u3059\u6642\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5168\u3066\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b\u306f dynamic \u306b\u306a\u308b\u3002\ndyn.foo {\n  x -> x.bar() // x \u306f dynamic\n}\n\n\n\u6b21\u3078\n\u3053\u308c\u3067Kotlin\u6587\u6cd5\u306f\u304a\u3057\u307e\u3044\u3002\u304a\u75b2\u308c\u69d8!!\n\u6b21\u306fKotlin - Java\u3068\u306e\u76f8\u4e92\u904b\u7528\u3092\u3069\u3046\u305e\u3002\n\n\n\n\n\u4e0a\u306e\u4f8b\u3067x\u306fvar\u306a\u306e\u3067KMutableProperty\u306b\u306a\u308b\u306f\u305a\u3002KProperty\u306b\u306a\u308b\u306e\u306fval\u306e\u3068\u304d\u3002\u00a0\u21a9\n\n\n\n\n# \u306f\u3058\u3081\u306b\n\n[Kotlin\u6587\u6cd5 - this\u3001\u7b49\u4fa1\u6027\u3001\u6f14\u7b97\u5b50\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u3001Null\u5b89\u5168\u3001\u4f8b\u5916](http://qiita.com/k5n/items/6fe586bf2e5530684681)\u306e\u7d9a\u304d\u3002\n\n[Kotlin Reference](https://kotlinlang.org/dscs/reference/)\u306eOther\u7ae0This expressions, Equality, Operator overloading, Null Safety, Exceptions\u306e\u5927\u96d1\u628a\u65e5\u672c\u8a9e\u8a33\u3002\u9069\u5b9c\u8aac\u660e\u3092\u5909\u3048\u305f\u308a\u7aef\u6298\u3063\u305f\u308a\u88dc\u8db3\u3057\u305f\u308a\u3057\u3066\u3044\u308b\u3002\n\n# \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\n## \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5ba3\u8a00\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u30b3\u30fc\u30c9\u306b\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u4ed8\u52a0\u3059\u308b\u624b\u6bb5\u3002\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5ba3\u8a00\u3059\u308b\u306b\u306f\u3001*class* \u306e\u524d\u306b *annotation* \u4fee\u98fe\u5b50\u3092\u4ed8\u3051\u308b\u3002\n\n```kotlin\n// Fancy\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5ba3\u8a00\u3059\u308b\nannotation class Fancy\n```\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u30af\u30e9\u30b9\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u4fee\u98fe\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u4ed8\u52a0\u5c5e\u6027\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n - [@Target](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.annotation/-target/index.html) \u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3089\u308c\u308b\u8981\u7d20\u306e\u3042\u308a\u5f97\u308b\u7a2e\u985e\uff08\u30af\u30e9\u30b9\u3001\u95a2\u6570\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u3001\u5f0f\u306a\u3069\uff09\u3092\u6307\u5b9a\u3059\u308b\u3002\n - [@Retention](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.annotation/-retention/index.html) \u306f\u3001\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30af\u30e9\u30b9\u30d5\u30a1\u30a4\u30eb\u306b\u542b\u3081\u308b\u304b\u3068\u3001\u5b9f\u884c\u6642\u306b\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u901a\u3057\u3066\u53ef\u8996\u5316\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3069\u3061\u3089\u3082 *true*\u3002\n - [@Repetable](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.annotation/-repeatable/index.html)\u306f\uff11\u3064\u306e\u30a8\u30ec\u30e1\u30f3\u30c8\u306b\u540c\u3058\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8907\u6570\u56de\u4f7f\u3046\u3053\u3068\u3092\u8a31\u53ef\u3059\u308b\u3002\n - [@MustBeDocumented ](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.annotation/-must-be-documented/index.html)\u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u516c\u958bAPI\u306e\u4e00\u90e8\u3068\u3059\u308b\u304b\u3001\u751f\u6210\u3055\u308c\u308bAPI\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8868\u793a\u3055\u308c\u308b\u30af\u30e9\u30b9\u3084\u30e1\u30bd\u30c3\u30c9\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306b\u542b\u3081\u308b\u3079\u304d\u304b\u3069\u3046\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n```kotlin\n@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION,\n        AnnotationTarget.VALUE_PARAMETER, AnnotationTarget.EXPRESSION)\n@Retention(AnnotationRetention.SOURCE)\n@MustBeDocumented\npublic annotation class Fancy\n```\n\n### \u4f7f\u3044\u65b9\n\n```kotlin\n@Fancy class Foo {\n  @Fancy fun baz(@Fancy foo: Int): Int {\n    return (@Fancy 1)\n  }\n}\n```\n\n\u3082\u3057\u30af\u30e9\u30b9\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4fee\u98fe\u3057\u305f\u3044\u306a\u3089\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5ba3\u8a00\u3067 *constructor* \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u305d\u306e\u524d\u306b\u4ed8\u3051\u308b\u3002\n\n```kotlin\nclass Foo @Inject constructor(dependency: MyDependency) {\n  // ...\n}\n```\n\n\u30a2\u30af\u30bb\u30b5\u306b\u3082\u4ed8\u3051\u3089\u308c\u308b\u3002\n\n```kotlin\nclass Foo {\n    var x: MyDependency? = null\n        @Inject set\n}\n```\n\n### \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d6\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u3064\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n```kotlin\nannotation class Special(val why: String)\n\n@Special(\"example\") class Foo {}\n```\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b\u3068\u3057\u3066\u8a31\u3055\u308c\u308b\u306e\u306f\u4ee5\u4e0b\u3002\n\n - Java\u306e\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b\u306b\u5bfe\u5fdc\u3059\u308b\u578b(Int, Long\u306a\u3069\uff09\n - \u6587\u5b57\u5217\n - \u30af\u30e9\u30b9(Foo::class)\n - enum\n - \u4ed6\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n - \u4e0a\u306b\u6319\u3052\u305f\u578b\u306e\u914d\u5217\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed6\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u4f7f\u3046\u5834\u5408\u3001\u305d\u306e\u540d\u524d\u306e\u524d\u306b @ \u306f\u4ed8\u3051\u306a\u3044\u3002\n\n```kotlin\npublic annotation class ReplaceWith(val expression: String)\n\npublic annotation class Deprecated(\n        val message: String,\n        val replaceWith: ReplaceWith = ReplaceWith(\"\"))\n\n@Deprecated(\"This function is deprecated, use === instead\", ReplaceWith(\"this === other\"))\n```\n\n### \u30e9\u30e0\u30c0\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u30e9\u30e0\u30c0\u306b\u3082\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30e9\u30e0\u30c0\u306e\u30dc\u30c7\u30a3\u304c\u751f\u6210\u3055\u308c\u308b\u5148\u306e *invoke()* \u30e1\u30bd\u30c3\u30c9\u306b\u9069\u7528\u3055\u308c\u308b\u3002\u3053\u308c\u306f[Quasar](http://www.paralleluniverse.co/quasar/)\uff08\u4e26\u5217\u6027\u306e\u5236\u5fa1\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\uff09\u306e\u3088\u3046\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u4fbf\u5229\u3002\n\n```kotlin\nannotation class Suspendable\n\nval f = @Suspendable { Fiber.sleep(10) }\n```\n\n## \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5229\u7528\u5834\u6240\u30bf\u30fc\u30b2\u30c3\u30c8\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u3084\u30d7\u30e9\u30a4\u30de\u30ea\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4fee\u98fe\u3059\u308b\u3068\u304d\u3001Kotlin\u306e\u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308bJava\u8981\u7d20\u304c\u8907\u6570\u751f\u6210\u3055\u308c\u3001\u305d\u308c\u3086\u3048\u751f\u6210\u3055\u308c\u308bJava\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u914d\u7f6e\u3055\u308c\u308b\u5834\u6240\u304c\u8907\u6570\u751f\u3058\u3066\u3057\u307e\u3046\u3002\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u751f\u6210\u3092\u6b63\u78ba\u306b\u6307\u5b9a\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u66f8\u5f0f\u304c\u4f7f\u3048\u308b\u3002\n\n```kotlin\n// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u5f15\u6570\u306bval\u3092\u4ed8\u3051\u308b\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u3082\u4e00\u7dd2\u306b\u751f\u6210\u3055\u308c\u308b\u3002\n// \u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u306f\u30d0\u30c3\u30ad\u30f3\u30b0\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u30b2\u30c3\u30bf\u30fc\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n// \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u5f15\u6570\u306b\u4ed8\u304f\u306e\uff1f\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\uff1f\u305d\u308c\u3068\u3082\u30b2\u30c3\u30bf\u30fc\uff1f\nclass Example(@field:Ann val foo,    // Java\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4fee\u98fe\u3059\u308b\n              @get:Ann val bar,      // Java\u306egetter\u3092\u4fee\u98fe\u3059\u308b\n              @param:Ann val quux)   // Java\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5f15\u6570\u3092\u4fee\u98fe\u3059\u308b\n```\n\n\u540c\u3058\u66f8\u5f0f\u306f\u30d5\u30a1\u30a4\u30eb\u5168\u4f53\u306e\u4fee\u98fe\u306b\u3082\u4f7f\u3048\u308b\u3002\u305d\u308c\u306b\u306f\u30d5\u30a1\u30a4\u30eb\u306e\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u3067\u3001*package* \u547d\u4ee4\u306e\u524d\u304b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30c3\u30b1\u30fc\u30b8\u306a\u3089\u5168\u3066\u306e *import* \u306e\u524d\u306b\u3001*file* \u30bf\u30fc\u30b2\u30c3\u30c8\u4ed8\u304d\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u7f6e\u304f\u3002\n\n```kotlin\n@file:JvmName(\"Foo\")\n\npackage org.jetbrains.demo\n```\n\n\u540c\u3058\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u8907\u6570\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u306a\u3089\u3001\u62ec\u5f27\u3092\u4f7f\u3063\u3066\u4e2d\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4e26\u3079\u308b\u3053\u3068\u3067\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u7e70\u308a\u8fd4\u3057\u66f8\u304f\u306e\u3092\u907f\u3051\u3089\u308c\u308b\u3002\n\n```kotlin\nclass Example {\n     // @set:Inject @set:VisibleForTesting \u3068\u66f8\u304b\u306a\u304f\u3066\u3082\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\n     @set:[Inject VisibleForTesting]\n     public var collaborator: Collaborator\n}\n```\n\n\u5229\u7528\u5834\u6240\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u5168\u3066\u306e\u30ea\u30b9\u30c8\u306f\u4ee5\u4e0b\u3002\n\n - file\n - property \uff08\u3053\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u4ed8\u304d\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306fJava\u304b\u3089\u306f\u898b\u3048\u306a\u3044\uff09\n - field\n - get\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30b2\u30c3\u30bf\u30fc\uff09\n - set\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30bb\u30c3\u30bf\u30fc\uff09\n - receiver\uff08\u62e1\u5f35\u95a2\u6570\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30ec\u30b7\u30fc\u30d0\u30d1\u30e9\u30e1\u30fc\u30bf\uff09\n - param\uff08\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5f15\u6570\uff09\n - setparam\uff08\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u30bb\u30c3\u30bf\u30fc\u5f15\u6570\uff09\n\n\u62e1\u5f35\u95a2\u6570\u306e\u30ec\u30b7\u30fc\u30d0\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4fee\u98fe\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u66f8\u5f0f\u3092\u4f7f\u3046\u3002\n\n```kotlin\nfun @receiver:Fancy String.myExtension() { }\n```\n\n\u5229\u7528\u5834\u6240\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e *@Target* \u306b\u5f93\u3063\u3066\u9078\u629e\u3055\u308c\u308b\u3002\u3082\u3057\u8907\u6570\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u3042\u308a\u5f97\u308b\u306a\u3089\u3001\u6b21\u306e\u30ea\u30b9\u30c8\u304b\u3089\u6700\u521d\u306e\u9069\u7528\u53ef\u80fd\u306a\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u4f7f\u308f\u308c\u308b\u3002\n\n - param\n - property\n - field\n\n## Java\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\nJava\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306fKotlin\u3068100%\u4e92\u63db\u6027\u304c\u3042\u308b\u3002\n\n```kotlin\nimport org.junit.Test\nimport org.junit.Assert.*\n\nclass Tests {\n  @Test fun simple() {\n    assertEquals(42, getTheAnswer())\n  }\n}\n```\n\nJava\u3067\u66f8\u304b\u308c\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u9806\u756a\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u5f15\u6570\u3092\u6e21\u3059\u306e\u306b\u901a\u5e38\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u66f8\u5f0f\u306f\u5229\u7528\u3067\u304d\u306a\u3044\u3002\u4ee3\u308f\u308a\u306b\u540d\u524d\u4ed8\u304d\u5f15\u6570\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```java\n// Java\npublic @interface Ann {\n    int intValue();\n    String stringValue();\n}\n```\n\n```kotlin\n// Kotlin\n@Ann(intValue = 1, stringValue = \"abc\") class C\n```\n\nJava\u3068\u540c\u69d8\u306b *value* \u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u7279\u5225\u3067\u3001\u540d\u524d\u3092\u660e\u793a\u3057\u306a\u304f\u3066\u3044\u3044\u3002\n\n```java\n// Java\npublic @interface AnnWithValue {\n    String value();\n}\n```\n\n```kotlin\n// Kotlin\n@AnnWithValue(\"abc\") class C\n```\n\n\u3082\u3057Java\u306e *value* \u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u914d\u5217\u306a\u3089\u3001Kotlin\u3067\u306f *vararg* \uff08\u53ef\u5909\u9577\uff09\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306a\u308b\u3002\n\n```java\n// Java\npublic @interface AnnWithArrayValue {\n    String[] value();\n}\n```\n\n```kotlin\n// Kotlin\n@AnnWithArrayValue(\"abc\", \"foo\", \"bar\") class C\n```\n\n\u3082\u3057\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u5f15\u6570\u3068\u3057\u3066\u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306a\u3089\u3001Kotlin\u30af\u30e9\u30b9(KClass)\u3092\u4f7f\u3046\u3002Kotlin\u30b3\u30f3\u30d1\u30a4\u30e9\u306f\u81ea\u52d5\u7684\u306b\u305d\u308c\u3092Java\u30af\u30e9\u30b9\u306b\u5909\u63db\u3059\u308b\u306e\u3067\u3001Java\u30b3\u30fc\u30c9\u306f\u666e\u901a\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u5f15\u6570\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```kotlin\nimport kotlin.reflect.KClass\n\nannotation class Ann(val arg1: KClass<*>, val arg2: KClass<out Any?>)\n\n@Ann(String::class, Int::class) class MyClass\n```\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u5024\u306fKotlin\u30b3\u30fc\u30c9\u306b\u306f\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u898b\u3048\u308b\u3002\n\n```java\n// Java\npublic @interface Ann {\n    int value();\n}\n```\n\n```kotlin\n// Kotlin\nfun foo(ann: Ann) {\n    val i = ann.value\n}\n```\n\n# \u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\n\n\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u306f\u5b9f\u884c\u6642\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u69cb\u9020\u3092\u8997\u304d\u898b\u308b\u3053\u3068\u3092\u53ef\u80fd\u3068\u3059\u308b\u8a00\u8a9e\u3084\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4ed5\u7d44\u307f\u3067\u3042\u308b\u3002Kotlin\u306f\u95a2\u6570\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u7b2c1\u7d1a\u5e02\u6c11\u306b\u3057\u3066\u304a\u308a\u3001\u305d\u308c\u3089\u3092\u8997\u304d\u898b\u308b\uff08\u3064\u307e\u308a\u5b9f\u884c\u6642\u306b\u95a2\u6570\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u578b\u3084\u540d\u524d\u304c\u5206\u304b\u308b\uff09\u3053\u3068\u306f\u95a2\u6570\u578b\u3084\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30bf\u30a4\u30eb\u3092\u7c21\u5358\u306b\u7528\u3044\u308b\u3053\u3068\u3068\u5bc6\u63a5\u306b\u7d50\u3073\u3064\u3044\u3066\u3044\u308b\u3002\n\n\u6ce8\uff1aJava\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f\u3001\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u4f7f\u3046\u30e9\u30f3\u30bf\u30a4\u30e0\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u5225\u306eJAR\u30d5\u30a1\u30a4\u30eb(kotlin-reflect.jar)\u3068\u3057\u3066\u914d\u5e03\u3055\u308c\u308b\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u308f\u306a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u8981\u6c42\u3055\u308c\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u30e9\u30a4\u30d6\u30e9\u30ea\u30b5\u30a4\u30ba\u3092\u524a\u6e1b\u3057\u3066\u3044\u308b\u3002\u3082\u3057\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u306a\u3089\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30af\u30e9\u30b9\u30d1\u30b9\u306b\u305d\u306e .jar \u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u306e\u3092\u5fd8\u308c\u306a\u3044\u3053\u3068\u3002\n\n## \u30af\u30e9\u30b9\u53c2\u7167\n\n\u6700\u3082\u57fa\u672c\u7684\u306a\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u6a5f\u80fd\u306f\u3001Kotlin\u30af\u30e9\u30b9\u3078\u306e\u5b9f\u884c\u6642\u53c2\u7167\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u3002\u9759\u7684\u306b\u5206\u304b\u3063\u3066\u3044\u308bKotlin\u30af\u30e9\u30b9\u3078\u306e\u53c2\u7167\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001\u30af\u30e9\u30b9\u30ea\u30c6\u30e9\u30eb\u66f8\u5f0f\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n```kotlin\nval c = MyClass::class\n```\n\n\u53c2\u7167\u306fKClass\u578b\u306e\u5024\u3002\n\nKotlin\u30af\u30e9\u30b9\u53c2\u7167\u306fJava\u30af\u30e9\u30b9\u53c2\u7167\u3068\u540c\u3058\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002Java\u30af\u30e9\u30b9\u53c2\u7167\u3092\u5f97\u308b\u306b\u306f\u3001*KClass* \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e *.java* \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u3002\n\n## \u95a2\u6570\u53c2\u7167\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u540d\u524d\u4ed8\u304d\u95a2\u6570\u304c\u3042\u308b\u3068\u304d\u3001\n\n```kotlin\nfun isOdd(x: Int) = x % 2 != 0\n```\n\n\u3053\u308c\u3092\u7c21\u5358\u306b\u76f4\u63a5\u547c\u3073\u51fa\u305b\u308b( *isOdd(5)* )\u3002\u3051\u3069\u3053\u308c\u3092\u5024\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u308b\u3002\u3064\u307e\u308a\u4ed6\u306e\u95a2\u6570\u306b\u3002\u305d\u308c\u306b\u306f *::* \u6f14\u7b97\u5b50\u3092\u4f7f\u3046\u3002\n\n```kotlin\nval numbers = listOf(1, 2, 3)\nprintln(numbers.filter(::isOdd)) // [1, 3]\u3092\u8868\u793a\u3059\u308b\n```\n\n\u3053\u3053\u3067 *::isOdd* \u306f *(Int) -> Boolean* \u95a2\u6570\u578b\u306e\u5024\u3067\u3042\u308b\u3002\n\n*::* \u6f14\u7b97\u5b50\u306f\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u95a2\u6570\u306b\u306f\u4f7f\u3048\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3002\u5c06\u6765\u7684\u306b\u306f\u3001\u95a2\u6570\u306e\u7279\u5b9a\u306e\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u304c\u9078\u629e\u53ef\u80fd\u306a\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u578b\u3092\u6307\u5b9a\u3059\u308b\u66f8\u5f0f\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3092\u8a08\u753b\u3057\u3066\u3044\u308b\u3002\n\n## \u4f8b\uff1a\u95a2\u6570\u5408\u6210\n\n\u6b21\u306e\u95a2\u6570\u3092\u8003\u3048\u3066\u307f\u308b\u3002\n\n```kotlin\nfun <A, B, C> compose(f: (B) -> C, g: (A) -> B): (A) -> C {\n    return { x -> f(g(x)) }\n}\n```\n\n\u3053\u308c\u306f\u6e21\u3055\u308c\u305f\uff12\u3064\u306e\u95a2\u6570\u3092\u5408\u6210\u3057\u305f\u3082\u306e\u3092\u8fd4\u3059\u3002\u3064\u307e\u308a compose(f, g) = f(g(*)) \u3002\u3053\u308c\u3092\u547c\u3073\u51fa\u3057\u53ef\u80fd\u306a\u53c2\u7167\u306b\u9069\u7528\u3067\u304d\u308b\u3002\n\n```kotlin\nfun length(s: String) = s.size\n\n// isOdd(length(s)) \u306e\u52d5\u4f5c\u3092\u3059\u308b\u95a2\u6570\u3092\u4f5c\u3063\u3066 oddLength \u306b\u683c\u7d0d\u3059\u308b\nval oddLength = compose(::isOdd, ::length)\nval strings = listOf(\"a\", \"ab\", \"abc\")\n\n// \u6e21\u3057\u305f\u6587\u5b57\u5217\u306e\u30ea\u30b9\u30c8\u306e\u3046\u3061\u3001\u9577\u3055\u304c\u5947\u6570\u306e\u3082\u306e\u3060\u3051\u8868\u793a\u3059\u308b\nprintln(strings.filter(oddLength)) // \"[a, abc]\"\u3068\u8868\u793a\u3055\u308c\u308b\n```\n\n## \u30d7\u30ed\u30d1\u30c6\u30a3\u53c2\u7167\n\nKotlin\u3067\u7b2c1\u7d1a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u306b\u3082\u3001*::* \u6f14\u7b97\u5b50\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n```kotlin\nvar x = 1\n\nfun main(args: Array<String>) {\n    println(::x.get()) // \"1\"\u304c\u8868\u793a\u3055\u308c\u308b\n    ::x.set(2)\n    println(x)         // \"2\"\u304c\u8868\u793a\u3055\u308c\u308b\n}\n```\n\n*::x* \u306f *KProperty&lt;Int&gt;* \u578b\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u7b49\u4fa1\u3067\u3042\u308b[^1]\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068 *get()* \u3067\u5024\u3092\u8aad\u307f\u3060\u3057\u305f\u308a\u3001*name* \u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u3092\u53d6\u5f97\u3057\u305f\u308a\u3067\u304d\u308b\u3002\u8a73\u7d30\u306f[KProperty\u30af\u30e9\u30b9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-property/index.html)\u3092\u53c2\u7167\u3002\n\n[^1]: \u4e0a\u306e\u4f8b\u3067x\u306fvar\u306a\u306e\u3067KMutableProperty<Int>\u306b\u306a\u308b\u306f\u305a\u3002KProperty<Int>\u306b\u306a\u308b\u306e\u306fval\u306e\u3068\u304d\u3002\n\n\u5909\u66f4\u53ef\u80fd\u306a\u30d7\u30ed\u30d1\u30c6\u30a3(\u4f8b\u3048\u3070 *var y = 1*)\u306b\u306f\u3001*::y* \u306f *set()* \u3092\u6301\u3064 *KMutableProperty&lt;Int&gt;* \u3092\u8fd4\u3059\u3002\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u53c2\u7167\u306f\u5f15\u6570\u306e\u306a\u3044\u95a2\u6570\u304c\u671f\u5f85\u3055\u308c\u308b\u5834\u6240\u3067\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```kotlin\nval strs = listOf(\"a\", \"bc\", \"def\")\n// map\u306e\u51e6\u7406\u3068\u3057\u3066\u3001\u5404String\u8981\u7d20\u306elength\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3059\u308b\nprintln(strs.map(String::length)) // [1, 2, 3] \u3092\u8868\u793a\u3059\u308b\n```\n\n\u30af\u30e9\u30b9\u30e1\u30f3\u30d0\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u4fee\u98fe\u3059\u308b\u3002\n\n```kotlin\nclass A(val p: Int)\n\nfun main(args: Array<String>) {\n    val prop = A::p         // A\u30af\u30e9\u30b9\u306ep\u30d7\u30ed\u30d1\u30c6\u30a3\u53c2\u7167\u3092prop\u306b\u4ee3\u5165\n    println(prop.get(A(1))) // \"1\"\u3092\u8868\u793a\u3059\u308b\n}\n```\n\n\u62e1\u5f35\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n```kotlin\n// String\u306blastChar\u62e1\u5f35\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u7528\u610f\nval String.lastChar: Char\n  get() = this[size - 1]\n\nfun main(args: Array<String>) {\n  println(String::lastChar.get(\"abc\")) // \"c\"\u3092\u8868\u793a\u3059\u308b\n}\n```\n\n## Java\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3068\u306e\u76f8\u4e92\u904b\u7528\u6027\n\nJava\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f\u3001\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u30af\u30e9\u30b9\u306e\u62e1\u5f35\u3092\u7528\u610f\u3057\u3066\u3044\u308b\u3002\u305d\u306e\u62e1\u5f35\u304cJava\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u306e\u9593\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u63d0\u4f9b\u3059\u308b\u3002\u4f8b\u3048\u3070\u3001\u30d0\u30c3\u30ad\u30f3\u30b0\u30d5\u30a3\u30fc\u30eb\u30c9\u3084Kotlin\u30d7\u30ed\u30d1\u30c6\u30a3\u306egetter\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u308bJava\u30e1\u30bd\u30c3\u30c9\u3092\u898b\u3064\u3051\u308b\u305f\u3081\u306b\u3001\u3053\u3093\u306a\u98a8\u306b\u66f8\u3051\u308b\u3002\n\n```kotlin\n// \u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308bJava\u3068\u306e\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u76f8\u4e92\u904b\u7528\u62e1\u5f35\u3092\u4f7f\u3046\nimport kotlin.reflect.jvm.*\n \nclass A(val p: Int)\n \nfun main(args: Array<String>) {\n    // Kotlin\u30af\u30e9\u30b9\u3067\u3042\u308bA\u306e\u30d7\u30ed\u30d1\u30c6\u30a3p\u306eJava\u3067\u306eGetter\u30e1\u30bd\u30c3\u30c9\u3092\u8868\u793a\n    println(A::p.javaGetter) // \"public final int A.getP()\" \u3068\u8868\u793a\u3055\u308c\u308b\n    // Kotlin\u30af\u30e9\u30b9\u3067\u3042\u308bA\u306e\u30d7\u30ed\u30d1\u30c6\u30a3p\u306eJava\u3067\u306e\u30d0\u30c3\u30ad\u30f3\u30b0\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8868\u793a\n    println(A::p.javaField)  // \"private final int A.p\" \u3068\u8868\u793a\u3055\u308c\u308b\n}\n```\n\nJava\u30af\u30e9\u30b9\u306b\u5bfe\u5fdc\u3059\u308bKotlin\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001*.kotlin* \u62e1\u5f35\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u3002\n\n```kotlin\nfun getKClass(o: Any): KClass<Any> = o.javaClass.kotlin\n```\n\n## \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u53c2\u7167\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3082\u30e1\u30bd\u30c3\u30c9\u3084\u30d7\u30ed\u30d1\u30c6\u30a3\u3068\u540c\u3058\u3088\u3046\u306b\u53c2\u7167\u3067\u304d\u308b\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u5f15\u6570\u304c\u540c\u3058\u3067\u9069\u5207\u306a\u578b\u306e\u623b\u308a\u5024\u3092\u6301\u3064\u95a2\u6570\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u671f\u5f85\u3055\u308c\u308b\u5834\u6240\u306a\u3089\u3001\u3069\u3053\u3067\u3082\u5229\u7528\u3067\u304d\u308b\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f *::* \u6f14\u7b97\u5b50\u306e\u5f8c\u306b\u30af\u30e9\u30b9\u540d\u3092\u52a0\u3048\u308b\u3053\u3068\u3067\u53c2\u7167\u3067\u304d\u308b\u3002\u300c\u5f15\u6570\u306a\u3057\u3067 *Foo* \u3092\u8fd4\u3059\u95a2\u6570\u300d\u3092\u5f15\u6570\u3068\u3057\u3066\u671f\u5f85\u3059\u308b\u3001\u6b21\u306e\u95a2\u6570\u3092\u8003\u3048\u3066\u307f\u3088\u3046\u3002\n\n```kotlin\nclass Foo\n\nfun function(factory : () -> Foo) {\n    val x : Foo = factory()\n}\n```\n\n*::Foo* \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001*Foo* \u306e\u5f15\u6570\u306a\u3057\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u3001\u3053\u3093\u306a\u98a8\u306b\u7c21\u5358\u306b\u547c\u3073\u51fa\u305b\u308b\u3002\n\n```kotlin\nfunction(::Foo)\n```\n\n# \u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\n\n[\u30d3\u30eb\u30c0\u30fc](http://www.groovy-lang.org/dsls.html#_nodebuilder)\u306e\u6982\u5ff5\u306fGroovy\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u306f\u304b\u306a\u308a\u30dd\u30d4\u30e5\u30e9\u30fc\u3002\u30d3\u30eb\u30c0\u30fc\u3092\u7528\u3044\u308b\u3068\u6e96\u5ba3\u8a00\u7684\u306b\u30c7\u30fc\u30bf\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\u30d3\u30eb\u30c0\u30fc\u306f[XML\u751f\u6210](http://www.groovy-lang.org/processing-xml.html#_creating_xml)\u3001[UI\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30ec\u30a4\u30a2\u30a6\u30c8](http://www.groovy-lang.org/swing.html)\u3001[3D\u30b7\u30fc\u30f3\u306e\u63cf\u5199](http://www.artima.com/weblogs/viewpost.jsp?thread=296081)\u306a\u3069\u3067\u4fbf\u5229\u3002\n\n\u591a\u304f\u306e\u5229\u7528\u30b1\u30fc\u30b9\u3067\u3001Kotlin\u306f\u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\u3092\u63d0\u4f9b\u3067\u304d\u308b\u3002\u578b\u5b89\u5168\u6027\u3067\u3042\u308b\u3053\u3068\u3067Groovy\u3067\u306e\u52d5\u7684\u578b\u4ed8\u3051\u5b9f\u88c5\u3088\u308a\u3082\u9b45\u529b\u7684\u306a\u3082\u306e\u306b\u306a\u308b\u3002\n\n\u6b8b\u308a\u306e\u4e8b\u4f8b\u3067\u306f\u3001Kotlin\u306f\u52d5\u7684\u7247\u4ed8\u3051\u30d3\u30eb\u30c0\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u3002\n\n## \u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\u306e\u4f8b\n\n\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u8003\u3048\u3066\u307f\u3088\u3046\u3002\n\n```kotlin\nimport com.example.html.*\n\nfun result(args: Array<String>) =\n  html {\n    head {\n      title {+\"Kotlin\u3067\u306eXML\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\"}\n    }\n    body {\n      h1 {+\"Kotlin\u3067\u306eXML\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\"}\n      p  {+\"\u3053\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306fXML\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u4ee3\u66ff\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3002\"}\n\n      // \u5c5e\u6027\u3068\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3064\u8981\u7d20\n      a(href = \"http://kotlinlang.org\") {+\"Kotlin\"}\n\n      // \u8907\u5408\u30b3\u30f3\u30c6\u30f3\u30c4\n      p {\n        +\"\u3053\u308c\u306f\u5e7e\u3064\u304b\u306e\"\n        b {+\"\u8907\u5408\u3055\u308c\u305f\"}\n        +\"\u30c6\u30ad\u30b9\u30c8\u3002\u8a73\u7d30\u306f\"\n        a(href = \"http://kotlinlang.org\") {+\"Kotlin\"}\n        +\"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53c2\u7167\u3002\"\n      }\n      p {+\"\u3044\u304f\u3089\u304b\u306e\u30c6\u30ad\u30b9\u30c8\"}\n\n      // \u751f\u6210\u3055\u308c\u308b\u5185\u5bb9\n      p {\n        for (arg in args)\n          +arg\n      }\n    }\n  }\n```\n\n\u3053\u308c\u306f\u5b8c\u5168\u306b\u6b63\u5f53\u306aKotlin\u30b3\u30fc\u30c9\u3067\u3042\u308b\u3002[\u3053\u3053](http://try.kotlinlang.org/#/Examples/Longer%20examples/HTML%20Builder/HTML%20Builder.kt)\u3067\uff08\u5909\u66f4\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u3067\u5b9f\u884c\u3057\u3066\uff09\u3053\u306e\u30b3\u30fc\u30c9\u3092\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n## \u3069\u3046\u3084\u3063\u3066\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\n\nKotlin\u3067\u306e\u578b\u5b89\u5168\u306a\u30d3\u30eb\u30c0\u30fc\u306e\u5b9f\u88c5\u30e1\u30ab\u30cb\u30ba\u30e0\u3092\u9806\u306b\u898b\u3066\u3044\u3053\u3046\u3002\u307e\u305a\u6700\u521d\u306b\u7d44\u307f\u7acb\u3066\u305f\u3044\u30e2\u30c7\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\u3002\u3053\u3053\u306e\u4f8b\u3067\u306fHTML\u30bf\u30b0\u306e\u30e2\u30c7\u30eb\u304c\u5fc5\u8981\u3060\u3002\u3053\u308c\u306f\u4e00\u9023\u306e\u30af\u30e9\u30b9\u3092\u7528\u610f\u3059\u308c\u3070\u6e08\u3080\u3002\u4f8b\u3048\u3070 *&lt;html&gt;* \u30bf\u30b0\u3092\u8868\u3059\u306e\u306f *HTML* \u30af\u30e9\u30b9\u3067\u3001\u3053\u308c\u306f *&lt;head&gt;* \u3084 *&lt;body&gt;* \u3092\u5b50\u4f9b\u3068\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u3002\uff08\u5ba3\u8a00\u306f\u4e0b\u3092\u53c2\u7167\u3002\uff09\n\n\u30b3\u30fc\u30c9\u306e\u4e2d\u3067\u3053\u3093\u306a\u98a8\u306b\u66f8\u3051\u308b\u306e\u306f\u4f55\u6545\u306a\u306e\u304b\u601d\u3044\u51fa\u3057\u3066\u307f\u3088\u3046\u3002\n\n```kotlin\nhtml {\n // ...\n}\n```\n\n*html* \u306f\u5b9f\u969b\u306b\u306f\u30e9\u30e0\u30c0\u5f0f\u3092\u5f15\u6570\u306b\u53d6\u308b\u95a2\u6570\u3060\u3002\u3053\u306e\u95a2\u6570\u306f\u6b21\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\n```kotlin\nfun html(init: HTML.() -> Unit): HTML {\n  val html = HTML()\n  html.init()\n  return html\n}\n```\n\n\u3053\u306e\u95a2\u6570\u306f*init* \u3068\u3044\u3046\u540d\u524d\u306e\uff11\u3064\u306e\u5f15\u6570\u3092\u53d6\u308a\u3001\u305d\u306e\u5f15\u6570\u81ea\u8eab\u304c\u95a2\u6570\u3067\u3042\u308b\u3002\uff08\u5f15\u6570\u306e\uff09\u95a2\u6570\u306e\u578b\u306f *HTML.() -&gt; Unit* \u3067\u3001\u3053\u308c\u306f\u30ec\u30b7\u30fc\u30d0\u4ed8\u304d\u306e\u95a2\u6570\u3060\u3002\u3053\u308c\u306f\u95a2\u6570\u306b *HTML* \u578b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff08\u30ec\u30b7\u30fc\u30d0\uff09\u3092\u6e21\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u95a2\u6570\u306e\u4e2d\u3067\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30f3\u30d0\u3092\u547c\u3073\u51fa\u305b\u308b\u3053\u3068\u3092\u610f\u5473\u3059\u308b\u3002\u30ec\u30b7\u30fc\u30d0\u306f *this* \u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u901a\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n```kotlin\nhtml {\n  this.head { /* ... */ }\n  this.body { /* ... */ }\n}\n```\n\n\uff08*head* \u3068 *body* \u306f *html* \u306e\u30e1\u30f3\u30d0\u95a2\u6570\u3002\uff09\n\n\u3053\u3053\u3067 *this* \u306f\u666e\u901a\u306f\u7701\u7565\u3067\u304d\u308b\u3002\u3082\u3046\u3059\u3067\u306b\u3059\u3054\u304f\u30d3\u30eb\u30c0\u30fc\u3063\u307d\u3044\u611f\u3058\u306b\u898b\u3048\u308b\u3002\n\n```kotlin\nhtml {\n  head { /* ... */ }\n  body { /* ... */ }\n}\n```\n\n\u305d\u308c\u3067\u3001\u3053\u306e\u547c\u3073\u51fa\u3057\u306f\u4f55\u3092\u3084\u3063\u3066\u308b\u3093\u3060\u308d\u3046\uff1f\u4e0a\u3067\u5b9a\u7fa9\u3057\u305f *html* \u95a2\u6570\u306e\u30dc\u30c7\u30a3\u3092\u898b\u3066\u304f\u308c\u3002\u65b0\u3057\u3044 *HTML* \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u308b\u3002\u305d\u308c\u304b\u3089\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305f\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u521d\u671f\u5316\u3059\u308b\uff08\u3053\u306e\u4f8b\u3067\u306f *HTML* \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e *head* \u3068 *body* \u3092\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u3066\u308b\uff09\u3002\u305d\u308c\u304b\u3089\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059\u3002\u3053\u308c\u3053\u305d\u30d3\u30eb\u30c0\u30fc\u304c\u3084\u308b\u3079\u304d\u3053\u3068\u3060\u3002\n\n*HTML* \u30af\u30e9\u30b9\u306e *head* \u3068 *body* \u95a2\u6570\u306f *html* \u306b\u4f3c\u305f\u611f\u3058\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\u552f\u4e00\u306e\u9055\u3044\u306f\u69cb\u7bc9\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 *HTML* \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e *children* \u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3060\u3051\u3002\n\n```kotlin\nfun head(init: Head.() -> Unit) : Head {\n  val head = Head()\n  head.init()\n  children.add(head)  // \u5185\u90e8\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\u3059\u308b\n  return head\n}\n\nfun body(init: Body.() -> Unit) : Body {\n  val body = Body()\n  body.init()\n  children.add(body)  // \u5185\u90e8\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\u3059\u308b\n  return body\n```\n\n\u5b9f\u969b\u3053\u308c\u3089\uff12\u3064\u306e\u95a2\u6570\u306f\u540c\u3058\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30b8\u30a7\u30cd\u30ea\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30f3 *initTag* \u3092\u7528\u610f\u3067\u304d\u308b\u3002\n\n```kotlin\n  protected fun <T : Element> initTag(tag: T, init: T.() -> Unit): T {\n    tag.init()\n    children.add(tag)\n    return tag\n  }\n```\n\n\u3059\u308b\u3068\u3055\u3063\u304d\u306e\u95a2\u6570\u306f\u3059\u3063\u304d\u308a\u3068\u3053\u3046\u306a\u308b\u3002\n\n```kotlin\nfun head(init: Head.() -> Unit) = initTag(Head(), init)\n\nfun body(init: Body.() -> Unit) = initTag(Body(), init)\n```\n\n\u3053\u308c\u3067 *head* \u3068 *body* \u30bf\u30b0\u3092\u69cb\u7bc9\u3059\u308b\u306e\u306b\u3053\u308c\u3089\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n\u3082\u3046\u4e00\u500b\u3053\u3053\u3067\u8003\u5bdf\u3059\u308b\u306e\u306f\u3001\u3069\u3046\u3084\u3063\u3066\u30c6\u30ad\u30b9\u30c8\u3092\u30bf\u30b0\u306e\u4e2d\u306b\u5165\u308c\u308b\u304b\u3060\u3002\u4e0a\u306e\u4f8b\u3067\u3053\u3093\u306a\u611f\u3058\u3067\u66f8\u3044\u305f\u3002\n\n```kotlin\nhtml {\n  head {\n    title {+\"XML encoding with Kotlin\"}\n  }\n  // ...\n}\n```\n\n\u57fa\u672c\u7684\u306b\u306f\u30bf\u30b0\u306e\u4e2d\u306b\u6587\u5b57\u5217\u3092\u66f8\u304f\u3060\u3051\u306a\u306e\u3060\u304c\u3001\u305d\u306e\u524d\u306b *+* \u304c\u3042\u308b\u3002\u3053\u308c\u306f *unaryPlus()* \u6f14\u7b97\u5b50\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3002\u3053\u306e\u6f14\u7b97\u5b50\u306f\uff08*Title* \u306e\u89aa\u306e\uff09*TagWithText* \u62bd\u8c61\u30af\u30e9\u30b9\u306e\u30e1\u30f3\u30d0\u3067\u3042\u308b\u62e1\u5f35\u95a2\u6570 *unaryPlus* \u306b\u3088\u3063\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\n```kotlin\n// title\u5185\u3067 + \u3092String\u306b\u5bfe\u3057\u3066\u547c\u3073\u51fa\u3059\u3068\u3001String\u306eunaryPlus\u30e1\u30bd\u30c3\u30c9\u307e\u305f\u306f\u62e1\u5f35\u95a2\u6570\u3092\u63a2\u3059\u3002\n// \u3059\u308b\u3068Title\u306e\u89aa\u30af\u30e9\u30b9\u3067\u3042\u308b\u3053\u306eTagWithText\u30af\u30e9\u30b9\u306b\u3001String.unaryPlus\u62e1\u5f35\u95a2\u6570\u304c\u898b\u3064\u304b\u308b\u306e\u3067\u3001\n// \u6587\u5b57\u5217\u3092\u30ec\u30b7\u30fc\u30d0\u306b\u3057\u3066\u3053\u308c\u3092\u547c\u3073\u51fa\u3059\u3002\nabstract class TagWithText(name: String) : Tag(name) {\n    operator fun String.unaryPlus() {\n        children.add(TextElement(this))  // \u3053\u3053\u3067\u306ethis\u306f\u30ec\u30b7\u30fc\u30d0\u3067\u3001\u578b\u306fString\n    }\n}\n```\n\n\u3053\u3053\u3067\u524d\u7f6e\u306e *+* \u304c\u3084\u3063\u3066\u3044\u308b\u306e\u306f\u3001\u6587\u5b57\u5217\u3092 *TextElement* \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30e9\u30c3\u30d7\u3057\u3066\u3001\u305d\u308c\u3092 *children* \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3067\u6587\u5b57\u5217\u306f\u30bf\u30b0\u6728\u69cb\u9020\u306e\u6b63\u5f0f\u306a\u4e00\u90e8\u306b\u306a\u308c\u305f\u3002\n\n\u3053\u308c\u3089\u5168\u3066\u306f\u4e0a\u306e\u65b9\u306b\u3042\u308b\u30d3\u30eb\u30c0\u30fc\u306e\u4f8b\u306e\u30c8\u30c3\u30d7\u3067 *import* \u3057\u3066\u3044\u308b *com.example.html* \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\n## com.example.html\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u5b9a\u7fa9\u5168\u90e8\n\n```kotlin\npackage com.example.html\n\ninterface Element {\n    fun render(builder: StringBuilder, indent: String)\n}\n\nclass TextElement(val text: String) : Element {\n    override fun render(builder: StringBuilder, indent: String) {\n        builder.append(\"$indent$text\\n\")\n    }\n}\n\nabstract class Tag(val name: String) : Element {\n    val children = arrayListOf<Element>()\n    val attributes = hashMapOf<String, String>()\n\n    protected fun <T : Element> initTag(tag: T, init: T.() -> Unit): T {\n        tag.init()\n        children.add(tag)\n        return tag\n    }\n\n    override fun render(builder: StringBuilder, indent: String) {\n        builder.append(\"$indent<$name${renderAttributes()}>\\n\")\n        for (c in children) {\n            c.render(builder, indent + \"  \")\n        }\n        builder.append(\"$indent</$name>\\n\")\n    }\n\n    private fun renderAttributes(): String? {\n        val builder = StringBuilder()\n        for (a in attributes.keys) {\n            builder.append(\" $a=\\\"${attributes[a]}\\\"\")\n        }\n        return builder.toString()\n    }\n\n\n    override fun toString(): String {\n        val builder = StringBuilder()\n        render(builder, \"\")\n        return builder.toString()\n    }\n}\n\nabstract class TagWithText(name: String) : Tag(name) {\n    operator fun String.unaryPlus() {\n        children.add(TextElement(this))\n    }\n}\n\nclass HTML() : TagWithText(\"html\") {\n    fun head(init: Head.() -> Unit) = initTag(Head(), init)\n\n    fun body(init: Body.() -> Unit) = initTag(Body(), init)\n}\n\nclass Head() : TagWithText(\"head\") {\n    fun title(init: Title.() -> Unit) = initTag(Title(), init)\n}\n\nclass Title() : TagWithText(\"title\")\n\nabstract class BodyTag(name: String) : TagWithText(name) {\n    fun b(init: B.() -> Unit) = initTag(B(), init)\n    fun p(init: P.() -> Unit) = initTag(P(), init)\n    fun h1(init: H1.() -> Unit) = initTag(H1(), init)\n    fun a(href: String, init: A.() -> Unit) {\n        val a = initTag(A(), init)\n        a.href = href\n    }\n}\n\nclass Body() : BodyTag(\"body\")\nclass B() : BodyTag(\"b\")\nclass P() : BodyTag(\"p\")\nclass H1() : BodyTag(\"h1\")\n\nclass A() : BodyTag(\"a\") {\n    public var href: String\n        get() = attributes[\"href\"]!!\n        set(value) {\n            attributes[\"href\"] = value\n        }\n}\n\nfun html(init: HTML.() -> Unit): HTML {\n    val html = HTML()\n    html.init()\n    return html\n}\n```\n\n# \u52d5\u7684\u578b\n\n\u6ce8\uff1aJVM\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3057\u305f\u30b3\u30fc\u30c9\u3067\u306f\u52d5\u7684\u578b\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u3044\u3002\n\nKotlin\u306f\u9759\u7684\u578b\u4ed8\u3051\u8a00\u8a9e\u3067\u3042\u308a\u306a\u304c\u3089\u3001Javascript\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u3088\u3046\u306a\u578b\u306e\u306a\u3044\u307e\u305f\u306f\u578b\u4ed8\u3051\u306e\u3086\u308b\u3044\u74b0\u5883\u3068\u3082\u76f8\u4e92\u904b\u7528\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\u3053\u308c\u3089\u306e\u5229\u7528\u72b6\u6cc1\u3092\u624b\u52a9\u3051\u3059\u308b\u305f\u3081\u306b\u3001\u8a00\u8a9e\u5185\u3067\u52d5\u7684\u306a\u578b\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n```kotlin\nval dyn: dynamic = ...\n```\n\n\u52d5\u7684\u578b\u306f\u57fa\u672c\u7684\u306bKotlin\u306e\u578b\u30c1\u30a7\u30c3\u30af\u3092\u6b62\u3081\u308b\u3002\n\n - \u3053\u306e\u578b\u306e\u5024\u306f\u3069\u3093\u306a\u5909\u6570\u306b\u3082\u5165\u308c\u3089\u308c\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u3069\u3053\u306b\u3067\u3082\u6e21\u305b\u308b\u3002\n - \u3069\u3093\u306a\u5024\u3082 *dynamic* \u578b\u306e\u5909\u6570\u306b\u4ee3\u5165\u3067\u304d\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066 *dynamic* \u3092\u53d6\u308b\u95a2\u6570\u306b\u6e21\u305b\u308b\u3002\n - \u3053\u308c\u3089\u306e\u5024\u3067null\u30c1\u30a7\u30c3\u30af\u306f\u7121\u52b9\n\n\n*dynamic* \u578b\u306e\u6700\u3082\u7279\u5fb4\u7684\u306a\u6a5f\u80fd\u306f *dynamic* \u5909\u6570\u306b\u5bfe\u3057\u3066\u3069\u3093\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u3084\u95a2\u6570\u3082\u547c\u3073\u51fa\u305b\u308b\u3053\u3068\u3002\n\n```kotlin\ndyn.whatever(1, \"foo\", dyn) // 'whatever' \u306f\u3069\u3053\u306b\u3082\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\ndyn.whatever(*array(1, 2, 3))\n```\n\nJavascript\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f\u3001\u3053\u306e\u30b3\u30fc\u30c9\u306f\u300c\u305d\u306e\u307e\u307e\u300d\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3002\u3064\u307e\u308a Kotlin\u3067\u306e *dyn.whatever(1)* \u306f\u751f\u6210\u3055\u308c\u305fJavascript\u30b3\u30fc\u30c9\u3067\u306f *dyn.whatever(1)* \u3068\u306a\u308b\u3002\n\n\u52d5\u7684\u547c\u3073\u51fa\u3057\u306f\u5e38\u306b\u7d50\u679c\u3068\u3057\u3066 *dynamic* \u3092\u8fd4\u3059\u3002\u306a\u306e\u3067\u81ea\u7531\u306b\u30c1\u30a7\u30a4\u30f3\u547c\u3073\u51fa\u3057\u3067\u304d\u308b\u3002\n\n```kotlin\ndyn.foo().bar.baz()\n```\n\n\u52d5\u7684\u547c\u3073\u51fa\u3057\u306b\u30e9\u30e0\u30c0\u3092\u6e21\u3059\u6642\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5168\u3066\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b\u306f *dynamic* \u306b\u306a\u308b\u3002\n\n```kotlin\ndyn.foo {\n  x -> x.bar() // x \u306f dynamic\n}\n```\n\n# \u6b21\u3078\n\n\u3053\u308c\u3067Kotlin\u6587\u6cd5\u306f\u304a\u3057\u307e\u3044\u3002\u304a\u75b2\u308c\u69d8!!\n\n\u6b21\u306f[Kotlin - Java\u3068\u306e\u76f8\u4e92\u904b\u7528](http://qiita.com/k5n/items/ceb1f921b27d62fc9fcb)\u3092\u3069\u3046\u305e\u3002\n\n"}