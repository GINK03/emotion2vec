{"context": "\n\n\u306f\u3058\u3081\u306b\nJunoscript\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046 \u3068\u3044\u3046\u3053\u3068\u3067\u3001\u7c21\u5358\u306aJunoscript\u306e\u4f8b\u3092\u7d39\u4ecb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nJunoscript\u3068\u306f\u3001Junos\u30eb\u30fc\u30bf\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u74b0\u5883\u3067\u3001\u52d5\u4f5c\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3088\u3063\u3066Commit Script(\u8a2d\u5b9a\u306e\u30b3\u30df\u30c3\u30c8\u6642\u306b\u52d5\u4f5c)\u3068Op Script(\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u52d5\u4f5c)\u3001Event Script(\u4f55\u3089\u304b\u306e\u30a4\u30d9\u30f3\u30c8\u306b\u5fdc\u3058\u3066\u52d5\u4f5c)\u306b\u5206\u304b\u308c\u307e\u3059\u3002\nJunoscript\u3092\u8a18\u8ff0\u3059\u308b\u8a00\u8a9e\u3068\u3057\u3066\u3001XSLT\u3068SLAX\u3068\u3044\u30462\u3064\u306e\u8a00\u8a9e\u304c\u5b58\u5728\u3057\u307e\u3059\u304c\u3001\u4eca\u5f8c\u306e\u8a18\u8ff0\u306fSLAX\u306b\u7d71\u4e00\u3057\u3066\u884c\u3044\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f\u3001\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3055\u3066\u3001\u5148\u65e5 Junos\u306e\u81ea\u52d5\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6a5f\u80fd\u3067\u3042\u308bConfiguration Archival\u6a5f\u80fd\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\n\u666e\u6bb5\u3001Junos\u306eConfig\u3092show configurations\u30b3\u30de\u30f3\u30c9\u7b49\u3067\u8868\u793a\u3059\u308b\u3068\u3001Config\u306e\u5148\u982d\u306b ## Last commit: 2015-12-31 00:23:45 JST by kazubu \u306a\u3069\u3068\u3044\u3063\u305f\u5f62\u3067\u3001\u30b3\u30df\u30c3\u30c8\u3057\u305f\u30e6\u30fc\u30b6\u540d\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089\u3001Configuration Archival\u306b\u3088\u3063\u3066\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3055\u308c\u308bConfig\u306b\u306f\u3001\u3053\u306e\u884c\u306f\u542b\u307e\u308c\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u3001\u4eca\u56de\u306f\u3001Commit Script\u3092\u7528\u3044\u3066\u3001Config\u306e\u4e2d\u306bCommit\u3057\u305f\u30e6\u30fc\u30b6\u540d\u3092\u30b3\u30e1\u30f3\u30c8\u3068\u3057\u3066\u57cb\u3081\u8fbc\u3080\u4e8b\u306b\u3088\u308a\u3001Config\u306e\u5c65\u6b74\u7ba1\u7406\u3092\u3088\u308a\u4f7f\u3044\u3084\u3059\u304f\u3057\u3066\u3044\u304f\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002\n\n\u74b0\u5883\n\u4eca\u56de\u7d39\u4ecb\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u306b\u3066\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\nSRX 12.1X46-D40\nvMX 14.1R5.4\nvMX 15.1F3.11\nvMX 15.1F4.15\n\n\nSLAX\u306b\u3064\u3044\u3066\n\u524d\u8ff0\u3057\u305f\u3068\u304a\u308a\u3001Junoscript\u306fXSLT\u307e\u305f\u306fSLAX\u306b\u3088\u3063\u3066\u8a18\u8ff0\u3055\u308c\u307e\u3059\u3002\n\u6b74\u53f2\u3092\u9061\u308b\u3068\u3001Junoscript\u306f\u5f53\u521d\u3001XSLT\u306b\u3088\u3063\u3066\u306e\u307f\u8a18\u8ff0\u304c\u53ef\u80fd\u3067\u3057\u305f\u3002\u3057\u304b\u3057\u3001XSLT\u306fXML\u306b\u3088\u3063\u3066XML\u6587\u7ae0\u3092\u64cd\u4f5c\u3059\u308b\u70ba\u306e\u8a00\u8a9e\u3067\u3042\u308a\u3001\u4eba\u9593\u306b\u3068\u3063\u3066\u306f\u53ef\u8aad\u6027\u304c\u9ad8\u304f\u306a\u304f\u3001\u8a18\u8ff0\u3057\u306b\u304f\u3044\u3068\u3044\u3046\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u305d\u3053\u3067\u7528\u610f\u3055\u308c\u305f\u306e\u304cSLAX\u3067\u3059\u3002\nSLAX\u306f\u3001Juniper\u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u305f\u3001XSLT\u3068\u540c\u7b49\u306e\u64cd\u4f5c\u3092C/Perl\u30e9\u30a4\u30af\u306a\u8a18\u8ff0\u3067\u53ef\u80fd\u306b\u3059\u308b\u305f\u3081\u306eXSLT\u306e\u30b5\u30d6\u30bb\u30c3\u30c8\u3067\u3042\u308a\u3001XSLT\u3068\u76f8\u4e92\u306b\u5909\u63db\u304c\u53ef\u80fd\u3067\u3059\u3002SLAX\u306b\u3088\u3063\u3066\u3001\u6bd4\u8f03\u7684\u7c21\u5358\u306bJunoscript\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nSLAX\u3092\u5b66\u7fd2\u3059\u308b\u306b\u3042\u305f\u3063\u3066\u306f\u3001This Week: Applying Junos Automation \u3068\u3044\u3046\u5165\u9580\u66f8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3054\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u305c\u3072\u8aad\u3093\u3067\u307f\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059(\u8981Juniper\u30a2\u30ab\u30a6\u30f3\u30c8)\u3002\n\nConfig\u306bCommit\u3057\u305f\u30e6\u30fc\u30b6\u3092\u57cb\u3081\u8fbc\u3082\u3046\n\u305d\u308c\u3067\u306f\u65e9\u901f\u3001\u6a19\u984c\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u6b21\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30e6\u30fc\u30b6\u540d\u3068(\u3042\u308c\u3070)\u30b3\u30df\u30c3\u30c8\u30b3\u30e1\u30f3\u30c8\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u6570\u306b\u683c\u7d0d\n\u30b3\u30df\u30c3\u30c8\u30b3\u30e1\u30f3\u30c8\u304c\u306a\u3044\u5834\u5408\u3001\"commiter: \u30e6\u30fc\u30b6\u540d\" \u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3092version\u7bc0\u306b\u5bfe\u3057\u3066\u8a18\u8f09\n\u30b3\u30df\u30c3\u30c8\u30b3\u30e1\u30f3\u30c8\u304c\u3042\u3063\u305f\u5834\u5408\u3001\"commiter: \u30e6\u30fc\u30b6\u540d;comment: \u30b3\u30e1\u30f3\u30c8\" \u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3092version\u7bc0\u306b\u5bfe\u3057\u3066\u8a18\u8f09\n\n\ncommit-user-annotate.slax\nversion 1.0;\n/* Import namespaces */\nns junos = \"http://xml.juniper.net/junos/*/junos\";\nns xnm = \"http://xml.juniper.net/xnm/1.1/xnm\";\nns jcs = \"http://xml.juniper.net/junos/commit-scripts/1.0\";\nimport \"../import/junos.xsl\";\n\n/* For configuration script */\nmatch configuration {\n        var $cuser = $junos-context/user-context/login-name;\n        var $ccomment = $junos-context/commit-context/commit-comment;\n        var $version = version;\n\n        /* Is commit comment empty? */\n        if( jcs:empty ($ccomment)) {\n                /* Create annotate which includes committer username */\n                var $annotate = \"committer:\" _ $cuser;\n                /* Make a change for configuration to include an annotate */\n                <change> {\n                        <junos:comment> $annotate;\n                        <version> $version;\n                }\n        } else {\n                /* Create annotate which includes committer username and commit comment */\n                var $annotate = \"committer:\" _ $cuser _ \";comment:\" _ $ccomment;\n\n                /* Make a change for configuration to include an annotate */\n                <change> {\n                        <junos:comment> $annotate;\n                        <version> $version;\n                }\n        }\n}\n\n\n\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u308b\u306b\u306f\u3001\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3001/var/db/script/commit/\u306e\u4e2d\u306bcommit-user-annotate.slax\u3068\u3057\u3066\u914d\u7f6e\u3057\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u6295\u5165\u3057\u307e\u3059\u3002\nset system scripts commit file commit-user-annotate.slax\n\nCommit\u3092\u884c\u3063\u305f\u5f8c\u306bConfig\u3092\u898b\u3066\u307f\u308b\u3068\u3001\nkazubu@r1> show configuration\n## Last commit: 2015-12-31 03:25:49 JST by kazubu\n/* committer:kazubu */\nversion 15.1F4.15;\nsystem {\n    host-name r1;\n    domain-name lab.kazubu.jp;\n...\n\n\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u3001\u8a2d\u5b9a\u306e\u5148\u982d\u884c\u306b\u30b3\u30df\u30c3\u30c8\u3057\u305f\u4eba\u306e\u540d\u524d\u304c\u81ea\u52d5\u7684\u306b\u57cb\u3081\u8fbc\u307e\u308c\u307e\u3059\u3002\n\u30b3\u30df\u30c3\u30c8\u6642\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u305f\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nkazubu@r1# commit comment \"deleted interface ge-X/Y/Z\"\ncommit complete\n\n[edit]\nkazubu@r1# show\n## Last changed: 2015-12-31 04:08:09 JST\n/* committer:kazubu;comment:deleted interface ge-X/Y/Z */\nversion 15.1F4.15;\nsystem {\n...\n\n\u3053\u308c\u306b\u3088\u308a\u3001Git\u7b49\u3067\u306eConfig\u306e\u5c65\u6b74\u7ba1\u7406\u304c\u6357\u308a\u307e\u3059\u3002\u3084\u3063\u305f\u306d\uff01\n\n\u3055\u3044\u3054\u306b\n\u4eca\u56de\u306f\u3001\u6975\u3005\u7c21\u5358\u306aJunoscript\u3092\u7d39\u4ecb\u3057\u3066\u307f\u307e\u3057\u305f\u3002Junoscript\u3092\u4f7f\u3046\u3068\u3053\u306e\u3088\u3046\u306b\u3001\u7c21\u5358\u306bJunos\u3092\u62e1\u5f35\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30cd\u30bf\u3092\u601d\u3044\u3064\u3044\u305f\u3089\u4eca\u5f8c\u3082\u66f8\u3044\u3066\u307f\u3088\u3046\u304b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u826f\u3044\u30cd\u30bf\u3092\u601d\u3044\u3064\u3044\u305f\u4eba\u306f\u3001\u662f\u975e\u30b3\u30e1\u30f3\u30c8\u3067\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u308c\u3067\u306f\u307e\u305f\uff01\n# \u306f\u3058\u3081\u306b\n\nJunoscript\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046 \u3068\u3044\u3046\u3053\u3068\u3067\u3001\u7c21\u5358\u306aJunoscript\u306e\u4f8b\u3092\u7d39\u4ecb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nJunoscript\u3068\u306f\u3001Junos\u30eb\u30fc\u30bf\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u74b0\u5883\u3067\u3001\u52d5\u4f5c\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3088\u3063\u3066Commit Script(\u8a2d\u5b9a\u306e\u30b3\u30df\u30c3\u30c8\u6642\u306b\u52d5\u4f5c)\u3068Op Script(\u4efb\u610f\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u52d5\u4f5c)\u3001Event Script(\u4f55\u3089\u304b\u306e\u30a4\u30d9\u30f3\u30c8\u306b\u5fdc\u3058\u3066\u52d5\u4f5c)\u306b\u5206\u304b\u308c\u307e\u3059\u3002\nJunoscript\u3092\u8a18\u8ff0\u3059\u308b\u8a00\u8a9e\u3068\u3057\u3066\u3001XSLT\u3068SLAX\u3068\u3044\u30462\u3064\u306e\u8a00\u8a9e\u304c\u5b58\u5728\u3057\u307e\u3059\u304c\u3001\u4eca\u5f8c\u306e\u8a18\u8ff0\u306fSLAX\u306b\u7d71\u4e00\u3057\u3066\u884c\u3044\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f\u3001[\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://www.juniper.net/techpubs/en_US/junos15.1/information-products/pathway-pages/config-guide-automation/config-guide-automation.html)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3055\u3066\u3001\u5148\u65e5 Junos\u306e\u81ea\u52d5\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6a5f\u80fd\u3067\u3042\u308bConfiguration Archival\u6a5f\u80fd\u3092[\u3054\u7d39\u4ecb\u3057\u307e\u3057\u305f](http://qiita.com/kazubu/items/c1b6a656a10a2e489142)\u3002\n\u666e\u6bb5\u3001Junos\u306eConfig\u3092`show configurations`\u30b3\u30de\u30f3\u30c9\u7b49\u3067\u8868\u793a\u3059\u308b\u3068\u3001Config\u306e\u5148\u982d\u306b `## Last commit: 2015-12-31 00:23:45 JST by kazubu` \u306a\u3069\u3068\u3044\u3063\u305f\u5f62\u3067\u3001\u30b3\u30df\u30c3\u30c8\u3057\u305f\u30e6\u30fc\u30b6\u540d\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089\u3001Configuration Archival\u306b\u3088\u3063\u3066\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3055\u308c\u308bConfig\u306b\u306f\u3001\u3053\u306e\u884c\u306f\u542b\u307e\u308c\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u3001\u4eca\u56de\u306f\u3001Commit Script\u3092\u7528\u3044\u3066\u3001Config\u306e\u4e2d\u306bCommit\u3057\u305f\u30e6\u30fc\u30b6\u540d\u3092\u30b3\u30e1\u30f3\u30c8\u3068\u3057\u3066\u57cb\u3081\u8fbc\u3080\u4e8b\u306b\u3088\u308a\u3001Config\u306e\u5c65\u6b74\u7ba1\u7406\u3092\u3088\u308a\u4f7f\u3044\u3084\u3059\u304f\u3057\u3066\u3044\u304f\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002\n\n# \u74b0\u5883\n\n\u4eca\u56de\u7d39\u4ecb\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u306b\u3066\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\n * SRX 12.1X46-D40\n * vMX 14.1R5.4\n * vMX 15.1F3.11\n * vMX 15.1F4.15\n\n# SLAX\u306b\u3064\u3044\u3066\n\n\u524d\u8ff0\u3057\u305f\u3068\u304a\u308a\u3001Junoscript\u306fXSLT\u307e\u305f\u306fSLAX\u306b\u3088\u3063\u3066\u8a18\u8ff0\u3055\u308c\u307e\u3059\u3002\n\u6b74\u53f2\u3092\u9061\u308b\u3068\u3001Junoscript\u306f\u5f53\u521d\u3001XSLT\u306b\u3088\u3063\u3066\u306e\u307f\u8a18\u8ff0\u304c\u53ef\u80fd\u3067\u3057\u305f\u3002\u3057\u304b\u3057\u3001XSLT\u306fXML\u306b\u3088\u3063\u3066XML\u6587\u7ae0\u3092\u64cd\u4f5c\u3059\u308b\u70ba\u306e\u8a00\u8a9e\u3067\u3042\u308a\u3001\u4eba\u9593\u306b\u3068\u3063\u3066\u306f\u53ef\u8aad\u6027\u304c\u9ad8\u304f\u306a\u304f\u3001\u8a18\u8ff0\u3057\u306b\u304f\u3044\u3068\u3044\u3046\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u305d\u3053\u3067\u7528\u610f\u3055\u308c\u305f\u306e\u304cSLAX\u3067\u3059\u3002\nSLAX\u306f\u3001Juniper\u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u305f\u3001XSLT\u3068\u540c\u7b49\u306e\u64cd\u4f5c\u3092C/Perl\u30e9\u30a4\u30af\u306a\u8a18\u8ff0\u3067\u53ef\u80fd\u306b\u3059\u308b\u305f\u3081\u306eXSLT\u306e\u30b5\u30d6\u30bb\u30c3\u30c8\u3067\u3042\u308a\u3001XSLT\u3068\u76f8\u4e92\u306b\u5909\u63db\u304c\u53ef\u80fd\u3067\u3059\u3002SLAX\u306b\u3088\u3063\u3066\u3001\u6bd4\u8f03\u7684\u7c21\u5358\u306bJunoscript\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nSLAX\u3092\u5b66\u7fd2\u3059\u308b\u306b\u3042\u305f\u3063\u3066\u306f\u3001[This Week: Applying Junos Automation](http://forums.juniper.net/t5/Day-One-Books/This-Week-Applying-Junos-Automation/ba-p/52390) \u3068\u3044\u3046\u5165\u9580\u66f8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3054\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u305c\u3072\u8aad\u3093\u3067\u307f\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059(\u8981Juniper\u30a2\u30ab\u30a6\u30f3\u30c8)\u3002\n\n# Config\u306bCommit\u3057\u305f\u30e6\u30fc\u30b6\u3092\u57cb\u3081\u8fbc\u3082\u3046\n\n\u305d\u308c\u3067\u306f\u65e9\u901f\u3001\u6a19\u984c\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u6b21\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. \u30e6\u30fc\u30b6\u540d\u3068(\u3042\u308c\u3070)\u30b3\u30df\u30c3\u30c8\u30b3\u30e1\u30f3\u30c8\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u6570\u306b\u683c\u7d0d\n2. \u30b3\u30df\u30c3\u30c8\u30b3\u30e1\u30f3\u30c8\u304c\u306a\u3044\u5834\u5408\u3001\"commiter: \u30e6\u30fc\u30b6\u540d\" \u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3092version\u7bc0\u306b\u5bfe\u3057\u3066\u8a18\u8f09\n3. \u30b3\u30df\u30c3\u30c8\u30b3\u30e1\u30f3\u30c8\u304c\u3042\u3063\u305f\u5834\u5408\u3001\"commiter: \u30e6\u30fc\u30b6\u540d;comment: \u30b3\u30e1\u30f3\u30c8\" \u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3092version\u7bc0\u306b\u5bfe\u3057\u3066\u8a18\u8f09\n\n```slax:commit-user-annotate.slax\nversion 1.0;\n/* Import namespaces */\nns junos = \"http://xml.juniper.net/junos/*/junos\";\nns xnm = \"http://xml.juniper.net/xnm/1.1/xnm\";\nns jcs = \"http://xml.juniper.net/junos/commit-scripts/1.0\";\nimport \"../import/junos.xsl\";\n\n/* For configuration script */\nmatch configuration {\n        var $cuser = $junos-context/user-context/login-name;\n        var $ccomment = $junos-context/commit-context/commit-comment;\n        var $version = version;\n\n        /* Is commit comment empty? */\n        if( jcs:empty ($ccomment)) {\n                /* Create annotate which includes committer username */\n                var $annotate = \"committer:\" _ $cuser;\n                /* Make a change for configuration to include an annotate */\n                <change> {\n                        <junos:comment> $annotate;\n                        <version> $version;\n                }\n        } else {\n                /* Create annotate which includes committer username and commit comment */\n                var $annotate = \"committer:\" _ $cuser _ \";comment:\" _ $ccomment;\n\n                /* Make a change for configuration to include an annotate */\n                <change> {\n                        <junos:comment> $annotate;\n                        <version> $version;\n                }\n        }\n}\n```\n\n\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u308b\u306b\u306f\u3001\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3001`/var/db/script/commit/`\u306e\u4e2d\u306b`commit-user-annotate.slax`\u3068\u3057\u3066\u914d\u7f6e\u3057\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u6295\u5165\u3057\u307e\u3059\u3002\n\n```\nset system scripts commit file commit-user-annotate.slax\n```\n\nCommit\u3092\u884c\u3063\u305f\u5f8c\u306bConfig\u3092\u898b\u3066\u307f\u308b\u3068\u3001\n\n```\nkazubu@r1> show configuration\n## Last commit: 2015-12-31 03:25:49 JST by kazubu\n/* committer:kazubu */\nversion 15.1F4.15;\nsystem {\n    host-name r1;\n    domain-name lab.kazubu.jp;\n...\n```\n\n\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u3001\u8a2d\u5b9a\u306e\u5148\u982d\u884c\u306b\u30b3\u30df\u30c3\u30c8\u3057\u305f\u4eba\u306e\u540d\u524d\u304c\u81ea\u52d5\u7684\u306b\u57cb\u3081\u8fbc\u307e\u308c\u307e\u3059\u3002\n\u30b3\u30df\u30c3\u30c8\u6642\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u305f\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nkazubu@r1# commit comment \"deleted interface ge-X/Y/Z\"\ncommit complete\n\n[edit]\nkazubu@r1# show\n## Last changed: 2015-12-31 04:08:09 JST\n/* committer:kazubu;comment:deleted interface ge-X/Y/Z */\nversion 15.1F4.15;\nsystem {\n...\n```\n\n\u3053\u308c\u306b\u3088\u308a\u3001Git\u7b49\u3067\u306eConfig\u306e\u5c65\u6b74\u7ba1\u7406\u304c\u6357\u308a\u307e\u3059\u3002\u3084\u3063\u305f\u306d\uff01\n\n# \u3055\u3044\u3054\u306b\n\n\u4eca\u56de\u306f\u3001\u6975\u3005\u7c21\u5358\u306aJunoscript\u3092\u7d39\u4ecb\u3057\u3066\u307f\u307e\u3057\u305f\u3002Junoscript\u3092\u4f7f\u3046\u3068\u3053\u306e\u3088\u3046\u306b\u3001\u7c21\u5358\u306bJunos\u3092\u62e1\u5f35\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30cd\u30bf\u3092\u601d\u3044\u3064\u3044\u305f\u3089\u4eca\u5f8c\u3082\u66f8\u3044\u3066\u307f\u3088\u3046\u304b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u826f\u3044\u30cd\u30bf\u3092\u601d\u3044\u3064\u3044\u305f\u4eba\u306f\u3001\u662f\u975e\u30b3\u30e1\u30f3\u30c8\u3067\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u305d\u308c\u3067\u306f\u307e\u305f\uff01\n", "tags": ["juniper", "junos", "junoscript"]}