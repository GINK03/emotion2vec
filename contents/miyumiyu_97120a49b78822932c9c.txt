{"context": " More than 1 year has passed since last update.\u30b5\u30fc\u30d0OS\u3092ubuntu\u4f7f\u3048\u3068\u8a00\u308f\u308c\u3066\u3001\u4e00\u751f\u61f8\u547d\u52c9\u5f37\u4e2d\u306e\u307f\u3085\u307f\u3085\u3067\u3059\u3002\n\u30b5\u30fc\u30d0\u3068\u3057\u3066\u4f7f\u3046\u305f\u3081\u306b\u306f\u969c\u5bb3\u5fa9\u65e7\u306e\u624b\u9806\u306e\u78ba\u7acb\u304c\u7b2c\u4e00\u3068\u3044\u3046\u3053\u3068\u3067\u3001HDD\u969c\u5bb3\u3092\u60f3\u5b9a\u3057\u3066ubuntu\u3067\u306eraid 1\u306e\u69cb\u7bc9\u3001\u969c\u5bb3\u767a\u751f\u304b\u3089\u5fa9\u65e7\u307e\u3067\u6d41\u308c\u3092\u81ea\u5206\u306e\u70ba\u306b\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\nraid 1\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5b9f\u30de\u30b7\u30f3\u3067\u3084\u308b\u3068\u5927\u5909\u306a\u306e\u3067VirtualBox\u4e0a\u3067\u3084\u308a\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001HDD\u3092\u4e8c\u3064\u7528\u610f\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u958b\u59cb\n\u4f55\u3082\u8003\u3048\u305a\u306bHDD\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210\u306e\u3068\u3053\u308d\u3067\u81ea\u52d5\u3067\u30ea\u30bf\u30fc\u30f3\u3092\u62bc\u3057\u3066\u3044\u3063\u305f\u3089\u3001raid\u3092\u4f5c\u3089\u305a\u306b\u305d\u306e\u307e\u307e\u9032\u3093\u3060\u306e\u3067\u5931\u6557\u3002\u3002\u3002\n\uff08\u9014\u4e2d\u3067\u623b\u308b\u3068\u304b\u99c6\u4f7f\u3059\u308c\u3070\u3067\u304d\u308b\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3051\u3069\u305d\u3053\u307e\u3067\u3084\u3089\u306a\u3044\u3002\u3002\u3002\uff09\n\n\u30c7\u30a3\u30b9\u30af\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3067\u624b\u52d5\u3092\u9078\u629e\n\n\u3053\u3093\u306a\u611f\u3058\u306bsda\u3001sdb\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u3066\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2RAID\u306e\u8a2d\u5b9a\n\nMD\u30c7\u30d0\u30a4\u30b9\u306e\u4f5c\u6210\u3092\u9078\u629e\u3057\u3066\n\n\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3067\u8010\u969c\u5bb3\u6027\u3092\u4e0a\u3052\u308b\u306e\u3067RAID 1\u3092\u9078\u629e\n\nHDD\u3092\u4e8c\u3064\u63a5\u7d9a\u3059\u308b\u306e\u3067\u3001\uff12\u3068\u9078\u629e\n\n\u30b9\u30da\u30a2\u306e\u30c7\u30a3\u30b9\u30af\u306f\u8a2d\u5b9a\u3057\u306a\u3044\u306e\u3067\uff10\u3068\n\nraid 1\u3092\u8a2d\u5b9a\u3059\u308b\u30c7\u30a3\u30b9\u30af\u3092\u9078\u629e\n\u3053\u3053\u3067\u306f sda sdb\u304c\u8a72\u5f53\n\u3067\u3001\u307e\u305f\u6700\u521d\u306emd\u4f5c\u6210\u306b\u623b\u308b\u306e\u3067\u5b8c\u4e86\u3068\n\u3053\u308c\u3067\n\nRAID1\u30c7\u30d0\u30a4\u30b9\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u30ac\u30a4\u30c9\u306b\u3088\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3092\u9078\u629e\u3057\u3066\n\n\u30ac\u30a4\u30c9 - \u30c7\u30a3\u30b9\u30af\u5168\u4f53\u3092\u4f7f\u3044 LVM\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n\n\u3092\u9078\u629e\u3057\u3066\u3001\u30c7\u30a3\u30b9\u30af\u306e\u9078\u629e\u3092\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fRAID1\u30c7\u30d0\u30a4\u30b9\u3092\u9078\u629e\u3057\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u5207\u3063\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\u203bLVM\u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001HDD\u3092\u5897\u3084\u3059\u3068\u304b\u305d\u306e\u70ba\u306b\u3002\u3002\u3002\n\n\u6700\u7d42\u7684\u306b\u306f\u3001\u3053\u3093\u306a\u611f\u3058\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\nLVM\u3067\u30eb\u30fc\u30c8\u3068\u30b9\u30ef\u30c3\u30d7\n\u3053\u308c\u3067\u3010\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u7d42\u4e86\u3068\u30c7\u30a3\u30b9\u30af\u3078\u306e\u66f8\u304d\u8fbc\u307f\u3011\u3067RAID1\u306e\u8a2d\u5b9a\u3092\u7d42\u3048\u3001\u666e\u901a\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3084\u3089\u306a\u3093\u3084\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\u8d77\u52d5\u3059\u308b\u3068Error: diskfilter writes are not supported\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u304c\u3001LVM\u306e\u30d0\u30b0\u3060\u305d\u3046\u306a\u306e\u3067\u6c17\u306b\u3057\u306a\u3044\u3053\u3068\u3060\u305d\u3046\u3067\u3059\u3002\nhttps://bugs.launchpad.net/ubuntu/+source/grub2/+bug/1274320/comments/34\n\u8d77\u52d5\u3057\u307e\u3057\u305f\u306eraid\u306e\u72b6\u614b\u306e\u78ba\u8a8d\nroot@raidtest:~# cat /proc/mdstat\nPersonalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10]\nmd0 : active raid1 sdb1[1] sda1[0]\n      8382400 blocks super 1.2 [2/2] [UU]\n\nunused devices: <none>\n\nsba1\u3001sdb1\u306braid1\u304c\u51fa\u6765\u3066\u3001\u540d\u524d\u304cmd0\u3067\u3059\u306d\nmd0\u306e\u8a73\u7d30\u3092\u78ba\u8a8d\nroot@raidtest:~# ls -al /dev/md*\nbrw-rw---- 1 root disk   9, 0  5\u6708 20 11:31 /dev/md0\nbrw-rw---- 1 root disk 259, 0  5\u6708 20 11:23 /dev/md0p1\nbrw-rw---- 1 root disk 259, 1  5\u6708 20 11:23 /dev/md0p2\nbrw-rw---- 1 root disk 259, 2  5\u6708 20 11:23 /dev/md0p5\n\n/dev/md:\n\u5408\u8a08 0\ndrwxr-xr-x  2 root root  120  5\u6708 20 11:22 .\ndrwxr-xr-x 17 root root 4240  5\u6708 20 11:23 ..\nlrwxrwxrwx  1 root root    6  5\u6708 20 11:31 0 -> ../md0\nlrwxrwxrwx  1 root root    8  5\u6708 20 11:23 0p1 -> ../md0p1\nlrwxrwxrwx  1 root root    8  5\u6708 20 11:23 0p2 -> ../md0p2\nlrwxrwxrwx  1 root root    8  5\u6708 20 11:23 0p5 -> ../md0p5\n\n\u5b9f\u614b\u306f\u3010/dev/md0??\u3011\u3067\u30ea\u30f3\u30af\u3067\u3010/dev/md/???\u3011\u304c\u3042\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u3002\n/dev/md0\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4e2d\u8eab\u306f\nroot@raidtest:~# parted /dev/md0\nGNU Parted 2.3\n/dev/md0 \u3092\u4f7f\u7528\nGNU Parted \u3078\u3088\u3046\u3053\u305d\uff01 \u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u3092\u898b\u308b\u306b\u306f 'help' \u3068\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n(parted) print\n\u30e2\u30c7\u30eb: Linux Software RAID Array (md)\n\u30c7\u30a3\u30b9\u30af /dev/md0: 8584MB\n\u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406/\u7269\u7406): 512B/512B\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb: msdos\n\n\u756a\u53f7  \u958b\u59cb    \u7d42\u4e86    \u30b5\u30a4\u30ba  \u30bf\u30a4\u30d7    \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0  \u30d5\u30e9\u30b0\n 1    32.3kB  255MB   255MB   primary   ext2\n 2    255MB   8579MB  8324MB  extended\n 5    255MB   8579MB  8324MB  logical                     lvm\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c1,2,5\u3068\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u307e\u3059\u3002\n2\u756a\u304c\u5b9f\u9818\u57df\u30015\u756a\u304clvm\u306e\u8ad6\u7406\u9818\u57df\u30001\u756a\u306f\u3044\u3064\u3082\u306e\u3054\u3068\u304f/boot\u3067\u3059\u306d\nlvm\u69cb\u6210\u306e\u78ba\u8a8d\u3067\u3059\u3002\n\u30db\u30b9\u30c8\u540d\u306f\u3010raidtest\u3011\u3068\u3044\u3046\u540d\u524d\u3067\u305d\u306e\u540d\u524d\u304c\u305d\u306e\u307e\u307e\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u306b\u4f7f\u308f\u308c\u3066\u307e\u3059\u3002\nroot@raidtest:~# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/md0p5\n  VG Name               raidtest-vg\n  PV Size               7.75 GiB / not usable 2.34 MiB\n  Allocatable           yes\n  PE Size               4.00 MiB\n  Total PE              1984\n  Free PE               6\n  Allocated PE          1978\n  PV UUID               DqvWTQ-CN0G-k0z8-8dhv-SnrM-rUDL-0SXomy\n\nroot@raidtest:~# vgdisplay\n  --- Volume group ---\n  VG Name               raidtest-vg\n  System ID\n  Format                lvm2\n  Metadata Areas        1\n  Metadata Sequence No  3\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                2\n  Open LV               2\n  Max PV                0\n  Cur PV                1\n  Act PV                1\n  VG Size               7.75 GiB\n  PE Size               4.00 MiB\n  Total PE              1984\n  Alloc PE / Size       1978 / 7.73 GiB\n  Free  PE / Size       6 / 24.00 MiB\n  VG UUID               YChiaQ-RgQ2-QJjM-Y3hW-hU1H-l6l2-xYVmne\n\nroot@raidtest:~# lvdisplay\n  --- Logical volume ---\n  LV Path                /dev/raidtest-vg/root\n  LV Name                root\n  VG Name                raidtest-vg\n  LV UUID                CZHD85-Jglp-N6mI-1mT1-VQHK-sWic-Bzblni\n  LV Write Access        read/write\n  LV Creation host, time raidtest, 2015-05-20 11:01:58 +0900\n  LV Status              available\n  # open                 1\n  LV Size                7.23 GiB\n  Current LE             1851\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:0\n\n  --- Logical volume ---\n  LV Path                /dev/raidtest-vg/swap_1\n  LV Name                swap_1\n  VG Name                raidtest-vg\n  LV UUID                KJNf1E-cdHO-I3Eb-8pww-magB-R1u4-KixN1g\n  LV Write Access        read/write\n  LV Creation host, time raidtest, 2015-05-20 11:01:58 +0900\n  LV Status              available\n  # open                 2\n  LV Size                508.00 MiB\n  Current LE             127\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:1\n\n\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u56f3\u306b\u66f8\u3044\u3066\u307f\u308b\u3068\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u306d\u3002\nLVM\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u304c\u30db\u30b9\u30c8\u540d\u306b\u306a\u3063\u3066\u308b\u3068\u3053\u308d\u304c\u4f59\u8a08\u306b\u6df7\u4e71\u3057\u305d\u3046\u3067\u3059\u306d\u3002\nUbuntu14.04\u3092RAID1\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u69cb\u6210\u306b\u306a\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u6b21\u306f\u3001\u5b9f\u969b\u306bHDD\u3092\u6b62\u3081\u305f\u6642\u306e\u6319\u52d5\u3092\u898b\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b5\u30fc\u30d0OS\u3092ubuntu\u4f7f\u3048\u3068\u8a00\u308f\u308c\u3066\u3001\u4e00\u751f\u61f8\u547d\u52c9\u5f37\u4e2d\u306e\u307f\u3085\u307f\u3085\u3067\u3059\u3002\n\u30b5\u30fc\u30d0\u3068\u3057\u3066\u4f7f\u3046\u305f\u3081\u306b\u306f\u969c\u5bb3\u5fa9\u65e7\u306e\u624b\u9806\u306e\u78ba\u7acb\u304c\u7b2c\u4e00\u3068\u3044\u3046\u3053\u3068\u3067\u3001HDD\u969c\u5bb3\u3092\u60f3\u5b9a\u3057\u3066ubuntu\u3067\u306eraid 1\u306e\u69cb\u7bc9\u3001\u969c\u5bb3\u767a\u751f\u304b\u3089\u5fa9\u65e7\u307e\u3067\u6d41\u308c\u3092\u81ea\u5206\u306e\u70ba\u306b\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n###raid 1\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5b9f\u30de\u30b7\u30f3\u3067\u3084\u308b\u3068\u5927\u5909\u306a\u306e\u3067VirtualBox\u4e0a\u3067\u3084\u308a\u307e\u3059\u3002\n![20150520-1.png](https://qiita-image-store.s3.amazonaws.com/0/79067/089b14b1-783f-bd18-88f7-2e8d3e6383b2.png)\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001HDD\u3092\u4e8c\u3064\u7528\u610f\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u958b\u59cb\n\u4f55\u3082\u8003\u3048\u305a\u306bHDD\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210\u306e\u3068\u3053\u308d\u3067\u81ea\u52d5\u3067\u30ea\u30bf\u30fc\u30f3\u3092\u62bc\u3057\u3066\u3044\u3063\u305f\u3089\u3001raid\u3092\u4f5c\u3089\u305a\u306b\u305d\u306e\u307e\u307e\u9032\u3093\u3060\u306e\u3067\u5931\u6557\u3002\u3002\u3002\n\uff08\u9014\u4e2d\u3067\u623b\u308b\u3068\u304b\u99c6\u4f7f\u3059\u308c\u3070\u3067\u304d\u308b\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3051\u3069\u305d\u3053\u307e\u3067\u3084\u3089\u306a\u3044\u3002\u3002\u3002\uff09\n\n![20150520-2.png](https://qiita-image-store.s3.amazonaws.com/0/79067/5f92be3a-ad8a-c0cc-e111-4b3a7b365b48.png)\n\u30c7\u30a3\u30b9\u30af\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3067\u624b\u52d5\u3092\u9078\u629e\n\n![20150520-3.png](https://qiita-image-store.s3.amazonaws.com/0/79067/caf442f5-a8a7-829c-4ec1-2b9b4c3643da.png)\n\u3053\u3093\u306a\u611f\u3058\u306bsda\u3001sdb\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u3066\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2RAID\u306e\u8a2d\u5b9a\n\n![20150520-4.png](https://qiita-image-store.s3.amazonaws.com/0/79067/b6843157-d005-98e2-3f87-334f11c9e938.png)\nMD\u30c7\u30d0\u30a4\u30b9\u306e\u4f5c\u6210\u3092\u9078\u629e\u3057\u3066\n\n![20150520-5.png](https://qiita-image-store.s3.amazonaws.com/0/79067/63d122a2-e84e-399f-3c7d-7e144bd0e5b7.png)\n\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3067\u8010\u969c\u5bb3\u6027\u3092\u4e0a\u3052\u308b\u306e\u3067RAID 1\u3092\u9078\u629e\n\n![20150520-6.png](https://qiita-image-store.s3.amazonaws.com/0/79067/6156ea3c-5380-72ff-28cd-5a0a5bb778d1.png)\nHDD\u3092\u4e8c\u3064\u63a5\u7d9a\u3059\u308b\u306e\u3067\u3001\uff12\u3068\u9078\u629e\n\n![20150520-7.png](https://qiita-image-store.s3.amazonaws.com/0/79067/6d32e023-34bd-b481-4a56-3e2ffff0202b.png)\n\u30b9\u30da\u30a2\u306e\u30c7\u30a3\u30b9\u30af\u306f\u8a2d\u5b9a\u3057\u306a\u3044\u306e\u3067\uff10\u3068\n\n![20150520-8.png](https://qiita-image-store.s3.amazonaws.com/0/79067/b7742dc8-5a03-65d4-04fe-b6c2136020f0.png)\nraid 1\u3092\u8a2d\u5b9a\u3059\u308b\u30c7\u30a3\u30b9\u30af\u3092\u9078\u629e\n\u3053\u3053\u3067\u306f sda sdb\u304c\u8a72\u5f53\n\n\u3067\u3001\u307e\u305f\u6700\u521d\u306emd\u4f5c\u6210\u306b\u623b\u308b\u306e\u3067\u5b8c\u4e86\u3068\n\u3053\u308c\u3067\n![20150520-9.png](https://qiita-image-store.s3.amazonaws.com/0/79067/77c1d180-0380-a35d-6335-5a9caf49045e.png)\n\nRAID1\u30c7\u30d0\u30a4\u30b9\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u30ac\u30a4\u30c9\u306b\u3088\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3092\u9078\u629e\u3057\u3066\n```\n\u30ac\u30a4\u30c9 - \u30c7\u30a3\u30b9\u30af\u5168\u4f53\u3092\u4f7f\u3044 LVM\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n```\n\u3092\u9078\u629e\u3057\u3066\u3001\u30c7\u30a3\u30b9\u30af\u306e\u9078\u629e\u3092\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fRAID1\u30c7\u30d0\u30a4\u30b9\u3092\u9078\u629e\u3057\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u5207\u3063\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\u203bLVM\u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001HDD\u3092\u5897\u3084\u3059\u3068\u304b\u305d\u306e\u70ba\u306b\u3002\u3002\u3002\n![20150520-10.png](https://qiita-image-store.s3.amazonaws.com/0/79067/bd75a58e-37db-6781-ebe6-62ee9071febd.png)\n\n\u6700\u7d42\u7684\u306b\u306f\u3001\u3053\u3093\u306a\u611f\u3058\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n![20150520-11.png](https://qiita-image-store.s3.amazonaws.com/0/79067/95efd4f8-c54e-9383-ebcd-a19b424f4633.png)\n\nLVM\u3067\u30eb\u30fc\u30c8\u3068\u30b9\u30ef\u30c3\u30d7\n\u3053\u308c\u3067\u3010\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u7d42\u4e86\u3068\u30c7\u30a3\u30b9\u30af\u3078\u306e\u66f8\u304d\u8fbc\u307f\u3011\u3067RAID1\u306e\u8a2d\u5b9a\u3092\u7d42\u3048\u3001\u666e\u901a\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3084\u3089\u306a\u3093\u3084\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\n\u8d77\u52d5\u3059\u308b\u3068`Error: diskfilter writes are not supported`\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u304c\u3001LVM\u306e\u30d0\u30b0\u3060\u305d\u3046\u306a\u306e\u3067\u6c17\u306b\u3057\u306a\u3044\u3053\u3068\u3060\u305d\u3046\u3067\u3059\u3002\nhttps://bugs.launchpad.net/ubuntu/+source/grub2/+bug/1274320/comments/34\n\n\u8d77\u52d5\u3057\u307e\u3057\u305f\u306eraid\u306e\u72b6\u614b\u306e\u78ba\u8a8d\n\n```\nroot@raidtest:~# cat /proc/mdstat\nPersonalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10]\nmd0 : active raid1 sdb1[1] sda1[0]\n      8382400 blocks super 1.2 [2/2] [UU]\n\nunused devices: <none>\n```\n\nsba1\u3001sdb1\u306braid1\u304c\u51fa\u6765\u3066\u3001\u540d\u524d\u304cmd0\u3067\u3059\u306d\nmd0\u306e\u8a73\u7d30\u3092\u78ba\u8a8d\n\n```\nroot@raidtest:~# ls -al /dev/md*\nbrw-rw---- 1 root disk   9, 0  5\u6708 20 11:31 /dev/md0\nbrw-rw---- 1 root disk 259, 0  5\u6708 20 11:23 /dev/md0p1\nbrw-rw---- 1 root disk 259, 1  5\u6708 20 11:23 /dev/md0p2\nbrw-rw---- 1 root disk 259, 2  5\u6708 20 11:23 /dev/md0p5\n\n/dev/md:\n\u5408\u8a08 0\ndrwxr-xr-x  2 root root  120  5\u6708 20 11:22 .\ndrwxr-xr-x 17 root root 4240  5\u6708 20 11:23 ..\nlrwxrwxrwx  1 root root    6  5\u6708 20 11:31 0 -> ../md0\nlrwxrwxrwx  1 root root    8  5\u6708 20 11:23 0p1 -> ../md0p1\nlrwxrwxrwx  1 root root    8  5\u6708 20 11:23 0p2 -> ../md0p2\nlrwxrwxrwx  1 root root    8  5\u6708 20 11:23 0p5 -> ../md0p5\n```\n\n\u5b9f\u614b\u306f\u3010/dev/md0??\u3011\u3067\u30ea\u30f3\u30af\u3067\u3010/dev/md/???\u3011\u304c\u3042\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u3002\n/dev/md0\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4e2d\u8eab\u306f\n\n```\nroot@raidtest:~# parted /dev/md0\nGNU Parted 2.3\n/dev/md0 \u3092\u4f7f\u7528\nGNU Parted \u3078\u3088\u3046\u3053\u305d\uff01 \u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u3092\u898b\u308b\u306b\u306f 'help' \u3068\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n(parted) print\n\u30e2\u30c7\u30eb: Linux Software RAID Array (md)\n\u30c7\u30a3\u30b9\u30af /dev/md0: 8584MB\n\u30bb\u30af\u30bf\u30b5\u30a4\u30ba (\u8ad6\u7406/\u7269\u7406): 512B/512B\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb: msdos\n\n\u756a\u53f7  \u958b\u59cb    \u7d42\u4e86    \u30b5\u30a4\u30ba  \u30bf\u30a4\u30d7    \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0  \u30d5\u30e9\u30b0\n 1    32.3kB  255MB   255MB   primary   ext2\n 2    255MB   8579MB  8324MB  extended\n 5    255MB   8579MB  8324MB  logical                     lvm\n```\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c1,2,5\u3068\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u307e\u3059\u3002\n2\u756a\u304c\u5b9f\u9818\u57df\u30015\u756a\u304clvm\u306e\u8ad6\u7406\u9818\u57df\u30001\u756a\u306f\u3044\u3064\u3082\u306e\u3054\u3068\u304f/boot\u3067\u3059\u306d\n\nlvm\u69cb\u6210\u306e\u78ba\u8a8d\u3067\u3059\u3002\n\u30db\u30b9\u30c8\u540d\u306f\u3010raidtest\u3011\u3068\u3044\u3046\u540d\u524d\u3067\u305d\u306e\u540d\u524d\u304c\u305d\u306e\u307e\u307e\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u306b\u4f7f\u308f\u308c\u3066\u307e\u3059\u3002\n\n```\nroot@raidtest:~# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/md0p5\n  VG Name               raidtest-vg\n  PV Size               7.75 GiB / not usable 2.34 MiB\n  Allocatable           yes\n  PE Size               4.00 MiB\n  Total PE              1984\n  Free PE               6\n  Allocated PE          1978\n  PV UUID               DqvWTQ-CN0G-k0z8-8dhv-SnrM-rUDL-0SXomy\n\nroot@raidtest:~# vgdisplay\n  --- Volume group ---\n  VG Name               raidtest-vg\n  System ID\n  Format                lvm2\n  Metadata Areas        1\n  Metadata Sequence No  3\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                2\n  Open LV               2\n  Max PV                0\n  Cur PV                1\n  Act PV                1\n  VG Size               7.75 GiB\n  PE Size               4.00 MiB\n  Total PE              1984\n  Alloc PE / Size       1978 / 7.73 GiB\n  Free  PE / Size       6 / 24.00 MiB\n  VG UUID               YChiaQ-RgQ2-QJjM-Y3hW-hU1H-l6l2-xYVmne\n\nroot@raidtest:~# lvdisplay\n  --- Logical volume ---\n  LV Path                /dev/raidtest-vg/root\n  LV Name                root\n  VG Name                raidtest-vg\n  LV UUID                CZHD85-Jglp-N6mI-1mT1-VQHK-sWic-Bzblni\n  LV Write Access        read/write\n  LV Creation host, time raidtest, 2015-05-20 11:01:58 +0900\n  LV Status              available\n  # open                 1\n  LV Size                7.23 GiB\n  Current LE             1851\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:0\n\n  --- Logical volume ---\n  LV Path                /dev/raidtest-vg/swap_1\n  LV Name                swap_1\n  VG Name                raidtest-vg\n  LV UUID                KJNf1E-cdHO-I3Eb-8pww-magB-R1u4-KixN1g\n  LV Write Access        read/write\n  LV Creation host, time raidtest, 2015-05-20 11:01:58 +0900\n  LV Status              available\n  # open                 2\n  LV Size                508.00 MiB\n  Current LE             127\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:1\n```\n\n\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u56f3\u306b\u66f8\u3044\u3066\u307f\u308b\u3068\n![20150520-12.png](https://qiita-image-store.s3.amazonaws.com/0/79067/641a2e91-847c-6a54-e60d-bc766680cdae.png)\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u306d\u3002\nLVM\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u304c\u30db\u30b9\u30c8\u540d\u306b\u306a\u3063\u3066\u308b\u3068\u3053\u308d\u304c\u4f59\u8a08\u306b\u6df7\u4e71\u3057\u305d\u3046\u3067\u3059\u306d\u3002\n\nUbuntu14.04\u3092RAID1\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u69cb\u6210\u306b\u306a\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u6b21\u306f\u3001\u5b9f\u969b\u306bHDD\u3092\u6b62\u3081\u305f\u6642\u306e\u6319\u52d5\u3092\u898b\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\n", "tags": ["Ubuntu14.04"]}