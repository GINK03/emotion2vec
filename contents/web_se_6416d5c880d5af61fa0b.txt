{"context": "CloudSQL for PostgreSQL\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u4e2d\u8eab\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\nCloudShell\u304b\u3089\u3082\u63a5\u7d9a\u306f\u554f\u984c\u306a\u3057\ngcloud beta sql connect testdb --user=postgres\n\n\u73fe\u72b6failover\u3067\u304d\u306a\u3055\u305d\u3046\u3067\u3059\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\npostgres=> select version();\n                                                version                                                 \n--------------------------------------------------------------------------------------------------------\n PostgreSQL 9.6.1 on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4, 64-bit\n(1 row)\n\npg_database\u306e\u5909\u66f4\u306f\u4e0d\u53ef\ntest=> \\c template1\nPassword for user postgres: \npsql (9.4.10, server 9.6.1)\nWARNING: psql major version 9.4, server major version 9.6.\n         Some psql features might not work.\nSSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES128-GCM-SHA256, bits: 128, compression: off)\nYou are now connected to database \"template1\" as user \"postgres\".\ntemplate1=>  UPDATE pg_database SET datallowconn = TRUE where datname = 'template0';\nERROR:  permission denied for relation pg_database\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30e6\u30fc\u30b6\nreplica\u7528\u3068\u601d\u308f\u308c\u308b\u30e6\u30fc\u30b6\u3082\u3042\u308b\u306e\u3067\u3001\u4eca\u5f8cread replica\u3082\u5bfe\u5fdc\u3055\u308c\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n                                      List of roles\n     Role name     |                   Attributes                   |      Member of      \n-------------------+------------------------------------------------+---------------------\n cloudsqladmin     | Superuser, Create role, Create DB, Replication | {}\n cloudsqlagent     | Create role, Create DB                         | {cloudsqlsuperuser}\n cloudsqlreplica   | Replication                                    | {}\n cloudsqlsuperuser | Create role, Create DB                         | {}\n pg_signal_backend | Cannot login                                   | {}\n postgres          | Create role, Create DB                         | {cloudsqlsuperuser}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e00\u89a7\n     Name      |       Owner       | Encoding |  Collate   |   Ctype    |            Access privileges            \n---------------+-------------------+----------+------------+------------+-----------------------------------------\n cloudsqladmin | cloudsqladmin     | UTF8     | en_US.UTF8 | en_US.UTF8 | \n postgres      | cloudsqlsuperuser | UTF8     | en_US.UTF8 | en_US.UTF8 | \n template0     | cloudsqladmin     | UTF8     | en_US.UTF8 | en_US.UTF8 | =c/cloudsqladmin                       +\n               |                   |          |            |            | cloudsqladmin=CTc/cloudsqladmin\n template1     | cloudsqlsuperuser | UTF8     | en_US.UTF8 | en_US.UTF8 | =c/cloudsqlsuperuser                   +\n               |                   |          |            |            | cloudsqlsuperuser=CTc/cloudsqlsuperuser\n\nCOLCATE\u3092ja_JP.UTF-8\u3067\u4f5c\u308c\u306a\u3044\n postgres=> CREATE DATABASE db WITH TEMPLATE = template0 OWNER = postgres ENCODING = 'UTF8' LC_COLLATE = 'ja_JP.UTF-8' LC_CTYPE = 'ja_JP.UTF-8';\nERROR:  invalid locale name: \"ja_JP.UTF-8\"\n\nshow LC_COLLATE \npostgres-> ;\n c \n------------\n en_US.UTF8\n(1 row)\n\nCloudSQL for PostgreSQL\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u4e2d\u8eab\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n\nCloudShell\u304b\u3089\u3082\u63a5\u7d9a\u306f\u554f\u984c\u306a\u3057\n\n```\ngcloud beta sql connect testdb --user=postgres\n```\n\n\u73fe\u72b6failover\u3067\u304d\u306a\u3055\u305d\u3046\u3067\u3059\u3002\n\n\n# \u30d0\u30fc\u30b8\u30e7\u30f3\n\n```\npostgres=> select version();\n                                                version                                                 \n--------------------------------------------------------------------------------------------------------\n PostgreSQL 9.6.1 on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4, 64-bit\n(1 row)\n``` \n \npg_database\u306e\u5909\u66f4\u306f\u4e0d\u53ef\n\n```\ntest=> \\c template1\nPassword for user postgres: \npsql (9.4.10, server 9.6.1)\nWARNING: psql major version 9.4, server major version 9.6.\n         Some psql features might not work.\nSSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES128-GCM-SHA256, bits: 128, compression: off)\nYou are now connected to database \"template1\" as user \"postgres\".\ntemplate1=>  UPDATE pg_database SET datallowconn = TRUE where datname = 'template0';\nERROR:  permission denied for relation pg_database\n```\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30e6\u30fc\u30b6\n\nreplica\u7528\u3068\u601d\u308f\u308c\u308b\u30e6\u30fc\u30b6\u3082\u3042\u308b\u306e\u3067\u3001\u4eca\u5f8cread replica\u3082\u5bfe\u5fdc\u3055\u308c\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n\n```\n                                      List of roles\n     Role name     |                   Attributes                   |      Member of      \n-------------------+------------------------------------------------+---------------------\n cloudsqladmin     | Superuser, Create role, Create DB, Replication | {}\n cloudsqlagent     | Create role, Create DB                         | {cloudsqlsuperuser}\n cloudsqlreplica   | Replication                                    | {}\n cloudsqlsuperuser | Create role, Create DB                         | {}\n pg_signal_backend | Cannot login                                   | {}\n postgres          | Create role, Create DB                         | {cloudsqlsuperuser}\n```\n\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e00\u89a7\n\n```\n     Name      |       Owner       | Encoding |  Collate   |   Ctype    |            Access privileges            \n---------------+-------------------+----------+------------+------------+-----------------------------------------\n cloudsqladmin | cloudsqladmin     | UTF8     | en_US.UTF8 | en_US.UTF8 | \n postgres      | cloudsqlsuperuser | UTF8     | en_US.UTF8 | en_US.UTF8 | \n template0     | cloudsqladmin     | UTF8     | en_US.UTF8 | en_US.UTF8 | =c/cloudsqladmin                       +\n               |                   |          |            |            | cloudsqladmin=CTc/cloudsqladmin\n template1     | cloudsqlsuperuser | UTF8     | en_US.UTF8 | en_US.UTF8 | =c/cloudsqlsuperuser                   +\n               |                   |          |            |            | cloudsqlsuperuser=CTc/cloudsqlsuperuser\n``` \n \nCOLCATE\u3092ja_JP.UTF-8\u3067\u4f5c\u308c\u306a\u3044\n\n```\n postgres=> CREATE DATABASE db WITH TEMPLATE = template0 OWNER = postgres ENCODING = 'UTF8' LC_COLLATE = 'ja_JP.UTF-8' LC_CTYPE = 'ja_JP.UTF-8';\nERROR:  invalid locale name: \"ja_JP.UTF-8\"\n```\n\n```\nshow LC_COLLATE \npostgres-> ;\n c \n------------\n en_US.UTF8\n(1 row)\n```\n", "tags": ["GoogleCloudPlatform"]}