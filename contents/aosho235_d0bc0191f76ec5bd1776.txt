{"context": "\u5b9f\u9a13\u7528\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\uff1a\nhttps://github.com/aoyama-val/gcc-gdb-separate-debug-symbols\n\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u3067\u30d3\u30eb\u30c9\u3059\u308b\uff1a\ngcc -g a.c\n\n\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u3092\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u5206\u96e2\u3059\u308b\uff1a\nobjcopy --only-keep-debug a.out a.debug\n\na.out\u304b\u3089\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u3092\u9664\u53bb\u3059\u308b\uff1a\ncp a.out a.stripped\nstrip a.stripped\n\na.stripped\u3092gdb\u3067\u8aad\u307f\u8fbc\u307e\u305b\u3066\u307f\u308b\uff1a\ngdb a.stripped\n\uff08\u4e2d\u7565\uff09\nReading symbols from /tmp/gdb/a.stripped...(no debugging symbols found)...done.\n\nno debugging symbols found\u3068\u51fa\u3066\u3044\u308b\u901a\u308a\u3001\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u306a\u304b\u3063\u305f\u3002\n\u4e0b\u8a18\u306e\u901a\u308a\u3001\u30d6\u30ec\u30fc\u30af\u30dd\u30a4\u30f3\u30c8\u3092\u5f35\u308b\u3053\u3068\u3082\u51fa\u6765\u306a\u3044\u3002\n(gdb) b a.c:21\nNo symbol table is loaded.  Use the \"file\" command.\nMake breakpoint pending on future shared library load? (y or [n])n\n\n\u5148\u307b\u3069\u5206\u96e2\u3057\u305f\u30b7\u30f3\u30dc\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\uff1a\n(gdb) symbol-file a.debug\nReading symbols from /tmp/gdb/a.debug...done.\n\n\u4eca\u5ea6\u306f\u30d6\u30ec\u30fc\u30af\u30dd\u30a4\u30f3\u30c8\u3092\u5f35\u308c\u308b\uff1a\n(gdb) b a.c:21\nBreakpoint 1 at 0x40058e: file a.c, line 21.\n(gdb) run\nStarting program: /tmp/gdb/a.stripped\n\nBreakpoint 1, main (argc=<error reading variable: can't compute CFA for this frame>, argv=<error reading variable: can't compute CFA for this frame>) at a.c:21\n21        printf(\"start\\n\");\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-106.167.amzn1.x86_64\n(gdb) n\nstart\n22        ret = hoge(a, b);\n(gdb) n\n23        printf(\"ret = %d\\n\", ret);\n(gdb) n\nret = 6\n25        return 0;\n\n\n--symbols=SYMFILE\nman\u3084gdb --help\u306b\u3088\u308b\u3068\n--symbols=SYMFILE  Read symbols from SYMFILE.\n\n\u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u3088\u3046\u3060\u304c\u3001gdb --symbols=a.debug a.stripped\u3067\u306f\u8aad\u307f\u8fbc\u3081\u306a\u304b\u3063\u305f\u3002\n\ndebug link\n\u30b7\u30f3\u30dc\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u30d0\u30a4\u30ca\u30ea\u306e\u4e2d\u306b\u57cb\u3081\u8fbc\u3093\u3067\u304a\u304f\u300cdebug link\u300d\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3082\u3042\u308b\u3089\u3057\u3044\u3002\n--with-separate-debug-dir\nshow debug-file-directory\nobjcopy --add-gnu-debuglink=foo.debug foo\n\n\u53c2\u8003\nDebugging with GDB: 18.2 \u5225\u30d5\u30a1\u30a4\u30eb\u306b\u3042\u308b\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\nhttp://www.geocities.jp/harddiskdive/gdb/gdb_178.html \ndebugging - How to generate gcc debug symbol outside the build target? - Stack Overflow\nhttp://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target\n\u5b9f\u9a13\u7528\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\uff1a\nhttps://github.com/aoyama-val/gcc-gdb-separate-debug-symbols\n\n\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u3067\u30d3\u30eb\u30c9\u3059\u308b\uff1a\n\n```\ngcc -g a.c\n```\n\n\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u3092\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u5206\u96e2\u3059\u308b\uff1a\n\n```\nobjcopy --only-keep-debug a.out a.debug\n```\n\na.out\u304b\u3089\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u3092\u9664\u53bb\u3059\u308b\uff1a\n\n```\ncp a.out a.stripped\nstrip a.stripped\n```\n\na.stripped\u3092gdb\u3067\u8aad\u307f\u8fbc\u307e\u305b\u3066\u307f\u308b\uff1a\n\n```\ngdb a.stripped\n\uff08\u4e2d\u7565\uff09\nReading symbols from /tmp/gdb/a.stripped...(no debugging symbols found)...done.\n```\n\n`no debugging symbols found`\u3068\u51fa\u3066\u3044\u308b\u901a\u308a\u3001\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u306a\u304b\u3063\u305f\u3002\n\u4e0b\u8a18\u306e\u901a\u308a\u3001\u30d6\u30ec\u30fc\u30af\u30dd\u30a4\u30f3\u30c8\u3092\u5f35\u308b\u3053\u3068\u3082\u51fa\u6765\u306a\u3044\u3002\n\n```\n(gdb) b a.c:21\nNo symbol table is loaded.  Use the \"file\" command.\nMake breakpoint pending on future shared library load? (y or [n])n\n```\n\n\u5148\u307b\u3069\u5206\u96e2\u3057\u305f\u30b7\u30f3\u30dc\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\uff1a\n\n```\n(gdb) symbol-file a.debug\nReading symbols from /tmp/gdb/a.debug...done.\n```\n\n\u4eca\u5ea6\u306f\u30d6\u30ec\u30fc\u30af\u30dd\u30a4\u30f3\u30c8\u3092\u5f35\u308c\u308b\uff1a\n\n```\n(gdb) b a.c:21\nBreakpoint 1 at 0x40058e: file a.c, line 21.\n(gdb) run\nStarting program: /tmp/gdb/a.stripped\n\nBreakpoint 1, main (argc=<error reading variable: can't compute CFA for this frame>, argv=<error reading variable: can't compute CFA for this frame>) at a.c:21\n21        printf(\"start\\n\");\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-106.167.amzn1.x86_64\n(gdb) n\nstart\n22        ret = hoge(a, b);\n(gdb) n\n23        printf(\"ret = %d\\n\", ret);\n(gdb) n\nret = 6\n25        return 0;\n```\n\n## --symbols=SYMFILE\n\nman\u3084`gdb --help`\u306b\u3088\u308b\u3068\n\n```\n--symbols=SYMFILE  Read symbols from SYMFILE.\n```\n\n\u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u3088\u3046\u3060\u304c\u3001`gdb --symbols=a.debug a.stripped`\u3067\u306f\u8aad\u307f\u8fbc\u3081\u306a\u304b\u3063\u305f\u3002\n\n## debug link\n\n\u30b7\u30f3\u30dc\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u30d0\u30a4\u30ca\u30ea\u306e\u4e2d\u306b\u57cb\u3081\u8fbc\u3093\u3067\u304a\u304f\u300cdebug link\u300d\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3082\u3042\u308b\u3089\u3057\u3044\u3002\n\n`--with-separate-debug-dir`\n`show debug-file-directory`\n`objcopy --add-gnu-debuglink=foo.debug foo`\n\n## \u53c2\u8003\n\nDebugging with GDB: 18.2 \u5225\u30d5\u30a1\u30a4\u30eb\u306b\u3042\u308b\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\nhttp://www.geocities.jp/harddiskdive/gdb/gdb_178.html \ndebugging - How to generate gcc debug symbol outside the build target? - Stack Overflow\nhttp://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target\n\n", "tags": ["GCC", "gdb"]}