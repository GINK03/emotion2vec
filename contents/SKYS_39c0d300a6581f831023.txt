{"context": "\n\n\u6982\u8981\n\u4f4f\u6240\u307e\u305f\u306f\u7def\u5ea6\u7d4c\u5ea6\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5730\u56f3\u753b\u50cf\u3092\u751f\u6210\u3057\u3001LINE\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u3057\u3066\u9001\u4fe1\u3057\u305f\u969b\u306e\u30e1\u30e2\u3067\u3059\u3002\n\n\u5730\u56f3\u753b\u50cf\u751f\u6210\nGoogle Static Maps API \u3092\u4f7f\u7528\u3057\u3066\u5730\u56f3\u753b\u50cf\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\nfunction sendMapsImage() {\n  // \u30a2\u30c9\u30ec\u30b9\u306e\u6307\u5b9a\n  var address = '\u6771\u4eac\u90fd\u5343\u4ee3\u7530\u533a\u4e38\u306e\u5185\uff11\u4e01\u76ee\uff19\u2212\uff11'  // \u6771\u4eac\u99c5\n  var latitude = 35.6817879  // \u6771\u4eac\u99c5 \u7def\u5ea6\n  var longitude = 139.7645727  // \u6771\u4eac\u99c5 \u7d4c\u5ea6\n\n  // StaticMap \u306e\u57fa\u672c\u8a2d\u5b9a\n  var map = Maps.newStaticMap()\n    .setSize(600, 600)  // \u753b\u50cf\u30b5\u30a4\u30ba\u306e\u6307\u5b9a (Max: 600x600)\n    .setLanguage('ja')  // \u8a00\u8a9e\u306e\u8a2d\u5b9a\n    .setMobile(true)  // \u30e2\u30d0\u30a4\u30eb\u7aef\u672b\u5411\u3051\u306e\u5730\u56f3\n    .setMapType(Maps.StaticMap.Type.HYBRID)  // \u822a\u7a7a\u5199\u771f\uff0b\u901a\u5e38\n\n  // StaticMap\u4e0a\u306b\u30de\u30fc\u30ab\u30fc\u3092\u8a2d\u7f6e\n  map.addMarker(address) // \u4f4f\u6240\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\n  // map.addMarker(latitude, longitude)  // \u7def\u5ea6\u7d4c\u5ea6\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408 \n\n  // Blob\u3068\u3057\u3066\u753b\u50cf\u3092\u53d6\u5f97\n  var mapBlob = map.getBlob()\n\n  // StaticMap \u3078\u306e\u30d1\u30b9\u3092\u53d6\u5f97\n  var mapUrl = map.getMapUrl()\n\n  // Line \u306b\u9001\u4fe1\n  sendHttpPostImage(mapUrl, mapBlob)\n}\n\nGoogle Static Map \u306b\u3064\u3044\u3066\u305d\u306e\u4ed6\u306e\u4ed5\u69d8\u306fGoogle\u306eReference\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\u53c2\u8003: Class StaticMap \u00a0|\u00a0 Apps Script \u00a0|\u00a0 Google Developers\n\u5730\u56f3\u306e\u7a2e\u985e(Maps.StaticMap.Type)\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002\n\u53c2\u8003: Enum Type \u00a0|\u00a0 Apps Script \u00a0|\u00a0 Google Developers\n\nLine\u306b\u9001\u4fe1\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\u53c2\u8003: Google App Script\u304b\u3089LINE Notify\u3067LINE\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b - Qiita\n\u4ee5\u964d\u3001\u4e0a\u8a18\u30ea\u30f3\u30af\u5148\u3092\u53c2\u8003\u306b\u30c8\u30fc\u30af\u30f3\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3068\u3057\u3066\u8a71\u3092\u9032\u3081\u307e\u3059\u3002\n\u4e0a\u8a18\u30ea\u30f3\u30af\u5148\u8a18\u4e8b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u90e8\u5206\u3092\u3001\u753b\u50cf\u9001\u4fe1\u306e\u305f\u3081\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\nfunction sendHttpPostImage(message, blob){\n  var token = [access_token];\n  var formData = {\n   'message' : message,\n   'imageFile': blob  // \u5730\u56f3\u753b\u50cf\u3092\u6dfb\u4ed8\n  }\n  var options =\n   {\n     \"method\"  : \"post\",\n     \"payload\" : formData,  // message, imageFile \u3092 formData \u3068\u3057\u3066Post\n     \"headers\" : {\"Authorization\" : \"Bearer \"+ token}\n   };\n\n   UrlFetchApp.fetch(\"https://notify-api.line.me/api/notify\",options);\n}\n\n\u4ee5\u4e0a\u3067\u5b8c\u4e86\u3067\u3059\u3002\nsendMapsImage()\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067Line\u306b\u753b\u50cf\u304c\u5c4a\u304d\u307e\u3059\u3002\n\nLine\u306b\u753b\u50cf\u306e\u307f\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u305a\u3001message\u306f\u5fc5\u9808\u306e\u3088\u3046\u3067\u3059\u3002\n\u307e\u305f\u30011\u6642\u9593\u306b\u53ef\u80fd\u306a\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6570\u306b\u306f\u5236\u9650\u304c\u3042\u308b\u305f\u3081\u6ce8\u610f\u304c\u5fc5\u8981\u306a\u3088\u3046\u3067\u3059\u3002\n\u53c2\u8003: \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089 LINE \u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308c\u308b LINE Notify \u00ab LINE Engineers' Blog\n\u53c2\u8003: Class UrlFetchApp \u00a0|\u00a0 Apps Script \u00a0|\u00a0 Google Developers\n\n\u88dc\u8db3\nLine Engineers' Blog \u306e\u4f8b\u3067\u306f imageFullsize=URL \u3092\u4f7f\u7528\u3057\u3066\u753b\u50cf\u306e\u9001\u4fe1\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001GoogleStaticMap\u306eURL\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001{\"status\":400,\"message\":\"imageFullsize: may not be url\"} \u3068\u306a\u3063\u3066\u3057\u307e\u3044\u3001\u6709\u52b9\u306aURL\u3068\u306f\u8a8d\u8b58\u3057\u3066\u304f\u308c\u306a\u3044\u6a21\u69d8\u3067\u3059\u3002\n#\u6982\u8981 \n\u4f4f\u6240\u307e\u305f\u306f\u7def\u5ea6\u7d4c\u5ea6\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5730\u56f3\u753b\u50cf\u3092\u751f\u6210\u3057\u3001LINE\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u3057\u3066\u9001\u4fe1\u3057\u305f\u969b\u306e\u30e1\u30e2\u3067\u3059\u3002\n\n# \u5730\u56f3\u753b\u50cf\u751f\u6210\nGoogle Static Maps API \u3092\u4f7f\u7528\u3057\u3066\u5730\u56f3\u753b\u50cf\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```javascript\nfunction sendMapsImage() {\n  // \u30a2\u30c9\u30ec\u30b9\u306e\u6307\u5b9a\n  var address = '\u6771\u4eac\u90fd\u5343\u4ee3\u7530\u533a\u4e38\u306e\u5185\uff11\u4e01\u76ee\uff19\u2212\uff11'  // \u6771\u4eac\u99c5\n  var latitude = 35.6817879  // \u6771\u4eac\u99c5 \u7def\u5ea6\n  var longitude = 139.7645727  // \u6771\u4eac\u99c5 \u7d4c\u5ea6\n  \n  // StaticMap \u306e\u57fa\u672c\u8a2d\u5b9a\n  var map = Maps.newStaticMap()\n    .setSize(600, 600)  // \u753b\u50cf\u30b5\u30a4\u30ba\u306e\u6307\u5b9a (Max: 600x600)\n    .setLanguage('ja')  // \u8a00\u8a9e\u306e\u8a2d\u5b9a\n    .setMobile(true)  // \u30e2\u30d0\u30a4\u30eb\u7aef\u672b\u5411\u3051\u306e\u5730\u56f3\n    .setMapType(Maps.StaticMap.Type.HYBRID)  // \u822a\u7a7a\u5199\u771f\uff0b\u901a\u5e38\n  \n  // StaticMap\u4e0a\u306b\u30de\u30fc\u30ab\u30fc\u3092\u8a2d\u7f6e\n  map.addMarker(address) // \u4f4f\u6240\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\n  // map.addMarker(latitude, longitude)  // \u7def\u5ea6\u7d4c\u5ea6\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408 \n  \n  // Blob\u3068\u3057\u3066\u753b\u50cf\u3092\u53d6\u5f97\n  var mapBlob = map.getBlob()\n  \n  // StaticMap \u3078\u306e\u30d1\u30b9\u3092\u53d6\u5f97\n  var mapUrl = map.getMapUrl()\n  \n  // Line \u306b\u9001\u4fe1\n  sendHttpPostImage(mapUrl, mapBlob)\n}\n```\n\nGoogle Static Map \u306b\u3064\u3044\u3066\u305d\u306e\u4ed6\u306e\u4ed5\u69d8\u306fGoogle\u306eReference\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n[\u53c2\u8003: Class StaticMap \u00a0|\u00a0 Apps Script \u00a0|\u00a0 Google Developers](https://developers.google.com/apps-script/reference/maps/static-map)\n\n\u5730\u56f3\u306e\u7a2e\u985e(Maps.StaticMap.Type)\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002\n[\u53c2\u8003: Enum Type \u00a0|\u00a0 Apps Script \u00a0|\u00a0 Google Developers](https://developers.google.com/apps-script/reference/maps/type)\n\n\n# Line\u306b\u9001\u4fe1\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n[\u53c2\u8003: Google App Script\u304b\u3089LINE Notify\u3067LINE\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b - Qiita](http://qiita.com/tadaken3/items/5f916a12587e42ece814)\n\n\u4ee5\u964d\u3001\u4e0a\u8a18\u30ea\u30f3\u30af\u5148\u3092\u53c2\u8003\u306b\u30c8\u30fc\u30af\u30f3\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3068\u3057\u3066\u8a71\u3092\u9032\u3081\u307e\u3059\u3002\n\u4e0a\u8a18\u30ea\u30f3\u30af\u5148\u8a18\u4e8b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u90e8\u5206\u3092\u3001\u753b\u50cf\u9001\u4fe1\u306e\u305f\u3081\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```javascript\nfunction sendHttpPostImage(message, blob){\n  var token = [access_token];\n  var formData = {\n   'message' : message,\n   'imageFile': blob  // \u5730\u56f3\u753b\u50cf\u3092\u6dfb\u4ed8\n  }\n  var options =\n   {\n     \"method\"  : \"post\",\n     \"payload\" : formData,  // message, imageFile \u3092 formData \u3068\u3057\u3066Post\n     \"headers\" : {\"Authorization\" : \"Bearer \"+ token}\n   };\n\n   UrlFetchApp.fetch(\"https://notify-api.line.me/api/notify\",options);\n}\n```\n\n\u4ee5\u4e0a\u3067\u5b8c\u4e86\u3067\u3059\u3002\nsendMapsImage()\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067Line\u306b\u753b\u50cf\u304c\u5c4a\u304d\u307e\u3059\u3002\n\n![LINE\u753b\u9762](https://qiita-image-store.s3.amazonaws.com/0/43136/ed6d9f61-8e45-6612-cf53-8658134ad644.png)\n\n\nLine\u306b\u753b\u50cf\u306e\u307f\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u305a\u3001message\u306f\u5fc5\u9808\u306e\u3088\u3046\u3067\u3059\u3002\n\u307e\u305f\u30011\u6642\u9593\u306b\u53ef\u80fd\u306a\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6570\u306b\u306f\u5236\u9650\u304c\u3042\u308b\u305f\u3081\u6ce8\u610f\u304c\u5fc5\u8981\u306a\u3088\u3046\u3067\u3059\u3002\n\n[\u53c2\u8003: \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089 LINE \u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308c\u308b LINE Notify \u00ab LINE Engineers' Blog](http://developers.linecorp.com/blog/ja/?p=3784)\n[\u53c2\u8003: Class UrlFetchApp \u00a0|\u00a0 Apps Script \u00a0|\u00a0 Google Developers](https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app#fetchurl-params)\n\n# \u88dc\u8db3\nLine Engineers' Blog \u306e\u4f8b\u3067\u306f `imageFullsize=URL` \u3092\u4f7f\u7528\u3057\u3066\u753b\u50cf\u306e\u9001\u4fe1\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001GoogleStaticMap\u306eURL\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001{\"status\":400,\"message\":\"imageFullsize: may not be url\"} \u3068\u306a\u3063\u3066\u3057\u307e\u3044\u3001\u6709\u52b9\u306aURL\u3068\u306f\u8a8d\u8b58\u3057\u3066\u304f\u308c\u306a\u3044\u6a21\u69d8\u3067\u3059\u3002\n", "tags": ["GoogleAppsScript", "GoogleMapsAPI", "Line", "LineNotify"]}