{"context": "\n\n\u6982\u8981\narduino uno\u306busb host\u3064\u306a\u3044\u3067\u3001usb\u30de\u30a6\u30b9\u3064\u306a\u3044\u3067\u3001L\u30c1\u30ab\u3057\u3066\u307f\u305f\u3002\n\n\u5199\u771f\n\n\n\u30ed\u30b0\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n#include <hidboot.h>\n#include <usbhub.h>\n#ifdef dobogusinclude\n#include <spi4teensy3.h>\n#include <SPI.h>\n#endif\n\nclass MouseRptParser : public MouseReportParser\n{\nprotected:\n    void OnMouseMove(MOUSEINFO * mi);\n    void OnLeftButtonUp(MOUSEINFO * mi);\n    void OnLeftButtonDown(MOUSEINFO * mi);\n    void OnRightButtonUp(MOUSEINFO * mi);\n    void OnRightButtonDown(MOUSEINFO * mi);\n    void OnMiddleButtonUp(MOUSEINFO * mi);\n    void OnMiddleButtonDown(MOUSEINFO * mi);\n};\nvoid MouseRptParser::OnMouseMove(MOUSEINFO * mi)\n{\n    Serial.print(\"dx=\");\n    Serial.print(mi->dX, DEC);\n    Serial.print(\" dy=\");\n    Serial.println(mi->dY, DEC);\n};\nvoid MouseRptParser::OnLeftButtonUp(MOUSEINFO * mi)\n{\n    Serial.println(\"L Butt Up\");\n};\nvoid MouseRptParser::OnLeftButtonDown(MOUSEINFO * mi)\n{\n    digitalWrite(2, HIGH);\n    Serial.println(\"L Butt Dn\");\n};\nvoid MouseRptParser::OnRightButtonUp(MOUSEINFO * mi)\n{\n    Serial.println(\"R Butt Up\");\n};\nvoid MouseRptParser::OnRightButtonDown(MOUSEINFO * mi)\n{\n    digitalWrite(2, LOW);\n    Serial.println(\"R Butt Dn\");\n};\nvoid MouseRptParser::OnMiddleButtonUp(MOUSEINFO * mi)\n{\n    Serial.println(\"M Butt Up\");\n};\nvoid MouseRptParser::OnMiddleButtonDown(MOUSEINFO * mi)\n{\n    Serial.println(\"M Butt Dn\");\n};\nUSB Usb;\nHIDBoot<USB_HID_PROTOCOL_MOUSE> HidMouse(&Usb);\nMouseRptParser Prs;\nvoid setup()\n{\n    pinMode(2, OUTPUT);\n    Serial.begin(115200);\n    Serial.println(\"Start\");\n    if (Usb.Init() == -1) Serial.println(\"OSC did not start.\");\n    HidMouse.SetReportParser(0, &Prs);\n}\nvoid loop()\n{\n    Usb.Task();\n}\n\n\n#\u6982\u8981\narduino uno\u306busb host\u3064\u306a\u3044\u3067\u3001usb\u30de\u30a6\u30b9\u3064\u306a\u3044\u3067\u3001L\u30c1\u30ab\u3057\u3066\u307f\u305f\u3002\n#\u5199\u771f\n![MVC-005S.JPG](https://qiita-image-store.s3.amazonaws.com/0/18104/08d8e721-ac03-2f91-f14e-eedbd3a8f767.jpeg)\n\n#\u30ed\u30b0\n![mouse.JPG](https://qiita-image-store.s3.amazonaws.com/0/18104/976d9bf4-04c3-6a93-a37f-a2091eff9046.jpeg)\n\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```\n#include <hidboot.h>\n#include <usbhub.h>\n#ifdef dobogusinclude\n#include <spi4teensy3.h>\n#include <SPI.h>\n#endif\n\nclass MouseRptParser : public MouseReportParser\n{\nprotected:\n\tvoid OnMouseMove(MOUSEINFO * mi);\n\tvoid OnLeftButtonUp(MOUSEINFO * mi);\n\tvoid OnLeftButtonDown(MOUSEINFO * mi);\n\tvoid OnRightButtonUp(MOUSEINFO * mi);\n\tvoid OnRightButtonDown(MOUSEINFO * mi);\n\tvoid OnMiddleButtonUp(MOUSEINFO * mi);\n\tvoid OnMiddleButtonDown(MOUSEINFO * mi);\n};\nvoid MouseRptParser::OnMouseMove(MOUSEINFO * mi)\n{\n\tSerial.print(\"dx=\");\n\tSerial.print(mi->dX, DEC);\n\tSerial.print(\" dy=\");\n\tSerial.println(mi->dY, DEC);\n};\nvoid MouseRptParser::OnLeftButtonUp(MOUSEINFO * mi)\n{\n\tSerial.println(\"L Butt Up\");\n};\nvoid MouseRptParser::OnLeftButtonDown(MOUSEINFO * mi)\n{\n\tdigitalWrite(2, HIGH);\n\tSerial.println(\"L Butt Dn\");\n};\nvoid MouseRptParser::OnRightButtonUp(MOUSEINFO * mi)\n{\n\tSerial.println(\"R Butt Up\");\n};\nvoid MouseRptParser::OnRightButtonDown(MOUSEINFO * mi)\n{\n\tdigitalWrite(2, LOW);\n\tSerial.println(\"R Butt Dn\");\n};\nvoid MouseRptParser::OnMiddleButtonUp(MOUSEINFO * mi)\n{\n\tSerial.println(\"M Butt Up\");\n};\nvoid MouseRptParser::OnMiddleButtonDown(MOUSEINFO * mi)\n{\n\tSerial.println(\"M Butt Dn\");\n};\nUSB Usb;\nHIDBoot<USB_HID_PROTOCOL_MOUSE> HidMouse(&Usb);\nMouseRptParser Prs;\nvoid setup()\n{\n\tpinMode(2, OUTPUT);\n\tSerial.begin(115200);\n\tSerial.println(\"Start\");\n\tif (Usb.Init() == -1) Serial.println(\"OSC did not start.\");\n\tHidMouse.SetReportParser(0, &Prs);\n}\nvoid loop()\n{\n\tUsb.Task();\n}\n\n```\n\n", "tags": ["Arduino", "usbhost", "L\u30c1\u30ab"]}