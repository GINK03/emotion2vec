{"context": " More than 1 year has passed since last update.http://qiita.com/7of9/items/6391ed9803d82db2f4a0\n\u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066\u3001cluster-cluster aggregate\u751f\u6210\u30b3\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u307f\u3066\u3044\u308b\u3002\n\nSpherePrefab: Scale(0.3, 0.3, 0.3)\n\n\nSphereControl.cs\nusing UnityEngine;\nusing System.Collections;\n\npublic class SphereControl : MonoBehaviour {\n\n    void Update () {\n    }\n\n    private const string kFinish = \"Finish\";\n\n    void OnCollisionEnter(Collision col)\n    {\n        if(col.transform.tag.Equals(kFinish)) {\n            foreach(Transform child in gameObject.transform.parent) {                  \n                if (child.transform.tag.Equals(kFinish)) {\n                    continue;\n                }\n                print (child.name);\n                Rigidbody rb = child.gameObject.GetComponent<Rigidbody> ();\n                rb.isKinematic = true;\n                child.gameObject.tag = kFinish;\n            }\n        }\n    }\n}\n\n\n\nButtonPushed.cs\nusing UnityEngine;\nusing System.Collections;\nusing System.Collections.Generic;\n\npublic class ButtonPushed : MonoBehaviour {\n\n    public GameObject prefab;\n    private GameObject monomer;\n    private Rigidbody rig1;\n    private float s_dist = 6.0f; // arbitrary distance\n\n    private GameObject myParent;\n\n    private List<GameObject> listGO;\n\n    void Start () {\n        listGO = new List<GameObject> ();\n\n        myParent = new GameObject ();\n        myParent.name = \"Parent\";\n\n        // make sphere positioned at the center\n        monomer = Instantiate (prefab, new Vector3 (0, 0, 0), Quaternion.identity) as GameObject;\n        monomer.name = \"monomer1\";\n        monomer.transform.parent = myParent.transform;\n        SetChildTagFinish (myParent);\n\n        // to be fixed at the position\n        Rigidbody rb = monomer.GetComponent<Rigidbody> ();\n        rb.isKinematic = true;\n    }\n\n    void SetChildTagFinish(GameObject obj1)\n    {\n        obj1.tag = \"Finish\";\n        foreach(Transform child in obj1.transform) {\n            child.gameObject.tag = \"Finish\";\n        }\n    }\n\n    float MyRandom(float begin, float end)\n    {\n        // TODO: use other random number generator having good probability (MT?)\n        return Random.Range (begin, end);\n    }\n\n    void AddMonomer() {\n        float theta_rad = MyRandom(0.0f, 2.0f * Mathf.PI);\n        float phi_rad = MyRandom(0.0f, Mathf.PI);\n        float xpos = s_dist * Mathf.Sin(phi_rad) * Mathf.Cos(theta_rad);\n        float ypos = s_dist * Mathf.Sin(phi_rad) * Mathf.Sin(theta_rad);\n        float zpos = s_dist * Mathf.Cos(phi_rad);\n\n        int count = myParent.transform.childCount;\n        for (int idx=0; idx < count; idx++) {\n            Vector3 pos1 = new Vector3 (xpos, ypos, zpos) + myParent.transform.GetChild(idx).position;\n            monomer = Instantiate (prefab, pos1, Quaternion.identity) as GameObject;\n            monomer.name = \"monomer1\";\n            monomer.transform.parent = myParent.transform;\n            listGO.Add(monomer);\n        }\n    }\n\n    void OnGUI() {\n        if (GUI.Button (new Rect (10, 10, 100, 40), \"Generate\")) {\n            SetChildTagFinish(myParent);\n            AddMonomer();\n\n            // AddForce to push the monomer directed to the center sphere\n            for(int idx=0; idx < listGO.Count; idx++) {\n                GameObject work = listGO[idx];\n                rig1 = work.GetComponent<Rigidbody>();\n                rig1.mass = 0.3f;\n                print (work.transform.position);\n                rig1.AddForce(-work.transform.position * 30f);\n            }\n        }\n    }\n}\n\n\n\n\u3069\u3046\u3082\u885d\u7a81\u5408\u4f53\u3057\u305f\u6642\u306b\u591a\u5c11\u7c92\u5b50\u304c\u79fb\u52d5\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u306e\u304b\u3001\u9699\u9593\u304c\u3067\u304d\u3066\u3044\u308b\u3002\n\u6539\u826f\u306e\u4f59\u5730\u3042\u308a\u3002\nhttp://qiita.com/7of9/items/6391ed9803d82db2f4a0\n\u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066\u3001cluster-cluster aggregate\u751f\u6210\u30b3\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u307f\u3066\u3044\u308b\u3002\n\n1. SpherePrefab: Scale(0.3, 0.3, 0.3)\n\n```csharp:SphereControl.cs\nusing UnityEngine;\nusing System.Collections;\n\npublic class SphereControl : MonoBehaviour {\n\t\n\tvoid Update () {\n\t}\n\n\tprivate const string kFinish = \"Finish\";\n\n\tvoid OnCollisionEnter(Collision col)\n\t{\n\t\tif(col.transform.tag.Equals(kFinish)) {\n\t\t\tforeach(Transform child in gameObject.transform.parent) {\t\t\t\t   \n\t\t\t\tif (child.transform.tag.Equals(kFinish)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tprint (child.name);\n\t\t\t\tRigidbody rb = child.gameObject.GetComponent<Rigidbody> ();\n\t\t\t\trb.isKinematic = true;\n\t\t\t\tchild.gameObject.tag = kFinish;\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n```csharp:ButtonPushed.cs\nusing UnityEngine;\nusing System.Collections;\nusing System.Collections.Generic;\n\npublic class ButtonPushed : MonoBehaviour {\n\t\n\tpublic GameObject prefab;\n\tprivate GameObject monomer;\n\tprivate Rigidbody rig1;\n\tprivate float s_dist = 6.0f; // arbitrary distance\n\n\tprivate GameObject myParent;\n\n\tprivate List<GameObject> listGO;\n\n\tvoid Start () {\n\t\tlistGO = new List<GameObject> ();\n\n\t\tmyParent = new GameObject ();\n\t\tmyParent.name = \"Parent\";\n\n\t\t// make sphere positioned at the center\n\t\tmonomer = Instantiate (prefab, new Vector3 (0, 0, 0), Quaternion.identity) as GameObject;\n\t\tmonomer.name = \"monomer1\";\n\t\tmonomer.transform.parent = myParent.transform;\n\t\tSetChildTagFinish (myParent);\n\n\t\t// to be fixed at the position\n\t\tRigidbody rb = monomer.GetComponent<Rigidbody> ();\n\t\trb.isKinematic = true;\n\t}\n\n\tvoid SetChildTagFinish(GameObject obj1)\n\t{\n\t\tobj1.tag = \"Finish\";\n\t\tforeach(Transform child in obj1.transform) {\n\t\t\tchild.gameObject.tag = \"Finish\";\n\t\t}\n\t}\n\t\n\tfloat MyRandom(float begin, float end)\n\t{\n\t\t// TODO: use other random number generator having good probability (MT?)\n\t\treturn Random.Range (begin, end);\n\t}\n\t\n\tvoid AddMonomer() {\n\t\tfloat theta_rad = MyRandom(0.0f, 2.0f * Mathf.PI);\n\t\tfloat phi_rad = MyRandom(0.0f, Mathf.PI);\n\t\tfloat xpos = s_dist * Mathf.Sin(phi_rad) * Mathf.Cos(theta_rad);\n\t\tfloat ypos = s_dist * Mathf.Sin(phi_rad) * Mathf.Sin(theta_rad);\n\t\tfloat zpos = s_dist * Mathf.Cos(phi_rad);\n\n\t\tint count = myParent.transform.childCount;\n\t\tfor (int idx=0; idx < count; idx++) {\n\t\t\tVector3 pos1 = new Vector3 (xpos, ypos, zpos) + myParent.transform.GetChild(idx).position;\n\t\t\tmonomer = Instantiate (prefab, pos1, Quaternion.identity) as GameObject;\n\t\t\tmonomer.name = \"monomer1\";\n\t\t\tmonomer.transform.parent = myParent.transform;\n\t\t\tlistGO.Add(monomer);\n\t\t}\n\t}\n\t\t\n\tvoid OnGUI() {\n\t\tif (GUI.Button (new Rect (10, 10, 100, 40), \"Generate\")) {\n\t\t\tSetChildTagFinish(myParent);\n\t\t\tAddMonomer();\n\n\t\t\t// AddForce to push the monomer directed to the center sphere\n\t\t\tfor(int idx=0; idx < listGO.Count; idx++) {\n\t\t\t\tGameObject work = listGO[idx];\n\t\t\t\trig1 = work.GetComponent<Rigidbody>();\n\t\t\t\trig1.mass = 0.3f;\n\t\t\t\tprint (work.transform.position);\n\t\t\t\trig1.AddForce(-work.transform.position * 30f);\n\t\t\t}\n\t\t}\n\t}\n}\n```\n![Scene_unity_-_150809_bcca_v0_9_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/86a8a1ab-acc3-6a31-6e7f-69c8b1d6c939.jpeg)\n\n\u3069\u3046\u3082\u885d\u7a81\u5408\u4f53\u3057\u305f\u6642\u306b\u591a\u5c11\u7c92\u5b50\u304c\u79fb\u52d5\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u306e\u304b\u3001\u9699\u9593\u304c\u3067\u304d\u3066\u3044\u308b\u3002\n\u6539\u826f\u306e\u4f59\u5730\u3042\u308a\u3002\n\n\n", "tags": ["MyUnity"]}