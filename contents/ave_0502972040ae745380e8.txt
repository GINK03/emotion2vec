{"context": " More than 1 year has passed since last update.\n\nFuelPHP\u306eORM\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\n\u6700\u8fd1Fuel\u306eORM\u521d\u3081\u3066\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u3001\u81ea\u5206\u306e\u5099\u5fd8\u9332\u3082\u517c\u306d\u3066\u3002\nFuel\u306eORM\u306b\u3064\u3044\u3066\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u30b5\u30a4\u30c8\u3084\u6295\u7a3f\u306f\u305f\u304f\u3055\u3093\u3042\u308a\u307e\u3059\u304c\u3001\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7d30\u304b\u3044\u8a2d\u5b9a\u306a\u3069\u3001\u5b9f\u969b\u306b\u3053\u308c\u8aad\u3093\u3067\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u3059\u308b\u306b\u306f\u307e\u3060\u5145\u5b9f\u3057\u3066\u306a\u3044\u306a\u3042\u301c\u3068\u3044\u3046\u5370\u8c61\u306a\u306e\u3067\u3001\u305d\u306e\u8fba\u3092\u88dc\u3048\u308b\u8a18\u4e8b\u306b\u3057\u307e\u3059\u3002\n\u516c\u5f0fdoc\u9685\u3005\u307e\u3067\u898b\u3066\u89e3\u8aad\u3057\u3066\u4f7f\u3048\u3070\u3044\u30fc\u3093\u3060\u3088\u3068\u3044\u3046\u30c4\u30c3\u30b3\u30df\u306f\u3054\u6cd5\u5ea6\uff01\uff01\n\nORM\u3092\u4f7f\u3046\u306b\u306f\nORM\u306fFuelPHP\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u5185\u306b\u6a19\u6e96\u3067\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\nconfig\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067ORM\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\napp/config/config.php\n\n     'always_load'  => array(\n\n        /**\n         * These packages are loaded on Fuel's startup.\n         * You can specify them in the following manner:\n         *\n         * array('auth'); // This will assume the packages are in PKGPATH\n         *\n         * // Use this format to specify the path to the package explicitly\n         * array(\n         *     array('auth'    => PKGPATH.'auth/')\n         * );\n         */\n        'packages'  => array(\n            'orm',\n        ),\n\n\nalways_load \u5185\u306b\u8a18\u8ff0\u3057\u307e\u3057\u3087\u3046\u3002\n\nORM\u306e\u8a2d\u5b9a\n\n\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u306b\u4ee5\u4e0b\u306eER\u56f3\u5185\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u56f3\u306e\u4f5c\u6210\u306f MySQLWorkbench(ORACLE MySQL\u516c\u5f0f\u306eGUI\u30c4\u30fc\u30eb) \u306b\u3066\u884c\u3044\u307e\u3057\u305f\u3002\n\n\n\n\u203b\u3042\u304f\u307e\u3067ORM\u3092\u4f7f\u3046\u4e0a\u3067\u306e\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u8a2d\u8a08\u4e0a\u306e\u7d30\u304b\u3044\u3068\u3053\u308d\u306f\u6c17\u306b\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\n\nModel\u30af\u30e9\u30b9\u306e\u4f5c\u6210\n\u305d\u308c\u3067\u306f\u4e0a\u8a18\u306eER\u56f3\u3092\u53c2\u8003\u306b\u3001ORM\u3092\u4f7f\u7528\u3057\u3066\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\u307e\u305a\u305d\u308c\u305e\u308c\u4f7f\u7528\u3059\u308b\u30e2\u30c7\u30eb\u3068ORM\u3092\u95a2\u9023\u4ed8\u3051\u308b\u305f\u3081\u306b\u3001\napp/class/model/\u30e2\u30c7\u30eb\u540d.php\n\n\u3053\u306e\u3088\u3046\u306bModel\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4f5c\u6210\u5f8c\u3001Model\u30af\u30e9\u30b9\u5185\u3067Orm\\Model\u3092\u62e1\u5f35\u3059\u308b\u304bextends\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bModel\u30af\u30e9\u30b9\u3067\n\n\napp/classes/model/shop.php\nuse Orm\\Model\nclass Model_Shop extends Model\n{\n\n\n\u540d\u524d\u7a7a\u9593\u3067\u76f4\u63a5\u6307\u5b9a\u3057\u3066\u3084\u308b\u304b\n\napp/classes/model/shop.php\nclass Model_Shop extends \\Orm\\Model\n{\n\n\n\u00a5Orm\u00a5Model\u3092\u62e1\u5f35\u3059\u308b(extends\u3059\u308b)\u8a18\u8ff0\u3092\u66f8\u304d\u307e\u3059\u3002\nModel\u30af\u30e9\u30b9\u306f\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u305f\u3044\u30c6\u30fc\u30d6\u30eb\u306b\u95a2\u9023\u3059\u308b\u3001\u305d\u306e\u30e2\u30c7\u30eb\u306e\u6570\u5206\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3084\u308a\u307e\u3059\u3002\n\u4e0a\u8a18\u306eER\u56f3\u306e\u4f8b\u3060\u3068\u3001use_food_sub \u306e\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u305f\u3044\u5834\u5408\u3001\u305d\u308c\u306b\u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\n\nmodel/shop.php\n\n\napp/classes/model/shop.php\nclass Model_Shop extends \\Orm\\Model\n{\n\n\n\nmodel/usefood.php\n\n\napp/classes/model/usefood.php\nclass Model_Usefood extends \\Orm\\Model\n{\n\n\n\nmodel/usefoodsub.php\n\n\napp/classes/model/usefoodsub.php\nclass Model_Usefoodsub extends \\Orm\\Model\n{\n\n\n\nmodel/product.php\n\n\napp/classes/model/product.php\nclass Model_Product extends \\Orm\\Model\n{\n\n\n\u3092\u4f5c\u6210\u3057\u3066\u3084\u308a\u307e\u3059\u3002\n\nORM\u306e\u8a2d\u5b9a\n\u307e\u305a\u3001\u30e2\u30c7\u30eb\u5185\u306eORM\u306e\u8a2d\u5b9a\u3068\u3057\u3066\n\n\u30c6\u30fc\u30d6\u30eb\u540d\n\u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n\u30c6\u30fc\u30d7\u30eb\u5185\u3067\u4f7f\u7528\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\n\n\u3092\u6307\u5b9a\u3057\u3066\u3084\u308a\u307e\u3059\u3002\nshop\u30e2\u30c7\u30eb\u3092\u4f8b\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002\n\napp/classes/model/shop.php\n<?php\n/**\n * ORM \u5e97\u8217\u30e2\u30c7\u30eb\n */\nclass Model_Shop extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'shop';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            'data_type'  => 'int',\n            'label'      => 'id',\n            'validation' => array(\n                'required',\n                'valid_string' => array(array('numeric')),\n            ),\n            'form'      => array('type' => false),\n        ),\n        // \u5e97\u8217\u30a8\u30ea\u30a2id\n        'area_id' => array(\n            'data_type'  => 'int',\n            'label'      => 'area_id',\n            'validation' => array(\n                'required',\n                'valid_string' => array(array('numeric')),\n            ),\n            'form'      => array('type' => false),\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            'data_type' => 'datetime',\n            'label'     => 'created_at',\n            'form'      => array('type' => false),\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            'data_type' => 'datetime',\n            'label'     => 'updated_at',\n            'form'      => array('type' => false),\n        ),\n    );\n\n\nvalidation, form \u306b\u3064\u3044\u3066\u306f\u3001\u30d5\u30a9\u30fc\u30e0\u3092\u81ea\u52d5\u751f\u6210\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u4eca\u56de\u306f\u8aac\u660e\u3092\u5272\u611b\uff09\n\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n\u3053\u308c\u304b\u3089\u884c\u3046\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3068\u306f\u3001\n\u30e2\u30c7\u30eb\u540c\u58eb\u306e\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3046\u3053\u3068\u3067\u3001\u6307\u5b9a\u3055\u308c\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u95a2\u9023\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\n\u5148\u306e\u5de5\u7a0b\u3067\u3001use_food_sub \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u3001\u307e\u305a\u5404\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\u3001\u30e2\u30c7\u30eb\u5185\u3067\u306eORM\u306e\u8a2d\u5b9a\u3092\u7d42\u3048\u307e\u3057\u305f\u3002\n\u305d\u3057\u3066\u3053\u3053\u304b\u3089\u306f\u305d\u308c\u305e\u308c\u306e\u30e2\u30c7\u30eb\u540c\u58eb\u3092\u95a2\u9023\u4ed8\u3051\u3055\u305b\u308b\u305f\u3081\u306e\u4f5c\u696d\u306b\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u3084\u308a\u305f\u3044\u3053\u3068\u3068\u3057\u3066 use_food_sub \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u306e\u306b\u3001shop \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53c2\u7167\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nuse_food \u30c6\u30fc\u30d6\u30eb\u306e shop_id \u306b\u306f\u3001shop \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u3067\u3042\u308b id \u304c\u5165\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\n\nshop.id = use_food.shop_id\n\n\u3068\u3044\u3046\u95a2\u4fc2\u6027\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306eshop\u30c6\u30fc\u30d6\u30eb\u3068use_food\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u4fc2\u6027\u306f\u300c1\u5bfe\u591a\u300d\u3068\u3044\u3046\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30e2\u30c7\u30eb\u9593\u306e\u95a2\u9023\u6027\u306b\u3064\u3044\u3066\u3001FuelPHP\u3067\u306f\u3053\u308c\u3089\u306e\u95a2\u9023\u6027\u306e\u5b9a\u7fa9\u4ed8\u3051\u3092\u3059\u308b\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n$_has_many //1\u5bfe\u591a\n$_belongs_to\u3000// has many \u307e\u305f\u306f has one \u306e\u53cd\u5bfe\u5074\u306e\u5b9a\u7fa9\n$_has_one // 1\u5bfe1\n$_many_many // \u591a\u5bfe\u591a\n\n\u3053\u306e\u4e2d\u306e $_has_many \u3068 $_belongs_to \u3092\u4f7f\u3063\u3066\u30e2\u30c7\u30eb\u306e\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3044\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30e2\u30c7\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\napp/classes/model/shop.php\n<?php\n/**\n * ORM \u5e97\u8217\u30e2\u30c7\u30eb\n */\nclass Model_Shop extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'shop';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\u4e0a\u306b\u3042\u308b\u306e\u3067\u7701\u7565...\n        ),\n        // \u5e97\u8217\u30a8\u30ea\u30a2id\n        'area_id' => array(\n            ...\u7701\u7565...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\u7701\u7565...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\u7701\u7565...\n        ),\n    );\n\n   /**\n     * Has Many\n     * @var array\n     */\n    protected static $_has_many = array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3059\u308b\u969b\u306e\u95a2\u4fc2\u6027\u3092\u793a\u3059\u540d\u524d\u3092\u4ed8\u3051\u308b\n        'use_food' => array(\n            // \u7d10\u3065\u3051\u308b\u30e2\u30c7\u30eb  \n            'model_to'       => 'Model_Usefood',\n            // \u3053\u306e\u30e2\u30c7\u30eb\uff08\u5e97\u8217\uff09\u306e\u30ad\u30fc\n            // \u53cd\u5bfe\u5074\u306e\u30e2\u30c7\u30eb\u3068\u306e\u7d50\u5408\u6761\u4ef6\u3068\u306a\u308b\u9805\u76ee\u3092\u793a\u3059\n            'key_from'       => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc\n            // \u53cd\u5bfe\u5074\u306e\u30e2\u30c7\u30eb\u3067\u7d50\u5408\u6761\u4ef6\u3068\u306a\u308b\u9805\u76ee\u3092\u793a\u3059\n            'key_to'         => 'shop_id',\n            // \u95a2\u4fc2\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\n            'cascade_save'   => false,\n            // \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023\u30ec\u30b3\u30fc\u30c9\u304c\u524a\u9664\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u524a\u9664\u3059\u308b\u304b\n            'cascade_delete' => false,\n        ),\n    );\n\n\n\napp/classes/model/usefood.php\n<?php\n/**\n * ORM \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n */\nclass Model_Usefood extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'use_food';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\u7701\u7565...\n        ),\n        // \u5e97\u8217id\n        'shop_id' => array(\n            ...\n        ),\n        // \u98df\u6750id\n        'product_id' => array(\n            ...\n        ),\n        // \u98df\u6750\u540d\n        'name' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u95a2\u4fc2\u6027\u3092\u793a\u3059\u540d\u524d\u3092\u6307\u5b9a\n        'use_food' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u5e97\u8217\n            'model_to' => 'Model_Shop',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5e97\u8217id\n            'key_from' => 'shop_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u5e97\u8217\u30e2\u30c7\u30eb\u306eid\n            'key_to' => 'id',\n            // \u95a2\u4fc2\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\n            'cascade_save' => false,\n            // \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023\u30ec\u30b3\u30fc\u30c9\u304c\u524a\u9664\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u524a\u9664\u3059\u308b\u304b\n            'cascade_delete' => false,\n        ),\n    );\n\n\n\n\u3053\u308c\u3067\u5e97\u8217\u30e2\u30c7\u30eb\u3068\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u5e97\u8217\u30e2\u30c7\u30eb shop \u5074\u304b\u3089\u306f\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u3092\u7d10\u4ed8\u3051\u3057\u307e\u3059\u3088\u3068\u3044\u3046\u6307\u5b9a\u3092 $_has_many \u3067\u884c\u3044\n\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u5074\u304b\u3089\u306f\u5e97\u8217\u30e2\u30c7\u30eb shop \u304c\u7d10\u4ed8\u3051\u3089\u308c\u3066\u307e\u3059\u3088\u3068\u3044\u3046\u6307\u5b9a\u3092 $_belongs_to \u3067\u884c\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002\n\n\n\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n\nController\u306a\u308a\u4f55\u306a\u308a\u304b\u3089\u30e2\u30c7\u30eb\u3092\u547c\u3093\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\n\n\napp/classes/comtroller/shop.php\nclass Controller_Shop extends Controller\n{\n  /**\n   * \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\n   * @return [type] [description]\n   */\n  public function action_index()\n  {\n    $param = Input::get();\n    // \u30c7\u30fc\u30bf\u53d6\u5f97\n    $shop_data = Model_Shop::find('first',  array(\n      'related' => array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u540d\u3092\u6307\u5b9a\n        'use_food'\n      ),\n      'where' => array(\n        array('id', $param['id'])\n      )\n     )\n    );\n  }\n}\n\n\nrelated\u306e\u914d\u5217\u3067\u306f\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3092\u3001 where\u306e\u914d\u5217\u3067\u306fSQL\u3067\u306ewhere\u53e5\u306e\u6307\u5b9a\u306b\u3042\u305f\u308b\u7d5e\u308a\u8fbc\u307f\u306e\u6761\u4ef6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068Object\u578b\u306e\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\uff01\n\u57fa\u672c\u7684\u306a\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u304b\u3089\u306e\u30c7\u30fc\u30bf\u53d6\u5f97\u306f\u4ee5\u4e0a\u306e\u65b9\u6cd5\u3067\u3067\u304d\u307e\u3059\u3002\n\n\u66f4\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3092\u3057\u3066\u30c7\u30fc\u30bf\u53d6\u5f97\u3057\u3066\u307f\u3088\u3046\n\n\u4eca\u56de\u3084\u308a\u305f\u3044\u3053\u3068\u3068\u3057\u3066 use_food_sub \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u306e\u306b\u3001\n\n\u3053\u3053\u307e\u3067\u3067\u3072\u3068\u307e\u305a\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\uff06\u30c7\u30fc\u30bf\u53d6\u5f97\u306f\u3067\u304d\u307e\u3057\u305f\u304c\nuse_food_sub\u304b\u3089\u6700\u7d42\u7684\u306b\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304d\u305f\u3044\u306e\u3067\u3001\u3082\u3046\u3061\u3087\u3044\u304c\u3063\u3064\u308a\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3059\u3002\n\u89e3\u8aac\u3092\u5165\u308c\u306a\u304c\u3089\u8a2d\u5b9a\u4f8b\u3092\u66f8\u304d\u307e\u3059\u3002\n\u5e97\u8217\u30e2\u30c7\u30eb\u306f\u4e0a\u3067\u8a2d\u5b9a\u3057\u305f\u901a\u308a\u306a\u306e\u3067\u7701\u304d\u307e\u3059\nuse_food\n\napp/classes/model/usefood.php\n<?php\n/**\n * ORM \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n */\nclass Model_Usefood extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'use_food';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\u7701\u7565...\n        ),\n        // \u5e97\u8217id\n        'shop_id' => array(\n            ...\n        ),\n        // \u98df\u6750id\n        'product_id' => array(\n            ...\n        ),\n        // \u98df\u6750\u540d\n        'name' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u95a2\u4fc2\u6027\u3092\u793a\u3059\u540d\u524d\u3092\u6307\u5b9a\n        'use_food' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u5e97\u8217\n            'model_to' => 'Model_Shop',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5e97\u8217id\n            'key_from' => 'shop_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u5e97\u8217\u30e2\u30c7\u30eb\u306eid\n            'key_to' => 'id',\n            // \u95a2\u4fc2\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\n            'cascade_save' => false,\n            // \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023\u30ec\u30b3\u30fc\u30c9\u304c\u524a\u9664\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u524a\u9664\u3059\u308b\u304b\n            'cascade_delete' => false,\n        ),\n    );\n\n    /**\n     * Has Many.\n     *\n     * @var array\n     */\n    protected static $_has_many = array(\n        'use_food_sub' => array(\n            // \u7d10\u3065\u3051\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\n            'model_to' => 'Model_Usefoodsub',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u306eid\n            'key_from' => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc\u3000:\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u306e\u98df\u6750\u30b3\u30f3\u30c6\u30f3\u30c4id\n            'key_to' => 'food_content_id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        )\n    );\n\n    /**\n     * Has One.\n     * @var array\n     */\n    protected static $_has_one = array(\n        // \u5546\u6750\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\n        'use_food_product' => array(\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc :\u5546\u6750id\n            'key_from' => 'product_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb  :\u5546\u6750\n            'model_to' => 'Model_Product',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc :id\n            'key_to' => 'id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        )\n    );\n\n\n\n$_has_one \u3092\u4f7f\u3063\u3066\u300c1\u5bfe1\u300d\u306e\u95a2\u4fc2\u3092\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u21d4\u5546\u6750\u30e2\u30c7\u30eb\u9593\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u3067\u306f\n\n\u5e97\u8217\u30e2\u30c7\u30eb shop \u304b\u3089\u7d10\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\u3053\u3068\n\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u3068\u306e\u7d10\u4ed8\u3051\n\u5546\u6750\u30e2\u30c7\u30eb product \u3068\u306e\u7d10\u4ed8\u3051\n\n\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\nuse_food_sub\n\napp/classes/model/usefoodsub.php\n<?php\n/**\n * ORM \u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\n */\nclass Model_Usefoodsub extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'use_food_sub';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\n        ),\n        // \u98df\u6750\u30b3\u30f3\u30c6\u30f3\u30c4id\n        'food_content_id' => array(\n            ...\n        ),\n        // \u5546\u6750id\n        'product_id' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        'use_food_sub' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n            'model_to' => 'Model_Usefood',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u306e\u98df\u6750\u30b3\u30f3\u30c6\u30f3\u30c4id\n            'key_from' => 'food_content_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :id\n            'key_to' => 'id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        ),\n    );\n\n    /**\n     * Has One.\n     *\n     * @var array\n     */\n    protected static $_has_one = array(\n        // \u5546\u6750\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\n        'use_food_sub_product' => array(\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc :\u5546\u6750id\n            'key_from' => 'product_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb  :\u5546\u6750\n            'model_to' => 'Model_Product',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc :id\n            'key_to' => 'id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        )\n    );\n\n\n\n\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u3067\u306f\u3001\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u3068\u540c\u3058\u304f$_has_one \u3092\u4f7f\u3063\u3066\u300c1\u5bfe1\u300d\u306e\u95a2\u4fc2\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u304b\u3089\u7d10\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\u3053\u3068\n\u5546\u6750\u30e2\u30c7\u30eb product \u3068\u306e\u7d10\u4ed8\u3051\n\n\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\nproduct\n\napp/classes/model/product.php\n<?php\n/**\n * ORM \u5546\u6750\u30e2\u30c7\u30eb\n */\nclass Model_Product extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'product';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\n        ),\n        // \u5546\u6750\u8b58\u5225id\n        'code' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u540d\u3000\n        'use_food_product' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n            'model_to' => 'Model_Usefood',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5546\u6750id\n            'key_from' => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u306e\u5546\u6750id\n            'key_to' => 'product_id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        ),\n        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u540d\u3000\n        'use_food_sub_product' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\n            'model_to' => 'Model_Usefoodsub',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5546\u6750id\n            'key_from' => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u306e\u5546\u6750id\n            'key_to' => 'product_id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        ),\n    );\n\n\n\n\u5546\u6750\u30e2\u30c7\u30eb\u3067\u306f\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u30fb\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u304b\u3089\u306e$_belongs_to\u306e\u95a2\u4fc2\u306e\u307f\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067use_food_sub\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\u306f\u3066\u3055\u3066\u547c\u3076\u5074\u306f\u3069\u3046\u306a\u3063\u305f\u304b\u3068\u3044\u3046\u3068\n\napp/classes/comtroller/shop.php\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3001where\u6761\u4ef6\u8a2d\u5b9a\n        $orm_settings = array(\n            'related' => array(\n                // \u5e97\u8217\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3  to\u53d6\u308a\u6271\u3044\u98df\u6750\n                'use_food' => array(\n                    'related' => array(\n                        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n                        // to\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\n                        'use_food_sub' => array(\n                            'related' => array(\n                                // \u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3  to\u5546\u6750\n                               'use_food_sub_product',\n                           ),\n                           // order by \u3082\u6307\u5b9a\u53ef\n                            'order_by' => array(),\n                        ),\n                        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3000to\u5546\u6750\n                        'use_food_product',\n                     ),\n                     // order by \u3082\u6307\u5b9a\u53ef\n                      'order_by' => array(),\n                  ),\n              ),\n             // where\u53e5\n             'where' => array(\n                 array('id', $param['id']),\n             ),\n         );\n\n         // \u30c7\u30fc\u30bf\u53d6\u5f97\n         $shop_data = Model_Shop::find('first', $orm_settings);\n\n\n\n\u6539\u884c\u5165\u308c\u308b\u3068\u975e\u5e38\u306b\u30cd\u30b9\u30c8\u304c\u6df1\u3044\u3067\u3059\u304c\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\norder_by\u3084where\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u3001\u6307\u5b9a\u3059\u308b\u30ab\u30e9\u30e0\u306b\u5bfe\u5fdc\u3059\u308b\u30e2\u30c7\u30eb\u306e\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3068\u540c\u3058\u968e\u5c64\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u3044\u30e2\u30c7\u30eb\u304b\u3089\u306f\u66f4\u306b\u3053\u306e\u30e2\u30c7\u30eb\u304c\u5225\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3067\u7d10\u4ed8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u3072\u3068\u3064\u3072\u3068\u3064\u8ffd\u3063\u3066\u6307\u5b9a\u3057\u3066\u3044\u304d\u3001\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304f\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u306d\u3002\n\u898b\u306b\u304f\u3044\u306e\u3067\u8a2d\u5b9a\u90e8\u5206\u3092\u4e00\u65e6\u5909\u6570\u306b\u53d7\u3051\u3001\u5f8c\u3067find\u3067\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067\u4eca\u56de\u306e\u30c7\u30fc\u30bf\u53d6\u5f97\u306e\u76ee\u7684\u306f\u9054\u6210\u3057\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306e\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u4f8b\u3092\u5373\u5e2d\u3067\u4f5c\u3063\u305f\u70ba\u3001\u308f\u304b\u308a\u3065\u3089\u3044\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u304c\n\u3069\u3093\u306a\u69cb\u9020\u3067\u3042\u308c\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u96e3\u306a\u304f\u30c7\u30fc\u30bf\u53d6\u5f97\u3067\u304d\u308b\u306e\u306f\u826f\u3044\u3067\u3059\u306d\u3002\n\u6b63\u76f4SQL\u3092\u30ac\u30c3\u30c1\u30ea\u66f8\u304d\u305f\u3044\u6d3e\u3067\u3059\u304c\u3002\u3002\n$_many_many\u3082\u4f7f\u3044\u305d\u3053\u306d\u305f\u306e\u3067\u3069\u3053\u304b\u3067\u3002\nFuelPHPer\u306e\u52a9\u3051\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n# FuelPHP\u306eORM\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\n\n\u6700\u8fd1Fuel\u306eORM\u521d\u3081\u3066\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u3001\u81ea\u5206\u306e\u5099\u5fd8\u9332\u3082\u517c\u306d\u3066\u3002\nFuel\u306eORM\u306b\u3064\u3044\u3066\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u30b5\u30a4\u30c8\u3084\u6295\u7a3f\u306f\u305f\u304f\u3055\u3093\u3042\u308a\u307e\u3059\u304c\u3001\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7d30\u304b\u3044\u8a2d\u5b9a\u306a\u3069\u3001\u5b9f\u969b\u306b\u3053\u308c\u8aad\u3093\u3067\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u3059\u308b\u306b\u306f\u307e\u3060\u5145\u5b9f\u3057\u3066\u306a\u3044\u306a\u3042\u301c\u3068\u3044\u3046\u5370\u8c61\u306a\u306e\u3067\u3001\u305d\u306e\u8fba\u3092\u88dc\u3048\u308b\u8a18\u4e8b\u306b\u3057\u307e\u3059\u3002\n~~\u516c\u5f0fdoc\u9685\u3005\u307e\u3067\u898b\u3066\u89e3\u8aad\u3057\u3066\u4f7f\u3048\u3070\u3044\u30fc\u3093\u3060\u3088\u3068\u3044\u3046\u30c4\u30c3\u30b3\u30df\u306f\u3054\u6cd5\u5ea6\uff01\uff01~~\n\n## ORM\u3092\u4f7f\u3046\u306b\u306f\nORM\u306fFuelPHP\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u5185\u306b\u6a19\u6e96\u3067\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\nconfig\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067ORM\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\n```app/config/config.php\n\n     'always_load'  => array(\n\n        /**\n         * These packages are loaded on Fuel's startup.\n         * You can specify them in the following manner:\n         *\n         * array('auth'); // This will assume the packages are in PKGPATH\n         *\n         * // Use this format to specify the path to the package explicitly\n         * array(\n         *     array('auth'    => PKGPATH.'auth/')\n         * );\n         */\n        'packages'  => array(\n            'orm',\n        ),\n```\nalways_load \u5185\u306b\u8a18\u8ff0\u3057\u307e\u3057\u3087\u3046\u3002\n\n## ORM\u306e\u8a2d\u5b9a\n\n* \u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u306b\u4ee5\u4e0b\u306eER\u56f3\u5185\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u56f3\u306e\u4f5c\u6210\u306f MySQLWorkbench(ORACLE MySQL\u516c\u5f0f\u306eGUI\u30c4\u30fc\u30eb) \u306b\u3066\u884c\u3044\u307e\u3057\u305f\u3002\n![er\u56f3.png](https://qiita-image-store.s3.amazonaws.com/0/49828/56fc3bb7-9c26-7363-d75b-d845368af0f9.png)\n\n\u203b\u3042\u304f\u307e\u3067ORM\u3092\u4f7f\u3046\u4e0a\u3067\u306e\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u8a2d\u8a08\u4e0a\u306e\u7d30\u304b\u3044\u3068\u3053\u308d\u306f\u6c17\u306b\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\n\n### Model\u30af\u30e9\u30b9\u306e\u4f5c\u6210\n\n\u305d\u308c\u3067\u306f\u4e0a\u8a18\u306eER\u56f3\u3092\u53c2\u8003\u306b\u3001ORM\u3092\u4f7f\u7528\u3057\u3066\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\u307e\u305a\u305d\u308c\u305e\u308c\u4f7f\u7528\u3059\u308b\u30e2\u30c7\u30eb\u3068ORM\u3092\u95a2\u9023\u4ed8\u3051\u308b\u305f\u3081\u306b\u3001\n<pre>\napp/class/model/\u30e2\u30c7\u30eb\u540d.php\n</pre>\n\u3053\u306e\u3088\u3046\u306bModel\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4f5c\u6210\u5f8c\u3001Model\u30af\u30e9\u30b9\u5185\u3067Orm\\Model\u3092\u62e1\u5f35\u3059\u308b\u304bextends\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bModel\u30af\u30e9\u30b9\u3067\n\n```app/classes/model/shop.php\nuse Orm\\Model\nclass Model_Shop extends Model\n{\n```\n\u540d\u524d\u7a7a\u9593\u3067\u76f4\u63a5\u6307\u5b9a\u3057\u3066\u3084\u308b\u304b\n\n```app/classes/model/shop.php\nclass Model_Shop extends \\Orm\\Model\n{\n```\n\u00a5Orm\u00a5Model\u3092\u62e1\u5f35\u3059\u308b(extends\u3059\u308b)\u8a18\u8ff0\u3092\u66f8\u304d\u307e\u3059\u3002\nModel\u30af\u30e9\u30b9\u306f\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u305f\u3044\u30c6\u30fc\u30d6\u30eb\u306b\u95a2\u9023\u3059\u308b\u3001\u305d\u306e\u30e2\u30c7\u30eb\u306e\u6570\u5206\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3084\u308a\u307e\u3059\u3002\n\u4e0a\u8a18\u306eER\u56f3\u306e\u4f8b\u3060\u3068\u3001use_food_sub \u306e\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u305f\u3044\u5834\u5408\u3001\u305d\u308c\u306b\u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\n\n* model/shop.php\n\n```app/classes/model/shop.php\nclass Model_Shop extends \\Orm\\Model\n{\n```\n\n* model/usefood.php\n\n```app/classes/model/usefood.php\nclass Model_Usefood extends \\Orm\\Model\n{\n```\n\n* model/usefoodsub.php\n\n```app/classes/model/usefoodsub.php\nclass Model_Usefoodsub extends \\Orm\\Model\n{\n```\n\n* model/product.php\n\n```app/classes/model/product.php\nclass Model_Product extends \\Orm\\Model\n{\n```\n\n\u3092\u4f5c\u6210\u3057\u3066\u3084\u308a\u307e\u3059\u3002\n\n### ORM\u306e\u8a2d\u5b9a\n\n\u307e\u305a\u3001\u30e2\u30c7\u30eb\u5185\u306eORM\u306e\u8a2d\u5b9a\u3068\u3057\u3066\n\n* \u30c6\u30fc\u30d6\u30eb\u540d\n* \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n* \u30c6\u30fc\u30d7\u30eb\u5185\u3067\u4f7f\u7528\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\n\n\u3092\u6307\u5b9a\u3057\u3066\u3084\u308a\u307e\u3059\u3002\nshop\u30e2\u30c7\u30eb\u3092\u4f8b\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002\n\n```app/classes/model/shop.php\n<?php\n/**\n * ORM \u5e97\u8217\u30e2\u30c7\u30eb\n */\nclass Model_Shop extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'shop';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            'data_type'  => 'int',\n            'label'      => 'id',\n            'validation' => array(\n                'required',\n                'valid_string' => array(array('numeric')),\n            ),\n            'form'      => array('type' => false),\n        ),\n        // \u5e97\u8217\u30a8\u30ea\u30a2id\n        'area_id' => array(\n            'data_type'  => 'int',\n            'label'      => 'area_id',\n            'validation' => array(\n                'required',\n                'valid_string' => array(array('numeric')),\n            ),\n            'form'      => array('type' => false),\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            'data_type' => 'datetime',\n            'label'     => 'created_at',\n            'form'      => array('type' => false),\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            'data_type' => 'datetime',\n            'label'     => 'updated_at',\n            'form'      => array('type' => false),\n        ),\n    );\n```\nvalidation, form \u306b\u3064\u3044\u3066\u306f\u3001\u30d5\u30a9\u30fc\u30e0\u3092\u81ea\u52d5\u751f\u6210\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u4eca\u56de\u306f\u8aac\u660e\u3092\u5272\u611b\uff09\n\n### \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n\n\u3053\u308c\u304b\u3089\u884c\u3046\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3068\u306f\u3001\n**\u30e2\u30c7\u30eb\u540c\u58eb\u306e\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3046\u3053\u3068\u3067\u3001\u6307\u5b9a\u3055\u308c\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u95a2\u9023\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b**\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\n\u5148\u306e\u5de5\u7a0b\u3067\u3001use_food_sub \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u3001\u307e\u305a\u5404\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\u3001\u30e2\u30c7\u30eb\u5185\u3067\u306eORM\u306e\u8a2d\u5b9a\u3092\u7d42\u3048\u307e\u3057\u305f\u3002\n\u305d\u3057\u3066\u3053\u3053\u304b\u3089\u306f\u305d\u308c\u305e\u308c\u306e\u30e2\u30c7\u30eb\u540c\u58eb\u3092\u95a2\u9023\u4ed8\u3051\u3055\u305b\u308b\u305f\u3081\u306e\u4f5c\u696d\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4eca\u56de\u3084\u308a\u305f\u3044\u3053\u3068\u3068\u3057\u3066 use_food_sub \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u306e\u306b\u3001shop \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53c2\u7167\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nuse_food \u30c6\u30fc\u30d6\u30eb\u306e shop_id \u306b\u306f\u3001shop \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u3067\u3042\u308b id \u304c\u5165\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\n\n* shop.id = use_food.shop_id\n\n\u3068\u3044\u3046\u95a2\u4fc2\u6027\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306eshop\u30c6\u30fc\u30d6\u30eb\u3068use_food\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u4fc2\u6027\u306f\u300c1\u5bfe\u591a\u300d\u3068\u3044\u3046\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30e2\u30c7\u30eb\u9593\u306e\u95a2\u9023\u6027\u306b\u3064\u3044\u3066\u3001FuelPHP\u3067\u306f\u3053\u308c\u3089\u306e\u95a2\u9023\u6027\u306e\u5b9a\u7fa9\u4ed8\u3051\u3092\u3059\u308b\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```php\n$_has_many //1\u5bfe\u591a\n$_belongs_to\u3000// has many \u307e\u305f\u306f has one \u306e\u53cd\u5bfe\u5074\u306e\u5b9a\u7fa9\n$_has_one // 1\u5bfe1\n$_many_many // \u591a\u5bfe\u591a\n```\n\u3053\u306e\u4e2d\u306e `$_has_many` \u3068 `$_belongs_to` \u3092\u4f7f\u3063\u3066\u30e2\u30c7\u30eb\u306e\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3044\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30e2\u30c7\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n```app/classes/model/shop.php\n<?php\n/**\n * ORM \u5e97\u8217\u30e2\u30c7\u30eb\n */\nclass Model_Shop extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'shop';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\u4e0a\u306b\u3042\u308b\u306e\u3067\u7701\u7565...\n        ),\n        // \u5e97\u8217\u30a8\u30ea\u30a2id\n        'area_id' => array(\n            ...\u7701\u7565...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\u7701\u7565...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\u7701\u7565...\n        ),\n    );\n\n   /**\n     * Has Many\n     * @var array\n     */\n    protected static $_has_many = array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3059\u308b\u969b\u306e\u95a2\u4fc2\u6027\u3092\u793a\u3059\u540d\u524d\u3092\u4ed8\u3051\u308b\n        'use_food' => array(\n            // \u7d10\u3065\u3051\u308b\u30e2\u30c7\u30eb  \n            'model_to'       => 'Model_Usefood',\n            // \u3053\u306e\u30e2\u30c7\u30eb\uff08\u5e97\u8217\uff09\u306e\u30ad\u30fc\n            // \u53cd\u5bfe\u5074\u306e\u30e2\u30c7\u30eb\u3068\u306e\u7d50\u5408\u6761\u4ef6\u3068\u306a\u308b\u9805\u76ee\u3092\u793a\u3059\n            'key_from'       => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc\n            // \u53cd\u5bfe\u5074\u306e\u30e2\u30c7\u30eb\u3067\u7d50\u5408\u6761\u4ef6\u3068\u306a\u308b\u9805\u76ee\u3092\u793a\u3059\n            'key_to'         => 'shop_id',\n            // \u95a2\u4fc2\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\n            'cascade_save'   => false,\n            // \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023\u30ec\u30b3\u30fc\u30c9\u304c\u524a\u9664\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u524a\u9664\u3059\u308b\u304b\n            'cascade_delete' => false,\n        ),\n    );\n```\n\n```app/classes/model/usefood.php\n<?php\n/**\n * ORM \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n */\nclass Model_Usefood extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'use_food';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\u7701\u7565...\n        ),\n        // \u5e97\u8217id\n        'shop_id' => array(\n            ...\n        ),\n        // \u98df\u6750id\n        'product_id' => array(\n            ...\n        ),\n        // \u98df\u6750\u540d\n        'name' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u95a2\u4fc2\u6027\u3092\u793a\u3059\u540d\u524d\u3092\u6307\u5b9a\n        'use_food' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u5e97\u8217\n            'model_to' => 'Model_Shop',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5e97\u8217id\n            'key_from' => 'shop_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u5e97\u8217\u30e2\u30c7\u30eb\u306eid\n            'key_to' => 'id',\n            // \u95a2\u4fc2\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\n            'cascade_save' => false,\n            // \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023\u30ec\u30b3\u30fc\u30c9\u304c\u524a\u9664\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u524a\u9664\u3059\u308b\u304b\n            'cascade_delete' => false,\n        ),\n    );\n\n```\n\u3053\u308c\u3067\u5e97\u8217\u30e2\u30c7\u30eb\u3068\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n* \u5e97\u8217\u30e2\u30c7\u30eb shop \u5074\u304b\u3089\u306f\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u3092\u7d10\u4ed8\u3051\u3057\u307e\u3059\u3088\u3068\u3044\u3046\u6307\u5b9a\u3092 `$_has_many` \u3067\u884c\u3044\n* \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u5074\u304b\u3089\u306f\u5e97\u8217\u30e2\u30c7\u30eb shop \u304c\u7d10\u4ed8\u3051\u3089\u308c\u3066\u307e\u3059\u3088\u3068\u3044\u3046\u6307\u5b9a\u3092 `$_belongs_to` \u3067\u884c\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002\n\n### \u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n\n* Controller\u306a\u308a\u4f55\u306a\u308a\u304b\u3089\u30e2\u30c7\u30eb\u3092\u547c\u3093\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\n\n```app/classes/comtroller/shop.php\nclass Controller_Shop extends Controller\n{\n  /**\n   * \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\n   * @return [type] [description]\n   */\n  public function action_index()\n  {\n    $param = Input::get();\n    // \u30c7\u30fc\u30bf\u53d6\u5f97\n    $shop_data = Model_Shop::find('first',  array(\n      'related' => array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u540d\u3092\u6307\u5b9a\n        'use_food'\n      ),\n      'where' => array(\n        array('id', $param['id'])\n      )\n     )\n    );\n  }\n}\n```\nrelated\u306e\u914d\u5217\u3067\u306f\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3092\u3001 where\u306e\u914d\u5217\u3067\u306fSQL\u3067\u306ewhere\u53e5\u306e\u6307\u5b9a\u306b\u3042\u305f\u308b\u7d5e\u308a\u8fbc\u307f\u306e\u6761\u4ef6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068Object\u578b\u306e\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\uff01\n\u57fa\u672c\u7684\u306a\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u304b\u3089\u306e\u30c7\u30fc\u30bf\u53d6\u5f97\u306f\u4ee5\u4e0a\u306e\u65b9\u6cd5\u3067\u3067\u304d\u307e\u3059\u3002\n\n## \u66f4\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3092\u3057\u3066\u30c7\u30fc\u30bf\u53d6\u5f97\u3057\u3066\u307f\u3088\u3046\n\n>\u4eca\u56de\u3084\u308a\u305f\u3044\u3053\u3068\u3068\u3057\u3066 use_food_sub \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u306e\u306b\u3001\n\n\u3053\u3053\u307e\u3067\u3067\u3072\u3068\u307e\u305a\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\uff06\u30c7\u30fc\u30bf\u53d6\u5f97\u306f\u3067\u304d\u307e\u3057\u305f\u304c\nuse_food_sub\u304b\u3089\u6700\u7d42\u7684\u306b\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304d\u305f\u3044\u306e\u3067\u3001\u3082\u3046\u3061\u3087\u3044\u304c\u3063\u3064\u308a\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3059\u3002\n\u89e3\u8aac\u3092\u5165\u308c\u306a\u304c\u3089\u8a2d\u5b9a\u4f8b\u3092\u66f8\u304d\u307e\u3059\u3002\n\n\u5e97\u8217\u30e2\u30c7\u30eb\u306f\u4e0a\u3067\u8a2d\u5b9a\u3057\u305f\u901a\u308a\u306a\u306e\u3067\u7701\u304d\u307e\u3059\n\n**use_food**\n\n```app/classes/model/usefood.php\n<?php\n/**\n * ORM \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n */\nclass Model_Usefood extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'use_food';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\u7701\u7565...\n        ),\n        // \u5e97\u8217id\n        'shop_id' => array(\n            ...\n        ),\n        // \u98df\u6750id\n        'product_id' => array(\n            ...\n        ),\n        // \u98df\u6750\u540d\n        'name' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u95a2\u4fc2\u6027\u3092\u793a\u3059\u540d\u524d\u3092\u6307\u5b9a\n        'use_food' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u5e97\u8217\n            'model_to' => 'Model_Shop',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5e97\u8217id\n            'key_from' => 'shop_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u5e97\u8217\u30e2\u30c7\u30eb\u306eid\n            'key_to' => 'id',\n            // \u95a2\u4fc2\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\n            'cascade_save' => false,\n            // \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u95a2\u9023\u30ec\u30b3\u30fc\u30c9\u304c\u524a\u9664\u3055\u308c\u308b\u3068\u304d\u306b\u540c\u6642\u306b\u524a\u9664\u3059\u308b\u304b\n            'cascade_delete' => false,\n        ),\n    );\n\n    /**\n     * Has Many.\n     *\n     * @var array\n     */\n    protected static $_has_many = array(\n        'use_food_sub' => array(\n            // \u7d10\u3065\u3051\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\n            'model_to' => 'Model_Usefoodsub',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u306eid\n            'key_from' => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc\u3000:\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u306e\u98df\u6750\u30b3\u30f3\u30c6\u30f3\u30c4id\n            'key_to' => 'food_content_id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        )\n    );\n\n    /**\n     * Has One.\n     * @var array\n     */\n    protected static $_has_one = array(\n        // \u5546\u6750\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\n        'use_food_product' => array(\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc :\u5546\u6750id\n            'key_from' => 'product_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb  :\u5546\u6750\n            'model_to' => 'Model_Product',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc :id\n            'key_to' => 'id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        )\n    );\n\n```\n\n `$_has_one` \u3092\u4f7f\u3063\u3066\u300c1\u5bfe1\u300d\u306e\u95a2\u4fc2\u3092\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u21d4\u5546\u6750\u30e2\u30c7\u30eb\u9593\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u3067\u306f\n\n * \u5e97\u8217\u30e2\u30c7\u30eb shop \u304b\u3089\u7d10\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\u3053\u3068\n * \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u3068\u306e\u7d10\u4ed8\u3051\n * \u5546\u6750\u30e2\u30c7\u30eb product \u3068\u306e\u7d10\u4ed8\u3051\n \n\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n**use_food_sub**\n\n```app/classes/model/usefoodsub.php\n<?php\n/**\n * ORM \u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\n */\nclass Model_Usefoodsub extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'use_food_sub';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\n        ),\n        // \u98df\u6750\u30b3\u30f3\u30c6\u30f3\u30c4id\n        'food_content_id' => array(\n            ...\n        ),\n        // \u5546\u6750id\n        'product_id' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        'use_food_sub' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n            'model_to' => 'Model_Usefood',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u306e\u98df\u6750\u30b3\u30f3\u30c6\u30f3\u30c4id\n            'key_from' => 'food_content_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :id\n            'key_to' => 'id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        ),\n    );\n\n    /**\n     * Has One.\n     *\n     * @var array\n     */\n    protected static $_has_one = array(\n        // \u5546\u6750\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\n        'use_food_sub_product' => array(\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc :\u5546\u6750id\n            'key_from' => 'product_id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb  :\u5546\u6750\n            'model_to' => 'Model_Product',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc :id\n            'key_to' => 'id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        )\n    );\n\n```\n\n\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u3067\u306f\u3001\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u3068\u540c\u3058\u304f`$_has_one` \u3092\u4f7f\u3063\u3066\u300c1\u5bfe1\u300d\u306e\u95a2\u4fc2\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n * \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb use_food \u304b\u3089\u7d10\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\u3053\u3068\n * \u5546\u6750\u30e2\u30c7\u30eb product \u3068\u306e\u7d10\u4ed8\u3051\n \n\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n\n**product**\n\n```app/classes/model/product.php\n<?php\n/**\n * ORM \u5546\u6750\u30e2\u30c7\u30eb\n */\nclass Model_Product extends \\Orm\\Model\n{\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u540d\n     * @var string\n     */\n    protected static $_table_name = 'product';\n\n    /**\n     * \u30c6\u30fc\u30d6\u30eb\u306e\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\n     * @var array\n     */\n    protected static $_primary_key = array('id');\n\n    /**\n     * \u30d7\u30ed\u30d1\u30c6\u30a3\n     * @var array\n     */\n    protected static $_properties = array(\n        'id' => array(\n            ...\n        ),\n        // \u5546\u6750\u8b58\u5225id\n        'code' => array(\n            ...\n        ),\n        // \u4f5c\u6210\u65e5\u6642\n        'created_at'          => array(\n            ...\n        ),\n        // \u66f4\u65b0\u65e5\u6642\n        'updated_at'          => array(\n            ...\n        ),\n    );\n\n    /**\n     * Belongs To.\n     *\n     * @var array\n     */\n    protected static $_belongs_to = array(\n        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u540d\u3000\n        'use_food_product' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\n            'model_to' => 'Model_Usefood',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5546\u6750id\n            'key_from' => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u306e\u5546\u6750id\n            'key_to' => 'product_id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        ),\n        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u540d\u3000\n        'use_food_sub_product' => array(\n            // \u7d10\u4ed8\u3051\u3089\u308c\u308b\u30e2\u30c7\u30eb  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\n            'model_to' => 'Model_Usefoodsub',\n            // \u3053\u306e\u30e2\u30c7\u30eb\u306e\u30ad\u30fc  :\u5546\u6750id\n            'key_from' => 'id',\n            // \u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u3067\u306e\u30ad\u30fc  :\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u306e\u5546\u6750id\n            'key_to' => 'product_id',\n            'cascade_save' => false,\n            'cascade_delete' => false,\n        ),\n    );\n\n```\n\n\u5546\u6750\u30e2\u30c7\u30eb\u3067\u306f\u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u30fb\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u30e2\u30c7\u30eb\u304b\u3089\u306e`$_belongs_to`\u306e\u95a2\u4fc2\u306e\u307f\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067use_food_sub\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u306f\u3066\u3055\u3066\u547c\u3076\u5074\u306f\u3069\u3046\u306a\u3063\u305f\u304b\u3068\u3044\u3046\u3068\n\n```app/classes/comtroller/shop.php\n        // \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3001where\u6761\u4ef6\u8a2d\u5b9a\n        $orm_settings = array(\n            'related' => array(\n                // \u5e97\u8217\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3  to\u53d6\u308a\u6271\u3044\u98df\u6750\n                'use_food' => array(\n                    'related' => array(\n                        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\n                        // to\u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\n                        'use_food_sub' => array(\n                            'related' => array(\n                                // \u53d6\u308a\u6271\u3044\u98df\u6750\u30b5\u30d6\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3  to\u5546\u6750\n                               'use_food_sub_product',\n                           ),\n                           // order by \u3082\u6307\u5b9a\u53ef\n                            'order_by' => array(),\n                        ),\n                        // \u53d6\u308a\u6271\u3044\u98df\u6750\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3000to\u5546\u6750\n                        'use_food_product',\n                     ),\n                     // order by \u3082\u6307\u5b9a\u53ef\n                      'order_by' => array(),\n                  ),\n              ),\n             // where\u53e5\n             'where' => array(\n                 array('id', $param['id']),\n             ),\n         );\n\n         // \u30c7\u30fc\u30bf\u53d6\u5f97\n         $shop_data = Model_Shop::find('first', $orm_settings);\n            \n```\n\n\u6539\u884c\u5165\u308c\u308b\u3068\u975e\u5e38\u306b\u30cd\u30b9\u30c8\u304c\u6df1\u3044\u3067\u3059\u304c\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\norder_by\u3084where\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u3001\u6307\u5b9a\u3059\u308b\u30ab\u30e9\u30e0\u306b\u5bfe\u5fdc\u3059\u308b\u30e2\u30c7\u30eb\u306e\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3068\u540c\u3058\u968e\u5c64\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u3044\u30e2\u30c7\u30eb\u304b\u3089\u306f\u66f4\u306b\u3053\u306e\u30e2\u30c7\u30eb\u304c\u5225\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3067\u7d10\u4ed8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u3072\u3068\u3064\u3072\u3068\u3064\u8ffd\u3063\u3066\u6307\u5b9a\u3057\u3066\u3044\u304d\u3001\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304f\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u306d\u3002\n\u898b\u306b\u304f\u3044\u306e\u3067\u8a2d\u5b9a\u90e8\u5206\u3092\u4e00\u65e6\u5909\u6570\u306b\u53d7\u3051\u3001\u5f8c\u3067find\u3067\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u3067\u4eca\u56de\u306e\u30c7\u30fc\u30bf\u53d6\u5f97\u306e\u76ee\u7684\u306f\u9054\u6210\u3057\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306e\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u4f8b\u3092\u5373\u5e2d\u3067\u4f5c\u3063\u305f\u70ba\u3001\u308f\u304b\u308a\u3065\u3089\u3044\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u304c\n\u3069\u3093\u306a\u69cb\u9020\u3067\u3042\u308c\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u96e3\u306a\u304f\u30c7\u30fc\u30bf\u53d6\u5f97\u3067\u304d\u308b\u306e\u306f\u826f\u3044\u3067\u3059\u306d\u3002\n\u6b63\u76f4SQL\u3092\u30ac\u30c3\u30c1\u30ea\u66f8\u304d\u305f\u3044\u6d3e\u3067\u3059\u304c\u3002\u3002\n\n`$_many_many`\u3082\u4f7f\u3044\u305d\u3053\u306d\u305f\u306e\u3067\u3069\u3053\u304b\u3067\u3002\nFuelPHPer\u306e\u52a9\u3051\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n", "tags": ["FuelPHP", "ORM", "PHP"]}