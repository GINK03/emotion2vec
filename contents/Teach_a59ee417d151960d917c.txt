{"context": "\n\n\u624b\u9806\n\n\u9069\u5f53\u306a\u5024\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u66f8\u304d\u8fbc\u3080\n\u5024\u306e\u5909\u5316\u3092\u53d6\u5f97\u3057\u305f\u3044\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\n\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3059\u308b\n\u5024\u3092\u5909\u66f4\u3059\u308b\nSnapshot\u3067\u73fe\u5728\u306e\u72b6\u614b\u3092\u53d6\u5f97\n\n\u624b\u98061\u306f\u3042\u3089\u304b\u3058\u3081\u6e08\u307e\u305b\u3066\u304a\u304f\uff0e\n\u624b\u98064\u306f\u624b\u52d5\u3067\u5909\u66f4\u3057\u305f\n\n\u30b9\u30af\u30ea\u30d7\u30c8\n// \u7565\nusing Firebase;\nusing Firebase.Unity.Editor;\nusing Firebase.Database;\n\npublic class FirebaseManager : SingletonMonoBehaviour<FirebaseManager> {\n\n    private DatabaseReference _databaseReference;\n    public static readonly int userId = 1001;\n\n\n    void Start(){\n        Init ();\n    }\n\n    void Init(){\n        FirebaseApp.DefaultInstance.SetEditorDatabaseUrl (\"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306eURL\");\n        _databaseReference = FirebaseDatabase.DefaultInstance.RootReference;\n\n        // \u624b\u98063\u3000Start\u3067\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n        // \u3053\u306e\u6642\u70b9\u3067\uff0c\u4e00\u5ea6\u73fe\u5728\u306e\u72b6\u614b\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\uff0e\n        // \u3053\u306e\u30bd\u30fc\u30b9\u3060\u3068\uff0cDebug.Log\u3067\u72b6\u614b\u304c\u51fa\u529b\u3055\u308c\u308b\uff0e\n        SubscriveUndertakingQuestEvent();\n    }\n\n    // \u624b\u98062\u3000\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u53d6\u5f97\n    // \u66f8\u304d\u8fbc\u307f\u7b49\u3067\u4f55\u56de\u3082\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3067\uff0c\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306b\u3057\u305f\uff0e\n    public DatabaseReference UndertakingQuestReference{\n        get{\n            return _databaseReference.Child (\"users\") \n                .Child (userId.ToString ())\n                .Child (\"UndertakingQuest\");\n            }\n    }\n\n    // \u624b\u98063 \u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n    // Rx\u306eSubscribe\u3068\u3084\u3063\u3066\u308b\u3053\u3068\u306f\u4f3c\u3066\u308b\n    // \u30c6\u30b9\u30c8\u7528\u306e\u95a2\u6570\u3092\u7528\u610f\n    public void SubscribeUndertakingQuestEvent(){\n        UndertakingQuestReference.ValueChanged += (object sender, ValueChangedEventArgs args) =>{\n            if(args.DatabaseError != null){\n                Debug.LogError(args.DatabaseError.Message);\n                return;\n            }\n            // \u624b\u98065 Snapshot\u3092json\u306b\u3057\u3066\uff0cDebug\n            string json = args.Snapshot.GetRawJsonValue();\n            Debug.Log(json);\n        };\n    }\n// \u7565\n\n}\n\n\n\n\n# \u624b\u9806\n1. \u9069\u5f53\u306a\u5024\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u66f8\u304d\u8fbc\u3080\n2. \u5024\u306e\u5909\u5316\u3092\u53d6\u5f97\u3057\u305f\u3044\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\n3. \u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3059\u308b\n4. \u5024\u3092\u5909\u66f4\u3059\u308b\n5. Snapshot\u3067\u73fe\u5728\u306e\u72b6\u614b\u3092\u53d6\u5f97\n\n\n\u624b\u98061\u306f\u3042\u3089\u304b\u3058\u3081\u6e08\u307e\u305b\u3066\u304a\u304f\uff0e\n\n\u624b\u98064\u306f\u624b\u52d5\u3067\u5909\u66f4\u3057\u305f\n\n# \u30b9\u30af\u30ea\u30d7\u30c8\n\n```\n// \u7565\nusing Firebase;\nusing Firebase.Unity.Editor;\nusing Firebase.Database;\n\npublic class FirebaseManager : SingletonMonoBehaviour<FirebaseManager> {\n\n\tprivate DatabaseReference _databaseReference;\n\tpublic static readonly int userId = 1001;\n\n\n\tvoid Start(){\n\t\tInit ();\n\t}\n\n\tvoid Init(){\n\t\tFirebaseApp.DefaultInstance.SetEditorDatabaseUrl (\"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306eURL\");\n\t\t_databaseReference = FirebaseDatabase.DefaultInstance.RootReference;\n\t\t\n\t\t// \u624b\u98063\u3000Start\u3067\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n\t\t// \u3053\u306e\u6642\u70b9\u3067\uff0c\u4e00\u5ea6\u73fe\u5728\u306e\u72b6\u614b\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\uff0e\n\t\t// \u3053\u306e\u30bd\u30fc\u30b9\u3060\u3068\uff0cDebug.Log\u3067\u72b6\u614b\u304c\u51fa\u529b\u3055\u308c\u308b\uff0e\n\t\tSubscriveUndertakingQuestEvent();\n\t}\n\t\n\t// \u624b\u98062\u3000\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u53d6\u5f97\n\t// \u66f8\u304d\u8fbc\u307f\u7b49\u3067\u4f55\u56de\u3082\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3067\uff0c\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306b\u3057\u305f\uff0e\n\tpublic DatabaseReference UndertakingQuestReference{\n\t\tget{\n\t\t\treturn _databaseReference.Child (\"users\") \n\t\t\t\t.Child (userId.ToString ())\n\t\t\t\t.Child (\"UndertakingQuest\");\n\t\t\t}\n\t}\n\n\t// \u624b\u98063 \u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n\t// Rx\u306eSubscribe\u3068\u3084\u3063\u3066\u308b\u3053\u3068\u306f\u4f3c\u3066\u308b\n\t// \u30c6\u30b9\u30c8\u7528\u306e\u95a2\u6570\u3092\u7528\u610f\n\tpublic void SubscribeUndertakingQuestEvent(){\n\t\tUndertakingQuestReference.ValueChanged += (object sender, ValueChangedEventArgs args) =>{\n\t\t\tif(args.DatabaseError != null){\n\t\t\t\tDebug.LogError(args.DatabaseError.Message);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// \u624b\u98065 Snapshot\u3092json\u306b\u3057\u3066\uff0cDebug\n\t\t\tstring json = args.Snapshot.GetRawJsonValue();\n\t\t\tDebug.Log(json);\n\t\t};\n\t}\n// \u7565\n\n}\n\n\n```\n", "tags": ["Unity", "Firebase"]}