{"context": " More than 1 year has passed since last update.Win32API\u306eLCMapString\u306f\u3042\u308b\u6587\u5b57\u5217\u3092\u30ed\u30b1\u30fc\u30eb\u4f9d\u5b58\u306a\u5225\u306e\u6587\u5b57\u5217\u306b\u30de\u30c3\u30d4\u30f3\u30b0\uff08\u5909\u63db\uff09\u3057\u3066\u304f\u308c\u308b\u95a2\u6570\u3002\uff08\u5168\u89d2\u3072\u3089\u304c\u306a\u2192\u534a\u89d2\u30ab\u30bf\u30ab\u30ca\u3068\u304b\uff09\nMSDN\u30da\u30fc\u30b8\u306elpDestStr(\u5909\u63db\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u683c\u7d0d\u3059\u308b\u30d0\u30c3\u30d5\u30a1)\u306e\u89e3\u8aac\u306b\u306f\n\ncchSrc \u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u6e21\u3059\u5024\u306b\u304b\u304b\u308f\u3089\u305a\u3001\u4e26\u3073\u66ff\u3048\u30ad\u30fc\u306e\u6700\u5f8c\u306b\u306f NULL \u304c\u4ed8\u3051\u3089\u308c\u307e\u3059\u3002\n\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3069\u3046\u3082cchSrc\u306b-1\u4ee5\u5916\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u7d42\u7aef\u6587\u5b57\u304c\u4ed8\u52a0\u3055\u308c\u306a\u3044\u6a21\u69d8\u3002\n\nstd::wstring wstrSrc(L\"\u304d\u3087\u3046\u306f\u3044\u3044\u3066\u3093\u304d\u3067\u3059\");\nstd::unique_ptr<WCHAR[]> wzDest(new WCHAR[64]);\n\nint iRet = \n    LCMapString(0x0411, LCMAP_KATAKANA, wstrSrc.c_str(), -1, wzDest.get(), 64);\n\n\u306f\u30ad\u30e7\u30a6\u30cf\u30a4\u30a4\u30c6\u30f3\u30ad\u30c7\u30b9\u3092\u3061\u3083\u3093\u3068\u7d42\u7aef\u3057\u3066\u8fd4\u3057\u3066\u304f\u308c\u307e\u3059\u304c\u3001\nstd::wstring wstrSrc(L\"\u304d\u3087\u3046\u306f\u3044\u3044\u3066\u3093\u304d\u3067\u3059\");\nstd::unique_ptr<WCHAR[]> wzDest(new WCHAR[64]);\n\nint iRet = \n    LCMapString(0x0411, LCMAP_KATAKANA, wstrSrc.c_str(), wstrSrc.length(), wzDest.get(), 64);\n\n\u306fwzDest\u304c\u7d42\u7aef\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u623b\u308a\u5024\u3092\u898b\u3066\u7d42\u7aef\u3057\u307e\u3057\u3087\u3046\u3002\nwzDest[iRet] = L'\\0';\n\nWin32API\u306eLCMapString\u306f\u3042\u308b\u6587\u5b57\u5217\u3092\u30ed\u30b1\u30fc\u30eb\u4f9d\u5b58\u306a\u5225\u306e\u6587\u5b57\u5217\u306b\u30de\u30c3\u30d4\u30f3\u30b0\uff08\u5909\u63db\uff09\u3057\u3066\u304f\u308c\u308b\u95a2\u6570\u3002\uff08\u5168\u89d2\u3072\u3089\u304c\u306a\u2192\u534a\u89d2\u30ab\u30bf\u30ab\u30ca\u3068\u304b\uff09\n\n[MSDN\u30da\u30fc\u30b8](http://msdn.microsoft.com/ja-jp/library/cc448052.aspx)\u306elpDestStr(\u5909\u63db\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u683c\u7d0d\u3059\u308b\u30d0\u30c3\u30d5\u30a1)\u306e\u89e3\u8aac\u306b\u306f\n> cchSrc \u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u6e21\u3059\u5024\u306b\u304b\u304b\u308f\u3089\u305a\u3001\u4e26\u3073\u66ff\u3048\u30ad\u30fc\u306e\u6700\u5f8c\u306b\u306f NULL \u304c\u4ed8\u3051\u3089\u308c\u307e\u3059\u3002\n\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u304c\u3069\u3046\u3082**cchSrc\u306b-1\u4ee5\u5916\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u7d42\u7aef\u6587\u5b57\u304c\u4ed8\u52a0\u3055\u308c\u306a\u3044**\u6a21\u69d8\u3002\n\n```cpp\nstd::wstring wstrSrc(L\"\u304d\u3087\u3046\u306f\u3044\u3044\u3066\u3093\u304d\u3067\u3059\");\nstd::unique_ptr<WCHAR[]> wzDest(new WCHAR[64]);\n\nint iRet = \n    LCMapString(0x0411, LCMAP_KATAKANA, wstrSrc.c_str(), -1, wzDest.get(), 64);\n```\n\n\u306f`\u30ad\u30e7\u30a6\u30cf\u30a4\u30a4\u30c6\u30f3\u30ad\u30c7\u30b9`\u3092\u3061\u3083\u3093\u3068\u7d42\u7aef\u3057\u3066\u8fd4\u3057\u3066\u304f\u308c\u307e\u3059\u304c\u3001\n\n```cpp\nstd::wstring wstrSrc(L\"\u304d\u3087\u3046\u306f\u3044\u3044\u3066\u3093\u304d\u3067\u3059\");\nstd::unique_ptr<WCHAR[]> wzDest(new WCHAR[64]);\n\nint iRet = \n    LCMapString(0x0411, LCMAP_KATAKANA, wstrSrc.c_str(), wstrSrc.length(), wzDest.get(), 64);\n```\n\n\u306f`wzDest`\u304c\u7d42\u7aef\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u623b\u308a\u5024\u3092\u898b\u3066\u7d42\u7aef\u3057\u307e\u3057\u3087\u3046\u3002\n\n```cpp\nwzDest[iRet] = L'\\0';\n```\n\n", "tags": ["Win32API"]}