{"context": " More than 1 year has passed since last update.\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u7b2c\u4e09\u56de\u306e\u53c2\u8003\u554f\u984c\nhttp://qiita.com/items/ebd8a56b41711ba459f9\n\u2026\u306egroovy\u3067\u306e\u56de\u7b54\u4f8b\nhttps://gist.github.com/3381668\n\u2026\u3092Lua\u306b\u7ffb\u8a33\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nBaseball = \n{\n    s = function(self)\n        self.strike = self.strike + 1\n        if 2 < self.strike then\n            self.strike = 0\n            self:o()\n        end\n    end,\n\n    b = function(self)\n        self.ball = self.ball + 1\n        if 3 < self.ball then\n            self:h()\n        end\n    end,\n\n    o = function(self)\n        self.out = self.out + 1\n        if 2 < self.out then\n            self.strike = 0\n            self.ball   = 0\n            self.out    = 0\n        end\n    end,\n\n    f = function(self)\n        if self.strike < 2 then\n            self:s()\n        end\n    end,\n\n    h = function(self)\n        self.strike = 0\n        self.ball   = 0\n    end,\n\n    p = function(self)\n        self:h()\n        self:o()\n    end,\n\n    resolve = function(self, it)\n        self.strike = 0\n        self.ball   = 0\n        self.out    = 0\n        local result = \"\"\n        for i = 1, #it do\n            self[it:sub(i, i)](self)\n            result = result .. \",\" .. self.out .. self.strike .. self.ball\n        end\n        return result:sub(2)\n    end\n}\n\ntest =\n{\n    [\"sss\"] = \"010,020,100\",\n    [\"bbbb\"] = \"001,002,003,000\",\n    [\"ssbbbb\"] = \"010,020,021,022,023,000\",\n    [\"hsbhfhbh\"] = \"000,010,011,000,010,000,001,000\",\n    [\"psbpfpbp\"] = \"100,110,111,200,210,000,001,100\",\n    [\"ppp\"] = \"100,200,000\",\n    [\"ffffs\"] = \"010,020,020,020,100\",\n    [\"ssspfffs\"] = \"010,020,100,200,210,220,220,000\",\n    [\"bbbsfbppp\"] = \"001,002,003,013,023,000,100,200,000\",\n    [\"sssbbbbsbhsbppp\"] = \"010,020,100,101,102,103,100,110,111,100,110,111,200,000,100\",\n    [\"ssffpffssp\"] = \"010,020,020,020,100,110,120,200,210,000\"\n}\n\nfor k, v in pairs(test) do\n  local r = Baseball:resolve(k)\n  print(\"source   = \" .. k)\n  print(\"expected = \" .. v)\n  print(\"actual   = \" .. r)\n  print(r == v)\n  print()\nend\n\n\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u7b2c\u4e09\u56de\u306e\u53c2\u8003\u554f\u984c\nhttp://qiita.com/items/ebd8a56b41711ba459f9\n\n\u2026\u306egroovy\u3067\u306e\u56de\u7b54\u4f8b\nhttps://gist.github.com/3381668\n\n\u2026\u3092Lua\u306b\u7ffb\u8a33\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```lua:\nBaseball = \n{\n    s = function(self)\n        self.strike = self.strike + 1\n        if 2 < self.strike then\n            self.strike = 0\n            self:o()\n        end\n    end,\n\n    b = function(self)\n        self.ball = self.ball + 1\n        if 3 < self.ball then\n            self:h()\n        end\n    end,\n\n    o = function(self)\n        self.out = self.out + 1\n        if 2 < self.out then\n            self.strike = 0\n            self.ball   = 0\n            self.out    = 0\n        end\n    end,\n\n    f = function(self)\n        if self.strike < 2 then\n            self:s()\n        end\n    end,\n\n    h = function(self)\n        self.strike = 0\n        self.ball   = 0\n    end,\n\n    p = function(self)\n        self:h()\n        self:o()\n    end,\n\n    resolve = function(self, it)\n        self.strike = 0\n        self.ball   = 0\n        self.out    = 0\n        local result = \"\"\n        for i = 1, #it do\n            self[it:sub(i, i)](self)\n            result = result .. \",\" .. self.out .. self.strike .. self.ball\n        end\n        return result:sub(2)\n    end\n}\n\ntest =\n{\n    [\"sss\"] = \"010,020,100\",\n    [\"bbbb\"] = \"001,002,003,000\",\n    [\"ssbbbb\"] = \"010,020,021,022,023,000\",\n    [\"hsbhfhbh\"] = \"000,010,011,000,010,000,001,000\",\n    [\"psbpfpbp\"] = \"100,110,111,200,210,000,001,100\",\n    [\"ppp\"] = \"100,200,000\",\n    [\"ffffs\"] = \"010,020,020,020,100\",\n    [\"ssspfffs\"] = \"010,020,100,200,210,220,220,000\",\n    [\"bbbsfbppp\"] = \"001,002,003,013,023,000,100,200,000\",\n    [\"sssbbbbsbhsbppp\"] = \"010,020,100,101,102,103,100,110,111,100,110,111,200,000,100\",\n    [\"ssffpffssp\"] = \"010,020,020,020,100,110,120,200,210,000\"\n}\n\nfor k, v in pairs(test) do\n  local r = Baseball:resolve(k)\n  print(\"source   = \" .. k)\n  print(\"expected = \" .. v)\n  print(\"actual   = \" .. r)\n  print(r == v)\n  print()\nend\n```", "tags": ["\u3069\u3046\u66f8\u304f", "Lua"]}