{"context": "\n\nAlamofire 4.0 \u3067 HTTP POST \u3059\u308b\n\u30b0\u30b0\u3063\u3066\u51fa\u3066\u304f\u308b Alamofire \u306e\u30b3\u30fc\u30c9\u306f\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u3082\u306e\u304c\u591a\u304f\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\nAlamofire 4.0 \u3067\u306e HTTP POST\u306e\u3084\u308a\u65b9\u3092\u6574\u7406\u3057\u307e\u3057\u305f\n\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u304c\u7c21\u5358\u3067\u3081\u3063\u3061\u3083\u4f7f\u3044\u3084\u3059\u3044\u3067\u3059\n\nJSON \u3092 POST \u3067\u9001\u4fe1\n\u3053\u306e\u4f8b\u3067\u306f\u30ec\u30b9\u30dd\u30f3\u30b9\u3092Json\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u53d7\u3051\u53d6\u308b\u305f\u3081\u306b.responseJSON \u3092\u30ec\u30b9\u30dd\u30f3\u30b9\u30cf\u30f3\u30c9\u30e9\u30fc\u306b\u3057\u3066\u307e\u3059\n\nJSON\u3092POST\u3059\u308b\u30b5\u30f3\u30d7\u30eb\nlet url = \"http://hoge/fuga\"\nlet headers: HTTPHeaders = [\n    \"name\": \"value\"\n]\nlet parameters: Parameters = [\n    \"str_param\": \"str value\",\n    \"num_param\": 0,\n    \"nested\": [\n        \"nested_param\": \"value\"\n    ]\n]\n\nAlamofire.request(url,\n                  method: .post,\n                  parameters: parameters,\n                  encoding: JSONEncoding.default,\n                  headers: headers)\n    .authenticate(user: \"user\", password: \"password\")\n    .responseJSON { response in\n\n        if\n            let json = response.result.value as? [String: Any],\n            let prop1 = json[\"prop1\"] as? String\n        {\n            debugPrint(prop1)\n        }\n\n        debugPrint(response)\n}\n\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u6587\u5b57\u5217\u3067\u53d7\u3051\u53d6\u308a\u305f\u3044\u6642\u306f\u3001.responseString\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u53d7\u3051\u53d6\u308a\u305f\u3044\u578b\u306b\u5fdc\u3058\u3066\u30cf\u30f3\u30c9\u30e9\u30fc\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\nhttps://github.com/Alamofire/Alamofire#response-handling\n\u8907\u6570\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30cf\u30f3\u30c9\u30e9\u30fc\u3092\u30c1\u30a7\u30fc\u30f3\u3055\u305b\u3066\u4f7f\u3046\u3053\u3068\u3082\u3067\u304d\u307e\u3059\nhttps://github.com/Alamofire/Alamofire#chained-response-handlers\n\n\u30d5\u30a1\u30a4\u30eb\u3092 multipart/form-data \u3067 POST\nupload \u3092\u4f7f\u3063\u305f\u5834\u5408\u306f\u3001request \u3068\u9055\u3063\u3066\u9001\u4fe1\u9014\u4e2d\u306e progress \u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\n\u305d\u308c\u4ee5\u5916\u306f request \u3068\u307b\u307c\u540c\u3058\u3067\u3059\n\u30d9\u30fc\u30b9\u306fJSON\u3092POST\u3059\u308b\u6642\u3068\u4f3c\u305f\u611f\u3058\u3067\u3059\u304c\u3001\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u51e6\u7406\u306e\u524d\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u7d50\u679c\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u53d7\u3051\u53d6\u308b\u51e6\u7406\u3092\u631f\u3080\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u521d\u3081\u3066\u3060\u3068\u3061\u3087\u3063\u3068\u3060\u3051\u308f\u304b\u308a\u306b\u304f\u3044\u3067\u3059\n\nmultipart/form-data\u3067\u30d5\u30a1\u30a4\u30eb\u3092POST\u3059\u308b\u30b5\u30f3\u30d7\u30eb\nlet fileContent = \"file content as string\"\nlet url = \"http://hoge/fuga\"\nlet headers: HTTPHeaders = [\n    \"name\": \"value\"\n]\n\nAlamofire.upload(\n    multipartFormData: { (multipartFormData) in\n        multipartFormData.append(fileContent.data(using: String.Encoding.utf8)!,\n                                     withName: \"param_name\",\n                                     fileName: \"filename\",\n                                     mimeType: \"multipart/form-data\")},\n    to: url,\n    headers: headers,\n    encodingCompletion: { encodingResult in\n        // file \u3092\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u5f8c\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\n        switch encodingResult {\n        case .success(let upload, _, _):\n            // upload \u306f request \u306e\u623b\u308a\u5024\u306e DataRequest \u3092\u7d99\u627f\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u3067\n            // request \u3068\u540c\u69d8\u306b\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u3044\u9805\u76ee\u306f\u3053\u306e\u4e2d\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\n            upload\n            .authenticate(user: \"user\", password: \"password\")\n            .uploadProgress(closure: { (progress) in\n                print(\"Upload Progress: \\(progress.fractionCompleted)\")\n            })\n            .responseString { response in\n                debugPrint(response)\n            }\n        case .failure(let encodingError):\n            print(encodingError)\n        }\n    }\n)\n\n\n\n# Alamofire 4.0 \u3067 HTTP POST \u3059\u308b\n\n\u30b0\u30b0\u3063\u3066\u51fa\u3066\u304f\u308b Alamofire \u306e\u30b3\u30fc\u30c9\u306f\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u3082\u306e\u304c\u591a\u304f\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\nAlamofire 4.0 \u3067\u306e HTTP POST\u306e\u3084\u308a\u65b9\u3092\u6574\u7406\u3057\u307e\u3057\u305f\n\n\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u304c\u7c21\u5358\u3067\u3081\u3063\u3061\u3083\u4f7f\u3044\u3084\u3059\u3044\u3067\u3059\n\n## JSON \u3092 POST \u3067\u9001\u4fe1\n\n\u3053\u306e\u4f8b\u3067\u306f\u30ec\u30b9\u30dd\u30f3\u30b9\u3092Json\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u53d7\u3051\u53d6\u308b\u305f\u3081\u306b.responseJSON \u3092\u30ec\u30b9\u30dd\u30f3\u30b9\u30cf\u30f3\u30c9\u30e9\u30fc\u306b\u3057\u3066\u307e\u3059\n\n```swift:JSON\u3092POST\u3059\u308b\u30b5\u30f3\u30d7\u30eb\nlet url = \"http://hoge/fuga\"\nlet headers: HTTPHeaders = [\n    \"name\": \"value\"\n]\nlet parameters: Parameters = [\n    \"str_param\": \"str value\",\n    \"num_param\": 0,\n    \"nested\": [\n        \"nested_param\": \"value\"\n    ]\n]\n\nAlamofire.request(url,\n                  method: .post,\n                  parameters: parameters,\n                  encoding: JSONEncoding.default,\n                  headers: headers)\n    .authenticate(user: \"user\", password: \"password\")\n    .responseJSON { response in\n        \n        if\n            let json = response.result.value as? [String: Any],\n            let prop1 = json[\"prop1\"] as? String\n        {\n            debugPrint(prop1)\n        }\n        \n        debugPrint(response)\n}\n\n```\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u6587\u5b57\u5217\u3067\u53d7\u3051\u53d6\u308a\u305f\u3044\u6642\u306f\u3001.responseString\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u53d7\u3051\u53d6\u308a\u305f\u3044\u578b\u306b\u5fdc\u3058\u3066\u30cf\u30f3\u30c9\u30e9\u30fc\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\nhttps://github.com/Alamofire/Alamofire#response-handling\n\n\u8907\u6570\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30cf\u30f3\u30c9\u30e9\u30fc\u3092\u30c1\u30a7\u30fc\u30f3\u3055\u305b\u3066\u4f7f\u3046\u3053\u3068\u3082\u3067\u304d\u307e\u3059\nhttps://github.com/Alamofire/Alamofire#chained-response-handlers\n\n\n## \u30d5\u30a1\u30a4\u30eb\u3092 multipart/form-data \u3067 POST\nupload \u3092\u4f7f\u3063\u305f\u5834\u5408\u306f\u3001request \u3068\u9055\u3063\u3066\u9001\u4fe1\u9014\u4e2d\u306e progress \u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\n\u305d\u308c\u4ee5\u5916\u306f request \u3068\u307b\u307c\u540c\u3058\u3067\u3059\n\n\u30d9\u30fc\u30b9\u306fJSON\u3092POST\u3059\u308b\u6642\u3068\u4f3c\u305f\u611f\u3058\u3067\u3059\u304c\u3001\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u51e6\u7406\u306e\u524d\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u7d50\u679c\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u53d7\u3051\u53d6\u308b\u51e6\u7406\u3092\u631f\u3080\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u521d\u3081\u3066\u3060\u3068\u3061\u3087\u3063\u3068\u3060\u3051\u308f\u304b\u308a\u306b\u304f\u3044\u3067\u3059\n\n```swift:multipart/form-data\u3067\u30d5\u30a1\u30a4\u30eb\u3092POST\u3059\u308b\u30b5\u30f3\u30d7\u30eb\nlet fileContent = \"file content as string\"\nlet url = \"http://hoge/fuga\"\nlet headers: HTTPHeaders = [\n    \"name\": \"value\"\n]\n\nAlamofire.upload(\n    multipartFormData: { (multipartFormData) in\n        multipartFormData.append(fileContent.data(using: String.Encoding.utf8)!,\n                                     withName: \"param_name\",\n                                     fileName: \"filename\",\n                                     mimeType: \"multipart/form-data\")},\n    to: url,\n    headers: headers,\n    encodingCompletion: { encodingResult in\n        // file \u3092\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u5f8c\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\n        switch encodingResult {\n        case .success(let upload, _, _):\n            // upload \u306f request \u306e\u623b\u308a\u5024\u306e DataRequest \u3092\u7d99\u627f\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u3067\n            // request \u3068\u540c\u69d8\u306b\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u3044\u9805\u76ee\u306f\u3053\u306e\u4e2d\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\n            upload\n            .authenticate(user: \"user\", password: \"password\")\n            .uploadProgress(closure: { (progress) in\n                print(\"Upload Progress: \\(progress.fractionCompleted)\")\n            })\n            .responseString { response in\n                debugPrint(response)\n            }\n        case .failure(let encodingError):\n            print(encodingError)\n        }\n    }\n)\n\n```\n\n", "tags": ["Alamofire", "Alamofire4", "Swift", "Swift3.0", "iOS"]}