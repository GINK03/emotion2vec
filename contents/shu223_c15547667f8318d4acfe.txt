{"context": "Core Animation\u3092\u7528\u3044\u308b\u3068\u3001UIView\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3068\u6bd4\u8f03\u3057\u3066\u3088\u308a\u81ea\u7531\u5ea6\u306e\u9ad8\u3044\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001CAKeyframeAnimation \u306b Core Graphics \u3067\u63cf\u753b\u3057\u305f\u30d1\u30b9\u3092\u6e21\u3059\u3053\u3068\u3067\u3001\u5186\u306b\u6cbf\u3063\u3066\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u305f\u308a\u3001\u653e\u7269\u7dda\u72b6\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u305f\u308a\u3001\u30cf\u30fc\u30c8\u5f62\u306a\u3069\u306e\u56f3\u5f62\u3084\u3001\u624b\u66f8\u304d\u306e\u8ecc\u8de1\u306b\u6cbf\u3063\u3066\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u305f\u308a\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u653e\u7269\u7dda\u72b6\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\n\u30d1\u30b9\u306b\u6cbf\u3063\u3066\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u65b9\u6cd5\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u4e8b\u4f8b\u3068\u3057\u3066\u3001\u30b5\u30a4\u30c9\u30d3\u30e5\u30fc\u306e2D\u30b2\u30fc\u30e0\u306e\u30ad\u30e3\u30e9\uff08\u4f8b\uff1a\u30de\u30ea\u30aa\uff09\u306e\u30b8\u30e3\u30f3\u30d7\u306e\u3088\u3046\u306b\u3001\u653e\u7269\u7dda\u72b6\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u5834\u5408\u306e\u5b9f\u88c5\u4f8b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u51e6\u7406\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nswift\n// CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\nlet animation = CAKeyframeAnimation(keyPath: \"position\")\nanimation.fillMode = kCAFillModeForwards\nanimation.removedOnCompletion = false\nanimation.duration = 1.0\n\n// \u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092\u751f\u6210\nlet path = CGPathCreateMutable()\nCGPathMoveToPoint(path, nil, startPos.x, startPos.y)\nCGPathAddCurveToPoint(\n    path, nil,\n    startPos.x - jumpHeight/2, startPos.y - jumpHeight,\n    endPos.x - jumpHeight/2, startPos.y - jumpHeight,\n    endPos.x, endPos.y)\n\n// \u30d1\u30b9\u3092CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30bb\u30c3\u30c8\nanimation.path = path\n\n// \u30ec\u30a4\u30e4\u30fc\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\nimageView.layer.addAnimation(animation, forKey: nil)\n\n\n\nobjc\n// CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\nCAKeyframeAnimation *animation;\nanimation = [CAKeyframeAnimation animationWithKeyPath:@\"position\"];\nanimation.fillMode = kCAFillModeForwards;\nanimation.removedOnCompletion = NO;\nanimation.duration = 1.0;\n\n// \u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092\u751f\u6210\nCGFloat jumpHeight = 80.0;\nCGMutablePathRef curvedPath = CGPathCreateMutable();\nCGPathMoveToPoint(curvedPath, NULL, kStartPos.x, kStartPos.y);\nCGPathAddCurveToPoint(curvedPath, NULL,\n                      kStartPos.x + jumpHeight/2, kStartPos.y - jumpHeight,\n                      kEndPos.x - jumpHeight/2, kStartPos.y - jumpHeight,\n                      kEndPos.x, kEndPos.y);\n\n// \u30d1\u30b9\u3092CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30bb\u30c3\u30c8\nanimation.path = curvedPath;\n\n// \u30d1\u30b9\u3092\u89e3\u653e\nCGPathRelease(curvedPath);\n\n// \u30ec\u30a4\u30e4\u30fc\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\n[self.imageView.layer addAnimation:animation forKey:nil];\n\n\n\u3053\u306e\u5b9f\u88c5\u306e\u30dd\u30a4\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e2\u70b9\u3067\u3059\u3002\n\nCAKeyFrameAnimation \u3067 position \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u3088\u3046\u6307\u5b9a\u3059\u308b\nCore Graphics \u3067\u63cf\u753b\u3057\u305f\u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092 CAKeyframeAnimation \u306e path \u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30bb\u30c3\u30c8\u3059\u308b\n\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u5b8c\u4e86\u6642\u306b\u51e6\u7406\u3092\u884c\u3046\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u5b8c\u4e86\u5f8c\u306b\u51e6\u7406\u3092\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u3001CAAnimation \u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u3042\u308b delegate \u3092\u6307\u5b9a\u3057\u3066\u304a\u3051\u3070\u3001\n\nswift\nanimation.delegate = self\n\n\n\nobjc\nanimation.delegate = self;\n\n\nanimationDidStop:finished:\u30e1\u30bd\u30c3\u30c9\u304c\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u5b8c\u4e86\u5f8c\u306b\u547c\u3070\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nswift\noverride func animationDidStop(anim: CAAnimation, finished flag: Bool) {\n    print(\"\u5b8c\u4e86\")\n}\n\n\n\nobjc\n- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag {\n    NSLog(@\"\u5b8c\u4e86\");\n}\n\n\n\nUIBezierPath \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d1\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\nCAKeyframeAnimation \u306e path \u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u578b\u306f CGPathRef \u306a\u306e\u3067\u3001UIBezierPath \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d1\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306f\u3001UIBezierPath \u306e CGPath \u30d7\u30ed\u30d1\u30c6\u30a3\u304b\u3089 CGPathRef \u3092\u53d6\u308a\u51fa\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002\n// CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\nCAKeyframeAnimation *animation;\nanimation = [CAKeyframeAnimation animationWithKeyPath:@\"position\"];\nanimation.fillMode = kCAFillModeForwards;\nanimation.removedOnCompletion = NO;\nanimation.duration = 1.0;\n\n// UIBezierPath\u3067\u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092\u751f\u6210\nUIBezierPath *path = [UIBezierPath bezierPath];\n\nCGFloat jumpHeight = 80.0;\n[path moveToPoint:kStartPos];\n[path addCurveToPoint:kEndPos\n        controlPoint1:CGPointMake(kStartPos.x + jumpHeight/2,\n                                  kStartPos.y - jumpHeight)\n        controlPoint2:CGPointMake(kEndPos.x - jumpHeight/2,\n                                  kEndPos.y - jumpHeight)];\n\n// \u30d1\u30b9\u3092CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30bb\u30c3\u30c8\nanimation.path = path.CGPath;\n\n// \u30ec\u30a4\u30e4\u30fc\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\n[self.imageView.layer addAnimation:animation forKey:nil];\n\n\n\u53c2\u8003\u8cc7\u6599\n\nCAKeyframeAnimation Class Reference\nCore Animation Programming Guide\n\nCore Animation\u3092\u7528\u3044\u308b\u3068\u3001UIView\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3068\u6bd4\u8f03\u3057\u3066\u3088\u308a\u81ea\u7531\u5ea6\u306e\u9ad8\u3044\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001CAKeyframeAnimation \u306b Core Graphics \u3067\u63cf\u753b\u3057\u305f\u30d1\u30b9\u3092\u6e21\u3059\u3053\u3068\u3067\u3001\u5186\u306b\u6cbf\u3063\u3066\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u305f\u308a\u3001\u653e\u7269\u7dda\u72b6\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u305f\u308a\u3001\u30cf\u30fc\u30c8\u5f62\u306a\u3069\u306e\u56f3\u5f62\u3084\u3001\u624b\u66f8\u304d\u306e\u8ecc\u8de1\u306b\u6cbf\u3063\u3066\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u305f\u308a\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n##\u653e\u7269\u7dda\u72b6\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\n\n\u30d1\u30b9\u306b\u6cbf\u3063\u3066\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u65b9\u6cd5\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u4e8b\u4f8b\u3068\u3057\u3066\u3001\u30b5\u30a4\u30c9\u30d3\u30e5\u30fc\u306e2D\u30b2\u30fc\u30e0\u306e\u30ad\u30e3\u30e9\uff08\u4f8b\uff1a\u30de\u30ea\u30aa\uff09\u306e\u30b8\u30e3\u30f3\u30d7\u306e\u3088\u3046\u306b\u3001**\u653e\u7269\u7dda\u72b6\u306b**\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u5834\u5408\u306e\u5b9f\u88c5\u4f8b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n![](http://f.cl.ly/items/3v462W3P1s0x323o1e3q/PathAnimation1.png)\n\n![jump.gif](https://qiita-image-store.s3.amazonaws.com/0/3180/d2f7afa5-2a6f-cd0c-c5dc-c90243a18964.gif)\n\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u51e6\u7406\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```swift:swift\n// CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\nlet animation = CAKeyframeAnimation(keyPath: \"position\")\nanimation.fillMode = kCAFillModeForwards\nanimation.removedOnCompletion = false\nanimation.duration = 1.0\n\n// \u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092\u751f\u6210\nlet path = CGPathCreateMutable()\nCGPathMoveToPoint(path, nil, startPos.x, startPos.y)\nCGPathAddCurveToPoint(\n    path, nil,\n    startPos.x - jumpHeight/2, startPos.y - jumpHeight,\n    endPos.x - jumpHeight/2, startPos.y - jumpHeight,\n    endPos.x, endPos.y)\n\n// \u30d1\u30b9\u3092CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30bb\u30c3\u30c8\nanimation.path = path\n\n// \u30ec\u30a4\u30e4\u30fc\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\nimageView.layer.addAnimation(animation, forKey: nil)\n```\n\n```objc:objc\n// CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\nCAKeyframeAnimation *animation;\nanimation = [CAKeyframeAnimation animationWithKeyPath:@\"position\"];\nanimation.fillMode = kCAFillModeForwards;\nanimation.removedOnCompletion = NO;\nanimation.duration = 1.0;\n\n// \u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092\u751f\u6210\nCGFloat jumpHeight = 80.0;\nCGMutablePathRef curvedPath = CGPathCreateMutable();\nCGPathMoveToPoint(curvedPath, NULL, kStartPos.x, kStartPos.y);\nCGPathAddCurveToPoint(curvedPath, NULL,\n                      kStartPos.x + jumpHeight/2, kStartPos.y - jumpHeight,\n                      kEndPos.x - jumpHeight/2, kStartPos.y - jumpHeight,\n                      kEndPos.x, kEndPos.y);\n\n// \u30d1\u30b9\u3092CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30bb\u30c3\u30c8\nanimation.path = curvedPath;\n\n// \u30d1\u30b9\u3092\u89e3\u653e\nCGPathRelease(curvedPath);\n\n// \u30ec\u30a4\u30e4\u30fc\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\n[self.imageView.layer addAnimation:animation forKey:nil];\n````\n\n\u3053\u306e\u5b9f\u88c5\u306e\u30dd\u30a4\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e2\u70b9\u3067\u3059\u3002\n\n- CAKeyFrameAnimation \u3067 `position` \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u3088\u3046\u6307\u5b9a\u3059\u308b\n- Core Graphics \u3067\u63cf\u753b\u3057\u305f\u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092 CAKeyframeAnimation \u306e `path` \u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30bb\u30c3\u30c8\u3059\u308b\n\n\n##\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u5b8c\u4e86\u6642\u306b\u51e6\u7406\u3092\u884c\u3046\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u5b8c\u4e86\u5f8c\u306b\u51e6\u7406\u3092\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u3001CAAnimation \u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u3042\u308b `delegate` \u3092\u6307\u5b9a\u3057\u3066\u304a\u3051\u3070\u3001\n\n```swift:swift\nanimation.delegate = self\n```\n\n```objc:objc\nanimation.delegate = self;\n```\n\n`animationDidStop:finished:`\u30e1\u30bd\u30c3\u30c9\u304c\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u5b8c\u4e86\u5f8c\u306b\u547c\u3070\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```swift:swift\noverride func animationDidStop(anim: CAAnimation, finished flag: Bool) {\n    print(\"\u5b8c\u4e86\")\n}\n```\n\n```objc:objc\n- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag {\n    NSLog(@\"\u5b8c\u4e86\");\n}\n```\n\n##UIBezierPath \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d1\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\n\nCAKeyframeAnimation \u306e `path` \u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u578b\u306f CGPathRef \u306a\u306e\u3067\u3001UIBezierPath \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d1\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306f\u3001**UIBezierPath \u306e `CGPath` \u30d7\u30ed\u30d1\u30c6\u30a3\u304b\u3089 CGPathRef \u3092\u53d6\u308a\u51fa\u3057\u3066\u4f7f\u7528**\u3057\u307e\u3059\u3002\n\n````\n// CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\nCAKeyframeAnimation *animation;\nanimation = [CAKeyframeAnimation animationWithKeyPath:@\"position\"];\nanimation.fillMode = kCAFillModeForwards;\nanimation.removedOnCompletion = NO;\nanimation.duration = 1.0;\n\n// UIBezierPath\u3067\u653e\u7269\u7dda\u306e\u30d1\u30b9\u3092\u751f\u6210\nUIBezierPath *path = [UIBezierPath bezierPath];\n\nCGFloat jumpHeight = 80.0;\n[path moveToPoint:kStartPos];\n[path addCurveToPoint:kEndPos\n        controlPoint1:CGPointMake(kStartPos.x + jumpHeight/2,\n                                  kStartPos.y - jumpHeight)\n        controlPoint2:CGPointMake(kEndPos.x - jumpHeight/2,\n                                  kEndPos.y - jumpHeight)];\n\n// \u30d1\u30b9\u3092CAKeyframeAnimation\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30bb\u30c3\u30c8\nanimation.path = path.CGPath;\n    \n// \u30ec\u30a4\u30e4\u30fc\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\n[self.imageView.layer addAnimation:animation forKey:nil];\n````\n\n##\u53c2\u8003\u8cc7\u6599\n\n- [CAKeyframeAnimation Class Reference](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAKeyframeAnimation_class/)\n- [Core Animation Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/)\n", "tags": ["Xcode", "iOS", "Objective-C", "\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3", "Swift"]}