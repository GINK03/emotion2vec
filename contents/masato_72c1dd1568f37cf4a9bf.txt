{"context": " More than 1 year has passed since last update.\u524d\u56deHoplon\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u52d5\u304d\u307e\u3057\u305f\u3002\u305f\u3060\u3057lein\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306ehoplon-template\u304c\u751f\u6210\u3059\u308b\u30b3\u30fc\u30c9\u306fHoplon 5.10.25\u306a\u306e\u3067\u3001index.cljs.hl\u306e\u5185\u5bb9\u304cGetting Started\u3068\u5c11\u3057\u7570\u306a\u308a\u307e\u3059\u3002Hoplon 6\u3068Boot 2\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u8a66\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\nBoot 1\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\nClojure\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066boot1\u30b3\u30de\u30f3\u30c9\u304b\u3089\u958b\u767a\u7528\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ cd ~/clojure_apps/\n$ docker pull clojure\n$ docker build -t clojure .\n$ docker-compose run --rm --service-ports boot1 development\n\nhoplon-template\u304c\u751f\u6210\u3059\u308bHoplon 5.10.25 / Boot 1.1.1\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002public\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u624b\u52d5\u3067\u7de8\u96c6\u3057\u3066\u3082\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u5ea6\u306b\u66f8\u304d\u63db\u3048\u3089\u308c\u307e\u3059\u3002\n$ tree\n.\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 build.boot\n\u251c\u2500\u2500 resources\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 public\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 c6f4dce0-0384-11e4-9191-0800200c9a66.css\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 c6f4dce0-0384-11e4-9191-0800200c9a66.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 index.html\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 index.cljs.hl\n    \u2514\u2500\u2500 main.inc.css\n\n\nBoot 2\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\ndocker-compose.yml\u306bBoot 2\u306eboot.sh\u3092\u4f7f\u3046boot\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002Boot 2\u3092\u7121\u5370\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u3057\u307e\u3057\u305f\u3002\n\n~/clojure_apps/docker-compose.yml\nlein: &defaults\n  image: clojure\n  volumes:\n    - .:/usr/src/app\n    - ./m2:/home/docker/.m2\n  working_dir: /usr/src/app/hoplon6-start\nboot1:\n  <<: *defaults\n  entrypoint: [\"boot1\"]\n  ports:\n    - \"8000:8000\"\nboot:\n  <<: *defaults\n  entrypoint: [\"boot2\"]\n  ports:\n    - 5000:5000\n    - 4449:4449\nbash:\n  <<: *defaults\n  entrypoint: [\"bash\"]\n\n\nClojure\u7528\u306eDocker\u30a4\u30e1\u30fc\u30b8\u306b\u306fBoot 1\u306e/usr/local/bin/boot1\u3068Boot 2\u306e/usr/local/bin/boot2\u30b3\u30de\u30f3\u30c9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\n~/clojure_apps/Dockerfile\nFROM clojure\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\nWORKDIR /usr/src/app\n\nADD https://github.com/boot-clj/boot/releases/download/2.0.0/boot.sh /tmp/\nRUN mv /tmp/boot.sh /usr/local/bin/boot2 && \\\n    chmod 755 /usr/local/bin/boot2\n\nADD https://clojars.org/repo/tailrecursion/boot/1.1.1/boot-1.1.1.jar /tmp/\nRUN mv /tmp/boot-1.1.1.jar /usr/local/bin/boot1 && \\\n    chmod 755 /usr/local/bin/boot1\n\nRUN adduser --disabled-password --gecos '' --uid 1000 docker && \\\n  mkdir /home/docker/.m2 && \\\n  chown -R docker:docker /usr/src/app /home/docker/.m2\n\nVOLUME /home/docker/.m2\nUSER docker\nRUN lein\n\nENTRYPOINT [\"lein\"]\nCMD []\n\n\n\nboot\u30b3\u30de\u30f3\u30c9\nboot\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9\u306fboot\u306eREADME\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u30d8\u30eb\u30d7\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n$ cd ~/clojure_apps\n$ docker-compose run --rm boot2 -h\nBoot App Version: 2.0.0\nBoot Lib Version: 2.1.2\nClojure Version:  1.6.0\n\nUsage:   boot OPTS <task> TASK_OPTS <task> TASK_OPTS ...\n\nREPL\u3082\u4f7f\u3048\u307e\u3059\u3002\n$ docker-compose run --rm boot repl\nRetrieving tools.nrepl-0.2.8.jar from https://repo1.maven.org/maven2/\nnREPL server started on port 37446 on host 127.0.0.1 - nrepl://127.0.0.1:37446\nREPL-y 0.3.5, nREPL 0.2.8\nClojure 1.6.0\nOpenJDK 64-Bit Server VM 1.7.0_79-b14        Exit: Control+D or (exit) or (quit)\n    Commands: (user/help)\n        Docs: (doc function-name-here)\n              (find-doc \"part-of-name-here\")\nFind by Name: (find-name \"part-of-name-here\")\n      Source: (source function-name-here)\n     Javadoc: (javadoc java-object-or-class-here)\n    Examples from clojuredocs.org: [clojuredocs or cdoc]\n              (user/clojuredocs name-here)\n              (user/clojuredocs \"ns-here\" \"name-here\")\nboot.user=>\n\n\nbuild.boot\n\u6700\u521d\u306bhoplon-template\u3092\u4f7f\u308f\u306a\u3044\u3067\u30016.0.0-alpha1 / Boot 2.0.0\u306b\u5bfe\u5fdc\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n$ cd ~/clojure_apps\n$ mkdir hoplon6-start\n$ cd !$\n\nBoot\u306eREADME\u3092\u53c2\u8003\u306b\u3057\u3066\u7c21\u5358\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n~/clojure_apps/hoplon6-start/build.boot\n(set-env!\n  :source-paths #{\"src\"}\n  :dependencies '[[me.raynes/conch \"0.8.0\"]])\n\n(task-options!\n  pom {:project 'my-project\n       :version \"0.1.0\"}\n  jar {:manifest {\"Foo\" \"bar\"}})\n\n\n\u4f5c\u6210\u3057\u305fbuild.boot\u3092\u4f7f\u3044\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d3\u30eb\u30c9\u3057\u3066jar\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ docker-compose run --rm boot pom jar install\nRetrieving conch-0.8.0.jar from https://clojars.org/repo/\nRetrieving useful-0.10.6.jar from https://clojars.org/repo/\nRetrieving tools.reader-0.7.2.jar from https://repo1.maven.org/maven2/\nWriting pom.xml and pom.properties...\nWriting my-project-0.1.0.jar...\nInstalling my-project-0.1.0.jar...\nRemoving clojureapps_boot2_run_1...\n\ntarget\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\n$ tree hoplon6-start\nhoplon6-start/\n\u251c\u2500\u2500 build.boot\n\u2514\u2500\u2500 target\n    \u251c\u2500\u2500 META-INF\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 maven\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 my-project\n    \u2502\u00a0\u00a0         \u2514\u2500\u2500 my-project\n    \u2502\u00a0\u00a0             \u251c\u2500\u2500 pom.properties\n    \u2502\u00a0\u00a0             \u2514\u2500\u2500 pom.xml\n    \u2514\u2500\u2500 my-project-0.1.0.jar\n\n\u30b7\u30a7\u30eb\u304b\u3089\u5b9f\u884c\u3057\u305fboot pom jar install\u306e\u30b3\u30de\u30f3\u30c9\u306fREPL\u3067\u3082\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n$ docker-compose run --rm boot repl\n\nboot.user=> (boot (pom) (jar) (install))\nWriting pom.xml and pom.properties...\nWriting my-project-0.1.0.jar...\nInstalling my-project-0.1.0.jar...\n\n\n\u30bf\u30b9\u30af\u3092\u4f5c\u6210\u3059\u308b\ndeftask\u306bbuild\u30bf\u30b9\u30af\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002comp\u95a2\u6570\u3067\u8907\u6570\u306e\u30bf\u30b9\u30af\u3067\u69cb\u6210\u3055\u308c\u308b\u30d5\u30ed\u30fc\u30921\u3064\u306e\u30bf\u30b9\u30af\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002compose\u3059\u308b\u30bf\u30b9\u30af\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306fTransducers\u306e\u3088\u3046\u306b\u5de6\u304b\u3089\u53f3\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n~/clojure_apps/hoplon6-start/build.boot\n(set-env!\n  :source-paths #{\"src\"}\n  :dependencies '[[me.raynes/conch \"0.8.0\"]])\n\n(task-options!\n  pom {:project 'my-project\n       :version \"0.1.0\"}\n  jar {:manifest {\"Foo\" \"bar\"}})\n\n(deftask build\n  \"Build my project.\"\n  []\n  (comp (pom) (jar) (install)))\n\n\n\nBoot 2 \u3067Hoplon\u3092\u30d3\u30eb\u30c9\u3059\u308b\nBoot 2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n$ tree -L 2 hoplon6-start/\nhoplon6-start/\n\u251c\u2500\u2500 build.boot\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 index.cljs.hl\n\nindex.cljs.hl\u306fH1\u306e\u898b\u51fa\u3057\u3060\u3051\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\n~/clojure_apps/hoplon6-start/src/index.cljs.hl\n(page \"index.html\")\n\n(html\n  (head)\n  (body\n    (h1 \"Hoplon Minimal!\")))\n\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068target\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bindex.html\u3068index.html.js\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n.\n\u251c\u2500\u2500 build.boot\n\u251c\u2500\u2500 build.boot.mini\n\u251c\u2500\u2500 src\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 index.cljs.hl\n\u2514\u2500\u2500 target\n    \u251c\u2500\u2500 index.html\n    \u251c\u2500\u2500 index.html.js\n    \u2514\u2500\u2500 out\n\n\nbuild.boot\nHoplon\u306ebuild.boot\u3092Boot 2\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u304c\u5c11\u306a\u3044\u306e\u3067\u3059\u304c\u3001build.boot\u3092\u53c2\u8003\u306b\u3057\u3066\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u305d\u308c\u305e\u308c\u6700\u65b0\u306b\u5909\u66f4\u3057\u3066\u3044\u307e\u3059\u3002\n\n~/clojure_apps/hoplon6-start/build.boot\n(set-env!\n  :dependencies  '[[org.clojure/clojure       \"1.7.0-RC2\"]\n                   [adzerk/boot-cljs          \"0.0-3308-0\"]\n                   [adzerk/boot-cljs-repl     \"0.1.10-SNAPSHOT\"]\n                   [adzerk/boot-reload        \"0.3.1\"]\n                   [pandeiro/boot-http        \"0.6.3-SNAPSHOT\"]\n                   [tailrecursion/boot-hoplon \"0.1.0-SNAPSHOT\"]\n                   [tailrecursion/hoplon      \"6.0.0-alpha2\"]]\n  :source-paths   #{\"src\"})\n\n(require\n  '[adzerk.boot-cljs          :refer [cljs]]\n  '[adzerk.boot-reload        :refer [reload]]\n  '[pandeiro.boot-http        :refer [serve]]\n  '[adzerk.boot-cljs-repl     :refer [cljs-repl start-repl]]\n  '[tailrecursion.boot-hoplon :refer [hoplon prerender]])\n\n(deftask dev\n  \"Build hoplon-minimal for local development.\"\n  []\n  (comp\n    (serve :port 5000\n           :httpkit true)\n    (watch)\n    (speak)\n    (hoplon)\n    ;(reload :port 4449)\n    (cljs)))\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\nFigwheel\u306e\u5834\u5408\u306fproject.clj\u306b\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\u306e\u305f\u3081\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u63a5\u7d9a\u3059\u308bWebSocket\u306e\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3067\u304d\u307e\u3057\u305f\u3002\n\nproject.clj\n  :cljsbuild {\n    :builds [{:id \"dev\"\n              :source-paths [\"src\"]\n\n              :figwheel { :on-jsload \"hello-cljs.core/on-js-reload\"\n                          :websocket-host \"210.xxx.xxx.xxx\"}\n\n\nadzerk-oss/boot-reload\u306e\u5834\u5408\u3001ip\u30aa\u30d7\u30b7\u30e7\u30f3\u306fWebSockert\u30b5\u30fc\u30d0\u30fc\u304cBind\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002public\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068ws://localhost:port\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u63a5\u7d9a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u304b\u3089WebSocket\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3057\u3066\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u8a2d\u5b9a\u304c\u307f\u3064\u304b\u3089\u306a\u3044\u305f\u3081\u3068\u308a\u3042\u3048\u305a\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u3002\n\nboot dev\nbooo\u30b3\u30de\u30f3\u30c9\u304b\u3089dev\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u5f8c\u306bindex.cljs.hl\u3092\u7de8\u96c6\u3059\u308b\u3068\u81ea\u52d5\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u306f\u884c\u3044\u307e\u3059\u304c\u3001reload\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306e\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\u306f\u3055\u308c\u307e\u305b\u3093\u3002\n$ docker-compose run --rm --service-ports boot dev\ntemp-dir! was deprecated, please use tmp-dir! instead\n<< started HTTP Kit on http://localhost:5000 >>\n\nStarting file watcher (CTRL-C to quit)...\n\ntmppath was deprecated, please use tmp-path instead\ntmpfile was deprecated, please use tmp-file instead\nCompiling Hoplon pages...\n\u2022 index.cljs.hl\nCompiling index.html.js...\nElapsed time: 25.526 sec\n\nCompiling Hoplon pages...\n\u2022 index.cljs.hl\nCompiling index.html.js...\nElapsed time: 0.553 sec\n\n\u307e\u3060\u8a66\u884c\u932f\u8aa4\u4e2d\u3067\u3059\u304c\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u753b\u9762\u8868\u793a\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n[\u524d\u56de](http://qiita.com/masato/items/812e96d9ed2d5bd0be0e)Hoplon\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u52d5\u304d\u307e\u3057\u305f\u3002\u305f\u3060\u3057lein\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e[hoplon-template](https://github.com/tailrecursion/hoplon-template)\u304c\u751f\u6210\u3059\u308b\u30b3\u30fc\u30c9\u306fHoplon [5.10.25](https://github.com/tailrecursion/hoplon/tree/5.10.25)\u306a\u306e\u3067\u3001[index.cljs.hl](https://github.com/tailrecursion/hoplon-template/blob/master/src/leiningen/new/hoplon/index.cljs.hl)\u306e\u5185\u5bb9\u304c[Getting Started](http://hoplon.io/#/getting-started/)\u3068\u5c11\u3057\u7570\u306a\u308a\u307e\u3059\u3002Hoplon 6\u3068Boot 2\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u8a66\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n## Boot 1\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\nClojure\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066boot1\u30b3\u30de\u30f3\u30c9\u304b\u3089\u958b\u767a\u7528\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```bash\n$ cd ~/clojure_apps/\n$ docker pull clojure\n$ docker build -t clojure .\n$ docker-compose run --rm --service-ports boot1 development\n```\n\n[hoplon-template](https://github.com/tailrecursion/hoplon-template)\u304c\u751f\u6210\u3059\u308bHoplon 5.10.25 / Boot 1.1.1\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002public\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u624b\u52d5\u3067\u7de8\u96c6\u3057\u3066\u3082\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u5ea6\u306b\u66f8\u304d\u63db\u3048\u3089\u308c\u307e\u3059\u3002\n\n```bash\n$ tree\n.\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 build.boot\n\u251c\u2500\u2500 resources\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 public\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 c6f4dce0-0384-11e4-9191-0800200c9a66.css\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 c6f4dce0-0384-11e4-9191-0800200c9a66.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 index.html\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 index.cljs.hl\n    \u2514\u2500\u2500 main.inc.css\n```\n\n\n## Boot 2\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\ndocker-compose.yml\u306bBoot 2\u306e[boot.sh](https://github.com/boot-clj/boot/releases/download/2.0.0/boot.sh)\u3092\u4f7f\u3046boot\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002Boot 2\u3092\u7121\u5370\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u3057\u307e\u3057\u305f\u3002\n\n```~/clojure_apps/docker-compose.yml\nlein: &defaults\n  image: clojure\n  volumes:\n    - .:/usr/src/app\n    - ./m2:/home/docker/.m2\n  working_dir: /usr/src/app/hoplon6-start\nboot1:\n  <<: *defaults\n  entrypoint: [\"boot1\"]\n  ports:\n    - \"8000:8000\"\nboot:\n  <<: *defaults\n  entrypoint: [\"boot2\"]\n  ports:\n    - 5000:5000\n    - 4449:4449\nbash:\n  <<: *defaults\n  entrypoint: [\"bash\"]\n```\n\nClojure\u7528\u306eDocker\u30a4\u30e1\u30fc\u30b8\u306b\u306fBoot 1\u306e`/usr/local/bin/boot1`\u3068Boot 2\u306e`/usr/local/bin/boot2`\u30b3\u30de\u30f3\u30c9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\n```bash:~/clojure_apps/Dockerfile\nFROM clojure\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\nWORKDIR /usr/src/app\n\nADD https://github.com/boot-clj/boot/releases/download/2.0.0/boot.sh /tmp/\nRUN mv /tmp/boot.sh /usr/local/bin/boot2 && \\\n    chmod 755 /usr/local/bin/boot2\n\nADD https://clojars.org/repo/tailrecursion/boot/1.1.1/boot-1.1.1.jar /tmp/\nRUN mv /tmp/boot-1.1.1.jar /usr/local/bin/boot1 && \\\n    chmod 755 /usr/local/bin/boot1\n\nRUN adduser --disabled-password --gecos '' --uid 1000 docker && \\\n  mkdir /home/docker/.m2 && \\\n  chown -R docker:docker /usr/src/app /home/docker/.m2\n\nVOLUME /home/docker/.m2\nUSER docker\nRUN lein\n\nENTRYPOINT [\"lein\"]\nCMD []\n```\n\n### boot\u30b3\u30de\u30f3\u30c9\n\nboot\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9\u306f[boot](https://github.com/boot-clj/boot)\u306eREADME\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u30d8\u30eb\u30d7\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ cd ~/clojure_apps\n$ docker-compose run --rm boot2 -h\nBoot App Version: 2.0.0\nBoot Lib Version: 2.1.2\nClojure Version:  1.6.0\n\nUsage:   boot OPTS <task> TASK_OPTS <task> TASK_OPTS ...\n```\n\nREPL\u3082\u4f7f\u3048\u307e\u3059\u3002\n\n```bash\n$ docker-compose run --rm boot repl\nRetrieving tools.nrepl-0.2.8.jar from https://repo1.maven.org/maven2/\nnREPL server started on port 37446 on host 127.0.0.1 - nrepl://127.0.0.1:37446\nREPL-y 0.3.5, nREPL 0.2.8\nClojure 1.6.0\nOpenJDK 64-Bit Server VM 1.7.0_79-b14        Exit: Control+D or (exit) or (quit)\n    Commands: (user/help)\n        Docs: (doc function-name-here)\n              (find-doc \"part-of-name-here\")\nFind by Name: (find-name \"part-of-name-here\")\n      Source: (source function-name-here)\n     Javadoc: (javadoc java-object-or-class-here)\n    Examples from clojuredocs.org: [clojuredocs or cdoc]\n              (user/clojuredocs name-here)\n              (user/clojuredocs \"ns-here\" \"name-here\")\nboot.user=>\n```\n\n### build.boot\n\n\u6700\u521d\u306b[hoplon-template](https://github.com/tailrecursion/hoplon-template)\u3092\u4f7f\u308f\u306a\u3044\u3067\u30016.0.0-alpha1 / Boot 2.0.0\u306b\u5bfe\u5fdc\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ cd ~/clojure_apps\n$ mkdir hoplon6-start\n$ cd !$\n```\n\nBoot\u306e[README](https://github.com/boot-clj/boot)\u3092\u53c2\u8003\u306b\u3057\u3066\u7c21\u5358\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n```clj:~/clojure_apps/hoplon6-start/build.boot\n(set-env!\n  :source-paths #{\"src\"}\n  :dependencies '[[me.raynes/conch \"0.8.0\"]])\n\n(task-options!\n  pom {:project 'my-project\n       :version \"0.1.0\"}\n  jar {:manifest {\"Foo\" \"bar\"}})\n```\n\n\u4f5c\u6210\u3057\u305fbuild.boot\u3092\u4f7f\u3044\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d3\u30eb\u30c9\u3057\u3066jar\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\n$ docker-compose run --rm boot pom jar install\nRetrieving conch-0.8.0.jar from https://clojars.org/repo/\nRetrieving useful-0.10.6.jar from https://clojars.org/repo/\nRetrieving tools.reader-0.7.2.jar from https://repo1.maven.org/maven2/\nWriting pom.xml and pom.properties...\nWriting my-project-0.1.0.jar...\nInstalling my-project-0.1.0.jar...\nRemoving clojureapps_boot2_run_1...\n```\n\ntarget\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\n$ tree hoplon6-start\nhoplon6-start/\n\u251c\u2500\u2500 build.boot\n\u2514\u2500\u2500 target\n    \u251c\u2500\u2500 META-INF\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 maven\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 my-project\n    \u2502\u00a0\u00a0         \u2514\u2500\u2500 my-project\n    \u2502\u00a0\u00a0             \u251c\u2500\u2500 pom.properties\n    \u2502\u00a0\u00a0             \u2514\u2500\u2500 pom.xml\n    \u2514\u2500\u2500 my-project-0.1.0.jar\n```\n\n\u30b7\u30a7\u30eb\u304b\u3089\u5b9f\u884c\u3057\u305f`boot pom jar install`\u306e\u30b3\u30de\u30f3\u30c9\u306fREPL\u3067\u3082\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ docker-compose run --rm boot repl\n\nboot.user=> (boot (pom) (jar) (install))\nWriting pom.xml and pom.properties...\nWriting my-project-0.1.0.jar...\nInstalling my-project-0.1.0.jar...\n```\n\n### \u30bf\u30b9\u30af\u3092\u4f5c\u6210\u3059\u308b\n\n`deftask`\u306bbuild\u30bf\u30b9\u30af\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002comp\u95a2\u6570\u3067\u8907\u6570\u306e\u30bf\u30b9\u30af\u3067\u69cb\u6210\u3055\u308c\u308b\u30d5\u30ed\u30fc\u30921\u3064\u306e\u30bf\u30b9\u30af\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002compose\u3059\u308b\u30bf\u30b9\u30af\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306f[Transducers](http://clojure.org/transducers)\u306e\u3088\u3046\u306b\u5de6\u304b\u3089\u53f3\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n```clj:~/clojure_apps/hoplon6-start/build.boot\n(set-env!\n  :source-paths #{\"src\"}\n  :dependencies '[[me.raynes/conch \"0.8.0\"]])\n\n(task-options!\n  pom {:project 'my-project\n       :version \"0.1.0\"}\n  jar {:manifest {\"Foo\" \"bar\"}})\n\n(deftask build\n  \"Build my project.\"\n  []\n  (comp (pom) (jar) (install)))\n```\n\n## Boot 2 \u3067Hoplon\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\nBoot 2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n```bash\n$ tree -L 2 hoplon6-start/\nhoplon6-start/\n\u251c\u2500\u2500 build.boot\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 index.cljs.hl\n```\n\nindex.cljs.hl\u306fH1\u306e\u898b\u51fa\u3057\u3060\u3051\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\n```clj:~/clojure_apps/hoplon6-start/src/index.cljs.hl\n(page \"index.html\")\n\n(html\n  (head)\n  (body\n    (h1 \"Hoplon Minimal!\")))\n```\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068`target`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bindex.html\u3068index.html.js\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n```bash\n.\n\u251c\u2500\u2500 build.boot\n\u251c\u2500\u2500 build.boot.mini\n\u251c\u2500\u2500 src\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 index.cljs.hl\n\u2514\u2500\u2500 target\n    \u251c\u2500\u2500 index.html\n    \u251c\u2500\u2500 index.html.js\n    \u2514\u2500\u2500 out\n```\n\n### build.boot\n\nHoplon\u306ebuild.boot\u3092Boot 2\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u304c\u5c11\u306a\u3044\u306e\u3067\u3059\u304c\u3001[build.boot](https://github.com/mynomoto/hoplon-minimal/blob/master/build.boot)\u3092\u53c2\u8003\u306b\u3057\u3066\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u305d\u308c\u305e\u308c\u6700\u65b0\u306b\u5909\u66f4\u3057\u3066\u3044\u307e\u3059\u3002\n\n```clj:~/clojure_apps/hoplon6-start/build.boot\n(set-env!\n  :dependencies  '[[org.clojure/clojure       \"1.7.0-RC2\"]\n                   [adzerk/boot-cljs          \"0.0-3308-0\"]\n                   [adzerk/boot-cljs-repl     \"0.1.10-SNAPSHOT\"]\n                   [adzerk/boot-reload        \"0.3.1\"]\n                   [pandeiro/boot-http        \"0.6.3-SNAPSHOT\"]\n                   [tailrecursion/boot-hoplon \"0.1.0-SNAPSHOT\"]\n                   [tailrecursion/hoplon      \"6.0.0-alpha2\"]]\n  :source-paths   #{\"src\"})\n\n(require\n  '[adzerk.boot-cljs          :refer [cljs]]\n  '[adzerk.boot-reload        :refer [reload]]\n  '[pandeiro.boot-http        :refer [serve]]\n  '[adzerk.boot-cljs-repl     :refer [cljs-repl start-repl]]\n  '[tailrecursion.boot-hoplon :refer [hoplon prerender]])\n\n(deftask dev\n  \"Build hoplon-minimal for local development.\"\n  []\n  (comp\n    (serve :port 5000\n           :httpkit true)\n    (watch)\n    (speak)\n    (hoplon)\n    ;(reload :port 4449)\n    (cljs)))\n```\n\n### \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\n\n[Figwheel](https://github.com/bhauman/lein-figwheel)\u306e\u5834\u5408\u306fproject.clj\u306b\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\u306e\u305f\u3081\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u63a5\u7d9a\u3059\u308bWebSocket\u306e\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3067\u304d\u307e\u3057\u305f\u3002\n\n```project.clj\n  :cljsbuild {\n    :builds [{:id \"dev\"\n              :source-paths [\"src\"]\n\n              :figwheel { :on-jsload \"hello-cljs.core/on-js-reload\"\n                          :websocket-host \"210.xxx.xxx.xxx\"}\n```\n\n[adzerk-oss/boot-reload](https://github.com/adzerk-oss/boot-reload)\u306e\u5834\u5408\u3001`ip`\u30aa\u30d7\u30b7\u30e7\u30f3\u306fWebSockert\u30b5\u30fc\u30d0\u30fc\u304cBind\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002public\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068`ws://localhost:port`\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u63a5\u7d9a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u304b\u3089WebSocket\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3057\u3066\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u8a2d\u5b9a\u304c\u307f\u3064\u304b\u3089\u306a\u3044\u305f\u3081\u3068\u308a\u3042\u3048\u305a\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u3002\n\n\n### boot dev\n\nbooo\u30b3\u30de\u30f3\u30c9\u304b\u3089dev\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u5f8c\u306bindex.cljs.hl\u3092\u7de8\u96c6\u3059\u308b\u3068\u81ea\u52d5\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u306f\u884c\u3044\u307e\u3059\u304c\u3001reload\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306e\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\u306f\u3055\u308c\u307e\u305b\u3093\u3002\n\n```\n$ docker-compose run --rm --service-ports boot dev\ntemp-dir! was deprecated, please use tmp-dir! instead\n<< started HTTP Kit on http://localhost:5000 >>\n\nStarting file watcher (CTRL-C to quit)...\n\ntmppath was deprecated, please use tmp-path instead\ntmpfile was deprecated, please use tmp-file instead\nCompiling Hoplon pages...\n\u2022 index.cljs.hl\nCompiling index.html.js...\nElapsed time: 25.526 sec\n\nCompiling Hoplon pages...\n\u2022 index.cljs.hl\nCompiling index.html.js...\nElapsed time: 0.553 sec\n```\n\n\u307e\u3060\u8a66\u884c\u932f\u8aa4\u4e2d\u3067\u3059\u304c\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u753b\u9762\u8868\u793a\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n![hoplon-minimal.png](https://qiita-image-store.s3.amazonaws.com/0/43745/1dcf037b-80af-e196-4ec5-13eaf65b18ed.png)\n", "tags": ["Hoplon6.0.0-alpha2", "boot2.0.0", "Clojure1.7.0-RC2", "ClojureScript0.0-3308-0"]}