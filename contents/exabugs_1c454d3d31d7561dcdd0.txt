{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nESP8266 (\u4ee5\u4e0b WROOM02) \u3067\u30b5\u30fc\u30dc\u3092\u5236\u5fa1\u3059\u308b\n\n\n\u306f\u3058\u3081\u306b\n\u4eca\u56de\u4f7f\u3063\u305f\u30b5\u30fc\u30dc\u306f\u3001SG90 \u3068\u3044\u3046\u3084\u3064\u3002\u79cb\u6708\u3067 400\u5186\u3002\nhttp://akizukidenshi.com/catalog/g/gM-08761/\n\n\n\n\u30ad\u30fc\n\u5024\n\n\n\n\nPWM\u30b5\u30a4\u30af\u30eb\n20 \u30df\u30easec\n\n\n\u5236\u5fa1\u30d1\u30eb\u30b9\n0.5\uff5e2.4 \u30df\u30easec\n\n\n\u5236\u5fa1\u89d2\n\u00b1\u7d04 90 \u00b0\uff08180 \u00b0\uff09\n\n\n\u914d\u7dda\n\u8336:GND \u8d64:\u96fb\u6e90[+] \u6a59:\u5236\u5fa1\u4fe1\u53f7[JR\u30bf\u30a4\u30d7]\n\n\n\u30c8\u30eb\u30af\n1.8 kgf\u30fbcm\n\n\n\u52d5\u4f5c\u901f\u5ea6\n0.1\u79d2 / 60\u5ea6\n\n\n\u52d5\u4f5c\u96fb\u5727\n4.8V\uff08\uff5e5V\uff09\n\n\n\u6e29\u5ea6\u7bc4\u56f2\n0 \u2103 \uff5e 55 \u2103\n\n\n\u5916\u5f62\u5bf8\u6cd5\n22.2 x 11.8 x 31 mm\n\n\n\u91cd\u91cf\n9 g\n\n\n\n4.8 V \u99c6\u52d5\u3067\u3059\u304c\u3001WROOM02 \u7528\u306e 3.3 V \u3067\u3001\u53d6\u308a\u6562\u3048\u305a\u3001\u52d5\u4f5c\u3057\u307e\u3057\u305f\u3002\n(\u96fb\u6e90 5 V \u3001\u5236\u5fa1\u4fe1\u53f7 3.3 V \u3067\u306f\u3001\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002)\n\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306f\u3053\u3061\u3089\nhttp://akizukidenshi.com/download/ds/towerpro/SG90_a.pdf\n\n\u305d\u306e\u3082\u306e\u30ba\u30d0\u30ea\u306e\u300cServo\u300d\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u6319\u52d5\u3092\u7406\u89e3\u3057\u305f\u3044\u306e\u3067\u3001\u4eca\u56de\u306f\u81ea\u524d\u3067\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306b\u3088\u308b\u3068\u300120 msec \u5468\u671f (50 Hz) \u3067\u5236\u5fa1\u30d1\u30eb\u30b9(PWM)\u3092\u9001\u308c\u3070\u3088\u3044\u3089\u3057\u3044\u3002\n\u3053\u3053\u306f\u3001\u307e\u3055\u306b Ticker \u306e\u51fa\u756a\u3067\u3059\u3088\u3002\n\u300cESP8266 (ESP-WROOM-02) \u306e\u4fbf\u5229\u30e9\u30a4\u30d6\u30e9\u30ea\u307e\u3068\u3081 (Ticker\u7de8)\u300d\n\n\u30b9\u30b1\u30c3\u30c1\n// SG90\n// http://akizukidenshi.com/download/ds/towerpro/SG90_a.pdf\n// \n// Position \"0\" (  1.45 ms pulse) is middle,\n//         \"90\" ( - 2.4 ms pulse) is all the way to the right,\n//        \"-90\" ( - 0.5 ms pulse) is all the way left.\n\n#include <Ticker.h>\n\nconst int deg000 =  500; // micro sec.\nconst int deg180 = 2400; // micro sec.\n\nint microSec = deg000;\n\n#define PWM_OUT 4\n\nTicker serv1;\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println();\n\n  pinMode(PWM_OUT, OUTPUT);\n\n  // 20 msec\n  serv1.attach_ms(20, pwm);\n}\n\nvoid pwm() {\n  digitalWrite(PWM_OUT, HIGH);\n  delayMicroseconds(microSec);\n  digitalWrite(PWM_OUT, LOW);\n}\n\nvoid loop() {\n  if (0 < Serial.available()) {\n    delay(10);\n    int deg = serialReadAsInt();\n    if (0 <= deg && deg <= 180) {\n      microSec = deg000 + deg / 180.0 * (deg180 - deg000);\n    }\n\n    Serial.print(deg);\n    Serial.print(\" : \");\n    Serial.println(microSec);\n  }\n}\n\nint serialReadAsInt() {\n  char c[9] = \"0\";\n  for (int i = 0; i < 8; i++) {\n    c[i] = Serial.read();\n    if (c[i] == '\\0') {\n      break;\n    }\n  }\n  return atoi( c );\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u30c4\u30fc\u30eb - \u30b7\u30ea\u30a2\u30eb\u30e2\u30cb\u30bf \u3092\u958b\u3044\u3066\u30010 - 180 \u306e\u89d2\u5ea6\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002\n\u30b5\u30fc\u30dc\u304c\u30b8\u30ea\u30b8\u30ea\u3044\u3063\u3066\u307e\u3059\u304c\u3001\u3044\u3044\u611f\u3058\u306b\u5236\u5fa1\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n\u307e\u3068\u3081\n\nWROOM02 \u3067\u30b5\u30fc\u30dc\u3092\u5236\u5fa1\u3057\u307e\u3057\u305f\u3002\nTicker \u306e\u304a\u304b\u3052\u3067\u3001\u968f\u5206\u3068\u7c21\u5358\u306b\u3001\u5b89\u5b9a\u3057\u305f PWM \u304c\u751f\u6210\u3067\u304d\u307e\u3059\u3002\n\u9006\u306b loop( ) \u3067 PWM \u3092\u751f\u6210\u3057\u305f\u5834\u5408\u3060\u3068\u3001\u4ed6\u306e\u51e6\u7406\u306b\u5f71\u97ff\u3055\u308c\u3066 PWM (\u30b5\u30fc\u30dc\u306e\u89d2\u5ea6) \u304c\u5b89\u5b9a\u3057\u306a\u3044\u3067\u3059\u3002Ticker \u30d0\u30f3\u30b6\u30a4 !!\n2\u500b\u4ee5\u4e0a\u3064\u306a\u3052\u308b\u5834\u5408\u306f\u3001PWM \u3092\u30b7\u30ea\u30a2\u30eb\u5316\u3059\u308b\u306e\u304b\u306a\uff1f\uff1f\uff1f \u30b7\u30ea\u30a2\u30eb\u5316 \u3057\u3066 20 msec \u3092\u6b7b\u5b88\u3059\u308b\u305f\u3081\u306b\u306f\u30011\u30d4\u30f3\u3067 20 / 2.4 = 8.xx \u6700\u5927 8 \u500b\u307e\u3067\uff1f\uff1f\uff1f\n\u3061\u3083\u3093\u3068 5 V \u3067\u99c6\u52d5\u3055\u305b\u305f\u3044\u3067\u3059\u304c\u3001\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf (\u30bd\u30fc\u30b9\u30c9\u30e9\u30a4\u30d0) \u3092\u4f7f\u3048\u3070\u3044\u3044\u304b\u306a\uff1f\uff1f\uff1f\n\n\n\u53c2\u8003\u8cc7\u6599\n\n\n\u300c\u5efa\u7bc9\u767a\u660e\u5de5\u4f5c\u30bc\u30df2008: Arduino \u30b5\u30fc\u30dc\u5236\u5fa1\u300d\n\n\u300cArduino\u7de8 \u305d\u306e\uff19 Arduino\u3067\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u3092\u30ad\u30e5\u30a4\u30ad\u30e5\u30a4\u52d5\u304b\u3059\uff01\u300d\n\n## \u6982\u8981\nESP8266 (\u4ee5\u4e0b WROOM02) \u3067\u30b5\u30fc\u30dc\u3092\u5236\u5fa1\u3059\u308b\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-01-10 17.07.32.png](https://qiita-image-store.s3.amazonaws.com/0/69410/2c65df69-0cc7-7b43-ba62-9179ac618b92.png)\n\n\n## \u306f\u3058\u3081\u306b\n\n\u4eca\u56de\u4f7f\u3063\u305f\u30b5\u30fc\u30dc\u306f\u3001SG90 \u3068\u3044\u3046\u3084\u3064\u3002\u79cb\u6708\u3067 400\u5186\u3002\nhttp://akizukidenshi.com/catalog/g/gM-08761/\n\n|\u30ad\u30fc|\u5024|\n|----|----|\n|PWM\u30b5\u30a4\u30af\u30eb|20 \u30df\u30easec|\n|\u5236\u5fa1\u30d1\u30eb\u30b9|0.5\uff5e2.4 \u30df\u30easec|\n|\u5236\u5fa1\u89d2|\u00b1\u7d04 90 \u00b0\uff08180 \u00b0\uff09|\n|\u914d\u7dda|\u8336:GND \u8d64:\u96fb\u6e90[+] \u6a59:\u5236\u5fa1\u4fe1\u53f7<br>[JR\u30bf\u30a4\u30d7]|\n|\u30c8\u30eb\u30af|1.8 kgf\u30fbcm|\n|\u52d5\u4f5c\u901f\u5ea6|0.1\u79d2 / 60\u5ea6|\n|\u52d5\u4f5c\u96fb\u5727|4.8V\uff08\uff5e5V\uff09|\n|\u6e29\u5ea6\u7bc4\u56f2|0 \u2103 \uff5e 55 \u2103|\n|\u5916\u5f62\u5bf8\u6cd5|22.2 x 11.8 x 31 mm|\n|\u91cd\u91cf|9 g|\n\n4.8 V \u99c6\u52d5\u3067\u3059\u304c\u3001WROOM02 \u7528\u306e 3.3 V \u3067\u3001\u53d6\u308a\u6562\u3048\u305a\u3001\u52d5\u4f5c\u3057\u307e\u3057\u305f\u3002\n(\u96fb\u6e90 5 V \u3001\u5236\u5fa1\u4fe1\u53f7 3.3 V \u3067\u306f\u3001\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002)\n\n\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306f\u3053\u3061\u3089\nhttp://akizukidenshi.com/download/ds/towerpro/SG90_a.pdf\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-01-10 17.07.15.png](https://qiita-image-store.s3.amazonaws.com/0/69410/c3f491dd-3807-37fa-187c-96c57f9f330e.png)\n\n\u305d\u306e\u3082\u306e\u30ba\u30d0\u30ea\u306e\u300cServo\u300d\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u6319\u52d5\u3092\u7406\u89e3\u3057\u305f\u3044\u306e\u3067\u3001\u4eca\u56de\u306f\u81ea\u524d\u3067\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306b\u3088\u308b\u3068\u300120 msec \u5468\u671f (50 Hz) \u3067\u5236\u5fa1\u30d1\u30eb\u30b9(PWM)\u3092\u9001\u308c\u3070\u3088\u3044\u3089\u3057\u3044\u3002\n\u3053\u3053\u306f\u3001\u307e\u3055\u306b Ticker \u306e\u51fa\u756a\u3067\u3059\u3088\u3002\n<a href=\"http://qiita.com/exabugs/items/34aab51eb2d35207629b\" target=\"_blank\">\u300cESP8266 (ESP-WROOM-02) \u306e\u4fbf\u5229\u30e9\u30a4\u30d6\u30e9\u30ea\u307e\u3068\u3081 (Ticker\u7de8)\u300d</a>\n\n\n## \u30b9\u30b1\u30c3\u30c1\n```cpp\n// SG90\n// http://akizukidenshi.com/download/ds/towerpro/SG90_a.pdf\n// \n// Position \"0\" (  1.45 ms pulse) is middle,\n//         \"90\" ( - 2.4 ms pulse) is all the way to the right,\n//        \"-90\" ( - 0.5 ms pulse) is all the way left.\n\n#include <Ticker.h>\n\nconst int deg000 =  500; // micro sec.\nconst int deg180 = 2400; // micro sec.\n\nint microSec = deg000;\n\n#define PWM_OUT 4\n\nTicker serv1;\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println();\n\n  pinMode(PWM_OUT, OUTPUT);\n\n  // 20 msec\n  serv1.attach_ms(20, pwm);\n}\n\nvoid pwm() {\n  digitalWrite(PWM_OUT, HIGH);\n  delayMicroseconds(microSec);\n  digitalWrite(PWM_OUT, LOW);\n}\n\nvoid loop() {\n  if (0 < Serial.available()) {\n    delay(10);\n    int deg = serialReadAsInt();\n    if (0 <= deg && deg <= 180) {\n      microSec = deg000 + deg / 180.0 * (deg180 - deg000);\n    }\n\n    Serial.print(deg);\n    Serial.print(\" : \");\n    Serial.println(microSec);\n  }\n}\n\nint serialReadAsInt() {\n  char c[9] = \"0\";\n  for (int i = 0; i < 8; i++) {\n    c[i] = Serial.read();\n    if (c[i] == '\\0') {\n      break;\n    }\n  }\n  return atoi( c );\n}\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n\u30c4\u30fc\u30eb - \u30b7\u30ea\u30a2\u30eb\u30e2\u30cb\u30bf \u3092\u958b\u3044\u3066\u30010 - 180 \u306e\u89d2\u5ea6\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002\n\u30b5\u30fc\u30dc\u304c\u30b8\u30ea\u30b8\u30ea\u3044\u3063\u3066\u307e\u3059\u304c\u3001\u3044\u3044\u611f\u3058\u306b\u5236\u5fa1\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-01-10_17_16_51.png](https://qiita-image-store.s3.amazonaws.com/0/69410/8373e9fb-db7d-8029-17ae-65da9f30c649.png)\n\n## \u307e\u3068\u3081\n - WROOM02 \u3067\u30b5\u30fc\u30dc\u3092\u5236\u5fa1\u3057\u307e\u3057\u305f\u3002\n - Ticker \u306e\u304a\u304b\u3052\u3067\u3001\u968f\u5206\u3068\u7c21\u5358\u306b\u3001\u5b89\u5b9a\u3057\u305f PWM \u304c\u751f\u6210\u3067\u304d\u307e\u3059\u3002\n - \u9006\u306b loop( ) \u3067 PWM \u3092\u751f\u6210\u3057\u305f\u5834\u5408\u3060\u3068\u3001\u4ed6\u306e\u51e6\u7406\u306b\u5f71\u97ff\u3055\u308c\u3066 PWM (\u30b5\u30fc\u30dc\u306e\u89d2\u5ea6) \u304c\u5b89\u5b9a\u3057\u306a\u3044\u3067\u3059\u3002Ticker \u30d0\u30f3\u30b6\u30a4 !!\n - 2\u500b\u4ee5\u4e0a\u3064\u306a\u3052\u308b\u5834\u5408\u306f\u3001PWM \u3092\u30b7\u30ea\u30a2\u30eb\u5316\u3059\u308b\u306e\u304b\u306a\uff1f\uff1f\uff1f <br>\u30b7\u30ea\u30a2\u30eb\u5316 \u3057\u3066 20 msec \u3092\u6b7b\u5b88\u3059\u308b\u305f\u3081\u306b\u306f\u30011\u30d4\u30f3\u3067 20 / 2.4 = 8.xx \u6700\u5927 8 \u500b\u307e\u3067\uff1f\uff1f\uff1f\n - \u3061\u3083\u3093\u3068 5 V \u3067\u99c6\u52d5\u3055\u305b\u305f\u3044\u3067\u3059\u304c\u3001\u30c8\u30e9\u30f3\u30b8\u30b9\u30bf (\u30bd\u30fc\u30b9\u30c9\u30e9\u30a4\u30d0) \u3092\u4f7f\u3048\u3070\u3044\u3044\u304b\u306a\uff1f\uff1f\uff1f\n\n## \u53c2\u8003\u8cc7\u6599\n - <a href=\"http://kousaku-kousaku.blogspot.jp/2008/06/arduino.html\" target=\"_blank\">\u300c\u5efa\u7bc9\u767a\u660e\u5de5\u4f5c\u30bc\u30df2008: Arduino \u30b5\u30fc\u30dc\u5236\u5fa1\u300d<a>\n - <a href=\"http://marupeke296.com/EL_Ard_No9_ServoMotor.html\" target=\"_blank\">\u300cArduino\u7de8 \u305d\u306e\uff19 Arduino\u3067\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u3092\u30ad\u30e5\u30a4\u30ad\u30e5\u30a4\u52d5\u304b\u3059\uff01\u300d</a>\n", "tags": ["ESP8266", "Arduino", "ArduinoIDE", "ESP-WROOM-02", "IoT"]}