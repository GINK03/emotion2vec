{"tags": ["Linux", "AmazonLinux", "EC2", "AWS"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nAWS\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306b\u5bfe\u3057\u3066\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092512MB\u306b\u5897\u3084\u3059\u624b\u9806\u3067\u3059\u3002\n# dd if=/dev/zero of=/swapfile1 bs=1M count=512\n# chmod 600 /swapfile1\n# mkswap /swapfile1\n# swapon /swapfile1\n\n\n\u5bfe\u8c61\u74b0\u5883\n\u5bfe\u8c61\u74b0\u5883\u306fAWS\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306b\u306a\u308a\u307e\u3059\u3002\n\u30fbAmazon Linux (3.14.33-26.47.amzn1.x86_64)\n\n\u6982\u8981\n\u30fb\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u7b49\u306e\u52d5\u4f5c\u691c\u8a3c\u306e\u70ba\u3001AWS\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3092\u4f5c\u6210\u3057\u3066\u52d5\u4f5c\u3092\u8a66\u3059\u4e8b\u304c\u3042\u308a\u307e\u3059\u3002\n\u691c\u8a3c\u7528\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u5b89\u4fa1\u306at2.micro\u3067\u4f5c\u6210\u3059\u308b\u4e8b\u304c\u591a\u3044\u306e\u3067\u3059\u304c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30bf\u30a4\u30d7\u304ct2.micro\u306e\u5834\u5408\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u30e1\u30e2\u30ea\u306f\u7d041GB\u3057\u304b\u306a\u304f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306eSwap\u9818\u57df\u30b5\u30a4\u30ba\u306f\u3068\u3066\u3082\u5c0f\u3055\u3044\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\nhttp://aws.amazon.com/jp/ec2/instance-types/\n\u30fbSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c\u5c11\u306a\u3044\u5834\u5408\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u304c\u5927\u304d\u3081\u306e\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3092\u8d77\u52d5\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001Swap\u9818\u57df\u4e0d\u8db3\u306b\u3088\u308a\u30d7\u30ed\u30bb\u30b9\u306e\u8d77\u52d5\u304c\u5931\u6557\u3059\u308b\u4e8b\u304c\u3042\u308a\u307e\u3059\u3002\n\u30fb\u672c\u30da\u30fc\u30b8\u3067\u306f\u3001\u4e00\u6642\u7684\u306a\u691c\u8a3c\u7528\u9014\u3067\u5229\u7528\u3059\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306b\u5bfe\u3057\u3066\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n\nt2.micro\u3067\u4f5c\u6210\u3057\u305fEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306eSwap\u9818\u57df\u30b5\u30a4\u30ba\n\u4ee5\u4e0b\u306ft2.micro\u3067EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3092\u4f5c\u6210\u3057\u305f\u76f4\u5f8c\u306e\u72b6\u614b\u3067\u3059\u3002\n/proc/meminfo\u3068free\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u3092\u898b\u308b\u3068\u3001t2.micro\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c0KB\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n[root@example-amazon-linux ~]# grep Mem /proc/meminfo\nMemTotal:        1020188 kB\nMemFree:          932568 kB\nMemAvailable:     902024 kB\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188      87612     932576          0       8216      31600\n-/+ buffers/cache:      47796     972392\nSwap:            0          0          0\n[root@example-amazon-linux ~]#\n\n\nAmazon Linux\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u624b\u9806\n\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Amazon Linux\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u306a\u304a\u3001\u4f8b\u793a\u7528\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30db\u30b9\u30c8\u540d\u306f\u300cexample-amazon-linux\u300d\u3068\u8868\u8a18\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n(1)\u300cAWS Management Console\u300d->\u300cEC2\u300d->\u300cLaunch Instance\u300d\u3067EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3092\u4f5c\u6210\u3057\u3001ec2-user\u3067ssh\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n(2) root\u30e6\u30fc\u30b6\u306b\u30b9\u30a4\u30c3\u30c1\u3057\u307e\u3059\u3002\n[ec2-user@example-amazon-linux ~]$ sudo su -\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# uname -a\nLinux example-client 3.14.33-26.47.amzn1.x86_64 #1 SMP Wed Feb 11 22:39:25 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n[root@example-amazon-linux ~]#\n\n(3) \u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30fbSwap\u9818\u57df\u306b\u8ffd\u52a0\u3059\u308b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001512MB\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n[root@example-amazon-linux ~]# dd if=/dev/zero of=/swapfile1 bs=1M count=512\n512+0 records in\n512+0 records out\n536870912 bytes (537 MB) copied, 5.74393 s, 93.5 MB/s\n[root@example-amazon-linux ~]#\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u305f\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# ll /swapfile1\n-rw-r--r-- 1 root root 536870912 Mar  3 00:52 /swapfile1\n[root@example-amazon-linux ~]#\n\n\u30fb\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092644\u304b600\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3057\u306a\u3044\u3068\u3001\u5f8c\u8ff0\u306e\u300cswapon /swapfile1\u300d\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b\u300cinsecure permissions 0644, 0600 suggested.\u300d\u3068\u3044\u3046\u8b66\u544a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092600\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# chmod 600 /swapfile1\n[root@example-amazon-linux ~]#\n\n\u30fb\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092Swap\u9818\u57df\u7528\u306b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# mkswap /swapfile1\nSetting up swapspace version 1, size = 524284 KiB\nno label, UUID=0cf6e114-a01e-45e5-94f6-7c9adf75f5f2\n[root@example-amazon-linux ~]#\n\n\u30fbSwap\u9818\u57df\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u524d\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapon -s\n[root@example-amazon-linux ~]#\n\n(4) \u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u307e\u3059\u3002\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapon /swapfile1\n[root@example-amazon-linux ~]#\n\n\u30fbSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c\u5897\u3048\u305f\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     626832     393356          0       8272     556020\n-/+ buffers/cache:      62540     957648\nSwap:       524284          0     524284\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:        524284 kB\nSwapFree:         524284 kB\n[root@example-amazon-linux ~]#\n\n\nAmazon Linux\u306b\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3059\u624b\u9806\n\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u7121\u52b9\u5316\u3059\u308b\u4e8b\u3067\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3057\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u4e8b\u3082\u53ef\u80fd\u3067\u3059\u3002\n(5) \u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u7121\u52b9\u5316\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3057\u307e\u3059\u3002\n\u30fbSwap\u9818\u57df\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f/swapfile1\u304c\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306a\u308a\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb(/swapfile1)\u3092\u7121\u52b9\u5316\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapoff /swapfile1\n[root@example-amazon-linux ~]#\n\n\u30fbSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c0\u306b\u306a\u308a\u3001swapon -s\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u304c\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapon -s\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     633056     387132          0       8552     559568\n-/+ buffers/cache:      64936     955252\nSwap:            0          0          0\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\n[root@example-amazon-linux ~]#\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# ll /swapfile1\n-rw------- 1 root root 536870912 Mar  3 00:52 /swapfile1\n[root@example-amazon-linux ~]# rm -f /swapfile1\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# ll /swapfile1\nls: cannot access /swapfile1: No such file or directory\n[root@example-amazon-linux ~]#\n\n\nAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u6642\u3001\u81ea\u52d5\u7684\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3059\u308b\nAmazon Linux\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306ereboot\u6642\u3001\u81ea\u52d5\u7684\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n(6) /etc/fstab\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u30fb\u307e\u305a\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u3066\u3044\u308b\u72b6\u614b\u307e\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n\n\u30fb/etc/fstab\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# cp -p /etc/fstab /etc/fstab.ORG\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# echo \"/swapfile1  swap        swap    defaults        0   0\" >> /etc/fstab\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# cat /etc/fstab\n#\nLABEL=/     /           ext4    defaults,noatime  1   1\ntmpfs       /dev/shm    tmpfs   defaults        0   0\ndevpts      /dev/pts    devpts  gid=5,mode=620  0   0\nsysfs       /sys        sysfs   defaults        0   0\nproc        /proc       proc    defaults        0   0\n/swapfile1  swap        swap    defaults        0   0\n[root@example-amazon-linux ~]#\n\n\u30fbAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30ea\u30d6\u30fc\u30c8\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# reboot\n\n\u30fbAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u5f8c\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u6709\u52b9\u5316\u3055\u308c\u3001Swap\u9818\u57df\u30b5\u30a4\u30ba\u304c\u5897\u3048\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[ec2-user@example-amazon-linux ~]$ sudo su -\nLast login: Tue Mar  3 01:22:47 JST 2015 on pts/0\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     118940     901248          0       8164      65472\n-/+ buffers/cache:      45304     974884\nSwap:       524284          0     524284\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:        524284 kB\nSwapFree:         524284 kB\n[root@example-amazon-linux ~]#\n\n\nAmazon Linux\u306b2\u3064\u4ee5\u4e0a\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\u3042\u307e\u308a\u5229\u7528\u3059\u308b\u4e8b\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u4e00\u6642\u7684\u306bSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u305f\u3044\u5834\u5408\u306a\u3069\u3067\u3001Amazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b2\u3064\u4ee5\u4e0a\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u624b\u9806\u3082\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n(7) 1\u3064\u76ee\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb(/swapfile1)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# dd if=/dev/zero of=/swapfile1 bs=1M count=512\n512+0 records in\n512+0 records out\n536870912 bytes (537 MB) copied, 5.83074 s, 92.1 MB/s\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# chmod 600 /swapfile1\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# mkswap /swapfile1\nSetting up swapspace version 1, size = 524284 KiB\nno label, UUID=774163e6-4f2b-4a7a-ae44-85d0fceb668b\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# swapon /swapfile1\n[root@example-amazon-linux ~]#\n\n(8) 2\u3064\u76ee\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb(/swapfile2)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# dd if=/dev/zero of=/swapfile2 bs=1M count=512\n512+0 records in\n512+0 records out\n536870912 bytes (537 MB) copied, 8.54756 s, 62.8 MB/s\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# chmod 600 /swapfile2\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# mkswap /swapfile2\nSetting up swapspace version 1, size = 524284 KiB\nno label, UUID=40b5177e-f5b6-475b-9ea0-f75cb9ed948e\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# swapon /swapfile2\n[root@example-amazon-linux ~]#\n\n(9) 2\u3064\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304cSwap\u9818\u57df\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n512MB\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb2\u3064\u5206(/swapfile1 + /swapfile2)\u304c\u6709\u52b9\u5316\u3055\u308c\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c1GB\u306b\u5897\u3048\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n/swapfile2                              file    524284  0       -2\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     947632      72556          0       8920     869296\n-/+ buffers/cache:      69416     950772\nSwap:      1048568          0    1048568\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:       1048568 kB\nSwapFree:        1048568 kB\n[root@example-amazon-linux ~]#\n\n\n\u6700\u5f8c\u306b\n\u30fb\u4eca\u56de\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u308aSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u305f\u306e\u306f\u3001\u3042\u304f\u307e\u3067\u4e00\u6642\u7684\u306a\u691c\u8a3c\u7528\u306eAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\n\u30fb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u30e1\u30e2\u30ea\u7a7a\u304d\u5bb9\u91cf\u304c\u4e0d\u8db3\u3057\u3001\u30b9\u30ef\u30c3\u30d7\u30a4\u30f3\uff0f\u30b9\u30ef\u30c3\u30d7\u30a2\u30a6\u30c8\u306b\u3088\u308aSwap\u9818\u57df\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u983b\u767a\u3059\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3001\u30c7\u30a3\u30b9\u30afI/O\u304c\u5897\u3048\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u52d5\u4f5c\u304c\u9045\u304f\u306a\u3063\u305f\u308a\u3001\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u304c\u9ad8\u304f\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\u30fb\u672c\u30da\u30fc\u30b8\u306e\u8da3\u65e8\u3068\u306f\u5916\u308c\u305f\u86c7\u8db3\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u6e08\u307f\u307e\u305b\u3093\u304c\u3001\u4e00\u6642\u7684\u306a\u691c\u8a3c\u7528\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u3001\u3082\u3057\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u30b9\u30ef\u30c3\u30d7\u304c\u591a\u767a\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u5834\u5408\u306f\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u81ea\u4f53\u3092\u5897\u3084\u3059\u3001\u3042\u308b\u3044\u306f\u4e0d\u8981\u306b\u30e1\u30e2\u30ea\u3092\u4f7f\u3044\u3059\u304e\u3066\u3044\u308b\u51e6\u7406\u304c\u306a\u3044\u304b\u8abf\u67fb\u3057\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3092\u524a\u6e1b\u3059\u308b\u3068\u3044\u3063\u305f\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3092\u691c\u8a0e\u3057\u305f\u65b9\u304c\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\n\u306f\u3058\u3081\u306b\n===\n\nAWS\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306b\u5bfe\u3057\u3066\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092512MB\u306b\u5897\u3084\u3059\u624b\u9806\u3067\u3059\u3002\n\n```\n# dd if=/dev/zero of=/swapfile1 bs=1M count=512\n# chmod 600 /swapfile1\n# mkswap /swapfile1\n# swapon /swapfile1\n```\n\n\u5bfe\u8c61\u74b0\u5883\n===\n\n\u5bfe\u8c61\u74b0\u5883\u306fAWS\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30fbAmazon Linux (3.14.33-26.47.amzn1.x86_64)\n\n\u6982\u8981\n===\n\n\u30fb\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u7b49\u306e\u52d5\u4f5c\u691c\u8a3c\u306e\u70ba\u3001AWS\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3092\u4f5c\u6210\u3057\u3066\u52d5\u4f5c\u3092\u8a66\u3059\u4e8b\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u691c\u8a3c\u7528\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u5b89\u4fa1\u306at2.micro\u3067\u4f5c\u6210\u3059\u308b\u4e8b\u304c\u591a\u3044\u306e\u3067\u3059\u304c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30bf\u30a4\u30d7\u304ct2.micro\u306e\u5834\u5408\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u30e1\u30e2\u30ea\u306f\u7d041GB\u3057\u304b\u306a\u304f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306eSwap\u9818\u57df\u30b5\u30a4\u30ba\u306f\u3068\u3066\u3082\u5c0f\u3055\u3044\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\nhttp://aws.amazon.com/jp/ec2/instance-types/\n\n\u30fbSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c\u5c11\u306a\u3044\u5834\u5408\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u304c\u5927\u304d\u3081\u306e\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3092\u8d77\u52d5\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001Swap\u9818\u57df\u4e0d\u8db3\u306b\u3088\u308a\u30d7\u30ed\u30bb\u30b9\u306e\u8d77\u52d5\u304c\u5931\u6557\u3059\u308b\u4e8b\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30fb\u672c\u30da\u30fc\u30b8\u3067\u306f\u3001\u4e00\u6642\u7684\u306a\u691c\u8a3c\u7528\u9014\u3067\u5229\u7528\u3059\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306b\u5bfe\u3057\u3066\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n\nt2.micro\u3067\u4f5c\u6210\u3057\u305fEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306eSwap\u9818\u57df\u30b5\u30a4\u30ba\n===\n\n\u4ee5\u4e0b\u306ft2.micro\u3067EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3092\u4f5c\u6210\u3057\u305f\u76f4\u5f8c\u306e\u72b6\u614b\u3067\u3059\u3002\n/proc/meminfo\u3068free\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u3092\u898b\u308b\u3068\u3001t2.micro\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c0KB\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# grep Mem /proc/meminfo\nMemTotal:        1020188 kB\nMemFree:          932568 kB\nMemAvailable:     902024 kB\n[root@example-amazon-linux ~]#\n```\n\n```\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\n[root@example-amazon-linux ~]#\n```\n\n```\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188      87612     932576          0       8216      31600\n-/+ buffers/cache:      47796     972392\nSwap:            0          0          0\n[root@example-amazon-linux ~]#\n```\n\nAmazon Linux\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u624b\u9806\n===\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Amazon Linux\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u306a\u304a\u3001\u4f8b\u793a\u7528\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30db\u30b9\u30c8\u540d\u306f\u300cexample-amazon-linux\u300d\u3068\u8868\u8a18\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n**(1)\u300cAWS Management Console\u300d->\u300cEC2\u300d->\u300cLaunch Instance\u300d\u3067EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3092\u4f5c\u6210\u3057\u3001ec2-user\u3067ssh\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002**\n\n**(2) root\u30e6\u30fc\u30b6\u306b\u30b9\u30a4\u30c3\u30c1\u3057\u307e\u3059\u3002**\n\n```\n[ec2-user@example-amazon-linux ~]$ sudo su -\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# uname -a\nLinux example-client 3.14.33-26.47.amzn1.x86_64 #1 SMP Wed Feb 11 22:39:25 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n[root@example-amazon-linux ~]#\n```\n\n**(3) \u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002**\n\n\u30fbSwap\u9818\u57df\u306b\u8ffd\u52a0\u3059\u308b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001512MB\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# dd if=/dev/zero of=/swapfile1 bs=1M count=512\n512+0 records in\n512+0 records out\n536870912 bytes (537 MB) copied, 5.74393 s, 93.5 MB/s\n[root@example-amazon-linux ~]#\n```\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u305f\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# ll /swapfile1\n-rw-r--r-- 1 root root 536870912 Mar  3 00:52 /swapfile1\n[root@example-amazon-linux ~]#\n```\n\n\u30fb\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092644\u304b600\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3057\u306a\u3044\u3068\u3001\u5f8c\u8ff0\u306e\u300cswapon /swapfile1\u300d\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b\u300cinsecure permissions 0644, 0600 suggested.\u300d\u3068\u3044\u3046\u8b66\u544a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092600\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# chmod 600 /swapfile1\n[root@example-amazon-linux ~]#\n```\n\n\u30fb\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092Swap\u9818\u57df\u7528\u306b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# mkswap /swapfile1\nSetting up swapspace version 1, size = 524284 KiB\nno label, UUID=0cf6e114-a01e-45e5-94f6-7c9adf75f5f2\n[root@example-amazon-linux ~]#\n```\n\n\u30fbSwap\u9818\u57df\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u524d\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n``` \n[root@example-amazon-linux ~]# swapon -s\n[root@example-amazon-linux ~]#\n```\n\n**(4) \u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u307e\u3059\u3002**\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# swapon /swapfile1\n[root@example-amazon-linux ~]#\n```\n\n\u30fbSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c\u5897\u3048\u305f\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n```\n\n```\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     626832     393356          0       8272     556020\n-/+ buffers/cache:      62540     957648\nSwap:       524284          0     524284\n[root@example-amazon-linux ~]#\n```\n\n```\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:        524284 kB\nSwapFree:         524284 kB\n[root@example-amazon-linux ~]#\n```\n\nAmazon Linux\u306b\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3059\u624b\u9806\n===\n\n\u4f5c\u6210\u3057\u305f\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u7121\u52b9\u5316\u3059\u308b\u4e8b\u3067\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3057\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u4e8b\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n**(5) \u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u7121\u52b9\u5316\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3057\u307e\u3059\u3002**\n\n\u30fbSwap\u9818\u57df\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f/swapfile1\u304c\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n```\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb(/swapfile1)\u3092\u7121\u52b9\u5316\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# swapoff /swapfile1\n[root@example-amazon-linux ~]#\n```\n\n\u30fbSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c0\u306b\u306a\u308a\u3001swapon -s\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u304c\u4f55\u3082\u8868\u793a\u3055\u308c\u306a\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# swapon -s\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     633056     387132          0       8552     559568\n-/+ buffers/cache:      64936     955252\nSwap:            0          0          0\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\n[root@example-amazon-linux ~]#\n```\n\n\u30fb\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# ll /swapfile1\n-rw------- 1 root root 536870912 Mar  3 00:52 /swapfile1\n[root@example-amazon-linux ~]# rm -f /swapfile1\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# ll /swapfile1\nls: cannot access /swapfile1: No such file or directory\n[root@example-amazon-linux ~]#\n```\n\nAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u6642\u3001\u81ea\u52d5\u7684\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3059\u308b\n===\n\nAmazon Linux\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306ereboot\u6642\u3001\u81ea\u52d5\u7684\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n**(6) /etc/fstab\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002**\n\n\u30fb\u307e\u305a\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u3066\u3044\u308b\u72b6\u614b\u307e\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n```\n\n\u30fb/etc/fstab\u306b\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# cp -p /etc/fstab /etc/fstab.ORG\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# echo \"/swapfile1  swap        swap    defaults        0   0\" >> /etc/fstab\n[root@example-amazon-linux ~]#\n```\n\n```\n[root@example-amazon-linux ~]# cat /etc/fstab\n#\nLABEL=/     /           ext4    defaults,noatime  1   1\ntmpfs       /dev/shm    tmpfs   defaults        0   0\ndevpts      /dev/pts    devpts  gid=5,mode=620  0   0\nsysfs       /sys        sysfs   defaults        0   0\nproc        /proc       proc    defaults        0   0\n/swapfile1  swap        swap    defaults        0   0\n[root@example-amazon-linux ~]#\n```\n\n\u30fbAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30ea\u30d6\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# reboot\n```\n\n\u30fbAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u5f8c\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304c\u6709\u52b9\u5316\u3055\u308c\u3001Swap\u9818\u57df\u30b5\u30a4\u30ba\u304c\u5897\u3048\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[ec2-user@example-amazon-linux ~]$ sudo su -\nLast login: Tue Mar  3 01:22:47 JST 2015 on pts/0\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     118940     901248          0       8164      65472\n-/+ buffers/cache:      45304     974884\nSwap:       524284          0     524284\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:        524284 kB\nSwapFree:         524284 kB\n[root@example-amazon-linux ~]#\n```\n\nAmazon Linux\u306b2\u3064\u4ee5\u4e0a\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n===\n\n\u3042\u307e\u308a\u5229\u7528\u3059\u308b\u4e8b\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u4e00\u6642\u7684\u306bSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u305f\u3044\u5834\u5408\u306a\u3069\u3067\u3001Amazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b2\u3064\u4ee5\u4e0a\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u624b\u9806\u3082\u8a18\u8f09\u81f4\u3057\u307e\u3059\u3002\n\n**(7) 1\u3064\u76ee\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb(/swapfile1)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002**\n\n```\n[root@example-amazon-linux ~]# dd if=/dev/zero of=/swapfile1 bs=1M count=512\n512+0 records in\n512+0 records out\n536870912 bytes (537 MB) copied, 5.83074 s, 92.1 MB/s\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# chmod 600 /swapfile1\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# mkswap /swapfile1\nSetting up swapspace version 1, size = 524284 KiB\nno label, UUID=774163e6-4f2b-4a7a-ae44-85d0fceb668b\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# swapon /swapfile1\n[root@example-amazon-linux ~]#\n```\n\n**(8) 2\u3064\u76ee\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb(/swapfile2)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002**\n\n```\n[root@example-amazon-linux ~]# dd if=/dev/zero of=/swapfile2 bs=1M count=512\n512+0 records in\n512+0 records out\n536870912 bytes (537 MB) copied, 8.54756 s, 62.8 MB/s\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# chmod 600 /swapfile2\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# mkswap /swapfile2\nSetting up swapspace version 1, size = 524284 KiB\nno label, UUID=40b5177e-f5b6-475b-9ea0-f75cb9ed948e\n[root@example-amazon-linux ~]#\n[root@example-amazon-linux ~]# swapon /swapfile2\n[root@example-amazon-linux ~]#\n```\n\n**(9) 2\u3064\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304cSwap\u9818\u57df\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002**\n\n512MB\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb2\u3064\u5206(/swapfile1 + /swapfile2)\u304c\u6709\u52b9\u5316\u3055\u308c\u3001Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u304c1GB\u306b\u5897\u3048\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n[root@example-amazon-linux ~]# swapon -s\nFilename                                Type            Size    Used    Priority\n/swapfile1                              file    524284  0       -1\n/swapfile2                              file    524284  0       -2\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# free\n             total       used       free     shared    buffers     cached\nMem:       1020188     947632      72556          0       8920     869296\n-/+ buffers/cache:      69416     950772\nSwap:      1048568          0    1048568\n[root@example-amazon-linux ~]#\n\n[root@example-amazon-linux ~]# grep Swap /proc/meminfo\nSwapCached:            0 kB\nSwapTotal:       1048568 kB\nSwapFree:        1048568 kB\n[root@example-amazon-linux ~]#\n```\n\n\u6700\u5f8c\u306b\n===\n\n\u30fb\u4eca\u56de\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u308aSwap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3057\u305f\u306e\u306f\u3001\u3042\u304f\u307e\u3067\u4e00\u6642\u7684\u306a\u691c\u8a3c\u7528\u306eAmazon Linux\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\n\n\u30fb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u30e1\u30e2\u30ea\u7a7a\u304d\u5bb9\u91cf\u304c\u4e0d\u8db3\u3057\u3001\u30b9\u30ef\u30c3\u30d7\u30a4\u30f3\uff0f\u30b9\u30ef\u30c3\u30d7\u30a2\u30a6\u30c8\u306b\u3088\u308aSwap\u9818\u57df\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u983b\u767a\u3059\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3001\u30c7\u30a3\u30b9\u30afI/O\u304c\u5897\u3048\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u52d5\u4f5c\u304c\u9045\u304f\u306a\u3063\u305f\u308a\u3001\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u304c\u9ad8\u304f\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\n\u30fb\u672c\u30da\u30fc\u30b8\u306e\u8da3\u65e8\u3068\u306f\u5916\u308c\u305f\u86c7\u8db3\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u6e08\u307f\u307e\u305b\u3093\u304c\u3001\u4e00\u6642\u7684\u306a\u691c\u8a3c\u7528\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u3001\u3082\u3057\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u30b9\u30ef\u30c3\u30d7\u304c\u591a\u767a\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u5834\u5408\u306f\u3001\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066Swap\u9818\u57df\u306e\u30b5\u30a4\u30ba\u3092\u5897\u3084\u3059\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u81ea\u4f53\u3092\u5897\u3084\u3059\u3001\u3042\u308b\u3044\u306f\u4e0d\u8981\u306b\u30e1\u30e2\u30ea\u3092\u4f7f\u3044\u3059\u304e\u3066\u3044\u308b\u51e6\u7406\u304c\u306a\u3044\u304b\u8abf\u67fb\u3057\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3092\u524a\u6e1b\u3059\u308b\u3068\u3044\u3063\u305f\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3092\u691c\u8a0e\u3057\u305f\u65b9\u304c\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n***\n\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\n"}