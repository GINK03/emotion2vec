{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u984c\u540d\u306bHTML5\u3068\u66f8\u3044\u3066\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u300cWeb Storage\u300d\u3063\u3066HTML5\u304b\u3089\u5206\u96e2\u3055\u308c\u3066\u305f\u3093\u3067\u3059\u306d\u3047\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30bf\u30b0\u304b\u3089\u306f\u4e00\u5fdc\u300cHTML5\u300d\u3092\u5916\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\u524d\u56de\u3001\u524d\u3005\u56de\u306e\u7d9a\u304d\u3067\u3001\u84c4\u3048\u305f\u5c65\u6b74\u3092\u4fdd\u5b58\u3057\u3066\u307f\u307e\u3059\u3002\n\u203b\uff1a\u300clocalStorage\u300d\u306f\u30ed\u30fc\u30ab\u30ebHTML\u306e\u5834\u5408\u3001IE\u3067\u306f\u4f7f\u7528\u51fa\u6765\u306a\u3044\u3089\u3057\u3044\u3067\u3059\u3002\uff08\u73fe\u5728\u30bd\u30fc\u30b9\u691c\u7d22\u4e2d\uff09\n\nlocalStorage\nW3C\u306e\u4ed5\u69d8\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\nIDL\ninterface Storage {\n  readonly attribute unsigned long length;\n  DOMString key(unsigned long index);\n  getter DOMString getItem(DOMString key);\n  setter void setItem(DOMString key, DOMString value);\n  deleter void removeItem(DOMString key);\n  void clear();\n};\n\n\n\u5c5e\u60271\u3064\u3001\u30e1\u30bd\u30c3\u30c9\u304c\uff15\u3064\u3068\u3044\u3046\u4e8b\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\n\n\u5c5e\u6027\u540d\n\u6982\u8981\n\n\n\n\nlength\nStorage\u306e\u8981\u7d20\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\n\n\n\n\n\u30e1\u30bd\u30c3\u30c9\u540d\n\u6982\u8981\n\n\n\n\nkey\n\u5f15\u6570\u756a\u76ee\u306e\u30ad\u30fc\u540d\u3092\u8fd4\u3057\u307e\u3059\u3001\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306fnull\u3092\u8fd4\u308a\u307e\u3059\u3002\n\n\ngetItem\n\u5f15\u6570\u306e\u30ad\u30fc\u540d\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024\u3092\u8fd4\u3057\u307e\u3059\u3001\u30ad\u30fc\u540d\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306fnull\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\nsetItem\n\u5f15\u6570\u306e\u30ad\u30fc\u540d\u306b\u5f15\u6570\u306e\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3001\u3059\u3067\u306b\u30ad\u30fc\u540d\u304c\u5b58\u5728\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002\n\n\nremoveItem\n\u5f15\u6570\u306e\u30ad\u30fc\u540d\u3092\u524a\u9664\u3057\u307e\u3059\u3002Storage\u306e\u8981\u7d20\u6570\u3082\u6e1b\u5c11\u3057\u307e\u3059\u3002\n\n\nclear\nStorage\u306e\u5168\u3066\u306e\u8981\u7d20\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\n\n\n\u30b5\u30f3\u30d7\u30eb\nconsole.log(\"length:\" + localStorage.length);\nfor (var i = 0; i < localStorage.length; i++) {\n    console.log(localStorage.key(i) + \"=\" + localStorage.getItem(localStorage.key(i)));\n}\n\n\u73fe\u5728\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u8981\u7d20\u3092\u5168\u3066\u51fa\u529b\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n\u5b9f\u88c5\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <title>\u30e1\u30fc\u30eb\u4f5c\u6210</title>\n    <style>\n        * {font-family: monospace}\n    </style>\n    <script>\n        var HISTORY_MAX = 5;\n        var LOCALSTORAGE_KEY = \"sample_localstorage_key_001\";\n        var hist = [];\n        function init() {\n            var value = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\n            if (value) {\n                hist = hist.concat(value);\n                setOptions();\n            }\n            document.getElementById(\"createbtn\").addEventListener(\"click\", createEmail, true);\n        }\n        function createEmail() {\n            var who = document.getElementById(\"who\").value;\n            if (who) {\n                var tmp = [];\n                tmp.push(who);\n                for (var i = 0; i < hist.length; i++) {\n                    if (hist[i] !== who) {\n                        tmp.push(hist[i]);\n                    }\n                    if (tmp.length >= HISTORY_MAX) {\n                        break;\n                    }\n                }\n                hist = tmp;\n                setOptions();\n                localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(hist));\n            }\n            document.getElementById(\"who\").value = null;\n        }\n        function setOptions() {\n            var element = document.getElementById(\"wholist\");\n            while (element.firstChild) { element.removeChild(element.firstChild); }\n            for (var i = 0; i < hist.length; i++) {\n                var option = document.createElement(\"option\");\n                option.setAttribute(\"value\", hist[i]);\n                element.appendChild(option);\n            }\n        }\n        window.onload = init;\n    </script>\n</head>\n<body>\n    <table>\n        <tr><td>\u8ab0\uff1f</td><td><input id=\"who\" list=\"wholist\" type=\"text\" value=\"\" size=\"50\" />\n        <datalist id=\"wholist\"></datalist></td></tr>\n        <tr><td colspan=\"2\"<td><button id=\"createbtn\">\u4f5c\u6210</button></td></tr>\n    </table>\n</body>\n</html>\n\n\u90e8\u5206\u7684\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nlocalStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(hist));\n\n\u4fdd\u5b58\u90e8\u5206\u3067\u3059\u3001\u5024\u3092JSON\u6587\u5b57\u5217\u306b\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\nvar value = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\nif (value) {\n    hist = hist.concat(value);\n\n\u8aad\u307f\u51fa\u3057\u90e8\u5206\u3067\u3059\u3001JSON\u6587\u5b57\u5217\u5316\u3057\u3066\u3042\u3063\u305f\u3082\u306e\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u76f4\u3057\u3001\u914d\u5217\u306b\u5165\u308c\u306a\u304a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3055\u3044\u3054\u306b\n\u601d\u3063\u305f\u3088\u308a\u7c21\u5358\u3067\u3057\u305f\u3002\n\u305f\u3060\u3057\u3001\u30ed\u30fc\u30ab\u30ebHTML\u306e\u5834\u5408\u300cfile://\u300d\u3067localStorage\u306f1\u3064\u3068\u307f\u306a\u3055\u308c\u308b\u307f\u305f\u3044\u3067\u3002\n\u300cclear\u300d\u30e1\u30bd\u30c3\u30c9\u3067\u5168\u3066\u304c\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u3001\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n##\u306f\u3058\u3081\u306b\n\n\u984c\u540d\u306bHTML5\u3068\u66f8\u3044\u3066\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u300cWeb Storage\u300d\u3063\u3066HTML5\u304b\u3089\u5206\u96e2\u3055\u308c\u3066\u305f\u3093\u3067\u3059\u306d\u3047\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30bf\u30b0\u304b\u3089\u306f\u4e00\u5fdc\u300cHTML5\u300d\u3092\u5916\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n[\u524d\u56de](http://qiita.com/tnakagawa/items/69be0fe53c830782bb8d)\u3001[\u524d\u3005\u56de](http://qiita.com/tnakagawa/items/b4a4160f13fcbcf66f83)\u306e\u7d9a\u304d\u3067\u3001\u84c4\u3048\u305f\u5c65\u6b74\u3092\u4fdd\u5b58\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u203b\uff1a\u300clocalStorage\u300d\u306f\u30ed\u30fc\u30ab\u30ebHTML\u306e\u5834\u5408\u3001IE\u3067\u306f\u4f7f\u7528\u51fa\u6765\u306a\u3044\u3089\u3057\u3044\u3067\u3059\u3002\uff08\u73fe\u5728\u30bd\u30fc\u30b9\u691c\u7d22\u4e2d\uff09\n\n##localStorage\n\n[W3C](https://www.w3.org/TR/webstorage/)\u306e\u4ed5\u69d8\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\n```text:IDL\ninterface Storage {\n  readonly attribute unsigned long length;\n  DOMString key(unsigned long index);\n  getter DOMString getItem(DOMString key);\n  setter void setItem(DOMString key, DOMString value);\n  deleter void removeItem(DOMString key);\n  void clear();\n};\n```\n\n\u5c5e\u60271\u3064\u3001\u30e1\u30bd\u30c3\u30c9\u304c\uff15\u3064\u3068\u3044\u3046\u4e8b\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n| \u5c5e\u6027\u540d | \u6982\u8981 |\n|:-----------|:------------|\n| length | Storage\u306e\u8981\u7d20\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002 |\n\n\n| \u30e1\u30bd\u30c3\u30c9\u540d | \u6982\u8981 |\n|:---------|:------------|\n| key | \u5f15\u6570\u756a\u76ee\u306e\u30ad\u30fc\u540d\u3092\u8fd4\u3057\u307e\u3059\u3001\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306fnull\u3092\u8fd4\u308a\u307e\u3059\u3002 |\n| getItem | \u5f15\u6570\u306e\u30ad\u30fc\u540d\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024\u3092\u8fd4\u3057\u307e\u3059\u3001\u30ad\u30fc\u540d\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306fnull\u3092\u8fd4\u3057\u307e\u3059\u3002 |\n| setItem | \u5f15\u6570\u306e\u30ad\u30fc\u540d\u306b\u5f15\u6570\u306e\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3001\u3059\u3067\u306b\u30ad\u30fc\u540d\u304c\u5b58\u5728\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002 |\n| removeItem | \u5f15\u6570\u306e\u30ad\u30fc\u540d\u3092\u524a\u9664\u3057\u307e\u3059\u3002Storage\u306e\u8981\u7d20\u6570\u3082\u6e1b\u5c11\u3057\u307e\u3059\u3002 |\n| clear| Storage\u306e\u5168\u3066\u306e\u8981\u7d20\u3092\u524a\u9664\u3057\u307e\u3059\u3002 |\n\n\n##\u30b5\u30f3\u30d7\u30eb\n\n```js\nconsole.log(\"length:\" + localStorage.length);\nfor (var i = 0; i < localStorage.length; i++) {\n\tconsole.log(localStorage.key(i) + \"=\" + localStorage.getItem(localStorage.key(i)));\n}\n```\n\n\u73fe\u5728\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u8981\u7d20\u3092\u5168\u3066\u51fa\u529b\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n##\u5b9f\u88c5\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\t<meta charset=\"utf-8\">\n\t<title>\u30e1\u30fc\u30eb\u4f5c\u6210</title>\n\t<style>\n\t\t* {font-family: monospace}\n\t</style>\n\t<script>\n\t\tvar HISTORY_MAX = 5;\n\t\tvar LOCALSTORAGE_KEY = \"sample_localstorage_key_001\";\n\t\tvar hist = [];\n\t\tfunction init() {\n\t\t\tvar value = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\n\t\t\tif (value) {\n\t\t\t\thist = hist.concat(value);\n\t\t\t\tsetOptions();\n\t\t\t}\n\t\t\tdocument.getElementById(\"createbtn\").addEventListener(\"click\", createEmail, true);\n\t\t}\n\t\tfunction createEmail() {\n\t\t\tvar who = document.getElementById(\"who\").value;\n\t\t\tif (who) {\n\t\t\t\tvar tmp = [];\n\t\t\t\ttmp.push(who);\n\t\t\t\tfor (var i = 0; i < hist.length; i++) {\n\t\t\t\t\tif (hist[i] !== who) {\n\t\t\t\t\t\ttmp.push(hist[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif (tmp.length >= HISTORY_MAX) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thist = tmp;\n\t\t\t\tsetOptions();\n\t\t\t\tlocalStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(hist));\n\t\t\t}\n\t\t\tdocument.getElementById(\"who\").value = null;\n\t\t}\n\t\tfunction setOptions() {\n\t\t\tvar element = document.getElementById(\"wholist\");\n\t\t\twhile (element.firstChild) { element.removeChild(element.firstChild); }\n\t\t\tfor (var i = 0; i < hist.length; i++) {\n\t\t\t\tvar option = document.createElement(\"option\");\n\t\t\t\toption.setAttribute(\"value\", hist[i]);\n\t\t\t\telement.appendChild(option);\n\t\t\t}\n\t\t}\n\t\twindow.onload = init;\n\t</script>\n</head>\n<body>\n\t<table>\n\t\t<tr><td>\u8ab0\uff1f</td><td><input id=\"who\" list=\"wholist\" type=\"text\" value=\"\" size=\"50\" />\n\t\t<datalist id=\"wholist\"></datalist></td></tr>\n\t\t<tr><td colspan=\"2\"<td><button id=\"createbtn\">\u4f5c\u6210</button></td></tr>\n\t</table>\n</body>\n</html>\n```\n\n\u90e8\u5206\u7684\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n```js\nlocalStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(hist));\n```\n\u4fdd\u5b58\u90e8\u5206\u3067\u3059\u3001\u5024\u3092JSON\u6587\u5b57\u5217\u306b\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\n```js\nvar value = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\nif (value) {\n\thist = hist.concat(value);\n```\n\n\u8aad\u307f\u51fa\u3057\u90e8\u5206\u3067\u3059\u3001JSON\u6587\u5b57\u5217\u5316\u3057\u3066\u3042\u3063\u305f\u3082\u306e\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u76f4\u3057\u3001\u914d\u5217\u306b\u5165\u308c\u306a\u304a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n##\u3055\u3044\u3054\u306b\n\n\u601d\u3063\u305f\u3088\u308a\u7c21\u5358\u3067\u3057\u305f\u3002\n\u305f\u3060\u3057\u3001\u30ed\u30fc\u30ab\u30ebHTML\u306e\u5834\u5408\u300cfile://\u300d\u3067localStorage\u306f1\u3064\u3068\u307f\u306a\u3055\u308c\u308b\u307f\u305f\u3044\u3067\u3002\n\u300cclear\u300d\u30e1\u30bd\u30c3\u30c9\u3067\u5168\u3066\u304c\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u3001\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n", "tags": ["localStorage"]}