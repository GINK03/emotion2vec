{"context": "Qualcomm adds the BatteryMeterDrawable to show battery charging animation on Android N. It causes StatusBar updating every 0.5 seconds. And it decrease video playback performance.\nprivate static final int ANIM_DURATION = 500;\n\nFor example, when you playback a video in full screen with Gallery. You can't see battery charging, but charging animation still be running. This does impact performance.\nI disable battery animation by set showChargingAnim = false by default.\ndiff --git a/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java b/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java\nindex 702157a..2696561 100755\n--- a/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java\n+++ b/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java\n@@ -349,8 +349,8 @@ public class BatteryMeterDrawable extends Drawable implements\n\n     @Override\n     public void draw(Canvas c) {\n-        final boolean showChargingAnim\n-                = mContext.getResources().getBoolean(R.bool.config_show_battery_charging_anim);\n+        final boolean showChargingAnim = false;\n+                // = mContext.getResources().getBoolean(R.bool.config_show_battery_charging_anim);\n         final int level = showChargingAnim\n                 ? updateChargingAnimLevel()\n                 : mLevel;\n\nTo avoid modify code in frameworks/base directory directly, you can use PRODUCE_PACKAGES_OVERLAYS to overwrite config_show_battery_charging_anim in your own project.\nQualcomm adds the BatteryMeterDrawable to show battery charging animation on Android N. It causes StatusBar updating every 0.5 seconds. And it decrease video playback performance.\n\n```c++\nprivate static final int ANIM_DURATION = 500;\n```\n\nFor example, when you playback a video in full screen with Gallery. You can't see battery charging, but charging animation still be running. This does impact performance.\n\nI disable battery animation by set showChargingAnim = false by default.\n\n```diff\ndiff --git a/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java b/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java\nindex 702157a..2696561 100755\n--- a/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java\n+++ b/packages/SystemUI/src/com/android/systemui/BatteryMeterDrawable.java\n@@ -349,8 +349,8 @@ public class BatteryMeterDrawable extends Drawable implements\n \n     @Override\n     public void draw(Canvas c) {\n-        final boolean showChargingAnim\n-                = mContext.getResources().getBoolean(R.bool.config_show_battery_charging_anim);\n+        final boolean showChargingAnim = false;\n+                // = mContext.getResources().getBoolean(R.bool.config_show_battery_charging_anim);\n         final int level = showChargingAnim\n                 ? updateChargingAnimLevel()\n                 : mLevel;\n```\n\nTo avoid modify code in `frameworks/base` directory directly, you can use `PRODUCE_PACKAGES_OVERLAYS` to overwrite `config_show_battery_charging_anim` in your own project.\n\n\n", "tags": ["Android", "Multimedia", "aosp"]}