{"context": "Aurora\u3092RDS\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3059\u308b\u8a71\u3067\u306f\u306a\u304f\u3001RDS\u3092Aurora\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3059\u308b\u8a71\u3067\u3059\u3002\n\u300c2\u3064\u306eAurora\u30af\u30e9\u30b9\u30bf\u3092\u540c\u671f\u3057\u305f\u304a\u8a71\u300d\u3068\u3044\u3046LT\u3092\u898b\u3066\u3001\u3046\u30fc\u3080\u2026\u3068\u601d\u3063\u3066\u3044\u305f\u3089\u4e00\u5fdc\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306bbinlog\u3092\u4f5c\u3063\u3066\u30ec\u30d7\u30ea\u30ab\u3092\u4f5c\u308b\u65b9\u6cd5\u304c\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u3067\u3057\u305f\n\nAurora \u3068 MySQL \u3068\u306e\u9593\u3001\u307e\u305f\u306f Aurora \u3068\u5225\u306e Aurora DB \u30af\u30e9\u30b9\u30bf\u30fc\u3068\u306e\u9593\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 - Amazon Relational Database Service\n\n\u6587\u7ae0\u304c\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u5b9f\u969b\u306bRDS\u3092Aurora\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n1. Aurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u308b\nDB Cluster Parameter Group\u3067binlog\u3092\u6709\u52b9\u306b\u3057\u3066\u3001Aurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3089\u9069\u5f53\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u3063\u3066\u30c7\u30fc\u30bf\u3092\u5165\u308c\u7d9a\u3051\u307e\u3059\u3002\n~$ mysql -h test.cluster-....rds.amazonaws.com -uroot test\nmysql> create table test (id int primary key auto_increment , num int not null);\nQuery OK, 0 rows affected (0.06 sec)\n\n~$ SQL='insert into test (num) values (1)'\n~$ while true; do mysql -h test.cluster-....rds.amazonaws.com -uroot test -e \"$SQL\"; sleep 0.1; done\n\nbinlog\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\nmysql> show master status;\n+----------------------------+----------+--------------+------------------+-------------------+\n| File                       | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+----------------------------+----------+--------------+------------------+-------------------+\n| mysql-bin-changelog.000003 |    28576 |              |                  |                   |\n+----------------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.01 sec)\n\n\n2. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u3068\u308b\n\u8d77\u52d5\u3057\u305fAurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u3068\u308a\u307e\u3059\u3002\n\n\n3. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304b\u3089\u30c0\u30f3\u30d7\u7528\u306eAurora\u3092\u30ea\u30b9\u30c8\u30a2\n\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\u3059\u308b\u305f\u3081\u306eAurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304b\u3089\u30ea\u30b9\u30c8\u30a2\u3057\u307e\u3059\u3002\n\u3053\u306e\u3068\u304d\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u30b0\u30eb\u30fc\u30d7\u3092\u6307\u5b9a\u3067\u304d\u306a\u3044\u306e\u3067\u8d77\u52d5\u3057\u305f\u3089\u901f\u653b\u3067binlog\u304c\u6709\u52b9\u306aDB Cluster Parameter Group\u306b\u5909\u66f4\u30fb\u518d\u8d77\u52d5\u3057\u307e\u3059\uff08\u306a\u3093\u3067\u6307\u5b9a\u3067\u304d\u306a\u3044\u3093\u3060\u308d\u3046\u2026\uff09\n\n\u30c0\u30f3\u30d7\u7528Aurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u305f\u3089binlog\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n~$ mysql -h test2-cluster.cluster-....rds.amazonaws.com -u root\nmysql> show master logs;\n+----------------------------+-----------+\n| Log_name                   | File_size |\n+----------------------------+-----------+\n| mysql-bin-changelog.000001 |       120 |\n| mysql-bin-changelog.000002 |       852 |\n| mysql-bin-changelog.000003 |    481507 |\n| mysql-bin-changelog.000004 |       120 |\n| mysql-bin-changelog.000005 |       120 |\n+----------------------------+-----------+\n5 rows in set (0.00 sec)\n\nmysql> show binlog events in 'mysql-bin-changelog.000003' from 481507 limit 3 \\G\nEmpty set (0.01 sec)\n\nbinlog\u306e\u672b\u5c3e\u306fmysql-bin-changelog.000003:481507\u2026\u3068\u3002\n\u5ff5\u306e\u305f\u3081\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5143\u306eAurora\u3092\u78ba\u8a8d\u3002\nmysql> show binlog events in 'mysql-bin-changelog.000003' from 481507 limit 3 \\G\n*************************** 1. row ***************************\n   Log_name: mysql-bin-changelog.000003\n        Pos: 481507\n Event_type: Query\n  Server_id: 257197836\nEnd_log_pos: 481586\n       Info: BEGIN\n*************************** 2. row ***************************\n   Log_name: mysql-bin-changelog.000003\n        Pos: 481586\n Event_type: Intvar\n  Server_id: 257197836\nEnd_log_pos: 481618\n       Info: INSERT_ID=1931\n*************************** 3. row ***************************\n   Log_name: mysql-bin-changelog.000003\n        Pos: 481618\n Event_type: Query\n  Server_id: 257197836\nEnd_log_pos: 481725\n       Info: use `test`; insert into test (num) values (1)\n3 rows in set (0.01 sec)\n\n\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u76f4\u5f8c\u306bINSERT_ID=1931\u3067\u30a4\u30f3\u30b5\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u4eca\u5ea6\u306f\u30c0\u30f3\u30d7\u7528\u306eAurora\u306etest\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\u3002\nmysql> select max(id) from test;\n+---------+\n| max(id) |\n+---------+\n|    1930 |\n+---------+\n1 row in set (0.01 sec)\n\nID\u304c1930\u3067\u7d42\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n4. \u30c0\u30f3\u30d7\u7528Aurora\u304b\u3089\u30c0\u30f3\u30d7\u3092\u3068\u3063\u3066RDS\u306b\u30ea\u30b9\u30c8\u30a2\n\u30c0\u30f3\u30d7\u7528Aurora\u9069\u5f53\u306b\u30c0\u30f3\u30d7\u3092\u3068\u308a\u307e\u3059\u3002\n~$ mysqldump -h test2-cluster.cluster-....rds.amazonaws.com -u root -q test | gzip > test-db.sql.gz\n\n\u9069\u5f53\u306aRDS\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001\u30c0\u30f3\u30d7\u3057\u305f\u30c7\u30fc\u30bf\u304b\u3089DB\u3092\u30ea\u30b9\u30c8\u30a2\u3057\u307e\u3059\u3002\n~$ gzcat test-db.sql.gz | mysql -h aurora-slave.....rds.amazonaws.com -u root test\n\n~$ mysql -h aurora-slave.....rds.amazonaws.com -u root test\n\nmysql> show tables;\n+----------------+\n| Tables_in_test |\n+----------------+\n| test           |\n+----------------+\n1 row in set (0.01 sec)\n\nmysql> select max(id) from test;\n+---------+\n| max(id) |\n+---------+\n|    1930 |\n+---------+\n1 row in set (0.00 sec)\n\nmysql>\n\n5. RDS\u3067Aurora\u304b\u3089\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\n\u4f5c\u6210\u3057\u305fRDS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5143\u306eAurora\u304b\u3089\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30dd\u30b8\u30b7\u30e7\u30f3\u306f\u5148\u307b\u3069\u78ba\u8a8d\u3057\u305fmysql-bin-changelog.000003:481507\u3002\nmysql> CALL mysql.rds_set_external_master ('test.cluster-....rds.amazonaws.com', 3306, 'repl', 'repl', 'mysql-bin-changelog.000003', 481507, 0);\nQuery OK, 0 rows affected (0.04 sec)\n\nmysql> CALL mysql.rds_start_replication;\n+-------------------------+\n| Message                 |\n+-------------------------+\n| Slave running normally. |\n+-------------------------+\n1 row in set (1.01 sec)\n\nQuery OK, 0 rows affected (1.01 sec)\n\nmysql> show slave status \\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: test.cluster-....rds.amazonaws.com\n                  Master_User: repl\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql-bin-changelog.000003\n          Read_Master_Log_Pos: 3963982\n               Relay_Log_File: relaylog.000002\n                Relay_Log_Pos: 239582\n        Relay_Master_Log_File: mysql-bin-changelog.000003\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB:\n          Replicate_Ignore_DB:\n           Replicate_Do_Table:\n       Replicate_Ignore_Table: mysql.plugin,mysql.rds_monitor,mysql.rds_sysinfo,mysql.rds_replication_status,mysql.rds_history,innodb_memcache.config_options,innodb_memcache.cache_policies\n      Replicate_Wild_Do_Table:\n  Replicate_Wild_Ignore_Table:\n                   Last_Errno: 0\n                   Last_Error:\n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 720796\n              Relay_Log_Space: 3483216\n              Until_Condition: None\n               Until_Log_File:\n                Until_Log_Pos: 0\n           Master_SSL_Allowed: No\n           Master_SSL_CA_File:\n           Master_SSL_CA_Path:\n              Master_SSL_Cert:\n            Master_SSL_Cipher:\n               Master_SSL_Key:\n        Seconds_Behind_Master: 2263\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error:\n               Last_SQL_Errno: 0\n               Last_SQL_Error:\n  Replicate_Ignore_Server_Ids:\n             Master_Server_Id: 257197836\n                  Master_UUID: 1f365ea0-45b9-3c05-89a9-f168fd7fa515\n             Master_Info_File: mysql.slave_master_info\n                    SQL_Delay: 0\n          SQL_Remaining_Delay: NULL\n      Slave_SQL_Running_State: System lock\n           Master_Retry_Count: 86400\n                  Master_Bind:\n      Last_IO_Error_Timestamp:\n     Last_SQL_Error_Timestamp:\n               Master_SSL_Crl:\n           Master_SSL_Crlpath:\n           Retrieved_Gtid_Set:\n            Executed_Gtid_Set:\n                Auto_Position: 0\n1 row in set (0.00 sec)\n\nmysql> select id from test where id >= 1929 limit 5;\n+------+\n| id   |\n+------+\n| 1929 |\n| 1930 |\n| 1931 |\n| 1932 |\n| 1933 |\n+------+\n5 rows in set (0.01 sec)\n\n\u3053\u308c\u3067RDS\u3092Aurora\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n**Aurora\u3092RDS\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3059\u308b\u8a71**\u3067\u306f\u306a\u304f\u3001**RDS\u3092Aurora\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3059\u308b\u8a71**\u3067\u3059\u3002\n\n\u300c[2\u3064\u306eAurora\u30af\u30e9\u30b9\u30bf\u3092\u540c\u671f\u3057\u305f\u304a\u8a71](https://speakerdeck.com/watura/2tufalseaurorakurasutawotong-qi-sitaohua)\u300d\u3068\u3044\u3046LT\u3092\u898b\u3066\u3001\u3046\u30fc\u3080\u2026\u3068\u601d\u3063\u3066\u3044\u305f\u3089\u4e00\u5fdc\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306bbinlog\u3092\u4f5c\u3063\u3066\u30ec\u30d7\u30ea\u30ab\u3092\u4f5c\u308b\u65b9\u6cd5\u304c\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u3067\u3057\u305f\n\n* [Aurora \u3068 MySQL \u3068\u306e\u9593\u3001\u307e\u305f\u306f Aurora \u3068\u5225\u306e Aurora DB \u30af\u30e9\u30b9\u30bf\u30fc\u3068\u306e\u9593\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 - Amazon Relational Database Service](http://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/Aurora.Overview.Replication.MySQLReplication.html)\n\n\u6587\u7ae0\u304c\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u5b9f\u969b\u306bRDS\u3092Aurora\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# 1. Aurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u308b\n\n**DB Cluster Parameter Group**\u3067binlog\u3092\u6709\u52b9\u306b\u3057\u3066\u3001Aurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-07-10 11.47.11.png](https://qiita-image-store.s3.amazonaws.com/0/20100/bb8cb165-4728-cf68-dfa7-64d1d3a3421c.png)\n\n\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3089\u9069\u5f53\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u3063\u3066\u30c7\u30fc\u30bf\u3092\u5165\u308c\u7d9a\u3051\u307e\u3059\u3002\n\n```\n~$ mysql -h test.cluster-....rds.amazonaws.com -uroot test\nmysql> create table test (id int primary key auto_increment , num int not null);\nQuery OK, 0 rows affected (0.06 sec)\n```\n```\n~$ SQL='insert into test (num) values (1)'\n~$ while true; do mysql -h test.cluster-....rds.amazonaws.com -uroot test -e \"$SQL\"; sleep 0.1; done\n```\n\nbinlog\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```\nmysql> show master status;\n+----------------------------+----------+--------------+------------------+-------------------+\n| File                       | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+----------------------------+----------+--------------+------------------+-------------------+\n| mysql-bin-changelog.000003 |    28576 |              |                  |                   |\n+----------------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.01 sec)\n```\n\n# 2. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u3068\u308b\n\n\u8d77\u52d5\u3057\u305fAurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u3068\u308a\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-07-10 12.04.22.png](https://qiita-image-store.s3.amazonaws.com/0/20100/2beceac2-fe6c-74cb-7395-4a76d88df418.png)\n\n# 3. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304b\u3089\u30c0\u30f3\u30d7\u7528\u306eAurora\u3092\u30ea\u30b9\u30c8\u30a2\n\n\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\u3059\u308b\u305f\u3081\u306eAurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304b\u3089\u30ea\u30b9\u30c8\u30a2\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u3068\u304d\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u30b0\u30eb\u30fc\u30d7\u3092\u6307\u5b9a\u3067\u304d\u306a\u3044\u306e\u3067**\u8d77\u52d5\u3057\u305f\u3089\u901f\u653b\u3067binlog\u304c\u6709\u52b9\u306aDB Cluster Parameter Group\u306b\u5909\u66f4\u30fb\u518d\u8d77\u52d5\u3057\u307e\u3059**\uff08\u306a\u3093\u3067\u6307\u5b9a\u3067\u304d\u306a\u3044\u3093\u3060\u308d\u3046\u2026\uff09\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-07-10 12.18.31.png](https://qiita-image-store.s3.amazonaws.com/0/20100/4583a430-6252-31c9-8f99-fde83b70bc09.png)\n\n\u30c0\u30f3\u30d7\u7528Aurora\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u305f\u3089binlog\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n~$ mysql -h test2-cluster.cluster-....rds.amazonaws.com -u root\nmysql> show master logs;\n+----------------------------+-----------+\n| Log_name                   | File_size |\n+----------------------------+-----------+\n| mysql-bin-changelog.000001 |       120 |\n| mysql-bin-changelog.000002 |       852 |\n| mysql-bin-changelog.000003 |    481507 |\n| mysql-bin-changelog.000004 |       120 |\n| mysql-bin-changelog.000005 |       120 |\n+----------------------------+-----------+\n5 rows in set (0.00 sec)\n\nmysql> show binlog events in 'mysql-bin-changelog.000003' from 481507 limit 3 \\G\nEmpty set (0.01 sec)\n```\n\nbinlog\u306e\u672b\u5c3e\u306f`mysql-bin-changelog.000003:481507`\u2026\u3068\u3002\n\n\u5ff5\u306e\u305f\u3081\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5143\u306eAurora\u3092\u78ba\u8a8d\u3002\n\n```\nmysql> show binlog events in 'mysql-bin-changelog.000003' from 481507 limit 3 \\G\n*************************** 1. row ***************************\n   Log_name: mysql-bin-changelog.000003\n        Pos: 481507\n Event_type: Query\n  Server_id: 257197836\nEnd_log_pos: 481586\n       Info: BEGIN\n*************************** 2. row ***************************\n   Log_name: mysql-bin-changelog.000003\n        Pos: 481586\n Event_type: Intvar\n  Server_id: 257197836\nEnd_log_pos: 481618\n       Info: INSERT_ID=1931\n*************************** 3. row ***************************\n   Log_name: mysql-bin-changelog.000003\n        Pos: 481618\n Event_type: Query\n  Server_id: 257197836\nEnd_log_pos: 481725\n       Info: use `test`; insert into test (num) values (1)\n3 rows in set (0.01 sec)\n```\n\n\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u76f4\u5f8c\u306b`INSERT_ID=1931`\u3067\u30a4\u30f3\u30b5\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u4eca\u5ea6\u306f\u30c0\u30f3\u30d7\u7528\u306eAurora\u306etest\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\u3002\n\n```\nmysql> select max(id) from test;\n+---------+\n| max(id) |\n+---------+\n|    1930 |\n+---------+\n1 row in set (0.01 sec)\n```\n\nID\u304c`1930`\u3067\u7d42\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n# 4. \u30c0\u30f3\u30d7\u7528Aurora\u304b\u3089\u30c0\u30f3\u30d7\u3092\u3068\u3063\u3066RDS\u306b\u30ea\u30b9\u30c8\u30a2\n\n\u30c0\u30f3\u30d7\u7528Aurora\u9069\u5f53\u306b\u30c0\u30f3\u30d7\u3092\u3068\u308a\u307e\u3059\u3002\n\n```\n~$ mysqldump -h test2-cluster.cluster-....rds.amazonaws.com -u root -q test | gzip > test-db.sql.gz\n```\n\n\u9069\u5f53\u306aRDS\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001\u30c0\u30f3\u30d7\u3057\u305f\u30c7\u30fc\u30bf\u304b\u3089DB\u3092\u30ea\u30b9\u30c8\u30a2\u3057\u307e\u3059\u3002\n\n```\n~$ gzcat test-db.sql.gz | mysql -h aurora-slave.....rds.amazonaws.com -u root test\n\n~$ mysql -h aurora-slave.....rds.amazonaws.com -u root test\n\nmysql> show tables;\n+----------------+\n| Tables_in_test |\n+----------------+\n| test           |\n+----------------+\n1 row in set (0.01 sec)\n\nmysql> select max(id) from test;\n+---------+\n| max(id) |\n+---------+\n|    1930 |\n+---------+\n1 row in set (0.00 sec)\n```\n\nmysql>\n# 5. RDS\u3067Aurora\u304b\u3089\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\n\n\u4f5c\u6210\u3057\u305fRDS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5143\u306eAurora\u304b\u3089\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30dd\u30b8\u30b7\u30e7\u30f3\u306f\u5148\u307b\u3069\u78ba\u8a8d\u3057\u305f`mysql-bin-changelog.000003:481507`\u3002\n\n```\nmysql> CALL mysql.rds_set_external_master ('test.cluster-....rds.amazonaws.com', 3306, 'repl', 'repl', 'mysql-bin-changelog.000003', 481507, 0);\nQuery OK, 0 rows affected (0.04 sec)\n\nmysql> CALL mysql.rds_start_replication;\n+-------------------------+\n| Message                 |\n+-------------------------+\n| Slave running normally. |\n+-------------------------+\n1 row in set (1.01 sec)\n\nQuery OK, 0 rows affected (1.01 sec)\n\nmysql> show slave status \\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: test.cluster-....rds.amazonaws.com\n                  Master_User: repl\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql-bin-changelog.000003\n          Read_Master_Log_Pos: 3963982\n               Relay_Log_File: relaylog.000002\n                Relay_Log_Pos: 239582\n        Relay_Master_Log_File: mysql-bin-changelog.000003\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB:\n          Replicate_Ignore_DB:\n           Replicate_Do_Table:\n       Replicate_Ignore_Table: mysql.plugin,mysql.rds_monitor,mysql.rds_sysinfo,mysql.rds_replication_status,mysql.rds_history,innodb_memcache.config_options,innodb_memcache.cache_policies\n      Replicate_Wild_Do_Table:\n  Replicate_Wild_Ignore_Table:\n                   Last_Errno: 0\n                   Last_Error:\n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 720796\n              Relay_Log_Space: 3483216\n              Until_Condition: None\n               Until_Log_File:\n                Until_Log_Pos: 0\n           Master_SSL_Allowed: No\n           Master_SSL_CA_File:\n           Master_SSL_CA_Path:\n              Master_SSL_Cert:\n            Master_SSL_Cipher:\n               Master_SSL_Key:\n        Seconds_Behind_Master: 2263\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error:\n               Last_SQL_Errno: 0\n               Last_SQL_Error:\n  Replicate_Ignore_Server_Ids:\n             Master_Server_Id: 257197836\n                  Master_UUID: 1f365ea0-45b9-3c05-89a9-f168fd7fa515\n             Master_Info_File: mysql.slave_master_info\n                    SQL_Delay: 0\n          SQL_Remaining_Delay: NULL\n      Slave_SQL_Running_State: System lock\n           Master_Retry_Count: 86400\n                  Master_Bind:\n      Last_IO_Error_Timestamp:\n     Last_SQL_Error_Timestamp:\n               Master_SSL_Crl:\n           Master_SSL_Crlpath:\n           Retrieved_Gtid_Set:\n            Executed_Gtid_Set:\n                Auto_Position: 0\n1 row in set (0.00 sec)\n\nmysql> select id from test where id >= 1929 limit 5;\n+------+\n| id   |\n+------+\n| 1929 |\n| 1930 |\n| 1931 |\n| 1932 |\n| 1933 |\n+------+\n5 rows in set (0.01 sec)\n```\n\n\u3053\u308c\u3067RDS\u3092Aurora\u306e\u30b9\u30ec\u30fc\u30d6\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n", "tags": ["MySQL", "Aurora", "RDS", "AWS"]}