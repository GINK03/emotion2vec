{"context": " More than 1 year has passed since last update.SequeceRunner \u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u304c\u3054\u3061\u3083\u3054\u3061\u3083\u3057\u3066\u3066\u30c6\u30b9\u30c8\u5185\u5bb9\u304c\u8aad\u307f\u8f9b\u304b\u3063\u305f\u306e\u3067\u4f5c\u3063\u3066\u307f\u305f\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u304c\n\nbefore\nvar sequence:SequenceRunner = new SequenceRunner( this );\n// anyEvent \u3092\u5f85\u3064\nsequence.addStep( new SequenceWaiter( target, \"anyEvent\", 1000 ) );\n// Target#hoge() \u3092\u547c\u3073\u51fa\u3059\nsequence.addStep( new SequenceCaller( target, function():void {\n  target.hoge();\n} ) );\nsequence.addAssertHandler( function( evt:Event, obj:Object ):void {\n  // target \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e fuga() \u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\n  assertThat( target, received().method( \"fuga\" ) );\n} );\nsequence.run();\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b7\u30f3\u30d7\u30eb\u3067\u898b\u901a\u3057\u306e\u826f\u3044\u30b3\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u3002\n\nafter\nsequence( this )\n.steps(\n  // anyEvent \u3092\u5f85\u3064\n  waitEvent( target, \"anyEvent\" ),\n  // Target#hoge() \u3092\u547c\u3073\u51fa\u3059\n  call( function():void {\n    target.hoge();\n  } )\n)\n.assertion(\n  // target \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e fuga() \u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\n  assertThat( target, received().method( \"fuga\" ) );\n)\n.run();\n\n\n\n\u30b3\u30fc\u30c9\n\nSimplifiedSequenceRunner.as\nimport flash.events.Event;\nimport flash.events.EventDispatcher;\nimport flash.events.IEventDispatcher;\n\nimport org.flexunit.asserts.fail;\nimport org.fluint.sequence.ISequenceStep;\nimport org.fluint.sequence.SequenceCaller;\nimport org.fluint.sequence.SequenceDelay;\nimport org.fluint.sequence.SequenceEventDispatcher;\nimport org.fluint.sequence.SequenceRunner;\nimport org.fluint.sequence.SequenceWaiter;\n\n/**\n * FluentableSequenceRunner \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction sequence( testCase:* ):SimplifiedSequenceRunner\n{\n    return new SimplifiedSequenceRunner( testCase );\n}\n\n/**\n * SequenceWaiter \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction waitEvent( target:IEventDispatcher, eventName:String ):ISequenceStep\n{\n    return new SequenceWaiter( target, eventName, 3000, function( obj:Object ):void {\n        fail( \"Timeout Occurred before expected event (\" + eventName + \")\" );\n    } );\n}\n\n/**\n * SequenceWaiter \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction dispatchEvent( target:EventDispatcher, event:Event ):ISequenceStep\n{\n    return new SequenceEventDispatcher( target, event );\n}\n\n/**\n * SequenceDelay \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction delay( milliSec:int ):ISequenceStep\n{\n    return new SequenceDelay( milliSec );\n}\n\n/**\n * SequenceCaller \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction call( target:IEventDispatcher, procedure:Function ):ISequenceStep\n{\n    return new SequenceCaller( target, procedure );\n}\n\n/**\n * SequenceRunner \u3092\u4f7f\u7528\u3057\u305f\u30c6\u30b9\u30c8\u3092\u7c21\u6f54\u306b\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30af\u30e9\u30b9\n */\nclass SimplifiedSequenceRunner\n{\n    private var runner:SequenceRunner;\n\n    /**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n     */\n    public function SimplifiedSequenceRunner( testCase:* )\n    {\n        runner = new SequenceRunner( testCase );\n    }\n\n    /**\n     * SequenceStep \u306e\u8ffd\u52a0\n     */\n    public function steps( ...args ):SimplifiedSequenceRunner\n    {\n        for each ( var step:ISequenceStep in args )\n            runner.addStep( step );\n        return this;\n    }\n\n    /**\n     * AssertHandler \u306e\u8ffd\u52a0\n     */\n    public function assertion( assertFunc:Function ):SimplifiedSequenceRunner\n    {\n        runner.addAssertHandler( function( evt:Event, obj:Object ):void {\n            assertFunc();\n        }, null );\n        return this;\n    }\n\n    /**\n     * SequenceRunner \u306e\u5b9f\u884c\n     */\n    public function run():void\n    {\n        runner.run();\n    }\n}\n\n\n\n\u4f7f\u3044\u65b9\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u3092\u9069\u5f53\u306a\u5834\u6240\u306b\u683c\u7d0d\u3057\u3066\u5f53\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u4f7f\u3044\u305f\u3044\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306eas\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\uff08 package \u5b9a\u7fa9\u306e\u5916\uff09\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b include \u3057\u307e\u3059\u3002\uff08include \u306e\u30d1\u30b9\u306f\u76f8\u5bfe\u30d1\u30b9\u3067\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u6ce8\u610f\uff09\npackage com.hoge.fuga {\n   \u2026 \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306f\u7701\u7565 \u2026 \n}\n\ninclude \"../../includes/SimplifiedSequenceRunner.as\";\n\n\nSequeceRunner \u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u304c\u3054\u3061\u3083\u3054\u3061\u3083\u3057\u3066\u3066\u30c6\u30b9\u30c8\u5185\u5bb9\u304c\u8aad\u307f\u8f9b\u304b\u3063\u305f\u306e\u3067\u4f5c\u3063\u3066\u307f\u305f\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u304c\n\n```actionscript:before\nvar sequence:SequenceRunner = new SequenceRunner( this );\n// anyEvent \u3092\u5f85\u3064\nsequence.addStep( new SequenceWaiter( target, \"anyEvent\", 1000 ) );\n// Target#hoge() \u3092\u547c\u3073\u51fa\u3059\nsequence.addStep( new SequenceCaller( target, function():void {\n  target.hoge();\n} ) );\nsequence.addAssertHandler( function( evt:Event, obj:Object ):void {\n  // target \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e fuga() \u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\n  assertThat( target, received().method( \"fuga\" ) );\n} );\nsequence.run();\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b7\u30f3\u30d7\u30eb\u3067\u898b\u901a\u3057\u306e\u826f\u3044\u30b3\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u3002\n\n```actionscript:after\nsequence( this )\n.steps(\n  // anyEvent \u3092\u5f85\u3064\n  waitEvent( target, \"anyEvent\" ),\n  // Target#hoge() \u3092\u547c\u3073\u51fa\u3059\n  call( function():void {\n    target.hoge();\n  } )\n)\n.assertion(\n  // target \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e fuga() \u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3053\u3068\n  assertThat( target, received().method( \"fuga\" ) );\n)\n.run();\n```\n\n# \u30b3\u30fc\u30c9\n\n```actionscript:SimplifiedSequenceRunner.as\nimport flash.events.Event;\nimport flash.events.EventDispatcher;\nimport flash.events.IEventDispatcher;\n\nimport org.flexunit.asserts.fail;\nimport org.fluint.sequence.ISequenceStep;\nimport org.fluint.sequence.SequenceCaller;\nimport org.fluint.sequence.SequenceDelay;\nimport org.fluint.sequence.SequenceEventDispatcher;\nimport org.fluint.sequence.SequenceRunner;\nimport org.fluint.sequence.SequenceWaiter;\n\n/**\n * FluentableSequenceRunner \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction sequence( testCase:* ):SimplifiedSequenceRunner\n{\n\treturn new SimplifiedSequenceRunner( testCase );\n}\n\n/**\n * SequenceWaiter \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction waitEvent( target:IEventDispatcher, eventName:String ):ISequenceStep\n{\n\treturn new SequenceWaiter( target, eventName, 3000, function( obj:Object ):void {\n\t\tfail( \"Timeout Occurred before expected event (\" + eventName + \")\" );\n\t} );\n}\n\n/**\n * SequenceWaiter \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction dispatchEvent( target:EventDispatcher, event:Event ):ISequenceStep\n{\n\treturn new SequenceEventDispatcher( target, event );\n}\n\n/**\n * SequenceDelay \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction delay( milliSec:int ):ISequenceStep\n{\n\treturn new SequenceDelay( milliSec );\n}\n\n/**\n * SequenceCaller \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n */\nfunction call( target:IEventDispatcher, procedure:Function ):ISequenceStep\n{\n\treturn new SequenceCaller( target, procedure );\n}\n\n/**\n * SequenceRunner \u3092\u4f7f\u7528\u3057\u305f\u30c6\u30b9\u30c8\u3092\u7c21\u6f54\u306b\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30af\u30e9\u30b9\n */\nclass SimplifiedSequenceRunner\n{\n\tprivate var runner:SequenceRunner;\n\t\n\t/**\n\t * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\t */\n\tpublic function SimplifiedSequenceRunner( testCase:* )\n\t{\n\t\trunner = new SequenceRunner( testCase );\n\t}\n\t\n\t/**\n\t * SequenceStep \u306e\u8ffd\u52a0\n\t */\n\tpublic function steps( ...args ):SimplifiedSequenceRunner\n\t{\n\t\tfor each ( var step:ISequenceStep in args )\n\t\t\trunner.addStep( step );\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * AssertHandler \u306e\u8ffd\u52a0\n\t */\n\tpublic function assertion( assertFunc:Function ):SimplifiedSequenceRunner\n\t{\n\t\trunner.addAssertHandler( function( evt:Event, obj:Object ):void {\n\t\t\tassertFunc();\n\t\t}, null );\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * SequenceRunner \u306e\u5b9f\u884c\n\t */\n\tpublic function run():void\n\t{\n\t\trunner.run();\n\t}\n}\n```\n\n# \u4f7f\u3044\u65b9\n\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u3092\u9069\u5f53\u306a\u5834\u6240\u306b\u683c\u7d0d\u3057\u3066\u5f53\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u4f7f\u3044\u305f\u3044\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306eas\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\uff08 package \u5b9a\u7fa9\u306e\u5916\uff09\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b include \u3057\u307e\u3059\u3002\uff08include \u306e\u30d1\u30b9\u306f\u76f8\u5bfe\u30d1\u30b9\u3067\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u6ce8\u610f\uff09\n\n```\npackage com.hoge.fuga {\n   \u2026 \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306f\u7701\u7565 \u2026 \n}\n\ninclude \"../../includes/SimplifiedSequenceRunner.as\";\n```", "tags": ["flash", "ActionScript", "flexunit", "Flex"]}