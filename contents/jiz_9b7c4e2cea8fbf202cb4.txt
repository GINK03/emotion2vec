{"context": "\u3084\u3063\u3066\u307f\u305f\u3053\u3068\u3092\u6de1\u3005\u3068\u3002\n\n\u74b0\u5883\n\nDocker 1.9.1\nUbuntu 15.04\n\n\n\u53c2\u8003\n\nnetwork create\n\n\n\u5b9f\u884c\n\n\u4f5c\u6210\n\u4f5c\u6210\u306e\u57fa\u672c\u5f62\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n$ docker network create \\\n    --driver=bridge \\\n    --subnet=172.30.0.0/16 \\\n    --gateway=172.30.0.8 \\\n    mynet\nde40d30a63ab9b17df4c4f8ad1c93d176b56f44afe314635f0f96f44afe314635b07fb602b07fb602de40d30a63ab9b17f3d3\n\n\u5b9f\u884c\u3059\u308b\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e ID \u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n\n\u88dc\u8db3\n\n\n--subnet \u3092\u7701\u7565\u3059\u308b\u3068 Docker \u6a19\u6e96\u30d6\u30ea\u30c3\u30b8\u306e 172.17.0.0/16 \u3092\u8d77\u70b9\u306b 172.18.0.0/16 , 172.19.0.0/16 \u3068\u3001\u7e70\u308a\u4e0a\u3052\u305f\u5024\u304c\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n\n--gateway \u3092\u7701\u7565\u3059\u308b\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7bc4\u56f2\u306e\u3046\u3061\u3001\u4e00\u756a\u5024\u306e\u5c0f\u3055\u306a\u3082\u306e\u304c\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n\u4e0a\u3067\u306f\u4f7f\u3063\u3066\u3044\u306a\u3044\u304c -o com.docker.network.bridge.name=bridgename \u3068\u3059\u308b\u3053\u3068\u3067\u3001\u30d6\u30ea\u30c3\u30b8\u306e\u540d\u524d\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u6a19\u6e96\u3067\u306f br-XXXXXXXXXXXX \u5f62\u5f0f\u306e\u540d\u524d\u304c\u4ed8\u304f\u3002\u3053\u306e 12\u6841\u306e X \u306f \u30cd\u30c3\u30c8\u30ef\u30fc\u30af ID \u306e\u5148\u982d\u90e8\u5206\u304c\u5165\u308b\u3002\n\n\n\n\n\u78ba\u8a8d\nDocker \u304c\u7ba1\u7406\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u306b\u306f docker network ls \u3092\u4f7f\u3046\u3002\n$ docker network ls     \nNETWORK ID          NAME                DRIVER\nf3c95be71222        none                null                \n109db1b78591        host                host                \nde40d30a63ab        mynet               bridge              \n795b9950cbed        bridge              bridge       \n\nip \u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3002\n$ ip route\n172.17.0.0/16 dev docker0  proto kernel  scope link  src 172.17.0.1 \n172.30.0.0/16 dev br-de40d30a63ab  proto kernel  scope link  src 172.30.0.1\n\n\u4f5c\u6210\u6642\u306b\u8a2d\u5b9a\u3057\u305f\u30b5\u30d6\u30cd\u30c3\u30c8\u306e\u5024\u306b br-XXXXXXXXXXXX \u5f62\u5f0f\u306e\u540d\u524d\u3067\u30d6\u30ea\u30c3\u30b8\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3002\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a73\u7d30\u306f docker network inspect mynet \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n$ docker network inspect mynet \n[\n    {\n        \"Name\": \"mynet\",\n        \"Id\": \"de40d30a63ab9b17df4c4f8ad1c93d176b56f44afe314635f0f96f44afe314635b07fb602b07fb602de40d30a63ab9b17f3d3\",\n...\n\n\n\u4f7f\u7528\n\u4f7f\u7528\u3059\u308b\u306b\u306f docker run \u6642\u306b --net \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4f5c\u6210\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\u3002\n$ docker run --net=mynet ubuntu\n\nip route \u3067\u78ba\u8a8d\u3059\u308b\u3068\u3001\u4f5c\u6210\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u7bc4\u56f2\u306b\u30b3\u30f3\u30c6\u30ca\u304c\u53ce\u307e\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n$ docker run --net=mynet ubuntu ip route\ndefault via 172.30.0.8 dev eth0 \n172.30.0.0/16 dev eth0  proto kernel  scope link  src 172.30.0.1 \n\n\n\u524a\u9664\n\u524a\u9664\u306f docker network rm \u3002\n$ docker network rm mynet\n\n\u3061\u306a\u307f\u306b\u4f7f\u7528\u4e2d\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u524a\u9664\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n$ docker network rm mynet \nError response from daemon: network mynet has active endpoints\n\n\u3084\u3063\u3066\u307f\u305f\u3053\u3068\u3092\u6de1\u3005\u3068\u3002\n\n\u74b0\u5883\n----\n\n- Docker 1.9.1\n- Ubuntu 15.04\n\n\u53c2\u8003\n----\n\n- [network create](https://docs.docker.com/engine/reference/commandline/network_create/)\n\n\u5b9f\u884c\n----\n\n### \u4f5c\u6210\n\n\u4f5c\u6210\u306e\u57fa\u672c\u5f62\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n~~~bash\n$ docker network create \\\n    --driver=bridge \\\n    --subnet=172.30.0.0/16 \\\n    --gateway=172.30.0.8 \\\n    mynet\nde40d30a63ab9b17df4c4f8ad1c93d176b56f44afe314635f0f96f44afe314635b07fb602b07fb602de40d30a63ab9b17f3d3\n~~~\n\n\u5b9f\u884c\u3059\u308b\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e ID \u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n\n#### \u88dc\u8db3\n\n- `--subnet` \u3092\u7701\u7565\u3059\u308b\u3068 Docker \u6a19\u6e96\u30d6\u30ea\u30c3\u30b8\u306e 172.17.0.0/16 \u3092\u8d77\u70b9\u306b 172.18.0.0/16 , 172.19.0.0/16 \u3068\u3001\u7e70\u308a\u4e0a\u3052\u305f\u5024\u304c\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n- `--gateway` \u3092\u7701\u7565\u3059\u308b\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7bc4\u56f2\u306e\u3046\u3061\u3001\u4e00\u756a\u5024\u306e\u5c0f\u3055\u306a\u3082\u306e\u304c\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n- \u4e0a\u3067\u306f\u4f7f\u3063\u3066\u3044\u306a\u3044\u304c `-o com.docker.network.bridge.name=bridgename` \u3068\u3059\u308b\u3053\u3068\u3067\u3001\u30d6\u30ea\u30c3\u30b8\u306e\u540d\u524d\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n  - \u6a19\u6e96\u3067\u306f `br-XXXXXXXXXXXX` \u5f62\u5f0f\u306e\u540d\u524d\u304c\u4ed8\u304f\u3002\u3053\u306e 12\u6841\u306e X \u306f \u30cd\u30c3\u30c8\u30ef\u30fc\u30af ID \u306e\u5148\u982d\u90e8\u5206\u304c\u5165\u308b\u3002\n\n### \u78ba\u8a8d\n\nDocker \u304c\u7ba1\u7406\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u306b\u306f `docker network ls` \u3092\u4f7f\u3046\u3002\n\n~~~bash\n$ docker network ls     \nNETWORK ID          NAME                DRIVER\nf3c95be71222        none                null                \n109db1b78591        host                host                \nde40d30a63ab        mynet               bridge              \n795b9950cbed        bridge              bridge       \n~~~\n\n`ip` \u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3002\n\n~~~bash\n$ ip route\n172.17.0.0/16 dev docker0  proto kernel  scope link  src 172.17.0.1 \n172.30.0.0/16 dev br-de40d30a63ab  proto kernel  scope link  src 172.30.0.1\n~~~\n\n\u4f5c\u6210\u6642\u306b\u8a2d\u5b9a\u3057\u305f\u30b5\u30d6\u30cd\u30c3\u30c8\u306e\u5024\u306b `br-XXXXXXXXXXXX` \u5f62\u5f0f\u306e\u540d\u524d\u3067\u30d6\u30ea\u30c3\u30b8\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a73\u7d30\u306f `docker network inspect mynet` \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n~~~bash\n$ docker network inspect mynet \n[\n    {\n        \"Name\": \"mynet\",\n        \"Id\": \"de40d30a63ab9b17df4c4f8ad1c93d176b56f44afe314635f0f96f44afe314635b07fb602b07fb602de40d30a63ab9b17f3d3\",\n...\n~~~\n\n### \u4f7f\u7528\n\n\u4f7f\u7528\u3059\u308b\u306b\u306f `docker run` \u6642\u306b `--net` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4f5c\u6210\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n~~~bash\n$ docker run --net=mynet ubuntu\n~~~\n\n`ip route` \u3067\u78ba\u8a8d\u3059\u308b\u3068\u3001\u4f5c\u6210\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u7bc4\u56f2\u306b\u30b3\u30f3\u30c6\u30ca\u304c\u53ce\u307e\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n~~~bash\n$ docker run --net=mynet ubuntu ip route\ndefault via 172.30.0.8 dev eth0 \n172.30.0.0/16 dev eth0  proto kernel  scope link  src 172.30.0.1 \n~~~\n\n### \u524a\u9664\n\n\u524a\u9664\u306f `docker network rm` \u3002\n\n~~~bash\n$ docker network rm mynet\n~~~\n\n\u3061\u306a\u307f\u306b\u4f7f\u7528\u4e2d\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u524a\u9664\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n\n~~~bash\n$ docker network rm mynet \nError response from daemon: network mynet has active endpoints\n~~~\n", "tags": ["docker1.9.1", "Network", "Bridge"]}