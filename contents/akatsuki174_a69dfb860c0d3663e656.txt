{"context": "\u300c\u4eca\u307e\u3067\u306e\u691c\u7d22\u6761\u4ef6\u306b\u52a0\u3048\u3066\u3001'hoge'\u3068\u691c\u7d22\u3055\u308c\u305f\u6642\u306b\u4e00\u5b9a\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u304c\u51fa\u3066\u304f\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\u30c7\u30fc\u30bf\u306b\u306f\u76f4\u63a5'hoge'\u3068\u3068\u3044\u3046\u6587\u5b57\u5217\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u666e\u901a\u306e\u691c\u7d22\u3067\u5f15\u3063\u639b\u3051\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002\u300d\u3068\u3044\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u3068\u304d\u306b\u4f55\u3092\u3057\u305f\u306e\u304b\u3092\u8a18\u9332\u306b\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u4f7f\u3063\u3066\u3044\u308bSolr\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f5.5\u3067\u3059\u3002\n\ndata-config.xml\u306e\u6539\u4fee\ndata-config\u306b\u306f\u3069\u306e\u3088\u3046\u306b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u306e\u3069\u306e\u9805\u76ee\u3092\u4f7f\u3063\u3066\u3069\u3046\u51e6\u7406\u3059\u308b\u304b\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u306a\u306e\u3067\u3053\u3053\u306b\u66f8\u304b\u308c\u3066\u3044\u308bSQL\u3092\u6539\u4fee\u3057\u307e\u3059\u3002\n\n\u6539\u4fee\u524d\u306edata-config.xml\n\ndata-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<dataConfig>\n    <dataSource ~~ />\n    <document>\n        <entity name=\"object\"\n            query=\"SELECT column_a\n                   FROM table_a\n                   WHERE ~~\">\n            <field column=\"COLUMN_A\" name=\"column_a\"/>\n            <entity name=\"keyword\" pk=\"COLUMN_A\"\n                query=\"SELECT key FROM table_b WHERE column_a = '${object.COLUMN_A}'\">\n                <field column=\"key\" name=\"key\"/>\n            </entity>\n        </entity>\n    </document>\n</dataConfig>\n\n\n\u5143\u3005\u3001\u5225\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u3066\u3042\u308b\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3044\u308c\u3070keyword\u3068\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u4f5c\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3053\u306e\u3042\u305f\u308a\u3092\u6539\u4fee\u3057\u307e\u3059\u3002\n\n\u6539\u4fee\u5f8c\u306edata-config.xml\n\ndata-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<dataConfig>\n    <dataSource ~~ />\n    <document>\n        <entity name=\"object\"\n            query=\"SELECT column_a\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 column_b\n                   FROM table_a\n                   WHERE ~~\">\n            <field column=\"COLUMN_A\" name=\"column_a\"/>\n            <field column=\"COLUMN_B\" name=\"column_b\"/>\n            <entity name=\"keyword\" pk=\"COLUMN_A\"\n                query=\"SELECT key FROM table_b WHERE column_a = '${object.COLUMN_A}'\n                UNION\n                SELECT 'hoge' FROM table_a WHERE column_a = '${object.COLUMN_A}' AND column_b = '${object.COLUMN_B}' AND hoge_flg = 1\">\n                <field column=\"key\" name=\"key\"/>\n            </entity>\n        </entity>\n    </document>\n</dataConfig>\n\n\n\u5909\u66f4\u7b87\u6240\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n\u4eca\u307e\u3067\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305ftable_a\u306e\u30ab\u30e9\u30e0\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u3001select\u5bfe\u8c61\u306bcolumn_b\u3092\u8ffd\u52a0\n\u4eca\u307e\u3067\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305ftable_a\u306e\u30ab\u30e9\u30e0\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u3001field\u306bcolumn_b\u3092\u8ffd\u52a0\n\nhoge\u3067\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306bunion\u3067select\u6587\u3092\u8ffd\u52a0\n\n\u305f\u3060\u4eca\u307e\u3067\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u30ab\u30e9\u30e0\u3092\u4f7f\u3046\u5834\u5408\u306f\u3053\u308c\u3060\u3051\u3067\u306f\u8db3\u308a\u306a\u304f\u3066\u3001schema.xml\u3082\u6539\u4fee\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3082\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\nschema.xml\u306e\u6539\u4fee\n\n\u6539\u4fee\u524d\u306eschema.xml\n\nschema.xml\n\u2026\u7565\u2026\n<schema name=\"fuga\" version=\"1.5\">\n\u2026\u7565\u2026\n   <!-- field names should consist of alphanumeric or underscore characters only and\n      not start with a digit.  This is not currently strictly enforced,\n      but other field names will not have first class support from all components\n      and back compatibility is not guaranteed.  Names with both leading and\n      trailing underscores (e.g. _version_) are reserved.\n   -->\n\n   <!-- If you remove this field, you must _also_ disable the update log in solrconfig.xml\n      or Solr won't start. _version_ and update log are required for SolrCloud\n   --> \n   <field name=\"_version_\" type=\"long\" indexed=\"true\" stored=\"true\" />\n   <field name=\"column_a\" type=\"string\" indexed=\"true\" stored=\"true\" />\n</schema>\n\u2026\u7565\u2026\n\n\ncolumn_b\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u6539\u4fee\u5f8c\u306eschema.xml\n\nschema.xml\n\u2026\u7565\u2026\n<schema name=\"fuga\" version=\"1.5\">\n\u2026\u7565\u2026\n   <!-- field names should consist of alphanumeric or underscore characters only and\n      not start with a digit.  This is not currently strictly enforced,\n      but other field names will not have first class support from all components\n      and back compatibility is not guaranteed.  Names with both leading and\n      trailing underscores (e.g. _version_) are reserved.\n   -->\n\n   <!-- If you remove this field, you must _also_ disable the update log in solrconfig.xml\n      or Solr won't start. _version_ and update log are required for SolrCloud\n   --> \n   <field name=\"_version_\" type=\"long\" indexed=\"true\" stored=\"true\" />\n   <field name=\"column_a\" type=\"string\" indexed=\"true\" stored=\"true\" />\n   <field name=\"column_b\" type=\"string\" indexed=\"true\" stored=\"true\" />\n</schema>\n\u2026\u7565\u2026\n\n\nschema.xml\u3092\u5909\u66f4\u3057\u305f\u3089\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b\u518d\u8d77\u52d5\u3092\u3057\u307e\u3057\u305f\uff08\u78ba\u304b\u30d5\u30eb\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u3082\u3044\u3051\u308b\u306f\u305a\u3067\u3059\u304c\uff09\u3002\n\n\u4f59\u8ac7\n\u3053\u3053\u306b\u8fbf\u308a\u7740\u304f\u524d\u306b2\u56de\u884c\u304d\u8a70\u307e\u308a\u307e\u3057\u305f\u30021\u56de\u76ee\u306fschema.xml\u3092\u5909\u66f4\u3057\u3066\u306a\u3044\u30012\u56de\u76ee\u306fdata-config\u306e\u5909\u66f4\u7b87\u62401\u3067\u66f8\u3044\u305fselect\u3057\u5fd8\u308c\u3068\u3044\u3046\u3082\u306e\u3067\u3057\u305f\u3002\n\u300c\u4eca\u307e\u3067\u306e\u691c\u7d22\u6761\u4ef6\u306b\u52a0\u3048\u3066\u3001'hoge'\u3068\u691c\u7d22\u3055\u308c\u305f\u6642\u306b\u4e00\u5b9a\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u304c\u51fa\u3066\u304f\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\u30c7\u30fc\u30bf\u306b\u306f\u76f4\u63a5'hoge'\u3068\u3068\u3044\u3046\u6587\u5b57\u5217\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u666e\u901a\u306e\u691c\u7d22\u3067\u5f15\u3063\u639b\u3051\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002\u300d\u3068\u3044\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u3068\u304d\u306b\u4f55\u3092\u3057\u305f\u306e\u304b\u3092\u8a18\u9332\u306b\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u4f7f\u3063\u3066\u3044\u308bSolr\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f5.5\u3067\u3059\u3002\n\n# data-config.xml\u306e\u6539\u4fee\n\ndata-config\u306b\u306f\u3069\u306e\u3088\u3046\u306b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u306e\u3069\u306e\u9805\u76ee\u3092\u4f7f\u3063\u3066\u3069\u3046\u51e6\u7406\u3059\u308b\u304b\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u306a\u306e\u3067\u3053\u3053\u306b\u66f8\u304b\u308c\u3066\u3044\u308bSQL\u3092\u6539\u4fee\u3057\u307e\u3059\u3002\n\n## \u6539\u4fee\u524d\u306edata-config.xml\n\n```xml:data-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<dataConfig>\n    <dataSource ~~ />\n    <document>\n        <entity name=\"object\"\n            query=\"SELECT column_a\n                   FROM table_a\n                   WHERE ~~\">\n            <field column=\"COLUMN_A\" name=\"column_a\"/>\n            <entity name=\"keyword\" pk=\"COLUMN_A\"\n                query=\"SELECT key FROM table_b WHERE column_a = '${object.COLUMN_A}'\">\n                <field column=\"key\" name=\"key\"/>\n            </entity>\n        </entity>\n    </document>\n</dataConfig>\n```\n\n\u5143\u3005\u3001\u5225\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u3066\u3042\u308b\u6761\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3044\u308c\u3070`keyword`\u3068\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u4f5c\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3053\u306e\u3042\u305f\u308a\u3092\u6539\u4fee\u3057\u307e\u3059\u3002\n\n## \u6539\u4fee\u5f8c\u306edata-config.xml\n\n```xml:data-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<dataConfig>\n    <dataSource ~~ />\n    <document>\n        <entity name=\"object\"\n            query=\"SELECT column_a\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 column_b\n                   FROM table_a\n                   WHERE ~~\">\n            <field column=\"COLUMN_A\" name=\"column_a\"/>\n            <field column=\"COLUMN_B\" name=\"column_b\"/>\n            <entity name=\"keyword\" pk=\"COLUMN_A\"\n                query=\"SELECT key FROM table_b WHERE column_a = '${object.COLUMN_A}'\n\t\t\t\tUNION\n\t\t\t\tSELECT 'hoge' FROM table_a WHERE column_a = '${object.COLUMN_A}' AND column_b = '${object.COLUMN_B}' AND hoge_flg = 1\">\n                <field column=\"key\" name=\"key\"/>\n            </entity>\n        </entity>\n    </document>\n</dataConfig>\n```\n\n\u5909\u66f4\u7b87\u6240\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n1. \u4eca\u307e\u3067\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305ftable_a\u306e\u30ab\u30e9\u30e0\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u3001select\u5bfe\u8c61\u306bcolumn_b\u3092\u8ffd\u52a0\n2. \u4eca\u307e\u3067\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305ftable_a\u306e\u30ab\u30e9\u30e0\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u3001field\u306bcolumn_b\u3092\u8ffd\u52a0\n3. `hoge`\u3067\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306bunion\u3067select\u6587\u3092\u8ffd\u52a0\n\n\u305f\u3060\u4eca\u307e\u3067\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u30ab\u30e9\u30e0\u3092\u4f7f\u3046\u5834\u5408\u306f\u3053\u308c\u3060\u3051\u3067\u306f\u8db3\u308a\u306a\u304f\u3066\u3001schema.xml\u3082\u6539\u4fee\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3082\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\n# schema.xml\u306e\u6539\u4fee\n\n## \u6539\u4fee\u524d\u306eschema.xml\n\n```xml:schema.xml\n\u2026\u7565\u2026\n<schema name=\"fuga\" version=\"1.5\">\n\u2026\u7565\u2026\n   <!-- field names should consist of alphanumeric or underscore characters only and\n      not start with a digit.  This is not currently strictly enforced,\n      but other field names will not have first class support from all components\n      and back compatibility is not guaranteed.  Names with both leading and\n      trailing underscores (e.g. _version_) are reserved.\n   -->\n\n   <!-- If you remove this field, you must _also_ disable the update log in solrconfig.xml\n      or Solr won't start. _version_ and update log are required for SolrCloud\n   --> \n   <field name=\"_version_\" type=\"long\" indexed=\"true\" stored=\"true\" />\n   <field name=\"column_a\" type=\"string\" indexed=\"true\" stored=\"true\" />\n</schema>\n\u2026\u7565\u2026\n```\n\ncolumn_b\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n## \u6539\u4fee\u5f8c\u306eschema.xml\n\n```xml:schema.xml\n\u2026\u7565\u2026\n<schema name=\"fuga\" version=\"1.5\">\n\u2026\u7565\u2026\n   <!-- field names should consist of alphanumeric or underscore characters only and\n      not start with a digit.  This is not currently strictly enforced,\n      but other field names will not have first class support from all components\n      and back compatibility is not guaranteed.  Names with both leading and\n      trailing underscores (e.g. _version_) are reserved.\n   -->\n\n   <!-- If you remove this field, you must _also_ disable the update log in solrconfig.xml\n      or Solr won't start. _version_ and update log are required for SolrCloud\n   --> \n   <field name=\"_version_\" type=\"long\" indexed=\"true\" stored=\"true\" />\n   <field name=\"column_a\" type=\"string\" indexed=\"true\" stored=\"true\" />\n   <field name=\"column_b\" type=\"string\" indexed=\"true\" stored=\"true\" />\n</schema>\n\u2026\u7565\u2026\n```\n\nschema.xml\u3092\u5909\u66f4\u3057\u305f\u3089\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b\u518d\u8d77\u52d5\u3092\u3057\u307e\u3057\u305f\uff08\u78ba\u304b\u30d5\u30eb\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u3082\u3044\u3051\u308b\u306f\u305a\u3067\u3059\u304c\uff09\u3002\n\n# \u4f59\u8ac7\n\n\u3053\u3053\u306b\u8fbf\u308a\u7740\u304f\u524d\u306b2\u56de\u884c\u304d\u8a70\u307e\u308a\u307e\u3057\u305f\u30021\u56de\u76ee\u306fschema.xml\u3092\u5909\u66f4\u3057\u3066\u306a\u3044\u30012\u56de\u76ee\u306fdata-config\u306e\u5909\u66f4\u7b87\u62401\u3067\u66f8\u3044\u305fselect\u3057\u5fd8\u308c\u3068\u3044\u3046\u3082\u306e\u3067\u3057\u305f\u3002\n", "tags": ["solr", "\u691c\u7d22"]}