{"tags": ["Jenkins", "nginx", "redhat", "timezone"], "context": " More than 1 year has passed since last update.\n\n\u524d\u63d0\nec2\u3092\u7acb\u3066\u3066\u304a\u304f\n\n\u4f55\u306f\u3068\u3082\u3042\u308cSELinux\u3092\u505c\u6b62\u3060\uff01\n\n# SELINUX=enforcing \nSELINUX=disabled \u2190\u5909\u66f4(\u8d77\u52d5\u6642\u306b\u7121\u52b9\u306b\u3059\u308b)\n\n\n\u5fc5\u8981\u306a\u3082\u306e\u3092yum\u3067\u843d\u3068\u3059(\u9069\u5b9c\u5fc5\u8981\u306a\u3082\u306e\u3092\u5165\u308c\u308b\u3002\u3059\u3079\u3066\u304c\u5fc5\u8981\u3067\u306f\u306a\u3044)\n$ sudo yum install -y git make gcc gcc-c++ zlib-devel openssl-devel httpd-devel curl curl-devel readline-devel tk-devel libxslt-devel texinfo bzip2 openssl-devel wget java-1.7.0-openjdk-devel \n\n\n80,8080\u3092\u958b\u3051\u3066\u304a\u304f\u3001EC2\u3067\u3082\u958b\u3051\u3066\u304a\u304f\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT\n\n$ sudo systemctl restart iptables\n\n\nJenkins \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo\n$ rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\n$ yum install -y jenkins\n\n# \u4fee\u6b63\u524d\n# JENKINS_ARGS=\"\"\n# \u4fee\u6b63\u5f8c\nJENKINS_ARGS=\"--prefix=/jenkins --httpPort=${JENKINS_PORT} --ajp13Port=${JENKINS_AJP_PORT}\"\n\n$ sudo chkconfig jenkins on\n$ sudo /etc/init.d/jenkins start\n\n\nnginx \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nOS\u78ba\u8a8d\n$ cat /etc/redhat-release \nRed Hat Enterprise Linux Server release 7.2 (Maipo)\n\n\n\u5bfe\u5fdcrpm\u3092\u66f4\u65b0\u3001\u5f8c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ rpm -ivh http://nginx.org/packages/rhel/7/noarch/RPMS/nginx-release-rhel-7-0.el7.ngx.noarch.rpm\n$ yum install nginx\n\n$ echo PATH=$PATH:$HOME/sbin >>.bash_profile \nsource ~/.bash_profile\n\n\ndirectory\u3092\u5800\u308b\n$ mkdir -p /var/www/html/\n\n\nnginx\u8a2d\u5b9a\u5909\u66f4\n\n/etc/nginx/conf.d/default.conf\nserver {\n    listen       80;\n    server_name  localhost;\n    location / {\n        #root   /usr/share/nginx/html;\n        root   /var/www/html/;\n        index  index.html index.htm;\n    }\n    location ~ /jenkins {\n      proxy_redirect     off;\n      proxy_set_header   X-Forwarded-Proto $scheme;\n      proxy_set_header   Host              $http_host;\n      proxy_set_header   X-Real-IP         $remote_addr;\n      proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;\n      proxy_set_header   Host $host;\n      proxy_pass         http://jenkins_server;\n  }\n}\n\n\n\n/etc/nginx/conf.d/jenkins.conf\nupstream jenkins_server {\n  server 127.0.0.1:8080 fail_timeout=0;\n}\n\n\n\nnginx \u8d77\u52d5\n$ sudo chkconfig nginx on\n$ sudo systemctl start nginx.service\n\n\n\u30d6\u30e9\u30a6\u30b6\u78ba\u8a8d\n\u7d42\u4e86\n\nTimeZone \u8a2d\u5b9a\n\u8a2d\u5b9a\u5909\u66f4\n$ vi /etc/sysconfig/jenkins\n\nJENKINS_JAVA_OPTIONS=\"-Djava.awt.headless=true -Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Tokyo\"\n \n\n\u518d\u8d77\u52d5\n$ systemctl restart nginx.service\n\n## \u524d\u63d0\nec2\u3092\u7acb\u3066\u3066\u304a\u304f\n\n* \u4f55\u306f\u3068\u3082\u3042\u308cSELinux\u3092\u505c\u6b62\u3060\uff01\n\n``` /etc/selinux/config\n# SELINUX=enforcing \nSELINUX=disabled \u2190\u5909\u66f4(\u8d77\u52d5\u6642\u306b\u7121\u52b9\u306b\u3059\u308b)\n```\n\n### \u5fc5\u8981\u306a\u3082\u306e\u3092yum\u3067\u843d\u3068\u3059(\u9069\u5b9c\u5fc5\u8981\u306a\u3082\u306e\u3092\u5165\u308c\u308b\u3002\u3059\u3079\u3066\u304c\u5fc5\u8981\u3067\u306f\u306a\u3044)\n``` \n$ sudo yum install -y git make gcc gcc-c++ zlib-devel openssl-devel httpd-devel curl curl-devel readline-devel tk-devel libxslt-devel texinfo bzip2 openssl-devel wget java-1.7.0-openjdk-devel \n``` \n\n\n## 80,8080\u3092\u958b\u3051\u3066\u304a\u304f\u3001EC2\u3067\u3082\u958b\u3051\u3066\u304a\u304f\n\n``` /etc/sysconfig/iptables\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT\n``` \n\n``` \n$ sudo systemctl restart iptables\n``` \n\n\n## Jenkins \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo\n$ rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key\n$ yum install -y jenkins\n``` \n\n``` /etc/sysconfig/jenkins\n# \u4fee\u6b63\u524d\n# JENKINS_ARGS=\"\"\n# \u4fee\u6b63\u5f8c\nJENKINS_ARGS=\"--prefix=/jenkins --httpPort=${JENKINS_PORT} --ajp13Port=${JENKINS_AJP_PORT}\"\n```\n\n```\n$ sudo chkconfig jenkins on\n$ sudo /etc/init.d/jenkins start\n```\n\n\n\n## nginx \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n### OS\u78ba\u8a8d\n\n```\n$ cat /etc/redhat-release \nRed Hat Enterprise Linux Server release 7.2 (Maipo)\n```\n\n### \u5bfe\u5fdcrpm\u3092\u66f4\u65b0\u3001\u5f8c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ rpm -ivh http://nginx.org/packages/rhel/7/noarch/RPMS/nginx-release-rhel-7-0.el7.ngx.noarch.rpm\n$ yum install nginx\n```\n\n\n``` \n$ echo PATH=$PATH:$HOME/sbin >>.bash_profile \nsource ~/.bash_profile\n```\n\n\n### directory\u3092\u5800\u308b\n\n```\n$ mkdir -p /var/www/html/\n```\n\n### nginx\u8a2d\u5b9a\u5909\u66f4\n``` /etc/nginx/conf.d/default.conf\nserver {\n    listen       80;\n    server_name  localhost;\n    location / {\n        #root   /usr/share/nginx/html;\n        root   /var/www/html/;\n        index  index.html index.htm;\n    }\n    location ~ /jenkins {\n      proxy_redirect     off;\n      proxy_set_header   X-Forwarded-Proto $scheme;\n      proxy_set_header   Host              $http_host;\n      proxy_set_header   X-Real-IP         $remote_addr;\n      proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;\n      proxy_set_header   Host $host;\n      proxy_pass         http://jenkins_server;\n  }\n}\n```\n\n``` /etc/nginx/conf.d/jenkins.conf \nupstream jenkins_server {\n  server 127.0.0.1:8080 fail_timeout=0;\n}\n```\n\n\n### nginx \u8d77\u52d5\n\n```\n$ sudo chkconfig nginx on\n$ sudo systemctl start nginx.service\n```\n\n### \u30d6\u30e9\u30a6\u30b6\u78ba\u8a8d\n\u7d42\u4e86\n\n\n## TimeZone \u8a2d\u5b9a\n\u8a2d\u5b9a\u5909\u66f4\n\n$ vi /etc/sysconfig/jenkins\n```\nJENKINS_JAVA_OPTIONS=\"-Djava.awt.headless=true -Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Tokyo\"\n``` \n\n### \u518d\u8d77\u52d5\n```\n$ systemctl restart nginx.service\n```\n\n\n\n"}