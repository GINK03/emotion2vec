{"context": "\n\n\u30b3\u30fc\u30c9\nhttps://github.com/nullpos/CagedBird\n\nvar page = require('webpage').create();\n\npage.open('https://mobile.twitter.com/login', function(status) {\n    if(status !== \"success\") {\n        console.log(\"Unable to load url.\");\n        phantom.exit();\n    }\n    console.log('login...');\n    page.evaluate(function() {\n        document.getElementById(\"session[username_or_email]\").value = \"\";\n        document.getElementById(\"session[password]\").value = \"\";\n        document.forms[0].submit();\n    });\n    page.onLoadFinished = loggedIn\n});\n\nfunction loggedIn() {\n    console.log('logged in.');\n    page.onLoadFinished = null;\n    page.open('https://mobile.twitter.com/follower_requests', function(status) {\n        if(status !== \"success\") {\n            console.log(\"Unable to load url.\");\n            phantom.exit();\n        }\n        console.log('fetch follower requests');\n        var forms = page.evaluate(function() {\n            return document.forms;\n        });\n        if(forms[0]) {\n            console.log('requests found');\n            approve();\n        } else {\n            console.log('no follower requests found');\n            phantom.exit();\n        }\n    });\n}\n\nfunction approve() {\n    var flag = page.evaluate(function() {\n        if(!document.forms[0] || document.forms[0].action.indexOf(\"search\") !== -1) {\n            return false;\n        } else {\n            var ref = document.getElementsByClassName(\"fullname\")[0].parentNode.href;\n            document.forms[0].submit();\n            return ref.replace(/.*\\/(.*?)\\?.*/, \"$1\");\n        }\n    });\n    if(flag) {\n        console.log('approve: ' + flag);\n        page.onLoadFinished = approve;\n    } else {\n        page.onLoadFinished = null;\n        console.log('approved requests');\n        phantom.exit();\n    }\n}\n\n\u30e9\u30a4\u30bb\u30f3\u30b9\u306f\u9069\u5f53\u306bGPLv3\n\u547d\u540d\u306f\u9069\u5f53\u306b\u306a\u3093\u304b\u305d\u308c\u3063\u307d\u304f\n\n\u4f7f\u3044\u65b9\ndocument.getElementById(\"session[username_or_email]\").value = \"\";\ndocument.getElementById(\"session[password]\").value = \"\";\n\n\u3053\u3053\u3093\u3068\u3053\u306b\u30e6\u30fc\u30b6\u30fc\u30cd\u30fc\u30e0/\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u308c\u3066\n$ phantomjs ./main.js\n\n\u3068\u308a\u3042\u3048\u305a\u627f\u8a8d\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u96e3\u70b9\n\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u5ea6\u306bTwitter\u304b\u3089\u300cNew login to Twitter from ~~\u300d\u3068\u30e1\u30fc\u30eb\u304c\u6765\u308b\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u3067\u30e1\u30fc\u30eb\u901a\u77e5\u3092\u5168\u3066\u7121\u52b9\u306b\u3057\u3066\u3082\u30e1\u30fc\u30eb\u304c\u6765\u308b(\u5f53\u305f\u308a\u524d\u3060\u3051\u3069)\n\u3053\u306e\u3042\u305f\u308a\u3069\u3046\u306b\u304b\u306a\u3089\u306a\u3044\u3082\u306e\u304b\u2026\u2026\n\u4e00\u5fdc\u65e2\u5b58\u306e\u3082\u306e\u304c\u306a\u3044\u304b\u8abf\u3079\u305f\u3064\u3082\u308a\u3067\u3059\u304c\u3001\u5225\u306b\u3082\u3063\u3068\u826f\u3044\u3082\u306e\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u6234\u3051\u308b\u3068\u3053\u308c\u5e78\u3044\u3002\u3002\n# \u30b3\u30fc\u30c9\nhttps://github.com/nullpos/CagedBird\n\n```js\n\nvar page = require('webpage').create();\n\npage.open('https://mobile.twitter.com/login', function(status) {\n    if(status !== \"success\") {\n        console.log(\"Unable to load url.\");\n        phantom.exit();\n    }\n    console.log('login...');\n    page.evaluate(function() {\n        document.getElementById(\"session[username_or_email]\").value = \"\";\n        document.getElementById(\"session[password]\").value = \"\";\n        document.forms[0].submit();\n    });\n    page.onLoadFinished = loggedIn\n});\n\nfunction loggedIn() {\n    console.log('logged in.');\n    page.onLoadFinished = null;\n    page.open('https://mobile.twitter.com/follower_requests', function(status) {\n        if(status !== \"success\") {\n            console.log(\"Unable to load url.\");\n            phantom.exit();\n        }\n        console.log('fetch follower requests');\n        var forms = page.evaluate(function() {\n            return document.forms;\n        });\n        if(forms[0]) {\n            console.log('requests found');\n            approve();\n        } else {\n            console.log('no follower requests found');\n            phantom.exit();\n        }\n    });\n}\n\nfunction approve() {\n    var flag = page.evaluate(function() {\n        if(!document.forms[0] || document.forms[0].action.indexOf(\"search\") !== -1) {\n            return false;\n        } else {\n            var ref = document.getElementsByClassName(\"fullname\")[0].parentNode.href;\n            document.forms[0].submit();\n            return ref.replace(/.*\\/(.*?)\\?.*/, \"$1\");\n        }\n    });\n    if(flag) {\n        console.log('approve: ' + flag);\n        page.onLoadFinished = approve;\n    } else {\n        page.onLoadFinished = null;\n        console.log('approved requests');\n        phantom.exit();\n    }\n}\n```\n\n\u30e9\u30a4\u30bb\u30f3\u30b9\u306f\u9069\u5f53\u306bGPLv3\n\u547d\u540d\u306f\u9069\u5f53\u306b\u306a\u3093\u304b\u305d\u308c\u3063\u307d\u304f\n\n\n# \u4f7f\u3044\u65b9\n```js\ndocument.getElementById(\"session[username_or_email]\").value = \"\";\ndocument.getElementById(\"session[password]\").value = \"\";\n```\n\u3053\u3053\u3093\u3068\u3053\u306b\u30e6\u30fc\u30b6\u30fc\u30cd\u30fc\u30e0/\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u308c\u3066\n\n```\n$ phantomjs ./main.js\n```\n\n\u3068\u308a\u3042\u3048\u305a\u627f\u8a8d\u3057\u3066\u304f\u308c\u308b\u3002\n\n# \u96e3\u70b9\n\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u5ea6\u306bTwitter\u304b\u3089\u300cNew login to Twitter from ~~\u300d\u3068\u30e1\u30fc\u30eb\u304c\u6765\u308b\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u3067\u30e1\u30fc\u30eb\u901a\u77e5\u3092\u5168\u3066\u7121\u52b9\u306b\u3057\u3066\u3082\u30e1\u30fc\u30eb\u304c\u6765\u308b(\u5f53\u305f\u308a\u524d\u3060\u3051\u3069)\n\u3053\u306e\u3042\u305f\u308a\u3069\u3046\u306b\u304b\u306a\u3089\u306a\u3044\u3082\u306e\u304b\u2026\u2026\n\n\u4e00\u5fdc\u65e2\u5b58\u306e\u3082\u306e\u304c\u306a\u3044\u304b\u8abf\u3079\u305f\u3064\u3082\u308a\u3067\u3059\u304c\u3001\u5225\u306b\u3082\u3063\u3068\u826f\u3044\u3082\u306e\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u6234\u3051\u308b\u3068\u3053\u308c\u5e78\u3044\u3002\u3002\n", "tags": ["Twitter", "PhantomJS"]}