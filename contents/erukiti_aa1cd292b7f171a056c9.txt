{"context": " More than 1 year has passed since last update.12/5\u306eScala Advent calendar\u306f\u3001Wildfire\u30d7\u30ed\u30c8\u30b3\u30eb(FirePHP)\u3092\u4f7f\u3046\u3068\u3044\u3046\u30cd\u30bf\u3067\u3059\u3002\u306a\u305cScala\u306a\u306e\u306bPHP\u3068\u3044\u3046\u5358\u8a9e\u304c\u51fa\u3066\u304f\u308b\u306e\u304b\u3002FirePHP\u306b\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306e\u62e1\u5f35\u306b\u3088\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u4e0a\u306e\u30ed\u30b0\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u78ba\u8a8d\u3067\u304d\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002HTTP\u306e\u30d8\u30c3\u30c0\u306b\u4e00\u5b9a\u306e\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u305d\u308c\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u89e3\u91c8\u3057\u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u306f\u3001Firefox\u306a\u3089\u3070Firebug+FirePHP, Chrome\u306a\u3089\u3070Webug\u306a\u3069\u306e\u62e1\u5f35\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u4f7f\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\nFirePHP Wiki | Reference / Protocol \u306bWildFire\u30d7\u30ed\u30c8\u30b3\u30eb\u304c\u4e57\u3063\u3066\u307e\u3059\u304c\u3001Scala\u3067\u305d\u308c\u3092\u751f\u6210\u3059\u308b\u30b3\u30fc\u30c9\u3068\u3057\u3066\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3057\u3087\u3046\u304b\u3002\npackage utility\n\nimport play.api.libs.json._\n\nclass Wildfire {\n  var structureIndex = 1\n  var msgIndex = 1\n  val msg = scala.collection.mutable.Map[String, String]()\n\n  def toHeaderMap(): Map[String, String] = {\n    msg(\"X-Wf-Protocol-1\") = \"http://meta.wildfirehq.org/Protocol/JsonStream/0.2\"\n    msg(\"X-Wf-1-Plugin-1\") = \"http://meta.firephp.org/Wildfire/Plugin/FirePHP/Library-FirePHPCore/0.3\"\n    msg(\"X-Wf-1-Structure-1\") = \"http://meta.firephp.org/Wildfire/Structure/FirePHP/FirebugConsole/0.1\"\n    msg(\"X-Wf-1-Index\") = (msgIndex - 1).toString\n\n    msg.toMap\n  }\n\n  def put(text: String, meta: Map[String, String]) {\n    val content = JsArray(Array(Json.toJson(meta), JsString(text))).toString\n    msg(s\"X-Wf-1-${structureIndex}-1-${msgIndex}\") = s\"${content.length}|${content}|\"\n    msgIndex += 1\n  }\n}\n\nWildfire\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u308a\u3001put\u30e1\u30bd\u30c3\u30c9\u3067\u30ed\u30b0\u3092\u751f\u6210\u3057\u3001toHeaderMap\u30e1\u30bd\u30c3\u30c9\u3067\u3001HTTP\u30d8\u30c3\u30c0\u7528\u306eMap\u3092\u751f\u6210\u3067\u304d\u307e\u3059\u3002Play!\u3067\u8a18\u8ff0\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\n\nimport play.api.libs.iteratee.Enumerator\n\nimport utility.Wildfire\n\nobject Application extends Controller {\n\n  def index = Action {\n    val wildfire = new Wildfire()\n    wildfire.put(\"hoge\", Map(\"Type\" -> \"ERROR\", \"File\" -> \"Application.scala\", \"Line\" -> \"0\"))\n    val headers = wildfire.toHeaderMap() + (CONTENT_TYPE -> \"text/plain\")\n    SimpleResult(\n      header = ResponseHeader(OK, headers),\n      body = Enumerator()\n    )\n  }\n}\n\nWebug \u3060\u3068\u3001Developer Tools \u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u3053\u306e\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n12/5\u306eScala Advent calendar\u306f\u3001Wildfire\u30d7\u30ed\u30c8\u30b3\u30eb(FirePHP)\u3092\u4f7f\u3046\u3068\u3044\u3046\u30cd\u30bf\u3067\u3059\u3002\u306a\u305cScala\u306a\u306e\u306bPHP\u3068\u3044\u3046\u5358\u8a9e\u304c\u51fa\u3066\u304f\u308b\u306e\u304b\u3002FirePHP\u306b\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306e\u62e1\u5f35\u306b\u3088\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u4e0a\u306e\u30ed\u30b0\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u78ba\u8a8d\u3067\u304d\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002HTTP\u306e\u30d8\u30c3\u30c0\u306b\u4e00\u5b9a\u306e\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u305d\u308c\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u89e3\u91c8\u3057\u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u306f\u3001Firefox\u306a\u3089\u3070Firebug+FirePHP, Chrome\u306a\u3089\u3070Webug\u306a\u3069\u306e\u62e1\u5f35\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u4f7f\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n[FirePHP Wiki | Reference / Protocol](http://www.firephp.org/Wiki/Reference/Protocol) \u306bWildFire\u30d7\u30ed\u30c8\u30b3\u30eb\u304c\u4e57\u3063\u3066\u307e\u3059\u304c\u3001Scala\u3067\u305d\u308c\u3092\u751f\u6210\u3059\u308b\u30b3\u30fc\u30c9\u3068\u3057\u3066\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3057\u3087\u3046\u304b\u3002\n\n``` scala\npackage utility\n\nimport play.api.libs.json._\n\nclass Wildfire {\n  var structureIndex = 1\n  var msgIndex = 1\n  val msg = scala.collection.mutable.Map[String, String]()\n\n  def toHeaderMap(): Map[String, String] = {\n    msg(\"X-Wf-Protocol-1\") = \"http://meta.wildfirehq.org/Protocol/JsonStream/0.2\"\n    msg(\"X-Wf-1-Plugin-1\") = \"http://meta.firephp.org/Wildfire/Plugin/FirePHP/Library-FirePHPCore/0.3\"\n    msg(\"X-Wf-1-Structure-1\") = \"http://meta.firephp.org/Wildfire/Structure/FirePHP/FirebugConsole/0.1\"\n    msg(\"X-Wf-1-Index\") = (msgIndex - 1).toString\n\n    msg.toMap\n  }\n\n  def put(text: String, meta: Map[String, String]) {\n    val content = JsArray(Array(Json.toJson(meta), JsString(text))).toString\n    msg(s\"X-Wf-1-${structureIndex}-1-${msgIndex}\") = s\"${content.length}|${content}|\"\n    msgIndex += 1\n  }\n}\n```\n\nWildfire\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u308a\u3001put\u30e1\u30bd\u30c3\u30c9\u3067\u30ed\u30b0\u3092\u751f\u6210\u3057\u3001toHeaderMap\u30e1\u30bd\u30c3\u30c9\u3067\u3001HTTP\u30d8\u30c3\u30c0\u7528\u306eMap\u3092\u751f\u6210\u3067\u304d\u307e\u3059\u3002Play!\u3067\u8a18\u8ff0\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n``` scala\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\n\nimport play.api.libs.iteratee.Enumerator\n\nimport utility.Wildfire\n\nobject Application extends Controller {\n\n  def index = Action {\n    val wildfire = new Wildfire()\n    wildfire.put(\"hoge\", Map(\"Type\" -> \"ERROR\", \"File\" -> \"Application.scala\", \"Line\" -> \"0\"))\n    val headers = wildfire.toHeaderMap() + (CONTENT_TYPE -> \"text/plain\")\n    SimpleResult(\n      header = ResponseHeader(OK, headers),\n      body = Enumerator()\n    )\n  }\n}\n```\n\nWebug \u3060\u3068\u3001Developer Tools \u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u3053\u306e\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n![webug.jpg](https://qiita-image-store.s3.amazonaws.com/0/3134/7a74c0c7-8961-aa42-f37c-61c614c21b05.jpeg)\n", "tags": ["Scala", "Play2"]}