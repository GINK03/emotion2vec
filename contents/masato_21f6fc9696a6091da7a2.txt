{"context": " More than 1 year has passed since last update.\u524d\u56deSane Stack\u306e\u958b\u767a\u74b0\u5883\u3092Docker Compose\u3067\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002Ember CLI\u306e\u52d5\u4f5c\u304c\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u4eca\u56de\u306fEmber CLI\u3060\u3051\u3067\u74b0\u5883\u3092\u7528\u610f\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\ndocker-compose.yml\n\nbuild\u3092\u4f7f\u3046\u3068\u30de\u30fc\u30b8\u5148\u3067\u3082\u30d3\u30eb\u30c9\u3055\u308c\u308b\nDocker\u306eCLI\u74b0\u5883\u69cb\u7bc9\u3067\u30c6\u30b9\u30c8\u3057\u305fgeoffreyd/ember-cli\u306fNode.js\u3082Ember CLI\u3082\u53e4\u3044\u306e\u3067\u81ea\u5206\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\u305f\u3060\u3057docker-compose.yml\u3067\u30d3\u30eb\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3068YAML\u306e\u30de\u30fc\u30b8\u3067\u62e1\u5f35\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u3067\u3082\u30d3\u30eb\u30c9\u304c\u8d70\u308a\u305d\u308c\u305e\u308cDocker\u30a4\u30e1\u30fc\u30b8\u304c\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n~/compose_apps/docker-compose.yml\nember: &defaults\n  build: .\n  volumes:\n    - $PWD:/usr/src/app\nserver:\n  <<: *defaults\n  command: server --watcher polling\n  ports:\n    - 4200:4200\n    - 35729:35729\n...s\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4e88\u3081\u30ed\u30fc\u30ab\u30eb\u306b\u30d3\u30eb\u30c9\u3057\u3066\u304a\u3044\u305fDocker\u30a4\u30e1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n~/compose_apps/docker-compose.yml\nember: &defaults\n  image: ember-cli\n  volumes:\n    - $PWD:/emberapp\n\nserver:\n  <<: *defaults\n  command: server --watcher polling\n  ports:\n    - 4200:4200\n    - 35729:35729\nnpm:\n  <<: *defaults\n  entrypoint: ['/usr/local/bin/npm']\n\nbower:\n  <<: *defaults\n  entrypoint: ['/usr/local/bin/bower', '--allow-root']\n\n\n\nDockerfile\n\u30ed\u30fc\u30ab\u30eb\u306bDockerfile\u3092\u30d3\u30eb\u30c9\u3057\u3066\u304a\u304d\u3001docker-compose.yml\u3067\u306fimgage\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002Node.js\u306fv0.12\u3001ember-cli\u306f\u6700\u65b0\u306e0.2.3\u3092\u4f7f\u3044\u307e\u3059\u3002Watchman\u3082\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\n~/ember_apps/Dockerfile\nFROM node:0.12\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\n# Watchman install\nRUN git clone https://github.com/facebook/watchman.git && \\\n  cd watchman && \\\n  ./autogen.sh && \\\n  ./configure && \\\n  make && \\\n  make install\n\nRUN npm install -g bower phantomjs ember-cli@0.2.3\n\n# Create local user for development\nRUN adduser --disabled-password --gecos '' --uid 1000 docker && \\\n  adduser docker sudo && \\\n  echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers && \\\n  mkdir /emberapp && \\\n  chown docker:docker /emberapp\nUSER docker\nWORKDIR /emberapp\nEXPOSE 4200 35729\nENTRYPOINT [\"/usr/local/bin/ember\"]\nCMD [\"help\"]\n\n\n\n\u958b\u767a\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092Docker\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408\u3001\u901a\u5e38\u306froot\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u306b\u306a\u308a\u307e\u3059\u3002\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u3067\u306fEmacs\u3092\u4f7f\u3063\u3066\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u3067\u958b\u767a\u3092\u3057\u305f\u3044\u306e\u3067\u3053\u308c\u3067\u306f\u3061\u3087\u3063\u3068\u56f0\u308a\u307e\u3059\u3002Dockerfile\u3067\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u540c\u3058UID\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ id -u\n1000\n\n\u958b\u767a\u7528\u306bUID\u304c1000\u306e\u30e6\u30fc\u30b6\u30fc\u3092Dockerfile\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nWORKDIR\u306e\u4f5c\u6210\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306euid\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002Ember\u30a2\u30d7\u30ea\u3092\u914d\u7f6e\u3059\u308bWORKDIR\u306f/emberapp\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u306fember init\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u540d\u524d\u304capp\u3060\u3068\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n$ docker-compose up server\nCreating emberapps_server_1...\nAttaching to emberapps_server_1\nserver_1 | version: 0.2.3\nserver_1 | 0.2.3\nserver_1 |\nserver_1 | Style file cannot have the name of the application - app\nemberapps_server_1 exited with code 1\nGracefully stopping... (press Ctrl+C again to force)\nStyle file cannot have the name of the application - app\n\n\nDocker\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\n\u3042\u3089\u304b\u3058\u3081Docker\u30a4\u30e1\u30fc\u30b8\u306f\u30ed\u30fc\u30ab\u30eb\u306b\u30d3\u30eb\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ docker build -t ember-cli .\n\n\n\u4f7f\u3044\u65b9\n\u6700\u521d\u306bEmber CLI\u306e\u521d\u671f\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002Dockerfile\u3067\u306f\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092$PWD\u3067\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bDockerfile\u3001docker-compose.yml\u3001package.json\u306a\u3069\u958b\u767a\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u305f\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\n$ docker-compose run --rm ember init\n\nBower\u304b\u3089Bootstrap\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ docker-compose run --rm ember install:bower bootstrap\n\nAsset Compilation\u306e\u30da\u30fc\u30b8\u306b\u3042\u308b\u3088\u3046\u306bBroccoli\u304cvendor.css\u306b\u30d7\u30ea\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u308b\u3088\u3046\u306bBootstrap\u306eCSS\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n~/ember_apps/Brocfile.js\napp.import('bower_components/bootstrap/dist/css/bootstrap.css');\n\n\n\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ docker-compose up server\nRecreating emberapps_server_1...\nAttaching to emberapps_server_1\nserver_1 | version: 0.2.3\nserver_1 | 0.2.3\nserver_1 |\nserver_1 | Livereload server on port 35729\nserver_1 | Serving on http://localhost:4200/\nserver_1 |\nserver_1 | Build successful - 3920ms.\nserver_1 |\nserver_1 | Slowest Trees                                 | Total\nserver_1 | ----------------------------------------------+---------------------\nserver_1 | Concat: Vendor                                | 3135ms\nserver_1 | Babel                                         | 228ms\nserver_1 |\nserver_1 | Slowest Trees (cumulative)                    | Total (avg)\nserver_1 | ----------------------------------------------+---------------------\nserver_1 | Concat: Vendor (1)                            | 3135ms\nserver_1 | Babel (2)                                     | 276ms (138 ms)\nserver_1 |\n\n\u524d\u56de[Sane Stack](http://qiita.com/masato/items/c44a87e6fe09ee1eab30)\u306e\u958b\u767a\u74b0\u5883\u3092Docker Compose\u3067\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002Ember CLI\u306e\u52d5\u4f5c\u304c\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u4eca\u56de\u306fEmber CLI\u3060\u3051\u3067\u74b0\u5883\u3092\u7528\u610f\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n## docker-compose.yml\n\n### build\u3092\u4f7f\u3046\u3068\u30de\u30fc\u30b8\u5148\u3067\u3082\u30d3\u30eb\u30c9\u3055\u308c\u308b\n\n[Docker\u306eCLI\u74b0\u5883\u69cb\u7bc9](http://qiita.com/masato/items/a39b43290d7efe3f6630)\u3067\u30c6\u30b9\u30c8\u3057\u305f[geoffreyd/ember-cli](https://github.com/geoffreyd/ember-cli-docker)\u306fNode.js\u3082Ember CLI\u3082\u53e4\u3044\u306e\u3067\u81ea\u5206\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\u305f\u3060\u3057docker-compose.yml\u3067\u30d3\u30eb\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3068YAML\u306e\u30de\u30fc\u30b8\u3067\u62e1\u5f35\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u3067\u3082\u30d3\u30eb\u30c9\u304c\u8d70\u308a\u305d\u308c\u305e\u308cDocker\u30a4\u30e1\u30fc\u30b8\u304c\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```yaml:~/compose_apps/docker-compose.yml\nember: &defaults\n  build: .\n  volumes:\n    - $PWD:/usr/src/app\nserver:\n  <<: *defaults\n  command: server --watcher polling\n  ports:\n    - 4200:4200\n    - 35729:35729\n...s\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4e88\u3081\u30ed\u30fc\u30ab\u30eb\u306b\u30d3\u30eb\u30c9\u3057\u3066\u304a\u3044\u305fDocker\u30a4\u30e1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```yaml:~/compose_apps/docker-compose.yml\nember: &defaults\n  image: ember-cli\n  volumes:\n    - $PWD:/emberapp\n\nserver:\n  <<: *defaults\n  command: server --watcher polling\n  ports:\n    - 4200:4200\n    - 35729:35729\nnpm:\n  <<: *defaults\n  entrypoint: ['/usr/local/bin/npm']\n\nbower:\n  <<: *defaults\n  entrypoint: ['/usr/local/bin/bower', '--allow-root']\n```\n\n## Dockerfile\n\n\u30ed\u30fc\u30ab\u30eb\u306bDockerfile\u3092\u30d3\u30eb\u30c9\u3057\u3066\u304a\u304d\u3001docker-compose.yml\u3067\u306fimgage\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002Node.js\u306fv0.12\u3001ember-cli\u306f\u6700\u65b0\u306e0.2.3\u3092\u4f7f\u3044\u307e\u3059\u3002[Watchman](https://facebook.github.io/watchman/)\u3082\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\n``` bash:~/ember_apps/Dockerfile\nFROM node:0.12\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\n# Watchman install\nRUN git clone https://github.com/facebook/watchman.git && \\\n  cd watchman && \\\n  ./autogen.sh && \\\n  ./configure && \\\n  make && \\\n  make install\n\nRUN npm install -g bower phantomjs ember-cli@0.2.3\n\n# Create local user for development\nRUN adduser --disabled-password --gecos '' --uid 1000 docker && \\\n  adduser docker sudo && \\\n  echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers && \\\n  mkdir /emberapp && \\\n  chown docker:docker /emberapp\nUSER docker\nWORKDIR /emberapp\nEXPOSE 4200 35729\nENTRYPOINT [\"/usr/local/bin/ember\"]\nCMD [\"help\"]\n```\n\n\n### \u958b\u767a\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\n\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092Docker\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408\u3001\u901a\u5e38\u306froot\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u306b\u306a\u308a\u307e\u3059\u3002\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u3067\u306fEmacs\u3092\u4f7f\u3063\u3066\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u3067\u958b\u767a\u3092\u3057\u305f\u3044\u306e\u3067\u3053\u308c\u3067\u306f\u3061\u3087\u3063\u3068\u56f0\u308a\u307e\u3059\u3002Dockerfile\u3067\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u3092\u540c\u3058UID\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n``` bash\n$ id -u\n1000\n```\n\n\u958b\u767a\u7528\u306bUID\u304c1000\u306e\u30e6\u30fc\u30b6\u30fc\u3092Dockerfile\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n### WORKDIR\u306e\u4f5c\u6210\n\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306euid\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002Ember\u30a2\u30d7\u30ea\u3092\u914d\u7f6e\u3059\u308bWORKDIR\u306f`/emberapp`\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u306f`ember init`\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u540d\u524d\u304c`app`\u3060\u3068\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\n```bash \n$ docker-compose up server\nCreating emberapps_server_1...\nAttaching to emberapps_server_1\nserver_1 | version: 0.2.3\nserver_1 | 0.2.3\nserver_1 |\nserver_1 | Style file cannot have the name of the application - app\nemberapps_server_1 exited with code 1\nGracefully stopping... (press Ctrl+C again to force)\nStyle file cannot have the name of the application - app\n```\n\n### Docker\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\n\n\u3042\u3089\u304b\u3058\u3081Docker\u30a4\u30e1\u30fc\u30b8\u306f\u30ed\u30fc\u30ab\u30eb\u306b\u30d3\u30eb\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n``` bash\n$ docker build -t ember-cli .\n```\n\n## \u4f7f\u3044\u65b9\n\n\u6700\u521d\u306bEmber CLI\u306e\u521d\u671f\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002Dockerfile\u3067\u306f\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092`$PWD`\u3067\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bDockerfile\u3001docker-compose.yml\u3001package.json\u306a\u3069\u958b\u767a\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u305f\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\n\n``` bash\n$ docker-compose run --rm ember init\n```\n\nBower\u304b\u3089Bootstrap\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n``` bash\n$ docker-compose run --rm ember install:bower bootstrap\n```\n\n[Asset Compilation](http://www.ember-cli.com/#asset-compilation)\u306e\u30da\u30fc\u30b8\u306b\u3042\u308b\u3088\u3046\u306bBroccoli\u304c`vendor.css`\u306b\u30d7\u30ea\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u308b\u3088\u3046\u306bBootstrap\u306eCSS\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n``` js:~/ember_apps/Brocfile.js\napp.import('bower_components/bootstrap/dist/css/bootstrap.css');\n```\n\n\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n``` bash\n$ docker-compose up server\nRecreating emberapps_server_1...\nAttaching to emberapps_server_1\nserver_1 | version: 0.2.3\nserver_1 | 0.2.3\nserver_1 |\nserver_1 | Livereload server on port 35729\nserver_1 | Serving on http://localhost:4200/\nserver_1 |\nserver_1 | Build successful - 3920ms.\nserver_1 |\nserver_1 | Slowest Trees                                 | Total\nserver_1 | ----------------------------------------------+---------------------\nserver_1 | Concat: Vendor                                | 3135ms\nserver_1 | Babel                                         | 228ms\nserver_1 |\nserver_1 | Slowest Trees (cumulative)                    | Total (avg)\nserver_1 | ----------------------------------------------+---------------------\nserver_1 | Concat: Vendor (1)                            | 3135ms\nserver_1 | Babel (2)                                     | 276ms (138 ms)\nserver_1 |\n```\n", "tags": ["docker-compose1.2.0", "ember-cli0.2.3", "docker1.6.0", "Node.js0.12"]}