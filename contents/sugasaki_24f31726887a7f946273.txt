{"context": "https://github.com/mehdime\n\u4ee5\u4e0b\u306b\u89e3\u8aac\u304c\u3042\u308b\u3088\u3046\u306a\u3001\u306a\u3044\u3088\u3046\u306a\u30fb\u30fb\u30fb\nhttp://mehdi.me/generating-html-emails-with-razorengine-basics-generating-your-first-email/\n\u4ee5\u4e0b\u306e\u30b5\u30f3\u30d7\u30ebAPP\u3092\u53c2\u8003\u306b\nhttps://github.com/mehdime/RazorEngineEmails\nRazorEngine\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f3.4\u3067\u3057\u305f\u3002\nV3.5\u306f\nTemplateService\u2192RazorEngineService\u3078\u3068\u63a8\u5968\u304c\u5909\u308f\u3063\u3066\u304a\u308a\u3001\nRazorEngineService\u3092\u4f7f\u3046\u307b\u3046\u304c\u3069\u3046\u3084\u3089\u3044\u3044\u307f\u305f\u3044\u3002\n\npublic static void StronglyTypedModel_RazorEngineService(string welcomeEmailTemplatePath)\n{\n    var config = new TemplateServiceConfiguration();\n    config.Language = Language.CSharp; // VB.NET as template language.\n    //config.EncodedStringFactory = new RawStringFactory(); // Raw string encoding.\n    config.EncodedStringFactory = new HtmlEncodedStringFactory(); // Html encoding.\\\n\n\n    var service = RazorEngineService.Create(config);\n    Engine.Razor = service;\n\n\n    // Generate the email body from our email template\n    var stronglyTypedModel = new UserModel() { Name = \"Sarah\", Email = \"sarah@mail.example\", IsPremiumUser = false };\n\n\n   // string template = \"Hello @Model.Name, welcome to RazorEngine!\";\n    string templateFile = welcomeEmailTemplatePath;\n    var template = new LoadedTemplateSource(File.ReadAllText(templateFile), templateFile);\n    var result = Engine.Razor.RunCompile(template, \"templateKey\", null, stronglyTypedModel);\n\n\n    // Send the email\n    var email = new MailMessage()\n    {\n        Body = result,\n        IsBodyHtml = true,\n        Subject = \"Welcome (generated from strongly-typed model)\"\n    };\n\n    email.To.Add(new MailAddress(stronglyTypedModel.Email, stronglyTypedModel.Name));\n\n    var smtpClient = new SmtpClient();\n    smtpClient.Send(email);\n\n    service.Dispose();\n}\n\n\u9001\u4fe1\u5143\u306e\u30a2\u30c9\u30ec\u30b9\u3084SMTP\u306e\u5b9a\u7fa9\u306f\u3069\u3053\u3067\uff1f\u3068\u601d\u3063\u305f\u3089App.config\u3067\u8a2d\u5b9a\u3059\u308b\u307f\u305f\u3044\u3067\u3059\u3002\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n\n\n\n\n<system.net>\n    <mailSettings>\n        <!-- Use the optional 'from' attribute to specify a default sender name and email if none is set in code -->\n        <smtp deliveryMethod=\"Network\" from=\"John &lt;john@awesomesite.com&gt;\">\n            <network host=\"localhost\" />\n        </smtp>\n    </mailSettings>\n</system.net>\n\n\n```\n\n\n\nhttps://github.com/mehdime\n\n\u4ee5\u4e0b\u306b\u89e3\u8aac\u304c\u3042\u308b\u3088\u3046\u306a\u3001\u306a\u3044\u3088\u3046\u306a\u30fb\u30fb\u30fb\nhttp://mehdi.me/generating-html-emails-with-razorengine-basics-generating-your-first-email/\n\n\n\u4ee5\u4e0b\u306e\u30b5\u30f3\u30d7\u30ebAPP\u3092\u53c2\u8003\u306b\nhttps://github.com/mehdime/RazorEngineEmails\n\nRazorEngine\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f3.4\u3067\u3057\u305f\u3002\nV3.5\u306f\nTemplateService\u2192RazorEngineService\u3078\u3068\u63a8\u5968\u304c\u5909\u308f\u3063\u3066\u304a\u308a\u3001\nRazorEngineService\u3092\u4f7f\u3046\u307b\u3046\u304c\u3069\u3046\u3084\u3089\u3044\u3044\u307f\u305f\u3044\u3002\n\n\n```csharp\n\npublic static void StronglyTypedModel_RazorEngineService(string welcomeEmailTemplatePath)\n{\n    var config = new TemplateServiceConfiguration();\n    config.Language = Language.CSharp; // VB.NET as template language.\n    //config.EncodedStringFactory = new RawStringFactory(); // Raw string encoding.\n    config.EncodedStringFactory = new HtmlEncodedStringFactory(); // Html encoding.\\\n\n\n    var service = RazorEngineService.Create(config);\n    Engine.Razor = service;\n\n\n    // Generate the email body from our email template\n    var stronglyTypedModel = new UserModel() { Name = \"Sarah\", Email = \"sarah@mail.example\", IsPremiumUser = false };\n\n\n   // string template = \"Hello @Model.Name, welcome to RazorEngine!\";\n    string templateFile = welcomeEmailTemplatePath;\n    var template = new LoadedTemplateSource(File.ReadAllText(templateFile), templateFile);\n    var result = Engine.Razor.RunCompile(template, \"templateKey\", null, stronglyTypedModel);\n\n\n    // Send the email\n    var email = new MailMessage()\n    {\n        Body = result,\n        IsBodyHtml = true,\n        Subject = \"Welcome (generated from strongly-typed model)\"\n    };\n\n    email.To.Add(new MailAddress(stronglyTypedModel.Email, stronglyTypedModel.Name));\n\n    var smtpClient = new SmtpClient();\n    smtpClient.Send(email);\n\n    service.Dispose();\n}\n```\n\n\n\u9001\u4fe1\u5143\u306e\u30a2\u30c9\u30ec\u30b9\u3084SMTP\u306e\u5b9a\u7fa9\u306f\u3069\u3053\u3067\uff1f\u3068\u601d\u3063\u305f\u3089App.config\u3067\u8a2d\u5b9a\u3059\u308b\u307f\u305f\u3044\u3067\u3059\u3002\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<configuration>\n    <startup> \n        <supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5\" />\n    </startup>\n\n    <system.net>\n        <mailSettings>\n            <!-- Use the optional 'from' attribute to specify a default sender name and email if none is set in code -->\n            <smtp deliveryMethod=\"Network\" from=\"John &lt;john@awesomesite.com&gt;\">\n                <network host=\"localhost\" />\n            </smtp>\n        </mailSettings>\n    </system.net>\n</configuration>\n```\n", "tags": ["ASP.NET", "mail"]}