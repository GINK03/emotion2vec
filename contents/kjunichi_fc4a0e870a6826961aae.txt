{"context": " More than 1 year has passed since last update.\n\nProcessing\u3067\u306f\u306a\u304f\u3001JavaScript\u306eProcessing.js\u3067Web\u30ab\u30e1\u30e9\u3092\u6271\u3046\n\nWebRTC\u3067\u5b9f\u88c5\n\u305d\u306e\u6614\u3001Web\u30ab\u30e1\u30e9\u3092Silverlight\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066JavaScript\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3082\u3084\u3063\u305f\u304c\u3001\u6700\u8fd1\u306fFirefox\u3067\u3082WebRTC\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3001 \u3084\u3063\u3066\u307f\u305f\u3002\n\u3061\u3087\u3063\u3068\u524d\u306bCanvas\u306e\u30a4\u30e1\u30fc\u30b8\u3092Processing.js\u306ePImage\u578b\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u306b \u6210\u529f\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u5ef6\u9577\u3067\u308f\u308a\u3068\u7c21\u5358\u306b\u51fa\u6765\u305f\u3002 \n\ncapture.js\nvar Capture = function (obj,width,height) {\n    this.width = width;\n    this.height = height;\n    this.pixels = new Pixels(width,height);\n    this.pixels.getImageData();\n    this.imageData = this.pixels.getImageData();\n    this.imageData.width = width;\n};\nvar url;\n//var jsVideo;\nCapture.prototype.start = function() {\n    var video = document.createElement(\"video\");\n    video.width = this.width;\n   video.height = this.height;\n    video.autoplay = true;\n\n    if(navigator.webkitGetUserMedia) {\n        navigator.webkitGetUserMedia({audio:true, video:true}, function(stream) {\n            url = window.webkitURL.createObjectURL(stream);\n            video.src = url;\n        });\n    } else  if(navigator.mozGetUserMedia){\n        navigator.mozGetUserMedia(\n            {video: true},\n            function(stream) {\n                video.mozSrcObject=stream;\n                video.play();\n                streaming = true;\n            },\n            function(err) {\n                alert(\"An error occured! \" + err);\n            }\n        );\n    } else if(navigator.getUserMedia) {\n        navigator.getUserMedia(\"audio, video\", success, error);\n    }\n    this.pixels.setVideo(video);\n};\nCapture.prototype.loadPixels = function() {\n};\nCapture.prototype.available = function() {\n    return true;\n};\nCapture.prototype.read = function() {\n    //return true;\n};\nCapture.prototype.toImageData = function() {\n    return this.pixels.getImageData();\n};\n\n//Capture\u30af\u30e9\u30b9\u3067\u5185\u90e8\u7684\u306b\u4f7f\u7528\u3059\u308b\u30af\u30e9\u30b9\nvar Pixels = function(width,height) {\n    this.width=width;\n    this.height=height;\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.context = this.canvas.getContext(\"2d\");\n};\n\nPixels.prototype.getPixel = function (idx) {\n    if(!this.mypixels) {\n         this.mypixels = [];\n\n        console.log(this.video.width+\",\"+ this.video.height);\n        var context = this.context;\n        var mypixels = this.mypixels;\n        var video = this.video;\n\n       setInterval(function() {\n           //video.src = url;\n           //console.log(\"start capture\");\n            //console.log(video.width+\",\"+ video.height);\n        context.drawImage(video,0,0,video.width,video.height);            \n        var imgData = context.getImageData(0,0,video.width,video.height);\n\n        var i = 0;\n       var  j = 0;\n        for(var y = 0; y < video.height; y++) {\n        for(var x = 0; x < video.width; x++) {\n            mypixels[i++] = (imgData.data[j]<<16)\n                |(imgData.data[j+1]<<8)\n                |(imgData.data[j+2]);\n\n            //Canvas\u306eimage\u306fRGBA\u306a\u306e\u3067\n            j = j + 4;\n        }      \n    }\n       //console.log(imgData.data[0]);\n       },100);\n\n\n    var i = 0;\n        for(var y = 0; y < this.video.height; y++) {\n        for(var x = 0; x < this.video.width; x++) {\n            this.mypixels[i++] = 128<<16|128<<8|128;\n        }   \n    }\n    }\n    return this.mypixels[idx];\n};\nPixels.prototype.setVideo = function(video) {\n    this.video = video;\n};\nPixels.prototype.getImageData = function() {\n    return this.context.getImageData(0,0,this.width,this.height);\n};\n\n\n\n\u306a\u3093\u3068\u306a\u304f\u8d77\u304d\u305d\u3046\u306a\u4e88\u611f\u306e\u3059\u308b\u4e0d\u5177\u5408\n\u8907\u6570\u306e\u30ab\u30e1\u30e9\u306f\u6271\u3048\u3066\u3044\u306a\u3044\u6c17\u304c\u3059\u308b\u3002\n\n\u305d\u3093\u306a\u308f\u3051\u3067\u3001Processing\u306eVideo\u95a2\u9023\u306e\u30c7\u30e2\u304c\u305d\u306e\u307e\u307e\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u308b\n\nBrightness Tracking\nFrame Differencing\n\n\n\u95a2\u9023\u8a18\u4e8b\n\nProcessing.js\u3067Capture\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f\nProcessing.js\u3067PImage\u3092\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\n\n\n\u3061\u3087\u3063\u3068\u30d9\u30af\u30c8\u30eb\u304c\u9055\u3046\u304c\u6d77\u306e\u5411\u3053\u3046\u3067\u306e\u4e8b\u4f8b\n\nGitHub fjenett / processing-video-js\n\n# Processing\u3067\u306f\u306a\u304f\u3001JavaScript\u306eProcessing.js\u3067Web\u30ab\u30e1\u30e9\u3092\u6271\u3046\n\n## WebRTC\u3067\u5b9f\u88c5\n\u305d\u306e\u6614\u3001[Web\u30ab\u30e1\u30e9\u3092Silverlight\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066JavaScript\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b](http://kjunichi.cocolog-nifty.com/misc/2012/01/jsdoitweb-132f.html)\u3053\u3068\u3082\u3084\u3063\u305f\u304c\u3001\u6700\u8fd1\u306fFirefox\u3067\u3082WebRTC\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3001 \u3084\u3063\u3066\u307f\u305f\u3002\n\n\u3061\u3087\u3063\u3068\u524d\u306bCanvas\u306e\u30a4\u30e1\u30fc\u30b8\u3092Processing.js\u306ePImage\u578b\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u306b \u6210\u529f\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u5ef6\u9577\u3067\u308f\u308a\u3068\u7c21\u5358\u306b\u51fa\u6765\u305f\u3002 \n\n``` capture.js\nvar Capture = function (obj,width,height) {\n    this.width = width;\n    this.height = height;\n    this.pixels = new Pixels(width,height);\n    this.pixels.getImageData();\n    this.imageData = this.pixels.getImageData();\n    this.imageData.width = width;\n};\nvar url;\n//var jsVideo;\nCapture.prototype.start = function() {\n    var video = document.createElement(\"video\");\n    video.width = this.width;\n   video.height = this.height;\n    video.autoplay = true;\n     \n    if(navigator.webkitGetUserMedia) {\n        navigator.webkitGetUserMedia({audio:true, video:true}, function(stream) {\n            url = window.webkitURL.createObjectURL(stream);\n            video.src = url;\n        });\n    } else  if(navigator.mozGetUserMedia){\n        navigator.mozGetUserMedia(\n            {video: true},\n            function(stream) {\n                video.mozSrcObject=stream;\n                video.play();\n                streaming = true;\n            },\n            function(err) {\n                alert(\"An error occured! \" + err);\n            }\n        );\n    } else if(navigator.getUserMedia) {\n        navigator.getUserMedia(\"audio, video\", success, error);\n    }\n    this.pixels.setVideo(video);\n};\nCapture.prototype.loadPixels = function() {\n};\nCapture.prototype.available = function() {\n    return true;\n};\nCapture.prototype.read = function() {\n    //return true;\n};\nCapture.prototype.toImageData = function() {\n    return this.pixels.getImageData();\n};\n\n//Capture\u30af\u30e9\u30b9\u3067\u5185\u90e8\u7684\u306b\u4f7f\u7528\u3059\u308b\u30af\u30e9\u30b9\nvar Pixels = function(width,height) {\n    this.width=width;\n    this.height=height;\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.context = this.canvas.getContext(\"2d\");\n};\n \nPixels.prototype.getPixel = function (idx) {\n    if(!this.mypixels) {\n         this.mypixels = [];\n   \n        console.log(this.video.width+\",\"+ this.video.height);\n        var context = this.context;\n        var mypixels = this.mypixels;\n        var video = this.video;\n \n       setInterval(function() {\n           //video.src = url;\n           //console.log(\"start capture\");\n            //console.log(video.width+\",\"+ video.height);\n        context.drawImage(video,0,0,video.width,video.height);            \n        var imgData = context.getImageData(0,0,video.width,video.height);\n        \n        var i = 0;\n       var  j = 0;\n        for(var y = 0; y < video.height; y++) {\n        for(var x = 0; x < video.width; x++) {\n            mypixels[i++] = (imgData.data[j]<<16)\n                |(imgData.data[j+1]<<8)\n                |(imgData.data[j+2]);\n             \n            //Canvas\u306eimage\u306fRGBA\u306a\u306e\u3067\n            j = j + 4;\n        }      \n    }\n       //console.log(imgData.data[0]);\n       },100);\n         \n     \n    var i = 0;\n        for(var y = 0; y < this.video.height; y++) {\n        for(var x = 0; x < this.video.width; x++) {\n            this.mypixels[i++] = 128<<16|128<<8|128;\n        }   \n    }\n    }\n    return this.mypixels[idx];\n};\nPixels.prototype.setVideo = function(video) {\n    this.video = video;\n};\nPixels.prototype.getImageData = function() {\n    return this.context.getImageData(0,0,this.width,this.height);\n};\n```\n\n## \u306a\u3093\u3068\u306a\u304f\u8d77\u304d\u305d\u3046\u306a\u4e88\u611f\u306e\u3059\u308b\u4e0d\u5177\u5408\n\n\u8907\u6570\u306e\u30ab\u30e1\u30e9\u306f\u6271\u3048\u3066\u3044\u306a\u3044\u6c17\u304c\u3059\u308b\u3002\n\n# \u305d\u3093\u306a\u308f\u3051\u3067\u3001Processing\u306eVideo\u95a2\u9023\u306e\u30c7\u30e2\u304c\u305d\u306e\u307e\u307e\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u308b\n\n- [Brightness Tracking](http://jsdo.it/kjunichi/vBoH)\n- [Frame Differencing](http://jsdo.it/kjunichi/loEp)\n\n# \u95a2\u9023\u8a18\u4e8b\n- [Processing.js\u3067Capture\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f](http://kjunichi.cocolog-nifty.com/misc/2013/01/processinjscapt.html)\n- [Processing.js\u3067PImage\u3092\u52d5\u7684\u306b\u751f\u6210\u3059\u308b](http://kjunichi.cocolog-nifty.com/misc/2012/08/processingjspim.html)\n\n\n# \u3061\u3087\u3063\u3068\u30d9\u30af\u30c8\u30eb\u304c\u9055\u3046\u304c\u6d77\u306e\u5411\u3053\u3046\u3067\u306e\u4e8b\u4f8b\n\n- [GitHub fjenett / processing-video-js](https://github.com/fjenett/processing-video-js)", "tags": ["JavaScript", "processing.js", "WebRTC", "HTML5"]}