{"tags": ["Redmine3.3.1"], "context": "\n\n\u5bfe\u8c61\n\nRedmine : 3.3.1\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 : Linux, Firefox 50.1.0\n\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\u30e6\u30fc\u30b6\u30fc\u9078\u629e\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6301\u3064\u30c1\u30b1\u30c3\u30c8\u3092\u66f4\u65b0\u3059\u308b\u3068\u304d\u306b\u3001\u9078\u629e\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3092\u3064\u3044\u3067\u306b\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc\u306b\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308b\u3002\n\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc\u306e\u8ffd\u52a0\u3092\u81ea\u52d5\u306b\u3057\u305f\u3044\u3002\n\n\u65b9\u6cd5\nView Customize Plugin (https://github.com/onozaty/redmine-view-customize) \u3092\u4f7f\u3046\u3002\n\n/issues/\\d+$\n$(document).on(\"submit\", \"#issue-form\", function() {\n    var trackerId = \"1\";\n    var statusId = \"1\";\n    var userFieldIds = [\n        \"issue_custom_field_values_1\",\n        \"issue_custom_field_values_2\"\n    ];\n\n    if ($(\"#issue_tracker_id\").length > 0) {\n        if ($(\"#issue_tracker_id\").val() !== trackerId) {\n            return;\n        }\n    } else {\n        if (!$(\"#content > div.issue\").hasClass(\"tracker-\" + trackerId)) {\n            return;\n        }\n    }\n\n    if ($(\"#issue_status_id\").val() !== statusId) {\n        return;\n    }\n\n    var userIds = [];\n\n    for (var i = 0; i < userFieldIds.length; i++) {\n        $(\"#\" + userFieldIds[i]).each(function() {\n            var $this = $(this);\n\n            if ($this.is(\"select\")) {\n                if ($this.prop(\"multiple\")) {\n                    userIds = userIds.concat($this.val() || []);\n                } else {\n                    userIds.push($this.val());\n                }\n            } else if ($this.is(\"input\")) {\n                $(\"input[name='\" + $this.attr(\"name\") + \"'][value!='']:checked\").each(function() {\n                    userIds.push($(this).val());\n                });\n            }\n        });\n    }\n\n    if (!userIds) {\n        return;\n    }\n\n    $.post(location.href + \"/watchers\", { \"watcher\": { \"user_ids\": userIds } });\n});\n\n\n# \u5bfe\u8c61\n\n* Redmine : 3.3.1\n* \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 : Linux, Firefox 50.1.0\n\n# \u3084\u308a\u305f\u3044\u3053\u3068\n\n\u30e6\u30fc\u30b6\u30fc\u9078\u629e\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6301\u3064\u30c1\u30b1\u30c3\u30c8\u3092\u66f4\u65b0\u3059\u308b\u3068\u304d\u306b\u3001\u9078\u629e\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3092\u3064\u3044\u3067\u306b\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc\u306b\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308b\u3002\n\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc\u306e\u8ffd\u52a0\u3092\u81ea\u52d5\u306b\u3057\u305f\u3044\u3002\n\n# \u65b9\u6cd5\n\nView Customize Plugin (https://github.com/onozaty/redmine-view-customize) \u3092\u4f7f\u3046\u3002\n\n```js:/issues/\\d+$\n$(document).on(\"submit\", \"#issue-form\", function() {\n    var trackerId = \"1\";\n    var statusId = \"1\";\n    var userFieldIds = [\n        \"issue_custom_field_values_1\",\n        \"issue_custom_field_values_2\"\n    ];\n\n    if ($(\"#issue_tracker_id\").length > 0) {\n        if ($(\"#issue_tracker_id\").val() !== trackerId) {\n            return;\n        }\n    } else {\n        if (!$(\"#content > div.issue\").hasClass(\"tracker-\" + trackerId)) {\n            return;\n        }\n    }\n\n    if ($(\"#issue_status_id\").val() !== statusId) {\n        return;\n    }\n\n    var userIds = [];\n\n    for (var i = 0; i < userFieldIds.length; i++) {\n        $(\"#\" + userFieldIds[i]).each(function() {\n            var $this = $(this);\n\n            if ($this.is(\"select\")) {\n                if ($this.prop(\"multiple\")) {\n                    userIds = userIds.concat($this.val() || []);\n                } else {\n                    userIds.push($this.val());\n                }\n            } else if ($this.is(\"input\")) {\n                $(\"input[name='\" + $this.attr(\"name\") + \"'][value!='']:checked\").each(function() {\n                    userIds.push($(this).val());\n                });\n            }\n        });\n    }\n\n    if (!userIds) {\n        return;\n    }\n\n    $.post(location.href + \"/watchers\", { \"watcher\": { \"user_ids\": userIds } });\n});\n```\n"}