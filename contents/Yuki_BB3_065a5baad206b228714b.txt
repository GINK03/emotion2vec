{"context": "[AWS]aws-cli\u3067JSON\u3092\u6271\u3046\u305f\u3081\u306b\u30fc\uff4a\uff51\u57fa\u672c\u7de8\u30fc\u2460\u306e\u3064\u3065\u304d\u3002\n\u524d\u56de\u540c\u69d8\u30d6\u30ed\u30b0\u306e\u8a18\u4e8b\u3092\u898b\u3084\u3059\u3044\u306e\u3067\u3053\u3063\u3061\u306b\u3082\u66f8\u3044\u3066\u3044\u308b\u611f\u3058\u3002\n\u8a73\u7d30\u306f\u30d6\u30ed\u30b0\u306e\u65b9\u306b\u66f8\u3044\u3066\u307e\u3059\u3002\njq\u3092\u4f7f\u3063\u3066AWS\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3088\u3046\u2461\uff5c\u30cf\u30f3\u30ba\u30e9\u30dc\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0\n\u4eca\u56de\u4f7f\u7528\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306eJSON\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff12\u53f0\u5206\u306e\u60c5\u5831\u3092\u51fa\u529b\u3057\u3066\u3044\u307e\u3059\u3002\n\nsmaple-json\n{\n    \"Reservations\": [\n        {\n            \"OwnerId\": \"************\", \n            \"ReservationId\": \"r-********\", \n            \"Groups\": [], \n            \"Instances\": [\n                {\n                    \"Monitoring\": {\n                        \"State\": \"disabled\"\n                    }, \n                    \"PublicDnsName\": \"ec2-*************.ap-northeast-1.compute.amazonaws.com\", \n                    \"State\": {\n                        \"Code\": 16, \n                        \"Name\": \"running\"\n                    }, \n                    \"EbsOptimized\": false, \n                    \"LaunchTime\": \"2016-03-08T08:25:51.000Z\", \n                    \"PublicIpAddress\": \"************\", \n                    \"PrivateIpAddress\": \"172.31.23.149\", \n                    \"ProductCodes\": [], \n                    \"VpcId\": \"vpc-********\", \n                    \"StateTransitionReason\": \"\", \n                    \"InstanceId\": \"i-********\", \n                    \"ImageId\": \"ami-59bdb937\", \n                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                    \"KeyName\": \"ec2kye\", \n                    \"SecurityGroups\": [\n                        {\n                            \"GroupName\": \"launch-wizard-4\", \n                            \"GroupId\": \"sg-********\"\n                        }\n                    ], \n                    \"ClientToken\": \"AKWfs123456789\", \n                    \"SubnetId\": \"subnet-********\", \n                    \"InstanceType\": \"t2.micro\", \n                    \"NetworkInterfaces\": [\n                        {\n                            \"Status\": \"in-use\", \n                            \"MacAddress\": \"06:e4:22:c1:df:c5\", \n                            \"SourceDestCheck\": true, \n                            \"VpcId\": \"vpc-********\", \n                            \"Description\": \"\", \n                            \"Association\": {\n                                \"PublicIp\": \"*************\", \n                                \"PublicDnsName\": \"ec2-*********.ap-northeast-1.compute.amazonaws.com\", \n                                \"IpOwnerId\": \"amazon\"\n                            }, \n                            \"NetworkInterfaceId\": \"eni-********\", \n                            \"PrivateIpAddresses\": [\n                                {\n                                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                                    \"Association\": {\n                                        \"PublicIp\": \"************\", \n                                        \"PublicDnsName\": \"ec2-***********.ap-northeast-1.compute.amazonaws.com\", \n                                        \"IpOwnerId\": \"amazon\"\n                                    }, \n                                    \"Primary\": true, \n                                    \"PrivateIpAddress\": \"172.31.23.149\"\n                                }\n                            ], \n                            \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                            \"Attachment\": {\n                                \"Status\": \"attached\", \n                                \"DeviceIndex\": 0, \n                                \"DeleteOnTermination\": true, \n                                \"AttachmentId\": \"eni-attach-*********\", \n                                \"AttachTime\": \"2016-03-08T08:25:51.000Z\"\n                            }, \n                            \"Groups\": [\n                                {\n                                    \"GroupName\": \"launch-wizard-1\", \n                                    \"GroupId\": \"sg-*********\"\n                                }\n                            ], \n                            \"SubnetId\": \"subnet-*************\", \n                            \"OwnerId\": \"************\", \n                            \"PrivateIpAddress\": \"172.31.23.149\"\n                        }\n                    ], \n                    \"SourceDestCheck\": true, \n                    \"Placement\": {\n                        \"Tenancy\": \"default\", \n                        \"GroupName\": \"\", \n                        \"AvailabilityZone\": \"ap-northeast-1a\"\n                    }, \n                    \"Hypervisor\": \"xen\", \n                    \"BlockDeviceMappings\": [\n                        {\n                            \"DeviceName\": \"/dev/xvda\", \n                            \"Ebs\": {\n                                \"Status\": \"attached\", \n                                \"DeleteOnTermination\": true, \n                                \"VolumeId\": \"vol-**********\", \n                                \"AttachTime\": \"2016-03-08T08:25:52.000Z\"\n                            }\n                        }\n                    ], \n                    \"Architecture\": \"x86_64\", \n                    \"RootDeviceType\": \"ebs\", \n                    \"RootDeviceName\": \"/dev/xvda\", \n                    \"VirtualizationType\": \"hvm\", \n                    \"AmiLaunchIndex\": 0\n                }\n            ]\n        }, \n        {\n            \"OwnerId\": \"**************\", \n            \"ReservationId\": \"r-**********\", \n            \"Groups\": [], \n            \"Instances\": [\n                {\n                    \"Monitoring\": {\n                        \"State\": \"disabled\"\n                    }, \n                    \"PublicDnsName\": \"\", \n                    \"Platform\": \"windows\", \n                    \"State\": {\n                        \"Code\": 80, \n                        \"Name\": \"stopped\"\n                    }, \n                    \"EbsOptimized\": false, \n                    \"LaunchTime\": \"2016-02-24T05:53:59.000Z\", \n                    \"PrivateIpAddress\": \"172.31.31.197\", \n                    \"ProductCodes\": [], \n                    \"VpcId\": \"vpc-c**********\", \n                    \"StateTransitionReason\": \"User initiated (2016-02-24 10:01:43 GMT)\", \n                    \"InstanceId\": \"i-**********\", \n                    \"ImageId\": \"ami-2044434e\", \n                    \"PrivateDnsName\": \"ip-172-31-31-197.ap-northeast-1.compute.internal\", \n                    \"KeyName\": \"macpro\", \n                    \"SecurityGroups\": [\n                        {\n                            \"GroupName\": \"RDP\", \n                            \"GroupId\": \"sg-**********\"\n                        }\n                    ], \n                    \"ClientToken\": \"rduVq123456789\", \n                    \"SubnetId\": \"subnet-*********\", \n                    \"InstanceType\": \"t2.micro\", \n                    \"NetworkInterfaces\": [\n                        {\n                            \"Status\": \"in-use\", \n                            \"MacAddress\": \"06:34:e3:b1:a2:0d\", \n                            \"SourceDestCheck\": true, \n                            \"VpcId\": \"vpc-********\", \n                            \"Description\": \"\", \n                            \"NetworkInterfaceId\": \"eni-**********\", \n                            \"PrivateIpAddresses\": [\n                                {\n                                    \"PrivateDnsName\": \"ip-172-31-31-197.ap-northeast-1.compute.internal\", \n                                    \"Primary\": true, \n                                    \"PrivateIpAddress\": \"172.31.31.197\"\n                                }\n                            ], \n                            \"PrivateDnsName\": \"ip-172-31-31-197.ap-northeast-1.compute.internal\", \n                            \"Attachment\": {\n                                \"Status\": \"attached\", \n                                \"DeviceIndex\": 0, \n                                \"DeleteOnTermination\": true, \n                                \"AttachmentId\": \"eni-attach-********\", \n                                \"AttachTime\": \"2016-02-24T05:53:59.000Z\"\n                            }, \n                            \"Groups\": [\n                                {\n                                    \"GroupName\": \"RDP\", \n                                    \"GroupId\": \"sg-**********\"\n                                }\n                            ], \n                            \"SubnetId\": \"subnet-*********\", \n                            \"OwnerId\": \"************\", \n                            \"PrivateIpAddress\": \"172.31.31.197\"\n                        }\n                    ], \n                    \"SourceDestCheck\": true, \n                    \"Placement\": {\n                        \"Tenancy\": \"default\", \n                        \"GroupName\": \"\", \n                        \"AvailabilityZone\": \"ap-northeast-1a\"\n                    }, \n                    \"Hypervisor\": \"xen\", \n                    \"BlockDeviceMappings\": [\n                        {\n                            \"DeviceName\": \"/dev/sda1\", \n                            \"Ebs\": {\n                                \"Status\": \"attached\", \n                                \"DeleteOnTermination\": true, \n                                \"VolumeId\": \"vol-**********\", \n                                \"AttachTime\": \"2016-02-24T05:54:04.000Z\"\n                            }\n                        }\n                    ], \n                    \"Architecture\": \"x86_64\", \n                    \"StateReason\": {\n                        \"Message\": \"Client.UserInitiatedShutdown: User initiated shutdown\", \n                        \"Code\": \"Client.UserInitiatedShutdown\"\n                    }, \n                    \"RootDeviceName\": \"/dev/sda1\", \n                    \"VirtualizationType\": \"hvm\", \n                    \"RootDeviceType\": \"ebs\", \n                    \"Tags\": [\n                        {\n                            \"Value\": \"test\", \n                            \"Key\": \"Name\"\n                        }\n                    ], \n                    \"AmiLaunchIndex\": 0\n                }\n            ]\n        }\n    ]\n}\n\n\n\n\u3067\u306f\u4eca\u56de\u3082\u3055\u304f\u3055\u304f\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\nselect()\n\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u8981\u7d20\u306e\u307f\u3092\u62bd\u51fa\u3059\u308b\u3002\n\n\u8d77\u52d5\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u307f\u62bd\u51fa\naws ec2 describe-instances | jq '.Reservations[] | select(.Instances[].State.Name == \"running\")'\n\n\n\n\u7d50\u679c\n\n{\n            \"OwnerId\": \"************\", \n            \"ReservationId\": \"r-********\", \n            \"Groups\": [], \n            \"Instances\": [\n                {\n                    \"Monitoring\": {\n                        \"State\": \"disabled\"\n                    }, \n                    \"PublicDnsName\": \"ec2-*************.ap-northeast-1.compute.amazonaws.com\", \n                    \"State\": {\n                        \"Code\": 16, \n                        \"Name\": \"running\"\n                    }, \n                    \"EbsOptimized\": false, \n                    \"LaunchTime\": \"2016-03-08T08:25:51.000Z\", \n                    \"PublicIpAddress\": \"************\", \n                    \"PrivateIpAddress\": \"172.31.23.149\", \n                    \"ProductCodes\": [], \n                    \"VpcId\": \"vpc-********\", \n                    \"StateTransitionReason\": \"\", \n                    \"InstanceId\": \"i-********\", \n                    \"ImageId\": \"ami-59bdb937\", \n                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                    \"KeyName\": \"ec2kye\", \n                    \"SecurityGroups\": [\n                        {\n                            \"GroupName\": \"launch-wizard-4\", \n                            \"GroupId\": \"sg-********\"\n                        }\n                    ], \n                    \"ClientToken\": \"AKWfs123456789\", \n                    \"SubnetId\": \"subnet-********\", \n                    \"InstanceType\": \"t2.micro\", \n                    \"NetworkInterfaces\": [\n                        {\n                            \"Status\": \"in-use\", \n                            \"MacAddress\": \"06:e4:22:c1:df:c5\", \n                            \"SourceDestCheck\": true, \n                            \"VpcId\": \"vpc-********\", \n                            \"Description\": \"\", \n                            \"Association\": {\n                                \"PublicIp\": \"*************\", \n                                \"PublicDnsName\": \"ec2-*********.ap-northeast-1.compute.amazonaws.com\", \n                                \"IpOwnerId\": \"amazon\"\n                            }, \n                            \"NetworkInterfaceId\": \"eni-********\", \n                            \"PrivateIpAddresses\": [\n                                {\n                                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                                    \"Association\": {\n                                        \"PublicIp\": \"************\", \n                                        \"PublicDnsName\": \"ec2-***********.ap-northeast-1.compute.amazonaws.com\", \n                                        \"IpOwnerId\": \"amazon\"\n                                    }, \n                                    \"Primary\": true, \n                                    \"PrivateIpAddress\": \"172.31.23.149\"\n                                }\n                            ], \n                            \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                            \"Attachment\": {\n                                \"Status\": \"attached\", \n                                \"DeviceIndex\": 0, \n                                \"DeleteOnTermination\": true, \n                                \"AttachmentId\": \"eni-attach-*********\", \n                                \"AttachTime\": \"2016-03-08T08:25:51.000Z\"\n                            }, \n                            \"Groups\": [\n                                {\n                                    \"GroupName\": \"launch-wizard-1\", \n                                    \"GroupId\": \"sg-*********\"\n                                }\n                            ], \n                            \"SubnetId\": \"subnet-*************\", \n                            \"OwnerId\": \"************\", \n                            \"PrivateIpAddress\": \"172.31.23.149\"\n                        }\n                    ], \n                    \"SourceDestCheck\": true, \n                    \"Placement\": {\n                        \"Tenancy\": \"default\", \n                        \"GroupName\": \"\", \n                        \"AvailabilityZone\": \"ap-northeast-1a\"\n                    }, \n                    \"Hypervisor\": \"xen\", \n                    \"BlockDeviceMappings\": [\n                        {\n                            \"DeviceName\": \"/dev/xvda\", \n                            \"Ebs\": {\n                                \"Status\": \"attached\", \n                                \"DeleteOnTermination\": true, \n                                \"VolumeId\": \"vol-**********\", \n                                \"AttachTime\": \"2016-03-08T08:25:52.000Z\"\n                            }\n                        }\n                    ], \n                    \"Architecture\": \"x86_64\", \n                    \"RootDeviceType\": \"ebs\", \n                    \"RootDeviceName\": \"/dev/xvda\", \n                    \"VirtualizationType\": \"hvm\", \n                    \"AmiLaunchIndex\": 0\n                }\n            ]\n        }, \n\n\n\n\u51fa\u529b\u3092\u518d\u5ea6jq\u306b\u55b0\u308f\u305b\u308b\n\u30d1\u30a4\u30d7\u3067\u3064\u306a\u304e\u307e\u3059\n\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u518d\u5ea6\uff4a\uff51\u306b\u5165\u529b\n\naws ec2 describe-instances | jq '.Reservations[] | select(.Instances[].State.Name == \"stopped\")' | jq '.Instances[].NetworkInterfaces[].VpcId'\n\n\n\n\n\u7d50\u679c\n\"vpc-********\"\n\n\n\nJSON\u306e\u518d\u6574\u5f62\njq\u3067JSON\u3092\u66f8\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u51fa\u529b\u3055\u308c\u305f\u7d50\u679c\u3092\u518d\u5ea6JSON\u306e\u5f62\u5f0f\u306b\u3057\u307e\u3059\u3002\n\nJSON\u306e\u518d\u6574\u5f62\naws ec2 describe-instances | jq '.Reservations[] | select(.Instances[].State.Name == \"stopped\") | {\"instance id\":.Instances[].InstanceId,\"instance parm\":[{\"VPC ID\":.Instances[].NetworkInterfaces[].VpcId}],\"instance type\":.Instances[].InstanceType}'\n\n\n\n\u7d50\u679c\n{\n  \"instance id\": \"i-********\",\n  \"instance parm\": [\n    {\n      \"VPC ID\": \"vpc-c06de9a5\"\n    }\n  ],\n  \"instance type\": \"vpc-********\"\n}\n\n\n\u3053\u3093\u306a\u5177\u5408\u306bJSON\u51fa\u529b\u3057\u3066\u304a\u304f\u3068\u3001\u6b21\u306e\u51e6\u7406\u306b\u55b0\u308f\u305b\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n[[AWS]aws-cli\u3067JSON\u3092\u6271\u3046\u305f\u3081\u306b\u30fc\uff4a\uff51\u57fa\u672c\u7de8\u30fc\u2460](http://qiita.com/Yuki_BB3/items/d4af0f8301790be2a309)\u306e\u3064\u3065\u304d\u3002\n\u524d\u56de\u540c\u69d8\u30d6\u30ed\u30b0\u306e\u8a18\u4e8b\u3092\u898b\u3084\u3059\u3044\u306e\u3067\u3053\u3063\u3061\u306b\u3082\u66f8\u3044\u3066\u3044\u308b\u611f\u3058\u3002\n\u8a73\u7d30\u306f\u30d6\u30ed\u30b0\u306e\u65b9\u306b\u66f8\u3044\u3066\u307e\u3059\u3002\n[jq\u3092\u4f7f\u3063\u3066AWS\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3088\u3046\u2461\uff5c\u30cf\u30f3\u30ba\u30e9\u30dc\u30a8\u30f3\u30b8\u30cb\u30a2\u30d6\u30ed\u30b0](https://www.hands-lab.com/tech/entry/1328.html)\n\n\u4eca\u56de\u4f7f\u7528\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306eJSON\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff12\u53f0\u5206\u306e\u60c5\u5831\u3092\u51fa\u529b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```json:smaple-json\n{\n    \"Reservations\": [\n        {\n            \"OwnerId\": \"************\", \n            \"ReservationId\": \"r-********\", \n            \"Groups\": [], \n            \"Instances\": [\n                {\n                    \"Monitoring\": {\n                        \"State\": \"disabled\"\n                    }, \n                    \"PublicDnsName\": \"ec2-*************.ap-northeast-1.compute.amazonaws.com\", \n                    \"State\": {\n                        \"Code\": 16, \n                        \"Name\": \"running\"\n                    }, \n                    \"EbsOptimized\": false, \n                    \"LaunchTime\": \"2016-03-08T08:25:51.000Z\", \n                    \"PublicIpAddress\": \"************\", \n                    \"PrivateIpAddress\": \"172.31.23.149\", \n                    \"ProductCodes\": [], \n                    \"VpcId\": \"vpc-********\", \n                    \"StateTransitionReason\": \"\", \n                    \"InstanceId\": \"i-********\", \n                    \"ImageId\": \"ami-59bdb937\", \n                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                    \"KeyName\": \"ec2kye\", \n                    \"SecurityGroups\": [\n                        {\n                            \"GroupName\": \"launch-wizard-4\", \n                            \"GroupId\": \"sg-********\"\n                        }\n                    ], \n                    \"ClientToken\": \"AKWfs123456789\", \n                    \"SubnetId\": \"subnet-********\", \n                    \"InstanceType\": \"t2.micro\", \n                    \"NetworkInterfaces\": [\n                        {\n                            \"Status\": \"in-use\", \n                            \"MacAddress\": \"06:e4:22:c1:df:c5\", \n                            \"SourceDestCheck\": true, \n                            \"VpcId\": \"vpc-********\", \n                            \"Description\": \"\", \n                            \"Association\": {\n                                \"PublicIp\": \"*************\", \n                                \"PublicDnsName\": \"ec2-*********.ap-northeast-1.compute.amazonaws.com\", \n                                \"IpOwnerId\": \"amazon\"\n                            }, \n                            \"NetworkInterfaceId\": \"eni-********\", \n                            \"PrivateIpAddresses\": [\n                                {\n                                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                                    \"Association\": {\n                                        \"PublicIp\": \"************\", \n                                        \"PublicDnsName\": \"ec2-***********.ap-northeast-1.compute.amazonaws.com\", \n                                        \"IpOwnerId\": \"amazon\"\n                                    }, \n                                    \"Primary\": true, \n                                    \"PrivateIpAddress\": \"172.31.23.149\"\n                                }\n                            ], \n                            \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                            \"Attachment\": {\n                                \"Status\": \"attached\", \n                                \"DeviceIndex\": 0, \n                                \"DeleteOnTermination\": true, \n                                \"AttachmentId\": \"eni-attach-*********\", \n                                \"AttachTime\": \"2016-03-08T08:25:51.000Z\"\n                            }, \n                            \"Groups\": [\n                                {\n                                    \"GroupName\": \"launch-wizard-1\", \n                                    \"GroupId\": \"sg-*********\"\n                                }\n                            ], \n                            \"SubnetId\": \"subnet-*************\", \n                            \"OwnerId\": \"************\", \n                            \"PrivateIpAddress\": \"172.31.23.149\"\n                        }\n                    ], \n                    \"SourceDestCheck\": true, \n                    \"Placement\": {\n                        \"Tenancy\": \"default\", \n                        \"GroupName\": \"\", \n                        \"AvailabilityZone\": \"ap-northeast-1a\"\n                    }, \n                    \"Hypervisor\": \"xen\", \n                    \"BlockDeviceMappings\": [\n                        {\n                            \"DeviceName\": \"/dev/xvda\", \n                            \"Ebs\": {\n                                \"Status\": \"attached\", \n                                \"DeleteOnTermination\": true, \n                                \"VolumeId\": \"vol-**********\", \n                                \"AttachTime\": \"2016-03-08T08:25:52.000Z\"\n                            }\n                        }\n                    ], \n                    \"Architecture\": \"x86_64\", \n                    \"RootDeviceType\": \"ebs\", \n                    \"RootDeviceName\": \"/dev/xvda\", \n                    \"VirtualizationType\": \"hvm\", \n                    \"AmiLaunchIndex\": 0\n                }\n            ]\n        }, \n        {\n            \"OwnerId\": \"**************\", \n            \"ReservationId\": \"r-**********\", \n            \"Groups\": [], \n            \"Instances\": [\n                {\n                    \"Monitoring\": {\n                        \"State\": \"disabled\"\n                    }, \n                    \"PublicDnsName\": \"\", \n                    \"Platform\": \"windows\", \n                    \"State\": {\n                        \"Code\": 80, \n                        \"Name\": \"stopped\"\n                    }, \n                    \"EbsOptimized\": false, \n                    \"LaunchTime\": \"2016-02-24T05:53:59.000Z\", \n                    \"PrivateIpAddress\": \"172.31.31.197\", \n                    \"ProductCodes\": [], \n                    \"VpcId\": \"vpc-c**********\", \n                    \"StateTransitionReason\": \"User initiated (2016-02-24 10:01:43 GMT)\", \n                    \"InstanceId\": \"i-**********\", \n                    \"ImageId\": \"ami-2044434e\", \n                    \"PrivateDnsName\": \"ip-172-31-31-197.ap-northeast-1.compute.internal\", \n                    \"KeyName\": \"macpro\", \n                    \"SecurityGroups\": [\n                        {\n                            \"GroupName\": \"RDP\", \n                            \"GroupId\": \"sg-**********\"\n                        }\n                    ], \n                    \"ClientToken\": \"rduVq123456789\", \n                    \"SubnetId\": \"subnet-*********\", \n                    \"InstanceType\": \"t2.micro\", \n                    \"NetworkInterfaces\": [\n                        {\n                            \"Status\": \"in-use\", \n                            \"MacAddress\": \"06:34:e3:b1:a2:0d\", \n                            \"SourceDestCheck\": true, \n                            \"VpcId\": \"vpc-********\", \n                            \"Description\": \"\", \n                            \"NetworkInterfaceId\": \"eni-**********\", \n                            \"PrivateIpAddresses\": [\n                                {\n                                    \"PrivateDnsName\": \"ip-172-31-31-197.ap-northeast-1.compute.internal\", \n                                    \"Primary\": true, \n                                    \"PrivateIpAddress\": \"172.31.31.197\"\n                                }\n                            ], \n                            \"PrivateDnsName\": \"ip-172-31-31-197.ap-northeast-1.compute.internal\", \n                            \"Attachment\": {\n                                \"Status\": \"attached\", \n                                \"DeviceIndex\": 0, \n                                \"DeleteOnTermination\": true, \n                                \"AttachmentId\": \"eni-attach-********\", \n                                \"AttachTime\": \"2016-02-24T05:53:59.000Z\"\n                            }, \n                            \"Groups\": [\n                                {\n                                    \"GroupName\": \"RDP\", \n                                    \"GroupId\": \"sg-**********\"\n                                }\n                            ], \n                            \"SubnetId\": \"subnet-*********\", \n                            \"OwnerId\": \"************\", \n                            \"PrivateIpAddress\": \"172.31.31.197\"\n                        }\n                    ], \n                    \"SourceDestCheck\": true, \n                    \"Placement\": {\n                        \"Tenancy\": \"default\", \n                        \"GroupName\": \"\", \n                        \"AvailabilityZone\": \"ap-northeast-1a\"\n                    }, \n                    \"Hypervisor\": \"xen\", \n                    \"BlockDeviceMappings\": [\n                        {\n                            \"DeviceName\": \"/dev/sda1\", \n                            \"Ebs\": {\n                                \"Status\": \"attached\", \n                                \"DeleteOnTermination\": true, \n                                \"VolumeId\": \"vol-**********\", \n                                \"AttachTime\": \"2016-02-24T05:54:04.000Z\"\n                            }\n                        }\n                    ], \n                    \"Architecture\": \"x86_64\", \n                    \"StateReason\": {\n                        \"Message\": \"Client.UserInitiatedShutdown: User initiated shutdown\", \n                        \"Code\": \"Client.UserInitiatedShutdown\"\n                    }, \n                    \"RootDeviceName\": \"/dev/sda1\", \n                    \"VirtualizationType\": \"hvm\", \n                    \"RootDeviceType\": \"ebs\", \n                    \"Tags\": [\n                        {\n                            \"Value\": \"test\", \n                            \"Key\": \"Name\"\n                        }\n                    ], \n                    \"AmiLaunchIndex\": 0\n                }\n            ]\n        }\n    ]\n}\n\n```\n\n\u3067\u306f\u4eca\u56de\u3082\u3055\u304f\u3055\u304f\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n##select()\n\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u8981\u7d20\u306e\u307f\u3092\u62bd\u51fa\u3059\u308b\u3002\n\n```jq:\u8d77\u52d5\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u307f\u62bd\u51fa\naws ec2 describe-instances | jq '.Reservations[] | select(.Instances[].State.Name == \"running\")'\n```\n\n\n```:\u7d50\u679c\n\n{\n            \"OwnerId\": \"************\", \n            \"ReservationId\": \"r-********\", \n            \"Groups\": [], \n            \"Instances\": [\n                {\n                    \"Monitoring\": {\n                        \"State\": \"disabled\"\n                    }, \n                    \"PublicDnsName\": \"ec2-*************.ap-northeast-1.compute.amazonaws.com\", \n                    \"State\": {\n                        \"Code\": 16, \n                        \"Name\": \"running\"\n                    }, \n                    \"EbsOptimized\": false, \n                    \"LaunchTime\": \"2016-03-08T08:25:51.000Z\", \n                    \"PublicIpAddress\": \"************\", \n                    \"PrivateIpAddress\": \"172.31.23.149\", \n                    \"ProductCodes\": [], \n                    \"VpcId\": \"vpc-********\", \n                    \"StateTransitionReason\": \"\", \n                    \"InstanceId\": \"i-********\", \n                    \"ImageId\": \"ami-59bdb937\", \n                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                    \"KeyName\": \"ec2kye\", \n                    \"SecurityGroups\": [\n                        {\n                            \"GroupName\": \"launch-wizard-4\", \n                            \"GroupId\": \"sg-********\"\n                        }\n                    ], \n                    \"ClientToken\": \"AKWfs123456789\", \n                    \"SubnetId\": \"subnet-********\", \n                    \"InstanceType\": \"t2.micro\", \n                    \"NetworkInterfaces\": [\n                        {\n                            \"Status\": \"in-use\", \n                            \"MacAddress\": \"06:e4:22:c1:df:c5\", \n                            \"SourceDestCheck\": true, \n                            \"VpcId\": \"vpc-********\", \n                            \"Description\": \"\", \n                            \"Association\": {\n                                \"PublicIp\": \"*************\", \n                                \"PublicDnsName\": \"ec2-*********.ap-northeast-1.compute.amazonaws.com\", \n                                \"IpOwnerId\": \"amazon\"\n                            }, \n                            \"NetworkInterfaceId\": \"eni-********\", \n                            \"PrivateIpAddresses\": [\n                                {\n                                    \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                                    \"Association\": {\n                                        \"PublicIp\": \"************\", \n                                        \"PublicDnsName\": \"ec2-***********.ap-northeast-1.compute.amazonaws.com\", \n                                        \"IpOwnerId\": \"amazon\"\n                                    }, \n                                    \"Primary\": true, \n                                    \"PrivateIpAddress\": \"172.31.23.149\"\n                                }\n                            ], \n                            \"PrivateDnsName\": \"ip-172-31-23-149.ap-northeast-1.compute.internal\", \n                            \"Attachment\": {\n                                \"Status\": \"attached\", \n                                \"DeviceIndex\": 0, \n                                \"DeleteOnTermination\": true, \n                                \"AttachmentId\": \"eni-attach-*********\", \n                                \"AttachTime\": \"2016-03-08T08:25:51.000Z\"\n                            }, \n                            \"Groups\": [\n                                {\n                                    \"GroupName\": \"launch-wizard-1\", \n                                    \"GroupId\": \"sg-*********\"\n                                }\n                            ], \n                            \"SubnetId\": \"subnet-*************\", \n                            \"OwnerId\": \"************\", \n                            \"PrivateIpAddress\": \"172.31.23.149\"\n                        }\n                    ], \n                    \"SourceDestCheck\": true, \n                    \"Placement\": {\n                        \"Tenancy\": \"default\", \n                        \"GroupName\": \"\", \n                        \"AvailabilityZone\": \"ap-northeast-1a\"\n                    }, \n                    \"Hypervisor\": \"xen\", \n                    \"BlockDeviceMappings\": [\n                        {\n                            \"DeviceName\": \"/dev/xvda\", \n                            \"Ebs\": {\n                                \"Status\": \"attached\", \n                                \"DeleteOnTermination\": true, \n                                \"VolumeId\": \"vol-**********\", \n                                \"AttachTime\": \"2016-03-08T08:25:52.000Z\"\n                            }\n                        }\n                    ], \n                    \"Architecture\": \"x86_64\", \n                    \"RootDeviceType\": \"ebs\", \n                    \"RootDeviceName\": \"/dev/xvda\", \n                    \"VirtualizationType\": \"hvm\", \n                    \"AmiLaunchIndex\": 0\n                }\n            ]\n        }, \n```\n\n##\u51fa\u529b\u3092\u518d\u5ea6jq\u306b\u55b0\u308f\u305b\u308b\n\u30d1\u30a4\u30d7\u3067\u3064\u306a\u304e\u307e\u3059\n\n```bash:\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u518d\u5ea6\uff4a\uff51\u306b\u5165\u529b\n\naws ec2 describe-instances | jq '.Reservations[] | select(.Instances[].State.Name == \"stopped\")' | jq '.Instances[].NetworkInterfaces[].VpcId'\n\n```\n\n\n```:\u7d50\u679c\n\"vpc-********\"\n```\n\n##JSON\u306e\u518d\u6574\u5f62\njq\u3067JSON\u3092\u66f8\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u51fa\u529b\u3055\u308c\u305f\u7d50\u679c\u3092\u518d\u5ea6JSON\u306e\u5f62\u5f0f\u306b\u3057\u307e\u3059\u3002\n\n```bash:JSON\u306e\u518d\u6574\u5f62\naws ec2 describe-instances | jq '.Reservations[] | select(.Instances[].State.Name == \"stopped\") | {\"instance id\":.Instances[].InstanceId,\"instance parm\":[{\"VPC ID\":.Instances[].NetworkInterfaces[].VpcId}],\"instance type\":.Instances[].InstanceType}'\n```\n\n```:\u7d50\u679c\n{\n  \"instance id\": \"i-********\",\n  \"instance parm\": [\n    {\n      \"VPC ID\": \"vpc-c06de9a5\"\n    }\n  ],\n  \"instance type\": \"vpc-********\"\n}\n```\n\n\u3053\u3093\u306a\u5177\u5408\u306bJSON\u51fa\u529b\u3057\u3066\u304a\u304f\u3068\u3001\u6b21\u306e\u51e6\u7406\u306b\u55b0\u308f\u305b\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n", "tags": ["JSON", "aws-cli", "jq", "AWS"]}