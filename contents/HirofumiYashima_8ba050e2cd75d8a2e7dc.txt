{"tags": ["Python", "python3", "NLP", "\u81ea\u7136\u8a00\u8a9e\u51e6\u7406", "word2vec"], "context": " More than 1 year has passed since last update.\n\n1. gensim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5165\u308b doc2vec.py \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u5f8c\u3001okay\u3055\u3093\u306e\uff08\u6539\uff09doc2vec.py \u3092\u914d\u7f6e\n\n\nokappy\u3055\u3093 Qiita\u8a18\u4e8b\uff082015/05/12\uff09\u300cWord2Vec\u306e\u9032\u5316\u5f62Doc2Vec\u3067\u6587\u7ae0\u3068\u6587\u7ae0\u306e\u985e\u4f3c\u5ea6\u3092\u7b97\u51fa\u3059\u308b\u300d\n\n\u4eee\u306bokappy_gensim\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u3001okappy\u3055\u3093\u306edoc2vec.py\u3092\u30b3\u30d4\u30da\u3057\u3066 doc2vec.py\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u3001/anaconda/lib/python3.5/site-packages/gensim/models/\u914d\u4e0b\u306b\u914d\u7f6e\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u540c\u540d\u30d5\u30a1\u30a4\u30eb\u3092\u4e0a\u66f8\u304d\uff09\n\nMac Terminal\n~ $ mkdir okappy_gensim\n~ $ cd okappy_gensim/\n~/okappy_gensim $ emacs doc2vec.py\n~/okappy_gensim $ ls\ndoc2vec.py\n~/okappy_gensim $ \n\n\n\nMac Terminal\n~/okappy_gensim $ ls /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/\n__init__.py             lsi_dispatcher.py\n__pycache__             lsi_worker.py\ndoc2vec.py              lsimodel.py\ndoc2vec_inner.c             phrases.py\ndoc2vec_inner.cpython-35m-darwin.so rpmodel.py\ndoc2vec_inner.pyx           tfidfmodel.py\nhdpmodel.py             voidptr.h\nlda_dispatcher.py           word2vec.py\nlda_worker.py               word2vec_inner.c\nldamodel.py             word2vec_inner.cpython-35m-darwin.so\nldamulticore.py             word2vec_inner.pyx\nlogentropy_model.py         wrappers\n~/okappy_gensim $ \n~/okappy_gensim $ ls /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/ | grep doc2vec.py\ndoc2vec.py\n~/okappy_gensim $ \n\n~/okappy_gensim $ mv doc2vec.py /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/doc2vec.py\n~/okappy_gensim $ ls /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/ | grep doc2vec.py\ndoc2vec.py\n~/okappy_gensim $ \n~/okappy_gensim $ ls -la /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/ | grep doc2vec.py\n-rw-r--r--   1 hirofumi.yashima  Domain   15287  2  4 19:30 doc2vec.py\n~/okappy_gensim $ \n\n\n\n2. Anacona IPython (Jupyter) \u3092\u8d77\u52d5\n\n\nAnaconda IPython\ncd /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/\nls | grep doc2vec.py\n\n\ndoc2vec.py\n\n\n3. okappy\u3055\u3093 Qiita\u8a18\u4e8b\u6240\u53ce\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30fb\u30b3\u30fc\u30c9 \u3092 \u5199\u7d4c\u3057\u3066\u5b9f\u884c\n\n\npython3.5.1\nimport gensim\nimport scipy\n\ndocs = [\n    ['human', 'interface', 'computer'], #0\n    ['survey', 'user', 'computer', 'system', 'response', 'time'], #1\n    ['eps', 'user', 'interface', 'system'], #2\n    ['system', 'human', 'system', 'eps'], #3\n    ['user', 'response', 'time'], #4\n    ['trees'], #5\n    ['graph', 'trees'], #6\n    ['graph', 'minors', 'trees'], #7\n    ['graph', 'minors', 'survey'] #8\n]\n\ntitles = [\n    \"doc1\",\n    \"doc2\",\n    \"doc3\",\n    \"doc4\",\n    \"doc5\",\n    \"doc6\",\n    \"doc7\",\n    \"doc8\",\n    \"doc9\"\n]\n\n\nokappy\u3055\u3093\u304c\u72ec\u81ea\u306b\u5b9a\u7fa9\u3057\u305fdoc2vec.LabeledListSentence()\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\n\uff08\u6210\u529f\uff09\nlabeledSentences = gensim.models.doc2vec.LabeledListSentence(docs,titles)\n\n\n\u4ee5\u4e0b\u3067\u5931\u6557\n\n\npython3.5.1\nmodel = gensim.models.doc2vec.Doc2Vec(labeledSentences, min_count=0)\n\n\n\nTypeError: 'LabeledSentence' object is not iterable\ngensim/models/word2vec.py \u306e 523\u884c\u76ee\u304c\u547c\u3073\u51fa\u3055\u308c\u3066\u5b9f\u884c\u3055\u308c\u308b\u969b\u3001\u4ee5\u4e0b\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u3059\u308b\u90e8\u5206\u3067\u3001\u4e0a\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u3067\u308b\uff08\u30a4\u30c6\u30ec\u30fc\u30c8\u53ef\u80fd\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u306f\u306a\u3044\u3068\u51fa\u529b\u3055\u308c\u308b\uff09\n\n\n--> 523             for word in sentence:\n    524                 vocab[word] += 1\n\n\npython3.5.1\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-14-ba8d48edddb9> in <module>()\n----> 1 model = gensim.models.doc2vec.Doc2Vec(labeledSentences, min_count=0)\n\n/Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/doc2vec.py in __init__(self, sentences, size, alpha, window, min_count, sample, seed, workers, min_alpha, dm, hs, negative, dm_mean, train_words, train_lbls, **kwargs)\n    188         self.labels = set()\n    189         if sentences is not None:\n--> 190             self.build_vocab(sentences)\n    191             self.train(sentences)\n    192             self.build_labels(sentences)\n\n/Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/word2vec.py in build_vocab(self, sentences, keep_raw_vocab, trim_rule)\n    506 \n    507         \"\"\"\n--> 508         self.scan_vocab(sentences, trim_rule=trim_rule)  # initial survey\n    509         self.scale_vocab(keep_raw_vocab=keep_raw_vocab, trim_rule=trim_rule)  # trim by min_count & precalculate downsampling\n    510         self.finalize_vocab()  # build tables & arrays\n\n/Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/word2vec.py in scan_vocab(self, sentences, progress_per, trim_rule)\n    521                 logger.info(\"PROGRESS: at sentence #%i, processed %i words, keeping %i word types\",\n    522                             sentence_no, sum(itervalues(vocab)) + total_words, len(vocab))\n--> 523             for word in sentence:\n    524                 vocab[word] += 1\n    525 \n\nTypeError: 'LabeledSentence' object is not iterable\n\n\n\n###__1. gensim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5165\u308b doc2vec.py \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u5f8c\u3001okay\u3055\u3093\u306e\uff08\u6539\uff09doc2vec.py \u3092\u914d\u7f6e__\n\n* [okappy\u3055\u3093 Qiita\u8a18\u4e8b\uff082015/05/12\uff09\u300cWord2Vec\u306e\u9032\u5316\u5f62Doc2Vec\u3067\u6587\u7ae0\u3068\u6587\u7ae0\u306e\u985e\u4f3c\u5ea6\u3092\u7b97\u51fa\u3059\u308b\u300d](http://qiita.com/okappy/items/32a7ba7eddf8203c9fa1)\n\n\u4eee\u306bokappy_gensim\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u3001okappy\u3055\u3093\u306edoc2vec.py\u3092\u30b3\u30d4\u30da\u3057\u3066 doc2vec.py\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u3001/anaconda/lib/python3.5/site-packages/gensim/models/\u914d\u4e0b\u306b\u914d\u7f6e\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u540c\u540d\u30d5\u30a1\u30a4\u30eb\u3092\u4e0a\u66f8\u304d\uff09\n\n```{bash:Mac Terminal}\n~ $ mkdir okappy_gensim\n~ $ cd okappy_gensim/\n~/okappy_gensim $ emacs doc2vec.py\n~/okappy_gensim $ ls\ndoc2vec.py\n~/okappy_gensim $ \n```\n\n\n```{bash:Mac Terminal}\n~/okappy_gensim $ ls /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/\n__init__.py\t\t\t\tlsi_dispatcher.py\n__pycache__\t\t\t\tlsi_worker.py\ndoc2vec.py\t\t\t\tlsimodel.py\ndoc2vec_inner.c\t\t\t\tphrases.py\ndoc2vec_inner.cpython-35m-darwin.so\trpmodel.py\ndoc2vec_inner.pyx\t\t\ttfidfmodel.py\nhdpmodel.py\t\t\t\tvoidptr.h\nlda_dispatcher.py\t\t\tword2vec.py\nlda_worker.py\t\t\t\tword2vec_inner.c\nldamodel.py\t\t\t\tword2vec_inner.cpython-35m-darwin.so\nldamulticore.py\t\t\t\tword2vec_inner.pyx\nlogentropy_model.py\t\t\twrappers\n~/okappy_gensim $ \n~/okappy_gensim $ ls /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/ | grep doc2vec.py\ndoc2vec.py\n~/okappy_gensim $ \n\n~/okappy_gensim $ mv doc2vec.py /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/doc2vec.py\n~/okappy_gensim $ ls /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/ | grep doc2vec.py\ndoc2vec.py\n~/okappy_gensim $ \n~/okappy_gensim $ ls -la /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/ | grep doc2vec.py\n-rw-r--r--   1 hirofumi.yashima  Domain   15287  2  4 19:30 doc2vec.py\n~/okappy_gensim $ \n```\n\n###__2. Anacona IPython (Jupyter) \u3092\u8d77\u52d5__\n\n```{bash:Anaconda IPython}\ncd /Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/\nls | grep doc2vec.py\n```\n\n```\ndoc2vec.py\n```\n\n###__3. okappy\u3055\u3093 Qiita\u8a18\u4e8b\u6240\u53ce\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30fb\u30b3\u30fc\u30c9 \u3092 \u5199\u7d4c\u3057\u3066\u5b9f\u884c__\n\n```{python3:python3.5.1}\nimport gensim\nimport scipy\n\ndocs = [\n    ['human', 'interface', 'computer'], #0\n    ['survey', 'user', 'computer', 'system', 'response', 'time'], #1\n    ['eps', 'user', 'interface', 'system'], #2\n    ['system', 'human', 'system', 'eps'], #3\n    ['user', 'response', 'time'], #4\n    ['trees'], #5\n    ['graph', 'trees'], #6\n    ['graph', 'minors', 'trees'], #7\n    ['graph', 'minors', 'survey'] #8\n]\n\ntitles = [\n    \"doc1\",\n    \"doc2\",\n    \"doc3\",\n    \"doc4\",\n    \"doc5\",\n    \"doc6\",\n    \"doc7\",\n    \"doc8\",\n    \"doc9\"\n]\n```\n\n\n__okappy\u3055\u3093\u304c\u72ec\u81ea\u306b\u5b9a\u7fa9\u3057\u305fdoc2vec.LabeledListSentence()\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c__\n__\uff08\u6210\u529f\uff09__\n\n```\nlabeledSentences = gensim.models.doc2vec.LabeledListSentence(docs,titles)\n```\n\n###__\u4ee5\u4e0b\u3067\u5931\u6557__\n\n```{python3:python3.5.1}\nmodel = gensim.models.doc2vec.Doc2Vec(labeledSentences, min_count=0)\n```\n\n* TypeError: 'LabeledSentence' object is not iterable\n* gensim/models/word2vec.py \u306e 523\u884c\u76ee\u304c\u547c\u3073\u51fa\u3055\u308c\u3066\u5b9f\u884c\u3055\u308c\u308b\u969b\u3001\u4ee5\u4e0b\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u3059\u308b\u90e8\u5206\u3067\u3001\u4e0a\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u3067\u308b\uff08\u30a4\u30c6\u30ec\u30fc\u30c8\u53ef\u80fd\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u306f\u306a\u3044\u3068\u51fa\u529b\u3055\u308c\u308b\uff09\n\n> --> 523             for word in sentence:\n>     524                 vocab[word] += 1\n\n\n```{python3:python3.5.1}\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-14-ba8d48edddb9> in <module>()\n----> 1 model = gensim.models.doc2vec.Doc2Vec(labeledSentences, min_count=0)\n\n/Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/doc2vec.py in __init__(self, sentences, size, alpha, window, min_count, sample, seed, workers, min_alpha, dm, hs, negative, dm_mean, train_words, train_lbls, **kwargs)\n    188         self.labels = set()\n    189         if sentences is not None:\n--> 190             self.build_vocab(sentences)\n    191             self.train(sentences)\n    192             self.build_labels(sentences)\n\n/Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/word2vec.py in build_vocab(self, sentences, keep_raw_vocab, trim_rule)\n    506 \n    507         \"\"\"\n--> 508         self.scan_vocab(sentences, trim_rule=trim_rule)  # initial survey\n    509         self.scale_vocab(keep_raw_vocab=keep_raw_vocab, trim_rule=trim_rule)  # trim by min_count & precalculate downsampling\n    510         self.finalize_vocab()  # build tables & arrays\n\n/Users/hirofumi.yashima/anaconda/lib/python3.5/site-packages/gensim/models/word2vec.py in scan_vocab(self, sentences, progress_per, trim_rule)\n    521                 logger.info(\"PROGRESS: at sentence #%i, processed %i words, keeping %i word types\",\n    522                             sentence_no, sum(itervalues(vocab)) + total_words, len(vocab))\n--> 523             for word in sentence:\n    524                 vocab[word] += 1\n    525 \n\nTypeError: 'LabeledSentence' object is not iterable\n```\n"}