{"tags": ["Android", "Retrofit"], "context": " More than 1 year has passed since last update.\n\n\u524d\u7f6e\u304d\nRetrofit 1.9.0 -> Retrofit 2.0.0-beta2\u306bupdate\u3057\u305f\u969b\u306b\u3044\u308d\u3044\u308d\u5909\u66f4\u3057\u3066\u305f\u306e\u3067\u305d\u306e\u30e1\u30e2\u3002\n\n\u5927\u304d\u306a\u5909\u66f4\u70b9\n\nRestAdapter.Builder -> Retrofit.Builder\nBefore\nRestAdapter restAdapter = new RestAdapter.Build()\n    .setEndpoint(\"http://ifconfig.me\")\n    .setConverter(MoshiConverterFactory.create())\n    .build()\n\nAfter\nRetrofit retrofit = new Retrofit.Buidler()\n    .baseUrl(\"http://ifconfig.me\")\n    .addConverterFactory(MoshiConverterFactory.create())\n    .build();\n\n\u5730\u5473\u306b\u540d\u524d\u3082\u4f7f\u3044\u65b9\u3082\u304b\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\nConverter / Adapter\u306e\u5206\u96e2\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u3069\u3046\u5909\u63db\u3059\u308b\u304b\uff1f(xml\u306b json\u306b\u306a\u3069) \u306fConverter\u306b\u306a\u308a\u3001\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u3069\u3046\u3084\u3063\u3066\u3064\u306a\u3050\u304b\uff1f(Observable\u3067\u53d7\u3051\u308b\u306a\u3069) \u306f Adapter\u306b\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\nhttps://github.com/square/retrofit/tree/master/retrofit-adapters\n\n\ninterface\u306e\u8fd4\u308a\u5024\u304cCall<T> \u306b\u306a\u3063\u305f\u3002\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(\"http://ifconfig.me\")\n        .addConverterFactory(MoshiConverterFactory.create())\n        .build();\n\nIfconfigApi api = retrofit.create(IfconfigApi.class);\nCall<AllEntity> call = api.all();\nResponse<AllEntity> response = call.execute();\nAllEntity entity = response.body();\n\ncall\u306b\u306f\u4e0b\u8a18\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u751f\u3048\u3066\u307e\u3059\n\n\u540c\u671f\u7684\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b execute()\n\n\u975e\u540c\u671f\u7684\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b enqueue(Callback<T> callback)\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3059\u308b cancel()\n\n\n\nokhttp\u3092must\u3067\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\nokhttp\u306eResponse object\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u5185\u5bb9\u304c\u304b\u306a\u308a\u8a73\u7d30\u306b\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nhttps://github.com/square/okhttp/blob/master/okhttp/src/main/java/com/squareup/okhttp/Response.java\n\nresponse\u30d8\u30c3\u30c0\u304c\u524d\u306f\u4e0a\u624b\u304f\u53d6\u308c\u306a\u304b\u3063\u305f\u308a\u3057\u305f\u306e\u3067\u5730\u5473\u306b\u5b09\u3057\u3044\u5909\u66f4\u304b\u3082\u3002\n\u3044\u307e\u307e\u3067okhttp\u306e\u5229\u7528\u3092\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u5834\u5408\u3001method\u6570\u304c2K\u307b\u3069\u5897\u3048\u308b\u306e\u3067\u6ce8\u610f\n\nLogging\u306fokhttp\u3078\nRetrofit.Builder().setLogLevel()\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u4ee3\u308f\u308a\u306b Retrofit.Builder().client(okhttpclient) \u3067 OkHttpClient\u3092\u6e21\u3057\u3066\u3001okhttp\u306einterceptor\u3067\u30ed\u30ae\u30f3\u30b0\u3092\u3059\u308b\u306e\u304c\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\nhttps://github.com/square/retrofit/issues/378\nhttps://github.com/square/okhttp/wiki/Interceptors\n\n\n\u30ab\u30b9\u30bf\u30e0\u30d8\u30c3\u30c0\u306fokhttp\u3078\n\u4ee5\u524d\u306f Retrofit.Builder().setRequestIntercepter() \u3067\u30ab\u30b9\u30bf\u30e0\u30d8\u30c3\u30c0\u3092\u3064\u3051\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3082okhttp\u306einterceptor\u306b\u4efb\u305b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nhttp://stackoverflow.com/questions/32605711/adding-header-to-all-request-with-retrofit-2\n\n\nRxJava\u306e\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306fAdapter\u3078\nrxjava\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306b\u306f\u3001\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\ncompile 'com.squareup.retrofit:adapter-rxjava:2.0.0-beta2'\n\n\u73fe\u72b6\u3060\u3068enqueue\u305b\u305a\u306bexecute\u3059\u308b\u65b9\u5f0f\u3067Observable\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u306e\u3067\u3001Android\u304b\u3089\u79fb\u884c\u5229\u7528\u3059\u308b\u969b\u306b\u306fandroid.os.NetworkOnMainThreadException \u304c\u51fa\u306a\u3044\u3088\u3046\u306b\u5229\u7528\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u5c0f\u3055\u306a\u5909\u66f4\u70b9\n\nretrofit.RetrofitError -> retrofit.HttpException\n\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9200\u4ee5\u5916\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u6642\u306b\u4ee5\u524d\u306fRetrofitError\u3067\u3057\u305f\u304c\u3001HttpException\u306b\u5909\u66f4\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u30b5\u30f3\u30d7\u30eb\n\nhttps://github.com/mattak/RetrofitSample\n\n# \u524d\u7f6e\u304d\n\nRetrofit 1.9.0 -> Retrofit 2.0.0-beta2\u306bupdate\u3057\u305f\u969b\u306b\u3044\u308d\u3044\u308d\u5909\u66f4\u3057\u3066\u305f\u306e\u3067\u305d\u306e\u30e1\u30e2\u3002\n\n# \u5927\u304d\u306a\u5909\u66f4\u70b9\n\n## RestAdapter.Builder -> Retrofit.Builder\n\nBefore\n\n```java\nRestAdapter restAdapter = new RestAdapter.Build()\n    .setEndpoint(\"http://ifconfig.me\")\n    .setConverter(MoshiConverterFactory.create())\n    .build()\n```\n\nAfter\n\n```java\nRetrofit retrofit = new Retrofit.Buidler()\n    .baseUrl(\"http://ifconfig.me\")\n    .addConverterFactory(MoshiConverterFactory.create())\n    .build();\n```\n\n\u5730\u5473\u306b\u540d\u524d\u3082\u4f7f\u3044\u65b9\u3082\u304b\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\n## Converter / Adapter\u306e\u5206\u96e2\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u3069\u3046\u5909\u63db\u3059\u308b\u304b\uff1f(xml\u306b json\u306b\u306a\u3069) \u306fConverter\u306b\u306a\u308a\u3001\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u3069\u3046\u3084\u3063\u3066\u3064\u306a\u3050\u304b\uff1f(Observable\u3067\u53d7\u3051\u308b\u306a\u3069) \u306f Adapter\u306b\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\n- https://github.com/square/retrofit/tree/master/retrofit-adapters\n\n## interface\u306e\u8fd4\u308a\u5024\u304c`Call<T>` \u306b\u306a\u3063\u305f\u3002\n\n```java\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(\"http://ifconfig.me\")\n        .addConverterFactory(MoshiConverterFactory.create())\n        .build();\n\nIfconfigApi api = retrofit.create(IfconfigApi.class);\nCall<AllEntity> call = api.all();\nResponse<AllEntity> response = call.execute();\nAllEntity entity = response.body();\n```\n\ncall\u306b\u306f\u4e0b\u8a18\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u751f\u3048\u3066\u307e\u3059\n\n- \u540c\u671f\u7684\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b `execute()`\n- \u975e\u540c\u671f\u7684\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b `enqueue(Callback<T> callback)`\n- \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3059\u308b `cancel()`\n\n## okhttp\u3092must\u3067\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\nokhttp\u306eResponse object\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u5185\u5bb9\u304c\u304b\u306a\u308a\u8a73\u7d30\u306b\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n- https://github.com/square/okhttp/blob/master/okhttp/src/main/java/com/squareup/okhttp/Response.java\n\nresponse\u30d8\u30c3\u30c0\u304c\u524d\u306f\u4e0a\u624b\u304f\u53d6\u308c\u306a\u304b\u3063\u305f\u308a\u3057\u305f\u306e\u3067\u5730\u5473\u306b\u5b09\u3057\u3044\u5909\u66f4\u304b\u3082\u3002\n\u3044\u307e\u307e\u3067okhttp\u306e\u5229\u7528\u3092\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u5834\u5408\u3001method\u6570\u304c2K\u307b\u3069\u5897\u3048\u308b\u306e\u3067\u6ce8\u610f\n\n## Logging\u306fokhttp\u3078\n\n`Retrofit.Builder().setLogLevel()`\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u4ee3\u308f\u308a\u306b `Retrofit.Builder().client(okhttpclient)` \u3067 OkHttpClient\u3092\u6e21\u3057\u3066\u3001okhttp\u306einterceptor\u3067\u30ed\u30ae\u30f3\u30b0\u3092\u3059\u308b\u306e\u304c\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\n- https://github.com/square/retrofit/issues/378\n- https://github.com/square/okhttp/wiki/Interceptors\n\n## \u30ab\u30b9\u30bf\u30e0\u30d8\u30c3\u30c0\u306fokhttp\u3078\n\n\u4ee5\u524d\u306f `Retrofit.Builder().setRequestIntercepter()` \u3067\u30ab\u30b9\u30bf\u30e0\u30d8\u30c3\u30c0\u3092\u3064\u3051\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3082okhttp\u306einterceptor\u306b\u4efb\u305b\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n- http://stackoverflow.com/questions/32605711/adding-header-to-all-request-with-retrofit-2\n\n## RxJava\u306e\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306fAdapter\u3078\n\nrxjava\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306b\u306f\u3001\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\ncompile 'com.squareup.retrofit:adapter-rxjava:2.0.0-beta2'\n```\n\n\u73fe\u72b6\u3060\u3068enqueue\u305b\u305a\u306bexecute\u3059\u308b\u65b9\u5f0f\u3067Observable\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u306e\u3067\u3001Android\u304b\u3089\u79fb\u884c\u5229\u7528\u3059\u308b\u969b\u306b\u306f`android.os.NetworkOnMainThreadException` \u304c\u51fa\u306a\u3044\u3088\u3046\u306b\u5229\u7528\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n# \u5c0f\u3055\u306a\u5909\u66f4\u70b9\n\n## retrofit.RetrofitError -> retrofit.HttpException\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9200\u4ee5\u5916\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u6642\u306b\u4ee5\u524d\u306fRetrofitError\u3067\u3057\u305f\u304c\u3001HttpException\u306b\u5909\u66f4\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n# \u30b5\u30f3\u30d7\u30eb\n\n- https://github.com/mattak/RetrofitSample\n"}