{"context": " More than 1 year has passed since last update.FactoryGirl\u3067 create \u3057\u305f\u5834\u5408\u3001 after_commit \u3060\u3051\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\nclass Book < ActiveRecord::Base\n  before_create do\n    puts 'before_create'\n  end\n\n  after_create do\n    puts 'after_create'\n  end\n\n  after_commit :run_something, on: :create\n\n  private\n\n  def run_something\n    puts 'after_commit'\n  end\nend\n\nFactoryGirl.define do\n  factory :book\nend\n\nFactoryGirl.create(:book)\n# => before_create\n# => after_create\n\n\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306fcallback\u3092\u81ea\u5206\u3067\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u3044\u3044\u3002\nFactoryGirl.define do\n  factory :book do\n    after(:create) do |book|\n      book.__send__(:run_something)\n    end\n  end\nend\n\nFactoryGirl.create(:book)\n# => before_create\n# => after_create\n# => after_commit\n\nFactoryGirl\u3067 `create` \u3057\u305f\u5834\u5408\u3001 `after_commit` \u3060\u3051\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\n\n```rb\nclass Book < ActiveRecord::Base\n  before_create do\n    puts 'before_create'\n  end\n\n  after_create do\n    puts 'after_create'\n  end\n\n  after_commit :run_something, on: :create\n\n  private\n\n  def run_something\n    puts 'after_commit'\n  end\nend\n\nFactoryGirl.define do\n  factory :book\nend\n\nFactoryGirl.create(:book)\n# => before_create\n# => after_create\n```\n\n\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306fcallback\u3092\u81ea\u5206\u3067\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u3044\u3044\u3002\n\n```rb\nFactoryGirl.define do\n  factory :book do\n    after(:create) do |book|\n      book.__send__(:run_something)\n    end\n  end\nend\n\nFactoryGirl.create(:book)\n# => before_create\n# => after_create\n# => after_commit\n```\n", "tags": ["Ruby", "FactoryGirl"]}