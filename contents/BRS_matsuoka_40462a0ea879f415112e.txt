{"context": " More than 1 year has passed since last update.\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u767b\u9332\u306f\u7701\u304d\u307e\u3059\u3002\n\u307e\u305a\u306fPDO\u3067\u63a5\u7d9a\u3059\u308b\u3002\n\nbase.php\n<?php\n$dsn=\"mysql:dbname=dbname;host=localhost;charset=UTF8\";\n$user=\"root\";\n$pass=\"root\"\ntry{\n  $pdo=new PDO($dsn,$user,$password);\n}catch(Exception $e){\n  echo 'error' .$e->getMesseage;\n  die();\n}\n?>\n\n\n\u6b21\u306b\u30da\u30fc\u30b7\u30e3\u30fc\u306e\u521d\u671f\u8a2d\u5b9a\n\npage.php\n<?php\nif(preg_match('/^[1-9][0-9]*$/',$_GET['page'])){\n  $page=(int)$_GET['page'];\n}else{\n  $page=1;\n}\n//\u5909\u6570\u306e\u8a2d\u5b9a\n//\u8868\u793a\u3059\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u6570\n$content=5;\n//\u521d\u671f\u5024\n$set=$content*($page-1);\n//SQL\u6587\u306e\u767a\u884c\n$sql=\"SELECT count(*) FROM temp006\";\n$stmt=$pdo->query($sql);\n$max=$stmt->fetchColumn();\n//\u6700\u5927\u30da\u30fc\u30b8\u6570\n$maxPage=ceil($max/$content);\n?>\n\n\n\u6b21\u306b\n\nindex.php\n<?php\n//base.php\u3068page.php\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'base/base.php';\nrequire 'page/page.php';\n//\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u306e\u8868\u793a\n$sql=\"SELECT * FROM temp006 LIMIT \".$set.\",\".$content;\n$stmt=$pdo->query($sql);\n$post=$stmt->fetchAll();\n//view\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'view/index_view.php';\n?>\n\n\n\u6700\u5f8c\u306bView\u306e\u8868\u793a\n\nindex_view.php\n<?php\n<div class=\"page\">\n  //$page\u304c1\u3088\u308a\u5927\u304d\u3044\u5834\u5408\n  <?php if($page>1) :?>\n    //1\u30da\u30fc\u30b8\u524d\u306b\n    <a href=\"?page=<?php echo $page-1; ?>\"><<</a>\n  <?php endif; ?>\n  //$i=1\u3067\u30da\u30fc\u30b8\u30e3\u30fc\u306e\u6700\u521d\u306e\u30da\u30fc\u30b8\u756a\u53f7\n  //$i\u3092\u6700\u5927\u30da\u30fc\u30b8\u306b\u306a\u308b\u307e\u3067\u8db3\u3057\u3066\u3044\u304f\n  <?php for($i=1;$i<=$maxPage;$i++) :?>\n    <?php if($page==$i) :?>\n      //$page\u3068$i\u306e\u5024\u304c\u540c\u3058\u306a\u3089strong\u3067\u73fe\u5728\u306e\u30da\u30fc\u30b8\u756a\u53f7\u3092\u5f37\u8abf\u3059\u308b\n      <strong><a href=\"?page=<?php echo $i; ?>\"><?php echo $i; ?></a></strong>\n    <?php else :?>\n      <a href=\"?page=<?php echo $i; ?>\"><?php echo $i; ?></a>\n    <?php endif;?>\n  <?php endfor; ?>\n<<<<<<< HEAD\n  //$page\u304c$maxPage\u3088\u308a\u5c0f\u3055\u3044\u5834\u5408\n  <?php if($page<$maxPage) :?>\n    //1\u30da\u30fc\u30b8\u6b21\u306b\n    <a href=\"?page=<?php echo $page+1; ?>\">>></a>\n  <?php endif; ?>\n?>\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u767b\u9332\u306f\u7701\u304d\u307e\u3059\u3002\n\u307e\u305a\u306fPDO\u3067\u63a5\u7d9a\u3059\u308b\u3002\n\n```php:base.php\n<?php\n$dsn=\"mysql:dbname=dbname;host=localhost;charset=UTF8\";\n$user=\"root\";\n$pass=\"root\"\ntry{\n  $pdo=new PDO($dsn,$user,$password);\n}catch(Exception $e){\n  echo 'error' .$e->getMesseage;\n  die();\n}\n?>\n```\n\n\u6b21\u306b\u30da\u30fc\u30b7\u30e3\u30fc\u306e\u521d\u671f\u8a2d\u5b9a\n\n```php:page.php\n<?php\nif(preg_match('/^[1-9][0-9]*$/',$_GET['page'])){\n  $page=(int)$_GET['page'];\n}else{\n  $page=1;\n}\n//\u5909\u6570\u306e\u8a2d\u5b9a\n//\u8868\u793a\u3059\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u6570\n$content=5;\n//\u521d\u671f\u5024\n$set=$content*($page-1);\n//SQL\u6587\u306e\u767a\u884c\n$sql=\"SELECT count(*) FROM temp006\";\n$stmt=$pdo->query($sql);\n$max=$stmt->fetchColumn();\n//\u6700\u5927\u30da\u30fc\u30b8\u6570\n$maxPage=ceil($max/$content);\n?>\n```\n\n\u6b21\u306b\n\n```php:index.php\n<?php\n//base.php\u3068page.php\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'base/base.php';\nrequire 'page/page.php';\n//\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u306e\u8868\u793a\n$sql=\"SELECT * FROM temp006 LIMIT \".$set.\",\".$content;\n$stmt=$pdo->query($sql);\n$post=$stmt->fetchAll();\n//view\u306e\u8aad\u307f\u8fbc\u307f\nrequire 'view/index_view.php';\n?>\n```\n\n\u6700\u5f8c\u306bView\u306e\u8868\u793a\n\n```php:index_view.php\n<?php\n<div class=\"page\">\n  //$page\u304c1\u3088\u308a\u5927\u304d\u3044\u5834\u5408\n  <?php if($page>1) :?>\n    //1\u30da\u30fc\u30b8\u524d\u306b\n    <a href=\"?page=<?php echo $page-1; ?>\"><<</a>\n  <?php endif; ?>\n  //$i=1\u3067\u30da\u30fc\u30b8\u30e3\u30fc\u306e\u6700\u521d\u306e\u30da\u30fc\u30b8\u756a\u53f7\n  //$i\u3092\u6700\u5927\u30da\u30fc\u30b8\u306b\u306a\u308b\u307e\u3067\u8db3\u3057\u3066\u3044\u304f\n  <?php for($i=1;$i<=$maxPage;$i++) :?>\n    <?php if($page==$i) :?>\n      //$page\u3068$i\u306e\u5024\u304c\u540c\u3058\u306a\u3089strong\u3067\u73fe\u5728\u306e\u30da\u30fc\u30b8\u756a\u53f7\u3092\u5f37\u8abf\u3059\u308b\n      <strong><a href=\"?page=<?php echo $i; ?>\"><?php echo $i; ?></a></strong>\n    <?php else :?>\n      <a href=\"?page=<?php echo $i; ?>\"><?php echo $i; ?></a>\n    <?php endif;?>\n  <?php endfor; ?>\n<<<<<<< HEAD\n  //$page\u304c$maxPage\u3088\u308a\u5c0f\u3055\u3044\u5834\u5408\n  <?php if($page<$maxPage) :?>\n    //1\u30da\u30fc\u30b8\u6b21\u306b\n    <a href=\"?page=<?php echo $page+1; ?>\">>></a>\n  <?php endif; ?>\n?>\n```\n", "tags": ["PHP", "PDO", "\u30da\u30fc\u30b8\u30e3\u30fc"]}