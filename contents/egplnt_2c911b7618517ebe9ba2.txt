{"context": "\u521d\u3081\u3066Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3001\u3068\u3044\u3046\u304b\u305f\u306e\u305f\u3081\u306e\u30ac\u30a4\u30c9\u3067\u3059\u3002\nWatson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b\u3067IoT\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\n\u524d\u9805\u307e\u3067\u306e\u975eSQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(Cloudant\uff09\u3092\u7d4c\u7531\u3059\u308b\u65b9\u6cd5\u3067\u306f\u306a\u304f\u3001dashDB\u3092\u500b\u5225\u306b\u7528\u610f\u3057\u305d\u3053\u3078\u76f4\u63a5IoT\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u8fbc\u3080\u624b\u9806\u3067\u3059\u3002\n\ndashDB\u3092\u500b\u5225\u306b\u7528\u610f\u3057\u307e\u3059\n\n\n\u4ed6\u306eBluemix\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\u300c\u30c7\u30fc\u30bf\uff06\u5206\u6790\u300d\u30ab\u30c6\u30b4\u30ea\u30fc\u306e\u300cDashDB\u300d\u30b5\u30fc\u30d3\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002DashDB-xx\u306e\u3088\u3046\u306a\u540d\u79f0\u304c\u81ea\u52d5\u7684\u306b\u30a2\u30b5\u30a4\u30f3\u3055\u308c\u307e\u3059\u3002\n\u4f5c\u6210\u3055\u308c\u305fdashDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff08\"DashDB-xx\"\uff09\u3092\u3001Node-RED\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308bIoT\u30a2\u30d7\u30ea\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002Bluemix\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\uff08\u30a2\u30d7\u30ea\u4e00\u89a7\uff09\u304b\u3089\u8a72\u5f53\u3059\u308bIoT\u30a2\u30d7\u30ea\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304d\u3001\u300c\u63a5\u7d9a\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u65e2\u5b58\u306b\u63a5\u7d9a\u300d\u3092\u9078\u629e\u3057\u3001\u524d\u9805\u3067\u4f5c\u6210\u3057\u305fdashDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u9078\u629e\u3057\u3066\u300c\u63a5\u7d9a\u300d\u3092\u62bc\u3057\u3001\u30a2\u30d7\u30ea\u3092\u518d\u30b9\u30c6\u30fc\u30b8\u3057\u307e\u3059\u3002\n\u4f5c\u6210\u3055\u308c\u305fdashDB\u306e\u30bf\u30a4\u30eb\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u304d\u3001\u300cGo to your tables\u300d\u30dc\u30bf\u30f3\u3082\u3057\u304f\u306f\u753b\u9762\u5de6\u5074\u306e\u30e1\u30cb\u30e5\u30fc\u306e\u300cTables\u300d\u30dc\u30bf\u30f3\u304b\u3089\u300cAdd Table\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\"Edit the DDL statements\"\u306e\u6b04\u306b\u4e0b\u8a18\u3092\u30b3\u30d4\u30da\u3057\u3001\"Run DDL\"\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\n\nCC2650\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u8868\u306e\u4f8b\nCREATE TABLE \"SENSOR2DB\"\n(\n  \"DATE\" BIGINT,\n  \"DAY\" BIGINT,\n  \"HOUR\" BIGINT,\n  \"MINUTE\" BIGINT,\n  \"MONTH\" BIGINT,\n  \"SECOND\" BIGINT,\n  \"YEAR\" BIGINT,\n  \"ACCELX\" VARCHAR(20),\n  \"ACCELY\" VARCHAR(20),\n  \"ACCELZ\" VARCHAR(20),\n  \"AMBIENTTEMP\" VARCHAR(20),\n  \"GYROX\" VARCHAR(20),\n  \"GYROY\" VARCHAR(20),\n  \"GYROZ\" VARCHAR(20),\n  \"HUMIDITY\" VARCHAR(20),\n  \"LIGHT\" VARCHAR(20),\n  \"MAGX\" VARCHAR(20),\n  \"MAGY\" VARCHAR(20),\n  \"MAGZ\" VARCHAR(20),\n  \"OBJECTTEMP\" VARCHAR(20)\n);\n\n\n\ndashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\u307e\u3059\n\n\u8868\u304c\u5b9a\u7fa9\u3055\u308c\u305f\u3089\u3001Node-RED\u306e\u30d5\u30ed\u30fc\u304b\u3089\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u3001\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304c\u306a\u304f\u3066\u3082DashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\nNode-RED\u306e\u30d5\u30ed\u30fc\u304b\u3089dashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"d9208db3.c058b\",\"type\":\"ibmiot in\",\"z\":\"26e29f59.971b9\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":110,\"y\":100,\"wires\":[[\"d0b499ec.913da\"]]},{\"id\":\"d0b499ec.913da\",\"type\":\"function\",\"z\":\"26e29f59.971b9\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":275,\"y\":100,\"wires\":[[\"3eaf0b79.ef1934\"]]},{\"id\":\"3eaf0b79.ef1934\",\"type\":\"function\",\"z\":\"26e29f59.971b9\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : 0,\\n\\tACCELY : 0,\\n\\tACCELZ : 0,\\n\\tAMBIENTTEMP : 10,\\n\\tGYROX : 0,\\n\\tGYROY : 0,\\n\\tGYROZ : 0,\\n\\tHUMIDITY : 0,\\n\\tLIGHT : 0,\\n    MAGX : 0,\\n\\tMAGY : 0,\\n\\tMAGZ : 0,\\n\\tOBJECTTEMP : 20\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":475,\"y\":100,\"wires\":[[\"a53a6b28.95b568\"]]},{\"id\":\"82761d4.5b880e\",\"type\":\"inject\",\"z\":\"26e29f59.971b9\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":160,\"wires\":[[\"d0b499ec.913da\"]]},{\"id\":\"a53a6b28.95b568\",\"type\":\"dashDB out\",\"z\":\"26e29f59.971b9\",\"service\":\"\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":690,\"y\":100,\"wires\":[]}]\n\n\n\n\n\n\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u306e\u5b9f\u7269\u3092\u63a5\u7d9a\u3057\u3066SENSOR2DB\u3078\u66f8\u304d\u8fbc\u3080\u969b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30ed\u30fc\u3092\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u6bce\u79d2\u306e\u30c7\u30fc\u30bf\u304c\u66f8\u304d\u8fbc\u307e\u308c\u307e\u3059\n\n\n\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306eDashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"8adcf1f2.2d066\",\"type\":\"ibmiot in\",\"z\":\"af611d0a.390108\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":80,\"wires\":[[\"4256dc3b.7a655c\"]]},{\"id\":\"4256dc3b.7a655c\",\"type\":\"function\",\"z\":\"af611d0a.390108\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":280,\"y\":80,\"wires\":[[\"c48af21a.27cab\"]]},{\"id\":\"c48af21a.27cab\",\"type\":\"function\",\"z\":\"af611d0a.390108\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : msg.payload.d.accelX,\\n\\tACCELY : msg.payload.d.accelY,\\n\\tACCELZ : msg.payload.d.accelZ,\\n\\tAMBIENTTEMP : msg.payload.d.ambientTemp,\\n\\tGYROX : msg.payload.d.gyroX,\\n\\tGYROY : msg.payload.d.gyroY,\\n\\tGYROZ : msg.payload.d.gyroZ,\\n\\tHUMIDITY : msg.payload.d.humidity,\\n\\tLIGHT : msg.payload.d.light,\\n    MAGX : msg.payload.d.magX,\\n\\tMAGY : msg.payload.d.magY,\\n\\tMAGZ : msg.payload.d.magZ,\\n\\tOBJECTTEMP : msg.payload.d.objectTemp\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":480,\"y\":80,\"wires\":[[\"8fc33952.764748\"]]},{\"id\":\"60f64626.3f54c8\",\"type\":\"inject\",\"z\":\"af611d0a.390108\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":100,\"y\":140,\"wires\":[[\"4256dc3b.7a655c\"]]},{\"id\":\"8fc33952.764748\",\"type\":\"dashDB out\",\"z\":\"af611d0a.390108\",\"service\":\"dashDB-wf\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":710,\"y\":80,\"wires\":[]}]\n\n\n\n\n\u540c\u69d8\u306b\u3001\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u5b9f\u7269\u306eCC2650\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u309210\u79d2\u6bce\u306bdashDB\u306eSENSOR2DB\u3078\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\u66f8\u304d\u8fbc\u3080\u9593\u9694\u306f\uff11\uff10\u79d2\u6bce\u306b\u66f8\u304d\u51fa\u3057\u30ce\u30fc\u30c9\u306eif (msg.date.second % 10 === 0) return msg;\u306e\u5024\u309215\u79d2\u6bce\u300120\u79d2\u6bce\u300130\u79d2\u6bce\u306a\u3069\u3078\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u8abf\u6574\u53ef\u80fd\u3067\u3059\u3002\n\n\n\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u6642\u9593\u9593\u9694\u3067\u30c7\u30fc\u30bf\u3092DashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"b1c25b95.3903a\",\"type\":\"ibmiot in\",\"z\":\"1b4d0fef.0afda8\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":110,\"y\":80,\"wires\":[[\"41bfc260.353cec\"]]},{\"id\":\"41bfc260.353cec\",\"type\":\"function\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":300,\"y\":80,\"wires\":[[\"48468dfa.d396cc\"]]},{\"id\":\"48468dfa.d396cc\",\"type\":\"function\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : msg.payload.d.accelX,\\n\\tACCELY : msg.payload.d.accelY,\\n\\tACCELZ : msg.payload.d.accelZ,\\n\\tAMBIENTTEMP : msg.payload.d.ambientTemp,\\n\\tGYROX : msg.payload.d.gyroX,\\n\\tGYROY : msg.payload.d.gyroY,\\n\\tGYROZ : msg.payload.d.gyroZ,\\n\\tHUMIDITY : msg.payload.d.humidity,\\n\\tLIGHT : msg.payload.d.light,\\n    MAGX : msg.payload.d.magX,\\n\\tMAGY : msg.payload.d.magY,\\n\\tMAGZ : msg.payload.d.magZ,\\n\\tOBJECTTEMP : msg.payload.d.objectTemp\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":500,\"y\":80,\"wires\":[[\"a3b8a0c3.7b7bf\"]]},{\"id\":\"39818c66.f55ffc\",\"type\":\"inject\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":180,\"wires\":[[\"41bfc260.353cec\"]]},{\"id\":\"f29e4ba4.c214b\",\"type\":\"dashDB out\",\"z\":\"1b4d0fef.0afda8\",\"service\":\"dashDB-9x\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":710,\"y\":180,\"wires\":[]},{\"id\":\"a3b8a0c3.7b7bf\",\"type\":\"function\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\uff11\uff10\u79d2\u6bce\u306b\u66f8\u304d\u51fa\u3057\",\"func\":\"if (msg.date.second % 10 === 0) return msg;\",\"outputs\":1,\"noerr\":0,\"x\":480,\"y\":180,\"wires\":[[\"f29e4ba4.c214b\",\"e36cc315.0859c\"]]},{\"id\":\"e36cc315.0859c\",\"type\":\"debug\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":700,\"y\":120,\"wires\":[]}]\n\n\n\n\nNode-RED\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nNode-RED\u3092\u4f7f\u3063\u3066dashDB\u304b\u3089\u30c7\u30fc\u30bf\u304c\u8aad\u307f\u51fa\u305b\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\nNode-RED\u3092\u4f7f\u3063\u3066dashDB\u304b\u3089\u8aad\u307f\u8fbc\u307f\n[{\"id\":\"127a1686.2cd8a1\",\"type\":\"inject\",\"z\":\"26e29f59.971b9\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":240,\"wires\":[[\"ea6b87c4.f3089\"]]},{\"id\":\"3ae7e667.6b1402\",\"type\":\"debug\",\"z\":\"26e29f59.971b9\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":530,\"y\":240,\"wires\":[]},{\"id\":\"ea6b87c4.f3089\",\"type\":\"dashDB in\",\"z\":\"26e29f59.971b9\",\"service\":\"\",\"query\":\"select * from SENSOR2DB;\",\"params\":\"\",\"name\":\"dashDB\u304b\u3089\u8aad\u307f\u53d6\u308a\",\"x\":320,\"y\":240,\"wires\":[[\"3ae7e667.6b1402\"]]}]\n\n\n\n\n\ndashDB\u5185\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\ndashDB\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n1. dashDB\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u304d\u307e\u3059\u3002\n2. \u300cCreate, drop, and work with tables\u300d\u753b\u9762\u306e\u300cTable name\u300d\u6b04\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u3067\u5bfe\u8c61\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\uff08\u4f8b\uff1a\"SENSOR2DB\")\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n3. \u753b\u9762\u4e2d\u592e\u306e\u300cSchema\u300d\u6b04\u306b\u8868\u793a\u3055\u308c\u308b\u30b9\u30ad\u30fc\u30de\u540d\uff08\u4f8b\uff1aDASH016xxx\uff09\u3092\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u306e\u753b\u9762\u306e\u300cBrowse Data\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8868\u5185\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\uff08\u95b2\u89a7\uff09\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u753b\u9762\u53f3\u5074\u306e\u300c\u5217\u306e\u8868\u793a/\u975e\u8868\u793a\u3068\u9806\u5e8f\u4ed8\u3051\u300d\u30dc\u30bf\u30f3\u304b\u3089\u8868\u793a\u3055\u308c\u308b\u5217\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n4. \u753b\u9762\u5de6\u5074\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300cRun SQL\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n5. \u8868\u793a\u3055\u308c\u305fSQL\u5165\u529b\u753b\u9762\u306b\u4e0b\u8a18\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u300cValidate\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066SQL\u69cb\u6587\u306b\u30a8\u30e9\u30fc\u304c\u7121\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u3066\u3001\u300cRun\u300d\u30dc\u30bf\u30f3\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\nselect count(*) from DASH016xxx.sensor2db;\n\n\n\u4e88\u3081\u7528\u610f\u3055\u308c\u305fSQL\u6587\u306f\u524a\u9664\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3057\u3001\u5148\u982d\u306b\"--\"\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u30b3\u30e1\u30f3\u30c8\u5316\u3055\u308c\u307e\u3059\u3002\n\n\u5b9f\u884c\u7d50\u679c\u3092\u30b9\u30af\u30ed\u30fc\u30eb\u30c0\u30a6\u30f3\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30ec\u30b3\u30fc\u30c9\u306e\u4ef6\u6570\u304cCloudant\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3055\u308c\u308b\u4ef6\u6570\u3068\u4e00\u81f4\u3059\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u540c\u69d8\u306b\u3001\u300cRun SQL\u300d\u753b\u9762\u304b\u3089SQL\u3092\u767a\u884c\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u7279\u5b9a\u306e\u884c\u3092\u633f\u5165\uff08\u767b\u9332\uff09\u3059\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306aSQL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306fambienttemp\u304c\u30bc\u30ed\u306e\u884c\u3092\u633f\u5165\uff08\u767b\u9332\uff09\u3057\u3066\u3044\u307e\u3059\u3002\n\ninsert into DASHxxxx.SENSOR2DB (ambienttemp) values(0);\n\n\n\u7279\u5b9a\u306e\u884c\u3092\u524a\u9664\u3059\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306aSQL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306fambienttemp\u304c\u30bc\u30ed\u306e\u884c\u3092\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\ndelete from DASHxxxxx.SENSOR2DB where ambienttemp=0;\n\n\n\u30b5\u30f3\u30d7\u30eb\uff11\uff1a\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u305fIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u3080\n\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306fIoT\u30c7\u30fc\u30bf\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u3001\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n1. IoT\u30c7\u30fc\u30bf\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\uff08\u751f\u6210\uff09\u3057\u307e\u3059\n2. \u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\u307e\u3059 \n3. \u4f7f\u7528\u6642\u306b\u306f\u5de6\u7aef\u306e\u300c\uff11\u79d2\u6bce\u300dInject\u30ce\u30fc\u30c9\u3092\u6b21\u306e\u300c\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\u300dfunction\u30ce\u30fc\u30c9\u3078\u63a5\u7d9a\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002\u666e\u6bb5\u30c7\u30fc\u30bf\u304c\u751f\u6210\u3055\u308c\u7d9a\u3051\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u4f7f\u7528\u3057\u306a\u3044\u6642\u306f\u5207\u65ad\u3057\u3066\u304a\u304f\u3053\u3068\u3092\u304a\u85a6\u3081\u3057\u307e\u3059\u3002\n4. \u5fc5\u8981\u306b\u5fdc\u3058\u3001\u300c\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u300dfunction\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u5192\u982d\u306e\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u5024\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n\n\n\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u305fIoT\u30c7\u30fc\u30bf\u3092DB\u3078\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"d6a7c81e.450048\",\"type\":\"inject\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"1\u79d2\u6bce\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"1\",\"crontab\":\"\",\"once\":false,\"x\":90,\"y\":120,\"wires\":[[]]},{\"id\":\"6f55fe33.6cf118\",\"type\":\"inject\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"restart\",\"topic\":\"\",\"payload\":\"0\",\"payloadType\":\"num\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":90,\"y\":160,\"wires\":[[\"f2602e5b.bbb1b\"]]},{\"id\":\"a8639f02.42b0c8\",\"type\":\"debug\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":630,\"y\":100,\"wires\":[]},{\"id\":\"dce6eed8.b9fc9\",\"type\":\"comment\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u305fIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067DB\u3078\u66f8\u304d\u8fbc\u307f\",\"info\":\"\",\"x\":240,\"y\":60,\"wires\":[]},{\"id\":\"f2602e5b.bbb1b\",\"type\":\"function\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":261,\"y\":140,\"wires\":[[\"47d39b27.1988dc\",\"27f97ffa.6af63\"]]},{\"id\":\"47d39b27.1988dc\",\"type\":\"debug\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u6642\u523b\u306e\u8868\u793a\",\"active\":false,\"console\":\"false\",\"complete\":\"date\",\"x\":430,\"y\":100,\"wires\":[]},{\"id\":\"c4e1e935.195f18\",\"type\":\"function\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : 0,\\n\\tACCELY : 0,\\n\\tACCELZ : 0,\\n\\tAMBIENTTEMP : msg.sensor1,\\n\\tGYROX : 0,\\n\\tGYROY : 0,\\n\\tGYROZ : 0,\\n\\tHUMIDITY : 0,\\n\\tLIGHT : 0,\\n    MAGX : 0,\\n\\tMAGY : 0,\\n\\tMAGZ : 0,\\n\\tOBJECTTEMP : msg.average\\n};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":660,\"y\":140,\"wires\":[[\"7e904315.ceda14\"]]},{\"id\":\"27f97ffa.6af63\",\"type\":\"function\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\",\"func\":\"//var sampling_min_interval = 1;\\nvar sampling_sec_interval = 60;     // \u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3059\u308b\u9593\u9694\\n\\nvar sum = 0, average = 0;\\nvar sen1 = Math.floor(Math.random () * 10) + 1;\u3000// \u30bb\u30f3\u30b5\u30fc\u5024\u3092\u751f\u6210\uff08\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\uff09\\n\\nif ( !context.array ) {\\n    context.array = new Array (10); //\u76f4\u8fd1\uff11\uff10\u4ef6\u5206\u3092\u4fdd\u6301\\n}\\nvar shifted = context.array.shift();\\ncontext.array.push(sen1);           // \u6700\u65b0\u306e\u5024\u3092\u4fdd\u5b58\\nvar length = context.array.length;\\n\\nfor (k=0; k<length; k++) {\\n        sum = sum + context.array[k];   // \u5408\u8a08\u3092\u7b97\u51fa\\n}\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\naverage = sum / length;\\nvar data = [[time],[sen1],[average]];\\nmsg.payload = data;\\nif ( ( msg.date.second % sampling_sec_interval ) !== 0 ) return;\\n//if ( ( msg.date.minute % sampling_min_interval ) !== 0 ) return;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":450,\"y\":140,\"wires\":[[\"c4e1e935.195f18\",\"a8639f02.42b0c8\"]]},{\"id\":\"7e904315.ceda14\",\"type\":\"dashDB out\",\"z\":\"7e6262d4.bcd4e4\",\"service\":\"\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\",\"x\":820,\"y\":140,\"wires\":[]}]\n\n\n\n\n\u30b5\u30f3\u30d7\u30eb\uff12\uff1a\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\uff08CC2650)\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u3080\n\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u307f\u3001\u305d\u308c\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n1. \u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059\n2. \u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\u307e\u3059 \n3. \u5fc5\u8981\u306b\u5fdc\u3058\u3001\u300c\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u300dfunction\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u5192\u982d\u306e\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u5024\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n\n\n\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u30c7\u30fc\u30bf\u3092dashDB\u3078\u683c\u7d0d\u3057\u3001D3\u3067\u53ef\u8996\u5316\u3059\u308b\n[{\"id\":\"175917e8.30b87\",\"type\":\"inject\",\"z\":\"64589e61.60898\",\"name\":\"1\u79d2\u6bce\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"1\",\"crontab\":\"\",\"once\":false,\"x\":110,\"y\":200,\"wires\":[[]]},{\"id\":\"c3e41b5d.223d28\",\"type\":\"inject\",\"z\":\"64589e61.60898\",\"name\":\"restart\",\"topic\":\"\",\"payload\":\"0\",\"payloadType\":\"num\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":110,\"y\":240,\"wires\":[[]]},{\"id\":\"a0155b1b.cda098\",\"type\":\"comment\",\"z\":\"64589e61.60898\",\"name\":\"IoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067DB\u3078\u66f8\u304d\u8fbc\u307f\",\"info\":\"\",\"x\":200,\"y\":60,\"wires\":[]},{\"id\":\"6d18f085.c1b5d8\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":301,\"y\":140,\"wires\":[[\"3b7f6362.24696c\",\"def4328.f99acd\"]]},{\"id\":\"3b7f6362.24696c\",\"type\":\"debug\",\"z\":\"64589e61.60898\",\"name\":\"\u6642\u523b\u306e\u8868\u793a\",\"active\":false,\"console\":\"false\",\"complete\":\"date\",\"x\":510,\"y\":100,\"wires\":[]},{\"id\":\"14d3087b.28646\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : msg.sensor.accelX,\\n\\tACCELY : msg.sensor.accelY,\\n\\tACCELZ : msg.sensor.accelZ,\\n\\tAMBIENTTEMP : msg.sensor.ambientTemp,\\n\\tGYROX : msg.sensor.gyroX,\\n\\tGYROY : msg.sensor.gyroY,\\n\\tGYROZ : msg.sensor.gyroZ,\\n\\tHUMIDITY : msg.sensor.humidity,\\n\\tLIGHT : msg.sensor.light,\\n    MAGX : msg.sensor.magX,\\n\\tMAGY :msg.sensor.magY,\\n\\tMAGZ : msg.sensor.magZ,\\n\\tOBJECTTEMP : msg.sensor.objectTemp\\n};\\n\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":520,\"y\":220,\"wires\":[[\"ba9d26f1.6a516\",\"ecfd037.e72c4\"]]},{\"id\":\"8bcc302e.8dbd58\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\",\"func\":\"var sampling_min_interval = 10;     // 10\u5206\u6bce\u306bDB\u30d8\u66f8\u304d\u8fbc\u307f\\nvar sampling_sec_interval = 60;     // \u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3059\u308b\u9593\u9694\\n\\n/*\\nvar sum = 0, average = 0;\\nvar sen1 = Math.floor(Math.random () * 10) + 1;\u3000// \u30bb\u30f3\u30b5\u30fc\u5024\u3092\u751f\u6210\uff08\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\uff09\\n\\nif ( !context.array ) {\\n    context.array = new Array (10); //\u76f4\u8fd1\uff11\uff10\u4ef6\u5206\u3092\u4fdd\u6301\\n}\\nvar shifted = context.array.shift();\\ncontext.array.push(sen1);           // \u6700\u65b0\u306e\u5024\u3092\u4fdd\u5b58\\nvar length = context.array.length;\\n\\nfor (k=0; k<length; k++) {\\n        sum = sum + context.array[k];   // \u5408\u8a08\u3092\u7b97\u51fa\\n}\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\naverage = sum / length;\\nvar data = [[time],[sen1],[average]];\\nmsg.sensor.average = average;\\n*/\\nif ( ( msg.date.second % sampling_sec_interval ) !== 0 ) return;\\nif ( ( msg.date.minute % sampling_min_interval ) !== 0 ) return;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":310,\"y\":220,\"wires\":[[\"14d3087b.28646\"]]},{\"id\":\"b7faf05f.7d756\",\"type\":\"ibmiot in\",\"z\":\"64589e61.60898\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":140,\"wires\":[[\"6d18f085.c1b5d8\"]]},{\"id\":\"4144253.9dd2fdc\",\"type\":\"http in\",\"z\":\"64589e61.60898\",\"name\":\"\",\"url\":\"/test28\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":110,\"y\":380,\"wires\":[[\"1f8c6452.0e2c14\"]]},{\"id\":\"fdd5ab25.ad1cd8\",\"type\":\"debug\",\"z\":\"64589e61.60898\",\"name\":\"op\",\"active\":false,\"console\":\"false\",\"complete\":\"payload.op\",\"x\":670,\"y\":360,\"wires\":[]},{\"id\":\"d1c0278d.5bf49\",\"type\":\"template\",\"z\":\"64589e61.60898\",\"name\":\"html\u3092\u8fd4\u3059\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<!DOCTYPE html>\\n<html lang=\\\"ja\\\">\\n<head>\\n   <meta charset=\\\"utf-8\\\">\\n   <title>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u8868\u793a</title>\\n      <script src=\\\"https://d3js.org/d3.v4.min.js\\\"></script>\\n\\n   <style type=\\\"text/css\\\">\\n         /* \u3053\u3053\u306b\u30b9\u30bf\u30a4\u30eb\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059 */\\n      .axis path,\\n      .axis line {\\n         fill: none;\\n         stroke: black;\\n         shape-rendering: crispEdges;\\n      }\\n      .axis text {\\n         font-family: sans-serif;\\n         font-size: 11px;\\n      }\\n   </style>\\n\\n   <div id=\\\"op\\\" foo={{payload.op}}/>\\n\\n<script type=\\\"text/javascript\\\">\\n\\nvar op_a = document.getElementById( 'op' ).getAttribute( 'foo' );\\t//\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\\nop_a = op_a.substr( 0, op_a.length-1 ) ;\\t//\u672b\u5c3e\u306e\\\"/\\\"\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\\nvar op_a2 = JSON.parse(op_a);\\t//JSON\u6587\u5b57\u5217\u304b\u3089javascript\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5fa9\u5143\\n\\nvar op_a3 = new Array();\\nfor(var i in op_a2){\\n\\top_a3.push(op_a2[i].AMBIENTTEMP);\\t//AMBIENTTEMP\u3092\u53d6\u308a\u51fa\u3057\u3066\u914d\u5217op_a3\u306b\u9806\u6b21\u683c\u7d0d\\n}\\n\\nvar op_a5 = new Array();\\nfor(var i in op_a2){\\n\\top_a5.push(op_a2[i].HOUR + \\\":\\\" + (( \\\"0\\\" + op_a2[i].MINUTE ).substr( -2 )));\\n}\\n\\n   // \u5e45\uff08 Width \uff09\u3068\u9ad8\u3055\uff08 height \uff09\\n   var w = 800;\\n   var h = 300;\\n   var zoom =5;\\n   var barPadding = 1;  // \u68d2\u30b0\u30e9\u30d5\u306e\u68d2\u3068\u68d2\u306e\u9593\u9694\\n   var margin = 30;     // \u30b0\u30e9\u30d5\u8868\u793a\u57df\u306e\u307e\u308f\u308a\u306e\u4f59\u767d\\n   \\n   var dataset = op_a3;\\n   var datasetT = op_a5;\\n   \\n   // \u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u306e\u751f\u6210\\n   var xScale = d3.scaleLinear()\\n         .domain([0, d3.max(dataset, function(d) { return d; })])\\n         .range([margin, w + margin * 2]);\\n\\n   var yScale = d3.scaleLinear()\\n            .domain([0, (h-margin) / zoom]) // Y\u8ef8\u306e\u30b9\u30b1\u30fc\u30eb\u3092\u68d2\u30b0\u30e9\u30d5\u3068\u4e00\u81f4\u3055\u305b\u308b\\n            .range([h-margin, 0]);\u3000\u3000\u3000\u3000// Y\u8ef8\u8868\u793a\u5834\u6240\\n\\n   // X \u8ef8\u306e\u5b9a\u7fa9\\n   var xAxis = d3.axisBottom()\\n        .scale(xScale);\\n\\n   // Y \u8ef8\u306e\u5b9a\u7fa9\\n   var yAxis = d3.axisLeft(yScale);\\n   \\n   // SVG \u8981\u7d20\u306e\u751f\u6210\\n   var canvas = d3.select(\\\"body\\\")\\n         .append(\\\"svg\\\")\\n         .attr(\\\"width\\\", w)\\n         .attr(\\\"height\\\", h);\\n\\n   canvas.selectAll(\\\"rect\\\")\\n         .data(dataset)\\n         .enter()\\n         .append(\\\"rect\\\")\\n         .attr(\\\"x\\\", function(d, i) {\\n            return i * ((w-margin) / dataset.length) + margin;\\n         })\\n         .attr(\\\"y\\\", function(d) {\\n            return h - (d * zoom) - margin;\\n         })\\n         .attr(\\\"width\\\", (w-margin) / dataset.length - barPadding)\\n         .attr(\\\"height\\\", function(d) {\\n            return d * zoom;\\n         })\\n         .attr(\\\"fill\\\", function(d) {\\n//            return \\\"rgb(0, 0, \\\" + ( ( (d-20) * 10 ) + 100 ) + \\\")\\\";\\n            return \\\"rgb(0, 51, 255)\\\";\\n                     });\\n\\t\\t \\n   canvas.selectAll(\\\"text\\\")\\n         .data(datasetT)\\n         .enter()\\n         .append(\\\"text\\\")\\n         .text(function(d) {\\n            return d;\\n         })\\n         .attr(\\\"text-anchor\\\", \\\"middle\\\")\\n          .attr(\\\"x\\\", function(d, i) {\\n            return i * ((w-margin) / dataset.length) + margin + ((w-margin) / dataset.length - barPadding ) / 2;\\n         })\\n        .attr(\\\"y\\\", function(d) {\\n            return h;\\n         })\\n         .attr(\\\"font-family\\\", \\\"sans-serif\\\")\\n         .attr(\\\"font-size\\\", \\\"11px\\\")\\n         .attr(\\\"fill\\\", \\\"black\\\");\\n\\n/*    canvas.selectAll(\\\"text\\\")\\n         .data(dataset)\\n         .enter()\\n         .append(\\\"text\\\")\\n         .text(function(d) {\\n            return d;\\n         })\\n         .attr(\\\"text-anchor\\\", \\\"middle\\\")\\n         .attr(\\\"x\\\", function(d, i) {\\n            return i * ((w-margin) / dataset.length) + (w / dataset.length - barPadding) / 2  + margin;\\n         })\\n         .attr(\\\"y\\\", function(d) {\\n            return h - (d * 4) + 14  - margin;\\n         })\\n         .attr(\\\"font-family\\\", \\\"sans-serif\\\")\\n         .attr(\\\"font-size\\\", \\\"11px\\\")\\n         .attr(\\\"fill\\\", \\\"white\\\");\\n*/\\n   // X \u8ef8\u306e\u751f\u6210\\n//   canvas.append(\\\"g\\\")\\n//         .attr(\\\"class\\\", \\\"axisBottom\\\")\\n//         .attr(\\\"transform\\\", \\\"translate(0,\\\" + (h - margin) + \\\")\\\")\\n//         .call(xAxis);\\n\\n   // Y \u8ef8\u306e\u751f\u6210\\n   canvas.append(\\\"g\\\")\\n         .attr(\\\"class\\\", \\\"axisLeft\\\")\\n         .attr(\\\"transform\\\", \\\"translate(\\\" + margin + \\\",0)\\\")\\n         .call(yAxis);\\n\\t\\t \\n\\t\\t \\n   var m =  0;\\n   var mh = 0;\\n   var mm = 0;\\n   var mt = 0;\\n   for(var i in op_a2){\\n\\t   if (m < Number(op_a2[i].AMBIENTTEMP)) {\\n\\t       m = Number(op_a2[i].AMBIENTTEMP);\\n\\t\\t   mh = op_a2[i].HOUR;\\n\\t\\t   mm = ( \\\"0\\\" + op_a2[i].MINUTE ).substr( -2 ) ;\\n\\t\\t   mt = op_a2[i].AMBIENTTEMP;\\n    //console.log(\\\"max found was \\\" + mh + \\\":\\\" + mm + \\\" \\\" + mt);\\n\\t   }\\n   }\\n\\n   m = mh + \\\":\\\" + mm;\\n\\n   window.onload = function onLoad() {\\n      var target1 = document.getElementById(\\\"output1\\\");\\n         target1.innerHTML = m;\\n      var target2 = document.getElementById(\\\"output2\\\");\\n         target2.innerHTML = mt;\\n\\t}\\n\\t\\n</script>\\n</head>\\n<body>\\n\\n<div id=\\\"a-box\\\" style=\\\"background-color: #87cefa; padding: 20px;\\\">\\n\\t<h1>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u8868\u793a</h1>\\n\\t<br />\\n\\t<p>\\n\\t\\t\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u305fIoT\u30c7\u30fc\u30bf\u3092\u53ef\u8996\u5316\u3057\u307e\u3059<br />\\n\\t</p>\\n</div>\\n\\n<div id=\\\"b-box\\\" style=\\\"background-color: #ecf2fe; padding: 20px; \\\">\\n\\t\\t<h2>\u6700\u9ad8\u5024\u306e\u6642\u523b</h2>\\n\\t\\t\\t<div style=\\\"text-align:left\\\" id=\\\"output0\\\"></div>\\n\\t\\t\\t<div style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output1\\\"></div>\\n\\t\\t<h2>\u6700\u9ad8\u5024\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output2\\\"></span> \u2103\\n</div>\\n</body>\\n</html>\",\"x\":690,\"y\":420,\"wires\":[[\"5d901718.3c51f8\"]]},{\"id\":\"5d901718.3c51f8\",\"type\":\"http response\",\"z\":\"64589e61.60898\",\"name\":\"\",\"x\":850,\"y\":420,\"wires\":[]},{\"id\":\"422b2203.7d68e4\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"stringify\",\"func\":\"var m = JSON.stringify(msg.payload);\\nmsg.payload.op = m;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":520,\"y\":380,\"wires\":[[\"d1c0278d.5bf49\",\"fdd5ab25.ad1cd8\"]]},{\"id\":\"def4328.f99acd\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u5f85\u907f\",\"func\":\"msg.sensor = {\\n        \\\"accelX\\\": msg.payload.d.accelX,\\n        \\\"accelY\\\": msg.payload.d.accelY,\\n        \\\"accelZ\\\": msg.payload.d.accelZ,\\n        \\\"ambientTemp\\\": msg.payload.d.ambientTemp,\\n        \\\"gyroX\\\": msg.payload.d.gyroX,\\n        \\\"gyroY\\\": msg.payload.d.gyroY,\\n        \\\"gyroZ\\\": msg.payload.d.gyroZ,\\n        \\\"humidity\\\": msg.payload.d.humidity,\\n        \\\"light\\\": msg.payload.d.light,\\n        \\\"magX\\\": msg.payload.d.magX,\\n        \\\"magY\\\": msg.payload.d.magY,\\n        \\\"magZ\\\": msg.payload.d.magZ,\\n        \\\"objectTemp\\\": msg.payload.d.objectTemp,\\n};\\n\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":530,\"y\":140,\"wires\":[[\"8bcc302e.8dbd58\"]]},{\"id\":\"ba9d26f1.6a516\",\"type\":\"debug\",\"z\":\"64589e61.60898\",\"name\":\"\u66f8\u304d\u8fbc\u307f\u30c7\u30fc\u30bf\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":740,\"y\":260,\"wires\":[]},{\"id\":\"838fa4c.eef7fd8\",\"type\":\"comment\",\"z\":\"64589e61.60898\",\"name\":\"DB\u304b\u3089\u306e\u30c7\u30fc\u30bf\u3092\u53ef\u8996\u5316\",\"info\":\"\",\"x\":150,\"y\":340,\"wires\":[]},{\"id\":\"ecfd037.e72c4\",\"type\":\"dashDB out\",\"z\":\"64589e61.60898\",\"service\":\"\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":750,\"y\":220,\"wires\":[]},{\"id\":\"1f8c6452.0e2c14\",\"type\":\"dashDB in\",\"z\":\"64589e61.60898\",\"service\":\"\",\"query\":\"select hour,minute,ambienttemp, objecttemp  from SENSOR2DB where (minute%10)=0;\",\"params\":\"\",\"name\":\"dashDB\u304b\u3089\u8aad\u307f\u8fbc\u307f\",\"x\":320,\"y\":380,\"wires\":[[\"422b2203.7d68e4\"]]}]\n\n\n\n\n\u30b5\u30f3\u30d7\u30eb\uff13\uff1aAlps IoT Smart Module\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u3080\nAlps IoT Smart Module\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u8868\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306aDDL\u3067\u4f5c\u6210\u53ef\u80fd\u3067\u3059\u3002\nCREATE TABLE \"ALPSIOT\"\n(\n  \"DATE\" BIGINT,\n  \"DAY\" BIGINT,\n  \"HOUR\" BIGINT,\n  \"MINUTE\" BIGINT,\n  \"MONTH\" BIGINT,\n  \"SECOND\" BIGINT,\n  \"YEAR\" BIGINT,\n  \"ACCELX\" VARCHAR(20),\n  \"ACCELY\" VARCHAR(20),\n  \"ACCELZ\" VARCHAR(20),\n  \"AMBIENTLIGHT\" VARCHAR(20),\n  \"GEOMAGNETICX\" VARCHAR(20),\n  \"GEOMAGNETICY\" VARCHAR(20),\n  \"GEOMAGNETICZ\" VARCHAR(20),\n  \"HUMIDITY\" VARCHAR(20),\n  \"PRESSURE\" VARCHAR(20),\n  \"UV\" VARCHAR(20)\n);\n\n\n\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306fAlps IoT Smart Module\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u307f\u307e\u3059\n\n\n\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306eDashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"32a7a763.d28538\",\"type\":\"ibmiot in\",\"z\":\"1a18e39.b66a99c\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":80,\"wires\":[[\"6b0cda13.f42dfc\"]]},{\"id\":\"6b0cda13.f42dfc\",\"type\":\"function\",\"z\":\"1a18e39.b66a99c\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":240,\"y\":80,\"wires\":[[\"7720544a.dce0c4\"]]},{\"id\":\"7720544a.dce0c4\",\"type\":\"function\",\"z\":\"1a18e39.b66a99c\",\"name\":\"\u30c7\u30fc\u30bf\u6574\u7406\",\"func\":\"if (msg.payload.d.pressure > 0 ) {\\n    context.set('ps', msg.payload.d.pressure);\\n    context.set('hm', msg.payload.d.humidity); \\n    context.set('uv', msg.payload.d.uv); \\n    context.set('al', msg.payload.d.ambientLight); \\n} else {\\n}\\nif (msg.payload.d.accelX ) {\\n    msg.payload = { \\n    \\tDATE : msg.date.date,\\n    \\tDAY : msg.date.day,\\n    \\tHOUR : msg.date.hour,\\n    \\tMINUTE : msg.date.minute,\\n    \\tMONTH : msg.date.month,\\n    \\tSECOND : msg.date.second,\\n    \\tYEAR : msg.date.year,\\n    \\tACCELX : msg.payload.d.accelX,\\n    \\tACCELY : msg.payload.d.accelY,\\n    \\tACCELZ : msg.payload.d.accelZ,\\n    \\tAMBIENTLIGHT : context.get('al'),\\n        GEOMAGNETICX : msg.payload.d.geoMagneticX,\\n        GEOMAGNETICY : msg.payload.d.geoMagneticY,\\n        GEOMAGNETICZ : msg.payload.d.geoMagneticZ,\\n    \\tHUMIDITY : context.get('hm'),\\n    \\tPRESSURE :  context.get('ps'),\\n        UV :  context.get('uv')\\n    };\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":410,\"y\":80,\"wires\":[[\"c0bfac0d.b874f\"]]},{\"id\":\"c0bfac0d.b874f\",\"type\":\"function\",\"z\":\"1a18e39.b66a99c\",\"name\":\"\uff15\u79d2\u6bce\u306b\u66f8\u304d\u51fa\u3057\",\"func\":\"if (msg.date.second % 5 === 0 && msg.date.second != context.get('sec')) {\\n    context.set('sec', msg.date.second);\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":590,\"y\":80,\"wires\":[[\"a647df73.04592\"]]},{\"id\":\"a647df73.04592\",\"type\":\"dashDB out\",\"z\":\"1a18e39.b66a99c\",\"dashDB\":\"\",\"service\":\"_ext_\",\"table\":\"ALPSIOT\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":790,\"y\":80,\"wires\":[]}]\n\n\n\n\u521d\u3081\u3066Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3001\u3068\u3044\u3046\u304b\u305f\u306e\u305f\u3081\u306e\u30ac\u30a4\u30c9\u3067\u3059\u3002\n[Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b](http://qiita.com/egplnt/items/af867711a7191923b2ff)\u3067IoT\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\n\u524d\u9805\u307e\u3067\u306e\u975eSQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(Cloudant\uff09\u3092\u7d4c\u7531\u3059\u308b\u65b9\u6cd5\u3067\u306f\u306a\u304f\u3001dashDB\u3092\u500b\u5225\u306b\u7528\u610f\u3057\u305d\u3053\u3078\u76f4\u63a5IoT\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u8fbc\u3080\u624b\u9806\u3067\u3059\u3002\n\n#dashDB\u3092\u500b\u5225\u306b\u7528\u610f\u3057\u307e\u3059\n1. [\u4ed6\u306eBluemix\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b](http://qiita.com/egplnt/items/0924dd0c31993826d217)\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\u300c\u30c7\u30fc\u30bf\uff06\u5206\u6790\u300d\u30ab\u30c6\u30b4\u30ea\u30fc\u306e\u300cDashDB\u300d\u30b5\u30fc\u30d3\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002`DashDB-xx`\u306e\u3088\u3046\u306a\u540d\u79f0\u304c\u81ea\u52d5\u7684\u306b\u30a2\u30b5\u30a4\u30f3\u3055\u308c\u307e\u3059\u3002\n2. \u4f5c\u6210\u3055\u308c\u305fdashDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\uff08\"DashDB-xx\"\uff09\u3092\u3001Node-RED\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308bIoT\u30a2\u30d7\u30ea\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002Bluemix\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\uff08\u30a2\u30d7\u30ea\u4e00\u89a7\uff09\u304b\u3089\u8a72\u5f53\u3059\u308bIoT\u30a2\u30d7\u30ea\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304d\u3001\u300c\u63a5\u7d9a\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u65e2\u5b58\u306b\u63a5\u7d9a\u300d\u3092\u9078\u629e\u3057\u3001\u524d\u9805\u3067\u4f5c\u6210\u3057\u305fdashDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u9078\u629e\u3057\u3066\u300c\u63a5\u7d9a\u300d\u3092\u62bc\u3057\u3001\u30a2\u30d7\u30ea\u3092\u518d\u30b9\u30c6\u30fc\u30b8\u3057\u307e\u3059\u3002\n3. \u4f5c\u6210\u3055\u308c\u305fdashDB\u306e\u30bf\u30a4\u30eb\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u304d\u3001\u300cGo to your tables\u300d\u30dc\u30bf\u30f3\u3082\u3057\u304f\u306f\u753b\u9762\u5de6\u5074\u306e\u30e1\u30cb\u30e5\u30fc\u306e\u300cTables\u300d\u30dc\u30bf\u30f3\u304b\u3089\u300cAdd Table\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n4. \"Edit the DDL statements\"\u306e\u6b04\u306b\u4e0b\u8a18\u3092\u30b3\u30d4\u30da\u3057\u3001\"Run DDL\"\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002  \n\n```a:CC2650\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u8868\u306e\u4f8b\nCREATE TABLE \"SENSOR2DB\"\n(\n  \"DATE\" BIGINT,\n  \"DAY\" BIGINT,\n  \"HOUR\" BIGINT,\n  \"MINUTE\" BIGINT,\n  \"MONTH\" BIGINT,\n  \"SECOND\" BIGINT,\n  \"YEAR\" BIGINT,\n  \"ACCELX\" VARCHAR(20),\n  \"ACCELY\" VARCHAR(20),\n  \"ACCELZ\" VARCHAR(20),\n  \"AMBIENTTEMP\" VARCHAR(20),\n  \"GYROX\" VARCHAR(20),\n  \"GYROY\" VARCHAR(20),\n  \"GYROZ\" VARCHAR(20),\n  \"HUMIDITY\" VARCHAR(20),\n  \"LIGHT\" VARCHAR(20),\n  \"MAGX\" VARCHAR(20),\n  \"MAGY\" VARCHAR(20),\n  \"MAGZ\" VARCHAR(20),\n  \"OBJECTTEMP\" VARCHAR(20)\n);\n```\n\n#dashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\u307e\u3059\n1. \u8868\u304c\u5b9a\u7fa9\u3055\u308c\u305f\u3089\u3001Node-RED\u306e\u30d5\u30ed\u30fc\u304b\u3089\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u3001\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304c\u306a\u304f\u3066\u3082DashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n```a:Node-RED\u306e\u30d5\u30ed\u30fc\u304b\u3089dashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"d9208db3.c058b\",\"type\":\"ibmiot in\",\"z\":\"26e29f59.971b9\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":110,\"y\":100,\"wires\":[[\"d0b499ec.913da\"]]},{\"id\":\"d0b499ec.913da\",\"type\":\"function\",\"z\":\"26e29f59.971b9\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":275,\"y\":100,\"wires\":[[\"3eaf0b79.ef1934\"]]},{\"id\":\"3eaf0b79.ef1934\",\"type\":\"function\",\"z\":\"26e29f59.971b9\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : 0,\\n\\tACCELY : 0,\\n\\tACCELZ : 0,\\n\\tAMBIENTTEMP : 10,\\n\\tGYROX : 0,\\n\\tGYROY : 0,\\n\\tGYROZ : 0,\\n\\tHUMIDITY : 0,\\n\\tLIGHT : 0,\\n    MAGX : 0,\\n\\tMAGY : 0,\\n\\tMAGZ : 0,\\n\\tOBJECTTEMP : 20\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":475,\"y\":100,\"wires\":[[\"a53a6b28.95b568\"]]},{\"id\":\"82761d4.5b880e\",\"type\":\"inject\",\"z\":\"26e29f59.971b9\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":160,\"wires\":[[\"d0b499ec.913da\"]]},{\"id\":\"a53a6b28.95b568\",\"type\":\"dashDB out\",\"z\":\"26e29f59.971b9\",\"service\":\"\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":690,\"y\":100,\"wires\":[]}]\n\n```\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-16 12.23.58.png](https://qiita-image-store.s3.amazonaws.com/0/125842/537662f1-8421-3916-6d88-ea969ebb7b90.png)\n\n- \u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u306e\u5b9f\u7269\u3092\u63a5\u7d9a\u3057\u3066SENSOR2DB\u3078\u66f8\u304d\u8fbc\u3080\u969b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30ed\u30fc\u3092\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u6bce\u79d2\u306e\u30c7\u30fc\u30bf\u304c\u66f8\u304d\u8fbc\u307e\u308c\u307e\u3059\n\n```lang:\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306eDashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"8adcf1f2.2d066\",\"type\":\"ibmiot in\",\"z\":\"af611d0a.390108\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":80,\"wires\":[[\"4256dc3b.7a655c\"]]},{\"id\":\"4256dc3b.7a655c\",\"type\":\"function\",\"z\":\"af611d0a.390108\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":280,\"y\":80,\"wires\":[[\"c48af21a.27cab\"]]},{\"id\":\"c48af21a.27cab\",\"type\":\"function\",\"z\":\"af611d0a.390108\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : msg.payload.d.accelX,\\n\\tACCELY : msg.payload.d.accelY,\\n\\tACCELZ : msg.payload.d.accelZ,\\n\\tAMBIENTTEMP : msg.payload.d.ambientTemp,\\n\\tGYROX : msg.payload.d.gyroX,\\n\\tGYROY : msg.payload.d.gyroY,\\n\\tGYROZ : msg.payload.d.gyroZ,\\n\\tHUMIDITY : msg.payload.d.humidity,\\n\\tLIGHT : msg.payload.d.light,\\n    MAGX : msg.payload.d.magX,\\n\\tMAGY : msg.payload.d.magY,\\n\\tMAGZ : msg.payload.d.magZ,\\n\\tOBJECTTEMP : msg.payload.d.objectTemp\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":480,\"y\":80,\"wires\":[[\"8fc33952.764748\"]]},{\"id\":\"60f64626.3f54c8\",\"type\":\"inject\",\"z\":\"af611d0a.390108\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":100,\"y\":140,\"wires\":[[\"4256dc3b.7a655c\"]]},{\"id\":\"8fc33952.764748\",\"type\":\"dashDB out\",\"z\":\"af611d0a.390108\",\"service\":\"dashDB-wf\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":710,\"y\":80,\"wires\":[]}]\n\n```\n\n- \u540c\u69d8\u306b\u3001\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u5b9f\u7269\u306eCC2650\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u309210\u79d2\u6bce\u306bdashDB\u306eSENSOR2DB\u3078\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\u66f8\u304d\u8fbc\u3080\u9593\u9694\u306f`\uff11\uff10\u79d2\u6bce\u306b\u66f8\u304d\u51fa\u3057`\u30ce\u30fc\u30c9\u306e`if (msg.date.second % 10 === 0) return msg;`\u306e\u5024\u309215\u79d2\u6bce\u300120\u79d2\u6bce\u300130\u79d2\u6bce\u306a\u3069\u3078\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u8abf\u6574\u53ef\u80fd\u3067\u3059\u3002\n\n```lang:\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u6642\u9593\u9593\u9694\u3067\u30c7\u30fc\u30bf\u3092DashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"b1c25b95.3903a\",\"type\":\"ibmiot in\",\"z\":\"1b4d0fef.0afda8\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":110,\"y\":80,\"wires\":[[\"41bfc260.353cec\"]]},{\"id\":\"41bfc260.353cec\",\"type\":\"function\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":300,\"y\":80,\"wires\":[[\"48468dfa.d396cc\"]]},{\"id\":\"48468dfa.d396cc\",\"type\":\"function\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : msg.payload.d.accelX,\\n\\tACCELY : msg.payload.d.accelY,\\n\\tACCELZ : msg.payload.d.accelZ,\\n\\tAMBIENTTEMP : msg.payload.d.ambientTemp,\\n\\tGYROX : msg.payload.d.gyroX,\\n\\tGYROY : msg.payload.d.gyroY,\\n\\tGYROZ : msg.payload.d.gyroZ,\\n\\tHUMIDITY : msg.payload.d.humidity,\\n\\tLIGHT : msg.payload.d.light,\\n    MAGX : msg.payload.d.magX,\\n\\tMAGY : msg.payload.d.magY,\\n\\tMAGZ : msg.payload.d.magZ,\\n\\tOBJECTTEMP : msg.payload.d.objectTemp\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":500,\"y\":80,\"wires\":[[\"a3b8a0c3.7b7bf\"]]},{\"id\":\"39818c66.f55ffc\",\"type\":\"inject\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":180,\"wires\":[[\"41bfc260.353cec\"]]},{\"id\":\"f29e4ba4.c214b\",\"type\":\"dashDB out\",\"z\":\"1b4d0fef.0afda8\",\"service\":\"dashDB-9x\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":710,\"y\":180,\"wires\":[]},{\"id\":\"a3b8a0c3.7b7bf\",\"type\":\"function\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\uff11\uff10\u79d2\u6bce\u306b\u66f8\u304d\u51fa\u3057\",\"func\":\"if (msg.date.second % 10 === 0) return msg;\",\"outputs\":1,\"noerr\":0,\"x\":480,\"y\":180,\"wires\":[[\"f29e4ba4.c214b\",\"e36cc315.0859c\"]]},{\"id\":\"e36cc315.0859c\",\"type\":\"debug\",\"z\":\"1b4d0fef.0afda8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":700,\"y\":120,\"wires\":[]}]\n\n```\n\n\n\n#Node-RED\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n1. Node-RED\u3092\u4f7f\u3063\u3066dashDB\u304b\u3089\u30c7\u30fc\u30bf\u304c\u8aad\u307f\u51fa\u305b\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```a:Node-RED\u3092\u4f7f\u3063\u3066dashDB\u304b\u3089\u8aad\u307f\u8fbc\u307f\n[{\"id\":\"127a1686.2cd8a1\",\"type\":\"inject\",\"z\":\"26e29f59.971b9\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":240,\"wires\":[[\"ea6b87c4.f3089\"]]},{\"id\":\"3ae7e667.6b1402\",\"type\":\"debug\",\"z\":\"26e29f59.971b9\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":530,\"y\":240,\"wires\":[]},{\"id\":\"ea6b87c4.f3089\",\"type\":\"dashDB in\",\"z\":\"26e29f59.971b9\",\"service\":\"\",\"query\":\"select * from SENSOR2DB;\",\"params\":\"\",\"name\":\"dashDB\u304b\u3089\u8aad\u307f\u53d6\u308a\",\"x\":320,\"y\":240,\"wires\":[[\"3ae7e667.6b1402\"]]}]\n\n```\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-07-06 19.32.04.png](https://qiita-image-store.s3.amazonaws.com/0/125842/f9ba910d-cc74-61f6-3a52-3e44cfccdb9c.png)\n\n\n#dashDB\u5185\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\ndashDB\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n1. dashDB\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u304d\u307e\u3059\u3002\n2. \u300cCreate, drop, and work with tables\u300d\u753b\u9762\u306e\u300cTable name\u300d\u6b04\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u3067\u5bfe\u8c61\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\uff08\u4f8b\uff1a\"SENSOR2DB\")\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-19 18.06.50.png](https://qiita-image-store.s3.amazonaws.com/0/125842/c550dbaa-a1d2-6d7c-7f5a-11ae767375d7.png)\n3. \u753b\u9762\u4e2d\u592e\u306e\u300cSchema\u300d\u6b04\u306b\u8868\u793a\u3055\u308c\u308b\u30b9\u30ad\u30fc\u30de\u540d\uff08\u4f8b\uff1aDASH016xxx\uff09\u3092\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u306e\u753b\u9762\u306e\u300cBrowse Data\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8868\u5185\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\uff08\u95b2\u89a7\uff09\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u753b\u9762\u53f3\u5074\u306e\u300c\u5217\u306e\u8868\u793a/\u975e\u8868\u793a\u3068\u9806\u5e8f\u4ed8\u3051\u300d\u30dc\u30bf\u30f3\u304b\u3089\u8868\u793a\u3055\u308c\u308b\u5217\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-17 18.00.06.png](https://qiita-image-store.s3.amazonaws.com/0/125842/78ac90f9-bd89-a901-62a8-1fa849271ee5.png)\n4. \u753b\u9762\u5de6\u5074\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300cRun SQL\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n5. \u8868\u793a\u3055\u308c\u305fSQL\u5165\u529b\u753b\u9762\u306b\u4e0b\u8a18\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u300cValidate\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066SQL\u69cb\u6587\u306b\u30a8\u30e9\u30fc\u304c\u7121\u3044\u4e8b\u3092\u78ba\u8a8d\u3057\u3066\u3001\u300cRun\u300d\u30dc\u30bf\u30f3\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\nselect count(*) from DASH016xxx.sensor2db;\n```\n- \u4e88\u3081\u7528\u610f\u3055\u308c\u305fSQL\u6587\u306f\u524a\u9664\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3057\u3001\u5148\u982d\u306b\"--\"\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u30b3\u30e1\u30f3\u30c8\u5316\u3055\u308c\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-19 18.16.11.png](https://qiita-image-store.s3.amazonaws.com/0/125842/9f7f8854-2e9a-fdff-a0c3-773c477dfe61.png)\n\n- \u5b9f\u884c\u7d50\u679c\u3092\u30b9\u30af\u30ed\u30fc\u30eb\u30c0\u30a6\u30f3\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30ec\u30b3\u30fc\u30c9\u306e\u4ef6\u6570\u304cCloudant\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3055\u308c\u308b\u4ef6\u6570\u3068\u4e00\u81f4\u3059\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-19 18.26.43.png](https://qiita-image-store.s3.amazonaws.com/0/125842/c5fb9151-2aa8-2eac-bd3d-5b9d5c66ab7d.png)\n\n- \u540c\u69d8\u306b\u3001\u300cRun SQL\u300d\u753b\u9762\u304b\u3089SQL\u3092\u767a\u884c\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n- \u7279\u5b9a\u306e\u884c\u3092\u633f\u5165\uff08\u767b\u9332\uff09\u3059\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306aSQL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f`ambienttemp`\u304c\u30bc\u30ed\u306e\u884c\u3092\u633f\u5165\uff08\u767b\u9332\uff09\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\ninsert into DASHxxxx.SENSOR2DB (ambienttemp) values(0);\n```\n\n- \u7279\u5b9a\u306e\u884c\u3092\u524a\u9664\u3059\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306aSQL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f`ambienttemp`\u304c\u30bc\u30ed\u306e\u884c\u3092\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\ndelete from DASHxxxxx.SENSOR2DB where ambienttemp=0;\n```\n\n\n\n\n#\u30b5\u30f3\u30d7\u30eb\uff11\uff1a\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u305fIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u3080\n\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306fIoT\u30c7\u30fc\u30bf\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u3001\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n1. IoT\u30c7\u30fc\u30bf\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\uff08\u751f\u6210\uff09\u3057\u307e\u3059\n2. \u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\u307e\u3059 \n3. \u4f7f\u7528\u6642\u306b\u306f\u5de6\u7aef\u306e\u300c\uff11\u79d2\u6bce\u300dInject\u30ce\u30fc\u30c9\u3092\u6b21\u306e\u300c\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\u300dfunction\u30ce\u30fc\u30c9\u3078\u63a5\u7d9a\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002\u666e\u6bb5\u30c7\u30fc\u30bf\u304c\u751f\u6210\u3055\u308c\u7d9a\u3051\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u4f7f\u7528\u3057\u306a\u3044\u6642\u306f\u5207\u65ad\u3057\u3066\u304a\u304f\u3053\u3068\u3092\u304a\u85a6\u3081\u3057\u307e\u3059\u3002\n4. \u5fc5\u8981\u306b\u5fdc\u3058\u3001\u300c\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u300dfunction\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u5192\u982d\u306e\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u5024\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-17 9.30.57.png](https://qiita-image-store.s3.amazonaws.com/0/125842/bd16f7e3-f800-e228-c98c-07bf4049abdf.png)\n\n```a:\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u305fIoT\u30c7\u30fc\u30bf\u3092DB\u3078\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"d6a7c81e.450048\",\"type\":\"inject\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"1\u79d2\u6bce\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"1\",\"crontab\":\"\",\"once\":false,\"x\":90,\"y\":120,\"wires\":[[]]},{\"id\":\"6f55fe33.6cf118\",\"type\":\"inject\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"restart\",\"topic\":\"\",\"payload\":\"0\",\"payloadType\":\"num\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":90,\"y\":160,\"wires\":[[\"f2602e5b.bbb1b\"]]},{\"id\":\"a8639f02.42b0c8\",\"type\":\"debug\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":630,\"y\":100,\"wires\":[]},{\"id\":\"dce6eed8.b9fc9\",\"type\":\"comment\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u305fIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067DB\u3078\u66f8\u304d\u8fbc\u307f\",\"info\":\"\",\"x\":240,\"y\":60,\"wires\":[]},{\"id\":\"f2602e5b.bbb1b\",\"type\":\"function\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":261,\"y\":140,\"wires\":[[\"47d39b27.1988dc\",\"27f97ffa.6af63\"]]},{\"id\":\"47d39b27.1988dc\",\"type\":\"debug\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u6642\u523b\u306e\u8868\u793a\",\"active\":false,\"console\":\"false\",\"complete\":\"date\",\"x\":430,\"y\":100,\"wires\":[]},{\"id\":\"c4e1e935.195f18\",\"type\":\"function\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : 0,\\n\\tACCELY : 0,\\n\\tACCELZ : 0,\\n\\tAMBIENTTEMP : msg.sensor1,\\n\\tGYROX : 0,\\n\\tGYROY : 0,\\n\\tGYROZ : 0,\\n\\tHUMIDITY : 0,\\n\\tLIGHT : 0,\\n    MAGX : 0,\\n\\tMAGY : 0,\\n\\tMAGZ : 0,\\n\\tOBJECTTEMP : msg.average\\n};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":660,\"y\":140,\"wires\":[[\"7e904315.ceda14\"]]},{\"id\":\"27f97ffa.6af63\",\"type\":\"function\",\"z\":\"7e6262d4.bcd4e4\",\"name\":\"\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\",\"func\":\"//var sampling_min_interval = 1;\\nvar sampling_sec_interval = 60;     // \u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3059\u308b\u9593\u9694\\n\\nvar sum = 0, average = 0;\\nvar sen1 = Math.floor(Math.random () * 10) + 1;\u3000// \u30bb\u30f3\u30b5\u30fc\u5024\u3092\u751f\u6210\uff08\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\uff09\\n\\nif ( !context.array ) {\\n    context.array = new Array (10); //\u76f4\u8fd1\uff11\uff10\u4ef6\u5206\u3092\u4fdd\u6301\\n}\\nvar shifted = context.array.shift();\\ncontext.array.push(sen1);           // \u6700\u65b0\u306e\u5024\u3092\u4fdd\u5b58\\nvar length = context.array.length;\\n\\nfor (k=0; k<length; k++) {\\n        sum = sum + context.array[k];   // \u5408\u8a08\u3092\u7b97\u51fa\\n}\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\naverage = sum / length;\\nvar data = [[time],[sen1],[average]];\\nmsg.payload = data;\\nif ( ( msg.date.second % sampling_sec_interval ) !== 0 ) return;\\n//if ( ( msg.date.minute % sampling_min_interval ) !== 0 ) return;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":450,\"y\":140,\"wires\":[[\"c4e1e935.195f18\",\"a8639f02.42b0c8\"]]},{\"id\":\"7e904315.ceda14\",\"type\":\"dashDB out\",\"z\":\"7e6262d4.bcd4e4\",\"service\":\"\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\",\"x\":820,\"y\":140,\"wires\":[]}]\n\n```\n\n\n#\u30b5\u30f3\u30d7\u30eb\uff12\uff1a\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\uff08CC2650)\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u3080\n\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306f\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u307f\u3001\u305d\u308c\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n1. \u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059\n2. \u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u307f\u307e\u3059 \n3. \u5fc5\u8981\u306b\u5fdc\u3058\u3001\u300c\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u300dfunction\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u5192\u982d\u306e\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u5024\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-17 13.21.37.png](https://qiita-image-store.s3.amazonaws.com/0/125842/cc3f6af6-fd85-4644-e1cf-6776cabc1e0b.png)\n\n\n```a:\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u30c7\u30fc\u30bf\u3092dashDB\u3078\u683c\u7d0d\u3057\u3001D3\u3067\u53ef\u8996\u5316\u3059\u308b\n[{\"id\":\"175917e8.30b87\",\"type\":\"inject\",\"z\":\"64589e61.60898\",\"name\":\"1\u79d2\u6bce\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"1\",\"crontab\":\"\",\"once\":false,\"x\":110,\"y\":200,\"wires\":[[]]},{\"id\":\"c3e41b5d.223d28\",\"type\":\"inject\",\"z\":\"64589e61.60898\",\"name\":\"restart\",\"topic\":\"\",\"payload\":\"0\",\"payloadType\":\"num\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":110,\"y\":240,\"wires\":[[]]},{\"id\":\"a0155b1b.cda098\",\"type\":\"comment\",\"z\":\"64589e61.60898\",\"name\":\"IoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067DB\u3078\u66f8\u304d\u8fbc\u307f\",\"info\":\"\",\"x\":200,\"y\":60,\"wires\":[]},{\"id\":\"6d18f085.c1b5d8\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":301,\"y\":140,\"wires\":[[\"3b7f6362.24696c\",\"def4328.f99acd\"]]},{\"id\":\"3b7f6362.24696c\",\"type\":\"debug\",\"z\":\"64589e61.60898\",\"name\":\"\u6642\u523b\u306e\u8868\u793a\",\"active\":false,\"console\":\"false\",\"complete\":\"date\",\"x\":510,\"y\":100,\"wires\":[]},{\"id\":\"14d3087b.28646\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u8868\u3078\u66f8\u304d\u8fbc\u3080\",\"func\":\"msg.payload = \\n{ \\n\\tDATE : msg.date.date,\\n\\tDAY : msg.date.day,\\n\\tHOUR : msg.date.hour,\\n\\tMINUTE : msg.date.minute,\\n\\tMONTH : msg.date.month,\\n\\tSECOND : msg.date.second,\\n\\tYEAR : msg.date.year,\\n\\tACCELX : msg.sensor.accelX,\\n\\tACCELY : msg.sensor.accelY,\\n\\tACCELZ : msg.sensor.accelZ,\\n\\tAMBIENTTEMP : msg.sensor.ambientTemp,\\n\\tGYROX : msg.sensor.gyroX,\\n\\tGYROY : msg.sensor.gyroY,\\n\\tGYROZ : msg.sensor.gyroZ,\\n\\tHUMIDITY : msg.sensor.humidity,\\n\\tLIGHT : msg.sensor.light,\\n    MAGX : msg.sensor.magX,\\n\\tMAGY :msg.sensor.magY,\\n\\tMAGZ : msg.sensor.magZ,\\n\\tOBJECTTEMP : msg.sensor.objectTemp\\n};\\n\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":520,\"y\":220,\"wires\":[[\"ba9d26f1.6a516\",\"ecfd037.e72c4\"]]},{\"id\":\"8bcc302e.8dbd58\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\",\"func\":\"var sampling_min_interval = 10;     // 10\u5206\u6bce\u306bDB\u30d8\u66f8\u304d\u8fbc\u307f\\nvar sampling_sec_interval = 60;     // \u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3059\u308b\u9593\u9694\\n\\n/*\\nvar sum = 0, average = 0;\\nvar sen1 = Math.floor(Math.random () * 10) + 1;\u3000// \u30bb\u30f3\u30b5\u30fc\u5024\u3092\u751f\u6210\uff08\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\uff09\\n\\nif ( !context.array ) {\\n    context.array = new Array (10); //\u76f4\u8fd1\uff11\uff10\u4ef6\u5206\u3092\u4fdd\u6301\\n}\\nvar shifted = context.array.shift();\\ncontext.array.push(sen1);           // \u6700\u65b0\u306e\u5024\u3092\u4fdd\u5b58\\nvar length = context.array.length;\\n\\nfor (k=0; k<length; k++) {\\n        sum = sum + context.array[k];   // \u5408\u8a08\u3092\u7b97\u51fa\\n}\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\naverage = sum / length;\\nvar data = [[time],[sen1],[average]];\\nmsg.sensor.average = average;\\n*/\\nif ( ( msg.date.second % sampling_sec_interval ) !== 0 ) return;\\nif ( ( msg.date.minute % sampling_min_interval ) !== 0 ) return;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":310,\"y\":220,\"wires\":[[\"14d3087b.28646\"]]},{\"id\":\"b7faf05f.7d756\",\"type\":\"ibmiot in\",\"z\":\"64589e61.60898\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":140,\"wires\":[[\"6d18f085.c1b5d8\"]]},{\"id\":\"4144253.9dd2fdc\",\"type\":\"http in\",\"z\":\"64589e61.60898\",\"name\":\"\",\"url\":\"/test28\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":110,\"y\":380,\"wires\":[[\"1f8c6452.0e2c14\"]]},{\"id\":\"fdd5ab25.ad1cd8\",\"type\":\"debug\",\"z\":\"64589e61.60898\",\"name\":\"op\",\"active\":false,\"console\":\"false\",\"complete\":\"payload.op\",\"x\":670,\"y\":360,\"wires\":[]},{\"id\":\"d1c0278d.5bf49\",\"type\":\"template\",\"z\":\"64589e61.60898\",\"name\":\"html\u3092\u8fd4\u3059\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<!DOCTYPE html>\\n<html lang=\\\"ja\\\">\\n<head>\\n   <meta charset=\\\"utf-8\\\">\\n   <title>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u8868\u793a</title>\\n      <script src=\\\"https://d3js.org/d3.v4.min.js\\\"></script>\\n\\n   <style type=\\\"text/css\\\">\\n         /* \u3053\u3053\u306b\u30b9\u30bf\u30a4\u30eb\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059 */\\n      .axis path,\\n      .axis line {\\n         fill: none;\\n         stroke: black;\\n         shape-rendering: crispEdges;\\n      }\\n      .axis text {\\n         font-family: sans-serif;\\n         font-size: 11px;\\n      }\\n   </style>\\n\\n   <div id=\\\"op\\\" foo={{payload.op}}/>\\n\\n<script type=\\\"text/javascript\\\">\\n\\nvar op_a = document.getElementById( 'op' ).getAttribute( 'foo' );\\t//\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\\nop_a = op_a.substr( 0, op_a.length-1 ) ;\\t//\u672b\u5c3e\u306e\\\"/\\\"\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\\nvar op_a2 = JSON.parse(op_a);\\t//JSON\u6587\u5b57\u5217\u304b\u3089javascript\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5fa9\u5143\\n\\nvar op_a3 = new Array();\\nfor(var i in op_a2){\\n\\top_a3.push(op_a2[i].AMBIENTTEMP);\\t//AMBIENTTEMP\u3092\u53d6\u308a\u51fa\u3057\u3066\u914d\u5217op_a3\u306b\u9806\u6b21\u683c\u7d0d\\n}\\n\\nvar op_a5 = new Array();\\nfor(var i in op_a2){\\n\\top_a5.push(op_a2[i].HOUR + \\\":\\\" + (( \\\"0\\\" + op_a2[i].MINUTE ).substr( -2 )));\\n}\\n\\n   // \u5e45\uff08 Width \uff09\u3068\u9ad8\u3055\uff08 height \uff09\\n   var w = 800;\\n   var h = 300;\\n   var zoom =5;\\n   var barPadding = 1;  // \u68d2\u30b0\u30e9\u30d5\u306e\u68d2\u3068\u68d2\u306e\u9593\u9694\\n   var margin = 30;     // \u30b0\u30e9\u30d5\u8868\u793a\u57df\u306e\u307e\u308f\u308a\u306e\u4f59\u767d\\n   \\n   var dataset = op_a3;\\n   var datasetT = op_a5;\\n   \\n   // \u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u306e\u751f\u6210\\n   var xScale = d3.scaleLinear()\\n         .domain([0, d3.max(dataset, function(d) { return d; })])\\n         .range([margin, w + margin * 2]);\\n\\n   var yScale = d3.scaleLinear()\\n            .domain([0, (h-margin) / zoom]) // Y\u8ef8\u306e\u30b9\u30b1\u30fc\u30eb\u3092\u68d2\u30b0\u30e9\u30d5\u3068\u4e00\u81f4\u3055\u305b\u308b\\n            .range([h-margin, 0]);\u3000\u3000\u3000\u3000// Y\u8ef8\u8868\u793a\u5834\u6240\\n\\n   // X \u8ef8\u306e\u5b9a\u7fa9\\n   var xAxis = d3.axisBottom()\\n        .scale(xScale);\\n\\n   // Y \u8ef8\u306e\u5b9a\u7fa9\\n   var yAxis = d3.axisLeft(yScale);\\n   \\n   // SVG \u8981\u7d20\u306e\u751f\u6210\\n   var canvas = d3.select(\\\"body\\\")\\n         .append(\\\"svg\\\")\\n         .attr(\\\"width\\\", w)\\n         .attr(\\\"height\\\", h);\\n\\n   canvas.selectAll(\\\"rect\\\")\\n         .data(dataset)\\n         .enter()\\n         .append(\\\"rect\\\")\\n         .attr(\\\"x\\\", function(d, i) {\\n            return i * ((w-margin) / dataset.length) + margin;\\n         })\\n         .attr(\\\"y\\\", function(d) {\\n            return h - (d * zoom) - margin;\\n         })\\n         .attr(\\\"width\\\", (w-margin) / dataset.length - barPadding)\\n         .attr(\\\"height\\\", function(d) {\\n            return d * zoom;\\n         })\\n         .attr(\\\"fill\\\", function(d) {\\n//            return \\\"rgb(0, 0, \\\" + ( ( (d-20) * 10 ) + 100 ) + \\\")\\\";\\n            return \\\"rgb(0, 51, 255)\\\";\\n                     });\\n\\t\\t \\n   canvas.selectAll(\\\"text\\\")\\n         .data(datasetT)\\n         .enter()\\n         .append(\\\"text\\\")\\n         .text(function(d) {\\n            return d;\\n         })\\n         .attr(\\\"text-anchor\\\", \\\"middle\\\")\\n          .attr(\\\"x\\\", function(d, i) {\\n            return i * ((w-margin) / dataset.length) + margin + ((w-margin) / dataset.length - barPadding ) / 2;\\n         })\\n        .attr(\\\"y\\\", function(d) {\\n            return h;\\n         })\\n         .attr(\\\"font-family\\\", \\\"sans-serif\\\")\\n         .attr(\\\"font-size\\\", \\\"11px\\\")\\n         .attr(\\\"fill\\\", \\\"black\\\");\\n\\n/*    canvas.selectAll(\\\"text\\\")\\n         .data(dataset)\\n         .enter()\\n         .append(\\\"text\\\")\\n         .text(function(d) {\\n            return d;\\n         })\\n         .attr(\\\"text-anchor\\\", \\\"middle\\\")\\n         .attr(\\\"x\\\", function(d, i) {\\n            return i * ((w-margin) / dataset.length) + (w / dataset.length - barPadding) / 2  + margin;\\n         })\\n         .attr(\\\"y\\\", function(d) {\\n            return h - (d * 4) + 14  - margin;\\n         })\\n         .attr(\\\"font-family\\\", \\\"sans-serif\\\")\\n         .attr(\\\"font-size\\\", \\\"11px\\\")\\n         .attr(\\\"fill\\\", \\\"white\\\");\\n*/\\n   // X \u8ef8\u306e\u751f\u6210\\n//   canvas.append(\\\"g\\\")\\n//         .attr(\\\"class\\\", \\\"axisBottom\\\")\\n//         .attr(\\\"transform\\\", \\\"translate(0,\\\" + (h - margin) + \\\")\\\")\\n//         .call(xAxis);\\n\\n   // Y \u8ef8\u306e\u751f\u6210\\n   canvas.append(\\\"g\\\")\\n         .attr(\\\"class\\\", \\\"axisLeft\\\")\\n         .attr(\\\"transform\\\", \\\"translate(\\\" + margin + \\\",0)\\\")\\n         .call(yAxis);\\n\\t\\t \\n\\t\\t \\n   var m =  0;\\n   var mh = 0;\\n   var mm = 0;\\n   var mt = 0;\\n   for(var i in op_a2){\\n\\t   if (m < Number(op_a2[i].AMBIENTTEMP)) {\\n\\t       m = Number(op_a2[i].AMBIENTTEMP);\\n\\t\\t   mh = op_a2[i].HOUR;\\n\\t\\t   mm = ( \\\"0\\\" + op_a2[i].MINUTE ).substr( -2 ) ;\\n\\t\\t   mt = op_a2[i].AMBIENTTEMP;\\n    //console.log(\\\"max found was \\\" + mh + \\\":\\\" + mm + \\\" \\\" + mt);\\n\\t   }\\n   }\\n\\n   m = mh + \\\":\\\" + mm;\\n\\n   window.onload = function onLoad() {\\n      var target1 = document.getElementById(\\\"output1\\\");\\n         target1.innerHTML = m;\\n      var target2 = document.getElementById(\\\"output2\\\");\\n         target2.innerHTML = mt;\\n\\t}\\n\\t\\n</script>\\n</head>\\n<body>\\n\\n<div id=\\\"a-box\\\" style=\\\"background-color: #87cefa; padding: 20px;\\\">\\n\\t<h1>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u8868\u793a</h1>\\n\\t<br />\\n\\t<p>\\n\\t\\t\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u305fIoT\u30c7\u30fc\u30bf\u3092\u53ef\u8996\u5316\u3057\u307e\u3059<br />\\n\\t</p>\\n</div>\\n\\n<div id=\\\"b-box\\\" style=\\\"background-color: #ecf2fe; padding: 20px; \\\">\\n\\t\\t<h2>\u6700\u9ad8\u5024\u306e\u6642\u523b</h2>\\n\\t\\t\\t<div style=\\\"text-align:left\\\" id=\\\"output0\\\"></div>\\n\\t\\t\\t<div style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output1\\\"></div>\\n\\t\\t<h2>\u6700\u9ad8\u5024\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output2\\\"></span> \u2103\\n</div>\\n</body>\\n</html>\",\"x\":690,\"y\":420,\"wires\":[[\"5d901718.3c51f8\"]]},{\"id\":\"5d901718.3c51f8\",\"type\":\"http response\",\"z\":\"64589e61.60898\",\"name\":\"\",\"x\":850,\"y\":420,\"wires\":[]},{\"id\":\"422b2203.7d68e4\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"stringify\",\"func\":\"var m = JSON.stringify(msg.payload);\\nmsg.payload.op = m;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":520,\"y\":380,\"wires\":[[\"d1c0278d.5bf49\",\"fdd5ab25.ad1cd8\"]]},{\"id\":\"def4328.f99acd\",\"type\":\"function\",\"z\":\"64589e61.60898\",\"name\":\"\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u5f85\u907f\",\"func\":\"msg.sensor = {\\n        \\\"accelX\\\": msg.payload.d.accelX,\\n        \\\"accelY\\\": msg.payload.d.accelY,\\n        \\\"accelZ\\\": msg.payload.d.accelZ,\\n        \\\"ambientTemp\\\": msg.payload.d.ambientTemp,\\n        \\\"gyroX\\\": msg.payload.d.gyroX,\\n        \\\"gyroY\\\": msg.payload.d.gyroY,\\n        \\\"gyroZ\\\": msg.payload.d.gyroZ,\\n        \\\"humidity\\\": msg.payload.d.humidity,\\n        \\\"light\\\": msg.payload.d.light,\\n        \\\"magX\\\": msg.payload.d.magX,\\n        \\\"magY\\\": msg.payload.d.magY,\\n        \\\"magZ\\\": msg.payload.d.magZ,\\n        \\\"objectTemp\\\": msg.payload.d.objectTemp,\\n};\\n\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":530,\"y\":140,\"wires\":[[\"8bcc302e.8dbd58\"]]},{\"id\":\"ba9d26f1.6a516\",\"type\":\"debug\",\"z\":\"64589e61.60898\",\"name\":\"\u66f8\u304d\u8fbc\u307f\u30c7\u30fc\u30bf\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":740,\"y\":260,\"wires\":[]},{\"id\":\"838fa4c.eef7fd8\",\"type\":\"comment\",\"z\":\"64589e61.60898\",\"name\":\"DB\u304b\u3089\u306e\u30c7\u30fc\u30bf\u3092\u53ef\u8996\u5316\",\"info\":\"\",\"x\":150,\"y\":340,\"wires\":[]},{\"id\":\"ecfd037.e72c4\",\"type\":\"dashDB out\",\"z\":\"64589e61.60898\",\"service\":\"\",\"table\":\"SENSOR2DB\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":750,\"y\":220,\"wires\":[]},{\"id\":\"1f8c6452.0e2c14\",\"type\":\"dashDB in\",\"z\":\"64589e61.60898\",\"service\":\"\",\"query\":\"select hour,minute,ambienttemp, objecttemp  from SENSOR2DB where (minute%10)=0;\",\"params\":\"\",\"name\":\"dashDB\u304b\u3089\u8aad\u307f\u8fbc\u307f\",\"x\":320,\"y\":380,\"wires\":[[\"422b2203.7d68e4\"]]}]\n\n```\n\n\n#\u30b5\u30f3\u30d7\u30eb\uff13\uff1aAlps IoT Smart Module\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u3080\nAlps IoT Smart Module\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u8868\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306aDDL\u3067\u4f5c\u6210\u53ef\u80fd\u3067\u3059\u3002\n\n```a:\nCREATE TABLE \"ALPSIOT\"\n(\n  \"DATE\" BIGINT,\n  \"DAY\" BIGINT,\n  \"HOUR\" BIGINT,\n  \"MINUTE\" BIGINT,\n  \"MONTH\" BIGINT,\n  \"SECOND\" BIGINT,\n  \"YEAR\" BIGINT,\n  \"ACCELX\" VARCHAR(20),\n  \"ACCELY\" VARCHAR(20),\n  \"ACCELZ\" VARCHAR(20),\n  \"AMBIENTLIGHT\" VARCHAR(20),\n  \"GEOMAGNETICX\" VARCHAR(20),\n  \"GEOMAGNETICY\" VARCHAR(20),\n  \"GEOMAGNETICZ\" VARCHAR(20),\n  \"HUMIDITY\" VARCHAR(20),\n  \"PRESSURE\" VARCHAR(20),\n  \"UV\" VARCHAR(20)\n);\n\n```\n\n\n\u4e0b\u8a18\u306e\u30d5\u30ed\u30fc\u3067\u306fAlps IoT Smart Module\u304b\u3089\u306eIoT\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067dashDB\u3078\u66f8\u304d\u8fbc\u307f\u307e\u3059\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2017-01-16 12.57.00.png](https://qiita-image-store.s3.amazonaws.com/0/125842/b90ccf29-5ba9-a6f2-a49e-a6d44133fb86.png)\n\n\n```lang:\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306eDashDB\u3078\u306e\u66f8\u304d\u8fbc\u307f\n[{\"id\":\"32a7a763.d28538\",\"type\":\"ibmiot in\",\"z\":\"1a18e39.b66a99c\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":80,\"wires\":[[\"6b0cda13.f42dfc\"]]},{\"id\":\"6b0cda13.f42dfc\",\"type\":\"function\",\"z\":\"1a18e39.b66a99c\",\"name\":\"\u65e5\u4ed8\u6642\u523b\u306e\u8ffd\u52a0\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\nif (!msg.payload) {\\n    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n}\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":240,\"y\":80,\"wires\":[[\"7720544a.dce0c4\"]]},{\"id\":\"7720544a.dce0c4\",\"type\":\"function\",\"z\":\"1a18e39.b66a99c\",\"name\":\"\u30c7\u30fc\u30bf\u6574\u7406\",\"func\":\"if (msg.payload.d.pressure > 0 ) {\\n    context.set('ps', msg.payload.d.pressure);\\n    context.set('hm', msg.payload.d.humidity); \\n    context.set('uv', msg.payload.d.uv); \\n    context.set('al', msg.payload.d.ambientLight); \\n} else {\\n}\\nif (msg.payload.d.accelX ) {\\n    msg.payload = { \\n    \\tDATE : msg.date.date,\\n    \\tDAY : msg.date.day,\\n    \\tHOUR : msg.date.hour,\\n    \\tMINUTE : msg.date.minute,\\n    \\tMONTH : msg.date.month,\\n    \\tSECOND : msg.date.second,\\n    \\tYEAR : msg.date.year,\\n    \\tACCELX : msg.payload.d.accelX,\\n    \\tACCELY : msg.payload.d.accelY,\\n    \\tACCELZ : msg.payload.d.accelZ,\\n    \\tAMBIENTLIGHT : context.get('al'),\\n        GEOMAGNETICX : msg.payload.d.geoMagneticX,\\n        GEOMAGNETICY : msg.payload.d.geoMagneticY,\\n        GEOMAGNETICZ : msg.payload.d.geoMagneticZ,\\n    \\tHUMIDITY : context.get('hm'),\\n    \\tPRESSURE :  context.get('ps'),\\n        UV :  context.get('uv')\\n    };\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":410,\"y\":80,\"wires\":[[\"c0bfac0d.b874f\"]]},{\"id\":\"c0bfac0d.b874f\",\"type\":\"function\",\"z\":\"1a18e39.b66a99c\",\"name\":\"\uff15\u79d2\u6bce\u306b\u66f8\u304d\u51fa\u3057\",\"func\":\"if (msg.date.second % 5 === 0 && msg.date.second != context.get('sec')) {\\n    context.set('sec', msg.date.second);\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":590,\"y\":80,\"wires\":[[\"a647df73.04592\"]]},{\"id\":\"a647df73.04592\",\"type\":\"dashDB out\",\"z\":\"1a18e39.b66a99c\",\"dashDB\":\"\",\"service\":\"_ext_\",\"table\":\"ALPSIOT\",\"name\":\"dashDB\u3078\u66f8\u304d\u8fbc\u307f\",\"x\":790,\"y\":80,\"wires\":[]}]\n\n```\n\n", "tags": ["watsoniotplatform", "node-red", "IoT", "wiotp", "wiotp19"]}