{"context": " More than 1 year has passed since last update.PhoneGap plugin \u3092\u4f7f\u3046\u3068\u3001Sencha Touch \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3067\u304d\u308b\u3002\u65b0\u3057\u3044Activity\u3092\u547c\u3073\u51fa\u3055\u306a\u3044\u5f62\u306ePlugin \u3067\u3042\u308c\u3070\u3001return new PluginResult(\u623b\u308a\u5024); \u306e\u7d50\u679c\u3068\u3057\u3066 Sencha Touch \u5074\u306b\u5b9f\u884c\u7d50\u679c\u304c\u5e30\u3063\u3066\u304f\u308b\u304c\u3001\u65b0\u3057\u3044Activity \u3092\u547c\u3073\u51fa\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u5143\u306eWebView\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u96e3\u3057\u3044\u3002\n\u65b0\u3057\u304f\u8d77\u52d5\u3057\u305fActivity\u306e\u7d50\u679c\u304b\u3089\u5143\u306eSencha Touch Application\u3092\u64cd\u4f5c\u3057\u305f\u3044\u5834\u5408\u3001Sencha Touch Application \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b Activity \uff08DroidGap\u30af\u30e9\u30b9\u3092\u62e1\u5f35\u3057\u305f\u3082\u306e\uff09\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3001super.loadUrl() \u3092\u4f7f\u3063\u3066 routes \u547c\u3073\u51fa\u3057\u3092\u3057\u3066\u3042\u3052\u308b\u3068\u826f\u3044\nandroid.app.Application \u30af\u30e9\u30b9\u3092\u62e1\u5f35\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\nApplication.java\npackage jp.myapp;\n\npublic class Application extends android.app.Application {\n\n    private MainActivity mainActivity;\n\n    public void setMainActivity(MainActivity mainActivity) {\n        this.mainActivity = mainActivity;\n    }\n\n    public MainActivity getMainActivity() {\n        return mainActivity;\n    }\n\n}\n\n\n\u30ab\u30b9\u30bf\u30e0 Application \u30af\u30e9\u30b9\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b( android:name=\".Application\" \u306b\u6ce8\u76ee)\n\nAndroidManifest.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      package=\"jp.myapp\"\n      android:versionCode=\"1\"\n      android:versionName=\"1.0\">\n-snip-\n    <application android:name=\".Application\" android:icon=\"@drawable/icon\" android:label=\"@string/app_name\">\n        <activity android:name=\".MainActivity\"\n                  android:label=\"@string/app_name\"\n                  android:screenOrientation=\"portrait\"\n                  android:configChanges=\"orientation|keyboardHidden\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n-snip-\n    </application>\n</manifest>\n\n\n\u30e1\u30a4\u30f3Activity\uff08Sencha Touch Application \u304c\u8d77\u52d5\uff09\u3002\n\u8d77\u52d5\u6642\u306b\u3001Application \u30af\u30e9\u30b9\u306b\u81ea\u5206\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u683c\u7d0d\u3059\u308b\n\nMainActivity.java\npackage jp.myapp;\n\nimport org.apache.cordova.DroidGap;\n\nimport android.content.Intent;\nimport android.os.Bundle;\n\npublic class MainActivity extends DroidGap {\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        // set my activithy to Application context\n        Application app = (Application)getApplication();\n        app.setMainActivity(this);\n        // show webview\n        Intent i = getIntent();\n        super.loadUrl(\"file:///android_asset/www/index.html\");\n    }\n\n    public void goTop() {\n        super.loadUrl(\"file:///android_asset/www/index.html#home/index\");\n    }\n\n    public void goList() {\n        super.loadUrl(\"file:///android_asset/www/index.html#picture/list\");\n    }\n}\n\n\nSencha Touch \u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308b PhoneGap Plugin\n\nAwesomePlugin\npackage jp.myapp.plugin;\n\nimport jp.myapp.AwesomeActivity\n\nimport org.apache.cordova.api.Plugin;\nimport org.apache.cordova.api.PluginResult;\nimport org.json.JSONArray;\n\nimport android.content.Intent;\nimport android.util.Log;\n\npublic class AwesomePlugin extends Plugin {\n    private static final String TAG = AwesomePlugin.class.getSimpleName();\n\n    @Override\n    public PluginResult execute(String action, JSONArray data, String callbackId) {\n        Log.d(TAG, \"AwesomePlugin invoked\");\n        Intent intent = new Intent(this.ctx.getContext(),AwesomeActivity.class);\n        // \u65b0\u3057\u3044Activity\u3092\u547c\u3073\u51fa\u3059\n        this.ctx.startActivityForResult(intent);\n\n        return new PluginResult(org.apache.cordova.api.PluginResult.Status.OK);\n    }\n\n    // AwesomeActivity:setResult(int resultCode);\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u306b\u547c\u3070\u308c\u308b\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, Intent intent) {\n        Log.d(TAG, \"onActivityResult:\" + resultCode);\n        super.onActivityResult(requestCode, resultCode, intent);\n        // Application \u30af\u30e9\u30b9\u304b\u3089MainActivity\u3092\u547c\u3073\u51fa\u3057\u3001resultCode \u306b\u5fdc\u3058\u305f\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n        Application app = (Application)this.ctx.getApplicationContext();\n        if (resultCode == 0){\n            // back\n            // do nothing\n        }else if(resultCode == 1){\n            // top\u3078\u623b\u308b\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\n            app.getMainActivity().goTop();\n        }else if(resultCode == 2){\n            // list\u3078\u623b\u308b\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\n            app.getMainActivity().goList();\n        }\n    }\n}\n\n\n\u6700\u5f8c\u306b\u3001Sencha Touch \u5074\u306e controller\u3002#home/index \u3084 #picture/list \u306e routes \u3092\u7528\u610f\u3057\u3066\u304a\u304f\u3002\n\ncontroller/Main.coffee\nExt.define 'MyApp.controller.Main',\n    extend: 'Ext.app.Controller'\n    config:\n      routes:\n        'home/index' : 'goTop'\n        'picture/list' : 'pictureList'\n    ###\n      goto Top\n    ###\n    goTop: () ->\n      console.log 'goTop'\n      # go to toppage\n\n    ###\n      show picture list\n    ###\n    pictureList: () ->\n      console.log 'goList'\n      # do your cool things\n\n\n\n\nPhoneGap plugin \u3092\u4f7f\u3046\u3068\u3001Sencha Touch \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3067\u304d\u308b\u3002\u65b0\u3057\u3044Activity\u3092\u547c\u3073\u51fa\u3055\u306a\u3044\u5f62\u306ePlugin \u3067\u3042\u308c\u3070\u3001`return new PluginResult(\u623b\u308a\u5024);` \u306e\u7d50\u679c\u3068\u3057\u3066 Sencha Touch \u5074\u306b\u5b9f\u884c\u7d50\u679c\u304c\u5e30\u3063\u3066\u304f\u308b\u304c\u3001\u65b0\u3057\u3044Activity \u3092\u547c\u3073\u51fa\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u5143\u306eWebView\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u96e3\u3057\u3044\u3002\n\n\u65b0\u3057\u304f\u8d77\u52d5\u3057\u305fActivity\u306e\u7d50\u679c\u304b\u3089\u5143\u306eSencha Touch Application\u3092\u64cd\u4f5c\u3057\u305f\u3044\u5834\u5408\u3001Sencha Touch Application \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b Activity \uff08DroidGap\u30af\u30e9\u30b9\u3092\u62e1\u5f35\u3057\u305f\u3082\u306e\uff09\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3001super.loadUrl() \u3092\u4f7f\u3063\u3066 routes \u547c\u3073\u51fa\u3057\u3092\u3057\u3066\u3042\u3052\u308b\u3068\u826f\u3044\n\nandroid.app.Application \u30af\u30e9\u30b9\u3092\u62e1\u5f35\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\n```java:Application.java\npackage jp.myapp;\n\npublic class Application extends android.app.Application {\n\n\tprivate MainActivity mainActivity;\n\n\tpublic void setMainActivity(MainActivity mainActivity) {\n\t\tthis.mainActivity = mainActivity;\n\t}\n\n\tpublic MainActivity getMainActivity() {\n\t\treturn mainActivity;\n\t}\n\t\n}\n```\n\n\u30ab\u30b9\u30bf\u30e0 Application \u30af\u30e9\u30b9\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b( android:name=\".Application\" \u306b\u6ce8\u76ee)\n\n```xml:AndroidManifest.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      package=\"jp.myapp\"\n      android:versionCode=\"1\"\n      android:versionName=\"1.0\">\n-snip-\n    <application android:name=\".Application\" android:icon=\"@drawable/icon\" android:label=\"@string/app_name\">\n        <activity android:name=\".MainActivity\"\n                  android:label=\"@string/app_name\"\n                  android:screenOrientation=\"portrait\"\n                  android:configChanges=\"orientation|keyboardHidden\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n-snip-\n    </application>\n</manifest>\n```\n\n\u30e1\u30a4\u30f3Activity\uff08Sencha Touch Application \u304c\u8d77\u52d5\uff09\u3002\n\u8d77\u52d5\u6642\u306b\u3001Application \u30af\u30e9\u30b9\u306b\u81ea\u5206\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u683c\u7d0d\u3059\u308b\n\n```java:MainActivity.java\npackage jp.myapp;\n\nimport org.apache.cordova.DroidGap;\n\nimport android.content.Intent;\nimport android.os.Bundle;\n\npublic class MainActivity extends DroidGap {\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        // set my activithy to Application context\n        Application app = (Application)getApplication();\n        app.setMainActivity(this);\n        // show webview\n        Intent i = getIntent();\n        super.loadUrl(\"file:///android_asset/www/index.html\");\n    }\n\n\tpublic void goTop() {\n\t\tsuper.loadUrl(\"file:///android_asset/www/index.html#home/index\");\n\t}\n\n\tpublic void goList() {\n\t\tsuper.loadUrl(\"file:///android_asset/www/index.html#picture/list\");\n\t}\n}\n```\n\nSencha Touch \u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308b PhoneGap Plugin\n\n```java:AwesomePlugin\npackage jp.myapp.plugin;\n\nimport jp.myapp.AwesomeActivity\n\nimport org.apache.cordova.api.Plugin;\nimport org.apache.cordova.api.PluginResult;\nimport org.json.JSONArray;\n\nimport android.content.Intent;\nimport android.util.Log;\n\npublic class AwesomePlugin extends Plugin {\n    private static final String TAG = AwesomePlugin.class.getSimpleName();\n\n\t@Override\n\tpublic PluginResult execute(String action, JSONArray data, String callbackId) {\n\t\tLog.d(TAG, \"AwesomePlugin invoked\");\n\t\tIntent intent = new Intent(this.ctx.getContext(),AwesomeActivity.class);\n\t\t// \u65b0\u3057\u3044Activity\u3092\u547c\u3073\u51fa\u3059\n\t\tthis.ctx.startActivityForResult(intent);\n\n\t\treturn new PluginResult(org.apache.cordova.api.PluginResult.Status.OK);\n\t}\n\n\t// AwesomeActivity:setResult(int resultCode);\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u306b\u547c\u3070\u308c\u308b\n\t@Override\n\tpublic void onActivityResult(int requestCode, int resultCode, Intent intent) {\n\t\tLog.d(TAG, \"onActivityResult:\" + resultCode);\n\t\tsuper.onActivityResult(requestCode, resultCode, intent);\n\t\t// Application \u30af\u30e9\u30b9\u304b\u3089MainActivity\u3092\u547c\u3073\u51fa\u3057\u3001resultCode \u306b\u5fdc\u3058\u305f\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n\t\tApplication app = (Application)this.ctx.getApplicationContext();\n\t\tif (resultCode == 0){\n\t\t\t// back\n\t\t\t// do nothing\n\t\t}else if(resultCode == 1){\n\t\t\t// top\u3078\u623b\u308b\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\n\t\t\tapp.getMainActivity().goTop();\n\t\t}else if(resultCode == 2){\n\t\t\t// list\u3078\u623b\u308b\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\n\t\t\tapp.getMainActivity().goList();\n\t\t}\n\t}\n}\n```\n\n\u6700\u5f8c\u306b\u3001Sencha Touch \u5074\u306e controller\u3002#home/index \u3084 #picture/list \u306e routes \u3092\u7528\u610f\u3057\u3066\u304a\u304f\u3002\n\n```coffeescript:controller/Main.coffee\nExt.define 'MyApp.controller.Main',\n    extend: 'Ext.app.Controller'\n    config:\n      routes:\n        'home/index' : 'goTop'\n        'picture/list' : 'pictureList'\n    ###\n      goto Top\n    ###\n    goTop: () ->\n      console.log 'goTop'\n      # go to toppage\n\n    ###\n      show picture list\n    ###\n    pictureList: () ->\n      console.log 'goList'\n      # do your cool things\n\n```\n", "tags": ["Android", "PhoneGap", "SenchaTouch", "SenchaTouch2"]}