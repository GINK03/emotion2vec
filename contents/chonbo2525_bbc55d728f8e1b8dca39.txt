{"context": " More than 1 year has passed since last update.GoogleAnalytics v4\u3092Android\u306b\u5c0e\u5165\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u30a2\u30d7\u30ea\u306e\u5229\u7528\u72b6\u6cc1\u306a\u3093\u304b\u304c\u308f\u304b\u308b\u306e\u306f\u3059\u3054\u304f\u3044\u3044\u306e\u3067\u3001\u662f\u975e\u30a2\u30d7\u30ea\u516c\u958b\u524d\u306b\u306fGoogleAnalytics\u3092\u5c0e\u5165\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\u3067\u306f\u3055\u3063\u305d\u304f\u5fd8\u308c\u306a\u3044\u5185\u306b\u624b\u9806\u3092\u66f8\u3044\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u307e\u305aGoogleAnalytics\u306b\u767b\u9332\u3057\u307e\u3057\u3087\u3046\u3002\nhttp://www.google.com/analytics/ \u306b\u884c\u304d\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u9078\u629e\u3057\u3001\u4efb\u610f\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u540d(\u8907\u6570\u4f5c\u6210\u3067\u304d\u307e\u3059)\u3001\u30a2\u30d7\u30ea\u540d\u306a\u3069\u3092\u5165\u529b\u3057\u3066\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID\u3092\u53d6\u5f97\u3057\u305f\u3089GoogleAnalytics\u306e\u767b\u9332\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\u3067\u306f\u3001\u6b21\u306bGoogleAnalytics\u3092\u30a2\u30d7\u30ea\u3078\u7d44\u307f\u8fbc\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\u25b6\ufe0eGooglePlayServices\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\nFile -> Project Structure -> Dependencies\u5185\u306b\u5de6\u4e0b\u306e+\u30dc\u30bf\u30f3\u304b\u3089Library Dependency\u3092\u9078\u629e\u3057\nGooglePlayService\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\nbuild.gradle\u306b\u5165\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\u25b6\ufe0eManifest\u3078\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\nManifest.xml\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n\n\napplication\u30bf\u30b0\u5185\u306b\n\nManifest.xml\n    <meta-data\n            android:name=\"com.google.android.gms.version\"\n            android:value=\"@integer/google_play_services_version\"/>\n\n\n\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u25b6\ufe0eres/xml\u5185\u306b\u4ee5\u4e0b\u306exml\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nglobal_tracker.xml\n          <resources>\n              <!-- How long a session exists before giving up -->\n              <integer name=\"ga_sessionTimeout\">300</integer>\n              <!-- Enable automatic Activity measurement -->\n              <bool name=\"ga_autoActivityTracking\">true</bool>\n              <!-- The screen names that will appear in reports -->\n              <screenName name=\u201ccom.example.activity.HogeActivity\u201c>\n              </screenName>\n              <!--  The following value should be replaced with correct property id. -->\n              <string name=\u201cga_trackingId\u201d>UA-XXXXXXX-X</string>\n           </resources>\n\n\n\necommerce_tracker.xml\n          <resources>\n              <integer name=\"ga_sessionTimeout\">60</integer>\n              <!--  The following value should be replaced with correct property id. -->\n              <string name=\"ga_trackingId\">UA-XXXXXXX-X</string>\n          </resources>\n\n\n\u25b6\ufe0eApplication\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nApp.java\n    public class App extends Application {\n\n    private static final String PROPERTY_ID = \"UA-xxxxxxxx-x\";\n    public enum TrackerName {\n        APP_TRACKER, // Tracker used only in this app.\n        GLOBAL_TRACKER, // Tracker used by all the apps from a company. eg: roll-up tracking.\n        ECOMMERCE_TRACKER, // Tracker used by all ecommerce transactions from a company.\n    }\n\n    HashMap<TrackerName, Tracker> mTrackers = new HashMap<TrackerName, Tracker>();\n    @Override\n    public void onCreate() {\n        super.onCreate();\n    }\n    public synchronized Tracker getTracker(TrackerName trackerId) {\n        if (!mTrackers.containsKey(trackerId)) {\n\n            GoogleAnalytics analytics = GoogleAnalytics.getInstance(this);\n            Tracker t = (trackerId == TrackerName.APP_TRACKER) ? analytics.newTracker(PROPERTY_ID)\n                    : (trackerId == TrackerName.GLOBAL_TRACKER) ? analytics.newTracker(R.xml.global_tracker)\n                    : analytics.newTracker(R.xml.ecommerce_tracker);\n            t.enableAdvertisingIdCollection(true);\n            mTrackers.put(trackerId, t);\n\n        }\n        return mTrackers.get(trackerId);\n    }\n    }\n\n\n\u25b6\ufe0eActivity\u306eonStart\u5185\u3067\n\nMainActivity.java\n      Tracker t = ((App)getApplication()).getTracker(App.TrackerName.APP_TRACKER);\n      t.setScreenName(this.getClass().getSimpleName());\n      t.send(new HitBuilders.AppViewBuilder().build());\n\n\n\u4ee5\u4e0a\u3067GoogleAnalytics\u306e\u30ec\u30dd\u30fc\u30c8\u304c\u53d6\u5f97\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u7121\u6599\u306a\u306e\u3067\u3069\u3093\u3069\u3093\u6d3b\u7528\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nGoogleAnalytics v4\u3092Android\u306b\u5c0e\u5165\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30a2\u30d7\u30ea\u306e\u5229\u7528\u72b6\u6cc1\u306a\u3093\u304b\u304c\u308f\u304b\u308b\u306e\u306f\u3059\u3054\u304f\u3044\u3044\u306e\u3067\u3001\u662f\u975e\u30a2\u30d7\u30ea\u516c\u958b\u524d\u306b\u306fGoogleAnalytics\u3092\u5c0e\u5165\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\u3067\u306f\u3055\u3063\u305d\u304f\u5fd8\u308c\u306a\u3044\u5185\u306b\u624b\u9806\u3092\u66f8\u3044\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u305aGoogleAnalytics\u306b\u767b\u9332\u3057\u307e\u3057\u3087\u3046\u3002\nhttp://www.google.com/analytics/ \u306b\u884c\u304d\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-27 11.32.27.png](https://qiita-image-store.s3.amazonaws.com/0/44564/b00c1557-93eb-d594-e4d7-ce69b87c163e.png)\n\u3053\u3053\u3067\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3092\u9078\u629e\u3057\u3001\u4efb\u610f\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u540d(\u8907\u6570\u4f5c\u6210\u3067\u304d\u307e\u3059)\u3001\u30a2\u30d7\u30ea\u540d\u306a\u3069\u3092\u5165\u529b\u3057\u3066\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-27 11.36.35.png](https://qiita-image-store.s3.amazonaws.com/0/44564/d758b5f3-0a6c-0445-59e3-3d5e893d6b4f.png)\n\n\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID\u3092\u53d6\u5f97\u3057\u305f\u3089GoogleAnalytics\u306e\u767b\u9332\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\u3067\u306f\u3001\u6b21\u306bGoogleAnalytics\u3092\u30a2\u30d7\u30ea\u3078\u7d44\u307f\u8fbc\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\n\u25b6\ufe0eGooglePlayServices\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\nFile -> Project Structure -> Dependencies\u5185\u306b\u5de6\u4e0b\u306e+\u30dc\u30bf\u30f3\u304b\u3089Library Dependency\u3092\u9078\u629e\u3057\nGooglePlayService\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\nbuild.gradle\u306b\u5165\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\n\n\u25b6\ufe0eManifest\u3078\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n```xml:Manifest.xml\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n```\napplication\u30bf\u30b0\u5185\u306b\n\n```xml:Manifest.xml\n    <meta-data\n            android:name=\"com.google.android.gms.version\"\n            android:value=\"@integer/google_play_services_version\"/>\n```\n\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u25b6\ufe0eres/xml\u5185\u306b\u4ee5\u4e0b\u306exml\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```xml:global_tracker.xml\n          <resources>\n              <!-- How long a session exists before giving up -->\n              <integer name=\"ga_sessionTimeout\">300</integer>\n              <!-- Enable automatic Activity measurement -->\n              <bool name=\"ga_autoActivityTracking\">true</bool>\n              <!-- The screen names that will appear in reports -->\n              <screenName name=\u201ccom.example.activity.HogeActivity\u201c>\n              </screenName>\n              <!--  The following value should be replaced with correct property id. -->\n              <string name=\u201cga_trackingId\u201d>UA-XXXXXXX-X</string>\n           </resources>\n```\n```xml:ecommerce_tracker.xml\n          <resources>\n              <integer name=\"ga_sessionTimeout\">60</integer>\n              <!--  The following value should be replaced with correct property id. -->\n              <string name=\"ga_trackingId\">UA-XXXXXXX-X</string>\n          </resources>\n```\n\n\u25b6\ufe0eApplication\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```java:App.java\n    public class App extends Application {\n\n    private static final String PROPERTY_ID = \"UA-xxxxxxxx-x\";\n    public enum TrackerName {\n        APP_TRACKER, // Tracker used only in this app.\n        GLOBAL_TRACKER, // Tracker used by all the apps from a company. eg: roll-up tracking.\n        ECOMMERCE_TRACKER, // Tracker used by all ecommerce transactions from a company.\n    }\n\n    HashMap<TrackerName, Tracker> mTrackers = new HashMap<TrackerName, Tracker>();\n    @Override\n    public void onCreate() {\n        super.onCreate();\n    }\n    public synchronized Tracker getTracker(TrackerName trackerId) {\n        if (!mTrackers.containsKey(trackerId)) {\n\n            GoogleAnalytics analytics = GoogleAnalytics.getInstance(this);\n            Tracker t = (trackerId == TrackerName.APP_TRACKER) ? analytics.newTracker(PROPERTY_ID)\n                    : (trackerId == TrackerName.GLOBAL_TRACKER) ? analytics.newTracker(R.xml.global_tracker)\n                    : analytics.newTracker(R.xml.ecommerce_tracker);\n            t.enableAdvertisingIdCollection(true);\n            mTrackers.put(trackerId, t);\n\n        }\n        return mTrackers.get(trackerId);\n    }\n    }\n```\n\u25b6\ufe0eActivity\u306eonStart\u5185\u3067\n\n```java:MainActivity.java\n      Tracker t = ((App)getApplication()).getTracker(App.TrackerName.APP_TRACKER);\n      t.setScreenName(this.getClass().getSimpleName());\n      t.send(new HitBuilders.AppViewBuilder().build());\n```\n\n\u4ee5\u4e0a\u3067GoogleAnalytics\u306e\u30ec\u30dd\u30fc\u30c8\u304c\u53d6\u5f97\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u7121\u6599\u306a\u306e\u3067\u3069\u3093\u3069\u3093\u6d3b\u7528\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Android", "AndroidStudio", "GoogleAnalytics"]}