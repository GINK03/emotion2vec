{"tags": ["api", "apache-camel", "Java", "spring"], "context": " More than 1 year has passed since last update.\u4eca\u56de\u306f\u8a66\u3057\u306b\u90f5\u4fbf\u756a\u53f7\u304b\u3089\u4f4f\u6240\u60c5\u5831\u3092\u691c\u7d22\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\n\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3068\u306f\n\u3053\u306e\u30d6\u30ed\u30b0\u304c\u3088\u304f\u307e\u3068\u307e\u3063\u3066\u3044\u308b\u3068\u601d\u3046\nhttp://techlife.cookpad.com/entry/2014/09/08/093000\n\u826f\u3044\u70b9\n\n\u5171\u901a\u3067\u5229\u7528\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3060\u3063\u305f\u3089\u8a00\u8a9e\u95a2\u4fc2\u306a\u304f\u547c\u3079\u3070\u3044\u3044\u3060\u3051\u306a\u306e\u3067\u4fbf\u5229\uff01\n\u3082\u3057\u30b5\u30fc\u30d3\u30b9\u304c\u53e4\u304f\u306a\u3063\u3066\u4f5c\u308a\u76f4\u3057\u3068\u306a\u3063\u3066\u3082\u3001\u4f5c\u308a\u76f4\u3057\u306e\u7bc4\u56f2\u304c\u5c0f\u3055\u304f\u306a\u308b\u3002\n\n\u60aa\u3044\u70b9\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u6570\u304c\u5897\u3048\u308b\u306e\u3067\u3001\u904b\u7528\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u304c\u5897\u3048\u308b\u3002\n\n\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u9650\u5b9a\u3067\u8003\u3048\u308b\u3068\n\u826f\u3044\u70b9\n\n\u5404\u500b\u5225\u306e\u30a2\u30d7\u30ea\u3067\u90f5\u4fbf\u756a\u53f7DB\u3092\u6301\u305f\u306a\u304f\u3066\u6e08\u3080\n\u90f5\u4fbf\u756a\u53f7\u30c6\u30fc\u30d6\u30eb\u306e\u6700\u65b0\u5316\u304c\uff11\u7b87\u6240\u3067\u6e08\u3080\n\u90f5\u4fbf\u756a\u53f7\u691c\u7d22\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u500b\u5225\u306e\u30a2\u30d7\u30ea\u3067\u4f5c\u3089\u306a\u304f\u3066\u6e08\u3080\n\u691c\u7d22\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u30d0\u30b0\u304c\u3042\u3063\u3066\u3082\u3001\u691c\u7d22\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u4fee\u6b63\u3059\u308c\u3070\u3044\u3044\u3060\u3051\u3002\n\n\nApache Camel\u3092\u4f7f\u3063\u3066\u4f5c\u308b\u4e8b\n\u82f1\u8a9e\u306e\u8a18\u4e8b\u306a\u306e\u3067\u8aad\u3081\u308b\u4eba\u3060\u3051\u3002 \nhttp://java.dzone.com/articles/apache-camel-micro%C2%ADservice\n\nApache Camel\u3068\u306f\nApache Camel \u2122 is a versatile open-source integration framework based on known Enterprise Integration Patterns.\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u8272\u3093\u306a\u30b7\u30b9\u30c6\u30e0\u3068\u7d71\u5408\u3067\u304d\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308a\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u6d41\u901a\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\nApache Camel (Java)\u3092\u4f7f\u3046\u3068\u958b\u767a\u304c\u697d\u306b\u306a\u308b\uff17\u3064\u306e\u7406\u7531\n\u3061\u306a\u307f\u306b\u3001Camel\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4e00\u89a7\u306f\u3053\u3093\u306a\u611f\u3058\nhttps://twitter.com/davsclaus/status/506728047928942592/photo/1\n\u5168\u3066\u306f\u65e2\u5b58\u306eOSS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30e9\u30c3\u30d7\u3057\u3066\u52d5\u3044\u3066\u3044\u308b\u3060\u3051\u3060\u3051\u3002\n\u3068\u3046\u3068\u3046170\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4ee5\u4e0a\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u4e8b\u3089\u3057\u3044\u3002\n\n\u74b0\u5883\n\nTomcat7, 8\nJava7, 8\nApache Camel 2.14.0\nMySQL\n\n\n\u5b8c\u6210\u3057\u305f\u3082\u306e\u3092\u52d5\u304b\u3057\u3066\u307f\u308b\n\u4f5c\u308a\u65b9\u306f\u4e0b\u306e\u307b\u3046\u306b\u66f8\u304f\u306e\u3067\u3001\u3069\u3046\u3044\u3046\u52d5\u4f5c\u7d50\u679c\u306b\u306a\u308b\u304b\u3092\u307e\u305a\u898b\u305b\u308b\u3002\n\u4e0b\u8a18\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\nhttp://localhost:8881/address/zip?zip=100-0000\n\u30a2\u30af\u30bb\u30b9\u7d50\u679c\n{\"id\":100000000,\"ken_id\":13,\"city_id\":13101,\"town_id\":131010000,\"zip\":\"100-0000\",\"office_flg\":false,\"delete_flg\":false,\"ken_name\":\"\u6771\u4eac\u90fd\",\"ken_furi\":\"\u30c8\u30a6\u30ad\u30e7\u30a6\u30c8\",\"city_name\":\"\u5343\u4ee3\u7530\u533a\",\"city_furi\":\"\u30c1\u30e8\u30c0\u30af\",\"town_name\":\"\",\"town_furi\":\"\u3000\",\"town_memo\":\"\uff08\u8a72\u5f53\u306a\u3057\uff09\",\"kyoto_street\":\"\",\"block_name\":\"\",\"block_furi\":\"\",\"memo\":\"\",\"office_name\":\"\",\"office_furi\":\"\",\"office_address\":\"\",\"new_id\":0}\n\u3068\u3044\u3046\u7d50\u679c\u304c\u5e30\u3063\u3066\u304f\u308b\u3002\n\nWeb\u30d6\u30e9\u30a6\u30b6\u3067\u72b6\u614b\u78ba\u8a8d\u3082\u3067\u304d\u308b\nhawtio-default-1.4.19\u306b\u95a2\u3057\u3066\u306f\u30c7\u30d7\u30ed\u30a4\u306e\u6240\u306b\u8a18\u8ff0\u3002\ntomcat\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308bhawtio\u3068\u3044\u3046\u30c4\u30fc\u30eb\u3067camel\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\nhttp://localhost:8080/hawtio-default-1.4.19\n1\u3064\u3081\u306e\u30eb\u30fc\u30c8\u5b9a\u7fa9\u3092\u78ba\u8a8d\u3002\nhttp\u53d7\u4fe1\u8fd4\u4fe1\uff08rest\uff09\u306e\u51e6\u7406\n\n2\u3064\u3081\u306e\u30eb\u30fc\u30c8\u3092\u78ba\u8a8d\u3002\n\u90f5\u4fbf\u756a\u53f7\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001\u7d50\u679c\u30ec\u30b3\u30fc\u30c9\u306e\uff11\u756a\u76ee\u3092\u8fd4\u3059\u3002\n\n\n\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://localhost:8881/address/zip?zip=100-0000\n\n\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u305f\u90e8\u5206\u306b1\u304c\u4ed8\u3044\u305f\n\u60c5\u5831\u304c\u306a\u3044\u30c7\u30fc\u30bf\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://localhost:8881/address/zip?zip=999-0000\n\n\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u305f\u90e8\u5206\u306b1\u304c\u4ed8\u3044\u305f\n\u632f\u308a\u5206\u3051\u3089\u308c\u305f\u3088\u3046\u3067\u3059\u306d\n\n\u30c8\u30ec\u30fc\u30b9\u6a5f\u80fd\u3092ON\u306b\u3057\u3066\u3001\u6d41\u901a\u30c7\u30fc\u30bf\u3092\u8ffd\u8de1\nstart trace\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u6d41\u3057\u3066\u307f\u308b\u3002\n\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u305f\u7d50\u679c\u3092\u5f8c\u3067\u78ba\u8a8d\u3067\u304d\u308b\u306e\u304c\u30c8\u30ec\u30fc\u30b9\u6a5f\u80fd\u3002\n\n\n\n\n\n\u51e6\u7406\u901f\u5ea6\u3092\u78ba\u8a8d\n\n\u30c6\u30fc\u30d6\u30eb\u306b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u70ba\u3001\u691c\u7d22\u306b\u5e73\u574720\u30df\u30ea\u79d2\u3082\u304b\u304b\u3063\u3066\u3044\u308b\u4e8b\u304c\u5206\u304b\u308b\u30fb\u30fb\u30fb\n\n\u4f5c\u308a\u65b9\n\nDB\u306e\u4f5c\u6210 - 1\u5206\n\u3053\u3053\u304b\u3089sql\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttp://jusyo.jp/sql/document.html\nmysql\u306b\u7a81\u3063\u8fbc\u3080\nmysql -u \u30e6\u30fc\u30b6\u30fc\u540d -p \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d < \u30d5\u30a1\u30a4\u30eb\u540d\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b - 1\u5206\n\n\n\n\n\n\n\n\n\n\u3044\u308d\u3044\u308d\u8a2d\u5b9a - 4\u5206\npom.xml\u306f\u3053\u3093\u306a\u611f\u3058\nhttps://github.com/d7kuro/post/blob/master/pom.xml\nweb.xml\u306f\u3044\u3064\u3082\u306e\u30b3\u30d4\u30da\nhttps://github.com/d7kuro/post/blob/master/src/main/webapp/WEB-INF/web.xml\nspring.xml\u306f\u3044\u3064\u3082\u306e\u30b3\u30d4\u30da\nhttps://github.com/d7kuro/post/blob/master/src/main/resources/spring.xml\nspring-db.xml\u306f\u3044\u3064\u3082\u306e\u30b3\u30d4\u30da\nhttps://github.com/d7kuro/post/blob/master/src/main/resources/spring-db.xml\nspring-camel.xml\u306frestConfiguration\u304c\u4ed8\u3044\u305f\u3002\u3053\u3053\u3067rest\u306eport\u756a\u53f7\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\n\nsrc/main/resources/spring-camel.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"\n       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring-2.14.0.xsd\n       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n       \">\n\n    <!-- \u30eb\u30fc\u30c8\u306e\u81ea\u52d5\u767b\u9332\uff08\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u691c\u7d22\u3055\u308c\u308b\uff09 @Component\u304c\u5bfe\u8c61 -->\n    <context:component-scan base-package=\"post\" />\n\n    <!-- SQL\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5168\u5171\u901a\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u8a2d\u5b9a -->\n    <bean id=\"sql\" class=\"org.apache.camel.component.sql.SqlComponent\">\n        <property name=\"dataSource\" ref=\"ds_mysql\" />\n    </bean>\n\n    <!-- camel\u30eb\u30fc\u30c8 -->\n    <camelContext xmlns=\"http://camel.apache.org/schema/spring\"\n        id=\"post\">\n        <contextScan />\n        <restConfiguration component=\"jetty\" host=\"0.0.0.0\"\n            port=\"8881\" bindingMode=\"json\" >\n        </restConfiguration>\n    </camelContext>\n\n</beans>\n\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b - 3\u5206\n\u90f5\u4fbf\u756a\u53f7\u691c\u7d22\u7528\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\n\nsrc/main/java/post/route/api/AddressRoute.java\npackage post.route.api;\n\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.component.sql.SqlConstants;\nimport org.springframework.stereotype.Component;\n\n/**\n * 000-0000\u5f62\u5f0f\u306e\u90f5\u4fbf\u756a\u53f7\u304b\u3089json\u30c7\u30fc\u30bf\u3092\u8fd4\u3059\n */\n@Component\npublic class AddressRoute extends RouteBuilder {\n\n    public static final String CLASSNAME = AddressRoute.class.getSimpleName();\n    public static final String IN = \"direct:in\" + CLASSNAME;\n\n    @Override\n    public void configure() throws Exception {\n        from(IN).routeId(CLASSNAME)\n\n        // SQL\u5b9f\u884c\n        .to(\"sql:SELECT * FROM ad_address WHERE zip = :#zip \")\n\n        // \u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u6642\u306e\u51e6\u7406\n        .choice()\n        .when(header(SqlConstants.SQL_ROW_COUNT).isEqualTo(0))\n            .setBody(constant(null))\n        .otherwise()\n            // \u7d50\u679c\u30c7\u30fc\u30bf\u4f5c\u6210\uff08List<Map>\u306e0\u756a\u76ee\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u5374\uff09\n            .setBody(simple(\"${body[0]}\"))\n        .end()\n        ;\n    }\n\n}\n\n\nHTTP\u53d7\u4fe1\u7528\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\npackage post.route;\n\nimport org.apache.camel.builder.RouteBuilder;\nimport org.springframework.stereotype.Component;\n\nimport post.route.api.AddressRoute;\n\n/**\n * HTTP\u53d7\u4fe1 <br>\n * \u8fd4\u5374\u5024\u306f\u81ea\u52d5\u7684\u306bjson\u306b\u5909\u63db\u3055\u308c\u308b \n * \n */\n@Component\npublic class HttpRoute extends RouteBuilder {\n\n    @Override\n    public void configure() throws Exception {\n        rest(\"/address\")\n        .get(\"/zip\").to(AddressRoute.IN);\n    }\n\n}\n\n\n\u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4 - 1\u5206\n\nwar\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\nmaven clean package \u3092\u5b9f\u884c\ntarget/post-1.war\u304c\u3067\u304d\u308b\u3002\n\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067Camel\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u30fb\u64cd\u4f5c\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3092\u5165\u624b\nhawtio-default-1.4.19.war\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n( http://hawt.io/getstarted/index.html \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9)\n\ntomcat\u306b\u30c7\u30d7\u30ed\u30a4\n\npost-1.war\nhawtio-default-1.4.19.war\n\n\u4e0a\u8a18\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4e0b\u8a18\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3060\u3051\ntomcat/webapps/\n\u5168\u4f53\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nhttps://github.com/d7kuro/post\n\u304a\n\u308f\n\u308a\n\n\u4eca\u56de\u306f\u8a66\u3057\u306b\u90f5\u4fbf\u756a\u53f7\u304b\u3089\u4f4f\u6240\u60c5\u5831\u3092\u691c\u7d22\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\n# \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3068\u306f\n\n\u3053\u306e\u30d6\u30ed\u30b0\u304c\u3088\u304f\u307e\u3068\u307e\u3063\u3066\u3044\u308b\u3068\u601d\u3046\nhttp://techlife.cookpad.com/entry/2014/09/08/093000\n\n\u826f\u3044\u70b9\n\n* \u5171\u901a\u3067\u5229\u7528\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3060\u3063\u305f\u3089\u8a00\u8a9e\u95a2\u4fc2\u306a\u304f\u547c\u3079\u3070\u3044\u3044\u3060\u3051\u306a\u306e\u3067\u4fbf\u5229\uff01\n* \u3082\u3057\u30b5\u30fc\u30d3\u30b9\u304c\u53e4\u304f\u306a\u3063\u3066\u4f5c\u308a\u76f4\u3057\u3068\u306a\u3063\u3066\u3082\u3001\u4f5c\u308a\u76f4\u3057\u306e\u7bc4\u56f2\u304c\u5c0f\u3055\u304f\u306a\u308b\u3002\n\n\u60aa\u3044\u70b9\n\n* \u30b5\u30fc\u30d3\u30b9\u306e\u6570\u304c\u5897\u3048\u308b\u306e\u3067\u3001\u904b\u7528\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u304c\u5897\u3048\u308b\u3002\n\n### \u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u9650\u5b9a\u3067\u8003\u3048\u308b\u3068\n\n\u826f\u3044\u70b9\n\n* \u5404\u500b\u5225\u306e\u30a2\u30d7\u30ea\u3067\u90f5\u4fbf\u756a\u53f7DB\u3092\u6301\u305f\u306a\u304f\u3066\u6e08\u3080\n* \u90f5\u4fbf\u756a\u53f7\u30c6\u30fc\u30d6\u30eb\u306e\u6700\u65b0\u5316\u304c\uff11\u7b87\u6240\u3067\u6e08\u3080\n* \u90f5\u4fbf\u756a\u53f7\u691c\u7d22\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u500b\u5225\u306e\u30a2\u30d7\u30ea\u3067\u4f5c\u3089\u306a\u304f\u3066\u6e08\u3080\n* \u691c\u7d22\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u30d0\u30b0\u304c\u3042\u3063\u3066\u3082\u3001\u691c\u7d22\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u4fee\u6b63\u3059\u308c\u3070\u3044\u3044\u3060\u3051\u3002\n\n### Apache Camel\u3092\u4f7f\u3063\u3066\u4f5c\u308b\u4e8b\n\n\u82f1\u8a9e\u306e\u8a18\u4e8b\u306a\u306e\u3067\u8aad\u3081\u308b\u4eba\u3060\u3051\u3002 \nhttp://java.dzone.com/articles/apache-camel-micro%C2%ADservice\n\n\n# Apache Camel\u3068\u306f\n\nApache Camel \u2122 is a versatile open-source integration framework based on known Enterprise Integration Patterns.\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u8272\u3093\u306a\u30b7\u30b9\u30c6\u30e0\u3068\u7d71\u5408\u3067\u304d\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308a\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u6d41\u901a\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n[Apache Camel (Java)\u3092\u4f7f\u3046\u3068\u958b\u767a\u304c\u697d\u306b\u306a\u308b\uff17\u3064\u306e\u7406\u7531](http://qiita.com/daikuro/items/5e22c78c0342fde04b87)\n\n\u3061\u306a\u307f\u306b\u3001Camel\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4e00\u89a7\u306f\u3053\u3093\u306a\u611f\u3058\nhttps://twitter.com/davsclaus/status/506728047928942592/photo/1\n\u5168\u3066\u306f\u65e2\u5b58\u306eOSS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30e9\u30c3\u30d7\u3057\u3066\u52d5\u3044\u3066\u3044\u308b\u3060\u3051\u3060\u3051\u3002\n\u3068\u3046\u3068\u3046170\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4ee5\u4e0a\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u4e8b\u3089\u3057\u3044\u3002\n\n# \u74b0\u5883\n\n* Tomcat7, 8\n* Java7, 8\n* Apache Camel 2.14.0\n* MySQL\n\n\n# \u5b8c\u6210\u3057\u305f\u3082\u306e\u3092\u52d5\u304b\u3057\u3066\u307f\u308b\n\n\u4f5c\u308a\u65b9\u306f\u4e0b\u306e\u307b\u3046\u306b\u66f8\u304f\u306e\u3067\u3001\u3069\u3046\u3044\u3046\u52d5\u4f5c\u7d50\u679c\u306b\u306a\u308b\u304b\u3092\u307e\u305a\u898b\u305b\u308b\u3002\n\n\n\u4e0b\u8a18\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\n\nhttp://localhost:8881/address/zip?zip=100-0000\n\n\u30a2\u30af\u30bb\u30b9\u7d50\u679c\n\n{\"id\":100000000,\"ken_id\":13,\"city_id\":13101,\"town_id\":131010000,\"zip\":\"100-0000\",\"office_flg\":false,\"delete_flg\":false,\"ken_name\":\"\u6771\u4eac\u90fd\",\"ken_furi\":\"\u30c8\u30a6\u30ad\u30e7\u30a6\u30c8\",\"city_name\":\"\u5343\u4ee3\u7530\u533a\",\"city_furi\":\"\u30c1\u30e8\u30c0\u30af\",\"town_name\":\"\",\"town_furi\":\"\u3000\",\"town_memo\":\"\uff08\u8a72\u5f53\u306a\u3057\uff09\",\"kyoto_street\":\"\",\"block_name\":\"\",\"block_furi\":\"\",\"memo\":\"\",\"office_name\":\"\",\"office_furi\":\"\",\"office_address\":\"\",\"new_id\":0}\n\n\u3068\u3044\u3046\u7d50\u679c\u304c\u5e30\u3063\u3066\u304f\u308b\u3002\n\n# Web\u30d6\u30e9\u30a6\u30b6\u3067\u72b6\u614b\u78ba\u8a8d\u3082\u3067\u304d\u308b\n\nhawtio-default-1.4.19\u306b\u95a2\u3057\u3066\u306f`\u30c7\u30d7\u30ed\u30a4`\u306e\u6240\u306b\u8a18\u8ff0\u3002\ntomcat\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308bhawtio\u3068\u3044\u3046\u30c4\u30fc\u30eb\u3067camel\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\nhttp://localhost:8080/hawtio-default-1.4.19\n\n1\u3064\u3081\u306e\u30eb\u30fc\u30c8\u5b9a\u7fa9\u3092\u78ba\u8a8d\u3002\nhttp\u53d7\u4fe1\u8fd4\u4fe1\uff08rest\uff09\u306e\u51e6\u7406\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 8.05.46.png](https://qiita-image-store.s3.amazonaws.com/0/37624/20690e1b-7429-aa6c-5fa1-d6af3895e9f6.png)\n\n2\u3064\u3081\u306e\u30eb\u30fc\u30c8\u3092\u78ba\u8a8d\u3002\n\u90f5\u4fbf\u756a\u53f7\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001\u7d50\u679c\u30ec\u30b3\u30fc\u30c9\u306e\uff11\u756a\u76ee\u3092\u8fd4\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 8.59.50.png](https://qiita-image-store.s3.amazonaws.com/0/37624/360a6e20-9824-49a5-76f7-21cf29e35c3f.png)\n\n## \u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://localhost:8881/address/zip?zip=100-0000\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.12.58.png](https://qiita-image-store.s3.amazonaws.com/0/37624/cbe62c05-434f-6241-0599-167881b9015a.png)\n\n\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u305f\u90e8\u5206\u306b`1`\u304c\u4ed8\u3044\u305f\n\n\u60c5\u5831\u304c\u306a\u3044\u30c7\u30fc\u30bf\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://localhost:8881/address/zip?zip=999-0000\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.13.35.png](https://qiita-image-store.s3.amazonaws.com/0/37624/3d926c49-0927-8444-2560-a83049f66ca5.png)\n\n\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u305f\u90e8\u5206\u306b1\u304c\u4ed8\u3044\u305f\n\u632f\u308a\u5206\u3051\u3089\u308c\u305f\u3088\u3046\u3067\u3059\u306d\n\n## \u30c8\u30ec\u30fc\u30b9\u6a5f\u80fd\u3092ON\u306b\u3057\u3066\u3001\u6d41\u901a\u30c7\u30fc\u30bf\u3092\u8ffd\u8de1\n\n`start trace`\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u6d41\u3057\u3066\u307f\u308b\u3002\n\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u305f\u7d50\u679c\u3092\u5f8c\u3067\u78ba\u8a8d\u3067\u304d\u308b\u306e\u304c\u30c8\u30ec\u30fc\u30b9\u6a5f\u80fd\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.16.33.png](https://qiita-image-store.s3.amazonaws.com/0/37624/04366938-0623-0afd-8ec8-2d7a6eb99ebe.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.30.54.png](https://qiita-image-store.s3.amazonaws.com/0/37624/bf0a6736-a09e-eda5-bcdf-854678bc1189.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.31.03.png](https://qiita-image-store.s3.amazonaws.com/0/37624/e16f687f-2b72-affd-1187-e7ef8b618ab0.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.31.22.png](https://qiita-image-store.s3.amazonaws.com/0/37624/86eb7773-0e13-2dd6-a585-de3d92e22f1d.png)\n\n### \u51e6\u7406\u901f\u5ea6\u3092\u78ba\u8a8d\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 10.16.17.png](https://qiita-image-store.s3.amazonaws.com/0/37624/3dada5aa-7f17-50fd-cf2a-d19a704bd551.png)\n\n\u30c6\u30fc\u30d6\u30eb\u306b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u70ba\u3001\u691c\u7d22\u306b\u5e73\u574720\u30df\u30ea\u79d2\u3082\u304b\u304b\u3063\u3066\u3044\u308b\u4e8b\u304c\u5206\u304b\u308b\u30fb\u30fb\u30fb\n\n\n# \u4f5c\u308a\u65b9\n\n## DB\u306e\u4f5c\u6210 - 1\u5206\n\n\u3053\u3053\u304b\u3089sql\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttp://jusyo.jp/sql/document.html\n\nmysql\u306b\u7a81\u3063\u8fbc\u3080\n\n```\nmysql -u \u30e6\u30fc\u30b6\u30fc\u540d -p \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d < \u30d5\u30a1\u30a4\u30eb\u540d\n```\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b - 1\u5206\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.29.01.png](https://qiita-image-store.s3.amazonaws.com/0/37624/11c2e12b-6f06-3afb-d417-3ea52408a944.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.29.12.png](https://qiita-image-store.s3.amazonaws.com/0/37624/c25e761c-52bc-ed3f-e982-6b0aecda0657.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.29.23.png](https://qiita-image-store.s3.amazonaws.com/0/37624/9f4c983d-01fa-4b73-427e-4524bbf88e53.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.30.06.png](https://qiita-image-store.s3.amazonaws.com/0/37624/657192a4-d5cc-2873-7846-e61c27fec504.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.31.51.png](https://qiita-image-store.s3.amazonaws.com/0/37624/de4d2aff-da21-3dae-0ebb-a782c4681e66.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.32.08.png](https://qiita-image-store.s3.amazonaws.com/0/37624/e26a90e8-c5bd-62c8-d7a6-e61494cf64ab.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.32.48.png](https://qiita-image-store.s3.amazonaws.com/0/37624/ece04329-9550-af5e-7912-50b6602bf755.png)\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-27 21.33.26.png](https://qiita-image-store.s3.amazonaws.com/0/37624/0bf46328-e266-059c-7f96-26fa17680098.png)\n\n\n## \u3044\u308d\u3044\u308d\u8a2d\u5b9a - 4\u5206\n\npom.xml\u306f\u3053\u3093\u306a\u611f\u3058\nhttps://github.com/d7kuro/post/blob/master/pom.xml\n\nweb.xml\u306f\u3044\u3064\u3082\u306e\u30b3\u30d4\u30da\nhttps://github.com/d7kuro/post/blob/master/src/main/webapp/WEB-INF/web.xml\n\nspring.xml\u306f\u3044\u3064\u3082\u306e\u30b3\u30d4\u30da\nhttps://github.com/d7kuro/post/blob/master/src/main/resources/spring.xml\n\nspring-db.xml\u306f\u3044\u3064\u3082\u306e\u30b3\u30d4\u30da\nhttps://github.com/d7kuro/post/blob/master/src/main/resources/spring-db.xml\n\nspring-camel.xml\u306frestConfiguration\u304c\u4ed8\u3044\u305f\u3002\u3053\u3053\u3067rest\u306eport\u756a\u53f7\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\n\n```src/main/resources/spring-camel.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\n\txsi:schemaLocation=\"\n       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring-2.14.0.xsd\n       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n       \">\n\n\t<!-- \u30eb\u30fc\u30c8\u306e\u81ea\u52d5\u767b\u9332\uff08\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u691c\u7d22\u3055\u308c\u308b\uff09 @Component\u304c\u5bfe\u8c61 -->\n\t<context:component-scan base-package=\"post\" />\n\n\t<!-- SQL\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5168\u5171\u901a\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u8a2d\u5b9a -->\n\t<bean id=\"sql\" class=\"org.apache.camel.component.sql.SqlComponent\">\n\t\t<property name=\"dataSource\" ref=\"ds_mysql\" />\n\t</bean>\n\n\t<!-- camel\u30eb\u30fc\u30c8 -->\n\t<camelContext xmlns=\"http://camel.apache.org/schema/spring\"\n\t\tid=\"post\">\n\t\t<contextScan />\n\t\t<restConfiguration component=\"jetty\" host=\"0.0.0.0\"\n\t\t\tport=\"8881\" bindingMode=\"json\" >\n\t\t</restConfiguration>\n\t</camelContext>\n\n</beans>\n```\n\n\n\n\n## \u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b - 3\u5206\n\n\n\u90f5\u4fbf\u756a\u53f7\u691c\u7d22\u7528\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\n\n```java:src/main/java/post/route/api/AddressRoute.java\npackage post.route.api;\n\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.component.sql.SqlConstants;\nimport org.springframework.stereotype.Component;\n\n/**\n * 000-0000\u5f62\u5f0f\u306e\u90f5\u4fbf\u756a\u53f7\u304b\u3089json\u30c7\u30fc\u30bf\u3092\u8fd4\u3059\n */\n@Component\npublic class AddressRoute extends RouteBuilder {\n\n\tpublic static final String CLASSNAME = AddressRoute.class.getSimpleName();\n\tpublic static final String IN = \"direct:in\" + CLASSNAME;\n\n\t@Override\n\tpublic void configure() throws Exception {\n\t\tfrom(IN).routeId(CLASSNAME)\n\t\t\n\t\t// SQL\u5b9f\u884c\n\t\t.to(\"sql:SELECT * FROM ad_address WHERE zip = :#zip \")\n\t\t\n\t\t// \u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u6642\u306e\u51e6\u7406\n\t\t.choice()\n\t\t.when(header(SqlConstants.SQL_ROW_COUNT).isEqualTo(0))\n\t\t\t.setBody(constant(null))\n\t\t.otherwise()\n\t\t\t// \u7d50\u679c\u30c7\u30fc\u30bf\u4f5c\u6210\uff08List<Map>\u306e0\u756a\u76ee\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u5374\uff09\n\t\t\t.setBody(simple(\"${body[0]}\"))\n\t\t.end()\n\t\t;\n\t}\n\n}\n```\n\n\n\n\nHTTP\u53d7\u4fe1\u7528\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\n\n```java\npackage post.route;\n\nimport org.apache.camel.builder.RouteBuilder;\nimport org.springframework.stereotype.Component;\n\nimport post.route.api.AddressRoute;\n\n/**\n * HTTP\u53d7\u4fe1 <br>\n * \u8fd4\u5374\u5024\u306f\u81ea\u52d5\u7684\u306bjson\u306b\u5909\u63db\u3055\u308c\u308b \n * \n */\n@Component\npublic class HttpRoute extends RouteBuilder {\n\n\t@Override\n\tpublic void configure() throws Exception {\n\t\trest(\"/address\")\n\t\t.get(\"/zip\").to(AddressRoute.IN);\n\t}\n\n}\n```\n\n## \u30d3\u30eb\u30c9\u30fb\u30c7\u30d7\u30ed\u30a4 - 1\u5206\n\n### war\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\nmaven clean package \u3092\u5b9f\u884c\ntarget/post-1.war\u304c\u3067\u304d\u308b\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 16.02.29.png](https://qiita-image-store.s3.amazonaws.com/0/37624/1d7607df-d3b3-2759-76e1-fd6129360119.png)\n\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 15.58.52.png](https://qiita-image-store.s3.amazonaws.com/0/37624/523f145c-e8ce-935c-1708-f5b900d8086c.png)\n\n\n\n### \u30d6\u30e9\u30a6\u30b6\u3067Camel\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u30fb\u64cd\u4f5c\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3092\u5165\u624b\n\nhawtio-default-1.4.19.war\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n( http://hawt.io/getstarted/index.html \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9)\n\n\n### tomcat\u306b\u30c7\u30d7\u30ed\u30a4\n\n* post-1.war\n* hawtio-default-1.4.19.war\n\n\u4e0a\u8a18\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4e0b\u8a18\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3060\u3051\ntomcat/webapps/\n\n\n\u5168\u4f53\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nhttps://github.com/d7kuro/post\n\n\n\u304a\n\u308f\n\u308a\n\n\n"}