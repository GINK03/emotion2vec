{"context": " More than 1 year has passed since last update.\n\n\u4e00\u3064\u306e\u30bf\u30b9\u30af\u306e\u4e2d\u3067\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u3092\u5207\u308a\u66ff\u3048\u305f\u3044\nfabric.api.settings\u3068\u3044\u3046\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u3092\u4f7f\u3046\u3068\u6240\u5b9a\u306e\u30bf\u30b9\u30af\u306e\u9014\u4e2d\u3067\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u3092\u5207\u308a\u66ff\u3048\u306a\u304c\u3089\u4f5c\u696d\u304c\u3067\u304d\u308b\u3002\n\u4f8b\u3048\u3070\u3001\n\ngithub\u304b\u3089pull -- www\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\nnginx, supervisord\u518d\u8d77\u52d5 -- admin\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\n\n\u3053\u306e\u3088\u3046\u306a\u30bf\u30b9\u30af\u3092\u4f5c\u308a\u305f\u3044\u3068\u304d\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3051\u3070\u826f\u3044\u3002\n\noperationwithswitchinguser.py\nfrom fabric.api as fb\nimport cuisine as cs\n\n\ndef refresh(branch=\"origin/master\", restart=\"yes\"):\n    with fb.settings(\n        cs.mode_user(),\n        user=\"www\",\n        secretkey=\"./fixtures/id_rsa\",\n    ):\n        with fb.cd(\"/home/www/repo\"):\n            cs.run(\"git fetch\")\n            cs.run(\"git checkout %s\" % branch)\n\n    if restart == \"yes\":\n        with fb.settings(\n            cs.mode_sudo(),\n            user=\"admin\",\n            secretkey=\"./fixtures/id_rsa\",\n        ):\n            cs.run(\"/etc/init.d/nginx restart\")\n            cs.run(\"/etc/init.d/supervisord restart\")\n\n\n\nsettings\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u306b\u3064\u3044\u3066\nsettings\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u306f\n\n\u53ef\u5909\u9577\u5f15\u6570(*args \u306e\u3053\u3068) : \u4ed6\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u3092\u5f15\u304d\u7d99\u3050\n\u30ad\u30fc\u30ef\u30fc\u30c9\u5f15\u6570(**kwargs \u306e\u3053\u3068): fabric.state.env\u3092\u4e00\u6642\u7684\u306b\u66f8\u304d\u63db\u3048\u308b\n\n\u3053\u306e\u3088\u3046\u306a\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u3064\u307e\u308a\u3001\nwith fb.settings(\n    cs.mode_user(),\n    user=\"www\",\n    secretkey=\"./fixtures/id_rsa\",\n):\n\n\u3053\u3046\u3044\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\n\ncuisine\u306esudo/\u901a\u5e38\u30e2\u30fc\u30c9\u5207\u308a\u66ff\u3048\u3092\u6700\u521d\u306b\u5b9f\u884c\u3002\nenv\u306e\u30e6\u30fc\u30b6\u30fc\u30fb\u516c\u958b\u9375\u3092www, ./fixtures/id_rsa\u3068\u8a2d\u5b9a\n\n\u3068\u3044\u3046\u98a8\u306b\u52d5\u304f\u3002\n\n\u611f\u60f3\n\u3082\u3063\u3068\u65e9\u304f\u3053\u306e\u4ed5\u69d8\u306b\u6c17\u3065\u3044\u3066\u3044\u308c\u3070\u3088\u304b\u3063\u305f\u3002\n\u7121\u99c4\u306b\u30e6\u30fc\u30b6\u30fc\u30b9\u30a4\u30c3\u30c1\u7528\u30c7\u30b3\u30ec\u30fc\u30bf\u3092\u81ea\u524d\u3067\u66f8\u3044\u305f\u308a\u3057\u3066\u3044\u305f\u306e\u3067\u3002\n\n# \u4e00\u3064\u306e\u30bf\u30b9\u30af\u306e\u4e2d\u3067\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u3092\u5207\u308a\u66ff\u3048\u305f\u3044\n\nfabric.api.settings\u3068\u3044\u3046\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u3092\u4f7f\u3046\u3068\u6240\u5b9a\u306e\u30bf\u30b9\u30af\u306e\u9014\u4e2d\u3067\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u3092\u5207\u308a\u66ff\u3048\u306a\u304c\u3089\u4f5c\u696d\u304c\u3067\u304d\u308b\u3002\n\n\u4f8b\u3048\u3070\u3001\n\n1. github\u304b\u3089pull -- www\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\n2. nginx, supervisord\u518d\u8d77\u52d5 -- admin\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u696d\n\n\u3053\u306e\u3088\u3046\u306a\u30bf\u30b9\u30af\u3092\u4f5c\u308a\u305f\u3044\u3068\u304d\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3051\u3070\u826f\u3044\u3002\n\n\n```python:operationwithswitchinguser.py\nfrom fabric.api as fb\nimport cuisine as cs\n\n\ndef refresh(branch=\"origin/master\", restart=\"yes\"):\n    with fb.settings(\n        cs.mode_user(),\n        user=\"www\",\n        secretkey=\"./fixtures/id_rsa\",\n    ):\n        with fb.cd(\"/home/www/repo\"):\n            cs.run(\"git fetch\")\n            cs.run(\"git checkout %s\" % branch)\n\n    if restart == \"yes\":\n        with fb.settings(\n            cs.mode_sudo(),\n            user=\"admin\",\n            secretkey=\"./fixtures/id_rsa\",\n        ):\n            cs.run(\"/etc/init.d/nginx restart\")\n            cs.run(\"/etc/init.d/supervisord restart\")\n```\n\n\n# settings\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u306b\u3064\u3044\u3066\n\nsettings\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u306f\n\n* \u53ef\u5909\u9577\u5f15\u6570(*args \u306e\u3053\u3068) : \u4ed6\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u3092\u5f15\u304d\u7d99\u3050\n* \u30ad\u30fc\u30ef\u30fc\u30c9\u5f15\u6570(**kwargs \u306e\u3053\u3068): fabric.state.env\u3092\u4e00\u6642\u7684\u306b\u66f8\u304d\u63db\u3048\u308b\n\n\u3053\u306e\u3088\u3046\u306a\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u3064\u307e\u308a\u3001\n\n```python\nwith fb.settings(\n    cs.mode_user(),\n    user=\"www\",\n    secretkey=\"./fixtures/id_rsa\",\n):\n```\n\n\u3053\u3046\u3044\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\n\n1. cuisine\u306esudo/\u901a\u5e38\u30e2\u30fc\u30c9\u5207\u308a\u66ff\u3048\u3092\u6700\u521d\u306b\u5b9f\u884c\u3002\n2. env\u306e\u30e6\u30fc\u30b6\u30fc\u30fb\u516c\u958b\u9375\u3092www, ./fixtures/id_rsa\u3068\u8a2d\u5b9a\n\n\u3068\u3044\u3046\u98a8\u306b\u52d5\u304f\u3002\n\n\n# \u611f\u60f3\n\n\u3082\u3063\u3068\u65e9\u304f\u3053\u306e\u4ed5\u69d8\u306b\u6c17\u3065\u3044\u3066\u3044\u308c\u3070\u3088\u304b\u3063\u305f\u3002\n\u7121\u99c4\u306b\u30e6\u30fc\u30b6\u30fc\u30b9\u30a4\u30c3\u30c1\u7528\u30c7\u30b3\u30ec\u30fc\u30bf\u3092\u81ea\u524d\u3067\u66f8\u3044\u305f\u308a\u3057\u3066\u3044\u305f\u306e\u3067\u3002", "tags": ["Python", "fabric"]}