{"context": "\n\n\u306f\u3058\u3081\u306b\nPharo Smalltalk\u304b\u3089Tarantool\u7d4c\u7531\u3067Lua\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3068\u3044\u3046\u8a71\u3067\u3059\u3002\n\nTarantool\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nTarantool\u3063\u3066\u4f55\u3088? \u3068\u3044\u3046\u3053\u3068\u3067\u3059\u304c\u3001DBMS\u306e\u6a5f\u80fd\u3092\u5099\u3048\u305fLua\u306e\u5b9f\u884c\u74b0\u5883\u3067\u3059\u3002\u30ed\u30b7\u30a2\u88fd\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u3063\u3066\u65e5\u672c\u3067\u306f\u307e\u3060\u30de\u30a4\u30ca\u30fc\u3067\u3059\u304c\u3001\u5411\u3053\u3046\u3067\u306f\u5927\u624b\u306e\u30cd\u30c3\u30c8\u4f01\u696d\u3067\u3042\u308bMail.Ru Group\u304c\u4f7f\u3063\u305f\u308a\u3082\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\nhttps://tarantool.org/try.html\n\u3067\u3044\u304d\u306a\u308aWeb\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u8a66\u305b\u307e\u3059\u3002\n3+4 \u3068\u6253\u3063\u3066enter\u3059\u308b\u3068\n7 \u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u306d\u3002\n\u6b63\u76f4\u3053\u3053\u3067\u8a66\u3059\u306e\u306f\u82e6\u75db\u306a\u306e\u3067\u3068\u3063\u3068\u3068\u672c\u7269\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nmacOS\u3067\u3042\u308c\u3070\nbrew install tarantool --HEAD\n\n\u3068\u3057\u307e\u3059\u3002\n\u305d\u306e\u4ed6OS\u7528\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u3053\u3061\u3089\u3067\u3059\u3002\nhttps://tarantool.org/download.html\n\nTarantool\u306e\u8d77\u52d5\n\u3067\u306f\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002\ntarantool \u3068\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u6253\u3063\u3066\u307f\u308b\u3068\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u51fa\u3066\u304d\u307e\u3059\u3002\ntarantool> 3 + 4\n7\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\ntutorial()\u3068\u6253\u3064\u3068\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u304c\u59cb\u307e\u3063\u305f\u308a\u3057\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u5272\u611b\u3057\u307e\u3059\u3002\nDBMS\u90e8\u5206\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nbox.cfg{listen = 3301}\n\n3301\u30dd\u30fc\u30c8\u3067\u63a5\u7d9a\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u6b21\u306b\u5916\u90e8\u63a5\u7d9a\u7528\u306e\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002'taran'\u3068\u3044\u3046\u30e6\u30fc\u30b6ID\u3067\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306f'talk'\u306b\u3057\u307e\u3059\u3002\nbox.schema.user.create('taran', {password = 'talk'})\n\n\u3055\u3089\u306b\u6a29\u9650\u3082\u4ed8\u4e0e\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u53d6\u308a\u3060\u3051\u3067\u306a\u304f\u3001\u30b9\u30ad\u30fc\u30de\u3084\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f5c\u6210\u3001eval\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nbox.schema.user.grant('taran', 'read,write,execute', 'universe')\n\n\u3053\u308c\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\nTarantalk\u3092\u5165\u308c\u308b\nTarantalk\u3068\u306fPharo\u7248\u306eTarantool\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308aPharo Smalltalk\u304b\u3089Tarantool\u306b\u3064\u306a\u3044\u3067\u3001Lua\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u305f\u308a\u3001DBMS\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\nTarantool\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306fConnector\u3068\u547c\u3070\u308c\u3066\u3044\u307e\u3059\u3002Smalltalk\u4ee5\u5916\u306b\u3082\u3001Java\u3084Python\u3001Erlang\u3084C#\u306a\u3069\u3044\u308d\u3044\u308d\u306a\u8a00\u8a9e\u7528\u306eConnnector\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://tarantool.org/doc/book/connectors/index.html\nTarantalk\u306fPharo\u306eCatalog Browser\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\"Tools\"->\"Catalog Browser\"\u3067\u958b\u304d\u3001\u691c\u7d22\u7a93\u306e\u3068\u3053\u308d\u306b\"taran\"\u3068\u6253\u3066\u3070\u898b\u3064\u304b\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u53f3\u30af\u30ea\u30c3\u30af\u3067\"Install stable version\"\u3092\u9078\u3076\u3068\u5165\u308a\u307e\u3059\u3002\n\n\u3082\u3057\u304f\u306fPlayground\u3092\u958b\u304d\u3001\u4ee5\u4e0b\u3092\"Do it\"\u3067\u3082\u826f\u3044\u3067\u3059\u3002\nMetacello new\n    smalltalkhubUser: 'Pharo' project: 'MetaRepoForPharo50';\n    configuration: 'Tarantalk';\n    version: #stable;\n    load.\n\n\n\u63a5\u7d9a\u306e\u78ba\u8a8d\nTarantool\u306b\u306f\u8a8d\u8a3c\u6a5f\u80fd\u304c\u3042\u308b\u306e\u3067\u3001\u63a5\u7d9a\u306e\u969b\u306b\u306f\u3001\u30db\u30b9\u30c8\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u4ed6\u3001\u30e6\u30fc\u30b6ID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092URI\u306e\u5f62\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\ntarantalk := TrTarantalk connect: 'taran:talk@localhost:3301'.\n\n\"Print it\"\u3057\u3066\u307f\u308b\u3068\u63a5\u7d9a\u72b6\u614b\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u63a5\u7d9a\u3092\u5207\u308b\u306b\u306frelease\u3092\u9001\u308a\u307e\u3059\u3002\ntarantalk release.\n\n\nTrTarantalk releaseAll\u3067\u3001\u8907\u6570\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u307e\u3068\u3081\u3066release\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u8272\u3005\u8a66\u3057\u305f\u7d50\u679c\u3001\u30a8\u30e9\u30fc\u306a\u3069\u3067Tarantool\u3078\u306e\u63a5\u7d9a\u72b6\u614b\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u6642\u306b\u4f7f\u3046\u3068\u4fbf\u5229\u3067\u3059\u3002\n\nLua\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\nDBMS\u3068\u3057\u3066\u306e\u5229\u7528\u306f\u6b21\u56de\u306b\u56de\u3059\u3068\u3057\u3066\u3001\u3053\u3053\u3067\u306fLua\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092Pharo\u304b\u3089\u5b9f\u884c\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002evalWithReturn:\u3092\u4f7f\u3044\u307e\u3059\u3002\ntarantalk := TrTarantalk connect: 'taran:talk@localhost:3301'.\n(tarantalk evalWithReturn: '3+4') value.\n\n#(7)\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002evalWithReturn:\u306f\u5fc5\u305aArray\u306e\u5f62\u3067\u623b\u308a\u5024\u304c\u8fd4\u308a\u307e\u3059\u3002\u3053\u308c\u306fLua\u306e\u95a2\u6570\u304c\u591a\u5024\u3092\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3067\u3059\u3002\n\nvalue\u3068\u9001\u3063\u3066\u3044\u308b\u306e\u306f\u3001Tarantool\u306eAPI\u304c\u975e\u540c\u671f\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002value\u306f\u975e\u540c\u671fAPI\u3092\u540c\u671f\u7684\u306b\u4f7f\u3046\u305f\u3081\u306e\u4fbf\u5229\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u5024\u304c\u8fd4\u308b\u306e\u3092\u30d6\u30ed\u30c3\u30af\u3057\u3066\u5f85\u3064\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u975e\u540c\u671f\u3068\u3057\u3066\u305d\u306e\u307e\u307e\u4f7f\u3046\u306b\u306f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092ifDone:ifFailed\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n(tarantalk evalWithReturn: '3+4')\n    ifDone: [:ret | ret inspect] ifFailed: [:err | err inspect].\n\n\"Do it\"\u3059\u308b\u3068eval\u306e\u7d42\u4e86\u6642\u306b\u5225\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u30a4\u30f3\u30b9\u30da\u30af\u30bf\u304c\u4e0a\u304c\u308a\u307e\u3059\u3002\u975e\u540c\u671fAPI\u306f\u30d6\u30ed\u30c3\u30af\u304c\u6700\u5c0f\u9650\u306b\u306a\u308b\u306e\u3067\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u304c\u4e0a\u304c\u308b\u3068\u3044\u3046\u5229\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\u304c\u3001\u8a18\u8ff0\u304c\u9762\u5012\u306a\u306e\u3067\u4ee5\u5f8c\u306f\u4e3b\u306bvalue\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u4eca\u5ea6\u306f\u4e71\u6570\u3092\u5f97\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n(tarantalk evalWithReturn: 'math.random()') value.\n\n#(0.698852465637164)\u3068\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n\u3082\u3046\u3061\u3087\u3063\u3068\u30b3\u30e9\u30dc\u611f\u3092\u51fa\u3057\u305f\u3044\u306e\u3067\u3001Lua\u304b\u3089\u306e\u5024\u3092\u3082\u3068\u306b\u3001Smalltalk\u5074\u3067\u73fe\u5728\u306e\u6642\u9593\u3092\u751f\u6210\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u5225\u306bDateAndTime now\u3067\u826f\u3044\u306e\u3067\u3059\u304c\u3042\u3048\u3066\u3084\u308a\u307e\u3059\u3002\n(tarantalk evalWithReturn: 'os.time()') valueThen: [ :val |\n    DateAndTime fromUnixTime: val first\n].\n\nvalueThen:\u306fvalue\u306e\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u3067\u3001Lua\u304b\u3089\u306e\u5024\u3092\u52a0\u5de5\u3057\u305f\u3044\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002os.time()\u306e\u7d50\u679c\u304c\u6570\u5024\u306e\u914d\u5217\u3068\u3057\u3066\u5e30\u308b\u306e\u3067first\u3067\u53d6\u308a\u51fa\u3057\u3001DataAntTime class>>fromUnixTime:\u306b\u6e21\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\"Inspect it\"\u3059\u308b\u3068\u73fe\u5728\u6642\u9593\u3068\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002Unix epoch\u304b\u3089\u306e\u79d2\u6570\u306a\u306e\u3067\u3001\u30ca\u30ce\u79d2\u306e\u90e8\u5206(nanos)\u306f\u5165\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u3061\u306a\u307f\u306bDateAndTime now\u3060\u3068\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\nLua\u5074\u306b\u5024\u3092\u6e21\u3059\n\u4eca\u5ea6\u306fSmalltalk\u5074\u304b\u3089Lua\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u5024\u3092\u6e21\u3057\u3066\u307f\u308b\u4f8b\u3067\u3059\u3002\n\u5024\u3092\u6e21\u3059\u305f\u3081\u306b\u306fevalWithReturn:arguments:\u3092\u4f7f\u3044\u307e\u3059\u3002Lua\u5074\u3082(...)\u3067\u4efb\u610f\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u66f8\u3044\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nSmalltalk\u306b\u3082\u6b63\u898f\u8868\u73fe\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u3042\u3048\u3066Lua\u306e\u6587\u5b57\u5217\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3092\u5229\u7528\u3057\u3066\u307f\u307e\u3059\u3002\n(tarantalk evalWithReturn: 'string.match(...)' arguments: {'\u3053\u3093\u306b\u3061\u306fSmalltalk\u306e\u4e16\u754c\u3078'. 'S%w+'}) value\n\n'S'\u3067\u59cb\u307e\u308balphanumeric\u306a\u90e8\u5206\u304c\u53d6\u308a\u51fa\u3055\u308c\u307e\u3059\u3002'Smalltalk'\u3067\u3059\u306d\u3002\n\nrequire\u3057\u3066\u307f\u308b\nTarantool\u306fLua\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u4ee5\u5916\u306b\u3082\u3001\u4fbf\u5229\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8272\u3005\u3068\u642d\u8f09\u3057\u3066\u3044\u308b\u306e\u3067\u3001require\u3057\u3066\u4f7f\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u642d\u8f09\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306b\u60c5\u5831\u304c\u3042\u308a\u307e\u3059\u3002\nhttps://tarantool.org/doc/reference/reference_lua/index.html\ndigest\u306emodule\u3092\u4f7f\u3044\u3001SHA-512\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u6c42\u3081\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002Pharo\u306b\u306f\u6a19\u6e96\u3067SHA-256\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001SHA-512\u306f\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3059\u3002\u3088\u3046\u3084\u304fLua\u3092\u4f7f\u3046\u610f\u5473\u304c\u51fa\u3066\u304d\u307e\u3057\u305f\u3002\n(tarantalk evalWithReturn: '(require(\"digest\").sha512_hex(...))' arguments: {'\u3053\u3093\u306b\u3061\u306fSmalltalk\u306e\u4e16\u754c\u3078'}) valueThen: [ :val |\n    val first\n].\n\n\u305d\u308c\u3089\u3057\u3044\u7d50\u679c\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\n\n\u901f\u3055\u306f?\n\u8208\u5473\u672c\u4f4d\u3067\u901f\u3055\u3092\u6e2c\u3063\u3066\u307f\u307e\u3057\u305f\u30021000\u56de\u307b\u3069\u7e70\u308a\u8fd4\u3057\u3066\u307f\u307e\u3059\u3002\n[1000 timesRepeat: [  \n(tarantalk evalWithReturn: '(require(\"digest\").sha512_hex(...))' arguments: {'\u3053\u3093\u306b\u3061\u306fSmalltalk\u306e\u4e16\u754c\u3078'}) valueThen: [ :val |\n    val first\n].\n]] timeToRun.\n\n\n2013\u5e74\u306eMacBook Air (1.7 GHz Intel Core i7)\u30670:00:00:00.334\u3068\u306a\u308a\u307e\u3057\u305f\u30021\u79d2\u9593\u30673000\u9001\u4fe1\u304f\u3089\u3044\u306f\u3053\u306a\u305b\u305d\u3046\u3067\u3059\u3002FFI\u306b\u306f\u9060\u304f\u53ca\u3073\u307e\u305b\u3093\u304c\u304a\u6c17\u8efd\u306b\u306f\u4f7f\u3048\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u307e\u3068\u3081\nTarantalk\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066Smalltalk\u304b\u3089Lua\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3068\u3044\u3046\u8a71\u3067\u3057\u305f\u3002\u8c4a\u5bcc\u306aLua\u306e\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3092Pharo Smalltalk\u304b\u3089\u5229\u7528\u3067\u304d\u308b\u3068\u3044\u3046\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\nDBMS\u3068\u3057\u3066\u3082\u9762\u767d\u3044\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u306f\u6b21\u56de\u4ee5\u964d\u306b\u7d39\u4ecb\u3057\u307e\u3059\u3002\n# \u306f\u3058\u3081\u306b\n\nPharo Smalltalk\u304b\u3089Tarantool\u7d4c\u7531\u3067Lua\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3068\u3044\u3046\u8a71\u3067\u3059\u3002\n\n# Tarantool\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n[Tarantool](https://tarantool.org)\u3063\u3066\u4f55\u3088? \u3068\u3044\u3046\u3053\u3068\u3067\u3059\u304c\u3001DBMS\u306e\u6a5f\u80fd\u3092\u5099\u3048\u305fLua\u306e\u5b9f\u884c\u74b0\u5883\u3067\u3059\u3002\u30ed\u30b7\u30a2\u88fd\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u3063\u3066\u65e5\u672c\u3067\u306f\u307e\u3060\u30de\u30a4\u30ca\u30fc\u3067\u3059\u304c\u3001\u5411\u3053\u3046\u3067\u306f\u5927\u624b\u306e\u30cd\u30c3\u30c8\u4f01\u696d\u3067\u3042\u308bMail.Ru Group\u304c\u4f7f\u3063\u305f\u308a\u3082\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n<https://tarantool.org/try.html>\n\u3067\u3044\u304d\u306a\u308aWeb\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u8a66\u305b\u307e\u3059\u3002\n\n```3+4``` \u3068\u6253\u3063\u3066enter\u3059\u308b\u3068\n\n```7``` \u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u306d\u3002\n\n\u6b63\u76f4\u3053\u3053\u3067\u8a66\u3059\u306e\u306f\u82e6\u75db\u306a\u306e\u3067\u3068\u3063\u3068\u3068\u672c\u7269\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nmacOS\u3067\u3042\u308c\u3070\n\n```\nbrew install tarantool --HEAD\n```\n\n\u3068\u3057\u307e\u3059\u3002\n\n\u305d\u306e\u4ed6OS\u7528\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n\n<https://tarantool.org/download.html>\n\n# Tarantool\u306e\u8d77\u52d5\n\n\u3067\u306f\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002\n\n`tarantool` \u3068\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u6253\u3063\u3066\u307f\u308b\u3068\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u51fa\u3066\u304d\u307e\u3059\u3002\n\n```tarantool> 3 + 4```\n\n`7`\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n![tarantool-console.png](https://qiita-image-store.s3.amazonaws.com/0/61787/30d52263-c21a-c40a-048b-f23eade822fa.png)\n\n\n`tutorial()`\u3068\u6253\u3064\u3068\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u304c\u59cb\u307e\u3063\u305f\u308a\u3057\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n\nDBMS\u90e8\u5206\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```lua\nbox.cfg{listen = 3301}\n```\n\n3301\u30dd\u30fc\u30c8\u3067\u63a5\u7d9a\u3092\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n![tarantool-listen.png](https://qiita-image-store.s3.amazonaws.com/0/61787/987f8f49-cffb-ce19-7c09-0915c237e268.png)\n\n\u6b21\u306b\u5916\u90e8\u63a5\u7d9a\u7528\u306e\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002'taran'\u3068\u3044\u3046\u30e6\u30fc\u30b6ID\u3067\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306f'talk'\u306b\u3057\u307e\u3059\u3002\n\n```lua\nbox.schema.user.create('taran', {password = 'talk'})\n```\n\n\u3055\u3089\u306b\u6a29\u9650\u3082\u4ed8\u4e0e\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u53d6\u308a\u3060\u3051\u3067\u306a\u304f\u3001\u30b9\u30ad\u30fc\u30de\u3084\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f5c\u6210\u3001eval\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```lua\nbox.schema.user.grant('taran', 'read,write,execute', 'universe')\n```\n\n\u3053\u308c\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\n# Tarantalk\u3092\u5165\u308c\u308b\n\n[Tarantalk](http://smalltalkhub.com/#!/~MasashiUmezawa/Tarantalk)\u3068\u306fPharo\u7248\u306eTarantool\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308aPharo Smalltalk\u304b\u3089Tarantool\u306b\u3064\u306a\u3044\u3067\u3001Lua\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u305f\u308a\u3001DBMS\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\nTarantool\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306fConnector\u3068\u547c\u3070\u308c\u3066\u3044\u307e\u3059\u3002Smalltalk\u4ee5\u5916\u306b\u3082\u3001Java\u3084Python\u3001Erlang\u3084C#\u306a\u3069\u3044\u308d\u3044\u308d\u306a\u8a00\u8a9e\u7528\u306eConnnector\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n<https://tarantool.org/doc/book/connectors/index.html>\n\nTarantalk\u306fPharo\u306eCatalog Browser\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\"Tools\"->\"Catalog Browser\"\u3067\u958b\u304d\u3001\u691c\u7d22\u7a93\u306e\u3068\u3053\u308d\u306b\"taran\"\u3068\u6253\u3066\u3070\u898b\u3064\u304b\u308b\u3067\u3057\u3087\u3046\u3002\n\n![catalog-browser.png](https://qiita-image-store.s3.amazonaws.com/0/61787/f3f17bff-acba-50bb-e352-e8ae09c8b86f.png)\n\n\u53f3\u30af\u30ea\u30c3\u30af\u3067\"Install stable version\"\u3092\u9078\u3076\u3068\u5165\u308a\u307e\u3059\u3002\n\n![install-stable-version.png](https://qiita-image-store.s3.amazonaws.com/0/61787/d5bea8b9-3438-a9a7-5cec-d54169359169.png)\n\n\u3082\u3057\u304f\u306fPlayground\u3092\u958b\u304d\u3001\u4ee5\u4e0b\u3092\"Do it\"\u3067\u3082\u826f\u3044\u3067\u3059\u3002\n\n```smalltalk\nMetacello new\n\tsmalltalkhubUser: 'Pharo' project: 'MetaRepoForPharo50';\n\tconfiguration: 'Tarantalk';\n\tversion: #stable;\n\tload.\n```\n\n# \u63a5\u7d9a\u306e\u78ba\u8a8d\nTarantool\u306b\u306f\u8a8d\u8a3c\u6a5f\u80fd\u304c\u3042\u308b\u306e\u3067\u3001\u63a5\u7d9a\u306e\u969b\u306b\u306f\u3001\u30db\u30b9\u30c8\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u4ed6\u3001\u30e6\u30fc\u30b6ID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092URI\u306e\u5f62\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```smalltalk\ntarantalk := TrTarantalk connect: 'taran:talk@localhost:3301'.\n```\n\n\"Print it\"\u3057\u3066\u307f\u308b\u3068\u63a5\u7d9a\u72b6\u614b\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n![tarantool-connected.png](https://qiita-image-store.s3.amazonaws.com/0/61787/4e438bc0-1077-cc3f-fa66-22fcf35ee37d.png)\n\n\u63a5\u7d9a\u3092\u5207\u308b\u306b\u306f`release`\u3092\u9001\u308a\u307e\u3059\u3002\n\n```smalltalk\ntarantalk release.\n```\n\n![tarantool-released.png](https://qiita-image-store.s3.amazonaws.com/0/61787/c9c5feaf-e432-0f2b-bf1a-eb96f4fa3589.png)\n\n\n`TrTarantalk releaseAll`\u3067\u3001\u8907\u6570\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u307e\u3068\u3081\u3066`release`\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u8272\u3005\u8a66\u3057\u305f\u7d50\u679c\u3001\u30a8\u30e9\u30fc\u306a\u3069\u3067Tarantool\u3078\u306e\u63a5\u7d9a\u72b6\u614b\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u6642\u306b\u4f7f\u3046\u3068\u4fbf\u5229\u3067\u3059\u3002\n\n# Lua\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\n\nDBMS\u3068\u3057\u3066\u306e\u5229\u7528\u306f\u6b21\u56de\u306b\u56de\u3059\u3068\u3057\u3066\u3001\u3053\u3053\u3067\u306fLua\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092Pharo\u304b\u3089\u5b9f\u884c\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002```evalWithReturn:```\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```smalltalk\ntarantalk := TrTarantalk connect: 'taran:talk@localhost:3301'.\n(tarantalk evalWithReturn: '3+4') value.\n```\n\n`#(7)`\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002`evalWithReturn:`\u306f\u5fc5\u305aArray\u306e\u5f62\u3067\u623b\u308a\u5024\u304c\u8fd4\u308a\u307e\u3059\u3002\u3053\u308c\u306fLua\u306e\u95a2\u6570\u304c\u591a\u5024\u3092\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3067\u3059\u3002\n\n![return7.png](https://qiita-image-store.s3.amazonaws.com/0/61787/c172d044-246c-3b76-eb1d-855ac99d58dc.png)\n\n`value`\u3068\u9001\u3063\u3066\u3044\u308b\u306e\u306f\u3001Tarantool\u306eAPI\u304c\u975e\u540c\u671f\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002`value`\u306f\u975e\u540c\u671fAPI\u3092\u540c\u671f\u7684\u306b\u4f7f\u3046\u305f\u3081\u306e\u4fbf\u5229\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u5024\u304c\u8fd4\u308b\u306e\u3092\u30d6\u30ed\u30c3\u30af\u3057\u3066\u5f85\u3064\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u975e\u540c\u671f\u3068\u3057\u3066\u305d\u306e\u307e\u307e\u4f7f\u3046\u306b\u306f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092`ifDone:ifFailed`\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```smalltalk\n(tarantalk evalWithReturn: '3+4')\n\tifDone: [:ret | ret inspect] ifFailed: [:err | err inspect].\n```\n\n\"Do it\"\u3059\u308b\u3068eval\u306e\u7d42\u4e86\u6642\u306b\u5225\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u30a4\u30f3\u30b9\u30da\u30af\u30bf\u304c\u4e0a\u304c\u308a\u307e\u3059\u3002\u975e\u540c\u671fAPI\u306f\u30d6\u30ed\u30c3\u30af\u304c\u6700\u5c0f\u9650\u306b\u306a\u308b\u306e\u3067\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u304c\u4e0a\u304c\u308b\u3068\u3044\u3046\u5229\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\u304c\u3001\u8a18\u8ff0\u304c\u9762\u5012\u306a\u306e\u3067\u4ee5\u5f8c\u306f\u4e3b\u306b`value`\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n![inspect7.png](https://qiita-image-store.s3.amazonaws.com/0/61787/c6b5dbf6-ecc1-cb58-cc4d-78a4671dde9b.png)\n\n\u4eca\u5ea6\u306f\u4e71\u6570\u3092\u5f97\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```smalltalk\n(tarantalk evalWithReturn: 'math.random()') value.\n```\n\n`#(0.698852465637164)`\u3068\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n![rand.png](https://qiita-image-store.s3.amazonaws.com/0/61787/eb914e79-49f9-d652-bd24-aaaaf0445b31.png)\n\n\u3082\u3046\u3061\u3087\u3063\u3068\u30b3\u30e9\u30dc\u611f\u3092\u51fa\u3057\u305f\u3044\u306e\u3067\u3001Lua\u304b\u3089\u306e\u5024\u3092\u3082\u3068\u306b\u3001Smalltalk\u5074\u3067\u73fe\u5728\u306e\u6642\u9593\u3092\u751f\u6210\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u5225\u306b`DateAndTime now`\u3067\u826f\u3044\u306e\u3067\u3059\u304c\u3042\u3048\u3066\u3084\u308a\u307e\u3059\u3002\n\n```smalltalk\n(tarantalk evalWithReturn: 'os.time()') valueThen: [ :val |\n\tDateAndTime fromUnixTime: val first\n].\n```\n\n`valueThen:`\u306f`value`\u306e\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u3067\u3001Lua\u304b\u3089\u306e\u5024\u3092\u52a0\u5de5\u3057\u305f\u3044\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002`os.time()`\u306e\u7d50\u679c\u304c\u6570\u5024\u306e\u914d\u5217\u3068\u3057\u3066\u5e30\u308b\u306e\u3067`first`\u3067\u53d6\u308a\u51fa\u3057\u3001`DataAntTime class>>fromUnixTime:`\u306b\u6e21\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\"Inspect it\"\u3059\u308b\u3068\u73fe\u5728\u6642\u9593\u3068\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002Unix epoch\u304b\u3089\u306e\u79d2\u6570\u306a\u306e\u3067\u3001\u30ca\u30ce\u79d2\u306e\u90e8\u5206(`nanos`)\u306f\u5165\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\n![inspect-lua-dateandtime.png](https://qiita-image-store.s3.amazonaws.com/0/61787/56b01b13-ff52-264e-58b5-075730f97dfc.png)\n\n\n\u3061\u306a\u307f\u306b`DateAndTime now`\u3060\u3068\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n![inspect-st-dateandtime.png](https://qiita-image-store.s3.amazonaws.com/0/61787/4e2e81d0-e27e-360d-850f-b0727a7acaff.png)\n\n# Lua\u5074\u306b\u5024\u3092\u6e21\u3059\n\n\u4eca\u5ea6\u306fSmalltalk\u5074\u304b\u3089Lua\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u5024\u3092\u6e21\u3057\u3066\u307f\u308b\u4f8b\u3067\u3059\u3002\n\u5024\u3092\u6e21\u3059\u305f\u3081\u306b\u306f`evalWithReturn:arguments:`\u3092\u4f7f\u3044\u307e\u3059\u3002Lua\u5074\u3082`(...)`\u3067\u4efb\u610f\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u66f8\u3044\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nSmalltalk\u306b\u3082\u6b63\u898f\u8868\u73fe\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u3042\u3048\u3066Lua\u306e\u6587\u5b57\u5217\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3092\u5229\u7528\u3057\u3066\u307f\u307e\u3059\u3002\n\n```smalltalk\n(tarantalk evalWithReturn: 'string.match(...)' arguments: {'\u3053\u3093\u306b\u3061\u306fSmalltalk\u306e\u4e16\u754c\u3078'. 'S%w+'}) value\n```\n\n`'S'`\u3067\u59cb\u307e\u308balphanumeric\u306a\u90e8\u5206\u304c\u53d6\u308a\u51fa\u3055\u308c\u307e\u3059\u3002`'Smalltalk'`\u3067\u3059\u306d\u3002\n\n# require\u3057\u3066\u307f\u308b\n\nTarantool\u306fLua\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u4ee5\u5916\u306b\u3082\u3001\u4fbf\u5229\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8272\u3005\u3068\u642d\u8f09\u3057\u3066\u3044\u308b\u306e\u3067\u3001require\u3057\u3066\u4f7f\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u642d\u8f09\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306b\u60c5\u5831\u304c\u3042\u308a\u307e\u3059\u3002\n<https://tarantool.org/doc/reference/reference_lua/index.html>\n\ndigest\u306emodule\u3092\u4f7f\u3044\u3001SHA-512\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u6c42\u3081\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002Pharo\u306b\u306f\u6a19\u6e96\u3067SHA-256\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001SHA-512\u306f\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3059\u3002\u3088\u3046\u3084\u304fLua\u3092\u4f7f\u3046\u610f\u5473\u304c\u51fa\u3066\u304d\u307e\u3057\u305f\u3002:slight_smile:\n\n```smalltalk\n(tarantalk evalWithReturn: '(require(\"digest\").sha512_hex(...))' arguments: {'\u3053\u3093\u306b\u3061\u306fSmalltalk\u306e\u4e16\u754c\u3078'}) valueThen: [ :val |\n\tval first\n].\n```\n\n\u305d\u308c\u3089\u3057\u3044\u7d50\u679c\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\n![sha512.png](https://qiita-image-store.s3.amazonaws.com/0/61787/12766f91-67be-bbd4-25e8-27f93e176595.png)\n\n# \u901f\u3055\u306f?\n\n\u8208\u5473\u672c\u4f4d\u3067\u901f\u3055\u3092\u6e2c\u3063\u3066\u307f\u307e\u3057\u305f\u30021000\u56de\u307b\u3069\u7e70\u308a\u8fd4\u3057\u3066\u307f\u307e\u3059\u3002\n\n```smalltalk\n[1000 timesRepeat: [  \n(tarantalk evalWithReturn: '(require(\"digest\").sha512_hex(...))' arguments: {'\u3053\u3093\u306b\u3061\u306fSmalltalk\u306e\u4e16\u754c\u3078'}) valueThen: [ :val |\n\tval first\n].\n]] timeToRun.\n```\n\n![perf.png](https://qiita-image-store.s3.amazonaws.com/0/61787/c0bfb136-3182-f8f1-8e43-b24969f82644.png)\n\n\n2013\u5e74\u306eMacBook Air (1.7 GHz Intel Core i7)\u3067`0:00:00:00.334`\u3068\u306a\u308a\u307e\u3057\u305f\u30021\u79d2\u9593\u30673000\u9001\u4fe1\u304f\u3089\u3044\u306f\u3053\u306a\u305b\u305d\u3046\u3067\u3059\u3002FFI\u306b\u306f\u9060\u304f\u53ca\u3073\u307e\u305b\u3093\u304c\u304a\u6c17\u8efd\u306b\u306f\u4f7f\u3048\u308b\u3067\u3057\u3087\u3046\u3002\n\n# \u307e\u3068\u3081\nTarantalk\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066Smalltalk\u304b\u3089Lua\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3068\u3044\u3046\u8a71\u3067\u3057\u305f\u3002\u8c4a\u5bcc\u306aLua\u306e\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3092Pharo Smalltalk\u304b\u3089\u5229\u7528\u3067\u304d\u308b\u3068\u3044\u3046\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\nDBMS\u3068\u3057\u3066\u3082\u9762\u767d\u3044\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u306f\u6b21\u56de\u4ee5\u964d\u306b\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n", "tags": ["Smalltalk", "Lua", "Tarantool"]}