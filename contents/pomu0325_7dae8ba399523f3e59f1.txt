{"tags": ["Salesforce", "Objective-C"], "context": " More than 1 year has passed since last update.Spring 2014\u6642\u70b9\u3067\u306f\u307e\u3060pilot\u306a\u306e\u3067DE\u74b0\u5883\u3067\u3057\u304b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u304c\u3001Apex\u304b\u3089\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u9001\u308bAPI\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u8a3c\u660e\u66f8\u306e\u6e96\u5099\u3068\u767b\u9332\n\u3053\u3053\u3067\u306f\u8a73\u3057\u304f\u306f\u8aac\u660e\u3057\u307e\u305b\u3093\u304c\u3001\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306bApple\u304b\u3089\u767a\u884c\u3055\u308c\u308b\u8a3c\u660e\u66f8\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u3053\u3061\u3089\u306a\u3069\u3092\u53c2\u7167\u2192Apple Push Notification Service\u3092\u4f7f\u3063\u3066iOS\u306b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u8a3c\u660e\u66f8\u306e\u6e96\u5099\u65b9\u6cd5\n\u53d6\u5f97\u3057\u305f\u8a3c\u660e\u66f8\u3092\u3001\u300c\u4f5c\u6210 > \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 > \u63a5\u7d9a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u304b\u3089\u3001\u300c\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u300d\u3067\u767b\u9332\u3057\u307e\u3059\u3002\n\n\n\u30a2\u30d7\u30ea\u5074\u306e\u5b9f\u88c5\n\u30a2\u30d7\u30ea\u8d77\u52d5\u6642\u306b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u6709\u52b9\u5316\u3057\u3001\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306edeviceToken\u304c\u767a\u884c\u3055\u308c\u305f\u3089\u5f8c\u3067\u8a8d\u8a3c\u5f8c\u306b\u4f7f\u3046\u306e\u3067\u4fdd\u6301\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nSEAppDelegate.m\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n{\n    // \u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u6709\u52b9\u5316\n    [application registerForRemoteNotificationTypes:(UIRemoteNotificationTypeNewsstandContentAvailability | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];\n\n    // Override point for customization after application launch.\n    return YES;\n}\n\n-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken\n{\n    NSLog(@\"token=%@\", deviceToken);\n    // \u8a8d\u8a3c\u5f8c\u306b\u7d10\u3065\u3051\u308b\u306e\u3067token\u3092\u4fdd\u6301\n    self.deviceToken =  [[[deviceToken description] stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@\"<>\"]] stringByReplacingOccurrencesOfString:@\" \" withString:@\"\"];\n}\n\n\n\u7aef\u672b\u6bce\u306b\u767a\u884c\u3055\u308c\u308b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306etoken\u3092\u3001\u30b5\u30fc\u30d0\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n\u203bMobileSDK\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306edeviceToken\u767b\u9332\u65b9\u6cd5\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u304c\u306a\u3044\u306e\u3067MobileSDK\u306e\u30bd\u30fc\u30b9\u3092\u8ffd\u3063\u304b\u3051\u3066\u89e3\u6790\n\nSEDetailViewController.m\n-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType\n{\n    // \u3010\u3053\u3053\u307e\u3067\u8a8d\u8a3c\u7528\u306e\u30b3\u30fc\u30c9\u7701\u7565\u3011\n\n    // \u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306etoken\u3092\u767b\u9332\n    SEAppDelegate *app = (SEAppDelegate *)[UIApplication sharedApplication].delegate;\n\n    NSString *url = [authInfo[@\"instance_url\"] stringByAppendingString:@\"/services/data/v29.0/sobjects/MobilePushServiceDevice\"];\n    NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:url]];\n    req.HTTPMethod = @\"POST\";\n    req.HTTPBody = [NSJSONSerialization dataWithJSONObject:@{@\"ConnectionToken\":app.deviceToken, @\"ServiceType\":@\"Apple\"} options:0 error:nil];\n    [req setValue:@\"application/json\" forHTTPHeaderField:@\"Content-Type\"];\n\n    NSURLSessionDataTask *registerToken = [session dataTaskWithRequest:req completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {\n        if (error) {\n            NSLog(@\"ERROR: %@\", error.localizedDescription);\n        }\n    }];\n    [registerToken resume];\n\n    return NO;\n}\n\n\n\n\u30c6\u30b9\u30c8\u9001\u4fe1\n\u958b\u767a\u8005\u30b3\u30f3\u30bd\u30fc\u30eb\u306eExecute Anonymous\u304b\u3089\u30c6\u30b9\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u307f\u307e\u3059\u3002\n\u203b\u30e6\u30fc\u30b6ID\u6307\u5b9a\u3067\u9001\u308b\u306e\u3067\u3001\u30a2\u30d7\u30ea\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u306e\u3068\u540c\u3058\u30e6\u30fc\u30b6\u3067\u5b9f\u884c\u3057\u3066UserInfo.getUserId()\u3067\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\nMap<String, Object> payload\n    = Messaging.PushNotificationPayload.apple('Hello iPhone!', '', null, null);\n\nMessaging.PushNotification msg = new Messaging.PushNotification();\n\nmsg.setPayload(payload);\n\n// 1\u3064\u76ee\u306e\u5f15\u6570\u306f\u767b\u9332\u3057\u305f\u63a5\u7d9a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\nmsg.send('SalesforceExample', new Set<String>{UserInfo.getUserId()});\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001\u901a\u77e5\u304c\u51fa\u307e\u3059\uff01\n\n\n\u53c2\u8003\n\nMobile Push Notification Service (PILOT) API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8(\u82f1\u8a9ePDF)\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u5168\u4f53\u306f\u3053\u3061\u3089\n\nSpring 2014\u6642\u70b9\u3067\u306f\u307e\u3060pilot\u306a\u306e\u3067DE\u74b0\u5883\u3067\u3057\u304b\u52d5\u4f5c\u3057\u307e\u305b\u3093\u304c\u3001Apex\u304b\u3089\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u9001\u308bAPI\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n# \u8a3c\u660e\u66f8\u306e\u6e96\u5099\u3068\u767b\u9332\n\u3053\u3053\u3067\u306f\u8a73\u3057\u304f\u306f\u8aac\u660e\u3057\u307e\u305b\u3093\u304c\u3001\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306bApple\u304b\u3089\u767a\u884c\u3055\u308c\u308b\u8a3c\u660e\u66f8\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u3053\u3061\u3089\u306a\u3069\u3092\u53c2\u7167\u2192[Apple Push Notification Service\u3092\u4f7f\u3063\u3066iOS\u306b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u8a3c\u660e\u66f8\u306e\u6e96\u5099\u65b9\u6cd5](http://d.hatena.ne.jp/samril/20130902/1378198909)\n\n\u53d6\u5f97\u3057\u305f\u8a3c\u660e\u66f8\u3092\u3001\u300c\u4f5c\u6210 > \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 > \u63a5\u7d9a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u304b\u3089\u3001\u300c\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u300d\u3067\u767b\u9332\u3057\u307e\u3059\u3002\n![\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a](https://qiita-image-store.s3.amazonaws.com/0/9490/8cce85cc-dba6-d70e-09a3-058443d48c4c.png)\n\n# \u30a2\u30d7\u30ea\u5074\u306e\u5b9f\u88c5\n\u30a2\u30d7\u30ea\u8d77\u52d5\u6642\u306b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u6709\u52b9\u5316\u3057\u3001\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306edeviceToken\u304c\u767a\u884c\u3055\u308c\u305f\u3089\u5f8c\u3067\u8a8d\u8a3c\u5f8c\u306b\u4f7f\u3046\u306e\u3067\u4fdd\u6301\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```objc:SEAppDelegate.m\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n{\n    // \u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3092\u6709\u52b9\u5316\n    [application registerForRemoteNotificationTypes:(UIRemoteNotificationTypeNewsstandContentAvailability | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];\n    \n    // Override point for customization after application launch.\n    return YES;\n}\n\n-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken\n{\n    NSLog(@\"token=%@\", deviceToken);\n    // \u8a8d\u8a3c\u5f8c\u306b\u7d10\u3065\u3051\u308b\u306e\u3067token\u3092\u4fdd\u6301\n    self.deviceToken =  [[[deviceToken description] stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@\"<>\"]] stringByReplacingOccurrencesOfString:@\" \" withString:@\"\"];\n}\n```\n\n\u7aef\u672b\u6bce\u306b\u767a\u884c\u3055\u308c\u308b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306etoken\u3092\u3001\u30b5\u30fc\u30d0\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n\u203bMobileSDK\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306edeviceToken\u767b\u9332\u65b9\u6cd5\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u304c\u306a\u3044\u306e\u3067MobileSDK\u306e\u30bd\u30fc\u30b9\u3092\u8ffd\u3063\u304b\u3051\u3066\u89e3\u6790\n\n```objc:SEDetailViewController.m\n-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType\n{\n    // \u3010\u3053\u3053\u307e\u3067\u8a8d\u8a3c\u7528\u306e\u30b3\u30fc\u30c9\u7701\u7565\u3011\n\n    // \u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u7528\u306etoken\u3092\u767b\u9332\n    SEAppDelegate *app = (SEAppDelegate *)[UIApplication sharedApplication].delegate;\n    \n    NSString *url = [authInfo[@\"instance_url\"] stringByAppendingString:@\"/services/data/v29.0/sobjects/MobilePushServiceDevice\"];\n    NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:url]];\n    req.HTTPMethod = @\"POST\";\n    req.HTTPBody = [NSJSONSerialization dataWithJSONObject:@{@\"ConnectionToken\":app.deviceToken, @\"ServiceType\":@\"Apple\"} options:0 error:nil];\n    [req setValue:@\"application/json\" forHTTPHeaderField:@\"Content-Type\"];\n    \n    NSURLSessionDataTask *registerToken = [session dataTaskWithRequest:req completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {\n        if (error) {\n            NSLog(@\"ERROR: %@\", error.localizedDescription);\n        }\n    }];\n    [registerToken resume];\n    \n    return NO;\n}\n```\n\n# \u30c6\u30b9\u30c8\u9001\u4fe1\n\n\u958b\u767a\u8005\u30b3\u30f3\u30bd\u30fc\u30eb\u306eExecute Anonymous\u304b\u3089\u30c6\u30b9\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u307f\u307e\u3059\u3002\n\u203b\u30e6\u30fc\u30b6ID\u6307\u5b9a\u3067\u9001\u308b\u306e\u3067\u3001\u30a2\u30d7\u30ea\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u306e\u3068\u540c\u3058\u30e6\u30fc\u30b6\u3067\u5b9f\u884c\u3057\u3066`UserInfo.getUserId()`\u3067\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\n```java\nMap<String, Object> payload\n    = Messaging.PushNotificationPayload.apple('Hello iPhone!', '', null, null);\n\nMessaging.PushNotification msg = new Messaging.PushNotification();\n\nmsg.setPayload(payload);\n\n// 1\u3064\u76ee\u306e\u5f15\u6570\u306f\u767b\u9332\u3057\u305f\u63a5\u7d9a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\nmsg.send('SalesforceExample', new Set<String>{UserInfo.getUserId()});\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001\u901a\u77e5\u304c\u51fa\u307e\u3059\uff01\n![\u30d7\u30c3\u30b7\u30e5\u901a\u77e5](https://qiita-image-store.s3.amazonaws.com/0/9490/50ccaafc-045f-23d6-e34c-61362ffceb2b.jpeg)\n\n## \u53c2\u8003\n\n- [Mobile Push Notification Service (PILOT) API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8(\u82f1\u8a9ePDF)](http://downloads.salesforce.com/salesforce_mobile_push_notification_service.pdf)\n\n- [\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u5168\u4f53\u306f\u3053\u3061\u3089](https://github.com/pomu0325/SalesforceMobileExample/tree/17afc253b4d340b80f7c1a29b3512ea02547c502)"}