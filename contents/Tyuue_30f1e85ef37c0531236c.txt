{"context": " More than 1 year has passed since last update.\ngemstring.rb\n# \u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u304b\u3089\u30d1\u30bf\u30fc\u30f3\u3092\u5f8b\u5100\u306b\u6d17\u3044\u51fa\u3057\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n# \u305f\u3060\u3057\u3001\u307e\u3068\u3082\u306b\u3084\u308b\u3068\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u6700\u9069\u5316\u3092\u884c\u3046\n# \u30fb\u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u304c\u540c\u3058\u3082\u306e\u306f\u30d1\u30bf\u30fc\u30f3\u6570\u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u518d\u5229\u7528\u3059\u308b\n# \u30fb\u540c\u3058\u6587\u5b57\u304c\u9023\u7d9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u4e38\u3054\u3068\u98db\u3070\u3059\uff08\u91cd\u8907\u6392\u9664\u306e\u305f\u3081\uff09\n# \u4e00\u5ea6\u30ab\u30a6\u30f3\u30c8\u3092\u51fa\u529b\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u30e1\u30e2\u6570\u306f2\u5343\u6570\u767e\u7a0b\u5ea6\u3060\u3063\u305f\n\ndef gemstring(str, target)\n    out = \"\"\n    cash = {} \n    count = gemstring_main(str, target, out, cash)\n    return count\nend\n\ndef gemstring_main(str, target, out, cash)\n    pres = \"\"\n    count = 0\n\n    # \u6587\u5b57\u5217\u306e\u9577\u3055\u304c0\u306a\u3089\u7d42\u4e86\n    if str.length == 0\n        return [count, false]\n    end\n\n    array = str.split(\"\")\n    # \u982d\u304b\u3089\u9806\u306b1\u6587\u5b57\u305a\u3064\u53d6\u5f97\u3059\u308b\n    array.each_with_index do |s, idx|\n        # \u540c\u3058\u6587\u5b57\u304c\u7d9a\u3044\u305f\u5834\u5408\u306f\u30b9\u30ad\u30c3\u30d7\n        if s == pres\n            next\n        end\n\n        # \u524d\u56de\u5206\u306e\u6587\u5b57\u3092\u66f4\u65b0\n        pres = s\n\n        # \u30ab\u30a6\u30f3\u30c8\u306b+1\u3059\u308b\n        count = count + 1\n\n        # \u51fa\u529b\u6587\u5b57\u5217\u3092\u751f\u6210\n        newOut = out + s\n\n        # \u76ee\u6a19\u306e\u6587\u5b57\u5217\u306a\u3089\u30ab\u30a6\u30f3\u30c8\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n        if newOut == target\n            return [count, true]\n        end\n\n        # \u6b8b\u3063\u305f\u6587\u5b57\u3092\u6e21\u3057\u3066\u518d\u5e30\u3059\u308b\n        newArray = str.split(\"\")\n        newArray.delete_at(idx)\n        newStr = newArray.join(\"\")\n\n        # \u76ee\u6a19\u306e\u6587\u5b57\u5217\u306e\u524d\u65b9\u4e00\u81f4\u3057\u3066\u3044\u305f\u3089\u30e1\u30e2\u306f\u4f7f\u308f\u306a\u3044\n        if cash.has_key? newStr and out != target[0, out.length]\n        then\n            # \u30e1\u30e2\u304b\u3089\u53d6\u5f97\n            result = cash[newStr]\n            count = count + result\n        else\n            # \u30e1\u30e2\u306b\u306a\u3044\u5834\u5408\u306f\u518d\u5e30\u7684\u306b\u30ab\u30a6\u30f3\u30c8\u3092\u53d6\u5f97\n            (result, flg) = gemstring_main(newStr, target, newOut, cash)\n            count = count + result\n            if flg\n                # \u76ee\u6a19\u306b\u8fbf\u308a\u7740\u3044\u305f\u5834\u5408\u306f\u51e6\u7406\u3092\u5207\u308a\u4e0a\u3052\u308b\n                return [count, true]\n            end\n        end\n    end\n\n    # \u4eca\u56de\u306e\u7d50\u679c\u3092\u30e1\u30e2\n    cash[str] = count\n    return [count, false]\nend\n\n# \u3053\u3093\u306a\u304b\u3093\u3058\u3067\u4f7f\u3046\n#gems = ARGV[0]\n#target = ARGV[1]\n\n#(result, flg) = gemstring(gems, target)\n#if flg\n#   puts \"\u76ee\u6a19\u5230\u9054 total = [%d]\" % result\n#else\n#   puts \"\u305d\u306e\u6587\u5b57\u5217\u306b\u306f\u5230\u9054\u3057\u307e\u305b\u3093\"\n#end\n\n\n\u79c1\u306e\u7b54\u3048\uff1a5578864439\n\u5927\u4f530.17\u79d2\u304f\u3089\u3044\nRuby\u306f\u304b\u3058\u3063\u305f\u3060\u3051\u306a\u306e\u3067\u8272\u3005\u304a\u304b\u3057\u3044\u304b\u3082\u3002\n\u518d\u5e30\u306f\u4e00\u6642\u671f\u30b4\u30ea\u30b4\u30ea\u3084\u3063\u3066\u305f\u306e\u3067\u305d\u308c\u3092\u601d\u3044\u51fa\u3057\u306a\u304c\u3089\u3002\n\n```ruby:gemstring.rb\n# \u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u304b\u3089\u30d1\u30bf\u30fc\u30f3\u3092\u5f8b\u5100\u306b\u6d17\u3044\u51fa\u3057\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n# \u305f\u3060\u3057\u3001\u307e\u3068\u3082\u306b\u3084\u308b\u3068\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u6700\u9069\u5316\u3092\u884c\u3046\n# \u30fb\u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u304c\u540c\u3058\u3082\u306e\u306f\u30d1\u30bf\u30fc\u30f3\u6570\u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u518d\u5229\u7528\u3059\u308b\n# \u30fb\u540c\u3058\u6587\u5b57\u304c\u9023\u7d9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u4e38\u3054\u3068\u98db\u3070\u3059\uff08\u91cd\u8907\u6392\u9664\u306e\u305f\u3081\uff09\n# \u4e00\u5ea6\u30ab\u30a6\u30f3\u30c8\u3092\u51fa\u529b\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u30e1\u30e2\u6570\u306f2\u5343\u6570\u767e\u7a0b\u5ea6\u3060\u3063\u305f\n\ndef gemstring(str, target)\n\tout = \"\"\n\tcash = {} \n\tcount = gemstring_main(str, target, out, cash)\n\treturn count\nend\n\ndef gemstring_main(str, target, out, cash)\n\tpres = \"\"\n\tcount = 0\n\n\t# \u6587\u5b57\u5217\u306e\u9577\u3055\u304c0\u306a\u3089\u7d42\u4e86\n\tif str.length == 0\n\t\treturn [count, false]\n\tend\n\n\tarray = str.split(\"\")\n\t# \u982d\u304b\u3089\u9806\u306b1\u6587\u5b57\u305a\u3064\u53d6\u5f97\u3059\u308b\n\tarray.each_with_index do |s, idx|\n\t\t# \u540c\u3058\u6587\u5b57\u304c\u7d9a\u3044\u305f\u5834\u5408\u306f\u30b9\u30ad\u30c3\u30d7\n\t\tif s == pres\n\t\t\tnext\n\t\tend\n\n\t\t# \u524d\u56de\u5206\u306e\u6587\u5b57\u3092\u66f4\u65b0\n\t\tpres = s\n\n\t\t# \u30ab\u30a6\u30f3\u30c8\u306b+1\u3059\u308b\n\t\tcount = count + 1\n\n\t\t# \u51fa\u529b\u6587\u5b57\u5217\u3092\u751f\u6210\n\t\tnewOut = out + s\n\n\t\t# \u76ee\u6a19\u306e\u6587\u5b57\u5217\u306a\u3089\u30ab\u30a6\u30f3\u30c8\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n\t\tif newOut == target\n\t\t\treturn [count, true]\n\t\tend\n\n\t\t# \u6b8b\u3063\u305f\u6587\u5b57\u3092\u6e21\u3057\u3066\u518d\u5e30\u3059\u308b\n\t\tnewArray = str.split(\"\")\n\t\tnewArray.delete_at(idx)\n\t\tnewStr = newArray.join(\"\")\n\n\t\t# \u76ee\u6a19\u306e\u6587\u5b57\u5217\u306e\u524d\u65b9\u4e00\u81f4\u3057\u3066\u3044\u305f\u3089\u30e1\u30e2\u306f\u4f7f\u308f\u306a\u3044\n\t\tif cash.has_key? newStr and out != target[0, out.length]\n\t\tthen\n\t\t\t# \u30e1\u30e2\u304b\u3089\u53d6\u5f97\n\t\t\tresult = cash[newStr]\n\t\t\tcount = count + result\n\t\telse\n\t\t\t# \u30e1\u30e2\u306b\u306a\u3044\u5834\u5408\u306f\u518d\u5e30\u7684\u306b\u30ab\u30a6\u30f3\u30c8\u3092\u53d6\u5f97\n\t\t\t(result, flg) = gemstring_main(newStr, target, newOut, cash)\n\t\t\tcount = count + result\n\t\t\tif flg\n\t\t\t\t# \u76ee\u6a19\u306b\u8fbf\u308a\u7740\u3044\u305f\u5834\u5408\u306f\u51e6\u7406\u3092\u5207\u308a\u4e0a\u3052\u308b\n\t\t\t\treturn [count, true]\n\t\t\tend\n\t\tend\n\tend\n\n\t# \u4eca\u56de\u306e\u7d50\u679c\u3092\u30e1\u30e2\n\tcash[str] = count\n\treturn [count, false]\nend\n\n# \u3053\u3093\u306a\u304b\u3093\u3058\u3067\u4f7f\u3046\n#gems = ARGV[0]\n#target = ARGV[1]\n\n#(result, flg) = gemstring(gems, target)\n#if flg\n#\tputs \"\u76ee\u6a19\u5230\u9054 total = [%d]\" % result\n#else\n#\tputs \"\u305d\u306e\u6587\u5b57\u5217\u306b\u306f\u5230\u9054\u3057\u307e\u305b\u3093\"\n#end\n```\n\u79c1\u306e\u7b54\u3048\uff1a5578864439\n\u5927\u4f530.17\u79d2\u304f\u3089\u3044\nRuby\u306f\u304b\u3058\u3063\u305f\u3060\u3051\u306a\u306e\u3067\u8272\u3005\u304a\u304b\u3057\u3044\u304b\u3082\u3002\n\u518d\u5e30\u306f\u4e00\u6642\u671f\u30b4\u30ea\u30b4\u30ea\u3084\u3063\u3066\u305f\u306e\u3067\u305d\u308c\u3092\u601d\u3044\u51fa\u3057\u306a\u304c\u3089\u3002\n", "tags": ["codeiq", "Ruby"]}