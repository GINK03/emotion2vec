{"context": "\n\n\u306f\u3058\u3081\u306b\n\n\u80cc\u666f\nGitHub\n\u50d5\u306f\u5b66\u6821\u3067\u306fPC\u90e8\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u306e\u90e8\u3067\u306f\u6bce\u5e74\u6587\u5316\u796d\u306b\u90e8\u54e1\u4e00\u4eba\u4e00\u3064\u3065\u3064\u30b2\u30fc\u30e0\u3084\u52d5\u753b\u306a\u3069\u4f55\u304b\u4f5c\u54c1\u3092\u4f5c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u50d5\u306f\u30bf\u30a4\u30d4\u30f3\u30b0\u30b2\u30fc\u30e0\u3092\u4f5c\u308a\u307e\u3057\u305f\u304c\u3001\u9069\u5f53\u306b\u4f5c\u3063\u305f\u306e\u3067\u30b7\u30f3\u30d7\u30eb\u306a\u30b2\u30fc\u30e0\u3060\u3063\u305f\u306e\u3067\u3001\u52d5\u753b\u73ed\u306e\u305f\u3081\u306b\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u76ee\u6a19\n\u308f\u3056\u308f\u3056\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u4f55\u304b\u4ed8\u52a0\u4fa1\u5024\u304c\u307b\u3057\u3044\u3067\u3059\u3002\n\u305b\u3063\u304b\u304f\u306e\u6587\u5316\u796d\u306a\u306e\u3067\u30cb\u25ef\u751f\u306e\u3088\u3046\u306b\u30b3\u30e1\u30f3\u30c8\u304c\u6d41\u305b\u305f\u3089\u697d\u3057\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u8a00\u8a9e\u306fRuby\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306bSinatra\u3092\u9078\u629e\n\u52b9\u7387\u5316\u306e\u305f\u3081SCSS\u3092\u5c0e\u5165\n\u624b\u5143\u306e\u3044\u3063\u3071\u3044\u3042\u308bPC\uff08\u4ee5\u4e0b\u30b3\u30e1\u30f3\u30c8\u6295\u7a3fPC\uff09\u304b\u3089\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\n\u524d\u306b\u3042\u308b\u4e00\u3064\u306ePC\uff08\u4ee5\u4e0b\u52d5\u753b\u518d\u751fPC\uff09\u306b\u52d5\u753b\u3068\u30b3\u30e1\u30f3\u30c8\u304c\u6d41\u308c\u308b\n\n\n\u74b0\u5883\n\n\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30e1\u30f3\u30c8\u6295\u7a3fPC\u306b\u7f6e\u3044\u3066\u3042\u308b\u3002\u3069\u3053\u304b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u306a\u304f\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u518d\u751f\n\u30b3\u30e1\u30f3\u30c8\u6295\u7a3fPC\u306e\u30d6\u30e9\u30a6\u30b6\u30d0\u30fc\u30b8\u30e7\u30f3\u306fIE10\u3001\u52d5\u753b\u518d\u751fPC\u306e\u30d6\u30e9\u30a6\u30b6\u306fChrome(\u6700\u65b0\u7248)\n\u30c7\u30d7\u30ed\u30a4\u306fheroku\u306b\u3066\u884c\u3046\u3002\n\n\n\n\n\n\n\n\n\n\n\n\u25b2\u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\u753b\u9762\n\u25b2\u52d5\u753b\u518d\u751f\u753b\u9762\n\n\n\n\n\u89e3\u8aac\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n\nHTML\nERB\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u3068\u3044\u3063\u3066\u3082\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7684\u306a\u5f79\u5272\u306f\u30b5\u30d6\u30bf\u30a4\u30c8\u30eb\u3064\u3051\u308b\u304f\u3089\u3044\u3067\u3059\u3002\n\nscss\n\napp.rb(L8~11)\nget %r{^/css/(.*)\\.css$} do\n  scss \"scss/#{params[:captures].first}\".to_sym\nend\n\n\nget\u3067\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u5143\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u3063\u3066\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u3068\u304d\u3001scss\u30d5\u30a1\u30a4\u30eb\u306fview/scss\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u683c\u7d0d\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u66f8\u304d\u8fbc\u307f/\u8aad\u307f\u53d6\u308a\n\napp.rb(L24~)\npost '/api/comment' do\n  comment = Comment.create(params)\n  json comment\nend\n\nget '/api/comment' do\n  json Comment.where(id: (params[:lastId].to_i + 1)..Float::INFINITY)\nend\n\n\n\u4e21\u65b9\u3068\u3082JSON\u5f62\u5f0f\u3067\u8fd4\u3057\u307e\u3059\u3002\nFloat::INFINITY\u306ffloat\u578b\u3067\u306e\u6700\u5927\u5024\u3067\u3001(id: (params[:lastId].to_i + 1)..Float::INFINITY)\u3067id\u304cparams[:lastId]\u3088\u308a\u5927\u304d\u3044ID\u306e\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u6295\u7a3f\u753b\u9762\n\n\u80cc\u666f\n\u3053\u3061\u3089\u306e\u661f\u7a7a\u3092\u62dd\u501f\u3057\u307e\u3057\u305f\u3002\n\n\u30b3\u30de\u30f3\u30c9\u30d1\u30ec\u30c3\u30c8\n\u5927\u304d\u3055\u306e\u95a2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\u3001\u4f4d\u7f6e\u306b\u95a2\u4fc2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\u3001\u8272\u306b\u95a2\u4fc2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\u3092\u53d6\u3063\u3066\u3001\u540c\u3058\u3082\u306e\u306b\u95a2\u4fc2\u3059\u308b\u30b3\u30de\u30f3\u30c9\uff08red\u3060\u3063\u305f\u3089pink,cyan\u306a\u3069\uff09\u3092\u524a\u9664\u3001\u3044\u3089\u306a\u3044\u30b9\u30da\u30fc\u30b9\u3092\u6d88\u3057\u305f\u3046\u3048\u3067title\u5c5e\u6027\u306e\u5024\u3068\u7d50\u5408\u3057\u3066\u3044\u307e\u3059\u3002\n$(\"#palette td\").on(\"click\", function (e) {\n    var $tr = $(this).closest(\"tr\");\n    var commands = $(\"[name='commands']\").val();\n    var similarCommand;\n    switch (true) {\n        case $tr.hasClass(\"size\"):\n            similarCommand = /(big|small|medium)/g;\n            break;\n\n        case $tr.hasClass(\"position\"):\n            similarCommand = /(ue|shita|naka)/g;\n            break;\n\n        case $tr.hasClass(\"color\"):\n            similarCommand = /(white|red|pink|orange|yellow|green|cyan|blue|purple|black)/g;\n            break;\n    }\n    commands = commands\n        .replace(similarCommand,\"\")\n        .replace(/  +/g, \" \");\n    commands += \" \" + $(this).attr(\"title\");\n    commands = commands.replace(/^\\s/,\"\");\n    $(\"[name='commands']\")\n        .val(commands)\n        .focus();\n})\n\n\n\u6295\u7a3f\n\u7981\u6b62\u51e6\u7406\uff08\u7a7a\u6587\u5b57\u3001\u9023\u7d9a\u3057\u305f\u540c\u3058\u30b3\u30e1\u30f3\u30c8\u3001\uff13\uff10\u6587\u5b57\u4ee5\u4e0a\u306e\u30b3\u30e1\u30f3\u30c8\uff09\u3092\u884c\u3063\u305f\u3042\u3068\u3001XSS\u5bfe\u7b56\u306eHTML\u30a8\u30b9\u30b1\u30fc\u30d7\u3092\u3057\u305f\u3042\u3068\u3001jQuery.post\u3057\u3066\u3044\u307e\u3059\u3002\n\nform.js\n$(\"#post-comment\").on(\"submit\",function(e){\n    e.preventDefault();\n    var comment = $(\"[name='comment']\").val();\n    if(comment == \"\" || comment == \" \"){\n        jAlertError(\"Input someting in comment.\");\n    } else if(comment == lastComment){\n        jAlertError(\"You can't post same comment in a row.\");\n    } else if(comment.length > 30){\n        jAlertError(\"You can't post comment which has more than 30 characters.\");\n    } else {\n        var _this = this;\n        if(!submiting){\n            submiting = true;\n            var data = {\n                body : comment,\n                pc_id : pc_id,\n                commands : $(\"[name='commands']\").val()\n            };\n            var html = data.body\n                .replace(/[&\"<>]/g, function(match) {return TABLE_FOR_ESCAPE_HTML[match];})\n                .replace(/\\n/g, '<br>');\n            data.html = \"<p class='comment\" + \n                (data.commands == \"\" ? \"\" : \" \" + data.commands)\n                + \"'>\" + html + \"</p>\";\n            $.post(\n                $(_this).attr('action'),\n                data,\n                function(result) {\n                    lastComment = result.body;\n                    $(\".result\").html(\"Commented! &nbsp;\" + result.html);\n                    $(\"#post-comment\").get(0).reset(); \n                    $(\"[name='comment']\").focus();\n                    submiting = false;\n                  },\n                'json'\n            );\n        }\n    }\n    return false;\n}); \n\n\n\n\u52d5\u753b\u518d\u751f\u753b\u9762\n\n\u30b3\u30e1\u30f3\u30c8\u3092\u53d6\u5f97\n\u4eca\u56de\u306f\u30dd\u30fc\u30ea\u30f3\u30b0\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u304c\u30cd\u30b9\u30c8\u3057\u307e\u304f\u308a\u3067\u898b\u82e6\u3057\u3044\u3067\u3059\u2026\u3002\npromise\u3068\u304b\u4f7f\u3063\u3066\u30b9\u30c3\u30ad\u30ea\u66f8\u304d\u305f\u3044\u3067\u3059\u3002\ngetting\u95a2\u6570\u306f\u540c\u3058\u30b3\u30e1\u30f3\u30c8\u304c\u8907\u6570\u56de\u6d41\u308c\u308b\u306e\u3092\u9632\u3044\u3067\u3044\u307e\u3059\u3002\n\ncomment.js\nvar lastId = -1;\n\nvar getting= false;\n\nvar getComment = function(){\n    var h= $(\"#comments\").height() - 120;\n        console.log(getting);\n        if(!getting){\n        getting = true;\n        $.get(\"/api/comment\", \n        {lastId: lastId},\n        function(data){\n            if(data.length){\n                if(lastId != -1){\n                    console.log(lastId);\n                    console.log(data);\n                    lastId = data[data.length -1].id;\n                    data.forEach(function(it, idx){\n                      // \u8981\u7d20\u4f5c\u3063\u3066\u6d41\u3059\u51e6\u7406\n                    });\n                }else{\n                    lastId = data[data.length -1].id;\n                }\n            }\n            getting = false;\n        });\n    }\n};\n\nvar commnetInterval = setInterval(getComment, 500)\n\n\n\n\u30b3\u30e1\u30f3\u30c8\u3092\u6d41\u3059\n\u30d5\u30a9\u30fc\u30e0\u753b\u9762\u3067\u4f5c\u3063\u305fHTML\u3092jQuery\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5316\u3057\u3066\u3001\u6d41\u3057\u307e\u3059\u3002\n\n\n \u6ce8\u610f: \u653b\u6483\u8005\u306f\u30d5\u30a9\u30fc\u30e0\u3092\u4ecb\u3055\u306a\u3044\u3067\u3082\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f(POST\u3092\u6295\u3052\u308b\u3053\u3068\u304c)\u3067\u304d\u308b\u306e\u3067\u672c\u6765\u306f\u3053\u3053\u3067\u3082HTML\u30a8\u30b9\u30b1\u30fc\u30d7\u3059\u3079\u304d\u3067\u3059\u3002*\n\n\u9ad8\u3055\u306f\u30e9\u30f3\u30c0\u30e0\u3001\u5de6\u304b\u3089\u53f3\u306b\u6d41\u3057\u3066\u3044\u307e\u3059\u3002\njQuery\u306eanimate\u3067\u306f\u306a\u304fCSS\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u304b\u3063\u305f\u307b\u3046\u304c\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u7684\u306b\u306f\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u2191\u306e\u4e2d\u8eab\nvar $comment = $(it.html)\nvar position = it.commands.match(/(ue|shita|naka)/g);\nif(position == null || position[position.length -1] == \"naka\"){\n    $comment\n        .appendTo(\"#comments\")\n        .css(\"top\",Math.floor(Math.random() * h) + \"px\")\n        .animate({\n            \"transform\": \"translateX(0)\",\n            \"right\": \"100%\"\n        },{\n            \"duration\": 5000,\n            \"easing\": \"linear\",\n            \"complete\": function(){\n                $comment.remove();\n            }\n        });\n} else {\n    $comment.appendTo(\"#comments-\" + position[position.length-1]);\n    setTimeout(function(){$comment.remove()},3000);\n}\n\n\n\n\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97\n\u4eca\u56de\u306f\u30c9\u30e9\u30c3\u30b0\u30a2\u30f3\u30c9\u30c9\u30ed\u30c3\u30d7\u3067\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092glob\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u4e26\u3079\u66ff\u3048\u3067\u304d\u308b\u3088\u3046\u306b<li>\u8981\u7d20\u306b\u3057\u3066\u30d7\u30ec\u30a4\u30ea\u30b9\u30c8\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\nfile.js\n$(function() {\n    // \u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u30a4\u30d9\u30f3\u30c8\u8a2d\u5b9a\n    $(\"body\").on(\"dragover\", eventStop).on(\"drop\", filedrop);\n    // FileReader\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\n    reader = new FileReader();\n});\n\n// \u30d5\u30a1\u30a4\u30eb\u304c\u30c9\u30e9\u30c3\u30b0\u3055\u308c\u305f\u5834\u5408\nfunction eventStop(event) {\n    // \u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30f3\u30bb\u30eb\n    event.stopPropagation();\n    event.preventDefault();\n    // \u64cd\u4f5c\u3092\u30ea\u30f3\u30af\u306b\u5909\u66f4\n    event.originalEvent.dataTransfer.dropEffect = \"link\";\n}\n// \u30d5\u30a1\u30a4\u30eb\u304c\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u5834\u5408\nfunction filedrop(event) {\n    try {\n        // \u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30f3\u30bb\u30eb\n        event.stopPropagation();\n        event.preventDefault();\n        // \u30d5\u30a1\u30a4\u30eb\u5b58\u5728\u30c1\u30a7\u30c3\u30af\n        if (event.originalEvent.dataTransfer.files) {\n            // \u30d5\u30a1\u30a4\u30eb\u53d6\u5f97\n            var files = event.originalEvent.dataTransfer.files;\n            if (files.length > 0) {\n                videos = [];\n                order = [];\n                // \u8aad\u8fbc\u30ad\u30e3\u30f3\u30bb\u30eb\n                if (reader.readyState == 1) {\n                    reader.abort();\n                }\n                // URL\u5b58\u5728\u5224\u5b9a\n                if (url != null) {\n                    URL.revokeObjectURL(url);\n                    url = null;\n                }\n                var html = \"\";\n                var l = files.length;\n                var badfiles = null;\n                for(var i = 0; i < l; i++){\n                    if((\"\" + files[i].type).indexOf(\"video/\") == 0 && video.canPlayType(files[i].type) != \"\"){\n                        html += \"<li id='\" + i + \"'>\" + files[i].name + \"</li>\\n\";\n                        videos.push(URL.createObjectURL(files[i]));\n                        order.push(i);\n                    } else {\n                        badfiles = badfiles == null ? \"<b>\" + files[i].name + \"</b>\" : badfiles +  \", <b>\" + files[i].name + \"</b>\";\n                    }\n                }\n                badfiles && jAlertError(\"File: \" + badfiles + \" is not movie or is not supported on this browser.\");\n                $(\"#playlist ol\").html(html);\n            } else {\n                jAlertError(\"No file dropped\");\n            }\n        }\n    } catch (e) {\n        // \u30a8\u30e9\u30fc\u306e\u5834\u5408\n        jAlertError(e.message);\n    }\n}\n\n\n\n\u52d5\u753b\u30d7\u30ec\u30a4\u30ea\u30b9\u30c8\u306e\u4f5c\u6210\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fli\u8981\u7d20\u3092\u4e26\u3073\u66ff\u3048\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306fjQuery UI Sortable\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\nvar $playlist = $(\"#playlist ol\")\n    .sortable({\n        axis: \"y\", // \u7e26\u65b9\u5411\u306e\u307f\u79fb\u52d5\u53ef\n        cursor: \"move\",\n        revert: 100\n    })\n    .disableSelection();\n\n\n\u52d5\u753b\u3092\u6d41\u3059\njQuery Sortable\u306etoArray\u3067\u9806\u756a\u306e\u914d\u5217\u3092\u4f5c\u6210\u3057\u3001\u6700\u521d\u306e\u52d5\u753b\u3092\u518d\u751f\u3057\u307e\u3059\u3002\n\n$(\"#playlist button\").on(\"click\", function(){\n    if(videos.length == 0){\n        jAlert(\"No file selected.\", \"Watch out!\")\n    } else {\n        order = $playlist.sortable(\"toArray\");\n        $(\"#playlist\").fadeOut(\"nomal\", function(){\n            next();\n        });\n    }\n});\n\n\u6b21\u306e\u52d5\u753b\u3092\u518d\u751f\u3001\u524d\u306e\u52d5\u753b\u306b\u623b\u308b\u3001\u52d5\u753b\u3092\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3001\u518d\u751f/\u4e00\u6642\u505c\u6b62\u3001\u30b9\u30ad\u30c3\u30d7\u3001\u97f3\u91cf\u4e0a\u3052\u308b/\u4e0b\u3052\u308b\u3000\u95a2\u6570\u3092\u305d\u308c\u305e\u308c\u4f5c\u308a\u307e\u3059\u3002\nvar video = $(\"video\").get(0);\nvar playing = 0;\n\n\nvar next = function(p){\n    if(playing < videos.length){\n        p = !p && video.paused;\n        video.src = videos[order[playing]];\n        playing++;\n        p || play();\n    }else{\n        jAlert(\"Last Movie!\");\n        video.pause();\n    }\n};\n\nvar back = function(p){\n    p = !p && video.paused;\n    playing--;\n    playing = playing > 0 ? playing : videos.length; \n    video.src = videos[order[playing -1]];\n    p || play();\n};\n\nvar reload = function(){\n    video.src = videos[playing - 1];\n    video.load();\n}\n\nvar play = function(){\n    video.paused ? video.play() : video.pause();\n};\n\nvar skip = function(value) {\n    video.currentTime += value;\n};\n\nfunction upVolume() {\n    video.volume = video.volume < 0.75 ? video.volume + 0.25 : 1.0;\n}\n\nfunction downVolume() {\n    video.volume = video.volume > 0.25 ? video.volume - 0.25 : 0.0;\n}\n\nvar skipToStart = function(){\n    video.currentTime = 0;\n}\n\nvar skipToEnd = function(){\n    video.currentTime = video.duration;\n}\n\n$(video).on(\"ended\",function(){video.src == \"\" || next($(\"[name='autoplay']\").prop(\"checked\"))})\n\n\n\u30ad\u30fc\u30dc\u30fc\u30c9\u30fb\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\n\u524d\u3067\u64cd\u4f5c\u3059\u308b\u52d5\u753b\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u8868\u793a\u3059\u308b\u306e\u3082\u30a2\u30ec\u306a\u306e\u3067\u5168\u3066\u30ad\u30fc\u30dc\u30fc\u30c9\u304b\u3089\u64cd\u4f5c\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u62bc\u3055\u308c\u305f\u30ad\u30fc\u306e\u5224\u5225\u306fkeyCode\u3067\u884c\u3044\u307e\u3059\u3002\nar shortcutList = {\n    13: play,                  // Enter\n    32: play,                  // space\n    75: play,                  // K\n    35: skipToEnd,             // End\n    36: skipToStart,           // Home\n    37: back,                  // \u2190\n    38: upVolume,              // \u2191\n    39: next,                  // \u2192\n    40: downVolume,            // \u2193\n    74: function(){skip(-10)}, // J\n    76: function(){skip(10)},  // L\n    82: reload                 // R\n};\n\n$(window).on(\"keydown\", function(e){\n    shortcutList[e.keyCode] && shortcutList[e.keyCode]();\n})\n\n\n\n\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\nheroku Toolbelt\u3092\u3053\u3061\u3089\u306e\u65b9\u6cd5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\ngit\u3067\u7ba1\u7406\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306fgit init\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067heroku login \u30b3\u30de\u30f3\u30c9\u3092\u6253\u3061\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\nkeroku keys:add        # \u9375\u3092\u767b\u9332\u3057\u3001\nheroku create          # \u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3001\ngit push heroku master # master\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092push\u3057\u307e\u3059\u3002\n\nheroku run rake migrate # heroku\u4e0a\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30c8\n\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u30a2\u30d7\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n\u304a\u308f\u308a\u306b\n\u6539\u5584\u3059\u3079\u304d\u70b9\n\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u4fe1\n\n\nWebSocket\u3092\u4f7f\u3044\u305f\u3044\u3002\n\n\n\u5168\u4f53\u7684\u306b\u30b3\u30fc\u30c9\u304c\u6c5a\u3044\u3002\nES2015\u3092\u4f7f\u3046\n\n\u3055\u3066\u3001\u660e\u65e5\u306f@sosuke301\u306e\u300c\u3088\u304f\u308f\u304b\u3089\u306a\u3044Clojure\u300d\u3067\u3059\uff01\u3061\u3087\u3063\u3068\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u304c\u306a\u3093\u3060\u304bLISP\u3068\u540c\u3058\u3088\u3046\u306a\u3084\u3070\u305d\u3046\u306a\u5302\u3044\u304c\u3057\u307e\u3059\uff08\uff09\n\u3067\u306f\u307e\u305f\u3044\u3064\u304b\uff01\n# \u306f\u3058\u3081\u306b\n## \u80cc\u666f\n[GitHub](https://github.com/ygkn/CommentPlayer)\n\n\u50d5\u306f\u5b66\u6821\u3067\u306fPC\u90e8\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u306e\u90e8\u3067\u306f\u6bce\u5e74\u6587\u5316\u796d\u306b\u90e8\u54e1\u4e00\u4eba\u4e00\u3064\u3065\u3064\u30b2\u30fc\u30e0\u3084\u52d5\u753b\u306a\u3069\u4f55\u304b\u4f5c\u54c1\u3092\u4f5c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u50d5\u306f[\u30bf\u30a4\u30d4\u30f3\u30b0\u30b2\u30fc\u30e0](https://github.com/ygkn/KStype)\u3092\u4f5c\u308a\u307e\u3057\u305f\u304c\u3001~~\u9069\u5f53\u306b\u4f5c\u3063\u305f\u306e\u3067~~\u30b7\u30f3\u30d7\u30eb\u306a\u30b2\u30fc\u30e0\u3060\u3063\u305f\u306e\u3067\u3001\u52d5\u753b\u73ed\u306e\u305f\u3081\u306b\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n## \u76ee\u6a19\n\u308f\u3056\u308f\u3056\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u4f55\u304b\u4ed8\u52a0\u4fa1\u5024\u304c\u307b\u3057\u3044\u3067\u3059\u3002\n\n\u305b\u3063\u304b\u304f\u306e\u6587\u5316\u796d\u306a\u306e\u3067\u30cb\u25ef\u751f\u306e\u3088\u3046\u306b\u30b3\u30e1\u30f3\u30c8\u304c\u6d41\u305b\u305f\u3089\u697d\u3057\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n- \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u8a00\u8a9e\u306fRuby\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306bSinatra\u3092\u9078\u629e\n- \u52b9\u7387\u5316\u306e\u305f\u3081SCSS\u3092\u5c0e\u5165\n- \u624b\u5143\u306e\u3044\u3063\u3071\u3044\u3042\u308bPC\uff08\u4ee5\u4e0b\u30b3\u30e1\u30f3\u30c8\u6295\u7a3fPC\uff09\u304b\u3089\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\n- \u524d\u306b\u3042\u308b\u4e00\u3064\u306ePC\uff08\u4ee5\u4e0b\u52d5\u753b\u518d\u751fPC\uff09\u306b\u52d5\u753b\u3068\u30b3\u30e1\u30f3\u30c8\u304c\u6d41\u308c\u308b\n\n## \u74b0\u5883\n- \u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30e1\u30f3\u30c8\u6295\u7a3fPC\u306b\u7f6e\u3044\u3066\u3042\u308b\u3002\u3069\u3053\u304b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u306a\u304f\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u518d\u751f\n- \u30b3\u30e1\u30f3\u30c8\u6295\u7a3fPC\u306e\u30d6\u30e9\u30a6\u30b6\u30d0\u30fc\u30b8\u30e7\u30f3\u306fIE10\u3001\u52d5\u753b\u518d\u751fPC\u306e\u30d6\u30e9\u30a6\u30b6\u306fChrome(\u6700\u65b0\u7248)\n- \u30c7\u30d7\u30ed\u30a4\u306f[heroku](https://www.heroku.com/)\u306b\u3066\u884c\u3046\u3002\n\n![\u5b9f\u884c\u74b0\u5883](https://qiita-image-store.s3.amazonaws.com/0/104663/3935b366-6750-5859-9af3-5473c9a359be.png)\n\n|![\u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\u753b\u9762](https://qiita-image-store.s3.amazonaws.com/0/104663/e0062945-05f4-d61a-3ea0-7503f357b949.png)|![\u52d5\u753b\u518d\u751f\u753b\u9762](https://qiita-image-store.s3.amazonaws.com/0/104663/6040e80c-0114-033e-4d96-a379050f662e.png)|\n|:--|:--|\n|\u25b2\u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\u753b\u9762|\u25b2\u52d5\u753b\u518d\u751f\u753b\u9762|\n# \u89e3\u8aac\n## \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n### HTML\nERB\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u3068\u3044\u3063\u3066\u3082\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7684\u306a\u5f79\u5272\u306f[\u30b5\u30d6\u30bf\u30a4\u30c8\u30eb\u3064\u3051\u308b](http://qiita.com/ygkn/items/7421ec04eff441f52201)\u304f\u3089\u3044\u3067\u3059\u3002\n\n### scss\n\n```ruby:app.rb(L8~11)\nget %r{^/css/(.*)\\.css$} do\n  scss \"scss/#{params[:captures].first}\".to_sym\nend\n```\n\n`get`\u3067\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u5143\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u3063\u3066\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u3068\u304d\u3001scss\u30d5\u30a1\u30a4\u30eb\u306f`view/scss`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u683c\u7d0d\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u66f8\u304d\u8fbc\u307f/\u8aad\u307f\u53d6\u308a\n```ruby:app.rb(L24~)\npost '/api/comment' do\n  comment = Comment.create(params)\n  json comment\nend\n\nget '/api/comment' do\n  json Comment.where(id: (params[:lastId].to_i + 1)..Float::INFINITY)\nend\n```\n\n\u4e21\u65b9\u3068\u3082JSON\u5f62\u5f0f\u3067\u8fd4\u3057\u307e\u3059\u3002\n`Float::INFINITY`\u306ffloat\u578b\u3067\u306e\u6700\u5927\u5024\u3067\u3001`(id: (params[:lastId].to_i + 1)..Float::INFINITY)`\u3067id\u304cparams[:lastId]\u3088\u308a\u5927\u304d\u3044ID\u306e\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n## \u6295\u7a3f\u753b\u9762\n### \u80cc\u666f\n[\u3053\u3061\u3089](http://qiita.com/nobuhito/items/0d9ae9eda05215cd2983)\u306e\u661f\u7a7a\u3092\u62dd\u501f\u3057\u307e\u3057\u305f\u3002\n### \u30b3\u30de\u30f3\u30c9\u30d1\u30ec\u30c3\u30c8\n\u5927\u304d\u3055\u306e\u95a2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\u3001\u4f4d\u7f6e\u306b\u95a2\u4fc2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\u3001\u8272\u306b\u95a2\u4fc2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\u3092\u53d6\u3063\u3066\u3001\u540c\u3058\u3082\u306e\u306b\u95a2\u4fc2\u3059\u308b\u30b3\u30de\u30f3\u30c9\uff08`red`\u3060\u3063\u305f\u3089`pink`,`cyan`\u306a\u3069\uff09\u3092\u524a\u9664\u3001\u3044\u3089\u306a\u3044\u30b9\u30da\u30fc\u30b9\u3092\u6d88\u3057\u305f\u3046\u3048\u3067`title`\u5c5e\u6027\u306e\u5024\u3068\u7d50\u5408\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js\n$(\"#palette td\").on(\"click\", function (e) {\n    var $tr = $(this).closest(\"tr\");\n    var commands = $(\"[name='commands']\").val();\n    var similarCommand;\n    switch (true) {\n        case $tr.hasClass(\"size\"):\n            similarCommand = /(big|small|medium)/g;\n            break;\n        \n        case $tr.hasClass(\"position\"):\n            similarCommand = /(ue|shita|naka)/g;\n            break;\n            \n        case $tr.hasClass(\"color\"):\n            similarCommand = /(white|red|pink|orange|yellow|green|cyan|blue|purple|black)/g;\n            break;\n    }\n    commands = commands\n        .replace(similarCommand,\"\")\n        .replace(/  +/g, \" \");\n    commands += \" \" + $(this).attr(\"title\");\n    commands = commands.replace(/^\\s/,\"\");\n    $(\"[name='commands']\")\n        .val(commands)\n        .focus();\n})\n```\n\n### \u6295\u7a3f\n\u7981\u6b62\u51e6\u7406\uff08\u7a7a\u6587\u5b57\u3001\u9023\u7d9a\u3057\u305f\u540c\u3058\u30b3\u30e1\u30f3\u30c8\u3001\uff13\uff10\u6587\u5b57\u4ee5\u4e0a\u306e\u30b3\u30e1\u30f3\u30c8\uff09\u3092\u884c\u3063\u305f\u3042\u3068\u3001XSS\u5bfe\u7b56\u306eHTML\u30a8\u30b9\u30b1\u30fc\u30d7\u3092\u3057\u305f\u3042\u3068\u3001`jQuery.post`\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:form.js\n$(\"#post-comment\").on(\"submit\",function(e){\n    e.preventDefault();\n    var comment = $(\"[name='comment']\").val();\n    if(comment == \"\" || comment == \" \"){\n        jAlertError(\"Input someting in comment.\");\n    } else if(comment == lastComment){\n        jAlertError(\"You can't post same comment in a row.\");\n    } else if(comment.length > 30){\n        jAlertError(\"You can't post comment which has more than 30 characters.\");\n    } else {\n        var _this = this;\n        if(!submiting){\n            submiting = true;\n            var data = {\n                body : comment,\n                pc_id : pc_id,\n                commands : $(\"[name='commands']\").val()\n            };\n            var html = data.body\n                .replace(/[&\"<>]/g, function(match) {return TABLE_FOR_ESCAPE_HTML[match];})\n                .replace(/\\n/g, '<br>');\n            data.html = \"<p class='comment\" + \n                (data.commands == \"\" ? \"\" : \" \" + data.commands)\n                + \"'>\" + html + \"</p>\";\n            $.post(\n                $(_this).attr('action'),\n                data,\n                function(result) {\n                    lastComment = result.body;\n                    $(\".result\").html(\"Commented! &nbsp;\" + result.html);\n                    $(\"#post-comment\").get(0).reset(); \n                    $(\"[name='comment']\").focus();\n                    submiting = false;\n                  },\n                'json'\n            );\n        }\n    }\n    return false;\n}); \n```\n\n## \u52d5\u753b\u518d\u751f\u753b\u9762\n### \u30b3\u30e1\u30f3\u30c8\u3092\u53d6\u5f97\n\u4eca\u56de\u306f\u30dd\u30fc\u30ea\u30f3\u30b0\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u304c\u30cd\u30b9\u30c8\u3057\u307e\u304f\u308a\u3067\u898b\u82e6\u3057\u3044\u3067\u3059\u2026\u3002\npromise\u3068\u304b\u4f7f\u3063\u3066\u30b9\u30c3\u30ad\u30ea\u66f8\u304d\u305f\u3044\u3067\u3059\u3002\ngetting\u95a2\u6570\u306f\u540c\u3058\u30b3\u30e1\u30f3\u30c8\u304c\u8907\u6570\u56de\u6d41\u308c\u308b\u306e\u3092\u9632\u3044\u3067\u3044\u307e\u3059\u3002\n\n```js:comment.js\nvar lastId = -1;\n\nvar getting= false;\n\nvar getComment = function(){\n    var h= $(\"#comments\").height() - 120;\n        console.log(getting);\n        if(!getting){\n        getting = true;\n        $.get(\"/api/comment\", \n        {lastId: lastId},\n        function(data){\n            if(data.length){\n                if(lastId != -1){\n                    console.log(lastId);\n                    console.log(data);\n                    lastId = data[data.length -1].id;\n                    data.forEach(function(it, idx){\n                      // \u8981\u7d20\u4f5c\u3063\u3066\u6d41\u3059\u51e6\u7406\n                    });\n                }else{\n                    lastId = data[data.length -1].id;\n                }\n            }\n            getting = false;\n        });\n    }\n};\n\nvar commnetInterval = setInterval(getComment, 500)\n```\n\n### \u30b3\u30e1\u30f3\u30c8\u3092\u6d41\u3059\n\u30d5\u30a9\u30fc\u30e0\u753b\u9762\u3067\u4f5c\u3063\u305fHTML\u3092jQuery\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5316\u3057\u3066\u3001\u6d41\u3057\u307e\u3059\u3002\n\n* :warning: \u6ce8\u610f: \u653b\u6483\u8005\u306f\u30d5\u30a9\u30fc\u30e0\u3092\u4ecb\u3055\u306a\u3044\u3067\u3082\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f(POST\u3092\u6295\u3052\u308b\u3053\u3068\u304c)\u3067\u304d\u308b\u306e\u3067\u672c\u6765\u306f\u3053\u3053\u3067\u3082HTML\u30a8\u30b9\u30b1\u30fc\u30d7\u3059\u3079\u304d\u3067\u3059\u3002*\n\n\u9ad8\u3055\u306f\u30e9\u30f3\u30c0\u30e0\u3001\u5de6\u304b\u3089\u53f3\u306b\u6d41\u3057\u3066\u3044\u307e\u3059\u3002\n\njQuery\u306eanimate\u3067\u306f\u306a\u304fCSS\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u304b\u3063\u305f\u307b\u3046\u304c\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u7684\u306b\u306f\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n```js:\u2191\u306e\u4e2d\u8eab\nvar $comment = $(it.html)\nvar position = it.commands.match(/(ue|shita|naka)/g);\nif(position == null || position[position.length -1] == \"naka\"){\n    $comment\n        .appendTo(\"#comments\")\n        .css(\"top\",Math.floor(Math.random() * h) + \"px\")\n        .animate({\n            \"transform\": \"translateX(0)\",\n            \"right\": \"100%\"\n        },{\n            \"duration\": 5000,\n            \"easing\": \"linear\",\n            \"complete\": function(){\n                $comment.remove();\n            }\n        });\n} else {\n    $comment.appendTo(\"#comments-\" + position[position.length-1]);\n    setTimeout(function(){$comment.remove()},3000);\n}\n```\n\n### \u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97\n\u4eca\u56de\u306f\u30c9\u30e9\u30c3\u30b0\u30a2\u30f3\u30c9\u30c9\u30ed\u30c3\u30d7\u3067\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092glob\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u4e26\u3079\u66ff\u3048\u3067\u304d\u308b\u3088\u3046\u306b`<li>`\u8981\u7d20\u306b\u3057\u3066\u30d7\u30ec\u30a4\u30ea\u30b9\u30c8\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n```js:file.js\n$(function() {\n    // \u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u30a4\u30d9\u30f3\u30c8\u8a2d\u5b9a\n    $(\"body\").on(\"dragover\", eventStop).on(\"drop\", filedrop);\n    // FileReader\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\n    reader = new FileReader();\n});\n\n// \u30d5\u30a1\u30a4\u30eb\u304c\u30c9\u30e9\u30c3\u30b0\u3055\u308c\u305f\u5834\u5408\nfunction eventStop(event) {\n    // \u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30f3\u30bb\u30eb\n    event.stopPropagation();\n    event.preventDefault();\n    // \u64cd\u4f5c\u3092\u30ea\u30f3\u30af\u306b\u5909\u66f4\n    event.originalEvent.dataTransfer.dropEffect = \"link\";\n}\n// \u30d5\u30a1\u30a4\u30eb\u304c\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u5834\u5408\nfunction filedrop(event) {\n    try {\n        // \u30a4\u30d9\u30f3\u30c8\u30ad\u30e3\u30f3\u30bb\u30eb\n        event.stopPropagation();\n        event.preventDefault();\n        // \u30d5\u30a1\u30a4\u30eb\u5b58\u5728\u30c1\u30a7\u30c3\u30af\n        if (event.originalEvent.dataTransfer.files) {\n            // \u30d5\u30a1\u30a4\u30eb\u53d6\u5f97\n            var files = event.originalEvent.dataTransfer.files;\n            if (files.length > 0) {\n                videos = [];\n                order = [];\n                // \u8aad\u8fbc\u30ad\u30e3\u30f3\u30bb\u30eb\n                if (reader.readyState == 1) {\n                    reader.abort();\n                }\n                // URL\u5b58\u5728\u5224\u5b9a\n                if (url != null) {\n                    URL.revokeObjectURL(url);\n                    url = null;\n                }\n                var html = \"\";\n                var l = files.length;\n                var badfiles = null;\n                for(var i = 0; i < l; i++){\n                    if((\"\" + files[i].type).indexOf(\"video/\") == 0 && video.canPlayType(files[i].type) != \"\"){\n                        html += \"<li id='\" + i + \"'>\" + files[i].name + \"</li>\\n\";\n                        videos.push(URL.createObjectURL(files[i]));\n                        order.push(i);\n                    } else {\n                        badfiles = badfiles == null ? \"<b>\" + files[i].name + \"</b>\" : badfiles +  \", <b>\" + files[i].name + \"</b>\";\n                    }\n                }\n                badfiles && jAlertError(\"File: \" + badfiles + \" is not movie or is not supported on this browser.\");\n                $(\"#playlist ol\").html(html);\n            } else {\n                jAlertError(\"No file dropped\");\n            }\n        }\n    } catch (e) {\n        // \u30a8\u30e9\u30fc\u306e\u5834\u5408\n        jAlertError(e.message);\n    }\n}\n```\n\n### \u52d5\u753b\u30d7\u30ec\u30a4\u30ea\u30b9\u30c8\u306e\u4f5c\u6210\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fli\u8981\u7d20\u3092\u4e26\u3073\u66ff\u3048\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306fjQuery UI Sortable\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\n```js\nvar $playlist = $(\"#playlist ol\")\n    .sortable({\n        axis: \"y\", // \u7e26\u65b9\u5411\u306e\u307f\u79fb\u52d5\u53ef\n        cursor: \"move\",\n        revert: 100\n    })\n    .disableSelection();\n```\n\n### \u52d5\u753b\u3092\u6d41\u3059\njQuery Sortable\u306e`toArray`\u3067\u9806\u756a\u306e\u914d\u5217\u3092\u4f5c\u6210\u3057\u3001\u6700\u521d\u306e\u52d5\u753b\u3092\u518d\u751f\u3057\u307e\u3059\u3002\n\n```js\n\n$(\"#playlist button\").on(\"click\", function(){\n    if(videos.length == 0){\n        jAlert(\"No file selected.\", \"Watch out!\")\n    } else {\n        order = $playlist.sortable(\"toArray\");\n        $(\"#playlist\").fadeOut(\"nomal\", function(){\n            next();\n        });\n    }\n});\n```\n\n\u6b21\u306e\u52d5\u753b\u3092\u518d\u751f\u3001\u524d\u306e\u52d5\u753b\u306b\u623b\u308b\u3001\u52d5\u753b\u3092\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3001\u518d\u751f/\u4e00\u6642\u505c\u6b62\u3001\u30b9\u30ad\u30c3\u30d7\u3001\u97f3\u91cf\u4e0a\u3052\u308b/\u4e0b\u3052\u308b\u3000\u95a2\u6570\u3092\u305d\u308c\u305e\u308c\u4f5c\u308a\u307e\u3059\u3002\n\n```js\nvar video = $(\"video\").get(0);\nvar playing = 0;\n\n\nvar next = function(p){\n    if(playing < videos.length){\n        p = !p && video.paused;\n        video.src = videos[order[playing]];\n        playing++;\n        p || play();\n    }else{\n        jAlert(\"Last Movie!\");\n        video.pause();\n    }\n};\n\nvar back = function(p){\n    p = !p && video.paused;\n    playing--;\n    playing = playing > 0 ? playing : videos.length; \n    video.src = videos[order[playing -1]];\n    p || play();\n};\n\nvar reload = function(){\n    video.src = videos[playing - 1];\n    video.load();\n}\n\nvar play = function(){\n    video.paused ? video.play() : video.pause();\n};\n\nvar skip = function(value) {\n    video.currentTime += value;\n};\n\nfunction upVolume() {\n\tvideo.volume = video.volume < 0.75 ? video.volume + 0.25 : 1.0;\n}\n\nfunction downVolume() {\n\tvideo.volume = video.volume > 0.25 ? video.volume - 0.25 : 0.0;\n}\n\nvar skipToStart = function(){\n    video.currentTime = 0;\n}\n\nvar skipToEnd = function(){\n    video.currentTime = video.duration;\n}\n\n$(video).on(\"ended\",function(){video.src == \"\" || next($(\"[name='autoplay']\").prop(\"checked\"))})\n```\n\n### \u30ad\u30fc\u30dc\u30fc\u30c9\u30fb\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\n\n\u524d\u3067\u64cd\u4f5c\u3059\u308b\u52d5\u753b\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u8868\u793a\u3059\u308b\u306e\u3082\u30a2\u30ec\u306a\u306e\u3067\u5168\u3066\u30ad\u30fc\u30dc\u30fc\u30c9\u304b\u3089\u64cd\u4f5c\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u62bc\u3055\u308c\u305f\u30ad\u30fc\u306e\u5224\u5225\u306fkeyCode\u3067\u884c\u3044\u307e\u3059\u3002\n\n```js\nar shortcutList = {\n    13: play,                  // Enter\n    32: play,                  // space\n    75: play,                  // K\n    35: skipToEnd,             // End\n    36: skipToStart,           // Home\n    37: back,                  // \u2190\n    38: upVolume,              // \u2191\n    39: next,                  // \u2192\n    40: downVolume,            // \u2193\n    74: function(){skip(-10)}, // J\n    76: function(){skip(10)},  // L\n    82: reload                 // R\n};\n\n$(window).on(\"keydown\", function(e){\n    shortcutList[e.keyCode] && shortcutList[e.keyCode]();\n})\n\n```\n\n## \u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\n\nheroku Toolbelt\u3092[\u3053\u3061\u3089\u306e\u65b9\u6cd5](https://devcenter.heroku.com/articles/heroku-cli)\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\ngit\u3067\u7ba1\u7406\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f`git init`\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3057\u307e\u3059\u3002\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067`heroku login` \u30b3\u30de\u30f3\u30c9\u3092\u6253\u3061\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n    keroku keys:add        # \u9375\u3092\u767b\u9332\u3057\u3001\n    heroku create          # \u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3001\n    git push heroku master # master\u30d6\u30e9\u30f3\u30c1\u306e\u5185\u5bb9\u3092push\u3057\u307e\u3059\u3002\n\n    heroku run rake migrate # heroku\u4e0a\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30c8\n\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u30a2\u30d7\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n# \u304a\u308f\u308a\u306b\n\u6539\u5584\u3059\u3079\u304d\u70b9\n\n- \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u4fe1\n  - WebSocket\u3092\u4f7f\u3044\u305f\u3044\u3002\n- \u5168\u4f53\u7684\u306b\u30b3\u30fc\u30c9\u304c\u6c5a\u3044\u3002\n- ES2015\u3092\u4f7f\u3046\n\n\u3055\u3066\u3001\u660e\u65e5\u306f[@sosuke301](http://qiita.com/sosuke301)\u306e\u300c\u3088\u304f\u308f\u304b\u3089\u306a\u3044Clojure\u300d\u3067\u3059\uff01\u3061\u3087\u3063\u3068\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u304c\u306a\u3093\u3060\u304bLISP\u3068\u540c\u3058\u3088\u3046\u306a\u3084\u3070\u305d\u3046\u306a\u5302\u3044\u304c\u3057\u307e\u3059\uff08\uff09\n\n\u3067\u306f\u307e\u305f\u3044\u3064\u304b\uff01\n", "tags": ["Sinatra", "JavaScript"]}