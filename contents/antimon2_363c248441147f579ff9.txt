{"tags": ["Elixir", "\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u3082\u3046\u65e2\u306b\u4f55\u756a\u714e\u3058\u304b\uff08\u3082\u3046\u3059\u30503\u6841\uff1f\uff09\u3066\u611f\u3058\u3067\u3059\u304c\u3001\u6562\u3048\u3066\u3082\u30461\u672c\u4e0a\u3052\u3066\u307f\u308b\u3002\n\u5915\u3079\u66f8\u3044\u305f \u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7.jl with Iteration \u3092 Elixir \u306b\u7ffb\u8a33\u3057\u3066\u307f\u305f\u3002\n\n\u5b9f\u88c5\u7d50\u679c\n\nzundoko.ex\n# zundoko.ex\n\ndefmodule Zundoko do\n  def stream do\n    &stream(0, &1, &2)\n  end\n\n  defp stream(_, {:halt, acc}, _fun), do: {:halted, acc}\n  defp stream(v, {:suspend, acc}, fun), do: {:suspended, acc, &stream(v, &1, fun)}\n  defp stream(:done, {:cont, acc}, _fun), do: {:done, acc}\n  defp stream(5, {:cont, acc}, fun), do:\n    stream(:done, fun.(\"\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\", acc), fun)\n  defp stream(4, {:cont, acc}, fun), do: \n    stream(Enum.random([{4, \"\u30ba\u30f3\"}, {5, \"\u30c9\u30b3\"}]), {:cont, acc}, fun)\n  defp stream(n, {:cont, acc}, fun) when n < 4, do: \n    stream(Enum.random([{n + 1, \"\u30ba\u30f3\"}, {0, \"\u30c9\u30b3\"}]), {:cont, acc}, fun)\n  defp stream({n, zd}, {:cont, acc}, fun), do: \n    stream(n, fun.(zd, acc), fun)\n\n  def run do\n    stream |> Enum.join |> IO.puts\n  end\nend\n\nZundoko.run\n# => \u30ba\u30f3\u30c9\u30b3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\n\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u300cStream \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u308f\u306a\u3044\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5b9f\u88c5\u300d\u3002\n\uff08\u8a73\u3057\u304f\u306f \u79c1\u306e\u904e\u53bb\u8a18\u4e8b \u7b49\u53c2\u7167\uff09\nZundoko.stream \u306e\u5b9a\u7fa9\u306b Enum.random \u4ee5\u5916\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u305b\u3093\uff01\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7.jl with Iteration \u3068\u540c\u69d8\u3001\u51e6\u7406\u672c\u4f53\u306f Stream\uff08\u3068\u3057\u3066\u6271\u308f\u308c\u308b\u95a2\u6570\uff09\u3068\u3057\u3066\u8fd4\u3063\u3066\u304f\u308b\u306e\u3067\u3001\u30ea\u30b9\u30c8\u3067\u53d6\u5f97\u3057\u305f\u3051\u308c\u3070\u3001\u4f8b\u3048\u3070\nZundoko.stream |> Enum.to_list\n\u3068\u3059\u308c\u3070 [\"\u30c9\u30b3\", \"\u30ba\u30f3\", \"\u30c9\u30b3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\",\n \"\u30c9\u30b3\", \"\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\"] \u3068\u3044\u3063\u305f\u30ea\u30b9\u30c8\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\n\n\u307e\u3068\u3081\u3058\u3083\u306a\u3044\u3051\u308c\u3069\n\u30b9\u30c8\u30ea\u30fc\u30e0\uff08\u7121\u9650\u30ea\u30b9\u30c8\uff09\u3084\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u5b9a\u7fa9\u65b9\u6cd5\u304c\u4f3c\u3066\u3044\u308b\u306a\u3089\u4ed6\u8a00\u8a9e\u3067\u3082\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3067\u5b9f\u88c5\u51fa\u6765\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3002\n## \u306f\u3058\u3081\u306b\n\n\u3082\u3046\u65e2\u306b\u4f55\u756a\u714e\u3058\u304b\uff08\u3082\u3046\u3059\u30503\u6841\uff1f\uff09\u3066\u611f\u3058\u3067\u3059\u304c\u3001\u6562\u3048\u3066\u3082\u30461\u672c\u4e0a\u3052\u3066\u307f\u308b\u3002\n\u5915\u3079\u66f8\u3044\u305f [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7.jl with Iteration](http://qiita.com/antimon2/items/b198076666b40c72cece) \u3092 [Elixir](http://elixir-lang.org/) \u306b\u7ffb\u8a33\u3057\u3066\u307f\u305f\u3002\n\n## \u5b9f\u88c5\u7d50\u679c\n\n```ex:zundoko.ex\n# zundoko.ex\n\ndefmodule Zundoko do\n  def stream do\n    &stream(0, &1, &2)\n  end\n\n  defp stream(_, {:halt, acc}, _fun), do: {:halted, acc}\n  defp stream(v, {:suspend, acc}, fun), do: {:suspended, acc, &stream(v, &1, fun)}\n  defp stream(:done, {:cont, acc}, _fun), do: {:done, acc}\n  defp stream(5, {:cont, acc}, fun), do:\n    stream(:done, fun.(\"\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\", acc), fun)\n  defp stream(4, {:cont, acc}, fun), do: \n    stream(Enum.random([{4, \"\u30ba\u30f3\"}, {5, \"\u30c9\u30b3\"}]), {:cont, acc}, fun)\n  defp stream(n, {:cont, acc}, fun) when n < 4, do: \n    stream(Enum.random([{n + 1, \"\u30ba\u30f3\"}, {0, \"\u30c9\u30b3\"}]), {:cont, acc}, fun)\n  defp stream({n, zd}, {:cont, acc}, fun), do: \n    stream(n, fun.(zd, acc), fun)\n\n  def run do\n    stream |> Enum.join |> IO.puts\n  end\nend\n\nZundoko.run\n# => \u30ba\u30f3\u30c9\u30b3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\n```\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u300c`Stream` \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u308f\u306a\u3044\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5b9f\u88c5\u300d\u3002\n\uff08\u8a73\u3057\u304f\u306f [\u79c1\u306e\u904e\u53bb\u8a18\u4e8b](http://qiita.com/antimon2/items/2c485bda4696d155156f) \u7b49\u53c2\u7167\uff09\n`Zundoko.stream` \u306e\u5b9a\u7fa9\u306b `Enum.random` \u4ee5\u5916\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u305b\u3093\uff01\n\n[\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7.jl with Iteration](http://qiita.com/antimon2/items/b198076666b40c72cece) \u3068\u540c\u69d8\u3001\u51e6\u7406\u672c\u4f53\u306f `Stream`\uff08\u3068\u3057\u3066\u6271\u308f\u308c\u308b\u95a2\u6570\uff09\u3068\u3057\u3066\u8fd4\u3063\u3066\u304f\u308b\u306e\u3067\u3001\u30ea\u30b9\u30c8\u3067\u53d6\u5f97\u3057\u305f\u3051\u308c\u3070\u3001\u4f8b\u3048\u3070\n`Zundoko.stream |> Enum.to_list`\n\u3068\u3059\u308c\u3070 `[\"\u30c9\u30b3\", \"\u30ba\u30f3\", \"\u30c9\u30b3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\", \"\u30ba\u30f3\",\n \"\u30c9\u30b3\", \"\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\"]` \u3068\u3044\u3063\u305f\u30ea\u30b9\u30c8\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\n\n## \u307e\u3068\u3081\u3058\u3083\u306a\u3044\u3051\u308c\u3069\n\n\u30b9\u30c8\u30ea\u30fc\u30e0\uff08\u7121\u9650\u30ea\u30b9\u30c8\uff09\u3084\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u5b9a\u7fa9\u65b9\u6cd5\u304c\u4f3c\u3066\u3044\u308b\u306a\u3089\u4ed6\u8a00\u8a9e\u3067\u3082\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3067\u5b9f\u88c5\u51fa\u6765\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3002\n"}