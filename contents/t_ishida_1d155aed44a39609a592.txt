{"context": " More than 1 year has passed since last update.\u591a\u5206JS\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u6642\u306b\u3001\u30b5\u30fc\u30d0\u30fc\u3078\u901a\u77e5\u3057\u3066JS\u306e\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u4fdd\u5b58\u3057\u305f\u304b\u3063\u305f\u3093\u3060\u3068\u601d\u3046\u3002\n<script type=\"text/javascript\" src=\"ErrorHandler.js\"></script>\n<script>\n    new __ErrorHandler().listen('gif.gif', 'img');\n    null.createElement('hoge');\n</script>\n\nfunction __ErrorHandler () {\n    self = this;\n    this.listen = function(sendTo, sendType) {\n        window.onerror = function(message, url, line) {\n            // \u518d\u8d77\u9632\u6b62\n            window.onerror = null;\n            if (console.log) {\n                console.log(message);\n                console.log(url);\n                console.log(line);\n            }\n            if (sendTo) {\n                if (!sendType) sendType = 'img';\n                if (sendType == 'img') self.sendAsImage({\n                    'sendTo' : sendTo,\n                    'message' : message,\n                    'url' : url,\n                    'line' : line\n                });\n            }\n        }\n    }\n    this.sendAsImage = function (obj) {\n        var img = document.createElement('img');\n        img.src = self.buildSendTo(obj);\n        img.onabort = function () {document.getElementsByTagName('body')[0].removeChild(img);}\n        img.onload  = function () {img.onabort();}\n        document.getElementsByTagName('body')[0].appendChild(img);\n    }\n    this.buildSendTo = function (obj) {\n        var sendTo = '';\n        sendTo = obj.sendTo;\n        if (!sendTo.match(/\\?/)) sendTo += '?';\n        else                     sendTo += '&' ;\n        sendTo += 'url='     + encodeURIComponent(obj.url) + '&';\n        sendTo += 'line='    + encodeURIComponent(obj.line) + '&';\n        sendTo += 'message=' + encodeURIComponent(obj.message);\n        return sendTo;\n    }\n    return this;\n}\n\n\u591a\u5206JS\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u6642\u306b\u3001\u30b5\u30fc\u30d0\u30fc\u3078\u901a\u77e5\u3057\u3066JS\u306e\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u4fdd\u5b58\u3057\u305f\u304b\u3063\u305f\u3093\u3060\u3068\u601d\u3046\u3002\n\n```html\n<script type=\"text/javascript\" src=\"ErrorHandler.js\"></script>\n<script>\n    new __ErrorHandler().listen('gif.gif', 'img');\n    null.createElement('hoge');\n</script>\n```\n\n```js\nfunction __ErrorHandler () {\n    self = this;\n    this.listen = function(sendTo, sendType) {\n        window.onerror = function(message, url, line) {\n            // \u518d\u8d77\u9632\u6b62\n            window.onerror = null;\n            if (console.log) {\n                console.log(message);\n                console.log(url);\n                console.log(line);\n            }\n            if (sendTo) {\n                if (!sendType) sendType = 'img';\n                if (sendType == 'img') self.sendAsImage({\n                    'sendTo' : sendTo,\n                    'message' : message,\n                    'url' : url,\n                    'line' : line\n                });\n            }\n        }\n    }\n    this.sendAsImage = function (obj) {\n        var img = document.createElement('img');\n        img.src = self.buildSendTo(obj);\n        img.onabort = function () {document.getElementsByTagName('body')[0].removeChild(img);}\n        img.onload  = function () {img.onabort();}\n        document.getElementsByTagName('body')[0].appendChild(img);\n    }\n    this.buildSendTo = function (obj) {\n        var sendTo = '';\n        sendTo = obj.sendTo;\n        if (!sendTo.match(/\\?/)) sendTo += '?';\n        else                     sendTo += '&' ;\n        sendTo += 'url='     + encodeURIComponent(obj.url) + '&';\n        sendTo += 'line='    + encodeURIComponent(obj.line) + '&';\n        sendTo += 'message=' + encodeURIComponent(obj.message);\n        return sendTo;\n    }\n    return this;\n}\n```\n", "tags": ["\u4f9b\u990a", "JavaScript"]}