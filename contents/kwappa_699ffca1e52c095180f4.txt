{"context": " More than 1 year has passed since last update.ActiveDirectory\u3067\u30e6\u30fc\u30b6\u8a8d\u8a3c\u3059\u308b\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u305f\u304f\u3066\u3001\u958b\u767a\u74b0\u5883\u3068\u3057\u3066\u624b\u5143\u306bOpenLDAP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u3089\u3061\u3087\u3063\u3068\u5927\u5909\u3060\u3063\u305f\u306e\u3067\u4f5c\u696d\u30e1\u30e2\u3002\n\n\u74b0\u5883\u3068\u95a2\u9023\u30ea\u30f3\u30af\n\nMacOSX 10.10.1 (Yosemite)\nhttps://github.com/IntersectAustralia/acdata/wiki/Setting-up-OpenLDAP\nhttps://github.com/Homebrew/homebrew-dupes/blob/master/openldap.rb\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n% brew info openldap\nopenldap: stable 2.4.39\nhttp://www.openldap.org/software/\n/usr/local/Cellar/openldap/2.4.39 (131 files, 7.4M) *\n  Built from source with: --with-berkeley-db\nFrom: https://github.com/homebrew/homebrew-dupes/blob/master/openldap.rb\n==> Dependencies\nRequired: openssl \u2714\nOptional: berkeley-db \u2714\n==> Options\n--with-berkeley-db\n        Build with berkeley-db support\n--with-memberof\n        Include memberof overlay\n--with-sssvlv\n        Enable server side sorting and virtual list view\n\n% brew install homebrew/dupes/openldap --with-berkeley-db\n\n\nsymlink\u3092\u4f5c\u308b\nslapd \u306f libexec \u306b\u3044\u308b\u306e\u304c\u666e\u901a\u3063\u307d\u3044\u306e\u3067\u3001Homebrew\u306e\u6d41\u5100\u306b\u5f93\u3063\u3066\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068symlink\u3092\u4f5c\u3063\u3066\u304a\u304f\u3002\n% mkdir /usr/local/libexec \n% ln -s /usr/local/Cellar/openldap/2.4.39/libexec/slapd /usr/local/libexec\n\n\n\u8a2d\u5b9a\nOpenLDAP\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u306f\u3053\u3053\u3002\n/usr/local/etc/openldap\n\n\nslapd.conf\n\n\nrootpw\n\n\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9\u3092 slappasswd \u3067\u4f5c\u6210\u3057\u3001slapd.conf \u306b\u66f8\u3044\u3066\u304a\u304f\u3002\n% slappasswd\nNew password:\nRe-enter new password:\n{SSHA}+*******************************\n\n\nsufffix , rootdn\n\n\u624b\u5143\u3067\u52d5\u304b\u3059\u7528\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u304a\u304f\u3002\n\nsuffix\n\n\ndc=localhost\n\n\nrootdn\n\n\ncn=admin,dc=localhost\n\n\n\n\nslapd.conf\n\n\u6700\u7d42\u7684\u306b\u3053\u3046\u3044\u3046\u4fee\u6b63\u306b\u306a\u308b\u3002\n\nslap.conf\nsuffix      \"dc=localhost\"\nrootdn      \"cn=admin,dc=localhost\"\nrootpw      {SSHA}+*******************************\n\n\n\nDB_CONFIG\n\nslapd.conf \u306b\u306f directory  /usr/local/var/openldap-data \u306e\u6307\u5b9a\u304c\u3042\u308b\u3002\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3053\u3053\u306b\u306a\u308b\u3002\nDB_CONFIG.example \u306f /usr/local/etc/openldap \u306b\u3042\u308b\u3082\u306e\u3068\u540c\u4e00\u306a\u306e\u3067rename\u3057\u3066\u4f7f\u3046\u3002\n% mv /usr/local/var/openldap-data/DB_CONFIG.example /usr/local/var/openldap-data/DB_CONFIG         \n\n\nid2entry.bdb\nopenldap-data/ \u306b id2entry.bdb \u304c\u5b58\u5728\u3057\u306a\u3044\u3068 slapd \u304c\u30b9\u30bf\u30fc\u30c8\u3057\u306a\u3044\u3002\n% slaptest\n54701b7c bdb_db_open: database \"dc=localhost\": db_open(/usr/local/var/openldap-data/id2entry.bdb) failed: No such file or directory (2).\n54701b7c backend_startup_one (type=bdb, suffix=\"dc=localhost\"): bi_db_open failed! (2)\nslap_startup failed (test would succeed using the -u switch)\n\n\u540c\u68b1\u306e *.ldif \u3092 slapadd \u3057\u3066\u3084\u308b\u3068\u4f5c\u6210\u3055\u308c\u308b\u3002\n% slapadd -l /usr/local/etc/openldap/schema/core.ldif\n\n\nbefore\n\n% ls -1\nDB_CONFIG                           \n__db.001\n__db.002\n__db.003\nalock\n\n\nafter\n\n% ls -1 \nDB_CONFIG\n__db.001\n__db.002\n__db.003\nalock\ndn2id.bdb\nid2entry.bdb\nlog.0000000001\n\n\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f \nhttp://hryksbt.b.sourceforge.jp/archives/421\n\n\u8d77\u52d5\nslaptest \u3067OK\u304c\u51fa\u305f\u3089\u8d77\u52d5\u3059\u308b\u3002\n% slaptest\n54701c89 bdb_monitor_db_open: monitoring disabled; configure monitor database to enable\nconfig file testing succeeded\n\nmonitoring disabled; \u306f\u3068\u308a\u3042\u3048\u305a\u6c17\u306b\u3057\u306a\u304f\u3066\u3088\u3044\u3002\n% sudo /usr/local/libexec/slapd\n\n\u3084\u3063\u305f\u306d\uff01\n\n\u304a\u307e\u3051\n\u4e00\u6c17\u306b\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\u3002\u3053\u306e\u5148\u30e6\u30fc\u30b6\u4f5c\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u9032\u6357\u304c\u3042\u3063\u305f\u3089\u8ffd\u52a0\u3057\u3066\u3044\u304f\u3088\u3066\u3044\u3002\nhttps://github.com/kwappa/ldap_toolkit\n\nActiveDirectory\u3067\u30e6\u30fc\u30b6\u8a8d\u8a3c\u3059\u308b\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u305f\u304f\u3066\u3001\u958b\u767a\u74b0\u5883\u3068\u3057\u3066\u624b\u5143\u306bOpenLDAP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u3089\u3061\u3087\u3063\u3068\u5927\u5909\u3060\u3063\u305f\u306e\u3067\u4f5c\u696d\u30e1\u30e2\u3002\n\n# \u74b0\u5883\u3068\u95a2\u9023\u30ea\u30f3\u30af\n\n* MacOSX 10.10.1 (Yosemite)\n\n* https://github.com/IntersectAustralia/acdata/wiki/Setting-up-OpenLDAP\n\n* https://github.com/Homebrew/homebrew-dupes/blob/master/openldap.rb\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n% brew info openldap\nopenldap: stable 2.4.39\nhttp://www.openldap.org/software/\n/usr/local/Cellar/openldap/2.4.39 (131 files, 7.4M) *\n  Built from source with: --with-berkeley-db\nFrom: https://github.com/homebrew/homebrew-dupes/blob/master/openldap.rb\n==> Dependencies\nRequired: openssl \u2714\nOptional: berkeley-db \u2714\n==> Options\n--with-berkeley-db\n        Build with berkeley-db support\n--with-memberof\n        Include memberof overlay\n--with-sssvlv\n        Enable server side sorting and virtual list view\n```\n\n```\n% brew install homebrew/dupes/openldap --with-berkeley-db\n```\n\n## symlink\u3092\u4f5c\u308b\n\n`slapd` \u306f `libexec` \u306b\u3044\u308b\u306e\u304c\u666e\u901a\u3063\u307d\u3044\u306e\u3067\u3001Homebrew\u306e\u6d41\u5100\u306b\u5f93\u3063\u3066\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068symlink\u3092\u4f5c\u3063\u3066\u304a\u304f\u3002\n\n```\n% mkdir /usr/local/libexec \n% ln -s /usr/local/Cellar/openldap/2.4.39/libexec/slapd /usr/local/libexec\n```\n\n## \u8a2d\u5b9a\n\nOpenLDAP\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u306f\u3053\u3053\u3002\n\n```\n/usr/local/etc/openldap\n```\n\n### `slapd.conf`\n\n#### `rootpw`\n\n\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9\u3092 `slappasswd` \u3067\u4f5c\u6210\u3057\u3001`slapd.conf` \u306b\u66f8\u3044\u3066\u304a\u304f\u3002\n\n```\n% slappasswd\nNew password:\nRe-enter new password:\n{SSHA}+*******************************\n```\n\n#### `sufffix` , `rootdn`\n\n\u624b\u5143\u3067\u52d5\u304b\u3059\u7528\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u304a\u304f\u3002\n\n* suffix\n * `dc=localhost`\n* rootdn\n * `cn=admin,dc=localhost`\n\n#### `slapd.conf`\n\n\u6700\u7d42\u7684\u306b\u3053\u3046\u3044\u3046\u4fee\u6b63\u306b\u306a\u308b\u3002\n\n```slap.conf\nsuffix\t\t\"dc=localhost\"\nrootdn\t\t\"cn=admin,dc=localhost\"\nrootpw\t\t{SSHA}+*******************************\n```\n\n### `DB_CONFIG`\n\n`slapd.conf` \u306b\u306f `directory\t/usr/local/var/openldap-data` \u306e\u6307\u5b9a\u304c\u3042\u308b\u3002\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3053\u3053\u306b\u306a\u308b\u3002\n\n`DB_CONFIG.example` \u306f `/usr/local/etc/openldap` \u306b\u3042\u308b\u3082\u306e\u3068\u540c\u4e00\u306a\u306e\u3067rename\u3057\u3066\u4f7f\u3046\u3002\n\n```\n% mv /usr/local/var/openldap-data/DB_CONFIG.example /usr/local/var/openldap-data/DB_CONFIG         \n```\n\n### id2entry.bdb\n\n`openldap-data/` \u306b `id2entry.bdb` \u304c\u5b58\u5728\u3057\u306a\u3044\u3068 `slapd` \u304c\u30b9\u30bf\u30fc\u30c8\u3057\u306a\u3044\u3002\n\n```\n% slaptest\n54701b7c bdb_db_open: database \"dc=localhost\": db_open(/usr/local/var/openldap-data/id2entry.bdb) failed: No such file or directory (2).\n54701b7c backend_startup_one (type=bdb, suffix=\"dc=localhost\"): bi_db_open failed! (2)\nslap_startup failed (test would succeed using the -u switch)\n```\n\n\u540c\u68b1\u306e `*.ldif` \u3092 `slapadd` \u3057\u3066\u3084\u308b\u3068\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n```\n% slapadd -l /usr/local/etc/openldap/schema/core.ldif\n```\n\n* before\n\n```\n% ls -1\nDB_CONFIG                           \n__db.001\n__db.002\n__db.003\nalock\n```\n\n* after\n\n```\n% ls -1 \nDB_CONFIG\n__db.001\n__db.002\n__db.003\nalock\ndn2id.bdb\nid2entry.bdb\nlog.0000000001\n```\n\n\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f :sushi:\nhttp://hryksbt.b.sourceforge.jp/archives/421\n\n## \u8d77\u52d5\n\n`slaptest` \u3067OK\u304c\u51fa\u305f\u3089\u8d77\u52d5\u3059\u308b\u3002\n\n```\n% slaptest\n54701c89 bdb_monitor_db_open: monitoring disabled; configure monitor database to enable\nconfig file testing succeeded\n```\n\n`monitoring disabled;` \u306f\u3068\u308a\u3042\u3048\u305a\u6c17\u306b\u3057\u306a\u304f\u3066\u3088\u3044\u3002\n\n```\n% sudo /usr/local/libexec/slapd\n```\n\n\u3084\u3063\u305f\u306d\uff01\n\n# \u304a\u307e\u3051\n\n\u4e00\u6c17\u306b\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\u3002\u3053\u306e\u5148\u30e6\u30fc\u30b6\u4f5c\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u9032\u6357\u304c\u3042\u3063\u305f\u3089\u8ffd\u52a0\u3057\u3066\u3044\u304f\u3088\u3066\u3044\u3002\n\nhttps://github.com/kwappa/ldap_toolkit\n", "tags": ["openldap"]}