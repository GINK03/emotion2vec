{"context": "\n\n\u8981\u4ef6\n\n/srv/htdocs/ \u3092\u30c7\u30b6\u30a4\u30ca\u304cFTP\u3067\u8aad\u307f\u66f8\u304d\u3057\u305f\u3044\u3002\n\u5ff5\u306e\u305f\u3081 /srv/htdocs/ \u3088\u308a\u4e0a\u306b\u306f\u79fb\u52d5\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npacman -Sy vsftpd\nadduser designer\npasswd designer\n\n\n\u30d5\u30a1\u30a4\u30eb\u30ea\u30b9\u30c8\n\n/etc/vsftpd.conf\n/etc/vsftpd/vsftpd_user_conf/designer\n/etc/vsftpd/vsftpd.user_list\n/etc/vsftpd/vsftpd.chroot_list\n\n\n\u8a2d\u5b9a\n\n/etc/vsftpd.conf\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\nlocal_umask=022\ndirmessage_enable=YES\nxferlog_enable=YES\nconnect_from_port_20=YES\nchroot_local_user=YES\nchroot_list_enable=YES\nchroot_list_file=/etc/vsftpd/vsftpd.chroot_list\nlisten=YES\n\nuserlist_deny=NO\nuserlist_enable=YES\nuserlist_file=/etc/vsftpd/vsftpd.user_list\nuser_config_dir=/etc/vsftpd/vsftpd_user_conf\nseccomp_sandbox=NO\nallow_writeable_chroot=YES\n\n\n\nseccomp_sandbox=NO\nallow_writeable_chroot=YES\n\n\u3053\u308c\u304c\u306a\u3044\u3068\u63a5\u7d9a\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\u53c2\u8003:\n\n500 OOPS: priv_sock_get_cmd or 500 OOPS: vsftpd: refusing to run with writable root inside chroot() | digitalwhores\nvsftpd saying 500 OOPS: priv_sock_get_cmd (after update?..) (Page 1) / Networking, Server, and Protection / Arch Linux Forums\n\n\n/etc/vsftpd/vsftpd_user_conf/designer\nlocal_root=/srv/htdocs/\n\n\n\nFTP\u63a5\u7d9a\u6642\u3001/srv/htdocs/ \u306b\u79fb\u52d5\n\n\n/etc/vsftpd/vsftpd.user_list\ndesigner\n\n\n\nFTP\u63a5\u7d9a\u3067\u304d\u308b\u30e6\u30fc\u30b6\u3092\u9650\u5b9a\u3059\u308b\n\n\n/etc/vsftpd/vsftpd.chroot_list\nlocal_root=/srv/htdocs\n\n\n\nFTP\u63a5\u7d9a\u3068\u3068\u3082\u306b /srv/htdocs \u306bchroot\u3002 /srv/htdocs \u3092 / \u3068\u307f\u306a\u3059\u3002\n\n\nvsftpd\u30b5\u30fc\u30d3\u30b9\u958b\u59cb\nsystemctl start vsftpd\n\n# \u8981\u4ef6\n\n* /srv/htdocs/ \u3092\u30c7\u30b6\u30a4\u30ca\u304cFTP\u3067\u8aad\u307f\u66f8\u304d\u3057\u305f\u3044\u3002\n* \u5ff5\u306e\u305f\u3081 /srv/htdocs/ \u3088\u308a\u4e0a\u306b\u306f\u79fb\u52d5\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\npacman -Sy vsftpd\nadduser designer\npasswd designer\n```\n\n# \u30d5\u30a1\u30a4\u30eb\u30ea\u30b9\u30c8\n\n* /etc/vsftpd.conf\n* /etc/vsftpd/vsftpd_user_conf/designer\n* /etc/vsftpd/vsftpd.user_list\n* /etc/vsftpd/vsftpd.chroot_list\n\n# \u8a2d\u5b9a\n\n```bash:/etc/vsftpd.conf\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\nlocal_umask=022\ndirmessage_enable=YES\nxferlog_enable=YES\nconnect_from_port_20=YES\nchroot_local_user=YES\nchroot_list_enable=YES\nchroot_list_file=/etc/vsftpd/vsftpd.chroot_list\nlisten=YES\n\nuserlist_deny=NO\nuserlist_enable=YES\nuserlist_file=/etc/vsftpd/vsftpd.user_list\nuser_config_dir=/etc/vsftpd/vsftpd_user_conf\nseccomp_sandbox=NO\nallow_writeable_chroot=YES\n```\n\n> seccomp_sandbox=NO\n> allow_writeable_chroot=YES\n\n\u3053\u308c\u304c\u306a\u3044\u3068\u63a5\u7d9a\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\n\u53c2\u8003:\n\n* [500 OOPS: priv_sock_get_cmd or 500 OOPS: vsftpd: refusing to run with writable root inside chroot() | digitalwhores](http://www.digitalwhores.net/linux/500-oops-priv_sock_get_cmd/)\n* [vsftpd saying 500 OOPS: priv_sock_get_cmd (after update?..) (Page 1) / Networking, Server, and Protection / Arch Linux Forums](https://bbs.archlinux.org/viewtopic.php?id=147074)\n\n```bash:/etc/vsftpd/vsftpd_user_conf/designer\nlocal_root=/srv/htdocs/\n```\n\n* FTP\u63a5\u7d9a\u6642\u3001/srv/htdocs/ \u306b\u79fb\u52d5\n\n```bash:/etc/vsftpd/vsftpd.user_list\ndesigner\n```\n\n* FTP\u63a5\u7d9a\u3067\u304d\u308b\u30e6\u30fc\u30b6\u3092\u9650\u5b9a\u3059\u308b\n\n```bash:/etc/vsftpd/vsftpd.chroot_list\nlocal_root=/srv/htdocs\n```\n\n* FTP\u63a5\u7d9a\u3068\u3068\u3082\u306b /srv/htdocs \u306bchroot\u3002 /srv/htdocs \u3092 / \u3068\u307f\u306a\u3059\u3002\n\n# vsftpd\u30b5\u30fc\u30d3\u30b9\u958b\u59cb\n\n```bash:\nsystemctl start vsftpd\n```\n", "tags": ["ftp", "vsftpd"]}