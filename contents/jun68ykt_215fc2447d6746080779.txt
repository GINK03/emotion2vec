{"context": "Rails\u30ac\u30a4\u30c9\u300cActive Record \u306e\u95a2\u9023\u4ed8\u3051 (\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3)\u300d\u306e\u7ae0\u30012.9 \u30dd\u30ea\u30e2\u30fc\u30d5\u30a3\u30c3\u30af\u95a2\u9023\u4ed8\u3051 \u306e\u5199\u7d4c\u3067\u3059\u3002\n\n\u76ee\u7684\n\u5199\u7d4c\u306b\u3088\u308a\u3001\u30dd\u30ea\u30e2\u30fc\u3057\u3066\u308b\u305c\u611f\u3092\u5473\u308f\u3046\u3002\n\n\u6e96\u5099\n\nrails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 testapp\u3000\u3092\u4f5c\u3063\u3066\u3042\u308a\u307e\u3059\u3002\n[ykt68@macbook testapp]$ ruby -v\nruby 2.2.6p396 (2016-11-15 revision 56800) [x86_64-darwin15]\n[ykt68@macbook testapp]$ rails -v\nRails 5.0.1\n[ykt68@macbook testapp]$ ls\nGemfile     README.md   app     config      db      log     test        vendor\nGemfile.lock    Rakefile    bin     config.ru   lib     public      tmp\n[ykt68@macbook testapp]$ rails s\n=> Booting Puma\n=> Rails 5.0.1 application starting in development on http://localhost:3000\n=> Run `rails server -h` for more startup options\nPuma starting in single mode...\n* Version 3.7.0 (ruby 2.2.6-p396), codename: Snowy Sagebrush\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://0.0.0.0:3000\nUse Ctrl-C to stop\n^CExiting\n[ykt68@macbook testapp]$\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fMySQL\u3067\u3059\u3002\n[ykt68@macbook testapp]$ cat config/database.yml \ndefault: &default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password: root\n  socket: /Applications/MAMP/tmp/mysql/mysql.sock\n\ndevelopment:\n  <<: *default\n  database: testapp_dev\n\n\n\u30e2\u30c7\u30eb\u4f5c\u6210\n\n(1) rails g model \u306b\u3066\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nPicture\n[ykt68@macbook testapp]$ rails g model picture name:string imageable:references\nRunning via Spring preloader in process 5156\nExpected string default value for '--jbuilder'; got true (boolean)\n      invoke  active_record\n      create    db/migrate/20170219012701_create_pictures.rb\n      create    app/models/picture.rb\n      invoke    test_unit\n      create      test/models/picture_test.rb\n      create      test/fixtures/pictures.yml\n[ykt68@macbook testapp]$\n\n\nEmployee\n[ykt68@macbook testapp]$ rails g model employee name:string\nRunning via Spring preloader in process 5261\nExpected string default value for '--jbuilder'; got true (boolean)\n      invoke  active_record\n      create    db/migrate/20170219012813_create_employees.rb\n      create    app/models/employee.rb\n      invoke    test_unit\n      create      test/models/employee_test.rb\n      create      test/fixtures/employees.yml\n[ykt68@macbook testapp]$\n\n\nProduct\n[ykt68@macbook testapp]$ rails g model product name:string\nRunning via Spring preloader in process 5331\nExpected string default value for '--jbuilder'; got true (boolean)\n      invoke  active_record\n      create    db/migrate/20170219012838_create_products.rb\n      create    app/models/product.rb\n      invoke    test_unit\n      create      test/models/product_test.rb\n      create      test/fixtures/products.yml\n[ykt68@macbook testapp]$\n\n\n(2) \u4f5c\u6210\u3055\u308c\u305f\u30e2\u30c7\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nPicture\n\u4fee\u6b63\u524d\uff1a\nclass Picture < ApplicationRecord\n  belongs_to :imageable\nend\n\npolymorphic: true\u3092\u8ffd\u52a0\u3002\n\u4fee\u6b63\u5f8c\uff1a\nclass Picture < ApplicationRecord\n  belongs_to :imageable, polymorphic: true\nend\n\n\nEmployee\n\u4fee\u6b63\u524d:\nclass Employee < ApplicationRecord\nend\n\nhas_many :pictures, as: :imageable\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4fee\u6b63\u5f8c:\nclass Employee < ApplicationRecord\n  has_many :pictures, as: :imageable\nend\n\n\nProduct\n\u4fee\u6b63\u524d:\nclass Product < ApplicationRecord\nend\n\nhas_many :pictures, as: :imageable\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4fee\u6b63\u5f8c:\nclass Product < ApplicationRecord\n  has_many :pictures, as: :imageable\nend\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\nCreatePictures\n\u4fee\u6b63\u524d\uff1a\nclass CreatePictures < ActiveRecord::Migration[5.0]\n  def change\n    create_table :pictures do |t|\n      t.string :name\n      t.references :imageable, foreign_key: true\n\n      t.timestamps\n    end\n  end\nend\n\nforeign_key\u3000\u3092 polymorphic\u306b\u4fee\u6b63\u3057\u3066\u4ee5\u4e0b\u3068\u3057\u307e\u3059\u3002\n\u4fee\u6b63\u5f8c\uff1a\nclass CreatePictures < ActiveRecord::Migration[5.0]\n  def change\n    create_table :pictures do |t|\n      t.string :name\n      t.references :imageable, polymorphic: true\n\n      t.timestamps\n    end\n  end\nend\n\nCreatePictures\u304a\u3088\u3073CreateEmployees\u306f\u4fee\u6b63\u4e0d\u8981\u3067\u3001migration \u3092\u5b9f\u884c\n\n[ykt68@macbook testapp]$ rails db:migrate\n== 20170219102701 CreatePictures: migrating ===================================\n-- create_table(:pictures)\n   -> 0.0274s\n== 20170219102701 CreatePictures: migrated (0.0275s) ==========================\n\n== 20170219102813 CreateEmployees: migrating ==================================\n-- create_table(:employees)\n   -> 0.0246s\n== 20170219102813 CreateEmployees: migrated (0.0247s) =========================\n\n== 20170219102838 CreateProducts: migrating ===================================\n-- create_table(:products)\n   -> 0.0186s\n== 20170219102838 CreateProducts: migrated (0.0187s) ==========================\n\n[ykt68@macbook testapp]$\n\n\npictures\u30c6\u30fc\u30d6\u30eb\u306e\u78ba\u8a8d\nMySQL\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4ee5\u4e0b\u3067\u78ba\u8a8d\nmysql> SHOW CREATE TABLE pictures;\n+----------+-----------------------------------------------------------------------------+\n| Table    | Create Table                                                                                                                                                                                                                                                                                                                                                                                                          |\n+----------+-----------------------------------------------------------------------------+\n| pictures | \n\nCREATE TABLE `pictures` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `imageable_type` varchar(255) DEFAULT NULL,\n  `imageable_id` int(11) DEFAULT NULL,\n  `created_at` datetime NOT NULL,\n  `updated_at` datetime NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_pictures_on_imageable_type_and_imageable_id` (`imageable_type`,`imageable_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n\n+----------+-----------------------------------------------------------------------------+```\n1 row in set (0.00 sec)\n\n\u4e0a\u8a18\u306eDDL\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001pictures \u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\nt.references :imageable, polymorphic: true\n\n\u304c\u3001\n  `imageable_type` varchar(255) DEFAULT NULL,\n  `imageable_id` int(11) DEFAULT NULL,\n\n\u3068\u3057\u3066\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u6295\u5165\n\u00a0\u00a0\u5f8c\u306e\u78ba\u8a8d\u3092\u5206\u304b\u308a\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001employees\u30c6\u30fc\u30d6\u30eb\u306eid\u3092201\u304b\u3089\u3001\nproducts\u306eid\u30929001\u304b\u3089\u4ed8\u756a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3001\u4ee5\u4e0b\u3067\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u4f5c\u6210\n\ndb/seed.rb\nActiveRecord::Base.connection_pool.with_connection { |con|\n  con.execute('ALTER TABLE employees AUTO_INCREMENT=201')\n  con.execute('ALTER TABLE products AUTO_INCREMENT=9001')\n}\n\n%w[\u91ce\u6bd4 \u525b\u7530 \u9aa8\u5ddd \u51fa\u6728\u6749].each do |e|\n  Employee.create name:e\nend\n\n%w[\u3069\u3053\u3067\u3082\u30c9\u30a2 \u30bf\u30b1\u30b3\u30d7\u30bf\u30fc \u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9].each do |e|\n  Product.create name:e\nend\n\n\ndb:seed \u30bf\u30b9\u30af\u3092\u5b9f\u884c\n[ykt68@macbook testapp]$ rails db:seed\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u3053\u3053\u304b\u3089\u306f\u3001rails console \u3067\u78ba\u8a8d\n[ykt68@macbook testapp]$ rails c\nRunning via Spring preloader in process 8313\nLoading development environment (Rails 5.0.1)\n\n1.Employee \u3068Product\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u5168\u4ef6\u8868\u793a\nirb(main):001:0> Employee.all\n  Employee Load (0.4ms)  SELECT `employees`.* FROM `employees`\n=> #<ActiveRecord::Relation [#<Employee id: 201, name: \"\u91ce\u6bd4\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Employee id: 202, name: \"\u525b\u7530\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Employee id: 203, name: \"\u9aa8\u5ddd\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Employee id: 204, name: \"\u51fa\u6728\u6749\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">]>\nirb(main):002:0> Product.all\n  Product Load (0.5ms)  SELECT `products`.* FROM `products`\n=> #<ActiveRecord::Relation [#<Product id: 9001, name: \"\u3069\u3053\u3067\u3082\u30c9\u30a2\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Product id: 9002, name: \"\u30bf\u30b1\u30b3\u30d7\u30bf\u30fc\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Product id: 9003, name: \"\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">]>\n\n2.Picture \u30ec\u30b3\u30fc\u30c9\u30922\u4ef6\u4fdd\u5b58\nirb(main):003:0> pic1 = Picture.create name:'\u3042\u308b\u65e5\u306e\u306e\u3073\u592a', imageable: Employee.find(201)\n  Employee Load (0.6ms)  SELECT  `employees`.* FROM `employees` WHERE `employees`.`id` = 201 LIMIT 1\n   (0.2ms)  BEGIN\n  SQL (0.4ms)  INSERT INTO `pictures` (`name`, `imageable_type`, `imageable_id`, `created_at`, `updated_at`) VALUES ('\u3042\u308b\u65e5\u306e\u306e\u3073\u592a', 'Employee', 201, '2017-02-19 02:26:49', '2017-02-19 02:26:49')\n   (0.5ms)  COMMIT\n=> #<Picture id: 1, name: \"\u3042\u308b\u65e5\u306e\u306e\u3073\u592a\", imageable_type: \"Employee\", imageable_id: 201, created_at: \"2017-02-19 02:26:49\", updated_at: \"2017-02-19 02:26:49\">\n\nirb(main):004:0> pic2 = Picture.create name:'\u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059', imageable: Product.find(9003)\n  Product Load (0.6ms)  SELECT  `products`.* FROM `products` WHERE `products`.`id` = 9003 LIMIT 1\n   (0.2ms)  BEGIN\n  SQL (0.4ms)  INSERT INTO `pictures` (`name`, `imageable_type`, `imageable_id`, `created_at`, `updated_at`) VALUES ('\u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059', 'Product', 9003, '2017-02-19 02:27:35', '2017-02-19 02:27:35')\n   (3.3ms)  COMMIT\n=> #<Picture id: 2, name: \"\u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059\", imageable_type: \"Product\", imageable_id: 9003, created_at: \"2017-02-19 02:27:35\", updated_at: \"2017-02-19 02:27:35\">\n\n\n3.Picture\u306eimageable\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u7570\u306a\u308b\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5165\u308b\u3053\u3068\u3092\u78ba\u8a8d\nirb(main):005:0> pic1.imageable\n=> #<Employee id: 201, name: \"\u91ce\u6bd4\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">\n\nirb(main):006:0> pic2.imageable\n=> #<Product id: 9003, name: \"\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">\n\n\u3046\u3049\u3049\u3001\u30dd\u30ea\u30e2\u30fc\u3057\u3066\u308b\u305c\u3002ActiveRecord\u4fbf\u5229\u6749\u30ef\u30ed\u30bf\u3002\n\u00a0\u00a0\u3061\u306a\u307f\u306b\u3001pictures \u30c6\u30fc\u30d6\u30eb\u306e \n\nimageable_type \u30ab\u30e9\u30e0\u306b\u306f\u3001\u30e2\u30c7\u30eb\u30af\u30e9\u30b9\u540d\nimageable_id \u30ab\u30e9\u30e0\u306b\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u30af\u30e9\u30b9\u306eid\n\n\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u4ee5\u4e0b\u3067\u78ba\u8a8d\nmysql> select * from pictures;\n+----+---------------------------------+----------------+--------------+---------------------+---------------------+\n| id | name                            | imageable_type | imageable_id | created_at          | updated_at          |\n+----+---------------------------------+----------------+--------------+---------------------+---------------------+\n|  1 | \u3042\u308b\u65e5\u306e\u306e\u3073\u592a                    | Employee       |          201 | 2017-02-19 02:26:49 | 2017-02-19 02:26:49 |\n|  2 | \u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059  | Product        |         9003 | 2017-02-19 02:27:35 | 2017-02-19 02:27:35 |\n+----+---------------------------------+----------------+--------------+---------------------+---------------------+\n2 rows in set (0.01 sec)\n\n\n4.imageable_type\u3092\u3001\u5b58\u5728\u3057\u306a\u3044\u30af\u30e9\u30b9\u540d\u306b\u5909\u3048\u3066\u307f\u308b\u3068\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5f37\u5f15\u306b\u30af\u30e9\u30b9\u540d\u3092\u5909\u3048\u3066\u307f\u307e\u3059\u3002\nmysql> update pictures set imageable_type='Hoge' where id=1;\nQuery OK, 1 row affected (0.00 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql> select * from pictures where id=1;\n+----+------------------+----------------+--------------+---------------------+---------------------+\n| id | name             | imageable_type | imageable_id | created_at          | updated_at          |\n+----+------------------+----------------+--------------+---------------------+---------------------+\n|  1 | \u3042\u308b\u65e5\u306e\u306e\u3073\u592a     | Hoge           |          201 | 2017-02-19 02:26:49 | 2017-02-19 02:26:49 |\n+----+------------------+----------------+--------------+---------------------+---------------------+\n1 row in set (0.00 sec)\n\n\u305d\u306e\u5f8c\u3001\u3053\u306ePicture\u30ec\u30b3\u30fc\u30c9\u3092\u53d6\u308a\u51fa\u305d\u3046\u3068\u3057\u3066\u307f\u307e\u3059\u3002\n[ykt68@macbook testapp]$ rails c\nRunning via Spring preloader in process 10855\nLoading development environment (Rails 5.0.1)\n\nPicture.find 1\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u304d\u3084\u3001\nirb(main):001:0> pict1 = Picture.find 1\n  Picture Load (0.6ms)  SELECT  `pictures`.* FROM `pictures` WHERE `pictures`.`id` = 1 LIMIT 1\n=> #<Picture id: 1, name: \"\u3042\u308b\u65e5\u306e\u306e\u3073\u592a\", imageable_type: \"Hoge\", imageable_id: 201, created_at: \"2017-02-19 02:26:49\", updated_at: \"2017-02-19 02:26:49\">\n\n\u4e0a\u8a18\u306e\u3068\u304a\u308a\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u304c\u3001pict1\u306eimageable\u3092\u53d6\u308a\u3060\u305d\u3046\u3068\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bNameError\u3000\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\nirb(main):002:0> pict1.imageable\nNameError: uninitialized constant Hoge\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:268:in `const_get'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:268:in `block in constantize'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:266:in `each'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:266:in `inject'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:266:in `constantize'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/core_ext/string/inflections.rb:66:in `constantize'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/belongs_to_polymorphic_association.rb:7:in `klass'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/belongs_to_association.rb:55:in `find_target?'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/association.rb:138:in `load_target'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/association.rb:53:in `reload'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/singular_association.rb:14:in `reader'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/builder/association.rb:111:in `imageable'\n    from (irb):2\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/console.rb:65:in `start'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/console_helper.rb:9:in `start'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:78:in `console'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands.rb:18:in `<top (required)>'\n    from /Users/ykt68/MyProjects/testapp/bin/rails:9:in `<top (required)>'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from -e:1:in `<main>'\nirb(main):003:0>\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\u00a0\u00a0Picture\u306eimageable\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u53d6\u5f97\u3067\u304d\u308b\u30af\u30e9\u30b9\u3092\u3001Employee\u3068Product\u3060\u3051\u3067\u306f\u306a\u304f\n\u5f8c\u304b\u3089\u5897\u3084\u3057\u3066\u3044\u3051\u307e\u3059\u306d\u3002\u4fbf\u5229\u3002\nRails\u30ac\u30a4\u30c9\u300cActive Record \u306e\u95a2\u9023\u4ed8\u3051 (\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3)\u300d\u306e\u7ae0\u3001[2.9 \u30dd\u30ea\u30e2\u30fc\u30d5\u30a3\u30c3\u30af\u95a2\u9023\u4ed8\u3051]\n(https://railsguides.jp/association_basics.html#%E3%83%9D%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E9%96%A2%E9%80%A3%E4%BB%98%E3%81%91) \u306e\u5199\u7d4c\u3067\u3059\u3002\n\n# \u76ee\u7684\n\u5199\u7d4c\u306b\u3088\u308a\u3001\u30dd\u30ea\u30e2\u30fc\u3057\u3066\u308b\u305c\u611f\u3092\u5473\u308f\u3046\u3002\n\n# \u6e96\u5099\n\n#### rails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 testapp\u3000\u3092\u4f5c\u3063\u3066\u3042\u308a\u307e\u3059\u3002\n\n```shell-session\n[ykt68@macbook testapp]$ ruby -v\nruby 2.2.6p396 (2016-11-15 revision 56800) [x86_64-darwin15]\n[ykt68@macbook testapp]$ rails -v\nRails 5.0.1\n[ykt68@macbook testapp]$ ls\nGemfile\t\tREADME.md\tapp\t\tconfig\t\tdb\t\tlog\t\ttest\t\tvendor\nGemfile.lock\tRakefile\tbin\t\tconfig.ru\tlib\t\tpublic\t\ttmp\n[ykt68@macbook testapp]$ rails s\n=> Booting Puma\n=> Rails 5.0.1 application starting in development on http://localhost:3000\n=> Run `rails server -h` for more startup options\nPuma starting in single mode...\n* Version 3.7.0 (ruby 2.2.6-p396), codename: Snowy Sagebrush\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://0.0.0.0:3000\nUse Ctrl-C to stop\n^CExiting\n[ykt68@macbook testapp]$\n```\n\n#### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fMySQL\u3067\u3059\u3002\n\n```shell-session\n[ykt68@macbook testapp]$ cat config/database.yml \ndefault: &default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password: root\n  socket: /Applications/MAMP/tmp/mysql/mysql.sock\n\ndevelopment:\n  <<: *default\n  database: testapp_dev\n```\n\n# \u30e2\u30c7\u30eb\u4f5c\u6210\n###(1) ```rails g model``` \u306b\u3066\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n#### Picture\n```shell-session\n[ykt68@macbook testapp]$ rails g model picture name:string imageable:references\nRunning via Spring preloader in process 5156\nExpected string default value for '--jbuilder'; got true (boolean)\n      invoke  active_record\n      create    db/migrate/20170219012701_create_pictures.rb\n      create    app/models/picture.rb\n      invoke    test_unit\n      create      test/models/picture_test.rb\n      create      test/fixtures/pictures.yml\n[ykt68@macbook testapp]$\n```\n\n#### Employee\n\n```shell-session\n[ykt68@macbook testapp]$ rails g model employee name:string\nRunning via Spring preloader in process 5261\nExpected string default value for '--jbuilder'; got true (boolean)\n      invoke  active_record\n      create    db/migrate/20170219012813_create_employees.rb\n      create    app/models/employee.rb\n      invoke    test_unit\n      create      test/models/employee_test.rb\n      create      test/fixtures/employees.yml\n[ykt68@macbook testapp]$\n```\n\n#### Product\n\n```shell-session\n[ykt68@macbook testapp]$ rails g model product name:string\nRunning via Spring preloader in process 5331\nExpected string default value for '--jbuilder'; got true (boolean)\n      invoke  active_record\n      create    db/migrate/20170219012838_create_products.rb\n      create    app/models/product.rb\n      invoke    test_unit\n      create      test/models/product_test.rb\n      create      test/fixtures/products.yml\n[ykt68@macbook testapp]$\n```\n\n### (2) \u4f5c\u6210\u3055\u308c\u305f\u30e2\u30c7\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n#### Picture\n\u4fee\u6b63\u524d\uff1a\n\n```ruby\nclass Picture < ApplicationRecord\n  belongs_to :imageable\nend\n```\n```polymorphic: true```\u3092\u8ffd\u52a0\u3002\n\n\u4fee\u6b63\u5f8c\uff1a\n\n```ruby\nclass Picture < ApplicationRecord\n  belongs_to :imageable, polymorphic: true\nend\n```\n\n#### Employee\n\u4fee\u6b63\u524d:\n\n```ruby\nclass Employee < ApplicationRecord\nend\n```\n```has_many :pictures, as: :imageable```\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4fee\u6b63\u5f8c:\n\n```ruby\nclass Employee < ApplicationRecord\n  has_many :pictures, as: :imageable\nend\n```\n\n#### Product\n\u4fee\u6b63\u524d:\n\n```ruby\nclass Product < ApplicationRecord\nend\n```\n```has_many :pictures, as: :imageable```\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4fee\u6b63\u5f8c:\n\n```ruby\nclass Product < ApplicationRecord\n  has_many :pictures, as: :imageable\nend\n```\n\n\n# \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n### CreatePictures\n\u4fee\u6b63\u524d\uff1a\n\n```ruby\nclass CreatePictures < ActiveRecord::Migration[5.0]\n  def change\n    create_table :pictures do |t|\n      t.string :name\n      t.references :imageable, foreign_key: true\n\n      t.timestamps\n    end\n  end\nend\n```\n\n```foreign_key```\u3000\u3092 ```polymorphic```\u306b\u4fee\u6b63\u3057\u3066\u4ee5\u4e0b\u3068\u3057\u307e\u3059\u3002\n\u4fee\u6b63\u5f8c\uff1a\n\n```ruby\nclass CreatePictures < ActiveRecord::Migration[5.0]\n  def change\n    create_table :pictures do |t|\n      t.string :name\n      t.references :imageable, polymorphic: true\n\n      t.timestamps\n    end\n  end\nend\n```\n```CreatePictures```\u304a\u3088\u3073```CreateEmployees```\u306f\u4fee\u6b63\u4e0d\u8981\u3067\u3001migration \u3092\u5b9f\u884c\n\n```shell-session\n\n[ykt68@macbook testapp]$ rails db:migrate\n== 20170219102701 CreatePictures: migrating ===================================\n-- create_table(:pictures)\n   -> 0.0274s\n== 20170219102701 CreatePictures: migrated (0.0275s) ==========================\n\n== 20170219102813 CreateEmployees: migrating ==================================\n-- create_table(:employees)\n   -> 0.0246s\n== 20170219102813 CreateEmployees: migrated (0.0247s) =========================\n\n== 20170219102838 CreateProducts: migrating ===================================\n-- create_table(:products)\n   -> 0.0186s\n== 20170219102838 CreateProducts: migrated (0.0187s) ==========================\n\n[ykt68@macbook testapp]$\n```\n\n# pictures\u30c6\u30fc\u30d6\u30eb\u306e\u78ba\u8a8d\n\nMySQL\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4ee5\u4e0b\u3067\u78ba\u8a8d\n\n\n\n```shell-session\nmysql> SHOW CREATE TABLE pictures;\n+----------+-----------------------------------------------------------------------------+\n| Table    | Create Table                                                                                                                                                                                                                                                                                                                                                                                                          |\n+----------+-----------------------------------------------------------------------------+\n| pictures | \n```\n```sql\nCREATE TABLE `pictures` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `imageable_type` varchar(255) DEFAULT NULL,\n  `imageable_id` int(11) DEFAULT NULL,\n  `created_at` datetime NOT NULL,\n  `updated_at` datetime NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_pictures_on_imageable_type_and_imageable_id` (`imageable_type`,`imageable_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n```\n```\n+----------+-----------------------------------------------------------------------------+```\n1 row in set (0.00 sec)\n```\n\u4e0a\u8a18\u306eDDL\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001pictures \u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\n\n```ruby\nt.references :imageable, polymorphic: true\n```\n\u304c\u3001\n\n```sql\n  `imageable_type` varchar(255) DEFAULT NULL,\n  `imageable_id` int(11) DEFAULT NULL,\n```\n\u3068\u3057\u3066\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\u3002\n\n# \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u6295\u5165\n\n&nbsp;&nbsp;\u5f8c\u306e\u78ba\u8a8d\u3092\u5206\u304b\u308a\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001employees\u30c6\u30fc\u30d6\u30eb\u306eid\u3092201\u304b\u3089\u3001\nproducts\u306eid\u30929001\u304b\u3089\u4ed8\u756a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3001\u4ee5\u4e0b\u3067\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u4f5c\u6210\n\n```ruby:db/seed.rb\nActiveRecord::Base.connection_pool.with_connection { |con|\n  con.execute('ALTER TABLE employees AUTO_INCREMENT=201')\n  con.execute('ALTER TABLE products AUTO_INCREMENT=9001')\n}\n\n%w[\u91ce\u6bd4 \u525b\u7530 \u9aa8\u5ddd \u51fa\u6728\u6749].each do |e|\n  Employee.create name:e\nend\n\n%w[\u3069\u3053\u3067\u3082\u30c9\u30a2 \u30bf\u30b1\u30b3\u30d7\u30bf\u30fc \u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9].each do |e|\n  Product.create name:e\nend\n```\n\ndb:seed \u30bf\u30b9\u30af\u3092\u5b9f\u884c\n\n```shell-session\n[ykt68@macbook testapp]$ rails db:seed\n```\n\n# \u52d5\u4f5c\u78ba\u8a8d\n\n\u3053\u3053\u304b\u3089\u306f\u3001rails console \u3067\u78ba\u8a8d\n\n```irb\n[ykt68@macbook testapp]$ rails c\nRunning via Spring preloader in process 8313\nLoading development environment (Rails 5.0.1)\n```\n\n<b>1.Employee \u3068Product\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u5168\u4ef6\u8868\u793a</b>\n\n```irb\nirb(main):001:0> Employee.all\n  Employee Load (0.4ms)  SELECT `employees`.* FROM `employees`\n=> #<ActiveRecord::Relation [#<Employee id: 201, name: \"\u91ce\u6bd4\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Employee id: 202, name: \"\u525b\u7530\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Employee id: 203, name: \"\u9aa8\u5ddd\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Employee id: 204, name: \"\u51fa\u6728\u6749\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">]>\nirb(main):002:0> Product.all\n  Product Load (0.5ms)  SELECT `products`.* FROM `products`\n=> #<ActiveRecord::Relation [#<Product id: 9001, name: \"\u3069\u3053\u3067\u3082\u30c9\u30a2\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Product id: 9002, name: \"\u30bf\u30b1\u30b3\u30d7\u30bf\u30fc\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">, #<Product id: 9003, name: \"\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">]>\n```\n\n<b>2.Picture \u30ec\u30b3\u30fc\u30c9\u30922\u4ef6\u4fdd\u5b58</b>\n\n```irb\nirb(main):003:0> pic1 = Picture.create name:'\u3042\u308b\u65e5\u306e\u306e\u3073\u592a', imageable: Employee.find(201)\n  Employee Load (0.6ms)  SELECT  `employees`.* FROM `employees` WHERE `employees`.`id` = 201 LIMIT 1\n   (0.2ms)  BEGIN\n  SQL (0.4ms)  INSERT INTO `pictures` (`name`, `imageable_type`, `imageable_id`, `created_at`, `updated_at`) VALUES ('\u3042\u308b\u65e5\u306e\u306e\u3073\u592a', 'Employee', 201, '2017-02-19 02:26:49', '2017-02-19 02:26:49')\n   (0.5ms)  COMMIT\n=> #<Picture id: 1, name: \"\u3042\u308b\u65e5\u306e\u306e\u3073\u592a\", imageable_type: \"Employee\", imageable_id: 201, created_at: \"2017-02-19 02:26:49\", updated_at: \"2017-02-19 02:26:49\">\n```\n\n```irb\nirb(main):004:0> pic2 = Picture.create name:'\u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059', imageable: Product.find(9003)\n  Product Load (0.6ms)  SELECT  `products`.* FROM `products` WHERE `products`.`id` = 9003 LIMIT 1\n   (0.2ms)  BEGIN\n  SQL (0.4ms)  INSERT INTO `pictures` (`name`, `imageable_type`, `imageable_id`, `created_at`, `updated_at`) VALUES ('\u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059', 'Product', 9003, '2017-02-19 02:27:35', '2017-02-19 02:27:35')\n   (3.3ms)  COMMIT\n=> #<Picture id: 2, name: \"\u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059\", imageable_type: \"Product\", imageable_id: 9003, created_at: \"2017-02-19 02:27:35\", updated_at: \"2017-02-19 02:27:35\">\n\n```\n\n<b>3.Picture\u306eimageable\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u7570\u306a\u308b\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5165\u308b\u3053\u3068\u3092\u78ba\u8a8d</b>\n\n```irb\nirb(main):005:0> pic1.imageable\n=> #<Employee id: 201, name: \"\u91ce\u6bd4\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">\n```\n```irb\nirb(main):006:0> pic2.imageable\n=> #<Product id: 9003, name: \"\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\", created_at: \"2017-02-19 02:21:47\", updated_at: \"2017-02-19 02:21:47\">\n```\n\n\u3046\u3049\u3049\u3001\u30dd\u30ea\u30e2\u30fc\u3057\u3066\u308b\u305c\u3002ActiveRecord\u4fbf\u5229\u6749\u30ef\u30ed\u30bf\u3002\n\n&nbsp;&nbsp;\u3061\u306a\u307f\u306b\u3001pictures \u30c6\u30fc\u30d6\u30eb\u306e \n\n* imageable_type \u30ab\u30e9\u30e0\u306b\u306f\u3001\u30e2\u30c7\u30eb\u30af\u30e9\u30b9\u540d\n* imageable_id \u30ab\u30e9\u30e0\u306b\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u30af\u30e9\u30b9\u306eid\n\n\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u4ee5\u4e0b\u3067\u78ba\u8a8d\n\n```\nmysql> select * from pictures;\n+----+---------------------------------+----------------+--------------+---------------------+---------------------+\n| id | name                            | imageable_type | imageable_id | created_at          | updated_at          |\n+----+---------------------------------+----------------+--------------+---------------------+---------------------+\n|  1 | \u3042\u308b\u65e5\u306e\u306e\u3073\u592a                    | Employee       |          201 | 2017-02-19 02:26:49 | 2017-02-19 02:26:49 |\n|  2 | \u3069\u3089\u3048\u3082\u3093\u3001\u3082\u3057\u3082\u30dc\u30c3\u30af\u30b9\u3092\u53d6\u308a\u51fa\u3059  | Product        |         9003 | 2017-02-19 02:27:35 | 2017-02-19 02:27:35 |\n+----+---------------------------------+----------------+--------------+---------------------+---------------------+\n2 rows in set (0.01 sec)\n\n```\n\n<b>4.imageable_type\u3092\u3001\u5b58\u5728\u3057\u306a\u3044\u30af\u30e9\u30b9\u540d\u306b\u5909\u3048\u3066\u307f\u308b\u3068</b>\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5f37\u5f15\u306b\u30af\u30e9\u30b9\u540d\u3092\u5909\u3048\u3066\u307f\u307e\u3059\u3002\n\n```\nmysql> update pictures set imageable_type='Hoge' where id=1;\nQuery OK, 1 row affected (0.00 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql> select * from pictures where id=1;\n+----+------------------+----------------+--------------+---------------------+---------------------+\n| id | name             | imageable_type | imageable_id | created_at          | updated_at          |\n+----+------------------+----------------+--------------+---------------------+---------------------+\n|  1 | \u3042\u308b\u65e5\u306e\u306e\u3073\u592a     | Hoge           |          201 | 2017-02-19 02:26:49 | 2017-02-19 02:26:49 |\n+----+------------------+----------------+--------------+---------------------+---------------------+\n1 row in set (0.00 sec)\n```\n\n\u305d\u306e\u5f8c\u3001\u3053\u306ePicture\u30ec\u30b3\u30fc\u30c9\u3092\u53d6\u308a\u51fa\u305d\u3046\u3068\u3057\u3066\u307f\u307e\u3059\u3002\n\n```shell-session\n[ykt68@macbook testapp]$ rails c\nRunning via Spring preloader in process 10855\nLoading development environment (Rails 5.0.1)\n```\n\n```Picture.find 1```\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u304d\u3084\u3001\n\n```irb\nirb(main):001:0> pict1 = Picture.find 1\n  Picture Load (0.6ms)  SELECT  `pictures`.* FROM `pictures` WHERE `pictures`.`id` = 1 LIMIT 1\n=> #<Picture id: 1, name: \"\u3042\u308b\u65e5\u306e\u306e\u3073\u592a\", imageable_type: \"Hoge\", imageable_id: 201, created_at: \"2017-02-19 02:26:49\", updated_at: \"2017-02-19 02:26:49\">\n```\n\n\u4e0a\u8a18\u306e\u3068\u304a\u308a\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u304c\u3001```pict1```\u306e```imageable```\u3092\u53d6\u308a\u3060\u305d\u3046\u3068\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b```NameError```\u3000\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n```irb\nirb(main):002:0> pict1.imageable\nNameError: uninitialized constant Hoge\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:268:in `const_get'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:268:in `block in constantize'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:266:in `each'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:266:in `inject'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:266:in `constantize'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activesupport-5.0.1/lib/active_support/core_ext/string/inflections.rb:66:in `constantize'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/belongs_to_polymorphic_association.rb:7:in `klass'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/belongs_to_association.rb:55:in `find_target?'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/association.rb:138:in `load_target'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/association.rb:53:in `reload'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/singular_association.rb:14:in `reader'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/activerecord-5.0.1/lib/active_record/associations/builder/association.rb:111:in `imageable'\n\tfrom (irb):2\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/console.rb:65:in `start'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/console_helper.rb:9:in `start'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:78:in `console'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/gems/2.2.0/gems/railties-5.0.1/lib/rails/commands.rb:18:in `<top (required)>'\n\tfrom /Users/ykt68/MyProjects/testapp/bin/rails:9:in `<top (required)>'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n\tfrom /Users/ykt68/.rbenv/versions/2.2.6/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n\tfrom -e:1:in `<main>'\nirb(main):003:0>\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002<br>\n&nbsp;&nbsp;```Picture```\u306e```imageable```\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u53d6\u5f97\u3067\u304d\u308b\u30af\u30e9\u30b9\u3092\u3001```Employee```\u3068```Product```\u3060\u3051\u3067\u306f\u306a\u304f\n\u5f8c\u304b\u3089\u5897\u3084\u3057\u3066\u3044\u3051\u307e\u3059\u306d\u3002\u4fbf\u5229\u3002\n\n\n\n", "tags": ["Rails", "Ruby", "ActiveRecord", "polymorphic"]}