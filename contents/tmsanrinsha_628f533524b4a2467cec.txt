{"context": "ping\u3092\u6253\u3063\u3066\u30d1\u30b1\u30c3\u30c8\u304c\u8fd4\u3063\u3066\u304f\u308b\u306e\u306f\u308f\u304b\u308b\u3051\u3069\u3001\u3053\u306eIP\u30a2\u30c9\u30ec\u30b9\u3067\u3044\u3044\u3093\u3060\u3063\u3051\uff1f\u3068\u3044\u3046\u306e\u3092\u78ba\u304b\u3081\u305f\u3044\u306e\u3067\u3001\u9001\u4fe1\u5148\u3067\u78ba\u304b\u3081\u305f\u3044\u3002\n\u2192\u9001\u4fe1\u5148\u3067tcpdump\u3092\u4f7f\u3048\u3070\u304a\uff4b\u3002\nVagrant\u3067\u7acb\u3061\u4e0a\u3052\u305fUbuntu\u306bping\u3092\u9001\u308b\u4f8b\u3067\u8003\u3048\u308b\u3002\n\u30b2\u30b9\u30c8OS\u3067ifconfig\u3067IP\u30a2\u30c9\u30ec\u30b9\u3092\u8abf\u3079\u308b\u3002\nguest$ ifconfig\n:\neth1      Link encap:Ethernet  HWaddr 08:00:27:29:40:3f\n          inet addr:192.168.33.10  Bcast:192.168.33.255  Mask:255.255.255.0\n          inet6 addr: fe80::a00:27ff:fe29:403f/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:13041 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:7831 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:1019013 (1.0 MB)  TX bytes:628251 (628.2 KB)\n:\n\n192.168.33.10\u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\u30db\u30b9\u30c8OS\u3067ping\u3092\u6253\u3064\u3002\nhost$ ping 192.168.33.10\nPING 192.168.33.10 (192.168.33.10): 56 data bytes\n64 bytes from 192.168.33.10: icmp_seq=0 ttl=64 time=0.395 ms\n:\n\n\u30b2\u30b9\u30c8OS\u3067tcpdump\u3059\u308b\u3002-i\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u30eb\u30fc\u30d7\u30d0\u30c3\u30af(127.0.0.1)\u3092\u9664\u304f\u3082\u3063\u3068\u3082\u5c0f\u3055\u3044\u756a\u53f7\u3067\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u304c\u9078\u3070\u308c\u308b\u306e\u3067\u3001\u306a\u306b\u3082\u6765\u3066\u306a\u304b\u3063\u305f\u3089\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u5f15\u6570\u306bicmp\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001ping\u306e\u30a8\u30b3\u30fc\u8981\u6c42\u3068\u30a8\u30b3\u30fc\u5fdc\u7b54\u304c\u898b\u3089\u308c\u308b\u3002\nguest$ sudo tcpdump -i eth1 icmp\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth1, link-type EN10MB (Ethernet), capture size 65535 bytes\n13:33:32.169761 IP 192.168.33.1 > 192.168.33.10: ICMP echo request, id 45906, seq 0, length 64\n13:33:32.169808 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 0, length 64\n:\n\n\u30db\u30b9\u30c8OS\u3067tcpdump\u3059\u308b\u3068\u3001\u30a8\u30b3\u30fc\u5fdc\u7b54\u304c\u898b\u3089\u308c\u308b\nhost$ sudo tcpdump icmp\ntcpdump: data link type PKTAP\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on pktap, link-type PKTAP (Packet Tap), capture size 262144 bytes\n22:38:35.319694 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 302, length 64\n:\n\n\u3053\u3061\u3089\u3082\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3068\u30a8\u30b3\u30fc\u8981\u6c42\u304c\u898b\u3089\u308c\u308b\uff08\u6307\u5b9a\u3057\u306a\u3044\u6642\u306f\u4f55\u3092\u898b\u3066\u3044\u308b\uff1f\uff09\u3002\nhost$ sudo tcpdump -i vboxnet0 icmp\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on vboxnet0, link-type EN10MB (Ethernet), capture size 262144 bytes\n22:42:30.216089 IP 192.168.33.1 > 192.168.33.10: ICMP echo request, id 45906, seq 536, length 64\n22:42:30.216375 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 536, length 64\n:\n\n\u3061\u306a\u307f\u306b\u5fdc\u7b54\u3060\u3051\u898b\u305f\u3044\u3068\u304d\u306f\n$ sudo tcpdump 'icmp[0] == 0'\n\n\u8981\u6c42\u3060\u3051\u898b\u305f\u3044\u3068\u304d\u306f\n$ sudo tcpdump 'icmp[0] == 8'\n\n\u3068\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002or\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3002\n$ sudo tcpdump  'icmp[0] == 0 or icmp[0] == 8'\n\ntcpdump\u3092grep\u3057\u3066\u3082\u306a\u304b\u306a\u304b\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001-l\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3002-l\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3068\u30e9\u30a4\u30f3\u30d0\u30c3\u30d5\u30a1\u306b\u306a\u3063\u3066\u3001\u884c\u3054\u3068\u306b\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002\n$ sudo tcpdump -l | grep echo\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth1, link-type EN10MB (Ethernet), capture size 65535 bytes\n14:03:51.093896 IP 192.168.33.1 > 192.168.33.10: ICMP echo request, id 45906, seq 1812, length 64\n14:03:51.093935 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 1812, length 64\n:\n\n\n\u53c2\u8003\u8cc7\u6599\n\ntcpdump\u3067icmp\u3092\u30d5\u30a3\u30eb\u30bf\u3059\u308b - Qiita\ntcpdump \u3067\u30d1\u30a4\u30d7\u306b\u6e21\u3059\u3068\u304d\u306f -l \u3059\u308b - Qiita\nMan page of TCPDUMP\nICMP\u30bf\u30a4\u30d7\n\nping\u3092\u6253\u3063\u3066\u30d1\u30b1\u30c3\u30c8\u304c\u8fd4\u3063\u3066\u304f\u308b\u306e\u306f\u308f\u304b\u308b\u3051\u3069\u3001\u3053\u306eIP\u30a2\u30c9\u30ec\u30b9\u3067\u3044\u3044\u3093\u3060\u3063\u3051\uff1f\u3068\u3044\u3046\u306e\u3092\u78ba\u304b\u3081\u305f\u3044\u306e\u3067\u3001\u9001\u4fe1\u5148\u3067\u78ba\u304b\u3081\u305f\u3044\u3002\n\u2192\u9001\u4fe1\u5148\u3067tcpdump\u3092\u4f7f\u3048\u3070\u304a\uff4b\u3002\n\nVagrant\u3067\u7acb\u3061\u4e0a\u3052\u305fUbuntu\u306bping\u3092\u9001\u308b\u4f8b\u3067\u8003\u3048\u308b\u3002\n\n\u30b2\u30b9\u30c8OS\u3067ifconfig\u3067IP\u30a2\u30c9\u30ec\u30b9\u3092\u8abf\u3079\u308b\u3002\n\n\n```\nguest$ ifconfig\n:\neth1      Link encap:Ethernet  HWaddr 08:00:27:29:40:3f\n          inet addr:192.168.33.10  Bcast:192.168.33.255  Mask:255.255.255.0\n          inet6 addr: fe80::a00:27ff:fe29:403f/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:13041 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:7831 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:1019013 (1.0 MB)  TX bytes:628251 (628.2 KB)\n:\n```\n\n192.168.33.10\u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n\u30db\u30b9\u30c8OS\u3067ping\u3092\u6253\u3064\u3002\n\n```\nhost$ ping 192.168.33.10\nPING 192.168.33.10 (192.168.33.10): 56 data bytes\n64 bytes from 192.168.33.10: icmp_seq=0 ttl=64 time=0.395 ms\n:\n```\n\n\u30b2\u30b9\u30c8OS\u3067tcpdump\u3059\u308b\u3002`-i`\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u30eb\u30fc\u30d7\u30d0\u30c3\u30af(127.0.0.1)\u3092\u9664\u304f\u3082\u3063\u3068\u3082\u5c0f\u3055\u3044\u756a\u53f7\u3067\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u304c\u9078\u3070\u308c\u308b\u306e\u3067\u3001\u306a\u306b\u3082\u6765\u3066\u306a\u304b\u3063\u305f\u3089\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u5f15\u6570\u306bicmp\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001ping\u306e\u30a8\u30b3\u30fc\u8981\u6c42\u3068\u30a8\u30b3\u30fc\u5fdc\u7b54\u304c\u898b\u3089\u308c\u308b\u3002\n\n```\nguest$ sudo tcpdump -i eth1 icmp\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth1, link-type EN10MB (Ethernet), capture size 65535 bytes\n13:33:32.169761 IP 192.168.33.1 > 192.168.33.10: ICMP echo request, id 45906, seq 0, length 64\n13:33:32.169808 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 0, length 64\n:\n```\n\n\u30db\u30b9\u30c8OS\u3067tcpdump\u3059\u308b\u3068\u3001\u30a8\u30b3\u30fc\u5fdc\u7b54\u304c\u898b\u3089\u308c\u308b\n\n```\nhost$ sudo tcpdump icmp\ntcpdump: data link type PKTAP\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on pktap, link-type PKTAP (Packet Tap), capture size 262144 bytes\n22:38:35.319694 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 302, length 64\n:\n```\n\n\u3053\u3061\u3089\u3082\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3068\u30a8\u30b3\u30fc\u8981\u6c42\u304c\u898b\u3089\u308c\u308b\uff08\u6307\u5b9a\u3057\u306a\u3044\u6642\u306f\u4f55\u3092\u898b\u3066\u3044\u308b\uff1f\uff09\u3002\n\n```\nhost$ sudo tcpdump -i vboxnet0 icmp\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on vboxnet0, link-type EN10MB (Ethernet), capture size 262144 bytes\n22:42:30.216089 IP 192.168.33.1 > 192.168.33.10: ICMP echo request, id 45906, seq 536, length 64\n22:42:30.216375 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 536, length 64\n:\n```\n\n\u3061\u306a\u307f\u306b\u5fdc\u7b54\u3060\u3051\u898b\u305f\u3044\u3068\u304d\u306f\n\n```\n$ sudo tcpdump 'icmp[0] == 0'\n```\n\n\u8981\u6c42\u3060\u3051\u898b\u305f\u3044\u3068\u304d\u306f\n\n```\n$ sudo tcpdump 'icmp[0] == 8'\n```\n\n\u3068\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002or\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3002\n\n```\n$ sudo tcpdump  'icmp[0] == 0 or icmp[0] == 8'\n```\n\n`tcpdump`\u3092`grep`\u3057\u3066\u3082\u306a\u304b\u306a\u304b\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001`-l`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3002`-l`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3068\u30e9\u30a4\u30f3\u30d0\u30c3\u30d5\u30a1\u306b\u306a\u3063\u3066\u3001\u884c\u3054\u3068\u306b\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002\n\n```\n$ sudo tcpdump -l | grep echo\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth1, link-type EN10MB (Ethernet), capture size 65535 bytes\n14:03:51.093896 IP 192.168.33.1 > 192.168.33.10: ICMP echo request, id 45906, seq 1812, length 64\n14:03:51.093935 IP 192.168.33.10 > 192.168.33.1: ICMP echo reply, id 45906, seq 1812, length 64\n:\n```\n\n## \u53c2\u8003\u8cc7\u6599\n\n* [tcpdump\u3067icmp\u3092\u30d5\u30a3\u30eb\u30bf\u3059\u308b - Qiita](http://qiita.com/todanano/items/1991638f7b3ad35ee633)\n* [tcpdump \u3067\u30d1\u30a4\u30d7\u306b\u6e21\u3059\u3068\u304d\u306f -l \u3059\u308b - Qiita](http://qiita.com/albatross/items/0f429a7ffa7fae9b21f2)\n* [Man page of TCPDUMP](http://linuxjm.osdn.jp/html/tcpdump/man1/tcpdump.1.html)\n* [ICMP\u30bf\u30a4\u30d7](http://www.asahi-net.or.jp/~aa4t-nngk/ipttut/output/icmptypes.html)\n", "tags": ["tcpdump", "ping"]}