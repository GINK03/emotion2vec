{"tags": ["reactjs", "js"], "context": " More than 1 year has passed since last update.React (Facebook): managed state of controlled checkboxes\u306e\u30d1\u30af\u30ea\u3068\u81ea\u5206\u306e\u7406\u89e3\u306e\u305f\u3081\u306e\u30e1\u30e2\n\nindex.html\u306e\u6e96\u5099\n<!DOCTYPE html>\n<html>\n  <head>\n  \u00a6 <meta charset=\"UTF-8\" />\n  \u00a6 <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react.min.js\"></script>\n  \u00a6 <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react-dom.min.js\"></script>\n  \u00a6 <script src=\"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js\"></script>\n  </head>\n  <body>\n  \u00a6 <div id=\"content\"></div>\n    <script type=\"text/babel\">\n    // \u3053\u306e\u4e2d\u306bReact\u66f8\u304f\n    </script>\n  </body>\n</html>\n\n\nReact\u30af\u30e9\u30b9\u3068State\u5b9a\u7fa9\n2\u3064\u3042\u308binput\u306echeckbox\u304c\u305d\u308c\u305e\u308c\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u72b6\u614b\u3092\u6301\u3064\u305f\u3081\u306estate\u3092\u6e96\u5099\u3002\u3064\u3044\u3067\u306bReactDOM\u30ec\u30f3\u30c0\u30fc\u3082\u5b9a\u7fa9\u3002\nvar CheckboxDemo = React.createClass({\n  getInitialState: function () {\n    return {\n      data: [\n        {id: 1, selected: false },\n        {id: 2, selected: false }\n      ]\n    };\n  },\n  // \u3053\u306e\u4e0b\u306bForm\u3092\u66f8\u304f\n});\nReactDOM.render(\n  <CheckboxDemo />,\n  document.getElementById('content')\n);\n\n\nForm\u4f5c\u6210\nForm\u306e\u8981\u7d20\u3068\u3057\u3066checks\u3092\u5b9a\u7fa9\u3059\u308b\u3002map\u306e\u4e2d\u3067CheckboxDemo\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bthis\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306bbind\u3057\u3066\u304a\u304f\nrender: function () {\n  var checks = this.state.data.map(function (d) {\n    return (\n      <div>\n        <input type=\"checkbox\" checked={d.selected} onChange={this.__changeSelection.bind(this, d.id)} />\n          {d.id}\n          <br />\n      </div>\n    );\n  }.bind(this));\n  return (\n    <form>\n      {checks}\n    </form>\n  )\n}\n\n\u307e\u3060\u7406\u89e3\u3067\u304d\u3066\u306a\u3044\u3068\u3053\u308d\u3068\u3057\u3066__changeSelection.bind(this, d.id)\u306ethis\u306fCheckboxDemo\u306a\u306e\u304bd\u306a\u306e\u304b\n\nchangeSelection\u5b9a\u7fa9\n\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u304c\u62bc\u3055\u308c\u305f\u6642\u306echangeSelection\u95a2\u6570\u3092\u5b9a\u7fa9\u3002\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u304c\u62bc\u3055\u308c\u305f\u3089id\u3092changeSelection\u3092\u6e21\u3057\u3066\u547c\u3073\u51fa\u3057\u3066__changeSelection\u306e\u4e2d\u3067data\u306e\u4e2d\u3092\u5168\u90e8\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u6e21\u3057\u305fid\u3068data\u306eid\u304c\u4e00\u81f4\u3057\u305f\u3089selected\u306e\u771f\u507d\u5024\u3092\u5909\u66f4\u3057\u3066data\u3092\u4e38\u3054\u3068\u5909\u66f4\u304b\u3051\u308b\n__changeSelection: function (id) {\n  var nextState = this.state.data.map(function (d) {\n    return {\n      id: d.id,\n      selected: (d.id === id ? !d.selected: d.selected)\n    };\n  });\n\n  console.log(nextState); // \u78ba\u8a8d\u7528\n  this.setState( {data: nextState });\n},\n\n\n\u5168\u90e8\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u88c5\nform\u5185\u3092\u4fee\u6b63\n<form>\n  <input type=\"checkbox\" ref=\"globalSelector\" onChange={this.__changeAllChecks } />CheckAll\n  <br />\n  {checks}\n</form>\n\n\nchangeAllChecks\u306e\u5b9a\u7fa9\nglobalSelector\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u304c\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092getDOMNode\u3067\u3068\u3063\u3066\u304d\u3066checks\u306b\u5165\u308c\u3066\u3001checks\u3092data\u306e\u5168\u3066\u306eselected\u306b\u53cd\u6620\u3059\u308b\n__changeAllChecks: function () {\n  var chekcs = this.refs.globalSelector.getDOMNode().checked;\n  var nextState = this.state.data.map(function (d) {\n    return {id: d.id, selected: chekcs };\n  });\n\n  console.log('change all checks -> ', nextState)\n  this.setState( { data: nextState })\n}\n\n\n\u5168\u4f53\u30b3\u30fc\u30c9\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react-dom.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js\"></script>\n  </head>\n  <body>\n    <div id=\"content\"></div>\n    <script type=\"text/babel\">\n\n    var CheckboxDemo = React.createClass({\n      getInitialState: function () {\n        return {\n          data: [\n            {id: 1, selected: false },\n            {id: 2, selected: false }\n          ]\n        };\n      },\n\n      render: function () {\n        var checks = this.state.data.map(function (d) {\n          return (\n            <div>\n              <input type=\"checkbox\" checked={d.selected} onChange={this.__changeSelection.bind(this, d.id)} />\n                {d.id}\n                <br />\n            </div>\n          );\n        }.bind(this));\n        return (\n          <form>\n            <input type=\"checkbox\" ref=\"globalSelector\" onChange={this.__changeAllChecks } />CheckAll\n            <br />\n            {checks}\n          </form>\n        )\n      },\n\n      __changeSelection: function (id) {\n        var nextState = this.state.data.map(function (d) {\n          return {\n            id: d.id,\n            selected: (d.id === id ? !d.selected: d.selected)\n          };\n        });\n\n        console.log(nextState);\n        this.setState( {data: nextState });\n      },\n\n      __changeAllChecks: function () {\n        var chekcs = this.refs.globalSelector.getDOMNode().checked;\n        var nextState = this.state.data.map(function (d) {\n          return {id: d.id, selected: chekcs };\n        });\n\n        console.log('change all checks -> ', nextState)\n        this.setState( { data: nextState })\n      }\n\n    });\n\n\n\n    ReactDOM.render(\n      <CheckboxDemo />,\n      document.getElementById('content')\n    );\n    </script>\n  </body>\n</html>\n\n[React (Facebook): managed state of controlled checkboxes](https://stackoverflow.com/questions/21581688/react-facebook-managed-state-of-controlled-checkboxes)\u306e\u30d1\u30af\u30ea\u3068\u81ea\u5206\u306e\u7406\u89e3\u306e\u305f\u3081\u306e\u30e1\u30e2\n\n## index.html\u306e\u6e96\u5099\n\n```\n<!DOCTYPE html>\n<html>\n  <head>\n  \u00a6 <meta charset=\"UTF-8\" />\n  \u00a6 <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react.min.js\"></script>\n  \u00a6 <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react-dom.min.js\"></script>\n  \u00a6 <script src=\"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js\"></script>\n  </head>\n  <body>\n  \u00a6 <div id=\"content\"></div>\n    <script type=\"text/babel\">\n    // \u3053\u306e\u4e2d\u306bReact\u66f8\u304f\n    </script>\n  </body>\n</html>\n```\n\n## React\u30af\u30e9\u30b9\u3068State\u5b9a\u7fa9\n2\u3064\u3042\u308binput\u306echeckbox\u304c\u305d\u308c\u305e\u308c\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u72b6\u614b\u3092\u6301\u3064\u305f\u3081\u306estate\u3092\u6e96\u5099\u3002\u3064\u3044\u3067\u306bReactDOM\u30ec\u30f3\u30c0\u30fc\u3082\u5b9a\u7fa9\u3002\n\n```\nvar CheckboxDemo = React.createClass({\n  getInitialState: function () {\n    return {\n      data: [\n        {id: 1, selected: false },\n        {id: 2, selected: false }\n      ]\n    };\n  },\n  // \u3053\u306e\u4e0b\u306bForm\u3092\u66f8\u304f\n});\nReactDOM.render(\n  <CheckboxDemo />,\n  document.getElementById('content')\n);\n```\n\n## Form\u4f5c\u6210\nForm\u306e\u8981\u7d20\u3068\u3057\u3066checks\u3092\u5b9a\u7fa9\u3059\u308b\u3002map\u306e\u4e2d\u3067CheckboxDemo\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bthis\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306bbind\u3057\u3066\u304a\u304f\n\n```\nrender: function () {\n  var checks = this.state.data.map(function (d) {\n    return (\n      <div>\n        <input type=\"checkbox\" checked={d.selected} onChange={this.__changeSelection.bind(this, d.id)} />\n          {d.id}\n          <br />\n      </div>\n    );\n  }.bind(this));\n  return (\n    <form>\n      {checks}\n    </form>\n  )\n}\n```\n\n\u307e\u3060\u7406\u89e3\u3067\u304d\u3066\u306a\u3044\u3068\u3053\u308d\u3068\u3057\u3066__changeSelection.bind(this, d.id)\u306ethis\u306fCheckboxDemo\u306a\u306e\u304bd\u306a\u306e\u304b\n\n## changeSelection\u5b9a\u7fa9\n\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u304c\u62bc\u3055\u308c\u305f\u6642\u306e__changeSelection\u95a2\u6570\u3092\u5b9a\u7fa9\u3002\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u304c\u62bc\u3055\u308c\u305f\u3089id\u3092__changeSelection\u3092\u6e21\u3057\u3066\u547c\u3073\u51fa\u3057\u3066__changeSelection\u306e\u4e2d\u3067data\u306e\u4e2d\u3092\u5168\u90e8\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u6e21\u3057\u305fid\u3068data\u306eid\u304c\u4e00\u81f4\u3057\u305f\u3089selected\u306e\u771f\u507d\u5024\u3092\u5909\u66f4\u3057\u3066data\u3092\u4e38\u3054\u3068\u5909\u66f4\u304b\u3051\u308b\n\n```\n__changeSelection: function (id) {\n  var nextState = this.state.data.map(function (d) {\n    return {\n      id: d.id,\n      selected: (d.id === id ? !d.selected: d.selected)\n    };\n  });\n\n  console.log(nextState); // \u78ba\u8a8d\u7528\n  this.setState( {data: nextState });\n},\n```\n\n## \u5168\u90e8\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u88c5\nform\u5185\u3092\u4fee\u6b63\n\n```\n<form>\n  <input type=\"checkbox\" ref=\"globalSelector\" onChange={this.__changeAllChecks } />CheckAll\n  <br />\n  {checks}\n</form>\n```\n\n## changeAllChecks\u306e\u5b9a\u7fa9\nglobalSelector\u306e\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u304c\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092getDOMNode\u3067\u3068\u3063\u3066\u304d\u3066checks\u306b\u5165\u308c\u3066\u3001checks\u3092data\u306e\u5168\u3066\u306eselected\u306b\u53cd\u6620\u3059\u308b\n\n```\n__changeAllChecks: function () {\n  var chekcs = this.refs.globalSelector.getDOMNode().checked;\n  var nextState = this.state.data.map(function (d) {\n    return {id: d.id, selected: chekcs };\n  });\n\n  console.log('change all checks -> ', nextState)\n  this.setState( { data: nextState })\n}\n```\n\n## \u5168\u4f53\u30b3\u30fc\u30c9\n\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react-dom.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js\"></script>\n  </head>\n  <body>\n    <div id=\"content\"></div>\n    <script type=\"text/babel\">\n\n    var CheckboxDemo = React.createClass({\n      getInitialState: function () {\n        return {\n          data: [\n            {id: 1, selected: false },\n            {id: 2, selected: false }\n          ]\n        };\n      },\n\n      render: function () {\n        var checks = this.state.data.map(function (d) {\n          return (\n            <div>\n              <input type=\"checkbox\" checked={d.selected} onChange={this.__changeSelection.bind(this, d.id)} />\n                {d.id}\n                <br />\n            </div>\n          );\n        }.bind(this));\n        return (\n          <form>\n            <input type=\"checkbox\" ref=\"globalSelector\" onChange={this.__changeAllChecks } />CheckAll\n            <br />\n            {checks}\n          </form>\n        )\n      },\n\n      __changeSelection: function (id) {\n        var nextState = this.state.data.map(function (d) {\n          return {\n            id: d.id,\n            selected: (d.id === id ? !d.selected: d.selected)\n          };\n        });\n\n        console.log(nextState);\n        this.setState( {data: nextState });\n      },\n\n      __changeAllChecks: function () {\n        var chekcs = this.refs.globalSelector.getDOMNode().checked;\n        var nextState = this.state.data.map(function (d) {\n          return {id: d.id, selected: chekcs };\n        });\n\n        console.log('change all checks -> ', nextState)\n        this.setState( { data: nextState })\n      }\n\n    });\n\n\n\n    ReactDOM.render(\n      <CheckboxDemo />,\n      document.getElementById('content')\n    );\n    </script>\n  </body>\n</html>\n```\n"}