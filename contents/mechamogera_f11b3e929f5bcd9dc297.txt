{"context": " More than 1 year has passed since last update.chef-solo\u3067cron\u3092\u4f7f\u3063\u305f\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u306f\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\n\n\u73fe\u8c61\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ec\u30b7\u30d4\u3092\u66f8\u3044\u3066\u4e00\u822c\u30e6\u30fc\u30b6(ec2-user)\u3067chef-solo\u3092\u5b9f\u884c\u3059\u308b\n\ncron \"cloudwatch_monitoring\" do\n  user \"ec2-user\"\n  minute \"*/5\"\n  command %Q!hoge!\n  action :create\nend\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\n\nChef::Exceptions::Cron\n----------------------\nError updating state of cloudwatch_monitoring, exit: 1\n\n\n\u539f\u56e0\n\ncron\u3067user\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306bcrontab -u ec2-user\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u304c\u767a\u884c\u3055\u308c\u308b\n\u4e0a\u8a18\u306e-u\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u7279\u6a29\u30e6\u30fc\u30b6\u3067\u3057\u304b\u8a31\u53ef\u3055\u308c\u306a\u3044\u306e\u3067\u4e00\u822c\u30e6\u30fc\u30b6\u3067\u306f\u30a8\u30e9\u30fc\u3068\u306a\u308b\n\n\nroot\u3067\u5b9f\u884c\u3059\u308c\u3070OK\n\n\n\n\n\u539f\u56e0\u306e\u8abf\u67fb\u65b9\u6cd5\n\nchef-solo\u3092 -l debug\u30aa\u30d7\u30b7\u30e7\u30f3(\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u51fa\u529b)\u3092\u4ed8\u3051\u3066\u5b9f\u884c\n\n\n=> chef-11.4.4/lib/chef/provider/cron.rb:210\u3067\u30a8\u30e9\u30fc\n\n\n\u8a72\u5f53\u30b3\u30fc\u30c9\u3067\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3092\u4e3b\u529b\n\n\n=> must be privileged to use -u\u304c\u51fa\u529b\u3055\u308c\u308b\n\n\n\n      def write_crontab(crontab)\n        status = popen4(\"crontab -u #{@new_resource.user} -\", :waitlast => true) do |pid, stdin, stdout, stderr|\n          stdin.write crontab\np stderr.read # => must be privileged to use -u\u51fa\u529b\n        end\n        if status.exitstatus > 0\n          raise Chef::Exceptions::Cron, \"Error updating state of #{@new_resource.name}, exit: #{status.exitstatus}\"\n        end\n      end\n\nchef-solo\u3067cron\u3092\u4f7f\u3063\u305f\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u306f\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\n\n## \u73fe\u8c61\n\n* \u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ec\u30b7\u30d4\u3092\u66f8\u3044\u3066\u4e00\u822c\u30e6\u30fc\u30b6(ec2-user)\u3067chef-solo\u3092\u5b9f\u884c\u3059\u308b\n\n```rb:\ncron \"cloudwatch_monitoring\" do\n  user \"ec2-user\"\n  minute \"*/5\"\n  command %Q!hoge!\n  action :create\nend\n```\n\n* \u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\n\n```bash:\nChef::Exceptions::Cron\n----------------------\nError updating state of cloudwatch_monitoring, exit: 1\n```\n\n## \u539f\u56e0\n * cron\u3067user\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306bcrontab -u ec2-user\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u304c\u767a\u884c\u3055\u308c\u308b\n * \u4e0a\u8a18\u306e-u\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u7279\u6a29\u30e6\u30fc\u30b6\u3067\u3057\u304b\u8a31\u53ef\u3055\u308c\u306a\u3044\u306e\u3067\u4e00\u822c\u30e6\u30fc\u30b6\u3067\u306f\u30a8\u30e9\u30fc\u3068\u306a\u308b\n  * root\u3067\u5b9f\u884c\u3059\u308c\u3070OK\n\n## \u539f\u56e0\u306e\u8abf\u67fb\u65b9\u6cd5\n * chef-solo\u3092 -l debug\u30aa\u30d7\u30b7\u30e7\u30f3(\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u51fa\u529b)\u3092\u4ed8\u3051\u3066\u5b9f\u884c\n  * => chef-11.4.4/lib/chef/provider/cron.rb:210\u3067\u30a8\u30e9\u30fc\n * \u8a72\u5f53\u30b3\u30fc\u30c9\u3067\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3092\u4e3b\u529b\n  * => must be privileged to use -u\u304c\u51fa\u529b\u3055\u308c\u308b\n\n```rb:\n      def write_crontab(crontab)\n        status = popen4(\"crontab -u #{@new_resource.user} -\", :waitlast => true) do |pid, stdin, stdout, stderr|\n          stdin.write crontab\np stderr.read # => must be privileged to use -u\u51fa\u529b\n        end\n        if status.exitstatus > 0\n          raise Chef::Exceptions::Cron, \"Error updating state of #{@new_resource.name}, exit: #{status.exitstatus}\"\n        end\n      end\n```", "tags": ["Ruby1.9.3p392", "chef11.4.4", "chef-solo11.4.4"]}