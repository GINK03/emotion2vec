{"context": " More than 1 year has passed since last update.\n\n\u5c0e\u5165\nnode.js\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30bb\u30b9\u30e2\u30b8\u30e5\u30fc\u30ebChild Process\u3067\u65b0\u305f\u306a\u30d7\u30ed\u30bb\u30b9\u3092\u4f5c\u6210\u3059\u308b\u6642\u3001\u4e3b\u306bspawn\u3001exec\u3001fork\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u3057\u304b\u3057exec\u306f\u30d7\u30ed\u30bb\u30b9\u9593\u306e\u901a\u4fe1\u306f\u57fa\u672c\u3067\u304d\u306a\u3044\u3068\u3055\u308c\u3066\u3044\u308b\u3002\u305d\u3057\u3066fork\u306fnode.js\u306e\u307f\u4f7f\u7528\u3067\u304d\u308b\u306e\u3067\u3001java\u306e\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u7acb\u3061\u4e0a\u304c\u308a\u3001\u3057\u304b\u3082\u901a\u4fe1\u3059\u308b\u306b\u306fspawn\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n\nRound 1 : node.js\u3068class\u30d5\u30a1\u30a4\u30eb\u304c\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\n\u305d\u306e\u5834\u5408\u3001\u3053\u3068\u306f\u6975\u3081\u3066\u7c21\u5358\u306b\u6e08\u307e\u305b\u3089\u308c\u308b\u3002\n\n1 \u307e\u305a\u306fjava\u4e00\u500b\u4f5c\u308b\n\n\ntest.java\nclass test {\n       public static void main(String argv[]){\n            //\u307e\u305ainitial\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u4fe1\u3059\u308b\n            for ( int i = 0; i < argv.length; i++ ){\n                System.out.println(\"argv[\" + i + \"] = \" + argv[i] );\n            }\n            //\u7e70\u308a\u8fd4\u3057\u3066\u5165\u529b\u3092\u5f85\u3061\u3001\u51e6\u7406\u3059\u308b\n            while(true){\n                System.out.println(\"input sth.\");\n                Scanner input = new Scanner(System.in);\n                String s = input.next();\n                if (s.equals(\"break\")){\n                    break;\n                }\n                System.out.println(\"s = \"+s);               \n           }   \n       }\n    }\n\n\n\n2 \u305d\u3057\u3066java\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3001\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\n\nwindows\u4f7f\u3063\u3066\u3044\u308b\u3093\u3060\uff01\u6587\u53e5\u3042\u3063\u304b\uff01\uff1f\uff08\u7b11\uff09\nC:\\test\\your_java_test>javac test.java\nC:\\test\\your_java_test>java test Hello World\nargv[0] = Hello\nargv[1] = World\ninput sth.\ntest\\n\ns = test\ninput sth.\nhello\\n\ns = hello\n\u30fb\u30fb\u30fb\n\n\n3 \u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306b\u3001\u89aa\u30d7\u30ed\u30bb\u30b9\u306b\u3042\u305f\u308bjs\u3092\u4f5c\u308b\n\n\ntest_java.js\nvar child = require('child_process');\n//pipe\u3092\u4f7f\u3063\u3066\u3001\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u3092\u884c\u3046\n//\u5f15\u6570'test'\u306fclass\u540d\u3001no\n\nvar java = child.spawn( 'java', ['test','Hello','World'],{stdio:[ 'pipe',null,null, 'pipe' ]});\n\n//\u53d7\u4fe1\u3059\u308b\u305f\u3073\u306b\u3001\u5185\u5bb9\u3092\u8fd4\u3059\njava.stdout.on('data', function(data){\n    //toString()\u3092\u4f7f\u308f\u306a\u3044\u3068\u3001\u30d0\u30a4\u30ca\u30ea\u306e\u30d0\u30c3\u30d5\u30a1\u30fc\u5185\u5bb9\u304c\u8fd4\u3055\u308c\u308b\n    console.log(\"[java]\"+data.toString());\n});\n\n//2\u79d2\u9593\u4e00\u56de\u3001\u89aa\u30d7\u30ed\u30bb\u30b9\u304b\u3089\u5b50\u30d7\u30ed\u30bb\u30b9\u3078\u9001\u4fe1\nsetInterval(function () {\n        //\u9001\u4fe1\u5185\u5bb9\u306f\u5fc5\u305a\"\\n\"\u3067\u7d42\u308f\u3089\u305b\u308b\n    java.stdin.write(\"Hello\\n\");\n},2000);\n\n\n\n4 \u305d\u306ejs\u3092\u56de\u3057\u3066\u307f\u308b\n\nC:\\test\\your_java_test>node test_java.js\n[java]argv[0] = Hello\nargv[1] = World\n[java]\ninput sth.\n\n[java]s = Hello\ninput sth.\n\n[java]s = Hello\ninput sth.\n\n\u30fb\u30fb\u30fb\n\n\n\nRound2 : \u5225\u306e\u30d5\u30a9\u30eb\u30c0\u304b\u3089java\u3092\u547c\u3073\u51fa\u3059\n\n1 \u5148\u307b\u3069\u4f5c\u6210\u3057\u305fjs\u3092\u4e00\u500b\u4e0a\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3057\u3066path\u3092\u4fee\u6b63\u3057\u3066\u3001\u52d5\u304b\u3057\u3066\u307f\u308b\u3068\n\nevents.js:72\n        throw er; // Unhandled 'error' event\n              ^\nError: spawn ENOENT\n    at errnoException (child_process.js:1000:11)\n    at Process.ChildProcess._handle.onexit (child_process.js:791:34)\n\nnode\u304bjava\u304b\u3069\u3061\u3089\u304c\u6012\u3063\u305f\u305c\u3002\n\n2 \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u307f\u308b\n\nC:\\test>java ./your_java_test test\nError:java error cannot find main class\n\n\u3068\u3001\u3084\u3063\u3071\u308ajvm\u304c\u6012\u3063\u305f\u307f\u305f\u3044\u3060\u306d\u2026\n\u3044\u308d\u3044\u308d\u8abf\u3079\u3066\u307f\u308b\u3068\u3001-classpath\u5165\u308c\u308b\u3068\u3044\u3044\u3089\u3057\u3044\u3002\nC:\\test>java -classpath ./your_java_test test\ninput sth.\naaa\\n\ns = aaa\n\n\u3067\u306f\u3001js\u306e\u4e2d\u8eab\u3082\u6539\u9020\u3057\u3066\u307f\u3088\u3046\n\ntest_java2.js\n//to test how to run java in different dir\n\nvar child = require('child_process');\nvar pass = __dirname+'/'+'test_java';\nconsole.log(pass)\nvar java = child.spawn( 'java', ['-classpath',pass,'test','Hello','World'],{stdio:[ 'pipe',null,null, 'pipe' ]});\n// $ java -classpath [yourpath] [classname]\njava.stdout.on('data', function(data){\n    console.log(\"[java]\"+data.toString());\n} );\n\nsetInterval(function () {\n    java.stdin.write(\"Hello\\n\");//must end by \"\\n\"\n},2000);\n\n\n\n\u52d5\u304b\u3057\u3066\u307f\u308b\u3068\u3001\nC:\\test>node test_java.js\nC:\\test/your_java_test\n[java]argv[0] = Hello\nargv[1] = World\n[java]\ninput sth.\n\n[java]s = Hello\ninput sth.\n\n\u30fb\u30fb\u30fb\n\n\n\u3068\u3001\u554f\u984c\u89e3\u6c7a\u3002\n# \u5c0e\u5165\nnode.js\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30bb\u30b9\u30e2\u30b8\u30e5\u30fc\u30eb[Child Process](http://nodejs.jp/nodejs.org_ja/api/child_process.html)\u3067\u65b0\u305f\u306a\u30d7\u30ed\u30bb\u30b9\u3092\u4f5c\u6210\u3059\u308b\u6642\u3001\u4e3b\u306b`spawn`\u3001`exec`\u3001`fork`\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u3057\u304b\u3057`exec`\u306f\u30d7\u30ed\u30bb\u30b9\u9593\u306e\u901a\u4fe1\u306f\u57fa\u672c\u3067\u304d\u306a\u3044\u3068\u3055\u308c\u3066\u3044\u308b\u3002\u305d\u3057\u3066`fork`\u306fnode.js\u306e\u307f\u4f7f\u7528\u3067\u304d\u308b\u306e\u3067\u3001java\u306e\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u7acb\u3061\u4e0a\u304c\u308a\u3001\u3057\u304b\u3082\u901a\u4fe1\u3059\u308b\u306b\u306f`spawn`\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n# Round 1 : node.js\u3068class\u30d5\u30a1\u30a4\u30eb\u304c\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\n\u305d\u306e\u5834\u5408\u3001\u3053\u3068\u306f\u6975\u3081\u3066\u7c21\u5358\u306b\u6e08\u307e\u305b\u3089\u308c\u308b\u3002\n\n* 1 \u307e\u305a\u306fjava\u4e00\u500b\u4f5c\u308b\n\n\n```java:test.java\nclass test {\n       public static void main(String argv[]){\n            //\u307e\u305ainitial\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u4fe1\u3059\u308b\n            for ( int i = 0; i < argv.length; i++ ){\n                System.out.println(\"argv[\" + i + \"] = \" + argv[i] );\n            }\n            //\u7e70\u308a\u8fd4\u3057\u3066\u5165\u529b\u3092\u5f85\u3061\u3001\u51e6\u7406\u3059\u308b\n            while(true){\n           \t\tSystem.out.println(\"input sth.\");\n           \t\tScanner input = new Scanner(System.in);\n           \t\tString s = input.next();\n           \t\tif (s.equals(\"break\")){\n           \t\t\tbreak;\n           \t\t}\n           \t\tSystem.out.println(\"s = \"+s);         \t\t\n           }   \n       }\n    }\n```\n\n+ 2 \u305d\u3057\u3066java\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3001\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\n\nwindows\u4f7f\u3063\u3066\u3044\u308b\u3093\u3060\uff01\u6587\u53e5\u3042\u3063\u304b\uff01\uff1f\uff08\u7b11\uff09\n\n```\nC:\\test\\your_java_test>javac test.java\nC:\\test\\your_java_test>java test Hello World\nargv[0] = Hello\nargv[1] = World\ninput sth.\ntest\\n\ns = test\ninput sth.\nhello\\n\ns = hello\n\u30fb\u30fb\u30fb\n```\n\n+ 3 \u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306b\u3001\u89aa\u30d7\u30ed\u30bb\u30b9\u306b\u3042\u305f\u308bjs\u3092\u4f5c\u308b\n\n```js:test_java.js\nvar child = require('child_process');\n//pipe\u3092\u4f7f\u3063\u3066\u3001\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u3092\u884c\u3046\n//\u5f15\u6570'test'\u306fclass\u540d\u3001no\n\nvar java = child.spawn( 'java', ['test','Hello','World'],{stdio:[ 'pipe',null,null, 'pipe' ]});\n\n//\u53d7\u4fe1\u3059\u308b\u305f\u3073\u306b\u3001\u5185\u5bb9\u3092\u8fd4\u3059\njava.stdout.on('data', function(data){\n    //toString()\u3092\u4f7f\u308f\u306a\u3044\u3068\u3001\u30d0\u30a4\u30ca\u30ea\u306e\u30d0\u30c3\u30d5\u30a1\u30fc\u5185\u5bb9\u304c\u8fd4\u3055\u308c\u308b\n    console.log(\"[java]\"+data.toString());\n});\n\n//2\u79d2\u9593\u4e00\u56de\u3001\u89aa\u30d7\u30ed\u30bb\u30b9\u304b\u3089\u5b50\u30d7\u30ed\u30bb\u30b9\u3078\u9001\u4fe1\nsetInterval(function () {\n        //\u9001\u4fe1\u5185\u5bb9\u306f\u5fc5\u305a\"\\n\"\u3067\u7d42\u308f\u3089\u305b\u308b\n\tjava.stdin.write(\"Hello\\n\");\n},2000);\n```\n\n+ 4 \u305d\u306ejs\u3092\u56de\u3057\u3066\u307f\u308b\n\n```\nC:\\test\\your_java_test>node test_java.js\n[java]argv[0] = Hello\nargv[1] = World\n[java]\ninput sth.\n\n[java]s = Hello\ninput sth.\n\n[java]s = Hello\ninput sth.\n\n\u30fb\u30fb\u30fb\n\n```\n\n# Round2 : \u5225\u306e\u30d5\u30a9\u30eb\u30c0\u304b\u3089java\u3092\u547c\u3073\u51fa\u3059\n+ 1 \u5148\u307b\u3069\u4f5c\u6210\u3057\u305fjs\u3092\u4e00\u500b\u4e0a\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3057\u3066path\u3092\u4fee\u6b63\u3057\u3066\u3001\u52d5\u304b\u3057\u3066\u307f\u308b\u3068\n\n```\nevents.js:72\n        throw er; // Unhandled 'error' event\n              ^\nError: spawn ENOENT\n    at errnoException (child_process.js:1000:11)\n    at Process.ChildProcess._handle.onexit (child_process.js:791:34)\n```\n\nnode\u304bjava\u304b\u3069\u3061\u3089\u304c\u6012\u3063\u305f\u305c\u3002\n\n+ 2 \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u307f\u308b\n\n```\nC:\\test>java ./your_java_test test\nError:java error cannot find main class\n```\n\u3068\u3001\u3084\u3063\u3071\u308ajvm\u304c\u6012\u3063\u305f\u307f\u305f\u3044\u3060\u306d\u2026\n\n\u3044\u308d\u3044\u308d\u8abf\u3079\u3066\u307f\u308b\u3068\u3001`-classpath`\u5165\u308c\u308b\u3068\u3044\u3044\u3089\u3057\u3044\u3002\n\n```\nC:\\test>java -classpath ./your_java_test test\ninput sth.\naaa\\n\ns = aaa\n```\n\u3067\u306f\u3001js\u306e\u4e2d\u8eab\u3082\u6539\u9020\u3057\u3066\u307f\u3088\u3046\n\n```js:test_java2.js\n//to test how to run java in different dir\n\nvar child = require('child_process');\nvar pass = __dirname+'/'+'test_java';\nconsole.log(pass)\nvar java = child.spawn( 'java', ['-classpath',pass,'test','Hello','World'],{stdio:[ 'pipe',null,null, 'pipe' ]});\n// $ java -classpath [yourpath] [classname]\njava.stdout.on('data', function(data){\n    console.log(\"[java]\"+data.toString());\n} );\n\nsetInterval(function () {\n\tjava.stdin.write(\"Hello\\n\");//must end by \"\\n\"\n},2000);\n\n```\n\u52d5\u304b\u3057\u3066\u307f\u308b\u3068\u3001\n\n```\nC:\\test>node test_java.js\nC:\\test/your_java_test\n[java]argv[0] = Hello\nargv[1] = World\n[java]\ninput sth.\n\n[java]s = Hello\ninput sth.\n\n\u30fb\u30fb\u30fb\n\n```\n\u3068\u3001\u554f\u984c\u89e3\u6c7a\u3002\n", "tags": ["nodejs", "Java"]}