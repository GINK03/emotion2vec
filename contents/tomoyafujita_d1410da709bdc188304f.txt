{"context": "google protobuf\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u3001install\u304b\u3089\u306e\u624b\u9806\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n[consideration]\n\u901a\u4fe1\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3001ROS\u306a\u3069\u304c\u30ed\u30dc\u30c6\u30a3\u30af\u30b9\u7cfb\u3067\u306f\u6709\u540d\u3067\u3059\u304c\u3001protobuf\u306f\u5bfe\u5fdc\u8a00\u8a9e\u3082\u591a\u304f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u306a\u3069\u3067\u7c21\u5358\u306b\u5c0e\u5165\u304c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u51e6\u7406\u91cf\u304c\u6c17\u306b\u306a\u308b\u306e\u3067\u3001\u9069\u7528\u6642\u306b\u306f\u8981\u4ef6\u3092\u6e80\u305f\u3059\u304b\u78ba\u8a8d\u304c\u5fc5\u8981\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n[install]\n\u4eca\u56de\u306f\u3001C++ version\u3067\u8a66\u3057\u3066\u3044\u307e\u3059\u3002\n(\u305d\u308c\u3067\u306a\u304f\u3068\u3082\u9045\u305d\u3046\u306a\u306e\u3067\u3001Native\u3092\u4f7f\u3046\u4ee5\u5916\u9078\u629e\u80a2\u306f\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3002\u3002)\n\u4ee5\u4e0b\u306f\u3001Ubuntu16.04\u3067\u8a66\u3057\u3066\u3044\u307e\u3059\u3002\nC++\u306einstall\u306f\u4ee5\u4e0b\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://github.com/google/protobuf/tree/master/src\n$ sudo apt-get install autoconf automake libtool curl make g++ unzip\n$ ./autogen.sh\n$ ./configure\n$ make\n$ make check\n$ sudo make install\n$ sudo ldconfig # refresh shared library cache.\n\ndebian package\u3092apt-get\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304c\u3001Ubuntu\u306edebian package\u306fversion\u304c\u5c11\u3057\u53e4\u3044\u3067\u3059\u3002\nsample code\u3092build\u3057\u3088\u3046\u3068\u3059\u308b\u3068error\u304c\u51fa\u308b\u306e\u3067\u3001\u8981\u4fee\u6b63\u3067\u3059\u3002\n\n$ sudo apt-get install libprotobuf-dev libprotoc-dev protobuf-compiler\n$ protoc --version\nlibprotoc 2.6.1\n$ dpkg -l | grep protobuf\nii  libmirprotobuf3:i386                                        0.21.0+16.04.20160330-0ubuntu1                        i386         Display server for Ubuntu - RPC definitions\nii  libprotobuf-dev:i386                                        2.6.1-1.3                                             i386         protocol buffers C++ library (development files)\nrc  libprotobuf-lite8:i386                                      2.5.0-9ubuntu1                                        i386         protocol buffers C++ library (lite version)\nii  libprotobuf-lite9v5:i386                                    2.6.1-1.3                                             i386         protocol buffers C++ library (lite version)\nrc  libprotobuf8:i386                                           2.5.0-9ubuntu1                                        i386         protocol buffers C++ library\nii  libprotobuf9v5:i386                                         2.6.1-1.3                                             i386         protocol buffers C++ library\nii  protobuf-compiler                                           2.6.1-1.3                                             i386         compiler for protocol buffer definition files\n\n\n[How To Use]\nprotobuf/examples\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u5927\u304d\u304f\u624b\u9806\u306f\u3001\u4ee5\u4e0b\u306e3\u3064\u3067\u3059\u3002\n[1] IF\u5b9a\u7fa9\u3001.proto\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u3002\nIF\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308aversion 2\u3067\u3082compile\u3067\u304d\u308b\u3088\u3046\u306b\u4fee\u6b63\u3002\npackage tutorial;\n\nmessage Person {\n  required string name = 1;\n  required int32 id = 2;\n  optional string email = 3;\n\n  enum PhoneType {\n    MOBILE = 0;\n    HOME = 1;\n    WORK = 2;\n  }\n\n  message PhoneNumber {\n    required string number = 1;\n    optional PhoneType type = 2 [default = HOME];\n  }\n\n  repeated PhoneNumber phones = 4;\n}\n\nmessage AddressBook {\n  repeated Person people = 1;\n}\n\n[2] protoc\u306b\u3088\u308b\u30b3\u30f3\u30d1\u30a4\u30eb\u3002\n$ protoc --cpp_out=. --java_out=. --python_out=. addressbook.proto\n\n[3] API\u3092\u5229\u7528\u3057\u3066send/receive\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3002\nshell-session\n$ c++ add_person.cc addressbook.pb.cc -o add_person_cpp `pkg-config --cflags --libs protobuf`\n$ c++ list_people.cc addressbook.pb.cc -o list_people_cpp `pkg-config --cflags --libs protobuf`\n\n\n[execution example]\nIF\u3068\u3057\u3066\u306f\u3001Person\u304cAddressBook\u3068\u3057\u3066\u914d\u5217\u69cb\u9020\u3068\u306a\u3063\u3066\u3044\u308b\u3060\u3051\u3002\nrequired/optional/repeated\u306f\u305d\u306e\u901a\u308a\u306e\u610f\u5473\u3067\u3001\u5fc5\u9808property/\u30aa\u30d7\u30b7\u30e7\u30f3property(\u306a\u304f\u3066\u3082\u826f\u3044)/\u7e70\u308a\u8fd4\u3057property\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u3059\u3002\nadd_person.cc\u306f\u3001\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306bCLI\u304b\u3089property\u3092\u5165\u529b\u3057\u3066\u3001serialize\u3059\u308b\u3060\u3051\u3002\nlist_person.cc\u306f\u3001serialize\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092de-serialize\u3057\u3066\u51fa\u529b\u3002\n$ ./add_person_cpp phonebook\nphonebook: File not found.  Creating a new file.\nEnter person ID number: 12\nEnter name: TomoyaFujita\nEnter email address (blank for none): Tomoya.Fujita@hoge.com\nEnter a phone number (or leave blank to finish): 1234567890\nIs this a mobile, home, or work phone? mobile\nEnter a phone number (or leave blank to finish):\n\n$ ls -lt phonebook\n-rw-r--r-- 1 tomoyafujita tomoyafujita 58 Feb  9 23:39 phonebook\n\n$ ./list_people_cpp phonebook\nPerson ID: 12\n  Name: TomoyaFujita\n  E-mail address: Tomoya.Fujita@hoge.com\n  Mobile phone #: 1234567890\n\n\n[tips]\n\u30fbAPI\u3082\u8c4a\u5bcc\u306b\u63d0\u4f9b\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u697d\u3002\n\u30fb\u4f7f\u3044\u52dd\u624b\u3082\u975e\u5e38\u306b\u7c21\u5358\u3002\n\u30fbgoogle\u66f0\u304f\u3001c++\u7248\u306f\"extremely optimized\"\u3089\u3057\u3044\u3002(\u51e6\u7406\u91cf\u3092\u6c17\u306b\u3059\u308b\u306a\u3089\u3001native\u304c\u4e00\u756a)\n\n[reference]\nprotobuf\ncpptutorial\nC++ API\ngoogle protobuf\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u3001install\u304b\u3089\u306e\u624b\u9806\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n#### [consideration]\n\u901a\u4fe1\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3001ROS\u306a\u3069\u304c\u30ed\u30dc\u30c6\u30a3\u30af\u30b9\u7cfb\u3067\u306f\u6709\u540d\u3067\u3059\u304c\u3001protobuf\u306f\u5bfe\u5fdc\u8a00\u8a9e\u3082\u591a\u304f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u306a\u3069\u3067\u7c21\u5358\u306b\u5c0e\u5165\u304c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u51e6\u7406\u91cf\u304c\u6c17\u306b\u306a\u308b\u306e\u3067\u3001\u9069\u7528\u6642\u306b\u306f\u8981\u4ef6\u3092\u6e80\u305f\u3059\u304b\u78ba\u8a8d\u304c\u5fc5\u8981\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n#### [install]\n\u4eca\u56de\u306f\u3001C++ version\u3067\u8a66\u3057\u3066\u3044\u307e\u3059\u3002\n(\u305d\u308c\u3067\u306a\u304f\u3068\u3082\u9045\u305d\u3046\u306a\u306e\u3067\u3001Native\u3092\u4f7f\u3046\u4ee5\u5916\u9078\u629e\u80a2\u306f\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3002\u3002)\n\n\u4ee5\u4e0b\u306f\u3001Ubuntu16.04\u3067\u8a66\u3057\u3066\u3044\u307e\u3059\u3002\n\nC++\u306einstall\u306f\u4ee5\u4e0b\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://github.com/google/protobuf/tree/master/src\n\n```shell-session\n$ sudo apt-get install autoconf automake libtool curl make g++ unzip\n$ ./autogen.sh\n$ ./configure\n$ make\n$ make check\n$ sudo make install\n$ sudo ldconfig # refresh shared library cache.\n\ndebian package\u3092apt-get\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304c\u3001Ubuntu\u306edebian package\u306fversion\u304c\u5c11\u3057\u53e4\u3044\u3067\u3059\u3002\nsample code\u3092build\u3057\u3088\u3046\u3068\u3059\u308b\u3068error\u304c\u51fa\u308b\u306e\u3067\u3001\u8981\u4fee\u6b63\u3067\u3059\u3002\n\n$ sudo apt-get install libprotobuf-dev libprotoc-dev protobuf-compiler\n$ protoc --version\nlibprotoc 2.6.1\n$ dpkg -l | grep protobuf\nii  libmirprotobuf3:i386                                        0.21.0+16.04.20160330-0ubuntu1                        i386         Display server for Ubuntu - RPC definitions\nii  libprotobuf-dev:i386                                        2.6.1-1.3                                             i386         protocol buffers C++ library (development files)\nrc  libprotobuf-lite8:i386                                      2.5.0-9ubuntu1                                        i386         protocol buffers C++ library (lite version)\nii  libprotobuf-lite9v5:i386                                    2.6.1-1.3                                             i386         protocol buffers C++ library (lite version)\nrc  libprotobuf8:i386                                           2.5.0-9ubuntu1                                        i386         protocol buffers C++ library\nii  libprotobuf9v5:i386                                         2.6.1-1.3                                             i386         protocol buffers C++ library\nii  protobuf-compiler                                           2.6.1-1.3                                             i386         compiler for protocol buffer definition files\n```\n\n#### [How To Use]\nprotobuf/examples\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5927\u304d\u304f\u624b\u9806\u306f\u3001\u4ee5\u4e0b\u306e3\u3064\u3067\u3059\u3002\n[1] IF\u5b9a\u7fa9\u3001.proto\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u3002\n\nIF\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308aversion 2\u3067\u3082compile\u3067\u304d\u308b\u3088\u3046\u306b\u4fee\u6b63\u3002\n\n```protobuf\npackage tutorial;\n\nmessage Person {\n  required string name = 1;\n  required int32 id = 2;\n  optional string email = 3;\n\n  enum PhoneType {\n    MOBILE = 0;\n    HOME = 1;\n    WORK = 2;\n  }\n\n  message PhoneNumber {\n    required string number = 1;\n    optional PhoneType type = 2 [default = HOME];\n  }\n\n  repeated PhoneNumber phones = 4;\n}\n\nmessage AddressBook {\n  repeated Person people = 1;\n}\n```\n\n[2] protoc\u306b\u3088\u308b\u30b3\u30f3\u30d1\u30a4\u30eb\u3002\n\n```shell-session\n$ protoc --cpp_out=. --java_out=. --python_out=. addressbook.proto\n```\n\n[3] API\u3092\u5229\u7528\u3057\u3066send/receive\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3002\n```shell-session\n$ c++ add_person.cc addressbook.pb.cc -o add_person_cpp `pkg-config --cflags --libs protobuf`\n$ c++ list_people.cc addressbook.pb.cc -o list_people_cpp `pkg-config --cflags --libs protobuf`\n```\n\n#### [execution example]\nIF\u3068\u3057\u3066\u306f\u3001Person\u304cAddressBook\u3068\u3057\u3066\u914d\u5217\u69cb\u9020\u3068\u306a\u3063\u3066\u3044\u308b\u3060\u3051\u3002\nrequired/optional/repeated\u306f\u305d\u306e\u901a\u308a\u306e\u610f\u5473\u3067\u3001\u5fc5\u9808property/\u30aa\u30d7\u30b7\u30e7\u30f3property(\u306a\u304f\u3066\u3082\u826f\u3044)/\u7e70\u308a\u8fd4\u3057property\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u3059\u3002\n\nadd_person.cc\u306f\u3001\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306bCLI\u304b\u3089property\u3092\u5165\u529b\u3057\u3066\u3001serialize\u3059\u308b\u3060\u3051\u3002\nlist_person.cc\u306f\u3001serialize\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092de-serialize\u3057\u3066\u51fa\u529b\u3002\n\n```shell-session\n$ ./add_person_cpp phonebook\nphonebook: File not found.  Creating a new file.\nEnter person ID number: 12\nEnter name: TomoyaFujita\nEnter email address (blank for none): Tomoya.Fujita@hoge.com\nEnter a phone number (or leave blank to finish): 1234567890\nIs this a mobile, home, or work phone? mobile\nEnter a phone number (or leave blank to finish):\n\n$ ls -lt phonebook\n-rw-r--r-- 1 tomoyafujita tomoyafujita 58 Feb  9 23:39 phonebook\n\n$ ./list_people_cpp phonebook\nPerson ID: 12\n  Name: TomoyaFujita\n  E-mail address: Tomoya.Fujita@hoge.com\n  Mobile phone #: 1234567890\n```\n\n#### [tips]\n\u30fbAPI\u3082\u8c4a\u5bcc\u306b\u63d0\u4f9b\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u697d\u3002\n\u30fb\u4f7f\u3044\u52dd\u624b\u3082\u975e\u5e38\u306b\u7c21\u5358\u3002\n\u30fbgoogle\u66f0\u304f\u3001c++\u7248\u306f\"extremely optimized\"\u3089\u3057\u3044\u3002(\u51e6\u7406\u91cf\u3092\u6c17\u306b\u3059\u308b\u306a\u3089\u3001native\u304c\u4e00\u756a)\n\n\n#### [reference]\n[protobuf](https://github.com/google/protobuf)\n[cpptutorial](https://developers.google.com/protocol-buffers/docs/cpptutorial)\n[C++ API] (https://developers.google.com/protocol-buffers/docs/reference/cpp/)\n", "tags": ["Linux", "google", "C++", "protobuf"]}