{"context": "\u96f2\u307f\u305f\u3044\u306b\u30e2\u30af\u30e2\u30af\u3057\u305f\u30d5\u30ad\u30c0\u30b7\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u751f\u6210\u3057\u305f\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\ndemo: https://nanawatari.github.io/demo/bubble/\nsource: https://github.com/nanawatari/nanawatari.github.io/tree/master/demo/bubble\n\n\u63cf\u304d\u304b\u305f\n\n1.\u6955\u5186\u4e0a\u306e\u70b9\u3092\u3068\u308b\n\nstep = Math.PI * 2 / n\nfor (i = 0; i < Math.PI * 2; i += step) {\n  x = Math.cos(t) * r * 2\n  y = Math.sin(t) * r  \n  ps.push({x: x, y: y})\n}\n\n\n2. 1\u306e\u70b9\u3092\u9806\u306b\u7d50\u3073\u5404\u3005\u306e\u5782\u76f4\u4e8c\u7b49\u5206\u7dda\u3092\u8003\u3048\u308b\n\n\u307e\u305a\u4e2d\u70b9\u306f\u8a00\u3046\u307e\u3067\u3082\u306a\u3044\u3067\u3059\u306d\n mx = (p2.x + p1.x) / 2\n my = (p2.y + p1.y) / 2\n\n\u3053\u306e\u4e2d\u70b9\u3092\u901a\u308a1\u306e\u70b9\u3092\u9806\u306b\u7e4b\u3044\u3060\u5404\u3005\u306e\u7dda\u5206\u306b\u76f4\u4ea4\u3059\u308b\u7dda\u306e\u50be\u304d\u306f\n dx = p2.x - p1.x\n dy = p2.y - p1.y\n slope = -1 * dx / dy\n\n\u306b\u306a\u308a\u307e\u3059\u3002\u305f\u3060\u3057\uff0cdy = 0 \u306e\u3068\u304d\u306f\u5206\u6bcd\u306b\u3067\u304d\u306a\u3044\u305f\u3081 slope = 1 \u306b\u306a\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n3. \u5782\u76f4\u4e8c\u7b49\u5206\u7dda\u4e0a\u306e\u70b9\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u3068\u308b\n\n\u53d6\u308b\u70b9\u3092c(x, y)\u3068\u3057\u307e\u3059\u3002\n2\u306e\u5782\u76f4\u4e8c\u7b49\u5206\u7dda\u3092 y = f(x) \u3068\u3059\u308b\u3068\uff0cx\u306b\u4e71\u6570\u3092\u4e0e\u3048\u308b\u3060\u3051\u3067\u3059\u306d\u3002\n// \u203bmx, my\u306f2\u3067\u5f97\u305f\u4e2d\u70b9\ndx = Math.random() * k // k\u306f\u5b9a\u6570\nc.x = dx + mx\nc.y = slope * dx + my\n\n\n4. \u5186\u5468\u4e0a\u306b1\u306e\u96a3\u308a\u5408\u3046\u4e8c\u70b9\u3092\u542b\u3080\uff0c\u4e2d\u5fc3\u304c3\u306e\u70b9\u3067\u3042\u308b\u5186\u3092\u8003\u3048\u308b\n \ncanvas\u306b\u306f arc(cx, cy, r, startAngle, endAngle) \u3067\u5f27\u3092\u63cf\u3051\u307e\u3059\u3002\ncx, cy \u306b\u306f3\u3067\u5f97\u305fc.x, c.y\u3092\u4e0e\u3048\u307e\u3059\u3002\nr \u306f c(x, y) \u3068 2\u306e\u70b9p1(x, y)\u306e\u8ddd\u96e2\u306b\u306a\u308b\u306e\u3067\nr = Math.sqrt( Math.pow(p1.x - c.x, 2), Math.pow(p1.y - c.y), 2 )\n\n\u3067OK\u3067\u3057\u3087\u3046\u3002\n\u6b21\u306estartAngle\u3067\u3059\u304c\uff0c\u3053\u308c\u306fc\u3092\u4e2d\u5fc3\u3068\u3059\u308b\u5186\u306e\u5186\u5468\u4e0a\u306b p1 \u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u306e\u6642\u306e\u30e9\u30b8\u30a2\u30f3\u3092\u6c42\u3081\u308c\u3070\u826f\u3044\u3060\u3051\u3067\u3059\u3002\n\n x = p1.x - c.x\n y = p1.y - c.y\n startAngle = Math.atan2(y, x)\n\n\u6700\u5f8c\u306eendAngle\u3082\u540c\u69d8\u3067\uff0cp1\u304cp2\u306b\u306a\u308b\u3060\u3051\u3067\u3059\u3002\n\u3053\u308c\u3092\u70b9\u306e\u6570\u3060\u3051\u7e70\u308a\u8fd4\u3057\u3066 arc(cx, cy, r, startAngle, endAngle) \u3067\u5f27\u3092\u63cf\u304d\u7d9a\u3051\u308c\u3070\u30d5\u30ad\u30c0\u30b7\u306e\u5b8c\u6210\u3067\u3059\uff01\n\n\u500b\u4eba\u7684\u306b\u306f\u5927\u5206\u300c\u96f2\u3063\u307d\u304f\u3067\u304d\u305f\u306a\u30fc\u300d\u3068\u601d\u3046\u306e\u3067\u3059\u304c...\n\u3069\u3046\u3067\u3057\u3087\u3046\uff1f\n\u96f2\u307f\u305f\u3044\u306b\u30e2\u30af\u30e2\u30af\u3057\u305f\u30d5\u30ad\u30c0\u30b7\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u751f\u6210\u3057\u305f\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/6d0ba6d1-1221-f9fa-f78b-ddbd5b0d4b77.gif\" width=\"200\">\n\ndemo: https://nanawatari.github.io/demo/bubble/\nsource: https://github.com/nanawatari/nanawatari.github.io/tree/master/demo/bubble\n\n# \u63cf\u304d\u304b\u305f\n## 1.\u6955\u5186\u4e0a\u306e\u70b9\u3092\u3068\u308b\n\n<img width=\"248\" alt=\"bubble_1@2x.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/3a178e7f-8052-0f90-9d67-77f834bc6e5c.png\">\n\n```js\nstep = Math.PI * 2 / n\nfor (i = 0; i < Math.PI * 2; i += step) {\n  x = Math.cos(t) * r * 2\n  y = Math.sin(t) * r  \n  ps.push({x: x, y: y})\n}\n```\n\n## 2. 1\u306e\u70b9\u3092\u9806\u306b\u7d50\u3073\u5404\u3005\u306e\u5782\u76f4\u4e8c\u7b49\u5206\u7dda\u3092\u8003\u3048\u308b\n\n<img width=\"248\" alt=\"bubble_2@2x.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/ea62cafd-d82b-89fc-3b3f-b93b19096638.png\">\n\n\n\u307e\u305a\u4e2d\u70b9\u306f\u8a00\u3046\u307e\u3067\u3082\u306a\u3044\u3067\u3059\u306d\n\n```js\n mx = (p2.x + p1.x) / 2\n my = (p2.y + p1.y) / 2\n```\n\n\u3053\u306e\u4e2d\u70b9\u3092\u901a\u308a1\u306e\u70b9\u3092\u9806\u306b\u7e4b\u3044\u3060\u5404\u3005\u306e\u7dda\u5206\u306b\u76f4\u4ea4\u3059\u308b\u7dda\u306e\u50be\u304d\u306f\n\n```js\n dx = p2.x - p1.x\n dy = p2.y - p1.y\n slope = -1 * dx / dy\n```\n\n\u306b\u306a\u308a\u307e\u3059\u3002\u305f\u3060\u3057\uff0c```dy = 0``` \u306e\u3068\u304d\u306f\u5206\u6bcd\u306b\u3067\u304d\u306a\u3044\u305f\u3081 ```slope = 1``` \u306b\u306a\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\n## 3. \u5782\u76f4\u4e8c\u7b49\u5206\u7dda\u4e0a\u306e\u70b9\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u3068\u308b\n\n<img width=\"242\" alt=\"bubble_3@2x.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/0f725964-5056-8e7f-a488-0e545c2112ab.png\">\n\n\n\u53d6\u308b\u70b9\u3092```c(x, y)```\u3068\u3057\u307e\u3059\u3002\n2\u306e\u5782\u76f4\u4e8c\u7b49\u5206\u7dda\u3092 ```y = f(x)``` \u3068\u3059\u308b\u3068\uff0cx\u306b\u4e71\u6570\u3092\u4e0e\u3048\u308b\u3060\u3051\u3067\u3059\u306d\u3002\n\n```js\n// \u203bmx, my\u306f2\u3067\u5f97\u305f\u4e2d\u70b9\ndx = Math.random() * k // k\u306f\u5b9a\u6570\nc.x = dx + mx\nc.y = slope * dx + my\n```\n\n## 4. \u5186\u5468\u4e0a\u306b1\u306e\u96a3\u308a\u5408\u3046\u4e8c\u70b9\u3092\u542b\u3080\uff0c\u4e2d\u5fc3\u304c3\u306e\u70b9\u3067\u3042\u308b\u5186\u3092\u8003\u3048\u308b\n\n<img width=\"249\" alt=\"bubble_4@2x.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/f138a6be-bfe2-15aa-6c72-050891b6f1f2.png\"> <img width=\"251\" alt=\"bubble_5@2x.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/85748117-609a-5c8c-c5d9-a2a726afd1d3.png\">\n\ncanvas\u306b\u306f ```arc(cx, cy, r, startAngle, endAngle)``` \u3067\u5f27\u3092\u63cf\u3051\u307e\u3059\u3002\n```cx```, ```cy``` \u306b\u306f3\u3067\u5f97\u305f```c.x```, ```c.y```\u3092\u4e0e\u3048\u307e\u3059\u3002\n```r``` \u306f ```c(x, y)``` \u3068 2\u306e\u70b9```p1(x, y)```\u306e\u8ddd\u96e2\u306b\u306a\u308b\u306e\u3067\n\n```js\nr = Math.sqrt( Math.pow(p1.x - c.x, 2), Math.pow(p1.y - c.y), 2 )\n```\n\u3067OK\u3067\u3057\u3087\u3046\u3002\n\n\u6b21\u306estartAngle\u3067\u3059\u304c\uff0c\u3053\u308c\u306f```c```\u3092\u4e2d\u5fc3\u3068\u3059\u308b\u5186\u306e\u5186\u5468\u4e0a\u306b ```p1``` \u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u306e\u6642\u306e\u30e9\u30b8\u30a2\u30f3\u3092\u6c42\u3081\u308c\u3070\u826f\u3044\u3060\u3051\u3067\u3059\u3002\n\n<img width=\"233\" alt=\"bubble_7@2x.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/1a5cce14-f6c1-38c4-3eff-81a16ba72ab9.png\">\n\n```js\n x = p1.x - c.x\n y = p1.y - c.y\n startAngle = Math.atan2(y, x)\n```\n\n\u6700\u5f8c\u306eendAngle\u3082\u540c\u69d8\u3067\uff0c```p1```\u304c```p2```\u306b\u306a\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u3053\u308c\u3092\u70b9\u306e\u6570\u3060\u3051\u7e70\u308a\u8fd4\u3057\u3066 ```arc(cx, cy, r, startAngle, endAngle)``` \u3067\u5f27\u3092\u63cf\u304d\u7d9a\u3051\u308c\u3070\u30d5\u30ad\u30c0\u30b7\u306e\u5b8c\u6210\u3067\u3059\uff01\n\n<img width=\"251\" alt=\"bubble_8@2x.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/153559/73394285-2ace-f80d-e1ee-dca7c688c5cb.png\">\n\n\u500b\u4eba\u7684\u306b\u306f\u5927\u5206\u300c\u96f2\u3063\u307d\u304f\u3067\u304d\u305f\u306a\u30fc\u300d\u3068\u601d\u3046\u306e\u3067\u3059\u304c...\n\u3069\u3046\u3067\u3057\u3087\u3046\uff1f\n\n\n\n\n\n", "tags": ["JavaScript", "canvas"]}