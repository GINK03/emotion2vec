{"context": " More than 1 year has passed since last update.Perl\u306eLDAP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb\u3001Net::LDAP\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\u6700\u5c0f\u9650\u306e\u6e96\u5099\u3067\u4f7f\u3063\u3066\u307f\u308b\uff08docker\u306f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6e08\u307f\u3068\u3059\u308b\uff09\n\u4f55\u306f\u3068\u3082\u3042\u308c\u30b5\u30fc\u30d0\u30fc\u304c\u7121\u3044\u3068\u63a5\u7d9a\u3067\u304d\u306a\u3044\u306e\u3067\u7acb\u3066\u308b\u3002\n\u30d9\u30fc\u30b9\u306f\u4f55\u3067\u3082\u3044\u3044\u3051\u308c\u3069CentOS7\u3067\u3002\n$ docker run -i -t centos:centos7 /bin/bash\n\n\nopenldap-server\u3092\u5165\u308c\u308b\n\nbash-4.2# yum install openldap-servers\n\n\n\n\u63a5\u7d9a\u7528\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\n\nbash-4.2# slappasswd -s pass -h {SSHA}\n{SSHA}dasZzCG8To6Opc4B6E7vo1V0F6/NraOL\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8ffd\u8a18\n\nhbash-4.2# vi /etc/openldap/slapd.d/cn=config/olcDatabase={0}config.ldif\nolcRootPW: {SSHA}dasZzCG8To6Opc4B6E7vo1V0F6/NraOL\n\n\n\u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\nbash-4.2# /usr/sbin/slapd -u ldap -h \"ldap:/// ldapi:///\"\nbash-4.2# netstat -anp\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\ntcp        0      0 0.0.0.0:389             0.0.0.0:*               LISTEN      -\n\n\n\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\u5b8c\u4e86\u306a\u306e\u3067\u304a\u308f\u308b\n\nbash-4.2# exit \n\n\n\u30a4\u30e1\u30fc\u30b8\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\n$ docker ps -a\nce943f69e7f9  centos:centos7  /bin/bash  About an hour ago Exited (0) 14 seconds ago\n$ docker commit ce943f69e7f9 ymko/ldap\n\n\n\u30ed\u30b0\u3092\u51fa\u3057\u306a\u304c\u3089\u8d77\u52d5\u3059\u308b\n\n$ docker run -p 389:389 ymko/ldap /usr/sbin/slapd -d 256 -u ldap -h \"ldap:/// ldapi:///\"\n54807ebd @(#) $OpenLDAP: slapd 2.4.39 (Jun  9 2014 23:23:12) $\n        mockbuild@worker1.bsys.centos.org:/builddir/build/BUILD/openldap-2.4.39/openldap-2.4.39/servers/slapd\n54807ebd ldif_read_file: checksum error on \"/etc/openldap/slapd.d/cn=config/olcDatabase={0}config.ldif\"\n54807ebd hdb_db_open: warning - no DB_CONFIG file found in directory /var/lib/ldap: (2).\nExpect poor performance for suffix \"dc=my-domain,dc=com\".\n54807ebd slapd starting\n\n\n\u3088\u3046\u3084\u304f\u63a5\u7d9a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\n\nuse strict;\nuse warnings;\nuse Net::LDAP;\n\nmy $ldap = Net::LDAP->new( \"localhost\" ) or die $!;\nmy $msg  = $ldap->bind;\n$msg->code && die $msg->error;\n\n$ldap->unbind;\n$ldap->disconnect;\n\nprint \"end\\n\";\n\n\n\u5b9f\u884c\u3059\u308b\u3068openldap\u306e\u51fa\u529b\u304c\u3059\u3059\u307f\u307e\u3057\u305f\u307e\u308b\u3002\n\n54807ebd slapd starting\n54807f3f conn=1000 fd=15 ACCEPT from IP=172.17.42.1:33459 (IP=0.0.0.0:389)\n54807f3f conn=1000 op=0 BIND dn=\"\" method=128\n54807f3f conn=1000 op=0 RESULT tag=97 err=0 text=\n54807f3f conn=1000 op=1 UNBIND\n54807f3f conn=1000 fd=15 closed\n\n\u3053\u3053\u307e\u3067\u3060\u3063\u305f\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u304f\u3060\u308a\u3044\u3089\u306a\u304b\u3063\u305f\u304b\u30fb\u30fb\u30fb\n\n\u53c2\u8003\n\nCentOS6 OpenLDAP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u57fa\u672c\u8a2d\u5b9a\nhttp://www.unix-power.net/linux/openldap.html\nCentOS 7 : OpenLDAP : LDAP\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a \uff1a Server World\nhttp://www.server-world.info/query?os=CentOS_7&p=openldap\nCentOS 6.2 \u306b OpenLDAP \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f - Hexa's diary\nhttp://hexa.hatenablog.com/entry/2012/02/01/010544\n\u30b3\u30f3\u30c6\u30ca\u306e\u50cd\u304d - Docker User Guide - Qiita\nhttp://qiita.com/zembutsu/items/c6a5070480c98ca000f7\n\u3044\u307e\u3055\u3089\u805e\u3051\u306a\u3044Docker\u5165\u9580\uff082\uff09\uff1a\u3064\u3044\u306b1.0\u304c\u30ea\u30ea\u30fc\u30b9\uff01 Docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u4e3b\u306a\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9 (3/3) - \uff20IT\nhttp://www.atmarkit.co.jp/ait/articles/1406/10/news031_3.html\n\u30c6\u30af\u30cb\u30ab\u30eb\u30ce\u30fc\u30c8/\u8a8d\u8a3c\u30b5\u30fc\u30d0\u69cb\u7bc9/OpenLDAP/OpenLDAP\u3092\u5229\u7528\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c - Nature's Linux Tech Portal\nhttp://tech.n-linux.com/index.php?%A5%C6%A5%AF%A5%CB%A5%AB%A5%EB%A5%CE%A1%BC%A5%C8%2F%C7%A7%BE%DA%A5%B5%A1%BC%A5%D0%B9%BD%C3%DB%2FOpenLDAP%2FOpenLDAP%A4%F2%CD%F8%CD%D1%A4%B7%A4%BF%A5%E6%A1%BC%A5%B6%A1%BC%C7%A7%BE%DA\nPerl\u3067LDAP\u30a2\u30af\u30bb\u30b9(use Net::LDAP) - jitsu102\u306e\u65e5\u8a18\nhttp://d.hatena.ne.jp/jitsu102/20100122/1264169301\nNet::LDAP\u306e\u30b5\u30f3\u30d7\u30eb\nhttp://naonao.ktkr.net/?p=248\nPerl\u306eLDAP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb\u3001Net::LDAP\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\u6700\u5c0f\u9650\u306e\u6e96\u5099\u3067\u4f7f\u3063\u3066\u307f\u308b\uff08docker\u306f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6e08\u307f\u3068\u3059\u308b\uff09\n\n\u4f55\u306f\u3068\u3082\u3042\u308c\u30b5\u30fc\u30d0\u30fc\u304c\u7121\u3044\u3068\u63a5\u7d9a\u3067\u304d\u306a\u3044\u306e\u3067\u7acb\u3066\u308b\u3002\n\u30d9\u30fc\u30b9\u306f\u4f55\u3067\u3082\u3044\u3044\u3051\u308c\u3069CentOS7\u3067\u3002\n\n```bash\n$ docker run -i -t centos:centos7 /bin/bash\n```\n\n- openldap-server\u3092\u5165\u308c\u308b\n\n```bash\nbash-4.2# yum install openldap-servers\n\n```\n\n- \u63a5\u7d9a\u7528\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\n\n```bash\nbash-4.2# slappasswd -s pass -h {SSHA}\n{SSHA}dasZzCG8To6Opc4B6E7vo1V0F6/NraOL\n```\n\n- \u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8ffd\u8a18\n\n```bash\nhbash-4.2# vi /etc/openldap/slapd.d/cn=config/olcDatabase={0}config.ldif\nolcRootPW: {SSHA}dasZzCG8To6Opc4B6E7vo1V0F6/NraOL\n```\n\n- \u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n```bash\nbash-4.2# /usr/sbin/slapd -u ldap -h \"ldap:/// ldapi:///\"\nbash-4.2# netstat -anp\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\ntcp        0      0 0.0.0.0:389             0.0.0.0:*               LISTEN      -\n```\n\n- \u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\u5b8c\u4e86\u306a\u306e\u3067\u304a\u308f\u308b\n\n```bash\nbash-4.2# exit \n```\n\n- \u30a4\u30e1\u30fc\u30b8\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\n```bash\n$ docker ps -a\nce943f69e7f9  centos:centos7  /bin/bash  About an hour ago Exited (0) 14 seconds ago\n$ docker commit ce943f69e7f9 ymko/ldap\n```\n\n- \u30ed\u30b0\u3092\u51fa\u3057\u306a\u304c\u3089\u8d77\u52d5\u3059\u308b\n\n```bash\n$ docker run -p 389:389 ymko/ldap /usr/sbin/slapd -d 256 -u ldap -h \"ldap:/// ldapi:///\"\n54807ebd @(#) $OpenLDAP: slapd 2.4.39 (Jun  9 2014 23:23:12) $\n        mockbuild@worker1.bsys.centos.org:/builddir/build/BUILD/openldap-2.4.39/openldap-2.4.39/servers/slapd\n54807ebd ldif_read_file: checksum error on \"/etc/openldap/slapd.d/cn=config/olcDatabase={0}config.ldif\"\n54807ebd hdb_db_open: warning - no DB_CONFIG file found in directory /var/lib/ldap: (2).\nExpect poor performance for suffix \"dc=my-domain,dc=com\".\n54807ebd slapd starting\n```\n\n- \u3088\u3046\u3084\u304f\u63a5\u7d9a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\n\n```pl\nuse strict;\nuse warnings;\nuse Net::LDAP;\n\nmy $ldap = Net::LDAP->new( \"localhost\" ) or die $!;\nmy $msg  = $ldap->bind;\n$msg->code && die $msg->error;\n\n$ldap->unbind;\n$ldap->disconnect;\n\nprint \"end\\n\";\n```\n\n- \u5b9f\u884c\u3059\u308b\u3068openldap\u306e\u51fa\u529b\u304c\u3059\u3059\u307f\u307e\u3057\u305f\u307e\u308b\u3002\n\n```bash\n54807ebd slapd starting\n54807f3f conn=1000 fd=15 ACCEPT from IP=172.17.42.1:33459 (IP=0.0.0.0:389)\n54807f3f conn=1000 op=0 BIND dn=\"\" method=128\n54807f3f conn=1000 op=0 RESULT tag=97 err=0 text=\n54807f3f conn=1000 op=1 UNBIND\n54807f3f conn=1000 fd=15 closed\n```\n\n\u3053\u3053\u307e\u3067\u3060\u3063\u305f\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u304f\u3060\u308a\u3044\u3089\u306a\u304b\u3063\u305f\u304b\u30fb\u30fb\u30fb\n\n- \u53c2\u8003\n\nCentOS6 OpenLDAP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u57fa\u672c\u8a2d\u5b9a\nhttp://www.unix-power.net/linux/openldap.html\n\nCentOS 7 : OpenLDAP : LDAP\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a \uff1a Server World\nhttp://www.server-world.info/query?os=CentOS_7&p=openldap\n\nCentOS 6.2 \u306b OpenLDAP \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f - Hexa's diary\nhttp://hexa.hatenablog.com/entry/2012/02/01/010544\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u50cd\u304d - Docker User Guide - Qiita\nhttp://qiita.com/zembutsu/items/c6a5070480c98ca000f7\n\n\u3044\u307e\u3055\u3089\u805e\u3051\u306a\u3044Docker\u5165\u9580\uff082\uff09\uff1a\u3064\u3044\u306b1.0\u304c\u30ea\u30ea\u30fc\u30b9\uff01 Docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u4e3b\u306a\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9 (3/3) - \uff20IT\nhttp://www.atmarkit.co.jp/ait/articles/1406/10/news031_3.html\n\n\u30c6\u30af\u30cb\u30ab\u30eb\u30ce\u30fc\u30c8/\u8a8d\u8a3c\u30b5\u30fc\u30d0\u69cb\u7bc9/OpenLDAP/OpenLDAP\u3092\u5229\u7528\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c - Nature's Linux Tech Portal\nhttp://tech.n-linux.com/index.php?%A5%C6%A5%AF%A5%CB%A5%AB%A5%EB%A5%CE%A1%BC%A5%C8%2F%C7%A7%BE%DA%A5%B5%A1%BC%A5%D0%B9%BD%C3%DB%2FOpenLDAP%2FOpenLDAP%A4%F2%CD%F8%CD%D1%A4%B7%A4%BF%A5%E6%A1%BC%A5%B6%A1%BC%C7%A7%BE%DA\n\nPerl\u3067LDAP\u30a2\u30af\u30bb\u30b9(use Net::LDAP) - jitsu102\u306e\u65e5\u8a18\nhttp://d.hatena.ne.jp/jitsu102/20100122/1264169301\n\nNet::LDAP\u306e\u30b5\u30f3\u30d7\u30eb\nhttp://naonao.ktkr.net/?p=248\n", "tags": ["Perl", "docker", "LDAP", "CentOS"]}