{"context": "\n\n\u524d\u63d0\n\u30fbGCP\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u6e96\u5099\u3067\u304d\u3066\u3044\u308b\u3053\u3068\n\u30fbBigQuery\u306b\u63a5\u7d9a\u53ef\u80fd\u306atable\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\n\n\u5b9f\u884c\u74b0\u5883\u306e\u6e96\u5099\nec2\n-pyenv\n -naconda3-4.0.0\n  -pandas\n  -httplib2\n  -google-api-python-client\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u8ffd\u52a0\nsudo su -\npyenv global naconda3-4.0.0\npip install\u3000httplib2\npip install\u3000google-api-python-client\n\n\nGoogleCloudSDK\u306e\u5c0e\u5165\uff08python2.x\u74b0\u5883\u3067\u5b9f\u884c\uff09\u3068\u8a8d\u8a3c\npyenv global system\ncurl https://sdk.cloud.google.com | bash\n~/google-cloud-sdk/bin/gcloud auth login\n\n\u203b\u8a8d\u8a3c\u60c5\u5831\u306f~/.config\u914d\u4e0b\u306b\u51fa\u529b\u3055\u308c\u308b\n\n\u3054\u304f\u5c11\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u5b9f\u884c\nimport pandas as pd\nquery = 'SELECT * FROM dataset_name.table_name'\npd.read_gbq(query, 'your_project_ID')\n\n\u2192pd.read_gbq\u3067\u8a8d\u8a3c\u304c\u8d70\u308b\u304c\u3001EC2\u304c\u5b9f\u884c\u5143\u3068\u306a\u308b\u305f\u3081\u3001\n\u3000localhost\u3067\u30ea\u30b9\u30f3\u3059\u308b\u8a8d\u8a3c\u7528URL\u304c\u3046\u307e\u304f\u53d7\u3051\u53d6\u308c\u306a\u3044\n\nOauth2\u3067\u306e\u8a8d\u8a3c\u60c5\u5831\u751f\u6210\nfrom oauth2client.client import OAuth2WebServerFlow\nfrom oauth2client.file import Storage\nflow = OAuth2WebServerFlow(client_id='your_client_id',\n                           client_secret='your_client_secret',\n                           scope='https://www.googleapis.com/auth/bigquery',\n                           redirect_uri='urn:ietf:wg:oauth:2.0:oob')\nstorage = Storage('bigquery_credentials.dat')\nauthorize_url = flow.step1_get_authorize_url()\nprint 'Go to the following link in your browser: ' + authorize_url\ncode = raw_input('Enter verification code: ')\ncredentials = flow.step2_exchange(code)\nstorage.put(credentials)\n\n\u203byour_client_id\u3001your_client_sercret\u306f~/.config\u914d\u4e0b\u304b\u3089\n\u4e0a\u8a18\u51e6\u7406\u5b9f\u884c\u5f8c\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u300cbigquery_credentials.dat\u300d\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\u2192pandas.read_gbq\u306f\u4e0a\u8a18\u3092\u8a8d\u8a3c\u60c5\u5831\u3068\u3057\u3066\u5229\u7528\n\n\u3054\u304f\u5c11\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u5b9f\u884c\nimport pandas as pd\nquery = 'SELECT * FROM dataset_name.table_name'\npd.read_gbq(query, 'your_project_ID')\n\n\n\u53c2\u8003\nhttps://developers.google.com/api-client-library/python/guide/aaa_oauth\nhttp://stackoverflow.com/questions/37792709/accessing-big-query-from-cloud-datalab-using-pandas\n## \u524d\u63d0\n\u30fbGCP\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u6e96\u5099\u3067\u304d\u3066\u3044\u308b\u3053\u3068\n\u30fbBigQuery\u306b\u63a5\u7d9a\u53ef\u80fd\u306atable\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\n\n## \u5b9f\u884c\u74b0\u5883\u306e\u6e96\u5099\nec2\n-pyenv\n -naconda3-4.0.0\n  -pandas\n  -httplib2\n  -google-api-python-client\n\n## \u30e2\u30b8\u30e5\u30fc\u30eb\u8ffd\u52a0\n```\nsudo su -\npyenv global naconda3-4.0.0\npip install\u3000httplib2\npip install\u3000google-api-python-client\n```\n\n## GoogleCloudSDK\u306e\u5c0e\u5165\uff08python2.x\u74b0\u5883\u3067\u5b9f\u884c\uff09\u3068\u8a8d\u8a3c\n```\npyenv global system\ncurl https://sdk.cloud.google.com | bash\n~/google-cloud-sdk/bin/gcloud auth login\n```\n\n\u203b\u8a8d\u8a3c\u60c5\u5831\u306f~/.config\u914d\u4e0b\u306b\u51fa\u529b\u3055\u308c\u308b\n\n### \u3054\u304f\u5c11\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u5b9f\u884c\n```\nimport pandas as pd\nquery = 'SELECT * FROM dataset_name.table_name'\npd.read_gbq(query, 'your_project_ID')\n```\n\n\u2192pd.read_gbq\u3067\u8a8d\u8a3c\u304c\u8d70\u308b\u304c\u3001EC2\u304c\u5b9f\u884c\u5143\u3068\u306a\u308b\u305f\u3081\u3001\n\u3000localhost\u3067\u30ea\u30b9\u30f3\u3059\u308b\u8a8d\u8a3c\u7528URL\u304c\u3046\u307e\u304f\u53d7\u3051\u53d6\u308c\u306a\u3044\n\n\n#Oauth2\u3067\u306e\u8a8d\u8a3c\u60c5\u5831\u751f\u6210\n```\nfrom oauth2client.client import OAuth2WebServerFlow\nfrom oauth2client.file import Storage\nflow = OAuth2WebServerFlow(client_id='your_client_id',\n                           client_secret='your_client_secret',\n                           scope='https://www.googleapis.com/auth/bigquery',\n                           redirect_uri='urn:ietf:wg:oauth:2.0:oob')\nstorage = Storage('bigquery_credentials.dat')\nauthorize_url = flow.step1_get_authorize_url()\nprint 'Go to the following link in your browser: ' + authorize_url\ncode = raw_input('Enter verification code: ')\ncredentials = flow.step2_exchange(code)\nstorage.put(credentials)\n```\n\u203byour_client_id\u3001your_client_sercret\u306f~/.config\u914d\u4e0b\u304b\u3089\n\n\u4e0a\u8a18\u51e6\u7406\u5b9f\u884c\u5f8c\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u300cbigquery_credentials.dat\u300d\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\u2192pandas.read_gbq\u306f\u4e0a\u8a18\u3092\u8a8d\u8a3c\u60c5\u5831\u3068\u3057\u3066\u5229\u7528\n\n### \u3054\u304f\u5c11\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u5b9f\u884c\n```\nimport pandas as pd\nquery = 'SELECT * FROM dataset_name.table_name'\npd.read_gbq(query, 'your_project_ID')\n```\n\n# \u53c2\u8003\nhttps://developers.google.com/api-client-library/python/guide/aaa_oauth\nhttp://stackoverflow.com/questions/37792709/accessing-big-query-from-cloud-datalab-using-pandas\n\n", "tags": ["gcp", "bigquery", "EC2", "Python", "AWS"]}