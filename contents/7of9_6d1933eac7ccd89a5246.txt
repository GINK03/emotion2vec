{"tags": ["cppBuilder", "stringOperation"], "context": "\n\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n\n\n1\\r\\n\n2\\r\\n\n3\\r\\n\n\n\u3068\u3044\u3046<CR><LF>\u7d42\u7aef\u306e\u8907\u6570\u884c\u6587\u5b57\u5217\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u964d\u9806\u306b\u3059\u308b\u3002\n3\\r\\n\n2\\r\\n\n1\\r\\n\n\n\nUnit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include <memory>\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n    String res;\n\n    res = res + L\"1:\\r\\n\";\n    res = res + L\"2:\\r\\n\";\n    res = res + L\"3:\\r\\n\";\n\n    String strrev = getStringInReverseOrder(res);\n\n    ShowMessage(strrev);\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::getStringInReverseOrder(String srcstr)\n{\n    // <CR><LF>\u7d42\u7aef\u306e\u8907\u6570\u884c\u6587\u5b57\u5217\u3092\u964d\u9806\u306b\u3059\u308b\n\n    std::unique_ptr<TStringList> sl(new TStringList);\n    sl->StrictDelimiter = true;\n    sl->Delimiter = L'\\n'; // <LF>\u3092\u6539\u884c\u8b58\u5225\u306b\u4f7f\u3046\n    String srcstrWithoutCR = StringReplace(srcstr, L\"\\r\", L\"\", TReplaceFlags()<<rfReplaceAll);\n    sl->DelimitedText = srcstrWithoutCR; // \u4f59\u5206\u306a<CR>\u306f\u9664\u53bb\n\n    String dststr;\n    for(int idx=sl->Count - 1; idx>=0; idx--) {\n        dststr = dststr + sl->Strings[idx] + L\"\\r\\n\";\n    }\n\n    int pos = dststr.Pos(L\"\\r\\n\");\n    if (dststr.Pos(L\"\\r\\n\") == 1) { // \u5148\u982d\u306e\u6539\u884c\u3092\u9664\u53bb\n        dststr = dststr.SubString(3, MAXINT); // MAXINT:\u6700\u5f8c\u307e\u3067\n    }\n\n    return dststr;\n}\n\n\n\u5143\u306eString\u6587\u5b57\u5217\u306e\u6700\u5f8c\u304c\u7a7a\u884c\u306e\u6642\u306e\u51e6\u7406\u304c\u3044\u307e\u3044\u3061\u3002\n\u6642\u9593\u304c\u78ba\u4fdd\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u3002\n```txt:\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n```\n\n```\n1\\r\\n\n2\\r\\n\n3\\r\\n\n```\n\u3068\u3044\u3046`<CR><LF>`\u7d42\u7aef\u306e\u8907\u6570\u884c\u6587\u5b57\u5217\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u964d\u9806\u306b\u3059\u308b\u3002\n\n```\n3\\r\\n\n2\\r\\n\n1\\r\\n\n```\n\n```Unit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include <memory>\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n\t: TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n\tString res;\n\n\tres = res + L\"1:\\r\\n\";\n\tres = res + L\"2:\\r\\n\";\n\tres = res + L\"3:\\r\\n\";\n\n\tString strrev = getStringInReverseOrder(res);\n\n\tShowMessage(strrev);\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::getStringInReverseOrder(String srcstr)\n{\n\t// <CR><LF>\u7d42\u7aef\u306e\u8907\u6570\u884c\u6587\u5b57\u5217\u3092\u964d\u9806\u306b\u3059\u308b\n\n\tstd::unique_ptr<TStringList> sl(new TStringList);\n\tsl->StrictDelimiter = true;\n\tsl->Delimiter = L'\\n'; // <LF>\u3092\u6539\u884c\u8b58\u5225\u306b\u4f7f\u3046\n\tString srcstrWithoutCR = StringReplace(srcstr, L\"\\r\", L\"\", TReplaceFlags()<<rfReplaceAll);\n\tsl->DelimitedText = srcstrWithoutCR; // \u4f59\u5206\u306a<CR>\u306f\u9664\u53bb\n\n\tString dststr;\n\tfor(int idx=sl->Count - 1; idx>=0; idx--) {\n\t\tdststr = dststr + sl->Strings[idx] + L\"\\r\\n\";\n\t}\n\n\tint pos = dststr.Pos(L\"\\r\\n\");\n\tif (dststr.Pos(L\"\\r\\n\") == 1) { // \u5148\u982d\u306e\u6539\u884c\u3092\u9664\u53bb\n\t\tdststr = dststr.SubString(3, MAXINT); // MAXINT:\u6700\u5f8c\u307e\u3067\n\t}\n\n\treturn dststr;\n}\n```\n\n\u5143\u306eString\u6587\u5b57\u5217\u306e\u6700\u5f8c\u304c\u7a7a\u884c\u306e\u6642\u306e\u51e6\u7406\u304c\u3044\u307e\u3044\u3061\u3002\n\u6642\u9593\u304c\u78ba\u4fdd\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u3002\n\n"}