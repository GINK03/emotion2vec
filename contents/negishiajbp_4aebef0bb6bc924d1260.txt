{"context": " More than 1 year has passed since last update.callback.php\u304b\u3089Token\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u3068\u3001\n{\"error\":\"unsupported_grant_type\",\"error_description\":null,\"error_code\":\"901\"}\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n'authorization_code'\u3068\u3044\u3046\u6587\u5b57\u5217\u3067\u9593\u9055\u3063\u3066\u3044\u306a\u3044\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\n\u4f55\u304c\u539f\u56e0\u304b\u308f\u304b\u308a\u307e\u3059\u3067\u3057\u3087\u3046\u304b\uff1f\ncallback.php\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n<?php\n/**\n *callback.php\uff08\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\uff09\n *Token\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30ea\u30af\u30a8\u30b9\u30c8\n *\n */\ncode=code=code = _GET[\"code\"]; // \u8a8d\u53ef\u30b3\u30fc\u30c9\n$applicationId = \"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID\";\n$secret = \"\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\";\n\n$api = \"https://auth.login.yahoo.co.jp/yconnect/v1/token\";\n\n$basicAuth = base64_encode($applicationId . ':' . $secret);\n\n$redirect_uri  = \"Authorization\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u6307\u5b9a\u3057\u305fURI\";\n\n\n$postdata = array(\n    \"grant_type\" => \"authorization_code\",\n    \"code\" => $code,\n    \"redirect_uri\" => $redirect_uri\n    );\n\n\n$header = array(\n   'Authorization: Basic '.$basicAuth,\n   'Content-Type: application/x-www-form-urlencoded; charset=utf-8'\n);\n$ch = curl_init($api);\ncurl_setopt_array($ch, array(\n    CURLOPT_HEADER => true,\n    CURLOPT_HTTPHEADER => $header,\n    CURLOPT_POST => true,\n    CURLOPT_POSTFIELDS => $postdata,\n    CURLOPT_RETURNTRANSFER => true,\n    CURLOPT_SSL_VERIFYPEER => false\n));\n\n$result = curl_exec($ch);\n\n// HTTP\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u30c1\u30a7\u30c3\u30af\u3057\u30a8\u30e9\u30fc\u306a\u3089\u30a8\u30e9\u30fc\u5185\u5bb9\u3092\u51fa\u529b\nif(curl_errno($ch)) {\n    echo 'Curl error: ' . curl_error($ch);\n}\n\ncurl_close($ch);\n\necho $result;\n\n?>\n\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059\u3002\n\u6839\u5cb8\ncallback.php\u304b\u3089Token\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u3068\u3001\n{\"error\":\"unsupported_grant_type\",\"error_description\":null,\"error_code\":\"901\"}\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\n'authorization_code'\u3068\u3044\u3046\u6587\u5b57\u5217\u3067\u9593\u9055\u3063\u3066\u3044\u306a\u3044\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\n\u4f55\u304c\u539f\u56e0\u304b\u308f\u304b\u308a\u307e\u3059\u3067\u3057\u3087\u3046\u304b\uff1f\n\ncallback.php\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n<?php\n/**\n *callback.php\uff08\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\uff09\n *Token\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30ea\u30af\u30a8\u30b9\u30c8\n *\n */\n \t$code = $_GET[\"code\"]; // \u8a8d\u53ef\u30b3\u30fc\u30c9\n\n\t$applicationId = \"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID\";\n\t$secret = \"\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\";\n\n\t$api = \"https://auth.login.yahoo.co.jp/yconnect/v1/token\";\n\n\t$basicAuth = base64_encode($applicationId . ':' . $secret);\n\n\t$redirect_uri  = \"Authorization\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u6307\u5b9a\u3057\u305fURI\";\n\n\n\t$postdata = array(\n\t\t\"grant_type\" => \"authorization_code\",\n\t\t\"code\" => $code,\n\t\t\"redirect_uri\" => $redirect_uri\n\t\t);\n\t\t\n\n\t$header = array(\n\t   'Authorization: Basic '.$basicAuth,\n\t   'Content-Type: application/x-www-form-urlencoded; charset=utf-8'\n\t);\n\t$ch = curl_init($api);\n\tcurl_setopt_array($ch, array(\n\t    CURLOPT_HEADER => true,\n\t    CURLOPT_HTTPHEADER => $header,\n\t    CURLOPT_POST => true,\n\t    CURLOPT_POSTFIELDS => $postdata,\n\t    CURLOPT_RETURNTRANSFER => true,\n\t    CURLOPT_SSL_VERIFYPEER => false\n\t));\n\n\t$result = curl_exec($ch);\n\n\t// HTTP\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u30c1\u30a7\u30c3\u30af\u3057\u30a8\u30e9\u30fc\u306a\u3089\u30a8\u30e9\u30fc\u5185\u5bb9\u3092\u51fa\u529b\n\tif(curl_errno($ch)) {\n    \techo 'Curl error: ' . curl_error($ch);\n\t}\n\n\tcurl_close($ch);\n\n\techo $result;\n\n\n?>\n\n\n\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059\u3002\n\n\u6839\u5cb8\n", "tags": ["ydnjp"]}