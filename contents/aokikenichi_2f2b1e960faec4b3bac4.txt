{"context": "\u8a33\u6ce8\n\nhttp://topepo.github.io/caret/training.html \u306e\u548c\u8a33\u3067\u3059\n\nModel Training and Parameter Tuning\ncaret \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u306f\u30e2\u30c7\u30eb\u69cb\u7bc9\u3068\u8a55\u4fa1\u306e\u3044\u304f\u3064\u304b\u306e\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\ntrain \u95a2\u6570\u306f\u6b21\u306e\u7528\u9014\u306b\u4f7f\u3044\u307e\u3059\n\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3092\u3057\u3066\u306e\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5bfe\u3059\u308b\u30e2\u30c7\u30eb\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306e\u8a55\u4fa1\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u901a\u3058\u3066\u306e\u300c\u6700\u9069\u300d\u306a\u30e2\u30c7\u30eb\u306e\u9078\u5b9a\n\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u5bfe\u3059\u308b\u30e2\u30c7\u30eb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u8a55\u4fa1\n\n\u6700\u521d\u306b\u3001\u7279\u5fb4\u7684\u306a\u30e2\u30c7\u30eb\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u73fe\u5728\u3001caret \u306b\u306f216\u306e\u30e2\u30c7\u30eb\u304c\u3042\u308a\u307e\u3059\uff1b\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f train Model List \u3042\u308b\u3044\u306f train Models By Tag \u3092\u53c2\u7167\u306e\u3053\u3068\u3002\u305d\u3053\u3067\u306f\u3001\u6700\u9069\u5316\u306b\u95a2\u3059\u308b\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30ea\u30b9\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\u30e6\u30fc\u30b6\u5b9a\u7fa9\u30e2\u30c7\u30eb\u3082\u4f5c\u6210\u53ef\u80fd\u3067\u3059\u3002\n\u30e2\u30c7\u30eb\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306e\u6700\u521d\u306e\u30b9\u30c6\u30c3\u30d7\u306f\uff08\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e1\u884c\u76ee\uff09\u8a55\u4fa1\u7528\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30bb\u30c3\u30c8\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001\u90e8\u5206\u6700\u5c0f\u4e8c\u4e57\u6cd5(PLS)\u30e2\u30c7\u30eb\u306e\u5834\u5408\u3001PLS \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nDefine sets of model parameter values to evaluate\n\nfor each parameter set do\n\n\u3000for each resampling iteration do\n\n\u3000\u3000Hold-out specific samples\n\u3000\u3000[Optional] Pre-process the data\n\u3000\u3000Fit the model on the remainder\n\u3000\u3000Predict the hold-out samples\n\u3000end\n\n\u3000Calculate the average performance across hold-out predictions\nend\nDetermine the optimal parameter sets\nFit the final model to all the training data using the optimal parameter set\n\n\u30e2\u30c7\u30eb\u3068\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u3092\u5b9a\u7fa9\u3057\u305f\u3089\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001k-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff081\u56de\u3042\u308b\u3044\u306f\u7e70\u308a\u8fd4\u3057\uff09\u3001leave-one-out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3068\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\uff08\u7c21\u5358\u306a\u8a55\u4fa1\u3042\u308b\u3044\u306f632\u306e\u30eb\u30fc\u30eb\uff09\u306b\u3088\u308b\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u6cd5\u304c\u9078\u3079\u307e\u3059\u3002\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u5f8c\u306f\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u3092\u884c\u3044\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u3092\u9078\u3073\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u6700\u9069\u5024\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u81ea\u52d5\u7684\u306b\u9078\u3073\u307e\u3059\u304c\u3001\u9055\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\uff08\u8a73\u7d30\u306f\u5f8c\u8ff0\uff09\u3002\n\n\u4f8b\nmlbench \u30d1\u30c3\u30b1\u30fc\u30b8\u306e Sonar \u30c7\u30fc\u30bf\u3092\u4f7f\u3044\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\uff1a\nlibrary(mlbench)\ndata(Sonar)\nstr(Sonar[, 1:10])\n\n'data.frame':   208 obs. of  10 variables:\n $ V1 : num  0.02 0.0453 0.0262 0.01 0.0762 0.0286 0.0317 0.0519 0.0223 0.0164 ...\n $ V2 : num  0.0371 0.0523 0.0582 0.0171 0.0666 0.0453 0.0956 0.0548 0.0375 0.0173 ...\n $ V3 : num  0.0428 0.0843 0.1099 0.0623 0.0481 ...\n $ V4 : num  0.0207 0.0689 0.1083 0.0205 0.0394 ...\n $ V5 : num  0.0954 0.1183 0.0974 0.0205 0.059 ...\n $ V6 : num  0.0986 0.2583 0.228 0.0368 0.0649 ...\n $ V7 : num  0.154 0.216 0.243 0.11 0.121 ...\n $ V8 : num  0.16 0.348 0.377 0.128 0.247 ...\n $ V9 : num  0.3109 0.3337 0.5598 0.0598 0.3564 ...\n $ V10: num  0.211 0.287 0.619 0.126 0.446 ...\n\ncreateDataPartition \u95a2\u6570\u3067\u30c7\u30fc\u30bf\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u3068\u30c6\u30b9\u30c8\u30bb\u30c3\u30c8\u306b\u5206\u5272\u3057\u307e\u3059\uff08\u8a33\u6ce8\uff1aset.seed(998) \u306f\u4e71\u6570\u306e\u7a2e\u3092\u56fa\u5b9a\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u5b9f\u884c\u4f8b\u306e\u7d50\u679c\u3092\u56fa\u5b9a\u3059\u308b\u305f\u3081\u3002\u4e71\u6570\u306a\u306e\u3067\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b\u7d50\u679c\u304c\u7570\u306a\u308b\u3053\u3068\u3092\u907f\u3051\u308b\u305f\u3081\u3067\u3059\u3002\uff09\uff1a\nlibrary(caret)\nset.seed(998)\ninTraining <- createDataPartition(Sonar$Class, p = .75, list = FALSE)\ntraining <- Sonar[ inTraining,]\ntesting  <- Sonar[-inTraining,]\n\n\u3053\u306e\u30da\u30fc\u30b8\u3084\u4ed6\u306e\u30da\u30fc\u30b8\u3067\u3053\u306e\u30c7\u30fc\u30bf\u3092\u7528\u3044\u307e\u3059\u3002\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306e\u57fa\u790e\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u4e0a\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e3\u884c\u76ee\u306b\u3066\u3001\u7c21\u5358\u306a\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002\u4ed6\u306e\u65b9\u6cd5\u3082\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3001\u7e70\u308a\u8fd4\u3057K-fold\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001leave-one-out\u7b49\u3002trainControl \u95a2\u6570\u306f\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3057\u307e\u3059\uff1a\nfitControl <- trainControl(## 10-fold CV\n                           method = \"repeatedcv\",\n                           number = 10,\n                           ## repeated ten times\n                           repeats = 10)\n\ntrainControl \u306b\u95a2\u3059\u308b\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u7bc0\u306b\u3042\u308a\u307e\u3059\u3002\n\u6700\u521d\u306e2\u3064\u306e\u5c5e\u6027\u306f train \u95a2\u6570\u306b\u4e88\u6e2c\u3068\u30a2\u30a6\u30c8\u30ab\u30e0\u306e\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3082\u306e\u3067\u3059\u30023\u3064\u76ee\u306e\u5c5e\u6027\u306e method \u306f\u30e2\u30c7\u30eb\uff08train Model List \u3042\u308b\u3044\u306f train Models By Tag \u53c2\u7167\u306e\u3053\u3068\uff09\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3067\u306f\u3001gbm \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u7e70\u308a\u8fd4\u3057\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u7528\u3044\u308b\u30e2\u30c7\u30eb\u306e\u57fa\u672c\u7684\u306a\u66f8\u5f0f\u306f\u4ee5\u4e0b\u3067\u3059\uff1a\nset.seed(825)\ngbmFit1 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 ## This last option is actually one\n                 ## for gbm() that passes through\n                 verbose = FALSE)\n\ngbmFit1\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  interaction.depth  n.trees  Accuracy   Kappa      Accuracy SD  Kappa SD \n  1                   50      0.7705490  0.5350650  0.10073946   0.2037707\n  1                  100      0.7944632  0.5835422  0.09419873   0.1914364\n  1                  150      0.8011593  0.5964959  0.09019200   0.1851888\n  2                   50      0.8015147  0.5978660  0.09962239   0.2017663\n  2                  100      0.8088333  0.6119527  0.09563838   0.1946951\n  2                  150      0.8189363  0.6319720  0.08708353   0.1784560\n  3                   50      0.7953015  0.5855569  0.09652109   0.1969998\n  3                  100      0.8143113  0.6232661  0.08878854   0.1824782\n  3                  150      0.8217377  0.6373545  0.09037965   0.1866666\n\nTuning parameter 'shrinkage' was held constant at a value of 0.1\nTuning parameter 'n.minobsinnode' was held constant at a value of 10\nAccuracy was used to select the optimal model using  the largest value.\nThe final values used for the model were n.trees = 150, interaction.depth = 3, shrinkage = 0.1 and n.minobsinnode = 10. \n\n\u52fe\u914d\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0(GBM)\u30e2\u30c7\u30eb\u3067\u306f\u3001\u4e3b\u306b3\u3064\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u3042\u308a\u307e\u3059\uff08\u8a33\u6ce8\uff1a4\u3064\u3042\u308b\uff09\uff1a\n\n\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3001\u3059\u306a\u308f\u3061\u3001\u6728\uff08gbm \u95a2\u6570\u306e n.trees\uff09\n\u6728\u306e\u8907\u96d1\u3055\u3001 interaction.depth\n\u5b66\u7fd2\u7387\uff1a\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u53ce\u675f\u306e\u7a0b\u5ea6\u3001shrinkage\n\u5206\u5272\u3059\u308b\u30ce\u30fc\u30c9\u306b\u304a\u3051\u308b\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u30b5\u30f3\u30d7\u30eb\u306e\u6700\u5c0f\u5024\uff08n.minobsinnode\uff09\n\n\u3053\u306e\u30e2\u30c7\u30eb\u3092\u30c6\u30b9\u30c8\u3059\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u6700\u521d\u306e2\u3064\u306e\u5217\u3067\u3059\uff08shrinkage \u3068 n.minobsinnode \u306f\u793a\u3055\u308c\u3066\u3044\u306a\u3044\u3001\u306a\u305c\u306a\u3089\u3053\u308c\u3089\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306f1\u3064\u306e\u5024\u3092\u7528\u3044\u308b\u3068\u3044\u3046\u30b0\u30ea\u30c3\u30c9\u30bb\u30c3\u30c8\u3068\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\uff09\uff08\u8a33\u6ce8\uff1abeause \u3068\u3044\u3046\u8a9e\u304c\u3042\u3063\u305f\u304c because \u3068\u307f\u306a\u3057\u305f\uff09\u3002 \"Accuracy\"\u5217\u306f\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u901a\u3058\u3066\u306e\u4e00\u81f4\u7387\u3092\u793a\u3057\u307e\u3059\u3002\u6a19\u6e96\u504f\u5dee\u306e\u4e00\u81f4\u306f\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u7d50\u679c\u304b\u3089\u8a08\u7b97\u3057\u307e\u3059\u3002\"Kappa\"\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u306e\u5e73\u5747\u30b3\u30fc\u30a8\u30f3\u039a\u4fc2\u6570\uff08\u975e\u30a6\u30a8\u30a4\u30c8\uff09\u3092\u793a\u3057\u307e\u3059\u3002train \u306f\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\uff08train Model List \u304b train Models By Tag \u53c2\u7167\uff09\u306b\u95a2\u3057\u3066\u50cd\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30e2\u30c7\u30eb\u3067\u306f\u3001train \u306f\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30b0\u30ea\u30c3\u30c9\u3092\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001p \u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6570\u3068\u3059\u308b\u3068\u3001\u30b0\u30ea\u30c3\u30c9\u30b5\u30a4\u30ba\u306f p^3 \u3068\u306a\u308a\u307e\u3059\u3002\u4ed6\u306e\u4f8b\u3067\u306f\u3001RDA\u30e2\u30c7\u30eb\u306f2\u3064\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\uff08\u30ac\u30f3\u30de\u3068\u30e9\u30e0\u30c0\uff09\u3092\u6301\u3061\u3001\u4e21\u65b9\u3068\u3082[0, 1]\u306e\u7bc4\u56f2\u3068\u306a\u308a\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30b0\u30ea\u30c3\u30c9\u306f\u4e8c\u6b21\u5143\u7a7a\u9593\u306b\u304a\u3044\u30669\u3064\u306e\u7d44\u307f\u5408\u308f\u305b\u3068\u306a\u308a\u307e\u3059\u3002\ntrain \u306b\u95a2\u3059\u308b\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u306e\u52d5\u4f5c\u306b\u3064\u3044\u3066\u3001\u3053\u3053\u3067\u5c11\u3057\u89e6\u308c\u307e\u3059\u3002train \u306e\u4ed8\u52a0\u7684\u306a\u6a5f\u80fd\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u7bc0\u3067\u89e6\u308c\u307e\u3059\u3002\n\n\u518d\u73fe\u6027\u306b\u3064\u3044\u3066\n\u591a\u304f\u306e\u30e2\u30c7\u30eb\u3067\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u8a55\u4fa1\u306e\u904e\u7a0b\u3067\u4e71\u6570\u3092\u7528\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u4e71\u6570\u3092\u7528\u3044\u3066\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002\u7d50\u679c\u3092\u518d\u73fe\u3059\u308b\u305f\u3081\u306b\u4e71\u6570\u3092\u7ba1\u7406\u3059\u308b\u65b9\u6cd5\u306f\u4e3b\u306b2\u3064\u3042\u308a\u307e\u3059\u3002\n\n\u540c\u3058\u30ea\u30b5\u30f3\u30d7\u30eb\u3092\u547c\u3073\u51fa\u3057\u3068\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u306e\u9593\u3067\u7528\u3044\u308b\u306b\u306f2\u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u30021\u3064\u76ee\u306f\u3001 set.seed \u3092 train \u306e\u524d\u306b\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\u3059\u3002\u4e71\u6570\u3092\u7528\u3044\u308b\u6700\u521d\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u60c5\u5831\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u5225\u306e\u65b9\u6cd5\u306f\u3001\u30c7\u30fc\u30bf\u306e\u5206\u5272\u3092\u6307\u5b9a\u3059\u308b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092 trainControl \u95a2\u6570\u306e\u5c5e\u6027\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u3067\u8b70\u8ad6\u3057\u307e\u3059\u3002\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5185\u3067\u30e2\u30c7\u30eb\u304c\u69cb\u7bc9\u3055\u308c\u308b\u3068\u304d\u3001seeds \u306f\u6307\u5b9a\u3055\u308c\u307e\u3059\u3002\u4e00\u65b9\u3001train \u3092\u547c\u3073\u51fa\u3059\u524d\u306b seed \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306b\u306f\u540c\u3058\u4e71\u6570\u5024\u3068\u306a\u308a\u307e\u3059\u3002\u4e26\u5217\u5b9f\u884c\u3092\u3057\u3066\u3044\u308b\u5834\u5408\uff08\u3069\u306e\u3088\u3046\u306a\u4e26\u5217\u5316\u3092\u3057\u3066\u3044\u308b\u304b\u306b\u4f9d\u5b58\u3057\u307e\u3059\uff09\u306b\u306f\u3053\u308c\u306f\u6210\u308a\u7acb\u3061\u307e\u305b\u3093\u3002\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u306e seed \u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306b trainControl \u306f seeds \u5c5e\u6027\u3092\u4ed8\u52a0\u7684\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u5c5e\u6027\u306e\u5024\u306f\u6574\u6570\u30d9\u30af\u30c8\u30eb\u306e\u30ea\u30b9\u30c8\u3068\u3057\u3066\u4e0e\u3048\u307e\u3059\u3002trainControl \u306e\u30d8\u30eb\u30d7\u30da\u30fc\u30b8\u306b\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u66f8\u5f0f\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3069\u306e\u3088\u3046\u306a\u4e71\u6570\u5024\u304c\u7528\u3044\u3089\u308c\u308b\u304b\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u4f5c\u8005\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\u3054\u304f\u7a00\u306a\u30b1\u30fc\u30b9\u3067\u306f\u4e71\u6570\u306e seed \u5024\u304c\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u7279\u306bC\u8a00\u8a9e\u3067\u8a08\u7b97\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u3002\n\n\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d7\u30ed\u30bb\u30b9\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\uff0f\u8907\u96d1\u5ea6\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6d17\u6fef\u3068\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u69cb\u7bc9\u306e\u30d7\u30ed\u30bb\u30b9\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u524d\u51e6\u7406\u30aa\u30d7\u30b7\u30e7\u30f3\n\u8a00\u53ca\u6e08\u307f\u306e\u3053\u3068\u3067\u3059\u304c\u3001train \u3067\u306f\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u306b\u5148\u7acb\u3063\u3066\u591a\u69d8\u306a\u524d\u51e6\u7406\u304c\u53ef\u80fd\u3067\u3059\u3002preProcess \u95a2\u6570\u306f\u81ea\u52d5\u7684\u306b\u7528\u3044\u3089\u308c\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u3067\u306f\u3001\u30bb\u30f3\u30bf\u30ea\u30f3\u30b0\u3084\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3001\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\uff08\u8a73\u7d30\u306f\u4e0b\u8a18\uff09\u3001\u4e3b\u6210\u5206\u5206\u6790\u3042\u308b\u3044\u306f\u72ec\u7acb\u6210\u5206\u5206\u6790\u306b\u3088\u308a\u3001spatial sign \u5909\u63db\u3092\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u524d\u51e6\u7406\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f\u3001train \u95a2\u6570\u306b preProcess \u5c5e\u6027\u3092\u52a0\u3048\u307e\u3059\u3002preProcess \u95a2\u6570\u3068\u540c\u3058\u5c5e\u6027\u3092\u7528\u3044\u3066\u524d\u51e6\u7406\u624b\u6cd5\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002preProcess \u95a2\u6570\u3078\u306e\u8ffd\u52a0\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f trainControl \u95a2\u6570\u3092\u7d4c\u7531\u3057\u3066\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u3001predict.train, extractPrediction \u3042\u308b\u3044\u306f extractProbes \uff08\u8a73\u7d30\u306f\u4e0b\u8a18\u53c2\u7167\uff09\u3092\u7528\u3044\u3066\u4e00\u822c\u5316\u3067\u304d\u307e\u3059\u3002\u524d\u51e6\u7406\u3067\u306f\u3001objectfinalModel\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u76f4\u63a5\u306b\u7528\u3044\u3066\u4e88\u6e2c\u3092\u884c\u3046\u3053\u3068\u306f\u3057\u307e\u305b\u3093\u3002(Thepre\u2212processingwouldnotbeappliedtopredictionsthatdirectlyusetheobjectfinalModel\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u76f4\u63a5\u306b\u7528\u3044\u3066\u4e88\u6e2c\u3092\u884c\u3046\u3053\u3068\u306f\u3057\u307e\u305b\u3093\u3002(Thepre\u2212processingwouldnotbeappliedtopredictionsthatdirectlyusetheobjectfinalModel \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u76f4\u63a5\u306b\u7528\u3044\u3066\u4e88\u6e2c\u3092\u884c\u3046\u3053\u3068\u306f\u3057\u307e\u305b\u3093\u3002( The pre-processing would not be applied to predictions that directly use the objectfinalModel object.)\n\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u306f\u30013\u3064\u306e\u624b\u6cd5\u304c\u3042\u308a\u307e\u3059\uff1a\uff08\u8a33\u6ce8\uff1a\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u306f\u6b20\u640d\u5024\u306e\u63a8\u5b9a\u65b9\u6cd5\uff09\n\nk\u8fd1\u508d\u6cd5\u306f\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u304a\u3044\u3066\u3001k\u500b\u306e\u8fd1\u63a5\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u898b\u3064\u3051\u3066\u6b20\u640d\u5024\u3092\u57cb\u3081\u307e\u3059\u3002\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u304a\u3051\u308bk\u306e\u5e73\u5747\u306f\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u30c7\u30fc\u30bf\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306e\u8ddd\u96e2\u3092\u8a08\u7b97\u3057\u305f\u3068\u304d\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u6b20\u640d\u5024\u304c\u306a\u3051\u308c\u3070\u6b20\u640d\u5024\u306a\u3057\u3068\u307f\u306a\u3055\u308c\u307e\u3059\u3002\n\u4ed6\u306e\u624b\u6cd5\u3067\u306f\u3001bagged tree model \u304c\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u3092\u7528\u3044\u305f\u4e88\u6e2c\u3068\u3057\u3066\u7528\u3044\u3089\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u6b63\u78ba\u306a\u30e2\u30c7\u30eb\u3067\u3042\u308a\u3001\u6b20\u640d\u5024\u3092\u6271\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u306a\u30b5\u30f3\u30d7\u30eb\u3067\u4e88\u6e2c\u3092\u3059\u308b\u3068\u304d\u3001bagged tree \u306b\u3088\u308a\u4e88\u6e2c\u56e0\u5b50\u3092\u7528\u3044\u305f\u4e88\u6e2c\u3092\u3057\u3001\u65b0\u305f\u306a\u5024\u3092\u51fa\u3057\u307e\u3059\u3002\u3053\u306e\u30e2\u30c7\u30eb\u3067\u306f\u8a08\u7b97\u30b3\u30b9\u30c8\u304c\u91cd\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306e\u5024\u306e\u4e2d\u592e\u5024\u3092\u6b20\u640d\u5024\u306e\u63a8\u5b9a\u3068\u3057\u3066\u7528\u3044\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\n\n\u3082\u3057\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u6b20\u640d\u5024\u304c\u3042\u308c\u3070\u3001PCA\u3068ICA\u30e2\u30c7\u30eb\u306e\u307f\u304c\u5b8c\u5168\u306a\u30b5\u30f3\u30d7\u30eb\u3092\u6271\u3048\u307e\u3059\u3002\n\nAlternate \u30b0\u30ea\u30c3\u30c9\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\n\u30b0\u30ea\u30c3\u30c9\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u30e6\u30fc\u30b6\u306b\u3088\u308a\u6307\u5b9a\u51fa\u6765\u307e\u3059\u3002tuneGrid \u5c5e\u6027\u306f\u3001\u5404\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5217\u3092\u6301\u3064\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u3092\u6301\u3061\u307e\u3059\u3002\u30ab\u30e9\u30e0\u540d\u306f fitting \u95a2\u6570\u306e\u5c5e\u6027\u3068\u540c\u3058\u3067\u3059\u3002\u524d\u8ff0\u306e RDA\u306e\u4f8b\u3067\u306f\u3001\u30ab\u30e9\u30e0\u540d\u306f gamma \u3068 lambda \u3067\u3057\u305f\u3002train \u95a2\u6570\u306f\u6307\u5b9a\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u30e2\u30c7\u30eb\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3057\u307e\u3059\u3002\n\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3067\u306f\u3001\u5b66\u7fd2\u7387\u3092\u8abf\u6574\u3057 n.trees \u306e3\u3064\u306e\u5024\u3092\u8a55\u4fa1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff1a\ngbmGrid <-  expand.grid(interaction.depth = c(1, 5, 9),\n                        n.trees = (1:30)*50,\n                        shrinkage = 0.1,\n                        n.minobsinnode = 20)\n\nnrow(gbmGrid)\n\nset.seed(825)\ngbmFit2 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 verbose = FALSE,\n                 ## Now specify the exact models \n                 ## to evaluate:\n                 tuneGrid = gbmGrid)\ngbmFit2\n\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  interaction.depth  n.trees  Accuracy  Kappa  Accuracy SD  Kappa SD\n  1                    50     0.76      0.51   0.103        0.21    \n  1                   100     0.78      0.55   0.093        0.19    \n  1                   150     0.79      0.58   0.096        0.19    \n  1                   200     0.80      0.60   0.094        0.19    \n  1                   250     0.80      0.60   0.093        0.19    \n  1                   300     0.81      0.61   0.090        0.18    \n  :                   :        :         :      :            :\n  9                  1250     0.82      0.64   0.083        0.17    \n  9                  1300     0.83      0.64   0.087        0.18    \n  9                  1350     0.83      0.64   0.085        0.17    \n  9                  1400     0.82      0.64   0.084        0.17    \n  9                  1450     0.82      0.64   0.088        0.18    \n  9                  1500     0.83      0.65   0.087        0.18    \n\nTuning parameter 'shrinkage' was held constant at a value of 0.1\nTuning parameter 'n.minobsinnode' was held constant at a value of 20\nAccuracy was used to select the optimal model using  the largest value.\nThe final values used for the model were n.trees = 1150, interaction.depth = 5, shrinkage = 0.1 and n.minobsinnode = 20. \n\n\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u6b20\u640d\u5024\u304c\u3042\u308b\u3068\u304d\u3001PCA\u3068ICA\u30e2\u30c7\u30eb\u306e\u307f\u304c\u30b5\u30f3\u30d7\u30eb\u3092\u5b8c\u5168\u306b\u4f7f\u3048\u307e\u3059\u3002\n\u53ef\u80fd\u306a\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u30e9\u30f3\u30c0\u30e0\u306a\u62bd\u51fa\u3092\u884c\u3046\u4ed6\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u3059\u306a\u308f\u3061\u300c\u30e9\u30f3\u30c0\u30e0\u691c\u7d22\u300d[pdf]\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306b\u8a18\u8ff0\u304c\u3042\u308a\u307e\u3059\u3002(http://topepo.github.io/caret/www.jmlr.org/papers/volume13/bergstra12a/bergstra12a.pdf)\n\u30e9\u30f3\u30c0\u30e0\u691c\u7d22\u3092\u4f7f\u3046\u3068\u304d\u306f\u3001 search = \"random\" \u30aa\u30d7\u30b7\u30e7\u30f3\u3092 trainControl \u5185\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001tuneLength \u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u8a55\u4fa1\u53ef\u80fd\u306a\u7d44\u307f\u5408\u308f\u305b\u306e\u5408\u8a08\u306e\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u30d7\u30ed\u30c3\u30c8\nplot \u95a2\u6570\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u8a55\u4fa1\u3068\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u95a2\u4fc2\u306e\u30c6\u30b9\u30c8\u306b\u3082\u4f7f\u3048\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u95a2\u6570\u306e\u5358\u7d14\u306a\u4f8b\u3068\u3057\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u306e\u7d50\u679c\u3092\u793a\u3057\u307e\u3059\uff1a\ntrellis.par.set(caretTheme())\nplot(gbmFit2)\n\n\uff08\u56f3\u7565\uff09\n\u4ed6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u3082 metric \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u793a\u305b\u307e\u3059\uff1a\ntrellis.par.set(caretTheme())\nplot(gbmFit2, metric = \"Kappa\")\n\n\uff08\u56f3\u7565\uff09\n\u4ed6\u306e\u5f62\u5f0f\u306e\u56f3\u3082\u53ef\u80fd\u3067\u3059\u3002\u3088\u308a\u8a73\u7d30\u306f ?plot.train \u306b\u3066\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u30d2\u30fc\u30c8\u30de\u30c3\u30d7\u3092\u793a\u3057\u307e\u3059\uff1a\ntrellis.par.set(caretTheme())\nplot(gbmFit2, metric = \"Kappa\", plotType = \"level\",\n     scales = list(x = list(rot = 90)))\n\n\uff08\u56f3\u7565\uff09\nggplot \u30e1\u30bd\u30c3\u30c9\u3082\u4f7f\u3048\u307e\u3059\uff1a\nggplot(gbmFit2)\n\n\u30ea\u30b5\u30f3\u30d7\u30eb\u8a55\u4fa1\u306e\u8a73\u7d30\u306a\u8868\u73fe\u3092\u3059\u308b plot \u95a2\u6570\u306e\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u3088\u308a\u8a73\u7d30\u306f ?xyplot.train \u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\u3053\u308c\u3089\u306e\u30d7\u30ed\u30c3\u30c8\u304b\u3089\u3001\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u9055\u3044\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u6700\u521d\u304b\u3089\u518d\u73fe\u3059\u308b\u3053\u3068\u306a\u3057\u306b\u3001\u6700\u7d42\u7684\u306a\u5024\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u3001 update.train \u306b\u3066\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u306b\u30d5\u30a3\u30c3\u30c8\u3057\u76f4\u3059\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002?update.train \u53c2\u7167\u306e\u3053\u3068\u3002\n\ntrainControl \u95a2\u6570\ntrainControl \u95a2\u6570\u306f\u3001\u30e2\u30c7\u30eb\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u751f\u6210\u3057\u307e\u3059\uff1a\n\nmethod: \u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u6cd5\uff1a\"boot\", \"cv\", \"LOOCV\", \"LGOCV\", \"repeatedcv\", \"timeslice\", \"none\", \"oob\"\u3002out-of-bag \u306e\u63a8\u5b9a\u3067\u3042\u308b\u6700\u5f8c\u306e\u5024\u306f\u3001\u30e9\u30f3\u30c0\u30e0\u30d5\u30a9\u30ec\u30b9\u30c8\u3001\u30d0\u30ae\u30f3\u30b0\u6728\u3001bagged earth\u3001 bagged flexible \u5224\u5225\u5206\u6790\u3001conditional tree forest \u30e2\u30c7\u30eb\u3067\u306e\u307f\u7528\u3044\u3089\u308c\u308b\u3002GBM \u30e2\u30c7\u30eb\u306f\u542b\u307e\u308c\u306a\u3044\uff08gbm \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4f5c\u8005\u306f\u3001\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u306b\u3064\u3044\u3066OOB \u30a8\u30e9\u30fc\u306e\u63a8\u5b9a\u306b\u3088\u308b\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u9078\u629e\u304c\u9069\u5207\u3067\u306a\u3044\u3068\u8a00\u53ca\u3057\u3066\u3044\u308b\uff09\u3002\u307e\u305f\u3001leave-one-out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff08\u8a33\u6ce8 LOOCV\uff09\u306b\u3064\u3044\u3066\u306f\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u306b\u3064\u3044\u3066\u4e0d\u78ba\u5b9f\u6027\u304c\u3042\u308a\u307e\u305b\u3093\u3002(Also, for leave-one-out cross-validation, no uncertainty estimates are given for the resampled performance measures.)\nnumber and repeats: number \u306f K-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u56de\u6570\u3042\u308b\u3044\u306f\u3001\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u307e\u305f\u306f leave-group-out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff08\u8a33\u6ce8 LGOCV\uff09\u306e\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u6570\u3092\u793a\u3057\u307e\u3059\u3002repeats \u306f repeated K-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u307f\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002method = \"repeatedcv\", number = 10, repeats = 3 \u3067\u3042\u308c\u3070\u300110-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30923\u56de\u884c\u3044\u307e\u3059\u3002\nverboseIter: \u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u306e\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\uff08\u8a33\u6ce8\uff1aTRUE or FALSE\uff09\u3002\nreturnData: trainingData \u306b\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\u3002\np: leave-group out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u5411\u3051\uff1a\nFor leave-group out cross-validation: \u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u7387\nmethod = \"timeslice\" \u306e\u3068\u304d trainControl \u306f initialWindow\u3001horizon\u3001 \u3068 fixedWindow \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6301\u3061\u3001\u7cfb\u5217\u30c7\u30fc\u30bf\u306b\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u3069\u3046\u9069\u7528\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\nclassProbs: \u30ea\u30b5\u30f3\u30d7\u30eb\u306b\u3088\u308a\u3001\u30af\u30e9\u30b9\u78ba\u7387\u3092\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\u3002\nindex \u3068 indexOut: \u5404\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u306e\u8981\u7d20\u306e\u30ea\u30b9\u30c8\u3002\u5404\u30ea\u30b9\u30c8\u8981\u7d20\u306f\u3000\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3057\u3066\u30b5\u30f3\u30d7\u30eb\u306e\u884c\u3068\u306a\u308a\u307e\u3059\u3002(Each list element is the sample rows used for training at that iteration or should be held-out.) \u5024\u306e\u6307\u5b9a\u304c\u306a\u3051\u308c\u3070\u3001train \u304c\u751f\u6210\u3057\u307e\u3059\u3002\nsummaryFunction: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u8981\u7d04\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\nselectionFunction: \u4ed8\u52a0\u7684\u306a\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9078\u629e\u3059\u308b\u95a2\u6570\u3067\u3059\u3002 and examples.\nPCAthresh, ICAcomp \u3068 k: \uff08\u3082\u3057\u4f7f\u308f\u308c\u305f\u5834\u5408\uff09preProcess \u95a2\u6570\u306b\u3059\u3079\u3066\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6e21\u3055\u308c\u307e\u3059\u3002\nreturnResamp: \"all\", \"final\", \"none\" \u3068\u3044\u3046\u5024\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u3092\u3069\u306e\u3088\u3046\u306b\u4fdd\u5b58\u3059\u308b\u304b\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nallowParallel: train \u304c\uff08\u53ef\u80fd\u306a\u3089\u3070\uff09\u4e26\u5217\u5b9f\u884c\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u8ad6\u7406\u5024\u3067\u3059\u3002\n\u3053\u3053\u3067\u8b70\u8ad6\u3055\u308c\u3066\u306a\u3044\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u307e\u3060\u3042\u308a\u307e\u3059\u3002\n\n\n\u4ed6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u5024\n\u6700\u9069\u306a\u8a2d\u5b9a\u3092\u6c7a\u3081\u308b\u305f\u3081\u306e\u8a08\u91cf\u5024\u3092\u30e6\u30fc\u30b6\u304c\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001RMSE \u3068 R^2 \u304c\u56de\u5e30\u306b\u7528\u3044\u3089\u308c\u3001\u6b63\u78ba\u5ea6\u3068\u039a\uff08\u30ab\u30c3\u30d1\uff09\u304c\u5224\u5225\u306b\u7528\u3044\u3089\u308c\u307e\u3059\u3002\u307e\u305f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001RMSE \u3068\u6b63\u78ba\u5ea6\u3092\u305d\u308c\u305e\u308c\u56de\u5e30\u3068\u5224\u5225\u306b\u7528\u3044\u307e\u3059\u3002train \u95a2\u6570\u306e\u8a08\u91cf\u306e\u5c5e\u6027\u306b\u3088\u308a\u3001\u30e6\u30fc\u30b6\u304c\u6700\u9069\u306a\u7d50\u679c\u3092\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u30011\u3064\u306e\u30af\u30e9\u30b9\u306e\u30b5\u30f3\u30d7\u30eb\u304c\u5c11\u306a\u3044\u6642\u306b\u3001metric = \"Kaapa\" \u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3088\u308a\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u306e\u8cea\u3092\u6539\u5584\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3082\u3057\u3053\u308c\u3089\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u6e80\u8db3\u3067\u304d\u306a\u3051\u308c\u3070\u3001\u30e6\u30fc\u30b6\u72ec\u81ea\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002trainControl \u95a2\u6570\u306b\u306f\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\u3067\u3042\u308b summaryFunction \u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306b\u306f\u4ee5\u4e0b\u306e\u5c5e\u6027\u304c\u3042\u308a\u307e\u3059\uff1a\n*data \u306f \u89b3\u6e2c\u5024\u3068\u4e88\u6e2c\u5024\uff08\u56de\u5e30\u3067\u306f\u6570\u5024\u3001\u5224\u5225\u3067\u306f\u6587\u5b57\u5024\uff09\u3092\u793a\u3059 obs \u3068 pred \u3068\u3044\u3046\u540d\u306e\u5217\u3092\u6301\u3064\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u3042\u308b\u3044\u306f\u30de\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u53c2\u7167\u3057\u307e\u3059\u3002\u73fe\u5728\u306f\u3001\u30af\u30e9\u30b9\u78ba\u7387\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e1\u3064\u306e\u7d44\u307f\u5408\u308f\u305b\u306b\u3064\u3044\u3066\u306eheld-out \u4e88\u6e2c\uff08\u305d\u3057\u3066\u95a2\u9023\u3057\u3066\u53c2\u7167\u3059\u308b\u5024\uff09\u306e\u30c7\u30fc\u30bf\u306e\u5024\u3067\u3059\u3002tarainControl \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e classProbs \u5c5e\u6027\u304c TRUE \u306e\u5834\u5408\u306f\u3001\u30af\u30e9\u30b9\u78ba\u7387\u306e\u5217\u304c\u52a0\u308f\u308a\u307e\u3059\u3002\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u3068\u540c\u3058\u540d\u524d\u306e\u5217\u540d\u3068\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u3001train \u3067 wetihts \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070 weights \u3068\u3044\u3046\u5217\u3082\u52a0\u308f\u308a\u307e\u3059\u3002\n* lev \u306f\u6587\u5b57\u5024\u3067\u3042\u308a\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u304b\u3089\u5f97\u3089\u308c\u308b\u30a2\u30a6\u30c8\u30ab\u30e0\u306e factor \u30ec\u30d9\u30eb\u3067\u3059\u3002\u56de\u5e30\u3067\u306f NULL \u3068\u306a\u308a\u307e\u3059\u3002\n* model \u306f\u6587\u5b57\u5024\uff08\u3059\u306a\u308f\u3061\u3001 train \u306e method \u5c5e\u6027\u306e\u5024\uff09\u3067\u3059\u3002\n\u95a2\u6570\u306e\u51fa\u529b\u306f\u6570\u5024\u306e\u8981\u7d04\u8a08\u91cf\u306e vector \u3067\u3042\u308a\u3001\u30cc\u30eb\u51fa\u306a\u3044\u540d\u524d\u304c\u3042\u308a\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f train \u4e88\u6e2c\u3055\u308c\u305f\u30af\u30e9\u30b9\u306e\u5224\u5225\u30e2\u30c7\u30eb\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u30af\u30e9\u30b9\u78ba\u7387\u3092\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a55\u4fa1\u306b\u7528\u3044\u307e\u3059\u3002\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30d7\u30ed\u30bb\u30b9\u306b\u3066\u30af\u30e9\u30b9\u78ba\u7387\u306e\u4e88\u6e2c\u3092\u5f97\u308b\u306b\u306f\u3001trainContorl \u306e classProbs \u5c5e\u6027\u3092 TRUE \u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u5404\u30ea\u30b5\u30f3\u30d7\u30eb\uff08\u30af\u30e9\u30b9\u3054\u3068\u306b\u5217\u304c\u3042\u308a\u3001\u5217\u540d\u306f\u30af\u30e9\u30b9\u540d\u3067\u3059\uff09\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u78ba\u7387\u3092\u30de\u30fc\u30b8\u3057\u305f\u5217\u3068\u306a\u308a\u307e\u3059\u3002\n\u6700\u5f8c\u306e\u7bc0\u3067\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30eb\u3092\u901a\u3057\u3066\u306e\u5e73\u5747\u3067\u3042\u308b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30b9\u30b3\u30a2\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u5225\u306e\u7d44\u307f\u8fbc\u307f\u6e08\u307f\u95a2\u6570\u3067\u3042\u308b\u3001twoClassSummary \u306f\u611f\u5ea6\u3068\u7279\u7570\u5ea6\u3068ROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u3092\u8a08\u7b97\u3057\u307e\u3059\uff1a\nhead(twoClassSummary)\n\n1 function (data, lev = NULL, model = NULL)                                \n2 {                                                                        \n3     if (length(levels(data$obs)) > 2)                                    \n4         stop(paste(\"Your outcome has\", length(levels(data$obs)),         \n5             \"levels. The twoClassSummary() function isn't appropriate.\"))\n6     requireNamespaceQuietStop(\"pROC\")                                    \n\n\u3053\u306e\u57fa\u6e96\u3092\u4f7f\u3063\u3066\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u3092\u518d\u69cb\u7bc9\u3059\u308b\u3068\u304d\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u7528\u3044\u3066\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068ROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u306e\u95a2\u4fc2\u3092\u898b\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\uff1a\nfitControl <- trainControl(method = \"repeatedcv\",\n                           number = 10,\n                           repeats = 10,\n                           ## Estimate class probabilities\n                           classProbs = TRUE,\n                           ## Evaluate performance using \n                           ## the following function\n                           summaryFunction = twoClassSummary)\n\nset.seed(825)\ngbmFit3 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 verbose = FALSE,\n                 tuneGrid = gbmGrid,\n                 ## Specify which metric to optimize\n                 metric = \"ROC\")\ngbmFit3\n\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  interaction.depth  n.trees  ROC   Sens  Spec  ROC SD  Sens SD  Spec SD\n  1                    50     0.86  0.80  0.70  0.096   0.15     0.16   \n  1                   100     0.88  0.82  0.73  0.087   0.14     0.15   \n  1                   150     0.88  0.83  0.75  0.092   0.13     0.16   \n  1                   200     0.88  0.84  0.76  0.093   0.13     0.16   \n  1                   250     0.88  0.83  0.77  0.086   0.13     0.16   \n  1                   300     0.88  0.84  0.77  0.082   0.13     0.16   \n  :                   :        :     :      :     :       :        :\n  9                  1250     0.89  0.88  0.76  0.073   0.11     0.15   \n  9                  1300     0.89  0.87  0.77  0.072   0.11     0.15   \n  9                  1350     0.89  0.87  0.77  0.071   0.11     0.15   \n  9                  1400     0.89  0.87  0.77  0.071   0.11     0.15   \n  9                  1450     0.89  0.87  0.76  0.070   0.12     0.15   \n  9                  1500     0.89  0.88  0.77  0.071   0.11     0.15   \n\nTuning parameter 'shrinkage' was held constant at a value of 0.1\nTuning parameter 'n.minobsinnode' was held constant at a value of 20\nROC was used to select the optimal model using  the largest value.\nThe final values used for the model were n.trees = 1150, interaction.depth = 5, shrinkage = 0.1 and n.minobsinnode = 20. \n\n\u3053\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u4ed8\u52a0\u7684\u306a\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3088\u308bROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u306e\u5e73\u5747\u306f\u3001100\u30ea\u30b5\u30f3\u30d7\u30eb\u306b\u3064\u3044\u30660.896\u3067\u3057\u305f\u3002\nIn this case, the average area under the ROC curve associated with the optimal tuning parameters was 0.896 across the 100 resamples.\n\n\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u306e\u9078\u629e\n\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d7\u30ed\u30bb\u30b9\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u5225\u306e\u624b\u6cd5\u306f\u3001\u4e0e\u3048\u3089\u308c\u305f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6570\u306b\u3088\u308a\u3001\u300c\u6700\u9069\u300d\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u3092\u9078\u629e\u3059\u308b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u4fee\u6b63\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001train \u95a2\u6570\u306f\u6700\u5927\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6570\uff08\u56de\u5e30\u30e2\u30c7\u30eb\u3067\u306f\u5e73\u5747\u4e8c\u4e57\u8aa4\u5dee\u304c\u6700\u5c0f\uff09\u3068\u306a\u308b\u3088\u3046\u306b\u30e2\u30c7\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u30e2\u30c7\u30eb\u9078\u629e\u306e\u4ed6\u306e\u65b9\u6cd5\u3092\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002Breiman \u3089\uff081984\uff09\u306f\u5358\u4e00\u6728\u30e2\u30c7\u30eb\u306b\u3064\u3044\u3066\u306e\u300cone standard error rule\u300d\u3092\u63d0\u6848\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u6700\u9069\u306a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5024\u306e\u30e2\u30c7\u30eb\u304c\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306b\u3088\u308a\u540c\u5b9a\u3055\u308c\u304b\u3064\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u6a19\u6e96\u8aa4\u5dee\u3092\u63a8\u5b9a\u51fa\u6765\u307e\u3059\u3002\uff08\u660e\u793a\u7684\u306b\uff09\u6700\u9ad8\u306e\u30e2\u30c7\u30eb\u306e\u6a19\u6e96\u8aa4\u5dee\u3092\u6301\u3064\u5358\u7d14\u306a\u30e2\u30c7\u30eb\u304c\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u5358\u7d14\u306a\u6728\u304c\u610f\u5473\u3092\u306a\u3059\u306e\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u30e2\u30c7\u30eb\u304c\u30aa\u30fc\u30d0\u30fc\u30d5\u30a3\u30c3\u30c8\u304b\u3089\u59cb\u307e\u308a\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u306b\u3088\u308a\u7279\u7570\u7684\u306b\u306a\u308b\u304b\u3089\u3067\u3059\u3002\ntrain \u3067\u306f\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u9078\u629e\u306b\u3064\u3044\u3066\u306e\u5225\u306e\u30eb\u30fc\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002selectionFunction \u5c5e\u6027\u306b\u3088\u308a\u3001\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u6c7a\u5b9a\u3092\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u7684\u306b\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u306f3\u3064\u306e\u95a2\u6570\u304c\u3042\u308a\uff1abest \u306f\u6700\u5927\uff0f\u6700\u5c0f\u5024\u3092\u9078\u629e\u3057\u3001oneSE \u306f Breiman \u3089\uff081984\uff09\u306e\u624b\u6cd5\u3092\u8e0f\u8972\u3057\u3066\u6700\u9069\u5024\u306e\u8a31\u5bb9\u8aa4\u5dee\u306e\u30d1\u30fc\u30bb\u30f3\u30c8\u306b\u3064\u3044\u3066\u306e\u8907\u96d1\u3055\u304c\u4e00\u756a\u306a\u3044\u30e2\u30c7\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u3088\u308a\u8a73\u7d30\u306f ?best \u3092\u53c2\u7167\u306e\u3053\u3068\u3002 \n\u30e6\u30fc\u30b6\u5b9a\u7fa9\u95a2\u6570\u3082\u53ef\u80fd\u3067\u3042\u308a\u3001\u5c5e\u6027\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff1a\n\nx \u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u95a2\u9023\u3059\u308b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u5024\u3092\u542b\u3080\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u3067\u3059\u3002\u5404\u884c\u304c\u7570\u306a\u308b\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u5024\u3068\u306a\u308a\u307e\u3059\u3002\nmetric \uff08train \u306e\u8a08\u91cf\u5c5e\u6027\u304b\u3089\u76f4\u63a5\u547c\u3073\u3060\u3055\u308c\u305f\uff09\u6700\u9069\u5316\u3055\u308c\u305f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u3092\u793a\u3059\u6587\u5b57\u5217\u3002\nmaximize \u306f\uff08train \u304b\u3089\u76f4\u63a5\u547c\u3073\u51fa\u3055\u308c\u305f\uff09\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u306e\u6700\u5927\u5024\u3067\u3088\u308a\u3088\u3044\u5024\u3092\u793a\u3059\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\u3002\n\n\u3053\u306e\u95a2\u6570\u306f x \u3067\u9078\u629e\u3055\u308c\u305f\u884c\u304c\u793a\u30591\u3064\u306e\u6574\u6570\u5024\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066\u3001\u6b63\u78ba\u5ea6\u306b\u57fa\u3044\u3066\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3092\u9078\u629e\u3057\u305f\u4ee5\u524d\u306e\u3082\u306e\u3067\u306f\uff1a n.trees = 1150, iteraction.depth = 5, shrinkage = 0.1, n.minobsinnode = 20 \u3067\u3057\u305f\u3002\u3057\u304b\u3057\u3001\u3053\u306e\u30d7\u30ed\u30c3\u30c8\u306e\u30b9\u30b1\u30fc\u30eb\u306f\u72ed\u304f\u3001\u6b63\u78ba\u5ea6\u306f0.86\u304b\u30890.896\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3088\u308a\u8907\u96d1\u5ea6\u306e\u4f4e\u3044\u30e2\u30c7\u30eb\uff08\u4f8b\u3048\u3070\u3001\u3088\u308a\u5c11\u306a\u3044\u304b\u6d45\u3044\u6728\uff09\u3067\u3082\u8a31\u5bb9\u3067\u304d\u308b\u6b63\u78ba\u5ea6\u304c\u51fa\u308b\u3067\u3057\u3087\u3046\u3002\ntolence \u95a2\u6570\u306f\u3001(x - x_best) / x_best * 100 \u306b\u57fa\u3065\u304f\u3088\u308a\u8907\u96d1\u5ea6\u306e\u5c11\u306a\u3044\u30e2\u30c7\u30eb\u3092\u898b\u3064\u3051\u307e\u3059\u3002\u3053\u308c\u306f\u30d1\u30fc\u30bb\u30f3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u30012% \u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30ed\u30b9\u306b\u57fa\u3065\u304f\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u9078\u629e\u3067\u306f\uff1a\nwhichTwoPct <- tolerance(gbmFit3$results, metric = \"ROC\",\n                         tol = 2, maximize = TRUE)\ncat(\"best model within 2 pct of best:\\n\")\nbest model within 2 pct of best:\ngbmFit3$results[whichTwoPct,1:6]\n   shrinkage interaction.depth n.minobsinnode n.trees       ROC      Sens\n31       0.1                 5             20      50 0.8825918 0.8318056\n\n0.883\u306eROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u3067\u3042\u308b\u3088\u308a\u8907\u96d1\u5ea6\u306e\u5c11\u306a\u3044\u30e2\u30c7\u30eb\u3092\u793a\u3057\u3066\u3044\u307e\u3059\uff08\u300c\u6700\u9069\u9078\u629e\u300d\u3067\u306e0.896\u3068\u6bd4\u3079\u3066\u307f\u307e\u3057\u3087\u3046\uff09\u3002\n\u3053\u308c\u3089\u306e\u95a2\u6570\u306e\u30e1\u30a4\u30f3\u306e\u8a71\u984c\u306f\u3001\u5358\u7d14\u304b\u3089\u8907\u96d1\u307e\u3067\u306e\u30e2\u30c7\u30eb\u306e\u4e26\u3073\u306b\u95a2\u3059\u308b\u3082\u306e\u3067\u3059\u3002\u3044\u304f\u3064\u304b\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u3053\u308c\u306f\u5bb9\u6613\uff08\u4f8b \u5358\u7d14\u306a\u6728\u3001\u90e8\u5206\u6700\u5c0f\u4e8c\u4e57\uff09\u3067\u3059\u304c\u3001\u3053\u306e\u30e2\u30c7\u30eb\u306e\u5834\u5408\u306f\u3001\u4e00\u3064\u306e\u8ab2\u984c\u3068\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u300150\u306e\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u6df1\u30558\u3088\u308a\u3082\u8907\u96d1\u306a100\u306e\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u6df1\u30552\u306e\u6728\u3092\u7528\u3044\u305f\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u304c\u5b58\u5728\u3059\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\u3053\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u306f\u4e26\u3079\u66ff\u3092\u9078\u629e\u3067\u304d\u307e\u3059\u3002\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u6728\u306e\u6df1\u3055\u306e\u5897\u52a0\u3088\u308a\u3082\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u304c\u5897\u3048\u305f\u65b9\u304c\u8907\u96d1\u5ea6\u304c\u5897\u3059\u3068\u307f\u306a\u3057\u3066\u304a\u308a\u3001\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3067\u4e26\u3079\u3066\u304b\u3089\u6df1\u3055\u3067\u4e26\u3079\u3066\u3044\u307e\u3059\u3002\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u3067\u306e\u3088\u308a\u8a73\u7d30\u306f ?best \u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\n\u4e88\u6e2c\u306e\u62bd\u51fa\u3068\u30af\u30e9\u30b9\u78ba\u7387\n\u8a00\u53ca\u6e08\u307f\u306e\u901a\u308a\u3001train \u95a2\u6570\u304b\u3089\u51fa\u529b\u3055\u308c\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u30b5\u30d6\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e finalModel \u306b\u300c\u6700\u9069\u5316\u3055\u308c\u305f\u300d\u30e2\u30c7\u30eb\u3092\u542b\u307f\u307e\u3059\u3002\u4e88\u6e2c\u306f\u901a\u5e38\u3053\u308c\u3089\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3088\u308a\u306a\u3055\u308c\u307e\u3059\u3002pls \u3042\u308b\u3044\u306f gbm \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u3088\u3046\u306a\u3044\u304f\u3064\u304b\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u8ffd\u52a0\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u6700\u9069\u5316\u306b\u5fc5\u8981\u3067\u3059\u3002\u3053\u306e\u5834\u5408\u3001\u65b0\u3057\u3044\u30b5\u30f3\u30d7\u30eb\u3067\u4e88\u6e2c\u3059\u308b\u305f\u3081\u306b\u3001 train \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6700\u9069\u5024\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001predict.gbm \u3092\u7528\u3044\u3066\u4e88\u6e2c\u3059\u308b\u5834\u5408\u3001\u30e6\u30fc\u30b6\u306f\u6728\u306e\u6570\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3042\u308a\u307e\u305b\u3093\uff09\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u4e8c\u5024\u5224\u5225\u3067\u306f\u3001\u3053\u306e\u95a2\u6570\u306e\u4e88\u6e2c\u3067\u306f\u30af\u30e9\u30b9\u306e1\u3064\u306e\u78ba\u7387\u3092\u5f97\u3066\u3001\u5224\u5225\u306e factor \u30d9\u30af\u30c8\u30eb\u306b\u7f6e\u63db\u3059\u308b\u305f\u3081\u306b\u5225\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002predict.train \u306f\u81ea\u52d5\u7684\u306b\u3053\u308c\u3089\u3092\u884c\u3044\u307e\u3059\uff08\u305d\u3057\u3066\u5225\u306e\u30e2\u30c7\u30eb\u3067\u3082\uff09\u3002\n\u307e\u305f\u3001R\u3067\u306e\u4e88\u6e2c\u30e2\u30c7\u30eb\u306b\u306f\u3068\u3066\u3082\u5c11\u306a\u3044\u6a19\u6e96\u7684\u306a\u6587\u6cd5\u3057\u304b\u3042\u308a\u307e\u305b\u3093\u3002\u4f8b\u3048\u3070\u3001\u30af\u30e9\u30b9\u78ba\u7387\u3092\u5f97\u308b\u305f\u3081\u306b\u306f\u3001\u591a\u304f\u306e predict \u30e1\u30bd\u30c3\u30c9\u3067\u306f\u30af\u30e9\u30b9\u5224\u5225\u3042\u308b\u3044\u306f\u78ba\u7387\u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3067\u3059\u3002\u7570\u306a\u308b\u30d1\u30c3\u30b1\u30b8\u3067\u306f\u3001\"prob\", \"posterior\", \"response\", \"probability\", \"raw\"\u306e\u3088\u3046\u306a\u7570\u306a\u308b\u5024\u3092\u7528\u3044\u307e\u3059\u3002\u5225\u306e\u5834\u5408\u306f\u5b8c\u5168\u306b\u7570\u306a\u308b\u6587\u6cd5\u3068\u306a\u308a\u307e\u3059\u3002\npredict.train \u3067\u306f\u3001\"class\"\u3068\"prob\"\u306b\u5171\u901a\u5316\u3055\u308c\u3066\u3044\u307e\u3059\uff08\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u306f\u5404\u30e2\u30c7\u30eb\u304c\u9069\u5207\u306a\u9078\u629e\u3092\u3057\u3066\u3044\u307e\u3059\uff09\u3002\u4f8b\u3048\u3070\uff1a\npredict(gbmFit3, newdata = head(testing))\n\n[1] R R R R M M\nLevels: M R\n\npredict(gbmFit3, newdata = head(testing), type = \"prob\")\n\n             M            R\n1 1.982479e-05 9.999802e-01\n2 8.774626e-07 9.999991e-01\n3 1.789676e-11 1.000000e+00\n4 6.024225e-04 9.993976e-01\n5 9.999999e-01 1.179912e-07\n6 9.995127e-01 4.872602e-04\n\n\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5206\u5e03\u306e\u63a2\u7d22\u3068\u6bd4\u8f03\n\nWithin-Model\n\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u306b\u3064\u3044\u3066\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u9593\u306e\u95a2\u4fc2\u306e\u63a2\u7d22\u306b\u306f lattice \u95a2\u6570\u304c\u4f7f\u308f\u308c\u307e\u3059\uff1a\n\nxyplot \u3068 stripplot \u306f\uff08\u6570\u5024\uff09\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d71\u8a08\u91cf\u3092\u30d7\u30ed\u30c3\u30c8\u3057\u307e\u3059\u3002\nhistogram \u3068 densityplot \u306f\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5206\u5e03\u3092\u898b\u308b\u305f\u3081\u306b\u4f7f\u3044\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001\u4ee5\u4e0b\u306e\u6587\u3067\u306f\u5bc6\u5ea6\u30d7\u30ed\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\uff1a\uff08\u8a33\u6ce8\uff1a\u539f\u6587\u306b\u4f5c\u56f3\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u306a\u3044\u3067\u3059\uff09\n\uff08\u56f3\u7565\uff09\n\u3082\u3057\u3001\u8907\u6570\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u306e\u30d7\u30ed\u30c3\u30c8\u3092\u3057\u305f\u3044\u306e\u306a\u3089\u3070\u3001resamples = \"all\" \u30aa\u30d7\u30b7\u30e7\u30f3\u3092 control \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u30e2\u30c7\u30eb\u9593 Between-Models\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5206\u5e03\u306b\u3088\u308b\uff08train\u3001sbf \u3042\u308b\u3044\u306f rfe \u306b\u3088\u308a\u751f\u6210\u3055\u308c\u308b\uff09\u30e2\u30c7\u30eb\u9593\u306e\u9055\u3044\u3092\u7279\u5fb4\u3065\u3051\u308b\u95a2\u6570\u3082 caret \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u306f\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u95a2\u6570\u306f Hothorn \u3089\uff082005\uff09\u3068 Eugster \u3089\uff082008\uff09\u306e\u7814\u7a76\u306b\u57fa\u3065\u304f\u3082\u306e\u3067\u3059\u3002\n\u307e\u305a\u6700\u521d\u306b\u3001\u30b5\u30dd\u30fc\u30c8\u30d9\u30af\u30bf\u30fc\u30de\u30b7\u30f3\u30e2\u30c7\u30eb\u3092 Sonar \u30c7\u30fc\u30bf\u306b\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u3055\u305b\u307e\u3059\u3002preProc \u5c5e\u6027\u3092\u7528\u3044\u3066\u30c7\u30fc\u30bf\u306e\u6b63\u898f\u5316\u3092\u884c\u3044\u307e\u3059\u3002\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3092\u4f7f\u3046\u305f\u3081\u306e\u4e71\u6570\u306e\u30b7\u30fc\u30c9\u5024\u3092\u540c\u3058\u306b\u306a\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30bb\u30c3\u30c8\u304c\u540c\u3058\u306b\u306a\u308a\u3001\u30e2\u30c7\u30eb\u9593\u3067\u306e\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306e\u6bd4\u8f03\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3059\u3002\nset.seed(825)\nsvmFit <- train(Class ~ ., data = training,\n                 method = \"svmRadial\",\n                 trControl = fitControl,\n                 preProc = c(\"center\", \"scale\"),\n                 tuneLength = 8,\n                 metric = \"ROC\")\nsvmFit\n\nSupport Vector Machines with Radial Basis Function Kernel \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nPre-processing: centered (60), scaled (60) \nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  C      ROC        Sens       Spec       ROC SD      Sens SD    Spec SD  \n   0.25  0.8672371  0.7448611  0.7485714  0.08273960  0.1364068  0.1711608\n   0.50  0.9030134  0.8334722  0.7766071  0.06511576  0.1457414  0.1441030\n   1.00  0.9221577  0.8709722  0.7785714  0.06134606  0.1172593  0.1523708\n   2.00  0.9318601  0.8890278  0.7692857  0.05793951  0.1141643  0.1521948\n   4.00  0.9373735  0.8837500  0.8096429  0.05623538  0.1083167  0.1518036\n   8.00  0.9442411  0.9026389  0.8151786  0.05584599  0.1038692  0.1567138\n  16.00  0.9445164  0.9090278  0.8155357  0.05676892  0.0992626  0.1525199\n  32.00  0.9445164  0.9111111  0.8142857  0.05676892  0.1004068  0.1556129\n\nTuning parameter 'sigma' was held constant at a value of 0.0115025\nROC was used to select the optimal model using  the largest value.\nThe final values used for the model were sigma = 0.0115025 and C = 16. \n\n\u307e\u305f\u3001\u6b63\u898f\u5224\u5225\u5206\u6790\u306b\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u3055\u305b\u307e\u3059\u3002\nset.seed(825)\nrdaFit <- train(Class ~ ., data = training,\n                 method = \"rda\",\n                 trControl = fitControl,\n                 tuneLength = 4,\n                 metric = \"ROC\")\nrdaFit\n\nRegularized Discriminant Analysis \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  gamma      lambda     ROC        Sens       Spec       ROC SD      Sens SD    Spec SD  \n  0.0000000  0.0000000  0.8492894  0.8215278  0.7705357  0.11348240  0.1539451  0.1748415\n  0.0000000  0.3333333  0.8472148  0.8215278  0.7683929  0.11283235  0.1570403  0.1673312\n  0.0000000  0.6666667  0.8385355  0.8190278  0.7512500  0.12045473  0.1605142  0.1754646\n  0.0000000  1.0000000  0.8536744  0.8398611  0.7741071  0.11492188  0.1408179  0.1611321\n  0.3333333  0.0000000  0.9073760  0.9008333  0.7642857  0.07117484  0.1166216  0.1476688\n  0.3333333  0.3333333  0.9054142  0.8984722  0.7628571  0.07421057  0.1205595  0.1464660\n  0.3333333  0.6666667  0.9060813  0.8925000  0.7644643  0.07283076  0.1201860  0.1429630\n  0.3333333  1.0000000  0.9037004  0.9041667  0.7646429  0.08614906  0.1124100  0.1491529\n  0.6666667  0.0000000  0.8836210  0.8805556  0.7242857  0.08504414  0.1086103  0.1574304\n  0.6666667  0.3333333  0.8872024  0.8775000  0.7296429  0.08830682  0.1047636  0.1578737\n  0.6666667  0.6666667  0.8844048  0.8693056  0.7258929  0.08999459  0.1174386  0.1571448\n  0.6666667  1.0000000  0.8850025  0.8738889  0.7357143  0.08958058  0.1104724  0.1591939\n  1.0000000  0.0000000  0.7258631  0.6601389  0.6464286  0.13223843  0.1750093  0.2033336\n  1.0000000  0.3333333  0.7284226  0.6604167  0.6462500  0.12614738  0.1729815  0.2031386\n  1.0000000  0.6666667  0.7274950  0.6613889  0.6430357  0.12820321  0.1721392  0.2097047\n  1.0000000  1.0000000  0.7233309  0.6593056  0.6491071  0.13280992  0.1723843  0.1996953\n\nROC was used to select the optimal model using  the largest value.\nThe final values used for the model were gamma = 0.3333333 and lambda = 0. \n\n\u3053\u308c\u3089\u306e\u30e2\u30c7\u30eb\u3092\u4e0e\u3048\u3089\u308c\u305f\u3068\u304d\u3001\u30e2\u30c7\u30eb\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u9055\u3044\u306e\u7d71\u8a08\u91cf\u3092\u5f97\u3089\u308c\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\u305d\u306e\u305f\u3081\u306b\u306f\u3001resamples \u3092\u7528\u3044\u3066\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u3092\u307e\u305a\u96c6\u3081\u307e\u3059\u3002\nresamps <- resamples(list(GBM = gbmFit3,\n                          SVM = svmFit,\n                          RDA = rdaFit))\nresamps\n\nCall:\nresamples.default(x = list(GBM = gbmFit3, SVM = svmFit, RDA = rdaFit))\n\nModels: GBM, SVM, RDA \nNumber of resamples: 100 \nPerformance metrics: ROC, Sens, Spec \nTime estimates for: everything, final model fit \n\nsummary(resamps)\n\nCall:\nsummary.resamples(object = resamps)\n\nModels: GBM, SVM, RDA \nNumber of resamples: 100 \n\nROC \n      Min. 1st Qu. Median   Mean 3rd Qu. Max. NA's\nGBM 0.5714  0.8464 0.9085 0.8963  0.9526    1    0\nSVM 0.6786  0.9107 0.9557 0.9445  0.9844    1    0\nRDA 0.6508  0.8571 0.9206 0.9074  0.9653    1    0\n\nSens \n     Min. 1st Qu. Median   Mean 3rd Qu. Max. NA's\nGBM 0.625  0.8507 0.8750 0.8821       1    1    0\nSVM 0.500  0.8750 0.8889 0.9090       1    1    0\nRDA 0.500  0.8750 0.8889 0.9008       1    1    0\n\nSpec \n      Min. 1st Qu. Median   Mean 3rd Qu. Max. NA's\nGBM 0.4286  0.7143 0.7500 0.7664  0.8571    1    0\nSVM 0.2857  0.7143 0.8571 0.8155  0.9062    1    0\nRDA 0.2857  0.7143 0.7500 0.7643  0.8571    1    0\n\n\u3053\u3053\u3067\u306f\u3001control \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b resamples = \"final\" \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u306e\u3053\u3068\u3002\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5206\u5e03\u306e\u53ef\u8996\u5316\u306e\u305f\u3081\u306b\u3044\u304f\u3064\u304b\u306e lattice \u30d7\u30ed\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\uff1adensity plots, box-whisker plots, scatterplot matrices \u3068\u8981\u7d04\u8a08\u91cf\u306e scatterplots \u3067\u3059\u3002\u4f8b\u3048\u3070\uff1a\ntrellis.par.set(theme1)\nbwplot(resamps, layout = c(3, 1))\n\n\uff08\u56f3\u7565\uff09\ntrellis.par.set(caretTheme())\ndotplot(resamps, metric = \"ROC\")\n\n\uff08\u56f3\u7565\uff09\ntrellis.par.set(theme1)\nxyplot(resamps, what = \"BlandAltman\")\n\n\uff08\u56f3\u7565\uff09\nsplom(resamps)\n\n\uff08\u56f3\u7565\uff09\n\u4ed6\u306e\u53ef\u8996\u5316\u3001 densityplot.resamples \u3068 parallel.resamples \u3082\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u306e\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30e2\u30c7\u30eb\u306b\u30d5\u30a3\u30c3\u30c8\u3055\u305b\u305f\u306e\u3067\u3001\u30e2\u30c7\u30eb\u9593\u306e\u9055\u3044\u306b\u610f\u5473\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3046\u3059\u308b\u3068\u3001within-resample \u76f8\u95a2\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u305d\u308c\u3092\u6e1b\u3089\u3057\u307e\u3059\u3002\u5dee\u7570\u3092\u8a08\u7b97\u3057\u3001\u30e2\u30c7\u30eb\u9593\u306b\u5dee\u304c\u306a\u3044\u3068\u3044\u3046\u5e30\u7121\u4eee\u8aac\u3092\u5358\u7d14\u306at\u691c\u5b9a\u3067\u8a55\u4fa1\u3057\u307e\u3059\u3002\ndifValues <- diff(resamps)\ndifValues\n\nCall:\ndiff.resamples(x = resamps)\n\nModels: GBM, SVM, RDA \nMetrics: ROC, Sens, Spec \nNumber of differences: 3 \np-value adjustment: bonferroni \n\nsummary(difValues)\nCall:\nsummary.diff.resamples(object = difValues)\n\np-value adjustment: bonferroni \nUpper diagonal: estimates of the difference\nLower diagonal: p-value for H0: difference = 0\n\nROC \n    GBM       SVM       RDA     \nGBM           -0.04818  -0.01104\nSVM 4.692e-12            0.03714\nRDA 0.4831    2.714e-07         \n\nSens \n    GBM    SVM       RDA      \nGBM        -0.026944 -0.018750\nSVM 0.0280            0.008194\nRDA 0.5805 1.0000             \n\nSpec \n    GBM      SVM       RDA      \nGBM          -0.049107  0.002143\nSVM 0.001523            0.051250\nRDA 1.000000 0.011419           \ntrellis.par.set(theme1)\nbwplot(difValues, layout = c(3, 1))\n\n\uff08\u56f3\u7565\uff09\ntrellis.par.set(caretTheme())\ndotplot(difValues)\n\n\uff08\u56f3\u7565\uff09\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306a\u3057\u3067\u306e\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\n\u30e2\u30c7\u30eb\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u5024\u304c\u65e2\u77e5\u306e\u5834\u5408\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3084\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306a\u3057\u306b\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066 train \u306f\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002trainControl \u306e\u30aa\u30d7\u30b7\u30e7\u30f3 method = \"none\" \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\uff1a\nfitControl <- trainControl(method = \"none\", classProbs = TRUE)\n\nset.seed(825)\ngbmFit4 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 verbose = FALSE,\n                 ## Only a single model can be passed to the\n                 ## function when no resampling is used:\n                 tuneGrid = data.frame(interaction.depth = 4,\n                                       n.trees = 100,\n                                       shrinkage = .1,\n                                       n.minobsinnode = 20),\n                 metric = \"ROC\")\ngbmFit4\n\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: None \n\nplot.train, resamples, confusionMatrix.train \u3068\u3044\u304f\u3064\u304b\u306e\u4ed6\u306e\u95a2\u6570\u3067\u306f\u3053\u306e\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001predict.train \u3068\u4ed6\u306e\u3082\u306e\u3067\u306f\uff1a\npredict(gbmFit4, newdata = head(testing))\n\n[1] R R R R M M\nLevels: M R\n\npredict(gbmFit4, newdata = head(testing), type = \"prob\")\n           M          R\n1 0.07043641 0.92956359\n2 0.02921858 0.97078142\n3 0.01156062 0.98843938\n4 0.36436834 0.63563166\n5 0.92596513 0.07403487\n6 0.82897570 0.17102430\n\n\u8a33\u6ce8\nhttp://topepo.github.io/caret/training.html \u306e\u548c\u8a33\u3067\u3059\n---\n# Model Training and Parameter Tuning\ncaret \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u306f\u30e2\u30c7\u30eb\u69cb\u7bc9\u3068\u8a55\u4fa1\u306e\u3044\u304f\u3064\u304b\u306e\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\n\ntrain \u95a2\u6570\u306f\u6b21\u306e\u7528\u9014\u306b\u4f7f\u3044\u307e\u3059\n\n* \u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3092\u3057\u3066\u306e\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5bfe\u3059\u308b\u30e2\u30c7\u30eb\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306e\u8a55\u4fa1\n* \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u901a\u3058\u3066\u306e\u300c\u6700\u9069\u300d\u306a\u30e2\u30c7\u30eb\u306e\u9078\u5b9a\n* \u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u5bfe\u3059\u308b\u30e2\u30c7\u30eb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u8a55\u4fa1\n\n\u6700\u521d\u306b\u3001\u7279\u5fb4\u7684\u306a\u30e2\u30c7\u30eb\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u73fe\u5728\u3001caret \u306b\u306f216\u306e\u30e2\u30c7\u30eb\u304c\u3042\u308a\u307e\u3059\uff1b\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f train Model List \u3042\u308b\u3044\u306f train Models By Tag \u3092\u53c2\u7167\u306e\u3053\u3068\u3002\u305d\u3053\u3067\u306f\u3001\u6700\u9069\u5316\u306b\u95a2\u3059\u308b\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30ea\u30b9\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\u30e6\u30fc\u30b6\u5b9a\u7fa9\u30e2\u30c7\u30eb\u3082\u4f5c\u6210\u53ef\u80fd\u3067\u3059\u3002\n\n\u30e2\u30c7\u30eb\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306e\u6700\u521d\u306e\u30b9\u30c6\u30c3\u30d7\u306f\uff08\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e1\u884c\u76ee\uff09\u8a55\u4fa1\u7528\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30bb\u30c3\u30c8\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001\u90e8\u5206\u6700\u5c0f\u4e8c\u4e57\u6cd5(PLS)\u30e2\u30c7\u30eb\u306e\u5834\u5408\u3001PLS \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n1. Define sets of model parameter values to evaluate\n2. **for** *each parameter set* **do**\n3. \u3000**for** *each resampling iteration* **do**\n4. \u3000\u3000Hold-out specific samples\n5. \u3000\u3000[Optional] Pre-process the data\n6. \u3000\u3000Fit the model on the remainder\n7. \u3000\u3000Predict the hold-out samples\n8. \u3000**end**\n9. \u3000Calculate the average performance across hold-out predictions\n10. **end**\n11. Determine the optimal parameter sets\n12. Fit the final model to all the training data using the optimal parameter set\n\n\u30e2\u30c7\u30eb\u3068\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u3092\u5b9a\u7fa9\u3057\u305f\u3089\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001k-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff081\u56de\u3042\u308b\u3044\u306f\u7e70\u308a\u8fd4\u3057\uff09\u3001leave-one-out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3068\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\uff08\u7c21\u5358\u306a\u8a55\u4fa1\u3042\u308b\u3044\u306f632\u306e\u30eb\u30fc\u30eb\uff09\u306b\u3088\u308b\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u6cd5\u304c\u9078\u3079\u307e\u3059\u3002\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u5f8c\u306f\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u3092\u884c\u3044\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u3092\u9078\u3073\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u6700\u9069\u5024\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u81ea\u52d5\u7684\u306b\u9078\u3073\u307e\u3059\u304c\u3001\u9055\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\uff08\u8a73\u7d30\u306f\u5f8c\u8ff0\uff09\u3002\n\n## \u4f8b\nmlbench \u30d1\u30c3\u30b1\u30fc\u30b8\u306e Sonar \u30c7\u30fc\u30bf\u3092\u4f7f\u3044\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\uff1a\n\n```r\nlibrary(mlbench)\ndata(Sonar)\nstr(Sonar[, 1:10])\n\n'data.frame':\t208 obs. of  10 variables:\n $ V1 : num  0.02 0.0453 0.0262 0.01 0.0762 0.0286 0.0317 0.0519 0.0223 0.0164 ...\n $ V2 : num  0.0371 0.0523 0.0582 0.0171 0.0666 0.0453 0.0956 0.0548 0.0375 0.0173 ...\n $ V3 : num  0.0428 0.0843 0.1099 0.0623 0.0481 ...\n $ V4 : num  0.0207 0.0689 0.1083 0.0205 0.0394 ...\n $ V5 : num  0.0954 0.1183 0.0974 0.0205 0.059 ...\n $ V6 : num  0.0986 0.2583 0.228 0.0368 0.0649 ...\n $ V7 : num  0.154 0.216 0.243 0.11 0.121 ...\n $ V8 : num  0.16 0.348 0.377 0.128 0.247 ...\n $ V9 : num  0.3109 0.3337 0.5598 0.0598 0.3564 ...\n $ V10: num  0.211 0.287 0.619 0.126 0.446 ...\n```\ncreateDataPartition \u95a2\u6570\u3067\u30c7\u30fc\u30bf\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u3068\u30c6\u30b9\u30c8\u30bb\u30c3\u30c8\u306b\u5206\u5272\u3057\u307e\u3059\uff08\u8a33\u6ce8\uff1aset.seed(998) \u306f\u4e71\u6570\u306e\u7a2e\u3092\u56fa\u5b9a\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u5b9f\u884c\u4f8b\u306e\u7d50\u679c\u3092\u56fa\u5b9a\u3059\u308b\u305f\u3081\u3002\u4e71\u6570\u306a\u306e\u3067\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b\u7d50\u679c\u304c\u7570\u306a\u308b\u3053\u3068\u3092\u907f\u3051\u308b\u305f\u3081\u3067\u3059\u3002\uff09\uff1a\n\n```r\nlibrary(caret)\nset.seed(998)\ninTraining <- createDataPartition(Sonar$Class, p = .75, list = FALSE)\ntraining <- Sonar[ inTraining,]\ntesting  <- Sonar[-inTraining,]\n```\n\u3053\u306e\u30da\u30fc\u30b8\u3084\u4ed6\u306e\u30da\u30fc\u30b8\u3067\u3053\u306e\u30c7\u30fc\u30bf\u3092\u7528\u3044\u307e\u3059\u3002\n\n# \u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306e\u57fa\u790e\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u4e0a\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e3\u884c\u76ee\u306b\u3066\u3001\u7c21\u5358\u306a\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002\u4ed6\u306e\u65b9\u6cd5\u3082\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3001\u7e70\u308a\u8fd4\u3057K-fold\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001leave-one-out\u7b49\u3002trainControl \u95a2\u6570\u306f\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3057\u307e\u3059\uff1a\n\n```r\nfitControl <- trainControl(## 10-fold CV\n                           method = \"repeatedcv\",\n                           number = 10,\n                           ## repeated ten times\n                           repeats = 10)\n```\ntrainControl \u306b\u95a2\u3059\u308b\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u7bc0\u306b\u3042\u308a\u307e\u3059\u3002\n\n\u6700\u521d\u306e2\u3064\u306e\u5c5e\u6027\u306f train \u95a2\u6570\u306b\u4e88\u6e2c\u3068\u30a2\u30a6\u30c8\u30ab\u30e0\u306e\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3082\u306e\u3067\u3059\u30023\u3064\u76ee\u306e\u5c5e\u6027\u306e method \u306f\u30e2\u30c7\u30eb\uff08train Model List \u3042\u308b\u3044\u306f train Models By Tag \u53c2\u7167\u306e\u3053\u3068\uff09\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3067\u306f\u3001gbm \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u7e70\u308a\u8fd4\u3057\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u7528\u3044\u308b\u30e2\u30c7\u30eb\u306e\u57fa\u672c\u7684\u306a\u66f8\u5f0f\u306f\u4ee5\u4e0b\u3067\u3059\uff1a\n\n\n```r\nset.seed(825)\ngbmFit1 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 ## This last option is actually one\n                 ## for gbm() that passes through\n                 verbose = FALSE)\n\ngbmFit1\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  interaction.depth  n.trees  Accuracy   Kappa      Accuracy SD  Kappa SD \n  1                   50      0.7705490  0.5350650  0.10073946   0.2037707\n  1                  100      0.7944632  0.5835422  0.09419873   0.1914364\n  1                  150      0.8011593  0.5964959  0.09019200   0.1851888\n  2                   50      0.8015147  0.5978660  0.09962239   0.2017663\n  2                  100      0.8088333  0.6119527  0.09563838   0.1946951\n  2                  150      0.8189363  0.6319720  0.08708353   0.1784560\n  3                   50      0.7953015  0.5855569  0.09652109   0.1969998\n  3                  100      0.8143113  0.6232661  0.08878854   0.1824782\n  3                  150      0.8217377  0.6373545  0.09037965   0.1866666\n\nTuning parameter 'shrinkage' was held constant at a value of 0.1\nTuning parameter 'n.minobsinnode' was held constant at a value of 10\nAccuracy was used to select the optimal model using  the largest value.\nThe final values used for the model were n.trees = 150, interaction.depth = 3, shrinkage = 0.1 and n.minobsinnode = 10. \n```\n\u52fe\u914d\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0(GBM)\u30e2\u30c7\u30eb\u3067\u306f\u3001\u4e3b\u306b3\u3064\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u3042\u308a\u307e\u3059\uff08\u8a33\u6ce8\uff1a4\u3064\u3042\u308b\uff09\uff1a\n\n* \u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3001\u3059\u306a\u308f\u3061\u3001\u6728\uff08gbm \u95a2\u6570\u306e n.trees\uff09\n* \u6728\u306e\u8907\u96d1\u3055\u3001 interaction.depth\n* \u5b66\u7fd2\u7387\uff1a\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u53ce\u675f\u306e\u7a0b\u5ea6\u3001shrinkage\n* \u5206\u5272\u3059\u308b\u30ce\u30fc\u30c9\u306b\u304a\u3051\u308b\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u30b5\u30f3\u30d7\u30eb\u306e\u6700\u5c0f\u5024\uff08n.minobsinnode\uff09\n\n\u3053\u306e\u30e2\u30c7\u30eb\u3092\u30c6\u30b9\u30c8\u3059\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u6700\u521d\u306e2\u3064\u306e\u5217\u3067\u3059\uff08shrinkage \u3068 n.minobsinnode \u306f\u793a\u3055\u308c\u3066\u3044\u306a\u3044\u3001\u306a\u305c\u306a\u3089\u3053\u308c\u3089\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306f1\u3064\u306e\u5024\u3092\u7528\u3044\u308b\u3068\u3044\u3046\u30b0\u30ea\u30c3\u30c9\u30bb\u30c3\u30c8\u3068\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\uff09\uff08\u8a33\u6ce8\uff1abeause \u3068\u3044\u3046\u8a9e\u304c\u3042\u3063\u305f\u304c because \u3068\u307f\u306a\u3057\u305f\uff09\u3002 \"Accuracy\"\u5217\u306f\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u901a\u3058\u3066\u306e\u4e00\u81f4\u7387\u3092\u793a\u3057\u307e\u3059\u3002\u6a19\u6e96\u504f\u5dee\u306e\u4e00\u81f4\u306f\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u7d50\u679c\u304b\u3089\u8a08\u7b97\u3057\u307e\u3059\u3002\"Kappa\"\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u306e\u5e73\u5747\u30b3\u30fc\u30a8\u30f3\u039a\u4fc2\u6570\uff08\u975e\u30a6\u30a8\u30a4\u30c8\uff09\u3092\u793a\u3057\u307e\u3059\u3002train \u306f\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\uff08train Model List \u304b train Models By Tag \u53c2\u7167\uff09\u306b\u95a2\u3057\u3066\u50cd\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30e2\u30c7\u30eb\u3067\u306f\u3001train \u306f\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30b0\u30ea\u30c3\u30c9\u3092\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001p \u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6570\u3068\u3059\u308b\u3068\u3001\u30b0\u30ea\u30c3\u30c9\u30b5\u30a4\u30ba\u306f p^3 \u3068\u306a\u308a\u307e\u3059\u3002\u4ed6\u306e\u4f8b\u3067\u306f\u3001RDA\u30e2\u30c7\u30eb\u306f2\u3064\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\uff08\u30ac\u30f3\u30de\u3068\u30e9\u30e0\u30c0\uff09\u3092\u6301\u3061\u3001\u4e21\u65b9\u3068\u3082[0, 1]\u306e\u7bc4\u56f2\u3068\u306a\u308a\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30b0\u30ea\u30c3\u30c9\u306f\u4e8c\u6b21\u5143\u7a7a\u9593\u306b\u304a\u3044\u30669\u3064\u306e\u7d44\u307f\u5408\u308f\u305b\u3068\u306a\u308a\u307e\u3059\u3002\n\ntrain \u306b\u95a2\u3059\u308b\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u306e\u52d5\u4f5c\u306b\u3064\u3044\u3066\u3001\u3053\u3053\u3067\u5c11\u3057\u89e6\u308c\u307e\u3059\u3002train \u306e\u4ed8\u52a0\u7684\u306a\u6a5f\u80fd\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u7bc0\u3067\u89e6\u308c\u307e\u3059\u3002\n\n# \u518d\u73fe\u6027\u306b\u3064\u3044\u3066\n\u591a\u304f\u306e\u30e2\u30c7\u30eb\u3067\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u8a55\u4fa1\u306e\u904e\u7a0b\u3067\u4e71\u6570\u3092\u7528\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u4e71\u6570\u3092\u7528\u3044\u3066\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002\u7d50\u679c\u3092\u518d\u73fe\u3059\u308b\u305f\u3081\u306b\u4e71\u6570\u3092\u7ba1\u7406\u3059\u308b\u65b9\u6cd5\u306f\u4e3b\u306b2\u3064\u3042\u308a\u307e\u3059\u3002\n\n* \u540c\u3058\u30ea\u30b5\u30f3\u30d7\u30eb\u3092\u547c\u3073\u51fa\u3057\u3068\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u306e\u9593\u3067\u7528\u3044\u308b\u306b\u306f2\u3064\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u3042\u308a\u307e\u3059\u30021\u3064\u76ee\u306f\u3001 set.seed \u3092 train \u306e\u524d\u306b\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\u3059\u3002\u4e71\u6570\u3092\u7528\u3044\u308b\u6700\u521d\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u60c5\u5831\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u5225\u306e\u65b9\u6cd5\u306f\u3001\u30c7\u30fc\u30bf\u306e\u5206\u5272\u3092\u6307\u5b9a\u3059\u308b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092 trainControl \u95a2\u6570\u306e\u5c5e\u6027\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u3067\u8b70\u8ad6\u3057\u307e\u3059\u3002\n* \u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5185\u3067\u30e2\u30c7\u30eb\u304c\u69cb\u7bc9\u3055\u308c\u308b\u3068\u304d\u3001seeds \u306f\u6307\u5b9a\u3055\u308c\u307e\u3059\u3002\u4e00\u65b9\u3001train \u3092\u547c\u3073\u51fa\u3059\u524d\u306b seed \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306b\u306f\u540c\u3058\u4e71\u6570\u5024\u3068\u306a\u308a\u307e\u3059\u3002\u4e26\u5217\u5b9f\u884c\u3092\u3057\u3066\u3044\u308b\u5834\u5408\uff08\u3069\u306e\u3088\u3046\u306a\u4e26\u5217\u5316\u3092\u3057\u3066\u3044\u308b\u304b\u306b\u4f9d\u5b58\u3057\u307e\u3059\uff09\u306b\u306f\u3053\u308c\u306f\u6210\u308a\u7acb\u3061\u307e\u305b\u3093\u3002\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u306e seed \u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306b trainControl \u306f seeds \u5c5e\u6027\u3092\u4ed8\u52a0\u7684\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u5c5e\u6027\u306e\u5024\u306f\u6574\u6570\u30d9\u30af\u30c8\u30eb\u306e\u30ea\u30b9\u30c8\u3068\u3057\u3066\u4e0e\u3048\u307e\u3059\u3002trainControl \u306e\u30d8\u30eb\u30d7\u30da\u30fc\u30b8\u306b\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u66f8\u5f0f\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3069\u306e\u3088\u3046\u306a\u4e71\u6570\u5024\u304c\u7528\u3044\u3089\u308c\u308b\u304b\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u4f5c\u8005\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\u3054\u304f\u7a00\u306a\u30b1\u30fc\u30b9\u3067\u306f\u4e71\u6570\u306e seed \u5024\u304c\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u7279\u306bC\u8a00\u8a9e\u3067\u8a08\u7b97\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u3002\n\n# \u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d7\u30ed\u30bb\u30b9\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\uff0f\u8907\u96d1\u5ea6\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6d17\u6fef\u3068\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u69cb\u7bc9\u306e\u30d7\u30ed\u30bb\u30b9\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n## \u524d\u51e6\u7406\u30aa\u30d7\u30b7\u30e7\u30f3\n\u8a00\u53ca\u6e08\u307f\u306e\u3053\u3068\u3067\u3059\u304c\u3001train \u3067\u306f\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u306b\u5148\u7acb\u3063\u3066\u591a\u69d8\u306a\u524d\u51e6\u7406\u304c\u53ef\u80fd\u3067\u3059\u3002preProcess \u95a2\u6570\u306f\u81ea\u52d5\u7684\u306b\u7528\u3044\u3089\u308c\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u3067\u306f\u3001\u30bb\u30f3\u30bf\u30ea\u30f3\u30b0\u3084\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3001\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\uff08\u8a73\u7d30\u306f\u4e0b\u8a18\uff09\u3001\u4e3b\u6210\u5206\u5206\u6790\u3042\u308b\u3044\u306f\u72ec\u7acb\u6210\u5206\u5206\u6790\u306b\u3088\u308a\u3001spatial sign \u5909\u63db\u3092\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u524d\u51e6\u7406\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f\u3001train \u95a2\u6570\u306b preProcess \u5c5e\u6027\u3092\u52a0\u3048\u307e\u3059\u3002preProcess \u95a2\u6570\u3068\u540c\u3058\u5c5e\u6027\u3092\u7528\u3044\u3066\u524d\u51e6\u7406\u624b\u6cd5\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002preProcess \u95a2\u6570\u3078\u306e\u8ffd\u52a0\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f trainControl \u95a2\u6570\u3092\u7d4c\u7531\u3057\u3066\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u3001predict.train, extractPrediction \u3042\u308b\u3044\u306f extractProbes \uff08\u8a73\u7d30\u306f\u4e0b\u8a18\u53c2\u7167\uff09\u3092\u7528\u3044\u3066\u4e00\u822c\u5316\u3067\u304d\u307e\u3059\u3002\u524d\u51e6\u7406\u3067\u306f\u3001object$finalModel \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u76f4\u63a5\u306b\u7528\u3044\u3066\u4e88\u6e2c\u3092\u884c\u3046\u3053\u3068\u306f\u3057\u307e\u305b\u3093\u3002( The pre-processing would not be applied to predictions that directly use the object$finalModel object.)\n\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u306f\u30013\u3064\u306e\u624b\u6cd5\u304c\u3042\u308a\u307e\u3059\uff1a\uff08\u8a33\u6ce8\uff1a\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u306f\u6b20\u640d\u5024\u306e\u63a8\u5b9a\u65b9\u6cd5\uff09\n\n* k\u8fd1\u508d\u6cd5\u306f\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u304a\u3044\u3066\u3001k\u500b\u306e\u8fd1\u63a5\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u898b\u3064\u3051\u3066\u6b20\u640d\u5024\u3092\u57cb\u3081\u307e\u3059\u3002\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u304a\u3051\u308bk\u306e\u5e73\u5747\u306f\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u30c7\u30fc\u30bf\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306e\u8ddd\u96e2\u3092\u8a08\u7b97\u3057\u305f\u3068\u304d\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u6b20\u640d\u5024\u304c\u306a\u3051\u308c\u3070\u6b20\u640d\u5024\u306a\u3057\u3068\u307f\u306a\u3055\u308c\u307e\u3059\u3002\n* \u4ed6\u306e\u624b\u6cd5\u3067\u306f\u3001bagged tree model \u304c\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u3092\u7528\u3044\u305f\u4e88\u6e2c\u3068\u3057\u3066\u7528\u3044\u3089\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u6b63\u78ba\u306a\u30e2\u30c7\u30eb\u3067\u3042\u308a\u3001\u6b20\u640d\u5024\u3092\u6271\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u30a4\u30f3\u30d4\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u306a\u30b5\u30f3\u30d7\u30eb\u3067\u4e88\u6e2c\u3092\u3059\u308b\u3068\u304d\u3001bagged tree \u306b\u3088\u308a\u4e88\u6e2c\u56e0\u5b50\u3092\u7528\u3044\u305f\u4e88\u6e2c\u3092\u3057\u3001\u65b0\u305f\u306a\u5024\u3092\u51fa\u3057\u307e\u3059\u3002\u3053\u306e\u30e2\u30c7\u30eb\u3067\u306f\u8a08\u7b97\u30b3\u30b9\u30c8\u304c\u91cd\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n* \u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306e\u5024\u306e\u4e2d\u592e\u5024\u3092\u6b20\u640d\u5024\u306e\u63a8\u5b9a\u3068\u3057\u3066\u7528\u3044\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\n\n\u3082\u3057\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u6b20\u640d\u5024\u304c\u3042\u308c\u3070\u3001PCA\u3068ICA\u30e2\u30c7\u30eb\u306e\u307f\u304c\u5b8c\u5168\u306a\u30b5\u30f3\u30d7\u30eb\u3092\u6271\u3048\u307e\u3059\u3002\n\n\n## Alternate \u30b0\u30ea\u30c3\u30c9\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\n\u30b0\u30ea\u30c3\u30c9\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u30e6\u30fc\u30b6\u306b\u3088\u308a\u6307\u5b9a\u51fa\u6765\u307e\u3059\u3002tuneGrid \u5c5e\u6027\u306f\u3001\u5404\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5217\u3092\u6301\u3064\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u3092\u6301\u3061\u307e\u3059\u3002\u30ab\u30e9\u30e0\u540d\u306f fitting \u95a2\u6570\u306e\u5c5e\u6027\u3068\u540c\u3058\u3067\u3059\u3002\u524d\u8ff0\u306e RDA\u306e\u4f8b\u3067\u306f\u3001\u30ab\u30e9\u30e0\u540d\u306f gamma \u3068 lambda \u3067\u3057\u305f\u3002train \u95a2\u6570\u306f\u6307\u5b9a\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u30e2\u30c7\u30eb\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3057\u307e\u3059\u3002\n\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3067\u306f\u3001\u5b66\u7fd2\u7387\u3092\u8abf\u6574\u3057 n.trees \u306e3\u3064\u306e\u5024\u3092\u8a55\u4fa1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff1a\n\n```r\ngbmGrid <-  expand.grid(interaction.depth = c(1, 5, 9),\n                        n.trees = (1:30)*50,\n                        shrinkage = 0.1,\n                        n.minobsinnode = 20)\n\nnrow(gbmGrid)\n\nset.seed(825)\ngbmFit2 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 verbose = FALSE,\n                 ## Now specify the exact models \n                 ## to evaluate:\n                 tuneGrid = gbmGrid)\ngbmFit2\n\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  interaction.depth  n.trees  Accuracy  Kappa  Accuracy SD  Kappa SD\n  1                    50     0.76      0.51   0.103        0.21    \n  1                   100     0.78      0.55   0.093        0.19    \n  1                   150     0.79      0.58   0.096        0.19    \n  1                   200     0.80      0.60   0.094        0.19    \n  1                   250     0.80      0.60   0.093        0.19    \n  1                   300     0.81      0.61   0.090        0.18    \n  :                   :        :         :      :            :\n  9                  1250     0.82      0.64   0.083        0.17    \n  9                  1300     0.83      0.64   0.087        0.18    \n  9                  1350     0.83      0.64   0.085        0.17    \n  9                  1400     0.82      0.64   0.084        0.17    \n  9                  1450     0.82      0.64   0.088        0.18    \n  9                  1500     0.83      0.65   0.087        0.18    \n\nTuning parameter 'shrinkage' was held constant at a value of 0.1\nTuning parameter 'n.minobsinnode' was held constant at a value of 20\nAccuracy was used to select the optimal model using  the largest value.\nThe final values used for the model were n.trees = 1150, interaction.depth = 5, shrinkage = 0.1 and n.minobsinnode = 20. \n```\n\n\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u306b\u6b20\u640d\u5024\u304c\u3042\u308b\u3068\u304d\u3001PCA\u3068ICA\u30e2\u30c7\u30eb\u306e\u307f\u304c\u30b5\u30f3\u30d7\u30eb\u3092\u5b8c\u5168\u306b\u4f7f\u3048\u307e\u3059\u3002\n\n\u53ef\u80fd\u306a\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u30e9\u30f3\u30c0\u30e0\u306a\u62bd\u51fa\u3092\u884c\u3046\u4ed6\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u3059\u306a\u308f\u3061\u300c\u30e9\u30f3\u30c0\u30e0\u691c\u7d22\u300d[pdf]\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306b\u8a18\u8ff0\u304c\u3042\u308a\u307e\u3059\u3002(http://topepo.github.io/caret/www.jmlr.org/papers/volume13/bergstra12a/bergstra12a.pdf)\n\u30e9\u30f3\u30c0\u30e0\u691c\u7d22\u3092\u4f7f\u3046\u3068\u304d\u306f\u3001 search = \"random\" \u30aa\u30d7\u30b7\u30e7\u30f3\u3092 trainControl \u5185\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001tuneLength \u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u8a55\u4fa1\u53ef\u80fd\u306a\u7d44\u307f\u5408\u308f\u305b\u306e\u5408\u8a08\u306e\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n## \u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u30d7\u30ed\u30c3\u30c8\nplot \u95a2\u6570\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u8a55\u4fa1\u3068\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u95a2\u4fc2\u306e\u30c6\u30b9\u30c8\u306b\u3082\u4f7f\u3048\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u95a2\u6570\u306e\u5358\u7d14\u306a\u4f8b\u3068\u3057\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u306e\u7d50\u679c\u3092\u793a\u3057\u307e\u3059\uff1a\n\n```r\ntrellis.par.set(caretTheme())\nplot(gbmFit2)\n```\n\uff08\u56f3\u7565\uff09\n\n\u4ed6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u3082 metric \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u793a\u305b\u307e\u3059\uff1a\n\n```r\ntrellis.par.set(caretTheme())\nplot(gbmFit2, metric = \"Kappa\")\n```\n\uff08\u56f3\u7565\uff09\n\n\u4ed6\u306e\u5f62\u5f0f\u306e\u56f3\u3082\u53ef\u80fd\u3067\u3059\u3002\u3088\u308a\u8a73\u7d30\u306f ?plot.train \u306b\u3066\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u30d2\u30fc\u30c8\u30de\u30c3\u30d7\u3092\u793a\u3057\u307e\u3059\uff1a\n\n```r\ntrellis.par.set(caretTheme())\nplot(gbmFit2, metric = \"Kappa\", plotType = \"level\",\n     scales = list(x = list(rot = 90)))\n```\n\uff08\u56f3\u7565\uff09\n\nggplot \u30e1\u30bd\u30c3\u30c9\u3082\u4f7f\u3048\u307e\u3059\uff1a\n\n```r\nggplot(gbmFit2)\n```\n\n\u30ea\u30b5\u30f3\u30d7\u30eb\u8a55\u4fa1\u306e\u8a73\u7d30\u306a\u8868\u73fe\u3092\u3059\u308b plot \u95a2\u6570\u306e\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u3088\u308a\u8a73\u7d30\u306f ?xyplot.train \u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\n\u3053\u308c\u3089\u306e\u30d7\u30ed\u30c3\u30c8\u304b\u3089\u3001\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u9055\u3044\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u6700\u521d\u304b\u3089\u518d\u73fe\u3059\u308b\u3053\u3068\u306a\u3057\u306b\u3001\u6700\u7d42\u7684\u306a\u5024\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u3001 update.train \u306b\u3066\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u306b\u30d5\u30a3\u30c3\u30c8\u3057\u76f4\u3059\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002?update.train \u53c2\u7167\u306e\u3053\u3068\u3002\n\n## trainControl \u95a2\u6570\ntrainControl \u95a2\u6570\u306f\u3001\u30e2\u30c7\u30eb\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u751f\u6210\u3057\u307e\u3059\uff1a\n\n* method: \u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u6cd5\uff1a\"boot\", \"cv\", \"LOOCV\", \"LGOCV\", \"repeatedcv\", \"timeslice\", \"none\", \"oob\"\u3002out-of-bag \u306e\u63a8\u5b9a\u3067\u3042\u308b\u6700\u5f8c\u306e\u5024\u306f\u3001\u30e9\u30f3\u30c0\u30e0\u30d5\u30a9\u30ec\u30b9\u30c8\u3001\u30d0\u30ae\u30f3\u30b0\u6728\u3001bagged earth\u3001 bagged flexible \u5224\u5225\u5206\u6790\u3001conditional tree forest \u30e2\u30c7\u30eb\u3067\u306e\u307f\u7528\u3044\u3089\u308c\u308b\u3002GBM \u30e2\u30c7\u30eb\u306f\u542b\u307e\u308c\u306a\u3044\uff08gbm \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4f5c\u8005\u306f\u3001\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u306b\u3064\u3044\u3066OOB \u30a8\u30e9\u30fc\u306e\u63a8\u5b9a\u306b\u3088\u308b\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u9078\u629e\u304c\u9069\u5207\u3067\u306a\u3044\u3068\u8a00\u53ca\u3057\u3066\u3044\u308b\uff09\u3002\u307e\u305f\u3001leave-one-out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff08\u8a33\u6ce8 LOOCV\uff09\u306b\u3064\u3044\u3066\u306f\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u306b\u3064\u3044\u3066\u4e0d\u78ba\u5b9f\u6027\u304c\u3042\u308a\u307e\u305b\u3093\u3002(Also, for leave-one-out cross-validation, no uncertainty estimates are given for the resampled performance measures.)\n* number and repeats: number \u306f K-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u56de\u6570\u3042\u308b\u3044\u306f\u3001\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u307e\u305f\u306f leave-group-out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff08\u8a33\u6ce8 LGOCV\uff09\u306e\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u6570\u3092\u793a\u3057\u307e\u3059\u3002repeats \u306f repeated K-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u307f\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002method = \"repeatedcv\", number = 10, repeats = 3 \u3067\u3042\u308c\u3070\u300110-fold \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30923\u56de\u884c\u3044\u307e\u3059\u3002\n* verboseIter: \u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u306e\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\uff08\u8a33\u6ce8\uff1aTRUE or FALSE\uff09\u3002\n* returnData: trainingData \u306b\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\u3002\n* p: leave-group out \u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u5411\u3051\uff1a\n* For leave-group out cross-validation: \u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u7387\n* method = \"timeslice\" \u306e\u3068\u304d trainControl \u306f initialWindow\u3001horizon\u3001 \u3068 fixedWindow \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6301\u3061\u3001\u7cfb\u5217\u30c7\u30fc\u30bf\u306b\u30af\u30ed\u30b9\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u3069\u3046\u9069\u7528\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\n* classProbs: \u30ea\u30b5\u30f3\u30d7\u30eb\u306b\u3088\u308a\u3001\u30af\u30e9\u30b9\u78ba\u7387\u3092\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\u3002\n* index \u3068 indexOut: \u5404\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u306e\u8981\u7d20\u306e\u30ea\u30b9\u30c8\u3002\u5404\u30ea\u30b9\u30c8\u8981\u7d20\u306f\u3000\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3057\u3066\u30b5\u30f3\u30d7\u30eb\u306e\u884c\u3068\u306a\u308a\u307e\u3059\u3002(Each list element is the sample rows used for training at that iteration or should be held-out.) \u5024\u306e\u6307\u5b9a\u304c\u306a\u3051\u308c\u3070\u3001train \u304c\u751f\u6210\u3057\u307e\u3059\u3002\n* summaryFunction: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u8981\u7d04\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n* selectionFunction: \u4ed8\u52a0\u7684\u306a\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9078\u629e\u3059\u308b\u95a2\u6570\u3067\u3059\u3002 and examples.\n* PCAthresh, ICAcomp \u3068 k: \uff08\u3082\u3057\u4f7f\u308f\u308c\u305f\u5834\u5408\uff09preProcess \u95a2\u6570\u306b\u3059\u3079\u3066\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6e21\u3055\u308c\u307e\u3059\u3002\n* returnResamp: \"all\", \"final\", \"none\" \u3068\u3044\u3046\u5024\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u6e2c\u3092\u3069\u306e\u3088\u3046\u306b\u4fdd\u5b58\u3059\u308b\u304b\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n* allowParallel: train \u304c\uff08\u53ef\u80fd\u306a\u3089\u3070\uff09\u4e26\u5217\u5b9f\u884c\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u8ad6\u7406\u5024\u3067\u3059\u3002\n\u3053\u3053\u3067\u8b70\u8ad6\u3055\u308c\u3066\u306a\u3044\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u307e\u3060\u3042\u308a\u307e\u3059\u3002\n\n## \u4ed6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u5024\n\u6700\u9069\u306a\u8a2d\u5b9a\u3092\u6c7a\u3081\u308b\u305f\u3081\u306e\u8a08\u91cf\u5024\u3092\u30e6\u30fc\u30b6\u304c\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001RMSE \u3068 R^2 \u304c\u56de\u5e30\u306b\u7528\u3044\u3089\u308c\u3001\u6b63\u78ba\u5ea6\u3068\u039a\uff08\u30ab\u30c3\u30d1\uff09\u304c\u5224\u5225\u306b\u7528\u3044\u3089\u308c\u307e\u3059\u3002\u307e\u305f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001RMSE \u3068\u6b63\u78ba\u5ea6\u3092\u305d\u308c\u305e\u308c\u56de\u5e30\u3068\u5224\u5225\u306b\u7528\u3044\u307e\u3059\u3002train \u95a2\u6570\u306e\u8a08\u91cf\u306e\u5c5e\u6027\u306b\u3088\u308a\u3001\u30e6\u30fc\u30b6\u304c\u6700\u9069\u306a\u7d50\u679c\u3092\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u30011\u3064\u306e\u30af\u30e9\u30b9\u306e\u30b5\u30f3\u30d7\u30eb\u304c\u5c11\u306a\u3044\u6642\u306b\u3001metric = \"Kaapa\" \u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3088\u308a\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u306e\u8cea\u3092\u6539\u5584\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u3082\u3057\u3053\u308c\u3089\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u6e80\u8db3\u3067\u304d\u306a\u3051\u308c\u3070\u3001\u30e6\u30fc\u30b6\u72ec\u81ea\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002trainControl \u95a2\u6570\u306b\u306f\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\u3067\u3042\u308b summaryFunction \u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u306b\u306f\u4ee5\u4e0b\u306e\u5c5e\u6027\u304c\u3042\u308a\u307e\u3059\uff1a\n\n*data \u306f \u89b3\u6e2c\u5024\u3068\u4e88\u6e2c\u5024\uff08\u56de\u5e30\u3067\u306f\u6570\u5024\u3001\u5224\u5225\u3067\u306f\u6587\u5b57\u5024\uff09\u3092\u793a\u3059 obs \u3068 pred \u3068\u3044\u3046\u540d\u306e\u5217\u3092\u6301\u3064\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u3042\u308b\u3044\u306f\u30de\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u53c2\u7167\u3057\u307e\u3059\u3002\u73fe\u5728\u306f\u3001\u30af\u30e9\u30b9\u78ba\u7387\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e1\u3064\u306e\u7d44\u307f\u5408\u308f\u305b\u306b\u3064\u3044\u3066\u306eheld-out \u4e88\u6e2c\uff08\u305d\u3057\u3066\u95a2\u9023\u3057\u3066\u53c2\u7167\u3059\u308b\u5024\uff09\u306e\u30c7\u30fc\u30bf\u306e\u5024\u3067\u3059\u3002tarainControl \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e classProbs \u5c5e\u6027\u304c TRUE \u306e\u5834\u5408\u306f\u3001\u30af\u30e9\u30b9\u78ba\u7387\u306e\u5217\u304c\u52a0\u308f\u308a\u307e\u3059\u3002\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u3068\u540c\u3058\u540d\u524d\u306e\u5217\u540d\u3068\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u3001train \u3067 wetihts \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070 weights \u3068\u3044\u3046\u5217\u3082\u52a0\u308f\u308a\u307e\u3059\u3002\n* lev \u306f\u6587\u5b57\u5024\u3067\u3042\u308a\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u304b\u3089\u5f97\u3089\u308c\u308b\u30a2\u30a6\u30c8\u30ab\u30e0\u306e factor \u30ec\u30d9\u30eb\u3067\u3059\u3002\u56de\u5e30\u3067\u306f NULL \u3068\u306a\u308a\u307e\u3059\u3002\n* model \u306f\u6587\u5b57\u5024\uff08\u3059\u306a\u308f\u3061\u3001 train \u306e method \u5c5e\u6027\u306e\u5024\uff09\u3067\u3059\u3002\n\n\u95a2\u6570\u306e\u51fa\u529b\u306f\u6570\u5024\u306e\u8981\u7d04\u8a08\u91cf\u306e vector \u3067\u3042\u308a\u3001\u30cc\u30eb\u51fa\u306a\u3044\u540d\u524d\u304c\u3042\u308a\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f train \u4e88\u6e2c\u3055\u308c\u305f\u30af\u30e9\u30b9\u306e\u5224\u5225\u30e2\u30c7\u30eb\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u30af\u30e9\u30b9\u78ba\u7387\u3092\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a55\u4fa1\u306b\u7528\u3044\u307e\u3059\u3002\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30d7\u30ed\u30bb\u30b9\u306b\u3066\u30af\u30e9\u30b9\u78ba\u7387\u306e\u4e88\u6e2c\u3092\u5f97\u308b\u306b\u306f\u3001trainContorl \u306e classProbs \u5c5e\u6027\u3092 TRUE \u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u5404\u30ea\u30b5\u30f3\u30d7\u30eb\uff08\u30af\u30e9\u30b9\u3054\u3068\u306b\u5217\u304c\u3042\u308a\u3001\u5217\u540d\u306f\u30af\u30e9\u30b9\u540d\u3067\u3059\uff09\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u78ba\u7387\u3092\u30de\u30fc\u30b8\u3057\u305f\u5217\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u6700\u5f8c\u306e\u7bc0\u3067\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30eb\u3092\u901a\u3057\u3066\u306e\u5e73\u5747\u3067\u3042\u308b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30b9\u30b3\u30a2\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u5225\u306e\u7d44\u307f\u8fbc\u307f\u6e08\u307f\u95a2\u6570\u3067\u3042\u308b\u3001twoClassSummary \u306f\u611f\u5ea6\u3068\u7279\u7570\u5ea6\u3068ROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u3092\u8a08\u7b97\u3057\u307e\u3059\uff1a\n\n```r\nhead(twoClassSummary)\n                                                                           \n1 function (data, lev = NULL, model = NULL)                                \n2 {                                                                        \n3     if (length(levels(data$obs)) > 2)                                    \n4         stop(paste(\"Your outcome has\", length(levels(data$obs)),         \n5             \"levels. The twoClassSummary() function isn't appropriate.\"))\n6     requireNamespaceQuietStop(\"pROC\")                                    \n```\n\n\u3053\u306e\u57fa\u6e96\u3092\u4f7f\u3063\u3066\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u3092\u518d\u69cb\u7bc9\u3059\u308b\u3068\u304d\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u7528\u3044\u3066\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068ROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u306e\u95a2\u4fc2\u3092\u898b\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\uff1a\n\n```r\nfitControl <- trainControl(method = \"repeatedcv\",\n                           number = 10,\n                           repeats = 10,\n                           ## Estimate class probabilities\n                           classProbs = TRUE,\n                           ## Evaluate performance using \n                           ## the following function\n                           summaryFunction = twoClassSummary)\n\nset.seed(825)\ngbmFit3 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 verbose = FALSE,\n                 tuneGrid = gbmGrid,\n                 ## Specify which metric to optimize\n                 metric = \"ROC\")\ngbmFit3\n\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  interaction.depth  n.trees  ROC   Sens  Spec  ROC SD  Sens SD  Spec SD\n  1                    50     0.86  0.80  0.70  0.096   0.15     0.16   \n  1                   100     0.88  0.82  0.73  0.087   0.14     0.15   \n  1                   150     0.88  0.83  0.75  0.092   0.13     0.16   \n  1                   200     0.88  0.84  0.76  0.093   0.13     0.16   \n  1                   250     0.88  0.83  0.77  0.086   0.13     0.16   \n  1                   300     0.88  0.84  0.77  0.082   0.13     0.16   \n  :                   :        :     :      :     :       :        :\n  9                  1250     0.89  0.88  0.76  0.073   0.11     0.15   \n  9                  1300     0.89  0.87  0.77  0.072   0.11     0.15   \n  9                  1350     0.89  0.87  0.77  0.071   0.11     0.15   \n  9                  1400     0.89  0.87  0.77  0.071   0.11     0.15   \n  9                  1450     0.89  0.87  0.76  0.070   0.12     0.15   \n  9                  1500     0.89  0.88  0.77  0.071   0.11     0.15   \n\nTuning parameter 'shrinkage' was held constant at a value of 0.1\nTuning parameter 'n.minobsinnode' was held constant at a value of 20\nROC was used to select the optimal model using  the largest value.\nThe final values used for the model were n.trees = 1150, interaction.depth = 5, shrinkage = 0.1 and n.minobsinnode = 20. \n```\n\n\u3053\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u4ed8\u52a0\u7684\u306a\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3088\u308bROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u306e\u5e73\u5747\u306f\u3001100\u30ea\u30b5\u30f3\u30d7\u30eb\u306b\u3064\u3044\u30660.896\u3067\u3057\u305f\u3002\nIn this case, the average area under the ROC curve associated with the optimal tuning parameters was 0.896 across the 100 resamples.\n\n## \u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u306e\u9078\u629e\n\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d7\u30ed\u30bb\u30b9\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u5225\u306e\u624b\u6cd5\u306f\u3001\u4e0e\u3048\u3089\u308c\u305f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6570\u306b\u3088\u308a\u3001\u300c\u6700\u9069\u300d\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u3092\u9078\u629e\u3059\u308b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u4fee\u6b63\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001train \u95a2\u6570\u306f\u6700\u5927\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6570\uff08\u56de\u5e30\u30e2\u30c7\u30eb\u3067\u306f\u5e73\u5747\u4e8c\u4e57\u8aa4\u5dee\u304c\u6700\u5c0f\uff09\u3068\u306a\u308b\u3088\u3046\u306b\u30e2\u30c7\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u30e2\u30c7\u30eb\u9078\u629e\u306e\u4ed6\u306e\u65b9\u6cd5\u3092\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002Breiman \u3089\uff081984\uff09\u306f\u5358\u4e00\u6728\u30e2\u30c7\u30eb\u306b\u3064\u3044\u3066\u306e\u300cone standard error rule\u300d\u3092\u63d0\u6848\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u6700\u9069\u306a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5024\u306e\u30e2\u30c7\u30eb\u304c\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u306b\u3088\u308a\u540c\u5b9a\u3055\u308c\u304b\u3064\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u6a19\u6e96\u8aa4\u5dee\u3092\u63a8\u5b9a\u51fa\u6765\u307e\u3059\u3002\uff08\u660e\u793a\u7684\u306b\uff09\u6700\u9ad8\u306e\u30e2\u30c7\u30eb\u306e\u6a19\u6e96\u8aa4\u5dee\u3092\u6301\u3064\u5358\u7d14\u306a\u30e2\u30c7\u30eb\u304c\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u5358\u7d14\u306a\u6728\u304c\u610f\u5473\u3092\u306a\u3059\u306e\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u30e2\u30c7\u30eb\u304c\u30aa\u30fc\u30d0\u30fc\u30d5\u30a3\u30c3\u30c8\u304b\u3089\u59cb\u307e\u308a\u3001\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u306b\u3088\u308a\u7279\u7570\u7684\u306b\u306a\u308b\u304b\u3089\u3067\u3059\u3002\n\ntrain \u3067\u306f\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u9078\u629e\u306b\u3064\u3044\u3066\u306e\u5225\u306e\u30eb\u30fc\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002selectionFunction \u5c5e\u6027\u306b\u3088\u308a\u3001\u6700\u7d42\u7684\u306a\u30e2\u30c7\u30eb\u6c7a\u5b9a\u3092\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u7684\u306b\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u306f3\u3064\u306e\u95a2\u6570\u304c\u3042\u308a\uff1abest \u306f\u6700\u5927\uff0f\u6700\u5c0f\u5024\u3092\u9078\u629e\u3057\u3001oneSE \u306f Breiman \u3089\uff081984\uff09\u306e\u624b\u6cd5\u3092\u8e0f\u8972\u3057\u3066\u6700\u9069\u5024\u306e\u8a31\u5bb9\u8aa4\u5dee\u306e\u30d1\u30fc\u30bb\u30f3\u30c8\u306b\u3064\u3044\u3066\u306e\u8907\u96d1\u3055\u304c\u4e00\u756a\u306a\u3044\u30e2\u30c7\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u3088\u308a\u8a73\u7d30\u306f ?best \u3092\u53c2\u7167\u306e\u3053\u3068\u3002 \n\n\u30e6\u30fc\u30b6\u5b9a\u7fa9\u95a2\u6570\u3082\u53ef\u80fd\u3067\u3042\u308a\u3001\u5c5e\u6027\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff1a\n\n* x \u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u95a2\u9023\u3059\u308b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u5024\u3092\u542b\u3080\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u3067\u3059\u3002\u5404\u884c\u304c\u7570\u306a\u308b\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u5024\u3068\u306a\u308a\u307e\u3059\u3002\n* metric \uff08train \u306e\u8a08\u91cf\u5c5e\u6027\u304b\u3089\u76f4\u63a5\u547c\u3073\u3060\u3055\u308c\u305f\uff09\u6700\u9069\u5316\u3055\u308c\u305f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u3092\u793a\u3059\u6587\u5b57\u5217\u3002\n* maximize \u306f\uff08train \u304b\u3089\u76f4\u63a5\u547c\u3073\u51fa\u3055\u308c\u305f\uff09\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a08\u91cf\u306e\u6700\u5927\u5024\u3067\u3088\u308a\u3088\u3044\u5024\u3092\u793a\u3059\u304b\u3069\u3046\u304b\u306e\u8ad6\u7406\u5024\u3067\u3059\u3002\n\n\u3053\u306e\u95a2\u6570\u306f x \u3067\u9078\u629e\u3055\u308c\u305f\u884c\u304c\u793a\u30591\u3064\u306e\u6574\u6570\u5024\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\u4f8b\u3068\u3057\u3066\u3001\u6b63\u78ba\u5ea6\u306b\u57fa\u3044\u3066\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3092\u9078\u629e\u3057\u305f\u4ee5\u524d\u306e\u3082\u306e\u3067\u306f\uff1a n.trees = 1150, iteraction.depth = 5, shrinkage = 0.1, n.minobsinnode = 20 \u3067\u3057\u305f\u3002\u3057\u304b\u3057\u3001\u3053\u306e\u30d7\u30ed\u30c3\u30c8\u306e\u30b9\u30b1\u30fc\u30eb\u306f\u72ed\u304f\u3001\u6b63\u78ba\u5ea6\u306f0.86\u304b\u30890.896\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3088\u308a\u8907\u96d1\u5ea6\u306e\u4f4e\u3044\u30e2\u30c7\u30eb\uff08\u4f8b\u3048\u3070\u3001\u3088\u308a\u5c11\u306a\u3044\u304b\u6d45\u3044\u6728\uff09\u3067\u3082\u8a31\u5bb9\u3067\u304d\u308b\u6b63\u78ba\u5ea6\u304c\u51fa\u308b\u3067\u3057\u3087\u3046\u3002\n\ntolence \u95a2\u6570\u306f\u3001(x - x_best) / x_best * 100 \u306b\u57fa\u3065\u304f\u3088\u308a\u8907\u96d1\u5ea6\u306e\u5c11\u306a\u3044\u30e2\u30c7\u30eb\u3092\u898b\u3064\u3051\u307e\u3059\u3002\u3053\u308c\u306f\u30d1\u30fc\u30bb\u30f3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u30012% \u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30ed\u30b9\u306b\u57fa\u3065\u304f\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u9078\u629e\u3067\u306f\uff1a\n\n```r\nwhichTwoPct <- tolerance(gbmFit3$results, metric = \"ROC\",\n                         tol = 2, maximize = TRUE)\ncat(\"best model within 2 pct of best:\\n\")\nbest model within 2 pct of best:\ngbmFit3$results[whichTwoPct,1:6]\n   shrinkage interaction.depth n.minobsinnode n.trees       ROC      Sens\n31       0.1                 5             20      50 0.8825918 0.8318056\n```\n\n0.883\u306eROC\u66f2\u7dda\u306e\u4e0b\u90e8\u9762\u7a4d\u3067\u3042\u308b\u3088\u308a\u8907\u96d1\u5ea6\u306e\u5c11\u306a\u3044\u30e2\u30c7\u30eb\u3092\u793a\u3057\u3066\u3044\u307e\u3059\uff08\u300c\u6700\u9069\u9078\u629e\u300d\u3067\u306e0.896\u3068\u6bd4\u3079\u3066\u307f\u307e\u3057\u3087\u3046\uff09\u3002\n\n\u3053\u308c\u3089\u306e\u95a2\u6570\u306e\u30e1\u30a4\u30f3\u306e\u8a71\u984c\u306f\u3001\u5358\u7d14\u304b\u3089\u8907\u96d1\u307e\u3067\u306e\u30e2\u30c7\u30eb\u306e\u4e26\u3073\u306b\u95a2\u3059\u308b\u3082\u306e\u3067\u3059\u3002\u3044\u304f\u3064\u304b\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u3053\u308c\u306f\u5bb9\u6613\uff08\u4f8b \u5358\u7d14\u306a\u6728\u3001\u90e8\u5206\u6700\u5c0f\u4e8c\u4e57\uff09\u3067\u3059\u304c\u3001\u3053\u306e\u30e2\u30c7\u30eb\u306e\u5834\u5408\u306f\u3001\u4e00\u3064\u306e\u8ab2\u984c\u3068\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u300150\u306e\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u6df1\u30558\u3088\u308a\u3082\u8907\u96d1\u306a100\u306e\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u6df1\u30552\u306e\u6728\u3092\u7528\u3044\u305f\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u304c\u5b58\u5728\u3059\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\u3053\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u306f\u4e26\u3079\u66ff\u3092\u9078\u629e\u3067\u304d\u307e\u3059\u3002\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u6728\u306e\u6df1\u3055\u306e\u5897\u52a0\u3088\u308a\u3082\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u304c\u5897\u3048\u305f\u65b9\u304c\u8907\u96d1\u5ea6\u304c\u5897\u3059\u3068\u307f\u306a\u3057\u3066\u304a\u308a\u3001\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3067\u4e26\u3079\u3066\u304b\u3089\u6df1\u3055\u3067\u4e26\u3079\u3066\u3044\u307e\u3059\u3002\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u3067\u306e\u3088\u308a\u8a73\u7d30\u306f ?best \u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\n# \u4e88\u6e2c\u306e\u62bd\u51fa\u3068\u30af\u30e9\u30b9\u78ba\u7387\n\u8a00\u53ca\u6e08\u307f\u306e\u901a\u308a\u3001train \u95a2\u6570\u304b\u3089\u51fa\u529b\u3055\u308c\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u30b5\u30d6\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e finalModel \u306b\u300c\u6700\u9069\u5316\u3055\u308c\u305f\u300d\u30e2\u30c7\u30eb\u3092\u542b\u307f\u307e\u3059\u3002\u4e88\u6e2c\u306f\u901a\u5e38\u3053\u308c\u3089\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3088\u308a\u306a\u3055\u308c\u307e\u3059\u3002pls \u3042\u308b\u3044\u306f gbm \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u3088\u3046\u306a\u3044\u304f\u3064\u304b\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u8ffd\u52a0\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u6700\u9069\u5316\u306b\u5fc5\u8981\u3067\u3059\u3002\u3053\u306e\u5834\u5408\u3001\u65b0\u3057\u3044\u30b5\u30f3\u30d7\u30eb\u3067\u4e88\u6e2c\u3059\u308b\u305f\u3081\u306b\u3001 train \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6700\u9069\u5024\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001predict.gbm \u3092\u7528\u3044\u3066\u4e88\u6e2c\u3059\u308b\u5834\u5408\u3001\u30e6\u30fc\u30b6\u306f\u6728\u306e\u6570\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3042\u308a\u307e\u305b\u3093\uff09\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u4e8c\u5024\u5224\u5225\u3067\u306f\u3001\u3053\u306e\u95a2\u6570\u306e\u4e88\u6e2c\u3067\u306f\u30af\u30e9\u30b9\u306e1\u3064\u306e\u78ba\u7387\u3092\u5f97\u3066\u3001\u5224\u5225\u306e factor \u30d9\u30af\u30c8\u30eb\u306b\u7f6e\u63db\u3059\u308b\u305f\u3081\u306b\u5225\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002predict.train \u306f\u81ea\u52d5\u7684\u306b\u3053\u308c\u3089\u3092\u884c\u3044\u307e\u3059\uff08\u305d\u3057\u3066\u5225\u306e\u30e2\u30c7\u30eb\u3067\u3082\uff09\u3002\n\n\u307e\u305f\u3001R\u3067\u306e\u4e88\u6e2c\u30e2\u30c7\u30eb\u306b\u306f\u3068\u3066\u3082\u5c11\u306a\u3044\u6a19\u6e96\u7684\u306a\u6587\u6cd5\u3057\u304b\u3042\u308a\u307e\u305b\u3093\u3002\u4f8b\u3048\u3070\u3001\u30af\u30e9\u30b9\u78ba\u7387\u3092\u5f97\u308b\u305f\u3081\u306b\u306f\u3001\u591a\u304f\u306e predict \u30e1\u30bd\u30c3\u30c9\u3067\u306f\u30af\u30e9\u30b9\u5224\u5225\u3042\u308b\u3044\u306f\u78ba\u7387\u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3067\u3059\u3002\u7570\u306a\u308b\u30d1\u30c3\u30b1\u30b8\u3067\u306f\u3001\"prob\", \"posterior\", \"response\", \"probability\", \"raw\"\u306e\u3088\u3046\u306a\u7570\u306a\u308b\u5024\u3092\u7528\u3044\u307e\u3059\u3002\u5225\u306e\u5834\u5408\u306f\u5b8c\u5168\u306b\u7570\u306a\u308b\u6587\u6cd5\u3068\u306a\u308a\u307e\u3059\u3002\n\npredict.train \u3067\u306f\u3001\"class\"\u3068\"prob\"\u306b\u5171\u901a\u5316\u3055\u308c\u3066\u3044\u307e\u3059\uff08\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u306f\u5404\u30e2\u30c7\u30eb\u304c\u9069\u5207\u306a\u9078\u629e\u3092\u3057\u3066\u3044\u307e\u3059\uff09\u3002\u4f8b\u3048\u3070\uff1a\n\n```r\npredict(gbmFit3, newdata = head(testing))\n\n[1] R R R R M M\nLevels: M R\n\npredict(gbmFit3, newdata = head(testing), type = \"prob\")\n\n             M            R\n1 1.982479e-05 9.999802e-01\n2 8.774626e-07 9.999991e-01\n3 1.789676e-11 1.000000e+00\n4 6.024225e-04 9.993976e-01\n5 9.999999e-01 1.179912e-07\n6 9.995127e-01 4.872602e-04\n```\n\n# \u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5206\u5e03\u306e\u63a2\u7d22\u3068\u6bd4\u8f03\n## Within-Model\n\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u306b\u3064\u3044\u3066\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u9593\u306e\u95a2\u4fc2\u306e\u63a2\u7d22\u306b\u306f lattice \u95a2\u6570\u304c\u4f7f\u308f\u308c\u307e\u3059\uff1a\n\n* xyplot \u3068 stripplot \u306f\uff08\u6570\u5024\uff09\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d71\u8a08\u91cf\u3092\u30d7\u30ed\u30c3\u30c8\u3057\u307e\u3059\u3002\n* histogram \u3068 densityplot \u306f\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5206\u5e03\u3092\u898b\u308b\u305f\u3081\u306b\u4f7f\u3044\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001\u4ee5\u4e0b\u306e\u6587\u3067\u306f\u5bc6\u5ea6\u30d7\u30ed\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\uff1a\uff08\u8a33\u6ce8\uff1a\u539f\u6587\u306b\u4f5c\u56f3\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u306a\u3044\u3067\u3059\uff09\n\n\uff08\u56f3\u7565\uff09\n\n\u3082\u3057\u3001\u8907\u6570\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u306e\u30d7\u30ed\u30c3\u30c8\u3092\u3057\u305f\u3044\u306e\u306a\u3089\u3070\u3001resamples = \"all\" \u30aa\u30d7\u30b7\u30e7\u30f3\u3092 control \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n## \u30e2\u30c7\u30eb\u9593 Between-Models\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5206\u5e03\u306b\u3088\u308b\uff08train\u3001sbf \u3042\u308b\u3044\u306f rfe \u306b\u3088\u308a\u751f\u6210\u3055\u308c\u308b\uff09\u30e2\u30c7\u30eb\u9593\u306e\u9055\u3044\u3092\u7279\u5fb4\u3065\u3051\u308b\u95a2\u6570\u3082 caret \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u306f\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u95a2\u6570\u306f Hothorn \u3089\uff082005\uff09\u3068 Eugster \u3089\uff082008\uff09\u306e\u7814\u7a76\u306b\u57fa\u3065\u304f\u3082\u306e\u3067\u3059\u3002\n\n\u307e\u305a\u6700\u521d\u306b\u3001\u30b5\u30dd\u30fc\u30c8\u30d9\u30af\u30bf\u30fc\u30de\u30b7\u30f3\u30e2\u30c7\u30eb\u3092 Sonar \u30c7\u30fc\u30bf\u306b\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u3055\u305b\u307e\u3059\u3002preProc \u5c5e\u6027\u3092\u7528\u3044\u3066\u30c7\u30fc\u30bf\u306e\u6b63\u898f\u5316\u3092\u884c\u3044\u307e\u3059\u3002\u30d6\u30fc\u30b9\u30c6\u30a3\u30f3\u30b0\u6728\u30e2\u30c7\u30eb\u3092\u4f7f\u3046\u305f\u3081\u306e\u4e71\u6570\u306e\u30b7\u30fc\u30c9\u5024\u3092\u540c\u3058\u306b\u306a\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30bb\u30c3\u30c8\u304c\u540c\u3058\u306b\u306a\u308a\u3001\u30e2\u30c7\u30eb\u9593\u3067\u306e\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306e\u6bd4\u8f03\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3059\u3002\n\n```r\nset.seed(825)\nsvmFit <- train(Class ~ ., data = training,\n                 method = \"svmRadial\",\n                 trControl = fitControl,\n                 preProc = c(\"center\", \"scale\"),\n                 tuneLength = 8,\n                 metric = \"ROC\")\nsvmFit\n\nSupport Vector Machines with Radial Basis Function Kernel \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nPre-processing: centered (60), scaled (60) \nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  C      ROC        Sens       Spec       ROC SD      Sens SD    Spec SD  \n   0.25  0.8672371  0.7448611  0.7485714  0.08273960  0.1364068  0.1711608\n   0.50  0.9030134  0.8334722  0.7766071  0.06511576  0.1457414  0.1441030\n   1.00  0.9221577  0.8709722  0.7785714  0.06134606  0.1172593  0.1523708\n   2.00  0.9318601  0.8890278  0.7692857  0.05793951  0.1141643  0.1521948\n   4.00  0.9373735  0.8837500  0.8096429  0.05623538  0.1083167  0.1518036\n   8.00  0.9442411  0.9026389  0.8151786  0.05584599  0.1038692  0.1567138\n  16.00  0.9445164  0.9090278  0.8155357  0.05676892  0.0992626  0.1525199\n  32.00  0.9445164  0.9111111  0.8142857  0.05676892  0.1004068  0.1556129\n\nTuning parameter 'sigma' was held constant at a value of 0.0115025\nROC was used to select the optimal model using  the largest value.\nThe final values used for the model were sigma = 0.0115025 and C = 16. \n```\n\u307e\u305f\u3001\u6b63\u898f\u5224\u5225\u5206\u6790\u306b\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u3055\u305b\u307e\u3059\u3002\n\n```r\nset.seed(825)\nrdaFit <- train(Class ~ ., data = training,\n                 method = \"rda\",\n                 trControl = fitControl,\n                 tuneLength = 4,\n                 metric = \"ROC\")\nrdaFit\n\nRegularized Discriminant Analysis \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: Cross-Validated (10 fold, repeated 10 times) \nSummary of sample sizes: 142, 142, 140, 142, 142, 141, ... \nResampling results across tuning parameters:\n\n  gamma      lambda     ROC        Sens       Spec       ROC SD      Sens SD    Spec SD  \n  0.0000000  0.0000000  0.8492894  0.8215278  0.7705357  0.11348240  0.1539451  0.1748415\n  0.0000000  0.3333333  0.8472148  0.8215278  0.7683929  0.11283235  0.1570403  0.1673312\n  0.0000000  0.6666667  0.8385355  0.8190278  0.7512500  0.12045473  0.1605142  0.1754646\n  0.0000000  1.0000000  0.8536744  0.8398611  0.7741071  0.11492188  0.1408179  0.1611321\n  0.3333333  0.0000000  0.9073760  0.9008333  0.7642857  0.07117484  0.1166216  0.1476688\n  0.3333333  0.3333333  0.9054142  0.8984722  0.7628571  0.07421057  0.1205595  0.1464660\n  0.3333333  0.6666667  0.9060813  0.8925000  0.7644643  0.07283076  0.1201860  0.1429630\n  0.3333333  1.0000000  0.9037004  0.9041667  0.7646429  0.08614906  0.1124100  0.1491529\n  0.6666667  0.0000000  0.8836210  0.8805556  0.7242857  0.08504414  0.1086103  0.1574304\n  0.6666667  0.3333333  0.8872024  0.8775000  0.7296429  0.08830682  0.1047636  0.1578737\n  0.6666667  0.6666667  0.8844048  0.8693056  0.7258929  0.08999459  0.1174386  0.1571448\n  0.6666667  1.0000000  0.8850025  0.8738889  0.7357143  0.08958058  0.1104724  0.1591939\n  1.0000000  0.0000000  0.7258631  0.6601389  0.6464286  0.13223843  0.1750093  0.2033336\n  1.0000000  0.3333333  0.7284226  0.6604167  0.6462500  0.12614738  0.1729815  0.2031386\n  1.0000000  0.6666667  0.7274950  0.6613889  0.6430357  0.12820321  0.1721392  0.2097047\n  1.0000000  1.0000000  0.7233309  0.6593056  0.6491071  0.13280992  0.1723843  0.1996953\n\nROC was used to select the optimal model using  the largest value.\nThe final values used for the model were gamma = 0.3333333 and lambda = 0. \n```\n\n\u3053\u308c\u3089\u306e\u30e2\u30c7\u30eb\u3092\u4e0e\u3048\u3089\u308c\u305f\u3068\u304d\u3001\u30e2\u30c7\u30eb\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u9055\u3044\u306e\u7d71\u8a08\u91cf\u3092\u5f97\u3089\u308c\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\u305d\u306e\u305f\u3081\u306b\u306f\u3001resamples \u3092\u7528\u3044\u3066\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u7d50\u679c\u3092\u307e\u305a\u96c6\u3081\u307e\u3059\u3002\n\n```r\nresamps <- resamples(list(GBM = gbmFit3,\n                          SVM = svmFit,\n                          RDA = rdaFit))\nresamps\n\nCall:\nresamples.default(x = list(GBM = gbmFit3, SVM = svmFit, RDA = rdaFit))\n\nModels: GBM, SVM, RDA \nNumber of resamples: 100 \nPerformance metrics: ROC, Sens, Spec \nTime estimates for: everything, final model fit \n\nsummary(resamps)\n\nCall:\nsummary.resamples(object = resamps)\n\nModels: GBM, SVM, RDA \nNumber of resamples: 100 \n\nROC \n      Min. 1st Qu. Median   Mean 3rd Qu. Max. NA's\nGBM 0.5714  0.8464 0.9085 0.8963  0.9526    1    0\nSVM 0.6786  0.9107 0.9557 0.9445  0.9844    1    0\nRDA 0.6508  0.8571 0.9206 0.9074  0.9653    1    0\n\nSens \n     Min. 1st Qu. Median   Mean 3rd Qu. Max. NA's\nGBM 0.625  0.8507 0.8750 0.8821       1    1    0\nSVM 0.500  0.8750 0.8889 0.9090       1    1    0\nRDA 0.500  0.8750 0.8889 0.9008       1    1    0\n\nSpec \n      Min. 1st Qu. Median   Mean 3rd Qu. Max. NA's\nGBM 0.4286  0.7143 0.7500 0.7664  0.8571    1    0\nSVM 0.2857  0.7143 0.8571 0.8155  0.9062    1    0\nRDA 0.2857  0.7143 0.7500 0.7643  0.8571    1    0\n```\n\n\u3053\u3053\u3067\u306f\u3001control \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b resamples = \"final\" \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u306e\u3053\u3068\u3002\n\n\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5206\u5e03\u306e\u53ef\u8996\u5316\u306e\u305f\u3081\u306b\u3044\u304f\u3064\u304b\u306e lattice \u30d7\u30ed\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\uff1adensity plots, box-whisker plots, scatterplot matrices \u3068\u8981\u7d04\u8a08\u91cf\u306e scatterplots \u3067\u3059\u3002\u4f8b\u3048\u3070\uff1a\n\n```r\ntrellis.par.set(theme1)\nbwplot(resamps, layout = c(3, 1))\n```\n\uff08\u56f3\u7565\uff09\n\n```r\ntrellis.par.set(caretTheme())\ndotplot(resamps, metric = \"ROC\")\n```\n\uff08\u56f3\u7565\uff09\n\n```r\ntrellis.par.set(theme1)\nxyplot(resamps, what = \"BlandAltman\")\n```\n\uff08\u56f3\u7565\uff09\n\n```r\nsplom(resamps)\n```\n\uff08\u56f3\u7565\uff09\n\n\u4ed6\u306e\u53ef\u8996\u5316\u3001 densityplot.resamples \u3068 parallel.resamples \u3082\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30c7\u30fc\u30bf\u306e\u540c\u3058\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30e2\u30c7\u30eb\u306b\u30d5\u30a3\u30c3\u30c8\u3055\u305b\u305f\u306e\u3067\u3001\u30e2\u30c7\u30eb\u9593\u306e\u9055\u3044\u306b\u610f\u5473\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3046\u3059\u308b\u3068\u3001within-resample \u76f8\u95a2\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u305d\u308c\u3092\u6e1b\u3089\u3057\u307e\u3059\u3002\u5dee\u7570\u3092\u8a08\u7b97\u3057\u3001\u30e2\u30c7\u30eb\u9593\u306b\u5dee\u304c\u306a\u3044\u3068\u3044\u3046\u5e30\u7121\u4eee\u8aac\u3092\u5358\u7d14\u306at\u691c\u5b9a\u3067\u8a55\u4fa1\u3057\u307e\u3059\u3002\n\n```r\ndifValues <- diff(resamps)\ndifValues\n\nCall:\ndiff.resamples(x = resamps)\n\nModels: GBM, SVM, RDA \nMetrics: ROC, Sens, Spec \nNumber of differences: 3 \np-value adjustment: bonferroni \n\nsummary(difValues)\nCall:\nsummary.diff.resamples(object = difValues)\n\np-value adjustment: bonferroni \nUpper diagonal: estimates of the difference\nLower diagonal: p-value for H0: difference = 0\n\nROC \n    GBM       SVM       RDA     \nGBM           -0.04818  -0.01104\nSVM 4.692e-12            0.03714\nRDA 0.4831    2.714e-07         \n\nSens \n    GBM    SVM       RDA      \nGBM        -0.026944 -0.018750\nSVM 0.0280            0.008194\nRDA 0.5805 1.0000             \n\nSpec \n    GBM      SVM       RDA      \nGBM          -0.049107  0.002143\nSVM 0.001523            0.051250\nRDA 1.000000 0.011419           \ntrellis.par.set(theme1)\nbwplot(difValues, layout = c(3, 1))\n```\n\uff08\u56f3\u7565\uff09\n\n```r\ntrellis.par.set(caretTheme())\ndotplot(difValues)\n```\n\uff08\u56f3\u7565\uff09\n\n# \u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306a\u3057\u3067\u306e\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\n\n\u30e2\u30c7\u30eb\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u5024\u304c\u65e2\u77e5\u306e\u5834\u5408\u306f\u3001\u30ea\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3084\u30d1\u30e9\u30e1\u30fc\u30bf\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u306a\u3057\u306b\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u30bb\u30c3\u30c8\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066 train \u306f\u30e2\u30c7\u30eb\u30d5\u30a3\u30c3\u30c6\u30a3\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002trainControl \u306e\u30aa\u30d7\u30b7\u30e7\u30f3 method = \"none\" \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\uff1a\n\n```r\nfitControl <- trainControl(method = \"none\", classProbs = TRUE)\n\nset.seed(825)\ngbmFit4 <- train(Class ~ ., data = training,\n                 method = \"gbm\",\n                 trControl = fitControl,\n                 verbose = FALSE,\n                 ## Only a single model can be passed to the\n                 ## function when no resampling is used:\n                 tuneGrid = data.frame(interaction.depth = 4,\n                                       n.trees = 100,\n                                       shrinkage = .1,\n                                       n.minobsinnode = 20),\n                 metric = \"ROC\")\ngbmFit4\n\nStochastic Gradient Boosting \n\n157 samples\n 60 predictor\n  2 classes: 'M', 'R' \n\nNo pre-processing\nResampling: None \n```\n\nplot.train, resamples, confusionMatrix.train \u3068\u3044\u304f\u3064\u304b\u306e\u4ed6\u306e\u95a2\u6570\u3067\u306f\u3053\u306e\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001predict.train \u3068\u4ed6\u306e\u3082\u306e\u3067\u306f\uff1a\n\n```r\npredict(gbmFit4, newdata = head(testing))\n\n[1] R R R R M M\nLevels: M R\n\npredict(gbmFit4, newdata = head(testing), type = \"prob\")\n           M          R\n1 0.07043641 0.92956359\n2 0.02921858 0.97078142\n3 0.01156062 0.98843938\n4 0.36436834 0.63563166\n5 0.92596513 0.07403487\n6 0.82897570 0.17102430\n```\n", "tags": ["\u30c7\u30fc\u30bf\u30b5\u30a4\u30a8\u30f3\u30b9", "\u6a5f\u68b0\u5b66\u7fd2", "R", "caret"]}