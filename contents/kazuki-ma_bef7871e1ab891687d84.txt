{"context": "\u3042\u308b\u3044\u306f Mac \u3067\u306e dtrace \u3067\u5982\u4f55\u306b\u3053\u306e\u624b\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u306e\u304b\u30e1\u30e2\u3002\nAdobe Creative Cloud \u3092\u5229\u7528\u3057\u3066 Photoshop \u5165\u3089\u306a\u304b\u3063\u305f\u3089\u300110\u56de\u3050\u3089\u3044 Creative Cloud \u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u304b\u8a66\u3057\u3066\u898b\u305f\u3051\u3069\u76f4\u3089\u306a\u304b\u3063\u305f\u3002\n\u7d50\u5c40\u3001 /etc/hosts \u306b non-ascii \u6587\u5b57\uff08\uff1f\uff09\u304c\uff08\u30b3\u30e1\u30f3\u30c8\u306e\u5f62\u3067\uff09\u5165\u3063\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3063\u307d\u304b\u3063\u305f\u3002\n\u6700\u521d\u304b\u3089\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u3092\u898b\u308c\u3070\u3088\u304b\u3063\u305f\u3051\u3069\u3001\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u306b\u305f\u3069\u308a\u7740\u304f\u70ba\u306b\u3082 dtrace \u304c\u6709\u52b9\u3060\u3063\u305f\u306e\u3067\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\ndtrace \u30e1\u30e2\n\u7d30\u304b\u3044\u30d5\u30a3\u30eb\u30bf\u6761\u4ef6\u306f\u3042\u3093\u307e\u308a\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u3002\nIO \u3060\u3051\u3060\u3063\u305f\u3089\u3001\u5f8c\u308d\u3067 grep \u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3068\u601d\u3046\u3002\u30d7\u30ed\u30bb\u30b9\u540d\u89e3\u3089\u306a\u3044\u3001\u3068\u3044\u3046\u304b\u8fd1\u4ee3\u7684\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u306f\u3001\u4e00\u3064\u306b\u7279\u5b9a\u51fa\u6765\u306a\u3044\u306e\u3067\u3002\n% sudo dtrace -n \"syscall::open:entry, syscall::stat:entry, syscall::stat64:entry { trace(copyinstr(arg0)) } \" 2> /dev/null | grep -i adobe\nPassword:\n  0    160                       open:entry   /Users/kazuki-ma/Library/Logs/DiagnosticReports/Adobe Desktop Service_2016-08-14-014416_mymachine.crash\n  0    160                       open:entry   /Users/kazuki-ma/Library/Logs/DiagnosticReports/Adobe Desktop Service_2016-08-14-014554_mymachine.crash\n\n\u308f\u304b\u3063\u305f\u3053\u3068\n1. MacOS \u306b\u306f\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u304c\u3042\u308b\u3063\u307d\u3044\n2. Adobe \u95a2\u4fc2\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u3092\u5410\u3044\u305f\u30d7\u30ed\u30bb\u30b9\u304c\u3042\u308b\n3. \u305d\u308c\u306f \u2191 \u306e\u30d1\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\n\n\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\nopen '\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u306e\u30d1\u30b9' \u3067 OS \u6a19\u6e96\u306e\u30d3\u30e5\u30a2\u30fc\u3067\u958b\u3044\u305f\u3002\u666e\u901a\u306b code \u3068\u304b\u3067\u958b\u3044\u3066\u3082\u3044\u3044\u3068\u304a\u3082\u3046\u3002\n\n\u5148\u982d\nProcess:               Adobe Desktop Service [2786]\nPath:                  /Library/Application Support/Adobe/*/Adobe Desktop Service.app/Contents/MacOS/Adobe Desktop Service\nIdentifier:            com.adobe.acc.AdobeDesktopService\nVersion:               3.7.5.291 (3.7)\nCode Type:             X86 (Native)\nParent Process:        ??? [1]\nResponsible:           Adobe Desktop Service [2786]\nUser ID:               502\n\nDate/Time:             2016-08-14 01:52:21.363 +0900\nOS Version:            Mac OS X 10.11.6 (15G31)\nReport Version:        11\nAnonymous UUID:        BEDEC9B9-150D-2DD8-2E4F-E5F869F0C242\n\n\nTime Awake Since Boot: 1400 seconds\n\nSystem Integrity Protection: enabled\n\nCrashed Thread:        20  Dispatch queue: NSOperationQueue 0x7bb46990 :: NSOperation 0x7bbb5480 (QOS: LEGACY)\n\nException Type:        EXC_BAD_ACCESS (SIGSEGV)\nException Codes:       KERN_INVALID_ADDRESS at 0x0000000000000000\nException Note:        EXC_CORPSE_NOTIFY\n\nVM Regions Near 0:\n\nCrashed Thread:        20 \u3068\u3042\u308b\u306e\u3067\u3001 Thread ID = 20 \u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u3089\u3057\u3044\u3002\n\nThread ID = 20\nThread 20 Crashed:: Dispatch queue: NSOperationQueue 0x7bb46990 :: NSOperation 0x7bbb5480 (QOS: LEGACY)\n0   libsystem_c.dylib               0x9107a040 strlen + 16\n1   ContainerBL.dylib               0x03f65e25 HostFileHandler::isHostFileTempered(std::set<std::string, std::less<std::string>, std::allocator<std::string> > const&, std::set<std::string, std::less<std::string>, std::allocator<std::string> >&) + 133\n2   ContainerBL.dylib               0x03f6678f HostFileHandler::doHostFileSanityCheckAndShowErrorIfAny(std::string const&) + 143\n3   ContainerBL.dylib               0x03f1068c 0x3ed0000 + 263820\n4   ContainerBL.dylib               0x03f25ab3 0x3ed0000 + 350899\n5   ContainerBL.dylib               0x03f1e370 MessageHandler::handle(MessageObject const&) + 160\n6   ContainerBL.dylib               0x03f84732 ExternalGateway::processMessageFromOutside(MessageStruct const*, bool (**)(void const*)) + 98\n7   ContainerBL.dylib               0x03fe3ffa processMessage + 138\n8   Core.dylib                      0x022aba84 ExternalGateway::sendMessageToApplet(MessageObject const&, MessageStruct const*, bool (**)(void const*), char const**) + 2532\n9   Core.dylib                      0x022ac1ba ExternalGateway::sendMessageToAllAppletInstances(Applet*, MessageObject&) + 202\n10  Core.dylib                      0x022ab235 ExternalGateway::sendMessageToApplet(MessageObject const&, MessageStruct const*, bool (**)(void const*), char const**) + 405\n11  Core.dylib                      0x022aae47 ExternalGateway::handleMessage(MessageObject const&, MessageStruct const*, bool (**)(void const*), char const**) + 407\n12  Core.dylib                      0x022a9d9f 0x2287000 + 142751\n13  com.apple.CoreFoundation        0x9957861d __invoking___ + 29\n14  com.apple.CoreFoundation        0x9957855d -[NSInvocation invoke] + 317\n15  com.apple.Foundation            0x9e918acb -[NSInvocationOperation main] + 219\n16  com.apple.Foundation            0x9e89c204 -[__NSOperationInternal _start:] + 770\n17  com.apple.Foundation            0x9e89befb -[NSOperation start] + 71\n18  com.apple.Foundation            0x9e89a34f __NSOQSchedule_f + 258\n19  libdispatch.dylib               0x97aff83f _dispatch_client_callout + 50\n20  libdispatch.dylib               0x97b045f9 _dispatch_queue_drain + 726\n21  libdispatch.dylib               0x97b0b278 _dispatch_queue_invoke + 509\n22  libdispatch.dylib               0x97b0329c _dispatch_root_queue_drain + 491\n23  libdispatch.dylib               0x97b0306b _dispatch_worker_thread3 + 97\n24  libsystem_pthread.dylib         0x9bcc125c _pthread_wqthread + 1050\n25  libsystem_pthread.dylib         0x9bcbef56 start_wqthread + 34\n\n\n\u89e3\u3063\u305f\u3053\u3068\n\n\nHostFileHandler::doHostFileSanityCheckAndShowErrorIfAny \u3053\u3053\u3089\u3078\u3093\u304c\u4f55\u3084\u3063\u3066\u308b\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\u3001/etc/hosts \u306b\u95a2\u4fc2\u3042\u308a\u305d\u3046\u3060\u3002\n\u305d\u3046\u3044\u3048\u3070\u3001\u30b3\u30e1\u30f3\u30c8\u306b\u65e5\u672c\u8a9e\u3067\u6587\u5b57\u5165\u308c\u3066\u3001\u3042\u3068\u304b\u3089 vim \u3067\u958b\u304f\u3068\u6587\u5b57\u5316\u3051\u3057\u3066\u308b\u3051\u3069\u554f\u984c\u7121\u3044\u304b\u3089\u653e\u7f6e\u3057\u3066\u305f\u3002\n\n/etc/hosts \u306e\u30b3\u30e1\u30f3\u30c8\u6d88\u3057\u305f \u2192 \u52d5\u3044\u305f(\u30fb\u2200\u30fb)\n\n\u3042\u308b\u3044\u306f Mac \u3067\u306e `dtrace` \u3067\u5982\u4f55\u306b\u3053\u306e\u624b\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u306e\u304b\u30e1\u30e2\u3002\n\nAdobe Creative Cloud \u3092\u5229\u7528\u3057\u3066 Photoshop \u5165\u3089\u306a\u304b\u3063\u305f\u3089\u300110\u56de\u3050\u3089\u3044 Creative Cloud \u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u304b\u8a66\u3057\u3066\u898b\u305f\u3051\u3069\u76f4\u3089\u306a\u304b\u3063\u305f\u3002\n\u7d50\u5c40\u3001 `/etc/hosts` \u306b non-ascii \u6587\u5b57\uff08\uff1f\uff09\u304c\uff08\u30b3\u30e1\u30f3\u30c8\u306e\u5f62\u3067\uff09\u5165\u3063\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3063\u307d\u304b\u3063\u305f\u3002\n\u6700\u521d\u304b\u3089\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u3092\u898b\u308c\u3070\u3088\u304b\u3063\u305f\u3051\u3069\u3001\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u306b\u305f\u3069\u308a\u7740\u304f\u70ba\u306b\u3082 dtrace \u304c\u6709\u52b9\u3060\u3063\u305f\u306e\u3067\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\n# dtrace \u30e1\u30e2\n\u7d30\u304b\u3044\u30d5\u30a3\u30eb\u30bf\u6761\u4ef6\u306f\u3042\u3093\u307e\u308a\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u3002\nIO \u3060\u3051\u3060\u3063\u305f\u3089\u3001\u5f8c\u308d\u3067 grep \u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3068\u601d\u3046\u3002\u30d7\u30ed\u30bb\u30b9\u540d\u89e3\u3089\u306a\u3044\u3001\u3068\u3044\u3046\u304b\u8fd1\u4ee3\u7684\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u306f\u3001\u4e00\u3064\u306b\u7279\u5b9a\u51fa\u6765\u306a\u3044\u306e\u3067\u3002\n\n```\n% sudo dtrace -n \"syscall::open:entry, syscall::stat:entry, syscall::stat64:entry { trace(copyinstr(arg0)) } \" 2> /dev/null | grep -i adobe\nPassword:\n  0    160                       open:entry   /Users/kazuki-ma/Library/Logs/DiagnosticReports/Adobe Desktop Service_2016-08-14-014416_mymachine.crash\n  0    160                       open:entry   /Users/kazuki-ma/Library/Logs/DiagnosticReports/Adobe Desktop Service_2016-08-14-014554_mymachine.crash\n```\n\n\u308f\u304b\u3063\u305f\u3053\u3068\n1. \bMacOS \u306b\u306f\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u304c\u3042\u308b\u3063\u307d\u3044\n2. Adobe \u95a2\u4fc2\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u3092\u5410\u3044\u305f\u30d7\u30ed\u30bb\u30b9\u304c\u3042\u308b\n3. \u305d\u308c\u306f \u2191 \u306e\u30d1\u30b9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\n\n# \u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\n\n\b`open '\u30af\u30e9\u30c3\u30b7\u30e5\u30ed\u30b0\u306e\u30d1\u30b9'` \u3067 OS \u6a19\u6e96\u306e\u30d3\u30e5\u30a2\u30fc\u3067\u958b\u3044\u305f\u3002\u666e\u901a\u306b [code](https://code.visualstudio.com) \u3068\u304b\u3067\u958b\u3044\u3066\u3082\u3044\u3044\u3068\u304a\u3082\u3046\u3002\n\n## \u5148\u982d\n```\nProcess:               Adobe Desktop Service [2786]\nPath:                  /Library/Application Support/Adobe/*/Adobe Desktop Service.app/Contents/MacOS/Adobe Desktop Service\nIdentifier:            com.adobe.acc.AdobeDesktopService\nVersion:               3.7.5.291 (3.7)\nCode Type:             X86 (Native)\nParent Process:        ??? [1]\nResponsible:           Adobe Desktop Service [2786]\nUser ID:               502\n\nDate/Time:             2016-08-14 01:52:21.363 +0900\nOS Version:            Mac OS X 10.11.6 (15G31)\nReport Version:        11\nAnonymous UUID:        BEDEC9B9-150D-2DD8-2E4F-E5F869F0C242\n\n\nTime Awake Since Boot: 1400 seconds\n\nSystem Integrity Protection: enabled\n\nCrashed Thread:        20  Dispatch queue: NSOperationQueue 0x7bb46990 :: NSOperation 0x7bbb5480 (QOS: LEGACY)\n\nException Type:        EXC_BAD_ACCESS (SIGSEGV)\nException Codes:       KERN_INVALID_ADDRESS at 0x0000000000000000\nException Note:        EXC_CORPSE_NOTIFY\n\nVM Regions Near 0:\n```\n\n`Crashed Thread:        20` \u3068\u3042\u308b\u306e\u3067\u3001 Thread ID = 20 \u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u3089\u3057\u3044\u3002\n\n## Thread ID = 20\n```\nThread 20 Crashed:: Dispatch queue: NSOperationQueue 0x7bb46990 :: NSOperation 0x7bbb5480 (QOS: LEGACY)\n0   libsystem_c.dylib             \t0x9107a040 strlen + 16\n1   ContainerBL.dylib             \t0x03f65e25 HostFileHandler::isHostFileTempered(std::set<std::string, std::less<std::string>, std::allocator<std::string> > const&, std::set<std::string, std::less<std::string>, std::allocator<std::string> >&) + 133\n2   ContainerBL.dylib             \t0x03f6678f HostFileHandler::doHostFileSanityCheckAndShowErrorIfAny(std::string const&) + 143\n3   ContainerBL.dylib             \t0x03f1068c 0x3ed0000 + 263820\n4   ContainerBL.dylib             \t0x03f25ab3 0x3ed0000 + 350899\n5   ContainerBL.dylib             \t0x03f1e370 MessageHandler::handle(MessageObject const&) + 160\n6   ContainerBL.dylib             \t0x03f84732 ExternalGateway::processMessageFromOutside(MessageStruct const*, bool (**)(void const*)) + 98\n7   ContainerBL.dylib             \t0x03fe3ffa processMessage + 138\n8   Core.dylib                    \t0x022aba84 ExternalGateway::sendMessageToApplet(MessageObject const&, MessageStruct const*, bool (**)(void const*), char const**) + 2532\n9   Core.dylib                    \t0x022ac1ba ExternalGateway::sendMessageToAllAppletInstances(Applet*, MessageObject&) + 202\n10  Core.dylib                    \t0x022ab235 ExternalGateway::sendMessageToApplet(MessageObject const&, MessageStruct const*, bool (**)(void const*), char const**) + 405\n11  Core.dylib                    \t0x022aae47 ExternalGateway::handleMessage(MessageObject const&, MessageStruct const*, bool (**)(void const*), char const**) + 407\n12  Core.dylib                    \t0x022a9d9f 0x2287000 + 142751\n13  com.apple.CoreFoundation      \t0x9957861d __invoking___ + 29\n14  com.apple.CoreFoundation      \t0x9957855d -[NSInvocation invoke] + 317\n15  com.apple.Foundation          \t0x9e918acb -[NSInvocationOperation main] + 219\n16  com.apple.Foundation          \t0x9e89c204 -[__NSOperationInternal _start:] + 770\n17  com.apple.Foundation          \t0x9e89befb -[NSOperation start] + 71\n18  com.apple.Foundation          \t0x9e89a34f __NSOQSchedule_f + 258\n19  libdispatch.dylib             \t0x97aff83f _dispatch_client_callout + 50\n20  libdispatch.dylib             \t0x97b045f9 _dispatch_queue_drain + 726\n21  libdispatch.dylib             \t0x97b0b278 _dispatch_queue_invoke + 509\n22  libdispatch.dylib             \t0x97b0329c _dispatch_root_queue_drain + 491\n23  libdispatch.dylib             \t0x97b0306b _dispatch_worker_thread3 + 97\n24  libsystem_pthread.dylib       \t0x9bcc125c _pthread_wqthread + 1050\n25  libsystem_pthread.dylib       \t0x9bcbef56 start_wqthread + 34\n```\n\n# \u89e3\u3063\u305f\u3053\u3068\n1. `HostFileHandler::doHostFileSanityCheckAndShowErrorIfAny` \u3053\u3053\u3089\u3078\u3093\u304c\u4f55\u3084\u3063\u3066\u308b\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\u3001`/etc/hosts` \u306b\u95a2\u4fc2\u3042\u308a\u305d\u3046\u3060\u3002\n2. \u305d\u3046\u3044\u3048\u3070\u3001\u30b3\u30e1\u30f3\u30c8\u306b\u65e5\u672c\u8a9e\u3067\u6587\u5b57\u5165\u308c\u3066\u3001\u3042\u3068\u304b\u3089 vim \u3067\u958b\u304f\u3068\u6587\u5b57\u5316\u3051\u3057\u3066\u308b\u3051\u3069\u554f\u984c\u7121\u3044\u304b\u3089\u653e\u7f6e\u3057\u3066\u305f\u3002\n3. `/etc/hosts` \u306e\u30b3\u30e1\u30f3\u30c8\u6d88\u3057\u305f \u2192 \u52d5\u3044\u305f(\u30fb\u2200\u30fb)\n", "tags": ["photoshop", "adobe", "AdobeCreativeCloud", "illustrator"]}