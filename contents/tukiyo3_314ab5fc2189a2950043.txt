{"context": "\n\nmac\u306e\u5834\u5408\nsudo easy_install ansible\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u3067easy_install\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u3068\u3088\u3044\u3002\ncurl http://python-distribute.org/distribute_setup.py | sudo python\n\n\nLinux\u306e\u5834\u5408\n\n\u4eee\u60f3\u74b0\u5883\u8d77\u52d5\n% vzctl start 101\nStarting container ...\nContainer is mounted\nAdding IP address(es): 192.168.11.5\nSetting CPU units: 1000\nSetting CPUs: 1\nContainer start in progress...\n% vzctl enter 101\nentered into CT 101\n\n\n\nansible\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n% sed -i -e 's@http://archive.ubuntu.com@http://jp.archive.ubuntu.com@' /etc/apt/sources.list\n% apt-get update\n% apt-get install -y dialog\n% apt-get install -y software-properties-common\n% add-apt-repository -y ppa:rquillo/ansible\n% apt-get update\n% apt-get install -y ansible\n\n% ssh-keygen -q\n% cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\n% cat > ~/ansible_hosts <<EOF\n127.0.0.1\nEOF\n% export ANSIBLE_HOSTS=~/ansible_hosts\n\n\n\nansible\u5b9f\u884c\n% ansible all -m ping\n127.0.0.1 | success >> {\n    \"changed\": false, \n    \"ping\": \"pong\"\n}\n\n\n\n\u30db\u30b9\u30c8\u306e\u8ffd\u52a0\n% ssh-copy-id 192.168.11.4\n% echo 192.168.11.4 >> ~/ansible_hosts\n% ansible all -m ping\n192.168.11.4 | success >> {\n    \"changed\": false, \n    \"ping\": \"pong\"\n}\n\n127.0.0.1 | success >> {\n    \"changed\": false, \n    \"ping\": \"pong\"\n}\n\n\n\nplaybook\u3092\u4f5c\u308b\n\nlocalhost.yml\n- hosts: 127.0.0.1\n  connection: local\n  user: vagrant\n  sudo: yes\n\n  tasks:\n    - apt: pkg=mysql-server state=present\n    - apt: pkg=mysql-client state=present\n    - apt: pkg=python-pip state=present\n    - apt: pkg=python-dev state=present\n    - apt: pkg=python-mysqldb state=present\n    - copy: src=\"etc/mysql/my.cnf\" dest=\"/etc/mysql/my.cnf\" owner=root group=root mode=0644\n    - service: name=mysql state=restarted\n\n\n\n\u9069\u7528\nansible-playbook -i hosts localhost.yml  -v\n\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n\nansible\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u3068\u3066\u3082\u3088\u3044\u3067\u3059\u3002\nAnsible Tutorial\nansible\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc\n\nmac\u306e\u5834\u5408\n============\n\n`sudo easy_install ansible`\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u3067easy_install\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u3068\u3088\u3044\u3002\n\n```bash:\ncurl http://python-distribute.org/distribute_setup.py | sudo python\n```\n\nLinux\u306e\u5834\u5408\n============\n\n```bash:\u4eee\u60f3\u74b0\u5883\u8d77\u52d5\n% vzctl start 101\nStarting container ...\nContainer is mounted\nAdding IP address(es): 192.168.11.5\nSetting CPU units: 1000\nSetting CPUs: 1\nContainer start in progress...\n% vzctl enter 101\nentered into CT 101\n```\n\n```bash:ansible\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n% sed -i -e 's@http://archive.ubuntu.com@http://jp.archive.ubuntu.com@' /etc/apt/sources.list\n% apt-get update\n% apt-get install -y dialog\n% apt-get install -y software-properties-common\n% add-apt-repository -y ppa:rquillo/ansible\n% apt-get update\n% apt-get install -y ansible\n\n% ssh-keygen -q\n% cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\n% cat > ~/ansible_hosts <<EOF\n127.0.0.1\nEOF\n% export ANSIBLE_HOSTS=~/ansible_hosts\n```\n\n```bash:ansible\u5b9f\u884c\n% ansible all -m ping\n127.0.0.1 | success >> {\n    \"changed\": false, \n    \"ping\": \"pong\"\n}\n```\n\n```bash:\u30db\u30b9\u30c8\u306e\u8ffd\u52a0\n% ssh-copy-id 192.168.11.4\n% echo 192.168.11.4 >> ~/ansible_hosts\n% ansible all -m ping\n192.168.11.4 | success >> {\n    \"changed\": false, \n    \"ping\": \"pong\"\n}\n\n127.0.0.1 | success >> {\n    \"changed\": false, \n    \"ping\": \"pong\"\n}\n```\n\nplaybook\u3092\u4f5c\u308b\n============\n\n```bash:localhost.yml\n- hosts: 127.0.0.1\n  connection: local\n  user: vagrant\n  sudo: yes\n\n  tasks:\n    - apt: pkg=mysql-server state=present\n    - apt: pkg=mysql-client state=present\n    - apt: pkg=python-pip state=present\n    - apt: pkg=python-dev state=present\n    - apt: pkg=python-mysqldb state=present\n    - copy: src=\"etc/mysql/my.cnf\" dest=\"/etc/mysql/my.cnf\" owner=root group=root mode=0644\n    - service: name=mysql state=restarted\n```\n\n```bash:\u9069\u7528\nansible-playbook -i hosts localhost.yml  -v\n```\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n=========\n* [ansible\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://www.ansibleworks.com/docs/modules.html#)\u304c\u3068\u3066\u3082\u3088\u3044\u3067\u3059\u3002\n* [Ansible Tutorial](http://yteraoka.github.io/ansible-tutorial/)\n* [ansible\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc](http://qiita.com/advent-calendar/2013/ansible)\n", "tags": ["Ansible", "devops"]}