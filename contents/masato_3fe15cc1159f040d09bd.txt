{"context": " More than 1 year has passed since last update.Couchbase Server\u30af\u30e9\u30b9\u30bf\u306b\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3001Node.js\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u3067\u3088\u304f\u4f7f\u308f\u308c\u308bBeer sample\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nbeer-sample.zip\u306e\u30ed\u30fc\u30c9\n3\u3064\u8d77\u52d5\u3057\u3066\u3044\u308bCouchbase Server\u30b3\u30f3\u30c6\u30ca\u306e\u3069\u308c\u304b\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\n$ docker exec -it 97a45d86ed2d /bin/bash\n\ncouchbase-examples\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3042\u308b\u3001beer-sample.zip\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n$ wget https://github.com/couchbase/couchbase-examples/raw/master/beer-sample.zip\n\ncbdocloader\u3092\u4f7f\u3044\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092beer-sample\u30d0\u30b1\u30c3\u30c8\u306b\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n$ /opt/couchbase/bin/cbdocloader -u user -p passw0rd -b beer-sample beer-sample.zip\n[2015-01-20 13:35:50,684] - [rest_client] [140528307840768] - INFO - existing buckets : [u'default']\n[2015-01-20 13:35:50,693] - [rest_client] [140528307840768] - INFO - http://127.0.0.1:8091//pools/default/buckets with param: proxyPort=11211&bucketType=membase&authType=sasl&name=beer-sample&replicaNumber=1&saslPassword=&ramQuotaMB=100\n[2015-01-20 13:35:50,784] - [rest_client] [140528307840768] - INFO - existing buckets : [u'default']\n.[2015-01-20 13:35:52,908] - [rest_client] [140528307840768] - INFO - existing buckets : [u'beer-sample', u'default']\n[2015-01-20 13:35:52,909] - [rest_client] [140528307840768] - INFO - found bucket beer-sample\n..bucket creation is successful\n.\nbucket: beer-sample.zip, msgs transferred...\n       :                total |       last |    per sec\n byte  :              2541549 |    2541549 |   687339.7\ndone\n\n\n\u30c7\u30fc\u30bf\u78ba\u8a8d\u7528\u306eNode.js\u30b3\u30f3\u30c6\u30ca\ndockerfile/nodejsDocker\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3044Node.js\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u5185\u3067Express\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u30dd\u30fc\u30c8\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u307e\u3059\u3002\n$ docker pull dockerfile/nodejs\n$ docker run -it --name couchnode -p 1337:1337 dockerfile/nodejs\n\nNode.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30010.10.35\u3067\u3059\u3002\n$ node -v\nv0.10.35\n\n\nNode.js SDK 2.0 \u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\nNode.js SDK 2.0 \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u8aad\u307f\u306a\u304c\u3089\u30b5\u30f3\u30d7\u30eb\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092clone\u3057\u3066npm install\u3057\u307e\u3059\u3002\n$ git clone git://github.com/couchbaselabs/beersample-node \n$ cd beersample-node \n$ npm install\n\n\n\u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nNode.js\u306e\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002development\u306e\u30d3\u30e5\u30fc\u306b\u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3001production\u306bpublish\u3057\u307e\u3059\u3002\nbeer\u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066publish\u3057\u307e\u3059\u3002\n\nbeer-sample > Views > Create Development View\n\n\nMap\u306eView code\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\nfunction (doc, meta) {\n    if (doc.type && doc.type == \"beer\") {\n        emit(doc.name, null);\n    }\n}\n\nFilter Results > Show Results\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30b5\u30f3\u30d7\u30eb\u306e\u30d5\u30a3\u30eb\u30bf\u7d50\u679c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u540c\u69d8\u306b\u3001brewery\u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066publish\u3057\u307e\u3059\u3002\n\nbeer-sample > Views > Create Development View\n\nMap\u306eView code\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\nfunction (doc, meta) {\n    if (doc.type && doc.type == \"brewery\") {\n        emit(doc.name, null);\n    }\n}\n\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\nExpress\u306fDocker\u30b3\u30f3\u30c6\u30ca\u3067\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u306ebeer.js\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092CoreOS\u30db\u30b9\u30c8\u4eee\u60f3\u30de\u30b7\u30f3\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nbeer.js\n...\nvar config = {\n    //connstr : \"http://localhost:8091\",\n    connstr : \"http://10.3.0.7:8091\",\n    bucket : 'beer-sample'\n}\n\n\n\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ node beer.js\nServer running at http://127.0.0.1:1337/\nCouchbase Connected\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089CoreOS\u30db\u30b9\u30c8\u4eee\u60f3\u30de\u30b7\u30f3\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u958b\u304d\u307e\u3059\u3002\nhttp://10.3.0.7:1337/\n\nBeers\u306e\u753b\u9762\u304b\u3089\u3001beer-sample\u30d0\u30b1\u30c3\u30c8\u306b\u30ed\u30fc\u30c9\u3057\u305fbeer-sample.zip\u306e\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3067\u304d\u307e\u3057\u305f\u3002\n\nCouchbase Server\u30af\u30e9\u30b9\u30bf\u306b\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3001Node.js\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002[\u30b5\u30f3\u30d7\u30eb]((https://github.com/couchbase/couchbase-examples))\u3067\u3088\u304f\u4f7f\u308f\u308c\u308bBeer sample\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\n## beer-sample.zip\u306e\u30ed\u30fc\u30c9\n\n3\u3064\u8d77\u52d5\u3057\u3066\u3044\u308bCouchbase Server\u30b3\u30f3\u30c6\u30ca\u306e\u3069\u308c\u304b\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\n``` bash\n$ docker exec -it 97a45d86ed2d /bin/bash\n```\n\n[couchbase-examples](https://github.com/couchbase/couchbase-examples)\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3042\u308b\u3001beer-sample.zip\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n``` bash\n$ wget https://github.com/couchbase/couchbase-examples/raw/master/beer-sample.zip\n```\n\ncbdocloader\u3092\u4f7f\u3044\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092`beer-sample`\u30d0\u30b1\u30c3\u30c8\u306b\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n``` bash\n$ /opt/couchbase/bin/cbdocloader -u user -p passw0rd -b beer-sample beer-sample.zip\n[2015-01-20 13:35:50,684] - [rest_client] [140528307840768] - INFO - existing buckets : [u'default']\n[2015-01-20 13:35:50,693] - [rest_client] [140528307840768] - INFO - http://127.0.0.1:8091//pools/default/buckets with param: proxyPort=11211&bucketType=membase&authType=sasl&name=beer-sample&replicaNumber=1&saslPassword=&ramQuotaMB=100\n[2015-01-20 13:35:50,784] - [rest_client] [140528307840768] - INFO - existing buckets : [u'default']\n.[2015-01-20 13:35:52,908] - [rest_client] [140528307840768] - INFO - existing buckets : [u'beer-sample', u'default']\n[2015-01-20 13:35:52,909] - [rest_client] [140528307840768] - INFO - found bucket beer-sample\n..bucket creation is successful\n.\nbucket: beer-sample.zip, msgs transferred...\n       :                total |       last |    per sec\n byte  :              2541549 |    2541549 |   687339.7\ndone\n```\n\n## \u30c7\u30fc\u30bf\u78ba\u8a8d\u7528\u306eNode.js\u30b3\u30f3\u30c6\u30ca\n\n[dockerfile/nodejs](https://registry.hub.docker.com/u/dockerfile/nodejs/)Docker\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3044Node.js\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u5185\u3067Express\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u30dd\u30fc\u30c8\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u307e\u3059\u3002\n\n``` bash\n$ docker pull dockerfile/nodejs\n$ docker run -it --name couchnode -p 1337:1337 dockerfile/nodejs\n```\n\nNode.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30010.10.35\u3067\u3059\u3002\n\n``` bash\n$ node -v\nv0.10.35\n```\n\n## Node.js SDK 2.0 \u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\n\n[Node.js SDK 2.0 \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](http://docs.couchbase.com/developer/node-2.0/tutorial-intro.html)\u3092\u8aad\u307f\u306a\u304c\u3089\u30b5\u30f3\u30d7\u30eb\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092clone\u3057\u3066`npm install`\u3057\u307e\u3059\u3002\n\n``` bash\n$ git clone git://github.com/couchbaselabs/beersample-node \n$ cd beersample-node \n$ npm install\n```\n\n### \u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\nNode.js\u306e\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002development\u306e\u30d3\u30e5\u30fc\u306b\u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3001production\u306bpublish\u3057\u307e\u3059\u3002\n\nbeer\u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066publish\u3057\u307e\u3059\u3002\n\n* beer-sample > Views > Create Development View\n\n![_design_dev_beer_by_name.png](https://qiita-image-store.s3.amazonaws.com/0/43745/7c0e09e9-081f-b272-8d94-904475900c80.png)\n\nMap\u306eView code\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```js\nfunction (doc, meta) {\n    if (doc.type && doc.type == \"beer\") {\n        emit(doc.name, null);\n    }\n}\n```\n\nFilter Results > Show Results\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30b5\u30f3\u30d7\u30eb\u306e\u30d5\u30a3\u30eb\u30bf\u7d50\u679c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n![development_view_by_name.png](https://qiita-image-store.s3.amazonaws.com/0/43745/4c5328c8-5523-002a-7bb6-dae3edba7fb5.png)\n\n\n\u540c\u69d8\u306b\u3001brewery\u30c7\u30b6\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066publish\u3057\u307e\u3059\u3002\n\n* beer-sample > Views > Create Development View\n\n\nMap\u306eView code\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```js\nfunction (doc, meta) {\n    if (doc.type && doc.type == \"brewery\") {\n        emit(doc.name, null);\n    }\n}\n```\n\n### \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\n\nExpress\u306fDocker\u30b3\u30f3\u30c6\u30ca\u3067\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u306ebeer.js\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092CoreOS\u30db\u30b9\u30c8\u4eee\u60f3\u30de\u30b7\u30f3\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```js:beer.js\n...\nvar config = {\n    //connstr : \"http://localhost:8091\",\n    connstr : \"http://10.3.0.7:8091\",\n    bucket : 'beer-sample'\n}\n```\n\n\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n``` bash\n$ node beer.js\nServer running at http://127.0.0.1:1337/\nCouchbase Connected\n```\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089CoreOS\u30db\u30b9\u30c8\u4eee\u60f3\u30de\u30b7\u30f3\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u958b\u304d\u307e\u3059\u3002\n\nhttp://10.3.0.7:1337/\n\n![couchbase_beer_sample.png](https://qiita-image-store.s3.amazonaws.com/0/43745/4ccb4766-dd22-9426-2c0a-2ff7eb308dea.png)\n\n\nBeers\u306e\u753b\u9762\u304b\u3089\u3001beer-sample\u30d0\u30b1\u30c3\u30c8\u306b\u30ed\u30fc\u30c9\u3057\u305f`beer-sample.zip`\u306e\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3067\u304d\u307e\u3057\u305f\u3002\n\n![couchbase_beer_sample_beers.png](https://qiita-image-store.s3.amazonaws.com/0/43745/e6e6b136-53a1-829e-0fcd-0bc69cb03178.png)\n", "tags": ["Couchbase3.0.1", "Node.js0.10.35"]}