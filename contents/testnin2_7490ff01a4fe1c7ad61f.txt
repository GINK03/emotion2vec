{"context": "\n\n1. \u306f\u3058\u3081\u306b\nifconfig\u3001route\u3001netstat\u3001arp\u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u306fRHEL7/CentOS7\u3067\u306f\u6700\u5c0f\u69cb\u6210\u3067\u306f\u5c0e\u5165\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u3053\u308c\u3089\u306e\u30b3\u30de\u30f3\u30c9\u306f\u5ec3\u6b62\u4e88\u5b9a\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u4ee3\u308f\u308a\u306bip\u30b3\u30de\u30f3\u30c9\u3084ss\u30b3\u30de\u30f3\u30c9\u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001ip\u30b3\u30de\u30f3\u30c9\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u65b9\u6cd5\u306f\u3088\u304f\u7d39\u4ecb\u3055\u308c\u3066\u3044\u3066\u3082\u3001\u305d\u3082\u305d\u3082ip\u30b3\u30de\u30f3\u30c9\u7d50\u679c\u3092\u3069\u306e\u3088\u3046\u306b\u89e3\u91c8\u3059\u308b\u3079\u304d\u306a\u306e\u304b\u3092\u8aac\u660e\u3057\u3066\u3044\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u3042\u307e\u308a\u898b\u304b\u3051\u306a\u3044\u6c17\u304c\u3057\u307e\u3059\u3002\u3068\u3044\u3046\u306e\u3067\u3001\u4eca\u56de\u306f\u3088\u304f\u5229\u7528\u3059\u308bip route\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066\u30e1\u30e2\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n2. ip route\u30b3\u30de\u30f3\u30c9\n\n\nip route\u306f\u7d4c\u8def\u60c5\u5831\u3092\u51fa\u529b\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002\u4ee3\u308f\u308a\u306bip r\u3067\u3082\u826f\u3044\u3002\n\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u306f\u3001man ip route\n\nLinux Kernel\u306f\u8907\u6570\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001local\u3068\u3044\u3046Linux Kernel\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\u3068\u3001main\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u304c\u5229\u7528\u3055\u308c\u3066\u304a\u308a\u3001\u4ed6\u306b\u3082\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3002\uff08default\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u7a7a\u3063\u307d\u306a\u306e\u3067\u901a\u5e38\u306f\u6c17\u306b\u3057\u306a\u304f\u3066\u3088\u3044\uff09\u3002\n\n\n\u5229\u7528\u8005\u304c\u64cd\u4f5c\u3059\u308b\u306e\u306f\u4e3b\u306bmain\u30c6\u30fc\u30d6\u30eb\u3002ip route\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u4f55\u3082\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u3001main\u30c6\u30fc\u30d6\u30eb\u3092\u51fa\u529b\u3059\u308b\u3002\n\u4ed6\u306etable\u3092\u51fa\u529b\u3057\u305f\u3051\u308c\u3070\u3001ip route show table xxx\u306e\u3088\u3046\u306b\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n\n\u540c\u3058\u7d50\u679c\n# ip r\ndefault via 161.202.86.1 dev eth1\n10.0.0.0/8 via 10.132.2.193 dev eth0\n10.132.2.192/26 dev eth0  proto kernel  scope link  src 10.132.2.207\n161.26.0.0/16 via 10.132.2.193 dev eth0\n161.202.86.0/27 dev eth1  proto kernel  scope link  src 161.202.86.5\n169.254.0.0/16 dev eth0  scope link  metric 1002\n169.254.0.0/16 dev eth1  scope link  metric 1003\n\n# ip r show table main\ndefault via 161.202.86.1 dev eth1\n10.0.0.0/8 via 10.132.2.193 dev eth0\n10.132.2.192/26 dev eth0  proto kernel  scope link  src 10.132.2.207\n161.26.0.0/16 via 10.132.2.193 dev eth0\n161.202.86.0/27 dev eth1  proto kernel  scope link  src 161.202.86.5\n169.254.0.0/16 dev eth0  scope link  metric 1002\n169.254.0.0/16 dev eth1  scope link  metric 1003\n\n\n\nvia xx.xx.xx.xx: \u30cd\u30af\u30b9\u30c8\u30db\u30c3\u30d7\u306e\u30eb\u30fc\u30bf\u30fc\ndev: \u51fa\u529b\u30c7\u30d0\u30a4\u30b9\nproto kernel: \uff08\u30e6\u30fc\u30b6\u30fc\u304c\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u305f\u306e\u3067\u306f\u306a\u304f\uff09\u30ab\u30fc\u30cd\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3057\u305f\u7d4c\u8def\u3002\u4f8b\u3048\u3070\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001eth0\u3084eth1\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u969b\u306b\u304a\u3044\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u306a\u304f\u3066\u3082\u5404IP\u30a2\u30c9\u30ec\u30b9\u304c\u6240\u5c5e\u3059\u308b\u305d\u308c\u305e\u308c\u306e\u540c\u4e00\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3078\u306e\u7d4c\u8def\u306f\u5f53\u7136\u5b58\u5728\u3059\u308b\u3002\nscope: destination\uff08\u9001\u4fe1\u5148\uff09\u3092\u6307\u5b9a\n\n\nscope link: \u76f4\u63a5unicast/broadcast\u306b\u3066\u901a\u4fe1\u3059\u308b\u7d4c\u8def\u3002\u81ea\u8eab\u304c\u5c5e\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7b49\u304c\u8a72\u5f53\u3002\nscope host: \u81ea\u5206\u81ea\u8eab\u3078\u306e\u7d4c\u8def\nscope global: \uff08\u4ed6\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3078\u306e\uff09\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u7d4c\u7531\u3057\u305funicast\u901a\u4fe1\u306b\u3088\u308b\u7d4c\u8def\u3002scope\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u306a\u3044\u6642\u3082\u3053\u3061\u3089\u306b\u8a72\u5f53\u3002\n\n\nsrc: source\uff08\u9001\u4fe1\u5143\uff09\u3092\u6307\u5b9a\n169.254.0.0/16: \u3044\u308f\u3086\u308b\u30ea\u30f3\u30af\u30ed\u30fc\u30ab\u30eb\u30a2\u30c9\u30ec\u30b9\u3002DHCP\u304c\u5229\u7528\u3067\u304d\u306a\u3044\u969b\u306b\u3001\u5185\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7528\u306b\u66ab\u5b9a\u7684\u306b\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3092\u610f\u56f3\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\u3002\u30b5\u30fc\u30d0\u30fc\u7528\u9014\u3067\u306f\u4e0d\u8981\u306a\u305f\u3081\u3001/etc/sysconfig/network\u3067NOZEROCONF=yes\u3092\u8a2d\u5b9a\u3057\u3066\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3002wikipedia\u306a\u3069\u3067\u306e\u89e3\u8aac\u3068\u304b\u3001\u3053\u3053\u3092\u53c2\u7167\u3002\n\n\nlocal\u30c6\u30fc\u30d6\u30eb\u306e\u51fa\u529b\n# ip r show table local\nbroadcast 10.132.2.192 dev eth0  proto kernel  scope link  src 10.132.2.207\nlocal 10.132.2.207 dev eth0  proto kernel  scope host  src 10.132.2.207\nbroadcast 10.132.2.255 dev eth0  proto kernel  scope link  src 10.132.2.207\nbroadcast 127.0.0.0 dev lo  proto kernel  scope link  src 127.0.0.1\nlocal 127.0.0.0/8 dev lo  proto kernel  scope host  src 127.0.0.1\nlocal 127.0.0.1 dev lo  proto kernel  scope host  src 127.0.0.1\nbroadcast 127.255.255.255 dev lo  proto kernel  scope link  src 127.0.0.1\nbroadcast 161.202.86.0 dev eth1  proto kernel  scope link  src 161.202.86.5\nlocal 161.202.86.5 dev eth1  proto kernel  scope host  src 161.202.86.5\nbroadcast 161.202.86.31 dev eth1  proto kernel  scope link  src 161.202.86.5\n\n\n\nlocal\u30c6\u30fc\u30d6\u30eb\u306flocal\u30a2\u30c9\u30ec\u30b9\u3068broadcast\u30a2\u30c9\u30ec\u30b9\u3078\u306e\u7d4c\u8def\u304b\u3089\u69cb\u6210\u3055\u308c\u308b\u3002\u5148\u8ff0\u306e\u3068\u304a\u308a\u3001local\u30c6\u30fc\u30d6\u30eb\u306fkernel\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u304a\u308a\u3001\u5168\u884c\u3068\u3082proto kernel\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304b\u3089\u3082\u305d\u306e\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\n\nlocal: interface\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u305f\u969b\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u81ea\u5206\u81ea\u8eab\u3078\u306e\u7d4c\u8def\u3002\nbroadcast: interface\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u305f\u969b\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308bbroadcast\u3078\u306e\u7d4c\u8def\u3002\n\n\n\n\n\u5168\u30c6\u30fc\u30d6\u30eb\u306e\u51fa\u529b\n# ip r show table all\ndefault via 161.202.86.1 dev eth1\n10.0.0.0/8 via 10.132.2.193 dev eth0\n10.132.2.192/26 dev eth0  proto kernel  scope link  src 10.132.2.207\n161.26.0.0/16 via 10.132.2.193 dev eth0\n161.202.86.0/27 dev eth1  proto kernel  scope link  src 161.202.86.5\n169.254.0.0/16 dev eth0  scope link  metric 1002\n169.254.0.0/16 dev eth1  scope link  metric 1003\nbroadcast 10.132.2.192 dev eth0  table local  proto kernel  scope link  src 10.132.2.207\nlocal 10.132.2.207 dev eth0  table local  proto kernel  scope host  src 10.132.2.207\nbroadcast 10.132.2.255 dev eth0  table local  proto kernel  scope link  src 10.132.2.207\nbroadcast 127.0.0.0 dev lo  table local  proto kernel  scope link  src 127.0.0.1\nlocal 127.0.0.0/8 dev lo  table local  proto kernel  scope host  src 127.0.0.1\nlocal 127.0.0.1 dev lo  table local  proto kernel  scope host  src 127.0.0.1\nbroadcast 127.255.255.255 dev lo  table local  proto kernel  scope link  src 127.0.0.1\nbroadcast 161.202.86.0 dev eth1  table local  proto kernel  scope link  src 161.202.86.5\nlocal 161.202.86.5 dev eth1  table local  proto kernel  scope host  src 161.202.86.5\nbroadcast 161.202.86.31 dev eth1  table local  proto kernel  scope link  src 161.202.86.5\nunreachable ::/96 dev lo  metric 1024  error -113\nunreachable ::ffff:0.0.0.0/96 dev lo  metric 1024  error -113\nunreachable 2002:a00::/24 dev lo  metric 1024  error -113\nunreachable 2002:7f00::/24 dev lo  metric 1024  error -113\nunreachable 2002:a9fe::/32 dev lo  metric 1024  error -113\nunreachable 2002:ac10::/28 dev lo  metric 1024  error -113\nunreachable 2002:c0a8::/32 dev lo  metric 1024  error -113\nunreachable 2002:e000::/19 dev lo  metric 1024  error -113\nunreachable 3ffe:ffff::/32 dev lo  metric 1024  error -113\nfe80::/64 dev eth0  proto kernel  metric 256\nfe80::/64 dev eth1  proto kernel  metric 256\nunreachable default dev lo  table unspec  proto kernel  metric 4294967295  error -101\nlocal ::1 dev lo  table local  proto none  metric 0\nlocal fe80::458:d5ff:fe6a:9a08 dev lo  table local  proto none  metric 0\nlocal fe80::482:4fff:fe85:836d dev lo  table local  proto none  metric 0\nff00::/8 dev eth0  table local  metric 256\nff00::/8 dev eth1  table local  metric 256\nunreachable default dev lo  table unspec  proto kernel  metric 4294967295  error -101\n\n\n\n3. RPDB\u60c5\u5831\u306e\u78ba\u8a8d\n\u666e\u901a\u306fmain\u30c6\u30fc\u30d6\u30eb\u3050\u3089\u3044\u3057\u304b\u69cb\u6210\u3057\u306a\u3044\u306e\u3060\u304c\u3001\u904e\u53bb\u306b\u3069\u3046\u3057\u3066\u3082\u30d1\u30b1\u30c3\u30c8\u306e\u6319\u52d5\u306b\u7d0d\u5f97\u3067\u304d\u306a\u3044\u74b0\u5883\u304c\u3042\u308a\u3001\u8abf\u67fb\u3057\u305f\u7d50\u679c\u4ed6\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u3082\u3042\u3063\u305f\u306e\u3067\u3001\u521d\u898b\u306e\u74b0\u5883\u3067\u306f\u5ff5\u306e\u305f\u3081\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u826f\u3044\u3002\n\nlocal\u30c6\u30fc\u30d6\u30eb\u3084main\u30c6\u30fc\u30d6\u30eb\u4ee5\u5916\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u306f\u3001ip rule\u3092\u5b9f\u884c\u3059\u308b\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u3001RPDB\uff08Routing Policy Database\uff09\u306e\u4e00\u89a7\u304c\u78ba\u8a8d\u53ef\u80fd\u3002\nlocal\u306f0\u756a\u306b\u3001main\u306f32766\u756a\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\n\u756a\u53f7\u304c\u5c0f\u3055\u3044\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u3001\u9806\u306b\u8a55\u4fa1\u3055\u308c\u308b\u3002\n\n\nRPDB\u60c5\u5831\n# ip rule\n0:      from all lookup local\n32766:  from all lookup main\n32767:  from all lookup default\n\n\n\n4. routel\u30b3\u30de\u30f3\u30c9\nroutel\u30b3\u30de\u30f3\u30c9\u306froute\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u7d50\u679c\u3092\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3057\u3066\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3002\n\u3082\u3057\u3053\u3061\u3089\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5165\u3063\u3066\u3044\u305f\u3089\u3001routel\u306e\u65b9\u304c\u898b\u3084\u3059\u3044\u304b\u3082\u3002\n\nroutel\u30b3\u30de\u30f3\u30c9\n# which routel\n/usr/sbin/routel\n\n# routel main\n         target            gateway          source    proto    scope    dev tbl\n        default       161.202.86.1                                     eth1\n      10.0.0.0/ 8     10.132.2.193                                     eth0\n  10.132.2.192/ 26                    10.132.2.207   kernel     link   eth0\n    161.26.0.0/ 16    10.132.2.193                                     eth0\n  161.202.86.0/ 27                    161.202.86.5   kernel     link   eth1\n   169.254.0.0/ 16                                              link   eth0\n   169.254.0.0/ 16                                              link   eth1\n\n# routel\n         target            gateway          source    proto    scope    dev tbl\n        default       161.202.86.1                                     eth1\n      10.0.0.0/ 8     10.132.2.193                                     eth0\n  10.132.2.192/ 26                    10.132.2.207   kernel     link   eth0\n    161.26.0.0/ 16    10.132.2.193                                     eth0\n  161.202.86.0/ 27                    161.202.86.5   kernel     link   eth1\n   169.254.0.0/ 16                                              link   eth0\n   169.254.0.0/ 16                                              link   eth1\n   10.132.2.192          broadcast    10.132.2.207   kernel     link   eth0 local\n   10.132.2.207              local    10.132.2.207   kernel     host   eth0 local\n   10.132.2.255          broadcast    10.132.2.207   kernel     link   eth0 local\n      127.0.0.0          broadcast       127.0.0.1   kernel     link     lo local\n     127.0.0.0/ 8            local       127.0.0.1   kernel     host     lo local\n      127.0.0.1              local       127.0.0.1   kernel     host     lo local\n127.255.255.255          broadcast       127.0.0.1   kernel     link     lo local\n   161.202.86.0          broadcast    161.202.86.5   kernel     link   eth1 local\n   161.202.86.5              local    161.202.86.5   kernel     host   eth1 local\n  161.202.86.31          broadcast    161.202.86.5   kernel     link   eth1 local\n            ::/ 96     unreachable                                       lo\n::ffff:0.0.0.0/ 96     unreachable                                       lo\n    2002:a00::/ 24     unreachable                                       lo\n   2002:7f00::/ 24     unreachable                                       lo\n   2002:a9fe::/ 32     unreachable                                       lo\n   2002:ac10::/ 28     unreachable                                       lo\n   2002:c0a8::/ 32     unreachable                                       lo\n   2002:e000::/ 19     unreachable                                       lo\n   3ffe:ffff::/ 32     unreachable                                       lo\n        fe80::/ 64                                   kernel            eth0\n        fe80::/ 64                                   kernel            eth1\n        default        unreachable                   kernel              lo unspec\n            ::1              local                     none              lo local\nfe80::458:d5ff:fe6a:9a08              local                     none              lo local\nfe80::482:4fff:fe85:836d              local                     none              lo local\n        ff00::/ 8                                                      eth0 local\n        ff00::/ 8                                                      eth1 local\n        default        unreachable                   kernel              lo unspec\n\n\n\n\n\u53c2\u8003\u60c5\u5831\nhttp://linux-ip.net/html/routing-tables.html\nhttp://linux-ip.net/html/tools-ip-address.html#tb-tools-ip-addr-scope\nhttp://linux-ip.net/html/tools-ip-route.html\n#1. \u306f\u3058\u3081\u306b\nifconfig\u3001route\u3001netstat\u3001arp\u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u306fRHEL7/CentOS7\u3067\u306f\u6700\u5c0f\u69cb\u6210\u3067\u306f\u5c0e\u5165\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u3053\u308c\u3089\u306e\u30b3\u30de\u30f3\u30c9\u306f\u5ec3\u6b62\u4e88\u5b9a\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u4ee3\u308f\u308a\u306bip\u30b3\u30de\u30f3\u30c9\u3084ss\u30b3\u30de\u30f3\u30c9\u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001ip\u30b3\u30de\u30f3\u30c9\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u65b9\u6cd5\u306f\u3088\u304f\u7d39\u4ecb\u3055\u308c\u3066\u3044\u3066\u3082\u3001\u305d\u3082\u305d\u3082ip\u30b3\u30de\u30f3\u30c9\u7d50\u679c\u3092\u3069\u306e\u3088\u3046\u306b\u89e3\u91c8\u3059\u308b\u3079\u304d\u306a\u306e\u304b\u3092\u8aac\u660e\u3057\u3066\u3044\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u3042\u307e\u308a\u898b\u304b\u3051\u306a\u3044\u6c17\u304c\u3057\u307e\u3059\u3002\u3068\u3044\u3046\u306e\u3067\u3001\u4eca\u56de\u306f\u3088\u304f\u5229\u7528\u3059\u308bip route\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066\u30e1\u30e2\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n#2. ip route\u30b3\u30de\u30f3\u30c9\n\n- `ip route`\u306f\u7d4c\u8def\u60c5\u5831\u3092\u51fa\u529b\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002\u4ee3\u308f\u308a\u306b`ip r`\u3067\u3082\u826f\u3044\u3002\n- \u30de\u30cb\u30e5\u30a2\u30eb\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u306f\u3001`man ip route`\n- Linux Kernel\u306f\u8907\u6570\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001local\u3068\u3044\u3046Linux Kernel\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\u3068\u3001main\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u304c\u5229\u7528\u3055\u308c\u3066\u304a\u308a\u3001\u4ed6\u306b\u3082\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3002\uff08default\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u7a7a\u3063\u307d\u306a\u306e\u3067\u901a\u5e38\u306f\u6c17\u306b\u3057\u306a\u304f\u3066\u3088\u3044\uff09\u3002\n    - \u5229\u7528\u8005\u304c\u64cd\u4f5c\u3059\u308b\u306e\u306f\u4e3b\u306bmain\u30c6\u30fc\u30d6\u30eb\u3002`ip route`\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u4f55\u3082\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u3001main\u30c6\u30fc\u30d6\u30eb\u3092\u51fa\u529b\u3059\u308b\u3002\n    - \u4ed6\u306etable\u3092\u51fa\u529b\u3057\u305f\u3051\u308c\u3070\u3001`ip route show table xxx`\u306e\u3088\u3046\u306b\u6307\u5b9a\u3059\u308b\u3002\n\n```text:\u540c\u3058\u7d50\u679c\n# ip r\ndefault via 161.202.86.1 dev eth1\n10.0.0.0/8 via 10.132.2.193 dev eth0\n10.132.2.192/26 dev eth0  proto kernel  scope link  src 10.132.2.207\n161.26.0.0/16 via 10.132.2.193 dev eth0\n161.202.86.0/27 dev eth1  proto kernel  scope link  src 161.202.86.5\n169.254.0.0/16 dev eth0  scope link  metric 1002\n169.254.0.0/16 dev eth1  scope link  metric 1003\n\n# ip r show table main\ndefault via 161.202.86.1 dev eth1\n10.0.0.0/8 via 10.132.2.193 dev eth0\n10.132.2.192/26 dev eth0  proto kernel  scope link  src 10.132.2.207\n161.26.0.0/16 via 10.132.2.193 dev eth0\n161.202.86.0/27 dev eth1  proto kernel  scope link  src 161.202.86.5\n169.254.0.0/16 dev eth0  scope link  metric 1002\n169.254.0.0/16 dev eth1  scope link  metric 1003\n```\n\n- via xx.xx.xx.xx: \u30cd\u30af\u30b9\u30c8\u30db\u30c3\u30d7\u306e\u30eb\u30fc\u30bf\u30fc\n- dev: \u51fa\u529b\u30c7\u30d0\u30a4\u30b9\n- proto kernel: \uff08\u30e6\u30fc\u30b6\u30fc\u304c\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u305f\u306e\u3067\u306f\u306a\u304f\uff09\u30ab\u30fc\u30cd\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3057\u305f\u7d4c\u8def\u3002\u4f8b\u3048\u3070\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001eth0\u3084eth1\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u969b\u306b\u304a\u3044\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u306a\u304f\u3066\u3082\u5404IP\u30a2\u30c9\u30ec\u30b9\u304c\u6240\u5c5e\u3059\u308b\u305d\u308c\u305e\u308c\u306e\u540c\u4e00\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3078\u306e\u7d4c\u8def\u306f\u5f53\u7136\u5b58\u5728\u3059\u308b\u3002\n- scope: destination\uff08\u9001\u4fe1\u5148\uff09\u3092\u6307\u5b9a\n    - scope link: \u76f4\u63a5unicast/broadcast\u306b\u3066\u901a\u4fe1\u3059\u308b\u7d4c\u8def\u3002\u81ea\u8eab\u304c\u5c5e\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7b49\u304c\u8a72\u5f53\u3002\n    - scope host: \u81ea\u5206\u81ea\u8eab\u3078\u306e\u7d4c\u8def\n    - scope global: \uff08\u4ed6\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3078\u306e\uff09\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u7d4c\u7531\u3057\u305funicast\u901a\u4fe1\u306b\u3088\u308b\u7d4c\u8def\u3002scope\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u306a\u3044\u6642\u3082\u3053\u3061\u3089\u306b\u8a72\u5f53\u3002\n- src: source\uff08\u9001\u4fe1\u5143\uff09\u3092\u6307\u5b9a\n- 169.254.0.0/16: \u3044\u308f\u3086\u308b\u30ea\u30f3\u30af\u30ed\u30fc\u30ab\u30eb\u30a2\u30c9\u30ec\u30b9\u3002DHCP\u304c\u5229\u7528\u3067\u304d\u306a\u3044\u969b\u306b\u3001\u5185\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7528\u306b\u66ab\u5b9a\u7684\u306b\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3092\u610f\u56f3\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\u3002\u30b5\u30fc\u30d0\u30fc\u7528\u9014\u3067\u306f\u4e0d\u8981\u306a\u305f\u3081\u3001`/etc/sysconfig/network`\u3067`NOZEROCONF=yes`\u3092\u8a2d\u5b9a\u3057\u3066\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3002[wikipedia\u306a\u3069\u3067\u306e\u89e3\u8aac](https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF#.E3.83.AA.E3.83.B3.E3.82.AF.E3.83.AD.E3.83.BC.E3.82.AB.E3.83.AB.E3.82.A2.E3.83.89.E3.83.AC.E3.82.B9)\u3068\u304b\u3001[\u3053\u3053](http://www.arearesearch.co.jp/learn/ip/10.html)\u3092\u53c2\u7167\u3002\n\n```text:local\u30c6\u30fc\u30d6\u30eb\u306e\u51fa\u529b\n# ip r show table local\nbroadcast 10.132.2.192 dev eth0  proto kernel  scope link  src 10.132.2.207\nlocal 10.132.2.207 dev eth0  proto kernel  scope host  src 10.132.2.207\nbroadcast 10.132.2.255 dev eth0  proto kernel  scope link  src 10.132.2.207\nbroadcast 127.0.0.0 dev lo  proto kernel  scope link  src 127.0.0.1\nlocal 127.0.0.0/8 dev lo  proto kernel  scope host  src 127.0.0.1\nlocal 127.0.0.1 dev lo  proto kernel  scope host  src 127.0.0.1\nbroadcast 127.255.255.255 dev lo  proto kernel  scope link  src 127.0.0.1\nbroadcast 161.202.86.0 dev eth1  proto kernel  scope link  src 161.202.86.5\nlocal 161.202.86.5 dev eth1  proto kernel  scope host  src 161.202.86.5\nbroadcast 161.202.86.31 dev eth1  proto kernel  scope link  src 161.202.86.5\n```\n\n- local\u30c6\u30fc\u30d6\u30eb\u306flocal\u30a2\u30c9\u30ec\u30b9\u3068broadcast\u30a2\u30c9\u30ec\u30b9\u3078\u306e\u7d4c\u8def\u304b\u3089\u69cb\u6210\u3055\u308c\u308b\u3002\u5148\u8ff0\u306e\u3068\u304a\u308a\u3001local\u30c6\u30fc\u30d6\u30eb\u306fkernel\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u304a\u308a\u3001\u5168\u884c\u3068\u3082`proto kernel`\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304b\u3089\u3082\u305d\u306e\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n    - local: interface\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u305f\u969b\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u81ea\u5206\u81ea\u8eab\u3078\u306e\u7d4c\u8def\u3002\n    - broadcast: interface\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u305f\u969b\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308bbroadcast\u3078\u306e\u7d4c\u8def\u3002\n\n```text:\u5168\u30c6\u30fc\u30d6\u30eb\u306e\u51fa\u529b\n# ip r show table all\ndefault via 161.202.86.1 dev eth1\n10.0.0.0/8 via 10.132.2.193 dev eth0\n10.132.2.192/26 dev eth0  proto kernel  scope link  src 10.132.2.207\n161.26.0.0/16 via 10.132.2.193 dev eth0\n161.202.86.0/27 dev eth1  proto kernel  scope link  src 161.202.86.5\n169.254.0.0/16 dev eth0  scope link  metric 1002\n169.254.0.0/16 dev eth1  scope link  metric 1003\nbroadcast 10.132.2.192 dev eth0  table local  proto kernel  scope link  src 10.132.2.207\nlocal 10.132.2.207 dev eth0  table local  proto kernel  scope host  src 10.132.2.207\nbroadcast 10.132.2.255 dev eth0  table local  proto kernel  scope link  src 10.132.2.207\nbroadcast 127.0.0.0 dev lo  table local  proto kernel  scope link  src 127.0.0.1\nlocal 127.0.0.0/8 dev lo  table local  proto kernel  scope host  src 127.0.0.1\nlocal 127.0.0.1 dev lo  table local  proto kernel  scope host  src 127.0.0.1\nbroadcast 127.255.255.255 dev lo  table local  proto kernel  scope link  src 127.0.0.1\nbroadcast 161.202.86.0 dev eth1  table local  proto kernel  scope link  src 161.202.86.5\nlocal 161.202.86.5 dev eth1  table local  proto kernel  scope host  src 161.202.86.5\nbroadcast 161.202.86.31 dev eth1  table local  proto kernel  scope link  src 161.202.86.5\nunreachable ::/96 dev lo  metric 1024  error -113\nunreachable ::ffff:0.0.0.0/96 dev lo  metric 1024  error -113\nunreachable 2002:a00::/24 dev lo  metric 1024  error -113\nunreachable 2002:7f00::/24 dev lo  metric 1024  error -113\nunreachable 2002:a9fe::/32 dev lo  metric 1024  error -113\nunreachable 2002:ac10::/28 dev lo  metric 1024  error -113\nunreachable 2002:c0a8::/32 dev lo  metric 1024  error -113\nunreachable 2002:e000::/19 dev lo  metric 1024  error -113\nunreachable 3ffe:ffff::/32 dev lo  metric 1024  error -113\nfe80::/64 dev eth0  proto kernel  metric 256\nfe80::/64 dev eth1  proto kernel  metric 256\nunreachable default dev lo  table unspec  proto kernel  metric 4294967295  error -101\nlocal ::1 dev lo  table local  proto none  metric 0\nlocal fe80::458:d5ff:fe6a:9a08 dev lo  table local  proto none  metric 0\nlocal fe80::482:4fff:fe85:836d dev lo  table local  proto none  metric 0\nff00::/8 dev eth0  table local  metric 256\nff00::/8 dev eth1  table local  metric 256\nunreachable default dev lo  table unspec  proto kernel  metric 4294967295  error -101\n```\n\n#3. RPDB\u60c5\u5831\u306e\u78ba\u8a8d\n\u666e\u901a\u306fmain\u30c6\u30fc\u30d6\u30eb\u3050\u3089\u3044\u3057\u304b\u69cb\u6210\u3057\u306a\u3044\u306e\u3060\u304c\u3001\u904e\u53bb\u306b\u3069\u3046\u3057\u3066\u3082\u30d1\u30b1\u30c3\u30c8\u306e\u6319\u52d5\u306b\u7d0d\u5f97\u3067\u304d\u306a\u3044\u74b0\u5883\u304c\u3042\u308a\u3001\u8abf\u67fb\u3057\u305f\u7d50\u679c\u4ed6\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u3082\u3042\u3063\u305f\u306e\u3067\u3001\u521d\u898b\u306e\u74b0\u5883\u3067\u306f\u5ff5\u306e\u305f\u3081\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u826f\u3044\u3002\n\n- local\u30c6\u30fc\u30d6\u30eb\u3084main\u30c6\u30fc\u30d6\u30eb\u4ee5\u5916\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u306f\u3001`ip rule`\u3092\u5b9f\u884c\u3059\u308b\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u3001RPDB\uff08Routing Policy Database\uff09\u306e\u4e00\u89a7\u304c\u78ba\u8a8d\u53ef\u80fd\u3002\n- local\u306f0\u756a\u306b\u3001main\u306f32766\u756a\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\n- \u756a\u53f7\u304c\u5c0f\u3055\u3044\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u3001\u9806\u306b\u8a55\u4fa1\u3055\u308c\u308b\u3002\n\n```text:RPDB\u60c5\u5831\n# ip rule\n0:      from all lookup local\n32766:  from all lookup main\n32767:  from all lookup default\n```\n\n\n#4. routel\u30b3\u30de\u30f3\u30c9\nroutel\u30b3\u30de\u30f3\u30c9\u306froute\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u7d50\u679c\u3092\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3057\u3066\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3002\n\u3082\u3057\u3053\u3061\u3089\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5165\u3063\u3066\u3044\u305f\u3089\u3001routel\u306e\u65b9\u304c\u898b\u3084\u3059\u3044\u304b\u3082\u3002\n\n```text:routel\u30b3\u30de\u30f3\u30c9\n# which routel\n/usr/sbin/routel\n\n# routel main\n         target            gateway          source    proto    scope    dev tbl\n        default       161.202.86.1                                     eth1\n      10.0.0.0/ 8     10.132.2.193                                     eth0\n  10.132.2.192/ 26                    10.132.2.207   kernel     link   eth0\n    161.26.0.0/ 16    10.132.2.193                                     eth0\n  161.202.86.0/ 27                    161.202.86.5   kernel     link   eth1\n   169.254.0.0/ 16                                              link   eth0\n   169.254.0.0/ 16                                              link   eth1\n\n# routel\n         target            gateway          source    proto    scope    dev tbl\n        default       161.202.86.1                                     eth1\n      10.0.0.0/ 8     10.132.2.193                                     eth0\n  10.132.2.192/ 26                    10.132.2.207   kernel     link   eth0\n    161.26.0.0/ 16    10.132.2.193                                     eth0\n  161.202.86.0/ 27                    161.202.86.5   kernel     link   eth1\n   169.254.0.0/ 16                                              link   eth0\n   169.254.0.0/ 16                                              link   eth1\n   10.132.2.192          broadcast    10.132.2.207   kernel     link   eth0 local\n   10.132.2.207              local    10.132.2.207   kernel     host   eth0 local\n   10.132.2.255          broadcast    10.132.2.207   kernel     link   eth0 local\n      127.0.0.0          broadcast       127.0.0.1   kernel     link     lo local\n     127.0.0.0/ 8            local       127.0.0.1   kernel     host     lo local\n      127.0.0.1              local       127.0.0.1   kernel     host     lo local\n127.255.255.255          broadcast       127.0.0.1   kernel     link     lo local\n   161.202.86.0          broadcast    161.202.86.5   kernel     link   eth1 local\n   161.202.86.5              local    161.202.86.5   kernel     host   eth1 local\n  161.202.86.31          broadcast    161.202.86.5   kernel     link   eth1 local\n            ::/ 96     unreachable                                       lo\n::ffff:0.0.0.0/ 96     unreachable                                       lo\n    2002:a00::/ 24     unreachable                                       lo\n   2002:7f00::/ 24     unreachable                                       lo\n   2002:a9fe::/ 32     unreachable                                       lo\n   2002:ac10::/ 28     unreachable                                       lo\n   2002:c0a8::/ 32     unreachable                                       lo\n   2002:e000::/ 19     unreachable                                       lo\n   3ffe:ffff::/ 32     unreachable                                       lo\n        fe80::/ 64                                   kernel            eth0\n        fe80::/ 64                                   kernel            eth1\n        default        unreachable                   kernel              lo unspec\n            ::1              local                     none              lo local\nfe80::458:d5ff:fe6a:9a08              local                     none              lo local\nfe80::482:4fff:fe85:836d              local                     none              lo local\n        ff00::/ 8                                                      eth0 local\n        ff00::/ 8                                                      eth1 local\n        default        unreachable                   kernel              lo unspec\n\n```\n\n#\u53c2\u8003\u60c5\u5831\nhttp://linux-ip.net/html/routing-tables.html\nhttp://linux-ip.net/html/tools-ip-address.html#tb-tools-ip-addr-scope\nhttp://linux-ip.net/html/tools-ip-route.html\n \n", "tags": ["ShinobiLayer", "IP\u30a2\u30c9\u30ec\u30b9", "\u30cd\u30c3\u30c8\u30ef\u30fc\u30af", "Linux", "CentOS"]}