{"context": "Nextremer Advent Calendar 2016 \u306e8\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u672c\u8a18\u4e8b\u306f\u30013\u65e5\u76ee\u306e\u8a18\u4e8b\u300c3\u6642\u9593\u3067\u81ea\u52d5\u4f5c\u66f2\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b\u300d\u306e\u7d9a\u7de8\u306b\u306a\u308a\u307e\u3059\u3002\nWeb Audio API \u3068\u4e26\u3093\u3067\u5f37\u529b\u306a API \u306b Web MIDI API \u304c\u3042\u308a\u307e\u3059\u3002Web MIDI API \u306f\u3001MIDI (Musical Instrument Digital Interface) \u3068\u3088\u3070\u308c\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u7528\u3044\u3066 Web \u30d6\u30e9\u30a6\u30b6\u3068 MIDI \u6a5f\u5668\u3068\u306e\u9593\u3067\u901a\u4fe1\u3092\u884c\u3046\u305f\u3081\u306e API \u3067\u3059\u3002\n\u672c\u8a18\u4e8b\u3067\u306f Web MIDI API \u3092\u5229\u7528\u3057\u3066\u30013\u65e5\u76ee\u306e\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u97f3\u304c\u9cf4\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u3001DAW \u4e0a\u3067\u97f3\u304c\u9cf4\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u66f8\u304d\u63db\u3048\u3066\u307f\u307e\u3059\u3002\nDAW \u306b\u843d\u3068\u3057\u8fbc\u3080\u30e1\u30ea\u30c3\u30c8\u306f\u6b21\u306e2\u70b9\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u751f\u6210\u3055\u308c\u305f\u66f2\u3092\u4fdd\u5b58\u3067\u304d\u308b\n\u97f3\u8272\u306e\u8abf\u6574\u304c\u3057\u3084\u3059\u3044\uff08\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30b7\u30f3\u30bb\u304c\u4f7f\u3048\u308b\uff09\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u304b\u3089 DAW \u306b MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\u306b\u306f\n\u300c\u4eee\u60f3 MIDI \u30dd\u30fc\u30c8\u300d\u3092\u4f7f\u3063\u3066\u3001Web \u30d6\u30e9\u30a6\u30b6\u304b\u3089 DAW \u3078 MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6e21\u3057\u307e\u3059\u3002\u5177\u4f53\u7684\u306a\u65b9\u6cd5\u306f\u6b21\u306e\u8a18\u4e8b\u306b\u307e\u3068\u3081\u3066\u3042\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\nWeb MIDI API \u306b\u3088\u308b Web \u30a2\u30d7\u30ea\u3068 DAW \u306e\u9023\u643a\n\nMIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\n3\u65e5\u76ee\u306e\u8a18\u4e8b\u306e\u30c7\u30e26\u3092\u3082\u3068\u306b\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nindex.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>\u81ea\u52d5\u4f5c\u66f2 \u30c7\u30e2</title>\n</head>\n<body>\n    <h1>3\u6642\u9593\u3067\u81ea\u52d5\u4f5c\u66f2\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b</h1>\n    <p>\n        <label for=\"output_selector\">MIDI Output Port: </label>\n        <select name=\"output_selector\" id=\"output_selector\"></select>\n    </p>\n    <p>\n        <label for=\"bpm\">BPM</label>\n        <input type=\"number\" id=\"bpm_field\" value=\"120\"/>\n    </p>\n    <p>\n        <button id=\"play_button\">Play</button>\n    </p>\n    <script src=\"index.js\"></script>\n</body>\n</html>\n\n\n\nindex.js\n// Setting\n\nlet bpm = 120;\n\nlet barLength = 2; // \u4e00\u5c0f\u7bc0\u5f53\u305f\u308a\u306e\u79d2\u6570\nlet beatLength = barLength / 4; // \u4e00\u62cd\u5f53\u305f\u308a\u306e\u79d2\u6570\n\nlet timer = null;\n\n// BPM \u3092\u8abf\u7bc0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\nfunction updateBpm(newBpm) {\n    bpm = newBpm;\n    barLength = 4 * 60 / bpm;\n    beatLength = barLength / 4;\n}\n\nfunction play() {\n    // Play \u30dc\u30bf\u30f3\u3092\u62bc\u3059\u5ea6\u306b\u6f14\u594f\u3092\u521d\u671f\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\n    if (timer) {\n        clearInterval(timer);\n    }\n\n    const barGen = nextBar(0.5);\n\n    // 1\u5c0f\u7bc0\u3054\u3068\u306b\u65b0\u305f\u306a note \u3092\u751f\u6210\n    timer = setInterval(() => {\n        barGen.next();\n    }, barLength * 1000);\n}\n\nfunction* nextBar(time) {\n    const chordGen = nextChord();\n\n    while (1) {\n        const {root, type} = chordGen.next().value;\n\n        // \u30e1\u30ed\u30c7\u30a3\n        for (let j = 0; j < 4; ++j) {\n            note(0, beatLength * j, randGet(chordNotes(root, type)) + 12, beatLength);\n        }\n\n        // \u30b3\u30fc\u30c9\n        chord(root, type, barLength);\n\n        yield;\n    }\n}\n\nfunction* nextChord() {\n    const rootTable = {\n        C: 60, D: 62, E: 64, F: 65, G: 67, A: 69, B: 71\n    };\n    const chordProgs = [\n        'Cmajor Eminor7 Fmajor G7',\n        'Fmajor G7 Eminor7 Aminor',\n        'Aminor Fmajor Gmajor Cmajor',\n        'Fmajor Eminor7 Dminor7 Cmajor',\n        'Cmajor Gmajor Aminor Eminor Fmajor Eminor Fmajor Gmajor',\n    ].map(x => x.split(' ').map(y => {\n        return {\n            root: rootTable[y[0]],\n            type: y.substr(1)\n        };\n    }));\n\n    while (1) {\n        yield* randGet(chordProgs);\n    }\n}\n\nfunction note(channel, offset, nn, dur) {\n    // note on \u306e\u767b\u9332\n    setTimeout(() => {\n        output.send([channel + 0x90, nn, 100]);\n    }, offset * 1000);\n\n    // note off \u306e\u767b\u9332\n    setTimeout(() => {\n        output.send([channel + 0x90, nn, 0]);\n    }, (offset + dur) * 1000 - 10);     // \u6b21\u306e on \u304c off \u3088\u308a\u3082\u5148\u3092\u8d8a\u3055\u306a\u3044\u3088\u3046\u306b -10\n}\n\nfunction chordNotes(root, type) {\n    const ds = {\n        'major':   [0, 4, 7],\n        'minor':   [0, 3, 7],\n        '7':       [0, 4, 7, 10],\n        'minor7':  [0, 3, 7, 10],\n    }[type];\n    return ds.map((x) => x + root);\n}\n\nfunction chord(root, type, dur) {\n    for (const nn of chordNotes(root, type))\n        note(1, 0, nn, dur);\n}\n\nfunction randGet(arr) {\n    return arr[Math.random() * arr.length | 0];\n}\n\n\n// Event Handling\n\nfunction getSelectedOutput(selector) {\n    const index = selector.selectedIndex;\n    const portId = selector[index].value;\n    return midiOutputs.get(portId);\n};\n\nconst outputSelector = document.getElementById('output_selector');\nconst bpmField = document.getElementById('bpm_field');\nconst playButton = document.getElementById('play_button');\n\noutputSelector.addEventListener('change', () => {\n    output = getSelectedOutput(outputSelector);\n});\n\nbpmField.addEventListener('input', () => {\n    updateBpm(Number.parseInt(bpmField.value));\n})\n\nplayButton.addEventListener('click', () => {\n    play();\n});\n\n\n// MIDI Access\n\nlet midiOutputs = [];\nlet output = null;\n\nnavigator.requestMIDIAccess()\n    .then(midiAccess => {\n        midiOutputs = midiAccess.outputs;\n        for (const input of midiOutputs.values()) {\n            const optionEl = document.createElement('option');\n            optionEl.text = input.name;\n            optionEl.value = input.id;\n            outputSelector.add(optionEl);\n        }\n        output = getSelectedOutput(outputSelector);\n    });\n\n\n\u3053\u3053\u3067\u306f\u3001MIDI channel 1 \u304b\u3089\u30e1\u30ed\u30c7\u30a3\u3001channel 2 \u304b\u3089\u30b3\u30fc\u30c9 \uff08\u25cbChord \u00d7Code\u3002\u3084\u3084\u3053\u3057\u3044\uff09\u306e MIDI \u30ce\u30fc\u30c8\u304c\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n3\u6642\u9593\u30af\u30aa\u30ea\u30c6\u30a3\u306a\u306e\u3067\u3001 MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6642\u9593\u7ba1\u7406\u304c\u307e\u305a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u53b3\u5bc6\u306a\u6642\u9593\u7ba1\u7406\u3092\u3059\u308b\u306b\u306f\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b \u306e\u300cWeb MIDI\u306b\u307e\u3064\u308f\u308b\u6642\u523b\u300d\u306e\u8aac\u660e\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u4f59\u529b\u304c\u3042\u308c\u3070\u4e0a\u8a18\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\uff09\n\u307e\u305f\u3001\u30bd\u30fc\u30b9\u5f8c\u534a\u90e8\u5206\u3067\u3044\u308d\u3044\u308d\u3068\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f \u524d\u8ff0\u306e\u8a18\u4e8b \u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u3092\u307b\u307c\u305d\u306e\u307e\u307e\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\nDAW \u3067\u97f3\u3092\u9cf4\u3089\u3059\n\u3053\u3053\u307e\u3067\u3067\u304d\u305f\u3089\u3001\u5b9f\u969b\u306b DAW \u3067\u97f3\u3092\u9cf4\u3089\u3057\u3066\u307f\u307e\u3059\uff08\u203b\u5f53\u7136\u3067\u3059\u304c\u3001DAW \u3068\u4eee\u60f3 MIDI \u30dd\u30fc\u30c8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff09\u3002\n\u30c7\u30e2\u30da\u30fc\u30b8 \uff08Chrome \u6700\u65b0\u7248 \u63a8\u5968\uff09\n\u307e\u305a\u306f\u3001\u6b21\u306e\u624b\u9806\u3067\u97f3\u3092\u9cf4\u3089\u3059\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\n\n DAW \u306e\u74b0\u5883\u8a2d\u5b9a\u3067\u3001\u4eee\u60f3 MIDI \u30dd\u30fc\u30c8\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n DAW \u4e0a\u30672\u3064\u306e MIDI \u30c8\u30e9\u30c3\u30af\u3092\u4f5c\u6210\u3059\u308b\n \u5404\u30c8\u30e9\u30c3\u30af\u306e MIDI Input \u306b\u30d6\u30e9\u30a6\u30b6\u5074\u306e MIDI Output \u3068\u540c\u4e00\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3059\u308b\n 1\u3064\u3081\u306e\u30c8\u30e9\u30c3\u30af\u306e MIDI channel \u3092 1 \u306b\u3057\u30012\u3064\u3081\u306e\u30c8\u30e9\u30c3\u30af\u306e MIDI channel \u3092 2 \u306b\u3059\u308b\n\n\n\u3053\u308c\u3067\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\u30d6\u30e9\u30a6\u30b6\u4e0a\u306e Play \u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nDAW \u306b MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u3089\u308c\u3066\u304d\u307e\u3057\u305f\u3002\n\u9332\u97f3\u3082\u3053\u306e\u901a\u308a\u53ef\u80fd\u3067\u3059\uff08\u8d85\u305a\u308c\u3066\u3044\u308b\u3051\u3069\uff01\uff01\uff09\u3002\n\n\u8a18\u5ff5\u306b\u3001\u81ea\u52d5\u4f5c\u66f2\u30d7\u30ed\u30b0\u30e9\u30e0\u3055\u3093\u306b1\u66f2\u4f5c\u3063\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002\n\u30c7\u30e2\u30bd\u30f3\u30b0\n\n\u7d42\u308f\u308a\u306b\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304f\u306e\u306f3\u6642\u9593\u3082\u304b\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u66f2\u3092\u66f8\u304d\u51fa\u3057\u305f\u308a\u3001\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u305f\u308910\u6642\u9593\u306f\u304b\u304b\u308a\u307e\u3057\u305f\u3002\n[Nextremer Advent Calendar 2016](http://qiita.com/advent-calendar/2016/nextremer) \u306e8\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u672c\u8a18\u4e8b\u306f\u30013\u65e5\u76ee\u306e\u8a18\u4e8b\u300c[3\u6642\u9593\u3067\u81ea\u52d5\u4f5c\u66f2\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b](http://qiita.com/carrotflakes/items/31a470d5da08cf40742b)\u300d\u306e\u7d9a\u7de8\u306b\u306a\u308a\u307e\u3059\u3002\n\nWeb Audio API \u3068\u4e26\u3093\u3067\u5f37\u529b\u306a API \u306b __Web MIDI API__ \u304c\u3042\u308a\u307e\u3059\u3002Web MIDI API \u306f\u3001MIDI (Musical Instrument Digital Interface) \u3068\u3088\u3070\u308c\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u7528\u3044\u3066 Web \u30d6\u30e9\u30a6\u30b6\u3068 MIDI \u6a5f\u5668\u3068\u306e\u9593\u3067\u901a\u4fe1\u3092\u884c\u3046\u305f\u3081\u306e API \u3067\u3059\u3002\n\n\u672c\u8a18\u4e8b\u3067\u306f Web MIDI API \u3092\u5229\u7528\u3057\u3066\u30013\u65e5\u76ee\u306e\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u97f3\u304c\u9cf4\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u3001DAW \u4e0a\u3067\u97f3\u304c\u9cf4\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u66f8\u304d\u63db\u3048\u3066\u307f\u307e\u3059\u3002\nDAW \u306b\u843d\u3068\u3057\u8fbc\u3080\u30e1\u30ea\u30c3\u30c8\u306f\u6b21\u306e2\u70b9\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n- \u751f\u6210\u3055\u308c\u305f\u66f2\u3092\u4fdd\u5b58\u3067\u304d\u308b\n- \u97f3\u8272\u306e\u8abf\u6574\u304c\u3057\u3084\u3059\u3044\uff08\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30b7\u30f3\u30bb\u304c\u4f7f\u3048\u308b\uff09\n\n\n## Web \u30d6\u30e9\u30a6\u30b6\u304b\u3089 DAW \u306b MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\u306b\u306f\n\n\u300c\u4eee\u60f3 MIDI \u30dd\u30fc\u30c8\u300d\u3092\u4f7f\u3063\u3066\u3001Web \u30d6\u30e9\u30a6\u30b6\u304b\u3089 DAW \u3078 MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6e21\u3057\u307e\u3059\u3002\u5177\u4f53\u7684\u306a\u65b9\u6cd5\u306f\u6b21\u306e\u8a18\u4e8b\u306b\u307e\u3068\u3081\u3066\u3042\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n[Web MIDI API \u306b\u3088\u308b Web \u30a2\u30d7\u30ea\u3068 DAW \u306e\u9023\u643a](http://qiita.com/tanikawa/items/1a820f662791077e5df7)\n\n\n## MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\n\n3\u65e5\u76ee\u306e\u8a18\u4e8b\u306e\u30c7\u30e26\u3092\u3082\u3068\u306b\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```html:index.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>\u81ea\u52d5\u4f5c\u66f2 \u30c7\u30e2</title>\n</head>\n<body>\n    <h1>3\u6642\u9593\u3067\u81ea\u52d5\u4f5c\u66f2\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b</h1>\n    <p>\n        <label for=\"output_selector\">MIDI Output Port: </label>\n        <select name=\"output_selector\" id=\"output_selector\"></select>\n    </p>\n    <p>\n        <label for=\"bpm\">BPM</label>\n        <input type=\"number\" id=\"bpm_field\" value=\"120\"/>\n    </p>\n    <p>\n        <button id=\"play_button\">Play</button>\n    </p>\n    <script src=\"index.js\"></script>\n</body>\n</html>\n```\n\n```js:index.js\n// Setting\n\nlet bpm = 120;\n\nlet barLength = 2; // \u4e00\u5c0f\u7bc0\u5f53\u305f\u308a\u306e\u79d2\u6570\nlet beatLength = barLength / 4; // \u4e00\u62cd\u5f53\u305f\u308a\u306e\u79d2\u6570\n\nlet timer = null;\n\n// BPM \u3092\u8abf\u7bc0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\nfunction updateBpm(newBpm) {\n    bpm = newBpm;\n    barLength = 4 * 60 / bpm;\n    beatLength = barLength / 4;\n}\n\nfunction play() {\n    // Play \u30dc\u30bf\u30f3\u3092\u62bc\u3059\u5ea6\u306b\u6f14\u594f\u3092\u521d\u671f\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\n    if (timer) {\n        clearInterval(timer);\n    }\n\n    const barGen = nextBar(0.5);\n\n    // 1\u5c0f\u7bc0\u3054\u3068\u306b\u65b0\u305f\u306a note \u3092\u751f\u6210\n    timer = setInterval(() => {\n        barGen.next();\n    }, barLength * 1000);\n}\n\nfunction* nextBar(time) {\n    const chordGen = nextChord();\n\n    while (1) {\n        const {root, type} = chordGen.next().value;\n\n        // \u30e1\u30ed\u30c7\u30a3\n        for (let j = 0; j < 4; ++j) {\n            note(0, beatLength * j, randGet(chordNotes(root, type)) + 12, beatLength);\n        }\n\n        // \u30b3\u30fc\u30c9\n        chord(root, type, barLength);\n\n        yield;\n    }\n}\n\nfunction* nextChord() {\n    const rootTable = {\n        C: 60, D: 62, E: 64, F: 65, G: 67, A: 69, B: 71\n    };\n    const chordProgs = [\n        'Cmajor Eminor7 Fmajor G7',\n        'Fmajor G7 Eminor7 Aminor',\n        'Aminor Fmajor Gmajor Cmajor',\n        'Fmajor Eminor7 Dminor7 Cmajor',\n        'Cmajor Gmajor Aminor Eminor Fmajor Eminor Fmajor Gmajor',\n    ].map(x => x.split(' ').map(y => {\n        return {\n            root: rootTable[y[0]],\n            type: y.substr(1)\n        };\n    }));\n\n    while (1) {\n        yield* randGet(chordProgs);\n    }\n}\n\nfunction note(channel, offset, nn, dur) {\n    // note on \u306e\u767b\u9332\n    setTimeout(() => {\n        output.send([channel + 0x90, nn, 100]);\n    }, offset * 1000);\n\n    // note off \u306e\u767b\u9332\n    setTimeout(() => {\n        output.send([channel + 0x90, nn, 0]);\n    }, (offset + dur) * 1000 - 10);     // \u6b21\u306e on \u304c off \u3088\u308a\u3082\u5148\u3092\u8d8a\u3055\u306a\u3044\u3088\u3046\u306b -10\n}\n\nfunction chordNotes(root, type) {\n    const ds = {\n        'major':   [0, 4, 7],\n        'minor':   [0, 3, 7],\n        '7':       [0, 4, 7, 10],\n        'minor7':  [0, 3, 7, 10],\n    }[type];\n    return ds.map((x) => x + root);\n}\n\nfunction chord(root, type, dur) {\n    for (const nn of chordNotes(root, type))\n        note(1, 0, nn, dur);\n}\n\nfunction randGet(arr) {\n    return arr[Math.random() * arr.length | 0];\n}\n\n\n// Event Handling\n\nfunction getSelectedOutput(selector) {\n    const index = selector.selectedIndex;\n    const portId = selector[index].value;\n    return midiOutputs.get(portId);\n};\n\nconst outputSelector = document.getElementById('output_selector');\nconst bpmField = document.getElementById('bpm_field');\nconst playButton = document.getElementById('play_button');\n\noutputSelector.addEventListener('change', () => {\n    output = getSelectedOutput(outputSelector);\n});\n\nbpmField.addEventListener('input', () => {\n    updateBpm(Number.parseInt(bpmField.value));\n})\n\nplayButton.addEventListener('click', () => {\n    play();\n});\n\n\n// MIDI Access\n\nlet midiOutputs = [];\nlet output = null;\n\nnavigator.requestMIDIAccess()\n    .then(midiAccess => {\n        midiOutputs = midiAccess.outputs;\n        for (const input of midiOutputs.values()) {\n            const optionEl = document.createElement('option');\n            optionEl.text = input.name;\n            optionEl.value = input.id;\n            outputSelector.add(optionEl);\n        }\n        output = getSelectedOutput(outputSelector);\n    });\n```\n\n\u3053\u3053\u3067\u306f\u3001MIDI channel 1 \u304b\u3089\u30e1\u30ed\u30c7\u30a3\u3001channel 2 \u304b\u3089\u30b3\u30fc\u30c9 \uff08\u25cbChord \u00d7Code\u3002\u3084\u3084\u3053\u3057\u3044\uff09\u306e MIDI \u30ce\u30fc\u30c8\u304c\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n~~3\u6642\u9593\u30af\u30aa\u30ea\u30c6\u30a3\u306a\u306e\u3067\u3001~~ MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6642\u9593\u7ba1\u7406\u304c\u307e\u305a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u53b3\u5bc6\u306a\u6642\u9593\u7ba1\u7406\u3092\u3059\u308b\u306b\u306f\u3001[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://qiita.com/toyoshim/items/98f11b74ccd60af34859) \u306e\u300cWeb MIDI\u306b\u307e\u3064\u308f\u308b\u6642\u523b\u300d\u306e\u8aac\u660e\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u4f59\u529b\u304c\u3042\u308c\u3070\u4e0a\u8a18\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\uff09\n\u307e\u305f\u3001\u30bd\u30fc\u30b9\u5f8c\u534a\u90e8\u5206\u3067\u3044\u308d\u3044\u308d\u3068\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f [\u524d\u8ff0\u306e\u8a18\u4e8b](http://qiita.com/tanikawa/items/1a820f662791077e5df7) \u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u3092\u307b\u307c\u305d\u306e\u307e\u307e\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n## DAW \u3067\u97f3\u3092\u9cf4\u3089\u3059\n\n\u3053\u3053\u307e\u3067\u3067\u304d\u305f\u3089\u3001\u5b9f\u969b\u306b DAW \u3067\u97f3\u3092\u9cf4\u3089\u3057\u3066\u307f\u307e\u3059\uff08\u203b\u5f53\u7136\u3067\u3059\u304c\u3001DAW \u3068\u4eee\u60f3 MIDI \u30dd\u30fc\u30c8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff09\u3002\n\n[\u30c7\u30e2\u30da\u30fc\u30b8](http://tanikawa04.github.io/auto-composer-for-daw/) \uff08Chrome \u6700\u65b0\u7248 \u63a8\u5968\uff09\n\n\u307e\u305a\u306f\u3001\u6b21\u306e\u624b\u9806\u3067\u97f3\u3092\u9cf4\u3089\u3059\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\n\n1.  DAW \u306e\u74b0\u5883\u8a2d\u5b9a\u3067\u3001\u4eee\u60f3 MIDI \u30dd\u30fc\u30c8\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n2.  DAW \u4e0a\u30672\u3064\u306e MIDI \u30c8\u30e9\u30c3\u30af\u3092\u4f5c\u6210\u3059\u308b\n3.  \u5404\u30c8\u30e9\u30c3\u30af\u306e MIDI Input \u306b\u30d6\u30e9\u30a6\u30b6\u5074\u306e MIDI Output \u3068\u540c\u4e00\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3059\u308b\n4.  1\u3064\u3081\u306e\u30c8\u30e9\u30c3\u30af\u306e MIDI channel \u3092 1 \u306b\u3057\u30012\u3064\u3081\u306e\u30c8\u30e9\u30c3\u30af\u306e MIDI channel \u3092 2 \u306b\u3059\u308b\n\n![auto-composer-1.png](https://qiita-image-store.s3.amazonaws.com/0/19511/3cf77ae9-b9a8-b692-4487-2730155501af.png)\n\n\u3053\u308c\u3067\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\u30d6\u30e9\u30a6\u30b6\u4e0a\u306e Play \u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n![auto-composer-2.png](https://qiita-image-store.s3.amazonaws.com/0/19511/72a01e90-cf5e-efe2-4169-0fd1b88f83c0.png)\n\nDAW \u306b MIDI \u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u3089\u308c\u3066\u304d\u307e\u3057\u305f\u3002\n\u9332\u97f3\u3082\u3053\u306e\u901a\u308a\u53ef\u80fd\u3067\u3059\uff08\u8d85\u305a\u308c\u3066\u3044\u308b\u3051\u3069\uff01\uff01\uff09\u3002\n![auto-composer-3.png](https://qiita-image-store.s3.amazonaws.com/0/19511/4a9bc34d-01ae-b984-e0f9-3983f799044a.png)\n\n\n\u8a18\u5ff5\u306b\u3001\u81ea\u52d5\u4f5c\u66f2\u30d7\u30ed\u30b0\u30e9\u30e0\u3055\u3093\u306b1\u66f2\u4f5c\u3063\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002\n\n[\u30c7\u30e2\u30bd\u30f3\u30b0](https://drive.google.com/file/d/0B9XSCxcsRs9jdTVteHB1azV5ak0/view?usp=sharing)\n\n\n## \u7d42\u308f\u308a\u306b\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304f\u306e\u306f3\u6642\u9593\u3082\u304b\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u66f2\u3092\u66f8\u304d\u51fa\u3057\u305f\u308a\u3001\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u305f\u308910\u6642\u9593\u306f\u304b\u304b\u308a\u307e\u3057\u305f\u3002\n", "tags": ["HTML5", "WebMIDIAPI", "JavaScript"]}