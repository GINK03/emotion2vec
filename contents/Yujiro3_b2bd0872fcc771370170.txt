{"context": " More than 1 year has passed since last update.Groonga\u306e\u30bd\u30fc\u30b9\u306b\u5165\u3063\u3066\u3044\u308b\u7ba1\u7406\u30da\u30fc\u30b8\u3092\u4f7f\u7528\nGroonga\u7ba1\u7406\u30da\u30fc\u30b8\n\nindex.php\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nGroonga\u306ePHP\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPHP\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u53d7\u3051\u53d6\u308a\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\nindex.php\n$gdb = new Groonga('localhost', 10043);\n\n/* \u30ea\u30af\u30a8\u30b9\u30c8URL\u304b\u3089\u30b3\u30de\u30f3\u30c9\u30af\u30a8\u30ea\u3092\u6574\u5f62 */\n$param = '';\n$query = $_SERVER['REQUEST_URI'];\n$pos   = strrpos($query, '?');\nif (false !== $pos) {\n    $param = substr($query, $pos);\n    $query = substr($query, 0, $pos);\n}\n\n/* \u30af\u30a8\u30ea\u9001\u4fe1 */\n$start = microtime(true);\n$response = $gdb->query($query . '.json'.$param, 1);\n$end = microtime(true);\n\n/* [HEADER, BODY]\u5f62\u5f0f\u306b\u6574\u5f62 */\n$result = array(\n    array(\n        0,\n        microtime(true),\n        $end - $start\n    ),\n    $response\n);\n\n/* \u30b3\u30f3\u30c6\u30f3\u30c8\u30bf\u30a4\u30d7\u306e\u9001\u4fe1 */\nheader(\"Content-Type: application/json; charset=utf-8\");\nheader('X-Content-Type-Options: nosniff');\n\n/* JSON\u51fa\u529b */\nif (empty($_GET['callback'])){\n    echo json_encode($result);\n} else {\n    echo $_GET['callback'].'('.json_encode($result).')';\n}\n\nnginx\u8a2d\u5b9a\nserver {\n    server_name sheeps.me;\n\n    root /usr/share/sheeps.me/www;\n    index index.html index.php;\n\n    location / {\n        try_files $uri $uri/ /index.php?$args;\n    }\n\n    location ~ \\.php$ {\n       fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n       # NOTE: You should have \"cgi.fix_pathinfo = 0;\" in php.ini\n\n       # With php5-fpm:\n       fastcgi_pass unix:/var/run/php5-fpm.sock;\n       fastcgi_index index.php;\n       include fastcgi_params;\n    }\n\n    # serve static files directly\n    location ~* ^.+.(jpg|jpeg|gif|css|png|js|ico|html|xml|bmp|swf|wmv)$ {\n        root /usr/share/sheeps.me/www;\n        access_log off;\n        expires 30d;\n    }\n\n    location ~ /\\.ht {\n        deny  all;\n    }\n}\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306bindex.php\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n/d/status \u306a\u3069\u306eURL\u3092\u53d6\u5f97\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3078\u6574\u5f62\u3057\u307e\u3059\u3002\n\n\u30ad\u30e3\u30d7\u30c1\u30e3\n\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u51fa\u6765\u307e\u3057\u305f\u3002\nGroonga\u306e\u30bd\u30fc\u30b9\u306b\u5165\u3063\u3066\u3044\u308b\u7ba1\u7406\u30da\u30fc\u30b8\u3092\u4f7f\u7528\n\n[Groonga\u7ba1\u7406\u30da\u30fc\u30b8](https://github.com/groonga/groonga/tree/master/data/html/admin)\n\n![001.png](https://qiita-image-store.s3.amazonaws.com/0/56661/fb59c4b1-c2a9-a271-a19b-d43f99f2bca4.png)\n\nindex.php\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n# Groonga\u306ePHP\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n[PHP\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0](http://qiita.com/Yujiro3/items/e5ea98139f3ee58d46f9)\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u53d7\u3051\u53d6\u308a\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\n\n[index.php](https://gist.github.com/Yujiro3/c4965e11cbcb2c07d9e1)\n\n````php\n$gdb = new Groonga('localhost', 10043);\n\n/* \u30ea\u30af\u30a8\u30b9\u30c8URL\u304b\u3089\u30b3\u30de\u30f3\u30c9\u30af\u30a8\u30ea\u3092\u6574\u5f62 */\n$param = '';\n$query = $_SERVER['REQUEST_URI'];\n$pos   = strrpos($query, '?');\nif (false !== $pos) {\n    $param = substr($query, $pos);\n    $query = substr($query, 0, $pos);\n}\n\n/* \u30af\u30a8\u30ea\u9001\u4fe1 */\n$start = microtime(true);\n$response = $gdb->query($query . '.json'.$param, 1);\n$end = microtime(true);\n\n/* [HEADER, BODY]\u5f62\u5f0f\u306b\u6574\u5f62 */\n$result = array(\n    array(\n        0,\n        microtime(true),\n        $end - $start\n    ),\n    $response\n);\n\n/* \u30b3\u30f3\u30c6\u30f3\u30c8\u30bf\u30a4\u30d7\u306e\u9001\u4fe1 */\nheader(\"Content-Type: application/json; charset=utf-8\");\nheader('X-Content-Type-Options: nosniff');\n\n/* JSON\u51fa\u529b */\nif (empty($_GET['callback'])){\n    echo json_encode($result);\n} else {\n    echo $_GET['callback'].'('.json_encode($result).')';\n}\n````\n\n**nginx\u8a2d\u5b9a**\n\n````\nserver {\n    server_name sheeps.me;\n\n    root /usr/share/sheeps.me/www;\n    index index.html index.php;\n\n    location / {\n        try_files $uri $uri/ /index.php?$args;\n    }\n\n    location ~ \\.php$ {\n       fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n       # NOTE: You should have \"cgi.fix_pathinfo = 0;\" in php.ini\n\n       # With php5-fpm:\n       fastcgi_pass unix:/var/run/php5-fpm.sock;\n       fastcgi_index index.php;\n       include fastcgi_params;\n    }\n\n    # serve static files directly\n    location ~* ^.+.(jpg|jpeg|gif|css|png|js|ico|html|xml|bmp|swf|wmv)$ {\n        root /usr/share/sheeps.me/www;\n        access_log off;\n        expires 30d;\n    }\n\n    location ~ /\\.ht {\n        deny  all;\n    }\n}\n````\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306bindex.php\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n/d/status \u306a\u3069\u306eURL\u3092\u53d6\u5f97\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3078\u6574\u5f62\u3057\u307e\u3059\u3002\n\n# \u30ad\u30e3\u30d7\u30c1\u30e3\n\n![002.png](https://qiita-image-store.s3.amazonaws.com/0/56661/ed8cfe83-677b-4d65-9634-80dd7fc7f043.png)\n\n![003.png](https://qiita-image-store.s3.amazonaws.com/0/56661/f80ec49f-34b2-ff8c-f660-bab64e775634.png)\n\n![004.png](https://qiita-image-store.s3.amazonaws.com/0/56661/bfa0d430-2d33-b8dd-801f-60e4666f0d80.png)\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u51fa\u6765\u307e\u3057\u305f\u3002\n", "tags": ["groonga", "PHP"]}