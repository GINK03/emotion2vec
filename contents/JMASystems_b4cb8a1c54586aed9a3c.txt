{"context": "\u4eca\u56de\u306fBeacapp\u3092\u4f7f\u3063\u305fAndroid\u30a2\u30d7\u30ea\u958b\u767a\u306b\u3064\u3044\u3066\u3001\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\niOS\u7de8\u306f\u3053\u3061\u3089\u3002\n\n\u74b0\u5883\u6e96\u5099\n\u4eca\u56de\u306e\u958b\u767a\u306b\u5fc5\u8981\u306a\u3082\u306e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n\u30d3\u30fc\u30ad\u30e3\u30c3\u30d7\u306e\u30a2\u30ab\u30a6\u30f3\u30c8(\uff13\u30f6\u6708\u7121\u6599)\nAndroid (OS 4.3\u4ee5\u4e0a)\nBeacon\u7aef\u672b\u307e\u305f\u306f\u3001iPhone(\u767a\u4fe1\u7aef\u672b\u3068\u3057\u3066\u4f7f\u3044\u307e\u3059)\nBeacappSDK for Android 1.2.1\nMac (OS X EL Capitan)\n\n\nAndroid Studio 2.1.1\n\n\n\n\n\u30d3\u30fc\u30ad\u30e3\u30c3\u30d7\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u3001\u30a4\u30d9\u30f3\u30c8\u767b\u9332\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\nBeacapp\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u308b\uff08\u6e96\u5099\u7de8\uff09\n\nAndroid\u30a2\u30d7\u30ea\u3078\u306e\u7d44\u307f\u8fbc\u307f\n\u30a2\u30d7\u30ea\u3092\u7d44\u307f\u8fbc\u3080\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\u65e2\u5b58\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\u4eca\u56de\u306f\u3001\u65b0\u898f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u4eca\u56de\u306eAndroid\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089\u306b\u7f6e\u3044\u3066\u3042\u308a\u307e\u3059\u3002\nBeacapp Android Sample - Github\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nMac\u304b\u3089Android Studio\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n[Start a new Android Studio project]\u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u9069\u5f53\u306b\u30a2\u30d7\u30ea\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n[Phone and Tablet] \u3092\u9078\u629e\u3057\u3001[API Lebel] 4.3\u4ee5\u4e0a\u306b\u3057\u307e\u3059\u3002\n\n[Empty Activity] \u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\u9069\u5f53\u306bActivity\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u306f\u5b8c\u6210\u3067\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bBeacappSDK\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\nGithub\u304b\u3089BeacappSDK\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nBeacappSDK for Android -Github\n\u5fc5\u8981\u306a\u306e\u306f\u3001BeacappSDKforAndroid\u30d5\u30a9\u30eb\u30c0\u5185\u306e.jar\u30d5\u30a1\u30a4\u30eb\u3060\u3051\u3067\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3089\u3001Android\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3057\u3087\u3046\u3002\n\u8868\u793a\u3092[Project]\u30d3\u30e5\u30fc\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\u3042\u3068\u306f\u3001[libs]\u30d5\u30a9\u30eb\u30c0\u306b\u30c9\u30e9\u30c3\u30b0&\u30c9\u30ed\u30c3\u30d7\u3067\u7d42\u308f\u308a\u3002\n\n\n\u305d\u306e\u4ed6\u306e\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\n[build.gradle]\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n2\u7a2e\u985e\u3042\u308a\u307e\u3059\u304c\u3001(Module: app)\u3068\u8a18\u8f09\u306e\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306b\u3001\u60c5\u5831\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001AWSSDK\u95a2\u9023\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\nbuild.gradle\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.4.0'\n    compile 'com.amazonaws:aws-android-sdk-core:2.2.10'\n    compile 'com.amazonaws:aws-android-sdk-ddb:2.2.10'\n    compile 'com.amazonaws:aws-android-sdk-ddb-mapper:2.2.10'\n    compile 'com.amazonaws:aws-android-sdk-kinesis:2.2.10'\n}\n\n\nGradle\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308b\u3068\u3001\u53f3\u4e0a\u306b[Sync Now]\u3068\u51fa\u3066\u304d\u307e\u3059\u306e\u3067\u3001Sync\u3057\u3066\u304a\u304d\u307e\u3057\u3088\u3046\u3002\n\u3053\u308c\u3067\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u95a2\u9023\u306e\u6e96\u5099\u306fOK\u3067\u3059\u3002\n\nJBCP\u30b5\u30fc\u30d3\u30b9\u3092\u547c\u3073\u51fa\u3059\nBeacapp\u306f\u3001\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u3082Beacon\u3092\u691c\u77e5\u3059\u308b\u305f\u3081\u306b\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u3092Manifest\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nAndrdoiManifest.xml\n <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\">\n        <activity android:name=\".MainActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n\n        <!-- Beacapp\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981 -->\n        <service\n            android:name=\"com.beacapp.service.JBCPScanService\"\n            android:exported=\"false\"\n            android:process=\":bleservice\">\n            <intent-filter>\n                <action android:name=\"com.beacapp.BLEServiceAIDL\"/>\n                <action android:name=\"com.beacapp.BLEServiceCalbackAIDL\"/>\n            </intent-filter>\n        </service>\n    </application>\n\n\n\u307e\u305f\u3001Bluetooth\u30a2\u30af\u30bb\u30b9\u3001GPS\u30a2\u30af\u30bb\u30b9\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3044\u307e\u3059\u306e\u3067\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a18\u8f09\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nAndrdoiManifest.xml\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.BLUETOOTH\" />\n    <uses-permission android:name=\"android.permission.BLUETOOTH_ADMIN\" />\n    <uses-permission android:name=\"com.google.android.providers.gsf.permission.READ_GSERVICES\" />\n\n\n\nBeacapp\u3092\u547c\u3073\u51fa\u3059\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n\u307e\u305a\u306f\u3001\u547c\u3073\u51fa\u3059\u30af\u30e9\u30b9\u3067\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\nMainActivity.java\n\n    import com.beacapp.FireEventListener;\n    import com.beacapp.JBCPException;\n    import com.beacapp.JBCPManager;\n    import com.beacapp.ShouldUpdateEventsListener;\n    import com.beacapp.UpdateEventsListener;\n\n\n\n\ncom.beacapp.FireEventListener\n\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\ncom.beacapp.JBCPException\nBeacapp\u304c\u30b9\u30ed\u30fc\u3059\u308bException\u3067\u3059\u3002\ncom.beacapp.JBCPManager\nBeacappSDK\u306e\u30b3\u30a2\u90e8\u5206\u3002\ncom.beacapp.ShouldUpdateEventsListener\n\u30a4\u30d9\u30f3\u30c8\u306e\u66f4\u65b0\u3092\u884c\u3046\u304b\u3069\u3046\u304b\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\ncom.beacapp.UpdateEventsListener\n\u30a4\u30d9\u30f3\u30c8\u66f4\u65b0\u304c\u5b8c\u4e86\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30b9\u30ad\u30e3\u30f3\u3092\u958b\u59cb\u3059\u308b\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\nJBCPManager.getManager()\u3092\u547c\u3073\u51fa\u305b\u3070\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u901a\u4fe1\u51e6\u7406\u3092\u884c\u3046\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u547c\u3073\u51fa\u3059\u5f62\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nMainActivity.java\n@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //\u901a\u4fe1\u304c\u8d70\u308b\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u306e\u51e6\u7406\u306b\u3059\u308b\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                jbcpManager = JBCPManager.getManager(MainActivity.this,\n                        \"BEACAPP_REQUEST_TOKEN\",\n                        \"BEACAPP_SECRET_KEY\",\n                        null);\n            }\n        }).start();\n    }\n\n\n\n\u5404\u7a2e\u30ea\u30b9\u30ca\u30fc\u306e\u767b\u9332\n\u30ea\u30b9\u30ca\u30fc\u3092\u305d\u308c\u305e\u308c\u751f\u6210\u3057\u3066\u3001\n\nMainActivity.java\n// \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private UpdateEventsListener updateEventsListener = new UpdateEventsListener() {\n        @Override\n        public void onProgress(int i, int i1) {\n\n        }\n\n        @Override\n        public void onFinished(JBCPException e) {\n\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private ShouldUpdateEventsListener shouldUpdateEventsListener = new ShouldUpdateEventsListener() {\n        @Override\n        public boolean shouldUpdate(Map<String, Object> map) {\n            return true;\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private FireEventListener fireEventListener = new FireEventListener() {\n        @Override\n        public void fireEvent(JSONObject jsonObject) {\n\n\n        }\n    };\n\n\n\n\u767b\u9332\u3057\u307e\u3059\u3002\n\nMainActivity.java\n//\u901a\u4fe1\u304c\u8d70\u308b\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u306e\u51e6\u7406\u306b\u3059\u308b\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                jbcpManager = JBCPManager.getManager(MainActivity.this,\n                        \"BEACAPP_REQUEST_TOKEN\",\n                        \"BEACAPP_SECRET_KEY\",\n                        null);\n                if (jbcpManager == null){\n                    return;\n                }\n                // \u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n                jbcpManager.setUpdateEventsListener(updateEventsListener);\n                jbcpManager.setShouldUpdateEventsListener(shouldUpdateEventsListener);\n                jbcpManager.setFireEventListener(fireEventListener);\n\n            }\n        }).start();\n\n\n\u6700\u5f8c\u306b\u30a4\u30d9\u30f3\u30c8\u306e\u66f4\u65b0\u3092\u8981\u6c42\u3057\u307e\u3059\u3002\n\nMainActivity.java\n                // \u30a4\u30d9\u30f3\u30c8\u3092\u66f4\u65b0\u3059\u308b\n                jbcpManager.startUpdateEvents();\n\n\n\n\u30ea\u30b9\u30ca\u30fc\u5185\u306b\u51e6\u7406\u3092\u66f8\u304f\n\u30a4\u30d9\u30f3\u30c8\u66f4\u65b0\u5b8c\u4e86\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30b9\u30ad\u30e3\u30f3\u958b\u59cb\n\nMainActivity.java\n// \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private UpdateEventsListener updateEventsListener = new UpdateEventsListener() {\n        @Override\n        public void onProgress(int i, int i1) {\n\n        }\n\n        @Override\n        public void onFinished(JBCPException e) {\n            if (e != null)\n            {\n                jbcpManager.startScan();\n            }\n        }\n    };\n\n\n\u3068\u308a\u3042\u3048\u305a\u30a4\u30d9\u30f3\u30c8\u3092\u691c\u77e5\u3057\u305f\u3089\u3001\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u3060\u3051\u306e\u51e6\u7406\n\nMainActivity.java\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private FireEventListener fireEventListener = new FireEventListener() {\n        @Override\n        public void fireEvent(JSONObject jsonObject) {\n            JSONObject action_data = jsonObject.optJSONObject(\"action_data\");\n            String action = action_data.optString(\"action\");\n\n\n            // URL\u306e\u5834\u5408\n            if(action.equals(\"jbcp_open_url\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"url\"));\n            }\n            //\u753b\u50cf\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_image\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"image\"));\n            }\n            //\u30ab\u30b9\u30bf\u30e0\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_custom_key_value\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"key_values\"));\n            }\n            //\u30c6\u30ad\u30b9\u30c8\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_text\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"text\"));\n            }\n\n        }\n    };\n\n\n\u3053\u308c\u3067\u304a\u3057\u307e\u3044\u3001\u3067\u306f\u306a\u304f\u3002\u3002\u3002\nAndroid6\u3060\u3068\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306b\u8a18\u8f09\u304c\u3042\u3063\u3066\u3082\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067\u3001\u660e\u793a\u7684\u306b\u30a2\u30e9\u30fc\u30c8\u3092\u8868\u793a\u3057\u3066\u8a8d\u8a3c\u3092\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\u6700\u7d42\u7684\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nMainActivity.java\npackage jp.co.jmas.beacappandroidsample;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Build;\nimport android.support.v4.app.ActivityCompat;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.beacapp.FireEventListener;\nimport com.beacapp.JBCPException;\nimport com.beacapp.JBCPManager;\nimport com.beacapp.ShouldUpdateEventsListener;\nimport com.beacapp.UpdateEventsListener;\n\nimport org.json.JSONObject;\n\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private JBCPManager jbcpManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n            String permissions[] = {\n                    Manifest.permission.ACCESS_COARSE_LOCATION,\n                    Manifest.permission.ACCESS_FINE_LOCATION,\n                    Manifest.permission.BLUETOOTH,\n                    Manifest.permission.BLUETOOTH_ADMIN,\n            };\n            boolean needPermission = false;\n            for (String permission : permissions) {\n                if (checkSelfPermission(permission) ==\n                        PackageManager.PERMISSION_GRANTED) {\n                } else {\n                    if (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this,\n                            permission)) {\n                        needPermission = true;\n                    } else {\n                        needPermission = true;\n                    }\n                }\n            }\n            if (needPermission) {\n                showExplanationDialog(permissions, 0);\n            } else {\n                activate();\n            }\n        }\n    }\n    private void activate()\n    {\n        //\u901a\u4fe1\u304c\u8d70\u308b\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u306e\u51e6\u7406\u306b\u3059\u308b\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    jbcpManager = JBCPManager.getManager(MainActivity.this,\n                            \"\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\",\n                            \"\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\",\n                            null);\n                } catch (JBCPException e) {\n                    return;\n                }\n\n                if (jbcpManager == null){\n                    return;\n                }\n                // \u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n                jbcpManager.setUpdateEventsListener(updateEventsListener);\n                jbcpManager.setShouldUpdateEventsListener(shouldUpdateEventsListener);\n                jbcpManager.setFireEventListener(fireEventListener);\n\n\n                // \u30a4\u30d9\u30f3\u30c8\u3092\u66f4\u65b0\u3059\u308b\n                jbcpManager.startUpdateEvents();\n            }\n        }).start();\n    }\n    private void showExplanationDialog(final String permissions[], final int requestCode) {\n        ActivityCompat.requestPermissions(MainActivity.this,\n                permissions,requestCode);\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n        if (0 == requestCode) {\n            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                activate();\n            }\n        }\n    }\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private UpdateEventsListener updateEventsListener = new UpdateEventsListener() {\n        @Override\n        public void onProgress(int i, int i1) {\n                //\u4f55\u3082\u3057\u306a\u3044\n\n        }\n\n        @Override\n        public void onFinished(JBCPException e) {\n            if (e != null)\n            {\n                jbcpManager.startScan();\n            }\n\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private ShouldUpdateEventsListener shouldUpdateEventsListener = new ShouldUpdateEventsListener() {\n        @Override\n        public boolean shouldUpdate(Map<String, Object> map) {\n            return true;\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private FireEventListener fireEventListener = new FireEventListener() {\n        @Override\n        public void fireEvent(JSONObject jsonObject) {\n            JSONObject action_data = jsonObject.optJSONObject(\"action_data\");\n            String action = action_data.optString(\"action\");\n\n\n            // URL\u306e\u5834\u5408\n            if(action.equals(\"jbcp_open_url\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"url\"));\n            }\n            //\u753b\u50cf\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_image\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"image\"));\n            }\n            //\u30ab\u30b9\u30bf\u30e0\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_custom_key_value\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"key_values\"));\n            }\n            //\u30c6\u30ad\u30b9\u30c8\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_text\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"text\"));\n            }\n\n        }\n    };  \n}\n\n\n\u3053\u308c\u3067\u3001\u5b9f\u6a5f\u30d3\u30eb\u30c9\u3059\u308c\u3070\u3001\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\n\u5b9f\u6a5f\u3067\u306e\u78ba\u8a8d\u306e\u969b\u306b\u306f\u3001Beacon\u767a\u4fe1\u30a2\u30d7\u30ea\u3092\u7528\u610f\u3057\u3066\u307e\u3059\u306e\u3067\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nBeacheck on the App Store - iTunes - Apple\n\n\u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc\n\n\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u306b\u5931\u6557\u3059\u308b\uff01\n\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u6642\u306b\u767a\u751f\u3059\u308b\u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc\u306b\u3001\u4ee5\u4e0b\u306e\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\nError Domain=BeacappDomain Code=1000 \"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc(401)\"\n\n\u3053\u308c\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b1\u30fc\u30b9\u304c\u60f3\u5b9a\u3055\u308c\u307e\u3059\u3002\n\u30fbPackageName\u304c\u9593\u9055\u3063\u3066\u3044\u308b(AndroidManifest\u5185\u306b\u8a18\u8f09)\n\u30fb\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u9593\u9055\u3063\u3066\u3044\u308b\n\u30fb\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u304c\u9593\u9055\u3063\u3066\u3044\u308b\nCMS\u306b\u767b\u9332\u3057\u305f\u5185\u5bb9\u3068\u3042\u3063\u3066\u3044\u308b\u304b\u3001\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nBeacon\u3092\u691c\u77e5\u3057\u306a\u3044\n\u30c7\u30d0\u30c3\u30b0\u7528\u3068\u3057\u3066\u3001BeaconEventListner\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\nSCAN_MODE\u30922\u306b\u3057\u3066\u3001\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3059\u308b\u3068\u691c\u77e5\u3067\u304d\u307e\u3059\u3002\n\u203b\u3042\u304f\u307e\u3067\u3082\u30c6\u30b9\u30c8\u7528\u306a\u306e\u3067\u3001\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u306f\u4f7f\u7528\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\n\nMainActivity.java\n//\u3000\u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    public BeaconEventListener beaconEventListener = new BeaconEventListener() {\n        @Override\n        public boolean targetBeaconDetected(BeaconEvent beaconEvent) {\n            // CMS\u3067\u691c\u77e5\u5bfe\u8c61\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308bBeacon\n            return false;\n        }\n\n        @Override\n        public boolean nonTargetBeaconDetected(BeaconEvent beaconEvent) {\n            // CMS\u3067\u691c\u77e5\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u306a\u3044Beacon\n            return false;\n        }\n    };\n\n\n\n\u4f55\u3082\u53cd\u5fdc\u3057\u306a\u3044\nAndroid,Beacon\u7aef\u672b\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30fb\u4f4d\u7f6e\u60c5\u5831\u306fON\u306b\u306a\u3063\u3066\u3044\u308b\u304b\n\u30fb\u4f4d\u7f6e\u60c5\u5831\u306f\u8a31\u53ef\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fbBluetooth\u306f\u8a31\u53ef\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fb\u7aef\u672b\u306e\u6545\u969c\u306a\u3069\u3067\u3001\u96fb\u6ce2\u304c\u51fa\u3066\u3044\u306a\u3044\n\nnonTargetBeaconDetected\u3060\u3051\u53cd\u5fdc\u3057\u3066\u3044\u308b\n\u30fbBeacapp\u306b\u767b\u9332\u3057\u305fBeacon\u306eUUID\u306b\u8aa4\u308a\u304c\u3042\u308b\n\ntargetBeaconDetected\u304c\u53cd\u5fdc\u3059\u308b\n\u8a2d\u5b9a\u306f\u6b63\u3057\u304f\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\u7aef\u672b\u304b\u3089\u8ddd\u96e2\u3092\u96e2\u308c\u3066\u307f\u305f\u308a\u3001\u52d5\u3044\u3066\u307f\u305f\u308a\u3001\u5c11\u3057\u5f85\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u305d\u306e\u4ed6\n\u305d\u306e\u4ed6\u3001\u304a\u56f0\u308a\u3054\u3068\u304c\u3042\u308c\u3070\u3001\u304a\u6c17\u8efd\u306b\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002\nBeacapp \u30b5\u30dd\u30fc\u30c8\u30c1\u30fc\u30e0\n\u4eca\u5f8c\u3082Beacapp\u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u958b\u767a\u306b\u3064\u3044\u3066\u3001\u3054\u7d39\u4ecb\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\n\n\n\n\u4eca\u56de\u306fBeacapp\u3092\u4f7f\u3063\u305fAndroid\u30a2\u30d7\u30ea\u958b\u767a\u306b\u3064\u3044\u3066\u3001\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n[iOS\u7de8](http://qiita.com/JMASystems/items/4726b881b27b84144f2d)\u306f\u3053\u3061\u3089\u3002\n\n## \u74b0\u5883\u6e96\u5099\n\u4eca\u56de\u306e\u958b\u767a\u306b\u5fc5\u8981\u306a\u3082\u306e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n* \u30d3\u30fc\u30ad\u30e3\u30c3\u30d7\u306e\u30a2\u30ab\u30a6\u30f3\u30c8(\uff13\u30f6\u6708\u7121\u6599)\n* Android (OS 4.3\u4ee5\u4e0a)\n* Beacon\u7aef\u672b\u307e\u305f\u306f\u3001iPhone(\u767a\u4fe1\u7aef\u672b\u3068\u3057\u3066\u4f7f\u3044\u307e\u3059)\n* BeacappSDK for Android 1.2.1\n* Mac (OS X EL Capitan)\n\t* Android Studio 2.1.1\n\n\n##\u30d3\u30fc\u30ad\u30e3\u30c3\u30d7\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u3001\u30a4\u30d9\u30f3\u30c8\u767b\u9332\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\n[Beacapp\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u308b\uff08\u6e96\u5099\u7de8\uff09](http://qiita.com/JMASystems/items/b57c2689d22a42cbe36e)\n\n\n##Android\u30a2\u30d7\u30ea\u3078\u306e\u7d44\u307f\u8fbc\u307f\n\n\u30a2\u30d7\u30ea\u3092\u7d44\u307f\u8fbc\u3080\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\u65e2\u5b58\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u4eca\u56de\u306f\u3001\u65b0\u898f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u4eca\u56de\u306eAndroid\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089\u306b\u7f6e\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n[Beacapp Android Sample - Github](https://github.com/JMASystems/Beacapp-Android-Sample)\n\n### \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nMac\u304b\u3089Android Studio\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n[Start a new Android Studio project]\u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.33.27.png](https://qiita-image-store.s3.amazonaws.com/0/130138/1cbe8766-fb83-7c33-636f-4be8e05944bc.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.33.27.png\")\n\n\u9069\u5f53\u306b\u30a2\u30d7\u30ea\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.16.png](https://qiita-image-store.s3.amazonaws.com/0/130138/6febd0ff-e33e-cbdf-4e90-c6bd9b1d8ace.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.16.png\")\n\n\n[Phone and Tablet] \u3092\u9078\u629e\u3057\u3001[API Lebel] 4.3\u4ee5\u4e0a\u306b\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.29.png](https://qiita-image-store.s3.amazonaws.com/0/130138/6e6610ce-196e-0702-4cec-409421045a8d.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.29.png\")\n\n[Empty Activity] \u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.40.png](https://qiita-image-store.s3.amazonaws.com/0/130138/a9328b4d-a18a-2b6d-01cb-1c949a2aef98.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.40.png\")\n\n\n\u6700\u5f8c\u306b\u9069\u5f53\u306bActivity\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.48.png](https://qiita-image-store.s3.amazonaws.com/0/130138/32254969-8026-0f60-b211-dbaf2673503b.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.34.48.png\")\n\n\u3053\u308c\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u306f\u5b8c\u6210\u3067\u3059\u3002\n\n\n### \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bBeacappSDK\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\n\nGithub\u304b\u3089BeacappSDK\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n[BeacappSDK for Android -Github](https://github.com/JMASystems/beacapp-sdk-android)\n\n\u5fc5\u8981\u306a\u306e\u306f\u3001BeacappSDKforAndroid\u30d5\u30a9\u30eb\u30c0\u5185\u306e.jar\u30d5\u30a1\u30a4\u30eb\u3060\u3051\u3067\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3089\u3001Android\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u8868\u793a\u3092[Project]\u30d3\u30e5\u30fc\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n<img width=\"30%\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c9.40.08.png\" src=https://qiita-image-store.s3.amazonaws.com/0/130138/30205e33-2a77-a948-f260-38bb55fdff2b.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c9.40.08.png\">\n\n\u3042\u3068\u306f\u3001[libs]\u30d5\u30a9\u30eb\u30c0\u306b\u30c9\u30e9\u30c3\u30b0&\u30c9\u30ed\u30c3\u30d7\u3067\u7d42\u308f\u308a\u3002\n<img width=\"30%\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c9.41.15.png\" src=https://qiita-image-store.s3.amazonaws.com/0/130138/ed75d26a-504b-4f43-0734-fe68082076e3.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c9.41.15.png\">\n\n\n### \u305d\u306e\u4ed6\u306e\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\n\n[build.gradle]\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n2\u7a2e\u985e\u3042\u308a\u307e\u3059\u304c\u3001(Module: app)\u3068\u8a18\u8f09\u306e\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306b\u3001\u60c5\u5831\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.37.59.png](https://qiita-image-store.s3.amazonaws.com/0/130138/7c78064f-5acb-603a-f8b5-a745bc4541e1.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 \u5348\u5f8c6.37.59.png\")\n\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001AWSSDK\u95a2\u9023\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n```build.gradle\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.4.0'\n    compile 'com.amazonaws:aws-android-sdk-core:2.2.10'\n    compile 'com.amazonaws:aws-android-sdk-ddb:2.2.10'\n    compile 'com.amazonaws:aws-android-sdk-ddb-mapper:2.2.10'\n    compile 'com.amazonaws:aws-android-sdk-kinesis:2.2.10'\n}\n```\n\nGradle\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308b\u3068\u3001\u53f3\u4e0a\u306b[Sync Now]\u3068\u51fa\u3066\u304d\u307e\u3059\u306e\u3067\u3001Sync\u3057\u3066\u304a\u304d\u307e\u3057\u3088\u3046\u3002\n\n\u3053\u308c\u3067\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u95a2\u9023\u306e\u6e96\u5099\u306fOK\u3067\u3059\u3002\n\n\n### JBCP\u30b5\u30fc\u30d3\u30b9\u3092\u547c\u3073\u51fa\u3059\n\nBeacapp\u306f\u3001\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u3082Beacon\u3092\u691c\u77e5\u3059\u308b\u305f\u3081\u306b\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u3092Manifest\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```AndrdoiManifest.xml\n <application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\">\n        <activity android:name=\".MainActivity\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.MAIN\" />\n\n                <category android:name=\"android.intent.category.LAUNCHER\" />\n            </intent-filter>\n        </activity>\n        \n        <!-- Beacapp\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981 -->\n        <service\n            android:name=\"com.beacapp.service.JBCPScanService\"\n            android:exported=\"false\"\n            android:process=\":bleservice\">\n            <intent-filter>\n                <action android:name=\"com.beacapp.BLEServiceAIDL\"/>\n                <action android:name=\"com.beacapp.BLEServiceCalbackAIDL\"/>\n            </intent-filter>\n        </service>\n    </application>\n```\n\n\n\u307e\u305f\u3001Bluetooth\u30a2\u30af\u30bb\u30b9\u3001GPS\u30a2\u30af\u30bb\u30b9\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3044\u307e\u3059\u306e\u3067\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a18\u8f09\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```AndrdoiManifest.xml\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.BLUETOOTH\" />\n    <uses-permission android:name=\"android.permission.BLUETOOTH_ADMIN\" />\n    <uses-permission android:name=\"com.google.android.providers.gsf.permission.READ_GSERVICES\" />\n```\n\n\n### Beacapp\u3092\u547c\u3073\u51fa\u3059\n\n#### \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n\n\u307e\u305a\u306f\u3001\u547c\u3073\u51fa\u3059\u30af\u30e9\u30b9\u3067\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```MainActivity.java\n\n    import com.beacapp.FireEventListener;\n    import com.beacapp.JBCPException;\n    import com.beacapp.JBCPManager;\n    import com.beacapp.ShouldUpdateEventsListener;\n    import com.beacapp.UpdateEventsListener;\n\n```\n\n* com.beacapp.FireEventListener\n\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\n\n* com.beacapp.JBCPException\nBeacapp\u304c\u30b9\u30ed\u30fc\u3059\u308bException\u3067\u3059\u3002\n\n* com.beacapp.JBCPManager\nBeacappSDK\u306e\u30b3\u30a2\u90e8\u5206\u3002\n\n* com.beacapp.ShouldUpdateEventsListener\n\u30a4\u30d9\u30f3\u30c8\u306e\u66f4\u65b0\u3092\u884c\u3046\u304b\u3069\u3046\u304b\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\n* com.beacapp.UpdateEventsListener\n\u30a4\u30d9\u30f3\u30c8\u66f4\u65b0\u304c\u5b8c\u4e86\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30b9\u30ad\u30e3\u30f3\u3092\u958b\u59cb\u3059\u308b\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#### \u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\n\nJBCPManager.getManager()\u3092\u547c\u3073\u51fa\u305b\u3070\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u901a\u4fe1\u51e6\u7406\u3092\u884c\u3046\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u547c\u3073\u51fa\u3059\u5f62\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```MainActivity.java\n@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //\u901a\u4fe1\u304c\u8d70\u308b\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u306e\u51e6\u7406\u306b\u3059\u308b\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                jbcpManager = JBCPManager.getManager(MainActivity.this,\n                        \"BEACAPP_REQUEST_TOKEN\",\n                        \"BEACAPP_SECRET_KEY\",\n                        null);\n            }\n        }).start();\n    }\n```\n\n\n#### \u5404\u7a2e\u30ea\u30b9\u30ca\u30fc\u306e\u767b\u9332\n\n\u30ea\u30b9\u30ca\u30fc\u3092\u305d\u308c\u305e\u308c\u751f\u6210\u3057\u3066\u3001\n\n```MainActivity.java\n// \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private UpdateEventsListener updateEventsListener = new UpdateEventsListener() {\n        @Override\n        public void onProgress(int i, int i1) {\n\n        }\n\n        @Override\n        public void onFinished(JBCPException e) {\n\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private ShouldUpdateEventsListener shouldUpdateEventsListener = new ShouldUpdateEventsListener() {\n        @Override\n        public boolean shouldUpdate(Map<String, Object> map) {\n            return true;\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private FireEventListener fireEventListener = new FireEventListener() {\n        @Override\n        public void fireEvent(JSONObject jsonObject) {\n\n\n        }\n    };\n\n```\n\n\u767b\u9332\u3057\u307e\u3059\u3002\n\n\n```MainActivity.java\n//\u901a\u4fe1\u304c\u8d70\u308b\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u306e\u51e6\u7406\u306b\u3059\u308b\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                jbcpManager = JBCPManager.getManager(MainActivity.this,\n                        \"BEACAPP_REQUEST_TOKEN\",\n                        \"BEACAPP_SECRET_KEY\",\n                        null);\n                if (jbcpManager == null){\n                    return;\n                }\n                // \u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n                jbcpManager.setUpdateEventsListener(updateEventsListener);\n                jbcpManager.setShouldUpdateEventsListener(shouldUpdateEventsListener);\n                jbcpManager.setFireEventListener(fireEventListener);\n\n            }\n        }).start();\n```\n\n\n\u6700\u5f8c\u306b\u30a4\u30d9\u30f3\u30c8\u306e\u66f4\u65b0\u3092\u8981\u6c42\u3057\u307e\u3059\u3002\n\n```MainActivity.java\n                // \u30a4\u30d9\u30f3\u30c8\u3092\u66f4\u65b0\u3059\u308b\n                jbcpManager.startUpdateEvents();\n```\n\n\n#### \u30ea\u30b9\u30ca\u30fc\u5185\u306b\u51e6\u7406\u3092\u66f8\u304f\n\n\u30a4\u30d9\u30f3\u30c8\u66f4\u65b0\u5b8c\u4e86\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30b9\u30ad\u30e3\u30f3\u958b\u59cb\n\n```MainActivity.java\n// \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private UpdateEventsListener updateEventsListener = new UpdateEventsListener() {\n        @Override\n        public void onProgress(int i, int i1) {\n\n        }\n\n        @Override\n        public void onFinished(JBCPException e) {\n            if (e != null)\n            {\n                jbcpManager.startScan();\n            }\n        }\n    };\n```\n\n\n\u3068\u308a\u3042\u3048\u305a\u30a4\u30d9\u30f3\u30c8\u3092\u691c\u77e5\u3057\u305f\u3089\u3001\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u3060\u3051\u306e\u51e6\u7406\n\n```MainActivity.java\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private FireEventListener fireEventListener = new FireEventListener() {\n        @Override\n        public void fireEvent(JSONObject jsonObject) {\n            JSONObject action_data = jsonObject.optJSONObject(\"action_data\");\n            String action = action_data.optString(\"action\");\n\n\n            // URL\u306e\u5834\u5408\n            if(action.equals(\"jbcp_open_url\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"url\"));\n            }\n            //\u753b\u50cf\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_image\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"image\"));\n            }\n            //\u30ab\u30b9\u30bf\u30e0\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_custom_key_value\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"key_values\"));\n            }\n            //\u30c6\u30ad\u30b9\u30c8\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_text\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"text\"));\n            }\n\n        }\n    };\n```\n\n\u3053\u308c\u3067\u304a\u3057\u307e\u3044\u3001\u3067\u306f\u306a\u304f\u3002\u3002\u3002\n\nAndroid6\u3060\u3068\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306b\u8a18\u8f09\u304c\u3042\u3063\u3066\u3082\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067\u3001\u660e\u793a\u7684\u306b\u30a2\u30e9\u30fc\u30c8\u3092\u8868\u793a\u3057\u3066\u8a8d\u8a3c\u3092\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\n\u6700\u7d42\u7684\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```MainActivity.java\npackage jp.co.jmas.beacappandroidsample;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Build;\nimport android.support.v4.app.ActivityCompat;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.beacapp.FireEventListener;\nimport com.beacapp.JBCPException;\nimport com.beacapp.JBCPManager;\nimport com.beacapp.ShouldUpdateEventsListener;\nimport com.beacapp.UpdateEventsListener;\n\nimport org.json.JSONObject;\n\nimport java.util.Map;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private JBCPManager jbcpManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n            String permissions[] = {\n                    Manifest.permission.ACCESS_COARSE_LOCATION,\n                    Manifest.permission.ACCESS_FINE_LOCATION,\n                    Manifest.permission.BLUETOOTH,\n                    Manifest.permission.BLUETOOTH_ADMIN,\n            };\n            boolean needPermission = false;\n            for (String permission : permissions) {\n                if (checkSelfPermission(permission) ==\n                        PackageManager.PERMISSION_GRANTED) {\n                } else {\n                    if (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this,\n                            permission)) {\n                        needPermission = true;\n                    } else {\n                        needPermission = true;\n                    }\n                }\n            }\n            if (needPermission) {\n                showExplanationDialog(permissions, 0);\n            } else {\n                activate();\n            }\n        }\n    }\n    private void activate()\n    {\n        //\u901a\u4fe1\u304c\u8d70\u308b\u305f\u3081\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u306e\u51e6\u7406\u306b\u3059\u308b\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    jbcpManager = JBCPManager.getManager(MainActivity.this,\n                            \"\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\",\n                            \"\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\",\n                            null);\n                } catch (JBCPException e) {\n                    return;\n                }\n\n                if (jbcpManager == null){\n                    return;\n                }\n                // \u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\n                jbcpManager.setUpdateEventsListener(updateEventsListener);\n                jbcpManager.setShouldUpdateEventsListener(shouldUpdateEventsListener);\n                jbcpManager.setFireEventListener(fireEventListener);\n\n\n                // \u30a4\u30d9\u30f3\u30c8\u3092\u66f4\u65b0\u3059\u308b\n                jbcpManager.startUpdateEvents();\n            }\n        }).start();\n    }\n    private void showExplanationDialog(final String permissions[], final int requestCode) {\n        ActivityCompat.requestPermissions(MainActivity.this,\n                permissions,requestCode);\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n        if (0 == requestCode) {\n            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                activate();\n            }\n        }\n    }\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private UpdateEventsListener updateEventsListener = new UpdateEventsListener() {\n        @Override\n        public void onProgress(int i, int i1) {\n                //\u4f55\u3082\u3057\u306a\u3044\n\n        }\n\n        @Override\n        public void onFinished(JBCPException e) {\n            if (e != null)\n            {\n                jbcpManager.startScan();\n            }\n\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private ShouldUpdateEventsListener shouldUpdateEventsListener = new ShouldUpdateEventsListener() {\n        @Override\n        public boolean shouldUpdate(Map<String, Object> map) {\n            return true;\n        }\n    };\n\n    // \u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    private FireEventListener fireEventListener = new FireEventListener() {\n        @Override\n        public void fireEvent(JSONObject jsonObject) {\n            JSONObject action_data = jsonObject.optJSONObject(\"action_data\");\n            String action = action_data.optString(\"action\");\n\n\n            // URL\u306e\u5834\u5408\n            if(action.equals(\"jbcp_open_url\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"url\"));\n            }\n            //\u753b\u50cf\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_image\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"image\"));\n            }\n            //\u30ab\u30b9\u30bf\u30e0\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_custom_key_value\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"key_values\"));\n            }\n            //\u30c6\u30ad\u30b9\u30c8\u306e\u5834\u5408\n            else if(action.equals(\"jbcp_open_text\"))\n            {\n                Log.d(\"DEBUG\",action_data.optString(\"text\"));\n            }\n\n        }\n    };  \n}\n```\n\n\n\u3053\u308c\u3067\u3001\u5b9f\u6a5f\u30d3\u30eb\u30c9\u3059\u308c\u3070\u3001\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\n\u5b9f\u6a5f\u3067\u306e\u78ba\u8a8d\u306e\u969b\u306b\u306f\u3001Beacon\u767a\u4fe1\u30a2\u30d7\u30ea\u3092\u7528\u610f\u3057\u3066\u307e\u3059\u306e\u3067\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n[Beacheck on the App Store - iTunes - Apple](https://itunes.apple.com/us/app/beacheck/id941020155?mt=8)\n\n### \u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc\n\n#### \u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u306b\u5931\u6557\u3059\u308b\uff01\n\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u6642\u306b\u767a\u751f\u3059\u308b\u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc\u306b\u3001\u4ee5\u4e0b\u306e\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\nError Domain=BeacappDomain Code=1000 \"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc(401)\"\n```\n\n\u3053\u308c\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b1\u30fc\u30b9\u304c\u60f3\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n\u30fbPackageName\u304c\u9593\u9055\u3063\u3066\u3044\u308b(AndroidManifest\u5185\u306b\u8a18\u8f09)\n\u30fb\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u9593\u9055\u3063\u3066\u3044\u308b\n\u30fb\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u304c\u9593\u9055\u3063\u3066\u3044\u308b\n\nCMS\u306b\u767b\u9332\u3057\u305f\u5185\u5bb9\u3068\u3042\u3063\u3066\u3044\u308b\u304b\u3001\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n#### Beacon\u3092\u691c\u77e5\u3057\u306a\u3044\n\n\u30c7\u30d0\u30c3\u30b0\u7528\u3068\u3057\u3066\u3001BeaconEventListner\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\nSCAN_MODE\u30922\u306b\u3057\u3066\u3001\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3059\u308b\u3068\u691c\u77e5\u3067\u304d\u307e\u3059\u3002\n\u203b\u3042\u304f\u307e\u3067\u3082\u30c6\u30b9\u30c8\u7528\u306a\u306e\u3067\u3001\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u306f\u4f7f\u7528\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\n\n```MainActivity.java\n//\u3000\u30ea\u30b9\u30ca\u30fc\u3092\u751f\u6210\n    public BeaconEventListener beaconEventListener = new BeaconEventListener() {\n        @Override\n        public boolean targetBeaconDetected(BeaconEvent beaconEvent) {\n            // CMS\u3067\u691c\u77e5\u5bfe\u8c61\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308bBeacon\n            return false;\n        }\n\n        @Override\n        public boolean nonTargetBeaconDetected(BeaconEvent beaconEvent) {\n            // CMS\u3067\u691c\u77e5\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u306a\u3044Beacon\n            return false;\n        }\n    };\n```\n\n##### \u4f55\u3082\u53cd\u5fdc\u3057\u306a\u3044\n\nAndroid,Beacon\u7aef\u672b\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30fb\u4f4d\u7f6e\u60c5\u5831\u306fON\u306b\u306a\u3063\u3066\u3044\u308b\u304b\n\u30fb\u4f4d\u7f6e\u60c5\u5831\u306f\u8a31\u53ef\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fbBluetooth\u306f\u8a31\u53ef\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fb\u7aef\u672b\u306e\u6545\u969c\u306a\u3069\u3067\u3001\u96fb\u6ce2\u304c\u51fa\u3066\u3044\u306a\u3044\n\n##### nonTargetBeaconDetected\u3060\u3051\u53cd\u5fdc\u3057\u3066\u3044\u308b\n\n\u30fbBeacapp\u306b\u767b\u9332\u3057\u305fBeacon\u306eUUID\u306b\u8aa4\u308a\u304c\u3042\u308b\n\n\n##### targetBeaconDetected\u304c\u53cd\u5fdc\u3059\u308b\n\n\u8a2d\u5b9a\u306f\u6b63\u3057\u304f\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\u7aef\u672b\u304b\u3089\u8ddd\u96e2\u3092\u96e2\u308c\u3066\u307f\u305f\u308a\u3001\u52d5\u3044\u3066\u307f\u305f\u308a\u3001\u5c11\u3057\u5f85\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n#### \u305d\u306e\u4ed6\n\u305d\u306e\u4ed6\u3001\u304a\u56f0\u308a\u3054\u3068\u304c\u3042\u308c\u3070\u3001\u304a\u6c17\u8efd\u306b\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002\n[Beacapp \u30b5\u30dd\u30fc\u30c8\u30c1\u30fc\u30e0](https://cms.beacapp.com/contact/index)\n\n\n\u4eca\u5f8c\u3082Beacapp\u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u958b\u767a\u306b\u3064\u3044\u3066\u3001\u3054\u7d39\u4ecb\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\n", "tags": ["iOS", "iBeacon", "beacon", "Android", "bluetooth"]}