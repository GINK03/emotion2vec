{"context": " More than 1 year has passed since last update.BigQuery\u306b\u306fKibana\u306e\u3088\u3046\u306a\u53ef\u8996\u5316\u30c4\u30fc\u30eb\u304c\u4ed8\u3044\u3066\u306a\u3044\u306e\u3060\u3051\u3069\u3001Google\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092\u4f7f\u3046\u3068Google Apps Script\u304b\u3089BigQuery\u306e\u30af\u30a8\u30ea\u3092\u547c\u3073\u51fa\u305b\u308b\u306e\u3067\u3001\u30b0\u30e9\u30d5\u3092\u63cf\u3044\u305f\u308a\u7c21\u5358\u306a\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u308c\u308b\u3002\u3057\u304b\u3057\u81ea\u5206\u3067Apps Script\u3092\u66f8\u304f\u306e\u3082\u9762\u5012\uff01 \u3068\u3044\u3046\u4eba\u306e\u305f\u3081\u306b\u3001\u30b3\u30d4\u30fc\u3057\u3066\u307d\u3061\u307d\u3061\u8a2d\u5b9a\u3059\u308c\u3070\u3059\u3050\u306b\u4f7f\u3048\u308bBigQuery Dashboard\u3068\u3044\u3046Google\u30b9\u30d7\u30ec\u30c3\u30c8\u30b7\u30fc\u30c8\u306e\u3072\u306a\u5f62\u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u4f7f\u3044\u65b9\u3092\u7c21\u5358\u306b\u7d39\u4ecb\u3057\u305f\u3044\u3002\n\u4f8b\u3048\u3070\u3053\u3093\u306a\u3075\u3046\u306b\u3001\u30bb\u30eb\u306bSQL\u3092\u66f8\u304f\u3068\u3001\n\n\u3053\u3093\u306a\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u3066\u3001\u5b9a\u671f\u7684\u306b\u81ea\u52d5\u66f4\u65b0\u3082\u3067\u304d\u308b\u3002Apps Script\u3092\u77e5\u3089\u306a\u304f\u3066\u3082OK\u3002\n\n\u306a\u304a\u3001BigQuery\u3092\u307e\u3060\u8a66\u3057\u305f\u3053\u3068\u306a\u3044...\u3063\u3066\u4eba\u306f\u3001\u3053\u306e\u8a18\u4e8b\u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\n\u8a2d\u5b9a\u65b9\u6cd5\n\u8a2d\u5b9a\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\u306a\u304a\u3001UI\u8868\u8a18\u306f\u82f1\u8a9e\u7248\u306eGoogle\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3042\u3057\u304b\u3089\u305a\u3002\u3002\n\n\n\u3053\u306e\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092\u958b\u304d\u3001File-Make a copy\u3092\u9078\u629e\n\u65b0\u305f\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u306eURL\u3092\u9078\u629e\u3057\u3066\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\n\nTools - Script editor... \u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\n\u30b9\u30af\u30ea\u30d7\u30c8\u30a8\u30c7\u30a3\u30bf\u3067bq_query.gs\u3092\u958b\u304f\u3002<<PLEASE PUT YOUR SPREADSHEET URL HERE>>\u3068\u3042\u308b\u90e8\u5206\u306bURL\u3092\u30da\u30fc\u30b9\u30c8\nBigQuery\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u3092<<PLEASE PUT YOUR PROJECT ID HERE>>\u306e\u90e8\u5206\u306b\u30da\u30fc\u30b9\u30c8\u3059\u308b\u3002File - Save\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3057\u3066\u4fdd\u5b58\n\nResources - Advanced Google services\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3057\u3001BigQuery API\u3092\u30aa\u30f3\u306b\u3059\u308b\n\u30c0\u30a4\u30a2\u30ed\u30b0\u4e0a\u306eGoogle Developers Console\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3002API\u30ea\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001BigQuery API\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001OFF\u304b\u3089ON\u306b\u5909\u66f4\u3059\u308b\u3002\u3059\u308b\u3068Enabled APIs\u30ea\u30b9\u30c8\u4e0a\u306bBigQuery API\u304c\u8868\u793a\u3055\u308c\u308b\n\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u9589\u3058\u3001\u30c0\u30a4\u30a2\u30ed\u30b0\u306eOK\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n\n\u30b5\u30f3\u30d7\u30eb\u30af\u30a8\u30ea\u306e\u5b9f\u884c\n\u3053\u306e\u30b7\u30fc\u30c8\u306b\u306f\u30b5\u30f3\u30d7\u30eb\u30af\u30a8\u30ea\u304c\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nBQ Queries\u30b7\u30fc\u30c8\u3092\u958b\u304f\u3002\u3053\u3053\u306b\u3042\u308bgsod_temparature_LINE\u306f\u3001\u7c73\u56fd\u306e\u904e\u53bb\u306e\u6c17\u8c61\u60c5\u5831\u30c7\u30fc\u30bf\u3092\u96c6\u8a08\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u30af\u30a8\u30ea\u3060\n\nDashboard - Run All BQ Queries\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3002\u521d\u56de\u5b9f\u884c\u6642\u306b\u306fAuthorization Required\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001Continue\u304a\u3088\u3073Accept\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\ngsod_template\u30b7\u30fc\u30c8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\u3053\u306e\u30b7\u30fc\u30c8\u3092\u958b\u3044\u3066\u30af\u30a8\u30ea\u7d50\u679c\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\nBigQuery Dashboard\u30b7\u30fc\u30c8\u3092\u958b\u3044\u3066\u3001\u30b0\u30e9\u30d5\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\n\n\u3053\u308c\u3067\u6e96\u5099\u306fOK\u3002\n\nFluentd+BigQuery\u30c7\u30e2\u3067\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u8a66\u3059\n\u3067\u306f\u3001Fluentd+BigQuery\u30c7\u30e2\u3067\u96c6\u3081\u305fnginx\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092\u53ef\u8996\u5316\u3059\u308b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046\u3002\u4ee5\u4e0b\u306e\u30af\u30a8\u30ea\u3092BQ Queries\u30b7\u30fc\u30c8\u306b\u8ffd\u52a0\u3057\u3001query name\u306faccess_log_LINE\u3001interval\u306f1\u5206\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\nSELECT\n  STRFTIME_UTC_USEC(time * 1000000, \"%Y-%m-%d %H:%M:%S\") as tstamp, \n  count(*) as rps\nFROM bq_test.access_log\nGROUP BY tstamp ORDER BY tstamp DESC LIMIT 100;\n\n\n\u81ea\u52d5\u66f4\u65b0\u306e\u8a2d\u5b9a\u624b\u9806\n\u30b0\u30e9\u30d5\u306e\u81ea\u52d5\u66f4\u65b0\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u30a8\u30c7\u30a3\u30bf\u3092\u9078\u629e\u3057\u3001Resources - Current project's triggers\u3092\u9078\u629e\n\nClick here to add one now\u3092\u30af\u30ea\u30c3\u30af\n\nRun\u30e1\u30cb\u30e5\u30fc\u304b\u3089runQueries\u3092\u9078\u3073\u3001Events\u3067\u306fTime-driven Minutes timer Every minute\u3092\u305d\u308c\u305e\u308c\u9078\u629e\u3001Save\u3092\u30af\u30ea\u30c3\u30af\n\nBQ Queries\u30b7\u30fc\u30c8\u306b\u3066 interval (min)\u30ab\u30e9\u30e0\u306b1\u3092\u30bb\u30c3\u30c8\n\n\u3053\u308c\u306b\u3088\u308a\u3001\u4e0a\u8a18\u30af\u30a8\u30ea\u304c1\u5206\u3054\u3068\u306b\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u30020\u3092\u30bb\u30c3\u30c8\u3059\u308c\u3070\u81ea\u52d5\u66f4\u65b0\u3092\u505c\u6b62\u3067\u304d\u308b\u3002\n\nApache Bench\u3067\u8ca0\u8377\u30c6\u30b9\u30c8\n\u3053\u3053\u307e\u3067\u306e\u8a2d\u5b9a\u306b\u3088\u308anginx\u306e\u30a2\u30af\u30bb\u30b9\u6570\u304c\u30b0\u30e9\u30d5\u8868\u793a\u3055\u308c\u308b\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u3077\u3061\u3077\u3061\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3082\u9762\u767d\u3044\u30b0\u30e9\u30d5\u306f\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001Mac\u3084Linux\u304b\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067Apache Bench\u3092\u8d77\u52d5\u3057\u3066\u8ca0\u8377\u3092\u304b\u3051\u3066\u307f\u308b\u3002\u306a\u304a\u3001YOUR_EXTERNAL_IP\u306e\u90e8\u5206\u306b\u306fGCE\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eExternal IP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u308c\u308b\u3002\n$ ab -c 100 -n 1000000 http://YOUR_EXTERNAL_IP/\n\nBigQuery Dashboard\u3092\u9078\u629e\u3057\u3001Dashboard - Run All BQ Queries\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3002access_log\u30b0\u30e9\u30d5\u304c\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u4e0a\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3060\u3002\u307e\u305f\u30011\u5206\u306b1\u56de\u81ea\u52d5\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3059\u308b\u3002\n\n\n\nCtrl+C\u3092\u5165\u529b\u3057\u3066Apache Bench\u3092\u505c\u6b62\u3059\u308b\u3002\n\n\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u4f7f\u3044\u65b9\n\u3053\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u304a\u3082\u306a\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n\nquery name\u3067\u6307\u5b9a\u3057\u305f\u540d\u524d\u306e\u30b7\u30fc\u30c8\u304c\u306a\u3044\u5834\u5408\u306f\u3001\u65b0\u3057\u3044\u30b7\u30fc\u30c8\u304c\u4f5c\u6210\u3055\u308c\u308b\nquery name\u304c_AREA, _BAR, _COLUMN, _LINE, _SCATTER, \u3082\u3057\u304f\u306f _TABLE\u3067\u7d42\u308f\u308b\u5834\u5408\u306f\u3001\u305d\u308c\u305e\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30b0\u30e9\u30d5\u304c\u4f5c\u6210\u3055\u308c\u308b\nquery name\u304c_AREA_STACKED, _BAR_STACKED\u3082\u3057\u304f\u306f_COLUMN_STACKED\u3067\u7d42\u308f\u308b\u5834\u5408\u306f\u3001\u30b9\u30bf\u30c3\u30af\u3055\u308c\u305f\u30b0\u30e9\u30d5\u304c\u4f5c\u6210\u3055\u308c\u308b\n\u30af\u30a8\u30ea\u306e\u6700\u5f8c\u306bLIMIT 100\u3092\u4ed8\u3051\u3001100\u884c\u4ee5\u4e0b\u306b\u5236\u9650\u3059\u308b\n\u30af\u30a8\u30ea\u7d50\u679c\u306e\u6700\u521d\u306e\u30ab\u30e9\u30e0\u306f\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3082\u3057\u304f\u306f\u65e5\u4ed8\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n\u4ee5\u4e0a\u3001BigQuery Dashboard\u306e\u4f7f\u3044\u65b9\u3092\u8aac\u660e\u3057\u305f\u3002\u82f1\u8a9e\u7248\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u4ffa\u306e\u4e0b\u624b\u306a\u82f1\u8a9e\u3092\u540c\u50da\u306e\u30d7\u30ec\u30b9\u30c8\u30f3\u304c\u3057\u3063\u304b\u308a\u76f4\u3057\u3066\u304f\u308c\u305f\u3002\u30d7\u30ec\u30b9\u30c8\u30f3\u3042\u3056\u3059\uff01\uff01\n\nDisclaimer \u3053\u306e\u8a18\u4e8b\u306f\u500b\u4eba\u7684\u306a\u3082\u306e\u3067\u3059\uff61\u3053\u3053\u3067\u8ff0\u3079\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u79c1\u306e\u500b\u4eba\u7684\u306a\u610f\u898b\u306b\u57fa\u3065\u304f\u3082\u306e\u3067\u3042\u308a\uff64\u79c1\u306e\u96c7\u7528\u8005\u306b\u306f\u95a2\u4fc2\u306f\u3042\u308a\u307e\u305b\u3093\uff61\nBigQuery\u306b\u306fKibana\u306e\u3088\u3046\u306a\u53ef\u8996\u5316\u30c4\u30fc\u30eb\u304c\u4ed8\u3044\u3066\u306a\u3044\u306e\u3060\u3051\u3069\u3001Google\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092\u4f7f\u3046\u3068[Google Apps Script\u304b\u3089BigQuery\u306e\u30af\u30a8\u30ea\u3092\u547c\u3073\u51fa\u305b\u308b](http://qiita.com/satoru_mag/items/114703d7d95b60b11c6f)\u306e\u3067\u3001\u30b0\u30e9\u30d5\u3092\u63cf\u3044\u305f\u308a\u7c21\u5358\u306a\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u308c\u308b\u3002\u3057\u304b\u3057\u81ea\u5206\u3067Apps Script\u3092\u66f8\u304f\u306e\u3082\u9762\u5012\uff01 \u3068\u3044\u3046\u4eba\u306e\u305f\u3081\u306b\u3001\u30b3\u30d4\u30fc\u3057\u3066\u307d\u3061\u307d\u3061\u8a2d\u5b9a\u3059\u308c\u3070\u3059\u3050\u306b\u4f7f\u3048\u308b[BigQuery Dashboard](https://github.com/kazunori279/bigquery-fluentd-docker-sample)\u3068\u3044\u3046Google\u30b9\u30d7\u30ec\u30c3\u30c8\u30b7\u30fc\u30c8\u306e\u3072\u306a\u5f62\u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u4f7f\u3044\u65b9\u3092\u7c21\u5358\u306b\u7d39\u4ecb\u3057\u305f\u3044\u3002\n\n\u4f8b\u3048\u3070\u3053\u3093\u306a\u3075\u3046\u306b\u3001\u30bb\u30eb\u306bSQL\u3092\u66f8\u304f\u3068\u3001\n\n![gsod_query](https://raw.githubusercontent.com/GoogleCloudPlatform/bigquery-fluentd-docker-sample/master/images/gsod_query.png)\n\n\u3053\u3093\u306a\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u3066\u3001\u5b9a\u671f\u7684\u306b\u81ea\u52d5\u66f4\u65b0\u3082\u3067\u304d\u308b\u3002Apps Script\u3092\u77e5\u3089\u306a\u304f\u3066\u3082OK\u3002\n\n![gsod_temperature](https://raw.githubusercontent.com/GoogleCloudPlatform/bigquery-fluentd-docker-sample/master/images/gsod_graph.png)\n\n\u306a\u304a\u3001BigQuery\u3092\u307e\u3060\u8a66\u3057\u305f\u3053\u3068\u306a\u3044...\u3063\u3066\u4eba\u306f\u3001[\u3053\u306e\u8a18\u4e8b](http://qiita.com/kazunori279/items/7367e725d7827e37a38f)\u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\n## \u8a2d\u5b9a\u65b9\u6cd5\n\n\u8a2d\u5b9a\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\u306a\u304a\u3001UI\u8868\u8a18\u306f\u82f1\u8a9e\u7248\u306eGoogle\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3042\u3057\u304b\u3089\u305a\u3002\u3002\n\n1. [\u3053\u306e\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8](https://docs.google.com/spreadsheets/d/1Xwk2icyXH2DmVIZC33SAs5bs012ZIt0-goyX0dZZu7s/edit)\u3092\u958b\u304d\u3001`File`-`Make a copy`\u3092\u9078\u629e\n2. \u65b0\u305f\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u306eURL\u3092\u9078\u629e\u3057\u3066\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\n3. `Tools` - `Script editor...` \u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\n4. \u30b9\u30af\u30ea\u30d7\u30c8\u30a8\u30c7\u30a3\u30bf\u3067`bq_query.gs`\u3092\u958b\u304f\u3002`<<PLEASE PUT YOUR SPREADSHEET URL HERE>>`\u3068\u3042\u308b\u90e8\u5206\u306bURL\u3092\u30da\u30fc\u30b9\u30c8\n5. BigQuery\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u3092`<<PLEASE PUT YOUR PROJECT ID HERE>>`\u306e\u90e8\u5206\u306b\u30da\u30fc\u30b9\u30c8\u3059\u308b\u3002`File` - `Save`\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3057\u3066\u4fdd\u5b58\n6. `Resources` - `Advanced Google services`\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3057\u3001`BigQuery API`\u3092\u30aa\u30f3\u306b\u3059\u308b\n7. \u30c0\u30a4\u30a2\u30ed\u30b0\u4e0a\u306e`Google Developers Console`\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3002API\u30ea\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001`BigQuery API`\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001`OFF`\u304b\u3089`ON`\u306b\u5909\u66f4\u3059\u308b\u3002\u3059\u308b\u3068`Enabled APIs`\u30ea\u30b9\u30c8\u4e0a\u306b`BigQuery API`\u304c\u8868\u793a\u3055\u308c\u308b\n8. \u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u9589\u3058\u3001\u30c0\u30a4\u30a2\u30ed\u30b0\u306e`OK`\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n## \u30b5\u30f3\u30d7\u30eb\u30af\u30a8\u30ea\u306e\u5b9f\u884c\n\n\u3053\u306e\u30b7\u30fc\u30c8\u306b\u306f\u30b5\u30f3\u30d7\u30eb\u30af\u30a8\u30ea\u304c\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n1. `BQ Queries`\u30b7\u30fc\u30c8\u3092\u958b\u304f\u3002\u3053\u3053\u306b\u3042\u308b`gsod_temparature_LINE`\u306f\u3001\u7c73\u56fd\u306e\u904e\u53bb\u306e\u6c17\u8c61\u60c5\u5831\u30c7\u30fc\u30bf\u3092\u96c6\u8a08\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u30af\u30a8\u30ea\u3060\n2. `Dashboard` - `Run All BQ Queries`\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3002\u521d\u56de\u5b9f\u884c\u6642\u306b\u306f`Authorization Required`\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001`Continue`\u304a\u3088\u3073`Accept`\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n3. `gsod_template`\u30b7\u30fc\u30c8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\u3053\u306e\u30b7\u30fc\u30c8\u3092\u958b\u3044\u3066\u30af\u30a8\u30ea\u7d50\u679c\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n4. `BigQuery Dashboard`\u30b7\u30fc\u30c8\u3092\u958b\u3044\u3066\u3001\u30b0\u30e9\u30d5\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\n\n\u3053\u308c\u3067\u6e96\u5099\u306fOK\u3002\n\n## Fluentd+BigQuery\u30c7\u30e2\u3067\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u8a66\u3059\n\n\u3067\u306f\u3001[Fluentd+BigQuery\u30c7\u30e2](http://qiita.com/kazunori279/items/7367e725d7827e37a38f)\u3067\u96c6\u3081\u305fnginx\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092\u53ef\u8996\u5316\u3059\u308b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u307f\u3088\u3046\u3002\u4ee5\u4e0b\u306e\u30af\u30a8\u30ea\u3092`BQ Queries`\u30b7\u30fc\u30c8\u306b\u8ffd\u52a0\u3057\u3001query name\u306f`access_log_LINE`\u3001interval\u306f`1`\u5206\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n\n```\nSELECT\n  STRFTIME_UTC_USEC(time * 1000000, \"%Y-%m-%d %H:%M:%S\") as tstamp, \n  count(*) as rps\nFROM bq_test.access_log\nGROUP BY tstamp ORDER BY tstamp DESC LIMIT 100;\n```\n\n### \u81ea\u52d5\u66f4\u65b0\u306e\u8a2d\u5b9a\u624b\u9806\n\n\u30b0\u30e9\u30d5\u306e\u81ea\u52d5\u66f4\u65b0\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\n1. \u30b9\u30af\u30ea\u30d7\u30c8\u30a8\u30c7\u30a3\u30bf\u3092\u9078\u629e\u3057\u3001`Resources` - `Current project's triggers`\u3092\u9078\u629e\n2. `Click here to add one now`\u3092\u30af\u30ea\u30c3\u30af\n3. `Run`\u30e1\u30cb\u30e5\u30fc\u304b\u3089`runQueries`\u3092\u9078\u3073\u3001`Events`\u3067\u306f`Time-driven` `Minutes timer` `Every minute`\u3092\u305d\u308c\u305e\u308c\u9078\u629e\u3001`Save`\u3092\u30af\u30ea\u30c3\u30af\n4. `BQ Queries`\u30b7\u30fc\u30c8\u306b\u3066 `interval (min)`\u30ab\u30e9\u30e0\u306b`1`\u3092\u30bb\u30c3\u30c8\n\n\u3053\u308c\u306b\u3088\u308a\u3001\u4e0a\u8a18\u30af\u30a8\u30ea\u304c1\u5206\u3054\u3068\u306b\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u3002`0`\u3092\u30bb\u30c3\u30c8\u3059\u308c\u3070\u81ea\u52d5\u66f4\u65b0\u3092\u505c\u6b62\u3067\u304d\u308b\u3002\n\n### Apache Bench\u3067\u8ca0\u8377\u30c6\u30b9\u30c8\n\n\u3053\u3053\u307e\u3067\u306e\u8a2d\u5b9a\u306b\u3088\u308anginx\u306e\u30a2\u30af\u30bb\u30b9\u6570\u304c\u30b0\u30e9\u30d5\u8868\u793a\u3055\u308c\u308b\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u3077\u3061\u3077\u3061\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3082\u9762\u767d\u3044\u30b0\u30e9\u30d5\u306f\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001Mac\u3084Linux\u304b\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067Apache Bench\u3092\u8d77\u52d5\u3057\u3066\u8ca0\u8377\u3092\u304b\u3051\u3066\u307f\u308b\u3002\u306a\u304a\u3001`YOUR_EXTERNAL_IP`\u306e\u90e8\u5206\u306b\u306fGCE\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eExternal IP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u308c\u308b\u3002\n\n```\n$ ab -c 100 -n 1000000 http://YOUR_EXTERNAL_IP/\n```\n\n`BigQuery Dashboard`\u3092\u9078\u629e\u3057\u3001`Dashboard` - `Run All BQ Queries`\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3002`access_log`\u30b0\u30e9\u30d5\u304c\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u4e0a\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3060\u3002\u307e\u305f\u30011\u5206\u306b1\u56de\u81ea\u52d5\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3059\u308b\u3002\n\n![access_log graph](https://raw.githubusercontent.com/GoogleCloudPlatform/bigquery-fluentd-docker-sample/master/images/access_log_graph.png)\n\n- `Ctrl+C`\u3092\u5165\u529b\u3057\u3066Apache Bench\u3092\u505c\u6b62\u3059\u308b\u3002\n\n## \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u4f7f\u3044\u65b9\n\n\u3053\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u304a\u3082\u306a\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n\n- query name\u3067\u6307\u5b9a\u3057\u305f\u540d\u524d\u306e\u30b7\u30fc\u30c8\u304c\u306a\u3044\u5834\u5408\u306f\u3001\u65b0\u3057\u3044\u30b7\u30fc\u30c8\u304c\u4f5c\u6210\u3055\u308c\u308b\n- query name\u304c`_AREA`, `_BAR`, `_COLUMN`, `_LINE`, `_SCATTER`, \u3082\u3057\u304f\u306f `_TABLE`\u3067\u7d42\u308f\u308b\u5834\u5408\u306f\u3001\u305d\u308c\u305e\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30b0\u30e9\u30d5\u304c\u4f5c\u6210\u3055\u308c\u308b\n- query name\u304c`_AREA_STACKED`, `_BAR_STACKED`\u3082\u3057\u304f\u306f`_COLUMN_STACKED`\u3067\u7d42\u308f\u308b\u5834\u5408\u306f\u3001\u30b9\u30bf\u30c3\u30af\u3055\u308c\u305f\u30b0\u30e9\u30d5\u304c\u4f5c\u6210\u3055\u308c\u308b\n- \u30af\u30a8\u30ea\u306e\u6700\u5f8c\u306b`LIMIT 100`\u3092\u4ed8\u3051\u3001100\u884c\u4ee5\u4e0b\u306b\u5236\u9650\u3059\u308b\n- \u30af\u30a8\u30ea\u7d50\u679c\u306e\u6700\u521d\u306e\u30ab\u30e9\u30e0\u306f\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3082\u3057\u304f\u306f\u65e5\u4ed8\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n\u4ee5\u4e0a\u3001BigQuery Dashboard\u306e\u4f7f\u3044\u65b9\u3092\u8aac\u660e\u3057\u305f\u3002[\u82f1\u8a9e\u7248](https://github.com/kazunori279/bigquery-fluentd-docker-sample)\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u4ffa\u306e\u4e0b\u624b\u306a\u82f1\u8a9e\u3092\u540c\u50da\u306e\u30d7\u30ec\u30b9\u30c8\u30f3\u304c\u3057\u3063\u304b\u308a\u76f4\u3057\u3066\u304f\u308c\u305f\u3002\u30d7\u30ec\u30b9\u30c8\u30f3\u3042\u3056\u3059\uff01\uff01\n\n----\nDisclaimer \u3053\u306e\u8a18\u4e8b\u306f\u500b\u4eba\u7684\u306a\u3082\u306e\u3067\u3059\uff61\u3053\u3053\u3067\u8ff0\u3079\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u79c1\u306e\u500b\u4eba\u7684\u306a\u610f\u898b\u306b\u57fa\u3065\u304f\u3082\u306e\u3067\u3042\u308a\uff64\u79c1\u306e\u96c7\u7528\u8005\u306b\u306f\u95a2\u4fc2\u306f\u3042\u308a\u307e\u305b\u3093\uff61\n", "tags": ["fluentd", "bigquery", "GoogleCloudPlatform", "GoogleAppsScript"]}