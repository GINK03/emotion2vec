{"context": " More than 1 year has passed since last update.\nhena9.rb\n#!/usr/bin/env ruby\n#http://qiita.com/Nabetani/items/84255ac417ef25069a3b\n#http://nabetani.sakura.ne.jp/hena/ord9busfare/\nSTDOUT.sync=true\nwhile gets\n    a=$_.chomp.split(':')\n    fare=[a[0].to_i]\n    fare[1]=(fare[0]/2+9)/10*10\n    fare[2]=(fare[1]/2+9)/10*10\n    a=a[1].split(',').map{|e|\n        if e[0,1]=='A'\n            ['A',{'n'=>fare[0],'p'=>0,'w'=>fare[1]}[e[1,1]]]\n        else\n            [e[0,1],{'n'=>fare[1],'p'=>0,'w'=>fare[2]}[e[1,1]]]\n        end\n    }.group_by{|e|e[0]}\n    a.default=[]\n    p (a['A'].map(&:last).reduce(:+)||0)+(a['C'].map(&:last).reduce(:+)||0)+(a['I'].map(&:last).sort[0..-1-a['A'].size*2].reduce(:+)||0)\nend\n\n\n```rb:hena9.rb\n#!/usr/bin/env ruby\n#http://qiita.com/Nabetani/items/84255ac417ef25069a3b\n#http://nabetani.sakura.ne.jp/hena/ord9busfare/\nSTDOUT.sync=true\nwhile gets\n\ta=$_.chomp.split(':')\n\tfare=[a[0].to_i]\n\tfare[1]=(fare[0]/2+9)/10*10\n\tfare[2]=(fare[1]/2+9)/10*10\n\ta=a[1].split(',').map{|e|\n\t\tif e[0,1]=='A'\n\t\t\t['A',{'n'=>fare[0],'p'=>0,'w'=>fare[1]}[e[1,1]]]\n\t\telse\n\t\t\t[e[0,1],{'n'=>fare[1],'p'=>0,'w'=>fare[2]}[e[1,1]]]\n\t\tend\n\t}.group_by{|e|e[0]}\n\ta.default=[]\n\tp (a['A'].map(&:last).reduce(:+)||0)+(a['C'].map(&:last).reduce(:+)||0)+(a['I'].map(&:last).sort[0..-1-a['A'].size*2].reduce(:+)||0)\nend\n```", "tags": ["Ruby", "\u3069\u3046\u66f8\u304f", "yhpg"]}