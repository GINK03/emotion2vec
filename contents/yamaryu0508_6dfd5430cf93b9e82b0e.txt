{"context": "\n\n\u72d9\u3044\u3068\u6982\u8981\n\n\u7d4c\u7def\nAmazon SQS\u3067\u53d7\u4fe1\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092AWS Lambda\u3067\uff08\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3057\u3066\uff09\u30d0\u30c3\u30c1\u51e6\u7406\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u6642\u306b\u3001\u6b21\u306e\u6761\u4ef6\u3092\u8003\u616e\u3057\u305f\u5b9f\u88c5\u3092\u3069\u306e\u3088\u3046\u306b\u3057\u3088\u3046\u304b\u8003\u3048\u3066\u3044\u307e\u3057\u305f\u3002\n\n1\u5ea6\u306e\u53d7\u4fe1\u3067\u53d6\u5f97\u3067\u304d\u308b\u6700\u5927\u30e1\u30c3\u30bb\u30fc\u30b8\u6570\u304c10 [SQS]\n\u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u5f8c\u306e\u51e6\u7406\u306f\u3001\u53d7\u4fe1\u3057\u3066\u306f\u51e6\u7406\u3057\u3066\u660e\u793a\u7684\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u57fa\u672c [SQS]\n1\u56de\u306e\u5b9f\u884c\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u304c\u6700\u59275\u5206[Lambda]\n\n1\u56de\u306eLambda\u306e\u8d77\u52d5\u3067SQS\u304b\u30891\u56de\u53d7\u4fe1\u3057\u306610\u30e1\u30c3\u30bb\u30fc\u30b8\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u306f\u3001Lambda\u304c\u6301\u3066\u4f59\u3059\u611f\u3058\u304c\u3057\u307e\u3059\u3057\u3001Lambda\u3092\u518d\u5e30\u547c\u3073\u51fa\u3057\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308b\u306b\u3057\u3066\u3082\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u517c\u306d\u5408\u3044\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3082\u3061\u3087\u3063\u3068\u53d6\u308a\u3065\u3089\u3044\u9078\u629e\u80a2\u3067\u3057\u305f\u3002\n\n\u5bfe\u5fdc\n\u7d50\u679c\u8003\u3048\u305f\u306e\u304c\u3001Lambda\u306e1\u56de\u306e\u5b9f\u884c\u306b\u304a\u3051\u308b\u30bf\u30a4\u30e0\u30a2\u30a6\u30c85\u5206\u4ee5\u5185\u306bSQS\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u306b\u7d10\u3064\u304f\u51e6\u7406\u3092\u3001\u7e70\u308a\u8fd4\u305b\u308b\u5206\u3060\u3051\u7e70\u308a\u8fd4\u305d\u3046\u3068\u3044\u3046\u65b9\u6cd5\u3067\u3059\u3002\n\u5341\u5206\u306b\u30de\u30fc\u30b8\u30f3\u3092\u78ba\u4fdd\u3059\u308b\u610f\u56f3\u3067\u3001\u8a2d\u5b9a\u3057\u305f\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e1\u5206\u524d\u307e\u3067\u3092\u76ee\u51e6\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u304b\u3089\u306e\u51e6\u7406\u306e\u7e70\u308a\u8fd4\u3057\u3092\u30b9\u30c8\u30c3\u30d7\u3057\u3066return\u3059\u308b\u3088\u3046\u306b\u8003\u3048\u307e\u3057\u305f\u3002\n\n\u5b9f\u88c5\n\nNode.js\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\nLambda\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u306fNode.js 4.3\u3092\u5229\u7528\u3057\u307e\u3059\u3002\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u4f8b\u306f\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002Promise\u3092\u4f7f\u3046\u3068\u826f\u3044\u611f\u3058\u306b\u66f8\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u305f\u3001Lambda\u306e\u8a2d\u5b9a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306f\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066 process.env.TIMEOUT \u304b\u3089\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\"use strict\"\n\nconst aws = require('aws-sdk')\n\n// SQS\u306e\u51e6\u7406\nconst sqs = {\n  // \u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\uff08\u30ed\u30f3\u30b0\u30dd\u30fc\u30eb\uff09\n  receiveMessages: (url) => {\n    let params = {\n      QueueUrl: url,\n      MaxNumberOfMessages: 10,\n      WaitTimeSeconds: 10,\n      VisibilityTimeout: 60\n    }\n    const sqs = new aws.SQS()\n    return sqs.receiveMessage(params).promise()\n  },\n  // \u30e1\u30c3\u30bb\u30fc\u30b8\u524a\u9664\n  deleteMessages: (url, array) => {\n    let params = {\n      Entries: array,\n      QueueUrl: url\n    }\n    const sqs = new aws.SQS()\n    return sqs.deleteMessageBatch(params).promise()\n  },\n  // \u7e70\u308a\u8fd4\u3057\u51e6\u7406\n  iterativeExe: (url, fn, _startTime) => {\n    // \u958b\u59cb\u6642\u9593\u3092\u53d6\u5f97\n    let startTime = _startTime || new Date().getTime()\n    // \u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\n    return sqs.receiveMessages(url).then(function(data) {\n      // \u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u306a\u3044\u5834\u5408\u306f\u7d42\u4e86\n      if (!data.Messages) {\n        console.log('[log] Process ends because of no cancel messages from SQS.');\n        return Promise.resolve({\n          noMessage: true\n        })\n      }\n      // \u305d\u308c\u305e\u308c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092Promise, reduce\u306b\u3088\u308b\u7e70\u308a\u8fd4\u3057\u3067\u5b9f\u884c\n      return data.Messages.reduce((promise, message) => {\n        return promise.then((result) => {\n          return fn(message)\n        });\n      }, Promise.resolve({}))\n    }).then((r) => {\n      // \u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6b8b\u308a\u3068\u7d4c\u904e\u6642\u9593\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u7e70\u308a\u8fd4\u3059\u304breturn\u3059\u308b\n      if (!r.noMessage) {\n        let time = (new Date().getTime() - startTime) / 1000 // [sec]\n        let timeout = Number(process.env.TIMEOUT) - 60\n        if (time <= timeout) {\n          console.log('[log] Passed time [s] -> ', time)\n          return sqs.iterativeExe(url, fn, startTime)\n        } else {\n          console.log('[log] Passed time [s] -> ', time)\n          console.log('[log] Execution time is over.')\n          return Promise.resolve({});\n        }\n      }\n      return Promise.resolve({});\n    })\n  }\n}\n\n// Lambda\u95a2\u6570\u5b9f\u884c\u90e8\u5206\nexports.handler = (event, context, callback) => {\n  const url = 'https://sqs.ap-northeast-1.amazonaws.com/111111111111/iteration' // SQS\u306eQueueUrl\n  sqs.iterativeExe(url, (message) => {\n    // \u30e1\u30c3\u30bb\u30fc\u30b8\u524a\u9664\u306e\u4f8b\n    let delArray = [{\n      Id: message.MessageId,\n      ReceiptHandle: message.ReceiptHandle\n    }]\n    return sqs.deleteMessages(url, delArray)\n  }).then((r) => {\n    console.log(r)\n    callback(null, 'Process completed.')\n  }).catch((e) => {\n    console.log(e)\n    callback('Error occurred.')\n  })\n}\n\nsqs.iterativeExe() \u3068\u3044\u3046\u95a2\u6570\u306b\u3057\u3066\u4e00\u822c\u5316\u3057\u3066\u3044\u307e\u3059\u3002\nsqs.iterativeExe(url, (message) => {\n    //\n    // message\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066Promise\u3092return\u3057\u3066\u304a\u304f\n    //\n})\n\n\u4eca\u56de\u306f\u3001\u3044\u304d\u306a\u308a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u51e6\u7406\u3092\u4f8b\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f message \u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u884c\u3063\u3066\u3001\u6700\u5f8c\u306b message \u3092\u524a\u9664\u3059\u308b\u3088\u3046\u306bPromise\u30c1\u30a7\u30fc\u30f3\u3092\u7d44\u3080\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\nLambda\u306e\u8a2d\u5b9a\n\n\u3053\u306e\u51e6\u7406\u306e\u7279\u6027\u4e0aLambda\u306e\u8d77\u52d5\u5468\u671f\u306f5\u5206\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\n\nprocess.env.TIMEOUT \u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u3001Lambda\u306e\u8a2d\u5b9a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306b\u5408\u308f\u305b\u3066\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\uff08\u79d2\u5358\u4f4d\u3067\u8a2d\u5b9a\uff09\u3002\n\n\n\n\n\u307e\u3068\u3081\n\u3053\u306e\u65b9\u6cd5\u304c\u3044\u3044\u3068\u3053\u308d\u306f\u3001\u4e00\u822c\u5316\u3055\u308c\u305f sqs.iterativeExe() \u306e\u4e2d\u3067\u305d\u308c\u305e\u308c\u306e message \u306b\u5bfe\u3057\u3066\u884c\u3044\u305f\u3044\u51e6\u7406\u3092Promise\u3092\u8fd4\u5374\u3059\u308b\uff08\u95a2\u6570\u306e\uff09\u5f62\u3067\u8a18\u8ff0\u3059\u308b\u3060\u3051\u3067\u3001Lambda\u306e\u5b9f\u884c\u6642\u9593\u3084\u30e1\u30c3\u30bb\u30fc\u30b8\u6570\u3068\u306e\u517c\u306d\u5408\u3044\u3068\u6c17\u306b\u305b\u305a\u306b\u3001\u53d7\u4fe1\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u5b9f\u884c\u3067\u304d\u3066\u3057\u307e\u3046\u3068\u3053\u308d\u3067\u3059\u3002\u3082\u3063\u3068\u4e0a\u624b\u3044\u65b9\u6cd5\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u3072\u3068\u307e\u305a\u826f\u3057\u3068\u3055\u305b\u3066\u3082\u3089\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n# \u72d9\u3044\u3068\u6982\u8981\n## \u7d4c\u7def\nAmazon SQS\u3067\u53d7\u4fe1\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092AWS Lambda\u3067\uff08\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3057\u3066\uff09\u30d0\u30c3\u30c1\u51e6\u7406\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u6642\u306b\u3001\u6b21\u306e\u6761\u4ef6\u3092\u8003\u616e\u3057\u305f\u5b9f\u88c5\u3092\u3069\u306e\u3088\u3046\u306b\u3057\u3088\u3046\u304b\u8003\u3048\u3066\u3044\u307e\u3057\u305f\u3002\n\n- 1\u5ea6\u306e\u53d7\u4fe1\u3067\u53d6\u5f97\u3067\u304d\u308b\u6700\u5927\u30e1\u30c3\u30bb\u30fc\u30b8\u6570\u304c10 [SQS]\n- \u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u5f8c\u306e\u51e6\u7406\u306f\u3001\u53d7\u4fe1\u3057\u3066\u306f\u51e6\u7406\u3057\u3066\u660e\u793a\u7684\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u57fa\u672c [SQS]\n- 1\u56de\u306e\u5b9f\u884c\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u304c\u6700\u59275\u5206[Lambda]\n\n1\u56de\u306eLambda\u306e\u8d77\u52d5\u3067SQS\u304b\u30891\u56de\u53d7\u4fe1\u3057\u306610\u30e1\u30c3\u30bb\u30fc\u30b8\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u306f\u3001Lambda\u304c\u6301\u3066\u4f59\u3059\u611f\u3058\u304c\u3057\u307e\u3059\u3057\u3001Lambda\u3092\u518d\u5e30\u547c\u3073\u51fa\u3057\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308b\u306b\u3057\u3066\u3082\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u517c\u306d\u5408\u3044\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3082\u3061\u3087\u3063\u3068\u53d6\u308a\u3065\u3089\u3044\u9078\u629e\u80a2\u3067\u3057\u305f\u3002\n\n## \u5bfe\u5fdc\n\u7d50\u679c\u8003\u3048\u305f\u306e\u304c\u3001Lambda\u306e1\u56de\u306e\u5b9f\u884c\u306b\u304a\u3051\u308b\u30bf\u30a4\u30e0\u30a2\u30a6\u30c85\u5206\u4ee5\u5185\u306bSQS\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u306b\u7d10\u3064\u304f\u51e6\u7406\u3092\u3001\u7e70\u308a\u8fd4\u305b\u308b\u5206\u3060\u3051\u7e70\u308a\u8fd4\u305d\u3046\u3068\u3044\u3046\u65b9\u6cd5\u3067\u3059\u3002\n\n\u5341\u5206\u306b\u30de\u30fc\u30b8\u30f3\u3092\u78ba\u4fdd\u3059\u308b\u610f\u56f3\u3067\u3001\u8a2d\u5b9a\u3057\u305f\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e1\u5206\u524d\u307e\u3067\u3092\u76ee\u51e6\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u304b\u3089\u306e\u51e6\u7406\u306e\u7e70\u308a\u8fd4\u3057\u3092\u30b9\u30c8\u30c3\u30d7\u3057\u3066return\u3059\u308b\u3088\u3046\u306b\u8003\u3048\u307e\u3057\u305f\u3002\n\n# \u5b9f\u88c5\n\n## Node.js\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\nLambda\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u306fNode.js 4.3\u3092\u5229\u7528\u3057\u307e\u3059\u3002\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u4f8b\u306f\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002Promise\u3092\u4f7f\u3046\u3068\u826f\u3044\u611f\u3058\u306b\u66f8\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u305f\u3001Lambda\u306e\u8a2d\u5b9a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306f\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066 ```process.env.TIMEOUT``` \u304b\u3089\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n```js\n\"use strict\"\n\nconst aws = require('aws-sdk')\n\n// SQS\u306e\u51e6\u7406\nconst sqs = {\n  // \u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\uff08\u30ed\u30f3\u30b0\u30dd\u30fc\u30eb\uff09\n  receiveMessages: (url) => {\n    let params = {\n      QueueUrl: url,\n      MaxNumberOfMessages: 10,\n      WaitTimeSeconds: 10,\n      VisibilityTimeout: 60\n    }\n    const sqs = new aws.SQS()\n    return sqs.receiveMessage(params).promise()\n  },\n  // \u30e1\u30c3\u30bb\u30fc\u30b8\u524a\u9664\n  deleteMessages: (url, array) => {\n    let params = {\n      Entries: array,\n      QueueUrl: url\n    }\n    const sqs = new aws.SQS()\n    return sqs.deleteMessageBatch(params).promise()\n  },\n  // \u7e70\u308a\u8fd4\u3057\u51e6\u7406\n  iterativeExe: (url, fn, _startTime) => {\n    // \u958b\u59cb\u6642\u9593\u3092\u53d6\u5f97\n    let startTime = _startTime || new Date().getTime()\n    // \u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\n    return sqs.receiveMessages(url).then(function(data) {\n      // \u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u306a\u3044\u5834\u5408\u306f\u7d42\u4e86\n      if (!data.Messages) {\n        console.log('[log] Process ends because of no cancel messages from SQS.');\n        return Promise.resolve({\n          noMessage: true\n        })\n      }\n      // \u305d\u308c\u305e\u308c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092Promise, reduce\u306b\u3088\u308b\u7e70\u308a\u8fd4\u3057\u3067\u5b9f\u884c\n      return data.Messages.reduce((promise, message) => {\n        return promise.then((result) => {\n          return fn(message)\n        });\n      }, Promise.resolve({}))\n    }).then((r) => {\n      // \u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6b8b\u308a\u3068\u7d4c\u904e\u6642\u9593\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u7e70\u308a\u8fd4\u3059\u304breturn\u3059\u308b\n      if (!r.noMessage) {\n        let time = (new Date().getTime() - startTime) / 1000 // [sec]\n        let timeout = Number(process.env.TIMEOUT) - 60\n        if (time <= timeout) {\n          console.log('[log] Passed time [s] -> ', time)\n          return sqs.iterativeExe(url, fn, startTime)\n        } else {\n          console.log('[log] Passed time [s] -> ', time)\n          console.log('[log] Execution time is over.')\n          return Promise.resolve({});\n        }\n      }\n      return Promise.resolve({});\n    })\n  }\n}\n\n// Lambda\u95a2\u6570\u5b9f\u884c\u90e8\u5206\nexports.handler = (event, context, callback) => {\n  const url = 'https://sqs.ap-northeast-1.amazonaws.com/111111111111/iteration' // SQS\u306eQueueUrl\n  sqs.iterativeExe(url, (message) => {\n    // \u30e1\u30c3\u30bb\u30fc\u30b8\u524a\u9664\u306e\u4f8b\n    let delArray = [{\n      Id: message.MessageId,\n      ReceiptHandle: message.ReceiptHandle\n    }]\n    return sqs.deleteMessages(url, delArray)\n  }).then((r) => {\n    console.log(r)\n    callback(null, 'Process completed.')\n  }).catch((e) => {\n    console.log(e)\n    callback('Error occurred.')\n  })\n}\n```\n\n```sqs.iterativeExe()``` \u3068\u3044\u3046\u95a2\u6570\u306b\u3057\u3066\u4e00\u822c\u5316\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js\nsqs.iterativeExe(url, (message) => {\n    //\n    // message\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066Promise\u3092return\u3057\u3066\u304a\u304f\n    //\n})\n```\n\n\u4eca\u56de\u306f\u3001\u3044\u304d\u306a\u308a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u51e6\u7406\u3092\u4f8b\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f ```message``` \u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u884c\u3063\u3066\u3001\u6700\u5f8c\u306b ```message``` \u3092\u524a\u9664\u3059\u308b\u3088\u3046\u306bPromise\u30c1\u30a7\u30fc\u30f3\u3092\u7d44\u3080\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n## Lambda\u306e\u8a2d\u5b9a\n- \u3053\u306e\u51e6\u7406\u306e\u7279\u6027\u4e0aLambda\u306e\u8d77\u52d5\u5468\u671f\u306f5\u5206\u4ee5\u4e0a\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\n- ```process.env.TIMEOUT``` \u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u3001Lambda\u306e\u8a2d\u5b9a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306b\u5408\u308f\u305b\u3066\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\uff08\u79d2\u5358\u4f4d\u3067\u8a2d\u5b9a\uff09\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-30 21.41.16.png](https://qiita-image-store.s3.amazonaws.com/0/43383/de077883-f153-0ced-5b6b-8b2c8ba61bd5.png)\n\n\n# \u307e\u3068\u3081\n\u3053\u306e\u65b9\u6cd5\u304c\u3044\u3044\u3068\u3053\u308d\u306f\u3001\u4e00\u822c\u5316\u3055\u308c\u305f ``` sqs.iterativeExe() ``` \u306e\u4e2d\u3067\u305d\u308c\u305e\u308c\u306e ```message``` \u306b\u5bfe\u3057\u3066\u884c\u3044\u305f\u3044\u51e6\u7406\u3092Promise\u3092\u8fd4\u5374\u3059\u308b\uff08\u95a2\u6570\u306e\uff09\u5f62\u3067\u8a18\u8ff0\u3059\u308b\u3060\u3051\u3067\u3001Lambda\u306e\u5b9f\u884c\u6642\u9593\u3084\u30e1\u30c3\u30bb\u30fc\u30b8\u6570\u3068\u306e\u517c\u306d\u5408\u3044\u3068\u6c17\u306b\u305b\u305a\u306b\u3001\u53d7\u4fe1\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u5b9f\u884c\u3067\u304d\u3066\u3057\u307e\u3046\u3068\u3053\u308d\u3067\u3059\u3002\u3082\u3063\u3068\u4e0a\u624b\u3044\u65b9\u6cd5\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u3072\u3068\u307e\u305a\u826f\u3057\u3068\u3055\u305b\u3066\u3082\u3089\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["lambda", "sqs", "Node.js", "JavaScript", "AWS"]}