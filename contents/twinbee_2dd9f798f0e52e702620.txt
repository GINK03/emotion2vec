{"context": " More than 1 year has passed since last update.Elixir\u3092\u52c9\u5f37\u3059\u308b\u306b\u306fDB\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u306e\u304c\u500b\u4eba\u7684\u306b\u4e00\u756a\u6357\u308b\u306e\u3067\u3059\u304c\u3001\u79c1\u306eDB\u8cc7\u7523\u306f\u5168\u3066Oracle\u4e0a\u306b\u3042\u308a\u307e\u3059\u3002\n\u30002015\u5e7412\u670827\u65e5\u73fe\u5728Ecto\u306fOracle\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4f55\u304b\u63a5\u7d9a\u65b9\u6cd5\u306f\u3068\u63a2\u3057\u305f\u3068\u3053\u308dErlang\u304b\u3089ODBC\u30c9\u30e9\u30a4\u30d0\u3067\u63a5\u7d9a\u53ef\u80fd\u3002\u3068\u3044\u3046\u3053\u3068\u304c\u5224\u3063\u305f\u306e\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u74b0\u5883\u306f\u4e0b\u8a18\u8a18\u4e8b\u306eDockerfile\u3092dev\u74b0\u5883\u306b\u30ea\u30d3\u30eb\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\u30fbCentOS + Erlang + Elixir + Phoenix\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3067\u4eca\u65e5\u304b\u3089\u59cb\u3081\u308bElixir on Phoenix\u5165\u9580\n12/28\u8ffd\u8a18: \u8a18\u4e8b\u4e2d\u306eDockerFile\u306e\u8a2d\u5b9a\u3067\u306fCMD\u30b3\u30de\u30f3\u30c9\u3067Phoenix\u30a2\u30d7\u30ea\u304c\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u6700\u5f8c\u306b/bin/bash\u3092\u52a0\u3048\u3066CMD\u3092\u4e0a\u66f8\u304d\u3059\u308b\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n12/29\u8ffd\u8a18: \u30b3\u30f3\u30c6\u30ca\u5185\u304b\u3089OTN\u306eInstantClient\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u306e\u306f\u56f0\u96e3\u306a\u306e\u3067\u3001-v \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30b3\u30f3\u30c6\u30ca\u30db\u30b9\u30c8\u9593\u306e\u5171\u6709\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\u3057\u3066\u30db\u30b9\u30c8\u5074\u304b\u3089\u9001\u308a\u307e\u3057\u305f\u3002\u3000\u4f8b\u3067\u306f\u53cc\u65b9iexshare\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u3002\nsudo docker run -d -p 80:4000  -v /home/myuser/iexshare:/usr/local/src/phoenix/iexshare:rw --name phoenix -t myImage /bin/bash\n\n\nOracle ODBC\u30c9\u30e9\u30a4\u30d0 for Linux\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nOTN\u304b\u3089Instant Client\u306b\u95a2\u3059\u308b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\ninstantclient-basic-linux.x64-12.1.0.2.0.zip\ninstantclient-sqlplus-linux.x64-12.1.0.2.0.zip\ninstantclient-odbc-linux.x64-12.1.0.1.0.zip\n\u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306b\u89e3\u51cd\u3057\u307e\u3059\u3002\n/opt/instantclient_12_1/\n\nlibaio\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install -y libaio\n\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a2d\u5b9a\nvi /etc/profile.d/oracle.sh\n\noracle.sh\nif [ -n $ORACLE_HOME ]\nthen\n    ORACLE_HOME=/opt/instantclient_12_1\n    export ORACLE_HOME\n    if [ -n LD_LIBRARY_PATH ] ; then\n        LD_LIBRARY_PATH=/opt/instantclient_12_1\n    else\n        LD_LIBRARY_PATH=/opt/instantclient_12_1:$LD_LIBRARY_PATH\n    fi\n    export LD_LIBRARY_PATH\n    export NLS_LANG=Japanese_Japan.AL32UTF8 #\u74b0\u5883\u306b\u5408\u308f\u305b\u308b\n    PATH=$ORACLE_HOME:$PATH\nfi\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6709\u52b9\u5316\n$ source /etc/profile.d/oracle.sh\n\n\nODBC\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u78ba\u8a8d\nodbcinst -j\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$odbcinst -j\nunixODBC 2.3.1\nDRIVERS............: /etc/odbcinst.ini\nSYSTEM DATA SOURCES: /etc/odbc.ini\nFILE DATA SOURCES..: /etc/ODBCDataSources\nUSER DATA SOURCES..: /root/.odbc.ini\nSQLULEN Size.......: 8\nSQLLEN Size........: 8\nSQLSETPOSIROW Size.: 8\n\n\u30c9\u30e9\u30a4\u30d0\u306e\u767b\u9332\nvi /etc/odbcinst.ini\n\nodbcinst.ini\n[Oracle12c]\nDescription     = ODBC for Oracle12c\nDriver          = /opt/instantclient_12_1/libsqora.so.12.1\n\n\n\u63a5\u7d9a\u60c5\u5831\u306e\u767b\u9332\nvi /etc/odbc.ini\n\nodbc.ini\n[DSNORA12c]\nDriver = Oracle12c\nServerName = 192.168.1.1:1521/ORCL #\u63a5\u7d9a\u5148\u306e\u4e00\u4f8b\n\n\nisql\u30b3\u30de\u30f3\u30c9\u3067ODBC\u63a5\u7d9a\u3092\u78ba\u8a8d\n$ isql DSNOra12c myid passwd\n+---------------------------------------+\n| Connected!                            |\n|                                       |\n| sql-statement                         |\n| help [tablename]                      |\n| quit                                  |\n|                                       |\n+---------------------------------------+\nSQL> select count(*) from user_tables;\n+-----------------------------------------+\n| COUNT(*)                                |\n+-----------------------------------------+\n| 55                                      |\n+-----------------------------------------+\nSQLRowCount returns -1\n1 rows fetched\nSQL> quit\n\n\nElixir\u304b\u3089ODBC\u63a5\u7d9a\nODBC\u306e\u958b\u59cb\n$ iex\niex(1)> :odbc.start\n:ok\n\n\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9(DSN)\u306b\u63a5\u7d9a\niex(2)> {:ok, conn} = :odbc.connect('DSN=DSNORA12c;UID=myid;PWD=passwd', \\\n...(2)> [{:scrollable_cursors, :off},{:binary_strings,:on}])\n{:ok, #PID<0.65.0>}\n\n\u63a5\u7d9aID\u3068\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u304c\u8fd4\u3063\u3066\u304d\u3066\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\uff08\u30c7\u30fc\u30bf\u306f\u81ea\u524d\u306e\u3082\u306e\u3067\u3059\u3002\u7d39\u4ecb\u306f\u7701\u304d\u307e\u3059\uff09\niex(3)> {:selected,cols,rows} = :odbc.sql_query(conn, 'SELECT TABLE_NAME,PCT_FREE,LAST_ANALYZED FROM User_tables WHERE ROWNUM<3')\n{:selected, ['TABLE_NAME', 'PCT_FREE', 'LAST_ANALYZED'],\n [{'TB_HOLIDAY', 10.0, {{2015, 5, 18}, {23, 9, 23}}},\n  {'TB_MYOFFICE', 10.0, {{2015, 5, 18}, {23, 9, 24}}}]}\n\n\u7d50\u679c\u30bb\u30c3\u30c8\u306f\u30ab\u30e9\u30e0\u540d\u304c\u30ea\u30b9\u30c8\u3001\u30c7\u30fc\u30bf\u306f\u30bf\u30d7\u30eb\u306e\u30ea\u30b9\u30c8\u306e\u3088\u3046\u3067\u3059\u3002\u65e5\u4ed8\u6642\u523b\u578b\u3082\u30bf\u30d7\u30eb\u3067\u3059\u306d\u3002\n2\u884c\u76ee\u306e\u4e00\u3064\u76ee\u306e\u30ab\u30e9\u30e0\u3092\u53d6\u308a\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n\uff08\u3082\u3063\u3068\u30a8\u30ec\u30ac\u30f3\u30c8\u306b\u53d6\u308a\u51fa\u3059\u65b9\u6cd5\u304c\u3042\u308b\u306f\u305a\u3067\u3059\u304c\u3001\u30c9\u521d\u5fc3\u8005\u306b\u3064\u304d\u3054\u5bb9\u8d66\u304f\u3060\u3055\u3044\uff09\niex(4)> elem( Enum.at(rows,1) , Enum.find_index(cols,fn col -> col=='TABLE_NAME' end))\n'TB_MYOFFICE'\n\n\n\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u306eODBC\u63a5\u7d9a\n\u5148\u307b\u3069\u63a5\u7d9a\u304c\u30d7\u30ed\u30bb\u30b9\u3067\u8fd4\u3063\u3066\u304d\u3066\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u305f\u306e\u3067\n\u3082\u3046\u5c11\u3057\u898b\u3066\u307f\u307e\u3059\u3002\n\u540d\u79f0\u767b\u9332\u6e08\u307f\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u78ba\u8a8d\niex(6)> Process.registered \n[:init, :file_server_2, :user, :application_controller, :user_drv,\n:standard_error, Logger.Supervisor, :global_group, :elixir_counter,\n:elixir_config, :elixir_sup, IEx.Config, :elixir_code_server, Logger.Watcher,\n:error_logger, :standard_error_sup, IEx.Supervisor, :kernel_safe_sup, :rex,\n:erl_prim_loader, :odbc_sup, :inet_db, :kernel_sup, :code_server,\n:global_name_server, Logger]\n\n:odbc_sup\u306a\u308b\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\nODBC\u63a5\u7d9a\u3092\u3082\u3046\u4e00\u3064\u5897\u3084\u3057\u307e\u3059\niex(2)> :odbc.connect('DSN=DSNORA12c;UID=myid;PWD=passwd', [{:scrollable_cursors, :off},{:binary_strings,:on}])\n{:ok, #PID<0.67.0>}\n\n\u30d7\u30ed\u30bb\u30b9\u304cSupervisor\u3067\u3042\u308c\u3070\u3001count_children/1\u3084which_children/1\u304c\u4f7f\u3048\u308b\u306f\u305a\u3067\u3059\u3002\nSupervisor\u3068\u4eee\u5b9a\u3057\u3066\u5b50\u30d7\u30ed\u30bb\u30b9\u306e\u69d8\u5b50\u3092\u898b\u3066\u307f\u307e\u3059\u3002\niex(8)> odbc_id=Process.whereis(:odbc_sup)\n#PID<0.63.0>\niex(9)> Supervisor.count_children(odbc_id)\n%{active: 2, specs: 1, supervisors: 0, workers: 2}\niex(10)> Supervisor.which_children(odbc_id)\n[{:undefined, #PID<0.65.0>, :worker, [:odbc]},\n{:undefined, #PID<0.67.0>, :worker, [:odbc]}]\n\n:odbc_sup\u30d7\u30ed\u30bb\u30b9\u306b\u4e0a\u8a182\u30d7\u30ed\u30bb\u30b9\u304c\u3076\u3089\u4e0b\u304c\u3063\u3066\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\u5225\u30ce\u30fc\u30c9\u3067\u3059\u304c\u3001\u540c\u69d8\u306b\uff12\u63a5\u7d9a\u7acb\u3061\u4e0a\u3052\u305f\u3082\u306e\u3092visualixir\u3067\u898b\u3066\u307f\u307e\u3059\u3002\n\n\u4e00\u76ee\u77ad\u7136\u3067\u3059\u306d\u3002\u7d20\u6674\u3089\u3057\u3044\u3002\nElixir/Erlang\u304b\u3089ORACLE\u3078\u306f\u30cd\u30a4\u30c6\u30a3\u30d6\u63a5\u7d9a\u304c\u306a\u3044\u306e\u3067\u304c\u3063\u304b\u308a\u3057\u307e\u3057\u305f\u304c\u3001ODBC\u3067\u3082\u63a5\u7d9a\u3054\u3068\u306b\u30d7\u30ed\u30bb\u30b9\u304c\u4f5c\u3089\u308c\u308b\u306e\u3092\u898b\u308b\u3068\u81ea\u524d\u3067\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30eb\u3092\u4f5c\u308b\u306e\u3082\u30cf\u30fc\u30c9\u30eb\u304c\u4f4e\u305d\u3046\u3067\u3059\u3002\nODBC\u306eAPI\u4ed5\u69d8\u3067\u3059\u304c\u3001Erlang\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3067\u8abf\u3079\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u7a0b\u5ea6\u3067\u3042\u308c\u3070\u3001Erlang\u3068Elixir\u306e\u6587\u6cd5\u306e\u5dee\u306f\u6c17\u306b\u306a\u3089\u306a\u3044\u30ec\u30d9\u30eb\u3067\u3059\u306d\u3002\n\u53c2\u8003\u3000Erlang ODBC \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\n12\u670831\u65e5\u8ffd\u8a18 \u65e5\u672c\u8a9e\u5bfe\u5fdc\u306e\u305f\u3081:odbc.connect\u306b[:binary_strings,on]\u3092\u8ffd\u52a0\u3002\nElixir\u3092\u52c9\u5f37\u3059\u308b\u306b\u306fDB\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u306e\u304c\u500b\u4eba\u7684\u306b\u4e00\u756a\u6357\u308b\u306e\u3067\u3059\u304c\u3001\u79c1\u306eDB\u8cc7\u7523\u306f\u5168\u3066Oracle\u4e0a\u306b\u3042\u308a\u307e\u3059\u3002\n\u30002015\u5e7412\u670827\u65e5\u73fe\u5728Ecto\u306fOracle\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4f55\u304b\u63a5\u7d9a\u65b9\u6cd5\u306f\u3068\u63a2\u3057\u305f\u3068\u3053\u308dErlang\u304b\u3089ODBC\u30c9\u30e9\u30a4\u30d0\u3067\u63a5\u7d9a\u53ef\u80fd\u3002\u3068\u3044\u3046\u3053\u3068\u304c\u5224\u3063\u305f\u306e\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n\u74b0\u5883\u306f\u4e0b\u8a18\u8a18\u4e8b\u306eDockerfile\u3092dev\u74b0\u5883\u306b\u30ea\u30d3\u30eb\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\u30fb[CentOS + Erlang + Elixir + Phoenix\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3067\u4eca\u65e5\u304b\u3089\u59cb\u3081\u308bElixir on Phoenix\u5165\u9580](http://qiita.com/xtity/items/969eefb83fcac9023542)\n\n12/28\u8ffd\u8a18: \u8a18\u4e8b\u4e2d\u306eDockerFile\u306e\u8a2d\u5b9a\u3067\u306fCMD\u30b3\u30de\u30f3\u30c9\u3067Phoenix\u30a2\u30d7\u30ea\u304c\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u6700\u5f8c\u306b/bin/bash\u3092\u52a0\u3048\u3066CMD\u3092\u4e0a\u66f8\u304d\u3059\u308b\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n12/29\u8ffd\u8a18: \u30b3\u30f3\u30c6\u30ca\u5185\u304b\u3089OTN\u306eInstantClient\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u306e\u306f\u56f0\u96e3\u306a\u306e\u3067\u3001-v \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30b3\u30f3\u30c6\u30ca\u30db\u30b9\u30c8\u9593\u306e\u5171\u6709\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\u3057\u3066\u30db\u30b9\u30c8\u5074\u304b\u3089\u9001\u308a\u307e\u3057\u305f\u3002\u3000\u4f8b\u3067\u306f\u53cc\u65b9iexshare\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u3002\n\n```bashsh:\nsudo docker run -d -p 80:4000  -v /home/myuser/iexshare:/usr/local/src/phoenix/iexshare:rw --name phoenix -t myImage /bin/bash\n```\n## Oracle ODBC\u30c9\u30e9\u30a4\u30d0 for Linux\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nOTN\u304b\u3089Instant Client\u306b\u95a2\u3059\u308b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\ninstantclient-basic-linux.x64-12.1.0.2.0.zip\ninstantclient-sqlplus-linux.x64-12.1.0.2.0.zip\ninstantclient-odbc-linux.x64-12.1.0.1.0.zip\n\n\u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306b\u89e3\u51cd\u3057\u307e\u3059\u3002\n/opt/instantclient_12_1/\n###libaio\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bashsh:\nyum install -y libaio\n```\n###\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a2d\u5b9a\nvi /etc/profile.d/oracle.sh\n\n```csh:oracle.sh\nif [ -n $ORACLE_HOME ]\nthen\n    ORACLE_HOME=/opt/instantclient_12_1\n    export ORACLE_HOME\n    if [ -n LD_LIBRARY_PATH ] ; then\n        LD_LIBRARY_PATH=/opt/instantclient_12_1\n    else\n        LD_LIBRARY_PATH=/opt/instantclient_12_1:$LD_LIBRARY_PATH\n    fi\n    export LD_LIBRARY_PATH\n    export NLS_LANG=Japanese_Japan.AL32UTF8 #\u74b0\u5883\u306b\u5408\u308f\u305b\u308b\n    PATH=$ORACLE_HOME:$PATH\nfi\n```\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6709\u52b9\u5316\n\n```bash:\n$ source /etc/profile.d/oracle.sh\n```\n###ODBC\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u78ba\u8a8d\nodbcinst -j\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\n$odbcinst -j\nunixODBC 2.3.1\nDRIVERS............: /etc/odbcinst.ini\nSYSTEM DATA SOURCES: /etc/odbc.ini\nFILE DATA SOURCES..: /etc/ODBCDataSources\nUSER DATA SOURCES..: /root/.odbc.ini\nSQLULEN Size.......: 8\nSQLLEN Size........: 8\nSQLSETPOSIROW Size.: 8\n```\n\u30c9\u30e9\u30a4\u30d0\u306e\u767b\u9332\nvi /etc/odbcinst.ini\n\n```ini:odbcinst.ini\n[Oracle12c]\nDescription     = ODBC for Oracle12c\nDriver          = /opt/instantclient_12_1/libsqora.so.12.1\n```\n\u63a5\u7d9a\u60c5\u5831\u306e\u767b\u9332\nvi /etc/odbc.ini\n\n```ini:odbc.ini\n[DSNORA12c]\nDriver = Oracle12c\nServerName = 192.168.1.1:1521/ORCL #\u63a5\u7d9a\u5148\u306e\u4e00\u4f8b\n```\n\nisql\u30b3\u30de\u30f3\u30c9\u3067ODBC\u63a5\u7d9a\u3092\u78ba\u8a8d\n\n```\n$ isql DSNOra12c myid passwd\n+---------------------------------------+\n| Connected!                            |\n|                                       |\n| sql-statement                         |\n| help [tablename]                      |\n| quit                                  |\n|                                       |\n+---------------------------------------+\nSQL> select count(*) from user_tables;\n+-----------------------------------------+\n| COUNT(*)                                |\n+-----------------------------------------+\n| 55                                      |\n+-----------------------------------------+\nSQLRowCount returns -1\n1 rows fetched\nSQL> quit\n```\n# Elixir\u304b\u3089ODBC\u63a5\u7d9a\nODBC\u306e\u958b\u59cb\n\n```iex:\n$ iex\niex(1)> :odbc.start\n:ok\n```\n\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9(DSN)\u306b\u63a5\u7d9a\n\n```iex: \niex(2)> {:ok, conn} = :odbc.connect('DSN=DSNORA12c;UID=myid;PWD=passwd', \\\n...(2)> [{:scrollable_cursors, :off},{:binary_strings,:on}])\n{:ok, #PID<0.65.0>}\n```\n\n\u63a5\u7d9aID\u3068\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u304c\u8fd4\u3063\u3066\u304d\u3066\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\uff08\u30c7\u30fc\u30bf\u306f\u81ea\u524d\u306e\u3082\u306e\u3067\u3059\u3002\u7d39\u4ecb\u306f\u7701\u304d\u307e\u3059\uff09\n\n```iex:\niex(3)> {:selected,cols,rows} = :odbc.sql_query(conn, 'SELECT TABLE_NAME,PCT_FREE,LAST_ANALYZED FROM User_tables WHERE ROWNUM<3')\n{:selected, ['TABLE_NAME', 'PCT_FREE', 'LAST_ANALYZED'],\n [{'TB_HOLIDAY', 10.0, {{2015, 5, 18}, {23, 9, 23}}},\n  {'TB_MYOFFICE', 10.0, {{2015, 5, 18}, {23, 9, 24}}}]}\n```\n\u7d50\u679c\u30bb\u30c3\u30c8\u306f\u30ab\u30e9\u30e0\u540d\u304c\u30ea\u30b9\u30c8\u3001\u30c7\u30fc\u30bf\u306f\u30bf\u30d7\u30eb\u306e\u30ea\u30b9\u30c8\u306e\u3088\u3046\u3067\u3059\u3002\u65e5\u4ed8\u6642\u523b\u578b\u3082\u30bf\u30d7\u30eb\u3067\u3059\u306d\u3002\n\n2\u884c\u76ee\u306e\u4e00\u3064\u76ee\u306e\u30ab\u30e9\u30e0\u3092\u53d6\u308a\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n\uff08\u3082\u3063\u3068\u30a8\u30ec\u30ac\u30f3\u30c8\u306b\u53d6\u308a\u51fa\u3059\u65b9\u6cd5\u304c\u3042\u308b\u306f\u305a\u3067\u3059\u304c\u3001\u30c9\u521d\u5fc3\u8005\u306b\u3064\u304d\u3054\u5bb9\u8d66\u304f\u3060\u3055\u3044\uff09\n\n```iex:\niex(4)> elem( Enum.at(rows,1) , Enum.find_index(cols,fn col -> col=='TABLE_NAME' end))\n'TB_MYOFFICE'\n```\n\n#\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u306eODBC\u63a5\u7d9a\n\u5148\u307b\u3069\u63a5\u7d9a\u304c\u30d7\u30ed\u30bb\u30b9\u3067\u8fd4\u3063\u3066\u304d\u3066\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u305f\u306e\u3067\n\u3082\u3046\u5c11\u3057\u898b\u3066\u307f\u307e\u3059\u3002\n\u540d\u79f0\u767b\u9332\u6e08\u307f\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u78ba\u8a8d\n\n```iex: \niex(6)> Process.registered \n[:init, :file_server_2, :user, :application_controller, :user_drv,\n:standard_error, Logger.Supervisor, :global_group, :elixir_counter,\n:elixir_config, :elixir_sup, IEx.Config, :elixir_code_server, Logger.Watcher,\n:error_logger, :standard_error_sup, IEx.Supervisor, :kernel_safe_sup, :rex,\n:erl_prim_loader, :odbc_sup, :inet_db, :kernel_sup, :code_server,\n:global_name_server, Logger]\n```\n:odbc_sup\u306a\u308b\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\nODBC\u63a5\u7d9a\u3092\u3082\u3046\u4e00\u3064\u5897\u3084\u3057\u307e\u3059\n\n```iex: \niex(2)> :odbc.connect('DSN=DSNORA12c;UID=myid;PWD=passwd', [{:scrollable_cursors, :off},{:binary_strings,:on}])\n{:ok, #PID<0.67.0>}\n```\n\u30d7\u30ed\u30bb\u30b9\u304cSupervisor\u3067\u3042\u308c\u3070\u3001count_children/1\u3084which_children/1\u304c\u4f7f\u3048\u308b\u306f\u305a\u3067\u3059\u3002\nSupervisor\u3068\u4eee\u5b9a\u3057\u3066\u5b50\u30d7\u30ed\u30bb\u30b9\u306e\u69d8\u5b50\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\n```iex: \niex(8)> odbc_id=Process.whereis(:odbc_sup)\n#PID<0.63.0>\niex(9)> Supervisor.count_children(odbc_id)\n%{active: 2, specs: 1, supervisors: 0, workers: 2}\niex(10)> Supervisor.which_children(odbc_id)\n[{:undefined, #PID<0.65.0>, :worker, [:odbc]},\n{:undefined, #PID<0.67.0>, :worker, [:odbc]}]\n```\n:odbc_sup\u30d7\u30ed\u30bb\u30b9\u306b\u4e0a\u8a182\u30d7\u30ed\u30bb\u30b9\u304c\u3076\u3089\u4e0b\u304c\u3063\u3066\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u5225\u30ce\u30fc\u30c9\u3067\u3059\u304c\u3001\u540c\u69d8\u306b\uff12\u63a5\u7d9a\u7acb\u3061\u4e0a\u3052\u305f\u3082\u306e\u3092[visualixir](http://qiita.com/massn-san/items/5b2f2646200747515214)\u3067\u898b\u3066\u307f\u307e\u3059\u3002\n\n![visualixir.png](https://qiita-image-store.s3.amazonaws.com/0/66748/1b78d75b-63bf-dd93-d3ba-98325f66f615.png)\n\n\u4e00\u76ee\u77ad\u7136\u3067\u3059\u306d\u3002\u7d20\u6674\u3089\u3057\u3044\u3002\n\nElixir/Erlang\u304b\u3089ORACLE\u3078\u306f\u30cd\u30a4\u30c6\u30a3\u30d6\u63a5\u7d9a\u304c\u306a\u3044\u306e\u3067\u304c\u3063\u304b\u308a\u3057\u307e\u3057\u305f\u304c\u3001ODBC\u3067\u3082\u63a5\u7d9a\u3054\u3068\u306b\u30d7\u30ed\u30bb\u30b9\u304c\u4f5c\u3089\u308c\u308b\u306e\u3092\u898b\u308b\u3068\u81ea\u524d\u3067\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30eb\u3092\u4f5c\u308b\u306e\u3082\u30cf\u30fc\u30c9\u30eb\u304c\u4f4e\u305d\u3046\u3067\u3059\u3002\n\nODBC\u306eAPI\u4ed5\u69d8\u3067\u3059\u304c\u3001Erlang\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3067\u8abf\u3079\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u7a0b\u5ea6\u3067\u3042\u308c\u3070\u3001Erlang\u3068Elixir\u306e\u6587\u6cd5\u306e\u5dee\u306f\u6c17\u306b\u306a\u3089\u306a\u3044\u30ec\u30d9\u30eb\u3067\u3059\u306d\u3002\n\n\u53c2\u8003\u3000[Erlang ODBC \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://www.erlang.org/doc/man/odbc.html \n\"Erlang ODBC\")\n\n12\u670831\u65e5\u8ffd\u8a18 \u65e5\u672c\u8a9e\u5bfe\u5fdc\u306e\u305f\u3081:odbc.connect\u306b[:binary_strings,on]\u3092\u8ffd\u52a0\u3002\n", "tags": ["Elixir", "oracle", "ODBC", "Erlang"]}