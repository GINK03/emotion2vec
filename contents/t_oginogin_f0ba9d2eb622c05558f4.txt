{"context": "Raspberry Pi\u306b\u30de\u30a4\u30af\u3092\u4ed8\u3051\u3066\u8a71\u3057\u305f\u65e5\u672c\u8a9e\u3092\u8a8d\u8b58\u3055\u305b\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3044\u304f\u3064\u304b\u53c2\u8003\u306b\u306a\u308b\u30b5\u30a4\u30c8\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001\u81ea\u5206\u306e\u74b0\u5883\u3068\u5fae\u5999\u306b\u7570\u306a\u3063\u3066\u306f\u307e\u3063\u3066\u3044\u305f\u306e\u3067\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\n\u65e5\u672c\u8a9e\u97f3\u58f0\u8a8d\u8b58\nRaspberryPI\u306bUSB\u30de\u30a4\u30af\u3067\u97f3\u58f0\u5165\u529b\nRaspberry Pi\u3067\u9332\u97f3\u518d\u751f\nRaspberry Pi\u3067Julius\u3092\u4f7f\u3063\u305f\u97f3\u58f0\u8a8d\u8b58(1)\nALSA \u3067 snd_pcm_dmix_open \u304c unable to open slave \u306b\u306a\u308b\u5834\u5408\nCan't set default sound device with ALSA [SOLVED]\n\n\n\u4f7f\u3063\u305f\u6a5f\u5668\n\nRaspberry Pi 2 Model B\nSANWA SUPPLY MM-MCUSB16 USB\u30de\u30a4\u30af\u30ed\u30db\u30f3\nELECOM USB3.0\u30cf\u30d6 AC\u30a2\u30c0\u30d7\u30bf\u30fc\u4ed8\u304d \u30bb\u30eb\u30d5\u30d1\u30ef\u30fc \u30b5\u30a4\u30c9\u30dd\u30fc\u30c8\u4ed8\u304d 4\u30dd\u30fc\u30c8 \u30d6\u30e9\u30c3\u30af U3H-A408SBK\nBUFFALO \u7121\u7ddaLAN\u5b50\u6a5f \u30b3\u30f3\u30d1\u30af\u30c8\u30e2\u30c7\u30eb 11n\u6280\u8853\u30fb11g/b\u5bfe\u5fdc WLI-UC-GNM\nELECOM MS-P06U \u30b3\u30f3\u30d1\u30af\u30c8\u30b9\u30d4\u30fc\u30ab\u30fc/USB\u96fb\u6e90\n\n\nUSB\u30de\u30a4\u30af\u306e\u78ba\u8a8d\n\u307e\u305aUSB\u30de\u30a4\u30af\u304c\u8a8d\u8b58\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install alsa-utils sox libsox-fmt-all\n\napt-get\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u53e4\u3044\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067\u6700\u65b0\u306b\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n$ sudo apt-get update\n$ sudo apt-get upgrade\n$ sudo rpi-update\n\n404 Not Found\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u306f\u3001Raspberry Pi -> Mac -> Internet\u74b0\u5883\u3067sudo apt-get update\u6642\u306b404 Not Found\u3082\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\nUSB\u30dd\u30fc\u30c8\u306e\u78ba\u8a8d\nlsusb\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ lsusb\nBus 001 Device 002: ID 0424:9514 Standard Microsystems Corp.\nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp.\nBus 001 Device 004: ID 0d8c:0134 C-Media Electronics, Inc.\nBus 001 Device 005: ID 2109:2812\nBus 001 Device 006: ID 0411:01a2 BUFFALO INC. (formerly MelCo., Inc.) WLI-UC-GNM Wireless LAN Adapter [Ralink RT8070]\n\nC-Media Electronics, Inc.\u3068\u3044\u3046\u3084\u3064\u304cUSB\u30de\u30a4\u30af\u3067\u3059\u3002\n\u30e9\u30ba\u30d1\u30a4\u306eUSB\u30dd\u30fc\u30c8\u306b\u633f\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\u3002\n\u306a\u305c\u304bUSB\u30d0\u30b9\u306e\u65b9\u306b\u633f\u3057\u8fbc\u3080\u3068\u8a8d\u8b58\u3055\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\uff08\u7121\u7ddaLAN\u306fUSB\u30d0\u30b9\u3067\u3082\u8a8d\u8b58\u3055\u308c\u3066\u3044\u307e\u3059\uff09\n\n\u30aa\u30fc\u30c7\u30a3\u30aa\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u512a\u5148\u9806\u4f4d\u306e\u78ba\u8a8d\ncat /proc/asound/modules\u3092\u5b9f\u884c\u3057\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u512a\u5148\u9806\u4f4d\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ cat /proc/asound/modules\n 0 snd_bcm2835\n 1 snd_usb_audio\n\nUSB\u5165\u529b\u3092\u512a\u5148\u3055\u305b\u308b\u305f\u3081\u3001/etc/modprobe.d/alsa-base.conf\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n/etc/modprobe.d/alsa-base.conf\n:\n# Keep snd-usb-audio from beeing loaded as first soundcard\noptions snd-usb-audio index=-2\n: \n\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\n\n/etc/modprobe.d/alsa-base.conf\n: \n# Keep snd-usb-audio from beeing loaded as first soundcard\n#options snd-usb-audio index=-2\noptions snd-usb-audio index=0\n: \n\n\n\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\u4e00\u65e6\u30ea\u30d6\u30fc\u30c8\u3057\u307e\u3059\u3002\n$ sudo reboot\n\n\u518d\u5ea6\u78ba\u8a8d\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n$ cat /proc/asound/modules\n 0 snd_usb_audio\n 1 snd_bcm2835\n\n\n\u30de\u30a4\u30af\u30dc\u30ea\u30e5\u30fc\u30e0\u8abf\u6574\n\u30de\u30a4\u30af\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u5c0f\u3055\u3044\u3068\u58f0\u304c\u62fe\u3048\u306a\u3044\u306e\u3067\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n$ amixer sset Mic 16 -c 0\nSimple mixer control 'Mic',0\n  Capabilities: cvolume cvolume-joined cswitch cswitch-joined penum\n  Capture channels: Mono\n  Limits: Capture 0 - 62\n  Mono: Capture 62 [100%] [22.50dB] [on]\n\n16\u3068\u3044\u3046\u306e\u304c\u30dc\u30ea\u30e5\u30fc\u30e0\u3067\u3059\u300262\u3067\u6700\u5927\u30dc\u30ea\u30e5\u30fc\u30e0\u3067\u3059\u3002\n-c 0\u3068\u3044\u3046\u306e\u306f\u30ab\u30fc\u30c9No\u3067\u3059\u3002\n\u30aa\u30d7\u30b7\u30e7\u30f3\u306a\u3057\u3067\u5b9f\u884c\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3057\u305f\u3002\n$ amixer sset Mic 62\namixer: Unable to find simple control 'Mic',0\n\n\u30d8\u30eb\u30d7\u3092\u898b\u308b\u3068\u30ab\u30fc\u30c9No\u3092\u6307\u5b9a\u3067\u304d\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u4ed8\u3051\u305f\u3068\u3053\u308d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5909\u66f4\u3067\u304d\u307e\u3057\u305f\u3002\n$ amixer -h\nUsage: amixer <options> [command]\n\nAvailable options:\n  -h,--help       this help\n  -c,--card N     select the card\n  -D,--device N   select the device, default 'default'\n  : \n\n\u30ab\u30fc\u30c9No\u306e\u8abf\u3079\u65b9\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n$ arecord -l\n**** List of CAPTURE Hardware Devices ****\ncard 0: Device [USB PnP Audio Device], device 0: USB Audio [USB Audio]\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\n\n\u79c1\u306e\u74b0\u5883\u3067\u306f\u3001card 0 device 0\u3067\u3059\u3002\n\u5f8c\u3067\u308f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001~/.asoundrc\u306b\n\n~/.asoundrc\ndefaults.ctl.card 1\n\nctl.!default {\n  type hw\n  card 1\n}\n\n\n\u3068\u3044\u3046\u8a18\u8ff0\u3092\u5165\u308c\u3066\u3044\u305f\u3081\u30c7\u30d5\u30a9\u30eb\u30c8\u304c\u30ab\u30fc\u30c91\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\ncard 0\u306b\u5909\u66f4\u3059\u308b\u3068amixer sset Mic 62\u3067\u3082\u30dc\u30ea\u30e5\u30fc\u30e0\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\n\u9332\u97f3\u3057\u3066\u307f\u308b\n\u30de\u30a4\u30af\u306e\u8a2d\u5b9a\u304c\u7d42\u308f\u3063\u305f\u306e\u3067\u9332\u97f3\u3057\u3066\u307f\u307e\u3059\u3002\n$ arecord -D plughw:0,0 -d 10 -f cd test.wav\n\nplughw:0,0\u306e0,0\u306f\u30de\u30a4\u30af\u306e\u30ab\u30fc\u30c9No\u3068\u30c7\u30d0\u30a4\u30b9No\u3067\u3059\u3002\uff08\u79c1\u306e\u74b0\u5883\u3067\u306f0\u30680\uff09\n\u9332\u97f3\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u3001Mac\u306bscp\u3067\u3068\u3063\u3066\u304d\u3066\u518d\u751f\u3057\u307e\u3057\u305f\u3002\n\uff08Raspberry Pi\u306b\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u4ed8\u3051\u3066\u518d\u751f\u3055\u305b\u308b\u306e\u3082\u8a2d\u5b9a\u304c\u5fc5\u8981\u3060\u3063\u305f\u306e\u3067\u5f8c\u8ff0\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff09\n$ scp pi@192.168.xxx.xxx:~/test.wav .\n$ afplay test.wav\n\n\nRaspberry Pi\u3067\u518d\u751f\u3057\u3066\u307f\u308b\n\u5148\u307b\u3069\u9332\u97f3\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u307e\u3059\u3002\n$ aplay test.wav\nALSA lib pcm_dmix.c:1018:(snd_pcm_dmix_open) unable to open slave\naplay: main:682: audio open error: No such file or directory\n\n\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u306e\u3067\u30c7\u30d0\u30a4\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ aplay -l\n**** List of PLAYBACK Hardware Devices ****\ncard 1: ALSA [bcm2835 ALSA], device 0: bcm2835 ALSA [bcm2835 ALSA]\n  Subdevices: 8/8\n  Subdevice #0: subdevice #0\n  Subdevice #1: subdevice #1\n  Subdevice #2: subdevice #2\n  Subdevice #3: subdevice #3\n  Subdevice #4: subdevice #4\n  Subdevice #5: subdevice #5\n  Subdevice #6: subdevice #6\n  Subdevice #7: subdevice #7\ncard 1: ALSA [bcm2835 ALSA], device 1: bcm2835 ALSA [bcm2835 IEC958/HDMI]\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\n\n\u51fa\u529b\u306e\u30c7\u30d0\u30a4\u30b9\u306fcard 1\u306b\u3042\u308a\u307e\u3057\u305f\u3002\n\u3053\u306e\u60c5\u5831\u3092~/.asoundrc\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u5165\u529b\u306eUSB\u30de\u30a4\u30af\u306fcard0\u3060\u3063\u305f\u306e\u3067\u305d\u306e\u60c5\u5831\u3082\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n~/.asoundrc\ndefaluts.pcm.card 1\ndefaults.ctl.card 0\n\npcm.!default {\n  type hw\n  card 1\n}\n\nctl.!default {\n  type hw\n  card 0\n}\n\n\n\u914d\u7f6e\u3067\u304d\u305f\u3089alsa-utils\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ sudo /etc/init.d/alsa-utils restart\n\n\u3082\u3046\u4e00\u5ea6\u518d\u751f\u3057\u3066\u307f\u307e\u3059\u3002\n$ aplay test.wav\nPlaying WAVE 'test.wav' : Signed 16 bit Little Endian, Rate 44100 Hz, Stereo\n\n\u4eca\u5ea6\u306f\u3046\u307e\u304f\u518d\u751f\u3067\u304d\u307e\u3057\u305f\u3002\n\u203b\u5358\u306b\u30b9\u30d4\u30fc\u30ab\u30fc\u51fa\u529b\u3092\u8a66\u3059\u3060\u3051\u306a\u3089\u6b21\u306e\u65b9\u6cd5\u3067\u3082\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n$ aplay /usr/share/sounds/alsa/Front_Center.wav\n\n$ speaker-test -t sine -f 600\n\n\nJulius\u306e\u8a2d\u5b9a\n\u97f3\u58f0\u8a8d\u8b58\u30a8\u30f3\u30b8\u30f3\u3068\u3057\u3066Julius\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\uff08Google Speech API\u3082\u9b45\u529b\u7684\u3067\u3059\u304c\u30011\u65e5\u306e\u5229\u7528\u56de\u6570\u5236\u9650\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u4eca\u56de\u306f\u3084\u3081\u307e\u3057\u305f\u3002\uff09\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u672c\u5bb6\u30b5\u30a4\u30c8\u304b\u3089\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3057\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n$ wget --trust-server-names 'http://osdn.jp/frs/redir.php?m=iij&f=%2Fjulius%2F60273%2Fjulius-4.3.1.tar.gz'\n$ tar xvzf julius-4.3.1.tar.gz\n$ cd julius-4.3.1/\n$ ./configure\n$ make\n\n\u540c\u3058\u304f\u30c7\u30a3\u30af\u30c6\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3082\u53d6\u5f97\u3057\u307e\u3059\u3002\n\uff08\u5b9f\u306f\u3053\u3061\u3089\u306b\u3082\u30d3\u30eb\u30c9\u6e08\u307f\u306ejulius\u304c\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u3063\u3066\u3082\u826f\u3044\u3068\u601d\u3044\u307e\u3059\uff09\n$ mkdir ~/julius-kits\n$ cd ~/julius-kits\n$ wget --trust-server-names 'http://osdn.jp/frs/redir.php?m=iij&f=%2Fjulius%2F60416%2Fdictation-kit-v4.3.1-linux.tgz'\n$ tar xvzf dictation-kit-v4.3.1-linux.tgz\n\n\nJulius\u306e\u5b9f\u884c\n$ ALSADEV=\"plughw:0,0\" ~/julius-4.3.1/julius/julius -C ~/julius-kits/dictation-kit-v4.3.1-linux/main.jconf -C ~/julius-kits/dictation-kit-v4.3.1-linux/am-gmm.jconf -nostrip\n\n\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u306fdictation-kit-v4.3.1-linux/run.sh\u306e\u4e2d\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nplughw:0,0\u306e0,0\u306f\u30de\u30a4\u30af\u306e\u30ab\u30fc\u30c9No\u3068\u30c7\u30d0\u30a4\u30b9No\u3067\u3059\u3002\uff08\u79c1\u306e\u74b0\u5883\u3067\u306f0\u30680\uff09\n\u3082\u3057\nStat: adin_oss: device name = /dev/dsp (application default)\nError: adin_oss: failed to open /dev/dsp\n\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001\n$ sudo sh -c \"echo snd-pcm-oss >> /etc/modules\"\n$ sudo reboot\n\n\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n-charconv EUC-JP UTF-8\u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u5b9f\u884c\u3059\u308b\u3068\nInternalError: codeconv: invalid multibyte sequence in the input\n\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\u518d\u8d77\u52d5\u5f8c\u3001Julius\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ ALSADEV=\"plughw:0,0\" ~/julius-4.3.1/julius/julius -C ~/julius-kits/dictation-kit-v4.3.1-linux/main.jconf -C ~/julius-kits/dictation-kit-v4.3.1-linux/am-gmm.jconf -nostrip\n\n : \n\n### read waveform input\nStat: adin_oss: device name = /dev/dsp (application default)\nStat: adin_oss: sampling rate = 16000Hz\nStat: adin_oss: going to set latency to 50 msec\nStat: adin_oss: audio I/O Latency = 32 msec (fragment size = 512 samples)\nSTAT: AD-in thread created\n<<< please speak >>>\n\n\u3046\u307e\u304f\u8d77\u52d5\u3067\u304d\u307e\u3057\u305f\u3002\n\u3053\u306e\u72b6\u614b\u3067\u300c\u3053\u3093\u306b\u3061\u306f\u300d\u3068\u8a71\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\npass1_best:  \u3053\u3093\u306b\u3061\u306f \u3002\npass1_best_wordseq: <s> \u3053\u3093\u306b\u3061\u306f+\u611f\u52d5\u8a5e </s>\npass1_best_phonemeseq: silB | k o N n i ch i w a | silE\npass1_best_score: -2942.340820\n### Recognition: 2nd pass (RL heuristic best-first)\nSTAT: 00 _default: 14430 generated, 1278 pushed, 264 nodes popped in 122\nsentence1:  \u3053\u3093\u306b\u3061\u306f \u3002\nwseq1: <s> \u3053\u3093\u306b\u3061\u306f+\u611f\u52d5\u8a5e </s>\nphseq1: silB | k o N n i ch i w a | silE\ncmscore1: 0.440 0.458 1.000\nscore1: -2959.848633\n\n<<< please speak >>>\n\n\u3046\u307e\u304f\u8a8d\u8b58\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u8a8d\u8b58\u6642\u9593\u3068\u8a8d\u8b58\u7387\u3092\u9ad8\u3081\u308b\u5de5\u592b\n\u3053\u3053\u307e\u3067\u306e\u8a2d\u5b9a\u3067\u306f\u30de\u30a4\u30af\u3067\u8a71\u3057\u3066\u304b\u3089\u8a8d\u8b58\u3059\u308b\u307e\u3067\u306b2-3\u79d2\u304b\u304b\u308b\u306e\u3068\u3001\u8aa4\u8a8d\u8b58\u3082\u591a\u3044\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u6539\u5584\u3059\u308b\u65b9\u6cd5\u306e\u4e00\u3064\u3092\u7d39\u4ecb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nRaspberry Pi\u3067\u97f3\u58f0\u8a8d\u8b58\uff08\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6539\u5584\uff09\n\nRaspberry Pi\u306b\u30de\u30a4\u30af\u3092\u4ed8\u3051\u3066\u8a71\u3057\u305f\u65e5\u672c\u8a9e\u3092\u8a8d\u8b58\u3055\u305b\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3044\u304f\u3064\u304b\u53c2\u8003\u306b\u306a\u308b\u30b5\u30a4\u30c8\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001\u81ea\u5206\u306e\u74b0\u5883\u3068\u5fae\u5999\u306b\u7570\u306a\u3063\u3066\u306f\u307e\u3063\u3066\u3044\u305f\u306e\u3067\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n##\u53c2\u8003\u30b5\u30a4\u30c8\n- [\u65e5\u672c\u8a9e\u97f3\u58f0\u8a8d\u8b58](http://cubic9.com/Devel/%C5%C5%BB%D2%B9%A9%BA%EE/RaspberryPi/%C6%FC%CB%DC%B8%EC%B2%BB%C0%BC%C7%A7%BC%B1/)\n- [RaspberryPI\u306bUSB\u30de\u30a4\u30af\u3067\u97f3\u58f0\u5165\u529b](http://izumogeiger.blogspot.jp/2013/08/raspberrypiusb.html)\n- [Raspberry Pi\u3067\u9332\u97f3\u518d\u751f](http://shokai.org/blog/archives/7914)\n- [Raspberry Pi\u3067Julius\u3092\u4f7f\u3063\u305f\u97f3\u58f0\u8a8d\u8b58(1)](http://hyottokoaloha.hatenablog.com/entry/2015/06/30/105906)\n- [ALSA \u3067 snd_pcm_dmix_open \u304c unable to open slave \u306b\u306a\u308b\u5834\u5408](http://seussnu.b.osdn.me/?p=150)\n- [Can't set default sound device with ALSA [SOLVED]](https://bbs.archlinux.org/viewtopic.php?id=124380)\n\n##\u4f7f\u3063\u305f\u6a5f\u5668\n\n- Raspberry Pi 2 Model B\n- SANWA SUPPLY MM-MCUSB16 USB\u30de\u30a4\u30af\u30ed\u30db\u30f3\n- ELECOM USB3.0\u30cf\u30d6 AC\u30a2\u30c0\u30d7\u30bf\u30fc\u4ed8\u304d \u30bb\u30eb\u30d5\u30d1\u30ef\u30fc \u30b5\u30a4\u30c9\u30dd\u30fc\u30c8\u4ed8\u304d 4\u30dd\u30fc\u30c8 \u30d6\u30e9\u30c3\u30af U3H-A408SBK\n- BUFFALO \u7121\u7ddaLAN\u5b50\u6a5f \u30b3\u30f3\u30d1\u30af\u30c8\u30e2\u30c7\u30eb 11n\u6280\u8853\u30fb11g/b\u5bfe\u5fdc WLI-UC-GNM\n- ELECOM MS-P06U \u30b3\u30f3\u30d1\u30af\u30c8\u30b9\u30d4\u30fc\u30ab\u30fc/USB\u96fb\u6e90\n\n##USB\u30de\u30a4\u30af\u306e\u78ba\u8a8d\n\u307e\u305aUSB\u30de\u30a4\u30af\u304c\u8a8d\u8b58\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n### \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ sudo apt-get install alsa-utils sox libsox-fmt-all\n```\n\napt-get\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u53e4\u3044\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067\u6700\u65b0\u306b\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get upgrade\n$ sudo rpi-update\n```\n\n`404 Not Found`\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u306f\u3001[Raspberry Pi -> Mac -> Internet\u74b0\u5883\u3067sudo apt-get update\u6642\u306b404 Not Found](http://qiita.com/t_oginogin/items/bcd3ff56225dfaf02c4e)\u3082\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n### USB\u30dd\u30fc\u30c8\u306e\u78ba\u8a8d\n\n`lsusb`\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\n$ lsusb\nBus 001 Device 002: ID 0424:9514 Standard Microsystems Corp.\nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp.\nBus 001 Device 004: ID 0d8c:0134 C-Media Electronics, Inc.\nBus 001 Device 005: ID 2109:2812\nBus 001 Device 006: ID 0411:01a2 BUFFALO INC. (formerly MelCo., Inc.) WLI-UC-GNM Wireless LAN Adapter [Ralink RT8070]\n```\n\n`C-Media Electronics, Inc.`\u3068\u3044\u3046\u3084\u3064\u304cUSB\u30de\u30a4\u30af\u3067\u3059\u3002\n\u30e9\u30ba\u30d1\u30a4\u306eUSB\u30dd\u30fc\u30c8\u306b\u633f\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\u3002\n\n\u306a\u305c\u304bUSB\u30d0\u30b9\u306e\u65b9\u306b\u633f\u3057\u8fbc\u3080\u3068\u8a8d\u8b58\u3055\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\uff08\u7121\u7ddaLAN\u306fUSB\u30d0\u30b9\u3067\u3082\u8a8d\u8b58\u3055\u308c\u3066\u3044\u307e\u3059\uff09\n\n### \u30aa\u30fc\u30c7\u30a3\u30aa\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u512a\u5148\u9806\u4f4d\u306e\u78ba\u8a8d\n`cat /proc/asound/modules`\u3092\u5b9f\u884c\u3057\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u512a\u5148\u9806\u4f4d\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n$ cat /proc/asound/modules\n 0 snd_bcm2835\n 1 snd_usb_audio\n```\n\nUSB\u5165\u529b\u3092\u512a\u5148\u3055\u305b\u308b\u305f\u3081\u3001`/etc/modprobe.d/alsa-base.conf`\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```bash:/etc/modprobe.d/alsa-base.conf\n:\n# Keep snd-usb-audio from beeing loaded as first soundcard\noptions snd-usb-audio index=-2\n: \n```\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\n\n```bash:/etc/modprobe.d/alsa-base.conf\n: \n# Keep snd-usb-audio from beeing loaded as first soundcard\n#options snd-usb-audio index=-2\noptions snd-usb-audio index=0\n: \n```\n\n\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\u4e00\u65e6\u30ea\u30d6\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo reboot\n```\n\n\u518d\u5ea6\u78ba\u8a8d\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\n$ cat /proc/asound/modules\n 0 snd_usb_audio\n 1 snd_bcm2835\n```\n\n### \u30de\u30a4\u30af\u30dc\u30ea\u30e5\u30fc\u30e0\u8abf\u6574\n\n\u30de\u30a4\u30af\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u5c0f\u3055\u3044\u3068\u58f0\u304c\u62fe\u3048\u306a\u3044\u306e\u3067\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n\n```bash\n$ amixer sset Mic 16 -c 0\nSimple mixer control 'Mic',0\n  Capabilities: cvolume cvolume-joined cswitch cswitch-joined penum\n  Capture channels: Mono\n  Limits: Capture 0 - 62\n  Mono: Capture 62 [100%] [22.50dB] [on]\n```\n`16`\u3068\u3044\u3046\u306e\u304c\u30dc\u30ea\u30e5\u30fc\u30e0\u3067\u3059\u300262\u3067\u6700\u5927\u30dc\u30ea\u30e5\u30fc\u30e0\u3067\u3059\u3002\n\n`-c 0`\u3068\u3044\u3046\u306e\u306f\u30ab\u30fc\u30c9No\u3067\u3059\u3002\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u306a\u3057\u3067\u5b9f\u884c\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3057\u305f\u3002\n\n```bash\n$ amixer sset Mic 62\namixer: Unable to find simple control 'Mic',0\n```\n\n\u30d8\u30eb\u30d7\u3092\u898b\u308b\u3068\u30ab\u30fc\u30c9No\u3092\u6307\u5b9a\u3067\u304d\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u4ed8\u3051\u305f\u3068\u3053\u308d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5909\u66f4\u3067\u304d\u307e\u3057\u305f\u3002\n\n```bash\n$ amixer -h\nUsage: amixer <options> [command]\n\nAvailable options:\n  -h,--help       this help\n  -c,--card N     select the card\n  -D,--device N   select the device, default 'default'\n  : \n```\n\n\u30ab\u30fc\u30c9No\u306e\u8abf\u3079\u65b9\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n```bash\n$ arecord -l\n**** List of CAPTURE Hardware Devices ****\ncard 0: Device [USB PnP Audio Device], device 0: USB Audio [USB Audio]\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\n```\n\n\u79c1\u306e\u74b0\u5883\u3067\u306f\u3001card 0 device 0\u3067\u3059\u3002\n\n\u5f8c\u3067\u308f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001~/.asoundrc\u306b\n\n```bash:~/.asoundrc\ndefaults.ctl.card 1\n\nctl.!default {\n  type hw\n  card 1\n}\n```\n\n\u3068\u3044\u3046\u8a18\u8ff0\u3092\u5165\u308c\u3066\u3044\u305f\u3081\u30c7\u30d5\u30a9\u30eb\u30c8\u304c\u30ab\u30fc\u30c91\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\ncard 0\u306b\u5909\u66f4\u3059\u308b\u3068`amixer sset Mic 62`\u3067\u3082\u30dc\u30ea\u30e5\u30fc\u30e0\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\n### \u9332\u97f3\u3057\u3066\u307f\u308b\n\u30de\u30a4\u30af\u306e\u8a2d\u5b9a\u304c\u7d42\u308f\u3063\u305f\u306e\u3067\u9332\u97f3\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ arecord -D plughw:0,0 -d 10 -f cd test.wav\n```\n\n`plughw:0,0`\u306e0,0\u306f\u30de\u30a4\u30af\u306e\u30ab\u30fc\u30c9No\u3068\u30c7\u30d0\u30a4\u30b9No\u3067\u3059\u3002\uff08\u79c1\u306e\u74b0\u5883\u3067\u306f0\u30680\uff09\n\n\u9332\u97f3\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u3001Mac\u306bscp\u3067\u3068\u3063\u3066\u304d\u3066\u518d\u751f\u3057\u307e\u3057\u305f\u3002\n\uff08Raspberry Pi\u306b\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u4ed8\u3051\u3066\u518d\u751f\u3055\u305b\u308b\u306e\u3082\u8a2d\u5b9a\u304c\u5fc5\u8981\u3060\u3063\u305f\u306e\u3067\u5f8c\u8ff0\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff09\n\n```bash\n$ scp pi@192.168.xxx.xxx:~/test.wav .\n$ afplay test.wav\n```\n\n### Raspberry Pi\u3067\u518d\u751f\u3057\u3066\u307f\u308b\n\n\u5148\u307b\u3069\u9332\u97f3\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u307e\u3059\u3002\n\n```bash\n$ aplay test.wav\nALSA lib pcm_dmix.c:1018:(snd_pcm_dmix_open) unable to open slave\naplay: main:682: audio open error: No such file or directory\n```\n\n\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u306e\u3067\u30c7\u30d0\u30a4\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ aplay -l\n**** List of PLAYBACK Hardware Devices ****\ncard 1: ALSA [bcm2835 ALSA], device 0: bcm2835 ALSA [bcm2835 ALSA]\n  Subdevices: 8/8\n  Subdevice #0: subdevice #0\n  Subdevice #1: subdevice #1\n  Subdevice #2: subdevice #2\n  Subdevice #3: subdevice #3\n  Subdevice #4: subdevice #4\n  Subdevice #5: subdevice #5\n  Subdevice #6: subdevice #6\n  Subdevice #7: subdevice #7\ncard 1: ALSA [bcm2835 ALSA], device 1: bcm2835 ALSA [bcm2835 IEC958/HDMI]\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\n```\n\n\u51fa\u529b\u306e\u30c7\u30d0\u30a4\u30b9\u306fcard 1\u306b\u3042\u308a\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u60c5\u5831\u3092~/.asoundrc\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u5165\u529b\u306eUSB\u30de\u30a4\u30af\u306fcard0\u3060\u3063\u305f\u306e\u3067\u305d\u306e\u60c5\u5831\u3082\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash:~/.asoundrc\ndefaluts.pcm.card 1\ndefaults.ctl.card 0\n\npcm.!default {\n  type hw\n  card 1\n}\n\nctl.!default {\n  type hw\n  card 0\n}\n```\n\n\u914d\u7f6e\u3067\u304d\u305f\u3089alsa-utils\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo /etc/init.d/alsa-utils restart\n```\n\n\u3082\u3046\u4e00\u5ea6\u518d\u751f\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ aplay test.wav\nPlaying WAVE 'test.wav' : Signed 16 bit Little Endian, Rate 44100 Hz, Stereo\n```\n\n\u4eca\u5ea6\u306f\u3046\u307e\u304f\u518d\u751f\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u203b\u5358\u306b\u30b9\u30d4\u30fc\u30ab\u30fc\u51fa\u529b\u3092\u8a66\u3059\u3060\u3051\u306a\u3089\u6b21\u306e\u65b9\u6cd5\u3067\u3082\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```bash\n$ aplay /usr/share/sounds/alsa/Front_Center.wav\n```\n```bash\n$ speaker-test -t sine -f 600\n```\n\n\n## Julius\u306e\u8a2d\u5b9a\n\n\u97f3\u58f0\u8a8d\u8b58\u30a8\u30f3\u30b8\u30f3\u3068\u3057\u3066Julius\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\uff08Google Speech API\u3082\u9b45\u529b\u7684\u3067\u3059\u304c\u30011\u65e5\u306e\u5229\u7528\u56de\u6570\u5236\u9650\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u4eca\u56de\u306f\u3084\u3081\u307e\u3057\u305f\u3002\uff09\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n[\u672c\u5bb6\u30b5\u30a4\u30c8](http://julius.osdn.jp/)\u304b\u3089\u30bd\u30fc\u30b9\u3092\u53d6\u5f97\u3057\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ wget --trust-server-names 'http://osdn.jp/frs/redir.php?m=iij&f=%2Fjulius%2F60273%2Fjulius-4.3.1.tar.gz'\n$ tar xvzf julius-4.3.1.tar.gz\n$ cd julius-4.3.1/\n$ ./configure\n$ make\n```\n\n\u540c\u3058\u304f\u30c7\u30a3\u30af\u30c6\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3082\u53d6\u5f97\u3057\u307e\u3059\u3002\n\uff08\u5b9f\u306f\u3053\u3061\u3089\u306b\u3082\u30d3\u30eb\u30c9\u6e08\u307f\u306ejulius\u304c\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u3063\u3066\u3082\u826f\u3044\u3068\u601d\u3044\u307e\u3059\uff09\n\n```bash\n$ mkdir ~/julius-kits\n$ cd ~/julius-kits\n$ wget --trust-server-names 'http://osdn.jp/frs/redir.php?m=iij&f=%2Fjulius%2F60416%2Fdictation-kit-v4.3.1-linux.tgz'\n$ tar xvzf dictation-kit-v4.3.1-linux.tgz\n```\n\n### Julius\u306e\u5b9f\u884c\n\n```bash\n$ ALSADEV=\"plughw:0,0\" ~/julius-4.3.1/julius/julius -C ~/julius-kits/dictation-kit-v4.3.1-linux/main.jconf -C ~/julius-kits/dictation-kit-v4.3.1-linux/am-gmm.jconf -nostrip\n```\n\n\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u306f`dictation-kit-v4.3.1-linux/run.sh`\u306e\u4e2d\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n`plughw:0,0`\u306e0,0\u306f\u30de\u30a4\u30af\u306e\u30ab\u30fc\u30c9No\u3068\u30c7\u30d0\u30a4\u30b9No\u3067\u3059\u3002\uff08\u79c1\u306e\u74b0\u5883\u3067\u306f0\u30680\uff09\n\n\u3082\u3057\n\n```bash\nStat: adin_oss: device name = /dev/dsp (application default)\nError: adin_oss: failed to open /dev/dsp\n```\n\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001\n\n```bash\n$ sudo sh -c \"echo snd-pcm-oss >> /etc/modules\"\n$ sudo reboot\n```\n\n\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n`-charconv EUC-JP UTF-8`\u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u5b9f\u884c\u3059\u308b\u3068\n\n```bash\nInternalError: codeconv: invalid multibyte sequence in the input\n```\n\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u518d\u8d77\u52d5\u5f8c\u3001Julius\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\n$ ALSADEV=\"plughw:0,0\" ~/julius-4.3.1/julius/julius -C ~/julius-kits/dictation-kit-v4.3.1-linux/main.jconf -C ~/julius-kits/dictation-kit-v4.3.1-linux/am-gmm.jconf -nostrip\n\n : \n\n### read waveform input\nStat: adin_oss: device name = /dev/dsp (application default)\nStat: adin_oss: sampling rate = 16000Hz\nStat: adin_oss: going to set latency to 50 msec\nStat: adin_oss: audio I/O Latency = 32 msec (fragment size = 512 samples)\nSTAT: AD-in thread created\n<<< please speak >>>\n```\n\n\u3046\u307e\u304f\u8d77\u52d5\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u72b6\u614b\u3067\u300c\u3053\u3093\u306b\u3061\u306f\u300d\u3068\u8a71\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash\n\npass1_best:  \u3053\u3093\u306b\u3061\u306f \u3002\npass1_best_wordseq: <s> \u3053\u3093\u306b\u3061\u306f+\u611f\u52d5\u8a5e </s>\npass1_best_phonemeseq: silB | k o N n i ch i w a | silE\npass1_best_score: -2942.340820\n### Recognition: 2nd pass (RL heuristic best-first)\nSTAT: 00 _default: 14430 generated, 1278 pushed, 264 nodes popped in 122\nsentence1:  \u3053\u3093\u306b\u3061\u306f \u3002\nwseq1: <s> \u3053\u3093\u306b\u3061\u306f+\u611f\u52d5\u8a5e </s>\nphseq1: silB | k o N n i ch i w a | silE\ncmscore1: 0.440 0.458 1.000\nscore1: -2959.848633\n\n<<< please speak >>>\n```\n\n\u3046\u307e\u304f\u8a8d\u8b58\u3067\u304d\u307e\u3057\u305f\u3002\n\n## \u8a8d\u8b58\u6642\u9593\u3068\u8a8d\u8b58\u7387\u3092\u9ad8\u3081\u308b\u5de5\u592b\n\u3053\u3053\u307e\u3067\u306e\u8a2d\u5b9a\u3067\u306f\u30de\u30a4\u30af\u3067\u8a71\u3057\u3066\u304b\u3089\u8a8d\u8b58\u3059\u308b\u307e\u3067\u306b2-3\u79d2\u304b\u304b\u308b\u306e\u3068\u3001\u8aa4\u8a8d\u8b58\u3082\u591a\u3044\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u6539\u5584\u3059\u308b\u65b9\u6cd5\u306e\u4e00\u3064\u3092\u7d39\u4ecb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n[Raspberry Pi\u3067\u97f3\u58f0\u8a8d\u8b58\uff08\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6539\u5584\uff09](http://qiita.com/t_oginogin/items/0634000e6713f9174b5f)\n", "tags": ["Julius", "RaspberryPi"]}