{"context": " More than 1 year has passed since last update.\n\ncreated_at \u3084 updated_at \u3092\u8ffd\u52a0\u3057\u305f\u3044\ncraeted_at \u3084 updated_at \u306a\u3069\uff0c\u305d\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u4f5c\u6210\u3055\u308c\u305f\u6642\u3084\u66f4\u65b0\u3055\u308c\u305f\u6642\u306e\u6642\u9593\u3092\u8a18\u9332\u3057\u3066\u304a\u304d\u305f\u3044\u5834\u5408\u306b\u3064\u3044\u3066\uff0e\n\u4fdd\u5b58\u3057\u305f\u5f8c\u3084\u4fdd\u5b58\u3059\u308b\u524d\u306a\u3069\u7279\u5b9a\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51e6\u7406\u3092\u884c\u3044\u305f\u3044\u3088\u3046\u306a\u3082\u306e\u306f\u30d3\u30d8\u30a4\u30d3\u30a2\u3067\u5b9f\u88c5\u3067\u304d\u308b\uff0e MySQL \u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u305f\u3081\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067 SQL \u767a\u884c\u6642\u306b now() \u306a\u3069\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n\nTimestampable \u3092\u4f7f\u3046\n\u4f8b\u3048\u3070\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30b9\u30ad\u30fc\u30de\u3092\u4f7f\u3046\u5834\u5408\u306b\u3064\u3044\u3066\uff0e\nCREATE TABLE `post` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `message` varchar(1000) NOT NULL DEFAULT '',\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;\n\ncreated_at \u304c\u65b0\u3057\u304f\u8ffd\u52a0\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\uff0cupdated_at \u304c\u66f4\u65b0\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067 \u6642\u9593\u3092\u66f4\u65b0\u3057\u305f\u3044\u5834\u5408\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u304f\uff0e\nfield \u304c\u5bfe\u8c61\u3068\u3057\u305f\u3044\u30ab\u30e9\u30e0\u306e\u540d\u524d\uff08 columnMap() \u3067\u540d\u524d\u3092\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u9023\u60f3\u914d\u5217\u306e\u5024\u306e\u65b9\uff09\uff0cformat \u306f php \u306e format_date() \u3067\u6307\u5b9a\u3067\u304d\u308b\u5f62\u5f0f\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\uff0e\nfield \u306f\u5bfe\u8c61\u304c\u4e00\u3064\u306e\u5834\u5408\u306f\u5358\u306a\u308b\u6587\u5b57\u5217\u3067\u3044\u3044\u304c\uff0c\u8907\u6570\u306e\u5834\u5408\u306f\u914d\u5217\u3067\u6e21\u3059\u3068\u3088\u3044\uff0e\nclass Post extends Phalcon\\Mvc\\Model\n{\n    public function initialize()\n    {\n        $this->addBehavior(new Phalcon\\Mvc\\Model\\Behavior\\Timestampable(array(\n            'beforeCreate' => array(\n                'field' => array(\n                    'created_at',\n                    'updated_at'\n                ),\n                'format' => 'Y-m-d H:i:s'\n            ),\n            'beforeUpdate' => array(\n                'field'  => 'updated_at',\n                'format' => 'Y-m-d H:i:s'\n            ),\n        )));\n    }\n}\n\n\nNOT NULL \u304c\u4ed8\u3044\u3066\u3044\u308b\u5834\u5408\n\u4f8b\u3048\u3070\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5bfe\u8c61\u3068\u306a\u308b\u30ab\u30e9\u30e0\u306b NOT NULL \u304c\u4ed8\u3044\u3066\u3044\u308b\u5834\u5408\uff0e\nCREATE TABLE `post` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `message` varchar(1000) NOT NULL DEFAULT '',\n  `created_at` datetime NOT NULL,\n  `updated_at` datetime NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8mb4;\n\nPhalcon \u306e Model \u3067\u306f\u30ab\u30e9\u30e0\u306b NOT NULL \u304c\u4ed8\u3044\u3066\u3044\u308b\u5834\u5408\uff0c\u81ea\u52d5\u7684\u306b Phalcon\\Mvc\\Model\\Validator\\PresenceOf \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u52d5\u304f\uff0e\n\u305d\u306e\u305f\u3081\u524d\u8ff0\u306e\u30b3\u30fc\u30c9\u3067\u306f  created_at is required \u3084 updated_at is required \u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u767a\u751f\u3059\u308b\uff0e\n\u3053\u308c\u3092\u9632\u3050\u305f\u3081\u306b\u306f PresenceOf \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u767a\u751f\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u304b\uff0c\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u524d\u306b\u30d3\u30d8\u30a4\u30d3\u30a2\u306e\u51e6\u7406\u304c\u52d5\u304f\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n\nPresenceOf \u306e\u6319\u52d5\u3092\u6b62\u3081\u308b\n\u3069\u3053\u304b\u3057\u3089\u3067\u4e0b\u8a18\u306e\u8a18\u8ff0\u3092\u8ffd\u52a0\u3059\u308b\uff0e\u305f\u3060\u3057\u3053\u308c\u3092\u8ffd\u52a0\u3059\u308b\u3068\u4ed6\u306e\u30ab\u30e9\u30e0\u306e NOT NULL \u306e\u5834\u5408\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3082\u306a\u304f\u306a\u308b\u306e\u3067\u81ea\u8eab\u3067 PresenceOf \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\uff0e\n\\Phalcon\\Mvc\\Model::setup(array(    \n    'notNullValidations' => false\n));\n\n\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u524d\u306b\u30d3\u30d8\u30a4\u30d3\u30a2\u306e\u51e6\u7406\u3092\u52d5\u304b\u3059\n\u5168\u4f53\u306b\u5f71\u97ff\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u3044\u5834\u5408\u306f\uff0c\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u52d5\u304f\u524d\u306b Timestampable \u30d3\u30d8\u30a4\u30d3\u30a2\u306e\u51e6\u7406\u304c\u52d5\u304f\u3088\u3046\u306b\u3057\u305f\u3082\u306e\u3092\u3064\u304b\u3046\uff0e\n\u3053\u306e\u30ea\u30b9\u30c8\u306e\u4e2d\u306b beforeValidation \u304c\u4ed8\u3044\u305f\u3082\u306e\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u6307\u5b9a\u3059\u308b\uff0e\nclass Post extends Phalcon\\Mvc\\Model\n{\n    public function initialize()\n    {\n        $this->addBehavior(new Phalcon\\Mvc\\Model\\Behavior\\Timestampable(array(\n            'beforeValidationOnCreate' => array(\n                'field' => array(\n                    'created_at',\n                    'updated_at'\n                ),\n                'format' => 'Y-m-d H:i:s'\n            ),\n            'beforeValidationOnUpdate' => array(\n                'field'  => 'updated_at',\n                'format' => 'Y-m-d H:i:s'\n            ),\n        )));\n    }\n}\n\n\n\u53c2\u8003\u6587\u732e\n\u30d3\u30d8\u30a4\u30d3\u30a2\u306b\u3064\u3044\u3066\n\n\u30e2\u30c7\u30eb\u306e\u50cd\u304d \u2014 Phalcon 1.3.1 documentation\nhttp://docs.phalconphp.com/ja/latest/reference/models.html#id27\n\nformat \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3067\u304d\u308b\u5f62\u5f0f\n\nPHP: DateTime::format - Manual\nhttp://www.php.net/manual/ja/datetime.format.php\n\nNOT NULL \u304c\u4ed8\u3044\u305f\u5834\u5408\u306e\u6319\u52d5\u306b\u3064\u3044\u3066\n\nTimestampable behavior - Discussion - Phalcon Framework\nhttp://forum.phalconphp.com/discussion/451/timestampable-behavior\n\n\u30e2\u30c7\u30eb\u3067\u767a\u884c\u3055\u308c\u308b\u30a4\u30d9\u30f3\u30c8\u306e\u30ea\u30b9\u30c8\n\nWorking with Models \u2014 Phalcon 1.3.0 documentation\nhttp://docs.phalconphp.com/en/latest/reference/models.html#events-and-events-manager\n\nNOT NULL \u306e\u5834\u5408\u306b PresenceOf \u3067\u5fc5\u9808\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u50cd\u304b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u306b\u3064\u3044\u3066\u306e\u8b70\u8ad6\n\ncreated_at and validation - Discussion - Phalcon Framework\nhttp://forum.phalconphp.com/discussion/283/created-at-and-validation\n\n\u5b9f\u969b\u306b PresenceOf \u3092\u7121\u52b9\u306b\u3059\u308b\u5834\u5408\u306b\u8a2d\u5b9a\u3059\u308b\u9805\u76ee\n\nWorking with Models \u2014 Phalcon 1.3.0 documentation\nhttp://docs.phalconphp.com/en/latest/reference/models.html#disabling-enabling-features\n\n# `created_at` \u3084 `updated_at` \u3092\u8ffd\u52a0\u3057\u305f\u3044\n\n`craeted_at` \u3084 `updated_at` \u306a\u3069\uff0c\u305d\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u4f5c\u6210\u3055\u308c\u305f\u6642\u3084\u66f4\u65b0\u3055\u308c\u305f\u6642\u306e\u6642\u9593\u3092\u8a18\u9332\u3057\u3066\u304a\u304d\u305f\u3044\u5834\u5408\u306b\u3064\u3044\u3066\uff0e\n\n\u4fdd\u5b58\u3057\u305f\u5f8c\u3084\u4fdd\u5b58\u3059\u308b\u524d\u306a\u3069\u7279\u5b9a\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51e6\u7406\u3092\u884c\u3044\u305f\u3044\u3088\u3046\u306a\u3082\u306e\u306f\u30d3\u30d8\u30a4\u30d3\u30a2\u3067\u5b9f\u88c5\u3067\u304d\u308b\uff0e MySQL \u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u305f\u3081\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067 SQL \u767a\u884c\u6642\u306b now() \u306a\u3069\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n\n## `Timestampable` \u3092\u4f7f\u3046\n\n\u4f8b\u3048\u3070\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30b9\u30ad\u30fc\u30de\u3092\u4f7f\u3046\u5834\u5408\u306b\u3064\u3044\u3066\uff0e\n\n```sql\nCREATE TABLE `post` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `message` varchar(1000) NOT NULL DEFAULT '',\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;\n```\n\n`created_at` \u304c\u65b0\u3057\u304f\u8ffd\u52a0\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\uff0c`updated_at` \u304c\u66f4\u65b0\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067 \u6642\u9593\u3092\u66f4\u65b0\u3057\u305f\u3044\u5834\u5408\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u304f\uff0e\n`field` \u304c\u5bfe\u8c61\u3068\u3057\u305f\u3044\u30ab\u30e9\u30e0\u306e\u540d\u524d\uff08 `columnMap()` \u3067\u540d\u524d\u3092\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u9023\u60f3\u914d\u5217\u306e\u5024\u306e\u65b9\uff09\uff0c`format` \u306f php \u306e `format_date()` \u3067\u6307\u5b9a\u3067\u304d\u308b\u5f62\u5f0f\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\uff0e\n`field` \u306f\u5bfe\u8c61\u304c\u4e00\u3064\u306e\u5834\u5408\u306f\u5358\u306a\u308b\u6587\u5b57\u5217\u3067\u3044\u3044\u304c\uff0c\u8907\u6570\u306e\u5834\u5408\u306f\u914d\u5217\u3067\u6e21\u3059\u3068\u3088\u3044\uff0e\n\n```php\nclass Post extends Phalcon\\Mvc\\Model\n{\n    public function initialize()\n    {\n        $this->addBehavior(new Phalcon\\Mvc\\Model\\Behavior\\Timestampable(array(\n            'beforeCreate' => array(\n                'field' => array(\n                    'created_at',\n                    'updated_at'\n                ),\n                'format' => 'Y-m-d H:i:s'\n            ),\n            'beforeUpdate' => array(\n                'field'  => 'updated_at',\n                'format' => 'Y-m-d H:i:s'\n            ),\n        )));\n    }\n}\n```\n\n## `NOT NULL` \u304c\u4ed8\u3044\u3066\u3044\u308b\u5834\u5408\n\n\u4f8b\u3048\u3070\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5bfe\u8c61\u3068\u306a\u308b\u30ab\u30e9\u30e0\u306b `NOT NULL` \u304c\u4ed8\u3044\u3066\u3044\u308b\u5834\u5408\uff0e\n\n```sql\nCREATE TABLE `post` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `message` varchar(1000) NOT NULL DEFAULT '',\n  `created_at` datetime NOT NULL,\n  `updated_at` datetime NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8mb4;\n```\n\nPhalcon \u306e Model \u3067\u306f\u30ab\u30e9\u30e0\u306b `NOT NULL` \u304c\u4ed8\u3044\u3066\u3044\u308b\u5834\u5408\uff0c\u81ea\u52d5\u7684\u306b `Phalcon\\Mvc\\Model\\Validator\\PresenceOf` \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u52d5\u304f\uff0e\n\u305d\u306e\u305f\u3081\u524d\u8ff0\u306e\u30b3\u30fc\u30c9\u3067\u306f  `created_at is required` \u3084 `updated_at is required` \u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u767a\u751f\u3059\u308b\uff0e\n\u3053\u308c\u3092\u9632\u3050\u305f\u3081\u306b\u306f `PresenceOf` \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u767a\u751f\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u304b\uff0c\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u524d\u306b\u30d3\u30d8\u30a4\u30d3\u30a2\u306e\u51e6\u7406\u304c\u52d5\u304f\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n\n### `PresenceOf` \u306e\u6319\u52d5\u3092\u6b62\u3081\u308b\n\n\u3069\u3053\u304b\u3057\u3089\u3067\u4e0b\u8a18\u306e\u8a18\u8ff0\u3092\u8ffd\u52a0\u3059\u308b\uff0e\u305f\u3060\u3057\u3053\u308c\u3092\u8ffd\u52a0\u3059\u308b\u3068\u4ed6\u306e\u30ab\u30e9\u30e0\u306e `NOT NULL` \u306e\u5834\u5408\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3082\u306a\u304f\u306a\u308b\u306e\u3067\u81ea\u8eab\u3067 `PresenceOf` \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\uff0e\n\n```php\n\\Phalcon\\Mvc\\Model::setup(array(    \n    'notNullValidations' => false\n));\n```\n\n\n### \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u524d\u306b\u30d3\u30d8\u30a4\u30d3\u30a2\u306e\u51e6\u7406\u3092\u52d5\u304b\u3059\n\n\u5168\u4f53\u306b\u5f71\u97ff\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u3044\u5834\u5408\u306f\uff0c\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u52d5\u304f\u524d\u306b `Timestampable` \u30d3\u30d8\u30a4\u30d3\u30a2\u306e\u51e6\u7406\u304c\u52d5\u304f\u3088\u3046\u306b\u3057\u305f\u3082\u306e\u3092\u3064\u304b\u3046\uff0e\n\u3053\u306e[\u30ea\u30b9\u30c8](http://docs.phalconphp.com/en/latest/reference/models.html#events-and-events-manager)\u306e\u4e2d\u306b `beforeValidation` \u304c\u4ed8\u3044\u305f\u3082\u306e\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u6307\u5b9a\u3059\u308b\uff0e\n\n```php\nclass Post extends Phalcon\\Mvc\\Model\n{\n    public function initialize()\n    {\n        $this->addBehavior(new Phalcon\\Mvc\\Model\\Behavior\\Timestampable(array(\n            'beforeValidationOnCreate' => array(\n                'field' => array(\n                    'created_at',\n                    'updated_at'\n                ),\n                'format' => 'Y-m-d H:i:s'\n            ),\n            'beforeValidationOnUpdate' => array(\n                'field'  => 'updated_at',\n                'format' => 'Y-m-d H:i:s'\n            ),\n        )));\n    }\n}\n```\n\n# \u53c2\u8003\u6587\u732e\n\n\u30d3\u30d8\u30a4\u30d3\u30a2\u306b\u3064\u3044\u3066\n\n> \u30e2\u30c7\u30eb\u306e\u50cd\u304d \u2014 Phalcon 1.3.1 documentation\n>\n> http://docs.phalconphp.com/ja/latest/reference/models.html#id27\n\n`format` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3067\u304d\u308b\u5f62\u5f0f\n\n> PHP: DateTime::format - Manual\n>\n> http://www.php.net/manual/ja/datetime.format.php\n\n`NOT NULL` \u304c\u4ed8\u3044\u305f\u5834\u5408\u306e\u6319\u52d5\u306b\u3064\u3044\u3066\n\n> Timestampable behavior - Discussion - Phalcon Framework\n>\n> http://forum.phalconphp.com/discussion/451/timestampable-behavior\n\n\u30e2\u30c7\u30eb\u3067\u767a\u884c\u3055\u308c\u308b\u30a4\u30d9\u30f3\u30c8\u306e\u30ea\u30b9\u30c8\n\n> Working with Models \u2014 Phalcon 1.3.0 documentation\n>\n> http://docs.phalconphp.com/en/latest/reference/models.html#events-and-events-manager\n\n`NOT NULL` \u306e\u5834\u5408\u306b `PresenceOf` \u3067\u5fc5\u9808\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u50cd\u304b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u306b\u3064\u3044\u3066\u306e\u8b70\u8ad6\n\n> created_at and validation - Discussion - Phalcon Framework\n>\n> http://forum.phalconphp.com/discussion/283/created-at-and-validation\n\n\u5b9f\u969b\u306b `PresenceOf` \u3092\u7121\u52b9\u306b\u3059\u308b\u5834\u5408\u306b\u8a2d\u5b9a\u3059\u308b\u9805\u76ee\n\n> Working with Models \u2014 Phalcon 1.3.0 documentation\n>\n> http://docs.phalconphp.com/en/latest/reference/models.html#disabling-enabling-features\n", "tags": ["Phalcon1.3.1"]}