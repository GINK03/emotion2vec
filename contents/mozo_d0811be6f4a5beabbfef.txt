{"context": " More than 1 year has passed since last update.\n\u30aa\u30d5\u30e9\u30a4\u30f3\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\uff09\u306e\u30b5\u30fc\u30d0\u306bredmine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u5834\u5408\u306e\u624b\u9806\u30e1\u30e2\u3002\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u53b3\u3057\u3044\u4f01\u696d\u306a\u3069\u3067\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\u30b5\u30fc\u30d0\u30bb\u30b0\u30e1\u30f3\u30c8\u3092\u4f7f\u3046\u3068\u3053\u308d\u3082\uff08\u305f\u307e\u306b\uff09\u3042\u308a\u307e\u3059\u3002\n\u30c6\u30af\u30ce\u30ed\u30b8\u3068\u3057\u3066ruby\u3001python\u3001nodejs\u7cfb\u306a\u3069\u5408\u308f\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u306f\u304a\u3044\u3066\u304a\u3044\u3066\u3001redmine\u3068\u304b\u306f\u30c1\u30fc\u30e0\u958b\u767a\u306b\u5f79\u306b\u7acb\u3064\u306e\u3067\u305b\u3081\u3066\u4f7f\u3044\u305f\u3044\u306a\u3041\u3002\n\u307f\u305f\u3044\u306a\u3068\u304d\u306b\u3002\n\u4e8b\u524d\u306b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u3067\u3044\u304f\u3064\u304b\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u3063\u3066\u304a\u304f\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u307e\u3059\u3002\n\uff08\u3068\u3082\u304b\u304f\u30015-b-i\u3092\u306a\u3093\u3068\u304b\u3067\u304d\u308c\u3070\u3044\u3051\u307e\u3059\uff09\n\n\n\u74b0\u5883\n\n\n\n\u9805\u76ee\n\u5185\u5bb9 ruby2.0\u7cfb\n\u5185\u5bb9 ruby1.9\u7cfb\n\n\n\n\nCent OS\n6.5\n\u540c\u5de6\n\n\nredmine\n2.5.2.stable\n\u540c\u5de6\n\n\nruby\n2.0.0-p481\n1.9.3-p547\n\n\ngem\n2.4.1\n\u540c\u5de6\n\n\nrails\n3.2.19\n\u540c\u5de6\n\n\nenvironment\nproduction\n\u540c\u5de6\n\n\ndatabase adapter\nmysql2\n\u540c\u5de6\n\n\n\u30a2\u30d7\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n/usr/local/apl/redmine-2.5.2\n\u540c\u5de6\n\n\n\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n/usr/local/src\n\u540c\u5de6\n\n\nhttpd\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n/var/www/html/redmine \u203b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\n\u540c\u5de6\n\n\nURL\nhttp://[hostname]/redmine\n\u540c\u5de6\n\n\n\n\n\n\u4e8b\u524d\u6e96\u5099\n\n\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u3067\u3001\u4e0b\u8a18\u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u300d\u306e1\u301c5.1\u307e\u3067\u3092\u5b9f\u65bd\n\nredmine\u914d\u7f6e\u5148\u306b\u79fb\u52d5\n# cd /usr/local/apl/redmine-2.5.2\n\n\n\ndatabase.yml\u3092\u4f5c\u6210\n\n./config/database.yml\nproduction:\n  adapter: mysql2\n  database: db_redmine\n  host: localhost\n  username: user_redmine\n  password: \"********\"\n  encoding: utf8\n\n\n\n\nbundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u6700\u65b0\u30ea\u30bd\u30fc\u30b9\u3092\u53c2\u7167\uff09\n\"vendor/bundle\"\u306bgem\u30d1\u30c3\u30b1\u30fc\u30b8\u7b49\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u5bfe\u8c61\u306fproduction\u74b0\u5883\u306e\u307f\u3001rmagick\u3082\u9664\u304f\n# bundle install --without development test rmagick --path ./vendor/bundle\n\nbundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4f5c\u6210\n# bundle package\n\n\n\u4e0a\u8a18\u3067\u4f5c\u6210\u3055\u308c\u305f\u3082\u306e\uff08redmine\u914d\u7f6e\u5148\u306e\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\uff09\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\n\nGemfile.lock\n\u4f7f\u7528\u3059\u308bgem\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3002\nconfig/database.yml\ndatabase\u63a5\u7d9a\u60c5\u5831\u304c\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\uff08mysql\u30a2\u30c0\u30d7\u30bf\u6307\u5b9a\uff09\u3002\nvendor/cache\n\u4f7f\u7528\u3059\u308bgem\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3002\u5727\u7e2e\u3057\u3066\u304a\u304f\u3002\uff08bundle_cache.tar.gz\uff09\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\n\n0. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\niptables\u3001ip6tables\u3001selinux\u306a\u3069\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8a2d\u5b9a\u3002\n\n1. yum\u30d1\u30c3\u30b1\u30fc\u30b8\nCD-ROM\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# mkdir /media/cdrom\n# mount -r -t iso9660 /dev/cdrom /media/cdrom/\n\n\u203b\u30e1\u30c7\u30a3\u30a2\u306e\u307f\u306e\u5834\u5408\u306f\"--disablerepo=\\* --enablerepo=c6-media\"\u3092\u4ed8\u4e0e\n# yum install gcc gcc-c++\n# yum install httpd httpd-devel\n# yum install mysql-server mysql-devel\n# yum install openssl-devel readline-devel zlib-devel curl-devel \n\n\n\n2.  libyaml\n\u4ee5\u4e0b\u304b\u3089libyaml, libyaml-devel\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttp://dl.fedoraproject.org/pub/epel/6/x86_64/\n\n# rpm -ivh libyaml-0.1.6-1.el6.x86_64.rpm libyaml-devel-0.1.6-1.el6.x86_64.rpm\n\n\n3. ruby\n\n3.1. ruby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4ee5\u4e0b\u304b\u3089ruby\u30bd\u30fc\u30b9\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttps://www.ruby-lang.org/ja/downloads/\n\n\u89e3\u51cd\uff06\u5c55\u958b\n\u30fbruby2.0\u7cfb\n# tar zxvf ruby-2.0.0-p481.tar.gz \n# cd ruby-2.0.0-p481\n\u30fbruby1.9\u7cfb\n# tar zxvf ruby-1.9.3-p547.tar.gz \n# cd ruby-1.9.3-p547\n\n\u30d3\u30eb\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# ./configure --disable-install-doc\n# make\n# make install\n\n\u78ba\u8a8d\n\u30fbruby2.0\u7cfb\n# ruby -v\nruby 2.0.0p481 (2014-05-08 revision 45883) [x86_64-linux]\n\n\u30fbruby1.9\u7cfb\n# ruby -v\nruby 1.9.3p547 (2014-05-14 revision 45962) [x86_64-linux]\n\n\n\n3.2. gem\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30aa\u30d5\u30e9\u30a4\u30f3\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u304b\u3089\u5bfe\u8c61\u306egem\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u691c\u7d22\u3057\u3066\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u6307\u5b9a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nhttps://rubygems.org/\n\n\n\u25a0gem\u3092\u6700\u65b0\u7248\u306b\u66f4\u65b0\n\u30fb\u30aa\u30f3\u30e9\u30a4\u30f3\n# gem update --system --no-rdoc --no-ri\n\n\u30fb\u30aa\u30d5\u30e9\u30a4\u30f3\n# gem install rubygems-update-2.4.1.gem\n# update_rubygems\n\ngem\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n# gem -v\n2.4.1\n\n\n\u25a0bundler\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install bundler --no-rdoc --no-ri\n\n\u25a0passenger\u95a2\u9023gem\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install daemon_controller rack passenger --no-rdoc --no-ri\n\n\n\u25a0\u78ba\u8a8d\n\u30fb1.9\u7cfb\n# gem list\nbigdecimal (1.1.0)\nbundler (1.6.5)\ndaemon_controller (1.2.0)\nio-console (0.3)\njson (1.5.5)\nminitest (2.5.1)\npassenger (4.0.48)\nrack (1.5.2)\nrake (0.9.2.2)\nrdoc (3.9.5)\nrubygems-update (2.4.1)\n\n\u30fb2.0\u7cfb\n# gem list\nbigdecimal (1.2.0)\nbundler (1.6.5)\ndaemon_controller (1.2.0)\nio-console (0.4.2)\njson (1.7.7)\nminitest (4.3.2)\npassenger (4.0.48)\npsych (2.0.0)\nrack (1.5.2)\nrake (0.9.6)\nrdoc (4.0.0)\nrubygems-update (2.4.1)\ntest-unit (2.0.0.0)\n\n\n4. mysql\n\n4.1. my.cnf\u306butf8\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n/etc/my.cnf\n[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\ncharacter-set-server=utf8\n\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n[mysql]\ndefault-character-set=utf8\n\n\n\n4.2. mysql\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n\u8d77\u52d5\n# service mysqld start\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# chkconfig mysqld on\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\uff08root\u30d1\u30b9\u30ef\u30fc\u30c9\u4ed6\uff09\n# mysql_secure_installation\n\nDB\u3001\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n# mysql -u root -p\nmysql> create database db_redmine default character set utf8;\nmysql> grant all on db_redmine.* to user_redmine@localhost identified by '********';\nmysql> flush privileges;\nmysql> exit\n\n\n5. redmine\n\n5.1. redmine\u30ea\u30bd\u30fc\u30b9\u914d\u7f6e\n\u4ee5\u4e0b\u304b\u3089\u6700\u65b0\u306eredmine\u3092\u53d6\u5f97\u3059\u308b\nhttp://www.redmine.org/projects/redmine/wiki/Download\nredmine-2.5.2.tar.gz\n\n\u914d\u7f6e\u3059\u308b\n# mkdir /usr/local/apl\n# tar zxvf redmine-2.5.2.tar.gz\n# mv ./redmine-2.5.2 /usr/local/apl/\n\n\n5.2. redmine\u30d3\u30eb\u30c9\uff08bundler\u3092\u4f7f\u7528\uff09\n\n5.2.1. \u4e8b\u524d\u306b\u4f5c\u6210\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u914d\u7f6e\uff08\u203b1 \u4f5c\u6210\u65b9\u6cd5\u306f\u300c\u4e8b\u524d\u6e96\u5099\u300d\uff09\nGemfile.lock\u306e\u914d\u7f6e\n# cp [Gemfile.lock\u30d5\u30a1\u30a4\u30eb] /usr/local/apl/redmine-2.5.2/\n\ndatabase.yml\u306e\u914d\u7f6e\n# cp [database.yml\u30d5\u30a1\u30a4\u30eb] /usr/local/apl/redmine-2.5.2/config/\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u914d\u7f6e\n# tar zxvf bundle_cache.tar.gz\n# mv  [\u89e3\u51cd\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea] /usr/local/apl/redmine-2.5.2/vendor/\n\n\n5.2.2. bundler\u3067redmine\u3092\u30d3\u30eb\u30c9\nredmine\u914d\u7f6e\u5148\u306b\u79fb\u52d5\n# cd /usr/local/apl/redmine-2.5.2\n\nbundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u30ed\u30fc\u30ab\u30eb\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u53c2\u7167\uff09\n# bundle install --without development test rmagick --path vendor/bundle --local\n\nredmine\u306e\u30d3\u30eb\u30c9\n# bundle exec rake generate_secret_token\n# RAILS_ENV=production bundle exec rake db:migrate\n\n\n6. passenger\u3068httpd\u306e\u8a2d\u5b9a\n\n6.1. httpd\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# passenger-install-apache2-module\n-> \u5b9f\u884c\u5f8c\u3001\u4ee5\u4e0b\u306e\u90e8\u5206\u30926-b\u306b\u8a18\u8f09\u3059\u308b\n    LoadModule\u30fb\u30fb\u30fb\n      <IfModule mod_passenger.c> \u301c </IfModule>\n\n\n6.2. passenger\u7528conf\u8a2d\u5b9a\n\n/etc/httpd/conf.d/passenger.conf\n\u30fb2.0\u7cfb\nLoadModule passenger_module /usr/local/lib/ruby/gems/2.0.0/gems/passenger-4.0.48/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/lib/ruby/gems/2.0.0/gems/passenger-4.0.48\n     PassengerDefaultRuby /usr/local/bin/ruby\n   </IfModule>\n\n\u30fb1.9\u7cfb\nLoadModule passenger_module /usr/local/lib/ruby/gems/1.9.1/gems/passenger-4.0.48/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/lib/ruby/gems/1.9.1/gems/passenger-4.0.48\n     PassengerDefaultRuby /usr/local/bin/ruby\n   </IfModule>\n\n# Passenger\u304c\u8ffd\u52a0\u3059\u308bHTTP\u30d8\u30c3\u30c0\u3092\u524a\u9664\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\uff08\u4efb\u610f\uff09\u3002\nHeader always unset \"X-Powered-By\"\nHeader always unset \"X-Rack-Cache\"\nHeader always unset \"X-Content-Digest\"\nHeader always unset \"X-Runtime\"\n\nPassengerMaxPoolSize 20\nPassengerMaxInstancesPerApp 4\nPassengerPoolIdleTime 3600\nPassengerHighPerformance on\nPassengerStatThrottleRate 10\nPassengerSpawnMethod smart\nRailsAppSpawnerIdleTime 86400\nPassengerMaxPreloaderIdleTime 0\n\n# DocumentRoot\u306e\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c\u3059\u308b\u8a2d\u5b9a\nRackBaseURI /redmine\n\n\n\n6.3. \u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210\n# ln -s /usr/local/apl/redmine-2.5.2/public /var/www/html/redmine\n\n\n6.4. \u6a29\u9650\u8a2d\u5b9a\n# chown -R apache:apache /var/www/html/redmine\n# chown -R apache:apache /usr/local/apl/redmine-2.5.2\n\n\n6.5. httpd\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5 or \u518d\u8d77\u52d5\nhttpd\u30b5\u30fc\u30d3\u30b9\u81ea\u52d5\u8d77\u52d5\u6709\u52b9\u5316\n# chkconfig httpd on\n\nhttpd\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n# service httpd configtest\n# service httpd start\n\n\u307e\u305f\u306fhttpd\u30b5\u30fc\u30d3\u30b9\u306e\u518d\u8d77\u52d5\n# service httpd configtest\n# service httpd graceful\n\n\n---\n\n\u30aa\u30d5\u30e9\u30a4\u30f3\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\uff09\u306e\u30b5\u30fc\u30d0\u306bredmine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u5834\u5408\u306e\u624b\u9806\u30e1\u30e2\u3002\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u53b3\u3057\u3044\u4f01\u696d\u306a\u3069\u3067\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\u30b5\u30fc\u30d0\u30bb\u30b0\u30e1\u30f3\u30c8\u3092\u4f7f\u3046\u3068\u3053\u308d\u3082\uff08\u305f\u307e\u306b\uff09\u3042\u308a\u307e\u3059\u3002\n\u30c6\u30af\u30ce\u30ed\u30b8\u3068\u3057\u3066ruby\u3001python\u3001nodejs\u7cfb\u306a\u3069\u5408\u308f\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u306f\u304a\u3044\u3066\u304a\u3044\u3066\u3001redmine\u3068\u304b\u306f\u30c1\u30fc\u30e0\u958b\u767a\u306b\u5f79\u306b\u7acb\u3064\u306e\u3067\u305b\u3081\u3066\u4f7f\u3044\u305f\u3044\u306a\u3041\u3002\n\u307f\u305f\u3044\u306a\u3068\u304d\u306b\u3002\n\n\u4e8b\u524d\u306b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u3067\u3044\u304f\u3064\u304b\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u3063\u3066\u304a\u304f\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u307e\u3059\u3002\n\uff08\u3068\u3082\u304b\u304f\u30015-b-i\u3092\u306a\u3093\u3068\u304b\u3067\u304d\u308c\u3070\u3044\u3051\u307e\u3059\uff09\n\n---\n\n# \u74b0\u5883\n\n| \u9805\u76ee | \u5185\u5bb9 ruby2.0\u7cfb | \u5185\u5bb9 ruby1.9\u7cfb |\n|:--|:---|:---|\n| Cent OS | 6.5 | \u540c\u5de6 |\n| redmine | 2.5.2.stable | \u540c\u5de6 |\n| ruby | 2.0.0-p481 | 1.9.3-p547 |\n| gem | 2.4.1 | \u540c\u5de6 |\n| rails | 3.2.19 | \u540c\u5de6 |\n| environment | production | \u540c\u5de6 |\n| database adapter | mysql2 | \u540c\u5de6 |\n| \u30a2\u30d7\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea | /usr/local/apl/redmine-2.5.2 | \u540c\u5de6 |\n| \u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea | /usr/local/src | \u540c\u5de6 |\n| httpd\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea | /var/www/html/redmine \u203b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af| \u540c\u5de6 |\n| URL | http://[hostname]/redmine | \u540c\u5de6 |\n\n---\n\n# <a name =\"\u6e96\u5099\">\u4e8b\u524d\u6e96\u5099</a>\n\n1. \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u3067\u3001\u4e0b\u8a18\u300c[\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806](#\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806)\u300d\u306e1\u301c5.1\u307e\u3067\u3092\u5b9f\u65bd\n\n2. redmine\u914d\u7f6e\u5148\u306b\u79fb\u52d5\n\n    ```\n    # cd /usr/local/apl/redmine-2.5.2\n    ```\n\n3. database.yml\u3092\u4f5c\u6210\n\n    ```yaml:./config/database.yml\n    production:\n      adapter: mysql2\n      database: db_redmine\n      host: localhost\n      username: user_redmine\n      password: \"********\"\n      encoding: utf8\n    ```\n\n4. bundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u6700\u65b0\u30ea\u30bd\u30fc\u30b9\u3092\u53c2\u7167\uff09\n\n    ```\n    \"vendor/bundle\"\u306bgem\u30d1\u30c3\u30b1\u30fc\u30b8\u7b49\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n    \u5bfe\u8c61\u306fproduction\u74b0\u5883\u306e\u307f\u3001rmagick\u3082\u9664\u304f\n    # bundle install --without development test rmagick --path ./vendor/bundle\n \n    bundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4f5c\u6210\n    # bundle package\n    ```\n\n5. \u4e0a\u8a18\u3067\u4f5c\u6210\u3055\u308c\u305f\u3082\u306e\uff08redmine\u914d\u7f6e\u5148\u306e\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\uff09\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\n* **Gemfile.lock**\n\u4f7f\u7528\u3059\u308bgem\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3002\n\n* **config/database.yml**\ndatabase\u63a5\u7d9a\u60c5\u5831\u304c\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\uff08mysql\u30a2\u30c0\u30d7\u30bf\u6307\u5b9a\uff09\u3002\n\n* **vendor/cache**\n\u4f7f\u7528\u3059\u308bgem\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3002\u5727\u7e2e\u3057\u3066\u304a\u304f\u3002\uff08bundle_cache.tar.gz\uff09\n\n\n---\n\n# <a name =\"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\">\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806</a>\n\n## 0. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\niptables\u3001ip6tables\u3001selinux\u306a\u3069\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8a2d\u5b9a\u3002\n\n\n## 1. yum\u30d1\u30c3\u30b1\u30fc\u30b8\n\n```\nCD-ROM\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# mkdir /media/cdrom\n# mount -r -t iso9660 /dev/cdrom /media/cdrom/\n\n\u203b\u30e1\u30c7\u30a3\u30a2\u306e\u307f\u306e\u5834\u5408\u306f\"--disablerepo=\\* --enablerepo=c6-media\"\u3092\u4ed8\u4e0e\n# yum install gcc gcc-c++\n# yum install httpd httpd-devel\n# yum install mysql-server mysql-devel\n# yum install openssl-devel readline-devel zlib-devel curl-devel \n\n```\n\n## 2.  libyaml\n\n```\n\u4ee5\u4e0b\u304b\u3089libyaml, libyaml-devel\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttp://dl.fedoraproject.org/pub/epel/6/x86_64/\n\n# rpm -ivh libyaml-0.1.6-1.el6.x86_64.rpm libyaml-devel-0.1.6-1.el6.x86_64.rpm\n```\n\n## 3. ruby\n\n### 3.1. ruby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n\u4ee5\u4e0b\u304b\u3089ruby\u30bd\u30fc\u30b9\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttps://www.ruby-lang.org/ja/downloads/\n\n\u89e3\u51cd\uff06\u5c55\u958b\n\u30fbruby2.0\u7cfb\n# tar zxvf ruby-2.0.0-p481.tar.gz \n# cd ruby-2.0.0-p481\n\u30fbruby1.9\u7cfb\n# tar zxvf ruby-1.9.3-p547.tar.gz \n# cd ruby-1.9.3-p547\n\n\u30d3\u30eb\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# ./configure --disable-install-doc\n# make\n# make install\n\n\u78ba\u8a8d\n\u30fbruby2.0\u7cfb\n# ruby -v\nruby 2.0.0p481 (2014-05-08 revision 45883) [x86_64-linux]\n\n\u30fbruby1.9\u7cfb\n# ruby -v\nruby 1.9.3p547 (2014-05-14 revision 45962) [x86_64-linux]\n\n```\n\n### 3.2. gem\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n\u30aa\u30d5\u30e9\u30a4\u30f3\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u304b\u3089\u5bfe\u8c61\u306egem\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u691c\u7d22\u3057\u3066\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u6307\u5b9a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nhttps://rubygems.org/\n\n\n\u25a0gem\u3092\u6700\u65b0\u7248\u306b\u66f4\u65b0\n\u30fb\u30aa\u30f3\u30e9\u30a4\u30f3\n# gem update --system --no-rdoc --no-ri\n\n\u30fb\u30aa\u30d5\u30e9\u30a4\u30f3\n# gem install rubygems-update-2.4.1.gem\n# update_rubygems\n\ngem\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n# gem -v\n2.4.1\n\n\n\u25a0bundler\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install bundler --no-rdoc --no-ri\n\n\u25a0passenger\u95a2\u9023gem\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# gem install daemon_controller rack passenger --no-rdoc --no-ri\n\n\n\u25a0\u78ba\u8a8d\n\u30fb1.9\u7cfb\n# gem list\nbigdecimal (1.1.0)\nbundler (1.6.5)\ndaemon_controller (1.2.0)\nio-console (0.3)\njson (1.5.5)\nminitest (2.5.1)\npassenger (4.0.48)\nrack (1.5.2)\nrake (0.9.2.2)\nrdoc (3.9.5)\nrubygems-update (2.4.1)\n\n\u30fb2.0\u7cfb\n# gem list\nbigdecimal (1.2.0)\nbundler (1.6.5)\ndaemon_controller (1.2.0)\nio-console (0.4.2)\njson (1.7.7)\nminitest (4.3.2)\npassenger (4.0.48)\npsych (2.0.0)\nrack (1.5.2)\nrake (0.9.6)\nrdoc (4.0.0)\nrubygems-update (2.4.1)\ntest-unit (2.0.0.0)\n```\n\n## 4. mysql\n\n### 4.1. my.cnf\u306butf8\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n```/etc/my.cnf \n[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\ncharacter-set-server=utf8\n\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n[mysql]\ndefault-character-set=utf8\n```\n\n### 4.2. mysql\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n```\n\u8d77\u52d5\n# service mysqld start\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# chkconfig mysqld on\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\uff08root\u30d1\u30b9\u30ef\u30fc\u30c9\u4ed6\uff09\n# mysql_secure_installation\n\nDB\u3001\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n# mysql -u root -p\nmysql> create database db_redmine default character set utf8;\nmysql> grant all on db_redmine.* to user_redmine@localhost identified by '********';\nmysql> flush privileges;\nmysql> exit\n```\n\n## 5. redmine\n\n### 5.1. redmine\u30ea\u30bd\u30fc\u30b9\u914d\u7f6e\n```\n\u4ee5\u4e0b\u304b\u3089\u6700\u65b0\u306eredmine\u3092\u53d6\u5f97\u3059\u308b\nhttp://www.redmine.org/projects/redmine/wiki/Download\nredmine-2.5.2.tar.gz\n\n\u914d\u7f6e\u3059\u308b\n# mkdir /usr/local/apl\n# tar zxvf redmine-2.5.2.tar.gz\n# mv ./redmine-2.5.2 /usr/local/apl/\n```\n\n### 5.2. redmine\u30d3\u30eb\u30c9\uff08bundler\u3092\u4f7f\u7528\uff09\n#### 5.2.1. \u4e8b\u524d\u306b\u4f5c\u6210\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u914d\u7f6e\uff08\u203b1 \u4f5c\u6210\u65b9\u6cd5\u306f\u300c[\u4e8b\u524d\u6e96\u5099](#\u4e8b\u524d\u6e96\u5099)\u300d\uff09\n```\nGemfile.lock\u306e\u914d\u7f6e\n# cp [Gemfile.lock\u30d5\u30a1\u30a4\u30eb] /usr/local/apl/redmine-2.5.2/\n\ndatabase.yml\u306e\u914d\u7f6e\n# cp [database.yml\u30d5\u30a1\u30a4\u30eb] /usr/local/apl/redmine-2.5.2/config/\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u914d\u7f6e\n# tar zxvf bundle_cache.tar.gz\n# mv  [\u89e3\u51cd\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea] /usr/local/apl/redmine-2.5.2/vendor/\n```\n\n#### 5.2.2. bundler\u3067redmine\u3092\u30d3\u30eb\u30c9\n```\nredmine\u914d\u7f6e\u5148\u306b\u79fb\u52d5\n# cd /usr/local/apl/redmine-2.5.2\n\nbundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u30ed\u30fc\u30ab\u30eb\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u53c2\u7167\uff09\n# bundle install --without development test rmagick --path vendor/bundle --local\n\nredmine\u306e\u30d3\u30eb\u30c9\n# bundle exec rake generate_secret_token\n# RAILS_ENV=production bundle exec rake db:migrate\n```\n\n\n## 6. passenger\u3068httpd\u306e\u8a2d\u5b9a\n\n### 6.1. httpd\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# passenger-install-apache2-module\n-> \u5b9f\u884c\u5f8c\u3001\u4ee5\u4e0b\u306e\u90e8\u5206\u30926-b\u306b\u8a18\u8f09\u3059\u308b\n    LoadModule\u30fb\u30fb\u30fb\n      <IfModule mod_passenger.c> \u301c </IfModule>\n```\n\n### 6.2. passenger\u7528conf\u8a2d\u5b9a\n```/etc/httpd/conf.d/passenger.conf\n\u30fb2.0\u7cfb\nLoadModule passenger_module /usr/local/lib/ruby/gems/2.0.0/gems/passenger-4.0.48/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/lib/ruby/gems/2.0.0/gems/passenger-4.0.48\n     PassengerDefaultRuby /usr/local/bin/ruby\n   </IfModule>\n\n\u30fb1.9\u7cfb\nLoadModule passenger_module /usr/local/lib/ruby/gems/1.9.1/gems/passenger-4.0.48/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/lib/ruby/gems/1.9.1/gems/passenger-4.0.48\n     PassengerDefaultRuby /usr/local/bin/ruby\n   </IfModule>\n\n# Passenger\u304c\u8ffd\u52a0\u3059\u308bHTTP\u30d8\u30c3\u30c0\u3092\u524a\u9664\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\uff08\u4efb\u610f\uff09\u3002\nHeader always unset \"X-Powered-By\"\nHeader always unset \"X-Rack-Cache\"\nHeader always unset \"X-Content-Digest\"\nHeader always unset \"X-Runtime\"\n\nPassengerMaxPoolSize 20\nPassengerMaxInstancesPerApp 4\nPassengerPoolIdleTime 3600\nPassengerHighPerformance on\nPassengerStatThrottleRate 10\nPassengerSpawnMethod smart\nRailsAppSpawnerIdleTime 86400\nPassengerMaxPreloaderIdleTime 0\n\n# DocumentRoot\u306e\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c\u3059\u308b\u8a2d\u5b9a\nRackBaseURI /redmine\n```\n\n### 6.3. \u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210\n```\n# ln -s /usr/local/apl/redmine-2.5.2/public /var/www/html/redmine\n```\n\n### 6.4. \u6a29\u9650\u8a2d\u5b9a\n```\n# chown -R apache:apache /var/www/html/redmine\n# chown -R apache:apache /usr/local/apl/redmine-2.5.2\n```\n\n### 6.5. httpd\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5 or \u518d\u8d77\u52d5\n```\nhttpd\u30b5\u30fc\u30d3\u30b9\u81ea\u52d5\u8d77\u52d5\u6709\u52b9\u5316\n# chkconfig httpd on\n\nhttpd\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n# service httpd configtest\n# service httpd start\n\n\u307e\u305f\u306fhttpd\u30b5\u30fc\u30d3\u30b9\u306e\u518d\u8d77\u52d5\n# service httpd configtest\n# service httpd graceful\n```\n", "tags": ["Redmine", "Ruby", "Rails"]}