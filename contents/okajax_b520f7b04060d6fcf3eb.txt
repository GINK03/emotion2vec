{"context": "(\u958b\u767a\u74b0\u5883: Mac+Node.js)\nV1\u304b\u3089V3\u3067\u306e\u958b\u767a\u306b\u5909\u3048\u3066\u304b\u3089\u3068\u3044\u3046\u3082\u306e\u3001\n\u82e6\u52b4\u304c\u305f\u3048\u307e\u305b\u3093\u3002\u3053\u3093\u306b\u3061\u306f\u3001okajax\u3067\u3059\u3002\n\n\u4f55\u304c\u3042\u3063\u305f\u3093\u3084\n\u304d\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nMicrosoft Bot Framework V3\u3067 Slack Bot \u3064\u304f\u308b\u3068\u3001\n\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u5168\u3066\u306e\u767a\u8a00\u3092\u62fe\u3063\u3066\u3057\u307e\u3046\u3093\u3067\u3059\u3002\u3002\nV1\u306e\u3068\u304d\u306f\u3001\u300c\u5168\u3066\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u53cd\u5fdc\u3059\u308b/\u3057\u306a\u3044\u300d\u3068\u3044\u3046\u8a2d\u5b9a\u304c\u3042\u3063\u305f\u306e\u306b\uff01\uff01\n\n\u306a\u305c\u304bV3\u306b\u306f\u305d\u306e\u8a2d\u5b9a\u304c\u306a\u304f\u306a\u3063\u305f\u3088\u3046\u306a\u306e\u3067...\n\u306a\u3093\u3068\u304b\u3057\u307e\u3059...\uff01\n\n\u3067\uff1f\u8981\u306f\u3001\u3069\u3046\u3057\u305f\u3044\u3093\u3084\n\u8981\u4ef6\u3092\u6574\u7406\u3057\u307e\u3059\u3002\n\n\nBot\u304c\u52d5\u3044\u3066\u308b\u306e\u306f\u3001Slack\u4e0a\u3067\u3042\u308b\u3002\n\u305d\u306e\u3068\u304d\u3001\u30c1\u30e3\u30f3\u30cd\u30eb\u4e0a\u3067\u306e\u4f1a\u8a71\u3067\u306f\u3001Bot\u306b\u52d5\u3044\u3066\u307b\u3057\u304f\u306a\u3044\u3002\n\u3067\u3082\u3067\u3082\u3001@\u30de\u30fc\u30af\u4ed8\u304d\u3067\u30ea\u30d7\u304d\u305f\u6642\u306f\u52d5\u3044\u3066\u307b\u3057\u30fc\u306e\uff01(\u308f\u304c\u307e\u307e\n\n\n\u4e0a\u8a18\u3059\u3079\u3066\u3092\u6e80\u305f\u3059\u3082\u306e\u304c\u3001Slack\u4e0a\u3067\u30a4\u30a4\u30ab\u30f3\u30b8\u306eBot \u3068\u3044\u3046\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u554f\u984c\u306fV1\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u304c\u898b\u5f53\u305f\u3089\u306a\u3044\u4e8b...\n\n\u3058\u3083\u3042\u3082\u3046session.message\u306e\u4e2d\u8eab\u3067\u5224\u5225\u3057\u3088\u3046\u3058\u3083\u306a\u3044\u306e\n\u4f1a\u8a71\u306e\u306a\u304b\u3067 session.message \u3092\u547c\u3073\u51fa\u3059\u3068\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u7d30\u304b\u3044\u60c5\u5831\u304c\u307f\u308c\u307e\u3059\u3002(\u51fa\u529b\u306fObject\u5f62\u5f0f)\n\u305d\u306e\u306a\u304b\u306b\u306f\u300cSlack\u4e0a\u3067\u4eca\u3069\u3046\u3044\u3046\u72b6\u614b\u306a\u306e\u304b\u300d\u3068\u3044\u3046\u60c5\u5831\u3082\u5165\u3063\u3066\u3044\u307e\u3059\u3093\u3067\n\u305d\u308c\u3092\u8abf\u3079\u3061\u3083\u3044\u307e\u3057\u3087\u3046\u3002\n\u2193\u3053\u3093\u306a\u30ab\u30f3\u30b8 (json.human.js\u3067\u898b\u3084\u3059\u304f\u306a\u3063\u305f\u7dba\u9e97\u306a\u30b8\u30e3\u30a4\u30a2\u30f3\u30b8\u30a7\u30a4\u30bd\u30f3\u3067\u3059)\n\nSlack\u306e\u60c5\u5831\u304c\u30c1\u30e9\u30db\u30e9\u78ba\u8a8d\u3067\u304d\u307e\u3059\u306d\u301c\u3002\n\n\u898b\u308b\u3079\u304d\u7b87\u6240\u306f?\n\u4e0b\u8a18\u306f\u3001\u30c1\u30e3\u30f3\u30cd\u30eb ramdom \u3067\u767a\u8a00\u3057\u305f\u3068\u304d\u306e\nsession.message \u306e\u5185\u5bb9\u3067\u3059\u3002\n\u3055\u304d\u307b\u3069\u306e\u3082\u306e\u3068\u306f\u9055\u3044\u3001address.conversation.name\u3068\u3044\u3046\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3053\u306b\u300c\u3069\u3053\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u767a\u8a00\u3057\u305f\u304b\u300d\u3068\u3044\u3046\u60c5\u5831\u304c\u8a18\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n\u5224\u5225\u3057\u3088\u30fc\uff01\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\nsession.endConversation(); \u3067\u5f37\u5236\u7684\u306b\u4f1a\u8a71\u3092\u4e2d\u65ad\u3057\u3066\u3044\u308b\u306e\u304c\u30ad\u30e2\u3067\u3059\u3002\nfunction slack_channel_check(session) {\n\n    // session.message\u3092\u4fdd\u5b58\n    var msg_info = session.message;\n    // Bot\u3078\u306e\u30ea\u30d7\u30e9\u30a4\u3092\u5224\u5225\u3059\u308b\u305f\u3081\u306e\u6587\u5b57\u5217\u3092\u7528\u610f\n    var bot_name_match = \"@\" + msg_info.address.bot.name; //\"@\u30dc\u30c3\u30c8id\"\u306b\u306a\u308b\n\n    // \u8981\u4ef61,2 \u304c\u771f\u3067\u3042\u308b\u304b\u5224\u5b9a\n    if (msg_info.source == \"slack\" &&\n        msg_info.address.conversation.hasOwnProperty('name')) {\n\n        // \u8981\u4ef63 \u306e\u53cd\u5bfe\u89e3\u91c8 = \u767a\u8a00\u306e\u306a\u304b\u306b\"@\u30dc\u30c3\u30c8id\"\u304c\u306a\u3051\u308c\u3070\u3001\u4f55\u3082\u3057\u306a\u3044\n        if( msg_info.text.indexOf(bot_name_match) < 0 ){\n\n            // Slack\u3067\u304b\u3064\u3001\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u306e\u4f1a\u8a71\uff01 \u3067\u3082\u30e1\u30f3\u30b7\u30e7\u30f3\u304c\u306a\u3044\u305f\u3081\u3001\u4f1a\u8a71\u3092\u5f37\u5236\u7d42\u4e86\u3057\u307e\u3059\uff01\n            session.endConversation();\n\n        }\n\n    }\n}\n\n\u3053\u308c\u3092dialog\u5185\u306e\u6700\u521d\u3067\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\nintents\n    .matches('AskWeather', function (session, args) {\n\n        slack_channel_check(session);\n\n        ...\n\n\u3053\u308c\u3067\u3001\u30c1\u30e3\u30f3\u30cd\u30eb\u4e0a\u3067\n@\u30de\u30fc\u30af\u4ed8\u304d\u4ee5\u5916\u306e\u767a\u8a00\u306f\u3001\u7121\u8996\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\u3084\u3084\u3001\u529b\u6280\u3067\u3059\u304c\u3002(T^T)\n\n\u306a\u306b\u304b\u4ed6\u306b\u826f\u3044\u65b9\u6cd5\u3092\u77e5\u3063\u3066\u3044\u308b\u65b9\u306f\u30b3\u30e1\u30f3\u30c8\u304a\u9858\u3044\u3057\u307e\u3059.....  \n\u3067\u306f\u3067\u306f\uff01\n\n\u3055\u3044\u3054\u306b\n\u6700\u5f8c\u307e\u3067\u8aad\u3093\u3067\u304f\u308c\u3066\u3042\u308a\u304c\u3068\u3046\u3002///\n\u30a2\u30e1\u3061\u3083\u3093\u3069\u30fc\u305e  \n*(\u958b\u767a\u74b0\u5883: Mac+Node.js)*\n\nV1\u304b\u3089V3\u3067\u306e\u958b\u767a\u306b\u5909\u3048\u3066\u304b\u3089\u3068\u3044\u3046\u3082\u306e\u3001\n\u82e6\u52b4\u304c\u305f\u3048\u307e\u305b\u3093\u3002\u3053\u3093\u306b\u3061\u306f\u3001okajax\u3067\u3059\u3002\n# \u4f55\u304c\u3042\u3063\u305f\u3093\u3084\n\u304d\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nMicrosoft Bot Framework V3\u3067 Slack Bot \u3064\u304f\u308b\u3068\u3001\n**\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u5168\u3066\u306e\u767a\u8a00\u3092\u62fe\u3063\u3066\u3057\u307e\u3046\u3093\u3067\u3059\u3002\u3002**\n\nV1\u306e\u3068\u304d\u306f\u3001\u300c\u5168\u3066\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u53cd\u5fdc\u3059\u308b/\u3057\u306a\u3044\u300d\u3068\u3044\u3046\u8a2d\u5b9a\u304c\u3042\u3063\u305f\u306e\u306b\uff01\uff01\n\n![Can_I_use__bot___edit_details.png](https://qiita-image-store.s3.amazonaws.com/0/124249/68e0ed26-fc7f-be14-13a9-ad9d21404859.png)\n\n\u306a\u305c\u304bV3\u306b\u306f\u305d\u306e\u8a2d\u5b9a\u304c\u306a\u304f\u306a\u3063\u305f\u3088\u3046\u306a\u306e\u3067...\n**\u306a\u3093\u3068\u304b\u3057\u307e\u3059...\uff01**\n\n\n#\u3067\uff1f\u8981\u306f\u3001\u3069\u3046\u3057\u305f\u3044\u3093\u3084\n\n\u8981\u4ef6\u3092\u6574\u7406\u3057\u307e\u3059\u3002\n\n>1. Bot\u304c\u52d5\u3044\u3066\u308b\u306e\u306f\u3001Slack\u4e0a\u3067\u3042\u308b\u3002\n>2. \u305d\u306e\u3068\u304d\u3001\u30c1\u30e3\u30f3\u30cd\u30eb\u4e0a\u3067\u306e\u4f1a\u8a71\u3067\u306f\u3001Bot\u306b\u52d5\u3044\u3066\u307b\u3057\u304f\u306a\u3044\u3002\n>3. \u3067\u3082\u3067\u3082\u3001@\u30de\u30fc\u30af\u4ed8\u304d\u3067\u30ea\u30d7\u304d\u305f\u6642\u306f\u52d5\u3044\u3066\u307b\u3057\u30fc\u306e\uff01(\u308f\u304c\u307e\u307e\n\n**\u4e0a\u8a18\u3059\u3079\u3066\u3092\u6e80\u305f\u3059\u3082\u306e\u304c\u3001Slack\u4e0a\u3067\u30a4\u30a4\u30ab\u30f3\u30b8\u306eBot** \u3068\u3044\u3046\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u554f\u984c\u306fV1\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u304c\u898b\u5f53\u305f\u3089\u306a\u3044\u4e8b...\n\n#\u3058\u3083\u3042\u3082\u3046session.message\u306e\u4e2d\u8eab\u3067\u5224\u5225\u3057\u3088\u3046\u3058\u3083\u306a\u3044\u306e\n\n\u4f1a\u8a71\u306e\u306a\u304b\u3067 `session.message` \u3092\u547c\u3073\u51fa\u3059\u3068\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u7d30\u304b\u3044\u60c5\u5831\u304c\u307f\u308c\u307e\u3059\u3002(\u51fa\u529b\u306fObject\u5f62\u5f0f)\n\u305d\u306e\u306a\u304b\u306b\u306f**\u300cSlack\u4e0a\u3067\u4eca\u3069\u3046\u3044\u3046\u72b6\u614b\u306a\u306e\u304b\u300d**\u3068\u3044\u3046\u60c5\u5831\u3082\u5165\u3063\u3066\u3044\u307e\u3059\u3093\u3067\n\u305d\u308c\u3092\u8abf\u3079\u3061\u3083\u3044\u307e\u3057\u3087\u3046\u3002\n\n*\u2193\u3053\u3093\u306a\u30ab\u30f3\u30b8 (json.human.js\u3067\u898b\u3084\u3059\u304f\u306a\u3063\u305f\u7dba\u9e97\u306a~~\u30b8\u30e3\u30a4\u30a2\u30f3~~\u30b8\u30a7\u30a4\u30bd\u30f3\u3067\u3059)*\n\n![json_human_js_-_Json_Formatting_for_Human_Beings.png](https://qiita-image-store.s3.amazonaws.com/0/124249/c9459b9f-4cb6-06bc-4792-fe1da4f15249.png)\n\nSlack\u306e\u60c5\u5831\u304c\u30c1\u30e9\u30db\u30e9\u78ba\u8a8d\u3067\u304d\u307e\u3059\u306d\u301c\u3002\n\n## \u898b\u308b\u3079\u304d\u7b87\u6240\u306f?\n\n\u4e0b\u8a18\u306f\u3001\u30c1\u30e3\u30f3\u30cd\u30eb `ramdom` \u3067\u767a\u8a00\u3057\u305f\u3068\u304d\u306e\n`session.message` \u306e\u5185\u5bb9\u3067\u3059\u3002\n\n\u3055\u304d\u307b\u3069\u306e\u3082\u306e\u3068\u306f\u9055\u3044\u3001`address.conversation.name`\u3068\u3044\u3046\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3053\u306b\u300c\u3069\u3053\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u767a\u8a00\u3057\u305f\u304b\u300d\u3068\u3044\u3046\u60c5\u5831\u304c\u8a18\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n![json_human_js_-_Json_Formatting_for_Human_Beings.png](https://qiita-image-store.s3.amazonaws.com/0/124249/be4fb2bc-8aec-bdf4-a32d-2ba54fc36ed7.png)\n\n## \u5224\u5225\u3057\u3088\u30fc\uff01\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n`session.endConversation();` \u3067\u5f37\u5236\u7684\u306b\u4f1a\u8a71\u3092\u4e2d\u65ad\u3057\u3066\u3044\u308b\u306e\u304c\u30ad\u30e2\u3067\u3059\u3002\n\n```js\nfunction slack_channel_check(session) {\n\n    // session.message\u3092\u4fdd\u5b58\n    var msg_info = session.message;\n    // Bot\u3078\u306e\u30ea\u30d7\u30e9\u30a4\u3092\u5224\u5225\u3059\u308b\u305f\u3081\u306e\u6587\u5b57\u5217\u3092\u7528\u610f\n    var bot_name_match = \"@\" + msg_info.address.bot.name; //\"@\u30dc\u30c3\u30c8id\"\u306b\u306a\u308b\n\n    // \u8981\u4ef61,2 \u304c\u771f\u3067\u3042\u308b\u304b\u5224\u5b9a\n    if (msg_info.source == \"slack\" &&\n        msg_info.address.conversation.hasOwnProperty('name')) {\n\n        // \u8981\u4ef63 \u306e\u53cd\u5bfe\u89e3\u91c8 = \u767a\u8a00\u306e\u306a\u304b\u306b\"@\u30dc\u30c3\u30c8id\"\u304c\u306a\u3051\u308c\u3070\u3001\u4f55\u3082\u3057\u306a\u3044\n        if( msg_info.text.indexOf(bot_name_match) < 0 ){\n\n            // Slack\u3067\u304b\u3064\u3001\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u306e\u4f1a\u8a71\uff01 \u3067\u3082\u30e1\u30f3\u30b7\u30e7\u30f3\u304c\u306a\u3044\u305f\u3081\u3001\u4f1a\u8a71\u3092\u5f37\u5236\u7d42\u4e86\u3057\u307e\u3059\uff01\n            session.endConversation();\n\n        }\n\n    }\n}\n```\n\n\u3053\u308c\u3092dialog\u5185\u306e\u6700\u521d\u3067\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n```js\nintents\n    .matches('AskWeather', function (session, args) {\n\n        slack_channel_check(session);\n\n        ...\n```\n\n\u3053\u308c\u3067\u3001\u30c1\u30e3\u30f3\u30cd\u30eb\u4e0a\u3067\n**@\u30de\u30fc\u30af\u4ed8\u304d\u4ee5\u5916\u306e\u767a\u8a00\u306f\u3001\u7121\u8996\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\uff01**\n\u3084\u3084\u3001\u529b\u6280\u3067\u3059\u304c\u3002(T^T)\n\n![Slack.png](https://qiita-image-store.s3.amazonaws.com/0/124249/6fb5cfec-65ed-d493-9ca0-22db66043f1c.png)\n\n\n\u306a\u306b\u304b\u4ed6\u306b\u826f\u3044\u65b9\u6cd5\u3092\u77e5\u3063\u3066\u3044\u308b\u65b9\u306f\u30b3\u30e1\u30f3\u30c8\u304a\u9858\u3044\u3057\u307e\u3059..... :scream_cat: \n\n\u3067\u306f\u3067\u306f\uff01\n\n#\u3055\u3044\u3054\u306b\n\n\u6700\u5f8c\u307e\u3067\u8aad\u3093\u3067\u304f\u308c\u3066\u3042\u308a\u304c\u3068\u3046\u3002///\n\u30a2\u30e1\u3061\u3083\u3093\u3069\u30fc\u305e :candy: \n\n\n\n", "tags": ["BotFramework", "Slack", "bot"]}