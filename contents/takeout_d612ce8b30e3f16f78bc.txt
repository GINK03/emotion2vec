{"context": "\n\n\u6982\u8981\nhttp://qiita.com/takeout/items/0af22f1de4013eddbd6e\n\u3067\u5225\u306e\u65b9\u6cd5\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u305d\u3061\u3089\u3092\n\n\u30bd\u30fc\u30b9\nUGUIButton.cs\n\nusing UnityEngine;\nusing UnityEngine.EventSystems;\nusing System;\nusing System.Collections;\nusing DG.Tweening;\n\n/// <summary>\n/// UGUI\u30dc\u30bf\u30f3\n/// </summary>\n[RequireComponent(typeof(EventTrigger))]\npublic class UGUIButton : UIBehaviour\n{\n\n\n#if UNITY_EDITOR\n        /// \n        /// \u30b9\u30af\u30ea\u30d7\u30c8\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u6642\u3084\u30a4\u30f3\u30b9\u30da\u30af\u30bf\u30fc\u306e\u5024\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\n        /// \n        protected override void OnValidate()\n        {\n            base.OnValidate();\n            AutoAttach();\n        }\n\n    /// <summary>\n    /// \u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30ac\u30fc\u3092\u898b\u3064\u3051\u3066\u5272\u308a\u5f53\u3066\u308b\n    /// </summary>\n    private void AutoAttach()\n    {\n        if (_trigger == null)\n        {\n            Debug.Log(\"\u30c8\u30ea\u30ac\u30fc\u3092\u81ea\u52d5\u8a2d\u5b9a\u3057\u307e\u3057\u305f\",this);\n            _trigger = GetComponent\\<EventTrigger\\>();\n        }\n    }\n\n\n#endif\n        /// \n        /// \u30c8\u30ea\u30ac\u30fc\n        /// \n        [SerializeField,Header(\"\u30c8\u30ea\u30ac\u30fc\u306f\u81ea\u52d5\u3067\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\")]\n        private EventTrigger _trigger;\n\n    /// <summary>\n    /// \u62e1\u5927\u3059\u308b\u304b\u3069\u3046\u304b\n    /// </summary>\n    [SerializeField]\n    private bool _isScalable = true;\n\n    /// <summary>\n    /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304b\u3069\u3046\u304b\n    /// </summary>\n    [SerializeField]\n    private bool _isDisable;\n\n    /// <summary>\n    /// \u62bc\u305b\u308b\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n    /// null\u8a31\u5bb9\n    /// </summary>\n    [SerializeField]\n    private GameObject _enableRoot;\n\n    /// <summary>\n    /// \u62bc\u305b\u306a\u3044\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n    /// null\u8a31\u5bb9\n    /// </summary>\n    [SerializeField]\n    private GameObject _disableRoot;\n\n    /// <summary>\n    /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\u306e\u30ea\u30b9\u30ca\u30fc\n    /// </summary>\n    public Action OnClickedListener;\n\n    /// <summary>\n    /// \u62e1\u5927\u53ef\u80fd\u72b6\u614b\u3092\u8a2d\u5b9a\n    /// </summary>\n    public void SetScalable(bool isScalable)\n    {\n        _isScalable = isScalable;\n    }\n\n    /// <summary>\n    /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u3092\u8a2d\u5b9a\n    /// </summary>\n    public void SetDisable(bool isDisable)\n    {\n        _isDisable = isDisable;\n        OnDisableChanged(isDisable);\n    }\n\n    /// <summary>\n    /// \u751f\u6210\u76f4\u5f8c\u306e\u51e6\u7406\n    /// </summary>\n    protected override void Awake()\n    {\n        base.Awake();\n\n        var clickEntry = new EventTrigger.Entry();\n        clickEntry.eventID = EventTriggerType.PointerClick;\n        clickEntry.callback.AddListener((_) => OnClicked());\n        _trigger.triggers.Add(clickEntry);\n\n        var pointerDown = new EventTrigger.Entry();\n        pointerDown.eventID = EventTriggerType.PointerDown;\n        pointerDown.callback.AddListener((_) => OnPointerDown());\n        _trigger.triggers.Add(pointerDown);\n\n        var pointerUp = new EventTrigger.Entry();\n        pointerUp.eventID = EventTriggerType.PointerUp;\n        pointerUp.callback.AddListener((_) => OnPointerUp());\n        _trigger.triggers.Add(pointerUp);\n\n        OnDisableChanged(_isDisable);\n    }\n\n    /// <summary>\n    /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\n    /// </summary>\n    private void OnClicked()\n    {\n        if (_isDisable)\n        {\n            return;\n        }\n        SystemUtility.SafeCall(OnClickedListener);\n    }\n\n    /// <summary>\n    /// \u62bc\u3055\u308c\u305f\u6642\n    /// </summary>\n    private void OnPointerDown()\n    {\n        if (_isDisable)\n        {\n            return;\n        }\n        if (_isScalable)\n        {\n            transform.DOScale(new Vector3(0.9f, 0.9f, 0.9f), 0.1f);\n        }\n    }\n\n    /// <summary>\n    /// \u96e2\u3055\u308c\u305f\u6642\n    /// </summary>\n    private void OnPointerUp()\n    {\n        if (_isDisable)\n        {\n            return;\n        }\n        if (_isScalable)\n        {\n            transform.DOScale(Vector3.one, 0.1f);\n        }\n    }\n\n    /// <summary>\n    /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304c\u5909\u308f\u3063\u305f\u6642\n    /// </summary>\n    private void OnDisableChanged(bool isDisable)\n    {\n        if (_enableRoot == null || _disableRoot == null)\n        {\n            return;\n        }\n        _disableRoot.SetActive(isDisable);\n        _enableRoot.SetActive(!isDisable);\n    }\n}\n\n\n\n\u3053\u3063\u3061\u306e\u65b9\u304c\u5b89\u5168\u305d\u3046\u3067\u3059\n\u305f\u3060\u3001AddComponent\u3057\u305f\u77ac\u9593\u306b\u306f\u305b\u3063\u3066\u3044\u3055\u308c\u305a\u3001\n\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u66f4\u65b0\u3055\u308c\u305f\u6642\u3084\u3001\u30b7\u30fc\u30f3\u30bb\u30fc\u30d6\u30fb\u30d7\u30ec\u30cf\u30d6\u4fdd\u5b58\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\u3069\u306e\u307f\u3061\u30bb\u30fc\u30d6\u306f\u3059\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u3053\u3061\u3089\u306e\u65b9\u304c\u3044\u3044\u306e\u304b\u306a\u3041\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30e9\u30a4\u30bb\u30f3\u30b9\n\u81ea\u7531\u306b\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\n# \u6982\u8981\nhttp://qiita.com/takeout/items/0af22f1de4013eddbd6e\n\u3067\u5225\u306e\u65b9\u6cd5\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u305d\u3061\u3089\u3092\n\n#\u30bd\u30fc\u30b9\nUGUIButton.cs\n<pre><code>\nusing UnityEngine;\nusing UnityEngine.EventSystems;\nusing System;\nusing System.Collections;\nusing DG.Tweening;\n\n    /// <summary>\n    /// UGUI\u30dc\u30bf\u30f3\n    /// </summary>\n    [RequireComponent(typeof(EventTrigger))]\n    public class UGUIButton : UIBehaviour\n    {\n\\#if UNITY_EDITOR\n        /// <summary>\n        /// \u30b9\u30af\u30ea\u30d7\u30c8\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u6642\u3084\u30a4\u30f3\u30b9\u30da\u30af\u30bf\u30fc\u306e\u5024\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\n        /// </summary>\n        protected override void OnValidate()\n        {\n            base.OnValidate();\n            AutoAttach();\n        }\n\n        /// <summary>\n        /// \u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30ac\u30fc\u3092\u898b\u3064\u3051\u3066\u5272\u308a\u5f53\u3066\u308b\n        /// </summary>\n        private void AutoAttach()\n        {\n            if (_trigger == null)\n            {\n                Debug.Log(\"\u30c8\u30ea\u30ac\u30fc\u3092\u81ea\u52d5\u8a2d\u5b9a\u3057\u307e\u3057\u305f\",this);\n                _trigger = GetComponent\\<EventTrigger\\>();\n            }\n        }\n\\#endif\n        /// <summary>\n        /// \u30c8\u30ea\u30ac\u30fc\n        /// </summary>\n        [SerializeField,Header(\"\u30c8\u30ea\u30ac\u30fc\u306f\u81ea\u52d5\u3067\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\")]\n        private EventTrigger _trigger;\n\n        /// <summary>\n        /// \u62e1\u5927\u3059\u308b\u304b\u3069\u3046\u304b\n        /// </summary>\n        [SerializeField]\n        private bool _isScalable = true;\n\n        /// <summary>\n        /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304b\u3069\u3046\u304b\n        /// </summary>\n        [SerializeField]\n        private bool _isDisable;\n\n        /// <summary>\n        /// \u62bc\u305b\u308b\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n        /// null\u8a31\u5bb9\n        /// </summary>\n        [SerializeField]\n        private GameObject _enableRoot;\n\n        /// <summary>\n        /// \u62bc\u305b\u306a\u3044\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n        /// null\u8a31\u5bb9\n        /// </summary>\n        [SerializeField]\n        private GameObject _disableRoot;\n\n        /// <summary>\n        /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\u306e\u30ea\u30b9\u30ca\u30fc\n        /// </summary>\n        public Action OnClickedListener;\n\n        /// <summary>\n        /// \u62e1\u5927\u53ef\u80fd\u72b6\u614b\u3092\u8a2d\u5b9a\n        /// </summary>\n        public void SetScalable(bool isScalable)\n        {\n            _isScalable = isScalable;\n        }\n\n        /// <summary>\n        /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u3092\u8a2d\u5b9a\n        /// </summary>\n        public void SetDisable(bool isDisable)\n        {\n            _isDisable = isDisable;\n            OnDisableChanged(isDisable);\n        }\n\n        /// <summary>\n        /// \u751f\u6210\u76f4\u5f8c\u306e\u51e6\u7406\n        /// </summary>\n        protected override void Awake()\n        {\n            base.Awake();\n\n            var clickEntry = new EventTrigger.Entry();\n            clickEntry.eventID = EventTriggerType.PointerClick;\n            clickEntry.callback.AddListener((_) => OnClicked());\n            _trigger.triggers.Add(clickEntry);\n\n            var pointerDown = new EventTrigger.Entry();\n            pointerDown.eventID = EventTriggerType.PointerDown;\n            pointerDown.callback.AddListener((_) => OnPointerDown());\n            _trigger.triggers.Add(pointerDown);\n\n            var pointerUp = new EventTrigger.Entry();\n            pointerUp.eventID = EventTriggerType.PointerUp;\n            pointerUp.callback.AddListener((_) => OnPointerUp());\n            _trigger.triggers.Add(pointerUp);\n\n            OnDisableChanged(_isDisable);\n        }\n\n        /// <summary>\n        /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\n        /// </summary>\n        private void OnClicked()\n        {\n            if (_isDisable)\n            {\n                return;\n            }\n            SystemUtility.SafeCall(OnClickedListener);\n        }\n\n        /// <summary>\n        /// \u62bc\u3055\u308c\u305f\u6642\n        /// </summary>\n        private void OnPointerDown()\n        {\n            if (_isDisable)\n            {\n                return;\n            }\n            if (_isScalable)\n            {\n                transform.DOScale(new Vector3(0.9f, 0.9f, 0.9f), 0.1f);\n            }\n        }\n\n        /// <summary>\n        /// \u96e2\u3055\u308c\u305f\u6642\n        /// </summary>\n        private void OnPointerUp()\n        {\n            if (_isDisable)\n            {\n                return;\n            }\n            if (_isScalable)\n            {\n                transform.DOScale(Vector3.one, 0.1f);\n            }\n        }\n\n        /// <summary>\n        /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304c\u5909\u308f\u3063\u305f\u6642\n        /// </summary>\n        private void OnDisableChanged(bool isDisable)\n        {\n            if (_enableRoot == null || _disableRoot == null)\n            {\n                return;\n            }\n            _disableRoot.SetActive(isDisable);\n            _enableRoot.SetActive(!isDisable);\n        }\n    }\n</pre></code>\n\n\n\u3053\u3063\u3061\u306e\u65b9\u304c\u5b89\u5168\u305d\u3046\u3067\u3059\n\u305f\u3060\u3001AddComponent\u3057\u305f\u77ac\u9593\u306b\u306f\u305b\u3063\u3066\u3044\u3055\u308c\u305a\u3001\n\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u66f4\u65b0\u3055\u308c\u305f\u6642\u3084\u3001\u30b7\u30fc\u30f3\u30bb\u30fc\u30d6\u30fb\u30d7\u30ec\u30cf\u30d6\u4fdd\u5b58\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\u3069\u306e\u307f\u3061\u30bb\u30fc\u30d6\u306f\u3059\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u3053\u3061\u3089\u306e\u65b9\u304c\u3044\u3044\u306e\u304b\u306a\u3041\u3068\u601d\u3044\u307e\u3059\u3002\n\n#\u30e9\u30a4\u30bb\u30f3\u30b9\n\u81ea\u7531\u306b\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\n", "tags": ["Unity", "uGUI", "Unity2D"]}