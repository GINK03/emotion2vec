{"context": " More than 1 year has passed since last update.\u3051\u3063\u3053\u3046\u96e3\u3057\u304b\u3063\u305f\u306e\u3067\nrequire \"google/api_client\"\n\nkey_path = \"DL\u3057\u305fp12\u30ad\u30fc\u3092pem\u306b\u5909\u63db\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30eb\u30d1\u30b9\"\npassphrase = \"\u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\"\nuser = \"\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\"\nproject_id = \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\"\nzone = \"\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u914d\u7f6e\u3057\u305fzone\"\n\nclient = Google::APIClient.new(:application_name => \"\")\nkey = Google::APIClient::KeyUtils.load_from_pem(key_path, passphrase)\n\nclient.authorization = Signet::OAuth2::Client.new(\n  :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',\n  :audience             => 'https://accounts.google.com/o/oauth2/token',\n  :scope                => \"https://www.googleapis.com/auth/compute\",\n  :issuer               => user,\n  :signing_key          => key\n)\n\nclient.authorization.fetch_access_token!\ncompute = client.discovered_api(\"compute\")\n\nresult = client.execute(\n  :api_method => compute.instances.list,\n  :parameters => { \"project\" => project_id, \"zone\" => zone }\n)\n\np JSON.parse(result.response.body)\n\n# \u8d77\u52d5\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u914d\u5217\u3092\u53d6\u308b\nbody = JSON.parse(result.response.body)\np body[\"items\"].select { |i| i[\"status\"] == \"RUNNING\" }.map { |i| i[\"networkInterfaces\"].first[\"accessConfigs\"].first[\"natIP\"] }\n\n\u3051\u3063\u3053\u3046\u96e3\u3057\u304b\u3063\u305f\u306e\u3067\n\n```rb\nrequire \"google/api_client\"\n\nkey_path = \"DL\u3057\u305fp12\u30ad\u30fc\u3092pem\u306b\u5909\u63db\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30eb\u30d1\u30b9\"\npassphrase = \"\u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\"\nuser = \"\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\"\nproject_id = \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\"\nzone = \"\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u914d\u7f6e\u3057\u305fzone\"\n\nclient = Google::APIClient.new(:application_name => \"\")\nkey = Google::APIClient::KeyUtils.load_from_pem(key_path, passphrase)\n\nclient.authorization = Signet::OAuth2::Client.new(\n  :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',\n  :audience             => 'https://accounts.google.com/o/oauth2/token',\n  :scope                => \"https://www.googleapis.com/auth/compute\",\n  :issuer               => user,\n  :signing_key          => key\n)\n    \nclient.authorization.fetch_access_token!\ncompute = client.discovered_api(\"compute\")\n    \nresult = client.execute(\n  :api_method => compute.instances.list,\n  :parameters => { \"project\" => project_id, \"zone\" => zone }\n)\n\np JSON.parse(result.response.body)\n\n# \u8d77\u52d5\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u914d\u5217\u3092\u53d6\u308b\nbody = JSON.parse(result.response.body)\np body[\"items\"].select { |i| i[\"status\"] == \"RUNNING\" }.map { |i| i[\"networkInterfaces\"].first[\"accessConfigs\"].first[\"natIP\"] }\n```\n", "tags": ["Ruby", "GoogleCloudPlatform"]}