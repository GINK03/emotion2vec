{"context": " More than 1 year has passed since last update.\u3042\u304f\u307e\u3067\u81ea\u5206\u30e1\u30e2\u7528\u3067\u3001\u9069\u5f53\u306b\u66f4\u65b0\u4e2d\u3067\u3059\u3002\n\u30d9\u30a2\u30e1\u30bf\u30eb\u30af\u30e9\u30a6\u30c9\u3067\u306f\u6027\u80fd\u304c\u554f\u984c\u306b\u306a\u308b\u30b1\u30fc\u30b9\u304c\u591a\u3044\u306e\u3067\u3001\u904e\u53bb\u306b\u8aad\u3093\u3060\u8a18\u4e8b\u306e\u4e2d\u3067\u826f\u3055\u305d\u3046\u306a\u3082\u306e\u3082\u307e\u3068\u3081\u3066\u3044\u308b\u3002\u3042\u3068\u3067\u3082\u3046\u4e00\u5ea6\u518d\u5206\u985e\u3059\u308b\u3002\n\n\u5168\u822c\n\n\u30de\u30eb\u30ec\u30af\u8b1b\u6f14\u8cc7\u6599\u96c6\nBrendan D. Gregg\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3002Linux\u3084Xen\u306e\u6027\u80fd\u7cfb\u8a18\u4e8b\u304c\u8c4a\u5bcc\u3002\nhttp://www.brendangregg.com/index.html\n\u65b0\u57ce\u9756\u5148\u751f\u306e\u8b1b\u7fa9\u8cc7\u6599\nhttp://www.coins.tsukuba.ac.jp/~yas/coins/\nLinux\u30ab\u30fc\u30cd\u30eb\u306e\u57fa\u672c\u6a5f\u80fd\nhttp://itpro.nikkeibp.co.jp/article/COLUMN/20080501/300463/\n\n\nCPU\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u60c5\u5831\n\nCPU Benchmark\n\n\nHyper-Threading\nSoftLayer\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067on\u306b\u306a\u3063\u3066\u3044\u308b\u30cf\u30ba\u3060\u304c\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066Ticket\u3092\u8d77\u7968\u3057\u3066off\u3063\u3066\u3082\u3089\u3046\u3002\u6a5f\u7a2e\u306b\u3088\u3063\u3066\u306fBIOS\u307e\u3067\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u8ab0\u304b\u304cHPC\u76ee\u7684\u3067off\u306b\u4f9d\u983c\u3057\u305f\u30b5\u30fc\u30d0\u30fc\u304c\u89e3\u653e\u3055\u308c\u305f\u5f8c\u3001\u5225\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u5229\u7528\u3059\u308b\u969b\u306b\u306foff\u306e\u307e\u307e\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u30d9\u30a2\u30e1\u30bf\u30eb\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u3046\u3068\u304d\u306b\u306f\u5e38\u306b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u826f\u3044\u6c17\u304c\u3059\u308b\u3002\n\u7269\u7406\u30b5\u30fc\u30d0\u30fc\u3067Hyper-Threading\u304cON\u306b\u306a\u3063\u3066\u3044\u308c\u3070Thread(s) per core\u304c2\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u601d\u3046\u3002\n\u7269\u7406\u30b5\u30fc\u30d0\u30fc\n# lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nCPU(s):                12\nThread(s) per core:    2\nCore(s) per socket:    6\nCPU socket(s):         1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 62\nStepping:              4\nCPU MHz:               1791.972\nVirtualization:        VT-x\nL1d cache:             32K\nL1i cache:             32K\nL2 cache:              256K\nL3 cache:              15360K\n\n\u4eee\u60f3\u30b5\u30fc\u30d0\u30fc\n# lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nByte Order:            Little Endian\nCPU(s):                1\nOn-line CPU(s) list:   0\nThread(s) per core:    1\nCore(s) per socket:    1\nSocket(s):             1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 63\nStepping:              2\nCPU MHz:               2000.072\nBogoMIPS:              4000.14\nHypervisor vendor:     Xen\nVirtualization type:   full\nL1d cache:             32K\nL1i cache:             32K\nL2 cache:              256K\nL3 cache:              35840K\nNUMA node0 CPU(s):     0\n\n\n\nIntel TXT\nIntel TXT\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f on SoftLayer\n\n\u6642\u523b\u540c\u671f\u3068\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\n# rpm -qa|grep glibc\nglibc-common-2.12-1.149.el6_6.5.x86_64\nglibc-2.12-1.149.el6_6.5.x86_64\nglibc-headers-2.12-1.149.el6_6.5.x86_64\nglibc-devel-2.12-1.149.el6_6.5.x86_64\n\n# rpm -ql glibc-2.12-1.149.el6_6.5.x86_64 | grep localtime\n/etc/localtime\n\n\u3064\u307e\u308a\u3001/etc/localtime\u3092\u305b\u3063\u304b\u304f\u7de8\u96c6\u3057\u3066\u3082\u3001glibc\u3092\u66f4\u65b0\u3059\u308b\u3068/etc/localtime\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306b\u5909\u66f4\u3055\u308c\u3066\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u304c\u623b\u3063\u3066\u3057\u307e\u3046\u3002\u3088\u3063\u3066http://d.hatena.ne.jp/nekoruri/20150130/glibclocaltime \u306b\u5f93\u3063\u3066/etc/sysconfig/clock\u3092\u66f4\u65b0\u3057\u3066\u3042\u3052\u308b\u306e\u304c\u30b9\u30de\u30fc\u30c8\u306a\u3084\u308a\u65b9\u306e\u306f\u305a\u3060\u304c\u3001SoftLayer\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u304cCDT\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u6c17\u306b\u306a\u308b\u3002\n# date\nFri Apr  3 19:42:27 CDT 2015\n\n# cat /etc/sysconfig/clock\nZONE=\"America/Chicago\"\n\n\u305f\u307e\u306bWindows\u3067\u65e5\u672c\u6642\u9593\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u305f\u306e\u306b\u3001Standard Image\u3084FlexImage\u3067\u5c55\u958b\u3059\u308b\u306815\u6642\u9593\u305a\u308c\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u3001\u3082\u3057\u304b\u3057\u305f\u3089SoftLayer\u306fHardware Clock\u3092Dallas\u306eLocal Time\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002Windows\u306eHardware Clock\u306fLocal Time\u4e00\u629e\u306a\u306e\u3067\u3001\u7ba1\u7406\u306e\u90fd\u5408\u3092\u8003\u3048\u308b\u3068\u3001\u4e16\u754c\u4e2d\u3067Dallas\u6642\u9593\u306b\u3057\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u3002\u4e0b\u624b\u306b/etc/sysconfig/clock\u3092\u3044\u3058\u3063\u3066\u30fb\u30fb\u30fb\u3063\u3066\u3044\u3046\u6c17\u3082\u3059\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u30d8\u30bf\u30ec\u3089\u3057\u304f\u3001\n# cp -p /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\n\n\u3067\u6e08\u307e\u3059\u3002\n\uff08\u53c2\u8003\uff09\nhttp://d.hatena.ne.jp/nekoruri/20150130/glibclocaltime\nhttp://park12.wakwak.com/~eslab/pcmemo/clock/clock2.html\n\nSecurity\nFlexImage\u3092\u4f7f\u3046\u305f\u3081\u306b\u306froot\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u3002\u307e\u305fNimSoft\u3084eVault\u7b49\u3092\u5c0e\u5165\u3059\u308b\u5834\u5408\u306f\u3001\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u6642\u306broot\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u3002FlexImage\u3082\u4f7f\u7528\u305b\u305a\u3001SoftLayer\u3092\u7d20\u6750\u306e\u307e\u307e\u4f7f\u3046\u306e\u3067\u3042\u308c\u3070\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u305f\u3081\u306b\u3082root\u306b\u3088\u308bSSH\u30a2\u30af\u30bb\u30b9\u306f\u7981\u6b62\u3057\u305f\u65b9\u304c\u3088\u3044\u3002\u6700\u60aa\u3001KVM/IPMI\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u306e\u3067\u3002\nroot\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u666e\u6bb5\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u5207\u3063\u3066\u79d8\u5bc6\u9375\u8a8d\u8a3c\u3092\u5229\u7528\u3057\u3001\u5fc5\u8981\u306a\u6642\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u8a31\u53ef\u3059\u308b\u3068\u3044\u3046\u65b9\u6cd5\u3067\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u6700\u8fd1\u3088\u304f\u3084\u308b\u306e\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bSSH\u30dd\u30fc\u30c8\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306e22\u756a\u4ee5\u5916\u306b\u3082\u3046\u4e00\u3064\u958b\u3051\u3066\u304a\u304d\uff08\u4f8b\u3067\u306f20022\uff09\u3001\u5916\u90e8\u304b\u3089\u306eSSH\u30a2\u30af\u30bb\u30b9\u306f22\u756a\u3067\u306f\u306a\u304f20022\u306e\u307f\u3092iptables\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3002Private\u5074\u306e\u5185\u90e8\u901a\u4fe1\u306b\u3088\u3063\u3066\u306f22\u756a\u30a2\u30af\u30bb\u30b9\u304c\u6b32\u3057\u3044\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u3002\u30e6\u30fc\u30b6\u30fc\u3084\u30a2\u30af\u30bb\u30b9\u5143\u3067\u5236\u9650\u3059\u308b\u3068\u66f4\u306b\u826f\u3044\u306e\u3060\u3051\u3069\u3001\u3068\u308a\u3042\u3048\u305a\u5916\u90e8\u304b\u3089\u898b\u3048\u308bSSH\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u5909\u308f\u308b\u3060\u3051\u3067\u3001\u653b\u6483\u306f\u6fc0\u6e1b\u3059\u308b\u306e\u3067\u3001\u5927\u62b5\u306f\u3053\u308c\u3067\u5341\u5206\u3002\nping\u306e\u8a31\u53ef\u306fStandard Monitoring\u3092\u5229\u7528\u3059\u308b\u306a\u3089\u3070\u3001http://knowledgelayer.softlayer.com/faq/what-ip-ranges-do-i-allow-through-firewall \u306a\u3069\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3066\u9650\u5b9a\u8a31\u53ef\u3057\u305f\u65b9\u304c\u826f\u3055\u305d\u3046\uff08\u500b\u4eba\u7684\u306b\u306fStandard Monitoring\u3082\u4f7f\u308f\u306a\u3044\u304b\u3089ping\u3082\u30d6\u30ed\u30c3\u30af\u3059\u308b\uff09\n# vi /etc/ssh/sshd_config\nPort 22\nPort 20022\n# service sshd restart\n\n# vi /etc/sysconfig/iptables\n*filter\n:INPUT DROP\n:FORWARD DROP\n:OUTPUT ACCEPT\n\n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\n#--------------------------------------------------\n# SSH from local NW\n#--------------------------------------------------\n-A INPUT -i lo -j ACCEPT\n\n#--------------------------------------------------\n# SSH from private NW\n#--------------------------------------------------\n-A INPUT -i eth0 -j ACCEPT\n\n#--------------------------------------------------\n# SSH from public NW\n#--------------------------------------------------\n-A INPUT -i eth1 -p tcp -m tcp --dport 20022 -j ACCEPT\n#-I INPUT -i eth1 -p icmp --icmp-type 0 -j ACCEPT\n#-I INPUT -i eth1 -p icmp --icmp-type 8 -j ACCEPT\n\n# service iptables restart\n\n\n\u30d7\u30ed\u30bb\u30b9\u5468\u308a\n\ntop \u3067\u30d7\u30ed\u30bb\u30b9\u304c\u30b9\u30ea\u30fc\u30d7\u3057\u3066\u3044\u308b\u95a2\u6570\u540d\u3092\u8868\u793a\u3059\u308b\nhttp://d.hatena.ne.jp/yohei-a/20141230/1419888007\ntop \u3067\u30d7\u30ed\u30bb\u30b9\u304c\u4f7f\u3063\u3066\u3044\u305fCPU\u756a\u53f7\u3092\u8868\u793a\u3059\u308b\nhttp://d.hatena.ne.jp/yohei-a/20141222/1419250301\ntop -H \u3067CPU\u4f7f\u7528\u7387\u306e\u9ad8\u3044\u30b9\u30ec\u30c3\u30c9\u3092\u8abf\u3079\u308b\nhttp://d.hatena.ne.jp/yohei-a/20141222/1419249841\n\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306elimits\u5236\u9650\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f/proc//limits\u3092\u53c2\u7167\n\n# ps -ef|grep mysqld|grep -v grep\nroot      5995     1  0 08:58 pts/0    00:00:00 /bin/sh /usr/bin/mysqld_safe --datadir=/var/lib/mysql --socket=/var/lib/mysql/mysql.sock --pid-file=/var/run/mysqld/mysqld.pid --basedir=/usr --user=mysql\nmysql     6097  5995  0 08:58 pts/0    00:00:00 /usr/libexec/mysqld --basedir=/usr --datadir=/var/lib/mysql --user=mysql --log-error=/var/log/mysqld.log --pid-file=/var/run/mysqld/mysqld.pid --socket=/var/lib/mysql/mysql.sock\n\n# cat /proc/6097/limits\nLimit                     Soft Limit           Hard Limit           Units\nMax cpu time              unlimited            unlimited            seconds\nMax file size             unlimited            unlimited            bytes\nMax data size             unlimited            unlimited            bytes\nMax stack size            10485760             unlimited            bytes\nMax core file size        0                    unlimited            bytes\nMax resident set          unlimited            unlimited            bytes\nMax processes             7487                 7487                 processes\nMax open files            1024                 4096                 files\nMax locked memory         65536                65536                bytes\nMax address space         unlimited            unlimited            bytes\nMax file locks            unlimited            unlimited            locks\nMax pending signals       7487                 7487                 signals\nMax msgqueue size         819200               819200               bytes\nMax nice priority         0                    0\nMax realtime priority     0                    0\nMax realtime timeout      unlimited            unlimited            us\n\n\n\nvmstat \u306e\"r\"\u5217\u3068\u30de\u30af\u30c9\u30ca\u30eb\u30c9\u306e\u30ec\u30b8\u30ab\u30a6\u30f3\u30bf\u30fc\nhttp://d.hatena.ne.jp/yohei-a/20101206/1291668680\n\u5272\u308a\u8fbc\u307f\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\nhttp://d.hatena.ne.jp/yohei-a/20120117/1326810276\nvmstat\u3067\u306f\u3001sy\u306b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\uff08%irq\uff09\u3084\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\uff08%soft\uff09\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\u3002\nhttp://d.hatena.ne.jp/yohei-a/20141006/1412586309\nmpstat\u3067\u306f\u3001\u5272\u8fbc\u307f\u306f%sys\u306b\u306f\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u305a\u3001\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\u306f%irq\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\u306f%soft\u306b\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3002\nhttp://d.hatena.ne.jp/yohei-a/20121025/1351160339\nsys\u306eCPU\u4f7f\u7528\u7387\u304c\u9ad8\u3044\u5834\u5408\u306b\u305d\u306e\u5185\u8a33\u3092\u8abf\u3079\u308b\u65b9\u6cd5\nhttp://d.hatena.ne.jp/yohei-a/20131208/1386485282\nps \u3067\u8868\u793a\u3055\u308c\u308bCPU\u4f7f\u7528\u7387 = CPU\u6642\u9593 / \u5b9f\u884c\u6642\u9593\nhttp://d.hatena.ne.jp/yohei-a/20141223/1419356325\nxargs\u3092\u4f7f\u3063\u3066\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u3067\u4e26\u5217\u5b9f\u884c\n\n-P5\u30675\u30d7\u30ed\u30bb\u30b9\u3067\u5b9f\u884c\ncat downloadurl.list | xargs -L1 -P5 curl\n\n\n\u30e1\u30e2\u30ea\u5468\u308a\n\nswappiness\n\n# cat /proc/sys/vm/swappiness\n60\n# vi /etc/sysctl.conf\nvm.swappiness = 0\n# sysctl -p \n\n\nswap\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30e1\u30e2\u30ea\u306b\u623b\u3059\n\nswap\u9818\u57df\u306e\u78ba\u8a8d\n# cat /proc/swaps\nFilename                                Type            Size    Used    Priority\n/dev/xvdb1                              partition       2096444 0       -1\n\nswap\u9818\u57df\u3092\u7121\u52b9\u5316\u3057\u3066\u30b9\u30ef\u30c3\u30d7\u9818\u57df\u306e\u30c7\u30fc\u30bf\u3092\u30e1\u30e2\u30ea\u306b\u3082\u3069\u3059\n# swapoff /dev/xvdb1\n\n/etc/fstab\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308bswap device\u3092\u6709\u52b9\u5316\u3059\u308b\n# swapon -a\n\n\n/proc/meminfo\u3092\u8003\u3048\u308b\nhttp://enakai00.hatenablog.com/entry/20110906/1315315488\n/proc/meminfo \u306e Inactive \u306f\u5229\u7528\u53ef\u80fd\u306a\u30e1\u30e2\u30ea\u9818\u57df\u3067\u306f\u306a\u3044\nhttp://d.hatena.ne.jp/yohei-a/20141230/1419910742\nLinux \u3067\u7269\u7406\u30e1\u30e2\u30ea\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u5171\u6709\u30e1\u30e2\u30ea\u306f cahced \u306b\u8a08\u4e0a\u3055\u308c\u308b\nhttp://d.hatena.ne.jp/yohei-a/20110813/1313203883\nhttp://d.hatena.ne.jp/yohei-a/20120527/1338131729\n\n\nDisk\u69cb\u6210\n\nfisk\u3088\u308alsblk\u3084parted\u3002\u305a\u3063\u3068\u8aad\u307f\u3084\u3059\u3044\u3002\n\n# lsblk\nNAME                                           MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT\nloop0                                            7:0    0  100G  0 loop\n\u2514\u2500docker-202:2-1089543-pool (dm-2)             253:2    0  100G  0 dm\nloop1                                            7:1    0    2G  0 loop\n\u2514\u2500docker-202:2-1089543-pool (dm-2)             253:2    0  100G  0 dm\nxvdb                                           202:16   0    2G  0 disk\n\u2514\u2500xvdb1                                        202:17   0    2G  0 part  [SWAP]\nxvda                                           202:0    0   25G  0 disk\n\u251c\u2500xvda1                                        202:1    0  256M  0 part  /boot\n\u2514\u2500xvda2                                        202:2    0 24.8G  0 part  /\nsda                                              8:0    0   20G  0 disk\n\u2514\u25003600a09803830304d485d46366a524974 (dm-0)     253:0    0   20G  0 mpath\n  \u2514\u25003600a09803830304d485d46366a524974p1 (dm-1) 253:1    0   20G  0 part\nsdb                                              8:16   0   20G  0 disk\n\u2514\u25003600a09803830304d485d46366a524974 (dm-0)     253:0    0   20G  0 mpath\n  \u2514\u25003600a09803830304d485d46366a524974p1 (dm-1) 253:1    0   20G  0 part\n\n# parted -l\nModel: NETAPP LUN C-Mode (scsi)\nDisk /dev/sda: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      32.3kB  21.5GB  21.5GB  primary  ext4\n\n\nModel: NETAPP LUN C-Mode (scsi)\nDisk /dev/sdb: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      32.3kB  21.5GB  21.5GB  primary  ext4\n\n\nModel: Linux device-mapper (thin-pool) (dm)\nDisk /dev/mapper/docker-202:2-1089543-pool: 107GB\nSector size (logical/physical): 512B/512B\nPartition Table: loop\n\nNumber  Start  End    Size   File system  Flags\n 1      0.00B  107GB  107GB  ext4\n\n\nModel: Linux device-mapper (linear) (dm)\nDisk /dev/mapper/3600a09803830304d485d46366a524974p1: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: loop\n\nNumber  Start  End     Size    File system  Flags\n 1      0.00B  21.5GB  21.5GB  ext4\n\n\nModel: Linux device-mapper (multipath) (dm)\nDisk /dev/mapper/3600a09803830304d485d46366a524974: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      32.3kB  21.5GB  21.5GB  primary  ext4\n\n\nModel: Xen Virtual Block Device (xvd)\nDisk /dev/xvdb: 2147MB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system     Flags\n 1      32.3kB  2147MB  2147MB  primary  linux-swap(v1)\n\n\nModel: Xen Virtual Block Device (xvd)\nDisk /dev/xvda: 26.8GB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      1049kB  269MB   268MB   primary  ext3         boot\n 2      269MB   26.8GB  26.6GB  primary  ext3\n\n\n\nI/O\n\niostat\u306e\u898b\u65b9\nhttp://d.hatena.ne.jp/yohei-a/20110711/1310396665\nLinux \u306e iostat \u306e\u51fa\u529b\u7d50\u679c\u3092\u9280\u884c\u306eATM\u306b\u4f8b\u3048\u3066\u8aac\u660e\u3057\u3066\u307f\u308b\nhttp://d.hatena.ne.jp/yohei-a/20111203/1322909311\niostat -x \u306e\u51fa\u529b\u3092 Linux Kernel \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u7406\u89e3\u3059\u308b\nhttp://blog.etsukata.com/2013/10/iostat-x-linux-kernel.html\nr/s: read request per second\nw/s: write request per second\nr/s + w/s: IOPS(I/O request per second)\nawait: \uff08\u30ad\u30e5\u30fc\u306b\u3044\u308b\u6642\u9593\uff0b\u5b9f\u969b\u306e\u30c7\u30a3\u30b9\u30af\u3067\u306e\u51e6\u7406\u6642\u9593\uff09\u306e\u5e73\u5747\u5024\uff08\u5358\u4f4d\u30df\u30ea\u79d2\uff09\nsvctm: \u5b9f\u969b\u306e\u30c7\u30a3\u30b9\u30af\u3067\u306e\u51e6\u7406\u6642\u9593\u306e\u5e73\u5747\u5024\uff08\u5358\u4f4d\u30df\u30ea\u79d2\uff09\nsvctm: \u4e00\u56de\u306eI/O\u767a\u884c\u306b\u304b\u304b\u308b\u6642\u9593(\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30ad\u30e5\u30fc\u306b\u7a4d\u307e\u308c\u3066\u3044\u308b\u6642\u9593\u3092\u542b\u307e\u306a\u3044)\u306e\u5e73\u5747\u5024\u3002\u5358\u4f4d\u306f\u30df\u30ea\u79d2\u3002\n\u3082\u3057\u30c7\u30a3\u30b9\u30af\u304c\u30d5\u30eb\u7a3c\u50cd\u3067\u3042\u308c\u3070\u3001(r/s + w/s)*svctm\u306f\niostat \u306f\u3069\u306e\u3088\u3046\u306b %util \u3092\u7b97\u51fa\u3057\u3066\u3044\u308b\u304b(1)-(3)\nhttp://d.hatena.ne.jp/yohei-a/20130923/1379950413\nhttp://d.hatena.ne.jp/yohei-a/20130925/1380070554\nhttp://d.hatena.ne.jp/yohei-a/20141013/1413167192\n\u30d5\u30a1\u30a4\u30eb\u304c O_DIRECT \u30d5\u30e9\u30b0\u3092\u6307\u5b9a\u3057\u3066\u30aa\u30fc\u30d7\u30f3\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\nhttp://d.hatena.ne.jp/yohei-a/20131016/1381934605\n\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n\nLinux\u3067\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u3084\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u30de\u30eb\u30c1\u30b3\u30a2\u30b9\u30b1\u30fc\u30eb\u3055\u305b\u308b\u305f\u3081\u306e\u30ab\u30fc\u30cd\u30eb\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\nLinux\u306b\u304a\u3051\u308b\u30ab\u30fc\u30cd\u30eb\u30d1\u30b1\u30c3\u30c8\u8ee2\u9001\n10GbE\u6642\u4ee3\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30afI/O\u9ad8\u901f\u5316\nbonding\u3067Active\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u78ba\u8a8d\u65b9\u6cd5\u3068\u5909\u66f4\u65b9\u6cd5\nhttp://d.hatena.ne.jp/yohei-a/20140915/1410799829\n\n\u4e0b\u8a18\u306fLACP\uff08IEEE 802.3ad\uff09\u306e\u4f8b\u3060\u304c\u3001\n# cat /proc/net/bonding/bond0\nEthernet Channel Bonding Driver: v3.7.1 (April 27, 2011)\n\nBonding Mode: IEEE 802.3ad Dynamic link aggregation\nTransmit Hash Policy: layer3+4 (1)\nMII Status: up\nMII Polling Interval (ms): 250\nUp Delay (ms): 0\nDown Delay (ms): 0\n\n802.3ad info\nLACP rate: slow\nMin links: 0\nAggregator selection policy (ad_select): stable\nActive Aggregator Info:\n        Aggregator ID: 2\n        Number of ports: 1\n        Actor Key: 9\n        Partner Key: 17\n        Partner Mac Address: 02:1c:73:43:bc:0b\n\nSlave Interface: eth2\nMII Status: down\nSpeed: Unknown\nDuplex: Unknown\nLink Failure Count: 0\nPermanent HW addr: 00:25:90:f2:e7:e0\nAggregator ID: 1\nSlave queue ID: 0\n\nSlave Interface: eth0\nMII Status: up\nSpeed: 100 Mbps\nDuplex: full\nLink Failure Count: 0\nPermanent HW addr: 00:25:90:f2:e7:de\nAggregator ID: 2\nSlave queue ID: 0\n\n\n\n\u753b\u50cf\u51e6\u7406\n\n\u30de\u30eb\u30c1\u30b3\u30a2\u3092\u7528\u3044\u305f\u753b\u50cf\u51e6\u7406\n\n\u3042\u304f\u307e\u3067\u81ea\u5206\u30e1\u30e2\u7528\u3067\u3001\u9069\u5f53\u306b\u66f4\u65b0\u4e2d\u3067\u3059\u3002\n\u30d9\u30a2\u30e1\u30bf\u30eb\u30af\u30e9\u30a6\u30c9\u3067\u306f\u6027\u80fd\u304c\u554f\u984c\u306b\u306a\u308b\u30b1\u30fc\u30b9\u304c\u591a\u3044\u306e\u3067\u3001\u904e\u53bb\u306b\u8aad\u3093\u3060\u8a18\u4e8b\u306e\u4e2d\u3067\u826f\u3055\u305d\u3046\u306a\u3082\u306e\u3082\u307e\u3068\u3081\u3066\u3044\u308b\u3002\u3042\u3068\u3067\u3082\u3046\u4e00\u5ea6\u518d\u5206\u985e\u3059\u308b\u3002\n\n#\u5168\u822c\n* [\u30de\u30eb\u30ec\u30af\u8b1b\u6f14\u8cc7\u6599\u96c6](\nhttps://www.facebook.com/notes/%E4%B8%B8%E5%B1%B1-%E4%B8%8D%E4%BA%8C%E5%A4%AB/%E3%83%9E%E3%83%AB%E3%83%AC%E3%82%AF%E8%AC%9B%E6%BC%94%E8%B3%87%E6%96%99%E9%9B%86/10203851700590435?pnref=lhc)\n\n* Brendan D. Gregg\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3002Linux\u3084Xen\u306e\u6027\u80fd\u7cfb\u8a18\u4e8b\u304c\u8c4a\u5bcc\u3002\nhttp://www.brendangregg.com/index.html\n\n* \u65b0\u57ce\u9756\u5148\u751f\u306e\u8b1b\u7fa9\u8cc7\u6599\nhttp://www.coins.tsukuba.ac.jp/~yas/coins/\n\n* Linux\u30ab\u30fc\u30cd\u30eb\u306e\u57fa\u672c\u6a5f\u80fd\nhttp://itpro.nikkeibp.co.jp/article/COLUMN/20080501/300463/\n\n#CPU\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u60c5\u5831\n* [CPU Benchmark](http://cpubenchmark.net/cpu_list.php)\n\n#Hyper-Threading\nSoftLayer\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067on\u306b\u306a\u3063\u3066\u3044\u308b\u30cf\u30ba\u3060\u304c\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066Ticket\u3092\u8d77\u7968\u3057\u3066off\u3063\u3066\u3082\u3089\u3046\u3002\u6a5f\u7a2e\u306b\u3088\u3063\u3066\u306fBIOS\u307e\u3067\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u8ab0\u304b\u304cHPC\u76ee\u7684\u3067off\u306b\u4f9d\u983c\u3057\u305f\u30b5\u30fc\u30d0\u30fc\u304c\u89e3\u653e\u3055\u308c\u305f\u5f8c\u3001\u5225\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u5229\u7528\u3059\u308b\u969b\u306b\u306foff\u306e\u307e\u307e\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u30d9\u30a2\u30e1\u30bf\u30eb\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u3046\u3068\u304d\u306b\u306f\u5e38\u306b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u826f\u3044\u6c17\u304c\u3059\u308b\u3002\n\n\u7269\u7406\u30b5\u30fc\u30d0\u30fc\u3067Hyper-Threading\u304cON\u306b\u306a\u3063\u3066\u3044\u308c\u3070Thread(s) per core\u304c2\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u601d\u3046\u3002\n\n```\n\u7269\u7406\u30b5\u30fc\u30d0\u30fc\n# lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nCPU(s):                12\nThread(s) per core:    2\nCore(s) per socket:    6\nCPU socket(s):         1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 62\nStepping:              4\nCPU MHz:               1791.972\nVirtualization:        VT-x\nL1d cache:             32K\nL1i cache:             32K\nL2 cache:              256K\nL3 cache:              15360K\n\n\u4eee\u60f3\u30b5\u30fc\u30d0\u30fc\n# lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nByte Order:            Little Endian\nCPU(s):                1\nOn-line CPU(s) list:   0\nThread(s) per core:    1\nCore(s) per socket:    1\nSocket(s):             1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 63\nStepping:              2\nCPU MHz:               2000.072\nBogoMIPS:              4000.14\nHypervisor vendor:     Xen\nVirtualization type:   full\nL1d cache:             32K\nL1i cache:             32K\nL2 cache:              256K\nL3 cache:              35840K\nNUMA node0 CPU(s):     0\n\n```\n\n#Intel TXT\n[Intel TXT\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f on SoftLayer](\nhttps://www.ibm.com/developerworks/community/blogs/560da618-352c-4903-9e75-2dadfda71076/entry/intel_txt%25e3%2583%2586%25e3%2582%25af%25e3%2583%258e%25e3%2583%25ad%25e3%2582%25b8%25e3%2583%25bc%25e3%2581%25ae%25e8%25a8%25ad%25e5%25ae%259a%25e3%2582%2592%25e7%25a2%25ba%25e8%25aa%258d%25e3%2581%2597%25e3%2581%25a6%25e3%2581%25bf%25e3%2581%25be%25e3%2581%2597%25e3%2581%259f1?lang=en)\n\n#\u6642\u523b\u540c\u671f\u3068\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\n\n```\n# rpm -qa|grep glibc\nglibc-common-2.12-1.149.el6_6.5.x86_64\nglibc-2.12-1.149.el6_6.5.x86_64\nglibc-headers-2.12-1.149.el6_6.5.x86_64\nglibc-devel-2.12-1.149.el6_6.5.x86_64\n\n# rpm -ql glibc-2.12-1.149.el6_6.5.x86_64 | grep localtime\n/etc/localtime\n```\n\n\u3064\u307e\u308a\u3001/etc/localtime\u3092\u305b\u3063\u304b\u304f\u7de8\u96c6\u3057\u3066\u3082\u3001glibc\u3092\u66f4\u65b0\u3059\u308b\u3068/etc/localtime\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306b\u5909\u66f4\u3055\u308c\u3066\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u304c\u623b\u3063\u3066\u3057\u307e\u3046\u3002\u3088\u3063\u3066http://d.hatena.ne.jp/nekoruri/20150130/glibclocaltime \u306b\u5f93\u3063\u3066/etc/sysconfig/clock\u3092\u66f4\u65b0\u3057\u3066\u3042\u3052\u308b\u306e\u304c\u30b9\u30de\u30fc\u30c8\u306a\u3084\u308a\u65b9\u306e\u306f\u305a\u3060\u304c\u3001SoftLayer\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u304cCDT\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u6c17\u306b\u306a\u308b\u3002\n\n```\n# date\nFri Apr  3 19:42:27 CDT 2015\n\n# cat /etc/sysconfig/clock\nZONE=\"America/Chicago\"\n```\n\n\u305f\u307e\u306bWindows\u3067\u65e5\u672c\u6642\u9593\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u305f\u306e\u306b\u3001Standard Image\u3084FlexImage\u3067\u5c55\u958b\u3059\u308b\u306815\u6642\u9593\u305a\u308c\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u3001\u3082\u3057\u304b\u3057\u305f\u3089SoftLayer\u306fHardware Clock\u3092Dallas\u306eLocal Time\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002Windows\u306eHardware Clock\u306fLocal Time\u4e00\u629e\u306a\u306e\u3067\u3001\u7ba1\u7406\u306e\u90fd\u5408\u3092\u8003\u3048\u308b\u3068\u3001\u4e16\u754c\u4e2d\u3067Dallas\u6642\u9593\u306b\u3057\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u3002\u4e0b\u624b\u306b/etc/sysconfig/clock\u3092\u3044\u3058\u3063\u3066\u30fb\u30fb\u30fb\u3063\u3066\u3044\u3046\u6c17\u3082\u3059\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u30d8\u30bf\u30ec\u3089\u3057\u304f\u3001\n\n```\n# cp -p /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\n```\n\u3067\u6e08\u307e\u3059\u3002\n\uff08\u53c2\u8003\uff09\nhttp://d.hatena.ne.jp/nekoruri/20150130/glibclocaltime\nhttp://park12.wakwak.com/~eslab/pcmemo/clock/clock2.html\n\n#Security\nFlexImage\u3092\u4f7f\u3046\u305f\u3081\u306b\u306froot\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u3002\u307e\u305fNimSoft\u3084eVault\u7b49\u3092\u5c0e\u5165\u3059\u308b\u5834\u5408\u306f\u3001\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u6642\u306broot\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u3002FlexImage\u3082\u4f7f\u7528\u305b\u305a\u3001SoftLayer\u3092\u7d20\u6750\u306e\u307e\u307e\u4f7f\u3046\u306e\u3067\u3042\u308c\u3070\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u305f\u3081\u306b\u3082root\u306b\u3088\u308bSSH\u30a2\u30af\u30bb\u30b9\u306f\u7981\u6b62\u3057\u305f\u65b9\u304c\u3088\u3044\u3002\u6700\u60aa\u3001KVM/IPMI\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u306e\u3067\u3002\nroot\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u666e\u6bb5\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u5207\u3063\u3066\u79d8\u5bc6\u9375\u8a8d\u8a3c\u3092\u5229\u7528\u3057\u3001\u5fc5\u8981\u306a\u6642\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u8a31\u53ef\u3059\u308b\u3068\u3044\u3046\u65b9\u6cd5\u3067\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\u6700\u8fd1\u3088\u304f\u3084\u308b\u306e\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bSSH\u30dd\u30fc\u30c8\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306e22\u756a\u4ee5\u5916\u306b\u3082\u3046\u4e00\u3064\u958b\u3051\u3066\u304a\u304d\uff08\u4f8b\u3067\u306f20022\uff09\u3001\u5916\u90e8\u304b\u3089\u306eSSH\u30a2\u30af\u30bb\u30b9\u306f22\u756a\u3067\u306f\u306a\u304f20022\u306e\u307f\u3092iptables\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3002Private\u5074\u306e\u5185\u90e8\u901a\u4fe1\u306b\u3088\u3063\u3066\u306f22\u756a\u30a2\u30af\u30bb\u30b9\u304c\u6b32\u3057\u3044\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u3002\u30e6\u30fc\u30b6\u30fc\u3084\u30a2\u30af\u30bb\u30b9\u5143\u3067\u5236\u9650\u3059\u308b\u3068\u66f4\u306b\u826f\u3044\u306e\u3060\u3051\u3069\u3001\u3068\u308a\u3042\u3048\u305a\u5916\u90e8\u304b\u3089\u898b\u3048\u308bSSH\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u5909\u308f\u308b\u3060\u3051\u3067\u3001\u653b\u6483\u306f\u6fc0\u6e1b\u3059\u308b\u306e\u3067\u3001\u5927\u62b5\u306f\u3053\u308c\u3067\u5341\u5206\u3002\nping\u306e\u8a31\u53ef\u306fStandard Monitoring\u3092\u5229\u7528\u3059\u308b\u306a\u3089\u3070\u3001http://knowledgelayer.softlayer.com/faq/what-ip-ranges-do-i-allow-through-firewall \u306a\u3069\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3066\u9650\u5b9a\u8a31\u53ef\u3057\u305f\u65b9\u304c\u826f\u3055\u305d\u3046\uff08\u500b\u4eba\u7684\u306b\u306fStandard Monitoring\u3082\u4f7f\u308f\u306a\u3044\u304b\u3089ping\u3082\u30d6\u30ed\u30c3\u30af\u3059\u308b\uff09\n\n\n```\n# vi /etc/ssh/sshd_config\nPort 22\nPort 20022\n# service sshd restart\n\n# vi /etc/sysconfig/iptables\n*filter\n:INPUT DROP\n:FORWARD DROP\n:OUTPUT ACCEPT\n\n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\n#--------------------------------------------------\n# SSH from local NW\n#--------------------------------------------------\n-A INPUT -i lo -j ACCEPT\n\n#--------------------------------------------------\n# SSH from private NW\n#--------------------------------------------------\n-A INPUT -i eth0 -j ACCEPT\n\n#--------------------------------------------------\n# SSH from public NW\n#--------------------------------------------------\n-A INPUT -i eth1 -p tcp -m tcp --dport 20022 -j ACCEPT\n#-I INPUT -i eth1 -p icmp --icmp-type 0 -j ACCEPT\n#-I INPUT -i eth1 -p icmp --icmp-type 8 -j ACCEPT\n\n# service iptables restart\n```\n\n\n#\u30d7\u30ed\u30bb\u30b9\u5468\u308a\n* top \u3067\u30d7\u30ed\u30bb\u30b9\u304c\u30b9\u30ea\u30fc\u30d7\u3057\u3066\u3044\u308b\u95a2\u6570\u540d\u3092\u8868\u793a\u3059\u308b\nhttp://d.hatena.ne.jp/yohei-a/20141230/1419888007\n\n* top \u3067\u30d7\u30ed\u30bb\u30b9\u304c\u4f7f\u3063\u3066\u3044\u305fCPU\u756a\u53f7\u3092\u8868\u793a\u3059\u308b\nhttp://d.hatena.ne.jp/yohei-a/20141222/1419250301\n\n* top -H \u3067CPU\u4f7f\u7528\u7387\u306e\u9ad8\u3044\u30b9\u30ec\u30c3\u30c9\u3092\u8abf\u3079\u308b\nhttp://d.hatena.ne.jp/yohei-a/20141222/1419249841\n\n* \u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306elimits\u5236\u9650\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f/proc/<PID>/limits\u3092\u53c2\u7167\n\n```\n# ps -ef|grep mysqld|grep -v grep\nroot      5995     1  0 08:58 pts/0    00:00:00 /bin/sh /usr/bin/mysqld_safe --datadir=/var/lib/mysql --socket=/var/lib/mysql/mysql.sock --pid-file=/var/run/mysqld/mysqld.pid --basedir=/usr --user=mysql\nmysql     6097  5995  0 08:58 pts/0    00:00:00 /usr/libexec/mysqld --basedir=/usr --datadir=/var/lib/mysql --user=mysql --log-error=/var/log/mysqld.log --pid-file=/var/run/mysqld/mysqld.pid --socket=/var/lib/mysql/mysql.sock\n\n# cat /proc/6097/limits\nLimit                     Soft Limit           Hard Limit           Units\nMax cpu time              unlimited            unlimited            seconds\nMax file size             unlimited            unlimited            bytes\nMax data size             unlimited            unlimited            bytes\nMax stack size            10485760             unlimited            bytes\nMax core file size        0                    unlimited            bytes\nMax resident set          unlimited            unlimited            bytes\nMax processes             7487                 7487                 processes\nMax open files            1024                 4096                 files\nMax locked memory         65536                65536                bytes\nMax address space         unlimited            unlimited            bytes\nMax file locks            unlimited            unlimited            locks\nMax pending signals       7487                 7487                 signals\nMax msgqueue size         819200               819200               bytes\nMax nice priority         0                    0\nMax realtime priority     0                    0\nMax realtime timeout      unlimited            unlimited            us\n\n```\n\n* vmstat \u306e\"r\"\u5217\u3068\u30de\u30af\u30c9\u30ca\u30eb\u30c9\u306e\u30ec\u30b8\u30ab\u30a6\u30f3\u30bf\u30fc\nhttp://d.hatena.ne.jp/yohei-a/20101206/1291668680\n\n* \u5272\u308a\u8fbc\u307f\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\nhttp://d.hatena.ne.jp/yohei-a/20120117/1326810276\n\n* vmstat\u3067\u306f\u3001sy\u306b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\uff08%irq\uff09\u3084\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\uff08%soft\uff09\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\u3002\nhttp://d.hatena.ne.jp/yohei-a/20141006/1412586309\n\n* mpstat\u3067\u306f\u3001\u5272\u8fbc\u307f\u306f%sys\u306b\u306f\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u305a\u3001\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\u306f%irq\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u5272\u8fbc\u307f\u306f%soft\u306b\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3002\nhttp://d.hatena.ne.jp/yohei-a/20121025/1351160339\n\n* sys\u306eCPU\u4f7f\u7528\u7387\u304c\u9ad8\u3044\u5834\u5408\u306b\u305d\u306e\u5185\u8a33\u3092\u8abf\u3079\u308b\u65b9\u6cd5\nhttp://d.hatena.ne.jp/yohei-a/20131208/1386485282\n\n* ps \u3067\u8868\u793a\u3055\u308c\u308bCPU\u4f7f\u7528\u7387 = CPU\u6642\u9593 / \u5b9f\u884c\u6642\u9593\nhttp://d.hatena.ne.jp/yohei-a/20141223/1419356325\n\n* xargs\u3092\u4f7f\u3063\u3066\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u3067\u4e26\u5217\u5b9f\u884c\n\n```\n-P5\u30675\u30d7\u30ed\u30bb\u30b9\u3067\u5b9f\u884c\ncat downloadurl.list | xargs -L1 -P5 curl\n```\n\n#\u30e1\u30e2\u30ea\u5468\u308a\n* swappiness\n\n```\n# cat /proc/sys/vm/swappiness\n60\n# vi /etc/sysctl.conf\nvm.swappiness = 0\n# sysctl -p \n```\n\n* swap\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30e1\u30e2\u30ea\u306b\u623b\u3059\n\n```\nswap\u9818\u57df\u306e\u78ba\u8a8d\n# cat /proc/swaps\nFilename                                Type            Size    Used    Priority\n/dev/xvdb1                              partition       2096444 0       -1\n\nswap\u9818\u57df\u3092\u7121\u52b9\u5316\u3057\u3066\u30b9\u30ef\u30c3\u30d7\u9818\u57df\u306e\u30c7\u30fc\u30bf\u3092\u30e1\u30e2\u30ea\u306b\u3082\u3069\u3059\n# swapoff /dev/xvdb1\n\n/etc/fstab\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308bswap device\u3092\u6709\u52b9\u5316\u3059\u308b\n# swapon -a\n```\n\n\n* /proc/meminfo\u3092\u8003\u3048\u308b\nhttp://enakai00.hatenablog.com/entry/20110906/1315315488\n\n* /proc/meminfo \u306e Inactive \u306f\u5229\u7528\u53ef\u80fd\u306a\u30e1\u30e2\u30ea\u9818\u57df\u3067\u306f\u306a\u3044\nhttp://d.hatena.ne.jp/yohei-a/20141230/1419910742\n\n* Linux \u3067\u7269\u7406\u30e1\u30e2\u30ea\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u5171\u6709\u30e1\u30e2\u30ea\u306f cahced \u306b\u8a08\u4e0a\u3055\u308c\u308b\nhttp://d.hatena.ne.jp/yohei-a/20110813/1313203883\nhttp://d.hatena.ne.jp/yohei-a/20120527/1338131729\n\n# Disk\u69cb\u6210\n\n* fisk\u3088\u308alsblk\u3084parted\u3002\u305a\u3063\u3068\u8aad\u307f\u3084\u3059\u3044\u3002\n\n```\n# lsblk\nNAME                                           MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT\nloop0                                            7:0    0  100G  0 loop\n\u2514\u2500docker-202:2-1089543-pool (dm-2)             253:2    0  100G  0 dm\nloop1                                            7:1    0    2G  0 loop\n\u2514\u2500docker-202:2-1089543-pool (dm-2)             253:2    0  100G  0 dm\nxvdb                                           202:16   0    2G  0 disk\n\u2514\u2500xvdb1                                        202:17   0    2G  0 part  [SWAP]\nxvda                                           202:0    0   25G  0 disk\n\u251c\u2500xvda1                                        202:1    0  256M  0 part  /boot\n\u2514\u2500xvda2                                        202:2    0 24.8G  0 part  /\nsda                                              8:0    0   20G  0 disk\n\u2514\u25003600a09803830304d485d46366a524974 (dm-0)     253:0    0   20G  0 mpath\n  \u2514\u25003600a09803830304d485d46366a524974p1 (dm-1) 253:1    0   20G  0 part\nsdb                                              8:16   0   20G  0 disk\n\u2514\u25003600a09803830304d485d46366a524974 (dm-0)     253:0    0   20G  0 mpath\n  \u2514\u25003600a09803830304d485d46366a524974p1 (dm-1) 253:1    0   20G  0 part\n```\n\n```\n# parted -l\nModel: NETAPP LUN C-Mode (scsi)\nDisk /dev/sda: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      32.3kB  21.5GB  21.5GB  primary  ext4\n\n\nModel: NETAPP LUN C-Mode (scsi)\nDisk /dev/sdb: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      32.3kB  21.5GB  21.5GB  primary  ext4\n\n\nModel: Linux device-mapper (thin-pool) (dm)\nDisk /dev/mapper/docker-202:2-1089543-pool: 107GB\nSector size (logical/physical): 512B/512B\nPartition Table: loop\n\nNumber  Start  End    Size   File system  Flags\n 1      0.00B  107GB  107GB  ext4\n\n\nModel: Linux device-mapper (linear) (dm)\nDisk /dev/mapper/3600a09803830304d485d46366a524974p1: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: loop\n\nNumber  Start  End     Size    File system  Flags\n 1      0.00B  21.5GB  21.5GB  ext4\n\n\nModel: Linux device-mapper (multipath) (dm)\nDisk /dev/mapper/3600a09803830304d485d46366a524974: 21.5GB\nSector size (logical/physical): 512B/4096B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      32.3kB  21.5GB  21.5GB  primary  ext4\n\n\nModel: Xen Virtual Block Device (xvd)\nDisk /dev/xvdb: 2147MB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system     Flags\n 1      32.3kB  2147MB  2147MB  primary  linux-swap(v1)\n\n\nModel: Xen Virtual Block Device (xvd)\nDisk /dev/xvda: 26.8GB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      1049kB  269MB   268MB   primary  ext3         boot\n 2      269MB   26.8GB  26.6GB  primary  ext3\n\n```\n\n# I/O\n* iostat\u306e\u898b\u65b9\nhttp://d.hatena.ne.jp/yohei-a/20110711/1310396665\n\n* Linux \u306e iostat \u306e\u51fa\u529b\u7d50\u679c\u3092\u9280\u884c\u306eATM\u306b\u4f8b\u3048\u3066\u8aac\u660e\u3057\u3066\u307f\u308b\nhttp://d.hatena.ne.jp/yohei-a/20111203/1322909311\n\n* iostat -x \u306e\u51fa\u529b\u3092 Linux Kernel \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u7406\u89e3\u3059\u308b\nhttp://blog.etsukata.com/2013/10/iostat-x-linux-kernel.html\nr/s: read request per second\nw/s: write request per second\nr/s + w/s: IOPS(I/O request per second)\nawait: \uff08\u30ad\u30e5\u30fc\u306b\u3044\u308b\u6642\u9593\uff0b\u5b9f\u969b\u306e\u30c7\u30a3\u30b9\u30af\u3067\u306e\u51e6\u7406\u6642\u9593\uff09\u306e\u5e73\u5747\u5024\uff08\u5358\u4f4d\u30df\u30ea\u79d2\uff09\nsvctm: \u5b9f\u969b\u306e\u30c7\u30a3\u30b9\u30af\u3067\u306e\u51e6\u7406\u6642\u9593\u306e\u5e73\u5747\u5024\uff08\u5358\u4f4d\u30df\u30ea\u79d2\uff09\nsvctm: \u4e00\u56de\u306eI/O\u767a\u884c\u306b\u304b\u304b\u308b\u6642\u9593(\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30ad\u30e5\u30fc\u306b\u7a4d\u307e\u308c\u3066\u3044\u308b\u6642\u9593\u3092\u542b\u307e\u306a\u3044)\u306e\u5e73\u5747\u5024\u3002\u5358\u4f4d\u306f\u30df\u30ea\u79d2\u3002\n\u3082\u3057\u30c7\u30a3\u30b9\u30af\u304c\u30d5\u30eb\u7a3c\u50cd\u3067\u3042\u308c\u3070\u3001(r/s + w/s)*svctm\u306f\n\n* iostat \u306f\u3069\u306e\u3088\u3046\u306b %util \u3092\u7b97\u51fa\u3057\u3066\u3044\u308b\u304b(1)-(3)\nhttp://d.hatena.ne.jp/yohei-a/20130923/1379950413\nhttp://d.hatena.ne.jp/yohei-a/20130925/1380070554\nhttp://d.hatena.ne.jp/yohei-a/20141013/1413167192\n\n* \u30d5\u30a1\u30a4\u30eb\u304c O_DIRECT \u30d5\u30e9\u30b0\u3092\u6307\u5b9a\u3057\u3066\u30aa\u30fc\u30d7\u30f3\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\nhttp://d.hatena.ne.jp/yohei-a/20131016/1381934605\n\n#\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n* [Linux\u3067\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u3084\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30fc\u30d0\u3092\u30de\u30eb\u30c1\u30b3\u30a2\u30b9\u30b1\u30fc\u30eb\u3055\u305b\u308b\u305f\u3081\u306e\u30ab\u30fc\u30cd\u30eb\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0](\nhttp://yuuki.hatenablog.com/entry/linux-networkstack-tuning-rfs)\n\n* [Linux\u306b\u304a\u3051\u308b\u30ab\u30fc\u30cd\u30eb\u30d1\u30b1\u30c3\u30c8\u8ee2\u9001](\nhttp://www.slideshare.net/m-asama/linux-packetforwarding)\n\n* [10GbE\u6642\u4ee3\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30afI/O\u9ad8\u901f\u5316](\nhttp://www.slideshare.net/syuu1228/10-gbeio)\n\n* bonding\u3067Active\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u78ba\u8a8d\u65b9\u6cd5\u3068\u5909\u66f4\u65b9\u6cd5\nhttp://d.hatena.ne.jp/yohei-a/20140915/1410799829\n\n\u4e0b\u8a18\u306fLACP\uff08IEEE 802.3ad\uff09\u306e\u4f8b\u3060\u304c\u3001\n\n```\n# cat /proc/net/bonding/bond0\nEthernet Channel Bonding Driver: v3.7.1 (April 27, 2011)\n\nBonding Mode: IEEE 802.3ad Dynamic link aggregation\nTransmit Hash Policy: layer3+4 (1)\nMII Status: up\nMII Polling Interval (ms): 250\nUp Delay (ms): 0\nDown Delay (ms): 0\n\n802.3ad info\nLACP rate: slow\nMin links: 0\nAggregator selection policy (ad_select): stable\nActive Aggregator Info:\n        Aggregator ID: 2\n        Number of ports: 1\n        Actor Key: 9\n        Partner Key: 17\n        Partner Mac Address: 02:1c:73:43:bc:0b\n\nSlave Interface: eth2\nMII Status: down\nSpeed: Unknown\nDuplex: Unknown\nLink Failure Count: 0\nPermanent HW addr: 00:25:90:f2:e7:e0\nAggregator ID: 1\nSlave queue ID: 0\n\nSlave Interface: eth0\nMII Status: up\nSpeed: 100 Mbps\nDuplex: full\nLink Failure Count: 0\nPermanent HW addr: 00:25:90:f2:e7:de\nAggregator ID: 2\nSlave queue ID: 0\n\n```\n\n\n\n#\u753b\u50cf\u51e6\u7406\n\n* [\u30de\u30eb\u30c1\u30b3\u30a2\u3092\u7528\u3044\u305f\u753b\u50cf\u51e6\u7406](\nhttp://www.slideshare.net/FukushimaNorishige/ssii-33751285)\n\n", "tags": ["ShinobiLayer"]}