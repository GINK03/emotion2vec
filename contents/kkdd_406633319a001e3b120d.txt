{"context": " More than 1 year has passed since last update.\u3053\u3093\u306b\u3061\u306f\u3002\nTerminal \u306e\u8868\u793a\u51fa\u529b\u306e\u6700\u7d42\u884c\u306e1\u3064\u4e0a\u306e\u4e00\u884c\u3092\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc\u3059\u308b\u306b\u306f\u3001MacOSX \u306e pbcopy\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u3001\n$ !! | tail -n 1 | pbcopy\n\n\u3067\u3059\u304c\u3001AppleScript \u5229\u7528\u306e\u30b3\u30de\u30f3\u30c9\u3092\u81ea\u4f5c\u3057\u307e\u3057\u305f\u3002\uff08\u305f\u3060\u3057\u73fe\u6642\u70b9\u306ePROMPT\u3092\u6c7a\u3081\u6253\u3061\u306b\u3057\u3066\u3044\u308b\u306a\u3069\u5168\u304f\u6d17\u7df4\u3055\u308c\u3066\u3044\u306a\u306e\u3067\u3054\u5bb9\u8d66\u3067\u3059\uff09\u3002\n#!/bin/sh\nPROMPT=\"$ \" # \u6c7a\u3081\u6253\u3061\nOFFSETLASTLINE=1 # \u8868\u793a\u5185\u5bb9\u306e\u6700\u7d42\u884c\u306e1\u3064\u4e0a\u306e\u884c\u306e\u6587\u5b57\u5217\nif [ $# -ge 1 ] && expr \"$1\" : '[0-9]*' > /dev/null ; then\n  OFFSETLASTLINE=$1\nfi\nosascript << SCRIPT\ntell application \"Terminal\"\n        set theContents to contents of front window\nend tell\nset strList to paragraphs of theContents\nset idxMax to length of strList\nrepeat with idx from (idxMax - 1 - ${OFFSETLASTLINE}) to 1 by -1\n        set theLine to item idx of strList\n        if theLine is not \"\" or theLine begins with \"${PROMPT}\"\n                exit repeat\n        end if\nend repeat\nset the clipboard to theLine\nSCRIPT\n\n\u3053\u3093\u306b\u3061\u306f\u3002\nTerminal \u306e\u8868\u793a\u51fa\u529b\u306e\u6700\u7d42\u884c\u306e1\u3064\u4e0a\u306e\u4e00\u884c\u3092\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc\u3059\u308b\u306b\u306f\u3001MacOSX \u306e ```pbcopy```\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u3001\n\n```console\n$ !! | tail -n 1 | pbcopy\n```\n\n\u3067\u3059\u304c\u3001AppleScript \u5229\u7528\u306e\u30b3\u30de\u30f3\u30c9\u3092\u81ea\u4f5c\u3057\u307e\u3057\u305f\u3002\uff08\u305f\u3060\u3057\u73fe\u6642\u70b9\u306e```PROMPT```\u3092\u6c7a\u3081\u6253\u3061\u306b\u3057\u3066\u3044\u308b\u306a\u3069\u5168\u304f\u6d17\u7df4\u3055\u308c\u3066\u3044\u306a\u306e\u3067\u3054\u5bb9\u8d66\u3067\u3059\uff09\u3002\n\n```bash\n#!/bin/sh\nPROMPT=\"$ \" # \u6c7a\u3081\u6253\u3061\nOFFSETLASTLINE=1 # \u8868\u793a\u5185\u5bb9\u306e\u6700\u7d42\u884c\u306e1\u3064\u4e0a\u306e\u884c\u306e\u6587\u5b57\u5217\nif [ $# -ge 1 ] && expr \"$1\" : '[0-9]*' > /dev/null ; then\n  OFFSETLASTLINE=$1\nfi\nosascript << SCRIPT\ntell application \"Terminal\"\n        set theContents to contents of front window\nend tell\nset strList to paragraphs of theContents\nset idxMax to length of strList\nrepeat with idx from (idxMax - 1 - ${OFFSETLASTLINE}) to 1 by -1\n        set theLine to item idx of strList\n        if theLine is not \"\" or theLine begins with \"${PROMPT}\"\n                exit repeat\n        end if\nend repeat\nset the clipboard to theLine\nSCRIPT\n```\n", "tags": ["MacOSX", "AppleScript", "Terminal", "OSX", "shell"]}