{"tags": ["AWS", "aws-cli", "ElasticBeanstalk"], "context": " More than 1 year has passed since last update.http://jawsug-cli.doorkeeper.jp/events/19360 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001ElasticBeanstalk\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5ec3\u6b62\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\nIAM\u3078\u306e\u6a29\u9650\n\nElasticBeanstalk\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\n\u30dd\u30ea\u30b7\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n{\n    \"GroupName\": \"beanstalk_full\", \n    \"PolicyDocument\": {\n        \"Version\": \"2012-10-17\", \n        \"Statement\": [\n            {\n                \"Action\": [\n                    \"elasticbeanstalk:*\", \n                    \"ec2:*\", \n                    \"elasticloadbalancing:*\", \n                    \"autoscaling:*\", \n                    \"cloudwatch:*\", \n                    \"s3:*\", \n                    \"sns:*\", \n                    \"cloudformation:*\", \n                    \"rds:*\", \n                    \"sqs:*\", \n                    \"iam:CreateRole\",\n                    \"iam:CreateInstanceProfile\",\n                    \"iam:GetUser\",\n                    \"iam:ListInstanceProfiles\",\n                    \"iam:ListRoles\", \n                    \"iam:PassRole\"\n                ], \n                \"Resource\": \"*\", \n                \"Effect\": \"Allow\"\n            }\n        ]\n    }, \n    \"PolicyName\": \"beanstalk_full\"\n}\n\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.7.12\n\n\n\n\n0. \u6e96\u5099\n\n0.1. \u5909\u6570\u306e\u78ba\u8a8d\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      AWS_DEFAULT_REGION:   ${AWS_DEFAULT_REGION}\n      AWS_DEFAULT_PROFILE:  ${AWS_DEFAULT_PROFILE}\n      EB_APP_NAME:         \"${EB_APP_NAME}\"\n      EB_ENV_NAME:         \"${EB_ENV_NAME}\"\n      EB_ENV_ID:           \"${EB_ENV_ID}\"\n\nETX\n\n\n\nEB_APP_NAME\n\n\u30b3\u30de\u30f3\u30c9\nEB_APP_NAME='My First Elastic Beanstalk Application'\n\n\n\nEB_ENV_NAME\n\n\u30b3\u30de\u30f3\u30c9\nEB_ENV_NAME='Default-Environment'\n\n\n\n\u30b3\u30de\u30f3\u30c9\nEB_ENV_ID=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-names \"${EB_ENV_NAME}\" --query 'Environments[].EnvironmentId' --output text` \\\n        && echo ${EB_ENV_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      e-xxxxxxxxxx\n\n\n\u30ce\u30fc\u30c8: Environment\u306f\u3001Environment ID\u3068Environment Name\u306e2\u3064\u3067\u7279\u5b9a\u3067\n  \u304d\u307e\u3059\u304c \u3001\u3053\u3053\u3067\u306f\u306a\u308b\u3079\u304fEnvironment ID\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n1. Environment\u306e\u7834\u68c4\n-[ Environment\u306e\u5185\u5bb9\u78ba\u8a8d (describe-environments) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-ids \"${EB_ENV_ID}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Status\": \"Ready\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Green\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:39:23.031Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n\n\n-[ Environment\u306e\u30ea\u30bd\u30fc\u30b9\u78ba\u8a8d (describe-environment-resources) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-environment-resources \\\n        --environment-id ${EB_ENV_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"EnvironmentResources\": {\n              \"EnvironmentName\": \"Default-Environment\", \n              \"AutoScalingGroups\": [\n                  {\n                      \"Name\": \"awseb-e-mvmwrxyipz-stack-AWSEBAutoScalingGroup-xxxxxxxxxxxxx\"\n                  }\n              ], \n              \"Triggers\": [], \n              \"LoadBalancers\": [\n                  {\n                      \"Name\": \"awseb-e-m-AWSEBLoa-xxxxxxxxxxxx\"\n                  }\n              ], \n              \"Queues\": [], \n              \"Instances\": [\n                  {\n                      \"Id\": \"i-xxxxxxxx\"\n                  }\n              ], \n              \"LaunchConfigurations\": [\n                  {\n                      \"Name\": \"awseb-e-mvmwrxyipz-stack-AWSEBAutoScalingLaunchConfiguration-xxxxxxxxxxxxx\"\n                  }\n              ]\n          }\n      }\n\n\n-[ \u7834\u68c4 (terminate-environment) ]-\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      EB_ENV_ID:  ${EB_ENV_ID}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk terminate-environment \\\n        --environment-id ${EB_ENV_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n        \"EnvironmentName\": \"Default-Environment\",\n        \"Status\": \"Terminating\",\n        \"EnvironmentId\": \"e-pm2m8tsyuc\",\n        \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n        \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n        \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n        \"Health\": \"Grey\",\n        \"Tier\": {\n          \"Version\": \" \",\n          \"Type\": \"Standard\",\n          \"Name\": \"WebServer\"\n        },\n        \"DateUpdated\": \"2015-03-02T08:03:49.612Z\",\n        \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n      }\n\n\n-[ Environment\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d (describe-environments) ]-\nstatus\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\u30b3\u30de\u30f3\u30c9\nEB_ENV_STATUS=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-ids \"${EB_ENV_ID}\" --query 'Environments[].Status' --output text` \\\n        && echo ${EB_ENV_STATUS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      Terminated\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-ids \"${EB_ENV_ID}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Status\": \"Terminated\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Grey\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T08:07:32.598Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n\n\n-[ Environment\u306e\u30ea\u30bd\u30fc\u30b9\u78ba\u8a8d (describe-environment-resources) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-environment-resources \\\n        --environment-name ${EB_ENV_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\nA client error (InvalidParameterValue) occurred when calling the DescribeEnvironmentResources operation: No Environment found for EnvironmentName = 'Default-Environment'.\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='13'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-id ${EB_ENV_ID} \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___13\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"terminateEnvironment completed successfully.\",\n              \"EventDate\": \"2015-03-02T08:07:32.734Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleting SNS topic for environment Default-Environment.\",\n              \"EventDate\": \"2015-03-02T08:07:31.148Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted security group named: sg-ee7e518b\",\n              \"EventDate\": \"2015-03-02T08:07:14.647Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted load balancer named: awseb-e-p-AWSEBLoa-1JIB95ZPILT5G\",\n              \"EventDate\": \"2015-03-02T08:06:00.579Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted security group named: awseb-e-pm2m8tsyuc-stack-AWSEBSecurityGroup-A21GRYC1XDZR\",\n              \"EventDate\": \"2015-03-02T08:05:58.135Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling launch configuration named: awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingLaunchConfiguration-1ATRW47YSHDS9\",\n              \"EventDate\": \"2015-03-02T08:05:55.462Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling group named: awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingGroup-1FL6R7WEIXQE1\",\n              \"EventDate\": \"2015-03-02T08:05:53.075Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Waiting for EC2 instances to terminate. This may take a few minutes.\",\n              \"EventDate\": \"2015-03-02T08:04:05.504Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:XXXXXXXXXXXX:scalingPolicy:332d7aa6-c84d-497d-a4ed-fb8c5a1389e2:autoScalingGroupName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingGroup-1FL6R7WEIXQE1:policyName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingScaleDownPolicy-92IEAFZFDKNJ\",\n              \"EventDate\": \"2015-03-02T08:04:03.948Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:XXXXXXXXXXXX:scalingPolicy:6b5fbcd5-111d-47bb-bb1d-27d84eb75906:autoScalingGroupName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingGroup-1FL6R7WEIXQE1:policyName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingScaleUpPolicy-1UIJ44XP4FQGY\",\n              \"EventDate\": \"2015-03-02T08:04:02.471Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted CloudWatch alarm named: awseb-e-pm2m8tsyuc-stack-AWSEBCloudwatchAlarmLow-1RM59RCZ9QV4H \",\n              \"EventDate\": \"2015-03-02T08:04:01.672Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted CloudWatch alarm named: awseb-e-pm2m8tsyuc-stack-AWSEBCloudwatchAlarmHigh-CLNQSP4AHG1J \",\n              \"EventDate\": \"2015-03-02T08:04:00.155Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"terminateEnvironment is starting.\",\n              \"EventDate\": \"2015-03-02T08:03:49.643Z\"\n          }\n        ]\n      }\n\n\n\n2. version\u524a\u9664\n\u4e0d\u8981\u306b\u306a\u3063\u305f\u904e\u53bb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n2.1. \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e00\u89a7\u53d6\u5f97\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --query 'ApplicationVersions[].VersionLabel'\n\n\n\n\u7d50\u679c(\u4f8b)\n      [\n          \"Sample Application Second Version\",\n          \"Sample Application\"\n      ]\n\n\n\n2.2. 1st version\u306e\u524a\u9664\n\n\u30b3\u30de\u30f3\u30c9\nEB_VER_LABEL='Sample Application'\n\n\n-[ \u524a\u9664 (delete-application-version) ]-\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      EB_APP_NAME:  \"${EB_APP_NAME}\"\n      EB_VER_LABEL: \"${EB_VER_LABEL}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk delete-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='3'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___3\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"fc6e6627-c0b3-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"deleteApplicationVersions completed successfully.\",\n              \"EventDate\": \"2015-03-02T08:13:19.739Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"fc6e6627-c0b3-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Application Version: Sample Application\",\n              \"EventDate\": \"2015-03-02T08:13:19.675Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"fc6e6627-c0b3-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"deleteApplicationVersions is starting.\",\n              \"EventDate\": \"2015-03-02T08:13:19.555Z\"\n          }\n        ]\n      }\n\n\n\n2.3. 2nd version\u306e\u524a\u9664\n\n\u30b3\u30de\u30f3\u30c9\nEB_VER_LABEL='Sample Application Second Version'\n\n\n-[ \u524a\u9664 (delete-application-version) ]-\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      EB_APP_NAME:  \"${EB_APP_NAME}\"\n      EB_VER_LABEL: \"${EB_VER_LABEL}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk delete-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='3'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___3\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"1f509bb8-c0b4-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"deleteApplicationVersions completed successfully.\",\n              \"EventDate\": \"2015-03-02T08:14:18.166Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"1f509bb8-c0b4-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"Deleted Application Version: Sample Application Second Version\",\n              \"EventDate\": \"2015-03-02T08:14:18.110Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"1f509bb8-c0b4-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"deleteApplicationVersions is starting.\",\n              \"EventDate\": \"2015-03-02T08:14:18.062Z\"\n          }\n        ]\n      }\n\n\n\n2.4. \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d\n-[ \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-application-versions) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\"\n\n\n\n\u7d50\u679c\n      {\n          \"ApplicationVersions\": []\n      }\n\n\n\n3. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u524a\u9664\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-applications) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Applications\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"ConfigurationTemplates\": [],\n              \"DateUpdated\": \"2015-03-02T07:50:35.104Z\",\n              \"Description\": \"hands-on app\",\n              \"DateCreated\": \"2015-03-02T07:08:07.952Z\"\n          }\n        ]\n      }\n\n\n-[ \u524a\u9664 (delete-application) ]-\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      EB_APP_NAME: \"${EB_APP_NAME}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk delete-application --application-name \"${EB_APP_NAME}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d (describe-applications) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"Applications\": []\n      }\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='4'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___4\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"The application has been deleted successfully.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:01.296Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"The environment termination step is done.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:00.522Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"No environment needs to be terminated.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:00.333Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"deleteApplication is starting.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:00.087Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          }\n        ]\n      }\n\n\n\n4. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u524a\u9664\n\n\u30b3\u30de\u30f3\u30c9\naws s3 rm s3://${S3_BUCKET_NAME}/php-sample.zip\naws s3 rm s3://${S3_BUCKET_NAME}/php-secondsample.zip\n\n\n\n\u5b8c\u4e86\nhttp://jawsug-cli.doorkeeper.jp/events/19360 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\n\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001ElasticBeanstalk\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5ec3\u6b62\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n\nIAM\u3078\u306e\u6a29\u9650\n-----------\n\n* ElasticBeanstalk\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n```json:\u30dd\u30ea\u30b7\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n{\n    \"GroupName\": \"beanstalk_full\", \n    \"PolicyDocument\": {\n        \"Version\": \"2012-10-17\", \n        \"Statement\": [\n            {\n                \"Action\": [\n                    \"elasticbeanstalk:*\", \n                    \"ec2:*\", \n                    \"elasticloadbalancing:*\", \n                    \"autoscaling:*\", \n                    \"cloudwatch:*\", \n                    \"s3:*\", \n                    \"sns:*\", \n                    \"cloudformation:*\", \n                    \"rds:*\", \n                    \"sqs:*\", \n                    \"iam:CreateRole\",\n                    \"iam:CreateInstanceProfile\",\n                    \"iam:GetUser\",\n                    \"iam:ListInstanceProfiles\",\n                    \"iam:ListRoles\", \n                    \"iam:PassRole\"\n                ], \n                \"Resource\": \"*\", \n                \"Effect\": \"Allow\"\n            }\n        ]\n    }, \n    \"PolicyName\": \"beanstalk_full\"\n}\n```\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n-------------------\n\n* \u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n  * AWS CLI 1.7.12\n\n\n\n\n0. \u6e96\u5099\n=======\n\n\n0.1. \u5909\u6570\u306e\u78ba\u8a8d\n---------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      AWS_DEFAULT_REGION:   ${AWS_DEFAULT_REGION}\n      AWS_DEFAULT_PROFILE:  ${AWS_DEFAULT_PROFILE}\n      EB_APP_NAME:         \"${EB_APP_NAME}\"\n      EB_ENV_NAME:         \"${EB_ENV_NAME}\"\n      EB_ENV_ID:           \"${EB_ENV_ID}\"\n\nETX\n```\n\nEB_APP_NAME\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_APP_NAME='My First Elastic Beanstalk Application'\n```\n\n\nEB_ENV_NAME\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_ENV_NAME='Default-Environment'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_ENV_ID=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-names \"${EB_ENV_NAME}\" --query 'Environments[].EnvironmentId' --output text` \\\n        && echo ${EB_ENV_ID}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      e-xxxxxxxxxx\n```\n\n\u30ce\u30fc\u30c8: Environment\u306f\u3001Environment ID\u3068Environment Name\u306e2\u3064\u3067\u7279\u5b9a\u3067\n  \u304d\u307e\u3059\u304c \u3001\u3053\u3053\u3067\u306f\u306a\u308b\u3079\u304fEnvironment ID\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\n1. Environment\u306e\u7834\u68c4\n====================\n\n-[ Environment\u306e\u5185\u5bb9\u78ba\u8a8d (describe-environments) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-ids \"${EB_ENV_ID}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Status\": \"Ready\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Green\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:39:23.031Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n```\n\n-[ Environment\u306e\u30ea\u30bd\u30fc\u30b9\u78ba\u8a8d (describe-environment-resources) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-environment-resources \\\n        --environment-id ${EB_ENV_ID}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n          \"EnvironmentResources\": {\n              \"EnvironmentName\": \"Default-Environment\", \n              \"AutoScalingGroups\": [\n                  {\n                      \"Name\": \"awseb-e-mvmwrxyipz-stack-AWSEBAutoScalingGroup-xxxxxxxxxxxxx\"\n                  }\n              ], \n              \"Triggers\": [], \n              \"LoadBalancers\": [\n                  {\n                      \"Name\": \"awseb-e-m-AWSEBLoa-xxxxxxxxxxxx\"\n                  }\n              ], \n              \"Queues\": [], \n              \"Instances\": [\n                  {\n                      \"Id\": \"i-xxxxxxxx\"\n                  }\n              ], \n              \"LaunchConfigurations\": [\n                  {\n                      \"Name\": \"awseb-e-mvmwrxyipz-stack-AWSEBAutoScalingLaunchConfiguration-xxxxxxxxxxxxx\"\n                  }\n              ]\n          }\n      }\n```\n\n-[ \u7834\u68c4 (terminate-environment) ]-\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      EB_ENV_ID:  ${EB_ENV_ID}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk terminate-environment \\\n        --environment-id ${EB_ENV_ID}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n        \"EnvironmentName\": \"Default-Environment\",\n        \"Status\": \"Terminating\",\n        \"EnvironmentId\": \"e-pm2m8tsyuc\",\n        \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n        \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n        \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n        \"Health\": \"Grey\",\n        \"Tier\": {\n          \"Version\": \" \",\n          \"Type\": \"Standard\",\n          \"Name\": \"WebServer\"\n        },\n        \"DateUpdated\": \"2015-03-02T08:03:49.612Z\",\n        \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n      }\n```\n\n-[ Environment\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d (describe-environments) ]-\n\nstatus\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_ENV_STATUS=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-ids \"${EB_ENV_ID}\" --query 'Environments[].Status' --output text` \\\n        && echo ${EB_ENV_STATUS}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      Terminated\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-ids \"${EB_ENV_ID}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Status\": \"Terminated\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Grey\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T08:07:32.598Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n```\n\n-[ Environment\u306e\u30ea\u30bd\u30fc\u30b9\u78ba\u8a8d (describe-environment-resources) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-environment-resources \\\n        --environment-name ${EB_ENV_NAME}\n```\n\n```text:\u7d50\u679c(\u4f8b):\nA client error (InvalidParameterValue) occurred when calling the DescribeEnvironmentResources operation: No Environment found for EnvironmentName = 'Default-Environment'.\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='13'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-id ${EB_ENV_ID} \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___13\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"terminateEnvironment completed successfully.\",\n              \"EventDate\": \"2015-03-02T08:07:32.734Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleting SNS topic for environment Default-Environment.\",\n              \"EventDate\": \"2015-03-02T08:07:31.148Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted security group named: sg-ee7e518b\",\n              \"EventDate\": \"2015-03-02T08:07:14.647Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted load balancer named: awseb-e-p-AWSEBLoa-1JIB95ZPILT5G\",\n              \"EventDate\": \"2015-03-02T08:06:00.579Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted security group named: awseb-e-pm2m8tsyuc-stack-AWSEBSecurityGroup-A21GRYC1XDZR\",\n              \"EventDate\": \"2015-03-02T08:05:58.135Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling launch configuration named: awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingLaunchConfiguration-1ATRW47YSHDS9\",\n              \"EventDate\": \"2015-03-02T08:05:55.462Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling group named: awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingGroup-1FL6R7WEIXQE1\",\n              \"EventDate\": \"2015-03-02T08:05:53.075Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Waiting for EC2 instances to terminate. This may take a few minutes.\",\n              \"EventDate\": \"2015-03-02T08:04:05.504Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:XXXXXXXXXXXX:scalingPolicy:332d7aa6-c84d-497d-a4ed-fb8c5a1389e2:autoScalingGroupName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingGroup-1FL6R7WEIXQE1:policyName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingScaleDownPolicy-92IEAFZFDKNJ\",\n              \"EventDate\": \"2015-03-02T08:04:03.948Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:XXXXXXXXXXXX:scalingPolicy:6b5fbcd5-111d-47bb-bb1d-27d84eb75906:autoScalingGroupName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingGroup-1FL6R7WEIXQE1:policyName/awseb-e-pm2m8tsyuc-stack-AWSEBAutoScalingScaleUpPolicy-1UIJ44XP4FQGY\",\n              \"EventDate\": \"2015-03-02T08:04:02.471Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted CloudWatch alarm named: awseb-e-pm2m8tsyuc-stack-AWSEBCloudwatchAlarmLow-1RM59RCZ9QV4H \",\n              \"EventDate\": \"2015-03-02T08:04:01.672Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted CloudWatch alarm named: awseb-e-pm2m8tsyuc-stack-AWSEBCloudwatchAlarmHigh-CLNQSP4AHG1J \",\n              \"EventDate\": \"2015-03-02T08:04:00.155Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"a88138db-c0b2-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"terminateEnvironment is starting.\",\n              \"EventDate\": \"2015-03-02T08:03:49.643Z\"\n          }\n        ]\n      }\n```\n\n\n2. version\u524a\u9664\n==============\n\n\u4e0d\u8981\u306b\u306a\u3063\u305f\u904e\u53bb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\n2.1. \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e00\u89a7\u53d6\u5f97\n-------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --query 'ApplicationVersions[].VersionLabel'\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      [\n          \"Sample Application Second Version\",\n          \"Sample Application\"\n      ]\n```\n\n\n2.2. 1st version\u306e\u524a\u9664\n----------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_VER_LABEL='Sample Application'\n```\n\n-[ \u524a\u9664 (delete-application-version) ]-\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      EB_APP_NAME:  \"${EB_APP_NAME}\"\n      EB_VER_LABEL: \"${EB_VER_LABEL}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk delete-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='3'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___3\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"fc6e6627-c0b3-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"deleteApplicationVersions completed successfully.\",\n              \"EventDate\": \"2015-03-02T08:13:19.739Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"fc6e6627-c0b3-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"Deleted Application Version: Sample Application\",\n              \"EventDate\": \"2015-03-02T08:13:19.675Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"fc6e6627-c0b3-11e4-ac14-7f1caa62b011\",\n              \"Message\": \"deleteApplicationVersions is starting.\",\n              \"EventDate\": \"2015-03-02T08:13:19.555Z\"\n          }\n        ]\n      }\n```\n\n\n2.3. 2nd version\u306e\u524a\u9664\n----------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_VER_LABEL='Sample Application Second Version'\n```\n\n-[ \u524a\u9664 (delete-application-version) ]-\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      EB_APP_NAME:  \"${EB_APP_NAME}\"\n      EB_VER_LABEL: \"${EB_VER_LABEL}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk delete-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='3'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___3\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"1f509bb8-c0b4-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"deleteApplicationVersions completed successfully.\",\n              \"EventDate\": \"2015-03-02T08:14:18.166Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"1f509bb8-c0b4-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"Deleted Application Version: Sample Application Second Version\",\n              \"EventDate\": \"2015-03-02T08:14:18.110Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"1f509bb8-c0b4-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"deleteApplicationVersions is starting.\",\n              \"EventDate\": \"2015-03-02T08:14:18.062Z\"\n          }\n        ]\n      }\n```\n\n\n2.4. \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d\n---------------------------\n\n-[ \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-application-versions) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\"\n```\n\n```json:\u7d50\u679c:\n      {\n          \"ApplicationVersions\": []\n      }\n```\n\n\n3. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u524a\u9664\n=========================\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-applications) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Applications\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"ConfigurationTemplates\": [],\n              \"DateUpdated\": \"2015-03-02T07:50:35.104Z\",\n              \"Description\": \"hands-on app\",\n              \"DateCreated\": \"2015-03-02T07:08:07.952Z\"\n          }\n        ]\n      }\n```\n\n-[ \u524a\u9664 (delete-application) ]-\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      EB_APP_NAME: \"${EB_APP_NAME}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk delete-application --application-name \"${EB_APP_NAME}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e0d\u5b58\u5728\u78ba\u8a8d (describe-applications) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n          \"Applications\": []\n      }\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='4'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___4\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"The application has been deleted successfully.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:01.296Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"The environment termination step is done.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:00.522Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"No environment needs to be terminated.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:00.333Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"deleteApplication is starting.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T08:17:00.087Z\",\n              \"RequestId\": \"7fd57823-c0b4-11e4-84bf-d7f83bbc1d71\"\n          }\n        ]\n      }\n```\n\n4. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u524a\u9664\n======================\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws s3 rm s3://${S3_BUCKET_NAME}/php-sample.zip\naws s3 rm s3://${S3_BUCKET_NAME}/php-secondsample.zip\n```\n\n\u5b8c\u4e86\n====\n"}