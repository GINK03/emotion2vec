{"context": "\n\n\u306f\u3058\u3081\u306b\n<< \u524d\u56de\uff1a\u7b2c\uff11\u56de AWS\u3068IDCF\u3092VPN\u63a5\u7d9a\u3059\u308b - IDCF\u6e96\u5099\u7de8\uff08\u5168\uff14\u56de\uff09\nIDCF\u30af\u30e9\u30a6\u30c9\u306bVyOS\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3001IDCF\u30af\u30e9\u30a6\u30c9\u3068AWS\u3092VPN\u3067\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u524d\u56de\u306fIDCF\u5074\u306bVyOS\u3092\u5229\u7528\u3057\u3066VPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n\u4eca\u56de\u306fAWS\u5074\u306eVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n\n\n\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210 - AWS\n\u30fbAWS\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\nhttps://signin.aws.amazon.com/\n\u30fb\u300c\u30b5\u30fc\u30d3\u30b9 > \u3059\u3079\u3066\u306eAWS\u30b5\u30fc\u30d3\u30b9 > VPC\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30fb\u300c\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4 > \u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30fb\u300c\u30cd\u30fc\u30e0\u30bf\u30b0\u300d\u3092\u5165\u529b\u3057\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\n\u30cd\u30fc\u30e0\u30bf\u30b0\uff1aVGW-ToIDCF\n\n\n\n\n\u30fb\u300c\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4 > \u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30fb\u5404\u9805\u76ee\u3092\u5165\u529b\u3057\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\n\u30cd\u30fc\u30e0\u30bf\u30b0\uff1aVPNRouterToIDCF\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\uff1a\u9759\u7684(\u3053\u3053\u3067\u306f\u52d5\u7684\u3069\u3061\u3089\u3067\u3082OK)\nIP\u30a2\u30c9\u30ec\u30b9\uff1axxx.xxx.xxx.xxx\uff08VPN-IDCF\u306eIP\u3092\u5165\u529b\uff09\u203b\nBGP ASN\uff1a65000(\u52d5\u7684\u306e\u5834\u5408\u306f\u6307\u5b9a)\n\u203b\u7b2c\uff11\u56de AWS\u3068IDCF\u3092VPN\u63a5\u7d9a\u3059\u308b\uff08\u5168\uff14\u56de\uff09\u306e\u300cIP\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a\u300d\u3067\u53d6\u5f97\u3057\u305fIP\u3067\u3059\u3002\n\n\n\n\n\u30fbVPN\u63a5\u7d9a\u306e\u4f5c\u6210\uff1a\u300cVPN\u63a5\u7d9a > VPN\u63a5\u7d9a\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30fb\u5404\u9805\u76ee\u3092\u5165\u529b\u3057\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nVPN\u63a5\u7d9a\n\u30cd\u30fc\u30e0\u30bf\u30b0\uff1aVPNConnectToIDCF\n\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\uff1a\u3055\u3063\u304d\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\n\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\uff1a\u65e2\u5b58(\u3055\u3063\u304d\u4f5c\u6210\u3057\u305f\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4)\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30aa\u30d7\u30b7\u30e7\u30f3\uff1a\u52d5\u7684(BGP\u304c\u5fc5\u8981)\n\n\n\n\u30fb\u8a2d\u5b9a\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u4f5c\u6210\u3057\u305fVPN\u63a5\u7d9a\u3092\u9078\u629e\u3057\u300c\u8a2d\u5b9a\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30fbVyatta\u3092\u9078\u629e\u3057\u300c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Config\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n\u8a2d\u5b9a\n\u30d9\u30f3\u30c0\u30fc\uff1aVyatta\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\uff1aVyatta Network OS\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\uff1aVyatta Network OS 6.5+\n\n\n\n\nVPC\u3078\u306e\u30a2\u30bf\u30c3\u30c1\n\u30fb\u5bfe\u8c61\u3068\u306a\u308b\u300c\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u300d\u3092\u9078\u629e\u3057\u3066\u300cVPC\u306b\u30a2\u30bf\u30c3\u30c1\u300d\u3057\u307e\u3059\u3002\n\n\u30fb\u30a2\u30bf\u30c3\u30c1\u3057\u305f\u3044\u300cVPC\u300d\u3092\u9078\u3093\u3067\u300c\u30a2\u30bf\u30c3\u30c1\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\n\u304a\u308f\u308a\u306b\n\u3053\u308c\u3067AWS\u5074\u306eVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\u3042\u3068\u306f\u4e21\u65b9\u3067\u4f5c\u6210\u3057\u305fVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u7e4b\u3052\u308b\u8a2d\u5b9a\u3092\u3057\u3066\u3042\u3052\u308b\u3060\u3051\u3067\u3059\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u6b21\u56de\u306fIDCF\u5074\u3067\u4f5c\u6210\u3057\u305fVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306b\u7e4b\u3052\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n>> \u6b21\u56de\uff1a\u7b2c\uff13\u56de AWS\u3068IDCF\u3092VPN\u63a5\u7d9a\u3059\u308b - VPN\u63a5\u7d9a\u7de8\uff08\u5168\uff14\u56de\uff09\n# \u306f\u3058\u3081\u306b\n[<< \u524d\u56de\uff1a\u7b2c\uff11\u56de AWS\u3068IDCF\u3092VPN\u63a5\u7d9a\u3059\u308b - IDCF\u6e96\u5099\u7de8\uff08\u5168\uff14\u56de\uff09](http://qiita.com/kooohei/items/906a6ce1352285e793d5)\nIDCF\u30af\u30e9\u30a6\u30c9\u306bVyOS\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3001IDCF\u30af\u30e9\u30a6\u30c9\u3068AWS\u3092VPN\u3067\u63a5\u7d9a\u3059\u308b\u8a2d\u5b9a\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n![idcf-vpn-1.png](https://qiita-image-store.s3.amazonaws.com/0/82090/9b15d672-f654-ab05-fb61-57cf8951b58e.png)\n\u524d\u56de\u306fIDCF\u5074\u306bVyOS\u3092\u5229\u7528\u3057\u3066VPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n![idcf-vpn-2.png](https://qiita-image-store.s3.amazonaws.com/0/82090/903a6791-fb65-6fd3-5ecd-566c1a605c52.png)\n\n\u4eca\u56de\u306fAWS\u5074\u306eVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n![idcf-vpn-3.png](https://qiita-image-store.s3.amazonaws.com/0/82090/a8160ab4-f708-851a-40a1-a2239a67e2f5.png)\n\n\n## \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210 - AWS\n\u30fbAWS\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\nhttps://signin.aws.amazon.com/\n\n\u30fb\u300c\u30b5\u30fc\u30d3\u30b9 > \u3059\u3079\u3066\u306eAWS\u30b5\u30fc\u30d3\u30b9 > VPC\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![idcf-vpn_2_01.png](https://qiita-image-store.s3.amazonaws.com/0/82090/3c1e1978-9981-2dc9-4bc2-9a80f2f581f1.png)\n\n\u30fb\u300c\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4 > \u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![idcf-vpn_2_02.png](https://qiita-image-store.s3.amazonaws.com/0/82090/84c49d16-2f80-28a5-c581-7c1034ab22c4.png)\n\n\u30fb\u300c\u30cd\u30fc\u30e0\u30bf\u30b0\u300d\u3092\u5165\u529b\u3057\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```text:\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\n\u30cd\u30fc\u30e0\u30bf\u30b0\uff1aVGW-ToIDCF\n```\n![idcf-vpn_2_03.png](https://qiita-image-store.s3.amazonaws.com/0/82090/7865dcbf-7799-2053-cfbf-5cbd6bd402d9.png)\n![idcf-vpn_2_04.png](https://qiita-image-store.s3.amazonaws.com/0/82090/0dcf384c-7121-e8e7-388a-47c72f1f4236.png)\n\n\n\u30fb\u300c\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4 > \u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![idcf-vpn_2_05.png](https://qiita-image-store.s3.amazonaws.com/0/82090/bbe6ee08-bd67-7e9f-aea2-4ae2c2e9596c.png)\n\n\u30fb\u5404\u9805\u76ee\u3092\u5165\u529b\u3057\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```text:\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\n\u30cd\u30fc\u30e0\u30bf\u30b0\uff1aVPNRouterToIDCF\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\uff1a\u9759\u7684(\u3053\u3053\u3067\u306f\u52d5\u7684\u3069\u3061\u3089\u3067\u3082OK)\nIP\u30a2\u30c9\u30ec\u30b9\uff1axxx.xxx.xxx.xxx\uff08VPN-IDCF\u306eIP\u3092\u5165\u529b\uff09\u203b\nBGP ASN\uff1a65000(\u52d5\u7684\u306e\u5834\u5408\u306f\u6307\u5b9a)\n\u203b\u7b2c\uff11\u56de AWS\u3068IDCF\u3092VPN\u63a5\u7d9a\u3059\u308b\uff08\u5168\uff14\u56de\uff09\u306e\u300cIP\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a\u300d\u3067\u53d6\u5f97\u3057\u305fIP\u3067\u3059\u3002\n```\n![idcf-vpn_2_06.png](https://qiita-image-store.s3.amazonaws.com/0/82090/60665788-eb03-624a-7740-c617535df9d7.png)\n![idcf-vpn_2_07.png](https://qiita-image-store.s3.amazonaws.com/0/82090/0a040c13-9c94-4ee7-da69-e2442031abc9.png)\n\n\u30fbVPN\u63a5\u7d9a\u306e\u4f5c\u6210\uff1a\u300cVPN\u63a5\u7d9a > VPN\u63a5\u7d9a\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![idcf-vpn_2_08.png](https://qiita-image-store.s3.amazonaws.com/0/82090/18e8f26e-49e1-4c9d-36fc-ffcf48f1f57d.png)\n\n\u30fb\u5404\u9805\u76ee\u3092\u5165\u529b\u3057\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```text:VPN\u63a5\u7d9a\n\u30cd\u30fc\u30e0\u30bf\u30b0\uff1aVPNConnectToIDCF\n\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\uff1a\u3055\u3063\u304d\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\n\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\uff1a\u65e2\u5b58(\u3055\u3063\u304d\u4f5c\u6210\u3057\u305f\u30ab\u30b9\u30bf\u30de\u30fc\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4)\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30aa\u30d7\u30b7\u30e7\u30f3\uff1a\u52d5\u7684(BGP\u304c\u5fc5\u8981)\n```\n![idcf-vpn_2_09.png](https://qiita-image-store.s3.amazonaws.com/0/82090/c85f1397-8f10-d704-4192-e9c0257d9121.png)\n\n\u30fb\u8a2d\u5b9a\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u4f5c\u6210\u3057\u305fVPN\u63a5\u7d9a\u3092\u9078\u629e\u3057\u300c\u8a2d\u5b9a\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![idcf-vpn_2_10.png](https://qiita-image-store.s3.amazonaws.com/0/82090/45699772-b199-d6ef-0210-e3aecfde52d9.png)\n\n\u30fbVyatta\u3092\u9078\u629e\u3057\u300c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Config\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```text:\u8a2d\u5b9a\n\u30d9\u30f3\u30c0\u30fc\uff1aVyatta\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\uff1aVyatta Network OS\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\uff1aVyatta Network OS 6.5+\n```\n![idcf-vpn_2_12.png](https://qiita-image-store.s3.amazonaws.com/0/82090/d1da47b7-051b-d5a4-de57-79f72ac46887.png)\n\n\n## VPC\u3078\u306e\u30a2\u30bf\u30c3\u30c1\n\u30fb\u5bfe\u8c61\u3068\u306a\u308b\u300c\u4eee\u60f3\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u300d\u3092\u9078\u629e\u3057\u3066\u300cVPC\u306b\u30a2\u30bf\u30c3\u30c1\u300d\u3057\u307e\u3059\u3002\n![idcf-vpn_3_01.png](https://qiita-image-store.s3.amazonaws.com/0/82090/b5a6bb85-ec13-83bb-ba6a-0f0decd0af5d.png)\n\n\n\u30fb\u30a2\u30bf\u30c3\u30c1\u3057\u305f\u3044\u300cVPC\u300d\u3092\u9078\u3093\u3067\u300c\u30a2\u30bf\u30c3\u30c1\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![idcf-vpn_3_02.png](https://qiita-image-store.s3.amazonaws.com/0/82090/f5d48024-7396-4036-9c8b-50bf6bddbf69.png)\n\n\n# \u304a\u308f\u308a\u306b\n\u3053\u308c\u3067AWS\u5074\u306eVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\u3042\u3068\u306f\u4e21\u65b9\u3067\u4f5c\u6210\u3057\u305fVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u7e4b\u3052\u308b\u8a2d\u5b9a\u3092\u3057\u3066\u3042\u3052\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u6b21\u56de\u306fIDCF\u5074\u3067\u4f5c\u6210\u3057\u305fVPN\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306b\u7e4b\u3052\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n[>> \u6b21\u56de\uff1a\u7b2c\uff13\u56de AWS\u3068IDCF\u3092VPN\u63a5\u7d9a\u3059\u308b - VPN\u63a5\u7d9a\u7de8\uff08\u5168\uff14\u56de\uff09](http://qiita.com/kooohei/items/f16dcb9e7280b29deee7)\n", "tags": ["IDCF\u30af\u30e9\u30a6\u30c9", "AWS", "vpc", "VPN", "VyOS"]}