{"context": " More than 1 year has passed since last update.\u300eErlang\u30b3\u30fc\u30c9\u6700\u9069\u5316\u30e1\u30e2: JSON\u30c7\u30b3\u30fc\u30c9\u51e6\u7406(1): \u307e\u305a\u57fa\u672c\u5f62\u300f\u306e\u7d9a\u304d\u3002\n\u4eca\u56de\u306f\u3001\u524d\u56de\u5b9f\u88c5\u3057\u305fjson_decode_1.erl\u3092\u3001HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5834\u5408\u306e\u7d50\u679c\u3092\u66f8\u3044\u3066\u304a\u304f\u3002\n\nHiPE\nHigh Performance Erlang\u306e\u7565\u3002\nHiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3046\u3068\u3001Erlang\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092(VM\u306e\u30b3\u30fc\u30c9\u3067\u306f\u306a\u304f)\u30cd\u30a4\u30c6\u30a3\u30d6\u30b3\u30fc\u30c9\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304f\u308c\u308b\u3089\u3057\u3044\u3002\n\u7d4c\u9a13\u7684\u306b\u306f\u3001\u30d0\u30a4\u30ca\u30ea\u51e6\u7406\u304c\u4e2d\u5fc3\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3084\u30c7\u30fc\u30bf\u69cb\u9020(ex. \u30cf\u30c3\u30b7\u30e5\u30c4\u30ea\u30fc)\u3092\u5b9f\u88c5\u3057\u305f\u5834\u5408\u3001HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\u3060\u3044\u305f\u30443\uff5e4\u5272\u7a0b\u5ea6\u9ad8\u901f\u5316\u3059\u308b\u5370\u8c61\u304c\u3042\u308b\u3002\nHiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3046\u306b\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308c\u3070\u826f\u3044\u3002\n$ erl\nErlang R16B03-1 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10] [hipe]\nEshell V5.10.4  (abort with ^G)\n\n%% native\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3001\u6307\u5b9a\u3059\u308b\u3068HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u4f7f\u308f\u308c\u308b\n> c(hoge, [native]).\n{ok, hoge}.\n\n%% hipe:help/0 \u3067\u30d8\u30eb\u30d7\u304c\u8868\u793a\u3067\u304d\u308b\n> hipe:help().\nThe HiPE Compiler (Version 3.10.2.2)\n\n The normal way to native-compile Erlang code using HiPE is to\n include `native' in the Erlang compiler options, as in:\n     1> c(my_module, [native]).\n Options to the HiPE compiler must then be passed as follows:\n     1> c(my_module, [native,{hipe,Options}]).\n Use `help_options()' for details.\n\n Utility functions:\n   help()\n     Prints this message.\n   help_options()\n     Prints a description of options recognized by the\n     HiPE compiler.\n   help_option(Option)\n     Prints a description of that option.\n   help_debug_options()\n     Prints a description of debug options.\n   version() ->\n     Returns the HiPE version as a string'.\n\n For HiPE developers only:\n  Use `help_hiper()' for information about HiPE's low-level interface\nok\n\n%% \u6700\u9069\u5316\u30ec\u30d9\u30eb\u304c\u9078\u3079\u305f\u308a\u3082\u3059\u308b (o3\u304c\u6700\u9ad8, \u30c7\u30d5\u30a9\u30eb\u30c8\u306fo2)\n> c(hoge, [native, {hipe, [o3]}]).\n{ok, hoge}.\n\n\n\u8a08\u6642\n\u4ee5\u4e0b\u306e\u8868\u306f\u3001\u524d\u56de\u306e\u8a08\u6642\u7d50\u679c\u306b\u3001HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3063\u305f\u5834\u5408\u306e\u51e6\u7406\u6642\u9593\u3092\u8ffd\u52a0\u3057\u305f\u3082\u306e\u3002\n\n\n\n\u5e73\u5747\u51e6\u7406\u6642\u9593\n1x.json\n3x.json\n9x.json\n27x.json\n81x.json\n243x.json\n\n\n\n\njson_decode_1:decode/1\n49\u03bcs\n153\u03bcs\n412\u03bcs\n1163\u03bcs\n4089\u03bcs\n11780\u03bcs\n\n\njson_decode_1:decode/1(hipe)\n24\u03bcs\n68\u03bcs\n236\u03bcs\n750\u03bcs\n2158\u03bcs\n6221\u03bcs\n\n\n\njson_decode_1.erl\u306e\u5834\u5408\u306f\u3001HiPE\u306e\u52b9\u679c\u304c\u5927\u304d\u304f\u3001native\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u305f\u3060\u3051\u3067\u3001\u51e6\u7406\u6642\u9593\u304c\u534a\u5206\u7a0b\u5ea6\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u305f\u3060\u3057HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3046\u3068\u3001\u30a8\u30e9\u30fc\u88dc\u8db3\u6642\u306e\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304b\u3089\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u95a2\u6570\u306e\u5f15\u6570\u306e\u60c5\u5831\u3084\u884c\u756a\u53f7\u304c\u6d88\u3048\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3001\u30c7\u30d0\u30c3\u30b0\u304c\u4e00\u6c17\u306b\u96e3\u3057\u304f\u306a\u308b\u306e\u304c\u56f0\u308a\u3082\u306e\u3002(R16B03\u6642\u70b9)\n%% HiPE\u7121\u3057\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5834\u5408\n> json_decode_1:decode(<<\"[1,2,]\">>). % \u4e0d\u6b63\u306aJSON\u3092\u6e21\u3059\n** exception error: bad argument\n     in function  json_decode_1:value/1\n        called as json_decode_1:value(<<\"]\">>) % \u5f15\u6570\u60c5\u5831\u304c\u3064\u304f\n     in call from json_decode_1:array/2 (json_decode_1.erl, line 44) % \u884c\u756a\u53f7\u3082\u3064\u304f\n     in call from json_decode_1:decode/1 (json_decode_1.erl, line 18)\n\n%% HiPE\u6709\u308a\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5834\u5408\n> json_decode_1:decode(<<\"[1,2,]\">>).\n** exception error: bad argument\n     in function  json_decode_1_hipe:value/1  % \u95a2\u6570\u540d\u306e\u307f\n     in call from json_decode_1_hipe:array/2\n     in call from json_decode_1_hipe:decode/1\n     in call from lists:reverse/1             % \u4f55\u6545\u304b\u7d4c\u7531\u3057\u3066\u3044\u306a\u3044\u306f\u305a\u306e\u95a2\u6570\u304c\u542b\u307e\u308c\u3066\u3044\u308b\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\u306f\u4e00\u5207\u884c\u3063\u3066\u3044\u306a\u3044\u304c\u3001\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u3002\n\u3068\u308a\u3042\u3048\u305aJSON\u30c7\u30b3\u30fc\u30c9\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001HiPE\u304c\u7d50\u69cb\u6709\u52b9\u306a\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u3002\n\n\u88dc\u8db3\n\u8a08\u6e2c\u74b0\u5883:\n\nCPU:  Intel(R) Core(TM) i7-4600U CPU @ 2.10GHz (VMware\u4e0a\u3067\u4e8c\u30b3\u30a2)\nOS: Scientific Linux release 6.5 (Carbon)\nErlang: R16B03-1 (erts-5.10.4)\n\n[\u300eErlang\u30b3\u30fc\u30c9\u6700\u9069\u5316\u30e1\u30e2: JSON\u30c7\u30b3\u30fc\u30c9\u51e6\u7406(1): \u307e\u305a\u57fa\u672c\u5f62\u300f](http://qiita.com/sile/items/6df1400ce45f870b4b03)\u306e\u7d9a\u304d\u3002\n\n\u4eca\u56de\u306f\u3001\u524d\u56de\u5b9f\u88c5\u3057\u305f[json_decode_1.erl](https://gist.github.com/sile/fa3c77155d61c97205e1)\u3092\u3001HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5834\u5408\u306e\u7d50\u679c\u3092\u66f8\u3044\u3066\u304a\u304f\u3002\n\nHiPE\n====\n**High Performance Erlang**\u306e\u7565\u3002\nHiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3046\u3068\u3001Erlang\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092(VM\u306e\u30b3\u30fc\u30c9\u3067\u306f\u306a\u304f)\u30cd\u30a4\u30c6\u30a3\u30d6\u30b3\u30fc\u30c9\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304f\u308c\u308b\u3089\u3057\u3044\u3002\n\u7d4c\u9a13\u7684\u306b\u306f\u3001\u30d0\u30a4\u30ca\u30ea\u51e6\u7406\u304c\u4e2d\u5fc3\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3084\u30c7\u30fc\u30bf\u69cb\u9020(ex. \u30cf\u30c3\u30b7\u30e5\u30c4\u30ea\u30fc)\u3092\u5b9f\u88c5\u3057\u305f\u5834\u5408\u3001HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\u3060\u3044\u305f\u30443\uff5e4\u5272\u7a0b\u5ea6\u9ad8\u901f\u5316\u3059\u308b\u5370\u8c61\u304c\u3042\u308b\u3002\n\n\nHiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3046\u306b\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308c\u3070\u826f\u3044\u3002\n\n```erlang\n$ erl\nErlang R16B03-1 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10] [hipe]\nEshell V5.10.4  (abort with ^G)\n\n%% native\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3001\u6307\u5b9a\u3059\u308b\u3068HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u4f7f\u308f\u308c\u308b\n> c(hoge, [native]).\n{ok, hoge}.\n\n%% hipe:help/0 \u3067\u30d8\u30eb\u30d7\u304c\u8868\u793a\u3067\u304d\u308b\n> hipe:help().\nThe HiPE Compiler (Version 3.10.2.2)\n\n The normal way to native-compile Erlang code using HiPE is to\n include `native' in the Erlang compiler options, as in:\n     1> c(my_module, [native]).\n Options to the HiPE compiler must then be passed as follows:\n     1> c(my_module, [native,{hipe,Options}]).\n Use `help_options()' for details.\n\n Utility functions:\n   help()\n     Prints this message.\n   help_options()\n     Prints a description of options recognized by the\n     HiPE compiler.\n   help_option(Option)\n     Prints a description of that option.\n   help_debug_options()\n     Prints a description of debug options.\n   version() ->\n     Returns the HiPE version as a string'.\n\n For HiPE developers only:\n  Use `help_hiper()' for information about HiPE's low-level interface\nok\n\n%% \u6700\u9069\u5316\u30ec\u30d9\u30eb\u304c\u9078\u3079\u305f\u308a\u3082\u3059\u308b (o3\u304c\u6700\u9ad8, \u30c7\u30d5\u30a9\u30eb\u30c8\u306fo2)\n> c(hoge, [native, {hipe, [o3]}]).\n{ok, hoge}.\n```\n\n\u8a08\u6642\n====\n\n\u4ee5\u4e0b\u306e\u8868\u306f\u3001\u524d\u56de\u306e\u8a08\u6642\u7d50\u679c\u306b\u3001HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3063\u305f\u5834\u5408\u306e\u51e6\u7406\u6642\u9593\u3092\u8ffd\u52a0\u3057\u305f\u3082\u306e\u3002\n\n| \u5e73\u5747\u51e6\u7406\u6642\u9593                   | 1x.json | 3x.json | 9x.json | 27x.json | 81x.json | 243x.json |\n|------------------------------|--------:|--------:|--------:|---------:|---------:|----------:|\n| json_decode_1:decode/1       |    49\u03bcs |   153\u03bcs |   412\u03bcs |   1163\u03bcs |   4089\u03bcs |   11780\u03bcs |\n| json_decode_1:decode/1(hipe) |    24\u03bcs |    68\u03bcs |   236\u03bcs |    750\u03bcs |   2158\u03bcs |   6221\u03bcs |\n\n[json_decode_1.erl](https://gist.github.com/sile/fa3c77155d61c97205e1)\u306e\u5834\u5408\u306f\u3001HiPE\u306e\u52b9\u679c\u304c\u5927\u304d\u304f\u3001native\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u305f\u3060\u3051\u3067\u3001\u51e6\u7406\u6642\u9593\u304c\u534a\u5206\u7a0b\u5ea6\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u305f\u3060\u3057HiPE\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u4f7f\u3046\u3068\u3001\u30a8\u30e9\u30fc\u88dc\u8db3\u6642\u306e\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304b\u3089\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u95a2\u6570\u306e\u5f15\u6570\u306e\u60c5\u5831\u3084\u884c\u756a\u53f7\u304c\u6d88\u3048\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3001\u30c7\u30d0\u30c3\u30b0\u304c\u4e00\u6c17\u306b\u96e3\u3057\u304f\u306a\u308b\u306e\u304c\u56f0\u308a\u3082\u306e\u3002(R16B03\u6642\u70b9)\n\n```erlang\n%% HiPE\u7121\u3057\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5834\u5408\n> json_decode_1:decode(<<\"[1,2,]\">>). % \u4e0d\u6b63\u306aJSON\u3092\u6e21\u3059\n** exception error: bad argument\n     in function  json_decode_1:value/1\n        called as json_decode_1:value(<<\"]\">>) % \u5f15\u6570\u60c5\u5831\u304c\u3064\u304f\n     in call from json_decode_1:array/2 (json_decode_1.erl, line 44) % \u884c\u756a\u53f7\u3082\u3064\u304f\n     in call from json_decode_1:decode/1 (json_decode_1.erl, line 18)\n\n%% HiPE\u6709\u308a\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5834\u5408\n> json_decode_1:decode(<<\"[1,2,]\">>).\n** exception error: bad argument\n     in function  json_decode_1_hipe:value/1  % \u95a2\u6570\u540d\u306e\u307f\n     in call from json_decode_1_hipe:array/2\n     in call from json_decode_1_hipe:decode/1\n     in call from lists:reverse/1             % \u4f55\u6545\u304b\u7d4c\u7531\u3057\u3066\u3044\u306a\u3044\u306f\u305a\u306e\u95a2\u6570\u304c\u542b\u307e\u308c\u3066\u3044\u308b\n```\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\u306f\u4e00\u5207\u884c\u3063\u3066\u3044\u306a\u3044\u304c\u3001\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u3002\n\u3068\u308a\u3042\u3048\u305aJSON\u30c7\u30b3\u30fc\u30c9\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001HiPE\u304c\u7d50\u69cb\u6709\u52b9\u306a\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u3002\n\n\u88dc\u8db3\n====\n\u8a08\u6e2c\u74b0\u5883:\n\n- CPU:  Intel(R) Core(TM) i7-4600U CPU @ 2.10GHz (VMware\u4e0a\u3067\u4e8c\u30b3\u30a2)\n- OS: Scientific Linux release 6.5 (Carbon)\n- Erlang: R16B03-1 (erts-5.10.4)\n", "tags": ["Erlang"]}