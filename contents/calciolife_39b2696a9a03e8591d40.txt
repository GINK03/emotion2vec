{"tags": ["Android", "android\u958b\u767a", "AndroidSDK"], "context": " More than 1 year has passed since last update.Android 5.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u3092\u884c\u3046\u969b\u306b\u3001\u6539\u3081\u3066 Android \u30a2\u30d7\u30ea\u306e\u57fa\u672c\u3067\u3042\u308b Activity \u306b\u3064\u3044\u3066\u518d\u78ba\u8a8d\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u8abf\u67fb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6a19\u6e96\u7684\u306a\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\nAndroid Developers \u3067\u306f Activity Lifecycle \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u56f3\u3067\u306f\u57fa\u672c\u7684\u306a Activity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u793a\u3057\u3001\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u304c\u5909\u5316\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u547c\u3073\u51fa\u3055\u308c\u308b Activity \u306e\u30e1\u30bd\u30c3\u30c9\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\u305f\u3060\u6700\u65b0\u306e Android 5.0 (API Level:21) \u3067\u793a\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u898b\u3066\u3044\u304f\u3068\u3001\u56f3\u306e\u4e2d\u3067\u7701\u7565\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\nActivity \u306e launchMode \u306a\u3069\u72b6\u614b\u9077\u79fb\u3092\u5909\u5316\u3055\u305b\u308b\u5c5e\u6027\u3092\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u304b\u3089\u3001\u5b9f\u969b\u306b\u52d5\u4f5c\u78ba\u8a8d\u3057\u306a\u304c\u3089\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u5185\u5bb9\u3092\u6574\u7406\u30fb\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nLaunchMode = Default \u306e\u5834\u5408\nActivity \u306e\u6a19\u6e96\u7684\u306a\u52d5\u4f5c\u3067 AndroidManifest \u3067 launchMode \u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3082\u8a72\u5f53\u3057\u307e\u3059\u3002\n\nActivity \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\n\u307e\u305a\u6a19\u6e96\u306e\u56f3\u3067\u793a\u3055\u308c\u308b Activity launched \u304b\u3089 Activity running \u306b\u9077\u79fb\u3059\u308b\u5834\u5408\u306b\u547c\u3070\u308c\u308b\u30b1\u30fc\u30b9\u3067\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u6a19\u6e96\u306e\u56f3\u3067\u306f\u7701\u7565\u3055\u308c\u3066\u3044\u308b Activity#onCreate() \u3068 Activity#onResume()\u306e\u3042\u3068\u306b Activity#onPostCreate() \u3084 Activity#onPostResume() \u306e\u547c\u3073\u51fa\u3057\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\u666e\u6bb5\u306f\u5229\u7528\u3059\u308b\u3053\u3068\u306f\u5c11\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u304c SDK \u306b\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u306e\u3044\u304f\u3064\u304b\u3067\u306f\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\u3069\u3061\u3089\u3082 API Level 1 \u306a\u306e\u3067 API Level \u306b\u3088\u3063\u3066\u51e6\u7406\u306e\u6709\u7121\u304c\u5909\u5316\u3059\u308b\u306a\u3069\u306e\u554f\u984c\u306f\u7f6e\u304d\u307e\u305b\u3093\u304c API Level 1 \u3067\u3042\u308b\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u3042\u307e\u308a\u77e5\u3089\u308c\u3066\u3044\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\nActivity \u304c\u4e00\u6642\u505c\u6b62\u30fb\u505c\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u307e\u3067\nActivity running \u304b\u3089 Activity shut down \u307e\u3067\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u6574\u7406\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u306e\u4e2d\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3064\u3044\u3066\u306f\u30e1\u30bd\u30c3\u30c9\u306e\u8aac\u660e\u306b\u306f\u4e00\u5207\u7121\u3044\u30e2\u30ce\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u4ee5\u4e0b\u306e\u60c5\u5831\u306f Nexus 6 \u3067\u306e\u52d5\u4f5c\u691c\u8a3c\u3092\u5143\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5c11\u3057\u308f\u304b\u308a\u306b\u304f\u3067\u3059\u304c Activity running \u306e\u72b6\u614b\u3067Activity#onWindowFocusChange()\u304c\u767a\u751f\u3059\u308b\u3068\u3001\u3059\u3050\u306b Activity#onUserLeaveHint() \u3068 Activity#onSaveInstanceState\u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\nLinkBubble \u3084 Facebook Messenger \u306e ChatHead \u306b\u4ee3\u8868\u3055\u308c\u308b\u7279\u5b9a\u306e Activity \u3092\u6301\u305f\u305a WindowManager \u3078\u76f4\u63a5 View \u3092\u8ffd\u52a0\u3057\u3066\u30b9\u30af\u30ea\u30fc\u30f3\u5185\u306b\u5e38\u99d0\u3059\u308b\u3088\u3046\u5225\u30bf\u30b9\u30af\u306e View \u304c\u30d5\u30a9\u30fc\u30ab\u30b9\u3092\u5f97\u305f\u5834\u5408\u3082 Activity#onWindowFocusChange() \u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u901a\u77e5\u30d0\u30fc\u3092\u4e0b\u306b\u5f15\u304d\u51fa\u3057\u305f\u5834\u5408\u3082\u540c\u3058\u3088\u3046\u306b\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u304c\u9077\u79fb\u3057\u307e\u3059\u3002\n\u7279\u5fb4\u7684\u306a\u306e\u306f Activity#onCreateThumbnail()\u306e\u3088\u3046\u306b\u3001\u7528\u9014\u306f\u308f\u304b\u308b\u3093\u3060\u3051\u3069\u5b9f\u969b\u306b\u3044\u3064\u547c\u3073\u51fa\u3055\u308c\u308b\u306e\u304b\u660e\u8a18\u3055\u308c\u3066\u3044\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u3082\u3001\u304d\u3061\u3093\u3068 Activity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u3067\u547c\u3073\u3060\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\n\u5168\u4f53\n\u57fa\u672c\u7684\u306a\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3060\u3051\u3067\u3082\u3001\u5b9f\u969b\u306b Activity \u306e Launched \u304b\u3089 shut down \u307e\u3067\u306e\u9593\u306b\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u306f\u968f\u5206\u591a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u4ed6\u306b\u3082\u3001\u3044\u304f\u3064\u304b\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u8abf\u67fb\u306e\u6642\u9593\u304c\u306a\u304f\u5272\u611b\u3057\u3066\u304a\u308a\u307e\u3059\u304c\u8abf\u67fb\u304c\u3067\u304d\u6b21\u7b2c\u8ffd\u8a18\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\nLaunchMode = singleTop \u306e\u5834\u5408\nsingleTop \u3084 singleInstance \u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u9077\u79fb\u3057\u3066\u304b\u3089\u3001\u518d\u3073\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u9077\u79fb\u3059\u308b\u969b\u306e\u72b6\u614b\u9077\u79fb\u3092\u5236\u5fa1\u3059\u308b\u305f\u3081\u306b\u5229\u7528\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nActivity \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\n\u3053\u3053\u3067\u521d\u3081\u3066 Activity#onNewIntent() \u304c\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u306b\u767b\u5834\u3057\u307e\u3059\u3002\u30db\u30fc\u30e0\u30a2\u30d7\u30ea\u3092\u4f8b\u306b\u53d6\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30db\u30fc\u30e0\u30dc\u30bf\u30f3\u3092\u304a\u3057\u305f\u6642\u306e Action \u306b\u5bfe\u3057\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u52d5\u4f5c\u306b\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u30d0\u30c3\u30af\u30b0\u30e9\u30f3\u30c9\u306b\u9077\u79fb\u3057\u305f\u3042\u3068\u306b\u3001\u30db\u30fc\u30e0\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068 Activity#onNewIntent() \u3092\u7d4c\u7531\u3057\u3066\u304b\u3089 Activity#onStart() \u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\n\u56f3\u304c\u898b\u304d\u308c\u3066\u3057\u307e\u3046\u306e\u306f\u3001\u56f3\u3092\u66f8\u3044\u305f\u30c4\u30fc\u30eb\u306e\u90fd\u5408\u3067\u3059\u3002\n\nActivity \u304c\u4e00\u6642\u505c\u6b62\u30fb\u505c\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u307e\u3067\n\u969b\u7acb\u3063\u3066\u7279\u5fb4\u7684\u306a\u52d5\u4f5c\u306f\u306a\u3044\u3082\u306e\u306e Activity#onRestoreInstanceState() \u306b\u5bfe\u5fdc\u3059\u308b Activity#onSaveInstanceState() \u304c Activity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306b\u52a0\u308f\u308a\u307e\u3059\u3002\n\n\u5168\u4f53\n\nActivity \u304c\u521d\u3081\u3066\u8d77\u52d5\u3059\u308b\u969b\u306b\u306f\u5927\u304d\u306a\u5909\u5316\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u505c\u6b62\u72b6\u614b\u3067\u3042\u308bActivity#onStop()\u304b\u3089\u5fa9\u5e30\u3057\u3066 Activity running \u307e\u3067\u306b\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u306f\u5897\u52a0\u3057\u3066\u3044\u308b\u306e\u3068 Activity \u304c\u5fa9\u5e30\u6642\u306b\u6e21\u3055\u308c\u308b Intent \u304c Activity#setIntent() \u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3082 Activity#onNewIntent() \u3067\u53d6\u5f97\u3059\u308b\u306a\u3069\u51e6\u7406\u306e\u6d41\u308c\u3082\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\npersistableMode = persistAcrossReboots \u306e\u5834\u5408\n\u3053\u3053\u3067\u5229\u7528\u3059\u308b persistableMode \u306f Android 5.0(API Level 21) \u304b\u3089\u8ffd\u52a0\u3055\u308c\u305f\u65b0\u305f\u306a\u5c5e\u6027\u3067 Activity \u306e\u6c38\u7d9a\u5316\u306b\u95a2\u9023\u3059\u308b\u8a2d\u5b9a\u3092\u793a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f Activity \u306e\u60c5\u5831\u3092persistAcrossReboots \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u6700\u8fd1\u4f7f\u3063\u305f\u753b\u9762(Recent Screen)\u304b\u3089\u30bf\u30b9\u30af\u304c\u5fa9\u5e30\u3057\u305f\u969b\u306b\u51e6\u7406\u3092\u7d99\u7d9a\u3055\u305b\u308b\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\nActivity \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\n\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u3067\u660e\u78ba\u306b\u5909\u308f\u308b\u306e\u306f\u3001\u6c38\u7d9a\u5316\u306e\u305f\u3081\u30c7\u30fc\u30bf\u3092\u5f15\u304d\u7d99\u3050\u305f\u3081\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u3044\u304f\u3064\u304b\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u306b\u767b\u5834\u3059\u308b\u3053\u3068\u3067\u3059\u3002\n\n\u5f15\u6570\u306b Bundle \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u306b\u306f\u3001\u901a\u5e38\u306e Bundle \u306e\u307f\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u76f4\u5f8c\u306b PersistableBundle \u3092\u5f15\u6570\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u306b\u52d5\u4f5c\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u8d77\u52d5\u51e6\u7406\u306e\u5b9a\u756a\u3067\u3042\u308b Activity#onCreate() \u306f\nActivity#onCreate(android.os.Bundle) \u3068\nActivity#onCreate(Bundle savedInstanceState, PersistableBundle persistentState)\n\u306e\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u5f93\u6765\u306e\u5b9f\u88c5\u3092\u5909\u3048\u308b\u3053\u3068\u306a\u304f\u3001\u65b0\u305f\u306b\u8ffd\u52a0\u3055\u308c\u305f PersistableBundle \u306e\u3042\u308b\u30e1\u30bd\u30c3\u30c9\u5074\u306b\u6c38\u7d9a\u5316\u306b\u305f\u3081\u306b\u5fc5\u8981\u306a\u51e6\u7406\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u5927\u304d\u306a\u5909\u66f4\u3092\u884c\u308f\u305a\u3068\u3082\u6c38\u7d9a\u5316\u306a\u3069\u306e\u65b0\u305f\u306a\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306b\u3082\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e PersistableBundle \u3092\u5f15\u6570\u306b\u6301\u3064\u30e1\u30bd\u30c3\u30c9\u306f\u5168\u3066 API Level 21 \u306b\u306a\u308a\u307e\u3059\u3002\n\nActivity \u304c\u4e00\u6642\u505c\u6b62\u30fb\u505c\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u307e\u3067\n\u7d42\u4e86\u6642\u306e\u30b1\u30fc\u30b9\u3067\u306fActivity#onSaveInstanceState(Bundle outState)\u304c\u6c38\u7d9a\u5316\u7528\u306e PersistableBundle \u3092\u5f15\u6570\u306b\u6301\u3064 Activity#onSaveInstanceState(Bundle outState, PersistableBundle outPersistentState)\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n\u5168\u4f53\n\u56f3\u304c...\u304b\u306a\u308a\u5206\u304b\u308a\u306b\u304f\u3044\u3067\u3059\u306d\u3002\n\n\u7279\u5fb4\u3068\u3057\u3066\u306f\u3001\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u304c\u57fa\u672c\u7684\u306a\u3082\u306e\u306b\u6bd4\u3079\u3066\u3082 Activity Launched \u304b\u3089 Activity running \u307e\u3067\u306e\u8d77\u52d5\u51e6\u7406\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306f override \u3057\u3066\u3044\u306a\u3044\u72b6\u614b\u3067\u3082\u591a\u304f\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u7d4c\u7531\u3057\u3066\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u304c\u5909\u5316\u3057\u3066\u3044\u308b\u4e8b\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u540c\u6642\u306b\u3001\u7d4c\u7531\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u591a\u3044\u305f\u3081\u8d77\u52d5\u51e6\u7406\u3067\u30b7\u30d3\u30a2\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u8abf\u6574\u3092\u3057\u3066\u3044\u308b\u3068\u601d\u308f\u306c\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3053\u3068\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nAPI \u4ed5\u69d8\u304b\u3089\u898b\u308b Activity \u306e\u6a5f\u80fd\u5909\u9077\nAPI Level 21 \u306e\u4ed5\u69d8\u304b\u3089 Activity \u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b API \u306e\u72b6\u6cc1\u3092\u8abf\u67fb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u73fe\u5728\u306e Activity \u306e\u30e1\u30bd\u30c3\u30c9\u306e\u591a\u304f\u306f API Level 1 \u304b\u3089\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u3001Activity \u81ea\u4f53\u306e\u30e9\u30a4\u30d5\u30b5\u30af\u30eb\u306b\u5927\u304d\u304f\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u5909\u66f4\u304c\u3042\u3063\u305f API Level \u3067\u306f\u591a\u304f\u306e\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u73fe\u5728\u307e\u3067\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u305d\u3053\u304b\u3089\u591a\u304f\u306e API \u304c\u8ffd\u52a0\u3055\u308c\u305f API Level \u306e\u7279\u5fb4\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\nHoneycomb(API Level:11/Android 3.0)\n\n\nJelly Bean(API Level:16/Android 4.1)\n\n\nLollipop(API Level:21/Android 5.0)\n\nLollipop \u3067\u306e\u7279\u5fb4\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nRecent Screen\nKitkat \u307e\u3067\u306e\u5c65\u6b74\u753b\u9762\u306f\u300c1\u30a2\u30d7\u30ea\u306b1\u3064\u300d\u3068\u3044\u3046\u30eb\u30fc\u30eb\u3067\u5c65\u6b74\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nLollipop \u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001\u8907\u6570\u306e\u753b\u9762\u3092\u5c65\u6b74\u306b\u767b\u9332\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u308c\u306f Activity \u306e\u6c38\u7d9a\u5316\u3067\u3042\u308b Persistable \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u7d99\u7d9a\u7684\u306a\u52d5\u4f5c\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u306a\u3044\u306e\u3067\u524d\u8ff0\u3067\u306f\u8aac\u660e\u3057\u3066\u304a\u308a\u307e\u305b\u3093\u304c\u3001Activity#setTaskDescription()\u3067 Activity \u306e\u30a2\u30a4\u30b3\u30f3\u3084\u30e9\u30d9\u30eb\u306a\u3069\u8996\u899a\u7684\u306a\u60c5\u5831\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nScreen Pinning\nLollipop \u304b\u3089 UI/UX\u306b\u5927\u304d\u304f\u5f71\u97ff\u3092\u3042\u305f\u3048\u308b\u306e\u304c\u30b9\u30af\u30ea\u30fc\u30f3\u306e\u56fa\u5b9a(Pin)\u3067\u3059\u3002\nPin \u3055\u308c\u305f\u30b9\u30af\u30ea\u30fc\u30f3\u306f\u4e00\u6642\u7684\u306b\u30bf\u30b9\u30af\u306e\u5207\u308a\u66ff\u3048\u3084 Notification \u304b\u3089\u306e\u9077\u79fb\u3092\u906e\u65ad\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u7528\u9014\u3084\u76ee\u7684\u304c\u660e\u78ba\u306a\u30c7\u30d0\u30a4\u30b9\u306a\u3069\u3067\u5229\u7528\u3055\u308c\u308b\uff08\u6559\u80b2\u5411\u3051\u3068\u304b\u30ad\u30aa\u30b9\u30af\uff09\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u3067\u306e\u7528\u9014\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\nPin \u3092\u5229\u7528\u3059\u308b\u306b\u306f\u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u5b9a\u304b\u3089\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304b\u3089\u5f53\u8a72\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nPin \u3055\u308c\u305f\u30b9\u30af\u30ea\u30fc\u30f3\u3067\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u7279\u5fb4\u3092\u6301\u3061\u307e\u3059\u3002\n+ \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306f\u30d6\u30e9\u30f3\u30af\uff08\u7a7a\u3063\u307d\uff09\u306b\u306a\u308a\u307e\u3059\u3002\n+ Notification \u306f\u975e\u8868\u793a\u306a\u308a\u307e\u3059\u3002\n+ \u30db\u30fc\u30e0\u30dc\u30bf\u30f3\u3084\u5c65\u6b74\u30dc\u30bf\u30f3\u306f\u975e\u5e38\u6642\u306b\u306a\u308a\u307e\u3059\u3002\n+ \u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u65b0\u305f\u306a Activity \u3092\u8d77\u52d5\u3067\u304d\u307e\u305b\u3093\u3002\n+ \u65b0\u3057\u3044\u30bf\u30b9\u30af\u3092\u4f5c\u3089\u306a\u3051\u308c\u3070\u30ab\u30ec\u30f3\u30c8\u306b\u3042\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u65b0\u3057\u3044 Activity \u3092\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002\n+ \u30b9\u30af\u30ea\u30fc\u30f3\u306ePin\u304c\u30c7\u30d0\u30a4\u30b9\u306e\u30aa\u30fc\u30ca\u30fc\u6a29\u9650\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u30a2\u30d7\u30ea\u304cActivity#stopLockTask()\u3092\u547c\u3076\u307e\u3067\u30b9\u30af\u30ea\u30fc\u30f3\u306f Pin \u306e\u72b6\u614b\u3092\u7dad\u6301\u3057\u307e\u3059\u3002\n\u623b\u308b\u30dc\u30bf\u30f3\u3068\u5c65\u6b74\u30dc\u30bf\u30f3\u3092\u9577\u62bc\u3057\u3059\u308b\u3053\u3068\u3067\u3082\u30b9\u30af\u30ea\u30fc\u30f3\u306e Pin \u3092\u89e3\u9664\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u304c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u3088\u3063\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001Pin \u306e\u89e3\u9664\u3092\u884c\u3046\u305f\u3081\u306b\u30ed\u30c3\u30af\u30b9\u30af\u30ea\u30fc\u30f3\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u753b\u9762\u306b\u9077\u79fb\u3057\u3066\u8a8d\u8a3c\u3092\u8981\u6c42\u3057\u307e\u3059\u3002\n\n\u96d1\u611f\nAndroid 5.0 \u3067\u306f\u3001\u65b0\u3057\u3044\u753b\u9762\u306e\u72b6\u614b\u304c\u52a0\u308f\u308a\u7279\u6b8a\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30cf\u30c3\u30af\u7684\u306a\u3053\u3068\u3092\u3059\u308b\u3053\u3068\u3082\u306a\u304f\u5b9f\u88c5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3067\u306f Dialog \u3084 Fragment \u306e\u3088\u3046\u306a Activity \u3068\u9023\u52d5\u3057\u306a\u304c\u3089\u3082\u72ec\u81ea\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u6301\u3064\u6a5f\u80fd\u304c\u5897\u3048\u3066\u304d\u3066\u3001\u57fa\u672c\u7684\u306a\u90e8\u5206\u3084\u57fa\u790e\u7684\u306a\u4ed5\u69d8\u306e\u7406\u89e3\u304c\u91cd\u8981\u6027\u3092\u5897\u3057\u3066\u3044\u308b\u611f\u3058\u304c\u3057\u3066\u3044\u307e\u3059\u3002\nAndroid 5.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u3092\u884c\u3046\u969b\u306b\u3001\u6539\u3081\u3066 Android \u30a2\u30d7\u30ea\u306e\u57fa\u672c\u3067\u3042\u308b Activity \u306b\u3064\u3044\u3066\u518d\u78ba\u8a8d\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u8abf\u67fb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u6a19\u6e96\u7684\u306a\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\nAndroid Developers \u3067\u306f [Activity Lifecycle] (http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle) \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n![Activity Lifecycle](http://developer.android.com/images/activity_lifecycle.png \"Activity Lifecycle\")\n\n\u3053\u306e\u56f3\u3067\u306f\u57fa\u672c\u7684\u306a Activity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u793a\u3057\u3001\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u304c\u5909\u5316\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u547c\u3073\u51fa\u3055\u308c\u308b Activity \u306e\u30e1\u30bd\u30c3\u30c9\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\u305f\u3060\u6700\u65b0\u306e Android 5.0 (API Level:21) \u3067\u793a\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u898b\u3066\u3044\u304f\u3068\u3001\u56f3\u306e\u4e2d\u3067\u7701\u7565\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\nActivity \u306e launchMode \u306a\u3069\u72b6\u614b\u9077\u79fb\u3092\u5909\u5316\u3055\u305b\u308b\u5c5e\u6027\u3092\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u304b\u3089\u3001\u5b9f\u969b\u306b\u52d5\u4f5c\u78ba\u8a8d\u3057\u306a\u304c\u3089\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u5185\u5bb9\u3092\u6574\u7406\u30fb\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n## LaunchMode = Default \u306e\u5834\u5408\n\nActivity \u306e\u6a19\u6e96\u7684\u306a\u52d5\u4f5c\u3067 AndroidManifest \u3067 launchMode \u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3082\u8a72\u5f53\u3057\u307e\u3059\u3002\n\n### Activity \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\n\u307e\u305a\u6a19\u6e96\u306e\u56f3\u3067\u793a\u3055\u308c\u308b Activity launched \u304b\u3089 Activity running \u306b\u9077\u79fb\u3059\u308b\u5834\u5408\u306b\u547c\u3070\u308c\u308b\u30b1\u30fc\u30b9\u3067\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![ActivityLifecycle.005.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/6a9510a8-60ae-be74-7b92-ddc229a66336.jpeg)\n\n\u6a19\u6e96\u306e\u56f3\u3067\u306f\u7701\u7565\u3055\u308c\u3066\u3044\u308b [Activity#onCreate()](http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle)) \u3068 [Activity#onResume()](http://developer.android.com/reference/android/app/Activity.html#onResume())\u306e\u3042\u3068\u306b [Activity#onPostCreate()](http://developer.android.com/reference/android/app/Activity.html#onPostCreate(android.os.Bundle)) \u3084 [Activity#onPostResume()](http://developer.android.com/reference/android/app/Activity.html#onPostResume()) \u306e\u547c\u3073\u51fa\u3057\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\n\u666e\u6bb5\u306f\u5229\u7528\u3059\u308b\u3053\u3068\u306f\u5c11\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u304c SDK \u306b\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u306e\u3044\u304f\u3064\u304b\u3067\u306f\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\u3069\u3061\u3089\u3082 API Level 1 \u306a\u306e\u3067 API Level \u306b\u3088\u3063\u3066\u51e6\u7406\u306e\u6709\u7121\u304c\u5909\u5316\u3059\u308b\u306a\u3069\u306e\u554f\u984c\u306f\u7f6e\u304d\u307e\u305b\u3093\u304c API Level 1 \u3067\u3042\u308b\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u3042\u307e\u308a\u77e5\u3089\u308c\u3066\u3044\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n### Activity \u304c\u4e00\u6642\u505c\u6b62\u30fb\u505c\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u307e\u3067\nActivity running \u304b\u3089 Activity shut down \u307e\u3067\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u6574\u7406\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n**\u3053\u306e\u4e2d\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3064\u3044\u3066\u306f\u30e1\u30bd\u30c3\u30c9\u306e\u8aac\u660e\u306b\u306f\u4e00\u5207\u7121\u3044\u30e2\u30ce\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u4ee5\u4e0b\u306e\u60c5\u5831\u306f Nexus 6 \u3067\u306e\u52d5\u4f5c\u691c\u8a3c\u3092\u5143\u306b\u3057\u3066\u3044\u307e\u3059\u3002**\n\n![ActivityLifecycle.006.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/b24dda56-59ae-5e13-8685-4e51b3a08e22.jpeg)\n\n\u5c11\u3057\u308f\u304b\u308a\u306b\u304f\u3067\u3059\u304c Activity running \u306e\u72b6\u614b\u3067[Activity#onWindowFocusChange()](http://developer.android.com/reference/android/view/Window.Callback.html#onWindowFocusChanged(boolean))\u304c\u767a\u751f\u3059\u308b\u3068\u3001\u3059\u3050\u306b [Activity#onUserLeaveHint()](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint()) \u3068 [Activity#onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle))\u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\nLinkBubble \u3084 Facebook Messenger \u306e ChatHead \u306b\u4ee3\u8868\u3055\u308c\u308b\u7279\u5b9a\u306e Activity \u3092\u6301\u305f\u305a WindowManager \u3078\u76f4\u63a5 View \u3092\u8ffd\u52a0\u3057\u3066\u30b9\u30af\u30ea\u30fc\u30f3\u5185\u306b\u5e38\u99d0\u3059\u308b\u3088\u3046\u5225\u30bf\u30b9\u30af\u306e View \u304c\u30d5\u30a9\u30fc\u30ab\u30b9\u3092\u5f97\u305f\u5834\u5408\u3082 [Activity#onWindowFocusChange()](http://developer.android.com/reference/android/view/Window.Callback.html#onWindowFocusChanged(boolean)) \u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u901a\u77e5\u30d0\u30fc\u3092\u4e0b\u306b\u5f15\u304d\u51fa\u3057\u305f\u5834\u5408\u3082\u540c\u3058\u3088\u3046\u306b\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u304c\u9077\u79fb\u3057\u307e\u3059\u3002\n\n\u7279\u5fb4\u7684\u306a\u306e\u306f [Activity#onCreateThumbnail()](http://developer.android.com/reference/android/app/Activity.html#onCreateThumbnail(android.graphics.Bitmap, android.graphics.Canvas))\u306e\u3088\u3046\u306b\u3001\u7528\u9014\u306f\u308f\u304b\u308b\u3093\u3060\u3051\u3069\u5b9f\u969b\u306b\u3044\u3064\u547c\u3073\u51fa\u3055\u308c\u308b\u306e\u304b\u660e\u8a18\u3055\u308c\u3066\u3044\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u3082\u3001\u304d\u3061\u3093\u3068 Activity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u3067\u547c\u3073\u3060\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\n### \u5168\u4f53\n\n\u57fa\u672c\u7684\u306a\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3060\u3051\u3067\u3082\u3001\u5b9f\u969b\u306b Activity \u306e Launched \u304b\u3089 shut down \u307e\u3067\u306e\u9593\u306b\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u306f\u968f\u5206\u591a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n![ActivityLifecycle.007-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/98125519-2d8d-789a-20c4-23350ea99cf1.jpeg)\n\n\u4ed6\u306b\u3082\u3001\u3044\u304f\u3064\u304b\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u8abf\u67fb\u306e\u6642\u9593\u304c\u306a\u304f\u5272\u611b\u3057\u3066\u304a\u308a\u307e\u3059\u304c\u8abf\u67fb\u304c\u3067\u304d\u6b21\u7b2c\u8ffd\u8a18\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\n## LaunchMode = singleTop \u306e\u5834\u5408\nsingleTop \u3084 singleInstance \u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u9077\u79fb\u3057\u3066\u304b\u3089\u3001\u518d\u3073\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u9077\u79fb\u3059\u308b\u969b\u306e\u72b6\u614b\u9077\u79fb\u3092\u5236\u5fa1\u3059\u308b\u305f\u3081\u306b\u5229\u7528\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n### Activity \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\n\u3053\u3053\u3067\u521d\u3081\u3066 [Activity#onNewIntent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent)) \u304c\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u306b\u767b\u5834\u3057\u307e\u3059\u3002\u30db\u30fc\u30e0\u30a2\u30d7\u30ea\u3092\u4f8b\u306b\u53d6\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30db\u30fc\u30e0\u30dc\u30bf\u30f3\u3092\u304a\u3057\u305f\u6642\u306e Action \u306b\u5bfe\u3057\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u52d5\u4f5c\u306b\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u30d0\u30c3\u30af\u30b0\u30e9\u30f3\u30c9\u306b\u9077\u79fb\u3057\u305f\u3042\u3068\u306b\u3001\u30db\u30fc\u30e0\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068 [Activity#onNewIntent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent)) \u3092\u7d4c\u7531\u3057\u3066\u304b\u3089 [Activity#onStart()](http://developer.android.com/reference/android/app/Activity.html#onStart()) \u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\n![ActivityLifecycle.009-compressor-2.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/83bc5278-358c-8621-e300-8d126787629a.jpeg)\n\n\u56f3\u304c\u898b\u304d\u308c\u3066\u3057\u307e\u3046\u306e\u306f\u3001\u56f3\u3092\u66f8\u3044\u305f\u30c4\u30fc\u30eb\u306e\u90fd\u5408\u3067\u3059\u3002\n\n### Activity \u304c\u4e00\u6642\u505c\u6b62\u30fb\u505c\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u307e\u3067\n\n\u969b\u7acb\u3063\u3066\u7279\u5fb4\u7684\u306a\u52d5\u4f5c\u306f\u306a\u3044\u3082\u306e\u306e [Activity#onRestoreInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState(android.os.Bundle)) \u306b\u5bfe\u5fdc\u3059\u308b [Activity#onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)) \u304c Activity \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306b\u52a0\u308f\u308a\u307e\u3059\u3002\n\n### \u5168\u4f53\n\n![ActivityLifecycle.011-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/af050a31-5f5f-42bb-3840-ee28c97bf003.jpeg)\n\nActivity \u304c\u521d\u3081\u3066\u8d77\u52d5\u3059\u308b\u969b\u306b\u306f\u5927\u304d\u306a\u5909\u5316\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u505c\u6b62\u72b6\u614b\u3067\u3042\u308b[Activity#onStop()](http://developer.android.com/reference/android/app/Activity.html#onStop())\u304b\u3089\u5fa9\u5e30\u3057\u3066 Activity running \u307e\u3067\u306b\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u306f\u5897\u52a0\u3057\u3066\u3044\u308b\u306e\u3068 Activity \u304c\u5fa9\u5e30\u6642\u306b\u6e21\u3055\u308c\u308b Intent \u304c [Activity#setIntent()](http://developer.android.com/reference/android/app/Activity.html#setIntent(android.content.Intent)) \u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3082 [Activity#onNewIntent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent)) \u3067\u53d6\u5f97\u3059\u308b\u306a\u3069\u51e6\u7406\u306e\u6d41\u308c\u3082\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n## persistableMode = persistAcrossReboots \u306e\u5834\u5408\n\u3053\u3053\u3067\u5229\u7528\u3059\u308b [persistableMode](http://developer.android.com/reference/android/R.attr.html#persistableMode) \u306f Android 5.0(API Level 21) \u304b\u3089\u8ffd\u52a0\u3055\u308c\u305f\u65b0\u305f\u306a\u5c5e\u6027\u3067 Activity \u306e\u6c38\u7d9a\u5316\u306b\u95a2\u9023\u3059\u308b\u8a2d\u5b9a\u3092\u793a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f Activity \u306e\u60c5\u5831\u3092persistAcrossReboots \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u6700\u8fd1\u4f7f\u3063\u305f\u753b\u9762(Recent Screen)\u304b\u3089\u30bf\u30b9\u30af\u304c\u5fa9\u5e30\u3057\u305f\u969b\u306b\u51e6\u7406\u3092\u7d99\u7d9a\u3055\u305b\u308b\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n### Activity \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\n\n\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u3067\u660e\u78ba\u306b\u5909\u308f\u308b\u306e\u306f\u3001\u6c38\u7d9a\u5316\u306e\u305f\u3081\u30c7\u30fc\u30bf\u3092\u5f15\u304d\u7d99\u3050\u305f\u3081\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u3044\u304f\u3064\u304b\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306e\u4e2d\u306b\u767b\u5834\u3059\u308b\u3053\u3068\u3067\u3059\u3002\n\n![ActivityLifecycle.013-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/ddc58ef4-045a-f068-ecfc-05e5abcf7ad3.jpeg)\n\n\u5f15\u6570\u306b Bundle \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u306b\u306f\u3001\u901a\u5e38\u306e Bundle \u306e\u307f\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u76f4\u5f8c\u306b PersistableBundle \u3092\u5f15\u6570\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u306b\u52d5\u4f5c\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u8d77\u52d5\u51e6\u7406\u306e\u5b9a\u756a\u3067\u3042\u308b Activity#onCreate() \u306f\n[Activity#onCreate(android.os.Bundle)](http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle)) \u3068\n[Activity#onCreate(Bundle savedInstanceState, PersistableBundle persistentState)](http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle, android.os.PersistableBundle))\n\u306e\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u5f93\u6765\u306e\u5b9f\u88c5\u3092\u5909\u3048\u308b\u3053\u3068\u306a\u304f\u3001\u65b0\u305f\u306b\u8ffd\u52a0\u3055\u308c\u305f PersistableBundle \u306e\u3042\u308b\u30e1\u30bd\u30c3\u30c9\u5074\u306b\u6c38\u7d9a\u5316\u306b\u305f\u3081\u306b\u5fc5\u8981\u306a\u51e6\u7406\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u5927\u304d\u306a\u5909\u66f4\u3092\u884c\u308f\u305a\u3068\u3082\u6c38\u7d9a\u5316\u306a\u3069\u306e\u65b0\u305f\u306a\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306b\u3082\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u306e PersistableBundle \u3092\u5f15\u6570\u306b\u6301\u3064\u30e1\u30bd\u30c3\u30c9\u306f\u5168\u3066 API Level 21 \u306b\u306a\u308a\u307e\u3059\u3002\n\n### Activity \u304c\u4e00\u6642\u505c\u6b62\u30fb\u505c\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u307e\u3067\n\n\u7d42\u4e86\u6642\u306e\u30b1\u30fc\u30b9\u3067\u306f[Activity#onSaveInstanceState(Bundle outState)](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle))\u304c\u6c38\u7d9a\u5316\u7528\u306e PersistableBundle \u3092\u5f15\u6570\u306b\u6301\u3064 [Activity#onSaveInstanceState(Bundle outState, PersistableBundle outPersistentState)](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle, android.os.PersistableBundle))\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n![ActivityLifecycle.014-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/d402576c-d28e-ae35-7bda-98bfd39f8b8f.jpeg)\n\n### \u5168\u4f53\n\n\u56f3\u304c...\u304b\u306a\u308a\u5206\u304b\u308a\u306b\u304f\u3044\u3067\u3059\u306d\u3002\n\n![ActivityLifecycle.015-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/2636efa4-6b14-49a3-91ed-767f71678c67.jpeg)\n\n\u7279\u5fb4\u3068\u3057\u3066\u306f\u3001\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u304c\u57fa\u672c\u7684\u306a\u3082\u306e\u306b\u6bd4\u3079\u3066\u3082 Activity Launched \u304b\u3089 Activity running \u307e\u3067\u306e\u8d77\u52d5\u51e6\u7406\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306f override \u3057\u3066\u3044\u306a\u3044\u72b6\u614b\u3067\u3082\u591a\u304f\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u7d4c\u7531\u3057\u3066\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u304c\u5909\u5316\u3057\u3066\u3044\u308b\u4e8b\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u540c\u6642\u306b\u3001\u7d4c\u7531\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u591a\u3044\u305f\u3081\u8d77\u52d5\u51e6\u7406\u3067\u30b7\u30d3\u30a2\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u8abf\u6574\u3092\u3057\u3066\u3044\u308b\u3068\u601d\u308f\u306c\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3053\u3068\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n# API \u4ed5\u69d8\u304b\u3089\u898b\u308b Activity \u306e\u6a5f\u80fd\u5909\u9077\n\nAPI Level 21 \u306e\u4ed5\u69d8\u304b\u3089 Activity \u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b API \u306e\u72b6\u6cc1\u3092\u8abf\u67fb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n![ActivityLifecycle.017-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/e0414d51-921d-c16c-4c2a-66a18c07fd17.jpeg)\n\n\u73fe\u5728\u306e Activity \u306e\u30e1\u30bd\u30c3\u30c9\u306e\u591a\u304f\u306f API Level 1 \u304b\u3089\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u3001Activity \u81ea\u4f53\u306e\u30e9\u30a4\u30d5\u30b5\u30af\u30eb\u306b\u5927\u304d\u304f\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u5909\u66f4\u304c\u3042\u3063\u305f API Level \u3067\u306f\u591a\u304f\u306e\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u73fe\u5728\u307e\u3067\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u305d\u3053\u304b\u3089\u591a\u304f\u306e API \u304c\u8ffd\u52a0\u3055\u308c\u305f API Level \u306e\u7279\u5fb4\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\n## Honeycomb(API Level:11/Android 3.0)\n\n![ActivityLifecycle.018-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/c06872a4-263d-cf49-0d47-cdb75bb49b00.jpeg)\n\n## Jelly Bean(API Level:16/Android 4.1)\n![ActivityLifecycle.019-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/b49b8d5d-bf3f-3bb2-7318-593d6a99aaf5.jpeg)\n\n\n## Lollipop(API Level:21/Android 5.0)\n![ActivityLifecycle.020-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/42bf7652-dfb1-eabe-efd2-44bfb864d498.jpeg)\n\nLollipop \u3067\u306e\u7279\u5fb4\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n### Recent Screen\n\nKitkat \u307e\u3067\u306e\u5c65\u6b74\u753b\u9762\u306f\u300c1\u30a2\u30d7\u30ea\u306b1\u3064\u300d\u3068\u3044\u3046\u30eb\u30fc\u30eb\u3067\u5c65\u6b74\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nLollipop \u3067\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001\u8907\u6570\u306e\u753b\u9762\u3092\u5c65\u6b74\u306b\u767b\u9332\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u308c\u306f Activity \u306e\u6c38\u7d9a\u5316\u3067\u3042\u308b Persistable \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u7d99\u7d9a\u7684\u306a\u52d5\u4f5c\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u306a\u3044\u306e\u3067\u524d\u8ff0\u3067\u306f\u8aac\u660e\u3057\u3066\u304a\u308a\u307e\u305b\u3093\u304c\u3001[Activity#setTaskDescription()](http://developer.android.com/reference/android/app/Activity.html#setTaskDescription(android.app.ActivityManager.TaskDescription))\u3067 Activity \u306e\u30a2\u30a4\u30b3\u30f3\u3084\u30e9\u30d9\u30eb\u306a\u3069\u8996\u899a\u7684\u306a\u60c5\u5831\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n![ActivityLifecycle.021-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/9ab19e38-403a-c492-1298-467581b62ca4.jpeg)\n\n### Screen Pinning\nLollipop \u304b\u3089 UI/UX\u306b\u5927\u304d\u304f\u5f71\u97ff\u3092\u3042\u305f\u3048\u308b\u306e\u304c\u30b9\u30af\u30ea\u30fc\u30f3\u306e\u56fa\u5b9a(Pin)\u3067\u3059\u3002\nPin \u3055\u308c\u305f\u30b9\u30af\u30ea\u30fc\u30f3\u306f\u4e00\u6642\u7684\u306b\u30bf\u30b9\u30af\u306e\u5207\u308a\u66ff\u3048\u3084 Notification \u304b\u3089\u306e\u9077\u79fb\u3092\u906e\u65ad\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u7528\u9014\u3084\u76ee\u7684\u304c\u660e\u78ba\u306a\u30c7\u30d0\u30a4\u30b9\u306a\u3069\u3067\u5229\u7528\u3055\u308c\u308b\uff08\u6559\u80b2\u5411\u3051\u3068\u304b\u30ad\u30aa\u30b9\u30af\uff09\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u3067\u306e\u7528\u9014\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\nPin \u3092\u5229\u7528\u3059\u308b\u306b\u306f\u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u5b9a\u304b\u3089\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304b\u3089\u5f53\u8a72\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n![ActivityLifecycle.022-compressor.jpg](https://qiita-image-store.s3.amazonaws.com/0/63129/26b3ec81-ec31-4a7e-71a4-3224df57869d.jpeg)\n\nPin \u3055\u308c\u305f\u30b9\u30af\u30ea\u30fc\u30f3\u3067\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u7279\u5fb4\u3092\u6301\u3061\u307e\u3059\u3002\n+ \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306f\u30d6\u30e9\u30f3\u30af\uff08\u7a7a\u3063\u307d\uff09\u306b\u306a\u308a\u307e\u3059\u3002\n+ Notification \u306f\u975e\u8868\u793a\u306a\u308a\u307e\u3059\u3002\n+ \u30db\u30fc\u30e0\u30dc\u30bf\u30f3\u3084\u5c65\u6b74\u30dc\u30bf\u30f3\u306f\u975e\u5e38\u6642\u306b\u306a\u308a\u307e\u3059\u3002\n+ \u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u65b0\u305f\u306a Activity \u3092\u8d77\u52d5\u3067\u304d\u307e\u305b\u3093\u3002\n+ \u65b0\u3057\u3044\u30bf\u30b9\u30af\u3092\u4f5c\u3089\u306a\u3051\u308c\u3070\u30ab\u30ec\u30f3\u30c8\u306b\u3042\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u65b0\u3057\u3044 Activity \u3092\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002\n+ \u30b9\u30af\u30ea\u30fc\u30f3\u306ePin\u304c\u30c7\u30d0\u30a4\u30b9\u306e\u30aa\u30fc\u30ca\u30fc\u6a29\u9650\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u30a2\u30d7\u30ea\u304c[Activity#stopLockTask()](http://developer.android.com/reference/android/app/Activity.html#stopLockTask())\u3092\u547c\u3076\u307e\u3067\u30b9\u30af\u30ea\u30fc\u30f3\u306f Pin \u306e\u72b6\u614b\u3092\u7dad\u6301\u3057\u307e\u3059\u3002\n\n\u623b\u308b\u30dc\u30bf\u30f3\u3068\u5c65\u6b74\u30dc\u30bf\u30f3\u3092\u9577\u62bc\u3057\u3059\u308b\u3053\u3068\u3067\u3082\u30b9\u30af\u30ea\u30fc\u30f3\u306e Pin \u3092\u89e3\u9664\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u304c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u3088\u3063\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001Pin \u306e\u89e3\u9664\u3092\u884c\u3046\u305f\u3081\u306b\u30ed\u30c3\u30af\u30b9\u30af\u30ea\u30fc\u30f3\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u753b\u9762\u306b\u9077\u79fb\u3057\u3066\u8a8d\u8a3c\u3092\u8981\u6c42\u3057\u307e\u3059\u3002\n\n# \u96d1\u611f\nAndroid 5.0 \u3067\u306f\u3001\u65b0\u3057\u3044\u753b\u9762\u306e\u72b6\u614b\u304c\u52a0\u308f\u308a\u7279\u6b8a\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30cf\u30c3\u30af\u7684\u306a\u3053\u3068\u3092\u3059\u308b\u3053\u3068\u3082\u306a\u304f\u5b9f\u88c5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3067\u306f Dialog \u3084 Fragment \u306e\u3088\u3046\u306a Activity \u3068\u9023\u52d5\u3057\u306a\u304c\u3089\u3082\u72ec\u81ea\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u6301\u3064\u6a5f\u80fd\u304c\u5897\u3048\u3066\u304d\u3066\u3001\u57fa\u672c\u7684\u306a\u90e8\u5206\u3084\u57fa\u790e\u7684\u306a\u4ed5\u69d8\u306e\u7406\u89e3\u304c\u91cd\u8981\u6027\u3092\u5897\u3057\u3066\u3044\u308b\u611f\u3058\u304c\u3057\u3066\u3044\u307e\u3059\u3002\n\n"}