{"context": "\u5c0f\u30e1\u30e2\u3002\nSymfony2.7\u7cfb\u3001Doctrine\u3001MySQL5.6\u3001\u306a\u74b0\u5883\u3002\n\n\u30a8\u30e9\u30fc\u5185\u5bb9\nSQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; max key length is 767 bytes  \n\n\n\u767a\u751f\u6761\u4ef6\n\nDB\u3068\u304b\u30c6\u30fc\u30d6\u30eb\u3068\u304b\u30ab\u30e9\u30e0\u304cutf8\u306a\u3084\u3064\u3092\u3001utf8mb4\u306b\u5909\u66f4\u3059\u308b\u3068\u304d\u306b\u767a\u751f\n\n\n\u6253\u3063\u305fSQL\nALTER TABLE fooooooo default character set utf8mb4;\nALTER TABLE fooooooo CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n\n\u539f\u56e0\n\n\u307b\u307c\u30a8\u30e9\u30fc\u901a\u308a\u3002\n\u30e6\u30cb\u30fc\u30af\u5236\u7d04\u4ed8\u304dvarchar\u306f767byte\u307e\u3067\u3057\u304b\u3044\u3051\u306a\u3044\u3002\n\n\n\u53c2\u8003\uff1a Mysql\u3067\u30e6\u30cb\u30fc\u30af\u5236\u7d04\u3092\u3064\u3051\u305fvarchar\u306f767byte\u307e\u3067\u3057\u304b\u5165\u3089\u306a\u3044\u8a71\n\n\n\n\n\nEntity\u3068\u304b\n\nDoctrine\u3092\u4f7f\u3063\u3066\u308b\u3002\nUTF8\u306f3\u30d0\u30a4\u30c8\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e0a\u306fMAX255\u6587\u5b57\u3002\n255\u6587\u5b57*3\u30d0\u30a4\u30c8\u3067765Byte\u3002\u30e6\u30cb\u30fc\u30af\u5236\u7d04\u4ed8\u304dvarchar\u306f767byte\u307e\u3067\u306a\u306e\u3067\u3001\u30bb\u30d5\u30bb\u30d5\u3002\n\n\n    /**\n     * @var string\n     *\n     * @ORM\\Column(name=\"name\", type=\"string\", length=255, unique=true, options={\"comment\" = \"\u540d\u524d\"})\n     * @Assert\\NotBlank(message=\"\u304a\u307e\u3048\u306e\u540d\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002\")\n     */\n    protected $name;\n\n\n\n\u4fee\u6b63\n\n\u305d\u3082\u305d\u3082\u540d\u524d\u306blength\u304c255\u3068\u304b\u3044\u3089\u3093\u3060\u308d\u3068\u3044\u3046\u3053\u3068\u3067\u3001length=\"30\"\u306b\u5909\u66f4\u3002\n\n\n\u554f\u984c\u7121\u3057\u3002\n\n\n\n\n    /**\n     * @var string\n     *\n     * @ORM\\Column(name=\"name\", type=\"string\", length=30, unique=true, options={\"comment\" = \"\u540d\u524d\"})\n     * @Assert\\NotBlank(message=\"\u304a\u307e\u3048\u306e\u540d\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002\")\n     */\n    protected $name;\n\n\u3084\u3063\u305f\u306d\u3002\n\u5c0f\u30e1\u30e2\u3002\nSymfony2.7\u7cfb\u3001Doctrine\u3001MySQL5.6\u3001\u306a\u74b0\u5883\u3002\n\n\n# \u30a8\u30e9\u30fc\u5185\u5bb9\n\n```\nSQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; max key length is 767 bytes  \n```\n\n# \u767a\u751f\u6761\u4ef6\n\n* DB\u3068\u304b\u30c6\u30fc\u30d6\u30eb\u3068\u304b\u30ab\u30e9\u30e0\u304cutf8\u306a\u3084\u3064\u3092\u3001utf8mb4\u306b\u5909\u66f4\u3059\u308b\u3068\u304d\u306b\u767a\u751f\n\n\n## \u6253\u3063\u305fSQL\n\n```sql\nALTER TABLE fooooooo default character set utf8mb4;\nALTER TABLE fooooooo CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n```\n\n# \u539f\u56e0\n\n* \u307b\u307c\u30a8\u30e9\u30fc\u901a\u308a\u3002\n* \u30e6\u30cb\u30fc\u30af\u5236\u7d04\u4ed8\u304dvarchar\u306f767byte\u307e\u3067\u3057\u304b\u3044\u3051\u306a\u3044\u3002\n    * \u53c2\u8003\uff1a [Mysql\u3067\u30e6\u30cb\u30fc\u30af\u5236\u7d04\u3092\u3064\u3051\u305fvarchar\u306f767byte\u307e\u3067\u3057\u304b\u5165\u3089\u306a\u3044\u8a71](http://qiita.com/ritukiii/items/0e07408670d6e2e549fb)\n\n## Entity\u3068\u304b\n\n* Doctrine\u3092\u4f7f\u3063\u3066\u308b\u3002\n* UTF8\u306f3\u30d0\u30a4\u30c8\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e0a\u306fMAX255\u6587\u5b57\u3002\n* 255\u6587\u5b57*3\u30d0\u30a4\u30c8\u3067765Byte\u3002\u30e6\u30cb\u30fc\u30af\u5236\u7d04\u4ed8\u304dvarchar\u306f767byte\u307e\u3067\u306a\u306e\u3067\u3001\u30bb\u30d5\u30bb\u30d5\u3002\n\n```php\n\n    /**\n     * @var string\n     *\n     * @ORM\\Column(name=\"name\", type=\"string\", length=255, unique=true, options={\"comment\" = \"\u540d\u524d\"})\n     * @Assert\\NotBlank(message=\"\u304a\u307e\u3048\u306e\u540d\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002\")\n     */\n    protected $name;\n\n```\n\n\n# \u4fee\u6b63\n\n* \b\u305d\u3082\u305d\u3082\u540d\u524d\u306blength\u304c255\u3068\u304b\u3044\u3089\u3093\u3060\u308d\u3068\u3044\u3046\u3053\u3068\u3067\u3001length=\"30\"\u306b\u5909\u66f4\u3002\n    * \u554f\u984c\u7121\u3057\u3002\n\n\n```php\n\n    /**\n     * @var string\n     *\n     * @ORM\\Column(name=\"name\", type=\"string\", length=30, unique=true, options={\"comment\" = \"\u540d\u524d\"})\n     * @Assert\\NotBlank(message=\"\u304a\u307e\u3048\u306e\u540d\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002\")\n     */\n    protected $name;\n```\n\n\n\u3084\u3063\u305f\u306d\u3002\n", "tags": ["mysql5.6"]}