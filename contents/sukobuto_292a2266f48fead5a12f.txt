{"context": " More than 1 year has passed since last update.\u3053\u306e\u74b0\u5883\u3067 Munin \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nScientific Linux 6 \u3067 PHP5.4 Web\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b5\u30fc\u30d0\u69cb\u7bc9\nhttp://qiita.com/sukobuto/items/b44bd94bbd084a27878b\n\n\u3084\u3063\u305f\u3053\u3068\u30e1\u30e2\u306a\u306e\u3067\u6bb4\u308a\u66f8\u304d\u3067\u3059\u3002\n\nmunin \u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0 (\u6700\u521d\u306b\u3084\u308b\u3053\u3068\uff01)\nmunin \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsuEXEC \u74b0\u5883\u306b\u5bfe\u5fdc\u3055\u305b\u308b\nmunin \u521d\u671f\u8a2d\u5b9a\napache \u8a2d\u5b9a\u8ffd\u52a0\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u8ffd\u52a0 (MySQL, Redis)\n\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n\n\nmunin \u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0\n\u4e0a\u8a18\u8a18\u4e8b - \u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30e6\u30fc\u30b6\u306e\u74b0\u5883\u6574\u5099 (\u534a\u81ea\u52d5\u5316) \u306b\u3066\u4f5c\u6210\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n[root@host ~]# ./hostinguseradd.sh munin munin.example.com\n\n\n\u306a\u305c munin \u30e6\u30fc\u30b6\u3092\u81ea\u5206\u3067\u4f5c\u308b\u306e\u304b\nmunin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001\u81ea\u52d5\u7684\u306b munin \u30e6\u30fc\u30b6\uff08munin \u306e\u5b9f\u884c\u3068munin\u30da\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u884c\u3046\u30e6\u30fc\u30b6\uff09\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\u3053\u3053\u3067\u901a\u5e38\u30e6\u30fc\u30b6\u3068\u3057\u3066 munin \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u7406\u7531\u306f\u3001suEXEC \u74b0\u5883\u3067\u3082 munin \u3092\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\u3082\u3057\u5148\u306b munin \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u3001UID \u304c 500 \u3088\u308a\u5c0f\u3055\u3044\u5024\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002suEXEC \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f UID \u304c 500 \u3088\u308a\u5c0f\u3055\u3044\u30e6\u30fc\u30b6\u306f CGI \u306e\u5b9f\u884c\u304c\u6291\u6b62\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u5fc5\u305a munin \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3088\u308a\u3082\u5148\u306b munin \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\nyum \u3067 Munin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nepel \u30ea\u30dd\u30b8\u30c8\u30ea\u5229\u7528\nyum install munin munin-node\n\n\nsuEXEC \u74b0\u5883\u306b\u5bfe\u5fdc\u3055\u305b\u308b\n\u307b\u304b\u306e\u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u540c\u3058\u69cb\u9020\u306b\u3057\u307e\u3059\u3002\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u79fb\u52d5\u3057\u305f\u308a\u306a\u3093\u3060\u308a\ncd /home/munin\ncp /var/www/cgi-bin/munin-cgi-* cgi-bin/\nchown munin:munin cgi-bin/munin-cgi-*\nchmod 710 cgi-bin/munin-cgi-*\nrmdir public_html\nln -s /var/www/html/munin public_html\nchmod 710 public_html\n\n\n\nmunin \u521d\u671f\u8a2d\u5b9a\n/etc/munin/munin.conf\n\u30db\u30b9\u30c8\u540d\u3092\u5909\u66f4\n\n/etc/munin/munin.conf\n[example.com]\n    address 127.0.0.1\n    use_node_name yes\n\n\n/etc/munin/munin-node.conf\n\u30db\u30b9\u30c8\u540d\u3092\u5909\u66f4\n\n/etc/munin/munin-node.conf\nhost_name example.com\n\n\n\napache \u8a2d\u5b9a\u8ffd\u52a0\n/etc/httpd/conf.d/munin.conf\nmunin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b\u8ffd\u52a0\u3055\u308c\u308b Apache \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5909\u66f4\n\u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u8a8d\u8a3c\u306b\u5909\u66f4\uff08\u4efb\u610f\uff09\nScriptAlias \u306e\u53c2\u7167\u5148\u30d1\u30b9\u3092\u5909\u66f4\n\n\n/etc/httpd/conf.d/munin.conf\n# This file can be used as a .htaccess file, or a part of your apache\n# config file.\n#\n# For the .htaccess file option to work the munin www directory\n# (/var/www/html/munin) must have \"AllowOverride all\" or something close\n# to that set.\n#\n# As a config file enclose it in <directory> like so:\n# \n<directory /home/munin/public_html/>\nAllowOverride None\nAuthUserFile /etc/munin/munin-htpasswd\nAuthName \"munin\"\nAuthType Digest\nAuthDigestDomain /\nrequire valid-user\n\n# This next part requires mod_expires to be enabled.\n#\n# We could use <IfModule mod_expires> around here, but I want it to be\n# as evident as possible that you either have to load mod_expires _or_\n# you coment out/remove these lines.\n\n# Set the default expiery time for files 5 minutes 10 seconds from\n# their creation (modification) time.  There are probably new files by\n# that time.\n\nExpiresActive On\nExpiresDefault M310\n\n</directory>\nScriptAlias /munin-cgi/munin-cgi-graph /home/munin/cgi-bin/munin-cgi-graph\n\n\nmunin-htpasswd \u306b\u30e6\u30fc\u30b6\u8ffd\u52a0\ncd /etc/munin/\nhtdigest munin-htpasswd \"munin\" munin\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n[root@host ~]# service httpd restart\n[root@host ~]# service munin-node start\n[root@host ~]# chkconfig munin-node on\n\n\u3053\u308c\u3067 munin.example.com (\u4f8b) \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Munin \u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u8ffd\u52a0\nmunin \u697d\u3005\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067MySQL\u3092\u76e3\u8996\u3059\u308b\uff01\nMunin \u3067 Redis \u306e\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\n# MySQL \u76e3\u8996\u5c0e\u5165\nyum install perl-IPC-ShareLite perl-Cache-Cache perl-Cache perl-DBD-MySQL\ncd /etc/munin/plugins\nln -s /usr/share/munin/plugins/mysql_ mysql_commands\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_bpool\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_io\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_log\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_tnx\nln -s /usr/share/munin/plugins/mysql_ mysql_select_types\nln -s /usr/share/munin/plugins/mysql_ mysql_table_locks\nln -s /usr/share/munin/plugins/mysql_ mysql_connections\nln -s /usr/share/munin/plugins/mysql_ mysql_slow\nln -s /usr/share/munin/plugins/mysql_ mysql_myisam_indexes\nln -s /usr/share/munin/plugins/mysql_ mysql_network_traffic\nln -s /usr/share/munin/plugins/mysql_ mysql_qcache\nln -s /usr/share/munin/plugins/mysql_ mysql_qcache_mem\n\n# Redis \u76e3\u8996\u5c0e\u5165\ncd /usr/share/munin/plugins/\nwget https://raw.github.com/bpineau/redis-munin/master/redis_\nchmod +x redis_\nln -s /usr/share/munin/plugins/redis_ /etc/munin/plugins/redis_127.0.0.1_6379\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u306e munin-node \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u8a18\n\n/etc/munin/plugin-conf.d/munin-node\n[mysql*]\nenv.mysqlconnection DBI:mysql:mysql;host=localhost;port=3306\nenv.mysqluser mysqluserid\nenv.mysqlpassword mysqlpasswd\n[redis*]\nenv.password redispasswd ;\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u3057\u3066\u306a\u3044\u306a\u3089\u4e0d\u8981\n\n\nmunin-node \u518d\u8d77\u52d5\nservice munin-node restart\n\n\u3053\u306e\u74b0\u5883\u3067 Munin \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n>Scientific Linux 6 \u3067 PHP5.4 Web\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b5\u30fc\u30d0\u69cb\u7bc9\nhttp://qiita.com/sukobuto/items/b44bd94bbd084a27878b\n\n\u3084\u3063\u305f\u3053\u3068\u30e1\u30e2\u306a\u306e\u3067\u6bb4\u308a\u66f8\u304d\u3067\u3059\u3002\n\n- munin \u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0 (\u6700\u521d\u306b\u3084\u308b\u3053\u3068\uff01)\n- munin \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- suEXEC \u74b0\u5883\u306b\u5bfe\u5fdc\u3055\u305b\u308b\n- munin \u521d\u671f\u8a2d\u5b9a\n- apache \u8a2d\u5b9a\u8ffd\u52a0\n- \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n- \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u8ffd\u52a0 (MySQL, Redis)\n- \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n\n## munin \u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0\n\n[\u4e0a\u8a18\u8a18\u4e8b - \u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30e6\u30fc\u30b6\u306e\u74b0\u5883\u6574\u5099 (\u534a\u81ea\u52d5\u5316)](http://qiita.com/sukobuto/items/b44bd94bbd084a27878b#3-5) \u306b\u3066\u4f5c\u6210\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```shell-session\n[root@host ~]# ./hostinguseradd.sh munin munin.example.com\n```\n\n### \u306a\u305c munin \u30e6\u30fc\u30b6\u3092\u81ea\u5206\u3067\u4f5c\u308b\u306e\u304b\n\nmunin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001\u81ea\u52d5\u7684\u306b munin \u30e6\u30fc\u30b6\uff08munin \u306e\u5b9f\u884c\u3068munin\u30da\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u884c\u3046\u30e6\u30fc\u30b6\uff09\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u901a\u5e38\u30e6\u30fc\u30b6\u3068\u3057\u3066 munin \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u7406\u7531\u306f\u3001suEXEC \u74b0\u5883\u3067\u3082 munin \u3092\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\n\u3082\u3057\u5148\u306b munin \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u3001UID \u304c 500 \u3088\u308a\u5c0f\u3055\u3044\u5024\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002suEXEC \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f UID \u304c 500 \u3088\u308a\u5c0f\u3055\u3044\u30e6\u30fc\u30b6\u306f CGI \u306e\u5b9f\u884c\u304c\u6291\u6b62\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n**\u5fc5\u305a munin \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3088\u308a\u3082\u5148\u306b munin \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002**\n\n## yum \u3067 Munin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nepel \u30ea\u30dd\u30b8\u30c8\u30ea\u5229\u7528\n\n```bash\nyum install munin munin-node\n```\n\n## suEXEC \u74b0\u5883\u306b\u5bfe\u5fdc\u3055\u305b\u308b\n\n\u307b\u304b\u306e\u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u540c\u3058\u69cb\u9020\u306b\u3057\u307e\u3059\u3002\n\n```bash:\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u79fb\u52d5\u3057\u305f\u308a\u306a\u3093\u3060\u308a\ncd /home/munin\ncp /var/www/cgi-bin/munin-cgi-* cgi-bin/\nchown munin:munin cgi-bin/munin-cgi-*\nchmod 710 cgi-bin/munin-cgi-*\nrmdir public_html\nln -s /var/www/html/munin public_html\nchmod 710 public_html\n```\n\n## munin \u521d\u671f\u8a2d\u5b9a\n\n/etc/munin/munin.conf\n\u30db\u30b9\u30c8\u540d\u3092\u5909\u66f4\n\n```:/etc/munin/munin.conf\n[example.com]\n    address 127.0.0.1\n    use_node_name yes\n```\n\n/etc/munin/munin-node.conf\n\u30db\u30b9\u30c8\u540d\u3092\u5909\u66f4\n\n```:/etc/munin/munin-node.conf\nhost_name example.com\n```\n\n## apache \u8a2d\u5b9a\u8ffd\u52a0\n\n/etc/httpd/conf.d/munin.conf\nmunin \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b\u8ffd\u52a0\u3055\u308c\u308b Apache \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n- \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5909\u66f4\n- \u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u8a8d\u8a3c\u306b\u5909\u66f4\uff08\u4efb\u610f\uff09\n- ScriptAlias \u306e\u53c2\u7167\u5148\u30d1\u30b9\u3092\u5909\u66f4\n\n```apache:/etc/httpd/conf.d/munin.conf\n# This file can be used as a .htaccess file, or a part of your apache\n# config file.\n#\n# For the .htaccess file option to work the munin www directory\n# (/var/www/html/munin) must have \"AllowOverride all\" or something close\n# to that set.\n#\n# As a config file enclose it in <directory> like so:\n# \n<directory /home/munin/public_html/>\nAllowOverride None\nAuthUserFile /etc/munin/munin-htpasswd\nAuthName \"munin\"\nAuthType Digest\nAuthDigestDomain /\nrequire valid-user\n\n# This next part requires mod_expires to be enabled.\n#\n# We could use <IfModule mod_expires> around here, but I want it to be\n# as evident as possible that you either have to load mod_expires _or_\n# you coment out/remove these lines.\n\n# Set the default expiery time for files 5 minutes 10 seconds from\n# their creation (modification) time.  There are probably new files by\n# that time.\n\nExpiresActive On\nExpiresDefault M310\n\n</directory>\nScriptAlias /munin-cgi/munin-cgi-graph /home/munin/cgi-bin/munin-cgi-graph\n```\n\nmunin-htpasswd \u306b\u30e6\u30fc\u30b6\u8ffd\u52a0\n\n```bash\ncd /etc/munin/\nhtdigest munin-htpasswd \"munin\" munin\n```\n\n## \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\n```shell-session\n[root@host ~]# service httpd restart\n[root@host ~]# service munin-node start\n[root@host ~]# chkconfig munin-node on\n```\n\n\u3053\u308c\u3067 munin.example.com (\u4f8b) \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Munin \u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n## \u30d7\u30e9\u30b0\u30a4\u30f3\u8ffd\u52a0\n\n[munin \u697d\u3005\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067MySQL\u3092\u76e3\u8996\u3059\u308b\uff01](http://www.s-quad.com/wordpress/?p=1442)\n[Munin \u3067 Redis \u306e\u30ea\u30bd\u30fc\u30b9\u76e3\u8996](http://d.hatena.ne.jp/akishin999/20130523/1369263988)\n\n```bash\n# MySQL \u76e3\u8996\u5c0e\u5165\nyum install perl-IPC-ShareLite perl-Cache-Cache perl-Cache perl-DBD-MySQL\ncd /etc/munin/plugins\nln -s /usr/share/munin/plugins/mysql_ mysql_commands\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_bpool\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_io\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_log\nln -s /usr/share/munin/plugins/mysql_ mysql_innodb_tnx\nln -s /usr/share/munin/plugins/mysql_ mysql_select_types\nln -s /usr/share/munin/plugins/mysql_ mysql_table_locks\nln -s /usr/share/munin/plugins/mysql_ mysql_connections\nln -s /usr/share/munin/plugins/mysql_ mysql_slow\nln -s /usr/share/munin/plugins/mysql_ mysql_myisam_indexes\nln -s /usr/share/munin/plugins/mysql_ mysql_network_traffic\nln -s /usr/share/munin/plugins/mysql_ mysql_qcache\nln -s /usr/share/munin/plugins/mysql_ mysql_qcache_mem\n\n# Redis \u76e3\u8996\u5c0e\u5165\ncd /usr/share/munin/plugins/\nwget https://raw.github.com/bpineau/redis-munin/master/redis_\nchmod +x redis_\nln -s /usr/share/munin/plugins/redis_ /etc/munin/plugins/redis_127.0.0.1_6379\n```\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u306e munin-node \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u8a18\n\n```ini:/etc/munin/plugin-conf.d/munin-node\n[mysql*]\nenv.mysqlconnection DBI:mysql:mysql;host=localhost;port=3306\nenv.mysqluser mysqluserid\nenv.mysqlpassword mysqlpasswd\n[redis*]\nenv.password redispasswd ;\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u3057\u3066\u306a\u3044\u306a\u3089\u4e0d\u8981\n```\n\nmunin-node \u518d\u8d77\u52d5\n\n```bash\nservice munin-node restart\n```", "tags": ["Munin2.0.19", "Apache2.2.15", "Linux"]}