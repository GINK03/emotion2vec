{"context": " More than 1 year has passed since last update.Mac\u3067\u97f3\u58f0\u8a8d\u8b58\u3092\u3057\u3066\u307f\u305f\u3002\n\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb(wav)\u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u8a8d\u8b58\u3055\u305b\u308b\u3002\n\nGoogle Speech API\n\u97f3\u58f0\u8a8d\u8b58\u306b\u306f\u3001Speech API\u3092\u5229\u7528\u3059\u308b\u3002\n\u30ea\u30f3\u30af\u5148\u3067\u8a66\u305b\u308b\u304c\u3001\u97f3\u58f0\u3092\u8a8d\u8b58\u3057\u3066\u6587\u5b57\u5217\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3002Chrome\u306e\u97f3\u58f0\u691c\u7d22\u3068\u304b\u306b\u5229\u7528\u3055\u308c\u3066\u308b\u3084\u3064\u3060\u3068\u601d\u3046\u3002\n\u65e5\u672c\u306egoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u3060\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u72b6\u614b\u3067\u306fAPI\u3092\u5229\u7528\u3067\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001Chromium Projects?\u306b\u30e1\u30f3\u30d0\u30fc\u767b\u9332\u3057\u3066\u304a\u304f\u3002\u305d\u3046\u3059\u308b\u3068\u3001Google Developers Console\u3067\u3001Speech API\u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306a\u308b\u306e\u3067\u3001API key\u306a\u3069\u3092\u53d6\u5f97\u3092\u3057\u3066\u304a\u304f\u3002\u8a73\u3057\u304f\u306f\u4ee5\u4e0b\u3002\nhttp://www.chromium.org/developers/how-tos/api-keys\n\u3061\u306a\u307f\u306b\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4e0a\u9650\u304c50\u56de/\u65e5 \u3060\u3057\u3001\u3061\u3083\u3093\u3068\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\uff08\u304a\u305d\u3089\u304f\uff09\u7121\u3044\u3057\u3001\u3042\u307e\u308a\u4f7f\u3044\u3084\u3059\u3044\u611f\u3058\u3067\u306f\u306a\u3044\u3002\u3002\u3002\n\n\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n\u81ea\u5206\u306e\u58f0\u3092\u9332\u97f3\u3059\u308b\u305f\u3081\u306b\u3001\u5c11\u3057\u3060\u3051\u6e96\u5099\u3002Homebrew\u3067SoX\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n$ brew install sox\n\n\u3053\u308c\u3067\u3001rec\u30b3\u30de\u30f3\u30c9\u3067\u9332\u97f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9\u306a\u3069\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\u3002\n$ rec --encoding signed-integer --bits 16 --channels 1 --rate 16000 test.wav\n\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068\u9332\u97f3\u958b\u59cb\u3055\u308c\u308b\u306e\u3067\u3001\u300c\u30c6\u30b9\u30c8\u300d\u3068\u3067\u3082\u8a00\u3063\u3066\u4fdd\u5b58\u3002\n\nRuby\u3067\u8a8d\u8b58\u7528\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\u3042\u3068\u306f\u3001Speech API\u306b\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u8a8d\u8b58\u3055\u305b\u308b\u3002\nhttps://www.google.com/speech-api/v2/recognize\u306b\u5bfe\u3057\u3066\u3001POST\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3068\u3001\u97f3\u58f0\u3092\u8a8d\u8b58\u3057\u305f\u7d50\u679c\u304c\u30ec\u30b9\u30dd\u30f3\u30b9\u3067\u5e30\u3063\u3066\u304f\u308b\u3002\n\u4ee5\u4e0b\u304c\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u3002\n\nvoice_recognition.rb\nrequire 'net/http'\nrequire 'JSON'\n\nuri = URI('https://www.google.com/speech-api/v2/recognize' \\\n  '?output=json&lang=ja&key=AIzaSyAD_5b6--4Jz0CXD5_sRoPa9ZjgJsYNK-M')\n\nhttps = Net::HTTP.new(uri.hostname, uri.port)\nhttps.use_ssl = true\n\nres = https.start do |h|\n  req = Net::HTTP::Post.new(uri)\n  req.body = File.read(ARGV[0])\n  req.content_type = \"audio/l16; rate=16000\"\n  req['User-Agent'] = \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.94 Safari/537.36\"\n  h.request(req)\nend\n\np res\n\nresult_data = res.body.force_encoding('UTF-8')\nresult_data.split(\"\\n\").each do |data|\n  p JSON.parse data\nend\n\n\n\u51fa\u529b\u5f62\u5f0f(output)\u3084API key(key)\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6307\u5b9a\u3057\u3001API\u306eURL\u306bPOST\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3002header\u3084body\u306b\u3082\u60c5\u5831\u3092\u5165\u308c\u3066\u3044\u308b\u3002\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3002\n$ ruby voice_recognition.rb test.wav\n#<Net::HTTPOK 200 OK readbody=true>\n{\"result\"=>[]}\n{\"result\"=>[{\"alternative\"=>[{\"transcript\"=>\"\u30c6\u30b9\u30c8\", \"confidence\"=>0.46040118}, {\"transcript\"=>\"test\"}, {\"transcript\"=>\"\u3066\u3059\u3068\"}, {\"transcript\"=>\"\u30c1\u30a7\u30b9\u30c8\"}], \"final\"=>true}], \"result_index\"=>0}\n\n\u3061\u3083\u3093\u3068\u8a8d\u8b58\u3057\u3066\u3044\u308b\uff01\uff01\u3055\u3059\u304c\u512a\u79c0\u3002\ntranscript\u3068\u4e00\u7dd2\u306b\u5165\u3063\u3066\u3044\u308bconfidence\u3068\u3044\u3046\u30ad\u30fc\u306e\u5024\u306f\u3001\u89e3\u6790\u7d50\u679c\u306e\u4fe1\u983c\u5ea6\u306e\u3088\u3046\u306a\u3082\u306e\u3060\u308d\u3046\u304b\u3002\n\n\u304a\u308f\u308a\nAPI\u306b\u95a2\u3059\u308b\u60c5\u5831\u304c\u3061\u3087\u3063\u3068\u5c11\u306a\u304f\u3066\u5206\u304b\u3089\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u306e\u3060\u304c\u3001\u4ee5\u4e0a\u304c\u8efd\u304f\u89e6\u3063\u3066\u307f\u305f\u7d50\u679c\u3067\u3059\u3002\nMac\u3067\u97f3\u58f0\u8a8d\u8b58\u3092\u3057\u3066\u307f\u305f\u3002\n\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb(wav)\u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u8a8d\u8b58\u3055\u305b\u308b\u3002\n\n# Google Speech API\n\u97f3\u58f0\u8a8d\u8b58\u306b\u306f\u3001[Speech API](https://www.google.com/intl/ja/chrome/demos/speech.html)\u3092\u5229\u7528\u3059\u308b\u3002\n\u30ea\u30f3\u30af\u5148\u3067\u8a66\u305b\u308b\u304c\u3001\u97f3\u58f0\u3092\u8a8d\u8b58\u3057\u3066\u6587\u5b57\u5217\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3002Chrome\u306e\u97f3\u58f0\u691c\u7d22\u3068\u304b\u306b\u5229\u7528\u3055\u308c\u3066\u308b\u3084\u3064\u3060\u3068\u601d\u3046\u3002\n\n\u65e5\u672c\u306egoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u3060\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u72b6\u614b\u3067\u306fAPI\u3092\u5229\u7528\u3067\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001Chromium Projects?\u306b\u30e1\u30f3\u30d0\u30fc\u767b\u9332\u3057\u3066\u304a\u304f\u3002\u305d\u3046\u3059\u308b\u3068\u3001Google Developers Console\u3067\u3001Speech API\u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306a\u308b\u306e\u3067\u3001API key\u306a\u3069\u3092\u53d6\u5f97\u3092\u3057\u3066\u304a\u304f\u3002\u8a73\u3057\u304f\u306f\u4ee5\u4e0b\u3002\nhttp://www.chromium.org/developers/how-tos/api-keys\n\n\u3061\u306a\u307f\u306b\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4e0a\u9650\u304c50\u56de/\u65e5 \u3060\u3057\u3001\u3061\u3083\u3093\u3068\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\uff08\u304a\u305d\u3089\u304f\uff09\u7121\u3044\u3057\u3001\u3042\u307e\u308a\u4f7f\u3044\u3084\u3059\u3044\u611f\u3058\u3067\u306f\u306a\u3044\u3002\u3002\u3002\n\n# \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n\u81ea\u5206\u306e\u58f0\u3092\u9332\u97f3\u3059\u308b\u305f\u3081\u306b\u3001\u5c11\u3057\u3060\u3051\u6e96\u5099\u3002Homebrew\u3067[SoX](http://arielvb.readthedocs.org/en/latest/docs/commandline/sox.html)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\n$ brew install sox\n```\n\n\u3053\u308c\u3067\u3001rec\u30b3\u30de\u30f3\u30c9\u3067\u9332\u97f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9\u306a\u3069\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f[\u3053\u3061\u3089](http://sox.sourceforge.net/sox.html)\u3002\n\n```\n$ rec --encoding signed-integer --bits 16 --channels 1 --rate 16000 test.wav\n```\n\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068\u9332\u97f3\u958b\u59cb\u3055\u308c\u308b\u306e\u3067\u3001\u300c\u30c6\u30b9\u30c8\u300d\u3068\u3067\u3082\u8a00\u3063\u3066\u4fdd\u5b58\u3002\n\n# Ruby\u3067\u8a8d\u8b58\u7528\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\u3042\u3068\u306f\u3001Speech API\u306b\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u8a8d\u8b58\u3055\u305b\u308b\u3002\n\n`https://www.google.com/speech-api/v2/recognize`\u306b\u5bfe\u3057\u3066\u3001POST\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3068\u3001\u97f3\u58f0\u3092\u8a8d\u8b58\u3057\u305f\u7d50\u679c\u304c\u30ec\u30b9\u30dd\u30f3\u30b9\u3067\u5e30\u3063\u3066\u304f\u308b\u3002\n\n\u4ee5\u4e0b\u304c\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u3002\n\n```rb:voice_recognition.rb\nrequire 'net/http'\nrequire 'JSON'\n\nuri = URI('https://www.google.com/speech-api/v2/recognize' \\\n  '?output=json&lang=ja&key=AIzaSyAD_5b6--4Jz0CXD5_sRoPa9ZjgJsYNK-M')\n\nhttps = Net::HTTP.new(uri.hostname, uri.port)\nhttps.use_ssl = true\n\nres = https.start do |h|\n  req = Net::HTTP::Post.new(uri)\n  req.body = File.read(ARGV[0])\n  req.content_type = \"audio/l16; rate=16000\"\n  req['User-Agent'] = \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.94 Safari/537.36\"\n  h.request(req)\nend\n\np res\n\nresult_data = res.body.force_encoding('UTF-8')\nresult_data.split(\"\\n\").each do |data|\n  p JSON.parse data\nend\n```\n\n\u51fa\u529b\u5f62\u5f0f(output)\u3084API key(key)\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u6307\u5b9a\u3057\u3001API\u306eURL\u306bPOST\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3002header\u3084body\u306b\u3082\u60c5\u5831\u3092\u5165\u308c\u3066\u3044\u308b\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3002\n\n```\n$ ruby voice_recognition.rb test.wav\n#<Net::HTTPOK 200 OK readbody=true>\n{\"result\"=>[]}\n{\"result\"=>[{\"alternative\"=>[{\"transcript\"=>\"\u30c6\u30b9\u30c8\", \"confidence\"=>0.46040118}, {\"transcript\"=>\"test\"}, {\"transcript\"=>\"\u3066\u3059\u3068\"}, {\"transcript\"=>\"\u30c1\u30a7\u30b9\u30c8\"}], \"final\"=>true}], \"result_index\"=>0}\n```\n\n\u3061\u3083\u3093\u3068\u8a8d\u8b58\u3057\u3066\u3044\u308b\uff01\uff01\u3055\u3059\u304c\u512a\u79c0\u3002\ntranscript\u3068\u4e00\u7dd2\u306b\u5165\u3063\u3066\u3044\u308bconfidence\u3068\u3044\u3046\u30ad\u30fc\u306e\u5024\u306f\u3001\u89e3\u6790\u7d50\u679c\u306e\u4fe1\u983c\u5ea6\u306e\u3088\u3046\u306a\u3082\u306e\u3060\u308d\u3046\u304b\u3002\n\n# \u304a\u308f\u308a\nAPI\u306b\u95a2\u3059\u308b\u60c5\u5831\u304c\u3061\u3087\u3063\u3068\u5c11\u306a\u304f\u3066\u5206\u304b\u3089\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u306e\u3060\u304c\u3001\u4ee5\u4e0a\u304c\u8efd\u304f\u89e6\u3063\u3066\u307f\u305f\u7d50\u679c\u3067\u3059\u3002\n", "tags": ["Ruby2.1.2", "googleapi-"]}