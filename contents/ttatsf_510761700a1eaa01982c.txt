{"context": "analogRead()\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001digitalRead()\u306b\u5fc5\u8981\u306a\u30c7\u30d0\u30a6\u30f3\u30b9\u3082\u540c\u3058\u3088\u3046\u306a\u3082\u306e\u306a\u306e\u3067\u3001\u3053\u3063\u3061\u3082\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002DebounceFunc for Arduino\n\u65e2\u306b\u3044\u304f\u3064\u304b\u6709\u7528\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u3066\u3001\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3068\u8a00\u3048\u306a\u304f\u3082\u306a\u3044\u3067\u3059\u304c\u3001\u3088\u308d\u3057\u3051\u308c\u3070\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002\n\n\u30e1\u30ea\u30c3\u30c8\n\n\u4f7f\u3044\u65b9\u304c\u7c21\u5358\n\u95a2\u6570\u306a\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u305f\u3089\u3042\u3068\u306f\u3072\u305f\u3059\u3089\u5024\u3092\u4e0e\u3048\u7d9a\u3051\u308b\u3060\u3051\u3067\u3059\u3002\u7c21\u5358\u3002\n\u4e00\u65b9\u3001\u30af\u30e9\u30b9\u30d9\u30fc\u30b9\u306e\u3082\u306e\u3060\u3068,\u307e\u305a\n\nButton\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(\u307e\u305f\u306f\u30d0\u30a6\u30f3\u30b9\u76e3\u8996\u7684\u306a\u3082\u306e)\u3092\u4f5c\u6210\n\u5bfe\u5fdc\u3059\u308b\u30d4\u30f3\u3092\u767b\u9332\n\u52d5\u4f5c\u30e2\u30fc\u30c9\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u30bf\u30a4\u30e0\u306a\u3069\u3092\u8a2d\u5b9a\n\n\u306a\u3069\u306e\u624b\u9806\u3092\u8e0f\u307e\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u4f7f\u3046\u3068\u304d\u3082\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u3092\u66f4\u65b0\u3057\u3066\u304b\u3089\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u3092\u5c0b\u306d\u308b\n\n\u3068\u3044\u3046\u3082\u306e\u304c\u591a\u3044\u3067\u3059\u3002\u624b\u9593\u304c\u591a\u3044\u3002\n\n\u30c7\u30e1\u30ea\u30c3\u30c8\n\n\u500b\u3005\u306e\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u72ec\u7acb\u3057\u3066\u3044\u3066\u3001\u540c\u4e00\u6027\u3001\u95a2\u9023\u6027\u3001\u76f8\u53cd\u6027\u306f\u4fdd\u8a3c\u3055\u308c\u306a\u3044\u3002\n\u4f8b\u3048\u3070\u3001\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\nIsLOW isLowA,isLowB;\nIsHIGH isHigh;\n\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3001\u305a\u3063\u3068\u540c\u3058\u30c7\u30fc\u30bf\u3092\u4e0e\u3048\u3066\u3044\u3066\u3082\u3001\nisLowA(data) == isLowB(data) , \nisLowA(data) != isHigh(data)\n\u304c\u5fc5\u305a\u771f\u306b\u306a\u308b\u3068\u306f\u8a00\u3048\u306a\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u307e\u305f\u306f\nIsFALLING isFalling;\nIsCHANGE isChange;\n\u304c\u3042\u3063\u305f\u3068\u3057\u3066\nisFalling(data)\u304c\u771f\u306e\u3068\u304d\u306bisChange(data)\u304c\u771f\u306b\u306a\u3063\u3066\u306a\u3044\u77ac\u9593\u304c\u3042\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f\u3001\u5185\u90e8\u3067\u95a2\u6570\u3092\u547c\u3093\u3060\u3068\u304d\u306e\u6642\u523b\u3092\u8a08\u7b97\u306b\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u5834\u9762\u3067\u306f\u6642\u523b\u306e\u9055\u3044\u304c\u7d50\u679c\u306b\u51fa\u3066\u3057\u307e\u3046\u304b\u3089\u3067\u3059\u3002\n\u3060\u3044\u305f\u3044\u306f\u671f\u5f85\u3057\u305f\u901a\u308a\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u304c\u53b3\u5bc6\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5fae\u5999\u306a\u6642\u9593\u5dee\u304c\u3067\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4f7f\u3044\u65b9\nZIP\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30b9\u30b1\u30c3\u30c1>\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9>.ZIP\u5f62\u5f0f\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb... \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u4e94\u3064\u306e\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30af\u30e9\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n\nIsFALLING :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cFALLING(HIGH->LOW\u306b\u5909\u5316)\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\nIsRISING :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cRISING(LOW->HIGH\u306b\u5909\u5316)\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\nIsCHANGE :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cCHANGE(FALLING\u307e\u305f\u306fRISING)\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\nIsLOW :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cLOW\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\nIsHIGH :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cHIGH\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\n\n\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u305f\u3089\u95a2\u6570\u3068\u3057\u3066\u30c7\u30fc\u30bf\u3092\u5f15\u6570\u3067\u4e0e\u3048\u307e\u3059\u3002\n#include <DebounceFunc.h>       //\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\n\nIsFALLING isFalling;  //\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n\nconst int IN_PIN = 2;       //\u30c7\u30b8\u30bf\u30eb\u5165\u529b\u306b\u4f7f\u7528\u3059\u308b\u30d4\u30f3\u756a\u53f7\u3092\u8a2d\u5b9a\n\nvoid setup(){\n  pinMode(IN_PIN,INPUT_PULLUP); //\u5165\u529b\u30d4\u30f3\u3092\u30d7\u30eb\u30a2\u30c3\u30d7\u5165\u529b\u306b\u8a2d\u5b9a\n}\nvoid loop(){\n  const int RAW_DATA = digitalRead(IN_PIN); //\u5165\u529b\u30d4\u30f3\u306e\u5024\u3092\u8aad\u307f\u8fbc\u3093\u3067RAW_DATA\u3092\u751f\u6210\n  if (isFalling(RAW_DATA)) {                //\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bRAW_DATA\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\n                                            //\u72b6\u614b\u304c\u76ee\u7684\u306e\u72b6\u614b(\u3053\u306e\u5834\u5408\u306fFALLING)\u306a\u3089\n    //...\u305d\u306e\u5834\u5408\u306b\u3057\u305f\u3044\u51e6\u7406\u3092\u3053\u3053\u306b\u66f8\u304d\u307e\u3059\u3002\n    //...\n  }\n\n  }\n  delay(1); //delay\u5024\u306f\u671b\u307f\u306e\u52d5\u4f5c\u306b\u306a\u308b\u3088\u3046\u8abf\u6574\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n  //\u591a\u304f\u3059\u308b\u3068\u52d5\u4f5c\u304c\u5b89\u5b9a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u4e00\u65b9\u3001\u52d5\u4f5c\u304c\u304a\u304f\u308c\u304c\u3061\u306b\u306a\u308a\u30c7\u30d0\u30a6\u30f3\u30b9\u306e\u6642\u9593\u306e\u89e3\u50cf\u5ea6\u306f\u7c97\u304f\u306a\u308a\u307e\u3059\u3002\n}\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c7\u30d0\u30a6\u30f3\u30b9\u30bf\u30a4\u30e0\u306f30ms\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u5358\u4f53\u306e\u5834\u5408\u306fIsFALLING foo(5);\n\u914d\u5217\u306e\u5834\u5408\u306fIsFALLING bar[3]={10,7,21};\n\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u4ed6\u306e\u5024\u3092\u6307\u5b9a\u3057\u3066\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f7f\u7528\u4f8b\n\u81ea\u5206\u304c\u3088\u304f\u4f7f\u3046Ableton Live\u7528\u306e\u30c8\u30e9\u30f3\u30b9\u30dd\u30fc\u30c8\u306e\u30b9\u30b1\u30c3\u30c1\u3067\u3059\u3002MIDIUSB\u304c\u4f7f\u3048\u308b32U4\u7528\u3067\u3059\u3002\n\u56db\u3064\u306e\u30b9\u30a4\u30c3\u30c1\u304c\u305d\u308c\u305e\u308c\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u305d\u308c\u3092scene_launch/stop/next/prev\u306b\u30a2\u30b5\u30a4\u30f3\u3057\u3066\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u5358\u7d14\u306a\u3082\u306e\u3067\u3059\u304c\u3001\u52dd\u624b\u306b\u30b7\u30fc\u30f3\u304c\u9032\u3093\u3060\u3089\u56f0\u308b\u306e\u3067\u30c7\u30d0\u30a6\u30f3\u30b9\u304c\u5fc5\u9808\u3067\u3059\u3002\n#include <MIDIUSB.h>\n#include <DebounceFunc.h>       //\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\nconst int LEDPIN = 13;          //LED\u70b9\u706f\u7528\nconst int INPIN[] = {3,4,5,6};  //\u4f7f\u7528\u3059\u308b\u5165\u529b\u30d4\u30f3\u756a\u53f7\nconst int CC_NUM[] = {25,26,27,28}; //\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u30ca\u30f3\u30d0\u30fc\n\n//\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3059\u308b\nIsFALLING isFalling[4]; \nIsRISING isRising[4];\n\nvoid setup() {\n  for (int i; i < 4; i++) {         //\u30d4\u30f3\u3092\u30d7\u30eb\u30a2\u30c3\u30d7\u5165\u529b\u306b\u8a2d\u5b9a\n    pinMode(INPIN[i],INPUT_PULLUP);\n  }\n  pinMode(LEDPIN,OUTPUT);           //LEDPIN\u3092\u51fa\u529b\u306b\u8a2d\u5b9a\n  Serial.begin(115200);         //MIDIUSB\u306e\u305f\u3081\u306eSerial\u958b\u59cb\n\n}\n\nvoid loop() {\n  for (int i = 0;i < 4; i++) {\n    const int RAW_DATA = digitalRead(INPIN[i]); //\u5165\u529b\u30d4\u30f3\u306e\u5024\u3092\u8aad\u307f\u8fbc\u3093\u3067RAW_DATA\u3092\u751f\u6210\n    if (isFalling[i](RAW_DATA)) {       //\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bRAW_DATA\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3059\u308b\n                                        //\u30c7\u30d0\u30a6\u30f3\u30b9\u3057\u305f\u30c7\u30fc\u30bf\u304c HIGH -> LOW \u306b\u306a\u3063\u305f\u3089\n      controlChange(0,CC_NUM[i],127);   //\u5024\u304c 127 \u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u308b\n      MidiUSB.flush();                  //MIDIUSB\u306b\u51fa\u529b\n      digitalWrite(LEDPIN,HIGH);        //LED\u70b9\u706f\n    }\n    if (isRising[i](RAW_DATA)) {        //\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bRAW_DATA\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3059\u308b\n                                        //\u30c7\u30d0\u30a6\u30f3\u30b9\u3057\u305f\u30c7\u30fc\u30bf\u304c LOW -> HIGH \u306b\u306a\u3063\u305f\u3089\n      controlChange(0,CC_NUM[i],0);     //\u5024\u304c 0 \u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u308b\n      MidiUSB.flush();                  //MIDIUSB\u306b\u51fa\u529b\n      digitalWrite(LEDPIN,LOW);         //LED\u6d88\u706f\n    }\n  }\n  delay(1);\n}\n\n//MIDIUSB\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u308b(MIDIUSB\u306e\u4f8b\u304b\u3089\u30b3\u30d4\u30da)\nvoid controlChange(byte channel, byte control, byte value) {\n  midiEventPacket_t event = {0x0B, 0xB0 | channel, control, value};\n  MidiUSB.sendMIDI(event);\n}\n\n[analogRead()\u7528\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u3066\u307f\u305f](http://qiita.com/ttatsf/items/bc222163ad7b83a1c3d0)\u306e\u3067\u3059\u304c\u3001digitalRead()\u306b\u5fc5\u8981\u306a\u30c7\u30d0\u30a6\u30f3\u30b9\u3082\u540c\u3058\u3088\u3046\u306a\u3082\u306e\u306a\u306e\u3067\u3001\u3053\u3063\u3061\u3082\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002[DebounceFunc for Arduino](https://github.com/ttatsf/DebounceFunc)\n\u65e2\u306b\u3044\u304f\u3064\u304b\u6709\u7528\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u3066\u3001\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3068\u8a00\u3048\u306a\u304f\u3082\u306a\u3044\u3067\u3059\u304c\u3001\u3088\u308d\u3057\u3051\u308c\u3070\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002\n#\u30e1\u30ea\u30c3\u30c8\n##\u4f7f\u3044\u65b9\u304c\u7c21\u5358\n\u95a2\u6570\u306a\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u305f\u3089\u3042\u3068\u306f\u3072\u305f\u3059\u3089\u5024\u3092\u4e0e\u3048\u7d9a\u3051\u308b\u3060\u3051\u3067\u3059\u3002\u7c21\u5358\u3002\n\n\u4e00\u65b9\u3001\u30af\u30e9\u30b9\u30d9\u30fc\u30b9\u306e\u3082\u306e\u3060\u3068,\u307e\u305a\n\n+ Button\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(\u307e\u305f\u306f\u30d0\u30a6\u30f3\u30b9\u76e3\u8996\u7684\u306a\u3082\u306e)\u3092\u4f5c\u6210\n+ \u5bfe\u5fdc\u3059\u308b\u30d4\u30f3\u3092\u767b\u9332\n+ \u52d5\u4f5c\u30e2\u30fc\u30c9\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u30bf\u30a4\u30e0\u306a\u3069\u3092\u8a2d\u5b9a\n\n\u306a\u3069\u306e\u624b\u9806\u3092\u8e0f\u307e\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u4f7f\u3046\u3068\u304d\u3082\n\n+ \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u3092\u66f4\u65b0\u3057\u3066\u304b\u3089\n+ \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u3092\u5c0b\u306d\u308b\n\n\u3068\u3044\u3046\u3082\u306e\u304c\u591a\u3044\u3067\u3059\u3002\u624b\u9593\u304c\u591a\u3044\u3002\n#\u30c7\u30e1\u30ea\u30c3\u30c8\n##\u500b\u3005\u306e\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u72ec\u7acb\u3057\u3066\u3044\u3066\u3001\u540c\u4e00\u6027\u3001\u95a2\u9023\u6027\u3001\u76f8\u53cd\u6027\u306f\u4fdd\u8a3c\u3055\u308c\u306a\u3044\u3002\n\n\u4f8b\u3048\u3070\u3001\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8```\nIsLOW isLowA,isLowB;\nIsHIGH isHigh;\n```\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3001\u305a\u3063\u3068\u540c\u3058\u30c7\u30fc\u30bf\u3092\u4e0e\u3048\u3066\u3044\u3066\u3082\u3001```\nisLowA(data) == isLowB(data) , \nisLowA(data) != isHigh(data)\n```\u304c\u5fc5\u305a\u771f\u306b\u306a\u308b\u3068\u306f\u8a00\u3048\u306a\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u307e\u305f\u306f```\nIsFALLING isFalling;\nIsCHANGE isChange;\n```\u304c\u3042\u3063\u305f\u3068\u3057\u3066```\nisFalling(data)```\u304c\u771f\u306e\u3068\u304d\u306b```isChange(data)```\u304c\u771f\u306b\u306a\u3063\u3066\u306a\u3044\u77ac\u9593\u304c\u3042\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f\u3001\u5185\u90e8\u3067\u95a2\u6570\u3092\u547c\u3093\u3060\u3068\u304d\u306e\u6642\u523b\u3092\u8a08\u7b97\u306b\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u5834\u9762\u3067\u306f\u6642\u523b\u306e\u9055\u3044\u304c\u7d50\u679c\u306b\u51fa\u3066\u3057\u307e\u3046\u304b\u3089\u3067\u3059\u3002\n\u3060\u3044\u305f\u3044\u306f\u671f\u5f85\u3057\u305f\u901a\u308a\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u304c\u53b3\u5bc6\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5fae\u5999\u306a\u6642\u9593\u5dee\u304c\u3067\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n#\u4f7f\u3044\u65b9\n[ZIP\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](https://github.com/ttatsf/DebounceFunc/archive/master.zip)\u3057\u3066\u3001[\u30b9\u30b1\u30c3\u30c1>\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9>.ZIP\u5f62\u5f0f\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb... \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](https://www.arduino.cc/en/Guide/Libraries)\u3057\u307e\u3059\u3002\n\n\u4e94\u3064\u306e\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30af\u30e9\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n\n+ IsFALLING :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cFALLING(HIGH->LOW\u306b\u5909\u5316)\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\n+ IsRISING :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cRISING(LOW->HIGH\u306b\u5909\u5316)\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\n+ IsCHANGE :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cCHANGE(FALLING\u307e\u305f\u306fRISING)\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\n+ IsLOW :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cLOW\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\n+ IsHIGH :  \u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\u72b6\u614b\u304cHIGH\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\n\n\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u305f\u3089\u95a2\u6570\u3068\u3057\u3066\u30c7\u30fc\u30bf\u3092\u5f15\u6570\u3067\u4e0e\u3048\u307e\u3059\u3002\n\n```c++\n#include <DebounceFunc.h>\t\t//\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\n\nIsFALLING isFalling;  //\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n\nconst int IN_PIN = 2;\t\t//\u30c7\u30b8\u30bf\u30eb\u5165\u529b\u306b\u4f7f\u7528\u3059\u308b\u30d4\u30f3\u756a\u53f7\u3092\u8a2d\u5b9a\n\nvoid setup(){\n  pinMode(IN_PIN,INPUT_PULLUP);\t//\u5165\u529b\u30d4\u30f3\u3092\u30d7\u30eb\u30a2\u30c3\u30d7\u5165\u529b\u306b\u8a2d\u5b9a\n}\nvoid loop(){\n  const int RAW_DATA = digitalRead(IN_PIN);\t//\u5165\u529b\u30d4\u30f3\u306e\u5024\u3092\u8aad\u307f\u8fbc\u3093\u3067RAW_DATA\u3092\u751f\u6210\n  if (isFalling(RAW_DATA)) {\t\t\t\t//\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bRAW_DATA\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3057\u3001\n  \t\t\t\t\t\t\t\t\t\t\t//\u72b6\u614b\u304c\u76ee\u7684\u306e\u72b6\u614b(\u3053\u306e\u5834\u5408\u306fFALLING)\u306a\u3089\n    //...\u305d\u306e\u5834\u5408\u306b\u3057\u305f\u3044\u51e6\u7406\u3092\u3053\u3053\u306b\u66f8\u304d\u307e\u3059\u3002\n    //...\n  }\n\n  }\n  delay(1);\t//delay\u5024\u306f\u671b\u307f\u306e\u52d5\u4f5c\u306b\u306a\u308b\u3088\u3046\u8abf\u6574\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n  //\u591a\u304f\u3059\u308b\u3068\u52d5\u4f5c\u304c\u5b89\u5b9a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u4e00\u65b9\u3001\u52d5\u4f5c\u304c\u304a\u304f\u308c\u304c\u3061\u306b\u306a\u308a\u30c7\u30d0\u30a6\u30f3\u30b9\u306e\u6642\u9593\u306e\u89e3\u50cf\u5ea6\u306f\u7c97\u304f\u306a\u308a\u307e\u3059\u3002\n}\n```\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c7\u30d0\u30a6\u30f3\u30b9\u30bf\u30a4\u30e0\u306f30ms\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u5358\u4f53\u306e\u5834\u5408\u306f```IsFALLING foo(5);```\n\u914d\u5217\u306e\u5834\u5408\u306f```IsFALLING bar[3]={10,7,21};```\n\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u4ed6\u306e\u5024\u3092\u6307\u5b9a\u3057\u3066\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n#\u4f7f\u7528\u4f8b\n\u81ea\u5206\u304c\u3088\u304f\u4f7f\u3046Ableton Live\u7528\u306e\u30c8\u30e9\u30f3\u30b9\u30dd\u30fc\u30c8\u306e\u30b9\u30b1\u30c3\u30c1\u3067\u3059\u3002MIDIUSB\u304c\u4f7f\u3048\u308b32U4\u7528\u3067\u3059\u3002\n\u56db\u3064\u306e\u30b9\u30a4\u30c3\u30c1\u304c\u305d\u308c\u305e\u308c\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u305d\u308c\u3092scene_launch/stop/next/prev\u306b\u30a2\u30b5\u30a4\u30f3\u3057\u3066\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\u5358\u7d14\u306a\u3082\u306e\u3067\u3059\u304c\u3001\u52dd\u624b\u306b\u30b7\u30fc\u30f3\u304c\u9032\u3093\u3060\u3089\u56f0\u308b\u306e\u3067\u30c7\u30d0\u30a6\u30f3\u30b9\u304c\u5fc5\u9808\u3067\u3059\u3002\n\n\n```c++\n#include <MIDIUSB.h>\n#include <DebounceFunc.h>\t\t//\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3080\nconst int LEDPIN = 13;\t\t\t//LED\u70b9\u706f\u7528\nconst int INPIN[] = {3,4,5,6};\t//\u4f7f\u7528\u3059\u308b\u5165\u529b\u30d4\u30f3\u756a\u53f7\nconst int CC_NUM[] = {25,26,27,28};\t//\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u30ca\u30f3\u30d0\u30fc\n\n//\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3059\u308b\nIsFALLING isFalling[4];\t\nIsRISING isRising[4];\n\nvoid setup() {\n  for (int i; i < 4; i++) {\t\t\t//\u30d4\u30f3\u3092\u30d7\u30eb\u30a2\u30c3\u30d7\u5165\u529b\u306b\u8a2d\u5b9a\n    pinMode(INPIN[i],INPUT_PULLUP);\n  }\n  pinMode(LEDPIN,OUTPUT);\t\t\t//LEDPIN\u3092\u51fa\u529b\u306b\u8a2d\u5b9a\n  Serial.begin(115200);\t\t\t//MIDIUSB\u306e\u305f\u3081\u306eSerial\u958b\u59cb\n  \n}\n\nvoid loop() {\n  for (int i = 0;i < 4; i++) {\n    const int RAW_DATA = digitalRead(INPIN[i]);\t//\u5165\u529b\u30d4\u30f3\u306e\u5024\u3092\u8aad\u307f\u8fbc\u3093\u3067RAW_DATA\u3092\u751f\u6210\n    if (isFalling[i](RAW_DATA)) {\t\t//\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bRAW_DATA\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3059\u308b\n    \t\t\t\t\t\t\t\t\t//\u30c7\u30d0\u30a6\u30f3\u30b9\u3057\u305f\u30c7\u30fc\u30bf\u304c HIGH -> LOW \u306b\u306a\u3063\u305f\u3089\n      controlChange(0,CC_NUM[i],127);\t//\u5024\u304c 127 \u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u308b\n      MidiUSB.flush();\t\t\t\t\t//MIDIUSB\u306b\u51fa\u529b\n      digitalWrite(LEDPIN,HIGH);\t\t//LED\u70b9\u706f\n    }\n    if (isRising[i](RAW_DATA)) {\t\t//\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bRAW_DATA\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c7\u30d0\u30a6\u30f3\u30b9\u3092\u8a08\u7b97\u3059\u308b\n    \t\t\t\t\t\t\t\t\t//\u30c7\u30d0\u30a6\u30f3\u30b9\u3057\u305f\u30c7\u30fc\u30bf\u304c LOW -> HIGH \u306b\u306a\u3063\u305f\u3089\n      controlChange(0,CC_NUM[i],0);\t\t//\u5024\u304c 0 \u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u308b\n      MidiUSB.flush();\t\t\t\t\t//MIDIUSB\u306b\u51fa\u529b\n      digitalWrite(LEDPIN,LOW);\t\t\t//LED\u6d88\u706f\n    }\n  }\n  delay(1);\n}\n\n//MIDIUSB\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u308b(MIDIUSB\u306e\u4f8b\u304b\u3089\u30b3\u30d4\u30da)\nvoid controlChange(byte channel, byte control, byte value) {\n  midiEventPacket_t event = {0x0B, 0xB0 | channel, control, value};\n  MidiUSB.sendMIDI(event);\n}\n```\n\n\n\n", "tags": ["C++", "MIDI", "Arduino", "\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0"]}