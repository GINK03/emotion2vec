{"context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\uff1as3fs\u3088\u308a\u3082\u9ad8\u901f\u306b\u4f7f\u3048\u308bgoofys\u3092\u8a66\u3057\u3066\u307f\u305f[\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9]\nDevelopers.IO\u306e\u8a18\u4e8b\u3092\u305d\u306e\u307e\u307e\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4f7f\u3063\u3066\u307f\u3066s3fs\u3068\u306e\u901f\u5ea6\u5dee\u304c\u5c0b\u5e38\u3058\u3083\u306a\u3044\u306e\u3067\u3053\u308c\u304a\u3059\u3059\u3081\u3067\u3059\u3088\n\n\n\u5927\u4e8b\u306a\u3053\u3068\n\nIAM\u30ed\u30fc\u30eb\u3092\u3061\u3083\u3093\u3068\u632f\u308a\u307e\u3057\u3087\u3046\u306d\uff01\nIAM\u30ed\u30fc\u30eb\u306f\u4ee5\u524d\u66f8\u3044\u305f\u3053\u308c\u306e\u524d\u534a\u306b\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3042\uff01S3\u306e\u30d0\u30b1\u30c3\u30c8\u3082\u6e96\u5099\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u306d\uff01\n\u30ad\u30fc\u30ef\u30fc\u30c9 [ S3\u3000\u30de\u30a6\u30f3\u30c8\u3000EC2 ]\n\n\nSFTP\n\u540c\u3058\u3053\u3068\u3084\u3063\u3066\u3082\u30fb\u30fb\u30fb\u306a\u306e\u3067\u30b5\u30e0\u30b7\u30f3\u30b0\u306b\u3085\u30fc\u3002\nSFTP\u3067\u30d5\u30a1\u30a4\u30eb\u9001\u308c\u308b\u3088\u3046\u306b\u30e6\u30fc\u30b6\u30fc\u4f5c\u3063\u3066\u307f\u3088\u3046\uff01\n\n\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0\u3068\u8a2d\u5b9a\nsudo useradd ec2-sftpuser\nsudo passwd ec2-sftpuser\nvisudo\nsudo su ec2-sftpuser\ncd ~\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\nfutaenoKIWAMIaaaa\n\n\u4f5c\u696d\u30ed\u30b0\n[ec2-user@ip- ~]$ sudo useradd ec2-sftpuser\n[ec2-user@ip-1 ~]$ sudo passwd ec2-sftpuser\n\u30e6\u30fc\u30b6\u30fc ec2-sftpuser \u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3002\n\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9:futaenoKIWAMIaaaa\n\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:futaenoKIWAMIaaaa\npasswd: \u3059\u3079\u3066\u306e\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u304c\u6b63\u3057\u304f\u66f4\u65b0\u3067\u304d\u307e\u3057\u305f\u3002\n[ec2-user@ ~]$ sudo visudo\n\n-----\n\n## Allow root to run any commands anywhere\nroot    ALL=(ALL)       ALL\nec2-sftpuser    ALL=(ALL)    ALL\u3000\u3000\u21901\u884c\u8ffd\u52a0\n\n-----\n[ec2-user@ip ~]$ sudo su ec2-sftpuser\n[ec2-sftpuser@ip ec2-user]$\n[ec2-sftpuser@ip ec2-user]$ cd ~ \n[ec2-sftpuser@ip ~]$ pwd\n/home/ec2-sftpuser\n\n\n\n\ngoofys\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u304d\u307e\u3059\n\ngoofys\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum update -y\nsudo yum install golang fuse -y\nexport GOPATH=$HOME/go\ngo get github.com/kahing/goofys\ngo install github.com/kahing/goofys\n\n\n\n\n\u4f5c\u696d\u30ed\u30b0\n[ec2-sftpuser@ip ~]$ sudo yum update -y\n[ec2-sftpuser@ip ~]$ export GOPATH=$HOME/go  \u2190\u3053\u308c\u30bb\u30c3\u30c8\u3057\u306a\u3044\u3068\u52d5\u304d\u307e\u305b\u3093\u3002\n[ec2-sftpuser@ip ~]$go get github.com/kahing/goofys\n[ec2-sftpuser@ip ~]$go install github.com/kahing/goofys\n\n\n\n\nS3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\uff01\n\n\u5909\u6570\u30bb\u30c3\u30c8\nS3_MOUNT_NAME='s3_goo'\nS3_BUCKET_NAME='<\u30d0\u30b1\u30c3\u30c8\u540d>'\n\n\n\n\u30de\u30a6\u30f3\u30c8\nmkdir ${S3_MOUNT_NAME}\n/home/ec2-sftpuser/go/bin/goofys ${S3_BUCKET_NAME} ${S3_MOUNT_NAME}\n\n\n\n\n\u4f5c\u696d\u30ed\u30b0\n[ec2-sftpuser@ip ~]$ pwd\n/home/ec2-sftpuser\n[ec2-sftpuser@ip ~]$ ls\ngo\n[ec2-sftpuser@ ~]$ mkdir ${S3_MOUNT_NAME}\n[ec2-sftpuser@ip-10-0-2-125 ~]$ ls\nS3_MOUNT_NAME  go\n[ec2-sftpuser@ip-10-0-2-125 ~]$ ls go\nbin  pkg  src\n[ec2-sftpuser@ip ~]$ ls go/bin\ngoofys \u2190\u3053\u3053\u672c\u4f53\u306d\n[ec2-sftpuser@ip ~]$ /home/ec2-sftpuser/go/bin/goofys ${S3_BUCKET_NAME} ${S3_MOUNT_NAME}\n[ec2-sftpuser@ip ~]$ df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9        \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/xvda1            7.8G  1.6G  6.1G   21% /\ndevtmpfs              489M   56K  489M    1% /dev\ntmpfs                 498M     0  498M    0% /dev/shm\n${S3_BUCKET_NAME}   1.0P     0  1.0P    0% /home/ec2-sftpuser/s3_goo\u3000\u2190\u307b\u3089\uff01\u3067\u304d\u305f\uff01\n\n\n\n\n\u30b3\u30d4\u30da\u7528\u306b\u307e\u3068\u3081\u305f\u3088\uff01\n\n\u5909\u6570\u3060\u3051\u30bb\u30c3\u30c8\u3057\u3066\u306d\nsudo yum update -y\nsudo yum install golang fuse -y\nexport GOPATH=$HOME/go\ngo get github.com/kahing/goofys\ngo install github.com/kahing/goofys\nS3_MOUNT_NAME='<\u30de\u30a6\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d>'\nS3_BUCKET_NAME='<S3\u30d0\u30b1\u30c3\u30c8\u540d>'\nmkdir ${S3_MOUNT_NAME}\n${GOPATH}/bin/goofys ${S3_BUCKET_NAME} ${S3_MOUNT_NAME}\n\n\n\n\n\u3064\u3044\u3067\u306bs3fs\u8efd\u304f\u66f8\u304d\u76f4\u3057\u305f\u3088\nEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bS3\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u4f7f\u7528\u3059\u308b\uff08IAM Role ver)\u3082\u30b3\u30d4\u30da\u3067\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3088\n\n\u5909\u6570\u30bb\u30c3\u30c8\nBUCKET_NAME='<S3\u306e\u30d0\u30b1\u30c3\u30c8\u540d>'\nS3_MOUNT_NAME='<\u30de\u30a6\u30f3\u30c8\u5148>'\nROL_NAME='<\u30ed\u30fc\u30eb\u540d>'\n\n\n\n\u8a2d\u5b9a\nsudo su\nyum install automake gcc-c++ fuse fuse-devel libcurl-devel libxml2-devel openssl-devel -y\ngit clone https://github.com/s3fs-fuse/s3fs-fuse.git\n./autogen.sh\n./configure --prefix=/usr/local\nmake\nsudo make install\ncd ~\nmkdir ~/s3fs\nchmod 600 s3fs\nsudo vi /etc/fuse.conf\n /usr/local/bin/s3fs ${BUCKET_NAME} ${S3_MOUNT_NAME} -o rw,allow_other,uid=500,gid=500,iam_role=\"${ROL_NAME}\"\n\n\n\n\u4f5c\u696d\u30ed\u30b0\n[root@ip ec2-user]# ls\ns3fs-fuse\n[root@ip ec2-user]#cd s3fs-fuse\n[root@ip ec2-user]#./autogen.sh\n[root@ip ec2-user]#./configure --prefix=/usr/local\n[root@ip ec2-user]#make\n\n===\u4e0b\u306e\u30a8\u30e9\u30fc\uff1f\u304c\u51fa\u307e\u3059\u304c\u3001\u7121\u8996\u3057\u3066\u3068\u308a\u3042\u3048\u305a\u5927\u4e08\u592b===\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/src' \u304b\u3089\u51fa\u307e\u3059\nMaking all in test\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/test' \u306b\u5165\u308a\u307e\u3059\nmake[2]: `all' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/test' \u304b\u3089\u51fa\u307e\u3059\nMaking all in doc\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u306b\u5165\u308a\u307e\u3059\nmake[2]: `all' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u304b\u3089\u51fa\u307e\u3059\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u306b\u5165\u308a\u307e\u3059\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\n\n[root@ip ec2-user]#sudo make install\n\n===\u4e0b\u306e\u30a8\u30e9\u30fc\uff1f\u304c\u51fa\u307e\u3059\u304c\u3001\u7121\u8996\u3057\u3066\u3068\u308a\u3042\u3048\u305a\u5927\u4e08\u592b===\n\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u306b\u5165\u308a\u307e\u3059\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u306b\u5165\u308a\u307e\u3059\nmake[2]: `install-exec-am' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: `install-data-am' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\n\n[root@ip ec2-user]#cd ~\n[root@ip ec2-user]#mkdir s3fs\n[root@ip ec2-user]#sudo chmod 600 s3fs\n[root@ip ec2-user]#sudo vi /etc/fuse.conf\n# mount_max = 1000\n user_allow_other \u2190\uff03\u3092\u5916\u3059\n[root@ip ec2-user]# ls /usr/local/bin\ns3fs\n[root@ip ec2-user]#id ec2-user\nuid=500(ec2-user) gid=500(ec2-user) groups=500(ec2-user),10(wheel)\n[root@ip ec2-user]# /usr/local/bin/s3fs ${BUCKET_NAME} ${S3_MOUNT_NAME} -o rw,allow_other,uid=500,gid=500,iam_role=\"${ROL_NAME}\"\n[root@ip ec2-user]# df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9   \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/xvda1       7.8G  1.7G  6.1G   22% /\ndevtmpfs         489M   56K  489M    1% /dev\ntmpfs            498M     0  498M    0% /dev/shm\ns3fs             256T     0  256T    0% /home/ec2-user/s3fs\u3000\u2190s3fs\u3067\u306e\u30de\u30a6\u30f3\u30c8\n\n\n\n\u65e9\u3044\u3067\u3059\u3002goofys\n\uff11GB\u306e\u5199\u771f\u3092\u30a2\u30c3\u30d7\u3057\u3066\u6bd4\u8f03\u3057\u307e\u3057\u305f\u304c s3fs:goofys=1.5MB/sec:3.5MB/sec \u3068\u3001\u660e\u3089\u304b\u306b\u65e9\u3044\u3067\u3059\u3002\n###\u53c2\u8003\uff1a[s3fs\u3088\u308a\u3082\u9ad8\u901f\u306b\u4f7f\u3048\u308bgoofys\u3092\u8a66\u3057\u3066\u307f\u305f](http://dev.classmethod.jp/cloud/aws/how-to-use-s3fs-goofys/)[\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9]\nDevelopers.IO\u306e\u8a18\u4e8b\u3092\u305d\u306e\u307e\u307e\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4f7f\u3063\u3066\u307f\u3066s3fs\u3068\u306e\u901f\u5ea6\u5dee\u304c\u5c0b\u5e38\u3058\u3083\u306a\u3044\u306e\u3067\u3053\u308c\u304a\u3059\u3059\u3081\u3067\u3059\u3088\n\n---\n\n###\u5927\u4e8b\u306a\u3053\u3068\n####IAM\u30ed\u30fc\u30eb\u3092\u3061\u3083\u3093\u3068\u632f\u308a\u307e\u3057\u3087\u3046\u306d\uff01\nIAM\u30ed\u30fc\u30eb\u306f\u4ee5\u524d\u66f8\u3044\u305f[\u3053\u308c](http://qiita.com/Yuki_BB3/items/9f5eb233b152be1c4bc9)\u306e\u524d\u534a\u306b\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3042\uff01S3\u306e\u30d0\u30b1\u30c3\u30c8\u3082\u6e96\u5099\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u306d\uff01\n\u30ad\u30fc\u30ef\u30fc\u30c9 [ S3\u3000\u30de\u30a6\u30f3\u30c8\u3000EC2 ]\n\n---\n###SFTP\n\u540c\u3058\u3053\u3068\u3084\u3063\u3066\u3082\u30fb\u30fb\u30fb\u306a\u306e\u3067\u30b5\u30e0\u30b7\u30f3\u30b0\u306b\u3085\u30fc\u3002\nSFTP\u3067\u30d5\u30a1\u30a4\u30eb\u9001\u308c\u308b\u3088\u3046\u306b\u30e6\u30fc\u30b6\u30fc\u4f5c\u3063\u3066\u307f\u3088\u3046\uff01\n\n```bash:\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0\u3068\u8a2d\u5b9a\nsudo useradd ec2-sftpuser\nsudo passwd ec2-sftpuser\nvisudo\nsudo su ec2-sftpuser\ncd ~\n```\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\n__futaenoKIWAMIaaaa__\n\n\n```:\u4f5c\u696d\u30ed\u30b0\n[ec2-user@ip- ~]$ sudo useradd ec2-sftpuser\n[ec2-user@ip-1 ~]$ sudo passwd ec2-sftpuser\n\u30e6\u30fc\u30b6\u30fc ec2-sftpuser \u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3002\n\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9:futaenoKIWAMIaaaa\n\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:futaenoKIWAMIaaaa\npasswd: \u3059\u3079\u3066\u306e\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u304c\u6b63\u3057\u304f\u66f4\u65b0\u3067\u304d\u307e\u3057\u305f\u3002\n[ec2-user@ ~]$ sudo visudo\n\n-----\n\n## Allow root to run any commands anywhere\nroot    ALL=(ALL)       ALL\nec2-sftpuser    ALL=(ALL)    ALL\u3000\u3000\u21901\u884c\u8ffd\u52a0\n\n-----\n[ec2-user@ip ~]$ sudo su ec2-sftpuser\n[ec2-sftpuser@ip ec2-user]$\n[ec2-sftpuser@ip ec2-user]$ cd ~ \n[ec2-sftpuser@ip ~]$ pwd\n/home/ec2-sftpuser\n```\n---\n###goofys\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u304d\u307e\u3059\n\n```bash:goofys\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum update -y\nsudo yum install golang fuse -y\nexport GOPATH=$HOME/go\ngo get github.com/kahing/goofys\ngo install github.com/kahing/goofys\n\n```\n\n\n```bash:\u4f5c\u696d\u30ed\u30b0\n[ec2-sftpuser@ip ~]$ sudo yum update -y\n[ec2-sftpuser@ip ~]$ export GOPATH=$HOME/go  \u2190\u3053\u308c\u30bb\u30c3\u30c8\u3057\u306a\u3044\u3068\u52d5\u304d\u307e\u305b\u3093\u3002\n[ec2-sftpuser@ip ~]$go get github.com/kahing/goofys\n[ec2-sftpuser@ip ~]$go install github.com/kahing/goofys\n```\n\n---\n###S3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\uff01\n\n```bash:\u5909\u6570\u30bb\u30c3\u30c8\nS3_MOUNT_NAME='s3_goo'\nS3_BUCKET_NAME='<\u30d0\u30b1\u30c3\u30c8\u540d>'\n```\n```bash:\u30de\u30a6\u30f3\u30c8\nmkdir ${S3_MOUNT_NAME}\n/home/ec2-sftpuser/go/bin/goofys ${S3_BUCKET_NAME} ${S3_MOUNT_NAME}\n\n```\n\n```bash:\u4f5c\u696d\u30ed\u30b0\n[ec2-sftpuser@ip ~]$ pwd\n/home/ec2-sftpuser\n[ec2-sftpuser@ip ~]$ ls\ngo\n[ec2-sftpuser@ ~]$ mkdir ${S3_MOUNT_NAME}\n[ec2-sftpuser@ip-10-0-2-125 ~]$ ls\nS3_MOUNT_NAME  go\n[ec2-sftpuser@ip-10-0-2-125 ~]$ ls go\nbin  pkg  src\n[ec2-sftpuser@ip ~]$ ls go/bin\ngoofys \u2190\u3053\u3053\u672c\u4f53\u306d\n[ec2-sftpuser@ip ~]$ /home/ec2-sftpuser/go/bin/goofys ${S3_BUCKET_NAME} ${S3_MOUNT_NAME}\n[ec2-sftpuser@ip ~]$ df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9        \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/xvda1            7.8G  1.6G  6.1G   21% /\ndevtmpfs              489M   56K  489M    1% /dev\ntmpfs                 498M     0  498M    0% /dev/shm\n${S3_BUCKET_NAME}   1.0P     0  1.0P    0% /home/ec2-sftpuser/s3_goo\u3000\u2190\u307b\u3089\uff01\u3067\u304d\u305f\uff01\n```\n---\n###\u30b3\u30d4\u30da\u7528\u306b\u307e\u3068\u3081\u305f\u3088\uff01\n\n```bash:\u5909\u6570\u3060\u3051\u30bb\u30c3\u30c8\u3057\u3066\u306d\nsudo yum update -y\nsudo yum install golang fuse -y\nexport GOPATH=$HOME/go\ngo get github.com/kahing/goofys\ngo install github.com/kahing/goofys\nS3_MOUNT_NAME='<\u30de\u30a6\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d>'\nS3_BUCKET_NAME='<S3\u30d0\u30b1\u30c3\u30c8\u540d>'\nmkdir ${S3_MOUNT_NAME}\n${GOPATH}/bin/goofys ${S3_BUCKET_NAME} ${S3_MOUNT_NAME}\n```\n---\n###\u3064\u3044\u3067\u306bs3fs\u8efd\u304f\u66f8\u304d\u76f4\u3057\u305f\u3088\n[EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bS3\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u4f7f\u7528\u3059\u308b\uff08IAM Role ver)](http://qiita.com/Yuki_BB3/items/9f5eb233b152be1c4bc9)\u3082\u30b3\u30d4\u30da\u3067\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3088\n\n```bash:\u5909\u6570\u30bb\u30c3\u30c8\nBUCKET_NAME='<S3\u306e\u30d0\u30b1\u30c3\u30c8\u540d>'\nS3_MOUNT_NAME='<\u30de\u30a6\u30f3\u30c8\u5148>'\nROL_NAME='<\u30ed\u30fc\u30eb\u540d>'\n```\n\n```bash:\u8a2d\u5b9a\nsudo su\nyum install automake gcc-c++ fuse fuse-devel libcurl-devel libxml2-devel openssl-devel -y\ngit clone https://github.com/s3fs-fuse/s3fs-fuse.git\n./autogen.sh\n./configure --prefix=/usr/local\nmake\nsudo make install\ncd ~\nmkdir ~/s3fs\nchmod 600 s3fs\nsudo vi /etc/fuse.conf\n /usr/local/bin/s3fs ${BUCKET_NAME} ${S3_MOUNT_NAME} -o rw,allow_other,uid=500,gid=500,iam_role=\"${ROL_NAME}\"\n```\n\n```bash:\u4f5c\u696d\u30ed\u30b0\n[root@ip ec2-user]# ls\ns3fs-fuse\n[root@ip ec2-user]#cd s3fs-fuse\n[root@ip ec2-user]#./autogen.sh\n[root@ip ec2-user]#./configure --prefix=/usr/local\n[root@ip ec2-user]#make\n\n===\u4e0b\u306e\u30a8\u30e9\u30fc\uff1f\u304c\u51fa\u307e\u3059\u304c\u3001\u7121\u8996\u3057\u3066\u3068\u308a\u3042\u3048\u305a\u5927\u4e08\u592b===\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/src' \u304b\u3089\u51fa\u307e\u3059\nMaking all in test\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/test' \u306b\u5165\u308a\u307e\u3059\nmake[2]: `all' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/test' \u304b\u3089\u51fa\u307e\u3059\nMaking all in doc\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u306b\u5165\u308a\u307e\u3059\nmake[2]: `all' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u304b\u3089\u51fa\u307e\u3059\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u306b\u5165\u308a\u307e\u3059\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\n\n[root@ip ec2-user]#sudo make install\n\n===\u4e0b\u306e\u30a8\u30e9\u30fc\uff1f\u304c\u51fa\u307e\u3059\u304c\u3001\u7121\u8996\u3057\u3066\u3068\u308a\u3042\u3048\u305a\u5927\u4e08\u592b===\n\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse/doc' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u306b\u5165\u308a\u307e\u3059\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u306b\u5165\u308a\u307e\u3059\nmake[2]: `install-exec-am' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: `install-data-am' \u306b\u5bfe\u3057\u3066\u884c\u3046\u3079\u304d\u4e8b\u306f\u3042\u308a\u307e\u305b\u3093.\nmake[2]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\nmake[1]: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea `/home/ec2-user/s3fs-fuse' \u304b\u3089\u51fa\u307e\u3059\n\n[root@ip ec2-user]#cd ~\n[root@ip ec2-user]#mkdir s3fs\n[root@ip ec2-user]#sudo chmod 600 s3fs\n[root@ip ec2-user]#sudo vi /etc/fuse.conf\n# mount_max = 1000\n user_allow_other \u2190\uff03\u3092\u5916\u3059\n[root@ip ec2-user]# ls /usr/local/bin\ns3fs\n[root@ip ec2-user]#id ec2-user\nuid=500(ec2-user) gid=500(ec2-user) groups=500(ec2-user),10(wheel)\n[root@ip ec2-user]# /usr/local/bin/s3fs ${BUCKET_NAME} ${S3_MOUNT_NAME} -o rw,allow_other,uid=500,gid=500,iam_role=\"${ROL_NAME}\"\n[root@ip ec2-user]# df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9   \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/xvda1       7.8G  1.7G  6.1G   22% /\ndevtmpfs         489M   56K  489M    1% /dev\ntmpfs            498M     0  498M    0% /dev/shm\ns3fs             256T     0  256T    0% /home/ec2-user/s3fs\u3000\u2190s3fs\u3067\u306e\u30de\u30a6\u30f3\u30c8\n```\n\n---\n\u65e9\u3044\u3067\u3059\u3002goofys\n\uff11GB\u306e\u5199\u771f\u3092\u30a2\u30c3\u30d7\u3057\u3066\u6bd4\u8f03\u3057\u307e\u3057\u305f\u304c ```s3fs:goofys=1.5MB/sec:3.5MB/sec``` \u3068\u3001\u660e\u3089\u304b\u306b\u65e9\u3044\u3067\u3059\u3002\n", "tags": ["AWS", "S3"]}