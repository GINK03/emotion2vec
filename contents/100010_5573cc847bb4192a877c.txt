{"context": "\n\u304a\u554f\u3044\u5408\u308f\u305b\u306a\u3069\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30e1\u30fc\u30eb\u304c\u5c4a\u304f\u305f\u3081\u306b\n\n\nrails \u3067\u306fActionMailer\u3068\u3044\u3046\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30e1\u30fc\u30eb\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u307e\u305a\u30b3\u30de\u30f3\u30c9\u3067\n\n\ncommand\n$ rails g mailer InquiryNotifier\n\n\n\n\u3068\u6253\u3061\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u304c\u4e00\u65e6\u3053\u3053\u3067\u306f\u6c17\u306b\u3057\u307e\u305b\u3093\u3002\n\nmailer\u304c\u30e1\u30fc\u30eb\u3092\u9001\u308b\u305f\u3081\u306b\u3059\u308b\u3053\u3068\u306e\u6d41\u308c\u306f\n0,sendgrid\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u308b\n1,ActionMailer\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u305fInquiryNotifier\u30af\u30e9\u30b9\u3067\u9001\u4fe1\u3059\u308b\u969b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\n2,form\u3067\u3082\u3089\u3063\u305f\u30c7\u30fc\u30bf\u3092`InquiryController.rb`\u306ecreate\u30a2\u30af\u30b7\u30e7\u30f3\u306bsendgrid\u306a\u3069\u306e\u30e1\u30fc\u30eb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u304b\u307e\u305b\u308b\n3,smtp\u306e\u8a2d\u5b9a\n4,\u30e1\u30fc\u30eb\u306e\u66f8\u304f\u5185\u5bb9\u306e\u306bform\u306e\u30c7\u30fc\u30bf\u3092\u53cd\u6620\n\n\u3068\u3044\u3063\u305f\u3068\u3053\u308d\u3067\u3059\u3002\n0,sendgrid\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u308b\n\u3053\u3061\u3089\u304b\u3089\n1,ActionMailer\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u305fInquiryNotifier\u30af\u30e9\u30b9\u3067\u9001\u4fe1\u3059\u308b\u969b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\n\ninquiry_notifier.rb\nclass InquiryNotifier < ApplicationMailer\n\n  def send_user(inquiry)\n    @inquiry = inquiry\n    mail(to: @inquiry.email, subject: '\u304a\u554f\u3044\u5408\u308f\u305b\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002' )\n  end\n#@inqury\u306f\u30e6\u30fc\u30b6\u304c\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\u305f\u3081\u306e\u5909\u6570\u3067\u3059\nend\n\n\n\n2,form\u3067\u3082\u3089\u3063\u305f\u30c7\u30fc\u30bf\u3092InquiryController.rb\u306ecreate\u30a2\u30af\u30b7\u30e7\u30f3\u306bsendgrid\u306a\u3069\u306e\u30e1\u30fc\u30eb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u304b\u307e\u305b\u308b\n\ninquries_controller.rb\n....\n  def create\n    @inquiry = Inquiry.new(inquiry_params)#\u30b9\u30c8\u30ed\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u3059\n    if @inquiry.save\n      InquiryNotifier.send_user(@inquiry).deliver_now #rails5\u3067\u306fdeliver_now\u3057\u304b\u4f7f\u3048\u306a\u3044\u306e\u3067\u3053\u3061\u3089\u3092\u63a8\u5968\u3057\u307e\u3059\u3002\n      redirect_to root_path\n    else\n      render template: \"welcome/index\"\n    end\n  end\n...\n\n\nsmtp\u306e\u8a2d\u5b9a\n\nconfig/production.rb\n\n....\nconfig.action_mailer.default_url_options = { :host => '\u30db\u30b9\u30c8\u540d' }\n  config.action_mailer.smtp_settings = {\n    :user_name => 'sendgrid\u306e\u30e6\u30fc\u30b6\u30fc\u540d',\n    :password => 'sendgrid\u306e\u30d1\u30b9\u30ef\u30fc\u30c9',\n    :domain => '\u30c9\u30e1\u30a4\u30f3\u540d',\n    :address => 'smtp.sendgrid.net',\n    :port => 587,\n    :authentication => :plain,\n    :enable_starttls_auto => true\n  }\n...\n\n\n\n\u3092\u8ffd\u52a0\u3002\n\n4,\u30e1\u30fc\u30eb\u306e\u66f8\u304f\u5185\u5bb9\u306bform\u306e\u30c7\u30fc\u30bf\u3092\u53cd\u6620\n\n\u5148\u307b\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3067'layouts/miler.html'\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u3066\u308b\u306e\u3067\u3001\u305d\u3053\u306b\u57cb\u3081\u8fbc\u3080\u3082\u306e\u304c\u4ee5\u4e0b\u3067\u3059\u3002\n\nsend_user.html.erb\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />\n  </head>\n  <body>\n    <p>\u30e6\u30fc\u30b6\u540d => <%= @inquiry.name %></p>\n    <p>e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9 => <%= @inquiry.email%></p>\n  </body>\n</html>\n\n\n\n\u30ed\u30fc\u30ab\u30eb\u3067\u3082\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u3042\u308c\u3070\u5b9f\u884c\u3067\u304d\u307e\u3059(^o^)/\n\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u3066admin\u306b\u3082\u9001\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff56\uff08\uff3e\uff3f\uff3e\uff56\uff09\u266a\n<h2>\n\u304a\u554f\u3044\u5408\u308f\u305b\u306a\u3069\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30e1\u30fc\u30eb\u304c\u5c4a\u304f\u305f\u3081\u306b\n</h2>\n<p>\nrails \u3067\u306fActionMailer\u3068\u3044\u3046\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30e1\u30fc\u30eb\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u307e\u305a\u30b3\u30de\u30f3\u30c9\u3067\n</p>\n\n```command:command\n$ rails g mailer InquiryNotifier\n```\n\n<p>\n\u3068\u6253\u3061\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u304c\u4e00\u65e6\u3053\u3053\u3067\u306f\u6c17\u306b\u3057\u307e\u305b\u3093\u3002\n</p>\nmailer\u304c\u30e1\u30fc\u30eb\u3092\u9001\u308b\u305f\u3081\u306b\u3059\u308b\u3053\u3068\u306e\u6d41\u308c\u306f\n\n```\n0,sendgrid\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u308b\n1,ActionMailer\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u305fInquiryNotifier\u30af\u30e9\u30b9\u3067\u9001\u4fe1\u3059\u308b\u969b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\n2,form\u3067\u3082\u3089\u3063\u305f\u30c7\u30fc\u30bf\u3092`InquiryController.rb`\u306ecreate\u30a2\u30af\u30b7\u30e7\u30f3\u306bsendgrid\u306a\u3069\u306e\u30e1\u30fc\u30eb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u304b\u307e\u305b\u308b\n3,smtp\u306e\u8a2d\u5b9a\n4,\u30e1\u30fc\u30eb\u306e\u66f8\u304f\u5185\u5bb9\u306e\u306bform\u306e\u30c7\u30fc\u30bf\u3092\u53cd\u6620\n```\n\u3068\u3044\u3063\u305f\u3068\u3053\u308d\u3067\u3059\u3002\n<h4>0,sendgrid\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u308b</h4>\n\n[\u3053\u3061\u3089\u304b\u3089](https://sendgrid.com/)\n\n<h4>1,ActionMailer\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u305fInquiryNotifier\u30af\u30e9\u30b9\u3067\u9001\u4fe1\u3059\u308b\u969b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9</h4>\n\n```ruby:inquiry_notifier.rb\nclass InquiryNotifier < ApplicationMailer\n\n  def send_user(inquiry)\n    @inquiry = inquiry\n    mail(to: @inquiry.email, subject: '\u304a\u554f\u3044\u5408\u308f\u305b\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002' )\n  end\n#@inqury\u306f\u30e6\u30fc\u30b6\u304c\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3059\u308b\u305f\u3081\u306e\u5909\u6570\u3067\u3059\nend\n\n```\n<h4>2,form\u3067\u3082\u3089\u3063\u305f\u30c7\u30fc\u30bf\u3092InquiryController.rb\u306ecreate\u30a2\u30af\u30b7\u30e7\u30f3\u306bsendgrid\u306a\u3069\u306e\u30e1\u30fc\u30eb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u304b\u307e\u305b\u308b</h4>\n\n```ruby:inquries_controller.rb\n....\n  def create\n    @inquiry = Inquiry.new(inquiry_params)#\u30b9\u30c8\u30ed\u30f3\u30b0\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u3059\n    if @inquiry.save\n      InquiryNotifier.send_user(@inquiry).deliver_now #rails5\u3067\u306fdeliver_now\u3057\u304b\u4f7f\u3048\u306a\u3044\u306e\u3067\u3053\u3061\u3089\u3092\u63a8\u5968\u3057\u307e\u3059\u3002\n      redirect_to root_path\n    else\n      render template: \"welcome/index\"\n    end\n  end\n...\n```\n<h4>smtp\u306e\u8a2d\u5b9a</h4>\n```ruby:config/production.rb\n\n....\nconfig.action_mailer.default_url_options = { :host => '\u30db\u30b9\u30c8\u540d' }\n  config.action_mailer.smtp_settings = {\n    :user_name => 'sendgrid\u306e\u30e6\u30fc\u30b6\u30fc\u540d',\n    :password => 'sendgrid\u306e\u30d1\u30b9\u30ef\u30fc\u30c9',\n    :domain => '\u30c9\u30e1\u30a4\u30f3\u540d',\n    :address => 'smtp.sendgrid.net',\n    :port => 587,\n    :authentication => :plain,\n    :enable_starttls_auto => true\n  }\n...\n\n```\n\u3092\u8ffd\u52a0\u3002\n\n<h4>\n4,\u30e1\u30fc\u30eb\u306e\u66f8\u304f\u5185\u5bb9\u306bform\u306e\u30c7\u30fc\u30bf\u3092\u53cd\u6620\n</h4>\n\u5148\u307b\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3067'layouts/miler.html'\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u3066\u308b\u306e\u3067\u3001\u305d\u3053\u306b\u57cb\u3081\u8fbc\u3080\u3082\u306e\u304c\u4ee5\u4e0b\u3067\u3059\u3002\n\n```erb:send_user.html.erb\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />\n  </head>\n  <body>\n    <p>\u30e6\u30fc\u30b6\u540d => <%= @inquiry.name %></p>\n    <p>e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9 => <%= @inquiry.email%></p>\n  </body>\n</html>\n\n```\n\n\u30ed\u30fc\u30ab\u30eb\u3067\u3082\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u3042\u308c\u3070\u5b9f\u884c\u3067\u304d\u307e\u3059\\(^o^)/\n\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u3066admin\u306b\u3082\u9001\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff56\uff08\uff3e\uff3f\uff3e\uff56\uff09\u266a\n\n", "tags": ["Rails", "ActionMailer", "SMTP"]}