{"tags": ["node-red", "websocket"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nnode-red\u306bwebsocket\u3067\u3064\u306a\u3044\u3067\u3001\u30b0\u30e9\u30d5\u8868\u793a\u3059\u308b\u3002\nchart.js\u3092jsdo.it\u3067\u5b9f\u884c\u3059\u308b\u3002\n\n\u5199\u771f\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\nvar myChart;\nwindow.onload = function() {\n    var ctx = document.getElementById(\"chart\").getContext(\"2d\");\n    var data = {\n        labels : [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        datasets : [{\n            label : \"temp\",\n            fillColor : \"rgba(151, 187, 205, 0.2)\",\n            strokeColor : \"rgba(151, 187, 205, 1)\",\n            pointColor : \"rgba(151, 187, 205, 1)\",\n            pointStrokeColor : \"#fff\",\n            pointHighlightFill : \"#fff\",\n            pointHighlightStroke : \"rgba(151, 187, 205, 1)\",\n            data : [20, 20, 20, 20, 20, 20, 20, 20, 20]\n        }]\n    };\n    myChart = new Chart(ctx).Line(data, {\n        scaleOverride : true,\n        scaleSteps : 10,\n        scaleStepWidth : 3.0,\n        scaleStartValue : 10,\n        scaleShowGridLines : false\n    });\n}\nvar websocket;\nfunction setup() { \n    websocket = new WebSocket(\"ws://node-red /test0\");\n    websocket.onopen = function() {\n        alert(\"CONNECTED\"); \n    };\n    websocket.onmessage = function(e) {\n        var s = parseFloat(e.data);\n        myChart.addData([s], \"\");\n        myChart.removeData();\n    };\n    websocket.onerror = function(e) {\n        alert(\"ERROR: \" + e.data);\n    };\n}\nsetup();\n\n#\u6982\u8981\nnode-red\u306bwebsocket\u3067\u3064\u306a\u3044\u3067\u3001\u30b0\u30e9\u30d5\u8868\u793a\u3059\u308b\u3002\nchart.js\u3092jsdo.it\u3067\u5b9f\u884c\u3059\u308b\u3002\n#\u5199\u771f\n![gra.jpg](https://qiita-image-store.s3.amazonaws.com/0/18104/bebdff41-951b-e9ec-f8b0-d74dd7f3f33b.jpeg)\n![gra2.jpg](https://qiita-image-store.s3.amazonaws.com/0/18104/b7264917-8ac8-2bf6-7927-e1a2a66ebdaa.jpeg)\n\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```\nvar myChart;\nwindow.onload = function() {\n    var ctx = document.getElementById(\"chart\").getContext(\"2d\");\n    var data = {\n        labels : [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        datasets : [{\n            label : \"temp\",\n            fillColor : \"rgba(151, 187, 205, 0.2)\",\n            strokeColor : \"rgba(151, 187, 205, 1)\",\n            pointColor : \"rgba(151, 187, 205, 1)\",\n            pointStrokeColor : \"#fff\",\n            pointHighlightFill : \"#fff\",\n            pointHighlightStroke : \"rgba(151, 187, 205, 1)\",\n            data : [20, 20, 20, 20, 20, 20, 20, 20, 20]\n        }]\n    };\n    myChart = new Chart(ctx).Line(data, {\n        scaleOverride : true,\n        scaleSteps : 10,\n        scaleStepWidth : 3.0,\n        scaleStartValue : 10,\n        scaleShowGridLines : false\n    });\n}\nvar websocket;\nfunction setup() { \n    websocket = new WebSocket(\"ws://node-red /test0\");\n    websocket.onopen = function() {\n        alert(\"CONNECTED\"); \n    };\n    websocket.onmessage = function(e) {\n        var s = parseFloat(e.data);\n        myChart.addData([s], \"\");\n        myChart.removeData();\n    };\n    websocket.onerror = function(e) {\n        alert(\"ERROR: \" + e.data);\n    };\n}\nsetup();\n```\n"}