{"context": "\u3044\u3061\u3044\u3061\u78ba\u8a8d\u3059\u308b\u3088\u308a\u4ed6\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u3051\u3070\u697d\u3002/usr/share/bash-completion/completions/\u4ee5\u4e0b\u3092\u53c2\u7167\u3002\n    case $prev in\n        -b|-h|--help|-p)\n            return 0\n            ;;\n        -n)\n            COMPREPLY=( $( compgen -W \"{1..$(_ncpus)}\" -- \"$cur\" ) )\n            return 0\n            ;;\n    esac\n\n\u307b\u30fc bash \u3060\u3068 echo \"{1..100}\" \u307f\u305f\u3044\u306b\u3059\u308b\u3068\u5c55\u958b\u3059\u308b\u306e\u306d\n    if [[ \"$cur\" == -* ]]; then\n        local helpopts=$( _parse_help \"$1\" )\n        COMPREPLY=( $( compgen -W \"${helpopts//#/} -2 -3 -4 -5 -6 -7 -8 -9\" \\\n            -- \"$cur\" ) )\n        return 0\n    fi\n\n\u306a\u3093\u3067 [[ ]] \u3068\u4e8c\u91cd\u306b\u30ab\u30c3\u30b3\u306a\u306e\u304b\u3002\n\n\u4f5c\u3063\u305f\n_snapper()\n{\n    local configdir=\"/etc/snapper/configs\"\n    local cur prev words cword\n    _init_completion || return\n\n    local GLOGAL_SNAPPER_OPTIONS='\n        -q --quiet\n        -v --verbose\n        --utc\n        --iso\n        -t --table-style\n        -c --config\n        -r --root\n        --no-dbus\n        --version\n        --help\n    '\n\n    # see if the user selected a command already\n    local COMMANDS=(\n        \"list-configs\" \"create-config\" \"delete-config\" \"set-config\"\n        \"list\" \"ls\"\n        \"create\" \"modify\" \"delete\" \"remove\" \"rm\"\n        \"mount\" \"umount\"\n        \"status\" \"diff\" \"xadiff\"\n        \"undochange\" \"rollback\"\n        \"setup-quota\"\n        \"cleanup\")\n\n    local command i\n    for (( i=0; i < ${#words[@]}-1; i++ )); do\n        if [[ ${COMMANDS[@]} =~ ${words[i]} ]]; then\n            command=${words[i]}\n            break\n        fi\n    done\n\n    # supported options per command\n    if [[ \"$cur\" == -* ]]; then\n        case $command in\n            create-config)\n                COMPREPLY=( $( compgen -W '--fstype -f\n                  --templete -t' -- \"$cur\" ) )\n                return 0\n                ;;\n            list|ls)\n                COMPREPLY=( $( compgen -W '--type -t\n                  --all-configs -a' -- \"$cur\" ) )\n                return 0\n                ;;\n            create)\n                COMPREPLY=( $( compgen -W '--type -t\n                  --pre-number\n                  --print-number -p\n                  --description -d\n                  --cleanup-algorithm -c\n                  --userdata -u\n                  --command' -- \"$cur\" ) )\n                return 0\n                ;;\n            modify)\n                COMPREPLY=( $( compgen -W '--description -d\n                  --cleanup-algorithm -c\n                  --userdata -u' -- \"$cur\" ) )\n                return 0\n                ;;\n            delete|remove|rm)\n                COMPREPLY=( $( compgen -W '--sync -s\n                  ' -- \"$cur\" ) )\n                return 0\n                ;;\n            status)\n                COMPREPLY=( $( compgen -W '--output -o\n                    ' -- \"$cur\" ) )\n                return 0\n                ;;\n            diff)\n                COMPREPLY=( $( compgen -W '--input -i\n                    --diff-cmd\n                    --extensions -x' -- \"$cur\" ) )\n                return 0\n                ;;\n            undochange)\n                COMPREPLY=( $( compgen -W '--input -i\n                    ' -- \"$cur\" ) )\n                return 0\n                ;;\n            rollback)\n                COMPREPLY=( $( compgen -W '--print-number -p\n                    --description -d\n                    --cleanup-algorithm -c\n                    --userdata -u' -- \"$cur\" ) )\n                return 0\n                ;;\n            *)\n                COMPREPLY=( $( compgen -W \"$GLOGAL_SNAPPER_OPTIONS\" -- \"$cur\" ) )\n                return 0\n                ;;\n        esac\n    fi\n\n    # specific command arguments\n    if [[ -n $command ]]; then\n        case $command in\n            create-config)\n                case \"$prev\" in\n                     --fstype|-f)\n                        COMPREPLY=( $( compgen -W 'btrfs ext4 lvm(xfs) lvm(ext4)\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            list)\n                case \"$prev\" in\n                    --type|-t)\n                        COMPREPLY=( $( compgen -W 'all single pre-post\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            create)\n                case \"$prev\" in\n                    --type|-t)\n                        COMPREPLY=( $( compgen -W 'single pre post\n                        ' -- \"$cur\" ) )\n                        ;;\n                --pre-number)\n                # get .snapshot directory\n                        COMPREPLY=( $( compgen -W '\n                        ' -- \"$cur\" ) )\n                        ;;\n                --cleanup-algorithm|-c)\n                        COMPREPLY=( $( compgen -W 'empty-pre-post timeline number\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            modify)\n                case \"$prev\" in\n                    --cleanup-algorithm|-c)\n                        COMPREPLY=( $( compgen -W 'empty-pre-post timeline number\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            status)\n                case \"$prev\" in\n                    --output|-o)\n                        COMPREPLY=( $( compgen -f -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            diff)\n                return 0\n                ;;\n            undochange)\n                return 0\n                ;;\n            rollback)\n                case \"$prev\" in\n                    --cleanup-algorithm|-c)\n                        COMPREPLY=( $( compgen -W 'empty-pre-post timeline number\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n        esac\n    fi\n\n    # no command yet, show what commands we have\n    if [ \"$command\" = \"\" ]; then\n        COMPREPLY=( $( compgen -W '${COMMANDS[@]}' -- \"$cur\" ) )\n    fi\n\n    return 0\n} &&\ncomplete -F _snapper snapper\n\n\u3044\u3061\u3044\u3061\u78ba\u8a8d\u3059\u308b\u3088\u308a\u4ed6\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u3051\u3070\u697d\u3002/usr/share/bash-completion/completions/\u4ee5\u4e0b\u3092\u53c2\u7167\u3002\n\n```\n    case $prev in\n        -b|-h|--help|-p)\n            return 0\n            ;;\n        -n)\n            COMPREPLY=( $( compgen -W \"{1..$(_ncpus)}\" -- \"$cur\" ) )\n            return 0\n            ;;\n    esac\n```\n\u307b\u30fc bash \u3060\u3068 echo \"{1..100}\" \u307f\u305f\u3044\u306b\u3059\u308b\u3068\u5c55\u958b\u3059\u308b\u306e\u306d\n\n```\n    if [[ \"$cur\" == -* ]]; then\n        local helpopts=$( _parse_help \"$1\" )\n        COMPREPLY=( $( compgen -W \"${helpopts//#/} -2 -3 -4 -5 -6 -7 -8 -9\" \\\n            -- \"$cur\" ) )\n        return 0\n    fi\n```\n\n\u306a\u3093\u3067 [[ ]] \u3068\u4e8c\u91cd\u306b\u30ab\u30c3\u30b3\u306a\u306e\u304b\u3002\n\n\n## \u4f5c\u3063\u305f\n```\n_snapper()\n{\n    local configdir=\"/etc/snapper/configs\"\n    local cur prev words cword\n    _init_completion || return\n\n    local GLOGAL_SNAPPER_OPTIONS='\n        -q --quiet\n        -v --verbose\n        --utc\n        --iso\n        -t --table-style\n        -c --config\n        -r --root\n        --no-dbus\n        --version\n        --help\n    '\n\n    # see if the user selected a command already\n    local COMMANDS=(\n        \"list-configs\" \"create-config\" \"delete-config\" \"set-config\"\n        \"list\" \"ls\"\n        \"create\" \"modify\" \"delete\" \"remove\" \"rm\"\n        \"mount\" \"umount\"\n        \"status\" \"diff\" \"xadiff\"\n        \"undochange\" \"rollback\"\n        \"setup-quota\"\n        \"cleanup\")\n\n    local command i\n    for (( i=0; i < ${#words[@]}-1; i++ )); do\n        if [[ ${COMMANDS[@]} =~ ${words[i]} ]]; then\n            command=${words[i]}\n            break\n        fi\n    done\n\n    # supported options per command\n    if [[ \"$cur\" == -* ]]; then\n        case $command in\n            create-config)\n                COMPREPLY=( $( compgen -W '--fstype -f\n                  --templete -t' -- \"$cur\" ) )\n                return 0\n                ;;\n            list|ls)\n                COMPREPLY=( $( compgen -W '--type -t\n                  --all-configs -a' -- \"$cur\" ) )\n                return 0\n                ;;\n            create)\n                COMPREPLY=( $( compgen -W '--type -t\n                  --pre-number\n                  --print-number -p\n                  --description -d\n                  --cleanup-algorithm -c\n                  --userdata -u\n                  --command' -- \"$cur\" ) )\n                return 0\n                ;;\n            modify)\n                COMPREPLY=( $( compgen -W '--description -d\n                  --cleanup-algorithm -c\n                  --userdata -u' -- \"$cur\" ) )\n                return 0\n                ;;\n            delete|remove|rm)\n                COMPREPLY=( $( compgen -W '--sync -s\n                  ' -- \"$cur\" ) )\n                return 0\n                ;;\n            status)\n                COMPREPLY=( $( compgen -W '--output -o\n                    ' -- \"$cur\" ) )\n                return 0\n                ;;\n            diff)\n                COMPREPLY=( $( compgen -W '--input -i\n                    --diff-cmd\n                    --extensions -x' -- \"$cur\" ) )\n                return 0\n                ;;\n            undochange)\n                COMPREPLY=( $( compgen -W '--input -i\n                    ' -- \"$cur\" ) )\n                return 0\n                ;;\n            rollback)\n                COMPREPLY=( $( compgen -W '--print-number -p\n                    --description -d\n                    --cleanup-algorithm -c\n                    --userdata -u' -- \"$cur\" ) )\n                return 0\n                ;;\n            *)\n                COMPREPLY=( $( compgen -W \"$GLOGAL_SNAPPER_OPTIONS\" -- \"$cur\" ) )\n                return 0\n                ;;\n        esac\n    fi\n\n    # specific command arguments\n    if [[ -n $command ]]; then\n        case $command in\n            create-config)\n                case \"$prev\" in\n                     --fstype|-f)\n                        COMPREPLY=( $( compgen -W 'btrfs ext4 lvm(xfs) lvm(ext4)\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            list)\n                case \"$prev\" in\n                    --type|-t)\n                        COMPREPLY=( $( compgen -W 'all single pre-post\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            create)\n                case \"$prev\" in\n                    --type|-t)\n                        COMPREPLY=( $( compgen -W 'single pre post\n                        ' -- \"$cur\" ) )\n                        ;;\n                --pre-number)\n                # get .snapshot directory\n                        COMPREPLY=( $( compgen -W '\n                        ' -- \"$cur\" ) )\n                        ;;\n                --cleanup-algorithm|-c)\n                        COMPREPLY=( $( compgen -W 'empty-pre-post timeline number\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            modify)\n                case \"$prev\" in\n                    --cleanup-algorithm|-c)\n                        COMPREPLY=( $( compgen -W 'empty-pre-post timeline number\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            status)\n                case \"$prev\" in\n                    --output|-o)\n                        COMPREPLY=( $( compgen -f -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n            diff)\n                return 0\n                ;;\n            undochange)\n                return 0\n                ;;\n            rollback)\n                case \"$prev\" in\n                    --cleanup-algorithm|-c)\n                        COMPREPLY=( $( compgen -W 'empty-pre-post timeline number\n                        ' -- \"$cur\" ) )\n                        ;;\n                esac\n                return 0\n                ;;\n        esac\n    fi\n\n    # no command yet, show what commands we have\n    if [ \"$command\" = \"\" ]; then\n        COMPREPLY=( $( compgen -W '${COMMANDS[@]}' -- \"$cur\" ) )\n    fi\n\n    return 0\n} &&\ncomplete -F _snapper snapper\n```\n", "tags": ["memo"]}