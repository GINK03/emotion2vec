{"context": "\n\u52d5\u4f5c\u74b0\u5883\nESP-WROOM-02 (\u4ee5\u4e0bESP8266)\n\u6607\u5727\u56de\u8def (3V -> 5V) (http://akizukidenshi.com/catalog/g/gM-03451/)\n\u8ddd\u96e2\u30bb\u30f3\u30b5\u30fc: HC-SR04 (http://akizukidenshi.com/catalog/g/gM-08762/)\n\u8ddd\u96e2\u30bb\u30f3\u30b5\u30fc: GP2Y0A710K (http://akizukidenshi.com/catalog/g/gI-03157/)\nArduino IDE v1.6.6\n\n\nhttp://qiita.com/7of9/items/193181bb1a8c7b873aaf\n\u306e\u7d9a\u304d\u3002\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\u3092\u3057\u305f\u3002\n\n\u56de\u8def\u56f3\nGP2Y0A710K\u3082\u63a5\u7d9a\u3059\u308b\u6642\u306e\u56de\u8def\u56f3\u306f\u4ee5\u4e0b\u3068\u306a\u308b\u3002\nFTDI\u30a2\u30c0\u30d7\u30bf\u306e\u63a5\u7d9a\u306f\u7701\u7565\u3057\u305f\u3002\nhttps://upverter.com/7of9/0440e7247433a89e/160710_ESP8266_HC-SR04_GP2Y0A710K/\n\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\n\n\u5de6\u5074\u9762\u304b\u3089\n\u53f3\u4e0b\u306f\u96fb\u6c60CR-123A\u3002\u7e26\u306b\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3001CR-123A\u30b1\u30fc\u30b9\u3068L\u578b\u30d4\u30f3\u30d8\u30c3\u30c0\u3092\u4f7f\u3063\u3066\u300c\u629c\u304d\u5dee\u3057\u3067\u304d\u308b\u300d\u3088\u3046\u306b\u3057\u305f\u3002\n\u5de6\u624b\u524d\u304cGP2Y0A710K\u3001\u5de6\u5965\u304cHC-SR04 (FTDI\u30a2\u30c0\u30d7\u30bf\u306b\u96a0\u308c\u3066\u3044\u308b\uff09\u3002\n\n\n\u80cc\u9762\u304b\u3089\n\u5de6\u624b\u524d\u3001\u96fb\u6c60\u306eL\u578b\u30d4\u30f3\u30d8\u30c3\u30c0\u304c\u898b\u3048\u3066\u3044\u308b\u3002\u30d4\u30f3\u30d8\u30c3\u30c0\u306eGND\u30d4\u30f3\u3092CR-123A\u30b1\u30fc\u30b9\u306b\u76f4\u63a5\u534a\u7530\u4ed8\u3051\u3057\u3066\u3001\u30d7\u30e9\u30b9\u30d4\u30f3\u306f\u30b1\u30fc\u30b9\u306b\u8d64\u306e\u30ea\u30fc\u30c9\u3067\u63a5\u7d9a\u3002\n\n\n\u53f3\u5074\u9762\u304b\u3089\n\u5de6\u624b\u524d\u306e\u30b9\u30a4\u30c3\u30c1\u306fIO0\u306eH/L\u5207\u66ff\u7528\u3002\u30bd\u30d5\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6642\u306f\u624b\u524d\u306b\u30b9\u30a4\u30c3\u30c1\u3055\u305b\u308b\u3002\n\n\n\u4e0a\u9762\u304b\u3089\n\u5de6\u771f\u3093\u4e2d\u306b\u3042\u308b\u7dd1\u8272\u306e\u3082\u306e\u306f\u6607\u5727\u56de\u8def(3V->5V)\u3002\n\n\n\u540c\u6642\u6e2c\u5b9a\u7528\u30b3\u30fc\u30c9 > \u9593\u9055\u3063\u305f\u30b3\u30fc\u30c9\n\n(\u8ffd\u8a18 2016/07/11)\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u306fkTrigPin\u3092H\u30ec\u30d9\u30eb\u306b\u3057\u305f\u5f8c100msec\u5f85\u6a5f\u3057\u3066\u3044\u308b\u3002\u5f85\u6a5f\u6642\u9593\u306e\u5358\u4f4d\u304c\u9593\u9055\u3063\u3066\u3044\u3066\u3001\u6b63\u3057\u304f\u306f10usec\u4ee5\u4e0a\u3067\u3042\u3063\u305f\u3002\n\n\ncode\n\nHC-SR04 : Trigger\u3092HIGH,LOW\u3057\u3066\u3001Echo\u304c\u8fd4\u308b\u6642\u9593\u304b\u3089\u8ddd\u96e2\u3092\u8a08\u6e2c (2016/07/12\u8a02\u6b63: ECHO\u30d4\u30f3\u304cH\u30ec\u30d9\u30eb\u306b\u306a\u3063\u3066\u3044\u308b\u5e45\u304b\u3089\u8ddd\u96e2\u3092\u8a08\u6e2c)\nGP2Y0A710K : AD\u53d6\u8fbc\u307f\u30021/3\u62b5\u6297\u5206\u5727\u3057\u305f\u5024\u3092\u53d6\u308b\u3002\u6700\u59271.0V\u7a0b\u5ea6\u306b\u306a\u308b\u3002\n\nv0.2 @ github\n\nesp8266_160710_HC-SR04_GP2Y0A710K.ino\n#include <ESP8266WiFi.h>\n\nextern \"C\" {\n#include \"user_interface.h\"\n}\n\n/*\n * v0.2 2016 Jul. 10\n *   - add ADC for GP2Y0A710K\n * v0.1 2016 Jul. 09\n *   - calculate distance in [cm]\n *   - receive echo in loop() \n *   - send trigger in loop()\n *   - set pinMode() at setup()\n */\n\nstatic const int kTrigPin = 12;\nstatic const int kEchoPin = 13;\n\nvoid setup() {\n  WiFi.disconnect(); // avoid watchdog reset by WiFi thread\n\n  Serial.begin(115200);\n  Serial.println(\"\");\n\n  pinMode(kTrigPin, OUTPUT);\n  pinMode(kEchoPin, INPUT);\n}\n\nvoid loop() {\n  // trigger\n  digitalWrite(kTrigPin, HIGH);\n  delay(100); // msec\n  digitalWrite(kTrigPin, LOW);\n\n  // echo\n  int interval_us;\n  interval_us = pulseIn(kEchoPin, HIGH) / 2; // 2: round-trip\n\n//  Serial.print(interval_us);\n//  Serial.print(\", \");\n\n  float dst_m = (float)interval_us * 340.0 / 1000.0 / 1000.0;\n  float dst_cm = dst_m * 100.0;\n\n  uint ADvalue;\n  ADvalue = system_adc_read();\n  float voltage = ADvalue * 1.0 / 1024;\n\n  Serial.print(dst_cm);\n  Serial.print(\"\\t\");\n  Serial.print(voltage);\n  Serial.println();\n\n  delay(300); // msec\n\n//  delay(1000); // msec\n}\n\n\n\n\u7d50\u679c\n\u5de6\u304cHC-SR04\u306e\u6e2c\u5b9a\u5024(\u8ddd\u96e2[cm])\u3001\u53f3\u304cGP2Y0A710K\u306e\u6e2c\u5b9a\u5024(1/3\u5206\u5727\u3057\u305f\u96fb\u5727[V])\u3002\n\n\u7d50\u679c\n14.62   0.72\n17.58   0.70\n0.88    0.70\n17.58   0.71\n17.14   0.70\n12.17   0.72\n13.87   0.70\n18.02   0.72\n17.58   0.71\n16.35   0.72\n13.84   0.70\n4.45    0.70\n13.84   0.70\n1.70    0.71\n13.80   0.72\n14.65   0.70\n2.48    0.70\n14.25   0.70\n16.69   0.71\n14.69   0.70\n3.23    0.71\n17.58   0.71\n12.58   0.72\n14.25   0.70\n3.33    0.70\n13.80   0.72\n17.58   0.71\n14.69   0.71\n14.28   0.69\n3.33    0.72\n17.58   0.70\n12.17   0.72\n\n\n\nTODO\n\u4e0a\u8a18\u306e\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\u3067\u306f\u524d\u5f8c\u306b\u79fb\u52d5\u3057\u305f\u6642\u306bFTDI\u30a2\u30c0\u30d7\u30bf\u306e\u53d6\u308a\u6271\u3044\u304c\u969c\u5bb3\u306b\u306a\u308b\u3002\nudpLogger\u306b\u6e2c\u5b9a\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067FTDI\u30a2\u30c0\u30d7\u30bf\u3092\u5916\u3059\u4e88\u5b9a\u3002\n\u3042\u3068\u306f\u3001HC-SR04\u3068GP2Y0A710K \u304c\u53cd\u5c04\u7269\u306b\u304d\u3061\u3093\u3068\u6b63\u5bfe\u3059\u308b\u3088\u3046\u306b\u7269\u7406\u7684\u306a\u30c6\u30b9\u30c8\u30d9\u30f3\u30c1\u3092\u4f5c\u308b\u3053\u3068\u3060\u304c\u3001\u72ed\u3044\u65e5\u672c\u5bb6\u5c4b\u3067\u306f\u7c21\u6613\u7684\u306a\u3082\u306e\u3057\u304b\u7528\u610f\u3067\u304d\u306a\u3044\u3060\u308d\u3046\u3002\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\u3068\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb\u57fa\u677f\u5b9f\u88c5\u3067\u306f\u30ce\u30a4\u30ba\u306e\u89b3\u70b9\u304b\u3089\u6b63\u78ba\u3055\u304c\u5909\u308f\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u7cbe\u5ea6\u3092\u4e0a\u3052\u308b\u65b9\u6cd5\u306f\u4eca\u5f8c\u691c\u8a0e\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\ncode v0.3\nudpLogger\u3078\u30c7\u30fc\u30bf\u9001\u4fe1\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\u3053\u308c\u3067FTDI\u30a2\u30c0\u30d7\u30bf\u306f\u5916\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nv0.3 @ github\n\u8a66\u3057\u6e2c\u5b9a\u3067\u4ee5\u4e0b\u306e\u30b0\u30e9\u30d5\u304c\u5f97\u3089\u308c\u305f\u3002\n\u5de6\u4e0a\u306b\u304a\u304b\u3057\u306a\u70b9\u304c\u898b\u3089\u308c\u308b\u3002\n\u6570\u3092\u5897\u3084\u305b\u3070\u5f71\u97ff\u306f\u5c11\u306a\u3044\u3068\u671f\u5f85\u3059\u308b\u3002\n\n380\u6e2c\u5b9a\u306e\u7d50\u679c\u3002\u8ddd\u96e2\u3092160cm\u307e\u3067\u6e2c\u5b9a\u3057\u305f\u3002\n\u7d50\u69cb\u30ce\u30a4\u30ba\u304c\u591a\u3044\u3002\n\u307e\u305f\u3001\u96fb\u5727\u304c\u98fd\u548c\u3057\u3066\u3044\u308b\u30021/3\u5206\u5727\u3067\u306f\u8db3\u308a\u306a\u3044\u3088\u3046\u3060\u3002\n\n\u8ddd\u96e2\u3092\u7e2e\u3081\u306a\u304c\u3089\u6e2c\u5b9a\u3057\u305f\u5834\u5408\u306e\u305d\u308c\u305e\u308c\u306e\u6e2c\u5b9a\u5024\u304c\u4ee5\u4e0b\u3002\nHC-SR04\u5074\u306e\u6e2c\u5b9a\u5024\u304c\u3070\u3089\u3064\u3044\u3066\u3044\u308b\u305f\u3081\u3001\u304d\u308c\u3044\u306a\u95a2\u4fc2\u56f3\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u306a\u3044\u3002\n\n\ncode v0.4\n\n\u62b5\u6297\u5206\u5727\u306e\u5909\u66f4\nGP2Y0A710K \u306e\u6e2c\u5b9a\u6642\u306b\u98fd\u548c\u3059\u308b\u554f\u984c\u306b\u5bfe\u3057\u3066\u300110k + 10k + 10k\u306b\u3088\u308b1/3\u5206\u5727\u3067\u306a\u304f\u300110k + 10k + 4.7k\u3067\u306e0.19\u306e\u5206\u5727\u3068\u3057\u305f\u3002\n\n\u7570\u5e38\u5024\u306e\u9664\u53bb\nv0.4 @ github\nHC-SR04\u306e\u6e2c\u5b9a\u306e\u30ce\u30a4\u30ba\u3092\u6e1b\u3089\u3059\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\u4e3b\u306a\u51e6\u7406\u306f\u4ee5\u4e0b\u3002\n\n25\u56de\u306e\u6e2c\u5b9a\u3092\u884c\u3044\u3001\u4e0a\u4f4d1/5\u306e\u4f4d\u7f6e\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u3046\n\n25\u56de\u306e\u6e2c\u5b9a\u5024\u3092\u898b\u305f\u6642\u306b\u8ddd\u96e2\u304c130cm\u306f\u3042\u308a\u305d\u3046\u306a\u3068\u3053\u308d\u3067\u30016\u5272\u308a\u8fd1\u304f\u306b12cm\u306a\u3069\u306e\u660e\u3089\u304b\u306b\u5c0f\u3055\u3044\u7570\u5e38\u5024\u304c\u898b\u3089\u308c\u305f\u3002\u305d\u306e\u305f\u3081\u4e0a\u8a18\u306e\u51e6\u7406\u3068\u3057\u305f\u3002\n\u3053\u306e\u75c7\u72b6\u304cHC-SR04\u4e00\u822c\u7684\u306a\u3053\u3068\u304b\u306f\u5206\u304b\u3089\u306a\u3044\u3002\n\n\u6e2c\u5b9a\u7d50\u679c > \u8ddd\u96e2\u3092\u5909\u3048\u306a\u304c\u3089\u6e2c\u5b9a\n\u6e2c\u5b9a\u30c7\u30fc\u30bf\u306f\u4ee5\u4e0b\u3068\u306a\u3063\u305f\u3002\nHC-SR04\u6e2c\u5b9a\u306b\u6539\u5584\u304c\u898b\u3089\u308c\u305f\u3002\n\u305f\u3060\u3057\u3001\u8ddd\u96e2\u304c100cm\u4ee5\u9060\u306e\u90e8\u5206\u3067\u3084\u306f\u308a\u5024\u306e\u5909\u5316\u304c\u5927\u304d\u3044\u3002\nGP2Y0710K\u306e\u6e2c\u5b9a\u5024\u306f\u5b89\u5b9a\u3057\u3066\u3044\u308b\u3002\n\nHC-SR04\u306e\u30c7\u30fc\u30bf\u3068GP2Y0A710K\u306e\u30c7\u30fc\u30bf\u304b\u3089\u4f5c\u3063\u305f\u6563\u5e03\u56f3\u3002\nHC-SR04\u306f\u4e0a\u8a18\u306e\u7406\u7531\u304b\u3089100cm\u672a\u6e80\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066\u3044\u308b\u3002\n\n\u3053\u306e\u6563\u5e03\u56f3\u304b\u3089\u300c\u8ddd\u96e2-\u96fb\u5727\u300d\u95a2\u4fc2\u5f0f\u3092\u4f5c\u308d\u3046\u3068\u601d\u3063\u305f\u304c\u3001\u5f8c\u8ff0\u306e\u7406\u7531\u304b\u3089\u30da\u30f3\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u3044\u308b\u3002\n\n\u5b9f\u6e2c\u3068\u306e\u6bd4\u8f03\nHC-SR04\u306e\u6e2c\u5b9a\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001\u5b9f\u6e2c\u3068\u6bd4\u8f03\u3057\u3066\u307f\u305f\u3002\n100cm\u4ee5\u9060\u306f\u6e2c\u5b9a\u306e\u3070\u3089\u3064\u304d\u304c\u5927\u304d\u3044\u305f\u3081100cm\u672a\u6e80\u3067\u78ba\u8a8d\u3002\n\n\n\nA:HC-SR04 (cm)\nB:\u5b9f\u6e2c (cm)\nA/B\n\n\n\n\n85.97\n90\n0.955\n\n\n66.92\n70\n0.956\n\n\n46.61\n50\n0.932\n\n\n28.06\n30\n0.935\n\n\n\n\u5b9f\u6e2c\u3068\u6bd4\u3079\u3066HC-SR04\u306e\u5024\u304c\u5c0f\u3055\u304f\u3067\u305f\u3002\n\u97f3\u901f\u3092340m/s\u56fa\u5b9a\u306b\u3057\u3066\u3044\u308b\u5f71\u97ff\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u305d\u306e\u4fc2\u6570A/B\u306e\u5024\u304c\u8ddd\u96e2\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u3002\n\n\u7d50\u8ad6\n\u7d50\u679c\u3068\u3057\u3066HC-SR04\u306e\u6e2c\u5b9a\u5024\u3092\u4f7f\u3046\u5834\u5408\u3001\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u601d\u3046\u3002\n\n\u7d76\u5bfe\u5024\u6821\u6b63 (\u6821\u6b63\u4fc2\u6570\u81ea\u4f53\u304c\u8ddd\u96e2\u306e\u95a2\u6570\u304b\u3082\u3057\u308c\u306a\u3044)\n100cm\u672a\u6e80\u306e\u30c7\u30fc\u30bf\u306b\u5236\u9650\u3059\u308b\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u51e6\u7406\u3092\u884c\u3044GP2Y0A710K \u306e\u95a2\u4fc2\u5f0f\u306b\u4f7f\u3046\u3088\u308a\u306f\u3001\u5b9f\u6e2c\u3057\u306a\u304c\u3089GP2Y0A710K \u5358\u4f53\u6e2c\u5b9a\u3057\u305f\u30c7\u30fc\u30bf\u3067\u95a2\u4fc2\u5f0f\u3092\u4f7f\u3046\u65b9\u304c\u6b63\u78ba\u3067\u3042\u308b\u3088\u3046\u306b\u601d\u308f\u308c\u308b\u3002\n\ncode v0.5\n\n\u540c\u6642\u6e2c\u5b9a\u30b3\u30fc\u30c9 > kTrigPin\u5f85\u6a5f\u6642\u9593\u8a02\u6b63\nkTrigPin\u3092H\u30ec\u30d9\u30eb\u306b\u3057\u305f\u5f8c\u306e\u5f85\u6a5f\u6642\u9593\u3092\u9593\u9055\u3063\u3066msec\u5358\u4f4d\u3068\u3057\u3066\u3044\u305f\u3002usec\u5358\u4f4d\u306b\u5909\u66f4\u3057\u305f\u3002\nv0.5 @ github\n\u8a02\u6b63\u3057\u305f\u30b3\u30fc\u30c9\u306725\u56de\u306e\u6e2c\u5b9a\u30c7\u30fc\u30bf\u3092\u898b\u308b\u3068\u3001\u3084\u306f\u308a\u5c0f\u3055\u3044\u5024\u304c\u305f\u304f\u3055\u3093\u6e2c\u5b9a\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n109.65,\n10.13,\n7.38,\n9.18,\n5.75,\n24.79,\n9.32,\n5.78,\n100.47,\n34.82,\n8.57,\n7.38,\n7.41,\n7.41,\n9.35,\n5.75,\n7.45,\n102.10,\n33.22,\n9.35,\n6.56,\n23.97,\n10.06,\n5.75,\n90.54,\n\n```txt:\u52d5\u4f5c\u74b0\u5883\nESP-WROOM-02 (\u4ee5\u4e0bESP8266)\n\u6607\u5727\u56de\u8def (3V -> 5V) (http://akizukidenshi.com/catalog/g/gM-03451/)\n\u8ddd\u96e2\u30bb\u30f3\u30b5\u30fc: HC-SR04 (http://akizukidenshi.com/catalog/g/gM-08762/)\n\u8ddd\u96e2\u30bb\u30f3\u30b5\u30fc: GP2Y0A710K (http://akizukidenshi.com/catalog/g/gI-03157/)\nArduino IDE v1.6.6\n```\n\nhttp://qiita.com/7of9/items/193181bb1a8c7b873aaf\n\u306e\u7d9a\u304d\u3002\n\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\u3092\u3057\u305f\u3002\n\n\n## \u56de\u8def\u56f3\nGP2Y0A710K\u3082\u63a5\u7d9a\u3059\u308b\u6642\u306e\u56de\u8def\u56f3\u306f\u4ee5\u4e0b\u3068\u306a\u308b\u3002\nFTDI\u30a2\u30c0\u30d7\u30bf\u306e\u63a5\u7d9a\u306f\u7701\u7565\u3057\u305f\u3002\nhttps://upverter.com/7of9/0440e7247433a89e/160710_ESP8266_HC-SR04_GP2Y0A710K/\n\n## \u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\n\n### \u5de6\u5074\u9762\u304b\u3089\n\n\u53f3\u4e0b\u306f\u96fb\u6c60CR-123A\u3002\u7e26\u306b\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3001CR-123A\u30b1\u30fc\u30b9\u3068L\u578b\u30d4\u30f3\u30d8\u30c3\u30c0\u3092\u4f7f\u3063\u3066\u300c\u629c\u304d\u5dee\u3057\u3067\u304d\u308b\u300d\u3088\u3046\u306b\u3057\u305f\u3002\n\u5de6\u624b\u524d\u304cGP2Y0A710K\u3001\u5de6\u5965\u304cHC-SR04 (FTDI\u30a2\u30c0\u30d7\u30bf\u306b\u96a0\u308c\u3066\u3044\u308b\uff09\u3002\n\n![DSC_0185.JPG](https://qiita-image-store.s3.amazonaws.com/0/32870/6e10e831-2984-20e0-2ba8-fe618b6bf558.jpeg)\n\n### \u80cc\u9762\u304b\u3089\n\n\u5de6\u624b\u524d\u3001\u96fb\u6c60\u306eL\u578b\u30d4\u30f3\u30d8\u30c3\u30c0\u304c\u898b\u3048\u3066\u3044\u308b\u3002\u30d4\u30f3\u30d8\u30c3\u30c0\u306eGND\u30d4\u30f3\u3092CR-123A\u30b1\u30fc\u30b9\u306b\u76f4\u63a5\u534a\u7530\u4ed8\u3051\u3057\u3066\u3001\u30d7\u30e9\u30b9\u30d4\u30f3\u306f\u30b1\u30fc\u30b9\u306b\u8d64\u306e\u30ea\u30fc\u30c9\u3067\u63a5\u7d9a\u3002\n\n![DSC_0186.JPG](https://qiita-image-store.s3.amazonaws.com/0/32870/a816766c-309a-c9ec-8c49-d74a208c6877.jpeg)\n\n### \u53f3\u5074\u9762\u304b\u3089\n\n\u5de6\u624b\u524d\u306e\u30b9\u30a4\u30c3\u30c1\u306fIO0\u306eH/L\u5207\u66ff\u7528\u3002\u30bd\u30d5\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6642\u306f\u624b\u524d\u306b\u30b9\u30a4\u30c3\u30c1\u3055\u305b\u308b\u3002\n\n![DSC_0187.JPG](https://qiita-image-store.s3.amazonaws.com/0/32870/7a40138a-e26e-0629-f88d-bd5957b99574.jpeg)\n\n### \u4e0a\u9762\u304b\u3089\n\n\u5de6\u771f\u3093\u4e2d\u306b\u3042\u308b\u7dd1\u8272\u306e\u3082\u306e\u306f\u6607\u5727\u56de\u8def(3V->5V)\u3002\n\n![DSC_0188.JPG](https://qiita-image-store.s3.amazonaws.com/0/32870/647c2dd9-7f23-ddd4-7fdf-23e5e6007177.jpeg)\n\n\n## \u540c\u6642\u6e2c\u5b9a\u7528\u30b3\u30fc\u30c9 > \u9593\u9055\u3063\u305f\u30b3\u30fc\u30c9\n\n<font color=red>\n(\u8ffd\u8a18 2016/07/11)\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u306fkTrigPin\u3092H\u30ec\u30d9\u30eb\u306b\u3057\u305f\u5f8c100msec\u5f85\u6a5f\u3057\u3066\u3044\u308b\u3002\u5f85\u6a5f\u6642\u9593\u306e\u5358\u4f4d\u304c\u9593\u9055\u3063\u3066\u3044\u3066\u3001\u6b63\u3057\u304f\u306f10usec\u4ee5\u4e0a\u3067\u3042\u3063\u305f\u3002\n</font>\n\n### code\n\n- HC-SR04 : Trigger\u3092HIGH,LOW\u3057\u3066\u3001~~Echo\u304c\u8fd4\u308b\u6642\u9593\u304b\u3089\u8ddd\u96e2\u3092\u8a08\u6e2c~~ (2016/07/12\u8a02\u6b63: ECHO\u30d4\u30f3\u304cH\u30ec\u30d9\u30eb\u306b\u306a\u3063\u3066\u3044\u308b\u5e45\u304b\u3089\u8ddd\u96e2\u3092\u8a08\u6e2c)\n- GP2Y0A710K : AD\u53d6\u8fbc\u307f\u30021/3\u62b5\u6297\u5206\u5727\u3057\u305f\u5024\u3092\u53d6\u308b\u3002\u6700\u59271.0V\u7a0b\u5ea6\u306b\u306a\u308b\u3002\n\n[v0.2 @ github](https://github.com/yasokada/esp8266_160710_HC-SR04_GP2Y0A710K/releases/tag/v0.2)\n\n```c:esp8266_160710_HC-SR04_GP2Y0A710K.ino\n#include <ESP8266WiFi.h>\n\nextern \"C\" {\n#include \"user_interface.h\"\n}\n\n/*\n * v0.2 2016 Jul. 10\n *   - add ADC for GP2Y0A710K\n * v0.1 2016 Jul. 09\n *   - calculate distance in [cm]\n *   - receive echo in loop() \n *   - send trigger in loop()\n *   - set pinMode() at setup()\n */\n\nstatic const int kTrigPin = 12;\nstatic const int kEchoPin = 13;\n\nvoid setup() {\n  WiFi.disconnect(); // avoid watchdog reset by WiFi thread\n\n  Serial.begin(115200);\n  Serial.println(\"\");\n\n  pinMode(kTrigPin, OUTPUT);\n  pinMode(kEchoPin, INPUT);\n}\n\nvoid loop() {\n  // trigger\n  digitalWrite(kTrigPin, HIGH);\n  delay(100); // msec\n  digitalWrite(kTrigPin, LOW);\n\n  // echo\n  int interval_us;\n  interval_us = pulseIn(kEchoPin, HIGH) / 2; // 2: round-trip\n  \n//  Serial.print(interval_us);\n//  Serial.print(\", \");\n  \n  float dst_m = (float)interval_us * 340.0 / 1000.0 / 1000.0;\n  float dst_cm = dst_m * 100.0;\n\n  uint ADvalue;\n  ADvalue = system_adc_read();\n  float voltage = ADvalue * 1.0 / 1024;\n\n  Serial.print(dst_cm);\n  Serial.print(\"\\t\");\n  Serial.print(voltage);\n  Serial.println();\n    \n  delay(300); // msec\n\n//  delay(1000); // msec\n}\n```\n\n### \u7d50\u679c\n\n\u5de6\u304cHC-SR04\u306e\u6e2c\u5b9a\u5024(\u8ddd\u96e2[cm])\u3001\u53f3\u304cGP2Y0A710K\u306e\u6e2c\u5b9a\u5024(1/3\u5206\u5727\u3057\u305f\u96fb\u5727[V])\u3002\n\n```txt:\u7d50\u679c\n14.62\t0.72\n17.58\t0.70\n0.88\t0.70\n17.58\t0.71\n17.14\t0.70\n12.17\t0.72\n13.87\t0.70\n18.02\t0.72\n17.58\t0.71\n16.35\t0.72\n13.84\t0.70\n4.45\t0.70\n13.84\t0.70\n1.70\t0.71\n13.80\t0.72\n14.65\t0.70\n2.48\t0.70\n14.25\t0.70\n16.69\t0.71\n14.69\t0.70\n3.23\t0.71\n17.58\t0.71\n12.58\t0.72\n14.25\t0.70\n3.33\t0.70\n13.80\t0.72\n17.58\t0.71\n14.69\t0.71\n14.28\t0.69\n3.33\t0.72\n17.58\t0.70\n12.17\t0.72\n```\n\n## TODO\n\n\u4e0a\u8a18\u306e\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\u3067\u306f\u524d\u5f8c\u306b\u79fb\u52d5\u3057\u305f\u6642\u306bFTDI\u30a2\u30c0\u30d7\u30bf\u306e\u53d6\u308a\u6271\u3044\u304c\u969c\u5bb3\u306b\u306a\u308b\u3002\nudpLogger\u306b\u6e2c\u5b9a\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067FTDI\u30a2\u30c0\u30d7\u30bf\u3092\u5916\u3059\u4e88\u5b9a\u3002\n\n\u3042\u3068\u306f\u3001HC-SR04\u3068GP2Y0A710K \u304c\u53cd\u5c04\u7269\u306b\u304d\u3061\u3093\u3068\u6b63\u5bfe\u3059\u308b\u3088\u3046\u306b\u7269\u7406\u7684\u306a\u30c6\u30b9\u30c8\u30d9\u30f3\u30c1\u3092\u4f5c\u308b\u3053\u3068\u3060\u304c\u3001\u72ed\u3044\u65e5\u672c\u5bb6\u5c4b\u3067\u306f\u7c21\u6613\u7684\u306a\u3082\u306e\u3057\u304b\u7528\u610f\u3067\u304d\u306a\u3044\u3060\u308d\u3046\u3002\n\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u5b9f\u88c5\u3068\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb\u57fa\u677f\u5b9f\u88c5\u3067\u306f\u30ce\u30a4\u30ba\u306e\u89b3\u70b9\u304b\u3089\u6b63\u78ba\u3055\u304c\u5909\u308f\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u7cbe\u5ea6\u3092\u4e0a\u3052\u308b\u65b9\u6cd5\u306f\u4eca\u5f8c\u691c\u8a0e\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n## code v0.3\n\nudpLogger\u3078\u30c7\u30fc\u30bf\u9001\u4fe1\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\u3053\u308c\u3067FTDI\u30a2\u30c0\u30d7\u30bf\u306f\u5916\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n[v0.3 @ github](https://github.com/yasokada/esp8266_160710_HC-SR04_GP2Y0A710K/releases/tag/v0.3)\n\n\u8a66\u3057\u6e2c\u5b9a\u3067\u4ee5\u4e0b\u306e\u30b0\u30e9\u30d5\u304c\u5f97\u3089\u308c\u305f\u3002\n\u5de6\u4e0a\u306b\u304a\u304b\u3057\u306a\u70b9\u304c\u898b\u3089\u308c\u308b\u3002\n\u6570\u3092\u5897\u3084\u305b\u3070\u5f71\u97ff\u306f\u5c11\u306a\u3044\u3068\u671f\u5f85\u3059\u308b\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/12a48776-8133-17c5-a197-969d984a31a4.png)\n\n380\u6e2c\u5b9a\u306e\u7d50\u679c\u3002\u8ddd\u96e2\u3092160cm\u307e\u3067\u6e2c\u5b9a\u3057\u305f\u3002\n\u7d50\u69cb\u30ce\u30a4\u30ba\u304c\u591a\u3044\u3002\n\u307e\u305f\u3001\u96fb\u5727\u304c\u98fd\u548c\u3057\u3066\u3044\u308b\u30021/3\u5206\u5727\u3067\u306f\u8db3\u308a\u306a\u3044\u3088\u3046\u3060\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/88db540b-b131-7930-9881-81f4911e60c1.png)\n\n\u8ddd\u96e2\u3092\u7e2e\u3081\u306a\u304c\u3089\u6e2c\u5b9a\u3057\u305f\u5834\u5408\u306e\u305d\u308c\u305e\u308c\u306e\u6e2c\u5b9a\u5024\u304c\u4ee5\u4e0b\u3002\nHC-SR04\u5074\u306e\u6e2c\u5b9a\u5024\u304c\u3070\u3089\u3064\u3044\u3066\u3044\u308b\u305f\u3081\u3001\u304d\u308c\u3044\u306a\u95a2\u4fc2\u56f3\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u306a\u3044\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/3d7f5d91-3986-b733-19f8-ed195a62859b.png)\n\n## code v0.4\n\n### \u62b5\u6297\u5206\u5727\u306e\u5909\u66f4\n\nGP2Y0A710K \u306e\u6e2c\u5b9a\u6642\u306b\u98fd\u548c\u3059\u308b\u554f\u984c\u306b\u5bfe\u3057\u3066\u300110k + 10k + 10k\u306b\u3088\u308b1/3\u5206\u5727\u3067\u306a\u304f\u300110k + 10k + 4.7k\u3067\u306e0.19\u306e\u5206\u5727\u3068\u3057\u305f\u3002\n\n### \u7570\u5e38\u5024\u306e\u9664\u53bb\n\n[v0.4 @ github](https://github.com/yasokada/esp8266_160710_HC-SR04_GP2Y0A710K/releases/tag/v0.4)\n\nHC-SR04\u306e\u6e2c\u5b9a\u306e\u30ce\u30a4\u30ba\u3092\u6e1b\u3089\u3059\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\u4e3b\u306a\u51e6\u7406\u306f\u4ee5\u4e0b\u3002\n\n- 25\u56de\u306e\u6e2c\u5b9a\u3092\u884c\u3044\u3001\u4e0a\u4f4d1/5\u306e\u4f4d\u7f6e\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u3046\n\n25\u56de\u306e\u6e2c\u5b9a\u5024\u3092\u898b\u305f\u6642\u306b\u8ddd\u96e2\u304c130cm\u306f\u3042\u308a\u305d\u3046\u306a\u3068\u3053\u308d\u3067\u30016\u5272\u308a\u8fd1\u304f\u306b12cm\u306a\u3069\u306e\u660e\u3089\u304b\u306b\u5c0f\u3055\u3044\u7570\u5e38\u5024\u304c\u898b\u3089\u308c\u305f\u3002\u305d\u306e\u305f\u3081\u4e0a\u8a18\u306e\u51e6\u7406\u3068\u3057\u305f\u3002\n\n\u3053\u306e\u75c7\u72b6\u304cHC-SR04\u4e00\u822c\u7684\u306a\u3053\u3068\u304b\u306f\u5206\u304b\u3089\u306a\u3044\u3002\n\n### \u6e2c\u5b9a\u7d50\u679c > \u8ddd\u96e2\u3092\u5909\u3048\u306a\u304c\u3089\u6e2c\u5b9a\n\n\u6e2c\u5b9a\u30c7\u30fc\u30bf\u306f\u4ee5\u4e0b\u3068\u306a\u3063\u305f\u3002\nHC-SR04\u6e2c\u5b9a\u306b\u6539\u5584\u304c\u898b\u3089\u308c\u305f\u3002\n\n\u305f\u3060\u3057\u3001\u8ddd\u96e2\u304c100cm\u4ee5\u9060\u306e\u90e8\u5206\u3067\u3084\u306f\u308a\u5024\u306e\u5909\u5316\u304c\u5927\u304d\u3044\u3002\n\nGP2Y0710K\u306e\u6e2c\u5b9a\u5024\u306f\u5b89\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/ab764167-7d23-9f7c-8b8e-b07e311ac53f.png)\n\nHC-SR04\u306e\u30c7\u30fc\u30bf\u3068GP2Y0A710K\u306e\u30c7\u30fc\u30bf\u304b\u3089\u4f5c\u3063\u305f\u6563\u5e03\u56f3\u3002\nHC-SR04\u306f\u4e0a\u8a18\u306e\u7406\u7531\u304b\u3089100cm\u672a\u6e80\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066\u3044\u308b\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/526478dc-8b7e-02bb-eae0-9ede4be57c23.png)\n\n\u3053\u306e\u6563\u5e03\u56f3\u304b\u3089\u300c\u8ddd\u96e2-\u96fb\u5727\u300d\u95a2\u4fc2\u5f0f\u3092\u4f5c\u308d\u3046\u3068\u601d\u3063\u305f\u304c\u3001\u5f8c\u8ff0\u306e\u7406\u7531\u304b\u3089\u30da\u30f3\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u3044\u308b\u3002\n\n### \u5b9f\u6e2c\u3068\u306e\u6bd4\u8f03\n\nHC-SR04\u306e\u6e2c\u5b9a\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001\u5b9f\u6e2c\u3068\u6bd4\u8f03\u3057\u3066\u307f\u305f\u3002\n100cm\u4ee5\u9060\u306f\u6e2c\u5b9a\u306e\u3070\u3089\u3064\u304d\u304c\u5927\u304d\u3044\u305f\u3081100cm\u672a\u6e80\u3067\u78ba\u8a8d\u3002\n\n| A:HC-SR04 (cm) | B:\u5b9f\u6e2c (cm) | A/B |\n|:-:|:-:|:-:|\n| 85.97 | 90 | 0.955 |\n| 66.92 | 70 | 0.956 |\n| 46.61 | 50 | 0.932 |\n| 28.06 | 30 | 0.935 |\n\n\u5b9f\u6e2c\u3068\u6bd4\u3079\u3066HC-SR04\u306e\u5024\u304c\u5c0f\u3055\u304f\u3067\u305f\u3002\n\u97f3\u901f\u3092340m/s\u56fa\u5b9a\u306b\u3057\u3066\u3044\u308b\u5f71\u97ff\u3082\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u305d\u306e\u4fc2\u6570A/B\u306e\u5024\u304c\u8ddd\u96e2\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u3002\n\n### \u7d50\u8ad6\n\n\u7d50\u679c\u3068\u3057\u3066HC-SR04\u306e\u6e2c\u5b9a\u5024\u3092\u4f7f\u3046\u5834\u5408\u3001\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u601d\u3046\u3002\n\n- \u7d76\u5bfe\u5024\u6821\u6b63 (\u6821\u6b63\u4fc2\u6570\u81ea\u4f53\u304c\u8ddd\u96e2\u306e\u95a2\u6570\u304b\u3082\u3057\u308c\u306a\u3044)\n- 100cm\u672a\u6e80\u306e\u30c7\u30fc\u30bf\u306b\u5236\u9650\u3059\u308b\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u51e6\u7406\u3092\u884c\u3044GP2Y0A710K \u306e\u95a2\u4fc2\u5f0f\u306b\u4f7f\u3046\u3088\u308a\u306f\u3001\u5b9f\u6e2c\u3057\u306a\u304c\u3089GP2Y0A710K \u5358\u4f53\u6e2c\u5b9a\u3057\u305f\u30c7\u30fc\u30bf\u3067\u95a2\u4fc2\u5f0f\u3092\u4f7f\u3046\u65b9\u304c\u6b63\u78ba\u3067\u3042\u308b\u3088\u3046\u306b\u601d\u308f\u308c\u308b\u3002\n\n\n## code v0.5\n\n### \u540c\u6642\u6e2c\u5b9a\u30b3\u30fc\u30c9 > kTrigPin\u5f85\u6a5f\u6642\u9593\u8a02\u6b63\n\nkTrigPin\u3092H\u30ec\u30d9\u30eb\u306b\u3057\u305f\u5f8c\u306e\u5f85\u6a5f\u6642\u9593\u3092\u9593\u9055\u3063\u3066msec\u5358\u4f4d\u3068\u3057\u3066\u3044\u305f\u3002usec\u5358\u4f4d\u306b\u5909\u66f4\u3057\u305f\u3002\n\n[v0.5 @ github](https://github.com/yasokada/esp8266_160710_HC-SR04_GP2Y0A710K/releases/tag/v0.5)\n\n\u8a02\u6b63\u3057\u305f\u30b3\u30fc\u30c9\u306725\u56de\u306e\u6e2c\u5b9a\u30c7\u30fc\u30bf\u3092\u898b\u308b\u3068\u3001\u3084\u306f\u308a\u5c0f\u3055\u3044\u5024\u304c\u305f\u304f\u3055\u3093\u6e2c\u5b9a\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\n```\n109.65,\n10.13,\n7.38,\n9.18,\n5.75,\n24.79,\n9.32,\n5.78,\n100.47,\n34.82,\n8.57,\n7.38,\n7.41,\n7.41,\n9.35,\n5.75,\n7.45,\n102.10,\n33.22,\n9.35,\n6.56,\n23.97,\n10.06,\n5.75,\n90.54,\n```\n", "tags": ["borgSensorSystem1", "ESP8266", "universalCircuit"]}