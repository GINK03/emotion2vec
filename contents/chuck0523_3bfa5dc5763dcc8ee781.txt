{"tags": ["RethinkDB", "Node.js", "Thinky", "WebAPI", "Express.js"], "context": "\u9023\u65e5\u4f3c\u305f\u3088\u3046\u306a\u6295\u7a3f\u3070\u304b\u308a\u3067\u3059\u307f\u307e\u305b\u3093\u2026\u3002\n\u4ee5\u524d\u3001\u3053\u3093\u306a\u6295\u7a3f\u3092\u3057\u307e\u3057\u305f\u3002\n\nExpress\u3068RethinkDB\u3067\u4f5c\u308bRESTful\u306aWebAPI\nThinky\u3092\u4f7f\u3063\u305fRethinkDB REST API\n\n\u3053\u306e\u8a18\u4e8b\u306f\u2191\u306e\uff12\u3064\u3092\u6df7\u305c\u3064\u3064\u3001\u5b9f\u969b\u306b\u52d5\u304f\u30ec\u30d9\u30eb\u307e\u3067\u6301\u3063\u3066\u3044\u305f\u8a18\u9332\u306b\u306a\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001RethinkDB\u3078\u306e\u64cd\u4f5c\u3092ORM\u306eThinky\u3067\u30ab\u30f3\u30bf\u30f3\u306b\u884c\u3044\u3064\u3064\u3001Express\u3092\u4f7f\u3063\u3066RESTful\u306aWebAPI\u5316\u3057\u307e\u3057\u305f\u3002\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3060\u3051\u307f\u305f\u3044\u3001\u3068\u3044\u3046\u65b9\u306f\u3053\u3061\u3089\u306b\u30a2\u30c3\u30d7\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\nRethinkDB\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u7acb\u3061\u4e0a\u3052\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nMacOS\u306e\u65b9\u306fhomebrew\u304b\u3089\u3069\u3046\u305e\u3002\n$ brew update && brew install rethinkdb\n$ rethinkdb # \u7acb\u3061\u4e0a\u3052\n\n\n\u30bb\u30c3\u30c8\u30fb\u30a2\u30c3\u30d7\n\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ npm init -y\n$ npm install --save express thinky body-parser\n\npackage.json\u306f\u3060\u3044\u305f\u3044\u3053\u3093\u306a\u611f\u3058\u3002\n{\n  \"name\": \"express-thinky-api\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"start\": \"node server.js\"\n  },\n  \"dependencies\": {\n    \"body-parser\": \"^1.15.2\",\n    \"express\": \"^4.14.0\",\n    \"thinky\": \"^2.3.6\"\n  }\n}\n\n\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0WebAPI\u4f5c\u6210\n\u3053\u3053\u304b\u3089\u306f\u3001\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0WebAPI\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\nThinky\u521d\u671f\u5316\n\u307e\u305a\u306f\u3001thinky\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\u305d\u306e\u969b\u306b\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u30bb\u30c3\u30c8\u30fb\u30a2\u30c3\u30d7\u60c5\u5831\u3092\u6e21\u3057\u307e\u3059\u3002\n// ./thinky.js\nvar thinky = require('thinky')({\n  host: 'localhost',\n  port: 28015,\n  db: 'People'\n})\n\nmodule.exports = thinky\n\n\n\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n\u307e\u305a\u306f\u3001\u64cd\u4f5c\u5bfe\u8c61\u3068\u306a\u308b\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nNode.js\u304b\u3089RethinkDB\u3092\u64cd\u4f5c\u3059\u308bthinky\u3092require\u3057\u307e\u3059\u3002\n// ./schema.js\nconst thinky = require('./thinky')\nvar r = thinky.r\n\nvar People = thinky.createModel('People', {\n  firstName: String,\n  lastName: String,\n  coolnessFactor: Number,\n  date: { _type: Date, default: r.now() }\n})\nPeople.ensureIndex('date')\n\nmodule.exports = People\n\nPeople\u3068\u3044\u3046\u540d\u524d\u3067\u30e2\u30c7\u30eb\u3092\u751f\u6210\u3057\u307e\u3057\u305f\u3002\nThinky\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nnode.js\u3067RethinkDB\u3092\u6271\u3046\u305f\u3081\u306eORM \"Thinky\" \u3092\u8a66\u3057\u3066\u307f\u305f\n\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u5316\nRethinkDB\u306e\u7279\u5fb4\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u3001People\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30ed\u30ae\u30f3\u30b0\u6a5f\u80fd\u3092\u4ed8\u3051\u52a0\u3048\u307e\u3059\u3002\n// ./realtime.js\nconst stringify = (doc) => {\n  return JSON.stringify(doc, null, 2)\n}\n\nconst realtimeLogging = (Model) => {\n  Model.changes().then((feed) => {\n    feed.each((err, doc) => {\n      if (err) {\n        console.log(err)\n        process.exit(1)\n      }\n\n      if (doc.isSaved() === false) {\n        console.log(\"The following document was deleted:\")\n        console.log(stringify(doc))\n      } else if (doc.getOldValue() === null) {\n        console.log(\"A new document was inserted:\")\n        console.log(stringify(doc))\n      } else {\n        console.log(\"A document was updated.\")\n        console.log(stringify(doc.getOldValue()))\n        console.log(\"New value:\")\n        console.log(stringify(doc))\n      }\n    })\n  }).error((err) => {\n    console.log(err)\n    process.exit(1)\n  })\n}\n\nmodule.exports = realtimeLogging\n\n\u3061\u3087\u3063\u3068\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u3053\u3053\u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 \u30ed\u30ae\u30f3\u30b0\u95a2\u6570\u306e\u5b9a\u7fa9\n\n\nchanges\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u3001\u5909\u66f4\u3092\u76e3\u8996\uff08\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\u30fb\u524a\u9664\u30fb\u66f4\u65b0\u304c\u30d5\u30c3\u30af\u306b\u306a\u308a\u307e\u3059\uff09\n\u5909\u66f4\u306e\u3042\u3063\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff08\u3044\u308f\u3086\u308bRow\uff09\u3092\u30ed\u30b0\u51fa\u529b\n\n\n\n\nAPI\u4f5c\u6210\nAPI\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u5fdc\u3058\u3066\u547c\u3070\u308c\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n'use strict'\n\nconst thinky = require('./thinky')\nconst r = thinky.r\n\nconst People = require('./schema')\n\n// \u4e00\u89a7\u53d6\u5f97\nexports.list = function (req, res) {\n  People.orderBy({ index: r.desc('date') }).run().then((people) => {\n    res.json(people)\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u4f5c\u6210\nexports.add = function (req, res) {\n  var person = new People(req.body)\n  person.save().then((result) => {\n    res.json(result)\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u53d6\u5f97\nexports.get = function (req, res) {\n  People.get(req.params.id).run().then((person) => {\n    res.json(person)\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u524a\u9664\nexports.delete = function (req, res) {\n  People.get(req.params.id).run().then((person) => {\n    person.delete().then((result) => {\n      res.json(result)\n    }).error((err) => {\n      res.json({ message: err })\n    })\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u66f4\u65b0\nexports.update = function (req, res) {\n  People.get(req.params.id).run().then((person) => {\n    if(req.body.firstName) {\n      person.firstName = req.body.firstName\n    }\n\n    if(req.body.lastName) {\n      person.lastName = req.body.lastName\n    }\n\n    if(req.body.coolnessFactor) {\n      person.coolnessFactor = parseInt(req.body.coolnessFactor)\n    }\n    person.data = r.now()\n\n    person.save().then((result) => {\n      res.json(result)\n    }).error((err) => {\n      res.json({ message: err})\n    })\n  })\n}\n\n\u8a73\u3057\u304f\u306fReQL\uff08RethinkDB\u306e\u30af\u30a8\u30ea\uff09\u306eAPI\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nhttps://www.rethinkdb.com/api/javascript/\n\n\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u4f5c\u6210\n\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u547c\u3070\u308c\u3066\u5b9f\u884c\u3055\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u306d\u3002\n// ./server.js\nconst express = require('express')\nconst bodyParser = require('body-parser')\n\nconst app = express()\n\napp.use(express.static(__dirname + '/public'))\napp.use(bodyParser.json())\n\n// \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30ed\u30ae\u30f3\u30b0\u4ed8\u4e0e\nconst People = require('./schema')\nconst realtimeLogging = require('./realtime')\nrealtimeLogging(People)\n\n// API\u5229\u7528\nconst api = require('./api')\napp.get('/api/people', api.list)\napp.get('/api/people/:id', api.get)\napp.delete('/api/people/:id', api.delete)\napp.put('/api/people/:id', api.update)\napp.post('/api/people', api.add)\n\napp.listen(3000)\n\n\n\u8d77\u52d5\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u53e9\u3044\u3066\u3001WebAPI\u3092\u7acb\u3061\u4e0a\u3052\u307e\u3057\u3087\u3046\u3002\n$ npm start\n\n\u3042\u308b\u3044\u306f\u3001\n$ node server.js\n\n\u3000\n\u3053\u308c\u3067\u3001http://localhost:3000/api/people \u306a\u3093\u3066\u53e9\u304f\u3068\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u64cd\u4f5c\u3092\u884c\u3046\u305f\u3073\u306b\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n\u4f59\u8ac7\nGUI\u30c4\u30fc\u30eb\u304c\u6b32\u3057\u3044\u65b9\u306f\u3001ReQLPro\u304c\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\nRethinkDB\u306eReQLPro\u3068\u3044\u3046GUI\u30c4\u30fc\u30eb\u304c\u3044\u3044\u611f\u3058\n\n\n\u9023\u65e5\u4f3c\u305f\u3088\u3046\u306a\u6295\u7a3f\u3070\u304b\u308a\u3067\u3059\u307f\u307e\u305b\u3093\u2026\u3002\n\n\u4ee5\u524d\u3001\u3053\u3093\u306a\u6295\u7a3f\u3092\u3057\u307e\u3057\u305f\u3002\n\n- [Express\u3068RethinkDB\u3067\u4f5c\u308bRESTful\u306aWebAPI](http://qiita.com/chuck0523/items/c7fc23952868927560f5)\n- [Thinky\u3092\u4f7f\u3063\u305fRethinkDB REST API](http://qiita.com/chuck0523/items/137a54925ae1c3845a41)\n\n\u3053\u306e\u8a18\u4e8b\u306f\u2191\u306e\uff12\u3064\u3092\u6df7\u305c\u3064\u3064\u3001\u5b9f\u969b\u306b\u52d5\u304f\u30ec\u30d9\u30eb\u307e\u3067\u6301\u3063\u3066\u3044\u305f\u8a18\u9332\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3064\u307e\u308a\u3001RethinkDB\u3078\u306e\u64cd\u4f5c\u3092ORM\u306eThinky\u3067\u30ab\u30f3\u30bf\u30f3\u306b\u884c\u3044\u3064\u3064\u3001Express\u3092\u4f7f\u3063\u3066RESTful\u306aWebAPI\u5316\u3057\u307e\u3057\u305f\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3060\u3051\u307f\u305f\u3044\u3001\u3068\u3044\u3046\u65b9\u306f[\u3053\u3061\u3089](https://github.com/chuck0523/learning-langs/tree/gh-pages/js/rethinkdb/express-thinky-api)\u306b\u30a2\u30c3\u30d7\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n\n# \u524d\u63d0\u6761\u4ef6\n\nRethinkDB\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u7acb\u3061\u4e0a\u3052\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nMacOS\u306e\u65b9\u306fhomebrew\u304b\u3089\u3069\u3046\u305e\u3002\n\n```bash\n$ brew update && brew install rethinkdb\n$ rethinkdb # \u7acb\u3061\u4e0a\u3052\n```\n\n\n# \u30bb\u30c3\u30c8\u30fb\u30a2\u30c3\u30d7\n\n\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ npm init -y\n$ npm install --save express thinky body-parser\n```\n\npackage.json\u306f\u3060\u3044\u305f\u3044\u3053\u3093\u306a\u611f\u3058\u3002\n\n```json\n{\n  \"name\": \"express-thinky-api\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"start\": \"node server.js\"\n  },\n  \"dependencies\": {\n    \"body-parser\": \"^1.15.2\",\n    \"express\": \"^4.14.0\",\n    \"thinky\": \"^2.3.6\"\n  }\n}\n```\n\n# \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0WebAPI\u4f5c\u6210\n\n\u3053\u3053\u304b\u3089\u306f\u3001\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0WebAPI\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n## Thinky\u521d\u671f\u5316\n\n\u307e\u305a\u306f\u3001thinky\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\u305d\u306e\u969b\u306b\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u30bb\u30c3\u30c8\u30fb\u30a2\u30c3\u30d7\u60c5\u5831\u3092\u6e21\u3057\u307e\u3059\u3002\n\n```js\n// ./thinky.js\nvar thinky = require('thinky')({\n  host: 'localhost',\n  port: 28015,\n  db: 'People'\n})\n\nmodule.exports = thinky\n```\n\n## \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n\n\u307e\u305a\u306f\u3001\u64cd\u4f5c\u5bfe\u8c61\u3068\u306a\u308b\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nNode.js\u304b\u3089RethinkDB\u3092\u64cd\u4f5c\u3059\u308bthinky\u3092require\u3057\u307e\u3059\u3002\n\n```js\n// ./schema.js\nconst thinky = require('./thinky')\nvar r = thinky.r\n\nvar People = thinky.createModel('People', {\n  firstName: String,\n  lastName: String,\n  coolnessFactor: Number,\n  date: { _type: Date, default: r.now() }\n})\nPeople.ensureIndex('date')\n\nmodule.exports = People\n```\n\nPeople\u3068\u3044\u3046\u540d\u524d\u3067\u30e2\u30c7\u30eb\u3092\u751f\u6210\u3057\u307e\u3057\u305f\u3002\n\nThinky\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n[node.js\u3067RethinkDB\u3092\u6271\u3046\u305f\u3081\u306eORM \"Thinky\" \u3092\u8a66\u3057\u3066\u307f\u305f](http://qiita.com/chuck0523/items/c0bd2b3b92b6884205dc)\n\n\n## \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u5316\n\nRethinkDB\u306e\u7279\u5fb4\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6027\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u3001People\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30ed\u30ae\u30f3\u30b0\u6a5f\u80fd\u3092\u4ed8\u3051\u52a0\u3048\u307e\u3059\u3002\n\n```js\n// ./realtime.js\nconst stringify = (doc) => {\n  return JSON.stringify(doc, null, 2)\n}\n\nconst realtimeLogging = (Model) => {\n  Model.changes().then((feed) => {\n    feed.each((err, doc) => {\n      if (err) {\n        console.log(err)\n        process.exit(1)\n      }\n      \n      if (doc.isSaved() === false) {\n        console.log(\"The following document was deleted:\")\n        console.log(stringify(doc))\n      } else if (doc.getOldValue() === null) {\n        console.log(\"A new document was inserted:\")\n        console.log(stringify(doc))\n      } else {\n        console.log(\"A document was updated.\")\n        console.log(stringify(doc.getOldValue()))\n        console.log(\"New value:\")\n        console.log(stringify(doc))\n      }\n    })\n  }).error((err) => {\n    console.log(err)\n    process.exit(1)\n  })\n}\n\nmodule.exports = realtimeLogging\n```\n\n\u3061\u3087\u3063\u3068\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u3053\u3053\u3067\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n- \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0 \u30ed\u30ae\u30f3\u30b0\u95a2\u6570\u306e\u5b9a\u7fa9\n  - changes\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u3001\u5909\u66f4\u3092\u76e3\u8996\uff08\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\u30fb\u524a\u9664\u30fb\u66f4\u65b0\u304c\u30d5\u30c3\u30af\u306b\u306a\u308a\u307e\u3059\uff09\n  - \u5909\u66f4\u306e\u3042\u3063\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff08\u3044\u308f\u3086\u308bRow\uff09\u3092\u30ed\u30b0\u51fa\u529b\n\n\n## API\u4f5c\u6210\n\nAPI\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u5fdc\u3058\u3066\u547c\u3070\u308c\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```js\n'use strict'\n\nconst thinky = require('./thinky')\nconst r = thinky.r\n\nconst People = require('./schema')\n\n// \u4e00\u89a7\u53d6\u5f97\nexports.list = function (req, res) {\n  People.orderBy({ index: r.desc('date') }).run().then((people) => {\n    res.json(people)\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u4f5c\u6210\nexports.add = function (req, res) {\n  var person = new People(req.body)\n  person.save().then((result) => {\n    res.json(result)\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u53d6\u5f97\nexports.get = function (req, res) {\n  People.get(req.params.id).run().then((person) => {\n    res.json(person)\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u524a\u9664\nexports.delete = function (req, res) {\n  People.get(req.params.id).run().then((person) => {\n    person.delete().then((result) => {\n      res.json(result)\n    }).error((err) => {\n      res.json({ message: err })\n    })\n  }).error((err) => {\n    res.json({ message: err })\n  })\n}\n\n// \u66f4\u65b0\nexports.update = function (req, res) {\n  People.get(req.params.id).run().then((person) => {\n    if(req.body.firstName) {\n      person.firstName = req.body.firstName\n    }\n    \n    if(req.body.lastName) {\n      person.lastName = req.body.lastName\n    }\n    \n    if(req.body.coolnessFactor) {\n      person.coolnessFactor = parseInt(req.body.coolnessFactor)\n    }\n    person.data = r.now()\n    \n    person.save().then((result) => {\n      res.json(result)\n    }).error((err) => {\n      res.json({ message: err})\n    })\n  })\n}\n```\n\n\u8a73\u3057\u304f\u306fReQL\uff08RethinkDB\u306e\u30af\u30a8\u30ea\uff09\u306eAPI\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\nhttps://www.rethinkdb.com/api/javascript/\n\n## \u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u4f5c\u6210\n\n\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u547c\u3070\u308c\u3066\u5b9f\u884c\u3055\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u306d\u3002\n\n```js\n// ./server.js\nconst express = require('express')\nconst bodyParser = require('body-parser')\n\nconst app = express()\n\napp.use(express.static(__dirname + '/public'))\napp.use(bodyParser.json())\n\n// \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30ed\u30ae\u30f3\u30b0\u4ed8\u4e0e\nconst People = require('./schema')\nconst realtimeLogging = require('./realtime')\nrealtimeLogging(People)\n\n// API\u5229\u7528\nconst api = require('./api')\napp.get('/api/people', api.list)\napp.get('/api/people/:id', api.get)\napp.delete('/api/people/:id', api.delete)\napp.put('/api/people/:id', api.update)\napp.post('/api/people', api.add)\n\napp.listen(3000)\n```\n\n\n# \u8d77\u52d5\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u53e9\u3044\u3066\u3001WebAPI\u3092\u7acb\u3061\u4e0a\u3052\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ npm start\n```\n\n\u3042\u308b\u3044\u306f\u3001\n\n```bash\n$ node server.js\n```\n\u3000\n\u3053\u308c\u3067\u3001http://localhost:3000/api/people \u306a\u3093\u3066\u53e9\u304f\u3068\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u64cd\u4f5c\u3092\u884c\u3046\u305f\u3073\u306b\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n# \u4f59\u8ac7\n\nGUI\u30c4\u30fc\u30eb\u304c\u6b32\u3057\u3044\u65b9\u306f\u3001ReQLPro\u304c\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\n- [RethinkDB\u306eReQLPro\u3068\u3044\u3046GUI\u30c4\u30fc\u30eb\u304c\u3044\u3044\u611f\u3058\n](http://qiita.com/chuck0523/items/57c36dc5d4f22d9fb6c4)\n"}