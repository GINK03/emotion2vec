{"context": " More than 1 year has passed since last update.X Window System(X11)\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u9589\u3058\u305f\u969b\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u7d4c\u9a13\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":0\"\n      after 543 requests (11 known processed) with 0 events remaining.\n\n\u3053\u308c\u3092\u51fa\u3055\u305a\u306b\u6b63\u3057\u304f\u7d42\u4e86\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6d88\u3059\n\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u610f\u5473\n\u305d\u3082\u305d\u3082\u3069\u3046\u3057\u3066\u3053\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\u969b\u306b\u767a\u884c\u3055\u308c\u308b\u30e1\u30c3\u30bb\u30fc\u30b8(WM_DELETE_WINDOW)\u3092\u53d7\u3051\u53d6\u3089\u305a\u306b\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u9589\u3058\u3089\u308c\u305f\u304b\u3089\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001WM_DELETE_WINDOW\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u6b63\u3057\u304f\u9589\u3058\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u306a\u3044\u8a18\u8ff0\u65b9\u6cd5\n\n\nAtom wm_delete_window = XInternAtom(d, \"WM_DELETE_WINDOW\", False);WM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\nXSetWMProtocols(d, w, &wm_delete_window, 1);\nWM_PROTOCOLS\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u3001\u751f\u6210\u3057\u305f\u30a2\u30c8\u30e0\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u5185\u306eswitch\u6587(event.type\u3067\u5206\u5c90)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u7d42\u4e86\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\ncase ClientMessage:\n    if (event.xclient.data.l[0] == wm_delete_window) {\n        /*\u7d42\u4e86\u51e6\u7406*/\n    }\n    break;\n\n\n\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\n\u3053\u308c\u3067\u3068\u308a\u3042\u3048\u305a\u3001\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u51fa\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u6b21\u306b\u3001\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\u306e\u8a18\u8ff0\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5927\u307e\u304b\u306a\u624b\u9806\n\u7d42\u4e86\u51e6\u7406\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u624b\u9806\u3092\u8e0f\u3080\u3068\u826f\u3044\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n \u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\u3059\u308b\n \u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u7834\u68c4\u3055\u308c\u305f\u969b\u306b\u767a\u884c\u3055\u308c\u308b\u901a\u77e5\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u884c\u3046\n\n\n \u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u63a5\u7d9a\u3092\u5207\u65ad\u3057\u3001\u5168\u3066\u306e\u8cc7\u6e90\u3092\u7834\u68c4\u3059\u308b\n \u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6b63\u5e38\u7d42\u4e86\u3055\u305b\u308b\n\n\n\n\n\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\u306e\u8a18\u8ff0\u65b9\u6cd5\n\n\nXSelectInput(d,w,/*(\u524d\u7565)*/|StructureNotifyMask);\u30a4\u30d9\u30f3\u30c8\u30de\u30b9\u30af\u3092\u6307\u5b9a\u3059\u308b\u969b\u306b\u3001StructureNotifyMask\u3092\u52a0\u3048\u307e\u3059\u3002\n\nXDestroyWindow(d,w);\u7d42\u4e86\u51e6\u7406\u3092\u884c\u3044\u305f\u3044\u7b87\u6240\u306b\u52a0\u3048\u307e\u3059(\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\u3057\u3001DestroyNotify\u30a4\u30d9\u30f3\u30c8\u3092\u547c\u3073\u51fa\u3057\u307e\u3059)\u3002\n\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u5185\u306eswitch\u6587(event.type\u3067\u5206\u5c90)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u7d42\u4e86\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\ncase DestroyNotify:\n    XSetCloseDownMode(d,DestroyAll); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u5207\u65ad\u6642\u306b\u3001\u5168\u3066\u306e\u8cc7\u6e90\u3092\u7834\u68c4\u3059\u308b\u3088\u3046\u8a2d\u5b9a\n    XCloseDisplay(d); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u63a5\u7d9a\u3092\u5207\u65ad\n    return 0; //\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6b63\u5e38\u7d42\u4e86\n\n\n\u6ce8\u610f\u70b9\nStructureNotifyMask\u3092\u30a4\u30d9\u30f3\u30c8\u30de\u30b9\u30af\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001DestroyNotify\u30a4\u30d9\u30f3\u30c8\u4ee5\u5916\u306b\u3082\u3001\u3044\u304f\u3064\u304b\u30a4\u30d9\u30f3\u30c8\u304c\u901a\u77e5\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u305f\u3081\u3001\u3053\u308c\u3089\u306b\u3064\u3044\u3066\u306e\u51e6\u7406\u3082\u8a18\u8ff0\u305b\u306d\u3070\u306a\u308a\u307e\u305b\u3093(\u3053\u306e\u3042\u305f\u308a\u306f\u3042\u307e\u308a\u8a73\u3057\u304f\u306a\u3044\u306e\u3067\u8aac\u660e\u3092\u7701\u7565\u3057\u307e\u3059)\u3002\n\n\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4f8b\nCtrl+E\u3092\u62bc\u3059\u3068\u7d42\u4e86\u3059\u308b\u3060\u3051\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059(\u305d\u308c\u4ee5\u4e0a\u306e\u51e6\u7406\u306f\u5fb9\u5e95\u7684\u306b\u7701\u3044\u3066\u3042\u308a\u307e\u3059)\u3002\n\nexample.c\n#include <stdio.h>\n#include <X11/Xutil.h>\n\n#define D_W 365 //\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u5e45\n#define D_H D_W //\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u9ad8\u3055\n\n/*\u30e1\u30a4\u30f3\u95a2\u6570*/\nint main()\n{\n    Display                    * const d = XOpenDisplay(NULL);\n    const unsigned long            black = BlackPixel(d,0); //\u9ed2\u30d4\u30af\u30bb\u30eb\n    const unsigned long            white = WhitePixel(d,0); //\u767d\u30d4\u30af\u30bb\u30eb\n    const Window                       w = XCreateSimpleWindow(d,RootWindow(d,0),0,0, D_W, D_H,1,black,white); //\u30a6\u30a3\u30f3\u30c9\u30a6\n    Atom                wm_delete_window = XInternAtom(d, \"WM_DELETE_WINDOW\", False); //WM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\n    Bool                       ctrl_flag = False; //Ctrl\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\n    KeySym                           sym; //\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\n    XEvent                         event; //\u30a4\u30d9\u30f3\u30c8\n\n    XSetWMProtocols(d, w, &wm_delete_window, 1); //WM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\u3092WM_PROTOCOLS\u306b\u8a2d\u5b9a(\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u9589\u3058\u3089\u308c\u305f\u3089\u77e5\u3089\u305b\u308b\u3088\u3046\u306b\u8a2d\u5b9a)\n\n    XMapWindow(d,w); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u95a2\u9023\u4ed8\u3051\u308b\n    XSelectInput(d,w,KeyPressMask|KeyReleaseMask|StructureNotifyMask); //\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7\u3092\u30bb\u30c3\u30c8\n\n    /*\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7*/\n    while(True){\n        XNextEvent(d,&event); //\u30a4\u30d9\u30f3\u30c8\u53d6\u5f97\n        /*\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7\u306b\u3088\u3063\u3066\u5206\u5c90*/\n        switch (event.type){\n            /*\u30ad\u30fc\u304c\u62bc\u3055\u308c\u305f\u3068\u304d*/\n            case KeyPress:\n                sym = XLookupKeysym(&event.xkey, 0); //\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\u3092\u53d6\u5f97\n                if(sym==XK_Control_L || sym==XK_Control_R){ //Ctrl\u30ad\u30fc\u304c\u62bc\u3055\u308c\u305f\u3068\u304d\n                    ctrl_flag =True; //Ctrl\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u308b\n                } else if(ctrl_flag){ //Ctrl\u30ad\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u3068\u304d\n                    /*\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\u3067\u5206\u5c90*/\n                    switch (sym){\n                        /*\u300ee\u300f\u304c\u62bc\u3055\u308c\u305f\u3068\u304d*/\n                        case XK_e:\n                            XDestroyWindow(d,w); //\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\n                            break;\n                        /*\u305d\u308c\u4ee5\u5916\u306e\u3068\u304d*/\n                        default:\n                            break;\n                    }\n                }\n                break;\n            /*\u30ad\u30fc\u304b\u3089\u6307\u304c\u96e2\u308c\u305f\u3068\u304d*/\n            case KeyRelease:\n                sym = XLookupKeysym(&event.xkey, 0); //\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\u3092\u53d6\u5f97\n                if(sym==XK_Control_L || sym==XK_Control_R){ //Ctrl\u30ad\u30fc\u304b\u3089\u6307\u304c\u96e2\u308c\u305f\u3068\u304d\n                    ctrl_flag = False; //Ctrl\u30d5\u30e9\u30b0\u3092\u6298\u308b\n                }\n                break;\n            /*\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u304d\u305f\u3068\u304d*/\n            case ClientMessage:\n                /*event\u306e\u30a2\u30c8\u30e0\u304cWM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\u3068\u4e00\u81f4\u3059\u308b\u3068\u304d(\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u9589\u3058\u3089\u308c\u305f\u3068\u304d)*/\n                if (event.xclient.data.l[0] == wm_delete_window) {\n                    XDestroyWindow(d,w); //\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\n                }\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u7834\u68c4\u3055\u308c\u305f\u3068\u304d*/\n            case DestroyNotify:\n                XSetCloseDownMode(d,DestroyAll); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u5207\u65ad\u6642\u306b\u3001\u5168\u3066\u306e\u8cc7\u6e90\u3092\u7834\u68c4\u3059\u308b\u3088\u3046\u8a2d\u5b9a\n                XCloseDisplay(d); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u63a5\u7d9a\u3092\u5207\u65ad\n                return 0; //\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6b63\u5e38\u7d42\u4e86\n            /*\u30ad\u30fc\u30dc\u30fc\u30c9\u3084\u30dd\u30a4\u30f3\u30bf\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d*/\n            case MappingNotify:\n                XRefreshKeyboardMapping(&event.xmapping); //\u30ad\u30fc\u30dc\u30fc\u30c9\u60c5\u5831\u306e\u66f4\u65b0\n                break;\n            /*\u30ea\u30b5\u30a4\u30ba\u3055\u308c\u305f\u3068\u304d*/\n            case ConfigureNotify:\n                XClearWindow(d,w); //\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u30af\u30ea\u30a2\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u30de\u30c3\u30d7\u3055\u308c\u305f\u3068\u304d*/\n            case MapNotify:\n                printf(\"\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u30de\u30c3\u30d7\u3055\u308c\u307e\u3057\u305f\u3002\\n\");\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304b\u3089\u30a2\u30f3\u30de\u30c3\u30d7\u3055\u308c\u305f\u3068\u304d*/\n            case UnmapNotify:\n                printf(\"\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304b\u3089\u30a2\u30f3\u30de\u30c3\u30d7\u3055\u308c\u307e\u3057\u305f\u3002\\n\");\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u89aa\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d*/\n            case ReparentNotify:\n                printf(\"\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u89aa\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\\n\");\n                break;\n            /*\u305d\u308c\u4ee5\u5916\u306e\u3068\u304d*/\n            default:\n                fprintf(stderr,\"\u60f3\u5b9a\u5916\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f(\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7 : %d)\u3002\\n\", event.type); //\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\n                break;\n        }\n    }\n}\n\n\n\n\u53c2\u8003\u6587\u732e\n\nclear/wm_devel/2011-08-16 - \u96fb\u6c17\u901a\u4fe1\u5927\u5b66MMA\n\n\n\u95a2\u9023\u8a18\u4e8b\n\ngtk - \u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u7cfb\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u3044\u305fC\u8a00\u8a9e\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u969b\u306eCMakeLists.txt\u306e\u8a18\u8ff0\u306b\u3064\u3044\u3066(gcc\u306e\u30b3\u30de\u30f3\u30c9\u4ed8\u304d) - Qiita\n\nX Window System(X11)\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u9589\u3058\u305f\u969b\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u7d4c\u9a13\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":0\"\n      after 543 requests (11 known processed) with 0 events remaining.\n```\n\n\u3053\u308c\u3092\u51fa\u3055\u305a\u306b\u6b63\u3057\u304f\u7d42\u4e86\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6d88\u3059\n##\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u610f\u5473\n\u305d\u3082\u305d\u3082\u3069\u3046\u3057\u3066\u3053\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u308b\u304b\u3068\u3044\u3046\u3068\u3001__\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\u969b\u306b\u767a\u884c\u3055\u308c\u308b\u30e1\u30c3\u30bb\u30fc\u30b8(WM_DELETE_WINDOW)\u3092\u53d7\u3051\u53d6\u3089\u305a\u306b\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u9589\u3058\u3089\u308c\u305f\u304b\u3089__\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001__WM_DELETE_WINDOW\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u6b63\u3057\u304f\u9589\u3058\u308b__\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\n##\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u306a\u3044\u8a18\u8ff0\u65b9\u6cd5\n1. `Atom wm_delete_window = XInternAtom(d, \"WM_DELETE_WINDOW\", False);`<br>WM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n2. `XSetWMProtocols(d, w, &wm_delete_window, 1);`<br>\nWM_PROTOCOLS\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u3001\u751f\u6210\u3057\u305f\u30a2\u30c8\u30e0\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n3. \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u5185\u306eswitch\u6587(event.type\u3067\u5206\u5c90)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u7d42\u4e86\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```c\ncase ClientMessage:\n    if (event.xclient.data.l[0] == wm_delete_window) {\n        /*\u7d42\u4e86\u51e6\u7406*/\n    }\n    break;\n```\n\n#\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\n\u3053\u308c\u3067\u3068\u308a\u3042\u3048\u305a\u3001\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u51fa\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u6b21\u306b\u3001\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\u306e\u8a18\u8ff0\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n##\u5927\u307e\u304b\u306a\u624b\u9806\n\u7d42\u4e86\u51e6\u7406\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u624b\u9806\u3092\u8e0f\u3080\u3068\u826f\u3044\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n1.  \u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\u3059\u308b\n2.  \u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u7834\u68c4\u3055\u308c\u305f\u969b\u306b\u767a\u884c\u3055\u308c\u308b\u901a\u77e5\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u884c\u3046\n  3.  \u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u63a5\u7d9a\u3092\u5207\u65ad\u3057\u3001\u5168\u3066\u306e\u8cc7\u6e90\u3092\u7834\u68c4\u3059\u308b\n  3.  \u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6b63\u5e38\u7d42\u4e86\u3055\u305b\u308b\n\n##\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\u306e\u8a18\u8ff0\u65b9\u6cd5\n\n1. `XSelectInput(d,w,/*(\u524d\u7565)*/|StructureNotifyMask);`<br>\u30a4\u30d9\u30f3\u30c8\u30de\u30b9\u30af\u3092\u6307\u5b9a\u3059\u308b\u969b\u306b\u3001`StructureNotifyMask`\u3092\u52a0\u3048\u307e\u3059\u3002\n3. `XDestroyWindow(d,w);`<br>\u7d42\u4e86\u51e6\u7406\u3092\u884c\u3044\u305f\u3044\u7b87\u6240\u306b\u52a0\u3048\u307e\u3059(\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\u3057\u3001`DestroyNotify`\u30a4\u30d9\u30f3\u30c8\u3092\u547c\u3073\u51fa\u3057\u307e\u3059)\u3002\n2. \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u5185\u306eswitch\u6587(event.type\u3067\u5206\u5c90)\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u7d42\u4e86\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```c\ncase DestroyNotify:\n    XSetCloseDownMode(d,DestroyAll); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u5207\u65ad\u6642\u306b\u3001\u5168\u3066\u306e\u8cc7\u6e90\u3092\u7834\u68c4\u3059\u308b\u3088\u3046\u8a2d\u5b9a\n    XCloseDisplay(d); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u63a5\u7d9a\u3092\u5207\u65ad\n    return 0; //\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6b63\u5e38\u7d42\u4e86\n```\n\n###\u6ce8\u610f\u70b9\n`StructureNotifyMask`\u3092\u30a4\u30d9\u30f3\u30c8\u30de\u30b9\u30af\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001`DestroyNotify`\u30a4\u30d9\u30f3\u30c8\u4ee5\u5916\u306b\u3082\u3001\u3044\u304f\u3064\u304b\u30a4\u30d9\u30f3\u30c8\u304c\u901a\u77e5\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u305f\u3081\u3001\u3053\u308c\u3089\u306b\u3064\u3044\u3066\u306e\u51e6\u7406\u3082\u8a18\u8ff0\u305b\u306d\u3070\u306a\u308a\u307e\u305b\u3093(\u3053\u306e\u3042\u305f\u308a\u306f\u3042\u307e\u308a\u8a73\u3057\u304f\u306a\u3044\u306e\u3067\u8aac\u660e\u3092\u7701\u7565\u3057\u307e\u3059)\u3002\n\n#\u6b63\u3057\u3044\u7d42\u4e86\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4f8b\nCtrl+E\u3092\u62bc\u3059\u3068\u7d42\u4e86\u3059\u308b\u3060\u3051\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059(\u305d\u308c\u4ee5\u4e0a\u306e\u51e6\u7406\u306f\u5fb9\u5e95\u7684\u306b\u7701\u3044\u3066\u3042\u308a\u307e\u3059)\u3002\n\n```example.c\n#include <stdio.h>\n#include <X11/Xutil.h>\n\n#define D_W 365 //\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u5e45\n#define D_H D_W //\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u9ad8\u3055\n\n/*\u30e1\u30a4\u30f3\u95a2\u6570*/\nint main()\n{\n    Display                    * const d = XOpenDisplay(NULL);\n    const unsigned long            black = BlackPixel(d,0); //\u9ed2\u30d4\u30af\u30bb\u30eb\n    const unsigned long            white = WhitePixel(d,0); //\u767d\u30d4\u30af\u30bb\u30eb\n    const Window                       w = XCreateSimpleWindow(d,RootWindow(d,0),0,0, D_W, D_H,1,black,white); //\u30a6\u30a3\u30f3\u30c9\u30a6\n    Atom                wm_delete_window = XInternAtom(d, \"WM_DELETE_WINDOW\", False); //WM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\n    Bool                       ctrl_flag = False; //Ctrl\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\n    KeySym                           sym; //\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\n    XEvent                         event; //\u30a4\u30d9\u30f3\u30c8\n\n    XSetWMProtocols(d, w, &wm_delete_window, 1); //WM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\u3092WM_PROTOCOLS\u306b\u8a2d\u5b9a(\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u9589\u3058\u3089\u308c\u305f\u3089\u77e5\u3089\u305b\u308b\u3088\u3046\u306b\u8a2d\u5b9a)\n\n    XMapWindow(d,w); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u95a2\u9023\u4ed8\u3051\u308b\n    XSelectInput(d,w,KeyPressMask|KeyReleaseMask|StructureNotifyMask); //\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7\u3092\u30bb\u30c3\u30c8\n\n    /*\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7*/\n    while(True){\n        XNextEvent(d,&event); //\u30a4\u30d9\u30f3\u30c8\u53d6\u5f97\n        /*\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7\u306b\u3088\u3063\u3066\u5206\u5c90*/\n        switch (event.type){\n            /*\u30ad\u30fc\u304c\u62bc\u3055\u308c\u305f\u3068\u304d*/\n            case KeyPress:\n                sym = XLookupKeysym(&event.xkey, 0); //\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\u3092\u53d6\u5f97\n                if(sym==XK_Control_L || sym==XK_Control_R){ //Ctrl\u30ad\u30fc\u304c\u62bc\u3055\u308c\u305f\u3068\u304d\n                    ctrl_flag =True; //Ctrl\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u308b\n                } else if(ctrl_flag){ //Ctrl\u30ad\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u3068\u304d\n                    /*\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\u3067\u5206\u5c90*/\n                    switch (sym){\n                        /*\u300ee\u300f\u304c\u62bc\u3055\u308c\u305f\u3068\u304d*/\n                        case XK_e:\n                            XDestroyWindow(d,w); //\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\n                            break;\n                        /*\u305d\u308c\u4ee5\u5916\u306e\u3068\u304d*/\n                        default:\n                            break;\n                    }\n                }\n                break;\n            /*\u30ad\u30fc\u304b\u3089\u6307\u304c\u96e2\u308c\u305f\u3068\u304d*/\n            case KeyRelease:\n                sym = XLookupKeysym(&event.xkey, 0); //\u30ad\u30fc\u30b7\u30f3\u30dc\u30eb\u3092\u53d6\u5f97\n                if(sym==XK_Control_L || sym==XK_Control_R){ //Ctrl\u30ad\u30fc\u304b\u3089\u6307\u304c\u96e2\u308c\u305f\u3068\u304d\n                    ctrl_flag = False; //Ctrl\u30d5\u30e9\u30b0\u3092\u6298\u308b\n                }\n                break;\n            /*\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u304d\u305f\u3068\u304d*/\n            case ClientMessage:\n                /*event\u306e\u30a2\u30c8\u30e0\u304cWM_DELETE_WINDOW\u306e\u30a2\u30c8\u30e0\u3068\u4e00\u81f4\u3059\u308b\u3068\u304d(\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u9589\u3058\u3089\u308c\u305f\u3068\u304d)*/\n                if (event.xclient.data.l[0] == wm_delete_window) {\n                    XDestroyWindow(d,w); //\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7834\u68c4\n                }\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u7834\u68c4\u3055\u308c\u305f\u3068\u304d*/\n            case DestroyNotify:\n                XSetCloseDownMode(d,DestroyAll); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u5207\u65ad\u6642\u306b\u3001\u5168\u3066\u306e\u8cc7\u6e90\u3092\u7834\u68c4\u3059\u308b\u3088\u3046\u8a2d\u5b9a\n                XCloseDisplay(d); //\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3068\u306e\u63a5\u7d9a\u3092\u5207\u65ad\n                return 0; //\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6b63\u5e38\u7d42\u4e86\n            /*\u30ad\u30fc\u30dc\u30fc\u30c9\u3084\u30dd\u30a4\u30f3\u30bf\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d*/\n            case MappingNotify:\n                XRefreshKeyboardMapping(&event.xmapping); //\u30ad\u30fc\u30dc\u30fc\u30c9\u60c5\u5831\u306e\u66f4\u65b0\n                break;\n            /*\u30ea\u30b5\u30a4\u30ba\u3055\u308c\u305f\u3068\u304d*/\n            case ConfigureNotify:\n                XClearWindow(d,w); //\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u30af\u30ea\u30a2\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u30de\u30c3\u30d7\u3055\u308c\u305f\u3068\u304d*/\n            case MapNotify:\n                printf(\"\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u30de\u30c3\u30d7\u3055\u308c\u307e\u3057\u305f\u3002\\n\");\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304b\u3089\u30a2\u30f3\u30de\u30c3\u30d7\u3055\u308c\u305f\u3068\u304d*/\n            case UnmapNotify:\n                printf(\"\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304b\u3089\u30a2\u30f3\u30de\u30c3\u30d7\u3055\u308c\u307e\u3057\u305f\u3002\\n\");\n                break;\n            /*\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u89aa\u304c\u5909\u66f4\u3055\u308c\u305f\u3068\u304d*/\n            case ReparentNotify:\n                printf(\"\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u89aa\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\\n\");\n                break;\n            /*\u305d\u308c\u4ee5\u5916\u306e\u3068\u304d*/\n            default:\n                fprintf(stderr,\"\u60f3\u5b9a\u5916\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f(\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7 : %d)\u3002\\n\", event.type); //\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\n                break;\n        }\n    }\n}\n```\n\n#\u53c2\u8003\u6587\u732e\n* [clear/wm_devel/2011-08-16 - \u96fb\u6c17\u901a\u4fe1\u5927\u5b66MMA](https://wiki.mma.club.uec.ac.jp/clear/wm_devel/2011-08-16)\n\n#\u95a2\u9023\u8a18\u4e8b\n* [gtk - \u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u7cfb\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u3044\u305fC\u8a00\u8a9e\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u969b\u306eCMakeLists.txt\u306e\u8a18\u8ff0\u306b\u3064\u3044\u3066(gcc\u306e\u30b3\u30de\u30f3\u30c9\u4ed8\u304d) - Qiita](http://qiita.com/SUZUKI_Masaya/items/c3ed8ae693beed1a926b)\n", "tags": ["C\u8a00\u8a9e", "X11"]}