{"tags": ["Django", "Curry"], "context": " More than 1 year has passed since last update.\u4f8b\u3048\u3070\u30a4\u30d9\u30f3\u30c8\u53c2\u52a0\u8005\u3092\u6307\u5b9a\u3059\u308b\u30d5\u30a9\u30fc\u30e0:\n\n    class CompanionForm(forms.ModelForm):\n        def __init__(self, event=None, *args, **kwargs):\n            # \u30a2\u30eb\u30b3\u30fc\u30eb\u304c\u51fa\u308b\u30a4\u30d9\u30f3\u30c8\u306b\u53c2\u52a0\u3059\u308b\u540c\u884c\u8005\u306f\u5e74\u9f62\u3092\u5165\u529b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n            if event.with_alcoholic_drink:\n                self.base_fields['age'] = forms.TextInput(required=True)\n\n            super(CompanionForm, self).__init__(*args, **kwargs)\n\n\n\u7533\u3057\u8fbc\u307f\u306e\u540c\u884c\u8005\u304c\u8907\u6570\u3044\u308b\u306e\u3067\u3001inlineformset_factory\u3067\u3001\u8907\u6570\u306eCompanionForm\u3092\u4f5c\u6210\u3057\u305f\u3044\u3002\n\u304c\u3001inlineformset_factory\u3067\u751f\u6210\u3057\u305f\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u30af\u30e9\u30b9\u306b\u306f\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u306b\u6e21\u3059\u5f15\u6570\u3092\u6307\u5b9a\u3067\u304d\u306a\u3044\u3002\ninlineformset_factory \u306f\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u5165\u529b\u3059\u308b\u30d5\u30a9\u30fc\u30e0\u306e\u30af\u30e9\u30b9\u3092\"form\"\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u30bb\u30c3\u30c8\u3059\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5f15\u6570\u3092Curry\u5316\u3057\u305fstaticmethod\u3067\u30ea\u30d7\u30ec\u30fc\u30b9\u3057\u3066\u3084\u308b\u3068\u3001\n\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306einit()\u306e\u4e2d\u306e\u3069\u3053\u304b\u3067\u547c\u3070\u308c\u308b\u3001\n    self.form(**initial_parameter) \n\n\u3067\u5404\u30a4\u30f3\u30e9\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u3092\u4f5c\u308b\u6642\u306b\u5b9f\u969b\u306e\u30a4\u30f3\u30e9\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u3092\u521d\u671f\u5316\u3059\u308b\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u30d8\u30eb\u30d1\u30fc\u3092\u4f5c\u3063\u3066\u5bfe\u5fdc\n\n    class OrderCompanionFormset(BaseInlineFormSet):\n        # ... Order-Companion \u306e\u95a2\u4fc2\u30e2\u30c7\u30eb\u306e\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u3092\u3054\u306b\u3087\u3054\u306b\u3087\u3059\u308b\n\n    from django.utils.functional import curry\n\n    def create_companion_formset(request, event, order, initial={})\n        formset = inlineformset_factory(\n            Order, Companion,\n            form=CompanionForm,\n            fromset=OrderCompanionFormset )\n\n        # form \u3092 event\u5f15\u6570\u3067curry\u5316\n        formset.form = staticmethod(curry(formset.form, event=event))\n\n        ...\n        return formset(data=request.POST or None\n                       instance=order, initial=initial{})\n\n\n\n\n\u4f8b\u3048\u3070\u30a4\u30d9\u30f3\u30c8\u53c2\u52a0\u8005\u3092\u6307\u5b9a\u3059\u308b\u30d5\u30a9\u30fc\u30e0:\n\n```py\n\n    class CompanionForm(forms.ModelForm):\n        def __init__(self, event=None, *args, **kwargs):\n            # \u30a2\u30eb\u30b3\u30fc\u30eb\u304c\u51fa\u308b\u30a4\u30d9\u30f3\u30c8\u306b\u53c2\u52a0\u3059\u308b\u540c\u884c\u8005\u306f\u5e74\u9f62\u3092\u5165\u529b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n            if event.with_alcoholic_drink:\n                self.base_fields['age'] = forms.TextInput(required=True)\n                \n            super(CompanionForm, self).__init__(*args, **kwargs)\n\n```\n\n\u7533\u3057\u8fbc\u307f\u306e\u540c\u884c\u8005\u304c\u8907\u6570\u3044\u308b\u306e\u3067\u3001inlineformset_factory\u3067\u3001\u8907\u6570\u306eCompanionForm\u3092\u4f5c\u6210\u3057\u305f\u3044\u3002\n\n\u304c\u3001inlineformset_factory\u3067\u751f\u6210\u3057\u305f\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u30af\u30e9\u30b9\u306b\u306f\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u306b\u6e21\u3059\u5f15\u6570\u3092\u6307\u5b9a\u3067\u304d\u306a\u3044\u3002\n\ninlineformset_factory \u306f\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u5165\u529b\u3059\u308b\u30d5\u30a9\u30fc\u30e0\u306e\u30af\u30e9\u30b9\u3092\"form\"\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u30bb\u30c3\u30c8\u3059\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5f15\u6570\u3092Curry\u5316\u3057\u305fstaticmethod\u3067\u30ea\u30d7\u30ec\u30fc\u30b9\u3057\u3066\u3084\u308b\u3068\u3001\n\n\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e__init__()\u306e\u4e2d\u306e\u3069\u3053\u304b\u3067\u547c\u3070\u308c\u308b\u3001\n\n```\n    self.form(**initial_parameter) \n```\n \n\u3067\u5404\u30a4\u30f3\u30e9\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u3092\u4f5c\u308b\u6642\u306b\u5b9f\u969b\u306e\u30a4\u30f3\u30e9\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u3092\u521d\u671f\u5316\u3059\u308b\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\u30d8\u30eb\u30d1\u30fc\u3092\u4f5c\u3063\u3066\u5bfe\u5fdc\n\n```py\n\n    class OrderCompanionFormset(BaseInlineFormSet):\n        # ... Order-Companion \u306e\u95a2\u4fc2\u30e2\u30c7\u30eb\u306e\u30d5\u30a9\u30fc\u30e0\u30bb\u30c3\u30c8\u3092\u3054\u306b\u3087\u3054\u306b\u3087\u3059\u308b\n\n    from django.utils.functional import curry\n\n    def create_companion_formset(request, event, order, initial={})\n        formset = inlineformset_factory(\n            Order, Companion,\n            form=CompanionForm,\n            fromset=OrderCompanionFormset )\n            \n        # form \u3092 event\u5f15\u6570\u3067curry\u5316\n        formset.form = staticmethod(curry(formset.form, event=event))\n        \n        ...\n        return formset(data=request.POST or None\n                       instance=order, initial=initial{})\n        \n```\n"}