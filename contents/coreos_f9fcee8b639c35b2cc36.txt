{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u6628\u4eca\u306eLinux\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u30fb\u7ba1\u7406\u306bsystemd\u3068\u3044\u3046\u540d\u524d\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u63a1\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u307e\u3067\u306fupstart\u3068\u3044\u3046\u540d\u524d\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u4e3b\u6d41\u3067\u3057\u305f\u304c\u3001\u73fe\u5728\u306f\u5927\u534a\u306eLinux\u7cfbOS\u304csystemd\u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001systemd\u306e\u4ed5\u69d8\u306b\u6163\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nupstart\u306b\u304a\u3051\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u7b49\n\nupstart\n$ service \u30b5\u30fc\u30d3\u30b9\u540d start/restart/stop\n\u307e\u305f\u306f\u3001\n$ /etc/init.d/\u30b5\u30fc\u30d3\u30b9\u540d start/restart/stop\n\n\nsystemd\u306b\u304a\u3051\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u7b49\n\nsystemd\n$ systemctl start/restart/stop \u30b5\u30fc\u30d3\u30b9\u540d\n\n\n\n\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u3092\u5909\u66f4\u3059\u308b\n/etc/systemd/resolved.conf\u306eDNS\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u3001\u53c2\u7167\u3057\u305f\u3044\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u3092\u8ffd\u8a18\u3059\u308b\u3053\u3068\u3067\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001BIND, dnsmasq, unbound\u306a\u3069\u306eDNS\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u306e\u30a2\u30c9\u30ec\u30b9\u304c192.168.0.2\u3060\u3068\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n/etc/systemd/resolved.conf\n#  This file is part of systemd.\n# ...\n# See resolved.conf(5) for details\n\n[Resolve]\nDNS=192.168.0.2\n#FallbackDNS=\n#LLMNR=yes\n\n\nsystemd\u306b\u304a\u3044\u3066\u3001\u540d\u524d\u89e3\u6c7a\u3092\u7ba1\u7406\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ systemctl restart systemd-resolved.service\n\n\u4ee5\u4e0a\u3067\u53c2\u7167\u3059\u308b\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306e\u4fee\u6b63\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\u540d\u524d\u89e3\u6c7a\u304c\u53cd\u6620\u3055\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u5074\u306eDNS\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308c\u3070\u3046\u307e\u304f\u3044\u304f\u3088\u3046\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u4ee5\u4e0b\u306e\u9805\u76ee\u306f\u88dc\u8db3\u3067\u3059\u3002\n\nsystemd\u306b\u304a\u3051\u308bresolv.conf\nsystemd\u306b\u304a\u3044\u3066/etc/resolv.conf\u306f\u3001/run/systemd/resolve/resolv.conf\u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002/etc/resolv.conf\u3092\u4fee\u6b63\u3057\u3066\u3082\u305d\u306e\u5909\u66f4\u306f\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002\n $ ls -l /etc/resolv.conf \nlrwxrwxrwx 1 root root 34 Nov 19 10:31 /etc/resolv.conf \n -> ../run/systemd/resolve/resolv.conf\n\nsystemd\u306b\u304a\u3051\u308bresolv.conf\u306e\u5b9f\u614b\u306f\u3001/run/systemd/resolve/resolv.conf\u3067\u3059\u3002\u305f\u3060\u3057\u3001/etc/resolv.conf`\u3068\u540c\u3058\u3088\u3046\u306b\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u76f4\u63a5\u4fee\u6b63\u3057\u3066\u3082\u305d\u306e\u5909\u66f4\u306f\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002\n\n/run/systemd/resolve/resolv.conf\n# This file is managed by systemd-resolved(8). Do not edit.\n#\n# Third party programs must not access this file directly, but\n# only through the symlink at /etc/resolv.conf. To manage\n# resolv.conf(5) in a different way, replace the symlink by a\n# static file or a different symlink.\n\nnameserver 192.168.0.1\n\n\n\nsystemd-resolved.service\nsystemd\u3067\u306f\u3001Unit\u3068\u3044\u3046\u5358\u4f4d\u3067\u51e6\u7406\u3092\u7ba1\u7406\u3057\u3001Unit\u306e\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306f\u3001/usr/lib/systemd/system\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002Unit\u306b\u95a2\u3059\u308b\u8a73\u7d30\u306f\u3053\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n/run/systemd/resolve/resolv.conf\u3092\u898b\u308b\u3068\u5192\u982d\u90e8\u5206\u306b\u300cThis file is managed by systemd-resolved(8).\u300d\u3068\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u3001\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u306fsystemd-resolved\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308b\u3068\u3001\u53c2\u7167\u3059\u308bDNS\u30b5\u30fc\u30d0\uff08\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\uff09\u306f\u3001\u4e0b\u8a18\u306e\uff13\u3064\u304b\u3089\u6c7a\u5b9a\u3055\u308c\u308b\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u3044\u3065\u308c\u304b\u306e\u65b9\u6cd5\u3067DNS\u30b5\u30fc\u30d0\u306e\u53c2\u7167\u5148\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n/etc/systemd/resolved.conf\n\n/etc/systemd/network/*.network\n\nDHCP\n\n\n\u6700\u5f8c\u306b\nsystemd\u306b\u304a\u3051\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u7ba1\u7406\u8a73\u7d30\u306f\u3001\u4e3b\u306b\u3053\u3061\u3089\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n# \u306f\u3058\u3081\u306b\n\u6628\u4eca\u306eLinux\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u30fb\u7ba1\u7406\u306bsystemd\u3068\u3044\u3046\u540d\u524d\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u63a1\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u307e\u3067\u306fupstart\u3068\u3044\u3046\u540d\u524d\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u4e3b\u6d41\u3067\u3057\u305f\u304c\u3001\u73fe\u5728\u306f\u5927\u534a\u306eLinux\u7cfbOS\u304csystemd\u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001systemd\u306e\u4ed5\u69d8\u306b\u6163\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nupstart\u306b\u304a\u3051\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u7b49\n\n```lang:upstart\n$ service \u30b5\u30fc\u30d3\u30b9\u540d start/restart/stop\n\u307e\u305f\u306f\u3001\n$ /etc/init.d/\u30b5\u30fc\u30d3\u30b9\u540d start/restart/stop\n```\n\nsystemd\u306b\u304a\u3051\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u7b49\n\n```lang:systemd\n$ systemctl start/restart/stop \u30b5\u30fc\u30d3\u30b9\u540d\n```\n\n# \u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u3092\u5909\u66f4\u3059\u308b\n`/etc/systemd/resolved.conf`\u306eDNS\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u3001\u53c2\u7167\u3057\u305f\u3044\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u3092\u8ffd\u8a18\u3059\u308b\u3053\u3068\u3067\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001BIND, dnsmasq, unbound\u306a\u3069\u306eDNS\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u306e\u30a2\u30c9\u30ec\u30b9\u304c192.168.0.2\u3060\u3068\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```lang:/etc/systemd/resolved.conf\n#  This file is part of systemd.\n# ...\n# See resolved.conf(5) for details\n\n[Resolve]\nDNS=192.168.0.2\n#FallbackDNS=\n#LLMNR=yes\n```\n\nsystemd\u306b\u304a\u3044\u3066\u3001\u540d\u524d\u89e3\u6c7a\u3092\u7ba1\u7406\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n$ systemctl restart systemd-resolved.service\n```\n\n\u4ee5\u4e0a\u3067\u53c2\u7167\u3059\u308b\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306e\u4fee\u6b63\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\u540d\u524d\u89e3\u6c7a\u304c\u53cd\u6620\u3055\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u5074\u306eDNS\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308c\u3070\u3046\u307e\u304f\u3044\u304f\u3088\u3046\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u4ee5\u4e0b\u306e\u9805\u76ee\u306f\u88dc\u8db3\u3067\u3059\u3002\n\n# systemd\u306b\u304a\u3051\u308bresolv.conf\nsystemd\u306b\u304a\u3044\u3066`/etc/resolv.conf`\u306f\u3001`/run/systemd/resolve/resolv.conf`\u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002`/etc/resolv.conf`\u3092\u4fee\u6b63\u3057\u3066\u3082\u305d\u306e\u5909\u66f4\u306f\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002\n\n```\n $ ls -l /etc/resolv.conf \nlrwxrwxrwx 1 root root 34 Nov 19 10:31 /etc/resolv.conf \n -> ../run/systemd/resolve/resolv.conf\n```\n\nsystemd\u306b\u304a\u3051\u308bresolv.conf\u306e\u5b9f\u614b\u306f\u3001`/run/systemd/resolve/resolv.conf`\u3067\u3059\u3002\u305f\u3060\u3057\u3001/etc/resolv.conf`\u3068\u540c\u3058\u3088\u3046\u306b\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u76f4\u63a5\u4fee\u6b63\u3057\u3066\u3082\u305d\u306e\u5909\u66f4\u306f\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002\n\n```lang:/run/systemd/resolve/resolv.conf \n# This file is managed by systemd-resolved(8). Do not edit.\n#\n# Third party programs must not access this file directly, but\n# only through the symlink at /etc/resolv.conf. To manage\n# resolv.conf(5) in a different way, replace the symlink by a\n# static file or a different symlink.\n\nnameserver 192.168.0.1\n```\n\n# systemd-resolved.service\nsystemd\u3067\u306f\u3001Unit\u3068\u3044\u3046\u5358\u4f4d\u3067\u51e6\u7406\u3092\u7ba1\u7406\u3057\u3001Unit\u306e\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306f\u3001`/usr/lib/systemd/system`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002Unit\u306b\u95a2\u3059\u308b\u8a73\u7d30\u306f[\u3053\u3061\u3089](http://enakai00.hatenablog.com/entry/20130914/1379146157)\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n`/run/systemd/resolve/resolv.conf`\u3092\u898b\u308b\u3068\u5192\u982d\u90e8\u5206\u306b\u300cThis file is managed by systemd-resolved(8).\u300d\u3068\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u3001\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u306fsystemd-resolved\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n[\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://www.freedesktop.org/software/systemd/man/systemd-resolved.service.html)\u306b\u3088\u308b\u3068\u3001\u53c2\u7167\u3059\u308bDNS\u30b5\u30fc\u30d0\uff08\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\uff09\u0010\u306f\u3001\u4e0b\u8a18\u306e\uff13\u3064\u304b\u3089\u6c7a\u5b9a\u3055\u308c\u308b\u3068\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u3044\u3065\u308c\u304b\u306e\u65b9\u6cd5\u3067DNS\u30b5\u30fc\u30d0\u306e\u53c2\u7167\u5148\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n- [ ] /etc/systemd/resolved.conf\n- [ ] /etc/systemd/network/*.network\n- [ ] DHCP\n\n# \u6700\u5f8c\u306b\nsystemd\u306b\u304a\u3051\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u7ba1\u7406\u8a73\u7d30\u306f\u3001\u4e3b\u306b[\u3053\u3061\u3089](http://www.freedesktop.org/software/systemd/man/index.html)\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n", "tags": ["systemd", "resolv.conf", "NameServer", "Linux"]}