{"tags": ["jira", "CentOS", "nginx"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\u4ed5\u4e8b\u3067JIRA7\u3092\u7acb\u3066\u308b\u5fc5\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u3064\u3044\u3067\u306b\u624b\u9806\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\nJIRA\u4ee5\u5916\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3082\u540c\u3058\u7b50\u4f53\u306b\u7acb\u3066\u308b\u4e88\u5b9a\u3060\u3063\u305f\u306e\u3067\u3001\n\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306bnginx\u3092\u4f7f\u3063\u3066http://localhost:8080/jira\u307f\u305f\u3044\u306a\u5f62\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\n\nJIRA 7\nCentOS 6.7\nnginx 1.8.1\nMySQL 5.6.28\n\n\n\u624b\u9806\n\n1. nginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCentOS6\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308bnginx\u306f\u53e4\u3059\u304e\u308b\u306e\u3067\u3001rpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm\n# yum -y install nginx\n# nginx -v\nnginx version: nginx/1.8.1\n\n\n2. MySQL\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nMySQL\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u53e4\u3059\u304e\u308b\u306e\u3067\u3001rpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# yum install http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm\n# yum -y install mysql mysql-devel mysql-server mysql-utilities\n# mysqld --version\nmysqld  Ver 5.6.28 for Linux on x86_64 (MySQL Community Server (GPL))\n\n\n3. JIRA\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30e6\u30fc\u30b6\u4f5c\u6210\nJIRA\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n# mysql -u root -p\n> create database jira default character set utf8;\n> grant all privileges on jira.* to jira@localhost identified by 'jira';\n> flush privileges;\n> exit\n\n\n4. JIRA\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066JIRA\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306f \u5fc5\u305aroot\u6a29\u9650\u3067\u5b9f\u884c \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001jira\u30b5\u30fc\u30d3\u30b9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306ejira\u30e6\u30fc\u30b6\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n$ wget https://www.atlassian.com/software/jira/downloads/binary/atlassian-jira-software-7.0.10-jira-7.0.10-x64.bin\n$ chmod a+x atlassian-jira-software-7.0.10-jira-7.0.10-x64.bin\n$ sudo ./atlassian-jira-software-7.0.10-jira-7.0.10-x64.bin\n\n\n5. MySQL Connector\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306fMySQL\u3092\u4f7f\u3046\u306e\u3067\u3001MySQL\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066JIRA\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ wget http://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.38.tar.gz\n$ tar xvf mysql-connector-java-5.1.38.tar.gz\n$ cd mysql-connector-java-5.1.38\n$ sudo cp mysql-connector-java-5.1.38-bin.jar /opt/atlassian/jira/lib/\n\n\n6. nginx\u306e\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a\n\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bJIRA\u3092\u914d\u7f6e\u3057\u305f\u3044\u306e\u3067\u3001nginx\u306e\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n/etc/nginx/conf.d/jira.conf\nupstream jira {\n    server 127.0.0.1:8080;\n}\n\nserver {\n    location ~ /jira {\n        root /opt/atlassian/jira;\n        if (-f $request_filename) {\n            break;\n        }\n\n        proxy_read_timeout 300;\n        proxy_connect_timeout 300;\n        proxy_redirect     off;\n\n        proxy_set_header   X-Forwarded-Proto $scheme;\n        proxy_set_header   Host              $http_host;\n        proxy_set_header   X-Real-IP         $remote_addr;\n        proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;\n        proxy_set_header   Host $host;\n\n        proxy_pass         http://jira;\n\n        access_log  /var/log/nginx/jira_access.log;\n        error_log   /var/log/nginx/jira_error.log;\n    }\n}\n\n\n\u52a0\u3048\u3066JIRA\u306eserver.xml\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30d1\u30b9\u306e\u7de8\u96c6\u3082\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n/opt/atlassian/jira/conf/server.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<Server port=\"8005\" shutdown=\"SHUTDOWN\">\n    <Service name=\"Catalina\">\n        <!-- ... -->\n        <Engine name=\"Catalina\" defaultHost=\"localhost\">\n            <Host name=\"localhost\" appBase=\"webapps\" unpackWARs=\"true\" autoDeploy=\"true\">\n                <!-- path\u3092\"\"\u304b\u3089\"/jira\"\u306b\u5909\u66f4 -->\n                <Context path=\"/jira\" docBase=\"${catalina.home}/atlassian-jira\" reloadable=\"false\" useHttpOnly=\"true\">\n                    <!-- ... -->\n                </Context>\n            </Host>\n        </Engine>\n    </Service>\n</Server>\n\n\n\u6700\u5f8c\u306bJIRA\u3068nginx\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttp://localhost/jira\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n$ sudo service jira stop\n$ sudo service jira start\n$ sudo service nginx restart\n\n\n\u4ed5\u4e8b\u3067JIRA7\u3092\u7acb\u3066\u308b\u5fc5\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u3064\u3044\u3067\u306b\u624b\u9806\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\nJIRA\u4ee5\u5916\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3082\u540c\u3058\u7b50\u4f53\u306b\u7acb\u3066\u308b\u4e88\u5b9a\u3060\u3063\u305f\u306e\u3067\u3001\n\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306bnginx\u3092\u4f7f\u3063\u3066`http://localhost:8080/jira`\u307f\u305f\u3044\u306a\u5f62\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n# \u74b0\u5883\n\n- JIRA 7\n- CentOS 6.7\n- nginx 1.8.1\n- MySQL 5.6.28\n\n# \u624b\u9806\n\n## 1. nginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCentOS6\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308bnginx\u306f\u53e4\u3059\u304e\u308b\u306e\u3067\u3001rpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```:\n# rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm\n# yum -y install nginx\n# nginx -v\nnginx version: nginx/1.8.1\n```\n\n## 2. MySQL\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nMySQL\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u53e4\u3059\u304e\u308b\u306e\u3067\u3001rpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```:\n# yum install http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm\n# yum -y install mysql mysql-devel mysql-server mysql-utilities\n# mysqld --version\nmysqld  Ver 5.6.28 for Linux on x86_64 (MySQL Community Server (GPL))\n```\n\n## 3. JIRA\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30e6\u30fc\u30b6\u4f5c\u6210\nJIRA\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```:\n# mysql -u root -p\n> create database jira default character set utf8;\n> grant all privileges on jira.* to jira@localhost identified by 'jira';\n> flush privileges;\n> exit\n```\n\n## 4. JIRA\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066JIRA\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306f **\u5fc5\u305aroot\u6a29\u9650\u3067\u5b9f\u884c** \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001jira\u30b5\u30fc\u30d3\u30b9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306ejira\u30e6\u30fc\u30b6\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```:\n$ wget https://www.atlassian.com/software/jira/downloads/binary/atlassian-jira-software-7.0.10-jira-7.0.10-x64.bin\n$ chmod a+x atlassian-jira-software-7.0.10-jira-7.0.10-x64.bin\n$ sudo ./atlassian-jira-software-7.0.10-jira-7.0.10-x64.bin\n```\n\n## 5. MySQL Connector\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306fMySQL\u3092\u4f7f\u3046\u306e\u3067\u3001MySQL\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066JIRA\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```:\n$ wget http://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.38.tar.gz\n$ tar xvf mysql-connector-java-5.1.38.tar.gz\n$ cd mysql-connector-java-5.1.38\n$ sudo cp mysql-connector-java-5.1.38-bin.jar /opt/atlassian/jira/lib/\n```\n\n## 6. nginx\u306e\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a\n\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bJIRA\u3092\u914d\u7f6e\u3057\u305f\u3044\u306e\u3067\u3001nginx\u306e\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```:/etc/nginx/conf.d/jira.conf\nupstream jira {\n    server 127.0.0.1:8080;\n}\n\nserver {\n    location ~ /jira {\n        root /opt/atlassian/jira;\n        if (-f $request_filename) {\n            break;\n        }\n\n        proxy_read_timeout 300;\n        proxy_connect_timeout 300;\n        proxy_redirect     off;\n\n        proxy_set_header   X-Forwarded-Proto $scheme;\n        proxy_set_header   Host              $http_host;\n        proxy_set_header   X-Real-IP         $remote_addr;\n        proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;\n        proxy_set_header   Host $host;\n\n        proxy_pass         http://jira;\n\n        access_log  /var/log/nginx/jira_access.log;\n        error_log   /var/log/nginx/jira_error.log;\n    }\n}\n```\n\n\u52a0\u3048\u3066JIRA\u306e`server.xml`\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30d1\u30b9\u306e\u7de8\u96c6\u3082\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n```xml:/opt/atlassian/jira/conf/server.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<Server port=\"8005\" shutdown=\"SHUTDOWN\">\n    <Service name=\"Catalina\">\n        <!-- ... -->\n        <Engine name=\"Catalina\" defaultHost=\"localhost\">\n            <Host name=\"localhost\" appBase=\"webapps\" unpackWARs=\"true\" autoDeploy=\"true\">\n                <!-- path\u3092\"\"\u304b\u3089\"/jira\"\u306b\u5909\u66f4 -->\n                <Context path=\"/jira\" docBase=\"${catalina.home}/atlassian-jira\" reloadable=\"false\" useHttpOnly=\"true\">\n                    <!-- ... -->\n                </Context>\n            </Host>\n        </Engine>\n    </Service>\n</Server>\n```\n\n\u6700\u5f8c\u306bJIRA\u3068nginx\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n`http://localhost/jira`\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```:\n$ sudo service jira stop\n$ sudo service jira start\n$ sudo service nginx restart\n```\n"}