{"tags": ["kintone", "AWS", "APIGateway", "CloudFormation"], "context": "\u3053\u308c\u307e\u3067\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3067APIGateway\u304b\u3089Kintone\u3000REST API\u3092\u547c\u3093\u3067\u307f\u307e\u3057\u305f\u304c\u3001CloudFormation\u304cAPIGateway\u306b\u5bfe\u5fdc\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u3084\u3063\u305f\u3053\u3068\u3092CloudFormation\u306etemplate\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\uff08swagger\u306f\u4f7f\u3063\u305f\u3053\u3068\u7121\u3044  \uff09\n\u6ce8\u610f\nkintone REST API\u306f\u540c\u6642\u30a2\u30af\u30bb\u30b9\u6570\u304c\u30c9\u30e1\u30a4\u30f3\u3054\u3068\u306b10\u3068\u5236\u9650\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u30c9\u30e1\u30a4\u30f3\u3078\u306e\u540c\u6642\u30a2\u30af\u30bb\u30b9\n\u3000\u30fbAPI\u306b\u3088\u308b\u540c\u6642\u30a2\u30af\u30bb\u30b9\u6570\u306f\u30c9\u30e1\u30a4\u30f3\u3054\u3068\u306b10\u304c\u4e0a\u9650\u3067\u3059\u3002\nREST API\u306e\u5171\u901a\u4ed5\u69d8\n\n\u5b9f\u30b7\u30b9\u30c6\u30e0\u3067\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001API Gateway\u306e\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a\u3084\u30a8\u30e9\u30fc\u306e\u30ea\u30c8\u30e9\u30a4\u306a\u3069\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u6709\u308a\u307e\u3059\u3002\n\u6ce8\u610f\u3053\u3053\u307e\u3067\n\nAPIGateway\u306eHTTP Proxy\u3067Kintone\u306eREST API\u3092\u547c\u3076\uff08\uff11\uff09\nAPIGateway\u306eHTTP Proxy\u3067Kintone\u306eREST API\u3092\u547c\u3076\uff08\uff12\uff09\n\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u306e\u4ed6\u306bCORS\u5bfe\u5fdc\u3082\u3084\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nCORS\u306b\u3064\u3044\u3066\u306f\u3001greenspa\u3055\u3093\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u307e\u3068\u3081\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\n{\n  \"AWSTemplateFormatVersion\":\"2010-09-09\",\n  \"Description\":\"Sample stack for Kintone Proxy\",\n  \"Parameters\":{\n    \"StageName\":{\n      \"Type\":\"String\",\n      \"MinLength\":1,\n      \"Default\":\"prod\"\n    },\n    \"KintoneSubdomain\":{\n      \"Type\":\"String\",\n      \"MinLength\":1\n    },\n    \"KintoneApiToken\":{\n      \"Type\":\"String\",\n      \"MinLength\":1\n    },\n    \"KintoneAppId\":{\n      \"Type\":\"String\",\n      \"MinLength\":1\n    },\n    \"AccessControlAllowOrigin\":{\n      \"Type\":\"String\",\n      \"MinLength\":1,\n      \"Default\":\"*\"\n    }\n  },\n  \"Metadata\":{\n    \"AWS::CloudFormation::Interface\":{\n      \"ParameterGroups\":[\n        {\n          \"Label\":{\"default\":\"API Gateway configuration.\"},\n          \"Parameters\":[\"StageName\"]\n        },\n        {\n          \"Label\":{\"default\":\"Kintone configuration.\"},\n          \"Parameters\":[\"KintoneSubdomain\",\"KintoneApiToken\",\"KintoneAppId\"]\n        }\n      ]\n    }\n  },\n  \"Resources\":{\n    \"RestApi\":{\n      \"Type\" : \"AWS::ApiGateway::RestApi\",\n      \"Properties\" : {\n        \"Description\" : {\"Fn::Join\":[\"\",[\"Create from \",{\"Ref\":\"AWS::StackName\"}]]},\n        \"FailOnWarnings\" : true,\n        \"Name\" : {\"Fn::Join\":[\"\",[{\"Ref\":\"AWS::StackName\"},\"-Api\"]]}\n      }\n    },\n    \"ApiMethodPOST\":{\n      \"Type\" : \"AWS::ApiGateway::Method\",\n      \"Properties\" : {\n        \"ResourceId\" : {\"Fn::GetAtt\":[\"RestApi\",\"RootResourceId\"]},\n        \"RestApiId\":{\"Ref\":\"RestApi\"},\n        \"HttpMethod\" : \"POST\",\n        \"AuthorizationType\" : \"NONE\",\n        \"ApiKeyRequired\" : false,\n        \"Integration\" : {\n          \"Type\" : \"HTTP\",\n          \"Uri\" : \"https://${stageVariables.subdomain}.cybozu.com/k/v1/record.json\",\n          \"IntegrationHttpMethod\" : \"POST\",\n          \"RequestParameters\" : {\n            \"integration.request.header.X-Cybozu-API-Token\":\"stageVariables.apiToken\"\n          },\n          \"RequestTemplates\" : {\n            \"application/json\":{\"Fn::Join\":[\"\",[\n                \"{\",\"\\n\",\n                \"    \\\"app\\\":\\\"${stageVariables.appId}\\\",\",\"\\n\",\n                \"    \\\"record\\\":{\",\"\\n\",\n                \"        \\\"item1\\\":{\\\"value\\\":$input.json('$.item1')},\",\"\\n\",\n                \"        \\\"item2\\\":{\\\"value\\\":$input.json('$.item2')}\",\"\\n\",\n                \"    }\",\"\\n\",\n                \"}\"\n              ]]}\n          },\n          \"IntegrationResponses\" : [\n            {\n              \"StatusCode\" : \"200\",\n              \"ResponseParameters\" : {\n                \"method.response.header.Access-Control-Allow-Origin\":\n                  {\"Fn::Join\":[\"\",[\n                      \"'\",\n                      {\"Ref\":\"AccessControlAllowOrigin\"},\n                      \"'\"\n                    ]]}\n              },\n              \"ResponseTemplates\" : {\n                \"application/json\": \"\"\n              }\n            },\n            {\n              \"StatusCode\" : \"400\",\n              \"SelectionPattern\" : \"[^2]\\\\d{2}\",\n              \"ResponseParameters\" : {\n                \"method.response.header.Access-Control-Allow-Origin\":\n                  {\"Fn::Join\":[\"\",[\n                      \"'\",\n                      {\"Ref\":\"AccessControlAllowOrigin\"},\n                      \"'\"\n                    ]]}\n              },\n              \"ResponseTemplates\" : {\n                \"application/json\": \"\"\n              }\n            }\n          ]\n        },\n        \"MethodResponses\" : [\n          {\n            \"StatusCode\" : \"200\",\n            \"ResponseParameters\" : {\n              \"method.response.header.Access-Control-Allow-Origin\": false\n            }\n          },\n          {\n            \"StatusCode\" : \"400\",\n            \"ResponseParameters\" : {\n              \"method.response.header.Access-Control-Allow-Origin\": false\n            }\n          }\n        ]\n      }\n    },\n    \"ApiMethodOPTIONS\":{\n      \"Type\" : \"AWS::ApiGateway::Method\",\n      \"Properties\" : {\n        \"ResourceId\" : {\"Fn::GetAtt\":[\"RestApi\",\"RootResourceId\"]},\n        \"RestApiId\":{\"Ref\":\"RestApi\"},\n        \"HttpMethod\" : \"OPTIONS\",\n        \"AuthorizationType\" : \"NONE\",\n        \"ApiKeyRequired\" : false,\n        \"Integration\" : {\n          \"Type\" : \"MOCK\",\n          \"RequestTemplates\" : {\n            \"application/json\":\"{\\\"statusCode\\\":200}\"\n          },\n          \"IntegrationResponses\" : [\n            {\n              \"StatusCode\" : \"200\",\n              \"ResponseParameters\" : {\n                \"method.response.header.Access-Control-Allow-Headers\": \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'\",\n                \"method.response.header.Access-Control-Allow-Methods\": \"'POST,OPTIONS'\",\n                \"method.response.header.Access-Control-Allow-Origin\": {\"Fn::Join\":[\"\",[\n                      \"'\",\n                      {\"Ref\":\"AccessControlAllowOrigin\"},\n                      \"'\"\n                  ]]}\n              },\n              \"ResponseTemplates\" : {\n                \"application/json\":\"\"\n              }\n            }\n          ]\n        },\n        \"MethodResponses\" : [\n          {\n            \"StatusCode\" : \"200\",\n            \"ResponseParameters\" : {\n              \"method.response.header.Access-Control-Allow-Headers\": false,\n              \"method.response.header.Access-Control-Allow-Methods\": false,\n              \"method.response.header.Access-Control-Allow-Origin\": false\n            },\n            \"ResponseModels\" : {\n              \"application/json\": \"Empty\"\n            }\n          }\n        ]\n      }\n    },\n    \"ApiDeployment\":{\n      \"DependsOn\":[\n        \"ApiMethodPOST\",\n        \"ApiMethodOPTIONS\"\n      ],\n      \"Type\" : \"AWS::ApiGateway::Deployment\",\n      \"Properties\" : {\n        \"RestApiId\" : {\"Ref\":\"RestApi\"},\n        \"StageName\" : {\"Ref\":\"StageName\"},\n        \"StageDescription\":{\n          \"Variables\" : {\n            \"subdomain\":{\"Ref\":\"KintoneSubdomain\"},\n            \"apiToken\":{\"Ref\":\"KintoneApiToken\"},\n            \"appId\":{\"Ref\":\"KintoneAppId\"}\n          }\n        }\n      }\n    }\n  },\n  \"Outputs\":{\n    \"RestApiEndpoint\":{\n      \"Value\":{\"Fn::Join\":[\"\",[\n          \"https://\",\n          {\"Ref\":\"RestApi\"},\n          \".execute-api.\",\n          {\"Ref\":\"AWS::Region\"},\n          \".amazonaws.com/\",\n          {\"Ref\":\"StageName\"},\n          \"/\"\n        ]]}\n    }\n  }\n}\n\n\n\n\u89e3\u8aac\n\nCloudFormation Stack\u306eParameter\u3067Kintone\u95a2\u9023\u306e\u60c5\u5831\u3092\u6e21\u3059\u3068\u3001StageVariables\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nMetadata\u306e\u90e8\u5206\u306f\u3001ManagementConsole\u3067\u306eParameter\u5165\u529b\u6642\u306e\u898b\u305f\u76ee\u3092\u5236\u5fa1\u3057\u3066\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306e\u4f8b\u3067\u306fAPI Key\u3082\u8a8d\u53ef\u3082\u884c\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u30d7\u30ea\u30d5\u30e9\u30a4\u30c8\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u306eAccess-Control-Allow-Headers\u306b\u4f7f\u308f\u308c\u306a\u3044\u30d8\u30c3\u30c0\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\nAPIGateway\u306eHTTP Proxy\u3067Kintone\u306eREST API\u3092\u547c\u3076\uff08\uff11\uff09\u3067Kitone\u5074\u3067\u65e5\u672c\u8a9e\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\u304c\u3042\u308b\u3068\u4f55\u304b\u826f\u304f\u306a\u3044\u3053\u3068\u304c\u8d77\u3053\u308b\u3088\u3046\u306a\u3053\u3068\u3092\u66f8\u304d\u307e\u3057\u305f\u304c\u3001CloudFormation\u306etemplate\u3067\u65e5\u672c\u8a9e\u3092\u304b\u3051\u306a\u3044\u306e\u3067\u3001RequestTemplates\u3067\u8a70\u307f\u307e\u3057\u305f\u3002\n\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u5b9f\u884c\n\n\u30c6\u30b9\u30c8\u7528HTML\n<html>\n<head>\n\n</head>\n<body>\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js\"></script>\n<script>\n  var settings = {\n    \"async\": true,\n    \"crossDomain\": true,\n    \"url\": \"https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/prod/\",\n    \"method\": \"POST\",\n    \"headers\": {\n      \"content-type\": \"application/json\"\n    },\n    \"processData\": false,\n    \"data\": \"{\\n    \\\"item1\\\":\\\"from Browser\\\",\\n    \\\"item2\\\":\\\"item2\\\"\\n}\"\n  }\n\n  $.ajax(settings).done(function (response) {\n    console.log(response);\n  });\n</script>\n</body>\n</html>\n\n\n\u5b9f\u884c\u7d50\u679c\uff08Chrome\u306eDeveloperTool\u3088\u308a\uff09\n\nOPTIONS \uff08\u30d7\u30ea\u30d5\u30e9\u30a4\u30c8\u30ea\u30af\u30a8\u30b9\u30c8\uff09\n\n\nPOST\n\n\n\u7d50\u679c\n\n\uff08Kintone\u5074\u306f\u7701\u7565\uff09\n\u3001\u3001\u3068\u3044\u3068\u3082\u7c21\u5358\u306b\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u50d5\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3082\u6e21\u305b\u3066Deploy\u30fbApiKey\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308bCloudFormation\u304cSwagger\u3088\u308a\u3082\u597d\u304d\u3067\u3059\uff01\uff08\u5ba3\u8a00\uff09\n\u3067\u306f\uff01\n\u3053\u308c\u307e\u3067\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3067APIGateway\u304b\u3089Kintone\u3000REST API\u3092\u547c\u3093\u3067\u307f\u307e\u3057\u305f\u304c\u3001CloudFormation\u304cAPIGateway\u306b\u5bfe\u5fdc\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u3084\u3063\u305f\u3053\u3068\u3092CloudFormation\u306etemplate\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\uff08swagger\u306f\u4f7f\u3063\u305f\u3053\u3068\u7121\u3044 :sweat_smile: \uff09\n\n__\u6ce8\u610f__\n__kintone REST API\u306f\u540c\u6642\u30a2\u30af\u30bb\u30b9\u6570\u304c\u30c9\u30e1\u30a4\u30f3\u3054\u3068\u306b10\u3068\u5236\u9650\u3055\u308c\u3066\u3044\u307e\u3059\u3002__\n\n> \u30c9\u30e1\u30a4\u30f3\u3078\u306e\u540c\u6642\u30a2\u30af\u30bb\u30b9\n> \u3000\u30fbAPI\u306b\u3088\u308b\u540c\u6642\u30a2\u30af\u30bb\u30b9\u6570\u306f\u30c9\u30e1\u30a4\u30f3\u3054\u3068\u306b10\u304c\u4e0a\u9650\u3067\u3059\u3002\n>\n> [REST API\u306e\u5171\u901a\u4ed5\u69d8](https://cybozudev.zendesk.com/hc/ja/articles/201941754-REST-API%E3%81%AE%E5%85%B1%E9%80%9A%E4%BB%95%E6%A7%98#step12)\n\n\u5b9f\u30b7\u30b9\u30c6\u30e0\u3067\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001API Gateway\u306e\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a\u3084\u30a8\u30e9\u30fc\u306e\u30ea\u30c8\u30e9\u30a4\u306a\u3069\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u6709\u308a\u307e\u3059\u3002\n\n\u6ce8\u610f\u3053\u3053\u307e\u3067\n\n\n- [APIGateway\u306eHTTP Proxy\u3067Kintone\u306eREST API\u3092\u547c\u3076\uff08\uff11\uff09](http://qiita.com/monamu/items/a257a57e3236fca91ddc)\n- [APIGateway\u306eHTTP Proxy\u3067Kintone\u306eREST API\u3092\u547c\u3076\uff08\uff12\uff09](http://qiita.com/monamu/items/900ad90a47a87d98ec45)\n\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u3067\u3084\u3063\u305f\u3053\u3068\u306e\u4ed6\u306bCORS\u5bfe\u5fdc\u3082\u3084\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\nCORS\u306b\u3064\u3044\u3066\u306f\u3001[greenspa\u3055\u3093\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u307e\u3068\u3081\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002](http://qiita.com/greenspa/items/b945d93b8610dda30640)\n\n# \u30bd\u30fc\u30b9\n\n```json\n{\n  \"AWSTemplateFormatVersion\":\"2010-09-09\",\n  \"Description\":\"Sample stack for Kintone Proxy\",\n  \"Parameters\":{\n    \"StageName\":{\n      \"Type\":\"String\",\n      \"MinLength\":1,\n      \"Default\":\"prod\"\n    },\n    \"KintoneSubdomain\":{\n      \"Type\":\"String\",\n      \"MinLength\":1\n    },\n    \"KintoneApiToken\":{\n      \"Type\":\"String\",\n      \"MinLength\":1\n    },\n    \"KintoneAppId\":{\n      \"Type\":\"String\",\n      \"MinLength\":1\n    },\n    \"AccessControlAllowOrigin\":{\n      \"Type\":\"String\",\n      \"MinLength\":1,\n      \"Default\":\"*\"\n    }\n  },\n  \"Metadata\":{\n    \"AWS::CloudFormation::Interface\":{\n      \"ParameterGroups\":[\n        {\n          \"Label\":{\"default\":\"API Gateway configuration.\"},\n          \"Parameters\":[\"StageName\"]\n        },\n        {\n          \"Label\":{\"default\":\"Kintone configuration.\"},\n          \"Parameters\":[\"KintoneSubdomain\",\"KintoneApiToken\",\"KintoneAppId\"]\n        }\n      ]\n    }\n  },\n  \"Resources\":{\n    \"RestApi\":{\n      \"Type\" : \"AWS::ApiGateway::RestApi\",\n      \"Properties\" : {\n        \"Description\" : {\"Fn::Join\":[\"\",[\"Create from \",{\"Ref\":\"AWS::StackName\"}]]},\n        \"FailOnWarnings\" : true,\n        \"Name\" : {\"Fn::Join\":[\"\",[{\"Ref\":\"AWS::StackName\"},\"-Api\"]]}\n      }\n    },\n    \"ApiMethodPOST\":{\n      \"Type\" : \"AWS::ApiGateway::Method\",\n      \"Properties\" : {\n        \"ResourceId\" : {\"Fn::GetAtt\":[\"RestApi\",\"RootResourceId\"]},\n        \"RestApiId\":{\"Ref\":\"RestApi\"},\n        \"HttpMethod\" : \"POST\",\n        \"AuthorizationType\" : \"NONE\",\n        \"ApiKeyRequired\" : false,\n        \"Integration\" : {\n          \"Type\" : \"HTTP\",\n          \"Uri\" : \"https://${stageVariables.subdomain}.cybozu.com/k/v1/record.json\",\n          \"IntegrationHttpMethod\" : \"POST\",\n          \"RequestParameters\" : {\n            \"integration.request.header.X-Cybozu-API-Token\":\"stageVariables.apiToken\"\n          },\n          \"RequestTemplates\" : {\n            \"application/json\":{\"Fn::Join\":[\"\",[\n                \"{\",\"\\n\",\n                \"    \\\"app\\\":\\\"${stageVariables.appId}\\\",\",\"\\n\",\n                \"    \\\"record\\\":{\",\"\\n\",\n                \"        \\\"item1\\\":{\\\"value\\\":$input.json('$.item1')},\",\"\\n\",\n                \"        \\\"item2\\\":{\\\"value\\\":$input.json('$.item2')}\",\"\\n\",\n                \"    }\",\"\\n\",\n                \"}\"\n              ]]}\n          },\n          \"IntegrationResponses\" : [\n            {\n              \"StatusCode\" : \"200\",\n              \"ResponseParameters\" : {\n                \"method.response.header.Access-Control-Allow-Origin\":\n                  {\"Fn::Join\":[\"\",[\n                      \"'\",\n                      {\"Ref\":\"AccessControlAllowOrigin\"},\n                      \"'\"\n                    ]]}\n              },\n              \"ResponseTemplates\" : {\n                \"application/json\": \"\"\n              }\n            },\n            {\n              \"StatusCode\" : \"400\",\n              \"SelectionPattern\" : \"[^2]\\\\d{2}\",\n              \"ResponseParameters\" : {\n                \"method.response.header.Access-Control-Allow-Origin\":\n                  {\"Fn::Join\":[\"\",[\n                      \"'\",\n                      {\"Ref\":\"AccessControlAllowOrigin\"},\n                      \"'\"\n                    ]]}\n              },\n              \"ResponseTemplates\" : {\n                \"application/json\": \"\"\n              }\n            }\n          ]\n        },\n        \"MethodResponses\" : [\n          {\n            \"StatusCode\" : \"200\",\n            \"ResponseParameters\" : {\n              \"method.response.header.Access-Control-Allow-Origin\": false\n            }\n          },\n          {\n            \"StatusCode\" : \"400\",\n            \"ResponseParameters\" : {\n              \"method.response.header.Access-Control-Allow-Origin\": false\n            }\n          }\n        ]\n      }\n    },\n    \"ApiMethodOPTIONS\":{\n      \"Type\" : \"AWS::ApiGateway::Method\",\n      \"Properties\" : {\n        \"ResourceId\" : {\"Fn::GetAtt\":[\"RestApi\",\"RootResourceId\"]},\n        \"RestApiId\":{\"Ref\":\"RestApi\"},\n        \"HttpMethod\" : \"OPTIONS\",\n        \"AuthorizationType\" : \"NONE\",\n        \"ApiKeyRequired\" : false,\n        \"Integration\" : {\n          \"Type\" : \"MOCK\",\n          \"RequestTemplates\" : {\n            \"application/json\":\"{\\\"statusCode\\\":200}\"\n          },\n          \"IntegrationResponses\" : [\n            {\n              \"StatusCode\" : \"200\",\n              \"ResponseParameters\" : {\n                \"method.response.header.Access-Control-Allow-Headers\": \"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'\",\n                \"method.response.header.Access-Control-Allow-Methods\": \"'POST,OPTIONS'\",\n                \"method.response.header.Access-Control-Allow-Origin\": {\"Fn::Join\":[\"\",[\n                      \"'\",\n                      {\"Ref\":\"AccessControlAllowOrigin\"},\n                      \"'\"\n                  ]]}\n              },\n              \"ResponseTemplates\" : {\n                \"application/json\":\"\"\n              }\n            }\n          ]\n        },\n        \"MethodResponses\" : [\n          {\n            \"StatusCode\" : \"200\",\n            \"ResponseParameters\" : {\n              \"method.response.header.Access-Control-Allow-Headers\": false,\n              \"method.response.header.Access-Control-Allow-Methods\": false,\n              \"method.response.header.Access-Control-Allow-Origin\": false\n            },\n            \"ResponseModels\" : {\n              \"application/json\": \"Empty\"\n            }\n          }\n        ]\n      }\n    },\n    \"ApiDeployment\":{\n      \"DependsOn\":[\n        \"ApiMethodPOST\",\n        \"ApiMethodOPTIONS\"\n      ],\n      \"Type\" : \"AWS::ApiGateway::Deployment\",\n      \"Properties\" : {\n        \"RestApiId\" : {\"Ref\":\"RestApi\"},\n        \"StageName\" : {\"Ref\":\"StageName\"},\n        \"StageDescription\":{\n          \"Variables\" : {\n            \"subdomain\":{\"Ref\":\"KintoneSubdomain\"},\n            \"apiToken\":{\"Ref\":\"KintoneApiToken\"},\n            \"appId\":{\"Ref\":\"KintoneAppId\"}\n          }\n        }\n      }\n    }\n  },\n  \"Outputs\":{\n    \"RestApiEndpoint\":{\n      \"Value\":{\"Fn::Join\":[\"\",[\n          \"https://\",\n          {\"Ref\":\"RestApi\"},\n          \".execute-api.\",\n          {\"Ref\":\"AWS::Region\"},\n          \".amazonaws.com/\",\n          {\"Ref\":\"StageName\"},\n          \"/\"\n        ]]}\n    }\n  }\n}\n\n```\n\n# \u89e3\u8aac\n\n- CloudFormation Stack\u306eParameter\u3067Kintone\u95a2\u9023\u306e\u60c5\u5831\u3092\u6e21\u3059\u3068\u3001StageVariables\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n- `Metadata`\u306e\u90e8\u5206\u306f\u3001ManagementConsole\u3067\u306eParameter\u5165\u529b\u6642\u306e\u898b\u305f\u76ee\u3092\u5236\u5fa1\u3057\u3066\u3044\u307e\u3059\u3002\n- \u4eca\u56de\u306e\u4f8b\u3067\u306fAPI Key\u3082\u8a8d\u53ef\u3082\u884c\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u30d7\u30ea\u30d5\u30e9\u30a4\u30c8\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u306e`Access-Control-Allow-Headers`\u306b\u4f7f\u308f\u308c\u306a\u3044\u30d8\u30c3\u30c0\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n- [APIGateway\u306eHTTP Proxy\u3067Kintone\u306eREST API\u3092\u547c\u3076\uff08\uff11\uff09](http://qiita.com/monamu/items/a257a57e3236fca91ddc)\u3067Kitone\u5074\u3067\u65e5\u672c\u8a9e\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\u304c\u3042\u308b\u3068\u4f55\u304b\u826f\u304f\u306a\u3044\u3053\u3068\u304c\u8d77\u3053\u308b\u3088\u3046\u306a\u3053\u3068\u3092\u66f8\u304d\u307e\u3057\u305f\u304c\u3001CloudFormation\u306etemplate\u3067\u65e5\u672c\u8a9e\u3092\u304b\u3051\u306a\u3044\u306e\u3067\u3001`RequestTemplates`\u3067\u8a70\u307f\u307e\u3057\u305f\u3002\n\n# \u30d6\u30e9\u30a6\u30b6\u304b\u3089\u5b9f\u884c\n\n## \u30c6\u30b9\u30c8\u7528HTML\n\n```html\n<html>\n<head>\n\n</head>\n<body>\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js\"></script>\n<script>\n  var settings = {\n    \"async\": true,\n    \"crossDomain\": true,\n    \"url\": \"https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/prod/\",\n    \"method\": \"POST\",\n    \"headers\": {\n      \"content-type\": \"application/json\"\n    },\n    \"processData\": false,\n    \"data\": \"{\\n    \\\"item1\\\":\\\"from Browser\\\",\\n    \\\"item2\\\":\\\"item2\\\"\\n}\"\n  }\n\n  $.ajax(settings).done(function (response) {\n    console.log(response);\n  });\n</script>\n</body>\n</html>\n```\n\n## \u5b9f\u884c\u7d50\u679c\uff08Chrome\u306eDeveloperTool\u3088\u308a\uff09\n\n### OPTIONS \uff08\u30d7\u30ea\u30d5\u30e9\u30a4\u30c8\u30ea\u30af\u30a8\u30b9\u30c8\uff09\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/117772/a5ef4258-8b8c-93f0-67e6-ba2cb00b71f2.png)\n\n### POST\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/117772/617ff993-6c76-9849-35f8-5a37b6587bdb.png)\n\n### \u7d50\u679c\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/117772/93c84974-ef87-470c-1b70-dd6aafb91280.png)\n\n\uff08Kintone\u5074\u306f\u7701\u7565\uff09\n\n\u3001\u3001\u3068\u3044\u3068\u3082\u7c21\u5358\u306b\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n\u50d5\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3082\u6e21\u305b\u3066Deploy\u30fbApiKey\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308bCloudFormation\u304cSwagger\u3088\u308a\u3082\u597d\u304d\u3067\u3059\uff01\uff08\u5ba3\u8a00\uff09\n\n\u3067\u306f\uff01\n"}