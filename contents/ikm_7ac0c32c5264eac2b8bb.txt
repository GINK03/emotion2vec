{"context": " More than 1 year has passed since last update.iOS5\u306e\u7d75\u6587\u5b57\u306f4\u30d0\u30a4\u30c8\u306eUTF-8\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305fPostgreSQL\u3084MySQL 5.5.3\u4ee5\u964d\u304c\u5fc5\u8981\u3002\n\u3053\u3053\u3067\u306fMySQL 5.5\u3092\u5229\u7528\u3059\u308b\u3002\n\nMySQL\u3067utf8mb4\u3092\u6271\u3046\n\u524d\u8ff0\u3057\u305f\u901a\u308a\u3001MySQL\u30674\u30d0\u30a4\u30c8\u306eUTF-8\u3092\u6271\u3046\u306b\u306fMySQL 5.5.3\u4ee5\u4e0a\u3067\u30ad\u30e3\u30e9\u30af\u30bf\u30bb\u30c3\u30c8\u306butf8mb4\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nMySQL\u30b5\u30fc\u30d0\n\u305f\u3076\u3093\u30ad\u30e3\u30e9\u30af\u30bf\u30bb\u30c3\u30c8\u95a2\u4fc2\u306b\u306futf8mb4\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u3002\ncharacter_set_system\u3068character_set_filesystem\u4ee5\u5916\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30fc\u30b5\u30fc\u30d0\u9593\u306e\u901a\u4fe1\u3068\u4fdd\u5b58\u306b\u4f7f\u308f\u308c\u308b\u306e\u3067\u3001\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u3061\u3087\u3093\u5207\u3089\u308c\u3066\u3057\u307e\u3063\u305f\u308a\u3059\u308b\u3068\u601d\u3046\u3002\u8981\u691c\u8a3c\u3002\nmysql> show variables like 'char%';\n+--------------------------+------------------------------------------------------+\n| Variable_name            | Value                                                |\n+--------------------------+------------------------------------------------------+\n| character_set_client     | utf8mb4                                              |\n| character_set_connection | utf8mb4                                              |\n| character_set_database   | utf8mb4                                              |\n| character_set_filesystem | binary                                               |\n| character_set_results    | utf8mb4                                              |\n| character_set_server     | utf8mb4                                              |\n| character_set_system     | utf8                                                 |\n| character_sets_dir       | /usr/local/Cellar/mysql/5.5.10/share/mysql/charsets/ |\n+--------------------------+------------------------------------------------------+\n\n\nActiveRecord\u304b\u3089\u306e\u63a5\u7d9a\n\u3067\u3001mysql2 gem\u306e\u6700\u65b0\u30ea\u30ea\u30fc\u30b9\u306e0.3.11\u3067\u306futf8mb4\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u672a\u3060\u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u30d1\u30c3\u30c1\u3092\u81ea\u5206\u3067\u3042\u3066\u308b\u304b\u3001Gemfile\u3067\u6b21\u306e\u3088\u3046\u306b\u30d6\u30e9\u30f3\u30c1\u3092\u6307\u5b9a\u3059\u308b\uff08\u81ea\u5206\u306f\u3053\u3063\u3061\u3092\u3084\u3063\u3066\u308b\uff09\u3002\ngem 'mysql2', :git => 'git://github.com/tmtm/mysql2.git', :branch => 'utf8mb4'\n\ndatabase.yml\u306eencoding\u3068charset\u306butf8mb4\u3092\u6307\u5b9a\u3059\u308b\u3002\ndevelopment:\n  adapter: mysql2\n  charset: utf8mb4\n  encoding: utf8mb4\n  collation: utf8mb4_general_ci\n  reconnect: false\n  database: myapp_development\n  pool: 5\n  username: root\n  password:\n  socket: /tmp/mysql.sock\n\ncharset\u3092\u6307\u5b9a\u3059\u308b\u306e\u306f\u3001CREATE DATABASE\u3067DEFAULT CHARACTER SET\u306b\u4f7f\u308f\u308c\u308b\u304b\u3089\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306futf8\uff09\u3002\u306a\u3093\u3067encoding\u306b\u7d71\u4e00\u3055\u308c\u3066\u3044\u306a\u3044\u3093\u3060\u308d\u3046\uff1f\n\n\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u30d0\u30a4\u30c8\u6570\u5236\u9650\nMySQL\u306e\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f767byte\u307e\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3068\u3044\u3046\u5236\u9650\u304c\u3042\u308b\u305f\u3081\u3001767byte\u308f\u308b4\u3067191\u6587\u5b57\u307e\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n\u4f8b\u3048\u3070schema_migrations.version\u306fvarchar\u3067\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u306f\u3089\u308c\u3066\u3044\u308b\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f255\u6587\u5b57\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n\u5b9f\u969b\u306b\u306f14\u6587\u5b57\u3057\u304b\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001varchar(15)\u306b\u5909\u66f4\u3059\u308b\u3002\n$ bundle open activerecord\u304b\u3089lib/active_record/connection_adapters/abstract/schema_statements.rb\u306e419\u884c\u76ee\u3042\u305f\u308a\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\nschema_migrations_table.column :version, :string, :null => false, :limit => 15\n\n\u305f\u3060\u672c\u756a\u306egem\u3092\u66f8\u304d\u63db\u3048\u308b\u306e\u3082\u5acc\u306a\u306e\u3067\u3001\u81ea\u5206\u306fconfig/initializers/active_record_schema_migrations_version.rb\u306bActiveRecord::ConnectionAdapters::SchemaStatements#initialize_schema_migrations_table\u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u3001\u8a72\u5f53\u7b87\u6240\u3060\u3051\u66f8\u304d\u63db\u3048\u3066\u3044\u308b\u3002\n\u307e\u305fschema_migrations.version\u4ee5\u5916\u306b\u3082\u81ea\u5206\u3067\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u306f\u308b\u5834\u5408\u306b\u306f:length\u30aa\u30d7\u30b7\u30e7\u30f3\u3067191\u6587\u5b57\u4ee5\u4e0b\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5bfe\u8c61\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nint\u3068varchar\u3067\u8907\u5408\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u306f\u308b\u969b\u306b\u306f:length\u3092\u7d30\u304b\u304f\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u6c17\u3092\u3064\u3051\u3066\u3002\nadd_index :entries, [:user_id, :url],\n      unique: true, length: { url: (191-4) },\n      name: \"index_on_feed_entries\"\n\n\nJSON\nActiveRecord::JSON::Encoding.escape\u306f4\u30d0\u30a4\u30c8\u4ee5\u4e0a\u306e\u6587\u5b57\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u306b\u5931\u6557\u3059\u308b\u306e\u3067\u3001\u4eca\u306fJSON gem\u3092\u4f7f\u3063\u3066\u308b\u3002\nconfig/initializers/active_support_json_encoding.rb\u306b\u3053\u3093\u306a\u611f\u3058\uff1a\nmodule ActiveSupport\n  module JSON\n    module Encoding\n      class << self\n        def escape_with_json_gem(string)\n          ::JSON.generate([string])[1..-2]\n        end\n        alias_method_chain :escape, :json_gem\n      end\n    end\n  end\nend\n\nJSON gem\u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u81ea\u5206\u3067\u3061\u3083\u3093\u3068\u30a8\u30b9\u30b1\u30fc\u30d7\u3057\u3066\u3042\u3052\u308b\u65b9\u6cd5\u3082\u3042\u308b\u3002\n\n\u53c2\u8003\u8cc7\u6599\n\nrails mysql\u3067iPhone\u30a2\u30d7\u30ea\u306e\u7d75\u6587\u5b57\u5bfe\u5fdc \nHow do you deal with the conflict between ActiveSupport::JSON and the JSON gem?\nEmoji and Rails JSON output issue\n\n\n\uff08\u3061\u306a\u307f\u306b\uff09WebSocket/Node.js\nWebSocket\u306bNode.js\u3092\u4f7f\u3046\u5834\u5408\u3001Javascript\u306e\u30a8\u30f3\u30b8\u30f3\u3067\u3042\u308bV8\u304c4\u30d0\u30a4\u30c8\u306eUTF-8\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001URL\u30a8\u30f3\u30b3\u30fc\u30c9\u306a\u3069\u306e\u9069\u5f53\u306a\u5909\u63db\u3092\u304b\u3051\u3066\u304b\u3089\u30c7\u30fc\u30bf\u3092\u6e21\u3057\u3066\u3042\u3052\u308b\u3002\nURL\u30a8\u30f3\u30b3\u30fc\u30c9\u3060\u3068\u3053\u3093\u306a\u611f\u3058\uff1a\n# Rails\u5074\nencoded = Rack::Utils.escape(mb_string)\n\n// JS\u5074\nvar mbString = decodeURIComponent(encoded).replace(/\\+/g,  \" \");\n\n\nAndroid, iOS4\u306f\u3069\u3046\u3059\u308b\u306e\uff1f\n\niOS4\u304b\u3089iOS5\u3067\u7d75\u6587\u5b57\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fb\u30bb\u30c3\u30c8\u304c\u5909\u308f\u3063\u305f\u3051\u3069\u3001iOS5\u3067\u306fiOS4\u306e\u7d75\u6587\u5b57\u3092\u8868\u793a\u3067\u304d\u308b\u306e\u3067\u3001iOS5\u304b\u3089\u306e\u7d75\u6587\u5b57\u3092\u3059\u3079\u3066iOS4\u306e\u3082\u306e\u306b\u5909\u63db\u3057\u3066\u3057\u307e\u3046\u306e\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\n\u3067\u3082\u305d\u308c\u3082\u3044\u3064\u307e\u3067\u6709\u52b9\u306a\u3093\u3060\u308d\u3046\u306a\u3041\u2026\u3002\n\n\nAndroid\u306f\u77e5\u3089\u3093\n\n\nNaver\u306eLINE\u304c\u304c\u3093\u3070\u3063\u3066\u308b\u3001\u6c17\u304c\u3059\u308b\u3002\n\n\n\n\niOS5\u306e\u7d75\u6587\u5b57\u306f4\u30d0\u30a4\u30c8\u306eUTF-8\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305fPostgreSQL\u3084MySQL 5.5.3\u4ee5\u964d\u304c\u5fc5\u8981\u3002\n\n\u3053\u3053\u3067\u306fMySQL 5.5\u3092\u5229\u7528\u3059\u308b\u3002\n\n## MySQL\u3067utf8mb4\u3092\u6271\u3046\n\n\u524d\u8ff0\u3057\u305f\u901a\u308a\u3001MySQL\u30674\u30d0\u30a4\u30c8\u306eUTF-8\u3092\u6271\u3046\u306b\u306fMySQL 5.5.3\u4ee5\u4e0a\u3067\u30ad\u30e3\u30e9\u30af\u30bf\u30bb\u30c3\u30c8\u306butf8mb4\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n### MySQL\u30b5\u30fc\u30d0\n\n\u305f\u3076\u3093\u30ad\u30e3\u30e9\u30af\u30bf\u30bb\u30c3\u30c8\u95a2\u4fc2\u306b\u306futf8mb4\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u3002\n`character_set_system `\u3068`character_set_filesystem `\u4ee5\u5916\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30fc\u30b5\u30fc\u30d0\u9593\u306e\u901a\u4fe1\u3068\u4fdd\u5b58\u306b\u4f7f\u308f\u308c\u308b\u306e\u3067\u3001\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u3061\u3087\u3093\u5207\u3089\u308c\u3066\u3057\u307e\u3063\u305f\u308a\u3059\u308b\u3068\u601d\u3046\u3002**\u8981\u691c\u8a3c**\u3002\n\n```\nmysql> show variables like 'char%';\n+--------------------------+------------------------------------------------------+\n| Variable_name            | Value                                                |\n+--------------------------+------------------------------------------------------+\n| character_set_client     | utf8mb4                                              |\n| character_set_connection | utf8mb4                                              |\n| character_set_database   | utf8mb4                                              |\n| character_set_filesystem | binary                                               |\n| character_set_results    | utf8mb4                                              |\n| character_set_server     | utf8mb4                                              |\n| character_set_system     | utf8                                                 |\n| character_sets_dir       | /usr/local/Cellar/mysql/5.5.10/share/mysql/charsets/ |\n+--------------------------+------------------------------------------------------+\n```\n\n### ActiveRecord\u304b\u3089\u306e\u63a5\u7d9a\n\n\u3067\u3001[mysql2 gem](https://rubygems.org/gems/mysql2)\u306e\u6700\u65b0\u30ea\u30ea\u30fc\u30b9\u306e0.3.11\u3067\u306futf8mb4\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001[\u672a\u3060\u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u30d1\u30c3\u30c1](https://github.com/brianmario/mysql2/commit/f535df862ccbb098d99bf4fc722c037be688dcc6)\u3092\u81ea\u5206\u3067\u3042\u3066\u308b\u304b\u3001Gemfile\u3067\u6b21\u306e\u3088\u3046\u306b\u30d6\u30e9\u30f3\u30c1\u3092\u6307\u5b9a\u3059\u308b\uff08\u81ea\u5206\u306f\u3053\u3063\u3061\u3092\u3084\u3063\u3066\u308b\uff09\u3002\n\n```rb\ngem 'mysql2', :git => 'git://github.com/tmtm/mysql2.git', :branch => 'utf8mb4'\n```\n\ndatabase.yml\u306e`encoding`\u3068`charset`\u306butf8mb4\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n```yaml\ndevelopment:\n  adapter: mysql2\n  charset: utf8mb4\n  encoding: utf8mb4\n  collation: utf8mb4_general_ci\n  reconnect: false\n  database: myapp_development\n  pool: 5\n  username: root\n  password:\n  socket: /tmp/mysql.sock\n```\n\n`charset`\u3092\u6307\u5b9a\u3059\u308b\u306e\u306f\u3001`CREATE DATABASE`\u3067`DEFAULT CHARACTER SET`\u306b\u4f7f\u308f\u308c\u308b\u304b\u3089\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306futf8\uff09\u3002\u306a\u3093\u3067`encoding`\u306b\u7d71\u4e00\u3055\u308c\u3066\u3044\u306a\u3044\u3093\u3060\u308d\u3046\uff1f\n\n### \u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u30d0\u30a4\u30c8\u6570\u5236\u9650\n\n[MySQL\u306e\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f767byte\u307e\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044](http://d.hatena.ne.jp/tanamon/20090930/1254332746)\u3068\u3044\u3046\u5236\u9650\u304c\u3042\u308b\u305f\u3081\u3001767byte\u308f\u308b4\u3067191\u6587\u5b57\u307e\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n\n\u4f8b\u3048\u3070`schema_migrations.version`\u306fvarchar\u3067\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u306f\u3089\u308c\u3066\u3044\u308b\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f255\u6587\u5b57\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n\n\u5b9f\u969b\u306b\u306f14\u6587\u5b57\u3057\u304b\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001`varchar(15)`\u306b\u5909\u66f4\u3059\u308b\u3002\n\n`$ bundle open activerecord`\u304b\u3089`lib/active_record/connection_adapters/abstract/schema_statements.rb`\u306e419\u884c\u76ee\u3042\u305f\u308a\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```rb\nschema_migrations_table.column :version, :string, :null => false, :limit => 15\n```\n\n\u305f\u3060\u672c\u756a\u306egem\u3092\u66f8\u304d\u63db\u3048\u308b\u306e\u3082\u5acc\u306a\u306e\u3067\u3001\u81ea\u5206\u306f`config/initializers/active_record_schema_migrations_version.rb`\u306b`ActiveRecord::ConnectionAdapters::SchemaStatements#initialize_schema_migrations_table`\u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u3001\u8a72\u5f53\u7b87\u6240\u3060\u3051\u66f8\u304d\u63db\u3048\u3066\u3044\u308b\u3002\n\n\u307e\u305f`schema_migrations.version`\u4ee5\u5916\u306b\u3082\u81ea\u5206\u3067\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u306f\u308b\u5834\u5408\u306b\u306f`:length`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067191\u6587\u5b57\u4ee5\u4e0b\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5bfe\u8c61\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nint\u3068varchar\u3067\u8907\u5408\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u306f\u308b\u969b\u306b\u306f`:length`\u3092\u7d30\u304b\u304f\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u6c17\u3092\u3064\u3051\u3066\u3002\n\n```rb\nadd_index :entries, [:user_id, :url],\n      unique: true, length: { url: (191-4) },\n      name: \"index_on_feed_entries\"\n```\n\n## JSON\n\n`ActiveRecord::JSON::Encoding.escape`\u306f4\u30d0\u30a4\u30c8\u4ee5\u4e0a\u306e\u6587\u5b57\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u306b\u5931\u6557\u3059\u308b\u306e\u3067\u3001\u4eca\u306f[JSON gem](https://rubygems.org/gems/json)\u3092\u4f7f\u3063\u3066\u308b\u3002\n\n`config/initializers/active_support_json_encoding.rb`\u306b\u3053\u3093\u306a\u611f\u3058\uff1a\n\n```rb\nmodule ActiveSupport\n  module JSON\n    module Encoding\n      class << self\n        def escape_with_json_gem(string)\n          ::JSON.generate([string])[1..-2]\n        end\n        alias_method_chain :escape, :json_gem\n      end\n    end\n  end\nend\n```\n\nJSON gem\u3092\u4f7f\u308f\u306a\u304f\u3066\u3082[\u81ea\u5206\u3067\u3061\u3083\u3093\u3068\u30a8\u30b9\u30b1\u30fc\u30d7\u3057\u3066\u3042\u3052\u308b\u65b9\u6cd5](http://qiita.com/items/d3fe732d7bc8425f4323)\u3082\u3042\u308b\u3002\n\n#### \u53c2\u8003\u8cc7\u6599\n\n* [rails mysql\u3067iPhone\u30a2\u30d7\u30ea\u306e\u7d75\u6587\u5b57\u5bfe\u5fdc ](http://d.hatena.ne.jp/yutadayo/20120630/1341070679)\n* [How do you deal with the conflict between ActiveSupport::JSON and the JSON gem?](http://stackoverflow.com/questions/683989/how-do-you-deal-with-the-conflict-between-activesupportjson-and-the-json-gem/3285570#3285570)\n* [Emoji and Rails JSON output issue](http://blog.sosedoff.com/2012/04/26/emoji-and-rails-json-output-issue/)\n\n## \uff08\u3061\u306a\u307f\u306b\uff09WebSocket/Node.js\n\nWebSocket\u306bNode.js\u3092\u4f7f\u3046\u5834\u5408\u3001Javascript\u306e\u30a8\u30f3\u30b8\u30f3\u3067\u3042\u308bV8\u304c4\u30d0\u30a4\u30c8\u306eUTF-8\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001URL\u30a8\u30f3\u30b3\u30fc\u30c9\u306a\u3069\u306e\u9069\u5f53\u306a\u5909\u63db\u3092\u304b\u3051\u3066\u304b\u3089\u30c7\u30fc\u30bf\u3092\u6e21\u3057\u3066\u3042\u3052\u308b\u3002\n\nURL\u30a8\u30f3\u30b3\u30fc\u30c9\u3060\u3068\u3053\u3093\u306a\u611f\u3058\uff1a\n\n```\n# Rails\u5074\nencoded = Rack::Utils.escape(mb_string)\n\n// JS\u5074\nvar mbString = decodeURIComponent(encoded).replace(/\\+/g,  \" \");\n```\n\n\n## Android, iOS4\u306f\u3069\u3046\u3059\u308b\u306e\uff1f\n\n* iOS4\u304b\u3089iOS5\u3067\u7d75\u6587\u5b57\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fb\u30bb\u30c3\u30c8\u304c\u5909\u308f\u3063\u305f\u3051\u3069\u3001iOS5\u3067\u306fiOS4\u306e\u7d75\u6587\u5b57\u3092\u8868\u793a\u3067\u304d\u308b\u306e\u3067\u3001iOS5\u304b\u3089\u306e\u7d75\u6587\u5b57\u3092\u3059\u3079\u3066iOS4\u306e\u3082\u306e\u306b\u5909\u63db\u3057\u3066\u3057\u307e\u3046\u306e\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n  * \u3067\u3082\u305d\u308c\u3082\u3044\u3064\u307e\u3067\u6709\u52b9\u306a\u3093\u3060\u308d\u3046\u306a\u3041\u2026\u3002\n* Android\u306f\u77e5\u3089\u3093\n  * Naver\u306eLINE\u304c\u304c\u3093\u3070\u3063\u3066\u308b\u3001\u6c17\u304c\u3059\u308b\u3002\n", "tags": ["Rails", "ActiveRecord", "emoji", "MySQL"]}