{"context": "\nsample.rb\narticles = Article\ntotal_count = articles.count\nper_batch = 2000\n0.step(total_count, per_batch) do |offset|\n  articles.limit(per_batch).skip(offset).each.with_index(offset) do |article, i|\n    puts \"#{i}/#{total_count}\"\n    STDOUT.flush\u3000#nohup\u6642\u306b\u9010\u6b21\u8868\u793a\u3055\u305b\u308b\n  end\nend\n\n\n```ruby:sample.rb\narticles = Article\ntotal_count = articles.count\nper_batch = 2000\n0.step(total_count, per_batch) do |offset|\n  articles.limit(per_batch).skip(offset).each.with_index(offset) do |article, i|\n    puts \"#{i}/#{total_count}\"\n    STDOUT.flush\u3000#nohup\u6642\u306b\u9010\u6b21\u8868\u793a\u3055\u305b\u308b\n  end\nend\n```\n", "tags": ["Rails", "mongoid"]}