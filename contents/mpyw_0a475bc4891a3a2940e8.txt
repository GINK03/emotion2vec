{"context": " More than 1 year has passed since last update.\n\n\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u30ed\u30b8\u30c3\u30af\n\nHTML\u306e\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u30ed\u30b8\u30c3\u30af\u306b\u7d44\u307f\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u53ef\u8aad\u6027\u304c\u5927\u304d\u304f\u4e0b\u304c\u308b\u306e\u3067\u3001\u30ab\u30ec\u30f3\u30c0\u30fc\u3092 2\u6b21\u5143\u914d\u5217 \u3068\u3057\u3066\u8868\u73fe\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\u307e\u305f\u3001 2038\u5e74\u554f\u984c \u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u306b  \u65e5\u4ed8\u30fb\u6642\u523b\u95a2\u6570 \u306e\u4ee3\u308f\u308a\u306b DateTime \u30af\u30e9\u30b9\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u624b\u7d9a\u304d\u578b\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n\n\u8ab0\u3082\u304c\u7406\u89e3\u3067\u304d\u308b\u6700\u3082\u30aa\u30fc\u30bd\u30c9\u30c3\u30af\u30b9\u306a\u65b9\u6cd5\u3067\u3059\u3002\u305f\u3076\u3093\u3002\n\n\u30d1\u30e9\u30e1\u30fc\u30bf(\u5fc5\u8981\u306b\u5fdc\u3058\u3066try\uff5ecatch\u30d6\u30ed\u30c3\u30af\u3092\u8a2d\u3051\u307e\u3059)\n$date = new DateTime('\u6307\u5b9a\u5e74-\u6307\u5b9a\u6708-1 00:00:00');\n$day  = (int)$date->format('w'); // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u203b\u751f\u6210\u904e\u7a0b\u3067\u66f8\u304d\u63db\u3048\u3089\u308c\u307e\u3059)\n$week = 0;                       // \u9031\u30aa\u30d5\u30bb\u30c3\u30c8(\u203b\u751f\u6210\u904e\u7a0b\u3067\u66f8\u304d\u63db\u3048\u3089\u308c\u307e\u3059)\n$max  = (int)$date->format('t'); // \u5408\u8a08\u65e5\u6570\n\n\n\n2\u6b21\u5143\u914d\u5217\u306e\u751f\u6210\nfor ($i = $day; $i > 0; --$i) {\n    // 1\u65e5\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u5206\u7a7a\u767d\u30bb\u30eb\u3092\u4f5c\u308b\n    $rows[$week][] = '';\n}\nfor ($i = 1; $i <= $max; ++$i) {\n    // \u571f\u66dc\u65e5\u3092\u30aa\u30fc\u30d0\u30fc\u3057\u3066\u53f3\u306b\u306f\u307f\u51fa\u3059\u304b\u3069\u3046\u304b\u30c1\u30a7\u30c3\u30af\n    if ($day > 6) {\n        ++$week;  // \u6b21\u306e\u9031\u306b\u79fb\u52d5\n        $day = 0; // \u65e5\u66dc\u65e5\u306b\u30ea\u30bb\u30c3\u30c8\n    }\n    $rows[$week][] = $i; // \u5f53\u8a72\u65e5\u306e\u30bb\u30eb\u3092\u4f5c\u308b\n    ++$day;              // \u6b21\u306e\u66dc\u65e5\u306b\u79fb\u52d5\n}\nfor ($i = $day; $i <= 6; $i++) {\n    // \u6700\u7d42\u65e5\u3088\u308a\u5f8c\u3082\u571f\u66dc\u65e5\u307e\u3067\u7a7a\u767d\u30bb\u30eb\u3067\u57cb\u3081\u308b\n    $rows[$week][] = '';\n}\n\n\n\n\u95a2\u6570\u578b\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf(\u5fc5\u8981\u306b\u5fdc\u3058\u3066try\uff5ecatch\u30d6\u30ed\u30c3\u30af\u3092\u8a2d\u3051\u307e\u3059)\n$date   = new DateTime('\u6307\u5b9a\u5e74-\u6307\u5b9a\u6708-1 00:00:00');\n$max    = (int)$date->format('t');        // \u5408\u8a08\u65e5\u6570\n$before = (int)$date->format('w');        // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u524d)\n$after  = (7 - ($before + $max) % 7) % 7; // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u5f8c)\n\n\n\n\u8457\u8005\u6848\n\n\u6b20\u9665\u8a00\u8a9e\u306ePHP\u3060\u3063\u3066\u3053\u308c\u3050\u3089\u3044\u51fa\u6765\u308b\u3093\u3060\uff01\n(\u6700\u521d\u8a18\u4e8b\u66f8\u3044\u305f\u3068\u304d\u601d\u3044\u3064\u304b\u306a\u304b\u3063\u305f)\n\n2\u6b21\u5143\u914d\u5217\u306e\u751f\u6210\n$rows = array_chunk(array_merge(\n    $before ? array_fill(0, $before, '') : array(),\n    range(1, $max),\n    $after ? array_fill(0, $after, '') : array()\n), 7);\n\n\n\u4f55\u3067 array_fill \u95a2\u6570\u3063\u3066\u30bc\u30ed\u6e21\u3059\u3068\u6012\u3089\u308c\u308b\u3093\u3060\u308d\u3046\u2026\n\n@naga3 \u3055\u3093\u6848\n\n\u30b3\u30e1\u30f3\u30c8\u3057\u3066\u3044\u305f\u3060\u3044\u305f\u5185\u5bb9\u3067\u3059\u304c\u3001\u3053\u3063\u3061\u306e\u65b9\u304c\u3088\u308a\u95a2\u6570\u578b\u3063\u307d\u3044\u611f\u3058\u304c\u3057\u3066\u597d\u304d\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u2026\uff57\n\n2\u6b21\u5143\u914d\u5217\u306e\u751f\u6210\n$rows = array_chunk(array_map(\n    function ($i) use ($max) { return $i < 1 || $i > $max ? '' : $i; },\n    range(1 - $before, $max + $after)\n), 7);\n\n\n\n\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u88c5\n\n\u4e0a\u8a18\u3067\u7d39\u4ecb\u3057\u305f\u95a2\u6570\u578b\u30ed\u30b8\u30c3\u30af\u3092\u7528\u3044\u3066\u3001\u5b9f\u969b\u306b\u30ab\u30ec\u30f3\u30c0\u30fc\u3092\u751f\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n\nstyle.css\n\n.sun {\n    color: red;\n}\n.sat {\n    color: blue;\n}\n.today {\n    background: antiquewhite;\n}\nbody {\n    background: #FBDADE;\n}\ntable,tr,th,td {\n    border: solid 1px black;\n    margin-left: auto;\n    margin-right: auto;\n    background: white;\n    border: solid 1px silver;\n    border-collapse: collapse;\n}\nth {\n    text-align: center;\n}\ntd {\n    text-align: right;\n}\na {\n    text-decoration: none;\n}\na:link,a:visited,a:active {\n    color: pink;\n}\na:hover {\n    color: hotpink;\n}\n\n\ncalendar.php\n\nPHP5.3\u4ee5\u964d\u3092\u5bfe\u8c61\u3068\u3057\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002PHP5.5\u4ee5\u964d\u3067\u3042\u308c\u3070 DateTimeImmutable \u30af\u30e9\u30b9\u304c\u4f7f\u3048\u308b\u306e\u3067\u3001\u591a\u5206\u3082\u3046\u3061\u3087\u3063\u3068\u8aad\u307f\u3084\u3059\u304f\u66f8\u3051\u308b\u306f\u305a\u3067\u3059\u3002\n<?php\n\n/* $_GET\u3092\u5c55\u958b */\n$py = filter_input(INPUT_GET, 'y');\n$pm = filter_input(INPUT_GET, 'm');\n\n/* 3\u30f5\u6708\u5206\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u751f\u6210\u3059\u308b */\ntry {\n    $dt      = new DateTime(\"$py-$pm-1 00:00:00\");\n    $dt_prev = clone $dt;\n    $dt_next = clone $dt;\n    $dt_prev->sub(new DateInterval('P1M'));\n    $dt_next->add(new DateInterval('P1M'));\n} catch (Exception $e) {\n    // \u5931\u6557\u3057\u305f\u3068\u304d\u306f\u4eca\u6708\u3092\u57fa\u6e96\u306b\u3059\u308b\n    $dt      = new DateTime('first day of this month 00:00:00');\n    $dt_prev = clone $dt;\n    $dt_next = clone $dt;\n    $dt_prev->sub(new DateInterval('P1M'));\n    $dt_next->add(new DateInterval('P1M'));\n}\n\n/* \u30ea\u30f3\u30af\u30fb\u30bf\u30a4\u30c8\u30eb\u30fb\u30d5\u30a9\u30fc\u30e0\u518d\u8868\u793a\u7528 */\n$py      = $dt->format('Y'); // \u3053\u308c\u3092\u884c\u308f\u306a\u3044\u5834\u5408\u306fXSS\u5bfe\u7b56\u304c\u5225\u9014\u5fc5\u8981\n$pm      = $dt->format('n'); // \u3053\u308c\u3092\u884c\u308f\u306a\u3044\u5834\u5408\u306fXSS\u5bfe\u7b56\u304c\u5225\u9014\u5fc5\u8981\n$current = $dt->format('Y\u5e74n\u6708');\n$prev    = $dt_prev->format('?\\y=Y&\\a\\mp;\\m=n');\n$next    = $dt_next->format('?\\y=Y&\\a\\mp;\\m=n');\n\n/* \u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u7528\u30d1\u30e9\u30e1\u30fc\u30bf */\n$max    = (int)$dt->format('t');           // \u5408\u8a08\u65e5\u6570\n$before = (int)$dt->format('w');           // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u524d)\n$after  = (7 - ($before + $max) % 7) % 7;  // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u5f8c)\n$today  = (int)date_create()->format('d'); // \u4eca\u65e5\n\n/* \u4eca\u65e5\u3092\u30cf\u30a4\u30e9\u30a4\u30c8\u3059\u308b\u304b\u3069\u3046\u304b */\n$hl = !$dt->diff(new DateTime('first day of this month 00:00:00'))->days;\n\n/* \u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u30ed\u30b8\u30c3\u30af */\n$rows = array_chunk(array_map(\n    function ($i) use ($max) { return $i < 1 || $i > $max ? '' : $i; },\n    range(1 - $before, $max + $after)\n), 7);\n\n/* \u30d8\u30c3\u30c0\u30fc\u3092\u9001\u4fe1 */\nheader('Content-Type: application/xhtml+xml; charset=utf-8');\n\n?>\n<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  <head>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />\n    <title>\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210</title>\n  </head>\n  <body>\n    <h1>\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210</h1>\n    <p>\n      <fieldset>\n        <legend>\u8a2d\u5b9a</legend>\n        <form action=\"\" method=\"get\">\n          <input type=\"text\" name=\"y\" value=\"<?=$py?>\" size=\"4\" />\u5e74\n          <input type=\"text\" name=\"m\" value=\"<?=$pm?>\" size=\"2\" />\u6708\n          <input type=\"submit\" value=\"\u751f\u6210\" />\n        </form>\n      </fieldset>\n    </p>\n    <p>\n      <table>\n        <tr>\n          <th><a href=\"<?=$prev?>\">\u2190</a></th>\n          <th colspan=\"5\"><h2><?=$current?></h2></th>\n          <th><a href=\"<?=$next?>\">\u2192</a></th>\n        </tr>\n        <tr>\n          <th class=\"sun\">\u65e5</th>\n          <th>\u6708</th>\n          <th>\u706b</th>\n          <th>\u6c34</th>\n          <th>\u6728</th>\n          <th>\u91d1</th>\n          <th class=\"sat\">\u571f</th>\n        </tr>\n<?php foreach ($rows as $row): ?>\n        <tr>\n<?php foreach ($row as $cell): ?>\n<?php if ($hl && $cell === $today): ?>\n          <td class=\"today\"><?=$cell?></td>\n<?php else: ?>\n          <td><?=$cell?></td>\n<?php endif; ?>\n<?php endforeach; ?>\n        </tr>\n<?php endforeach; ?>\n      </table>\n    </p>\n  </body> \n</html>\n\n# **\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u30ed\u30b8\u30c3\u30af**\n\n<ins>HTML\u306e\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u30ed\u30b8\u30c3\u30af\u306b\u7d44\u307f\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u53ef\u8aad\u6027\u304c\u5927\u304d\u304f\u4e0b\u304c\u308b</ins>\u306e\u3067\u3001\u30ab\u30ec\u30f3\u30c0\u30fc\u3092 **2\u6b21\u5143\u914d\u5217** \u3068\u3057\u3066\u8868\u73fe\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\u307e\u305f\u3001 **[2038\u5e74\u554f\u984c](http://ja.wikipedia.org/wiki/2038%E5%B9%B4%E5%95%8F%E9%A1%8C)** \u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u306b  **[\u65e5\u4ed8\u30fb\u6642\u523b\u95a2\u6570](http://www.php.net/manual/ja/ref.datetime.php)** \u306e\u4ee3\u308f\u308a\u306b **[DateTime](http://www.php.net/manual/ja/class.datetime.php)** \u30af\u30e9\u30b9\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n## **\u624b\u7d9a\u304d\u578b\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0**\n\n\u8ab0\u3082\u304c\u7406\u89e3\u3067\u304d\u308b\u6700\u3082\u30aa\u30fc\u30bd\u30c9\u30c3\u30af\u30b9\u306a\u65b9\u6cd5\u3067\u3059\u3002\u305f\u3076\u3093\u3002\n\n```php:\u30d1\u30e9\u30e1\u30fc\u30bf(\u5fc5\u8981\u306b\u5fdc\u3058\u3066try\uff5ecatch\u30d6\u30ed\u30c3\u30af\u3092\u8a2d\u3051\u307e\u3059)\n$date = new DateTime('\u6307\u5b9a\u5e74-\u6307\u5b9a\u6708-1 00:00:00');\n$day  = (int)$date->format('w'); // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u203b\u751f\u6210\u904e\u7a0b\u3067\u66f8\u304d\u63db\u3048\u3089\u308c\u307e\u3059)\n$week = 0;                       // \u9031\u30aa\u30d5\u30bb\u30c3\u30c8(\u203b\u751f\u6210\u904e\u7a0b\u3067\u66f8\u304d\u63db\u3048\u3089\u308c\u307e\u3059)\n$max  = (int)$date->format('t'); // \u5408\u8a08\u65e5\u6570\n```\n\n```php:2\u6b21\u5143\u914d\u5217\u306e\u751f\u6210\nfor ($i = $day; $i > 0; --$i) {\n    // 1\u65e5\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u5206\u7a7a\u767d\u30bb\u30eb\u3092\u4f5c\u308b\n    $rows[$week][] = '';\n}\nfor ($i = 1; $i <= $max; ++$i) {\n    // \u571f\u66dc\u65e5\u3092\u30aa\u30fc\u30d0\u30fc\u3057\u3066\u53f3\u306b\u306f\u307f\u51fa\u3059\u304b\u3069\u3046\u304b\u30c1\u30a7\u30c3\u30af\n    if ($day > 6) {\n        ++$week;  // \u6b21\u306e\u9031\u306b\u79fb\u52d5\n        $day = 0; // \u65e5\u66dc\u65e5\u306b\u30ea\u30bb\u30c3\u30c8\n    }\n    $rows[$week][] = $i; // \u5f53\u8a72\u65e5\u306e\u30bb\u30eb\u3092\u4f5c\u308b\n    ++$day;              // \u6b21\u306e\u66dc\u65e5\u306b\u79fb\u52d5\n}\nfor ($i = $day; $i <= 6; $i++) {\n    // \u6700\u7d42\u65e5\u3088\u308a\u5f8c\u3082\u571f\u66dc\u65e5\u307e\u3067\u7a7a\u767d\u30bb\u30eb\u3067\u57cb\u3081\u308b\n    $rows[$week][] = '';\n}\n```\n\n## **\u95a2\u6570\u578b\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0**\n\n```php:\u30d1\u30e9\u30e1\u30fc\u30bf(\u5fc5\u8981\u306b\u5fdc\u3058\u3066try\uff5ecatch\u30d6\u30ed\u30c3\u30af\u3092\u8a2d\u3051\u307e\u3059)\n$date   = new DateTime('\u6307\u5b9a\u5e74-\u6307\u5b9a\u6708-1 00:00:00');\n$max    = (int)$date->format('t');        // \u5408\u8a08\u65e5\u6570\n$before = (int)$date->format('w');        // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u524d)\n$after  = (7 - ($before + $max) % 7) % 7; // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u5f8c)\n```\n\n### **\u8457\u8005\u6848**\n\n\u6b20\u9665\u8a00\u8a9e\u306ePHP\u3060\u3063\u3066\u3053\u308c\u3050\u3089\u3044\u51fa\u6765\u308b\u3093\u3060\uff01\n<del>(\u6700\u521d\u8a18\u4e8b\u66f8\u3044\u305f\u3068\u304d\u601d\u3044\u3064\u304b\u306a\u304b\u3063\u305f)</del>\n\n```php:2\u6b21\u5143\u914d\u5217\u306e\u751f\u6210\n$rows = array_chunk(array_merge(\n    $before ? array_fill(0, $before, '') : array(),\n    range(1, $max),\n    $after ? array_fill(0, $after, '') : array()\n), 7);\n```\n\n\u4f55\u3067 **[array_fill](http://www.php.net//manual/ja/function.array-fill.php)** \u95a2\u6570\u3063\u3066\u30bc\u30ed\u6e21\u3059\u3068\u6012\u3089\u308c\u308b\u3093\u3060\u308d\u3046\u2026\n\n### **@naga3 \u3055\u3093\u6848**\n\n\u30b3\u30e1\u30f3\u30c8\u3057\u3066\u3044\u305f\u3060\u3044\u305f\u5185\u5bb9\u3067\u3059\u304c\u3001\u3053\u3063\u3061\u306e\u65b9\u304c\u3088\u308a\u95a2\u6570\u578b\u3063\u307d\u3044\u611f\u3058\u304c\u3057\u3066\u597d\u304d\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u2026\uff57\n\n```php:2\u6b21\u5143\u914d\u5217\u306e\u751f\u6210\n$rows = array_chunk(array_map(\n    function ($i) use ($max) { return $i < 1 || $i > $max ? '' : $i; },\n    range(1 - $before, $max + $after)\n), 7);\n```\n\n# **\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u88c5**\n\n\u4e0a\u8a18\u3067\u7d39\u4ecb\u3057\u305f\u95a2\u6570\u578b\u30ed\u30b8\u30c3\u30af\u3092\u7528\u3044\u3066\u3001\u5b9f\u969b\u306b\u30ab\u30ec\u30f3\u30c0\u30fc\u3092\u751f\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\n![\u30ab\u30ec\u30f3\u30c0\u30fc](https://qiita-image-store.s3.amazonaws.com/0/25060/e1489a7b-9ec4-4b5f-67f4-f5efab1bd6f2.png)\n\n## **style.css**\n\n```css\n.sun {\n    color: red;\n}\n.sat {\n    color: blue;\n}\n.today {\n    background: antiquewhite;\n}\nbody {\n    background: #FBDADE;\n}\ntable,tr,th,td {\n    border: solid 1px black;\n    margin-left: auto;\n    margin-right: auto;\n    background: white;\n    border: solid 1px silver;\n    border-collapse: collapse;\n}\nth {\n    text-align: center;\n}\ntd {\n    text-align: right;\n}\na {\n    text-decoration: none;\n}\na:link,a:visited,a:active {\n    color: pink;\n}\na:hover {\n    color: hotpink;\n}\n```\n\n## **calendar.php**\n\nPHP5.3\u4ee5\u964d\u3092\u5bfe\u8c61\u3068\u3057\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002PHP5.5\u4ee5\u964d\u3067\u3042\u308c\u3070 **[DateTimeImmutable](http://www.php.net/manual/ja/class.datetimeimmutable.php)** \u30af\u30e9\u30b9\u304c\u4f7f\u3048\u308b\u306e\u3067\u3001\u591a\u5206\u3082\u3046\u3061\u3087\u3063\u3068\u8aad\u307f\u3084\u3059\u304f\u66f8\u3051\u308b\u306f\u305a\u3067\u3059\u3002\n\n```html+php\n<?php\n\n/* $_GET\u3092\u5c55\u958b */\n$py = filter_input(INPUT_GET, 'y');\n$pm = filter_input(INPUT_GET, 'm');\n\n/* 3\u30f5\u6708\u5206\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u751f\u6210\u3059\u308b */\ntry {\n    $dt      = new DateTime(\"$py-$pm-1 00:00:00\");\n    $dt_prev = clone $dt;\n    $dt_next = clone $dt;\n    $dt_prev->sub(new DateInterval('P1M'));\n    $dt_next->add(new DateInterval('P1M'));\n} catch (Exception $e) {\n    // \u5931\u6557\u3057\u305f\u3068\u304d\u306f\u4eca\u6708\u3092\u57fa\u6e96\u306b\u3059\u308b\n    $dt      = new DateTime('first day of this month 00:00:00');\n    $dt_prev = clone $dt;\n    $dt_next = clone $dt;\n    $dt_prev->sub(new DateInterval('P1M'));\n    $dt_next->add(new DateInterval('P1M'));\n}\n\n/* \u30ea\u30f3\u30af\u30fb\u30bf\u30a4\u30c8\u30eb\u30fb\u30d5\u30a9\u30fc\u30e0\u518d\u8868\u793a\u7528 */\n$py      = $dt->format('Y'); // \u3053\u308c\u3092\u884c\u308f\u306a\u3044\u5834\u5408\u306fXSS\u5bfe\u7b56\u304c\u5225\u9014\u5fc5\u8981\n$pm      = $dt->format('n'); // \u3053\u308c\u3092\u884c\u308f\u306a\u3044\u5834\u5408\u306fXSS\u5bfe\u7b56\u304c\u5225\u9014\u5fc5\u8981\n$current = $dt->format('Y\u5e74n\u6708');\n$prev    = $dt_prev->format('?\\y=Y&\\a\\mp;\\m=n');\n$next    = $dt_next->format('?\\y=Y&\\a\\mp;\\m=n');\n\n/* \u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u7528\u30d1\u30e9\u30e1\u30fc\u30bf */\n$max    = (int)$dt->format('t');           // \u5408\u8a08\u65e5\u6570\n$before = (int)$dt->format('w');           // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u524d)\n$after  = (7 - ($before + $max) % 7) % 7;  // \u66dc\u65e5\u30aa\u30d5\u30bb\u30c3\u30c8(\u5f8c)\n$today  = (int)date_create()->format('d'); // \u4eca\u65e5\n\n/* \u4eca\u65e5\u3092\u30cf\u30a4\u30e9\u30a4\u30c8\u3059\u308b\u304b\u3069\u3046\u304b */\n$hl = !$dt->diff(new DateTime('first day of this month 00:00:00'))->days;\n\n/* \u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210\u30ed\u30b8\u30c3\u30af */\n$rows = array_chunk(array_map(\n    function ($i) use ($max) { return $i < 1 || $i > $max ? '' : $i; },\n    range(1 - $before, $max + $after)\n), 7);\n\n/* \u30d8\u30c3\u30c0\u30fc\u3092\u9001\u4fe1 */\nheader('Content-Type: application/xhtml+xml; charset=utf-8');\n\n?>\n<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  <head>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />\n    <title>\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210</title>\n  </head>\n  <body>\n    <h1>\u30ab\u30ec\u30f3\u30c0\u30fc\u751f\u6210</h1>\n    <p>\n      <fieldset>\n        <legend>\u8a2d\u5b9a</legend>\n        <form action=\"\" method=\"get\">\n          <input type=\"text\" name=\"y\" value=\"<?=$py?>\" size=\"4\" />\u5e74\n          <input type=\"text\" name=\"m\" value=\"<?=$pm?>\" size=\"2\" />\u6708\n          <input type=\"submit\" value=\"\u751f\u6210\" />\n        </form>\n      </fieldset>\n    </p>\n    <p>\n      <table>\n        <tr>\n          <th><a href=\"<?=$prev?>\">\u2190</a></th>\n          <th colspan=\"5\"><h2><?=$current?></h2></th>\n          <th><a href=\"<?=$next?>\">\u2192</a></th>\n        </tr>\n        <tr>\n          <th class=\"sun\">\u65e5</th>\n          <th>\u6708</th>\n          <th>\u706b</th>\n          <th>\u6c34</th>\n          <th>\u6728</th>\n          <th>\u91d1</th>\n          <th class=\"sat\">\u571f</th>\n        </tr>\n<?php foreach ($rows as $row): ?>\n        <tr>\n<?php foreach ($row as $cell): ?>\n<?php if ($hl && $cell === $today): ?>\n          <td class=\"today\"><?=$cell?></td>\n<?php else: ?>\n          <td><?=$cell?></td>\n<?php endif; ?>\n<?php endforeach; ?>\n        </tr>\n<?php endforeach; ?>\n      </table>\n    </p>\n  </body> \n</html>\n```\n", "tags": ["PHP", "\u30ab\u30ec\u30f3\u30c0\u30fc", "\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0", "HTML5", "HTML"]}