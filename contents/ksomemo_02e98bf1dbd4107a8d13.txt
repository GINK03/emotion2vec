{"context": "\n\nenviroment\n\nWindows7\n64bit OS\nAnaconda4.2\npython3.5\nGit\n7Zip\n\n\ninstall VS 2015 Community for c/c++ build\n\nhttps://www.visualstudio.com/ja/downloads/\nmust choose Programming language Cpp\n\n\ninstall mecab for compiled IPA dictionary\nhttp://taku910.github.io/mecab/#download\n\ninstall mecab by installer for dictionary\ndictionary char code utf-8\nadd bin dir to path\n\n\nedit mecab.h\n\nadd set_result member\nwhen edit the sorce code, turn off administrator authentication\n\n\nsdk/mecab.h.patch\n--- C:/Program Files (x86)/MeCab/sdk/mecab.h.bak    Mon Jan 21 17:02:08 2013\n+++ C:/Program Files (x86)/MeCab/sdk/mecab.h    Tue Jan 24 15:41:25 2017\n@@ -777,6 +777,7 @@\n  */\n class MECAB_DLL_CLASS_EXTERN Lattice {\n public:\n+  virtual void set_result(const char *str) = 0;\n   /**\n    * Clear all internal lattice data.\n    */\n\n\n\nsource code\n\ndonwload\n\ndonwload mecab-0.996.tar.gz and ungzip\n\n\nedit Makefile and source code\nmecab-0.996/src\n\ncopy Makefile.msvc.in to Makefile.msvc\n\n\nX86 to X64\n\n@DIC_VERSION to 102\n\n@VERSION@ to 0.996\n\n\nfeature_index.cpp\nwriter.cpp\n\n\nsize_t to unsigned int\n\n\n\n\nMakefile.msvc.patch\n--- C:/Users/xxx/Downloads/mecab-0.996/src/Makefile.msvc.in Sun Sep 30 01:44:26 2012\n+++ C:/Users/xxx/Downloads/mecab-0.996/src/Makefile.msvc    Tue Jan 24 12:55:46 2017\n@@ -3,10 +3,10 @@\n LINK=link.exe\n\n CFLAGS = /EHsc /O2 /GL /GA /Ob2 /nologo /W3 /MT /Zi /wd4800 /wd4305 /wd4244\n-LDFLAGS = /nologo /OPT:REF /OPT:ICF /LTCG /NXCOMPAT /DYNAMICBASE /MACHINE:X86 ADVAPI32.LIB\n+LDFLAGS = /nologo /OPT:REF /OPT:ICF /LTCG /NXCOMPAT /DYNAMICBASE /MACHINE:X64 ADVAPI32.LIB\n DEFS =  -D_CRT_SECURE_NO_DEPRECATE -DMECAB_USE_THREAD \\\n-        -DDLL_EXPORT -DHAVE_GETENV -DHAVE_WINDOWS_H -DDIC_VERSION=@DIC_VERSION@ \\\n-        -DVERSION=\"\\\"@VERSION@\\\"\" -DPACKAGE=\"\\\"mecab\\\"\" \\\n+        -DDLL_EXPORT -DHAVE_GETENV -DHAVE_WINDOWS_H -DDIC_VERSION=102 \\\n+        -DVERSION=\"\\\"0.996\\\"\" -DPACKAGE=\"\\\"mecab\\\"\" \\\n         -DUNICODE -D_UNICODE \\\n         -DMECAB_DEFAULT_RC=\"\\\"c:\\\\Program Files\\\\mecab\\\\etc\\\\mecabrc\\\"\"\n INC = -I. -I..\n\n\n\nfeature_index.cpp.patch\n--- C:/Users/xxx/Downloads/mecab-0.996/src/feature_index.cpp    Mon Jan 16 16:30:05 2017\n+++ C:/Users/xxx/Downloads/mecab-0.996/src/feature_index.cpp.bak    Sun Nov 25 14:35:32 2012\n@@ -353,7 +353,7 @@\n               if (!r) goto NEXT;\n               os_ << r;\n             } break;\n-            case 't':  os_ << (unsigned int)path->rnode->char_type;     break;\n+            case 't':  os_ << (size_t)path->rnode->char_type;     break;\n             case 'u':  os_ << ufeature; break;\n             case 'w':\n               if (path->rnode->stat == MECAB_NOR_NODE) {\n\n\n\nwriter.cpp.patch\n--- C:/Users/xxx/Downloads/mecab-0.996/src/writer.cpp   Mon Jan 16 16:31:10 2017\n+++ C:/Users/xxx/Downloads/mecab-0.996/src/writer.cpp.bak   Mon Jan 16 16:30:56 2017\n@@ -257,7 +257,7 @@\n             // input sentence\n           case 'S': os->write(lattice->sentence(), lattice->size()); break;\n             // sentence length\n-           case 'L': *os << (unsigned int)lattice->size(); break;\n+          case 'L': *os << lattice->size(); break;\n             // morph\n           case 'm': os->write(node->surface, node->length); break;\n           case 'M': os->write(reinterpret_cast<const char *>\n\n\n\nbuild exe, dll, lib\n\nrun Open Visual Studio 2015 x64 Native Tools Command Prompt\n\nsame as call \"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\vcvarsall.bat\" amd64\n\nadd to path, add variable, etc.\n\n\ndiff-path.txt\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow\nC:\\Program Files (x86)\\MSBuild\\14.0\\bin\\amd64\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64\nC:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools\nC:\\Program Files (x86)\\HTML Help Workshop\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\\x64\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\nC:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x64\nC:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x86\nC:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\\n\n\n\ndiff-set-command-result.log\nCommandPromptType=Native\nFramework40Version=v4.0\nFrameworkDir=C:\\Windows\\Microsoft.NET\\Framework64\nFrameworkDIR64=C:\\Windows\\Microsoft.NET\\Framework64\nFrameworkVersion=v4.0.30319\nFrameworkVersion64=v4.0.30319\nINCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10240.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\shared;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\winrt;\nLIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.10240.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\lib\\winv6.3\\um\\x64;\nLIBPATH=C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\8.1\\References\\CommonConfiguration\\Neutral;\\Microsoft.VCLibs\\14.0\\References\\CommonConfiguration\\neutral;\nNETFXSDKDir=C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\\nPlatform=X64\nUCRTVersion=10.0.10240.0\nUniversalCRTSdkDir=C:\\Program Files (x86)\\Windows Kits\\10\\\nVCINSTALLDIR=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\\nVisualStudioVersion=14.0\nWindowsLibPath=C:\\Program Files (x86)\\Windows Kits\\8.1\\References\\CommonConfiguration\\Neutral\nWindowsSdkDir=C:\\Program Files (x86)\\Windows Kits\\8.1\\\nWindowsSDKLibVersion=winv6.3\\\nWindowsSDKVersion=\\\nWindowsSDK_ExecutablePath_x64=C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\\nWindowsSDK_ExecutablePath_x86=C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\\n\n\n\nmake\n\ncd mecab-0.996/src\nrun make.bat (make)\n\n\nnmake -f Makefile.msvc\n\n\nif failed, run nmake -f Makefile.msvc clean\n\n\n\ncopy oututs\n\nto mecab/bin\n\n\nlibmecab.dll\nmecab.exe\nmecab-cost-train.exe\nmecab-dict-gen.exe\nmecab-dict-index.exe\nmecab-system-eval.exe\nmecab-test-gen.exe\n\n\nto mecab/sdk\n\n\nlibmecab.lib\nmecab.h\n\n\n\n\npython-mecab\n\n\ngit clone https://github.com/SamuraiT/mecab-python3\n\nCommit hash:    9411d509f34d3a0494b9a5c241566c99014ec063\n\n\nedit setup.py\npip install --no-cache-dir -e .\n\n\nsetup.py.patch\n--- C:/Users/xxx/AppData/Local/Temp/h80KN9_setup.py Tue Jan 24 14:08:23 2017\n+++ C:/Users/xxx/tools/mecab-python3/setup.py   Tue Jan 24 14:08:53 2017\n@@ -38,9 +38,9 @@\n     ext_modules = [\n         Extension(\"_MeCab\",\n         [\"MeCab_wrap.cxx\",],\n-        include_dirs=cmd2(\"mecab-config --inc-dir\"),\n-        library_dirs=cmd2(\"mecab-config --libs-only-L\"),\n-        libraries=cmd2(\"mecab-config --libs-only-l\"))\n+        include_dirs=[r\"C:\\Program Files (x86)\\MeCab\\sdk\"],\n+        library_dirs=[r\"C:\\Program Files (x86)\\MeCab\\sdk\"],\n+        libraries=[\"libmecab\"])\n     ],\n     classifiers = [\n         \"Programming Language :: Python\",\n\n\n\nreferences\n\nhttp://pop365.cocolog-nifty.com/blog/2015/03/windows-64bit-m.html\nhttps://gist.github.com/ksomemo/6c834b5ed96aaf410c9b4a1b4fb50f41\n\n\n## enviroment\n- Windows7\n- 64bit OS\n- Anaconda4.2\n- python3.5\n- Git\n- 7Zip\n\n## install VS 2015 Community for c/c++ build\n- https://www.visualstudio.com/ja/downloads/\n- must choose Programming language Cpp\n\n\n## install mecab for compiled IPA dictionary\nhttp://taku910.github.io/mecab/#download\n\n- install mecab by installer for dictionary\n- dictionary char code utf-8\n- add bin dir to path\n\n### edit mecab.h\n- add set_result member\n- when edit the sorce code, turn off administrator authentication\n\n```sdk/mecab.h.patch\n--- C:/Program Files (x86)/MeCab/sdk/mecab.h.bak\tMon Jan 21 17:02:08 2013\n+++ C:/Program Files (x86)/MeCab/sdk/mecab.h\tTue Jan 24 15:41:25 2017\n@@ -777,6 +777,7 @@\n  */\n class MECAB_DLL_CLASS_EXTERN Lattice {\n public:\n+  virtual void set_result(const char *str) = 0;\n   /**\n    * Clear all internal lattice data.\n    */\n```\n\n## source code\n### donwload\n- donwload mecab-0.996.tar.gz and ungzip\n\n### edit Makefile and source code \nmecab-0.996/src\n\n- copy Makefile.msvc.in to Makefile.msvc\n  - X86 to X64\n  - @DIC_VERSION to 102\n  - @VERSION@ to 0.996\n- feature_index.cpp\n- writer.cpp\n  - size_t to unsigned int\n\n```Makefile.msvc.patch\n--- C:/Users/xxx/Downloads/mecab-0.996/src/Makefile.msvc.in\tSun Sep 30 01:44:26 2012\n+++ C:/Users/xxx/Downloads/mecab-0.996/src/Makefile.msvc\tTue Jan 24 12:55:46 2017\n@@ -3,10 +3,10 @@\n LINK=link.exe\n \n CFLAGS = /EHsc /O2 /GL /GA /Ob2 /nologo /W3 /MT /Zi /wd4800 /wd4305 /wd4244\n-LDFLAGS = /nologo /OPT:REF /OPT:ICF /LTCG /NXCOMPAT /DYNAMICBASE /MACHINE:X86 ADVAPI32.LIB\n+LDFLAGS = /nologo /OPT:REF /OPT:ICF /LTCG /NXCOMPAT /DYNAMICBASE /MACHINE:X64 ADVAPI32.LIB\n DEFS =  -D_CRT_SECURE_NO_DEPRECATE -DMECAB_USE_THREAD \\\n-        -DDLL_EXPORT -DHAVE_GETENV -DHAVE_WINDOWS_H -DDIC_VERSION=@DIC_VERSION@ \\\n-        -DVERSION=\"\\\"@VERSION@\\\"\" -DPACKAGE=\"\\\"mecab\\\"\" \\\n+        -DDLL_EXPORT -DHAVE_GETENV -DHAVE_WINDOWS_H -DDIC_VERSION=102 \\\n+        -DVERSION=\"\\\"0.996\\\"\" -DPACKAGE=\"\\\"mecab\\\"\" \\\n         -DUNICODE -D_UNICODE \\\n         -DMECAB_DEFAULT_RC=\"\\\"c:\\\\Program Files\\\\mecab\\\\etc\\\\mecabrc\\\"\"\n INC = -I. -I..\n```\n\n```feature_index.cpp.patch\n--- C:/Users/xxx/Downloads/mecab-0.996/src/feature_index.cpp\tMon Jan 16 16:30:05 2017\n+++ C:/Users/xxx/Downloads/mecab-0.996/src/feature_index.cpp.bak\tSun Nov 25 14:35:32 2012\n@@ -353,7 +353,7 @@\n               if (!r) goto NEXT;\n               os_ << r;\n             } break;\n-            case 't':  os_ << (unsigned int)path->rnode->char_type;     break;\n+            case 't':  os_ << (size_t)path->rnode->char_type;     break;\n             case 'u':  os_ << ufeature; break;\n             case 'w':\n               if (path->rnode->stat == MECAB_NOR_NODE) {\n```\n\n```writer.cpp.patch\n--- C:/Users/xxx/Downloads/mecab-0.996/src/writer.cpp\tMon Jan 16 16:31:10 2017\n+++ C:/Users/xxx/Downloads/mecab-0.996/src/writer.cpp.bak\tMon Jan 16 16:30:56 2017\n@@ -257,7 +257,7 @@\n             // input sentence\n           case 'S': os->write(lattice->sentence(), lattice->size()); break;\n             // sentence length\n-        \tcase 'L': *os << (unsigned int)lattice->size(); break;\n+          case 'L': *os << lattice->size(); break;\n             // morph\n           case 'm': os->write(node->surface, node->length); break;\n           case 'M': os->write(reinterpret_cast<const char *>\n```\n\n\n## build exe, dll, lib\n### run Open Visual Studio 2015 x64 Native Tools Command Prompt\n- same as `call \"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\vcvarsall.bat\" amd64`\n- add to path, add variable, etc.\n\n```diff-path.txt\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow\nC:\\Program Files (x86)\\MSBuild\\14.0\\bin\\amd64\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64\nC:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools\nC:\\Program Files (x86)\\HTML Help Workshop\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\\x64\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\nC:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x64\nC:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x86\nC:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\\n```\n\n```diff-set-command-result.log\nCommandPromptType=Native\nFramework40Version=v4.0\nFrameworkDir=C:\\Windows\\Microsoft.NET\\Framework64\nFrameworkDIR64=C:\\Windows\\Microsoft.NET\\Framework64\nFrameworkVersion=v4.0.30319\nFrameworkVersion64=v4.0.30319\nINCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.10240.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\shared;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\um;C:\\Program Files (x86)\\Windows Kits\\8.1\\include\\\\winrt;\nLIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.10240.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\lib\\winv6.3\\um\\x64;\nLIBPATH=C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\8.1\\References\\CommonConfiguration\\Neutral;\\Microsoft.VCLibs\\14.0\\References\\CommonConfiguration\\neutral;\nNETFXSDKDir=C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\\nPlatform=X64\nUCRTVersion=10.0.10240.0\nUniversalCRTSdkDir=C:\\Program Files (x86)\\Windows Kits\\10\\\nVCINSTALLDIR=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\\nVisualStudioVersion=14.0\nWindowsLibPath=C:\\Program Files (x86)\\Windows Kits\\8.1\\References\\CommonConfiguration\\Neutral\nWindowsSdkDir=C:\\Program Files (x86)\\Windows Kits\\8.1\\\nWindowsSDKLibVersion=winv6.3\\\nWindowsSDKVersion=\\\nWindowsSDK_ExecutablePath_x64=C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\\nWindowsSDK_ExecutablePath_x86=C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\\n```\n\n### make\n- cd mecab-0.996/src\n- run make.bat (`make`)\n  - `nmake -f Makefile.msvc`\n- if failed, run `nmake -f Makefile.msvc clean`\n\n### copy oututs\n- to mecab/bin\n  - libmecab.dll\n  - mecab.exe\n  - mecab-cost-train.exe\n  - mecab-dict-gen.exe\n  - mecab-dict-index.exe\n  - mecab-system-eval.exe\n  - mecab-test-gen.exe\n- to mecab/sdk\n  - libmecab.lib\n  - mecab.h\n\n## python-mecab\n- `git clone https://github.com/SamuraiT/mecab-python3`\n  - Commit hash:\t9411d509f34d3a0494b9a5c241566c99014ec063\n- edit setup.py\n- `pip install --no-cache-dir -e .`\n\n```setup.py.patch\n--- C:/Users/xxx/AppData/Local/Temp/h80KN9_setup.py\tTue Jan 24 14:08:23 2017\n+++ C:/Users/xxx/tools/mecab-python3/setup.py\tTue Jan 24 14:08:53 2017\n@@ -38,9 +38,9 @@\n     ext_modules = [\n         Extension(\"_MeCab\",\n         [\"MeCab_wrap.cxx\",],\n-        include_dirs=cmd2(\"mecab-config --inc-dir\"),\n-        library_dirs=cmd2(\"mecab-config --libs-only-L\"),\n-        libraries=cmd2(\"mecab-config --libs-only-l\"))\n+        include_dirs=[r\"C:\\Program Files (x86)\\MeCab\\sdk\"],\n+        library_dirs=[r\"C:\\Program Files (x86)\\MeCab\\sdk\"],\n+        libraries=[\"libmecab\"])\n     ],\n     classifiers = [\n         \"Programming Language :: Python\",\n```\n\n## references\n- http://pop365.cocolog-nifty.com/blog/2015/03/windows-64bit-m.html\n- https://gist.github.com/ksomemo/6c834b5ed96aaf410c9b4a1b4fb50f41\n", "tags": ["memo"]}