{"context": "\n\n\u6982\u8981\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u74b0\u5883\u306b\u4f5c\u3063\u3066\u3044\u308bOracle Datatabase 12c\u74b0\u5883\u304b\u3089\u3001Database Cloud Service\u3078\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u79fb\u52d5\u3057\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u540c\u4e00\u30c7\u30fc\u30bf\u74b0\u5883\u3092\u518d\u73fe\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u306f\nOracle Database 12c\u306b\u306f\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(\u4ee5\u964d\u3001PDB)\u3068\u547c\u3076\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306b\u4eee\u60f3\u7684\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u69cb\u6210\u3059\u308b\u6a5f\u80fd\u3067\u3001\u3053\u306e\u4eee\u60f3\u7684\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4e8b\u304cPDB\u3067\u3059\u3002\nPDB\u306f\u3001\u8907\u6570\u306ePDB\u9593\u3067\u30e1\u30e2\u30ea\u9818\u57df\u3084\u30d7\u30ed\u30bb\u30b9\u3001\u5236\u5fa1\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3092\u5171\u6709\u3057\u307e\u3059\u3002\u305d\u3057\u3066PDB\u5358\u4f4d\u3067\u79fb\u52d5\uff08\u30d7\u30e9\u30b0/\u30a2\u30f3\u30d7\u30e9\u30b0\uff09\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\nOracle\u516c\u958b\u8cc7\u6599\u3088\u308a\u5f15\u7528\n\n\n\n\u79fb\u52d5\u5bfe\u8c61\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u306b\u69cb\u6210\u6e08\u307f\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e00\u89a7\nSQL> show pdbs;\n\n    CON_ID CON_NAME                       OPEN MODE  RESTRICTED\n---------- ------------------------------ ---------- ----------\n         2 PDB$SEED                       READ ONLY  NO\n         3 PDB                            READ WRITE  NO\n\nPDB\u3068\u3044\u3046\u540d\u524d\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\nPDB\u306b\u63a5\u7d9a\u3057\u3066\u69cb\u6210\u6e08\u307f\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n[oracle@db01 ~]$ sqlplus medrec/medrec@localhost:1521/pdb.jp.oracle.com\n\nselect table_name, tablespace_name, status from user_tables;\n\nTABLE_NAME             TABLESPACE_NAME      STATUS\n---------------------- -------------------- --------\nADMINISTRATORS         USERS                VALID\nPATIENTS               USERS                VALID\nPATIENTS_RECORDS       USERS                VALID\nPHYSICIANS             USERS                VALID\nPRESCRIPTIONS          USERS                VALID\nRECORDS                USERS                VALID\nRECORDS_PRESCRIPTIONS  USERS                VALID\nSEQUENCE               USERS                VALID\n\n8 rows selected.\n\n8\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\n\u79fb\u52d5\u5bfe\u8c61\u306ePDB\u306e\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\nset lines 120\nset pages 100\nset term off\nclear col\ncol TABLESPACE_NAME  format a10\ncol FILE_NAME        format a35\ncol STATUS           format a10\ncol MBYTES           format 9,999,990\ncol INCRE            format 9,999,990\ncol AUTOEXTENSIBLE   format a5\ncol ONLINE_STATUS    format a6\nselect\n  tablespace_name,\n  file_name,\n  status,\n  bytes/1024/1024 mbytes,\n  increment_by,\n  autoextensible,\n  online_status\nfrom\n  dba_data_files;\n\nTABLESPACE FILE_NAME                           STATUS         MBYTES INCREMENT_BY AUTOE ONLINE\n---------- ----------------------------------- ---------- ---------- ------------ ----- ------\nSYSTEM     /u01/app/oracle/oradata/orcl12c/pdb AVAILABLE         250         1280 YES   SYSTEM\n           /system01.dbf\n\nSYSAUX     /u01/app/oracle/oradata/orcl12c/pdb AVAILABLE         570         1280 YES   ONLINE\n           /sysaux01.dbf\n\nUSERS      /u01/app/oracle/oradata/orcl12c/pdb AVAILABLE           5          160 YES   ONLINE\n           /pdb_users01.dbf\n\n[oracle@db01 pdb]$ ls -l /u01/app/oracle/oradata/orcl12c/pdb\ntotal 844888\n-rw-r-----. 1 oracle oinstall   5251072 Nov  7 06:50 pdb_users01.dbf\n-rw-r-----. 1 oracle oinstall 597696512 Nov  7 06:50 sysaux01.dbf\n-rw-r-----. 1 oracle oinstall 262152192 Nov  7 06:50 system01.dbf\n-rw-r-----. 1 oracle oinstall  20979712 Nov  7 05:11 temp012016-11-07_04-38-41-AM.dbf\n\n/u01/app/oracle/oradata/orcl12c/pdb \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u914d\u4e0b\u306b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a2\u30f3\u30d7\u30e9\u30b0\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u53d6\u308a\u51fa\u3059\u3053\u3068\u3092\u30a2\u30f3\u30d7\u30e9\u30b0\u3068\u547c\u3073\u307e\u3059\u3002\n\u30a2\u30f3\u30d7\u30e9\u30b0\u3092\u3059\u308b\u3068\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u95a2\u3059\u308b\u60c5\u5831\u304cXML\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n\u30a2\u30f3\u30d7\u30e9\u30b0\u306e\u5b9f\u65bd\n\u4ee5\u4e0b\u306eSQL\u3067\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u307e\u3059\u3002\n```sql\nSQL> alter pluggable database pdb unplug into '/home/oracle/for_cloud/pdb.xml';\nPluggable database altered.\n```\n\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bXML\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n$ ls -l /home/oracle/for_cloud/pdb.xml\n-rw-r--r--. 1 oracle oinstall 4367 Nov  7 06:50 /home/oracle/for_cloud/pdb.xml\n\n\nDatabase Cloud Service \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u79fb\u52d5\u5148\u3068\u306a\u308bDatabase Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b5\u30de\u30ea\u30fc\n\n\n\n\u4f5c\u6210\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n\n\n\nDatabase Cloud Service\u3078\u306e\u79fb\u52d5\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u3067\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB(XML\u30d5\u30a1\u30a4\u30eb)\u3068\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092Database Cloud Service\u3078\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u914d\u7f6e\u5148\u306e\u6e96\u5099\nDatabase Cloud Service\u74b0\u5883\u306b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff1a/u02/app/oracle/oradata/\n\n\n$ ls -l /u02/app/oracle/oradata/ORCL\ntotal 2282704\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:18 changetracking\n-rwxr-x--- 1 oracle oinstall  17973248 Nov  7 16:56 control01.ctl\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:15 PDB1\ndrwxr-x--- 2 oracle oinstall      4096 Sep 12 16:35 pdbseed\n-rwxr-x--- 1 oracle oinstall 702554112 Nov  7 16:52 sysaux01.dbf\n-rwxr-x--- 1 oracle oinstall 828383232 Nov  7 16:55 system01.dbf\n-rwxr-x--- 1 oracle oinstall 206577664 Nov  7 16:27 temp01.dbf\n-rwxr-x--- 1 oracle oinstall 576724992 Nov  7 16:55 undotbs01.dbf\n-rwxr-x--- 1 oracle oinstall   5251072 Nov  7 16:35 users01.dbf\n\n/u02/app/oracle/oradata/ORCL\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ mkdir /u02/app/oracle/oradata/ORCL/pdb_from_onpremise\n$ ls -l /u02/app/oracle/oradata/ORCL/\ntotal 2282708\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:18 changetracking\n-rwxr-x--- 1 oracle oinstall  17973248 Nov  7 17:02 control01.ctl\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:15 PDB1\ndrwxr-xr-x 2 oracle oinstall      4096 Nov  7 17:02 pdb_from_onpremise\ndrwxr-x--- 2 oracle oinstall      4096 Sep 12 16:35 pdbseed\n-rwxr-x--- 1 oracle oinstall 702554112 Nov  7 17:01 sysaux01.dbf\n-rwxr-x--- 1 oracle oinstall 828383232 Nov  7 17:00 system01.dbf\n-rwxr-x--- 1 oracle oinstall 206577664 Nov  7 17:01 temp01.dbf\n-rwxr-x--- 1 oracle oinstall 576724992 Nov  7 16:59 undotbs01.dbf\n-rwxr-x--- 1 oracle oinstall   5251072 Nov  7 16:35 users01.dbf\n\n\n\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\n\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u30af\u30e9\u30a6\u30c9\u3078\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n$ scp pdb_users01.dbf oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n$ scp sysaux01.dbf oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n$ scp system01.db oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n\n\n\u30a2\u30f3\u30d7\u30e9\u30b0PDB XML\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\n\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB XML\u30d5\u30a1\u30a4\u30eb\u3092\u30af\u30e9\u30a6\u30c9\u3078\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n$ scp pdb.xml oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n\n\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d7\u30e9\u30b0\n\u3059\u3067\u306bDatabase Cloud Service\u4e0a\u306b\u306f\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u307e\u305a\u524a\u9664\u3057\u305f\u5f8c\u306b\u79fb\u52d5\u3057\u305f\u304d\u305fPDB\u3092\u30d7\u30e9\u30b0\u3057\u307e\u3059\u3002\n\nDatabase Cloud Service\u4e0a\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\nSQL> alter pluggable database pdb1 close;\nPluggable database altered.\nSQL> drop pluggable database pdb1 including datafiles;\nPluggable database dropped.\nSQL> show pdbs;\n\n    CON_ID CON_NAME                       OPEN MODE  RESTRICTED\n---------- ------------------------------ ---------- ----------\n         2 PDB$SEED                       READ ONLY  NO\n\n\n\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB\u306eXML\u3092\u7de8\u96c6\nXML\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u5834\u6240\u304c\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u3067\u3042\u308c\u3070/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\u3067\u30d1\u30b9\u3092\u66f8\u304d\u63db\u3048\u308b\n\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d7\u30e9\u30b0\n\u4ee5\u4e0b\u306eSQL\u3067\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB\u3092\u30d7\u30e9\u30b0\u3059\u308b\nSQL> create pluggable database pdb1\n  2  using '/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/pdb.xml'\n  3  file_name_convert = (\n  4  '/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/',\n  5  '/u02/app/oracle/oradata/ORCL/pdb_migrated/'\n  6  );\n\nPluggable database created.\n\n\n\u78ba\u8a8d\nSQL>  select table_name, tablespace_name, status from user_tables;\n\nTABLE_NAME            TABLESPACE_NAME      STATUS\n--------------------- -------------------- --------\nADMINISTRATORS        USERS                VALID\nPATIENTS              USERS                VALID\nPATIENTS_RECORDS      USERS                VALID\nPHYSICIANS            USERS                VALID\nPRESCRIPTIONS         USERS                VALID\nRECORDS               USERS                VALID\nRECORDS_PRESCRIPTIONS USERS                VALID\nSEQUENCE              USERS                VALID\n\n\n\u307e\u3068\u3081\nPDB\u3067\u306e\u79fb\u52d5\u306f\u3001\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\u5148\u306b\u914d\u7f6e\u3057\u3001\u8a8d\u8b58\u3055\u305b\u308b\u3068\u3044\u3046\u76f4\u611f\u7684\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u64cd\u4f5c\u3067\u3059\u3002\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u304b\u3089\u30af\u30e9\u30a6\u30c9\u3078\u306e\u79fb\u52d5\u3082\u3068\u3066\u3082\u7c21\u5358\u306b\u5b9f\u65bd\u3067\u304d\u307e\u3057\u305f\u3002\n\n# \u6982\u8981\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u74b0\u5883\u306b\u4f5c\u3063\u3066\u3044\u308bOracle Datatabase 12c\u74b0\u5883\u304b\u3089\u3001Database Cloud Service\u3078**\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\u3092\u79fb\u52d5\u3057\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u540c\u4e00\u30c7\u30fc\u30bf\u74b0\u5883\u3092\u518d\u73fe\u3057\u3066\u307f\u307e\u3059\u3002\n\n![plug-unplug.png](https://qiita-image-store.s3.amazonaws.com/0/127983/d348a662-e83c-d2c9-f558-1223d1877db6.png)\n\n## \u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u306f\nOracle Database 12c\u306b\u306f**\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(\u4ee5\u964d\u3001PDB)**\u3068\u547c\u3076\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306b\u4eee\u60f3\u7684\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u69cb\u6210\u3059\u308b\u6a5f\u80fd\u3067\u3001\u3053\u306e\u4eee\u60f3\u7684\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4e8b\u304cPDB\u3067\u3059\u3002\nPDB\u306f\u3001\u8907\u6570\u306ePDB\u9593\u3067\u30e1\u30e2\u30ea\u9818\u57df\u3084\u30d7\u30ed\u30bb\u30b9\u3001\u5236\u5fa1\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3092\u5171\u6709\u3057\u307e\u3059\u3002\u305d\u3057\u3066PDB\u5358\u4f4d\u3067\u79fb\u52d5\uff08\u30d7\u30e9\u30b0/\u30a2\u30f3\u30d7\u30e9\u30b0\uff09\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n- Oracle\u516c\u958b\u8cc7\u6599\u3088\u308a\u5f15\u7528\n\n![\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9](http://image.slidesharecdn.com/oracledatabase12cnewfeatures-131126013157-phpapp01/95/oracle-database-12c-r1-3-638.jpg?cb=1385429627)\n\n# \u79fb\u52d5\u5bfe\u8c61\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u306b\u69cb\u6210\u6e08\u307f\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e00\u89a7\n```bash\nSQL> show pdbs;\n\n    CON_ID CON_NAME                       OPEN MODE  RESTRICTED\n---------- ------------------------------ ---------- ----------\n         2 PDB$SEED                       READ ONLY  NO\n         3 PDB                            READ WRITE  NO\n```\n\nPDB\u3068\u3044\u3046\u540d\u524d\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n\n## \u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\nPDB\u306b\u63a5\u7d9a\u3057\u3066\u69cb\u6210\u6e08\u307f\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n[oracle@db01 ~]$ sqlplus medrec/medrec@localhost:1521/pdb.jp.oracle.com\n```\n\n```sql\nselect table_name, tablespace_name, status from user_tables;\n\nTABLE_NAME             TABLESPACE_NAME      STATUS\n---------------------- -------------------- --------\nADMINISTRATORS         USERS                VALID\nPATIENTS               USERS                VALID\nPATIENTS_RECORDS       USERS                VALID\nPHYSICIANS             USERS                VALID\nPRESCRIPTIONS          USERS                VALID\nRECORDS                USERS                VALID\nRECORDS_PRESCRIPTIONS  USERS                VALID\nSEQUENCE               USERS                VALID\n\n8 rows selected.\n```\n\n8\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\n\n## \u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\n\u79fb\u52d5\u5bfe\u8c61\u306ePDB\u306e\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```sql\nset lines 120\nset pages 100\nset term off\nclear col\ncol TABLESPACE_NAME  format a10\ncol FILE_NAME        format a35\ncol STATUS           format a10\ncol MBYTES           format 9,999,990\ncol INCRE            format 9,999,990\ncol AUTOEXTENSIBLE   format a5\ncol ONLINE_STATUS    format a6\nselect\n  tablespace_name,\n  file_name,\n  status,\n  bytes/1024/1024 mbytes,\n  increment_by,\n  autoextensible,\n  online_status\nfrom\n  dba_data_files;\n\nTABLESPACE FILE_NAME                           STATUS         MBYTES INCREMENT_BY AUTOE ONLINE\n---------- ----------------------------------- ---------- ---------- ------------ ----- ------\nSYSTEM     /u01/app/oracle/oradata/orcl12c/pdb AVAILABLE         250         1280 YES   SYSTEM\n           /system01.dbf\n\nSYSAUX     /u01/app/oracle/oradata/orcl12c/pdb AVAILABLE         570         1280 YES   ONLINE\n           /sysaux01.dbf\n\nUSERS      /u01/app/oracle/oradata/orcl12c/pdb AVAILABLE           5          160 YES   ONLINE\n           /pdb_users01.dbf\n```\n\n```bash\n[oracle@db01 pdb]$ ls -l /u01/app/oracle/oradata/orcl12c/pdb\ntotal 844888\n-rw-r-----. 1 oracle oinstall   5251072 Nov  7 06:50 pdb_users01.dbf\n-rw-r-----. 1 oracle oinstall 597696512 Nov  7 06:50 sysaux01.dbf\n-rw-r-----. 1 oracle oinstall 262152192 Nov  7 06:50 system01.dbf\n-rw-r-----. 1 oracle oinstall  20979712 Nov  7 05:11 temp012016-11-07_04-38-41-AM.dbf\n```\n\n/u01/app/oracle/oradata/orcl12c/pdb \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u914d\u4e0b\u306b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\n\n# \u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a2\u30f3\u30d7\u30e9\u30b0\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u53d6\u308a\u51fa\u3059\u3053\u3068\u3092**\u30a2\u30f3\u30d7\u30e9\u30b0**\u3068\u547c\u3073\u307e\u3059\u3002\n\u30a2\u30f3\u30d7\u30e9\u30b0\u3092\u3059\u308b\u3068\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u95a2\u3059\u308b\u60c5\u5831\u304cXML\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n## \u30a2\u30f3\u30d7\u30e9\u30b0\u306e\u5b9f\u65bd\n\u4ee5\u4e0b\u306eSQL\u3067\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u307e\u3059\u3002\n```sql\nSQL> alter pluggable database pdb unplug into '/home/oracle/for_cloud/pdb.xml';\n\nPluggable database altered.\n```\n\n\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bXML\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```bash\n$ ls -l /home/oracle/for_cloud/pdb.xml\n-rw-r--r--. 1 oracle oinstall 4367 Nov  7 06:50 /home/oracle/for_cloud/pdb.xml\n```\n\n# Database Cloud Service \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u79fb\u52d5\u5148\u3068\u306a\u308bDatabase Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n- \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b5\u30de\u30ea\u30fc\n\n![dbcs.emea.oraclecloud.com_2016-11-07_15-58-46.png](https://qiita-image-store.s3.amazonaws.com/0/127983/6cd9b3f8-6602-2d1e-e73d-e4b1d4b76520.png)\n\n- \u4f5c\u6210\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n\n![dbcs.emea.oraclecloud.com_2016-11-07_16-33-03.png](https://qiita-image-store.s3.amazonaws.com/0/127983/3f55e179-84a6-e919-3540-91830aa4ed6e.png)\n\n# Database Cloud Service\u3078\u306e\u79fb\u52d5\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u3067\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB(XML\u30d5\u30a1\u30a4\u30eb)\u3068\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092Database Cloud Service\u3078\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n## \u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u914d\u7f6e\u5148\u306e\u6e96\u5099\nDatabase Cloud Service\u74b0\u5883\u306b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n- \u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff1a**/u02/app/oracle/oradata/**\n\n```bash\n$ ls -l /u02/app/oracle/oradata/ORCL\ntotal 2282704\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:18 changetracking\n-rwxr-x--- 1 oracle oinstall  17973248 Nov  7 16:56 control01.ctl\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:15 PDB1\ndrwxr-x--- 2 oracle oinstall      4096 Sep 12 16:35 pdbseed\n-rwxr-x--- 1 oracle oinstall 702554112 Nov  7 16:52 sysaux01.dbf\n-rwxr-x--- 1 oracle oinstall 828383232 Nov  7 16:55 system01.dbf\n-rwxr-x--- 1 oracle oinstall 206577664 Nov  7 16:27 temp01.dbf\n-rwxr-x--- 1 oracle oinstall 576724992 Nov  7 16:55 undotbs01.dbf\n-rwxr-x--- 1 oracle oinstall   5251072 Nov  7 16:35 users01.dbf\n```\n\n/u02/app/oracle/oradata/ORCL\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\n$ mkdir /u02/app/oracle/oradata/ORCL/pdb_from_onpremise\n$ ls -l /u02/app/oracle/oradata/ORCL/\ntotal 2282708\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:18 changetracking\n-rwxr-x--- 1 oracle oinstall  17973248 Nov  7 17:02 control01.ctl\ndrwxr-x--- 2 oracle oinstall      4096 Nov  7 16:15 PDB1\ndrwxr-xr-x 2 oracle oinstall      4096 Nov  7 17:02 pdb_from_onpremise\ndrwxr-x--- 2 oracle oinstall      4096 Sep 12 16:35 pdbseed\n-rwxr-x--- 1 oracle oinstall 702554112 Nov  7 17:01 sysaux01.dbf\n-rwxr-x--- 1 oracle oinstall 828383232 Nov  7 17:00 system01.dbf\n-rwxr-x--- 1 oracle oinstall 206577664 Nov  7 17:01 temp01.dbf\n-rwxr-x--- 1 oracle oinstall 576724992 Nov  7 16:59 undotbs01.dbf\n-rwxr-x--- 1 oracle oinstall   5251072 Nov  7 16:35 users01.dbf\n```\n\n## \u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\n\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u30af\u30e9\u30a6\u30c9\u3078\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```bash\n$ scp pdb_users01.dbf oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n$ scp sysaux01.dbf oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n$ scp system01.db oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n```\n\n## \u30a2\u30f3\u30d7\u30e9\u30b0PDB XML\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\n\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB XML\u30d5\u30a1\u30a4\u30eb\u3092\u30af\u30e9\u30a6\u30c9\u3078\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```bash\n$ scp pdb.xml oracle@<DBCS-IP\u30a2\u30c9\u30ec\u30b9>:/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/\n```\n\n# \u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d7\u30e9\u30b0\n\u3059\u3067\u306bDatabase Cloud Service\u4e0a\u306b\u306f\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u307e\u305a\u524a\u9664\u3057\u305f\u5f8c\u306b\u79fb\u52d5\u3057\u305f\u304d\u305fPDB\u3092\u30d7\u30e9\u30b0\u3057\u307e\u3059\u3002\n\n## Database Cloud Service\u4e0a\u306e\u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\n```bash\nSQL> alter pluggable database pdb1 close;\nPluggable database altered.\nSQL> drop pluggable database pdb1 including datafiles;\nPluggable database dropped.\nSQL> show pdbs;\n\n    CON_ID CON_NAME                       OPEN MODE  RESTRICTED\n---------- ------------------------------ ---------- ----------\n         2 PDB$SEED                       READ ONLY  NO\n```\n\n## \u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB\u306eXML\u3092\u7de8\u96c6\nXML\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u5834\u6240\u304c\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u3067\u3042\u308c\u3070*/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/*\u3067\u30d1\u30b9\u3092\u66f8\u304d\u63db\u3048\u308b\n\n## \u30d7\u30e9\u30ac\u30d6\u30eb\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d7\u30e9\u30b0\n\u4ee5\u4e0b\u306eSQL\u3067\u30a2\u30f3\u30d7\u30e9\u30b0\u3057\u305fPDB\u3092\u30d7\u30e9\u30b0\u3059\u308b\n\n```bash\nSQL> create pluggable database pdb1\n  2  using '/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/pdb.xml'\n  3  file_name_convert = (\n  4  '/u02/app/oracle/oradata/ORCL/pdb_from_onpremise/',\n  5  '/u02/app/oracle/oradata/ORCL/pdb_migrated/'\n  6  );\n\nPluggable database created.\n```\n\n## \u78ba\u8a8d\n\n```sql\nSQL>  select table_name, tablespace_name, status from user_tables;\n\nTABLE_NAME            TABLESPACE_NAME      STATUS\n--------------------- -------------------- --------\nADMINISTRATORS        USERS                VALID\nPATIENTS              USERS                VALID\nPATIENTS_RECORDS      USERS                VALID\nPHYSICIANS            USERS                VALID\nPRESCRIPTIONS         USERS                VALID\nRECORDS               USERS                VALID\nRECORDS_PRESCRIPTIONS USERS                VALID\nSEQUENCE              USERS                VALID\n```\n\n# \u307e\u3068\u3081\nPDB\u3067\u306e\u79fb\u52d5\u306f\u3001\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\u5148\u306b\u914d\u7f6e\u3057\u3001\u8a8d\u8b58\u3055\u305b\u308b\u3068\u3044\u3046\u76f4\u611f\u7684\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u64cd\u4f5c\u3067\u3059\u3002\n\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u304b\u3089\u30af\u30e9\u30a6\u30c9\u3078\u306e\u79fb\u52d5\u3082\u3068\u3066\u3082\u7c21\u5358\u306b\u5b9f\u65bd\u3067\u304d\u307e\u3057\u305f\u3002\n", "tags": ["oracle", "Cloud", "Database"]}