{"context": "\n\n\u6982\u8981\nBluemix \u7528 ibmnode \u30a4\u30e1\u30fc\u30b8\u5165\u9580 \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3060\u3060\u3051\u3067\u306f\u3001\u51fa\u6765\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u8abf\u3079\u305f\u4e8b\u3092\u542b\u3081\u3066\u3001\u30ab\u30b9\u30bf\u30e0\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3059\u308b\u307e\u3067\u3092\u78ba\u8a8d\u3057\u305f\u8a18\u9332\u3067\u3059\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\nIBM Container \u3092\u4f5c\u6210\u3059\u308b\u5143\u306b\u306a\u308b\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u898b\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002 \u6700\u521d\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u3057\u3066\u3001\u3053\u306e\u30ea\u30b9\u30c8\u306b\u30ab\u30b9\u30bf\u30e0\u30fb\u30a4\u30e1\u30fc\u30b8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode# cf ic images\nREPOSITORY                                    TAG                 IMAGE ID            CREATED             SIZE\nregistry.ng.bluemix.net/ibm_wa_agent          latest              42090290077d        11 weeks ago        418.8 MB\nregistry.ng.bluemix.net/ibm-backup-restore    latest              4b84e2510ebe        2 weeks ago         205.4 MB\nregistry.ng.bluemix.net/ibm-integration-bus   latest              d8b7c6d7c9bc        10 days ago         681 MB\nregistry.ng.bluemix.net/ibm-node-strong-pm    latest              e63d1d2a3244        2 weeks ago         264.1 MB\nregistry.ng.bluemix.net/ibmliberty            javaee7             190892c21ed5        12 weeks ago        313.5 MB\nregistry.ng.bluemix.net/ibmliberty            latest              190892c21ed5        12 weeks ago        313.5 MB\nregistry.ng.bluemix.net/ibmliberty            microProfile        3b74ce22b3ac        12 weeks ago        237.9 MB\nregistry.ng.bluemix.net/ibmliberty            webProfile6         2546c4b2a22f        12 weeks ago        266.9 MB\nregistry.ng.bluemix.net/ibmliberty            webProfile7         d06fb99cd165        12 weeks ago        276.2 MB\nregistry.ng.bluemix.net/ibmnode               latest              337f3f2a2e8f        2 weeks ago         197.1 MB\nregistry.ng.bluemix.net/ibmnode               v4                  337f3f2a2e8f        2 weeks ago         197.1 MB\nregistry.ng.bluemix.net/ibmnode               v1.1                e5776452ee8f        2 weeks ago         186.6 MB\nregistry.ng.bluemix.net/ibmnode               v1.2                8a5cfcc8251c        2 weeks ago         192.8 MB\n\n\n\u30ab\u30b9\u30bf\u30e0\u30fb\u30b3\u30f3\u30c6\u30ca\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u308a\u65b9\nBluemix \u7528 ibmnode \u30a4\u30e1\u30fc\u30b8\u5165\u9580 \u306e\u8a18\u4e8b\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e hellonode.zip \u3092\u5229\u7528\u3057\u3066\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~# wget ftp://public.dhe.ibm.com/cloud/bluemix/containers/hellonode.zip\n\n\u6b21\u306b\u3001unzip\u3067\u5c55\u958b\u3057\u307e\u3059\u3002\u3082\u3057unzip \u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070 apt-get install unzip \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~# unzip hellonode.zip \nArchive:  hellonode.zip\n   creating: hellonode/app/\n  inflating: hellonode/app/app.js    \n  inflating: hellonode/Dockerfile   \n\nhellonode.zip \u3092\u5c55\u958b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode# ls -al\ntotal 16\ndrwxr-xr-x 3 root   root   4096 Dec 14 07:34 .\ndrwxrwxr-x 3 ubuntu ubuntu 4096 Dec 14 07:34 ..\ndrwxr-xr-x 3 root   root   4096 Dec 14 07:56 app\n-rw-r--r-- 1 root   root    146 Jan 14  2016 Dockerfile\n\n\n\u30ab\u30b9\u30bf\u30e0\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210\n\u3053\u3053\u304b\u3089\u3001\u30ab\u30b9\u30bf\u30e0\u30b3\u30f3\u30c6\u30ca\u306b\u3001\u8a70\u3081\u8fbc\u3080\u30d5\u30a1\u30a4\u30eb\u306e\u30bb\u30c3\u30c8\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u6700\u521d\u306b\u3001\u3053\u306eNode.js\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u306e\u521d\u671f\u5316\u3092\u884c\u3044\u307e\u3059\u3002\u5c55\u958b\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u306e app \u306b\u79fb\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3067\u3082\u826f\u3044\u306e\u3067 Enter \u3092\u62bc\u3057\u3066\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode/app# npm init\nThis utility will walk you through creating a package.json file.\nIt only covers the most common items, and tries to guess sensible defaults.\n\nSee `npm help json` for definitive documentation on these fields\nand exactly what they do.\n\nUse `npm install <pkg> --save` afterwards to install a package and\nsave it as a dependency in the package.json file.\n\nPress ^C at any time to quit.\nname: (app) \nversion: (1.0.0) \ndescription: \ngit repository: \nkeywords: \nauthor: \nlicense: (ISC) \nAbout to write to /home/ubuntu/ibmnode/hellonode/app/package.json:\n\n{\n  \"name\": \"app\",\n  \"version\": \"1.0.0\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"express\": \"^4.14.0\"\n  },\n  \"devDependencies\": {},\n  \"description\": \"\"\n}\n\n\nIs this ok? (yes) yes\n\n\u6b21\u306bNode.js\u3067\u958b\u767a\u3055\u308c\u305f Web\u30a2\u30d7\u30ea\u3092\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Express \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode/app# npm install express -save\napp@1.0.0 /home/ubuntu/ibmnode/hellonode/app\n\u2514\u2500\u252c express@4.14.0 \n  \u251c\u2500\u252c accepts@1.3.3 \n  \u2502 \u251c\u2500\u252c mime-types@2.1.13 \n  \u2502 \u2502 \u2514\u2500\u2500 mime-db@1.25.0 \n  \u2502 \u2514\u2500\u2500 negotiator@0.6.1 \n<\u4ee5\u4e0b\u7701\u7565>\n\n\u3053\u306e\u4e2d\u3067\u3001node_modules \u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u30fc\u306b express \u3084 \u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u53ce\u3081\u3089\u308c\u3066\u3044\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode/app# ls -al\ntotal 20\ndrwxr-xr-x  3 root root 4096 Dec 15 01:03 .\ndrwxr-xr-x  3 root root 4096 Dec 14 07:34 ..\n-rw-r--r--  1 root root  229 Jan 14  2016 app.js\ndrwxr-xr-x 45 root root 4096 Dec 15 01:03 node_modules\n-rw-r--r--  1 root root  272 Dec 15 01:03 package.json\n\n\u3053\u3053\u304b\u3089\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210\u306b docker \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u74b0\u5883\u306b\u3001docker \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 Ubuntu \u3067\u3042\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n# apt-get install docker.io\n\ndocker \u30b3\u30de\u30f3\u30c9\u304c\u52d5\u4f5c\u3059\u308b\u69d8\u306b\u306a\u308c\u3070\u3001\u65e9\u901f\u3001\u81ea\u5206\u306ePC\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067\u3001Docker \u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 Dockerfile \u306e\u3042\u308b\u5834\u6240\u3067\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode# docker build -t mynode:node1 .\nSending build context to Docker daemon 1.264 MB\nStep 1 : FROM registry.ng.bluemix.net/ibmnode\nlatest: Pulling from ibmnode\nba76e97bb96c: Already exists \n<\u4e2d\u7565>\n ---> ceb56b38b813\nRemoving intermediate container 388a4b7cd2be\nSuccessfully built ceb56b38b813\n\n\nBluemix\u4e0a\u306e \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u767b\u9332\n\u30d7\u30e9\u30da\u30fc\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u5fc5\u8981\u306a\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u53d6\u5f97\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode# cf ic namespace get\ntakara_node\n\n\u53d6\u5f97\u3057\u305fnamespace\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u3001\u30d7\u30e9\u30a4\u30da\u30fc\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306e\u30bf\u30b0\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002mynode:node1 \u306f\u3001\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u305d\u3057\u3066\u3001registry.ng.bluemix.net/takara_node \u304c\u30d7\u30e9\u30a4\u30da\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u540d\u524d\u3067\u3059\u3002 \u305d\u3057\u3066\u3001mynode \u306f\u3001\u683c\u7d0d\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u540d\u524d\u3067\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode# docker tag mynode:node1 registry.ng.bluemix.net/takara_node/mynode\n\n\u6b21\u306b\u3001\u30bf\u30b0\u3092\u3064\u3051\u305f\u30a4\u30e1\u30fc\u30b8\u3092 Bluemix \u306e\u30d7\u30e9\u30da\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ee2\u9001(push)\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode# docker push registry.ng.bluemix.net/takara_node/mynode\nThe push refers to a repository [registry.ng.bluemix.net/takara_node/mynode]\ndac89f73e68d: Pushed \n<\u4e2d\u7565>\nb257bb4b4aea: Pushed \nlatest: digest: sha256:8b28d9c2d757011272919ee3acb52747f6a220271a878c67f7549396572f3f65 size: 2621\n\n\u672c\u5f53\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u683c\u7d0d\u3055\u308c\u305f\u306e\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u69d8\u306btakara_node\u306b\u76f8\u5f53\u3059\u308b\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u542b\u3080\u30a8\u30f3\u30c8\u30ea\u30fc\u304c\u3042\u308c\u3070\u767b\u9332\u5b8c\u4e86\u3067\u3059\u3002\nroot@ubuntu-xenial:~/ibmnode/hellonode# cf ic images\nREPOSITORY                                    TAG                 IMAGE ID            CREATED             SIZE\n<\u4e2d\u7565>\nregistry.ng.bluemix.net/takara_node/mynode    latest              ceb56b38b813        7 minutes ago       197.4 MB\n\n\nBluemix \u4e0a\u3067 \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\n\u3053\u3053\u304b\u3089\u306e\u52d5\u4f5c\u306f\u3001\u3059\u3079\u3066Bluemix \u306e\u30dd\u30fc\u30bf\u30eb\u753b\u9762\u304b\u3089\u3067\u3082\u540c\u3058\u64cd\u4f5c\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002  \u5f8c\u306f\u666e\u901a\u306e IBM Container \u306e\u8d77\u52d5\u65b9\u6cd5\u3068\u540c\u3058\u3067\u3059\u304c\u3001\u81ea\u5206\u306e\u5fd8\u5099\u9332\u3092\u517c\u306d\u3066\u3044\u308b\u306e\u3067\u3001\u8a18\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002 \u3053\u306e\u30dd\u30a4\u30f3\u30c8\u306f\u3001-p 3000 \u306e\u90e8\u5206\u3067 Dockerfile\u306b\u8a18\u8f09\u3057\u305fPORT\u756a\u53f7\u4ee5\u5916\u306e\u3082\u306e\u304c\u6307\u5b9a\u3067\u304d\u306a\u3044\u5236\u7d04\u304c\u3042\u308a\u307e\u3059\u3002\u3000\u307e\u305f\u3001-p \u3092\u4ed8\u4e0e\u3057\u306a\u3051\u308c\u3070\u3001\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\nroot@ubuntu-xenial:~# cf ic run -p 3000 --name mynode1 registry.ng.bluemix.net/takara_node/mynode:latest\n77a95056-3f21-4de1-8f32-75a3a03714c1\n\n\u8d77\u52d5\u5f8c\u306e\u78ba\u8a8d\u306f\u3001ps \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u307e\u3059\u3002 ps \u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u306a\u3051\u308c\u3070\u52d5\u4f5c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3060\u3051\u304c\u8868\u793a\u3055\u308c\u3001-a \u3092\u4ed8\u3051\u308b\u3068 \u505c\u6b62\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3082\u8868\u793a\u3055\u308c\u307e\u3059\u3002\nroot@ubuntu-xenial:~# cf ic ps\nCONTAINER ID        IMAGE                                               COMMAND             CREATED             STATUS                 PORTS               NAMES\n77a95056-3f2        registry.ng.bluemix.net/takara_node/mynode:latest   \"\"                  10 seconds ago      Running a second ago   3000/tcp            mynode1\n\n\u3053\u306e\u307e\u307e\u3067\u306f\u3001\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u53d6\u5f97\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u3078\u30d0\u30a4\u30f3\u30c9\u3057\u307e\u3059\u3002 \nroot@ubuntu-xenial:~# cf ic ip request\nOK\nThe IP address \"169.46.21.24\" was obtained.\n\n\u4e0a\u3067\u53d6\u5f97\u3057\u305f \u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u307e\u3059\u3002\nroot@ubuntu-xenial:~# cf ic ip bind 169.46.21.24 mynode1\nOK\nThe IP address was bound successfully.\n\n\u3053\u308c\u3067\u5916\u90e8\u304b\u3089\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u30a2\u30d7\u30ea\u3092\u547c\u3073\u51fa\u308b\u69d8\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nimac:~ maho$ curl http://169.46.21.24:3000\nHello World!\n\n\n\u53c2\u8003\u8cc7\u6599\nhttps://console.ng.bluemix.net/docs/containers/container_cli_reference_cfic.html#container_cli_reference_cfic__namespace\n# \u6982\u8981\n[Bluemix \u7528 ibmnode \u30a4\u30e1\u30fc\u30b8\u5165\u9580](https://console.ng.bluemix.net/docs/images/docker_image_ibmnode/ibmnode_starter.html) \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3060\u3060\u3051\u3067\u306f\u3001\u51fa\u6765\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u8abf\u3079\u305f\u4e8b\u3092\u542b\u3081\u3066\u3001\u30ab\u30b9\u30bf\u30e0\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3059\u308b\u307e\u3067\u3092\u78ba\u8a8d\u3057\u305f\u8a18\u9332\u3067\u3059\u3002\n\n\n# \u30b3\u30f3\u30c6\u30ca\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\nIBM Container \u3092\u4f5c\u6210\u3059\u308b\u5143\u306b\u306a\u308b\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u898b\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002 \u6700\u521d\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u3057\u3066\u3001\u3053\u306e\u30ea\u30b9\u30c8\u306b\u30ab\u30b9\u30bf\u30e0\u30fb\u30a4\u30e1\u30fc\u30b8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode# cf ic images\nREPOSITORY                                    TAG                 IMAGE ID            CREATED             SIZE\nregistry.ng.bluemix.net/ibm_wa_agent          latest              42090290077d        11 weeks ago        418.8 MB\nregistry.ng.bluemix.net/ibm-backup-restore    latest              4b84e2510ebe        2 weeks ago         205.4 MB\nregistry.ng.bluemix.net/ibm-integration-bus   latest              d8b7c6d7c9bc        10 days ago         681 MB\nregistry.ng.bluemix.net/ibm-node-strong-pm    latest              e63d1d2a3244        2 weeks ago         264.1 MB\nregistry.ng.bluemix.net/ibmliberty            javaee7             190892c21ed5        12 weeks ago        313.5 MB\nregistry.ng.bluemix.net/ibmliberty            latest              190892c21ed5        12 weeks ago        313.5 MB\nregistry.ng.bluemix.net/ibmliberty            microProfile        3b74ce22b3ac        12 weeks ago        237.9 MB\nregistry.ng.bluemix.net/ibmliberty            webProfile6         2546c4b2a22f        12 weeks ago        266.9 MB\nregistry.ng.bluemix.net/ibmliberty            webProfile7         d06fb99cd165        12 weeks ago        276.2 MB\nregistry.ng.bluemix.net/ibmnode               latest              337f3f2a2e8f        2 weeks ago         197.1 MB\nregistry.ng.bluemix.net/ibmnode               v4                  337f3f2a2e8f        2 weeks ago         197.1 MB\nregistry.ng.bluemix.net/ibmnode               v1.1                e5776452ee8f        2 weeks ago         186.6 MB\nregistry.ng.bluemix.net/ibmnode               v1.2                8a5cfcc8251c        2 weeks ago         192.8 MB\n~~~\n\n# \u30ab\u30b9\u30bf\u30e0\u30fb\u30b3\u30f3\u30c6\u30ca\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u308a\u65b9\n[Bluemix \u7528 ibmnode \u30a4\u30e1\u30fc\u30b8\u5165\u9580](https://console.ng.bluemix.net/docs/images/docker_image_ibmnode/ibmnode_starter.html) \u306e\u8a18\u4e8b\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306e [hellonode.zip](ftp://public.dhe.ibm.com/cloud/bluemix/containers/hellonode.zip) \u3092\u5229\u7528\u3057\u3066\u30ab\u30b9\u30bf\u30e0\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\n## \u4e8b\u524d\u6e96\u5099\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~# wget ftp://public.dhe.ibm.com/cloud/bluemix/containers/hellonode.zip\n~~~\n\u6b21\u306b\u3001unzip\u3067\u5c55\u958b\u3057\u307e\u3059\u3002\u3082\u3057unzip \u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070 apt-get install unzip \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~# unzip hellonode.zip \nArchive:  hellonode.zip\n   creating: hellonode/app/\n  inflating: hellonode/app/app.js    \n  inflating: hellonode/Dockerfile   \n~~~\n\n\n[hellonode.zip](ftp://public.dhe.ibm.com/cloud/bluemix/containers/hellonode.zip) \u3092\u5c55\u958b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode# ls -al\ntotal 16\ndrwxr-xr-x 3 root   root   4096 Dec 14 07:34 .\ndrwxrwxr-x 3 ubuntu ubuntu 4096 Dec 14 07:34 ..\ndrwxr-xr-x 3 root   root   4096 Dec 14 07:56 app\n-rw-r--r-- 1 root   root    146 Jan 14  2016 Dockerfile\n~~~\n\n## \u30ab\u30b9\u30bf\u30e0\u30fb\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210\n\n\u3053\u3053\u304b\u3089\u3001\u30ab\u30b9\u30bf\u30e0\u30b3\u30f3\u30c6\u30ca\u306b\u3001\u8a70\u3081\u8fbc\u3080\u30d5\u30a1\u30a4\u30eb\u306e\u30bb\u30c3\u30c8\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u6700\u521d\u306b\u3001\u3053\u306eNode.js\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u306e\u521d\u671f\u5316\u3092\u884c\u3044\u307e\u3059\u3002\u5c55\u958b\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u306e app \u306b\u79fb\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3067\u3082\u826f\u3044\u306e\u3067 Enter \u3092\u62bc\u3057\u3066\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode/app# npm init\nThis utility will walk you through creating a package.json file.\nIt only covers the most common items, and tries to guess sensible defaults.\n\nSee `npm help json` for definitive documentation on these fields\nand exactly what they do.\n\nUse `npm install <pkg> --save` afterwards to install a package and\nsave it as a dependency in the package.json file.\n\nPress ^C at any time to quit.\nname: (app) \nversion: (1.0.0) \ndescription: \ngit repository: \nkeywords: \nauthor: \nlicense: (ISC) \nAbout to write to /home/ubuntu/ibmnode/hellonode/app/package.json:\n\n{\n  \"name\": \"app\",\n  \"version\": \"1.0.0\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"express\": \"^4.14.0\"\n  },\n  \"devDependencies\": {},\n  \"description\": \"\"\n}\n\n\nIs this ok? (yes) yes\n~~~\n\u6b21\u306bNode.js\u3067\u958b\u767a\u3055\u308c\u305f Web\u30a2\u30d7\u30ea\u3092\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af Express \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode/app# npm install express -save\napp@1.0.0 /home/ubuntu/ibmnode/hellonode/app\n\u2514\u2500\u252c express@4.14.0 \n  \u251c\u2500\u252c accepts@1.3.3 \n  \u2502 \u251c\u2500\u252c mime-types@2.1.13 \n  \u2502 \u2502 \u2514\u2500\u2500 mime-db@1.25.0 \n  \u2502 \u2514\u2500\u2500 negotiator@0.6.1 \n<\u4ee5\u4e0b\u7701\u7565>\n~~~\n\u3053\u306e\u4e2d\u3067\u3001node_modules \u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u30fc\u306b express \u3084 \u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u53ce\u3081\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode/app# ls -al\ntotal 20\ndrwxr-xr-x  3 root root 4096 Dec 15 01:03 .\ndrwxr-xr-x  3 root root 4096 Dec 14 07:34 ..\n-rw-r--r--  1 root root  229 Jan 14  2016 app.js\ndrwxr-xr-x 45 root root 4096 Dec 15 01:03 node_modules\n-rw-r--r--  1 root root  272 Dec 15 01:03 package.json\n~~~\n\n\u3053\u3053\u304b\u3089\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210\u306b docker \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u74b0\u5883\u306b\u3001docker \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 Ubuntu \u3067\u3042\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\n~~~\n# apt-get install docker.io\n~~~\n\ndocker \u30b3\u30de\u30f3\u30c9\u304c\u52d5\u4f5c\u3059\u308b\u69d8\u306b\u306a\u308c\u3070\u3001\u65e9\u901f\u3001\u81ea\u5206\u306ePC\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067\u3001Docker \u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 Dockerfile \u306e\u3042\u308b\u5834\u6240\u3067\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode# docker build -t mynode:node1 .\nSending build context to Docker daemon 1.264 MB\nStep 1 : FROM registry.ng.bluemix.net/ibmnode\nlatest: Pulling from ibmnode\nba76e97bb96c: Already exists \n<\u4e2d\u7565>\n ---> ceb56b38b813\nRemoving intermediate container 388a4b7cd2be\nSuccessfully built ceb56b38b813\n~~~\n\n## Bluemix\u4e0a\u306e \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u767b\u9332\n\n\u30d7\u30e9\u30da\u30fc\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u5fc5\u8981\u306a\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode# cf ic namespace get\ntakara_node\n~~~\n\n\u53d6\u5f97\u3057\u305fnamespace\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u3001\u30d7\u30e9\u30a4\u30da\u30fc\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306e\u30bf\u30b0\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002mynode:node1 \u306f\u3001\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u305d\u3057\u3066\u3001registry.ng.bluemix.net/takara_node \u304c\u30d7\u30e9\u30a4\u30da\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u540d\u524d\u3067\u3059\u3002 \u305d\u3057\u3066\u3001mynode \u306f\u3001\u683c\u7d0d\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u540d\u524d\u3067\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode# docker tag mynode:node1 registry.ng.bluemix.net/takara_node/mynode\n~~~\n\u6b21\u306b\u3001\u30bf\u30b0\u3092\u3064\u3051\u305f\u30a4\u30e1\u30fc\u30b8\u3092 Bluemix \u306e\u30d7\u30e9\u30da\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ee2\u9001(push)\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode# docker push registry.ng.bluemix.net/takara_node/mynode\nThe push refers to a repository [registry.ng.bluemix.net/takara_node/mynode]\ndac89f73e68d: Pushed \n<\u4e2d\u7565>\nb257bb4b4aea: Pushed \nlatest: digest: sha256:8b28d9c2d757011272919ee3acb52747f6a220271a878c67f7549396572f3f65 size: 2621\n~~~\n\u672c\u5f53\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u683c\u7d0d\u3055\u308c\u305f\u306e\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u69d8\u306btakara_node\u306b\u76f8\u5f53\u3059\u308b\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u542b\u3080\u30a8\u30f3\u30c8\u30ea\u30fc\u304c\u3042\u308c\u3070\u767b\u9332\u5b8c\u4e86\u3067\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~/ibmnode/hellonode# cf ic images\nREPOSITORY                                    TAG                 IMAGE ID            CREATED             SIZE\n<\u4e2d\u7565>\nregistry.ng.bluemix.net/takara_node/mynode    latest              ceb56b38b813        7 minutes ago       197.4 MB\n~~~\n\n## Bluemix \u4e0a\u3067 \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\n\u3053\u3053\u304b\u3089\u306e\u52d5\u4f5c\u306f\u3001\u3059\u3079\u3066Bluemix \u306e\u30dd\u30fc\u30bf\u30eb\u753b\u9762\u304b\u3089\u3067\u3082\u540c\u3058\u64cd\u4f5c\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002  \u5f8c\u306f\u666e\u901a\u306e IBM Container \u306e\u8d77\u52d5\u65b9\u6cd5\u3068\u540c\u3058\u3067\u3059\u304c\u3001\u81ea\u5206\u306e\u5fd8\u5099\u9332\u3092\u517c\u306d\u3066\u3044\u308b\u306e\u3067\u3001\u8a18\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002 \u3053\u306e\u30dd\u30a4\u30f3\u30c8\u306f\u3001-p 3000 \u306e\u90e8\u5206\u3067 Dockerfile\u306b\u8a18\u8f09\u3057\u305fPORT\u756a\u53f7\u4ee5\u5916\u306e\u3082\u306e\u304c\u6307\u5b9a\u3067\u304d\u306a\u3044\u5236\u7d04\u304c\u3042\u308a\u307e\u3059\u3002\u3000\u307e\u305f\u3001-p \u3092\u4ed8\u4e0e\u3057\u306a\u3051\u308c\u3070\u3001\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\n\n~~~\nroot@ubuntu-xenial:~# cf ic run -p 3000 --name mynode1 registry.ng.bluemix.net/takara_node/mynode:latest\n77a95056-3f21-4de1-8f32-75a3a03714c1\n~~~\n\u8d77\u52d5\u5f8c\u306e\u78ba\u8a8d\u306f\u3001ps \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u307e\u3059\u3002 ps \u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u306a\u3051\u308c\u3070\u52d5\u4f5c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3060\u3051\u304c\u8868\u793a\u3055\u308c\u3001-a \u3092\u4ed8\u3051\u308b\u3068 \u505c\u6b62\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3082\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~# cf ic ps\nCONTAINER ID        IMAGE                                               COMMAND             CREATED             STATUS                 PORTS               NAMES\n77a95056-3f2        registry.ng.bluemix.net/takara_node/mynode:latest   \"\"                  10 seconds ago      Running a second ago   3000/tcp            mynode1\n~~~\n\n\u3053\u306e\u307e\u307e\u3067\u306f\u3001\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u53d6\u5f97\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u3078\u30d0\u30a4\u30f3\u30c9\u3057\u307e\u3059\u3002 \n\n~~~\nroot@ubuntu-xenial:~# cf ic ip request\nOK\nThe IP address \"169.46.21.24\" was obtained.\n~~~\n\u4e0a\u3067\u53d6\u5f97\u3057\u305f \u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u307e\u3059\u3002\n\n~~~\nroot@ubuntu-xenial:~# cf ic ip bind 169.46.21.24 mynode1\nOK\nThe IP address was bound successfully.\n~~~\n\u3053\u308c\u3067\u5916\u90e8\u304b\u3089\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u30a2\u30d7\u30ea\u3092\u547c\u3073\u51fa\u308b\u69d8\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n~~~\nimac:~ maho$ curl http://169.46.21.24:3000\nHello World!\n~~~\n\n\n\n# \u53c2\u8003\u8cc7\u6599\nhttps://console.ng.bluemix.net/docs/containers/container_cli_reference_cfic.html#container_cli_reference_cfic__namespace\n\n\n", "tags": ["iBM", "container", "docker", "CF"]}