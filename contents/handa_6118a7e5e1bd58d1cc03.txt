{"context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306fRICOH THETA Advent Calendar 2015 21\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\nMESH\u3092\u4f7f\u3063\u3066Theta\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u30ea\u30e2\u30fc\u30c8\u3067\u5207\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001THETA API v2 \u3092\u5229\u7528\u3059\u308b\u305f\u3081\u73fe\u5728\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u6a5f\u7a2e\u306fTheta S\u306e\u307f\u3068\u306a\u308a\u307e\u3059\u3002\n\nMESH\u3063\u3066\uff1f\n\u3053\u308c https://meshprj.com/\nBluetooth\u3067iOS\u30c7\u30d0\u30a4\u30b9\u3068\u30da\u30a2\u30ea\u30f3\u30b0\u3057\u3066\u4f7f\u3048\u308b\u30ef\u30a4\u30e4\u30ec\u30b9\u96fb\u5b50\u30d6\u30ed\u30c3\u30af\u7684\u306a\u3082\u306e\u3067\u3059\u3002\n\nMove\uff08\u52d5\u304d\uff09\u30bf\u30b0\u3001Button\uff08\u30dc\u30bf\u30f3\uff09\u30bf\u30b0\u7b49\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30bf\u30b0\u3068\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30ec\u30b7\u30d4\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u5148\u65e5SDK\uff08\u30d9\u30fc\u30bf\u7248\uff09\u304c\u516c\u958b\u3055\u308c\u3001js\u30d9\u30fc\u30b9\u3067\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u306e\u958b\u767a\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001\u30aa\u30f3\u30e9\u30a4\u30f3\u958b\u767a\u74b0\u5883\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3001\u81ea\u5206\u306e\u7aef\u672b\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001iPhone\u7248\u306e\u30a2\u30d7\u30ea\u3082\u63d0\u4f9b\u3055\u308c\u305f\u306e\u3067\u3001iPad\u304c\u306a\u304f\u3066\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u3001\u3088\u308a\u624b\u8efd\u306b\u904a\u3079\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u306e\u958b\u767a\u624b\u9806\u7b49\u306f\u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u306a\u3069\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nhttps://meshprj.com/sdk/doc/ja/ \uff08\u8981MESH Developer\u30a2\u30ab\u30a6\u30f3\u30c8\uff09\nhttp://qiita.com/masato/items/159a35c5ce741b6f1058\n\nTheta S\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\n\u4e0a\u8a18\u306eMESH SDK\u3068\u958b\u767a\u74b0\u5883\u3092\u5229\u7528\u3057\u3066\u3001MESH\u306e\u30ec\u30b7\u30d4\u4e0a\u304b\u3089Theta S\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308c\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u30dc\u30bf\u30f3\u30bf\u30b0\u7b49\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u3001\u30ea\u30e2\u30fc\u30c8\u30b7\u30e3\u30c3\u30bf\u30fc\u304c\u5207\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059(initialize\u3001execute\u306e\u307f\u8a18\u8f09)\u3002\n\u3053\u306e\u307b\u304b\u5165\u529b\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3059\u308b\u305f\u3081\u3001input connector\u3092\u4e00\u3064\u4ee5\u4e0a\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\ninitialize.js\nreturn {\n    runtimeValues : { sessionId: \"\" }\n}\n\n\n\nexecute.js\n//Theta Endpoint URL \u306e\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f192.168.1.1\uff09\nvar endPointURL = \"http://192.168.1.1\"\n\nvar startSessionJSONData = {\n    name: \"camera.startSession\"\n} \n\najax( {\n    url : endPointURL + \"/osc/commands/execute\",\n    type : \"post\",\n    data : JSON.stringify( startSessionJSONData),\n    contentType: \"application/json\",\n    dataType: \"json\",\n    timeout : 5000,\n    success : function (contents) {\n        //\u53d6\u5f97\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092runtimeValues\u306b\u4fdd\u7ba1\n        runtimeValues.sessionId = contents.results.sessionId;\n        log(\"Theta session started: \" + runtimeValues.sessionId);\n\n        //CaptureMode\u306e\u30c1\u30a7\u30c3\u30af\n        checkCaptureMode(endPointURL);\n\n        //\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\n        takeThetaPicture(endPointURL);\n\n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30af\u30ed\u30fc\u30ba\n        closeThetaSession(endPointURL);\n        callbackSuccess( {\n                    resultType : \"continue\",     \n                    runtimeValues : runtimeValues\n        });\n    },\n    error : function (XMLHttpRequest, textStatus, errorThrown) {\n        log(XMLHttpRequest + \" | \" + textStatus + \" | \" + errorThrown);     \n        callbackSuccess({\n            resultType: \"continue\"\n        });\n    }\n});\n\nfunction checkCaptureMode(endPointURL) {\n    var getOptionsJSONData = {\n        name: \"camera.getOptions\",\n        parameters: {\n            sessionId: runtimeValues.sessionId,\n            optionNames: [\"captureMode\"]\n        }\n    } \n\n    ajax( {\n        url : endPointURL + \"/osc/commands/execute\",\n        type : \"post\",\n        data : JSON.stringify( getOptionsJSONData),\n        contentType: \"application/json\",\n        dataType: \"json\",\n        timeout : 5000,\n        success : function (contents) {\n            log(\"CaptureMode: \" + JSON.stringify(contents.results.options.captureMode));\n            if(contents.results.options.captureMode != \"image\"){\n                log(\"Please change capture mode to take photo\");\n                callbackSuccess({\n                    resultType: \"stop\"\n                });\n            };  \n            callbackSuccess( {\n                    resultType : \"continue\"\n            });\n        },\n        error : function (XMLHttpRequest, textStatus, errorThrown) {\n            log(\"Error:\" + textStatus + \" \" + errorThrown);     \n            callbackSuccess({\n                resultType: \"continue\"\n            });\n        }\n    } );\n}\n\nfunction takeThetaPicture(endPointURL) {\n    var takePictureJSONData = {\n        name: \"camera.takePicture\",\n        parameters: {\n            sessionId: runtimeValues.sessionId\n        }\n    } \n\n    ajax( {\n        url : endPointURL + \"/osc/commands/execute\",\n        type : \"post\",\n        data : JSON.stringify( takePictureJSONData),\n        contentType: \"application/json\",\n        dataType: \"json\",\n        timeout : 5000,\n        success : function (contents) {\n                log(\"Took picture\");\n        },\n        error : function (XMLHttpRequest, textStatus, errorThrown) {\n            log(\"Error:\" + textStatus + \" \" + errorThrown);     \n            callbackSuccess({\n                resultType: \"continue\"\n            });\n        }\n    } );\n}\n\nfunction closeThetaSession(endPointURL) {\n    var closeSessionJSONData = {\n        name: \"camera.closeSession\",\n        parameters: {\n            sessionId: runtimeValues.sessionId\n        }\n    } \n\n    ajax( {\n        url : endPointURL + \"/osc/commands/execute\",\n        type : \"post\",\n        data : JSON.stringify( closeSessionJSONData),\n        contentType: \"application/json\",\n        dataType: \"json\",\n        timeout : 5000,\n        success : function (contents) {\n            log(\"Theta session closed: \" + runtimeValues.sessionId);\n            },\n        error : function (XMLHttpRequest, textStatus, errorThrown) {\n            log(\"Error:\" + textStatus + \" \" + errorThrown);     \n            callbackSuccess({\n                resultType: \"continue\"\n            });\n        }\n    } );\n}\n\nreturn {\n    resultType : \"continue\"\n};\n\n\n\u3061\u306a\u307f\u306bMESH\u306eexport\u6a5f\u80fd\u3067\u53d6\u308a\u51fa\u3057\u305f\u3082\u306e\u306f\u4e0b\u8a18\u3002\n\u3053\u308c\u3092\u76f4\u63a5import\u3057\u3066\u3082\u4f7f\u3048\u308b\u306f\u305a\u3067\u3059\u3002\n{\"formatVersion\":\"1.0\",\"tagData\":{\"name\":\"ControlThetaS\",\"icon\":\"data:image/png;base64,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\",\"description\":\"This software tag enables mesh to control Ricoh Theta S camera, such as taking pictures \",\"functions\":[{\"id\":\"function_0\",\"name\":\"TakePicture\",\"connector\":{\"inputs\":[],\"outputs\":[]},\"properties\":[],\"extension\":{\"initialize\":\"return {\\n\\truntimeValues : { sessionId: \\\"\\\" }\\n}\",\"receive\":\"\",\"execute\":\"//Theta Endpoint URL \u306e\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f192.168.1.1\uff09\\nvar endPointURL = \\\"http://192.168.1.1\\\"\\n\\nvar startSessionJSONData = {\\n\\tname: \\\"camera.startSession\\\"\\n} \\n\\najax( {\\n\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\ttype : \\\"post\\\",\\n\\tdata : JSON.stringify( startSessionJSONData),\\n\\tcontentType: \\\"application/json\\\",\\n\\tdataType: \\\"json\\\",\\n\\ttimeout : 5000,\\n\\tsuccess : function (contents) {\\n\\t\\truntimeValues.sessionId = contents.results.sessionId;\\n\\t\\tlog(\\\"Theta session started: \\\" + runtimeValues.sessionId);\\n\\t\\tcheckCaptureMode(endPointURL);\\n\\t\\ttakeThetaPicture(endPointURL);\\n\\t\\tcloseThetaSession(endPointURL);\\n\\t\\tcallbackSuccess( {\\n\\t\\t\\t\\t\\tresultType : \\\"continue\\\",     \\n\\t\\t\\t\\t\\truntimeValues : runtimeValues\\n\\t\\t});\\n\\t},\\n\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\tlog(XMLHttpRequest + \\\" | \\\" + textStatus + \\\" | \\\" + errorThrown);\\t\\t\\n\\t\\tcallbackSuccess({\\n\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t});\\n\\t}\\n});\\n\\n//Theta s\u306e\u64ae\u5f71\u30e2\u30fc\u30c9\u304cimage\u30e2\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\\nfunction checkCaptureMode(endPointURL) {\\n\\tvar getOptionsJSONData = {\\n\\t\\tname: \\\"camera.getOptions\\\",\\n\\t\\tparameters: {\\n\\t\\t\\tsessionId: runtimeValues.sessionId,\\n\\t\\t\\toptionNames: [\\\"captureMode\\\"]\\n\\t\\t}\\n\\t} \\n\\t\\n\\tajax( {\\n\\t\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\t\\ttype : \\\"post\\\",\\n\\t\\tdata : JSON.stringify( getOptionsJSONData),\\n\\t\\tcontentType: \\\"application/json\\\",\\n\\t\\tdataType: \\\"json\\\",\\n\\t\\ttimeout : 5000,\\n\\t\\tsuccess : function (contents) {\\n\\t\\t\\tlog(\\\"CaptureMode: \\\" + JSON.stringify(contents.results.options.captureMode));\\n\\t\\t\\tif(contents.results.options.captureMode != \\\"image\\\"){\\n\\t\\t\\t\\tlog(\\\"Please change capture mode to take photo\\\");\\n\\t\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\t\\tresultType: \\\"stop\\\"\\n\\t\\t\\t\\t});\\n\\t\\t\\t};\\t\\n\\t\\t\\tcallbackSuccess( {\\n\\t\\t\\t\\t\\tresultType : \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\t\\tlog(\\\"Error:\\\" + textStatus + \\\" \\\" + errorThrown);\\t\\t\\n\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t}\\n\\t} );\\n}\\n\\n//Theta \u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\\nfunction takeThetaPicture(endPointURL) {\\n\\tvar takePictureJSONData = {\\n\\t\\tname: \\\"camera.takePicture\\\",\\n\\t\\tparameters: {\\n\\t\\t\\tsessionId: runtimeValues.sessionId\\n\\t\\t}\\n\\t} \\n\\n\\tajax( {\\n\\t\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\t\\ttype : \\\"post\\\",\\n\\t\\tdata : JSON.stringify( takePictureJSONData),\\n\\t\\tcontentType: \\\"application/json\\\",\\n\\t\\tdataType: \\\"json\\\",\\n\\t\\ttimeout : 5000,\\n\\t\\tsuccess : function (contents) {\\n\\t\\t\\t\\tlog(\\\"Took picture\\\");\\n\\t\\t},\\n\\t\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\t\\tlog(\\\"Error:\\\" + textStatus + \\\" \\\" + errorThrown);\\t\\t\\n\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t}\\n\\t} );\\n}\\n\\n//\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u30af\u30ed\u30fc\u30ba\u3059\u308b\\nfunction closeThetaSession(endPointURL) {\\n\\tvar closeSessionJSONData = {\\n\\t\\tname: \\\"camera.closeSession\\\",\\n\\t\\tparameters: {\\n\\t\\t\\tsessionId: runtimeValues.sessionId\\n\\t\\t}\\n\\t} \\n\\n\\tajax( {\\n\\t\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\t\\ttype : \\\"post\\\",\\n\\t\\tdata : JSON.stringify( closeSessionJSONData),\\n\\t\\tcontentType: \\\"application/json\\\",\\n\\t\\tdataType: \\\"json\\\",\\n\\t\\ttimeout : 5000,\\n\\t\\tsuccess : function (contents) {\\n\\t\\t\\tlog(\\\"Theta session closed: \\\" + runtimeValues.sessionId);\\n\\t\\t\\t},\\n\\t\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\t\\tlog(\\\"Error:\\\" + textStatus + \\\" \\\" + errorThrown);\\t\\t\\n\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t}\\n\\t} );\\n}\\n\\nreturn {\\n\\tresultType : \\\"continue\\\"\\n};\",\"result\":\"\"}}]}}\n\n\n\u5229\u7528\u4f8b\n\u30dc\u30bf\u30f3\u30bf\u30b0\u3068\u7d44\u307f\u5408\u308f\u305b\u305f\u30ec\u30b7\u30d4\u4f8b\u3002\u3053\u306e\u72b6\u614b\u3067\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068Theta\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u304c\u5207\u3089\u308c\u307e\u3059\u3002\n\n\n\u8ffd\u52a0\u3067\u3084\u308a\u305f\u3044\u3053\u3068\u306a\u3069\n\n\u4ee5\u4e0b\u306eAdvent Calendar\u306e\u8a18\u4e8b\u3067\u30b7\u30e3\u30c3\u30bf\u30fc\u97f3\u3092\u6d88\u3059\u65b9\u6cd5\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3067\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044 http://hima-zinn.hatenablog.com/entry/2015/12/13/000000\n\u52d5\u753b\u64ae\u5f71\u7528\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3082\u4f5c\u308a\u305f\u3044\n\n\n\u307e\u3068\u3081\nTHETA API v2\u306fREST API\u3067\u89e6\u308c\u308b\u306e\u3067\u6577\u5c45\u304c\u4f4e\u304f\u3001\u3068\u3063\u3064\u304d\u3084\u3059\u304b\u3063\u305f\u3067\u3059\u3002\n\u306a\u304a\u3001\u672c\u984c\u3068\u306f\u305a\u308c\u307e\u3059\u304cAPI\u306e\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\u306fElasticsearch\u7528\u306eChrome\u30d7\u30e9\u30b0\u30a4\u30f3Sense\u3092\u5229\u7528\u3059\u308b\u3068\u3068\u3066\u3082\u4fbf\u5229\u3067\u3057\u305f\u3002\n\n\n\u3053\u306e\u8a18\u4e8b\u306f[RICOH THETA Advent Calendar 2015](http://qiita.com/advent-calendar/2015/theta) 21\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\nMESH\u3092\u4f7f\u3063\u3066Theta\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u30ea\u30e2\u30fc\u30c8\u3067\u5207\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001THETA API v2 \u3092\u5229\u7528\u3059\u308b\u305f\u3081\u73fe\u5728\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u6a5f\u7a2e\u306fTheta S\u306e\u307f\u3068\u306a\u308a\u307e\u3059\u3002\n\n##MESH\u3063\u3066\uff1f\n\u3053\u308c https://meshprj.com/\nBluetooth\u3067iOS\u30c7\u30d0\u30a4\u30b9\u3068\u30da\u30a2\u30ea\u30f3\u30b0\u3057\u3066\u4f7f\u3048\u308b\u30ef\u30a4\u30e4\u30ec\u30b9\u96fb\u5b50\u30d6\u30ed\u30c3\u30af\u7684\u306a\u3082\u306e\u3067\u3059\u3002\n![MESH](https://first-flight.sony.com/images/pj/mesh/productDetail/3_bnr_tag.jpg)\n\nMove\uff08\u52d5\u304d\uff09\u30bf\u30b0\u3001Button\uff08\u30dc\u30bf\u30f3\uff09\u30bf\u30b0\u7b49\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30bf\u30b0\u3068\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30ec\u30b7\u30d4\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n![Recipe](https://first-flight.sony.com/images/pj/mesh/productDetail/whatmesh-app.png)\n\u5148\u65e5SDK\uff08\u30d9\u30fc\u30bf\u7248\uff09\u304c\u516c\u958b\u3055\u308c\u3001js\u30d9\u30fc\u30b9\u3067\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u306e\u958b\u767a\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001\u30aa\u30f3\u30e9\u30a4\u30f3\u958b\u767a\u74b0\u5883\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3001\u81ea\u5206\u306e\u7aef\u672b\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001iPhone\u7248\u306e\u30a2\u30d7\u30ea\u3082\u63d0\u4f9b\u3055\u308c\u305f\u306e\u3067\u3001iPad\u304c\u306a\u304f\u3066\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u3001\u3088\u308a\u624b\u8efd\u306b\u904a\u3079\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u306e\u958b\u767a\u624b\u9806\u7b49\u306f\u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u306a\u3069\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nhttps://meshprj.com/sdk/doc/ja/ \uff08\u8981MESH Developer\u30a2\u30ab\u30a6\u30f3\u30c8\uff09\nhttp://qiita.com/masato/items/159a35c5ce741b6f1058\n\n##Theta S\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\n\u4e0a\u8a18\u306eMESH SDK\u3068\u958b\u767a\u74b0\u5883\u3092\u5229\u7528\u3057\u3066\u3001MESH\u306e\u30ec\u30b7\u30d4\u4e0a\u304b\u3089Theta S\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308c\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u30dc\u30bf\u30f3\u30bf\u30b0\u7b49\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u3001\u30ea\u30e2\u30fc\u30c8\u30b7\u30e3\u30c3\u30bf\u30fc\u304c\u5207\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059(initialize\u3001execute\u306e\u307f\u8a18\u8f09)\u3002\n\u3053\u306e\u307b\u304b\u5165\u529b\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3059\u308b\u305f\u3081\u3001input connector\u3092\u4e00\u3064\u4ee5\u4e0a\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```initialize.js\nreturn {\n\truntimeValues : { sessionId: \"\" }\n}\n```\n\n```execute.js\n//Theta Endpoint URL \u306e\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f192.168.1.1\uff09\nvar endPointURL = \"http://192.168.1.1\"\n\nvar startSessionJSONData = {\n\tname: \"camera.startSession\"\n} \n\najax( {\n\turl : endPointURL + \"/osc/commands/execute\",\n\ttype : \"post\",\n\tdata : JSON.stringify( startSessionJSONData),\n\tcontentType: \"application/json\",\n\tdataType: \"json\",\n\ttimeout : 5000,\n\tsuccess : function (contents) {\n\t\t//\u53d6\u5f97\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092runtimeValues\u306b\u4fdd\u7ba1\n\t\truntimeValues.sessionId = contents.results.sessionId;\n\t\tlog(\"Theta session started: \" + runtimeValues.sessionId);\n\t\t\n\t\t//CaptureMode\u306e\u30c1\u30a7\u30c3\u30af\n\t\tcheckCaptureMode(endPointURL);\n\t\t\n\t\t//\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\n\t\ttakeThetaPicture(endPointURL);\n\t\t\n\t\t//\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30af\u30ed\u30fc\u30ba\n\t\tcloseThetaSession(endPointURL);\n\t\tcallbackSuccess( {\n\t\t\t\t\tresultType : \"continue\",     \n\t\t\t\t\truntimeValues : runtimeValues\n\t\t});\n\t},\n\terror : function (XMLHttpRequest, textStatus, errorThrown) {\n\t\tlog(XMLHttpRequest + \" | \" + textStatus + \" | \" + errorThrown);\t\t\n\t\tcallbackSuccess({\n\t\t\tresultType: \"continue\"\n\t\t});\n\t}\n});\n\nfunction checkCaptureMode(endPointURL) {\n\tvar getOptionsJSONData = {\n\t\tname: \"camera.getOptions\",\n\t\tparameters: {\n\t\t\tsessionId: runtimeValues.sessionId,\n\t\t\toptionNames: [\"captureMode\"]\n\t\t}\n\t} \n\t\n\tajax( {\n\t\turl : endPointURL + \"/osc/commands/execute\",\n\t\ttype : \"post\",\n\t\tdata : JSON.stringify( getOptionsJSONData),\n\t\tcontentType: \"application/json\",\n\t\tdataType: \"json\",\n\t\ttimeout : 5000,\n\t\tsuccess : function (contents) {\n\t\t\tlog(\"CaptureMode: \" + JSON.stringify(contents.results.options.captureMode));\n\t\t\tif(contents.results.options.captureMode != \"image\"){\n\t\t\t\tlog(\"Please change capture mode to take photo\");\n\t\t\t\tcallbackSuccess({\n\t\t\t\t\tresultType: \"stop\"\n\t\t\t\t});\n\t\t\t};\t\n\t\t\tcallbackSuccess( {\n\t\t\t\t\tresultType : \"continue\"\n\t\t\t});\n\t\t},\n\t\terror : function (XMLHttpRequest, textStatus, errorThrown) {\n\t\t\tlog(\"Error:\" + textStatus + \" \" + errorThrown);\t\t\n\t\t\tcallbackSuccess({\n\t\t\t\tresultType: \"continue\"\n\t\t\t});\n\t\t}\n\t} );\n}\n\nfunction takeThetaPicture(endPointURL) {\n\tvar takePictureJSONData = {\n\t\tname: \"camera.takePicture\",\n\t\tparameters: {\n\t\t\tsessionId: runtimeValues.sessionId\n\t\t}\n\t} \n\n\tajax( {\n\t\turl : endPointURL + \"/osc/commands/execute\",\n\t\ttype : \"post\",\n\t\tdata : JSON.stringify( takePictureJSONData),\n\t\tcontentType: \"application/json\",\n\t\tdataType: \"json\",\n\t\ttimeout : 5000,\n\t\tsuccess : function (contents) {\n\t\t\t\tlog(\"Took picture\");\n\t\t},\n\t\terror : function (XMLHttpRequest, textStatus, errorThrown) {\n\t\t\tlog(\"Error:\" + textStatus + \" \" + errorThrown);\t\t\n\t\t\tcallbackSuccess({\n\t\t\t\tresultType: \"continue\"\n\t\t\t});\n\t\t}\n\t} );\n}\n\nfunction closeThetaSession(endPointURL) {\n\tvar closeSessionJSONData = {\n\t\tname: \"camera.closeSession\",\n\t\tparameters: {\n\t\t\tsessionId: runtimeValues.sessionId\n\t\t}\n\t} \n\n\tajax( {\n\t\turl : endPointURL + \"/osc/commands/execute\",\n\t\ttype : \"post\",\n\t\tdata : JSON.stringify( closeSessionJSONData),\n\t\tcontentType: \"application/json\",\n\t\tdataType: \"json\",\n\t\ttimeout : 5000,\n\t\tsuccess : function (contents) {\n\t\t\tlog(\"Theta session closed: \" + runtimeValues.sessionId);\n\t\t\t},\n\t\terror : function (XMLHttpRequest, textStatus, errorThrown) {\n\t\t\tlog(\"Error:\" + textStatus + \" \" + errorThrown);\t\t\n\t\t\tcallbackSuccess({\n\t\t\t\tresultType: \"continue\"\n\t\t\t});\n\t\t}\n\t} );\n}\n\nreturn {\n\tresultType : \"continue\"\n};\n```\n\n\u3061\u306a\u307f\u306bMESH\u306eexport\u6a5f\u80fd\u3067\u53d6\u308a\u51fa\u3057\u305f\u3082\u306e\u306f\u4e0b\u8a18\u3002\n\u3053\u308c\u3092\u76f4\u63a5import\u3057\u3066\u3082\u4f7f\u3048\u308b\u306f\u305a\u3067\u3059\u3002\n\n```\n{\"formatVersion\":\"1.0\",\"tagData\":{\"name\":\"ControlThetaS\",\"icon\":\"data:image/png;base64,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\",\"description\":\"This software tag enables mesh to control Ricoh Theta S camera, such as taking pictures \",\"functions\":[{\"id\":\"function_0\",\"name\":\"TakePicture\",\"connector\":{\"inputs\":[],\"outputs\":[]},\"properties\":[],\"extension\":{\"initialize\":\"return {\\n\\truntimeValues : { sessionId: \\\"\\\" }\\n}\",\"receive\":\"\",\"execute\":\"//Theta Endpoint URL \u306e\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f192.168.1.1\uff09\\nvar endPointURL = \\\"http://192.168.1.1\\\"\\n\\nvar startSessionJSONData = {\\n\\tname: \\\"camera.startSession\\\"\\n} \\n\\najax( {\\n\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\ttype : \\\"post\\\",\\n\\tdata : JSON.stringify( startSessionJSONData),\\n\\tcontentType: \\\"application/json\\\",\\n\\tdataType: \\\"json\\\",\\n\\ttimeout : 5000,\\n\\tsuccess : function (contents) {\\n\\t\\truntimeValues.sessionId = contents.results.sessionId;\\n\\t\\tlog(\\\"Theta session started: \\\" + runtimeValues.sessionId);\\n\\t\\tcheckCaptureMode(endPointURL);\\n\\t\\ttakeThetaPicture(endPointURL);\\n\\t\\tcloseThetaSession(endPointURL);\\n\\t\\tcallbackSuccess( {\\n\\t\\t\\t\\t\\tresultType : \\\"continue\\\",     \\n\\t\\t\\t\\t\\truntimeValues : runtimeValues\\n\\t\\t});\\n\\t},\\n\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\tlog(XMLHttpRequest + \\\" | \\\" + textStatus + \\\" | \\\" + errorThrown);\\t\\t\\n\\t\\tcallbackSuccess({\\n\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t});\\n\\t}\\n});\\n\\n//Theta s\u306e\u64ae\u5f71\u30e2\u30fc\u30c9\u304cimage\u30e2\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\\nfunction checkCaptureMode(endPointURL) {\\n\\tvar getOptionsJSONData = {\\n\\t\\tname: \\\"camera.getOptions\\\",\\n\\t\\tparameters: {\\n\\t\\t\\tsessionId: runtimeValues.sessionId,\\n\\t\\t\\toptionNames: [\\\"captureMode\\\"]\\n\\t\\t}\\n\\t} \\n\\t\\n\\tajax( {\\n\\t\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\t\\ttype : \\\"post\\\",\\n\\t\\tdata : JSON.stringify( getOptionsJSONData),\\n\\t\\tcontentType: \\\"application/json\\\",\\n\\t\\tdataType: \\\"json\\\",\\n\\t\\ttimeout : 5000,\\n\\t\\tsuccess : function (contents) {\\n\\t\\t\\tlog(\\\"CaptureMode: \\\" + JSON.stringify(contents.results.options.captureMode));\\n\\t\\t\\tif(contents.results.options.captureMode != \\\"image\\\"){\\n\\t\\t\\t\\tlog(\\\"Please change capture mode to take photo\\\");\\n\\t\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\t\\tresultType: \\\"stop\\\"\\n\\t\\t\\t\\t});\\n\\t\\t\\t};\\t\\n\\t\\t\\tcallbackSuccess( {\\n\\t\\t\\t\\t\\tresultType : \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\t\\tlog(\\\"Error:\\\" + textStatus + \\\" \\\" + errorThrown);\\t\\t\\n\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t}\\n\\t} );\\n}\\n\\n//Theta \u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u3092\u5207\u308b\\nfunction takeThetaPicture(endPointURL) {\\n\\tvar takePictureJSONData = {\\n\\t\\tname: \\\"camera.takePicture\\\",\\n\\t\\tparameters: {\\n\\t\\t\\tsessionId: runtimeValues.sessionId\\n\\t\\t}\\n\\t} \\n\\n\\tajax( {\\n\\t\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\t\\ttype : \\\"post\\\",\\n\\t\\tdata : JSON.stringify( takePictureJSONData),\\n\\t\\tcontentType: \\\"application/json\\\",\\n\\t\\tdataType: \\\"json\\\",\\n\\t\\ttimeout : 5000,\\n\\t\\tsuccess : function (contents) {\\n\\t\\t\\t\\tlog(\\\"Took picture\\\");\\n\\t\\t},\\n\\t\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\t\\tlog(\\\"Error:\\\" + textStatus + \\\" \\\" + errorThrown);\\t\\t\\n\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t}\\n\\t} );\\n}\\n\\n//\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u30af\u30ed\u30fc\u30ba\u3059\u308b\\nfunction closeThetaSession(endPointURL) {\\n\\tvar closeSessionJSONData = {\\n\\t\\tname: \\\"camera.closeSession\\\",\\n\\t\\tparameters: {\\n\\t\\t\\tsessionId: runtimeValues.sessionId\\n\\t\\t}\\n\\t} \\n\\n\\tajax( {\\n\\t\\turl : endPointURL + \\\"/osc/commands/execute\\\",\\n\\t\\ttype : \\\"post\\\",\\n\\t\\tdata : JSON.stringify( closeSessionJSONData),\\n\\t\\tcontentType: \\\"application/json\\\",\\n\\t\\tdataType: \\\"json\\\",\\n\\t\\ttimeout : 5000,\\n\\t\\tsuccess : function (contents) {\\n\\t\\t\\tlog(\\\"Theta session closed: \\\" + runtimeValues.sessionId);\\n\\t\\t\\t},\\n\\t\\terror : function (XMLHttpRequest, textStatus, errorThrown) {\\n\\t\\t\\tlog(\\\"Error:\\\" + textStatus + \\\" \\\" + errorThrown);\\t\\t\\n\\t\\t\\tcallbackSuccess({\\n\\t\\t\\t\\tresultType: \\\"continue\\\"\\n\\t\\t\\t});\\n\\t\\t}\\n\\t} );\\n}\\n\\nreturn {\\n\\tresultType : \\\"continue\\\"\\n};\",\"result\":\"\"}}]}}\n```\n\n##\u5229\u7528\u4f8b\n\u30dc\u30bf\u30f3\u30bf\u30b0\u3068\u7d44\u307f\u5408\u308f\u305b\u305f\u30ec\u30b7\u30d4\u4f8b\u3002\u3053\u306e\u72b6\u614b\u3067\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068Theta\u306e\u30b7\u30e3\u30c3\u30bf\u30fc\u304c\u5207\u3089\u308c\u307e\u3059\u3002\n\n<img width=\"375\" alt=\"IMG_7983.PNG\" src=\"https://qiita-image-store.s3.amazonaws.com/0/51577/f95fc663-43fb-8c4a-c3d2-77e552eba86b.png\">\n\n\n##\u8ffd\u52a0\u3067\u3084\u308a\u305f\u3044\u3053\u3068\u306a\u3069\n\n- \u4ee5\u4e0b\u306eAdvent Calendar\u306e\u8a18\u4e8b\u3067\u30b7\u30e3\u30c3\u30bf\u30fc\u97f3\u3092\u6d88\u3059\u65b9\u6cd5\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3067\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044 http://hima-zinn.hatenablog.com/entry/2015/12/13/000000\n\n- \u52d5\u753b\u64ae\u5f71\u7528\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30bf\u30b0\u3082\u4f5c\u308a\u305f\u3044\n\n##\u307e\u3068\u3081\nTHETA API v2\u306fREST API\u3067\u89e6\u308c\u308b\u306e\u3067\u6577\u5c45\u304c\u4f4e\u304f\u3001\u3068\u3063\u3064\u304d\u3084\u3059\u304b\u3063\u305f\u3067\u3059\u3002\n\u306a\u304a\u3001\u672c\u984c\u3068\u306f\u305a\u308c\u307e\u3059\u304cAPI\u306e\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\u306fElasticsearch\u7528\u306eChrome\u30d7\u30e9\u30b0\u30a4\u30f3[Sense](https://chrome.google.com/webstore/detail/sense-beta/lhjgkmllcaadmopgmanpapmpjgmfcfig)\u3092\u5229\u7528\u3059\u308b\u3068\u3068\u3066\u3082\u4fbf\u5229\u3067\u3057\u305f\u3002\n\n![SnapCrab_NoName_2015-12-21_2-15-12_No-01.png](https://qiita-image-store.s3.amazonaws.com/0/51577/23cc8936-93d0-dac2-3b98-05e13380d992.png)\n\n", "tags": ["Mesh", "Theta", "THETA_S", "THETA_API_v2"]}