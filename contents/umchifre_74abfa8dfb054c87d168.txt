{"tags": ["CoreOS", "vmware_player"], "context": " More than 1 year has passed since last update.etcd2\u3067\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u5f8c\u3001\u8907\u6570CoreOS\u306e\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306bflannel\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u8a2d\u5b9a\u306f\u7c21\u5358\u3067\u4ee5\u4e0b\u306eURL\u306b\u5f93\u3063\u3066cloud-config.yml\u306b\u8ffd\u8a18\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\u53c2\u8003URL\nhttps://coreos.com/flannel/docs/latest/flannel-config.html\n\u305d\u306e\u307e\u307econfig\u30b3\u30d4\u30fc\u3067\u884c\u3051\u307e\u3057\u305f\u3002\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u518d\u8d77\u52d5\u3059\u308b\u305f\u3073\u306bredis\u30b3\u30f3\u30c6\u30ca\u304c\u4f5c\u6210\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u30fb\u30fb\u30fb\u3002\u3069\u3046\u3057\u305f\u3082\u306e\u304b\u3002\ncoreos:\n  units:\n    - name: flanneld.service\n      drop-ins:\n        - name: 50-network-config.conf\n          content: |\n            [Service]\n            ExecStartPre=/usr/bin/etcdctl set /coreos.com/network/config '{ \"Network\": \"10.1.0.0/16\" }'\n      command: start\n\n    - name: redis.service\n      content: |\n        [Unit]\n        Requires=flanneld.service\n        After=flanneld.service\n\n        [Service]\n        ExecStart=/usr/bin/docker run redis\n        Restart=always\n      command: start\n\n\ndocker\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3059\u308b\u524d\u306b\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u306e\u8a18\u8f09\u304c\u3042\u3063\u305f\u305f\u3081\n   - name: docker.service\n\u3088\u308a\u4e0a\u306bconfig\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n#cloud-config\n\nhostname: core[1-3]\ncoreos:\n  units:\n    - name: vmtoolsd.service\n      command: start\n      content: |\n        [Unit]\n        Description=VMware Tools Agent\n        Documentation=http://open-vm-tools.sourceforge.net/\n        ConditionVirtualization=vmware\n\n        [Service]\n        ExecStartPre=/usr/bin/ln -sfT /usr/share/oem/vmware-tools /etc/vmware-tools\n        ExecStart=/usr/share/oem/bin/vmtoolsd\n        TimeoutStopSec=5\n\n    - name: 10-static.network\n      runtime: no\n      content: |\n        [Match]\n        Name=eno16777984\n\n        [Network]\n        Address=192.168.1.[1-3]/24\n        Gateway=192.168.1.254\n        DNS=192.168.1.1\n    - name: etcd2.service\n      command: start\n    - name: fleet.service\n      command: start\n\n    - name: flanneld.service\n      drop-ins:\n        - name: 50-network-config.conf\n          content: |\n            [Service]\n            ExecStartPre=/usr/bin/etcdctl set /coreos.com/network/config '{ \"Network\": \"10.1.0.0/16\" }'\n      command: start\n\n    - name: redis.service\n      content: |\n        [Unit]\n        Requires=flanneld.service\n        After=flanneld.service\n        [Service]\n        ExecStart=/usr/bin/docker run redis\n        Restart=always\n      command: start\n\n    - name: docker.service\n      command: start\n  oem:\n    bug-report-url: \"https://github.com/coreos/bugs/issues\"\n    id: vmware\n    name: VMWare\n    version-id: \"9.10.0-r1\"\n  etcd2:\n    discovery: \"[curl -w \"\\n\" 'https://discovery.etcd.io/new?size=3']\"\n    advertise-client-urls: \"http://192.168.1.[1-3]:2379\"\n    initial-advertise-peer-urls: \"http://192.168.1.[1-3]:2380\"\n    listen-client-urls: \"http://0.0.0.0:2379,http://0.0.0.0:4001\"\n    listen-peer-urls: \"http://192.168.1.[1-3]:2380,http://192.168.1.[1-3]:7001\"\n\n\n\u3059\u3067\u306bCoreOS\u3067Docker\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u30db\u30b9\u30c8\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u518d\u8d77\u52d5\u3059\u308b\u3068redis\u3068\u3044\u3046\u30b3\u30f3\u30c6\u30ca\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\nflannel\u306f\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u52d5\u4f5c\u3059\u308b\u306e\u3067\u3059\u306d\u3002\n\u30b3\u30f3\u30c6\u30ca\u3092\u65b0\u898f\u4f5c\u6210\u5f8cip\u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u3068[10.0.0.0/16]\u30bb\u30b0\u30e1\u30f3\u30c8\u3067IP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\u30b3\u30f3\u30c6\u30ca\u306f\u3082\u3061\u308d\u3093CoreOS\u304b\u3089\u3067\u3082ping\u304c\u901a\u308a\u307e\u3059\u3002\netcd2\u3067\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u5f8c\u3001\u8907\u6570CoreOS\u306e\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306bflannel\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u8a2d\u5b9a\u306f\u7c21\u5358\u3067\u4ee5\u4e0b\u306eURL\u306b\u5f93\u3063\u3066cloud-config.yml\u306b\u8ffd\u8a18\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u53c2\u8003URL\nhttps://coreos.com/flannel/docs/latest/flannel-config.html\n\n\u305d\u306e\u307e\u307econfig\u30b3\u30d4\u30fc\u3067\u884c\u3051\u307e\u3057\u305f\u3002\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u518d\u8d77\u52d5\u3059\u308b\u305f\u3073\u306bredis\u30b3\u30f3\u30c6\u30ca\u304c\u4f5c\u6210\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u30fb\u30fb\u30fb\u3002\u3069\u3046\u3057\u305f\u3082\u306e\u304b\u3002\n\n```bash\ncoreos:\n  units:\n    - name: flanneld.service\n      drop-ins:\n        - name: 50-network-config.conf\n          content: |\n            [Service]\n            ExecStartPre=/usr/bin/etcdctl set /coreos.com/network/config '{ \"Network\": \"10.1.0.0/16\" }'\n      command: start\n\n    - name: redis.service\n      content: |\n        [Unit]\n        Requires=flanneld.service\n        After=flanneld.service\n\n        [Service]\n        ExecStart=/usr/bin/docker run redis\n        Restart=always\n      command: start\n\n```\n\ndocker\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3059\u308b\u524d\u306b\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u306e\u8a18\u8f09\u304c\u3042\u3063\u305f\u305f\u3081\n   - name: docker.service\n\u3088\u308a\u4e0a\u306bconfig\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```bash\n#cloud-config\n\nhostname: core[1-3]\ncoreos:\n  units:\n    - name: vmtoolsd.service\n      command: start\n      content: |\n        [Unit]\n        Description=VMware Tools Agent\n        Documentation=http://open-vm-tools.sourceforge.net/\n        ConditionVirtualization=vmware\n\n        [Service]\n        ExecStartPre=/usr/bin/ln -sfT /usr/share/oem/vmware-tools /etc/vmware-tools\n        ExecStart=/usr/share/oem/bin/vmtoolsd\n        TimeoutStopSec=5\n\n    - name: 10-static.network\n      runtime: no\n      content: |\n        [Match]\n        Name=eno16777984\n\n        [Network]\n        Address=192.168.1.[1-3]/24\n        Gateway=192.168.1.254\n        DNS=192.168.1.1\n    - name: etcd2.service\n      command: start\n    - name: fleet.service\n      command: start\n\n    - name: flanneld.service\n      drop-ins:\n        - name: 50-network-config.conf\n          content: |\n            [Service]\n            ExecStartPre=/usr/bin/etcdctl set /coreos.com/network/config '{ \"Network\": \"10.1.0.0/16\" }'\n      command: start\n\n    - name: redis.service\n      content: |\n        [Unit]\n        Requires=flanneld.service\n        After=flanneld.service\n        [Service]\n        ExecStart=/usr/bin/docker run redis\n        Restart=always\n      command: start\n\n    - name: docker.service\n      command: start\n  oem:\n    bug-report-url: \"https://github.com/coreos/bugs/issues\"\n    id: vmware\n    name: VMWare\n    version-id: \"9.10.0-r1\"\n  etcd2:\n    discovery: \"[curl -w \"\\n\" 'https://discovery.etcd.io/new?size=3']\"\n    advertise-client-urls: \"http://192.168.1.[1-3]:2379\"\n    initial-advertise-peer-urls: \"http://192.168.1.[1-3]:2380\"\n    listen-client-urls: \"http://0.0.0.0:2379,http://0.0.0.0:4001\"\n    listen-peer-urls: \"http://192.168.1.[1-3]:2380,http://192.168.1.[1-3]:7001\"\n\n```\n\n\u3059\u3067\u306bCoreOS\u3067Docker\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u30db\u30b9\u30c8\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u518d\u8d77\u52d5\u3059\u308b\u3068redis\u3068\u3044\u3046\u30b3\u30f3\u30c6\u30ca\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\nflannel\u306f\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u52d5\u4f5c\u3059\u308b\u306e\u3067\u3059\u306d\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u3092\u65b0\u898f\u4f5c\u6210\u5f8cip\u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u3068[10.0.0.0/16]\u30bb\u30b0\u30e1\u30f3\u30c8\u3067IP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\u30b3\u30f3\u30c6\u30ca\u306f\u3082\u3061\u308d\u3093CoreOS\u304b\u3089\u3067\u3082ping\u304c\u901a\u308a\u307e\u3059\u3002\n\n\n"}