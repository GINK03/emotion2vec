{"tags": ["\u7d71\u8a08\u5b66"], "context": "\n\n\u30e2\u30c7\u30eb\n\u5185\u90e8\u72b6\u614b\u3092\u66f4\u65b0\u3057\u306a\u304c\u3089\u3001\u305d\u306e\u3068\u304d\u89b3\u6e2c\u3055\u308c\u308b\u3067\u3042\u308d\u3046\u5024\u3092\u4e88\u6e2c\u3059\u308b\n\\begin{align}\n\\vec{x}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} + \\vec{\\epsilon}_{t} \\\\\n\\vec{z}_{t} &= H_{t} \\vec{x}_{t} + \\vec{\\eta}_{t}\n\\end{align}\n$${\\begin{align}\n\\vec{x}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} + \\vec{\\epsilon}_{t} \\\\\n\\vec{z}_{t} &= H_{t} \\vec{x}_{t} + \\vec{\\eta}_{t}\n\\end{align}\n}$$\n\n$\\vec{x}_{t}$: \u72b6\u614b\n$\\vec{z}_{t}$: \u89b3\u6e2c\u5024\n$F_{t}$: \u72b6\u614b\u9077\u79fb\u30e2\u30c7\u30eb (\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n$\\vec{u}_{t}$: \u5165\u529b\u64cd\u4f5c (\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n$H_{t}$: \u89b3\u6e2c\u30e2\u30c7\u30eb (\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n$\\vec{\\epsilon}_{t} \\sim \\mathcal{N}(0, Q_{t})$: \u6642\u9593\u9077\u79fb\u306b\u3064\u3044\u3066\u306e\u30ce\u30a4\u30ba ($Q_{t}$ \u306f\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n$\\vec{\\eta}_{t} \\sim \\mathcal{N}(0, R_{t})$: \u89b3\u6e2c\u30ce\u30a4\u30ba ($R_{t}$ \u306f\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n\n\n\u5206\u5e03\u3067\u8a18\u8ff0\n$\\vec{x}_{t-1}$ \u306e\u5171\u5206\u6563\u884c\u5217\u3092 $P_{t-1}$ \u3068\u3059\u308b\u3068\n\\begin{align}\n\\vec{x}_{t} &\\sim \\mathcal{N}(F_{t} \\vec{x}_{t-1} + \\vec{u}, F_{t} P_{t-1} F_{t}^{\\top} + Q_{t}) \\\\\n\\vec{z}_{t} &\\sim \\mathcal{N}(H_{t} \\vec{x}_{t}, H_{t} \\left( F_{t} P_{t-1} F_{t}^{\\top} + Q_{t} \\right) H_{t}^{\\top} + R_{t})\n\\end{align}\n$${\\begin{align}\n\\vec{x}_{t} &\\sim \\mathcal{N}(F_{t} \\vec{x}_{t-1} + \\vec{u}, F_{t} P_{t-1} F_{t}^{\\top} + Q_{t}) \\\\\n\\vec{z}_{t} &\\sim \\mathcal{N}(H_{t} \\vec{x}_{t}, H_{t} \\left( F_{t} P_{t-1} F_{t}^{\\top} + Q_{t} \\right) H_{t}^{\\top} + R_{t})\n\\end{align}\n}$$\n\u3068\u3044\u3046\u4e88\u6e2c\u3092\u3057\u3066\u3044\u308b (\u591a\u5909\u91cf\u6b63\u898f\u5206\u5e03\u306b\u5f93\u3046\u78ba\u7387\u5909\u6570\u306e\u7dda\u5f62\u5909\u63db\u306b\u3064\u3044\u3066\u306f \u3053\u3061\u3089 \u3092\u53c2\u7167)\u3002\n$\\hat{P}_{t} = F_{t} P_{t-1} F_{t}^{\\top} + Q_{t}$ \u3068\u304a\u304f\u3068\n\\begin{align}\n\\vec{x}_{t} &\\sim \\mathcal{N}(F_{t} \\vec{x}_{t-1} + \\vec{u}, \\hat{P}_{t}) \\\\\n\\vec{z}_{t} &\\sim \\mathcal{N}(H_{t} \\vec{x}_{t}, H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t})\n\\end{align}\n$${\\begin{align}\n\\vec{x}_{t} &\\sim \\mathcal{N}(F_{t} \\vec{x}_{t-1} + \\vec{u}, \\hat{P}_{t}) \\\\\n\\vec{z}_{t} &\\sim \\mathcal{N}(H_{t} \\vec{x}_{t}, H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t})\n\\end{align}\n}$$\n\u3068\u306a\u308b\u3002\n\n\u4e88\u6e2c\n\\begin{align}\n\\hat{\\vec{x}}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} \\\\\n\\hat{\\vec{z}}_{t} &= H_{t} \\hat{\\vec{x}_{t}}\n\\end{align}\n$${\\begin{align}\n\\hat{\\vec{x}}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} \\\\\n\\hat{\\vec{z}}_{t} &= H_{t} \\hat{\\vec{x}_{t}}\n\\end{align}\n}$$\n\n\u88dc\u6b63\n\u5b9f\u969b\u306e\u89b3\u6e2c\u5024 $\\vec{z}_{t}$ \u304c\u5f97\u3089\u308c\u305f\u3068\u304d\u3001\u5185\u90e8\u72b6\u614b\u3092\n\\begin{align}\n\\vec{x}_{t}\n  &= \\hat{\\vec{x}}_{t} + K_{t} (\\vec{z} - \\hat{\\vec{z}}) \\\\\n  &= \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} \\hat{\\vec{z}} \\\\\n  &= \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} (H_{t} \\hat{\\vec{x}}_{t} + \\vec{\\eta}_{t}) \\\\\n  &= (I - K_{t} H_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} \\vec{\\eta}_{t}\n\\end{align}\n$${\\begin{align}\n\\vec{x}_{t}\n  &= \\hat{\\vec{x}}_{t} + K_{t} (\\vec{z} - \\hat{\\vec{z}}) \\\\\n  &= \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} \\hat{\\vec{z}} \\\\\n  &= \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} (H_{t} \\hat{\\vec{x}}_{t} + \\vec{\\eta}_{t}) \\\\\n  &= (I - K_{t} H_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} \\vec{\\eta}_{t}\n\\end{align}\n}$$\n\u3067\u88dc\u6b63\u3059\u308b\u3068\u3059\u308b\u3002\u3053\u3053\u3067 $K_{t}$ \u3092\u30ab\u30eb\u30de\u30f3\u30b2\u30a4\u30f3\u3068\u3044\u3046\u3002\u9069\u5207\u306a $K_{t}$ \u3092\u6c42\u3081\u305f\u3044\u3002\n$\\vec{x}_{t}$ \u306e\u5f93\u3046\u591a\u5909\u91cf\u6b63\u898f\u5206\u5e03\u306e\u5171\u5206\u6563\u884c\u5217\u306f\n\\begin{align}\nP_{t}\n  &= (I - K_{t} H_{t}) \\hat{P}_{t} (I - K_{t} H_{t})^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= (\\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t}) (I - K_{t} H_{t})^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} H_{t} \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} (H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t}) K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top} \\\\\n\\end{align}\n$${\\begin{align}\nP_{t}\n  &= (I - K_{t} H_{t}) \\hat{P}_{t} (I - K_{t} H_{t})^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= (\\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t}) (I - K_{t} H_{t})^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} H_{t} \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} (H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t}) K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top} \\\\\n\\end{align}\n}$$\n\u3068\u306a\u308b\u3002\u3053\u3053\u3067 $S_{t} = H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t}$ \u3068\u304a\u3044\u305f\u3002\n\u72b6\u614b\u306e\u88dc\u6b63\u5f8c\u306b\u3001\u5206\u6563\u304c\u6700\u5c0f\u306b\u306a\u308b\u3088\u3046\u306b $K_{t}$ \u3092\u9078\u3076\u3053\u3068\u306b\u3059\u308b\u3002\u3064\u307e\u308a $P_{t}$ \u306e\u30c8\u30ec\u30fc\u30b9\u3092\u6700\u5c0f\u5316\u3059\u308b\u3002\n\\begin{align}\n\\nabla_{K_{t}} \\mathrm{tr}(P_{t})\n  &= \\nabla_{K_{t}} \\mathrm{tr}(\\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top}) \\\\\n  &= \\nabla_{K_{t}} \\mathrm{tr}(- K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top}) \\\\\n  &= -\\hat{P}_{t}^{\\top} H_{t}^{\\top} - \\hat{P}_{t} H_{t}^{\\top} + K_{t} (S_{t} + S_{t}^{\\top}) \\\\\n  &= -2 \\hat{P}_{t} H_{t}^{\\top} + 2 K_{t} S_{t} \\\\\n\\end{align}\n$${\\begin{align}\n\\nabla_{K_{t}} \\mathrm{tr}(P_{t})\n  &= \\nabla_{K_{t}} \\mathrm{tr}(\\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top}) \\\\\n  &= \\nabla_{K_{t}} \\mathrm{tr}(- K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top}) \\\\\n  &= -\\hat{P}_{t}^{\\top} H_{t}^{\\top} - \\hat{P}_{t} H_{t}^{\\top} + K_{t} (S_{t} + S_{t}^{\\top}) \\\\\n  &= -2 \\hat{P}_{t} H_{t}^{\\top} + 2 K_{t} S_{t} \\\\\n\\end{align}\n}$$\n\u3088\u308a ($S_{t} = S_{t}^{\\top}$ \u304a\u3088\u3073 $\\hat{P}_{t} = \\hat{P}_{t}^{\\top}$ \u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f)\n\\begin{align}\n-2 \\hat{P}_{t} H_{t}^{\\top} + 2 K_{t} S_{t} &= 0 \\\\\n\\Leftrightarrow K_{t} S_{t} &= \\hat{P}_{t} H_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1}\n\\end{align}\n$${\\begin{align}\n-2 \\hat{P}_{t} H_{t}^{\\top} + 2 K_{t} S_{t} &= 0 \\\\\n\\Leftrightarrow K_{t} S_{t} &= \\hat{P}_{t} H_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1}\n\\end{align}\n}$$\n\u3068\u306a\u308b\u3002\n\u4e21\u8fba\u306b\u53f3\u304b\u3089 $S_{t} K_{t}^{\\top}$ \u3092\u304b\u3051\u308b\u3068\n\\begin{align}\nK_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} S_{t} K_{t}^{\\top} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1} S_{t} K_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} S_{t} K_{t}^{\\top} &= \\hat{P}_{t} H_{t}^{\\top}  K_{t}^{\\top}\n\\end{align}\n$${\\begin{align}\nK_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} S_{t} K_{t}^{\\top} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1} S_{t} K_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} S_{t} K_{t}^{\\top} &= \\hat{P}_{t} H_{t}^{\\top}  K_{t}^{\\top}\n\\end{align}\n}$$\n\u3068\u306a\u308b\u3053\u3068\u304b\u3089\n\\begin{align}\nP_{t} &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top} \\\\\n &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + \\hat{P}_{t} H_{t}^{\\top}  K_{t}^{\\top} \\\\\n &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} \\\\\n &= (I - K_{t} H_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n$${\\begin{align}\nP_{t} &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top} \\\\\n &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + \\hat{P}_{t} H_{t}^{\\top}  K_{t}^{\\top} \\\\\n &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} \\\\\n &= (I - K_{t} H_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n}$$\n\u3068\u8a08\u7b97\u3067\u304d\u308b\u3002\n\n\u307e\u3068\u3081\n\n\u4e88\u6e2c\n\\begin{align}\n\\hat{\\vec{x}}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} \\\\\n\\hat{P}_{t} &= F_{t} P_{t-1} F_{t}^{\\top} + Q_{t} \\\\\n\\hat{\\vec{z}}_{t} &= H_{t} \\hat{\\vec{x}_{t}} \\\\\n\\end{align}\n$${\\begin{align}\n\\hat{\\vec{x}}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} \\\\\n\\hat{P}_{t} &= F_{t} P_{t-1} F_{t}^{\\top} + Q_{t} \\\\\n\\hat{\\vec{z}}_{t} &= H_{t} \\hat{\\vec{x}_{t}} \\\\\n\\end{align}\n}$$\n\n\u88dc\u6b63\n\\begin{align}\nS_{t} &= H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t} \\\\\nK_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1} \\\\\n\\vec{x}_{t} &= (I - K_{t} H_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} \\\\\nP_{t} &= (I - K_{t} H_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n$${\\begin{align}\nS_{t} &= H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t} \\\\\nK_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1} \\\\\n\\vec{x}_{t} &= (I - K_{t} H_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} \\\\\nP_{t} &= (I - K_{t} H_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n}$$\n\n\u975e\u7dda\u5f62\u30ab\u30eb\u30de\u30f3\u30d5\u30a3\u30eb\u30bf\u30fc\n\\begin{align}\n\\vec{x}_{t} &= f_{t}(\\vec{x}_{t-1}) + \\vec{\\epsilon}_{t} \\\\\n\\vec{z}_{t} &= h_{t}(\\vec{x}_{t}) + \\vec{\\eta}_{t}\n\\end{align}\n$${\\begin{align}\n\\vec{x}_{t} &= f_{t}(\\vec{x}_{t-1}) + \\vec{\\epsilon}_{t} \\\\\n\\vec{z}_{t} &= h_{t}(\\vec{x}_{t}) + \\vec{\\eta}_{t}\n\\end{align}\n}$$\n\u4e0a\u5f0f\u306e\u3088\u3046\u306a\u975e\u7dda\u5f62\u306e\u66f4\u65b0\u30e2\u30c7\u30eb\u3092\u6271\u3046\u5834\u5408\u3001\u4e0b\u5f0f\u306e\u3088\u3046\u306b\u63a8\u5b9a\u5024\u306e\u307e\u308f\u308a\u3067\u7dda\u5f62\u5316\u3059\u308c\u3070\u3001\u5bfe\u5fdc\u3067\u304d\u308b\u3002\n\\begin{align}\n\\hat{F}_{t} &= \\nabla_{\\vec{x}} f_{t}(\\vec{x}_{t-1}) \\\\\n\\hat{H}_{t} &= \\nabla_{\\vec{x}} h_{t}(\\vec{x}_{t}) \\\\\n\\end{align}\n$${\\begin{align}\n\\hat{F}_{t} &= \\nabla_{\\vec{x}} f_{t}(\\vec{x}_{t-1}) \\\\\n\\hat{H}_{t} &= \\nabla_{\\vec{x}} h_{t}(\\vec{x}_{t}) \\\\\n\\end{align}\n}$$\n\u3053\u308c\u3092\u62e1\u5f35\u30ab\u30eb\u30de\u30f3\u30d5\u30a3\u30eb\u30bf\u30fc (extended Kalman filter) \u3068\u3044\u3046\u3002\n\n\u4e88\u6e2c\n\\begin{align}\n\\hat{\\vec{x}}_{t} &= f_{t}(\\vec{x}_{t-1}) + \\vec{u} \\\\\n\\hat{P}_{t} &= \\hat{F}_{t} P_{t-1} \\hat{F}_{t}^{\\top} + Q_{t} \\\\\n\\hat{\\vec{z}}_{t} &= h_{t}(\\hat{\\vec{x}_{t}}) \\\\\n\\end{align}\n$${\\begin{align}\n\\hat{\\vec{x}}_{t} &= f_{t}(\\vec{x}_{t-1}) + \\vec{u} \\\\\n\\hat{P}_{t} &= \\hat{F}_{t} P_{t-1} \\hat{F}_{t}^{\\top} + Q_{t} \\\\\n\\hat{\\vec{z}}_{t} &= h_{t}(\\hat{\\vec{x}_{t}}) \\\\\n\\end{align}\n}$$\n\n\u88dc\u6b63\n\\begin{align}\nS_{t} &= \\hat{H}_{t} \\hat{P}_{t} \\hat{H}_{t}^{\\top} + R_{t} \\\\\nK_{t} &= \\hat{P}_{t} \\hat{H}_{t}^{\\top} S_{t}^{-1} \\\\\n\\vec{x}_{t} &= (I - K_{t} \\hat{H}_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} \\\\\nP_{t} &= (I - K_{t} \\hat{H}_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n\n$${\\begin{align}\nS_{t} &= \\hat{H}_{t} \\hat{P}_{t} \\hat{H}_{t}^{\\top} + R_{t} \\\\\nK_{t} &= \\hat{P}_{t} \\hat{H}_{t}^{\\top} S_{t}^{-1} \\\\\n\\vec{x}_{t} &= (I - K_{t} \\hat{H}_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} \\\\\nP_{t} &= (I - K_{t} \\hat{H}_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n\n}$$\n# \u30e2\u30c7\u30eb\n\n\u5185\u90e8\u72b6\u614b\u3092\u66f4\u65b0\u3057\u306a\u304c\u3089\u3001\u305d\u306e\u3068\u304d\u89b3\u6e2c\u3055\u308c\u308b\u3067\u3042\u308d\u3046\u5024\u3092\u4e88\u6e2c\u3059\u308b\n\n```math\n\\begin{align}\n\\vec{x}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} + \\vec{\\epsilon}_{t} \\\\\n\\vec{z}_{t} &= H_{t} \\vec{x}_{t} + \\vec{\\eta}_{t}\n\\end{align}\n```\n\n* $\\vec{x}\\_{t}$: \u72b6\u614b\n* $\\vec{z}\\_{t}$: \u89b3\u6e2c\u5024\n* $F_{t}$: \u72b6\u614b\u9077\u79fb\u30e2\u30c7\u30eb (\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n* $\\vec{u}\\_{t}$: \u5165\u529b\u64cd\u4f5c (\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n* $H_{t}$: \u89b3\u6e2c\u30e2\u30c7\u30eb (\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n* $\\vec{\\epsilon}\\_{t} \\sim \\mathcal{N}(0, Q\\_{t})$: \u6642\u9593\u9077\u79fb\u306b\u3064\u3044\u3066\u306e\u30ce\u30a4\u30ba ($Q\\_{t}$ \u306f\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n* $\\vec{\\eta}\\_{t} \\sim \\mathcal{N}(0, R\\_{t})$: \u89b3\u6e2c\u30ce\u30a4\u30ba ($R\\_{t}$ \u306f\u8a2d\u8a08\u6bb5\u968e\u3067\u5b9a\u7fa9\u3059\u308b)\n\n## \u5206\u5e03\u3067\u8a18\u8ff0\n\n$\\vec{x}\\_{t-1}$ \u306e\u5171\u5206\u6563\u884c\u5217\u3092 $P\\_{t-1}$ \u3068\u3059\u308b\u3068\n\n```math\n\\begin{align}\n\\vec{x}_{t} &\\sim \\mathcal{N}(F_{t} \\vec{x}_{t-1} + \\vec{u}, F_{t} P_{t-1} F_{t}^{\\top} + Q_{t}) \\\\\n\\vec{z}_{t} &\\sim \\mathcal{N}(H_{t} \\vec{x}_{t}, H_{t} \\left( F_{t} P_{t-1} F_{t}^{\\top} + Q_{t} \\right) H_{t}^{\\top} + R_{t})\n\\end{align}\n```\n\n\u3068\u3044\u3046\u4e88\u6e2c\u3092\u3057\u3066\u3044\u308b (\u591a\u5909\u91cf\u6b63\u898f\u5206\u5e03\u306b\u5f93\u3046\u78ba\u7387\u5909\u6570\u306e\u7dda\u5f62\u5909\u63db\u306b\u3064\u3044\u3066\u306f [\u3053\u3061\u3089](http://qiita.com/skitaoka/items/efd485bc027eab23f17b) \u3092\u53c2\u7167)\u3002\n\n$\\hat{P}\\_{t} = F\\_{t} P\\_{t-1} F\\_{t}^{\\top} + Q\\_{t}$ \u3068\u304a\u304f\u3068\n\n```math\n\\begin{align}\n\\vec{x}_{t} &\\sim \\mathcal{N}(F_{t} \\vec{x}_{t-1} + \\vec{u}, \\hat{P}_{t}) \\\\\n\\vec{z}_{t} &\\sim \\mathcal{N}(H_{t} \\vec{x}_{t}, H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t})\n\\end{align}\n```\n\n\u3068\u306a\u308b\u3002\n\n## \u4e88\u6e2c\n\n```math\n\\begin{align}\n\\hat{\\vec{x}}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} \\\\\n\\hat{\\vec{z}}_{t} &= H_{t} \\hat{\\vec{x}_{t}}\n\\end{align}\n```\n\n## \u88dc\u6b63\n\n\u5b9f\u969b\u306e\u89b3\u6e2c\u5024 $\\vec{z}_{t}$ \u304c\u5f97\u3089\u308c\u305f\u3068\u304d\u3001\u5185\u90e8\u72b6\u614b\u3092\n\n```math\n\\begin{align}\n\\vec{x}_{t}\n  &= \\hat{\\vec{x}}_{t} + K_{t} (\\vec{z} - \\hat{\\vec{z}}) \\\\\n  &= \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} \\hat{\\vec{z}} \\\\\n  &= \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} (H_{t} \\hat{\\vec{x}}_{t} + \\vec{\\eta}_{t}) \\\\\n  &= (I - K_{t} H_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} - K_{t} \\vec{\\eta}_{t}\n\\end{align}\n```\n\n\u3067\u88dc\u6b63\u3059\u308b\u3068\u3059\u308b\u3002\u3053\u3053\u3067 $K\\_{t}$ \u3092\u30ab\u30eb\u30de\u30f3\u30b2\u30a4\u30f3\u3068\u3044\u3046\u3002\u9069\u5207\u306a $K\\_{t}$ \u3092\u6c42\u3081\u305f\u3044\u3002\n\n$\\vec{x}\\_{t}$ \u306e\u5f93\u3046\u591a\u5909\u91cf\u6b63\u898f\u5206\u5e03\u306e\u5171\u5206\u6563\u884c\u5217\u306f\n\n```math\n\\begin{align}\nP_{t}\n  &= (I - K_{t} H_{t}) \\hat{P}_{t} (I - K_{t} H_{t})^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= (\\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t}) (I - K_{t} H_{t})^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} H_{t} \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} R_{t} K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} (H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t}) K_{t}^{\\top} \\\\\n  &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top} \\\\\n\\end{align}\n```\n\n\u3068\u306a\u308b\u3002\u3053\u3053\u3067 $S\\_{t} = H\\_{t} \\hat{P}\\_{t} H\\_{t}^{\\top} + R\\_{t}$ \u3068\u304a\u3044\u305f\u3002\n\n\u72b6\u614b\u306e\u88dc\u6b63\u5f8c\u306b\u3001\u5206\u6563\u304c\u6700\u5c0f\u306b\u306a\u308b\u3088\u3046\u306b $K\\_{t}$ \u3092\u9078\u3076\u3053\u3068\u306b\u3059\u308b\u3002\u3064\u307e\u308a $P_{t}$ \u306e\u30c8\u30ec\u30fc\u30b9\u3092\u6700\u5c0f\u5316\u3059\u308b\u3002\n\n```math\n\\begin{align}\n\\nabla_{K_{t}} \\mathrm{tr}(P_{t})\n  &= \\nabla_{K_{t}} \\mathrm{tr}(\\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top}) \\\\\n  &= \\nabla_{K_{t}} \\mathrm{tr}(- K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top}) \\\\\n  &= -\\hat{P}_{t}^{\\top} H_{t}^{\\top} - \\hat{P}_{t} H_{t}^{\\top} + K_{t} (S_{t} + S_{t}^{\\top}) \\\\\n  &= -2 \\hat{P}_{t} H_{t}^{\\top} + 2 K_{t} S_{t} \\\\\n\\end{align}\n```\n\n\u3088\u308a ($S\\_{t} = S\\_{t}^{\\top}$ \u304a\u3088\u3073 $\\hat{P}\\_{t} = \\hat{P}\\_{t}^{\\top}$ \u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f)\n\n```math\n\\begin{align}\n-2 \\hat{P}_{t} H_{t}^{\\top} + 2 K_{t} S_{t} &= 0 \\\\\n\\Leftrightarrow K_{t} S_{t} &= \\hat{P}_{t} H_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1}\n\\end{align}\n```\n\n\u3068\u306a\u308b\u3002\n\n\u4e21\u8fba\u306b\u53f3\u304b\u3089 $S\\_{t} K\\_{t}^{\\top}$ \u3092\u304b\u3051\u308b\u3068\n\n```math\n\\begin{align}\nK_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} S_{t} K_{t}^{\\top} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1} S_{t} K_{t}^{\\top} \\\\\n\\Leftrightarrow K_{t} S_{t} K_{t}^{\\top} &= \\hat{P}_{t} H_{t}^{\\top}  K_{t}^{\\top}\n\\end{align}\n```\n\n\u3068\u306a\u308b\u3053\u3068\u304b\u3089\n\n```math\n\\begin{align}\nP_{t} &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + K_{t} S_{t} K_{t}^{\\top} \\\\\n &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} - \\hat{P}_{t} H_{t}^{\\top} K_{t}^{\\top} + \\hat{P}_{t} H_{t}^{\\top}  K_{t}^{\\top} \\\\\n &= \\hat{P}_{t} - K_{t} H_{t} \\hat{P}_{t} \\\\\n &= (I - K_{t} H_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n```\n\n\u3068\u8a08\u7b97\u3067\u304d\u308b\u3002\n\n# \u307e\u3068\u3081\n\n## \u4e88\u6e2c\n\n```math\n\\begin{align}\n\\hat{\\vec{x}}_{t} &= F_{t} \\vec{x}_{t-1} + \\vec{u} \\\\\n\\hat{P}_{t} &= F_{t} P_{t-1} F_{t}^{\\top} + Q_{t} \\\\\n\\hat{\\vec{z}}_{t} &= H_{t} \\hat{\\vec{x}_{t}} \\\\\n\\end{align}\n```\n\n## \u88dc\u6b63\n\n```math\n\\begin{align}\nS_{t} &= H_{t} \\hat{P}_{t} H_{t}^{\\top} + R_{t} \\\\\nK_{t} &= \\hat{P}_{t} H_{t}^{\\top} S_{t}^{-1} \\\\\n\\vec{x}_{t} &= (I - K_{t} H_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} \\\\\nP_{t} &= (I - K_{t} H_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n```\n\n# \u975e\u7dda\u5f62\u30ab\u30eb\u30de\u30f3\u30d5\u30a3\u30eb\u30bf\u30fc\n\n```math\n\\begin{align}\n\\vec{x}_{t} &= f_{t}(\\vec{x}_{t-1}) + \\vec{\\epsilon}_{t} \\\\\n\\vec{z}_{t} &= h_{t}(\\vec{x}_{t}) + \\vec{\\eta}_{t}\n\\end{align}\n```\n\n\u4e0a\u5f0f\u306e\u3088\u3046\u306a\u975e\u7dda\u5f62\u306e\u66f4\u65b0\u30e2\u30c7\u30eb\u3092\u6271\u3046\u5834\u5408\u3001\u4e0b\u5f0f\u306e\u3088\u3046\u306b\u63a8\u5b9a\u5024\u306e\u307e\u308f\u308a\u3067\u7dda\u5f62\u5316\u3059\u308c\u3070\u3001\u5bfe\u5fdc\u3067\u304d\u308b\u3002\n\n```math\n\\begin{align}\n\\hat{F}_{t} &= \\nabla_{\\vec{x}} f_{t}(\\vec{x}_{t-1}) \\\\\n\\hat{H}_{t} &= \\nabla_{\\vec{x}} h_{t}(\\vec{x}_{t}) \\\\\n\\end{align}\n```\n\n\u3053\u308c\u3092\u62e1\u5f35\u30ab\u30eb\u30de\u30f3\u30d5\u30a3\u30eb\u30bf\u30fc (extended Kalman filter) \u3068\u3044\u3046\u3002\n\n## \u4e88\u6e2c\n\n```math\n\\begin{align}\n\\hat{\\vec{x}}_{t} &= f_{t}(\\vec{x}_{t-1}) + \\vec{u} \\\\\n\\hat{P}_{t} &= \\hat{F}_{t} P_{t-1} \\hat{F}_{t}^{\\top} + Q_{t} \\\\\n\\hat{\\vec{z}}_{t} &= h_{t}(\\hat{\\vec{x}_{t}}) \\\\\n\\end{align}\n```\n\n## \u88dc\u6b63\n\n```math\n\\begin{align}\nS_{t} &= \\hat{H}_{t} \\hat{P}_{t} \\hat{H}_{t}^{\\top} + R_{t} \\\\\nK_{t} &= \\hat{P}_{t} \\hat{H}_{t}^{\\top} S_{t}^{-1} \\\\\n\\vec{x}_{t} &= (I - K_{t} \\hat{H}_{t}) \\hat{\\vec{x}}_{t} + K_{t} \\vec{z} \\\\\nP_{t} &= (I - K_{t} \\hat{H}_{t}) \\hat{P}_{t} \\\\\n\\end{align}\n\n"}