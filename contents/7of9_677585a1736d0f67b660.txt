{"tags": ["processing"], "context": "\n\u52d5\u4f5c\u74b0\u5883\nProcessing 3.1.1\nControlP5\u30e9\u30a4\u30d6\u30e9\u30ea\nWindows 8.1 pro (64bit)\n\n\n\u53c2\u8003 http://qiita.com/akspect/items/6a574e12181c00125d40\n\nslider\u3067COM\u30dd\u30fc\u30c8\u3092\u5909\u66f4\nButton\u62bc\u4e0b\u6642\u306b\u30dd\u30fc\u30c8\u30aa\u30fc\u30d7\u30f3\nCOM\u304b\u3089\u306e\u901a\u4fe1\u3092\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\n\ncode\nimport processing.serial.*;\nimport controlP5.*;\n\nSerial myPort;\n\nControlP5 slider;\nint sliderValue;\nint numSerial = 5;\nint curSerial = -1;\n\nControlP5 btnOpen;\n\nvoid setup() {\n  size(500,500);\n  slider = new ControlP5(this);\n  slider.addSlider(\"COM\")\n    .setRange(-1, numSerial - 1)\n    .setValue(-1)\n    .setPosition(50,40)\n    .setSize(200, 20)\n    .setNumberOfTickMarks(numSerial + 1);\n\n  btnOpen = new ControlP5(this);\n  btnOpen.addButton(\"openPort\")\n    .setLabel(\"Open\")\n    .setPosition(275, 40)\n    .setSize(100, 30);    \n}\n\nvoid controlEvent(ControlEvent theEvent) {\n  if (theEvent.isController()) {\n     if (theEvent.getName() == \"COM\") {\n       if (curSerial != slider.getValue(\"COM\")) {\n         curSerial = (int)slider.getValue(\"COM\");\n       }\n     }\n  }\n}\n\nvoid serialEvent(Serial myPort) { \n   String mystr = myPort.readStringUntil('\\n');\n   mystr = trim(mystr);\n   println(mystr);\n}\n\nvoid openPort() {\n   println(\"Open Port\"); \n   if (myPort != null) {\n      myPort.stop(); \n   }\n   myPort = new Serial(this, Serial.list()[(int)curSerial], 9600);\n   myPort.bufferUntil('\\n');\n }\n\nvoid draw() {\n  background(0);  \n}\n\n\n\u5b9f\u884c\u74b0\u5883\n\u5b9f\u884c\u74b0\u5883\n\n\u30b7\u30ea\u30a2\u30eb\u53d7\u4fe1\u5074: processing\u3092\u52d5\u304b\u3059PC (Windows 8.1pro)\n\u30b7\u30ea\u30a2\u30eb\u9001\u4fe1\u5074: TeraTerm\u3067\u9001\u4fe1\u3059\u308b (Windows 7 pro)\n\n\u4e0a\u8a18\u306e2\u3064\u306e\u7aef\u672b\u3092\u30b7\u30ea\u30a2\u30eb\u306e\u30b1\u30fc\u30d6\u30eb(\u30af\u30ed\u30b9)\u3067\u63a5\u7d9a\u3059\u308b\u3002\n\u3053\u3061\u3089\u3067\u306fVM\u30a4\u30e1\u30fc\u30b82\u3064\u306b\u3066named pipe\u3092\u4f7f\u3063\u3066\u306e\u52d5\u4f5c\u3092\u3057\u305f\u3002\n\u9001\u4fe1\u5074\u306eTeraTerm\u3067\u306f\u300c\u8a2d\u5b9a > \u7aef\u672b\u300d\u306b\u3066[CR]\u3092[CR+LF]\u306b\u5909\u66f4\u3059\u308b\u3002LF\u3092\u7d42\u7aef\u3068\u3057\u3066\u8a8d\u8b58\u3059\u308b\u305f\u3081\u3002\n\n\u5b9f\u884c\u4f8b\n\nSlider\u3092\u901a\u4fe1\u3057\u305f\u3044COM\u30dd\u30fc\u30c8\u306b\u79fb\u52d5\u3059\u308b\nOPEN\u3092\u62bc\u3059\n\u9001\u4fe1\u5074\u304b\u3089\u6587\u5b57\u5217+Enter\u3092\u9001\u4fe1\u3059\u308b\n\n\nProcessing\u30bd\u30d5\u30c8\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u305d\u306e\u6587\u5b57\u5217\u304c\u8868\u793a\u3055\u308c\u308b\n\n\n\n\nCOM1\u63a5\u7d9a\u6642\n\n\nCOM3\u63a5\u7d9a\u6642\n\n\n\u88dc\u8db3\n\n\u672c\u5f53\u306f\u9055\u3046\u3093\u3060\u65e5\u8a18\n\u672c\u5f53\u306f\u30b9\u30e9\u30a4\u30c0\u5909\u66f4\u6642\u306b\u30dd\u30fc\u30c8\u30aa\u30fc\u30d7\u30f3\u3092\u3057\u305f\u304b\u3063\u305f\u304c\u4e0d\u660e\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u305f\u3081\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\u3057\u305f\u3002\n\u30b9\u30e9\u30a4\u30c0\uff11\u3064\u3067\u30aa\u30fc\u30d7\u30f3\u307e\u3067\u3067\u304d\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u30b9\u30e9\u30a4\u30c0\u3092\u4f7f\u3046\u610f\u5473\u306f\u306a\u3055\u305d\u3046\u3002\n\nTeraTerm\u306e\u7f60\nTeraTerm\u306f\u9001\u4fe1\u3092\u300cCR+LF\u300d\u306b\u3057\u5fd8\u308c\u308b\u3068\u5931\u6557\u3059\u308b\u306e\u3067\u3001\u78ba\u8a8d\u304c\u5fc5\u8981\u3002\n\njava\njava\u306f\u307e\u3060\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002\u4ee5\u4e0b\u306f\nif (myPort != null) {\n   myPort.stop(); \n}\n\nGC\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u65b9\u304c\u3044\u3044\u306e\u3060\u308d\u3046\u304b\uff1f\nif (myPort != null) {\n   myPort.stop(); \n   myPort = null; // for GC\n}\n\n\u3042\u3068\u306e\u65b9\u3067myPort = new Serial()\u3057\u3066\u3044\u308b\u304b\u3089GC\u306f\u52d5\u304f\u306e\u3060\u308d\u3046\u304b?\n```txt:\u52d5\u4f5c\u74b0\u5883\nProcessing 3.1.1\nControlP5\u30e9\u30a4\u30d6\u30e9\u30ea\nWindows 8.1 pro (64bit)\n```\n\n\u53c2\u8003 http://qiita.com/akspect/items/6a574e12181c00125d40\n\n- slider\u3067COM\u30dd\u30fc\u30c8\u3092\u5909\u66f4\n- Button\u62bc\u4e0b\u6642\u306b\u30dd\u30fc\u30c8\u30aa\u30fc\u30d7\u30f3\n- COM\u304b\u3089\u306e\u901a\u4fe1\u3092\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\n## code\n\n```java\nimport processing.serial.*;\nimport controlP5.*;\n\nSerial myPort;\n\nControlP5 slider;\nint sliderValue;\nint numSerial = 5;\nint curSerial = -1;\n\nControlP5 btnOpen;\n\nvoid setup() {\n  size(500,500);\n  slider = new ControlP5(this);\n  slider.addSlider(\"COM\")\n    .setRange(-1, numSerial - 1)\n    .setValue(-1)\n    .setPosition(50,40)\n    .setSize(200, 20)\n    .setNumberOfTickMarks(numSerial + 1);\n\n  btnOpen = new ControlP5(this);\n  btnOpen.addButton(\"openPort\")\n    .setLabel(\"Open\")\n    .setPosition(275, 40)\n    .setSize(100, 30);    \n}\n\nvoid controlEvent(ControlEvent theEvent) {\n  if (theEvent.isController()) {\n     if (theEvent.getName() == \"COM\") {\n       if (curSerial != slider.getValue(\"COM\")) {\n         curSerial = (int)slider.getValue(\"COM\");\n       }\n     }\n  }\n}\n\nvoid serialEvent(Serial myPort) { \n   String mystr = myPort.readStringUntil('\\n');\n   mystr = trim(mystr);\n   println(mystr);\n}\n\nvoid openPort() {\n   println(\"Open Port\"); \n   if (myPort != null) {\n      myPort.stop(); \n   }\n   myPort = new Serial(this, Serial.list()[(int)curSerial], 9600);\n   myPort.bufferUntil('\\n');\n }\n\nvoid draw() {\n  background(0);  \n}\n```\n\n## \u5b9f\u884c\u74b0\u5883\n\n\u5b9f\u884c\u74b0\u5883\n\n- \u30b7\u30ea\u30a2\u30eb\u53d7\u4fe1\u5074: processing\u3092\u52d5\u304b\u3059PC (Windows 8.1pro)\n- \u30b7\u30ea\u30a2\u30eb\u9001\u4fe1\u5074: TeraTerm\u3067\u9001\u4fe1\u3059\u308b (Windows 7 pro)\n\n\u4e0a\u8a18\u306e2\u3064\u306e\u7aef\u672b\u3092\u30b7\u30ea\u30a2\u30eb\u306e\u30b1\u30fc\u30d6\u30eb(\u30af\u30ed\u30b9)\u3067\u63a5\u7d9a\u3059\u308b\u3002\n\u3053\u3061\u3089\u3067\u306fVM\u30a4\u30e1\u30fc\u30b82\u3064\u306b\u3066named pipe\u3092\u4f7f\u3063\u3066\u306e\u52d5\u4f5c\u3092\u3057\u305f\u3002\n\u9001\u4fe1\u5074\u306eTeraTerm\u3067\u306f\u300c\u8a2d\u5b9a > \u7aef\u672b\u300d\u306b\u3066[CR]\u3092[CR+LF]\u306b\u5909\u66f4\u3059\u308b\u3002LF\u3092\u7d42\u7aef\u3068\u3057\u3066\u8a8d\u8b58\u3059\u308b\u305f\u3081\u3002\n\n## \u5b9f\u884c\u4f8b\n\n- Slider\u3092\u901a\u4fe1\u3057\u305f\u3044COM\u30dd\u30fc\u30c8\u306b\u79fb\u52d5\u3059\u308b\n- OPEN\u3092\u62bc\u3059\n- \u9001\u4fe1\u5074\u304b\u3089`\u6587\u5b57\u5217+Enter`\u3092\u9001\u4fe1\u3059\u308b\n  - Processing\u30bd\u30d5\u30c8\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u305d\u306e\u6587\u5b57\u5217\u304c\u8868\u793a\u3055\u308c\u308b\n\n### COM1\u63a5\u7d9a\u6642\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/82cb0d1c-3437-af65-1645-c822dc529f12.png)\n\n\n### COM3\u63a5\u7d9a\u6642\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/9b03950e-5ed0-01cf-47bd-1d3dccb8da27.png)\n\n## \u88dc\u8db3\n\n### \u672c\u5f53\u306f\u9055\u3046\u3093\u3060\u65e5\u8a18\n\n\u672c\u5f53\u306f\u30b9\u30e9\u30a4\u30c0\u5909\u66f4\u6642\u306b\u30dd\u30fc\u30c8\u30aa\u30fc\u30d7\u30f3\u3092\u3057\u305f\u304b\u3063\u305f\u304c\u4e0d\u660e\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u305f\u3081\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\u3057\u305f\u3002\n\u30b9\u30e9\u30a4\u30c0\uff11\u3064\u3067\u30aa\u30fc\u30d7\u30f3\u307e\u3067\u3067\u304d\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u30b9\u30e9\u30a4\u30c0\u3092\u4f7f\u3046\u610f\u5473\u306f\u306a\u3055\u305d\u3046\u3002\n\n### TeraTerm\u306e\u7f60\n\nTeraTerm\u306f\u9001\u4fe1\u3092\u300cCR+LF\u300d\u306b\u3057\u5fd8\u308c\u308b\u3068\u5931\u6557\u3059\u308b\u306e\u3067\u3001\u78ba\u8a8d\u304c\u5fc5\u8981\u3002\n\n### java\n\njava\u306f\u307e\u3060\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002\u4ee5\u4e0b\u306f\n\n```\nif (myPort != null) {\n   myPort.stop(); \n}\n```\n\nGC\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u65b9\u304c\u3044\u3044\u306e\u3060\u308d\u3046\u304b\uff1f\n\n```\nif (myPort != null) {\n   myPort.stop(); \n   myPort = null; // for GC\n}\n```\n\n\u3042\u3068\u306e\u65b9\u3067myPort = new Serial()\u3057\u3066\u3044\u308b\u304b\u3089GC\u306f\u52d5\u304f\u306e\u3060\u308d\u3046\u304b?\n\n"}