{"context": "\u3053\u306e\u8a18\u4e8b\u306fSelenium/Appium Advent Calendar 2016\u306e10\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\u306f\u3058\u3081\u306b\nfreee\u682a\u5f0f\u4f1a\u793e\u3067\u30a2\u30d7\u30ea\u30a8\u30f3\u30b8\u30cb\u30a2\u3092\u3057\u3066\u3044\u308b @kompiro \u3068\u7533\u3057\u307e\u3059\u3002\u666e\u6bb5\u306f selenium \u3092\u30ac\u30ea\u30ac\u30ea\u52d5\u304b\u3057\u3066\u3044\u308b\u30a8\u30f3\u30b8\u30cb\u30a2\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001SitePrism \u3068\u3044\u3046gem\u3092\u4f7f\u3063\u3066 PageObjects \u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u307f\u305f\u3089\u3001\u60f3\u50cf\u4ee5\u4e0a\u306b\u6357\u3063\u305f\u306e\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nSitePrism \u306e\u7279\u5fb4\nSitePrism \u3068\u306f PageObject\u30d1\u30bf\u30fc\u30f3\u3092Capybara\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306eDSL \u3067\u3059\u3002 \u4f8b\u3048\u3070 google.com \u306e\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 SitePrism \u3092\u4f7f\u3063\u3066\u5b9a\u7fa9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n# Page\u306e\u5b9a\u7fa9\nclass Home < SitePrism::Page\n  set_url 'http://google.com'\n\n  element :search_field, \"input[name='q']\"\n  element :search_button, \"button[name='btnK']\"\n  elements :footer_links, \"#footer a\"\n  section :menu, MenuSection, \"#gbx3\"\n\n  def open_search_result\n    search_button.click\n    SearchResults.new  # \u6b21\u306e\u30da\u30fc\u30b8\u3092\u8fd4\u3059\n  end\nend\n\nclass SearchResults < SitePrism::Page\n  set_url_matcher /google.com\\/results\\?.*/\n\n  section :menu, MenuSection, \"#gbx3\"\n  sections :search_results, SearchResultSection, \"#results li\"\n\n  def search_result_links\n    search_results.map {|sr| sr.title['href']}\n  end\nend\n\n# Section\u306e\u5b9a\u7fa9: \nclass MenuSection < SitePrism::Section\n  element :search, \"a.search\"\n  element :images, \"a.image-search\"\n  element :maps, \"a.map-search\"\nend\n\nclass SearchResultSection < SitePrism::Section\n  element :title, \"a.title\"\n  element :blurb, \"span.result-description\"\nend\n\n\u3053\u306e\u3088\u3046\u306b Page \u3068 Section \u306e2\u3064\u3092\u7d44\u307f\u5408\u308f\u305b\u3089\u308c\u308b\u306e\u304c SitePrism \u306e\u7279\u5fb4\u3067\u3059\u3002 \nPage \u306f\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u305d\u306e\u30da\u30fc\u30b8\u3067\u884c\u3048\u308b\u64cd\u4f5c\u3092\u30e1\u30bd\u30c3\u30c9\u306b\u5b9a\u7fa9\u3057\u3001\u753b\u9762\u9077\u79fb\u3059\u308b\u5834\u5408\u306f\u6b21\u30da\u30fc\u30b8\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002\nSection \u306f\u8907\u6570\u306e\u30da\u30fc\u30b8\u3084\u3001\u4e00\u89a7\u30da\u30fc\u30b8\u7b49\u3067\u8907\u6570\u56de\u767b\u5834\u3059\u308b\u3088\u3046\u306a\u307e\u3068\u307e\u308a\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u8907\u6570\u767b\u5834\u3057\u306a\u3044\u3067\u3082\u4e00\u5b9a\u306e\u307e\u3068\u307e\u308a\u304c\u3042\u308b\u306e\u3067\u3042\u308c\u3070\u3001 Section \u3068\u3057\u3066\u5ba3\u8a00\u3057\u3066\u304a\u304f\u3068\u8aad\u307f\u3084\u3059\u3055\u304c\u5411\u4e0a\u3057\u307e\u3059\u3002\nPage \u3068 Section \u306b\u5b58\u5728\u3059\u308b\u8981\u7d20\u3092 element \u3001\u5b58\u5728\u3059\u308bSection\u3092 section \u3068\u3057\u3066\u5ba3\u8a00\u3057\u307e\u3059\u3002 \u305d\u308c\u305e\u308c\u306e\u8981\u7d20\u304c\u8907\u6570\u5b58\u5728\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3001 elements \u3001 sections \u3068\u8907\u6570\u5f62\u3067\u5ba3\u8a00\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\nelement \u3084 section \u306e\u6307\u5b9a\u306f #footer a \u306e\u3088\u3046\u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fCSS\u30bb\u30ec\u30af\u30bf\u3067\u884c\u3044\u307e\u3059\u3002\u3082\u3057\u3001CSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u304c\u7279\u5b9a\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001\u6b21\u306e\u3088\u3046\u306bxpath\u7b49\u3067\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\nelement :search_field, :xpath, '//*[@id=\"lst-ib\"]'\n\n\u305f\u3060\u3057\u3001:xpath\u7b49\u306e\u65b9\u6cd5\u3067\u6307\u5b9a\u3059\u308b\u3068\u30da\u30fc\u30b8\u306e\u69cb\u9020\u306b\u3088\u308a\u5f37\u304f\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3088\u308a\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u306b\u306f\u3001CSS\u30bb\u30ec\u30af\u30bf\u3067\u5ba3\u8a00\u3057\u307e\u3057\u3087\u3046\u3002\nSitePrism \u306e\u7279\u5fb4\u3092\u307e\u3068\u3081\u308b\u3068\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\nPageObject\u306e\u5ba3\u8a00\u304c\u7c21\u5358\n\u30da\u30fc\u30b8\u8981\u7d20\u306e\u6307\u5b9a\u3082 CSS\u30bb\u30ec\u30af\u30bf\u3084 xpath \u306a\u3069\u8907\u6570\u306e\u65b9\u6cd5\u3092\u5229\u7528\u3067\u304d\u308b\n\nSitePrism \u306e\u30d9\u30fc\u30b9\u306f Capybara \u306a\u306e\u3067\u3001\u3044\u3056\u3068\u3044\u3046\u6642 Capybara \u306e\u66f8\u304d\u65b9\u306b\u9003\u3052\u3089\u308c\u308b\n\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nSitePrism \u306f selenium-webdriver \u3068 capybara \u306b\u306e\u307f\u4f9d\u5b58\u3057\u307e\u3059\u3002\u30c6\u30b9\u30c6\u30a3\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u306f\u4f9d\u5b58\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u304a\u597d\u304d\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044\u3002\u30c6\u30b9\u30c8\u30b7\u30ca\u30ea\u30aa\u3092\u8aad\u307f\u3084\u3059\u3044Gherkin\u5f62\u5f0f\u3067\u5b9f\u88c5\u3057\u305f\u3044\u306a\u3089\u3001Turnip\u3084Cucumber\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\u30b7\u30f3\u30d7\u30eb\u306bRspec\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u5834\u5408\u306f\u6b21\u306e\u3088\u3046\u306b Gemfile \u3092\u5b9a\u7fa9\u3057\u3001 bundler \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\nsource 'http://rubygems.org'\n\ngem 'rspec', :require => 'spec'\ngem 'rspec-retry'\ngem 'selenium-webdriver', '~> 3.0.0'\n\ngem 'capybara'\ngem 'capybara-screenshot'\ngem 'site_prism'\n\nrspec-retry \u306f\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306b\u518d\u5b9f\u884c\u3057\u3066\u304f\u308c\u308bgem\u3001 capybara-screenshot \u306f\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306b\u30b9\u30af\u30ea\u30fc\u30f3\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u64ae\u5f71\u3059\u308bgem\u3067\u3059\u3002\u3069\u3061\u3089\u3082\u6709\u7528\u306a\u306e\u3067\u3001\u4e00\u7dd2\u306b\u5165\u308c\u3066\u304a\u304f\u306e\u304c\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\nPageObject\u306e\u5b9a\u7fa9\nSitePrism\u3092\u3064\u304b\u3063\u305f\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5b9a\u7fa9\u306f\u8868\u73fe\u529b\u304c\u3042\u308b\u5206\u8907\u96d1\u3067\u3059\u3002README\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u5185\u5bb9\u3092\u3056\u3063\u304f\u308a\u7ffb\u8a33\u3057\u3001\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\nPage\u30e2\u30c7\u30eb\nPage\u30e2\u30c7\u30eb\u306b\u306f2\u3064\u306e\u5ba3\u8a00\u3092\u884c\u3044\u307e\u3059\u3002\n\nURL\u306e\u5ba3\u8a00\n\u30da\u30fc\u30b8\u5185\u306e\u8981\u7d20\u306e\u5ba3\u8a00\n\n\u7a7a\u306ePage\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\nclass Home < SitePrism::Page\nend\n\n\nURL\u306e\u5ba3\u8a00\nURL\u306e\u6307\u5b9a\u306b\u306f#set_url\u53ca\u3073#set_url_matcher\u3092\u5ba3\u8a00\u3057\u307e\u3059\u3002\nclass Home < SitePrism::Page\n  set_url \"http://www.google.com\"\nend\n\nCapybara\u306e\u8a2d\u5b9a\u3067\u3042\u308bapp_host\u3092\u5ba3\u8a00\u3057\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u30db\u30b9\u30c8\u540d\u307e\u3067\u3092\u7701\u7565\u3067\u304d\u307e\u3059\u3002\nclass Home < SitePrism::Page\n  set_url \"/home.htm\"\nend\n\nPage\u30e2\u30c7\u30eb\u306e URL\u306e\u5ba3\u8a00 \u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\u30da\u30fc\u30b8\u8aad\u8fbc\u3084\u691c\u8a3c\u3067\u5229\u7528\u3057\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u5ba3\u8a00\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u30da\u30fc\u30b8\u3092\u958b\u304f\n\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3001\u5ba3\u8a00\u3057\u305fURL\u3092\u958b\u304d\u307e\u3059\u3002\n@home = Home.new\n@home.load\n\n\n\u30da\u30fc\u30b8\u9077\u79fb\u5f8c\u3001\u610f\u56f3\u3057\u305fURL\u3092\u958b\u3044\u3066\u3044\u308b\u304b\u691c\u8a3c\u3059\u308b\nexpect(Home.new).to be_displayed\n\n\nURL\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\nSitePrism\u306eURL\u306b\u306f Addressable gem \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u6b21\u306e\u3088\u3046\u306b\u5ba3\u8a00\u3067\u304d\u307e\u3059\u3002\nclass UserProfile < SitePrism::Page\n  set_url \"/users{/username}\"\nend\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5ba3\u8a00\u3057\u305f\u5834\u5408\u3001\u30da\u30fc\u30b8\u3092\u958b\u3044\u305f\u308a\u3001\u691c\u8a3c\u306f\u6b21\u306e\u3088\u3046\u306b\u884c\u3048\u307e\u3059\u3002\n@user_profile = UserProfile.new\n@user_profile.load #=> /users\n@user_profile.load(username: 'kompiro') #=> loads /users/kompiro\n\nexpect(@user_profile).to be_displayed(username: 'kompiro')\n\n\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u305f\u5834\u5408\u3001\u30cf\u30c3\u30b7\u30e5\u3067\u5024\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nclass Search < SitePrism::Page\n  set_url \"/search{?query*}\"\nend\n\n@search = Search.new\n@search.load(query: 'simple') #=> loads /search?query=simple\n@search.load(query: {color: 'red', text: 'blue'}) #=> loads /search?color=red&text=blue\n\nexpect(@ search.url_matches['query']['color']).to eq \"red\"\n\n\n\u73fe\u5728\u306eURL\u306e\u53d6\u5f97\u3059\u308b\n@home = Home.new\n@home.load\n@home.current_url # => http://www.google.com\n\n\n\u73fe\u5728\u306e\u30da\u30fc\u30b8\u30bf\u30a4\u30c8\u30eb\u3092\u53d6\u5f97\u3059\u308b\n@home = Home.new\n@home.load\n@home.title # => Google\n\n\nElement\u30e2\u30c7\u30eb\nPage\u30e2\u30c7\u30eb\u306f\u5358\u4e00\u53ca\u3073\u8907\u6570\u306eElement(\u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u3001\u30dc\u30bf\u30f3\u3001\u30b3\u30f3\u30dc\u7b49)\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002\u5358\u4e00\u306eElement\u306e\u4f8b\u306f\u691c\u7d22\u30d5\u30a3\u30fc\u30eb\u30c9\u3084\u30ed\u30b4\u3067\u3001\u8907\u6570\u306eElement\u306e\u4f8b\u306f\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u3084\u30ab\u30eb\u30fc\u30bb\u30eb\u306e\u753b\u50cf\u3067\u3059\u3002\n\n\u5358\u4e00\u306eElement\u30e2\u30c7\u30eb\n\u5358\u4e00\u306eElement\u30e2\u30c7\u30eb\u306f\u7c21\u5358\u306b\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\nclass Home < SitePrism::Page\n  element :search_field, \"input[name='q']\"\nend\n\n\u3053\u3053\u3067\u306f#element\u30e1\u30bd\u30c3\u30c9\u306f2\u3064\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u3063\u3066\u3044\u307e\u3059\u3002\u540d\u524d\u3068\u3057\u3066\u30b7\u30f3\u30dc\u30eb\u3001\u305d\u306e\u8981\u7d20\u3092\u6307\u5b9a\u3059\u308bCSS\u30bb\u30ec\u30af\u30bf\u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u53d7\u3051\u53d6\u3063\u3066\u3044\u307e\u3059\u3002\n\nElement\u304b\u3089\u5024\u3092\u53d6\u5f97/\u5024\u3092\u8a2d\u5b9a\u3059\u308b\nclass Home < SitePrism::Page\n  set_url \"http://www.google.com\"\n\n  element :search_field, \"input[name='q']\"\nend\n\n@home = Home.new\n@home.load\n\n@home.search_field #=> \u5b58\u5728\u3057\u3066\u3044\u308c\u3070Capybara::Element\u304c\u8fd4\u3063\u3066\u304f\u308b\n@home.search_field.set \"\u691c\u7d22\u6587\u5b57\u5217\" #=> Capybara\u306eAPI\u3092\u305d\u306e\u307e\u307e\u4f7f\u3048\u308b\n@home.search_field.text #=> #text\u306fCapybara\u306eAPI\u3067\u6587\u5b57\u5217\u3092\u8fd4\u3059\n\n\n\u8981\u7d20\u306e\u5b58\u5728\u3092\u691c\u8a3c\n@home.has_search_field? #=> \u5b58\u5728\u3059\u308c\u3070true\nexpect(@home).to have_search_field #=> RSpec Matcher\u3082Element\u3092\u5ba3\u8a00\u3059\u308c\u3070\u4f5c\u6210\u3055\u308c\u308b\n\n\n\u8981\u7d20\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u691c\u8a3c\n@home.has_no_search_field? #=> \u5b58\u5728\u3057\u306a\u3051\u308c\u3070true\nexpect(@home).to have_no_search_field #=> RSpec Matcher\u3082Element\u3092\u5ba3\u8a00\u3059\u308c\u3070\u4f5c\u6210\u3055\u308c\u308b\n\n\n\u8981\u7d20\u306e\u4f5c\u6210\u5f85\u3061\najax\u306a\u3069\u3067\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u3092\u5f85\u3064\u6642\u306b\u4fbf\u5229\n@home = Home.new\n@home.load\n@home.wait_for_search_field # Capybara.default_wait_max_time \u3060\u3051\u307e\u3064\n@home.wait_for_search_field(10) # 10\u79d2\u307e\u3064\n\n\n\u8981\u7d20\u306e\u8868\u793a/\u975e\u8868\u793a\u5f85\u3061\n#wait_until_<element_name>_visible\u53ca\u3073#wait_until_<element_name>_invisible\u3067\u8868\u793a\u3001\u975e\u8868\u793a\u3092\u5f85\u3064\n@home.wait_until_search_field_visible #=> Capybara.default_wait_max_time \u8868\u793a\u5f85\u3061\n@home.wait_until_search_field_visible(10) #=> 10\u79d2\u8868\u793a\u5f85\u3061\n@home.wait_until_search_field_invisible #=> Capybara.default_wait_max_time \u975e\u8868\u793a\u5f85\u3061\n@home.wait_until_search_field_invisible(10) #=> 10\u79d2\u975e\u8868\u793a\u5f85\u3061\n\n\nCSS Selectors vs. XPath Expressions\nclass Home < SitePrism::Page\n  # CSS Selector:\n  element :first_name, \"div#signup input[name='first-name']\"\n\n  # XPath expression:\n  element :first_name, :xpath, \"//div[@id='signup']//input[@name='first-name']\"\nend\n\n\u7279\u5fb4\u306e\u3068\u3053\u308d\u3067\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u3001XPath\u3067\u8a18\u8ff0\u3059\u308b\u3068DOM\u69cb\u9020\u306b\u3088\u308a\u5f37\u304f\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3046\u306e\u3067CSS Selector\u3067\u66f8\u304f\u307b\u3046\u304c\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\n\u8907\u6570\u306eElement\n\u8907\u6570\u306eElement\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f #elements \u3067\u5ba3\u8a00\u3057\u307e\u3057\u3087\u3046\u3002\nclass Friends < SitePrism::Page\n  elements :names, \"ul#names li a\"\nend\n\n\n\u8907\u6570Element\u306e\u6271\u3044\u65b9\n@friends_page = Friends.new\n# ...\n@friends_page.names #=> [<Capybara::Element>, <Capybara::Element>, <Capybara::Element>]\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u914d\u5217\u3067\u53d6\u308c\u308b\u306e\u3067\u3001\u691c\u8a3c\u3082\u6b21\u306e\u3088\u3046\u306b\u884c\u3048\u307e\u3059\u3002\n@friends_page.names.each {|name| puts name.text}\nexpect(@friends_page.names.map {|name| name.text}.to eq [\"Alice\", \"Bob\", \"Fred\"]\nexpect(@friends_page.names.size).to eq 3\nexpect(@friends_page).to have(3).names\n\n#elements\u3082 #element\u3068\u540c\u69d8\u3001 #has_<elements name>? \u3001 #wait_for_<elements name>\u7b49\u304c\u81ea\u52d5\u3067\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\n\u5ba3\u8a00\u3057\u305fElement\u304c\u5168\u90e8\u3042\u308b\u304b\u691c\u8a3c\u3059\u308b\u306b\u306f\uff1f\n#all_there? \u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3068\u3001 be_all_there\u3068\u3044\u3046Matcher\u304c\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u691c\u8a3c\u3057\u307e\u3059\u3002\n\nSection\u30e2\u30c7\u30eb\nSection\u30e2\u30c7\u30eb\u306f\u30da\u30fc\u30b8\u5185\u306e\u307e\u3068\u307e\u308a\u3054\u3068\u306b\u5ba3\u8a00\u3057\u307e\u3059\u3002\u7a7a\u306eSection\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\nclass MenuSection < SitePrism::Section\nend\n\n\nPage\u30e2\u30c7\u30eb\u306bSection\u3092\u5b9a\u7fa9\u3059\u308b\nPage\u30e2\u30c7\u30eb\u306bSection\u3092\u5b9a\u7fa9\u3059\u308b\u306b\u306f\u6b21\u306e\u3088\u3046\u306b\u5ba3\u8a00\u3057\u307e\u3059\u3002\nclass Home < SitePrism::Page\n  section :menu, MenuSection, \"#gbx3\"\nend\n\n#element\u3068#section\u306e\u9055\u3044\u306f\u3001\u7b2c2\u5f15\u6570\u306bSection\u30e2\u30c7\u30eb\u306e\u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3060\u3051\u3067\u3059\u30021\u30da\u30fc\u30b8\u5185\u306b\u540c\u3058Section\u304c\u8907\u6570\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f#sections\u3068\u5ba3\u8a00\u3059\u308c\u3070\u826f\u304f\u3001XPath\u3067\u6307\u5b9a\u3057\u305f\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u7b2c3\u5f15\u6570\u3092:xpath\u3001\u7b2c4\u5f15\u6570\u306bxpath\u8868\u73fe\u3092\u6587\u5b57\u5217\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\nSection\u30e2\u30c7\u30eb\u306fElement\u30e2\u30c7\u30eb\u306e\u3088\u3046\u306aPage\u5185\u306e\u8981\u7d20\u3068\u3057\u3066\u306e\u6a5f\u80fd\u3068Page\u30e2\u30c7\u30eb\u306e\u30b3\u30f3\u30c6\u30ca\u7684\u306a\u6a5f\u80fd\u4e21\u65b9\u306e\u8981\u7d20\u3092\u517c\u306d\u305f\u30e2\u30c7\u30eb\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001Section\u306e\u6271\u3044\u65b9\u306fElement\u306e\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u3068\u540c\u3058\u304f\u3001\u307e\u305fSection\u5185\u306eElement\u3084Section\u306e\u5ba3\u8a00\u306fPage\u3068\u540c\u3058\u306a\u306e\u3067\u5272\u611b\u3057\u307e\u3059\u3002\n\n\u7121\u540dSection\nclass Home < SitePrism::Page\n  section :menu, '.menu' do\n    element :title, '.title'\n    elements :items, 'a'\n  end\nend\n\nSection\u306f\u30af\u30e9\u30b9\u3068\u3057\u3066\u5ba3\u8a00\u3057\u306a\u304f\u3066\u3082\u3001\u30d6\u30ed\u30c3\u30af\u3068\u3057\u3066\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\n\n\u307e\u3068\u3081\nRuby\u3067PageObjects\u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306egem\u3001SitePrism\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u50d5\u306f\u304b\u308c\u3053\u308c4\u56de\u307b\u3069GUI\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5316\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u95a2\u308f\u3063\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u304c\u3001SitePrism\u3092\u5229\u7528\u3057\u305f\u6642\u307b\u3069\u308f\u304b\u308a\u3084\u3059\u304f\u5b9f\u88c5\u304c\u3067\u304d\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3082\u3057Ruby\u3092\u4f7f\u3063\u3066E2E\u30c6\u30b9\u30c8\u3092\u884c\u3046\u306e\u3067\u3042\u308c\u3070\u662f\u975e\u5c0e\u5165\u3092\u691c\u8a0e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\u8a18\u4e8b\u306f[Selenium/Appium Advent Calendar 2016](http://qiita.com/advent-calendar/2016/selenium_and_appium)\u306e10\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n## \u306f\u3058\u3081\u306b\n\n[freee\u682a\u5f0f\u4f1a\u793e](https://corp.freee.co.jp/)\u3067\u30a2\u30d7\u30ea\u30a8\u30f3\u30b8\u30cb\u30a2\u3092\u3057\u3066\u3044\u308b @kompiro \u3068\u7533\u3057\u307e\u3059\u3002\u666e\u6bb5\u306f [selenium](http://www.seleniumhq.org/) \u3092\u30ac\u30ea\u30ac\u30ea\u52d5\u304b\u3057\u3066\u3044\u308b\u30a8\u30f3\u30b8\u30cb\u30a2\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001[SitePrism](https://github.com/natritmeyer/site_prism) \u3068\u3044\u3046gem\u3092\u4f7f\u3063\u3066 PageObjects \u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u307f\u305f\u3089\u3001\u60f3\u50cf\u4ee5\u4e0a\u306b\u6357\u3063\u305f\u306e\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n## SitePrism \u306e\u7279\u5fb4\n\nSitePrism \u3068\u306f `PageObject\u30d1\u30bf\u30fc\u30f3\u3092Capybara\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306eDSL` \u3067\u3059\u3002 \u4f8b\u3048\u3070 `google.com` \u306e\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 SitePrism \u3092\u4f7f\u3063\u3066\u5b9a\u7fa9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```ruby\n# Page\u306e\u5b9a\u7fa9\nclass Home < SitePrism::Page\n  set_url 'http://google.com'\n\n  element :search_field, \"input[name='q']\"\n  element :search_button, \"button[name='btnK']\"\n  elements :footer_links, \"#footer a\"\n  section :menu, MenuSection, \"#gbx3\"\n  \n  def open_search_result\n    search_button.click\n    SearchResults.new  # \u6b21\u306e\u30da\u30fc\u30b8\u3092\u8fd4\u3059\n  end\nend\n\nclass SearchResults < SitePrism::Page\n  set_url_matcher /google.com\\/results\\?.*/\n\n  section :menu, MenuSection, \"#gbx3\"\n  sections :search_results, SearchResultSection, \"#results li\"\n\n  def search_result_links\n    search_results.map {|sr| sr.title['href']}\n  end\nend\n\n# Section\u306e\u5b9a\u7fa9: \nclass MenuSection < SitePrism::Section\n  element :search, \"a.search\"\n  element :images, \"a.image-search\"\n  element :maps, \"a.map-search\"\nend\n\nclass SearchResultSection < SitePrism::Section\n  element :title, \"a.title\"\n  element :blurb, \"span.result-description\"\nend\n```\n\n\u3053\u306e\u3088\u3046\u306b `Page` \u3068 `Section` \u306e2\u3064\u3092\u7d44\u307f\u5408\u308f\u305b\u3089\u308c\u308b\u306e\u304c `SitePrism` \u306e\u7279\u5fb4\u3067\u3059\u3002 \n\n`Page` \u306f\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u305d\u306e\u30da\u30fc\u30b8\u3067\u884c\u3048\u308b\u64cd\u4f5c\u3092\u30e1\u30bd\u30c3\u30c9\u306b\u5b9a\u7fa9\u3057\u3001\u753b\u9762\u9077\u79fb\u3059\u308b\u5834\u5408\u306f\u6b21\u30da\u30fc\u30b8\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n`Section` \u306f\u8907\u6570\u306e\u30da\u30fc\u30b8\u3084\u3001\u4e00\u89a7\u30da\u30fc\u30b8\u7b49\u3067\u8907\u6570\u56de\u767b\u5834\u3059\u308b\u3088\u3046\u306a\u307e\u3068\u307e\u308a\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u8907\u6570\u767b\u5834\u3057\u306a\u3044\u3067\u3082\u4e00\u5b9a\u306e\u307e\u3068\u307e\u308a\u304c\u3042\u308b\u306e\u3067\u3042\u308c\u3070\u3001 `Section` \u3068\u3057\u3066\u5ba3\u8a00\u3057\u3066\u304a\u304f\u3068\u8aad\u307f\u3084\u3059\u3055\u304c\u5411\u4e0a\u3057\u307e\u3059\u3002\n\n`Page` \u3068 `Section` \u306b\u5b58\u5728\u3059\u308b\u8981\u7d20\u3092 `element` \u3001\u5b58\u5728\u3059\u308bSection\u3092 `section` \u3068\u3057\u3066\u5ba3\u8a00\u3057\u307e\u3059\u3002 \u305d\u308c\u305e\u308c\u306e\u8981\u7d20\u304c\u8907\u6570\u5b58\u5728\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3001 `elements` \u3001 `sections` \u3068\u8907\u6570\u5f62\u3067\u5ba3\u8a00\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n`element` \u3084 `section` \u306e\u6307\u5b9a\u306f `#footer a` \u306e\u3088\u3046\u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fCSS\u30bb\u30ec\u30af\u30bf\u3067\u884c\u3044\u307e\u3059\u3002\u3082\u3057\u3001CSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u304c\u7279\u5b9a\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001\u6b21\u306e\u3088\u3046\u306bxpath\u7b49\u3067\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n```\nelement :search_field, :xpath, '//*[@id=\"lst-ib\"]'\n```\n\n\u305f\u3060\u3057\u3001`:xpath`\u7b49\u306e\u65b9\u6cd5\u3067\u6307\u5b9a\u3059\u308b\u3068\u30da\u30fc\u30b8\u306e\u69cb\u9020\u306b\u3088\u308a\u5f37\u304f\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3088\u308a\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u306b\u306f\u3001CSS\u30bb\u30ec\u30af\u30bf\u3067\u5ba3\u8a00\u3057\u307e\u3057\u3087\u3046\u3002\n\n`SitePrism` \u306e\u7279\u5fb4\u3092\u307e\u3068\u3081\u308b\u3068\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n- PageObject\u306e\u5ba3\u8a00\u304c\u7c21\u5358\n- \u30da\u30fc\u30b8\u8981\u7d20\u306e\u6307\u5b9a\u3082 CSS\u30bb\u30ec\u30af\u30bf\u3084 xpath \u306a\u3069\u8907\u6570\u306e\u65b9\u6cd5\u3092\u5229\u7528\u3067\u304d\u308b\n- `SitePrism` \u306e\u30d9\u30fc\u30b9\u306f [Capybara](http://teamcapybara.github.io/capybara/) \u306a\u306e\u3067\u3001\u3044\u3056\u3068\u3044\u3046\u6642 Capybara \u306e\u66f8\u304d\u65b9\u306b\u9003\u3052\u3089\u308c\u308b\n\n\n## \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nSitePrism \u306f `selenium-webdriver` \u3068 `capybara` \u306b\u306e\u307f\u4f9d\u5b58\u3057\u307e\u3059\u3002\u30c6\u30b9\u30c6\u30a3\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u306f\u4f9d\u5b58\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u304a\u597d\u304d\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044\u3002\u30c6\u30b9\u30c8\u30b7\u30ca\u30ea\u30aa\u3092\u8aad\u307f\u3084\u3059\u3044[Gherkin\u5f62\u5f0f](https://github.com/cucumber/cucumber/wiki/Gherkin)\u3067\u5b9f\u88c5\u3057\u305f\u3044\u306a\u3089\u3001[Turnip](https://github.com/jnicklas/turnip)\u3084[Cucumber](https://cucumber.io/)\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002\u30b7\u30f3\u30d7\u30eb\u306bRspec\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u5834\u5408\u306f\u6b21\u306e\u3088\u3046\u306b `Gemfile` \u3092\u5b9a\u7fa9\u3057\u3001 `bundler` \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\n\n```Gemfile\nsource 'http://rubygems.org'\n\ngem 'rspec', :require => 'spec'\ngem 'rspec-retry'\ngem 'selenium-webdriver', '~> 3.0.0'\n\ngem 'capybara'\ngem 'capybara-screenshot'\ngem 'site_prism'\n```\n\n[rspec-retry](https://github.com/NoRedInk/rspec-retry) \u306f\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306b\u518d\u5b9f\u884c\u3057\u3066\u304f\u308c\u308bgem\u3001 [capybara-screenshot](https://github.com/mattheworiordan/capybara-screenshot) \u306f\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306b\u30b9\u30af\u30ea\u30fc\u30f3\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u64ae\u5f71\u3059\u308bgem\u3067\u3059\u3002\u3069\u3061\u3089\u3082\u6709\u7528\u306a\u306e\u3067\u3001\u4e00\u7dd2\u306b\u5165\u308c\u3066\u304a\u304f\u306e\u304c\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\n## PageObject\u306e\u5b9a\u7fa9\n\nSitePrism\u3092\u3064\u304b\u3063\u305f\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5b9a\u7fa9\u306f\u8868\u73fe\u529b\u304c\u3042\u308b\u5206\u8907\u96d1\u3067\u3059\u3002[README](https://github.com/natritmeyer/site_prism#introduction-to-the-page-object-model)\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u5185\u5bb9\u3092\u3056\u3063\u304f\u308a\u7ffb\u8a33\u3057\u3001\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n### Page\u30e2\u30c7\u30eb\n\nPage\u30e2\u30c7\u30eb\u306b\u306f2\u3064\u306e\u5ba3\u8a00\u3092\u884c\u3044\u307e\u3059\u3002\n\n- URL\u306e\u5ba3\u8a00\n- \u30da\u30fc\u30b8\u5185\u306e\u8981\u7d20\u306e\u5ba3\u8a00\n\n\u7a7a\u306ePage\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```ruby\nclass Home < SitePrism::Page\nend\n```\n\n#### URL\u306e\u5ba3\u8a00\n\nURL\u306e\u6307\u5b9a\u306b\u306f`#set_url`\u53ca\u3073`#set_url_matcher`\u3092\u5ba3\u8a00\u3057\u307e\u3059\u3002\n\n```ruby\nclass Home < SitePrism::Page\n  set_url \"http://www.google.com\"\nend\n```\n\nCapybara\u306e\u8a2d\u5b9a\u3067\u3042\u308b`app_host`\u3092\u5ba3\u8a00\u3057\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u30db\u30b9\u30c8\u540d\u307e\u3067\u3092\u7701\u7565\u3067\u304d\u307e\u3059\u3002\n\n```ruby\nclass Home < SitePrism::Page\n  set_url \"/home.htm\"\nend\n```\n\nPage\u30e2\u30c7\u30eb\u306e `URL\u306e\u5ba3\u8a00` \u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\u30da\u30fc\u30b8\u8aad\u8fbc\u3084\u691c\u8a3c\u3067\u5229\u7528\u3057\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u5ba3\u8a00\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n##### \u30da\u30fc\u30b8\u3092\u958b\u304f\n\n\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3001\u5ba3\u8a00\u3057\u305fURL\u3092\u958b\u304d\u307e\u3059\u3002\n\n```\n@home = Home.new\n@home.load\n```\n\n##### \u30da\u30fc\u30b8\u9077\u79fb\u5f8c\u3001\u610f\u56f3\u3057\u305fURL\u3092\u958b\u3044\u3066\u3044\u308b\u304b\u691c\u8a3c\u3059\u308b\n\n```\nexpect(Home.new).to be_displayed\n```\n\n#### URL\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\n\nSitePrism\u306eURL\u306b\u306f [Addressable](https://github.com/sporkmonger/addressable) gem \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u6b21\u306e\u3088\u3046\u306b\u5ba3\u8a00\u3067\u304d\u307e\u3059\u3002\n\n```ruby\nclass UserProfile < SitePrism::Page\n  set_url \"/users{/username}\"\nend\n```\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5ba3\u8a00\u3057\u305f\u5834\u5408\u3001\u30da\u30fc\u30b8\u3092\u958b\u3044\u305f\u308a\u3001\u691c\u8a3c\u306f\u6b21\u306e\u3088\u3046\u306b\u884c\u3048\u307e\u3059\u3002\n\n```ruby\n@user_profile = UserProfile.new\n@user_profile.load #=> /users\n@user_profile.load(username: 'kompiro') #=> loads /users/kompiro\n\nexpect(@user_profile).to be_displayed(username: 'kompiro')\n```\n\n\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u305f\u5834\u5408\u3001\u30cf\u30c3\u30b7\u30e5\u3067\u5024\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```ruby\nclass Search < SitePrism::Page\n  set_url \"/search{?query*}\"\nend\n\n@search = Search.new\n@search.load(query: 'simple') #=> loads /search?query=simple\n@search.load(query: {color: 'red', text: 'blue'}) #=> loads /search?color=red&text=blue\n\nexpect(@ search.url_matches['query']['color']).to eq \"red\"\n```\n\n#### \u73fe\u5728\u306eURL\u306e\u53d6\u5f97\u3059\u308b\n\n```ruby\n@home = Home.new\n@home.load\n@home.current_url # => http://www.google.com\n```\n\n#### \u73fe\u5728\u306e\u30da\u30fc\u30b8\u30bf\u30a4\u30c8\u30eb\u3092\u53d6\u5f97\u3059\u308b\n\n```ruby\n@home = Home.new\n@home.load\n@home.title # => Google\n```\n\n### Element\u30e2\u30c7\u30eb\n\nPage\u30e2\u30c7\u30eb\u306f\u5358\u4e00\u53ca\u3073\u8907\u6570\u306eElement(\u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u3001\u30dc\u30bf\u30f3\u3001\u30b3\u30f3\u30dc\u7b49)\u3067\u69cb\u6210\u3055\u308c\u307e\u3059\u3002\u5358\u4e00\u306eElement\u306e\u4f8b\u306f\u691c\u7d22\u30d5\u30a3\u30fc\u30eb\u30c9\u3084\u30ed\u30b4\u3067\u3001\u8907\u6570\u306eElement\u306e\u4f8b\u306f\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u3084\u30ab\u30eb\u30fc\u30bb\u30eb\u306e\u753b\u50cf\u3067\u3059\u3002\n\n#### \u5358\u4e00\u306eElement\u30e2\u30c7\u30eb\n\n\u5358\u4e00\u306eElement\u30e2\u30c7\u30eb\u306f\u7c21\u5358\u306b\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n\n```ruby\nclass Home < SitePrism::Page\n  element :search_field, \"input[name='q']\"\nend\n```\n\n\u3053\u3053\u3067\u306f`#element`\u30e1\u30bd\u30c3\u30c9\u306f2\u3064\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u3063\u3066\u3044\u307e\u3059\u3002\u540d\u524d\u3068\u3057\u3066\u30b7\u30f3\u30dc\u30eb\u3001\u305d\u306e\u8981\u7d20\u3092\u6307\u5b9a\u3059\u308bCSS\u30bb\u30ec\u30af\u30bf\u3092\u6587\u5b57\u5217\u3068\u3057\u3066\u53d7\u3051\u53d6\u3063\u3066\u3044\u307e\u3059\u3002\n\n##### Element\u304b\u3089\u5024\u3092\u53d6\u5f97/\u5024\u3092\u8a2d\u5b9a\u3059\u308b\n\n```ruby\nclass Home < SitePrism::Page\n  set_url \"http://www.google.com\"\n\n  element :search_field, \"input[name='q']\"\nend\n\n@home = Home.new\n@home.load\n\n@home.search_field #=> \u5b58\u5728\u3057\u3066\u3044\u308c\u3070Capybara::Element\u304c\u8fd4\u3063\u3066\u304f\u308b\n@home.search_field.set \"\u691c\u7d22\u6587\u5b57\u5217\" #=> Capybara\u306eAPI\u3092\u305d\u306e\u307e\u307e\u4f7f\u3048\u308b\n@home.search_field.text #=> #text\u306fCapybara\u306eAPI\u3067\u6587\u5b57\u5217\u3092\u8fd4\u3059\n```\n\n##### \u8981\u7d20\u306e\u5b58\u5728\u3092\u691c\u8a3c\n\n```ruby\n@home.has_search_field? #=> \u5b58\u5728\u3059\u308c\u3070true\nexpect(@home).to have_search_field #=> RSpec Matcher\u3082Element\u3092\u5ba3\u8a00\u3059\u308c\u3070\u4f5c\u6210\u3055\u308c\u308b\n```\n\n##### \u8981\u7d20\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u691c\u8a3c\n\n```ruby\n@home.has_no_search_field? #=> \u5b58\u5728\u3057\u306a\u3051\u308c\u3070true\nexpect(@home).to have_no_search_field #=> RSpec Matcher\u3082Element\u3092\u5ba3\u8a00\u3059\u308c\u3070\u4f5c\u6210\u3055\u308c\u308b\n```\n\n##### \u8981\u7d20\u306e\u4f5c\u6210\u5f85\u3061\n\najax\u306a\u3069\u3067\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u3092\u5f85\u3064\u6642\u306b\u4fbf\u5229\n\n```ruby\n@home = Home.new\n@home.load\n@home.wait_for_search_field # Capybara.default_wait_max_time \u3060\u3051\u307e\u3064\n@home.wait_for_search_field(10) # 10\u79d2\u307e\u3064\n```\n\n##### \u8981\u7d20\u306e\u8868\u793a/\u975e\u8868\u793a\u5f85\u3061\n\n`#wait_until_<element_name>_visible`\u53ca\u3073`#wait_until_<element_name>_invisible`\u3067\u8868\u793a\u3001\u975e\u8868\u793a\u3092\u5f85\u3064\n\n```ruby\n@home.wait_until_search_field_visible #=> Capybara.default_wait_max_time \u8868\u793a\u5f85\u3061\n@home.wait_until_search_field_visible(10) #=> 10\u79d2\u8868\u793a\u5f85\u3061\n@home.wait_until_search_field_invisible #=> Capybara.default_wait_max_time \u975e\u8868\u793a\u5f85\u3061\n@home.wait_until_search_field_invisible(10) #=> 10\u79d2\u975e\u8868\u793a\u5f85\u3061\n```\n\n##### CSS Selectors vs. XPath Expressions\n\n```ruby\nclass Home < SitePrism::Page\n  # CSS Selector:\n  element :first_name, \"div#signup input[name='first-name']\"\n\n  # XPath expression:\n  element :first_name, :xpath, \"//div[@id='signup']//input[@name='first-name']\"\nend\n```\n\n\u7279\u5fb4\u306e\u3068\u3053\u308d\u3067\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u3001XPath\u3067\u8a18\u8ff0\u3059\u308b\u3068DOM\u69cb\u9020\u306b\u3088\u308a\u5f37\u304f\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3046\u306e\u3067CSS Selector\u3067\u66f8\u304f\u307b\u3046\u304c\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\n#### \u8907\u6570\u306eElement\n\n\u8907\u6570\u306eElement\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f `#elements` \u3067\u5ba3\u8a00\u3057\u307e\u3057\u3087\u3046\u3002\n\n```ruby\nclass Friends < SitePrism::Page\n  elements :names, \"ul#names li a\"\nend\n```\n\n##### \u8907\u6570Element\u306e\u6271\u3044\u65b9\n\n```ruby\n@friends_page = Friends.new\n# ...\n@friends_page.names #=> [<Capybara::Element>, <Capybara::Element>, <Capybara::Element>]\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u914d\u5217\u3067\u53d6\u308c\u308b\u306e\u3067\u3001\u691c\u8a3c\u3082\u6b21\u306e\u3088\u3046\u306b\u884c\u3048\u307e\u3059\u3002\n\n```ruby\n@friends_page.names.each {|name| puts name.text}\nexpect(@friends_page.names.map {|name| name.text}.to eq [\"Alice\", \"Bob\", \"Fred\"]\nexpect(@friends_page.names.size).to eq 3\nexpect(@friends_page).to have(3).names\n```\n\n`#elements`\u3082 `#element`\u3068\u540c\u69d8\u3001 `#has_<elements name>?` \u3001 `#wait_for_<elements name>`\u7b49\u304c\u81ea\u52d5\u3067\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\n#### \u5ba3\u8a00\u3057\u305fElement\u304c\u5168\u90e8\u3042\u308b\u304b\u691c\u8a3c\u3059\u308b\u306b\u306f\uff1f\n\n`#all_there?` \u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3068\u3001 `be_all_there`\u3068\u3044\u3046Matcher\u304c\u30da\u30fc\u30b8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u691c\u8a3c\u3057\u307e\u3059\u3002\n\n### Section\u30e2\u30c7\u30eb\n\nSection\u30e2\u30c7\u30eb\u306f\u30da\u30fc\u30b8\u5185\u306e\u307e\u3068\u307e\u308a\u3054\u3068\u306b\u5ba3\u8a00\u3057\u307e\u3059\u3002\u7a7a\u306eSection\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```ruby\nclass MenuSection < SitePrism::Section\nend\n```\n\n#### Page\u30e2\u30c7\u30eb\u306bSection\u3092\u5b9a\u7fa9\u3059\u308b\n\nPage\u30e2\u30c7\u30eb\u306bSection\u3092\u5b9a\u7fa9\u3059\u308b\u306b\u306f\u6b21\u306e\u3088\u3046\u306b\u5ba3\u8a00\u3057\u307e\u3059\u3002\n\n```ruby\nclass Home < SitePrism::Page\n  section :menu, MenuSection, \"#gbx3\"\nend\n```\n\n`#element`\u3068`#section`\u306e\u9055\u3044\u306f\u3001\u7b2c2\u5f15\u6570\u306bSection\u30e2\u30c7\u30eb\u306e\u30af\u30e9\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3060\u3051\u3067\u3059\u30021\u30da\u30fc\u30b8\u5185\u306b\u540c\u3058Section\u304c\u8907\u6570\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f`#sections`\u3068\u5ba3\u8a00\u3059\u308c\u3070\u826f\u304f\u3001XPath\u3067\u6307\u5b9a\u3057\u305f\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u7b2c3\u5f15\u6570\u3092:xpath\u3001\u7b2c4\u5f15\u6570\u306bxpath\u8868\u73fe\u3092\u6587\u5b57\u5217\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nSection\u30e2\u30c7\u30eb\u306fElement\u30e2\u30c7\u30eb\u306e\u3088\u3046\u306aPage\u5185\u306e\u8981\u7d20\u3068\u3057\u3066\u306e\u6a5f\u80fd\u3068Page\u30e2\u30c7\u30eb\u306e\u30b3\u30f3\u30c6\u30ca\u7684\u306a\u6a5f\u80fd\u4e21\u65b9\u306e\u8981\u7d20\u3092\u517c\u306d\u305f\u30e2\u30c7\u30eb\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001Section\u306e\u6271\u3044\u65b9\u306fElement\u306e\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u3068\u540c\u3058\u304f\u3001\u307e\u305fSection\u5185\u306eElement\u3084Section\u306e\u5ba3\u8a00\u306fPage\u3068\u540c\u3058\u306a\u306e\u3067\u5272\u611b\u3057\u307e\u3059\u3002\n\n##### \u7121\u540dSection\n\n```ruby\nclass Home < SitePrism::Page\n  section :menu, '.menu' do\n    element :title, '.title'\n    elements :items, 'a'\n  end\nend\n```\n\nSection\u306f\u30af\u30e9\u30b9\u3068\u3057\u3066\u5ba3\u8a00\u3057\u306a\u304f\u3066\u3082\u3001\u30d6\u30ed\u30c3\u30af\u3068\u3057\u3066\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\n\n## \u307e\u3068\u3081\n\nRuby\u3067PageObjects\u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306egem\u3001SitePrism\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u50d5\u306f\u304b\u308c\u3053\u308c4\u56de\u307b\u3069GUI\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5316\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u95a2\u308f\u3063\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u304c\u3001SitePrism\u3092\u5229\u7528\u3057\u305f\u6642\u307b\u3069\u308f\u304b\u308a\u3084\u3059\u304f\u5b9f\u88c5\u304c\u3067\u304d\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3082\u3057Ruby\u3092\u4f7f\u3063\u3066E2E\u30c6\u30b9\u30c8\u3092\u884c\u3046\u306e\u3067\u3042\u308c\u3070\u662f\u975e\u5c0e\u5165\u3092\u691c\u8a0e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["Capybara", "Selenium", "SitePrism"]}