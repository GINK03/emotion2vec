{"context": "\u30cf\u30de\u3063\u305f\u30dd\u30a4\u30f3\u30c8\u304c\u6ca2\u5c71\u3042\u3063\u305f\u306e\u3067\u3001\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u30c6\u30b9\u30c8\u5b9f\u884c\u3059\u308b\u3068500\u30a8\u30e9\u30fc\n\n\u554f\u984c\nhttp://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/integrating-api-with-aws-services-s3.html#api-root-get-as-s3-get-service\n\u4e0a\u8a18\u3092\u898b\u306a\u304c\u3089API Gateway\u3092\u89e6\u3063\u3066\u898b\u3066\u3044\u305f\u3002\u8aac\u660e\u3069\u304a\u308a\u306b\u8a2d\u5b9a\u3057\u3066\u3001\u30c6\u30b9\u30c8\u5b9f\u884c\uff01\n\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002\n{\n  \"message\": \"Internal server error\"\n}\n\n\n\u89e3\u6c7a\uff08\uff1f\uff09\n\u3046\u30fc\u3093\u3001\u3053\u308c\u3001\u30d0\u30b0\u306a\u3093\u3067\u3059\u304b\u306d\uff1f\n\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u5148\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u547c\u3073\u51fa\u3059\u3068\u6b63\u5e38\u306b\u52d5\u304f\u304b\u3089\u30fb\u30fb\u30fb\n\u30c6\u30b9\u30c8\u3092\u884c\u3044\u305f\u304b\u3063\u305f\u3089\u3001\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u4ee5\u5916\u3067\u4f5c\u6210\u3059\u308b\u306e\u304c\u826f\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u30c7\u30d7\u30ed\u30a4\u5148\u304b\u3089\u547c\u3073\u51fa\u3059\u3068AccessDenied\n\n\u554f\u984c\n\u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066\u3001\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u306a\u304f\u3001\u30d0\u30fc\u30b8\u30cb\u30a2\u5317\u90e8\u306b\u4f5c\u308a\u76f4\u3057\u3066\u3055\u304f\u3055\u304f\u4f5c\u6210\uff01\n\u30c6\u30b9\u30c8\u5b9f\u884c\u3057\u3066\u3001\u554f\u984c\u306a\u3055\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u8a66\u3057\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3001\u751f\u6210\u3055\u308c\u305f\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089APIGateway\u3092\u547c\u3073\u51fa\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002\n$ curl \"https://xxxx.execute-api.us-east-1.amazonaws.com/production\"\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error>\n<Code>AccessDenied</Code>\n<Message>Access Denied</Message>\n<RequestId>xxxx</RequestId><HostId>xxxx</HostId>\n</Error>\n\n\n\u89e3\u6c7a\ncloudfront\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u304c\u5fc5\u8981\u307f\u305f\u3044\u3067\u3059\u3002\n\u7d71\u5408\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3057\u3066\u3044\u308b\u300c\u5b9f\u884c\u30ed\u30fc\u30eb\u300d\u306b\u3001cloudfront\u306e\u6a29\u9650\u3092\u4ed8\u52a0\u3059\u308b\u3068\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nPermanentRedirect\n\n\u554f\u984c\nhttp://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/integrating-api-with-aws-services-s3.html#api-items-in-folder-as-s3-objects-in-bucket\n\u4e0a\u8a18\u3092\u8a66\u3057\u3066\u3044\u308b\u6642\u306b\u3002\n\u8a2d\u5b9a\u5b8c\u4e86\u3057\u3066\u3001\u30c6\u30b9\u30c8\u5b9f\u884c\uff01\u5b58\u5728\u3059\u308b\u30d0\u30b1\u30c3\u30c8\u3092\u6307\u5b9a\u3057\u3066\u3001\u5b58\u5728\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u306b\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3057\u307e\u3063\u305f\u3002\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error>\n<Code>PermanentRedirect</Code>\n<Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>\n<Bucket>xxxxxx</Bucket>\n<Endpoint>xxxxxx.s3.amazonaws.com</Endpoint>\n<RequestId>xxxx</RequestId>\n<HostId>xxxx</HostId>\n</Error>\n\n\n\u89e3\u6c7a\n\nGUI\u4e0a\u304b\u3089\u3060\u3068\u3001S3\u306f\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u3088\u3046\u306b\u898b\u3048\u308b\u304c\u3001\u3061\u3083\u3093\u3068\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u5206\u304b\u308c\u3066\u3044\u308b\u3002\n\u5404\u30d0\u30b1\u30c3\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u898b\u308b\u3068\u3001\u30d0\u30b1\u30c3\u30c8\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u7d71\u5408\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3059\u308b\u30ea\u30fc\u30b8\u30e7\u30f3\u3068\u540c\u3058\u5834\u6240\u306b\u5b58\u5728\u3059\u308b\u30d0\u30b1\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3068\u3046\u307e\u304f\u884c\u304f\u3002\n\n\n\n\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u308b\u3068\u304d\u306b\u30d1\u30b9\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u6307\u5b9a\u3067\u304d\u306a\u3044\n\n\u554f\u984c\n\u30ea\u30bd\u30fc\u30b9\u4f5c\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n\u30d1\u30b9\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4f7f\u3048\u308b\u304b\u3089\u3001\u30ea\u30bd\u30fc\u30b9\u540d\u306b\u5165\u529b\u3059\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n\n\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u304c\u88dc\u5b8c\u3055\u308c\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n\n\u306a\u3093\u304b{username}\u3058\u3083\u306a\u304f\u3066-username-\u306b\u306a\u3063\u3066\u308b\u3051\u3069\u3053\u308c\u3067\u8a2d\u5b9a\u3067\u304d\u305f\u3068\u601d\u3046\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n\u610f\u56f3\u3057\u305f\u901a\u308a\u306b\u52d5\u304b\u306a\u3044\u3067\u3059\u3002\n\n\u89e3\u6c7a\n\u30ea\u30bd\u30fc\u30b9\u540d\u306b\u5165\u529b\u3057\u306a\u3044\u3067\u3001\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u306b\u76f4\u63a5\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u306e\u3042\u3068\u306b\u30ea\u30bd\u30fc\u30b9\u540d\u3082\u5165\u529b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30cf\u30de\u3063\u305f\u30dd\u30a4\u30f3\u30c8\u304c\u6ca2\u5c71\u3042\u3063\u305f\u306e\u3067\u3001\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u30c6\u30b9\u30c8\u5b9f\u884c\u3059\u308b\u3068500\u30a8\u30e9\u30fc\n\n## \u554f\u984c\n\nhttp://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/integrating-api-with-aws-services-s3.html#api-root-get-as-s3-get-service\n\u4e0a\u8a18\u3092\u898b\u306a\u304c\u3089API Gateway\u3092\u89e6\u3063\u3066\u898b\u3066\u3044\u305f\u3002\u8aac\u660e\u3069\u304a\u308a\u306b\u8a2d\u5b9a\u3057\u3066\u3001\u30c6\u30b9\u30c8\u5b9f\u884c\uff01\n\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002\n\n~~~json\n{\n  \"message\": \"Internal server error\"\n}\n~~~\n\n## \u89e3\u6c7a\uff08\uff1f\uff09\n\n\u3046\u30fc\u3093\u3001\u3053\u308c\u3001\u30d0\u30b0\u306a\u3093\u3067\u3059\u304b\u306d\uff1f\n\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u5148\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u547c\u3073\u51fa\u3059\u3068\u6b63\u5e38\u306b\u52d5\u304f\u304b\u3089\u30fb\u30fb\u30fb\n\u30c6\u30b9\u30c8\u3092\u884c\u3044\u305f\u304b\u3063\u305f\u3089\u3001\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u4ee5\u5916\u3067\u4f5c\u6210\u3059\u308b\u306e\u304c\u826f\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n# \u30c7\u30d7\u30ed\u30a4\u5148\u304b\u3089\u547c\u3073\u51fa\u3059\u3068AccessDenied\n\n## \u554f\u984c\n\n\u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066\u3001\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u306a\u304f\u3001\u30d0\u30fc\u30b8\u30cb\u30a2\u5317\u90e8\u306b\u4f5c\u308a\u76f4\u3057\u3066\u3055\u304f\u3055\u304f\u4f5c\u6210\uff01\n\u30c6\u30b9\u30c8\u5b9f\u884c\u3057\u3066\u3001\u554f\u984c\u306a\u3055\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u8a66\u3057\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3001\u751f\u6210\u3055\u308c\u305f\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089APIGateway\u3092\u547c\u3073\u51fa\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002\n\n~~~sh\n$ curl \"https://xxxx.execute-api.us-east-1.amazonaws.com/production\"\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error>\n<Code>AccessDenied</Code>\n<Message>Access Denied</Message>\n<RequestId>xxxx</RequestId><HostId>xxxx</HostId>\n</Error>\n~~~\n\n## \u89e3\u6c7a\ncloudfront\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u304c\u5fc5\u8981\u307f\u305f\u3044\u3067\u3059\u3002\n\u7d71\u5408\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3057\u3066\u3044\u308b\u300c\u5b9f\u884c\u30ed\u30fc\u30eb\u300d\u306b\u3001cloudfront\u306e\u6a29\u9650\u3092\u4ed8\u52a0\u3059\u308b\u3068\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n# PermanentRedirect\n\n## \u554f\u984c\n\nhttp://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/integrating-api-with-aws-services-s3.html#api-items-in-folder-as-s3-objects-in-bucket\n\u4e0a\u8a18\u3092\u8a66\u3057\u3066\u3044\u308b\u6642\u306b\u3002\n\u8a2d\u5b9a\u5b8c\u4e86\u3057\u3066\u3001\u30c6\u30b9\u30c8\u5b9f\u884c\uff01\u5b58\u5728\u3059\u308b\u30d0\u30b1\u30c3\u30c8\u3092\u6307\u5b9a\u3057\u3066\u3001\u5b58\u5728\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u306b\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3057\u307e\u3063\u305f\u3002\n\n~~~xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error>\n<Code>PermanentRedirect</Code>\n<Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>\n<Bucket>xxxxxx</Bucket>\n<Endpoint>xxxxxx.s3.amazonaws.com</Endpoint>\n<RequestId>xxxx</RequestId>\n<HostId>xxxx</HostId>\n</Error>\n~~~\n\n## \u89e3\u6c7a\n\n* GUI\u4e0a\u304b\u3089\u3060\u3068\u3001S3\u306f\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u3088\u3046\u306b\u898b\u3048\u308b\u304c\u3001\u3061\u3083\u3093\u3068\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u5206\u304b\u308c\u3066\u3044\u308b\u3002\n* \u5404\u30d0\u30b1\u30c3\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u898b\u308b\u3068\u3001\u30d0\u30b1\u30c3\u30c8\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n* \u7d71\u5408\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3059\u308b\u30ea\u30fc\u30b8\u30e7\u30f3\u3068\u540c\u3058\u5834\u6240\u306b\u5b58\u5728\u3059\u308b\u30d0\u30b1\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3068\u3046\u307e\u304f\u884c\u304f\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-20 19.13.05.png](https://qiita-image-store.s3.amazonaws.com/0/79577/b6666bb1-4b23-4291-9806-3490288d2ce2.png)\n\n\n# \u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u308b\u3068\u304d\u306b\u30d1\u30b9\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u6307\u5b9a\u3067\u304d\u306a\u3044\n\n## \u554f\u984c\n\n\u30ea\u30bd\u30fc\u30b9\u4f5c\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n\u30d1\u30b9\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4f7f\u3048\u308b\u304b\u3089\u3001**\u30ea\u30bd\u30fc\u30b9\u540d**\u306b\u5165\u529b\u3059\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-20 19.50.06.png](https://qiita-image-store.s3.amazonaws.com/0/79577/87ca3d86-b967-0f0a-87a7-9aaaced8c553.png)\n\n**\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9**\u304c\u88dc\u5b8c\u3055\u308c\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-20 19.51.46.png](https://qiita-image-store.s3.amazonaws.com/0/79577/eda1f440-bb8a-a20a-b95e-e4b56ee039cd.png)\n\n\u306a\u3093\u304b`{username}`\u3058\u3083\u306a\u304f\u3066`-username-`\u306b\u306a\u3063\u3066\u308b\u3051\u3069\u3053\u308c\u3067\u8a2d\u5b9a\u3067\u304d\u305f\u3068\u601d\u3046\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\n**\u610f\u56f3\u3057\u305f\u901a\u308a\u306b\u52d5\u304b\u306a\u3044\u3067\u3059\u3002**\n\n## \u89e3\u6c7a\n\n\u30ea\u30bd\u30fc\u30b9\u540d\u306b\u5165\u529b\u3057\u306a\u3044\u3067\u3001\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u306b\u76f4\u63a5\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u306e\u3042\u3068\u306b\u30ea\u30bd\u30fc\u30b9\u540d\u3082\u5165\u529b\u3057\u307e\u3057\u3087\u3046\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-20 19.54.05.png](https://qiita-image-store.s3.amazonaws.com/0/79577/ed8e7ebe-bb4d-c862-0cbc-c36d63969542.png)\n", "tags": ["AWS", "APIGateway", "S3"]}