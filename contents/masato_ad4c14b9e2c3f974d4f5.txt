{"context": " More than 1 year has passed since last update.Firmata\u306f\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u304b\u3089USB\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3092\u7d4c\u7531\u3057\u3066Arduino\u3092\u64cd\u4f5c\u3067\u304d\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u3059\u3002Cylon.js\u306ecylon-firmata\u30a2\u30c0\u30d7\u30bf\u3092\u4f7f\u3044\u3001Node.js\u304b\u3089Arduino Uno R3\u3092\u52d5\u304b\u3059\u74b0\u5883\u3092\u7528\u610f\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002Cylon.js\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304c\u62bd\u8c61\u5316\u3057\u3066\u304f\u308c\u308b\u306e\u3067BeagleBone Black\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305fNode.js\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304cPIN\u756a\u53f7\u3092\u5909\u66f4\u3059\u308b\u3060\u3051\u3067\u52d5\u304d\u307e\u3059\u3002\n\nUbuntu 14.04\u306eXfce\u30db\u30b9\u30c8\u30de\u30b7\u30f3\nBeagleBone Black\u3068\u9055\u3044Arduino Uno R3\u306b\u306fNode.js\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u306e\u3067Firmata\u306e\u5834\u5408Node.js\u306f\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u5074\u306b\u3042\u308a\u307e\u3059\u3002\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306b\u306fChromebook\u306bcrouton\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fUbuntu 14.04\u306eXfce\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u74b0\u5883\u3092\u4f7f\u3044\u307e\u3059\u3002 \n\nArduino IDE\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306eUbuntu\u306bArduino IDE\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002apt-get\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.0.5\u3068\u53e4\u3044\u306e\u3067\u3059\u304c\u3001\u6700\u65b0\u7248\u306e1.6.0\u306edeb\u30d1\u30c3\u30b1\u30fc\u30b8\u306fARMv7\u74b0\u5883\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5931\u6557\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n$ sudo apt-get update && sudo apt-get install arduino arduino-core  \n\nArduino\u3092USB\u30b1\u30fc\u30d6\u30eb\u3067Chromebook\u3068\u63a5\u7d9a\u3059\u308b\u3068ttyACM0\u306e\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n$ ls -al  /dev/ttyACM0 \ncrw-rw---- 1 root serial 166, 0 Feb 23 13:34 /dev/ttyACM0\n\n\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u3067\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u6a29\u9650\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n$ sudo chmod a+rw /dev/ttyACM0\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305farduino\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3057\u3066Arduino IDE\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ arduino\n\n\nArduino\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u30b7\u30ea\u30a2\u30eb\u63a5\u7d9a\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306bdialog\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3059\u308b\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u3067\u307e\u3059\u3002\n\n\u30e6\u30fc\u30b6\u3092dialout \u30b0\u30eb\u30fc\u30d7\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n$ sudo usermod -aG dialout mshimizu\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u306a\u304a\u3057\u3066\u30b0\u30eb\u30fc\u30d7\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ groups\nmshimizu dialout video sudo plugdev audio\n\n\nFirmata\nFirmata\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u3092\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u304b\u3089Arduino\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u65b9\u6cd5\u306f\u3001Gort\u3092\u4f7f\u3046\u5834\u5408\u3068Arduino IDE\u304b\u3089\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u30682\u7a2e\u985e\u3042\u308a\u307e\u3059\u3002\n\nGort\u3092\u4f7f\u3046\u5834\u5408\nGort\u306fGo\u3067\u66f8\u304b\u308c\u305f\u30ed\u30dc\u30c6\u30a3\u30af\u30b9\u306e\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3067\u3059\u3002Arduino Firmata\u3068\u4e92\u63db\u6027\u304c\u3042\u308bSparkCore\u3084Digispark\u3082\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u4eca\u56de\u306favrdude\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066Firmata\u3092Arduino\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u307e\u305a\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306bGort\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ cd ~/Downloads\n$ wget https://s3.amazonaws.com/gort-io/0.3.0/gort_0.3.0_linux_arm.tar.gz\n$ tar zxvf gort_0.3.0_linux_arm.tar.gz \ngort_0.3.0_linux_arm/gort\ngort_0.3.0_linux_arm/README.md\ngort_0.3.0_linux_arm/LICENSE\n$ sudo cp gort_0.3.0_linux_arm/gort /usr/local/bin\n\nGort\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ which gort\n/usr/local/bin/gort\n$ gort -v \ngort version 0.3.0\n\n\u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8\u3092scan\u3057\u3066Arduino\u306e\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ gort scan serial\n\n1 serial port(s) found.\n\n1. [/dev/ttyACM0] - [usb-Arduino__www.arduino.cc__0043_55431313338351E0F111-if00]\n\navrdude\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066sketches\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306e\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\n$ gort arduino install\nAttempting to install avrdude with apt-get.\nReading package lists... Done\nBuilding dependency tree \nReading state information... Done\navrdude is already the newest version.\navrdude set to manually installed.\n0 upgraded, 0 newly installed, 0 to remove and 56 not upgraded.\n\nFirmata\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u3092Arduino\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n$ gort arduino upload firmata /dev/ttyACM0\n\navrdude: AVR device initialized and ready to accept instructions\n\nReading | ################################################## | 100% 0.01s\n\navrdude: Device signature = 0x1e950f\navrdude: reading input file \"/tmp/555901447\"\navrdude: writing flash (11452 bytes):\n\nWriting | ################################################## | 100% 1.95s\n\navrdude: 11452 bytes of flash written\navrdude: verifying flash memory against /tmp/555901447:\navrdude: load data flash data from input file /tmp/555901447:\navrdude: input file /tmp/555901447 contains 11452 bytes\navrdude: reading on-chip flash data:\n\nReading | ################################################## | 100% 1.55s\n\navrdude: verifying ...\navrdude: 11452 bytes of flash verified\n\navrdude done. Thank you.\n\n\nArduino IDE\u3092\u4f7f\u3046\u5834\u5408\nArduino IDE\u3092\u4f7f\u3063\u3066Firmata\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u306f\u901a\u5e38\u306esketches\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3068\u540c\u3058\u3067\u3059\u3002\u307e\u305a\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u30b5\u30f3\u30d7\u30eb\u304b\u3089StandardFirmata\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u307e\u3059\u3002\n\nFile > Examples > Firmata > StandardFirmata\n\n\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u30c7\u30d0\u30a4\u30b9\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nTools  > Board > Arduino Uno\n\n\u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nTools > Serial Port > /dev/ttyACM0\n\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u307e\u305f\u306f\u53f3\u77e2\u5370\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Arduino\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\nFile > Upload\n\n\n\nNode.js\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u304b\u3089Firmata\u3092\u901a\u3057\u3066\u3057\u3066Arduino\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306bUbuntu\u306bNode.js\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u3044\u3064\u3082\u306fnvm\u3092\u4f7f\u3044\u307e\u3059\u304cChromebook\u304cARMv7\u306a\u306e\u3067\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n$ nvm install -s v0.10\n\n\u975e\u529b\u306aChromebook\u306a\u306e\u3067\u4eca\u56de\u306f\u7c21\u5358\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo apt-get install nodejs npm\n$ sudo update-alternatives --install /usr/bin/node node /usr/bin/nodejs 10\n\nNode.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u3057\u307e\u3059\u3002\u6bd4\u8f03\u7684\u65b0\u3057\u3044Node.js\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\n$ node -v\nv0.10.25\n$ npm -v\n1.3.10\n\n\ncylon-firmata\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306eUbuntu\u306bCylon.js\u306eArduino Firmata\u30a2\u30c0\u30d7\u30bf\u3067\u3042\u308b\u3001cylon-firmata\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002package.json\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002MQTT\u3067\u30b5\u30f3\u30d7\u30eb\u306b\u4f7f\u3044\u307e\u3059\u3002\n\n~/node_apps/package.json\n{\n  \"name\": \"mqtt-led\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"dependencies\": {\n    \"cylon-firmata\": \"0.19.0\",\n    \"cylon-mqtt\": \"0.4.0\"\n  },\n  \"scripts\": {\"start\": \"node app.js\"}\n}\n\n\nnpm install\u3057\u307e\u3059\u3002\n$ cd ~/node_apps/\n$ npm install\n\n\nL\u30c1\u30ab\nL\u30c1\u30ab\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n~/node_apps/app.js\nvar Cylon = require('cylon');\n\nCylon.robot({\n  connections: {\n    arduino: { adaptor: 'firmata', port: '/dev/ttyACM0' }\n  },\n\n  devices: {\n    led: { driver: 'led', pin: 13 }\n  },\n\n  work: function(my) {\n    every((1).second(), my.led.toggle);\n  }\n}).start();\n\n\nnpm start\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u3068L\u30c1\u30ab\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n$ npm start\n\n> mqtt-led@0.0.1 start /home/mshimizu/node_apps\n> node app.js\n\nI, [2015-02-23T06:39:20.913Z] INFO -- : Initializing connections.\nI, [2015-02-23T06:39:21.377Z] INFO -- : Initializing devices.\nI, [2015-02-23T06:39:21.384Z] INFO -- : Starting connections.\nI, [2015-02-23T06:39:26.465Z] INFO -- : Starting devices.\nI, [2015-02-23T06:39:26.466Z] INFO -- : Working.\n\n\nMQTT\u3068L\u30c1\u30ab\n\nMQTT\u306epub/sub\nwork\u306e\u4e2d\u3067MQTT\u306epub/sub\u3092\u3059\u308b\u3053\u3068\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u53d7\u4fe1\u3057\u307e\u3059\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308b\u3068L\u30c1\u30ab\u3057\u307e\u3059\u3002\n\n~/node_apps/app.js\nvar Cylon = require('cylon');\n\n// Initialize the robot\nCylon.robot({\n  connections: {\n    mqtt: { adaptor: 'mqtt', host: 'mqtt://xxx.xxx.xxx.xxx:1883' },\n    arduino: { adaptor: 'firmata', port: '/dev/ttyACM0' }\n  },\n\n  devices: {\n    toggle: { driver: 'mqtt', topic: 'toggle', connection: 'mqtt' },\n    led: { driver: 'led', pin: '13', connection: 'arduino' }\n  },\n\n  work: function(my) {\n    my.toggle.on('message',function(data) {\n      console.log(\"Message on 'toggle': \" + data);\n      my.led.toggle();\n    });\n\n    every((1).second(), function() {\n      console.log(\"Toggling LED.\");\n      my.toggle.publish('toggle');\n    });\n  }\n}).start();\n\n\nnpm start\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002Arduino\u304b\u3089MQTT\u306epub/sub\u3092\u901a\u3057\u3066L\u30c1\u30ab\u304c\u59cb\u307e\u308a\u307e\u3057\u305f\u3002\n$ npm start\n npm start\n\n> mqtt-led@0.0.1 start /home/mshimizu/node_apps\n> node app.js\n\nI, [2015-02-23T06:55:24.462Z]  INFO -- : Initializing connections.\nI, [2015-02-23T06:55:25.031Z]  INFO -- : Initializing devices.\nI, [2015-02-23T06:55:25.039Z]  INFO -- : Starting connections.\nI, [2015-02-23T06:55:28.322Z]  INFO -- : Starting devices.\nI, [2015-02-23T06:55:28.327Z]  INFO -- : Working.\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\n\n\nIFTTT\u3068MQTT\u3068L\u30c1\u30ab\nBeagleBone Black\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305fIFTTT\u306eDo Button\u3092\u4f7f\u3063\u305f\u30b5\u30f3\u30d7\u30eb\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002MQTT\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308b\u3068\u6a19\u6e96\u51fa\u529b\u3068L\u30c1\u30ab\u30923\u79d2\u9593\u884c\u3044\u307e\u3059\u3002BeagleBone Black\u306e\u30b3\u30fc\u30c9\u304b\u3089\u5909\u66f4\u3057\u305f\u306e\u306fconnection\u3068led\u306ePIN\u756a\u53f7\u3060\u3051\u3067\u3059\u3002\u7570\u306a\u308b\u30b3\u30cd\u30af\u30c6\u30c3\u30c9\u30c7\u30d0\u30a4\u30b9\u9593\u3067\u3082\u307b\u307c\u540c\u3058Node.js\u306e\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u306e\u3067Cylon.js\u306f\u4fbf\u5229\u3067\u3059\u3002\n\n~/node_apps/app.js\nvar Cylon = require('cylon');\n\n// Initialize the robot\nCylon.robot({\n  connections: {\n    mqtt: { adaptor: 'mqtt', host: 'mqtt://xxx.xxx.xxx.xxx:1883' },\n    arduino: { adaptor: 'firmata', port: '/dev/ttyACM0' }\n  },\n\n  devices: {\n    ifttt: { driver: 'mqtt', topic: 'ifttt/bbb', connection: 'mqtt' },\n    led: { driver: 'led', pin: '13', connection: 'arduino' }\n  },\n\n  work: function(my) {\n    my.ifttt.on(\"message\",function(data) {\n      console.log(\"Message on 'ifttt': \" + data);\n      var timer = setInterval(my.led.toggle, 200);\n      setTimeout(function(){ clearInterval(timer)},3000);\n    });\n  }\n}).start();\n\n\nnpm start\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002Android\u306eDo Button\u30a2\u30d7\u30ea\u304b\u3089WordPress\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u3092\u7d4c\u7531\u3057\u3066\u3001\u4f4d\u7f6e\u60c5\u5831\u304b\u3089\u751f\u6210\u3057\u305fGoogle\u30de\u30c3\u30d7\u306eURL\u304cArduino\u306b\u901a\u77e5\u3055\u308c\u307e\u3057\u305f\u3002\n$ npm start\n\n> mqtt-led@0.0.1 start /home/mshimizu/node_apps\n> node app.js\n\nI, [2015-02-23T06:51:37.312Z]  INFO -- : Initializing connections.\nI, [2015-02-23T06:51:37.981Z]  INFO -- : Initializing devices.\nI, [2015-02-23T06:51:37.998Z]  INFO -- : Starting connections.\nI, [2015-02-23T06:51:41.334Z]  INFO -- : Starting devices.\nI, [2015-02-23T06:51:41.338Z]  INFO -- : Working.\nMessage on 'ifttt': {\"username\":\"username\",\"password\":\"password\",\"title\":\"\",\"description\":\"<div><img src='http://maps.google.com/maps/api/staticmap?center=35.xxxxxxx,139.xxxxxxx&zoom=19&size=640x440&scale=1&maptype=roadmap&sensor=false&markers=color:red%7C35.xxxxxxx,139.xxxxxxx' style='max-width:600px;' /><br/><div>Do Button pressed on February 23, 2015 at 03:51PM http://ift.tt/1zBK1rg</div></div>\",\"tags\":{\"string\":\"Do Button\"},\"post_status\":\"publish\"}\n\n[Firmata](http://arduino.cc/en/reference/firmata)\u306f\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u304b\u3089USB\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3092\u7d4c\u7531\u3057\u3066Arduino\u3092\u64cd\u4f5c\u3067\u304d\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u3059\u3002Cylon.js\u306e[cylon-firmata](https://github.com/hybridgroup/cylon-firmata)\u30a2\u30c0\u30d7\u30bf\u3092\u4f7f\u3044\u3001Node.js\u304b\u3089[Arduino Uno R3](http://arduino.cc/en/Main/arduinoBoardUno)\u3092\u52d5\u304b\u3059\u74b0\u5883\u3092\u7528\u610f\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002Cylon.js\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304c\u62bd\u8c61\u5316\u3057\u3066\u304f\u308c\u308b\u306e\u3067BeagleBone Black\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305fNode.js\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304cPIN\u756a\u53f7\u3092\u5909\u66f4\u3059\u308b\u3060\u3051\u3067\u52d5\u304d\u307e\u3059\u3002\n\n## Ubuntu 14.04\u306eXfce\u30db\u30b9\u30c8\u30de\u30b7\u30f3\n\nBeagleBone Black\u3068\u9055\u3044Arduino Uno R3\u306b\u306fNode.js\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u306e\u3067Firmata\u306e\u5834\u5408Node.js\u306f\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u5074\u306b\u3042\u308a\u307e\u3059\u3002\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306b\u306fChromebook\u306bcrouton\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fUbuntu 14.04\u306eXfce\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u74b0\u5883\u3092\u4f7f\u3044\u307e\u3059\u3002 \n\n### Arduino IDE\n\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306eUbuntu\u306bArduino IDE\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002apt-get\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.0.5\u3068\u53e4\u3044\u306e\u3067\u3059\u304c\u3001\u6700\u65b0\u7248\u306e1.6.0\u306edeb\u30d1\u30c3\u30b1\u30fc\u30b8\u306fARMv7\u74b0\u5883\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5931\u6557\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n``` bash\n$ sudo apt-get update && sudo apt-get install arduino arduino-core  \n```\n\nArduino\u3092USB\u30b1\u30fc\u30d6\u30eb\u3067Chromebook\u3068\u63a5\u7d9a\u3059\u308b\u3068`ttyACM0`\u306e\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n``` bash\n$ ls -al  /dev/ttyACM0 \ncrw-rw---- 1 root serial 166, 0 Feb 23 13:34 /dev/ttyACM0\n```\n\n\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u3067\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u6a29\u9650\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n``` bash\n$ sudo chmod a+rw /dev/ttyACM0\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f`arduino`\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3057\u3066Arduino IDE\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n``` bash\n$ arduino\n```\n\n![arduino-ide.png](https://qiita-image-store.s3.amazonaws.com/0/43745/16c85c31-5a78-2e25-fb8a-434408accc87.png)\n\nArduino\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u30b7\u30ea\u30a2\u30eb\u63a5\u7d9a\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306bdialog\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3059\u308b\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u3067\u307e\u3059\u3002\n\n![dialout-group.png](https://qiita-image-store.s3.amazonaws.com/0/43745/cc78c3c0-71a9-dc11-1738-532ed7dba78a.png)\n\n\n\u30e6\u30fc\u30b6\u3092dialout \u30b0\u30eb\u30fc\u30d7\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n\n``` bash\n$ sudo usermod -aG dialout mshimizu\n```\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u306a\u304a\u3057\u3066\u30b0\u30eb\u30fc\u30d7\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n``` bash\n$ groups\nmshimizu dialout video sudo plugdev audio\n```\n\n## Firmata\n\nFirmata\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u3092\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u304b\u3089Arduino\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u65b9\u6cd5\u306f\u3001Gort\u3092\u4f7f\u3046\u5834\u5408\u3068Arduino IDE\u304b\u3089\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u30682\u7a2e\u985e\u3042\u308a\u307e\u3059\u3002\n\n### Gort\u3092\u4f7f\u3046\u5834\u5408\n\n[Gort](http://gort.io/)\u306fGo\u3067\u66f8\u304b\u308c\u305f\u30ed\u30dc\u30c6\u30a3\u30af\u30b9\u306e\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3067\u3059\u3002Arduino Firmata\u3068\u4e92\u63db\u6027\u304c\u3042\u308bSparkCore\u3084Digispark\u3082\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u4eca\u56de\u306favrdude\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066Firmata\u3092Arduino\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u307e\u305a\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306bGort\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n``` bash\n$ cd ~/Downloads\n$ wget https://s3.amazonaws.com/gort-io/0.3.0/gort_0.3.0_linux_arm.tar.gz\n$ tar zxvf gort_0.3.0_linux_arm.tar.gz \ngort_0.3.0_linux_arm/gort\ngort_0.3.0_linux_arm/README.md\ngort_0.3.0_linux_arm/LICENSE\n$ sudo cp gort_0.3.0_linux_arm/gort /usr/local/bin\n```\n\nGort\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n``` bash\n$ which gort\n/usr/local/bin/gort\n$ gort -v \ngort version 0.3.0\n```\n\n\u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8\u3092scan\u3057\u3066Arduino\u306e\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n``` bash\n$ gort scan serial\n\n1 serial port(s) found.\n\n1. [/dev/ttyACM0] - [usb-Arduino__www.arduino.cc__0043_55431313338351E0F111-if00]\n```\n\navrdude\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066sketches\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306e\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\n\n``` bash\n$ gort arduino install\nAttempting to install avrdude with apt-get.\nReading package lists... Done\nBuilding dependency tree \nReading state information... Done\navrdude is already the newest version.\navrdude set to manually installed.\n0 upgraded, 0 newly installed, 0 to remove and 56 not upgraded.\n```\n\nFirmata\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u3092Arduino\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n``` bash\n$ gort arduino upload firmata /dev/ttyACM0\n \navrdude: AVR device initialized and ready to accept instructions\n\nReading | ################################################## | 100% 0.01s\n\navrdude: Device signature = 0x1e950f\navrdude: reading input file \"/tmp/555901447\"\navrdude: writing flash (11452 bytes):\n\nWriting | ################################################## | 100% 1.95s\n\navrdude: 11452 bytes of flash written\navrdude: verifying flash memory against /tmp/555901447:\navrdude: load data flash data from input file /tmp/555901447:\navrdude: input file /tmp/555901447 contains 11452 bytes\navrdude: reading on-chip flash data:\n\nReading | ################################################## | 100% 1.55s\n\navrdude: verifying ...\navrdude: 11452 bytes of flash verified\n\navrdude done. Thank you.\n```\n\n### Arduino IDE\u3092\u4f7f\u3046\u5834\u5408\n\nArduino IDE\u3092\u4f7f\u3063\u3066Firmata\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u306f\u901a\u5e38\u306esketches\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3068\u540c\u3058\u3067\u3059\u3002\u307e\u305a\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u30b5\u30f3\u30d7\u30eb\u304b\u3089StandardFirmata\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u307e\u3059\u3002\n\n* File > Examples > Firmata > StandardFirmata\n\n\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u30c7\u30d0\u30a4\u30b9\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n* Tools  > Board > Arduino Uno\n\n\u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n* Tools > Serial Port > /dev/ttyACM0\n\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u307e\u305f\u306f\u53f3\u77e2\u5370\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Arduino\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n* File > Upload\n\n![standardfirmata-upload.png](https://qiita-image-store.s3.amazonaws.com/0/43745/c4bd7f36-0a23-4e06-6366-aa0074cb5352.png)\n\n\n## Node.js\n\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u304b\u3089Firmata\u3092\u901a\u3057\u3066\u3057\u3066Arduino\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306bUbuntu\u306bNode.js\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u3044\u3064\u3082\u306fnvm\u3092\u4f7f\u3044\u307e\u3059\u304cChromebook\u304cARMv7\u306a\u306e\u3067\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n``` bash\n$ nvm install -s v0.10\n```\n\n\u975e\u529b\u306aChromebook\u306a\u306e\u3067\u4eca\u56de\u306f\u7c21\u5358\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n``` bash\n$ sudo apt-get install nodejs npm\n$ sudo update-alternatives --install /usr/bin/node node /usr/bin/nodejs 10\n```\n\nNode.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u3057\u307e\u3059\u3002\u6bd4\u8f03\u7684\u65b0\u3057\u3044Node.js\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\n\n``` bash\n$ node -v\nv0.10.25\n$ npm -v\n1.3.10\n```\n\n## cylon-firmata\n\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306eUbuntu\u306bCylon.js\u306eArduino Firmata\u30a2\u30c0\u30d7\u30bf\u3067\u3042\u308b\u3001[cylon-firmata](https://github.com/hybridgroup/cylon-firmata)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002package.json\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002MQTT\u3067\u30b5\u30f3\u30d7\u30eb\u306b\u4f7f\u3044\u307e\u3059\u3002\n\n``` json:~/node_apps/package.json\n{\n  \"name\": \"mqtt-led\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"dependencies\": {\n    \"cylon-firmata\": \"0.19.0\",\n    \"cylon-mqtt\": \"0.4.0\"\n  },\n  \"scripts\": {\"start\": \"node app.js\"}\n}\n```\n\n`npm install`\u3057\u307e\u3059\u3002\n\n``` bash\n$ cd ~/node_apps/\n$ npm install\n```\n\n### L\u30c1\u30ab\n\nL\u30c1\u30ab\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n``` js:~/node_apps/app.js\nvar Cylon = require('cylon');\n\nCylon.robot({\n  connections: {\n    arduino: { adaptor: 'firmata', port: '/dev/ttyACM0' }\n  },\n\n  devices: {\n    led: { driver: 'led', pin: 13 }\n  },\n\n  work: function(my) {\n    every((1).second(), my.led.toggle);\n  }\n}).start();\n```\n\n`npm start`\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u3068L\u30c1\u30ab\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n\n``` bash\n$ npm start\n\n> mqtt-led@0.0.1 start /home/mshimizu/node_apps\n> node app.js\n\nI, [2015-02-23T06:39:20.913Z] INFO -- : Initializing connections.\nI, [2015-02-23T06:39:21.377Z] INFO -- : Initializing devices.\nI, [2015-02-23T06:39:21.384Z] INFO -- : Starting connections.\nI, [2015-02-23T06:39:26.465Z] INFO -- : Starting devices.\nI, [2015-02-23T06:39:26.466Z] INFO -- : Working.\n```\n\n\n## MQTT\u3068L\u30c1\u30ab\n\n### MQTT\u306epub/sub\n\nwork\u306e\u4e2d\u3067MQTT\u306epub/sub\u3092\u3059\u308b\u3053\u3068\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u53d7\u4fe1\u3057\u307e\u3059\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308b\u3068L\u30c1\u30ab\u3057\u307e\u3059\u3002\n\n``` js:~/node_apps/app.js\nvar Cylon = require('cylon');\n\n// Initialize the robot\nCylon.robot({\n  connections: {\n    mqtt: { adaptor: 'mqtt', host: 'mqtt://xxx.xxx.xxx.xxx:1883' },\n    arduino: { adaptor: 'firmata', port: '/dev/ttyACM0' }\n  },\n\n  devices: {\n    toggle: { driver: 'mqtt', topic: 'toggle', connection: 'mqtt' },\n    led: { driver: 'led', pin: '13', connection: 'arduino' }\n  },\n\n  work: function(my) {\n    my.toggle.on('message',function(data) {\n      console.log(\"Message on 'toggle': \" + data);\n      my.led.toggle();\n    });\n\n    every((1).second(), function() {\n      console.log(\"Toggling LED.\");\n      my.toggle.publish('toggle');\n    });\n  }\n}).start();\n```\n\n`npm start`\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002Arduino\u304b\u3089MQTT\u306epub/sub\u3092\u901a\u3057\u3066L\u30c1\u30ab\u304c\u59cb\u307e\u308a\u307e\u3057\u305f\u3002\n\n``` bash\n$ npm start\n npm start\n\n> mqtt-led@0.0.1 start /home/mshimizu/node_apps\n> node app.js\n\nI, [2015-02-23T06:55:24.462Z]  INFO -- : Initializing connections.\nI, [2015-02-23T06:55:25.031Z]  INFO -- : Initializing devices.\nI, [2015-02-23T06:55:25.039Z]  INFO -- : Starting connections.\nI, [2015-02-23T06:55:28.322Z]  INFO -- : Starting devices.\nI, [2015-02-23T06:55:28.327Z]  INFO -- : Working.\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\nToggling LED.\nMessage on 'toggle': toggle\n```\n\n### IFTTT\u3068MQTT\u3068L\u30c1\u30ab\n\nBeagleBone Black\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305fIFTTT\u306eDo Button\u3092\u4f7f\u3063\u305f\u30b5\u30f3\u30d7\u30eb\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002MQTT\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308b\u3068\u6a19\u6e96\u51fa\u529b\u3068L\u30c1\u30ab\u30923\u79d2\u9593\u884c\u3044\u307e\u3059\u3002BeagleBone Black\u306e\u30b3\u30fc\u30c9\u304b\u3089\u5909\u66f4\u3057\u305f\u306e\u306f`connection`\u3068`led`\u306ePIN\u756a\u53f7\u3060\u3051\u3067\u3059\u3002\u7570\u306a\u308b\u30b3\u30cd\u30af\u30c6\u30c3\u30c9\u30c7\u30d0\u30a4\u30b9\u9593\u3067\u3082\u307b\u307c\u540c\u3058Node.js\u306e\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u306e\u3067Cylon.js\u306f\u4fbf\u5229\u3067\u3059\u3002\n\n``` js:~/node_apps/app.js\nvar Cylon = require('cylon');\n\n// Initialize the robot\nCylon.robot({\n  connections: {\n    mqtt: { adaptor: 'mqtt', host: 'mqtt://xxx.xxx.xxx.xxx:1883' },\n    arduino: { adaptor: 'firmata', port: '/dev/ttyACM0' }\n  },\n\n  devices: {\n    ifttt: { driver: 'mqtt', topic: 'ifttt/bbb', connection: 'mqtt' },\n    led: { driver: 'led', pin: '13', connection: 'arduino' }\n  },\n\n  work: function(my) {\n    my.ifttt.on(\"message\",function(data) {\n      console.log(\"Message on 'ifttt': \" + data);\n      var timer = setInterval(my.led.toggle, 200);\n      setTimeout(function(){ clearInterval(timer)},3000);\n    });\n  }\n}).start();\n```\n\n`npm start`\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002Android\u306eDo Button\u30a2\u30d7\u30ea\u304b\u3089WordPress\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068MQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u3092\u7d4c\u7531\u3057\u3066\u3001\u4f4d\u7f6e\u60c5\u5831\u304b\u3089\u751f\u6210\u3057\u305fGoogle\u30de\u30c3\u30d7\u306eURL\u304cArduino\u306b\u901a\u77e5\u3055\u308c\u307e\u3057\u305f\u3002\n\n``` bash\n$ npm start\n\n> mqtt-led@0.0.1 start /home/mshimizu/node_apps\n> node app.js\n\nI, [2015-02-23T06:51:37.312Z]  INFO -- : Initializing connections.\nI, [2015-02-23T06:51:37.981Z]  INFO -- : Initializing devices.\nI, [2015-02-23T06:51:37.998Z]  INFO -- : Starting connections.\nI, [2015-02-23T06:51:41.334Z]  INFO -- : Starting devices.\nI, [2015-02-23T06:51:41.338Z]  INFO -- : Working.\nMessage on 'ifttt': {\"username\":\"username\",\"password\":\"password\",\"title\":\"\",\"description\":\"<div><img src='http://maps.google.com/maps/api/staticmap?center=35.xxxxxxx,139.xxxxxxx&zoom=19&size=640x440&scale=1&maptype=roadmap&sensor=false&markers=color:red%7C35.xxxxxxx,139.xxxxxxx' style='max-width:600px;' /><br/><div>Do Button pressed on February 23, 2015 at 03:51PM http://ift.tt/1zBK1rg</div></div>\",\"tags\":{\"string\":\"Do Button\"},\"post_status\":\"publish\"}\n```\n", "tags": ["Cylon.js0.22.0", "Arduino", "Firmata", "Chromebook"]}