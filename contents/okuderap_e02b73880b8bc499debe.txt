{"context": "\n\n\u306f\u3058\u3081\u306b\n\u4eca\u56de\u306f\u3001XCTest\u3067\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u524d\u56de\u306fXCTest\u306e\u57fa\u790e\u3092\u8a18\u8f09\u3057\u307e\u3057\u305f\u3002\nhttp://qiita.com/okuderap/items/97f9d6026d0da59fef38\n\u3053\u3061\u3089\u3082\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nXCTest\u3067\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\nhttp://qiita.com/okuderap/items/de574685592fe0bee8ea\n\n\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\nXCTest\u3067\u306f\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3093\u3067\u3059\u3002\n\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u306b\u306fXCTestExpectation\u3092\u4f7f\u3044\u307e\u3059\u3002\nlet imageDownloadExpectation: XCTestExpectation? = \n    self.expectationWithDescription(\"download Image\")\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u5b9a\u7fa9\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4e2d\u306b\u8907\u6570\u306eexpectation\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescription\u306b\u306f\u3001\u975e\u540c\u671f\u51e6\u7406\u306e\u671f\u5f85\u3059\u308b\u7d50\u679c\u3092\u66f8\u3044\u3066\u3042\u3052\u308c\u3070\u826f\u3044\u304b\u3068\u3002\n\u671f\u5f85\u3059\u308b\u7d50\u679c\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3067\nXCTestExpectation\u306efulfill\u3092\u547c\u3073\u307e\u3059\u3002\nimageDownloadExpectation?.fulfill()\n\u305d\u308c\u304b\u3089\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u6642\u9593\u3092\u6c7a\u3081\u307e\u3059\u3002\nwaitForExpectationsWithTimeout(timeout: 0.05, handler:nil)\n\u3053\u3093\u306a\u611f\u3058\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002handler\u306f\u3001\u4eca\u56de\u306fnil\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u5b9a\u7fa9\u3057\u305fXCTestExpectation\u306e\u6570\u5206\u3060\u3051fulfill\u304c\u547c\u3070\u308c\u3066\n\u4e14\u3064\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u3066\u3044\u306a\u3051\u308c\u3070test Succeeded\u3068\u306a\u308a\u307e\u3059\u3002\n\u3069\u3061\u3089\u304b\u4e00\u65b9\u3067\u3082\u6761\u4ef6\u3092\u6e80\u305f\u3059\u3053\u3068\u304c\u3067\u304d\u306a\u3051\u308c\u3070test Failed\u3068\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30e1\u30bd\u30c3\u30c9\n\u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30c6\u30b9\u30c8\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nUrlSessionManager.swift\n    func downloadImage(urlString: String,\n                       completionHandler: ((NSData?, NSURLResponse?, NSError?) -> Void)) {\n\n        guard let url = NSURL(string: urlString) else {\n            return\n        }\n        let request = NSURLRequest(URL: url)\n\n        let session = NSURLSession(configuration: .defaultSessionConfiguration())\n        let task = session.dataTaskWithRequest(request, completionHandler: completionHandler)\n\n        task.resume()\n    }\n\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u308b\n\u5b9f\u969b\u306b\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u306e\u306f\u4e0a\u8ff0\u306e\u901a\u308a\n- XCTestExpectation\u306e\u5b9a\u7fa9\n- XCTestExpectation\u306efulfill\u547c\u3073\u51fa\u3057\n- waitForExpectationsWithTimeout\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\u307e\u305f\u3001\u5b9a\u7fa9\u3057\u305fXCTestExpectation\u306e\u6570\u5206\u3060\u3051fulfill\u3092\u547c\u3076\u3068\u3044\u3046\u3053\u3068\u3082\u91cd\u8981\u3067\u3059\u3002\n\uff08\u79c1\u306f\u3001\u306f\u3058\u3081test\u7528url\u306e\u914d\u5217\u306e\u9577\u3055\u5206\u3060\u3051\u30eb\u30fc\u30d7\u3055\u305b\u3066\u3044\u305f\u305f\u3081fulfill\u3092\u8907\u6570\u56de\u547c\u3093\u3067test Failed\u3068\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u6c17\u3065\u304f\u306e\u306b\u3057\u3070\u3089\u304f\u304b\u304b\u3063\u305f\u3001\u3001\uff09\n\nUrlSessionManagerTests.swift\nimport XCTest\n@testable import SwiftXCTestSample\n\nclass UrlSessionManagerTests: XCTestCase {\n    let urlSessionManager = UrlSessionManager()\n\n    override func setUp() {\n        super.setUp()\n    }\n\n    override func tearDown() {\n        super.tearDown()\n    }\n\n    func testDownloadImage() {\n\n        let imageDownloadExpectation: XCTestExpectation? = self.expectationWithDescription(\"download Image\")\n\n        let urlString = \"http://www.smartdt.jp/images/common/logo.png\"\n        urlSessionManager.downloadImage(urlString, completionHandler:{ (data, response, error) in\n            XCTAssertNil(error)\n            XCTAssertNotNil(data)\n            imageDownloadExpectation?.fulfill()\n        })\n        self.waitForExpectationsWithTimeout(0.02, handler: nil)        \n    }\n\n\n\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9\u3067\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u3082\u66f8\u3044\u3066\u307f\u308b\n\u305b\u3063\u304b\u304f\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u306e\u3067\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u3082\u3057\u3066\u307f\u307e\u3059\u3002\n\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u306b\u3064\u3044\u3066\u306f\u3001\u524d\u56de\u306eXCTest\u5165\u9580Part1\u3067\u3082\u8efd\u304f\u89e6\u308c\u305f\u306e\u3067\u8a73\u7d30\u8aac\u660e\u306f\u5272\u611b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\n\nUrlSessionManagerTests.swift\nfunc testPerformanceDownloadImage() {\n\n        self.measureBlock { [weak self] () in\n            guard let weakSelf = self else {\n                return\n            }\n\n            let imageDownloadExpectation: XCTestExpectation? = weakSelf.expectationWithDescription(\"download Image\")\n            let testUrlString = \"http://www.smartdt.jp/images/common/logo.png\"\n\n            weakSelf.urlSessionManager.downloadImage(testUrlString, completionHandler:{ (data, response, error) in\n                XCTAssertNil(error)\n                XCTAssertNotNil(data)\n                imageDownloadExpectation?.fulfill()\n            })\n            weakSelf.waitForExpectationsWithTimeout(0.02, handler: nil)\n\n        }\n    }\n\n\n\n\u3055\u3044\u3054\u306b\n\u4eca\u56de\u306fXCTest\u3067\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u65b9\u6cd5\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u975e\u540c\u671f\u51e6\u7406\u306f\u3088\u304f\u4f7f\u3046\u3068\u601d\u3046\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u66f8\u3044\u3066\u3042\u3052\u307e\u3057\u3087\u3046!\n#\u306f\u3058\u3081\u306b\n\u4eca\u56de\u306f\u3001XCTest\u3067\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u524d\u56de\u306fXCTest\u306e\u57fa\u790e\u3092\u8a18\u8f09\u3057\u307e\u3057\u305f\u3002\nhttp://qiita.com/okuderap/items/97f9d6026d0da59fef38\n\n\u3053\u3061\u3089\u3082\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nXCTest\u3067\u30ab\u30d0\u30ec\u30c3\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\nhttp://qiita.com/okuderap/items/de574685592fe0bee8ea\n\n#\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\nXCTest\u3067\u306f\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3093\u3067\u3059\u3002\n\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u306b\u306fXCTestExpectation\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```\nlet imageDownloadExpectation: XCTestExpectation? = \n    self.expectationWithDescription(\"download Image\")\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u5b9a\u7fa9\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4e2d\u306b\u8907\u6570\u306eexpectation\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescription\u306b\u306f\u3001\u975e\u540c\u671f\u51e6\u7406\u306e\u671f\u5f85\u3059\u308b\u7d50\u679c\u3092\u66f8\u3044\u3066\u3042\u3052\u308c\u3070\u826f\u3044\u304b\u3068\u3002\n\n\u671f\u5f85\u3059\u308b\u7d50\u679c\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3067\nXCTestExpectation\u306efulfill\u3092\u547c\u3073\u307e\u3059\u3002\n`imageDownloadExpectation?.fulfill()`\n\n\u305d\u308c\u304b\u3089\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u6642\u9593\u3092\u6c7a\u3081\u307e\u3059\u3002\n`waitForExpectationsWithTimeout(timeout: 0.05, handler:nil)`\n\u3053\u3093\u306a\u611f\u3058\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002handler\u306f\u3001\u4eca\u56de\u306fnil\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n**\u5b9a\u7fa9\u3057\u305fXCTestExpectation\u306e\u6570\u5206\u3060\u3051fulfill\u304c\u547c\u3070\u308c\u3066**\n\u4e14\u3064**\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u3066\u3044\u306a\u3051\u308c\u3070**test Succeeded\u3068\u306a\u308a\u307e\u3059\u3002\n\u3069\u3061\u3089\u304b\u4e00\u65b9\u3067\u3082\u6761\u4ef6\u3092\u6e80\u305f\u3059\u3053\u3068\u304c\u3067\u304d\u306a\u3051\u308c\u3070test Failed\u3068\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n#\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\n##\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30e1\u30bd\u30c3\u30c9\n\u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30c6\u30b9\u30c8\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n```swift:UrlSessionManager.swift\n    func downloadImage(urlString: String,\n                       completionHandler: ((NSData?, NSURLResponse?, NSError?) -> Void)) {\n        \n        guard let url = NSURL(string: urlString) else {\n            return\n        }\n        let request = NSURLRequest(URL: url)\n        \n        let session = NSURLSession(configuration: .defaultSessionConfiguration())\n        let task = session.dataTaskWithRequest(request, completionHandler: completionHandler)\n        \n        task.resume()\n    }\n```\n\n##\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u308b\n\u5b9f\u969b\u306b\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u306e\u306f\u4e0a\u8ff0\u306e\u901a\u308a\n- XCTestExpectation\u306e\u5b9a\u7fa9\n- XCTestExpectation\u306efulfill\u547c\u3073\u51fa\u3057\n- waitForExpectationsWithTimeout\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n\u307e\u305f\u3001\u5b9a\u7fa9\u3057\u305fXCTestExpectation\u306e\u6570\u5206\u3060\u3051fulfill\u3092\u547c\u3076\u3068\u3044\u3046\u3053\u3068\u3082\u91cd\u8981\u3067\u3059\u3002\n\uff08\u79c1\u306f\u3001\u306f\u3058\u3081test\u7528url\u306e\u914d\u5217\u306e\u9577\u3055\u5206\u3060\u3051\u30eb\u30fc\u30d7\u3055\u305b\u3066\u3044\u305f\u305f\u3081fulfill\u3092\u8907\u6570\u56de\u547c\u3093\u3067test Failed\u3068\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u6c17\u3065\u304f\u306e\u306b\u3057\u3070\u3089\u304f\u304b\u304b\u3063\u305f\u3001\u3001\uff09\n\n```swift:UrlSessionManagerTests.swift\nimport XCTest\n@testable import SwiftXCTestSample\n\nclass UrlSessionManagerTests: XCTestCase {\n    let urlSessionManager = UrlSessionManager()\n    \n    override func setUp() {\n        super.setUp()\n    }\n    \n    override func tearDown() {\n        super.tearDown()\n    }\n    \n    func testDownloadImage() {\n        \n        let imageDownloadExpectation: XCTestExpectation? = self.expectationWithDescription(\"download Image\")\n        \n        let urlString = \"http://www.smartdt.jp/images/common/logo.png\"\n        urlSessionManager.downloadImage(urlString, completionHandler:{ (data, response, error) in\n            XCTAssertNil(error)\n            XCTAssertNotNil(data)\n            imageDownloadExpectation?.fulfill()\n        })\n        self.waitForExpectationsWithTimeout(0.02, handler: nil)        \n    }\n```\n\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9\u3067\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n##\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u3082\u66f8\u3044\u3066\u307f\u308b\n\u305b\u3063\u304b\u304f\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u306e\u3067\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u3082\u3057\u3066\u307f\u307e\u3059\u3002\n\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u306b\u3064\u3044\u3066\u306f\u3001\u524d\u56de\u306eXCTest\u5165\u9580Part1\u3067\u3082\u8efd\u304f\u89e6\u308c\u305f\u306e\u3067\u8a73\u7d30\u8aac\u660e\u306f\u5272\u611b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\n\n``````swift:UrlSessionManagerTests.swift\nfunc testPerformanceDownloadImage() {\n        \n        self.measureBlock { [weak self] () in\n            guard let weakSelf = self else {\n                return\n            }\n            \n            let imageDownloadExpectation: XCTestExpectation? = weakSelf.expectationWithDescription(\"download Image\")\n            let testUrlString = \"http://www.smartdt.jp/images/common/logo.png\"\n            \n            weakSelf.urlSessionManager.downloadImage(testUrlString, completionHandler:{ (data, response, error) in\n                XCTAssertNil(error)\n                XCTAssertNotNil(data)\n                imageDownloadExpectation?.fulfill()\n            })\n            weakSelf.waitForExpectationsWithTimeout(0.02, handler: nil)\n            \n        }\n    }\n```\n\n\n#\u3055\u3044\u3054\u306b\n\u4eca\u56de\u306fXCTest\u3067\u975e\u540c\u671f\u51e6\u7406\u306e\u30c6\u30b9\u30c8\u3092\u3059\u308b\u65b9\u6cd5\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u975e\u540c\u671f\u51e6\u7406\u306f\u3088\u304f\u4f7f\u3046\u3068\u601d\u3046\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u66f8\u3044\u3066\u3042\u3052\u307e\u3057\u3087\u3046!\n", "tags": ["Swift", "iOS", "XCTest"]}