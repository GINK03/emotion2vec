{"context": "\n\n\u306f\u3058\u3081\u306b\nD3.js \u3067\u4f5c\u6210\u3057\u305f svg \u8981\u7d20\u3092 png \u5f62\u5f0f\u306e\u753b\u50cf\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\uff0e\u6ce8\u610f\u4e8b\u9805\u3068\u3057\u3066\uff0csvg \u8981\u7d20\u306e\u5927\u304d\u3055 (width \u3068 height) \u304c\u7d76\u5bfe\u5024\u3067\u6307\u5b9a\u3055\u308c\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\uff08\u3064\u307e\u308a 100% \u306a\u3069\u3067\u306f\u99c4\u76ee\uff09\uff0e\u307e\u305f\u3001\u30c6\u30ad\u30b9\u30c8\u8981\u7d20\u306b\u30d5\u30a9\u30f3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n\u30d5\u30a9\u30f3\u30c8\u306e\u6307\u5b9a\u306e\u4f8b\nobj.attr(\"font-family\", \"sans-serif\")\n    .attr(\"font-size\", \"14px\")\n    .attr(\"fill\", \"black\")\n\n\n\u5b9f\u969b\u306e\u5909\u63db\n\u65b9\u91dd\u306f\uff0csvg \u8981\u7d20\u306e\u4e2d\u8eab\u3092\u30c7\u30fc\u30bf URI \u30b9\u30ad\u30fc\u30e0\u3067\u8868\u3057\uff0ccanvas \u8981\u7d20\u306b\u8aad\u307f\u8fbc\u307e\u305b\u308b\uff0e\n// #svg1: \u30bf\u30fc\u30b2\u30c3\u30c8\u306e svg \u8981\u7d20\nvar width = $(\"#svg1\").width()\nvar height = $(\"#svg1\").height()\n$(\"body\").append(\"<canvas id='canvas1' class='hidden' width=\"\n                                  + width + \" height=\" + height +\"></canvas>\")\n\nvar canvas = $(\"#canvas1\")[0]\nvar ctx = canvas.getContext(\"2d\")\n\nvar svg = $(\"#svg1\")\nsvg.attr(\"viewBox\", \"0 0 \" + width + \" \" + height)\n\nvar data = new XMLSerializer().serializeToString(svg[0])\nvar imgsrc = \"data:image/svg+xml;charset=utf-8;base64,\"\n                       + btoa(unescape(encodeURIComponent(svgData)))\nvar image = new Image()\nimage.onload = function(){\n\n    ctx.drawImage(image, 0, 0);\n    // Optional: \u81ea\u52d5\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u305b\u308b\u5834\u5408\n    $(\"body\").append(\"<a id='image-file' class='hidden' type='application/octet-stream' href='\"\n                       + canvas.toDataURL(\"image/png\") + \"' download='graph.png'>Donload Image</a>\")\n    $(\"#image-file\")[0].click()\n\n    // \u5f8c\u51e6\u7406\n    $(\"#canvas1\").remove()\n    $(\"#image-file\").remove()\n\n}\nimage.src = imgsrc;\n\n(CoffeeScript\u7248)\n\n\u53c2\u8003\n\nD3.js\u306a\u3069\u3067\u51fa\u529b\u3055\u308c\u308bsvg\u3092\u753b\u50cf\u3068\u3057\u3066\u8868\u793a\u3059\u308b\u65b9\u6cd5\nSVG\u3092\u753b\u50cf\u307f\u305f\u3044\u306b\u4fdd\u5b58\u3067\u304d\u308bD3 Plugin\u4f5c\u3063\u305f\n\n# \u306f\u3058\u3081\u306b\nD3.js \u3067\u4f5c\u6210\u3057\u305f svg \u8981\u7d20\u3092 png \u5f62\u5f0f\u306e\u753b\u50cf\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\uff0e\u6ce8\u610f\u4e8b\u9805\u3068\u3057\u3066\uff0csvg \u8981\u7d20\u306e\u5927\u304d\u3055 (width \u3068 height) \u304c\u7d76\u5bfe\u5024\u3067\u6307\u5b9a\u3055\u308c\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\uff08\u3064\u307e\u308a 100% \u306a\u3069\u3067\u306f\u99c4\u76ee\uff09\uff0e\u307e\u305f\u3001\u30c6\u30ad\u30b9\u30c8\u8981\u7d20\u306b\u30d5\u30a9\u30f3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\uff0e\n\n__\u30d5\u30a9\u30f3\u30c8\u306e\u6307\u5b9a\u306e\u4f8b__\n\n```js\nobj.attr(\"font-family\", \"sans-serif\")\n    .attr(\"font-size\", \"14px\")\n    .attr(\"fill\", \"black\")\n```\n\n# \u5b9f\u969b\u306e\u5909\u63db\n\u65b9\u91dd\u306f\uff0csvg \u8981\u7d20\u306e\u4e2d\u8eab\u3092\u30c7\u30fc\u30bf URI \u30b9\u30ad\u30fc\u30e0\u3067\u8868\u3057\uff0ccanvas \u8981\u7d20\u306b\u8aad\u307f\u8fbc\u307e\u305b\u308b\uff0e\n\n```js\n// #svg1: \u30bf\u30fc\u30b2\u30c3\u30c8\u306e svg \u8981\u7d20\nvar width = $(\"#svg1\").width()\nvar height = $(\"#svg1\").height()\n$(\"body\").append(\"<canvas id='canvas1' class='hidden' width=\"\n                                  + width + \" height=\" + height +\"></canvas>\")\n\nvar canvas = $(\"#canvas1\")[0]\nvar ctx = canvas.getContext(\"2d\")\n\nvar svg = $(\"#svg1\")\nsvg.attr(\"viewBox\", \"0 0 \" + width + \" \" + height)\n\nvar data = new XMLSerializer().serializeToString(svg[0])\nvar imgsrc = \"data:image/svg+xml;charset=utf-8;base64,\"\n                       + btoa(unescape(encodeURIComponent(svgData)))\nvar image = new Image()\nimage.onload = function(){\n\n    ctx.drawImage(image, 0, 0);\n    // Optional: \u81ea\u52d5\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u305b\u308b\u5834\u5408\n    $(\"body\").append(\"<a id='image-file' class='hidden' type='application/octet-stream' href='\"\n                       + canvas.toDataURL(\"image/png\") + \"' download='graph.png'>Donload Image</a>\")\n    $(\"#image-file\")[0].click()\n\n    // \u5f8c\u51e6\u7406\n    $(\"#canvas1\").remove()\n    $(\"#image-file\").remove()\n\n}\nimage.src = imgsrc;\n```\n\n([CoffeeScript\u7248](https://gist.github.com/jkawamoto/657be368dbec2e8750a50e071789bc29))\n\n# \u53c2\u8003\n* [D3.js\u306a\u3069\u3067\u51fa\u529b\u3055\u308c\u308bsvg\u3092\u753b\u50cf\u3068\u3057\u3066\u8868\u793a\u3059\u308b\u65b9\u6cd5](http://qiita.com/okappy/items/bc20774aa08842adf4d7)\n* [SVG\u3092\u753b\u50cf\u307f\u305f\u3044\u306b\u4fdd\u5b58\u3067\u304d\u308bD3 Plugin\u4f5c\u3063\u305f](http://qiita.com/_likr/items/d9439806198f4b61010d)\n", "tags": ["HTML5", "JSON", "d3.js"]}