{"context": " More than 1 year has passed since last update.\u307f\u3093\u306a\u5bbf\u984c\u3067\u304d\u307e\u3057\u305f\u304b\uff1fProtocol\u5206\u304b\u308a\u307e\u3059\uff1fReact.js\u3092\u3088\u304f\u7406\u89e3\u3067\u304d\u307e\u3057\u305f\uff1f\n\u3088\u3063\u3057\uff01\n\u4eca\u56de\u306f\u3001Om\u306eDocumentation\u3092\u898b\u306a\u304c\u3089\u3001API\u3092\u63a2\u691c\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\uff0e\n\n\u3059\u3079\u3066\u306fom/root\u304b\u3089\u3067\u3059\uff01\n\u4e00\u756a\u4e2d\u5fc3\u306e\u306fom/root. Application\u3092\u7acb\u3061\u4e0a\u3052\u308bfunction\u3067\u3059\u3002\n(defn root\n  ([f value options] ...))\n\n\n\nf - \u4e8c\u3064\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u5c11\u306a\u304f\u3068\u3082IRender\u304b\u3001IRenderState\u3092\u5b9f\u88c5\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059function. \u2460\n\nvalue - atom\u304b\u30ab\u30fc\u30b5\u30fc\u306b\u306a\u308c\u308b\u5f62\u306eapp\u306e\u30c7\u30fc\u30bf\u3002\u307e\u3042\u3001map {:name \"Bob\"} \u304b vector [1 2 3] \u3067\u3059\u306d\u3002\u4e3b\u306b\u3001atom\u306b\u5dfb\u304d\u8fbc\u3093\u3060map. \u2461\n\noptions - \u30aa\u30d7\u30b7\u30e7\u30f3\u306emap\uff0e\u4e00\u3064\u3060\u3051\u3001\u306a\u304f\u3066\u884c\u3051\u306a\u3044\u306e\u306f\u3042\u308a\u307e\u3059\uff0e:target\u304c\u3001application\u304cDOM\u306e\u3069\u3053\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u304b\u3068\u3044\u3046\u3001DOM\u306e\u30a8\u30ec\u30e1\u30f3\u30c8\u3067\u3059\uff0e \u2462\n\n\u3059\u3054\u304f\u7c21\u5358\u306e\u4f8b\uff1a\n(om.core/root\n  (fn [app-state owner]                             ;\n    (reify                                          ;\n      om.core/IRender                               ;--[\u2460  - f]\n      (render [_]                                   ;\n        (dom/h1 nil (:text app-state)))))           ;\n\n  {:text \"Hello world!\"}                            ;--[\u2461 - value]\n\n  {:target (. js/document getElementById \"my-app\")});--[\u2462 - options]\n\n\n\u307b\u304b\u306e\u3088\u304f\u4f7f\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u3001\u4f8b\u3048\u3070\u3001:shared - \u4e00\u56de\u3057\u304b\u4f5c\u308c\u306a\u3044\u3051\u3069\u3001\u30a2\u30d7\u30ea\u306e\u3069\u3053\u304b\u3089\u3067\u3082\u8aad\u3081\u308b\u30c7\u30fc\u30bf.Global\u306e\u3001\u5909\u308f\u3089\u306a\u3044\u30c7\u30fc\u30bf\u306e\u305f\u3081\u3067\u3059\uff0e\n\u305f\u3068\u3048\u3070\u3002\u3002\n{:target (. js/document getElementById \"my-app\") \n :shared {:api-key \"aht80qht2q8301t382t\" :font-color \"#33aa22\"}\n\n\u305d\u3057\u3066\u3001\u3042\u308bComponent\u3068\u306e\u4e2d\u3067om/get-shared\u3092\u4f7f\u3063\u3066\u3002\u3002\uff1a\n(defn my-widget [data owner]\n  (reify\n    om/IRender\n    (render [_]\n      (dom/h1 #js {:style #js {:color (om/get-shared owner :font-color)}} \n      (:text data)))))\n\n:shared\u3082\u3001core.async\u3067\u4f5c\u3063\u305fchan\u3092\u4f7f\u3063\u3066\u3001\u30a2\u30d7\u30ea\u5168\u4f53\u306eEvent\u3092\u53d7\u3051\u3068\u3063\u3066\u3001\u30c7\u30fc\u30bf\u306eatom\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u304c\u3088\u304f\u898b\u304b\u3051\u307e\u3059\uff0e\n\u305d\u3046\u3057\u307e\u3059\u3068\u3001Facebook\u306eReact Team\u304cFlux\u3068\u3044\u3046Architecture\u306b\u8fd1\u3044\u611f\u3058\u306e\u3001\u5206\u304b\u308a\u3084\u3059\u3044App\u306e\u30d5\u30ed\u30fc\u304c\u51fa\u6765\u307e\u3059\uff0e\n\n\nComponent\u3092\u4f5c\u308b\nApp\u306e\u5168\u90e8\u306e\u30b3\u30fc\u30c9\u3092om/root\u306b\u7d99\u8fbc\u3093\u3067\u306f\u884c\u3051\u306a\u3044\u306e\u3067\u3001Component\u306b\u5206\u3051\u307e\u3057\u3087\u3046\u3002\u3057\u304b\u3057\u3001Om\u3067\u8a00\u3046Component\u306e\u8a00\u8449\u306f\u5b9f\u969b\u4f55\u3067\u3057\u3087\u3046\uff1f\n\u4e2d\u8eab\u306fReact\u306eComponent\u3067\u3059\u3002\u3057\u304b\u3057\u3001Om\u306e\u305f\u3081\u306e\u7279\u5225\u306aprops\u304c\u7740\u3044\u3066\u3044\u308bReact\u306eComponent\u3067\u3059\u3002\n\u3053\u306eComponent\u3092\u4f5c\u308b\u306b\u306f\u3001om/build\u304c\u4e00\u756a\u57fa\u672c\u3067\u3059\u3002\n(defn build\n  ([f x] ...)\n  ([f x m] ...))\n\n\nf - cursor\u3068owner\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u5c11\u306a\u304f\u3068\u3082IRender\u304b\u3001IRenderState\u3092\u5b9f\u88c5\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059function (\u3042\u3001\u3053\u308c\uff0e\uff0e\u3069\u3063\u304b\u3067\u898b\u305f\u4e8b\u3042\u308b\u306a\uff0e\uff0e)\nx - Cursor\nm - (optional) - Option\u306emap\n\nIRender\u304b\u3001IRenderState\u3092\u5b9f\u88c5\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u304c\u3001\u3053\u308c\u3092\u3082\u3063\u3068\u6df1\u304f\u898b\u307e\u3057\u3087\u3046\uff0e\n\nLife Cycle Protocols\n\u3053\u306e\u30ea\u30b9\u30c8\u306e\u4e00\u3064\u4e00\u3064\u3092\u898b\u307e\u3057\u3087\u3046\u304b\uff01React\u306eComponent\u306eLife Cycle\u3068\u8fd1\u3044\u6d41\u308c\u3067\u3059\uff0e\n\nmount\u76f4\u524d\u3001render\u3001mount\u76f4\u5f8c\n\nIRender\n(defn my-widget [data owner]\n  (reify\n    om/IRender\n    (render [this]\n      (dom/h1 nil {:name data}))))\n\n\u3053\u308c\u304c\u4e00\u756a\u30b7\u30f3\u30d7\u30eb\u306e\u305f\u3068\u3048\u3067\u3059\uff0eRender\u3059\u308b\u3068\u304d\u3060\u3051\u306efunction\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u3002\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u305f\u3081\u3001\u4fbf\u5229\u306a\u30de\u30af\u30ed\u304c\u3042\u308a\u307e\u3059\uff0e\u4f8b\uff1a\n(defn title-widget [app]\n  (om/component\n    (dom/div nil\n      (dom/h1 nil \"Yeah! Cool Widget!\")\n      (dom/p nil (str \"Hello \" (:name app) \"!\"))))\n\n\u304d\u308c\u3044\u3067\u3057\u3087\u3046\uff01\n\nIInitState / IRenderState\n\u30a2\u30c3\u30d7\u5168\u4f53\u306b\u95a2\u4fc2\u306a\u3044\u3051\u3069\u3001\u3068\u3063\u3068\u304b\u306a\u3044\u3068\u884c\u3051\u306a\u3044\u30c7\u30fc\u30bf\u306fstate\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\uff0e\u4f8b\u3048\u3070\u3001\u30bb\u30fc\u30d6\u3059\u308b\u524d\u306e\u9014\u4e2d\u306eform\u3068\u304b\u3001input\u306b\u66f8\u3044\u3066\u3044\u308btext\u3068\u304b\u3002\u3002\nom/InitState\u304b\u3089\u3001\u30de\u30c3\u30d7\u3092\u8fd4\u3057\u307e\u3057\u3087\u3046\uff0e\n(defn my-widget [data owner]\n  (reify\n    om/IInitState\n    (init-state [_]\n      {:text \"Hello world!\"})\n    om/IRenderState\n    (render-state [_ state]\n      (dom/h1 nil (:text state)))))\n\n\u305d\u3057\u305f\u3089\u3001om/IRenderState\u306e\uff12\u756a\u76ee\u306e\u5f15\u6570\u3067\u305d\u306emap\u3092\u4f7f\u3048\u308b\uff0e\ncore.async\u3092\u4f7f\u3046\u6642\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u3051\u53d6\u308b\u305f\u3081\u3001state\u306b(chan)\u3092\u4ed8\u3051\u308b\u306e\u3082\u3088\u304f\u3042\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\uff0e1, 2, 3\nstate\u306e\u4e00\u3064\u306e\u90e8\u5206\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001om/set-state!, [om/update-state!]\u304c\u3042\u308a\u307e\u3059\u3002\n\u3042\u3068\u3001map\u3092\u5909\u63db\u3059\u308bfunction\u3092\u53d7\u3051\u53d6\u308bupdate-state!\u3082\u3042\u308a\u307e\u3059\u3002\n; set state\n(om/set-state! owner :text \"Yo! New Text\")\n\n; update state.\n(om/update-state! owner #(assoc! % :text \"new text\" \n                                   :count (inc (:count %))))\n\n\nIWillMount\n(defn my-widget [data owner]\n  (reify\n    om/IWillMount\n    (will-mount [this]\n      (print \"My Widget about to Mount!\"))\n    om/IRender\n    (render [this]\n      (dom/h1 nil {:name data}))))\n\nComponent\u304c\u6700\u521d\u306bDom\u306b\u306e\u308b\u3068\u304d\u306b\u547c\u3070\u308c\u308bfunction. core.async\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u304d\u3001\u3053\u3053\u3067go loop\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u4fbf\u5229\u3002 eg. 1, 2, 3\n\nIDidMount\nDOM\u306b\u306e\u3063\u305f\u3059\u3050\u5f8c\u306b\u547c\u3070\u308c\u307e\u3059\uff0ejs\u306elibrary\u3092\u4f7f\u3063\u3066\u3044\u308b\u6642\u306b\u4fbf\u5229\u3067\u3059\uff0e\u4f8b\u3048\u3070\u3001CodeMirror\u306beditor\u3092instantiate\u3059\u308b\n\u3042\u3068\u3001canvas\u3092\u4f7f\u3046\u6642context\u3092\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u70ba\u306b\u5f79\u306b\u7acb\u3061\u307e\u3059\uff0e\nDOM\u306eElement\u81ea\u4f53\u3092\u4f7f\u3046\u3068\u304d\u306b\u4f7f\u3048\u307e\u3059\uff0e\n\nprops / state\u306e\u5909\u63db\u306e\u30bf\u30a4\u30df\u30f3\u30b0\n\u4e0b\u8a18\u306efunction\u306f\u3001\u4e00\u56de\u76ee\u306erender\u306b\u547c\u3070\u308c\u307e\u305b\u3093\u3002\u305d\u3057\u3066\u3001\u30c7\u30fc\u30bf\u304c\u65b0\u3057\u304f\u306a\u3063\u305f\u3084\u3001state\u304c\u5909\u308f\u3063\u305f\u5834\u5408\u306b\u3001render\u3059\u308b\u524d\u3068\u5f8c\u306b\u547c\u3070\u308c\u307e\u3059\uff0e\n\nIWillReceiveProps\n\u30a2\u30c3\u30d7\u306e\u30b9\u30c6\u30fc\u30c8\u304c\u5909\u308f\u3063\u305f\u3068\u304d\u306b\u3088\u3070\u308c\u308bfunction. \u4f8b\u3048\u3070\u3001local\u306estate\u3092global\u306e\u30c7\u30fc\u30bf\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u306a\u3069\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\uff0e\n\nIWillUpdate\n\u4e00\u56de\u76ee\u4ee5\u5916\u306erender\u76f4\u524d\u306b\u547c\u3070\u308c\u308bfunction.\nIWillReceiveProps \u3068 IWillUpdate\u306efunction\u306e\u4e2d\u3067\u3001om/get-props\u304c\u4e00\u3064\u524d\u306eprops\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u3060\u304b\u3089\u3001\u3069\u3053\u304c\u5909\u308f\u3063\u305f\u304b\u3001\u30c1\u30a7\u30c3\u30af\u3067\u304d\u307e\u3059\uff0e\u305d\u308c\u306b\u3088\u3063\u3066\u3001local\u306e\u30b9\u30c6\u30fc\u30c8\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\u3057\u306a\u3044\u304b\u3068\u3044\u3046\u5224\u65ad\u51fa\u6765\u307e\u3059\uff0e\n   om/IWillUpdate\n    (will-update [_ next-props next-state]\n      (when (not= (om/get-props owner) next-props)\n        (om/set-state! owner ....)))\n\n\nIDidUpdate\nrendering\u304c\u7d42\u308f\u3063\u305f\u76f4\u524d\u3002\u4f8b\u3048\u3070\u3001state\u306b\u3088\u3063\u3066\u3001rendering\u3057\u305finput\u30bf\u30b0\u3092focus\u3059\u308b\n    om/IDidUpdate\n    (did-update [_ _ prev-state]\n                (if (:editing prev-state)\n                  (-> (om/get-node owner \"nameInput\")\n                      (.focus))))\n\n\nIShouldUpdate\nupdate\u3059\u308b\u3079\u304d\u304b\u3069\u3046\u304b\u3092\u3001boolean\u8fd4\u3059\u4e8b\u306b\u3088\u3063\u3066\u5224\u65ad\u3067\u304d\u307e\u3059\uff0e\u3057\u304b\u3057\u3001\u3042\u307e\u308a\u4f7f\u308f\u308c\u306a\u3044\u3067\u3059\u3002app\u306b\u3064\u3044\u3066\u8003\u3048\u308b\u306e\u304c\u96e3\u3057\u304f\u306a\u308b\u3002\n\n\u6700\u5f8c\u3068debug\n\nIWillUnmount\n\u30a8\u30ec\u30e1\u30f3\u30c8\u304cDOM\u304b\u3089\u6d88\u3048\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3088\u3070\u308c\u307e\u3059\u3002\nsetInterval\u306e\u30bf\u30a4\u30de\u30fc\u3084xhr\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092invalidate\u3059\u308b\u305f\u3081\u306b\u306f\u4fbf\u5229\u3067\u3057\u3087\u3046\uff0e\n\nIDisplayName\nstring\u3092\u8fd4\u305b\u3070\u3001DOM\u306brendering\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001console\u306b\u66f8\u304f\u4e8b\u304c\u51fa\u6765\u307e\u3059\uff0e\n    om/IDisplayName\n    (display-name [_] \"I'm rendering!\")\n\n\u3068\u3044\u3046\u3001\u611f\u3058\u3067\u3059\u306d\uff01\n\u3042\u30fc\u30fc\u3002\u75b2\u308c\u307e\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u306b\u3057\u307e\u3059\uff0e\nnext time\u306fcore.async\u3067event\u306e\u53d7\u3051\u53d6\u308a\u306b\u3064\u3044\u3066\u66f8\u3053\u3046\u304b\u306a\uff0e\n\u307f\u3093\u306a\u5bbf\u984c\u3067\u304d\u307e\u3057\u305f\u304b\uff1f`Protocol`\u5206\u304b\u308a\u307e\u3059\uff1fReact.js\u3092\u3088\u304f\u7406\u89e3\u3067\u304d\u307e\u3057\u305f\uff1f\n\n\u3088\u3063\u3057\uff01\n\n\u4eca\u56de\u306f\u3001Om\u306e[Documentation](https://github.com/swannodette/om/wiki/Documentation)\u3092\u898b\u306a\u304c\u3089\u3001API\u3092\u63a2\u691c\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\uff0e\n\n## \u3059\u3079\u3066\u306fom/root\u304b\u3089\u3067\u3059\uff01\n\n\u4e00\u756a\u4e2d\u5fc3\u306e\u306f[om/root](https://github.com/swannodette/om/wiki/Documentation#root). Application\u3092\u7acb\u3061\u4e0a\u3052\u308bfunction\u3067\u3059\u3002\n\n```clj\n(defn root\n  ([f value options] ...))\n```\n\n* `f` - \u4e8c\u3064\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u5c11\u306a\u304f\u3068\u3082`IRender`\u304b\u3001`IRenderState`\u3092\u5b9f\u88c5\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059function. \u2460\n* `value` - `atom`\u304b\u30ab\u30fc\u30b5\u30fc\u306b\u306a\u308c\u308b\u5f62\u306eapp\u306e\u30c7\u30fc\u30bf\u3002\u307e\u3042\u3001map `{:name \"Bob\"}` \u304b vector `[1 2 3]` \u3067\u3059\u306d\u3002\u4e3b\u306b\u3001`atom`\u306b\u5dfb\u304d\u8fbc\u3093\u3060`map`. \u2461\n* `options` - \u30aa\u30d7\u30b7\u30e7\u30f3\u306emap\uff0e\u4e00\u3064\u3060\u3051\u3001\u306a\u304f\u3066\u884c\u3051\u306a\u3044\u306e\u306f\u3042\u308a\u307e\u3059\uff0e`:target`\u304c\u3001application\u304cDOM\u306e\u3069\u3053\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u304b\u3068\u3044\u3046\u3001DOM\u306e\u30a8\u30ec\u30e1\u30f3\u30c8\u3067\u3059\uff0e \u2462\n\n\u3059\u3054\u304f\u7c21\u5358\u306e\u4f8b\uff1a\n\n```clj\n(om.core/root\n  (fn [app-state owner]                             ;\n    (reify                                          ;\n      om.core/IRender                               ;--[\u2460  - f]\n      (render [_]                                   ;\n        (dom/h1 nil (:text app-state)))))           ;\n\n  {:text \"Hello world!\"}                            ;--[\u2461 - value]\n\n  {:target (. js/document getElementById \"my-app\")});--[\u2462 - options]\n\n```\n\n\u307b\u304b\u306e\u3088\u304f\u4f7f\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u3001\u4f8b\u3048\u3070\u3001:shared - \u4e00\u56de\u3057\u304b\u4f5c\u308c\u306a\u3044\u3051\u3069\u3001\u30a2\u30d7\u30ea\u306e\u3069\u3053\u304b\u3089\u3067\u3082\u8aad\u3081\u308b\u30c7\u30fc\u30bf.Global\u306e\u3001\u5909\u308f\u3089\u306a\u3044\u30c7\u30fc\u30bf\u306e\u305f\u3081\u3067\u3059\uff0e\n\n\u305f\u3068\u3048\u3070\u3002\u3002\n\n```clj\n{:target (. js/document getElementById \"my-app\") \n :shared {:api-key \"aht80qht2q8301t382t\" :font-color \"#33aa22\"}\n```\n\n\u305d\u3057\u3066\u3001\u3042\u308bComponent\u3068\u306e\u4e2d\u3067[om/get-shared](https://github.com/swannodette/om/wiki/Documentation#get-shared)\u3092\u4f7f\u3063\u3066\u3002\u3002\uff1a\n\n```clj\n(defn my-widget [data owner]\n  (reify\n    om/IRender\n    (render [_]\n      (dom/h1 #js {:style #js {:color (om/get-shared owner :font-color)}} \n      (:text data)))))\n```\n\n`:shared`\u3082\u3001`core.async`\u3067\u4f5c\u3063\u305f`chan`\u3092\u4f7f\u3063\u3066\u3001\u30a2\u30d7\u30ea\u5168\u4f53\u306eEvent\u3092\u53d7\u3051\u3068\u3063\u3066\u3001\u30c7\u30fc\u30bf\u306e`atom`\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u304c[\u3088\u304f\u898b\u304b\u3051\u307e\u3059](https://github.com/search?utf8=%E2%9C%93&q=om.dom+core.async+shared+root&type=Code&ref=searchresults)\uff0e\n\n\u305d\u3046\u3057\u307e\u3059\u3068\u3001Facebook\u306eReact Team\u304cFlux\u3068\u3044\u3046Architecture\u306b\u8fd1\u3044\u611f\u3058\u306e\u3001\u5206\u304b\u308a\u3084\u3059\u3044App\u306e\u30d5\u30ed\u30fc\u304c\u51fa\u6765\u307e\u3059\uff0e\n\n![Untitled Diagram (3).png](https://qiita-image-store.s3.amazonaws.com/0/32921/e204de1c-85e2-ba74-6794-c5d463b6dc80.png)\n\n\n## Component\u3092\u4f5c\u308b\n\nApp\u306e\u5168\u90e8\u306e\u30b3\u30fc\u30c9\u3092`om/root`\u306b\u7d99\u8fbc\u3093\u3067\u306f\u884c\u3051\u306a\u3044\u306e\u3067\u3001Component\u306b\u5206\u3051\u307e\u3057\u3087\u3046\u3002\u3057\u304b\u3057\u3001Om\u3067\u8a00\u3046Component\u306e\u8a00\u8449\u306f\u5b9f\u969b\u4f55\u3067\u3057\u3087\u3046\uff1f\n\n\u4e2d\u8eab\u306f[React\u306eComponent](http://facebook.github.io/react/docs/component-api.html)\u3067\u3059\u3002\u3057\u304b\u3057\u3001Om\u306e\u305f\u3081\u306e[\u7279\u5225\u306aprops](https://github.com/swannodette/om/blob/master/src/om/core.cljs#L890-L901)\u304c\u7740\u3044\u3066\u3044\u308bReact\u306eComponent\u3067\u3059\u3002\n\n\u3053\u306eComponent\u3092\u4f5c\u308b\u306b\u306f\u3001[om/build](https://github.com/swannodette/om/wiki/Documentation#build)\u304c\u4e00\u756a\u57fa\u672c\u3067\u3059\u3002\n\n```clj\n(defn build\n  ([f x] ...)\n  ([f x m] ...))\n```\n\n* f - `cursor`\u3068`owner`\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u5c11\u306a\u304f\u3068\u3082`IRender`\u304b\u3001`IRenderState`\u3092\u5b9f\u88c5\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059function (\u3042\u3001\u3053\u308c\uff0e\uff0e\u3069\u3063\u304b\u3067\u898b\u305f\u4e8b\u3042\u308b\u306a\uff0e\uff0e)\n* x - Cursor\n* m - (optional) - Option\u306emap\n\n`IRender`\u304b\u3001`IRenderState`\u3092\u5b9f\u88c5\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u304c\u3001\u3053\u308c\u3092\u3082\u3063\u3068\u6df1\u304f\u898b\u307e\u3057\u3087\u3046\uff0e\n\n## Life Cycle Protocols\n\n[\u3053\u306e\u30ea\u30b9\u30c8](https://github.com/swannodette/om/wiki/Documentation#life-cycle-protocols)\u306e\u4e00\u3064\u4e00\u3064\u3092\u898b\u307e\u3057\u3087\u3046\u304b\uff01[React\u306eComponent\u306eLife Cycle](http://qiita.com/minikomi/items/91c04113e11e7aeec89d)\u3068\u8fd1\u3044\u6d41\u308c\u3067\u3059\uff0e\n\n### mount\u76f4\u524d\u3001render\u3001mount\u76f4\u5f8c\n\n#### IRender\n\n```clj\n(defn my-widget [data owner]\n  (reify\n    om/IRender\n    (render [this]\n      (dom/h1 nil {:name data}))))\n```\n\n\u3053\u308c\u304c\u4e00\u756a\u30b7\u30f3\u30d7\u30eb\u306e\u305f\u3068\u3048\u3067\u3059\uff0eRender\u3059\u308b\u3068\u304d\u3060\u3051\u306efunction\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u3002\n\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u305f\u3081\u3001[\u4fbf\u5229\u306a\u30de\u30af\u30ed](https://github.com/swannodette/om/wiki/Documentation#component)\u304c\u3042\u308a\u307e\u3059\uff0e\u4f8b\uff1a\n\n```clj\n(defn title-widget [app]\n  (om/component\n    (dom/div nil\n      (dom/h1 nil \"Yeah! Cool Widget!\")\n      (dom/p nil (str \"Hello \" (:name app) \"!\"))))\n```\n\n\u304d\u308c\u3044\u3067\u3057\u3087\u3046\uff01\n\n#### IInitState / IRenderState\n\n\u30a2\u30c3\u30d7\u5168\u4f53\u306b\u95a2\u4fc2\u306a\u3044\u3051\u3069\u3001\u3068\u3063\u3068\u304b\u306a\u3044\u3068\u884c\u3051\u306a\u3044\u30c7\u30fc\u30bf\u306fstate\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\uff0e\u4f8b\u3048\u3070\u3001\u30bb\u30fc\u30d6\u3059\u308b\u524d\u306e\u9014\u4e2d\u306eform\u3068\u304b\u3001input\u306b\u66f8\u3044\u3066\u3044\u308btext\u3068\u304b\u3002\u3002\n\nom/InitState\u304b\u3089\u3001\u30de\u30c3\u30d7\u3092\u8fd4\u3057\u307e\u3057\u3087\u3046\uff0e\n\n```clj\n(defn my-widget [data owner]\n  (reify\n    om/IInitState\n    (init-state [_]\n      {:text \"Hello world!\"})\n    om/IRenderState\n    (render-state [_ state]\n      (dom/h1 nil (:text state)))))\n```\n\n\u305d\u3057\u305f\u3089\u3001om/IRenderState\u306e\uff12\u756a\u76ee\u306e\u5f15\u6570\u3067\u305d\u306emap\u3092\u4f7f\u3048\u308b\uff0e\n\ncore.async\u3092\u4f7f\u3046\u6642\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u3051\u53d6\u308b\u305f\u3081\u3001state\u306b(chan)\u3092\u4ed8\u3051\u308b\u306e\u3082\u3088\u304f\u3042\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\uff0e[1](https://github.com/sethtrain/mantlerock/blob/f059019305dd21e4850c7a0d9dd18e53dbc40ae2/src/cljs/mantlerock/board.cljs#L52-L56), [2](https://github.com/H4ssi/metronome/blob/0d290ffd2eabab7c44830a6832d4301697d05464/src/metronome/core.cljs#L83-L85), [3](https://github.com/tangrammer/open-stack-ui/blob/1c68c6e5a73586cf0e0adbf139d0d9f28b867395/src/cljs/heroku/images.cljs#L48-L51)\n\nstate\u306e\u4e00\u3064\u306e\u90e8\u5206\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001[om/set-state!](https://github.com/swannodette/om/wiki/Documentation#set-state), [om/update-state!]\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3042\u3068\u3001map\u3092\u5909\u63db\u3059\u308bfunction\u3092\u53d7\u3051\u53d6\u308b[update-state!](https://github.com/swannodette/om/wiki/Documentation#update-state)\u3082\u3042\u308a\u307e\u3059\u3002\n\n```clj\n; set state\n(om/set-state! owner :text \"Yo! New Text\")\n\n; update state.\n(om/update-state! owner #(assoc! % :text \"new text\" \n                                   :count (inc (:count %))))\n```\n\n#### IWillMount\n\n```clj\n(defn my-widget [data owner]\n  (reify\n    om/IWillMount\n    (will-mount [this]\n      (print \"My Widget about to Mount!\"))\n    om/IRender\n    (render [this]\n      (dom/h1 nil {:name data}))))\n```\n\nComponent\u304c\u6700\u521d\u306bDom\u306b\u306e\u308b\u3068\u304d\u306b\u547c\u3070\u308c\u308bfunction. core.async\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u304d\u3001\u3053\u3053\u3067[go loop\u3092\u8a2d\u5b9a\u3059\u308b](https://github.com/search?utf8=%E2%9C%93&q=iwillmount+om+core.async&type=Code&ref=searchresults)\u3068\u4fbf\u5229\u3002 eg. [1](https://github.com/borkdude/lein-new-wrom/blob/361650e56038ab22adb7125732ca1b2799dfc89d/src/leiningen/new/wrom/client.cljs#L16-L22), [2](https://github.com/pbostrom/om-editor-app/blob/fd26b5d5b8ea752bf3db76629b3f09dfc66b18d4/src/om_editor/app.cljs#L15-L20), [3](https://github.com/muhbaasu/virtus-old/blob/5dd0a3dc29e380a34e602eccdf3353cb9749ee38/client/src/cljs/virtus/expenses.cljs#L27-L31)\n\n#### IDidMount\n\nDOM\u306b\u306e\u3063\u305f\u3059\u3050\u5f8c\u306b\u547c\u3070\u308c\u307e\u3059\uff0ejs\u306elibrary\u3092\u4f7f\u3063\u3066\u3044\u308b\u6642\u306b\u4fbf\u5229\u3067\u3059\uff0e\u4f8b\u3048\u3070\u3001[CodeMirror](http://codemirror.net/)\u306beditor\u3092[instantiate\u3059\u308b](https://github.com/pbostrom/om-codemirror/blob/1b1bdea929694f7f10b05591e2289017b57e1740/src/om_codemirror/core.cljs#L22)\n\u3042\u3068\u3001canvas\u3092\u4f7f\u3046\u6642[context\u3092\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b](https://github.com/angusiguess/om-life/blob/0b7e197c0ba9b291d13ac36d2c79a1c4a6a7b088/src/om_canvas/core.cljs#L67)\u70ba\u306b\u5f79\u306b\u7acb\u3061\u307e\u3059\uff0e\n\nDOM\u306eElement\u81ea\u4f53\u3092\u4f7f\u3046\u3068\u304d\u306b\u4f7f\u3048\u307e\u3059\uff0e\n\n### props / state\u306e\u5909\u63db\u306e\u30bf\u30a4\u30df\u30f3\u30b0\n\n\u4e0b\u8a18\u306efunction\u306f\u3001\u4e00\u56de\u76ee\u306erender\u306b\u547c\u3070\u308c\u307e\u305b\u3093\u3002\u305d\u3057\u3066\u3001\u30c7\u30fc\u30bf\u304c\u65b0\u3057\u304f\u306a\u3063\u305f\u3084\u3001state\u304c\u5909\u308f\u3063\u305f\u5834\u5408\u306b\u3001render\u3059\u308b\u524d\u3068\u5f8c\u306b\u547c\u3070\u308c\u307e\u3059\uff0e\n\n#### IWillReceiveProps \n\n\u30a2\u30c3\u30d7\u306e\u30b9\u30c6\u30fc\u30c8\u304c\u5909\u308f\u3063\u305f\u3068\u304d\u306b\u3088\u3070\u308c\u308bfunction. \u4f8b\u3048\u3070\u3001local\u306estate\u3092global\u306e\u30c7\u30fc\u30bf\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u306a\u3069\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\uff0e\n\n#### IWillUpdate\n\n\u4e00\u56de\u76ee\u4ee5\u5916\u306erender\u76f4\u524d\u306b\u547c\u3070\u308c\u308bfunction.\n\n`IWillReceiveProps` \u3068 `IWillUpdate`\u306efunction\u306e\u4e2d\u3067\u3001om/get-props\u304c\u4e00\u3064\u524d\u306eprops\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u3060\u304b\u3089\u3001\u3069\u3053\u304c\u5909\u308f\u3063\u305f\u304b\u3001\u30c1\u30a7\u30c3\u30af\u3067\u304d\u307e\u3059\uff0e\u305d\u308c\u306b\u3088\u3063\u3066\u3001[local\u306e\u30b9\u30c6\u30fc\u30c8\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u304b\u3057\u306a\u3044\u304b](https://github.com/benmoss/om-demos/blob/1d84b2134a8f80d75c46a703bacdcf4ad5b78710/src/om_demos/core.cljs#L23-L26)\u3068\u3044\u3046\u5224\u65ad\u51fa\u6765\u307e\u3059\uff0e\n\n```clj\n   om/IWillUpdate\n    (will-update [_ next-props next-state]\n      (when (not= (om/get-props owner) next-props)\n        (om/set-state! owner ....)))\n```\n\n#### IDidUpdate\n\nrendering\u304c\u7d42\u308f\u3063\u305f\u76f4\u524d\u3002\u4f8b\u3048\u3070\u3001state\u306b\u3088\u3063\u3066\u3001rendering\u3057\u305f`input`\u30bf\u30b0\u3092focus\u3059\u308b\n\n```clj\n    om/IDidUpdate\n    (did-update [_ _ prev-state]\n                (if (:editing prev-state)\n                  (-> (om/get-node owner \"nameInput\")\n                      (.focus))))\n```\n\n#### IShouldUpdate\n\nupdate\u3059\u308b\u3079\u304d\u304b\u3069\u3046\u304b\u3092\u3001`boolean`\u8fd4\u3059\u4e8b\u306b\u3088\u3063\u3066\u5224\u65ad\u3067\u304d\u307e\u3059\uff0e\u3057\u304b\u3057\u3001\u3042\u307e\u308a\u4f7f\u308f\u308c\u306a\u3044\u3067\u3059\u3002app\u306b\u3064\u3044\u3066\u8003\u3048\u308b\u306e\u304c\u96e3\u3057\u304f\u306a\u308b\u3002\n\n### \u6700\u5f8c\u3068debug\n\n#### IWillUnmount\n\n\u30a8\u30ec\u30e1\u30f3\u30c8\u304cDOM\u304b\u3089\u6d88\u3048\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3088\u3070\u308c\u307e\u3059\u3002\n`setInterval`\u306e\u30bf\u30a4\u30de\u30fc\u3084`xhr`\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092invalidate\u3059\u308b\u305f\u3081\u306b\u306f\u4fbf\u5229\u3067\u3057\u3087\u3046\uff0e\n\n#### IDisplayName\n\nstring\u3092\u8fd4\u305b\u3070\u3001DOM\u306brendering\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001`console`\u306b\u66f8\u304f\u4e8b\u304c\u51fa\u6765\u307e\u3059\uff0e\n\n```clj\n    om/IDisplayName\n    (display-name [_] \"I'm rendering!\")\n```\n\n\n\u3068\u3044\u3046\u3001\u611f\u3058\u3067\u3059\u306d\uff01\n\u3042\u30fc\u30fc\u3002\u75b2\u308c\u307e\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u306b\u3057\u307e\u3059\uff0e\nnext time\u306fcore.async\u3067event\u306e\u53d7\u3051\u53d6\u308a\u306b\u3064\u3044\u3066\u66f8\u3053\u3046\u304b\u306a\uff0e\n\n\n\n\n", "tags": ["ClojureScript"]}