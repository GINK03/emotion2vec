{"context": "\n\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u7269\u8a9e\n\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u306b\u81ea\u7136\u3068\u751f\u307e\u308c\u3066\u304f\u308b\u30ba\u30f3\u3002\n\u30ba\u30f3\u3060\u3051\u3067\u4ef2\u3088\u304f\u66ae\u3089\u3059\u304c\u3001\u307e\u308c\u306b\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u306e\u6012\u308a\u306b\u3088\u308a\u30c9\u30b3\u306b\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\u30c9\u30b3\u306b\u306a\u3063\u305f\u30ba\u30f3\u306f\u591c\u306b\u306a\u308b\u3068\u5468\u308a\u306e\u30ba\u30f3\u3068\u6226\u3044\u3001\u751f\u304d\u5ef6\u3073\u305f\u30c9\u30b3\u306f\u65b0\u3057\u3044\u30ba\u30f3\u3068\u95a2\u308f\u308b\u3053\u3068\u306a\u304f\u4e00\u4eba\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u3092\u751f\u304d\u3066\u3044\u304f...\u3002\n\u30c9\u30b3\u306b\u306a\u3063\u305f\u30ba\u30f3\u304c\u6b7b\u306c\u3068\u304d\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u306e\u6012\u308a\u304c\u7206\u767a\u3059\u308b\u3002\nclass KiyoshiLand\n  def initialize\n    @people = []\n  end\n\n  def <<(newcomer)\n    @people.select(&:alive?).each {|person| person.hi(newcomer) and newcomer.hi(person) }\n    @people << newcomer\n  end\n\n  def angry?\n    rand(2).zero?\n  end\n\n  def each_person\n    @people.each {|person| yield person }\n  end\n\n  def produce_zun\n    Zun.new.tap {|zun| self << zun }\n  end\nend\n\nclass Zun\n  def initialize\n    @life = 1\n    @neighbors = []\n  end\n\n  def <<(damage)\n    @life -= damage\n    dead unless @life > 0\n  end\n\n  def alive?\n    true\n  end\n\n  def attack(person)\n    person << damage\n  end\n\n  def bomb\n    '\u30ad\u30fb\u30e8\u30fb\u30b7\uff01'\n  end\n\n  def damage\n    1\n  end\n\n  def dead\n    def self.alive?\n      false\n    end\n\n    def self.spend_a_night\n      :RIP\n    end\n  end\n\n  def hi(other)\n    @neighbors << other\n  end\n\n  def mutate_into_doko\n    @life = 4\n\n    def self.dead\n      throw bomb\n    end\n\n    def self.name\n      '\u30c9\u30b3'\n    end\n\n    def self.spend_a_night\n      super\n\n      @neighbors.each {|neighbor|\n        attack(neighbor) and neighbor.attack(self) if neighbor.alive?\n      }\n\n      def self.hi(other)\n        # |\u03c9\u30fb`\uff09\u30c1\u30e9\n      end\n    end\n  end\n\n  def name\n    '\u30ba\u30f3'\n  end\n\n  def sleep\n    <<-OFUTON\n    (\u00a63[___]\n    OFUTON\n  end\n\n  def spend_a_night\n    # \u521d\u591c\u306f( \uff9f\u0434\uff9f )\uff78\uff9c\uff6f!!\n    puts name\n\n    def self.spend_a_night\n      sleep\n    end\n  end\nend\n\nKiyoshiLand.new.instance_eval do\n  loop do\n    new_zun = produce_zun\n    new_zun.mutate_into_doko if angry?\n    each_person(&:spend_a_night)\n  end\nend\n\n\n\u5b9f\u884c\u4f8b\n    _\u2570\u2570,   /\uff8a\uff9e\uff7c\uff6e % ~/tmp\n  _/o \u014f\uff67  / \uff80\uff72\uff81\uff6e\uff70% \uff94\uff8a\uff9e\uff72\n\u2208\u30df;\uff89,\uff89   \uff3c\uff7a\uff8f\uff9d\uff84\uff9e% ruby hikiyoshi.rb\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\nhikiyoshi.rb:69:in `throw': uncaught throw \"\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\" (UncaughtThrowError)\n    from hikiyoshi.rb:69:in `dead'\n    from hikiyoshi.rb:32:in `<<'\n    from hikiyoshi.rb:40:in `attack'\n    from hikiyoshi.rb:80:in `block in spend_a_night'\n    from hikiyoshi.rb:79:in `each'\n    from hikiyoshi.rb:79:in `spend_a_night'\n    from hikiyoshi.rb:16:in `block in each_person'\n    from hikiyoshi.rb:16:in `each'\n    from hikiyoshi.rb:16:in `each_person'\n    from hikiyoshi.rb:113:in `block (2 levels) in <main>'\n    from hikiyoshi.rb:110:in `loop'\n    from hikiyoshi.rb:110:in `block in <main>'\n    from hikiyoshi.rb:109:in `instance_eval'\n    from hikiyoshi.rb:109:in `<main>'\n\n\n\u305d\u306e\u4ed6\u306e\u30ad\u30e8\u30b7\n\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 Quine with Ruby\n\u6b4c\u3046\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 with Ruby\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30aa\u30fc\u30c8\u30de\u30c8\u30f3 with Ruby\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30de\u30b7\u30fc\u30f3 with Ruby\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc with Ruby\n\n## \u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u7269\u8a9e\n\n\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u306b\u81ea\u7136\u3068\u751f\u307e\u308c\u3066\u304f\u308b\u30ba\u30f3\u3002\n\n\u30ba\u30f3\u3060\u3051\u3067\u4ef2\u3088\u304f\u66ae\u3089\u3059\u304c\u3001\u307e\u308c\u306b\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u306e\u6012\u308a\u306b\u3088\u308a\u30c9\u30b3\u306b\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\u30c9\u30b3\u306b\u306a\u3063\u305f\u30ba\u30f3\u306f\u591c\u306b\u306a\u308b\u3068\u5468\u308a\u306e\u30ba\u30f3\u3068\u6226\u3044\u3001\u751f\u304d\u5ef6\u3073\u305f\u30c9\u30b3\u306f\u65b0\u3057\u3044\u30ba\u30f3\u3068\u95a2\u308f\u308b\u3053\u3068\u306a\u304f\u4e00\u4eba\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u3092\u751f\u304d\u3066\u3044\u304f...\u3002\n\n\u30c9\u30b3\u306b\u306a\u3063\u305f\u30ba\u30f3\u304c\u6b7b\u306c\u3068\u304d\u30ad\u30e8\u30b7\u30e9\u30f3\u30c9\u306e\u6012\u308a\u304c\u7206\u767a\u3059\u308b\u3002\n\n```rb\nclass KiyoshiLand\n  def initialize\n    @people = []\n  end\n\n  def <<(newcomer)\n    @people.select(&:alive?).each {|person| person.hi(newcomer) and newcomer.hi(person) }\n    @people << newcomer\n  end\n\n  def angry?\n    rand(2).zero?\n  end\n\n  def each_person\n    @people.each {|person| yield person }\n  end\n\n  def produce_zun\n    Zun.new.tap {|zun| self << zun }\n  end\nend\n\nclass Zun\n  def initialize\n    @life = 1\n    @neighbors = []\n  end\n\n  def <<(damage)\n    @life -= damage\n    dead unless @life > 0\n  end\n\n  def alive?\n    true\n  end\n\n  def attack(person)\n    person << damage\n  end\n\n  def bomb\n    '\u30ad\u30fb\u30e8\u30fb\u30b7\uff01'\n  end\n\n  def damage\n    1\n  end\n\n  def dead\n    def self.alive?\n      false\n    end\n\n    def self.spend_a_night\n      :RIP\n    end\n  end\n\n  def hi(other)\n    @neighbors << other\n  end\n\n  def mutate_into_doko\n    @life = 4\n\n    def self.dead\n      throw bomb\n    end\n\n    def self.name\n      '\u30c9\u30b3'\n    end\n\n    def self.spend_a_night\n      super\n\n      @neighbors.each {|neighbor|\n        attack(neighbor) and neighbor.attack(self) if neighbor.alive?\n      }\n\n      def self.hi(other)\n        # |\u03c9\u30fb`\uff09\u30c1\u30e9\n      end\n    end\n  end\n\n  def name\n    '\u30ba\u30f3'\n  end\n\n  def sleep\n    <<-OFUTON\n    (\u00a63[___]\n    OFUTON\n  end\n\n  def spend_a_night\n    # \u521d\u591c\u306f( \uff9f\u0434\uff9f )\uff78\uff9c\uff6f!!\n    puts name\n\n    def self.spend_a_night\n      sleep\n    end\n  end\nend\n\nKiyoshiLand.new.instance_eval do\n  loop do\n    new_zun = produce_zun\n    new_zun.mutate_into_doko if angry?\n    each_person(&:spend_a_night)\n  end\nend\n```\n\n## \u5b9f\u884c\u4f8b\n\n```console\n    _\u2570\u2570,   /\uff8a\uff9e\uff7c\uff6e % ~/tmp\n  _/o \u014f\uff67  / \uff80\uff72\uff81\uff6e\uff70% \uff94\uff8a\uff9e\uff72\n\u2208\u30df;\uff89,\uff89   \uff3c\uff7a\uff8f\uff9d\uff84\uff9e% ruby hikiyoshi.rb\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\nhikiyoshi.rb:69:in `throw': uncaught throw \"\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\" (UncaughtThrowError)\n\tfrom hikiyoshi.rb:69:in `dead'\n\tfrom hikiyoshi.rb:32:in `<<'\n\tfrom hikiyoshi.rb:40:in `attack'\n\tfrom hikiyoshi.rb:80:in `block in spend_a_night'\n\tfrom hikiyoshi.rb:79:in `each'\n\tfrom hikiyoshi.rb:79:in `spend_a_night'\n\tfrom hikiyoshi.rb:16:in `block in each_person'\n\tfrom hikiyoshi.rb:16:in `each'\n\tfrom hikiyoshi.rb:16:in `each_person'\n\tfrom hikiyoshi.rb:113:in `block (2 levels) in <main>'\n\tfrom hikiyoshi.rb:110:in `loop'\n\tfrom hikiyoshi.rb:110:in `block in <main>'\n\tfrom hikiyoshi.rb:109:in `instance_eval'\n\tfrom hikiyoshi.rb:109:in `<main>'\n```\n\n## \u305d\u306e\u4ed6\u306e\u30ad\u30e8\u30b7\n\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 Quine with Ruby](http://qiita.com/hanachin_/items/856ecb53fe486c6d4a12)\n- [\u6b4c\u3046\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 with Ruby](http://qiita.com/hanachin_/items/a4547d88e9008d390f58)\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30aa\u30fc\u30c8\u30de\u30c8\u30f3 with Ruby](http://qiita.com/hanachin_/items/2242c7bd33af39cc6cab)\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30de\u30b7\u30fc\u30f3 with Ruby](http://qiita.com/hanachin_/items/b037b2e602c0bdee6a89)\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc with Ruby](http://qiita.com/hanachin_/items/bad105e11ab707fbaf4c)\n", "tags": ["Ruby", "\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7"]}