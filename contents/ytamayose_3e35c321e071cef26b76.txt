{"context": "Amazon Linux\u306bh2o\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n*EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\u301ch2o\u8d77\u52d5\u301cindex.html\u8868\u793a\u307e\u3067\n*EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\u306f\u5272\u611b\n\nh2o\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\uff082016/03/06\u3000\u6642\u70b9\uff09\n\n# h2o --version\nh2o version 2.0.0-DEV\nOpenSSL: LibreSSL 2.2.6\n\n\n\u4e8b\u524d\u4f5c\u696d\uff08EC2\u306e\u901a\u4fe1\u8a31\u53ef\uff09\ntcp:20(SSH)\ntcp:80(HTTP)\ntcp:443(HTTPS)\n\nSSH\u63a5\u7d9a->root\u306b\u5909\u66f4\n$ sudo su\n\n\n\u5fc5\u8981\u306a\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ yum -y groupinstall \"Development Tools\"\n$ yum -y install curl curl-devel\n$ yum -y install libarchive libarchive-devel\n$ yum -y install expat expat-devel\n$ yum -y install libyaml-devel\n$ yum -y install zlib zlib-devel\n$ yum -y install openssl\n\n\ncmake3.0.2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd /usr/local/src\n$ wget http://www.cmake.org/files/v3.0/cmake-3.0.2.tar.gz\n$ tar -xvf cmake-3.0.2.tar.gz\n$ cd cmake-3.0.2\n./bootstrap --prefix=/usr       \\\n        --system-libs       \\\n        --mandir=/share/man \\\n        --docdir=/share/doc/cmake-3.0.2   &&\n$ make\n$ make install\n\n\nh2o\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd /usr/local/src\n$ git clone https://github.com/h2o/h2o.git\n$ cd h2o/\n$ cmake -DWITH_BUNDLED_SSL=on .\n$ make h2o\n$ make install\n\n\n\u81ea\u5df1\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\uff083650\u65e5\u6709\u52b9\uff09\n$ cd /usr/local/src/h2o\n$ mkdir conf\n$ cd conf\n$ openssl genrsa 2048 > cert.key\n$ openssl req -new -key cert.key  > cert.csr\n$ openssl x509 -days 3650 -req -signkey cert.key < cert.csr > cert.pem\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\nlog\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n$ touch /usr/local/src/h2o/access-log\n$ touch /usr/local/src/h2o/error-log\n$ touch /usr/local/src/h2o/pid-file\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n$ cd /usr/local/src/h2o/conf\n$ vi h2o.conf\n\nh2o.conf\u306b\u4ee5\u4e0b\u3092\u8a18\u8ff0\nuser: root\nhosts:\n  \"*\":\n    listen:\n      port: 443\n      ssl:\n        certificate-file: /usr/local/src/h2o/conf/cert.pem\n        key-file:  /usr/local/src/h2o/conf/cert.key\n    paths:\n      \"/\":\n        file.dir: /usr/local/src/h2o/doc\n\naccess-log: /usr/local/src/h2o/access-log\nerror-log: /usr/local/src/h2o/error-log\npid-file: /usr/local/src/h2o/pid-file\n\n\nh2o\u8d77\u52d5\n\u8d77\u52d5\u524d\u306e\u30c1\u30a7\u30c3\u30af\n$ /usr/local/src/h2o/h2o -m test -c /usr/local/src/h2o/conf/h2o.conf\n\n\u8d77\u52d5\n$ /usr/local/src/h2o/h2o -m daemon -c /usr/local/src/h2o/conf/h2o.conf\n\n\u505c\u6b62\n$ kill -TERM `cat /usr/local/src/h2o/pid-file`\n\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u63a5\u7d9a\u3057\u3066\u78ba\u8a8d\nhttps:///index.html\n\n\u53c2\u8003\n\nh2o\u69cb\u7bc9\u4f5c\u696d\u30e1\u30e2\nH2O\u3067WebSocket\u3092\u8a66\u3057\u3066\u307f\u305f\n\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u3092openssl\u3067\u4f5c\u308b\uff08\u8a73\u7d30\u7248\uff09\n\nAmazon Linux\u306b[h2o](https://github.com/h2o/h2o)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n*EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\u301ch2o\u8d77\u52d5\u301cindex.html\u8868\u793a\u307e\u3067\n*EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\u306f\u5272\u611b\n\n\n- h2o\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\uff082016/03/06\u3000\u6642\u70b9\uff09\n\n```bash:\n# h2o --version\nh2o version 2.0.0-DEV\nOpenSSL: LibreSSL 2.2.6\n```\n\n# \u4e8b\u524d\u4f5c\u696d\uff08EC2\u306e\u901a\u4fe1\u8a31\u53ef\uff09\ntcp:20(SSH)\ntcp:80(HTTP)\ntcp:443(HTTPS)\n\n# SSH\u63a5\u7d9a->root\u306b\u5909\u66f4\n```bash:\n$ sudo su\n```\n\n# \u5fc5\u8981\u306a\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash:\n$ yum -y groupinstall \"Development Tools\"\n$ yum -y install curl curl-devel\n$ yum -y install libarchive libarchive-devel\n$ yum -y install expat expat-devel\n$ yum -y install libyaml-devel\n$ yum -y install zlib zlib-devel\n$ yum -y install openssl\n```\n\n# cmake3.0.2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash:\n$ cd /usr/local/src\n$ wget http://www.cmake.org/files/v3.0/cmake-3.0.2.tar.gz\n$ tar -xvf cmake-3.0.2.tar.gz\n$ cd cmake-3.0.2\n./bootstrap --prefix=/usr       \\\n        --system-libs       \\\n        --mandir=/share/man \\\n        --docdir=/share/doc/cmake-3.0.2   &&\n$ make\n$ make install\n```\n\n# h2o\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash:\n$ cd /usr/local/src\n$ git clone https://github.com/h2o/h2o.git\n$ cd h2o/\n$ cmake -DWITH_BUNDLED_SSL=on .\n$ make h2o\n$ make install\n```\n\n# \u81ea\u5df1\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\uff083650\u65e5\u6709\u52b9\uff09\n```bash\n$ cd /usr/local/src/h2o\n$ mkdir conf\n$ cd conf\n$ openssl genrsa 2048 > cert.key\n$ openssl req -new -key cert.key  > cert.csr\n$ openssl x509 -days 3650 -req -signkey cert.key < cert.csr > cert.pem\n```\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\nlog\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n```bash\n$ touch /usr/local/src/h2o/access-log\n$ touch /usr/local/src/h2o/error-log\n$ touch /usr/local/src/h2o/pid-file\n```\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n```bash:\n$ cd /usr/local/src/h2o/conf\n$ vi h2o.conf\n```\n\nh2o.conf\u306b\u4ee5\u4e0b\u3092\u8a18\u8ff0\n\n```bash:\nuser: root\nhosts:\n  \"*\":\n    listen:\n      port: 443\n      ssl:\n        certificate-file: /usr/local/src/h2o/conf/cert.pem\n        key-file:  /usr/local/src/h2o/conf/cert.key\n    paths:\n      \"/\":\n        file.dir: /usr/local/src/h2o/doc\n\naccess-log: /usr/local/src/h2o/access-log\nerror-log: /usr/local/src/h2o/error-log\npid-file: /usr/local/src/h2o/pid-file\n```\n\n# h2o\u8d77\u52d5\n\u8d77\u52d5\u524d\u306e\u30c1\u30a7\u30c3\u30af\n\n```bash:\n$ /usr/local/src/h2o/h2o -m test -c /usr/local/src/h2o/conf/h2o.conf\n```\n\u8d77\u52d5\n\n```bash:\n$ /usr/local/src/h2o/h2o -m daemon -c /usr/local/src/h2o/conf/h2o.conf\n```\n\u505c\u6b62\n\n```bash:\n$ kill -TERM `cat /usr/local/src/h2o/pid-file`\n```\n\n# \u30d6\u30e9\u30a6\u30b6\u304b\u3089\u63a5\u7d9a\u3057\u3066\u78ba\u8a8d\nhttps://<YOUR DOMAIN>/index.html\n\n# \u53c2\u8003\n- [h2o\u69cb\u7bc9\u4f5c\u696d\u30e1\u30e2](http://nk-kungfu.hatenablog.com/entry/2016/02/13/170251)\n- [H2O\u3067WebSocket\u3092\u8a66\u3057\u3066\u307f\u305f](http://bulbulpaul.com/blog/posts/2015/05/websocket-h2o/)\n- [\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u3092openssl\u3067\u4f5c\u308b\uff08\u8a73\u7d30\u7248\uff09](http://d.hatena.ne.jp/ozuma/20130511/1368284304)\n", "tags": ["AWS", "h2o"]}