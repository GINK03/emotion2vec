{"context": " More than 1 year has passed since last update.\n\nGitLab | GitLab\u306eWebHook\u306ePush\u30a4\u30d9\u30f3\u30c8\u3092WEBRic\u3067\u53d6\u5f97\u3057\u3066\u307f\u308b\n\n\u6982\u8981\nGitLab\u306eWebHook\u306ePush\u30a4\u30d9\u30f3\u30c8\u3092WEBRic\u3067\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u524d\u63d0\n\n\u5bfe\u8c61\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066, \u81ea\u4f5cgem gottani \u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\n\n\n\u624b\u9806\n\nWebHook\u3092\u53d7\u3051\u53d6\u308b\u5074\u306e\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\nGitLab\u306e\u30b5\u30f3\u30d7\u30eb\u305d\u306e\u307e\u307e\u306e\u6700\u4f4e\u9650\u306e\u30b5\u30fc\u30d0\u30fc\u5074\u30b3\u30fc\u30c9\u3067\u3059\u3002\nrequire 'webrick'\n\nserver = WEBrick::HTTPServer.new(Port: ARGV.first)\nserver.mount_proc '/' do |req, res|\n  puts req.body\nend\n\ntrap 'INT' do server.shutdown end\nserver.start\n\n\n\u53d7\u4fe1\u5074\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\nruby server.rb 8000\n\n\nWebHook\u3092\u767b\u9332\u3057\u307e\u3059\nGitLab\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30e1\u30cb\u30e5\u30fc\u306eSetting=>Web Hooks\u304b\u3089URL\u3092\u767b\u9332\u3002\n\u767b\u9332\u5f8c\u306e\u753b\u9762\u304c\u4ee5\u4e0b\u3067\u3059\u3002\n\n\ngottani \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9069\u5f53\u306b\u5909\u66f4\u3057\u3066 push \u3057\u307e\u3059\n$ echo hige > hige.txt\n$ git add hige.txt\n$ git commit -m \"Add hige.txt\"\n$ git push origin master\n\n\n\u53d7\u4fe1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\n$ ruby server.rb 8000\n[2014-07-22 23:28:35] INFO  WEBrick 1.3.1\n[2014-07-22 23:28:35] INFO  ruby 2.0.0 (2014-02-24) [i386-mingw32]\n[2014-07-22 23:28:35] INFO  WEBrick::HTTPServer#start: pid=2316 port=8000\n{\"before\":\"a1b404795c2285662b6bba049320703abaf8f74b\",\"after\":\"e44542e4f4b6cab353563a2807b7df7e0b3b765e\",\"ref\":\"refs/heads/master\",\"user_id\":4,\"user_name\":\"some_group\",\"project_id\":110,\"repository\":{\"name\":\"gottani\",\"url\":\"git@some_path:some_group/gottani.git\",\"description\":\"GitLab CI\u30c6\u30b9\u30c8\u7528\",\"homepage\":\"http://some_path/some_group/gottani\"},\"commits\":[{\"id\":\"e44542e4f4b6cab353563a2807b7df7e0b3b765e\",\"message\":\"Add hige.txt\",\"timestamp\":\"2014-07-22T13:05:25+09:00\",\"url\":\"http://some_path/some_group/gottani/commit/e44542e4f4b6cab353563a2807b7df7e0b3b765e\",\"author\":{\"name\":\"some_user\",\"email\":\"some_group@example.com\"}}],\"total_commits_count\":1}\nsome_path - - [22/Jul/2014:23:28:40 JST] \"POST / HTTP/1.1\" 200 0\n- -> /\n\n# GitLab | GitLab\u306eWebHook\u306ePush\u30a4\u30d9\u30f3\u30c8\u3092WEBRic\u3067\u53d6\u5f97\u3057\u3066\u307f\u308b\n\n## \u6982\u8981\nGitLab\u306eWebHook\u306ePush\u30a4\u30d9\u30f3\u30c8\u3092WEBRic\u3067\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u524d\u63d0\n\n* \u5bfe\u8c61\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066, \u81ea\u4f5cgem gottani \u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\n\n## \u624b\u9806\n\n### WebHook\u3092\u53d7\u3051\u53d6\u308b\u5074\u306e\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\n\nGitLab\u306e\u30b5\u30f3\u30d7\u30eb\u305d\u306e\u307e\u307e\u306e\u6700\u4f4e\u9650\u306e\u30b5\u30fc\u30d0\u30fc\u5074\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n~~~ruby\nrequire 'webrick'\n\nserver = WEBrick::HTTPServer.new(Port: ARGV.first)\nserver.mount_proc '/' do |req, res|\n  puts req.body\nend\n\ntrap 'INT' do server.shutdown end\nserver.start\n~~~\n\n### \u53d7\u4fe1\u5074\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\n\n~~~bash\nruby server.rb 8000\n~~~\n\n### WebHook\u3092\u767b\u9332\u3057\u307e\u3059\n\nGitLab\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30e1\u30cb\u30e5\u30fc\u306eSetting=>Web Hooks\u304b\u3089URL\u3092\u767b\u9332\u3002\n\u767b\u9332\u5f8c\u306e\u753b\u9762\u304c\u4ee5\u4e0b\u3067\u3059\u3002\n\n![add_webhooks.png](https://qiita-image-store.s3.amazonaws.com/0/43480/e54814f6-9652-0473-69f1-d860ffc4db7d.png)\n\n### gottani \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9069\u5f53\u306b\u5909\u66f4\u3057\u3066 *push* \u3057\u307e\u3059\n\n~~~bash\n$ echo hige > hige.txt\n$ git add hige.txt\n$ git commit -m \"Add hige.txt\"\n$ git push origin master\n~~~\n\n### \u53d7\u4fe1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\n\n~~~bash\n$ ruby server.rb 8000\n[2014-07-22 23:28:35] INFO  WEBrick 1.3.1\n[2014-07-22 23:28:35] INFO  ruby 2.0.0 (2014-02-24) [i386-mingw32]\n[2014-07-22 23:28:35] INFO  WEBrick::HTTPServer#start: pid=2316 port=8000\n{\"before\":\"a1b404795c2285662b6bba049320703abaf8f74b\",\"after\":\"e44542e4f4b6cab353563a2807b7df7e0b3b765e\",\"ref\":\"refs/heads/master\",\"user_id\":4,\"user_name\":\"some_group\",\"project_id\":110,\"repository\":{\"name\":\"gottani\",\"url\":\"git@some_path:some_group/gottani.git\",\"description\":\"GitLab CI\u30c6\u30b9\u30c8\u7528\",\"homepage\":\"http://some_path/some_group/gottani\"},\"commits\":[{\"id\":\"e44542e4f4b6cab353563a2807b7df7e0b3b765e\",\"message\":\"Add hige.txt\",\"timestamp\":\"2014-07-22T13:05:25+09:00\",\"url\":\"http://some_path/some_group/gottani/commit/e44542e4f4b6cab353563a2807b7df7e0b3b765e\",\"author\":{\"name\":\"some_user\",\"email\":\"some_group@example.com\"}}],\"total_commits_count\":1}\nsome_path - - [22/Jul/2014:23:28:40 JST] \"POST / HTTP/1.1\" 200 0\n- -> /\n~~~\n", "tags": ["GitLab", "Ruby"]}