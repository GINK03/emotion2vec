{"context": " More than 1 year has passed since last update.Running a Riak service - Docker Documentation\u306e\u4e00\u756a\u6700\u5f8c\u306eNext Steps\u306e\u3068\u3053\u308d\u3060\u3051\u8a66\u3057\u305f\u30e1\u30e2\u3067\u3059\u3002\nWhy Your Riak Cluster Should Have At Least Five Nodes | Basho\u306b\u3088\u308b\u3068\u958b\u767a\u74b0\u5883\u3067\u306f3\u53f0\u69cb\u6210\u3067\u3082\u3088\u3044\u3051\u3069\u3001\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u3067\u306f\u6700\u4f4e5\u53f0\u69cb\u6210\u304c\u826f\u3044\u3089\u3057\u3044\u3067\u3059\u3002\n\u306a\u308b\u3079\u304f\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3068\u540c\u3058\u69cb\u6210\u3067\u666e\u6bb5\u304b\u3089\u6319\u52d5\u3092\u898b\u3066\u304a\u304d\u305f\u3044\u3068\u8003\u3048\u308b\u306a\u3089\u3070\u3001\u958b\u767a\u74b0\u5883\u30825\u53f0\u69cb\u6210\u3067\u8a66\u3057\u3066\u304a\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u3067\u3082VirtualBox\u30675\u3064\u3082VM\u4f5c\u308b\u306e\u306fMacBook Air\u3067\u306f\u304d\u3064\u3044\u3067\u3059\u3088\u306d\u3002docker\u306a\u30895\u53f0\u69cb\u6210\u3067\u3082\u7c21\u5358\u3067\u3059\u3002\ndocker\u306e\u74b0\u5883\u306fMacOSX - OSX, Vagrant, VirtualBox\u3067docker\u3092\u8a66\u3059 - Qiita [\u30ad\u30fc\u30bf]\u306e\u624b\u9806\u3067\u4e88\u3081\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6e08\u307f\u3068\u3057\u307e\u3059\u3002\n\u3042\u3068\u306fhectcastro/docker-riak\u306e\u624b\u9806\u901a\u308a\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n$ sudo apt-get install -y git curl make sshpass\n$ git clone https://github.com/hectcastro/docker-riak.git\n$ cd docker-riak\n$ make\n$ make riak-container\n\n\nRiak\u8d77\u52d5\nvagrant@precise64:~/docker-riak$ make start-cluster\n./bin/start-cluster.sh\nStarted [riak1] and assigned it the IP [33.33.33.10]\nStarted [riak2] and assigned it the IP [33.33.33.20]\nRequesting that [riak2] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.20' to 'riak@33.33.33.10'\nStarted [riak3] and assigned it the IP [33.33.33.30]\nRequesting that [riak3] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.30' to 'riak@33.33.33.10'\nStarted [riak4] and assigned it the IP [33.33.33.40]\nRequesting that [riak4] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.40' to 'riak@33.33.33.10'\nStarted [riak5] and assigned it the IP [33.33.33.50]\nRequesting that [riak5] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.50' to 'riak@33.33.33.10'\n=============================== Staged Changes ================================\nAction         Details(s)\n-------------------------------------------------------------------------------\njoin           'riak@33.33.33.20'\njoin           'riak@33.33.33.30'\njoin           'riak@33.33.33.40'\njoin           'riak@33.33.33.50'\n-------------------------------------------------------------------------------\n\n\nNOTE: Applying these changes will result in 1 cluster transition\n\n###############################################################################\n                         After cluster transition 1/1\n###############################################################################\n\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid     100.0%     20.3%    'riak@33.33.33.10'\nvalid       0.0%     20.3%    'riak@33.33.33.20'\nvalid       0.0%     20.3%    'riak@33.33.33.30'\nvalid       0.0%     20.3%    'riak@33.33.33.40'\nvalid       0.0%     18.8%    'riak@33.33.33.50'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\nTransfers resulting from cluster changes: 51\n  12 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.50'\n  13 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.40'\n  13 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.30'\n  13 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.20'\n\nCommit these cluster changes? (y/n): y\nCluster changes committed\nvagrant@precise64:~/docker-riak$\n\n\u8d77\u52d5\u72b6\u614b\u3092docker ps\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\nvagrant@precise64:~/docker-riak$ sudo docker ps\nID                  IMAGE                    COMMAND                CREATED             STATUS              PORTS\n124ab8d89f5d        hectcastro/riak:latest   /usr/bin/supervisord   11 seconds ago      Up 11 seconds       49184->8087, 49185->8098, 49186->22   \nd83f8daf6c5e        hectcastro/riak:latest   /usr/bin/supervisord   16 seconds ago      Up 15 seconds       49181->8087, 49182->8098, 49183->22   \n400c498b644c        hectcastro/riak:latest   /usr/bin/supervisord   19 seconds ago      Up 19 seconds       49178->8087, 49179->8098, 49180->22   \n603b0e6c4892        hectcastro/riak:latest   /usr/bin/supervisord   23 seconds ago      Up 23 seconds       49175->8087, 49176->8098, 49177->22   \nf073cb8850c8        hectcastro/riak:latest   /usr/bin/supervisord   27 seconds ago      Up 26 seconds       49172->8087, 49173->8098, 49174->22\n\n\n\u5024\u306e\u8a2d\u5b9a\u3068\u53d6\u5f97\u306e\u30c6\u30b9\u30c8\nBasic Riak API Operations\u3092\u53c2\u8003\u306b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u307e\u305a\u3001\u5024\u306e\u8a2d\u5b9a\u3092\u8a66\u3057\u307e\u3059\u3002\nvagrant@precise64:~/docker-riak$ curl -v -d 'this is a test' \\\n> -H \"Content-Type: text/plain\" \\\n> http://33.33.33.10:8098/riak/test/doc\n* About to connect() to 33.33.33.10 port 8098 (#0)\n*   Trying 33.33.33.10... connected\n> POST /riak/test/doc HTTP/1.1\n> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3\n> Host: 33.33.33.10:8098\n> Accept: */*\n> Content-Type: text/plain\n> Content-Length: 14\n> \n* upload completely sent off: 14out of 14 bytes\n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)\n< Date: Sun, 22 Sep 2013 16:00:01 GMT\n< Content-Type: text/plain\n< Content-Length: 0\n< \n* Connection #0 to host 33.33.33.10 left intact\n* Closing connection #0\nvagrant@precise64:~/docker-riak$\n\n\u5024\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\u5024\u306e\u6700\u5f8c\u306b\u6539\u884c\u304c\u306a\u3044\u306e\u3067\u30d7\u30ed\u30f3\u30d7\u30c8\u3068\u7e4b\u304c\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u6b63\u3057\u304f\u53d6\u5f97\u3067\u304d\u3066\u3044\u307e\u3059\u3002\nvagrant@precise64:~/docker-riak$ curl http://33.33.33.10:8098/riak/test/doc\nthis is a testvagrant@precise64:~/docker-riak$\n\n\u5024\u3092\u524a\u9664\u3057\u3066\u6d88\u3048\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3002\nvagrant@precise64:~/docker-riak$ curl -v -X DELETE http://33.33.33test/doc/riak/ \n* About to connect() to 33.33.33.50 port 8098 (#0)\n*   Trying 33.33.33.50... connected\n> DELETE /riak/test/doc HTTP/1.1\n> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3\n> Host: 33.33.33.50:8098\n> Accept: */*\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)\n< Date: Sun, 22 Sep 2013 16:01:18 GMT\n< Content-Type: text/plain\n< Content-Length: 0\n< \n* Connection #0 to host 33.33.33.50 left intact\n* Closing connection #0\nvagrant@precise64:~/docker-riak$ curl http://33.33.33.10:8098/riak/test/doc\nnot found\nvagrant@precise64:~/docker-riak$\n\n[Running a Riak service - Docker Documentation](http://docs.docker.io/en/latest/examples/running_riak_service/)\u306e\u4e00\u756a\u6700\u5f8c\u306eNext Steps\u306e\u3068\u3053\u308d\u3060\u3051\u8a66\u3057\u305f\u30e1\u30e2\u3067\u3059\u3002\n\n[Why Your Riak Cluster Should Have At Least Five Nodes | Basho](http://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/)\u306b\u3088\u308b\u3068\u958b\u767a\u74b0\u5883\u3067\u306f3\u53f0\u69cb\u6210\u3067\u3082\u3088\u3044\u3051\u3069\u3001\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u3067\u306f\u6700\u4f4e5\u53f0\u69cb\u6210\u304c\u826f\u3044\u3089\u3057\u3044\u3067\u3059\u3002\n\n\u306a\u308b\u3079\u304f\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u3068\u540c\u3058\u69cb\u6210\u3067\u666e\u6bb5\u304b\u3089\u6319\u52d5\u3092\u898b\u3066\u304a\u304d\u305f\u3044\u3068\u8003\u3048\u308b\u306a\u3089\u3070\u3001\u958b\u767a\u74b0\u5883\u30825\u53f0\u69cb\u6210\u3067\u8a66\u3057\u3066\u304a\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\n\u3067\u3082VirtualBox\u30675\u3064\u3082VM\u4f5c\u308b\u306e\u306fMacBook Air\u3067\u306f\u304d\u3064\u3044\u3067\u3059\u3088\u306d\u3002docker\u306a\u30895\u53f0\u69cb\u6210\u3067\u3082\u7c21\u5358\u3067\u3059\u3002\n\ndocker\u306e\u74b0\u5883\u306f[MacOSX - OSX, Vagrant, VirtualBox\u3067docker\u3092\u8a66\u3059 - Qiita \\[\u30ad\u30fc\u30bf\\]](http://qiita.com/hnakamur/items/4cf9e59e16c7692a0dc4)\u306e\u624b\u9806\u3067\u4e88\u3081\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6e08\u307f\u3068\u3057\u307e\u3059\u3002\n\n\u3042\u3068\u306f[hectcastro/docker-riak](https://github.com/hectcastro/docker-riak)\u306e\u624b\u9806\u901a\u308a\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n## \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n```shell-session\n$ sudo apt-get install -y git curl make sshpass\n$ git clone https://github.com/hectcastro/docker-riak.git\n$ cd docker-riak\n$ make\n$ make riak-container\n```\n\n## Riak\u8d77\u52d5\n\n```shell-session\nvagrant@precise64:~/docker-riak$ make start-cluster\n./bin/start-cluster.sh\nStarted [riak1] and assigned it the IP [33.33.33.10]\nStarted [riak2] and assigned it the IP [33.33.33.20]\nRequesting that [riak2] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.20' to 'riak@33.33.33.10'\nStarted [riak3] and assigned it the IP [33.33.33.30]\nRequesting that [riak3] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.30' to 'riak@33.33.33.10'\nStarted [riak4] and assigned it the IP [33.33.33.40]\nRequesting that [riak4] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.40' to 'riak@33.33.33.10'\nStarted [riak5] and assigned it the IP [33.33.33.50]\nRequesting that [riak5] join the cluster..\nSuccess: staged join request for 'riak@33.33.33.50' to 'riak@33.33.33.10'\n=============================== Staged Changes ================================\nAction         Details(s)\n-------------------------------------------------------------------------------\njoin           'riak@33.33.33.20'\njoin           'riak@33.33.33.30'\njoin           'riak@33.33.33.40'\njoin           'riak@33.33.33.50'\n-------------------------------------------------------------------------------\n\n\nNOTE: Applying these changes will result in 1 cluster transition\n\n###############################################################################\n                         After cluster transition 1/1\n###############################################################################\n\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid     100.0%     20.3%    'riak@33.33.33.10'\nvalid       0.0%     20.3%    'riak@33.33.33.20'\nvalid       0.0%     20.3%    'riak@33.33.33.30'\nvalid       0.0%     20.3%    'riak@33.33.33.40'\nvalid       0.0%     18.8%    'riak@33.33.33.50'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\nTransfers resulting from cluster changes: 51\n  12 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.50'\n  13 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.40'\n  13 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.30'\n  13 transfers from 'riak@33.33.33.10' to 'riak@33.33.33.20'\n\nCommit these cluster changes? (y/n): y\nCluster changes committed\nvagrant@precise64:~/docker-riak$\n```\n\n\u8d77\u52d5\u72b6\u614b\u3092docker ps\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```shell-session\nvagrant@precise64:~/docker-riak$ sudo docker ps\nID                  IMAGE                    COMMAND                CREATED             STATUS              PORTS\n124ab8d89f5d        hectcastro/riak:latest   /usr/bin/supervisord   11 seconds ago      Up 11 seconds       49184->8087, 49185->8098, 49186->22   \nd83f8daf6c5e        hectcastro/riak:latest   /usr/bin/supervisord   16 seconds ago      Up 15 seconds       49181->8087, 49182->8098, 49183->22   \n400c498b644c        hectcastro/riak:latest   /usr/bin/supervisord   19 seconds ago      Up 19 seconds       49178->8087, 49179->8098, 49180->22   \n603b0e6c4892        hectcastro/riak:latest   /usr/bin/supervisord   23 seconds ago      Up 23 seconds       49175->8087, 49176->8098, 49177->22   \nf073cb8850c8        hectcastro/riak:latest   /usr/bin/supervisord   27 seconds ago      Up 26 seconds       49172->8087, 49173->8098, 49174->22\n```\n\n## \u5024\u306e\u8a2d\u5b9a\u3068\u53d6\u5f97\u306e\u30c6\u30b9\u30c8\n\n[Basic Riak API Operations](http://docs.basho.co.jp/riak/latest/tutorials/fast-track/Basic-Riak-API-Operations/)\u3092\u53c2\u8003\u306b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u307e\u305a\u3001\u5024\u306e\u8a2d\u5b9a\u3092\u8a66\u3057\u307e\u3059\u3002\n\n```shell-session\nvagrant@precise64:~/docker-riak$ curl -v -d 'this is a test' \\\n> -H \"Content-Type: text/plain\" \\\n> http://33.33.33.10:8098/riak/test/doc\n* About to connect() to 33.33.33.10 port 8098 (#0)\n*   Trying 33.33.33.10... connected\n> POST /riak/test/doc HTTP/1.1\n> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3\n> Host: 33.33.33.10:8098\n> Accept: */*\n> Content-Type: text/plain\n> Content-Length: 14\n> \n* upload completely sent off: 14out of 14 bytes\n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)\n< Date: Sun, 22 Sep 2013 16:00:01 GMT\n< Content-Type: text/plain\n< Content-Length: 0\n< \n* Connection #0 to host 33.33.33.10 left intact\n* Closing connection #0\nvagrant@precise64:~/docker-riak$\n```\n\n\u5024\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\u5024\u306e\u6700\u5f8c\u306b\u6539\u884c\u304c\u306a\u3044\u306e\u3067\u30d7\u30ed\u30f3\u30d7\u30c8\u3068\u7e4b\u304c\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u6b63\u3057\u304f\u53d6\u5f97\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n```shell-session\nvagrant@precise64:~/docker-riak$ curl http://33.33.33.10:8098/riak/test/doc\nthis is a testvagrant@precise64:~/docker-riak$\n```\n\n\u5024\u3092\u524a\u9664\u3057\u3066\u6d88\u3048\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```shell-session\nvagrant@precise64:~/docker-riak$ curl -v -X DELETE http://33.33.33test/doc/riak/ \n* About to connect() to 33.33.33.50 port 8098 (#0)\n*   Trying 33.33.33.50... connected\n> DELETE /riak/test/doc HTTP/1.1\n> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3\n> Host: 33.33.33.50:8098\n> Accept: */*\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)\n< Date: Sun, 22 Sep 2013 16:01:18 GMT\n< Content-Type: text/plain\n< Content-Length: 0\n< \n* Connection #0 to host 33.33.33.50 left intact\n* Closing connection #0\nvagrant@precise64:~/docker-riak$ curl http://33.33.33.10:8098/riak/test/doc\nnot found\nvagrant@precise64:~/docker-riak$\n```", "tags": ["docker0.6.2", "riak1.4.2"]}